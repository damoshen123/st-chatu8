(function(_0x3e1ff,_0x5db42d){function _0xf890b5(_0x6f4cd6,_0x3b9aee,_0x10339c,_0x2071a0){return _0x4216(_0x2071a0-0x125,_0x10339c);}const _0x4c8217=_0x3e1ff();function _0x13ab73(_0x2809a5,_0x8c1569,_0x2d673f,_0x558feb){return _0x4216(_0x8c1569-0x133,_0x558feb);}while(!![]){try{const _0xaa930b=-parseInt(_0x13ab73(0x2ad,0x29a,0x29e,0x2c9))/(-0x1caf+0x1*-0x90d+-0x25bd*-0x1)+parseInt(_0x13ab73(0x283,0x292,0x27a,0x2c9))/(0x16dd+-0x26d5+-0x332*-0x5)+parseInt(_0x13ab73(0x2ca,0x2da,0x312,0x30c))/(0x815*0x4+0x19cb+-0x1*0x3a1c)*(-parseInt(_0x13ab73(0x2ad,0x2c9,0x2f1,0x2e3))/(0x835+0xb8c*0x3+0x285*-0x11))+parseInt(_0x13ab73(0x2f6,0x2ed,0x316,0x31c))/(-0xd*-0x76+0x249f+-0x2a98)*(-parseInt(_0xf890b5(0x2d9,0x2c9,0x29e,0x2d1))/(-0x434+0x1e3c+0x1a02*-0x1))+parseInt(_0xf890b5(0x2e8,0x2d0,0x2d8,0x2dc))/(-0x88b+-0x2d1+0xb63)*(parseInt(_0x13ab73(0x267,0x299,0x26c,0x27d))/(-0x2df*0x7+0x1*-0x15aa+0x29cb))+parseInt(_0x13ab73(0x2de,0x2f0,0x30f,0x310))/(0x22fe+0x186b+-0x3b60)+-parseInt(_0x13ab73(0x2fc,0x2d8,0x307,0x2aa))/(-0x45*0x71+-0xd*-0x17+0x1d54)*(-parseInt(_0x13ab73(0x2fb,0x2d5,0x2ef,0x300))/(-0x97*0x1+0x71d+-0x67b));if(_0xaa930b===_0x5db42d)break;else _0x4c8217['push'](_0x4c8217['shift']());}catch(_0xd794b){_0x4c8217['push'](_0x4c8217['shift']());}}}(_0x4948,-0x2*-0x3a53c+-0x1e16*0x7a+-0xb*-0x15654));const _0x45bec5=(function(){const _0x10f818={};_0x10f818['adiru']='[ComfyUI\x20K'+_0x4eeefa(0x167,0x17a,0x132,0x14d)+_0x4363df(0x5e,0x28,0x7b,0x4d),_0x10f818[_0x4363df(0x76,0x7e,0x47,0x48)]=_0x4363df(0x1c,-0x1e,0x22,0x13);function _0x4eeefa(_0x3186d3,_0x1cd029,_0x2c37a8,_0x276903){return _0x4216(_0x276903- -0x4e,_0x1cd029);}_0x10f818[_0x4eeefa(0x15a,0x113,0x105,0x131)]=_0x4363df(0x57,0x49,0x84,0x1f),_0x10f818[_0x4363df(0x43,0x46,0x56,0x5d)]=function(_0x3c210b,_0x536f62){return _0x3c210b===_0x536f62;};function _0x4363df(_0x5668be,_0xa174a3,_0x258b3f,_0x51cb0c){return _0x4216(_0x5668be- -0x139,_0x51cb0c);}_0x10f818[_0x4eeefa(0x100,0x11e,0x139,0x12b)]=_0x4eeefa(0xf8,0xf2,0x115,0x115);const _0x34f31c=_0x10f818;let _0x27640d=!![];return function(_0x1b1679,_0x234589){const _0x107dc5={'pwPJw':_0x34f31c[_0x3c4419(0x12b,0x17e,0x115,0x147)],'QlzBA':function(_0x2f90ed,_0x1160d1){return _0x2f90ed===_0x1160d1;},'nQaya':_0x34f31c[_0x3c4419(0x170,0x121,0x136,0x14e)],'ouaeO':_0x34f31c[_0x2b6fe4(0x4d,0x5e,0xa6,0x83)],'PJCBQ':function(_0xc0d41e,_0x29ddd4){function _0x473a28(_0x1dde58,_0x542e28,_0x13885b,_0x290608){return _0x3c4419(_0x1dde58-0xc,_0x542e28-0x100,_0x13885b,_0x542e28-0x2b9);}return _0x34f31c[_0x473a28(0x3b0,0x3d4,0x3a6,0x3d4)](_0xc0d41e,_0x29ddd4);},'fKvoo':_0x34f31c['yDubB']},_0x3c6fb0=_0x27640d?function(){function _0x3ca1eb(_0x3b441a,_0x9a0950,_0xddffc7,_0x1d65a4){return _0x3c4419(_0x3b441a-0x14f,_0x9a0950-0x141,_0x3b441a,_0x9a0950- -0x375);}const _0x74ed8d={'rjLgM':_0x107dc5[_0x3ca1eb(-0x28b,-0x261,-0x23a,-0x299)],'ZIufH':function(_0xa3ca51){return _0xa3ca51();}};function _0x4d1429(_0x106b9f,_0x2b1cbb,_0x3dc993,_0x5d1b48){return _0x2b6fe4(_0x106b9f-0x1c4,_0x3dc993,_0x3dc993-0x1bb,_0x2b1cbb-0x4e3);}if(_0x107dc5[_0x3ca1eb(-0x264,-0x256,-0x233,-0x224)](_0x107dc5['nQaya'],_0x107dc5[_0x4d1429(0x54a,0x55f,0x54c,0x597)]))_0x13d580[_0x4d1429(0x54c,0x564,0x58b,0x587)](_0x74ed8d[_0x3ca1eb(-0x1ee,-0x21b,-0x1f3,-0x220)]),_0x74ed8d[_0x4d1429(0x54f,0x571,0x568,0x55e)](_0x356c95);else{if(_0x234589){if(_0x107dc5[_0x4d1429(0x518,0x551,0x540,0x521)](_0x4d1429(0x547,0x54a,0x56a,0x567),_0x107dc5[_0x3ca1eb(-0x252,-0x25f,-0x258,-0x22b)])){const _0x155505=_0x234589[_0x4d1429(0x57d,0x553,0x51b,0x564)](_0x1b1679,arguments);return _0x234589=null,_0x155505;}else{const _0x17af99=_0x51c915?function(){function _0x290aeb(_0x3e27a8,_0x2c44b1,_0x506ac7,_0x5c5018){return _0x3ca1eb(_0x506ac7,_0x5c5018-0x3cd,_0x506ac7-0x45,_0x5c5018-0x59);}if(_0x8db4f){const _0x3e38a2=_0x1805ef[_0x290aeb(0x137,0x161,0x171,0x163)](_0xfe43db,arguments);return _0x1f0f7d=null,_0x3e38a2;}}:function(){};return _0x1fff09=![],_0x17af99;}}}}:function(){};function _0x3c4419(_0x36da10,_0x57cabc,_0xff14ad,_0xaeafdd){return _0x4363df(_0xaeafdd-0xd8,_0x57cabc-0x1ed,_0xff14ad-0x193,_0xff14ad);}function _0x2b6fe4(_0x5dcb29,_0xbc742,_0x245c14,_0x11baab){return _0x4363df(_0x11baab-0x3d,_0xbc742-0x157,_0x245c14-0x176,_0xbc742);}return _0x27640d=![],_0x3c6fb0;};}()),_0x2b0bec=_0x45bec5(this,function(){function _0x47fc4d(_0x1675b4,_0x470732,_0x43b83e,_0x5a2634){return _0x4216(_0x43b83e- -0x3ba,_0x470732);}const _0x14fae4={};_0x14fae4[_0x47fc4d(-0x1c9,-0x1e2,-0x1fe,-0x22b)]=_0x47fc4d(-0x243,-0x275,-0x23c,-0x23b)+'+$';const _0x1370ce=_0x14fae4;function _0x57b09f(_0x2cb28a,_0x365fc6,_0x4fc286,_0x539855){return _0x4216(_0x539855- -0x2f5,_0x4fc286);}return _0x2b0bec[_0x47fc4d(-0x280,-0x28b,-0x252,-0x22e)]()[_0x47fc4d(-0x1f9,-0x228,-0x229,-0x20d)](_0x1370ce[_0x47fc4d(-0x1d0,-0x220,-0x1fe,-0x1ed)])['toString']()[_0x57b09f(-0x12d,-0x152,-0x183,-0x161)+'r'](_0x2b0bec)[_0x47fc4d(-0x220,-0x259,-0x229,-0x24d)](_0x1370ce[_0x57b09f(-0x103,-0x121,-0x16f,-0x139)]);});function _0x4216(_0x38f757,_0x28c6c4){_0x38f757=_0x38f757-(-0x1*0x13cd+-0x956*0x2+-0x6*-0x6a1);const _0x59e45f=_0x4948();let _0x48f686=_0x59e45f[_0x38f757];if(_0x4216['HKtvWP']===undefined){var _0x58c7dd=function(_0x479a11){const _0x13d580='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x356c95='',_0x24bcf2='',_0x85ad2=_0x356c95+_0x58c7dd;for(let _0x36999f=0xdb5+-0xc5c+0x73*-0x3,_0x3666af,_0x38689b,_0x1cecab=-0x180+0xddd+-0xc5d;_0x38689b=_0x479a11['charAt'](_0x1cecab++);~_0x38689b&&(_0x3666af=_0x36999f%(0x1bf*0x10+0x7c6+-0x23b2)?_0x3666af*(-0x269e+0x2220+0x4be)+_0x38689b:_0x38689b,_0x36999f++%(-0x1a0d+-0xda0+0x27b1))?_0x356c95+=_0x85ad2['charCodeAt'](_0x1cecab+(-0x1*0x2410+-0xe89*-0x1+-0x1591*-0x1))-(0x2*0x25a+-0x15b9*0x1+0x110f)!==-0x19ac+0x180c+0x4*0x68?String['fromCharCode'](0x5*0x77f+0x1*-0x1605+-0xe77&_0x3666af>>(-(-0x5*-0x1d+-0x28b+-0x7f*-0x4)*_0x36999f&-0x1c6b+-0xf5b+-0x4*-0xaf3)):_0x36999f:0x2f*0xb5+-0x1*0x265f+0x524){_0x38689b=_0x13d580['indexOf'](_0x38689b);}for(let _0x5c74e3=-0x2304+-0x1538+0x383c,_0x2eabbd=_0x356c95['length'];_0x5c74e3<_0x2eabbd;_0x5c74e3++){_0x24bcf2+='%'+('00'+_0x356c95['charCodeAt'](_0x5c74e3)['toString'](0x1670+0x796*-0x3+0x62))['slice'](-(-0x237+0x1d2f+-0x2*0xd7b));}return decodeURIComponent(_0x24bcf2);};_0x4216['VgrNVI']=_0x58c7dd,_0x4216['ByewKB']={},_0x4216['HKtvWP']=!![];}const _0x2d9d89=_0x59e45f[0x138e+0x664+-0x12*0x171],_0x15eaae=_0x38f757+_0x2d9d89,_0x33f8c8=_0x4216['ByewKB'][_0x15eaae];if(!_0x33f8c8){const _0x52f640=function(_0x93b288){this['cuOGRt']=_0x93b288,this['EcUgAu']=[-0x26c9+-0x440+0x2b0a,-0xdf*0x3+-0x2*0xe14+0x1ec5,0x2b*0x31+0x1e57*-0x1+0x161c],this['aPRoUX']=function(){return'newState';},this['lYFJzC']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['SFquHs']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x52f640['prototype']['wEtyHy']=function(){const _0x5cb9fb=new RegExp(this['lYFJzC']+this['SFquHs']),_0x423ced=_0x5cb9fb['test'](this['aPRoUX']['toString']())?--this['EcUgAu'][-0x3fe*0x2+0xa89*0x3+-0x179e]:--this['EcUgAu'][0x484+-0x66+-0x41e];return this['KhSXeH'](_0x423ced);},_0x52f640['prototype']['KhSXeH']=function(_0x17aa5b){if(!Boolean(~_0x17aa5b))return _0x17aa5b;return this['mUEJVH'](this['cuOGRt']);},_0x52f640['prototype']['mUEJVH']=function(_0x9fa250){for(let _0x3571db=-0x20ae+0x4c*-0x1+0x20fa,_0xcde352=this['EcUgAu']['length'];_0x3571db<_0xcde352;_0x3571db++){this['EcUgAu']['push'](Math['round'](Math['random']())),_0xcde352=this['EcUgAu']['length'];}return _0x9fa250(this['EcUgAu'][0x7b1*-0x4+-0x1e7c+0x3d40]);},new _0x52f640(_0x4216)['wEtyHy'](),_0x48f686=_0x4216['VgrNVI'](_0x48f686),_0x4216['ByewKB'][_0x15eaae]=_0x48f686;}else _0x48f686=_0x33f8c8;return _0x48f686;}_0x2b0bec();function _0x4948(){const _0x53d4b2=['BgvK','y29TzNL1AvvYBa','mNW0Fdb8m3WX','AfDKweS','C2vHCMnO','yxbWBgLJyxrPBW','w0nVBwz5vuKGsW','y29UC3rYDwn0BW','EuvpAha','neTHwuzIyG','5yID5AEl5yYw5l+D5Rs75QIH5z2x','EgfJze4','z09QvhC','ugLUzYdLPlhOTkuGkhy','zwvWqwXPDMvDia','qNrKC0y','BgjrAhO','s0zLtLi','rfv6zvu','C3rYAw5NAwz5','DMvYBIK6','mtfQtKfPvu8','vNfwC0S','ue9tva','mZuZmZCXmfzTyKPQuW','r1PuzNK','ote4otyZz3POCNz6','ywrPCNu','DMvYBIK','tcdMNkRORR7NVA4','wfbLuxm','mtKXodyZoeTczhb3vG','wg1uweO','DeXhALq','DvjxwMW','vNjJwMG','AxjLy3qPoG','y29TzNL1Aq','AxHTyMm','rLLtAei','BI9QC29U','zMjnsg4','mJu0mdG0nMPJEKrNza','Bwz5l3bPBMC','uhnryM8','nurXtwjuzq','CMPmz00','zenozLe','mJu0ndm5EfbAuLv1','qur6D1m','DhjPBq','DuXXr2e','u2Pnshm','BwvZC2fNzq','AwfzEgK','ren1qKm','AgvHzgvYCW','q29UDgvUDc1uEq','CLvhyM4','zKrOEwy','Dhj1zq','ugLUzYdMIjdLIP8Gkgq','CwvbELa','AML1z3vHBG','q29TzNLvssbvuG','yNLZB2i','Bwv0Ag9K','AgrTzxa','l3n5C3rLBv9ZDa','ndaXmJKYCvv0v2H2','ENnzv3q','BurpD3e','C3bSAxq','rxbzELq','y2XPzw50','5P2H5lU25lIn5RUH6lAZ77Ym5lIn5zcV5yQO5l+D','mtzMr29gtwW','mtC5otGYDxf4AMDt','Dg9tDhjPBMC','5P2H5lU25lIn5RUH6lAZ77Ym6lEZ6l+hiha','uePdqLe','C2nYAxb0rw5HyG','yxbWBhK','BMzlrfq','vKHsrMe','mxWZFdr8mNWW','vuP0sK4','sfDjwLO','Bw9Kzq','C3rHDhvZ','qwvxAvO','ChDqsNC','AweGu2LSBhLuyq','zKT2B28','B3vHzu8','Eur1yKi','ugLUzYdMIjdLIP8Gkhy','yxrZ','A0D5zfa','Bg9N','kcGOlISPkYKRkq','v3vVvfy','uwX6qKe','uenhDfi','zeLgBuW','vMXfAfy','zMj4u2W','Cefdshy','r0vu','CK9oCgy','5zcV5yQO5l+D5Rs75A6A5PE25zMO77Ym6zE06zQu','EhjXEvO','wKL1zKG','AMrvEMu','ugLUzYdLVilLUlGGkhy'];_0x4948=function(){return _0x53d4b2;};return _0x4948();}import{extension_settings}from'../../../../extensions.js';import{extensionName}from'./config.js';import{getRequestHeaders}from'./utils.js';let keepAliveTimer=null;const KEEP_ALIVE_INTERVAL=0x4*-0x691+-0x1e5*0x1a+0x7296*0x1;function shouldKeepAlive(){const _0x1d6bce={};_0x1d6bce[_0x4d0083(0x426,0x435,0x411,0x3f9)]=function(_0x27bdf8,_0x48a336){return _0x27bdf8===_0x48a336;};function _0x527a10(_0x38cf2d,_0x2e2733,_0x28708f,_0x20e188){return _0x4216(_0x2e2733- -0xb7,_0x28708f);}_0x1d6bce[_0x4d0083(0x3cc,0x3b1,0x3da,0x3f7)]=function(_0x45d1d4,_0x3cca1c){return _0x45d1d4===_0x3cca1c;},_0x1d6bce['lbQhz']=_0x4d0083(0x3ce,0x3b9,0x402,0x3ce),_0x1d6bce[_0x527a10(0xcb,0xec,0xbf,0x102)]=_0x4d0083(0x42a,0x411,0x432,0x422),_0x1d6bce[_0x527a10(0x68,0x96,0x98,0x6e)]=function(_0x3b9c0d,_0x1d8866){return _0x3b9c0d&&_0x1d8866;};const _0x5c4bc6=_0x1d6bce,_0x32ae55=extension_settings[extensionName];if(!_0x32ae55)return![];const _0x5368da=_0x5c4bc6[_0x527a10(0xee,0xf7,0xd3,0xd4)](_0x32ae55[_0x527a10(0xd4,0xb4,0xa8,0xd0)+_0x527a10(0xf8,0xd6,0xad,0xc3)],!![])||_0x5c4bc6['rUGbn'](_0x32ae55[_0x527a10(0xb9,0xb4,0xc2,0xb4)+_0x527a10(0xfb,0xd6,0xad,0xb5)],_0x5c4bc6[_0x527a10(0xe3,0xe6,0x113,0xe7)]),_0x2e62f1=_0x32ae55[_0x527a10(0xd2,0xbb,0x8e,0xd8)]===_0x5c4bc6[_0x527a10(0x108,0xec,0xcf,0xc4)];function _0x4d0083(_0x368131,_0x225b9f,_0x535afb,_0x4c080e){return _0x4216(_0x368131-0x278,_0x4c080e);}return _0x5c4bc6[_0x527a10(0xa5,0x96,0xba,0xca)](_0x5368da,_0x2e62f1);}async function pingViaSillyTavern(){function _0x3c8653(_0x3c4cec,_0x16e1ca,_0x4c72f3,_0x5bc46d){return _0x4216(_0x3c4cec-0x22d,_0x4c72f3);}function _0x104521(_0x3a2b99,_0x46b2c1,_0x1a48bb,_0x15ff0b){return _0x4216(_0x3a2b99- -0x1d6,_0x15ff0b);}const _0x11e396={'gOjTw':_0x3c8653(0x39c,0x3d5,0x38f,0x3b6),'HWIZZ':function(_0x33dc31,_0x33da3e,_0x161aac){return _0x33dc31(_0x33da3e,_0x161aac);},'zDUBn':'[ComfyUI\x20K'+_0x3c8653(0x3c8,0x3f4,0x399,0x3f3)+_0x104521(-0x71,-0x71,-0x91,-0x89)+'活','UJtJN':_0x3c8653(0x3c0,0x3c5,0x3c5,0x393)+'eepAlive]\x20'+_0x3c8653(0x3b5,0x3b8,0x3b5,0x3a0)+':','jdUze':_0x104521(-0x58,-0x36,-0x6a,-0x57)+'+$','iaYxi':function(_0x4a6f61,_0x4a3225){return _0x4a6f61!==_0x4a3225;},'zsYWt':_0x104521(-0x38,-0x4d,-0x35,-0x3d),'FimoR':'[ComfyUI\x20K'+_0x3c8653(0x3c8,0x3d1,0x39d,0x3bb)+'ComfyUI\x20UR'+_0x104521(-0x2c,0x8,-0x6,-0x2d),'DUzeU':'/api/sd/co'+_0x104521(-0x1e,-0x11,-0x36,-0x3a),'ixmbc':_0x3c8653(0x3d1,0x3b1,0x3f5,0x3ca),'qeAzP':'[ComfyUI\x20K'+_0x3c8653(0x3c8,0x3cb,0x3b1,0x3ea)+_0x3c8653(0x3a7,0x3b4,0x3a1,0x3ad)+_0x3c8653(0x3a3,0x38e,0x39b,0x37d)+_0x3c8653(0x3d6,0x3b9,0x404,0x3aa),'aAtaM':function(_0x510685,_0x4b48e2){return _0x510685===_0x4b48e2;},'BtdsF':_0x104521(-0x68,-0x93,-0x55,-0x45),'hdmep':_0x104521(-0x43,-0xc,-0x1e,-0x5f)+_0x104521(-0x3b,-0x38,-0x2f,-0x6d)+_0x104521(-0x3c,-0x29,-0x69,-0x67)+'ia\x20SillyTa'+_0x3c8653(0x3ce,0x3f9,0x3ef,0x39e),'BRQVV':_0x104521(-0x43,-0x5d,-0x73,-0x3b)+_0x104521(-0x3b,-0xd,-0x16,-0x44)+_0x104521(-0x4a,-0x33,-0x77,-0x23)+'ia\x20SillyTa'+_0x104521(-0x35,-0xd,-0x6b,-0x38)};try{if(_0x11e396[_0x104521(-0x86,-0x5c,-0xa5,-0x5c)](_0x11e396[_0x104521(-0x76,-0x71,-0x85,-0x68)],_0x11e396['zsYWt'])){const _0x310115=_0x11e396[_0x104521(-0x3d,-0xe,-0x43,-0x4d)][_0x104521(-0x74,-0x9e,-0xab,-0x78)]('|');let _0x33b102=0xd5f+0xacf+0xc17*-0x2;while(!![]){switch(_0x310115[_0x33b102++]){case'0':_0x59546=_0x11e396[_0x104521(-0x65,-0x7c,-0x42,-0x47)](_0x2a809d,_0x297c5b,_0x241f64);continue;case'1':_0x478dd9();continue;case'2':_0x222158();continue;case'3':if(!_0x377d9f()){_0xbca4f1[_0x104521(-0x59,-0x68,-0x8c,-0x69)](_0x11e396['zDUBn']);return;}continue;case'4':_0x7b7563[_0x3c8653(0x3aa,0x3e0,0x37e,0x3da)](_0x11e396[_0x104521(-0x66,-0x60,-0x90,-0x57)],_0x4b6ba8,'ms');continue;}break;}}else{const _0x249883=extension_settings[extensionName]?.[_0x3c8653(0x3bb,0x3f5,0x3b4,0x384)]?.[_0x3c8653(0x3ec,0x3db,0x405,0x3b8)]();if(!_0x249883){console['log'](_0x11e396['FimoR']);return;}const _0xfb0337={};_0xfb0337['url']=_0x249883;const _0x49fad3=await fetch(_0x11e396[_0x3c8653(0x3cc,0x3a5,0x398,0x39a)],{'method':_0x11e396[_0x104521(-0x23,-0x58,0x10,-0x17)],'headers':getRequestHeaders(window['token']),'body':JSON[_0x104521(-0x36,-0x19,-0x66,-0x55)](_0xfb0337)});if(_0x49fad3['ok'])console[_0x3c8653(0x3aa,0x3e0,0x380,0x3e2)](_0x11e396[_0x104521(-0x7e,-0x8e,-0x4c,-0x59)]);else{if(_0x11e396['aAtaM'](_0x11e396[_0x104521(-0x3a,-0x62,-0x58,-0x12)],'cvPaM'))return _0x3b8f92[_0x104521(-0x6e,-0x61,-0x35,-0xa4)]()[_0x3c8653(0x3be,0x3eb,0x3ef,0x3eb)](kDvRbQ[_0x104521(-0x4b,-0x73,-0x2b,-0x70)])[_0x104521(-0x6e,-0x7b,-0x72,-0x86)]()[_0x3c8653(0x3c1,0x3b3,0x388,0x3ac)+'r'](_0x5d6f5b)['search'](kDvRbQ[_0x3c8653(0x3b8,0x3d6,0x3ee,0x3e2)]);else console['log'](_0x11e396[_0x3c8653(0x38a,0x367,0x3b8,0x363)],_0x49fad3[_0x3c8653(0x3a0,0x371,0x381,0x369)]);}}}catch(_0x7a0167){console[_0x3c8653(0x3aa,0x38a,0x3ae,0x3ac)](_0x11e396['BRQVV'],_0x7a0167[_0x104521(-0x87,-0x6b,-0xb1,-0x6d)]);}}async function pingDirect(){const _0x1db272={'GZTfy':'[ComfyUI\x20K'+'eepAlive]\x20'+'Ping\x20异常\x20(d'+_0x110907(0x13,-0x6,0x1c,0x18),'xacdN':_0x110907(-0x1e,-0x24,0x6,-0x1c)+_0x1f109b(-0x1f6,-0x1f6,-0x1c1,-0x1cd)+_0x1f109b(-0x237,-0x24b,-0x216,-0x212)+_0x1f109b(-0x1e7,-0x1c3,-0x1e4,-0x215),'NxPFe':function(_0x360fac){return _0x360fac();},'WtHIU':function(_0x976469,_0x794b2e){return _0x976469!==_0x794b2e;},'SjMHs':_0x1f109b(-0x1db,-0x1d5,-0x1aa,-0x1cc),'XPeQs':_0x110907(-0x2d,-0x2e,-0x30,-0x39),'FNOvS':_0x1f109b(-0x1d8,-0x1c1,-0x1ec,-0x1cc),'fbxSl':function(_0x562cae,_0x152322,_0x34f9ab){return _0x562cae(_0x152322,_0x34f9ab);},'mDOwq':_0x110907(-0x7f,-0x5c,-0x4b,-0x63),'rONpf':'[ComfyUI\x20K'+'eepAlive]\x20'+'Ping\x20失败\x20(d'+'irect):'};function _0x1f109b(_0x36a974,_0x90861f,_0x322b1b,_0x554362){return _0x4216(_0x36a974- -0x391,_0x90861f);}function _0x110907(_0x3b3bc0,_0x16a0d5,_0x58c505,_0x18a2e2){return _0x4216(_0x16a0d5- -0x1b7,_0x18a2e2);}try{if(_0x1db272['WtHIU'](_0x1db272['SjMHs'],_0x1db272[_0x110907(-0x3e,-0x69,-0x48,-0x3e)]))_0x20efe2[_0x110907(-0x1d,-0x3a,-0x5d,-0x48)](_0x1db272[_0x1f109b(-0x1eb,-0x1e5,-0x1bd,-0x204)],_0x218eda[_0x110907(-0x6d,-0x68,-0x5a,-0x7e)]);else{const _0xf5943d=extension_settings[extensionName]?.[_0x110907(-0x18,-0x29,-0xe,-0x20)]?.['trim']();if(!_0xf5943d){if(_0x1db272[_0x110907(-0x2b,-0xc,0xd,0x8)]!==_0x1db272['FNOvS']){console['log'](_0x1db272[_0x1f109b(-0x1f9,-0x210,-0x20d,-0x1fd)]);return;}else{_0xdb8aa[_0x110907(-0x71,-0x3a,-0x52,-0x3a)](_0x1db272['xacdN']);return;}}const _0x2b432d={};_0x2b432d[_0x1f109b(-0x23e,-0x274,-0x218,-0x220)+'pe']=_0x1f109b(-0x1ff,-0x1e6,-0x1c9,-0x21d)+_0x1f109b(-0x1dc,-0x1c9,-0x1f0,-0x1c7);const _0x36239d={};_0x36239d[_0x1f109b(-0x235,-0x235,-0x229,-0x210)]=_0x1f109b(-0x20b,-0x1fd,-0x23f,-0x1e3),_0x36239d[_0x110907(-0x33,-0x65,-0x4b,-0x77)]=_0x2b432d;const _0x4b0b4b=await _0x1db272[_0x110907(-0x1f,-0x33,-0x48,-0x51)](fetch,_0xf5943d+(_0x1f109b(-0x233,-0x24e,-0x204,-0x216)+_0x110907(-0x7,-0x3c,-0x4c,-0x13)),_0x36239d);_0x4b0b4b['ok']?_0x1db272['WtHIU'](_0x1f109b(-0x236,-0x258,-0x238,-0x229),_0x1db272[_0x110907(-0x5a,-0x56,-0x27,-0x6a)])?_0x1db272['NxPFe'](_0x58c7dd):console[_0x1f109b(-0x214,-0x1ee,-0x1ee,-0x244)](_0x110907(-0x13,-0x24,-0x48,-0x52)+_0x110907(-0x12,-0x1c,-0x11,0x15)+_0x110907(-0x3b,-0x60,-0x48,-0x81)+'irect)'):console[_0x1f109b(-0x214,-0x1e1,-0x238,-0x1f8)](_0x1db272[_0x1f109b(-0x20a,-0x1f9,-0x1f5,-0x200)],_0x4b0b4b[_0x1f109b(-0x21e,-0x21f,-0x1e8,-0x1fb)]);}}catch(_0x5f318d){console['log'](_0x1db272['GZTfy'],_0x5f318d[_0x110907(-0x5e,-0x68,-0x71,-0x3c)]);}}async function doPing(){const _0x68eb09={'VlEhV':function(_0x19ce11){return _0x19ce11();},'YckWq':_0x11f394(0x4cc,0x4fe,0x4e7,0x4e8)+_0x479182(0x18a,0x189,0x1a4,0x1a0)+_0x479182(0x17b,0x1a6,0x172,0x159)+'ing','rDvWU':function(_0x531aa9,_0x31bba9){return _0x531aa9===_0x31bba9;},'nfKDT':function(_0x414807,_0x1aa3c0){return _0x414807!==_0x1aa3c0;},'MszOD':_0x479182(0x153,0x15b,0x17d,0x14a),'pACHv':_0x11f394(0x4ba,0x49d,0x4b5,0x4a0),'DCuBC':function(_0x40065a){return _0x40065a();}};function _0x11f394(_0x1c9778,_0x9395cd,_0x1ee695,_0x1162dd){return _0x4216(_0x1c9778-0x339,_0x1162dd);}if(!_0x68eb09[_0x11f394(0x4bc,0x4c9,0x489,0x4c1)](shouldKeepAlive)){console['log'](_0x68eb09['YckWq']);return;}const _0x471c62=extension_settings[extensionName]?.[_0x11f394(0x49d,0x476,0x46d,0x4ad)];function _0x479182(_0x3f04b4,_0xa88b5d,_0x98baf8,_0x4b5cac){return _0x4216(_0x98baf8-0x9,_0x4b5cac);}_0x68eb09['rDvWU'](_0x471c62,_0x11f394(0x492,0x4be,0x45c,0x496))?_0x68eb09[_0x11f394(0x4a6,0x4c5,0x495,0x4c0)](_0x68eb09['MszOD'],_0x68eb09[_0x479182(0x172,0x1c1,0x18e,0x1c2)])?await _0x68eb09[_0x479182(0x185,0x19f,0x18c,0x184)](pingViaSillyTavern):_0x15eaae():await _0x68eb09[_0x479182(0x13c,0x193,0x15a,0x12e)](pingDirect);}export function startKeepAlive(){const _0x51287c={'BdtSI':_0x44cc4f(0x2fe,0x2eb,0x2e7,0x2d3),'ADzwS':function(_0x1b68f0,_0x380d38,_0x420b54){return _0x1b68f0(_0x380d38,_0x420b54);},'XmTXJ':function(_0x319ddf){return _0x319ddf();},'VrcZh':'[ComfyUI\x20K'+_0x56fd3d(0x2b,0x14,0x28,0x4e)+_0x44cc4f(0x2d4,0x2b3,0x308,0x2ce)+'活'};function _0x56fd3d(_0x4ba764,_0x5bee1d,_0xf2470b,_0x16e12c){return _0x4216(_0x16e12c- -0x14d,_0x4ba764);}const _0x4a3a5f=_0x51287c['BdtSI'][_0x56fd3d(-0x20,0x43,-0x3,0x15)]('|');function _0x44cc4f(_0x2a0480,_0x322138,_0x29fded,_0x38e100){return _0x4216(_0x2a0480-0x16f,_0x29fded);}let _0x4555d5=0x79*-0x47+0x3cd*-0x8+0x83*0x7d;while(!![]){switch(_0x4a3a5f[_0x4555d5++]){case'0':console['log'](_0x56fd3d(0x5f,0x45,0x50,0x46)+_0x44cc4f(0x30a,0x2f6,0x303,0x333)+'启动保活定时器，间隔'+':',KEEP_ALIVE_INTERVAL,'ms');continue;case'1':keepAliveTimer=_0x51287c[_0x44cc4f(0x32d,0x34c,0x300,0x340)](setInterval,doPing,KEEP_ALIVE_INTERVAL);continue;case'2':stopKeepAlive();continue;case'3':_0x51287c[_0x44cc4f(0x31c,0x2ec,0x33f,0x31a)](doPing);continue;case'4':if(!_0x51287c['XmTXJ'](shouldKeepAlive)){console[_0x56fd3d(0x42,0x54,0x7,0x30)](_0x51287c[_0x44cc4f(0x31f,0x310,0x355,0x337)]);return;}continue;}break;}}export function stopKeepAlive(){function _0x33fce8(_0x23e87e,_0x408396,_0x47b138,_0x2398f6){return _0x4216(_0x23e87e-0x2bc,_0x47b138);}function _0x21baf9(_0x5dffb2,_0xbfb32f,_0x54fba9,_0x26bf8e){return _0x4216(_0xbfb32f-0x80,_0x26bf8e);}const _0x26f2e6={};_0x26f2e6[_0x33fce8(0x43e,0x408,0x477,0x46c)]=_0x33fce8(0x44f,0x473,0x45e,0x464)+_0x21baf9(0x1ff,0x21b,0x204,0x21a)+'停止保活定时器';const _0x5ea493=_0x26f2e6;keepAliveTimer&&(console[_0x21baf9(0x226,0x1fd,0x1dc,0x1f0)](_0x5ea493[_0x21baf9(0x224,0x202,0x1fd,0x1e7)]),clearInterval(keepAliveTimer),keepAliveTimer=null);}export function updateKeepAliveStatus(){function _0x2d316c(_0x13047c,_0x221bf7,_0x676842,_0x307811){return _0x4216(_0x13047c-0x39d,_0x307811);}const _0x6ad348={'yEOhp':function(_0x13556b){return _0x13556b();},'QnKvh':function(_0x1ec329){return _0x1ec329();}};function _0x586693(_0x395a12,_0x5e8d4d,_0x1c184b,_0xb449a1){return _0x4216(_0xb449a1-0x7f,_0x395a12);}_0x6ad348[_0x586693(0x1e0,0x231,0x24d,0x214)](shouldKeepAlive)?!keepAliveTimer&&_0x6ad348['QnKvh'](startKeepAlive):_0x6ad348[_0x586693(0x22a,0x223,0x239,0x214)](stopKeepAlive);}export function initializeKeepAlive(){const _0x373cfa={'FYShB':function(_0xa61201){return _0xa61201();}};function _0x25c75b(_0x5b2eb4,_0x9a6d30,_0x34c2c3,_0x5974ba){return _0x4216(_0x9a6d30- -0x32e,_0x5974ba);}function _0x271df6(_0x247ed9,_0x59ef15,_0x2a41ac,_0x2fb53e){return _0x4216(_0x2fb53e- -0x184,_0x59ef15);}console['log']('[ComfyUI\x20K'+_0x25c75b(-0x1b4,-0x193,-0x195,-0x18d)+_0x25c75b(-0x19f,-0x197,-0x19f,-0x1a5)),_0x373cfa[_0x25c75b(-0x16d,-0x17a,-0x1b1,-0x1b3)](updateKeepAliveStatus);}