(function(_0x46f7c1,_0x598c2d){function _0x28963d(_0x5eeb8b,_0x11ce45,_0x396965,_0x11675d){return _0xf8c2(_0x5eeb8b-0x346,_0x11675d);}function _0x2ba240(_0x46b4b1,_0x54b8b9,_0x5f14ba,_0x1a7c42){return _0xf8c2(_0x1a7c42-0x15d,_0x54b8b9);}const _0xcbd524=_0x46f7c1();while(!![]){try{const _0x558060=parseInt(_0x2ba240(0x316,0x307,0x365,0x339))/(0x1eb7+0x9*-0x37+-0x1cc7)*(parseInt(_0x28963d(0x517,0x527,0x4fb,0x50c))/(-0x44*-0x2b+0x22df+-0x2e49))+parseInt(_0x28963d(0x51c,0x4e2,0x508,0x524))/(-0x2261+0x243*0x3+0x1b9b*0x1)*(parseInt(_0x2ba240(0x2f5,0x2da,0x2dc,0x304))/(-0x332+-0x10d5+-0x140b*-0x1))+parseInt(_0x28963d(0x4d9,0x4bd,0x4ad,0x504))/(0x407+-0x19*-0xcb+-0x17d5)+-parseInt(_0x2ba240(0x2e4,0x303,0x314,0x305))/(-0x436+-0x23*-0x119+-0x1*0x222f)*(parseInt(_0x28963d(0x4c6,0x4de,0x4f7,0x48b))/(0x78e+-0x1a8f*-0x1+0x1*-0x2216))+parseInt(_0x2ba240(0x323,0x34c,0x310,0x31a))/(-0x46*0x67+0x23cc+-0x79a)+-parseInt(_0x2ba240(0x364,0x345,0x329,0x342))/(0x7eb*0x3+-0x7*0x3ee+0x3ca)*(parseInt(_0x2ba240(0x2b8,0x2d3,0x300,0x2df))/(0x1745+0x35*0x4c+-0x26f7))+parseInt(_0x28963d(0x526,0x527,0x549,0x556))/(0x6a6*-0x4+-0x21d*0xd+0x4*0xd87)*(parseInt(_0x2ba240(0x2b3,0x2c3,0x2ed,0x2d9))/(-0x14cf+-0x1e02+0x32dd));if(_0x558060===_0x598c2d)break;else _0xcbd524['push'](_0xcbd524['shift']());}catch(_0x4b4bd2){_0xcbd524['push'](_0xcbd524['shift']());}}}(_0x31bc,0x18613+-0x665dd+0x28*0x3539));const _0x47eae4=(function(){function _0x553a5d(_0x5e231f,_0x131e4c,_0x4ce218,_0x4c1f71){return _0xf8c2(_0x4ce218- -0x2ef,_0x131e4c);}const _0x465c44={'ZJKnX':function(_0x1ec65f,_0xf6b8f5){return _0x1ec65f!==_0xf6b8f5;},'MgCYT':_0x5d795a(-0x14d,-0x119,-0x146,-0x150),'ejRvJ':_0x553a5d(-0x166,-0xed,-0x129,-0x165),'bYWUA':function(_0x505284){return _0x505284();}};let _0x2ee3c1=!![];function _0x5d795a(_0x238179,_0x539451,_0x1d560e,_0x3c6c86){return _0xf8c2(_0x238179- -0x308,_0x539451);}return function(_0x383767,_0x4921b7){const _0x2c2184={'VsGCP':function(_0x5152ec){return _0x465c44['bYWUA'](_0x5152ec);}},_0xe57738=_0x2ee3c1?function(){function _0xda097f(_0x4c6635,_0x16a1fe,_0x5ad9ed,_0x26e400){return _0xf8c2(_0x26e400-0x2c0,_0x4c6635);}function _0x351fcc(_0x2cbb7b,_0x386d0d,_0x4d8e90,_0x2d2f87){return _0xf8c2(_0x4d8e90- -0xf,_0x2cbb7b);}if(_0x465c44[_0xda097f(0x438,0x429,0x464,0x44e)](_0x465c44[_0x351fcc(0x1ef,0x1e8,0x1c5,0x1f3)],_0x465c44[_0x351fcc(0x1b6,0x1b7,0x1cf,0x1ad)])){if(_0x4921b7){const _0x57e149=_0x4921b7[_0xda097f(0x40e,0x470,0x449,0x43d)](_0x383767,arguments);return _0x4921b7=null,_0x57e149;}}else _0x2c2184[_0x351fcc(0x202,0x1d4,0x1e3,0x206)](_0x28e403);}:function(){};return _0x2ee3c1=![],_0xe57738;};}()),_0xe10ea5=_0x47eae4(this,function(){const _0xecf17a={};function _0x3de1ef(_0x203912,_0x529f81,_0x37b232,_0x13052d){return _0xf8c2(_0x13052d- -0x228,_0x37b232);}function _0x4df067(_0x544193,_0x197a47,_0x41a5ba,_0x938fb6){return _0xf8c2(_0x938fb6- -0xbe,_0x197a47);}_0xecf17a[_0x4df067(0x123,0xd4,0x128,0xef)]='(((.+)+)+)'+'+$';const _0x3d5477=_0xecf17a;return _0xe10ea5['toString']()[_0x4df067(0x144,0x108,0x132,0x121)](_0x3d5477['OFoMN'])['toString']()[_0x4df067(0xcd,0xdd,0xd7,0xe8)+'r'](_0xe10ea5)['search'](_0x3d5477[_0x3de1ef(-0x5c,-0x42,-0x4f,-0x7b)]);});function _0x31bc(){const _0x4bd4c5=['EKvYvfa','BfnHENK','rgDSChO','q29TzNLvssbvuG','AwHXBeW','D1HTChK','AxHbwgm','C3rYAw5NAwz5','yxjgzKe','mJqYnJHur0rqqKW','Du5iC1a','ugLUzYdLPlhOTkuGkhy','twDdwvq','mxWZFdr8mNWW','ndaZmK1JCKnpuW','t3bPEvi','BLnTv0K','zwvWqwXPDMvDia','t2XPu3y','qxfcywq','ovDSqNP6wG','C1zuAu4','zwPsDKO','C2vHCMnO','mJKXnJC2ufr3CxLK','DhjPBq','A2v4qve','rgTtthy','vgjRCKK','mJKXnKHzvKnoBW','ue9XvMW','y29TzNL1AvvYBa','Bwz5l3bPBMC','ugLUzYdMIjdLIP8Gkhy','sxnUAxC','wvvHALK','BwvZC2fNzq','5yID5AEl5yYw5l+D5Rs75QIH5z2x','r0vu','m3WWFdr8mxWY','vNryDLi','C3rHDhvZ','vNnhq1a','z2TRqve','C0LYtwi','tgnvqMG','nJbqzLvSAxO','yxbWBhK','zvnmvxa','D3fyu28','otfgrvLYuvi','l3n5C3rLBv9ZDa','mty3me5UB3fMCq','zMncDwu','5P2H5lU25lIn5RUH6lAZ77Ym5lIn5zcV5yQO5l+D','rMrYCem','C2nYAxb0rw5HyG','t1j6BLO','DMvYBIK6','D0jgvem','DgrzEgG','zNLNt3e','DxHVDeC','5ygC5Q2I5l+D5Rs75A6A5PE25zMO','wKPlBLG','AweGu2LSBhLuyq','y21uBvy','DMXjD2K','rKPxywG','mte4nJb4A3zrD3i','tLLusfO','uhjlCKW','vNnQr0e','ue9tva','y2HLrKC','5P2H5lU25lIn5RUH6lAZ77Ym6lEZ6l+hiha','tgnoCNi','yxrZ','yunmzfK','A0XRCLq','tcdMNkRORR7NVA4','AxjLy3qP','tufvDMe','Aw5N','shnZBhe','A1PoB3e','ugLUzYdLVilLUlGGkgq','CvbWCxq','y29UC3rYDwn0BW','mZyWzwXfzwPh','mtuWmZu0CKXWr0Xt','Dhj1zq','DMvYBIK','Bg9N','w0nVBwz5vuKGsW','t0zVtu4','B0T6uwC','BfnlquW','y21VuMq','AxjLy3qPoG','wfbuv0q','DfrUswW','rKjhDg0','Dg9Rzw4','5zcV5yQO5l+D5Rs75A6A5PE25zMO77Ym6zE06zQu','BgvK','C3bSAxq','EwPKsfq','Dg9tDhjPBMC','DgLKq2S','AgzSwMy','mtKYmJu4ng5Yq0Tywq','kcGOlISPkYKRkq','thj3rLK','q2Tos0i','ru1LEvK','yKz1vxG','A3L5DKW','ugLUzYdLVilLUlGGkhy','CfvuELe','vgzfsLi','u1r0Cw8'];_0x31bc=function(){return _0x4bd4c5;};return _0x31bc();}_0xe10ea5();import{extension_settings}from'../../../../extensions.js';import{extensionName}from'./config.js';import{getRequestHeaders}from'./utils.js';let keepAliveTimer=null;const KEEP_ALIVE_INTERVAL=-0xd4f*-0x3+0x5*0x9a3+0x56*-0x92;function shouldKeepAlive(){const _0x52b222={};_0x52b222[_0x504010(0x5c8,0x575,0x5e9,0x5ae)]=function(_0x4a47b2,_0x20547d){return _0x4a47b2===_0x20547d;},_0x52b222['kLkrT']=function(_0x1aaf6b,_0x12204c){return _0x1aaf6b===_0x12204c;},_0x52b222[_0x2525cc(-0x13c,-0x13a,-0x125,-0x165)]=_0x2525cc(-0x128,-0xff,-0x149,-0x163),_0x52b222[_0x504010(0x5a5,0x599,0x5a8,0x5af)]=function(_0xe4a21,_0x5ef81a){return _0xe4a21===_0x5ef81a;},_0x52b222[_0x2525cc(-0xeb,-0xe2,-0xef,-0x10b)]='comfyui',_0x52b222['cmTmV']=function(_0x3718cf,_0x585629){return _0x3718cf&&_0x585629;};const _0x2a8724=_0x52b222;function _0x2525cc(_0x5f0139,_0x3a41b3,_0x3abef5,_0x16b454){return _0xf8c2(_0x5f0139- -0x2d1,_0x3abef5);}const _0x32a84b=extension_settings[extensionName];function _0x504010(_0x5db846,_0x224b7b,_0x195d9b,_0x4a9615){return _0xf8c2(_0x4a9615-0x3e5,_0x224b7b);}if(!_0x32a84b)return![];const _0x2d4a55=_0x2a8724['lSazy'](_0x32a84b[_0x504010(0x569,0x59a,0x540,0x56b)+_0x504010(0x59a,0x56e,0x5ce,0x59c)],!![])||_0x2a8724[_0x504010(0x5b0,0x594,0x5b2,0x582)](_0x32a84b['scriptEnab'+'led'],_0x2a8724[_0x504010(0x558,0x548,0x56d,0x57a)]),_0x3b18f8=_0x2a8724[_0x504010(0x5d8,0x579,0x5a8,0x5af)](_0x32a84b['mode'],_0x2a8724['POqVl']);return _0x2a8724[_0x504010(0x5a1,0x576,0x575,0x575)](_0x2d4a55,_0x3b18f8);}async function pingViaSillyTavern(){function _0x3a3207(_0x706e96,_0x4df448,_0x169dad,_0x3cfea7){return _0xf8c2(_0x4df448- -0x3e,_0x169dad);}function _0x2cb02a(_0x4d7bff,_0x1d1e77,_0x248261,_0x1c37e3){return _0xf8c2(_0x1c37e3- -0x156,_0x248261);}const _0x2119e3={'mecVO':'[ComfyUI\x20K'+_0x3a3207(0x1b9,0x19b,0x1cf,0x186)+_0x3a3207(0x171,0x18d,0x177,0x1ab)+_0x2cb02a(0x49,0x5a,0x6f,0x48),'wBFTC':'[ComfyUI\x20K'+_0x2cb02a(0x5b,0x7e,0xa8,0x83)+_0x3a3207(0x164,0x146,0x10d,0x146)+'活','fcBue':_0x2cb02a(0xa8,0xc1,0xc0,0x99),'pUTzQ':function(_0x36d7bc){return _0x36d7bc();},'CkNKB':function(_0x323265,_0x5f343e,_0x1af741){return _0x323265(_0x5f343e,_0x1af741);},'EMeyY':'[ComfyUI\x20K'+_0x2cb02a(0xa9,0x7d,0x5d,0x83)+_0x2cb02a(0x35,0x69,0x83,0x60)+':','KJSyY':function(_0x139224,_0x4bc8b8){return _0x139224!==_0x4bc8b8;},'tdYxh':_0x2cb02a(0x6e,0xa0,0x4a,0x76),'VtXvR':_0x3a3207(0x1ae,0x192,0x16b,0x1c8),'gkkAQ':_0x2cb02a(0x3a,0x55,0x77,0x77),'STtqo':'/api/sd/co'+_0x3a3207(0x1ad,0x1aa,0x186,0x170),'uxotG':_0x2cb02a(0x17,0x14,0x5,0x41),'sIrMb':function(_0x761920,_0x2ef7f3){return _0x761920(_0x2ef7f3);},'fxsnp':function(_0x9b9635,_0x3b579f){return _0x9b9635===_0x3b579f;},'FuivS':_0x2cb02a(0x4e,0x87,0x9f,0x69),'AqBad':_0x2cb02a(0xa1,0x9c,0x8e,0x8d),'qPpqt':_0x2cb02a(0x4d,0x5a,0x2c,0x25),'cmoRd':_0x3a3207(0x145,0x16e,0x182,0x14e)+_0x3a3207(0x1d4,0x19b,0x1d3,0x188)+'Ping\x20失败\x20(v'+'ia\x20SillyTa'+_0x3a3207(0x16a,0x14a,0x16e,0x178),'dYLnG':function(_0x56fcdd,_0x5e1b6e){return _0x56fcdd!==_0x5e1b6e;},'OpiyR':_0x3a3207(0x188,0x176,0x1a8,0x167),'kexAQ':_0x3a3207(0x1a4,0x175,0x19a,0x1b1),'NYTHZ':'[ComfyUI\x20K'+_0x2cb02a(0x5e,0x97,0x6c,0x83)+_0x3a3207(0x175,0x186,0x1c3,0x15f)+_0x2cb02a(0x4c,0x49,0x1a,0x39)+_0x3a3207(0x166,0x14a,0x136,0x114)};try{if(_0x2119e3['KJSyY'](_0x2119e3[_0x2cb02a(0x21,0x61,0x49,0x34)],'ihqlL')){_0x3876dd['log'](_0x2119e3['mecVO']);return;}else{const _0x390b41=extension_settings[extensionName]?.[_0x2cb02a(0x6d,0xc1,0x5c,0x91)]?.[_0x3a3207(0x1c8,0x1a3,0x191,0x174)]();if(!_0x390b41){if(_0x2119e3[_0x3a3207(0x196,0x1b2,0x1b1,0x1ba)]!==_0x2119e3[_0x2cb02a(0xd1,0x74,0xcc,0x9d)]){console[_0x3a3207(0x13c,0x16d,0x1a0,0x164)](_0x2119e3['mecVO']);return;}else{_0xa02642['log'](_0x2119e3[_0x2cb02a(0x0,0x1c,-0x4,0x33)]);return;}}const _0x1e40cf={};_0x1e40cf['url']=_0x390b41;const _0x338684=await _0x2119e3[_0x3a3207(0x146,0x182,0x190,0x17f)](fetch,_0x2119e3[_0x3a3207(0x172,0x189,0x185,0x17d)],{'method':_0x2119e3[_0x3a3207(0x14b,0x14e,0x12e,0x126)],'headers':_0x2119e3[_0x3a3207(0x1ac,0x1b6,0x18f,0x1a6)](getRequestHeaders,window[_0x2cb02a(0x98,0x89,0x6a,0x5f)]),'body':JSON[_0x2cb02a(0x88,0x40,0x43,0x79)](_0x1e40cf)});if(_0x338684['ok']){if(_0x2119e3['fxsnp'](_0x2119e3['FuivS'],_0x2119e3[_0x2cb02a(0xb5,0xb3,0x63,0x85)])){const _0x31055e=_0x946641[_0x2cb02a(0x2,0x26,0x11,0x27)](_0x2f2ce6,arguments);return _0x11fe6b=null,_0x31055e;}else console[_0x2cb02a(0x3f,0x43,0x40,0x55)](_0x2cb02a(0x30,0x20,0x59,0x56)+_0x3a3207(0x197,0x19b,0x17e,0x17d)+_0x2cb02a(0x60,0x8f,0xb1,0x93)+_0x3a3207(0x17d,0x151,0x18b,0x13a)+_0x2cb02a(0x81,0x5d,0x91,0x54));}else{if(_0x2119e3['KJSyY'](_0x2119e3[_0x2cb02a(0x43,0x8b,0x30,0x4f)],_0x2cb02a(0x4d,0x58,0x9b,0x72)))console['log'](_0x2119e3[_0x3a3207(0x164,0x172,0x1ab,0x17d)],_0x338684[_0x3a3207(0x181,0x1b3,0x181,0x194)]);else{if(_0x1b70c7){const _0x37509e=_0x13129b[_0x2cb02a(0x4a,-0x2,0x7,0x27)](_0xd75fa8,arguments);return _0x3e960f=null,_0x37509e;}}}}}catch(_0x181818){if(_0x2119e3['dYLnG'](_0x2119e3[_0x2cb02a(0x47,0x69,0xa9,0x81)],_0x2119e3[_0x2cb02a(0x61,0xc5,0x91,0x8c)]))console['log'](_0x2119e3[_0x2cb02a(0x20,0x25,0x46,0x3e)],_0x181818[_0x2cb02a(0x60,0xce,0x5c,0x96)]);else{const _0x45320c=_0x2119e3[_0x3a3207(0x13c,0x145,0x10e,0x111)][_0x3a3207(0x184,0x17a,0x154,0x181)]('|');let _0x58c47a=0x1cce+0x1bba+-0x1c44*0x2;while(!![]){switch(_0x45320c[_0x58c47a++]){case'0':if(!_0x2119e3['pUTzQ'](_0x2c1f0c)){_0xfe152b['log'](_0x2119e3[_0x2cb02a(0x69,0x64,0x42,0x33)]);return;}continue;case'1':_0x5ece99();continue;case'2':_0x324316=_0x2119e3[_0x2cb02a(0xa3,0x5b,0x9f,0x6a)](_0x52686a,_0x2625c1,_0x42133b);continue;case'3':_0x2119e3[_0x2cb02a(0x91,0x63,0x55,0x6f)](_0x268f91);continue;case'4':_0x17b8ea['log'](_0x2119e3[_0x3a3207(0x149,0x183,0x1a9,0x19d)],_0x4c8ed6,'ms');continue;}break;}}}}function _0xf8c2(_0x5e6dc6,_0x1fc5cd){_0x5e6dc6=_0x5e6dc6-(-0x10a*-0x23+0x1*0xc25+-0x2f08);const _0x3bd736=_0x31bc();let _0x2606d0=_0x3bd736[_0x5e6dc6];if(_0xf8c2['mfdqvo']===undefined){var _0x56ff3a=function(_0x4aa325){const _0xfcf477='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x23ba28='',_0xfd27f0='',_0x6f4b90=_0x23ba28+_0x56ff3a;for(let _0x33fdd6=0x642+0xebd+-0x14ff,_0x13d57f,_0x542f6f,_0x967a83=0x1a8a+-0x7f*0x45+0x7b1;_0x542f6f=_0x4aa325['charAt'](_0x967a83++);~_0x542f6f&&(_0x13d57f=_0x33fdd6%(-0xecb+0x1*0x8d+-0x2da*-0x5)?_0x13d57f*(0x231e+-0x2703+0x425)+_0x542f6f:_0x542f6f,_0x33fdd6++%(-0x1d7*0xc+0x2101*-0x1+0x3719))?_0x23ba28+=_0x6f4b90['charCodeAt'](_0x967a83+(0x1175*-0x1+-0x1097+0x2216))-(0x959*-0x3+0xc35*0x1+0xfe0)!==-0x6c+-0x1854+-0x2c*-0x90?String['fromCharCode'](0x265c+0x189a+-0x3df7&_0x13d57f>>(-(-0xac4+0x1*0x20e7+-0x1621)*_0x33fdd6&0xc2e*-0x2+0x22ea+-0xa88)):_0x33fdd6:-0xa6*-0x6+0x2*-0xce5+-0x1*-0x15e6){_0x542f6f=_0xfcf477['indexOf'](_0x542f6f);}for(let _0x37936c=0x892+-0xe5*-0x1d+-0x5*0x6e7,_0x4108e3=_0x23ba28['length'];_0x37936c<_0x4108e3;_0x37936c++){_0xfd27f0+='%'+('00'+_0x23ba28['charCodeAt'](_0x37936c)['toString'](0xd9f+0x6*0x5ff+0x3*-0x1083))['slice'](-(-0x3*-0x8eb+-0x7*-0x229+-0x29de));}return decodeURIComponent(_0xfd27f0);};_0xf8c2['zBhHVS']=_0x56ff3a,_0xf8c2['BjEKuE']={},_0xf8c2['mfdqvo']=!![];}const _0x2f3b6b=_0x3bd736[0x1a82*0x1+0x1c9*-0xb+-0x6df],_0x136a6c=_0x5e6dc6+_0x2f3b6b,_0x54fa0c=_0xf8c2['BjEKuE'][_0x136a6c];if(!_0x54fa0c){const _0x506634=function(_0x43985d){this['Pcakjq']=_0x43985d,this['wtjtYB']=[0xf11+-0x1a10+0xb00,-0x1*0x124a+0x213c+-0x779*0x2,0x2*-0x886+0x2030+-0xf24],this['sLjddA']=function(){return'newState';},this['gMVHjw']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['XFHhxR']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x506634['prototype']['dWIRlj']=function(){const _0x2edd64=new RegExp(this['gMVHjw']+this['XFHhxR']),_0x1f4f22=_0x2edd64['test'](this['sLjddA']['toString']())?--this['wtjtYB'][0x21*0xc5+0x33b+-0x1af*0x11]:--this['wtjtYB'][0x1177*0x2+0x1*0x471+0x275f*-0x1];return this['UJgndV'](_0x1f4f22);},_0x506634['prototype']['UJgndV']=function(_0x2f4f98){if(!Boolean(~_0x2f4f98))return _0x2f4f98;return this['CmSinh'](this['Pcakjq']);},_0x506634['prototype']['CmSinh']=function(_0x5bc2fc){for(let _0x16c756=0x1*-0x10f7+-0xd*0x197+0x12d1*0x2,_0x418a25=this['wtjtYB']['length'];_0x16c756<_0x418a25;_0x16c756++){this['wtjtYB']['push'](Math['round'](Math['random']())),_0x418a25=this['wtjtYB']['length'];}return _0x5bc2fc(this['wtjtYB'][-0x923+0xb6c+-0x249]);},new _0x506634(_0xf8c2)['dWIRlj'](),_0x2606d0=_0xf8c2['zBhHVS'](_0x2606d0),_0xf8c2['BjEKuE'][_0x136a6c]=_0x2606d0;}else _0x2606d0=_0x54fa0c;return _0x2606d0;}async function pingDirect(){const _0x5e4551={'ixAXc':'(((.+)+)+)'+'+$','nSmWI':'kuNFf','YUajY':_0xb5b0fd(0x131,0x143,0x167,0x121)+_0x313f53(-0x76,-0x46,-0x70,-0x92)+_0xb5b0fd(0x150,0x150,0x142,0x16e)+'L\x20未设置','oKzQg':function(_0x52e500,_0x561847,_0x26a9c4){return _0x52e500(_0x561847,_0x26a9c4);},'kyyvL':_0xb5b0fd(0x173,0x181,0x13e,0x152),'yjdHT':'applicatio'+'n/json','VsjGA':function(_0x2a54cf,_0xa132e5){return _0x2a54cf!==_0xa132e5;},'Isniw':_0x313f53(-0xbe,-0xc5,-0x96,-0xe1),'lSKAL':_0xb5b0fd(0x131,0x128,0x121,0x11d)+_0xb5b0fd(0x15e,0x16d,0x188,0x176)+'Ping\x20成功\x20(d'+_0xb5b0fd(0x124,0x11c,0x159,0x116),'VpdDh':'uKdzA','FdrpC':_0xb5b0fd(0x147,0x110,0x15f,0x176),'wqXSo':_0x313f53(-0xa3,-0x7d,-0xd2,-0xae)+_0x313f53(-0x76,-0xa1,-0x3b,-0x80)+_0x313f53(-0xab,-0x96,-0x8e,-0xcf)+_0x313f53(-0x9e,-0xb0,-0x8d,-0x91)};function _0xb5b0fd(_0x11d385,_0x5acedf,_0x11ca46,_0x3e880a){return _0xf8c2(_0x11d385- -0x7b,_0x3e880a);}function _0x313f53(_0x29c75d,_0x51fb4,_0x1ce629,_0x280097){return _0xf8c2(_0x29c75d- -0x24f,_0x1ce629);}try{const _0x1c632b=extension_settings[extensionName]?.['comfyuiUrl']?.[_0xb5b0fd(0x166,0x141,0x161,0x16a)]();if(!_0x1c632b){if(_0x5e4551['nSmWI']===_0x5e4551[_0xb5b0fd(0x15d,0x13b,0x15e,0x18e)]){console[_0xb5b0fd(0x130,0x124,0x151,0x126)](_0x5e4551[_0xb5b0fd(0x170,0x1a2,0x1ac,0x135)]);return;}else _0x11f4b0['log'](_0x313f53(-0xa3,-0x9a,-0xa8,-0x7c)+_0xb5b0fd(0x15e,0x194,0x162,0x16d)+_0xb5b0fd(0x16e,0x190,0x1a7,0x15b)+_0xb5b0fd(0x114,0x10c,0xd7,0x118)+_0xb5b0fd(0x12f,0x10a,0x13a,0x123));}const _0x18cb06=await _0x5e4551[_0xb5b0fd(0x133,0xfc,0x116,0x129)](fetch,_0x1c632b+(_0xb5b0fd(0x106,0x134,0x117,0x114)+_0xb5b0fd(0x120,0x125,0xe8,0xf0)),{'method':_0x5e4551[_0x313f53(-0x8c,-0xc6,-0x68,-0xbd)],'headers':{'Content-Type':_0x5e4551[_0x313f53(-0x96,-0x79,-0x88,-0x69)]}});if(_0x18cb06['ok'])_0x5e4551[_0xb5b0fd(0x11b,0x102,0x149,0xee)](_0x5e4551['Isniw'],_0x5e4551[_0xb5b0fd(0x16f,0x172,0x1ab,0x190)])?_0x50a56c[_0xb5b0fd(0x130,0x15b,0x137,0x14f)](_0x313f53(-0xa3,-0xbf,-0xd6,-0xcf)+_0xb5b0fd(0x15e,0x156,0x131,0x172)+_0xb5b0fd(0x158,0x15f,0x18a,0x175)+'ia\x20SillyTa'+'vern):',_0xaaeb5c[_0xb5b0fd(0x176,0x1b3,0x1a7,0x16b)]):console[_0x313f53(-0xa4,-0xa5,-0x97,-0xa0)](_0x5e4551[_0xb5b0fd(0x134,0x105,0x143,0x14f)]);else{if(_0x5e4551['VpdDh']===_0x5e4551[_0xb5b0fd(0x10a,0xde,0x12b,0xce)])return _0x1d3b4d[_0xb5b0fd(0x13f,0x15d,0x105,0x16b)]()['search'](_0xb5b0fd(0x143,0x129,0x137,0x146)+'+$')['toString']()['constructo'+'r'](_0x5e81bc)[_0xb5b0fd(0x164,0x168,0x13d,0x18f)](YzUemH[_0xb5b0fd(0x153,0x179,0x17d,0x16c)]);else console[_0x313f53(-0xa4,-0x74,-0xd4,-0x87)]('[ComfyUI\x20K'+_0x313f53(-0x76,-0x5b,-0x64,-0x9d)+'Ping\x20失败\x20(d'+'irect):',_0x18cb06[_0xb5b0fd(0x176,0x142,0x175,0x19e)]);}}catch(_0x53bc7d){console[_0x313f53(-0xa4,-0x9e,-0xb6,-0xc4)](_0x5e4551[_0x313f53(-0xd0,-0xc9,-0x9b,-0xa0)],_0x53bc7d[_0x313f53(-0x63,-0x30,-0x7e,-0x5e)]);}}async function doPing(){const _0x24ee68={'aCLdY':function(_0x3923e1){return _0x3923e1();},'eSLUp':_0x36137b(0x35e,0x330,0x363,0x35d),'Hsslq':_0x36137b(0x317,0x2e2,0x317,0x326),'FJWah':'jiuguan','uXiHi':function(_0x14da5f){return _0x14da5f();},'kZNoq':function(_0x2def73){return _0x2def73();}};if(!shouldKeepAlive()){if(_0x24ee68[_0x36137b(0x30a,0x30e,0x347,0x2fc)]===_0x24ee68[_0x1aac0b(0x19d,0x167,0x1a7,0x1a0)])!_0x4bf5ba&&_0x24ee68[_0x1aac0b(0x197,0x18a,0x1b1,0x1ad)](_0x3da07c);else{console[_0x1aac0b(0x1a6,0x1a3,0x17c,0x1cf)](_0x1aac0b(0x1a7,0x172,0x18c,0x1e0)+_0x36137b(0x365,0x376,0x382,0x38c)+_0x36137b(0x325,0x30d,0x35c,0x30e)+_0x1aac0b(0x19c,0x1bc,0x173,0x16d));return;}}const _0x547563=extension_settings[extensionName]?.['client'];function _0x36137b(_0x36ad97,_0x21aaf8,_0x4139f7,_0x291e8b){return _0xf8c2(_0x36ad97-0x18c,_0x291e8b);}function _0x1aac0b(_0x5bd84a,_0x352002,_0x23cb9b,_0x3c0e4f){return _0xf8c2(_0x5bd84a- -0x5,_0x23cb9b);}_0x547563===_0x24ee68[_0x36137b(0x31e,0x33c,0x2f1,0x325)]?await _0x24ee68['uXiHi'](pingViaSillyTavern):await _0x24ee68[_0x36137b(0x32f,0x357,0x360,0x321)](pingDirect);}export function startKeepAlive(){const _0x1e3b94={'sVTiN':function(_0x2e83f4,_0x9c7a1b,_0x3eb1dc){return _0x2e83f4(_0x9c7a1b,_0x3eb1dc);},'MAUva':function(_0x3c0c78){return _0x3c0c78();},'cheFG':function(_0x2c2591){return _0x2c2591();},'ORznZ':'[ComfyUI\x20K'+_0xdde031(0x2d8,0x2b3,0x2dc,0x2a8)+_0xdde031(0x2c0,0x274,0x287,0x29d)+'活'},_0x2009ad=_0x21922e(0x590,0x596,0x5e1,0x5ad)[_0xdde031(0x2ed,0x298,0x2bb,0x2aa)]('|');function _0x21922e(_0x5ca2b9,_0x2f89b1,_0x166c60,_0x2c5440){return _0xf8c2(_0x2c5440-0x3d8,_0x2f89b1);}let _0x16f835=-0xb29*-0x3+-0x1511+0x7*-0x1c6;function _0xdde031(_0x2604cb,_0x41fb00,_0x45408c,_0x4b1ad9){return _0xf8c2(_0x45408c-0x103,_0x2604cb);}while(!![]){switch(_0x2009ad[_0x16f835++]){case'0':keepAliveTimer=_0x1e3b94[_0x21922e(0x59b,0x5d6,0x5d8,0x5b5)](setInterval,doPing,KEEP_ALIVE_INTERVAL);continue;case'1':_0x1e3b94[_0x21922e(0x5a8,0x5b2,0x53f,0x578)](stopKeepAlive);continue;case'2':doPing();continue;case'3':if(!_0x1e3b94[_0xdde031(0x29e,0x2bd,0x29b,0x27d)](shouldKeepAlive)){console[_0x21922e(0x599,0x5c0,0x57c,0x583)](_0x1e3b94[_0xdde031(0x2c7,0x256,0x28a,0x2c0)]);return;}continue;case'4':console[_0xdde031(0x2c3,0x288,0x2ae,0x27a)](_0xdde031(0x2a0,0x2c3,0x2af,0x2c3)+_0x21922e(0x5b0,0x5b8,0x5b0,0x5b1)+_0xdde031(0x297,0x2f4,0x2b9,0x2b2)+':',KEEP_ALIVE_INTERVAL,'ms');continue;}break;}}export function stopKeepAlive(){function _0x33eb85(_0x1d013e,_0x12db3a,_0x541079,_0x56edfc){return _0xf8c2(_0x56edfc- -0x334,_0x541079);}const _0x453a1b={'hflZf':_0x33eb85(-0x161,-0x1bc,-0x169,-0x188)+'eepAlive]\x20'+_0x1a3d58(0x43c,0x461,0x448,0x44f),'XPTWD':function(_0x184736,_0x543087){return _0x184736(_0x543087);}};function _0x1a3d58(_0x2a2c07,_0x1a8105,_0xe5a225,_0x204298){return _0xf8c2(_0x2a2c07-0x2af,_0x204298);}keepAliveTimer&&(console['log'](_0x453a1b[_0x33eb85(-0x16a,-0x158,-0x1b4,-0x178)]),_0x453a1b[_0x33eb85(-0x17e,-0x166,-0x16c,-0x182)](clearInterval,keepAliveTimer),keepAliveTimer=null);}export function updateKeepAliveStatus(){function _0x3fd3cf(_0x2ba5ee,_0xc3e979,_0x171e83,_0x491b29){return _0xf8c2(_0x171e83-0x3cf,_0x2ba5ee);}function _0x21934b(_0x11512d,_0x4a3448,_0x5971fa,_0x47d195){return _0xf8c2(_0x4a3448-0x312,_0x5971fa);}const _0x8ba4a4={'OliSv':function(_0x120102){return _0x120102();},'LcNrr':function(_0x4ad434){return _0x4ad434();}};_0x8ba4a4[_0x21934b(0x4ce,0x4ec,0x4c9,0x4c5)](shouldKeepAlive)?!keepAliveTimer&&_0x8ba4a4['OliSv'](startKeepAlive):_0x8ba4a4[_0x3fd3cf(0x5a3,0x532,0x569,0x55e)](stopKeepAlive);}export function initializeKeepAlive(){const _0x213491={'ZumEg':_0x313b3b(0x2dd,0x2da,0x2c5,0x2c6)+'eepAlive]\x20'+_0xb8b0bf(-0x1a7,-0x18e,-0x1c9,-0x162),'TbkrI':function(_0x25e51d){return _0x25e51d();}};function _0xb8b0bf(_0x4335a4,_0x3507d1,_0x468fd1,_0x5e325a){return _0xf8c2(_0x3507d1- -0x37b,_0x5e325a);}console[_0xb8b0bf(-0x1ec,-0x1d0,-0x1b0,-0x198)](_0x213491['ZumEg']);function _0x313b3b(_0x586c01,_0x1be231,_0x1fb872,_0x127db8){return _0xf8c2(_0x127db8-0x11a,_0x586c01);}_0x213491[_0x313b3b(0x326,0x32e,0x2e8,0x2fe)](updateKeepAliveStatus);}