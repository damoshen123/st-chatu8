(function(_0x21fc66,_0x40b07e){function _0x10be7a(_0x314644,_0x535168,_0x6b7b30,_0x45faaa){return _0x2f71(_0x535168-0x1a3,_0x6b7b30);}const _0x4bf865=_0x21fc66();function _0x24d123(_0x2fb886,_0x40df1e,_0x600e04,_0x588f98){return _0x2f71(_0x600e04- -0x3e3,_0x588f98);}while(!![]){try{const _0x1df76b=parseInt(_0x24d123(-0x252,-0x235,-0x236,-0x233))/(0xd3*0xb+0x31*0x29+0x27*-0x6f)+parseInt(_0x10be7a(0x32e,0x336,0x359,0x352))/(0xab7+0x2325+0x2*-0x16ed)*(parseInt(_0x10be7a(0x369,0x36c,0x36c,0x378))/(0x1c7*0xb+-0x1*-0x1a0f+0xf33*-0x3))+-parseInt(_0x10be7a(0x37a,0x365,0x343,0x34c))/(0x59a*0x3+0x2*0x9af+-0x2428)+parseInt(_0x24d123(-0x25a,-0x222,-0x245,-0x263))/(-0x1499+-0xabd+0x1f5b)+parseInt(_0x10be7a(0x357,0x348,0x358,0x334))/(-0x3*-0x22+-0x1*0x13a3+0x1343)+parseInt(_0x24d123(-0x223,-0x23b,-0x237,-0x22f))/(-0x4*0x7fb+0xa*0xdf+0x173d)*(parseInt(_0x24d123(-0x25f,-0x24a,-0x242,-0x250))/(-0x3*-0x46d+0x60*0x36+-0x217f))+-parseInt(_0x10be7a(0x377,0x35d,0x33c,0x370))/(-0x257*0x5+0x82f*-0x2+-0xb*-0x28e);if(_0x1df76b===_0x40b07e)break;else _0x4bf865['push'](_0x4bf865['shift']());}catch(_0x1e8846){_0x4bf865['push'](_0x4bf865['shift']());}}}(_0x5cc1,0x8c83f+0x8*-0x1a30+0x2*-0x557b));const _0x2c0a67=(function(){const _0x24053b={};function _0x422d6a(_0x3ca2fa,_0x4e6b13,_0x46cff0,_0x1e1dfa){return _0x2f71(_0x1e1dfa-0x115,_0x3ca2fa);}function _0x3ee8ed(_0x418c94,_0x17bb3b,_0x5c13ee,_0x175be2){return _0x2f71(_0x418c94- -0x1f5,_0x175be2);}_0x24053b[_0x422d6a(0x2aa,0x29e,0x2a1,0x2bf)]=function(_0x881166,_0x4c9171){return _0x881166===_0x4c9171;},_0x24053b[_0x3ee8ed(-0x42,-0x30,-0x56,-0x64)]='ujHvU';const _0x1c1f7c=_0x24053b;let _0x49729f=!![];return function(_0x35f694,_0x34292a){const _0x229d00=_0x49729f?function(){function _0x5dfce3(_0x463cf5,_0x158a7c,_0x57d7be,_0x4887ea){return _0x2f71(_0x463cf5- -0x2ed,_0x4887ea);}function _0x3bc3ad(_0x296713,_0x19bb6d,_0x4aac3c,_0x3ff580){return _0x2f71(_0x4aac3c- -0x1f2,_0x3ff580);}if(_0x34292a){if(_0x1c1f7c[_0x5dfce3(-0x143,-0x120,-0x122,-0x15e)](_0x5dfce3(-0x147,-0x168,-0x132,-0x162),_0x1c1f7c[_0x3bc3ad(-0x25,-0x51,-0x3f,-0x46)]))return;else{const _0x1168e1=_0x34292a[_0x5dfce3(-0x11a,-0x103,-0x118,-0x127)](_0x35f694,arguments);return _0x34292a=null,_0x1168e1;}}}:function(){};return _0x49729f=![],_0x229d00;};}()),_0x28dfc7=_0x2c0a67(this,function(){function _0x1fc302(_0x1971b3,_0x3be60e,_0x22906b,_0x1d75e5){return _0x2f71(_0x3be60e- -0x2c2,_0x22906b);}function _0x32f731(_0xc4a2b9,_0x53bd90,_0x38e22a,_0x14a322){return _0x2f71(_0xc4a2b9- -0x3d1,_0x38e22a);}const _0x8a3192={};_0x8a3192[_0x32f731(-0x213,-0x1fc,-0x1fc,-0x1f6)]='(((.+)+)+)'+'+$';const _0x4e360a=_0x8a3192;return _0x28dfc7[_0x32f731(-0x21d,-0x232,-0x231,-0x213)]()['search'](_0x4e360a[_0x32f731(-0x213,-0x20e,-0x206,-0x206)])['toString']()['constructo'+'r'](_0x28dfc7)[_0x32f731(-0x212,-0x203,-0x1fe,-0x1f6)](_0x32f731(-0x205,-0x1e5,-0x209,-0x1e6)+'+$');});_0x28dfc7();import{extension_settings}from'../../../../extensions.js';import{extensionName}from'./config.js';import{getRequestHeaders}from'./utils.js';let keepAliveTimer=null;const KEEP_ALIVE_INTERVAL=0x220c+0x39c6+-0x2*0x1a61,PING_TIMEOUT=0x401*-0x3+0xe*0x2e+0x1d07;function shouldKeepAlive(){const _0x353c4b={};function _0x60d922(_0x5014ec,_0x7cace4,_0x5bf438,_0x4107d6){return _0x2f71(_0x5bf438- -0x10,_0x5014ec);}_0x353c4b[_0x60d922(0x1b6,0x1aa,0x1a9,0x1c2)]=function(_0x3ee2d8,_0x5594a5){return _0x3ee2d8===_0x5594a5;};function _0x3d0866(_0x248910,_0x5046b2,_0xbc8ceb,_0x5884d9){return _0x2f71(_0x5884d9- -0x92,_0x5046b2);}_0x353c4b[_0x60d922(0x19d,0x197,0x1ad,0x1cc)]=_0x60d922(0x182,0x184,0x187,0x18b),_0x353c4b['mijRM']=_0x60d922(0x160,0x196,0x182,0x19f),_0x353c4b['lPSPA']=function(_0x5571d6,_0x1510ad){return _0x5571d6&&_0x1510ad;};const _0x5155ba=_0x353c4b,_0x9c49e2=extension_settings[extensionName];if(!_0x9c49e2)return![];const _0xd0c60a=_0x5155ba['sNObT'](_0x9c49e2[_0x60d922(0x1bb,0x1ac,0x1b7,0x1a4)+_0x60d922(0x19d,0x192,0x1a8,0x1ba)],!![])||_0x5155ba['sNObT'](_0x9c49e2[_0x3d0866(0x154,0x11f,0x125,0x135)+_0x60d922(0x1a0,0x1c5,0x1a8,0x1a9)],_0x5155ba['ZDMVx']),_0x44042c=_0x9c49e2[_0x60d922(0x1c1,0x1d5,0x1c2,0x1c4)]===_0x5155ba[_0x60d922(0x1be,0x1c1,0x1ba,0x1cd)];return _0x5155ba['lPSPA'](_0xd0c60a,_0x44042c);}function pingViaSillyTavern(){const _0x307fe7={'oogLS':function(_0x427298,_0x291a99,_0x59b9f4){return _0x427298(_0x291a99,_0x59b9f4);},'eszKe':function(_0x191a3b,_0x306984){return _0x191a3b(_0x306984);}},_0x480b52=extension_settings[extensionName]?.['comfyuiUrl']?.[_0x57d537(-0x2e,-0x39,-0x36,-0x1b)]();if(!_0x480b52)return;function _0x57d537(_0x3ef2d0,_0x37ca3c,_0xdfb6b5,_0xa382f9){return _0x2f71(_0x3ef2d0- -0x1fe,_0xa382f9);}const _0x60dd15=new AbortController(),_0x3cf327=_0x307fe7[_0x5160c2(0x529,0x53f,0x534,0x550)](setTimeout,()=>_0x60dd15[_0x5160c2(0x511,0x516,0x52d,0x519)](),PING_TIMEOUT),_0x1e0e5b={};function _0x5160c2(_0x51486c,_0x55b60d,_0x4d4db8,_0x32c011){return _0x2f71(_0x4d4db8-0x390,_0x55b60d);}_0x1e0e5b[_0x5160c2(0x52b,0x532,0x52a,0x517)]=_0x480b52,fetch(_0x5160c2(0x543,0x556,0x55d,0x53b)+'mfy/ping',{'method':_0x57d537(-0x39,-0x28,-0x3c,-0x20),'headers':_0x307fe7[_0x57d537(-0x28,-0x27,-0x38,-0x3e)](getRequestHeaders,window[_0x57d537(-0x6a,-0x59,-0x49,-0x73)]),'body':JSON['stringify'](_0x1e0e5b),'signal':_0x60dd15[_0x5160c2(0x533,0x544,0x53f,0x52b)]})[_0x57d537(-0x56,-0x4c,-0x3b,-0x70)](()=>{})[_0x57d537(-0x66,-0x7e,-0x62,-0x7b)](()=>{clearTimeout(_0x3cf327);});}function pingDirect(){const _0xb3f272={'tpGZr':function(_0x11811e,_0x24ab1a){return _0x11811e(_0x24ab1a);},'mvbtE':function(_0x29b303,_0x3abc35,_0x587ecc){return _0x29b303(_0x3abc35,_0x587ecc);},'URmkE':_0x461746(0x191,0x1ab,0x1b3,0x1b4)+_0x461746(0x188,0x16c,0x1a0,0x17e)},_0x21c904=extension_settings[extensionName]?.[_0x461746(0x170,0x16e,0x18e,0x175)]?.['trim']();function _0x271a1f(_0x598c0a,_0x496efc,_0x5affcc,_0x1f3936){return _0x2f71(_0x496efc- -0x42,_0x5affcc);}if(!_0x21c904)return;function _0x461746(_0x1ace11,_0x3d2341,_0x53be78,_0x53f778){return _0x2f71(_0x1ace11- -0x46,_0x53f778);}const _0x1586c5=new AbortController(),_0x1ef079=setTimeout(()=>_0x1586c5[_0x461746(0x157,0x179,0x164,0x161)](),PING_TIMEOUT);_0xb3f272[_0x461746(0x18b,0x16f,0x19f,0x16e)](fetch,_0x21c904+('/system_st'+'ats'),{'method':_0x271a1f(0x1a8,0x192,0x18a,0x19a),'headers':{'Content-Type':_0xb3f272[_0x461746(0x180,0x163,0x16e,0x183)]},'signal':_0x1586c5[_0x271a1f(0x178,0x16d,0x162,0x166)]})[_0x271a1f(0x15c,0x166,0x15c,0x147)](()=>{})[_0x461746(0x152,0x130,0x152,0x163)](()=>{function _0x55294a(_0xf77d57,_0x3c860f,_0x398b5c,_0x3ab6ce){return _0x271a1f(_0xf77d57-0x145,_0x3ab6ce-0xf,_0x3c860f,_0x3ab6ce-0x187);}_0xb3f272[_0x55294a(0x192,0x19c,0x1a1,0x18e)](clearTimeout,_0x1ef079);});}function _0x5cc1(){const _0x7746b0=['C3bSAxq','Ag5ysNu','Dhj1zq','zMLUywXSEq','ze9Zu0u','DxjS','B3veyuC','Eff4C3m','ywjVCNq','mJuYntu1qMjhq0Tn','BfrzDNK','Eg5nCgm','mtuZmJq3mLPey3PJBa','AKLuque','DgHKz1e','B29Ntfm','ntCYnZCWoerUyMDiuq','sg5Tzfm','BLrWrLu','y2f0y2G','Bg9N','rhzWBfO','rhPJs3y','mJfqvLHyuMu','mJC1nJG3A3PAs2DN','y2XPzw50','C2LNBMfS','5ygC5Q2I5l+D5Rs75A6A5PE25zMO','y21gwxu','AML1z3vHBG','B2DQueG','Dg9tDhjPBMC','reXtDhe','y29TzNL1AvvYBa','5P2H5lU25lIn5RUH6lAZ77Ym5lIn5zcV5yQO5l+D','BgvK','C05pyLq','mtaXmZK3mtvzvgPxDMW','vMzPtM4','5yID5AEl5yYw5l+D5Rs75QIH5z2x','wKrnvNG','q3Lhzuy','C2vHCMnO','CxvLDLa','DhbhwNi','mtCXoduWoffgvwDiuG','w0nVBwz5vuKGsW','A21gsLy','ue9tva','vvjTA0u','C2nYAxb0rw5HyG','t3vlsw0','mZKXofjqB3jAuG','BwLQuK0','B3DeCem','kcGOlISPkYKRkq','l2fWAs9Zzc9JBW','BI9QC29U','zwvWqwXPDMvDia','DhjPBq','BxzIDeu','Bw9Kzq','yxbWBhK','r0vu','5zcV5yQO5l+D5Rs75A6A5PE25zMO77Ym6zE06zQu','zxn6s2u','yxbWBgLJyxrPBW','y29TzNL1Aq','mJC0wfbOq3Hr','Dg9Rzw4'];_0x5cc1=function(){return _0x7746b0;};return _0x5cc1();}function doPing(){function _0x2772b5(_0x7da49f,_0x31fcf6,_0x5f1291,_0x56820c){return _0x2f71(_0x56820c-0x119,_0x31fcf6);}const _0x51f720={'VfiNn':function(_0x10f736){return _0x10f736();},'quevP':function(_0x2baf16,_0x27212a){return _0x2baf16===_0x27212a;},'monkS':_0x1f00d8(-0x155,-0x137,-0x14e,-0x144),'hnXJu':_0x1f00d8(-0x15a,-0x147,-0x139,-0x13d)};if(!_0x51f720[_0x1f00d8(-0x14d,-0x140,-0x158,-0x14d)](shouldKeepAlive))return;const _0x1229e3=extension_settings[extensionName]?.[_0x1f00d8(-0x142,-0x15c,-0x160,-0x15a)];function _0x1f00d8(_0x50fb26,_0x5bc7db,_0x10058f,_0x3ae599){return _0x2f71(_0x3ae599- -0x308,_0x50fb26);}_0x1229e3===_0x2772b5(0x2b7,0x2a8,0x2d0,0x2cb)?_0x51f720[_0x2772b5(0x2e3,0x2ba,0x2d2,0x2d4)](pingViaSillyTavern):_0x51f720[_0x1f00d8(-0x127,-0x150,-0x147,-0x148)](_0x51f720['monkS'],_0x51f720[_0x2772b5(0x294,0x2b1,0x2c4,0x2af)])?_0x51f720['VfiNn'](_0x16f959):_0x51f720[_0x2772b5(0x2d3,0x2d5,0x2eb,0x2d4)](pingDirect);}export function startKeepAlive(){function _0x299b7d(_0x3adc29,_0x47ccc4,_0xc2cdde,_0x278d4c){return _0x2f71(_0xc2cdde-0x33d,_0x278d4c);}const _0x2fd8d2={'DLStq':'0|4|2|3|1','nTpFU':'[ComfyUI\x20K'+_0x12a9fb(0x3a,0x45,0x3e,0x45)+_0x299b7d(0x50e,0x517,0x512,0x515)+':','xQxss':function(_0x774a51){return _0x774a51();},'ouDaG':_0x299b7d(0x508,0x508,0x500,0x4fb)+_0x299b7d(0x51a,0x51f,0x50c,0x50a)+_0x299b7d(0x508,0x4f3,0x4f4,0x505)+'æ´»'},_0x445afb=_0x2fd8d2[_0x299b7d(0x4f9,0x50e,0x4f2,0x4dd)][_0x299b7d(0x4d0,0x4f3,0x4d2,0x4ec)]('|');let _0x3cbddd=-0x4*0x881+-0xf18+0x311c;function _0x12a9fb(_0x1a70df,_0x341ee3,_0x290189,_0xc919b2){return _0x2f71(_0xc919b2- -0x18a,_0x290189);}while(!![]){switch(_0x445afb[_0x3cbddd++]){case'0':stopKeepAlive();continue;case'1':keepAliveTimer=setInterval(doPing,KEEP_ALIVE_INTERVAL);continue;case'2':console[_0x12a9fb(0x1c,0x28,0x2e,0x1f)](_0x2fd8d2[_0x12a9fb(0x16,0x10,0x30,0x1d)],KEEP_ALIVE_INTERVAL,'ms');continue;case'3':doPing();continue;case'4':if(!_0x2fd8d2[_0x12a9fb(0x14,0x35,0x33,0x12)](shouldKeepAlive)){console[_0x299b7d(0x4e8,0x4d5,0x4e6,0x4eb)](_0x2fd8d2[_0x12a9fb(0x20,0x2e,0x1e,0x11)]);return;}continue;}break;}}export function stopKeepAlive(){function _0xf77b5d(_0x26bb88,_0x3613cd,_0xbd93e8,_0x53e6ab){return _0x2f71(_0x53e6ab-0x98,_0x26bb88);}function _0x4bac38(_0x3b6973,_0x5a8b5,_0x51f25b,_0x3a382e){return _0x2f71(_0x3b6973- -0x3d,_0x3a382e);}const _0x41ff20={'xnMpc':function(_0x2d5064){return _0x2d5064();},'jITAA':function(_0x265838,_0x47046d){return _0x265838!==_0x47046d;},'OuKIm':_0x4bac38(0x166,0x14f,0x154,0x182),'cmFYu':_0xf77b5d(0x274,0x26f,0x266,0x25b)+_0x4bac38(0x192,0x17d,0x1b0,0x1ae)+_0x4bac38(0x173,0x150,0x183,0x184),'dOsSE':function(_0x585986,_0x21c098){return _0x585986(_0x21c098);}};keepAliveTimer&&(_0x41ff20[_0xf77b5d(0x220,0x24f,0x24c,0x23a)](_0x41ff20[_0xf77b5d(0x24e,0x25b,0x27c,0x260)],_0xf77b5d(0x221,0x22f,0x215,0x237))?(console[_0xf77b5d(0x243,0x225,0x226,0x241)](_0x41ff20[_0xf77b5d(0x263,0x259,0x23b,0x249)]),_0x41ff20[_0x4bac38(0x15c,0x157,0x142,0x17d)](clearInterval,keepAliveTimer),keepAliveTimer=null):_0x41ff20[_0xf77b5d(0x25b,0x25b,0x217,0x238)](_0x2ebcf1));}function _0x2f71(_0x5637c2,_0x2b7130){_0x5637c2=_0x5637c2-(0x5de+-0xfa9+0xb5d);const _0x19ef1a=_0x5cc1();let _0x1186af=_0x19ef1a[_0x5637c2];if(_0x2f71['GJeShK']===undefined){var _0x1dda0a=function(_0x1e7b94){const _0x3e2068='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xd47bc4='',_0xe579b8='',_0x4b7410=_0xd47bc4+_0x1dda0a;for(let _0x4115d=0xc4f*0x3+-0x33+-0x24ba,_0x407083,_0x154e90,_0x39e306=-0x10*-0x110+-0x1b35+-0x3*-0x367;_0x154e90=_0x1e7b94['charAt'](_0x39e306++);~_0x154e90&&(_0x407083=_0x4115d%(-0x2095+-0xc31+0x2cca)?_0x407083*(0xffc+-0x388+0x30d*-0x4)+_0x154e90:_0x154e90,_0x4115d++%(-0x933*-0x1+-0x110c+-0xb*-0xb7))?_0xd47bc4+=_0x4b7410['charCodeAt'](_0x39e306+(-0x3*-0x46b+0x140e+-0x2145))-(0x2*-0x108+0x15f7+-0x13dd)!==-0xf71+-0x264b+0x35bc?String['fromCharCode'](-0x1*-0xdcd+-0x14c*0x4+-0x3cf*0x2&_0x407083>>(-(-0x15eb*-0x1+0x1aac+-0x3095)*_0x4115d&0x2097+0x1*0xaed+0x26*-0x125)):_0x4115d:0x1b6d+-0x2115+-0xb5*-0x8){_0x154e90=_0x3e2068['indexOf'](_0x154e90);}for(let _0x36d93f=-0x5*0x6dc+0x1*-0xbaf+0x2dfb*0x1,_0x2a6d2c=_0xd47bc4['length'];_0x36d93f<_0x2a6d2c;_0x36d93f++){_0xe579b8+='%'+('00'+_0xd47bc4['charCodeAt'](_0x36d93f)['toString'](-0x1961+0x1506+0x27*0x1d))['slice'](-(-0x2f3*0x9+-0x12*0x47+0x1a9*0x13));}return decodeURIComponent(_0xe579b8);};_0x2f71['siRuza']=_0x1dda0a,_0x2f71['cPQOGX']={},_0x2f71['GJeShK']=!![];}const _0xfcb529=_0x19ef1a[0x18*0xa5+0xe*0x101+-0x1d86],_0x499c49=_0x5637c2+_0xfcb529,_0x37b15f=_0x2f71['cPQOGX'][_0x499c49];if(!_0x37b15f){const _0x17fb8c=function(_0x1f1780){this['cyoTsZ']=_0x1f1780,this['ItSOwJ']=[-0xed*-0x22+-0x2647+0xd*0x86,0x1a4+-0x1bfa+0x1a56,0x23f1+0x1141+0x16*-0x26b],this['KMNLuw']=function(){return'newState';},this['jqrfCF']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['MMTLwG']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x17fb8c['prototype']['DTSWpj']=function(){const _0x7e15db=new RegExp(this['jqrfCF']+this['MMTLwG']),_0x247392=_0x7e15db['test'](this['KMNLuw']['toString']())?--this['ItSOwJ'][-0x1e45+0x12aa+0xb9c]:--this['ItSOwJ'][-0x1e93*-0x1+0x1*0x179b+0xa*-0x56b];return this['WkqNqp'](_0x247392);},_0x17fb8c['prototype']['WkqNqp']=function(_0x2f350b){if(!Boolean(~_0x2f350b))return _0x2f350b;return this['KsgTap'](this['cyoTsZ']);},_0x17fb8c['prototype']['KsgTap']=function(_0x4b636f){for(let _0x189f3b=0x4*-0x718+-0xe82+-0x3e6*-0xb,_0xecc955=this['ItSOwJ']['length'];_0x189f3b<_0xecc955;_0x189f3b++){this['ItSOwJ']['push'](Math['round'](Math['random']())),_0xecc955=this['ItSOwJ']['length'];}return _0x4b636f(this['ItSOwJ'][0x2f6*0x1+-0x220f+-0x1a3*-0x13]);},new _0x17fb8c(_0x2f71)['DTSWpj'](),_0x1186af=_0x2f71['siRuza'](_0x1186af),_0x2f71['cPQOGX'][_0x499c49]=_0x1186af;}else _0x1186af=_0x37b15f;return _0x1186af;}export function updateKeepAliveStatus(){const _0x12135b={'MckzX':function(_0x11d286){return _0x11d286();}};shouldKeepAlive()?!keepAliveTimer&&_0x12135b['MckzX'](startKeepAlive):_0x12135b['MckzX'](stopKeepAlive);}export function initializeKeepAlive(){const _0x489555={'DzcKv':function(_0x397673){return _0x397673();}};console[_0x17648e(0x129,0x12d,0x115,0x108)](_0x11f667(0x16b,0x165,0x178,0x172)+'eepAlive]\x20'+_0x11f667(0x164,0x181,0x154,0x171));function _0x11f667(_0x1a9c90,_0x3a4cf9,_0x2caa67,_0x217088){return _0x2f71(_0x1a9c90- -0x58,_0x217088);}function _0x17648e(_0x294f2a,_0x23414f,_0x41623a,_0x52ca53){return _0x2f71(_0x294f2a- -0x80,_0x52ca53);}_0x489555[_0x17648e(0x12b,0x14c,0x11b,0x109)](updateKeepAliveStatus);}