(function(_0x53ec22,_0x163fda){function _0x4ccdfc(_0x2bc5c9,_0x5ddd78,_0x1bd97e,_0x5a5806){return _0x1ef1(_0x5ddd78- -0x9f,_0x1bd97e);}const _0x482aa5=_0x53ec22();function _0x2f4c31(_0x207de1,_0x3fae27,_0x550e26,_0x551060){return _0x1ef1(_0x3fae27- -0x180,_0x207de1);}while(!![]){try{const _0x1c8b60=parseInt(_0x4ccdfc(0xa7,0xd1,0xb2,0x90))/(-0x184+-0x25e0+0x2765)*(parseInt(_0x4ccdfc(0x62,0x41,0x93,0x1b))/(-0x5b8+0x53d*0x6+0x66d*-0x4))+parseInt(_0x4ccdfc(0x9c,0x65,0x7b,0x39))/(0xd33*-0x1+0x21f*0x1+0xb17)*(parseInt(_0x4ccdfc(0x93,0xa8,0xf2,0xec))/(0x14ce+-0x23*-0x3+-0x1533))+-parseInt(_0x4ccdfc(0x66,0xa1,0x79,0x9a))/(0x991*-0x2+-0x2*-0x12a4+-0x3*0x60b)*(-parseInt(_0x4ccdfc(0x58,0x4d,0x50,0x2d))/(0x1811*-0x1+-0x9c9*-0x3+-0x544*0x1))+-parseInt(_0x4ccdfc(0xbb,0x97,0xb2,0xb4))/(0x1598+-0x21a9+0xc18)*(parseInt(_0x2f4c31(-0x3,-0x3e,-0x83,-0x90))/(0x254f+-0x6e1*-0x2+-0x3309))+parseInt(_0x4ccdfc(0x9d,0x85,0x7b,0x3a))/(0x1*0x805+-0x200b+0x180f)*(parseInt(_0x2f4c31(-0x1f,-0x6d,-0x1c,-0x57))/(-0x57b*-0x7+-0x58+-0x3*0xca9))+parseInt(_0x4ccdfc(0x6d,0x70,0x4c,0x29))/(-0x9db+-0x1230+0x1c16)+-parseInt(_0x2f4c31(-0x7a,-0x9b,-0xcf,-0xe5))/(0x25f8+-0x1*0x1981+-0x11*0xbb);if(_0x1c8b60===_0x163fda)break;else _0x482aa5['push'](_0x482aa5['shift']());}catch(_0x495f7a){_0x482aa5['push'](_0x482aa5['shift']());}}}(_0x2df2,-0xd*0x9b02+-0x5b0ee*-0x1+0x694*0x1cf));const _0x3e68af=(function(){function _0xeb1871(_0x491f1f,_0x3e0be9,_0x3febee,_0x446466){return _0x1ef1(_0x491f1f- -0x18f,_0x3febee);}const _0x49b267={};function _0x2fa65f(_0x3c977c,_0x54b204,_0x32a5de,_0x23c5df){return _0x1ef1(_0x32a5de-0x2d4,_0x3c977c);}_0x49b267[_0xeb1871(-0x6e,-0xa8,-0xb4,-0x6c)]='user',_0x49b267[_0xeb1871(-0x26,-0x70,0x1a,-0x6d)]=function(_0x17eef2,_0x3d3179){return _0x17eef2!==_0x3d3179;},_0x49b267[_0x2fa65f(0x425,0x3e4,0x424,0x40a)]=_0x2fa65f(0x492,0x40a,0x450,0x485);const _0x3397d7=_0x49b267;let _0x3d1979=!![];return function(_0x278d6d,_0x14ffd8){function _0x4e30eb(_0x26e107,_0x994994,_0xfb97f9,_0x3cabea){return _0xeb1871(_0x3cabea-0x461,_0x994994-0x114,_0x26e107,_0x3cabea-0x1e7);}function _0x392dbd(_0x15b01f,_0x1b6175,_0x1d702a,_0x467e99){return _0x2fa65f(_0x15b01f,_0x1b6175-0xc5,_0x1b6175- -0x1f9,_0x467e99-0x111);}if(_0x3397d7[_0x4e30eb(0x3f0,0x44d,0x461,0x43b)]('PWboE',_0x3397d7[_0x4e30eb(0x465,0x453,0x468,0x422)])){const _0x171d8c=_0x3d1979?function(){function _0xbcd9e7(_0x47a683,_0x2c402c,_0x106d47,_0x2ca766){return _0x392dbd(_0x2c402c,_0x2ca766- -0x2e5,_0x106d47-0x114,_0x2ca766-0x175);}if(_0x14ffd8){const _0x1a7af9=_0x14ffd8[_0xbcd9e7(-0x101,-0x134,-0xd1,-0x123)](_0x278d6d,arguments);return _0x14ffd8=null,_0x1a7af9;}}:function(){};return _0x3d1979=![],_0x171d8c;}else{const _0xecb64d={};_0xecb64d[_0x4e30eb(0x43e,0x3fa,0x3d4,0x41b)]=_0x3397d7[_0x4e30eb(0x426,0x436,0x3ee,0x3f3)],_0xecb64d[_0x4e30eb(0x41e,0x496,0x48d,0x45d)]=_0x22cb3d[_0x392dbd(0x22a,0x214,0x262,0x22e)],_0x59fc7b['push'](_0xecb64d);}};}()),_0x458fc8=_0x3e68af(this,function(){function _0x1144a2(_0x45629a,_0x47554d,_0x23ebe2,_0x5a6d1f){return _0x1ef1(_0x5a6d1f- -0x385,_0x23ebe2);}const _0x2ff42f={};_0x2ff42f[_0x5d7de3(0x19b,0x1b0,0x1eb,0x1c1)]=_0x1144a2(-0x1e6,-0x1c9,-0x1f7,-0x1fe)+'+$';const _0x30c5e0=_0x2ff42f;function _0x5d7de3(_0x3bc8e9,_0x2bfec5,_0x4387c6,_0x38ab6f){return _0x1ef1(_0x4387c6-0x103,_0x2bfec5);}return _0x458fc8[_0x1144a2(-0x215,-0x274,-0x24f,-0x237)]()[_0x1144a2(-0x210,-0x225,-0x216,-0x228)](_0x30c5e0[_0x5d7de3(0x22c,0x1ec,0x1eb,0x237)])[_0x5d7de3(0x262,0x295,0x251,0x242)]()[_0x5d7de3(0x258,0x2b2,0x267,0x25d)+'r'](_0x458fc8)['search'](_0x30c5e0[_0x1144a2(-0x248,-0x2d2,-0x2cb,-0x29d)]);});_0x458fc8();import{extension_settings}from'../../../../extensions.js';import{extensionName}from'./config.js';import{getContext}from'../../../../st-context.js';import{getglobalvar,setglobalvar}from'./chatDataUtils.js';import{getworldvar}from'./worldbookProcessor.js';export function checkTriggerWords(_0x16435d,_0x242b74){const _0x19a18a={'Egcod':function(_0x59acab,_0x2755da){return _0x59acab===_0x2755da;},'eogkk':_0x57eae5(-0x15f,-0x156,-0x138,-0x131),'TmEyK':_0x57eae5(-0x1b8,-0x187,-0x19e,-0x1c9),'OMPCz':function(_0x2ef4a2,_0x36cbb7,_0x4caf92,_0x58422b){return _0x2ef4a2(_0x36cbb7,_0x4caf92,_0x58422b);},'tQwCS':function(_0x5368df,_0x2f5ccb){return _0x5368df||_0x2f5ccb;},'DxSfo':function(_0x2083a2,_0x188028){return _0x2083a2!==_0x188028;},'bLemm':_0x57eae5(-0x11d,-0xd1,-0xdf,-0xcf)};if(_0x19a18a[_0x5daf52(0x491,0x464,0x455,0x490)](!_0x16435d,!_0x242b74)){if(_0x57eae5(-0x15e,-0x1af,-0x17b,-0x12e)===_0x5daf52(0x4ae,0x4e8,0x49b,0x4c7))return![];else{if(_0x578f24&&_0x19a18a[_0x5daf52(0x4fa,0x478,0x4cf,0x4b2)](_0x26fcba['type'],_0x19a18a['eogkk'])&&typeof _0x38313d[_0x5daf52(0x501,0x4a8,0x50c,0x4c6)]===_0x19a18a[_0x5daf52(0x472,0x447,0x499,0x493)])return{..._0x2734cd,'text':_0x19a18a[_0x5daf52(0x523,0x539,0x4b6,0x4ea)](_0x5afb3f,_0x362e73[_0x5daf52(0x4b1,0x48f,0x4ad,0x4c6)],_0x213047,_0x254ac7)};return _0x5a0f54;}}function _0x5daf52(_0x4ed0f0,_0x830558,_0x487101,_0x5b2b4c){return _0x1ef1(_0x5b2b4c-0x382,_0x830558);}function _0x57eae5(_0x50e603,_0x57a29d,_0x84c44b,_0x2d15b1){return _0x1ef1(_0x50e603- -0x2a3,_0x2d15b1);}const _0x48da59=_0x16435d[_0x5daf52(0x459,0x4ec,0x463,0x4a5)](',')[_0x5daf52(0x42b,0x427,0x4ad,0x47b)](_0x1a4e41=>_0x1a4e41[_0x5daf52(0x46c,0x505,0x4cc,0x4b1)]())[_0x5daf52(0x522,0x4fc,0x543,0x50e)](_0x4300ca=>_0x4300ca);if(_0x48da59[_0x5daf52(0x530,0x52c,0x510,0x50a)]===-0x28*0x53+0x3*-0x295+0x1*0x14b7)return![];for(const _0x1de59d of _0x48da59){if(_0x19a18a[_0x57eae5(-0x17d,-0x1a0,-0x17f,-0x1c2)](_0x57eae5(-0x11d,-0xef,-0xf6,-0x11d),_0x19a18a[_0x57eae5(-0x152,-0x157,-0x105,-0x13d)]))_0x2b8ba6[_0x57eae5(-0x11a,-0x15a,-0x16c,-0x151)]('{@setvar::'+_0x316450+'@}');else{if(_0x242b74['includes'](_0x1de59d))return!![];}}return![];}export function mergeAdjacentMessages(_0x42b190){const _0x5e3901={'ZOBsI':function(_0xc49724,_0x525424){return _0xc49724===_0x525424;},'OlvmR':_0x21fcc3(0x344,0x382,0x335,0x3c4),'GgMlU':function(_0x49ebf3,_0x51e4c3){return _0x49ebf3+_0x51e4c3;},'vewUz':function(_0x37b3bf,_0xfc27c3){return _0x37b3bf(_0xfc27c3);},'yTnmL':_0x8eb14(0x4ac,0x4d7,0x4ca,0x49f),'qqGoq':function(_0x5576c8,_0x1bf5ff,_0x23cf71){return _0x5576c8(_0x1bf5ff,_0x23cf71);},'tOkAN':function(_0x295ffe,_0x50224c){return _0x295ffe===_0x50224c;}};if(!_0x42b190||_0x5e3901[_0x21fcc3(0x3a3,0x3f9,0x3cb,0x411)](_0x42b190[_0x21fcc3(0x401,0x41f,0x3d1,0x41c)],0x17df+0x191*-0x1+-0x164e))return[];const _0x4a4296=[];function _0x21fcc3(_0x4fb2bf,_0x8209ee,_0x21dd95,_0x229f31){return _0x1ef1(_0x8209ee-0x297,_0x4fb2bf);}function _0x8eb14(_0x3df33e,_0x42f0dd,_0x4b00da,_0x4d8ec3){return _0x1ef1(_0x3df33e-0x368,_0x4b00da);}let _0x6d53fe=null;for(const _0x5a3317 of _0x42b190){if(!_0x6d53fe){const _0x71d034={..._0x5a3317};_0x6d53fe=_0x71d034;}else{if(_0x5e3901[_0x21fcc3(0x3a3,0x3f9,0x3f0,0x419)](_0x6d53fe[_0x8eb14(0x4b1,0x4d9,0x45d,0x491)],_0x5a3317[_0x8eb14(0x4b1,0x465,0x485,0x4d3)]))_0x6d53fe[_0x21fcc3(0x3dc,0x422,0x446,0x3fa)]=_0x5e3901[_0x8eb14(0x481,0x4b7,0x471,0x4b5)](mergeContent,_0x6d53fe[_0x8eb14(0x4f3,0x4b6,0x541,0x4d3)],_0x5a3317[_0x8eb14(0x4f3,0x4cc,0x4a6,0x4a4)]);else{_0x4a4296[_0x8eb14(0x4e8,0x4f5,0x4a8,0x4db)](_0x6d53fe);const _0x58438d={..._0x5a3317};_0x6d53fe=_0x58438d;}}}if(_0x6d53fe){if(_0x5e3901['tOkAN']('GewRy',_0x8eb14(0x471,0x433,0x4b0,0x4be)))_0x4a4296[_0x8eb14(0x4e8,0x539,0x500,0x4cc)](_0x6d53fe);else{if(_0x5e3901[_0x21fcc3(0x3d5,0x3f9,0x3c7,0x3a7)](typeof _0x2cc1ec,_0x5e3901['OlvmR'])&&_0x5e3901[_0x21fcc3(0x41f,0x3f9,0x424,0x3ae)](typeof _0x20a074,_0x5e3901['OlvmR']))return _0x5e3901[_0x21fcc3(0x39e,0x3b4,0x369,0x39b)](_0x2e617c+'\x0a',_0x27cc22);const _0x45994c=_0x3f3845(_0x6b2d5d),_0xaca708=_0x5e3901[_0x21fcc3(0x384,0x3ca,0x3c9,0x403)](_0x282027,_0x3685ca),_0x356fec={};return _0x356fec[_0x21fcc3(0x3fe,0x3f7,0x3ff,0x3ff)]=_0x5e3901[_0x21fcc3(0x380,0x3be,0x395,0x410)],_0x356fec[_0x8eb14(0x4ac,0x469,0x4c6,0x4b4)]='\x0a',[..._0x45994c,_0x356fec,..._0xaca708];}}return _0x4a4296;}function mergeContent(_0x1c4fba,_0x2e9a3f){const _0x253079={'SAIkE':function(_0x58b82d,_0x9e87fa){return _0x58b82d===_0x9e87fa;},'MjoGv':function(_0x22c71b,_0x90c367,_0x3a421a){return _0x22c71b(_0x90c367,_0x3a421a);},'yAVgH':'string','xuCiS':function(_0x1cbb56,_0x1a357a){return _0x1cbb56!==_0x1a357a;},'vmPJF':_0x3b4fdb(0x4c0,0x472,0x473,0x476),'ZFbzu':function(_0x4429ad,_0xa9a88a){return _0x4429ad+_0xa9a88a;},'hnjeg':function(_0x91ee35,_0x71184a){return _0x91ee35(_0x71184a);},'oUNWg':'text'};if(typeof _0x1c4fba==='string'&&typeof _0x2e9a3f===_0x253079['yAVgH']){if(_0x253079['xuCiS'](_0x253079[_0x3b4fdb(0x49d,0x4d6,0x492,0x4a7)],_0x3dcc32(0x1e3,0x1af,0x1e9,0x1e1)))return _0x253079[_0x3dcc32(0x1c5,0x19e,0x219,0x1c4)](_0x1c4fba+'\x0a',_0x2e9a3f);else{if(!_0x29781a){const _0x100df6={..._0x5d5e0a};_0x14f26c=_0x100df6;}else{if(_0x253079['SAIkE'](_0x172d05[_0x3dcc32(0x20d,0x1fc,0x23f,0x1e9)],_0x50a53c[_0x3dcc32(0x20d,0x257,0x25b,0x254)]))_0x544167[_0x3b4fdb(0x47f,0x4a5,0x4e3,0x4b9)]=_0x253079['MjoGv'](_0x3893a5,_0x70079c[_0x3dcc32(0x24f,0x28f,0x255,0x269)],_0x61b60d['content']);else{_0x4d5110[_0x3dcc32(0x244,0x215,0x272,0x257)](_0xed3fca);const _0x5a79b2={..._0x46e661};_0x3cf0f9=_0x5a79b2;}}}}const _0x1ac2c9=normalizeToArray(_0x1c4fba);function _0x3dcc32(_0x5ed4b0,_0x1cc1f6,_0xb58380,_0x50e714){return _0x1ef1(_0x5ed4b0-0xc4,_0x50e714);}const _0x33a548=_0x253079['hnjeg'](normalizeToArray,_0x2e9a3f),_0x41454d={};_0x41454d['type']=_0x253079['oUNWg'],_0x41454d[_0x3b4fdb(0x44c,0x49c,0x421,0x472)]='\x0a';function _0x3b4fdb(_0x22d1aa,_0x16701b,_0x1d7c63,_0x38c50f){return _0x1ef1(_0x38c50f-0x32e,_0x16701b);}return[..._0x1ac2c9,_0x41454d,..._0x33a548];}function normalizeToArray(_0x12c3c9){const _0x363abb={};_0x363abb[_0x5b62a8(0x101,0xe1,0xf1,0x149)]=_0x5ce92f(0x50f,0x4e6,0x4c3,0x54d);const _0x1804e5=_0x363abb;function _0x5b62a8(_0x4a01a6,_0x532b05,_0x3da7b1,_0x5a278c){return _0x1ef1(_0x4a01a6-0xb,_0x5a278c);}if(Array[_0x5b62a8(0xfd,0x13f,0x114,0x110)](_0x12c3c9))return _0x12c3c9;function _0x5ce92f(_0x106850,_0x1d50cf,_0x37ba8e,_0x7e8291){return _0x1ef1(_0x106850-0x3cb,_0x37ba8e);}const _0x1fa663={};return _0x1fa663[_0x5ce92f(0x52b,0x4db,0x4e2,0x56f)]=_0x1804e5['dukAn'],_0x1fa663[_0x5b62a8(0x14f,0x122,0x174,0x197)]=_0x12c3c9||'',[_0x1fa663];}export function replacePlaceholder(_0x23060a,_0x26677b,_0x1dc794,_0x4932e7){const _0x3b53c8={'TiqVw':function(_0x59b518,_0xeefb90,_0xc8032e,_0x290d94){return _0x59b518(_0xeefb90,_0xc8032e,_0x290d94);},'QdVVv':function(_0x439a4f,_0x4785a8){return _0x439a4f===_0x4785a8;},'xwzlO':function(_0x123e6f,_0x3531f8){return _0x123e6f||_0x3531f8;},'tWDOg':function(_0x5d492b,_0x1622f3){return _0x5d492b!==_0x1622f3;},'jqWES':_0x293950(0x353,0x399,0x392,0x3a4),'EFQtb':_0x46d11c(0x1de,0x1b9,0x1c4,0x176),'YdRUD':_0x46d11c(0x171,0x1c4,0x19d,0x1be),'qgxwX':_0x46d11c(0x1e9,0x1b5,0x1a4,0x1fe),'HvxOU':function(_0x250ac8,_0x7a59b){return _0x250ac8||_0x7a59b;},'DiCAw':function(_0x1715ec,_0x42bcb5){return _0x1715ec!==_0x42bcb5;},'YvOAL':_0x293950(0x372,0x365,0x374,0x376),'csszt':function(_0x459279,_0x2158d2){return _0x459279===_0x2158d2;},'SHzdG':'enTSx','nIBzt':'tdAAs'};if(_0x3b53c8[_0x293950(0x397,0x3e4,0x3b6,0x383)](typeof _0x23060a,'string')){if(_0x3b53c8[_0x293950(0x3ac,0x340,0x375,0x3ab)](_0x3b53c8[_0x46d11c(0x1d5,0x1ae,0x1d9,0x18c)],_0x46d11c(0x213,0x1ff,0x213,0x23c)))_0x13decd[_0x293950(0x382,0x3ed,0x3d5,0x3ea)](_0x44b7ba);else{if(_0x1dc794&&_0x23060a[_0x293950(0x3bb,0x3d0,0x3a1,0x3a7)](_0x26677b)){if(_0x3b53c8[_0x293950(0x367,0x3a8,0x3b6,0x3d3)](_0x3b53c8[_0x46d11c(0x1fb,0x20b,0x227,0x1e9)],_0x3b53c8[_0x46d11c(0x172,0x1a6,0x1e6,0x163)])){if(!_0x5f528d||_0x3b53c8[_0x46d11c(0x266,0x223,0x232,0x24f)](_0x5483e3['length'],-0x10c9+-0x1f89+0x3052))return _0x2c8ef3;const _0x546b4b=_0x4e851b();return!_0x546b4b[_0x293950(0x35d,0x376,0x38d,0x33e)+'ta']&&(_0x546b4b[_0x293950(0x393,0x3ce,0x38d,0x345)+'ta']={}),!_0x546b4b[_0x46d11c(0x1e1,0x1fa,0x218,0x1ab)+'ta'][_0x293950(0x3d8,0x3ba,0x3c6,0x415)]&&(_0x546b4b[_0x46d11c(0x1c0,0x1fa,0x1e2,0x1dc)+'ta'][_0x293950(0x37a,0x39f,0x3c6,0x3de)]={}),_0xfc3ae0[_0x293950(0x338,0x382,0x345,0x35f)](_0x4420f7=>{if(!_0x4420f7||!_0x4420f7[_0x306b24(-0x24,0x32,0x10,0xe)])return _0x4420f7;function _0x3a93af(_0x332eba,_0x169868,_0x4dfdb4,_0x32fbea){return _0x46d11c(_0x332eba-0xcd,_0x169868- -0xc8,_0x332eba,_0x32fbea-0xec);}function _0x306b24(_0x233652,_0x161a0a,_0x1ff99f,_0x226f14){return _0x293950(_0x233652,_0x161a0a-0x184,_0x1ff99f- -0x3c7,_0x226f14-0x146);}return{..._0x4420f7,'content':_0x3b53c8[_0x3a93af(0x11c,0xd2,0x7c,0x84)](_0x2ec8cf,_0x4420f7[_0x3a93af(0x134,0x17c,0x1ac,0x193)],_0x546b4b,_0x14b01f)};});}else _0x4932e7&&(_0x3b53c8[_0x46d11c(0x1ec,0x1e2,0x1f8,0x193)](_0x293950(0x335,0x38a,0x348,0x316),_0x3b53c8[_0x46d11c(0x1bb,0x1bb,0x198,0x1a1)])?_0x39345f['chatMetada'+'ta']={}:_0x4932e7['add'](_0x26677b));}return _0x23060a[_0x46d11c(0x221,0x1f1,0x245,0x1ff)](_0x26677b,_0x3b53c8[_0x293950(0x38c,0x352,0x378,0x323)](_0x1dc794,''));}}if(Array[_0x46d11c(0x158,0x1ab,0x1d1,0x1f1)](_0x23060a))return _0x3b53c8['DiCAw'](_0x3b53c8[_0x46d11c(0x1ab,0x1a3,0x1c2,0x1cf)],_0x3b53c8[_0x293950(0x314,0x30c,0x336,0x368)])?_0x30ac51[_0x293950(0x358,0x36b,0x345,0x362)](_0x315556=>_0x590f6e(_0x315556,_0x3a7662,_0x531024,_0x42b84e)):_0x23060a[_0x46d11c(0x163,0x1b2,0x1b7,0x201)](_0x163dc9=>replacePlaceholder(_0x163dc9,_0x26677b,_0x1dc794,_0x4932e7));function _0x293950(_0x5c87c3,_0x386181,_0x3dec16,_0xf3741c){return _0x1ef1(_0x3dec16-0x24c,_0x5c87c3);}function _0x46d11c(_0x321dec,_0x3abd74,_0x224b92,_0x3a9aa5){return _0x1ef1(_0x3abd74-0xb9,_0x224b92);}if(_0x23060a&&typeof _0x23060a===_0x46d11c(0x20e,0x1f6,0x1b5,0x21b)){if(_0x3b53c8['csszt'](_0x3b53c8[_0x46d11c(0x153,0x1a8,0x1d6,0x186)],_0x3b53c8['nIBzt']))return _0x1520e9&&_0x27ae27[_0x46d11c(0x1d0,0x20e,0x262,0x21f)](_0x5d1a64)&&(_0x2ce0c4&&_0x4a06e4['add'](_0x40fbc9)),_0x49e032[_0x293950(0x3b3,0x383,0x384,0x341)](_0x119a5d,_0x3b53c8[_0x46d11c(0x20a,0x1ed,0x20c,0x1c2)](_0x4910df,''));else{const _0x5ee347={};for(const _0x12e4d6 in _0x23060a){_0x5ee347[_0x12e4d6]=replacePlaceholder(_0x23060a[_0x12e4d6],_0x26677b,_0x1dc794,_0x4932e7);}return _0x5ee347;}}return _0x23060a;}export function replaceAllPlaceholders(_0x23c650,_0x2557b0){const _0x71c184={'AdDDJ':function(_0x58882d,_0x324a3d,_0x573a2b,_0x46d10e,_0x1bc114){return _0x58882d(_0x324a3d,_0x573a2b,_0x46d10e,_0x1bc114);},'QySaU':function(_0x1ae014){return _0x1ae014();},'kFlTE':function(_0xe06190,_0x154283){return _0xe06190!==_0x154283;},'psEES':'DhYrR','GXOyF':'Exstx','HMDPJ':'{{user}}','hZBHs':_0x39f7cb(-0x22a,-0x1d6,-0x22e,-0x1f9),'pHIaZ':_0x5af653(-0xc5,-0x3b,-0x44,-0x7e),'RpJLV':function(_0x4cafea,_0x1f370d,_0x2eb16e,_0x5b31de,_0x2fe2a1){return _0x4cafea(_0x1f370d,_0x2eb16e,_0x5b31de,_0x2fe2a1);},'ILrba':_0x39f7cb(-0x25e,-0x208,-0x2af,-0x2af),'bjrTb':_0x5af653(-0x6a,-0xac,-0x15,-0x5b),'LynRL':'{{通用服装启用列表'+'}}','xzYnO':function(_0x1bd840,_0x312281,_0x1b30fc,_0x14fcda,_0x1ee083){return _0x1bd840(_0x312281,_0x1b30fc,_0x14fcda,_0x1ee083);},'UJYgA':function(_0x416b7f,_0x2c7532){return _0x416b7f>_0x2c7532;},'XnsZb':_0x5af653(-0x16,-0x34,0xe,-0x21),'FvPrc':_0x39f7cb(-0x286,-0x2b0,-0x2d3,-0x2b5),'mIxRj':function(_0x1fd3ba,_0xe43517,_0xe03e33,_0x88619c,_0x3ad4b5){return _0x1fd3ba(_0xe43517,_0xe03e33,_0x88619c,_0x3ad4b5);},'Amxrz':function(_0x26ea28,_0xa99453,_0x3be323){return _0x26ea28(_0xa99453,_0x3be323);}},{context:context='',body:body='',worldBookContent:worldBookContent='',variables:variables={},userDemand:userDemand='',characterListText:characterListText='',outfitEnableListText:outfitEnableListText='',commonCharacterListText:commonCharacterListText=''}=_0x2557b0,_0x32e84e=new Set();let _0x38d920=_0x23c650;const _0x541e62=_0x71c184[_0x39f7cb(-0x2aa,-0x299,-0x287,-0x2ab)](getContext);function _0x5af653(_0x4779dd,_0x59ac6d,_0x3c82d0,_0x1fcac2){return _0x1ef1(_0x1fcac2- -0x190,_0x3c82d0);}const _0x73ec61=_0x541e62?.[_0x5af653(-0x82,-0xb3,-0x71,-0x93)]||'';let _0x5abef8=worldBookContent;_0x5abef8&&(_0x71c184[_0x5af653(0x46,-0x4d,0x33,-0xf)](_0x71c184[_0x5af653(-0x12,0xd,-0x85,-0x37)],_0x71c184[_0x5af653(0x10,-0x3a,-0x2d,-0x2a)])?(_0x5abef8=_0x5abef8[_0x5af653(-0x36,-0x87,-0x40,-0x58)](_0x71c184[_0x5af653(-0x91,-0xe1,-0x5e,-0x98)],_0x73ec61),_0x5abef8=_0x5abef8['replaceAll'](_0x71c184['hZBHs'],_0x73ec61)):_0x144153&&_0x2f173f[_0x5af653(0x2d,0x9,0xd,-0x7)](_0x3e1b0d));_0x38d920=replacePlaceholder(_0x38d920,_0x71c184['pHIaZ'],context,_0x32e84e),_0x38d920=_0x71c184[_0x39f7cb(-0x256,-0x23d,-0x263,-0x269)](replacePlaceholder,_0x38d920,_0x71c184[_0x39f7cb(-0x29d,-0x270,-0x258,-0x262)],_0x5abef8,_0x32e84e),_0x38d920=_0x71c184[_0x39f7cb(-0x256,-0x26a,-0x27f,-0x294)](replacePlaceholder,_0x38d920,_0x71c184[_0x39f7cb(-0x2cb,-0x2a2,-0x2ee,-0x315)],body,_0x32e84e),_0x38d920=replacePlaceholder(_0x38d920,_0x39f7cb(-0x29a,-0x2d5,-0x281,-0x2d6),characterListText,_0x32e84e),_0x38d920=_0x71c184['AdDDJ'](replacePlaceholder,_0x38d920,_0x71c184[_0x39f7cb(-0x29f,-0x26d,-0x2a2,-0x294)],outfitEnableListText,_0x32e84e),_0x38d920=_0x71c184[_0x39f7cb(-0x256,-0x2a1,-0x239,-0x288)](replacePlaceholder,_0x38d920,'{{通用角色启用列表'+'}}',commonCharacterListText,_0x32e84e),_0x38d920=_0x71c184[_0x5af653(-0x2a,-0x3c,-0x58,-0x55)](replacePlaceholder,_0x38d920,_0x39f7cb(-0x260,-0x271,-0x2ae,-0x297),userDemand,_0x32e84e);if(variables&&_0x71c184['UJYgA'](Object['keys'](variables)['length'],-0x24c8+0xff7+0x1*0x14d1)){if(_0x71c184[_0x39f7cb(-0x233,-0x27f,-0x20e,-0x259)](_0x71c184[_0x5af653(-0x36,-0x56,0x1e,-0x12)],_0x39f7cb(-0x245,-0x262,-0x25f,-0x285)))_0x5bc28f[_0x50fb3b]=_0x71c184['AdDDJ'](_0x1502bf,_0x2dc646[_0x3324bd],_0x57c191,_0x4db99f,_0x53edc9);else{const _0x1398f6=/\{\{getvar::([^}]+)\}\}/g,_0x51455b=JSON[_0x5af653(-0xe4,-0x8e,-0x5b,-0x91)](_0x38d920),_0x1b2b10=[..._0x51455b[_0x5af653(-0xec,-0x88,-0x4c,-0x9f)](_0x1398f6)],_0x336d25=new Set();for(const _0x51f502 of _0x1b2b10){_0x336d25[_0x39f7cb(-0x22b,-0x278,-0x213,-0x247)](_0x51f502[-0xd*0x22f+0x75d*0x2+0xdaa]);}for(const _0x4f3f4a of _0x336d25){if(_0x71c184[_0x5af653(-0x24,0x2a,-0x5f,-0x1c)]==='YnupO'){const _0xf6ac1='{{getvar::'+_0x4f3f4a+'}}',_0x1f2575=variables[_0x4f3f4a]||'';_0x38d920=_0x71c184[_0x39f7cb(-0x296,-0x2a5,-0x29c,-0x2c3)](replacePlaceholder,_0x38d920,_0xf6ac1,_0x1f2575,_0x32e84e);}else{const _0x1510fa=_0x6d9b83[_0x5af653(-0x55,-0x4e,-0x43,-0x61)](),_0x130805=_0x391ba7[_0x5af653(-0x7b,-0x34,-0xa2,-0x4f)+'ta']['variables'][_0x1510fa]||'';return _0x3bb532&&_0x40aa12[_0x5af653(0x1c,0x26,0x33,-0x7)](_0x5af653(-0x5b,0x46,0x31,-0x11)+_0x1510fa+'@}'),_0x130805;}}}}_0x38d920=_0x71c184[_0x39f7cb(-0x259,-0x215,-0x22c,-0x283)](processVariablePlaceholdersInMessages,_0x38d920,_0x32e84e);const _0x1768e1={};_0x1768e1['messages']=_0x38d920;function _0x39f7cb(_0x305cab,_0xe5f2c8,_0x3dd2b0,_0x164d0c){return _0x1ef1(_0x305cab- -0x3b4,_0xe5f2c8);}return _0x1768e1[_0x39f7cb(-0x298,-0x274,-0x242,-0x26c)+_0x39f7cb(-0x24f,-0x214,-0x27d,-0x286)]=_0x32e84e,_0x1768e1;}function processVariablePlaceholdersInMessages(_0xaef86,_0x9c863d){function _0x5a3979(_0x4053a2,_0x5913ab,_0x36c345,_0x2b8bb3){return _0x1ef1(_0x5913ab- -0x4d,_0x36c345);}const _0x270656={'aQVmb':function(_0x57a8ef,_0x5eb739,_0x3f3f37,_0x116f00){return _0x57a8ef(_0x5eb739,_0x3f3f37,_0x116f00);},'UDHzB':function(_0x328ca1){return _0x328ca1();}};if(!_0xaef86||_0xaef86[_0x5a3979(0x146,0x13b,0xe6,0x105)]===0xdca+0x2*-0xcb9+0xba8)return _0xaef86;const _0x48e690=_0x270656[_0x5a3979(0xdc,0x10f,0x145,0xeb)](getContext);!_0x48e690[_0x5a3979(0xbf,0xf4,0xd4,0xdc)+'ta']&&(_0x48e690[_0x725d41(0x17e,0x186,0x1c9,0x192)+'ta']={});!_0x48e690[_0x725d41(0x173,0x1d1,0x1e4,0x192)+'ta']['variables']&&(_0x48e690[_0x5a3979(0x116,0xf4,0x127,0x137)+'ta'][_0x5a3979(0xde,0x12d,0x163,0x100)]={});function _0x725d41(_0x19abaf,_0x55a54d,_0xecbc53,_0x28fb3c){return _0x1ef1(_0x28fb3c-0x51,_0x55a54d);}return _0xaef86[_0x5a3979(0x74,0xac,0x7c,0xca)](_0xd04e56=>{function _0x490191(_0x5c26e6,_0x4bf700,_0x44a932,_0x160125){return _0x725d41(_0x5c26e6-0x37,_0x160125,_0x44a932-0xea,_0x5c26e6-0x35f);}if(!_0xd04e56||!_0xd04e56['content'])return _0xd04e56;return{..._0xd04e56,'content':_0x270656['aQVmb'](processContentVariables,_0xd04e56[_0x490191(0x53b,0x56f,0x4e8,0x55c)],_0x48e690,_0x9c863d)};});}function _0x2df2(){const _0x477baf=['tw1kDwW','DMv3vxO','EhD6Be8','E3VMRApMLOD9Fq','mZe4ndnhtLzjtNC','yxnZAxn0yw50','CMvWBgfJzufSBa','DxnLCG','CwvOCwG','EhPzBK8','EhrFChjVzMLSzq','B2jQzwn0','E0bNzxr3B3jSza','BeXfDK0','mJC2nJbUvufUD3m','y2HHDe1LDgfKyq','mtm2mg9yq25xCa','D051rMC','Dgv4Da','EMn6vfu','C2fuuNC','mJbntgrcBxu','yxnXvve','CM9Szq','CMvXDwvZDfr5Ca','zw50CMLLCW','E0bZzxr2yxi6oG','ELv4qw4','Dg9tDhjPBMC','Dwj6zLm','DNjxzxq','yKXLBw0','ruzrDgi','rfb5rNy','E3VNLkJMIlFPNidMSyj9Fq','Aw5JBhvKzxm','E3VKUjBNLyZKUABOP6BLJ5f9Fq','zgjvu24','tgnwuMG','Chnfrvm','zMLNCW','qw14CNO','vuriEKi','C2vHCMnO','uNbktfy','AxPRq20','DhLWzq','ANPkt2m','wK9cC0K','DhjPz2DLCLDVCG','y29UC3rYDwn0BW','CMLHyMXLCW','r1HpEuy','u3jqDuq','t01qq3O','seXwzKO','uwrwvNy','Bu1nAxO','CxbXrMi','E0bNzxrNBg9Iyq','DMfYoJO','CvHVugm','mtn2yKftreO','qwDAyuy','DhzYyvy','CKTsrum','rNzqCMm','C3n6t2G','u09wtxi','uuXwqwK','BunjCMu','DM1qsKy','DMfYAwfIBgvZ','AxbfEMu','q3nWvMu','sxHvzgy','wg5ZwMi','E0bNzxr2yxi6oG','ChvZAa','A0zSveu','rKv3wLK','yM1cB2i','B1boshC','y29UDgv4DerHDa','D0vhEvy','kcGOlISPkYKRkq','BgvUz3rO','ywrK','phvZzxi+','y29UDgvUDa','zMLSDgvY','otqYotrqzxnqyxy','vgLXvNC','ru5OquS','CNjvrxq','DgvZDf9JB250zq','mtqXndu4nJrxsK9lBve','y29UDgv4Df9WCG','yxbWBhK','sxjuD1O','yMPYvgi','wxzpquW','C3rYAw5N','mtu2zNDbsfzs','wwrsvuq','u2T2D3C','u0H6zeC','rfngq2q','Bwf0y2HbBgW','AxnbCNjHEq','A2v5CW','vgDiz1O','ANfxrvm','zhvRqw4','Dw9NsLq','se1eueO','BwfW','ExnxA0S','vgryAKS','DwzpCKK','BMfTzte','rhnouLm','C3rYAw5NAwz5','uu5wAfy','wKzIENu','CwD4D1G','DhjPz2DLCK1Vza','mtaXmdKXBuDcte5t','BhLQCu0','E3T1C2vYFx0','zw5HyMXLza','BhzHCJO6','r2v3uNK','uxLtyvu','qMvYweS','re9buK4','E0bZzxrNBg9Iyq','Dff3q1m','nJe5nteYm3vTB0Tzwa','DhjPz2DLCG','vg1fEuS','E3VKUiRKUiVMLOD9Fq','mtbdz0DvA1G','BuH2rhq','thLUuKW','AgLZDg9YEq','suXYyMe','Df90ExbLx2nVBG','CxfhB3e','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','AM9PBG','CMvWBgfJzwrwyq','r2DnBfu','BuL4uMO','rxLku1y','BwD1vwe','ExfmwMu','r1vSr3C','C3bSAxq','otKWndC3ow5QrLv5zW','B2zPBgu','rhHtzM8','EvrUBuW','suTwEgK','DfDet2C','wKzXyuy','wgrWDLi','shz4t1u','uwTyELa','ww51Ce8','DhjPBq','rwDJB2q','CMvWBgfJzq'];_0x2df2=function(){return _0x477baf;};return _0x2df2();}function processContentVariables(_0x2332e2,_0x1f0621,_0x1a9993){const _0x6eb3b8={'SOVMr':_0x346b78(0x2c9,0x36d,0x345,0x31c),'DSFCd':'<user>','DVejt':function(_0x5573a0,_0x208169){return _0x5573a0(_0x208169);},'TgHgZ':function(_0x7dc709,_0x21ba00){return _0x7dc709!==_0x21ba00;},'rrUEt':_0x346b78(0x343,0x320,0x319,0x338),'hAmyF':function(_0xdbe742,_0x2887c4){return _0xdbe742===_0x2887c4;},'TdXjK':function(_0x494745,_0x4eef96){return _0x494745===_0x4eef96;},'uogJT':'string','bmBob':function(_0x425931,_0x269a67,_0x5b32a7,_0x18ab56){return _0x425931(_0x269a67,_0x5b32a7,_0x18ab56);},'oPNHw':function(_0x5ea526,_0x36eccd){return _0x5ea526===_0x36eccd;},'XdpvR':'WGidt'};function _0x41a750(_0x14c707,_0x4c440a,_0x1805eb,_0x88a8e6){return _0x1ef1(_0x1805eb- -0x100,_0x4c440a);}function _0x346b78(_0x42b900,_0x28f22b,_0x3f5569,_0x1226cc){return _0x1ef1(_0x1226cc-0x216,_0x42b900);}if(_0x6eb3b8[_0x41a750(-0x21,-0x2b,-0x5,-0x51)](typeof _0x2332e2,_0x6eb3b8[_0x346b78(0x2cf,0x311,0x344,0x30d)]))return _0x6eb3b8[_0x346b78(0x394,0x35c,0x3cf,0x399)](processStringVariables,_0x2332e2,_0x1f0621,_0x1a9993);if(Array[_0x41a750(0x2a,0x1,-0xe,-0x2b)](_0x2332e2)){if(_0x6eb3b8[_0x346b78(0x3ba,0x3c3,0x389,0x39a)]('HlUtO',_0x6eb3b8[_0x41a750(-0x2a,-0x18,0x2b,0x68)]))_0x4a09ed=_0x48e68d[_0x41a750(0x9,0x34,0x38,0x41)](_0x6eb3b8[_0x41a750(0x64,0x35,0x76,0x3c)],_0x1ba3c2),_0x45e06e=_0x477586[_0x41a750(0x2f,0x32,0x38,0x4c)](_0x6eb3b8[_0x41a750(0xb,0x1e,-0x10,-0x55)],_0x1774e4);else return _0x2332e2[_0x41a750(0x44,0x6,-0x7,0x1c)](_0x5d41da=>{function _0x3eeb7a(_0x5d6b69,_0x62beef,_0x4ce44f,_0x553fba){return _0x346b78(_0x62beef,_0x62beef-0x1a7,_0x4ce44f-0xf8,_0x5d6b69- -0x402);}function _0x25f654(_0x18d05b,_0x28379d,_0x5ceac5,_0xd8c68b){return _0x346b78(_0x28379d,_0x28379d-0xfa,_0x5ceac5-0x1d9,_0x18d05b- -0x38a);}if(_0x6eb3b8[_0x25f654(-0x80,-0xbc,-0x8f,-0xcb)](_0x6eb3b8[_0x25f654(-0x91,-0xd1,-0xdc,-0xa8)],_0x6eb3b8['rrUEt'])){const _0x328cc9={};return _0x328cc9[_0x3eeb7a(-0xa2,-0xe8,-0xec,-0x7f)+'e']=_0x1dd643,_0x328cc9['contextDat'+'a']=_0x369571,_0x6eb3b8['DVejt'](_0x17b72d,_0x328cc9);}else{if(_0x5d41da&&_0x5d41da[_0x25f654(-0x14,-0x25,-0x6b,0x0)]==='text'&&_0x6eb3b8['hAmyF'](typeof _0x5d41da[_0x3eeb7a(-0xa8,-0xa2,-0xac,-0x58)],_0x25f654(-0x89,-0x62,-0xbd,-0x46)))return{..._0x5d41da,'text':processStringVariables(_0x5d41da[_0x25f654(-0x30,-0xe,0x26,0x16)],_0x1f0621,_0x1a9993)};return _0x5d41da;}});}return _0x2332e2;}function _0x1ef1(_0xdac4fa,_0x15b4b3){_0xdac4fa=_0xdac4fa-(0xa6a+0xb*0xeb+-0x13a3);const _0x29db5c=_0x2df2();let _0x64b978=_0x29db5c[_0xdac4fa];if(_0x1ef1['yFtBIo']===undefined){var _0x464544=function(_0x212aaf){const _0x2b1d01='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2f3ed6='',_0x52d9d7='',_0x1520e9=_0x2f3ed6+_0x464544;for(let _0x27ae27=-0xdb8+-0xb66+0x191e,_0x5d1a64,_0x56e7d6,_0x41c7bd=0x9d3*0x3+-0x5*0x683+0x18b*0x2;_0x56e7d6=_0x212aaf['charAt'](_0x41c7bd++);~_0x56e7d6&&(_0x5d1a64=_0x27ae27%(0x1fb*0x8+0x15bc+-0x2590)?_0x5d1a64*(-0x6*-0x227+0x119*-0x20+0x1676)+_0x56e7d6:_0x56e7d6,_0x27ae27++%(-0x1e2a+-0x2*0xb89+-0x60*-0x8e))?_0x2f3ed6+=_0x1520e9['charCodeAt'](_0x41c7bd+(-0x1fcd+-0xd*-0xe9+-0x2*-0xa01))-(-0x4d*0x5e+-0x1cdb+0x392b)!==0x1*0x1ce7+0x43*-0x47+-0xa52?String['fromCharCode'](-0xa35+0xa*0x139+-0x1*0x106&_0x5d1a64>>(-(0x1*0xfb0+-0xa6c+-0x542)*_0x27ae27&0x10f8+-0x1419+0x327)):_0x27ae27:-0x1*0x1415+0x1b01+-0x6ec*0x1){_0x56e7d6=_0x2b1d01['indexOf'](_0x56e7d6);}for(let _0x11b00c=0x88a+0x112+0x19a*-0x6,_0x49e032=_0x2f3ed6['length'];_0x11b00c<_0x49e032;_0x11b00c++){_0x52d9d7+='%'+('00'+_0x2f3ed6['charCodeAt'](_0x11b00c)['toString'](0x748+-0x1f6*0x11+0x2*0xd0f))['slice'](-(-0x2004+-0x10ea+0x6*0x828));}return decodeURIComponent(_0x52d9d7);};_0x1ef1['rlQiek']=_0x464544,_0x1ef1['yEdTFp']={},_0x1ef1['yFtBIo']=!![];}const _0x5e096b=_0x29db5c[-0x65*-0x1+0x42*0x4f+-0x14c3],_0x94aec8=_0xdac4fa+_0x5e096b,_0xc8612c=_0x1ef1['yEdTFp'][_0x94aec8];if(!_0xc8612c){const _0x119a5d=function(_0x4910df){this['mFMwUz']=_0x4910df,this['yPjpqj']=[-0x14fb+-0x16c2+0x15df*0x2,0x242+0x55a+-0x79c,0x110*0x20+0x1*-0x1ce4+-0x2*0x28e],this['OokfdI']=function(){return'newState';},this['FcTZlV']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ablslr']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x119a5d['prototype']['FzSmVd']=function(){const _0x2ce0c4=new RegExp(this['FcTZlV']+this['ablslr']),_0x11857a=_0x2ce0c4['test'](this['OokfdI']['toString']())?--this['yPjpqj'][0x267*-0x1+-0x41d*0x3+0xebf]:--this['yPjpqj'][0x599+-0x112+-0x487];return this['OJRSMM'](_0x11857a);},_0x119a5d['prototype']['OJRSMM']=function(_0x5addc3){if(!Boolean(~_0x5addc3))return _0x5addc3;return this['iPvyGk'](this['mFMwUz']);},_0x119a5d['prototype']['iPvyGk']=function(_0x4a06e4){for(let _0x40fbc9=0x13fb+0xd*-0x13f+0xf2*-0x4,_0x49c161=this['yPjpqj']['length'];_0x40fbc9<_0x49c161;_0x40fbc9++){this['yPjpqj']['push'](Math['round'](Math['random']())),_0x49c161=this['yPjpqj']['length'];}return _0x4a06e4(this['yPjpqj'][0x19ab+0x432+-0x1ddd]);},new _0x119a5d(_0x1ef1)['FzSmVd'](),_0x64b978=_0x1ef1['rlQiek'](_0x64b978),_0x1ef1['yEdTFp'][_0x94aec8]=_0x64b978;}else _0x64b978=_0xc8612c;return _0x64b978;}function processStringVariables(_0x5522ce,_0x174e75,_0x47ec97){const _0x1fac73={'wNuFg':function(_0x1c93d7,_0x162024){return _0x1c93d7!==_0x162024;},'qVAsb':'fdMcF','rKREC':function(_0x3c00bd,_0x30efe0){return _0x3c00bd+_0x30efe0;},'YJnvu':_0x37e308(0x117,0x151,0x15a,0x104),'Skvww':function(_0x2160d8,_0x5db3ae,_0x3c2cea){return _0x2160d8(_0x5db3ae,_0x3c2cea);},'FEwZY':function(_0x3cd575,_0xe1cc39){return _0x3cd575(_0xe1cc39);},'eMDMV':function(_0x4b0237,_0x503b8e){return _0x4b0237===_0x503b8e;},'lLEvM':_0x4cb0dd(-0x27c,-0x28f,-0x2c4,-0x245),'LcVRh':_0x4cb0dd(-0x261,-0x22f,-0x229,-0x25a)+'+$','zUxAn':function(_0x3aa515,_0xda4f9,_0x33a2f4){return _0x3aa515(_0xda4f9,_0x33a2f4);},'QLVAi':_0x37e308(0x17a,0x167,0x198,0x148),'fXprJ':_0x4cb0dd(-0x2ee,-0x2f6,-0x2be,-0x2d7),'ENhAK':function(_0xfeab15,_0x9af1df){return _0xfeab15===_0x9af1df;},'Uuudk':_0x4cb0dd(-0x2bb,-0x30f,-0x2be,-0x309)};if(!_0x5522ce)return _0x5522ce;let _0x39cbed=_0x5522ce;_0x39cbed=_0x39cbed['replace'](/\{@setvar::([^:@]+)::([\s\S]*?)@\}/g,(_0x3d9767,_0x2d6d20,_0x1feefe)=>{function _0x33c9c8(_0x55ecac,_0x58309d,_0x3f3735,_0x5baafc){return _0x37e308(_0x5baafc- -0x20,_0x58309d-0xe2,_0x55ecac,_0x5baafc-0x1dc);}function _0x28c595(_0x43d3ad,_0x428f45,_0xf802d5,_0x38f1eb){return _0x4cb0dd(_0x38f1eb-0x4a1,_0x428f45-0x75,_0x43d3ad,_0x38f1eb-0xb);}if(_0x1fac73[_0x28c595(0x206,0x1f6,0x252,0x1fc)](_0x1fac73['qVAsb'],'fdMcF'))return _0x29db5c;else{const _0x2a177e=_0x2d6d20[_0x33c9c8(0xdf,0x10d,0x15d,0x128)]();return _0x174e75[_0x28c595(0x247,0x246,0x1ca,0x1fa)+'ta'][_0x28c595(0x285,0x242,0x272,0x233)][_0x2a177e]=_0x1feefe,_0x47ec97&&_0x47ec97[_0x33c9c8(0x1ac,0x176,0x1ad,0x182)](_0x33c9c8(0x106,0x16d,0x105,0x145)+_0x2a177e+'@}'),'';}}),_0x39cbed=_0x39cbed[_0x4cb0dd(-0x2b7,-0x2b3,-0x2eb,-0x2e9)](/\{@getvar::([^@]+)@\}/g,(_0x3071cd,_0x3de967)=>{function _0x5c9ef0(_0x16d89e,_0x126e9d,_0x542e02,_0x3f35f4){return _0x4cb0dd(_0x126e9d-0x23c,_0x126e9d-0x14,_0x3f35f4,_0x3f35f4-0x3c);}const _0x5c1191={'ipEze':function(_0x1e9c6d,_0x4456fb){function _0x4b78bc(_0x1edab2,_0x5c7981,_0x5dbda0,_0x2c0243){return _0x1ef1(_0x5c7981-0x39b,_0x1edab2);}return _0x1fac73[_0x4b78bc(0x4e9,0x50e,0x501,0x52a)](_0x1e9c6d,_0x4456fb);}},_0x4441e3=_0x3de967[_0x15395e(0x137,0x186,0x15e,0x170)](),_0x157793=_0x174e75[_0x5c9ef0(-0x2f,-0x6b,-0xa1,-0x4b)+'ta'][_0x15395e(0x20d,0x1ec,0x1da,0x1bb)][_0x4441e3]||'';function _0x15395e(_0x298e13,_0x3e4664,_0xa545a6,_0x998b56){return _0x4cb0dd(_0x998b56-0x429,_0x3e4664-0xb7,_0x298e13,_0x998b56-0x74);}if(_0x47ec97){if(_0x5c9ef0(-0xd1,-0x98,-0xad,-0x7a)!==_0x1fac73['YJnvu'])_0x47ec97[_0x15395e(0x1ce,0x1c2,0x220,0x1ca)](_0x15395e(0x169,0x1a0,0x204,0x1c0)+_0x4441e3+'@}');else return _0x5c1191['ipEze'](_0x5c1191[_0x15395e(0x1cf,0x190,0x20f,0x1bc)](_0x9e92f9,'\x0a'),_0x5c1683);}return _0x157793;}),_0x39cbed=_0x39cbed[_0x37e308(0x14a,0x10f,0xfa,0x14c)](/\{@setglobalvar::([^:@]+)::([\s\S]*?)@\}/g,(_0x392416,_0x1693f3,_0x2d958e)=>{const _0x49fcd9=_0x1693f3[_0x4d9802(0x27,0xb1,0x7b,0x3a)]();_0x1fac73[_0x4d9802(-0xb,0x67,0x3a,0x34)](setglobalvar,_0x49fcd9,_0x2d958e);_0x47ec97&&_0x47ec97[_0x20c1f8(0x266,0x284,0x264,0x266)](_0x20c1f8(0x1ea,0x1ad,0x1dd,0x1b8)+_0x20c1f8(0x1e5,0x201,0x1d0,0x1dc)+_0x49fcd9+'@}');function _0x20c1f8(_0x3d9bc0,_0x2e0149,_0x4f4765,_0x1078d4){return _0x4cb0dd(_0x3d9bc0-0x4c5,_0x2e0149-0x114,_0x4f4765,_0x1078d4-0xfa);}function _0x4d9802(_0x97c1ea,_0x577d18,_0x363395,_0x87ecae){return _0x37e308(_0x363395- -0xcd,_0x577d18-0x79,_0x577d18,_0x87ecae-0x164);}return'';});function _0x37e308(_0x289694,_0x39f3a1,_0x33e204,_0x4cdc17){return _0x1ef1(_0x289694-0x19,_0x33e204);}function _0x4cb0dd(_0x5a6bf0,_0x3ac824,_0x4ae6fc,_0x39d18e){return _0x1ef1(_0x5a6bf0- -0x3e8,_0x4ae6fc);}return _0x39cbed=_0x39cbed[_0x4cb0dd(-0x2b7,-0x287,-0x264,-0x298)](/\{@getglobalvar::([^@]+)@\}/g,(_0x3c0dd2,_0x4d8e74)=>{const _0x2c0231=_0x4d8e74[_0x92857a(-0x9a,-0xd7,-0x8a,-0x88)]();function _0x21f1ed(_0x192d29,_0x4dea8d,_0x469a59,_0x1b3867){return _0x37e308(_0x4dea8d-0x339,_0x4dea8d-0x186,_0x192d29,_0x1b3867-0x82);}const _0x1465a7=_0x1fac73[_0x21f1ed(0x4f2,0x4d4,0x48d,0x4c7)](getglobalvar,_0x2c0231)||'';function _0x92857a(_0x4de7df,_0x36a3cd,_0x1c26c1,_0x4c9b53){return _0x37e308(_0x4c9b53- -0x1d0,_0x36a3cd-0x3d,_0x1c26c1,_0x4c9b53-0x120);}if(_0x47ec97){if(_0x1fac73['eMDMV'](_0x1fac73[_0x92857a(-0x5c,-0xcf,-0xac,-0x78)],_0x1fac73['lLEvM']))_0x47ec97[_0x21f1ed(0x4cd,0x4db,0x50e,0x491)](_0x92857a(-0x64,-0x58,0x1,-0x4a)+'lvar::'+_0x2c0231+'@}');else{const _0x22799=_0x2e5005[_0x21f1ed(0x465,0x481,0x434,0x4b8)]();return _0x38aa77[_0x92857a(-0x5e,-0x35,-0x22,-0x76)+'ta']['variables'][_0x22799]=_0x15331a,_0x1437a7&&_0x501b63[_0x21f1ed(0x494,0x4db,0x4b3,0x49e)]('{@setvar::'+_0x22799+'@}'),'';}}return _0x1465a7;}),_0x39cbed=_0x39cbed[_0x37e308(0x14a,0x16d,0x17c,0x16b)](/\{@getworldvar::([^@]+)@\}/g,(_0x11eb2b,_0x239df5)=>{function _0x33d474(_0x705340,_0x22a99b,_0x17c261,_0x50f0e8){return _0x4cb0dd(_0x705340-0x6fc,_0x22a99b-0xc3,_0x17c261,_0x50f0e8-0x9);}const _0x5c0176={'mguUa':function(_0x28c8ae,_0x4ad72f,_0x555fd3){function _0x42965a(_0x598249,_0x5041fd,_0xa9f76f,_0x226a3b){return _0x1ef1(_0x226a3b- -0x2a9,_0x598249);}return _0x1fac73[_0x42965a(-0x1a5,-0x16a,-0x183,-0x15c)](_0x28c8ae,_0x4ad72f,_0x555fd3);}};function _0xe2ce63(_0x4fba6a,_0x3a9130,_0x27e16b,_0x3155fe){return _0x4cb0dd(_0x3155fe-0x54f,_0x3a9130-0x111,_0x4fba6a,_0x3155fe-0x57);}if(_0x1fac73[_0x33d474(0x48b,0x452,0x45d,0x483)]!==_0x1fac73['fXprJ']){const _0x18c777=_0x239df5['trim'](),_0x4e90b7=_0x1fac73['FEwZY'](getworldvar,_0x18c777)||'';return _0x47ec97&&(_0x1fac73[_0xe2ce63(0x21c,0x251,0x29a,0x249)](_0x1fac73['Uuudk'],_0xe2ce63(0x2f1,0x28e,0x2ec,0x2b6))?_0x454c22[_0x33d474(0x49f,0x46c,0x4e1,0x4c4)]=_0x5c0176[_0x33d474(0x434,0x480,0x416,0x41d)](_0x15aa95,_0x3ac68e[_0xe2ce63(0x2ee,0x2b4,0x2e7,0x2f2)],_0x4530df[_0xe2ce63(0x308,0x326,0x314,0x2f2)]):_0x47ec97[_0x33d474(0x49d,0x4bd,0x4eb,0x4c9)](_0x33d474(0x452,0x415,0x474,0x462)+_0xe2ce63(0x284,0x31b,0x28c,0x2d5)+_0x18c777+'@}')),_0x4e90b7;}else return _0x3303a2[_0xe2ce63(0x303,0x279,0x2ac,0x2b5)]()[_0x33d474(0x471,0x4aa,0x429,0x4a3)](OwrTmr[_0x33d474(0x46c,0x44f,0x418,0x449)])[_0xe2ce63(0x2f6,0x2ac,0x270,0x2b5)]()['constructo'+'r'](_0x43dd2c)[_0xe2ce63(0x293,0x2fe,0x2ad,0x2c4)](OwrTmr[_0x33d474(0x46c,0x42b,0x45c,0x460)]);}),_0x39cbed;}export function buildPromptWithTrigger(_0x31a28e){const _0x1bcf67={'AgZaF':_0x337d4b(-0x285,-0x2d4,-0x2c0,-0x286),'sszOh':function(_0x14b97f,_0x4c2512){return _0x14b97f===_0x4c2512;},'mCIre':_0x337d4b(-0x2e7,-0x331,-0x288,-0x2df),'lyjqM':_0x1557ff(-0x13a,-0x167,-0x130,-0x16c),'DPyFv':function(_0x250952,_0x43cb86){return _0x250952!==_0x43cb86;},'DnFIB':_0x337d4b(-0x269,-0x29a,-0x24a,-0x293),'izkCm':function(_0x54776d,_0x50170d){return _0x54776d===_0x50170d;},'IxUdf':_0x1557ff(-0x163,-0x17b,-0x169,-0x11a),'MmJul':function(_0x2f4060,_0xca2c9d,_0x3ea757){return _0x2f4060(_0xca2c9d,_0x3ea757);},'ZFqaF':function(_0x52673b,_0x14cab2){return _0x52673b!==_0x14cab2;},'mMMiz':_0x337d4b(-0x2b6,-0x2f1,-0x2fc,-0x2be),'dbUSn':_0x337d4b(-0x25a,-0x2a4,-0x215,-0x258),'qehqh':function(_0x354b60,_0x4e0020){return _0x354b60(_0x4e0020);},'SrPuD':function(_0x41845d,_0x2f27b0,_0x268f22){return _0x41845d(_0x2f27b0,_0x268f22);}},{requestType:_0x13e177,contextData:_0x410521}=_0x31a28e,_0x26a117=extension_settings[extensionName]?.['llm_reques'+_0x1557ff(-0x15b,-0x126,-0x124,-0x126)+_0x337d4b(-0x28b,-0x2be,-0x21f,-0x270)]||{};function _0x1557ff(_0x5d35e3,_0x293f6b,_0x486800,_0x5c7a6f){return _0x1ef1(_0x5d35e3- -0x273,_0x293f6b);}const _0x58bc21={};_0x58bc21[_0x337d4b(-0x324,-0x2b8,-0x30d,-0x2e4)+_0x1557ff(-0x14e,-0x173,-0x168,-0x198)]='默认';const _0x219a75=_0x26a117[_0x13e177]||_0x58bc21,_0x5a8a35=_0x219a75[_0x337d4b(-0x308,-0x29d,-0x2fc,-0x2e4)+_0x337d4b(-0x2f6,-0x260,-0x288,-0x2a5)]||'默认',_0x4321f7=extension_settings[extensionName]?.[_0x337d4b(-0x2d5,-0x2e2,-0x2be,-0x2e6)+_0x1557ff(-0x137,-0x109,-0x144,-0x18b)+'s']||{};function _0x337d4b(_0xbcfdba,_0xdfe68e,_0xd12e5b,_0x39c4e3){return _0x1ef1(_0x39c4e3- -0x3ca,_0xd12e5b);}const _0x56fe25=_0x4321f7[_0x5a8a35]||_0x4321f7[Object[_0x337d4b(-0x2a1,-0x2e6,-0x31f,-0x2d7)](_0x4321f7)[-0xe5a*0x2+-0x10*0x67+0x1a*0x15a]]||{},{context:context='',body:body='',worldBookContent:worldBookContent='',userDemand:userDemand=''}=_0x410521,_0x49695a=[userDemand,context,body,worldBookContent]['filter'](Boolean)[_0x1557ff(-0x158,-0x110,-0x13f,-0x151)]('\x0a'),_0x4c1ba8=[];if(_0x56fe25[_0x337d4b(-0x290,-0x23a,-0x29f,-0x27f)]&&Array['isArray'](_0x56fe25[_0x1557ff(-0x128,-0x14a,-0x11c,-0x17a)]))for(const _0x226ff9 of _0x56fe25[_0x337d4b(-0x2d3,-0x22a,-0x2bb,-0x27f)]){if(!_0x226ff9[_0x337d4b(-0x307,-0x2a2,-0x2df,-0x2c3)])continue;if(!_0x226ff9[_0x1557ff(-0xe8,-0x11f,-0x10d,-0x122)]||_0x1bcf67[_0x1557ff(-0x114,-0xe2,-0x14a,-0x104)](_0x226ff9[_0x337d4b(-0x1ec,-0x21f,-0x22f,-0x23f)][_0x1557ff(-0x144,-0x186,-0x196,-0x198)](),''))continue;if(_0x226ff9[_0x1557ff(-0x170,-0x1a7,-0x161,-0x15e)+'e']===_0x1bcf67[_0x337d4b(-0x247,-0x24c,-0x290,-0x24d)]){if(!_0x1bcf67[_0x1557ff(-0x141,-0x13b,-0x132,-0x17b)](checkTriggerWords,_0x226ff9[_0x337d4b(-0x27e,-0x21e,-0x226,-0x267)+'ds'],_0x49695a)){if(_0x1bcf67['ZFqaF'](_0x1bcf67[_0x1557ff(-0x108,-0x121,-0x138,-0xc1)],_0x1bcf67[_0x337d4b(-0x21f,-0x28f,-0x224,-0x25f)]))return _0x2be654[_0x1557ff(-0x17a,-0x156,-0x156,-0x125)](_0x45da85=>{if(_0x45da85&&_0x45da85['type']===_0x1bcf67[_0x4eb5ab(0x2f5,0x2f7,0x2d4,0x302)]&&_0x1bcf67[_0x4c871f(0x49f,0x49e,0x44a,0x45d)](typeof _0x45da85[_0x4c871f(0x46e,0x4c2,0x4b7,0x436)],_0x1bcf67[_0x4eb5ab(0x2fc,0x2c8,0x317,0x2df)]))return{..._0x45da85,'text':_0x155e78(_0x45da85['text'],_0x10bece,_0x28a5c4)};function _0x4c871f(_0x38a433,_0x284707,_0x4b32ff,_0x4b6692){return _0x337d4b(_0x38a433-0x5a,_0x284707-0x1a7,_0x4b32ff,_0x38a433-0x6f4);}function _0x4eb5ab(_0x7a0325,_0x53d629,_0x333134,_0x651972){return _0x337d4b(_0x7a0325-0x49,_0x53d629-0x67,_0x651972,_0x7a0325-0x54e);}return _0x45da85;});else continue;}}const _0x1014ae={};_0x1014ae[_0x1557ff(-0x12a,-0x169,-0x15a,-0x181)]=_0x226ff9[_0x1557ff(-0x12a,-0x17d,-0x108,-0x168)]||_0x1bcf67['lyjqM'],_0x1014ae[_0x1557ff(-0xe8,-0xa6,-0xa7,-0xf9)]=_0x226ff9['content'],_0x4c1ba8['push'](_0x1014ae);}else{if(_0x56fe25['history']&&Array[_0x1557ff(-0x181,-0x186,-0x16d,-0x1d1)](_0x56fe25['history']))for(const _0xb19f69 of _0x56fe25[_0x1557ff(-0x15d,-0x16b,-0x131,-0x162)]){if(_0xb19f69[_0x1557ff(-0x13a,-0x17c,-0x14f,-0xf2)]&&_0x1bcf67[_0x1557ff(-0x149,-0x141,-0x15e,-0x100)](_0xb19f69[_0x1557ff(-0x13a,-0x16b,-0x178,-0x10f)][_0x337d4b(-0x2e6,-0x2d7,-0x294,-0x29b)](),'')){if(_0x1bcf67['dbUSn']!==_0x1bcf67[_0x1557ff(-0x11c,-0xde,-0x121,-0x15a)])for(const _0x2d3f42 of _0x48d1eb[_0x337d4b(-0x285,-0x30a,-0x2ca,-0x2b4)]){if(_0x2d3f42[_0x1557ff(-0x13a,-0xe8,-0x187,-0x135)]&&_0x2d3f42['user']['trim']()!==''){const _0x76830c={};_0x76830c[_0x1557ff(-0x12a,-0x11d,-0x162,-0x164)]=_0x1bcf67[_0x1557ff(-0x16e,-0x1c3,-0x120,-0x1ae)],_0x76830c[_0x337d4b(-0x25d,-0x28c,-0x27e,-0x23f)]=_0x2d3f42[_0x337d4b(-0x2ca,-0x2df,-0x255,-0x291)],_0x27f8e5[_0x1557ff(-0xf3,-0xa7,-0x11f,-0x136)](_0x76830c);}if(_0x2d3f42[_0x337d4b(-0x274,-0x2b5,-0x2b3,-0x293)]&&_0x1bcf67[_0x337d4b(-0x2c8,-0x27c,-0x29e,-0x277)](_0x2d3f42['assistant'][_0x337d4b(-0x253,-0x293,-0x264,-0x29b)](),'')){const _0x52f1be={};_0x52f1be[_0x1557ff(-0x12a,-0xe2,-0x15d,-0x103)]=_0x1bcf67['DnFIB'],_0x52f1be[_0x337d4b(-0x21a,-0x26d,-0x20f,-0x23f)]=_0x2d3f42[_0x337d4b(-0x281,-0x271,-0x283,-0x293)],_0x398ab8[_0x1557ff(-0xf3,-0x126,-0x13a,-0xe4)](_0x52f1be);}}else{const _0x1f3428={};_0x1f3428[_0x1557ff(-0x12a,-0x108,-0x174,-0x10b)]=_0x1bcf67[_0x337d4b(-0x2fd,-0x2e0,-0x28e,-0x2c5)],_0x1f3428[_0x1557ff(-0xe8,-0x121,-0x133,-0xdf)]=_0xb19f69[_0x337d4b(-0x263,-0x269,-0x275,-0x291)],_0x4c1ba8[_0x337d4b(-0x25b,-0x22c,-0x20a,-0x24a)](_0x1f3428);}}if(_0xb19f69[_0x1557ff(-0x13c,-0x155,-0x160,-0xe9)]&&_0x1bcf67['ZFqaF'](_0xb19f69[_0x337d4b(-0x251,-0x288,-0x2cb,-0x293)]['trim'](),'')){const _0x3a7eea={};_0x3a7eea['role']=_0x1bcf67['DnFIB'],_0x3a7eea[_0x337d4b(-0x23c,-0x1e9,-0x223,-0x23f)]=_0xb19f69['assistant'],_0x4c1ba8[_0x1557ff(-0xf3,-0xda,-0x9d,-0x102)](_0x3a7eea);}}}const _0x29a3a2=_0x1bcf67[_0x1557ff(-0x139,-0x12f,-0x10f,-0x15d)](mergeAdjacentMessages,_0x4c1ba8),{messages:_0x47908f,replacedVariables:_0x2b9c90}=_0x1bcf67[_0x337d4b(-0x213,-0x26a,-0x2b4,-0x263)](replaceAllPlaceholders,_0x29a3a2,_0x410521);return _0x47908f;}export function getProcessedPrompt(_0x252ebc,_0x796ea7){function _0x30a82f(_0xefeb59,_0x256f03,_0x3009dc,_0x5cf728){return _0x1ef1(_0x256f03-0x227,_0x5cf728);}const _0x1bf193={'gzPZE':function(_0x18ec9f,_0x2f288a){return _0x18ec9f(_0x2f288a);}},_0x2d6ef1={};function _0x466d86(_0x38ca9f,_0x3aa45f,_0x11f6a9,_0x30a0b3){return _0x1ef1(_0x11f6a9- -0x36f,_0x3aa45f);}return _0x2d6ef1[_0x466d86(-0x1d9,-0x229,-0x225,-0x23b)+'e']=_0x252ebc,_0x2d6ef1[_0x30a82f(0x3ae,0x3ac,0x375,0x35c)+'a']=_0x796ea7,_0x1bf193['gzPZE'](buildPromptWithTrigger,_0x2d6ef1);}