(function(_0x4faebb,_0x13a231){function _0x3e299f(_0x332c02,_0x5ca581,_0x299445,_0x3ab0a9){return _0x3bfe(_0x5ca581-0x34b,_0x299445);}function _0x3135cf(_0xc3efe2,_0x3ca3cb,_0x258c0f,_0x5cb92f){return _0x3bfe(_0x258c0f- -0x8e,_0xc3efe2);}const _0x205c31=_0x4faebb();while(!![]){try{const _0x44be4c=parseInt(_0x3e299f(0x477,0x47f,0x470,0x488))/(0x4a1*0x1+0x1*0x122b+0x799*-0x3)*(-parseInt(_0x3135cf(0xb8,0x9c,0xdc,0xf5))/(0x147*0x1a+-0x80f*0x3+-0x907*0x1))+parseInt(_0x3135cf(0x96,0xa0,0xb1,0xc6))/(0x4*-0x33b+-0x1f*0x127+0x30a8)+parseInt(_0x3135cf(0xa2,0xc2,0xb9,0xb2))/(-0x1*0x208b+-0x3f8+0x2487)*(-parseInt(_0x3e299f(0x47a,0x49d,0x49b,0x4c3))/(-0x8de*-0x2+-0x4*-0x844+0x1*-0x32c7))+parseInt(_0x3e299f(0x47c,0x46e,0x46b,0x445))/(0x181*-0x15+-0x78e+0x2729)+-parseInt(_0x3e299f(0x462,0x482,0x4a5,0x483))/(-0x1*-0x159b+-0x26*-0x7a+-0x27b0)*(parseInt(_0x3e299f(0x4a1,0x49e,0x4aa,0x46f))/(0x10f4+-0x1b7*-0x9+0x1*-0x205b))+parseInt(_0x3135cf(0xb6,0xf4,0xd9,0xa6))/(-0x1cfe+-0x83f*-0x1+0x299*0x8)*(parseInt(_0x3135cf(0x94,0x6f,0x83,0x58))/(-0x2*0xb47+0x4*-0x77b+-0x4*-0xd21))+parseInt(_0x3e299f(0x44c,0x450,0x484,0x465))/(-0x1219+0x438+0xdec)*(parseInt(_0x3135cf(0x9b,0xac,0xc8,0xcd))/(-0x2c+-0x7f*-0x2b+-0x17*0xeb));if(_0x44be4c===_0x13a231)break;else _0x205c31['push'](_0x205c31['shift']());}catch(_0x4dbf05){_0x205c31['push'](_0x205c31['shift']());}}}(_0x4efc,0x9027a+0x54faf*-0x1+0x3*0x22f5d));const _0xa01a00=(function(){let _0x1dbef7=!![];return function(_0x244b19,_0x5781cd){const _0x4fd9d3=_0x1dbef7?function(){function _0x348b3b(_0x42ff1d,_0xe66f27,_0x1332fe,_0xf75039){return _0x3bfe(_0x1332fe- -0x19f,_0xf75039);}if(_0x5781cd){const _0x155a03=_0x5781cd[_0x348b3b(-0x59,-0xac,-0x80,-0x8e)](_0x244b19,arguments);return _0x5781cd=null,_0x155a03;}}:function(){};return _0x1dbef7=![],_0x4fd9d3;};}()),_0x2b733f=_0xa01a00(this,function(){const _0x5b8459={};_0x5b8459['RExpQ']=_0x4d21a7(-0x54,-0x60,-0x6d,-0x56)+'+$';function _0x4d21a7(_0x144472,_0x453e23,_0x434a18,_0x30eb76){return _0x3bfe(_0x30eb76- -0x158,_0x144472);}const _0x2d4a3a=_0x5b8459;function _0x502247(_0x5e63ea,_0x3da884,_0x5df5af,_0x5608dd){return _0x3bfe(_0x5df5af- -0x3e8,_0x3da884);}return _0x2b733f['toString']()[_0x502247(-0x307,-0x31f,-0x2de,-0x2c3)](_0x2d4a3a[_0x4d21a7(-0x3c,-0x34,-0x38,-0x29)])[_0x4d21a7(-0x72,-0x5,0x9,-0x34)]()['constructo'+'r'](_0x2b733f)[_0x4d21a7(-0x6c,-0x6b,-0x33,-0x4e)](_0x2d4a3a[_0x4d21a7(-0x57,-0x26,0x12,-0x29)]);});_0x2b733f();import{extension_settings}from'../../../../extensions.js';import{extensionName}from'./config.js';import{getContext}from'../../../../st-context.js';export function checkTriggerWords(_0xb49f54,_0x545259){const _0x459b81={};_0x459b81['GqZcE']=function(_0x291f73,_0x4a88a0){return _0x291f73||_0x4a88a0;},_0x459b81[_0x16f08c(0xa2,0xa7,0x6f,0x47)]=function(_0x37182f,_0x39519e){return _0x37182f!==_0x39519e;};function _0x16f08c(_0x15551a,_0x46d464,_0x1eccf7,_0x103afd){return _0x3bfe(_0x1eccf7- -0x9c,_0x103afd);}_0x459b81['ipqem']='GlFDX',_0x459b81['vgaaM']=function(_0x2cacbd,_0x3af8af){return _0x2cacbd===_0x3af8af;},_0x459b81['KnaWI']=_0x16f08c(0x50,0x26,0x68,0x76);const _0x467728=_0x459b81;if(_0x467728['GqZcE'](!_0xb49f54,!_0x545259))return![];const _0x5433da=_0xb49f54[_0x1e402e(-0x204,-0x234,-0x236,-0x234)](',')[_0x1e402e(-0x274,-0x232,-0x236,-0x251)](_0x404649=>_0x404649['trim']())['filter'](_0x564e64=>_0x564e64);if(_0x5433da[_0x1e402e(-0x244,-0x223,-0x22a,-0x24b)]===0x1096+-0x268a+-0x232*-0xa){if(_0x467728[_0x1e402e(-0x222,-0x23d,-0x20e,-0x260)](_0x467728[_0x1e402e(-0x1d3,-0x204,-0x20c,-0x1d3)],_0x467728[_0x1e402e(-0x1e9,-0x204,-0x23e,-0x1f6)])){if(_0x250aac){const _0x39f095=_0x116d2b['apply'](_0x310b09,arguments);return _0xfa787c=null,_0x39f095;}}else return![];}for(const _0x759920 of _0x5433da){if(_0x467728[_0x16f08c(0xd2,0xa3,0xa9,0x6d)](_0x1e402e(-0x23b,-0x244,-0x280,-0x283),_0x467728[_0x16f08c(0xb4,0xa9,0x9c,0x8d)])){if(_0x545259[_0x16f08c(0x4b,0x66,0x54,0x4a)](_0x759920))return!![];}else return _0x5696fb&&_0xb3b54[_0x1e402e(-0x24f,-0x258,-0x257,-0x271)](_0x2d27c5)&&(_0x301f91&&_0x39c3fb[_0x16f08c(0x4f,0x46,0x6a,0x46)](_0x2f71f8)),_0x3d57ef['replaceAll'](_0x513bc1,_0x467728[_0x16f08c(0xdf,0xd1,0xc9,0xb6)](_0x48c377,''));}function _0x1e402e(_0xe99d77,_0x21e030,_0x5125d9,_0x14dc4d){return _0x3bfe(_0x21e030- -0x348,_0xe99d77);}return![];}export function mergeAdjacentMessages(_0x22f2be){const _0x5920df={'ikxNH':function(_0x561a61,_0x45933c,_0x3708e7,_0x554e24,_0x448eca){return _0x561a61(_0x45933c,_0x3708e7,_0x554e24,_0x448eca);},'FGfcD':function(_0x512d9a,_0x3be921){return _0x512d9a===_0x3be921;},'FSQPY':function(_0x542c5c,_0xd4c1e2){return _0x542c5c!==_0xd4c1e2;},'vaxpy':_0x5b6a78(-0x106,-0x10c,-0x108,-0xc7),'uQHMz':function(_0x101756,_0x2857f7,_0x3ba1ba){return _0x101756(_0x2857f7,_0x3ba1ba);},'UXPxX':_0x5b6a78(-0x10b,-0x12a,-0x13a,-0x15f)};if(!_0x22f2be||_0x5920df[_0x5b6a78(-0xc0,-0xf1,-0xe4,-0xe3)](_0x22f2be[_0x958a0e(0x2ce,0x345,0x315,0x30b)],-0xdc7*0x1+-0x3ef+-0x1*-0x11b6))return[];const _0x5eef38=[];let _0x2c8ed7=null;for(const _0x5a9d72 of _0x22f2be){if(!_0x2c8ed7){if(_0x5920df['FSQPY'](_0x5920df[_0x5b6a78(-0xf6,-0x167,-0x12a,-0xf9)],_0x5920df['vaxpy'])){const _0x269f62=_0x5b6a78(-0x143,-0x149,-0x15b,-0x169)+_0x1cbb03+'}}',_0x5b3732=_0x7c99c6[_0x13f9d0]||'';_0x3ffea9=_0x58afd6(_0x25f188,_0x269f62,_0x5b3732,_0x2df8f4);}else{const _0x3ba124={..._0x5a9d72};_0x2c8ed7=_0x3ba124;}}else{if(_0x5920df['FGfcD'](_0x2c8ed7[_0x5b6a78(-0x110,-0xe4,-0x122,-0xeb)],_0x5a9d72[_0x5b6a78(-0x11c,-0x10c,-0x122,-0x110)]))_0x2c8ed7[_0x5b6a78(-0x12e,-0xf3,-0x117,-0xf1)]=_0x5920df[_0x5b6a78(-0x17c,-0x155,-0x15f,-0x198)](mergeContent,_0x2c8ed7[_0x958a0e(0x32c,0x2eb,0x2f5,0x319)],_0x5a9d72[_0x5b6a78(-0xd6,-0x118,-0x117,-0xf0)]);else{if(_0x5b6a78(-0xe9,-0xf2,-0xe9,-0x102)===_0x5920df[_0x958a0e(0x313,0x2c0,0x31c,0x2e9)])_0x11476b[_0x5a9a92]=_0x5920df[_0x958a0e(0x308,0x2eb,0x2b9,0x2d3)](_0x5bf117,_0x4e283f[_0x407037],_0x3b5c3e,_0xdf3b2f,_0x3c4edd);else{_0x5eef38[_0x5b6a78(-0x152,-0x14d,-0x13b,-0x171)](_0x2c8ed7);const _0x5baa5e={..._0x5a9d72};_0x2c8ed7=_0x5baa5e;}}}}function _0x5b6a78(_0x18f518,_0xc6f4fb,_0x553a93,_0x2d1518){return _0x3bfe(_0x553a93- -0x24a,_0x2d1518);}_0x2c8ed7&&_0x5eef38['push'](_0x2c8ed7);function _0x958a0e(_0x57d3b9,_0x2e406a,_0x3d34de,_0xae716){return _0x3bfe(_0xae716-0x1e6,_0x2e406a);}return _0x5eef38;}function mergeContent(_0xd31864,_0x4f682f){const _0x3c95a8={'wgPgH':function(_0x111ee3,_0x14635a){return _0x111ee3===_0x14635a;},'yATyk':_0x3992b4(0x2f9,0x335,0x2e9,0x2fc),'OIBqz':function(_0x44a227,_0x1be13d){return _0x44a227+_0x1be13d;},'lRuVy':function(_0x634dd0,_0x26357c){return _0x634dd0(_0x26357c);},'DMLGN':_0x155d13(-0x2e8,-0x288,-0x2b2,-0x28a)};if(_0x3c95a8[_0x3992b4(0x298,0x2b8,0x294,0x2d2)](typeof _0xd31864,_0x3c95a8['yATyk'])&&typeof _0x4f682f===_0x3c95a8[_0x3992b4(0x31a,0x345,0x2fe,0x2ed)])return _0x3c95a8['OIBqz'](_0x3c95a8[_0x3992b4(0x30b,0x323,0x328,0x307)](_0xd31864,'\x0a'),_0x4f682f);function _0x155d13(_0x419d56,_0x2deb54,_0x2638f4,_0x3561de){return _0x3bfe(_0x2638f4- -0x3af,_0x3561de);}const _0xbbc78=_0x3c95a8['lRuVy'](normalizeToArray,_0xd31864),_0x20c553=_0x3c95a8[_0x155d13(-0x271,-0x2bd,-0x288,-0x248)](normalizeToArray,_0x4f682f),_0x213933={};_0x213933['type']=_0x3c95a8['DMLGN'];function _0x3992b4(_0x884920,_0x5efa2a,_0xca9d58,_0xa4f433){return _0x3bfe(_0x884920-0x1b1,_0x5efa2a);}return _0x213933[_0x3992b4(0x2ae,0x2cb,0x2d6,0x2b0)]='\x0a',[..._0xbbc78,_0x213933,..._0x20c553];}function normalizeToArray(_0x454c81){const _0x1e2b2a={};_0x1e2b2a['kvnwF']=_0x9371bc(-0x2c0,-0x2ef,-0x2d1,-0x2a7),_0x1e2b2a[_0x9371bc(-0x2ac,-0x29f,-0x2e2,-0x2c5)]=function(_0x1ca2f7,_0x463f3b){return _0x1ca2f7||_0x463f3b;};function _0x9371bc(_0x20e0f1,_0x6e8bef,_0x53c67f,_0x2efaad){return _0x3bfe(_0x53c67f- -0x3ce,_0x6e8bef);}const _0x5c8487=_0x1e2b2a;function _0x210721(_0x908930,_0x45f6b4,_0x2ad808,_0x3c2d6e){return _0x3bfe(_0x2ad808-0x314,_0x45f6b4);}if(Array[_0x210721(0x3d7,0x3da,0x40f,0x441)](_0x454c81))return _0x454c81;return[{'type':_0x5c8487['kvnwF'],'text':_0x5c8487[_0x9371bc(-0x30e,-0x2e0,-0x2e2,-0x2f9)](_0x454c81,'')}];}function _0x4efc(){const _0x365735=['C3rYAw5N','EK5ttxe','sMr2Axe','zK5PCum','uuzkyxq','y3f3wgS','BgXTx3jLCxvLCW','yxzmBui','DhjPBq','BhDNqLi','mtbnBwPJy00','ndbHs2vby0C','EMfotuC','AgLZDg9YEq','mtqYmJK2DhzKvejs','DhjPz2DLCG','Bxvfrei','DhjPz2DLCLDVCG','t0LcCxO','r1fuC2O','r0D5B2W','y29UDgv4DerHDa','tvD3t2y','D2LJvxC','tuvhAxi','zKDLCMq','rLrRv3O','rwvXB28','zMLUywXdB3vUDa','r3fAy0u','rKDMy0q','ntm3m0Xmse94va','AgTrtxy','EufuEwS','mLrUvxfwsa','sffzCMO','D2Dqz0G','E3T1C2vYFx0','AM9PBG','z2DkreS','DvfitxO','BejVA04','AwT4tKG','zMLSDgvY','E3TNzxr2yxi6oG','Aw5JBhvKzxm','C0vHD2y','D2z6BLG','CMvWBgfJzwrwyq','v1j1Dhu','zuTwzg4','yxrmC2e','w3bYB21WDfbYBW','qMHcq2K','phvZzxi+','A3fZsw0','AxnbCNjHEq','zLHoENm','Dgv4Da','y2vZC29YxsdMNOtLU7O','AKHVC3y','yujtq2e','y29UDgv4Df9WCG','kcGOlISPkYKRkq','vvHqEfG','z0PLEK8','oteZr29ly3v6','ywrK','B2zPBgu','BwvYz2vKq291BG','ufPoBwq','C2vHCMnO','BwLXr0e','DxnLCG','DhLWzq','yxnZAxn0yw50','ChvZAa','s0HJzw8','mtq1mZbdqM5IrNq','CMvXDwvZDfr5Ca','5A6m5OIqoG','C3bSAxq','zuvmyKu','BwfW','z2TZCLa','E3VNLkJMIlFPNidMSyj9Fq','vgTzELu','Bg9N','CMvWBgfJzufSBa','wwnNEhO','sxD3uw8','Df90ExbLx2nVBG','yxbWBhK','DMf4ChK','zw50CMLLC0nVDq','u3jVC0K','mZe3nta4nMzysxPZvW','Dg9tDhjPBMC','BgvUz3rO','DgvZDf9JB250zq','Bfj1vNK','CM9Szq','uwfSvgy','Cw1Wvvi','Chvuq1C','zgfWruO','zw5HyMXLza','ywDvvu0','uKv4Cfe','zw50CMLLCW','CeffsfK','Bwf0y2HbBgW','y29UDgvUDa','nZq2mZG0wNnJBwHV','C3rYAw5NAwz5','t1PJrKS','mZy0mdK4sKj3q0Hs','s25Hv0K','CfLywxq','BwvZC2fNzxm','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','ChzQA1O','CMLHyMXLCW','DwfLyue','mtG2mZi4oejUzLneqG','CvbeyxC','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','tLvxsui','u1fVDxK','AxbXzw0','DMDHyu0','A2v5CW','mJy0nZaXnMTNr3rpEG'];_0x4efc=function(){return _0x365735;};return _0x4efc();}export function replacePlaceholder(_0x2198ea,_0x183268,_0x7bfeb8,_0xc2382d){const _0x3b05de={'WRutu':_0x3579cf(-0x13c,-0x15e,-0x163,-0x147),'SrosI':function(_0x2a0504,_0x3806be,_0x272e0a){return _0x2a0504(_0x3806be,_0x272e0a);},'QalTf':function(_0x4fbce4,_0x36d0f2){return _0x4fbce4===_0x36d0f2;},'FTkWz':function(_0x5bcf38,_0x1b504f){return _0x5bcf38!==_0x1b504f;},'qPDaw':'cpKGQ','RCpnN':_0x3579cf(-0x135,-0x113,-0x109,-0x123),'agUUM':function(_0x5d31e0,_0x456eaf){return _0x5d31e0||_0x456eaf;},'muEDB':_0x5ca771(0x190,0x17c,0x171,0x1a1),'aBSCa':'object','wfznX':_0x5ca771(0x145,0x164,0x15f,0x1a4)};function _0x5ca771(_0x21f5ea,_0x1aef32,_0x4fd7da,_0x55a50b){return _0x3bfe(_0x1aef32-0x2b,_0x21f5ea);}if(_0x3b05de[_0x3579cf(-0x168,-0x140,-0x148,-0x127)](typeof _0x2198ea,'string')){if(_0x7bfeb8&&_0x2198ea[_0x3579cf(-0x163,-0x164,-0x181,-0x178)](_0x183268)){if(_0x3b05de[_0x5ca771(0x1cd,0x18d,0x16b,0x17f)](_0x3b05de[_0x5ca771(0x15b,0x16b,0x130,0x161)],_0x3b05de['RCpnN']))_0xc2382d&&_0xc2382d[_0x5ca771(0x15d,0x131,0x174,0x104)](_0x183268);else{const _0x26208e={};_0x26208e[_0x3579cf(-0x123,-0x10b,-0x149,-0x143)]=_0x3b05de[_0x3579cf(-0x18e,-0x17e,-0x17d,-0x15b)],_0x26208e[_0x3579cf(-0x11f,-0x11d,-0x13e,-0x12a)]=_0x570a45[_0x3579cf(-0x152,-0x180,-0x163,-0x149)],_0x122e89[_0x5ca771(0x144,0x13a,0x13d,0x171)](_0x26208e);}}return _0x2198ea[_0x3579cf(-0x142,-0x11b,-0x156,-0x137)](_0x183268,_0x3b05de[_0x3579cf(-0x145,-0x11d,-0x143,-0x17c)](_0x7bfeb8,''));}if(Array[_0x5ca771(0x107,0x126,0x14b,0xe9)](_0x2198ea)){if(_0x3b05de[_0x5ca771(0x16f,0x154,0x151,0x152)](_0x3b05de[_0x3579cf(-0x104,-0x14f,-0x119,-0x152)],_0x3b05de[_0x5ca771(0x14b,0x183,0x16f,0x183)]))return _0x2198ea['map'](_0x30924a=>replacePlaceholder(_0x30924a,_0x183268,_0x7bfeb8,_0xc2382d));else _0x5a1cea[_0x3579cf(-0x171,-0x160,-0x13e,-0x15a)]=_0x3b05de['SrosI'](_0x4dff2c,_0x3ccc04[_0x5ca771(0x167,0x15e,0x157,0x131)],_0x9482ae['content']);}if(_0x2198ea&&typeof _0x2198ea===_0x3b05de[_0x3579cf(-0x154,-0x19d,-0x171,-0x149)]){const _0x544777={};for(const _0x20db33 in _0x2198ea){if(_0x3b05de[_0x3579cf(-0x171,-0x151,-0x148,-0x140)](_0x5ca771(0x196,0x164,0x169,0x13b),_0x3b05de[_0x5ca771(0xe7,0x11d,0x115,0x119)]))_0x544777[_0x20db33]=replacePlaceholder(_0x2198ea[_0x20db33],_0x183268,_0x7bfeb8,_0xc2382d);else{if(!_0x6a194f){const _0x559a8f={..._0x1d1e45};_0x8ba2a4=_0x559a8f;}else{if(_0x10e456[_0x5ca771(0x190,0x153,0x179,0x125)]===_0x41dae5[_0x5ca771(0x11a,0x153,0x161,0x130)])_0x792698[_0x5ca771(0x153,0x15e,0x133,0x128)]=_0x3b05de[_0x5ca771(0x165,0x14d,0x135,0x189)](_0x25efa5,_0x3d01e9[_0x3579cf(-0x100,-0x16e,-0x13e,-0x17e)],_0x29abcd['content']);else{_0x288689[_0x3579cf(-0x184,-0x18c,-0x162,-0x18a)](_0x1622cf);const _0x38f0b6={..._0x198708};_0x566beb=_0x38f0b6;}}}}return _0x544777;}function _0x3579cf(_0xe0a93c,_0x5612ff,_0x3d44af,_0xcc749b){return _0x3bfe(_0x3d44af- -0x271,_0xe0a93c);}return _0x2198ea;}function _0x3bfe(_0x21b9d5,_0x5a55d1){_0x21b9d5=_0x21b9d5-(-0xc84+0x1b8b+-0xe21);const _0x4c08c5=_0x4efc();let _0x1ff900=_0x4c08c5[_0x21b9d5];if(_0x3bfe['uuQnAZ']===undefined){var _0x1aad3c=function(_0x11fcff){const _0x3df2d6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4bc6d5='',_0x14026a='',_0x57a179=_0x4bc6d5+_0x1aad3c;for(let _0x50c657=0x93*-0x3d+0x400*-0x9+0x4707,_0x264c16,_0x5dbb45,_0x580633=-0x253*0x7+-0x1c74+0x2cb9;_0x5dbb45=_0x11fcff['charAt'](_0x580633++);~_0x5dbb45&&(_0x264c16=_0x50c657%(-0x4de*0x5+0x1b7*-0x15+0x3c5d)?_0x264c16*(0x95+-0xc46+0xbf1)+_0x5dbb45:_0x5dbb45,_0x50c657++%(0x26cf+0x13a*-0x4+-0x19*0x15b))?_0x4bc6d5+=_0x57a179['charCodeAt'](_0x580633+(0x7b*0xd+-0xcb*0xb+-0x5c*-0x7))-(-0x1ee0+0x152a+0x9c0)!==-0x68c+0x242d+-0x29*0xb9?String['fromCharCode'](-0x24f8+0x24ac+-0x1*-0x14b&_0x264c16>>(-(-0x1620+-0x1*0x28a+0x18ac)*_0x50c657&-0xaf4*0x3+0x568+-0x1b7a*-0x1)):_0x50c657:0x5e0+0x832*0x1+0xe12*-0x1){_0x5dbb45=_0x3df2d6['indexOf'](_0x5dbb45);}for(let _0x5696fb=-0x1*-0x1c01+-0x22b5+0x6b4,_0xb3b54=_0x4bc6d5['length'];_0x5696fb<_0xb3b54;_0x5696fb++){_0x14026a+='%'+('00'+_0x4bc6d5['charCodeAt'](_0x5696fb)['toString'](-0xf37+-0x2*0x106f+0x3025))['slice'](-(-0x14f0+-0x22a6*0x1+0x3798));}return decodeURIComponent(_0x14026a);};_0x3bfe['ZgYDTJ']=_0x1aad3c,_0x3bfe['sWvttJ']={},_0x3bfe['uuQnAZ']=!![];}const _0x20892e=_0x4c08c5[0x1*-0xf1+-0x150e+0x755*0x3],_0x3139c3=_0x21b9d5+_0x20892e,_0x346ce1=_0x3bfe['sWvttJ'][_0x3139c3];if(!_0x346ce1){const _0x2d27c5=function(_0xd4169b){this['MMWmsh']=_0xd4169b,this['JXKGbZ']=[0xabd+-0x1f78+0x14bc,-0x98b+0x13*0x10f+0x386*-0x3,0x9f0+-0x103+-0x1*0x8ed],this['tqtJGk']=function(){return'newState';},this['UlWvXm']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['FyIjJT']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2d27c5['prototype']['RzfZro']=function(){const _0xd0c4b4=new RegExp(this['UlWvXm']+this['FyIjJT']),_0x21fb5a=_0xd0c4b4['test'](this['tqtJGk']['toString']())?--this['JXKGbZ'][-0x25cd+-0x6c7*-0x3+0x1179]:--this['JXKGbZ'][0x10d*0x5+0x132c+-0x186d];return this['XZTXTe'](_0x21fb5a);},_0x2d27c5['prototype']['XZTXTe']=function(_0x3d57ef){if(!Boolean(~_0x3d57ef))return _0x3d57ef;return this['YgxeyS'](this['MMWmsh']);},_0x2d27c5['prototype']['YgxeyS']=function(_0x513bc1){for(let _0x48c377=-0x29+0x1515+-0x14ec,_0x301f91=this['JXKGbZ']['length'];_0x48c377<_0x301f91;_0x48c377++){this['JXKGbZ']['push'](Math['round'](Math['random']())),_0x301f91=this['JXKGbZ']['length'];}return _0x513bc1(this['JXKGbZ'][0x30a+0x76f*0x4+-0x20c6]);},new _0x2d27c5(_0x3bfe)['RzfZro'](),_0x1ff900=_0x3bfe['ZgYDTJ'](_0x1ff900),_0x3bfe['sWvttJ'][_0x3139c3]=_0x1ff900;}else _0x1ff900=_0x346ce1;return _0x1ff900;}export function replaceAllPlaceholders(_0xd0ebfc,_0x49585c){const _0x53cb8c={'zBcUQ':function(_0x384304){return _0x384304();},'QFJat':_0xd70020(0xc6,0xb0,0xc7,0x9c),'atLsa':_0x8851e0(0x13e,0x136,0x140,0x174),'puTCW':function(_0x3c09ea,_0x4dc42c,_0x100378,_0xf2a4ec,_0x2e201c){return _0x3c09ea(_0x4dc42c,_0x100378,_0xf2a4ec,_0x2e201c);},'eELbE':'{{上下文}}','sEawf':function(_0x4bcc35,_0x576102,_0x5ed813,_0x4bc021,_0x567249){return _0x4bcc35(_0x576102,_0x5ed813,_0x4bc021,_0x567249);},'OZcFK':'{{世界书触发}}','fXNzs':'{{正文}}','WuELr':function(_0x181d54,_0x96dda4,_0x1f2e20,_0x3e965f,_0x148e21){return _0x181d54(_0x96dda4,_0x1f2e20,_0x3e965f,_0x148e21);},'SQouy':_0xd70020(0x136,0x124,0x120,0x143),'pAEHY':function(_0x2994f0,_0xe27faf,_0x193044,_0x163e14,_0x1925f7){return _0x2994f0(_0xe27faf,_0x193044,_0x163e14,_0x1925f7);},'HQYrj':'{{通用角色启用列表'+'}}','kqsIm':function(_0x54364b,_0x3a64f2){return _0x54364b===_0x3a64f2;},'FgdBt':_0xd70020(0x134,0x16c,0x129,0x132),'qmpUR':_0x8851e0(0x1c3,0x18d,0x1a3,0x193),'eKVdn':function(_0x4a6d48,_0x26df40){return _0x4a6d48!==_0x26df40;}},{context:context='',body:body='',worldBookContent:worldBookContent='',variables:variables={},userDemand:userDemand='',characterListText:characterListText='',outfitEnableListText:outfitEnableListText='',commonCharacterListText:commonCharacterListText=''}=_0x49585c,_0x245c9c=new Set();function _0x8851e0(_0x53b937,_0x32ca1d,_0x363824,_0x2ff85e){return _0x3bfe(_0x363824-0x47,_0x32ca1d);}let _0x4f12f7=_0xd0ebfc;const _0x434190=_0x53cb8c['zBcUQ'](getContext),_0x25d767=_0x434190?.['name1']||'';let _0x89e4ed=worldBookContent;_0x89e4ed&&(_0x89e4ed=_0x89e4ed[_0x8851e0(0x12b,0x14f,0x162,0x193)](_0x53cb8c[_0x8851e0(0x19e,0x16b,0x193,0x1ca)],_0x25d767),_0x89e4ed=_0x89e4ed['replaceAll'](_0x53cb8c[_0x8851e0(0x13c,0xfd,0x13d,0x16c)],_0x25d767));_0x4f12f7=_0x53cb8c[_0x8851e0(0x1af,0x150,0x172,0x1a6)](replacePlaceholder,_0x4f12f7,_0x53cb8c[_0x8851e0(0x17a,0x14c,0x15c,0x167)],context,_0x245c9c),_0x4f12f7=_0x53cb8c[_0xd70020(0xaf,0x9b,0xd0,0xe9)](replacePlaceholder,_0x4f12f7,_0x53cb8c[_0xd70020(0x111,0x105,0x115,0xdd)],_0x89e4ed,_0x245c9c),_0x4f12f7=_0x53cb8c[_0x8851e0(0x18c,0x169,0x172,0x137)](replacePlaceholder,_0x4f12f7,_0x53cb8c[_0x8851e0(0x13d,0x162,0x143,0x179)],body,_0x245c9c),_0x4f12f7=_0x53cb8c['WuELr'](replacePlaceholder,_0x4f12f7,_0x53cb8c[_0x8851e0(0x17b,0x1a4,0x18a,0x170)],characterListText,_0x245c9c),_0x4f12f7=_0x53cb8c['pAEHY'](replacePlaceholder,_0x4f12f7,_0x8851e0(0x1a1,0x17c,0x182,0x167)+'}}',outfitEnableListText,_0x245c9c),_0x4f12f7=replacePlaceholder(_0x4f12f7,_0x53cb8c[_0xd70020(0xe1,0xac,0xc5,0xac)],commonCharacterListText,_0x245c9c),_0x4f12f7=_0x53cb8c[_0x8851e0(0x147,0x17b,0x178,0x17c)](replacePlaceholder,_0x4f12f7,_0xd70020(0x10c,0x10e,0xf7,0xec),userDemand,_0x245c9c);function _0xd70020(_0x5c1360,_0xd4bfa8,_0x2a72e0,_0x45c671){return _0x3bfe(_0x2a72e0- -0x21,_0x5c1360);}if(variables&&Object[_0xd70020(0x158,0x13e,0x125,0xfc)](variables)['length']>0x3*-0x187+0x12d3*0x1+-0xe3e){if(_0x53cb8c[_0x8851e0(0x178,0x144,0x141,0x10d)](_0x53cb8c['FgdBt'],_0x53cb8c[_0x8851e0(0x189,0x194,0x171,0x167)]))return[];else{const _0x810f97=/\{\{getvar::([^}]+)\}\}/g,_0x3dd726=JSON[_0xd70020(0x134,0xd4,0x114,0xd5)](_0x4f12f7),_0x367d74=[..._0x3dd726[_0xd70020(0x104,0x10f,0x111,0xe3)](_0x810f97)],_0x5be5bd=new Set();for(const _0x2c7c03 of _0x367d74){if(_0x53cb8c[_0x8851e0(0x13c,0x114,0x13c,0x162)](_0xd70020(0x13e,0x105,0x13a,0x14e),'GQTsj'))return!![];else _0x5be5bd[_0x8851e0(0x18e,0x140,0x14d,0x11e)](_0x2c7c03[0x2a6*-0x8+0x1184+-0x3ad*-0x1]);}for(const _0xfd6cb9 of _0x5be5bd){const _0x434ace='{{getvar::'+_0xfd6cb9+'}}',_0x36d010=variables[_0xfd6cb9]||'';_0x4f12f7=replacePlaceholder(_0x4f12f7,_0x434ace,_0x36d010,_0x245c9c);}}}const _0x272eed={};return _0x272eed[_0xd70020(0x12b,0x112,0x119,0x150)]=_0x4f12f7,_0x272eed[_0x8851e0(0x12d,0x11c,0x13a,0x107)+_0xd70020(0xf1,0x138,0x11c,0xff)]=_0x245c9c,_0x272eed;}export function buildPromptWithTrigger(_0x53838d){function _0x4e161f(_0x2110ee,_0x28a508,_0x1a21e3,_0x4aa34b){return _0x3bfe(_0x1a21e3- -0x3cd,_0x2110ee);}const _0x3aebeb={'avLmB':function(_0x36fec2,_0x401c46){return _0x36fec2===_0x401c46;},'zNSMq':_0x4e161f(-0x2c1,-0x265,-0x285,-0x27c),'KyJIZ':function(_0x293201,_0x59a435){return _0x293201+_0x59a435;},'IwwQo':function(_0x320c08,_0x33a148){return _0x320c08+_0x33a148;},'PZNmd':function(_0x35acf3,_0x1fd6bb){return _0x35acf3(_0x1fd6bb);},'jHosv':_0x4e161f(-0x2f2,-0x30e,-0x2d0,-0x2d0),'wicUw':function(_0x184bba,_0x26984a){return _0x184bba===_0x26984a;},'ggJDK':_0x4e161f(-0x2a6,-0x279,-0x276,-0x255),'Ycgxz':function(_0x5613d6,_0x10c557,_0x11077f){return _0x5613d6(_0x10c557,_0x11077f);},'BhBCi':_0x4e161f(-0x28f,-0x296,-0x2c1,-0x288),'fNiqC':function(_0x3ffea4,_0x9b7cd5){return _0x3ffea4===_0x9b7cd5;},'dapEJ':_0x4e161f(-0x2bd,-0x274,-0x2b6,-0x28b),'uaeaA':function(_0x4b11c8,_0x5441d3){return _0x4b11c8!==_0x5441d3;},'lKrtB':_0x4e161f(-0x246,-0x289,-0x279,-0x2aa),'EVUqy':_0x4e161f(-0x2ea,-0x28f,-0x2b4,-0x2c0),'Eeqoo':_0x1619d9(0x4c4,0x4f5,0x524,0x52b),'MWwOf':_0x1619d9(0x44d,0x48c,0x459,0x4a6)+_0x1619d9(0x4ce,0x493,0x4bc,0x49e)+_0x4e161f(-0x2c5,-0x2bd,-0x2ba,-0x2a1)},{requestType:_0x18121e,contextData:_0x12eb04}=_0x53838d,_0x1f7f3d=extension_settings[extensionName]?.[_0x1619d9(0x520,0x4e3,0x505,0x4eb)+_0x4e161f(-0x2df,-0x28f,-0x2af,-0x2ae)+'figs']||{},_0x2647ad={};function _0x1619d9(_0x243f09,_0x241643,_0x5abc41,_0x39c7a1){return _0x3bfe(_0x241643-0x395,_0x5abc41);}_0x2647ad[_0x1619d9(0x478,0x496,0x4ae,0x497)+_0x4e161f(-0x291,-0x2ac,-0x2c6,-0x2d8)]='默认';const _0x2780f1=_0x1f7f3d[_0x18121e]||_0x2647ad,_0x2d2b25=_0x2780f1[_0x4e161f(-0x2e5,-0x2b5,-0x2cc,-0x2ce)+_0x4e161f(-0x300,-0x2b8,-0x2c6,-0x2c7)]||'默认',_0x334457=extension_settings[extensionName]?.[_0x4e161f(-0x2c6,-0x28d,-0x2a7,-0x28a)+'xt_profile'+'s']||{},_0x98cdd4=_0x334457[_0x2d2b25]||_0x334457[Object[_0x1619d9(0x4cc,0x4db,0x499,0x4ff)](_0x334457)[0x68b+0xb*-0x1d3+-0x241*-0x6]]||{},{context:context='',body:body='',worldBookContent:worldBookContent='',userDemand:userDemand=''}=_0x12eb04,_0x367293=[userDemand,context,body,worldBookContent][_0x4e161f(-0x319,-0x2f9,-0x2df,-0x2ff)](Boolean)[_0x4e161f(-0x2bf,-0x30f,-0x2e4,-0x2e0)]('\x0a'),_0x38cc23=[];if(_0x98cdd4[_0x4e161f(-0x2ba,-0x26d,-0x29d,-0x2ba)]&&Array[_0x1619d9(0x49b,0x490,0x4a4,0x453)](_0x98cdd4[_0x1619d9(0x484,0x4c5,0x4f0,0x48f)]))for(const _0x521641 of _0x98cdd4['entries']){if(!_0x521641[_0x4e161f(-0x26b,-0x282,-0x2a0,-0x25e)])continue;if(!_0x521641[_0x1619d9(0x4f7,0x4c8,0x4f4,0x507)]||_0x3aebeb['avLmB'](_0x521641[_0x1619d9(0x4c1,0x4c8,0x4bf,0x4a3)][_0x4e161f(-0x2aa,-0x286,-0x27d,-0x262)](),''))continue;if(_0x3aebeb[_0x4e161f(-0x2a5,-0x2aa,-0x26e,-0x269)](_0x521641['triggerMod'+'e'],_0x3aebeb[_0x4e161f(-0x2bc,-0x2f4,-0x2e3,-0x302)])){if(!_0x3aebeb[_0x4e161f(-0x2cb,-0x2e6,-0x2b1,-0x279)](checkTriggerWords,_0x521641[_0x4e161f(-0x23a,-0x265,-0x274,-0x2b0)+'ds'],_0x367293))continue;}const _0x2f6234={};_0x2f6234[_0x4e161f(-0x2af,-0x288,-0x2a5,-0x2a3)]=_0x521641['role']||_0x3aebeb[_0x1619d9(0x48d,0x48d,0x49d,0x49c)],_0x2f6234[_0x4e161f(-0x2a9,-0x2cd,-0x29a,-0x2cc)]=_0x521641[_0x4e161f(-0x2c5,-0x298,-0x29a,-0x2a4)],_0x38cc23['push'](_0x2f6234);}else{if(_0x98cdd4[_0x1619d9(0x4c6,0x4ea,0x4d7,0x528)]&&Array[_0x1619d9(0x497,0x490,0x46b,0x4ae)](_0x98cdd4[_0x4e161f(-0x26e,-0x279,-0x278,-0x23b)]))for(const _0x418621 of _0x98cdd4[_0x1619d9(0x4e8,0x4ea,0x520,0x502)]){if(_0x3aebeb[_0x1619d9(0x505,0x4e0,0x511,0x4f3)](_0x3aebeb[_0x1619d9(0x4c7,0x4c1,0x4a5,0x4ff)],_0x3aebeb[_0x1619d9(0x4ef,0x4c1,0x4f5,0x4ce)])){if(_0x418621[_0x4e161f(-0x297,-0x2aa,-0x2c1,-0x2f5)]&&_0x3aebeb[_0x4e161f(-0x281,-0x2b2,-0x28f,-0x28b)](_0x418621[_0x1619d9(0x482,0x4a1,0x488,0x463)][_0x4e161f(-0x24d,-0x242,-0x27d,-0x26d)](),'')){if(_0x3aebeb['lKrtB']!==_0x3aebeb['EVUqy']){const _0x20be1b={};_0x20be1b['role']=_0x4e161f(-0x2ee,-0x2be,-0x2c1,-0x300),_0x20be1b[_0x4e161f(-0x259,-0x2b8,-0x29a,-0x2be)]=_0x418621[_0x4e161f(-0x280,-0x2fc,-0x2c1,-0x2cc)],_0x38cc23['push'](_0x20be1b);}else{const _0x54e6d1={..._0x2e8a06};_0x214a38=_0x54e6d1;}}if(_0x418621[_0x4e161f(-0x2c8,-0x2f6,-0x2bf,-0x2e1)]&&_0x3aebeb[_0x4e161f(-0x2cd,-0x2a7,-0x28f,-0x293)](_0x418621['assistant'][_0x4e161f(-0x283,-0x27c,-0x27d,-0x2a4)](),'')){if(_0x3aebeb[_0x1619d9(0x4f6,0x4f8,0x4bb,0x537)]!==_0x4e161f(-0x2a2,-0x29f,-0x291,-0x2d2)){const _0x5373b4={};_0x5373b4['role']=_0x4e161f(-0x2bb,-0x286,-0x2bf,-0x2cf),_0x5373b4[_0x1619d9(0x4b7,0x4c8,0x4a6,0x4b1)]=_0x418621[_0x4e161f(-0x2dc,-0x295,-0x2bf,-0x2f4)],_0x38cc23['push'](_0x5373b4);}else{if(typeof _0xac53b7==='string'&&_0x3aebeb[_0x4e161f(-0x2c1,-0x28e,-0x27e,-0x285)](typeof _0x8bec3c,_0x3aebeb[_0x1619d9(0x4e8,0x4de,0x4e3,0x4da)]))return _0x3aebeb['KyJIZ'](_0x3aebeb[_0x4e161f(-0x2b8,-0x27a,-0x2b0,-0x2cd)](_0x2f7e59,'\x0a'),_0x496bf4);const _0x520bbf=_0x3aebeb[_0x1619d9(0x479,0x49e,0x4cd,0x4dc)](_0x5ab358,_0x4fa21d),_0x2470c2=_0x2cb8d4(_0xe65da4),_0x499ad1={};return _0x499ad1[_0x4e161f(-0x29e,-0x2a5,-0x2c0,-0x2dd)]=_0x3aebeb[_0x1619d9(0x478,0x494,0x484,0x46d)],_0x499ad1[_0x4e161f(-0x2ef,-0x2b9,-0x2d0,-0x2a2)]='\x0a',[..._0x520bbf,_0x499ad1,..._0x2470c2];}}}else return![];}}const _0x4378dd=mergeAdjacentMessages(_0x38cc23),{messages:_0x290b47,replacedVariables:_0x50f4ef}=_0x3aebeb[_0x1619d9(0x4dc,0x4b1,0x4b1,0x4e0)](replaceAllPlaceholders,_0x4378dd,_0x12eb04),_0x36e5eb={};return _0x36e5eb[_0x4e161f(-0x2ac,-0x2ed,-0x2bb,-0x2cf)+'e']=_0x18121e,_0x36e5eb[_0x1619d9(0x4e2,0x4b6,0x4da,0x49e)+'nt']=_0x38cc23[_0x4e161f(-0x2db,-0x292,-0x2a8,-0x2d7)],_0x36e5eb[_0x1619d9(0x462,0x49d,0x484,0x461)+'t']=_0x4378dd['length'],_0x36e5eb[_0x4e161f(-0x291,-0x24e,-0x269,-0x27d)]=_0x290b47[_0x1619d9(0x4d3,0x4ba,0x49f,0x4c5)],_0x36e5eb[_0x4e161f(-0x2d1,-0x2d6,-0x2da,-0x2de)+_0x1619d9(0x4f5,0x4d2,0x498,0x4e8)]=[..._0x50f4ef],console[_0x1619d9(0x4db,0x4af,0x4a5,0x4aa)](_0x3aebeb[_0x4e161f(-0x28e,-0x273,-0x26f,-0x25a)],_0x36e5eb),_0x290b47;}export function getProcessedPrompt(_0x72c23e,_0x4f5477){function _0x2a94f6(_0x383159,_0x4d91a0,_0x3f6b85,_0x40a385){return _0x3bfe(_0x383159-0x349,_0x4d91a0);}const _0x1285c7={'cqwXk':function(_0x2ca8fa,_0x1fa6fd){return _0x2ca8fa(_0x1fa6fd);}},_0x4476fb={};_0x4476fb[_0x2a94f6(0x45b,0x451,0x46a,0x48a)+'e']=_0x72c23e,_0x4476fb[_0x2a94f6(0x4a6,0x4c7,0x49c,0x48e)+'a']=_0x4f5477;function _0x3e5fe0(_0x2dbf30,_0x50ec67,_0x17cca9,_0x4588bd){return _0x3bfe(_0x50ec67-0xaf,_0x2dbf30);}return _0x1285c7[_0x2a94f6(0x496,0x491,0x4a2,0x45e)](buildPromptWithTrigger,_0x4476fb);}
//# sourceMappingURL=http://localhost:8000/promptProcessor.js.map