(function(_0x301e3f,_0x4f9241){function _0x1494f2(_0x203182,_0x4824c2,_0x291c7b,_0x33cab3){return _0x37cb(_0x33cab3- -0x37,_0x291c7b);}const _0x28ac4c=_0x301e3f();function _0x5113c5(_0x31dd9a,_0xc4936c,_0xf508b4,_0x287713){return _0x37cb(_0x31dd9a-0x3e7,_0x287713);}while(!![]){try{const _0x32ea58=parseInt(_0x1494f2(0x16c,0x144,0x157,0x150))/(0x1815+-0x3*0x87d+0x47*0x5)+-parseInt(_0x1494f2(0x1e3,0x16f,0x19f,0x1b1))/(-0x2*0xfda+0x1*0x5a5+-0x1a11*-0x1)*(parseInt(_0x5113c5(0x5d0,0x607,0x5c2,0x5bd))/(-0xe*0x188+-0x44*-0x2c+0x9c3))+parseInt(_0x1494f2(0x12e,0xf7,0x14e,0x140))/(-0x87*0x1+0x2*0xa71+-0x1457)*(-parseInt(_0x5113c5(0x5e9,0x5d0,0x5a6,0x5a0))/(0x12b9+0x1574+-0x2828))+-parseInt(_0x5113c5(0x55d,0x521,0x52e,0x583))/(-0x705*-0x1+-0x3*-0x13+-0x738)*(-parseInt(_0x5113c5(0x558,0x50c,0x59a,0x52c))/(0x42*0x15+-0x1959+0x13f6))+parseInt(_0x5113c5(0x5ce,0x5b8,0x617,0x5ec))/(0x13e4+0x35c+-0x1738)+-parseInt(_0x5113c5(0x5bb,0x593,0x5f9,0x5b6))/(0x1b11+-0x1924+-0x16*0x16)*(-parseInt(_0x1494f2(0x151,0x147,0x14a,0x178))/(0x6bc+-0x187a+0x11c8))+parseInt(_0x1494f2(0x1b3,0x11f,0x188,0x164))/(0x913*0x1+-0x7*0x4e3+0x5*0x509)*(-parseInt(_0x5113c5(0x5cb,0x5d6,0x5d7,0x5f3))/(0x610+0x2103+0x67*-0x61));if(_0x32ea58===_0x4f9241)break;else _0x28ac4c['push'](_0x28ac4c['shift']());}catch(_0x6a0da8){_0x28ac4c['push'](_0x28ac4c['shift']());}}}(_0x81ec,-0x89838+0x5*-0x416bb+-0x67*-0x65f2));const _0xafc4e3=(function(){const _0x408977={};function _0x5c60a3(_0xdaee9a,_0x2f3f80,_0x2feceb,_0x348417){return _0x37cb(_0xdaee9a- -0x181,_0x2f3f80);}_0x408977[_0x5c60a3(0x6c,0x4b,0x60,0x95)]=function(_0x346a91,_0x3b520b){return _0x346a91!==_0x3b520b;},_0x408977[_0x11052b(0x23b,0x1f5,0x1b7,0x209)]=_0x11052b(0x283,0x22f,0x205,0x1f0),_0x408977[_0x5c60a3(0x30,0x70,0x35,0x3d)]='nQgDH';const _0x2c3a67=_0x408977;let _0x6e736f=!![];function _0x11052b(_0x1bb287,_0xb26c89,_0x465525,_0x39ddb9){return _0x37cb(_0xb26c89-0x68,_0x39ddb9);}return function(_0x49443d,_0x1ed298){const _0x50f04c=_0x6e736f?function(){function _0x447e7f(_0x431d02,_0xe10285,_0xe5f90,_0x1d2fd3){return _0x37cb(_0x1d2fd3- -0x36d,_0xe10285);}function _0x4ac5ac(_0x44ab42,_0x3fbf10,_0xcc83bd,_0x491396){return _0x37cb(_0x491396- -0x14a,_0x3fbf10);}if(_0x2c3a67[_0x447e7f(-0x130,-0x18b,-0x15f,-0x180)](_0x447e7f(-0x1cc,-0x152,-0x178,-0x18d),_0x2c3a67[_0x447e7f(-0x207,-0x1d2,-0x214,-0x1e0)])){if(_0x1ed298){if(_0x2c3a67[_0x4ac5ac(0x29,0x41,0x4b,0x67)]===_0x2c3a67[_0x447e7f(-0x168,-0x1f1,-0x173,-0x1bc)]){const _0x2ae11e=_0x1ed298[_0x4ac5ac(0x77,0x7d,0x8a,0x39)](_0x49443d,arguments);return _0x1ed298=null,_0x2ae11e;}else{_0x156792[_0x4ac5ac(0xcf,0x77,0x64,0x89)](_0x30634e);const _0x370621={..._0x5bdca7};_0x17eb7f=_0x370621;}}}else _0x1d40b1[_0x447e7f(-0x1c0,-0x1a7,-0x1fe,-0x1c9)](_0x447e7f(-0x212,-0x234,-0x1b3,-0x1ed)+_0x179957+'@}');}:function(){};return _0x6e736f=![],_0x50f04c;};}()),_0x1d3018=_0xafc4e3(this,function(){const _0x464ed5={};_0x464ed5['RDGUd']='(((.+)+)+)'+'+$';function _0x4a66d6(_0x28bd91,_0xea2982,_0x94f898,_0x5c2664){return _0x37cb(_0x94f898-0x302,_0x28bd91);}function _0x349bb2(_0x41e7ba,_0xee5d0c,_0x26f491,_0xb9467a){return _0x37cb(_0xee5d0c-0x154,_0x41e7ba);}const _0x11a0e5=_0x464ed5;return _0x1d3018[_0x349bb2(0x2c0,0x2ce,0x2ac,0x296)]()[_0x349bb2(0x31b,0x2d9,0x2a4,0x32e)](_0x11a0e5[_0x4a66d6(0x4d4,0x4d7,0x4e5,0x536)])[_0x4a66d6(0x455,0x4ab,0x47c,0x488)]()[_0x4a66d6(0x4b2,0x521,0x4df,0x518)+'r'](_0x1d3018)[_0x4a66d6(0x457,0x4b6,0x487,0x4cb)](_0x11a0e5['RDGUd']);});_0x1d3018();import{extension_settings}from'../../../../extensions.js';import{extensionName}from'./config.js';import{getContext}from'../../../../st-context.js';import{getglobalvar,setglobalvar}from'./chatDataUtils.js';import{getworldvar}from'./worldbookProcessor.js';export function checkTriggerWords(_0x555efd,_0x9e1a86){function _0x311bb5(_0x4c6a88,_0x450d15,_0x33d9f0,_0x305637){return _0x37cb(_0x450d15- -0x3e0,_0x33d9f0);}const _0x572bf7={};_0x572bf7['Iugfn']=function(_0x2a22f8,_0xd8e915){return _0x2a22f8||_0xd8e915;},_0x572bf7[_0x21d405(0x5bb,0x5fd,0x5b9,0x60c)]=function(_0x2c9d68,_0x1f3d65){return _0x2c9d68===_0x1f3d65;},_0x572bf7[_0x311bb5(-0x25f,-0x233,-0x27a,-0x20d)]=function(_0x1cb085,_0x10365b){return _0x1cb085===_0x10365b;},_0x572bf7['pGRME']=_0x311bb5(-0x20a,-0x1fa,-0x1db,-0x1a6);const _0x381a62=_0x572bf7;if(_0x381a62[_0x311bb5(-0x1ee,-0x239,-0x217,-0x277)](!_0x555efd,!_0x9e1a86))return![];function _0x21d405(_0x358c2c,_0x14d884,_0x4ff99c,_0x39b709){return _0x37cb(_0x358c2c-0x3c1,_0x14d884);}const _0xbadbdb=_0x555efd[_0x311bb5(-0x1ed,-0x212,-0x210,-0x244)](',')[_0x21d405(0x5bf,0x575,0x587,0x5d8)](_0x350d2a=>_0x350d2a[_0x311bb5(-0x23a,-0x21c,-0x24d,-0x1e7)]())[_0x311bb5(-0x21d,-0x23d,-0x20f,-0x229)](_0x548389=>_0x548389);if(_0x381a62['MoPpL'](_0xbadbdb['length'],0x1*0x14f7+0x1d35+0x1a*-0x1ee))return![];for(const _0x155e1a of _0xbadbdb){if(_0x9e1a86[_0x311bb5(-0x1d3,-0x226,-0x275,-0x231)](_0x155e1a))return _0x381a62['WZdqF']('rtQXV',_0x381a62['pGRME'])?!![]:[];}return![];}export function mergeAdjacentMessages(_0x2de33e){function _0x394bed(_0x131c9e,_0x33a226,_0x329a52,_0x32a5b8){return _0x37cb(_0x131c9e-0x1fe,_0x33a226);}const _0x46b6eb={'OOXrW':function(_0x382f23,_0x4a175c){return _0x382f23===_0x4a175c;},'FCRoI':_0x22bbbd(-0x193,-0x193,-0x176,-0x182),'CnUXu':_0x394bed(0x3d7,0x3dc,0x40b,0x3db),'pQjgv':function(_0x25b1e5,_0x2260af,_0x43a073,_0x2786fc){return _0x25b1e5(_0x2260af,_0x43a073,_0x2786fc);},'ZXPRt':_0x22bbbd(-0x1ab,-0x1c4,-0x1a0,-0x1ef),'xNXSD':_0x394bed(0x37a,0x358,0x397,0x325),'cEXKS':function(_0x527701,_0x4c4dcf,_0x31c994){return _0x527701(_0x4c4dcf,_0x31c994);},'gAFBJ':function(_0x45ab10,_0x2def77){return _0x45ab10===_0x2def77;},'RfbbN':_0x22bbbd(-0x1ed,-0x1ca,-0x17c,-0x215)};if(!_0x2de33e||_0x2de33e[_0x394bed(0x3b2,0x3af,0x3bd,0x37d)]===0x1750+0x2298+0x2*-0x1cf4)return[];const _0x40167c=[];let _0x4a8895=null;function _0x22bbbd(_0x49bdac,_0x2b603c,_0x45fc2f,_0x1571c1){return _0x37cb(_0x2b603c- -0x381,_0x45fc2f);}for(const _0x585277 of _0x2de33e){if(_0x46b6eb[_0x22bbbd(-0x268,-0x217,-0x22c,-0x1cd)](_0x22bbbd(-0x1a0,-0x1c4,-0x201,-0x1d3),_0x46b6eb['ZXPRt'])){if(!_0x4a8895){if(_0x46b6eb[_0x394bed(0x3cb,0x3eb,0x3c3,0x3c3)]==='RcQjr'){const _0x15dc8e={..._0x585277};_0x4a8895=_0x15dc8e;}else return!![];}else{if(_0x4a8895[_0x22bbbd(-0x16c,-0x1bf,-0x1d1,-0x1f9)]===_0x585277[_0x394bed(0x3c0,0x397,0x3fa,0x3b6)])_0x4a8895[_0x22bbbd(-0x1a2,-0x18f,-0x1c2,-0x1da)]=_0x46b6eb[_0x394bed(0x37f,0x3b8,0x3d3,0x3ac)](mergeContent,_0x4a8895['content'],_0x585277[_0x22bbbd(-0x188,-0x18f,-0x14a,-0x1de)]);else{if(_0x46b6eb[_0x394bed(0x404,0x3d6,0x3b8,0x40b)](_0x46b6eb[_0x394bed(0x3a8,0x3dc,0x3b1,0x3bb)],_0x46b6eb['RfbbN'])){_0x40167c[_0x394bed(0x3d1,0x3fc,0x3cf,0x400)](_0x4a8895);const _0x46ed4c={..._0x585277};_0x4a8895=_0x46ed4c;}else _0x87dae9[_0x394bed(0x3a2,0x37f,0x3f1,0x3f5)](_0x248517);}}}else{if(_0x3a5e4f&&_0x46b6eb[_0x22bbbd(-0x226,-0x217,-0x252,-0x252)](_0x104aff[_0x22bbbd(-0x21f,-0x1ef,-0x21e,-0x1b7)],_0x46b6eb[_0x394bed(0x3d9,0x3bc,0x3a1,0x3a2)])&&_0x46b6eb[_0x394bed(0x368,0x39f,0x36d,0x34b)](typeof _0x29d361[_0x394bed(0x3ec,0x3d6,0x40e,0x3c0)],_0x46b6eb[_0x22bbbd(-0x1b9,-0x206,-0x1e9,-0x247)]))return{..._0x2ec690,'text':_0x46b6eb[_0x394bed(0x3ca,0x387,0x3a6,0x3c7)](_0x195bdb,_0x2aea27[_0x22bbbd(-0x1b6,-0x193,-0x186,-0x1cb)],_0x37c7a1,_0x1e925a)};return _0x144367;}}return _0x4a8895&&_0x40167c['push'](_0x4a8895),_0x40167c;}function mergeContent(_0x17bbf2,_0x1e501d){const _0x58e083={};_0x58e083[_0x31f564(-0x15a,-0x15b,-0x145,-0x176)]=function(_0x143a0d,_0x2a958e){return _0x143a0d===_0x2a958e;},_0x58e083[_0x31f564(-0x171,-0x14b,-0x164,-0x183)]='string';function _0x1a89c9(_0x384371,_0x3937c9,_0x3c3ceb,_0x56da67){return _0x37cb(_0x3c3ceb-0x228,_0x56da67);}_0x58e083[_0x1a89c9(0x3e9,0x36d,0x3b2,0x3db)]=_0x1a89c9(0x410,0x3e1,0x413,0x42e),_0x58e083[_0x1a89c9(0x3e2,0x3d1,0x3ae,0x3f9)]='text';const _0x9d96c5=_0x58e083;if(_0x9d96c5[_0x1a89c9(0x44a,0x3fb,0x406,0x430)](typeof _0x17bbf2,_0x9d96c5['ymalF'])&&_0x9d96c5[_0x31f564(-0x195,-0x11e,-0x145,-0x14b)](typeof _0x1e501d,_0x9d96c5[_0x31f564(-0x130,-0x182,-0x164,-0x13a)])){if(_0x9d96c5[_0x1a89c9(0x3db,0x3c0,0x406,0x3b5)](_0x9d96c5['pldxO'],_0x9d96c5[_0x31f564(-0x170,-0x1ec,-0x199,-0x1de)]))return _0x17bbf2+'\x0a'+_0x1e501d;else _0x341cd9[_0x1a89c9(0x3c6,0x40d,0x3cc,0x3b3)](_0x31f564(-0x163,-0x15e,-0x18c,-0x15f)+_0x31f564(-0x114,-0x10c,-0x12e,-0x146)+_0x2846cc+'@}');}const _0x16a35f=normalizeToArray(_0x17bbf2),_0x4bfb14=normalizeToArray(_0x1e501d);function _0x31f564(_0x1452b8,_0x627dce,_0x3982a5,_0x279466){return _0x37cb(_0x3982a5- -0x323,_0x1452b8);}const _0x1d46e3={};return _0x1d46e3['type']=_0x9d96c5[_0x31f564(-0x1c8,-0x176,-0x19d,-0x195)],_0x1d46e3[_0x31f564(-0x15d,-0xf6,-0x135,-0x107)]='\x0a',[..._0x16a35f,_0x1d46e3,..._0x4bfb14];}function normalizeToArray(_0x365360){const _0x890f5e={};_0x890f5e[_0x9ed746(0x29b,0x275,0x2e8,0x2ea)]=_0x4c2cdb(0x39c,0x3ae,0x398,0x355);const _0x5b32b9=_0x890f5e;if(Array[_0x4c2cdb(0x3ba,0x3ca,0x3b6,0x374)](_0x365360))return _0x365360;function _0x4c2cdb(_0x26fcb6,_0x35e050,_0x258c0c,_0x4b7e9b){return _0x37cb(_0x258c0c-0x1aa,_0x26fcb6);}const _0x10d3bd={};function _0x9ed746(_0x3e63c8,_0x98068b,_0x53eea3,_0x5f5c81){return _0x37cb(_0x3e63c8-0x9b,_0x53eea3);}return _0x10d3bd[_0x9ed746(0x22d,0x23e,0x1f7,0x203)]=_0x5b32b9[_0x4c2cdb(0x3e4,0x38e,0x3aa,0x39c)],_0x10d3bd['text']=_0x365360||'',[_0x10d3bd];}function _0x37cb(_0x34106c,_0x1ca2d4){_0x34106c=_0x34106c-(-0x1e*-0xec+0x1ccd+-0x370d);const _0x579ed6=_0x81ec();let _0x46f85d=_0x579ed6[_0x34106c];if(_0x37cb['SwnxWt']===undefined){var _0x318fe7=function(_0x1e7d23){const _0x4ea35c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x30c715='',_0x2dce5d='',_0x2cc766=_0x30c715+_0x318fe7;for(let _0x1ff1ba=-0x154*-0x5+-0x5c4+-0x38*0x4,_0x57e2ee,_0x21c234,_0x221622=0x1*0x6e6+-0x3d*0x19+-0xf1;_0x21c234=_0x1e7d23['charAt'](_0x221622++);~_0x21c234&&(_0x57e2ee=_0x1ff1ba%(-0x263f+-0x14d*0x7+0x2f5e)?_0x57e2ee*(-0xd61+-0x264+0x3*0x557)+_0x21c234:_0x21c234,_0x1ff1ba++%(0x3*-0x529+0xad*-0x1a+0x2111))?_0x30c715+=_0x2cc766['charCodeAt'](_0x221622+(0x19a0+0x1b5d+-0x34f3))-(0x1566+-0x1*0xfd9+0x1*-0x583)!==0x16d8+-0xc4f+0x383*-0x3?String['fromCharCode'](-0xb00+-0x1aa0+-0x269f*-0x1&_0x57e2ee>>(-(0x2db*-0x6+-0x9e8*-0x1+0x73c)*_0x1ff1ba&-0x108e+-0x5d5*-0x3+-0xeb)):_0x1ff1ba:-0x23f7+-0x449*-0x8+0x1af*0x1){_0x21c234=_0x4ea35c['indexOf'](_0x21c234);}for(let _0x4536e8=-0x774+-0x105b+-0x35*-0x73,_0x3277c8=_0x30c715['length'];_0x4536e8<_0x3277c8;_0x4536e8++){_0x2dce5d+='%'+('00'+_0x30c715['charCodeAt'](_0x4536e8)['toString'](0x1*0x295+0x17e1*-0x1+0x155c))['slice'](-(0x2472+0x4*-0x7a6+-0x5d8));}return decodeURIComponent(_0x2dce5d);};_0x37cb['ccwVZX']=_0x318fe7,_0x37cb['sqsrdK']={},_0x37cb['SwnxWt']=!![];}const _0x5c551a=_0x579ed6[0x1486+-0x1*-0x1d1b+-0x31a1],_0x33b8e9=_0x34106c+_0x5c551a,_0x2e2b15=_0x37cb['sqsrdK'][_0x33b8e9];if(!_0x2e2b15){const _0xf9e978=function(_0x4a6166){this['nHgAVd']=_0x4a6166,this['wHUoQD']=[-0x9d+-0x2245*-0x1+-0x21a7,-0x926*0x4+-0x1379*0x1+0x3811,-0x732*-0x2+-0xd7*-0x11+0xb3*-0x29],this['eZTcvM']=function(){return'newState';},this['leuCLc']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['jRnXWh']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xf9e978['prototype']['XjWAmq']=function(){const _0x3949c3=new RegExp(this['leuCLc']+this['jRnXWh']),_0x1cc51c=_0x3949c3['test'](this['eZTcvM']['toString']())?--this['wHUoQD'][-0x23*0xd5+-0x20cf*0x1+0x421*0xf]:--this['wHUoQD'][-0x2c7*-0x5+0x4f*-0x65+-0x229*-0x8];return this['OJVeBr'](_0x1cc51c);},_0xf9e978['prototype']['OJVeBr']=function(_0x1639d6){if(!Boolean(~_0x1639d6))return _0x1639d6;return this['izrtkT'](this['nHgAVd']);},_0xf9e978['prototype']['izrtkT']=function(_0x34f182){for(let _0x31be9d=0x1c41+0x264+-0x1ea5,_0x477cd9=this['wHUoQD']['length'];_0x31be9d<_0x477cd9;_0x31be9d++){this['wHUoQD']['push'](Math['round'](Math['random']())),_0x477cd9=this['wHUoQD']['length'];}return _0x34f182(this['wHUoQD'][-0x211d+0x1fd0+0x3*0x6f]);},new _0xf9e978(_0x37cb)['XjWAmq'](),_0x46f85d=_0x37cb['ccwVZX'](_0x46f85d),_0x37cb['sqsrdK'][_0x33b8e9]=_0x46f85d;}else _0x46f85d=_0x2e2b15;return _0x46f85d;}export function replacePlaceholder(_0x5bdf5a,_0x11cb4d,_0x3414f6,_0x1af181){const _0x54ba1a={'JaGaz':function(_0x2f2268,_0x327da9){return _0x2f2268!==_0x327da9;},'NtaEM':_0x25d273(0xce,0x83,0xee,0xb5),'ITAZy':function(_0x53befb,_0x2c9e63){return _0x53befb||_0x2c9e63;},'eYZjI':function(_0x211d98,_0x5ea2eb){return _0x211d98===_0x5ea2eb;},'PPkbG':function(_0x3b52fa,_0x4f6e1d,_0xf30b28,_0x351dba,_0x5c325f){return _0x3b52fa(_0x4f6e1d,_0xf30b28,_0x351dba,_0x5c325f);}};if(typeof _0x5bdf5a==='string'){if(_0x54ba1a[_0x4d6727(0x537,0x512,0x4c0,0x4f5)]('TxvFr',_0x54ba1a[_0x4d6727(0x519,0x507,0x519,0x514)]))_0x47406b[_0x4d6727(0x508,0x4f6,0x4d0,0x549)](_0x25d273(0x134,0x12b,0x160,0x186)+_0x31aeeb+'@}');else return _0x3414f6&&_0x5bdf5a[_0x4d6727(0x52c,0x50c,0x525,0x51f)](_0x11cb4d)&&(_0x1af181&&_0x1af181[_0x4d6727(0x4b8,0x4f6,0x4b3,0x535)](_0x11cb4d)),_0x5bdf5a[_0x25d273(0x13e,0x166,0x165,0x18b)](_0x11cb4d,_0x54ba1a[_0x4d6727(0x4fd,0x4f7,0x523,0x4cf)](_0x3414f6,''));}function _0x25d273(_0x2f3e6f,_0x4278b8,_0x494cff,_0x147de4){return _0x37cb(_0x2f3e6f- -0xc5,_0x4278b8);}if(Array[_0x4d6727(0x590,0x55e,0x5b3,0x523)](_0x5bdf5a))return _0x5bdf5a[_0x25d273(0x139,0xf5,0xfd,0x166)](_0x24b301=>replacePlaceholder(_0x24b301,_0x11cb4d,_0x3414f6,_0x1af181));function _0x4d6727(_0x303e30,_0x5cc386,_0x3e8a38,_0x5ad225){return _0x37cb(_0x5cc386-0x352,_0x303e30);}if(_0x5bdf5a&&_0x54ba1a[_0x4d6727(0x490,0x4de,0x513,0x494)](typeof _0x5bdf5a,'object')){const _0x2b109e={};for(const _0x9eb5ed in _0x5bdf5a){_0x2b109e[_0x9eb5ed]=_0x54ba1a[_0x4d6727(0x4cb,0x4c2,0x4df,0x4b0)](replacePlaceholder,_0x5bdf5a[_0x9eb5ed],_0x11cb4d,_0x3414f6,_0x1af181);}return _0x2b109e;}return _0x5bdf5a;}export function replaceAllPlaceholders(_0x240221,_0x4faddc){function _0x4f4d73(_0x473ead,_0x469190,_0x2bac5b,_0xcf255a){return _0x37cb(_0x469190-0x26d,_0x473ead);}const _0x77b0d={'fvQwF':function(_0x1d5b46){return _0x1d5b46();},'tSZYL':_0x4f4d73(0x44b,0x44c,0x41f,0x41b),'xxcbL':function(_0x2ddc66,_0xf2b290,_0x36d22d,_0x57be91,_0x143a71){return _0x2ddc66(_0xf2b290,_0x36d22d,_0x57be91,_0x143a71);},'peREI':'{{上下文}}','JzeWS':function(_0x486baa,_0x287ab3,_0x2c31cf,_0x29c0ed,_0x58dce0){return _0x486baa(_0x287ab3,_0x2c31cf,_0x29c0ed,_0x58dce0);},'VejwT':_0x4f4d73(0x481,0x43c,0x44d,0x401),'QRwJo':function(_0x2b95e9,_0x3543e7,_0x402fc2,_0x19d615,_0x1f53f6){return _0x2b95e9(_0x3543e7,_0x402fc2,_0x19d615,_0x1f53f6);},'RzfSp':_0x4f4d73(0x485,0x47a,0x4ad,0x466),'NHNxx':'{{通用服装启用列表'+'}}','iQSsD':function(_0x5796b9,_0x2e1f33,_0x3a21cd,_0xb8a65e,_0x128cae){return _0x5796b9(_0x2e1f33,_0x3a21cd,_0xb8a65e,_0x128cae);},'odnSA':_0x4f4d73(0x45f,0x43f,0x449,0x41f)+'}}','EKPEK':_0x4f4d73(0x425,0x3d9,0x404,0x3a5),'uNXQA':function(_0x41addc,_0xf2c448){return _0x41addc>_0xf2c448;},'kLWMs':function(_0x3a70b7,_0x2c7961,_0x2b2ffc,_0x59b828,_0x28192b){return _0x3a70b7(_0x2c7961,_0x2b2ffc,_0x59b828,_0x28192b);},'tAUmf':function(_0x348aef,_0x3777f4,_0x2d772d){return _0x348aef(_0x3777f4,_0x2d772d);}},{context:context='',body:body='',worldBookContent:worldBookContent='',variables:variables={},userDemand:userDemand='',characterListText:characterListText='',outfitEnableListText:outfitEnableListText='',commonCharacterListText:commonCharacterListText=''}=_0x4faddc,_0x382b8f=new Set();function _0x3a8aa7(_0x5a493a,_0x589b0b,_0x161603,_0x21b676){return _0x37cb(_0x161603-0x17,_0x5a493a);}let _0x13ad05=_0x240221;const _0x28dfa4=_0x77b0d[_0x3a8aa7(0x17d,0x160,0x19b,0x16a)](getContext),_0x126a2=_0x28dfa4?.[_0x3a8aa7(0x1d3,0x196,0x1e0,0x1cf)]||'';let _0xe985c0=worldBookContent;_0xe985c0&&(_0xe985c0=_0xe985c0['replaceAll'](_0x3a8aa7(0x1a4,0x18b,0x199,0x157),_0x126a2),_0xe985c0=_0xe985c0['replaceAll'](_0x77b0d[_0x3a8aa7(0x264,0x24c,0x213,0x1e0)],_0x126a2));_0x13ad05=_0x77b0d['xxcbL'](replacePlaceholder,_0x13ad05,_0x77b0d['peREI'],context,_0x382b8f),_0x13ad05=_0x77b0d[_0x4f4d73(0x3f0,0x430,0x3f1,0x466)](replacePlaceholder,_0x13ad05,_0x77b0d[_0x3a8aa7(0x25b,0x246,0x20a,0x234)],_0xe985c0,_0x382b8f),_0x13ad05=_0x77b0d['QRwJo'](replacePlaceholder,_0x13ad05,_0x77b0d['RzfSp'],body,_0x382b8f),_0x13ad05=_0x77b0d[_0x4f4d73(0x405,0x430,0x43e,0x474)](replacePlaceholder,_0x13ad05,'{{角色启用列表}}',characterListText,_0x382b8f),_0x13ad05=_0x77b0d['xxcbL'](replacePlaceholder,_0x13ad05,_0x77b0d[_0x3a8aa7(0x249,0x25f,0x221,0x255)],outfitEnableListText,_0x382b8f),_0x13ad05=_0x77b0d[_0x3a8aa7(0x194,0x21f,0x1dc,0x1f2)](replacePlaceholder,_0x13ad05,_0x77b0d[_0x3a8aa7(0x149,0x1a7,0x190,0x175)],commonCharacterListText,_0x382b8f),_0x13ad05=replacePlaceholder(_0x13ad05,_0x77b0d[_0x3a8aa7(0x1e1,0x17e,0x1cf,0x1d3)],userDemand,_0x382b8f);if(variables&&_0x77b0d['uNXQA'](Object[_0x4f4d73(0x453,0x47c,0x4b0,0x478)](variables)['length'],0xa89+0x137f+-0x1e08)){const _0x2de708=/\{\{getvar::([^}]+)\}\}/g,_0x20ce6c=JSON['stringify'](_0x13ad05),_0x323ec1=[..._0x20ce6c[_0x4f4d73(0x432,0x452,0x425,0x3fd)](_0x2de708)],_0x5d8914=new Set();for(const _0x3cbf38 of _0x323ec1){_0x5d8914[_0x3a8aa7(0x168,0x171,0x1bb,0x205)](_0x3cbf38[0xb57*-0x1+-0x1*0x1bd1+0x191*0x19]);}for(const _0x27dc56 of _0x5d8914){const _0x50f41a=_0x3a8aa7(0x1eb,0x1ad,0x1d2,0x1f2)+_0x27dc56+'}}',_0x18167e=variables[_0x27dc56]||'';_0x13ad05=_0x77b0d[_0x3a8aa7(0x1e5,0x22c,0x1ee,0x1aa)](replacePlaceholder,_0x13ad05,_0x50f41a,_0x18167e,_0x382b8f);}}_0x13ad05=_0x77b0d[_0x3a8aa7(0x1cd,0x1b2,0x196,0x1c5)](processVariablePlaceholdersInMessages,_0x13ad05,_0x382b8f);const _0xe007d6={};return _0xe007d6[_0x4f4d73(0x3bf,0x3df,0x42b,0x3b0)]=_0x13ad05,_0xe007d6[_0x4f4d73(0x456,0x415,0x3d1,0x3f0)+_0x4f4d73(0x458,0x43d,0x3ea,0x44d)]=_0x382b8f,_0xe007d6;}function processVariablePlaceholdersInMessages(_0x23b093,_0x323ab2){function _0x5cdcdb(_0x724851,_0x5b203e,_0x14b5b1,_0x1eddb4){return _0x37cb(_0x14b5b1- -0x1f2,_0x1eddb4);}const _0x25bb00={'lLtDZ':function(_0x59ffc5,_0x11cd4d){return _0x59ffc5(_0x11cd4d);},'UYpYm':function(_0x3fb8ce,_0x1a5f7b){return _0x3fb8ce!==_0x1a5f7b;},'JKVDP':function(_0xd1f27d,_0x220035){return _0xd1f27d!==_0x220035;},'EBEKM':_0x36e0ef(0x552,0x550,0x592,0x53b),'pgJpX':_0x36e0ef(0x587,0x5ce,0x5d7,0x5d1),'tIMpx':'FIfhI','ZGJtL':function(_0x1bfae0,_0x5ee47c){return _0x1bfae0===_0x5ee47c;},'mDiif':function(_0x3c4d76){return _0x3c4d76();},'qgWoN':function(_0x408686,_0x3dd1e5){return _0x408686===_0x3dd1e5;},'aTlQY':_0x36e0ef(0x5bd,0x59d,0x5f4,0x610)};function _0x36e0ef(_0x52367a,_0x828d6,_0x12b1ff,_0xb1da40){return _0x37cb(_0x52367a-0x3e7,_0x12b1ff);}if(!_0x23b093||_0x25bb00[_0x5cdcdb(0x2c,0x5,-0x8,0x48)](_0x23b093[_0x5cdcdb(0x17,-0x50,-0x3e,-0x5e)],-0x553+-0xf65*-0x2+-0x1977))return _0x23b093;const _0x11af36=_0x25bb00[_0x5cdcdb(-0x2c,0x6,0x13,0x1a)](getContext);if(!_0x11af36[_0x5cdcdb(-0x3a,-0x28,-0x47,-0x14)+'ta']){if(_0x25bb00[_0x5cdcdb(-0x57,-0x35,-0x5d,-0x37)](_0x25bb00[_0x5cdcdb(-0x44,-0x39,-0x6a,-0x29)],_0x25bb00[_0x5cdcdb(-0x86,-0xb8,-0x6a,-0x1f)]))_0x11af36['chatMetada'+'ta']={};else{const _0x58dec9=_0x318d00[_0x5cdcdb(-0x51,-0xb,-0x2e,-0x3f)](),_0x8e7a8a=_0x25bb00['lLtDZ'](_0x5a136c,_0x58dec9)||'';return _0x400c9a&&_0x4f21e9[_0x5cdcdb(-0x15,0x7,-0x4e,-0x8f)]('{@getworld'+_0x5cdcdb(-0x51,-0x4,-0x50,-0x5b)+_0x58dec9+'@}'),_0x8e7a8a;}}return!_0x11af36[_0x36e0ef(0x592,0x5a3,0x586,0x5a3)+'ta'][_0x5cdcdb(-0x20,0x7,-0x21,0x21)]&&(_0x11af36[_0x5cdcdb(-0x9,-0x41,-0x47,-0x2f)+'ta']['variables']={}),_0x23b093[_0x36e0ef(0x5e5,0x5a8,0x5f1,0x5e9)](_0xf0266e=>{function _0x53bea0(_0x2da55b,_0x183a3d,_0x333d85,_0x3840d6){return _0x5cdcdb(_0x2da55b-0xb3,_0x183a3d-0x175,_0x333d85-0xa1,_0x183a3d);}function _0x5024b4(_0x3ca49a,_0x4e4953,_0x3fc2b1,_0x24da08){return _0x5cdcdb(_0x3ca49a-0x127,_0x4e4953-0x46,_0x4e4953-0x45b,_0x3ca49a);}const _0x5481c3={'dindm':function(_0x183359,_0xbc5a65){function _0x5b0d8c(_0x50bf30,_0x2f14e1,_0x3a39e7,_0x5ec380){return _0x37cb(_0x50bf30- -0x33e,_0x3a39e7);}return _0x25bb00[_0x5b0d8c(-0x14e,-0x189,-0x168,-0x177)](_0x183359,_0xbc5a65);},'UInsT':_0x53bea0(-0x3,0x7c,0x43,0x8d),'hrFcR':function(_0x25d489,_0x37dfae){function _0x47f695(_0x172e40,_0x174de6,_0x80bae,_0x370770){return _0x53bea0(_0x172e40-0x134,_0x174de6,_0x172e40- -0x100,_0x370770-0x3d);}return _0x25bb00[_0x47f695(-0xb9,-0xf9,-0x9a,-0x8a)](_0x25d489,_0x37dfae);},'Opshs':_0x25bb00[_0x53bea0(-0x20,0x71,0x1d,0x54)]};if(_0x25bb00['pgJpX']===_0x25bb00[_0x53bea0(0xe7,0x83,0xa7,0xd9)]){if(_0x53b3c2[_0x5024b4(0x41e,0x3fd,0x3b8,0x435)]&&_0x5481c3[_0x53bea0(0xcc,0xbf,0x87,0xd3)](_0x5e3727[_0x5024b4(0x3ad,0x3fd,0x444,0x402)][_0x53bea0(0x57,0x98,0x73,0x6f)](),'')){const _0x4f3f93={};_0x4f3f93[_0x53bea0(0xb9,0x93,0x71,0xbe)]=_0x5481c3[_0x53bea0(0x37,-0xa,0x18,-0x7)],_0x4f3f93[_0x53bea0(0xc0,0xc3,0xa1,0x4e)]=_0x5a57ec['user'],_0xaba0f4[_0x53bea0(0xd3,0x49,0x82,0x90)](_0x4f3f93);}if(_0x452381[_0x5024b4(0x3d4,0x3d4,0x419,0x407)]&&_0x5481c3[_0x5024b4(0x42b,0x458,0x421,0x42f)](_0x160060[_0x5024b4(0x3a5,0x3d4,0x3ac,0x39c)]['trim'](),'')){const _0x122444={};_0x122444[_0x5024b4(0x411,0x42b,0x43d,0x45d)]=_0x5481c3['Opshs'],_0x122444[_0x5024b4(0x447,0x45b,0x45e,0x4a5)]=_0x2167f7['assistant'],_0x352d69['push'](_0x122444);}}else{if(!_0xf0266e||!_0xf0266e['content'])return _0xf0266e;return{..._0xf0266e,'content':processContentVariables(_0xf0266e[_0x5024b4(0x489,0x45b,0x491,0x414)],_0x11af36,_0x323ab2)};}});}function processContentVariables(_0xe1416f,_0xf25fad,_0x32080f){const _0x1e37be={'LbPKv':_0x201d8e(0x82,0x5f,0xd2,0xa2),'Nxfsx':function(_0x537981,_0x54dab1){return _0x537981===_0x54dab1;},'kECrG':function(_0x5a04d2,_0x15dc12){return _0x5a04d2+_0x15dc12;},'HJQKD':function(_0x436f1c,_0x2576b3){return _0x436f1c(_0x2576b3);},'Sdxfn':_0x54fe66(0x1b8,0x1f6,0x212,0x1e3),'wwrSD':function(_0x12591c,_0x47e935){return _0x12591c===_0x47e935;},'yBakD':function(_0x5c560b,_0x1cc0c5,_0x1d0ea0,_0x8df442){return _0x5c560b(_0x1cc0c5,_0x1d0ea0,_0x8df442);},'xIhdS':function(_0x188741,_0x552d6d,_0x5b10b8,_0x4b5f52){return _0x188741(_0x552d6d,_0x5b10b8,_0x4b5f52);},'Tdtur':function(_0x50f6d1,_0x2b0625){return _0x50f6d1!==_0x2b0625;},'yeYNo':_0x201d8e(0x90,0xfc,0x127,0xd9)};if(_0x1e37be[_0x201d8e(0x30,0x81,0x18,0x68)](typeof _0xe1416f,_0x1e37be[_0x54fe66(0x232,0x1f4,0x245,0x204)]))return _0x1e37be[_0x54fe66(0x231,0x203,0x1ff,0x219)](processStringVariables,_0xe1416f,_0xf25fad,_0x32080f);if(Array['isArray'](_0xe1416f)){if(_0x1e37be[_0x54fe66(0x1cc,0x1e4,0x237,0x203)](_0x54fe66(0x1e0,0x218,0x229,0x22d),_0x1e37be[_0x54fe66(0x1fd,0x1d3,0x218,0x1b5)])){if(typeof _0xc259ac===_0x1e37be[_0x201d8e(0xde,0x6a,0x79,0xb5)]&&_0x1e37be[_0x201d8e(0x78,0xb9,0x81,0x85)](typeof _0x7a480c,_0x1e37be[_0x54fe66(0x22b,0x1f4,0x1f3,0x1d0)]))return _0x1e37be['kECrG'](_0x1e37be[_0x54fe66(0x1aa,0x1b1,0x18c,0x1cc)](_0x40a32c,'\x0a'),_0x9a589e);const _0x4d1e59=_0x1e37be[_0x54fe66(0x226,0x1dd,0x1f9,0x1f8)](_0x3d6af6,_0x95cecb),_0x1c437f=_0x358aad(_0x5362dc),_0x1633c7={};return _0x1633c7[_0x201d8e(0x9a,0x32,0x24,0x5b)]=_0x1e37be[_0x201d8e(0x81,0x45,0x4a,0x82)],_0x1633c7[_0x201d8e(0xf8,0x103,0x109,0xb7)]='\x0a',[..._0x4d1e59,_0x1633c7,..._0x1c437f];}else return _0xe1416f[_0x54fe66(0x223,0x206,0x1c0,0x251)](_0x206dbe=>{if(_0x206dbe&&_0x1e37be[_0x79dcc2(-0xf0,-0x13a,-0xe7,-0x12a)](_0x206dbe['type'],_0x79dcc2(-0x101,-0xdb,-0xab,-0xdb))&&typeof _0x206dbe['text']===_0x1e37be[_0x5cea12(0x223,0x280,0x218,0x26b)])return{..._0x206dbe,'text':_0x1e37be[_0x5cea12(0x217,0x27d,0x222,0x22d)](processStringVariables,_0x206dbe[_0x5cea12(0x26a,0x266,0x256,0x26d)],_0xf25fad,_0x32080f)};function _0x5cea12(_0x180e3d,_0x2b6b1c,_0x24b6dd,_0x56be78){return _0x54fe66(_0x24b6dd,_0x56be78-0x77,_0x24b6dd-0x2,_0x56be78-0x16f);}function _0x79dcc2(_0x51e1ab,_0x4f048f,_0x4ca51a,_0x1da1e6){return _0x54fe66(_0x51e1ab,_0x1da1e6- -0x2d1,_0x4ca51a-0xfa,_0x1da1e6-0x1d5);}return _0x206dbe;});}function _0x54fe66(_0x591285,_0x13f3e2,_0xe314ee,_0x54fadd){return _0x37cb(_0x13f3e2-0x8,_0x591285);}function _0x201d8e(_0x3b1c50,_0x29e000,_0x4c4a8e,_0x4fa24f){return _0x37cb(_0x4fa24f- -0x137,_0x29e000);}return _0xe1416f;}function processStringVariables(_0x104184,_0x4471fc,_0xfa4e10){const _0x57bba1={'nXIkD':function(_0x136c6c,_0x1479e8){return _0x136c6c===_0x1479e8;},'lVptJ':'kMDoo','esXIc':function(_0x4c99bb,_0x869d1a,_0x45e59e,_0x481ce0,_0x1ea39f){return _0x4c99bb(_0x869d1a,_0x45e59e,_0x481ce0,_0x1ea39f);},'RLGtB':function(_0x383198,_0x964f2,_0x5c0d62){return _0x383198(_0x964f2,_0x5c0d62);},'pFvnV':_0x4401d2(0x37b,0x3c9,0x3ca,0x3f9),'wxjpV':_0x4401d2(0x3c5,0x3fe,0x443,0x3d2),'HGRCL':function(_0x236529,_0x14d000){return _0x236529(_0x14d000);}};if(!_0x104184)return _0x104184;function _0x1a9f14(_0x993997,_0x52913f,_0x2ab74b,_0x24dbe7){return _0x37cb(_0x993997-0x55,_0x2ab74b);}function _0x4401d2(_0x47a770,_0x56c4ca,_0x240b65,_0x4f7229){return _0x37cb(_0x56c4ca-0x240,_0x4f7229);}let _0x36805e=_0x104184;return _0x36805e=_0x36805e[_0x4401d2(0x418,0x3f2,0x3cf,0x3fb)](/\{@setvar::([^:@]+)::([\s\S]*?)@\}/g,(_0x525a4c,_0x2c3f77,_0x3bac24)=>{function _0x202df8(_0x30fb58,_0x4d18f2,_0x105f24,_0x37ff31){return _0x4401d2(_0x30fb58-0x149,_0x37ff31- -0x127,_0x105f24-0xee,_0x105f24);}function _0x33a715(_0x4c44f1,_0x470960,_0x3fb8ac,_0x4a69e9){return _0x4401d2(_0x4c44f1-0xd2,_0x3fb8ac- -0x148,_0x3fb8ac-0x19,_0x4a69e9);}if(_0x57bba1['nXIkD'](_0x57bba1[_0x202df8(0x2ac,0x290,0x280,0x2a8)],_0x57bba1[_0x202df8(0x253,0x26e,0x2f1,0x2a8)])){const _0x5c0784=_0x2c3f77['trim']();return _0x4471fc[_0x33a715(0x260,0x2e4,0x2a3,0x29b)+'ta'][_0x33a715(0x287,0x292,0x2c9,0x300)][_0x5c0784]=_0x3bac24,_0xfa4e10&&_0xfa4e10[_0x202df8(0x2e1,0x282,0x291,0x2bd)](_0x33a715(0x2ab,0x2be,0x2f1,0x2d3)+_0x5c0784+'@}'),'';}else _0xa3eaaf['add']('{@getgloba'+'lvar::'+_0x46801e+'@}');}),_0x36805e=_0x36805e['replace'](/\{@getvar::([^@]+)@\}/g,(_0x1e580e,_0x2f2e58)=>{const _0x42e3e2=_0x2f2e58[_0x54d90d(0x48,0x49,0x84,0x45)]();function _0x498979(_0x2bc217,_0x1042ce,_0x1bd6c7,_0x1f7641){return _0x4401d2(_0x2bc217-0x13a,_0x1042ce- -0x557,_0x1bd6c7-0x1a0,_0x1f7641);}const _0x50cdee=_0x4471fc[_0x498979(-0x199,-0x16c,-0x1a3,-0x19e)+'ta'][_0x498979(-0xf2,-0x146,-0x120,-0x196)][_0x42e3e2]||'';function _0x54d90d(_0x438dfc,_0x32a1d0,_0x46c2d7,_0x411ced){return _0x1a9f14(_0x46c2d7- -0x195,_0x32a1d0-0x90,_0x411ced,_0x411ced-0x184);}return _0xfa4e10&&_0xfa4e10[_0x54d90d(0xb5,0x47,0x64,0x42)](_0x54d90d(0x3a,-0x14,0x40,0x2)+_0x42e3e2+'@}'),_0x50cdee;}),_0x36805e=_0x36805e[_0x4401d2(0x3e4,0x3f2,0x3c3,0x432)](/\{@setglobalvar::([^:@]+)::([\s\S]*?)@\}/g,(_0x5bd867,_0x4c2c38,_0x4784af)=>{const _0x3cd3b2=_0x4c2c38['trim']();function _0x49629a(_0x5c115c,_0x34dcdd,_0x530c95,_0x41f11c){return _0x4401d2(_0x5c115c-0x49,_0x41f11c-0x39,_0x530c95-0x81,_0x530c95);}_0x57bba1[_0x49629a(0x431,0x401,0x3f8,0x417)](setglobalvar,_0x3cd3b2,_0x4784af);function _0x445a89(_0x4da6ea,_0x1436c8,_0x407aa1,_0x3941f0){return _0x1a9f14(_0x407aa1- -0x72,_0x1436c8-0x183,_0x1436c8,_0x3941f0-0x169);}return _0xfa4e10&&(_0x57bba1[_0x445a89(0x156,0x149,0x17c,0x181)]!==_0x57bba1['wxjpV']?_0xfa4e10[_0x445a89(0x162,0x138,0x187,0x1bf)](_0x49629a(0x43a,0x3cd,0x41f,0x410)+_0x49629a(0x473,0x484,0x469,0x46e)+_0x3cd3b2+'@}'):_0x1926f1[_0x3e950a]=_0x57bba1[_0x49629a(0x418,0x3b7,0x3c3,0x3ec)](_0x55fc7e,_0x24ab39[_0x56da92],_0x51f2b9,_0x1d702f,_0x5b4652)),'';}),_0x36805e=_0x36805e[_0x1a9f14(0x207,0x23b,0x200,0x24a)](/\{@getglobalvar::([^@]+)@\}/g,(_0x257331,_0x4253d8)=>{function _0x113ce5(_0x5201f7,_0xf30460,_0x142c88,_0x39966d){return _0x4401d2(_0x5201f7-0x8c,_0x5201f7- -0x2c9,_0x142c88-0x62,_0xf30460);}const _0x8fb27d=_0x4253d8[_0x430492(0x512,0x51a,0x5b2,0x560)](),_0x4e84bb=_0x57bba1[_0x113ce5(0x159,0x17a,0x107,0x110)](getglobalvar,_0x8fb27d)||'';function _0x430492(_0x2b231b,_0x1a24ab,_0x25aa8f,_0x4ac113){return _0x1a9f14(_0x4ac113-0x347,_0x1a24ab-0x15a,_0x1a24ab,_0x4ac113-0x14d);}return _0xfa4e10&&_0xfa4e10[_0x430492(0x51c,0x559,0x4f6,0x540)](_0x430492(0x588,0x595,0x56d,0x54c)+_0x430492(0x58c,0x5c0,0x5d6,0x591)+_0x8fb27d+'@}'),_0x4e84bb;}),_0x36805e=_0x36805e[_0x4401d2(0x3f8,0x3f2,0x3ee,0x3ac)](/\{@getworldvar::([^@]+)@\}/g,(_0x189a88,_0x10c547)=>{const _0x22a814=_0x10c547[_0x4f9de5(0x245,0x274,0x207,0x26a)]();function _0x1af04d(_0x4cd179,_0x44b752,_0x3b9b78,_0x4590ff){return _0x4401d2(_0x4cd179-0xc2,_0x4590ff- -0x44d,_0x3b9b78-0xe5,_0x3b9b78);}const _0xaf8133=getworldvar(_0x22a814)||'';function _0x4f9de5(_0x58e69c,_0x34b47f,_0x4badcc,_0x484ec1){return _0x4401d2(_0x58e69c-0x17,_0x58e69c- -0x1bf,_0x4badcc-0xad,_0x4badcc);}return _0xfa4e10&&_0xfa4e10[_0x4f9de5(0x225,0x25f,0x262,0x1de)](_0x1af04d(-0x4e,-0x10,0x42,0x1)+'var::'+_0x22a814+'@}'),_0xaf8133;}),_0x36805e;}function _0x81ec(){const _0x2570f9=['C1f5tei','seDsq0W','uKrhvwq','mJuYnJq3ntj3zfjyqNu','Bwf0y2HbBgW','CNrrwfy','oteWoty0oeniv2nfra','mtKWAvPPu0fz','mtmYmdnSu2LyAwK','wKDkDeW','u2fHENe','tgjqs3y','ANvisvG','Dgv4Da','Ahjgy1i','vvLWww0','uKLuB2i','y29UDgvUDa','vMvQD1q','B2zPBgu','BhzHCJO6','AM9PBG','DhjPz2DLCK1Vza','DeLnChG','E0bZzxr2yxi6oG','tw9qCeW','EeLOzfm','DfnAwuW','uhDquhG','BwfW','z0PSAwO','rfvkuNu','DhbVEKK','mtC0nwrPAMfNDG','CMvWBgfJzufSBa','ru5gz20','BurPAwy','z0fgqKO','sKznsve','ufvIqNG','uhHgvKq','tKHoEhG','CMvXDwvZDfr5Ca','AxnbCNjHEq','E3VMRApMLOD9Fq','E0bNzxr3B3jSza','A2v5CW','t21grxq','A3LJuNO','vMH6AMG','vuLUC1q','t09yCLC','yxnZAxn0yw50','E3VNLkJMIlFPNidMSyj9Fq','y29UDgv4DerHDa','rujfs00','EhrFChjVzMLSzq','ufbRyKC','nJa4m3j5BezIyq','BwvZC2fNzxm','zxnyswm','DgvZDf9JB250zq','zMfSzuK','ntmYmKDzAejnAa','mtiXotjgEMrmDNe','rKvWzgS','B2rUu0e','Dg9tDhjPBMC','q25vwhu','uMnrANi','BxfwwfG','Df90ExbLx2nVBG','DefvBwy','E0bNzxr2yxi6oG','y0vys1m','E3T1C2vYFx0','yxbWBhK','zNzrD0y','C2vHCMnO','vhfHy1e','mtmYota0mNzcy0XlCW','yvrSuvK','CKP2B1e','CgXKEe8','ANvkCxy','zvLAAKK','tMrhEfi','zw5HyMXLza','BfzWDeO','AgLZDg9YEq','q2HNqNm','DhLWzq','vhH2rNi','DxnLCG','CwDxB04','DhjPz2DLCLDVCG','E0bZzxrNBg9Iyq','sKTwrfa','Cez2BLy','y29UDgv4Df9WCG','mtfzAfPyEuW','u0rfv0m','vKLtrxi','uKXhDei','D3DYu0q','wg5cu2G','t0XAEvm','DMfYoJO','zMLSDgvY','ywrK','svrbwNK','BgXTx3jLCxvLCW','sxvNzM4','CMvWBgfJzwrwyq','A0vdCKC','uMzIyK4','y2HHDe1LDgfKyq','Cvzhsvm','v1PKCuy','EujHA0q','mtbxwgjuBMO','E0bNzxrNBg9Iyq','yLfrz1i','CMvWBgfJzq','zw50CMLLCW','BgvUz3rO','tNrHru0','DhjPz2DLCG','vvj4Cvm','ruTqruS','u2r4zM4','Aw5JBhvKzxm','E3TNzxr2yxi6oG','tNHMC3G','su1MzgO','BMLsBK8','Ew1HBey','sMfhyxO','rwTqEKu','CM9Szq','sNPLv1m','DhjPBq','AvftC0q','qMjXvvC','B0jwBNq','wLvOwMy','BMfTzte','yKv0swu','EwvztM8','CffQz3y','Ee5yu0q','C3bSAxq','E3VKUjBNLyZKUABOP6BLJ5f9Fq','CMLHyMXLCW','DMfYAwfIBgvZ','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','ChvZAa','mtaYmdm0mZvHB2Lus3i','sePrs0q','C1DXAuK','A0Xxtxm','zgLUzg0','C3rYAw5N','EwPpzvy','rKnsB0K','vgr0Dxi','y29UC3rYDwn0BW','BMDPshO','phvZzxi+','ywT0Du8'];_0x81ec=function(){return _0x2570f9;};return _0x81ec();}export function buildPromptWithTrigger(_0x3d262c){const _0x2f07a9={'PxFVD':function(_0x108a38,_0x57a63b){return _0x108a38===_0x57a63b;},'mqVXX':function(_0x38b890,_0x4495e7,_0xb7845f,_0x5de27a){return _0x38b890(_0x4495e7,_0xb7845f,_0x5de27a);},'WuYyR':function(_0x3b5bfa,_0x2daded){return _0x3b5bfa||_0x2daded;},'tpozI':_0x238643(0x35e,0x33e,0x30f,0x364),'RITob':function(_0xd66cd,_0x56c484){return _0xd66cd===_0x56c484;},'GrqZr':_0x21d4a1(0x220,0x22b,0x22d,0x20f),'ZUhZf':function(_0xb65c68,_0x17ee5b,_0x470aa7){return _0xb65c68(_0x17ee5b,_0x470aa7);},'ChgBs':function(_0x4414ac,_0x5e7054){return _0x4414ac!==_0x5e7054;},'kycRz':'OLZyS','GNRGv':_0x238643(0x382,0x36a,0x315,0x3a4),'PUbBx':function(_0x44c409,_0xf799ea){return _0x44c409!==_0xf799ea;},'seueO':'bQrka','FEpdk':_0x21d4a1(0x2c0,0x286,0x2c6,0x252),'faleI':_0x238643(0x3f0,0x3d3,0x3a8,0x3b8),'BbqUW':_0x238643(0x3ea,0x3b7,0x3a0,0x3a0),'yjOeV':function(_0x2b0793,_0x2061c5){return _0x2b0793!==_0x2061c5;},'SDEWC':function(_0x551dd4,_0x370cc6){return _0x551dd4===_0x370cc6;},'gJlij':_0x238643(0x3b7,0x3a0,0x3cd,0x3d5),'EkPzE':'assistant','VISEr':function(_0x10f2ee,_0x5dfb7d){return _0x10f2ee(_0x5dfb7d);},'juJqv':function(_0x2f14f2,_0x5d354c,_0x1eac9e){return _0x2f14f2(_0x5d354c,_0x1eac9e);}};function _0x21d4a1(_0x2971fa,_0x39f96b,_0x29dd6e,_0x20466d){return _0x37cb(_0x39f96b-0x7f,_0x29dd6e);}const {requestType:_0x31a4d3,contextData:_0x1312fd}=_0x3d262c,_0x4d63c1=extension_settings[extensionName]?.[_0x21d4a1(0x256,0x225,0x1e8,0x216)+_0x21d4a1(0x1f9,0x1fd,0x1c7,0x1cc)+'figs']||{},_0x2e0604={};_0x2e0604[_0x238643(0x38f,0x370,0x365,0x3a6)+_0x21d4a1(0x274,0x273,0x29e,0x240)]='默认';const _0x5afe49=_0x4d63c1[_0x31a4d3]||_0x2e0604,_0x431280=_0x5afe49[_0x21d4a1(0x255,0x219,0x1d0,0x1e4)+_0x238643(0x408,0x3ca,0x3aa,0x3e3)]||'默认',_0x419d6a=extension_settings[extensionName]?.[_0x238643(0x395,0x34a,0x35a,0x2fb)+_0x238643(0x359,0x345,0x330,0x314)+'s']||{};function _0x238643(_0x1f399f,_0x252593,_0x42c53b,_0x5de15f){return _0x37cb(_0x252593-0x1d6,_0x1f399f);}const _0x57f175=_0x419d6a[_0x431280]||_0x419d6a[Object['keys'](_0x419d6a)[0xb*-0x22d+0x661+-0xe*-0x141]]||{},{context:context='',body:body='',worldBookContent:worldBookContent='',userDemand:userDemand=''}=_0x1312fd,_0x274ed0=[userDemand,context,body,worldBookContent]['filter'](Boolean)[_0x21d4a1(0x275,0x275,0x22f,0x226)]('\x0a'),_0x4ca628=[];if(_0x57f175[_0x21d4a1(0x21f,0x232,0x212,0x248)]&&Array['isArray'](_0x57f175['entries'])){if('MYYnS'!==_0x2f07a9[_0x238643(0x3f7,0x3d7,0x3b9,0x40b)])for(const _0x1c330e of _0x57f175['entries']){if(!_0x1c330e[_0x238643(0x389,0x364,0x363,0x36f)])continue;if(!_0x1c330e[_0x21d4a1(0x236,0x271,0x284,0x2bb)]||_0x2f07a9[_0x238643(0x390,0x3df,0x38f,0x3c4)](_0x1c330e[_0x21d4a1(0x2a4,0x271,0x282,0x244)][_0x238643(0x35a,0x39a,0x3d6,0x349)](),''))continue;if(_0x2f07a9[_0x21d4a1(0x241,0x270,0x2b3,0x2a4)](_0x1c330e[_0x21d4a1(0x297,0x276,0x242,0x22b)+'e'],_0x238643(0x3d4,0x38c,0x3d3,0x381))){if(_0x2f07a9['GrqZr']==='zQAZa'){const _0x38d8a3=_0xd8943d[_0x21d4a1(0x25f,0x243,0x291,0x296)]();return _0x4d8a60[_0x238643(0x38d,0x381,0x373,0x35c)+'ta']['variables'][_0x38d8a3]=_0x3497a3,_0x40048c&&_0x4e49d4[_0x21d4a1(0x1d0,0x223,0x1ec,0x210)](_0x21d4a1(0x229,0x278,0x256,0x292)+_0x38d8a3+'@}'),'';}else{if(!_0x2f07a9[_0x238643(0x37c,0x39e,0x3a0,0x36e)](checkTriggerWords,_0x1c330e[_0x238643(0x3b3,0x36c,0x350,0x318)+'ds'],_0x274ed0)){if(_0x2f07a9[_0x21d4a1(0x1dd,0x210,0x1d6,0x253)](_0x21d4a1(0x21c,0x220,0x235,0x240),_0x2f07a9[_0x21d4a1(0x256,0x290,0x2db,0x23d)]))_0xc74705['add'](_0x238643(0x3e9,0x3e4,0x407,0x406)+'var::'+_0x4e4f92+'@}');else continue;}}}const _0x26438d={};_0x26438d[_0x238643(0x380,0x398,0x393,0x3e6)]=_0x1c330e['role']||_0x2f07a9['GNRGv'],_0x26438d[_0x21d4a1(0x27a,0x271,0x281,0x281)]=_0x1c330e[_0x238643(0x3a1,0x3c8,0x3f8,0x3e8)],_0x4ca628[_0x238643(0x397,0x3a9,0x3fa,0x386)](_0x26438d);}else{if(!_0x139e04){const _0x4d188e={..._0x17f816};_0x4102e3=_0x4d188e;}else{if(_0x2f07a9[_0x238643(0x3f6,0x3df,0x405,0x41c)](_0x59879c['role'],_0x6719bc[_0x21d4a1(0x23e,0x241,0x239,0x20b)]))_0x32d6b6['content']=_0x128b83(_0x2fbb8d[_0x238643(0x411,0x3c8,0x384,0x3cb)],_0x36abb6[_0x21d4a1(0x243,0x271,0x251,0x2b5)]);else{_0x30747e[_0x21d4a1(0x216,0x252,0x22d,0x20e)](_0x57af0a);const _0xd7dede={..._0x5c2c33};_0x109a20=_0xd7dede;}}}}else{if(_0x57f175[_0x21d4a1(0x260,0x20f,0x1f9,0x22c)]&&Array[_0x238643(0x3fc,0x3e2,0x39b,0x394)](_0x57f175[_0x238643(0x31a,0x366,0x3b3,0x349)])){if(_0x2f07a9[_0x238643(0x3a0,0x3de,0x3f6,0x3bc)](_0x2f07a9['seueO'],_0x2f07a9['seueO']))return{..._0x9c0020,'text':_0xdb2251(_0x228f2d['text'],_0xcc326f,_0x43cbe6)};else for(const _0x38232f of _0x57f175['history']){if(_0x2f07a9[_0x21d4a1(0x1c7,0x1f7,0x1c2,0x207)]===_0x2f07a9[_0x21d4a1(0x1ac,0x1f4,0x235,0x205)])_0xf03d75['chatMetada'+'ta'][_0x21d4a1(0x245,0x250,0x26e,0x278)]={};else{if(_0x38232f[_0x238643(0x382,0x36a,0x388,0x32f)]&&_0x2f07a9['ChgBs'](_0x38232f[_0x21d4a1(0x222,0x213,0x266,0x235)][_0x21d4a1(0x220,0x243,0x240,0x229)](),'')){if(_0x2f07a9[_0x21d4a1(0x293,0x270,0x2a3,0x287)](_0x2f07a9[_0x21d4a1(0x21a,0x245,0x267,0x26e)],_0x2f07a9[_0x238643(0x39c,0x39c,0x3a6,0x3bb)])){const _0x4d8e19={};_0x4d8e19['role']=_0x238643(0x3aa,0x36a,0x3bb,0x3b4),_0x4d8e19[_0x238643(0x3f0,0x3c8,0x41d,0x40b)]=_0x38232f['user'],_0x4ca628['push'](_0x4d8e19);}else{if(!_0x1c3a16||!_0x1baa17[_0x238643(0x37d,0x3c8,0x3a8,0x3e0)])return _0x52b8b0;return{..._0x5a3ac7,'content':_0x2f07a9[_0x238643(0x39f,0x353,0x361,0x307)](_0x480ffd,_0x1ad6a1[_0x21d4a1(0x26d,0x271,0x291,0x266)],_0x49aa1e,_0x2df85a)};}}if(_0x38232f[_0x238643(0x2f4,0x341,0x2ec,0x375)]&&_0x2f07a9[_0x21d4a1(0x289,0x259,0x270,0x260)](_0x38232f['assistant'][_0x21d4a1(0x1f4,0x243,0x233,0x248)](),'')){if(_0x2f07a9[_0x21d4a1(0x1eb,0x21b,0x238,0x252)](_0x2f07a9[_0x238643(0x407,0x3d5,0x3af,0x3fd)],_0x238643(0x34d,0x3a0,0x386,0x36f))){const _0x5a276f={};_0x5a276f['role']=_0x2f07a9[_0x238643(0x3e0,0x397,0x39a,0x377)],_0x5a276f['content']=_0x38232f[_0x21d4a1(0x234,0x1ea,0x236,0x1c1)],_0x4ca628['push'](_0x5a276f);}else return _0x4ea35c&&_0x30c715[_0x238643(0x347,0x390,0x3a9,0x388)](_0x2dce5d)&&(_0x3277c8&&_0x3949c3[_0x21d4a1(0x203,0x223,0x1f8,0x1f1)](_0x1cc51c)),_0x21c234['replaceAll'](_0x221622,_0x2f07a9['WuYyR'](_0x4536e8,''));}}}}}const _0x1f4692=_0x2f07a9[_0x21d4a1(0x24b,0x21c,0x21f,0x1d4)](mergeAdjacentMessages,_0x4ca628),{messages:_0x327ea9,replacedVariables:_0x5ebda7}=_0x2f07a9[_0x21d4a1(0x1e5,0x20a,0x206,0x1b9)](replaceAllPlaceholders,_0x1f4692,_0x1312fd);return _0x327ea9;}export function getProcessedPrompt(_0x1b8872,_0x516280){const _0x4c1724={'ENFgm':function(_0xc44453,_0x34411d){return _0xc44453(_0x34411d);}};function _0xd16f08(_0x96af4e,_0x3feb6d,_0x32208d,_0x190ef1){return _0x37cb(_0x32208d-0x211,_0x190ef1);}const _0xd64415={};_0xd64415[_0xd16f08(0x426,0x3fc,0x41c,0x426)+'e']=_0x1b8872;function _0x322d46(_0x488397,_0x2207d6,_0x54d452,_0x216a27){return _0x37cb(_0x488397-0x30c,_0x216a27);}return _0xd64415[_0x322d46(0x479,0x493,0x4b6,0x443)+'a']=_0x516280,_0x4c1724[_0x322d46(0x510,0x550,0x4ff,0x506)](buildPromptWithTrigger,_0xd64415);}