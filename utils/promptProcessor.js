(function(_0xd2c12c,_0x54826b){function _0x2c9fc2(_0xae23be,_0x244b3a,_0x2a947d,_0x3a4c28){return _0x3cfc(_0x3a4c28- -0x15,_0x244b3a);}const _0x2a19fc=_0xd2c12c();function _0x1228d3(_0x20f3e3,_0x1b4d05,_0x44fbcb,_0x2437a7){return _0x3cfc(_0x20f3e3-0x16e,_0x44fbcb);}while(!![]){try{const _0x29a2db=parseInt(_0x2c9fc2(0x1ad,0x1c0,0x180,0x1a8))/(-0x7*0x3ce+0x1b79+-0xd6)+-parseInt(_0x2c9fc2(0x1c5,0x203,0x1d8,0x1c8))/(-0x6*0x65e+-0x1*-0xf92+0x2a*0x8a)+-parseInt(_0x1228d3(0x323,0x337,0x311,0x30e))/(0x171e+-0x2*0x4b1+-0x3*0x493)+parseInt(_0x2c9fc2(0x1ef,0x1f7,0x227,0x203))/(-0x19e5+0x42d+0x15bc)+-parseInt(_0x2c9fc2(0x237,0x200,0x214,0x1ff))/(-0x2505+0x5d*-0x12+0x2b94)*(-parseInt(_0x2c9fc2(0x231,0x24e,0x217,0x20e))/(-0xc8*0x32+-0x240a*0x1+-0x10*-0x4b2))+-parseInt(_0x1228d3(0x31b,0x316,0x327,0x345))/(0x7b1+0x1bd8+-0x2382)*(parseInt(_0x2c9fc2(0x1c7,0x209,0x1e9,0x20a))/(0x1d4*0x4+0x18*0xd+-0x880))+-parseInt(_0x1228d3(0x348,0x329,0x349,0x303))/(0x1807+-0x100e+-0x7f*0x10);if(_0x29a2db===_0x54826b)break;else _0x2a19fc['push'](_0x2a19fc['shift']());}catch(_0x5db452){_0x2a19fc['push'](_0x2a19fc['shift']());}}}(_0x377b,0xf422d+-0xfc17c+0xabf41));const _0x14faa9=(function(){let _0x2ff2cd=!![];return function(_0x16297a,_0x400add){const _0x1ef245=_0x2ff2cd?function(){function _0x2fc5e6(_0x3e8bdb,_0x30146c,_0x356988,_0x17d26e){return _0x3cfc(_0x356988- -0x23a,_0x30146c);}if(_0x400add){const _0x410d3e=_0x400add[_0x2fc5e6(-0x5f,-0x3a,-0x2e,-0x61)](_0x16297a,arguments);return _0x400add=null,_0x410d3e;}}:function(){};return _0x2ff2cd=![],_0x1ef245;};}()),_0x47e36e=_0x14faa9(this,function(){const _0x37a333={};function _0x1f4d4d(_0x72d65d,_0xbb7c40,_0x58dde8,_0x4977ff){return _0x3cfc(_0x4977ff- -0x383,_0xbb7c40);}function _0x256e26(_0x44110e,_0x4e9323,_0x38ae9d,_0x1570b0){return _0x3cfc(_0x1570b0-0x3c2,_0x4e9323);}_0x37a333[_0x256e26(0x5bd,0x5f1,0x599,0x5d0)]='(((.+)+)+)'+'+$';const _0x44ae0b=_0x37a333;return _0x47e36e['toString']()[_0x256e26(0x568,0x56f,0x5c0,0x5a5)](_0x44ae0b[_0x256e26(0x605,0x58e,0x59d,0x5d0)])['toString']()['constructo'+'r'](_0x47e36e)['search'](_0x44ae0b[_0x1f4d4d(-0x148,-0x148,-0x19f,-0x175)]);});_0x47e36e();import{extension_settings}from'../../../../extensions.js';function _0x3cfc(_0x46e5b8,_0x544893){const _0x4170c2=_0x377b();return _0x3cfc=function(_0x47599f,_0x5a3910){_0x47599f=_0x47599f-(0x2d*0x2a+-0xedc+0x2*0x48b);let _0x342bbc=_0x4170c2[_0x47599f];if(_0x3cfc['kEbBZT']===undefined){var _0x4caafd=function(_0x23391e){const _0x2ed837='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x7a0b14='',_0x23d024='',_0x20d763=_0x7a0b14+_0x4caafd;for(let _0x32b167=0xc3b+0x2e5+-0xf20,_0x215777,_0x4fff9d,_0x11c845=0x2*-0xc51+-0x270b+-0x1*-0x3fad;_0x4fff9d=_0x23391e['charAt'](_0x11c845++);~_0x4fff9d&&(_0x215777=_0x32b167%(0x5bf*-0x6+-0x11*-0xff+-0x5*-0x383)?_0x215777*(-0xb83+-0x66f+0x22*0x89)+_0x4fff9d:_0x4fff9d,_0x32b167++%(0x1eef*-0x1+0x897+0xb2e*0x2))?_0x7a0b14+=_0x20d763['charCodeAt'](_0x11c845+(-0xce9*0x1+-0x13*0x203+0x106*0x32))-(0x1844+0x18a4+-0x30de)!==0xa77+0x1e5*0x8+0x3a9*-0x7?String['fromCharCode'](-0x7*0x31c+-0x149*-0x1d+0x4d6*-0x3&_0x215777>>(-(-0xb5b+-0x8a*-0x2e+-0xd6f)*_0x32b167&0x1d47+0x147*0xd+-0x2ddc)):_0x32b167:-0x2499+0x2b*0x3c+0x1a85){_0x4fff9d=_0x2ed837['indexOf'](_0x4fff9d);}for(let _0x3a8801=0x1931*0x1+-0x1d7d+-0x6e*-0xa,_0x11d85a=_0x7a0b14['length'];_0x3a8801<_0x11d85a;_0x3a8801++){_0x23d024+='%'+('00'+_0x7a0b14['charCodeAt'](_0x3a8801)['toString'](0x11*0x6f+0x2*0xaad+-0xfd*0x1d))['slice'](-(0x152*-0x1d+-0x19f9*0x1+0x4045));}return decodeURIComponent(_0x23d024);};_0x3cfc['vbFOxN']=_0x4caafd,_0x46e5b8=arguments,_0x3cfc['kEbBZT']=!![];}const _0x4f8557=_0x4170c2[0x16e3+-0x762*0x3+-0xbd],_0x1e94ea=_0x47599f+_0x4f8557,_0x1e6493=_0x46e5b8[_0x1e94ea];if(!_0x1e6493){const _0x599c67=function(_0x25cafe){this['DYHmks']=_0x25cafe,this['cBiqqt']=[-0x1793+0xbf*0x17+0x66b,-0xff2*0x1+0x1f1c*0x1+0x2*-0x795,-0xed6+-0x7*-0x110+0x766],this['twkXTw']=function(){return'newState';},this['nupLip']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['NwlQUk']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x599c67['prototype']['lKtEMC']=function(){const _0x248417=new RegExp(this['nupLip']+this['NwlQUk']),_0x5e5d31=_0x248417['test'](this['twkXTw']['toString']())?--this['cBiqqt'][-0x18a6+0x3*0x611+0x674]:--this['cBiqqt'][-0x1fd7*0x1+-0x70f+0x1373*0x2];return this['JSZuwP'](_0x5e5d31);},_0x599c67['prototype']['JSZuwP']=function(_0x27f298){if(!Boolean(~_0x27f298))return _0x27f298;return this['uIwgnx'](this['DYHmks']);},_0x599c67['prototype']['uIwgnx']=function(_0x420ef9){for(let _0x2f4a57=0x3e9+-0x2c2*-0x2+-0x96d,_0x21ae67=this['cBiqqt']['length'];_0x2f4a57<_0x21ae67;_0x2f4a57++){this['cBiqqt']['push'](Math['round'](Math['random']())),_0x21ae67=this['cBiqqt']['length'];}return _0x420ef9(this['cBiqqt'][0xc5f*-0x1+-0x2*0xbd5+0x2409]);},new _0x599c67(_0x3cfc)['lKtEMC'](),_0x342bbc=_0x3cfc['vbFOxN'](_0x342bbc),_0x46e5b8[_0x1e94ea]=_0x342bbc;}else _0x342bbc=_0x1e6493;return _0x342bbc;},_0x3cfc(_0x46e5b8,_0x544893);}import{extensionName}from'./config.js';function _0x377b(){const _0x369c94=['z2LMBxm','CMvWBgfJzufSBa','CfvvBNi','AgLZDg9YEq','BwfW','uvzwrhi','DK9SEeW','CMvXDwvZDfr5Ca','Dg9tDhjPBMC','mJqZntuZmxzxBK9iuW','D2fgzNm','ugf5Agm','ALbRyvm','zfjlAfy','C3rYAw5NAwz5','qLv5Cue','Dgv4Da','mtCWmJe5nhjrtM1mra','q0jmENy','zMLSDgvY','zMLUywXdB3vUDa','y0DNzKm','teHfvu0','rLvJDhK','kcGOlISPkYKRkq','mta0mtyWmKTNDfrTtG','B2zPBgu','B2jQzwn0','AM1Ps0S','z0Tjr1K','AxzxDeC','rhzgv0C','yKXUCg0','C3rYAw5N','A1ziEgO','phvZzxi+','DxnLCG','u2rxq3G','D3joBwm','Bwf0y2HbBgW','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','D05Jq0W','vMr5Cue','CeTRvMK','E3VNLkJMIlFPNidMSyj9Fq','ywrK','tLvTDgG','BgvUz3rO','BuveB0S','q2TVqK4','yxn5A1C','BMfTzte','AvzACge','5A6m5OIqoG','ntm1ody3mKHAvNDIzG','E3T1C2vYFx0','q3DRt00','mtq3nJqYnMjWyKPUCa','CMLHyMXLCW','C1rIu2e','AgjXEwS','Ae5xt28','wLvPD0e','C2vHCMnO','zw50CMLLC0nVDq','CgDXuKW','zevrte4','thHhwhG','uvrYz0u','suf3tvO','D1vwzKu','DhjPz2DLCK1Vza','BvPvDxG','qNLrCwm','wKTRwhi','y29UDgv4Df9WCG','A2v5CW','tKTiAM0','DhjPBq','BNb5wKy','DhjPz2DLCG','rM9iEuq','CM9Szq','thHnsxe','uNrfuuC','BwvYz2vKq291BG','zw50CMLLCW','sgHMzfm','t0T2vfm','y295z3K','wfntsvC','u2HtEgO','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','wwHHug0','E3TNzxr2yxi6oG','BwvZC2fNzxm','DhLWzq','Df90ExbLx2nVBG','wffPsKy','ELDxwKi','ww9hBMe','w3bYB21WDfbYBW','zKfQq3u','Aw5JBhvKzxm','yxbWBhK','y29UDgvUDa','zNLcwhC','C3bSAxq','De9fsLO','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','E3VMRApMLOD9Fq','zMLNCW','nwf3wNP4yq','vunJEhG','Eejtr1u','EvnVANm','mZmWnZa0ogrmEMTXzG','qLzRugG','BwrOs0i','yxnZAxn0yw50','DKXPvxm','Bg9N','yMriB3e','oeDZyMjLsW','u3nVr1a','ChvZAa','z2L1EMu','nJmXmZKWofnOAuLMrW','z2HeBxG','E3VKUiRKUiVMLOD9Fq','AM9PBG','vxLkCuW','rvrVruu','A3n5rKu','vhPsv3O','y29UDgv4DerHDa','uKPQquO','u2v2tMK'];_0x377b=function(){return _0x369c94;};return _0x377b();}import{getContext}from'../../../../st-context.js';export function checkTriggerWords(_0x27ae4e,_0x6c8e3f){const _0xbdb184={};_0xbdb184[_0x48f029(-0x30,-0x1d,-0x2e,-0x2b)]=function(_0x184d36,_0xf3e0d8){return _0x184d36||_0xf3e0d8;};const _0x54eadf=_0xbdb184;if(_0x54eadf['pUUnr'](!_0x27ae4e,!_0x6c8e3f))return![];function _0x48f029(_0x338042,_0x118286,_0x37b3c8,_0x63ccd5){return _0x3cfc(_0x37b3c8- -0x1d4,_0x63ccd5);}function _0x20a34e(_0xe9575e,_0x3cb958,_0x2f2a67,_0x53a675){return _0x3cfc(_0x3cb958- -0x1a9,_0x2f2a67);}const _0x2be16e=_0x27ae4e[_0x20a34e(0x33,0x66,0x7f,0xa1)](',')[_0x20a34e(-0x2b,-0x1,-0x1,-0x46)](_0x57237a=>_0x57237a[_0x20a34e(0x8a,0x49,0x3b,0x81)]())[_0x20a34e(-0x26,0xe,0x20,0x51)](_0x213ba0=>_0x213ba0);if(_0x2be16e['length']===0x1954+-0x1*0x43f+-0x1515)return![];for(const _0x2fb3c1 of _0x2be16e){if(_0x6c8e3f['includes'](_0x2fb3c1))return!![];}return![];}export function mergeAdjacentMessages(_0x2857fd){function _0x51e27f(_0x4a0aa7,_0x22dd3b,_0x13e34f,_0x1856ff){return _0x3cfc(_0x13e34f- -0xa1,_0x22dd3b);}const _0x2106c7={'xBSGU':function(_0x5646c9,_0x12545d){return _0x5646c9!==_0x12545d;},'bMvKj':_0x51e27f(0x1a3,0x15b,0x17a,0x1af),'vQybS':_0x3dd142(0x8b,0x70,0x84,0xa6),'wUVfE':function(_0x14954e,_0x16e734){return _0x14954e===_0x16e734;},'MpsfM':function(_0xf8c57c,_0x1860a4,_0x22b9de){return _0xf8c57c(_0x1860a4,_0x22b9de);},'fAjCu':function(_0x58b134,_0x1e0d0d){return _0x58b134===_0x1e0d0d;},'RtEQG':'syIpe','ZUiwA':_0x51e27f(0x1a0,0x1ab,0x17d,0x1be),'EToEE':_0x3dd142(0xae,0x11d,0xc6,0xdc),'ksyFE':function(_0x131c7d,_0x5237a7,_0x1e24d6){return _0x131c7d(_0x5237a7,_0x1e24d6);},'RAcLC':_0x51e27f(0x15b,0x136,0x146,0x181)};if(!_0x2857fd||_0x2106c7[_0x3dd142(0xc7,0x116,0xba,0xe8)](_0x2857fd[_0x51e27f(0x115,0x16c,0x132,0xf0)],-0x1766+-0x11d3+0x2939)){if(_0x2106c7[_0x51e27f(0x12d,0x160,0x169,0x191)](_0x2106c7[_0x3dd142(0xaa,0xd5,0xce,0xd6)],_0x2106c7[_0x51e27f(0x110,0x17e,0x141,0x142)])){if(_0x5f3160[_0x51e27f(0x14e,0x14a,0x127,0x146)]&&_0x2106c7[_0x3dd142(0xb8,0xb6,0x114,0xf4)](_0x2d4622[_0x3dd142(0xcb,0x8a,0xba,0xa6)][_0x51e27f(0x172,0x165,0x151,0x15f)](),'')){const _0x115e83={};_0x115e83[_0x51e27f(0x156,0x151,0x155,0x181)]=_0x3dd142(0x62,0xa7,0xcb,0xa6),_0x115e83[_0x51e27f(0x182,0x198,0x16c,0x14e)]=_0xcf6782[_0x51e27f(0x118,0x104,0x127,0x11e)],_0x38d859[_0x3dd142(0xde,0x119,0xd1,0xff)](_0x115e83);}if(_0x535fc2[_0x51e27f(0x161,0x16a,0x17a,0x1ad)]&&_0x31bbfc[_0x51e27f(0x181,0x1ba,0x17a,0x148)][_0x3dd142(0x113,0xba,0x104,0xd0)]()!==''){const _0x307712={};_0x307712[_0x51e27f(0x18e,0x115,0x155,0x170)]=_0x2106c7['bMvKj'],_0x307712[_0x51e27f(0x16e,0x163,0x16c,0x19c)]=_0x4ba5d6[_0x51e27f(0x149,0x152,0x17a,0x17d)],_0x5a26d6[_0x51e27f(0x14b,0x188,0x180,0x188)](_0x307712);}}else return[];}const _0xc15486=[];let _0x1787ce=null;for(const _0x479bfd of _0x2857fd){if(!_0x1787ce){if(_0x2106c7[_0x51e27f(0x15c,0x162,0x175,0x16b)](_0x51e27f(0x149,0x185,0x15d,0x16e),_0x2106c7[_0x3dd142(0xbe,0x76,0x41,0x7c)])){const _0x4e3f15={};_0x4e3f15[_0x3dd142(0xad,0xe3,0xd6,0xd4)]=_0x2106c7['vQybS'],_0x4e3f15['content']=_0x424b2c['user'],_0x26103a[_0x51e27f(0x199,0x1b5,0x180,0x16e)](_0x4e3f15);}else{const _0x4e7125={..._0x479bfd};_0x1787ce=_0x4e7125;}}else{if(_0x2106c7[_0x3dd142(0xe7,0xf8,0x83,0xc8)](_0x1787ce[_0x51e27f(0x13e,0x183,0x155,0x17a)],_0x479bfd[_0x51e27f(0x157,0x163,0x155,0x199)]))_0x1787ce[_0x51e27f(0x159,0x12f,0x16c,0x128)]=_0x2106c7[_0x3dd142(0x92,0x92,0x84,0x7d)](mergeContent,_0x1787ce[_0x3dd142(0xa6,0xff,0xd0,0xeb)],_0x479bfd[_0x3dd142(0xe5,0x103,0x11e,0xeb)]);else{_0xc15486[_0x51e27f(0x194,0x1a2,0x180,0x1b1)](_0x1787ce);const _0xd8537f={..._0x479bfd};_0x1787ce=_0xd8537f;}}}function _0x3dd142(_0x1f005b,_0x4558f2,_0x2e6ee5,_0x1308a6){return _0x3cfc(_0x1308a6- -0x122,_0x1f005b);}if(_0x1787ce){if(_0x2106c7[_0x3dd142(0x12e,0xfe,0x109,0xf4)](_0x2106c7['RAcLC'],_0x51e27f(0x145,0x149,0x146,0x144))){if(!_0x536b87){const _0x3f760e={..._0x564d88};_0xbb2493=_0x3f760e;}else{if(_0x2106c7[_0x3dd142(0xfd,0xa7,0xe1,0xc8)](_0x32a32e['role'],_0x52c784['role']))_0x47ba4a[_0x3dd142(0x108,0x120,0x116,0xeb)]=_0x2106c7['MpsfM'](_0x1be5fd,_0x586bec['content'],_0xc83374[_0x3dd142(0xa6,0x11b,0xf0,0xeb)]);else{_0x38aec5[_0x3dd142(0xfb,0x10b,0x11f,0xff)](_0x49bfca);const _0x377779={..._0x3bfbf7};_0x4963d6=_0x377779;}}}else _0xc15486[_0x3dd142(0x121,0xcf,0xec,0xff)](_0x1787ce);}return _0xc15486;}function mergeContent(_0x21a6bb,_0xb3876e){const _0x5a3d27={'ghDmx':function(_0x577e04,_0x11351d){return _0x577e04===_0x11351d;},'LHEUM':'string','tOEJZ':function(_0x2fc55d,_0x3bd945){return _0x2fc55d+_0x3bd945;},'sTbSa':function(_0x4ea3e3,_0xf9ac4a){return _0x4ea3e3(_0xf9ac4a);},'DvFWG':_0x5c23fa(0xd8,0x14b,0x10a,0x107),'dEQLN':function(_0x4847d5,_0x133358){return _0x4847d5+_0x133358;},'ySojs':function(_0x20567e,_0x4062b0){return _0x20567e(_0x4062b0);},'zWWZB':_0x4f8016(-0x217,-0x242,-0x23c,-0x20f)};if(_0x5a3d27[_0x4f8016(-0x1a7,-0x1d4,-0x1a9,-0x19f)](typeof _0x21a6bb,_0x5a3d27[_0x5c23fa(0x122,0xbe,0xfa,0x107)])&&typeof _0xb3876e===_0x5c23fa(0x107,0x13c,0x105,0x11c)){if(_0x5a3d27[_0x5c23fa(0xf0,0xdd,0x103,0x127)]===_0x5a3d27[_0x5c23fa(0xfb,0x13b,0x103,0xf4)])return _0x5a3d27[_0x5c23fa(0x172,0x136,0x150,0x189)](_0x5a3d27[_0x4f8016(-0x1e5,-0x203,-0x221,-0x1fa)](_0x21a6bb,'\x0a'),_0xb3876e);else{if(_0x5a3d27[_0x4f8016(-0x1a7,-0x1e9,-0x1a6,-0x174)](typeof _0x38c3cf,_0x5a3d27[_0x4f8016(-0x211,-0x230,-0x1d8,-0x251)])&&_0x5a3d27[_0x4f8016(-0x1a7,-0x1d4,-0x178,-0x19d)](typeof _0x20840c,_0x4f8016(-0x206,-0x22e,-0x1eb,-0x1df)))return _0x5a3d27[_0x5c23fa(0x14d,0x142,0x150,0x164)](_0x5a3d27['tOEJZ'](_0x53e828,'\x0a'),_0x3c2325);const _0x1b64c8=_0xcefda8(_0x119add),_0x3b6230=_0x5a3d27[_0x4f8016(-0x1ec,-0x1df,-0x1f7,-0x1ee)](_0x45e6c7,_0x20c49d),_0x319191={};return _0x319191[_0x5c23fa(0x183,0x11f,0x144,0x163)]='text',_0x319191[_0x5c23fa(0xed,0x108,0xf4,0x101)]='\x0a',[..._0x1b64c8,_0x319191,..._0x3b6230];}}const _0x2c7727=_0x5a3d27[_0x5c23fa(0x18c,0x18f,0x157,0x13e)](normalizeToArray,_0x21a6bb),_0x565945=_0x5a3d27[_0x4f8016(-0x1ec,-0x1ec,-0x1e7,-0x1da)](normalizeToArray,_0xb3876e);function _0x5c23fa(_0x686c87,_0x55f4cb,_0x87827f,_0x2c4fdd){return _0x3cfc(_0x87827f- -0xc0,_0x2c4fdd);}function _0x4f8016(_0x1ce166,_0x2f061b,_0x126379,_0x16a8fb){return _0x3cfc(_0x1ce166- -0x3cb,_0x16a8fb);}const _0x5ccfc9={};return _0x5ccfc9[_0x4f8016(-0x1c7,-0x18d,-0x1e6,-0x208)]=_0x5a3d27[_0x4f8016(-0x1c4,-0x1f2,-0x198,-0x1dd)],_0x5ccfc9[_0x4f8016(-0x217,-0x256,-0x1d6,-0x201)]='\x0a',[..._0x2c7727,_0x5ccfc9,..._0x565945];}function normalizeToArray(_0x5f1e37){const _0x26a22b={};_0x26a22b[_0x671a5b(0x344,0x344,0x340,0x327)]=_0x1ac0f7(0x35a,0x345,0x36d,0x32e),_0x26a22b[_0x1ac0f7(0x2ee,0x2d8,0x2f2,0x2bb)]=_0x671a5b(0x331,0x34b,0x328,0x336);function _0x1ac0f7(_0x1e61b2,_0x1b110e,_0x24e251,_0x3e502e){return _0x3cfc(_0x1e61b2-0x13f,_0x24e251);}_0x26a22b['SdWCx']=_0x671a5b(0x34f,0x33a,0x391,0x376),_0x26a22b['wNcCL']=_0x1ac0f7(0x2f3,0x2b1,0x2f6,0x2b8);function _0x671a5b(_0x3bc012,_0x5b279b,_0x3e5a51,_0x48a652){return _0x3cfc(_0x3bc012-0x194,_0x48a652);}_0x26a22b['VdyqA']=function(_0x2b90df,_0x2f82e7){return _0x2b90df||_0x2f82e7;};const _0x542d9c=_0x26a22b;if(Array['isArray'](_0x5f1e37)){if(_0x542d9c[_0x671a5b(0x343,0x370,0x338,0x33a)]!==_0x542d9c[_0x671a5b(0x35d,0x322,0x365,0x382)])return _0x5f1e37;else{const _0x9b5feb={};_0x9b5feb[_0x671a5b(0x38a,0x386,0x3ca,0x367)]=_0x542d9c[_0x1ac0f7(0x2ef,0x2df,0x324,0x317)],_0x9b5feb['content']=_0x3f2178[_0x671a5b(0x3af,0x3b4,0x3dc,0x3eb)],_0x333432[_0x671a5b(0x3b5,0x3b7,0x3b6,0x3be)](_0x9b5feb);}}return[{'type':_0x542d9c[_0x671a5b(0x361,0x394,0x395,0x380)],'text':_0x542d9c[_0x1ac0f7(0x30d,0x303,0x2fa,0x348)](_0x5f1e37,'')}];}export function replacePlaceholder(_0x277942,_0x2f6095,_0x2a5957,_0x4457db){const _0x3e4126={'OKvTS':function(_0x587aa0,_0x3ac644){return _0x587aa0(_0x3ac644);},'fTljq':function(_0x4b7c9e,_0x429515){return _0x4b7c9e===_0x429515;},'hbqyk':_0x419c0e(0x439,0x479,0x479,0x458),'CBLzv':function(_0x59ca3d,_0x5e0881){return _0x59ca3d!==_0x5e0881;},'IAwMZ':_0x419c0e(0x442,0x45d,0x453,0x424),'RJjAJ':_0x54d14b(0x261,0x284,0x266,0x253),'bLnpm':function(_0x4647a2,_0x13c121){return _0x4647a2===_0x13c121;},'cGgfC':_0x419c0e(0x476,0x495,0x47b,0x494),'ShSxj':function(_0x418050,_0x236a04){return _0x418050||_0x236a04;},'HhfdS':function(_0x4c650b,_0x9d6a3a){return _0x4c650b!==_0x9d6a3a;},'NKHjm':_0x419c0e(0x446,0x462,0x436,0x484),'BVkPh':function(_0x5e1a49,_0x23f03a){return _0x5e1a49===_0x23f03a;},'SsoGP':_0x54d14b(0x2ad,0x271,0x282,0x299),'wrdTk':function(_0x352b92,_0x459a32){return _0x352b92===_0x459a32;},'dRKhV':_0x419c0e(0x480,0x4bc,0x47b,0x48b),'xwSOu':function(_0x46e9eb,_0x2c8d3d,_0x29ab66,_0x3d0fd0,_0x40f724){return _0x46e9eb(_0x2c8d3d,_0x29ab66,_0x3d0fd0,_0x40f724);}};function _0x54d14b(_0x4a749c,_0x1ae17a,_0x5887ce,_0x3405db){return _0x3cfc(_0x1ae17a-0xb2,_0x4a749c);}if(_0x3e4126['fTljq'](typeof _0x277942,_0x3e4126[_0x419c0e(0x469,0x494,0x4d7,0x4c4)])){if(_0x3e4126[_0x419c0e(0x48c,0x46a,0x428,0x4a1)](_0x3e4126[_0x54d14b(0x2cd,0x29b,0x2dd,0x25d)],_0x3e4126[_0x54d14b(0x255,0x254,0x213,0x231)])){if(_0x2a5957&&_0x277942[_0x54d14b(0x2de,0x2bd,0x2b9,0x2f2)](_0x2f6095)){if(_0x4457db){if(_0x3e4126[_0x419c0e(0x4ba,0x478,0x437,0x48a)](_0x3e4126[_0x54d14b(0x278,0x26b,0x268,0x262)],'hNWOo'))_0x4457db[_0x419c0e(0x4a9,0x485,0x476,0x48c)](_0x2f6095);else{const _0x4811ba={};return _0x4811ba['requestTyp'+'e']=_0x8d4988,_0x4811ba[_0x54d14b(0x248,0x253,0x287,0x227)+'a']=_0x43e137,_0x3e4126[_0x419c0e(0x4e8,0x4b0,0x4b9,0x4df)](_0x3db7af,_0x4811ba);}}}return _0x277942[_0x419c0e(0x470,0x459,0x495,0x460)](_0x2f6095,_0x3e4126[_0x54d14b(0x2dc,0x2b1,0x29e,0x2d3)](_0x2a5957,''));}else return _0x5364a1;}function _0x419c0e(_0x300d3e,_0x40fdd3,_0x290f73,_0x39d6bb){return _0x3cfc(_0x40fdd3-0x2b4,_0x300d3e);}if(Array['isArray'](_0x277942)){if(_0x3e4126[_0x54d14b(0x2e5,0x2ad,0x2b9,0x27e)](_0x54d14b(0x234,0x260,0x28b,0x27a),_0x3e4126[_0x419c0e(0x4ae,0x4a5,0x46d,0x4dc)]))_0x2fb41f[_0x303804]=_0x2dfa8b(_0x33c98f[_0x333d88],_0x8bd0a7,_0x5d3c21,_0x4f33bf);else return _0x277942[_0x54d14b(0x218,0x25a,0x246,0x298)](_0x1346b0=>replacePlaceholder(_0x1346b0,_0x2f6095,_0x2a5957,_0x4457db));}if(_0x277942&&_0x3e4126[_0x54d14b(0x2b6,0x2cb,0x2e4,0x286)](typeof _0x277942,_0x3e4126[_0x419c0e(0x514,0x4d4,0x4f6,0x4b5)])){const _0x3bc1af={};for(const _0x47cba0 in _0x277942){if(_0x3e4126['wrdTk'](_0x54d14b(0x28a,0x25c,0x23d,0x24f),_0x3e4126[_0x54d14b(0x23f,0x263,0x222,0x285)]))return![];else _0x3bc1af[_0x47cba0]=_0x3e4126['xwSOu'](replacePlaceholder,_0x277942[_0x47cba0],_0x2f6095,_0x2a5957,_0x4457db);}return _0x3bc1af;}return _0x277942;}export function replaceAllPlaceholders(_0x3bbb48,_0x3e8d58){const _0x586cd8={'ZKkXr':function(_0x2cd88c,_0xa8c950,_0x2c6e0f,_0x2c6edf,_0x2b3f50){return _0x2cd88c(_0xa8c950,_0x2c6e0f,_0x2c6edf,_0x2b3f50);},'EvjNq':function(_0x14e894,_0x3df75d){return _0x14e894!==_0x3df75d;},'Tebkd':_0x2180a2(0x385,0x3b2,0x356,0x35d),'etVsO':function(_0xba5824){return _0xba5824();},'ECLLD':function(_0x4618ea,_0x1710bf){return _0x4618ea===_0x1710bf;},'yNlIK':_0x2180a2(0x395,0x3cd,0x3a7,0x375),'ffMla':_0x2180a2(0x383,0x3c3,0x371,0x346),'ivWtG':_0x2180a2(0x398,0x3ca,0x370,0x3a0),'XrYBn':_0x2180a2(0x384,0x3a8,0x34c,0x3a7),'mdhKB':_0x2180a2(0x3e2,0x421,0x3f3,0x3ff),'FnlQA':_0x2180a2(0x3cf,0x39f,0x3dd,0x3f5),'ByQqc':_0x2180a2(0x3ce,0x3ab,0x3fc,0x3fe),'BUyqA':_0x2180a2(0x3bd,0x3dd,0x397,0x3f5)+'}}','dpAaq':function(_0x17399b,_0x1a6f1b,_0x331194,_0xf3fc4b,_0x52a6dd){return _0x17399b(_0x1a6f1b,_0x331194,_0xf3fc4b,_0x52a6dd);},'jmiKK':_0x2180a2(0x38d,0x36e,0x3c6,0x34e),'CwkOM':function(_0xd7fee7,_0x1f6de8){return _0xd7fee7>_0x1f6de8;},'pgqRL':function(_0x2dcf55,_0x5dd414){return _0x2dcf55!==_0x5dd414;},'FoHyD':function(_0x5bea7a,_0x44e909){return _0x5bea7a===_0x44e909;},'npyZF':'mEDoK'},{context:context='',body:body='',worldBookContent:worldBookContent='',variables:variables={},userDemand:userDemand='',characterListText:characterListText='',outfitEnableListText:outfitEnableListText='',commonCharacterListText:commonCharacterListText=''}=_0x3e8d58,_0x4bfe1c=new Set();let _0x35c839=_0x3bbb48;function _0x2180a2(_0x5616db,_0x4a8b86,_0x2216ed,_0x50e01e){return _0x3cfc(_0x5616db-0x1bd,_0x2216ed);}const _0x339a3e=_0x586cd8['etVsO'](getContext),_0x55eb2c=_0x339a3e?.[_0x366ecc(0x4a9,0x4a0,0x4eb,0x477)]||'';let _0x1d6a9e=worldBookContent;if(_0x1d6a9e){if(_0x586cd8['ECLLD'](_0x586cd8['yNlIK'],_0x586cd8['ffMla'])){const _0x18ce8c={};for(const _0x4b312a in _0x2d2f3c){_0x18ce8c[_0x4b312a]=_0x586cd8[_0x366ecc(0x4c0,0x4bf,0x481,0x4bf)](_0x43be62,_0x5a763a[_0x4b312a],_0x12746b,_0x5d69a3,_0x36bf43);}return _0x18ce8c;}else _0x1d6a9e=_0x1d6a9e['replaceAll'](_0x586cd8[_0x2180a2(0x37f,0x35b,0x370,0x387)],_0x55eb2c),_0x1d6a9e=_0x1d6a9e[_0x366ecc(0x477,0x490,0x497,0x476)](_0x586cd8['XrYBn'],_0x55eb2c);}_0x35c839=replacePlaceholder(_0x35c839,_0x586cd8[_0x2180a2(0x3d7,0x3f3,0x3bb,0x394)],context,_0x4bfe1c),_0x35c839=_0x586cd8[_0x2180a2(0x3ab,0x3a6,0x3be,0x377)](replacePlaceholder,_0x35c839,'{{世界书触发}}',_0x1d6a9e,_0x4bfe1c),_0x35c839=_0x586cd8['ZKkXr'](replacePlaceholder,_0x35c839,_0x586cd8['FnlQA'],body,_0x4bfe1c),_0x35c839=replacePlaceholder(_0x35c839,_0x586cd8[_0x366ecc(0x4bf,0x485,0x47b,0x489)],characterListText,_0x4bfe1c),_0x35c839=_0x586cd8[_0x366ecc(0x4c0,0x490,0x4ab,0x4ff)](replacePlaceholder,_0x35c839,_0x586cd8[_0x366ecc(0x485,0x4c7,0x46f,0x45d)],outfitEnableListText,_0x4bfe1c),_0x35c839=_0x586cd8['dpAaq'](replacePlaceholder,_0x35c839,_0x366ecc(0x49e,0x4c0,0x4ba,0x4c6)+'}}',commonCharacterListText,_0x4bfe1c),_0x35c839=replacePlaceholder(_0x35c839,_0x586cd8[_0x2180a2(0x37d,0x399,0x3b5,0x393)],userDemand,_0x4bfe1c);if(variables&&_0x586cd8[_0x2180a2(0x399,0x3a0,0x3c3,0x3b2)](Object[_0x2180a2(0x3ad,0x36e,0x3ab,0x3cd)](variables)['length'],-0xe62+0x1cfd+-0xe9b)){if(_0x586cd8[_0x2180a2(0x3a2,0x3b5,0x3d1,0x3b9)](_0x2180a2(0x3df,0x3e0,0x41b,0x3d0),_0x366ecc(0x4be,0x494,0x4b6,0x493))){const _0x6624fe=/\{\{getvar::([^}]+)\}\}/g,_0xffecba=JSON[_0x366ecc(0x484,0x44e,0x46a,0x49f)](_0x35c839),_0x398d3f=[..._0xffecba[_0x366ecc(0x49d,0x496,0x4ad,0x4d0)](_0x6624fe)],_0x5e1f5f=new Set();for(const _0xa15118 of _0x398d3f){_0x5e1f5f[_0x366ecc(0x4a3,0x46c,0x4d5,0x4c7)](_0xa15118[0x1cb4+-0x19*0x16b+0x6c0]);}for(const _0x22e0f9 of _0x5e1f5f){if(_0x586cd8[_0x366ecc(0x4c7,0x501,0x4b6,0x50a)](_0x2180a2(0x391,0x39d,0x3a0,0x362),_0x586cd8[_0x2180a2(0x3b0,0x3df,0x397,0x3b1)])){const _0x272d05=_0x2180a2(0x3bf,0x38c,0x402,0x3f2)+_0x22e0f9+'}}',_0x10f730=variables[_0x22e0f9]||'';_0x35c839=replacePlaceholder(_0x35c839,_0x272d05,_0x10f730,_0x4bfe1c);}else{_0x9628fe[_0x366ecc(0x4f3,0x4fa,0x514,0x52e)](_0x12eafd);const _0x25981f={..._0x25d40c};_0x44a175=_0x25981f;}}}else for(const _0x53ee16 of _0x49c7da[_0x366ecc(0x479,0x48d,0x49d,0x474)]){if(_0x53ee16[_0x366ecc(0x49a,0x4af,0x4cf,0x4ac)]&&_0x586cd8['EvjNq'](_0x53ee16[_0x2180a2(0x385,0x3c1,0x3c2,0x362)]['trim'](),'')){const _0x3d5b09={};_0x3d5b09['role']=_0x586cd8['Tebkd'],_0x3d5b09['content']=_0x53ee16['user'],_0x5dd1f9['push'](_0x3d5b09);}if(_0x53ee16[_0x366ecc(0x4ed,0x4bd,0x4ac,0x4e4)]&&_0x586cd8['EvjNq'](_0x53ee16[_0x366ecc(0x4ed,0x4cf,0x502,0x50c)]['trim'](),'')){const _0x28db49={};_0x28db49[_0x366ecc(0x4c8,0x497,0x493,0x491)]=_0x366ecc(0x4ed,0x4c9,0x4fa,0x4e3),_0x28db49[_0x2180a2(0x3ca,0x3ba,0x3cc,0x3b6)]=_0x53ee16['assistant'],_0x1a55f9['push'](_0x28db49);}}}function _0x366ecc(_0x12310d,_0x32b71a,_0x5692a9,_0x35139d){return _0x3cfc(_0x12310d-0x2d2,_0x35139d);}const _0x1ee85c={};return _0x1ee85c[_0x2180a2(0x3c0,0x396,0x381,0x389)]=_0x35c839,_0x1ee85c['replacedVa'+_0x2180a2(0x39b,0x35f,0x376,0x35d)]=_0x4bfe1c,_0x1ee85c;}export function buildPromptWithTrigger(_0x45921e){const _0x22a4c6={'LxMIq':_0x30a2ac(0x2f5,0x347,0x318,0x339)+'+$','FFXIq':function(_0x43d755,_0x520ec5){return _0x43d755===_0x520ec5;},'XQiJF':_0x30a2ac(0x353,0x39a,0x3a2,0x371),'asykW':function(_0x4673d8,_0x42b62a){return _0x4673d8!==_0x42b62a;},'SevNi':_0x478953(0x1d3,0x1c3,0x1a1,0x1a5),'CkoBN':function(_0x214e58,_0x17cd43,_0x5d3b40){return _0x214e58(_0x17cd43,_0x5d3b40);},'gKIGY':_0x30a2ac(0x2fd,0x2dc,0x343,0x321),'QTrgE':_0x30a2ac(0x324,0x30a,0x386,0x345),'TzRWz':_0x478953(0x1b8,0x1ef,0x1e9,0x1e2),'pKkVi':_0x478953(0x1d2,0x20f,0x211,0x1de),'coygy':_0x30a2ac(0x396,0x3ac,0x34f,0x386)+'cessor]\x20构建'+_0x478953(0x190,0x1ad,0x177,0x14f)},{requestType:_0x6b9983,contextData:_0x33f3ac}=_0x45921e,_0x5c887b=extension_settings[extensionName]?.['llm_reques'+_0x30a2ac(0x34a,0x398,0x3c5,0x382)+_0x478953(0x1ca,0x1ea,0x1d3,0x1c1)]||{},_0x1baf0c={};_0x1baf0c[_0x30a2ac(0x399,0x3aa,0x361,0x36c)+_0x478953(0x175,0x179,0x157,0x14b)]='默认';const _0x3b088f=_0x5c887b[_0x6b9983]||_0x1baf0c,_0x1f8d7c=_0x3b088f['context_pr'+_0x478953(0x175,0x173,0x136,0x17c)]||'默认',_0x45390c=extension_settings[extensionName]?.['test_conte'+'xt_profile'+'s']||{},_0x2abab7=_0x45390c[_0x1f8d7c]||_0x45390c[Object[_0x30a2ac(0x392,0x33f,0x344,0x36d)](_0x45390c)[0xec7+0x161*0x17+0x1*-0x2e7e]]||{};function _0x30a2ac(_0x25304e,_0x4ba6bf,_0x158a5f,_0x457f18){return _0x3cfc(_0x457f18-0x17d,_0x25304e);}const {context:context='',body:body='',worldBookContent:worldBookContent='',userDemand:userDemand=''}=_0x33f3ac,_0x6d78f9=[userDemand,context,body,worldBookContent][_0x478953(0x16e,0x15c,0x19e,0x144)](Boolean)[_0x478953(0x153,0x15c,0x186,0x148)]('\x0a'),_0x3cb235=[];if(_0x2abab7[_0x478953(0x1b1,0x1a2,0x1a9,0x176)]&&Array['isArray'](_0x2abab7['entries']))for(const _0x22fb5f of _0x2abab7[_0x478953(0x1b1,0x17f,0x1c8,0x1b1)]){if(!_0x22fb5f['enabled'])continue;if(!_0x22fb5f[_0x30a2ac(0x398,0x36e,0x3a3,0x38a)]||_0x22a4c6['FFXIq'](_0x22fb5f[_0x478953(0x1c4,0x1bd,0x1e4,0x1d2)][_0x478953(0x1a9,0x1da,0x1d5,0x18a)](),''))continue;if(_0x22fb5f[_0x30a2ac(0x3a9,0x395,0x323,0x368)+'e']===_0x22a4c6[_0x478953(0x1bd,0x1c9,0x1b3,0x1f3)]){if(_0x22a4c6[_0x478953(0x18d,0x1ba,0x166,0x14d)](_0x22a4c6[_0x30a2ac(0x316,0x300,0x35d,0x320)],_0x22a4c6[_0x30a2ac(0x342,0x34b,0x311,0x320)]))return[];else{if(!_0x22a4c6[_0x30a2ac(0x341,0x350,0x315,0x352)](checkTriggerWords,_0x22fb5f['triggerWor'+'ds'],_0x6d78f9)){if(_0x22a4c6['FFXIq'](_0x22a4c6[_0x478953(0x178,0x1af,0x190,0x156)],_0x478953(0x1cc,0x190,0x201,0x1f6)))return _0x2e7adb[_0x30a2ac(0x303,0x2ef,0x369,0x329)]()[_0x30a2ac(0x3a3,0x340,0x3a2,0x360)](AaTfzJ[_0x478953(0x1ae,0x1ee,0x1d7,0x1c0)])[_0x478953(0x163,0x187,0x17b,0x19e)]()['constructo'+'r'](_0x424ad3)[_0x478953(0x19a,0x1cb,0x18b,0x1cf)](AaTfzJ['LxMIq']);else continue;}}}const _0x3a5b91={};_0x3a5b91[_0x478953(0x1ad,0x19f,0x18d,0x1dc)]=_0x22fb5f[_0x30a2ac(0x36c,0x35b,0x387,0x373)]||_0x22a4c6[_0x30a2ac(0x34c,0x342,0x337,0x365)],_0x3a5b91[_0x30a2ac(0x391,0x3c3,0x3bf,0x38a)]=_0x22fb5f[_0x30a2ac(0x385,0x383,0x364,0x38a)],_0x3cb235['push'](_0x3a5b91);}else{if(_0x2abab7[_0x478953(0x15e,0x17f,0x13a,0x16b)]&&Array['isArray'](_0x2abab7[_0x30a2ac(0x305,0x33e,0x35c,0x324)]))for(const _0x176531 of _0x2abab7[_0x30a2ac(0x361,0x2e3,0x301,0x324)]){if(_0x22a4c6[_0x478953(0x157,0x16c,0x123,0x180)]!==_0x30a2ac(0x369,0x352,0x36c,0x37e)){if(_0x3a1d75){const _0x30f470=_0x33113d['apply'](_0x3b010d,arguments);return _0x434fe2=null,_0x30f470;}}else{if(_0x176531['user']&&_0x176531[_0x478953(0x17f,0x14a,0x13f,0x186)][_0x30a2ac(0x37d,0x334,0x34d,0x36f)]()!==''){const _0x1e79a6={};_0x1e79a6['role']=_0x22a4c6[_0x30a2ac(0x33c,0x341,0x39e,0x365)],_0x1e79a6[_0x478953(0x1c4,0x1e5,0x207,0x1ff)]=_0x176531['user'],_0x3cb235[_0x478953(0x1d8,0x1e3,0x1cf,0x1fa)](_0x1e79a6);}if(_0x176531['assistant']&&_0x176531[_0x30a2ac(0x3ac,0x3c6,0x3b7,0x398)][_0x478953(0x1a9,0x1da,0x1a2,0x17d)]()!==''){const _0x5d5191={};_0x5d5191[_0x478953(0x1ad,0x1e9,0x1cc,0x169)]=_0x22a4c6[_0x30a2ac(0x35c,0x37e,0x33f,0x34c)],_0x5d5191[_0x478953(0x1c4,0x1c4,0x184,0x204)]=_0x176531['assistant'],_0x3cb235[_0x30a2ac(0x3c9,0x378,0x383,0x39e)](_0x5d5191);}}}}function _0x478953(_0x194de5,_0x148ed2,_0x3b3004,_0x57e798){return _0x3cfc(_0x194de5- -0x49,_0x148ed2);}const _0xe3a759=mergeAdjacentMessages(_0x3cb235),{messages:_0x19769c,replacedVariables:_0x9b850d}=_0x22a4c6[_0x30a2ac(0x317,0x359,0x30d,0x352)](replaceAllPlaceholders,_0xe3a759,_0x33f3ac),_0x5a7d36={};return _0x5a7d36[_0x478953(0x162,0x1a4,0x186,0x128)+'e']=_0x6b9983,_0x5a7d36[_0x30a2ac(0x335,0x36f,0x31f,0x361)+'nt']=_0x3cb235[_0x30a2ac(0x33a,0x380,0x366,0x350)],_0x5a7d36[_0x478953(0x1b0,0x172,0x19e,0x1c6)+'t']=_0xe3a759[_0x30a2ac(0x33a,0x34c,0x317,0x350)],_0x5a7d36[_0x478953(0x16f,0x158,0x13c,0x163)]=_0x19769c[_0x478953(0x18a,0x15c,0x1b8,0x19a)],_0x5a7d36['replacedVa'+'riables']=[..._0x9b850d],console[_0x478953(0x1d4,0x1c7,0x192,0x1cf)](_0x22a4c6[_0x478953(0x1b4,0x1c9,0x1a0,0x1f4)],_0x5a7d36),_0x19769c;}export function getProcessedPrompt(_0x418528,_0x33d5eb){const _0x3ee9ff={'CmvAz':function(_0x49c7f0,_0x3f8af6){return _0x49c7f0(_0x3f8af6);}},_0x2c0f50={};function _0x38d2da(_0x5aac65,_0x3191dd,_0x59c209,_0x36b7fe){return _0x3cfc(_0x36b7fe-0xd2,_0x5aac65);}_0x2c0f50[_0x38d2da(0x28c,0x26a,0x279,0x27d)+'e']=_0x418528;function _0x4fba76(_0x336262,_0x24d4bd,_0x46f315,_0x567987){return _0x3cfc(_0x24d4bd-0x207,_0x336262);}return _0x2c0f50[_0x38d2da(0x23c,0x281,0x29c,0x273)+'a']=_0x33d5eb,_0x3ee9ff['CmvAz'](buildPromptWithTrigger,_0x2c0f50);}
//# sourceMappingURL=http://localhost:8000/promptProcessor.js.map