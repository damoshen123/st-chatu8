(function(_0x46d0d5,_0x3756e1){function _0x2a4f39(_0x77a26c,_0x4cada9,_0x3da0a3,_0x8fdfc4){return _0x3722(_0x8fdfc4-0x87,_0x77a26c);}function _0x275658(_0x5e03b5,_0x4899fd,_0x4f75e5,_0x229a97){return _0x3722(_0x229a97-0x287,_0x4f75e5);}const _0x304d7c=_0x46d0d5();while(!![]){try{const _0x38486a=parseInt(_0x2a4f39(0x227,0x24a,0x246,0x21d))/(0xb*-0xf1+0x1f07+-0x14ab)*(parseInt(_0x275658(0x417,0x404,0x428,0x429))/(-0x7*-0x469+-0x1*-0x1826+-0x3703))+-parseInt(_0x2a4f39(0x22f,0x261,0x234,0x236))/(0x1a82+0x1c*0x128+0x7*-0x869)+-parseInt(_0x2a4f39(0x1d3,0x1c7,0x1d3,0x1ef))/(-0x1e6c+-0xc*0xf+-0x2*-0xf92)+parseInt(_0x275658(0x408,0x41e,0x415,0x401))/(-0x24e*0x6+-0x1dfe+0x2bd7)+parseInt(_0x2a4f39(0x24d,0x213,0x22e,0x237))/(-0x3cd+0xee6*0x1+-0xb13)*(-parseInt(_0x275658(0x416,0x3d0,0x41a,0x3f7))/(0x1d1a*-0x1+0x1f97+0x69*-0x6))+parseInt(_0x2a4f39(0x1d0,0x1de,0x20a,0x1fa))/(-0x17+-0x37*-0x7f+0x487*-0x6)*(parseInt(_0x275658(0x415,0x403,0x3ee,0x41b))/(-0x164b+0xfe6+0x1*0x66e))+parseInt(_0x275658(0x3cf,0x3c2,0x3c6,0x3e2))/(0x2443*-0x1+-0x196e+-0x1*-0x3dbb)*(parseInt(_0x275658(0x411,0x3db,0x3fd,0x3e7))/(0xae9+0x146c+-0x1f4a*0x1));if(_0x38486a===_0x3756e1)break;else _0x304d7c['push'](_0x304d7c['shift']());}catch(_0x38a561){_0x304d7c['push'](_0x304d7c['shift']());}}}(_0x1737,-0x3*-0x826a+-0x1cfcc+-0x6a3*-0xf5));const _0x28ef39=(function(){const _0x5ed5da={};function _0xbd18c1(_0x2e62ef,_0x30900c,_0x52e90c,_0xf55900){return _0x3722(_0x52e90c- -0x3e2,_0x2e62ef);}_0x5ed5da[_0xbd18c1(-0x24c,-0x234,-0x247,-0x241)]=_0xbd18c1(-0x21c,-0x23f,-0x23f,-0x250);const _0x7e2570=_0x5ed5da;function _0x5a742c(_0x7ac360,_0x478694,_0xd4263c,_0x8cae80){return _0x3722(_0x8cae80- -0x332,_0x478694);}let _0x1c2f4b=!![];return function(_0x5d54b9,_0x34f745){function _0x406631(_0x4229d0,_0x5f3178,_0x30b16d,_0x1d226d){return _0xbd18c1(_0x4229d0,_0x5f3178-0xcd,_0x1d226d-0x711,_0x1d226d-0xbf);}const _0x29ce32={};_0x29ce32[_0x406631(0x4bc,0x4bb,0x4b5,0x4c4)]=function(_0x4d2216,_0x45a1bc){return _0x4d2216!==_0x45a1bc;},_0x29ce32[_0xf89b61(0x394,0x39d,0x3b7,0x3b7)]=_0x7e2570[_0x406631(0x4b2,0x4c6,0x4dc,0x4ca)],_0x29ce32[_0xf89b61(0x39c,0x3e1,0x3bb,0x3c8)]='dpRdj';function _0xf89b61(_0x4bf7e5,_0x16e46d,_0x549aac,_0x39a7a2){return _0x5a742c(_0x4bf7e5-0xfe,_0x549aac,_0x549aac-0xd0,_0x39a7a2-0x567);}const _0xe2cc8f=_0x29ce32,_0x28baae=_0x1c2f4b?function(){function _0x556331(_0x2d49c7,_0x124f42,_0x3945fd,_0x24f38b){return _0x406631(_0x124f42,_0x124f42-0x16c,_0x3945fd-0x196,_0x24f38b- -0x27a);}function _0x2ca237(_0x1df653,_0x3cfbf1,_0x668f05,_0x251c2c){return _0xf89b61(_0x1df653-0x14,_0x3cfbf1-0xa6,_0x3cfbf1,_0x668f05- -0x1e6);}if(_0xe2cc8f[_0x2ca237(0x1c0,0x1d9,0x1e4,0x1da)](_0xe2cc8f['tRjkb'],_0x556331(0x24e,0x250,0x227,0x226))){if(_0x34f745){if(_0xe2cc8f[_0x556331(0x245,0x241,0x246,0x248)]!==_0x2ca237(0x1f9,0x1dd,0x1da,0x1c5)){const _0x55521d=_0x34f745[_0x2ca237(0x1da,0x1f8,0x1cf,0x1db)](_0x5d54b9,arguments);return _0x34f745=null,_0x55521d;}else{const _0x13baae=_0x319557?function(){function _0x47c0b9(_0x4681b4,_0x8e27b5,_0xa9fa10,_0x2da5f0){return _0x556331(_0x4681b4-0x1cb,_0xa9fa10,_0xa9fa10-0x193,_0x8e27b5- -0x10b);}if(_0x1e2226){const _0x339061=_0x1f2ba4[_0x47c0b9(0x14b,0x12a,0x149,0x119)](_0x2e5946,arguments);return _0x325826=null,_0x339061;}}:function(){};return _0x38d07d=![],_0x13baae;}}}else{const _0x56edbe=_0x29ee04[_0x2ca237(0x1a5,0x1d5,0x1cf,0x1c1)](_0x5b10a9,arguments);return _0x280c7d=null,_0x56edbe;}}:function(){};return _0x1c2f4b=![],_0x28baae;};}()),_0x1beb93=_0x28ef39(this,function(){const _0x343bc4={};function _0x132b4a(_0x43558b,_0x50d7f9,_0x42550b,_0x5a81c5){return _0x3722(_0x50d7f9- -0x28b,_0x42550b);}function _0x3d20a3(_0x3e161d,_0x34a330,_0x1a031c,_0x36a7eb){return _0x3722(_0x34a330-0x12b,_0x1a031c);}_0x343bc4[_0x132b4a(-0xf9,-0xe2,-0x106,-0xdc)]=_0x3d20a3(0x2db,0x2d3,0x2a7,0x2f8)+'+$';const _0x4613a4=_0x343bc4;return _0x1beb93[_0x132b4a(-0xc4,-0xed,-0xfc,-0x101)]()[_0x3d20a3(0x2a0,0x289,0x282,0x264)](_0x4613a4[_0x132b4a(-0xc0,-0xe2,-0xf1,-0xf2)])[_0x132b4a(-0xc7,-0xed,-0xe1,-0xc8)]()[_0x3d20a3(0x282,0x2a2,0x29f,0x279)+'r'](_0x1beb93)[_0x132b4a(-0x10a,-0x12d,-0x12d,-0x112)](_0x132b4a(-0x109,-0xe3,-0xd7,-0x104)+'+$');});function _0xee56ea(_0x4dc478,_0xb9db12,_0x347dc5,_0xed70d9){return _0x3722(_0x4dc478-0x215,_0x347dc5);}_0x1beb93();function _0x1737(){const _0x123fd1=['DNrNsgi','vNbcBxG','mZa3mJy2m1D5D0PhCG','rK5trwS','m1vvzLDsEa','q2j0BKG','tuvtu0fhrv9tvW','EgfTEeG','Bg9HzgLUzW','shDfDvK','5PEG5Qc35BYp','yKzjsNm','Dg9tDhjPBMC','AMKY','zxjYB3i','rurjvhK','mJq5nJuWAM5jt3L0','rwzYz2i','twPAC3e','zfjoALm','DMXJAha','y1rdqMe','kcGOlISPkYKRkq','rfjvyxC','C3qTy2HHDhu4oG','rMLty2y','ChHUDNO','wgjWvxa','z2vUzxjHDgvFyG','mtqWmJy2nxP1DM1rsa','mtiXodzSs3nzCfm','BwT0v1u','Aw9Ux2vUzgvK','x0voreve','AgvHDNLgCM9UDa','mtbtsKHZDMy','re9nq29UDgvUDa','s2ftyvG','C2vHCMnO','D0nUEgO','nJe1odiXog1yBgLVDG','ugDMtLK','ievYCM9YihbYBW','r0vorvjbveLptG','Dg5FC3r5Bgu','uhjXweq','DgHLBwvZ','AxnbCNjHEq','mZa3mZe4ofHZtgrVrW','suPkDKW','y2vZC2LUzYbYzq','CKP0q3i','ywrKrxzLBNrmAq','svbfra','Dhj1zq','sfPfyLq','mJmXn3rLzM50tW','rwPTu2S','zw5Ktw9Kzq','mtzODezirg8','z0PcsM8','C3rLBMvY','uMvAwKG','y29UC3rYDwn0BW','EMLKB25NzgLHBG','v3zxAvm','mZq0mZmZnxrvBKfRyW','y2vUDcbJAgf0CW','C0jVtKW','r1LYy2G','zv9ZDhLSzq','CMvHzhLtDgf0zq','yxbWBhK','ANnFz2vUzxjHDa','DfjQA2i','zfzrAvG','sfPZBe8','DgHLBwvFAwq','AKfVuKC','tvfcseu','BuPhshK','y2HHDa','y3DUqMy','tuHhu2S','CfrbqMK','thvbv04','tg9HzgvK','yLvJDMm','yxvIyLa','Aw1Hz2vFzNjHBq'];_0x1737=function(){return _0x123fd1;};return _0x1737();}import{eventSource,event_types}from'../../../../../../script.js';import{extension_settings}from'../../../../../extensions.js';import{extensionName}from'../config.js';import{getContext}from'../../../../../st-context.js';import{applyGenerateButtonStyle,applyImageFrameStyle,isThemeDark}from'../settings/theme.js';import{debounce}from'./utils.js';import{processMesTextElements,processIframes,processRecentChats}from'./chatProcessor.js';import{setTriggerGeneration}from'./dialogs.js';import{triggerGeneration,setShowImagePreview}from'./generation.js';import{showImagePreview}from'./imagePreview.js';let autoClickTimer=null;window[_0xca5fc2(0x45,0x3b,0x31,0x4b)+'ji']=![];function _0xca5fc2(_0x401543,_0x58a4b6,_0x517d26,_0x528ab4){return _0x3722(_0x401543- -0x133,_0x58a4b6);}setTriggerGeneration(triggerGeneration),setShowImagePreview(showImagePreview);const debouncedProcessVisible=debounce(()=>{function _0x357a26(_0x3b2e94,_0x40ff25,_0x3d9f6d,_0x4d6162){return _0xca5fc2(_0x4d6162-0x234,_0x3b2e94,_0x3d9f6d-0x9b,_0x4d6162-0x9d);}const _0x1c5bd6={'PrqXD':function(_0x1dc595){return _0x1dc595();}};_0x1c5bd6[_0x357a26(0x23f,0x239,0x264,0x266)](processMesTextElements),processIframes();},-0x395*-0x9+0x1723*-0x1+-0x852);eventSource['on'](event_types[_0xca5fc2(0x30,0x24,0x1c,0x19)+_0xee56ea(0x36e,0x36d,0x393,0x35a)],async _0x151306=>{function _0x2bdbac(_0x819de5,_0x184ec1,_0x473cf3,_0xedc65c){return _0xca5fc2(_0xedc65c-0x2b3,_0x473cf3,_0x473cf3-0xcd,_0xedc65c-0x1f1);}const _0x3f9ffa={'pTABi':function(_0x434ea9,_0x3b3c8b){return _0x434ea9==_0x3b3c8b;},'xamxH':_0x2bdbac(0x2ee,0x2cc,0x305,0x2ee),'LHBdO':function(_0x7a867b,_0x55759c){return _0x7a867b(_0x55759c);},'LuAWN':_0x2bdbac(0x2fe,0x356,0x33a,0x32a)+_0x2f4d49(0x4c1,0x499,0x4aa,0x4e6)+_0x2bdbac(0x306,0x2f5,0x30b,0x2ea)+_0x2f4d49(0x4da,0x4b2,0x4ef,0x4c8)+':','XbpUp':function(_0x203302,_0xa964a0){return _0x203302!==_0xa964a0;},'rJtCr':'aRPdB','QBSbi':function(_0x1953bb,_0x19e9d1){return _0x1953bb===_0x19e9d1;},'iIIDs':function(_0x14107a,_0x48c48e){return _0x14107a!==_0x48c48e;},'GYrch':_0x2f4d49(0x505,0x4ea,0x50f,0x4f6),'bUcvc':function(_0x8bd617,_0x1cebfa,_0x18c49d){return _0x8bd617(_0x1cebfa,_0x18c49d);}};function _0x2f4d49(_0x6ef431,_0x4da68c,_0x56efd2,_0x2bf92c){return _0xee56ea(_0x6ef431-0x14a,_0x4da68c-0x13f,_0x56efd2,_0x2bf92c-0xfd);}window[_0x2f4d49(0x4d7,0x4b7,0x4fe,0x502)+'ji']=!![];autoClickTimer&&clearTimeout(autoClickTimer);if(_0x3f9ffa['QBSbi'](!extension_settings[extensionName]['zidongdian'+_0x2f4d49(0x4fe,0x4e8,0x4da,0x4ec)],_0x3f9ffa[_0x2f4d49(0x4f8,0x4e1,0x4f7,0x508)])){if(_0x3f9ffa['iIIDs'](_0x3f9ffa[_0x2bdbac(0x2ef,0x324,0x30b,0x2fd)],_0x2f4d49(0x505,0x51f,0x51a,0x501))){const _0x1e6404=_0x30ff54();_0x1e6404&&_0x5812d5[_0x2f4d49(0x4c6,0x4e1,0x4cd,0x4c9)](_0x1e6404[_0x2bdbac(0x2e3,0x32f,0x2e9,0x309)])&&_0x3f9ffa[_0x2f4d49(0x4eb,0x50f,0x517,0x4dd)](_0xfa902d[_0xd12ec8][_0x2f4d49(0x4b9,0x4de,0x4d4,0x4ab)+_0x2f4d49(0x4d1,0x4be,0x4fe,0x4b3)],_0x3f9ffa[_0x2f4d49(0x4f8,0x4ef,0x4df,0x4e4)])&&_0x3f9ffa['LHBdO'](_0x17c437,_0x1e6404[_0x2bdbac(0x2e2,0x2ec,0x32f,0x309)]);}else autoClickTimer=_0x3f9ffa[_0x2bdbac(0x33b,0x309,0x2ff,0x30f)](setTimeout,()=>{function _0xb505e4(_0x5dcacb,_0x51d2e5,_0x1597c4,_0x5e9504){return _0x2f4d49(_0x51d2e5- -0xad,_0x51d2e5-0x1b1,_0x1597c4,_0x5e9504-0x1c6);}function _0x25e41f(_0x4c79b9,_0x49a2b8,_0x4c72eb,_0x17c8f6){return _0x2bdbac(_0x4c79b9-0x91,_0x49a2b8-0x19c,_0x4c79b9,_0x49a2b8- -0x33a);}_0x3f9ffa[_0x25e41f(0x1f,-0xd,0x12,-0x24)](_0x3f9ffa[_0xb505e4(0x411,0x41d,0x41c,0x42c)],_0x3f9ffa[_0x25e41f(-0x5b,-0x4f,-0x74,-0x69)])?_0x1626d4[_0xb505e4(0x475,0x452,0x46f,0x45a)](_0x3f9ffa[_0xb505e4(0x453,0x43f,0x466,0x421)],_0x54ea16):(window['zidongdian'+'ji']=![],autoClickTimer=null);},0x1359*-0x1+0x1*0x1a6b+0xc76);}}),eventSource['on'](event_types[_0xca5fc2(0x65,0x7a,0x79,0x55)+_0xca5fc2(0x3a,0x2f,0x40,0x3e)],async _0x308074=>{const _0x3c1b84={'VAOUd':function(_0x4917f6,_0x1cd9d6){return _0x4917f6(_0x1cd9d6);},'WvWiS':function(_0x37c236,_0x5a91c3){return _0x37c236===_0x5a91c3;}};window[_0x2b1a77(0x174,0x18d,0x181,0x182)+'ji']=!![];autoClickTimer&&_0x3c1b84['VAOUd'](clearTimeout,autoClickTimer);function _0x2b1a77(_0x516768,_0x2afb14,_0x1ea2cc,_0x315230){return _0xee56ea(_0x1ea2cc- -0x20c,_0x2afb14-0x181,_0x2afb14,_0x315230-0x9b);}function _0x5319a1(_0x46ab38,_0x1f0726,_0x4ee5ab,_0x323a6c){return _0xee56ea(_0x4ee5ab- -0x183,_0x1f0726-0x120,_0x1f0726,_0x323a6c-0x1e);}_0x3c1b84[_0x2b1a77(0x17b,0x15d,0x182,0x16d)](!extension_settings[extensionName]['zidongdian'+_0x5319a1(0x20a,0x239,0x231,0x21f)],'true')&&(autoClickTimer=setTimeout(()=>{function _0x4ca31b(_0x1e1ae4,_0x36aae6,_0x2499c6,_0x3e4e1f){return _0x5319a1(_0x1e1ae4-0x49,_0x1e1ae4,_0x36aae6- -0x357,_0x3e4e1f-0x150);}window[_0x4ca31b(-0x164,-0x14d,-0x166,-0x123)+'ji']=![],autoClickTimer=null;},0xa68+0x1*-0x35f+0xc7f));}),eventSource['on'](_0xee56ea(0x396,0x395,0x39e,0x3c0)+_0xee56ea(0x36d,0x34e,0x349,0x389),async _0x2b3546=>{const _0x12f040={'IJJvL':function(_0x49428f,_0x4eb1e5,_0x226dad){return _0x49428f(_0x4eb1e5,_0x226dad);},'gJBJo':function(_0x4d3bdd,_0x1f99fc){return _0x4d3bdd(_0x1f99fc);},'bFIJs':function(_0x1a3bc3,_0x20a4b7,_0x5c7dec){return _0x1a3bc3(_0x20a4b7,_0x5c7dec);},'jAoRG':function(_0x1964f1,_0x2f69b9){return _0x1964f1(_0x2f69b9);},'vtgHb':function(_0x4147ae,_0x3de180){return _0x4147ae===_0x3de180;},'HZslO':_0x2156b9(0x22c,0x228,0x20e,0x204),'wCnxj':_0x2156b9(0x22e,0x22a,0x237,0x239),'MQBHE':function(_0x5e2836,_0x4fbdbc){return _0x5e2836!==_0x4fbdbc;},'cwnBf':_0x1e5aef(-0xe5,-0x105,-0xf3,-0xdb),'IFBUw':'dsGAP','FVHDu':function(_0x583ef7,_0x5bf9aa){return _0x583ef7(_0x5bf9aa);},'aubbP':_0x1e5aef(-0xd8,-0xb1,-0xd5,-0x104)};window[_0x2156b9(0x1f6,0x203,0x203,0x221)+'ji']=!![];function _0x2156b9(_0x522e6f,_0x15853d,_0x3a04db,_0x41ffb5){return _0xee56ea(_0x3a04db- -0x18a,_0x15853d-0x9d,_0x41ffb5,_0x41ffb5-0x1bb);}if(autoClickTimer){if(_0x12f040[_0x1e5aef(-0xbf,-0xb3,-0xb7,-0xbf)](_0x12f040[_0x2156b9(0x207,0x21e,0x215,0x203)],_0x12f040['IFBUw']))_0x12f040['FVHDu'](clearTimeout,autoClickTimer);else{const _0x2af07d=_0x5ac71a[_0x58a5a6][_0x2156b9(0x1fb,0x1f1,0x1f1,0x1de)]?.[_0x40070e[_0x17316a][_0x1e5aef(-0xc1,-0xa5,-0x99,-0xd9)]]||{};_0x12f040[_0x1e5aef(-0xdd,-0xf0,-0xd8,-0xb7)](_0x33f2e3,_0x39d7e6[_0x4609c6][_0x2156b9(0x264,0x23d,0x239,0x247)+'tn_style']||'默认',_0x12f040[_0x2156b9(0x1f9,0x220,0x1ff,0x1da)](_0x16c322,_0x2af07d)),_0x12f040[_0x2156b9(0x252,0x227,0x228,0x203)](_0x59939f,_0x4749fd[_0x35e12e][_0x2156b9(0x1fb,0x22c,0x21c,0x228)+_0x2156b9(0x223,0x212,0x209,0x220)]||_0x2156b9(0x21c,0x237,0x227,0x206),_0x12f040[_0x1e5aef(-0xc0,-0xd8,-0xec,-0xda)](_0x185983,_0x2af07d));}}function _0x1e5aef(_0x1274e4,_0x38e116,_0x3fd4a7,_0x295185){return _0xca5fc2(_0x1274e4- -0x113,_0x3fd4a7,_0x3fd4a7-0x1eb,_0x295185-0x194);}_0x12f040[_0x2156b9(0x218,0x238,0x21d,0x23e)](!extension_settings[extensionName]['zidongdian'+_0x1e5aef(-0xa7,-0x90,-0x83,-0xaa)],_0x12f040[_0x1e5aef(-0xb6,-0xd7,-0x92,-0xd0)])&&(autoClickTimer=setTimeout(()=>{function _0x2ae807(_0x24d26c,_0x29c4a8,_0x469727,_0xabedb4){return _0x1e5aef(_0xabedb4-0xe,_0x29c4a8-0x1f4,_0x469727,_0xabedb4-0x56);}function _0x582b67(_0x3e0013,_0x52b9d3,_0x3de118,_0x5ba46d){return _0x2156b9(_0x3e0013-0x7c,_0x52b9d3-0x15e,_0x52b9d3- -0x2ac,_0x5ba46d);}_0x12f040['vtgHb'](_0x12f040[_0x582b67(-0xb4,-0x9d,-0x9a,-0x74)],_0x12f040[_0x2ae807(-0x100,-0xd4,-0xad,-0xd9)])?(_0x24d147[_0x2ae807(-0xe6,-0xb3,-0xcf,-0xc0)+'ji']=![],_0x2585e6=null):(window[_0x2ae807(-0xe8,-0xc6,-0xeb,-0xc0)+'ji']=![],autoClickTimer=null);},0x5cf+-0x774+-0x70f*-0x3));});function _0x3722(_0x41eac3,_0x53a407){_0x41eac3=_0x41eac3-(-0x2e*0x66+0x25f+0x114d);const _0x4c2c4d=_0x1737();let _0x2f84e6=_0x4c2c4d[_0x41eac3];if(_0x3722['bbNath']===undefined){var _0x127990=function(_0x58da53){const _0x53ec5f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4d29a9='',_0x31355e='',_0x4993e3=_0x4d29a9+_0x127990;for(let _0x45c636=0x1*0x61a+0x2052+-0x266c,_0x43e3a4,_0x41ea49,_0x37a03d=-0xf0b+0x1efa+-0xfef;_0x41ea49=_0x58da53['charAt'](_0x37a03d++);~_0x41ea49&&(_0x43e3a4=_0x45c636%(-0xa6b+0x83*0xa+0x551)?_0x43e3a4*(-0x807+0x1*0x77a+-0x5*-0x29)+_0x41ea49:_0x41ea49,_0x45c636++%(-0x119+-0x22d*-0x1+-0x110))?_0x4d29a9+=_0x4993e3['charCodeAt'](_0x37a03d+(0x6*-0x49b+-0x2288+0x3e34))-(0x417*-0x4+0x32*0x44+-0x2*-0x18f)!==0x238a+0x1*-0x642+-0x1d48?String['fromCharCode'](0x1990+0x13b+-0x1fc*0xd&_0x43e3a4>>(-(0x1ad5+0xe*0x80+0x4d5*-0x7)*_0x45c636&-0x667+-0x1b2*-0x7+-0x571)):_0x45c636:-0x663+-0x2107+0x276a){_0x41ea49=_0x53ec5f['indexOf'](_0x41ea49);}for(let _0x56e6d9=-0x1*0x1f01+0x1909+0x17e*0x4,_0x536561=_0x4d29a9['length'];_0x56e6d9<_0x536561;_0x56e6d9++){_0x31355e+='%'+('00'+_0x4d29a9['charCodeAt'](_0x56e6d9)['toString'](0x1df+0x3f1*0x1+-0x5c0))['slice'](-(0x56*-0x49+0x10b4+0x3*0x29c));}return decodeURIComponent(_0x31355e);};_0x3722['XjgiXZ']=_0x127990,_0x3722['ucByzK']={},_0x3722['bbNath']=!![];}const _0x597d2d=_0x4c2c4d[-0x64a+-0xd4*0x1+0x71e],_0x3883e3=_0x41eac3+_0x597d2d,_0x38cc3c=_0x3722['ucByzK'][_0x3883e3];if(!_0x38cc3c){const _0x14eed7=function(_0x103942){this['hvjNyo']=_0x103942,this['oVOrCT']=[-0x2*0x42a+-0x118d+0x19e2,0x1*0x1574+0xd*-0x2f9+-0xa3*-0x1b,0x5*-0xdf+0xfeb+0xb90*-0x1],this['rpnKGK']=function(){return'newState';},this['EvOxrr']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['KADpex']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x14eed7['prototype']['jcAlbe']=function(){const _0x29e15b=new RegExp(this['EvOxrr']+this['KADpex']),_0x484595=_0x29e15b['test'](this['rpnKGK']['toString']())?--this['oVOrCT'][-0x1c43*-0x1+0x13f1+0x3033*-0x1]:--this['oVOrCT'][0x2f*0xa9+0xbf5*-0x1+-0x1312];return this['VQmKZe'](_0x484595);},_0x14eed7['prototype']['VQmKZe']=function(_0x1edb42){if(!Boolean(~_0x1edb42))return _0x1edb42;return this['yLGoQq'](this['hvjNyo']);},_0x14eed7['prototype']['yLGoQq']=function(_0x390a23){for(let _0x99a869=-0x1*-0x533+-0x1*0x2518+0x1fe5,_0x37618e=this['oVOrCT']['length'];_0x99a869<_0x37618e;_0x99a869++){this['oVOrCT']['push'](Math['round'](Math['random']())),_0x37618e=this['oVOrCT']['length'];}return _0x390a23(this['oVOrCT'][0x1a6f+-0x95*0x33+0xd*0x40]);},new _0x14eed7(_0x3722)['jcAlbe'](),_0x2f84e6=_0x3722['XjgiXZ'](_0x2f84e6),_0x3722['ucByzK'][_0x3883e3]=_0x2f84e6;}else _0x2f84e6=_0x38cc3c;return _0x2f84e6;}export function processAllImagePlaceholders(){const _0x30c59c={'KaSaX':function(_0x5caa46){return _0x5caa46();},'vCpzG':function(_0x1b12e9){return _0x1b12e9();},'CbtnH':function(_0x14ed20){return _0x14ed20();},'kfSmq':function(_0x5b3979,_0x5a44cf){return _0x5b3979==_0x5a44cf;},'EDITy':'true','MjZsq':function(_0x2bb063,_0x4c4744){return _0x2bb063!==_0x4c4744;},'mktWU':_0x1baea5(0x12e,0x17b,0x131,0x14f),'fCcvh':function(_0x162a6a,_0x3db55d){return _0x162a6a(_0x3db55d);},'HZEbT':_0x29add8(0x545,0x51b,0x52c,0x54f)+_0x1baea5(0x12d,0x104,0x10d,0x106)+_0x29add8(0x4fd,0x50e,0x4ec,0x4c2)+_0x29add8(0x4fa,0x517,0x4fd,0x4f0)+':'};_0x30c59c['vCpzG'](processMesTextElements),processIframes();function _0x29add8(_0x18a204,_0x48c950,_0x14e3bd,_0x829c78){return _0xca5fc2(_0x14e3bd-0x4b5,_0x18a204,_0x14e3bd-0x3a,_0x829c78-0x152);}function _0x1baea5(_0x5d20ee,_0x453ec8,_0x489c70,_0x399e1f){return _0xee56ea(_0x399e1f- -0x271,_0x453ec8-0x136,_0x5d20ee,_0x399e1f-0x197);}try{const _0x2f7a6d=_0x30c59c[_0x1baea5(0x12c,0x164,0x125,0x13b)](getContext);_0x2f7a6d&&Array['isArray'](_0x2f7a6d[_0x1baea5(0x115,0x144,0x13e,0x12d)])&&_0x30c59c['kfSmq'](extension_settings[extensionName][_0x29add8(0x4cd,0x4c6,0x4dc,0x4af)+_0x1baea5(0x137,0x105,0xf6,0x116)],_0x30c59c[_0x29add8(0x4fb,0x4f8,0x523,0x545)])&&(_0x30c59c[_0x1baea5(0x136,0x130,0x130,0x148)](_0x30c59c[_0x29add8(0x55b,0x532,0x533,0x506)],_0x30c59c['mktWU'])?(_0x30c59c[_0x1baea5(0xe7,0x12c,0x125,0x101)](_0x37ae95),_0x404d7c()):_0x30c59c['fCcvh'](processRecentChats,_0x2f7a6d[_0x29add8(0x4e9,0x50b,0x50b,0x536)]));}catch(_0x59cf81){console[_0x1baea5(0x137,0x142,0x16c,0x144)](_0x30c59c[_0x29add8(0x4d3,0x4ff,0x4f1,0x4de)],_0x59cf81);}}export function initializeImageProcessing(){const _0x3a94f2={'dRNjS':function(_0x297d41,_0x4089ed,_0x84c0e6){return _0x297d41(_0x4089ed,_0x84c0e6);},'sBoNL':function(_0x38b60a,_0x339942){return _0x38b60a(_0x339942);},'cTCBa':_0x2d9e91(0x41c,0x430,0x41a,0x45a),'ReZZH':function(_0x529730,_0x2d7e5f){return _0x529730(_0x2d7e5f);},'mJGHy':function(_0x2d37d9,_0x5d769a){return _0x2d37d9===_0x5d769a;},'mNeci':function(_0x238978){return _0x238978();}};if(extension_settings[extensionName]){const _0x578606=extension_settings[extensionName][_0x2d9e91(0x422,0x3fa,0x3ee,0x3d5)]?.[extension_settings[extensionName]['theme_id']]||{};_0x3a94f2[_0x532842(0x459,0x43c,0x469,0x437)](applyGenerateButtonStyle,extension_settings[extensionName][_0x532842(0x462,0x478,0x477,0x436)+_0x532842(0x418,0x401,0x3fa,0x400)]||'默认',_0x3a94f2[_0x532842(0x430,0x40b,0x45c,0x416)](isThemeDark,_0x578606)),_0x3a94f2[_0x532842(0x459,0x42d,0x435,0x44b)](applyImageFrameStyle,extension_settings[extensionName][_0x2d9e91(0x41c,0x425,0x3ff,0x429)+_0x2d9e91(0x41c,0x412,0x422,0x43b)]||_0x3a94f2[_0x2d9e91(0x431,0x43b,0x44b,0x423)],_0x3a94f2[_0x2d9e91(0x3ec,0x40a,0x430,0x3f1)](isThemeDark,_0x578606));}function _0x532842(_0x428d0e,_0x43100c,_0x6d15ee,_0x26d5e3){return _0xee56ea(_0x428d0e-0x9f,_0x43100c-0x23,_0x26d5e3,_0x26d5e3-0x1d9);}function _0x2d9e91(_0x23441c,_0x43ccc9,_0xceb174,_0x3ee3db){return _0xca5fc2(_0x43ccc9-0x3c7,_0x23441c,_0xceb174-0x1c1,_0x3ee3db-0x1f1);}_0x3a94f2[_0x2d9e91(0x411,0x41c,0x3f0,0x444)](document[_0x532842(0x433,0x44f,0x448,0x447)],_0x2d9e91(0x428,0x42e,0x45a,0x411))?document[_0x532842(0x420,0x42d,0x433,0x406)+_0x2d9e91(0x3ff,0x409,0x40f,0x406)](_0x532842(0x410,0x435,0x412,0x3f7)+_0x532842(0x442,0x419,0x443,0x430),processAllImagePlaceholders):_0x3a94f2['mNeci'](processAllImagePlaceholders);}