(function(_0x1e6c12,_0x498d25){function _0x5f5919(_0x1c90c5,_0x282028,_0x40dffe,_0x49fb13){return _0x3223(_0x1c90c5-0x3ba,_0x49fb13);}function _0x216ef1(_0x583e40,_0xfeb9c7,_0x14ae62,_0x2652ab){return _0x3223(_0xfeb9c7- -0x238,_0x583e40);}const _0x179f6c=_0x1e6c12();while(!![]){try{const _0x285b0c=-parseInt(_0x216ef1(-0x17d,-0x19e,-0x182,-0x27e))/(0x15b7+0x3b0*-0x8+-0x2*-0x3e5)+parseInt(_0x216ef1(-0x90,-0x35,0x30,0x60))/(0x1*0x20e5+0x5*-0x5d6+-0x49*0xd)+-parseInt(_0x216ef1(-0xdc,-0x12a,-0x46,-0x19b))/(-0x7c3*-0x3+0x1d43+0x3489*-0x1)*(parseInt(_0x5f5919(0x4a7,0x439,0x497,0x3c5))/(-0x26e9+-0x4c1+0x2bae))+parseInt(_0x216ef1(0x33,-0x68,-0x36,0x74))/(0xc*0xbb+0x245a+0x2d19*-0x1)*(-parseInt(_0x5f5919(0x5fd,0x61a,0x61b,0x677))/(-0xe1*-0x13+0xd0*0x25+-0x2ebd))+parseInt(_0x5f5919(0x54a,0x558,0x5ad,0x4e4))/(0x613*-0x6+-0x1e1e+0x4297*0x1)*(-parseInt(_0x216ef1(-0x6,-0x29,0x1,0x88))/(0x1f44+0x13d*-0xb+-0x119d))+-parseInt(_0x5f5919(0x599,0x62d,0x65f,0x633))/(-0xafe+-0x2309+0x10c*0x2c)*(-parseInt(_0x5f5919(0x4ea,0x544,0x522,0x47f))/(0x26cc+0xe36+-0x78*0x71))+parseInt(_0x5f5919(0x510,0x574,0x550,0x502))/(-0x1*-0x2389+-0x1*0x63+0xb*-0x331);if(_0x285b0c===_0x498d25)break;else _0x179f6c['push'](_0x179f6c['shift']());}catch(_0x2d1488){_0x179f6c['push'](_0x179f6c['shift']());}}}(_0x5f0b,-0x8d3b3+0x1*-0x4b93b+0x121d2e));const _0x45beb4=(function(){function _0x4cb5c9(_0x57f8c1,_0x2053a7,_0x22e28d,_0x538602){return _0x3223(_0x538602-0x2db,_0x2053a7);}function _0x13af64(_0x51a3eb,_0x21f401,_0x2c7b83,_0x836a78){return _0x3223(_0x51a3eb-0x117,_0x836a78);}const _0x4da7c5={'xmZWi':function(_0x5c154a,_0x518e94){return _0x5c154a(_0x518e94);},'gqKRC':function(_0x3f3186,_0x86a118){return _0x3f3186!==_0x86a118;},'kUnlc':function(_0x2eb6cf,_0x3ee04b){return _0x2eb6cf!==_0x3ee04b;},'utppI':_0x4cb5c9(0x421,0x3ad,0x411,0x3b4),'MVtRS':function(_0x17f078,_0x264a0c){return _0x17f078!==_0x264a0c;},'vEMNT':'dEofR','mZbbq':_0x4cb5c9(0x40c,0x560,0x5a6,0x4db),'daabe':_0x4cb5c9(0x3de,0x499,0x4d1,0x4c9)};let _0x51e8d6=!![];return function(_0x453295,_0x25362c){function _0x5336a0(_0x3a4027,_0x3afc0e,_0x165a0c,_0x47a7cb){return _0x4cb5c9(_0x3a4027-0x196,_0x165a0c,_0x165a0c-0xda,_0x3a4027-0xaf);}function _0x3f7c92(_0x2a7081,_0x311537,_0x168111,_0x3398e7){return _0x13af64(_0x3398e7-0x89,_0x311537-0xc3,_0x168111-0x3b,_0x168111);}if(_0x4da7c5[_0x5336a0(0x5a9,0x4ee,0x61d,0x4ed)](_0x4da7c5[_0x3f7c92(0x3a4,0x2ed,0x354,0x3cf)],_0x4da7c5['daabe'])){if(_0x3e3c89[_0x5336a0(0x4d9,0x4ac,0x5ad,0x5b6)]){const _0x3bc216={};_0x3bc216['result']=_0x8db398[_0x3f7c92(0x361,0x3ac,0x2ce,0x2c6)],_0x3bc216['testMode']=!![],_0x4da7c5[_0x3f7c92(0x23a,0x18f,0x230,0x234)](_0xf5847d,_0x3bc216);}else{const _0x29e5d8={};_0x29e5d8[_0x5336a0(0x4b0,0x4c6,0x43c,0x524)]=_0x613bef[_0x5336a0(0x4b0,0x46a,0x50c,0x42d)],_0x29e5d8[_0x5336a0(0x4d9,0x57b,0x50b,0x50f)]=![],_0x4da7c5[_0x5336a0(0x41e,0x462,0x473,0x3a4)](_0x37f0a7,_0x29e5d8);}}else{const _0x19a913=_0x51e8d6?function(){function _0x3fca72(_0x279a3e,_0x26a3f1,_0xfcd71d,_0x261e1f){return _0x5336a0(_0xfcd71d- -0x295,_0x26a3f1-0x1a6,_0x261e1f,_0x261e1f-0x1dd);}function _0x29411e(_0x28fe3c,_0x25ccae,_0x4c68f5,_0x4111b7){return _0x3f7c92(_0x28fe3c-0x1d0,_0x25ccae-0x1f,_0x4111b7,_0x4c68f5- -0x2f3);}const _0x4ec493={'vIrnY':function(_0x318b01,_0x5261e7){return _0x4da7c5['gqKRC'](_0x318b01,_0x5261e7);},'sCtdd':function(_0x20efe2,_0x2f72d1){return _0x20efe2(_0x2f72d1);}};if(_0x4da7c5[_0x3fca72(0x2d0,0x3a1,0x314,0x3f0)](_0x4da7c5[_0x3fca72(0x166,0x1dd,0x1a1,0xe5)],_0x3fca72(0x199,0x1a7,0x1ce,0x187)))_0x3037b0[_0x3fca72(0x2a3,0x30b,0x27c,0x2bd)][_0x29411e(0xb1,-0xeb,-0x2e,-0xed)]('mobile'),_0xe1226e[_0x29411e(0x1cb,0x1b3,0xec,0x86)][_0x29411e(0x1ae,0x69,0xcb,0x111)]=_0x4aa750+'px',_0x47a515['style']['maxHeight']=_0x2ab4d7+'px';else{if(_0x25362c){if(_0x4da7c5['MVtRS'](_0x4da7c5[_0x29411e(0x2a,-0x3,0x5c,0x122)],_0x4da7c5['mZbbq'])){const _0x305e31=_0x25362c[_0x29411e(0x92,0x62,0xc4,0x2c)](_0x453295,arguments);return _0x25362c=null,_0x305e31;}else{if(_0x4ec493[_0x29411e(0xfc,0xf2,0x4a,0x9d)](_0x17dbcf['id'],_0x2f1549))return;_0x2b4cfc['removeList'+_0x3fca72(0x2d5,0x25c,0x228,0x14d)](_0x571b1e[_0x29411e(0xc1,-0x24,0x29,0x112)+_0x3fca72(0x31e,0x2c1,0x250,0x2f8)+_0x3fca72(0x37d,0x1d2,0x2bd,0x27b)+_0x3fca72(0x3ae,0x2e1,0x30a,0x35a)],_0xce9b80),_0x4ec493[_0x29411e(0x41,-0x8a,-0x4c,0x35)](_0x49f5f5,_0x382705[_0x3fca72(0x214,0x2f0,0x2ea,0x211)]);}}}}:function(){};return _0x51e8d6=![],_0x19a913;}};}()),_0x1549b7=_0x45beb4(this,function(){const _0x3de4a2={};_0x3de4a2[_0x18d495(0x290,0x372,0x35c,0x221)]=_0x23dbce(-0x20b,-0x29b,-0x2d4,-0x257)+'+$';function _0x23dbce(_0x1fcf0a,_0x175111,_0x318c3a,_0x4099cc){return _0x3223(_0x318c3a- -0x3e7,_0x4099cc);}function _0x18d495(_0x18462b,_0x4449e6,_0x2227f1,_0x423514){return _0x3223(_0x18462b-0x201,_0x2227f1);}const _0x41d90c=_0x3de4a2;return _0x1549b7[_0x23dbce(-0x3a3,-0x3b0,-0x2d5,-0x2b3)]()[_0x23dbce(-0x2b0,-0x2d1,-0x269,-0x24b)](_0x23dbce(-0x2b5,-0x222,-0x2d4,-0x201)+'+$')[_0x18d495(0x313,0x280,0x348,0x342)]()['constructo'+'r'](_0x1549b7)[_0x23dbce(-0x326,-0x19d,-0x269,-0x32c)](_0x41d90c[_0x23dbce(-0x3fc,-0x2a1,-0x358,-0x371)]);});_0x1549b7();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';function _0x3223(_0x38d2d6,_0x15cd1e){_0x38d2d6=_0x38d2d6-(0xc58+0x22d3+0x2eb5*-0x1);const _0x1f0e77=_0x5f0b();let _0x46db52=_0x1f0e77[_0x38d2d6];if(_0x3223['EQFPkF']===undefined){var _0x56695f=function(_0x4f81d2){const _0x481132='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4be903='',_0x41e3c3='',_0x394ad9=_0x4be903+_0x56695f;for(let _0x46ee1d=-0x1*-0x202+-0x8*-0x145+0x40e*-0x3,_0xd2db72,_0x291c4d,_0x29a6d0=-0x81*-0xd+0x1a35+-0x1061*0x2;_0x291c4d=_0x4f81d2['charAt'](_0x29a6d0++);~_0x291c4d&&(_0xd2db72=_0x46ee1d%(-0xaa9+-0x25bf*0x1+0x306c)?_0xd2db72*(0x138*-0x10+-0x1d5c+0x311c)+_0x291c4d:_0x291c4d,_0x46ee1d++%(-0x34*0xb9+0xb3*0x17+-0x1583*-0x1))?_0x4be903+=_0x394ad9['charCodeAt'](_0x29a6d0+(0x2*0x12c5+-0x35*0x70+-0xe50))-(-0x1f63+0x1187*0x1+0xde6)!==-0x7c7+0x197*-0x11+0x22ce?String['fromCharCode'](-0x1*0xb83+-0xb*0x119+0x1895&_0xd2db72>>(-(0x19d7+-0x51f+0x1*-0x14b6)*_0x46ee1d&0x200+-0x20*0x131+0x52a*0x7)):_0x46ee1d:-0xe*0x7d+-0x4f*0x3b+-0x190b*-0x1){_0x291c4d=_0x481132['indexOf'](_0x291c4d);}for(let _0x1704dc=0x4*-0x6a7+0x220a+-0x76e,_0x5e9c8e=_0x4be903['length'];_0x1704dc<_0x5e9c8e;_0x1704dc++){_0x41e3c3+='%'+('00'+_0x4be903['charCodeAt'](_0x1704dc)['toString'](-0x4*-0x6f1+0x21c7+-0x1*0x3d7b))['slice'](-(0x16*0x13a+0x423+0x5*-0x639));}return decodeURIComponent(_0x41e3c3);};_0x3223['cyQIIm']=_0x56695f,_0x3223['iDEeeO']={},_0x3223['EQFPkF']=!![];}const _0xc0271d=_0x1f0e77[-0x15db+0x95a+0xb*0x123],_0x56ff7a=_0x38d2d6+_0xc0271d,_0x4e2900=_0x3223['iDEeeO'][_0x56ff7a];if(!_0x4e2900){const _0xf03983=function(_0x26391b){this['cKpczv']=_0x26391b,this['pmVZhf']=[-0x1*-0x64b+0x713*0x4+-0x2296,0x25*0x3+-0x1b8b+0x1b1c,0x632+-0x2*-0xa62+-0xe*0x1ed],this['ZuoYPz']=function(){return'newState';},this['EckVTT']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['yIAjON']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xf03983['prototype']['gbfaoS']=function(){const _0x504fe4=new RegExp(this['EckVTT']+this['yIAjON']),_0x24e0b8=_0x504fe4['test'](this['ZuoYPz']['toString']())?--this['pmVZhf'][-0x6e7*-0x2+0x1*-0x12ab+-0xb2*-0x7]:--this['pmVZhf'][-0x56d+0x5*-0x261+0x2e3*0x6];return this['YAqfzF'](_0x24e0b8);},_0xf03983['prototype']['YAqfzF']=function(_0x309313){if(!Boolean(~_0x309313))return _0x309313;return this['KBUkgH'](this['cKpczv']);},_0xf03983['prototype']['KBUkgH']=function(_0x284c0c){for(let _0x5a9d15=0x7*-0x139+0x2182*-0x1+0x2a11,_0x10e4e4=this['pmVZhf']['length'];_0x5a9d15<_0x10e4e4;_0x5a9d15++){this['pmVZhf']['push'](Math['round'](Math['random']())),_0x10e4e4=this['pmVZhf']['length'];}return _0x284c0c(this['pmVZhf'][0x2566+0x34b*-0x7+-0xe59]);},new _0xf03983(_0x3223)['gbfaoS'](),_0x46db52=_0x3223['cyQIIm'](_0x46db52),_0x3223['iDEeeO'][_0x56ff7a]=_0x46db52;}else _0x46db52=_0x4e2900;return _0x46db52;}import{getContext}from'../../../../st-context.js';import{getElContext,processWorldBooksWithTrigger}from'./promptReq.js';import{extractCharacterAndOutfitTags,handleExtractedData}from'./newline_fix.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText,getEnabledCharacterImages,getEnabledOutfitImages,getCommonCharacterImages}from'./settings/worldbook.js';function _0x5f0b(){const _0xfdfe6d=['r2vUxsdLKiJLUBBNM7JPGRVMTOG','Aw5MBW','8j+NQIdMRApLIjNMTyVOR5xMQkhLVi/LT7lLKk8','C3rYAw5N','BwPgrhy','ywrK','CMvZDwX0','zhL5rNG','sujcruC','r2vUxsbuCMLNzW','B25LCNjVCG','zxnWB25ZztO','wffOt0u','54k55yE75lIk5PA55OYj6zkU5RE75yQG5y+c6icd','uhzTA3G','AKnnBeq','mte4otu4mfjqthrtCq','CK5hEuu','i3rVCc1Zzxr0Aq','zw5LCG','Cg9WDxaTAgLUDa','C3vJy2vZCW','zejUquu','rfPWvNq','C3bHBG','AMv6AKq','zgL2','zujUB3e','v2jLBMi','tMXuqKu','A2v5','B2foBfu','Bg9N','y3rYBeTLEq','wKHgvum','zfPAs2u','rfvrsei','zMLSzxm','CxvLCNLtzwXLyW','uxnfEgi','qNbxEKO','CMvTB3zLrxzLBG','5BEY5y+w5RAi6kEs6iMY55sF5OIq','zfDTvxi','BxvSDgLWBgu','ywqTAgvHzgvY','DeXPC3rLBMvY','DgvZDe1Vzgu','EfjHrxu','wuDeDLy','At4G5RE75yQG5zU+54Mh','v2f3uuS','ywqTyNrU','yNv0Dg9U','mtu2ndCYofP3B3bQva','ihbYB21WDdO','Dgv4Da','y2XPy2S','r2vUxsbtDgfYDa','rvnjr05Fr0vuxW','DxrWDxq','B2HTtMO','wLv5C3K','vNDUrgK','CMvTB3zLtgLZDa','ww9NueG','qMLguLm','suq6ia','qwrxrKC','AwH1BgS','vwferLu','vhzHu1u','5BYpic0GteXnioIVT+AXGG','zxbQCue','AwL5uLC','sfPlsfm','xsbgywLSzwqGDa','vfftq04','DxnLCG','DxnLCI1Kzw1HBG','Aw5NoG','zvH2Eum','q3P6Dwu','suD3zeC','vhb5C2S','vLLvqLe','DMfSDwu','ChvZAa','B2jQzwn0','Cg9WDxaTDgL0Ba','q0Lxz2K','6i635y+w6kEs6iMY6k6+6k6H5O+q56s66k+n6lAf','teXnx0niqvjFra','A2v5zg93BG','C2vHCMnO','y3rLCIb0CMLNzW','C3qTy2HHDhu4lq','zvr6quS','EM5IBMu','zu91vxi','zgvZAwDUieXmtq','uvr2EuK','terbshi','y2XHC3nmAxn0','s3P0BNq','B25Z','uxrszMm','u3Dtq3e','zKrwqui','BfHju3q','s0nkDMW','uKDXtNy','n1fhuxHQuq','zgvMyxvSDenOyq','tM1RC24','B21WDcaOsuq6ia','wevbC1O','DeLsrge','uMXPEKW','teXnioIVT+AXGUwKSEI0Pq','vLHuChm','r2vUxsbsyxCGta','zgvSzxrL','y2XVC2LUzW','r2vUxsbfEhrYyq','DKLYBLK','CMvWBgfJzufSBa','CMvHzefZrgf0yq','y2HHBMDL','r2vUxsdMRApLNkJLPitNKiBOP5i','Dgv4DenVBNrLBG','wNjeufu','zxjcuuC','C3rHCNrZv2L0Aa','lsdLKi7NU63MK43KVzZLT7lOT7pOV4C','BfLjsMC','zLH1B2m','wfPhq1e','yLb1yue','r2vUxsdMLlBPM4BOP5lOIBiV','A3fjwu8','z1fVzKW','zc1VDMvYBgf5','DKvntLq','r2vUxsbvC2vYia','5y+c6icd5zU+54Mh','zfLTEfu','C3rVCfbYB3bHzW','CMfUzg9Tvvvjra','ANP5tvO','qMP3ueu','AhvPC0C','5PYQ5zYOieXmtsdOVPpLH7RKUk0','6kEs6iMY6k6+6k6HieXmtsdOR7C','i3nLBMrFzM9YBq','DNHiB1G','y3rLzcbKyxrHoG','Cg9WDxaTDxbSBW','Au1brKi','teHpwee','BKzqzey','zgvTyw5KoG','Bwf4sgvPz2H0','rvnjr05FuKvrvq','DgLUzYbJAgfYia','zM9YrwfJAa','CKrLBwfUza','6kEs6iMYl+ACJEIJHEIUVUIUOEwKHoEqHUwUJa','ufjptvbux1jfuW','q0XUuhq','vvjm','A0LYyKO','Ev9Kzxb0Aa','zM91BMqGAw4GBW','D3jHChbLCG','CgXHy2vOB2XKzq','mtvPzMvwsNy','EhPhzvy','6Aoo5Rgj5PYn55Qe5Bcr5AwZ6kEs6iMY77Ym5RIP','qKzIC1u','6iMY5OIw5PYn6kof55Qe5yw35l2t6zYa5Rgc','rxnJyxbL','Au9ZAKS','BezUvwS','rK1pD08','zMLSzq','zMeTC29SAwqGzG','Du1SALC','Cg9WDxaTyNrUlq','Cvv2Ege','AM9PBG','ndvxweP6DfO','tNj4B1i','BM9Uzq','uhP3CK0','Bfjvv24','yun4zeO','svvouhO','Ehf1Bxi','rhv6rw0','uu9Yru8','qxbbuKe','ALrVr1O','vvvNB2m','Be5Tteu','z05Uthu','zvrRtgu','z0jzzKe','DgfYz2v0','B2rL','ueD6wMq','rvreqvu','rgTfv2O','ChjVBxb0','Aw5UzxjizwLNAa','zKf1sxC','C3vIC3rYAw5N','te0GB3v0Chv0ia','zgf0ytO','z2v0qM91BMrPBG','BwjqCe0','BvHNz0S','BK1Yq3i','BhbHzwG','B2fJBNq','w3nOB3DvC2vYra','ywqTC2vJDgLVBG','mJKYmZCWC29PCwPu','6kEs6iMY5PYn6kof5y+c6icd5zU+54Mh','6iMYl+ACJEIJHEIUVUIUOEIVT+AXGI4U','yxv0BW','y3Dhwui','Aw1Hz2vFDxjS','DvL3Dhq','CwfZCgi','q1DPzwu','wffxywe','CNnYsgC','igjVB2SGy29UDa','mte4nteYofLnCNb3uG','CunjA1u','r2P2y3C','zgf0ytPPBwfNzq','Cg9WDxaTzw1WDa','zxbysxK','ue9ou0u','DhLWzq','yxbWBhK','CM1uqwC','zxjYB3i','quzQB3a','D2fYBMLUzW','txjqugy','AfjkrwW','Dg9W','A1vUBgm','sMjyCfu','yxrPB24','yxjLyq','De1Hsei','BwLU','Aw1N','r2vUxsdLT7lLSiy','y29UzMLYBq','vvHyEeq','55sO77YA5BEY5ygC5Q2I6kEs6iMY6k6+6k6Hia','y2fUy2vSBgvKia','swDTDMC','6kkR5l2/55sO77YA','zgv0ywLS','D3n4rgG','zgfHyMu','CvHLu2m','Cg9WDxaTAw1Nlq','r2vUxsboBYbJAa','qLPjExK','ywnJzxb0','Aw5WDxq','AKj0BLy','Aufvuhi','Cg9WDxaTChjLDG','u1ndvKG','txDNsxG','Aw1Hz2uV','zw50','zw50oG','AenRBvq','C3r5Bgu','tuDwzfa','vfDQBK0','Aw1Hz2uVkG','nZe2odjsAKTrBvq','r2vUxsdMRApLIjNMTyVOR5xMQke','qKj5Auu','DhjPBq','yM90Dg9T','Awv3lwnVBNrHAq','DvL1ENi','Ae9uBwi','iow8OowBVUEjHW','Cg9WDxaTyNvIyG','ruTtsvK','Aw1Hz2vZ','AxnbCNjHEq','vvbWquW','DMfYAwfIBgvZ','zLjcA1K','vMDpAK8','A29Sq0u','zKnXuKu','reHfALm','y2HHDe1LDgfKyq','EhqGzwXLBwvUDa','sKHVwLC','CgHNB3y','DgHLihjLCxvLCW','5yIW5RAi5OgV57sI5BYv','A3fLwvC','q3rUuhC','EeDIveS','rwrcENG','vMTRquO','Aw5Uzxjive1m','y2XHC3noyw1L','y3jLyxrLrwXLBq','werJwvO','5l6l5AAc77YA55sF5OIq5lIa5lIQ56M/552a5y+K','v05ltNe','r3n0wLG','ihjLCxvLC3qUlG','Eg1Av2K','BgXTx2HPC3rVCG','quLVEw0','BgvUz3rO','ALDHr0i','tgrPBfG','mtmWnZLQvNPeBMi','zMzLs2G','v3fptxy','yMfZzty0','zNzzv04','r2vUxsdMIB7LIldNLkJMIlFMTOG','AfzwvhO','Bwf4','qKDruMC','rxDzqLO','uLH2D0e','5BEY5RE75yQGia','5OgV5zcooG','tNzxzNe','q2jYAwu','A09sEei','y3rLCIbSAxn0ia','uxvqvuS','DxrWCeK','r2vUxsbfEgvJDq','tLn2qKW','z2u6','BhbNwxO','qwDZAey','ywXnsgS','C2XPy2u','qwvnD0S','yKXUwMi','5Rgc6lAf5PE2','A1HkExy','AvjuuLG','ENzuz0C','yxbWzw5Kq2HPBa','yxjHy3rLCI9VDq','yM9KEq','wxPMvw4','u0jsEe4','5BYG5zU+54Mh6zMe5yQG5yIW5RAi5OgV57sI5BYv','Aw5Uv1O','rw50zxi','Aw5JBhvKzxm','vvLRDue','qwXVzKW','y2HHCL9KzxnPzW','vhHSsem','seDQBvK','uu5mrwS','y2HHCMfJDgvYCW','r2vUxsbdAgfYyq','C3rLBMvY','BuLeEwe','8j+oQcdOVPpLHAxNLj/MIjdPNidMSyi','Es1OAw50','B25SB2fK','yKLkAwy','v2ndC3C','vuvtva','vhDJEgK','C3rPBMCGy2HHCG','w2nOyxjHy3rLCG','5PYn6kof5zU+54Mh5AsX6lsLoG','uevPsuG','DM5OyuC','wg13v00','C0n3Bfu','Cg9WDxaTyNv0Da','CM9Szq','t3jdwxK','z0nSAwvUDfjLyW','AunUCvy','y291BNq','BMfTzq','zxvXwLe','y29UDgvUDa','DhburMS','zxiGDgv4DdO','ywrKrxzLBNrmAq','q1DkvMG','t3vVwNq','sxPtAfa','56gU5A6A55sF5OIq','r2vUxsbdB250zq','C1PSv1m','otm4nfbTBefnyW','Eu9oB3e','yNHPzwe','B3nYtfO','tuXyA3q','C1fsqxi','8j+tJIdLJ4lOGipLM77NIyFVViJLJ6/PGiNVViK','rNrdBhu','DgnMuwW','t05trq','BK1Mree','CwzougC','zxjztxG','qMrYCwy','5BEY6lEZ6l+h','DxjS','ywziz3q','z2T1ruW','zgLZCgXHEq','zM9JDxm','sKDvAxO','wNjLDKm','r2vUxsbgAw5HBa','quPdr0S','rvnjr05FuKvtua','C3bSAwnL','C0n0zgq','yw1Tve8','s095uhO','AurVD20','5BYG6kEs6iMYl+ACJEIJHEwBVUEjH+MzHowkOa','CeLtCMy','zM9YigrLyNvNzW','ndK1DhPTBKzk','BKnuBeG','rwLXCMq','ExPmEgG','Dg9tDhjPBMC','kcGOlISPkYKRkq','Dg9Y','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','Dgv4DgfYzwe','Ahbruhi','A2rpwgm','l3bUzZTIyxnLnG','q3rVuKO','BwfNzxmGy291BG','z2vwtMe','AgTzuLC','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','CwfJq1a'];_0x5f0b=function(){return _0xfdfe6d;};return _0x5f0b();}import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{isMobileDevice,removeThinkingTags}from'./utils.js';function _0x109a24(_0x12dbef,_0x17214f,_0x338f49,_0x95bab6){return _0x3223(_0x17214f- -0x9c,_0x338f49);}import{mergeAdjacentMessages,replaceAllPlaceholders}from'./promptProcessor.js';function showUserDemandPopup(){function _0xeee022(_0x196101,_0x31d2ef,_0x2f7150,_0x250658){return _0x3223(_0x250658- -0x178,_0x2f7150);}const _0x136ef8={'hkYRW':function(_0xe636f6,_0x565e43){return _0xe636f6(_0x565e43);},'nMrCr':_0xeee022(-0x20,0xa4,-0x74,0x5),'kXJyv':function(_0x386860,_0xfc238c){return _0x386860===_0xfc238c;},'YzfUn':_0x5f2538(0x38b,0x4c7,0x3d5,0x476),'ETDAU':_0x5f2538(0x3ef,0x4c1,0x4d0,0x435),'QuPUK':'cnEAk','dWmUr':_0x5f2538(0x515,0x3be,0x4d0,0x4a2)+'emandPopup'+_0xeee022(0x8b,-0x5e,0x41,-0xc)+'o\x20read\x20ima'+_0xeee022(-0x123,-0xb4,-0x11c,-0xc9),'OUWrv':function(_0x4ec89b){return _0x4ec89b();},'fvYWN':function(_0x5582af,_0x287667){return _0x5582af!==_0x287667;},'AlofL':'zmwRp','MKEMf':'sKQZI','mjFDv':_0xeee022(-0x75,-0xae,0x1b,-0xb7),'EKSIY':'BjwPE','VgOjO':function(_0x4e208a,_0x3c2a2f){return _0x4e208a(_0x3c2a2f);},'OrCYy':_0xeee022(-0xa5,0x59,0x105,0x23),'ZUysy':function(_0x325ee7,_0xbc5d04,_0x2c260a){return _0x325ee7(_0xbc5d04,_0x2c260a);},'AdWFG':'Clbem','StZhI':_0xeee022(-0x133,0x49,-0xce,-0x8f),'hVVTz':_0x5f2538(0x4a1,0x358,0x48f,0x421)+_0xeee022(0x173,0x110,0x13c,0xb9)+_0x5f2538(0x4f4,0x499,0x45c,0x46f),'BZIyy':_0x5f2538(0x500,0x3dc,0x4a9,0x4c6),'dBnAE':_0xeee022(-0xbf,-0xe9,0x18,-0x23),'TvaSU':_0xeee022(0xb0,0xca,-0x4c,0x8)+'popup-img-'+_0xeee022(0xc0,0xee,-0x31,0x22),'WcCsw':_0xeee022(0x6c,-0x74,0xa9,-0x1f),'iAUPr':'st-chatu8-'+_0xeee022(0x9f,0x19e,0xa7,0xb9)+_0x5f2538(0x3cc,0x44e,0x410,0x382),'bIJif':function(_0x1c0b50,_0x40137){return _0x1c0b50===_0x40137;},'kolCE':function(_0x30af15,_0x2a40b9){return _0x30af15===_0x2a40b9;},'vtyWG':_0x5f2538(0x32f,0x2b6,0x2c5,0x348),'dyyFx':_0xeee022(-0x3a,-0x44,-0x80,0x8)+_0x5f2538(0x44c,0x443,0x579,0x4b4)+_0xeee022(-0x36,-0x8b,0x10,-0xaa),'huisG':_0xeee022(0xc,0x36,-0xc8,0x8)+'popup-img-'+_0x5f2538(0x2b9,0x335,0x35b,0x381),'Gjvcw':function(_0x1a5e3e,_0x22a87d){return _0x1a5e3e-_0x22a87d;},'nFPdF':_0xeee022(-0x11c,-0xd8,-0x6,-0x46)+'ngs-holder','SwSCq':_0x5f2538(0x429,0x3c6,0x472,0x3c0),'fCqRE':_0x5f2538(0x2f5,0x3fe,0x2f0,0x390),'YogPH':function(_0xe16e38,_0x5143cc){return _0xe16e38+_0x5143cc;},'jCMlD':function(_0x5a1c98,_0x865c13){return _0x5a1c98!==_0x865c13;},'innWZ':_0xeee022(0x3,0xef,0x8f,0x95),'eTzAK':_0x5f2538(0x39d,0x3a7,0x3a2,0x3db),'HaINh':'st-chatu8-'+'popup-over'+'lay','qhASu':_0xeee022(-0x88,-0x6f,0x8e,0x8)+_0x5f2538(0x35d,0x329,0x282,0x317)+'le','DQqJz':'mobile','lRUWn':_0x5f2538(0x435,0x344,0x292,0x36e),'gQofL':'请描述您希望生成的角'+_0x5f2538(0x3ca,0x515,0x3c5,0x475),'JzHdE':_0x5f2538(0x353,0x4fd,0x47b,0x421)+_0xeee022(-0x57,-0xa,-0x27,-0x44),'alMHk':_0x5f2538(0x406,0x421,0x48c,0x3b7),'CIWgi':_0xeee022(-0x11a,-0x5b,-0x118,-0xe8)+_0xeee022(0xab,0x5f,0xab,0x5a)+'柔可爱...','QtRfc':_0xeee022(-0x5f,-0x5b,0x38,0x8)+_0x5f2538(0x409,0x4f1,0x393,0x45e)+_0x5f2538(0x589,0x556,0x4ef,0x4a3),'AFjop':_0xeee022(0x5e,0x54,0xe3,0x8)+_0xeee022(0x4a,0xef,0x43,0x45)+_0xeee022(0x44,-0x38,-0x44,-0x2b),'NlTBE':_0xeee022(-0xe9,-0x8,-0xad,-0x40),'Pbdqg':_0xeee022(0x16,0x38,-0x30,-0x85),'BFbsU':_0x5f2538(0x483,0x4e4,0x4a4,0x421)+_0xeee022(0x115,0x10d,0x98,0x45)+'ad-label','OQMmb':_0xeee022(0xcc,0x2d,0x6,0xbd),'ihulk':_0x5f2538(0x3bf,0x431,0x3cb,0x47a),'yONoq':'<i\x20class=\x22'+_0x5f2538(0x3d9,0x533,0x467,0x47b)+'a-plus\x22></'+_0x5f2538(0x437,0x4c2,0x337,0x3f3),'bPuaA':_0x5f2538(0x4e1,0x414,0x344,0x421)+_0x5f2538(0x529,0x52e,0x3c9,0x45e)+_0x5f2538(0x48e,0x490,0x42f,0x3f5),'ZHFUC':_0x5f2538(0x408,0x3a6,0x3db,0x3ce)+'图片','TAGkG':_0xeee022(-0x13,0x27,0x2,0x28),'hRJEl':_0xeee022(0x7f,0x6a,-0x4a,0x8)+_0xeee022(0x107,0xfe,-0x18,0x64)+'cancel','HZKHS':'st-chatu8-'+_0x5f2538(0x41d,0x53d,0x4ad,0x47d)+_0xeee022(-0x37,0x69,0x112,0xaf)};function _0x5f2538(_0x18b945,_0x537748,_0x364221,_0x1578eb){return _0x3223(_0x1578eb-0x2a1,_0x18b945);}return new Promise(_0x1de56f=>{const _0x3408ee={'osrLZ':_0x43cc41(0x17b,0x142,0x19c,0x11b),'FMOwO':function(_0x53664b,_0x4b4770){function _0x108cb3(_0x4442d4,_0x11fea0,_0x1c510c,_0x217d1a){return _0x43cc41(_0x4442d4-0x9d,_0x217d1a-0x3a3,_0x1c510c-0xdb,_0x1c510c);}return _0x136ef8[_0x108cb3(0x41c,0x335,0x478,0x40a)](_0x53664b,_0x4b4770);},'JbXpU':_0x136ef8[_0x2f0f1a(-0x3b,-0xf8,-0x114,-0x8e)],'VYUBQ':function(_0x4745fa,_0x2fa31d,_0x6e9dde){function _0x18e600(_0x49e519,_0x555501,_0xd8dcf1,_0x1409dc){return _0x2f0f1a(_0x49e519-0x190,_0xd8dcf1,_0xd8dcf1-0xfd,_0x555501-0x236);}return _0x136ef8[_0x18e600(0x27e,0x229,0x252,0x15d)](_0x4745fa,_0x2fa31d,_0x6e9dde);},'ZrevC':_0x136ef8[_0x43cc41(0xb2,0x14e,0x18f,0x1b8)],'wsxDh':function(_0x454bdd){return _0x136ef8['OUWrv'](_0x454bdd);},'qaspb':_0x136ef8['StZhI'],'gBYfA':_0x2f0f1a(-0x6,-0x40,-0xff,-0x31),'BByiE':_0x136ef8[_0x43cc41(0xa6,0x8a,0x147,-0x1b)],'fDVAB':_0x136ef8[_0x2f0f1a(0xa,0x188,0x77,0xc8)],'PGzZd':_0x136ef8[_0x43cc41(0x97,0x120,0x1db,0x133)],'mIDya':_0x136ef8[_0x43cc41(0x1ee,0x151,0x19c,0x70)],'mbPpM':_0x136ef8[_0x2f0f1a(-0x58,-0x74,-0x4,-0x9a)],'Wbenb':_0x43cc41(0x2ac,0x21f,0x2af,0x1da),'sCwlU':_0x136ef8[_0x2f0f1a(0x57,0x11f,0x185,0xcc)],'KlpKc':function(_0x1e3416,_0x7712d5){function _0x5001e6(_0x499c25,_0x50a968,_0x14449f,_0x2f4b5c){return _0x43cc41(_0x499c25-0x13f,_0x2f4b5c-0xb9,_0x14449f-0x44,_0x50a968);}return _0x136ef8[_0x5001e6(0xb2,0x179,0x1db,0x173)](_0x1e3416,_0x7712d5);},'SBRxN':'vTJqo','lpaeh':function(_0x4c328c,_0x19bee3){function _0x51b4f5(_0x41d9c7,_0x2dcd88,_0xf90226,_0x362e10){return _0x43cc41(_0x41d9c7-0x189,_0x362e10-0x2b9,_0xf90226-0x82,_0xf90226);}return _0x136ef8[_0x51b4f5(0x3a1,0x3c4,0x315,0x35a)](_0x4c328c,_0x19bee3);},'iRTRX':function(_0x37096c,_0x174a1e){function _0x4276ee(_0x262fd3,_0x53a818,_0x4ffa74,_0x476e5b){return _0x2f0f1a(_0x262fd3-0x196,_0x53a818,_0x4ffa74-0x1c2,_0x262fd3-0x26d);}return _0x136ef8[_0x4276ee(0x180,0x18d,0x1b0,0xbd)](_0x37096c,_0x174a1e);},'BiFRS':_0x136ef8['vtyWG'],'DZpVt':_0x136ef8[_0x2f0f1a(0x87,0x69,0x97,-0x44)],'iiyRW':_0x136ef8[_0x43cc41(0x1de,0x1a1,0x225,0xbd)],'iMAFB':function(_0xba77cc,_0x199b60,_0x4d6136){return _0xba77cc(_0x199b60,_0x4d6136);}},_0x24c42e=isMobileDevice(),_0x2ac8d5=[];let _0x5c02c9=0x24bd+-0x4b6+0x1af*-0x13,_0x27d61a=_0x136ef8[_0x2f0f1a(0x45,0xdf,0x41,0xa6)](window[_0x43cc41(0x101,0x1e0,0x152,0x130)+'t'],0x1*0x19de+-0x1911+-0xc3);if(_0x24c42e){const _0x558e6b=document[_0x2f0f1a(-0x53,-0xc1,-0x7,-0x25)+_0x43cc41(0x191,0xfe,0xa2,0x147)](_0x136ef8[_0x2f0f1a(-0x69,0xf5,-0x1,0x55)]);if(_0x558e6b){if(_0x136ef8[_0x43cc41(0x260,0x175,0x169,0xe6)]===_0x136ef8[_0x43cc41(0xad,0x69,0x2e,0x127)])return _0x93fd89;else{const _0x4d11c8=_0x558e6b[_0x43cc41(0x265,0x1e5,0x180,0x2cf)+_0x43cc41(0x126,0xc8,0x17,0x14)+'t']();_0x5c02c9=Math[_0x2f0f1a(-0x15e,-0xd,-0x105,-0xca)](0x11a5+-0x382*-0x5+-0x2325,Math[_0x43cc41(0x1db,0x20e,0x262,0x1ec)](_0x136ef8[_0x43cc41(0x111,0x14b,0x149,0x1f8)](_0x4d11c8[_0x43cc41(0x246,0x231,0x2cf,0x1bc)],0x1*-0x8b8+-0x107b*-0x1+-0x7b9),window[_0x43cc41(0x1fb,0x1e0,0x279,0x11a)+'t']*(-0x15bd+0x1a5d+-0x4a0+0.5)));}}const _0x5e081f=document[_0x2f0f1a(-0x108,0x5e,-0x101,-0x25)+_0x2f0f1a(-0x3d,-0x98,0x2e,-0x57)](_0x43cc41(0x198,0x1a4,0x16b,0xf8));if(_0x5e081f){if(_0x136ef8[_0x2f0f1a(0x1b,0xad,-0x104,-0x3c)](_0x136ef8[_0x2f0f1a(-0xf6,-0x193,-0x24,-0xab)],_0x43cc41(0x247,0x1f7,0x281,0x1ce)))_0x136ef8['hkYRW'](_0x326401,{'text':_0x8ed3ee[_0x43cc41(0x249,0x160,0xde,0xff)][_0x43cc41(0x185,0x230,0x306,0x179)]()||null,'images':[..._0x6372fb]}),_0x48d491['removeEven'+_0x43cc41(0x221,0x138,0xc7,0x1a5)](_0x136ef8[_0x2f0f1a(0xd,0x2f,0x150,0x93)],_0xf9f206);else{const _0x536ea3=_0x5e081f[_0x43cc41(0x166,0x1e5,0x2ae,0x185)+'gClientRec'+'t']();_0x27d61a=Math[_0x43cc41(0x125,0x8b,0x6,0xbf)](_0x5c02c9+(0x204+0xbfd+-0xd39),Math[_0x43cc41(0x251,0x20e,0x1a2,0x29d)](_0x536ea3[_0x43cc41(0x153,0x208,0x256,0x206)]-(-0x10f1+-0x5*0x53c+0x2b27),_0x136ef8[_0x43cc41(0x27b,0x1fb,0x195,0x293)](window['innerHeigh'+'t'],0x1a05+0xd8b*-0x2+0x11b)));}}}const _0x533481=Math[_0x43cc41(0x10f,0x8b,0xb1,0xe0)](-0x6d0*0x1+-0x1aa0+-0x49*-0x78,_0x27d61a-_0x5c02c9),_0x52dc6b=document['createElem'+_0x43cc41(0x1c8,0x226,0x198,0x1c1)](_0x136ef8[_0x2f0f1a(0x5b,0xf8,0x87,0x16)]);_0x52dc6b['id']=_0x43cc41(0xbf,0x159,0x174,0x206)+_0x2f0f1a(0x79,0xc6,-0x18,0x43),_0x52dc6b[_0x2f0f1a(-0xa5,-0x34,-0x157,-0xde)]=_0x136ef8['HaINh'];const _0x50a7c0=document[_0x2f0f1a(-0x12b,-0x145,-0x10c,-0xdd)+'ent'](_0x136ef8[_0x43cc41(0x1ea,0x16b,0xab,0xea)]);_0x50a7c0['className']=_0x136ef8['qhASu'];_0x24c42e&&(_0x50a7c0[_0x43cc41(0xfd,0x171,0xb5,0x22b)]['add'](_0x136ef8['DQqJz']),_0x50a7c0[_0x2f0f1a(0xa4,0xbc,-0x13,0xd4)][_0x43cc41(0x291,0x208,0x277,0x2ec)]=_0x5c02c9+'px',_0x50a7c0[_0x43cc41(0x2e0,0x229,0x197,0x215)][_0x2f0f1a(-0x15,0x105,0xf0,0x57)]=_0x533481+'px');const _0x106538=document['createElem'+_0x2f0f1a(0x48,0x1b6,0x30,0xd1)](_0x136ef8[_0x2f0f1a(-0x8f,-0x4d,-0x50,0x16)]);_0x106538[_0x43cc41(0x1c7,0x18c,0x17c,0xe2)+'t']=_0x136ef8[_0x2f0f1a(-0x2b,0x58,0x157,0x78)],_0x106538[_0x2f0f1a(-0x1b4,-0x18c,-0x18a,-0xde)]=_0x2f0f1a(-0x2,0x3f,-0x1f,0x15)+_0x2f0f1a(0x88,-0x35,0xeb,0xe)+'e';const _0x16653c=document['createElem'+_0x2f0f1a(0xbd,0xfb,0x1b,0xd1)](_0x136ef8[_0x43cc41(0x20e,0x16b,0x188,0x1e7)]);_0x16653c[_0x43cc41(0x23d,0x18c,0x1e4,0x133)+'t']=_0x136ef8[_0x43cc41(0x20d,0x197,0xf2,0x11c)],_0x16653c[_0x43cc41(0xf2,0x77,0x147,0x1f)]=_0x136ef8['JzHdE'];function _0x2f0f1a(_0x3533bc,_0x3e0b41,_0x744822,_0x3d3093){return _0x5f2538(_0x3e0b41,_0x3e0b41-0x174,_0x744822-0x11f,_0x3d3093- -0x40c);}const _0x335a45=document['createElem'+'ent'](_0x136ef8[_0x2f0f1a(-0xd6,-0x152,-0x16a,-0xb9)]);_0x335a45['placeholde'+'r']=_0x136ef8[_0x2f0f1a(0x49,0x24,-0x43,0xf)],_0x335a45['className']=_0x2f0f1a(0x31,-0x4c,0xee,0x15)+'popup-text'+_0x43cc41(0x2bf,0x20c,0x14e,0x27a);const _0x23c1e8=document[_0x43cc41(-0x2d,0x78,0x66,0x10c)+_0x2f0f1a(0x3c,0x4e,0x133,0xd1)](_0x43cc41(0x1f2,0x124,0x9e,0xf2));_0x23c1e8[_0x43cc41(0xf9,0x77,0xeb,0x117)]=_0x136ef8[_0x2f0f1a(0x81,0x102,0x2e,0x1f)];const _0x276f13=document[_0x43cc41(0xc,0x78,0xf,0xa8)+_0x2f0f1a(0x1b8,0x19e,0x193,0xd1)](_0x136ef8[_0x2f0f1a(0xce,-0xc9,-0x67,0x16)]);_0x276f13[_0x43cc41(0x15e,0x77,-0x6f,0x70)]=_0x136ef8[_0x2f0f1a(0x9d,0xd3,0x17b,0xaf)];const _0x420b1a=document[_0x2f0f1a(-0xf7,-0x77,-0x30,-0xdd)+_0x2f0f1a(0xe2,0xe8,0x1b3,0xd1)](_0x136ef8[_0x43cc41(0x67,0x127,0x91,0x9c)]);_0x420b1a['textConten'+'t']=_0x136ef8['Pbdqg'],_0x420b1a[_0x43cc41(0x12c,0x77,0x11b,0xa)]=_0x136ef8[_0x43cc41(0x1f4,0x1bd,0xe5,0x24e)];const _0x3570d8=document[_0x43cc41(0x6e,0x78,0x12c,0xbc)+'ent'](_0x136ef8['OQMmb']);_0x3570d8[_0x43cc41(0x13d,0x200,0x14f,0x198)]=_0x136ef8[_0x2f0f1a(0xbe,0x3c,-0x34,-0x6)],_0x3570d8[_0x2f0f1a(0x9d,0x4f,0x37,0xc9)]=_0x43cc41(0x2c4,0x22c,0x2fc,0x154),_0x3570d8[_0x2f0f1a(0x21,0x96,0x2,-0x1f)]=!![],_0x3570d8[_0x43cc41(0x2a8,0x229,0x274,0x1c1)][_0x43cc41(0x1c4,0xe9,0x71,0x5e)]=_0x2f0f1a(0xd9,-0x23,-0x3e,0x76);const _0x4598f0=document[_0x2f0f1a(0xc,-0x101,0x5,-0xdd)+_0x43cc41(0x22f,0x226,0x2f6,0x277)](_0x2f0f1a(-0x8c,-0xa7,0xb5,-0x16));_0x4598f0[_0x2f0f1a(-0x27,0x6d,0x158,0xab)]=_0x2f0f1a(-0x6,0xd0,-0x7,-0x16),_0x4598f0['innerHTML']=_0x136ef8[_0x2f0f1a(-0x119,0xe,-0xbc,-0x7d)],_0x4598f0['className']=_0x136ef8[_0x2f0f1a(0x90,-0x6e,0xa2,0x3f)],_0x4598f0[_0x43cc41(0xa6,0xd0,0x11d,0x111)+_0x2f0f1a(-0x57,-0x6f,-0x8d,-0xa0)](_0x136ef8[_0x43cc41(0x55,0xbb,0x90,0x186)],()=>_0x3570d8['click']()),_0x276f13[_0x43cc41(0x62,0xa4,0x6,0xf2)+'d'](_0x420b1a),_0x276f13[_0x43cc41(0x86,0xa4,0x37,0x13e)+'d'](_0x4598f0);const _0x247e4f=document[_0x43cc41(-0x40,0x78,0x5f,0x78)+_0x2f0f1a(0x15c,0x132,0x6c,0xd1)](_0x136ef8[_0x43cc41(0xf4,0x16b,0x136,0x239)]);_0x247e4f[_0x43cc41(0x80,0x77,0xf7,0xb2)]='st-chatu8-'+_0x2f0f1a(-0x3,0xa4,0x87,0xcd)+_0x43cc41(0x27b,0x232,0x308,0x188)+'ner';const _0x1cb84b=document[_0x2f0f1a(-0x167,-0x21,-0x12c,-0xdd)+_0x2f0f1a(0xde,0x85,0x11d,0xd1)](_0x136ef8['eTzAK']);_0x1cb84b[_0x2f0f1a(0x45,-0x3,0x50,0x37)+'t']=_0x136ef8[_0x2f0f1a(-0x35,-0xe7,-0xcf,-0x29)],_0x1cb84b['className']=_0x136ef8[_0x43cc41(0xd6,0x111,0x162,0x1db)],_0x247e4f[_0x2f0f1a(-0xc5,0x33,-0x64,-0xb1)+'d'](_0x1cb84b);function _0x1f948d(){const _0x1f4014={'Igmvg':function(_0x4abeef,_0x51cf38){return _0x4abeef===_0x51cf38;},'EdBzx':_0x3408ee[_0x25ecdb(-0x56,-0x72,0x83,-0xdd)],'hpQPr':_0x25c302(0x416,0x321,0x39e,0x3db),'sQRAr':function(_0xaf3e5b){function _0x27ff25(_0x457c2e,_0x4acfca,_0x1d4176,_0x2b3268){return _0x25c302(_0x457c2e-0x1b0,_0x4acfca-0x1f2,_0x4acfca,_0x457c2e-0xd2);}return _0x3408ee[_0x27ff25(0x613,0x58f,0x624,0x6f3)](_0xaf3e5b);},'UqaDk':_0x3408ee[_0x25ecdb(0xb2,0xba,0x11c,0xe4)],'BGQRg':_0x3408ee[_0x25c302(0x41c,0x538,0x4c4,0x502)],'qDqDb':_0x3408ee[_0x25c302(0x4b7,0x582,0x4ca,0x558)],'epXIy':_0x3408ee[_0x25c302(0x51c,0x4c6,0x4dd,0x49f)],'kORxB':_0x3408ee[_0x25c302(0x560,0x59e,0x591,0x505)],'bLnZb':_0x3408ee[_0x25ecdb(-0x8c,-0x13f,-0x76,-0x8)],'RBVlg':_0x3408ee[_0x25c302(0x57c,0x5b3,0x58f,0x50f)],'qXeSc':_0x3408ee[_0x25c302(0x3d9,0x4ec,0x36a,0x44f)],'jBtnV':_0x3408ee[_0x25c302(0x467,0x437,0x37f,0x403)],'Bdrqf':_0x3408ee[_0x25c302(0x465,0x406,0x3c4,0x3ed)]};function _0x25ecdb(_0xb3cfa,_0x2052b4,_0x28438a,_0x1bfe55){return _0x43cc41(_0xb3cfa-0x1b8,_0xb3cfa- -0x142,_0x28438a-0x8e,_0x1bfe55);}function _0x25c302(_0x128e73,_0x1137b8,_0x5e7020,_0x1466d){return _0x2f0f1a(_0x128e73-0x114,_0x5e7020,_0x5e7020-0x162,_0x1466d-0x47e);}if(_0x3408ee['KlpKc'](_0x3408ee[_0x25ecdb(-0x9a,-0xd2,-0x11b,0xb)],_0x3408ee[_0x25c302(0x396,0x3c9,0x406,0x3d1)])){_0x247e4f[_0x25ecdb(-0xcc,-0x92,-0x18e,-0x169)]='';if(_0x3408ee[_0x25c302(0x579,0x48d,0x49a,0x512)](_0x2ac8d5['length'],0x2039+-0x7*0x38b+-0x64*0x13)){if(_0x3408ee[_0x25ecdb(-0xa0,-0x62,-0x104,-0x5)](_0x25c302(0x5df,0x562,0x5cd,0x4f8),_0x3408ee[_0x25ecdb(0xa,-0xc8,0x6a,0x62)])){const _0x3332b8={};_0x3332b8[_0x25ecdb(0xbe,0x96,0x12c,0x19f)]=_0x3408ee['osrLZ'],_0x3332b8[_0x25ecdb(0x0,-0xaf,-0xb7,-0x4)]='\x0a[以下是用户上传的'+_0x352109[_0x25c302(0x339,0x480,0x38a,0x3aa)]+'张'+_0x5ca2cc+']',_0x387526['push'](_0x3332b8);}else{const _0x2f0d81=document['createElem'+_0x25c302(0x4f3,0x4a1,0x5ea,0x54f)](_0x25c302(0x470,0x484,0x37e,0x44d));_0x2f0d81[_0x25ecdb(0x4a,0xb6,0x124,0x75)+'t']=_0x25c302(0x49a,0x371,0x492,0x440)+'图片',_0x2f0d81['className']=_0x3408ee[_0x25c302(0x526,0x50d,0x3a4,0x44a)],_0x247e4f[_0x25c302(0x395,0x307,0x428,0x3cd)+'d'](_0x2f0d81);return;}}_0x2ac8d5[_0x25c302(0x492,0x5b3,0x54e,0x4d8)]((_0x3845b0,_0x125366)=>{function _0x3f6d51(_0x1bed22,_0x249440,_0x173a44,_0x51565b){return _0x25ecdb(_0x173a44-0x3e7,_0x249440-0x3b,_0x173a44-0x78,_0x1bed22);}function _0xbbd279(_0x4b716a,_0x4f9797,_0x4d243d,_0x88c63c){return _0x25c302(_0x4b716a-0xb,_0x4f9797-0x5a,_0x88c63c,_0x4d243d- -0x576);}const _0x414722={'lpgYz':function(_0x4860b5){function _0x59f4bd(_0x500edd,_0x40f8d2,_0xafc17a,_0x348004){return _0x3223(_0x40f8d2- -0x3cd,_0xafc17a);}return _0x1f4014[_0x59f4bd(-0x25f,-0x2db,-0x21f,-0x275)](_0x4860b5);}};if(_0x1f4014['UqaDk']===_0xbbd279(-0xd9,-0x10a,-0x17a,-0x23c)){const _0x2b4ae3=document[_0x3f6d51(0x3f9,0x252,0x31d,0x320)+_0xbbd279(-0x1b,0xc2,-0x27,-0xf0)](_0x1f4014['BGQRg']);_0x2b4ae3[_0xbbd279(-0x258,-0x215,-0x1d6,-0x145)]=_0xbbd279(-0x6a,-0xe3,-0xe3,-0x83)+'popup-img-'+'item';const _0x56d104=document[_0x3f6d51(0x370,0x2aa,0x31d,0x405)+_0x3f6d51(0x427,0x429,0x4cb,0x586)](_0x1f4014[_0xbbd279(-0x2aa,-0x16f,-0x1c1,-0x133)]);_0x56d104[_0xbbd279(-0x221,-0x202,-0x1d6,-0x116)]=_0x1f4014['qDqDb'];const _0x33d958=document[_0xbbd279(-0x189,-0x200,-0x1d5,-0x24f)+'ent'](_0x1f4014[_0x3f6d51(0x4d3,0x4d9,0x4a3,0x43d)]);_0x33d958['src']=_0x3845b0[_0xbbd279(-0x1c8,-0x1e9,-0x1c6,-0x289)];const _0x78678=document[_0xbbd279(-0x189,-0x1b6,-0x1d5,-0x122)+_0xbbd279(0x15,-0x23,-0x27,-0x71)](_0x1f4014[_0x3f6d51(0x2dd,0x34f,0x338,0x385)]);_0x78678[_0x3f6d51(0x49f,0x3ec,0x4a5,0x538)]=_0x1f4014['kORxB'],_0x78678[_0xbbd279(-0x214,-0x134,-0x1d7,-0x129)]='×',_0x78678[_0xbbd279(-0x12b,-0x164,-0x1d6,-0x230)]=_0x1f4014[_0xbbd279(-0x219,-0x232,-0x1ae,-0x20e)],_0x78678['addEventLi'+_0xbbd279(-0x19d,-0x1f1,-0x198,-0x24f)](_0x1f4014['RBVlg'],_0x3299a0=>{function _0x486002(_0x1a984b,_0x3f89fa,_0x38698e,_0x27c91e){return _0x3f6d51(_0x27c91e,_0x3f89fa-0x7,_0x3f89fa- -0x465,_0x27c91e-0x14f);}function _0x6fb0f8(_0x46c8a7,_0x2770d0,_0x4c0554,_0x1762c0){return _0xbbd279(_0x46c8a7-0x153,_0x2770d0-0x5f,_0x2770d0- -0x3b,_0x46c8a7);}_0x3299a0[_0x6fb0f8(-0xc6,-0xeb,-0x80,-0x25)+_0x6fb0f8(-0x87,-0x7d,0x60,-0x113)](),_0x2ac8d5[_0x486002(-0x17f,-0xd0,-0xcb,-0xe4)](_0x125366,-0x1*-0x295+-0x17e1+0x154d),_0x414722[_0x486002(-0x7a,-0x126,-0x17a,-0x1bf)](_0x1f948d);}),_0x56d104[_0x3f6d51(0x266,0x3b0,0x349,0x3ab)+'d'](_0x33d958),_0x56d104[_0xbbd279(-0xe3,-0x274,-0x1a9,-0x1ad)+'d'](_0x78678);const _0x8dd75b=document['createElem'+'ent'](_0x1f4014[_0xbbd279(-0x2a,-0xcd,-0x33,0x84)]);_0x8dd75b[_0x3f6d51(0x52f,0x487,0x4a5,0x40d)]=_0x1f4014[_0x3f6d51(0x55b,0x4f8,0x4c5,0x409)],_0x8dd75b[_0x3f6d51(0x3a0,0x39f,0x45e,0x548)+'r']='图'+(_0x125366+(-0x3*-0x8bf+0xf1e+0x14ad*-0x2)),_0x8dd75b[_0xbbd279(-0x1d2,-0x1d6,-0xed,-0x84)]=_0x3845b0[_0xbbd279(-0x1ab,-0x1d2,-0x182,-0x217)]||'',_0x8dd75b[_0x3f6d51(0x3fd,0x352,0x31c,0x2e2)]=_0x1f4014[_0xbbd279(-0x10b,-0x1ee,-0x169,-0x138)],_0x8dd75b[_0x3f6d51(0x446,0x315,0x375,0x3f7)+_0xbbd279(-0x112,-0x205,-0x198,-0x1a8)]('input',_0x2d3cb3=>{function _0x106a52(_0x348fe1,_0xc75338,_0x5b2d75,_0x4907d0){return _0x3f6d51(_0x4907d0,_0xc75338-0x131,_0xc75338-0x59,_0x4907d0-0x95);}function _0x9a6a8c(_0x9485dd,_0x3ac81c,_0x45f4a7,_0x3c206c){return _0x3f6d51(_0x9485dd,_0x3ac81c-0x17e,_0x45f4a7- -0x38d,_0x3c206c-0x1cc);}if(_0x1f4014[_0x9a6a8c(0x13f,0xff,0x12d,0x16f)](_0x1f4014[_0x9a6a8c(-0xcd,-0x119,-0x74,-0x46)],_0x1f4014[_0x9a6a8c(0xe6,0xcc,0x19,0xb9)]))return _0x46cf1a&&_0x5cfedf['includes'](_0x5e891f)&&(_0x30c7e&&_0x24cd3a['add'](_0x5e7e7e)),_0x452ac1[_0x9a6a8c(0x163,0x181,0xa0,0x93)](_0x227bd4,_0x40bfbd);else _0x2ac8d5[_0x125366][_0x9a6a8c(0x7c,-0x30,-0x1d,-0xbb)]=_0x2d3cb3[_0x9a6a8c(0x27,0x1a0,0xf2,0x3a)][_0x106a52(0x4dc,0x45e,0x447,0x431)];}),_0x2b4ae3[_0xbbd279(-0x21c,-0x152,-0x1a9,-0x23e)+'d'](_0x56d104),_0x2b4ae3[_0xbbd279(-0xc1,-0x18c,-0x1a9,-0x211)+'d'](_0x8dd75b),_0x247e4f[_0xbbd279(-0x14b,-0x206,-0x1a9,-0x261)+'d'](_0x2b4ae3);}else _0x1e6c0f[_0x3f6d51(0x496,0x49c,0x3b4,0x2f3)](_0x3b2c71);});const _0x3ab2aa=document[_0x25c302(0x37b,0x381,0x2d4,0x3a1)+_0x25c302(0x497,0x622,0x63a,0x54f)](_0x3408ee[_0x25ecdb(0x97,0x141,0x3,0x22)]);_0x3ab2aa[_0x25ecdb(0x4a,-0x14,0x131,0x112)+'t']=_0x25c302(0x323,0x463,0x360,0x3b8)+_0x2ac8d5['length']+_0x25ecdb(0xf3,0x51,0xc2,0x36),_0x3ab2aa[_0x25ecdb(-0xcb,-0xd4,-0x1b1,-0x189)]=_0x3408ee[_0x25ecdb(0x12,-0x39,0xd5,-0xa2)],_0x247e4f[_0x25c302(0x328,0x410,0x39b,0x3cd)+'d'](_0x3ab2aa);}else{const _0xf9d488={'JGUiz':function(_0x3f0944,_0x1fcf09){function _0x526163(_0x50f021,_0x312cd9,_0x22ae36,_0xf6e16a){return _0x25c302(_0x50f021-0x1c0,_0x312cd9-0xaf,_0x22ae36,_0x50f021- -0x6b6);}return _0x3408ee[_0x526163(-0x1cb,-0xf8,-0x1ae,-0x142)](_0x3f0944,_0x1fcf09);}};_0x5f46c5[_0x25ecdb(0x2f,0x4,-0x27,0xd7)]['add'](_0x3408ee[_0x25ecdb(0xc8,0x91,0x193,0x172)]),_0x3408ee[_0x25ecdb(0x1d,0xef,-0x3f,-0xc0)](_0xe19ada,()=>{_0x518873['remove']();function _0x4f8774(_0x3665fb,_0xb7fcda,_0x5827f2,_0x4cce8c){return _0x25ecdb(_0x3665fb-0x431,_0xb7fcda-0x1ec,_0x5827f2-0x5a,_0xb7fcda);}_0xf9d488[_0x4f8774(0x3da,0x3bc,0x36b,0x45e)](_0x69bd5,_0x112a14);},-0x2*-0x5c9+-0x6c7+-0x3*0x167);}}_0x3570d8[_0x43cc41(0x1b0,0xd0,0xe9,0x143)+_0x43cc41(0x11b,0xb5,0xc9,-0x15)](_0x136ef8['TAGkG'],async _0x12feaf=>{function _0x36e121(_0x442281,_0x4614b8,_0x7ff88c,_0x5d320e){return _0x2f0f1a(_0x442281-0x1cb,_0x7ff88c,_0x7ff88c-0xcf,_0x442281-0x90);}const _0xd22453={'eOuUr':function(_0x2a6eed,_0x14cd1a){return _0x136ef8['kXJyv'](_0x2a6eed,_0x14cd1a);},'yzeqh':_0x136ef8[_0x36e121(-0x1e,0x5d,-0xf3,0xb0)],'lYIJg':function(_0x4528b7,_0x1a7ce7){function _0x5d6758(_0x2e887e,_0x409cbe,_0x5c3a11,_0x49046c){return _0x36e121(_0x49046c-0x47e,_0x409cbe-0x2,_0x2e887e,_0x49046c-0xb3);}return _0x136ef8[_0x5d6758(0x4b6,0x3ef,0x563,0x4c0)](_0x4528b7,_0x1a7ce7);},'vxHoX':function(_0x50c079,_0x3f59){return _0x50c079(_0x3f59);},'AeMwK':_0x136ef8[_0x36e121(0x123,0x94,0x10a,0x182)]};function _0x2fdb52(_0x3a32b8,_0x1d062b,_0x1805b3,_0x510f70){return _0x43cc41(_0x3a32b8-0x1e1,_0x1d062b- -0xb2,_0x1805b3-0x199,_0x1805b3);}const _0x14188a=_0x12feaf[_0x36e121(0x115,0x1fe,0x16a,0x1bc)][_0x2fdb52(0xd3,0x7d,0x3b,0x54)];if(!_0x14188a||_0x14188a[_0x2fdb52(-0xd1,-0x31,-0x89,0x4f)]===0x17f6*0x1+0x5d5*-0x3+0x14b*-0x5)return;for(const _0x5d4c97 of _0x14188a){if(_0x136ef8[_0x2fdb52(0x105,0x12b,0xc5,0x10a)]===_0x136ef8[_0x36e121(0x118,0x165,0x11c,0x143)]){if(!_0x5d4c97['type'][_0x2fdb52(0xcc,0xdd,0x4,0xd0)](_0x2fdb52(0xf3,0x173,0x137,0x20f)))continue;try{const _0xea2ed1=await _0x136ef8['hkYRW'](_0x274387,_0x5d4c97),_0x117d3c={};_0x117d3c[_0x36e121(-0x3e,-0xa9,-0x2b,-0xab)]=_0xea2ed1,_0x117d3c[_0x2fdb52(-0xbf,0x19,0x9,-0x38)]='',_0x2ac8d5[_0x36e121(0x9c,0x155,0x60,0xae)](_0x117d3c);}catch(_0x51bcc6){_0x136ef8[_0x36e121(-0x24,0x32,-0x2b,-0x85)](_0x136ef8['QuPUK'],_0x136ef8[_0x2fdb52(0x18,-0x1d,0x29,-0x3a)])?console[_0x2fdb52(0x163,0x151,0x1b7,0x1f1)](_0x136ef8[_0x36e121(0x70,0x82,-0x35,0x10a)],_0x51bcc6):(_0x3408ee['FMOwO'](_0x3fdd22,_0x1d977f),_0x142eac=null);}}else{if(_0xd22453[_0x36e121(0xa8,0x7c,0xb6,0x12a)](_0x4dd665[_0x2fdb52(0xc4,0x76,0x134,0x19)],_0xd22453['yzeqh']))_0xd22453[_0x2fdb52(0x40,0xdf,0x86,0x158)](_0x5385d0,null),_0x4e0270[_0x36e121(0x6e,0x4a,0xcc,0x78)+_0x2fdb52(0x16c,0x86,0x2,0x16b)](_0x36e121(0xa2,-0x34,0x92,0xd2),_0x1bbc4b);else _0xd22453['eOuUr'](_0x1c067d[_0x2fdb52(-0x66,0x76,-0x59,0x5e)],'Enter')&&_0x57e586['ctrlKey']&&(_0xd22453[_0x2fdb52(0x1e,0xf3,0x17a,0xe1)](_0x345095,{'text':_0xc6f46b[_0x36e121(0x9b,-0x3,-0x1,0x171)][_0x36e121(0x16b,0x134,0x1da,0x220)]()||null,'images':[..._0x4d4445]}),_0x4c545b[_0x2fdb52(0x45,0x81,0x166,0x91)+_0x36e121(0x73,-0x1,0x74,0x151)](_0xd22453[_0x36e121(-0x27,-0xe8,0x0,-0x30)],_0x22c7eb));}}_0x136ef8['OUWrv'](_0x1f948d),_0x3570d8[_0x2fdb52(0x36,0xae,0x78,0xde)]='';});function _0x274387(_0x565023){return new Promise((_0x5615d3,_0x2c262f)=>{function _0xe04e58(_0x36f677,_0x1eff1d,_0x1e77c2,_0xa81625){return _0x3223(_0x1e77c2-0x13a,_0x1eff1d);}const _0x54548b=new FileReader();_0x54548b[_0xe04e58(0x1e6,0x2a9,0x209,0x20e)]=()=>_0x5615d3(_0x54548b['result']);function _0x30f9f1(_0x545464,_0x228447,_0xd30e96,_0x524a3e){return _0x3223(_0x228447-0x218,_0x545464);}_0x54548b['onerror']=_0x2c262f,_0x54548b[_0x30f9f1(0x35a,0x3b7,0x2dd,0x434)+_0x30f9f1(0x3b0,0x3e2,0x46d,0x340)](_0x565023);});}_0x23c1e8[_0x2f0f1a(-0x15b,-0xe6,0xc,-0xb1)+'d'](_0x276f13),_0x23c1e8[_0x2f0f1a(-0xee,-0xe7,-0x71,-0xb1)+'d'](_0x3570d8),_0x23c1e8[_0x43cc41(0x102,0xa4,0x21,0x162)+'d'](_0x247e4f);const _0x332768=document['createElem'+_0x43cc41(0x265,0x226,0x188,0x28e)](_0x136ef8['eTzAK']);function _0x43cc41(_0x753058,_0x129761,_0x57f713,_0x482fbe){return _0x5f2538(_0x482fbe,_0x129761-0x16a,_0x57f713-0x62,_0x129761- -0x2b7);}_0x332768[_0x43cc41(0xa7,0x77,0x158,0x4f)]=_0x43cc41(0xce,0x16a,0x166,0xc5)+_0x2f0f1a(-0x16e,-0xcd,-0x3,-0x90)+_0x2f0f1a(0x9b,0xca,-0xf,0x1e);const _0x8a4c09=document['createElem'+_0x2f0f1a(0x17c,0x31,0x128,0xd1)](_0x43cc41(0x143,0x13f,0x21f,0x7f));_0x8a4c09[_0x43cc41(0x174,0x18c,0x117,0xb4)+'t']='取消',_0x8a4c09['className']=_0x136ef8[_0x2f0f1a(0x14,0xde,0x46,0xb2)];const _0x5f4562=document[_0x2f0f1a(-0x5b,-0x17f,-0x34,-0xdd)+'ent'](_0x136ef8[_0x43cc41(0x1b9,0x120,0x95,0xbf)]);_0x5f4562[_0x2f0f1a(-0x9d,-0x44,0x58,0x37)+'t']=_0x2f0f1a(-0x128,-0xbb,0x60,-0x81),_0x5f4562[_0x2f0f1a(-0x16a,-0x1b8,-0x108,-0xde)]=_0x136ef8[_0x2f0f1a(-0xda,0xda,-0xae,0x0)];const _0x3800ff=_0x4ecdef=>{function _0x4f0602(_0x273462,_0x4650d5,_0x20a325,_0x1e0cb){return _0x2f0f1a(_0x273462-0x2,_0x273462,_0x20a325-0x176,_0x4650d5- -0x4d);}const _0x2c6e={'FtClu':function(_0x5a7ed9,_0x360c87){function _0x5894dc(_0x62e159,_0x5fd3b3,_0x40d0e3,_0x392871){return _0x3223(_0x5fd3b3-0x2f3,_0x40d0e3);}return _0x3408ee[_0x5894dc(0x5a2,0x4cb,0x573,0x4f7)](_0x5a7ed9,_0x360c87);}};_0x52dc6b[_0x2ceb37(0x232,0xb5,0x88,0x161)]['add'](_0x3408ee[_0x2ceb37(0x2db,0x1cb,0x26f,0x1fa)]);function _0x2ceb37(_0x3fa70a,_0x4591cd,_0x5be00b,_0xbe2249){return _0x2f0f1a(_0x3fa70a-0x71,_0x3fa70a,_0x5be00b-0x2b,_0xbe2249-0x145);}_0x3408ee[_0x4f0602(-0x25,0x6,-0x12,-0x3)](setTimeout,()=>{function _0xa02068(_0x528a47,_0x1cfe64,_0x1f4b77,_0x4caa6b){return _0x2ceb37(_0x4caa6b,_0x1cfe64-0x1e8,_0x1f4b77-0x5a,_0x1f4b77- -0x12d);}_0x52dc6b['remove'](),_0x2c6e[_0xa02068(0x14,-0x4,-0x5f,-0xf8)](_0x1de56f,_0x4ecdef);},-0x11e8+-0x1*-0x1efd+0x1c9*-0x7);};_0x8a4c09[_0x43cc41(0x77,0xd0,0x147,-0x4)+'stener'](_0x136ef8[_0x43cc41(-0x2,0xbb,0xd0,0x10d)],()=>_0x3800ff(null)),_0x5f4562[_0x43cc41(0xe9,0xd0,0x66,0xc0)+_0x43cc41(0xbf,0xb5,0x16a,0x141)](_0x136ef8[_0x2f0f1a(0x2b,-0xd4,0x13,-0x9a)],()=>_0x3800ff({'text':_0x335a45[_0x43cc41(0xca,0x160,0xd0,0x17d)][_0x43cc41(0x20a,0x230,0x2a5,0x1d2)]()||null,'images':[..._0x2ac8d5]}));const _0xe2d89e=_0x5c72a3=>{function _0x1b7df8(_0x21b1fc,_0x1a92fd,_0x305341,_0x6ab2f){return _0x2f0f1a(_0x21b1fc-0x16b,_0x1a92fd,_0x305341-0x194,_0x305341- -0x1fb);}function _0x3f6d28(_0x108e3f,_0x1f0d0f,_0x1fb016,_0x4a7308){return _0x2f0f1a(_0x108e3f-0x99,_0x1fb016,_0x1fb016-0x170,_0x1f0d0f- -0x70);}if(_0x136ef8[_0x1b7df8(-0x1f7,-0x2d2,-0x2c8,-0x262)](_0x136ef8[_0x1b7df8(-0x326,-0x385,-0x2a2,-0x240)],_0x136ef8['MKEMf'])){if(_0x136ef8[_0x3f6d28(-0x159,-0x124,-0x54,-0xef)](_0x5c72a3[_0x1b7df8(-0x202,-0x14e,-0x228,-0x301)],_0x1b7df8(-0x276,-0x1e1,-0x191,-0x15e)))_0x3800ff(null),document['removeEven'+_0x1b7df8(-0x157,-0x190,-0x218,-0x1fc)](_0x1b7df8(-0x274,-0x1ef,-0x1e9,-0x265),_0xe2d89e);else{if(_0x136ef8[_0x3f6d28(-0x18f,-0x124,-0x133,-0x136)](_0x5c72a3[_0x3f6d28(-0x56,-0x9d,-0xc,-0x161)],_0x136ef8[_0x3f6d28(-0x16e,-0xb7,-0x137,-0xf4)])&&_0x5c72a3[_0x3f6d28(-0x179,-0x9a,-0x76,-0x79)]){if(_0x136ef8[_0x1b7df8(-0x216,-0x21d,-0x2af,-0x275)](_0x3f6d28(0x26,-0x25,-0x7d,-0x52),_0x136ef8[_0x1b7df8(-0x3c5,-0x313,-0x2ef,-0x283)]))_0x136ef8['VgOjO'](_0x3800ff,{'text':_0x335a45[_0x1b7df8(-0x1b8,-0x203,-0x1f0,-0x1bf)][_0x3f6d28(-0xa,0x6b,0x143,-0x36)]()||null,'images':[..._0x2ac8d5]}),document[_0x3f6d28(-0xb8,-0x92,0x49,-0x8e)+_0x3f6d28(-0x7c,-0x8d,0x2d,-0xb7)](_0x136ef8[_0x1b7df8(-0x96,-0x102,-0x168,-0x124)],_0xe2d89e);else{if(_0x49004a){const _0x13730c=_0x1363a9['apply'](_0x5900b7,arguments);return _0x344402=null,_0x13730c;}}}}}else return _0x5f0d48;};document[_0x43cc41(0xfe,0xd0,0x160,0x17e)+_0x2f0f1a(-0xbf,0x2c,-0xdc,-0xa0)](_0x136ef8[_0x43cc41(0x166,0x1e8,0x27b,0xfe)],_0xe2d89e),_0x332768[_0x2f0f1a(-0x11a,-0x6d,-0x122,-0xb1)+'d'](_0x8a4c09),_0x332768[_0x43cc41(0x30,0xa4,0x9d,0x15c)+'d'](_0x5f4562),_0x50a7c0[_0x43cc41(0x7,0xa4,-0x1e,0x1e)+'d'](_0x106538),_0x50a7c0[_0x43cc41(0x172,0xa4,0x12d,0x9c)+'d'](_0x16653c),_0x50a7c0['appendChil'+'d'](_0x335a45),_0x50a7c0[_0x43cc41(0xcc,0xa4,0x157,0x116)+'d'](_0x23c1e8),_0x50a7c0[_0x2f0f1a(-0xb5,-0x59,0x0,-0xb1)+'d'](_0x332768),_0x52dc6b['appendChil'+'d'](_0x50a7c0),document[_0x43cc41(0xf1,0xa6,-0x4,0x36)]['appendChil'+'d'](_0x52dc6b),_0x136ef8[_0x43cc41(0x8f,0x148,0x62,0x180)](setTimeout,()=>_0x335a45[_0x43cc41(0x169,0xea,0x35,0x98)](),-0x115b*-0x1+-0x236c+-0x1275*-0x1);});}function replacePlaceholder(_0x457197,_0x29e3b1,_0x10748d,_0x10d933){const _0x37ff92={'QOrEO':_0xfaaf5e(0x200,0x62,0x12c,0x203),'KOyPz':function(_0x5453f7,_0x1d5ccd){return _0x5453f7===_0x1d5ccd;},'CWiee':_0xfaaf5e(0x1ab,0xfd,0xf7,0x14f),'euqZQ':function(_0x510d52,_0x4b9afa){return _0x510d52!==_0x4b9afa;},'YGDvV':_0xfaaf5e(0x2d8,0x139,0x21e,0x261),'CtoRJ':_0xfaaf5e(0x105,0x87,0x57,-0x55),'rNGyE':_0xfaaf5e(0x1f9,0x210,0x14c,0x19e),'CLnPt':function(_0x5c3091,_0x4d7c0d,_0x480aa2,_0x282d58,_0x1e8f4d){return _0x5c3091(_0x4d7c0d,_0x480aa2,_0x282d58,_0x1e8f4d);}};function _0xfaaf5e(_0x479907,_0x4e6eb9,_0x3d9b9e,_0x185845){return _0x3223(_0x3d9b9e- -0x2c,_0x4e6eb9);}function _0x36df4a(_0x504361,_0xc473bd,_0x4983af,_0x1e06c0){return _0x3223(_0x504361- -0x25,_0xc473bd);}if(_0x37ff92[_0xfaaf5e(0x144,-0x7,0xdd,0x158)](typeof _0x457197,_0x37ff92[_0xfaaf5e(0x19a,0x290,0x1df,0x222)])){if(_0x37ff92[_0x36df4a(0xbd,0x94,0xb3,0x75)](_0x37ff92['YGDvV'],_0x37ff92[_0x36df4a(0x12c,0x168,0x52,0xf5)])){const _0x153106={};_0x153106[_0xfaaf5e(0x18a,0x2c5,0x1ea,0x1dd)]=_0x37ff92[_0x36df4a(0x1c3,0x25b,0x138,0x1cc)],_0x153106[_0x36df4a(0x133,0x127,0xfc,0x11d)]=_0x1a9b20[_0x36df4a(0xbe,0x3f,0xc4,0x113)],_0x29f29d[_0xfaaf5e(0x9f,0x199,0x14b,0x230)](_0x153106);}else return _0x10748d&&_0x457197[_0x36df4a(0x9d,0x83,0xf2,0x5)](_0x29e3b1)&&(_0x10d933&&_0x10d933[_0x36df4a(0x100,0x145,0x1b9,0xd4)](_0x29e3b1)),_0x457197[_0xfaaf5e(0x129,0x222,0x172,0x1ef)](_0x29e3b1,_0x10748d);}if(Array[_0x36df4a(0x54,-0x89,0x10f,-0x27)](_0x457197)){if(_0x37ff92['euqZQ'](_0x37ff92[_0xfaaf5e(0x6c,0x16c,0xee,0x17e)],_0x36df4a(0x103,0x175,0x145,0x19b)))return _0x457197['map'](_0x10da82=>replacePlaceholder(_0x10da82,_0x29e3b1,_0x10748d,_0x10d933));else _0x55e3fa[_0x36df4a(0x152,0x1dc,0xfc,0x199)](..._0x1f0cf6['content']);}if(_0x457197&&typeof _0x457197===_0x37ff92[_0x36df4a(0x10c,0x59,0x94,0x7b)]){const _0x2955aa={};for(const _0x55c3a2 in _0x457197){_0x2955aa[_0x55c3a2]=_0x37ff92[_0xfaaf5e(0xc9,0x1c8,0x19d,0x171)](replacePlaceholder,_0x457197[_0x55c3a2],_0x29e3b1,_0x10748d,_0x10d933);}return _0x2955aa;}return _0x457197;}function attachImagesToMessage(_0x85956d,_0x1f6722,_0x2ec343,_0x47c478=_0x109a24(0x137,0x115,0x144,0x73)){const _0xcc0872={'gkuEL':function(_0x425d87,_0xfbc37c,_0x3e14dc,_0x18f183,_0x41f3ed){return _0x425d87(_0xfbc37c,_0x3e14dc,_0x18f183,_0x41f3ed);},'UYkuA':function(_0x6ba2f){return _0x6ba2f();},'geVNa':function(_0x5b72e0,_0x2fb073){return _0x5b72e0(_0x2fb073);},'bEqkl':_0x47f215(0x4c4,0x3c9,0x4cc,0x3e1),'UaDFU':_0x3db069(0x437,0x5c3,0x40e,0x4e2),'xRaEu':function(_0x1aa552,_0x373031){return _0x1aa552===_0x373031;},'LAkJN':function(_0x4c84eb,_0x4267cd){return _0x4c84eb+_0x4267cd;},'xzGeV':_0x3db069(0x498,0x4ea,0x4e2,0x517),'hCkmT':_0x47f215(0x413,0x3c0,0x4d4,0x45e),'aFawm':_0x3db069(0x666,0x5d4,0x5c9,0x5c7),'kqeYW':_0x3db069(0x681,0x606,0x522,0x5c5),'jToGZ':function(_0x5453cd,_0x281e25){return _0x5453cd===_0x281e25;},'VkteQ':function(_0x1c6b81,_0x47d97b){return _0x1c6b81>=_0x47d97b;},'lXISt':function(_0x5dab81,_0x6b13f0){return _0x5dab81!==_0x6b13f0;},'WawQK':_0x47f215(0x4d0,0x4ac,0x487,0x448),'zxfnP':_0x3db069(0x4ba,0x3a3,0x45b,0x455),'ZZcgU':_0x47f215(0x3f8,0x39d,0x3c0,0x3fa),'Cbrie':_0x3db069(0x669,0x4c4,0x687,0x5ab),'KCJvl':_0x47f215(0x466,0x4a1,0x555,0x470),'erBQG':_0x47f215(0x4a5,0x461,0x475,0x3d7),'RGqNv':function(_0x5f9df7,_0x3b6255){return _0x5f9df7>_0x3b6255;},'afHgt':'cBUhB'};if(!_0x2ec343||_0xcc0872[_0x3db069(0x544,0x640,0x61a,0x5a9)](_0x2ec343[_0x3db069(0x37f,0x44a,0x3a3,0x456)],0x10ac+-0x1909*0x1+-0x85d*-0x1)||_0x1f6722<-0x2b7+-0x15b*-0x11+-0x1454||_0xcc0872['VkteQ'](_0x1f6722,_0x85956d[_0x3db069(0x514,0x4d3,0x4fe,0x456)])){if(_0xcc0872['lXISt'](_0xcc0872[_0x47f215(0x463,0x475,0x4a1,0x3b7)],_0xcc0872['zxfnP']))return _0x85956d;else _0x453774[_0x1fdfa8]=_0xcc0872[_0x3db069(0x555,0x490,0x3ed,0x4bd)](_0x2bcb31,_0x373827[_0x4b10d4],_0x27ef62,_0x170ef5,_0x3f603d);}const _0x2ddccc=[..._0x85956d],_0x480d77=_0x2ddccc[_0x1f6722],_0x28e6ed=[];if(_0xcc0872['xRaEu'](typeof _0x480d77[_0x47f215(0x354,0x388,0x333,0x347)],_0xcc0872['UaDFU'])){if(_0xcc0872[_0x3db069(0x57a,0x589,0x4c4,0x54c)](_0xcc0872['ZZcgU'],_0xcc0872[_0x3db069(0x42a,0x3a0,0x4d9,0x467)])){const _0x3e61b3={};_0x3e61b3[_0x47f215(0x4c3,0x46d,0x560,0x47a)]=_0x3db069(0x5a5,0x5c6,0x573,0x517),_0x3e61b3['text']=_0x480d77[_0x3db069(0x505,0x409,0x45c,0x4a2)],_0x28e6ed[_0x3db069(0x615,0x5f4,0x532,0x536)](_0x3e61b3);}else{const _0x2df18c=_0x552c04['match'](/^\{\{getvar::([^}]+)\}\}$/);if(_0x2df18c){const _0x12e324=_0x2df18c[0x832+-0xce*-0xb+-0x110b];_0x190534[_0x12e324]=_0x58ab2a[_0x12e324]||'';}}}else Array[_0x3db069(0x40e,0x4eb,0x375,0x438)](_0x480d77[_0x3db069(0x49a,0x52e,0x4c8,0x4a2)])&&(_0xcc0872[_0x47f215(0x46d,0x402,0x341,0x3b4)](_0xcc0872[_0x3db069(0x58e,0x5f7,0x5d1,0x54d)],_0xcc0872[_0x3db069(0x632,0x496,0x5e7,0x563)])?(_0xcc0872[_0x47f215(0x308,0x2b0,0x2a3,0x327)](_0x223143),_0x227b67(new _0x16d978('角色设计\x20LLM\x20请'+_0x47f215(0x23e,0x278,0x26e,0x31a)))):_0x28e6ed['push'](..._0x480d77[_0x3db069(0x50b,0x487,0x41c,0x4a2)]));if(_0xcc0872[_0x3db069(0x59f,0x5f7,0x51e,0x54e)](_0x2ec343[_0x3db069(0x3b5,0x3e5,0x385,0x456)],-0x4*0x56+0x1691*0x1+0x1*-0x1539)){if(_0xcc0872[_0x47f215(0x31c,0x32e,0x319,0x3f1)](_0xcc0872[_0x47f215(0x34f,0x401,0x3e1,0x361)],_0xcc0872[_0x47f215(0x30e,0x438,0x330,0x361)]))_0xcc0872[_0x47f215(0x404,0x44f,0x371,0x380)](_0x7b7a1f,null),_0x10abbf[_0x3db069(0x4a4,0x4a4,0x447,0x508)+_0x47f215(0x3f9,0x434,0x36f,0x3b2)](_0xcc0872['bEqkl'],_0x526929);else{const _0x4ee9bd={};_0x4ee9bd['type']='text',_0x4ee9bd[_0x3db069(0x59a,0x489,0x583,0x517)]='\x0a[以下是用户上传的'+_0x2ec343['length']+'张'+_0x47c478+']',_0x28e6ed[_0x47f215(0x39a,0x39d,0x377,0x3db)](_0x4ee9bd);}}function _0x47f215(_0x2fec3e,_0x396896,_0x523c80,_0x461092){return _0x109a24(_0x2fec3e-0x18e,_0x461092-0x300,_0x396896,_0x461092-0x35);}_0x2ec343['forEach']((_0x252a1a,_0x1acb82)=>{const _0x1befac=typeof _0x252a1a===_0xcc0872[_0x29ac7a(-0x6d,0xd3,0x53,-0x46)]?_0x252a1a:_0x252a1a[_0x29ac7a(-0x40,-0x10,-0x76,-0xca)],_0x5bab37=_0xcc0872[_0x29ac7a(0x93,-0xa,0x3d,0xb5)](typeof _0x252a1a,'object')&&_0x252a1a['name']?_0x252a1a['name']:''+_0x47c478+_0xcc0872['LAkJN'](_0x1acb82,0xfd*0xd+0x1ede+-0x2bb6),_0x313d6b={};_0x313d6b[_0x29ac7a(0x19d,0x8a,0x103,0x125)]=_0xcc0872[_0x29ac7a(0x4b,0xf1,0xbe,-0x2c)],_0x313d6b[_0x29ac7a(0x8b,-0x61,0x45,-0x57)]='['+_0x5bab37+']',_0x28e6ed[_0x29ac7a(0x66,-0x29,0x64,0x4f)](_0x313d6b);let _0x30cf6c=_0x1befac;!_0x1befac[_0x479f91(0x27b,0x2fc,0x303,0x2e8)](_0xcc0872[_0x29ac7a(0xe6,0x10f,0x12b,0x203)])&&(_0x30cf6c=_0x29ac7a(0x3b,0x11b,0xff,0x53)+_0x479f91(0x357,0x270,0x33f,0x1b4)+'4,'+_0x1befac);const _0x39390e={};_0x39390e[_0x29ac7a(0xd6,0x8b,0x103,0x2a)]=_0xcc0872['aFawm'],_0x39390e[_0x29ac7a(0x14b,0x170,0xf5,0x168)]={};function _0x29ac7a(_0x448d81,_0x514a17,_0x334f55,_0x4fbdbb){return _0x47f215(_0x448d81-0x51,_0x4fbdbb,_0x334f55-0x18d,_0x334f55- -0x377);}_0x39390e[_0x29ac7a(0x14b,0x170,0xf5,0x168)][_0x29ac7a(-0xd0,0x99,-0x17,0x4e)]=_0x30cf6c;function _0x479f91(_0x16e240,_0x1df4a6,_0x2ac668,_0x42d4c2){return _0x47f215(_0x16e240-0x172,_0x42d4c2,_0x2ac668-0x191,_0x1df4a6- -0x10d);}_0x39390e[_0x29ac7a(0x14b,0x170,0xf5,0x168)][_0x479f91(0x316,0x384,0x3e2,0x347)]=_0xcc0872[_0x479f91(0x26a,0x1de,0x166,0x1ce)],_0x28e6ed['push'](_0x39390e);});function _0x3db069(_0x13552e,_0x299d70,_0x54d3ba,_0x4aa052){return _0x109a24(_0x13552e-0x186,_0x4aa052-0x45b,_0x299d70,_0x4aa052-0x45);}const _0x4611e4={..._0x480d77};return _0x4611e4[_0x47f215(0x397,0x30c,0x2ac,0x347)]=_0x28e6ed,_0x2ddccc[_0x1f6722]=_0x4611e4,_0x2ddccc;}function findMessageIndexWithPlaceholder(_0x242e47,_0x20714f){const _0x16c03={};_0x16c03['dZZKe']=function(_0x5cda6f,_0x518d26){return _0x5cda6f<_0x518d26;},_0x16c03[_0x5803ec(0x7f,0x60,0x174,0xf3)]=function(_0xe0976a,_0x2da885){return _0xe0976a===_0x2da885;},_0x16c03[_0x5803ec(0x7d,0xae,0x9b,0xd6)]=_0x4328c0(0x38d,0x2a3,0x2d1,0x388),_0x16c03[_0x5803ec(-0xc5,0xdd,0x74,-0x1)]='KuXkv';function _0x4328c0(_0x365a9d,_0x7e9304,_0x4d0e9b,_0x2cba25){return _0x109a24(_0x365a9d-0xde,_0x7e9304-0x21c,_0x365a9d,_0x2cba25-0x40);}_0x16c03[_0x4328c0(0x259,0x231,0x1cf,0x1d0)]=function(_0x5b2a63,_0x5ec5dc){return _0x5b2a63===_0x5ec5dc;},_0x16c03[_0x5803ec(0x154,0x141,-0x1e,0xac)]=_0x5803ec(0x159,0xda,0x106,0x156),_0x16c03[_0x4328c0(0x39c,0x2c7,0x2c9,0x262)]=_0x4328c0(0x325,0x2d8,0x2f2,0x224),_0x16c03[_0x4328c0(0x14b,0x200,0x272,0x2ce)]=function(_0x3f22d6,_0x4b886d){return _0x3f22d6===_0x4b886d;};function _0x5803ec(_0x4a6b3a,_0x1ef96e,_0x446d22,_0x284916){return _0x109a24(_0x4a6b3a-0x1d1,_0x284916-0x9,_0x4a6b3a,_0x284916-0x1d3);}_0x16c03[_0x4328c0(0x2e3,0x302,0x2cc,0x248)]=_0x4328c0(0x2ab,0x360,0x305,0x3f3),_0x16c03['uYuzr']=_0x5803ec(0x88,-0x99,0xff,0x34);const _0x336637=_0x16c03;for(let _0x2c2133=-0x6b2+-0x3f1+0xaa3;_0x336637[_0x4328c0(0x223,0x2c3,0x35a,0x209)](_0x2c2133,_0x242e47[_0x5803ec(0xea,-0x39,0x67,0x4)]);_0x2c2133++){const _0x3900ed=_0x242e47[_0x2c2133];if(_0x336637['LDAHr'](typeof _0x3900ed[_0x5803ec(0xa3,0x69,-0x5a,0x50)],_0x336637[_0x4328c0(0x2e3,0x2e9,0x305,0x341)])&&_0x3900ed[_0x4328c0(0x200,0x263,0x2e8,0x349)][_0x4328c0(0x263,0x242,0x2c3,0x16e)](_0x20714f))return _0x2c2133;else{if(Array[_0x5803ec(-0x1e,0x77,0x94,-0x1a)](_0x3900ed[_0x5803ec(-0x7,0xbf,-0x5b,0x50)])){if(_0x336637[_0x4328c0(0x16a,0x212,0x178,0x158)]===_0x5803ec(0x142,0x16a,0x1f1,0x190))return new _0x64b070((_0xbb7928,_0x5b7302)=>{const _0x1e90a2=new _0x3c0481();_0x1e90a2[_0x25003c(0x398,0x34f,0x3ab,0x315)]=()=>_0xbb7928(_0x1e90a2[_0x25003c(0x30d,0x323,0x337,0x36c)]);function _0x178c59(_0x2b18ef,_0x571eaa,_0x123af0,_0x5cb214){return _0x5803ec(_0x5cb214,_0x571eaa-0x193,_0x123af0-0xe8,_0x571eaa-0x196);}function _0x25003c(_0x527c29,_0x5929a6,_0xe22861,_0x30b264){return _0x4328c0(_0x5929a6,_0x30b264-0xc6,_0xe22861-0x11,_0x30b264-0x5);}_0x1e90a2[_0x178c59(0x2d6,0x22d,0x2fd,0x22e)]=_0x5b7302,_0x1e90a2[_0x178c59(0x216,0x2a2,0x232,0x389)+_0x178c59(0x39e,0x2cd,0x28e,0x251)](_0x143de1);});else for(const _0x3d3d45 of _0x3900ed[_0x4328c0(0x30a,0x263,0x326,0x1b3)]){if(_0x336637[_0x5803ec(0x3d,0x9f,0x4a,0x1e)](_0x336637[_0x5803ec(0x55,0xda,0x107,0xac)],_0x336637['oaNlU'])){if(_0x336637['LDAHr'](_0x3d3d45['type'],_0x336637[_0x5803ec(0xd2,0x6d,0x37,0xb4)])&&_0x3d3d45[_0x4328c0(0x250,0x2d8,0x2cc,0x273)][_0x4328c0(0x2f8,0x242,0x17e,0x24a)](_0x20714f))return _0x336637[_0x5803ec(0x20,0x93,0x26,-0x13)](_0x336637[_0x4328c0(0x316,0x302,0x232,0x293)],_0x336637[_0x5803ec(0x270,0xcf,0x1dd,0x1b6)])?_0x1d3777:_0x2c2133;}else _0x26391b[_0x504fe4]['name']=_0x24e0b8['target'][_0x4328c0(0x2c9,0x2f6,0x2ea,0x2bf)];}}}}return-(-0x209*-0xb+-0x4ef*-0x3+-0x1f5*0x13);}function generateRequestId(){const _0x50e225={};_0x50e225[_0x2e00e1(0x3d0,0x365,0x44e,0x30c)]=function(_0x39c604,_0x4942fa){return _0x39c604===_0x4942fa;},_0x50e225[_0x5071d8(0x3bd,0x340,0x2b5,0x39f)]=_0x2e00e1(0x2e8,0x3a7,0x238,0x235),_0x50e225[_0x2e00e1(0x29f,0x2a5,0x2f4,0x255)]=function(_0x39695c,_0x56b290){return _0x39695c!==_0x56b290;},_0x50e225[_0x5071d8(0x5ef,0x448,0x557,0x50b)]=_0x5071d8(0x4b9,0x329,0x378,0x3fb);function _0x2e00e1(_0x9f8f73,_0x4ca18b,_0x38957e,_0x31c030){return _0x109a24(_0x9f8f73-0x144,_0x9f8f73-0x22c,_0x38957e,_0x31c030-0x7c);}_0x50e225['MLXkt']=_0x5071d8(0x3f9,0x3db,0x414,0x473),_0x50e225[_0x5071d8(0x5d6,0x4c5,0x5d8,0x53c)]=function(_0x231cf0,_0x5ca87e){return _0x231cf0+_0x5ca87e;};function _0x5071d8(_0x3303a8,_0x33bd8a,_0x48758e,_0x3414ae){return _0x109a24(_0x3303a8-0x1e9,_0x3414ae-0x3b0,_0x33bd8a,_0x3414ae-0xbf);}const _0x3baf1c=_0x50e225;if(crypto&&crypto[_0x5071d8(0x43e,0x414,0x4b0,0x4c8)]){if(_0x3baf1c['nCTlH'](_0x3baf1c['fAuIw'],_0x3baf1c[_0x2e00e1(0x281,0x1c0,0x328,0x279)]))return crypto[_0x2e00e1(0x344,0x32f,0x2ba,0x3a4)]();else{if(_0x3baf1c[_0x2e00e1(0x3d0,0x3c1,0x383,0x488)](_0x3259d6[_0x2e00e1(0x3a6,0x314,0x34f,0x37d)],_0x3baf1c[_0x5071d8(0x48a,0x342,0x2ec,0x39f)])&&_0x1cd073[_0x2e00e1(0x2e8,0x208,0x3c8,0x202)]['includes'](_0x601903))return _0x3a796a;}}return _0x3baf1c['UXXxD'](Date['now']()['toString'](-0xb5a+-0x1*0x182+0xd00),Math['random']()['toString'](-0xb*-0x139+-0x1*-0x2bb+-0x100a)[_0x5071d8(0x4ac,0x43f,0x5d7,0x50c)](0xbb7+-0x2*-0xa3a+-0x2029));}export function LLM_CHAR_DESIGN_GET_PROMPT(){const _0x1a169b={'RXvwA':'[character'+_0x9334b4(0x4df,0x497,0x502,0x549)+_0x9334b4(0x403,0x366,0x42d,0x3af),'TQSCN':function(_0x219cf8,_0x116826){return _0x219cf8!==_0x116826;},'iCnqV':_0x9334b4(0x491,0x30c,0x3e8,0x327),'MNLOH':function(_0x57ca11){return _0x57ca11();},'jWaGB':function(_0x416c27,_0x3fda97,_0x93a9e5){return _0x416c27(_0x3fda97,_0x93a9e5);}};function _0x9334b4(_0x48da0f,_0x5c9871,_0x1cd3cb,_0x1a6485){return _0x109a24(_0x48da0f-0xd,_0x1cd3cb-0x3f3,_0x1a6485,_0x1a6485-0x2);}function _0xfca82d(_0x2825e8,_0x228f3d,_0x289367,_0x8ab597){return _0x109a24(_0x2825e8-0x132,_0x8ab597-0x45d,_0x2825e8,_0x8ab597-0x34);}return new Promise((_0x3c5c90,_0x58eae7)=>{function _0x41a4a6(_0x4703d8,_0x613627,_0x134456,_0x163aeb){return _0xfca82d(_0x163aeb,_0x613627-0x121,_0x134456-0x53,_0x4703d8- -0x1b8);}function _0x644bbe(_0x34f6f1,_0x35665d,_0x491668,_0xb5e41b){return _0xfca82d(_0xb5e41b,_0x35665d-0x188,_0x491668-0x9e,_0x34f6f1- -0x2a2);}if(_0x1a169b[_0x644bbe(0x28c,0x323,0x326,0x25d)](_0x644bbe(0x1b0,0x14a,0x134,0x25e),_0x1a169b[_0x41a4a6(0x2e8,0x220,0x236,0x339)]))_0x4e4673[_0x41a4a6(0x422,0x3d8,0x33d,0x4ae)](_0x1a169b[_0x644bbe(0x1c3,0xe8,0x10d,0x15e)],_0x3210c2);else{const _0x4bf85e=_0x1a169b['MNLOH'](generateRequestId);console[_0x644bbe(0x25f,0x24f,0x216,0x237)](_0x41a4a6(0x2de,0x33b,0x1fa,0x2bf)+'Gen]\x20Reque'+_0x644bbe(0x1f3,0x1b9,0x239,0x20c)+'\x20design\x20pr'+_0x644bbe(0x2b2,0x21f,0x269,0x1fb)+_0x4bf85e+')');const _0x283e36=_0x152c87=>{if(_0x1a169b[_0x51744f(0x448,0x3f1,0x4a4,0x585)](_0x152c87['id'],_0x4bf85e))return;function _0x50165c(_0x4d4001,_0x5c1a49,_0x2f50c6,_0x1d22e0){return _0x41a4a6(_0x4d4001- -0x1cc,_0x5c1a49-0x6d,_0x2f50c6-0xbb,_0x2f50c6);}eventSource[_0x50165c(0x19d,0x274,0x1b6,0x233)+_0x50165c(0x170,0x1d2,0x163,0x10e)](eventNames['LLM_CHAR_D'+_0x51744f(0x483,0x3d3,0x492,0x548)+_0x51744f(0x511,0x439,0x4ff,0x552)+_0x51744f(0x5c4,0x5e1,0x54c,0x637)],_0x283e36);function _0x51744f(_0x115c86,_0x3dc075,_0x92b248,_0xc20aba){return _0x644bbe(_0x92b248-0x218,_0x3dc075-0xde,_0x92b248-0x74,_0x115c86);}_0x3c5c90(_0x152c87[_0x51744f(0x547,0x482,0x52c,0x606)]);};eventSource['on'](eventNames[_0x644bbe(0x29b,0x1ba,0x2aa,0x2e0)+_0x41a4a6(0x364,0x40c,0x2e4,0x30d)+_0x644bbe(0x2e7,0x2e1,0x2f9,0x2c8)+_0x644bbe(0x334,0x3ec,0x310,0x2f1)],_0x283e36);const _0x6cff6e={};_0x6cff6e['id']=_0x4bf85e,eventSource['emit'](eventNames[_0x41a4a6(0x385,0x448,0x3ad,0x373)+'ESIGN_GET_'+'PROMPT_REQ'+_0x41a4a6(0x2db,0x260,0x330,0x2d8)],_0x6cff6e),_0x1a169b[_0x644bbe(0x1b7,0x28b,0x236,0x1ee)](setTimeout,()=>{function _0x163c9b(_0x553575,_0x2efe83,_0x2732db,_0x3f839e){return _0x41a4a6(_0x3f839e-0x7e,_0x2efe83-0x1a8,_0x2732db-0x16a,_0x2efe83);}eventSource['removeList'+'ener'](eventNames[_0x163c9b(0x340,0x417,0x3ba,0x403)+'ESIGN_GET_'+_0x163c9b(0x3b3,0x51c,0x44b,0x44f)+_0x163c9b(0x547,0x471,0x4c7,0x49c)],_0x283e36);function _0x22ad24(_0x5ef309,_0xfb74e2,_0x3e4105,_0x32a704){return _0x41a4a6(_0x3e4105- -0x553,_0xfb74e2-0x12d,_0x3e4105-0xaa,_0x5ef309);}_0x58eae7(new Error(_0x22ad24(-0x161,-0x124,-0x1cf,-0x226)+'时'));},-0x399e+-0x135f+0x3*0x26af);}});}export function LLM_CHAR_DESIGN(_0x7d88da,_0x50d88d={}){const _0x586917={'puNOr':function(_0xaf168d,_0x1d2619){return _0xaf168d!==_0x1d2619;},'VXTps':function(_0x4457ee){return _0x4457ee();},'BpWzJ':function(_0x875355,_0x46c995){return _0x875355===_0x46c995;},'XZGCQ':_0x1feb8f(0x84,0xfa,0xa4,0x122),'DuzEm':function(_0x291788,_0x100a65){return _0x291788(_0x100a65);},'kIrbJ':_0x1feb8f(0x30,0xe,0x33,-0x1b),'fXuoc':'jykkv','RLDTB':_0x49a6f6(0x5f5,0x601,0x54c,0x5cb),'NCAKp':function(_0x48ebec,_0x29cfa2,_0x1e2714,_0x572ffa,_0x188cef){return _0x48ebec(_0x29cfa2,_0x1e2714,_0x572ffa,_0x188cef);},'dztkG':_0x49a6f6(0x490,0x3b8,0x41d,0x3b1)+_0x49a6f6(0x5e1,0x5f1,0x651,0x5c6),'glVna':_0x49a6f6(0x4c6,0x499,0x3f7,0x4ac)+_0x49a6f6(0x441,0x3b2,0x3a4,0x493),'UUgoc':_0x1feb8f(0x139,0xe6,0x128,0x1af),'uMljW':_0x49a6f6(0x574,0x5fa,0x65b,0x60f)+_0x1feb8f(0x43,0x1f,0x127,-0xa7),'tQmft':function(_0x290694,_0x58b68f,_0x4b2a88){return _0x290694(_0x58b68f,_0x4b2a88);}};function _0x49a6f6(_0x366843,_0x4d68e3,_0xfbc966,_0x4584a2){return _0x109a24(_0x366843-0x61,_0x366843-0x457,_0x4584a2,_0x4584a2-0x9b);}function _0x1feb8f(_0x9c4b93,_0x36f44c,_0x18a3ee,_0x35f2d7){return _0x109a24(_0x9c4b93-0xd9,_0x9c4b93-0x29,_0x35f2d7,_0x35f2d7-0xf2);}return new Promise((_0x1f6751,_0x16915b)=>{const _0x49d537={'iIJGH':function(_0xca20e5,_0x31ffb9,_0x2c9690,_0x27b0b1,_0x58df8c){return _0x586917['NCAKp'](_0xca20e5,_0x31ffb9,_0x2c9690,_0x27b0b1,_0x58df8c);},'PzwrM':_0x586917['dztkG'],'Filde':_0x586917['glVna'],'olCqt':function(_0x150af4,_0xcdde97){return _0x586917['BpWzJ'](_0x150af4,_0xcdde97);},'ffeKh':_0x586917[_0x1e21a7(-0x86,-0xc8,-0x79,0x40)],'cwGYB':function(_0x58be35,_0x48437e){return _0x586917['DuzEm'](_0x58be35,_0x48437e);},'erYMx':function(_0x4b5df7){return _0x4b5df7();},'QTvyI':_0x586917[_0xf496e0(0x354,0x4af,0x4a6,0x412)]},_0x52d897=_0x586917['VXTps'](generateRequestId),_0x25ce71=_0x50d88d['timeoutMs']||-0x1442*0x5+-0x3b96*-0x5+0x25bc;let _0x3043f0=null;console[_0x1e21a7(-0x131,-0x87,-0x6f,-0xaa)](_0xf496e0(0x241,0x2cb,0x369,0x30c)+_0x1e21a7(-0x1c4,-0xde,-0x1be,-0x16c)+_0x1e21a7(-0xad,-0x54,-0x134,-0x60)+_0xf496e0(0x39f,0x436,0x33b,0x3bb)+'\x20request\x20('+_0x1e21a7(-0x10e,-0x178,-0x179,-0x96)+_0x52d897+')');const _0x22c3f1=()=>{function _0xd10e99(_0x25359f,_0xe897d5,_0x535757,_0x332e8f){return _0x1e21a7(_0x25359f-0x42b,_0x332e8f,_0x535757-0x90,_0x332e8f-0x3f);}function _0x3dfd86(_0x98734,_0x48e801,_0x133f3d,_0x6753f3){return _0x1e21a7(_0x6753f3-0x5d6,_0x48e801,_0x133f3d-0x15b,_0x6753f3-0xc9);}_0x49d537['olCqt'](_0x49d537[_0x3dfd86(0x34c,0x3c9,0x4a5,0x400)],_0x49d537['ffeKh'])?(eventSource[_0xd10e99(0x31a,0x2ba,0x25c,0x3cc)+_0xd10e99(0x2ed,0x338,0x2db,0x376)](eventNames[_0x3dfd86(0x58f,0x4bf,0x4c7,0x4e1)+_0x3dfd86(0x3fe,0x41e,0x417,0x46a)+_0x3dfd86(0x3e6,0x387,0x413,0x45b)],_0x1f846c),_0x3043f0&&(_0x49d537[_0xd10e99(0x3c1,0x397,0x324,0x35d)](clearTimeout,_0x3043f0),_0x3043f0=null)):(_0x5d5dbb=_0x49d537['iIJGH'](_0x31c442,_0x57be99,_0x43744a,_0x29619b,_0xd10e99(0x3be,0x499,0x4a6,0x3af)),_0x1ad318[_0x3dfd86(0x49c,0x570,0x456,0x4a5)](_0x49d537[_0xd10e99(0x39c,0x34c,0x44a,0x434)],_0x25063e[_0x3dfd86(0x347,0x4b2,0x3b3,0x3fc)],_0x49d537['Filde'],_0x2d918e));},_0x1f846c=_0x3d1aba=>{function _0x26cda6(_0x63124c,_0x437a80,_0x271275,_0xfc253a){return _0xf496e0(_0x63124c-0x19d,_0x437a80,_0x271275-0x34,_0x63124c- -0xa4);}if(_0x586917['puNOr'](_0x3d1aba['id'],_0x52d897))return;function _0x3b50c2(_0x4f7456,_0x3cc32d,_0x3893d4,_0x2d705a){return _0x1e21a7(_0x4f7456-0x1b2,_0x3cc32d,_0x3893d4-0x10b,_0x2d705a-0x72);}_0x586917[_0x26cda6(0x32b,0x3a9,0x328,0x368)](_0x22c3f1);if(_0x3d1aba[_0x26cda6(0x2c8,0x22b,0x20c,0x312)]){if(_0x586917[_0x3b50c2(0x89,0x86,0x118,0xc3)](_0x586917[_0x3b50c2(0xea,0x1ce,0xdf,0x3)],_0x586917[_0x3b50c2(0xea,0x1af,0x147,0x61)])){if(_0x3d1aba[_0x3b50c2(0x90,0x112,0x2c,0x112)]){const _0x30d97f={};_0x30d97f[_0x3b50c2(0x67,-0xb,-0x4f,0x47)]=_0x3d1aba['result'],_0x30d97f['testMode']=!![],_0x586917[_0x3b50c2(0x128,0xe0,0x55,0x6f)](_0x1f6751,_0x30d97f);}else{if(_0x586917[_0x3b50c2(0x10c,0x13c,0x1a0,0x195)]!==_0x586917['kIrbJ']){const _0x2ae86a=new _0x167de7();_0x2ae86a[_0x3b50c2(0x10,0x53,-0x2,-0xd6)]=()=>_0x37eb8b(_0x2ae86a[_0x3b50c2(0x67,0x34,-0x22,0x113)]),_0x2ae86a[_0x3b50c2(0x6b,0x46,-0xb,0xa3)]=_0x4d22b5,_0x2ae86a['readAsData'+'URL'](_0x33b36d);}else{const _0x5cf57d={};_0x5cf57d['result']=_0x3d1aba[_0x3b50c2(0x67,-0x49,-0x80,0x152)],_0x5cf57d['testMode']=![],_0x1f6751(_0x5cf57d);}}}else _0x23bc05=_0x26cda6(0x2b1,0x2fe,0x301,0x2ac)+'被使用：'+[..._0x4e9787][_0x26cda6(0x371,0x3b3,0x305,0x2b2)]('、')+'\x0a';}else{if(_0x586917[_0x26cda6(0x2db,0x356,0x331,0x33c)](_0x586917[_0x26cda6(0x33b,0x36a,0x344,0x32b)],_0x586917['RLDTB'])){const _0xc2db53=_0x45143d['apply'](_0xe0e40e,arguments);return _0x5016f0=null,_0xc2db53;}else _0x16915b(new Error(_0x3d1aba[_0x26cda6(0x2b9,0x292,0x1f1,0x2e9)]||_0x26cda6(0x32a,0x2f0,0x38b,0x312)));}};function _0xf496e0(_0x24abe0,_0x5968c9,_0x312165,_0x65a72c){return _0x49a6f6(_0x65a72c- -0x184,_0x5968c9-0xe3,_0x312165-0xc,_0x5968c9);}eventSource['on'](eventNames['LLM_CHAR_D'+_0xf496e0(0x33a,0x30d,0x387,0x33c)+'ONSE'],_0x1f846c);const _0x5b7b81={};_0x5b7b81[_0x1e21a7(-0x7c,-0x109,-0xff,0x38)]=_0x7d88da,_0x5b7b81['id']=_0x52d897;function _0x1e21a7(_0x4975d6,_0x4fbe84,_0x23b55e,_0x2bacb6){return _0x1feb8f(_0x4975d6- -0x1fe,_0x4fbe84-0x67,_0x23b55e-0x92,_0x4fbe84);}eventSource['emit'](eventNames[_0xf496e0(0x35f,0x3d6,0x2e6,0x3b3)+_0x1e21a7(-0xae,-0x111,-0x156,-0xa)+'EST'],_0x5b7b81),_0x3043f0=_0x586917['tQmft'](setTimeout,()=>{function _0x51adef(_0x58fcf4,_0x13e8ce,_0x317db8,_0xa7a97f){return _0xf496e0(_0x58fcf4-0x1df,_0x13e8ce,_0x317db8-0xfb,_0x58fcf4- -0x2e9);}function _0x128f08(_0x5b59a1,_0x39776c,_0x429b36,_0x3a8a4c){return _0x1e21a7(_0x5b59a1-0x120,_0x3a8a4c,_0x429b36-0xe3,_0x3a8a4c-0x14f);}_0x49d537[_0x51adef(0x47,0x1,-0x4d,0xfa)](_0x22c3f1),_0x49d537[_0x128f08(0xb6,0x1a0,0xdd,0x106)](_0x16915b,new Error(_0x49d537[_0x128f08(0x34,-0x1a,0x115,-0x4f)]));},_0x25ce71);});}export async function handleCharacterDesignRequest(_0x5c1f0e){function _0x1151e4(_0x9fcb3,_0x1062b9,_0x29e41c,_0xf0413d){return _0x109a24(_0x9fcb3-0x28,_0xf0413d-0x47c,_0x29e41c,_0xf0413d-0x6);}const _0x3a45be={'DUQHB':_0x320d89(0x1d1,0x1b0,0x19d,0x143)+'Gen]\x20Error'+':','SSCVH':_0x1151e4(0x4cd,0x43e,0x591,0x50d)+'图片','jzyMZ':function(_0x222f74,_0x36ae2d){return _0x222f74>=_0x36ae2d;},'AJCGK':'xUgvA','xGbTK':_0x1151e4(0x4fb,0x48b,0x49b,0x572),'Eiqrd':function(_0x4fb4d7){return _0x4fb4d7();},'LdilX':function(_0x555dac,_0x85bf0b,_0x2eea3f,_0x3bf6fc,_0x37167f){return _0x555dac(_0x85bf0b,_0x2eea3f,_0x3bf6fc,_0x37167f);},'Kztnt':_0x320d89(0x16d,0x1b0,0xfd,0x277)+'Gen]\x20已将','lFnUk':_0x1151e4(0x4ad,0x50e,0x58a,0x49f),'NwJUk':function(_0x2324f1,_0x517500){return _0x2324f1(_0x517500);},'TVytI':_0x320d89(0x12c,0x1b0,0x157,0x10e)+_0x320d89(0x2a9,0x235,0x171,0x2fc)+'ing\x20charac'+'ter\x20design'+_0x1151e4(0x464,0x559,0x4e2,0x473)+'.','mXggK':function(_0x4a1fca,_0x3377d8){return _0x4a1fca===_0x3377d8;},'GQPXA':'BJSfT','ORtRY':_0x320d89(0x162,0x1b0,0x159,0xc6)+_0x320d89(0x1c3,0x28b,0x274,0x292)+_0x1151e4(0x654,0x597,0x5b6,0x60a)+_0x320d89(0xda,0x160,0x94,0x1c2)+'t','iOsjK':_0x320d89(0x2bc,0x225,0x184,0x178),'MrPPf':_0x1151e4(0x589,0x579,0x4e0,0x4b5)+_0x1151e4(0x594,0x4c0,0x508,0x590)+_0x1151e4(0x580,0x684,0x57b,0x5a1),'EkvXD':_0x1151e4(0x42b,0x508,0x55c,0x4b5)+'Gen]\x20User\x20'+'uploaded\x20i'+_0x320d89(0x162,0x1f6,0x264,0x242)+'t:','qDVXg':_0x320d89(0x189,0x1b0,0x257,0x132)+_0x320d89(0x2f3,0x27c,0x287,0x289)+_0x1151e4(0x62e,0x6c5,0x50d,0x5e5)+'.','OuoZt':function(_0x152c43,_0x39a3f5){return _0x152c43+_0x39a3f5;},'xqumr':function(_0x20441a,_0x1f7278,_0x20d38f){return _0x20441a(_0x1f7278,_0x20d38f);},'Twcxi':_0x1151e4(0x494,0x478,0x403,0x4d5),'BKxdk':_0x320d89(0x193,0x1f3,0x11c,0x1ad),'NSvBL':'未能获取上下文内容','DkEWj':_0x1151e4(0x440,0x59e,0x4c8,0x4b5)+_0x1151e4(0x5a0,0x417,0x512,0x4cb)+_0x320d89(0x1ea,0x15d,0xd8,0x19c)+'s:','Tpysk':_0x320d89(0x121,0x1b0,0x25d,0xdd)+_0x1151e4(0x59c,0x503,0x56b,0x509)+'ered\x20world'+_0x320d89(0x214,0x2e9,0x2f2,0x20b)+_0x320d89(0x3db,0x318,0x372,0x3ce),'qCIkU':function(_0x1db442,_0x4e936c){return _0x1db442>_0x4e936c;},'XQhOE':function(_0x1fd5b0,_0x41d39d){return _0x1fd5b0===_0x41d39d;},'bxQdG':'RUfJi','vnhaG':function(_0xf77fed,_0x2ea9ac){return _0xf77fed>_0x2ea9ac;},'opTTo':_0x1151e4(0x5d7,0x4c3,0x4e4,0x4f1),'GJMsC':_0x1151e4(0x4c8,0x545,0x528,0x4a5)+'n','Czzue':function(_0x9e55cb,_0x567889){return _0x9e55cb(_0x567889);},'CUGsz':function(_0x302efa){return _0x302efa();},'qUvxa':_0x1151e4(0x4a6,0x3df,0x482,0x4b5)+_0x1151e4(0x580,0x495,0x46d,0x4aa)+_0x320d89(0x1f8,0x185,0x154,0x1a7)+'text\x20(trig'+'gered):','sZlWS':'[character'+_0x320d89(0x1ca,0x1fb,0x284,0x11d)+_0x1151e4(0x546,0x41a,0x3fe,0x486),'TxlHC':function(_0x542d4f,_0x12eaf8){return _0x542d4f||_0x12eaf8;},'eXvyC':function(_0x2b22bb,_0x5e22e0,_0x4228b9,_0x30fa97,_0x4b25da){return _0x2b22bb(_0x5e22e0,_0x4228b9,_0x30fa97,_0x4b25da);},'tvLbh':'参考图片','ohmNj':function(_0x1ef053,_0x281bc6){return _0x1ef053(_0x281bc6);},'uOnwp':function(_0x274ee0){return _0x274ee0();},'zvTgG':function(_0x37ccdb){return _0x37ccdb();},'fRBkY':'tzvPz','PlGxQ':_0x1151e4(0x671,0x65f,0x5ec,0x592),'UPpAL':_0x1151e4(0x6c8,0x66c,0x501,0x5e4),'ZrDPU':_0x1151e4(0x48b,0x46d,0x4fd,0x4eb)+_0x1151e4(0x37e,0x48c,0x53f,0x466),'TsmEh':'[character'+'Gen]\x20收集角色/'+_0x320d89(0x1af,0x1b1,0x10f,0x161),'eBnoq':_0x320d89(0xe0,0x1b0,0x145,0x222)+_0x320d89(0x19b,0x1de,0x27a,0x223)+_0x1151e4(0x514,0x4b3,0x54f,0x537),'rmTAg':_0x320d89(0xde,0x177,0x182,0xcb),'tpTFk':_0x1151e4(0x4a2,0x50d,0x4a2,0x502)+_0x1151e4(0x617,0x6e6,0x676,0x609)+'LLM\x20请求，仅展示'+'最终\x20Prompt','phgov':_0x320d89(0x139,0x1b0,0x10f,0x21a)+_0x320d89(0x2fc,0x31f,0x372,0x27d)+_0x320d89(0x281,0x243,0x1c9,0x267)+_0x1151e4(0x51a,0x4c9,0x555,0x4db),'LHOXA':_0x1151e4(0x440,0x499,0x3d7,0x4b5)+'Gen]\x20LLM\x20r'+_0x1151e4(0x594,0x48f,0x4af,0x50b),'tIRDa':_0x1151e4(0x3e1,0x54b,0x43b,0x4b5)+'Gen]\x20测试模式\x20'+_0x1151e4(0x606,0x4a6,0x5e4,0x586),'PEiIH':function(_0x5456fc,_0x28e580){return _0x5456fc(_0x28e580);},'ammTO':function(_0x2670da,_0x2f3732){return _0x2670da(_0x2f3732);},'CtnPw':_0x320d89(0x225,0x1b0,0x1f9,0x1eb)+_0x320d89(0x203,0x274,0x1e8,0x209)+_0x320d89(0x28b,0x2d4,0x2a5,0x2f3)+_0x1151e4(0x592,0x40a,0x4ef,0x4ed)+_0x1151e4(0x482,0x5a3,0x597,0x550),'aqDaf':_0x320d89(0xf6,0x1b0,0x1bf,0x118)+_0x1151e4(0x53a,0x4a5,0x62c,0x57c)+_0x320d89(0x24e,0x297,0x2b8,0x274),'kBUas':_0x320d89(0x353,0x2e4,0x3af,0x368),'TWjnM':_0x320d89(0x208,0x2c8,0x38e,0x32f),'pISrf':function(_0x183336,_0x49cb7e,_0x160256){return _0x183336(_0x49cb7e,_0x160256);},'iDowm':function(_0x20cc02,_0x15668e){return _0x20cc02!==_0x15668e;},'RbjYz':'imIHP'};console['log'](_0x3a45be['TVytI']);function _0x320d89(_0x586e45,_0x43da52,_0x1b1082,_0x1fce30){return _0x109a24(_0x586e45-0x83,_0x43da52-0x177,_0x1b1082,_0x1fce30-0x9e);}try{if(_0x3a45be['mXggK'](_0x3a45be['GQPXA'],_0x3a45be['GQPXA'])){const _0x3d8c23=await showUserDemandPopup();if(_0x3a45be[_0x1151e4(0x59c,0x648,0x632,0x5dd)](_0x3d8c23,null)){console[_0x1151e4(0x5c4,0x498,0x521,0x520)](_0x3a45be['ORtRY']),toastr[_0x320d89(0x2cc,0x1fc,0x2c0,0x1b4)](_0x3a45be[_0x320d89(0x1e2,0x2b1,0x26a,0x32c)]);return;}let _0x72ad4a=_0x3d8c23['text']||extension_settings[extensionName]?.[_0x320d89(0x29a,0x26c,0x204,0x2c3)+_0x1151e4(0x4ee,0x5e8,0x570,0x5a6)]||'';const _0x2065e2=_0x3d8c23[_0x1151e4(0x509,0x4c6,0x3a3,0x458)]||[];console[_0x1151e4(0x464,0x46e,0x54b,0x520)](_0x3a45be[_0x1151e4(0x685,0x5e1,0x5f8,0x5fc)],_0x72ad4a),console[_0x320d89(0x21a,0x21b,0x1e9,0x29f)](_0x3a45be['EkvXD'],_0x2065e2[_0x1151e4(0x3aa,0x49d,0x3ec,0x477)]),toastr['info'](_0x3a45be['qDVXg']);const _0x19779c=_0x3a45be[_0x320d89(0x102,0x1eb,0x245,0x24d)](getContext),_0x2a6338=_0x3a45be[_0x320d89(0x128,0x1c3,0x129,0x299)](extension_settings[extensionName]?.[_0x1151e4(0x504,0x443,0x3fd,0x475)+_0x320d89(0x2a0,0x2a7,0x1c5,0x1d5)]??-0x724*0x3+-0x2*-0x12c2+0x8e*-0x1d,-0x5df*0x3+-0x813+-0x19b1*-0x1),_0x3e0e23=await _0x3a45be[_0x320d89(0x279,0x2c1,0x35f,0x35b)](getElContext,_0x5c1f0e,_0x2a6338);if(!_0x3e0e23||_0x3a45be['mXggK'](_0x3e0e23[_0x1151e4(0x4e8,0x445,0x47f,0x477)],-0xd40+0x17f8+-0xab8)){if(_0x3a45be[_0x1151e4(0x4e8,0x564,0x40e,0x4b3)]!==_0x3a45be['BKxdk']){toastr[_0x320d89(0x254,0x2f6,0x38a,0x25e)](_0x3a45be[_0x1151e4(0x4d7,0x53c,0x42b,0x48e)]);return;}else _0x277838['remove'](),_0x4365e1(_0x181aec);}console[_0x320d89(0x2e9,0x21b,0x306,0x208)](_0x3a45be[_0x320d89(0x22c,0x2cf,0x28b,0x207)],_0x3e0e23);const _0x23e4da=_0x3e0e23[_0x3e0e23[_0x320d89(0xf9,0x172,0x17e,0x257)]-(-0x125*0x1+0x68b+0x565*-0x1)];let _0x456270='';if(_0x3e0e23){const _0x27bb5d=_0x72ad4a?[..._0x3e0e23,_0x72ad4a]:_0x3e0e23;_0x456270=await _0x3a45be['NwJUk'](processWorldBooksWithTrigger,_0x27bb5d),console[_0x1151e4(0x4b7,0x5a1,0x5e8,0x520)](_0x3a45be[_0x320d89(0x252,0x24f,0x2ca,0x317)],_0x456270);}const _0x22c588=_0x3e0e23&&_0x3a45be[_0x1151e4(0x533,0x643,0x643,0x5f0)](_0x3e0e23[_0x1151e4(0x499,0x51b,0x524,0x477)],0x1f86+0xf24+-0x5*0x955)?_0x3e0e23[_0x320d89(0x196,0x18e,0x26c,0xa7)](-0x1529*0x1+0x1c*-0x11f+0x4c7*0xb,-(-0x1380+0xa*0x5+0x134f)):[],_0x38f83b=[];_0x72ad4a&&(_0x3a45be[_0x1151e4(0x476,0x4d5,0x5d7,0x50c)](_0x320d89(0x259,0x209,0x19f,0x1a5),_0x3a45be['bxQdG'])?_0x34107e[_0x1151e4(0x4a9,0x641,0x54e,0x557)](_0x3696c2[_0x1151e4(0x574,0x50e,0x5cf,0x5be)]('\x0a')):_0x38f83b[_0x1151e4(0x486,0x4e0,0x59b,0x557)](_0x72ad4a));_0x23e4da&&_0x38f83b['push'](_0x23e4da);const _0xdf8662=_0x38f83b[_0x320d89(0x1f4,0x2b9,0x272,0x2ed)]('\x0a'),_0x4c4d26=[];_0x72ad4a&&_0x4c4d26[_0x320d89(0x1ac,0x252,0x1fb,0x2fb)](_0x72ad4a);_0x3e0e23&&_0x3a45be[_0x1151e4(0x557,0x412,0x578,0x4b8)](_0x3e0e23['length'],-0x1*0x151+-0xab2+0xc03)&&_0x4c4d26[_0x320d89(0x2d3,0x252,0x279,0x2f5)](_0x3e0e23[_0x320d89(0x30e,0x2b9,0x1fe,0x2fa)]('\x0a'));_0x456270&&(_0x3a45be[_0x1151e4(0x521,0x4ca,0x5c9,0x50c)]('MGrxu',_0x3a45be['opTTo'])?(_0x478870[_0x1151e4(0x64d,0x6b4,0x5f0,0x5f9)](_0x3a45be[_0x320d89(0x2a1,0x21f,0x1bd,0x284)],_0x266535),_0x3190c9[_0x320d89(0x280,0x2f4,0x2ab,0x355)]('角色设计请求失败:\x20'+_0x1517d3['message'])):_0x4c4d26[_0x1151e4(0x4ac,0x57a,0x556,0x557)](_0x456270));const _0xcd2499=_0x4c4d26[_0x1151e4(0x551,0x6a5,0x5ae,0x5be)]('\x0a');console['log']('[character'+'Gen]\x20Chara'+_0x1151e4(0x4e1,0x633,0x50c,0x55f)+_0x320d89(0x1ce,0x1c0,0x12a,0x228),_0xcd2499);let _0x21ab98=_0x3a45be[_0x320d89(0x20f,0x2c1,0x327,0x2d7)](buildPromptForRequestType,_0x3a45be['GJMsC'],_0xdf8662);const _0x399c4e=_0x3a45be[_0x320d89(0x28a,0x24d,0x188,0x296)](generateCharacterListText,_0xcd2499),_0x3c86ac=_0x3a45be['CUGsz'](generateOutfitEnableListText),_0x1f6992=generateCommonCharacterListText();console['log'](_0x3a45be[_0x1151e4(0x656,0x526,0x545,0x5bd)],_0x399c4e);const _0x476057=_0x19779c[_0x1151e4(0x4d0,0x459,0x4a3,0x461)+'ta']?.[_0x320d89(0xda,0x156,0x196,0x200)]||{};_0x21ab98=_0x3a45be[_0x1151e4(0x538,0x63d,0x528,0x552)](mergeAdjacentMessages,_0x21ab98),console[_0x1151e4(0x476,0x5b6,0x454,0x520)](_0x3a45be[_0x320d89(0x27c,0x1c7,0x276,0x1c9)],_0x21ab98);const _0x1ff35e={'context':_0x22c588[_0x1151e4(0x65d,0x605,0x694,0x5be)]('\x0a'),'body':_0x23e4da,'worldBookContent':_0x456270,'variables':_0x476057,'userDemand':_0x3a45be[_0x1151e4(0x3c1,0x4c6,0x4f3,0x4a6)](_0x72ad4a,''),'characterListText':_0x399c4e,'outfitEnableListText':_0x3c86ac,'commonCharacterListText':_0x1f6992},{messages:_0x66c7b9,replacedVariables:_0x4aebd8}=replaceAllPlaceholders(_0x21ab98,_0x1ff35e);_0x21ab98=_0x66c7b9;function _0x5d7ee4(_0x5abea4){function _0x224661(_0x4ee717,_0x485fdd,_0x8e5768,_0x361095){return _0x320d89(_0x4ee717-0x6f,_0x8e5768- -0x333,_0x485fdd,_0x361095-0x38);}for(let _0x391f09=_0x5abea4[_0x5d5ead(-0x12c,-0x2a,-0xbb,-0x1a4)]-(0x220b+0x2568+-0x4772);_0x3a45be[_0x5d5ead(0x149,-0x54,0x63,0x48)](_0x391f09,-0xf1e+0xfdd+-0x1*0xbf);_0x391f09--){if(_0x5abea4[_0x391f09][_0x224661(-0x14e,-0x17a,-0x17c,-0x1ad)]===_0x5d5ead(0x21,-0x21,0x1c,0x74)){if(_0x3a45be[_0x5d5ead(-0xc6,0x10,-0x4e,-0xdc)]!==_0x3a45be[_0x5d5ead(-0x1f,-0x103,-0xc9,-0x177)])return _0x391f09;else{const _0x336de5=_0x4908db[_0x5d5ead(-0xfe,-0x90,-0xc4,-0xbb)+_0x5d5ead(0x15a,0x14f,0xea,0x144)](_0x224661(-0x1ba,-0x1f9,-0x11e,-0x14a));_0x336de5[_0x5d5ead(0x6b,0x93,0x50,-0x8)+'t']=_0x3a45be[_0x224661(-0xa8,-0x6a,-0x1f,0x15)],_0x336de5['className']=_0x5d5ead(-0x24,0x2c,0x2e,0x69)+_0x5d5ead(0xff,0x4d,0xc1,0xc3)+_0x224661(-0x275,-0x111,-0x18a,-0x1c7),_0x3240e6[_0x224661(-0x217,-0x1e3,-0x19e,-0x147)+'d'](_0x336de5);return;}}}function _0x5d5ead(_0x4591d6,_0x4cd31a,_0x23a4d2,_0x143a97){return _0x320d89(_0x4591d6-0x2d,_0x23a4d2- -0x22d,_0x4591d6,_0x143a97-0x134);}return-(0xfeb+0x47c+-0x1466);}const _0x78660=_0x5d7ee4(_0x21ab98);console[_0x320d89(0x231,0x21b,0x1d3,0x15f)]('[character'+_0x1151e4(0x565,0x475,0x4bc,0x47f)+'息索引用于附加图片:',_0x78660);_0x2065e2[_0x320d89(0xc8,0x172,0x25a,0xb8)]>-0x1a4d+0x1f20+-0x4d3&&_0x3a45be['jzyMZ'](_0x78660,0x16ab+-0x1bc5*-0x1+-0x8*0x64e)&&(_0x21ab98=_0x3a45be[_0x320d89(0x214,0x24c,0x1ad,0x2b5)](attachImagesToMessage,_0x21ab98,_0x78660,_0x2065e2,_0x3a45be['tvLbh']),console[_0x1151e4(0x513,0x4f2,0x4ea,0x520)](_0x3a45be[_0x1151e4(0x4de,0x5a2,0x634,0x568)],_0x2065e2[_0x1151e4(0x4f4,0x52d,0x49d,0x477)],_0x3a45be[_0x1151e4(0x5dc,0x5d2,0x55e,0x5b7)],_0x78660));try{const _0x19a6cd=await _0x3a45be[_0x1151e4(0x552,0x575,0x478,0x53d)](getEnabledCharacterImages,_0xcd2499),_0x1bd355=await _0x3a45be['uOnwp'](getEnabledOutfitImages),_0x29e944=await _0x3a45be[_0x320d89(0x1e2,0x194,0x19a,0x23a)](getCommonCharacterImages),_0x4585a5=[..._0x19a6cd,..._0x1bd355,..._0x29e944];_0x3a45be[_0x320d89(0x23d,0x1b3,0xf2,0x12b)](_0x4585a5[_0x320d89(0x14e,0x172,0x204,0x1eb)],-0x2b*0x3b+-0xa3*-0x3+0x800)&&_0x78660>=-0x1*0x2651+-0x55b+0x15d6*0x2&&(_0x3a45be[_0x320d89(0x261,0x207,0x21a,0x13b)](_0x3a45be[_0x320d89(0x14f,0x157,0x13e,0x12a)],_0x3a45be['PlGxQ'])?(_0x46ee1d['stopPropag'+_0x320d89(0x388,0x2fc,0x2f7,0x289)](),_0xd2db72['splice'](_0x291c4d,-0xc03*0x1+0x221d+-0x1619),_0x3a45be[_0x320d89(0x293,0x1eb,0x199,0x130)](_0x29a6d0)):(_0x21ab98=_0x3a45be[_0x320d89(0x1f3,0x24c,0x249,0x2f9)](attachImagesToMessage,_0x21ab98,_0x78660,_0x4585a5,_0x3a45be[_0x320d89(0x180,0x155,0xea,0x222)]),console[_0x1151e4(0x5b6,0x602,0x51d,0x520)](_0x1151e4(0x503,0x4e1,0x3ca,0x4b5)+'Gen]\x20已将',_0x4585a5[_0x320d89(0x168,0x172,0x1af,0x8e)],_0x3a45be[_0x1151e4(0x599,0x4ff,0x5d8,0x583)],_0x78660)));}catch(_0x23a0ee){console['error'](_0x3a45be['TsmEh'],_0x23a0ee);}console[_0x320d89(0x229,0x21b,0x25b,0x19d)](_0x3a45be[_0x1151e4(0x4eb,0x5a9,0x540,0x51b)],_0x21ab98);let _0x54c74f='';if(_0x3a45be['vnhaG'](_0x4aebd8['size'],-0x2092+0x2229+0xb*-0x25)){if(_0x3a45be[_0x1151e4(0x5e4,0x535,0x503,0x50c)](_0x320d89(0x145,0x1d3,0x203,0x267),_0x3a45be[_0x1151e4(0x569,0x65e,0x61c,0x5f8)]))return _0x371b77[_0x320d89(0x1e3,0x28f,0x276,0x285)]();else _0x54c74f='诊断：检测到以下变量'+_0x320d89(0x2fb,0x307,0x278,0x3d3)+[..._0x4aebd8][_0x1151e4(0x525,0x5f6,0x540,0x5be)]('、')+'\x0a';}updateCombinedPrompt(_0x21ab98,_0x54c74f);const _0x12199b=extension_settings[extensionName]?.['regexTestM'+_0x320d89(0x228,0x2cc,0x341,0x398)]??![];if(_0x12199b){toastr[_0x320d89(0x2c3,0x1fc,0x248,0x1fd)](_0x3a45be[_0x1151e4(0x3f8,0x591,0x48a,0x4c4)]),console[_0x320d89(0x24f,0x21b,0x212,0x289)](_0x3a45be[_0x1151e4(0x413,0x3ce,0x3e8,0x464)]);return;}const _0x5bd816={};_0x5bd816['timeoutMs']=0x493e0;const _0x528ed0=await _0x3a45be[_0x1151e4(0x62c,0x61d,0x65d,0x5c6)](LLM_CHAR_DESIGN,_0x21ab98,_0x5bd816);console[_0x1151e4(0x52d,0x5e1,0x462,0x520)](_0x3a45be[_0x320d89(0x204,0x29a,0x32a,0x1e1)],_0x528ed0);if(_0x528ed0[_0x320d89(0x2be,0x22a,0x2c5,0x1b2)]){console[_0x320d89(0x192,0x21b,0x1ea,0x28c)](_0x3a45be[_0x320d89(0x34a,0x270,0x235,0x289)]);return;}const _0x345615=_0x528ed0[_0x1151e4(0x582,0x555,0x5b7,0x506)];if(!_0x345615){toastr['error']('LLM\x20返回结果为空');return;}const _0x21d287=_0x3a45be[_0x320d89(0xce,0x1b2,0x155,0x1b9)](removeThinkingTags,_0x345615),_0x6e48ae=_0x3a45be[_0x1151e4(0x4a6,0x52d,0x463,0x4e8)](extractCharacterAndOutfitTags,_0x21d287);if(_0x3a45be[_0x320d89(0x14a,0x207,0x141,0x245)](_0x6e48ae[_0x1151e4(0x3ca,0x4f6,0x575,0x4a9)][_0x1151e4(0x4d8,0x4cc,0x3c6,0x477)],-0x251e+-0xc4d*-0x1+-0x1*-0x18d1)&&_0x3a45be[_0x320d89(0x187,0x207,0x155,0x287)](_0x6e48ae['outfits'][_0x1151e4(0x481,0x3e0,0x503,0x477)],-0x1473+0x151+0x1322)){toastr['warning'](_0x1151e4(0x669,0x4af,0x622,0x598)+_0x1151e4(0x5d8,0x42c,0x58f,0x4f5)),console[_0x1151e4(0x47f,0x4b0,0x4bd,0x520)](_0x320d89(0x224,0x1b0,0x108,0x197)+_0x1151e4(0x6c6,0x675,0x6c5,0x612)+_0x1151e4(0x56c,0x43f,0x4e1,0x49b)+'tfit\x20tags\x20'+_0x1151e4(0x57a,0x563,0x4e5,0x5ad)+_0x1151e4(0x5d9,0x565,0x56d,0x53c)),console['log'](_0x3a45be[_0x320d89(0x1ae,0x163,0x172,0x1e9)],_0x345615);return;}console[_0x1151e4(0x4cd,0x58b,0x557,0x520)](_0x3a45be['aqDaf'],_0x6e48ae);const _0x44d78e={};for(const _0x1ab4ba of _0x4aebd8){const _0x37e4d8=_0x1ab4ba['match'](/^\{\{getvar::([^}]+)\}\}$/);if(_0x37e4d8){if(_0x3a45be['kBUas']!==_0x3a45be[_0x1151e4(0x601,0x684,0x6c2,0x621)]){const _0x475f9b=_0x37e4d8[0x1adf+0x1bf4+-0x36d2];_0x44d78e[_0x475f9b]=_0x476057[_0x475f9b]||'';}else _0x4ccba2=_0x3a45be[_0x1151e4(0x3d0,0x47f,0x508,0x479)](_0x2c6afc,_0x4fcc12,_0x44f81e,_0x22bf1f,_0x320d89(0x1a6,0x28c,0x24c,0x21c)),_0x573755['log'](_0x3a45be['Kztnt'],_0x25c994[_0x1151e4(0x535,0x544,0x3a4,0x477)],_0x3a45be[_0x1151e4(0x5d9,0x686,0x4da,0x5b7)],_0x1e7ba1);}}const _0x47e5cb={'generationContext':_0x3e0e23[_0x320d89(0x252,0x2b9,0x252,0x37c)]('\x0a'),'generationWorldBook':_0x456270,'generationVariables':_0x44d78e};await _0x3a45be[_0x1151e4(0x4b7,0x538,0x4e9,0x4ec)](handleExtractedData,_0x6e48ae,_0x47e5cb),toastr[_0x320d89(0x157,0x210,0x261,0x2f9)](_0x320d89(0x31f,0x2a2,0x313,0x22f)+'成！');}else{const _0x5573f9={};_0x5573f9['result']=_0x581143[_0x1151e4(0x4b5,0x487,0x5d7,0x506)],_0x5573f9[_0x320d89(0x2a3,0x22a,0x251,0x2d0)]=![],_0x3a45be['NwJUk'](_0x35fe53,_0x5573f9);}}catch(_0x246865){if(_0x3a45be[_0x1151e4(0x56d,0x458,0x474,0x4ea)](_0x1151e4(0x49a,0x4b4,0x4b8,0x519),_0x3a45be['RbjYz']))console['error'](_0x3a45be[_0x1151e4(0x4e9,0x597,0x46d,0x524)],_0x246865),toastr[_0x320d89(0x3ad,0x2f4,0x2a6,0x3d6)]('角色设计请求失败:\x20'+_0x246865['message']);else return _0x5e95e8;}}