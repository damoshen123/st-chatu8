(function(_0x4564dc,_0xb0be40){function _0x4a491e(_0x2f745d,_0x37ad75,_0x11e858,_0x524a17){return _0x8424(_0x11e858-0x1c,_0x2f745d);}const _0x118e1c=_0x4564dc();function _0x13e6c3(_0x341422,_0x104003,_0x13a835,_0xecac9e){return _0x8424(_0x341422- -0x372,_0x13a835);}while(!![]){try{const _0x3e6822=parseInt(_0x4a491e(0x16d,0x2eb,0x224,0x2d7))/(-0x611*-0x1+-0x2360+0x1d50)+-parseInt(_0x13e6c3(-0xf8,-0x1a4,-0x10f,-0x11))/(-0x2564+-0x28*-0x9+0x23fe)*(parseInt(_0x4a491e(0x35d,0x2c2,0x2be,0x36b))/(-0x1191+-0x1*0xa9a+0x1c2e))+parseInt(_0x4a491e(0x29f,0x372,0x29d,0x2e2))/(0x87d+-0x2315+-0x1*-0x1a9c)+parseInt(_0x13e6c3(-0xa0,-0xa6,-0x3,0x3f))/(0x16ef*0x1+-0x7*-0x6d+-0x19e5)*(-parseInt(_0x4a491e(0x3a9,0x424,0x3ae,0x3bd))/(-0x426+0x12d*-0x1d+-0x2645*-0x1))+-parseInt(_0x4a491e(0x352,0x3f1,0x374,0x2dc))/(0x3*-0xafd+0x3*-0xb1b+0x424f)*(parseInt(_0x13e6c3(-0xeb,-0x7b,-0x135,-0x19e))/(0xc55+0x7*0x19d+0x28*-0x97))+parseInt(_0x13e6c3(-0x31,-0xd3,0x2a,-0xf8))/(-0x1*-0x1c42+-0x1c42+-0x1*-0x9)+parseInt(_0x4a491e(0x29f,0x46a,0x382,0x298))/(0x1b1a+-0x1*-0x23fb+0x3f0b*-0x1)*(parseInt(_0x4a491e(0x3db,0x437,0x38e,0x37a))/(-0x2*-0x92c+-0x1fd9+-0x2*-0x6c6));if(_0x3e6822===_0xb0be40)break;else _0x118e1c['push'](_0x118e1c['shift']());}catch(_0x307e21){_0x118e1c['push'](_0x118e1c['shift']());}}}(_0x4f3a,-0x1*0x808a5+-0xcbb15+0x1c106f));const _0x1e8b83=(function(){const _0x1141ab={};_0x1141ab[_0x13932f(0x4aa,0x40d,0x458,0x551)]=_0x62a23e(0x125,0x14c,0x1b1,0x1e2);function _0x13932f(_0xaafe10,_0x4537c9,_0x59bed5,_0xcc3af1){return _0x8424(_0xaafe10-0x1d0,_0xcc3af1);}_0x1141ab[_0x13932f(0x46a,0x380,0x444,0x3e1)]='JpEXF',_0x1141ab[_0x13932f(0x4f5,0x50b,0x476,0x427)]=_0x62a23e(0x39c,0x2fc,0x231,0x301),_0x1141ab['ZLzlr']=_0x62a23e(0x163,0x1b0,0x2e2,0x204);function _0x62a23e(_0x2f824e,_0x723870,_0x3e552f,_0x339d57){return _0x8424(_0x339d57- -0x44,_0x723870);}const _0x90c63a=_0x1141ab;let _0x1c46af=!![];return function(_0x3df78b,_0x37b542){const _0x4b6515={};_0x4b6515['vSNxR']=_0x90c63a[_0x9c20f6(0x5b,0x7a,0x27,0x8c)];const _0xe9b4a0=_0x4b6515;function _0x9c20f6(_0xab9163,_0x283bee,_0x5140e5,_0x1614c8){return _0x62a23e(_0xab9163-0x4c,_0x1614c8,_0x5140e5-0x10d,_0x283bee- -0x267);}function _0x205cd4(_0x12aacb,_0x3a7f9b,_0x22180d,_0x284de5){return _0x62a23e(_0x12aacb-0x14f,_0x3a7f9b,_0x22180d-0xe,_0x12aacb- -0x230);}if(_0x90c63a[_0x205cd4(0xc9,-0xd,0xd3,-0x8)]===_0x90c63a['ZLzlr']){const _0x498eef=_0x1c46af?function(){function _0x563f33(_0x371295,_0x1547bf,_0x4c2b18,_0xbc1353){return _0x9c20f6(_0x371295-0x13,_0xbc1353-0x472,_0x4c2b18-0x1bd,_0x371295);}function _0xe280b8(_0x10672e,_0x4bab15,_0x43dfb7,_0x155f6d){return _0x205cd4(_0x43dfb7- -0xf3,_0x155f6d,_0x43dfb7-0x126,_0x155f6d-0x1c3);}if(_0x90c63a['ECBfM']===_0x90c63a[_0x563f33(0x399,0x4aa,0x4d8,0x461)]){const _0x10caba={};_0x10caba[_0xe280b8(-0x4d,-0x1a2,-0x103,-0xe7)]=_0xe9b4a0[_0xe280b8(-0x1fe,-0x9c,-0x161,-0xc9)],_0x10caba[_0xe280b8(-0x21,-0x39,-0x22,-0xe8)]=_0x563f33(0x4b9,0x4ea,0x449,0x4c7)+_0x27b3a0[_0x563f33(0x3e3,0x4e6,0x396,0x41a)]+'张'+_0x12582a+']',_0x3c6139['push'](_0x10caba);}else{if(_0x37b542){const _0x17ee56=_0x37b542[_0x563f33(0x3a4,0x4f7,0x41c,0x471)](_0x3df78b,arguments);return _0x37b542=null,_0x17ee56;}}}:function(){};return _0x1c46af=![],_0x498eef;}else _0x343e54[_0x205cd4(-0x82,0x41,-0x28,0xc)](_0x25f940);};}()),_0x2c2312=_0x1e8b83(this,function(){const _0x54b4fc={};_0x54b4fc[_0xbd6f75(0x460,0x534,0x523,0x60a)]='(((.+)+)+)'+'+$';const _0x242cd2=_0x54b4fc;function _0xbd6f75(_0x39c24d,_0x40058e,_0x2841e5,_0x4e1301){return _0x8424(_0x40058e-0x284,_0x39c24d);}function _0x3ec35f(_0x3a5ac2,_0x47122e,_0x534a7c,_0x56b8a4){return _0x8424(_0x534a7c- -0x330,_0x3a5ac2);}return _0x2c2312[_0xbd6f75(0x52e,0x533,0x4c5,0x606)]()['search'](_0x242cd2[_0xbd6f75(0x5cf,0x534,0x484,0x50d)])['toString']()[_0x3ec35f(-0x78,0x129,0x5b,-0x49)+'r'](_0x2c2312)[_0xbd6f75(0x45b,0x4ab,0x4d3,0x503)](_0x242cd2['VzmtW']);});_0x2c2312();function _0x8424(_0x51a73b,_0x39b331){_0x51a73b=_0x51a73b-(0x1408+-0x7be+-0xa73);const _0x429a7f=_0x4f3a();let _0x592cab=_0x429a7f[_0x51a73b];if(_0x8424['dUQhcY']===undefined){var _0x23ba9a=function(_0x237cff){const _0x37443a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x55b41f='',_0x5a5ea3='',_0x319950=_0x55b41f+_0x23ba9a;for(let _0x39caa9=0x19d7+0x33*-0xc2+0xccf,_0x11bc60,_0x201e99,_0x233a72=-0x1b*-0x100+0x167*-0x2+-0x1832;_0x201e99=_0x237cff['charAt'](_0x233a72++);~_0x201e99&&(_0x11bc60=_0x39caa9%(0x97*-0x25+-0x13a2+0x2979)?_0x11bc60*(0x4*0x2b1+0xad6+0x71e*-0x3)+_0x201e99:_0x201e99,_0x39caa9++%(-0x10d0+0x1*-0xc09+0x1cdd))?_0x55b41f+=_0x319950['charCodeAt'](_0x233a72+(0x14a3+-0x1f99+-0x20*-0x58))-(0x236c+-0x4f9+0x1e69*-0x1)!==-0x340*0x1+-0x1993+0x1*0x1cd3?String['fromCharCode'](0x1cb+-0x185c+-0x1d*-0xd0&_0x11bc60>>(-(-0x20aa+-0x19*0x131+0x3e75)*_0x39caa9&0x152b+0x1f7*-0x2+-0x153*0xd)):_0x39caa9:-0x1fdf+0x427*-0x2+0x282d){_0x201e99=_0x37443a['indexOf'](_0x201e99);}for(let _0x23999c=0x1*-0x1b6e+-0x4f7*-0x4+0x792,_0x442f02=_0x55b41f['length'];_0x23999c<_0x442f02;_0x23999c++){_0x5a5ea3+='%'+('00'+_0x55b41f['charCodeAt'](_0x23999c)['toString'](0x7*0x355+0x1293+-0x29d6))['slice'](-(0x123*0x1b+0x247*0xe+0x14db*-0x3));}return decodeURIComponent(_0x5a5ea3);};_0x8424['RkRAfK']=_0x23ba9a,_0x8424['oCPyOm']={},_0x8424['dUQhcY']=!![];}const _0x938342=_0x429a7f[0x2548+-0x5e6+0x26a*-0xd],_0x2a25fc=_0x51a73b+_0x938342,_0x57f8ad=_0x8424['oCPyOm'][_0x2a25fc];if(!_0x57f8ad){const _0x5bad77=function(_0x317d81){this['OlvZcP']=_0x317d81,this['QHJTBf']=[0x1fd+-0x1*-0x1f31+-0x1*0x212d,-0x6*-0x3d2+-0x1*0xd7f+-0x96d,0x7*0x3fa+0xad4+0xca*-0x31],this['bBSPbx']=function(){return'newState';},this['uVBukC']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['nWaEgU']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5bad77['prototype']['GfhQSI']=function(){const _0x186948=new RegExp(this['uVBukC']+this['nWaEgU']),_0x134e1b=_0x186948['test'](this['bBSPbx']['toString']())?--this['QHJTBf'][-0x247d*0x1+-0x3*0x741+-0x679*-0x9]:--this['QHJTBf'][0xda*-0x12+-0x779*0x5+-0x1*-0x34b1];return this['dfbiaz'](_0x134e1b);},_0x5bad77['prototype']['dfbiaz']=function(_0x55e3b7){if(!Boolean(~_0x55e3b7))return _0x55e3b7;return this['AGKMom'](this['OlvZcP']);},_0x5bad77['prototype']['AGKMom']=function(_0x5ad783){for(let _0x204890=-0x12aa*-0x1+-0x6c5*0x5+0xf2f,_0x43ae8d=this['QHJTBf']['length'];_0x204890<_0x43ae8d;_0x204890++){this['QHJTBf']['push'](Math['round'](Math['random']())),_0x43ae8d=this['QHJTBf']['length'];}return _0x5ad783(this['QHJTBf'][0x24e8*-0x1+-0x4*-0x4d5+0x1194]);},new _0x5bad77(_0x8424)['GfhQSI'](),_0x592cab=_0x8424['RkRAfK'](_0x592cab),_0x8424['oCPyOm'][_0x2a25fc]=_0x592cab;}else _0x592cab=_0x57f8ad;return _0x592cab;}import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';function _0x4f3a(){const _0x6918a0=['6kEs6iMY5PYn6kof5y+c6icd5zU+54Mh','EhrXrKy','teD1t0u','qunvBKe','v1DuEw0','yxbWBhK','DgzPDcb0ywDZia','CMvTB3zLtgLZDa','tMPzu0G','vM5ur2G','Dg9tDhjPBMC','vNPTDfC','vu13C3C','zgnNwwi','uwjYv0y','wxzXBxC','B25LCNjVCG','zc1VDMvYBgf5','AxnbCNjHEq','s2D0y0m','t0rcreG','r2vUxsbvC2vYia','teXnx0niqvjFra','t3D6sey','Aw5JBhvKzxm','zgf0ytO','ywqTAgvHzgvY','CgXHy2vOB2XKzq','Cg9WDxaTAw1Nlq','rxvdqvq','uMLSDLq','vMTQu2K','zgLZCgXHEq','Ewfeq3y','yM90Dg9T','y29UDgvUDa','C3bHBG','w2nOyxjHy3rLCG','Cg9WDxaTDgL0Ba','y2fUy2vSBgvKia','r2vUxsdLT7lLSiy','y1rIvuC','vfHXCxe','EhqGzwXLBwvUDa','u1DXt3i','odKWmgDNChHfqq','rLb0rK4','BYbYzwfKigLTyq','Bg5vwK4','D3njreu','ywqTC2vJDgLVBG','rgfsyxK','vhD4D0O','runczK0','5BYpic0GteXnioIVT+AXGG','s1LowKe','B25SB2fK','y3rLzcbKyxrHoG','AxvszKu','pgKGy2XHC3m9iG','qKf4sgy','BMfTzq','zxjLzcb3B3jSza','5PYQ5zYOieXmtsdOVPpLH7RKUk0','DfLnBNu','rwPJAMG','v1Hlrwy','AKH1y2C','CxvLCNLtzwXLyW','yuzTv2m','C21Hr3K','DMfSDwu','r2vUxsbfEhrYyq','BeTzsMu','A2v5','C3rLBMvY','l3bUzZTIyxnLnG','wLbbsfe','ywrKrxzLBNrmAq','r3vUt28','venSzMG','BwTOsxq','s2nbtNK','zKvowu8','A2nXtei','AKrHuM8','BLjrCNO','t0vrvfO','yxrPB24','qKriD2G','tvzsB0q','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','Cg9WDxaTDgv4Da','xsbgywLSzwqGDa','6Aoo5Rgj5PYn55Qe5Bcr5AwZ6kEs6iMY77Ym5RIP','zw1PDa','vMfsDuG','zfPWyMG','r2vUxsdMRApLNkJLPitNKiBOP5i','yKP4y2e','uKHfqK0','sM1prM4','r2vUxsdMIB7LIldNLkJMIlFMTOG','DxbSB2fKzwqGAq','Aw1N','rvnjr05Fr0vuxW','Aw1Hz2uV','CKngueG','CfPKDLK','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','EwHSrwW','Cg9WDxaTyNvIyG','wgf5BNq','yNbhrLa','ue9ou0u','suniCem','Bgf5','Cun4rw8','y2HHDe1LDgfKyq','D0Xqv3a','Cg9WDxaTzw1WDa','t1rnzxy','DxnLCI1Kzw1HBG','CMfUzg9Tvvvjra','zvDJwhK','r01Uwwi','B0Teq1K','suv6C0q','vMTlAuS','Dgv4DcaODhjPzW','BfnbEum','uvbyq3q','5l6l5AAc77YA55sF5OIq5lIa5lIQ56M/552a5y+K','Aw5Uzxjive1m','AwPpyMy','t0jYA3O','5PYa57UiifbYB21WDa','seXOug8','s3vNDgq','DhjPBq','y3zTAvC','igjVB2SGy29UDa','z21lD2W','rw50zxi','q1Hjve8','CxfduKG','B2rL','DwnnCeW','vwncrMS','Aw5NoG','twPvENK','y3rLCIb0CMLNzW','wKX6Bhi','r2vUxsbuCMLNzW','CMvWBgfJzufSBa','Du1mA1K','ndy0nJaYnw1fvNLOtq','qLnvwhG','CKrLBwfUza','Dgv4DgfYzwe','Dgv4Da','rgrUDKC','EgfgvKO','BKvpC3a','Bxj3uMO','svLMrMe','r2vUxsbtDgfYDa','EuLOAfK','rwzswhi','qvn0Bfq','EhrZD3q','54k55yE75lIk5PA55OYj6zkU5RE75yQG5y+c6icd','y3vIDKe','D2fYBMLUzW','t05trq','ywqTyNrU','zw1ttNK','CM9Szq','r0jLDMO','mJq5otDSu3DUte8','AxrLBq','rvrHugW','BMvY','8j+oQcdOVPpLHAxNLj/MIjdPNidMSyi','suq6ia','qxjlExG','DxjS','t2vfDLi','Bg9N','qxLzBKq','zKXWs3C','yLrZAu8','Bwf4sgvPz2H0','ntb2A0HjAKi','yw1pEge','tufeBe0','wxrgv2e','q0nxt1C','C3r5Bgu','5PYn6kof5zU+54Mh5AsX6lsLoG','uvzbq0q','uhz4v0C','wM5sq0O','zw5LCG','Ev9Kzxb0Aa','mtCYnJK2n3Pqtxz1AW','CMfUzg9T','rfrtzhe','uNjqDKu','yMfZzty0','vvjm','5OgV57sI5BYv55sO5lQo6zMe5yQG5zU+54MhoG','zgv0ywLS','sxPADei','y3biELy','BwvZC2fNzq','AffoC0i','z2fQBxO','tvHQrKK','Bhn4t0u','5Rgc6lAf5PE2','DgLTzw91De1Z','DLfuqui','CMvZDwX0','r2vUxsdMRApLIjNMTyVOR5xMQke','BM5QAgm','z3DnzLO','D1D4D1m','uuvSweu','C3vJy2vZCW','y29UC3rYDwn0BW','CMvHswS','y2HHCL9KzxnPzW','yM9hC0G','zMLSzq','lsdLKi7NU63MK43KVzZLT7lOT7pOV4C','vKHjzey','mJGWmKPWrwTmDa','BM93','y29UzMLYBq','zuPIENm','ys1WBhvZiJ48lW','s2j4zhC','vNPfs0u','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','D1zny0e','DgLUzYbJAgfYia','AM9PBG','rK93CgG','Es1OAw50','sxDuD0q','rMLPzfi','yKPoy1q','EvHwrgC','r2vUxsbfCNjVCG','y2XVC2LUzW','zxiGDgv4DdO','A2v5zg93BG','ufjptvbux1jfuW','z2vYzwqPoG','DeLTy2y','yNjnwvO','r2vUxsbdB250zq','Cgvds20','zMLSzxm','CMvNzxHuzxn0tq','6i635y+w6kEs6iMY6k6+6k6H5O+q56s66k+n6lAf','qu9gs1G','AxDtq1q','Bu1PzLy','BwfNzxmGy291BG','BureuNy','ufjptvbux1jfuq','zM91BMqGAw4GBW','Bej1yMy','ihbYB21WDdO','r2vUxsdMLlBPM4BOP5lOIBiV','5BYG5zU+54Mh6zMe5yQG5yIW5RAi5OgV57sI5BYv','teXnioIVT+AXGU+8Jos7HEwXLEEKUG','BgXTx2HPC3rVCG','sgzTuKi','sgvRtxu','D3zQvue','v1vmDgu','suHQq2y','yxbWzw5Kq2HPBa','zvflCKe','r2vUxsboBYbJAa','ywfWqMS','ywrK','Cg9WDxaTDxbSBW','ChvZAa','D3jHChbLCG','DxrWDxq','B1zjCe8','Aw1Hz2vZ','zgf0ytPPBwfNzq','Cg9WDxaTAgLUDa','y2HHBMDL','rwzPuM4','B3v0zML0CW','ELbQyK0','q25uz3y','6kEs6iMY6k6+6k6HieXmtsdOR7C','zMHNCMe','y0HHu3y','vvbfEg4','yLnfBMe','DuTLzvK','B2jQzwn0','yM53re4','DLnoEfi','ALf5y3y','nZyYmZu4B0PyzKre','56gU5A6A55sF5OIq','svD6tw8','ywnJzxb0','6iMY5OIw5PYn6kof55Qe5yw35l2t6zYa5Rgc','ChjVBxb0','rvnjr05FuKvtua','DgfYz2v0','y2XHC3nmAxn0','r2vUxsdLKiJLUBBNM7JPGRVMTOG','zxjYB3i','55sO77YA5BEY5ygC5Q2I6kEs6iMY6k6+6k6Hia','At4G5RE75yQG5zU+54Mh','5y+c6icd5zU+54Mh','C3rYAw5N','rw1iquy','yKPrvfK','6kEs6iMYl+ACJEIJHEIUVUIUOEwKHoEqHUwUJa','CgPMEhq','D1fvwfK','C3rVCfbYB3bHzW','yM9KEq','5yIW5RAi5OgV57sI5BYv','y2XHC3noyw1L','BM9Uzq','z2v0qM91BMrPBG','DeXPC3rLBMvY','6kkR5l2/55sO77YA','yxjHy3rLCI9VDq','C3z3BNu','svbwu0K','C2vHCMnO','r2vUxsbszxf1zq','qM1Av24','C3b5C3G','r2vUxsdMTyVOR5xMQkhLVi8G','AxrLAe0','C3qTy2HHDhu4lq','yxv0BW','Dg9W','Bw9IAwXL','rgrwzgy','r2vUxsbmte0GCG','BxvSDgLWBgu','CMvTB3zLrxzLBG','qNv2tNa','r0fmsxG','EKjSzeG','uvjMtvK','teXnioI/LowBNUE7K+AENos4UUEPUG','qxPQsMC','tvbOzLO','y2P6tw4','B21WDcaOsuq6ia','C3jJ','D1nWAxq','y2HHCMfJDgvYCW','vxbyvgm','ywqTBgfIzwW','D2Pfug4','w3nOB3DvC2vYra','BMPNEKm','q3DeqNy','Aw5NignOyxjHyW','uw1UzeC','te9vwee','qLjzq3O','wgHjEgG','zKf6uM4','qvLbqxy','Ahneswy','BNDuAhm','6k+35O+p6l+W5OkO5BIm5PYB55sF5OIq55Qe6kEs','zw50','i3nLBMrFzM9YBq','BgvUz3rO','Cg9WDxaTB3zLCG','zNjfrKC','5BEY5RE75yQGia','y2XPy2S','vwvgufm','zM9YigrLyNvNzW','C2L6zq','5OgV5zcooG','rMHStw4','z0nSAwvUDfjLyW','vw5nCge','zM9JDxm','Aw1Hz2vFDxjS','EwnIt24','CMvTB3zL','B25Z','DhLWzq','D2DTwfG','zM9YrwfJAa','D2XfwwK','ihjLCxvLC3qUlG','r2vUxsbdAgfYyq','A2vcv3i','ENPkBKm','BwfW','BfLMuxG','Cg9WDxaTyNrUlq','Aw5WDxq','BLzIufq','wfrdC1y','swDxywW','DMfYAwfIBgvZ','C3rPBMCGy2HHCG','weH1rxe','Dg9Y','D1r4zxm','C3rHCNrZv2L0Aa','uhfrs1m','mtmZnde4AvnTDxb6','Aw5MBW','BLf1Afm','rvnu','tu5ZCMu','8j+tJIdLJ4lOGipLM77NIyFVViJLJ6/PGiNVViK','C3bSAwnL','mJKZnJuYrvvMuhvA','EuPit2i','qwHVyu4','Dgv4DenVBNrLBG','qNfJuMu','te0GB3v0Chv0ia','mtCWngT5vuLtsa','shbHENO','zxnWB25ZztO','zgvZAwDUieXmtq','uKjuugC','yxjLyq','sfvQDM0','qNjRwe8','BMjgAem','zgL2','yNv0Dg9U','vuvtva','wuXOCei','CgvJs2e','igrLC2LNBIbWCG','y3jLyxrLrwXLBq','tw9dwLO','qurTDKW','wK1Lt1K','r0jVz24','wfzqENq','t0Hbq3q','ihjLCxvLC3qGka','r2vUxsbsyxCGta','zw50oG','y3rYBeTLEq','EKLOA0m','m01hBhHJyq','zLDgyKK','Cg9WDxaTyNv0Da'];_0x4f3a=function(){return _0x6918a0;};return _0x4f3a();}import{getContext}from'../../../../st-context.js';function _0x179086(_0x40eaad,_0x1a99dd,_0x5062bc,_0xd41f4b){return _0x8424(_0x5062bc- -0x203,_0x1a99dd);}import{getElContext,processWorldBooksWithTrigger}from'./promptReq.js';import{extractCharacterAndOutfitTags,handleExtractedData}from'./newline_fix.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText,getEnabledCharacterImages,getEnabledOutfitImages,getCommonCharacterImages}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{isMobileDevice,removeThinkingTags}from'./utils.js';import{mergeAdjacentMessages,replaceAllPlaceholders}from'./promptProcessor.js';function showUserDemandPopup(){function _0x1ef1d7(_0x3d3667,_0x250051,_0x1fdcf0,_0x2998c3){return _0x8424(_0x250051- -0x22f,_0x2998c3);}const _0x3d9416={'jDaRo':_0x5b9e0d(0x3e5,0x519,0x438,0x4e3),'IzZtB':'点击上方按钮添加参考'+'图片','emSNy':_0x1ef1d7(0x12,0x6c,-0x2d,0x121),'eQKrA':'st-chatu8-'+_0x5b9e0d(0x45e,0x43a,0x469,0x47e)+_0x5b9e0d(0x5e6,0x598,0x501,0x570),'EmHAF':_0x5b9e0d(0x551,0x595,0x4b5,0x524),'qqCRH':_0x1ef1d7(0x6e,0x28,0xc8,0x109),'keBWr':_0x5b9e0d(0x47e,0x55a,0x4ed,0x427),'VaRuH':function(_0x18ea3c,_0x958925){return _0x18ea3c+_0x958925;},'PvxWG':'input','AyYnD':function(_0x2f2477,_0x346b35){return _0x2f2477===_0x346b35;},'xXiJw':_0x5b9e0d(0x4e3,0x43c,0x42a,0x36f),'nwThs':_0x5b9e0d(0x381,0x2fa,0x3d5,0x3e9)+_0x1ef1d7(0x91,0xee,0x6b,0x14f)+'y-hint','reaIk':_0x1ef1d7(0xe8,0x15,0xe9,0x75)+'emandPopup'+_0x1ef1d7(0x82,0xd3,0x12b,0x56)+_0x1ef1d7(0xb1,0xa5,0x163,0x39)+'ge:','gmKwl':function(_0x1bdf0f,_0xa8c631){return _0x1bdf0f!==_0xa8c631;},'DTSdq':_0x1ef1d7(0x133,0x13a,0x1d0,0x82),'BqcRe':_0x1ef1d7(-0xa6,-0x2e,-0x28,-0x26),'bpGFP':'DaRay','jQycv':_0x1ef1d7(0x95,-0x46,-0xca,0x27),'XHuEq':_0x5b9e0d(0x4a8,0x34b,0x3d2,0x38e),'lfMns':function(_0x70559f){return _0x70559f();},'uMLkY':_0x1ef1d7(0x3,0x76,0x7e,0x30),'FhlMn':_0x1ef1d7(0x10,0x9b,0xff,0xd7)+_0x1ef1d7(0x62,0x9e,0x143,0x56),'AYAAv':'张角色/服装图片附加'+'到消息索引','fWFbI':function(_0x22630f,_0x4dd6f7){return _0x22630f+_0x4dd6f7;},'bLEDZ':function(_0x4a7248,_0x426d91){return _0x4a7248(_0x426d91);},'zzJnC':_0x1ef1d7(0xa5,0xa,0x28,0x70),'AOFKX':_0x5b9e0d(0x595,0x470,0x531,0x535),'JmOFn':_0x5b9e0d(0x48b,0x52f,0x54c,0x614),'XBIPM':function(_0xcb19f4,_0x35a8c6,_0x314642){return _0xcb19f4(_0x35a8c6,_0x314642);},'nRQrz':'#top-setti'+'ngs-holder','zBldH':'Escape','YrheF':function(_0x89e7e6,_0x39d448){return _0x89e7e6===_0x39d448;},'OBrkz':_0x1ef1d7(-0x45,-0x25,-0xb1,0x83),'tImcf':_0x1ef1d7(0x175,0x177,0x21a,0x95),'XOpWd':function(_0x4836fb,_0x3299b8){return _0x4836fb-_0x3299b8;},'MNNeR':function(_0x48fd0d,_0x453c6f){return _0x48fd0d+_0x453c6f;},'KcANy':_0x1ef1d7(0x77,0x23,0x75,-0x41),'dtSxb':function(_0x487e1a,_0x48d7b0){return _0x487e1a!==_0x48d7b0;},'cubvA':_0x1ef1d7(0xa,0x5f,0x13d,-0x7d),'gajmz':function(_0x247fca,_0x168528){return _0x247fca-_0x168528;},'ZPAHQ':_0x5b9e0d(0x56d,0x42c,0x4c7,0x441)+_0x1ef1d7(-0x2e,0x87,-0x37,0x18),'IwTwD':'st-chatu8-'+_0x1ef1d7(-0xb5,0x25,0x55,0x9a)+_0x5b9e0d(0x488,0x42a,0x4c1,0x3d7),'wQUXY':_0x1ef1d7(0x42,-0x2,-0xde,0x3d)+_0x5b9e0d(0x436,0x403,0x4bc,0x582)+'le','cHaSv':_0x5b9e0d(0x40b,0x48a,0x3d8,0x3a3),'ayzwZ':_0x5b9e0d(0x5eb,0x5ae,0x504,0x56a),'QVACD':_0x5b9e0d(0x399,0x44b,0x3d5,0x459)+_0x5b9e0d(0x4e2,0x4f3,0x473,0x547)+'e','EuCAT':_0x5b9e0d(0x43d,0x4d9,0x3f8,0x4bc)+_0x1ef1d7(0x8a,-0x23,0x64,-0xe2),'mkhIt':'st-chatu8-'+_0x5b9e0d(0x3e8,0x48a,0x3a0,0x34e),'bwhgr':_0x5b9e0d(0x49e,0x4b0,0x4d1,0x4f3)+_0x1ef1d7(0x163,0xd4,0x113,0x5b)+'柔可爱...','RBTPg':_0x5b9e0d(0x3e6,0x42a,0x3d5,0x40f)+_0x1ef1d7(0x48,0xd2,0x73,0x199)+_0x1ef1d7(0x57,0x5d,-0x85,0x65),'lBubf':_0x5b9e0d(0x455,0x477,0x3d5,0x347)+_0x1ef1d7(-0x44,-0x3e,0x5e,-0x79)+_0x1ef1d7(0x139,0xa8,0x185,0xd4),'ICHpC':_0x1ef1d7(0x2b,0x9a,0x35,0x16e),'ODBDH':_0x5b9e0d(0x301,0x47d,0x3d5,0x384)+_0x1ef1d7(-0x98,-0x3e,-0x11,-0x21)+_0x1ef1d7(-0x59,0x13,0x92,0x6d),'IRFah':_0x1ef1d7(0xa4,0x160,0x194,0x8e),'hsDIf':'image/*','EfRXr':_0x1ef1d7(0x2c,-0xf,0x3a,0x1),'fhgra':_0x1ef1d7(0x143,0x62,0x62,-0x77),'OEQTZ':_0x1ef1d7(0xe9,-0x2,-0x7b,-0x7c)+'popup-prev'+'iew-contai'+_0x1ef1d7(0x200,0x12c,0x15a,0x42),'Ejcjh':_0x1ef1d7(-0x28,-0x36,-0x111,-0x11b),'OTMev':_0x5b9e0d(0x3f2,0x425,0x3d5,0x3ca)+_0x5b9e0d(0x4a3,0x4d1,0x44c,0x436)+_0x1ef1d7(0x48,0x34,0x7f,-0x5c),'siSOJ':'st-chatu8-'+_0x1ef1d7(0x10c,0x3f,-0x15,0x112)+'cancel','dZpbh':'st-chatu8-'+_0x5b9e0d(0x425,0x3b7,0x416,0x455)+_0x5b9e0d(0x5e6,0x596,0x53c,0x585)};function _0x5b9e0d(_0x296f49,_0x4a5b6f,_0x1fda9a,_0x227547){return _0x8424(_0x1fda9a-0x1a8,_0x4a5b6f);}return new Promise(_0x3d70b6=>{const _0x2de672={'gwMfZ':_0x3d9416[_0x3a0e76(0x2c1,0x37a,0x3f4,0x374)],'PqQKS':_0x3d9416[_0x3e94fb(0x9c,0x3b,-0x1d,0xae)],'yyMCf':_0x3d9416[_0x3a0e76(0x2b9,0x2bf,0x354,0x281)],'ExDEn':function(_0x547ab1,_0x8b9e22){return _0x3d9416['fWFbI'](_0x547ab1,_0x8b9e22);},'UpXTc':function(_0x5acbdd,_0x471885){return _0x3d9416['bLEDZ'](_0x5acbdd,_0x471885);},'plaag':_0x3d9416[_0x3e94fb(-0x94,0x4a,0x116,-0x62)],'jhTlA':function(_0x57d133,_0x1a886f){return _0x57d133===_0x1a886f;},'yhlEl':_0x3d9416[_0x3a0e76(0x1fd,0x293,0x1a3,0x20e)],'MNsre':_0x3d9416[_0x3a0e76(0x29f,0x35c,0x3e9,0x33e)],'MsqHi':function(_0x985af6,_0x15a8a4,_0x44e1b6){return _0x3d9416['XBIPM'](_0x985af6,_0x15a8a4,_0x44e1b6);},'aqskc':_0x3d9416['nRQrz'],'Kbxdw':function(_0x2879f4,_0x24ea91){function _0x55be0c(_0x13f0cb,_0x33b3cb,_0x13430a,_0x3d0601){return _0x3e94fb(_0x13f0cb-0x1ab,_0x3d0601- -0xda,_0x13430a-0x9d,_0x13430a);}return _0x3d9416[_0x55be0c(-0xc2,-0x98,-0x93,-0x58)](_0x2879f4,_0x24ea91);},'FiidR':_0x3d9416[_0x3a0e76(0x289,0x230,0x326,0x26b)],'GBevj':function(_0x59bf30,_0x503796){return _0x3d9416['YrheF'](_0x59bf30,_0x503796);},'VkjSi':_0x3d9416[_0x3e94fb(0x1df,0x10b,0xb5,0x166)],'yaDCv':_0x3e94fb(0x61,0x113,0x13d,0x82),'Xaynt':_0x3d9416[_0x3e94fb(0x1e8,0x188,0xaa,0xd5)]},_0x2a719d=isMobileDevice(),_0x4d6ace=[];let _0x421ba9=0x1*-0x2446+0x1194+0x12bc,_0x550819=_0x3d9416['XOpWd'](window['innerHeigh'+'t'],-0x2*0x1287+-0xb6+0x25ce);function _0x3e94fb(_0x139462,_0x13b4df,_0x1d5e82,_0x33912f){return _0x5b9e0d(_0x139462-0xfe,_0x33912f,_0x13b4df- -0x3c9,_0x33912f-0x48);}if(_0x2a719d){const _0x2bdb51=document[_0x3a0e76(0x2a1,0x3ce,0x3f8,0x31d)+_0x3e94fb(-0x2d,0x55,0x3,0xb6)](_0x3d9416[_0x3a0e76(0x33f,0x3c0,0x30f,0x32f)]);if(_0x2bdb51){const _0x451d1b=_0x2bdb51[_0x3a0e76(0x1ed,0x1aa,0x340,0x255)+'gClientRec'+'t']();_0x421ba9=_0x3d9416['MNNeR'](_0x451d1b[_0x3e94fb(0x8b,0xa6,0x45,0x66)],0x1682+-0x7*0x28f+-0x48f);}const _0x847c8=document[_0x3e94fb(0x2,0xc8,0x10,0x138)+_0x3e94fb(0xea,0x55,0x3b,-0x27)](_0x3d9416[_0x3e94fb(0x26,0xd6,0x190,0xb9)]);if(_0x847c8){if(_0x3d9416['dtSxb'](_0x3e94fb(0xba,0x56,-0x21,0x3b),_0x3d9416[_0x3e94fb(0x1a3,0x130,0xa1,0x1b7)])){const _0x19042b=_0x847c8[_0x3e94fb(0x35,0x0,0x75,0xda)+_0x3a0e76(0x2b8,0x315,0x29b,0x291)+'t']();_0x550819=_0x19042b['top']-(0xf7b+0x53e+0x423*-0x5);}else _0x3451e3[_0xc208][_0x3e94fb(0x77,0xc1,0x112,0x23)]=_0x3ea4db[_0x3a0e76(0x1db,0x219,0x1aa,0x243)][_0x3a0e76(0x3fc,0x2c3,0x3ca,0x320)];}}const _0x5c53bd=_0x3d9416[_0x3a0e76(0x3e6,0x2fd,0x3b9,0x3b2)](_0x550819,_0x421ba9),_0x32091d=document['createElem'+_0x3e94fb(-0xb9,0x30,-0x44,0xbe)](_0x3d9416[_0x3a0e76(0x38c,0x2cd,0x2c8,0x32e)]);_0x32091d['id']=_0x3d9416[_0x3e94fb(0x74,0xd1,0x52,0xe3)],_0x32091d[_0x3a0e76(0x2b9,0x252,0x1a5,0x253)]=_0x3d9416[_0x3e94fb(0x13a,0x17e,0x1af,0x252)];const _0x121bad=document[_0x3a0e76(0x3aa,0x361,0x375,0x2ca)+_0x3a0e76(0x318,0x1e5,0x33c,0x285)](_0x3d9416[_0x3e94fb(0x29,0xd9,0xf,0x160)]);_0x121bad[_0x3a0e76(0x1ce,0x30b,0x1b8,0x253)]=_0x3d9416[_0x3e94fb(-0x8d,-0x6,-0x46,0x8b)];_0x2a719d&&(_0x121bad['classList'][_0x3a0e76(0x15e,0x152,0x228,0x224)](_0x3d9416[_0x3a0e76(0x2f5,0x1dc,0x26c,0x234)]),_0x121bad[_0x3a0e76(0x338,0x453,0x2fa,0x39f)]['top']=_0x421ba9+'px',_0x121bad['style'][_0x3a0e76(0x31d,0x355,0x356,0x399)]=_0x5c53bd+'px');const _0x29a0d6=document['createElem'+_0x3e94fb(-0x28,0x30,0xc7,-0xa5)](_0x3a0e76(0x307,0x24e,0x3a5,0x2c4));_0x29a0d6[_0x3e94fb(0xb1,0x63,0x61,-0x85)+'t']=_0x3d9416['ayzwZ'],_0x29a0d6[_0x3e94fb(-0x43,-0x2,-0x24,0xb9)]=_0x3d9416[_0x3a0e76(0x2c6,0x331,0x392,0x3a1)];const _0x1c8952=document[_0x3e94fb(0x20,0x75,-0x4e,0x100)+_0x3a0e76(0x1c6,0x1ae,0x26e,0x285)](_0x3d9416[_0x3a0e76(0x283,0x40f,0x379,0x32e)]);_0x1c8952[_0x3a0e76(0x343,0x352,0x396,0x2b8)+'t']=_0x3d9416[_0x3a0e76(0x30f,0x3be,0x338,0x2f6)],_0x1c8952[_0x3e94fb(-0x9b,-0x2,0xb,-0x5a)]=_0x3d9416[_0x3e94fb(0x134,0xd5,0xcf,0x55)];const _0x5b46bc=document[_0x3a0e76(0x2cb,0x369,0x282,0x2ca)+_0x3a0e76(0x33c,0x1a4,0x283,0x285)](_0x3a0e76(0x43e,0x43d,0x3f9,0x378));_0x5b46bc[_0x3a0e76(0x2c6,0x2ca,0x299,0x2f4)+'r']=_0x3d9416['bwhgr'],_0x5b46bc[_0x3a0e76(0x1ee,0x1ba,0x2b6,0x253)]=_0x3d9416[_0x3a0e76(0x2d4,0x2a9,0x259,0x2bf)];const _0x35315d=document[_0x3a0e76(0x227,0x1ee,0x370,0x2ca)+'ent'](_0x3d9416[_0x3a0e76(0x2ab,0x328,0x3c2,0x32e)]);_0x35315d[_0x3e94fb(-0xa8,-0x2,-0x81,-0x38)]=_0x3d9416[_0x3a0e76(0x224,0x1ed,0x2eb,0x215)];const _0x1e7860=document[_0x3e94fb(0x131,0x75,0xdc,0xe3)+_0x3a0e76(0x27e,0x2ab,0x355,0x285)](_0x3d9416[_0x3a0e76(0x283,0x2e5,0x3a5,0x32e)]);_0x1e7860[_0x3a0e76(0x2c5,0x2ee,0x2e3,0x253)]=_0x3a0e76(0x189,0x24f,0x280,0x261)+_0x3a0e76(0x256,0x1ee,0x19f,0x225)+_0x3a0e76(0x396,0x395,0x339,0x2f3);const _0x41e2ba=document[_0x3a0e76(0x2e5,0x2fc,0x303,0x2ca)+_0x3e94fb(-0x19,0x30,-0xb3,0x35)](_0x3d9416[_0x3e94fb(0x40,0xf7,0x1ad,0x12f)]);_0x41e2ba[_0x3a0e76(0x346,0x20b,0x340,0x2b8)+'t']=_0x3a0e76(0x289,0x307,0x379,0x2b3),_0x41e2ba[_0x3a0e76(0x203,0x1cc,0x302,0x253)]=_0x3d9416[_0x3a0e76(0x289,0x2ef,0x280,0x2ed)];const _0x18f714=document[_0x3a0e76(0x2da,0x201,0x332,0x2ca)+_0x3a0e76(0x346,0x27e,0x277,0x285)](_0x3d9416['PvxWG']);_0x18f714[_0x3a0e76(0x2c8,0x206,0x32e,0x298)]=_0x3d9416['IRFah'],_0x18f714[_0x3e94fb(-0xc4,-0x16,0x23,0x52)]=_0x3d9416[_0x3e94fb(0x6f,0x2d,0xab,0x4)],_0x18f714[_0x3e94fb(-0xa5,0x12,-0x4c,-0x59)]=!![],_0x18f714[_0x3a0e76(0x3d6,0x2e0,0x37b,0x39f)][_0x3a0e76(0x322,0x3b9,0x2d4,0x2f9)]=_0x3d9416[_0x3e94fb(0xf3,0x12c,0x1c3,0x12c)];const _0xaac98b=document[_0x3a0e76(0x324,0x2e8,0x28a,0x2ca)+_0x3e94fb(0x1b,0x30,-0x8d,-0x1b)](_0x3d9416[_0x3e94fb(-0x79,-0x22,-0x19,-0x3b)]);_0xaac98b[_0x3e94fb(-0x79,0x43,0xfd,-0x93)]=_0x3d9416[_0x3a0e76(0x202,0x2da,0x28b,0x233)],_0xaac98b[_0x3e94fb(0x1cc,0x109,0xed,0x51)]=_0x3e94fb(0x10,0xbf,0xc4,0x9f)+'fa-solid\x20f'+_0x3a0e76(0x365,0x329,0x307,0x3ca)+_0x3e94fb(0x83,-0xd,-0x78,-0xce),_0xaac98b['className']=_0x3e94fb(-0x61,0xc,-0x68,-0x5d)+_0x3e94fb(-0x4c,-0x30,0x15,-0x5a)+_0x3a0e76(0x29e,0x313,0x32a,0x388),_0xaac98b[_0x3a0e76(0x2b2,0x2a6,0x32f,0x327)+'stener'](_0x3e94fb(-0x46,0x36,0xa8,-0x3b),()=>_0x18f714['click']()),_0x1e7860[_0x3a0e76(0x1e9,0x189,0x30a,0x220)+'d'](_0x41e2ba),_0x1e7860[_0x3e94fb(-0x5,-0x35,-0xb0,-0x3)+'d'](_0xaac98b);const _0x332694=document['createElem'+_0x3e94fb(-0x89,0x30,-0x98,-0x7d)](_0x3d9416['jDaRo']);_0x332694[_0x3a0e76(0x25e,0x1ec,0x265,0x253)]=_0x3d9416[_0x3e94fb(0x10c,0xdb,0x11a,0x131)];const _0x2ade24=document[_0x3a0e76(0x2aa,0x35b,0x3a2,0x2ca)+'ent'](_0x3d9416[_0x3e94fb(0x1b7,0xd9,0x117,0xcc)]);_0x2ade24[_0x3a0e76(0x2c3,0x210,0x2af,0x2b8)+'t']=_0x3d9416[_0x3e94fb(0x223,0x159,0x101,0x118)],_0x2ade24[_0x3e94fb(-0xa4,-0x2,-0xad,0x59)]=_0x3d9416['nwThs'],_0x332694[_0x3a0e76(0x1a4,0x140,0x22d,0x220)+'d'](_0x2ade24);function _0x30dd58(){function _0x2bf53e(_0x543aa9,_0x24dd7a,_0x426ed2,_0x9bf401){return _0x3a0e76(_0x543aa9-0x175,_0x24dd7a,_0x426ed2-0x1d0,_0x9bf401- -0xa);}const _0x2e1163={'BmZWn':_0x3d9416[_0x2bf53e(0x28c,0x3a6,0x3d6,0x324)],'nVbPT':_0x3d9416['IzZtB'],'GunOo':function(_0x51a27f,_0x44a192){return _0x51a27f!==_0x44a192;},'EfiRn':_0x3d9416[_0x2bf53e(0x325,0x2ca,0x2a3,0x37f)],'wlEYi':'nUvkv','nsVEv':function(_0x167807){return _0x167807();},'lsxOE':_0x3d9416[_0x2bf53e(0x1ff,0x279,0x292,0x217)],'VxeAT':_0x2bf53e(0x170,0x2df,0x1ad,0x257)+_0x2bf53e(0x2fb,0x2d9,0x3b4,0x2eb)+_0x2bf53e(0x17f,0x307,0x28e,0x21d),'VldcF':_0x3d9416[_0x2bf53e(0x1bb,0x312,0x306,0x241)],'JVXit':_0x5a40cd(0x52b,0x3b3,0x469,0x423),'nQuhS':_0x5a40cd(0x31b,0x346,0x405,0x3c1)+_0x5a40cd(0x3fd,0x3d8,0x499,0x3bb)+'delete','HUjvm':_0x3d9416[_0x5a40cd(0x51b,0x471,0x50e,0x536)],'jHucg':_0x3d9416[_0x2bf53e(0x2d1,0x1bd,0x1e8,0x294)],'fLpKw':function(_0x50a878,_0xabdf7c){function _0x55b50d(_0x3558bf,_0x15f573,_0x94d8b1,_0x105dd8){return _0x5a40cd(_0x3558bf-0x19e,_0x15f573,_0x3558bf- -0xea,_0x105dd8-0x8e);}return _0x3d9416[_0x55b50d(0x3f3,0x463,0x49d,0x3b0)](_0x50a878,_0xabdf7c);},'wddWc':_0x3d9416[_0x5a40cd(0x4f4,0x4b7,0x546,0x55b)]};_0x332694[_0x5a40cd(0x5a8,0x51a,0x502,0x568)]='';function _0x5a40cd(_0x4381ce,_0x645db9,_0x30c272,_0x846a7a){return _0x3a0e76(_0x4381ce-0x16,_0x645db9,_0x30c272-0xe1,_0x30c272-0x1a4);}if(_0x3d9416[_0x2bf53e(0x377,0x3d1,0x448,0x38c)](_0x4d6ace['length'],-0xefb+-0x30a+0x1205)){if(_0x3d9416['AyYnD'](_0x2bf53e(0x3ca,0x38c,0x25b,0x2e6),_0x3d9416['xXiJw']))_0x29f9df=_0x588d9a(_0x2d6884,_0x2dc382,_0xf7b535,_0x2de672[_0x2bf53e(0x3af,0x3b6,0x389,0x3b1)]),_0x4ea658[_0x2bf53e(0x2d5,0x417,0x392,0x38b)](_0x2de672[_0x2bf53e(0x1d6,0x275,0x2e5,0x2a3)],_0x30f482[_0x2bf53e(0x1f0,0x1f0,0x1ce,0x27d)],_0x2de672['yyMCf'],_0x186cd0);else{const _0x455e39=document[_0x5a40cd(0x3cd,0x480,0x46e,0x4c5)+_0x5a40cd(0x483,0x41c,0x429,0x44c)](_0x3d9416[_0x2bf53e(0x3fd,0x330,0x38b,0x324)]);_0x455e39[_0x5a40cd(0x376,0x3f3,0x45c,0x53c)+'t']=_0x2bf53e(0x431,0x2f7,0x293,0x37a)+'图片',_0x455e39['className']=_0x3d9416[_0x5a40cd(0x416,0x4f1,0x427,0x38d)],_0x332694[_0x2bf53e(0x20a,0x161,0x13d,0x216)+'d'](_0x455e39);return;}}_0x4d6ace[_0x5a40cd(0x3f6,0x374,0x43e,0x4d1)]((_0x4d9915,_0x1386fd)=>{const _0x46e158=document['createElem'+'ent'](_0x2e1163[_0x89b12f(0x1b3,0x1fd,0x238,0x239)]);function _0x89b12f(_0x525874,_0x2278be,_0x2a8b05,_0x3efe20){return _0x2bf53e(_0x525874-0x57,_0x2a8b05,_0x2a8b05-0x1dd,_0x2278be- -0x56);}_0x46e158[_0x89b12f(0x1b1,0x1f3,0x2c0,0x176)]=_0x2e1163[_0x89b12f(0x367,0x354,0x3d4,0x2a3)];const _0x4b3f03=document[_0x13cda9(0x51d,0x515,0x536,0x482)+_0x13cda9(0x547,0x4d0,0x4df,0x41d)](_0x2e1163['BmZWn']);_0x4b3f03['className']=_0x2e1163['VxeAT'];const _0x2968ce=document['createElem'+_0x13cda9(0x59e,0x4d0,0x523,0x437)](_0x2e1163['VldcF']);_0x2968ce[_0x89b12f(0x1cf,0x212,0x2ad,0x136)]=_0x4d9915[_0x13cda9(0x591,0x5f5,0x617,0x6a6)];const _0x5c5f43=document[_0x89b12f(0x2b3,0x26a,0x2c7,0x232)+'ent'](_0x2e1163['JVXit']);function _0x13cda9(_0x25e729,_0x107671,_0x594c7d,_0x3b2167){return _0x5a40cd(_0x25e729-0x1a7,_0x3b2167,_0x107671-0xa7,_0x3b2167-0x8b);}_0x5c5f43['type']=_0x2e1163['JVXit'],_0x5c5f43[_0x89b12f(0x388,0x2fe,0x242,0x378)]='×',_0x5c5f43[_0x13cda9(0x4d7,0x49e,0x4c7,0x4da)]=_0x2e1163[_0x13cda9(0x4ce,0x4fb,0x56b,0x4f0)],_0x5c5f43['addEventLi'+_0x13cda9(0x5fd,0x56f,0x4ac,0x486)](_0x2e1163[_0x13cda9(0x4f5,0x50c,0x5b7,0x43f)],_0xf0d6e8=>{const _0x5951d2={};_0x5951d2[_0x2090c2(0x2da,0x395,0x269,0x3b1)]=_0x2e1163['BmZWn'];function _0x2090c2(_0x5f9cfd,_0x345c4a,_0x191041,_0x565d9b){return _0x13cda9(_0x5f9cfd-0x114,_0x5f9cfd- -0x2f4,_0x191041-0x12d,_0x191041);}_0x5951d2[_0x32c8e1(0x629,0x647,0x592,0x664)]=_0x2e1163[_0x2090c2(0x1fb,0x136,0x27b,0x265)],_0x5951d2[_0x32c8e1(0x5ff,0x682,0x600,0x73f)]=_0x32c8e1(0x64e,0x5ec,0x6b4,0x512)+_0x2090c2(0x2a8,0x23f,0x21b,0x1e8)+_0x32c8e1(0x7a6,0x75d,0x77e,0x6d5);function _0x32c8e1(_0x3c5b9c,_0x45859d,_0x445417,_0xe6726a){return _0x13cda9(_0x3c5b9c-0x2c,_0x45859d-0x140,_0x445417-0x1cb,_0x3c5b9c);}const _0x539c05=_0x5951d2;if(_0x2e1163[_0x32c8e1(0x715,0x6b3,0x60b,0x74b)](_0x2e1163[_0x32c8e1(0x4ee,0x5b9,0x5bf,0x4e0)],_0x2e1163[_0x32c8e1(0x614,0x626,0x612,0x64a)]))_0xf0d6e8[_0x32c8e1(0x673,0x5db,0x544,0x505)+_0x32c8e1(0x71b,0x6bc,0x613,0x67b)](),_0x4d6ace[_0x2090c2(0x20b,0x21d,0x1bd,0x2ea)](_0x1386fd,-0x2*0x7ea+-0x355*-0x5+-0xd4),_0x2e1163['nsVEv'](_0x30dd58);else{const _0x126f5f=_0x647e94[_0x32c8e1(0x645,0x655,0x6b7,0x5a3)+_0x32c8e1(0x60b,0x610,0x52b,0x610)](_0x539c05[_0x32c8e1(0x6fe,0x70e,0x6b2,0x692)]);_0x126f5f[_0x2090c2(0x20f,0x1f7,0x16c,0x2b0)+'t']=_0x539c05[_0x32c8e1(0x667,0x647,0x5cd,0x622)],_0x126f5f[_0x32c8e1(0x55b,0x5de,0x5d7,0x5d5)]=_0x539c05['RilvT'],_0x5525d4['appendChil'+'d'](_0x126f5f);return;}}),_0x4b3f03[_0x89b12f(0x203,0x1c0,0x1ea,0x208)+'d'](_0x2968ce),_0x4b3f03[_0x13cda9(0x506,0x46b,0x50a,0x527)+'d'](_0x5c5f43);const _0x46b0cf=document[_0x13cda9(0x5e8,0x515,0x57e,0x59b)+_0x13cda9(0x534,0x4d0,0x410,0x402)](_0x89b12f(0x189,0x243,0x2f2,0x262));_0x46b0cf[_0x13cda9(0x414,0x4e3,0x56c,0x4cf)]=_0x2e1163[_0x13cda9(0x4b0,0x567,0x549,0x547)],_0x46b0cf[_0x13cda9(0x5f6,0x53f,0x5ef,0x495)+'r']='图'+_0x2e1163[_0x13cda9(0x589,0x5e2,0x5ca,0x619)](_0x1386fd,0x1c*-0x139+-0x2049+-0x41*-0x106),_0x46b0cf[_0x89b12f(0x2bb,0x2c0,0x332,0x314)]=_0x4d9915['name']||'',_0x46b0cf[_0x13cda9(0x3d7,0x49e,0x4b2,0x4e4)]='st-chatu8-'+_0x89b12f(0x2c6,0x295,0x36c,0x300)+_0x13cda9(0x618,0x561,0x54d,0x505),_0x46b0cf['addEventLi'+_0x13cda9(0x52f,0x56f,0x4c1,0x56d)](_0x2e1163['wddWc'],_0x366eca=>{function _0x21ba40(_0x40b643,_0x491630,_0x2aebdd,_0x2d97c0){return _0x89b12f(_0x40b643-0xe4,_0x2d97c0-0x39,_0x40b643,_0x2d97c0-0x1b6);}function _0x3cf882(_0x25c232,_0x1273e9,_0x1ff9f9,_0x4d14cd){return _0x89b12f(_0x25c232-0x49,_0x1ff9f9- -0x343,_0x1273e9,_0x4d14cd-0x103);}_0x4d6ace[_0x1386fd][_0x3cf882(-0xc3,-0xd4,-0x8d,-0xf7)]=_0x366eca['target'][_0x3cf882(-0x19,-0x128,-0x83,-0x2)];}),_0x46e158[_0x13cda9(0x415,0x46b,0x49b,0x40f)+'d'](_0x4b3f03),_0x46e158[_0x89b12f(0x16b,0x1c0,0x1d5,0x1b7)+'d'](_0x46b0cf),_0x332694[_0x13cda9(0x3a5,0x46b,0x38f,0x3bc)+'d'](_0x46e158);});const _0x2d27af=document[_0x5a40cd(0x3e5,0x4a5,0x46e,0x4a1)+_0x2bf53e(0x338,0x33e,0x2a5,0x27b)](_0x5a40cd(0x4ef,0x4a7,0x468,0x492));_0x2d27af['textConten'+'t']=_0x5a40cd(0x36c,0x455,0x42e,0x3b7)+_0x4d6ace[_0x5a40cd(0x500,0x455,0x42b,0x42e)]+'\x20张图片',_0x2d27af[_0x5a40cd(0x3d0,0x419,0x3f7,0x41e)]='st-chatu8-'+_0x2bf53e(0x351,0x358,0x325,0x2eb)+'count',_0x332694[_0x2bf53e(0x1b2,0x17a,0x158,0x216)+'d'](_0x2d27af);}_0x18f714[_0x3a0e76(0x400,0x300,0x252,0x327)+_0x3a0e76(0x24b,0x3b2,0x314,0x324)](_0x3d9416[_0x3e94fb(0x169,0xc5,0x59,0xa)],async _0x488add=>{function _0xc3fd36(_0x11abaf,_0x5ba1d8,_0x512d1f,_0x41d35d){return _0x3e94fb(_0x11abaf-0x4b,_0x5ba1d8-0x519,_0x512d1f-0x100,_0x512d1f);}const _0x578eae={};_0x578eae[_0x335bde(0x129,0x1e8,0xfc,0x20a)]=_0x3d9416[_0xc3fd36(0x633,0x684,0x668,0x75f)];function _0x335bde(_0x197a56,_0x56120c,_0xe0b612,_0x137d46){return _0x3e94fb(_0x197a56-0x41,_0x197a56-0xec,_0xe0b612-0x13a,_0x137d46);}const _0x551149=_0x578eae;if(_0x3d9416[_0x335bde(0x1fe,0x2d8,0x2bd,0x281)](_0x3d9416[_0x335bde(0x23f,0x2f2,0x22a,0x166)],_0xc3fd36(0x5ea,0x652,0x65e,0x5b8))){const _0x33f673=_0x488add['target'][_0x335bde(0xa2,0x151,0xba,0x5c)];if(!_0x33f673||_0x33f673['length']===-0x1*0x9cb+-0x1d30+-0x1*-0x26fb)return;for(const _0x368ee5 of _0x33f673){if(_0x3d9416[_0xc3fd36(0x6a5,0x65a,0x584,0x6e7)](_0x3d9416[_0xc3fd36(0x5e7,0x57d,0x49a,0x5f4)],_0x335bde(0x26d,0x2f7,0x1fe,0x277)))return _0x49a018;else{if(!_0x368ee5[_0x335bde(0x12f,0x1d8,0x8a,0x173)][_0x335bde(0x143,0x185,0xfd,0x17f)](_0xc3fd36(0x5bd,0x607,0x548,0x551)))continue;try{if(_0x3d9416[_0x335bde(0x22d,0x144,0x224,0x1b3)](_0x3d9416[_0xc3fd36(0x6b4,0x60e,0x614,0x558)],_0xc3fd36(0x663,0x5d0,0x655,0x602))){const _0x95a360=await _0x3e94a9(_0x368ee5),_0x2551bf={};_0x2551bf[_0x335bde(0x241,0x174,0x2a4,0x1e0)]=_0x95a360,_0x2551bf[_0xc3fd36(0x5eb,0x5da,0x698,0x540)]='',_0x4d6ace[_0xc3fd36(0x4c6,0x4ea,0x57b,0x4ed)](_0x2551bf);}else _0x2a48f9[_0x335bde(0xdd,0x8c,0x1b,0xaa)](_0x551149['UnMpa'],_0x474779);}catch(_0x2b1f29){if(_0x3d9416[_0xc3fd36(0x710,0x65a,0x650,0x6ad)](_0x3d9416[_0x335bde(0xd2,0xda,0xb7,0x15b)],_0x3d9416[_0xc3fd36(0x547,0x56d,0x5e8,0x54d)])){const _0x5a16c0=_0x481a19[_0x335bde(0xec,0x1cc,0x149,0x91)+'gClientRec'+'t']();_0xd2d5b9=_0x2de672['ExDEn'](_0x5a16c0[_0xc3fd36(0x556,0x5bf,0x5f0,0x63f)],-0x1f73+-0x1e44+0x3dc1*0x1);}else console[_0xc3fd36(0x5a0,0x50a,0x4ec,0x591)](_0x3d9416['reaIk'],_0x2b1f29);}}}_0x3d9416['lfMns'](_0x30dd58),_0x18f714[_0xc3fd36(0x5dc,0x5e4,0x500,0x671)]='';}else return _0x42b835;});function _0x3e94a9(_0x79fd99){const _0x1a1f32={};_0x1a1f32[_0x26a2dd(0x3a5,0x3f1,0x32e,0x387)]=function(_0x159552,_0x12eea3){return _0x159552!==_0x12eea3;},_0x1a1f32[_0x26a2dd(0x398,0x393,0x377,0x465)]=_0x5c0d26(0x2aa,0x2eb,0x1f4,0x2f3);function _0x5c0d26(_0x593141,_0x45f319,_0x5dd7b8,_0x5675c4){return _0x3e94fb(_0x593141-0x138,_0x593141-0x167,_0x5dd7b8-0x18d,_0x45f319);}function _0x26a2dd(_0x501d91,_0x66ca30,_0x2201a4,_0xa86bf2){return _0x3e94fb(_0x501d91-0x18c,_0x66ca30-0x2c6,_0x2201a4-0xd2,_0x501d91);}_0x1a1f32[_0x26a2dd(0x21e,0x2d1,0x357,0x34d)]=_0x5c0d26(0x257,0x1cf,0x2b1,0x30b);const _0x3b2447=_0x1a1f32;return new Promise((_0x52fa9e,_0x391e05)=>{function _0x4c57e9(_0x59d9c3,_0x36c6c6,_0x4e1fad,_0x121991){return _0x26a2dd(_0x36c6c6,_0x121991- -0x355,_0x4e1fad-0x1cd,_0x121991-0x105);}function _0x3a050f(_0x3da4b5,_0x2c09d6,_0x39511e,_0x2b53b7){return _0x5c0d26(_0x39511e- -0x125,_0x2c09d6,_0x39511e-0x1bc,_0x2b53b7-0x1b4);}if(_0x3b2447[_0x3a050f(0x1fb,0x189,0x16d,0x192)](_0x3b2447[_0x4c57e9(0x78,0x126,0x111,0x3e)],_0x3b2447[_0x3a050f(-0xe,-0x4,0x4d,-0x5a)])){const _0x1d4724=new FileReader();_0x1d4724[_0x3a050f(0x164,0x152,0xfe,0x1a8)]=()=>_0x52fa9e(_0x1d4724[_0x4c57e9(0x1a8,0x191,0xe7,0xd4)]),_0x1d4724[_0x4c57e9(0xa6,0x74,0xa8,0x5)]=_0x391e05,_0x1d4724['readAsData'+_0x3a050f(0xd0,0x171,0x198,0xaf)](_0x79fd99);}else return _0x24a293;});}_0x35315d[_0x3e94fb(0x94,-0x35,0x4,-0x6a)+'d'](_0x1e7860),_0x35315d[_0x3e94fb(-0x20,-0x35,-0xd0,0x42)+'d'](_0x18f714),_0x35315d['appendChil'+'d'](_0x332694);const _0x5a2b44=document['createElem'+_0x3a0e76(0x213,0x280,0x339,0x285)](_0x3e94fb(0xdf,0x6f,0x11,0x88));_0x5a2b44['className']=_0x3d9416[_0x3e94fb(0x198,0xfd,0x179,0x11b)];const _0x5dd65f=document['createElem'+'ent'](_0x3d9416['fhgra']);_0x5dd65f['textConten'+'t']='取消',_0x5dd65f[_0x3e94fb(0xa,-0x2,0x93,0xd9)]=_0x3d9416['siSOJ'];const _0x36270e=document[_0x3a0e76(0x380,0x22c,0x2f3,0x2ca)+_0x3a0e76(0x2b3,0x225,0x1d0,0x285)](_0x3d9416[_0x3e94fb(-0xe8,-0x22,0x33,0x63)]);_0x36270e['textConten'+'t']=_0x3a0e76(0x236,0x1ec,0x250,0x23d);function _0x3a0e76(_0x179b15,_0x281e48,_0x43b749,_0x4ec56c){return _0x1ef1d7(_0x179b15-0x1cd,_0x4ec56c-0x263,_0x43b749-0x1a2,_0x281e48);}_0x36270e[_0x3e94fb(0x8a,-0x2,0xb8,-0x3c)]=_0x3d9416[_0x3e94fb(0x30,0xe5,0x1af,0x132)];const _0x3e0677=_0x5019d5=>{function _0x1f8cc5(_0xfe62da,_0x303383,_0x2daa69,_0x223f92){return _0x3a0e76(_0xfe62da-0xe6,_0x2daa69,_0x2daa69-0x15d,_0x303383- -0x261);}function _0x57a7d6(_0x563d4f,_0x44073b,_0x2883d3,_0x4e0942){return _0x3e94fb(_0x563d4f-0x69,_0x44073b-0x4ba,_0x2883d3-0xf4,_0x4e0942);}const _0x522037={};_0x522037[_0x57a7d6(0x611,0x54b,0x588,0x624)]=_0x2de672['plaag'];const _0x53bdf6=_0x522037;if(_0x2de672['jhTlA'](_0x2de672[_0x1f8cc5(0x28,0xe6,0x11a,0x18f)],_0x1f8cc5(0x100,0x15c,0x179,0x186)))_0x32091d[_0x1f8cc5(-0xbb,-0x1d,-0x16,-0x46)][_0x1f8cc5(0x58,-0x3d,-0x110,0x93)](_0x2de672[_0x57a7d6(0x51b,0x517,0x4c7,0x451)]),_0x2de672['MsqHi'](setTimeout,()=>{_0x32091d['remove']();function _0x352bac(_0x592b35,_0x4cc4d8,_0x275de1,_0x2b73bb){return _0x57a7d6(_0x592b35-0x167,_0x2b73bb- -0x655,_0x275de1-0x1c7,_0x592b35);}_0x2de672[_0x352bac(-0x101,-0x11e,-0xc7,-0x17b)](_0x3d70b6,_0x5019d5);},0x243*0x3+0x256a+0x5*-0x8b9);else{_0x2c1517[_0x57a7d6(0x411,0x4ab,0x4b1,0x3c8)](_0x53bdf6[_0x57a7d6(0x4de,0x54b,0x469,0x46c)]);return;}};_0x5dd65f['addEventLi'+_0x3e94fb(0x107,0xcf,0x2b,0x17e)](_0x3d9416['qqCRH'],()=>_0x3e0677(null)),_0x36270e['addEventLi'+'stener'](_0x3a0e76(0x29f,0x2fd,0x23b,0x28b),()=>_0x3e0677({'text':_0x5b46bc[_0x3a0e76(0x328,0x2e8,0x2f9,0x320)][_0x3e94fb(0xf3,0x10f,0x66,0x1d1)]()||null,'images':[..._0x4d6ace]}));const _0x589fb0=_0x5244d8=>{function _0x383648(_0x20fbed,_0x50c6c6,_0x2596f5,_0x33656e){return _0x3a0e76(_0x20fbed-0x6d,_0x33656e,_0x2596f5-0x16c,_0x20fbed-0x382);}const _0x144056={'xtqFF':_0x2de672['aqskc'],'TdWGP':function(_0x2b9c5b,_0x54b869){function _0x416985(_0x15d184,_0x40fa95,_0x35149d,_0x4c7876){return _0x8424(_0x4c7876- -0x3cf,_0x40fa95);}return _0x2de672[_0x416985(0x89,0x6d,-0x2a,-0x38)](_0x2b9c5b,_0x54b869);},'TXqqq':function(_0x4ea000,_0x48653f){return _0x4ea000-_0x48653f;}};function _0x21de2d(_0x12509b,_0x450879,_0x34290e,_0x1dbbc7){return _0x3a0e76(_0x12509b-0x35,_0x34290e,_0x34290e-0x17b,_0x450879-0x15f);}if(_0x5244d8[_0x383648(0x6a5,0x6e3,0x786,0x69e)]===_0x2de672[_0x21de2d(0x4af,0x533,0x497,0x4da)]){if(_0x2de672[_0x383648(0x70d,0x7eb,0x6a9,0x7ae)](_0x383648(0x71d,0x717,0x6da,0x7e4),_0x2de672[_0x383648(0x67a,0x618,0x701,0x6ad)])){const _0x50623e=_0x1d2997[_0x383648(0x69f,0x6f7,0x66e,0x6ae)+_0x21de2d(0x493,0x409,0x426,0x3d4)](_0x144056[_0x21de2d(0x387,0x439,0x3e4,0x507)]);if(_0x50623e){const _0x1e42ed=_0x50623e[_0x383648(0x5d7,0x5f2,0x594,0x6a8)+_0x383648(0x613,0x5b3,0x610,0x6f4)+'t']();_0x359341=_0x144056['TdWGP'](_0x1e42ed[_0x21de2d(0x3a6,0x45a,0x495,0x4b4)],-0x1b8c+-0x185a+-0x10*-0x33f);}const _0x10782d=_0xb556d4[_0x21de2d(0x528,0x47c,0x49a,0x3f3)+'tor'](_0x383648(0x608,0x63e,0x604,0x68a));if(_0x10782d){const _0xc16186=_0x10782d[_0x21de2d(0x460,0x3b4,0x34f,0x471)+_0x383648(0x613,0x679,0x68b,0x565)+'t']();_0x1de076=_0x144056[_0x21de2d(0x423,0x462,0x4f3,0x4c2)](_0xc16186[_0x21de2d(0x370,0x3c2,0x358,0x452)],-0x134b+-0x836+0x1b8b);}}else _0x3e0677(null),document['removeEven'+_0x21de2d(0x461,0x3b5,0x2f1,0x3ac)](_0x383648(0x75c,0x776,0x674,0x767),_0x589fb0);}else _0x5244d8[_0x21de2d(0x564,0x482,0x397,0x506)]===_0x2de672[_0x21de2d(0x42e,0x459,0x506,0x43b)]&&_0x5244d8[_0x21de2d(0x4ff,0x433,0x4f1,0x3f1)]&&(_0x2de672['UpXTc'](_0x3e0677,{'text':_0x5b46bc['value'][_0x383648(0x6e6,0x623,0x6a1,0x7b4)]()||null,'images':[..._0x4d6ace]}),document[_0x383648(0x5ea,0x5fc,0x5d7,0x647)+_0x21de2d(0x3dc,0x3b5,0x383,0x44a)](_0x2de672[_0x383648(0x6cb,0x6a9,0x74c,0x76e)],_0x589fb0));};document[_0x3e94fb(0x6,0xd2,0xe3,0x19d)+_0x3a0e76(0x26d,0x377,0x314,0x324)](_0x3d9416[_0x3e94fb(0xc5,0x188,0x24e,0x187)],_0x589fb0),_0x5a2b44['appendChil'+'d'](_0x5dd65f),_0x5a2b44['appendChil'+'d'](_0x36270e),_0x121bad[_0x3e94fb(-0x4d,-0x35,0x6f,-0xd)+'d'](_0x29a0d6),_0x121bad[_0x3a0e76(0x2b0,0x2c7,0x1be,0x220)+'d'](_0x1c8952),_0x121bad[_0x3a0e76(0x2fa,0x29b,0x237,0x220)+'d'](_0x5b46bc),_0x121bad['appendChil'+'d'](_0x35315d),_0x121bad[_0x3e94fb(-0xe3,-0x35,0x0,-0x7f)+'d'](_0x5a2b44),_0x32091d['appendChil'+'d'](_0x121bad),document[_0x3e94fb(0x93,-0x4,0x63,0xa8)][_0x3a0e76(0x15d,0x2d2,0x1eb,0x220)+'d'](_0x32091d),setTimeout(()=>_0x5b46bc[_0x3e94fb(-0x2e,0x3e,0x4b,-0x31)](),0x1232+-0x466*-0x2+-0x1a9a);});}function replacePlaceholder(_0x26f50c,_0x20772c,_0x3b0ebd,_0x5904fb){const _0x492c32={'AzjJg':function(_0x26504f,_0x543b70){return _0x26504f(_0x543b70);},'wVMcA':function(_0x3cf93c,_0x296482,_0x35f1a8){return _0x3cf93c(_0x296482,_0x35f1a8);},'BAxHf':function(_0x83f988,_0x4772ef){return _0x83f988===_0x4772ef;},'rCFPH':_0x1b43b1(0x4c6,0x585,0x53d,0x57b),'VzEKE':function(_0x59c440,_0x12620a){return _0x59c440===_0x12620a;},'QbrWF':_0x1b43b1(0x5a0,0x60a,0x60f,0x569),'EJZgn':'RuHfc','Kugtd':'RpFhF','XOSiV':function(_0x546a77,_0x269e86){return _0x546a77===_0x269e86;},'UMwsw':_0x40aa2b(0x4a5,0x55a,0x4b1,0x50e),'XTCsV':function(_0x5a0581,_0x127fb8,_0x59edbc,_0x4cc5ee,_0x336d92){return _0x5a0581(_0x127fb8,_0x59edbc,_0x4cc5ee,_0x336d92);}};if(_0x492c32[_0x1b43b1(0x61c,0x6b4,0x702,0x646)](typeof _0x26f50c,_0x492c32[_0x1b43b1(0x68e,0x61c,0x5b7,0x675)]))return _0x3b0ebd&&_0x26f50c['includes'](_0x20772c)&&(_0x5904fb&&_0x5904fb[_0x40aa2b(0x51d,0x50e,0x5b2,0x42a)](_0x20772c)),_0x26f50c[_0x40aa2b(0x6f4,0x65d,0x644,0x577)](_0x20772c,_0x3b0ebd);if(Array[_0x1b43b1(0x567,0x5cf,0x5cc,0x61c)](_0x26f50c))return _0x26f50c[_0x1b43b1(0x623,0x4e9,0x652,0x5d1)](_0xb6aaeb=>replacePlaceholder(_0xb6aaeb,_0x20772c,_0x3b0ebd,_0x5904fb));function _0x40aa2b(_0x3f595a,_0x2b24a7,_0x317564,_0x56031c){return _0x8424(_0x2b24a7-0x31e,_0x317564);}if(_0x26f50c&&_0x492c32[_0x40aa2b(0x720,0x6b6,0x67e,0x603)](typeof _0x26f50c,_0x492c32[_0x40aa2b(0x65e,0x5d1,0x57b,0x60c)])){if(_0x492c32[_0x40aa2b(0x5de,0x5ff,0x627,0x5d7)](_0x492c32['EJZgn'],_0x492c32[_0x1b43b1(0x6db,0x692,0x6be,0x694)])){if(_0x91f16c){const _0x62170f=_0x1b0495['apply'](_0x5aec63,arguments);return _0x299e69=null,_0x62170f;}}else{const _0x217078={};for(const _0x37eddb in _0x26f50c){if(_0x492c32['XOSiV'](_0x40aa2b(0x566,0x641,0x6ab,0x663),_0x492c32[_0x40aa2b(0x535,0x5cf,0x5d5,0x515)])){const _0x9de55f={'MoCZZ':function(_0x2b07bf,_0x3a320c){function _0x5bc7d4(_0x51a3b5,_0xc5d583,_0x3994ea,_0x5a391a){return _0x1b43b1(_0x51a3b5-0x192,_0x51a3b5,_0x3994ea-0x174,_0x5a391a- -0x6ac);}return _0x492c32[_0x5bc7d4(-0xa0,-0x18c,-0x1f5,-0x10d)](_0x2b07bf,_0x3a320c);}};_0x186948[_0x1b43b1(0x54f,0x4aa,0x601,0x575)][_0x1b43b1(0x589,0x601,0x635,0x555)]('closing'),_0x492c32[_0x40aa2b(0x691,0x6b8,0x795,0x5ce)](_0x134e1b,()=>{function _0x4b100f(_0x50f553,_0x293cd5,_0x2b18c8,_0x2a1890){return _0x40aa2b(_0x50f553-0x72,_0x293cd5- -0x200,_0x2a1890,_0x2a1890-0x12);}function _0x12ff7b(_0x271d5b,_0x2b8dc4,_0x43c7ee,_0x295868){return _0x1b43b1(_0x271d5b-0x6b,_0x295868,_0x43c7ee-0xc0,_0x43c7ee- -0x4be);}_0x43ae8d[_0x4b100f(0x44d,0x380,0x360,0x3b2)](),_0x9de55f[_0x12ff7b(0x1ce,0x17e,0x13e,0x1b1)](_0x478476,_0x13c901);},0x16d5+0xb*0xec+-0x2063);}else _0x217078[_0x37eddb]=_0x492c32[_0x40aa2b(0x656,0x58f,0x4b9,0x570)](replacePlaceholder,_0x26f50c[_0x37eddb],_0x20772c,_0x3b0ebd,_0x5904fb);}return _0x217078;}}function _0x1b43b1(_0x37abba,_0x2ce40d,_0x8777d4,_0x28f303){return _0x8424(_0x28f303-0x365,_0x2ce40d);}return _0x26f50c;}function attachImagesToMessage(_0x3501d5,_0x4a4e59,_0x1a1319,_0x3eb0d1=_0x179086(0xc8,0xee,0x12,0x17)){const _0xab893f={};_0xab893f[_0x3bbb01(0x527,0x511,0x58f,0x4da)]=function(_0x3b23a7,_0x2cdfe1){return _0x3b23a7===_0x2cdfe1;},_0xab893f['uFKqN']=_0x3bbb01(0x797,0x651,0x6d9,0x64f),_0xab893f[_0x3bbb01(0x572,0x48c,0x545,0x588)]=_0x3bbb01(0x483,0x4f7,0x55e,0x514),_0xab893f['nbFhC']=_0x3e129d(0x464,0x523,0x5a3,0x56f),_0xab893f[_0x3e129d(0x408,0x47a,0x494,0x4df)]=_0x3e129d(0x4a9,0x49c,0x3d7,0x45c),_0xab893f[_0x3bbb01(0x6c0,0x626,0x692,0x64f)]='image_url',_0xab893f[_0x3e129d(0x338,0x41d,0x3d8,0x410)]=_0x3e129d(0x47a,0x40c,0x399,0x456);function _0x3bbb01(_0x167fd4,_0x55d822,_0x22fe23,_0x385527){return _0x179086(_0x167fd4-0x2,_0x167fd4,_0x22fe23-0x55d,_0x385527-0xa9);}_0xab893f['aapBk']=function(_0x25c432,_0x5d33c6){return _0x25c432<_0x5d33c6;},_0xab893f[_0x3e129d(0x4dc,0x561,0x515,0x5db)]=function(_0x4fde4e,_0x231839){return _0x4fde4e>=_0x231839;},_0xab893f[_0x3e129d(0x358,0x424,0x3e0,0x370)]=function(_0x2cd6f5,_0x19d037){return _0x2cd6f5===_0x19d037;},_0xab893f[_0x3bbb01(0x727,0x6da,0x6a4,0x72c)]=function(_0x27ac81,_0x1b1e17){return _0x27ac81===_0x1b1e17;},_0xab893f[_0x3bbb01(0x5f9,0x5f0,0x6ba,0x628)]=_0x3bbb01(0x6ab,0x639,0x693,0x616),_0xab893f['FPtFN']=_0x3bbb01(0x5db,0x472,0x541,0x50a);function _0x3e129d(_0x3cd35e,_0x44865e,_0x1c50e4,_0x510cea){return _0x179086(_0x3cd35e-0xda,_0x3cd35e,_0x44865e-0x3e1,_0x510cea-0x48);}_0xab893f[_0x3e129d(0x48f,0x520,0x4dd,0x51a)]=function(_0x163092,_0x25fa2b){return _0x163092>_0x25fa2b;};const _0x319d9a=_0xab893f;if(!_0x1a1319||_0x319d9a[_0x3bbb01(0x505,0x643,0x58f,0x664)](_0x1a1319[_0x3e129d(0x44b,0x431,0x4c2,0x4cb)],-0x1*0x16bd+0x1d97+-0x6da)||_0x319d9a[_0x3bbb01(0x59b,0x5f1,0x549,0x4c8)](_0x4a4e59,-0x1223+0x4a7+0x2*0x6be)||_0x319d9a['vQTAB'](_0x4a4e59,_0x3501d5[_0x3bbb01(0x669,0x58e,0x5ad,0x519)]))return _0x3501d5;const _0x437e4c=[..._0x3501d5],_0x22ebde=_0x437e4c[_0x4a4e59],_0x188cf9=[];if(_0x319d9a[_0x3bbb01(0x542,0x4e7,0x5a0,0x5f7)](typeof _0x22ebde[_0x3e129d(0x4ca,0x4a6,0x4cc,0x40b)],_0x3e129d(0x3a9,0x3f4,0x468,0x3d2))){const _0x5b0ed8={};_0x5b0ed8[_0x3bbb01(0x513,0x601,0x5be,0x59f)]='text',_0x5b0ed8[_0x3e129d(0x60a,0x523,0x464,0x50e)]=_0x22ebde['content'],_0x188cf9[_0x3e129d(0x48e,0x3d0,0x481,0x46e)](_0x5b0ed8);}else{if(Array[_0x3e129d(0x578,0x495,0x46b,0x3fb)](_0x22ebde[_0x3bbb01(0x55c,0x63e,0x622,0x61f)])){if(_0x319d9a[_0x3e129d(0x4d6,0x528,0x5e1,0x495)](_0x319d9a[_0x3e129d(0x460,0x53e,0x4ce,0x603)],_0x319d9a[_0x3e129d(0x3cf,0x4b1,0x440,0x46f)])){const _0x4245bf={};for(const _0x23d76d in _0x2706c1){_0x4245bf[_0x23d76d]=_0x3abb8a(_0x19ebf8[_0x23d76d],_0x34e8c6,_0x576cd3,_0x316c6e);}return _0x4245bf;}else _0x188cf9[_0x3bbb01(0x577,0x576,0x54c,0x574)](..._0x22ebde[_0x3e129d(0x4f7,0x4a6,0x447,0x478)]);}}if(_0x319d9a[_0x3bbb01(0x628,0x71e,0x69c,0x643)](_0x1a1319[_0x3bbb01(0x5e8,0x629,0x5ad,0x4fa)],0x1a93*0x1+-0x1312*-0x1+0x267*-0x13)){const _0xad8ccc={};_0xad8ccc[_0x3e129d(0x48e,0x442,0x468,0x454)]=_0x319d9a[_0x3bbb01(0x5d4,0x6bc,0x5e9,0x57d)],_0xad8ccc[_0x3bbb01(0x614,0x5c2,0x69f,0x64e)]=_0x3e129d(0x4c1,0x4de,0x49f,0x58e)+_0x1a1319[_0x3e129d(0x475,0x431,0x40b,0x356)]+'张'+_0x3eb0d1+']',_0x188cf9['push'](_0xad8ccc);}_0x1a1319[_0x3e129d(0x480,0x444,0x45e,0x3b5)]((_0xf2f2a7,_0x37a76c)=>{function _0x1d3623(_0x33e3fa,_0x319751,_0x3da820,_0x5b2a77){return _0x3e129d(_0x319751,_0x33e3fa-0x34,_0x3da820-0xc0,_0x5b2a77-0x58);}function _0x1f3995(_0x499c8a,_0x1a7304,_0xc868e2,_0x49930f){return _0x3e129d(_0x1a7304,_0x499c8a- -0x2ff,_0xc868e2-0xa8,_0x49930f-0x71);}if(_0x319d9a[_0x1d3623(0x447,0x424,0x41b,0x4b1)](_0x319d9a['uFKqN'],'MXjFI')){const _0x1b1bfa=_0x319d9a['BuvNp'](typeof _0xf2f2a7,_0x1d3623(0x428,0x49a,0x42b,0x50a))?_0xf2f2a7:_0xf2f2a7[_0x1d3623(0x588,0x5c2,0x659,0x5a5)],_0x8a604f=typeof _0xf2f2a7===_0x319d9a[_0x1f3995(0xca,0x19f,0x29,0xe7)]&&_0xf2f2a7[_0x1f3995(0x1c1,0x285,0x12b,0x185)]?_0xf2f2a7['name']:''+_0x3eb0d1+(_0x37a76c+(0x562+-0xcae+0x74d)),_0xab5f1d={};_0xab5f1d[_0x1f3995(0x143,0x158,0x1d4,0x114)]=_0x319d9a['nbFhC'],_0xab5f1d[_0x1d3623(0x557,0x558,0x49f,0x54d)]='['+_0x8a604f+']',_0x188cf9[_0x1f3995(0xd1,0xb0,0x53,0x1b9)](_0xab5f1d);let _0x357385=_0x1b1bfa;!_0x1b1bfa[_0x1d3623(0x48a,0x53e,0x56d,0x402)](_0x319d9a[_0x1d3623(0x4ae,0x576,0x54d,0x40d)])&&(_0x357385=_0x1f3995(0xd6,0x129,0x16d,0x86)+_0x1f3995(0x1d0,0x221,0x17e,0x24b)+'4,'+_0x1b1bfa);const _0x5ae005={};_0x5ae005[_0x1f3995(0x143,0x170,0x1fd,0xf9)]=_0x319d9a[_0x1d3623(0x54a,0x5b6,0x4b3,0x593)],_0x5ae005[_0x1d3623(0x472,0x52e,0x4bb,0x4e2)]={},_0x5ae005[_0x1d3623(0x472,0x52e,0x4bb,0x4e2)][_0x1d3623(0x571,0x4b4,0x4a9,0x624)]=_0x357385,_0x5ae005[_0x1d3623(0x472,0x52e,0x4bb,0x4e2)][_0x1f3995(0x258,0x32a,0x16e,0x196)]=_0x319d9a['wSpit'],_0x188cf9['push'](_0x5ae005);}else _0x2ed813[_0x1d3623(0x404,0x4d4,0x3f1,0x426)](..._0x7de789['content']);});const _0x27b0e1={..._0x22ebde};return _0x27b0e1[_0x3e129d(0x586,0x4a6,0x452,0x4e8)]=_0x188cf9,_0x437e4c[_0x4a4e59]=_0x27b0e1,_0x437e4c;}function findMessageIndexWithPlaceholder(_0x1c3a2f,_0x4404a6){function _0x46e2ae(_0x2c8d4b,_0x5e0a8f,_0x4af3ee,_0x58d92b){return _0x179086(_0x2c8d4b-0xd1,_0x2c8d4b,_0x5e0a8f- -0xf8,_0x58d92b-0x1ab);}const _0x36373d={};_0x36373d[_0x5e0921(0x2ec,0x2e5,0x320,0x33f)]=function(_0x191935,_0x42afe3){return _0x191935===_0x42afe3;},_0x36373d[_0x46e2ae(-0xd7,-0x68,0x1f,-0xf1)]=_0x46e2ae(-0x128,-0xe5,-0xeb,-0x96),_0x36373d[_0x46e2ae(0x21,0x82,0x52,0x5a)]=function(_0x3bedf9,_0x3d456e){return _0x3bedf9===_0x3d456e;},_0x36373d['ifSea']=_0x46e2ae(-0x5b,-0x2a,-0x8c,-0xd9);function _0x5e0921(_0x314dca,_0x518313,_0x10da83,_0x17b769){return _0x179086(_0x314dca-0xe2,_0x518313,_0x10da83-0x24d,_0x17b769-0xb9);}_0x36373d[_0x5e0921(0x1d4,0x2cd,0x2ab,0x25a)]=_0x5e0921(0x371,0x362,0x38f,0x359);const _0x5e0b28=_0x36373d;for(let _0x16c060=0x1ae2+-0xbcd+-0xf15;_0x16c060<_0x1c3a2f[_0x5e0921(0x235,0x311,0x29d,0x242)];_0x16c060++){const _0x7b2225=_0x1c3a2f[_0x16c060];if(_0x5e0b28[_0x5e0921(0x355,0x374,0x320,0x297)](typeof _0x7b2225[_0x46e2ae(0x39,-0x33,0x3f,-0x50)],_0x5e0b28['YLhpB'])&&_0x7b2225[_0x46e2ae(-0x20,-0x33,0x5e,-0x84)][_0x46e2ae(-0x11,-0x3e,-0xd4,-0xcf)](_0x4404a6))return _0x16c060;else{if(Array[_0x5e0921(0x22c,0x3de,0x301,0x3bd)](_0x7b2225[_0x5e0921(0x3ab,0x2a7,0x312,0x34c)]))for(const _0x4502ad of _0x7b2225['content']){if(_0x5e0b28[_0x5e0921(0x3e4,0x340,0x3c7,0x3ec)](_0x5e0b28['ifSea'],'SWqOr')){if(_0x5e0b28['wsIDE'](_0x4502ad['type'],_0x5e0b28[_0x46e2ae(-0xa9,-0x9a,-0x34,-0xf3)])&&_0x4502ad[_0x5e0921(0x3c2,0x3f2,0x38f,0x401)][_0x46e2ae(-0xf8,-0x3e,0xa,-0x90)](_0x4404a6))return _0x16c060;}else{const _0x1566c3=_0x17eb97[-0x1eef+-0x13*-0x53+-0x18c7*-0x1];_0x2c7af9[_0x1566c3]=_0x37a4c5[_0x1566c3]||'';}}}}return-(0x1ff1+0x452+-0x2442);}function generateRequestId(){const _0x5b41f2={'UYXem':function(_0x5e96ff,_0x1ce037){return _0x5e96ff(_0x1ce037);},'giQUe':_0x3fa3ce(0x645,0x5a3,0x601,0x652)+'时','boGsH':function(_0x18e4c4,_0x2aa49e){return _0x18e4c4!==_0x2aa49e;},'mrwRj':function(_0x3c8b29){return _0x3c8b29();},'MNjVD':function(_0x56b20f,_0x549102,_0xc04ee6){return _0x56b20f(_0x549102,_0xc04ee6);},'IgWal':function(_0x4db0b8,_0x5f134c){return _0x4db0b8===_0x5f134c;},'zYYnq':_0x428eb6(0x68,0x15,0x7c,-0x4d),'lSAyC':_0x3fa3ce(0x6f7,0x6a3,0x6b0,0x5f5)};function _0x3fa3ce(_0x3b5e32,_0x1453ad,_0x3287f2,_0x38e2aa){return _0x179086(_0x3b5e32-0xe4,_0x3b5e32,_0x1453ad-0x5cd,_0x38e2aa-0xa);}function _0x428eb6(_0x5bbe03,_0x13b48f,_0x45ad2e,_0x333564){return _0x179086(_0x5bbe03-0x15c,_0x45ad2e,_0x333564- -0x129,_0x333564-0x152);}if(crypto&&crypto[_0x3fa3ce(0x649,0x6ea,0x792,0x6c8)]){if(_0x5b41f2[_0x428eb6(-0x26,-0x13,0x17,-0xba)](_0x5b41f2['zYYnq'],_0x5b41f2[_0x428eb6(-0x56,-0x57,-0x67,-0x5)])){const _0x3f28d0={'tYMnu':function(_0x42d598,_0x224328){function _0x4005bf(_0x43151f,_0x4aecfe,_0x1d719f,_0x5297b8){return _0x428eb6(_0x43151f-0xd9,_0x4aecfe-0xaf,_0x1d719f,_0x5297b8-0x299);}return _0x5b41f2[_0x4005bf(0x2ae,0x36e,0x3ce,0x2fb)](_0x42d598,_0x224328);}},_0x5e6f55=_0x5b41f2[_0x3fa3ce(0x6cc,0x713,0x68a,0x7c2)](_0x5d3ad4);_0x5ebd10[_0x3fa3ce(0x6f7,0x72b,0x731,0x6af)]('[character'+'Gen]\x20Reque'+_0x428eb6(-0xec,-0xe9,0xe,-0xb8)+_0x3fa3ce(0x590,0x65f,0x597,0x64e)+_0x428eb6(-0xdb,-0xb1,-0x1a,-0xef)+_0x5e6f55+')');const _0x25dfde=_0x68ac70=>{function _0x10f3c8(_0x52dfec,_0x5c48c2,_0x2af747,_0x5b1be5){return _0x3fa3ce(_0x2af747,_0x5b1be5- -0x70b,_0x2af747-0x162,_0x5b1be5-0x81);}if(_0x3f28d0[_0x57d549(0x240,0x398,0x26e,0x2cf)](_0x68ac70['id'],_0x5e6f55))return;_0x70fede[_0x10f3c8(-0x77,-0x107,0x54,-0x95)+_0x57d549(0x2c2,0x36c,0x36c,0x35a)](_0x3327e0[_0x10f3c8(-0xd5,-0x159,-0x10c,-0x86)+_0x57d549(0x2e7,0x3af,0x31b,0x2f8)+_0x10f3c8(0x135,0x115,0x14e,0x66)+_0x57d549(0x257,0x35d,0x33f,0x301)],_0x25dfde);function _0x57d549(_0x137079,_0x14d94b,_0x5099ce,_0x5a1630){return _0x3fa3ce(_0x14d94b,_0x5a1630- -0x3e0,_0x5099ce-0x9b,_0x5a1630-0x1a2);}_0x234755(_0x68ac70[_0x57d549(0x1d5,0x28d,0x16a,0x1f7)]);};_0x294449['on'](_0x502e83[_0x3fa3ce(0x5d9,0x685,0x675,0x76f)+_0x3fa3ce(0x79c,0x6d8,0x6fb,0x719)+_0x3fa3ce(0x811,0x771,0x6c4,0x6ba)+_0x428eb6(-0xd7,-0x48,-0x10,-0x15)],_0x25dfde);const _0x402287={};_0x402287['id']=_0x5e6f55,_0x11c397[_0x3fa3ce(0x795,0x6ce,0x755,0x78c)](_0x4404f4[_0x3fa3ce(0x6a4,0x685,0x737,0x621)+_0x3fa3ce(0x72e,0x6d8,0x7be,0x64f)+_0x428eb6(-0xd0,-0x1af,-0xd7,-0x14d)+_0x428eb6(0x44,0x1f,-0x4d,-0x9a)],_0x402287),_0x5b41f2['MNjVD'](_0x596bf9,()=>{function _0xa8a8b2(_0x5406bb,_0x41ba6c,_0x2b3a03,_0x476ffa){return _0x3fa3ce(_0x5406bb,_0x41ba6c- -0x226,_0x2b3a03-0x181,_0x476ffa-0x103);}_0x3f2862['removeList'+_0x4274b5(0x47c,0x539,0x52e,0x56d)](_0x921fb6[_0xa8a8b2(0x427,0x45f,0x508,0x4bd)+_0xa8a8b2(0x3f7,0x4b2,0x526,0x4d9)+_0x4274b5(0x481,0x58c,0x565,0x4e1)+_0x4274b5(0x448,0x569,0x4d5,0x472)],_0x25dfde);function _0x4274b5(_0x9f25e7,_0x5cf4d2,_0x49ccc9,_0x436b67){return _0x428eb6(_0x9f25e7-0xae,_0x5cf4d2-0x157,_0x9f25e7,_0x49ccc9-0x4ea);}_0x5b41f2['UYXem'](_0x3bfceb,new _0x3fe510(_0x5b41f2['giQUe']));},0x16d*-0x1d+-0x425e+0xa7*0xe1);}else return crypto[_0x428eb6(-0x56,0xa7,0xca,-0xc)]();}return Date[_0x3fa3ce(0x7b0,0x75d,0x837,0x77e)]()[_0x428eb6(-0x3c,0x4c,0x2e,-0x7d)](-0x14d6+-0x1*0x125f+0x2759)+Math[_0x428eb6(0x11d,0x7c,0xc5,0x47)]()[_0x428eb6(-0x150,0x6e,-0x14d,-0x7d)](0x1*-0x57a+0x23be+-0x1e20)['substring'](0x1*0x1b97+0xec4+0x2a59*-0x1);}export function LLM_CHAR_DESIGN_GET_PROMPT(){function _0x1bab46(_0x5824e7,_0x3b46ea,_0x130bda,_0x54e5a0){return _0x179086(_0x5824e7-0x19,_0x5824e7,_0x3b46ea-0x40a,_0x54e5a0-0x14c);}function _0x14f2f7(_0xed89fe,_0x791bde,_0x25707d,_0x1e0183){return _0x179086(_0xed89fe-0x16a,_0x791bde,_0x1e0183-0x22e,_0x1e0183-0x16);}const _0x57d30b={'CijwL':_0x1bab46(0x388,0x3e0,0x46a,0x4b1)+'时','yVhWT':function(_0x11e9f2,_0x5b1b19){return _0x11e9f2(_0x5b1b19);},'ZMeOY':_0x14f2f7(0x386,0x3a4,0x245,0x2bf),'WXKEf':function(_0x346c71){return _0x346c71();},'MPhfZ':function(_0x118b88,_0x3f97d4,_0x36d584){return _0x118b88(_0x3f97d4,_0x36d584);}};return new Promise((_0xed72ac,_0x44e6c7)=>{function _0x29baad(_0x53a2af,_0x45426c,_0x114ec7,_0x2abd76){return _0x14f2f7(_0x53a2af-0x177,_0x114ec7,_0x114ec7-0x164,_0x53a2af-0x3ac);}function _0x41cd53(_0xcc9812,_0x27f9a1,_0x2889e8,_0x3c7f11){return _0x1bab46(_0x27f9a1,_0xcc9812- -0x571,_0x2889e8-0xc1,_0x3c7f11-0x5c);}const _0x34de97={'fAzRn':function(_0x5ee87a,_0x3e1863){return _0x57d30b['yVhWT'](_0x5ee87a,_0x3e1863);},'NjYSH':_0x57d30b[_0x29baad(0x670,0x590,0x625,0x5f8)]},_0x1e1479=_0x57d30b[_0x29baad(0x6be,0x606,0x5ef,0x6b1)](generateRequestId);console[_0x41cd53(-0x9,0x43,0xa8,-0x24)](_0x29baad(0x6a1,0x5da,0x629,0x6d5)+_0x41cd53(-0x142,-0xce,-0xbe,-0x1c3)+'sting\x20char'+_0x29baad(0x66c,0x67c,0x60d,0x5ef)+_0x29baad(0x614,0x5f0,0x59c,0x6bc)+_0x1e1479+')');const _0xd4170a=_0x111f10=>{function _0x1336a8(_0x197a4c,_0x44ec73,_0x261a2e,_0x39176a){return _0x29baad(_0x39176a- -0x140,_0x44ec73-0x1cb,_0x197a4c,_0x39176a-0x13b);}function _0x4b8a14(_0x407300,_0x5da353,_0x50fe79,_0x128450){return _0x41cd53(_0x407300-0x5fa,_0x5da353,_0x50fe79-0x15d,_0x128450-0x6a);}if(_0x34de97[_0x4b8a14(0x53d,0x50b,0x476,0x526)]!==_0x34de97[_0x4b8a14(0x53d,0x502,0x503,0x5f5)]){const _0x29ee3c={};_0x29ee3c['result']=_0x5e6688['result'],_0x29ee3c['testMode']=![],_0x34de97[_0x4b8a14(0x4dc,0x4d9,0x492,0x4f9)](_0x1e91a2,_0x29ee3c);}else{if(_0x111f10['id']!==_0x1e1479)return;eventSource[_0x1336a8(0x613,0x4cf,0x4c5,0x543)+_0x4b8a14(0x600,0x63a,0x5f7,0x62b)](eventNames[_0x1336a8(0x62a,0x633,0x579,0x552)+_0x4b8a14(0x59e,0x517,0x506,0x563)+_0x4b8a14(0x637,0x6fd,0x614,0x6fe)+_0x4b8a14(0x5a7,0x5fc,0x5bf,0x561)],_0xd4170a),_0x34de97[_0x4b8a14(0x4dc,0x432,0x508,0x443)](_0xed72ac,_0x111f10[_0x1336a8(0x515,0x4b6,0x3bb,0x4a4)]);}};eventSource['on'](eventNames[_0x41cd53(-0xaf,-0xeb,0x2d,-0x133)+'ESIGN_GET_'+_0x41cd53(0x3d,0xd8,-0x5c,0xee)+_0x41cd53(-0x53,0x41,0x26,-0x54)],_0xd4170a);const _0x2883c9={};_0x2883c9['id']=_0x1e1479,eventSource[_0x29baad(0x6db,0x778,0x642,0x780)](eventNames[_0x41cd53(-0xaf,-0x130,-0x176,-0x68)+_0x29baad(0x6e5,0x761,0x6c5,0x790)+'PROMPT_REQ'+_0x41cd53(-0xd8,0x13,-0x98,-0x173)],_0x2883c9),_0x57d30b[_0x29baad(0x612,0x670,0x568,0x61c)](setTimeout,()=>{eventSource[_0x3b4bd7(0x66e,0x62e,0x680,0x614)+'ener'](eventNames[_0x275649(0x58d,0x559,0x5ee,0x4ba)+_0x3b4bd7(0x704,0x71e,0x6fc,0x676)+'PROMPT_RES'+_0x275649(0x64a,0x5b5,0x4cd,0x60d)],_0xd4170a);function _0x275649(_0x1b87dd,_0x950389,_0x12e6b1,_0x1d7243){return _0x41cd53(_0x950389-0x608,_0x1d7243,_0x12e6b1-0x1cf,_0x1d7243-0x1b2);}function _0x3b4bd7(_0x2f05c1,_0x305969,_0x5c75ae,_0x43a605){return _0x29baad(_0x43a605- -0x6f,_0x305969-0xc6,_0x2f05c1,_0x43a605-0x1ed);}_0x44e6c7(new Error(_0x57d30b['CijwL']));},0x3ceb+-0x349a+-0x11*-0x1cf);});}export function LLM_CHAR_DESIGN(_0x21c958,_0x220bbc={}){function _0x236294(_0x4b8728,_0x545750,_0x1f0bd0,_0x234ae8){return _0x179086(_0x4b8728-0x1ba,_0x1f0bd0,_0x545750-0x4,_0x234ae8-0xc0);}function _0x4b5331(_0x5ebaee,_0x68b70,_0x7fdef9,_0x4560b5){return _0x179086(_0x5ebaee-0x60,_0x68b70,_0x4560b5- -0x175,_0x4560b5-0x1d2);}const _0x54493b={'RHEBM':function(_0x100076,_0x5ef5e7){return _0x100076!==_0x5ef5e7;},'onrfd':function(_0x49d1dd,_0x5eb7cc){return _0x49d1dd===_0x5eb7cc;},'xaFVJ':_0x236294(0x55,0x56,0xa,0x7a),'bSEna':_0x236294(0xdd,0x196,0x121,0x1e9),'peCKm':function(_0x178d4f,_0x39a716){return _0x178d4f(_0x39a716);},'kcqLB':function(_0x1f619c,_0x115a26){return _0x1f619c(_0x115a26);},'QRfMY':_0x236294(0x8c,0x46,0x88,0x67),'bJQTY':_0x4b5331(-0x8c,-0xfc,-0x9f,-0x142),'IEzsD':_0x236294(-0xb6,-0x1,0x3c,0x5e)+_0x236294(0x258,0x182,0x269,0x1c8),'TClfh':function(_0x5cec40,_0x183b95){return _0x5cec40(_0x183b95);},'MVRoD':function(_0x2976c4,_0x1f0d64,_0x23da5f,_0x30dd98,_0x516dc1){return _0x2976c4(_0x1f0d64,_0x23da5f,_0x30dd98,_0x516dc1);},'VnTGh':'参考图片','vlvkD':_0x4b5331(-0x7,-0x77,0x3,-0xae)+'Gen]\x20已将','URsrV':_0x4b5331(-0x105,-0xb3,-0x1ba,-0x194),'WULte':function(_0x467186){return _0x467186();},'mDDRv':function(_0x47c98e,_0x19968d,_0x1232ac){return _0x47c98e(_0x19968d,_0x1232ac);}};return new Promise((_0xba6f9,_0x24c7e0)=>{const _0x3f51d0={'LOUXA':function(_0x3d683,_0x15e950){function _0x401929(_0x44e1c0,_0x19ebc1,_0x43cd7e,_0x267427){return _0x8424(_0x267427-0x33e,_0x19ebc1);}return _0x54493b[_0x401929(0x623,0x5ac,0x6c5,0x633)](_0x3d683,_0x15e950);},'pqqKn':'keydown','XhIxh':function(_0x3cc810,_0x51e6f1,_0x278f26,_0x16c68e,_0x33b83d){function _0x4ce3a6(_0x3cd9da,_0x2f8bbf,_0x4fba9e,_0x1f2c6f){return _0x8424(_0x2f8bbf-0x3e5,_0x1f2c6f);}return _0x54493b[_0x4ce3a6(0x743,0x6e4,0x719,0x665)](_0x3cc810,_0x51e6f1,_0x278f26,_0x16c68e,_0x33b83d);},'mMifV':_0x54493b[_0x27bed0(0x13e,0x63,0x5b,0x75)],'DdVdf':_0x54493b['vlvkD'],'WWTym':_0x54493b['URsrV']},_0x5972a6=_0x54493b[_0x27bed0(0x7a,0xe5,0x149,0x1f)](generateRequestId),_0x155ae5=_0x220bbc[_0x14d070(0x78b,0x74f,0x664,0x781)]||-0x96a*0xa+0xb*-0x621+-0x1*-0x18bef;function _0x27bed0(_0x5f0746,_0x362e24,_0x9f9b37,_0x530e6d){return _0x236294(_0x5f0746-0x1c5,_0x5f0746-0x8f,_0x9f9b37,_0x530e6d-0x1ab);}let _0x277ed0=null;function _0x14d070(_0x28c2ec,_0x5018d2,_0x184e91,_0x5d0f79){return _0x236294(_0x28c2ec-0x177,_0x5018d2-0x5cc,_0x28c2ec,_0x5d0f79-0x89);}console[_0x27bed0(0x1f1,0x22d,0x2d0,0x151)]('[character'+'Gen]\x20Execu'+_0x27bed0(0x22b,0x15c,0x1f3,0x1ae)+_0x14d070(0x5ee,0x657,0x652,0x5cb)+_0x14d070(0x70b,0x66a,0x5a7,0x700)+_0x14d070(0x741,0x72a,0x783,0x6d8)+_0x5972a6+')');const _0x250747=()=>{eventSource['removeList'+_0x262ab6(0x758,0x74b,0x674,0x77d)](eventNames[_0x262ab6(0x6a3,0x701,0x65e,0x78c)+_0x262ab6(0x5f6,0x5b9,0x5c8,0x61b)+_0x262ab6(0x73b,0x793,0x6cf,0x78c)],_0x5627ec);function _0x262ab6(_0x2cbd34,_0x2f4523,_0xa8a9a7,_0x5d1266){return _0x14d070(_0x5d1266,_0x2cbd34-0x1b,_0xa8a9a7-0x11a,_0x5d1266-0x34);}function _0x3ffa59(_0x18ea8b,_0x4b89ea,_0x337c09,_0x41e164){return _0x27bed0(_0x18ea8b-0x5b,_0x4b89ea-0x13,_0x337c09,_0x41e164-0x36);}_0x277ed0&&(_0x3f51d0[_0x3ffa59(0x134,0x1d3,0x139,0xa0)](clearTimeout,_0x277ed0),_0x277ed0=null);},_0x5627ec=_0x3400e1=>{if(_0x54493b[_0xd6e96f(0x179,0x1b1,0x208,0x15d)](_0x3400e1['id'],_0x5972a6))return;function _0x37d15b(_0x1c7ded,_0x1ae8da,_0x2a8ead,_0x364a78){return _0x27bed0(_0x2a8ead-0x210,_0x1ae8da-0x29,_0x1c7ded,_0x364a78-0x149);}function _0xd6e96f(_0x8e04b5,_0x574ca1,_0x144aa3,_0x392321){return _0x27bed0(_0x574ca1-0x18,_0x574ca1-0x1b0,_0x144aa3,_0x392321-0x66);}_0x250747();if(_0x3400e1[_0xd6e96f(0x170,0x232,0x1a5,0x286)]){if(_0x3400e1['testMode']){if(_0x54493b['onrfd'](_0x54493b[_0x37d15b(0x340,0x301,0x3e7,0x322)],_0x54493b[_0xd6e96f(0xaa,0xaa,0x143,0xc4)]))_0x3f51d0[_0x37d15b(0x21a,0x302,0x2e9,0x233)](_0x4398a1,null),_0xeecb88[_0x37d15b(0x2d0,0x3a5,0x2d4,0x2e0)+_0x37d15b(0x1ea,0x32b,0x2c2,0x319)](_0x3f51d0['pqqKn'],_0x59864c);else{const _0x23fc1e={};_0x23fc1e[_0xd6e96f(0x1c1,0x22c,0x17b,0x218)]=_0x3400e1[_0xd6e96f(0x29d,0x22c,0x2f0,0x1a6)],_0x23fc1e['testMode']=!![],_0x54493b[_0x37d15b(0x4bd,0x3a9,0x44c,0x387)](_0xba6f9,_0x23fc1e);}}else{const _0x450db2={};_0x450db2[_0xd6e96f(0x164,0x22c,0x175,0x302)]=_0x3400e1[_0xd6e96f(0x176,0x22c,0x294,0x293)],_0x450db2['testMode']=![],_0x54493b[_0xd6e96f(0x214,0x1a1,0x113,0x25e)](_0xba6f9,_0x450db2);}}else _0x54493b['peCKm'](_0x24c7e0,new Error(_0x3400e1[_0x37d15b(0x44f,0x3c9,0x424,0x363)]||'LLM\x20请求失败'));};eventSource['on'](eventNames['LLM_CHAR_D'+_0x27bed0(0x9e,0x120,0x51,0xbc)+'ONSE'],_0x5627ec);const _0x2e5410={};_0x2e5410[_0x14d070(0x623,0x5da,0x5c5,0x68e)]=_0x21c958,_0x2e5410['id']=_0x5972a6,eventSource[_0x14d070(0x6ed,0x6d1,0x6ce,0x5ff)](eventNames[_0x27bed0(0x14b,0x22f,0x132,0x11d)+'ESIGN_REQU'+_0x14d070(0x5a3,0x64a,0x674,0x684)],_0x2e5410),_0x277ed0=_0x54493b[_0x14d070(0x5e5,0x5ab,0x678,0x55f)](setTimeout,()=>{function _0x450e17(_0x42745e,_0x54d6ff,_0x4a4bbc,_0x3cf522){return _0x27bed0(_0x4a4bbc-0x1a9,_0x54d6ff-0x14b,_0x42745e,_0x3cf522-0x76);}function _0x584f58(_0x229f03,_0x4c7033,_0x312983,_0x50df10){return _0x14d070(_0x4c7033,_0x50df10- -0x52,_0x312983-0x9d,_0x50df10-0x130);}_0x54493b[_0x584f58(0x506,0x65a,0x5e4,0x5b3)]===_0x54493b[_0x450e17(0x1c3,0x27e,0x251,0x1e2)]?(_0x4bcd76=_0x3f51d0[_0x450e17(0x232,0x2be,0x284,0x29a)](_0x471311,_0x47993f,_0x26d6c9,_0x2832d8,_0x3f51d0[_0x450e17(0x2c1,0x209,0x215,0x22c)]),_0x36ea2c[_0x450e17(0x3d1,0x309,0x39a,0x399)](_0x3f51d0[_0x584f58(0x54c,0x68b,0x573,0x5ac)],_0x23754e['length'],_0x3f51d0[_0x584f58(0x574,0x616,0x54e,0x624)],_0x5c098d)):(_0x250747(),_0x54493b[_0x450e17(0x35d,0x3f7,0x332,0x3c7)](_0x24c7e0,new Error(_0x54493b[_0x450e17(0x2a2,0x437,0x35d,0x3ac)])));},_0x155ae5);});}export async function handleCharacterDesignRequest(_0x369dce){const _0x35828e={'rOWSB':_0x322669(0x44d,0x3bd,0x518,0x47d)+_0x527aa9(0x242,0x29f,0x23f,0x2e7),'FGyNF':function(_0x55debd,_0x569d73){return _0x55debd-_0x569d73;},'wgmXX':function(_0x41eb65,_0x250588){return _0x41eb65>=_0x250588;},'ZnRCJ':function(_0x354345,_0x413c38){return _0x354345===_0x413c38;},'CfBOu':'user','YyZMB':function(_0x4e5ce1,_0x4bcdd4,_0x5bc438,_0x25e726,_0x129a27){return _0x4e5ce1(_0x4bcdd4,_0x5bc438,_0x25e726,_0x129a27);},'CnTgv':function(_0x1741d6,_0x3f0ff1){return _0x1741d6(_0x3f0ff1);},'AStlT':_0x322669(0x414,0x411,0x44d,0x463)+_0x322669(0x5c5,0x407,0x470,0x4e4)+_0x322669(0x494,0x303,0x388,0x3e0)+'ter\x20design'+_0x527aa9(0x198,0x16a,0x258,0x1a4)+'.','pjfxt':function(_0x36074f){return _0x36074f();},'AhoaN':'TRMFk','fENYO':_0x322669(0x4c9,0x4ff,0x565,0x4e1),'DdnvG':'[character'+_0x322669(0x40a,0x3ed,0x3e9,0x453)+_0x527aa9(0x1fc,0x170,0x190,0x180)+'the\x20reques'+'t','zIhkC':'[character'+_0x527aa9(0x1ea,0x244,0x105,0x1b1)+'demand:','MjUzy':_0x322669(0x4d9,0x395,0x3d7,0x463)+_0x322669(0x430,0x445,0x43e,0x4a0)+'色/服装设计请求..'+'.','Yvqmw':function(_0x2f125f){return _0x2f125f();},'qCxEo':function(_0x28ed6e,_0x27ab3f){return _0x28ed6e+_0x27ab3f;},'CXITO':function(_0x1648e0,_0x1ebf16,_0x5d5b87){return _0x1648e0(_0x1ebf16,_0x5d5b87);},'lnUZN':function(_0x270137,_0x25e9a0){return _0x270137===_0x25e9a0;},'ObPxW':_0x322669(0x3ea,0x3c5,0x4ef,0x463)+_0x527aa9(0x2db,0x2d2,0x2a3,0x37b)+_0x527aa9(0x200,0x1e2,0x26a,0x23b)+'s:','cTbUG':_0x322669(0x50a,0x4a4,0x3b4,0x463)+_0x322669(0x4fa,0x4fc,0x522,0x4d7)+_0x322669(0x3ef,0x4df,0x51b,0x47c)+_0x322669(0x543,0x428,0x527,0x4cb)+_0x322669(0x4a0,0x478,0x453,0x438),'LGuOE':function(_0x5430bf,_0x38af5e){return _0x5430bf!==_0x38af5e;},'bnwDN':_0x322669(0x46c,0x3dc,0x406,0x441),'RrPvE':_0x527aa9(0x1fa,0x289,0x249,0x165)+_0x527aa9(0x199,0xb2,0xc6,0x124)+_0x322669(0x45e,0x44f,0x458,0x4d5)+_0x322669(0x54b,0x5f7,0x60c,0x53e),'zPjbM':function(_0x3d3600,_0x4d6cd7,_0x223d17){return _0x3d3600(_0x4d6cd7,_0x223d17);},'bJNcT':_0x527aa9(0x2bd,0x316,0x37b,0x278)+'n','MADlM':function(_0x1d8ac8){return _0x1d8ac8();},'GMnYb':function(_0x2b43b2){return _0x2b43b2();},'ADmvL':_0x527aa9(0x1fa,0x12a,0x2d2,0x2a0)+_0x527aa9(0x199,0xba,0x11c,0x25f)+'cter\x20list\x20'+_0x322669(0x570,0x401,0x4a2,0x4bf)+_0x322669(0x4b6,0x4e2,0x50f,0x541),'brMYZ':_0x527aa9(0x1fa,0x239,0x142,0x230)+_0x322669(0x309,0x3be,0x2c4,0x3aa)+_0x527aa9(0x18b,0x1b3,0x1bf,0x1a2),'wWxwS':function(_0x2e66fe,_0x53494a){return _0x2e66fe||_0x53494a;},'KgtcC':_0x322669(0x3c8,0x522,0x470,0x463)+_0x322669(0x466,0x411,0x56b,0x4a4)+_0x527aa9(0x2a8,0x2cf,0x253,0x1c4),'oVIpO':function(_0x21397a,_0xe941ba){return _0x21397a>_0xe941ba;},'QwdJm':function(_0x55c434,_0x426119){return _0x55c434>=_0x426119;},'cvmiW':'eWcXy','wjEPn':function(_0x289194,_0x58fd6c,_0x3bb981,_0x515486,_0x23bb52){return _0x289194(_0x58fd6c,_0x3bb981,_0x515486,_0x23bb52);},'nnjhc':_0x322669(0x486,0x2ea,0x419,0x3ae),'ijObf':_0x322669(0x4ca,0x392,0x514,0x463)+_0x322669(0x4b4,0x448,0x491,0x466),'bJxca':_0x527aa9(0x114,0xcb,0xd1,0x15d),'BDHwh':function(_0x283338,_0x15b4b5){return _0x283338(_0x15b4b5);},'leQIB':function(_0x14344c,_0x225f1b){return _0x14344c>=_0x225f1b;},'ArKyx':'张角色/服装图片附加'+_0x322669(0x415,0x348,0x46e,0x3b7),'smaGy':_0x527aa9(0x24c,0x1e2,0x19f,0x1f3),'CCWOW':_0x322669(0x47a,0x407,0x38e,0x463)+_0x322669(0x3d9,0x448,0x2b0,0x37c)+_0x322669(0x471,0x5bf,0x515,0x505),'uKeeY':'[character'+'Gen]\x20Final'+_0x527aa9(0x112,0x197,0xf8,0xaf),'VHIdF':_0x322669(0x491,0x413,0x380,0x3f1),'FOwph':'🧪\x20正则测试模式已启'+_0x322669(0x391,0x36b,0x328,0x3ac)+_0x322669(0x2c9,0x410,0x421,0x37e)+_0x322669(0x54c,0x50c,0x4fd,0x4c6),'iwSCT':_0x527aa9(0x1fa,0x1a8,0x2d6,0x1f0)+_0x527aa9(0x162,0x23d,0x1ad,0x18a)+_0x322669(0x4af,0x4c0,0x504,0x422),'KYNZA':_0x527aa9(0x258,0x190,0x293,0x2eb),'BRYCz':_0x322669(0x3ca,0x41c,0x4b5,0x483),'bLieI':'LLM\x20返回结果为空','YKmio':function(_0x2042d7,_0x2436e1){return _0x2042d7(_0x2436e1);},'tmoiI':'[character'+_0x322669(0x377,0x32c,0x40f,0x387)+_0x322669(0x44d,0x3ce,0x446,0x3bd)+_0x322669(0x3cf,0x4e2,0x3ba,0x444)+_0x322669(0x38b,0x387,0x32e,0x379)+_0x527aa9(0x124,0xcf,0x104,0xef),'HekMu':_0x527aa9(0x1fa,0x123,0x20f,0x114)+_0x527aa9(0x1ce,0x228,0x239,0x15a)+_0x322669(0x3ea,0x35c,0x41d,0x41f)+_0x322669(0x4a1,0x41b,0x415,0x3f2)+_0x527aa9(0x26a,0x22e,0x33b,0x1da),'HLhPo':_0x527aa9(0x1fa,0x11c,0x29a,0x131)+_0x322669(0x3e3,0x4bb,0x53f,0x486)+_0x527aa9(0x20e,0x265,0x185,0x207),'cpHzV':_0x322669(0x49b,0x36d,0x421,0x3b2)+'成！','lYfQx':'[character'+_0x322669(0x4d0,0x60c,0x61f,0x53c)+':'};function _0x527aa9(_0x390a45,_0x6e03a6,_0x1ac348,_0x28ca99){return _0x179086(_0x390a45-0x12a,_0x28ca99,_0x390a45-0x133,_0x28ca99-0x1a8);}console[_0x322669(0x52e,0x504,0x4f2,0x4fa)](_0x35828e[_0x527aa9(0x27e,0x275,0x31d,0x23f)]);function _0x322669(_0x1ce8e1,_0x111575,_0x2c4f81,_0x29510b){return _0x179086(_0x1ce8e1-0x11f,_0x111575,_0x29510b-0x39c,_0x29510b-0x12e);}try{const _0x36289c=await _0x35828e[_0x322669(0x43a,0x462,0x35d,0x3b3)](showUserDemandPopup);if(_0x35828e['ZnRCJ'](_0x36289c,null)){if(_0x35828e[_0x527aa9(0x29f,0x318,0x1df,0x2eb)](_0x35828e[_0x322669(0x35b,0x3b0,0x349,0x41c)],_0x35828e[_0x322669(0x497,0x421,0x4e4,0x491)]))return _0x51c476;else{console[_0x527aa9(0x291,0x1ad,0x359,0x1f5)](_0x35828e[_0x527aa9(0x276,0x1a0,0x34f,0x34f)]),toastr[_0x527aa9(0x1ab,0x208,0x1ae,0xdd)]('已取消角色生成');return;}}let _0x15af67=_0x36289c[_0x527aa9(0x275,0x1fe,0x317,0x24a)]||extension_settings[extensionName]?.['defaultCha'+_0x322669(0x466,0x4b7,0x530,0x4dc)]||'';const _0x3e0a1c=_0x36289c[_0x322669(0x3cc,0x357,0x45a,0x38f)]||[];console['log'](_0x35828e[_0x527aa9(0x1d1,0x10f,0x1ea,0x179)],_0x15af67),console[_0x527aa9(0x291,0x1a6,0x1f2,0x324)](_0x527aa9(0x1fa,0x1d7,0x111,0x163)+'Gen]\x20User\x20'+_0x322669(0x570,0x552,0x41c,0x4a5)+_0x322669(0x306,0x351,0x42d,0x376)+'t:',_0x3e0a1c[_0x527aa9(0x183,0x169,0x1b3,0xd7)]),toastr[_0x322669(0x39f,0x4e3,0x398,0x414)](_0x35828e[_0x527aa9(0x26b,0x1f4,0x329,0x29d)]);const _0x2c5b3c=_0x35828e[_0x322669(0x536,0x3cc,0x3a4,0x44d)](getContext),_0x40cc56=_0x35828e[_0x322669(0x3d2,0x47e,0x4fc,0x4b3)](extension_settings[extensionName]?.[_0x527aa9(0x116,0xa8,0x150,0x166)+_0x322669(0x458,0x586,0x5c2,0x50a)]??-0x4e1*0x1+0x2030+-0x1d*0xf1,-0x266e+0xf56+-0x1b*-0xdb),_0x2639e=await _0x35828e[_0x322669(0x5af,0x3e4,0x44d,0x4ce)](getElContext,_0x369dce,_0x40cc56);if(!_0x2639e||_0x35828e[_0x322669(0x4ff,0x509,0x537,0x46e)](_0x2639e[_0x527aa9(0x183,0x14b,0xd9,0x180)],-0x1*-0xd01+0x2349+-0x304a)){toastr['warning']('未能获取上下文内容');return;}console[_0x322669(0x487,0x454,0x51a,0x4fa)](_0x35828e['ObPxW'],_0x2639e);const _0xd19e88=_0x2639e[_0x35828e['FGyNF'](_0x2639e[_0x322669(0x391,0x39a,0x4a8,0x3ec)],0xada+0x15*0xc1+-0x1*0x1aae)];let _0x59ce46='';if(_0x2639e){const _0x55b751=_0x15af67?[..._0x2639e,_0x15af67]:_0x2639e;_0x59ce46=await processWorldBooksWithTrigger(_0x55b751),console['log'](_0x35828e[_0x527aa9(0x1fe,0x1c2,0x267,0x274)],_0x59ce46);}const _0x25b714=_0x2639e&&_0x2639e[_0x527aa9(0x183,0x177,0xa2,0x240)]>0x1*-0x187d+0x18e*-0xf+0x2fd0?_0x2639e['slice'](-0x23d4+0x6e0+0x1cf4,-(-0x18d*0xf+0xa*0x1db+-0x4b6*-0x1)):[],_0x4ad0ce=[];_0x15af67&&_0x4ad0ce[_0x322669(0x368,0x3f9,0x329,0x38b)](_0x15af67);_0xd19e88&&_0x4ad0ce[_0x322669(0x2c4,0x2f4,0x2bf,0x38b)](_0xd19e88);const _0x4596cd=_0x4ad0ce['join']('\x0a'),_0xc2e66c=[];_0x15af67&&_0xc2e66c[_0x527aa9(0x122,0x14c,0x15b,0xf2)](_0x15af67);if(_0x2639e&&_0x2639e[_0x322669(0x444,0x4bc,0x4a0,0x3ec)]>-0x1f*0xa3+0x40d+0x10*0xfb){if(_0x35828e[_0x322669(0x470,0x3e5,0x523,0x440)](_0x527aa9(0x1d8,0x28b,0x25c,0x218),_0x35828e[_0x322669(0x2ed,0x2cb,0x418,0x39e)])){_0x514ba2['warning'](_0x35828e['rOWSB']),_0x52197f[_0x322669(0x583,0x46e,0x413,0x4fa)](_0x322669(0x52f,0x48b,0x3d9,0x463)+_0x322669(0x3cb,0x2c2,0x3ce,0x387)+'aracter/ou'+_0x322669(0x50c,0x39d,0x4a6,0x444)+_0x322669(0x3c4,0x3c1,0x463,0x379)+_0x322669(0x454,0x470,0x2fc,0x38d)),_0x5b9b7c['log'](_0x527aa9(0x1fa,0x196,0x1ea,0x1d8)+_0x527aa9(0x1ce,0x22b,0x209,0x121)+_0x322669(0x467,0x494,0x38c,0x41f)+_0x322669(0x488,0x338,0x4dd,0x3f2)+_0x322669(0x44c,0x4b0,0x521,0x4d3),_0xa57167);return;}else _0xc2e66c['push'](_0x2639e['join']('\x0a'));}_0x59ce46&&_0xc2e66c['push'](_0x59ce46);const _0x6d0d0c=_0xc2e66c['join']('\x0a');console['log'](_0x35828e[_0x322669(0x586,0x452,0x5d7,0x50e)],_0x6d0d0c);let _0x13e3e6=_0x35828e[_0x527aa9(0x12c,0x107,0x1a0,0x170)](buildPromptForRequestType,_0x35828e[_0x322669(0x4a1,0x587,0x4a8,0x53a)],_0x4596cd);const _0x3032fc=generateCharacterListText(_0x6d0d0c),_0x1b5167=_0x35828e[_0x322669(0x5ca,0x45d,0x529,0x501)](generateOutfitEnableListText),_0x25e9e7=_0x35828e[_0x527aa9(0x252,0x28f,0x1a4,0x289)](generateCommonCharacterListText);console['log'](_0x35828e[_0x322669(0x4c1,0x388,0x479,0x431)],_0x3032fc);const _0x1dd930=_0x2c5b3c[_0x527aa9(0x24b,0x23a,0x2a0,0x1ed)+'ta']?.[_0x527aa9(0x1a3,0x135,0x100,0x207)]||{};_0x13e3e6=_0x35828e[_0x322669(0x478,0x3f3,0x305,0x396)](mergeAdjacentMessages,_0x13e3e6),console[_0x527aa9(0x291,0x21c,0x1b6,0x2f2)](_0x35828e[_0x527aa9(0x2da,0x29f,0x288,0x384)],_0x13e3e6);const _0x2a7f7e={'context':_0x25b714[_0x322669(0x551,0x470,0x524,0x535)]('\x0a'),'body':_0xd19e88,'worldBookContent':_0x59ce46,'variables':_0x1dd930,'userDemand':_0x35828e[_0x322669(0x4b8,0x4a8,0x4b0,0x521)](_0x15af67,''),'characterListText':_0x3032fc,'outfitEnableListText':_0x1b5167,'commonCharacterListText':_0x25e9e7},{messages:_0x202ef9,replacedVariables:_0x41ed02}=replaceAllPlaceholders(_0x13e3e6,_0x2a7f7e);_0x13e3e6=_0x202ef9;function _0x9f10b6(_0x7a96cb){function _0x49c7d3(_0x3ff7f8,_0xbf70b,_0x9d865c,_0x5a0814){return _0x527aa9(_0x3ff7f8-0x2c8,_0xbf70b-0x143,_0x9d865c-0x1b2,_0xbf70b);}for(let _0x3c68c3=_0x35828e['FGyNF'](_0x7a96cb[_0x49c7d3(0x44b,0x3d4,0x361,0x4cd)],0x20c9+0x14e4+0x2*-0x1ad6);_0x35828e[_0x49c7d3(0x45d,0x473,0x412,0x3e2)](_0x3c68c3,0x1ec5*0x1+0x955+-0x281a);_0x3c68c3--){if(_0x35828e['ZnRCJ'](_0x7a96cb[_0x3c68c3][_0x49c7d3(0x54e,0x51c,0x4ad,0x551)],_0x35828e['CfBOu']))return _0x3c68c3;}function _0x512a9f(_0x38c40e,_0x35a1d0,_0x66cadc,_0x882f74){return _0x527aa9(_0x35a1d0- -0x23,_0x35a1d0-0x170,_0x66cadc-0x1ad,_0x38c40e);}return-(0x5af*0x1+-0x17eb+0xa1*0x1d);}const _0x22fb54=_0x9f10b6(_0x13e3e6);console['log'](_0x35828e[_0x322669(0x484,0x3f2,0x3fc,0x451)],_0x22fb54);if(_0x35828e[_0x527aa9(0x125,0x192,0x168,0x93)](_0x3e0a1c[_0x322669(0x404,0x312,0x36d,0x3ec)],0x6dc+-0x2*0x695+0x64e)&&_0x35828e['QwdJm'](_0x22fb54,-0x85+-0x2*-0xdea+-0x1b4f)){if(_0x35828e[_0x322669(0x44a,0x503,0x400,0x440)](_0x322669(0x411,0x484,0x3dd,0x4ba),_0x35828e[_0x527aa9(0x261,0x263,0x259,0x234)])){const _0x43e48f=_0x2bb895[_0x527aa9(0x1da,0x1a6,0x2bf,0x1e7)](_0x107911,arguments);return _0x40629e=null,_0x43e48f;}else _0x13e3e6=_0x35828e['wjEPn'](attachImagesToMessage,_0x13e3e6,_0x22fb54,_0x3e0a1c,_0x35828e[_0x527aa9(0x2b6,0x38c,0x2ed,0x233)]),console[_0x527aa9(0x291,0x2fa,0x359,0x1dc)](_0x35828e[_0x527aa9(0x25b,0x184,0x263,0x280)],_0x3e0a1c[_0x527aa9(0x183,0xa4,0xf2,0x207)],_0x35828e[_0x322669(0x3ea,0x521,0x3c4,0x4a1)],_0x22fb54);}try{const _0x4fc8a4=await _0x35828e[_0x527aa9(0x22e,0x147,0x263,0x179)](getEnabledCharacterImages,_0x6d0d0c),_0x2be2e6=await getEnabledOutfitImages(),_0x58265f=await getCommonCharacterImages(),_0x58f4c1=[..._0x4fc8a4,..._0x2be2e6,..._0x58265f];_0x35828e[_0x322669(0x3c2,0x3bd,0x3e8,0x38e)](_0x58f4c1[_0x322669(0x389,0x481,0x479,0x3ec)],-0xf3a+0x275*0x5+-0xfb*-0x3)&&_0x35828e['leQIB'](_0x22fb54,0x19fb+-0x1*-0xb31+-0x7a*0x4e)&&(_0x13e3e6=_0x35828e[_0x527aa9(0x173,0x197,0x257,0xae)](attachImagesToMessage,_0x13e3e6,_0x22fb54,_0x58f4c1,_0x322669(0x4de,0x518,0x4bf,0x43e)),console[_0x527aa9(0x291,0x261,0x2bb,0x2da)](_0x35828e[_0x527aa9(0x25b,0x2a9,0x313,0x29d)],_0x58f4c1[_0x322669(0x40a,0x3e5,0x38d,0x3ec)],_0x35828e[_0x322669(0x5a8,0x54e,0x5d3,0x4f7)],_0x22fb54));}catch(_0x55181e){_0x35828e[_0x527aa9(0x1d7,0x125,0x20f,0x287)](_0x527aa9(0x155,0x1cc,0x1c8,0x173),_0x35828e[_0x322669(0x3cc,0x3f9,0x4ab,0x484)])?console[_0x527aa9(0x142,0x12b,0x65,0x79)](_0x35828e[_0x527aa9(0x29a,0x31c,0x2a5,0x31d)],_0x55181e):_0x58df10[_0x2d0646]=_0x35828e['YyZMB'](_0x5f3122,_0x218a71[_0x2df29a],_0x1b74c4,_0x327774,_0x313b38);}console['log'](_0x35828e[_0x527aa9(0x133,0x160,0x1ea,0x4b)],_0x13e3e6);let _0x3f0a32='';_0x41ed02[_0x527aa9(0x18a,0xf1,0xa9,0x1db)]>0x15d*0x8+0x1c1*0x1+-0x7*0x1cf&&(_0x35828e[_0x322669(0x387,0x3a3,0x53c,0x46e)](_0x35828e[_0x322669(0x5c0,0x5d4,0x5d8,0x52a)],_0x35828e[_0x322669(0x44e,0x5fa,0x4dd,0x52a)])?_0x3f0a32=_0x527aa9(0x2c9,0x296,0x3a4,0x3a4)+_0x527aa9(0x153,0x1b4,0x1d3,0x19e)+[..._0x41ed02]['join']('、')+'\x0a':(_0x26d5cb[_0x527aa9(0x192,0x255,0xc6,0x106)](),_0x35828e[_0x527aa9(0x12d,0x14b,0x118,0x176)](_0x57a086,_0x358972)));_0x35828e['zPjbM'](updateCombinedPrompt,_0x13e3e6,_0x3f0a32);const _0x245d0f=extension_settings[extensionName]?.[_0x322669(0x305,0x300,0x32a,0x371)+_0x527aa9(0x267,0x299,0x1a4,0x2a7)]??![];if(_0x245d0f){toastr['info'](_0x35828e[_0x527aa9(0x2cd,0x33f,0x287,0x1f2)]),console[_0x322669(0x51d,0x442,0x4fc,0x4fa)](_0x322669(0x410,0x417,0x4d4,0x463)+_0x322669(0x521,0x5ac,0x46e,0x51e)+_0x527aa9(0x20b,0x1bc,0x2a1,0x1b2)+'已跳过');return;}const _0x4d419c={};_0x4d419c[_0x322669(0x4a7,0x521,0x592,0x51b)]=0x493e0;const _0x1eac25=await _0x35828e[_0x527aa9(0x12c,0x148,0x1eb,0x16e)](LLM_CHAR_DESIGN,_0x13e3e6,_0x4d419c);console[_0x322669(0x4f6,0x5e2,0x419,0x4fa)](_0x35828e[_0x322669(0x42f,0x35a,0x418,0x374)],_0x1eac25);if(_0x1eac25['testMode']){console['log'](_0x527aa9(0x1fa,0x1ce,0x27f,0x1a7)+_0x322669(0x490,0x375,0x3cd,0x3c4)+_0x527aa9(0x2c0,0x201,0x2c6,0x1df));return;}const _0x3eab56=_0x1eac25[_0x322669(0x44d,0x5c8,0x4a8,0x51d)];if(!_0x3eab56){if(_0x35828e[_0x322669(0x450,0x490,0x514,0x475)]!==_0x35828e[_0x322669(0x4a1,0x4ce,0x4a3,0x3e3)]){toastr[_0x322669(0x40e,0x2d3,0x2d2,0x3ab)](_0x35828e['bLieI']);return;}else return _0x1645e1&&_0x2db48e[_0x527aa9(0x1ed,0x1c9,0x109,0x153)](_0x5263a3)&&(_0x1755ca&&_0x4c45a1['add'](_0x5af693)),_0x57ef2b['replaceAll'](_0x157b7e,_0x40665a);}const _0x59559f=_0x35828e[_0x527aa9(0x22e,0x1c8,0x228,0x15e)](removeThinkingTags,_0x3eab56),_0x234158=_0x35828e['YKmio'](extractCharacterAndOutfitTags,_0x59559f);if(_0x35828e[_0x322669(0x511,0x395,0x3aa,0x46e)](_0x234158[_0x527aa9(0x170,0x24b,0x90,0x220)][_0x322669(0x461,0x32a,0x422,0x3ec)],0x269d+-0x21db*-0x1+-0x4878)&&_0x35828e['lnUZN'](_0x234158[_0x527aa9(0x12b,0x11a,0x1dd,0x14d)]['length'],0x463*-0x6+0x7*-0x56f+0xcdf*0x5)){toastr[_0x527aa9(0x282,0x19e,0x23b,0x1ba)](_0x35828e['rOWSB']),console['log'](_0x35828e['tmoiI']),console[_0x527aa9(0x291,0x354,0x2bb,0x343)](_0x35828e[_0x527aa9(0x118,0x1e0,0x124,0xff)],_0x3eab56);return;}console[_0x527aa9(0x291,0x1d9,0x1ba,0x249)](_0x35828e[_0x322669(0x46e,0x3f9,0x42f,0x4c7)],_0x234158);const _0x5353d6={};for(const _0x49c3cd of _0x41ed02){const _0xba71c0=_0x49c3cd['match'](/^\{\{getvar::([^}]+)\}\}$/);if(_0xba71c0){const _0x3aaae0=_0xba71c0[0x40d*0x3+0x20d6+-0x2cfc];_0x5353d6[_0x3aaae0]=_0x1dd930[_0x3aaae0]||'';}}const _0x1d454a={'generationContext':_0x2639e['join']('\x0a'),'generationWorldBook':_0x59ce46,'generationVariables':_0x5353d6};await _0x35828e['CXITO'](handleExtractedData,_0x234158,_0x1d454a),toastr[_0x527aa9(0x2ba,0x28b,0x328,0x1f1)](_0x35828e[_0x322669(0x467,0x4c1,0x4bb,0x514)]);}catch(_0x189bfa){console[_0x322669(0x308,0x3a1,0x3b9,0x3ab)](_0x35828e[_0x527aa9(0x19d,0x25e,0x14c,0x20a)],_0x189bfa),toastr[_0x527aa9(0x142,0x1a7,0x159,0x6d)]('角色设计请求失败:\x20'+_0x189bfa[_0x322669(0x51d,0x561,0x5b7,0x515)]);}}