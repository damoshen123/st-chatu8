(function(_0x3a9c69,_0x2eafe2){function _0x224f47(_0x32a7bc,_0x5eb688,_0x5edaf8,_0x568db7){return _0x4406(_0x5eb688-0x24a,_0x32a7bc);}function _0x3df76c(_0x292a38,_0x42bd18,_0x23cc5b,_0x4dfa69){return _0x4406(_0x4dfa69- -0x15b,_0x42bd18);}const _0x3a3fb5=_0x3a9c69();while(!![]){try{const _0x38704a=-parseInt(_0x224f47(0x512,0x574,0x5b8,0x5c6))/(-0x6db+0x1*0x25b+0x481)*(parseInt(_0x3df76c(0x1e3,0x175,0x1c4,0x109))/(-0x449*-0x9+-0x79*0x1e+0x1*-0x1861))+-parseInt(_0x224f47(0x37f,0x3fc,0x3fe,0x463))/(0x13*-0x26+-0x1*-0xd85+-0x4*0x2ac)+-parseInt(_0x224f47(0x517,0x561,0x50e,0x48a))/(0x1fab+-0x1bce+-0x3d9)*(parseInt(_0x224f47(0x539,0x46c,0x4ca,0x406))/(-0x2*-0x689+0x196f+-0x267c))+-parseInt(_0x3df76c(0x89,0xff,0xbb,0x37))/(-0x4*-0x447+0x1997*-0x1+-0x137*-0x7)*(parseInt(_0x224f47(0x541,0x56f,0x576,0x4dc))/(0x2571+-0x1315+-0x13*0xf7))+parseInt(_0x3df76c(0x24,0x11a,0x138,0xc2))/(-0x2494+-0x1*0x17f3+0x3c8f)*(parseInt(_0x224f47(0x352,0x3fe,0x36e,0x471))/(-0x2274+0x2*-0x324+-0x1*-0x28c5))+parseInt(_0x224f47(0x4a1,0x4ba,0x466,0x3e3))/(-0x24c1+-0x59*0x5+0x2688)+-parseInt(_0x224f47(0x4a9,0x453,0x391,0x432))/(-0x1c1b*-0x1+0x213a+-0x2*0x1ea5)*(-parseInt(_0x224f47(0x4f5,0x54b,0x5b6,0x4c3))/(-0x2385*-0x1+0x273*0x4+-0x3*0xf17));if(_0x38704a===_0x2eafe2)break;else _0x3a3fb5['push'](_0x3a3fb5['shift']());}catch(_0xcc2f7b){_0x3a3fb5['push'](_0x3a3fb5['shift']());}}}(_0x1e63,0x6787*0xf+-0x1*0xf847+0x2f53*0x17));const _0x1919b9=(function(){const _0x16cf0d={'ZSVEa':function(_0x40946d,_0x83583){return _0x40946d(_0x83583);},'zFFLQ':'Error\x20gene'+'rating\x20SD\x20'+_0x544c2a(-0xc1,-0x77,-0x77,0xf),'jtKxe':_0x544c2a(-0x4a,0x50,0x35,0x41),'PWmhB':_0x544c2a(-0x1e,-0x12,-0x75,-0x41),'mHBZD':function(_0x2db7e5,_0x3bb3d4){return _0x2db7e5!==_0x3bb3d4;},'ryyDn':_0x433b53(0x250,0x215,0x1c4,0x1be)};function _0x544c2a(_0x34ee0c,_0x50905f,_0x5b7f56,_0x25b4bf){return _0x4406(_0x50905f- -0x29b,_0x34ee0c);}function _0x433b53(_0x1da445,_0x931c51,_0x5e0914,_0xbb0321){return _0x4406(_0x931c51- -0xf4,_0x1da445);}let _0x3831d7=!![];return function(_0x351760,_0x5e14c7){const _0x52ce5a={};function _0x2a98a3(_0x1c4cbb,_0x3f5015,_0x44f747,_0x413919){return _0x433b53(_0x3f5015,_0x44f747-0x159,_0x44f747-0x4,_0x413919-0x174);}_0x52ce5a[_0x2a98a3(0x248,0x2f2,0x308,0x398)]=_0x16cf0d[_0x12e349(0x112,0x1e6,0x1ba,0x141)],_0x52ce5a[_0x2a98a3(0x33b,0x29d,0x2f0,0x2a2)]=_0x2a98a3(0x2e0,0x1e6,0x23a,0x174)+_0x12e349(0x1ef,0x20e,0x1b4,0x1bc),_0x52ce5a[_0x12e349(0x257,0x297,0x2f5,0x353)]=_0x16cf0d[_0x12e349(0x10a,0x1c4,0x1bd,0x156)];function _0x12e349(_0x490e14,_0x42ce2e,_0x27c0e9,_0x272e0d){return _0x433b53(_0x42ce2e,_0x27c0e9-0x10d,_0x27c0e9-0x193,_0x272e0d-0x61);}const _0x4b48ba=_0x52ce5a;if(_0x16cf0d[_0x2a98a3(0x242,0x29a,0x20e,0x2ae)](_0x16cf0d[_0x2a98a3(0x3a7,0x45e,0x38e,0x3c7)],_0x16cf0d[_0x2a98a3(0x440,0x3a2,0x38e,0x308)])){const _0x449e45=_0x12e349(0x23d,0x331,0x2dc,0x29f)+'常\x20(ID:\x20'+_0x7411e9+_0x12e349(0x242,0x32a,0x31d,0x241)+_0x4c4737[_0x12e349(0x1c5,0x260,0x251,0x2bf)];_0x16cf0d[_0x12e349(0x1b4,0x1af,0x232,0x22b)](_0xbe2da2,_0x12e349(0x21f,0x23a,0x2f9,0x3a4)+_0x449e45),_0xd38ddd[_0x12e349(0x29e,0x2d7,0x228,0x184)](_0x16cf0d['zFFLQ'],_0x30f0c9);const _0xab5403={};_0xab5403['id']=_0x574f7e,_0xab5403['success']=![],_0xab5403[_0x2a98a3(0x29c,0x1bc,0x274,0x2e4)]=_0x454557[_0x2a98a3(0x1cd,0x292,0x29d,0x1e9)],_0xab5403[_0x12e349(0x1ad,0x291,0x287,0x2ce)]=_0x46bea7,_0x1aba62[_0x2a98a3(0x30c,0x44d,0x376,0x36c)](_0x2c9ab7['GENERATE_I'+_0x12e349(0x3be,0x2f0,0x2ff,0x263)+_0x12e349(0x268,0x2a9,0x212,0x29a)],_0xab5403),_0x16cf0d[_0x2a98a3(0x225,0x1f2,0x27e,0x22f)](_0x2fd829,_0x2a98a3(0x39b,0x2f6,0x2c3,0x34b)+_0x2a98a3(0x342,0x2ef,0x292,0x216)+_0x45eb0b+')');}else{const _0x457e50=_0x3831d7?function(){function _0x1c3025(_0xf672ce,_0x4c6080,_0x5904f5,_0x38c7ea){return _0x12e349(_0xf672ce-0x1c0,_0x38c7ea,_0x5904f5- -0x25b,_0x38c7ea-0xa3);}const _0x217a2f={};function _0x32c94f(_0x1c82ab,_0x2678c4,_0x5221ef,_0x346646){return _0x2a98a3(_0x1c82ab-0x1a5,_0x5221ef,_0x2678c4- -0x2d9,_0x346646-0x56);}_0x217a2f[_0x32c94f(-0x97,-0x30,-0x5f,0x9a)]=_0x4b48ba['FHRgJ'],_0x217a2f[_0x1c3025(-0x60,-0xf,-0x34,-0x37)]=_0x4b48ba['hYiRx'];const _0x4a8e5f=_0x217a2f;if(_0x5e14c7){if(_0x4b48ba[_0x32c94f(-0x11,0x68,-0x66,0x84)]===_0x4b48ba[_0x32c94f(0x10a,0x68,0xa4,0xa0)]){const _0x556401=_0x5e14c7[_0x1c3025(0x96,-0x3,0x7e,-0x1)](_0x351760,arguments);return _0x5e14c7=null,_0x556401;}else{_0x30c209(_0x4a8e5f[_0x32c94f(-0xa6,-0x30,-0xae,-0xe8)]),_0x3fef7a['emit'](_0x4a8e5f[_0x1c3025(-0x101,-0x3e,-0x34,-0x5)]);throw new _0x56eccf(_0x32c94f(-0xef,-0xcf,-0x143,-0xc4));}}}:function(){};return _0x3831d7=![],_0x457e50;}};}()),_0x1d4c44=_0x1919b9(this,function(){function _0x20649c(_0x48c815,_0x5b006f,_0x68470d,_0x56f24f){return _0x4406(_0x5b006f-0xa6,_0x68470d);}const _0x2aa25b={};_0x2aa25b[_0x20649c(0x346,0x3d7,0x37c,0x33c)]=_0x20649c(0x251,0x26b,0x23b,0x1ad)+'+$';const _0x17a20b=_0x2aa25b;function _0x5082dc(_0x94c1fe,_0x44af2a,_0x35807d,_0x184555){return _0x4406(_0x184555- -0xbf,_0x94c1fe);}return _0x1d4c44[_0x5082dc(0x225,0x155,0x212,0x1ad)]()['search'](_0x17a20b[_0x20649c(0x4a2,0x3d7,0x315,0x44a)])['toString']()['constructo'+'r'](_0x1d4c44)['search'](_0x20649c(0x313,0x26b,0x2d4,0x202)+'+$');});_0x1d4c44();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,convertImageToJpeg,deduplicateTags}from'./utils.js';function _0x1e63(){const _0x3b46e1=['5Q2J5zYO6ycA6l+hC2r3zwj1','A2LW','vunqx3nK','AwPRwu4','sxfuDMW','yxbWBhK','AwTLieDLy2TVkq','EuzcthO','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','s3vmtKG','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','mc44','6k+V44cc54Q25Ocb56cboIa','ke5Lz2f0AxzLia','swfvue8','kIOG','q29UDgvUDc1uEq','C0jdrK0','D0Pes3O','44cc6k+35Qoa5P+LC2r3zwj1','EKfWEhq','yM96zfK','y29vq0u','C2rFy2fKzxrHAq','rezmqw8','uxjZAge','zMfJzsdKUlRLVidLKk8','q0Xjuf9ZDg9WxW','Aef3DvG','Au1sDeW','uuzPvxy','AgvPz2H0','teLis00','swzNwLm','C2v0DgLUz3nZlG','t3LYvK4','re5YExy','6zsz6k+VoIa','rwffD2y','C2rFy2nSAxbFCW','DMDYuw8','zLHlCe4','Dhj1zq','tufhrv9srvnqtW','vurmB20','qxv0Ag9YAxPHDa','v05vDvu','zwvKktOQkIa','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','cI0GkIPdrKCGuW','cI0GkIRMLl7LPkFLGi3NJOCG','yKrWywe','AMvQwuS','ChLWwK8','A2XSqxG','Aw1Hz2vhzw5jBG','C3rFy2HHDhu4xW','kerPDMLKzv9YBW','yvDNyKC','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','B0vODva','Aw5Nx3n0CMvUzW','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','BLDftxu','Dg9Rzw4','DwXgsxe','rxPbEK8','DtHFC2rFyxv0Aa','zMfJzv95B2XVDG','v0joDMK','ndeWntj3uMDrrwi','ALbNDLG','vg9SvgG','ktOG','y29SBgvJDgvKqW','u05hCM0','DhblCNe','BhvPrKy','z2vsvKi','y2vZ','zwzHsgG','Bw9Kzq','ywrKvgfZAW','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','BM8Ty2fJAgu','Bw9KzwW','zw1PDa','ChDnzKW','og4UChq','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','EgLHBMnOzw5N','ie5uideWlJa7ia','mtjyu2PSC0O','qujJqNy','C2rFDMfL','CgvNu3rVCMfNzq','cI0GkIRMQkhLNOSGke0','77Ym6k+35Qoa5P+LC2r3zwj1','5zon5BQu5yAf5A65oG','B3nPDgLVBG','of9Zy2HLzhvSzq','sKzoq3C','B0zQrxu','uerhAKS','CMvTB3zLtgLZDa','zgfpwKe','mZq0odi5oev0quvsAW','ENLPvu4','y1L1y0W','l2fWAs9Zzc9Zzq','CNL5rg4','nJyZmtqYuK9Vswnw','ywrZsuG','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','uvLZwg4','zv9Mywn0B3i','DgvWCYK6kIOG','DMDjz1O','q3Pivfm','zujKsey','EgnTB3G','zML4zwrqCM9TCa','whntChO','ChD6wgW','sKTOCui','ze1hu2G','cI0GkIPdBgLWia','E+s/RUwBVN0','v25jC3q','AfrJBNy','y05MBha','loAOOEwEI+s4UG','C2rFy3vWC2nHBa','DenMsfC','ChqPoIOQia','ywrFBw9KzwW','ANnVBG','z2f0AxzLCW','AhPlAwy','6i635y+w5QIH5z6l5AsX6lsLoIa','ExvZAgvPzf9Zza','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','BMvYyxrL','ksaTifbYB21WDa','CMvZDg9Yzv9Myq','mtjJAeHbvvq','C2tOR7FMSylNLj/LM77PLjNOR686ia','Bu5cuLG','AhjFC2nHBgu','zxvL','DKTUtw8','DhH0mMLTzW','zty0ioAvSoAnRUwKHoEqHUoaGG','BM96r2O','BMvYyxrPB24','5Q2J5zYO6k6+572U5QIH5z6l5lI6','AgfYywn0zxjozq','C2rdzMDty2fSzq','lcdOR6BMG4u6ia','mJiYmG','ANrlEgu','y29UDMvYDfrVsG','cI0GkIPwquu6kG','ufDTAei','5lU75yQH5BEY5y+w5RAi','Aw1Hz2veyxrH','EgLHBMnOzw5Nia','CwfArhq','BuHcwKq','AxDmyu4','yxbWBgLJyxrPBW','6k6+572U5QIH5z6llI4U5lI6','5lIT55QeihbYB21WDooaGG','BwTSwMW','venyCLy','ENLlEhG','vevosKC','mtyXodK1rKXzvgjZ','u291wKy','oufOy2v6AG','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','Ae5LB2y','kfnHBxbSzxiPoG','yw1L','tMjcBfi','of91ChnJywXLCG','v0H0v3G','6z2I5O+q56s66k+noG','CgfYC2u','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','q3njtvu','ywreANC','tKnKr1C','DMnRCfe','C2rFy2nOyxr1xW','y2XPzw50','kcGOlISPkYKRkq','AhDhEuy','BKvtDMC','rwfUqxe','qur2uwq','5Q2J6z2I5O+q56s6icHqCM9T','kfvWC2nHBguGrG','56cboIa','CLPIAMu','Aw1Hz2vZ','C2rFy2HPCMvZxW','rK96CvC','y2zNx3nJywXL','wxLfsem','zgf0ytPPBwfNzq','vM1Lsgy','C2rFC3rVCf9Nzq','l2fWAs9Zzc9Nzq','thbZDhK','EwvYCW','y2HHBMDL','r1boEvK','6AUy5RIf5l+U5Asnios4UG','zgvUB2LZAw5NxW','C0Xvs1u','yxjNCW','Bfn5yxG','sKf2rvG','y2fSztOQkIa','rffMwfm','ue9tva','Cu5QBNq','u2TPCdOQkIa','v1D0Dxm','C3rHDhvZ','q2XhtM8','yxv0Aa','C2rvCMW','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','qNDkA0W','reTXuhC','zw5HyMXLx2HYia','of9TB2rLBa','6iMY6lsF6z2I5O+q56s66k+noIa','sLnptIdOP6pMNPdLPlhOTkxVViW','r2HYqMq','lI4U','cI0GkIRPQ5JMUixKV67LPi0G','CNvUBMLUzW','BgvZktOG','sxnMDuS','Aw5JBhvKzxm','tLnf','y3jPChrZ','z2u6','Dg9dANK','CKT5vhC','C0PqDfK','cI0GkIRNP43LRzaGkfm','yNviCMC','suq6ia','ExvgD0K','u0qGqvbjioI/LowBNUMuMq','D2jps28','y21VzgvSmJiYmG','EMGTq04SEMG7Cq','ifbYB21WDa','r3j2uMK','ndq0nhb4yK9rAG','EfbJtNK','q1jHtgS','B3iGChjVBxb0oG','BKXvqvm','EgDfsfa','zxjYB3i','qvfux3nK','EfvgyuC','C2rFyxv0Aa','cI0GkIROTj/PNAlMJ5dNPlOG','cI0TlqOJiYmG55sF','BgvUz3rO','uhjVBxb0ktOQkG','vvvLvfy','AwXLCJOQkIa','wLnwrwe','C2zvzwi','thrnqwy','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','mZa2nduYmfnUtxbeva','rxjYB3iGz2vUzq','CLj5AuO','A25WDwu','zgTXBwe','mZqWnda1Cffzs2zv','ywnLCYK6kIOG','Aw1Hz2u6','z2nQCuq','tufhrv9srvfvrq','C3vIC3rYAw5N','s1vAC0u','A0nAtLi','Ewvdsw0','sKjMzgK','C2fTCgXLCL9Uyq','icHjrdOG','D0fkuK4','D2LKDgG','Dgv4Da','uhjHz21H','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','ptaUosXLBJTXpq','ifn0CMvUz3rOkq','C3rHDhvZvgv4Da','zML4','55sO5lQo55sF5OIq55QevgfNoIa','BwvZC2fNzq','D1b4Cg8','DhjPBq','yLLYy0e','v2LfzgS','5BcD6k+v5l2C5lI65y6F5AEliejHCW','tMTvrKG','ywX3yxLZB25FCW','Bvj2BNq','tePZAey','5BEY5yID5AEl5yYw44cc','u0rmAxn0zw5LCG','uLrIy1i','CeHlwNO','yxv0B191CMW','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','DxbKyxrLu3rHDa','r05uv0W','yKDXseq','DxjS','Ew5YvMm','Bg9N','D3vvtLC','BMvNyxrPDMvqCG','DKThvwK','ywn0B3iPoIOQia','of92ywu','y3fqv2C','C3vJy2vZCW','Aw5PDgLHBgL6zq','v290ANu','5zU+5y+c5PwW5OQL5zgkcI0GkIO','Aw5MBW','6lsF6z2I5lI6oIa','5BEY5ywZ6zET44cc','Cgf5C3rFy2HHDa','B3zLCNjPzgvFCW','wu53BKm','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','ufDfsw0','C2vLza','BgvY','vxPlC1m','cI0TlqOGicaG','mKPuBufNyq','cI0GkIPbrgv0yq','ExvZAgu','Cg9bvw0','kerLBM9PC2LUzW','cI0GkIRMRAxMLBaGkfm','cI0GkIRPH4FMOlFMLRNMS5uG','s2L0lZuZnY4ZnG','Dg9tDhjPBMC','AxPLktOQkIa','ChjVBxb0','Dvr6txi','nZu0mdyWmhbXs3nJrG','C2rFy3nLzwq','y2fJAgu','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','r0vorvjbvevFsq','Bg9Hza','oIOQia','q2HHCMfJDgvYia','Aw9U','Dc1TB2rLBa','CM9S','y2vZioIeUoMdQos/RUwKJsdKUlO','thvtwfa','D21Uy3a','ienOCM9Tzs8XmG','C3rYAw5NAwz5','yMfMu3m','rMjyt0C','BI9QC29U','ueLlwNm','y29TCgXLDgvuyq','C3rYzw5NDgG','sKjPrLa','ChDptLe','D056vwy','rK9AsfK','w1nexsdLKiJLUBBOP5lOIBlOTj8','AfLPuNG','5BI4icHjrdOG','qwzNy2O','icHlsfrntcWGBa','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','CKrvEKu','D3fMAM0','AxnuyxnRsw5rDq','AxnoCfO','y29SA1K','r1rru0m','l3bUzZTIyxnLnG','Aw1Hz2u','Df9LBMq','q0nrANq','Cgf5Bg9Hza','Du9hyLq','CMf0Aw5NigLTyq','C2rFy2rLBM9PCW','tePnu0y','u2nLBMuGq29TCa','mcaOv2LUzg93CW','qK9KuMm','5yIh5O2I5QIH5z6l5AsX6lsLoIa','rKHsz0O','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','6zQp5PY6kc0Xkq','zw5LCG','5yYw5lI6igrHDgeGvvi','AML1z3vHBG','rwDKqwK','D0fyy1a','ktOQkIa','ANn2DM4','qurLDgfPBgvY','sLzeCNa','zfHVEK8','zMvJwvi','v2LUnJq7ihG2na','zxr0Aw5NCW','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','AhnUCK4','44cc5zon5BQu5yAf5A65oIa','sKzNCfi','C3rLChm','qwnJzxb0luXHBG','zvLlzLe','zvHlwwO'];_0x1e63=function(){return _0x3b46e1;};return _0x1e63();}import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';function getDirectHeaders(_0x9f3bb3=null,_0x1b6e88=null){const _0x5a7917={};_0x5a7917[_0x5aff3b(0x155,0xde,0x163,0x136)]='*/*',_0x5a7917[_0x396368(0x58f,0x4e4,0x55a,0x528)]=_0x396368(0x517,0x62f,0x583,0x603)+_0x5aff3b(0xb1,0x75,0x18c,0xd7)+_0x396368(0x6dc,0x632,0x643,0x6fc),_0x5a7917[_0x5aff3b(0x119,0x1c0,0xaa,0x129)]=_0x5aff3b(0x18d,0xbf,0x178,0x21c),_0x5a7917[_0x396368(0x5c3,0x629,0x649,0x69f)]=_0x396368(0x722,0x5a0,0x648,0x588)+'pe';function _0x5aff3b(_0x5480bb,_0x39f058,_0x39f37,_0x1f3b3d){return _0x4406(_0x5480bb- -0x182,_0x39f37);}function _0x396368(_0x5bb5d7,_0x42c182,_0x2c28d3,_0x425644){return _0x4406(_0x2c28d3-0x37d,_0x42c182);}_0x5a7917[_0x396368(0x56b,0x5f3,0x543,0x49c)]=_0x5aff3b(0x166,0xff,0x12a,0xcf)+_0x5aff3b(0xf6,0xfe,0xbf,0x37);const _0x63c676=_0x5a7917,_0x2b9f74={};_0x2b9f74['User-Agent']='Mozilla/5.'+_0x5aff3b(0x11e,0x10d,0x15c,0xdc)+_0x396368(0x6df,0x698,0x693,0x675)+_0x5aff3b(0x12f,0x89,0x11f,0x1cd)+')\x20AppleWeb'+_0x5aff3b(0xe9,0xdd,0x99,0x1c4)+_0x396368(0x57b,0x6a0,0x60b,0x630)+_0x396368(0x60e,0x62a,0x63e,0x634)+_0x5aff3b(0xfc,0x1d0,0x167,0xa1)+'0.0.0.0\x20Sa'+'fari/537.3'+'6',_0x2b9f74['Accept']=_0x63c676[_0x5aff3b(0x155,0x230,0x207,0x9c)],_0x2b9f74[_0x5aff3b(0x136,0x1ca,0x86,0x1ad)+'guage']=_0x63c676['sLUKU'],_0x2b9f74['Cache-Cont'+_0x5aff3b(0xf8,0xcf,0x37,0x5c)]=_0x63c676[_0x5aff3b(0x119,0x100,0x48,0x92)],_0x2b9f74[_0x396368(0x64e,0x54b,0x5ae,0x5b9)]=_0x63c676[_0x396368(0x570,0x5ac,0x618,0x583)];const _0x5cf242=_0x2b9f74;return _0x9f3bb3&&(_0x5cf242[_0x63c676[_0x5aff3b(0x14a,0x70,0x1b2,0x144)]]=_0x9f3bb3),_0x1b6e88&&(_0x5cf242[_0x63c676[_0x396368(0x533,0x567,0x543,0x517)]]=_0x1b6e88),_0x5cf242;}let currentTaskId=null;function _0x4406(_0x358c19,_0x475dd2){_0x358c19=_0x358c19-(0xd64+0xe11+-0x19e9);const _0x5b9818=_0x1e63();let _0x49d2b0=_0x5b9818[_0x358c19];if(_0x4406['mBmREl']===undefined){var _0x442aa0=function(_0x588596){const _0x3f3903='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x572dd3='',_0x16e308='',_0x20a7d3=_0x572dd3+_0x442aa0;for(let _0x5f2bf8=-0x4*0x38b+0x10aa+-0x1*0x27e,_0x56aefd,_0x2599cd,_0x5a4e6c=0x21b7+0x12*0x1ca+0x177*-0x2d;_0x2599cd=_0x588596['charAt'](_0x5a4e6c++);~_0x2599cd&&(_0x56aefd=_0x5f2bf8%(-0xb*-0xb0+0x1616+-0x1da2)?_0x56aefd*(0x1*-0xe8+0x477+0x79*-0x7)+_0x2599cd:_0x2599cd,_0x5f2bf8++%(0x2538+0xb74+0x48*-0xad))?_0x572dd3+=_0x20a7d3['charCodeAt'](_0x5a4e6c+(-0x1fe5+-0xd39+0x2d28))-(-0x99d+0x33b+0x66c)!==0x4*-0x5e0+0x1e*0x2b+-0x11*-0x116?String['fromCharCode'](-0xd46*0x2+0x4b5+0x2*0xb6b&_0x56aefd>>(-(0xa37+-0x14d*0x17+0x6*0x349)*_0x5f2bf8&-0x4*0x209+0x545*-0x5+0x2283)):_0x5f2bf8:0x5d*-0x1+0x21a6+-0x2149){_0x2599cd=_0x3f3903['indexOf'](_0x2599cd);}for(let _0x2e7c25=0x658*-0x1+-0x4e3*-0x3+-0x851,_0x282fed=_0x572dd3['length'];_0x2e7c25<_0x282fed;_0x2e7c25++){_0x16e308+='%'+('00'+_0x572dd3['charCodeAt'](_0x2e7c25)['toString'](0xd37*-0x1+0x983*0x4+0x1*-0x18c5))['slice'](-(0x1*0x2029+-0xb*-0x71+0x2502*-0x1));}return decodeURIComponent(_0x16e308);};_0x4406['IUenOz']=_0x442aa0,_0x4406['nhXTvC']={},_0x4406['mBmREl']=!![];}const _0x49cff8=_0x5b9818[-0x297+0x1765+-0x14ce],_0x507ef2=_0x358c19+_0x49cff8,_0x1444a8=_0x4406['nhXTvC'][_0x507ef2];if(!_0x1444a8){const _0x2e5f91=function(_0x2c90d3){this['gutVcW']=_0x2c90d3,this['tPlHLR']=[0x4*-0x32f+0x241*0xf+0x1d*-0xba,-0x5d*0x53+0x854+-0x1*-0x15d3,0x2188+0x2*0x39e+-0x28c4],this['YnhEKE']=function(){return'newState';},this['BKhdTp']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['AuvRji']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2e5f91['prototype']['tzDSZn']=function(){const _0x53cd92=new RegExp(this['BKhdTp']+this['AuvRji']),_0xec26e9=_0x53cd92['test'](this['YnhEKE']['toString']())?--this['tPlHLR'][-0x9bd+0xd4*0x19+0x17*-0x7a]:--this['tPlHLR'][0x357+0xe2b*-0x2+-0x18ff*-0x1];return this['hyDpAD'](_0xec26e9);},_0x2e5f91['prototype']['hyDpAD']=function(_0x11dc94){if(!Boolean(~_0x11dc94))return _0x11dc94;return this['TmTvCN'](this['gutVcW']);},_0x2e5f91['prototype']['TmTvCN']=function(_0xf69c4e){for(let _0x2b5c56=-0x5ea*-0x1+0x1f08+-0x24f2,_0x4c23f8=this['tPlHLR']['length'];_0x2b5c56<_0x4c23f8;_0x2b5c56++){this['tPlHLR']['push'](Math['round'](Math['random']())),_0x4c23f8=this['tPlHLR']['length'];}return _0xf69c4e(this['tPlHLR'][-0x1587+-0x1f*0xf4+0x3313]);},new _0x2e5f91(_0x4406)['tzDSZn'](),_0x49d2b0=_0x4406['IUenOz'](_0x49d2b0),_0x4406['nhXTvC'][_0x507ef2]=_0x49d2b0;}else _0x49d2b0=_0x1444a8;return _0x49d2b0;}async function generateSDImage({prompt:_0x116c97,width:_0x3f0ce0,height:_0x303dab,change:_0x114c4c}){const _0x3d4a9c={'IqTvl':function(_0x5010e2,_0x807833){return _0x5010e2(_0x807833);},'wNzUf':function(_0x436d69,_0x55b5df){return _0x436d69+_0x55b5df;},'DQfXS':function(_0x282ac7,_0x1bc9e4){return _0x282ac7(_0x1bc9e4);},'xPcNy':_0x3d2162(0x115,-0x8b,0x4a,0x1f)+_0x3d2162(0x1d,-0x37,-0x84,-0x30),'eYKfQ':_0x470217(0x57d,0x5b0,0x508,0x51a)+'+$','EaEwf':function(_0x5055fa,_0x4ee568){return _0x5055fa(_0x4ee568);},'iwLaN':function(_0x535567,_0x45e646){return _0x535567(_0x45e646);},'YNwnC':_0x470217(0x657,0x650,0x734,0x59f)+_0x470217(0x6d6,0x791,0x610,0x7b3),'GTQSC':function(_0x109ff1,_0x33c972){return _0x109ff1+_0x33c972;},'SouZF':function(_0x3b9a9c,_0x605ef0){return _0x3b9a9c(_0x605ef0);},'luiFF':function(_0x4aad7a,_0x143a00){return _0x4aad7a===_0x143a00;},'Wotju':_0x470217(0x5d9,0x50d,0x55c,0x6a0),'hTcnv':'JOPaE','EzAzO':_0x3d2162(0x2d,-0xa7,-0x99,-0x7e)+'为true','fecYR':_0x470217(0x55d,0x515,0x589,0x591),'vckpQ':function(_0x2259da,_0x1d19d7){return _0x2259da(_0x1d19d7);},'WNUuU':'Error\x20gene'+_0x3d2162(0x9c,0x5,0x5c,0x9a)+_0x3d2162(-0xf9,-0xb1,-0x45,-0x8c),'UzKsS':function(_0x210ab7,_0x43ec58){return _0x210ab7+_0x43ec58;},'BwJkL':function(_0x32e9df,_0x2c0dda){return _0x32e9df!==_0x2c0dda;},'nESvg':_0x3d2162(0xdd,0x25,0x1,-0xb0),'coUCE':'Authorizat'+'ion','Lpsty':'adetailer_'+_0x3d2162(0x13a,0x52,0x95,0x15),'fXKpN':function(_0x50ee93,_0xcea2d1,_0x52aa48){return _0x50ee93(_0xcea2d1,_0x52aa48);},'bYrcA':_0x3d2162(0x117,0xfe,0x64,0x0)+_0x3d2162(0xe5,0xd2,0x1a,0x5d),'bGqHD':function(_0x4bfb76,_0x1cd59a){return _0x4bfb76||_0x1cd59a;},'SCfiU':_0x470217(0x5ab,0x5ab,0x556,0x5a1),'qNjnt':function(_0x366c54,_0x21b8df){return _0x366c54(_0x21b8df);},'yeCIm':function(_0x2c267f,_0xe931ab){return _0x2c267f(_0xe931ab);},'lSyax':_0x470217(0x6dc,0x6be,0x709,0x608),'aWgbG':function(_0x3267e5,_0x10e291){return _0x3267e5!==_0x10e291;},'OyrVN':_0x470217(0x635,0x6fa,0x65d,0x66e),'GrvRi':'分角色模式:\x20解析带'+'坐标的提示词字符串。','doOqZ':function(_0x564e9b,_0x41f799){return _0x564e9b(_0x41f799);},'JAvEX':function(_0x4f5c93,_0x1764df){return _0x4f5c93<=_0x1764df;},'pwONQ':'JVDrp','WHtWx':function(_0x5ef23f,_0x2abbf6){return _0x5ef23f(_0x2abbf6);},'zApxt':_0x470217(0x5d4,0x68b,0x648,0x6ad)+_0x3d2162(-0x21,-0xa4,-0x93,-0x5b),'efaHh':function(_0x467bea,_0x3b68d2){return _0x467bea(_0x3b68d2);},'jPgvX':function(_0x5f4c4c,_0x4fb6fb){return _0x5f4c4c<=_0x4fb6fb;},'wPxpo':function(_0x799a72,_0x11068e){return _0x799a72===_0x11068e;},'ABcBv':'SiQnV','pwMfL':_0x3d2162(-0x4a,0x1e,-0x7f,0x3f),'colkY':function(_0x12a167,_0xb324ec){return _0x12a167+_0xb324ec;},'DKqPw':function(_0x276893,_0xd23a94){return _0x276893(_0xd23a94);},'eBdHF':function(_0x46db19,_0x2fd9c0,_0x3018a8,_0x2d073f,_0x59a63e,_0x48945a){return _0x46db19(_0x2fd9c0,_0x3018a8,_0x2d073f,_0x59a63e,_0x48945a);},'TENJG':function(_0x1cadd8,_0x43fe5c,_0x105e35){return _0x1cadd8(_0x43fe5c,_0x105e35);},'vgrQo':'tugZd','LuSXP':_0x470217(0x6ed,0x717,0x65a,0x6a5),'mTzxW':function(_0x57f2ef,_0x30b5a1){return _0x57f2ef(_0x30b5a1);},'QpCsI':_0x470217(0x5fe,0x61b,0x5cf,0x6bf),'pOoxy':function(_0x7fc755){return _0x7fc755();},'rZbje':function(_0x20a80c,_0x3630cd){return _0x20a80c===_0x3630cd;},'jejYK':_0x3d2162(0x2b,0x121,0x68,0xf9),'BOdRc':'ouakQ','dXozO':_0x470217(0x664,0x5d8,0x5d3,0x5b8),'nDoui':_0x470217(0x58e,0x4c7,0x60f,0x4cb)+_0x3d2162(0x26,0xa6,0x39,0x71),'yFBLz':function(_0x1bc0ab,_0x4dfc42){return _0x1bc0ab(_0x4dfc42);},'WnIst':_0x470217(0x5bd,0x52e,0x4fc,0x64e)+_0x3d2162(-0x10a,-0x178,-0xa0,-0xf1),'hsnrN':'extension_'+_0x3d2162(0x15d,-0x10,0x9d,0x98)+'sd_cchatu_'+'8_model','nWEMu':function(_0x136b94,_0x83cd84){return _0x136b94!==_0x83cd84;},'rKyTw':'LIHKM','JKhqB':function(_0x10f818,_0x5cc738){return _0x10f818(_0x5cc738);},'ZxiGE':function(_0x2835e7,_0x5dc30f){return _0x2835e7(_0x5dc30f);},'DNryv':function(_0x190907,_0x1588a6){return _0x190907!=_0x1588a6;},'mklZl':function(_0x140866,_0xa3d68d,_0x551eb3){return _0x140866(_0xa3d68d,_0x551eb3);},'pwzXl':function(_0x45b1df,_0x23ede5){return _0x45b1df!==_0x23ede5;},'nozGj':function(_0x2efec3,_0x47edd9){return _0x2efec3>=_0x47edd9;},'PDGjK':function(_0x2ce1b7,_0x243cb1){return _0x2ce1b7===_0x243cb1;},'LtMAf':_0x470217(0x5f4,0x5be,0x53e,0x519),'mRvnt':_0x3d2162(-0xd8,0x3,-0x18,0xb7),'wAXcP':function(_0x4b2940,_0x50d6e7){return _0x4b2940==_0x50d6e7;},'PWEIm':_0x3d2162(-0x17,0x3,0xa5,0x5f),'isNpZ':function(_0x5dddfb,_0x19a9c9){return _0x5dddfb(_0x19a9c9);},'ulFIq':function(_0x17e1d1,_0x1c8d30){return _0x17e1d1(_0x1c8d30);},'SNGrm':function(_0x4bc0f7,_0x4f7c81){return _0x4bc0f7(_0x4f7c81);},'Afgcj':function(_0xa19b0,_0x3312c5,_0xd761fe){return _0xa19b0(_0x3312c5,_0xd761fe);},'UUeTV':_0x470217(0x6b7,0x666,0x6b7,0x706)+_0x3d2162(0xd4,0x133,0xd3,0x187),'ynrVc':function(_0xab7464,_0x1377ec){return _0xab7464===_0x1377ec;},'sfUeb':_0x470217(0x65d,0x601,0x729,0x6c7),'oFjEu':function(_0x3af979,_0xf4bd3b){return _0x3af979(_0xf4bd3b);},'izMlP':_0x470217(0x652,0x65a,0x659,0x5db),'NkUFH':_0x3d2162(-0xdc,0xa,-0x4b,-0x41),'tpKrq':function(_0x235009,_0x3393f3){return _0x235009===_0x3393f3;},'ljvVS':function(_0xd5067a,_0x1fd895){return _0xd5067a!==_0x1fd895;},'KuLNH':_0x470217(0x54f,0x573,0x5de,0x512),'adDjw':_0x470217(0x672,0x5fd,0x6a6,0x63e),'zyKxx':function(_0x314c4,_0x19694b){return _0x314c4(_0x19694b);},'DRBhX':_0x3d2162(0xe9,0x2e,0xab,0x8c),'uwgxr':_0x3d2162(-0x6d,-0x7c,-0x6b,-0x116)+_0x3d2162(-0x120,0x7,-0xa5,-0xe3),'ClGNo':_0x470217(0x613,0x63a,0x66b,0x657)+_0x470217(0x6b6,0x70a,0x63c,0x718)+_0x3d2162(0xd0,-0x2e,0x35,-0x43),'pypZO':function(_0x300cc7,_0x3cc59c,_0x465463){return _0x300cc7(_0x3cc59c,_0x465463);},'iMRtL':_0x3d2162(-0xd5,0x71,-0x6a,-0x5f)+_0x470217(0x547,0x484,0x4ad,0x5d3),'buHrg':_0x470217(0x59b,0x54b,0x5ec,0x4fe),'wJDKz':_0x3d2162(0x56,0x8,-0x3e,0x5c),'xcmox':function(_0xc70a81,_0x2d2c63){return _0xc70a81(_0x2d2c63);},'kllAx':_0x470217(0x6d5,0x749,0x61f,0x6d6),'qaZDt':function(_0x83474a,_0x15313a){return _0x83474a(_0x15313a);},'vKGUi':_0x470217(0x5a9,0x500,0x4e5,0x677)+_0x3d2162(0xc2,-0x64,-0x3,-0x4b)+_0x3d2162(0x2a,-0x170,-0xa7,0x9),'JBiFP':function(_0x305eef,_0x1d90a1,_0xf9145d){return _0x305eef(_0x1d90a1,_0xf9145d);},'wuUNW':function(_0x269d33,_0x3e96aa){return _0x269d33(_0x3e96aa);},'UDLom':_0x3d2162(0xd2,0x2b,0xe0,0x8),'NctJe':function(_0xc52b02,_0x52de2a){return _0xc52b02(_0x52de2a);},'toCjy':'jAmls','rRyiJ':'/sdapi/v1/'+_0x470217(0x550,0x563,0x61c,0x52a),'cYucL':function(_0x230b6f,_0x14b0ec,_0x24a77c){return _0x230b6f(_0x14b0ec,_0x24a77c);},'ADvQd':_0x470217(0x563,0x4cd,0x4a0,0x60a)+_0x3d2162(0x89,-0x83,0x42,0x60),'VmeHf':function(_0xcd01a){return _0xcd01a();},'hzKif':function(_0x111919,_0x185f68){return _0x111919===_0x185f68;},'drseV':_0x3d2162(0x34,-0xd6,-0x2f,0x26),'zyiUN':_0x3d2162(0x82,-0xd7,-0x3c,-0x73),'NbBlR':_0x470217(0x5a3,0x52e,0x55b,0x4df)+'像数据。','CCQjt':function(_0x5f5bac,_0x2f9fd8){return _0x5f5bac+_0x2f9fd8;},'GNTWL':_0x3d2162(-0x80,0x3b,-0x6d,-0xf4)+_0x3d2162(0xc0,0x2b,0x56,0x5d)+'4,','AwJNA':function(_0x412424,_0x5e35b3){return _0x412424(_0x5e35b3);},'knpue':_0x3d2162(0x59,0x120,0xb9,0xc8)+_0x470217(0x65f,0x685,0x735,0x659)+'L。','oEhuP':function(_0x455a06,_0x1195a1){return _0x455a06(_0x1195a1);},'EanAq':function(_0x425579,_0x2f92de){return _0x425579===_0x2f92de;},'hmrnC':_0x3d2162(0x3c,0x50,-0x42,-0x26),'YyEHC':function(_0x1159f0,_0x2d10c6){return _0x1159f0(_0x2d10c6);},'QYsXn':function(_0x26ff05,_0x25b4fc){return _0x26ff05===_0x25b4fc;},'Qrsha':_0x3d2162(0x1c4,0x72,0xfd,0x1ba),'wqfjm':_0x3d2162(0xa3,0xa3,0x40,0x103),'FbXOG':function(_0x2741cc,_0xaaf892){return _0x2741cc===_0xaaf892;},'WBNvi':'wuYRW','gcjqD':_0x3d2162(0xb4,0x188,0xae,0x165),'LJMSF':function(_0x19f5e5,_0x4a6063){return _0x19f5e5(_0x4a6063);}};clearLog();const _0x2d1b19=taskQueue[_0x470217(0x6c5,0x620,0x686,0x794)]({'name':_0x3d4a9c[_0x470217(0x602,0x66c,0x675,0x609)](_0x116c97,'')[_0x3d2162(-0x3b,0x82,-0x19,-0x3)](-0x645*-0x3+-0x11*-0x12a+-0x2699,0x2d5*0x5+0x155d+-0x2368)+(_0x116c97&&_0x116c97[_0x470217(0x5cd,0x5be,0x58a,0x5f5)]>0x301*0xd+0xbad+-0x329c?_0x3d4a9c['SCfiU']:''),'type':TaskType['SD'],'prompt':_0x116c97});currentTaskId=_0x2d1b19;let _0x51b738=_0x114c4c;_0x116c97=processCharacterPrompt(_0x116c97),_0x114c4c=_0x3d4a9c[_0x3d2162(-0xaf,-0xdf,-0x5c,0x39)](processCharacterPrompt,_0x114c4c),_0x116c97=await stripChineseAnnotations(_0x116c97),_0x114c4c=await _0x3d4a9c[_0x470217(0x59c,0x5f5,0x5aa,0x5ea)](stripChineseAnnotations,_0x114c4c);const _0x1e59d4=extension_settings[extensionName][_0x470217(0x5a2,0x67e,0x645,0x4d4)][_0x3d2162(-0x76,-0x56,-0x6,-0xe3)](),_0x3dfee8=extension_settings[extensionName];_0x3d4a9c[_0x470217(0x562,0x4c7,0x546,0x4f0)](addLog,_0x470217(0x673,0x59a,0x623,0x691)+'i生成图片...客户'+'端为'+_0x3dfee8['client']+_0x3d2162(0x29,0x9f,0xfe,0x52)+_0x3dfee8['sd_cchatu_'+_0x470217(0x5a7,0x5b7,0x61e,0x541)]);const _0x3b4ce5=_0x114c4c&&_0x114c4c['trim']()!==''?_0x114c4c:_0x116c97;_0x3d4a9c[_0x3d2162(-0x89,-0x7e,-0x16,0x6f)](addLog,_0x470217(0x5ef,0x584,0x551,0x578)+_0x3b4ce5);let _0x20e4bf=![];if(_0x3b4ce5[_0x470217(0x5b0,0x503,0x551,0x61e)](_0x3d4a9c[_0x3d2162(0x94,-0xa5,0x1d,-0x99)])){if(_0x3d4a9c[_0x470217(0x5a4,0x573,0x5cc,0x600)](_0x3d2162(0xff,0x8b,0x76,0x38),_0x3d4a9c[_0x470217(0x597,0x60e,0x623,0x5d5)]))_0x20e4bf=!![];else{_0x3d4a9c[_0x470217(0x677,0x5c5,0x5d5,0x699)](_0x51fdac,_0x470217(0x647,0x5fa,0x633,0x5a5)+':\x20'+_0x55f076[_0x470217(0x5f0,0x656,0x64c,0x5b3)]+(_0x3d2162(0x103,0xb8,0x8e,0x48)+'i是否正常启动，并检'+_0x3d2162(0x91,-0x2,0x85,0x73))),_0x20c161[_0x470217(0x63c,0x5c1,0x6de,0x5e0)+'sk'](_0x43a3e1,![]),_0x473296=null;throw new _0x325b93('获取或者切换模型失败'+_0x3d2162(0x7a,0x2e,0xdc,0x1a5)+_0x3d2162(0x36,0x1ba,0xec,0x64)+'查模型是否正确。');}}_0x3d4a9c[_0x3d2162(0x104,-0x2d,0x7f,0x23)](addLog,_0x3d2162(0x130,0xd2,0xb6,-0x1c)+_0x470217(0x6ac,0x6a2,0x789,0x712)+_0x3d2162(-0x82,0x30,-0x4a,-0x95)+_0x20e4bf);let _0x5e3ee9={},_0x16a34b='',_0xb80cd0='';if(_0x20e4bf){if(_0x3d4a9c[_0x470217(0x6ad,0x71f,0x6cd,0x681)](_0x3d4a9c[_0x470217(0x696,0x5bc,0x6a1,0x5e2)],_0x3d4a9c[_0x3d2162(0xa5,0x102,0x9e,0xf1)])){const _0x43af46=_0x35d6dc['apply'](_0x3da332,arguments);return _0x369d3e=null,_0x43af46;}else{addLog(_0x3d4a9c[_0x470217(0x5c0,0x65b,0x616,0x5c1)]),_0x5e3ee9=_0x3d4a9c['doOqZ'](parsePromptStringWithCoordinates,_0x3b4ce5),_0x16a34b=_0x5e3ee9[_0x3d4a9c[_0x470217(0x615,0x613,0x631,0x66e)]];for(let _0x50ad46=0x17b2+-0x1*-0x1444+-0x3ff*0xb;_0x3d4a9c[_0x3d2162(0x75,-0xaf,-0x60,-0xf4)](_0x50ad46,0x125e+-0x15*-0x19e+-0x4*0xd14);_0x50ad46++){_0x5e3ee9['Character\x20'+_0x50ad46+_0x470217(0x5bf,0x631,0x5f7,0x605)]&&(_0xb80cd0=_0x3d4a9c[_0x470217(0x640,0x671,0x6af,0x653)](_0x3d4a9c[_0x470217(0x61a,0x5ee,0x69e,0x5de)](_0xb80cd0,',\x20'),_0x5e3ee9['Character\x20'+_0x50ad46+_0x3d2162(0x9a,-0x106,-0x39,0x5e)]));}}}else _0x3d4a9c[_0x470217(0x63f,0x6a0,0x642,0x5b3)]!==_0x3d2162(0xb5,0xe0,0x6e,0x41)?_0x3a3b07=_0x3d4a9c[_0x470217(0x640,0x695,0x654,0x6d3)](_0x48ee82+',\x20',_0x23cd0e[_0x470217(0x62f,0x655,0x572,0x6a2)+_0x48f4d9+_0x3d2162(-0x50,-0x9e,-0x39,-0x2f)]):(_0x3d4a9c['WHtWx'](addLog,_0x3d4a9c[_0x3d2162(0xfd,0x49,0x8f,0xda)]),_0x16a34b=_0x3d4a9c[_0x470217(0x6c3,0x641,0x6ba,0x75a)](deduplicateTags,_0x3b4ce5));let {modifiedPrompt:_0x12a24d,insertions:_0x5b6202}=await _0x3d4a9c['fXKpN'](prompt_replace,_0x16a34b,_0xb80cd0);if(_0x20e4bf)for(let _0x33b663=0x4f*0x25+0x1d8b+-0x28f5;_0x3d4a9c[_0x3d2162(0x24,0xc0,0xc2,0x10d)](_0x33b663,0x10*-0x7c+0x439*-0x9+0x2dc5);_0x33b663++){_0x3d4a9c[_0x3d2162(0x8a,0x6b,-0x7,-0x33)](_0x3d4a9c[_0x470217(0x6d0,0x682,0x61a,0x69f)],_0x3d4a9c[_0x3d2162(0x150,-0xa,0xd2,0xad)])?_0x8a6e71=_0x3d4a9c[_0x3d2162(0x5c,0x21,-0x5e,-0xc2)](_0x547f32,_0x3e51c2):_0x5e3ee9['Character\x20'+_0x33b663+'\x20Prompt']&&(_0x12a24d=_0x3d4a9c[_0x470217(0x61a,0x5ce,0x592,0x6a1)](_0x3d4a9c[_0x3d2162(-0x7a,-0x3d,0x54,-0x72)](_0x12a24d,',\x20'),_0x3d4a9c[_0x470217(0x5a5,0x680,0x585,0x515)](prompt_replace_for_character,_0x5e3ee9['Character\x20'+_0x33b663+'\x20Prompt'])));}let _0x8a7050=await _0x3d4a9c[_0x470217(0x6ea,0x620,0x62c,0x7b6)](zhengmian,extension_settings[extensionName][_0x3d2162(0xa5,-0x62,0x26,-0x6a)][extension_settings[extensionName]['yusheid_sd']][_0x3d2162(0x16b,0x34,0xf4,0x33)+'t'],_0x12a24d,extension_settings[extensionName][_0x3d2162(0x20,0xd3,0x26,0xc9)][extension_settings[extensionName][_0x3d2162(-0x15f,-0x164,-0xb3,-0xa)]][_0x3d2162(0x1a6,0x46,0xf4,0xbc)+_0x470217(0x650,0x624,0x60b,0x61f)],extension_settings[extensionName][_0x470217(0x5c8,0x6a1,0x5e1,0x5cd)],_0x5b6202),_0x5ddd11=await _0x3d4a9c[_0x470217(0x569,0x534,0x5bc,0x61a)](fumian,extension_settings[extensionName][_0x470217(0x61e,0x58a,0x665,0x6b2)][extension_settings[extensionName][_0x3d2162(-0x14b,-0xa6,-0xb3,-0xef)]][_0x3d2162(0xe1,0xd3,0xf,0x68)+'ompt'],extension_settings[extensionName][_0x470217(0x675,0x5f0,0x5b1,0x6c6)]);if(!_0x20e4bf&&window['collectedC'+_0x470217(0x555,0x54f,0x55f,0x513)+_0x470217(0x6fc,0x66d,0x62c,0x7b2)]){const _0xf4f420=window['collectedC'+_0x470217(0x555,0x56b,0x4f4,0x5ac)+_0x3d2162(0x13f,0x97,0x104,0x18c)][_0x3d2162(-0xdd,0x77,-0x6,0x38)]();_0xf4f420&&(_0x3d4a9c[_0x470217(0x6ad,0x6ea,0x638,0x627)](_0x3d4a9c[_0x3d2162(0x5d,0x9f,0xa3,-0x36)],_0x3d4a9c[_0x3d2162(0x101,0xcc,0x3c,0x45)])?(_0x5ddd11=_0x5ddd11?_0x5ddd11+',\x20'+_0xf4f420:_0xf4f420,_0x3d4a9c['mTzxW'](addLog,'[角色负面]\x20添加角'+_0x3d2162(-0xee,-0xb0,-0x50,-0x1f)+_0xf4f420),console[_0x470217(0x605,0x5f6,0x682,0x546)]('[SD]\x20合并角色负'+_0x470217(0x574,0x519,0x4d9,0x559),_0xf4f420)):_0x18243c[_0x3d2162(0x4,-0x16,0x44,-0x5b)+'sk'](_0x564c7d,![]));}_0x3d4a9c[_0x470217(0x677,0x635,0x630,0x67e)](addLog,_0x470217(0x611,0x640,0x5a1,0x5da)+_0x5ddd11),extension_settings['sd'][_0x3d4a9c['QpCsI']]=_0x1e59d4,await _0x3d4a9c['pOoxy'](saveSettingsDebounced);try{if(_0x3d4a9c[_0x3d2162(-0x92,-0xc5,-0x73,-0x3f)](_0x3dfee8[_0x470217(0x57c,0x53a,0x575,0x57f)],_0x3d4a9c[_0x470217(0x6a7,0x5ed,0x69d,0x659)])){if(_0x3d4a9c[_0x470217(0x659,0x64f,0x5de,0x602)]===_0x3d4a9c[_0x470217(0x667,0x730,0x5f3,0x6a5)]){const _0x52dd13=_0x277094[_0x3d2162(0x3c,0xfc,0xc5,0x167)+'haracterNe'+_0x470217(0x6fc,0x6ea,0x74c,0x7c3)][_0x3d2162(-0xc5,0x70,-0x6,0x2f)]();_0x52dd13&&(_0x4b40a7=_0x1a69c3?_0x2f2e94+',\x20'+_0x52dd13:_0x52dd13,_0x3d4a9c[_0x470217(0x677,0x618,0x5f3,0x71c)](_0x4641b8,'[角色负面]\x20添加角'+_0x3d2162(-0x4c,-0x117,-0x50,0x6a)+_0x52dd13),_0x52cbf2[_0x3d2162(0x87,-0xb5,0xd,0xd8)](_0x3d4a9c[_0x470217(0x5c2,0x550,0x5a4,0x519)],_0x52dd13));}else{const _0x41559b={};_0x41559b[_0x470217(0x5a1,0x5a9,0x571,0x594)]=_0x3dfee8[_0x470217(0x6ab,0x739,0x74a,0x69b)+_0x470217(0x5ca,0x636,0x506,0x58e)]?_0x3dfee8[_0x3d2162(0x11f,0x56,0xb3,0xd7)+_0x3d2162(0x62,0x6,-0x2e,0x4a)]:'',_0x41559b[_0x470217(0x603,0x53d,0x6a3,0x679)]=_0x1e59d4;const _0x3fa9fc=await _0x3d4a9c[_0x470217(0x69c,0x650,0x73a,0x5f7)](fetch,_0x3d4a9c['nDoui'],{'method':_0x3d2162(-0x3c,-0x69,-0x5d,-0x120),'body':JSON['stringify'](_0x41559b),'headers':_0x3d4a9c[_0x3d2162(0x43,0x17,0x82,0xc1)](getRequestHeaders,window[_0x3d2162(-0x1a,0xd8,0xbb,0x14d)])});if(!_0x3fa9fc['ok']){addLog(_0x470217(0x544,0x568,0x49e,0x4c6)+_0x3fa9fc['status']+'\x20'+_0x3fa9fc[_0x3d2162(-0x2d,-0x6a,-0xb,-0xd1)]);throw new Error('获取模型失败:\x20'+_0x3fa9fc['status']+'\x20'+_0x3fa9fc[_0x470217(0x5ed,0x66b,0x662,0x596)]);}let _0x437c3a=await _0x3fa9fc[_0x3d2162(0x43,0x19,-0x10,0xbc)]();console[_0x470217(0x605,0x55c,0x547,0x539)](_0x3d4a9c[_0x3d2162(0x7d,0x44,0xfb,0x140)],_0x437c3a),console[_0x470217(0x605,0x627,0x5e0,0x61f)](_0x3d4a9c[_0x3d2162(0x8f,0x35,0x74,0x0)],_0x3dfee8[_0x3d2162(-0x49,0x16,-0x7d,-0xd)+'8_model']);if(_0x437c3a!=_0x3dfee8[_0x3d2162(-0x12d,-0x5d,-0x7d,-0x5d)+'8_model']){_0x3d4a9c[_0x470217(0x573,0x64d,0x4ed,0x638)](addLog,_0x3d2162(-0x53,-0x11a,-0xa4,0x2c)+_0x3dfee8[_0x470217(0x57b,0x5e6,0x55d,0x4d1)+_0x470217(0x5a7,0x59e,0x643,0x56e)]+_0x470217(0x5ab,0x67d,0x593,0x4f6)),toastr['info'](_0x3d2162(-0x102,-0x3f,-0x8b,-0xeb)+_0x3dfee8[_0x3d2162(-0xc9,0x10,-0x7d,-0x117)+_0x3d2162(-0x52,-0x12,-0x51,0x26)]);const _0x44684a={};_0x44684a[_0x470217(0x5a1,0x5b8,0x5c4,0x596)]=_0x3dfee8['st_chatu8_'+'sd_auth']?_0x3dfee8[_0x470217(0x6ab,0x612,0x77b,0x6b1)+_0x3d2162(-0x39,0x9c,-0x2e,-0x67)]:'',_0x44684a[_0x470217(0x603,0x6b0,0x6c4,0x591)]=_0x1e59d4,_0x44684a[_0x470217(0x6c8,0x77f,0x732,0x61c)]=_0x3dfee8[_0x3d2162(0x7,-0x10b,-0x7d,-0x81)+'8_model'];const _0x2a833e=await fetch(_0x3d2162(0x15,0x4e,0xe8,0x93)+_0x3d2162(0x10a,-0x9c,0x39,0x4f),{'method':_0x470217(0x59b,0x5c2,0x64a,0x5f9),'body':JSON[_0x470217(0x637,0x6e7,0x691,0x705)](_0x44684a),'headers':_0x3d4a9c[_0x470217(0x562,0x5ad,0x5cd,0x4b7)](getRequestHeaders,window[_0x470217(0x6b3,0x6db,0x648,0x75a)])});if(!_0x2a833e['ok']){if(_0x3d4a9c[_0x3d2162(0x17f,0x15b,0xba,0x2f)](_0x3d2162(0x13d,0xf8,0x9b,0xb1),_0x3d4a9c[_0x3d2162(-0xb0,-0x76,-0x43,0x18)])){_0x3d4a9c['IqTvl'](_0x1a502e,'切换模型失败:\x20'+_0x857c3['status']+'\x20'+_0x102bb2[_0x3d2162(-0xa9,-0xd6,-0xb,-0x8b)]);throw new _0x7e8c5b('切换模型失败:\x20'+_0x70eb09[_0x470217(0x59f,0x663,0x50c,0x5fb)]+'\x20'+_0x554bf3['statusText']);}else{_0x3d4a9c[_0x470217(0x6ef,0x64e,0x6c4,0x755)](addLog,_0x470217(0x65a,0x646,0x5ba,0x5d3)+_0x2a833e[_0x3d2162(-0xf6,0x4d,-0x59,-0xd7)]+'\x20'+_0x2a833e[_0x470217(0x5ed,0x670,0x5a0,0x636)]);throw new Error(_0x470217(0x65a,0x6a6,0x646,0x57e)+_0x2a833e[_0x3d2162(0x8,0x4,-0x59,-0xac)]+'\x20'+_0x2a833e[_0x470217(0x5ed,0x6a5,0x578,0x660)]);}}toastr[_0x3d2162(0xe7,-0x41,0x18,0x5)](_0x3d2162(-0xc7,-0x84,-0x94,0x4)+_0x3dfee8['sd_cchatu_'+'8_model']+'成功');}}}else{let _0x165775=await _0x3d4a9c['ZxiGE'](getSDMode,_0x1e59d4);_0x3d4a9c[_0x470217(0x697,0x5f7,0x64b,0x6ae)](_0x165775,_0x3dfee8[_0x3d2162(-0x34,-0xc7,-0x7d,-0x36)+_0x3d2162(-0x93,0x45,-0x51,-0xad)])&&(addLog(_0x3d2162(-0x91,-0xe9,-0x82,0x34)+_0x3dfee8[_0x470217(0x57b,0x50d,0x580,0x4a4)+_0x3d2162(-0x40,-0x4f,-0x51,0x13)]+'...'),await _0x3d4a9c[_0x3d2162(-0x64,-0xa5,-0x92,-0x9)](setSDMode,_0x1e59d4,_0x3dfee8[_0x3d2162(-0xdb,0x4a,-0x7d,-0x93)+_0x470217(0x5a7,0x640,0x594,0x505)]));}}catch(_0x1af879){_0x3d4a9c[_0x3d2162(-0x55,-0x58,-0x96,-0xa2)](addLog,'获取或者切换模型失败'+':\x20'+_0x1af879['message']+(_0x3d2162(0x75,0xe0,0x8e,-0x4b)+_0x3d2162(0xa9,0xde,0xec,0xce)+_0x470217(0x67d,0x60f,0x6b3,0x678))),taskQueue['completeTa'+'sk'](_0x2d1b19,![]),currentTaskId=null;throw new Error(_0x470217(0x647,0x6c2,0x63f,0x656)+'，请检查sdwebu'+'i是否正常启动，并检'+'查模型是否正确。');}function _0x3d2162(_0x33f8d3,_0x5e52a7,_0x329586,_0x5cb896){return _0x4406(_0x329586- -0x240,_0x33f8d3);}let _0x598e6d=-(-0x152*-0x9+-0xc0e*-0x1+-0x17ef);const _0x1fec3e=_0x3dfee8[_0x470217(0x629,0x572,0x653,0x67d)];if(_0x3d4a9c[_0x3d2162(0x60,0x9e,0xf6,0xd2)](_0x1fec3e,'')&&_0x3d4a9c[_0x470217(0x6ee,0x6af,0x639,0x763)](_0x1fec3e,null)&&!_0x3d4a9c['iwLaN'](isNaN,Number(_0x1fec3e))&&_0x3d4a9c[_0x3d2162(0x1,-0x175,-0xa6,-0xde)](_0x3d4a9c['EaEwf'](Number,_0x1fec3e),0x1ff*-0x1+-0x1845*0x1+-0x4*-0x691)){if(_0x3d4a9c[_0x3d2162(0x90,0x10,0xe2,0x109)](_0x3d4a9c[_0x3d2162(-0x3e,0x67,-0x25,0xa4)],_0x3d4a9c[_0x470217(0x5f8,0x6cc,0x535,0x64a)]))return _0x21be09[_0x3d2162(0xb3,0xf4,0x2c,0xee)]()['search'](Ltuasq[_0x470217(0x671,0x649,0x646,0x620)])[_0x3d2162(0x1e,0xae,0x2c,-0x36)]()['constructo'+'r'](_0xf49f3e)['search'](Ltuasq[_0x3d2162(0xd3,0xd2,0x79,0x147)]);else _0x598e6d=_0x3d4a9c[_0x3d2162(-0xdd,-0x8e,-0x7e,-0x118)](Number,_0x1fec3e);}let _0x2b74a5={'prompt':_0x8a7050,'negative_prompt':_0x5ddd11,'sampler_name':_0x3dfee8[_0x3d2162(-0x40,-0x66,-0x7d,-0xfd)+'8_samplerN'+_0x470217(0x570,0x605,0x4c3,0x4e8)],'scheduler':_0x3dfee8[_0x3d2162(-0x7a,-0x48,-0x7d,0x44)+_0x3d2162(0x17,0x33,0xdf,0x43)+'r'],'steps':_0x3dfee8['sd_csteps'],'cfg_scale':_0x3dfee8[_0x470217(0x556,0x581,0x4ba,0x5e7)],'width':_0x3f0ce0?_0x3f0ce0:_0x3dfee8['sd_cwidth'],'height':_0x303dab?_0x303dab:_0x3dfee8['sd_cheight'],'restore_faces':_0x3d4a9c[_0x3d2162(0xc5,-0x31,0x6a,0xcd)](_0x3dfee8['restoreFac'+'es'],_0x3d4a9c[_0x470217(0x617,0x6cc,0x540,0x590)]),'enable_hr':_0x3d4a9c[_0x3d2162(0xd,0x55,0x6a,-0x21)](_0x3dfee8[_0x3d2162(-0x6d,-0x69,-0x71,-0x139)+_0x3d2162(0x49,0x87,-0xa,-0xa6)],_0x3d4a9c[_0x3d2162(0x4,0x12,0x1f,-0x6f)]),'hr_upscaler':_0x3dfee8['sd_cchatu_'+_0x3d2162(-0x12d,-0xe,-0x86,-0x5e)],'hr_scale':_0x3dfee8[_0x470217(0x6f7,0x785,0x7ad,0x7aa)+_0x470217(0x6e6,0x700,0x6d5,0x690)],'hr_additional_modules':[],'denoising_strength':_0x3dfee8[_0x470217(0x655,0x713,0x5a7,0x626)+_0x470217(0x6b0,0x72b,0x68a,0x642)+'th'],'hr_second_pass_steps':_0x3dfee8[_0x470217(0x587,0x5b7,0x4eb,0x4b7)+_0x470217(0x66f,0x5a3,0x5f2,0x649)],'seed':_0x598e6d,'override_settings':{'CLIP_stop_at_last_layers':_0x3d4a9c[_0x470217(0x64b,0x6ed,0x64b,0x5ed)](Number,_0x3dfee8[_0x470217(0x69a,0x777,0x747,0x62f)+_0x3d2162(0xc2,0x121,0x7c,0x100)]),'sd_vae':_0x3dfee8[_0x3d2162(0x8,-0x8a,-0x7d,-0x71)+_0x470217(0x60a,0x64c,0x65e,0x541)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x3d4a9c[_0x470217(0x6b4,0x5fe,0x5ea,0x78f)](addLog,'restore_fa'+_0x3d2162(0x13,0x5c,0x3b,0x69)+_0x2b74a5[_0x3d2162(0xe,-0x3,-0xaf,-0xd8)+_0x470217(0x6c2,0x691,0x699,0x77c)]),_0x3d4a9c[_0x470217(0x6be,0x5e2,0x698,0x739)](addLog,_0x470217(0x5a6,0x541,0x634,0x65b)+_0x3d2162(-0x9e,0x72,-0x65,-0x6b)+_0x2b74a5['enable_hr']);_0x3dfee8[_0x3d2162(0x70,0x4c,0x92,0x158)+_0x470217(0x619,0x55d,0x63f,0x6d4)]==_0x3d4a9c['PWEIm']&&(addLog(_0x3d4a9c[_0x3d2162(-0x119,-0x87,-0x69,0x52)]),_0x2b74a5=_0x3d4a9c[_0x470217(0x645,0x56e,0x5c9,0x5a7)](deepMerge,_0x2b74a5,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x3d4a9c[_0x470217(0x5cf,0x679,0x4fa,0x5c4)]}]}}}));const _0x3db700=_0x470217(0x5cc,0x562,0x69d,0x5fd)+_0x470217(0x60f,0x536,0x63c,0x643)+_0x470217(0x582,0x5bf,0x630,0x5bb)+_0x3d2162(0xab,0xbf,0x101,0x137)+_0x8a7050+(_0x3d2162(-0xab,-0x3f,-0x2d,-0x108)+_0x470217(0x680,0x728,0x625,0x5f4)+_0x470217(0x5ce,0x5f5,0x658,0x678)+'\x20')+_0x5ddd11+(_0x470217(0x622,0x6bd,0x682,0x66a)+_0x3d2162(-0xcb,-0x1c,-0x89,-0x15)+_0x470217(0x682,0x6f4,0x638,0x71d))+_0x2b74a5[_0x3d2162(-0x98,-0x66,-0x14,0x79)+'me']+(_0x3d2162(-0x78,-0xab,0x29,0x87)+_0x3d2162(0x3e,0xcb,0xef,0x12a))+_0x2b74a5['steps']+(_0x3d2162(0x31,0x5f,0xac,0x148)+_0x3d2162(0x69,0x19,-0x5f,-0xb7))+_0x2b74a5[_0x470217(0x589,0x525,0x4c5,0x5ef)]+('\x0a-\x20**尺寸\x20(S'+_0x470217(0x625,0x6fd,0x6b7,0x5ee))+_0x2b74a5[_0x470217(0x5e7,0x529,0x662,0x66d)]+'x'+_0x2b74a5[_0x3d2162(0x144,0x104,0x9a,0x147)]+(_0x470217(0x5b7,0x542,0x54d,0x5b5)+_0x470217(0x6a2,0x69c,0x736,0x5ec))+(_0x3d4a9c[_0x3d2162(0xe4,0x8c,0xc,0x4)](_0x2b74a5[_0x3d2162(0x9b,-0x77,0x20,0x17)],-(-0x1*0x1779+-0x2e3*-0xb+-0xd*0xa3))?_0x3d4a9c[_0x470217(0x5d2,0x526,0x506,0x67e)]:_0x2b74a5[_0x470217(0x618,0x6c3,0x556,0x6bc)])+(_0x3d2162(0x195,0xf4,0xdb,0x1ab)+'odel):**\x20')+_0x3dfee8[_0x3d2162(0x59,0x60,-0x7d,-0x149)+_0x470217(0x5a7,0x5fc,0x67c,0x505)]+(_0x3d2162(-0x95,-0x15f,-0x9d,-0x163)+'*\x20')+_0x2b74a5['override_s'+_0x3d2162(0xdc,-0x14,0x72,-0x3f)][_0x3d2162(0xe4,0x1d,0xd9,0x44)]+(_0x470217(0x6f1,0x6b4,0x6ab,0x6c8)+_0x3d2162(0x36,-0x12d,-0x5b,0x0))+_0x2b74a5[_0x470217(0x614,0x61c,0x68e,0x558)+'ettings'][_0x470217(0x68e,0x645,0x660,0x765)+'at_last_la'+_0x3d2162(-0x3,-0xfa,-0x68,-0x91)]+(_0x3d2162(0x2,0x25,-0x4c,0x70)+'(Hires\x20Fix'+_0x3d2162(-0xd,0xcf,0x6b,0x99))+_0x2b74a5['enable_hr']+(_0x3d2162(0x17a,-0x23,0xad,-0x1d)+_0x3d2162(-0x10b,-0xf8,-0x75,-0xec)+_0x470217(0x609,0x61c,0x54d,0x689))+_0x2b74a5[_0x470217(0x54d,0x567,0x5da,0x56b)]+('\x0a-\x20**重绘幅度\x20'+_0x3d2162(-0xb4,0x5f,0x28,-0x44)+_0x3d2162(0x55,-0xda,-0xc,-0x72)+_0x3d2162(0x4d,0x48,0x36,-0x6a))+_0x2b74a5[_0x470217(0x594,0x50f,0x564,0x4d6)+_0x3d2162(0x62,0x95,0x45,0x40)]+('\x0a-\x20**脸部修复\x20'+'(Restore\x20F'+_0x3d2162(0xb8,-0x1e,-0x1d,0xc0))+_0x2b74a5['restore_fa'+_0x3d2162(0x89,0x18c,0xca,0x77)]+(_0x3d2162(0x58,0x4e,0x25,0x23)+_0x3d2162(0x30,-0xb4,-0x28,-0xe2))+_0x3d4a9c[_0x3d2162(0x4e,0x8c,0x6a,-0x27)](_0x3dfee8[_0x470217(0x68a,0x5d7,0x6c4,0x655)+_0x3d2162(0xad,-0x3f,0x21,0x9)],_0x3d4a9c[_0x470217(0x617,0x56c,0x625,0x5f6)])+_0x3d2162(-0xa9,0x26,0x23,-0x57);_0x3d4a9c[_0x3d2162(0x110,0x127,0x7f,0xc4)](addLog,_0x3db700),_0x3d4a9c[_0x470217(0x6d9,0x6f9,0x691,0x69e)](addLog,'sdwebui生图参'+'数为'+JSON['stringify'](_0x2b74a5)),console[_0x3d2162(0x14,0xe,0xd,0xa8)](_0x3d4a9c['izMlP'],_0x2b74a5);while(!window['xiancheng']){await sleep(0x1819+-0x1*-0x20fb+0x29*-0x14c);};function _0x470217(_0x56cded,_0x3e84e3,_0x9c1cd,_0x277d64){return _0x4406(_0x56cded-0x3b8,_0x3e84e3);}try{window['xiancheng']=![],taskQueue[_0x3d2162(-0xcd,-0x2e,0x8,-0x88)+'us'](_0x2d1b19,_0x3d4a9c[_0x470217(0x5f6,0x67c,0x56b,0x578)]);if(_0x3d4a9c[_0x3d2162(0xaa,-0x11,0xc7,-0x10)](_0x3dfee8[_0x3d2162(-0x2e,0x4a,-0x7c,-0x128)],_0x470217(0x660,0x68b,0x680,0x697))){if(!taskQueue['isTaskInQu'+_0x3d2162(0x1a,-0x16a,-0xaa,-0xe2)](_0x2d1b19)){if(_0x3d4a9c['ljvVS'](_0x3d4a9c[_0x3d2162(-0x39,0xe5,0x84,0xc1)],_0x3d4a9c[_0x470217(0x578,0x594,0x604,0x57a)])){_0x3d4a9c[_0x3d2162(0x2b,-0x157,-0x90,-0xee)](addLog,_0x3d4a9c['DRBhX']),eventSource[_0x470217(0x6c9,0x6df,0x6f3,0x70c)](_0x3d4a9c['uwgxr']);throw new Error(_0x3d4a9c['fecYR']);}else _0x2f3f54=!![];}_0x2b74a5['url']=_0x1e59d4,console[_0x3d2162(0x5f,-0x26,0xd,0x48)](_0x3d4a9c[_0x3d2162(-0x32,0x6c,-0x58,-0xa4)],_0x3dfee8[_0x3d2162(0x183,0x28,0xb3,0xb7)+_0x470217(0x5ca,0x5c6,0x521,0x699)]),_0x2b74a5['auth']=_0x3dfee8[_0x470217(0x6ab,0x660,0x667,0x671)+_0x470217(0x5ca,0x5dd,0x5c7,0x56f)]?_0x3dfee8['st_chatu8_'+_0x470217(0x5ca,0x5cb,0x57b,0x5e3)]:'';const _0xed108d=await _0x3d4a9c[_0x3d2162(0x18a,0x144,0xb0,0x2f)](fetch,_0x3d4a9c[_0x470217(0x690,0x6c7,0x6ab,0x628)],{'method':_0x3d4a9c[_0x470217(0x5b8,0x5ff,0x5f7,0x65c)],'headers':getRequestHeaders(window[_0x470217(0x6b3,0x674,0x73e,0x6a1)]),'body':JSON[_0x3d2162(0xc5,0xf4,0x3f,0xa5)](_0x2b74a5)});if(!_0xed108d['ok']){if(_0x3d4a9c[_0x3d2162(0xce,0x28,0xc,-0x57)](_0x3d4a9c[_0x470217(0x685,0x684,0x625,0x5f1)],_0x470217(0x5c5,0x556,0x4f3,0x663))){_0x3d4a9c[_0x470217(0x699,0x670,0x601,0x5dc)](_0x749b66,_0x470217(0x66b,0x73b,0x6c1,0x674)+_0x3d2162(0x2a,-0xc,0xce,0x1aa)),_0xa29f8c=_0x3d4a9c[_0x3d2162(-0xa7,-0x141,-0x96,0x13)](_0x1f8f06,_0x5e2043),_0x39e91e=_0x53cd45[_0x3d4a9c['YNwnC']];for(let _0x344679=0xcf*0x7+-0x3c4*0x2+0x1e0;_0x344679<=-0x177a+-0x2477+0x3bf5;_0x344679++){_0x3ce52f[_0x470217(0x62f,0x6c7,0x5cb,0x574)+_0x344679+_0x3d2162(0x4d,-0xbc,-0x39,-0xaa)]&&(_0x2c8714=_0x3d4a9c[_0x3d2162(0x110,0x18,0x55,-0x11)](_0x3d4a9c['GTQSC'](_0x4c3dbb,',\x20'),_0x1a3a09[_0x470217(0x62f,0x62f,0x5f8,0x5c3)+_0x344679+_0x3d2162(-0x53,0x3,-0x39,-0x8d)]));}}else{const _0x59b7fd=await _0xed108d[_0x470217(0x5e8,0x516,0x68b,0x540)]();_0x3d4a9c[_0x3d2162(0xbd,0x1b2,0xf3,0x140)](addLog,_0x3d2162(0x10c,-0xa8,0x33,0x102)+_0x3d2162(0x3c,-0x1e,-0x74,-0xbe)+_0xed108d['status']+_0x470217(0x66d,0x621,0x6b7,0x68b)+_0x59b7fd),console[_0x470217(0x605,0x5fa,0x56f,0x5df)](_0x3d4a9c[_0x3d2162(-0x10,0x185,0xb1,0x2f)],_0x59b7fd);throw new Error('请求失败,状态码:\x20'+_0xed108d[_0x3d2162(0x1e,0x52,-0x59,0x3e)]+_0x470217(0x557,0x54b,0x4b2,0x4c2)+_0x59b7fd);}}const _0x110e28=await _0xed108d['text']();let _0x470df8='';try{const _0x4e5dfa=JSON[_0x3d2162(-0x12c,-0xa6,-0x83,-0x10d)](_0x110e28);_0x470df8=_0x4e5dfa[_0x470217(0x586,0x62c,0x503,0x639)][-0xc*-0x1be+-0xb5+-0x1*0x1433];}catch(_0x193d0f){_0x3d4a9c[_0x3d2162(-0x104,-0xee,-0x98,-0xfc)](addLog,_0x3d4a9c[_0x470217(0x608,0x652,0x561,0x6d1)]),_0x470df8=_0x110e28;}const _0x168f1a=_0x3d4a9c['GTQSC'](_0x470217(0x58b,0x51f,0x593,0x5f2)+_0x470217(0x64e,0x642,0x6b4,0x5ad)+'4,',_0x470df8);_0x3d4a9c[_0x470217(0x59a,0x551,0x5a3,0x4e0)](addLog,_0x3d2162(0x188,0xe3,0xb9,0xec)+'化为\x20data\x20UR'+'L。'),_0x3d4a9c[_0x470217(0x63e,0x706,0x597,0x6d2)](setTimeout,()=>{const _0x2ebef0={'wAJRN':function(_0x4481c4,_0x1f6bad){return _0x3d4a9c['wNzUf'](_0x4481c4,_0x1f6bad);},'mNBRX':function(_0x98d0df,_0x50c3ab){function _0x459629(_0x2b3240,_0x5c80e4,_0x1be41a,_0x14dbca){return _0x4406(_0x2b3240- -0x13c,_0x5c80e4);}return _0x3d4a9c[_0x459629(0x77,-0x40,0x14c,-0x8)](_0x98d0df,_0x50c3ab);}};function _0x48f9c2(_0x5e0fae,_0x1d928e,_0x473b5d,_0xc44ff){return _0x3d2162(_0x5e0fae,_0x1d928e-0x88,_0xc44ff-0x1dc,_0xc44ff-0x12a);}function _0x85977d(_0x3d347f,_0x598557,_0x3452f9,_0x14dee4){return _0x3d2162(_0x3452f9,_0x598557-0x11,_0x14dee4-0xab,_0x14dee4-0x110);}_0x3d4a9c[_0x48f9c2(0x22a,0x2da,0x296,0x2a4)](_0x3d4a9c[_0x85977d(0x95,0x8f,0x1,0xc1)],_0x3d4a9c[_0x48f9c2(0x24a,0x28d,0x3aa,0x2d8)])?_0x39385f=_0x2ebef0[_0x85977d(0x15f,-0x3d,0x62,0x99)](_0x3050f4+',\x20',_0x2ebef0[_0x85977d(-0x48,-0x6b,-0xa,-0x1)](_0x5bc5cd,_0xff272d[_0x48f9c2(0x24a,0x161,0x2bc,0x213)+_0x350c6f+_0x48f9c2(0xeb,0x226,0x139,0x1a3)])):(console['log'](_0x3d4a9c[_0x85977d(0x124,0x1d8,0xf7,0x168)]),window[_0x85977d(0xbc,0x132,0xab,0x180)]=!![]);},extension_settings[extensionName][_0x3d2162(0x81,0x154,0xb2,0x10f)+'terval']);;taskQueue[_0x3d2162(0x8c,-0x3,0x44,-0x12)+'sk'](_0x2d1b19,!![]),currentTaskId=null;if(_0x3d4a9c[_0x3d2162(-0x67,0x81,0xe,0x53)](String,extension_settings[extensionName][_0x470217(0x55a,0x4d3,0x48a,0x5e6)+_0x470217(0x6d2,0x65d,0x667,0x794)])===_0x3d4a9c[_0x3d2162(0xe,0x76,0x1f,-0x78)]){if(_0x3d4a9c[_0x470217(0x69f,0x70f,0x69d,0x6ce)]==='bpdWv'){_0x4c7dd7[_0x3d2162(0xe4,0x1b1,0xd5,0x5b)]=!![];if(_0x3d4a9c['luiFF'](_0xd69c46[_0x3d2162(0x1a,-0x59,-0x8,-0xa0)],_0x3d4a9c[_0x470217(0x668,0x5bf,0x633,0x64b)])){}else _0x4dd49c[_0x470217(0x63c,0x63d,0x588,0x645)+'sk'](_0x43ebd6,![]);_0x180fcd=null,_0x3d4a9c['vckpQ'](_0x5d70f7,_0x470217(0x54b,0x4df,0x4a0,0x583)+_0x305b86[_0x3d2162(-0x3f,0x64,-0x8,-0xd6)]),_0x5c125f['error'](_0x3d4a9c[_0x3d2162(0xf7,0xfb,0xa9,0x28)],_0x241b79);throw _0x4d5605;}else _0x168f1a=await _0x3d4a9c['NctJe'](convertImageToJpeg,_0x168f1a);}const _0x9b6cb={};return _0x9b6cb['image']=_0x168f1a,_0x9b6cb['change']=_0x114c4c||'',_0x9b6cb;}else{if(_0x3d4a9c['luiFF'](_0x3d4a9c[_0x470217(0x5b4,0x683,0x691,0x632)],_0x3d4a9c['toCjy'])){if(!taskQueue[_0x3d2162(0xbb,-0x12,0x52,-0xb)+_0x3d2162(-0x12a,-0x178,-0xaa,-0x178)](_0x2d1b19)){addLog(_0x3d2162(0x38,0x103,0xab,0x188));throw new Error(_0x3d4a9c[_0x3d2162(0x19,0x110,0x70,0x12)]);}const _0x502fc7=new URL(_0x3d4a9c['colkY'](_0x1e59d4,_0x3d4a9c[_0x3d2162(-0xd2,0x78,-0x21,-0xee)]));window[_0x3d2162(0x16a,0x185,0xd5,-0x5)]=![];const _0x4ca09c=await _0x3d4a9c[_0x470217(0x6df,0x753,0x73e,0x6e7)](fetch,_0x502fc7,{'method':'POST','body':JSON[_0x470217(0x637,0x6cb,0x6d7,0x58d)](_0x2b74a5),'headers':_0x3d4a9c[_0x470217(0x69c,0x74c,0x65f,0x606)](getDirectHeaders,_0x3d4a9c[_0x3d2162(-0x68,-0x61,-0x77,-0xbf)],_0x3d4a9c[_0x3d2162(0x5b,-0xe6,-0x6c,-0xd5)](getsdAuth))});setTimeout(()=>{const _0x30ccb7={'IsfuK':function(_0x45ad08,_0x1beac3){function _0x38bbb2(_0x4c6d4c,_0x1ba7e8,_0x56c12b,_0x39f30f){return _0x4406(_0x4c6d4c-0x1a8,_0x1ba7e8);}return _0x3d4a9c[_0x38bbb2(0x40a,0x4d0,0x46b,0x4d2)](_0x45ad08,_0x1beac3);},'ijkYN':function(_0x493d00,_0x3416b5){return _0x493d00(_0x3416b5);}};function _0x455a3e(_0x47b52c,_0x3e444c,_0x26a437,_0x2ba39c){return _0x470217(_0x3e444c- -0x209,_0x2ba39c,_0x26a437-0x1d0,_0x2ba39c-0x110);}function _0x705e8f(_0xab73b7,_0x5a34a1,_0x1b939f,_0x276ef1){return _0x470217(_0x276ef1- -0x794,_0x1b939f,_0x1b939f-0x141,_0x276ef1-0x104);}_0x3d4a9c[_0x455a3e(0x32c,0x39b,0x33d,0x30f)](_0x3d4a9c[_0x455a3e(0x357,0x376,0x327,0x2c6)],'EcqZj')?(console[_0x455a3e(0x431,0x3fc,0x366,0x4b3)](_0x3d4a9c[_0x455a3e(0x51e,0x4ac,0x4a9,0x537)]),window[_0x455a3e(0x513,0x4c4,0x408,0x476)]=!![]):_0x5a4e6c[_0x705e8f(-0x1e4,-0x154,-0xda,-0x165)+_0x2e7c25+_0x455a3e(0x460,0x3b6,0x317,0x440)]&&(_0x11dc94=_0x30ccb7[_0x455a3e(0x2e6,0x3a6,0x3f2,0x463)](_0xf69c4e+',\x20',_0x30ccb7[_0x705e8f(-0x199,-0x1de,-0xaf,-0x11e)](_0x2b5c56,_0x4c23f8[_0x705e8f(-0x93,-0x20e,-0x1a1,-0x165)+_0x50f1d0+'\x20Prompt'])));},extension_settings[extensionName][_0x3d2162(0x37,0x14e,0xb2,0x167)+'terval']);;if(!_0x4ca09c['ok']){const _0x4094ad=await _0x4ca09c[_0x3d2162(0x5d,0xc6,-0x10,-0xde)]();_0x3d4a9c[_0x3d2162(0xe4,0x8a,0xf7,0xb3)](addLog,_0x470217(0x5bb,0x4de,0x506,0x5c6)+_0x3d2162(0x14a,0x25,0x87,0xbd)+_0x4ca09c[_0x3d2162(-0xdd,-0xb5,-0x59,-0xc8)]+'。响应内容:\x20'+_0x4094ad),console['log'](_0x3d4a9c[_0x3d2162(0x1a,0x65,0xb1,0xde)],_0x4094ad);throw new Error(_0x3d2162(0xa4,0x7,0xd4,0xf8)+_0x4ca09c['status']+_0x470217(0x557,0x61e,0x5c1,0x529)+_0x4094ad);}const _0x1d07a5=await _0x4ca09c[_0x3d2162(0xd4,0x18b,0x103,0x190)]();if(!_0x1d07a5['images']||_0x3d4a9c[_0x3d2162(0x165,0x13c,0x105,0x1c0)](_0x1d07a5['images'][_0x3d2162(0x87,-0x107,-0x2b,0x4c)],-0x192a*-0x1+0x1*0x258c+-0x3eb6)){if(_0x3d4a9c['drseV']!==_0x3d4a9c[_0x3d2162(0x29,0x101,0xe6,0x65)])throw new Error(_0x3d4a9c[_0x470217(0x571,0x542,0x4fb,0x630)]);else{_0x3d4a9c[_0x470217(0x699,0x5c5,0x662,0x773)](_0x390eef,_0x470217(0x544,0x57e,0x4f7,0x5fd)+_0x321ada['status']+'\x20'+_0x577334[_0x3d2162(0xc6,0xc2,-0xb,0x43)]);throw new _0x1d95b1(_0x470217(0x544,0x58f,0x531,0x482)+_0x2453fa[_0x470217(0x59f,0x516,0x5ab,0x63e)]+'\x20'+_0x5b7d8f['statusText']);}}const _0x3b9bd7=_0x1d07a5[_0x3d2162(-0x72,-0x4f,-0x72,-0x4f)][-0xd55*0x1+-0x2e6*0x2+0x1321],_0x171ddb=_0x3d4a9c[_0x3d2162(-0x3c,0x37,0x59,0xfd)](_0x3d4a9c[_0x470217(0x601,0x5cc,0x636,0x59c)],_0x3b9bd7);_0x3d4a9c['AwJNA'](addLog,_0x3d4a9c[_0x3d2162(0x63,-0x54,-0x20,0xb6)]),taskQueue[_0x3d2162(0xe3,0xdb,0x44,0x111)+'sk'](_0x2d1b19,!![]),currentTaskId=null;_0x3d4a9c[_0x470217(0x604,0x639,0x5f6,0x62d)](_0x3d4a9c[_0x470217(0x6af,0x653,0x627,0x723)](String,extension_settings[extensionName][_0x3d2162(-0x80,-0xe0,-0x9e,-0xee)+'pegStorage']),_0x3d2162(-0x1b,0x15e,0xa5,0x12f))&&(_0x3d4a9c[_0x470217(0x580,0x624,0x577,0x613)](_0x470217(0x688,0x6b5,0x74b,0x621),_0x3d4a9c['hmrnC'])?_0x49e336[_0x3d4a9c[_0x3d2162(0xdf,0xef,0x91,0x48)]]=_0x542e5e:_0x171ddb=await _0x3d4a9c[_0x3d2162(-0xa4,-0x13e,-0x6e,-0xf5)](convertImageToJpeg,_0x171ddb));const _0xd05f15={};return _0xd05f15[_0x470217(0x64f,0x64e,0x64e,0x63e)]=_0x171ddb,_0xd05f15[_0x470217(0x591,0x50b,0x5e7,0x4de)]=_0x51b738||'',_0xd05f15;}else{_0x3d4a9c['SouZF'](_0x2ed4d8,_0x3d4a9c['Lpsty']);const _0xe7a2f7={};_0xe7a2f7[_0x3d2162(0x100,0x185,0x102,0x192)]=_0x3d2162(-0x1c,0xd7,0xbf,0xf)+_0x470217(0x6cb,0x6cb,0x63a,0x676);const _0x200f4f={};_0x200f4f[_0x470217(0x596,0x5d0,0x51d,0x532)]=[!![],!![],_0xe7a2f7];const _0x12cf79={};_0x12cf79[_0x3d2162(0x137,-0x6b,0x6d,0x4c)]=_0x200f4f;const _0x4be37f={};_0x4be37f[_0x3d2162(-0x95,-0x2e,-0x1,-0xa4)+_0x470217(0x5b2,0x4e8,0x4ee,0x619)]=_0x12cf79,_0x2d9c04=_0x3d4a9c[_0x3d2162(0xe9,0x70,0xa4,0x1d)](_0x1e29a7,_0x1c5ae8,_0x4be37f);}}}catch(_0x39c42b){if(_0x3d4a9c[_0x3d2162(0x45,0x61,0xed,0xd5)](_0x3d4a9c[_0x3d2162(0x2,0xc6,0x94,0x82)],_0x3d4a9c[_0x3d2162(0x11a,-0x19,0x51,-0x3)])){_0x3d4a9c[_0x470217(0x562,0x55d,0x4d1,0x59e)](_0x3b1cb4,_0xb5f205);return;}else{window[_0x470217(0x6cd,0x6a7,0x7a9,0x693)]=!![];if(_0x39c42b['message']===_0x3d4a9c[_0x3d2162(-0x68,0xb,0x70,0x1d)]){}else _0x3d4a9c[_0x470217(0x639,0x638,0x6ff,0x6ff)](_0x3d4a9c[_0x3d2162(0x146,0xc8,0xc0,0xf8)],_0x3d4a9c[_0x470217(0x5dd,0x56a,0x5f7,0x5c1)])?(_0x47a0b5[_0x3d2162(0x151,0x3e,0xe3,0x6e)+_0x470217(0x65e,0x5fa,0x609,0x6c5)](_0x2c57e5[_0x3d2162(0xa8,-0x8,0x34,-0x2f)+_0x470217(0x5de,0x561,0x5b3,0x55f)+'ST'],_0x3ac61d),_0x9184fb['initialize'+_0x3d2162(-0x5a,-0x12,0x3,0xce)]=![],_0x3d4a9c[_0x470217(0x57a,0x4eb,0x64f,0x4de)](_0x561b2f,_0x3d4a9c[_0x470217(0x5f3,0x66e,0x56a,0x533)])):taskQueue[_0x470217(0x63c,0x57c,0x577,0x6d6)+'sk'](_0x2d1b19,![]);currentTaskId=null,_0x3d4a9c[_0x470217(0x656,0x5d4,0x62d,0x66d)](addLog,_0x470217(0x54b,0x4c5,0x56d,0x4e0)+_0x39c42b[_0x3d2162(0x61,0x43,-0x8,-0xe)]),console['error'](_0x3d4a9c[_0x3d2162(0x33,-0x26,0xa9,-0x27)],_0x39c42b);throw _0x39c42b;}}}async function sdGenerate(_0x2bf141){const _0x166d86={'tCfHW':function(_0x1665db,_0x438e26){return _0x1665db(_0x438e26);},'uTzMr':function(_0x4d5e58,_0x50ca8e){return _0x4d5e58(_0x50ca8e);},'FOzqW':_0x169fa3(0x51c,0x52e,0x5a2,0x669),'GhrBd':'AdXsS','PIKZs':function(_0x567ba0,_0x2494c5,_0x3322be,_0x2724ed){return _0x567ba0(_0x2494c5,_0x3322be,_0x2724ed);},'GyAMQ':function(_0x57d07a,_0x24f1d5){return _0x57d07a(_0x24f1d5);},'kCZNR':function(_0x46a5cd,_0x25315d){return _0x46a5cd!==_0x25315d;},'DFLAo':_0x169fa3(0x55a,0x503,0x493,0x4e8),'IaUPO':_0x169fa3(0x4d8,0x3e7,0x486,0x470)+'rating\x20SD\x20'+_0x169fa3(0x3cf,0x3bd,0x48c,0x402)};function _0x2ae23e(_0x4a12c7,_0x5ead85,_0x632f8a,_0x3e533d){return _0x4406(_0x3e533d-0x282,_0x4a12c7);}const {id:_0x1e31a3,prompt:_0x4900dc,width:_0xe40d91,height:_0x417f0b,change:_0x4ce86a}=_0x2bf141;function _0x169fa3(_0x1a6328,_0x19fefc,_0x2d9335,_0x10bf55){return _0x4406(_0x2d9335-0x268,_0x10bf55);}_0x166d86[_0x169fa3(0x44d,0x58d,0x4d7,0x591)](addLog,_0x169fa3(0x56c,0x53e,0x49a,0x4f9)+_0x2ae23e(0x54c,0x417,0x459,0x483)+_0x1e31a3+(_0x169fa3(0x40a,0x396,0x3f8,0x414)+':\x20')+_0x4900dc+(_0x4ce86a?'\x20-\x20Change:'+'\x20'+_0x4ce86a:''));if(_0x4ce86a&&_0x4ce86a['includes'](_0x166d86[_0x2ae23e(0x516,0x3b5,0x475,0x452)])){_0x166d86['tCfHW'](bananaGenerate,_0x2bf141);return;}try{if(_0x166d86[_0x2ae23e(0x538,0x43b,0x3be,0x474)]!==_0x166d86[_0x2ae23e(0x44d,0x4fc,0x4f1,0x474)])_0x50cabd[_0x2ae23e(0x554,0x59f,0x43b,0x4d7)+_0x2ae23e(0x56b,0x550,0x423,0x4c5)]&&(_0x41dd5a['removeList'+_0x2ae23e(0x4e9,0x4e8,0x4b2,0x528)](_0x3cbb51[_0x169fa3(0x49f,0x4c9,0x4dc,0x466)+_0x169fa3(0x528,0x4c8,0x48e,0x4c1)+'ST'],_0x59cdf0),_0x2babfa[_0x2ae23e(0x57f,0x41a,0x4f5,0x4d7)+_0x169fa3(0x52c,0x477,0x4ab,0x51e)]=![],_0x166d86[_0x2ae23e(0x695,0x4e8,0x529,0x5c2)](_0x482858,_0x2ae23e(0x543,0x4ea,0x5af,0x526)+_0x169fa3(0x433,0x3fb,0x4c2,0x47b)));else{const {image:_0x6c8a5b,change:_0x1475d8}=await generateSDImage({'prompt':_0x4900dc,'width':_0xe40d91,'height':_0x417f0b,'change':_0x4ce86a});if(extension_settings[extensionName][_0x169fa3(0x4a8,0x571,0x4da,0x5b2)]!='0'){const _0xdebe4a={};_0xdebe4a[_0x2ae23e(0x46c,0x4cc,0x3c6,0x45b)]=_0x1475d8,await _0x166d86[_0x2ae23e(0x58e,0x531,0x4b8,0x505)](setItemImg,_0x4900dc,_0x6c8a5b,_0xdebe4a),addLog(_0x169fa3(0x35b,0x363,0x3f6,0x35a)+_0x169fa3(0x44c,0x49c,0x474,0x4ef)+'\x20'+_0x4900dc);}else _0x166d86['GyAMQ'](addLog,_0x2ae23e(0x48a,0x46f,0x409,0x4c9)+'库');const _0x3c912d={};_0x3c912d['id']=_0x1e31a3,_0x3c912d[_0x2ae23e(0x447,0x54a,0x4a6,0x4d6)]=!![],_0x3c912d[_0x169fa3(0x3cc,0x41d,0x40e,0x4af)]=_0x6c8a5b,_0x3c912d[_0x2ae23e(0x549,0x460,0x594,0x4f0)]=_0x4900dc,_0x3c912d['change']=_0x1475d8,eventSource[_0x2ae23e(0x51f,0x4ff,0x53a,0x593)](EventType[_0x2ae23e(0x569,0x4fc,0x42d,0x4f6)+'MAGE_RESPO'+_0x169fa3(0x46f,0x440,0x461,0x3ea)],_0x3c912d),_0x166d86[_0x169fa3(0x549,0x467,0x4d7,0x4bf)](addLog,'发送SD生图成功响应'+_0x2ae23e(0x44e,0x521,0x451,0x4af)+_0x1e31a3+')');}}catch(_0x19865b){if(_0x166d86[_0x169fa3(0x3e3,0x3d0,0x491,0x4be)](_0x169fa3(0x4e7,0x47d,0x4cf,0x404),_0x166d86[_0x169fa3(0x4bd,0x5e1,0x53b,0x4ea)])){const _0x33e8ee=_0x2ae23e(0x56d,0x57f,0x613,0x545)+_0x169fa3(0x580,0x4ab,0x4f4,0x562)+_0x1e31a3+'):\x20'+_0x19865b[_0x2ae23e(0x473,0x49a,0x56b,0x4ba)];addLog(_0x2ae23e(0x4c5,0x5d5,0x51a,0x562)+_0x33e8ee),console[_0x169fa3(0x3a8,0x415,0x477,0x4f8)](_0x166d86[_0x169fa3(0x5f5,0x4f9,0x531,0x608)],_0x19865b);const _0x4b1ba0={};_0x4b1ba0['id']=_0x1e31a3,_0x4b1ba0[_0x2ae23e(0x4f4,0x555,0x4d1,0x4d6)]=![],_0x4b1ba0[_0x2ae23e(0x3d6,0x432,0x401,0x491)]=_0x19865b[_0x2ae23e(0x413,0x420,0x50c,0x4ba)],_0x4b1ba0[_0x2ae23e(0x57c,0x43b,0x4c9,0x4f0)]=_0x4900dc,eventSource['emit'](EventType['GENERATE_I'+_0x169fa3(0x4b2,0x539,0x54e,0x571)+_0x169fa3(0x4d1,0x498,0x461,0x465)],_0x4b1ba0),_0x166d86[_0x2ae23e(0x624,0x680,0x65e,0x5c2)](addLog,'发送SD生图失败响应'+_0x169fa3(0x570,0x51a,0x495,0x46d)+_0x1e31a3+')');}else _0x4518c5('JSON\x20解析失败，'+_0x2ae23e(0x4af,0x56b,0x423,0x4bf)+_0x169fa3(0x338,0x3b1,0x401,0x392)),_0xff2dc8=_0x48d5a5;}}function initializeSDListener(){function _0x4b3daa(_0x2a06df,_0xe9f7fa,_0x146aab,_0x1bcff1){return _0x4406(_0xe9f7fa- -0x87,_0x146aab);}const _0x2cfa4a={'uHFfh':function(_0x4db48c,_0x29dff4){return _0x4db48c(_0x29dff4);}};eventSource['on'](EventType[_0x4b3daa(0x2b9,0x1ed,0x29e,0x2c3)+'MAGE_REQUE'+'ST'],sdGenerate);function _0x508609(_0x5f3202,_0x530d08,_0x302395,_0x284077){return _0x4406(_0x5f3202-0x1b3,_0x284077);}_0x2cfa4a['uHFfh'](addLog,_0x508609(0x457,0x525,0x530,0x522)+_0x4b3daa(0x14c,0x1bb,0x1ad,0x162));}export async function replaceWithSd(){function _0x5e2567(_0x3aca65,_0x2a27ce,_0x299550,_0x45616e){return _0x4406(_0x299550- -0x121,_0x2a27ce);}function _0x2eeed9(_0x4ecb4c,_0x537cad,_0x3626d0,_0x4111ac){return _0x4406(_0x3626d0- -0x170,_0x4111ac);}const _0x4bffe1={'QFiUv':function(_0x47144b,_0x641c57){return _0x47144b(_0x641c57);},'WWtus':_0x5e2567(0x160,0x1a6,0xfb,0x4c)+'中的\x20prompt。','EgdAi':function(_0x639e64,_0xb9f690){return _0x639e64+_0xb9f690;},'cqPWg':function(_0x5b8623,_0x2c3c8a){return _0x5b8623+_0x2c3c8a;},'CsIMU':function(_0x4858ed,_0x476585){return _0x4858ed!==_0x476585;},'GMVng':_0x5e2567(0x124,-0x2a,0x8e,0x8b),'GPNyY':function(_0x2a9e40){return _0x2a9e40();},'dMGSh':_0x5e2567(0x13a,0x5d,0x95,-0x9),'pHKZz':_0x2eeed9(0xd1,0x171,0x120,0x1eb),'vgIgZ':function(_0x5e8927,_0x4be346){return _0x5e8927(_0x4be346);},'TolTh':_0x2eeed9(0x138,0x1c5,0x134,0xe8)+_0x5e2567(0x13b,0x7a,0x139,0xc1)};if(extension_settings[extensionName][_0x2eeed9(0x158,0xdb,0x19c,0x203)]=='sd'){if(_0x5e2567(0x195,0x205,0x20a,0x1e8)===_0x5e2567(0xac,0x13e,0xea,0x171)){const _0x4ab348=_0x38eaf6?function(){if(_0x2e94ef){const _0x48fa6b=_0xe080d9['apply'](_0x3a33d9,arguments);return _0x5100a0=null,_0x48fa6b;}}:function(){};return _0x2a8091=![],_0x4ab348;}else!window[_0x5e2567(0x16b,0x1a1,0x134,0xcc)+_0x5e2567(0x6e,0x159,0x122,0x56)]&&(_0x4bffe1[_0x5e2567(0x10a,0x9a,0x9e,0x14b)](_0x4bffe1['GMVng'],_0x2eeed9(0xad,0x55,0x3f,-0x4a))?(_0x4bffe1[_0x2eeed9(0x96,0x15c,0x169,0x242)](_0x3c12bc,_0x4bffe1[_0x2eeed9(-0x27,0x30,0x76,0xa2)]),_0x33c453=_0xd1a77b(_0x2199f2)):(window[_0x5e2567(0xb1,0x12a,0x134,0x13a)+_0x5e2567(0x1de,0x96,0x122,0x1a4)]=!![],_0x4bffe1[_0x2eeed9(0x11d,0x115,0x6a,-0x1)](initializeSDListener))),initializeImageProcessing();}else window[_0x2eeed9(0x97,0x61,0xe5,0x15e)+_0x5e2567(0x18e,0x49,0x122,0xa5)]&&(_0x4bffe1[_0x2eeed9(0x248,0x152,0x1c8,0x14f)]===_0x4bffe1[_0x2eeed9(0xad,0x17a,0xd5,0x7f)]?_0x4b66a7[_0x2eeed9(0x43,0x48,0x107,0xef)+_0x405843+_0x5e2567(0x7b,0x68,0xe6,0x1b5)]&&(_0x15e490=_0x4bffe1[_0x5e2567(0xba,0x124,0x188,0x1fb)](_0x4bffe1[_0x5e2567(0x165,0xf9,0x132,0x147)](_0xa6e599,',\x20'),_0x570183[_0x5e2567(0x17b,0x17b,0x156,0x157)+_0x25f3b4+_0x5e2567(0x157,0x9a,0xe6,0xec)])):(eventSource[_0x2eeed9(0x27b,0x1a1,0x1b3,0x272)+_0x2eeed9(0x1dc,0xca,0x136,0x194)](EventType[_0x2eeed9(0xdb,0x198,0x104,0x177)+_0x2eeed9(0x115,0x167,0xb6,0x44)+'ST'],sdGenerate),window[_0x2eeed9(0x2f,0x74,0xe5,0x3f)+_0x2eeed9(0x31,0x1a8,0xd3,0x124)]=![],_0x4bffe1[_0x5e2567(0x2a3,0x1c4,0x20f,0x269)](addLog,_0x4bffe1[_0x5e2567(0x186,0x113,0x1e2,0x208)])));}