(function(_0x4b6f97,_0x332b35){const _0x48b90e=_0x4b6f97();function _0x3bf17f(_0x5ba253,_0x1bbc42,_0x3af50c,_0xf39369){return _0x3c9e(_0x5ba253- -0x34a,_0xf39369);}function _0x52c7bb(_0x2a0626,_0x540714,_0x3eeed4,_0x3048c7){return _0x3c9e(_0x3eeed4- -0x9e,_0x2a0626);}while(!![]){try{const _0x13f1be=-parseInt(_0x3bf17f(-0x224,-0x1d8,-0x27a,-0x2ba))/(0x18ab+-0x169*-0x8+-0x23f2)*(-parseInt(_0x52c7bb(0x2c,0x60,0x2c,-0x50))/(-0xa7c+-0x2201+0x2c7f))+-parseInt(_0x3bf17f(-0x23d,-0x2d0,-0x21b,-0x2ca))/(-0x1b3d*-0x1+-0x2005*0x1+0x199*0x3)*(parseInt(_0x3bf17f(-0x27e,-0x2ea,-0x20d,-0x25b))/(0x26d6+-0x2*0xb4f+0x40d*-0x4))+parseInt(_0x52c7bb(0x124,0xca,0xb6,0x28))/(0x4*-0x8aa+0xb*0xf7+-0x5*-0x4d0)*(parseInt(_0x52c7bb(0x91,0x47,0x43,0x85))/(-0x2251+-0xf*0xd+0x231a))+-parseInt(_0x52c7bb(0x1a4,0x16a,0x10d,0x120))/(-0x17*-0x3b+-0x57d*0x2+0x5b4)*(-parseInt(_0x52c7bb(0xb2,0x68,0x39,-0x57))/(0x29*-0xd+0x1*0x1e85+0x1c68*-0x1))+-parseInt(_0x52c7bb(0x8,0x8d,0xe,-0x45))/(0x1*0x16c3+0x90f*0x2+0x1*-0x28d8)+-parseInt(_0x3bf17f(-0x186,-0x17d,-0x139,-0x173))/(-0x1*0x3df+0x2*0xce0+0x1*-0x15d7)*(-parseInt(_0x3bf17f(-0x23b,-0x19b,-0x20b,-0x264))/(0x2673+-0x8*-0x3e7+0x1168*-0x4))+-parseInt(_0x3bf17f(-0x1b5,-0x16e,-0x223,-0x225))/(-0xea+0x3d0*-0x1+-0x2f*-0x1a);if(_0x13f1be===_0x332b35)break;else _0x48b90e['push'](_0x48b90e['shift']());}catch(_0x4468e0){_0x48b90e['push'](_0x48b90e['shift']());}}}(_0x2be6,-0x98727+0x225af*-0x2+0x16e9cd));function _0x3c9e(_0x4d5bfe,_0x59cd32){_0x4d5bfe=_0x4d5bfe-(-0x157*0x1+0xc01+-0xa13);const _0x1158f3=_0x2be6();let _0x3624b8=_0x1158f3[_0x4d5bfe];if(_0x3c9e['OzInlm']===undefined){var _0x231258=function(_0x57d218){const _0x188da2='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x42d5f1='',_0xc70872='',_0x314df1=_0x42d5f1+_0x231258;for(let _0xa278fc=0x1*0xa99+0x13b2+-0x1e4b,_0x1a6d5c,_0x4a559a,_0x2525ad=0x1ab1+0x56*-0x43+-0x33*0x15;_0x4a559a=_0x57d218['charAt'](_0x2525ad++);~_0x4a559a&&(_0x1a6d5c=_0xa278fc%(0x7b0+0x1396+0x2*-0xda1)?_0x1a6d5c*(-0xb93+-0x1*0x1434+-0x38f*-0x9)+_0x4a559a:_0x4a559a,_0xa278fc++%(-0x20b4+-0xc34+0x19*0x1cc))?_0x42d5f1+=_0x314df1['charCodeAt'](_0x2525ad+(0x7b*-0x19+-0x25*0xce+0x29d3))-(-0x7*-0x42+-0x20be+-0xd*-0x262)!==-0x1*-0x14cb+0x393+0x185e*-0x1?String['fromCharCode'](0x12*-0x45+-0x2*0xe5+0x1*0x7a3&_0x1a6d5c>>(-(-0x17*0x15b+-0x1f*-0xbf+0x80e)*_0xa278fc&0x31*-0xb3+0x38f*0x7+-0x64*-0x18)):_0xa278fc:-0x1b5e+0x127*0x1a+-0x298){_0x4a559a=_0x188da2['indexOf'](_0x4a559a);}for(let _0x565c1b=-0x5*0x159+0x947+-0x28a,_0x38f4ce=_0x42d5f1['length'];_0x565c1b<_0x38f4ce;_0x565c1b++){_0xc70872+='%'+('00'+_0x42d5f1['charCodeAt'](_0x565c1b)['toString'](-0x1*-0x62b+-0xae6*0x2+0xfb1))['slice'](-(-0x1*0x2040+0x2443*0x1+-0x1*0x401));}return decodeURIComponent(_0xc70872);};_0x3c9e['ybwFmd']=_0x231258,_0x3c9e['WEAWus']={},_0x3c9e['OzInlm']=!![];}const _0x4a4b5b=_0x1158f3[-0xbc1+0x5b*-0x49+0x25b4],_0x62e3d4=_0x4d5bfe+_0x4a4b5b,_0x4115c4=_0x3c9e['WEAWus'][_0x62e3d4];if(!_0x4115c4){const _0x11454c=function(_0x2e2d81){this['BPZVfs']=_0x2e2d81,this['rdAmoC']=[0x151*-0x19+0x2147+-0x5d,0x26f9+-0x35*0x11+-0x2374,0x1816*-0x1+0xaef+-0x7*-0x1e1],this['jKpFyq']=function(){return'newState';},this['GPiEVo']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['WcmZyH']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x11454c['prototype']['WytHAM']=function(){const _0x209558=new RegExp(this['GPiEVo']+this['WcmZyH']),_0x448f6f=_0x209558['test'](this['jKpFyq']['toString']())?--this['rdAmoC'][0x207c+-0x261e+0x6f*0xd]:--this['rdAmoC'][-0x6*-0xd1+-0x1*0x1ea+0xbf*-0x4];return this['MoBqNp'](_0x448f6f);},_0x11454c['prototype']['MoBqNp']=function(_0x3a3da6){if(!Boolean(~_0x3a3da6))return _0x3a3da6;return this['ySIiyB'](this['BPZVfs']);},_0x11454c['prototype']['ySIiyB']=function(_0x23e623){for(let _0x2673d8=-0xc7a+0x1*-0xcb8+0x4b*0x56,_0x3e5be5=this['rdAmoC']['length'];_0x2673d8<_0x3e5be5;_0x2673d8++){this['rdAmoC']['push'](Math['round'](Math['random']())),_0x3e5be5=this['rdAmoC']['length'];}return _0x23e623(this['rdAmoC'][-0x10c*0xd+-0xc27+0x1*0x19c3]);},new _0x11454c(_0x3c9e)['WytHAM'](),_0x3624b8=_0x3c9e['ybwFmd'](_0x3624b8),_0x3c9e['WEAWus'][_0x62e3d4]=_0x3624b8;}else _0x3624b8=_0x4115c4;return _0x3624b8;}function _0x5271f2(_0x20e795,_0x43bd82,_0xc711e3,_0x2896ae){return _0x3c9e(_0x20e795-0x272,_0x2896ae);}const _0x16a90d=(function(){const _0x4b735e={};_0x4b735e[_0xb9f1f6(0x227,0x184,0x1c1,0x129)]=_0x4f7bb2(-0x1e0,-0x222,-0x2a5,-0x2ad)+'+$';function _0xb9f1f6(_0x3537ec,_0x47d2e6,_0x194a81,_0x55dd29){return _0x3c9e(_0x47d2e6-0xcc,_0x194a81);}_0x4b735e[_0xb9f1f6(0x2ad,0x2a4,0x326,0x2d8)]=function(_0x39c36a,_0x39ab36){return _0x39c36a+_0x39ab36;},_0x4b735e[_0x4f7bb2(-0x19e,-0x167,-0x1a6,-0x1ca)]='qjcIq',_0x4b735e[_0x4f7bb2(-0x101,-0x141,-0x160,-0x164)]=function(_0x1b994d,_0x2f0c6c){return _0x1b994d!==_0x2f0c6c;},_0x4b735e['GXOgO']=_0xb9f1f6(0x1c0,0x245,0x228,0x242);function _0x4f7bb2(_0x347548,_0x26917d,_0x59d266,_0x14e31a){return _0x3c9e(_0x26917d- -0x2c7,_0x347548);}_0x4b735e[_0x4f7bb2(-0x13e,-0x109,-0x17e,-0xee)]=_0xb9f1f6(0x1ab,0x1a9,0x1e5,0x1e9);const _0x2f5143=_0x4b735e;let _0x474e5d=!![];return function(_0x350be5,_0x4546e6){const _0x517c9a=_0x474e5d?function(){function _0x2f9888(_0x1ace98,_0x3b3a0d,_0xf73f04,_0xd1af55){return _0x3c9e(_0x3b3a0d- -0x33c,_0x1ace98);}const _0x2ff4ba={'LAaOM':_0x2f5143['nFTzB'],'MaxPT':function(_0x893b8f,_0x551e60){function _0x1647fa(_0x5f3577,_0x2377d1,_0x6a293,_0xbf853b){return _0x3c9e(_0xbf853b- -0x2d6,_0x6a293);}return _0x2f5143[_0x1647fa(-0x18e,-0x10c,-0x9e,-0xfe)](_0x893b8f,_0x551e60);}};function _0x1ef4c7(_0x3c3f89,_0x199a47,_0x3c6ab0,_0x1b160d){return _0x3c9e(_0x3c3f89-0x1a1,_0x3c6ab0);}if(_0x2f5143[_0x1ef4c7(0x301,0x30d,0x35d,0x355)]!==_0x1ef4c7(0x28a,0x285,0x32d,0x2f9)){if(_0x4546e6){if(_0x2f5143[_0x1ef4c7(0x327,0x34e,0x2b5,0x33e)](_0x2f5143[_0x1ef4c7(0x248,0x2b6,0x2c4,0x266)],_0x2f5143[_0x2f9888(-0x197,-0x17e,-0x1a6,-0x189)])){const _0x30dd9d=_0x4546e6[_0x1ef4c7(0x36d,0x3c1,0x379,0x355)](_0x350be5,arguments);return _0x4546e6=null,_0x30dd9d;}else return _0x2688a8[_0x1ef4c7(0x265,0x1e4,0x2b6,0x2b6)]()[_0x2f9888(-0x1e2,-0x19b,-0xfd,-0x15a)](_0x1ef4c7(0x246,0x1b9,0x25b,0x27c)+'+$')[_0x2f9888(-0x287,-0x278,-0x25f,-0x2f3)]()['constructo'+'r'](_0x274d00)['search'](_0x2ff4ba[_0x1ef4c7(0x33f,0x2ae,0x39c,0x30e)]);}}else _0x287807[_0x1ef4c7(0x2ec,0x370,0x294,0x285)+_0x32ccd1+_0x2f9888(-0x1ca,-0x16f,-0x1f2,-0x20d)]&&(_0x513872=_0x2ff4ba[_0x2f9888(-0x14f,-0x1e1,-0x23f,-0x1db)](_0x2f70e3,',\x20')+_0x59a6bc[_0x1ef4c7(0x2ec,0x318,0x2b1,0x35d)+_0x5de84e+_0x1ef4c7(0x36e,0x40a,0x355,0x365)]);}:function(){};return _0x474e5d=![],_0x517c9a;};}()),_0x84509d=_0x16a90d(this,function(){const _0x57a50b={};_0x57a50b['MUawQ']='(((.+)+)+)'+'+$';function _0x129002(_0x2e2011,_0x5b8243,_0x515048,_0x226f50){return _0x3c9e(_0x5b8243- -0xd2,_0x515048);}const _0x36d9a9=_0x57a50b;function _0x4aab1e(_0x34f175,_0x47b40d,_0x2179a3,_0x35d17b){return _0x3c9e(_0x35d17b- -0x325,_0x34f175);}return _0x84509d[_0x4aab1e(-0x239,-0x2f9,-0x256,-0x261)]()['search']('(((.+)+)+)'+'+$')['toString']()[_0x129002(0x61,-0x31,-0xa1,-0x6d)+'r'](_0x84509d)['search'](_0x36d9a9['MUawQ']);});_0x84509d();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,waitForLock,releaseLock,acquireLock}from'./utils.js';import{setItemImg}from'./database.js';function _0x2be6(){const _0x55cb51=['twf4ufq','Dg9gsMu','vg9dtMO','cI0GkIPwquu6kG','zty0ioAvSoAnRUwKHoEqHUoaGG','DMzqteS','6lsF6z2I5lI6oIa','C2rFyxv0Aa','AfPwBve','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','C1bwthu','CMvTB3zLtgLZDa','B3iGChjVBxb0oG','of91ChnJywXLCG','cI0GkIPdBgLWia','vuTqzwm','EwLmy00','DtHFC2rFyxv0Aa','sLnptIdOP6pMNPdLPlhOTkxVViW','cI0GkIPdrKCGuW','DhjPBq','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','rvnYAMy','u2nLBMuGq29TCa','Du93s0W','yw1L','77Ym6k+35Qoa5P+LC2r3zwj1','C3rFy2HHDhu4xW','og4UChq','BMTWtMG','AMP4zvi','of9Zy2HLzhvSzq','C2rFy2nOyxr1xW','zw5HyMXLx2HYia','cI0GkIROTj/PNAlMJ5dNPlOG','Aw5JBhvKzxm','ChjVBxb0','yujYCM0','5yop5PwW5O2U44cc','zw1PDa','D2LKDgG','D2Xnt0u','Aw1Hz2u6','AMLSuu0','5BEY5ywZ6zET44cc','AeTyD1G','C2HQAwy','yxv0Aa','uMryDwO','BNbryNi','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','BMvYyxrL','tNfIDMC','Bvz1quO','EM9pAKe','Dhj1zq','rxvmD3u','zxr0Aw5NCW','mJeYnZq3mJHpBMjrq24','zKzTyKG','uvrXq0O','s3LPvM0','zLHbCwG','rxjYB3iGz2vUzq','DevKAum','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','quTxq0W','tefHt00','zursC04','B1rAD2y','C2vHCMnO','tuLOvLu','A2zsu1m','ALf0r2W','u0qGqvbjioI/LowBNUMuMq','44cc6k+35Qoa5P+LC2r3zwj1','r0rZveq','DNnJzei','wg1Zq3K','kerLBM9PC2LUzW','ntz1t3rwwKK','D3vWEfq','ue9tva','rwTeBvu','C2rFy2nSAxbFCW','vKftALe','5zon5BQu5yAf5A65oG','AgvPz2H0','wMHgDeG','CMf0Aw5NigLTyq','s0DmCui','kerPDMLKzv9YBW','oIOQia','yxrFBgfZDf9Syq','uhfmD0i','C2rvCMW','CMvZDg9Yzv9Myq','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','qurLDgfPBgvY','yM11sxG','DuDnuM8','cI0GkIRMQkhLNOSGke0','DvvQDMW','E+s/RUwBVN0','Aw5MBW','ody0mZeZmfD6Bwn1Aa','vunqx3nK','kfnHBxbSzxiPoG','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','5BI4icHjrdOG','uuDAt1O','zML4zwrqCM9TCa','C211uhy','yxbWBhK','ifbYB21WDa','Df9LBMq','sMnODe8','tgfkEwK','shbzvfm','DKv6twS','yxjNCW','u2TPCdOQkIa','6i635y+w5QIH5z6l5AsX6lsLoIa','5Q2J5zYO6ycA6l+hC2r3zwj1','ExvZAgu','EgHoAfq','zxnRAxy','A3nKEgC','cI0TlqOJiYmG55sF','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','yxbWBgLJyxrPBW','C2vLza','cI0GkIRPH4FMOlFMLRNMS5uG','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','twPHAKC','tg1kv00','Ag5hvvy','ExvZAgvPzf9Zza','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','Bw9KzwW','y2XPzw50','u05Yufa','y29UC3rYDwn0BW','s2jUuuu','l3bUzZTIyxnLnG','l2fWAs9Zzc9Nzq','kcGOlISPkYKRkq','zM9YrwfJAa','r1Hpz08','wffVDNq','sMX6zKq','ALb6q3y','zgvUB2LZAw5NxW','nZeYntiZn2PZqNHzBq','yxv0B191CMW','zxjYB3i','ANnVBG','ywrLDgfPBgvYxW','y2zNx3nJywXL','Bg9N','kfvWC2nHBguGrG','B3nPDgLVBG','Cgf5C3rFy2HHDa','C2rdzMDty2fSzq','C3rLChm','BKzuEKi','CMvZDg9YzuzHyW','q2f6BM8','B3rAD3i','z2vUzxjHDguTAq','uNbAzvy','zML4','Bg9Hza','ue1Wsxe','thLoD0i','r0vorvjbvevFsq','suq6ia','Dg9tDhjPBMC','v0z3C2C','Dc1TB2rLBa','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','A0LMvNO','Dg9Rzw4','mte1otq5oeLctxf2tW','EwzXAhm','ntu2qNjRr29s','C2tOR7FMSylNLj/LM77PLjNOR686ia','cI0TlqOGicaG','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','AeXMqvq','C3rYzw5NDgG','5lIT55QeihbYB21WDooaGG','z2DYCfK','D25bsfa','C3rHDhvZ','l2fWAs9Zzc9Zzq','mte0ndKXmK9PrKPRva','B3PgCfy','BKHrrNm','sMvyzwy','lcdOR6BMG4u6ia','cI0GkIRLSlRLR7GGkfm','qK9wAM4','ke5Lz2f0AxzLia','kfjLC3rVCMuGrG','5Q2J5zYO6k6+572U5QIH5z6l5lI6','odrkr1PmvwC','zw5HyMXLx2HY','C2fTCgXLCL9Uyq','Aw1Hz2veyxrH','y1vlC04','AwXLCJOQkIa','C2rFy3n0zxbZ','lI4U','y1j3y1G','EK5fB2m','6zsz6k+VoIa','y3jPChrZ','BMvNyxrPDMvqCG','wvnntva','CK9AqMy','ufbbz2y','ywn0B3iPoIOQia','AhjFC2nHBgu','y2vZ','C3rYAw5NAwz5','BgvY','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','6AUy5RIf5l+U5Asnios4UG','s1zksNm','Aw5Nx3n0CMvUzW','tufhrv9srvnqtW','qvfux3nK','tMTmrKq','DKrlDgC','Ee1ZCxy','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','zMrVuM8','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','C3vJy2vZCW','D3DKCvq','56cboIa','C0rgwM4','u0rmAxn0zw5LCG','vMTWsvO','Aw1Hz2vZ','sgfbA0O','Dgv4Da','zgf0ytPPBwfNzq','D3nvAeG','mte1mtftuwDPqvm','cI0GkIRNP43LRzaGkfm','mtfMEgDXrw8','Aw5PDgLHBgL6zq','B2rLBcK6kIOG','BeL5yxm','zuLqDxu','DeTzuwi','C2v0DgLUz3nZlG','zMfJzsdKUlRLVidLKk8','C2niuMC','AML1z3vHBG','BwfNzs1Yzxf1zq','zvLNvwq','y2HHBMDL','ANb5qwe','ChqPoIOQia','tLnf','BLvIyvu','Cgf5Bg9Hza','C2r3zwj1AEEuN+wBVUwpGG','5yYw5lI6igrHDgeGvvi','BKL1wKe','zwHmzuy','5yIh5O2I5QIH5z6l5AsX6lsLoIa','mufMrKDhsG','44cc5zon5BQu5yAf5A65oIa','A2LW','5zU+5y+c5PwW5OQL5zgkcI0GkIO','EvvXCfu','zxH0zw5ZAw9UxW','B21WDa','ywrFBw9KzwW','vhLVAuK','Auffq3e','DMDrv1q','6k6+572U5QIH5z6llI4U5lI6','z2fnvuu','Bw9Kzq','AxnqrwO','C2rFy3nLzwq','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','uunnre0','DxjS','cI0GkIRMLl7LPkFLGi3NJOCG','of9TB2rLBa','ktOG','C3rHDhvZvgv4Da','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','qxzhqM4','DgvWCYK6kIOG','A2zuD08','zK1vyLG','of9Zyw1WBgvYtG','zw5LCG','v3nMEKS','CKzOr2O','cI0GkIRPH43NU5JLUyxLUQyG','icHjrdOG','CMf0Aw5Nifneia','AK5Qvxy','yMTYwLm','q2HHCMfJDgvYia','5Q2J6z2I5O+q56s6icHqCM9T','z2vUzxjHDgvFAq','tufhrv9srvfvrq','z0zOCxu','C2rFy2rLBM9PCW','svL3rM0','wwfozg8','qND3wLe','mZK0ntuWyMHkENHI','BwvZC2fNzq','suHRDxm','q0Xjuf9ZDg9WxW','zMfJzv95B2XVDG','cI0GkIPbrgv0yq','y2vZioIeUoMdQos/RUwKJsdKUlO'];_0x2be6=function(){return _0x55cb51;};return _0x2be6();}import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';function _0x5d3b6d(_0x5818fb,_0x236a71,_0x336cf7,_0x124986){return _0x3c9e(_0x236a71-0x196,_0x336cf7);}async function generateSDImage({prompt:_0x54f145,width:_0x5f3cb7,height:_0x2badcd,change:_0x39e289}){const _0x1528a3={'npQbr':_0x477a59(-0xb4,-0x151,-0x193,-0x1e2)+_0x48b01b(-0x28f,-0x23e,-0x19e,-0x19d),'GDsTD':_0x48b01b(-0x247,-0x1e9,-0x1f5,-0x19d)+_0x48b01b(-0x25e,-0x244,-0x22f,-0x21a),'kIfVz':function(_0x5ea99a){return _0x5ea99a();},'VkpIZ':'Error\x20gene'+_0x477a59(-0x169,-0xda,-0x163,-0xe9)+'ge:','BwwZQ':function(_0x5ceb2b,_0xa5365){return _0x5ceb2b(_0xa5365);},'LmJWM':function(_0xc59b93,_0x1564c3){return _0xc59b93+_0x1564c3;},'otZwr':function(_0x53b3d4,_0x39c880){return _0x53b3d4(_0x39c880);},'HaAkJ':function(_0x413e7c,_0x2522bb){return _0x413e7c+_0x2522bb;},'aBrrm':function(_0xce57d6,_0x470545){return _0xce57d6+_0x470545;},'fXAqh':_0x48b01b(-0x2bd,-0x22b,-0x2cd,-0x1cf)+'rating\x20SD\x20'+_0x477a59(-0x15d,-0x109,-0x1a2,-0x17f),'LyNwB':function(_0x4ea22c,_0x276e43){return _0x4ea22c(_0x276e43);},'MIhVU':function(_0xa5021e,_0x3bc8a5){return _0xa5021e(_0x3bc8a5);},'XmsCy':_0x477a59(-0x267,-0x1f1,-0x266,-0x1b7)+'坐标的提示词字符串。','yfqhs':function(_0xbe8456,_0x268544){return _0xbe8456(_0x268544);},'hKXwX':_0x48b01b(-0x2d9,-0x253,-0x285,-0x2b8)+_0x477a59(-0x1bf,-0x1da,-0x263,-0x266),'JeXef':function(_0x5ab19b,_0x4bceb0){return _0x5ab19b<=_0x4bceb0;},'EuLwu':function(_0x2290d0,_0x3fc442){return _0x2290d0(_0x3fc442);},'shjif':'mIEeF','kfRSS':_0x48b01b(-0x34e,-0x305,-0x2c5,-0x321),'PPAgf':function(_0x2e3789,_0x28c531){return _0x2e3789===_0x28c531;},'uUjvl':function(_0x237342,_0x503c53){return _0x237342(_0x503c53);},'zQjLL':_0x477a59(-0x12e,-0x158,-0x1b3,-0x1cd)+_0x477a59(-0x1e3,-0x1bc,-0x16b,-0x19b),'KbnQE':function(_0x5cbf13,_0xbe55c5,_0x789b99){return _0x5cbf13(_0xbe55c5,_0x789b99);},'jNjUv':function(_0x50c6dd,_0x3c49f5){return _0x50c6dd!==_0x3c49f5;},'ggrpY':_0x477a59(-0x140,-0x190,-0x1fb,-0x113),'Nqbvg':_0x477a59(-0x174,-0x13c,-0xd2,-0x12f),'HpYTS':_0x48b01b(-0x350,-0x30b,-0x375,-0x399),'SoERG':function(_0x33a9b7,_0x9833d6){return _0x33a9b7+_0x9833d6;},'JchtO':function(_0x15f4ce,_0x313f45,_0x4c3082,_0x534997,_0x32ea67,_0x3884d1){return _0x15f4ce(_0x313f45,_0x4c3082,_0x534997,_0x32ea67,_0x3884d1);},'hnGUV':function(_0xac3160,_0x5a3d4f,_0x49674a){return _0xac3160(_0x5a3d4f,_0x49674a);},'IHkus':_0x477a59(-0xcc,-0x150,-0xf0,-0x11e),'jQtGl':function(_0x1c6bf8,_0x42ee2d){return _0x1c6bf8===_0x42ee2d;},'bkrZS':_0x48b01b(-0x29e,-0x2ad,-0x2c8,-0x30d),'ClAOw':function(_0x25f875,_0x3d7613,_0x5d1b4f){return _0x25f875(_0x3d7613,_0x5d1b4f);},'TyoiI':_0x477a59(-0x173,-0x1ea,-0x1a3,-0x16c)+_0x477a59(-0x178,-0x1c8,-0x18a,-0x1d4),'scHRg':_0x48b01b(-0x23b,-0x218,-0x26a,-0x20f),'eDRsN':'cmodel2222'+'2222','EOfwS':_0x48b01b(-0x301,-0x29a,-0x243,-0x21b)+_0x477a59(-0xf4,-0x179,-0x1fe,-0x1aa)+_0x477a59(-0x101,-0x113,-0xfd,-0x8e)+_0x48b01b(-0x270,-0x28b,-0x22e,-0x2ad),'isPEj':function(_0x3b0ff6,_0x21b910){return _0x3b0ff6!=_0x21b910;},'aCAdf':'nIuZA','gFhqu':function(_0x1541c4,_0x5ad2e9,_0x2bead8){return _0x1541c4(_0x5ad2e9,_0x2bead8);},'QCMDM':function(_0x4d54d9,_0x31b85c){return _0x4d54d9!==_0x31b85c;},'nHQFs':_0x477a59(-0x1d2,-0x196,-0x1a8,-0x14a),'kfTwO':function(_0x427d64,_0xab3877){return _0x427d64!==_0xab3877;},'nUbaU':function(_0x57ec8f,_0x4da2e4){return _0x57ec8f!==_0x4da2e4;},'TiaWu':function(_0x1f5650,_0x3ee719){return _0x1f5650>=_0x3ee719;},'PqLwB':function(_0x151af0,_0x3dfc47){return _0x151af0(_0x3dfc47);},'MjajG':function(_0x25bdb0,_0x117841){return _0x25bdb0(_0x117841);},'vscdB':function(_0x229052,_0xfe3740){return _0x229052==_0xfe3740;},'vDKtg':_0x48b01b(-0x285,-0x233,-0x2ca,-0x247),'rOZBf':function(_0x2a5fda,_0x12cfb2){return _0x2a5fda(_0x12cfb2);},'iAECq':_0x477a59(-0x1c7,-0x1e6,-0x16a,-0x1e6),'NkLFD':function(_0x50aa61,_0x308e27){return _0x50aa61(_0x308e27);},'AiRcm':_0x477a59(-0x228,-0x1de,-0x238,-0x1a7)+'face\x20为开启','eCngJ':'face_yolov'+_0x477a59(-0xcb,-0x117,-0xf4,-0x101),'LXRTH':'随机(-1)','yiLcM':function(_0x18617d,_0x49a55f){return _0x18617d==_0x49a55f;},'lIyas':function(_0x2b3f88,_0x257c31){return _0x2b3f88(_0x257c31);},'fFmbH':function(_0x4cf878){return _0x4cf878();},'uOwKL':function(_0xfc95cb,_0x305e29){return _0xfc95cb===_0x305e29;},'KGLqB':function(_0x254279,_0xad7c81){return _0x254279!==_0xad7c81;},'hLfAT':_0x48b01b(-0x262,-0x22e,-0x236,-0x286),'EkDmU':_0x477a59(-0x16f,-0x1d9,-0x20f,-0x1d8)+_0x477a59(-0x123,-0x122,-0x95,-0xc9)+_0x48b01b(-0x379,-0x306,-0x383,-0x274),'TjNkx':_0x477a59(-0x1c6,-0x1ea,-0x197,-0x198)+_0x477a59(-0xdb,-0x100,-0x100,-0x18a),'wupxT':_0x48b01b(-0x28b,-0x2f1,-0x258,-0x27c),'YSMMP':_0x477a59(-0x14d,-0xdd,-0x46,-0xa1),'uLDyJ':_0x477a59(-0x190,-0x129,-0x10f,-0x1ab),'LaJyi':_0x48b01b(-0x295,-0x258,-0x1b6,-0x2ea)+'尝试作为原始\x20Bas'+_0x477a59(-0x9e,-0x12f,-0x1b5,-0x10b),'vgQWT':function(_0x17e620,_0x32e0b9){return _0x17e620+_0x32e0b9;},'jpyAa':'图像已成功获取并格式'+_0x477a59(-0x17d,-0x16c,-0x109,-0x116)+'L。','uGMRo':function(_0x49a95f,_0x42c173){return _0x49a95f||_0x42c173;},'RpZeV':_0x477a59(-0x18f,-0x1a9,-0x147,-0x17e),'eIPuu':_0x48b01b(-0x219,-0x24d,-0x295,-0x219),'ToCNj':function(_0x5190c3,_0x55cd69){return _0x5190c3+_0x55cd69;},'rFhGj':'/sdapi/v1/'+'txt2img','smuPv':function(_0x3ddb0a){return _0x3ddb0a();},'eskiv':function(_0x55122c,_0x4ccdd7){return _0x55122c(_0x4ccdd7);},'fdoRo':function(_0x16f260,_0x210f61){return _0x16f260===_0x210f61;},'ehLeF':function(_0x2f4388,_0x1b1962){return _0x2f4388+_0x1b1962;},'mVuAJ':_0x477a59(-0x175,-0x183,-0x18e,-0xdf)+_0x477a59(-0x19c,-0x1eb,-0x167,-0x177)+'4,','yUqpU':function(_0x41e127,_0x42686c){return _0x41e127(_0x42686c);},'UKPec':function(_0x5f2170,_0x87a0bd){return _0x5f2170||_0x87a0bd;},'vEzMk':function(_0x444abc){return _0x444abc();},'tEdiC':function(_0x246729,_0x57e4db){return _0x246729(_0x57e4db);}};let _0x240564=_0x39e289;_0x54f145=processCharacterPrompt(_0x54f145),_0x54f145=await stripChineseAnnotations(_0x54f145),_0x39e289=processCharacterPrompt(_0x39e289),_0x39e289=await _0x1528a3[_0x477a59(-0x15e,-0xfb,-0xfe,-0x149)](stripChineseAnnotations,_0x39e289);const _0x28ae35=extension_settings[extensionName][_0x477a59(-0x157,-0xd4,-0xdd,-0x13e)][_0x477a59(-0x133,-0x11f,-0x112,-0x103)](),_0x1d8b8c=extension_settings[extensionName];clearLog(),_0x1528a3[_0x48b01b(-0x200,-0x223,-0x25d,-0x207)](addLog,_0x48b01b(-0x1e3,-0x1ef,-0x1e5,-0x1c3)+_0x48b01b(-0x36c,-0x32d,-0x3b3,-0x36b)+'端为'+_0x1d8b8c['client']+',模型为'+_0x1d8b8c[_0x477a59(-0x176,-0x113,-0x18e,-0x105)+'8_model']);const _0x3e5513=_0x39e289&&_0x39e289['trim']()!==''?_0x39e289:_0x54f145;addLog('用于生成的Tag:\x20'+_0x3e5513);let _0x314ad9=![];_0x3e5513[_0x48b01b(-0x227,-0x247,-0x2de,-0x26a)](_0x477a59(-0x91,-0x11c,-0xdd,-0x114)+_0x48b01b(-0x358,-0x311,-0x337,-0x2dc))&&(_0x1528a3[_0x48b01b(-0x1d0,-0x23c,-0x2b1,-0x296)]===_0x1528a3[_0x477a59(-0xfe,-0x105,-0x12a,-0x19e)]?_0x314ad9=!![]:(_0x3c08c4[_0x48b01b(-0x2d7,-0x25f,-0x27b,-0x255)+_0x477a59(-0x1dd,-0x14b,-0x1e1,-0xcc)](_0x40766a[_0x48b01b(-0x2fb,-0x303,-0x2ea,-0x276)+_0x48b01b(-0x311,-0x277,-0x227,-0x261)+'ST'],_0x345dfc),_0x593368[_0x48b01b(-0x333,-0x31f,-0x339,-0x330)](_0x291391=>{_0x46f469['removeList'+'ener'](_0x291391,_0x10a86b);}),_0x43ba15[_0x477a59(-0xf1,-0x17e,-0x203,-0x1e1)+_0x48b01b(-0x2a2,-0x2bf,-0x30a,-0x301)]=![],_0x1ef77d(_0x1528a3[_0x477a59(-0x17b,-0x102,-0x141,-0xc1)])));addLog(_0x477a59(-0xac,-0xd2,-0xd7,-0xc0)+_0x48b01b(-0x273,-0x20f,-0x23c,-0x1bc)+'les):\x20'+_0x314ad9);let _0x40a026={},_0x3eb434='',_0x4c92b8='';if(_0x314ad9){if(_0x1528a3[_0x477a59(-0x58,-0xeb,-0x128,-0x47)]!=='ItvMZ'){addLog(_0x1528a3[_0x48b01b(-0x253,-0x21c,-0x1bf,-0x206)]),_0x40a026=_0x1528a3[_0x48b01b(-0x22d,-0x272,-0x2dc,-0x252)](parsePromptStringWithCoordinates,_0x3e5513),_0x3eb434=_0x40a026[_0x1528a3[_0x48b01b(-0x1e1,-0x23d,-0x1cb,-0x1a6)]];for(let _0x28039d=-0x16b0+-0x9c8+0x2079;_0x28039d<=0x509*0x1+0xf21+-0x1426;_0x28039d++){if(_0x40a026['Character\x20'+_0x28039d+'\x20Prompt']){if(_0x1528a3[_0x477a59(-0x14e,-0x19e,-0x125,-0x17f)](_0x48b01b(-0x348,-0x2ab,-0x309,-0x2da),_0x48b01b(-0x2d0,-0x2ab,-0x300,-0x2db)))_0x4c92b8=_0x1528a3[_0x48b01b(-0x359,-0x2bc,-0x24e,-0x224)](_0x4c92b8+',\x20',_0x40a026['Character\x20'+_0x28039d+_0x48b01b(-0x1d5,-0x1f8,-0x21c,-0x1ba)]);else{const _0x37b7df=_0x3911a6?function(){if(_0x218fdb){const _0x4b0214=_0x2ee6fa['apply'](_0x30ad69,arguments);return _0x171625=null,_0x4b0214;}}:function(){};return _0x36dd24=![],_0x37b7df;}}}}else throw new _0x1532a0(_0x1528a3[_0x48b01b(-0x251,-0x21e,-0x20a,-0x284)]);}else _0x1528a3[_0x477a59(-0x14e,-0xcd,-0x105,-0x3d)](addLog,_0x1528a3['zQjLL']),_0x3eb434=_0x3e5513;let {modifiedPrompt:_0x3e79fb,insertions:_0x5ef6e8}=await _0x1528a3[_0x477a59(-0x24c,-0x1ec,-0x24c,-0x1d2)](prompt_replace,_0x3eb434,_0x4c92b8);if(_0x314ad9)for(let _0x32a09f=0x9*0x44d+-0x2*-0xa0d+-0x6*0x9cd;_0x1528a3[_0x48b01b(-0x303,-0x2eb,-0x27b,-0x35b)](_0x32a09f,0x36*0xb7+-0x16*0x19e+-0x302);_0x32a09f++){if(_0x1528a3[_0x48b01b(-0x26a,-0x27c,-0x200,-0x22a)](_0x477a59(-0x138,-0x1b6,-0x1a3,-0x19d),_0x1528a3[_0x48b01b(-0x258,-0x2f2,-0x30f,-0x278)])){if(_0x40a026[_0x48b01b(-0x303,-0x27a,-0x22f,-0x236)+_0x32a09f+_0x477a59(-0x33,-0xc1,-0x5b,-0x31)]){if(_0x1528a3[_0x477a59(-0x187,-0x145,-0x120,-0x191)](_0x1528a3[_0x48b01b(-0x275,-0x236,-0x2bd,-0x223)],_0x1528a3[_0x48b01b(-0x1b6,-0x1f4,-0x224,-0x27d)]))_0x3e79fb=_0x1528a3['SoERG'](_0x1528a3[_0x48b01b(-0x1a4,-0x245,-0x2d0,-0x235)](_0x3e79fb,',\x20'),prompt_replace_for_character(_0x40a026[_0x477a59(-0x1b2,-0x143,-0x160,-0x178)+_0x32a09f+'\x20Prompt']));else{_0x1528a3[_0x48b01b(-0x353,-0x2fd,-0x302,-0x399)](_0x43060f),_0x14129e(_0x48b01b(-0x2dd,-0x2f8,-0x317,-0x35e)+_0x50677a[_0x477a59(-0xab,-0x139,-0x15c,-0x1a8)]),_0x3fd7d0[_0x48b01b(-0x289,-0x317,-0x364,-0x2f5)](_0x1528a3[_0x477a59(-0x178,-0x187,-0x164,-0x1bc)],_0x45684e);throw _0x5e8818;}}}else{_0x1528a3[_0x477a59(-0x196,-0x13b,-0x113,-0x141)](_0x261bd1,_0x271b06);return;}}let _0x3ffb54=await _0x1528a3[_0x48b01b(-0x1d6,-0x1f6,-0x19f,-0x1ec)](zhengmian,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x48b01b(-0x3bf,-0x329,-0x388,-0x2db)]][_0x477a59(-0x111,-0xc4,-0x64,-0x71)+'t'],_0x3e79fb,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x477a59(-0x197,-0x1f2,-0x270,-0x238)]][_0x48b01b(-0x19f,-0x1fb,-0x1fb,-0x241)+_0x48b01b(-0x288,-0x1f7,-0x1f5,-0x292)],extension_settings[extensionName][_0x477a59(-0x135,-0x193,-0x108,-0x12e)],_0x5ef6e8),_0x490980=await _0x1528a3[_0x477a59(-0x1c3,-0x1f3,-0x271,-0x20a)](fumian,extension_settings[extensionName][_0x48b01b(-0x160,-0x1ee,-0x215,-0x1c4)][extension_settings[extensionName][_0x48b01b(-0x304,-0x329,-0x367,-0x39c)]][_0x48b01b(-0x2e0,-0x2d8,-0x340,-0x290)+_0x48b01b(-0x331,-0x299,-0x20a,-0x2a5)],extension_settings[extensionName][_0x48b01b(-0x181,-0x200,-0x25d,-0x28c)]);_0x1528a3[_0x477a59(-0x277,-0x1d3,-0x1b0,-0x247)](addLog,_0x477a59(-0xa5,-0x12d,-0x196,-0xfe)+_0x490980),extension_settings['sd'][_0x477a59(-0x236,-0x1e1,-0x16e,-0x165)]=_0x28ae35,await saveSettingsDebounced();try{if(_0x1528a3['jNjUv'](_0x1528a3[_0x48b01b(-0x21f,-0x26f,-0x239,-0x247)],_0x48b01b(-0x20d,-0x215,-0x22b,-0x22b))){if(_0x1528a3[_0x48b01b(-0x1f8,-0x221,-0x1c6,-0x19b)](_0x1d8b8c[_0x477a59(-0x187,-0x1ef,-0x16d,-0x1a5)],_0x1528a3[_0x48b01b(-0x2c6,-0x27b,-0x31d,-0x23b)])){const _0x9d9c89={};_0x9d9c89[_0x477a59(-0x92,-0x104,-0x67,-0x101)]=_0x1d8b8c[_0x477a59(-0x1ab,-0x118,-0x15d,-0xe6)+_0x48b01b(-0x1fd,-0x263,-0x2f9,-0x2e1)]?_0x1d8b8c[_0x48b01b(-0x2c6,-0x24f,-0x2a8,-0x29d)+_0x477a59(-0x172,-0x12c,-0x109,-0x1b0)]:'',_0x9d9c89['url']=_0x28ae35;const _0x5da7cb=await _0x1528a3['ClAOw'](fetch,_0x1528a3[_0x48b01b(-0x2ba,-0x297,-0x1ff,-0x234)],{'method':_0x1528a3[_0x48b01b(-0x2f9,-0x2ae,-0x321,-0x337)],'body':JSON[_0x477a59(-0x155,-0x19a,-0x1f2,-0x184)](_0x9d9c89),'headers':_0x1528a3[_0x477a59(-0x163,-0x1cd,-0x251,-0x247)](getRequestHeaders,window[_0x48b01b(-0x2fe,-0x2fc,-0x2b2,-0x2e6)])});if(!_0x5da7cb['ok']){_0x1528a3[_0x48b01b(-0x24a,-0x204,-0x1da,-0x27b)](addLog,_0x48b01b(-0x1bd,-0x1f0,-0x225,-0x1f9)+_0x5da7cb['status']+'\x20'+_0x5da7cb[_0x48b01b(-0x238,-0x289,-0x2e3,-0x2b0)]);throw new Error(_0x48b01b(-0x274,-0x1f0,-0x244,-0x1ea)+_0x5da7cb[_0x48b01b(-0x376,-0x2f0,-0x319,-0x2cd)]+'\x20'+_0x5da7cb[_0x477a59(-0x1bc,-0x152,-0x187,-0xdc)]);}let _0x1224d6=await _0x5da7cb[_0x477a59(-0x10a,-0x184,-0x21b,-0x1da)]();console[_0x477a59(-0x19c,-0x1dc,-0x24f,-0x208)](_0x1528a3[_0x48b01b(-0x207,-0x226,-0x299,-0x28e)],_0x1224d6),console['log'](_0x1528a3['EOfwS'],_0x1d8b8c[_0x477a59(-0xd6,-0x113,-0x11f,-0x8a)+'8_model']);if(_0x1528a3[_0x48b01b(-0x2b5,-0x291,-0x2ab,-0x2ff)](_0x1224d6,_0x1d8b8c['sd_cchatu_'+_0x477a59(-0x102,-0x154,-0x155,-0x117)])){if(_0x1528a3[_0x48b01b(-0x311,-0x2d5,-0x2d9,-0x287)](_0x1528a3['aCAdf'],_0x48b01b(-0x2c7,-0x2a2,-0x33b,-0x223))){_0x1528a3[_0x477a59(-0x23d,-0x1c3,-0x126,-0x137)](addLog,_0x48b01b(-0x288,-0x2e5,-0x2a8,-0x362)+_0x1d8b8c[_0x477a59(-0x111,-0x113,-0x70,-0x171)+_0x477a59(-0x154,-0x154,-0x10b,-0xda)]+_0x48b01b(-0x342,-0x2dd,-0x2b7,-0x2cb)),toastr['info']('正在设置模型...为'+_0x1d8b8c[_0x477a59(-0x1a4,-0x113,-0x13b,-0x118)+_0x477a59(-0x186,-0x154,-0x1f0,-0x127)]);const _0x19cd79={};_0x19cd79[_0x477a59(-0x65,-0x104,-0x6c,-0xd5)]=_0x1d8b8c['st_chatu8_'+'sd_auth']?_0x1d8b8c[_0x477a59(-0x14f,-0x118,-0x120,-0x119)+'sd_auth']:'',_0x19cd79['url']=_0x28ae35,_0x19cd79[_0x477a59(-0x17e,-0x1f0,-0x22e,-0x204)]=_0x1d8b8c[_0x48b01b(-0x211,-0x24a,-0x1b0,-0x217)+_0x48b01b(-0x26b,-0x28b,-0x2e2,-0x227)];const _0x26d2d7=await _0x1528a3[_0x477a59(-0x117,-0x13f,-0x111,-0x15d)](fetch,_0x48b01b(-0x2ba,-0x2ef,-0x2f5,-0x2c7)+_0x477a59(-0x19f,-0x1c8,-0x221,-0x21e),{'method':_0x1528a3[_0x477a59(-0x15b,-0x177,-0xf6,-0x13c)],'body':JSON[_0x48b01b(-0x2c7,-0x2d1,-0x32e,-0x2e9)](_0x19cd79),'headers':_0x1528a3[_0x48b01b(-0x2e5,-0x2fa,-0x394,-0x339)](getRequestHeaders,window['token'])});if(!_0x26d2d7['ok']){_0x1528a3[_0x48b01b(-0x2e7,-0x2fa,-0x29e,-0x295)](addLog,_0x477a59(-0x195,-0x169,-0xc9,-0xce)+_0x26d2d7[_0x48b01b(-0x30b,-0x2f0,-0x251,-0x2df)]+'\x20'+_0x26d2d7[_0x477a59(-0x10e,-0x152,-0x190,-0x1f3)]);throw new Error('切换模型失败:\x20'+_0x26d2d7[_0x477a59(-0x1a8,-0x1b9,-0x24e,-0x24a)]+'\x20'+_0x26d2d7['statusText']);}toastr[_0x48b01b(-0x20c,-0x202,-0x1b6,-0x260)](_0x477a59(-0xc0,-0x15d,-0x167,-0xf1)+_0x1d8b8c['sd_cchatu_'+_0x48b01b(-0x2ad,-0x28b,-0x30b,-0x298)]+'成功');}else!_0xd48c12['initialize'+_0x477a59(-0x13e,-0x188,-0x132,-0x1fe)]&&(_0xb36c33[_0x477a59(-0x181,-0x17e,-0xf2,-0x156)+_0x477a59(-0x123,-0x188,-0x12f,-0x131)]=!![],_0x5d38d6()),_0x1528a3[_0x48b01b(-0x27d,-0x2fd,-0x2e6,-0x2ec)](_0x48e069);}}else{if(_0x1528a3[_0x48b01b(-0x29c,-0x28e,-0x30c,-0x296)](_0x1528a3[_0x477a59(-0x20b,-0x1b5,-0x153,-0x20d)],_0x1528a3[_0x477a59(-0x253,-0x1b5,-0x154,-0x153)]))_0x57d218=_0x1528a3[_0x477a59(-0x1a4,-0x1f4,-0x1fd,-0x18e)](_0x188da2+',\x20',_0x1528a3[_0x477a59(-0x130,-0x1d3,-0x22f,-0x1d9)](_0x42d5f1,_0xc70872['Character\x20'+_0x314df1+_0x48b01b(-0x166,-0x1f8,-0x1da,-0x196)]));else{let _0x40f899=await _0x1528a3[_0x477a59(-0x16e,-0xcd,-0x162,-0x162)](getSDMode,_0x28ae35);_0x1528a3['isPEj'](_0x40f899,_0x1d8b8c[_0x477a59(-0x74,-0x113,-0xd0,-0xaf)+_0x477a59(-0x161,-0x154,-0x121,-0x1be)])&&(addLog(_0x48b01b(-0x337,-0x2cf,-0x2b7,-0x31d)+_0x1d8b8c[_0x48b01b(-0x22f,-0x24a,-0x207,-0x1d7)+_0x48b01b(-0x227,-0x28b,-0x222,-0x261)]+_0x477a59(-0x131,-0x1a6,-0x220,-0x1f9)),await setSDMode(_0x28ae35,_0x1d8b8c[_0x477a59(-0xb9,-0x113,-0x1b2,-0xab)+_0x48b01b(-0x31c,-0x28b,-0x229,-0x240)]));}}}else _0x2a2892['on'](_0x2d4307,_0xc91701);}catch(_0x3f55de){_0x1528a3[_0x48b01b(-0x271,-0x30a,-0x2e2,-0x382)](addLog,_0x477a59(-0x140,-0x1c7,-0x262,-0x215)+':\x20'+_0x3f55de[_0x48b01b(-0x2d6,-0x270,-0x1e8,-0x1ce)]+('。请检查sdwebu'+_0x48b01b(-0x310,-0x2c6,-0x262,-0x338)+_0x477a59(-0x171,-0xf2,-0xeb,-0x173)));throw new Error('获取或者切换模型失败'+_0x477a59(-0x159,-0x119,-0x1b1,-0x10d)+_0x477a59(-0x132,-0x18f,-0x15d,-0x13b)+_0x477a59(-0x17e,-0xf2,-0xe4,-0x5b));}let _0x1db1f6=-(0x1*-0x220f+-0x2465+0x4675*0x1);const _0x116829=_0x1d8b8c[_0x477a59(-0x114,-0x159,-0x180,-0x1bd)];_0x1528a3[_0x477a59(-0xfd,-0x14e,-0x159,-0xd8)](_0x116829,'')&&_0x1528a3[_0x477a59(-0xed,-0x16f,-0xd0,-0xf4)](_0x116829,null)&&!_0x1528a3[_0x477a59(-0xd8,-0xcd,-0x142,-0x51)](isNaN,_0x1528a3[_0x477a59(-0xe8,-0x13b,-0xfc,-0x17c)](Number,_0x116829))&&_0x1528a3['TiaWu'](_0x1528a3['PqLwB'](Number,_0x116829),-0x1ef8+-0x2df*-0xa+-0x1*-0x242)&&(_0x1db1f6=_0x1528a3[_0x48b01b(-0x360,-0x32c,-0x30b,-0x299)](Number,_0x116829));let _0x3fecce={'prompt':_0x3ffb54,'negative_prompt':_0x490980,'sampler_name':_0x1d8b8c['sd_cchatu_'+_0x477a59(-0x16d,-0x14c,-0xd3,-0x1d4)+_0x48b01b(-0x1bf,-0x251,-0x2bc,-0x1bd)],'scheduler':_0x1d8b8c[_0x48b01b(-0x200,-0x24a,-0x1fb,-0x2b9)+_0x48b01b(-0x2a9,-0x24b,-0x1ce,-0x2bf)+'r'],'steps':_0x1d8b8c[_0x477a59(-0x19d,-0x1a7,-0x149,-0x107)],'cfg_scale':_0x1d8b8c[_0x477a59(-0x219,-0x1d8,-0x1f5,-0x1b9)],'width':_0x5f3cb7?_0x5f3cb7:_0x1d8b8c['sd_cwidth'],'height':_0x2badcd?_0x2badcd:_0x1d8b8c['sd_cheight'],'restore_faces':_0x1528a3[_0x48b01b(-0x247,-0x21d,-0x18b,-0x1b0)](_0x1d8b8c[_0x477a59(-0x1be,-0x1d5,-0x1d5,-0x1b4)+'es'],_0x1528a3[_0x477a59(-0x196,-0x191,-0xf4,-0x176)]),'enable_hr':_0x1528a3['vscdB'](_0x1d8b8c['sd_chires_'+_0x48b01b(-0x391,-0x307,-0x35d,-0x35f)],_0x1528a3['vDKtg']),'hr_upscaler':_0x1d8b8c[_0x477a59(-0x103,-0x113,-0x16a,-0xea)+_0x48b01b(-0x234,-0x25d,-0x1ec,-0x2d4)],'hr_scale':_0x1d8b8c['sd_cupscal'+'e_factor'],'hr_additional_modules':[],'denoising_strength':_0x1d8b8c[_0x477a59(-0xc3,-0x13e,-0x175,-0x14e)+_0x477a59(-0x18a,-0x195,-0x1cb,-0x1d0)+'th'],'hr_second_pass_steps':_0x1d8b8c['sd_chires_'+_0x477a59(-0x1a5,-0x1d7,-0x172,-0x1d8)],'seed':_0x1db1f6,'override_settings':{'CLIP_stop_at_last_layers':_0x1528a3[_0x477a59(-0x227,-0x1d3,-0x19e,-0x1d0)](Number,_0x1d8b8c[_0x477a59(-0xe2,-0xdf,-0x78,-0x93)+_0x48b01b(-0x322,-0x29d,-0x33c,-0x302)]),'sd_vae':_0x1d8b8c[_0x477a59(-0x143,-0x113,-0x172,-0x157)+'8_vae']},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x1528a3[_0x48b01b(-0x2db,-0x2d6,-0x339,-0x2d9)](addLog,_0x48b01b(-0x178,-0x20a,-0x1b7,-0x23b)+_0x48b01b(-0x29a,-0x26b,-0x269,-0x2de)+_0x3fecce[_0x477a59(-0xaa,-0xd3,-0x127,-0x14e)+_0x48b01b(-0x2f2,-0x2d2,-0x29b,-0x36b)]),_0x1528a3[_0x48b01b(-0x26f,-0x20c,-0x283,-0x1e9)](addLog,_0x48b01b(-0x263,-0x249,-0x248,-0x2bd)+_0x477a59(-0x109,-0x197,-0x16c,-0x12a)+_0x3fecce[_0x48b01b(-0x304,-0x2e3,-0x2fb,-0x2bd)]);if(_0x1d8b8c['sd_cadetai'+'ler']==_0x1528a3[_0x477a59(-0x1c7,-0x191,-0x1b7,-0x107)]){if(_0x1528a3['jQtGl'](_0x1528a3[_0x477a59(-0x124,-0x15f,-0x108,-0x112)],_0x48b01b(-0x3ad,-0x31d,-0x362,-0x3b7))){_0x1528a3[_0x477a59(-0x135,-0x192,-0x112,-0x211)](addLog,_0x1528a3['AiRcm']);const _0x2f6de4={};_0x2f6de4[_0x477a59(-0xc1,-0x161,-0x192,-0x1c9)]=_0x1528a3['eCngJ'];const _0xe632e6={};_0xe632e6[_0x48b01b(-0x22a,-0x1f2,-0x290,-0x248)]=[!![],!![],_0x2f6de4];const _0x4a15c1={};_0x4a15c1[_0x477a59(-0x4d,-0xd1,-0xba,-0x34)]=_0xe632e6;const _0x5ca009={};_0x5ca009['alwayson_s'+_0x48b01b(-0x290,-0x2d9,-0x291,-0x270)]=_0x4a15c1,_0x3fecce=deepMerge(_0x3fecce,_0x5ca009);}else _0x797e6c=_0x1528a3[_0x48b01b(-0x2f4,-0x2bc,-0x290,-0x280)](_0x1528a3['aBrrm'](_0x4fc002,',\x20'),_0x4cc190['Character\x20'+_0x687084+'\x20Prompt']);}const _0xef1e14=_0x477a59(-0xc7,-0xb3,-0x46,-0x13b)+_0x48b01b(-0x23a,-0x29c,-0x319,-0x225)+_0x477a59(-0x12b,-0x142,-0xd2,-0x118)+_0x48b01b(-0x267,-0x2a8,-0x310,-0x323)+_0x3ffb54+(_0x48b01b(-0x284,-0x248,-0x1ee,-0x2bd)+_0x48b01b(-0x2c6,-0x2e7,-0x2d8,-0x25f)+'Prompt):**'+'\x20')+_0x490980+(_0x48b01b(-0x310,-0x32e,-0x3c3,-0x2c4)+_0x48b01b(-0x1cc,-0x1ff,-0x1e2,-0x16c)+'**\x20')+_0x3fecce[_0x48b01b(-0x2e0,-0x2e2,-0x252,-0x329)+'me']+('\x0a-\x20**步数\x20(S'+_0x477a59(-0x160,-0x14f,-0x1bc,-0x12f))+_0x3fecce[_0x477a59(-0x1c4,-0x1d7,-0x227,-0x1c9)]+(_0x477a59(-0x172,-0x120,-0x7c,-0x150)+'cale:**\x20')+_0x3fecce[_0x48b01b(-0x2ab,-0x314,-0x3b7,-0x381)]+(_0x477a59(-0x14c,-0x1b2,-0x1c8,-0x156)+'ize):**\x20')+_0x3fecce[_0x48b01b(-0x25f,-0x242,-0x268,-0x26f)]+'x'+_0x3fecce[_0x48b01b(-0x27b,-0x213,-0x237,-0x20d)]+(_0x48b01b(-0x220,-0x2b7,-0x26b,-0x2da)+'eed):**\x20')+(_0x3fecce[_0x477a59(-0x110,-0xb0,-0x13,-0xd2)]===-(-0x15a*0x19+0x1c09+0x5c2)?_0x1528a3['LXRTH']:_0x3fecce[_0x477a59(-0x4f,-0xb0,-0xc,-0x130)])+(_0x48b01b(-0x267,-0x205,-0x241,-0x1d2)+_0x477a59(-0x133,-0x17d,-0x212,-0xdb))+_0x1d8b8c[_0x477a59(-0x122,-0x113,-0x121,-0xd9)+_0x477a59(-0xde,-0x154,-0x185,-0x195)]+(_0x477a59(-0x166,-0x130,-0xac,-0x11a)+'*\x20')+_0x3fecce['override_s'+_0x477a59(-0xb0,-0xfa,-0x176,-0x130)]['sd_vae']+(_0x48b01b(-0x23c,-0x25c,-0x2ba,-0x235)+_0x48b01b(-0x22d,-0x1f1,-0x1f4,-0x154))+_0x3fecce['override_s'+'ettings'][_0x48b01b(-0x30f,-0x26e,-0x25a,-0x2c8)+_0x48b01b(-0x1c9,-0x20d,-0x18c,-0x29d)+'yers']+('\x0a-\x20**高清修复\x20'+'(Hires\x20Fix'+'):**\x20')+_0x3fecce[_0x48b01b(-0x2e7,-0x2e3,-0x256,-0x2a6)]+(_0x477a59(-0x1e6,-0x155,-0x137,-0xec)+_0x477a59(-0x14f,-0x1db,-0x159,-0x16b)+_0x48b01b(-0x33f,-0x2d4,-0x245,-0x33d))+_0x3fecce[_0x477a59(-0x124,-0x19c,-0x21c,-0x219)]+(_0x48b01b(-0x24b,-0x27f,-0x318,-0x256)+_0x477a59(-0x6c,-0xe4,-0xe4,-0xc1)+'\x20Strength)'+_0x477a59(-0xc1,-0xd7,-0x123,-0xbb))+_0x3fecce[_0x48b01b(-0x2b5,-0x31a,-0x35d,-0x3ba)+_0x48b01b(-0x295,-0x2f4,-0x347,-0x2ef)]+('\x0a-\x20**脸部修复\x20'+_0x48b01b(-0x2cd,-0x2e6,-0x2c1,-0x265)+'aces):**\x20')+_0x3fecce[_0x48b01b(-0x276,-0x20a,-0x228,-0x20b)+_0x48b01b(-0x32a,-0x2d2,-0x336,-0x2d6)]+(_0x477a59(-0xe5,-0x135,-0x14d,-0x1b7)+_0x48b01b(-0x273,-0x2df,-0x32b,-0x326))+_0x1528a3[_0x48b01b(-0x2f4,-0x25a,-0x1ef,-0x2b3)](_0x1d8b8c['sd_cadetai'+_0x477a59(-0x1b7,-0x199,-0x1dc,-0x218)],_0x1528a3[_0x48b01b(-0x2bf,-0x2c8,-0x26b,-0x323)])+_0x477a59(-0x1ea,-0x1c0,-0x15f,-0x14d);addLog(_0xef1e14),_0x1528a3[_0x477a59(-0x1fe,-0x17c,-0x134,-0x1e4)](addLog,_0x477a59(-0x1ff,-0x16d,-0x20c,-0x15e)+'数为'+JSON[_0x477a59(-0x141,-0x19a,-0x220,-0x171)](_0x3fecce));function _0x477a59(_0x3d1626,_0x549a78,_0x2ce912,_0x5b9460){return _0x3c9e(_0x549a78- -0x28e,_0x2ce912);}console[_0x477a59(-0x205,-0x1dc,-0x162,-0x1ea)](_0x48b01b(-0x255,-0x2a5,-0x265,-0x27e),_0x3fecce);function _0x48b01b(_0x1c9f43,_0x218ef5,_0x18419e,_0x1b7303){return _0x3c9e(_0x218ef5- -0x3c5,_0x18419e);}await _0x1528a3[_0x48b01b(-0x1da,-0x22f,-0x1a3,-0x28a)](waitForLock),acquireLock();try{if(_0x1528a3[_0x48b01b(-0x203,-0x252,-0x2aa,-0x224)](_0x1d8b8c['client'],'jiuguan')){if(_0x1528a3[_0x48b01b(-0x1cb,-0x210,-0x292,-0x1da)](_0x477a59(-0xf2,-0x10a,-0x129,-0xd9),_0x1528a3[_0x48b01b(-0x298,-0x2f5,-0x27e,-0x2f2)])){_0x3fecce[_0x477a59(-0x1d4,-0x156,-0x16a,-0x1be)]=_0x28ae35,console[_0x477a59(-0x207,-0x1dc,-0x14b,-0x178)](_0x1528a3[_0x48b01b(-0x1a9,-0x217,-0x28f,-0x191)],_0x1d8b8c['st_chatu8_'+_0x477a59(-0xbf,-0x12c,-0x160,-0x189)]),_0x3fecce[_0x477a59(-0x196,-0x104,-0x17e,-0x7b)]=_0x1d8b8c[_0x477a59(-0xc8,-0x118,-0x1ba,-0x104)+'sd_auth']?_0x1d8b8c[_0x477a59(-0x12d,-0x118,-0xd9,-0xbf)+_0x48b01b(-0x217,-0x263,-0x27c,-0x20d)]:'';const _0x48c8f3=await _0x1528a3['ClAOw'](fetch,_0x1528a3['TjNkx'],{'method':_0x477a59(-0x120,-0xe1,-0x112,-0x5d),'headers':_0x1528a3[_0x477a59(-0x118,-0x13b,-0x131,-0xd7)](getRequestHeaders,window['token']),'body':JSON[_0x477a59(-0x202,-0x19a,-0x206,-0x117)](_0x3fecce)});if(!_0x48c8f3['ok']){if(_0x1528a3[_0x48b01b(-0x2a1,-0x285,-0x24b,-0x231)](_0x1528a3[_0x48b01b(-0x2a1,-0x219,-0x1a3,-0x27b)],_0x1528a3[_0x48b01b(-0x1dc,-0x219,-0x253,-0x20e)])){const _0x294cba='SD生图流程捕获到异'+_0x477a59(-0x5d,-0xc6,-0x94,-0x24)+_0x582981+_0x477a59(-0xfe,-0x153,-0x1c2,-0x1e8)+_0x1bb825[_0x477a59(-0x13d,-0x139,-0x1a1,-0x156)];_0x5bbcf3(_0x477a59(-0x219,-0x1a3,-0x208,-0x1e6)+_0x294cba),_0x5d472a[_0x477a59(-0x230,-0x1e0,-0x1de,-0x1ea)](_0x1528a3[_0x48b01b(-0x19f,-0x22c,-0x1c8,-0x1e1)],_0x344f37);const _0x458a55={};_0x458a55['id']=_0x49e9de,_0x458a55['success']=![],_0x458a55[_0x477a59(-0x155,-0x1e0,-0x18b,-0x1b9)]=_0x1e29aa[_0x48b01b(-0x30b,-0x270,-0x212,-0x2c4)],_0x458a55[_0x48b01b(-0x23b,-0x246,-0x256,-0x20e)]=_0x1efa63,_0x3425a0[_0x477a59(-0xa0,-0x10c,-0x96,-0x10b)](_0x45c3a0[_0x477a59(-0x243,-0x1cc,-0x200,-0x12e)+_0x48b01b(-0x28c,-0x2cb,-0x321,-0x340)+_0x48b01b(-0x265,-0x2a7,-0x2ba,-0x21c)],_0x458a55),_0x1528a3[_0x48b01b(-0x2e3,-0x30a,-0x303,-0x2c9)](_0x36fb5d,_0x48b01b(-0x220,-0x255,-0x2f8,-0x217)+_0x48b01b(-0x20c,-0x27e,-0x304,-0x25b)+_0x753659+')');}else{const _0x423451=await _0x48c8f3[_0x477a59(-0x228,-0x184,-0x21e,-0x11f)]();addLog(_0x477a59(-0x3c,-0xc7,-0x84,-0xde)+_0x48b01b(-0x2ba,-0x2c1,-0x349,-0x2bf)+_0x48c8f3[_0x477a59(-0x142,-0x1b9,-0x11b,-0x126)]+_0x48b01b(-0x238,-0x29e,-0x24e,-0x2b3)+_0x423451),console[_0x48b01b(-0x2ae,-0x313,-0x38b,-0x27c)](_0x1528a3[_0x48b01b(-0x276,-0x2d7,-0x34d,-0x25e)],_0x423451);throw new Error('请求失败,状态码:\x20'+_0x48c8f3['status']+_0x477a59(-0x198,-0x1b3,-0x153,-0x251)+_0x423451);}}const _0x2c3f9f=await _0x48c8f3['text']();let _0x9aa318='';try{const _0x2a2dbe=JSON['parse'](_0x2c3f9f);_0x9aa318=_0x2a2dbe['images'][-0x1adb+-0x1*-0x1549+0x1*0x592];}catch(_0x5908c3){_0x1528a3[_0x477a59(-0x13b,-0x16f,-0x15c,-0x181)](_0x48b01b(-0x265,-0x260,-0x300,-0x261),_0x1528a3['uLDyJ'])?_0x120345=_0x1528a3['LyNwB'](_0x5d6aff,_0x33d628):(addLog(_0x1528a3[_0x48b01b(-0x1a7,-0x1f5,-0x24d,-0x16a)]),_0x9aa318=_0x2c3f9f);}const _0x5ccc08=_0x1528a3[_0x48b01b(-0x21c,-0x295,-0x291,-0x239)](_0x48b01b(-0x2b3,-0x2ba,-0x2c1,-0x2b9)+_0x477a59(-0x21a,-0x1eb,-0x18c,-0x261)+'4,',_0x9aa318);return _0x1528a3[_0x48b01b(-0x265,-0x232,-0x22a,-0x283)](addLog,_0x1528a3[_0x477a59(-0x1d6,-0x172,-0x18a,-0x165)]),{'image':_0x5ccc08,'change':_0x1528a3[_0x48b01b(-0x184,-0x206,-0x1a6,-0x296)](_0x39e289,'')};}else{_0x1528a3[_0x477a59(-0x15d,-0xec,-0x18c,-0x11b)](_0x45be87,_0x1528a3[_0x477a59(-0x52,-0xe5,-0x91,-0xca)]),_0x1edf26=_0x1528a3[_0x477a59(-0x1ce,-0x1c3,-0x18e,-0x19c)](_0x319ce3,_0x1d6ea7),_0x220432=_0x5df38e[_0x1528a3[_0x477a59(-0x11e,-0x106,-0xe7,-0x97)]];for(let _0x55653e=0x672+-0xc06+0x595;_0x1528a3['JeXef'](_0x55653e,0x193b*-0x1+0x2*-0x10ce+0x3adb);_0x55653e++){_0x544121[_0x477a59(-0x17b,-0x143,-0xd7,-0x1a6)+_0x55653e+_0x48b01b(-0x286,-0x1f8,-0x285,-0x1c4)]&&(_0x2a770d=_0x1528a3[_0x48b01b(-0x2db,-0x2bc,-0x2ea,-0x35a)](_0x1528a3[_0x477a59(-0x88,-0x10e,-0x8d,-0x147)](_0x277656,',\x20'),_0x3b0278[_0x48b01b(-0x30a,-0x27a,-0x2f4,-0x242)+_0x55653e+_0x48b01b(-0x26b,-0x1f8,-0x1d2,-0x194)]));}}}else{if(_0x1528a3[_0x477a59(-0x195,-0x16f,-0x127,-0xd4)](_0x1528a3[_0x477a59(-0x1a0,-0x1d1,-0x26b,-0x1b6)],_0x1528a3[_0x48b01b(-0x2e2,-0x2b2,-0x31a,-0x2d1)])){const _0x2eff7b=new URL(_0x1528a3[_0x477a59(-0x17b,-0x131,-0xe6,-0xaf)](_0x28ae35,_0x1528a3[_0x477a59(-0xea,-0x149,-0x19b,-0xfa)])),_0x3f358f=await fetch(_0x2eff7b,{'method':_0x1528a3[_0x477a59(-0x1c4,-0x177,-0x203,-0x12a)],'body':JSON[_0x48b01b(-0x33b,-0x2d1,-0x25f,-0x2ef)](_0x3fecce),'headers':{'Content-Type':_0x48b01b(-0x26d,-0x1e8,-0x14e,-0x210)+'n/json','Authorization':_0x1528a3[_0x477a59(-0x225,-0x1c6,-0x234,-0x21c)](getsdAuth)}});_0x1528a3[_0x477a59(-0x167,-0xc3,-0xf6,-0x91)](releaseLock);if(!_0x3f358f['ok']){const _0x49687e=await _0x3f358f[_0x48b01b(-0x23f,-0x2bb,-0x308,-0x268)]();_0x1528a3[_0x48b01b(-0x21e,-0x1ec,-0x187,-0x1e8)](addLog,_0x477a59(-0x5f,-0xe9,-0x160,-0x171)+'误。状态码:\x20'+_0x3f358f['status']+'。响应内容:\x20'+_0x49687e),console[_0x48b01b(-0x346,-0x313,-0x32c,-0x354)]('响应内容:',_0x49687e);throw new Error('请求失败,状态码:\x20'+_0x3f358f['status']+_0x48b01b(-0x294,-0x2ea,-0x28a,-0x308)+_0x49687e);}const _0x5235c1=await _0x3f358f[_0x477a59(-0x249,-0x1df,-0x262,-0x1a2)]();if(!_0x5235c1[_0x48b01b(-0x2c6,-0x2bd,-0x219,-0x297)]||_0x1528a3[_0x48b01b(-0x31b,-0x2c5,-0x363,-0x2f9)](_0x5235c1[_0x477a59(-0x1e5,-0x186,-0x12c,-0x1dd)]['length'],-0x609*0x6+0x8*-0xf5+-0x8c6*-0x5))throw new Error(_0x1528a3[_0x48b01b(-0x2c0,-0x21e,-0x28e,-0x1a7)]);const _0x3d4401=_0x5235c1[_0x48b01b(-0x2be,-0x2bd,-0x34d,-0x35d)][0x7*-0x9d+0x169f*-0x1+0x1aea],_0x1f1971=_0x1528a3[_0x477a59(-0x139,-0x16a,-0x186,-0x167)](_0x1528a3[_0x477a59(-0x9c,-0xfe,-0xa3,-0xd2)],_0x3d4401);return _0x1528a3[_0x48b01b(-0x2f0,-0x29b,-0x27c,-0x2aa)](addLog,_0x1528a3[_0x48b01b(-0x2e2,-0x2a9,-0x2da,-0x231)]),{'image':_0x1f1971,'change':_0x1528a3[_0x48b01b(-0x2b4,-0x25b,-0x210,-0x23c)](_0x240564,'')};}else _0x40d757[_0x477a59(-0x1c8,-0x17e,-0x182,-0x125)+_0x48b01b(-0x292,-0x2bf,-0x31c,-0x327)]=!![],_0x34ec9c();}}catch(_0x5e9f14){_0x1528a3[_0x477a59(-0xb8,-0xbc,-0x83,-0x6a)](releaseLock),_0x1528a3[_0x477a59(-0x175,-0xf3,-0xce,-0x108)](addLog,_0x48b01b(-0x399,-0x2f8,-0x303,-0x2b7)+_0x5e9f14['message']),console[_0x477a59(-0x18a,-0x1e0,-0x17b,-0x13c)](_0x1528a3[_0x48b01b(-0x34d,-0x2be,-0x324,-0x28d)],_0x5e9f14);throw _0x5e9f14;}}async function sdGenerate(_0x2fe0f){function _0x4e6ef1(_0x313f98,_0x587889,_0x55274e,_0x2850f0){return _0x3c9e(_0x587889-0x262,_0x313f98);}const _0x3fec63={'WFwsg':function(_0x6e383b,_0xcc7e24){return _0x6e383b(_0xcc7e24);},'RdXuj':_0x4e6ef1(0x303,0x312,0x32a,0x33f)+_0x5b81e8(-0x1a3,-0x13e,-0x1e2,-0x16f),'oTZwf':function(_0x4aa559,_0xfcefb9,_0x5af9ca){return _0x4aa559(_0xfcefb9,_0x5af9ca);},'RbCGE':_0x4e6ef1(0x455,0x3ba,0x45b,0x31e)+_0x4e6ef1(0x3da,0x3d9,0x408,0x3f3),'dMfXR':_0x5b81e8(-0x102,-0x92,-0xb5,-0x6a),'sDFZn':function(_0x27b070,_0xc1738b){return _0x27b070(_0xc1738b);},'JtTNu':function(_0x498056,_0x1593e0){return _0x498056!=_0x1593e0;},'gaMUE':_0x4e6ef1(0x3a0,0x302,0x39c,0x2e4),'fMUbX':function(_0x3aacca,_0x1b323c,_0x508977,_0x1757b3){return _0x3aacca(_0x1b323c,_0x508977,_0x1757b3);},'tKYQb':_0x5b81e8(-0x6f,-0xb7,-0x10a,-0xa0),'zoOjA':_0x4e6ef1(0x439,0x3b3,0x39b,0x43d),'zNEoc':function(_0x15967a,_0x3ef7a8){return _0x15967a(_0x3ef7a8);},'hZVmQ':'Error\x20gene'+_0x4e6ef1(0x30a,0x3aa,0x444,0x3ad)+'image:'},{id:_0x2e5471,prompt:_0x29de7e,width:_0x20f4d8,height:_0x49986f,change:_0xbbea34}=_0x2fe0f;addLog(_0x4e6ef1(0x386,0x363,0x2d3,0x33a)+_0x4e6ef1(0x3bc,0x325,0x323,0x388)+_0x2e5471+(')\x20-\x20Prompt'+':\x20')+_0x29de7e+(_0xbbea34?'\x20-\x20Change:'+'\x20'+_0xbbea34:''));function _0x5b81e8(_0x15e832,_0xda96bd,_0xbcfda1,_0x447f6b){return _0x3c9e(_0xda96bd- -0x254,_0x447f6b);}if(_0xbbea34&&_0xbbea34[_0x4e6ef1(0x39b,0x3e0,0x47c,0x45f)](_0x3fec63['dMfXR'])){_0x3fec63[_0x4e6ef1(0x2c8,0x327,0x31c,0x2cd)](bananaGenerate,_0x2fe0f);return;}try{const {image:_0x2a14f6,change:_0x403213}=await _0x3fec63[_0x4e6ef1(0x3f8,0x367,0x38c,0x3c3)](generateSDImage,{'prompt':_0x29de7e,'width':_0x20f4d8,'height':_0x49986f,'change':_0xbbea34});if(_0x3fec63['JtTNu'](extension_settings[extensionName]['cache'],'0')){if(_0x3fec63['gaMUE']!==_0x3fec63[_0x5b81e8(-0x149,-0x122,-0x15b,-0x87)])_0x3fec63[_0x5b81e8(-0x1fb,-0x18f,-0x181,-0x1fe)](_0x2903e5,_0x3fec63[_0x4e6ef1(0x487,0x3ed,0x3d9,0x3d2)]),_0x15503f=_0x3fec63[_0x4e6ef1(0x445,0x402,0x47d,0x4a5)](_0x994255,_0x21eadd,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x3fec63['RbCGE']}]}}});else{const _0x21dc70={};_0x21dc70[_0x5b81e8(-0xb5,-0x139,-0x198,-0xd2)]=_0x403213,await _0x3fec63[_0x5b81e8(-0xb9,-0x113,-0x127,-0x11e)](setItemImg,_0x29de7e,_0x2a14f6,_0x21dc70),_0x3fec63[_0x5b81e8(-0x1ab,-0x14f,-0x1b5,-0x185)](addLog,_0x5b81e8(-0x118,-0x185,-0x1ef,-0x1fa)+_0x4e6ef1(0x401,0x3c9,0x46d,0x375)+'\x20'+_0x29de7e);}}else{if(_0x3fec63[_0x5b81e8(-0x13e,-0x140,-0x1ad,-0xd7)]===_0x3fec63[_0x4e6ef1(0x491,0x3f3,0x416,0x3bc)]){_0x3fec63[_0x5b81e8(-0x164,-0x18f,-0xf8,-0x1bf)](_0x1b99bb,'切换模型失败:\x20'+_0x2d9199[_0x5b81e8(-0x201,-0x17f,-0x15e,-0x164)]+'\x20'+_0x392c33['statusText']);throw new _0x58cac8(_0x5b81e8(-0xe7,-0x12f,-0x17f,-0xc7)+_0x545f36['status']+'\x20'+_0x7c89a8[_0x4e6ef1(0x31f,0x39e,0x2ff,0x3c7)]);}else _0x3fec63[_0x5b81e8(-0x187,-0x18f,-0x164,-0x1b9)](addLog,_0x4e6ef1(0x464,0x3ef,0x356,0x39d)+'库');}const _0x2009b5={};_0x2009b5['id']=_0x2e5471,_0x2009b5[_0x5b81e8(-0x123,-0x152,-0x1dd,-0x123)]=!![],_0x2009b5[_0x4e6ef1(0x309,0x346,0x2e0,0x372)]=_0x2a14f6,_0x2009b5[_0x4e6ef1(0x377,0x3e1,0x447,0x474)]=_0x29de7e,_0x2009b5[_0x5b81e8(-0x17c,-0x139,-0xe2,-0xb3)]=_0x403213,eventSource[_0x4e6ef1(0x423,0x3e4,0x44d,0x409)](EventType[_0x5b81e8(-0x117,-0x192,-0x1a4,-0x1c9)+'MAGE_RESPO'+_0x5b81e8(-0xbe,-0x136,-0xe8,-0x112)],_0x2009b5),_0x3fec63['sDFZn'](addLog,_0x4e6ef1(0x42d,0x3c6,0x40a,0x3e3)+_0x5b81e8(-0x184,-0x10d,-0xe7,-0x19f)+_0x2e5471+')');}catch(_0x238c6f){const _0x4ead70='SD生图流程捕获到异'+_0x5b81e8(-0x9a,-0x8c,-0xbd,0x16)+_0x2e5471+_0x5b81e8(-0x7f,-0x119,-0x156,-0xc5)+_0x238c6f[_0x5b81e8(-0x114,-0xff,-0xed,-0x199)];_0x3fec63[_0x5b81e8(-0x1ea,-0x16a,-0xca,-0x19a)](addLog,_0x5b81e8(-0x20a,-0x169,-0x108,-0xc9)+_0x4ead70),console[_0x4e6ef1(0x3b2,0x310,0x343,0x384)](_0x3fec63[_0x5b81e8(-0x98,-0xf1,-0x171,-0x147)],_0x238c6f);const _0x5657a8={};_0x5657a8['id']=_0x2e5471,_0x5657a8['success']=![],_0x5657a8['error']=_0x238c6f['message'],_0x5657a8[_0x4e6ef1(0x347,0x3e1,0x468,0x36f)]=_0x29de7e,eventSource[_0x4e6ef1(0x34e,0x3e4,0x41e,0x43b)](EventType[_0x4e6ef1(0x332,0x324,0x297,0x32c)+'MAGE_RESPO'+_0x4e6ef1(0x30b,0x380,0x3da,0x38a)],_0x5657a8),_0x3fec63[_0x5b81e8(-0x11b,-0x14f,-0xe5,-0x14a)](addLog,'发送SD生图失败响应'+_0x5b81e8(-0xa3,-0x10d,-0xfb,-0x13a)+_0x2e5471+')');}}const LEGACY_EVENT_NAMES=[_0x5271f2(0x32e,0x32c,0x301,0x3a9)+_0x5d3b6d(0x329,0x2af,0x32b,0x246)+'st',_0x5d3b6d(0x280,0x2e3,0x265,0x285)+'mage_reque'+'st'];function initializeSDListener(){const _0x527210={'toFJe':function(_0x11a657,_0x2fb914){return _0x11a657(_0x2fb914);},'ksdxg':_0xdcb16c(0xa4,0x137,0xc9,0xc6)+'已初始化。'};eventSource['on'](EventType['GENERATE_I'+'MAGE_REQUE'+'ST'],sdGenerate);function _0xd8ef11(_0x505eaa,_0x3f0931,_0xc1803,_0x2f3f4e){return _0x5d3b6d(_0x505eaa-0x1f3,_0xc1803-0x11f,_0x2f3f4e,_0x2f3f4e-0x1c4);}function _0xdcb16c(_0x5f1aca,_0x31353e,_0xb110a6,_0x45ae66){return _0x5d3b6d(_0x5f1aca-0x6e,_0x45ae66- -0x20d,_0x5f1aca,_0x45ae66-0x11e);}LEGACY_EVENT_NAMES[_0xdcb16c(0x14,0x84,-0x35,0x2f)](_0x4fc8d5=>{eventSource['on'](_0x4fc8d5,sdGenerate);}),_0x527210[_0xdcb16c(0x175,0x185,0xe1,0xe5)](addLog,_0x527210[_0xd8ef11(0x3ed,0x401,0x48f,0x508)]);}export async function replaceWithSd(){function _0x3068e8(_0x3a5cc2,_0x4f26a3,_0xdf99f2,_0x476670){return _0x5d3b6d(_0x3a5cc2-0x115,_0x3a5cc2-0xe9,_0xdf99f2,_0x476670-0x1dd);}function _0x15820a(_0x460dc3,_0x2335d2,_0x2c18f5,_0x1024c0){return _0x5271f2(_0x2c18f5- -0x2f3,_0x2335d2-0xe,_0x2c18f5-0x175,_0x1024c0);}const _0x2c102c={'JlzfD':_0x15820a(0x14d,0xd2,0x117,0xa0),'jPzCv':'QPrtu','wsUhH':function(_0x3b4eb9){return _0x3b4eb9();},'QGZOZ':function(_0x2b740a,_0x23ad77){return _0x2b740a===_0x23ad77;},'WsfzK':_0x3068e8(0x3f0,0x3bb,0x37b,0x449),'ZhFtH':_0x3068e8(0x382,0x3a5,0x3c2,0x31e),'wXqZM':function(_0x1bbea8,_0x1777da){return _0x1bbea8(_0x1777da);}};if(extension_settings[extensionName][_0x3068e8(0x3b2,0x376,0x3f1,0x3da)]=='sd'){if(!window[_0x15820a(-0x11,0xeb,0x8f,0x106)+'SDListener']){if(_0x2c102c[_0x3068e8(0x328,0x32c,0x2ad,0x380)]!==_0x2c102c[_0x15820a(0xb4,0x11,0x29,0x0)])window[_0x15820a(0x3c,0xa3,0x8f,0x12d)+'SDListener']=!![],initializeSDListener();else{_0x1b7734(_0x15820a(-0x6,0xc,0x46,0x4d)+':\x20'+_0x2c466d[_0x3068e8(0x3d4,0x36c,0x369,0x375)]+(_0x15820a(0xbf,0x141,0x125,0x10c)+_0x3068e8(0x37e,0x388,0x2dd,0x3c4)+'查模型是否正确。'));throw new _0x39ed73(_0x15820a(0x95,0x40,0x46,0x8d)+_0x3068e8(0x3f4,0x46a,0x360,0x45a)+_0x15820a(0x57,0xb8,0x7e,-0xc)+_0x3068e8(0x41b,0x3f4,0x48a,0x434));}}_0x2c102c[_0x15820a(0x2,0x1c,0x8b,0x120)](initializeImageProcessing);}else{if(_0x2c102c[_0x3068e8(0x448,0x429,0x4c3,0x4d4)](_0x2c102c[_0x3068e8(0x3c3,0x40b,0x341,0x3fd)],_0x2c102c[_0x3068e8(0x432,0x406,0x460,0x3f9)])){const _0xa42b3b=_0x997c17['apply'](_0x3abc7a,arguments);return _0x21ad64=null,_0xa42b3b;}else window[_0x15820a(-0x2,0x66,0x8f,-0xd)+_0x15820a(0x7c,0x30,0x85,0x43)]&&(eventSource[_0x15820a(0x118,0xf1,0xe5,0x5d)+_0x3068e8(0x3c2,0x3fd,0x326,0x3c1)](EventType[_0x15820a(-0x44,0x2b,0x41,-0x24)+'MAGE_REQUE'+'ST'],sdGenerate),LEGACY_EVENT_NAMES[_0x3068e8(0x325,0x300,0x38e,0x324)](_0x484bb3=>{function _0x28e65c(_0x5c4bc3,_0xfdfdb4,_0x308d69,_0x5736d2){return _0x3068e8(_0x5736d2- -0x30f,_0xfdfdb4-0xce,_0x5c4bc3,_0x5736d2-0x12d);}eventSource[_0x28e65c(0xff,0xcb,0x56,0xd6)+'ener'](_0x484bb3,sdGenerate);}),window['initialize'+'SDListener']=![],_0x2c102c['wXqZM'](addLog,_0x3068e8(0x3bc,0x353,0x321,0x366)+_0x15820a(0xbc,0xb4,0x106,0x87)));}}
//# sourceMappingURL=http://localhost:8000/sd.js.map