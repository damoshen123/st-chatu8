(function(_0x5ce24c,_0x5918aa){function _0x23d5e6(_0x948e1e,_0x373262,_0x4efd1f,_0x31d9b8){return _0x1781(_0x373262- -0x38c,_0x948e1e);}const _0xa5305=_0x5ce24c();function _0x1c8337(_0xdf8354,_0x4e2756,_0x2ede48,_0xdf4f0){return _0x1781(_0xdf8354-0x173,_0xdf4f0);}while(!![]){try{const _0x4ddee0=parseInt(_0x1c8337(0x3af,0x3e5,0x437,0x3af))/(-0x1627+-0x25e3+-0x3c0b*-0x1)*(parseInt(_0x23d5e6(-0x1af,-0x1b5,-0x250,-0x133))/(-0x446+-0x2658*-0x1+-0x2210))+-parseInt(_0x23d5e6(-0x27d,-0x209,-0x21d,-0x22b))/(0xc8d+-0xa68*-0x1+-0x16f2)+-parseInt(_0x23d5e6(-0xc0,-0x102,-0x139,-0x192))/(0xf54+-0x10*-0x20d+-0x1b8*0x1c)*(-parseInt(_0x23d5e6(-0x126,-0x119,-0x14a,-0x9a))/(-0x381*0x2+-0x1*0x1acf+-0x21d6*-0x1))+-parseInt(_0x23d5e6(-0x263,-0x1e0,-0x223,-0x1d1))/(0x55d*0x1+0xfd+-0xa2*0xa)*(-parseInt(_0x23d5e6(-0x197,-0x173,-0x113,-0x1ce))/(-0x1932+0x1*0x1f7+0x1742))+parseInt(_0x23d5e6(-0x91,-0x122,-0x82,-0xd6))/(0x85f*0x1+-0x3*-0xbf8+-0x2c3f*0x1)+-parseInt(_0x23d5e6(-0x287,-0x218,-0x194,-0x2b9))/(-0x262d*-0x1+0x653*0x2+0x6*-0x877)*(-parseInt(_0x1c8337(0x3fc,0x445,0x452,0x3d4))/(0x25e1*-0x1+-0x1a0f+0x3ffa))+-parseInt(_0x23d5e6(-0x169,-0x1ce,-0x1ac,-0x182))/(0x1eb6*-0x1+-0x56f+0x30*0xc1)*(parseInt(_0x1c8337(0x3e2,0x47d,0x359,0x3cb))/(0x2bd*0x7+0x1d6f*-0x1+0xa50));if(_0x4ddee0===_0x5918aa)break;else _0xa5305['push'](_0xa5305['shift']());}catch(_0x440782){_0xa5305['push'](_0xa5305['shift']());}}}(_0x21b3,0xe7cfa+0x36ff0+0xf402*-0xa));const _0x173891=(function(){function _0x469941(_0x37d5a1,_0x1c7abb,_0x1e322a,_0x4140f1){return _0x1781(_0x37d5a1-0x223,_0x1c7abb);}const _0x1e4334={};_0x1e4334[_0x347bca(0xa5,0xee,0xab,0x5c)]='5|0|4|2|1|'+'3',_0x1e4334[_0x469941(0x47b,0x3e7,0x484,0x48f)]=function(_0x578c29,_0x3ab21e){return _0x578c29===_0x3ab21e;},_0x1e4334[_0x469941(0x47f,0x514,0x3fd,0x4e7)]='任务已取消';function _0x347bca(_0x28ed33,_0x3b7e7f,_0x75ff59,_0x531f9b){return _0x1781(_0x28ed33- -0x1a5,_0x3b7e7f);}_0x1e4334[_0x347bca(0xd4,0x135,0x178,0x36)]=_0x347bca(0x96,0x2c,0xf4,0x6d)+_0x469941(0x39d,0x43d,0x3d9,0x358)+_0x347bca(0x53,-0x48,-0x2c,0xe6),_0x1e4334['CGuvP']=_0x347bca(0x67,0x6c,0xd8,0x7c);const _0x274c7d=_0x1e4334;let _0x57fdb4=!![];return function(_0x39fa8f,_0x46854a){function _0x51665e(_0xee98b0,_0xf9b865,_0x54b456,_0x4914f2){return _0x469941(_0x54b456- -0x127,_0xf9b865,_0x54b456-0x1bf,_0x4914f2-0x39);}function _0x2a870e(_0x201cb5,_0x56cb75,_0x3a364f,_0x7fcf77){return _0x469941(_0x3a364f- -0x13f,_0x56cb75,_0x3a364f-0xd7,_0x7fcf77-0x118);}if(_0x274c7d[_0x51665e(0x35c,0x34e,0x2f3,0x32f)]===_0x51665e(0x34c,0x2ff,0x2b6,0x305)){const _0x100253=_0x274c7d['kZZXC'][_0x51665e(0x3aa,0x350,0x333,0x3aa)]('|');let _0x9885f1=0x19*-0x13+-0xc3+-0x86*-0x5;while(!![]){switch(_0x100253[_0x9885f1++]){case'0':if(_0x274c7d[_0x2a870e(0x378,0x3ac,0x33c,0x332)](_0x2d557e[_0x2a870e(0x2b6,0x298,0x2d0,0x321)],_0x274c7d[_0x2a870e(0x2e8,0x3b2,0x340,0x35a)])){}else _0x45f599[_0x2a870e(0x31a,0x28b,0x2c4,0x23c)+'sk'](_0x1ce888,![]);continue;case'1':_0x2a9c78[_0x51665e(0x1be,0x24c,0x23f,0x212)](_0x274c7d[_0x2a870e(0x3fb,0x30f,0x35d,0x33d)],_0x435e24);continue;case'2':_0x4c39c1(_0x51665e(0x298,0x1ef,0x247,0x1aa)+_0x2361e5['message']);continue;case'3':throw _0x475ef8;continue;case'4':_0x56ea9c=null;continue;case'5':_0x532689[_0x2a870e(0x2fa,0x1f6,0x271,0x30b)]=!![];continue;}break;}}else{const _0x4205bc=_0x57fdb4?function(){function _0x7c4861(_0xdda8be,_0x249628,_0x3080bc,_0x358d3d){return _0x51665e(_0xdda8be-0x132,_0x3080bc,_0x358d3d- -0x379,_0x358d3d-0x17f);}if(_0x46854a){const _0x345b48=_0x46854a[_0x7c4861(-0x9c,-0x58,-0x4,-0x1b)](_0x39fa8f,arguments);return _0x46854a=null,_0x345b48;}}:function(){};return _0x57fdb4=![],_0x4205bc;}};}()),_0x587dd8=_0x173891(this,function(){function _0x28fa73(_0x2ba3a7,_0x3485f0,_0x18d94f,_0x5a114a){return _0x1781(_0x3485f0- -0x268,_0x18d94f);}const _0x4a7614={};function _0x4d89ce(_0x56143c,_0x25743b,_0x7717a7,_0x5c025c){return _0x1781(_0x5c025c-0x67,_0x7717a7);}_0x4a7614['wWZow']=_0x4d89ce(0x1a8,0x12c,0x13f,0x1cc)+'+$';const _0x1ba406=_0x4a7614;return _0x587dd8[_0x28fa73(-0x151,-0xcb,-0xb2,-0x3f)]()[_0x4d89ce(0x24b,0x232,0x19a,0x23b)](_0x1ba406[_0x28fa73(-0x92,-0x74,-0x58,-0xe)])['toString']()[_0x28fa73(-0x98,-0xed,-0x153,-0x162)+'r'](_0x587dd8)[_0x28fa73(-0x2b,-0x94,-0x75,-0x10c)](_0x1ba406[_0x4d89ce(0x267,0x2a1,0x255,0x25b)]);});function _0x1781(_0x112b50,_0x5e2ef6){_0x112b50=_0x112b50-(-0x234d+-0x47f*-0x8+0x91);const _0x24262c=_0x21b3();let _0x15b3a4=_0x24262c[_0x112b50];if(_0x1781['LdXWDp']===undefined){var _0x4be535=function(_0x45f559){const _0x160506='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x22051c='',_0x43b009='',_0x36d299=_0x22051c+_0x4be535;for(let _0x4fa717=-0x13d0+-0x17e3+0x2bb3,_0x3a91c5,_0x1b3d35,_0x39a9fe=-0x791+-0x1*0x1c36+0x23c7;_0x1b3d35=_0x45f559['charAt'](_0x39a9fe++);~_0x1b3d35&&(_0x3a91c5=_0x4fa717%(-0x3e*0x52+0x91a+-0x18a*-0x7)?_0x3a91c5*(-0x1b77+-0x3*-0x3f1+-0x9*-0x1c4)+_0x1b3d35:_0x1b3d35,_0x4fa717++%(0xa48+-0x1*0x26+-0xa1e))?_0x22051c+=_0x36d299['charCodeAt'](_0x39a9fe+(0xf5a+0x56*-0x6b+0x14a2))-(-0x8*-0x32c+-0x3cd+-0x1*0x1589)!==-0x2242+0x11a3+0x109f?String['fromCharCode'](0x970+0x202c+-0x289d&_0x3a91c5>>(-(0x8d*0x5+-0x1700+-0x40d*-0x5)*_0x4fa717&0x1b*0x3e+0x23dd+-0x2a61)):_0x4fa717:-0x23a5+-0x1*-0x1b23+0x21*0x42){_0x1b3d35=_0x160506['indexOf'](_0x1b3d35);}for(let _0x40e504=-0x1*0xb4b+-0x262c+0x3177,_0x4ab265=_0x22051c['length'];_0x40e504<_0x4ab265;_0x40e504++){_0x43b009+='%'+('00'+_0x22051c['charCodeAt'](_0x40e504)['toString'](0x330+-0x1*0x2213+0x1ef3))['slice'](-(0x1*0x3c2+0x109f+-0x145f));}return decodeURIComponent(_0x43b009);};_0x1781['asxNup']=_0x4be535,_0x1781['UwpEph']={},_0x1781['LdXWDp']=!![];}const _0x4d6b43=_0x24262c[-0x17c*0xe+-0x1bb4+0x307c],_0x42f959=_0x112b50+_0x4d6b43,_0x21603f=_0x1781['UwpEph'][_0x42f959];if(!_0x21603f){const _0x3f3493=function(_0x5be133){this['kIVIJc']=_0x5be133,this['WFVQQe']=[-0x7e5+0xb*-0x29f+0x24bb,0x1*0x113f+-0xaa4+0x59*-0x13,0x10a5*-0x1+0x2092+-0xfed],this['PpOAXB']=function(){return'newState';},this['vGdEjU']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['xuOJpD']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3f3493['prototype']['aHZher']=function(){const _0x5af073=new RegExp(this['vGdEjU']+this['xuOJpD']),_0x36a229=_0x5af073['test'](this['PpOAXB']['toString']())?--this['WFVQQe'][0x4*-0x8b1+-0xfbd+0x3282]:--this['WFVQQe'][-0xcd7*-0x2+0x7*0xfe+-0x20a0];return this['ravDvc'](_0x36a229);},_0x3f3493['prototype']['ravDvc']=function(_0x13124a){if(!Boolean(~_0x13124a))return _0x13124a;return this['uqwecI'](this['kIVIJc']);},_0x3f3493['prototype']['uqwecI']=function(_0x5097f7){for(let _0x4087e5=0x13*0xfd+0x89f+-0x1b66,_0x285722=this['WFVQQe']['length'];_0x4087e5<_0x285722;_0x4087e5++){this['WFVQQe']['push'](Math['round'](Math['random']())),_0x285722=this['WFVQQe']['length'];}return _0x5097f7(this['WFVQQe'][0xb*-0x24d+0x95*-0x43+0x404e]);},new _0x3f3493(_0x1781)['aHZher'](),_0x15b3a4=_0x1781['asxNup'](_0x15b3a4),_0x1781['UwpEph'][_0x42f959]=_0x15b3a4;}else _0x15b3a4=_0x21603f;return _0x15b3a4;}_0x587dd8();function _0x21b3(){const _0x3b4c97=['yxrFBgfZDf9Syq','DhjPBq','keHPCMvZiezPEa','yxbWBhK','su5rC08','l3bUzZTIyxnLnG','5Q2J5zYO6k6+572U5QIH5z6l5lI6','DuTnDNi','cI0GkIRNP43LRzaGkfm','DuzTvK0','y2vZioIeUoMdQos/RUwKJsdKUlO','ndK2odGZmKTuA1PWqW','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','q0PICeu','yxv0Aa','6lsF6z2I5lI6oIa','mJm5ntuWmJrNAMzhqwK','ExbSr0K','AKLSzwq','C3rHDhvZ','nte1oda0nxjhCujZCG','A1PYDMC','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','D2LKDgG','Aw5MBW','vwXLuhu','s1fhv2u','A2LW','cI0GkIROTj/PNAlMJ5dNPlOG','CNvUBMLUzW','AgvPz2H0','vMvdEuy','6k+V44cc54Q25Ocb56cboIa','qKL5Dxy','r21nu2i','5yIh5O2I5QIH5z6l5AsX6lsLoIa','Aw1Hz2veyxrH','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','AhjFC2nHBgu','Bg9N','D1rkq2S','kfvWC2nHBguGrG','mZqZodmWAKLpvNvX','nfj1qvf5za','tu1fwLO','q2jYAee','yvrpCNC','6i635y+w5QIH5z6l5AsX6lsLoIa','te1zy3y','B3iGChjVBxb0oG','zw5HyMXLx2HY','tvjgDMe','lI4U','uMjctu8','of91ChnJywXLCG','zxjYB3i','Axrxu3y','yK1nAwW','cI0GkIPbrgv0yq','r0vorvjbvevFsq','C3rFy2HHDhu4xW','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','AvfiyM0','C2tOR7FMSylNLj/LM77PLjNOR686ia','uKDqzwu','qMTMzLO','zw5fyMK','AgTsrNe','yMjSy2G','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','BgvUz3rO','BMvYyxrPB24','vunqx3nK','zML4','Aw1Hz2vhzw5jBG','D2DRC3q','zty0ioAvSoAnRUwKHoEqHUoaGG','s2TOt3G','yNvpwMq','BgvY','C2rvCMW','Bw9KzwW','B3zLCNjPzgvFCW','DM9tt3e','uhjVBxb0ktOQkG','Cgf5Bg9Hza','zxvL','EMXjr2y','zgjpsMG','kcGOlISPkYKRkq','uLLYBxu','BI9QC29U','BfvhAw0','A1jxAeu','zxH0zw5ZAw9UxW','CLfpqK0','C2v0DgLUz3nZlG','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','C2r3zwj1AEEuN+wBVUwpGG','wKDNvMW','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','zwvKktOQkIa','EvLjA1m','ExvZAgvPzf9Zza','otLoAxzZzvO','m3WYFdb8nhW1Fa','cI0GkIRMLl7LPkFLGi3NJOCG','6zQp5PY6kc0Xkq','icHjrdOG','6zsz6k+VoIa','CMf0Aw5NigLTyq','y29UC3rYDwn0BW','77Ym6k+35Qoa5P+LC2r3zwj1','sLnptIdOP6pMNPdLPlhOTkxVViW','CxHXu1i','se9bDu4','cI0GkIPdBgLWia','C3rHDhvZvgv4Da','of9Zy2HLzhvSzq','nZiWmJmXtunYvvj5','Dg9Rzw4','Bg9Hza','D2DjBwG','loAOOEwEI+s4UG','u2nLBMuGq29TCa','C2rFy2nOyxr1xW','u3DdD1y','C2fTCgXLCL9Uyq','EejOtMG','EgLHBMnOzw5N','kfjLC3rVCMuGrG','EhLhBva','swrIt3m','tLrAvhG','B2rLBcK6kIOG','44cc6k+35Qoa5P+LC2r3zwj1','tLnf','y2vZ','cI0TlqOJiYmG55sF','EwvYCW','AxPLktOQkIa','suq6ia','CMvZDg9Yzv9Myq','twTwtKC','qvfux3nK','Dg9tDhjPBMC','rMfLAwK','BxbXz04','z1PKD1i','B21WDa','sNjzCNi','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','Cgf5C3rFy2HHDa','ywrKvgfZAW','qKfKBhi','kerLBM9PC2LUzW','CgfYC2u','zMfJzv95B2XVDG','l3nKyxbPl3yXlW','5lI6Dhj1zq','otK0oeLSy0jRDG','ALbYvgu','AKfiCuy','vgPHsfC','yxbWBgLJyxrPBW','kerPDMLKzv9YBW','BMvYyxrL','AK9bqum','56cboIa','BvboshC','rLD3tuG','C2rFy2HPCMvZxW','E+s/RUwBVN0','Dgv4Da','sgjpueu','uhz0uu0','5lU75yQH5BEY5y+w5RAi','rfzVzwy','mtf3thHUv3m','ktOQkIa','5zon5BQu5yAf5A65oG','Aw5Nx3n0CMvUzW','AxbSBM8','rez6BwG','zw5LCG','Aw1Hz2vZ','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','yw1L','cI0GkIPdrKCGuW','Aw1Hz2u6','tufhrv9srvfvrq','CMvZDg9YzuzHyW','DhDYDe0','zv9Mywn0B3i','5lIT55QeihbYB21WDooaGG','wwTyt0W','rvfJAuS','C2rFy3n0zxbZ','of9TB2rLBa','mJiYmG','C2vHCMnO','C3rYzw5NDgG','Cwv5txy','mLbvvfzQuW','Aw5PDgLHBgL6zq','Cvf0uu0','C2rFy2nSAxbFCW','C2rFC3rVCf9Nzq','rgjirMO','DhH0mMLTzW','C2rFy2fKzxrHAq','5BEY5ywZ6zET44cc','y29TCgXLDgvuyq','ifn0CMvUz3rOkq','EgLHBMnOzw5Nia','DgzNsfa','C2rdzMDty2fSzq','zxr0Aw5NCW','B1vzv0y','C2rFy3vWC2nHBa','y2HHBMDL','r3vwwK8','BgvZktOG','ywnLCYK6kIOG','BwvZC2fNzq','zw1PDa','sKjNEMS','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','ExvZAgu','zgf0ytPPBwfNzq','B3nPDgLVBG','C3rLChm','D1DAB3C','C2rFy2rLBM9PCW','lcdOR6BMG4u6ia','q0D1DLa','z2u6','cI0GkIRPQ5JMUixKV67LPi0G','z0jezvi','wKngzui','BMvNyxrPDMvqCG','ke5Lz2f0AxzLia','cI0GkIRMRAxMLBaGkfm','44cc5zon5BQu5yAf5A65oIa','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','ChqPoIOQia','y2XPzw50','u2TPCdOQkIa','C3rYAw5NAwz5','cI0GkIRPH4FMOlFMLRNMS5uG','oIOQia','zhL5s3i','vejOA3q','zML4zwrqCM9TCa','vxHKCgu','Aw5JBhvKzxm','AwLmBfK','ktOG','C2rFyxv0Aa','cI0GkIRMQkhLNOSGke0','5BI4icHjrdOG','rNbqvNu','EvHbAge','EgvnDwy','Dc1TB2rLBa','og4UChq','r2jquLe','we91qLO','5Q2J5zYO6ycA6l+hC2r3zwj1','mtaWmvnKqLfWtG','yuXntvG','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','q2HHCMfJDgvYia','qKXZwMW','l2fWAs9Zzc9Nzq','txDnALG','CMvTB3zLtgLZDa','u1HsD3O','ywn0B3iPoIOQia','DtHFC2rFyxv0Aa','55sO5lQo55sF5OIq55QevgfNoIa','5BEY5yID5AEl5yYw44cc','Dhj1zq','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','ksaTifbYB21WDa','cI0GkIPwquu6kG','yNrxD1u','zezwD0i','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','zM5LBwi','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','Ee5MCfa','C2rFy3DPzhrO','6AUy5RIf5l+U5Asnios4UG','y21VzgvSmJiYmG','u0qGqvbjioI/LowBNUMuMq','l2fWAs9Zzc9Zzq','vhzUyKW','DgvYDMfS','C3bSAxq','ExPtr2O','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','s3biwxC','rxjYB3iGz2vUzq','nte4ndeXDKXWugfP','5yYw5lI6igrHDgeGvvi','y2zNx3nJywXL','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','tePmA24','ufHYBeK','AML1z3vHBG','DxjS','sKPHExa','C2vLza','ANnVBG','DxbKyxrLu3rHDa','tfj2BgG','C3vIC3rYAw5N','A1PAwem','y2fJAgu','uNzXqxq','ChjVBxb0','DgHtDKG','zw5HyMXLx2HYia','yKD5v00','ifbYB21WDa','C3vJy2vZCW','uwn3DLe','BwHuvhK','u0rmAxn0zw5LCG','r0Tewfq','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','A0HvEhe','Avfcq0u','AerLquy','6k6+572U5QIH5z6llI4U5lI6','vxPitKe','uNrSCfy','DLvtEKm'];_0x21b3=function(){return _0x3b4c97;};return _0x21b3();}import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;async function generateSDImage({prompt:_0x5a3f10,width:_0x35bce2,height:_0x5cd5f5,change:_0x4d4bb6}){const _0x426457={'lUGim':function(_0x3de1d0){return _0x3de1d0();},'CbrhA':function(_0x2e2287,_0x24e383){return _0x2e2287+_0x24e383;},'btWwU':function(_0x16dea5,_0x24dc41){return _0x16dea5<=_0x24dc41;},'wgImh':_0x101b3c(0x369,0x384,0x3c7,0x3fc),'xNfpP':_0x101b3c(0x4b2,0x40e,0x367,0x474)+_0x101b3c(0x388,0x386,0x41f,0x422),'zJzxw':_0x101b3c(0x387,0x3ef,0x347,0x416),'bMMil':_0x101b3c(0x4d8,0x45a,0x3e2,0x3ba)+'像数据。','QcwvQ':function(_0x2ac1c1,_0x74df5d){return _0x2ac1c1(_0x74df5d);},'zlIGf':function(_0x50d968,_0xabca54){return _0x50d968(_0xabca54);},'FkikX':_0x29c70a(0x3b,0xaf,0x132,0x102)+_0x29c70a(0x22,0x78,0xce,0x7e),'BLsZl':function(_0x10cc55,_0x57b8bd){return _0x10cc55!==_0x57b8bd;},'rQOBM':'dFVwB','zcFBd':function(_0x207b04){return _0x207b04();},'XOuBZ':function(_0x440658,_0xc6f9b){return _0x440658||_0xc6f9b;},'FpPVu':_0x29c70a(-0x2f,0xd,-0x99,-0x53),'PXrlI':function(_0x39f9b8,_0x3d81db){return _0x39f9b8(_0x3d81db);},'FWwMH':function(_0xc1cc9b,_0x5d93f1){return _0xc1cc9b(_0x5d93f1);},'hkRFq':function(_0x2c8179,_0x56efe5){return _0x2c8179(_0x56efe5);},'iQHbm':function(_0x466b65,_0x1e9e0a){return _0x466b65(_0x1e9e0a);},'bblch':_0x101b3c(0x323,0x3bb,0x320,0x381)+_0x29c70a(0x105,0xbf,0xd6,0x129),'RGPee':function(_0x4e4e95,_0x2e3d58){return _0x4e4e95===_0x2e3d58;},'LRvlh':_0x101b3c(0x3e7,0x3d3,0x473,0x382),'woiOL':function(_0x43d854,_0x819936){return _0x43d854(_0x819936);},'yXAha':function(_0x3c1f47,_0x27899b){return _0x3c1f47(_0x27899b);},'cHflT':_0x101b3c(0x37b,0x3a3,0x42a,0x35a)+'坐标的提示词字符串。','DnqqF':function(_0x32fd24,_0xdd377d){return _0x32fd24+_0xdd377d;},'SXRwz':_0x101b3c(0x3c7,0x38a,0x38d,0x31a),'PvtQM':function(_0x1cd816,_0x2451c9){return _0x1cd816(_0x2451c9);},'RbBMO':_0x101b3c(0x3f8,0x3a0,0x438,0x382)+_0x101b3c(0x38e,0x401,0x463,0x385),'uFmVM':function(_0x2e05c1,_0x782e90,_0x258e2c){return _0x2e05c1(_0x782e90,_0x258e2c);},'TvnbL':function(_0x217526,_0x1489c4,_0x3dbb86,_0x5e852b,_0x1655f9,_0x8062c){return _0x217526(_0x1489c4,_0x3dbb86,_0x5e852b,_0x1655f9,_0x8062c);},'oUYWF':'auto_url','KpHYw':function(_0x38f5c9){return _0x38f5c9();},'buOZd':function(_0x7fd3b4,_0x20b09b){return _0x7fd3b4!==_0x20b09b;},'BIyuv':_0x29c70a(0x54,0x9d,0x71,0x56),'CJbpE':function(_0x5ee3b7,_0x35b341){return _0x5ee3b7===_0x35b341;},'jAHqF':_0x29c70a(0xf2,0x10f,0xe4,0xde),'yplGI':'POST','BAdlr':_0x101b3c(0x426,0x39d,0x401,0x37e)+_0x101b3c(0x3a1,0x39f,0x426,0x406)+_0x29c70a(-0x4,0x56,0x3f,-0x25)+_0x29c70a(-0x6,0x9f,0xb3,0x123),'IdbOs':function(_0x309e04,_0x153a34){return _0x309e04!=_0x153a34;},'BkffZ':_0x101b3c(0x4a9,0x467,0x3f6,0x42d)+_0x29c70a(0x77,0xe1,0xd5,0x9d),'MRFva':'dyyKr','dbOJh':function(_0x1c8245,_0x344115){return _0x1c8245!=_0x344115;},'yYIkS':_0x29c70a(0xc5,0xb6,0xbb,0xd0),'vUSzC':function(_0x4ddcaf,_0x2e6058){return _0x4ddcaf(_0x2e6058);},'MffhS':function(_0x26d58e,_0x2871a4){return _0x26d58e>=_0x2871a4;},'DVoef':function(_0x3f4664,_0x11ed15){return _0x3f4664(_0x11ed15);},'wTJCk':function(_0x340355,_0x27c3e4){return _0x340355==_0x27c3e4;},'RtlpV':_0x101b3c(0x3d2,0x459,0x3f9,0x3e6),'guDsT':function(_0x334f6e,_0x248a5e){return _0x334f6e(_0x248a5e);},'Uxdpe':function(_0x442cac,_0x164928){return _0x442cac!==_0x164928;},'VeCyF':function(_0x212d64,_0x21ea9d){return _0x212d64(_0x21ea9d);},'mpqgN':function(_0x1292e5,_0x1cee7f,_0x15eda4){return _0x1292e5(_0x1cee7f,_0x15eda4);},'uKMvr':_0x29c70a(0x9d,0x76,0x56,0x44)+_0x29c70a(0x3a,0xe2,0xb0,0xec),'JcqCa':_0x29c70a(0xda,0x44,-0xa,0x77),'jIled':function(_0x225cc7,_0x1a64d3){return _0x225cc7(_0x1a64d3);},'JJayp':function(_0x49f332,_0x47abbb){return _0x49f332(_0x47abbb);},'vWubc':_0x29c70a(0x93,0x2e,0x69,-0x3e),'lZHmM':_0x101b3c(0x53d,0x4af,0x483,0x536),'DFzmh':function(_0x25e52a,_0x1a167d){return _0x25e52a===_0x1a167d;},'thSvH':_0x101b3c(0x38c,0x3d7,0x410,0x34e)+_0x101b3c(0x433,0x456,0x449,0x412)+_0x29c70a(-0x1d,0x52,0xf1,0x8e),'pWmsg':'/api/sd/ge'+_0x101b3c(0x3e1,0x3e5,0x3ad,0x33e),'KkhOx':function(_0x3672df,_0xc89c84){return _0x3672df(_0xc89c84);},'aLMMX':function(_0x158053,_0x151890){return _0x158053===_0x151890;},'INQsO':_0x101b3c(0x481,0x3e8,0x3d6,0x35f),'ZGgVl':function(_0x5677c5,_0x529e2e){return _0x5677c5(_0x529e2e);},'Faeii':_0x101b3c(0x35f,0x3f3,0x41f,0x3b7),'ZCFeB':'hjPSZ','tfgHP':'sznoZ','fnemb':_0x101b3c(0x43f,0x3b0,0x351,0x39b)+'尝试作为原始\x20Bas'+_0x101b3c(0x3cb,0x38b,0x409,0x3db),'aTOrw':function(_0x4c8fa2,_0x464b4e){return _0x4c8fa2+_0x464b4e;},'RYrmu':_0x101b3c(0x445,0x424,0x484,0x3c6)+_0x29c70a(0xf7,0x131,0x192,0xd8)+'4,','HVjAi':function(_0x311f23,_0x1951c0){return _0x311f23(_0x1951c0);},'JrvME':_0x29c70a(0x114,0xf9,0x6d,0x186)+_0x101b3c(0x4a8,0x470,0x509,0x47e)+'L。','YTxmq':function(_0x383cef,_0x31b14f){return _0x383cef||_0x31b14f;},'Goaua':function(_0x11406a,_0x49c587){return _0x11406a!==_0x49c587;},'JBgzk':_0x29c70a(0x33,0x5c,0x30,0x30),'tUHEN':_0x29c70a(0x125,0x126,0x102,0x1ae),'NTZTx':function(_0x34aa54,_0x58d14c){return _0x34aa54!==_0x58d14c;},'HOAuN':function(_0x272bd0,_0x36e8cf){return _0x272bd0+_0x36e8cf;},'hDeAF':_0x29c70a(0x89,0x77,0xaf,0x28)+_0x101b3c(0x498,0x410,0x45e,0x3a5),'iplno':function(_0x290983,_0x52d1a5,_0x9516ea){return _0x290983(_0x52d1a5,_0x9516ea);},'qYDbJ':_0x101b3c(0x3fa,0x3e3,0x43b,0x33f)+_0x29c70a(0x90,0x34,0x7,0xa6),'kRWhE':function(_0x44e248){return _0x44e248();},'clpMi':function(_0x112a4d,_0x2e9999,_0x4da62f){return _0x112a4d(_0x2e9999,_0x4da62f);},'DbHFj':function(_0x59c67f,_0x39b221){return _0x59c67f===_0x39b221;},'LMYcv':_0x29c70a(0x62,0xec,0xf4,0x117),'NqBhZ':function(_0x186d0e,_0x4eafe9){return _0x186d0e||_0x4eafe9;},'MMEZZ':_0x101b3c(0x3a1,0x3a8,0x39d,0x40b)+'1','enEbi':function(_0x4bc7e6,_0x3d8327){return _0x4bc7e6===_0x3d8327;},'hMcvK':function(_0x11ceae,_0x4df6da){return _0x11ceae(_0x4df6da);},'MkVNG':_0x29c70a(0xa3,0x108,0x100,0xba)+_0x101b3c(0x404,0x3ad,0x3ff,0x30d)+'ge:'};_0x426457['zcFBd'](clearLog);const _0x136924=taskQueue[_0x101b3c(0x480,0x3d8,0x40f,0x3b9)]({'name':_0x426457[_0x101b3c(0x495,0x44a,0x3f0,0x3fe)](_0x5a3f10,'')[_0x101b3c(0x4bd,0x47c,0x3e7,0x4e0)](0x70*0x3f+0x265b+-0x2d*0x177,0x5c9+-0x1*-0x1fb0+-0x255b)+(_0x5a3f10&&_0x5a3f10['length']>-0x3*-0x45a+0x303*-0x2+0xf*-0x76?_0x426457[_0x29c70a(0x17b,0xde,0xe6,0x111)]:''),'type':TaskType['SD'],'prompt':_0x5a3f10});currentTaskId=_0x136924;let _0x15429d=_0x4d4bb6;_0x5a3f10=_0x426457['PXrlI'](processCharacterPrompt,_0x5a3f10),_0x4d4bb6=_0x426457[_0x101b3c(0x3c5,0x3e9,0x420,0x3d5)](processCharacterPrompt,_0x4d4bb6),_0x5a3f10=await _0x426457[_0x101b3c(0x38e,0x382,0x426,0x2e6)](stripChineseAnnotations,_0x5a3f10);function _0x101b3c(_0x44a074,_0x3a3fc7,_0x475908,_0x2fb30e){return _0x1781(_0x3a3fc7-0x233,_0x475908);}_0x4d4bb6=await _0x426457[_0x101b3c(0x394,0x37d,0x3a5,0x3d3)](stripChineseAnnotations,_0x4d4bb6);const _0x1735d5=extension_settings[extensionName][_0x29c70a(0x1b,0x29,-0x67,0x92)][_0x101b3c(0x529,0x493,0x4f8,0x517)](),_0x4fce67=extension_settings[extensionName];_0x426457[_0x29c70a(-0x48,0x1c,-0x59,0x95)](addLog,_0x29c70a(0x72,0xe5,0xed,0xcb)+'i生成图片...客户'+'端为'+_0x4fce67[_0x101b3c(0x4db,0x435,0x4b8,0x4b7)]+_0x29c70a(0xd4,0x54,0x30,0xbf)+_0x4fce67[_0x29c70a(0xb1,0x56,0x22,0x53)+_0x101b3c(0x366,0x405,0x432,0x43c)]);const _0x280216=_0x4d4bb6&&_0x4d4bb6[_0x29c70a(0x10c,0x12d,0x87,0xae)]()!==''?_0x4d4bb6:_0x5a3f10;addLog(_0x29c70a(0xfd,0xf1,0x149,0x18f)+_0x280216);let _0x2e0f6a=![];_0x280216[_0x29c70a(0x15c,0xd8,0x44,0x74)](_0x426457['bblch'])&&(_0x426457[_0x101b3c(0x31b,0x37f,0x40c,0x3de)](_0x426457[_0x29c70a(0x7f,0x115,0x80,0x175)],_0x426457[_0x101b3c(0x500,0x47b,0x470,0x46e)])?_0x2e0f6a=!![]:(_0x1b9ef0['initialize'+_0x29c70a(0x7c,0x122,0x170,0x190)]=!![],_0x426457[_0x29c70a(0x36,0x35,0xc0,0x3d)](_0xcef71a)));_0x426457['woiOL'](addLog,_0x101b3c(0x2f9,0x37c,0x391,0x340)+_0x29c70a(0xbc,0x7e,0xcf,0x93)+_0x29c70a(0x2d,0xb7,0x99,0x129)+_0x2e0f6a);let _0x5dd6ab={},_0x58181e='',_0x3ac8df='';if(_0x2e0f6a){_0x426457[_0x29c70a(0x57,0xdf,0xed,0x128)](addLog,_0x426457['cHflT']),_0x5dd6ab=_0x426457[_0x29c70a(-0x6d,0x1c,0xad,-0x31)](parsePromptStringWithCoordinates,_0x280216),_0x58181e=_0x5dd6ab[_0x426457[_0x101b3c(0x32b,0x383,0x41f,0x37b)]];for(let _0x52ea35=-0x789+-0x77f+0xf09;_0x52ea35<=-0xb7e+-0xef9*-0x1+-0x377;_0x52ea35++){_0x5dd6ab['Character\x20'+_0x52ea35+'\x20Prompt']&&(_0x3ac8df=_0x426457[_0x101b3c(0x50f,0x4bf,0x4c0,0x4b8)](_0x426457['DnqqF'](_0x3ac8df,',\x20'),_0x5dd6ab[_0x29c70a(0xe5,0xe9,0x15b,0xd4)+_0x52ea35+'\x20Prompt']));}}else _0x426457[_0x101b3c(0x466,0x450,0x3e6,0x43c)](_0x426457[_0x101b3c(0x459,0x454,0x42c,0x4ba)],'SvMPh')?(_0x426457[_0x29c70a(0x6d,0x88,0x6b,0x4b)](addLog,_0x426457[_0x29c70a(-0x59,0xe,-0x53,-0x61)]),_0x58181e=_0x280216):_0x6dfe90[_0x29c70a(0x79,0xe9,0x8f,0xaa)+_0x1652a8+'\x20Prompt']&&(_0x8852f8=_0x426457[_0x29c70a(0x170,0x159,0x13d,0x122)](_0x426457[_0x29c70a(0xcc,0x159,0x1ee,0xc0)](_0x260d0a,',\x20'),_0xc80225[_0x101b3c(0x496,0x44f,0x492,0x421)+_0x2283b7+'\x20Prompt']));let {modifiedPrompt:_0x322ffa,insertions:_0x13f7ee}=await _0x426457[_0x101b3c(0x4b2,0x49b,0x4f5,0x4e6)](prompt_replace,_0x58181e,_0x3ac8df);if(_0x2e0f6a)for(let _0x1624fe=0x84c+0x155c+-0x1da7*0x1;_0x426457[_0x29c70a(0x12f,0xf7,0x186,0x6f)](_0x1624fe,-0x2f*0x76+-0x617*0x4+-0xa6*-0x47);_0x1624fe++){_0x5dd6ab[_0x29c70a(0x125,0xe9,0x178,0xf0)+_0x1624fe+_0x29c70a(0x12e,0x11e,0xf2,0x88)]&&(_0x322ffa=_0x322ffa+',\x20'+_0x426457[_0x29c70a(0xb0,0x10e,0x17a,0x121)](prompt_replace_for_character,_0x5dd6ab[_0x101b3c(0x45d,0x44f,0x3dd,0x4c8)+_0x1624fe+_0x29c70a(0x1a2,0x11e,0x18d,0x7d)]));}let _0x4f91b2=await _0x426457[_0x101b3c(0x3eb,0x468,0x447,0x484)](zhengmian,extension_settings[extensionName][_0x101b3c(0x4ca,0x423,0x433,0x467)][extension_settings[extensionName][_0x29c70a(0xe2,0x40,0xd9,0x5d)]][_0x101b3c(0x428,0x43c,0x432,0x466)+'t'],_0x322ffa,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x101b3c(0x373,0x3a6,0x44e,0x3fe)]][_0x101b3c(0x3ff,0x43c,0x3fa,0x3ff)+'t_end'],extension_settings[extensionName][_0x101b3c(0x470,0x3cf,0x33e,0x45d)],_0x13f7ee),_0x10e7c8=await _0x426457[_0x29c70a(0x1b2,0x135,0xca,0x1d6)](fumian,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x101b3c(0x41e,0x3a6,0x43e,0x2fe)]][_0x29c70a(0x15d,0xc9,0x12b,0xcb)+_0x101b3c(0x3df,0x3d4,0x333,0x3aa)],extension_settings[extensionName][_0x101b3c(0x38e,0x387,0x391,0x427)]);addLog(_0x29c70a(0xe1,0x13b,0xd4,0x114)+_0x10e7c8),extension_settings['sd'][_0x426457[_0x101b3c(0x3af,0x419,0x374,0x382)]]=_0x1735d5,await _0x426457[_0x101b3c(0x509,0x46d,0x4fa,0x422)](saveSettingsDebounced);try{if(_0x426457[_0x101b3c(0x337,0x38d,0x303,0x3de)](_0x29c70a(0xad,0x9d,0x62,0x70),_0x426457[_0x29c70a(0x1c4,0x14d,0x1df,0x1eb)]))_0x3be7f5[_0x29c70a(0x1ef,0x153,0xdf,0x11f)](_0x101b3c(0x470,0x415,0x465,0x36f)+'为true'),_0x37d6a9['xiancheng']=!![];else{if(_0x426457[_0x29c70a(0xf2,0x139,0x1b2,0xd0)](_0x4fce67[_0x29c70a(0x7e,0xcf,0xf2,0xd0)],_0x426457['jAHqF'])){const _0x1e48b1={};_0x1e48b1[_0x101b3c(0x522,0x4a0,0x51e,0x536)]=_0x4fce67[_0x101b3c(0x3a0,0x37b,0x2f3,0x352)+'sd_auth']?_0x4fce67[_0x101b3c(0x3b7,0x37b,0x34d,0x33f)+_0x29c70a(0xa2,0xdb,0x101,0x39)]:'',_0x1e48b1[_0x101b3c(0x429,0x476,0x4c9,0x3f4)]=_0x1735d5;const _0x5989dc=await fetch(_0x29c70a(0x165,0xeb,0x11b,0xc2)+_0x29c70a(0x48,0xe1,0x108,0x15d),{'method':_0x426457['yplGI'],'body':JSON[_0x101b3c(0x4c9,0x437,0x3e5,0x4dc)](_0x1e48b1),'headers':getRequestHeaders(window[_0x101b3c(0x32f,0x3b7,0x31f,0x440)])});if(!_0x5989dc['ok']){addLog(_0x101b3c(0x502,0x4c1,0x52a,0x4f8)+_0x5989dc[_0x101b3c(0x46b,0x4a5,0x4de,0x4c4)]+'\x20'+_0x5989dc[_0x101b3c(0x3b3,0x3b4,0x413,0x440)]);throw new Error(_0x101b3c(0x548,0x4c1,0x4d4,0x48e)+_0x5989dc[_0x29c70a(0xc7,0x13f,0x1d4,0x182)]+'\x20'+_0x5989dc[_0x101b3c(0x393,0x3b4,0x433,0x3df)]);}let _0x2db857=await _0x5989dc[_0x29c70a(0x4a,0x86,0x74,0xbd)]();console[_0x29c70a(0x189,0x153,0x19a,0xdd)](_0x29c70a(0x139,0xff,0x192,0x17a)+_0x101b3c(0x45a,0x406,0x3e6,0x457),_0x2db857),console[_0x101b3c(0x422,0x4b9,0x423,0x45c)](_0x426457[_0x101b3c(0x379,0x3d9,0x419,0x378)],_0x4fce67[_0x29c70a(-0xe,0x56,0x9a,0x72)+_0x29c70a(0x58,0x9f,0xec,0x105)]);if(_0x426457[_0x101b3c(0x451,0x3c3,0x3c2,0x36a)](_0x2db857,_0x4fce67['sd_cchatu_'+'8_model'])){_0x426457['PvtQM'](addLog,_0x101b3c(0x52f,0x498,0x4cb,0x532)+_0x4fce67['sd_cchatu_'+_0x29c70a(0x13c,0x9f,0x99,0x11a)]+_0x101b3c(0x30d,0x373,0x375,0x38d)),toastr[_0x29c70a(0x14a,0x144,0xa6,0x18f)](_0x29c70a(0x1f,0x93,0x11a,0x68)+_0x4fce67[_0x29c70a(0x5f,0x56,0x40,0x4b)+'8_model']);const _0x2121ac={};_0x2121ac['auth']=_0x4fce67[_0x29c70a(-0x7d,0x15,-0x88,0x34)+'sd_auth']?_0x4fce67[_0x29c70a(0x56,0x15,-0xb,-0x16)+_0x29c70a(0x14d,0xdb,0x180,0xaa)]:'',_0x2121ac[_0x101b3c(0x448,0x476,0x482,0x3ce)]=_0x1735d5,_0x2121ac[_0x29c70a(-0x2b,0x2a,-0x4b,0xb9)]=_0x4fce67[_0x29c70a(0x5b,0x56,-0x3b,-0x46)+'8_model'];const _0x26658e=await fetch(_0x426457[_0x29c70a(0x1b,0x1a,0x0,-0x2a)],{'method':_0x426457['yplGI'],'body':JSON[_0x101b3c(0x48c,0x437,0x3cd,0x4a6)](_0x2121ac),'headers':_0x426457['QcwvQ'](getRequestHeaders,window[_0x29c70a(-0x16,0x51,0x5c,-0x27)])});if(!_0x26658e['ok']){if(_0x29c70a(0x86,0xd4,0xe7,0x151)===_0x426457[_0x101b3c(0x362,0x372,0x3e2,0x2e5)]){addLog(_0x29c70a(0x12c,0x14f,0xc8,0xe7)+_0x26658e['status']+'\x20'+_0x26658e['statusText']);throw new Error(_0x101b3c(0x473,0x4b5,0x531,0x46b)+_0x26658e[_0x101b3c(0x409,0x4a5,0x4a1,0x4ec)]+'\x20'+_0x26658e[_0x101b3c(0x3a0,0x3b4,0x315,0x31a)]);}else{const _0x5b6b3b=_0x2f4d1a[_0x29c70a(0x1ae,0x12f,0x170,0x12c)](_0x5e08df,arguments);return _0x45373c=null,_0x5b6b3b;}}toastr[_0x29c70a(0x137,0x144,0x15d,0xda)](_0x29c70a(0xfb,0x128,0x113,0xe9)+_0x4fce67[_0x101b3c(0x3f3,0x3bc,0x3e5,0x3f6)+_0x101b3c(0x497,0x405,0x450,0x468)]+'成功');}}else{let _0x3a5f46=await _0x426457[_0x101b3c(0x42e,0x396,0x315,0x3f7)](getSDMode,_0x1735d5);_0x426457[_0x101b3c(0x3e7,0x397,0x3f6,0x413)](_0x3a5f46,_0x4fce67['sd_cchatu_'+_0x101b3c(0x469,0x405,0x3ec,0x3c4)])&&(_0x426457['PvtQM'](addLog,'正在切换模型为'+_0x4fce67['sd_cchatu_'+_0x29c70a(0x22,0x9f,0xed,0x0)]+_0x101b3c(0x2ca,0x373,0x3f1,0x403)),await setSDMode(_0x1735d5,_0x4fce67['sd_cchatu_'+'8_model']));}}}catch(_0x2b821d){if(_0x426457[_0x101b3c(0x3ba,0x38d,0x435,0x3b5)](_0x426457['yYIkS'],_0x426457[_0x101b3c(0x442,0x3a5,0x395,0x413)]))for(let _0x197542=-0x95c+0x6b*-0x5+0xb74;_0x426457[_0x29c70a(0x151,0xf7,0x18f,0xc7)](_0x197542,0xb*0x10d+-0x1*0x1d4c+0x11c1);_0x197542++){_0x469af9[_0x101b3c(0x3ab,0x44f,0x4d6,0x4f4)+_0x197542+_0x101b3c(0x4bd,0x484,0x516,0x45a)]&&(_0x2eb00c=_0x426457['CbrhA'](_0x10cc99+',\x20',_0x17d31(_0x386ee5[_0x101b3c(0x4cd,0x44f,0x3d1,0x451)+_0x197542+_0x29c70a(0x15b,0x11e,0x19c,0x16b)])));}else{addLog(_0x101b3c(0x3c9,0x422,0x3db,0x3cc)+':\x20'+_0x2b821d[_0x101b3c(0x385,0x41f,0x399,0x4c7)]+(_0x29c70a(0xc3,0x60,0x102,0x76)+'i是否正常启动，并检'+_0x101b3c(0x3ff,0x472,0x4af,0x3eb))),taskQueue[_0x29c70a(0xc3,0xad,0x113,0x5d)+'sk'](_0x136924,![]),currentTaskId=null;throw new Error(_0x101b3c(0x3d3,0x422,0x4aa,0x429)+_0x101b3c(0x41e,0x3af,0x31e,0x307)+_0x29c70a(0x17e,0x124,0x10e,0x121)+_0x101b3c(0x4bc,0x472,0x410,0x3e9));}}let _0xd4eee7=-(0x45*0x7f+-0xd8*0x2d+0x3be);const _0x352a78=_0x4fce67['sd_cseed'];_0x426457[_0x101b3c(0x3a8,0x38d,0x32d,0x3ab)](_0x352a78,'')&&_0x426457[_0x101b3c(0x3e8,0x450,0x496,0x49c)](_0x352a78,null)&&!isNaN(_0x426457[_0x29c70a(0x197,0x12b,0x1b4,0x12a)](Number,_0x352a78))&&_0x426457['MffhS'](Number(_0x352a78),-0xd3*0x7+-0x1077*0x2+0x1*0x26b3)&&(_0xd4eee7=_0x426457[_0x29c70a(0x1a,0x8a,0xcc,0x4c)](Number,_0x352a78));let _0x3aed8e={'prompt':_0x4f91b2,'negative_prompt':_0x10e7c8,'sampler_name':_0x4fce67[_0x29c70a(0x7b,0x56,0x19,-0x39)+'8_samplerN'+_0x29c70a(0xe8,0x94,0x2,0xaa)],'scheduler':_0x4fce67[_0x101b3c(0x358,0x3bc,0x3ce,0x38e)+_0x101b3c(0x359,0x3b5,0x364,0x412)+'r'],'steps':_0x4fce67[_0x101b3c(0x446,0x404,0x3e6,0x3b2)],'cfg_scale':_0x4fce67[_0x101b3c(0x3af,0x417,0x37b,0x4a3)],'width':_0x35bce2?_0x35bce2:_0x4fce67[_0x29c70a(0x140,0xfd,0x151,0x10e)],'height':_0x5cd5f5?_0x5cd5f5:_0x4fce67['sd_cheight'],'restore_faces':_0x426457[_0x29c70a(0xf9,0x154,0xce,0x151)](_0x4fce67[_0x101b3c(0x3a0,0x3fe,0x3c5,0x42b)+'es'],_0x426457[_0x29c70a(0x17c,0x12a,0x9e,0x94)]),'enable_hr':_0x4fce67[_0x29c70a(0xa5,0x84,0x11,0xf8)+_0x101b3c(0x3ec,0x388,0x3b4,0x35c)]==_0x426457[_0x29c70a(0x189,0x12a,0xd5,0xb7)],'hr_upscaler':_0x4fce67[_0x101b3c(0x461,0x3bc,0x41b,0x347)+_0x101b3c(0x2ee,0x375,0x3df,0x2f6)],'hr_scale':_0x4fce67[_0x101b3c(0x376,0x41a,0x41d,0x3c8)+_0x29c70a(-0x2,0x9a,0xd,0x12e)],'hr_additional_modules':[],'denoising_strength':_0x4fce67[_0x101b3c(0x4ad,0x428,0x47d,0x39e)+_0x29c70a(0xa4,0x8e,0xf6,0x41)+'th'],'hr_second_pass_steps':_0x4fce67[_0x29c70a(0xc2,0x84,0xbd,0x17)+'steps'],'seed':_0xd4eee7,'override_settings':{'CLIP_stop_at_last_layers':_0x426457['guDsT'](Number,_0x4fce67[_0x29c70a(0xb6,0xa7,0x91,0x13c)+_0x101b3c(0x4b2,0x4ad,0x533,0x429)]),'sd_vae':_0x4fce67[_0x29c70a(0x8d,0x56,-0x3d,0xb4)+'8_vae']},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x426457[_0x101b3c(0x460,0x486,0x491,0x473)](addLog,'restore_fa'+_0x101b3c(0x531,0x49c,0x456,0x4b5)+_0x3aed8e[_0x101b3c(0x409,0x3cd,0x459,0x458)+_0x101b3c(0x455,0x3c8,0x322,0x44a)]),_0x426457['vUSzC'](addLog,_0x101b3c(0x526,0x482,0x4d7,0x450)+_0x29c70a(0x112,0xfe,0x143,0x188)+_0x3aed8e[_0x29c70a(0x5,0xb,0xb4,0xa4)]);if(_0x426457[_0x29c70a(0xd8,0x154,0x146,0x109)](_0x4fce67[_0x29c70a(0x111,0xab,0x53,0x8a)+_0x101b3c(0x301,0x38e,0x336,0x37e)],_0x426457[_0x29c70a(0x84,0x12a,0xef,0xc2)])){if(_0x426457[_0x29c70a(0xe1,0xd7,0xd6,0x61)](_0x29c70a(0xef,0x119,0x101,0x117),_0x29c70a(0x160,0x119,0xe5,0x134))){_0x1007a0(_0x426457[_0x101b3c(0x32a,0x3b9,0x397,0x32d)]),_0x4faa50['emit'](_0x426457[_0x29c70a(0x99,0xfc,0x92,0x112)]);throw new _0x278d4e(_0x426457['zJzxw']);}else _0x426457[_0x29c70a(0x1ee,0x14b,0x11f,0xa5)](addLog,'adetailer_'+'face\x20为开启'),_0x3aed8e=_0x426457[_0x101b3c(0x3c4,0x3d2,0x34f,0x43c)](deepMerge,_0x3aed8e,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x426457[_0x29c70a(0xce,0x133,0x196,0x1cf)]}]}}});}const _0x2a9335=_0x101b3c(0x46c,0x3c9,0x3d1,0x348)+'图参数报告\x0a-\x20**'+'正面提示\x20(Prom'+_0x101b3c(0x3cb,0x434,0x407,0x3ac)+_0x4f91b2+(_0x101b3c(0x4d4,0x4ae,0x4f1,0x44e)+_0x29c70a(0x106,0xca,0xa3,0xea)+_0x101b3c(0x397,0x393,0x36f,0x313)+'\x20')+_0x10e7c8+(_0x101b3c(0x46d,0x438,0x4ad,0x474)+'(Sampler):'+'**\x20')+_0x3aed8e[_0x101b3c(0x450,0x3be,0x392,0x438)+'me']+(_0x101b3c(0x3aa,0x431,0x484,0x44c)+'teps):**\x20')+_0x3aed8e[_0x29c70a(0xd4,0xc0,0x96,0xac)]+(_0x29c70a(0x5,0x95,0x3c,-0xc)+'cale:**\x20')+_0x3aed8e[_0x101b3c(0x419,0x471,0x44d,0x4bc)]+('\x0a-\x20**尺寸\x20(S'+_0x101b3c(0x470,0x3cb,0x43e,0x41b))+_0x3aed8e[_0x101b3c(0x41f,0x4a9,0x457,0x450)]+'x'+_0x3aed8e[_0x101b3c(0x428,0x4b0,0x509,0x4d9)]+(_0x29c70a(0x151,0x134,0x140,0x1b7)+_0x29c70a(0xd1,0x3e,0xa8,0x5c))+(_0x426457[_0x29c70a(0xab,0x139,0x167,0x178)](_0x3aed8e[_0x101b3c(0x4e8,0x478,0x4d2,0x425)],-(0x3c5+0x23b1*0x1+-0x2775))?_0x426457['JcqCa']:_0x3aed8e[_0x101b3c(0x4c2,0x478,0x4a1,0x4be)])+(_0x101b3c(0x492,0x442,0x4cb,0x45f)+_0x29c70a(0x50,0x5f,0x2d,-0x26))+_0x4fce67[_0x101b3c(0x384,0x3bc,0x43a,0x361)+_0x101b3c(0x3f2,0x405,0x40d,0x374)]+(_0x101b3c(0x458,0x45c,0x502,0x460)+'*\x20')+_0x3aed8e[_0x101b3c(0x3bf,0x391,0x34e,0x3fd)+_0x101b3c(0x36f,0x418,0x447,0x3eb)]['sd_vae']+(_0x29c70a(0xf0,0x4d,-0x8,0xb)+_0x29c70a(0x32,0xd0,0xc1,0xc9))+_0x3aed8e[_0x29c70a(-0x60,0x2b,-0x73,-0x3b)+'ettings']['CLIP_stop_'+_0x101b3c(0x4d0,0x492,0x51b,0x519)+_0x29c70a(0x8b,0x64,-0x13,0x9a)]+(_0x101b3c(0x3a1,0x42c,0x389,0x437)+_0x101b3c(0x522,0x494,0x4e6,0x51c)+_0x29c70a(0x8d,0x8c,0x115,0x9))+_0x3aed8e[_0x29c70a(0x70,0xb,0x2,0x25)]+(_0x29c70a(0x23,0x43,0x1b,0x7b)+_0x101b3c(0x43d,0x4bb,0x48c,0x4dd)+_0x29c70a(0xe2,0xef,0x91,0x6c))+_0x3aed8e[_0x29c70a(0x170,0x152,0x103,0x157)]+('\x0a-\x20**重绘幅度\x20'+_0x29c70a(0xad,0x74,-0x32,0xb6)+_0x101b3c(0x3a3,0x414,0x400,0x3bf)+_0x29c70a(0x153,0xd3,0xec,0xa6))+_0x3aed8e['denoising_'+_0x101b3c(0x49c,0x408,0x473,0x396)]+('\x0a-\x20**脸部修复\x20'+_0x101b3c(0x3fb,0x3c1,0x3cc,0x352)+_0x29c70a(0x12b,0xb8,0x28,0xa7))+_0x3aed8e[_0x101b3c(0x3e8,0x3cd,0x3d9,0x471)+'ces']+(_0x101b3c(0x41c,0x379,0x349,0x372)+'iler:**\x20')+(_0x4fce67[_0x29c70a(0x8b,0xab,0x80,0x1a)+'ler']==_0x101b3c(0x483,0x459,0x475,0x3e5))+'\x0a---\x0a\x20\x20\x20\x20';function _0x29c70a(_0x399fb9,_0x5d44ea,_0x22fe84,_0x162086){return _0x1781(_0x5d44ea- -0x133,_0x22fe84);}_0x426457[_0x29c70a(0x1c9,0x13e,0x142,0x13c)](addLog,_0x2a9335),_0x426457[_0x29c70a(0x196,0x111,0x189,0x71)](addLog,_0x29c70a(0xae,0x3b,0x77,0xbc)+'数为'+JSON[_0x101b3c(0x444,0x437,0x3bb,0x465)](_0x3aed8e)),console[_0x101b3c(0x435,0x4b9,0x4ca,0x542)](_0x426457['vWubc'],_0x3aed8e);while(!window['xiancheng']){await sleep(0x2*0xf53+0x18ac+-0x2*0x19b5);};try{window['xiancheng']=![],taskQueue[_0x29c70a(0x10f,0x114,0xdd,0x197)+'us'](_0x136924,_0x426457['lZHmM']);if(_0x426457[_0x29c70a(0x41,0x90,0xfe,0x11e)](_0x4fce67['client'],_0x426457[_0x101b3c(0x3c2,0x3e1,0x3e1,0x3a6)])){if(!taskQueue['isTaskInQu'+_0x29c70a(0x8f,0x2f,-0x55,-0x31)](_0x136924)){addLog(_0x426457[_0x29c70a(-0x47,0x53,0x90,0x9)]),eventSource[_0x101b3c(0x4ae,0x420,0x43a,0x3cd)](_0x426457[_0x101b3c(0x3cb,0x462,0x4df,0x4cf)]);throw new Error(_0x426457['zJzxw']);}_0x3aed8e[_0x101b3c(0x488,0x476,0x433,0x500)]=_0x1735d5,console[_0x29c70a(0x15e,0x153,0xd3,0xe5)](_0x426457[_0x29c70a(0x7a,0x11b,0x175,0x118)],_0x4fce67['st_chatu8_'+_0x101b3c(0x4b3,0x441,0x41f,0x485)]),_0x3aed8e[_0x101b3c(0x463,0x4a0,0x4eb,0x425)]=_0x4fce67[_0x101b3c(0x324,0x37b,0x3f1,0x339)+_0x101b3c(0x3ca,0x441,0x4ba,0x470)]?_0x4fce67[_0x29c70a(-0x67,0x15,0xba,-0x5c)+_0x29c70a(0x124,0xdb,0x147,0x138)]:'';const _0x3cd5f8=await _0x426457[_0x29c70a(0x19,0x6c,0x4b,0x87)](fetch,_0x426457['pWmsg'],{'method':_0x426457[_0x29c70a(0x10c,0x13d,0xb9,0x146)],'headers':_0x426457[_0x101b3c(0x329,0x38c,0x3b7,0x340)](getRequestHeaders,window['token']),'body':JSON[_0x29c70a(0xf1,0xd1,0xfe,0x41)](_0x3aed8e)});if(!_0x3cd5f8['ok']){if(_0x426457[_0x101b3c(0x3d7,0x44d,0x451,0x4de)](_0x426457[_0x29c70a(0xc6,0x130,0x1bc,0xb5)],_0x426457[_0x29c70a(0xe4,0x130,0x163,0x199)])){const _0x1df65e=await _0x3cd5f8['text']();_0x426457[_0x101b3c(0x3ef,0x3a2,0x323,0x3bd)](addLog,_0x101b3c(0x407,0x46c,0x4ab,0x499)+_0x101b3c(0x3d0,0x3e7,0x3cd,0x471)+_0x3cd5f8[_0x29c70a(0x188,0x13f,0xfd,0x16b)]+_0x101b3c(0x4bd,0x432,0x49f,0x3db)+_0x1df65e),console[_0x101b3c(0x546,0x4b9,0x4c5,0x560)](_0x426457[_0x29c70a(0x30,0x6b,0x70,0x63)],_0x1df65e);throw new Error('请求失败,状态码:\x20'+_0x3cd5f8[_0x101b3c(0x46a,0x4a5,0x489,0x541)]+_0x29c70a(0x13e,0xc3,0x11a,0x112)+_0x1df65e);}else throw new _0x2fe4f4(_0x426457[_0x101b3c(0x341,0x378,0x35c,0x40a)]);}const _0x39f527=await _0x3cd5f8[_0x29c70a(0x6b,0x86,0x15,-0xc)]();let _0x1b42de='';try{if('hjPSZ'===_0x426457[_0x101b3c(0x4a9,0x42e,0x4a9,0x3ab)]){const _0x25bdf9=JSON[_0x29c70a(0x110,0x75,0xf9,0x11a)](_0x39f527);_0x1b42de=_0x25bdf9[_0x29c70a(0x10c,0x92,0x98,0x61)][-0xbb9+-0x388+-0x47*-0x37];}else{_0x426457['QcwvQ'](_0x4c2e2a,_0x426457[_0x101b3c(0x38b,0x3b9,0x33d,0x311)]);throw new _0x51643c(_0x426457['zJzxw']);}}catch(_0x4b13d0){if(_0x426457[_0x101b3c(0x4e1,0x44d,0x3cc,0x437)](_0x426457['tfgHP'],_0x426457[_0x29c70a(0xeb,0xb0,0x6b,0x8f)]))_0x426457['VeCyF'](addLog,_0x426457[_0x101b3c(0x506,0x460,0x4e0,0x3c3)]),_0x1b42de=_0x39f527;else{_0x426457[_0x101b3c(0x3ad,0x396,0x3e0,0x3aa)](_0x11621f,_0x101b3c(0x4a4,0x4c1,0x455,0x565)+_0x1126d5[_0x29c70a(0x1ce,0x13f,0x15a,0x131)]+'\x20'+_0x1f875d[_0x101b3c(0x343,0x3b4,0x3d9,0x3ee)]);throw new _0x17d719('获取模型失败:\x20'+_0x1df7b7[_0x29c70a(0x104,0x13f,0x1c7,0xd6)]+'\x20'+_0x54d8d8[_0x29c70a(-0x18,0x4e,0x31,0x9f)]);}}const _0x2719ed=_0x426457[_0x101b3c(0x41b,0x4c0,0x48e,0x4b2)](_0x426457[_0x101b3c(0x3a0,0x399,0x363,0x32a)],_0x1b42de);_0x426457['HVjAi'](addLog,_0x426457['JrvME']),setTimeout(()=>{function _0x366530(_0x444084,_0x3b12b0,_0x399042,_0x3cf342){return _0x101b3c(_0x444084-0x1b,_0x444084- -0x5d4,_0x3cf342,_0x3cf342-0x181);}console['log'](_0x426457['FkikX']),window[_0x366530(-0x214,-0x1c0,-0x22e,-0x18f)]=!![];},extension_settings[extensionName][_0x29c70a(0x21,0x23,-0x60,0x9e)+_0x101b3c(0x47f,0x469,0x45b,0x4b7)]);;return taskQueue[_0x29c70a(0x123,0xad,0x101,0x27)+'sk'](_0x136924,!![]),currentTaskId=null,{'image':_0x2719ed,'change':_0x426457['YTxmq'](_0x4d4bb6,'')};}else{if(_0x426457['Goaua'](_0x426457[_0x29c70a(0xc1,0xbb,0x103,0x70)],_0x426457['tUHEN'])){if(!taskQueue['isTaskInQu'+'eue'](_0x136924)){if(_0x426457[_0x29c70a(-0x48,0x5e,0x96,0xe7)](_0x29c70a(0x1a4,0x10d,0x168,0x10c),_0x29c70a(0x17c,0x10d,0x1a7,0x82)))_0x426457[_0x101b3c(0x455,0x486,0x4de,0x52a)](_0x231fd1,'JSON\x20解析失败，'+'尝试作为原始\x20Bas'+'e64\x20数据处理。'),_0x5dcdbb=_0xa14de5;else{_0x426457[_0x29c70a(0x1c,0x8a,0x121,0xce)](addLog,_0x426457[_0x29c70a(0x63,0x53,0x8,0x37)]);throw new Error('任务已取消');}}const _0x83039b=new URL(_0x426457[_0x29c70a(0x2b,0x4c,-0x2a,0xa4)](_0x1735d5,_0x426457[_0x101b3c(0x454,0x48d,0x4df,0x4e8)]));window[_0x29c70a(0x7a,0x5a,0x75,-0x20)]=![];const _0x20b051=await _0x426457[_0x29c70a(0x3f,0x8f,0x131,0xd8)](fetch,_0x83039b,{'method':_0x426457['yplGI'],'body':JSON['stringify'](_0x3aed8e),'headers':{'Content-Type':_0x426457['qYDbJ'],'Authorization':_0x426457[_0x101b3c(0x354,0x39c,0x3b3,0x41e)](getsdAuth)}});_0x426457['clpMi'](setTimeout,()=>{function _0x3cbb8c(_0xb0c936,_0x4b8f3d,_0x493692,_0x2d7499){return _0x29c70a(_0xb0c936-0x9a,_0x2d7499-0x19a,_0xb0c936,_0x2d7499-0xba);}const _0x1a5d88={'bGyWM':function(_0x30fc82,_0x1f380e){function _0x4db640(_0x5417e8,_0x576786,_0x14b034,_0x4083b1){return _0x1781(_0x576786- -0x237,_0x5417e8);}return _0x426457[_0x4db640(0xc0,0x55,-0x2e,0x9c)](_0x30fc82,_0x1f380e);}};function _0x147fd7(_0x732967,_0xf01978,_0x29aa07,_0x2e1ce4){return _0x101b3c(_0x732967-0x139,_0xf01978- -0x48e,_0x732967,_0x2e1ce4-0x4);}_0x426457[_0x147fd7(0x5d,-0x3e,0x65,-0xe2)](_0x426457[_0x3cbb8c(0x197,0x212,0x26a,0x1d2)],_0x3cbb8c(0x202,0x2c9,0x206,0x292))?_0x4be535[_0x3cbb8c(0x1eb,0x1da,0x232,0x283)+_0x4d6b43+_0x3cbb8c(0x327,0x260,0x237,0x2b8)]&&(_0x43b009=_0x1a5d88[_0x3cbb8c(0x286,0x35d,0x261,0x2b7)](_0x1a5d88[_0x147fd7(-0xb4,-0xb,0x66,0x6c)](_0x36d299,',\x20'),_0x4fa717(_0x3a91c5['Character\x20'+_0x1b3d35+_0x147fd7(0x93,-0xa,-0x5,-0x5b)]))):(console['log']('xiancheng\x20'+'为true'),window[_0x147fd7(-0x51,-0xce,-0x137,-0xa6)]=!![]);},extension_settings[extensionName]['imageGenIn'+_0x29c70a(0x103,0x103,0xd6,0xdd)]);;if(!_0x20b051['ok']){const _0x12b1ce=await _0x20b051[_0x29c70a(0xd5,0x86,0xc0,0xd0)]();_0x426457['QcwvQ'](addLog,_0x29c70a(0xe4,0x100,0x60,0x180)+_0x101b3c(0x4b9,0x4b2,0x4a5,0x43b)+_0x20b051['status']+_0x29c70a(0x4c,0xcc,0x16a,0x86)+_0x12b1ce),console[_0x101b3c(0x45a,0x4b9,0x4e5,0x421)]('响应内容:',_0x12b1ce);throw new Error(_0x29c70a(0xd3,0x142,0xde,0x162)+_0x20b051[_0x101b3c(0x45b,0x4a5,0x45e,0x415)]+_0x101b3c(0x4c2,0x429,0x488,0x3e0)+_0x12b1ce);}const _0x4ee153=await _0x20b051[_0x29c70a(0x11b,0x113,0xfd,0x133)]();if(!_0x4ee153[_0x101b3c(0x474,0x3f8,0x39b,0x489)]||_0x426457[_0x101b3c(0x4ae,0x40f,0x475,0x401)](_0x4ee153[_0x29c70a(0xb5,0x92,0xd3,0x8d)][_0x29c70a(0xb0,0x1f,0xad,0x61)],-0xe44+0xb00+0x26*0x16)){if(_0x426457['LMYcv']!==_0x426457[_0x29c70a(0x36,0x9,0x9b,0x11)]){if(_0x3d0d7e){const _0x20d19b=_0x2ba360['apply'](_0x4ea894,arguments);return _0x2b0c83=null,_0x20d19b;}}else throw new Error(_0x426457[_0x101b3c(0x302,0x378,0x407,0x33a)]);}const _0x2a8f21=_0x4ee153[_0x29c70a(-0x12,0x92,0x8,0xa0)][0x18*0x108+0x4a7+-0x1d67],_0x41a1ed='data:image'+_0x29c70a(0x131,0x131,0x11c,0x197)+'4,'+_0x2a8f21;return _0x426457[_0x29c70a(0x17a,0xdf,0xcf,0x55)](addLog,_0x426457['JrvME']),taskQueue[_0x101b3c(0x479,0x413,0x494,0x47d)+'sk'](_0x136924,!![]),currentTaskId=null,{'image':_0x41a1ed,'change':_0x426457['NqBhZ'](_0x15429d,'')};}else{const _0x4e641d=_0x147635['parse'](_0x1d6485);_0x4e909d=_0x4e641d[_0x29c70a(0x8,0x92,0x93,0x10)][-0x1*-0xb73+0x148*-0x1a+-0x1*-0x15dd];}}}catch(_0x58b303){const _0x192c11=_0x426457[_0x29c70a(0x1c3,0x158,0x202,0xd6)][_0x101b3c(0x4c8,0x46a,0x3c4,0x4d1)]('|');let _0xb875dc=-0xf44+0x1b40+-0x1a*0x76;while(!![]){switch(_0x192c11[_0xb875dc++]){case'0':currentTaskId=null;continue;case'1':throw _0x58b303;continue;case'2':if(_0x426457[_0x101b3c(0x40d,0x381,0x362,0x41f)](_0x58b303[_0x101b3c(0x428,0x41f,0x4bc,0x37e)],_0x426457['zJzxw'])){}else taskQueue[_0x29c70a(0x3b,0xad,0xac,0x55)+'sk'](_0x136924,![]);continue;case'3':window[_0x101b3c(0x34f,0x3c0,0x35d,0x36d)]=!![];continue;case'4':_0x426457['hMcvK'](addLog,_0x29c70a(0x4e,0x18,-0x75,-0x42)+_0x58b303[_0x29c70a(0x2d,0xb9,0x14a,0x2f)]);continue;case'5':console[_0x101b3c(0x41e,0x376,0x39d,0x364)](_0x426457[_0x29c70a(0x52,0x68,0x17,0x9f)],_0x58b303);continue;}break;}}}async function sdGenerate(_0x4e1334){const _0x386a02={'twrtM':function(_0x1df573,_0x8a0f58){return _0x1df573(_0x8a0f58);},'GbPRQ':'Scene\x20Comp'+_0x5a6cb3(0x3b1,0x31b,0x28c,0x3ac),'TjaHW':function(_0xe65f68,_0x25e8bf){return _0xe65f68<=_0x25e8bf;},'UlePu':function(_0x51c154,_0x4b09ae){return _0x51c154+_0x4b09ae;},'itWSv':function(_0x50189f,_0x44a294){return _0x50189f+_0x44a294;},'qQtQM':_0x35aafc(0x359,0x353,0x39e,0x310),'TBhkt':function(_0x1163ef,_0x569cc1){return _0x1163ef(_0x569cc1);},'jbXUe':function(_0x2a21bf,_0x322a0c){return _0x2a21bf(_0x322a0c);},'voSOq':function(_0x19c3bb,_0x243548){return _0x19c3bb!=_0x243548;},'qeyMv':_0x35aafc(0x469,0x3d0,0x467,0x4f6),'mhTTy':function(_0x1ec988,_0x13549e,_0x3076c3,_0x199f4b){return _0x1ec988(_0x13549e,_0x3076c3,_0x199f4b);},'jOAAC':function(_0x46860e,_0x24519b){return _0x46860e(_0x24519b);},'jPrTe':function(_0x4da511,_0x396dfa){return _0x4da511(_0x396dfa);}},{id:_0x42197d,prompt:_0x1f1bf2,width:_0x54c5e4,height:_0x4dd52c,change:_0x5d0151}=_0x4e1334;function _0x5a6cb3(_0x28af71,_0x376a1f,_0x4ee4c2,_0xd912f2){return _0x1781(_0x376a1f-0x129,_0xd912f2);}_0x386a02[_0x5a6cb3(0x372,0x2f5,0x2f0,0x346)](addLog,_0x5a6cb3(0x378,0x394,0x343,0x37d)+_0x5a6cb3(0x352,0x2c2,0x241,0x2f1)+_0x42197d+(_0x35aafc(0x3a0,0x3cb,0x40e,0x44b)+':\x20')+_0x1f1bf2+(_0x5d0151?'\x20-\x20Change:'+'\x20'+_0x5d0151:''));function _0x35aafc(_0x19b762,_0x3e62c1,_0x42a4d5,_0x385760){return _0x1781(_0x42a4d5-0x1e6,_0x385760);}if(_0x5d0151&&_0x5d0151[_0x35aafc(0x47f,0x381,0x3f1,0x3e2)](_0x386a02[_0x35aafc(0x3e4,0x38a,0x3bf,0x400)])){_0x386a02[_0x35aafc(0x43c,0x457,0x3ee,0x440)](bananaGenerate,_0x4e1334);return;}try{const {image:_0x4cfe60,change:_0xf76397}=await _0x386a02['jbXUe'](generateSDImage,{'prompt':_0x1f1bf2,'width':_0x54c5e4,'height':_0x4dd52c,'change':_0x5d0151});if(_0x386a02[_0x35aafc(0x2af,0x2fa,0x345,0x301)](extension_settings[extensionName][_0x5a6cb3(0x3f6,0x374,0x36b,0x2ea)],'0')){if(_0x386a02[_0x5a6cb3(0x27d,0x2ff,0x34b,0x255)]===_0x386a02[_0x5a6cb3(0x29a,0x2ff,0x293,0x35e)]){const _0x3bf511={};_0x3bf511[_0x5a6cb3(0x33f,0x311,0x30f,0x34d)]=_0xf76397,await _0x386a02[_0x35aafc(0x3f9,0x46e,0x43a,0x47b)](setItemImg,_0x1f1bf2,_0x4cfe60,_0x3bf511),_0x386a02[_0x5a6cb3(0x290,0x2f5,0x28f,0x29e)](addLog,_0x35aafc(0x3cf,0x4b0,0x414,0x3c9)+_0x35aafc(0x2d6,0x30c,0x323,0x301)+'\x20'+_0x1f1bf2);}else{_0x386a02[_0x35aafc(0x385,0x39c,0x3b2,0x3a6)](_0x3bdd99,'分角色模式:\x20解析带'+_0x5a6cb3(0x313,0x2cc,0x2c9,0x360)),_0x43791e=_0x1f9674(_0x27ead5),_0x42e86a=_0x50cea4[_0x386a02[_0x5a6cb3(0x3d7,0x33f,0x35a,0x39a)]];for(let _0x5f427e=0x180+-0x71f*-0x5+-0x1*0x251a;_0x386a02[_0x5a6cb3(0x296,0x2d8,0x248,0x30b)](_0x5f427e,0x346*0x2+-0x1e0b+0x1783);_0x5f427e++){_0x2ba9c5[_0x35aafc(0x456,0x443,0x402,0x379)+_0x5f427e+_0x35aafc(0x391,0x4d2,0x437,0x49e)]&&(_0x6193f3=_0x386a02[_0x5a6cb3(0x37e,0x3a1,0x327,0x3cc)](_0x386a02[_0x5a6cb3(0x312,0x26d,0x2d0,0x290)](_0x26bdab,',\x20'),_0x5e0bfa[_0x35aafc(0x3b5,0x3f7,0x402,0x406)+_0x5f427e+'\x20Prompt']));}}}else _0x386a02[_0x35aafc(0x340,0x400,0x399,0x385)](addLog,_0x5a6cb3(0x374,0x3ad,0x38d,0x3c8)+'库');const _0x5e742c={};_0x5e742c['id']=_0x42197d,_0x5e742c['success']=!![],_0x5e742c[_0x35aafc(0x4f6,0x503,0x469,0x46a)]=_0x4cfe60,_0x5e742c[_0x35aafc(0x4ad,0x3e5,0x433,0x4d9)]=_0x1f1bf2,_0x5e742c[_0x35aafc(0x3ae,0x3e9,0x3ce,0x33e)]=_0xf76397,eventSource['emit'](EventType[_0x35aafc(0x339,0x38d,0x32d,0x330)+'MAGE_RESPO'+_0x35aafc(0x2e7,0x360,0x37a,0x338)],_0x5e742c),_0x386a02[_0x35aafc(0x320,0x40a,0x399,0x31f)](addLog,'发送SD生图成功响应'+_0x35aafc(0x355,0x380,0x35e,0x3b4)+_0x42197d+')');}catch(_0x4599aa){const _0x3baddd='SD生图流程捕获到异'+_0x5a6cb3(0x38d,0x339,0x2ac,0x344)+_0x42197d+_0x35aafc(0x389,0x447,0x3f3,0x3ab)+_0x4599aa['message'];_0x386a02[_0x35aafc(0x301,0x3bb,0x393,0x348)](addLog,_0x35aafc(0x3f1,0x36a,0x35f,0x3ba)+_0x3baddd),console[_0x35aafc(0x2a4,0x335,0x329,0x342)](_0x35aafc(0x4b5,0x4b5,0x421,0x3f1)+'rating\x20SD\x20'+_0x5a6cb3(0x2ca,0x2f2,0x398,0x29e),_0x4599aa);const _0x168688={};_0x168688['id']=_0x42197d,_0x168688[_0x35aafc(0x49d,0x3a2,0x438,0x425)]=![],_0x168688[_0x5a6cb3(0x233,0x26c,0x1ca,0x1cb)]=_0x4599aa[_0x5a6cb3(0x35a,0x315,0x313,0x330)],_0x168688[_0x5a6cb3(0x35f,0x376,0x41a,0x3c6)]=_0x1f1bf2,eventSource[_0x5a6cb3(0x360,0x316,0x2fe,0x357)](EventType[_0x5a6cb3(0x1e4,0x270,0x220,0x1d8)+'MAGE_RESPO'+_0x35aafc(0x415,0x395,0x37a,0x3a9)],_0x168688),addLog(_0x5a6cb3(0x2f8,0x344,0x32c,0x2ec)+_0x5a6cb3(0x2bc,0x2a1,0x283,0x2e6)+_0x42197d+')');}}function initializeSDListener(){function _0x53b4c5(_0x12b901,_0x19d0b4,_0x2e8bf8,_0x409ebb){return _0x1781(_0x19d0b4- -0x11c,_0x2e8bf8);}const _0x522cc9={'SwCwV':function(_0x13ee0b,_0x34ac05){return _0x13ee0b(_0x34ac05);},'YkXOL':'SD\x20生图事件监听器'+_0x53b4c5(0x106,0x109,0x193,0x83)};function _0x35f6e9(_0x57831c,_0x4e81a8,_0x3fc14c,_0x2f9df3){return _0x1781(_0x3fc14c- -0x33d,_0x4e81a8);}eventSource['on'](EventType[_0x35f6e9(-0x164,-0x29f,-0x1f6,-0x29d)+_0x53b4c5(0x85,0xae,0xf9,0x96)+'ST'],sdGenerate),_0x522cc9[_0x35f6e9(-0x251,-0x1a9,-0x1b3,-0x22e)](addLog,_0x522cc9[_0x53b4c5(0x33,0xb3,0x139,0xae)]);}export async function replaceWithSd(){function _0x2c57ad(_0x25abf8,_0x2a3460,_0x2dcd1c,_0x52de44){return _0x1781(_0x2dcd1c- -0x279,_0x52de44);}function _0x385520(_0x1a31ae,_0x3b6daf,_0x4e10eb,_0x4a8aa8){return _0x1781(_0x4a8aa8- -0x311,_0x1a31ae);}const _0x488498={'gBDeR':'(((.+)+)+)'+'+$','JrYrr':function(_0x51b90d,_0x1ee0ec){return _0x51b90d===_0x1ee0ec;},'qxqSR':_0x385520(0x0,-0x42,-0xfe,-0x9d),'eKqeB':function(_0x2a556d){return _0x2a556d();},'wOoeq':function(_0x271438){return _0x271438();},'GKDXT':function(_0x3aee53,_0x48f0fb){return _0x3aee53===_0x48f0fb;},'yzSGj':'xBhNh','xeMuf':_0x2c57ad(-0xe7,-0xdf,-0x79,-0x9d)+_0x2c57ad(0xb,-0xd8,-0x9a,-0x98)};if(extension_settings[extensionName]['mode']=='sd'){if(!window[_0x2c57ad(-0xdc,-0xe3,-0xa1,-0x7)+_0x2c57ad(-0x69,0x4e,-0x24,-0x4f)]){if(_0x488498[_0x2c57ad(-0x14b,-0x14b,-0xd7,-0xeb)](_0x488498[_0x385520(-0x1d5,-0x221,-0x234,-0x193)],_0x2c57ad(-0x9,0x4e,-0x5,-0x9e)))window[_0x385520(-0x1be,-0x97,-0xbd,-0x139)+_0x2c57ad(-0x4,-0x23,-0x24,-0xce)]=!![],_0x488498['eKqeB'](initializeSDListener);else return _0x3b348c[_0x385520(-0xe4,-0x1dd,-0xe5,-0x174)]()[_0x385520(-0xbf,-0xde,-0x1c0,-0x13d)](abHkzP[_0x2c57ad(-0xb8,-0xee,-0x7f,0x17)])['toString']()[_0x2c57ad(-0xcb,-0x9f,-0xfe,-0xb9)+'r'](_0x56f3e8)[_0x2c57ad(-0x138,-0x28,-0xa5,-0x12c)](abHkzP[_0x2c57ad(-0x111,-0x79,-0x7f,-0x11f)]);}_0x488498['wOoeq'](initializeImageProcessing);}else window[_0x385520(-0xb9,-0xbc,-0x1b1,-0x139)+_0x385520(-0xe5,-0xc0,-0xff,-0xbc)]&&(_0x488498[_0x385520(-0x106,-0x15c,-0xd5,-0xbb)](_0x385520(-0x142,-0x1d8,-0x1f4,-0x185),_0x488498[_0x2c57ad(-0x97,-0xa3,-0x41,-0x2e)])?(eventSource[_0x385520(-0xf8,-0x18f,-0x4e,-0xf1)+_0x2c57ad(-0x124,-0x10b,-0xb5,-0x22)](EventType['GENERATE_I'+'MAGE_REQUE'+'ST'],sdGenerate),window['initialize'+_0x385520(-0xe5,-0x70,-0x14,-0xbc)]=![],addLog(_0x488498[_0x2c57ad(-0x27,0x33,-0x66,-0x100)])):_0x4e77f9[_0x385520(-0x11b,-0x88,-0xfc,-0x131)+'sk'](_0xd134b8,![]));}