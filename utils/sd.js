(function(_0x5c3456,_0x14395d){function _0x29acaa(_0x1a04a7,_0x1a4542,_0x50c1fd,_0x525509){return _0x3878(_0x1a04a7- -0x2b9,_0x1a4542);}function _0x21c5c2(_0x6d0f49,_0x369b94,_0x3be7e8,_0x23a0b9){return _0x3878(_0x369b94- -0x22,_0x3be7e8);}const _0x1240ae=_0x5c3456();while(!![]){try{const _0x4a9cdd=parseInt(_0x21c5c2(0x9,0x7a,0xa8,0x6d))/(-0x1*0xd5+-0xcb2+0x6c4*0x2)*(-parseInt(_0x21c5c2(0x15c,0x166,0x18e,0x174))/(-0xab*-0x30+0x4*0x499+-0x3272))+-parseInt(_0x29acaa(-0x1af,-0x155,-0x19c,-0x1e8))/(-0x1dbd+0x1f6+0x1bca)+parseInt(_0x21c5c2(0x102,0xea,0xa4,0xb4))/(-0x1bbf+-0x2342+0x3f05*0x1)+parseInt(_0x29acaa(-0x247,-0x275,-0x215,-0x2c5))/(0xcb6*0x3+0x1037+0x16e*-0x26)*(-parseInt(_0x29acaa(-0x12f,-0x1ad,-0x15e,-0xfd))/(0xddc+0x21f3+-0x2fc9))+-parseInt(_0x21c5c2(0x72,0x55,0xe2,0x24))/(-0x3*0x51a+0x1d35+0x250*-0x6)+parseInt(_0x21c5c2(0x1da,0x151,0x140,0x10c))/(-0x1e18+-0x8c6+-0x17f*-0x1a)+parseInt(_0x29acaa(-0x230,-0x1c9,-0x24e,-0x1fb))/(-0x105f+-0x1004+0x206c);if(_0x4a9cdd===_0x14395d)break;else _0x1240ae['push'](_0x1240ae['shift']());}catch(_0x489fbf){_0x1240ae['push'](_0x1240ae['shift']());}}}(_0x99a1,0x2*0x1bf07+-0x19cbe1*0x1+0x2350af));const _0x5727cb=(function(){const _0x3eff2c={'ghAUW':function(_0x42d9db,_0x4c6be8){return _0x42d9db(_0x4c6be8);},'anBCC':_0x598f85(0x69,0x9e,-0x12,0x74),'mxlHt':function(_0xcc48ac,_0x6efd03){return _0xcc48ac===_0x6efd03;},'LneHr':'dnDlh'};let _0x2b8542=!![];function _0x598f85(_0x3c67da,_0xc200cf,_0x496395,_0x4beb53){return _0x3878(_0x3c67da- -0x60,_0x496395);}return function(_0x5b2ed1,_0xb0e058){const _0x39be92={'fipEf':function(_0x20ed72,_0xd0dfae){function _0x2cc49a(_0x42fdbd,_0x4c931a,_0x321359,_0x2b6b49){return _0x3878(_0x2b6b49- -0x174,_0x42fdbd);}return _0x3eff2c[_0x2cc49a(-0x61,0x2b,-0x2a,-0x21)](_0x20ed72,_0xd0dfae);},'pLEaI':_0x3eff2c['anBCC']};function _0x19eb21(_0x11dc25,_0x3a58e0,_0x275d08,_0x417651){return _0x598f85(_0x417651-0x29e,_0x3a58e0-0x52,_0x11dc25,_0x417651-0x110);}function _0x579ed0(_0xfb44c,_0x55a852,_0x3f9831,_0x26feb2){return _0x598f85(_0xfb44c-0x315,_0x55a852-0x1e7,_0x26feb2,_0x26feb2-0xd5);}if(_0x3eff2c['mxlHt'](_0x3eff2c[_0x579ed0(0x3b8,0x42d,0x444,0x353)],_0x3eff2c['LneHr'])){const _0x2d1ee4=_0x2b8542?function(){function _0x496a4b(_0x19ee0b,_0x5d9a42,_0x291178,_0x1bc29f){return _0x579ed0(_0x19ee0b- -0x3e1,_0x5d9a42-0x1a4,_0x291178-0x6e,_0x291178);}if(_0xb0e058){const _0x3c937b=_0xb0e058[_0x496a4b(0x54,0x70,0x9d,0x60)](_0x5b2ed1,arguments);return _0xb0e058=null,_0x3c937b;}}:function(){};return _0x2b8542=![],_0x2d1ee4;}else{_0x39be92[_0x579ed0(0x381,0x34a,0x41a,0x3fa)](_0xba9a76,_0x39be92[_0x579ed0(0x39a,0x367,0x3e7,0x33a)]);throw new _0x60108(_0x579ed0(0x35c,0x31c,0x392,0x34c));}};}()),_0x46328c=_0x5727cb(this,function(){function _0x2039be(_0x156fb6,_0x5aaa69,_0x536052,_0x17cc12){return _0x3878(_0x536052- -0x3a6,_0x5aaa69);}const _0x404439={};_0x404439['MdUVo']=_0x463c4e(-0x184,-0x184,-0x111,-0x17c)+'+$';function _0x463c4e(_0x57f45f,_0x37d220,_0x2c6d6f,_0x4b8711){return _0x3878(_0x57f45f- -0x327,_0x4b8711);}const _0x2d1bcd=_0x404439;return _0x46328c[_0x2039be(-0x30b,-0x357,-0x32a,-0x3a1)]()[_0x463c4e(-0x1d8,-0x1fc,-0x1b2,-0x221)](_0x2d1bcd[_0x463c4e(-0x278,-0x2f7,-0x28f,-0x1f3)])[_0x2039be(-0x382,-0x2d5,-0x32a,-0x393)]()[_0x2039be(-0x379,-0x2d7,-0x32d,-0x2c7)+'r'](_0x46328c)[_0x2039be(-0x204,-0x25c,-0x257,-0x1cb)](_0x463c4e(-0x184,-0x121,-0x117,-0xf2)+'+$');});_0x46328c();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';function _0x3878(_0xb0aa65,_0x2643e4){_0xb0aa65=_0xb0aa65-(0x4*-0x89+-0x24d*0x10+0x3*0xd22);const _0x5bdb6f=_0x99a1();let _0x4bd6a6=_0x5bdb6f[_0xb0aa65];if(_0x3878['EeHnoz']===undefined){var _0x1b48d5=function(_0x62e809){const _0x42b692='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x37918f='',_0x4f3d32='',_0x2a6cdd=_0x37918f+_0x1b48d5;for(let _0x1eca1b=0x231f+0x12f*-0x3+0xfc9*-0x2,_0x56e059,_0x2c0130,_0xdaec8d=0x147b+0x3a7+-0x1*0x1822;_0x2c0130=_0x62e809['charAt'](_0xdaec8d++);~_0x2c0130&&(_0x56e059=_0x1eca1b%(-0x245c+0x7b+0x23e5)?_0x56e059*(0x26d3+0x45*-0x41+0x1ea*-0xb)+_0x2c0130:_0x2c0130,_0x1eca1b++%(-0x1cea+-0x5eb+-0x32b*-0xb))?_0x37918f+=_0x2a6cdd['charCodeAt'](_0xdaec8d+(-0xa74+0x1695+-0xc17))-(-0x1ce0+-0x21da+0x3ec4)!==-0x2*-0x101+-0x6a9+0x1*0x4a7?String['fromCharCode'](-0x61d*0x4+-0x1d*-0x14d+0x1*-0xc46&_0x56e059>>(-(-0xd*0xc2+-0x1a3+0xb7f)*_0x1eca1b&0x2*0x1334+-0x21dd+-0x485)):_0x1eca1b:-0x7*0x280+-0x6*-0x21d+-0x1*-0x4d2){_0x2c0130=_0x42b692['indexOf'](_0x2c0130);}for(let _0x61c308=0xb*-0x35b+0x35e+0x218b,_0x261a89=_0x37918f['length'];_0x61c308<_0x261a89;_0x61c308++){_0x4f3d32+='%'+('00'+_0x37918f['charCodeAt'](_0x61c308)['toString'](0x15*-0x89+-0x15f7+-0x2*-0x10a2))['slice'](-(-0x2f6*0x8+-0x5e*-0x56+-0x1*0x7e2));}return decodeURIComponent(_0x4f3d32);};_0x3878['ITHiRt']=_0x1b48d5,_0x3878['ROGgWY']={},_0x3878['EeHnoz']=!![];}const _0x3337f7=_0x5bdb6f[0xe5+0x169a+0x191*-0xf],_0x513512=_0xb0aa65+_0x3337f7,_0x1e0573=_0x3878['ROGgWY'][_0x513512];if(!_0x1e0573){const _0x194cae=function(_0x273e8a){this['HDPWIS']=_0x273e8a,this['qRpdTD']=[0x5*-0x78e+0x4f*0x72+0x299,-0x5c6+-0x15aa+-0x10*-0x1b7,-0x539*0x7+0x7*0x6f+0x2186],this['ZTyoDQ']=function(){return'newState';},this['JIKOzG']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['nldUxX']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x194cae['prototype']['svBTqa']=function(){const _0x43f254=new RegExp(this['JIKOzG']+this['nldUxX']),_0x2df57a=_0x43f254['test'](this['ZTyoDQ']['toString']())?--this['qRpdTD'][0x13a*-0x13+0x26b+0x14e4]:--this['qRpdTD'][-0x16c*-0x1a+0x25af+-0x4aa7];return this['WDfhvB'](_0x2df57a);},_0x194cae['prototype']['WDfhvB']=function(_0x1c14ce){if(!Boolean(~_0x1c14ce))return _0x1c14ce;return this['CNEntU'](this['HDPWIS']);},_0x194cae['prototype']['CNEntU']=function(_0x391409){for(let _0x450895=0x1*-0x11c3+0x1ab4+-0x8f1,_0x2872da=this['qRpdTD']['length'];_0x450895<_0x2872da;_0x450895++){this['qRpdTD']['push'](Math['round'](Math['random']())),_0x2872da=this['qRpdTD']['length'];}return _0x391409(this['qRpdTD'][0x724*-0x2+-0x1e00+0x589*0x8]);},new _0x194cae(_0x3878)['svBTqa'](),_0x4bd6a6=_0x3878['ITHiRt'](_0x4bd6a6),_0x3878['ROGgWY'][_0x513512]=_0x4bd6a6;}else _0x4bd6a6=_0x1e0573;return _0x4bd6a6;}import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';function _0x99a1(){const _0x314fb9=['C2rFy3vWC2nHBa','y29TCgXLDgvuyq','u0qGqvbjioI/LowBNUMuMq','C3vIC3rYAw5N','ExvZAgu','rvzyyxC','C2tOR7FMSylNLj/LM77PLjNOR686ia','y09LEee','B2jcBwW','loAOOEwEI+s4UG','6lsF6z2I5lI6oIa','55sO5lQo55sF5OIq55QevgfNoIa','C2v0DgLUz3nZlG','wenuAxC','tufhrv9srvfvrq','C3rYzw5NDgG','rxjYB3iGz2vUzq','CMXeCvu','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','B3iGChjVBxb0oG','Aw1Hz2veyxrH','BwLjzLy','kcGOlISPkYKRkq','s2f5swG','nvrKDeL3wa','zw5HyMXLx2HY','cI0GkIROTj/PNAlMJ5dNPlOG','kerPDMLKzv9YBW','yxjNCW','nJy0nZe1ogj0tK1xyW','Cgf5C3rFy2HHDa','y29UC3rYDwn0BW','C2rFDMfL','wwrrDg0','Dg9tDhjPBMC','A2LW','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','zMfJzsdKUlRLVidLKk8','BfnlsLe','6AUy5RIf5l+U5Asnios4UG','A1zAAxa','yxbWBgLJyxrPBW','zhbJA20','5Q2J5zYO6ycA6l+hC2r3zwj1','AhjFC2nHBgu','vhv3Eu8','DvPjue0','mJa0ndi0mJbluhj2zvK','DhH0mMLTzW','C3bSAxq','ksaTifbYB21WDa','C2rFy2rLBM9PCW','zML4zwrqCM9TCa','AxPLktOQkIa','rxPcrgW','icHjrdOG','of9Zyw1WBgvYtG','sfjzC2K','y2vZioIeUoMdQos/RUwKJsdKUlO','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','q2HHCMfJDgvYia','yxH2ywC','5BI4icHjrdOG','rKX3ExO','vhbowMm','B3nPDgLVBG','mtfWwKf4B2C','Chruv3O','Aw1Hz2vZ','z2u6','qKLSyva','y21VzgvSmJiYmG','tfnXq3u','ywrLDgfPBgvYxW','q3ndBwK','tLnf','rvbytxu','5lU75yQH5BEY5y+w5RAi','q1vPt2m','CeXcB3e','B21WDa','BxnYyuu','rhjStNe','BLjMyMe','qLfztNq','twrvvM8','zKXhCeq','of9Zy2HLzhvSzq','77Ym6k+35Qoa5P+LC2r3zwj1','lI4U','nxWYFdn8nhWWFa','A29kA3O','cI0GkIRNP43LRzaGkfm','u2TPCdOQkIa','cI0GkIRMLl7LPkFLGi3NJOCG','C2rFyxv0Aa','Bg9N','t1vrEMi','AwXLCJOQkIa','44cc5zon5BQu5yAf5A65oIa','C2rFy2nOyxr1xW','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','Aw5PDgLHBgL6zq','y2XPzw50','C2rFC3rVCf9Nzq','C3rHDhvZ','Eezctue','EwvYCW','yvfJD1e','sLnptIdOP6pMNPdLPlhOTkxVViW','yw1L','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','zxvL','suq6ia','zMLWrwy','uKzSzNu','cI0GkIPwquu6kG','ywTtyve','BfvkDge','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','yNzvr1m','CMvZDg9YzuzHyW','uMvIt3e','ifn0CMvUz3rOkq','Dhj1zq','ChqPoIOQia','C3vJy2vZCW','ywnLCYK6kIOG','BgvUz3rO','Cgf5Bg9Hza','uMDUtgO','C05XBgO','wKTUCe4','CLL3uvG','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','zxr0Aw5NCW','ref0EvG','zwvKktOQkIa','5lIT55QeihbYB21WDooaGG','CeXfyuK','cI0GkIPdrKCGuW','CgfYC2u','5zU+5y+c5PwW5OQL5zgkcI0GkIO','zuPLCeu','u0rmAxn0zw5LCG','C2rFy2HLAwDODa','E+s/RUwBVN0','yxv0Aa','C1jQzhy','wKTmwhK','B0vYz0W','swjQyue','swPmsuy','zuv4rKi','tMfwy3m','6k+V44cc54Q25Ocb56cboIa','DtHFC2rFyxv0Aa','cI0GkIRMRAxMLBaGkfm','whPJwKq','CKXYthq','ELDxD2K','l2fWAs9Zzc9Nzq','BwvZC2fNzq','AxnuyxnRsw5rDq','Cu94twi','C2r3zwj1AEEuN+wBVUwpGG','CMvZDg9Yzv9Myq','C3rYAw5NAwz5','Bw9KzwW','tg5Lshi','r3bOq08','vMrVsvi','zgTjsfq','Dg9Rzw4','Aw1Hz2u6','y2zNx3nJywXL','mZq3otmYmKPVwhbKAa','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','ntmXode4mfDnqxLHDW','we1ODNK','6i635y+w5QIH5z6l5AsX6lsLoIa','BgvZktOG','5yIh5O2I5QIH5z6l5AsX6lsLoIa','zv9Mywn0B3i','zxH0zw5ZAw9UxW','EgLHBMnOzw5N','cI0GkIRPH43NU5JLUyxLUQyG','ywLbsxe','5yYw5lI6igrHDgeGvvi','AhbXz2S','ChjVBxb0','56cboIa','ywn0B3iPoIOQia','qunssKm','y3jPChrZ','cI0TlqOJiYmG55sF','B3zLCNjPzgvFCW','C3rHDhvZvgv4Da','5yop5PwW5O2U44cc','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','uNfPrem','Bg9Hza','og4UChq','u2nLBMuGq29TCa','cI0GkIRPQ5JMUixKV67LPi0G','Aw5JBhvKzxm','ktOQkIa','kfjLC3rVCMuGrG','DgXwCNi','Dc1TB2rLBa','Aw5MBW','r0vorvjbvevFsq','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','C2fTCgXLCL9Uyq','yKnZyuu','z2vJu1y','DwDoD3G','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','CNjxugS','6k6+572U5QIH5z6llI4U5lI6','uhfbEe0','5zon5BQu5yAf5A65oG','qKvLz2q','ALPTC0W','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','se1Xrwq','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','y3LKDgC','ifbYB21WDa','t1zwvMC','qMHOC0G','qvfux3nK','ELj0C04','zNryzeq','BI9QC29U','B2PLExa','DhjPBq','zxjYB3i','vePNCwm','5Q2J6z2I5O+q56s6icHqCM9T','DxjS','A2nXDMy','zgf0ytPPBwfNzq','B3HcA3O','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','C2vHCMnO','Eu1xv2K','cI0GkIRPH4FMOlFMLRNMS5uG','y2HHBMDL','z2HbvvC','lcdOR6BMG4u6ia','mNWZFdf8nxWWFa','rvj2wLe','tufhrv9srvnqtW','t2nHtfe','Aw1Hz2u','AvffCMG','sev4ruy','C2vLza','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','D2LKDgG','y0PuuuW','of9TB2rLBa','C2rFy3nLzwq','DufKv0G','BfHIBK4','zu5Pzvi','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','6zQp5PY6kc0Xkq','DwPduvO','tenqvMK','C2rFy2fKzxrHAq','C3rLChm','zvnHAxG','C2ziCxa','ue9tva','vxnIzgO','zw1PDa','C2rFy3DPzhrO','cI0GkIPdBgLWia','swvlwM0','ody0ndyXnLrfDg13uW','C2rFy2HPCMvZxW','kfnHBxbSzxiPoG','ELjIyNK','C2rFy2nSAxbFCW','ExvZAgvPzf9Zza','D2XuA2K','oIOQia','BMvYyxrPB24','l3nKyxbPl3yXlW','B2zpy0W','De9ovhK','44cc6k+35Qoa5P+LC2r3zwj1','yxbWBhK','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','Bw9Kzq','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','C3rFy2HHDhu4xW','5BEY5ywZ6zET44cc','CMf0Aw5NigLTyq','CfrYEvC','ntK3mKDms2zhCW','Dgv4Da','mtaXmtK1mJHgzhncC2W','5BEY5yID5AEl5yYw44cc','ANnVBG'];_0x99a1=function(){return _0x314fb9;};return _0x99a1();}import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;async function generateSDImage({prompt:_0x126e8f,width:_0x2d1925,height:_0x1e269b,change:_0x10ab04}){const _0x493e0a={'pTryW':function(_0xd113f8,_0x3a20ce){return _0xd113f8(_0x3a20ce);},'sfHqp':function(_0x5eb964,_0x5e6f0c){return _0x5eb964<=_0x5e6f0c;},'BIlaP':function(_0x4dd410,_0x1cb521){return _0x4dd410+_0x1cb521;},'hReYN':function(_0x490ec3,_0x42e2d1){return _0x490ec3+_0x42e2d1;},'ftXdD':function(_0x5b9006,_0x3de8e8){return _0x5b9006(_0x3de8e8);},'lSKJQ':function(_0x108138,_0x581722){return _0x108138(_0x581722);},'OUQzb':_0x1ce6a0(0x3b8,0x31a,0x32f,0x38f)+_0x48bf31(-0x16b,-0x116,-0x138,-0x184),'LCPVi':'face_yolov'+_0x48bf31(-0x184,-0x18d,-0x19f,-0x115),'kVZip':function(_0x5ed35b){return _0x5ed35b();},'YPXAt':_0x1ce6a0(0x31e,0x34a,0x2e5,0x2fd)+'4','EzBDl':_0x1ce6a0(0x33f,0x2ff,0x32d,0x2dc)+_0x1ce6a0(0x2fd,0x341,0x316,0x2b4)+'ge:','msraE':_0x1ce6a0(0x2bb,0x25a,0x237,0x222),'DrlNq':function(_0x7206d8,_0x414695){return _0x7206d8+_0x414695;},'CIAFu':function(_0x57aba2,_0xc35959){return _0x57aba2||_0xc35959;},'eSaix':function(_0x166831,_0x9b2e8){return _0x166831>_0x9b2e8;},'OVVVg':'...','rlDqU':function(_0x2708f7,_0x1f3ee7){return _0x2708f7(_0x1f3ee7);},'obBml':function(_0x30dd29,_0x42490a){return _0x30dd29(_0x42490a);},'ofOcL':function(_0xcd828a,_0x750501){return _0xcd828a!==_0x750501;},'bCsaE':_0x48bf31(-0x1a7,-0x1c8,-0x19e,-0x110)+_0x1ce6a0(0x1a9,0x2ab,0x22b,0x194),'XzcZD':function(_0x3558e8,_0x326aaa){return _0x3558e8===_0x326aaa;},'ZKnpN':_0x48bf31(-0x1e6,-0x235,-0x21f,-0x1ac),'ERvZQ':_0x48bf31(-0x1a1,-0x228,-0x229,-0x2a6),'apTTp':function(_0x54e3e9,_0x1f401b){return _0x54e3e9(_0x1f401b);},'XaHtG':'分角色模式:\x20解析带'+_0x1ce6a0(0x367,0x32b,0x311,0x365),'TuwyO':function(_0x43a68d,_0x2273a8){return _0x43a68d<=_0x2273a8;},'gecSV':'AQPkk','HMqEd':_0x1ce6a0(0x1f4,0x2f9,0x284,0x2ee),'FwPRu':function(_0x1ceabd,_0x473aea){return _0x1ceabd+_0x473aea;},'uLulH':_0x1ce6a0(0x345,0x288,0x2cc,0x2a6)+_0x48bf31(-0x1fd,-0x1f7,-0x1df,-0x1ab),'gyfYa':function(_0xffa8,_0xe2c66,_0xf7f3cc){return _0xffa8(_0xe2c66,_0xf7f3cc);},'VdoIR':function(_0x1dd790,_0x43618a){return _0x1dd790===_0x43618a;},'dpckm':_0x1ce6a0(0x22a,0x29b,0x23d,0x1cd),'xygFh':function(_0xa70751,_0x42ff75){return _0xa70751<=_0x42ff75;},'PqAxM':function(_0x1e248e,_0x2b22f7){return _0x1e248e+_0x2b22f7;},'HRYsi':function(_0x3f926d,_0x1befac,_0x5df9d1,_0xb50143,_0x2c8dd7,_0x37afd3){return _0x3f926d(_0x1befac,_0x5df9d1,_0xb50143,_0x2c8dd7,_0x37afd3);},'RgnLj':function(_0x46dbe1,_0x45e4f6,_0x5316a6){return _0x46dbe1(_0x45e4f6,_0x5316a6);},'bvUGS':_0x1ce6a0(0x32f,0x255,0x2a5,0x25e),'YdQtm':'jiuguan','BQYNt':_0x1ce6a0(0x26c,0x2c9,0x25f,0x1e9),'qOxMb':'/api/sd/ge'+'t-model','cJTQL':_0x48bf31(-0xcb,-0xbd,-0x156,-0x162),'sFvLY':function(_0x17885f,_0x312be1){return _0x17885f!=_0x312be1;},'IbjaA':_0x1ce6a0(0x23f,0x275,0x29d,0x290),'RFlfu':function(_0xb34f62,_0x47991e){return _0xb34f62(_0x47991e);},'lXbnN':function(_0x2d9faf,_0x5bcadd,_0x12c7d7){return _0x2d9faf(_0x5bcadd,_0x12c7d7);},'RqiDC':'/api/sd/se'+_0x1ce6a0(0x307,0x278,0x2bb,0x339),'kcqvf':function(_0x4a1006,_0x6209b3){return _0x4a1006(_0x6209b3);},'ptTWz':_0x48bf31(-0x14b,-0x1f3,-0x173,-0x191),'rrWPk':function(_0x2ae825,_0x4bc47a){return _0x2ae825(_0x4bc47a);},'HExEF':function(_0x22fa72,_0x585b4b){return _0x22fa72(_0x585b4b);},'uAdWH':function(_0x58d732,_0x4289cf){return _0x58d732>=_0x4289cf;},'rLrLt':function(_0x5df3ee,_0x903bce){return _0x5df3ee==_0x903bce;},'tONTy':_0x48bf31(-0x207,-0x241,-0x1ed,-0x27c),'wlTki':function(_0x1494a4,_0x42cb27){return _0x1494a4==_0x42cb27;},'vLrsV':function(_0x5e1e72,_0x13357c){return _0x5e1e72(_0x13357c);},'XCTiw':'adetailer_'+_0x48bf31(-0x2c8,-0x203,-0x244,-0x2a6),'KayIh':_0x1ce6a0(0x294,0x32e,0x2f6,0x317),'FLwyz':function(_0x147f30,_0x14f7bf){return _0x147f30(_0x14f7bf);},'DAtyX':_0x1ce6a0(0x29c,0x263,0x26b,0x257),'cydtg':function(_0x1ebd0d,_0x4dd610){return _0x1ebd0d===_0x4dd610;},'GphCO':_0x1ce6a0(0x315,0x2c1,0x2d5,0x244),'rYwQX':function(_0x4521d4,_0x165d9e){return _0x4521d4(_0x165d9e);},'ugNwx':'running','zWWwi':function(_0x3fafc5,_0x3fe4ec){return _0x3fafc5===_0x3fe4ec;},'lUJta':_0x1ce6a0(0x2ce,0x2d4,0x259,0x2b3),'xFBMA':_0x1ce6a0(0x296,0x2b2,0x252,0x20a)+_0x1ce6a0(0x2d0,0x2cf,0x30b,0x38f),'uZIPM':_0x1ce6a0(0x1c6,0x196,0x208,0x194)+_0x1ce6a0(0x2cd,0x25e,0x286,0x21e)+_0x1ce6a0(0x2f2,0x2bd,0x2b3,0x2f8),'eNieR':_0x48bf31(-0x130,-0x1db,-0x1c8,-0x188)+'nerate','IjLIF':function(_0x41b018,_0x367689){return _0x41b018!==_0x367689;},'eExFB':_0x48bf31(-0x1dd,-0x166,-0x151,-0x10b),'ZKLXy':'响应内容:','eJepE':_0x1ce6a0(0x2e9,0x1f3,0x257,0x277)+'尝试作为原始\x20Bas'+'e64\x20数据处理。','ACRJC':_0x48bf31(-0x1ca,-0x17d,-0x177,-0x1dd)+'/png;base6'+'4,','cOexA':function(_0x30da64,_0xca4083){return _0x30da64(_0xca4083);},'axvag':function(_0x11c048,_0x424049){return _0x11c048||_0x424049;},'fSbrQ':function(_0x4bd812,_0xf739c5){return _0x4bd812+_0xf739c5;},'oxBkz':_0x1ce6a0(0x33c,0x383,0x30c,0x345)+_0x48bf31(-0x1c1,-0x28c,-0x239,-0x21e),'TJgqc':function(_0x493760,_0x2e13eb,_0x4e2c2c){return _0x493760(_0x2e13eb,_0x4e2c2c);},'tlVrr':_0x48bf31(-0x1df,-0x282,-0x240,-0x284)+_0x48bf31(-0x18e,-0x208,-0x17f,-0xee),'OcaLQ':function(_0x4c5d65){return _0x4c5d65();},'fLGpD':function(_0x4af788,_0xa55d5e){return _0x4af788(_0xa55d5e);},'LSqCu':function(_0x5f1950,_0x3bc11d){return _0x5f1950===_0x3bc11d;},'sNqlj':'Icdrs','CUhub':_0x1ce6a0(0x381,0x31c,0x2f5,0x2a6)+_0x48bf31(-0x16d,-0x145,-0x1a3,-0x157),'RebOq':_0x48bf31(-0x125,-0x1aa,-0x189,-0x162)+_0x1ce6a0(0x283,0x20f,0x2a6,0x27b)+'L。','WXmuM':_0x1ce6a0(0x1da,0x21b,0x244,0x1f4)+'1','hpqgk':function(_0x3b2c04,_0x3afc6d){return _0x3b2c04(_0x3afc6d);}};clearLog();const _0x57f373=taskQueue['addTask']({'name':_0x493e0a[_0x48bf31(-0x195,-0x23a,-0x217,-0x1bd)](_0x493e0a['CIAFu'](_0x126e8f,'')[_0x48bf31(-0x18d,-0xb6,-0x133,-0x1b7)](-0x31*-0x9e+-0x1c1a+0x112*-0x2,0xdf+-0x1*-0x161f+-0x20*0xb7),_0x126e8f&&_0x493e0a[_0x48bf31(-0x149,-0xef,-0x158,-0x189)](_0x126e8f[_0x48bf31(-0x254,-0x16f,-0x1e9,-0x24a)],0xb*0x28f+0x292+0x1e99*-0x1)?_0x493e0a[_0x48bf31(-0x14d,-0x1cd,-0x184,-0x111)]:''),'type':TaskType['SD'],'prompt':_0x126e8f});currentTaskId=_0x57f373;let _0x1fae32=_0x10ab04;_0x126e8f=_0x493e0a[_0x1ce6a0(0x369,0x30e,0x2d3,0x2bd)](processCharacterPrompt,_0x126e8f),_0x10ab04=_0x493e0a[_0x48bf31(-0x12e,-0xf3,-0x125,-0xc7)](processCharacterPrompt,_0x10ab04),_0x126e8f=await stripChineseAnnotations(_0x126e8f),_0x10ab04=await _0x493e0a[_0x48bf31(-0x102,-0xa2,-0x12e,-0x16d)](stripChineseAnnotations,_0x10ab04);const _0x309764=extension_settings[extensionName]['sdUrl']['trim'](),_0x3fd6da=extension_settings[extensionName];addLog(_0x1ce6a0(0x21c,0x21b,0x215,0x1af)+_0x1ce6a0(0x1fa,0x24d,0x225,0x22f)+'端为'+_0x3fd6da[_0x48bf31(-0x1fb,-0x218,-0x202,-0x1fd)]+_0x48bf31(-0xbf,-0x18a,-0x12d,-0xa4)+_0x3fd6da[_0x1ce6a0(0x2b4,0x213,0x24e,0x2e7)+_0x48bf31(-0x1d0,-0xe3,-0x163,-0x108)]);const _0x4c361b=_0x10ab04&&_0x493e0a[_0x1ce6a0(0x350,0x356,0x30d,0x372)](_0x10ab04[_0x48bf31(-0x128,-0x170,-0x17d,-0x10f)](),'')?_0x10ab04:_0x126e8f;_0x493e0a['rlDqU'](addLog,_0x48bf31(-0x172,-0xa9,-0x12b,-0x10a)+_0x4c361b);let _0x2a93da=![];if(_0x4c361b[_0x1ce6a0(0x2af,0x320,0x2b7,0x256)](_0x493e0a['bCsaE'])){if(_0x493e0a[_0x48bf31(-0x162,-0x249,-0x1cb,-0x1a4)](_0x493e0a[_0x1ce6a0(0x23b,0x263,0x26e,0x2ea)],_0x493e0a[_0x48bf31(-0x1e9,-0x19b,-0x1e5,-0x188)]))_0x2a93da=!![];else{_0x493e0a['pTryW'](_0x450895,_0x1ce6a0(0x271,0x2c7,0x29e,0x264)+_0x2872da[_0x48bf31(-0x242,-0x1e2,-0x200,-0x1af)]+'\x20'+_0x4d4d55[_0x48bf31(-0x116,-0x10b,-0x1a4,-0x1d7)]);throw new _0x172a92(_0x1ce6a0(0x298,0x283,0x29e,0x26d)+_0x24a3ce[_0x1ce6a0(0x2c6,0x2ed,0x253,0x2c8)]+'\x20'+_0x113984[_0x1ce6a0(0x33a,0x23a,0x2af,0x2d6)]);}}_0x493e0a[_0x1ce6a0(0x2e5,0x2af,0x317,0x359)](addLog,_0x48bf31(-0x1b3,-0x1ce,-0x175,-0x102)+_0x1ce6a0(0x1f0,0x23d,0x205,0x263)+_0x48bf31(-0x1dd,-0x216,-0x1b4,-0x225)+_0x2a93da);let _0x52d4f0={},_0x525834='',_0x32ce3b='';if(_0x2a93da){if(_0x493e0a[_0x48bf31(-0x15c,-0x1af,-0x146,-0x1be)]('ePZvf',_0x493e0a[_0x1ce6a0(0x31e,0x302,0x2e6,0x266)])){_0x493e0a['apTTp'](addLog,_0x493e0a['XaHtG']),_0x52d4f0=_0x493e0a['ftXdD'](parsePromptStringWithCoordinates,_0x4c361b),_0x525834=_0x52d4f0[_0x493e0a[_0x48bf31(-0x1c5,-0x141,-0x193,-0x1a2)]];for(let _0x3f3dbd=0x26ab+0x13eb+0x1*-0x3a95;_0x493e0a[_0x48bf31(-0x260,-0x22f,-0x23c,-0x200)](_0x3f3dbd,-0x2076+0xeef+0x3*0x5d9);_0x3f3dbd++){if(_0x52d4f0['Character\x20'+_0x3f3dbd+_0x1ce6a0(0x267,0x344,0x2ce,0x331)]){if(_0x493e0a[_0x48bf31(-0x1d9,-0x1d4,-0x192,-0x199)]!==_0x493e0a[_0x48bf31(-0x205,-0x1c0,-0x188,-0x1fe)])_0x32ce3b=_0x493e0a['FwPRu'](_0x493e0a[_0x1ce6a0(0x219,0x19c,0x230,0x2a8)](_0x32ce3b,',\x20'),_0x52d4f0[_0x48bf31(-0x24a,-0x226,-0x22d,-0x29d)+_0x3f3dbd+'\x20Prompt']);else{_0x493e0a['pTryW'](_0x19e0f6,_0x48bf31(-0x13c,-0x113,-0x166,-0x108)+':\x20'+_0x58a94c[_0x1ce6a0(0x2b6,0x2d1,0x28c,0x222)]+(_0x48bf31(-0x193,-0x11c,-0x144,-0xc5)+'i是否正常启动，并检'+_0x48bf31(-0x225,-0x11b,-0x1a2,-0x177))),_0x3fbd00[_0x1ce6a0(0x2c7,0x2e5,0x31e,0x2ec)+'sk'](_0x290148,![]),_0x5f46f7=null;throw new _0x18dba9('获取或者切换模型失败'+_0x48bf31(-0x206,-0x20a,-0x211,-0x1a9)+_0x48bf31(-0x219,-0x1ef,-0x204,-0x275)+_0x1ce6a0(0x237,0x224,0x2b1,0x257));}}}}else for(let _0x538d42=-0x24c1*-0x1+0x1f*-0xa7+0x1*-0x1087;_0x493e0a[_0x1ce6a0(0x332,0x2b4,0x2fc,0x35d)](_0x538d42,0x18c2+-0xc*-0x223+0x1931*-0x2);_0x538d42++){_0x2a1e29[_0x1ce6a0(0x1f8,0x26c,0x226,0x22d)+_0x538d42+'\x20Prompt']&&(_0x1ab79c=_0x493e0a[_0x1ce6a0(0x24f,0x23d,0x230,0x209)](_0x493e0a['hReYN'](_0x1ec835,',\x20'),_0x493e0a[_0x1ce6a0(0x240,0x2e7,0x2d3,0x27d)](_0x1a02f5,_0x50472f['Character\x20'+_0x538d42+_0x1ce6a0(0x336,0x361,0x2ce,0x2b0)])));}}else _0x493e0a['lSKJQ'](addLog,_0x493e0a['uLulH']),_0x525834=_0x4c361b;let {modifiedPrompt:_0x121306,insertions:_0x56ad5d}=await _0x493e0a['gyfYa'](prompt_replace,_0x525834,_0x32ce3b);if(_0x2a93da){if(_0x493e0a[_0x1ce6a0(0x201,0x25a,0x295,0x2ca)](_0x493e0a[_0x48bf31(-0x1ee,-0x246,-0x23f,-0x282)],_0x493e0a['dpckm']))for(let _0x5d305a=0xc13+-0x2515+0x1903;_0x493e0a['xygFh'](_0x5d305a,0x1*-0x3a6+-0x2*-0x8d9+-0xe08);_0x5d305a++){_0x52d4f0[_0x1ce6a0(0x226,0x1db,0x226,0x25a)+_0x5d305a+_0x1ce6a0(0x2a4,0x365,0x2ce,0x305)]&&(_0x121306=_0x493e0a['hReYN'](_0x493e0a[_0x1ce6a0(0x246,0x2c9,0x2c6,0x26b)](_0x121306,',\x20'),prompt_replace_for_character(_0x52d4f0[_0x1ce6a0(0x1ca,0x1a2,0x226,0x21b)+_0x5d305a+'\x20Prompt'])));}else _0xf0ab00['removeList'+'ener'](_0x42bb27['GENERATE_I'+_0x48bf31(-0xd7,-0xad,-0x128,-0x107)+'ST'],_0x12d30),_0x513cdb['initialize'+_0x48bf31(-0x260,-0x20e,-0x1d9,-0x150)]=![],_0x62ce19(_0x1ce6a0(0x342,0x36b,0x32f,0x2a1)+_0x1ce6a0(0x2c3,0x299,0x315,0x326));}let _0x345c26=await _0x493e0a[_0x48bf31(-0x2b4,-0x223,-0x230,-0x1a3)](zhengmian,extension_settings[extensionName][_0x1ce6a0(0x333,0x2e5,0x321,0x33f)][extension_settings[extensionName][_0x48bf31(-0xe8,-0x1ce,-0x14b,-0x168)]][_0x48bf31(-0x1ff,-0x223,-0x235,-0x1eb)+'t'],_0x121306,extension_settings[extensionName][_0x48bf31(-0x12b,-0x122,-0x132,-0xa1)][extension_settings[extensionName][_0x48bf31(-0xb3,-0x14c,-0x14b,-0x1a0)]][_0x1ce6a0(0x1e5,0x1b7,0x21e,0x264)+'t_end'],extension_settings[extensionName][_0x48bf31(-0xf9,-0x191,-0x182,-0x1d1)],_0x56ad5d),_0x21a461=await _0x493e0a[_0x1ce6a0(0x230,0x293,0x26c,0x301)](fumian,extension_settings[extensionName][_0x1ce6a0(0x36c,0x37c,0x321,0x38b)][extension_settings[extensionName]['yusheid_sd']]['negativePr'+_0x48bf31(-0x198,-0x1dc,-0x219,-0x1b3)],extension_settings[extensionName]['UCP_sd']);_0x493e0a[_0x48bf31(-0x1f6,-0x1a8,-0x180,-0xed)](addLog,_0x1ce6a0(0x336,0x2f4,0x327,0x296)+_0x21a461),extension_settings['sd']['auto_url']=_0x309764,await _0x493e0a['kVZip'](saveSettingsDebounced);try{if(_0x493e0a['bvUGS']===_0x493e0a[_0x48bf31(-0x159,-0x163,-0x1f1,-0x216)]){if(_0x3fd6da[_0x48bf31(-0x21a,-0x1ef,-0x202,-0x1ac)]===_0x493e0a[_0x1ce6a0(0x1ef,0x24d,0x20b,0x24f)]){if(_0x493e0a[_0x1ce6a0(0x229,0x2e9,0x288,0x2de)](_0x493e0a[_0x48bf31(-0x1c0,-0x26d,-0x215,-0x1af)],_0x493e0a[_0x1ce6a0(0x2d2,0x22c,0x23e,0x2aa)])){const _0x39e10f={};_0x39e10f[_0x1ce6a0(0x315,0x308,0x27d,0x269)]=_0x3fd6da[_0x1ce6a0(0x369,0x381,0x314,0x395)+_0x48bf31(-0x1f5,-0x257,-0x20a,-0x24c)]?_0x3fd6da[_0x1ce6a0(0x36b,0x376,0x314,0x294)+_0x48bf31(-0x274,-0x20f,-0x20a,-0x245)]:'',_0x39e10f[_0x1ce6a0(0x331,0x257,0x2da,0x32a)]=_0x309764;const _0x32f175=await fetch(_0x493e0a[_0x48bf31(-0x14e,-0x202,-0x1c5,-0x23a)],{'method':_0x493e0a[_0x48bf31(-0xce,-0x145,-0x164,-0x15c)],'body':JSON[_0x1ce6a0(0x2a1,0x1ff,0x291,0x2cc)](_0x39e10f),'headers':getRequestHeaders(window[_0x1ce6a0(0x238,0x284,0x297,0x297)])});if(!_0x32f175['ok']){_0x493e0a[_0x48bf31(-0xa3,-0xf4,-0x12e,-0x163)](addLog,_0x1ce6a0(0x2f2,0x25d,0x29e,0x319)+_0x32f175[_0x1ce6a0(0x2df,0x2b9,0x253,0x1c2)]+'\x20'+_0x32f175[_0x48bf31(-0x1ab,-0x1bf,-0x1a4,-0x1a1)]);throw new Error(_0x48bf31(-0x1b0,-0x208,-0x1b5,-0x133)+_0x32f175[_0x1ce6a0(0x274,0x221,0x253,0x2c9)]+'\x20'+_0x32f175[_0x1ce6a0(0x2e7,0x315,0x2af,0x2f2)]);}let _0x11db41=await _0x32f175[_0x48bf31(-0x1b6,-0x12b,-0x13a,-0x133)]();console[_0x1ce6a0(0x2c0,0x25e,0x24a,0x2af)](_0x48bf31(-0x1ca,-0x1b1,-0x222,-0x286)+'2222',_0x11db41),console[_0x1ce6a0(0x235,0x22f,0x24a,0x264)](_0x1ce6a0(0x234,0x2c8,0x2a2,0x32b)+_0x1ce6a0(0x372,0x332,0x329,0x353)+_0x1ce6a0(0x1de,0x2bd,0x24e,0x28c)+_0x1ce6a0(0x368,0x314,0x2f0,0x26d),_0x3fd6da[_0x48bf31(-0x207,-0x180,-0x205,-0x1e2)+'8_model']);if(_0x493e0a['sFvLY'](_0x11db41,_0x3fd6da[_0x1ce6a0(0x20b,0x1d1,0x24e,0x22c)+_0x48bf31(-0x1bb,-0x157,-0x163,-0x1cc)])){if(_0x493e0a[_0x1ce6a0(0x2f7,0x297,0x281,0x31a)]===_0x1ce6a0(0x2cb,0x35c,0x2c8,0x330)){_0x44f3a6(_0x1ce6a0(0x28a,0x2d7,0x2a0,0x2fd)+_0x168001[_0x1ce6a0(0x27c,0x1e3,0x253,0x278)]+'\x20'+_0x2a0b20['statusText']);throw new _0x8b5d14(_0x48bf31(-0x20b,-0x209,-0x1b3,-0x120)+_0x29da80[_0x48bf31(-0x167,-0x180,-0x200,-0x1b8)]+'\x20'+_0x228c8d[_0x48bf31(-0x122,-0x17e,-0x1a4,-0x10e)]);}else{_0x493e0a[_0x48bf31(-0x1b2,-0x237,-0x1f6,-0x1fa)](addLog,'正在设置模型为'+_0x3fd6da[_0x48bf31(-0x211,-0x18f,-0x205,-0x1a5)+_0x48bf31(-0x147,-0x191,-0x163,-0x140)]+'...'),toastr[_0x1ce6a0(0x32e,0x26e,0x2bc,0x32d)]('正在设置模型...为'+_0x3fd6da['sd_cchatu_'+_0x48bf31(-0x15e,-0x175,-0x163,-0x1c1)]);const _0x41524c={};_0x41524c[_0x48bf31(-0x16c,-0x25b,-0x1d6,-0x24c)]=_0x3fd6da[_0x48bf31(-0x16e,-0x1a7,-0x13f,-0x1d3)+'sd_auth']?_0x3fd6da[_0x48bf31(-0xdd,-0xc9,-0x13f,-0x196)+'sd_auth']:'',_0x41524c['url']=_0x309764,_0x41524c[_0x48bf31(-0x1b0,-0x233,-0x1c1,-0x146)]=_0x3fd6da[_0x48bf31(-0x262,-0x1ed,-0x205,-0x257)+_0x48bf31(-0x1b3,-0x100,-0x163,-0x1ef)];const _0x194b71=await _0x493e0a[_0x48bf31(-0xd8,-0x1c9,-0x160,-0x11c)](fetch,_0x493e0a[_0x1ce6a0(0x2e8,0x2e1,0x2b2,0x225)],{'method':_0x493e0a[_0x1ce6a0(0x2df,0x306,0x2ef,0x286)],'body':JSON[_0x48bf31(-0x219,-0x208,-0x1c2,-0x1d4)](_0x41524c),'headers':_0x493e0a[_0x48bf31(-0x1e5,-0x2a0,-0x243,-0x26f)](getRequestHeaders,window[_0x48bf31(-0x174,-0x1fa,-0x1bc,-0x1f8)])});if(!_0x194b71['ok']){_0x493e0a[_0x48bf31(-0x1f6,-0x201,-0x178,-0x1e9)](addLog,_0x48bf31(-0x128,-0x181,-0x1b3,-0x132)+_0x194b71['status']+'\x20'+_0x194b71[_0x48bf31(-0x14e,-0x20b,-0x1a4,-0x1d4)]);throw new Error(_0x48bf31(-0x22a,-0x201,-0x1b3,-0x218)+_0x194b71[_0x1ce6a0(0x292,0x2ba,0x253,0x247)]+'\x20'+_0x194b71[_0x48bf31(-0x126,-0x228,-0x1a4,-0x229)]);}toastr[_0x1ce6a0(0x2a1,0x22f,0x2bc,0x30f)](_0x1ce6a0(0x233,0x347,0x2c5,0x2d7)+_0x3fd6da[_0x1ce6a0(0x267,0x2be,0x24e,0x264)+_0x48bf31(-0x1eb,-0x1ab,-0x163,-0x190)]+'成功');}}}else _0x18eb13['on'](_0x3ebee4['GENERATE_I'+_0x48bf31(-0x13d,-0x15c,-0x128,-0x18b)+'ST'],_0x2cfd98),_0x493e0a[_0x48bf31(-0x2d6,-0x257,-0x243,-0x1b8)](_0x2b3b97,_0x493e0a[_0x48bf31(-0x288,-0x1ce,-0x208,-0x1ec)]);}else{let _0x3fce63=await getSDMode(_0x309764);if(_0x3fce63!=_0x3fd6da[_0x48bf31(-0x18d,-0x252,-0x205,-0x1dc)+_0x48bf31(-0x179,-0x16a,-0x163,-0x15e)]){if(_0x493e0a[_0x1ce6a0(0x308,0x2b9,0x288,0x218)](_0x493e0a[_0x48bf31(-0x299,-0x23e,-0x226,-0x250)],_0x1ce6a0(0x25a,0x292,0x2e0,0x28c)))_0x493e0a[_0x48bf31(-0x1d8,-0x106,-0x18f,-0x15f)](addLog,_0x48bf31(-0x242,-0x241,-0x1b8,-0x141)+_0x3fd6da['sd_cchatu_'+_0x1ce6a0(0x358,0x300,0x2f0,0x324)]+_0x48bf31(-0x233,-0x179,-0x210,-0x290)),await _0x493e0a[_0x1ce6a0(0x2e9,0x2b9,0x26c,0x209)](setSDMode,_0x309764,_0x3fd6da[_0x48bf31(-0x1d2,-0x199,-0x205,-0x1b3)+_0x1ce6a0(0x2d1,0x2c6,0x2f0,0x285)]);else{_0x493e0a['pTryW'](_0x158a29,_0x1ce6a0(0x20e,0x2c9,0x233,0x21e)+_0x48bf31(-0x1bf,-0x2b6,-0x244,-0x26f));const _0x5cf9d3={};_0x5cf9d3['ad_model']=_0x493e0a[_0x48bf31(-0x105,-0x189,-0x15b,-0x191)];const _0x448661={};_0x448661[_0x1ce6a0(0x232,0x24c,0x206,0x173)]=[!![],!![],_0x5cf9d3];const _0x2a46bd={};_0x2a46bd['ADetailer']=_0x448661;const _0x2afd6a={};_0x2afd6a['alwayson_s'+_0x1ce6a0(0x252,0x278,0x2ac,0x2f4)]=_0x2a46bd,_0x2626d3=_0x252b55(_0x4bfd18,_0x2afd6a);}}}}else{const _0xea1ce6=_0x140665[_0x48bf31(-0x177,-0x1e4,-0x1dc,-0x273)](_0x50a7f0);_0x21b871=_0xea1ce6['images'][0xc76+-0x1825+0xbaf];}}catch(_0x20c916){addLog(_0x1ce6a0(0x30b,0x365,0x2ed,0x317)+':\x20'+_0x20c916[_0x1ce6a0(0x2bd,0x2d6,0x28c,0x2de)]+(_0x48bf31(-0xb8,-0xbc,-0x144,-0x1a1)+_0x1ce6a0(0x229,0x2d6,0x24f,0x1cd)+_0x48bf31(-0x18e,-0x152,-0x1a2,-0x22f))),taskQueue['completeTa'+'sk'](_0x57f373,![]),currentTaskId=null;throw new Error('获取或者切换模型失败'+_0x1ce6a0(0x2cb,0x228,0x242,0x286)+_0x1ce6a0(0x1e6,0x22e,0x24f,0x1ba)+_0x1ce6a0(0x2ed,0x2d0,0x2b1,0x32c));}let _0x3d9bbb=-(0x206+0x19ee*0x1+-0x1bf3);const _0xfd0290=_0x3fd6da[_0x48bf31(-0x116,-0xe7,-0x162,-0x158)];_0x493e0a[_0x48bf31(-0xd5,-0xe6,-0x146,-0x150)](_0xfd0290,'')&&_0xfd0290!==null&&!_0x493e0a['lSKJQ'](isNaN,_0x493e0a[_0x48bf31(-0x11c,-0xf1,-0x168,-0x13f)](Number,_0xfd0290))&&_0x493e0a[_0x48bf31(-0xe0,-0x1d4,-0x161,-0xfa)](Number(_0xfd0290),0x269d+-0x9d7+-0x1cc6)&&(_0x3d9bbb=_0x493e0a[_0x1ce6a0(0x3ae,0x2d5,0x32e,0x368)](Number,_0xfd0290));let _0x13d927={'prompt':_0x345c26,'negative_prompt':_0x21a461,'sampler_name':_0x3fd6da[_0x1ce6a0(0x286,0x270,0x24e,0x1f0)+_0x1ce6a0(0x2a9,0x232,0x222,0x199)+_0x48bf31(-0x16c,-0x1a4,-0x1fb,-0x267)],'scheduler':_0x3fd6da[_0x1ce6a0(0x1bc,0x24c,0x24e,0x2bc)+_0x48bf31(-0x2a0,-0x1ac,-0x212,-0x1cb)+'r'],'steps':_0x3fd6da['sd_csteps'],'cfg_scale':_0x3fd6da['sdCfgScale'],'width':_0x2d1925?_0x2d1925:_0x3fd6da[_0x1ce6a0(0x2aa,0x2b9,0x300,0x2d1)],'height':_0x1e269b?_0x1e269b:_0x3fd6da[_0x48bf31(-0x213,-0x228,-0x1d8,-0x1f1)],'restore_faces':_0x493e0a[_0x1ce6a0(0x294,0x23c,0x289,0x2d0)](_0x3fd6da[_0x1ce6a0(0x2e9,0x2c6,0x263,0x291)+'es'],_0x493e0a['tONTy']),'enable_hr':_0x493e0a[_0x1ce6a0(0x39d,0x36f,0x309,0x30e)](_0x3fd6da[_0x1ce6a0(0x363,0x38e,0x304,0x38f)+'fix'],_0x493e0a[_0x48bf31(-0x1b5,-0x134,-0x145,-0x176)]),'hr_upscaler':_0x3fd6da[_0x48bf31(-0x276,-0x23d,-0x205,-0x1c9)+'8_upscaler'],'hr_scale':_0x3fd6da[_0x1ce6a0(0x2ed,0x3b6,0x31d,0x396)+_0x1ce6a0(0x2f5,0x29d,0x2a1,0x234)],'hr_additional_modules':[],'denoising_strength':_0x3fd6da[_0x48bf31(-0x247,-0x1ff,-0x236,-0x27a)+'ing_streng'+'th'],'hr_second_pass_steps':_0x3fd6da[_0x48bf31(-0x101,-0x104,-0x14f,-0x145)+_0x48bf31(-0x13a,-0x17c,-0x159,-0x194)],'seed':_0x3d9bbb,'override_settings':{'CLIP_stop_at_last_layers':_0x493e0a[_0x48bf31(-0x179,-0xd2,-0x12e,-0xe3)](Number,_0x3fd6da[_0x48bf31(-0x116,-0x188,-0x14c,-0x156)+_0x1ce6a0(0x25a,0x1a6,0x20d,0x194)]),'sd_vae':_0x3fd6da[_0x1ce6a0(0x292,0x1ce,0x24e,0x281)+'8_vae']},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x493e0a['RFlfu'](addLog,_0x48bf31(-0x169,-0x19f,-0x1c3,-0x22b)+_0x1ce6a0(0x1ce,0x251,0x224,0x262)+_0x13d927[_0x1ce6a0(0x225,0x2ca,0x290,0x222)+'ces']),_0x493e0a['vLrsV'](addLog,'enable_hr\x20'+_0x1ce6a0(0x21d,0x25d,0x211,0x28d)+_0x13d927[_0x1ce6a0(0x235,0x27d,0x203,0x1e9)]);_0x493e0a['rLrLt'](_0x3fd6da[_0x1ce6a0(0x28c,0x345,0x2f9,0x30f)+'ler'],_0x493e0a[_0x48bf31(-0xad,-0xee,-0x145,-0x124)])&&(addLog(_0x493e0a[_0x1ce6a0(0x29b,0x301,0x32a,0x307)]),_0x13d927=_0x493e0a['RgnLj'](deepMerge,_0x13d927,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x493e0a['LCPVi']}]}}}));function _0x48bf31(_0x45df2f,_0xaf9229,_0x2001a6,_0x5c6bda){return _0x3878(_0x2001a6- -0x2c3,_0x45df2f);}const _0x566910=_0x1ce6a0(0x326,0x2fe,0x2ad,0x335)+_0x1ce6a0(0x1e3,0x28d,0x278,0x257)+_0x48bf31(-0x1bd,-0x131,-0x17a,-0x105)+_0x1ce6a0(0x26d,0x2c9,0x267,0x1e8)+_0x345c26+(_0x48bf31(-0x1f6,-0x2b2,-0x24f,-0x27f)+'(Negative\x20'+'Prompt):**'+'\x20')+_0x21a461+(_0x48bf31(-0x118,-0x128,-0x172,-0x206)+_0x48bf31(-0xf2,-0x194,-0x14e,-0x1a6)+'**\x20')+_0x13d927[_0x48bf31(-0x192,-0x1f0,-0x194,-0x1f6)+'me']+(_0x1ce6a0(0x270,0x2d3,0x287,0x29c)+'teps):**\x20')+_0x13d927[_0x48bf31(-0x168,-0x10e,-0x159,-0x1e7)]+(_0x48bf31(-0x1f6,-0x179,-0x1dd,-0x158)+'cale:**\x20')+_0x13d927[_0x1ce6a0(0x280,0x26c,0x299,0x2db)]+('\x0a-\x20**尺寸\x20(S'+_0x48bf31(-0x1b9,-0x2b5,-0x234,-0x1c8))+_0x13d927[_0x1ce6a0(0x2c3,0x341,0x2ee,0x317)]+'x'+_0x13d927['height']+(_0x48bf31(-0x1e3,-0x1fc,-0x20d,-0x1ce)+_0x48bf31(-0x1ba,-0x1be,-0x1e0,-0x15c))+(_0x493e0a[_0x1ce6a0(0x2f7,0x2e9,0x288,0x240)](_0x13d927[_0x48bf31(-0x187,-0x14b,-0x167,-0xfb)],-(0x86c+0x1e45+-0x26b0))?_0x493e0a[_0x1ce6a0(0x36b,0x3c8,0x334,0x347)]:_0x13d927['seed'])+('\x0a-\x20**模型\x20(M'+'odel):**\x20')+_0x3fd6da[_0x48bf31(-0x1a3,-0x183,-0x205,-0x205)+_0x48bf31(-0x1f0,-0x18e,-0x163,-0x114)]+(_0x1ce6a0(0x254,0x246,0x25e,0x239)+'*\x20')+_0x13d927[_0x48bf31(-0x1c7,-0x1b3,-0x1a5,-0x1d9)+_0x1ce6a0(0x2b0,0x2a5,0x271,0x230)][_0x48bf31(-0x265,-0x2cd,-0x249,-0x1c5)]+(_0x1ce6a0(0x2f2,0x2ea,0x301,0x347)+_0x1ce6a0(0x299,0x205,0x247,0x1d2))+_0x13d927[_0x48bf31(-0x1dd,-0x171,-0x1a5,-0x221)+_0x1ce6a0(0x261,0x1fa,0x271,0x2fa)]['CLIP_stop_'+'at_last_la'+_0x48bf31(-0x1f9,-0x277,-0x1fe,-0x220)]+(_0x1ce6a0(0x268,0x2ae,0x2b6,0x270)+'(Hires\x20Fix'+_0x1ce6a0(0x2aa,0x309,0x2b8,0x33b))+_0x13d927[_0x1ce6a0(0x28b,0x204,0x203,0x202)]+(_0x1ce6a0(0x214,0x2d5,0x248,0x1c0)+'(Upscale\x20F'+_0x48bf31(-0x18f,-0x1b4,-0x1a9,-0x19d))+_0x13d927[_0x1ce6a0(0x24f,0x1aa,0x216,0x25a)]+(_0x48bf31(-0x140,-0x1f9,-0x1af,-0x135)+'(Denoising'+_0x48bf31(-0x187,-0x163,-0x1ee,-0x182)+_0x1ce6a0(0x383,0x376,0x30a,0x2b1))+_0x13d927['denoising_'+_0x48bf31(-0x13e,-0xe1,-0x127,-0x17a)]+('\x0a-\x20**脸部修复\x20'+_0x1ce6a0(0x27f,0x242,0x2b9,0x2f9)+_0x48bf31(-0x1bc,-0x17f,-0x1ea,-0x1dd))+_0x13d927[_0x1ce6a0(0x253,0x328,0x290,0x21c)+'ces']+('\x0a-\x20**ADeta'+_0x1ce6a0(0x1f7,0x1da,0x24c,0x1f3))+(_0x3fd6da[_0x48bf31(-0xd7,-0x18f,-0x15a,-0x133)+'ler']==_0x48bf31(-0x22f,-0x201,-0x1ed,-0x27d))+'\x0a---\x0a\x20\x20\x20\x20';_0x493e0a['pTryW'](addLog,_0x566910),_0x493e0a[_0x1ce6a0(0x2b0,0x1e7,0x229,0x1d9)](addLog,_0x48bf31(-0x1cc,-0x24d,-0x1c4,-0x1d1)+'数为'+JSON[_0x1ce6a0(0x301,0x1fc,0x291,0x2f2)](_0x13d927)),console['log'](_0x493e0a[_0x1ce6a0(0x1ed,0x285,0x272,0x22f)],_0x13d927);let _0x21eaec=!![];while(_0x21eaec){_0x493e0a['cydtg'](_0x493e0a[_0x48bf31(-0x1f1,-0x16c,-0x1bf,-0x134)],_0x48bf31(-0x24a,-0x27b,-0x21a,-0x1d4))?(_0x38e058[_0x48bf31(-0x294,-0x1eb,-0x203,-0x1e6)+_0x48bf31(-0x1a1,-0x1d8,-0x1d9,-0x1cd)]=!![],_0x493e0a[_0x1ce6a0(0x284,0x1c5,0x212,0x1ff)](_0x66a88b)):window[_0x1ce6a0(0x255,0x2de,0x2a3,0x2ed)]?_0x21eaec=![]:await _0x493e0a[_0x48bf31(-0x161,-0x158,-0x1e4,-0x252)](sleep,-0x1973*0x1+-0x71+0x1dcc);}function _0x1ce6a0(_0x113b32,_0x3103c9,_0x33ad9b,_0x21bc34){return _0x3878(_0x33ad9b-0x190,_0x3103c9);};try{window[_0x1ce6a0(0x2ff,0x229,0x2a3,0x234)]=!![],taskQueue['updateStat'+'us'](_0x57f373,_0x493e0a[_0x1ce6a0(0x2db,0x2df,0x2c2,0x326)]);if(_0x493e0a[_0x1ce6a0(0x279,0x212,0x28a,0x31c)](_0x3fd6da[_0x1ce6a0(0x1fb,0x1e0,0x251,0x1fd)],_0x493e0a['YdQtm'])){if(!taskQueue['isTaskInQu'+_0x48bf31(-0x215,-0x209,-0x1f9,-0x1d8)](_0x57f373)){addLog(_0x493e0a[_0x1ce6a0(0x2aa,0x225,0x260,0x275)]),eventSource[_0x1ce6a0(0x354,0x300,0x2ff,0x2d3)](_0x493e0a[_0x48bf31(-0x1aa,-0x1d2,-0x1ff,-0x271)]);throw new Error(_0x493e0a[_0x1ce6a0(0x1fe,0x265,0x23b,0x25e)]);}_0x13d927[_0x1ce6a0(0x2b4,0x24d,0x2da,0x2a0)]=_0x309764,console[_0x1ce6a0(0x2cf,0x226,0x24a,0x218)](_0x493e0a[_0x1ce6a0(0x233,0x19b,0x218,0x1fc)],_0x3fd6da[_0x1ce6a0(0x35f,0x346,0x314,0x2d9)+_0x1ce6a0(0x2a9,0x24c,0x249,0x229)]),_0x13d927['auth']=_0x3fd6da[_0x1ce6a0(0x29d,0x280,0x314,0x348)+_0x48bf31(-0x177,-0x181,-0x20a,-0x254)]?_0x3fd6da[_0x1ce6a0(0x337,0x346,0x314,0x27c)+_0x1ce6a0(0x2b0,0x259,0x249,0x222)]:'';const _0x298302=await fetch(_0x493e0a[_0x48bf31(-0xf5,-0x13f,-0x15f,-0x14e)],{'method':_0x493e0a['cJTQL'],'headers':_0x493e0a[_0x48bf31(-0x17f,-0x208,-0x1e4,-0x211)](getRequestHeaders,window[_0x1ce6a0(0x2ac,0x278,0x297,0x311)]),'body':JSON[_0x1ce6a0(0x2c4,0x2f0,0x291,0x306)](_0x13d927)});if(!_0x298302['ok']){if(_0x493e0a[_0x1ce6a0(0x2ac,0x25a,0x282,0x217)](_0x493e0a[_0x1ce6a0(0x31a,0x291,0x283,0x230)],_0x1ce6a0(0x2ee,0x2ad,0x27e,0x2d1))){const _0x166981=await _0x298302['text']();_0x493e0a['vLrsV'](addLog,_0x48bf31(-0x2be,-0x1af,-0x245,-0x259)+_0x1ce6a0(0x22d,0x2ac,0x2a9,0x2df)+_0x298302[_0x1ce6a0(0x219,0x29b,0x253,0x205)]+_0x1ce6a0(0x1f4,0x1d2,0x24d,0x2d0)+_0x166981),console[_0x48bf31(-0x253,-0x191,-0x209,-0x24f)](_0x493e0a[_0x48bf31(-0x232,-0x177,-0x1d4,-0x1e7)],_0x166981);throw new Error(_0x1ce6a0(0x2bf,0x1f5,0x261,0x207)+_0x298302[_0x48bf31(-0x298,-0x28e,-0x200,-0x1d1)]+_0x48bf31(-0x177,-0x195,-0x16f,-0x1d5)+_0x166981);}else{const _0x590eed=_0x493e0a['YPXAt'][_0x48bf31(-0x1ad,-0x1d8,-0x238,-0x1a2)]('|');let _0xdf3823=0x643+0x2*0xa7d+0x16f*-0x13;while(!![]){switch(_0x590eed[_0xdf3823++]){case'0':_0x476466['error'](_0x493e0a[_0x48bf31(-0x23b,-0x20e,-0x233,-0x1d6)],_0x880288);continue;case'1':_0x3b25f1=null;continue;case'2':_0x13b60d[_0x48bf31(-0x1c3,-0x21a,-0x1b0,-0x247)]=!![];continue;case'3':if(_0x346962[_0x48bf31(-0x17e,-0x181,-0x1c7,-0x1b7)]===_0x493e0a[_0x48bf31(-0x221,-0x1e1,-0x218,-0x1fc)]){}else _0x1694cf[_0x48bf31(-0x13e,-0x1c9,-0x135,-0x177)+'sk'](_0x50e3d8,![]);continue;case'4':throw _0x53ad1a;continue;case'5':_0x493e0a['ftXdD'](_0x149130,_0x1ce6a0(0x2c3,0x389,0x323,0x2ea)+_0x56c7db[_0x48bf31(-0x24d,-0x16e,-0x1c7,-0x1eb)]);continue;}break;}}}const _0x241b06=await _0x298302[_0x1ce6a0(0x376,0x380,0x319,0x38f)]();let _0x52bc81='';try{const _0x14b7a0=JSON[_0x1ce6a0(0x268,0x224,0x277,0x30b)](_0x241b06);_0x52bc81=_0x14b7a0[_0x48bf31(-0x27c,-0x2af,-0x225,-0x1f3)][-0x253*0x5+0x1a2c+-0xe8d];}catch(_0x3331f1){_0x493e0a[_0x1ce6a0(0x23e,0x2c2,0x2c4,0x2da)](addLog,_0x493e0a[_0x1ce6a0(0x29a,0x1f2,0x279,0x2d5)]),_0x52bc81=_0x241b06;}const _0x336136=_0x493e0a[_0x1ce6a0(0x282,0x2a0,0x2c6,0x295)](_0x493e0a[_0x1ce6a0(0x247,0x22b,0x2ab,0x32f)],_0x52bc81);return _0x493e0a[_0x1ce6a0(0x365,0x30a,0x324,0x3bd)](addLog,'图像已成功获取并格式'+_0x48bf31(-0x12d,-0x11d,-0x1ad,-0x22a)+'L。'),taskQueue[_0x1ce6a0(0x316,0x308,0x31e,0x2b9)+'sk'](_0x57f373,!![]),currentTaskId=null,{'image':_0x336136,'change':_0x493e0a[_0x1ce6a0(0x215,0x1f5,0x227,0x1e8)](_0x10ab04,'')};}else{if(!taskQueue[_0x1ce6a0(0x2be,0x2c5,0x28d,0x2e6)+_0x48bf31(-0x24b,-0x245,-0x1f9,-0x170)](_0x57f373)){_0x493e0a['RFlfu'](addLog,_0x493e0a[_0x48bf31(-0x16b,-0x172,-0x1f3,-0x278)]);throw new Error(_0x1ce6a0(0x223,0x216,0x237,0x1bc));}const _0x4d4a5b=new URL(_0x493e0a['fSbrQ'](_0x309764,_0x493e0a[_0x48bf31(-0xed,-0x146,-0x176,-0x1af)]));window[_0x1ce6a0(0x317,0x31b,0x2a3,0x224)]=![];const _0x5c7cf6=await _0x493e0a[_0x1ce6a0(0x247,0x342,0x2d8,0x2f6)](fetch,_0x4d4a5b,{'method':_0x493e0a['cJTQL'],'body':JSON[_0x1ce6a0(0x2fa,0x22c,0x291,0x208)](_0x13d927),'headers':{'Content-Type':_0x493e0a[_0x48bf31(-0x207,-0x1a6,-0x199,-0x214)],'Authorization':_0x493e0a[_0x48bf31(-0x1fd,-0x1be,-0x16b,-0x10f)](getsdAuth)}});window[_0x1ce6a0(0x2a9,0x2de,0x2a3,0x255)]=!![];if(!_0x5c7cf6['ok']){const _0x4b2f5b=await _0x5c7cf6[_0x48bf31(-0x119,-0x193,-0x13a,-0x189)]();_0x493e0a[_0x48bf31(-0x26d,-0x232,-0x213,-0x1e3)](addLog,_0x48bf31(-0x14d,-0x136,-0x134,-0xfa)+_0x48bf31(-0x1fe,-0x1d5,-0x1ce,-0x175)+_0x5c7cf6[_0x1ce6a0(0x23c,0x26f,0x253,0x2ab)]+_0x1ce6a0(0x1d1,0x29d,0x24d,0x1d0)+_0x4b2f5b),console[_0x1ce6a0(0x1c9,0x234,0x24a,0x235)](_0x48bf31(-0xf2,-0x207,-0x18c,-0x14e),_0x4b2f5b);throw new Error(_0x1ce6a0(0x26a,0x288,0x261,0x2c7)+_0x5c7cf6['status']+',\x20详情:\x20'+_0x4b2f5b);}const _0x2bff61=await _0x5c7cf6[_0x1ce6a0(0x2a9,0x346,0x31c,0x2d9)]();if(!_0x2bff61[_0x48bf31(-0x293,-0x1d3,-0x225,-0x1b9)]||_0x2bff61[_0x1ce6a0(0x1a3,0x21c,0x22e,0x275)][_0x48bf31(-0x1b2,-0x1f8,-0x1e9,-0x275)]===-0x8b*0xa+-0xf2f+0x149d){if(_0x493e0a[_0x1ce6a0(0x1c5,0x1e9,0x232,0x1b7)](_0x493e0a[_0x1ce6a0(0x26b,0x27f,0x26d,0x1e1)],'feUQX')){const _0x1a7db8=_0x3a3ea0?function(){function _0xb55c9c(_0x54d019,_0x4819eb,_0x407bda,_0x404e57){return _0x1ce6a0(_0x54d019-0xb8,_0x54d019,_0x4819eb-0x144,_0x404e57-0x157);}if(_0x2043e1){const _0x2a706d=_0x50b737[_0xb55c9c(0x426,0x454,0x490,0x49d)](_0x4a1992,arguments);return _0x5ee7f5=null,_0x2a706d;}}:function(){};return _0x292f8c=![],_0x1a7db8;}else throw new Error(_0x493e0a['CUhub']);}const _0x4a8478=_0x2bff61[_0x1ce6a0(0x29d,0x2b3,0x22e,0x1d9)][-0x1780+0x643*0x1+0x113d],_0x17d227=_0x493e0a[_0x48bf31(-0x27f,-0x231,-0x217,-0x194)](_0x493e0a[_0x48bf31(-0x155,-0x231,-0x1a8,-0x201)],_0x4a8478);_0x493e0a['obBml'](addLog,_0x493e0a[_0x1ce6a0(0x20b,0x2ca,0x264,0x291)]),taskQueue['completeTa'+'sk'](_0x57f373,!![]),currentTaskId=null;const _0x5b0fbe={};return _0x5b0fbe[_0x48bf31(-0x1f8,-0x11c,-0x16a,-0x19d)]=_0x17d227,_0x5b0fbe[_0x1ce6a0(0x371,0x2ad,0x2e2,0x28f)]=_0x1fae32||'',_0x5b0fbe;}}catch(_0x610120){const _0x53b303=_0x493e0a['WXmuM'][_0x48bf31(-0x294,-0x246,-0x238,-0x2c4)]('|');let _0x2b9e19=0x1a2d*-0x1+0x3*0xb10+-0x703*0x1;while(!![]){switch(_0x53b303[_0x2b9e19++]){case'0':console['error']('Error\x20gene'+_0x48bf31(-0xf0,-0x117,-0x13d,-0xe8)+_0x1ce6a0(0x28b,0x285,0x22f,0x245),_0x610120);continue;case'1':throw _0x610120;continue;case'2':if(_0x493e0a[_0x1ce6a0(0x2ac,0x2ea,0x2cd,0x2a3)](_0x610120[_0x48bf31(-0x19d,-0x17b,-0x1c7,-0x167)],_0x493e0a[_0x1ce6a0(0x20f,0x23a,0x23b,0x26d)])){}else taskQueue[_0x1ce6a0(0x375,0x384,0x31e,0x2b2)+'sk'](_0x57f373,![]);continue;case'3':currentTaskId=null;continue;case'4':_0x493e0a[_0x1ce6a0(0x236,0x29d,0x2a7,0x2b0)](addLog,_0x48bf31(-0x18f,-0xf5,-0x130,-0x133)+_0x610120[_0x1ce6a0(0x2b1,0x27c,0x28c,0x266)]);continue;case'5':window[_0x1ce6a0(0x293,0x2d9,0x2a3,0x250)]=!![];continue;}break;}}}async function sdGenerate(_0x2a10e6){function _0x44e51c(_0x45c058,_0x1653e8,_0x50cbcf,_0x208c37){return _0x3878(_0x45c058- -0x1bd,_0x50cbcf);}const _0x499685={'Usbdj':function(_0x4a60a3,_0x4730bc){return _0x4a60a3(_0x4730bc);},'jZmsL':_0x9b6060(-0x21e,-0x1b3,-0x297,-0x213),'iQErh':function(_0x3f947c,_0x4e42fa){return _0x3f947c!=_0x4e42fa;},'EVXaw':function(_0x9c543a,_0xcbe88e,_0x531fbb,_0x2da389){return _0x9c543a(_0xcbe88e,_0x531fbb,_0x2da389);},'dkIHT':function(_0x21f53f,_0x3bb2b1){return _0x21f53f!==_0x3bb2b1;},'aQcwQ':'ltTNF','BhhsH':_0x44e51c(-0x117,-0x85,-0x101,-0x18c),'oErgL':'Error\x20gene'+'rating\x20SD\x20'+_0x44e51c(-0xb5,-0x54,-0xb7,-0x4f),'miIfV':function(_0x53e1cc,_0x33c12f){return _0x53e1cc(_0x33c12f);}};function _0x9b6060(_0x3bb2e0,_0x5bc9da,_0x50e503,_0x3b6ff2){return _0x3878(_0x3bb2e0- -0x30a,_0x50e503);}const {id:_0x3696e6,prompt:_0x3dba6e,width:_0x451240,height:_0x2bd75e,change:_0x2a2a1c}=_0x2a10e6;_0x499685[_0x44e51c(-0x4f,-0x4e,-0x44,-0xc0)](addLog,'收到SD生图请求\x20('+_0x9b6060(-0x23f,-0x22e,-0x250,-0x2a1)+_0x3696e6+(_0x9b6060(-0x27e,-0x289,-0x2b0,-0x2df)+':\x20')+_0x3dba6e+(_0x2a2a1c?'\x20-\x20Change:'+'\x20'+_0x2a2a1c:''));if(_0x2a2a1c&&_0x2a2a1c[_0x9b6060(-0x1e3,-0x24f,-0x154,-0x211)](_0x499685[_0x9b6060(-0x1d1,-0x16b,-0x181,-0x256)])){_0x499685[_0x44e51c(-0x4f,0xf,0x2a,-0xd7)](bananaGenerate,_0x2a10e6);return;}try{const {image:_0x4f1330,change:_0x1ec1a4}=await generateSDImage({'prompt':_0x3dba6e,'width':_0x451240,'height':_0x2bd75e,'change':_0x2a2a1c});if(_0x499685[_0x44e51c(-0x63,-0x50,-0x54,-0xb0)](extension_settings[extensionName]['cache'],'0')){const _0x1295b7={};_0x1295b7[_0x9b6060(-0x1b8,-0x15d,-0x14e,-0x178)]=_0x1ec1a4,await _0x499685[_0x44e51c(-0x2b,-0xb6,-0x4c,0x65)](setItemImg,_0x3dba6e,_0x4f1330,_0x1295b7),_0x499685[_0x9b6060(-0x19c,-0x188,-0x219,-0x1e9)](addLog,'图像已存入数据库\x20f'+_0x44e51c(-0x1d,-0xaf,-0xac,-0x8a)+'\x20'+_0x3dba6e);}else _0x499685[_0x44e51c(-0x4f,-0x34,-0x4,0x39)](addLog,_0x44e51c(-0xdd,-0x52,-0xd9,-0x11d)+'库');const _0x197e26={};_0x197e26['id']=_0x3696e6,_0x197e26['success']=!![],_0x197e26[_0x9b6060(-0x169,-0x1ff,-0x106,-0x165)]=_0x4f1330,_0x197e26[_0x44e51c(-0xa5,-0x133,-0x71,-0x132)]=_0x3dba6e,_0x197e26[_0x9b6060(-0x1b8,-0x17d,-0x1df,-0x128)]=_0x1ec1a4,eventSource[_0x9b6060(-0x19b,-0x129,-0x214,-0x1d8)](EventType[_0x9b6060(-0x1dd,-0x199,-0x209,-0x1e9)+_0x44e51c(-0x66,-0x5c,-0x78,-0x23)+_0x44e51c(-0x118,-0x172,-0x165,-0xbf)],_0x197e26),addLog(_0x9b6060(-0x1d7,-0x170,-0x1b4,-0x1e0)+'\x20(ID:\x20'+_0x3696e6+')');}catch(_0x42e6da){if(_0x499685[_0x9b6060(-0x204,-0x1f6,-0x26a,-0x17b)](_0x499685[_0x9b6060(-0x244,-0x1b1,-0x257,-0x247)],_0x499685[_0x9b6060(-0x1ca,-0x1ac,-0x1c9,-0x1e3)])){const _0xf8c9d5=_0x44e51c(-0x8f,-0xb2,-0xd7,-0xca)+_0x9b6060(-0x272,-0x20c,-0x2e7,-0x27b)+_0x3696e6+'):\x20'+_0x42e6da[_0x44e51c(-0xc1,-0xfa,-0x5f,-0xdc)];_0x499685[_0x44e51c(-0x4f,0x1e,-0xa9,-0x6d)](addLog,'错误:\x20'+_0xf8c9d5),console[_0x9b6060(-0x1c3,-0x140,-0x220,-0x190)](_0x499685[_0x44e51c(-0xcd,-0x167,-0x41,-0x6f)],_0x42e6da);const _0x279249={};_0x279249['id']=_0x3696e6,_0x279249[_0x9b6060(-0x232,-0x207,-0x22c,-0x2a1)]=![],_0x279249[_0x44e51c(-0x76,-0x5f,-0xc7,0x21)]=_0x42e6da[_0x44e51c(-0xc1,-0x14a,-0x31,-0xa0)],_0x279249[_0x44e51c(-0xa5,-0xed,-0x123,-0x69)]=_0x3dba6e,eventSource['emit'](EventType['GENERATE_I'+_0x9b6060(-0x1b3,-0x163,-0x20d,-0x168)+_0x9b6060(-0x265,-0x2dc,-0x2a7,-0x2fb)],_0x279249),_0x499685[_0x9b6060(-0x168,-0x12a,-0x154,-0xf8)](addLog,_0x9b6060(-0x187,-0x18d,-0x1d1,-0x116)+_0x9b6060(-0x279,-0x26a,-0x29b,-0x29f)+_0x3696e6+')');}else _0xd0810e['completeTa'+'sk'](_0x16cae0,![]);}}function initializeSDListener(){function _0x1d3db3(_0x45e35c,_0x36fcf0,_0x8a1d93,_0x14decb){return _0x3878(_0x8a1d93- -0x1e3,_0x36fcf0);}function _0x56891c(_0x5bf239,_0x26a9a3,_0x270fbd,_0x166226){return _0x3878(_0x26a9a3-0x3a5,_0x270fbd);}const _0x22bc6b={};_0x22bc6b[_0x56891c(0x552,0x51b,0x59f,0x512)]=_0x56891c(0x5b3,0x544,0x543,0x4ba)+_0x1d3db3(-0xee,0x39,-0x58,-0x8f);const _0x325c15=_0x22bc6b;eventSource['on'](EventType[_0x1d3db3(-0xdb,-0xe0,-0xb6,-0x98)+'MAGE_REQUE'+'ST'],sdGenerate),addLog(_0x325c15[_0x1d3db3(-0xa2,-0x61,-0x6d,-0x50)]);}export async function replaceWithSd(){function _0x39d538(_0x56589c,_0x1351bd,_0x3c7956,_0x35b7cf){return _0x3878(_0x35b7cf-0x140,_0x56589c);}function _0xe06418(_0x5e1eeb,_0x238483,_0x7e98f0,_0x2ef5ce){return _0x3878(_0x2ef5ce-0x307,_0x5e1eeb);}const _0x255add={'zRtsN':function(_0x47641c,_0x25dfec){return _0x47641c(_0x25dfec);},'NOaBB':_0x39d538(0x18c,0x242,0x230,0x207)+'尝试作为原始\x20Bas'+'e64\x20数据处理。','ujCQZ':function(_0x343d56,_0x17d530){return _0x343d56==_0x17d530;},'KpFYs':function(_0xd48724,_0x57abc7){return _0xd48724===_0x57abc7;},'CUiOc':'TeJox','XKkvC':function(_0x5ad889){return _0x5ad889();},'koJkz':'SD\x20生图事件监听器'+'已关闭。'};_0x255add[_0xe06418(0x416,0x437,0x4c7,0x46e)](extension_settings[extensionName][_0x39d538(0x2fa,0x291,0x241,0x2c2)],'sd')?(!window['initialize'+_0xe06418(0x3c4,0x45f,0x3c3,0x3f1)]&&(_0x255add['KpFYs'](_0x255add[_0x39d538(0x257,0x19b,0x219,0x1e8)],_0x255add[_0xe06418(0x3c2,0x417,0x41a,0x3af)])?(window[_0x39d538(0x1a3,0x1c4,0x1da,0x200)+_0xe06418(0x42b,0x373,0x466,0x3f1)]=!![],_0x255add['XKkvC'](initializeSDListener)):(_0x255add[_0xe06418(0x3be,0x48e,0x4e0,0x449)](_0x52813f,_0x255add['NOaBB']),_0x49288f=_0x2bd2ad)),initializeImageProcessing()):window['initialize'+_0x39d538(0x1fb,0x1c7,0x2b4,0x22a)]&&(eventSource['removeList'+'ener'](EventType['GENERATE_I'+_0x39d538(0x347,0x2f5,0x312,0x2db)+'ST'],sdGenerate),window[_0x39d538(0x28a,0x17a,0x259,0x200)+_0xe06418(0x41a,0x366,0x485,0x3f1)]=![],_0x255add['zRtsN'](addLog,_0x255add[_0xe06418(0x32d,0x35b,0x37c,0x3bc)]));}