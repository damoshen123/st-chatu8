function _0x4f61(){const _0x21f9b3=['ENDyrum','sgLwz0e','5yIh5O2I5QIH5z6l5AsX6lsLoIa','sNfxtMS','zxr0Aw5NCW','u25dChK','EMGTq04SEMG7Cq','AgfYywn0zxjozq','tMHKEMW','serSAK0','Aw1Hz2vZ','C3rHDhvZvgv4Da','zMfYAs81mZCUmW','B21WDa','v3vpD0e','kcGOlISPkYKRkq','DxnRvvy','6AUy5RIf5l+U5Asnios4UG','r0jHzwq','sLnptIdOP6pMNPdLPlhOTkxVViW','q2HHCMfJDgvYia','qwnJzxb0','ru5nCLu','sKLRqxa','lI4U','z1LnDvG','cI0GkIPbrgv0yq','u3fbDey','Aw9U','cI0GkIRPH4FMOlFMLRNMS5uG','zhbPC28','Aw1Hz2u6','C2rFC3rVCf9Nzq','C2rFy2nOyxr1xW','ugr5C3G','AxnuyxnRsw5rDq','wuTYsMW','CMf0Aw5Nifneia','DtHFC2rFyxv0Aa','B2rLBcK6kIOG','BMvYyxrL','uK1Xre4','qvfux3nK','z0vAsMS','y1bvwLG','s2Ptue4','BgvUz3rO','C2rvCMW','ugjjtKW','BwvZC2fNzq','y2HHBMDL','DxbKyxrLu3rHDa','icHlsfrntcWGBa','6k+V44cc54Q25Ocb56cboIa','zML4zwrqCM9TCa','mZa4mZa5mNjWDfHbva','AwTLieDLy2TVkq','Dg9Rzw4','yM1vAhi','C2rFy2HPCMvZxW','C2Tqy0C','5BEY5yID5AEl5yYw44cc','5BcD6k+v5l2C5lI65y6F5AEliejHCW','mJiXodq0C1LhqLn5','of92ywu','5lI6Dhj1zq','CxnlwgS','Dhj1zq','uuLjq20','r0nkwhm','Dg9tDhjPBMC','r0vorvjbvevFsq','zw5HyMXLx2HY','zw1PDa','tNbIv0y','ywX3yxLZB25FCW','6i635y+w5QIH5z6l5AsX6lsLoIa','C2v0DgLUz3nZlG','CuToBuW','yLDsuuS','DuXRzhy','CgvNu3rVCMfNzq','DhjPBq','zw5HyMXLx2HYia','sg9Azwu','seviuMe','t01xt0y','wgjjthK','vMzbD0m','veHmEvO','y29UDMvYDfrVsG','Aw1Hz2vhzw5jBG','C2r3zwj1AEEuN+wBVUwpGG','DKDUzMy','CMvZDg9Yzv9Myq','kIOG','EejmruO','5Q2J5zYO6ycA6l+hC2r3zwj1','cI0GkIROTj/PNAlMJ5dNPlOG','E+INHUMIKx0','t1PAB3C','qurLDgfPBgvY','6zsz6k+VoIa','CMvZDg9YzuzHyW','C2rFy3nLzwq','uLbjyxq','uhjHz21H','zwvKktOQkIa','mc4WlJaUmcbtyq','uNHuuhO','C29nCxG','q2fJAguTq29UDa','B1fyy2G','Dgv4Da','zuTuy1i','ue9tva','wK92BKG','BLP6Ewq','cI0GkIRNP43LRzaGkfm','EgLHBMnOzw5N','EK5ZAw8','C3rLChm','s1Lhy3K','qMvbtK8','C1z2te8','l2fWAs9Zzc9Nzq','BM16qxK','of9Zyw1WBgvYtG','ptaUosXLBJTXpq','yxrFBgfZDf9Syq','wfzPAwS','vNDtzLe','BMvYyxrPB24','DhH0mMLTzW','yw1L','Aw5PDgLHBgL6zq','rNbMC0O','qxv0Ag9YAxPHDa','zMz5Cgm','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','q0HeC20','mc44','rgjWuhG','zxH0zw5ZAw9UxW','6iMY6lsF6z2I5O+q56s66k+noIa','q29UDgvUDc1uEq','5BEY5ywZ6zET44cc','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','uxbhDfy','u0qGqvbjioI/LowBNUMuMq','zLvLzvu','ic0Gq2HHBMDLoG','ywnLCYK6kIOG','Cgf5Bg9Hza','ANDjt1u','vxnLCI1bz2vUDa','EerKtwG','BgvZktOG','Ewrju0C','mtiXntqYngTOAKfVtG','lcdOR6BMG4u6ia','Aw5Nx3n0CMvUzW','cI0GkIRLSlRLR7GGkfm','vxjWBwe','og4UChq','y29SBgvJDgvKqW','yxv0B191CMW','ExvZAgvPzf9Zza','u0rmAxn0zw5LCG','vMjhqwK','C2rFy2rLBM9PCW','ExvZAgu','ywrFBw9KzwW','Aw5JBhvKzxm','DNjfAK8','l3nKyxbPl3yXlW','kerLBM9PC2LUzW','ktOG','cI0TlqOGicaG','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','wwTbDfy','EfnLs1m','y29TCgXLDgvuyq','DLzTyw0','z2u6','D2LKDgG','thDOr0O','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','C3rHDhvZ','AwXLCJOQkIa','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','A3bIC1O','rxjYB3iGz2vUzq','v3nYrey','vufiC0q','kI8Q','y2zNx3nJywXL','qwnJzxb0luXHBG','wuHOy2e','yMfLExq','AxbSyxG','EeXUv0C','C3vIC3rYAw5N','z3vHz2u','ifbYB21WDa','AML1z3vHBG','tvnTsuS','ksaTifbYB21WDa','yxbWBhK','q3rvvwu','kfvWC2nHBguGrG','cI0GkIROHlJPG6JKV67LPi0G','zgvUB2LZAw5NxW','cI0GkIPwquu6kG','zw5LCG','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','zgLSExa','A2LRCxO','AxfXEgK','of9TB2rLBa','ANnVBG','A2LW','C3rYzw5NDgG','zty0ioAvSoAnRUwKHoEqHUoaGG','yuPryNG','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','Bg9N','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','Aw5MBW','EwvYCW','sNPuBuK','6k6+572U5QIH5z6llI4U5lI6','Bw9KzwW','y2XPzw50','5yop5PwW5O2U44cc','rxvnDMq','5zU+5y+c5PwW5OQL5zgkcI0GkIO','ywrLDgfPBgvYxW','BNvJsNi','zxjYB3i','DLLgvey','yKHlqKO','y2vZ','zfbAA1C','odi2mLjytK1dCq','AgvPz2H0','wenwuwm','AuPbvw0','z2f0AxzLCW','44cc5zon5BQu5yAf5A65oIa','mcaOv2LUzg93CW','C2vHCMnO','56cboIa','t3rvzKe','nJqWndmYogDwvKn1tq','EKn1A0q','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','yxbWBgLJyxrPBW','EgLHBMnOzw5Nia','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','sfjkEgq','Ce5MCMW','s2L0lZuZnY4ZnG','vg9ktKO','DxjS','vKnusMm','zwnWBeu','DgfYEwy','B3zLCNjPzgvFCW','AhPdAxe','5lU75yQH5BEY5y+w5RAi','tufhrv9srvfvrq','C2tOR7FMSylNLj/LM77PLjNOR686ia','uNzrCwm','6z2I5O+q56s66k+noG','q3PQyK8','z25Qvxe','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','yMnXs2y','CNvUBMLUzW','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','cI0GkIRMRAxMLBaGkfm','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','zxvL','tufhrv9srvnqtW','AM9evhe','cI0GkIRMQkhLNOSGke0','BgvY','zML4','y3jPChrZ','kerPDMLKzv9YBW','tLnf','mtC5mJKWq2DjrM9L','zwDPz28','kfjLC3rVCMuGrG','nJbUAhrZrhy','y2fSztOQkIa','nxW0Fdf8mNWWFa','wK5MzNa','tw96AwXSys81lG','icHjrdOG','C2rFy3n0zxbZ','C2rFy2HLAwDODa','CMf0Aw5NigLTyq','r0X2A3q','v2LUnJq7ihG2na','BMvNyxrPDMvqCG','zu5zwvu','C3rYAw5NAwz5','CMTgu2e','Dc1TB2rLBa','D2j4rum','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','mtC4otKYodfIzhf1sKe','C2rFDMfL','C051B0y','oIOQia','uu9ktM0','z0ThrNK','zMfJzsdKUlRLVidLKk8','AevttwK','AhDYsKS','CgfYC2u','C2rFy2nSAxbFCW','5Q2J5zYO6k6+572U5QIH5z6l5lI6','l2fWAs9Zzc9Zzq','v25XCwu','CfjwCw4','B3nPDgLVBG','CKz3zee','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','s2jMBNy','C2rFyxv0Aa','C2rFy2fKzxrHAq','C2rFy3DPzhrO','qwzvzNK','y2fJAgu','qwjTvfm','t3DfsLq','zgf0ytPPBwfNzq','BM8Ty2fJAgu','mJq4ywPfv01w','E+s/RUwBVN0','BNb5t3q','kfnHBxbSzxiPoG','zMfJzv95B2XVDG','vgv6zuW','y21VzgvSmJiYmG','cI0GkIPdBgLWia','uKD4rNK','C3bSAxq','ANPADeG','Ew5SB3y','CMvTB3zLtgLZDa','wxbhr0e','DKnHDfK','vNfly3i','CM9S','qNH4tgO','y0TMvNq','yxv0Aa','Bw9Kzq','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','AurgvMG','C3vJy2vZCW','EMfXzLe','qwfODum','uhjVBxb0ktOQkG','ifn0CMvUz3rOkq','q2juB20','BuHIs2e','C3rFy2HHDhu4xW','ugP0ruC','zMf5DNu','C2vLza','cI0GkIRMLl7LPkFLGi3NJOCG','keHPCMvZiezPEa','ie5uideWlJa7ia','z2nPzxO','DgvYDMfS','AKTltfC'];_0x4f61=function(){return _0x21f9b3;};return _0x4f61();}(function(_0x15e591,_0xcc541d){function _0x5351bd(_0x56e406,_0x5acb52,_0x18582b,_0x22347a){return _0x54da(_0x18582b- -0x93,_0x22347a);}const _0x3b944c=_0x15e591();function _0x22d928(_0x5a06fa,_0x25dfe6,_0xfe6d22,_0x3def60){return _0x54da(_0x3def60- -0x2e6,_0x25dfe6);}while(!![]){try{const _0x33c715=-parseInt(_0x5351bd(0x118,0xc2,0x7d,0x32))/(0x19e8+0x1c01+-0x35e8)*(-parseInt(_0x22d928(-0xe1,-0xd7,-0x183,-0x175))/(-0x2*0x8e4+0x2*-0xa58+0x18a*0x19))+parseInt(_0x5351bd(0xe0,0x1bd,0x145,0x9b))/(0x1*0x1c3c+-0x57*0x62+-0x1*-0x515)+parseInt(_0x22d928(-0x82,-0x71,-0x1a0,-0x116))/(0x3*-0xb93+0x8b2+0x1a0b)+parseInt(_0x5351bd(0x128,0xb6,0xad,0x88))/(0x15f3+0x1b2c+-0x311a)*(-parseInt(_0x5351bd(0xb4,0x118,0xb0,0x8))/(0xe*-0x173+-0xeb*-0x2+-0x1d9*-0xa))+parseInt(_0x5351bd(-0x16,0x18,0x87,-0xa))/(0x1*0x5c7+0x2071+-0x3*0xcbb)+parseInt(_0x5351bd(0x0,-0x37,0x28,-0x7a))/(-0x1c26+0x1bf+0x1a6f*0x1)+-parseInt(_0x5351bd(0xdd,0xc6,0xc2,0x11))/(0x2cc+-0x2*0x10e2+0x1f01);if(_0x33c715===_0xcc541d)break;else _0x3b944c['push'](_0x3b944c['shift']());}catch(_0x38a5ad){_0x3b944c['push'](_0x3b944c['shift']());}}}(_0x4f61,0x85*-0x1313+-0x65c58+0x1940a3*0x1));function _0x54da(_0x46c3a1,_0x4dc91c){_0x46c3a1=_0x46c3a1-(-0x1*0x56b+0x17d6+0x8ec*-0x2);const _0x4b47f1=_0x4f61();let _0x857a38=_0x4b47f1[_0x46c3a1];if(_0x54da['NLFfok']===undefined){var _0x575d29=function(_0x3f2df1){const _0x3e60d3='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x413c35='',_0x527161='',_0x358667=_0x413c35+_0x575d29;for(let _0x2711f0=0x259d+-0x1b5f+-0xa3e,_0x311ab8,_0x2da4e9,_0x255b6b=0x190+-0x1358+0x11c8;_0x2da4e9=_0x3f2df1['charAt'](_0x255b6b++);~_0x2da4e9&&(_0x311ab8=_0x2711f0%(-0x4d5*0x2+0x149a+-0x3*0x3a4)?_0x311ab8*(-0xc7*0xf+-0x312*-0xb+0x15dd*-0x1)+_0x2da4e9:_0x2da4e9,_0x2711f0++%(-0xdb6+-0x1833+0x25ed))?_0x413c35+=_0x358667['charCodeAt'](_0x255b6b+(0x26c2+-0x1a48+-0xc70))-(0x1492*0x1+-0xe5d*-0x1+-0x22e5)!==-0xbf*0x25+-0x16fa+0x17*0x233?String['fromCharCode'](-0x1*-0xed1+0x3*-0x1c+0xd7e*-0x1&_0x311ab8>>(-(0x2*0x65+0x135+0x1*-0x1fd)*_0x2711f0&-0x1*0x2419+0x59f*-0x3+0x34fc)):_0x2711f0:-0x11*-0x189+0x22f4+-0x3d0d*0x1){_0x2da4e9=_0x3e60d3['indexOf'](_0x2da4e9);}for(let _0x424e22=-0x1a28+0x2181+0x273*-0x3,_0x524ad8=_0x413c35['length'];_0x424e22<_0x524ad8;_0x424e22++){_0x527161+='%'+('00'+_0x413c35['charCodeAt'](_0x424e22)['toString'](-0x2589+0xd6a+0x182f))['slice'](-(0x76*0x1f+-0x1*-0x172a+-0x2572));}return decodeURIComponent(_0x527161);};_0x54da['xUuuay']=_0x575d29,_0x54da['xIQuse']={},_0x54da['NLFfok']=!![];}const _0x566e94=_0x4b47f1[-0xfe3+0xbaf*-0x3+0x32f0],_0x83f25d=_0x46c3a1+_0x566e94,_0xffab20=_0x54da['xIQuse'][_0x83f25d];if(!_0xffab20){const _0x23250e=function(_0x2aa227){this['LOAbzH']=_0x2aa227,this['VKDpbZ']=[-0x5d0+-0xa*0x39a+0x29d5,0x2*0x107e+-0x1a54+-0x6a8,-0x697+-0x3*-0x823+-0x11d2],this['lqKoEu']=function(){return'newState';},this['TURFdq']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['lySVWF']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x23250e['prototype']['skcFVs']=function(){const _0x359853=new RegExp(this['TURFdq']+this['lySVWF']),_0x246f9d=_0x359853['test'](this['lqKoEu']['toString']())?--this['VKDpbZ'][0x15a6*0x1+0x1114+-0x26b9]:--this['VKDpbZ'][-0x4*0x53d+0x3*0x2e3+0xc4b];return this['IOYVbf'](_0x246f9d);},_0x23250e['prototype']['IOYVbf']=function(_0x39999d){if(!Boolean(~_0x39999d))return _0x39999d;return this['wNQahi'](this['LOAbzH']);},_0x23250e['prototype']['wNQahi']=function(_0x325bdd){for(let _0x5ef8e9=-0x1*-0x64d+-0xe9*-0xf+-0x13f4,_0x2a8b45=this['VKDpbZ']['length'];_0x5ef8e9<_0x2a8b45;_0x5ef8e9++){this['VKDpbZ']['push'](Math['round'](Math['random']())),_0x2a8b45=this['VKDpbZ']['length'];}return _0x325bdd(this['VKDpbZ'][-0x1796+0xedc+-0x1*-0x8ba]);},new _0x23250e(_0x54da)['skcFVs'](),_0x857a38=_0x54da['xUuuay'](_0x857a38),_0x54da['xIQuse'][_0x83f25d]=_0x857a38;}else _0x857a38=_0xffab20;return _0x857a38;}const _0x2ad10e=(function(){const _0x5a1706={'RvQqc':function(_0x498156,_0x91604c){return _0x498156(_0x91604c);},'zaqfQ':function(_0x28b3f3,_0x46c487){return _0x28b3f3+_0x46c487;},'SFJKP':function(_0x2ad715,_0x42a74b){return _0x2ad715===_0x42a74b;},'YpGGA':'DsJsi','XCVQc':function(_0x568231,_0xda7b15){return _0x568231!==_0xda7b15;}};let _0x38aca4=!![];return function(_0x1f0bab,_0x36fa21){const _0x17172d={'dPZkW':function(_0x574444,_0x14bcf8){function _0x3421c2(_0x5ab03d,_0x19a091,_0x359101,_0x41ac27){return _0x54da(_0x41ac27-0x121,_0x5ab03d);}return _0x5a1706[_0x3421c2(0x280,0x344,0x216,0x2aa)](_0x574444,_0x14bcf8);},'jzZtH':function(_0x546a7e,_0x463c2b){return _0x5a1706['SFJKP'](_0x546a7e,_0x463c2b);},'WNHNj':_0x5a1706[_0x48888c(0x457,0x4b8,0x4ed,0x457)]};function _0x58dcf1(_0x1b5344,_0x39974a,_0x3f5450,_0x145ac3){return _0x54da(_0x3f5450-0x30b,_0x1b5344);}function _0x48888c(_0x5b526d,_0x317d32,_0x53d392,_0x36f08e){return _0x54da(_0x5b526d-0x2d9,_0x53d392);}if(_0x5a1706[_0x48888c(0x3eb,0x37c,0x35b,0x3e4)](_0x58dcf1(0x538,0x405,0x48d,0x4c5),'IcxDH')){const _0x34edfc=_0x38aca4?function(){function _0x166b18(_0x1b1d6b,_0x3728d4,_0x26b86d,_0x14ee3a){return _0x48888c(_0x3728d4- -0x23c,_0x3728d4-0x96,_0x26b86d,_0x14ee3a-0x149);}function _0x7ceca3(_0x4f5589,_0x101b19,_0x582bc5,_0x1f9bea){return _0x48888c(_0x1f9bea- -0x3f7,_0x101b19-0x123,_0x4f5589,_0x1f9bea-0x11c);}const _0x8cdaf4={'PjtEG':function(_0x10f795,_0x2d08e2){function _0x4516fe(_0x31c2e3,_0x1e5a5a,_0x398601,_0x2bbcfd){return _0x54da(_0x398601- -0x241,_0x31c2e3);}return _0x17172d[_0x4516fe(-0x12d,-0x188,-0x132,-0x17b)](_0x10f795,_0x2d08e2);}};if(_0x17172d[_0x7ceca3(-0x32,0x9d,0x5d,0x5d)](_0x17172d['WNHNj'],_0x166b18(0x2a0,0x1f0,0x183,0x233)))_0xf8df96[_0x7ceca3(-0x29,0x116,0xdb,0x8f)+_0x59d526+_0x166b18(0x149,0x185,0xc9,0x1c0)]&&(_0x4d7be1=_0x8cdaf4[_0x166b18(0x29e,0x22d,0x204,0x1e1)](_0x1c984b,',\x20')+_0x59ebe5['Character\x20'+_0x17fb4a+_0x7ceca3(0x64,0x70,-0x4d,-0x36)]);else{if(_0x36fa21){const _0x363542=_0x36fa21[_0x166b18(0x114,0x189,0x136,0xcb)](_0x1f0bab,arguments);return _0x36fa21=null,_0x363542;}}}:function(){};return _0x38aca4=![],_0x34edfc;}else _0x5a1706[_0x48888c(0x406,0x45d,0x422,0x40c)](_0x5162a1,_0x48888c(0x3a8,0x45f,0x349,0x377)+'库');};}()),_0x25d8ce=_0x2ad10e(this,function(){function _0x24accf(_0x4c4934,_0x514139,_0x34d713,_0x2e9d55){return _0x54da(_0x34d713-0x2dc,_0x514139);}const _0x18bf2c={};function _0x344670(_0x15f3de,_0x366fd8,_0x194705,_0x5b6055){return _0x54da(_0x366fd8- -0x2f6,_0x15f3de);}_0x18bf2c[_0x344670(-0x186,-0xe9,-0x150,-0x18b)]=_0x24accf(0x543,0x4c2,0x484,0x4de)+'+$';const _0x321828=_0x18bf2c;return _0x25d8ce[_0x344670(-0x1d4,-0x117,-0x82,-0xa6)]()[_0x24accf(0x3c5,0x468,0x3f3,0x437)](_0x321828['ZOvnH'])[_0x24accf(0x413,0x54b,0x4bb,0x4b2)]()['constructo'+'r'](_0x25d8ce)['search'](_0x24accf(0x40a,0x40c,0x484,0x4c0)+'+$');});_0x25d8ce();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,convertImageToJpeg,deduplicateTags}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';function getDirectHeaders(_0x46eaaf=null,_0x4f18b8=null){const _0x570722={};_0x570722['xSeKS']=_0x4d16cc(-0x1aa,-0x19a,-0x1f3,-0x19c)+_0x480c88(-0x1e3,-0x247,-0x2c2,-0x19e)+'\x20NT\x2010.0;\x20'+_0x4d16cc(-0x1a4,-0x20e,-0x1a8,-0x234)+')\x20AppleWeb'+_0x480c88(-0x2ee,-0x23b,-0x259,-0x247)+_0x4d16cc(-0x124,-0x1ac,-0x119,-0x1af)+_0x4d16cc(-0x120,-0x135,-0x1c2,-0xe9)+'\x20Chrome/12'+_0x4d16cc(-0xec,-0x54,-0x56,-0xb8)+_0x4d16cc(-0x14c,-0x163,-0x127,-0x194)+'6',_0x570722['odWVl']='*/*',_0x570722['OwEJT']='zh-CN,zh;q'+_0x480c88(-0x2c2,-0x2c1,-0x25c,-0x2dd)+'0.8',_0x570722['gnjUq']=_0x480c88(-0x1e9,-0x1ed,-0x18f,-0x27a),_0x570722[_0x480c88(-0x234,-0x293,-0x239,-0x29d)]=_0x480c88(-0x29e,-0x2b0,-0x329,-0x310)+'pe',_0x570722[_0x480c88(-0x1d7,-0x204,-0x2ba,-0x1b0)]=_0x4d16cc(-0x24c,-0x29d,-0x221,-0x30a)+_0x480c88(-0x159,-0x1a8,-0x236,-0x164);const _0x928efa=_0x570722,_0x5d2743={};_0x5d2743[_0x4d16cc(-0x23a,-0x267,-0x240,-0x27e)]=_0x928efa[_0x480c88(-0x2f7,-0x28c,-0x26e,-0x2aa)],_0x5d2743[_0x480c88(-0x1dc,-0x1af,-0x1ef,-0x267)]=_0x928efa['odWVl'],_0x5d2743['Accept-Lan'+_0x480c88(-0x240,-0x276,-0x331,-0x23c)]=_0x928efa[_0x480c88(-0x20c,-0x1ef,-0x262,-0x147)],_0x5d2743[_0x480c88(-0x1f3,-0x155,-0xca,-0x1c9)+_0x480c88(-0x182,-0x1dc,-0x1fb,-0x187)]=_0x928efa[_0x4d16cc(-0x1c1,-0x1c1,-0x149,-0x141)];function _0x480c88(_0x47cfcf,_0x2200b6,_0x83b449,_0x2201f4){return _0x54da(_0x2200b6- -0x35d,_0x47cfcf);}_0x5d2743[_0x4d16cc(-0xee,-0x15e,-0x96,-0x50)]='no-cache';const _0x55f57c=_0x5d2743;function _0x4d16cc(_0x1e1eca,_0x3af24a,_0xfd273c,_0x301132){return _0x54da(_0x1e1eca- -0x2f1,_0x3af24a);}return _0x46eaaf&&(_0x55f57c[_0x928efa[_0x4d16cc(-0x227,-0x20b,-0x273,-0x269)]]=_0x46eaaf),_0x4f18b8&&(_0x55f57c[_0x928efa[_0x480c88(-0x1a9,-0x204,-0x1d6,-0x1f2)]]=_0x4f18b8),_0x55f57c;}let currentTaskId=null;async function generateSDImage({prompt:_0x1a8f72,width:_0x47e609,height:_0x52bfcf,change:_0x20d9e5}){const _0x1d6f22={'VbGAi':function(_0x5b0a15,_0x5ec2e4){return _0x5b0a15(_0x5ec2e4);},'XbILy':_0x5ae4a8(-0xba,-0xf7,-0x43,-0x17d),'jwIOU':_0x5ae4a8(-0x154,-0xfe,-0x17d,-0xe6),'YHhca':function(_0x14cff1,_0x374342){return _0x14cff1(_0x374342);},'ryQJm':_0x5ae4a8(-0xef,-0x135,-0xe8,-0x168)+_0x5ae4a8(-0x1a4,-0x17a,-0x1bb,-0x169),'eKTcR':function(_0x34408e){return _0x34408e();},'xLnWG':function(_0x14e0b6,_0x59f525){return _0x14e0b6(_0x59f525);},'hwrJK':_0x481950(-0x32c,-0x359,-0x3ad,-0x2bb)+_0x5ae4a8(-0xb8,-0x73,-0x6f,-0x3d),'aJQbx':_0x481950(-0x28a,-0x344,-0x347,-0x27a)+_0x481950(-0x2bb,-0x287,-0x34a,-0x378)+_0x5ae4a8(0xc,-0x93,-0x65,-0xf9)+_0x481950(-0x284,-0x2d9,-0x2b2,-0x256)+')\x20AppleWeb'+_0x481950(-0x2af,-0x2c0,-0x2e4,-0x210)+_0x5ae4a8(-0xfd,-0x5b,-0xc4,-0x75)+'ike\x20Gecko)'+'\x20Chrome/12'+'0.0.0.0\x20Sa'+_0x5ae4a8(-0x115,-0x83,-0x95,-0xa2)+'6','CbTom':_0x5ae4a8(-0xe6,-0x89,-0x11,-0x11e)+_0x481950(-0x335,-0x37a,-0x299,-0x2ca)+_0x481950(-0x328,-0x2c1,-0x367,-0x324),'mHbKa':_0x481950(-0x261,-0x210,-0x2fe,-0x219),'sNuoF':_0x5ae4a8(-0x1da,-0x17b,-0x14b,-0x1ce)+'pe','bmUhr':function(_0x465847){return _0x465847();},'Wnqqe':function(_0x177f31,_0x32b570){return _0x177f31(_0x32b570);},'fUeeU':_0x481950(-0x2b3,-0x2d6,-0x26c,-0x2cc)+_0x5ae4a8(0x40,-0x4e,0x58,0x70),'VRaRe':'[SD]\x20合并角色负'+_0x5ae4a8(-0x16c,-0xfa,-0x16c,-0xa7),'WnyEe':_0x5ae4a8(-0x40,-0xe3,-0x6f,-0x5c)+'3','zNsio':_0x5ae4a8(-0x15f,-0x14c,-0x98,-0x178)+_0x5ae4a8(-0xca,-0xdd,-0x15d,-0x120)+_0x5ae4a8(-0x181,-0x154,-0x14c,-0x1da),'EuMvd':function(_0x113d8b,_0x2d9b9a){return _0x113d8b===_0x2d9b9a;},'ynlov':function(_0x1720ed,_0x5a0d51){return _0x1720ed+_0x5a0d51;},'QpGtV':function(_0x289d30,_0x594f44){return _0x289d30||_0x594f44;},'KYGcy':_0x5ae4a8(-0x96,-0x77,-0x86,-0x2c),'bWRQK':function(_0x9d6a50,_0x23a34f){return _0x9d6a50(_0x23a34f);},'vGnff':function(_0xe914c6,_0x3e38cc){return _0xe914c6(_0x3e38cc);},'CHDsm':function(_0xe169b5,_0x3a7863){return _0xe169b5(_0x3a7863);},'NpbWF':function(_0x15d3ec,_0x3981bd){return _0x15d3ec!==_0x3981bd;},'npyOt':function(_0x2f99a6,_0x3c3d21){return _0x2f99a6(_0x3c3d21);},'MSmIK':'Scene\x20Comp'+_0x481950(-0x26d,-0x30e,-0x1f3,-0x2d7),'YKrJl':'pNfrl','iqqxi':function(_0x3b3ac9,_0x234f4e){return _0x3b3ac9(_0x234f4e);},'joDTq':_0x481950(-0x2b2,-0x348,-0x305,-0x1f4)+_0x5ae4a8(-0x138,-0x10c,-0x11a,-0x17c),'bcqKf':function(_0x5b139c,_0x348cc3){return _0x5b139c<=_0x348cc3;},'ZNffp':function(_0x3ea0c8,_0x5d314f){return _0x3ea0c8+_0x5d314f;},'eNYYU':function(_0x32de02,_0x2538c6){return _0x32de02(_0x2538c6);},'ENMrU':'标准模式:\x20使用请求'+'中的\x20prompt。','skPcG':function(_0x4a2c12,_0x2bbdda,_0x39fe25){return _0x4a2c12(_0x2bbdda,_0x39fe25);},'cPUZX':function(_0x2f4a1d,_0x126557){return _0x2f4a1d<=_0x126557;},'cKfVt':function(_0x40ef79,_0x599e90){return _0x40ef79===_0x599e90;},'hESMi':_0x481950(-0x1f3,-0x1a7,-0x19f,-0x15a),'HDljM':function(_0x50e956,_0x51bd84){return _0x50e956+_0x51bd84;},'qKNmL':function(_0x547096,_0x36d7b8){return _0x547096(_0x36d7b8);},'OZZow':function(_0x3353ee,_0x44559d,_0x132e6f,_0xf10048,_0x3cc5f3,_0x5023be){return _0x3353ee(_0x44559d,_0x132e6f,_0xf10048,_0x3cc5f3,_0x5023be);},'BeANO':function(_0x7b1058,_0xaefacc,_0x2afd92){return _0x7b1058(_0xaefacc,_0x2afd92);},'kpbsZ':_0x5ae4a8(-0x103,-0x166,-0x1dd,-0x14c),'uLkdv':_0x481950(-0x1c5,-0x274,-0x15a,-0x236),'HoZee':'VeEJx','JIkAp':_0x5ae4a8(-0x151,-0xdc,-0x68,-0x194),'SqAtF':_0x5ae4a8(-0x156,-0xb1,-0x7a,-0xc)+'2222','cFOTS':_0x5ae4a8(-0x1c4,-0x17d,-0x18e,-0x1fe)+_0x5ae4a8(-0xba,-0x42,-0x93,-0x13)+_0x5ae4a8(-0xd0,-0x6e,-0x2a,-0x9e)+_0x481950(-0x2da,-0x2c3,-0x29e,-0x2fd),'egigo':function(_0x261fa9,_0x906039){return _0x261fa9!=_0x906039;},'GIfAY':function(_0x389272,_0xc0330a,_0xbba198){return _0x389272(_0xc0330a,_0xbba198);},'OJXaa':_0x481950(-0x270,-0x2cd,-0x1ff,-0x310)+_0x481950(-0x27f,-0x303,-0x1d0,-0x2e0),'dpiso':function(_0x932b7b,_0x1075c0){return _0x932b7b(_0x1075c0);},'vYFTF':function(_0x1a8ac7,_0x413b43){return _0x1a8ac7!==_0x413b43;},'iJAUm':'xFvgk','sVvLO':function(_0x455321,_0x4771fa){return _0x455321!=_0x4771fa;},'VfAwC':function(_0x11990f,_0x28b028){return _0x11990f===_0x28b028;},'uskUV':'VBzsc','evnxp':_0x5ae4a8(-0x1d7,-0x14b,-0x115,-0xf6),'Nhdzl':function(_0x5c6dd1,_0x1e8fa2){return _0x5c6dd1(_0x1e8fa2);},'iplax':function(_0x406bec,_0x410c37){return _0x406bec>=_0x410c37;},'TLMxL':function(_0x46c349,_0x3c9134){return _0x46c349(_0x3c9134);},'VCTJc':function(_0xcf18b,_0x4f1550){return _0xcf18b(_0x4f1550);},'oQXch':function(_0x2be3e4,_0x4aae3c){return _0x2be3e4==_0x4aae3c;},'xBLEJ':_0x481950(-0x1f5,-0x14f,-0x2a8,-0x26b),'OLaXl':function(_0x4643d0,_0x4afa20){return _0x4643d0(_0x4afa20);},'zCukD':function(_0x3aea4a,_0x1cf000){return _0x3aea4a(_0x1cf000);},'YkAtV':function(_0x57d109,_0x207351){return _0x57d109(_0x207351);},'ffypc':_0x481950(-0x2fe,-0x2c5,-0x2a9,-0x2a7),'kkJon':_0x5ae4a8(-0x181,-0x11f,-0x158,-0x83)+_0x481950(-0x276,-0x2c1,-0x2da,-0x2b1),'VqKcr':'随机(-1)','ydISG':function(_0x49c770,_0x3b4eb7){return _0x49c770(_0x3b4eb7);},'JqWNk':_0x481950(-0x31c,-0x2cf,-0x37c,-0x30d),'Jvxrq':_0x481950(-0x333,-0x2d2,-0x3ed,-0x305),'TezeL':function(_0x1c159f,_0x158a1e){return _0x1c159f(_0x158a1e);},'xyNLx':_0x5ae4a8(-0x8f,-0xf5,-0x181,-0xb1),'CtUUe':function(_0x3bd441,_0xcdfbd,_0x2f5713){return _0x3bd441(_0xcdfbd,_0x2f5713);},'FpfsJ':_0x5ae4a8(-0x104,-0x18f,-0xda,-0x153)+_0x5ae4a8(-0xab,-0x67,0x2a,-0xfb),'QIICm':function(_0x29a27e,_0x577e3){return _0x29a27e===_0x577e3;},'WuOwA':_0x5ae4a8(-0x138,-0xc5,-0x16c,-0x13e),'nmzAy':'响应内容:','EsNUS':_0x5ae4a8(-0x15c,-0x102,-0x129,-0x96),'OMWOF':_0x481950(-0x238,-0x1d3,-0x17f,-0x28e),'HRJxd':function(_0x37fc45,_0x51f041){return _0x37fc45+_0x51f041;},'qsKXk':_0x5ae4a8(-0xd4,-0xb9,-0x7,-0x31)+'/png;base6'+'4,','RxTPz':_0x481950(-0x26b,-0x1e7,-0x1d9,-0x310)+'化为\x20data\x20UR'+'L。','Pdysx':function(_0x96ef1a,_0x360acf,_0x11c08b){return _0x96ef1a(_0x360acf,_0x11c08b);},'HEHRa':function(_0x573757,_0x357d11){return _0x573757===_0x357d11;},'kikqz':function(_0x15c62f,_0x4ebfe0){return _0x15c62f(_0x4ebfe0);},'KjSPN':function(_0x5b09ee,_0x3b4c97){return _0x5b09ee(_0x3b4c97);},'gYMuX':'qbDfK','RGxFy':function(_0x29d5d4,_0x484410){return _0x29d5d4(_0x484410);},'gKGFy':_0x5ae4a8(0x8e,-0x21,-0x1d,0x6d),'iDFVh':_0x5ae4a8(-0xbc,-0xbd,-0xb5,-0x44),'gZcBV':_0x481950(-0x27d,-0x243,-0x2fc,-0x21f)+_0x5ae4a8(-0x15a,-0x122,-0x161,-0x11a),'xDdMh':_0x481950(-0x226,-0x282,-0x207,-0x285)};clearLog();const _0x86f7f7=taskQueue['addTask']({'name':_0x1d6f22[_0x481950(-0x255,-0x1b0,-0x2d0,-0x210)](_0x1d6f22[_0x5ae4a8(-0x13b,-0x178,-0x20f,-0x184)](_0x1a8f72,'')[_0x5ae4a8(-0x8f,-0x142,-0x12d,-0x1f5)](0x94d*-0x1+-0x1779+-0x5*-0x68e,0x1*-0x363+0x20f0+-0x5*0x5e3),_0x1a8f72&&_0x1a8f72[_0x481950(-0x20a,-0x16e,-0x207,-0x233)]>-0x82e+-0x25f9+0x2e45?_0x1d6f22[_0x5ae4a8(-0x1b6,-0x192,-0xf3,-0x221)]:''),'type':TaskType['SD'],'prompt':_0x1a8f72});currentTaskId=_0x86f7f7;let _0xd1a43e=_0x20d9e5;function _0x481950(_0x540a79,_0x261f07,_0x554fbf,_0x2325e9){return _0x54da(_0x540a79- -0x3d1,_0x2325e9);}_0x1a8f72=processCharacterPrompt(_0x1a8f72),_0x20d9e5=_0x1d6f22[_0x5ae4a8(-0x1a,-0x40,-0xe2,-0x67)](processCharacterPrompt,_0x20d9e5),_0x1a8f72=await stripChineseAnnotations(_0x1a8f72),_0x20d9e5=await _0x1d6f22[_0x481950(-0x1db,-0x12b,-0x1b0,-0x142)](stripChineseAnnotations,_0x20d9e5);const _0x1e9531=extension_settings[extensionName][_0x5ae4a8(0x39,-0x60,0x2d,-0xe3)]['trim'](),_0x1f0464=extension_settings[extensionName];_0x1d6f22[_0x481950(-0x329,-0x2bd,-0x395,-0x2ce)](addLog,_0x5ae4a8(0x77,-0x2e,0x85,-0x6)+'i生成图片...客户'+'端为'+_0x1f0464[_0x481950(-0x2cc,-0x359,-0x335,-0x319)]+',模型为'+_0x1f0464['sd_cchatu_'+_0x5ae4a8(-0x174,-0x131,-0x17b,-0x150)]);const _0x39e4a3=_0x20d9e5&&_0x1d6f22[_0x481950(-0x1ee,-0x1c6,-0x213,-0x226)](_0x20d9e5[_0x5ae4a8(-0x62,-0x3d,-0x79,0x5d)](),'')?_0x20d9e5:_0x1a8f72;_0x1d6f22['npyOt'](addLog,'用于生成的Tag:\x20'+_0x39e4a3);let _0x5cc635=![];_0x39e4a3[_0x481950(-0x308,-0x386,-0x30f,-0x2e5)](_0x1d6f22[_0x5ae4a8(-0x175,-0x13e,-0xb0,-0xb9)])&&(_0x5cc635=!![]);_0x1d6f22[_0x481950(-0x30c,-0x2e7,-0x3bd,-0x32a)](addLog,_0x5ae4a8(-0x1f9,-0x181,-0x1c9,-0x1ef)+_0x5ae4a8(-0x132,-0xea,-0x4d,-0x1a5)+_0x5ae4a8(-0x100,-0x16f,-0x1dd,-0x12f)+_0x5cc635);let _0x36ce93={},_0x18b86d='',_0x141374='';if(_0x5cc635){if(_0x1d6f22[_0x481950(-0x214,-0x170,-0x162,-0x284)]===_0x481950(-0x2b0,-0x21c,-0x2a1,-0x269)){_0x1d6f22[_0x5ae4a8(-0x1a5,-0x132,-0xd5,-0x82)](addLog,_0x1d6f22[_0x481950(-0x298,-0x228,-0x24b,-0x2f6)]),_0x36ce93=parsePromptStringWithCoordinates(_0x39e4a3),_0x18b86d=_0x36ce93['Scene\x20Comp'+'osition'];for(let _0x372b7d=-0xf79+0x11ff+-0x3*0xd7;_0x1d6f22[_0x5ae4a8(-0x10c,-0xf6,-0x15e,-0x99)](_0x372b7d,-0x754+0x2497+0x1d3f*-0x1);_0x372b7d++){_0x36ce93['Character\x20'+_0x372b7d+_0x481950(-0x2e9,-0x23f,-0x35a,-0x336)]&&(_0x141374=_0x1d6f22[_0x5ae4a8(-0xf9,-0xe2,-0xe4,-0xb3)](_0x141374,',\x20')+_0x36ce93[_0x481950(-0x224,-0x224,-0x1f2,-0x16f)+_0x372b7d+'\x20Prompt']);}}else{_0x1d6f22['VbGAi'](_0x196970,_0x1d6f22[_0x481950(-0x1e1,-0x24a,-0x22f,-0x14c)]);throw new _0x46a55e(_0x1d6f22[_0x5ae4a8(-0x206,-0x172,-0x215,-0x1ab)]);}}else _0x1d6f22[_0x5ae4a8(-0x2c,-0xd9,-0x198,-0x144)](addLog,_0x1d6f22[_0x481950(-0x222,-0x29e,-0x27e,-0x28e)]),_0x18b86d=_0x1d6f22[_0x481950(-0x2db,-0x330,-0x22f,-0x238)](deduplicateTags,_0x39e4a3);let {modifiedPrompt:_0x1a7cef,insertions:_0x64135f}=await _0x1d6f22[_0x481950(-0x1fc,-0x2b4,-0x1dd,-0x1f3)](prompt_replace,_0x18b86d,_0x141374);if(_0x5cc635)for(let _0x45fca1=0xcf6+0x234e*0x1+-0x23*0x161;_0x1d6f22[_0x481950(-0x20c,-0x268,-0x17a,-0x28b)](_0x45fca1,0x111d+0x1*-0x60d+0xb0c*-0x1);_0x45fca1++){_0x36ce93[_0x5ae4a8(-0x79,-0x7b,0x17,-0x41)+_0x45fca1+_0x5ae4a8(-0x163,-0x140,-0x9f,-0x99)]&&(_0x1d6f22['cKfVt'](_0x1d6f22[_0x481950(-0x275,-0x200,-0x31b,-0x227)],_0x1d6f22[_0x481950(-0x275,-0x27f,-0x201,-0x32d)])?_0x1a7cef=_0x1d6f22['ZNffp'](_0x1d6f22[_0x5ae4a8(-0x1,-0x86,-0x12f,-0xcb)](_0x1a7cef,',\x20'),_0x1d6f22[_0x5ae4a8(0x7a,-0x41,-0xd,-0xe2)](prompt_replace_for_character,_0x36ce93[_0x5ae4a8(-0xeb,-0x7b,-0x100,-0x21)+_0x45fca1+_0x5ae4a8(-0xa3,-0x140,-0xb7,-0x112)])):_0x24e182[_0x5ae4a8(-0x1c1,-0x185,-0x1c6,-0x1e5)+_0x5ae4a8(-0x197,-0x164,-0x167,-0x165)]&&(_0x426d2e['removeList'+_0x481950(-0x2df,-0x2a5,-0x362,-0x235)](_0x37af2a[_0x5ae4a8(-0x49,-0x48,0x32,-0x4c)+_0x5ae4a8(-0x16b,-0xfd,-0x1b0,-0xde)+'ST'],_0x5df84d),_0x16397f[_0x5ae4a8(-0x240,-0x185,-0x110,-0x16d)+_0x481950(-0x30d,-0x2a4,-0x26a,-0x2c9)]=![],_0x1d6f22[_0x5ae4a8(-0x108,-0x146,-0x11c,-0x107)](_0x33bfd0,_0x1d6f22['ryQJm'])));}let _0xf745d8=await _0x1d6f22[_0x5ae4a8(-0x6f,-0x2b,0x72,0x74)](zhengmian,extension_settings[extensionName][_0x481950(-0x30a,-0x354,-0x2d1,-0x28f)][extension_settings[extensionName][_0x481950(-0x30e,-0x332,-0x2e0,-0x2a5)]]['fixedPromp'+'t'],_0x1a7cef,extension_settings[extensionName][_0x5ae4a8(-0x1e2,-0x161,-0x1d2,-0x1b4)][extension_settings[extensionName][_0x5ae4a8(-0x15e,-0x165,-0x13b,-0x209)]][_0x481950(-0x202,-0x2b1,-0x19e,-0x20e)+'t_end'],extension_settings[extensionName][_0x481950(-0x20e,-0x254,-0x294,-0x1fe)],_0x64135f),_0x154485=await _0x1d6f22[_0x481950(-0x33a,-0x2fe,-0x3f8,-0x32e)](fumian,extension_settings[extensionName][_0x481950(-0x30a,-0x259,-0x391,-0x2c5)][extension_settings[extensionName][_0x5ae4a8(-0x1da,-0x165,-0xc0,-0x1b1)]][_0x481950(-0x283,-0x25c,-0x204,-0x1d7)+_0x481950(-0x22b,-0x18f,-0x1d0,-0x176)],extension_settings[extensionName]['UCP_sd']);if(!_0x5cc635&&window['collectedC'+'haracterNe'+'gatives']){const _0x530e93=window[_0x5ae4a8(-0x169,-0x167,-0x1b3,-0x148)+_0x481950(-0x231,-0x2da,-0x2ac,-0x17a)+_0x481950(-0x2bd,-0x205,-0x210,-0x2bf)][_0x481950(-0x1e6,-0x131,-0x299,-0x138)]();_0x530e93&&(_0x154485=_0x154485?_0x154485+',\x20'+_0x530e93:_0x530e93,_0x1d6f22['xLnWG'](addLog,'[角色负面]\x20添加角'+'色负面提示词:\x20'+_0x530e93),console[_0x5ae4a8(-0x14b,-0x12a,-0x16e,-0x1ad)]('[SD]\x20合并角色负'+_0x481950(-0x2a3,-0x2b1,-0x34f,-0x348),_0x530e93));}_0x1d6f22[_0x481950(-0x25e,-0x298,-0x268,-0x251)](addLog,'负面为:\x20'+_0x154485),extension_settings['sd'][_0x1d6f22[_0x481950(-0x2f6,-0x2c1,-0x2fd,-0x37d)]]=_0x1e9531,await _0x1d6f22[_0x481950(-0x1fe,-0x180,-0x1b8,-0x1c4)](saveSettingsDebounced);try{if(_0x1f0464[_0x5ae4a8(-0x142,-0x123,-0x87,-0xe2)]===_0x481950(-0x2e8,-0x2d9,-0x38d,-0x2fe)){const _0xb7c981={};_0xb7c981[_0x481950(-0x24d,-0x278,-0x295,-0x198)]=_0x1f0464[_0x481950(-0x242,-0x1a2,-0x264,-0x27d)+_0x5ae4a8(-0x16,-0xc0,-0x13a,-0xc3)]?_0x1f0464[_0x5ae4a8(-0x11a,-0x99,-0x115,0x17)+_0x481950(-0x269,-0x321,-0x271,-0x1ca)]:'',_0xb7c981[_0x481950(-0x2ad,-0x236,-0x279,-0x234)]=_0x1e9531;const _0x3ef6df=await _0x1d6f22[_0x481950(-0x1fc,-0x244,-0x18c,-0x190)](fetch,_0x5ae4a8(-0x16f,-0x18f,-0x163,-0x194)+_0x5ae4a8(-0x56,-0xd6,-0x1c,-0x7c),{'method':_0x1d6f22[_0x481950(-0x1e8,-0x153,-0x1ae,-0x13b)],'body':JSON[_0x481950(-0x281,-0x27c,-0x2c4,-0x286)](_0xb7c981),'headers':_0x1d6f22['CHDsm'](getRequestHeaders,window[_0x5ae4a8(-0xf1,-0x56,0x10,-0x104)])});if(!_0x3ef6df['ok']){if(_0x1d6f22[_0x481950(-0x1e4,-0x1a1,-0x213,-0x288)]!==_0x1d6f22[_0x5ae4a8(-0xa1,-0x78,-0x8b,-0x1d)]){_0x1d6f22['vGnff'](addLog,_0x481950(-0x1ec,-0x1da,-0x234,-0x296)+_0x3ef6df[_0x481950(-0x2f9,-0x395,-0x376,-0x2c4)]+'\x20'+_0x3ef6df['statusText']);throw new Error('获取模型失败:\x20'+_0x3ef6df[_0x5ae4a8(-0xc6,-0x150,-0x125,-0x144)]+'\x20'+_0x3ef6df[_0x5ae4a8(-0xae,-0x84,-0x135,-0x2f)]);}else _0x50560f[_0x481950(-0x32e,-0x3bd,-0x2e4,-0x273)+'SDListener']=!![],_0x1d6f22['eKTcR'](_0x1dc95b);}let _0x21c0df=await _0x3ef6df['text']();console['log'](_0x1d6f22[_0x5ae4a8(-0x5a,-0x74,-0x86,-0x110)],_0x21c0df),console['log'](_0x1d6f22['cFOTS'],_0x1f0464[_0x5ae4a8(-0x9a,-0x6e,-0xa5,-0x113)+_0x481950(-0x2da,-0x2d7,-0x2a8,-0x259)]);if(_0x1d6f22[_0x5ae4a8(-0xbc,-0xe7,-0x71,-0xa6)](_0x21c0df,_0x1f0464[_0x481950(-0x217,-0x255,-0x16f,-0x2d3)+'8_model'])){addLog(_0x5ae4a8(-0xa6,-0xc8,-0x17a,-0x109)+_0x1f0464[_0x5ae4a8(-0xfb,-0x6e,-0x123,-0x6)+'8_model']+_0x481950(-0x220,-0x2af,-0x27a,-0x1ea)),toastr[_0x5ae4a8(-0xac,-0x128,-0x119,-0x194)]('正在设置模型...为'+_0x1f0464[_0x5ae4a8(-0x120,-0x6e,-0xd1,0x46)+'8_model']);const _0x536372={};_0x536372[_0x481950(-0x24d,-0x22d,-0x212,-0x1c8)]=_0x1f0464[_0x5ae4a8(-0xd3,-0x99,-0x80,-0xad)+_0x5ae4a8(-0x112,-0xc0,-0x19,-0x15f)]?_0x1f0464[_0x5ae4a8(-0x3a,-0x99,-0x1c,-0x134)+'sd_auth']:'',_0x536372[_0x5ae4a8(-0x14f,-0x104,-0x15c,-0x14b)]=_0x1e9531,_0x536372[_0x481950(-0x2cd,-0x256,-0x33f,-0x28a)]=_0x1f0464[_0x5ae4a8(-0x125,-0x6e,-0x15,-0xa1)+_0x5ae4a8(-0x14d,-0x131,-0xcc,-0x195)];const _0x44c042=await _0x1d6f22['GIfAY'](fetch,_0x1d6f22['OJXaa'],{'method':_0x481950(-0x1c5,-0x10a,-0x1de,-0x277),'body':JSON['stringify'](_0x536372),'headers':_0x1d6f22['dpiso'](getRequestHeaders,window[_0x5ae4a8(0x11,-0x56,-0x112,0x11)])});if(!_0x44c042['ok']){addLog('切换模型失败:\x20'+_0x44c042[_0x5ae4a8(-0x162,-0x150,-0x18c,-0x1a2)]+'\x20'+_0x44c042['statusText']);throw new Error(_0x481950(-0x236,-0x2dd,-0x206,-0x227)+_0x44c042[_0x481950(-0x2f9,-0x38d,-0x346,-0x284)]+'\x20'+_0x44c042[_0x481950(-0x22d,-0x272,-0x214,-0x284)]);}toastr[_0x481950(-0x2d1,-0x375,-0x274,-0x319)](_0x5ae4a8(-0x19c,-0x125,-0x1d3,-0x11f)+_0x1f0464[_0x5ae4a8(-0x10e,-0x6e,-0xda,0x2b)+_0x5ae4a8(-0x1ba,-0x131,-0x11c,-0x13d)]+'成功');}}else{if(_0x1d6f22[_0x481950(-0x2c5,-0x37b,-0x255,-0x2d0)]('xFvgk',_0x1d6f22[_0x5ae4a8(-0x7c,-0x115,-0x89,-0x199)])){_0x1d6f22[_0x5ae4a8(-0x10f,-0x143,-0x179,-0xd5)](_0x4fa703,_0x188117);return;}else{let _0x543e88=await _0x1d6f22[_0x5ae4a8(-0x12b,-0x143,-0xa1,-0xeb)](getSDMode,_0x1e9531);_0x1d6f22[_0x481950(-0x339,-0x345,-0x399,-0x2a5)](_0x543e88,_0x1f0464[_0x5ae4a8(-0x73,-0x6e,0x4e,-0x7a)+_0x5ae4a8(-0x112,-0x131,-0x112,-0xaf)])&&(_0x1d6f22[_0x481950(-0x1e0,-0x1ef,-0x21e,-0x1e3)](_0x1d6f22[_0x481950(-0x228,-0x230,-0x1b3,-0x22d)],_0x1d6f22['evnxp'])?_0x2e6a94[_0x1d6f22[_0x5ae4a8(-0x13e,-0xcb,-0x1f,-0xda)]]=_0x2fbad5:(_0x1d6f22[_0x481950(-0x230,-0x293,-0x1ee,-0x1e0)](addLog,'正在切换模型为'+_0x1f0464[_0x481950(-0x217,-0x226,-0x17d,-0x2d1)+_0x5ae4a8(-0x1b1,-0x131,-0x141,-0x76)]+_0x5ae4a8(-0x9b,-0x77,-0x78,-0xb1)),await setSDMode(_0x1e9531,_0x1f0464['sd_cchatu_'+_0x481950(-0x2da,-0x2c1,-0x2c8,-0x35e)])));}}}catch(_0x376786){_0x1d6f22[_0x481950(-0x30c,-0x346,-0x285,-0x2ce)](addLog,'获取或者切换模型失败'+':\x20'+_0x376786[_0x5ae4a8(0x5e,-0x5e,0x43,0x49)]+('。请检查sdwebu'+_0x481950(-0x322,-0x318,-0x2a5,-0x32b)+_0x5ae4a8(-0x1c,-0xa2,-0x22,-0x54))),taskQueue[_0x481950(-0x2ff,-0x2fd,-0x2dc,-0x2c9)+'sk'](_0x86f7f7,![]),currentTaskId=null;throw new Error(_0x5ae4a8(-0x144,-0x151,-0x192,-0xc8)+'，请检查sdwebu'+'i是否正常启动，并检'+_0x5ae4a8(-0x13e,-0xa2,-0xb2,-0x98));}let _0x598747=-(0x2*-0xe9d+0x3*-0x8ff+0x202*0x1c);const _0x541c7c=_0x1f0464[_0x481950(-0x1d0,-0x153,-0x198,-0x198)];_0x541c7c!==''&&_0x1d6f22['vYFTF'](_0x541c7c,null)&&!_0x1d6f22[_0x5ae4a8(-0x84,-0x71,-0x4a,-0xe2)](isNaN,_0x1d6f22['bWRQK'](Number,_0x541c7c))&&_0x1d6f22[_0x481950(-0x2ed,-0x338,-0x252,-0x3a1)](_0x1d6f22['TLMxL'](Number,_0x541c7c),0xef*-0xb+-0x727*0x5+-0x3*-0xf58)&&(_0x598747=_0x1d6f22[_0x481950(-0x2ac,-0x368,-0x22a,-0x2e1)](Number,_0x541c7c));let _0x18d53b={'prompt':_0xf745d8,'negative_prompt':_0x154485,'sampler_name':_0x1f0464[_0x481950(-0x217,-0x24e,-0x2cc,-0x18a)+_0x481950(-0x336,-0x3d6,-0x27d,-0x3d9)+_0x481950(-0x32f,-0x2d8,-0x2ba,-0x2f0)],'scheduler':_0x1f0464[_0x5ae4a8(-0xc3,-0x6e,-0x85,-0xb0)+'8_schedule'+'r'],'steps':_0x1f0464[_0x5ae4a8(-0x45,-0xdf,-0xe5,-0x5e)],'cfg_scale':_0x1f0464['sdCfgScale'],'width':_0x47e609?_0x47e609:_0x1f0464[_0x481950(-0x267,-0x2a7,-0x295,-0x2d1)],'height':_0x52bfcf?_0x52bfcf:_0x1f0464[_0x481950(-0x287,-0x275,-0x256,-0x255)],'restore_faces':_0x1d6f22[_0x481950(-0x1c8,-0x211,-0x128,-0x1c3)](_0x1f0464[_0x5ae4a8(-0xc9,-0x28,-0x23,-0xb9)+'es'],_0x1d6f22[_0x481950(-0x1d8,-0x156,-0x234,-0x11a)]),'enable_hr':_0x1d6f22['oQXch'](_0x1f0464[_0x481950(-0x1fd,-0x292,-0x18b,-0x162)+_0x5ae4a8(-0x19f,-0xec,-0x3c,-0x127)],_0x481950(-0x1f5,-0x22c,-0x1a8,-0x13b)),'hr_upscaler':_0x1f0464[_0x481950(-0x217,-0x244,-0x271,-0x2c7)+'8_upscaler'],'hr_scale':_0x1f0464['sd_cupscal'+'e_factor'],'hr_additional_modules':[],'denoising_strength':_0x1f0464[_0x481950(-0x30b,-0x268,-0x31d,-0x30f)+_0x481950(-0x314,-0x34f,-0x29f,-0x297)+'th'],'hr_second_pass_steps':_0x1f0464[_0x5ae4a8(-0x8c,-0x54,-0x8c,-0x76)+_0x5ae4a8(-0x229,-0x193,-0x1f1,-0x10a)],'seed':_0x598747,'override_settings':{'CLIP_stop_at_last_layers':_0x1d6f22['OLaXl'](Number,_0x1f0464[_0x5ae4a8(-0x77,-0xc9,-0xb6,-0xc5)+_0x481950(-0x2d8,-0x351,-0x313,-0x2ee)]),'sd_vae':_0x1f0464['sd_cchatu_'+_0x5ae4a8(0x51,-0x4f,0x16,-0xda)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x1d6f22[_0x5ae4a8(-0x18c,-0x10d,-0xcf,-0x153)](addLog,_0x5ae4a8(0x27,-0x31,0x11,-0x62)+'ces\x20脸部修复\x20为'+_0x18d53b[_0x481950(-0x1da,-0x143,-0x207,-0x13b)+'ces']),_0x1d6f22[_0x5ae4a8(-0x1d4,-0x158,-0x140,-0x18a)](addLog,_0x481950(-0x1e5,-0x176,-0x24b,-0x1ba)+_0x5ae4a8(-0x86,-0x7e,-0x104,-0x96)+_0x18d53b[_0x5ae4a8(-0x1c,-0x47,0x36,-0x45)]);if(_0x1d6f22[_0x5ae4a8(0x29,-0x1f,0x24,0x20)](_0x1f0464[_0x5ae4a8(-0x94,-0xbf,-0x84,-0x12f)+_0x5ae4a8(-0xfa,-0xed,-0x175,-0x179)],_0x1d6f22['xBLEJ'])){if(_0x1d6f22[_0x481950(-0x32b,-0x2bb,-0x37b,-0x35f)]!==_0x1d6f22[_0x5ae4a8(-0x11b,-0x182,-0x11b,-0x107)]){const _0x252d7a={};_0x252d7a[_0x481950(-0x31a,-0x293,-0x338,-0x372)]=_0x1d6f22[_0x5ae4a8(-0xdd,-0x12c,-0x196,-0xb0)],_0x252d7a[_0x481950(-0x223,-0x2cd,-0x28a,-0x24c)]=_0x5ae4a8(-0x8a,-0x149,-0x93,-0xdf),_0x252d7a[_0x5ae4a8(-0x1ca,-0x147,-0x15d,-0x113)+'guage']=_0x1d6f22[_0x5ae4a8(-0x9a,-0x9b,-0x3d,-0xe0)],_0x252d7a[_0x5ae4a8(-0x41,-0x20,-0x6a,-0x6b)+_0x481950(-0x250,-0x2fd,-0x20c,-0x2c4)]=_0x1d6f22['mHbKa'],_0x252d7a[_0x5ae4a8(0x3a,-0x25,0x22,-0x8d)]=_0x1d6f22[_0x481950(-0x243,-0x18f,-0x231,-0x1d9)];const _0x1fe4be=_0x252d7a;return _0x3b438e&&(_0x1fe4be[_0x1d6f22[_0x5ae4a8(-0x179,-0xd1,-0x64,-0x178)]]=_0x312979),_0x5c6cde&&(_0x1fe4be[_0x1d6f22['hwrJK']]=_0x542a4c),_0x1fe4be;}else{_0x1d6f22[_0x5ae4a8(-0x115,-0x87,-0xe8,-0x108)](addLog,_0x1d6f22['kkJon']);const _0x25c302={};_0x25c302[_0x481950(-0x309,-0x2d6,-0x35b,-0x286)]=_0x481950(-0x25c,-0x220,-0x238,-0x1f0)+_0x5ae4a8(-0x1ed,-0x168,-0x148,-0xd2);const _0x4b19ed={};_0x4b19ed['args']=[!![],!![],_0x25c302];const _0xed8091={};_0xed8091[_0x5ae4a8(-0xaa,-0x2a,-0xca,-0x1a)]=_0x4b19ed;const _0x152ada={};_0x152ada[_0x481950(-0x1ed,-0x279,-0x18b,-0x1a1)+_0x5ae4a8(-0x14d,-0xeb,-0xda,-0x8b)]=_0xed8091,_0x18d53b=_0x1d6f22[_0x5ae4a8(0x15,-0x53,-0x1c,0x25)](deepMerge,_0x18d53b,_0x152ada);}}const _0x4811c3='\x0a---\x0a###\x20生'+_0x481950(-0x2c9,-0x2c4,-0x2df,-0x28a)+'正面提示\x20(Prom'+'pt):**\x20'+_0xf745d8+(_0x481950(-0x1d6,-0x221,-0x1a9,-0x19c)+'(Negative\x20'+_0x481950(-0x246,-0x203,-0x2b7,-0x212)+'\x20')+_0x154485+(_0x481950(-0x21b,-0x20c,-0x201,-0x281)+_0x5ae4a8(-0x14d,-0xb4,-0x35,-0x139)+_0x5ae4a8(0x1b,-0x30,0x85,0x43))+_0x18d53b['sampler_na'+'me']+(_0x5ae4a8(-0x110,-0xf3,-0x15b,-0x197)+'teps):**\x20')+_0x18d53b['steps']+('\x0a-\x20**CFG\x20S'+_0x5ae4a8(-0x89,-0xe4,-0xc3,-0x98))+_0x18d53b[_0x481950(-0x2f1,-0x251,-0x2f6,-0x24c)]+(_0x481950(-0x313,-0x39a,-0x381,-0x3b5)+'ize):**\x20')+_0x18d53b[_0x481950(-0x2fc,-0x2c1,-0x325,-0x2a0)]+'x'+_0x18d53b[_0x481950(-0x2c0,-0x2c7,-0x36d,-0x2a7)]+(_0x481950(-0x1c2,-0x121,-0x114,-0x241)+_0x5ae4a8(0x4,-0x24,-0x44,-0xae))+(_0x18d53b[_0x5ae4a8(-0x45,-0x96,-0x127,-0x155)]===-(-0x1eef+-0x8dd*0x1+0x27cd)?_0x1d6f22[_0x481950(-0x251,-0x2a7,-0x1e4,-0x299)]:_0x18d53b[_0x5ae4a8(-0x92,-0x96,-0x3f,-0x8b)])+(_0x5ae4a8(-0xd7,-0xee,-0x3e,-0x18d)+_0x481950(-0x211,-0x152,-0x169,-0x19e))+_0x1f0464[_0x481950(-0x217,-0x160,-0x273,-0x1df)+_0x481950(-0x2da,-0x36c,-0x305,-0x249)]+(_0x481950(-0x2e0,-0x29e,-0x384,-0x2d4)+'*\x20')+_0x18d53b[_0x5ae4a8(-0xad,-0x100,-0x56,-0x86)+_0x5ae4a8(-0xf,-0x8b,-0xcd,-0x141)][_0x481950(-0x27b,-0x291,-0x2cf,-0x1e2)]+(_0x5ae4a8(-0x13f,-0xb0,-0x57,-0x29)+'Skip:**\x20')+_0x18d53b[_0x481950(-0x2a9,-0x329,-0x282,-0x2c2)+_0x481950(-0x234,-0x278,-0x234,-0x191)]['CLIP_stop_'+_0x481950(-0x334,-0x333,-0x2f2,-0x2c3)+_0x5ae4a8(-0x8f,-0x127,-0x116,-0x1d2)]+('\x0a-\x20**高清修复\x20'+_0x481950(-0x23d,-0x1a1,-0x241,-0x257)+'):**\x20')+_0x18d53b[_0x5ae4a8(-0x77,-0x47,-0x50,-0x72)]+(_0x481950(-0x23e,-0x22c,-0x1fc,-0x1cc)+_0x5ae4a8(-0x189,-0x13a,-0x9d,-0x12d)+'actor):**\x20')+_0x18d53b['hr_scale']+('\x0a-\x20**重绘幅度\x20'+_0x5ae4a8(-0x13f,-0x15c,-0x21b,-0xbe)+_0x5ae4a8(-0x9a,-0x9c,-0x144,0xe)+_0x5ae4a8(-0x6b,-0xd0,-0xf3,-0xdb))+_0x18d53b[_0x5ae4a8(-0x143,-0x138,-0x10c,-0x90)+_0x481950(-0x2d7,-0x38a,-0x227,-0x2da)]+(_0x5ae4a8(-0x11b,-0x139,-0x1bc,-0x1cf)+_0x481950(-0x28f,-0x295,-0x207,-0x246)+_0x481950(-0x31d,-0x289,-0x33b,-0x374))+_0x18d53b[_0x5ae4a8(-0x75,-0x31,-0x9a,0x4)+_0x481950(-0x2c3,-0x22f,-0x35d,-0x242)]+(_0x5ae4a8(-0x120,-0x75,-0xce,0x28)+_0x481950(-0x2f8,-0x366,-0x2e2,-0x2ff))+_0x1d6f22[_0x5ae4a8(-0x41,-0x1f,0x36,-0x2e)](_0x1f0464[_0x481950(-0x268,-0x1e3,-0x22c,-0x211)+_0x5ae4a8(-0x1a8,-0xed,-0x136,-0x81)],_0x1d6f22[_0x5ae4a8(-0x5f,-0x2f,-0x22,-0x4e)])+_0x5ae4a8(-0x18f,-0x15a,-0x113,-0x9f);addLog(_0x4811c3),_0x1d6f22[_0x5ae4a8(-0x1a9,-0x16e,-0x186,-0x19b)](addLog,_0x5ae4a8(0x4c,-0x33,-0x8d,0x19)+'数为'+JSON[_0x5ae4a8(-0xa3,-0xd8,-0x16b,-0x72)](_0x18d53b)),console[_0x481950(-0x2d3,-0x23b,-0x2d3,-0x314)](_0x1d6f22[_0x5ae4a8(-0x72,-0x8c,-0xa4,-0xec)],_0x18d53b);function _0x5ae4a8(_0x1cb32a,_0x2d0bd6,_0x1ffa40,_0x3e99c6){return _0x54da(_0x2d0bd6- -0x228,_0x1cb32a);}while(!window[_0x5ae4a8(-0x1f6,-0x195,-0x16c,-0x1ff)]){_0x1d6f22['vYFTF'](_0x1d6f22['Jvxrq'],_0x5ae4a8(-0xed,-0xbb,-0x15,-0x69))?await _0x1d6f22[_0x481950(-0x25b,-0x27f,-0x29d,-0x1ad)](sleep,-0x1652+-0x1017*0x1+0x2a51):(!_0x4667ae[_0x481950(-0x32e,-0x3b7,-0x2f3,-0x344)+_0x481950(-0x30d,-0x391,-0x257,-0x275)]&&(_0x442e27['initialize'+'SDListener']=!![],_0x3aefd6()),_0x1d6f22[_0x481950(-0x1fe,-0x180,-0x189,-0x2b2)](_0x52c452));};try{window[_0x481950(-0x33e,-0x3a8,-0x336,-0x3f7)]=![],taskQueue[_0x5ae4a8(-0x6c,-0x5c,-0xb,-0x93)+'us'](_0x86f7f7,_0x1d6f22['xyNLx']);if(_0x1d6f22[_0x5ae4a8(-0xae,-0xa5,-0x72,-0x105)](_0x1f0464[_0x481950(-0x2cc,-0x2c1,-0x251,-0x324)],_0x481950(-0x2e8,-0x276,-0x376,-0x307))){if(!taskQueue[_0x481950(-0x215,-0x1d1,-0x1f0,-0x2a2)+_0x5ae4a8(-0xc7,-0xf1,-0x4b,-0x4d)](_0x86f7f7)){addLog('任务已被用户取消。'),eventSource[_0x5ae4a8(0x2e,-0x46,-0x29,-0x31)](_0x481950(-0x218,-0x22a,-0x264,-0x1db)+_0x5ae4a8(-0x134,-0x188,-0x1af,-0x129));throw new Error(_0x5ae4a8(-0x12f,-0xfe,-0x156,-0xfe));}_0x18d53b[_0x5ae4a8(-0x1ab,-0x104,-0x186,-0x71)]=_0x1e9531,console['log']('payst_chat'+_0x481950(-0x212,-0x284,-0x168,-0x2a2)+'load',_0x1f0464[_0x481950(-0x242,-0x29b,-0x1b0,-0x2fd)+_0x5ae4a8(-0x6b,-0xc0,-0xb7,-0xeb)]),_0x18d53b[_0x481950(-0x24d,-0x2f5,-0x19f,-0x1cf)]=_0x1f0464[_0x481950(-0x242,-0x1be,-0x28c,-0x198)+_0x481950(-0x269,-0x23a,-0x289,-0x22e)]?_0x1f0464['st_chatu8_'+'sd_auth']:'';const _0x6a93a8=await _0x1d6f22[_0x5ae4a8(-0x12e,-0x13b,-0x14a,-0x18e)](fetch,_0x1d6f22[_0x5ae4a8(-0x211,-0x184,-0xea,-0x163)],{'method':_0x1d6f22['uLkdv'],'headers':_0x1d6f22[_0x5ae4a8(-0x1b7,-0x146,-0xbf,-0x10c)](getRequestHeaders,window[_0x481950(-0x1ff,-0x1b9,-0x1e7,-0x180)]),'body':JSON[_0x5ae4a8(-0x123,-0xd8,-0x135,-0x175)](_0x18d53b)});if(!_0x6a93a8['ok']){if(_0x1d6f22[_0x481950(-0x1f4,-0x15a,-0x248,-0x28a)](_0x1d6f22[_0x5ae4a8(0x10,-0x81,-0x6f,-0x5b)],_0x1d6f22[_0x481950(-0x22a,-0x264,-0x16b,-0x1c2)])){const _0x22bc0d=await _0x6a93a8['text']();addLog(_0x481950(-0x29d,-0x282,-0x2f8,-0x250)+_0x5ae4a8(-0x8c,-0x110,-0xbd,-0x114)+_0x6a93a8[_0x481950(-0x2f9,-0x270,-0x386,-0x260)]+_0x5ae4a8(-0xf6,-0x113,-0x13d,-0xd1)+_0x22bc0d),console[_0x481950(-0x2d3,-0x227,-0x24b,-0x33b)](_0x1d6f22['nmzAy'],_0x22bc0d);throw new Error(_0x481950(-0x29b,-0x23b,-0x214,-0x2d4)+_0x6a93a8[_0x5ae4a8(-0x13d,-0x150,-0x1e5,-0xfd)]+_0x481950(-0x315,-0x2a5,-0x375,-0x35b)+_0x22bc0d);}else{_0x1d6f22[_0x5ae4a8(-0x149,-0xc6,-0x81,-0x15)](_0x449287,_0x481950(-0x1ec,-0x253,-0x17b,-0x197)+_0x32aaa5[_0x481950(-0x2f9,-0x28f,-0x264,-0x2c3)]+'\x20'+_0x5955a0['statusText']);throw new _0x513dab(_0x5ae4a8(-0xc8,-0x43,-0x75,0x77)+_0x524476[_0x481950(-0x2f9,-0x343,-0x286,-0x289)]+'\x20'+_0x4867da[_0x481950(-0x22d,-0x2e1,-0x2d4,-0x2be)]);}}const _0x94f573=await _0x6a93a8[_0x481950(-0x1c7,-0x202,-0x1fb,-0x156)]();let _0x1b9fbe='';try{const _0x41c102=JSON[_0x5ae4a8(-0x137,-0xca,-0x2a,-0x12b)](_0x94f573);_0x1b9fbe=_0x41c102[_0x481950(-0x22e,-0x220,-0x2c7,-0x1fa)][-0x1f12+0x11d7+0xd3b];}catch(_0x5013d8){_0x1d6f22['EsNUS']===_0x1d6f22[_0x481950(-0x1e2,-0x223,-0x22d,-0x297)]?_0xb1ffed[_0x481950(-0x2ff,-0x375,-0x290,-0x33c)+'sk'](_0x1be5b8,![]):(addLog(_0x5ae4a8(-0x13,-0x7c,0x2d,-0xd9)+_0x481950(-0x1fa,-0x1ae,-0x22a,-0x144)+_0x5ae4a8(-0x8f,-0x12d,-0x179,-0x1df)),_0x1b9fbe=_0x94f573);}const _0x321065=_0x1d6f22[_0x5ae4a8(-0x17b,-0x108,-0x1a9,-0xc6)](_0x1d6f22['qsKXk'],_0x1b9fbe);_0x1d6f22[_0x481950(-0x329,-0x2bb,-0x2f1,-0x365)](addLog,_0x1d6f22[_0x5ae4a8(-0x44,-0x22,0x64,-0x9e)]),_0x1d6f22[_0x5ae4a8(-0xcc,-0x6d,-0x57,0x5)](setTimeout,()=>{function _0x1d65f2(_0x401249,_0x37bf96,_0x14fe98,_0x589018){return _0x5ae4a8(_0x589018,_0x401249-0x134,_0x14fe98-0x15f,_0x589018-0x12f);}console[_0x6f346b(0x48d,0x4c9,0x55d,0x45b)](_0x1d6f22[_0x6f346b(0x4c7,0x47d,0x4c7,0x514)]);function _0x6f346b(_0x266892,_0x14b398,_0x167163,_0x335584){return _0x481950(_0x14b398-0x79c,_0x14b398-0x1a8,_0x167163-0x81,_0x266892);}window[_0x1d65f2(-0x61,-0x82,-0x23,-0x7a)]=!![];},extension_settings[extensionName]['imageGenIn'+_0x481950(-0x23a,-0x1ee,-0x277,-0x27e)]);;return taskQueue[_0x481950(-0x2ff,-0x26d,-0x35b,-0x262)+'sk'](_0x86f7f7,!![]),currentTaskId=null,_0x1d6f22[_0x5ae4a8(-0x55,-0x3a,0x84,0x7b)](_0x1d6f22[_0x481950(-0x2dc,-0x29c,-0x288,-0x33c)](String,extension_settings[extensionName][_0x481950(-0x1de,-0x24d,-0x293,-0x1d0)+_0x5ae4a8(-0xed,-0x3e,-0xf1,-0x74)]),_0x1d6f22[_0x481950(-0x1d8,-0x18b,-0x1c6,-0x24e)])&&(_0x321065=await _0x1d6f22[_0x481950(-0x20b,-0x269,-0x180,-0x182)](convertImageToJpeg,_0x321065)),{'image':_0x321065,'change':_0x1d6f22[_0x481950(-0x321,-0x366,-0x2a6,-0x29c)](_0x20d9e5,'')};}else{if(!taskQueue[_0x5ae4a8(-0x8d,-0x6c,-0x108,-0x118)+_0x481950(-0x29a,-0x2e8,-0x24d,-0x2bc)](_0x86f7f7)){if(_0x1d6f22[_0x5ae4a8(-0x8c,-0x76,-0x81,-0x18)]!==_0x1d6f22[_0x481950(-0x21f,-0x248,-0x192,-0x1d7)]){const _0x7c5b0a=_0x3ae928[_0x481950(-0x310,-0x2f9,-0x331,-0x34c)+_0x481950(-0x231,-0x2ce,-0x2d4,-0x203)+_0x5ae4a8(-0x11d,-0x114,-0x88,-0xed)][_0x481950(-0x1e6,-0x16f,-0x26a,-0x158)]();_0x7c5b0a&&(_0x1a9d59=_0x5503b3?_0x3e6317+',\x20'+_0x7c5b0a:_0x7c5b0a,_0x3e8063('[角色负面]\x20添加角'+_0x5ae4a8(-0x1ca,-0x17c,-0xd0,-0x1ef)+_0x7c5b0a),_0x513653[_0x481950(-0x2d3,-0x29a,-0x23e,-0x301)](_0x1d6f22['VRaRe'],_0x7c5b0a));}else{_0x1d6f22[_0x481950(-0x258,-0x2bd,-0x1fc,-0x2f5)](addLog,_0x1d6f22[_0x481950(-0x1e1,-0x1c3,-0x1c1,-0x1a8)]);throw new Error(_0x1d6f22[_0x5ae4a8(-0x1f2,-0x172,-0x112,-0x20c)]);}}const _0x19e75b=new URL(_0x1d6f22[_0x481950(-0x22f,-0x214,-0x2d3,-0x28c)](_0x1e9531,_0x481950(-0x306,-0x296,-0x300,-0x2d8)+_0x481950(-0x330,-0x2b4,-0x3ba,-0x3df)));window[_0x5ae4a8(-0x1ff,-0x195,-0x124,-0x115)]=![];const _0x14f23a=await fetch(_0x19e75b,{'method':'POST','body':JSON[_0x5ae4a8(-0x190,-0xd8,-0x60,-0xe0)](_0x18d53b),'headers':getDirectHeaders(_0x5ae4a8(-0x118,-0x10b,-0x81,-0x8b)+'n/json',_0x1d6f22[_0x5ae4a8(-0x26,-0x1d,-0xb2,-0x64)](getsdAuth))});setTimeout(()=>{console[_0xb8db77(0x22e,0x196,0x220,0x1b2)](_0x1d6f22[_0xb8db77(0x171,0x1cc,0x167,0x166)]);function _0x3eef0b(_0x31417c,_0x4e8be3,_0x5438fe,_0x345500){return _0x5ae4a8(_0x4e8be3,_0x31417c- -0x11f,_0x5438fe-0x1b2,_0x345500-0x102);}function _0xb8db77(_0x315543,_0x87e74d,_0x40a89a,_0x494aed){return _0x481950(_0x494aed-0x485,_0x87e74d-0x1ae,_0x40a89a-0x1e6,_0x87e74d);}window[_0xb8db77(0x1a0,0xa5,0x14c,0x147)]=!![];},extension_settings[extensionName][_0x481950(-0x1dd,-0x1a8,-0x139,-0x166)+_0x5ae4a8(-0x147,-0x91,-0x1b,0x4)]);;if(!_0x14f23a['ok']){if(_0x1d6f22[_0x481950(-0x2ca,-0x2f4,-0x289,-0x343)](_0x1d6f22[_0x481950(-0x277,-0x2a7,-0x2e7,-0x2b2)],_0x1d6f22[_0x5ae4a8(-0xe8,-0xa1,-0x3f,0x4)])){const _0x4cc919=_0x51a2a0?function(){if(_0x58e8c6){const _0x4bee6c=_0xde391e['apply'](_0x3c8c8b,arguments);return _0x5abf48=null,_0x4bee6c;}}:function(){};return _0x217525=![],_0x4cc919;}else{const _0x24b195=await _0x14f23a[_0x5ae4a8(-0xb7,-0x1e,-0x25,-0x84)]();addLog(_0x5ae4a8(-0x228,-0x177,-0x218,-0x115)+_0x5ae4a8(0x12,-0x5a,-0x37,-0x60)+_0x14f23a[_0x5ae4a8(-0xa6,-0x150,-0x1f0,-0x1d0)]+_0x5ae4a8(-0xc7,-0x113,-0x19f,-0x75)+_0x24b195),console[_0x481950(-0x2d3,-0x22f,-0x33a,-0x2ec)](_0x1d6f22[_0x5ae4a8(-0x239,-0x18e,-0x112,-0x132)],_0x24b195);throw new Error(_0x481950(-0x29b,-0x27c,-0x1dd,-0x31c)+_0x14f23a[_0x481950(-0x2f9,-0x311,-0x267,-0x338)]+_0x5ae4a8(-0x19c,-0x16c,-0x187,-0x156)+_0x24b195);}}const _0x5ba691=await _0x14f23a[_0x5ae4a8(-0x177,-0x130,-0x1ce,-0xd0)]();if(!_0x5ba691['images']||_0x5ba691['images'][_0x481950(-0x20a,-0x242,-0x1fb,-0x1a9)]===0x37*0x52+0x21f6+-0x3394)throw new Error(_0x1d6f22['gZcBV']);const _0x325ffa=_0x5ba691['images'][-0x7c5*0x4+0x18d9*0x1+-0x1*-0x63b],_0x1e9ec6=_0x1d6f22[_0x5ae4a8(-0x7b,-0x108,-0xc8,-0x179)](_0x1d6f22[_0x481950(-0x1f6,-0x15b,-0x1c0,-0x23c)],_0x325ffa);addLog(_0x1d6f22[_0x481950(-0x1cb,-0x119,-0x24f,-0x13c)]),taskQueue[_0x481950(-0x2ff,-0x31b,-0x293,-0x337)+'sk'](_0x86f7f7,!![]),currentTaskId=null;if(String(extension_settings[extensionName][_0x481950(-0x1de,-0x1d4,-0x1db,-0x1ed)+_0x481950(-0x1e7,-0x14d,-0x198,-0x1b0)])===_0x1d6f22['xBLEJ']){if(_0x1d6f22[_0x481950(-0x1ee,-0x29a,-0x1cc,-0x26d)](_0x1d6f22[_0x481950(-0x319,-0x357,-0x272,-0x325)],_0x5ae4a8(0x1d,-0x7d,-0xac,-0x8e))){const _0x35cc84=_0x1d6f22['WnyEe']['split']('|');let _0x5c7696=-0x1df6+-0x92*-0x3b+-0xec*0x4;while(!![]){switch(_0x35cc84[_0x5c7696++]){case'0':_0x26c5eb[_0x5ae4a8(-0x14e,-0x11d,-0x12c,-0x85)](_0x1d6f22[_0x481950(-0x33d,-0x318,-0x35f,-0x315)],_0x43bf83);continue;case'1':_0x19e0d9=null;continue;case'2':_0x416ba9(_0x5ae4a8(-0x11a,-0xfc,-0x1b1,-0x11c)+_0x337445['message']);continue;case'3':throw _0x2cd87a;continue;case'4':if(_0x1d6f22['EuMvd'](_0x9d2057[_0x5ae4a8(0x4,-0x5e,0x6,-0x11b)],_0x1d6f22[_0x481950(-0x31b,-0x318,-0x2dc,-0x39b)])){}else _0x181277[_0x481950(-0x2ff,-0x35b,-0x24f,-0x355)+'sk'](_0x33d4a7,![]);continue;case'5':_0x3f4b1f[_0x5ae4a8(-0x216,-0x195,-0x123,-0x217)]=!![];continue;}break;}}else _0x1e9ec6=await _0x1d6f22['dpiso'](convertImageToJpeg,_0x1e9ec6);}return{'image':_0x1e9ec6,'change':_0x1d6f22[_0x481950(-0x321,-0x2a4,-0x345,-0x335)](_0xd1a43e,'')};}}catch(_0x32a76a){const _0x2c8d4b=('4|5|3|0|1|'+'2')[_0x5ae4a8(-0x3a,-0xae,-0x122,-0x154)]('|');let _0x50bd08=0xdd*0x19+-0x2612*0x1+0x107d;while(!![]){switch(_0x2c8d4b[_0x50bd08++]){case'0':_0x1d6f22['CHDsm'](addLog,_0x5ae4a8(-0x111,-0xfc,-0x11d,-0xaa)+_0x32a76a[_0x5ae4a8(0x5f,-0x5e,0x0,0x31)]);continue;case'1':console[_0x5ae4a8(-0x101,-0x11d,-0x9a,-0xd6)](_0x481950(-0x2f5,-0x2e5,-0x31a,-0x2b3)+_0x481950(-0x286,-0x1f2,-0x1d5,-0x323)+_0x5ae4a8(-0x181,-0x154,-0x161,-0x168),_0x32a76a);continue;case'2':throw _0x32a76a;continue;case'3':currentTaskId=null;continue;case'4':window[_0x481950(-0x33e,-0x306,-0x3f3,-0x37d)]=!![];continue;case'5':if(_0x1d6f22[_0x481950(-0x1e3,-0x27d,-0x21f,-0x16e)](_0x32a76a['message'],_0x481950(-0x2a7,-0x21f,-0x2e8,-0x2d6))){}else taskQueue[_0x5ae4a8(-0x198,-0x156,-0x1f5,-0x195)+'sk'](_0x86f7f7,![]);continue;}break;}}}async function sdGenerate(_0xe2cf7a){const _0x2ae3c8={'dilyp':function(_0x2907ba,_0x252de1){return _0x2907ba(_0x252de1);},'hfZaW':function(_0x563e14,_0x97789d,_0x4fa91c){return _0x563e14(_0x97789d,_0x4fa91c);},'THLyZ':_0x152e36(0x274,0x18e,0x225,0x2c7)+_0x41c5b3(0x278,0x257,0x2cd,0x2d3),'jKKLW':function(_0x460dce,_0x5c135b){return _0x460dce+_0x5c135b;},'vCatY':function(_0x3c1ec9,_0x5ec986){return _0x3c1ec9<=_0x5ec986;},'fayvu':function(_0x1b1021,_0x54ec9f){return _0x1b1021+_0x54ec9f;},'AahuC':function(_0x28ba61,_0xd4c02){return _0x28ba61+_0xd4c02;},'HiVgA':_0x152e36(0x262,0x2c4,0x222,0x1db),'ToJNJ':function(_0x2fea71,_0x1d6015){return _0x2fea71!==_0x1d6015;},'LwhGJ':_0x152e36(0x335,0x34d,0x2b2,0x343),'VwSfQ':function(_0x347a20,_0xf55c55){return _0x347a20(_0xf55c55);},'qDZNs':_0x152e36(0x23f,0x28c,0x2ac,0x224),'hzCiq':function(_0x46071f,_0x1a152d){return _0x46071f===_0x1a152d;},'baeyt':function(_0x428e89,_0x920d53){return _0x428e89!==_0x920d53;},'BwGnd':_0x152e36(0x1a0,0x27a,0x24e,0x26b),'sHkbZ':function(_0x293371,_0x29583f){return _0x293371(_0x29583f);},'CzjbO':function(_0x273410,_0x535952){return _0x273410!=_0x535952;},'taryf':_0x152e36(0x21e,0x23f,0x272,0x2f5),'UAHsD':function(_0x380f4d,_0x12216c,_0x223fe6,_0x887f77){return _0x380f4d(_0x12216c,_0x223fe6,_0x887f77);},'yBVWT':function(_0x28e4a5,_0xfb8623){return _0x28e4a5(_0xfb8623);},'OtUfA':_0x152e36(0x213,0x15b,0x215,0x166),'xEmNs':function(_0x5ccd63,_0x114a9f){return _0x5ccd63(_0x114a9f);},'gEZJk':function(_0x4a000c,_0x2b9577){return _0x4a000c(_0x2b9577);}};function _0x41c5b3(_0x257858,_0x50410d,_0x2e69f2,_0xe56bbd){return _0x54da(_0x257858-0x1b8,_0x50410d);}const {id:_0x1dddf9,prompt:_0x416f74,width:_0x309c96,height:_0x1b995f,change:_0xb5750f}=_0xe2cf7a;addLog(_0x152e36(0x1d7,0x1c1,0x1af,0x1c8)+'ID:\x20'+_0x1dddf9+(_0x152e36(0x1cc,0x1cf,0x19b,0x148)+':\x20')+_0x416f74+(_0xb5750f?_0x41c5b3(0x26b,0x240,0x2d8,0x216)+'\x20'+_0xb5750f:''));if(_0xb5750f&&_0xb5750f[_0x152e36(0x222,0xc6,0x179,0x139)](_0x2ae3c8[_0x41c5b3(0x352,0x331,0x312,0x2f8)])){if(_0x2ae3c8[_0x41c5b3(0x2db,0x35d,0x29c,0x33e)](_0x41c5b3(0x3ba,0x329,0x420,0x424),_0x2ae3c8[_0x41c5b3(0x28e,0x24d,0x1f3,0x2f4)]))_0x2ae3c8[_0x152e36(0x17a,0x1a3,0x1a4,0x199)](_0x3afd61,_0x41c5b3(0x2c1,0x209,0x35c,0x33e)+'face\x20为开启'),_0x332bff=_0x2ae3c8['hfZaW'](_0x2a6e15,_0x386d5e,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x2ae3c8[_0x152e36(0x267,0x1fd,0x2a2,0x1ee)]}]}}});else{_0x2ae3c8[_0x41c5b3(0x257,0x2b5,0x288,0x20d)](bananaGenerate,_0xe2cf7a);return;}}if(_0xb5750f&&_0xb5750f['includes'](_0x2ae3c8['qDZNs'])){if(_0x2ae3c8[_0x41c5b3(0x2e1,0x32e,0x23a,0x333)](_0x41c5b3(0x309,0x388,0x2f0,0x32c),_0x152e36(0x11a,0xe1,0x15a,0x107)))_0x359853[_0x152e36(0x24b,0x26d,0x25d,0x1d2)+_0x246f9d+_0x152e36(0x184,0x1dc,0x198,0x243)]&&(_0x39e502=_0x2ae3c8['jKKLW'](_0x2ae3c8[_0x152e36(0x1c7,0x1ef,0x248,0x1ec)](_0x1f7975,',\x20'),_0x1f04f3(_0x4b2d1e[_0x152e36(0x204,0x21c,0x25d,0x1d0)+_0x5876fc+_0x41c5b3(0x2a0,0x2f0,0x1e5,0x221)])));else{_0x2ae3c8[_0x41c5b3(0x2ac,0x302,0x2cf,0x2ba)](bananaGenerate,_0xe2cf7a);return;}}function _0x152e36(_0x2fb125,_0xf72d15,_0x5c9347,_0x2d348a){return _0x54da(_0x5c9347-0xb0,_0x2fb125);}try{if(_0x2ae3c8[_0x41c5b3(0x29b,0x239,0x2ca,0x336)](_0x152e36(0x2a5,0x2af,0x24e,0x1fc),_0x2ae3c8['BwGnd'])){const _0x42248f=_0x4ffc7b[_0x41c5b3(0x316,0x26b,0x27d,0x284)](_0x3d9ed7);_0x4249fe=_0x42248f[_0x152e36(0x1be,0x211,0x253,0x1e6)][-0x9*0x38+0x16cc+-0x14d4];}else{const {image:_0x33b2c3,change:_0x4da6ca}=await _0x2ae3c8['sHkbZ'](generateSDImage,{'prompt':_0x416f74,'width':_0x309c96,'height':_0x1b995f,'change':_0xb5750f});if(_0x2ae3c8[_0x41c5b3(0x2e7,0x315,0x30d,0x352)](extension_settings[extensionName][_0x152e36(0x245,0x1ab,0x21c,0x202)],'0')){if(_0x2ae3c8[_0x152e36(0x278,0x24b,0x1d3,0x165)](_0x2ae3c8[_0x152e36(0x17c,0x12d,0x1d7,0x13f)],_0x152e36(0x237,0x23d,0x272,0x254)))for(let _0x54ac78=0x1*0x1ab1+-0xd*0x35+-0x17ff;_0x2ae3c8[_0x41c5b3(0x337,0x2e0,0x2be,0x2dd)](_0x54ac78,0x12c8*-0x1+0xf34*0x1+0x398);_0x54ac78++){_0x575d29[_0x152e36(0x313,0x25c,0x25d,0x1a0)+_0x54ac78+_0x41c5b3(0x2a0,0x314,0x297,0x289)]&&(_0x3e60d3=_0x2ae3c8[_0x152e36(0x276,0x1c6,0x241,0x1c5)](_0x2ae3c8[_0x41c5b3(0x342,0x2ea,0x29b,0x393)](_0x413c35,',\x20'),_0x2ae3c8[_0x152e36(0x198,0x148,0x1a4,0x115)](_0x527161,_0x358667[_0x152e36(0x29e,0x1c4,0x25d,0x282)+_0x54ac78+_0x152e36(0x178,0x1ce,0x198,0x117)])));}else{const _0x4364eb={};_0x4364eb[_0x41c5b3(0x383,0x2da,0x3cf,0x3bf)]=_0x4da6ca,await _0x2ae3c8[_0x152e36(0x1c7,0x235,0x18e,0x246)](setItemImg,_0x416f74,_0x33b2c3,_0x4364eb),_0x2ae3c8['yBVWT'](addLog,_0x152e36(0x23c,0x1bb,0x1ad,0x13c)+'or\x20prompt:'+'\x20'+_0x416f74);}}else _0x2ae3c8['sHkbZ'](addLog,_0x152e36(0x1c1,0x211,0x17f,0x23b)+'库');const _0x3e98c7={};_0x3e98c7['id']=_0x1dddf9,_0x3e98c7[_0x41c5b3(0x340,0x284,0x30c,0x307)]=!![],_0x3e98c7['imageData']=_0x33b2c3,_0x3e98c7['prompt']=_0x416f74,_0x3e98c7[_0x41c5b3(0x383,0x39f,0x3e0,0x3df)]=_0x4da6ca,eventSource[_0x152e36(0x249,0x272,0x292,0x26a)](EventType[_0x152e36(0x2f6,0x2b3,0x290,0x22f)+'MAGE_RESPO'+_0x152e36(0x161,0x164,0x1ef,0x26f)],_0x3e98c7),addLog(_0x152e36(0x162,0x10c,0x18a,0x133)+_0x41c5b3(0x300,0x36d,0x27a,0x306)+_0x1dddf9+')');}}catch(_0x2e825d){if(_0x2ae3c8[_0x41c5b3(0x2e1,0x267,0x230,0x2aa)](_0x2ae3c8[_0x41c5b3(0x2d1,0x25a,0x2d7,0x289)],_0x41c5b3(0x31d,0x37f,0x39a,0x368))){const _0x1a2b1='SD生图流程捕获到异'+'常\x20(ID:\x20'+_0x1dddf9+_0x152e36(0x142,0xc2,0x17d,0x205)+_0x2e825d['message'];_0x2ae3c8['xEmNs'](addLog,_0x152e36(0x32a,0x2b9,0x2af,0x337)+_0x1a2b1),console[_0x41c5b3(0x2c3,0x284,0x327,0x28b)]('Error\x20gene'+_0x152e36(0x294,0x325,0x26e,0x1c2)+_0x152e36(0x2b8,0x2b8,0x268,0x1af),_0x2e825d);const _0x333d69={};_0x333d69['id']=_0x1dddf9,_0x333d69[_0x41c5b3(0x340,0x32c,0x2b1,0x2a6)]=![],_0x333d69['error']=_0x2e825d[_0x41c5b3(0x382,0x36a,0x439,0x31a)],_0x333d69['prompt']=_0x416f74,eventSource['emit'](EventType['GENERATE_I'+_0x152e36(0x2a7,0x1a8,0x1e8,0x1fa)+'NSE'],_0x333d69),_0x2ae3c8[_0x41c5b3(0x37c,0x40b,0x35c,0x402)](addLog,'发送SD生图失败响应'+_0x41c5b3(0x300,0x390,0x287,0x27d)+_0x1dddf9+')');}else{if(_0xf9c7ec){const _0x4eb63a=_0x48cbb3[_0x152e36(0x243,0x1dd,0x19c,0x1cd)](_0x41381c,arguments);return _0x333874=null,_0x4eb63a;}}}}function initializeSDListener(){const _0x3fbbda={'gciez':function(_0x5267e6,_0x2e68a7){return _0x5267e6(_0x2e68a7);}};eventSource['on'](EventType[_0x11d833(-0x70,0x19,-0x4a,0x2d)+_0x112517(0x7f,0xc,0x128,-0x26)+'ST'],sdGenerate);function _0x11d833(_0x51f5c7,_0xf9b6b5,_0x1a5d1f,_0x16a648){return _0x54da(_0x16a648- -0x1b3,_0x1a5d1f);}function _0x112517(_0x5e8dd3,_0x5f1550,_0x18e0cb,_0x1968a1){return _0x54da(_0x5e8dd3- -0xac,_0x5f1550);}_0x3fbbda[_0x112517(0xea,0x8d,0x7b,0x186)](addLog,_0x112517(0x47,0x76,0x3d,-0x6f)+_0x11d833(0x3b,0xde,0x7a,0x23));}export async function replaceWithSd(){const _0x56cd86={'JzTmI':function(_0x304e20,_0x5adb7b){return _0x304e20(_0x5adb7b);},'Urpma':function(_0x470953){return _0x470953();},'PbINL':'puGHZ','Kbfnv':_0x4f348f(-0xb9,-0x65,-0xeb,-0x53),'nZzyd':function(_0x27208a,_0x50c0da){return _0x27208a(_0x50c0da);},'nucJr':_0x4f348f(-0xd3,-0x60,-0x177,-0x4e)+_0x4f348f(-0x118,-0x1d0,-0x7f,-0x162)};function _0x4f348f(_0x309d25,_0x2130cd,_0x16b94b,_0x5f3a6a){return _0x54da(_0x309d25- -0x1c6,_0x5f3a6a);}function _0x3e249b(_0x462255,_0x51f276,_0x1c980a,_0x1872d7){return _0x54da(_0x1c980a- -0x3de,_0x462255);}if(extension_settings[extensionName][_0x3e249b(-0x286,-0x2b7,-0x259,-0x2b5)]=='sd')!window[_0x3e249b(-0x353,-0x290,-0x33b,-0x3ed)+_0x3e249b(-0x3c7,-0x293,-0x31a,-0x39f)]&&(window[_0x4f348f(-0x123,-0x9b,-0x10d,-0xc4)+'SDListener']=!![],_0x56cd86[_0x3e249b(-0x39a,-0x2ed,-0x31f,-0x305)](initializeSDListener)),_0x56cd86['Urpma'](initializeImageProcessing);else{if(_0x56cd86[_0x3e249b(-0x216,-0x1cf,-0x215,-0x17c)]===_0x56cd86[_0x3e249b(-0x2d4,-0x312,-0x277,-0x304)]){_0x56cd86[_0x4f348f(-0xc4,-0x10e,-0xac,-0x117)](_0x4054b3,_0x496f97);return;}else window[_0x4f348f(-0x123,-0x157,-0x1c7,-0xfd)+_0x4f348f(-0x102,-0x104,-0x78,-0xb9)]&&(eventSource[_0x3e249b(-0x21c,-0x23c,-0x261,-0x2c5)+_0x4f348f(-0xd4,-0x158,-0x16e,-0x160)](EventType['GENERATE_I'+'MAGE_REQUE'+'ST'],sdGenerate),window[_0x3e249b(-0x3cf,-0x3eb,-0x33b,-0x346)+_0x4f348f(-0x102,-0xb1,-0x122,-0x13c)]=![],_0x56cd86[_0x4f348f(0x48,-0x56,0x56,0x3e)](addLog,_0x56cd86[_0x4f348f(-0xbc,-0x13b,-0xe2,-0x83)]));}}