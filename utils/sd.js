function _0x3787(){const _0x54de14=['lI4U','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','CuX3tNe','otzgAvHmyxG','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','q2L6ru8','C2rFy2nSAxbFCW','ExvZAgvPzf9Zza','y2XPzw50','EgLHBMnOzw5Nia','q3viuhG','Aw1Hz2veyxrH','C2rFy2HLAwDODa','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','6lsF6z2I5lI6oIa','yxrFBgfZDf9Syq','zw5HyMXLx2HYia','mZyXnZzVte1ltLO','ExDSq0W','cI0GkIRPH43NU5JLUyxLUQyG','z1LRAgi','rgXMuuu','yxbWBhK','oe93Dujhta','CgfYC2u','Aw5JBhvKzxm','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','5BEY5yID5AEl5yYw44cc','C2rFy3vWC2nHBa','l2fWAs9Zzc9Zzq','y2vZioIeUoMdQos/RUwKJsdKUlO','sxzUuxi','C3rHDhvZ','uw9uuhu','y2vZ','zgDswxa','B3iGChjVBxb0oG','sxvUsge','vw1IuwO','Dgv4Da','l3nKyxbPl3yXlW','sfDoEui','5BI4icHjrdOG','cI0GkIRNP43LRzaGkfm','teXIwMy','zxjYB3i','ktOQkIa','C2rFy2HPCMvZxW','AxnuyxnRsw5rDq','5Q2J5zYO6k6+572U5QIH5z6l5lI6','mtiXmtu5nwTsswfvqG','tufhrv9srvfvrq','Cgf5Bg9Hza','zgvkyuC','CuHoq1G','u0rmAxn0zw5LCG','zKfmv2W','BfHgyxu','C2rFy3nLzwq','CMf0Aw5Nifneia','zunjDKi','C3rYzw5NDgG','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','44cc5zon5BQu5yAf5A65oIa','zxH0zw5ZAw9UxW','l3bUzZTIyxnLnG','uenjvMy','CgLYvvq','wfHWveS','C2rdzMDty2fSzq','C2rvCMW','D3vkA3m','r0vorvjbvevFsq','Bwjgyue','CeDAEue','Aw5PDgLHBgL6zq','C3rFy2HHDhu4xW','of9Zyw1WBgvYtG','BMvYyxrPB24','Dhj1zq','ywrKvgfZAW','twnNCfu','56cboIa','ywX3yxLZB25FCW','mtC0nZa4EM5OBvDR','EgLHBMnOzw5N','nJbVAgfPy2m','q2zVr1G','DhjPBq','6zsz6k+VoIa','5BEY5ywZ6zET44cc','y29TCgXLDgvuyq','CMvZDg9Yzv9Myq','sLnptIdOP6pMNPdLPlhOTkxVViW','kIOG','zgvUB2LZAw5NxW','wgzVru8','cI0GkIRMLl7LPkFLGi3NJOCG','zKL6wfC','CMvTB3zLtgLZDa','ChvJweW','tufhrv9srvnqtW','thz6v3a','CwHwve8','5lI6Dhj1zq','rxjYB3iGz2vUzq','77Ym6k+35Qoa5P+LC2r3zwj1','qxjhuw8','Aw5Nx3n0CMvUzW','yMr5DLy','vgDvv0q','zty0ioAvSoAnRUwKHoEqHUoaGG','cI0TlqOGicaG','cI0GkIRLSlRLR7GGkfm','C0D5B2G','y1rnC0y','y2fSztOQkIa','zgnKrwG','DLjtsgS','5yop5PwW5O2U44cc','v1nmA2e','C2rFy3n0zxbZ','EKfHrNu','zML4','AgvPz2H0','Dg9tDhjPBMC','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','cI0GkIRPH4FMOlFMLRNMS5uG','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','kerPDMLKzv9YBW','uKjMvM0','DuTYDNG','u2TPCdOQkIa','Df9LBMq','Aw1Hz2vhzw5jBG','DwjQCMG','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','vunqx3nK','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','DgvWCYK6kIOG','l2fWAs9Zzc9Nzq','v2Dlu3O','zev1tK4','kfnHBxbSzxiPoG','yxv0B191CMW','qwrjBLG','C2rFy2nOyxr1xW','Dg9Rzw4','seDHtKK','wLjYCKK','zgf0ytPPBwfNzq','yxjNCW','u0qGqvbjioI/LowBNUMuMq','kcGOlISPkYKRkq','DKjzuNK','t0PkwLy','5yIh5O2I5QIH5z6l5AsX6lsLoIa','AML1z3vHBG','5lU75yQH5BEY5y+w5RAi','cI0GkIPwquu6kG','ywrFBw9KzwW','icHjrdOG','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','D2LKDgG','cI0GkIROTj/PNAlMJ5dNPlOG','BgvY','q0Xjuf9ZDg9WxW','B3Dkr1a','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','5yYw5lI6igrHDgeGvvi','y2fJAgu','vxbss0S','B2rLBcK6kIOG','vgzLy00','teD3ugS','BwvZC2fNzq','CMvZDg9YzuzHyW','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','C2rFDMfL','C2rFyxv0Aa','C3vIC3rYAw5N','C3rYAw5NAwz5','ic0Gq2HHBMDLoG','ke5Lz2f0AxzLia','Bg9Hza','ChnkDuK','ANnVBG','qw92sMq','zNnSAfa','y29UC3rYDwn0BW','DhLvEMm','of9Zy2HLzhvSzq','BgvZktOG','u2nLBMuGq29TCa','Cvv1u0i','vxrsANy','qLjHtNC','zw5LCG','B2voB1C','zerMywy','C2v0DgLUz3nZlG','ywn0B3iPoIOQia','Bwj1q0u','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','zM9NDKq','y3jPChrZ','keHPCMvZiezPEa','6k+V44cc54Q25Ocb56cboIa','E+s/RUwBVN0','kfjLC3rVCMuGrG','AhLStxO','of92ywu','yxv0Aa','zML4zwrqCM9TCa','C3rHDhvZvgv4Da','Aw1Hz2u6','s0j4EhC','5zon5BQu5yAf5A65oG','vw5NqLu','5Q2J6z2I5O+q56s6icHqCM9T','Dc1TB2rLBa','6i635y+w5QIH5z6l5AsX6lsLoIa','ifn0CMvUz3rOkq','C3bSAxq','CMr4wLi','r1nkqui','qurLDgfPBgvY','6zQp5PY6kc0Xkq','C2vLza','C2vHCMnO','mty1mZmZA21xtfj4','nJaYntu4mwnXugvfwa','u292r3G','thLxsMy','CgHMweq','tMDlC0u','6AUy5RIf5l+U5Asnios4UG','zw1PDa','mNWZFdf8nxWWFa','uNrftha','C2r3zwj1AEEuN+wBVUwpGG','EuXWsLm','zMfJzsdKUlRLVidLKk8','twf0zvG','tNvYsvO','Aef6tva','uuL2vKq','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','ChqPoIOQia','zMfJzv95B2XVDG','AMDuBhK','6k6+572U5QIH5z6llI4U5lI6','B21WDa','EvjpDuO','wu5VB3i','u3DZzeS','C2rFy3DPzhrO','C3rLChm','Bg9N','og4UChq','DhH0mMLTzW','C2rFC3rVCf9Nzq','DgvYDMfS','rwzrEK0','wu1lDhy','Aw1Hz2u','CNDjqKi','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','ue9tva','nZmWmtaYAgjhC0Xy','v2T1swW','vvzZzLi','v2DKEMq','zfL6CfO','cI0GkIRPQ5JMUixKV67LPi0G','v0Txtha','AhjFC2nHBgu','5BcD6k+v5l2C5lI65y6F5AEliejHCW','44cc6k+35Qoa5P+LC2r3zwj1','Bw9KzwW','of9TB2rLBa','DxjS','EKzbAvq','tLnf','Cgf5C3rFy2HHDa','ktOG','z3PHA2C','ExvZAgu','C2rFy2fKzxrHAq','kerLBM9PC2LUzW','BMvNyxrPDMvqCG','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','cI0GkIRMRAxMLBaGkfm','uu1wC2i','C3vJy2vZCW','DuPXAuK','of91ChnJywXLCG','r09rBwW','AgDcCgq','q2HHCMfJDgvYia','Aw1Hz2vZ','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','B3zLCNjPzgvFCW','ifbYB21WDa','y2zNx3nJywXL','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','zM5LEue','loAOOEwEI+s4UG','55sO5lQo55sF5OIq55QevgfNoIa','C2tOR7FMSylNLj/LM77PLjNOR686ia','mte3mJuZnJbmBuTsteW','ChzWDNq','mJiYmG','y2HHBMDL','AfbRtg0','CMf0Aw5NigLTyq','C2fTCgXLCL9Uyq','Exbzvey','zv9Mywn0B3i','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','Aw5MBW','ChjVBxb0','B3nPDgLVBG','5lIT55QeihbYB21WDooaGG','yxbWBgLJyxrPBW'];_0x3787=function(){return _0x54de14;};return _0x3787();}(function(_0x23c36e,_0x1e0494){const _0x5b056c=_0x23c36e();function _0x56b81f(_0x40b91c,_0x27baaf,_0x59139c,_0x3ae471){return _0x198e(_0x27baaf- -0xab,_0x3ae471);}function _0x152fdc(_0x30e21b,_0x1ac730,_0x49c44a,_0x27b00f){return _0x198e(_0x1ac730- -0x3a8,_0x30e21b);}while(!![]){try{const _0x9372b3=parseInt(_0x152fdc(-0x107,-0x199,-0x150,-0x203))/(-0xb2c+-0x1fe4+0x13b*0x23)+-parseInt(_0x56b81f(0x1c,0xab,0x11e,0x145))/(0xdf+0x3*0x2d5+-0x95c)+-parseInt(_0x152fdc(-0x1ea,-0x1c0,-0x163,-0x1cd))/(0x4*0x241+0x16b3+-0x1fb4)*(parseInt(_0x152fdc(-0x286,-0x250,-0x2d9,-0x266))/(0x110*0x11+-0x1*0x887+0x1*-0x985))+parseInt(_0x152fdc(-0x18c,-0x12f,-0x1a9,-0x112))/(-0x21d3+0x8f4+0x18e4)+parseInt(_0x56b81f(0x230,0x19f,0x1ec,0x1fc))/(0x1dc5+-0x12*0x4+0x1*-0x1d77)*(-parseInt(_0x56b81f(0x111,0x1ad,0x167,0x1d5))/(0x2086+0x81*-0x3a+0x3*-0x117))+parseInt(_0x152fdc(-0xea,-0x14a,-0x13a,-0x13f))/(-0x1ecf+-0x1e4c+0x3d23)*(-parseInt(_0x56b81f(0x157,0x13e,0x1b7,0x14f))/(0x29d+-0x4d3*-0x1+-0x767))+parseInt(_0x56b81f(0x123,0x18d,0x142,0x20c))/(0x1e19+0x247+0x2056*-0x1);if(_0x9372b3===_0x1e0494)break;else _0x5b056c['push'](_0x5b056c['shift']());}catch(_0x5c5e3e){_0x5b056c['push'](_0x5b056c['shift']());}}}(_0x3787,-0x9b*0x3d9+-0x95da*-0x7+0x58982));const _0x3386e6=(function(){const _0x120d68={};_0x120d68['ywlCL']='MsWDP';const _0x1d5d1e=_0x120d68;let _0x5acafd=!![];return function(_0x5ad5bf,_0x3d917e){const _0x58639a={};_0x58639a['cyAqx']=_0x3819cd(0x46e,0x3fa,0x3d8,0x42e)+'rating\x20SD\x20'+_0x3819cd(0x4d7,0x4a0,0x4de,0x49c),_0x58639a[_0xce41c5(-0x265,-0x18f,-0x226,-0x2a3)]=_0x1d5d1e[_0x3819cd(0x4a5,0x507,0x52b,0x51c)];const _0x16b8b2=_0x58639a,_0x34eeca=_0x5acafd?function(){function _0x2d9c11(_0x1b6d3f,_0x5422b6,_0x428fec,_0x1d4005){return _0xce41c5(_0x1b6d3f-0x1e2,_0x5422b6-0x92,_0x1b6d3f-0x383,_0x1d4005);}const _0x400f73={'TJQlA':function(_0xb5823f,_0x57a9bb){return _0xb5823f(_0x57a9bb);},'SovGx':_0x16b8b2['cyAqx']};function _0x2471dc(_0x2f103f,_0x483af5,_0x43ff48,_0x3b7d4a){return _0xce41c5(_0x2f103f-0xf4,_0x483af5-0x112,_0x43ff48-0x40d,_0x3b7d4a);}if(_0x16b8b2[_0x2d9c11(0x15d,0x113,0xe7,0x144)]===_0x2471dc(0x1fd,0x1c7,0x262,0x1ff)){const _0x3d659a=_0x2d9c11(0x20d,0x1ab,0x24f,0x17b)+_0x2d9c11(0x285,0x310,0x2cc,0x297)+_0x53f222+_0x2d9c11(0x233,0x2c2,0x290,0x1b8)+_0x174f66[_0x2d9c11(0x1c5,0x13a,0x243,0x1a3)];_0x400f73['TJQlA'](_0x596c50,'错误:\x20'+_0x3d659a),_0x2e446c[_0x2471dc(0x3a4,0x33b,0x312,0x28b)](_0x400f73[_0x2471dc(0x2cd,0x2ce,0x288,0x29a)],_0x222bae);const _0x359544={};_0x359544['id']=_0x5e3551,_0x359544[_0x2d9c11(0x23c,0x1d7,0x24b,0x2bb)]=![],_0x359544[_0x2471dc(0x336,0x364,0x312,0x29e)]=_0x2d7b01['message'],_0x359544[_0x2d9c11(0x257,0x263,0x1fa,0x1f7)]=_0x4958f5,_0xdd5778[_0x2471dc(0x225,0x248,0x28d,0x222)](_0x4346e6['GENERATE_I'+'MAGE_RESPO'+_0x2d9c11(0x231,0x19c,0x2ab,0x24c)],_0x359544),_0x495d18(_0x2471dc(0x33d,0x25e,0x2cd,0x2b8)+_0x2471dc(0x1e5,0x276,0x241,0x2c0)+_0x5572f8+')');}else{if(_0x3d917e){const _0x39746d=_0x3d917e[_0x2471dc(0x36a,0x38c,0x2fb,0x2fb)](_0x5ad5bf,arguments);return _0x3d917e=null,_0x39746d;}}}:function(){};function _0xce41c5(_0x2b4725,_0x3b5fe6,_0x4575f7,_0x36e60f){return _0x198e(_0x4575f7- -0x36f,_0x36e60f);}_0x5acafd=![];function _0x3819cd(_0x2e4ba6,_0x4458a6,_0x151715,_0x4fddc0){return _0x198e(_0x4fddc0-0x2c3,_0x2e4ba6);}return _0x34eeca;};}()),_0x358374=_0x3386e6(this,function(){const _0x452211={};_0x452211[_0x370822(0x279,0x1b8,0x1ff,0x1e2)]=_0x32beba(0x26d,0x2c1,0x337,0x332)+'+$';const _0x593216=_0x452211;function _0x32beba(_0x362d4d,_0xc55d4b,_0x12eb1b,_0x4d3472){return _0x198e(_0xc55d4b-0x126,_0x12eb1b);}function _0x370822(_0x802a0,_0x52f702,_0x3a65b1,_0x4a27c5){return _0x198e(_0x3a65b1-0x44,_0x802a0);}return _0x358374[_0x370822(0x188,0x214,0x1c3,0x25f)]()['search'](_0x370822(0x1a5,0x1b2,0x1df,0x140)+'+$')['toString']()[_0x370822(0x182,0x283,0x203,0x165)+'r'](_0x358374)['search'](_0x593216[_0x370822(0x1b8,0x1a7,0x1ff,0x1c8)]);});_0x358374();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;function _0x198e(_0x5420fe,_0x2986b9){_0x5420fe=_0x5420fe-(0x1*-0x583+0x7*-0x2b0+0x1992);const _0x58ab9f=_0x3787();let _0x4e5200=_0x58ab9f[_0x5420fe];if(_0x198e['NVsfZY']===undefined){var _0x5721a9=function(_0xcb2f10){const _0x3f5451='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1e5b42='',_0x2eef78='',_0x3b964a=_0x1e5b42+_0x5721a9;for(let _0x389bef=0x92f*-0x1+0x2052+-0x1723,_0x142c6d,_0x1cc6ea,_0x3b7c65=-0x2f1+-0x259*0x9+-0x806*-0x3;_0x1cc6ea=_0xcb2f10['charAt'](_0x3b7c65++);~_0x1cc6ea&&(_0x142c6d=_0x389bef%(0x11ff+-0x18a7+0x6ac)?_0x142c6d*(0x1*0x1a6b+-0x9*-0x23b+0xf6a*-0x3)+_0x1cc6ea:_0x1cc6ea,_0x389bef++%(0x4db+-0xbf1+0x71a))?_0x1e5b42+=_0x3b964a['charCodeAt'](_0x3b7c65+(-0x419*0x6+-0xa45+0x1*0x22e5))-(-0x1fe3*0x1+-0x135+0x1*0x2122)!==0xb*0x266+0xa0f+-0x2471?String['fromCharCode'](0x1521+0x2129+-0x354b&_0x142c6d>>(-(-0x1e04+0x1*0x238f+-0x589)*_0x389bef&-0x5e*0x2b+0x50*0xf+-0x59*-0x20)):_0x389bef:0x1*0x58a+-0x31*0xb+-0x36f*0x1){_0x1cc6ea=_0x3f5451['indexOf'](_0x1cc6ea);}for(let _0x4122e4=-0x200f+-0x280*-0xc+-0x11*-0x1f,_0x1d39ed=_0x1e5b42['length'];_0x4122e4<_0x1d39ed;_0x4122e4++){_0x2eef78+='%'+('00'+_0x1e5b42['charCodeAt'](_0x4122e4)['toString'](-0x1*-0x1f46+-0x1743+0x7f3*-0x1))['slice'](-(0x5*0x4e1+0x243d+0x794*-0x8));}return decodeURIComponent(_0x2eef78);};_0x198e['hunbdq']=_0x5721a9,_0x198e['mbQxoD']={},_0x198e['NVsfZY']=!![];}const _0x379bca=_0x58ab9f[-0x2689+-0xc*-0x222+0x1*0xcf1],_0x3b67b6=_0x5420fe+_0x379bca,_0x5c1374=_0x198e['mbQxoD'][_0x3b67b6];if(!_0x5c1374){const _0x49ea8b=function(_0x28a4fc){this['AvbaYG']=_0x28a4fc,this['PMKvGg']=[0xb65*0x1+0x172c+0x38*-0x9e,-0x1c70+-0x26f1+-0x1*-0x4361,0x6e7+-0x3c+-0x6ab],this['IQUgVu']=function(){return'newState';},this['PaPQmr']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['pNcDjr']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x49ea8b['prototype']['laLMPm']=function(){const _0xf88085=new RegExp(this['PaPQmr']+this['pNcDjr']),_0x480cec=_0xf88085['test'](this['IQUgVu']['toString']())?--this['PMKvGg'][-0x2*0xda+-0x1*-0x493+-0x1*0x2de]:--this['PMKvGg'][-0xac4*-0x1+-0x2367+-0x18a3*-0x1];return this['CdRQfU'](_0x480cec);},_0x49ea8b['prototype']['CdRQfU']=function(_0x34b809){if(!Boolean(~_0x34b809))return _0x34b809;return this['uulShJ'](this['AvbaYG']);},_0x49ea8b['prototype']['uulShJ']=function(_0x51fe29){for(let _0x1435cb=-0x1*0xa36+0x23cb*0x1+-0x1995,_0x1dc597=this['PMKvGg']['length'];_0x1435cb<_0x1dc597;_0x1435cb++){this['PMKvGg']['push'](Math['round'](Math['random']())),_0x1dc597=this['PMKvGg']['length'];}return _0x51fe29(this['PMKvGg'][0x20df+0x1f3*0xd+-0x3a36]);},new _0x49ea8b(_0x198e)['laLMPm'](),_0x4e5200=_0x198e['hunbdq'](_0x4e5200),_0x198e['mbQxoD'][_0x3b67b6]=_0x4e5200;}else _0x4e5200=_0x5c1374;return _0x4e5200;}async function generateSDImage({prompt:_0x487a38,width:_0x5a33cb,height:_0x17ccda,change:_0x2d8e56}){const _0xf95815={'ArGQo':_0x25978f(0x3af,0x32e,0x36c,0x3e9)+_0x51dcfe(-0x135,-0x11a,-0xde,-0xba),'McgpU':function(_0x35143c,_0x3523b0){return _0x35143c(_0x3523b0);},'dEuNN':_0x25978f(0x4c5,0x44e,0x48d,0x496),'CfoGX':_0x25978f(0x465,0x4c9,0x433,0x396)+_0x25978f(0x393,0x2f0,0x37c,0x398),'WkuIl':_0x51dcfe(-0x219,-0x17e,-0x200,-0x18c)+_0x51dcfe(-0x1d0,-0x20b,-0x1e4,-0x1ca),'DlfQE':function(_0x549665,_0x19f4ff){return _0x549665(_0x19f4ff);},'gzakg':_0x25978f(0x38c,0x410,0x3c7,0x447)+'+$','TgUWD':function(_0x5b4c6b,_0x1dc156){return _0x5b4c6b+_0x1dc156;},'bkfde':function(_0x2589a9,_0x43f1e4){return _0x2589a9(_0x43f1e4);},'yROuJ':_0x51dcfe(-0x11e,-0x121,-0xf0,-0x17d)+_0x25978f(0x326,0x314,0x396,0x300),'dcdEh':'Error\x20gene'+_0x25978f(0x3ec,0x3f3,0x469,0x4c7)+'ge:','phfXD':function(_0x359c79,_0x17c84c){return _0x359c79===_0x17c84c;},'YMKtv':function(_0x10ea2d){return _0x10ea2d();},'oeNoW':'...','ubjrh':_0x25978f(0x492,0x356,0x3ef,0x3ba)+_0x51dcfe(-0x7f,-0x14d,-0xfc,-0x85),'hPkLm':function(_0x40d78b,_0xedd1e1){return _0x40d78b(_0xedd1e1);},'vRSHk':_0x25978f(0x505,0x400,0x480,0x515)+'坐标的提示词字符串。','UngBU':function(_0x568581,_0x3d64b3){return _0x568581<=_0x3d64b3;},'cTMsF':function(_0x1bb6da,_0x46f499){return _0x1bb6da!==_0x46f499;},'GSJAB':_0x25978f(0x3c5,0x446,0x460,0x445),'HWNyB':_0x25978f(0x3d2,0x421,0x3f2,0x3f3),'dYzpZ':function(_0x15c349,_0x35da50){return _0x15c349(_0x35da50);},'hAzMP':function(_0x3e3788,_0x3cbf22,_0x32c4ad,_0x451b75,_0x26dc2a,_0x4e34df){return _0x3e3788(_0x3cbf22,_0x32c4ad,_0x451b75,_0x26dc2a,_0x4e34df);},'vBYRy':function(_0x35d285,_0x547a4a,_0x5e4d89){return _0x35d285(_0x547a4a,_0x5e4d89);},'ZRrrI':function(_0x298dba,_0x656eab){return _0x298dba(_0x656eab);},'BPJdp':_0x25978f(0x3fe,0x392,0x3be,0x36f),'owJGP':function(_0x8d3eda){return _0x8d3eda();},'tyUzc':_0x51dcfe(-0x160,-0x230,-0x1fa,-0x185),'MateX':_0x51dcfe(-0x115,-0x19b,-0x1a1,-0x191),'mZBLC':_0x25978f(0x322,0x38b,0x3ba,0x37f)+_0x51dcfe(-0x171,-0x133,-0x162,-0x1f1),'pGZyA':_0x25978f(0x4cf,0x4b3,0x43a,0x4b2),'mbuCE':function(_0x1b068e,_0x31f97a){return _0x1b068e(_0x31f97a);},'qHNCX':'cmodel2222'+_0x51dcfe(-0xcd,-0x10b,-0x106,-0xee),'TfecM':_0x25978f(0x30a,0x313,0x36e,0x3f6)+_0x25978f(0x426,0x427,0x3f6,0x46e)+_0x25978f(0x3b2,0x3a9,0x3c0,0x401)+'8_model','Wgdzd':function(_0x12a626,_0x3065f4){return _0x12a626!=_0x3065f4;},'lrqeK':_0x51dcfe(-0xf4,-0x172,-0x14f,-0x163),'qLwNq':_0x51dcfe(-0x1b4,-0x123,-0x177,-0x155),'LyWJf':function(_0x47cb81,_0x107b2a){return _0x47cb81(_0x107b2a);},'UVsfR':function(_0x198537,_0x3e8016){return _0x198537(_0x3e8016);},'sGyoh':function(_0x58f157,_0xb829f1){return _0x58f157!==_0xb829f1;},'SwsdK':function(_0xdd6e12,_0x5ce23c){return _0xdd6e12(_0x5ce23c);},'rdxZR':function(_0x3e22c1,_0x344042){return _0x3e22c1>=_0x344042;},'NurIZ':function(_0x1f9f4f,_0x4cc390){return _0x1f9f4f===_0x4cc390;},'WSLka':_0x25978f(0x348,0x3d1,0x3dc,0x412),'izSNU':_0x25978f(0x457,0x3e9,0x457,0x3f6),'yLpJS':function(_0x1d5c53,_0x491373){return _0x1d5c53==_0x491373;},'XbBRd':function(_0x581fea,_0x2d61db){return _0x581fea(_0x2d61db);},'UpRKK':'adetailer_'+_0x51dcfe(-0x103,-0xc4,-0x14c,-0x10a),'lXFau':_0x25978f(0x4a6,0x45e,0x427,0x4be)+_0x51dcfe(-0xd4,-0xc5,-0x13b,-0x104),'ekAWd':_0x25978f(0x4ab,0x450,0x411,0x3e0),'YNoor':_0x25978f(0x377,0x3b1,0x37d,0x3a2),'yDkqn':function(_0x52cec4,_0xa751ec){return _0x52cec4(_0xa751ec);},'XLAhF':'running','PCIVf':function(_0x5f41ae,_0x5b51fb){return _0x5f41ae(_0x5b51fb);},'YGalE':_0x25978f(0x334,0x42c,0x3cc,0x450),'CcNSR':_0x51dcfe(-0xcc,-0x12b,-0x122,-0x80)+'u8_sd_auth'+_0x25978f(0x389,0x3fe,0x3e6,0x3f4),'EfQzM':function(_0x59e65d,_0x3ec749,_0x42d81f){return _0x59e65d(_0x3ec749,_0x42d81f);},'OYGrs':'/api/sd/ge'+'nerate','WKWLp':_0x25978f(0x496,0x492,0x496,0x4c8),'IunHa':function(_0x5994ae,_0x33977f){return _0x5994ae!==_0x33977f;},'zFAiT':'cltHy','uKrvx':_0x25978f(0x40f,0x497,0x424,0x46a),'gzQKF':function(_0x223670,_0x2e626a){return _0x223670===_0x2e626a;},'LvzWp':'ukyzC','jgTly':function(_0x38b458,_0x20c0c7){return _0x38b458(_0x20c0c7);},'NgKsE':_0x25978f(0x2f3,0x3c3,0x38b,0x423)+_0x25978f(0x477,0x3fa,0x443,0x424)+_0x25978f(0x32e,0x43b,0x39d,0x3ee),'CizEO':function(_0x515b09,_0x36eeb3){return _0x515b09(_0x36eeb3);},'HqNdl':function(_0x240f04,_0x4bc9a2){return _0x240f04!==_0x4bc9a2;},'pirUT':_0x25978f(0x438,0x4c9,0x458,0x480),'OJJZV':_0x25978f(0x30b,0x42b,0x3a8,0x430),'bdyvV':_0x51dcfe(-0x80,-0x8d,-0xd1,-0x137)+_0x25978f(0x471,0x435,0x432,0x469),'CuHPx':_0x25978f(0x462,0x413,0x472,0x514)+'n/json','MVYba':_0x25978f(0x3d6,0x343,0x392,0x30d),'uJqiI':'响应内容:','uUasl':function(_0x3daa66,_0x446c39){return _0x3daa66===_0x446c39;},'UmbQj':_0x25978f(0x3b6,0x352,0x3ae,0x42d)+_0x25978f(0x38f,0x40c,0x3a5,0x3a4),'WgKSz':_0x25978f(0x389,0x326,0x3c4,0x40c)+'/png;base6'+'4,','DAuuL':_0x25978f(0x3d6,0x4c2,0x46d,0x440)+_0x51dcfe(-0x14e,-0x228,-0x195,-0x16a)+'L。','QoTPu':function(_0x76f759,_0x123cc3){return _0x76f759(_0x123cc3);}};_0xf95815[_0x25978f(0x48b,0x3cf,0x436,0x483)](clearLog);const _0x3a3d69=taskQueue[_0x25978f(0x2f6,0x312,0x37e,0x3c0)]({'name':_0xf95815[_0x25978f(0x317,0x3aa,0x39c,0x3e1)]((_0x487a38||'')[_0x51dcfe(-0x11a,-0x213,-0x18a,-0x173)](0x469+0x901*-0x2+-0x1*-0xd99,-0x1*0x52f+0x439*0x8+-0x1c7b),_0x487a38&&_0x487a38['length']>0x650+-0x2298+0x1*0x1c66?_0xf95815[_0x51dcfe(-0x12f,-0x113,-0x178,-0x170)]:''),'type':TaskType['SD'],'prompt':_0x487a38});currentTaskId=_0x3a3d69;let _0x3ca640=_0x2d8e56;_0x487a38=_0xf95815['McgpU'](processCharacterPrompt,_0x487a38),_0x2d8e56=processCharacterPrompt(_0x2d8e56),_0x487a38=await _0xf95815[_0x51dcfe(-0x154,-0x28b,-0x1ed,-0x193)](stripChineseAnnotations,_0x487a38),_0x2d8e56=await stripChineseAnnotations(_0x2d8e56);const _0x3de90a=extension_settings[extensionName][_0x51dcfe(-0x1d2,-0x162,-0x1f8,-0x18f)][_0x51dcfe(-0x255,-0x252,-0x1e6,-0x152)](),_0x222c98=extension_settings[extensionName];_0xf95815[_0x51dcfe(-0x170,-0x190,-0x1ed,-0x1e8)](addLog,'正在通过sdwebu'+_0x51dcfe(-0x1e8,-0x1bf,-0x1b4,-0x12a)+'端为'+_0x222c98['client']+_0x25978f(0x4a4,0x440,0x461,0x3fc)+_0x222c98[_0x51dcfe(-0x1d9,-0x194,-0x1ac,-0x240)+'8_model']);const _0x183613=_0x2d8e56&&_0x2d8e56[_0x25978f(0x371,0x326,0x386,0x3e9)]()!==''?_0x2d8e56:_0x487a38;_0xf95815[_0x25978f(0x41a,0x31f,0x37f,0x31e)](addLog,_0x51dcfe(-0x183,-0x1ad,-0x10a,-0x153)+_0x183613);let _0x38a986=![];_0x183613[_0x25978f(0x52b,0x480,0x48c,0x474)](_0xf95815[_0x51dcfe(-0x1f3,-0x237,-0x1b7,-0x1cd)])&&(_0x38a986=!![]);_0xf95815[_0x25978f(0x3ac,0x3c0,0x37f,0x36a)](addLog,_0x51dcfe(-0x1a2,-0x13e,-0x133,-0x1ce)+_0x51dcfe(-0x1f6,-0x238,-0x1bd,-0x120)+_0x25978f(0x38f,0x3f4,0x3ee,0x3ab)+_0x38a986);let _0x28017c={},_0x3369a8='',_0xfdbe60='';if(_0x38a986){_0xf95815[_0x51dcfe(-0x1a7,-0xbc,-0x104,-0xc1)](addLog,_0xf95815[_0x25978f(0x407,0x3f7,0x3a4,0x381)]),_0x28017c=_0xf95815[_0x25978f(0x395,0x329,0x37f,0x368)](parsePromptStringWithCoordinates,_0x183613),_0x3369a8=_0x28017c[_0x25978f(0x406,0x480,0x3ef,0x3d5)+_0x51dcfe(-0x144,-0x14f,-0xfc,-0x90)];for(let _0x3f290a=0x1e01+0xc7*0x7+-0x2371;_0xf95815[_0x51dcfe(-0xec,-0xf9,-0x164,-0x11d)](_0x3f290a,-0x4c5*0x1+-0xa*0x281+0x1dd3);_0x3f290a++){_0xf95815[_0x25978f(0x407,0x459,0x418,0x404)](_0x51dcfe(-0x13d,-0x11c,-0x17b,-0x132),_0x51dcfe(-0x1a9,-0x12c,-0x182,-0xe0))?(_0x4b011a['on'](_0x5d80a7['GENERATE_I'+_0x51dcfe(-0x10c,-0xf3,-0xc6,-0x152)+'ST'],_0x1f10d4),_0x5d2390(_0xf95815[_0x51dcfe(-0x1ca,-0x1c5,-0x1d3,-0x20f)])):_0x28017c[_0x25978f(0x48a,0x3b7,0x459,0x434)+_0x3f290a+_0x25978f(0x487,0x48d,0x45d,0x3f5)]&&(_0xfdbe60=_0xf95815[_0x51dcfe(-0x157,-0x181,-0x1d0,-0x1f4)](_0xfdbe60+',\x20',_0x28017c['Character\x20'+_0x3f290a+_0x25978f(0x4f0,0x45f,0x45d,0x3bf)]));}}else{if(_0xf95815[_0x51dcfe(-0x196,-0x18b,-0x1cb,-0x1f7)](_0x51dcfe(-0x18a,-0x7d,-0x119,-0x1b9),_0xf95815[_0x51dcfe(-0x15d,-0x156,-0x15d,-0x134)]))_0xf95815[_0x25978f(0x3d1,0x4e5,0x468,0x402)](addLog,'标准模式:\x20使用请求'+_0x51dcfe(-0xa9,-0x7d,-0xfb,-0x12e)),_0x3369a8=_0x183613;else{_0xf95815['McgpU'](_0x215a4b,_0xf95815[_0x51dcfe(-0x168,-0x21c,-0x1b0,-0x145)]),_0xc2ec53['emit'](_0xf95815['CfoGX']);throw new _0xa1d995(_0x25978f(0x399,0x451,0x3cc,0x38c));}}let {modifiedPrompt:_0x2a6630,insertions:_0x4b9b24}=await prompt_replace(_0x3369a8,_0xfdbe60);if(_0x38a986)for(let _0x5b1aa3=-0x1999+-0xeba+-0xb2*-0x3a;_0x5b1aa3<=0x6d3*0x5+0x14a6+0x83*-0x6b;_0x5b1aa3++){_0x28017c[_0x51dcfe(-0xee,-0x8b,-0x113,-0xd2)+_0x5b1aa3+'\x20Prompt']&&(_0x51dcfe(-0xfe,-0xb2,-0xda,-0xd6)!==_0xf95815[_0x51dcfe(-0x44,-0xbf,-0xd0,-0x73)]?_0x2a6630=_0xf95815[_0x51dcfe(-0x1fe,-0x23c,-0x1d0,-0x154)](_0x2a6630,',\x20')+_0xf95815['dYzpZ'](prompt_replace_for_character,_0x28017c[_0x51dcfe(-0xaf,-0xcf,-0x113,-0x16f)+_0x5b1aa3+_0x51dcfe(-0x112,-0xf5,-0x10f,-0x1ac)]):(_0x687a3e[_0x25978f(0x2fe,0x324,0x379,0x41b)+_0x25978f(0x44a,0x4dd,0x4aa,0x461)]=!![],_0x590db7()));}let _0x569d0d=await _0xf95815[_0x25978f(0x3b0,0x483,0x423,0x47c)](zhengmian,extension_settings[extensionName][_0x51dcfe(-0x7e,-0x12f,-0x11f,-0x90)][extension_settings[extensionName][_0x25978f(0x512,0x45f,0x47a,0x4f2)]][_0x51dcfe(-0xf0,-0x1a7,-0x169,-0xdc)+'t'],_0x2a6630,extension_settings[extensionName][_0x25978f(0x3ff,0x466,0x44d,0x41e)][extension_settings[extensionName][_0x25978f(0x3fa,0x4de,0x47a,0x4b3)]][_0x51dcfe(-0x1cd,-0x1cb,-0x169,-0x148)+_0x25978f(0x42b,0x365,0x3b3,0x3d6)],extension_settings[extensionName]['AQT_sd'],_0x4b9b24),_0x106a8=await _0xf95815[_0x25978f(0x443,0x376,0x3c8,0x405)](fumian,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x51dcfe(-0x91,-0x7b,-0xf2,-0x15f)]][_0x25978f(0x3d9,0x428,0x450,0x3c8)+_0x25978f(0x3f3,0x412,0x42a,0x3b0)],extension_settings[extensionName][_0x25978f(0x3cb,0x364,0x3b7,0x318)]);_0xf95815['ZRrrI'](addLog,_0x25978f(0x3fb,0x4ab,0x481,0x452)+_0x106a8),extension_settings['sd'][_0xf95815['BPJdp']]=_0x3de90a,await _0xf95815[_0x25978f(0x3e9,0x449,0x3d5,0x371)](saveSettingsDebounced);try{if(_0xf95815['phfXD'](_0x51dcfe(-0x253,-0x28b,-0x1fa,-0x1ca),_0xf95815[_0x25978f(0x35e,0x391,0x3ec,0x458)])){if(_0x222c98[_0x25978f(0x444,0x517,0x47b,0x4f1)]===_0xf95815['MateX']){const _0x50f8ff={};_0x50f8ff[_0x51dcfe(-0x173,-0x107,-0x16a,-0xe4)]=_0x222c98[_0x51dcfe(-0x171,-0x19b,-0x1f2,-0x198)+_0x51dcfe(-0x1d6,-0x121,-0x18b,-0x1d4)]?_0x222c98[_0x51dcfe(-0x237,-0x22a,-0x1f2,-0x26a)+'sd_auth']:'',_0x50f8ff[_0x51dcfe(-0x95,-0xe4,-0x125,-0x1a2)]=_0x3de90a;const _0x213de1=await _0xf95815[_0x51dcfe(-0x14f,-0x215,-0x1a4,-0x107)](fetch,_0xf95815['mZBLC'],{'method':_0xf95815[_0x25978f(0x336,0x328,0x378,0x340)],'body':JSON[_0x51dcfe(-0x1fb,-0x1da,-0x189,-0x149)](_0x50f8ff),'headers':getRequestHeaders(window[_0x51dcfe(-0x114,-0x19e,-0x1ab,-0x109)])});if(!_0x213de1['ok']){_0xf95815[_0x51dcfe(-0x149,-0x1b9,-0x174,-0x14c)](addLog,_0x25978f(0x487,0x499,0x40b,0x4aa)+_0x213de1[_0x51dcfe(-0xe7,-0x13a,-0xd9,-0x8e)]+'\x20'+_0x213de1['statusText']);throw new Error(_0x25978f(0x43b,0x491,0x40b,0x426)+_0x213de1[_0x51dcfe(-0xf2,-0xf1,-0xd9,-0x3d)]+'\x20'+_0x213de1[_0x51dcfe(-0x1ca,-0x176,-0x168,-0xe0)]);}let _0x36328c=await _0x213de1[_0x51dcfe(-0xeb,-0x13e,-0xd2,-0x137)]();console[_0x51dcfe(-0xdc,-0x184,-0x13c,-0x1cc)](_0xf95815[_0x25978f(0x476,0x523,0x4a9,0x50d)],_0x36328c),console['log'](_0xf95815[_0x51dcfe(-0x10b,-0x1c2,-0x191,-0x1b7)],_0x222c98['sd_cchatu_'+_0x51dcfe(-0xe9,-0xda,-0x126,-0x15a)]);if(_0xf95815[_0x25978f(0x49a,0x445,0x43e,0x485)](_0x36328c,_0x222c98[_0x51dcfe(-0x195,-0x185,-0x1ac,-0x12e)+_0x51dcfe(-0x193,-0x10a,-0x126,-0xbe)])){if(_0xf95815[_0x25978f(0x325,0x427,0x3a1,0x305)](_0xf95815['lrqeK'],_0xf95815[_0x25978f(0x4c2,0x489,0x475,0x49f)])){addLog(_0x25978f(0x502,0x417,0x4a4,0x4b9)+_0x222c98[_0x25978f(0x3d4,0x35e,0x3c0,0x364)+_0x25978f(0x487,0x4c5,0x446,0x49d)]+'...'),toastr[_0x25978f(0x4a9,0x44e,0x46e,0x447)](_0x25978f(0x388,0x461,0x3d0,0x3f9)+_0x222c98[_0x51dcfe(-0x137,-0x1df,-0x1ac,-0x180)+_0x25978f(0x459,0x4c5,0x446,0x41a)]);const _0x264789={};_0x264789[_0x25978f(0x375,0x3bd,0x402,0x490)]=_0x222c98[_0x51dcfe(-0x22a,-0x1fe,-0x1f2,-0x234)+_0x51dcfe(-0x175,-0x100,-0x18b,-0x1f0)]?_0x222c98[_0x51dcfe(-0x274,-0x1ca,-0x1f2,-0x259)+_0x51dcfe(-0x110,-0x176,-0x18b,-0x180)]:'',_0x264789[_0x25978f(0x43e,0x43c,0x447,0x448)]=_0x3de90a,_0x264789[_0x51dcfe(-0xec,-0x15e,-0x127,-0xc0)]=_0x222c98['sd_cchatu_'+_0x25978f(0x494,0x3f6,0x446,0x400)];const _0x4ee520=await fetch(_0x25978f(0x4be,0x476,0x490,0x479)+_0x25978f(0x3e9,0x40c,0x40a,0x496),{'method':_0x51dcfe(-0xa6,-0x17d,-0x132,-0x145),'body':JSON[_0x25978f(0x3f3,0x408,0x3e3,0x384)](_0x264789),'headers':_0xf95815[_0x51dcfe(-0x1b2,-0xd4,-0x12d,-0x197)](getRequestHeaders,window[_0x25978f(0x3e7,0x36d,0x3c1,0x393)])});if(!_0x4ee520['ok']){_0xf95815[_0x51dcfe(-0x101,-0xc9,-0x155,-0x1ca)](addLog,'切换模型失败:\x20'+_0x4ee520[_0x25978f(0x50d,0x3f5,0x493,0x436)]+'\x20'+_0x4ee520[_0x51dcfe(-0x1f0,-0x133,-0x168,-0x1b2)]);throw new Error(_0x25978f(0x388,0x3e3,0x3ca,0x3f6)+_0x4ee520['status']+'\x20'+_0x4ee520['statusText']);}toastr[_0x25978f(0x435,0x4a1,0x46e,0x4a9)](_0x25978f(0x4aa,0x3b6,0x429,0x4bf)+_0x222c98[_0x25978f(0x42c,0x320,0x3c0,0x335)+_0x51dcfe(-0x128,-0x19b,-0x126,-0xa9)]+'成功');}else _0x497aa4=!![];}}else{let _0x4c9660=await _0xf95815[_0x51dcfe(-0x142,-0x207,-0x174,-0x1da)](getSDMode,_0x3de90a);_0xf95815[_0x51dcfe(-0x16e,-0x1ae,-0x12e,-0x186)](_0x4c9660,_0x222c98[_0x25978f(0x426,0x3ad,0x3c0,0x457)+_0x51dcfe(-0x117,-0x19e,-0x126,-0x12d)])&&(_0xf95815[_0x51dcfe(-0x115,-0x184,-0xe4,-0x14c)](addLog,_0x25978f(0x4d8,0x4ba,0x45f,0x4d1)+_0x222c98[_0x51dcfe(-0x1f1,-0x1be,-0x1ac,-0x24e)+_0x25978f(0x480,0x4dc,0x446,0x4e3)]+_0x25978f(0x490,0x42a,0x473,0x4d2)),await setSDMode(_0x3de90a,_0x222c98[_0x51dcfe(-0x1b2,-0x242,-0x1ac,-0x122)+_0x25978f(0x477,0x425,0x446,0x4c3)]));}}else _0xf37224[_0x51dcfe(-0x208,-0x172,-0x1f3,-0x270)+_0x51dcfe(-0x75,-0x105,-0xc2,-0x55)]&&(_0x300606[_0x25978f(0x373,0x419,0x391,0x3d0)+_0x51dcfe(-0x178,-0x184,-0x179,-0x14c)](_0x531717[_0x25978f(0x3f6,0x38a,0x376,0x320)+_0x51dcfe(-0x3a,-0xa1,-0xc6,-0xb2)+'ST'],_0x306e8c),_0x1ed5f7[_0x25978f(0x40c,0x3ae,0x379,0x371)+_0x51dcfe(-0x14e,-0x20,-0xc2,-0x5c)]=![],_0xf95815['McgpU'](_0x6ada29,_0xf95815[_0x25978f(0x429,0x3d7,0x43c,0x491)]));}catch(_0x1bdf69){_0xf95815[_0x51dcfe(-0xcb,-0xd6,-0x12f,-0xb0)](addLog,_0x25978f(0x41d,0x39b,0x3df,0x433)+':\x20'+_0x1bdf69['message']+(_0x25978f(0x3bf,0x495,0x444,0x477)+_0x51dcfe(-0x235,-0x131,-0x1b6,-0x17a)+'查模型是否正确。')),taskQueue[_0x51dcfe(-0x16d,-0x245,-0x1e3,-0x1a3)+'sk'](_0x3a3d69,![]),currentTaskId=null;throw new Error(_0x25978f(0x367,0x432,0x3df,0x3fa)+_0x25978f(0x390,0x3ed,0x398,0x37c)+_0x51dcfe(-0x159,-0x1db,-0x1b6,-0x1fa)+'查模型是否正确。');}let _0x2279a9=-(0x1*0x241+-0x2*-0xcc7+-0x1bce*0x1);const _0x445749=_0x222c98[_0x51dcfe(-0xac,-0x13f,-0xbf,-0xdc)];function _0x25978f(_0x143f78,_0x55b89e,_0x13ccf0,_0x2ff49d){return _0x198e(_0x13ccf0-0x22c,_0x2ff49d);}function _0x51dcfe(_0x21c6d9,_0x4b79f,_0x8131e0,_0x514a25){return _0x198e(_0x8131e0- -0x340,_0x514a25);}if(_0xf95815[_0x25978f(0x39a,0x349,0x3a1,0x366)](_0x445749,'')&&_0xf95815[_0x51dcfe(-0x1a1,-0x1f8,-0x1cc,-0x245)](_0x445749,null)&&!isNaN(_0xf95815[_0x51dcfe(-0x198,-0x131,-0x13f,-0x1c3)](Number,_0x445749))&&_0xf95815[_0x25978f(0x3eb,0x3a6,0x40e,0x3b1)](_0xf95815[_0x51dcfe(-0xd2,-0x1a6,-0x174,-0x164)](Number,_0x445749),0x1ade+0x261b*0x1+-0x40f9)){if(_0xf95815[_0x25978f(0x43d,0x3ca,0x422,0x48d)](_0xf95815[_0x51dcfe(-0x22a,-0x183,-0x1c6,-0x211)],_0xf95815['izSNU'])){_0xf95815[_0x25978f(0x3fe,0x4eb,0x488,0x480)](_0x279a42,_0xf95815['dEuNN']);throw new _0x2abb9b('任务已取消');}else _0x2279a9=Number(_0x445749);}let _0x3122bf={'prompt':_0x569d0d,'negative_prompt':_0x106a8,'sampler_name':_0x222c98[_0x25978f(0x3ef,0x3f7,0x3c0,0x3c8)+_0x25978f(0x3ed,0x402,0x37b,0x400)+'ame'],'scheduler':_0x222c98[_0x51dcfe(-0x166,-0x1f6,-0x1ac,-0x14f)+_0x25978f(0x3eb,0x36c,0x3ed,0x464)+'r'],'steps':_0x222c98[_0x25978f(0x39a,0x376,0x3a7,0x361)],'cfg_scale':_0x222c98[_0x51dcfe(-0x283,-0x201,-0x1f9,-0x157)],'width':_0x5a33cb?_0x5a33cb:_0x222c98[_0x25978f(0x48d,0x448,0x42e,0x3a3)],'height':_0x17ccda?_0x17ccda:_0x222c98[_0x25978f(0x45c,0x458,0x47f,0x445)],'restore_faces':_0xf95815['yLpJS'](_0x222c98[_0x51dcfe(-0x1f9,-0x129,-0x18e,-0x11a)+'es'],'true'),'enable_hr':_0x222c98[_0x51dcfe(-0xc1,-0x49,-0xca,-0xb5)+_0x51dcfe(-0x1a5,-0x147,-0x1c3,-0x138)]==_0x51dcfe(-0x1a4,-0x169,-0x1ef,-0x28d),'hr_upscaler':_0x222c98['sd_cchatu_'+_0x25978f(0x421,0x4be,0x456,0x4a6)],'hr_scale':_0x222c98[_0x25978f(0x3f2,0x454,0x48f,0x475)+_0x25978f(0x44a,0x40f,0x46c,0x41a)],'hr_additional_modules':[],'denoising_strength':_0x222c98['sd_cdenois'+_0x51dcfe(-0x250,-0x25f,-0x1d2,-0x170)+'th'],'hr_second_pass_steps':_0x222c98['sd_chires_'+_0x25978f(0x465,0x42e,0x42f,0x43e)],'seed':_0x2279a9,'override_settings':{'CLIP_stop_at_last_layers':Number(_0x222c98[_0x51dcfe(-0xa5,-0x108,-0xf3,-0x82)+'kip']),'sd_vae':_0x222c98[_0x25978f(0x38d,0x337,0x3c0,0x3bc)+_0x25978f(0x409,0x46f,0x401,0x446)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0xf95815['UVsfR'](addLog,'restore_fa'+_0x51dcfe(-0x101,-0x120,-0xdb,-0x97)+_0x3122bf[_0x25978f(0x3a1,0x32e,0x38a,0x2fe)+_0x25978f(0x477,0x435,0x495,0x4de)]),_0xf95815['XbBRd'](addLog,_0x51dcfe(-0x12c,-0x91,-0xe9,-0x170)+_0x25978f(0x3a7,0x38d,0x41a,0x41a)+_0x3122bf['enable_hr']);if(_0xf95815[_0x51dcfe(-0x1a7,-0x1e8,-0x14d,-0xe0)](_0x222c98['sd_cadetai'+_0x51dcfe(-0x1d5,-0x15a,-0x199,-0x1d2)],'true')){_0xf95815['mbuCE'](addLog,_0xf95815[_0x25978f(0x33a,0x338,0x3d9,0x372)]);const _0xcd3c23={};_0xcd3c23[_0x51dcfe(-0x1cb,-0x181,-0x19e,-0x1b6)]=_0xf95815[_0x25978f(0x41d,0x48d,0x4ac,0x4ec)];const _0x5768dc={};_0x5768dc[_0x51dcfe(-0x203,-0x1ea,-0x1a7,-0x106)]=[!![],!![],_0xcd3c23];const _0x13dae2={};_0x13dae2[_0x25978f(0x3e4,0x3de,0x410,0x380)]=_0x5768dc;const _0x2e5eb6={};_0x2e5eb6[_0x51dcfe(-0x173,-0x207,-0x1eb,-0x18a)+_0x51dcfe(-0x149,-0x1c3,-0x171,-0x1c4)]=_0x13dae2,_0x3122bf=deepMerge(_0x3122bf,_0x2e5eb6);}const _0x10fd4b='\x0a---\x0a###\x20生'+'图参数报告\x0a-\x20**'+_0x25978f(0x44f,0x488,0x409,0x3fa)+_0x51dcfe(-0x16b,-0x13f,-0x146,-0xab)+_0x569d0d+(_0x25978f(0x38b,0x436,0x3d2,0x33e)+_0x51dcfe(-0x141,-0x20a,-0x187,-0x182)+'Prompt):**'+'\x20')+_0x106a8+(_0x25978f(0x412,0x364,0x3ad,0x440)+_0x51dcfe(-0x115,-0x220,-0x1af,-0x1e8)+_0x51dcfe(-0x204,-0x1d0,-0x1e0,-0x15d))+_0x3122bf[_0x51dcfe(-0x90,-0xe6,-0x102,-0xa5)+'me']+(_0x51dcfe(-0x13f,-0xcd,-0x11a,-0xd4)+_0x51dcfe(-0x17d,-0x1e6,-0x1b3,-0x14b))+_0x3122bf[_0x51dcfe(-0x193,-0x12d,-0x13d,-0x1d1)]+('\x0a-\x20**CFG\x20S'+_0x25978f(0x388,0x3eb,0x3a2,0x407))+_0x3122bf[_0x51dcfe(-0x139,-0x14b,-0x10e,-0x154)]+(_0x51dcfe(-0x231,-0x193,-0x1cd,-0x169)+'ize):**\x20')+_0x3122bf[_0x51dcfe(-0x1bc,-0x1fe,-0x19b,-0x1d6)]+'x'+_0x3122bf[_0x25978f(0x317,0x412,0x3aa,0x44b)]+(_0x25978f(0x50b,0x52c,0x49e,0x500)+'eed):**\x20')+(_0x3122bf[_0x51dcfe(-0x141,-0x1e9,-0x15a,-0x1d1)]===-(-0x337*0x3+-0x3e*0x8b+0x134*0x24)?_0xf95815['ekAWd']:_0x3122bf['seed'])+('\x0a-\x20**模型\x20(M'+_0x25978f(0x358,0x419,0x3da,0x3e0))+_0x222c98['sd_cchatu_'+_0x25978f(0x46d,0x436,0x446,0x490)]+(_0x51dcfe(-0x19c,-0x16d,-0x19f,-0x22b)+'*\x20')+_0x3122bf[_0x25978f(0x3c4,0x425,0x45c,0x488)+'ettings'][_0x25978f(0x404,0x411,0x3e0,0x3c1)]+('\x0a-\x20**Clip\x20'+_0x51dcfe(-0x24e,-0x1c9,-0x1ba,-0x234))+_0x3122bf[_0x25978f(0x4eb,0x4bf,0x45c,0x4be)+'ettings'][_0x51dcfe(-0x210,-0x133,-0x198,-0x171)+_0x51dcfe(-0x188,-0xac,-0xea,-0x11f)+'yers']+(_0x51dcfe(-0xfe,-0x137,-0x12c,-0x1b8)+_0x51dcfe(-0x158,-0x186,-0x170,-0x182)+_0x25978f(0x427,0x535,0x4a1,0x483))+_0x3122bf['enable_hr']+(_0x25978f(0x388,0x326,0x38f,0x323)+'(Upscale\x20F'+_0x25978f(0x376,0x412,0x3f7,0x387))+_0x3122bf[_0x25978f(0x3ec,0x400,0x442,0x3bf)]+(_0x25978f(0x4bf,0x4b1,0x486,0x466)+_0x51dcfe(-0x19e,-0x91,-0x11d,-0x99)+_0x25978f(0x435,0x378,0x40c,0x3ab)+':**\x20')+_0x3122bf[_0x51dcfe(-0x26b,-0x1e5,-0x1df,-0x161)+_0x25978f(0x407,0x348,0x36b,0x32f)]+('\x0a-\x20**脸部修复\x20'+_0x25978f(0x3c4,0x3a5,0x3ff,0x360)+'aces):**\x20')+_0x3122bf[_0x25978f(0x340,0x2f5,0x38a,0x3e6)+_0x25978f(0x4b1,0x4b0,0x495,0x418)]+('\x0a-\x20**ADeta'+'iler:**\x20')+_0xf95815['yLpJS'](_0x222c98[_0x25978f(0x464,0x44d,0x44e,0x493)+_0x25978f(0x33a,0x388,0x3d3,0x447)],_0xf95815[_0x51dcfe(-0x192,-0x175,-0x140,-0x1a5)])+_0x25978f(0x306,0x3d2,0x39e,0x32e);_0xf95815[_0x51dcfe(-0x159,-0x243,-0x1a9,-0x154)](addLog,_0x10fd4b),_0xf95815['yDkqn'](addLog,_0x25978f(0x38e,0x440,0x41e,0x3e5)+'数为'+JSON[_0x51dcfe(-0x16b,-0x1af,-0x189,-0x203)](_0x3122bf)),console[_0x25978f(0x3c8,0x460,0x430,0x3db)](_0x51dcfe(-0xaa,-0xee,-0xc5,-0xe1),_0x3122bf);while(!window[_0x25978f(0x2e1,0x376,0x383,0x332)]){await sleep(0x263f+0x1218*-0x1+-0x103f);};try{window[_0x25978f(0x384,0x31c,0x383,0x367)]=![],taskQueue['updateStat'+'us'](_0x3a3d69,_0xf95815['XLAhF']);if(_0x222c98[_0x25978f(0x3fd,0x406,0x47b,0x437)]===_0xf95815[_0x51dcfe(-0x12d,-0xf1,-0x14b,-0xf0)]){if(!taskQueue['isTaskInQu'+'eue'](_0x3a3d69)){_0xf95815[_0x51dcfe(-0x17d,-0x1b2,-0x1fc,-0x1be)](addLog,'任务已被用户取消。'),eventSource[_0x51dcfe(-0x168,-0x142,-0x151,-0x182)](_0xf95815[_0x51dcfe(-0x26e,-0x1b1,-0x1e7,-0x225)]);throw new Error(_0xf95815['YGalE']);}_0x3122bf[_0x25978f(0x3cc,0x3a9,0x447,0x3dc)]=_0x3de90a,console[_0x51dcfe(-0x193,-0x15d,-0x13c,-0x1c1)](_0xf95815['CcNSR'],_0x222c98[_0x51dcfe(-0x1ab,-0x1b5,-0x1f2,-0x221)+_0x25978f(0x457,0x360,0x3e1,0x380)]),_0x3122bf[_0x25978f(0x40b,0x45f,0x402,0x44f)]=_0x222c98['st_chatu8_'+'sd_auth']?_0x222c98[_0x51dcfe(-0x18d,-0x1fe,-0x1f2,-0x15c)+'sd_auth']:'';const _0x4fc403=await _0xf95815[_0x51dcfe(-0x1ae,-0x18e,-0x137,-0x1bc)](fetch,_0xf95815['OYGrs'],{'method':_0xf95815[_0x25978f(0x30a,0x3c0,0x378,0x404)],'headers':_0xf95815[_0x51dcfe(-0xaf,-0x1a6,-0x12f,-0xae)](getRequestHeaders,window[_0x51dcfe(-0x1de,-0x19b,-0x1ab,-0x197)]),'body':JSON['stringify'](_0x3122bf)});if(!_0x4fc403['ok']){if(_0xf95815[_0x51dcfe(-0xe9,-0x1c2,-0x12b,-0x12e)]!==_0xf95815[_0x51dcfe(-0x154,-0x1c3,-0x12b,-0xe5)])return _0x40211a[_0x25978f(0x3ea,0x389,0x3ab,0x387)]()['search'](QcAGAJ[_0x25978f(0x4a4,0x483,0x44c,0x3f3)])[_0x51dcfe(-0x1ca,-0x1c7,-0x1c1,-0x160)]()[_0x25978f(0x3f7,0x362,0x3eb,0x3a2)+'r'](_0x2a6db0)[_0x25978f(0x3a7,0x475,0x413,0x493)](QcAGAJ[_0x51dcfe(-0xb6,-0x158,-0x120,-0x14b)]);else{const _0x1d94d1=await _0x4fc403[_0x51dcfe(-0x106,-0x114,-0xd2,-0x101)]();_0xf95815[_0x51dcfe(-0x1db,-0x143,-0x1a9,-0x14f)](addLog,_0x25978f(0x3d9,0x4ae,0x451,0x48d)+_0x25978f(0x30c,0x3a6,0x380,0x384)+_0x4fc403[_0x51dcfe(-0xe2,-0x63,-0xd9,-0x4a)]+'。响应内容:\x20'+_0x1d94d1),console[_0x51dcfe(-0x1bc,-0x1a6,-0x13c,-0x17f)](_0x25978f(0x41f,0x48b,0x407,0x392),_0x1d94d1);throw new Error(_0x51dcfe(-0x1fb,-0x16d,-0x1c0,-0x169)+_0x4fc403[_0x25978f(0x42a,0x439,0x493,0x507)]+',\x20详情:\x20'+_0x1d94d1);}}const _0x11db74=await _0x4fc403[_0x51dcfe(-0xc8,-0x131,-0xd2,-0x15e)]();let _0x21bf04='';try{if(_0xf95815[_0x51dcfe(-0x77,-0xf6,-0xd4,-0x15d)](_0xf95815[_0x51dcfe(-0x1b8,-0xc9,-0x124,-0x11c)],_0xf95815[_0x51dcfe(-0x166,-0x14c,-0x1bb,-0x213)])){const _0x3b568b=JSON[_0x25978f(0x47d,0x523,0x48b,0x41d)](_0x11db74);_0x21bf04=_0x3b568b[_0x25978f(0x3ca,0x4ba,0x45a,0x442)][-0x5d+0x3*0x9a1+0x1*-0x1c86];}else{const _0x119305=_0x8b0916?function(){function _0x2de7f2(_0x1bc3af,_0x39c5f4,_0x201b89,_0x32bfa4){return _0x51dcfe(_0x1bc3af-0x132,_0x39c5f4-0xbe,_0x201b89-0x3c7,_0x1bc3af);}if(_0x4feefa){const _0x32f494=_0x56af05[_0x2de7f2(0x34b,0x28a,0x2e4,0x318)](_0x1c2bc4,arguments);return _0x3f6c93=null,_0x32f494;}}:function(){};return _0x22fe0e=![],_0x119305;}}catch(_0x2f8412){if(_0xf95815['gzQKF'](_0xf95815[_0x51dcfe(-0x16b,-0x248,-0x1d8,-0x272)],_0xf95815[_0x25978f(0x3ec,0x3d7,0x394,0x358)]))_0xf95815[_0x51dcfe(-0x156,-0x1e0,-0x144,-0x173)](addLog,_0xf95815[_0x51dcfe(-0x1a2,-0x140,-0x153,-0x1bd)]),_0x21bf04=_0x11db74;else for(let _0x253166=-0x23d*-0x11+-0x5c3*-0x1+-0x5*0x8c3;_0x253166<=-0x3d2+0x9f*-0x3d+0x1*0x29b9;_0x253166++){_0x220569[_0x51dcfe(-0x193,-0x7b,-0x113,-0x91)+_0x253166+'\x20Prompt']&&(_0x4bdd0e=_0xf95815[_0x51dcfe(-0x15f,-0x251,-0x1d0,-0x1cb)](_0xf95815['TgUWD'](_0x845b3,',\x20'),_0xf95815['McgpU'](_0x791e54,_0x45e211[_0x51dcfe(-0x7e,-0xdf,-0x113,-0x10a)+_0x253166+'\x20Prompt'])));}}const _0x1439a1=_0x51dcfe(-0x141,-0x1d1,-0x1a8,-0x1fe)+_0x25978f(0x3b7,0x337,0x36f,0x359)+'4,'+_0x21bf04;_0xf95815[_0x51dcfe(-0xa9,-0x114,-0xf4,-0x185)](addLog,_0x51dcfe(-0x142,-0xef,-0xff,-0xb3)+_0x51dcfe(-0x1c4,-0x21f,-0x195,-0x22f)+'L。'),setTimeout(()=>{function _0x4d5e26(_0x12e44e,_0x35b6d3,_0x20f8c6,_0x314af4){return _0x25978f(_0x12e44e-0x76,_0x35b6d3-0x79,_0x35b6d3- -0xc1,_0x20f8c6);}function _0x50dfe5(_0x1dff62,_0x216509,_0x482dd2,_0x53f8fa){return _0x51dcfe(_0x1dff62-0x63,_0x216509-0x148,_0x216509-0x5ba,_0x482dd2);}console[_0x4d5e26(0x3b7,0x36f,0x3a2,0x2da)](_0x50dfe5(0x4f7,0x4ca,0x4a3,0x428)+'为true'),window[_0x4d5e26(0x28c,0x2c2,0x2c1,0x317)]=!![];},extension_settings[extensionName][_0x51dcfe(-0x220,-0x197,-0x1b8,-0x1ba)+_0x25978f(0x483,0x44b,0x434,0x475)]);;taskQueue[_0x25978f(0x3e6,0x33a,0x389,0x3dd)+'sk'](_0x3a3d69,!![]),currentTaskId=null;const _0x2b7efd={};return _0x2b7efd[_0x25978f(0x455,0x44d,0x437,0x3ed)]=_0x1439a1,_0x2b7efd[_0x25978f(0x49e,0x4af,0x467,0x43c)]=_0x2d8e56||'',_0x2b7efd;}else{if(_0xf95815['HqNdl'](_0x51dcfe(-0xfb,-0x15d,-0x114,-0x10b),_0xf95815[_0x51dcfe(-0x1f7,-0x182,-0x1fb,-0x277)]))_0x218c48=_0xf95815['McgpU'](_0x3d5fb9,_0x621ab0);else{if(!taskQueue[_0x51dcfe(-0x39,-0x147,-0xc9,-0x14d)+'eue'](_0x3a3d69)){if(_0xf95815[_0x51dcfe(-0x21f,-0x1ca,-0x1a3,-0x217)]===_0xf95815[_0x51dcfe(-0x185,-0x128,-0x1a3,-0x19e)]){addLog(_0xf95815['dEuNN']);throw new Error(_0xf95815['YGalE']);}else{_0xf95815['bkfde'](_0x538760,'获取或者切换模型失败'+':\x20'+_0x4ae961[_0x51dcfe(-0x1b5,-0x13e,-0x18f,-0x222)]+(_0x51dcfe(-0x10f,-0x164,-0x128,-0x98)+_0x51dcfe(-0x1f9,-0x18f,-0x1b6,-0x252)+_0x25978f(0x3ee,0x465,0x477,0x459))),_0xddcc51[_0x51dcfe(-0x250,-0x253,-0x1e3,-0x1bf)+'sk'](_0x3ff3d,![]),_0x5a8e30=null;throw new _0x65633f(_0x25978f(0x35d,0x41e,0x3df,0x3a9)+_0x51dcfe(-0x206,-0x197,-0x1d4,-0x158)+_0x25978f(0x337,0x41d,0x3b6,0x3d0)+_0x25978f(0x3d8,0x40b,0x477,0x44a));}}const _0x295b15=new URL(_0x3de90a+_0xf95815[_0x25978f(0x3a3,0x30b,0x39b,0x41a)]);window[_0x25978f(0x39c,0x408,0x383,0x40a)]=![];const _0x5dc517=await _0xf95815[_0x51dcfe(-0x1b4,-0x13f,-0x137,-0x15c)](fetch,_0x295b15,{'method':_0xf95815[_0x51dcfe(-0x226,-0x152,-0x1f4,-0x26d)],'body':JSON['stringify'](_0x3122bf),'headers':{'Content-Type':_0xf95815[_0x25978f(0x4c9,0x402,0x47d,0x420)],'Authorization':_0xf95815['owJGP'](getsdAuth)}});_0xf95815[_0x25978f(0x3b5,0x3c7,0x435,0x47b)](setTimeout,()=>{function _0x15e913(_0x11e47b,_0x2f0774,_0x288816,_0x102bcb){return _0x25978f(_0x11e47b-0x186,_0x2f0774-0x18d,_0x102bcb- -0x450,_0x11e47b);}console['log'](_0xf95815[_0x354475(-0x71,0x4,0x17,0x2d)]);function _0x354475(_0x54fa6b,_0x16d48d,_0x44bd76,_0x508d6f){return _0x51dcfe(_0x54fa6b-0x9,_0x16d48d-0x67,_0x44bd76-0x158,_0x16d48d);}window[_0x354475(-0x3a,-0xf2,-0x91,-0x6e)]=!![];},extension_settings[extensionName][_0x51dcfe(-0x16a,-0x253,-0x1b8,-0x1d9)+_0x25978f(0x3eb,0x3a8,0x434,0x3be)]);;if(!_0x5dc517['ok']){if(_0xf95815['MVYba']!==_0x25978f(0x2e1,0x415,0x377,0x3e1)){const _0x26f070=await _0x5dc517[_0x51dcfe(-0x64,-0x159,-0xd2,-0x108)]();addLog(_0x25978f(0x3f5,0x36b,0x3c6,0x454)+_0x25978f(0x40f,0x3ca,0x3fd,0x476)+_0x5dc517[_0x25978f(0x516,0x3f6,0x493,0x43f)]+_0x25978f(0x2eb,0x3c1,0x36d,0x368)+_0x26f070),console['log'](_0xf95815[_0x25978f(0x4a2,0x441,0x455,0x3d4)],_0x26f070);throw new Error(_0x51dcfe(-0x1c3,-0x171,-0x1c0,-0x186)+_0x5dc517[_0x51dcfe(-0x92,-0xc5,-0xd9,-0x122)]+',\x20详情:\x20'+_0x26f070);}else{const _0x2aa01c=(_0x51dcfe(-0x16e,-0x153,-0x150,-0x152)+'4')[_0x51dcfe(-0xf4,-0x192,-0x15f,-0x13a)]('|');let _0x9893a9=-0x16a1+0xc88*-0x1+0x2329;while(!![]){switch(_0x2aa01c[_0x9893a9++]){case'0':_0x28a873[_0x25978f(0x4fb,0x52a,0x4a0,0x53b)](_0xf95815[_0x25978f(0x339,0x3ca,0x3a3,0x3d6)],_0x53f324);continue;case'1':_0x2a59a3=null;continue;case'2':_0x20a2d4[_0x25978f(0x317,0x321,0x383,0x30c)]=!![];continue;case'3':if(_0xf95815[_0x51dcfe(-0xd9,-0xb9,-0x154,-0x1f4)](_0xc3fcbc['message'],_0x51dcfe(-0x1d0,-0x238,-0x1a0,-0x1e8))){}else _0x6ae6c9[_0x25978f(0x3f6,0x37c,0x389,0x356)+'sk'](_0x56e5ce,![]);continue;case'4':throw _0x4b88d1;continue;case'5':_0x7e34d2(_0x25978f(0x4ed,0x4ed,0x463,0x41b)+_0x21b0ac[_0x25978f(0x3b3,0x3ca,0x3dd,0x452)]);continue;}break;}}}const _0x1d2884=await _0x5dc517[_0x51dcfe(-0x1ad,-0xff,-0x184,-0x1c9)]();if(!_0x1d2884[_0x25978f(0x3ce,0x4be,0x45a,0x441)]||_0xf95815['uUasl'](_0x1d2884[_0x25978f(0x3de,0x3b9,0x45a,0x3df)]['length'],-0x2061+0x1*0x1bb5+0x4ac))throw new Error(_0xf95815[_0x51dcfe(-0x6d,-0xd3,-0xd3,-0x84)]);const _0x513838=_0x1d2884[_0x51dcfe(-0x143,-0x195,-0x112,-0x106)][0x1c59*-0x1+-0x2c+0x1c85*0x1],_0x10fbf0=_0xf95815[_0x25978f(0x3fc,0x3a2,0x39c,0x36c)](_0xf95815[_0x25978f(0x359,0x407,0x3bb,0x335)],_0x513838);addLog(_0xf95815['DAuuL']),taskQueue[_0x51dcfe(-0x19e,-0x195,-0x1e3,-0x1f2)+'sk'](_0x3a3d69,!![]),currentTaskId=null;const _0x4a2954={};return _0x4a2954[_0x51dcfe(-0x174,-0x1ae,-0x135,-0x1be)]=_0x10fbf0,_0x4a2954['change']=_0x3ca640||'',_0x4a2954;}}}catch(_0x5c31ba){const _0x1a2471=('3|0|1|2|5|'+'4')[_0x51dcfe(-0x1b9,-0x157,-0x15f,-0x185)]('|');let _0x54e649=0xfb*-0x15+-0x1a7*-0x5+0x6*0x20e;while(!![]){switch(_0x1a2471[_0x54e649++]){case'0':if(_0xf95815[_0x25978f(0x488,0x3c3,0x422,0x3c0)](_0x5c31ba[_0x51dcfe(-0x217,-0x101,-0x18f,-0xf7)],_0xf95815['YGalE'])){}else taskQueue[_0x25978f(0x3b1,0x3d4,0x389,0x384)+'sk'](_0x3a3d69,![]);continue;case'1':currentTaskId=null;continue;case'2':_0xf95815[_0x51dcfe(-0x101,-0xa6,-0xd8,-0x6d)](addLog,_0x51dcfe(-0x182,-0xb6,-0x109,-0x134)+_0x5c31ba[_0x51dcfe(-0x152,-0x220,-0x18f,-0x1fa)]);continue;case'3':window[_0x51dcfe(-0x288,-0x17d,-0x1e9,-0x19a)]=!![];continue;case'4':throw _0x5c31ba;continue;case'5':console['error'](_0xf95815['dcdEh'],_0x5c31ba);continue;}break;}}}async function sdGenerate(_0xf04360){const _0x2b938c={'fogvD':function(_0x16b987,_0x3dcb8d){return _0x16b987+_0x3dcb8d;},'AovJd':function(_0x422dc1,_0x1db874){return _0x422dc1(_0x1db874);},'pvpvt':_0x2771b0(0x477,0x4bd,0x453,0x43f),'fIzXW':function(_0x2d04ab,_0x586af7){return _0x2d04ab!==_0x586af7;},'XfoEO':_0x2771b0(0x446,0x3ac,0x3ea,0x43e),'deJaG':_0x2771b0(0x579,0x534,0x500,0x4d1),'hylMz':'xzkGm','rwIBB':function(_0x42b831,_0x2f4db9){return _0x42b831!=_0x2f4db9;},'LLbZf':function(_0xa14d48,_0x40f790,_0x180003,_0x4d9d70){return _0xa14d48(_0x40f790,_0x180003,_0x4d9d70);},'HGaNI':function(_0xb3fa85,_0x17cfef){return _0xb3fa85(_0x17cfef);},'AdInX':function(_0x1390ac,_0x4c8e56){return _0x1390ac(_0x4c8e56);}};function _0x2771b0(_0x3467d1,_0x42398d,_0x154a52,_0x4088cb){return _0x198e(_0x154a52-0x281,_0x42398d);}const {id:_0x4430d0,prompt:_0xb287,width:_0x2b7164,height:_0x3aa770,change:_0x35e120}=_0xf04360;addLog(_0x2771b0(0x3c0,0x4d8,0x44e,0x412)+'ID:\x20'+_0x4430d0+(')\x20-\x20Prompt'+':\x20')+_0xb287+(_0x35e120?_0x2771b0(0x3eb,0x471,0x439,0x42e)+'\x20'+_0x35e120:''));if(_0x35e120&&_0x35e120['includes'](_0x2b938c[_0x2771b0(0x4d2,0x461,0x4ba,0x51c)])){if(_0x2b938c[_0x7ec9aa(-0x1b1,-0x1f0,-0x1d6,-0x24e)](_0x2771b0(0x3c0,0x46f,0x3ea,0x47c),_0x2b938c[_0x7ec9aa(-0x221,-0x1f2,-0x234,-0x15b)]))_0x574b8a=_0x2b938c[_0x2771b0(0x414,0x4e3,0x44f,0x4c6)](_0x36ecaf,',\x20')+_0x3d97e8[_0x7ec9aa(-0x147,-0x127,-0x9d,-0x101)+_0x4bf829+'\x20Prompt'];else{bananaGenerate(_0xf04360);return;}}function _0x7ec9aa(_0x4deffd,_0x3a76cf,_0x32ae9f,_0x194ec5){return _0x198e(_0x3a76cf- -0x354,_0x194ec5);}try{if(_0x2b938c[_0x7ec9aa(-0xdf,-0xd8,-0x9a,-0x15b)]===_0x2b938c[_0x2771b0(0x42d,0x4cf,0x455,0x3e4)]){_0x2b938c['AovJd'](_0x5c9749,_0x7ec9aa(-0x212,-0x1b6,-0x1be,-0x1d8)+_0x4426f5['status']+'\x20'+_0x247279['statusText']);throw new _0xa96cc4(_0x2771b0(0x3a1,0x3d7,0x41f,0x48d)+_0x468446['status']+'\x20'+_0x2b95b0[_0x7ec9aa(-0x1e1,-0x17c,-0x138,-0xe6)]);}else{const {image:_0x5b4675,change:_0x164847}=await _0x2b938c['AovJd'](generateSDImage,{'prompt':_0xb287,'width':_0x2b7164,'height':_0x3aa770,'change':_0x35e120});if(_0x2b938c[_0x7ec9aa(-0xa6,-0x148,-0x1c1,-0xf7)](extension_settings[extensionName][_0x2771b0(0x442,0x3b1,0x42d,0x45d)],'0')){const _0x187ae9={};_0x187ae9[_0x2771b0(0x531,0x52c,0x4bc,0x47b)]=_0x164847,await _0x2b938c[_0x7ec9aa(-0xff,-0xe1,-0x144,-0x16f)](setItemImg,_0xb287,_0x5b4675,_0x187ae9),_0x2b938c[_0x2771b0(0x4c2,0x48a,0x43e,0x3de)](addLog,_0x2771b0(0x4c9,0x4bd,0x4c9,0x448)+_0x7ec9aa(-0x137,-0xe9,-0x166,-0xa3)+'\x20'+_0xb287);}else _0x2b938c[_0x7ec9aa(-0x250,-0x1be,-0x1c6,-0x1d6)](addLog,_0x2771b0(0x3c9,0x39e,0x42b,0x41e)+'库');const _0x51f62d={};_0x51f62d['id']=_0x4430d0,_0x51f62d[_0x7ec9aa(-0x161,-0x12c,-0x120,-0x168)]=!![],_0x51f62d[_0x2771b0(0x520,0x47d,0x4d3,0x4c0)]=_0x5b4675,_0x51f62d[_0x2771b0(0x50d,0x4f1,0x4c4,0x52a)]=_0xb287,_0x51f62d[_0x7ec9aa(-0x1b4,-0x119,-0x197,-0x87)]=_0x164847,eventSource[_0x2771b0(0x46b,0x3f1,0x470,0x4af)](EventType[_0x2771b0(0x362,0x450,0x3cb,0x3cc)+'MAGE_RESPO'+_0x7ec9aa(-0xa5,-0x137,-0x147,-0x175)],_0x51f62d),_0x2b938c[_0x7ec9aa(-0x18e,-0x1be,-0x1ea,-0x1e8)](addLog,'发送SD生图成功响应'+_0x2771b0(0x498,0x403,0x424,0x3fd)+_0x4430d0+')');}}catch(_0x587e8f){const _0x198c89=_0x2771b0(0x4fa,0x44f,0x47a,0x453)+_0x7ec9aa(-0xe8,-0xe3,-0xf6,-0x109)+_0x4430d0+_0x2771b0(0x460,0x4ff,0x4a0,0x4ef)+_0x587e8f[_0x2771b0(0x419,0x3e8,0x432,0x3ca)];_0x2b938c[_0x7ec9aa(-0x159,-0x1be,-0x186,-0x228)](addLog,_0x2771b0(0x453,0x350,0x3dc,0x39b)+_0x198c89),console[_0x2771b0(0x564,0x4b8,0x4f5,0x4e2)](_0x7ec9aa(-0x27e,-0x1e9,-0x205,-0x1d6)+_0x2771b0(0x4df,0x501,0x503,0x460)+_0x2771b0(0x4ce,0x3ce,0x45a,0x3eb),_0x587e8f);const _0x2e15a6={};_0x2e15a6['id']=_0x4430d0,_0x2e15a6[_0x7ec9aa(-0xd0,-0x12c,-0x115,-0x109)]=![],_0x2e15a6[_0x2771b0(0x565,0x47c,0x4f5,0x557)]=_0x587e8f[_0x7ec9aa(-0x130,-0x1a3,-0x20d,-0x105)],_0x2e15a6['prompt']=_0xb287,eventSource[_0x7ec9aa(-0x13d,-0x165,-0x1d8,-0x10a)](EventType[_0x2771b0(0x432,0x32c,0x3cb,0x3cb)+_0x2771b0(0x383,0x47d,0x3e8,0x46a)+'NSE'],_0x2e15a6),_0x2b938c[_0x2771b0(0x474,0x3c8,0x414,0x411)](addLog,_0x2771b0(0x4fb,0x478,0x4b0,0x53c)+_0x2771b0(0x452,0x3e8,0x424,0x3c4)+_0x4430d0+')');}}function initializeSDListener(){const _0x51e7fc={'AKYPB':function(_0x1e3bb5,_0x5d2244){return _0x1e3bb5(_0x5d2244);},'QEgRq':_0xb1181f(0x223,0x22d,0x26d,0x274)+_0x4e8d75(0x59d,0x540,0x5b4,0x556)};function _0x4e8d75(_0x13fa29,_0x38863a,_0x3d60c7,_0x5b6f6c){return _0x198e(_0x38863a-0x2de,_0x13fa29);}function _0xb1181f(_0x3fe9e4,_0x1bb8db,_0x5648ce,_0x3cbbb1){return _0x198e(_0x1bb8db-0xed,_0x5648ce);}eventSource['on'](EventType[_0xb1181f(0x1c2,0x237,0x284,0x298)+_0xb1181f(0x300,0x367,0x2f6,0x3f0)+'ST'],sdGenerate),_0x51e7fc['AKYPB'](addLog,_0x51e7fc['QEgRq']);}export async function replaceWithSd(){function _0x15e182(_0x424c2c,_0x5ce14c,_0x112c80,_0x3afb7d){return _0x198e(_0x3afb7d- -0x5d,_0x5ce14c);}function _0x2376c9(_0x3886e9,_0x345a10,_0x1e169c,_0x3da90b){return _0x198e(_0x3da90b-0x148,_0x1e169c);}const _0x1193d5={'RBfVm':_0x2376c9(0x253,0x33d,0x343,0x2a7)+_0x2376c9(0x361,0x377,0x3a4,0x35f)+_0x2376c9(0x22d,0x342,0x263,0x2b9),'eCIvB':function(_0x19fac3,_0x2a66c2){return _0x19fac3==_0x2a66c2;},'ypYTF':function(_0x20e9b0){return _0x20e9b0();},'gYkhb':function(_0x4aae28,_0xcff1a9){return _0x4aae28!==_0xcff1a9;},'KBxxw':'wpqfN','AGZey':function(_0x12f92c,_0x4abbd6){return _0x12f92c(_0x4abbd6);}};_0x1193d5[_0x15e182(0x234,0x288,0x219,0x226)](extension_settings[extensionName]['mode'],'sd')?(!window[_0x15e182(0x83,0x17e,0x14f,0xf0)+_0x15e182(0x1f0,0x1c4,0x214,0x221)]&&(window[_0x15e182(0x14c,0x174,0x171,0xf0)+_0x2376c9(0x34b,0x431,0x453,0x3c6)]=!![],initializeSDListener()),_0x1193d5[_0x15e182(0x274,0x252,0x256,0x1e2)](initializeImageProcessing)):window[_0x15e182(0xe6,0x132,0x116,0xf0)+_0x2376c9(0x408,0x421,0x3d3,0x3c6)]&&(_0x1193d5[_0x2376c9(0x42f,0x389,0x35d,0x3a3)](_0x1193d5[_0x2376c9(0x2ba,0x374,0x39e,0x322)],_0x1193d5[_0x2376c9(0x3ac,0x312,0x33e,0x322)])?(_0x514ba3(_0x1193d5[_0x15e182(0x1af,0x1b7,0xb1,0x127)]),_0x50c30d=_0x1896ab):(eventSource[_0x2376c9(0x227,0x316,0x340,0x2ad)+_0x2376c9(0x2a0,0x282,0x29d,0x30f)](EventType['GENERATE_I'+'MAGE_REQUE'+'ST'],sdGenerate),window['initialize'+_0x15e182(0x2ae,0x2b1,0x1bd,0x221)]=![],_0x1193d5['AGZey'](addLog,_0x2376c9(0x313,0x2e2,0x2b8,0x288)+_0x2376c9(0x244,0x345,0x2f7,0x2a4))));}