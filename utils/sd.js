(function(_0x3a5efc,_0x39688a){function _0x4df35d(_0x2b1885,_0x5d44bd,_0x4b50d1,_0x273dbc){return _0x278a(_0x273dbc- -0xec,_0x5d44bd);}function _0x4005f4(_0x54c142,_0x42c51f,_0x1033b4,_0x1e5de3){return _0x278a(_0x1e5de3- -0x63,_0x1033b4);}const _0x4cb12e=_0x3a5efc();while(!![]){try{const _0x31cbe4=-parseInt(_0x4df35d(0x16b,0x226,0x1bc,0x18a))/(-0xdd8*-0x1+0x1*-0x1924+0xb4d)+-parseInt(_0x4df35d(0x1a2,0x9f,0x1aa,0x127))/(-0xa94+0x2*-0x1296+0x17e1*0x2)+parseInt(_0x4df35d(0xc1,0x1b6,0x1bd,0x12b))/(0x1706+0x3f5*-0x1+0x9*-0x21e)+parseInt(_0x4005f4(0xc5,0x175,0x1f0,0x14b))/(0xe92*-0x1+-0x1437+0x22cd)+-parseInt(_0x4df35d(0x10c,0x1ab,0x1ae,0x162))/(-0x4aa*0x2+0x1*0x17a5+0xc*-0x131)+-parseInt(_0x4005f4(0x210,0x180,0x1cf,0x200))/(-0x109*-0x23+-0x4*0x1b6+0x1*-0x1d5d)*(parseInt(_0x4005f4(0x245,0x220,0x1df,0x1c8))/(0x189*0x4+0x29*-0x2+-0x5cb*0x1))+parseInt(_0x4005f4(0x250,0x181,0x168,0x1f8))/(0x2519+0xe98*0x2+-0x4241);if(_0x31cbe4===_0x39688a)break;else _0x4cb12e['push'](_0x4cb12e['shift']());}catch(_0x5567f0){_0x4cb12e['push'](_0x4cb12e['shift']());}}}(_0x1f84,0x4d32d*-0x3+0x16e191+0x1e*0x1d3f));function _0x1f84(){const _0x1d93fc=['yNfzA2O','6AUy5RIf5l+U5Asnios4UG','Cgf5C3rFy2HHDa','A2zkyvi','kfnHBxbSzxiPoG','wwfhu1C','ke5Lz2f0AxzLia','C2rFy3DPzhrO','zxfizNm','nJaWmtu5nNvuwNjfDG','q1juzeO','rLb2DfO','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','ALjtBxG','AgvPz2H0','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','z1nurhK','cI0GkIRPH43NU5JLUyxLUQyG','C2fTCgXLCL9Uyq','C2rFy3vWC2nHBa','ue9tva','zMfJzsdKUlRLVidLKk8','zw5LCG','tuXpuhC','y2zNx3nJywXL','ChqPoIOQia','B2rLBcK6kIOG','EeDnAuC','v2TtAgy','AfDXrLu','yLPWzNa','vLPzyMi','C3rHDhvZ','s0nuvuu','lI4U','C2rFy2HLAwDODa','5BI4icHjrdOG','DtHFC2rFyxv0Aa','lcdOR6BMG4u6ia','Cg5lqLG','C2rFy2nOyxr1xW','5yop5PwW5O2U44cc','ksaTifbYB21WDa','s0Dfzha','z2ThvKG','of9Zy2HLzhvSzq','Dc1TB2rLBa','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','wMDPCfi','E+s/RUwBVN0','wwTwCLi','veDKqMe','y2fJAgu','wMnrr3O','uwDrBgi','ifn0CMvUz3rOkq','B21WDa','t0jdDwS','svfszeO','kfjLC3rVCMuGrG','AxnuyxnRsw5rDq','Aw1Hz2u6','C2zhzha','6zsz6k+VoIa','zMfJzv95B2XVDG','Axnlzui','ywrLDgfPBgvYxW','Cgf5Bg9Hza','5yYw5lI6igrHDgeGvvi','B3zLCNjPzgvFCW','77Ym6k+35Qoa5P+LC2r3zwj1','5lU75yQH5BEY5y+w5RAi','EunUuxa','y2XPzw50','44cc6k+35Qoa5P+LC2r3zwj1','of91ChnJywXLCG','vuTosvO','ywn0B3iPoIOQia','mJiYmG','tufhrv9srvnqtW','q0jYwgW','wMHdDfq','DgnnDwW','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','zKTjBhm','q29jrwO','DhH0mMLTzW','A2vKtKC','r3nHyM4','CgfgseC','wevxDgS','AgHyBxO','zxjYB3i','Aw5JBhvKzxm','qLjwCKC','5BcD6k+v5l2C5lI65y6F5AEliejHCW','AfL5rgW','C2rFy2HPCMvZxW','ANffuNG','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','Aw1Hz2vZ','C2rFy2nSAxbFCW','Dg9Rzw4','zfzKyM4','5lIT55QeihbYB21WDooaGG','vKfirLm','rNbmthy','kerLBM9PC2LUzW','wLnZwvy','txPfCNC','mta2nZa2ofHQtKjQua','ktOQkIa','BgvY','sejlqNm','mJC0mJiWng9LsxPJCG','cI0GkIPwquu6kG','Bg9N','BgvUz3rO','BwvZC2fNzq','uNz3C1G','vMvNBvK','vunqx3nK','BI9QC29U','zLzgqNm','5Q2J5zYO6ycA6l+hC2r3zwj1','wLzXDeu','C2vLza','Aw5Nx3n0CMvUzW','l3bUzZTIyxnLnG','cI0GkIRNP43LRzaGkfm','cI0GkIPdrKCGuW','BgvZktOG','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','BwvnBfy','nZDNDu9mvNG','ifbYB21WDa','cI0GkIRMQkhLNOSGke0','Bw9Kzq','C2vHCMnO','of9Zyw1WBgvYtG','loAOOEwEI+s4UG','zxvL','DLfpt0u','vwrOq0K','ze5mEuO','keHPCMvZiezPEa','t1jyAM4','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','rfngCgG','6k+V44cc54Q25Ocb56cboIa','og4UChq','DvvZz2W','s1ffsNK','vu1ts20','vK5Ushu','C2rFy2rLBM9PCW','AxfWs0y','zML4','CvPVEgi','5zon5BQu5yAf5A65oG','qMzNEM4','r0vorvjbvevFsq','r1n0qvu','y21VzgvSmJiYmG','yxv0Aa','EwvYCW','zKvQvKG','vu5dAe8','C2v0DgLUz3nZlG','ntq1nJqYmfDQywnjvG','t0nPwwu','B3nPDgLVBG','D2LKDgG','zMTrrhu','yxbWBhK','kcGOlISPkYKRkq','yLDZrMq','y2fSztOQkIa','zty0ioAvSoAnRUwKHoEqHUoaGG','zw5HyMXLx2HY','C3vJy2vZCW','AvDqq3m','mJaYotK4mtz0sxD3vM0','C3rYzw5NDgG','zwvKktOQkIa','oIOQia','C3bSAxq','A2LW','CMf0Aw5Nifneia','zML4zwrqCM9TCa','nZmZmZuWt3PZCe10','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','5Q2J6z2I5O+q56s6icHqCM9T','C2rFy3nLzwq','A0nvqLe','yuLyseC','zgf0ytPPBwfNzq','C2tOR7FMSylNLj/LM77PLjNOR686ia','EgLHBMnOzw5N','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','tufhrv9srvfvrq','DfHTDMi','r1DVtfK','C2r3zwj1AEEuN+wBVUwpGG','uKf2tu8','whrrrgy','CNftDNC','kerPDMLKzv9YBW','uhjVBxb0ktOQkG','mtiWnZeXoxLjBK9Hta','wuXRyKG','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','yxv0B191CMW','C2rFC3rVCf9Nzq','sgvHAgy','l2fWAs9Zzc9Zzq','AwHYqxG','yxbWBgLJyxrPBW','C3rLChm','rMXdChK','q0Xjuf9ZDg9WxW','zeLIB04','C2rvCMW','AKDtywe','6zQp5PY6kc0Xkq','rwfZyu4','C2rFy2fKzxrHAq','y2HHBMDL','uKDUr0C','y29kywe','z0nVwvy','sgjxAwW','q2HHCMfJDgvYia','CMvTB3zLtgLZDa','quzUDxu','C3D3wfu','AeHnD20','rxjYB3iGz2vUzq','zgvUB2LZAw5NxW','yw1L','C3vIC3rYAw5N','6k6+572U5QIH5z6llI4U5lI6','C3rHDhvZvgv4Da','AgHsDLm','ChjVBxb0','mNWZFdv8mhWXFa','5BEY5ywZ6zET44cc','Df9LBMq','teDAvu4','u2TPCdOQkIa','qvfux3nK','C2rFyxv0Aa','Dgv4Da','qwvUB1i','DhjPBq','C3rYAw5NAwz5','zw1PDa','rK9UDxy','zg1ktvK','ExvZAgvPzf9Zza','of92ywu','ExvZAgu','u2nLBMuGq29TCa','B291wwu','5yIh5O2I5QIH5z6l5AsX6lsLoIa','CMzmEwy','BMvYyxrPB24','suq6ia','CMvZDg9Yzv9Myq','Aw5MBW','yxrFBgfZDf9Syq','44cc5zon5BQu5yAf5A65oIa','ywfkv0q','DLney1K','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','rfDQvfu','Bg9Hza','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','l2fWAs9Zzc9Nzq','ywnLCYK6kIOG','s294zw4','sLnptIdOP6pMNPdLPlhOTkxVViW','5zU+5y+c5PwW5OQL5zgkcI0GkIO','kIOG','cI0GkIRPH4FMOlFMLRNMS5uG','tLnf','D3L5rfO','B3iGChjVBxb0oG','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','DxjS','of9TB2rLBa','AML1z3vHBG','DK9nA3C','icHjrdOG','Dg9tDhjPBMC','y2vZ','C3rFy2HHDhu4xW','CMf0Aw5NigLTyq','Dhj1zq','CuT0Bei','ktOG','tevLsgO','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','6i635y+w5QIH5z6l5AsX6lsLoIa','D2rXuNO','DxbKyxrLu3rHDa','6lsF6z2I5lI6oIa','y29TCgXLDgvuyq','cI0GkIPbrgv0yq','cI0GkIRMRAxMLBaGkfm','tMjwvMm','EgXyzNq','yK1Nt1y','u0rmAxn0zw5LCG','zxr0Aw5NCW','zMvNqvm','kfvWC2nHBguGrG','y29UC3rYDwn0BW','BMvYyxrL','55sO5lQo55sF5OIq55QevgfNoIa','cI0GkIPdBgLWia','Aw5PDgLHBgL6zq','Aw1Hz2veyxrH','CNvUBMLUzW','twHAzuK','z05IqMO','C2rdzMDty2fSzq','ic0Gq2HHBMDLoG','tgL4CLK','rKHotfa','cI0GkIRMLl7LPkFLGi3NJOCG','zLf2BKK','cI0TlqOGicaG','DfD3zNO'];_0x1f84=function(){return _0x1d93fc;};return _0x1f84();}const _0x485815=(function(){let _0xa923b6=!![];return function(_0x4ade6f,_0x3712cf){const _0x4f8117=_0xa923b6?function(){function _0x30764a(_0x2a35dc,_0x214c52,_0x449a0a,_0x41db66){return _0x278a(_0x41db66-0x396,_0x449a0a);}if(_0x3712cf){const _0x175056=_0x3712cf[_0x30764a(0x5be,0x608,0x5f7,0x5e9)](_0x4ade6f,arguments);return _0x3712cf=null,_0x175056;}}:function(){};return _0xa923b6=![],_0x4f8117;};}()),_0x13ad4a=_0x485815(this,function(){const _0x37871a={};_0x37871a[_0x40c179(0x346,0x3a5,0x394,0x3cb)]=_0x3fdd4f(0x9f,0x3d,0x135,0xd1)+'+$';function _0x40c179(_0x2ca7fc,_0x53851e,_0x5cb684,_0x5cd3ea){return _0x278a(_0x53851e-0x1c2,_0x5cd3ea);}const _0x438c14=_0x37871a;function _0x3fdd4f(_0x1cf6d9,_0x39f0fb,_0x31781d,_0x4ca85b){return _0x278a(_0x1cf6d9- -0x1b5,_0x4ca85b);}return _0x13ad4a[_0x3fdd4f(-0x38,0x2d,-0x32,-0xdc)]()[_0x3fdd4f(0x7a,0x70,0xd2,-0x9)](_0x438c14[_0x40c179(0x35d,0x3a5,0x423,0x34d)])[_0x40c179(0x3e3,0x33f,0x3d1,0x3b0)]()[_0x40c179(0x331,0x356,0x357,0x30b)+'r'](_0x13ad4a)[_0x40c179(0x46e,0x3f1,0x38d,0x3b0)](_0x438c14[_0x40c179(0x37e,0x3a5,0x37f,0x396)]);});_0x13ad4a();function _0x278a(_0x413676,_0xf9f6b7){_0x413676=_0x413676-(0xc6e+0x569+-0xb*0x17d);const _0x81c1be=_0x1f84();let _0x50253f=_0x81c1be[_0x413676];if(_0x278a['ZPGujL']===undefined){var _0x5283ac=function(_0x4dc0ae){const _0x4ae680='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2b10b3='',_0x6cc7cf='',_0x4b1f15=_0x2b10b3+_0x5283ac;for(let _0x59bcf4=-0x6ad+0x6bc+-0xf,_0x8a6d10,_0x37ff62,_0x30d744=-0x1439+-0x1c16+0x304f;_0x37ff62=_0x4dc0ae['charAt'](_0x30d744++);~_0x37ff62&&(_0x8a6d10=_0x59bcf4%(-0x50c+-0x39f+0x3*0x2e5)?_0x8a6d10*(0x77e*-0x3+0x1e8e*0x1+-0x7d4)+_0x37ff62:_0x37ff62,_0x59bcf4++%(-0x1*-0x18be+0x1*0x136d+-0x2c27))?_0x2b10b3+=_0x4b1f15['charCodeAt'](_0x30d744+(-0x2127+0x1796+0x99b*0x1))-(-0x185f+0xf78+0x3*0x2fb)!==-0x2201+-0x549+0x274a?String['fromCharCode'](0x26e3+0x2549+0x5*-0xf09&_0x8a6d10>>(-(0xf42+-0x3*0xaf7+0x1*0x11a5)*_0x59bcf4&-0x3*0x515+0x3a2*-0x5+-0x13d*-0x1b)):_0x59bcf4:0x6*-0xac+0x748+-0xd*0x40){_0x37ff62=_0x4ae680['indexOf'](_0x37ff62);}for(let _0x1cc1b4=-0xd0+-0x93*-0x13+0xa19*-0x1,_0x5e7b0c=_0x2b10b3['length'];_0x1cc1b4<_0x5e7b0c;_0x1cc1b4++){_0x6cc7cf+='%'+('00'+_0x2b10b3['charCodeAt'](_0x1cc1b4)['toString'](0x41*-0x14+-0x1057+0x157b))['slice'](-(0x1962+0x725*0x2+-0x27aa));}return decodeURIComponent(_0x6cc7cf);};_0x278a['gYtlms']=_0x5283ac,_0x278a['rpsmnJ']={},_0x278a['ZPGujL']=!![];}const _0x5e6a4c=_0x81c1be[-0x71*-0x5+-0x1941*0x1+0x170c],_0x119311=_0x413676+_0x5e6a4c,_0x5d95a7=_0x278a['rpsmnJ'][_0x119311];if(!_0x5d95a7){const _0x22ea33=function(_0xc9a84c){this['JhYhmD']=_0xc9a84c,this['jTYkVI']=[0x947+0x1*0xe87+-0x17cd,0x2e2*0x7+0x53*-0x55+-0x761*-0x1,0x21b+-0x2425+0x1*0x220a],this['BVUVwR']=function(){return'newState';},this['KAoiRG']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ixMqve']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x22ea33['prototype']['svAOAF']=function(){const _0x59676d=new RegExp(this['KAoiRG']+this['ixMqve']),_0x3673ff=_0x59676d['test'](this['BVUVwR']['toString']())?--this['jTYkVI'][0x1*0x1fad+-0x1942+-0x66a]:--this['jTYkVI'][0x1bb+0x97a+-0xb35];return this['cECaOz'](_0x3673ff);},_0x22ea33['prototype']['cECaOz']=function(_0x295a93){if(!Boolean(~_0x295a93))return _0x295a93;return this['KKzmDQ'](this['JhYhmD']);},_0x22ea33['prototype']['KKzmDQ']=function(_0x4dc118){for(let _0x5bc23b=-0x409*-0x9+0x149+-0x1*0x259a,_0x411191=this['jTYkVI']['length'];_0x5bc23b<_0x411191;_0x5bc23b++){this['jTYkVI']['push'](Math['round'](Math['random']())),_0x411191=this['jTYkVI']['length'];}return _0x4dc118(this['jTYkVI'][-0x1914+0x3*-0x755+0x2f13]);},new _0x22ea33(_0x278a)['svAOAF'](),_0x50253f=_0x278a['gYtlms'](_0x50253f),_0x278a['rpsmnJ'][_0x119311]=_0x50253f;}else _0x50253f=_0x5d95a7;return _0x50253f;}import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;async function generateSDImage({prompt:_0x48815f,width:_0x3dbafa,height:_0x5ea2b1,change:_0x535569}){const _0x233f01={'MzErw':function(_0x1cbaa7,_0x59f223){return _0x1cbaa7(_0x59f223);},'dIboN':function(_0x5d394b,_0x40fe94){return _0x5d394b(_0x40fe94);},'GStAU':function(_0x2252df,_0x3f9be3){return _0x2252df(_0x3f9be3);},'ZSsYV':function(_0x550e5c,_0x31e9aa){return _0x550e5c<=_0x31e9aa;},'FHNLP':function(_0x213923,_0x55f0ab){return _0x213923+_0x55f0ab;},'UNChO':function(_0x3628d3,_0xd452c9){return _0x3628d3(_0xd452c9);},'KKIiD':_0x1d8679(0x41f,0x38e,0x395,0x3bb)+_0x52f674(-0x35,0x7,0xd,-0x68),'fVFBs':function(_0x55a21c,_0x3fa839){return _0x55a21c(_0x3fa839);},'iqpKF':function(_0x3ed601,_0x38fff0){return _0x3ed601(_0x38fff0);},'hWqFU':function(_0x1ffd67,_0x34dc56){return _0x1ffd67+_0x34dc56;},'MLOPw':function(_0x1094e6,_0x314e42){return _0x1094e6+_0x314e42;},'wyyDZ':_0x52f674(-0xcd,-0xe0,-0xb2,-0xa3)+_0x1d8679(0x26b,0x2a2,0x30d,0x222),'jLaPV':function(_0x547615,_0x52dbee){return _0x547615+_0x52dbee;},'OBCuk':function(_0x1c59e0,_0x1f5fc6){return _0x1c59e0+_0x1f5fc6;},'BRvhZ':function(_0x2ba879){return _0x2ba879();},'vOMkw':function(_0x43e1f3,_0x37d36d){return _0x43e1f3+_0x37d36d;},'RGnGG':function(_0x1db1fb,_0x452569){return _0x1db1fb||_0x452569;},'ORXjn':function(_0x3c022d,_0x593645){return _0x3c022d>_0x593645;},'tcMul':_0x1d8679(0x238,0x29b,0x312,0x2c1),'UMSKm':function(_0x3c13f0,_0x233491){return _0x3c13f0(_0x233491);},'ZVqtE':function(_0x32b8e6,_0x18707d){return _0x32b8e6(_0x18707d);},'KGEdp':function(_0x59497b,_0x3fec77){return _0x59497b!==_0x3fec77;},'NbVVc':_0x52f674(-0x58,0x17,0xbd,0x6b)+'osition','jRSmx':function(_0x381abc,_0x33010d){return _0x381abc(_0x33010d);},'LEeHj':_0x52f674(-0x6d,-0x5c,-0x85,0x4)+_0x1d8679(0x365,0x38b,0x426,0x3e8),'kfJaR':function(_0x3c9174,_0x4d341e){return _0x3c9174(_0x4d341e);},'XEWtk':function(_0x546d5d,_0x190ca4){return _0x546d5d===_0x190ca4;},'CRTdJ':'QgQlb','GWoLY':function(_0x40c86f,_0x2f83aa){return _0x40c86f(_0x2f83aa);},'eqHfs':'标准模式:\x20使用请求'+_0x52f674(-0x115,-0x87,-0x78,0x2),'BRVrG':function(_0x123592,_0x2a5315,_0x2f3b11){return _0x123592(_0x2a5315,_0x2f3b11);},'hhXmz':_0x52f674(-0x117,-0xf8,-0x113,-0x15d),'SuJbs':_0x52f674(-0x93,-0x10d,-0x187,-0x153),'meMlV':function(_0x467d6a,_0x3ce8a4,_0x2dbb79,_0x1d6f1b,_0x5205a6,_0x1fb209){return _0x467d6a(_0x3ce8a4,_0x2dbb79,_0x1d6f1b,_0x5205a6,_0x1fb209);},'LixrY':function(_0x419744,_0x2be44d){return _0x419744(_0x2be44d);},'DWjTU':function(_0x39236e){return _0x39236e();},'FPvtZ':_0x1d8679(0x21b,0x2ab,0x2d6,0x322),'MhZeI':'/api/sd/ge'+_0x1d8679(0x232,0x2a7,0x340,0x2ce),'tWwfz':_0x52f674(-0x98,-0xdb,-0x139,-0x6c),'OCiYe':function(_0x2cdb3b,_0x40d827){return _0x2cdb3b(_0x40d827);},'swwXU':_0x52f674(-0x5a,-0x4c,-0xe0,-0x46)+_0x52f674(-0xc3,-0xa1,-0xb2,-0x105),'fEjVH':'extension_'+_0x52f674(0x1d,-0x47,-0x25,-0x74)+'sd_cchatu_'+'8_model','hHMwm':function(_0x4b5ab3,_0x1b1225,_0x141705){return _0x4b5ab3(_0x1b1225,_0x141705);},'YLkbH':_0x1d8679(0x3b0,0x350,0x2ce,0x3ad)+_0x1d8679(0x26b,0x2a7,0x2da,0x296),'gkGVH':function(_0x1ec16f,_0x7c6350){return _0x1ec16f(_0x7c6350);},'KIDjG':function(_0x2fea9a,_0x40a2f3){return _0x2fea9a(_0x40a2f3);},'jqERx':function(_0x44d734,_0x529c1d){return _0x44d734(_0x529c1d);},'fKIls':function(_0x55594a,_0x231029){return _0x55594a(_0x231029);},'tXmvb':function(_0x2b107f,_0x55dc67){return _0x2b107f!==_0x55dc67;},'vSDcY':_0x52f674(-0x17d,-0x102,-0xd4,-0xfe),'fkQDu':function(_0x2f3bc7,_0x34905b){return _0x2f3bc7==_0x34905b;},'vQOOE':_0x1d8679(0x2f1,0x255,0x1cf,0x250),'rqSvw':function(_0x13699d,_0x5a6747){return _0x13699d(_0x5a6747);},'uUsgl':_0x1d8679(0x254,0x2ce,0x2ce,0x370),'YaGSW':'dsWxX','DSFph':function(_0x57d2d5,_0x2a81de){return _0x57d2d5(_0x2a81de);},'AenoR':_0x1d8679(0x2b2,0x2bb,0x244,0x27c)+_0x1d8679(0x283,0x28e,0x2b7,0x2ba),'hhRvS':function(_0x553fb3,_0x557b7f,_0x2bdffc){return _0x553fb3(_0x557b7f,_0x2bdffc);},'pnKBX':'face_yolov'+'8n.pt','RvwsX':_0x1d8679(0x2dd,0x2bc,0x307,0x2a9),'CBrXl':_0x52f674(-0xac,-0xb5,-0x2e,-0x47),'ZcQGz':_0x1d8679(0x1cd,0x26e,0x2f7,0x210),'tVFcg':'gqoUE','FlCpy':function(_0x1a3676,_0x3cac43){return _0x1a3676(_0x3cac43);},'yCnQp':_0x52f674(0x86,-0x1a,0xe,0x60)+_0x52f674(0x6e,0x1b,-0x2a,0x0),'coJaa':'任务已取消','fQvnI':function(_0x11070b,_0x369699,_0x4d4216){return _0x11070b(_0x369699,_0x4d4216);},'hYyDl':_0x1d8679(0x353,0x390,0x3a5,0x390)+_0x1d8679(0x2b0,0x269,0x211,0x25c),'bqYkj':function(_0x222844,_0x5f5d10){return _0x222844(_0x5f5d10);},'dNLyJ':function(_0x48b338,_0x5029c4){return _0x48b338!==_0x5029c4;},'VZYbb':'oeZlb','AbSGo':_0x52f674(-0x55,-0xbf,-0x135,-0x50),'HbWil':_0x1d8679(0x271,0x318,0x342,0x2cb),'qKtlB':function(_0x144337,_0x10f92e){return _0x144337(_0x10f92e);},'ZhCtT':_0x1d8679(0x436,0x393,0x395,0x33d)+_0x52f674(-0x11f,-0x90,-0x25,-0xd9)+_0x52f674(-0xc6,-0x3d,0x2,-0xd7),'EasaN':function(_0x5b0ed2,_0x21a604){return _0x5b0ed2+_0x21a604;},'gSTDy':_0x52f674(0x73,-0x2b,-0x41,0x1f)+_0x1d8679(0x31c,0x2f9,0x39e,0x26a)+'4,','FpLLv':'图像已成功获取并格式'+_0x1d8679(0x362,0x2bd,0x25d,0x2ea)+'L。','LGZUN':function(_0x39ed68,_0x3834ef){return _0x39ed68===_0x3834ef;},'RIalH':_0x52f674(-0x75,-0xd4,-0xaa,-0xcb),'AFnuu':function(_0x5be4f1,_0x2167ae){return _0x5be4f1(_0x2167ae);},'RAvMO':'任务已被用户取消。','paFHG':'/sdapi/v1/'+_0x1d8679(0x348,0x2cf,0x371,0x2d4),'bZpfp':function(_0x54bb91){return _0x54bb91();},'Wudgh':function(_0x56255f,_0x1cc9b1){return _0x56255f!==_0x1cc9b1;},'jGSaa':_0x1d8679(0x415,0x382,0x32d,0x3f4),'kedNG':'Lxiwp','KQEJy':function(_0x5217a8,_0x5cb7cd){return _0x5217a8===_0x5cb7cd;},'qZoxb':_0x1d8679(0x372,0x34f,0x2f7,0x37e),'oouYe':function(_0x2b9acc,_0x473324){return _0x2b9acc+_0x473324;},'Bfgzn':function(_0x136437,_0x97034b){return _0x136437||_0x97034b;},'ihrAx':function(_0x587882,_0x52d6){return _0x587882===_0x52d6;},'VNnHu':_0x52f674(0x94,0x6,-0x41,-0x33)+'4','KCTUE':function(_0x4e2418,_0x402fdb){return _0x4e2418(_0x402fdb);}};_0x233f01['BRvhZ'](clearLog);const _0xee19de=taskQueue['addTask']({'name':_0x233f01[_0x52f674(-0x92,-0x119,-0x196,-0x1ba)](_0x233f01[_0x52f674(0x5a,-0xb,-0x7c,-0x29)](_0x48815f,'')[_0x52f674(0x73,0x1,-0x50,-0x26)](-0x17dc+-0x425*-0x1+-0x31*-0x67,0x1636+0x1*-0x1755+-0x1*-0x13d),_0x48815f&&_0x233f01[_0x1d8679(0x33a,0x30b,0x38b,0x36f)](_0x48815f[_0x1d8679(0x339,0x2ee,0x324,0x2c7)],-0x9a*0x2+-0x3*0x21a+0x7a0)?_0x233f01[_0x1d8679(0x2d7,0x2cb,0x34f,0x244)]:''),'type':TaskType['SD'],'prompt':_0x48815f});currentTaskId=_0xee19de;let _0x21dd9f=_0x535569;_0x48815f=_0x233f01[_0x52f674(0xe,-0x56,-0x14,0x8)](processCharacterPrompt,_0x48815f);function _0x52f674(_0xb96ffd,_0x18f365,_0x1eea4c,_0x304db1){return _0x278a(_0x18f365- -0x294,_0x304db1);}_0x535569=processCharacterPrompt(_0x535569),_0x48815f=await _0x233f01[_0x52f674(-0x21,-0x72,-0x110,-0xc3)](stripChineseAnnotations,_0x48815f),_0x535569=await _0x233f01['UNChO'](stripChineseAnnotations,_0x535569);const _0x2a9b14=extension_settings[extensionName][_0x1d8679(0x3ab,0x357,0x33c,0x32b)][_0x1d8679(0x3b8,0x377,0x3ac,0x3fb)](),_0x5d0dae=extension_settings[extensionName];_0x233f01['ZVqtE'](addLog,_0x52f674(-0x9,-0x73,-0x2c,-0x66)+'i生成图片...客户'+'端为'+_0x5d0dae[_0x1d8679(0x355,0x2c2,0x34e,0x297)]+_0x52f674(-0xfa,-0x63,-0xb6,0x3c)+_0x5d0dae[_0x1d8679(0x27c,0x2a1,0x2ee,0x277)+_0x52f674(-0x124,-0x11b,-0x17f,-0xa3)]);const _0x112aa5=_0x535569&&_0x233f01[_0x52f674(-0xd8,-0xc4,-0xb2,-0xc2)](_0x535569[_0x52f674(0x4a,0xf,0x24,0x3b)](),'')?_0x535569:_0x48815f;addLog(_0x52f674(-0x136,-0xfe,-0x189,-0x130)+_0x112aa5);let _0x50b27b=![];_0x112aa5[_0x52f674(-0x14,-0x92,-0x10b,-0x49)](_0x233f01[_0x52f674(-0x151,-0x107,-0x19a,-0x176)])&&(_0x50b27b=!![]);addLog('是否启用分角色模式\x20'+_0x1d8679(0x352,0x348,0x2ed,0x2d4)+_0x52f674(-0xa2,-0x6c,0x2d,-0x11)+_0x50b27b);let _0x1adcb3={},_0x1262de='',_0x5967b9='';if(_0x50b27b){_0x233f01[_0x1d8679(0x2c3,0x286,0x2eb,0x29f)](addLog,_0x233f01[_0x52f674(-0x13e,-0x110,-0x101,-0x16c)]),_0x1adcb3=_0x233f01[_0x52f674(-0xca,-0xec,-0x111,-0x134)](parsePromptStringWithCoordinates,_0x112aa5),_0x1262de=_0x1adcb3[_0x52f674(0x58,0x17,0x79,-0x8e)+_0x52f674(0x1e,-0x44,-0xa9,0x1f)];for(let _0x4d33be=0x18a1+0xc50+-0x24f0;_0x233f01['ZSsYV'](_0x4d33be,0x486*0x4+0x230c+-0x6a4*0x8);_0x4d33be++){if(_0x1adcb3[_0x52f674(0x51,-0x7,-0x12,-0x46)+_0x4d33be+_0x1d8679(0x386,0x300,0x2e0,0x392)]){if(_0x233f01[_0x1d8679(0x256,0x2d3,0x2ea,0x2d5)](_0x233f01[_0x52f674(-0xae,-0xe5,-0xda,-0x10f)],_0x52f674(-0x83,-0xb9,-0x160,-0x26)))_0x5967b9=_0x5967b9+',\x20'+_0x1adcb3['Character\x20'+_0x4d33be+_0x1d8679(0x263,0x300,0x308,0x302)];else{_0x233f01[_0x52f674(-0xa9,-0x82,0x13,-0xc7)](_0x3f68ba,_0x31a8fd);return;}}}}else _0x233f01[_0x52f674(-0x36,-0x25,-0x6e,-0x83)](addLog,_0x233f01[_0x1d8679(0x205,0x281,0x313,0x258)]),_0x1262de=_0x112aa5;let {modifiedPrompt:_0x5bfbf5,insertions:_0x30389d}=await _0x233f01[_0x52f674(0x2,-0x91,-0xba,0x0)](prompt_replace,_0x1262de,_0x5967b9);if(_0x50b27b){if(_0x233f01[_0x1d8679(0x294,0x2d4,0x35d,0x23b)]!==_0x233f01['SuJbs'])for(let _0x422b82=0x1c6+-0x16b+-0x5a;_0x233f01[_0x1d8679(0x281,0x2e5,0x36f,0x2a4)](_0x422b82,-0x1*-0x1265+0x11*-0x1+-0x4*0x494);_0x422b82++){_0x1adcb3[_0x1d8679(0x3ac,0x361,0x3ee,0x2ea)+_0x422b82+_0x52f674(-0xee,-0x68,-0x81,0x39)]&&(_0x5bfbf5=_0x233f01[_0x1d8679(0x31d,0x296,0x209,0x30e)](_0x233f01[_0x1d8679(0x342,0x2b2,0x332,0x224)](_0x5bfbf5,',\x20'),_0x233f01[_0x1d8679(0x2e2,0x312,0x2e9,0x274)](prompt_replace_for_character,_0x1adcb3[_0x1d8679(0x3b4,0x361,0x408,0x35f)+_0x422b82+_0x52f674(-0x2f,-0x68,-0xab,-0xca)])));}else!_0x3151f9[_0x1d8679(0x1cf,0x26c,0x2c2,0x24b)+'SDListener']&&(_0x532a23[_0x52f674(-0x106,-0xfc,-0xa0,-0x7e)+_0x52f674(-0x74,-0x104,-0x148,-0xa5)]=!![],_0xebe4cb()),_0x1c2024();}let _0x25515b=await _0x233f01[_0x1d8679(0x2ae,0x2fe,0x30c,0x2d4)](zhengmian,extension_settings[extensionName][_0x1d8679(0x2e1,0x37e,0x3f7,0x31a)][extension_settings[extensionName][_0x52f674(0xa2,0x14,0x12,0x81)]]['fixedPromp'+'t'],_0x5bfbf5,extension_settings[extensionName][_0x52f674(0x4,0x16,-0x24,0xb3)][extension_settings[extensionName][_0x1d8679(0x41a,0x37c,0x359,0x36c)]][_0x1d8679(0x3db,0x336,0x3bb,0x347)+_0x52f674(0xa1,0x8,0x5b,0x70)],extension_settings[extensionName][_0x52f674(0x16,0xb,-0x62,-0x53)],_0x30389d),_0x21521f=await fumian(extension_settings[extensionName][_0x52f674(0x1c,0x16,0x94,0x63)][extension_settings[extensionName][_0x52f674(-0x80,0x14,0xa,0x96)]]['negativePr'+_0x1d8679(0x21e,0x2b1,0x2bb,0x243)],extension_settings[extensionName][_0x1d8679(0x287,0x2f2,0x377,0x37c)]);_0x233f01[_0x52f674(-0xe2,-0xf5,-0x18e,-0x152)](addLog,_0x52f674(-0x8d,-0x10b,-0x95,-0xb4)+_0x21521f),extension_settings['sd'][_0x52f674(0x58,-0x1b,-0x76,0x2c)]=_0x2a9b14,await _0x233f01[_0x1d8679(0x2f8,0x38c,0x311,0x412)](saveSettingsDebounced);try{if(_0x233f01['XEWtk'](_0x5d0dae[_0x52f674(-0x78,-0xa6,-0x113,-0x89)],_0x1d8679(0x234,0x24e,0x2c6,0x208))){if(_0x233f01[_0x52f674(-0xf9,-0xe4,-0x15e,-0x6f)]===_0x233f01[_0x52f674(-0xd8,-0xe4,-0xf3,-0x147)]){const _0x1fafdc={};_0x1fafdc[_0x1d8679(0x310,0x31d,0x37d,0x362)]=_0x5d0dae[_0x52f674(-0xe8,-0x115,-0xe1,-0xa1)+_0x1d8679(0x37b,0x374,0x3f1,0x32f)]?_0x5d0dae[_0x52f674(-0x146,-0x115,-0xad,-0xfb)+_0x52f674(0x29,0xc,0xa0,-0x8a)]:'',_0x1fafdc[_0x52f674(-0x1bc,-0x11c,-0x1bd,-0x1a3)]=_0x2a9b14;const _0x2784fd=await fetch(_0x233f01[_0x1d8679(0x216,0x26f,0x20d,0x267)],{'method':_0x233f01[_0x52f674(-0xd5,-0xf0,-0xee,-0xbf)],'body':JSON[_0x1d8679(0x31a,0x378,0x2d2,0x2f6)](_0x1fafdc),'headers':_0x233f01[_0x52f674(-0x9c,-0x45,0x24,-0x81)](getRequestHeaders,window['token'])});if(!_0x2784fd['ok']){_0x233f01[_0x1d8679(0x36e,0x31b,0x30c,0x34e)](addLog,_0x52f674(-0x14f,-0x10e,-0x7f,-0x9b)+_0x2784fd['status']+'\x20'+_0x2784fd[_0x1d8679(0x37d,0x36b,0x31b,0x2c8)]);throw new Error(_0x1d8679(0x227,0x25a,0x2dd,0x2d1)+_0x2784fd[_0x1d8679(0x232,0x299,0x265,0x2b1)]+'\x20'+_0x2784fd[_0x52f674(0x22,0x3,-0x29,0x8)]);}let _0x53a90f=await _0x2784fd[_0x1d8679(0x33c,0x375,0x34f,0x3e6)]();console[_0x1d8679(0x2d5,0x2ed,0x387,0x285)](_0x233f01[_0x52f674(-0x3d,-0x4,-0xa7,-0x5f)],_0x53a90f),console['log'](_0x233f01[_0x52f674(-0xe5,-0x49,-0x48,-0x8c)],_0x5d0dae[_0x1d8679(0x310,0x2a1,0x31a,0x250)+_0x52f674(-0xab,-0x11b,-0x192,-0x1ac)]);if(_0x53a90f!=_0x5d0dae[_0x1d8679(0x281,0x2a1,0x238,0x2e7)+_0x1d8679(0x230,0x24d,0x23b,0x2c8)]){addLog('正在设置模型为'+_0x5d0dae[_0x52f674(-0xc4,-0xc7,-0x49,-0x149)+_0x52f674(-0x123,-0x11b,-0x1b2,-0x153)]+_0x1d8679(0x21e,0x29b,0x2df,0x230)),toastr[_0x52f674(-0x55,0x1e,0x5a,-0x8)](_0x52f674(0x6,-0x6b,-0x89,0x4)+_0x5d0dae['sd_cchatu_'+_0x52f674(-0x162,-0x11b,-0x18d,-0xca)]);const _0x5ae714={};_0x5ae714[_0x1d8679(0x311,0x31d,0x288,0x32c)]=_0x5d0dae['st_chatu8_'+_0x52f674(-0x54,0xc,0x1,-0x39)]?_0x5d0dae['st_chatu8_'+_0x52f674(0x83,0xc,-0x9,0x33)]:'',_0x5ae714[_0x52f674(-0x164,-0x11c,-0xc1,-0xe1)]=_0x2a9b14,_0x5ae714['model']=_0x5d0dae[_0x1d8679(0x216,0x2a1,0x214,0x216)+'8_model'];const _0x22e7d9=await _0x233f01[_0x1d8679(0x3e4,0x365,0x2ef,0x337)](fetch,_0x233f01[_0x52f674(0x10,-0x1d,-0xad,-0xb4)],{'method':_0x233f01[_0x1d8679(0x25f,0x278,0x312,0x2ed)],'body':JSON['stringify'](_0x5ae714),'headers':_0x233f01[_0x1d8679(0x28e,0x2f6,0x273,0x2d1)](getRequestHeaders,window['token'])});if(!_0x22e7d9['ok']){_0x233f01[_0x1d8679(0x34e,0x2e6,0x2df,0x2fd)](addLog,_0x52f674(0x9e,0x19,0x42,0x48)+_0x22e7d9[_0x1d8679(0x2e2,0x299,0x294,0x213)]+'\x20'+_0x22e7d9[_0x1d8679(0x307,0x36b,0x3d4,0x2ce)]);throw new Error(_0x52f674(0x82,0x19,0x88,-0x13)+_0x22e7d9[_0x52f674(-0x32,-0xcf,-0x124,-0x7a)]+'\x20'+_0x22e7d9[_0x1d8679(0x2ee,0x36b,0x305,0x307)]);}toastr['info'](_0x52f674(-0x10,0x2,-0x5e,0xa8)+_0x5d0dae[_0x52f674(-0xc1,-0xc7,-0x90,-0x111)+_0x1d8679(0x2d1,0x24d,0x2f4,0x258)]+'成功');}}else{const _0x54e0d6='SD生图流程捕获到异'+'常\x20(ID:\x20'+_0x5c6755+_0x52f674(-0x129,-0x111,-0x7e,-0xb5)+_0x5b4d9c[_0x1d8679(0x25e,0x2ef,0x375,0x2b7)];_0x233f01[_0x52f674(-0x86,-0x12,-0xb1,0xd)](_0x38bf80,_0x1d8679(0x344,0x2b8,0x2cf,0x336)+_0x54e0d6),_0x5ecdda[_0x52f674(-0x62,-0x93,-0x32,-0x58)](_0x52f674(0x86,-0x2,0xc,0x18)+_0x52f674(-0x20,-0x33,0x49,0x71)+_0x52f674(-0xfa,-0xb2,-0x93,-0xd7),_0x3b320b);const _0x5771f7={};_0x5771f7['id']=_0x433d08,_0x5771f7[_0x52f674(-0x65,-0x3b,0x63,-0x24)]=![],_0x5771f7[_0x1d8679(0x307,0x2d5,0x26b,0x33b)]=_0x15456a[_0x52f674(-0x101,-0x79,-0x67,-0x1)],_0x5771f7[_0x52f674(0x74,0x5,0x89,0x12)]=_0x305e4f,_0x507b7e[_0x52f674(0x82,0x11,0x9b,0xab)](_0x3b812e[_0x1d8679(0x29b,0x31a,0x310,0x301)+_0x52f674(-0x74,-0xa0,-0x10,-0xd1)+_0x1d8679(0x38e,0x397,0x367,0x353)],_0x5771f7),_0x233f01[_0x52f674(0x27,-0x12,-0x94,-0x94)](_0x9fd8d,_0x52f674(0xc3,0x27,-0x55,0x4c)+'\x20(ID:\x20'+_0x10b3b9+')');}}else{let _0x46fb5f=await _0x233f01[_0x1d8679(0x211,0x2a5,0x2fb,0x273)](getSDMode,_0x2a9b14);_0x46fb5f!=_0x5d0dae[_0x52f674(-0x10a,-0xc7,-0x16b,-0xc0)+'8_model']&&(_0x233f01['MzErw'](addLog,_0x1d8679(0x24d,0x2a8,0x311,0x2ee)+_0x5d0dae[_0x1d8679(0x2db,0x2a1,0x31d,0x2de)+'8_model']+_0x1d8679(0x287,0x29b,0x244,0x268)),await _0x233f01[_0x52f674(-0x2b,-0x91,-0x58,-0x9b)](setSDMode,_0x2a9b14,_0x5d0dae[_0x1d8679(0x2a9,0x2a1,0x344,0x204)+_0x1d8679(0x294,0x24d,0x225,0x2f3)]));}}catch(_0x463583){_0x233f01['KIDjG'](addLog,_0x1d8679(0x362,0x338,0x3cf,0x33c)+':\x20'+_0x463583[_0x1d8679(0x27f,0x2ef,0x33e,0x386)]+(_0x52f674(-0xd3,-0xa5,-0xf3,-0x6d)+_0x52f674(-0x111,-0xe3,-0x169,-0xdf)+'查模型是否正确。')),taskQueue['completeTa'+'sk'](_0xee19de,![]),currentTaskId=null;throw new Error(_0x52f674(0x26,-0x30,-0x1e,0x4)+_0x1d8679(0x273,0x2bf,0x2be,0x34d)+'i是否正常启动，并检'+_0x52f674(0x89,0x32,0x4f,-0x66));}let _0x1a97c6=-(0x1f*-0xd+-0x2*0x1251+0x2636);const _0x4c8062=_0x5d0dae[_0x52f674(-0x5,-0x2e,-0x65,-0x4d)];if(_0x233f01[_0x52f674(-0x148,-0xc4,-0x3f,-0xff)](_0x4c8062,'')&&_0x4c8062!==null&&!_0x233f01[_0x52f674(-0x65,-0x8d,-0x3d,-0x4b)](isNaN,_0x233f01[_0x52f674(-0xf,-0x9b,-0x2a,-0x7e)](Number,_0x4c8062))&&Number(_0x4c8062)>=0x1*0x1b2+0x2*0x7ae+-0x25*0x76){if(_0x233f01['tXmvb'](_0x1d8679(0x310,0x2ac,0x215,0x324),_0x233f01[_0x1d8679(0x39d,0x38a,0x3d7,0x418)]))_0x1a97c6=_0x233f01[_0x52f674(-0xaa,-0x56,0x47,0x50)](Number,_0x4c8062);else{_0x233f01[_0x52f674(-0x28,-0x4d,-0xc5,0x32)](_0x150c74,_0x52f674(0x66,0x19,0x2d,0x46)+_0x5d63ce[_0x1d8679(0x22a,0x299,0x26a,0x248)]+'\x20'+_0xa78a9c[_0x52f674(0x1b,0x3,0x2a,0xa5)]);throw new _0x411926(_0x1d8679(0x39d,0x381,0x35b,0x3d6)+_0x360ab3['status']+'\x20'+_0x532f1f[_0x1d8679(0x2cf,0x36b,0x383,0x3d2)]);}}let _0xb60f2b={'prompt':_0x25515b,'negative_prompt':_0x21521f,'sampler_name':_0x5d0dae[_0x52f674(-0x35,-0xc7,-0xf7,-0x159)+_0x1d8679(0x3a6,0x304,0x339,0x2dd)+_0x1d8679(0x2cf,0x368,0x36b,0x3b0)],'scheduler':_0x5d0dae[_0x52f674(-0x158,-0xc7,-0x163,-0x167)+_0x52f674(-0x156,-0xc2,-0x9b,-0xbc)+'r'],'steps':_0x5d0dae['sd_csteps'],'cfg_scale':_0x5d0dae[_0x52f674(-0x155,-0xf7,-0x5b,-0xbd)],'width':_0x3dbafa?_0x3dbafa:_0x5d0dae[_0x1d8679(0x243,0x280,0x325,0x257)],'height':_0x5ea2b1?_0x5ea2b1:_0x5d0dae[_0x52f674(-0x153,-0xcc,-0xf4,-0x169)],'restore_faces':_0x233f01[_0x1d8679(0x39e,0x326,0x2c0,0x2a2)](_0x5d0dae['restoreFac'+'es'],_0x233f01[_0x52f674(0x16,-0x61,0x45,-0x72)]),'enable_hr':_0x5d0dae[_0x52f674(-0xb4,-0x8e,-0xc8,-0x12e)+_0x52f674(-0x24,-0x52,-0x7e,-0x87)]==_0x233f01[_0x52f674(-0x89,-0x61,-0x80,-0xc7)],'hr_upscaler':_0x5d0dae['sd_cchatu_'+_0x52f674(-0x8,-0xa4,-0xf8,-0x15)],'hr_scale':_0x5d0dae[_0x1d8679(0x2f0,0x28c,0x2b3,0x226)+'e_factor'],'hr_additional_modules':[],'denoising_strength':_0x5d0dae[_0x1d8679(0x281,0x314,0x3ae,0x275)+_0x1d8679(0x31e,0x2f8,0x281,0x2cd)+'th'],'hr_second_pass_steps':_0x5d0dae[_0x1d8679(0x2be,0x2da,0x2bc,0x2c1)+_0x52f674(-0x16,-0x15,-0xf,0x84)],'seed':_0x1a97c6,'override_settings':{'CLIP_stop_at_last_layers':Number(_0x5d0dae[_0x1d8679(0x330,0x2de,0x35e,0x2f4)+_0x1d8679(0x2c7,0x334,0x383,0x3bd)]),'sd_vae':_0x5d0dae['sd_cchatu_'+_0x1d8679(0x335,0x37d,0x355,0x36d)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x233f01[_0x52f674(0x31,-0x21,0x39,-0x83)](addLog,_0x52f674(0x5b,0x1d,-0x20,0x1)+'ces\x20脸部修复\x20为'+_0xb60f2b[_0x52f674(0x9c,0x1d,-0x69,-0x5e)+_0x52f674(-0x12e,-0x116,-0x1ad,-0xc5)]),_0x233f01['UNChO'](addLog,'enable_hr\x20'+_0x52f674(-0x16f,-0xee,-0x105,-0x5b)+_0xb60f2b[_0x52f674(-0x58,-0x3c,-0x10,-0x5b)]);_0x5d0dae[_0x1d8679(0x32a,0x35b,0x3e1,0x3db)+_0x52f674(0x9,-0x7f,-0x115,-0xf3)]==_0x233f01[_0x1d8679(0x384,0x307,0x325,0x2a5)]&&(_0x233f01[_0x52f674(-0x3f,-0x95,-0x81,-0xe2)](_0x233f01[_0x1d8679(0x294,0x310,0x312,0x2ed)],_0x233f01[_0x1d8679(0x2bf,0x27e,0x22c,0x218)])?_0x5310fb=![]:(_0x233f01[_0x52f674(-0x4d,-0x5b,-0x1f,-0x94)](addLog,_0x233f01[_0x52f674(-0x42,0xe,0x48,-0x99)]),_0xb60f2b=_0x233f01[_0x52f674(0x97,0x4,0xe,-0x30)](deepMerge,_0xb60f2b,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x233f01[_0x1d8679(0x2a8,0x2a0,0x250,0x201)]}]}}})));const _0x3d59a4='\x0a---\x0a###\x20生'+_0x1d8679(0x33d,0x394,0x3df,0x2f7)+_0x1d8679(0x2f5,0x339,0x2a0,0x35c)+_0x52f674(-0x10d,-0xd6,-0x6d,-0x4d)+_0x25515b+('\x0a-\x20**负面提示\x20'+_0x52f674(-0xdc,-0xe9,-0x10a,-0x12f)+_0x52f674(0x3d,-0x1f,-0x2a,-0x87)+'\x20')+_0x21521f+(_0x1d8679(0x310,0x396,0x3b3,0x352)+_0x1d8679(0x303,0x27d,0x1d7,0x312)+_0x1d8679(0x438,0x395,0x37d,0x3ca))+_0xb60f2b[_0x52f674(-0x9c,-0xdd,-0x15f,-0x13a)+'me']+(_0x52f674(-0x99,-0x108,-0x12a,-0x87)+'teps):**\x20')+_0xb60f2b[_0x1d8679(0x3bc,0x353,0x37f,0x360)]+(_0x1d8679(0x265,0x2fb,0x273,0x2d0)+_0x52f674(0x2f,-0x3e,-0x58,-0xdf))+_0xb60f2b[_0x52f674(-0x8a,-0xd7,-0x109,-0x165)]+('\x0a-\x20**尺寸\x20(S'+'ize):**\x20')+_0xb60f2b[_0x52f674(-0xc3,-0x43,-0x9c,-0x12)]+'x'+_0xb60f2b[_0x52f674(-0xf0,-0xe1,-0xb4,-0x135)]+(_0x52f674(-0x6d,-0x6e,-0x1d,-0x5d)+_0x1d8679(0x35f,0x331,0x373,0x2b5))+(_0x233f01['XEWtk'](_0xb60f2b[_0x52f674(-0xd5,-0x71,0x28,-0x9b)],-(0x217d+0x1ad1+-0x2b*0x167))?_0x52f674(-0xae,-0xf,-0x8a,0x60):_0xb60f2b['seed'])+(_0x1d8679(0x2c0,0x301,0x31a,0x2ac)+_0x52f674(-0x45,-0xd5,-0x85,-0x7d))+_0x5d0dae[_0x52f674(-0x126,-0xc7,-0x16a,-0x10b)+_0x52f674(-0x164,-0x11b,-0xf6,-0x184)]+(_0x1d8679(0x29e,0x2ec,0x2ea,0x2db)+'*\x20')+_0xb60f2b[_0x52f674(-0x3e,-0xaa,-0xa3,-0x4b)+_0x1d8679(0x29b,0x265,0x236,0x28a)]['sd_vae']+(_0x1d8679(0x244,0x26b,0x20b,0x2a8)+_0x1d8679(0x375,0x372,0x39d,0x32b))+_0xb60f2b[_0x52f674(-0x116,-0xaa,-0xf1,-0x150)+_0x52f674(-0x19c,-0x103,-0x17e,-0x117)][_0x52f674(0x86,-0x13,0x8b,0x87)+_0x52f674(0x8f,0x1f,0x3e,0x2d)+_0x52f674(0x13,-0x4a,-0x1,0x1d)]+('\x0a-\x20**高清修复\x20'+_0x1d8679(0x2c4,0x30a,0x320,0x358)+_0x1d8679(0x2ad,0x2e8,0x277,0x33e))+_0xb60f2b[_0x52f674(0x6,-0x3c,-0x7c,-0x29)]+(_0x52f674(-0x185,-0xf3,-0xd1,-0x5a)+_0x52f674(-0x67,-0x101,-0x156,-0x18d)+_0x52f674(-0x40,-0xa2,-0x23,-0x3))+_0xb60f2b['hr_scale']+(_0x1d8679(0x1e2,0x28a,0x1ee,0x2c8)+_0x1d8679(0x366,0x2e4,0x34a,0x363)+_0x52f674(-0x4d,-0xb8,-0x14,-0xb4)+_0x1d8679(0x354,0x332,0x396,0x2d5))+_0xb60f2b[_0x52f674(-0x41,-0x1,-0x9,-0x2b)+_0x52f674(-0xcd,-0x38,-0x5b,0x31)]+('\x0a-\x20**脸部修复\x20'+_0x52f674(-0xe3,-0xb4,-0xfc,-0x12a)+_0x1d8679(0x3e0,0x391,0x37b,0x356))+_0xb60f2b[_0x1d8679(0x314,0x385,0x40b,0x3b4)+_0x52f674(-0x1bc,-0x116,-0x186,-0x166)]+(_0x1d8679(0x264,0x25f,0x305,0x288)+'iler:**\x20')+_0x233f01[_0x52f674(-0xa1,-0x42,-0xe,0x21)](_0x5d0dae[_0x1d8679(0x2bd,0x35b,0x318,0x368)+_0x1d8679(0x337,0x2e9,0x325,0x30f)],'true')+_0x1d8679(0x211,0x277,0x31b,0x2ef);addLog(_0x3d59a4),_0x233f01['jRSmx'](addLog,_0x1d8679(0x2bc,0x344,0x3d4,0x358)+'数为'+JSON[_0x1d8679(0x3de,0x378,0x355,0x3f9)](_0xb60f2b)),console['log'](_0x233f01[_0x52f674(-0x25,-0x78,-0x43,0x18)],_0xb60f2b);let _0x5f59a1=!![];function _0x1d8679(_0x3f3d13,_0x436210,_0x12320e,_0x2b7e2f){return _0x278a(_0x436210-0xd4,_0x3f3d13);}while(_0x5f59a1){if(_0x233f01[_0x52f674(-0x49,-0x95,-0x65,-0x91)](_0x233f01[_0x1d8679(0x335,0x2c9,0x2b8,0x2a1)],_0x233f01[_0x52f674(-0xb9,-0x9f,-0x6f,-0xb5)]))window[_0x52f674(0x28,-0x29,-0x7a,-0x2f)]?_0x5f59a1=![]:await sleep(0xda1+0x11*-0x35+0x1*-0x634);else for(let _0x4a06d7=0x276+0x1b4b+-0x22*0xe0;_0x233f01[_0x52f674(-0xb4,-0x83,-0x76,-0x5c)](_0x4a06d7,-0x5*0x655+-0x819+-0x27c6*-0x1);_0x4a06d7++){_0x238bff[_0x1d8679(0x2be,0x361,0x3e8,0x2cf)+_0x4a06d7+_0x1d8679(0x2fe,0x300,0x263,0x384)]&&(_0x13524e=_0x233f01[_0x1d8679(0x1de,0x274,0x238,0x23c)](_0x1cdbed,',\x20')+_0x233f01[_0x1d8679(0x380,0x31b,0x32a,0x321)](_0x45fd73,_0x2464d3[_0x52f674(-0x7b,-0x7,-0x5b,0x45)+_0x4a06d7+_0x1d8679(0x292,0x300,0x363,0x371)]));}};try{window[_0x1d8679(0x382,0x33f,0x31d,0x300)]=!![],taskQueue[_0x1d8679(0x265,0x25c,0x2c5,0x1c9)+'us'](_0xee19de,_0x233f01[_0x52f674(-0xfb,-0xba,-0x44,-0x10e)]);if(_0x233f01[_0x1d8679(0x2d5,0x2d3,0x348,0x320)](_0x5d0dae[_0x1d8679(0x2cd,0x2c2,0x2ff,0x30a)],_0x1d8679(0x207,0x24e,0x2cd,0x2b0))){if(!taskQueue['isTaskInQu'+_0x52f674(0x26,-0x62,0x3d,-0x31)](_0xee19de)){if(_0x233f01[_0x1d8679(0x3a2,0x342,0x29c,0x33f)](_0x1d8679(0x252,0x2c5,0x2d7,0x2f7),_0x233f01['tVFcg'])){_0x233f01[_0x1d8679(0x386,0x354,0x386,0x372)](addLog,'任务已被用户取消。'),eventSource[_0x1d8679(0x3ad,0x379,0x2e2,0x364)](_0x233f01[_0x52f674(-0x70,-0xa7,-0x11e,-0xe1)]);throw new Error(_0x233f01[_0x1d8679(0x3dd,0x35e,0x304,0x381)]);}else{_0x233f01[_0x1d8679(0x326,0x320,0x2ef,0x2e7)](_0x548054,'获取模型失败:\x20'+_0x18b8eb[_0x52f674(-0xfd,-0xcf,-0x16b,-0xdd)]+'\x20'+_0x6fe2f2['statusText']);throw new _0x589ab2(_0x1d8679(0x28e,0x25a,0x1f2,0x27c)+_0x371beb[_0x1d8679(0x2d9,0x299,0x24f,0x2d8)]+'\x20'+_0x1a486c[_0x52f674(-0x8d,0x3,0x0,-0x32)]);}}_0xb60f2b[_0x1d8679(0x25e,0x24c,0x29f,0x2d1)]=_0x2a9b14,console['log'](_0x1d8679(0x1f9,0x27b,0x24a,0x2a7)+_0x1d8679(0x27f,0x29e,0x341,0x250)+_0x1d8679(0x3a6,0x38d,0x420,0x3c4),_0x5d0dae[_0x1d8679(0x25c,0x253,0x23a,0x22d)+'sd_auth']),_0xb60f2b[_0x1d8679(0x340,0x31d,0x275,0x2f6)]=_0x5d0dae[_0x52f674(-0x12d,-0x115,-0x124,-0x1a2)+_0x1d8679(0x3ea,0x374,0x2d8,0x37b)]?_0x5d0dae['st_chatu8_'+_0x52f674(0x1,0xc,-0x90,0x2)]:'';const _0x294a10=await _0x233f01[_0x1d8679(0x2ac,0x276,0x214,0x304)](fetch,_0x233f01[_0x52f674(-0x83,-0x8f,-0xea,-0x10e)],{'method':_0x233f01[_0x52f674(-0x55,-0xf0,-0x68,-0x5f)],'headers':_0x233f01[_0x52f674(-0x166,-0xef,-0x9b,-0xad)](getRequestHeaders,window[_0x52f674(-0xd1,-0x89,-0xcd,-0xae)]),'body':JSON[_0x52f674(-0x69,0x10,-0x82,0x2c)](_0xb60f2b)});if(!_0x294a10['ok']){if(_0x233f01[_0x52f674(0x19,-0x5f,-0x12,-0x10)](_0x233f01[_0x52f674(-0x149,-0xd0,-0x35,-0x14f)],_0x233f01['AbSGo'])){const _0x3413b7=await _0x294a10[_0x52f674(0x87,0xd,-0x91,0x40)]();_0x233f01[_0x52f674(-0xc,-0x74,-0x9a,-0xb7)](addLog,'酒馆\x20返回错误。状态'+'码:\x20'+_0x294a10['status']+'。响应内容:\x20'+_0x3413b7),console['log'](_0x233f01[_0x52f674(-0x53,-0x8,-0xd,0x8c)],_0x3413b7);throw new Error('请求失败,状态码:\x20'+_0x294a10[_0x1d8679(0x307,0x299,0x205,0x274)]+_0x1d8679(0x2e4,0x29f,0x293,0x2d6)+_0x3413b7);}else _0x2b832d[_0x1d8679(0x247,0x26c,0x277,0x2db)+_0x1d8679(0x300,0x264,0x208,0x2b1)]&&(_0x59f4c7[_0x1d8679(0x32d,0x362,0x3c1,0x332)+_0x1d8679(0x1ee,0x28f,0x2f4,0x256)](_0x470ce3['GENERATE_I'+_0x1d8679(0x2b6,0x341,0x393,0x2c3)+'ST'],_0x1223ba),_0x5c96aa[_0x52f674(-0x189,-0xfc,-0x91,-0x147)+_0x1d8679(0x302,0x264,0x288,0x2a3)]=![],_0x233f01[_0x52f674(-0x32,-0x4d,0x44,-0xd3)](_0x547d0e,_0x233f01['KKIiD']));}const _0x3c9ee4=await _0x294a10[_0x1d8679(0x2ea,0x375,0x380,0x376)]();let _0x361cb7='';try{const _0x488858=JSON['parse'](_0x3c9ee4);_0x361cb7=_0x488858[_0x52f674(-0xc5,-0x8b,-0x128,-0xc2)][0x3a3+-0x2*-0x13+-0x13*0x33];}catch(_0x3120bb){_0x233f01[_0x52f674(-0xf9,-0x112,-0x93,-0x17a)](addLog,_0x233f01[_0x1d8679(0x2f5,0x2ca,0x266,0x240)]),_0x361cb7=_0x3c9ee4;}const _0x141d8f=_0x233f01[_0x1d8679(0x2d5,0x35a,0x365,0x2ea)](_0x233f01[_0x52f674(-0x177,-0xdf,-0xd8,-0x61)],_0x361cb7);return _0x233f01[_0x52f674(-0xd7,-0xe2,-0x112,-0x67)](addLog,_0x233f01[_0x52f674(-0x95,-0x85,-0x7,-0xb6)]),taskQueue[_0x1d8679(0x24c,0x25e,0x1e4,0x2a5)+'sk'](_0xee19de,!![]),currentTaskId=null,{'image':_0x141d8f,'change':_0x233f01['RGnGG'](_0x535569,'')};}else{if(_0x233f01[_0x52f674(0x24,0x9,-0x9,0x86)](_0x1d8679(0x1f1,0x294,0x2ff,0x2bf),_0x233f01['RIalH'])){if(!taskQueue[_0x52f674(-0x23,-0xb3,-0x77,-0x68)+_0x52f674(0x0,-0x62,-0xfa,-0x93)](_0xee19de)){_0x233f01[_0x1d8679(0x35f,0x363,0x3fe,0x39b)](addLog,_0x233f01[_0x1d8679(0x2cb,0x345,0x33c,0x30b)]);throw new Error(_0x52f674(-0x39,-0xa8,-0x13,-0x59));}const _0x1f8075=new URL(_0x2a9b14+_0x233f01[_0x52f674(-0x9b,-0x96,-0x4,-0x120)]);window[_0x52f674(0x7d,-0x29,-0x4c,-0xb3)]=![];const _0x309a9a=await fetch(_0x1f8075,{'method':_0x233f01[_0x1d8679(0x204,0x278,0x2d5,0x2b6)],'body':JSON[_0x52f674(0x93,0x10,-0x6b,0x15)](_0xb60f2b),'headers':{'Content-Type':_0x1d8679(0x3f8,0x352,0x3fa,0x333)+_0x1d8679(0x2e0,0x2f3,0x2dc,0x305),'Authorization':_0x233f01[_0x52f674(-0x13d,-0xd1,-0x94,-0x160)](getsdAuth)}});window['xiancheng']=!![];if(!_0x309a9a['ok']){if(_0x233f01['Wudgh'](_0x233f01[_0x52f674(-0x8,-0x10,0x8c,0x95)],_0x233f01[_0x52f674(-0x135,-0x98,-0x7a,-0xfe)])){const _0x1771f4=await _0x309a9a[_0x1d8679(0x2d6,0x375,0x3cf,0x348)]();_0x233f01[_0x52f674(0x44,-0x12,0x28,-0x39)](addLog,'SD\x20API\x20返回错'+_0x1d8679(0x3a9,0x30e,0x2a7,0x387)+_0x309a9a[_0x52f674(-0x84,-0xcf,-0x63,-0xca)]+_0x52f674(0x85,0x20,0x5b,0x2)+_0x1771f4),console[_0x1d8679(0x2df,0x2ed,0x2b7,0x2d9)](_0x233f01[_0x52f674(0x75,-0x8,-0x2b,-0x70)],_0x1771f4);throw new Error(_0x1d8679(0x245,0x2cc,0x341,0x34c)+_0x309a9a[_0x1d8679(0x241,0x299,0x291,0x20a)]+',\x20详情:\x20'+_0x1771f4);}else{_0x233f01[_0x1d8679(0x309,0x2f4,0x2fc,0x326)](_0x19803a,'分角色模式:\x20解析带'+_0x52f674(0x26,0x23,-0x2c,-0x35)),_0x4ecf4d=_0x233f01[_0x1d8679(0x37d,0x315,0x2de,0x3b3)](_0x589c20,_0x4cc105),_0x1433ca=_0x2ac483[_0x52f674(0x82,0x17,-0x36,-0x2d)+_0x52f674(0x49,-0x44,-0x83,-0xdc)];for(let _0x3199bc=0x2419+0x1a+-0x29*0xe2;_0x3199bc<=0xd3*0x1d+0xce2+-0x24c5;_0x3199bc++){_0x27dd91[_0x52f674(0x3f,-0x7,0xe,-0x55)+_0x3199bc+_0x52f674(-0x5d,-0x68,-0xb3,-0xc3)]&&(_0x5a7996=_0x297d0e+',\x20'+_0x1bbe6d[_0x1d8679(0x2e3,0x361,0x2d5,0x31b)+_0x3199bc+_0x1d8679(0x29a,0x300,0x303,0x377)]);}}}const _0x1c40d4=await _0x309a9a['json']();if(!_0x1c40d4[_0x52f674(-0x91,-0x8b,-0x131,-0x108)]||_0x233f01[_0x1d8679(0x330,0x311,0x3a4,0x2c1)](_0x1c40d4[_0x52f674(-0xd7,-0x8b,-0x10d,-0x68)][_0x1d8679(0x29c,0x2ee,0x2ef,0x2b7)],-0xd2*-0x1+-0x1738+0x1666)){if(_0x233f01['KQEJy'](_0x1d8679(0x2d9,0x34f,0x3bf,0x2ee),_0x233f01[_0x1d8679(0x29a,0x317,0x35f,0x32d)]))throw new Error(_0x233f01[_0x52f674(0xca,0x30,0x80,-0x2f)]);else _0x463369=_0x233f01[_0x52f674(-0x53,-0xd2,-0xd2,-0x10b)](_0x233f01[_0x1d8679(0x303,0x290,0x2bf,0x2b3)](_0x22df2a,',\x20'),_0x485130[_0x1d8679(0x399,0x361,0x3f9,0x318)+_0xe0d8d0+'\x20Prompt']);}const _0x2c9936=_0x1c40d4[_0x52f674(-0x12,-0x8b,-0x11d,-0xf2)][-0x1617+-0x2123*-0x1+-0xb0c],_0x18728a=_0x233f01[_0x1d8679(0x422,0x380,0x328,0x3ff)](_0x233f01[_0x52f674(-0xef,-0xdf,-0xe6,-0x107)],_0x2c9936);return _0x233f01[_0x52f674(-0x64,-0x74,-0x91,-0xea)](addLog,_0x233f01[_0x52f674(-0x83,-0x85,-0x89,-0x56)]),taskQueue['completeTa'+'sk'](_0xee19de,!![]),currentTaskId=null,{'image':_0x18728a,'change':_0x233f01[_0x52f674(-0x6f,-0x4f,-0x38,-0x97)](_0x21dd9f,'')};}else throw new _0x4b5c9a(_0x233f01[_0x1d8679(0x43e,0x398,0x35a,0x411)]);}}catch(_0x3de39b){if(_0x233f01[_0x1d8679(0x378,0x351,0x3ec,0x336)]('fZDeU','fZDeU')){const _0x369026=_0x233f01[_0x52f674(-0xc1,-0x55,-0xbf,-0xfd)][_0x1d8679(0x3c9,0x333,0x31c,0x3b2)]('|');let _0x32778a=-0xb*-0x13d+-0x1e8c*0x1+-0x26b*-0x7;while(!![]){switch(_0x369026[_0x32778a++]){case'0':_0x233f01[_0x1d8679(0x2af,0x29a,0x29f,0x307)](addLog,_0x52f674(-0x66,-0x2a,-0x20,0x7b)+_0x3de39b[_0x1d8679(0x358,0x2ef,0x31d,0x353)]);continue;case'1':console[_0x52f674(-0x31,-0x93,-0x134,-0xb2)](_0x52f674(-0x5a,-0x2,0xf,-0x91)+_0x52f674(-0x197,-0x114,-0x1ae,-0xd7)+'ge:',_0x3de39b);continue;case'2':window[_0x52f674(-0xa6,-0x29,-0x99,-0xb5)]=!![];continue;case'3':if(_0x233f01['KQEJy'](_0x3de39b['message'],_0x233f01[_0x1d8679(0x2f3,0x35e,0x3fd,0x312)])){}else taskQueue[_0x52f674(-0x183,-0x10a,-0x77,-0x11e)+'sk'](_0xee19de,![]);continue;case'4':throw _0x3de39b;continue;case'5':currentTaskId=null;continue;}break;}}else _0x81c1be['Character\x20'+_0x50253f+_0x1d8679(0x318,0x300,0x2b8,0x2d6)]&&(_0x4ae680=_0x233f01['jLaPV'](_0x233f01[_0x52f674(-0x155,-0xb6,-0xf3,-0x129)](_0x2b10b3,',\x20'),_0x233f01[_0x52f674(-0xd7,-0x4d,-0xee,-0x9c)](_0x6cc7cf,_0x4b1f15[_0x52f674(-0x28,-0x7,-0xaf,0x97)+_0x59bcf4+'\x20Prompt'])));}}async function sdGenerate(_0x50c78e){function _0x32b5c3(_0x1d5c73,_0x74ccf8,_0x4a48fc,_0xadec66){return _0x278a(_0x74ccf8-0x1a2,_0xadec66);}const _0x4ea082={'FOnuv':_0x32b5c3(0x3b1,0x41c,0x3a2,0x4b3)+_0x32b5c3(0x4bd,0x451,0x45c,0x44d),'Koxen':_0x32b5c3(0x3c8,0x38e,0x429,0x3eb),'kCUBQ':_0x32b5c3(0x48a,0x3f6,0x41c,0x478)+'+$','dVdbn':_0x32b5c3(0x3e9,0x389,0x3e4,0x3dd)+_0x111b28(0x225,0x25a,0x26f,0x2df),'vEjFx':function(_0x449c4a,_0x23779d,_0x1a78a7){return _0x449c4a(_0x23779d,_0x1a78a7);},'gCoYV':_0x32b5c3(0x404,0x387,0x395,0x408)+_0x32b5c3(0x42b,0x3dd,0x44e,0x456),'VegmY':function(_0xbfa60a,_0x503086){return _0xbfa60a(_0x503086);},'UdhCI':_0x32b5c3(0x32d,0x378,0x393,0x36d),'HBKBs':'emlMF','bWsFd':_0x32b5c3(0x32a,0x331,0x39d,0x384),'iWPCs':function(_0x360a15,_0x326ef5){return _0x360a15!==_0x326ef5;},'Zstxp':'erdue','aIXHG':function(_0x5e54ba,_0x5f2589){return _0x5e54ba!=_0x5f2589;},'xlXft':function(_0x44bf4b,_0x2c3819){return _0x44bf4b!==_0x2c3819;},'aaJWD':_0x111b28(0x2d4,0x2f9,0x2c3,0x362),'dmJMY':function(_0x19653e,_0x5173fe){return _0x19653e(_0x5173fe);},'WkShf':'Error\x20gene'+_0x32b5c3(0x3d8,0x403,0x482,0x431)+_0x111b28(0x23c,0x2d7,0x297,0x2d2)},{id:_0xb40ec4,prompt:_0x492469,width:_0x32d4a9,height:_0x2b9775,change:_0x5c10f9}=_0x50c78e;function _0x111b28(_0x116a31,_0x5efa09,_0x26a54f,_0x414090){return _0x278a(_0x26a54f-0xb5,_0x414090);}_0x4ea082[_0x32b5c3(0x349,0x3bf,0x431,0x333)](addLog,'收到SD生图请求\x20('+_0x32b5c3(0x46b,0x452,0x4b1,0x470)+_0xb40ec4+(_0x111b28(0x31c,0x320,0x284,0x302)+':\x20')+_0x492469+(_0x5c10f9?_0x111b28(0x2af,0x1e3,0x253,0x2e1)+'\x20'+_0x5c10f9:''));if(_0x5c10f9&&_0x5c10f9[_0x32b5c3(0x417,0x3a4,0x36b,0x424)](_0x4ea082[_0x111b28(0x2b8,0x298,0x2e9,0x389)])){if(_0x4ea082[_0x111b28(0x25c,0x2d6,0x2cb,0x2de)]!==_0x4ea082[_0x32b5c3(0x45f,0x3f7,0x3fc,0x370)]){_0x4ea082[_0x32b5c3(0x3ab,0x3bf,0x33d,0x34a)](bananaGenerate,_0x50c78e);return;}else{_0x427825(_0x32b5c3(0x2b1,0x327,0x356,0x2d6)),_0x34e2e9[_0x111b28(0x3f1,0x2e1,0x35a,0x2d7)](_0x4ea082[_0x32b5c3(0x44d,0x448,0x3cb,0x4a2)]);throw new _0x5059c9(_0x4ea082[_0x111b28(0x339,0x2d7,0x373,0x3ad)]);}}try{if(_0x4ea082[_0x111b28(0x362,0x392,0x30f,0x36b)](_0x4ea082['Zstxp'],_0x4ea082['Zstxp'])){const _0x15cf1d=_0x1244af?function(){function _0x47f174(_0x262691,_0x4c311e,_0x235b78,_0xea10d){return _0x111b28(_0x262691-0xa7,_0x4c311e-0x1d3,_0x235b78- -0x42c,_0xea10d);}if(_0x584e8e){const _0x2804ff=_0x4de276[_0x47f174(-0x87,-0x153,-0x124,-0x194)](_0x476659,arguments);return _0x4621f0=null,_0x2804ff;}}:function(){};return _0x34053f=![],_0x15cf1d;}else{const {image:_0x57527a,change:_0x43f8e4}=await generateSDImage({'prompt':_0x492469,'width':_0x32d4a9,'height':_0x2b9775,'change':_0x5c10f9});if(_0x4ea082[_0x111b28(0x305,0x375,0x31d,0x30b)](extension_settings[extensionName][_0x111b28(0x26c,0x2e5,0x28e,0x28c)],'0')){const _0xf8bc83={};_0xf8bc83[_0x111b28(0x2d6,0x2c7,0x33d,0x32f)]=_0x43f8e4,await setItemImg(_0x492469,_0x57527a,_0xf8bc83),addLog(_0x111b28(0x347,0x386,0x32d,0x2ea)+_0x32b5c3(0x4c6,0x467,0x414,0x4e7)+'\x20'+_0x492469);}else{if(_0x4ea082[_0x111b28(0x29e,0x2de,0x243,0x1d7)](_0x4ea082[_0x32b5c3(0x47f,0x457,0x404,0x485)],_0x4ea082[_0x111b28(0x2f3,0x31d,0x36a,0x323)]))return _0x24e7ed[_0x32b5c3(0x2e1,0x31f,0x320,0x284)]()[_0x111b28(0x244,0x2eb,0x2e4,0x313)](CvmWJu[_0x32b5c3(0x44a,0x409,0x3cb,0x4a7)])[_0x32b5c3(0x310,0x31f,0x29e,0x2be)]()[_0x32b5c3(0x3ae,0x336,0x2b1,0x3c5)+'r'](_0xebbd57)[_0x32b5c3(0x36a,0x3d1,0x3b6,0x3a3)](CvmWJu[_0x32b5c3(0x4a3,0x409,0x480,0x36d)]);else addLog(_0x32b5c3(0x3ed,0x3aa,0x328,0x435)+'库');}const _0x370189={};_0x370189['id']=_0xb40ec4,_0x370189['success']=!![],_0x370189[_0x32b5c3(0x385,0x33b,0x3b3,0x387)]=_0x57527a,_0x370189[_0x111b28(0x3d8,0x34d,0x34e,0x3d3)]=_0x492469,_0x370189[_0x111b28(0x2f0,0x3cc,0x33d,0x32b)]=_0x43f8e4,eventSource[_0x32b5c3(0x3ca,0x447,0x482,0x3af)](EventType[_0x111b28(0x313,0x2af,0x2fb,0x39f)+'MAGE_RESPO'+_0x111b28(0x397,0x342,0x378,0x2f3)],_0x370189),_0x4ea082[_0x111b28(0x2cf,0x354,0x35c,0x2d6)](addLog,_0x32b5c3(0x49c,0x40e,0x3fe,0x4a6)+_0x32b5c3(0x34c,0x31e,0x2b7,0x28f)+_0xb40ec4+')');}}catch(_0x5b24b0){if('rhJDX'===_0x111b28(0x218,0x2b9,0x2b2,0x31d))_0x14ad5e(_0x4ea082[_0x32b5c3(0x3b7,0x3ae,0x3c1,0x34d)]),_0x17d005=_0x4ea082['vEjFx'](_0x3e8b6a,_0x95f377,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x4ea082[_0x111b28(0x392,0x390,0x340,0x2bd)]}]}}});else{const _0x3f29da='SD生图流程捕获到异'+_0x32b5c3(0x3cf,0x36b,0x2db,0x2f4)+_0xb40ec4+_0x32b5c3(0x299,0x325,0x2b5,0x2b4)+_0x5b24b0[_0x111b28(0x373,0x2bc,0x2d0,0x23c)];_0x4ea082['VegmY'](addLog,_0x111b28(0x205,0x206,0x299,0x28d)+_0x3f29da),console[_0x111b28(0x2af,0x2c5,0x2b6,0x274)](_0x4ea082[_0x111b28(0x291,0x219,0x276,0x293)],_0x5b24b0);const _0x331b5a={};_0x331b5a['id']=_0xb40ec4,_0x331b5a[_0x32b5c3(0x36d,0x3fb,0x418,0x3c8)]=![],_0x331b5a[_0x111b28(0x28b,0x247,0x2b6,0x241)]=_0x5b24b0[_0x111b28(0x28d,0x306,0x2d0,0x23a)],_0x331b5a[_0x111b28(0x2a6,0x3bd,0x34e,0x37d)]=_0x492469,eventSource[_0x111b28(0x39a,0x318,0x35a,0x3b5)](EventType[_0x111b28(0x27c,0x2ba,0x2fb,0x389)+_0x32b5c3(0x38c,0x396,0x30c,0x338)+_0x111b28(0x396,0x374,0x378,0x34f)],_0x331b5a),addLog(_0x111b28(0x2fa,0x340,0x370,0x397)+_0x32b5c3(0x2ef,0x31e,0x36f,0x3ab)+_0xb40ec4+')');}}}function initializeSDListener(){function _0x288917(_0x45b446,_0x26f67a,_0x58fa0c,_0x2b74fa){return _0x278a(_0x58fa0c-0x2cf,_0x2b74fa);}const _0x428d6c={'QsTjs':function(_0x3fd805,_0x470b1f){return _0x3fd805(_0x470b1f);},'XtQDf':'SD\x20生图事件监听器'+'已初始化。'};function _0x3816c2(_0x186171,_0x4f48f3,_0x10ccb9,_0x121e55){return _0x278a(_0x121e55- -0x108,_0x4f48f3);}eventSource['on'](EventType[_0x288917(0x58e,0x59e,0x515,0x492)+_0x3816c2(0x1ff,0xc6,0x170,0x165)+'ST'],sdGenerate),_0x428d6c['QsTjs'](addLog,_0x428d6c[_0x288917(0x51e,0x5e6,0x541,0x548)]);}export async function replaceWithSd(){const _0x47373d={'isKeB':function(_0x1750ba){return _0x1750ba();}};function _0x15a097(_0xedb135,_0x4463ab,_0x2636b1,_0x23b382){return _0x278a(_0xedb135- -0x355,_0x4463ab);}function _0x109bdc(_0x16f0ba,_0x576295,_0x2b1e37,_0x293af1){return _0x278a(_0x576295- -0x22e,_0x2b1e37);}extension_settings[extensionName][_0x15a097(-0x127,-0xfe,-0x148,-0x11c)]=='sd'?(!window[_0x109bdc(-0x38,-0x96,-0x56,-0xce)+_0x109bdc(-0xec,-0x9e,-0x51,-0x107)]&&(window['initialize'+_0x109bdc(-0x11b,-0x9e,-0x22,-0xec)]=!![],_0x47373d[_0x109bdc(0x9,-0x48,-0x4f,-0x8d)](initializeSDListener)),_0x47373d[_0x109bdc(-0xd9,-0x48,-0xd9,-0x64)](initializeImageProcessing)):window['initialize'+_0x109bdc(-0x78,-0x9e,-0x2a,-0xbc)]&&(eventSource['removeList'+_0x109bdc(-0xe2,-0x73,-0x3b,-0xa7)](EventType['GENERATE_I'+_0x109bdc(-0x31,0x3f,-0x23,0x64)+'ST'],sdGenerate),window['initialize'+_0x109bdc(-0xad,-0x9e,-0x71,-0x7e)]=![],addLog('SD\x20生图事件监听器'+_0x109bdc(0xf2,0x6d,0x5b,0x77)));}