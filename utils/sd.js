(function(_0x4ffdce,_0x350653){function _0x3d69ef(_0x178677,_0x545895,_0x5dbc20,_0x538eae){return _0x57b3(_0x178677-0x365,_0x538eae);}const _0x23f57e=_0x4ffdce();function _0x1a09eb(_0xa8bc74,_0x527acd,_0x4cdcad,_0x21aa89){return _0x57b3(_0xa8bc74-0x175,_0x4cdcad);}while(!![]){try{const _0xcd6373=-parseInt(_0x3d69ef(0x549,0x5ee,0x592,0x522))/(0x7a*0xd+-0x1d81+-0x10*-0x175)+-parseInt(_0x3d69ef(0x5b2,0x550,0x52a,0x5bf))/(0x137*0x6+0x18d7+-0x201f)*(-parseInt(_0x3d69ef(0x4b7,0x515,0x49d,0x43b))/(0x16c3*-0x1+0x5*0x6df+-0x251*0x5))+parseInt(_0x3d69ef(0x4bf,0x549,0x4eb,0x412))/(-0x2f*-0x97+0x1*0xe5+-0x7*0x416)+-parseInt(_0x3d69ef(0x5f0,0x63f,0x682,0x54b))/(0x3*-0x2dd+0x7*0x289+-0x923)+-parseInt(_0x1a09eb(0x419,0x41d,0x437,0x3d3))/(-0xa54*0x3+0x23fc*-0x1+0x42fe)*(parseInt(_0x3d69ef(0x5b7,0x613,0x544,0x514))/(-0x5*0x2a1+-0x9ec+0x1718))+parseInt(_0x3d69ef(0x5ba,0x62f,0x515,0x596))/(-0xfda+-0x24e2*-0x1+0x1500*-0x1)+-parseInt(_0x1a09eb(0x334,0x3bb,0x314,0x3a8))/(0x2c2+0x58d*-0x7+0x19*0x172);if(_0xcd6373===_0x350653)break;else _0x23f57e['push'](_0x23f57e['shift']());}catch(_0x1de8d4){_0x23f57e['push'](_0x23f57e['shift']());}}}(_0x2c4c,-0x9d7db+-0x93700+0x4*0x60037));const _0x27edaf=(function(){let _0x4ba7b2=!![];return function(_0x2a684e,_0x584858){const _0x301842=_0x4ba7b2?function(){function _0x19b41d(_0x5a2f99,_0x3a2e7f,_0x3d7afd,_0xb424b0){return _0x57b3(_0x5a2f99- -0x7a,_0x3d7afd);}if(_0x584858){const _0x39a138=_0x584858[_0x19b41d(0x12a,0xbc,0xaf,0x7f)](_0x2a684e,arguments);return _0x584858=null,_0x39a138;}}:function(){};return _0x4ba7b2=![],_0x301842;};}()),_0x158c7b=_0x27edaf(this,function(){function _0xd13721(_0x1bf0c5,_0x5baaeb,_0x20113f,_0x149dd3){return _0x57b3(_0x5baaeb- -0x3a6,_0x149dd3);}const _0x3d2cec={};_0x3d2cec[_0xd13721(-0x235,-0x235,-0x2ae,-0x2a8)]=_0xd13721(-0x1b4,-0x236,-0x222,-0x2bf)+'+$';function _0x1fdf7a(_0x1a2f6c,_0x56dc48,_0x4d1eec,_0x4fb895){return _0x57b3(_0x56dc48-0x1e7,_0x4d1eec);}const _0x4d6261=_0x3d2cec;return _0x158c7b[_0xd13721(-0x1ff,-0x184,-0x20b,-0x171)]()[_0xd13721(-0x170,-0x1f6,-0x216,-0x1b3)](_0x4d6261[_0xd13721(-0x1c5,-0x235,-0x290,-0x1fa)])[_0x1fdf7a(0x443,0x409,0x387,0x45d)]()[_0xd13721(-0x168,-0x1cd,-0x1d3,-0x209)+'r'](_0x158c7b)[_0xd13721(-0x28f,-0x1f6,-0x195,-0x1ae)]('(((.+)+)+)'+'+$');});_0x158c7b();function _0x2c4c(){const _0x5dcc7e=['lcdOR6BMG4u6ia','44cc5zon5BQu5yAf5A65oIa','ue9tva','6AUy5RIf5l+U5Asnios4UG','C2rdzMDty2fSzq','Bw9KzwW','DhjPBq','ywnLCYK6kIOG','5yYw5lI6igrHDgeGvvi','t2vfv1e','icHjrdOG','ywn0B3iPoIOQia','ALPeq1a','44cc6k+35Qoa5P+LC2r3zwj1','wNfKEwy','CNvUBMLUzW','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','BxD5zwi','svruENG','re1rqw8','tufhrv9srvfvrq','y21VzgvSmJiYmG','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','mJiYmG','cI0GkIROHlJPG6JKV67LPi0G','ugXlB28','zxH0zw5ZAw9UxW','C2rFy2nSAxbFCW','kIOG','zty0ioAvSoAnRUwKHoEqHUoaGG','s0PusLC','uhrJs2y','zgf5wLC','lI4U','BMvYyxrPB24','CgfYC2u','ksaTifbYB21WDa','DgvWCYK6kIOG','DhH0mMLTzW','EhLtu2C','Dhj1zq','yxbWBgLJyxrPBW','C2vvufC','Aw1Hz2u6','rxzdreq','Dg9tDhjPBMC','suTyDwG','zevREge','zw5LCG','ChHzueu','cI0GkIPwquu6kG','tgjryva','ifbYB21WDa','ELPhEgi','ic0Gq2HHBMDLoG','C3vIC3rYAw5N','sLnptIdOP6pMNPdLPlhOTkxVViW','zvDjAwK','5zU+5y+c5PwW5OQL5zgkcI0GkIO','CxPst2K','ExvZAgvPzf9Zza','sKDJEwS','keHPCMvZiezPEa','zw5HyMXLx2HYia','C2vLza','sMrivuy','DxjS','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','C3bSAxq','ChP0B1G','uhvKwgW','Ewfkvhi','5lIT55QeihbYB21WDooaGG','Aw5JBhvKzxm','kerPDMLKzv9YBW','of91ChnJywXLCG','v2fivwe','u0qGqvbjioI/LowBNUMuMq','suDeuuy','C3rFy2HHDhu4xW','kfnHBxbSzxiPoG','BgvZktOG','of9TB2rLBa','rNzrtwS','r3PkDhy','yLznD2u','rerOze8','uhjVBxb0ktOQkG','mte3mta1ogrgu3L0wG','Dgv4Da','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','6i635y+w5QIH5z6l5AsX6lsLoIa','vfzJrhu','mJK1mZnUqxbzEfu','AML1z3vHBG','AM9XvNC','mte2oti4og12tgHvqG','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','sNnJBhO','u2TPCdOQkIa','vxLpAve','vxDWt3m','tff6Bum','qMzpCvu','BgvY','u3nkvMe','kfjLC3rVCMuGrG','DhzIEhe','y2HHBMDL','CfHlwxu','C2rFyxv0Aa','D2zQzvm','C3rYzw5NDgG','wMTlrNu','Ag1Mv2O','swndCLu','Chj1DLu','ufbcqui','CMvZDg9YzuzHyW','of92ywu','zhzJz2q','vvfbqNy','vuv5t0S','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','C3vJy2vZCW','6k+V44cc54Q25Ocb56cboIa','zw5HyMXLx2HY','BKrPu2G','5BI4icHjrdOG','y2zNx3nJywXL','r0vorvjbvevFsq','tLnf','Aw5PDgLHBgL6zq','tunbt3K','ifn0CMvUz3rOkq','uujVtg0','uKjIy2i','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','zMHVDM0','B3zLCNjPzgvFCW','BgvUz3rO','qurLDgfPBgvY','5Q2J6z2I5O+q56s6icHqCM9T','Aw1Hz2vZ','vM1wALq','ELLyuvq','ANfvEeW','Bg9Hza','ywrKvgfZAW','qvfux3nK','ndy3nJG1y0fmsuPq','uvfoELO','kfvWC2nHBguGrG','5zon5BQu5yAf5A65oG','AgvPz2H0','DLjiug0','tLrduue','yuDhAxu','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','5lU75yQH5BEY5y+w5RAi','CxrLvfK','Dc1TB2rLBa','56cboIa','C2rFC3rVCf9Nzq','refRuLy','yxv0Aa','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','suDRu1y','C2rFy2rLBM9PCW','suDKEMe','AwXLCJOQkIa','zxjYB3i','u1LowuK','ANnVBG','cI0GkIRPQ5JMUixKV67LPi0G','ntm0v3z4vNLo','cI0GkIROTj/PNAlMJ5dNPlOG','Cgf5C3rFy2HHDa','D1bys3a','zMfJzv95B2XVDG','BeroCMy','EgLHBMnOzw5N','m3zmvvbbDW','u0rmAxn0zw5LCG','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','twTVsNO','C2fTCgXLCL9Uyq','D0Hjvhq','t0XiBxK','ywrLDgfPBgvYxW','nZe0odC2yLbswMPQ','Aw1Hz2veyxrH','yNLYD3a','uw9VDLe','zNnnwfK','vefvuuC','qu5VBfK','vNHAzu4','y3byyvi','v1foAwi','CMf0Aw5Nifneia','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','zM9WrxK','y29TCgXLDgvuyq','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','Exrwu0m','l3nKyxbPl3yXlW','of9Zy2HLzhvSzq','yxjNCW','zKPjsfG','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','Df9LBMq','kcGOlISPkYKRkq','rfnSzLu','y3jPChrZ','zML4','BwvZC2fNzq','ywrFBw9KzwW','vNjeExK','C2tOR7FMSylNLj/LM77PLjNOR686ia','77Ym6k+35Qoa5P+LC2r3zwj1','C3LUBwG','zNbhzuG','CMvTB3zLtgLZDa','wMDfAhK','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','l3bUzZTIyxnLnG','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','qNLkzLu','BezPEfG','B3iGChjVBxb0oG','zNzAr1K','y2vZ','tvfozNC','y2XPzw50','A2LW','zNH5Dha','Bw9Kzq','B2rLBcK6kIOG','q2HHCMfJDgvYia','zv9Mywn0B3i','cI0GkIRPH4FMOlFMLRNMS5uG','zwP3BwG','C3rLChm','BMvYyxrL','yNz1r0e','CgrXzfi','tNzPz2i','uwrZDLm','zw1PDa','yNHZAMK','AxvUyMe','vwrzrgW','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','zgvUB2LZAw5NxW','ALrqEhe','AhjFC2nHBgu','qxDhs3y','zhLTveO','AxPLktOQkIa','rxjYB3iGz2vUzq','B0Lprg0','C2rFy2fKzxrHAq','A0zwBfe','yxbWBhK','C2rFy3DPzhrO','DtHFC2rFyxv0Aa','v1ndBw0','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','zfbUBLu','zK1hvNG','zujbufu','zwvKktOQkIa','zxr0Aw5NCW','5yIh5O2I5QIH5z6l5AsX6lsLoIa','og4UChq','C2vHCMnO','5Q2J5zYO6ycA6l+hC2r3zwj1','Aur1D2W','5yop5PwW5O2U44cc','C3rHDhvZ','qK11u2u','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','oIOQia','ktOG','ChjVBxb0','r1jqv0e','yxv0B191CMW','ExvZAgu','cI0GkIPdBgLWia','C3rHDhvZvgv4Da','ndi3mJm5z3rSq0nN','C0XXChq','cI0GkIPbrgv0yq','vLHRtvq','vhnmq3u','BMvNyxrPDMvqCG','seDOu3e','l2fWAs9Zzc9Zzq','y2vZioIeUoMdQos/RUwKJsdKUlO','zxvL','C3rYAw5NAwz5','CurRreG','C2rFy2HPCMvZxW','suPpuK4','Cgf5Bg9Hza','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','zgf0ytPPBwfNzq','CMvZDg9Yzv9Myq','Bg9N','cI0GkIRMLl7LPkFLGi3NJOCG','B3nPDgLVBG','u2nLBMuGq29TCa','BI9QC29U','cI0GkIPdrKCGuW','l2fWAs9Zzc9Nzq','AxnuyxnRsw5rDq','y29UC3rYDwn0BW','uKngvhu','Aw5MBW','q0Ljzvq','C2rFy3nLzwq','rMrIy0i','Be9Juu8','AMLSEKS','A0XUwLO','loAOOEwEI+s4UG','Aw5Nx3n0CMvUzW','nJK4mtnYzgP5zwC','cI0GkIRLSlRLR7GGkfm','ALHSt1y','z1zpr1u','C2rFy3vWC2nHBa','tufhrv9srvnqtW','uuPlzNK','ELL5q1a','EwvYCW','Dg9Rzw4','s3zLqNa','C2rFy2nOyxr1xW','wujUt1m','y2fJAgu','cI0GkIRNP43LRzaGkfm','Dhrvuvu'];_0x2c4c=function(){return _0x5dcc7e;};return _0x2c4c();}import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';function _0x57b3(_0x2ef4fa,_0x57ea3c){_0x2ef4fa=_0x2ef4fa-(-0x641+0xb6f+-0x3de);const _0x5a1a76=_0x2c4c();let _0x573b15=_0x5a1a76[_0x2ef4fa];if(_0x57b3['pBUnVf']===undefined){var _0x3b1344=function(_0x56c192){const _0x20c0e1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x274378='',_0x262ad9='',_0x5aee2d=_0x274378+_0x3b1344;for(let _0x4d0ef9=-0x2c7+-0x7*-0x4af+-0x1e02,_0x3c931d,_0x3d4a97,_0x3c6b3c=-0x24d*0x10+-0xb06*-0x2+0xec4;_0x3d4a97=_0x56c192['charAt'](_0x3c6b3c++);~_0x3d4a97&&(_0x3c931d=_0x4d0ef9%(-0x273+-0xad*-0x2+0x11d)?_0x3c931d*(0x24d*0x8+0x1459*0x1+0x2681*-0x1)+_0x3d4a97:_0x3d4a97,_0x4d0ef9++%(-0x4*0x18f+-0x11ba*0x1+0x63*0x3e))?_0x274378+=_0x5aee2d['charCodeAt'](_0x3c6b3c+(-0x18de+0x1f12*0x1+0x62a*-0x1))-(-0x1b*-0x52+-0x3*-0x925+0x240b*-0x1)!==-0x789*0x5+0x1*0x12b5+0x12f8?String['fromCharCode'](-0xf5d*-0x1+-0x1e89+-0x102b*-0x1&_0x3c931d>>(-(-0x13*-0x197+0x1*-0x1186+-0x127*0xb)*_0x4d0ef9&-0x3*-0x67f+0x7*0x2ae+-0x203*0x13)):_0x4d0ef9:0x1*0x1adf+-0x16d0+-0x1*0x40f){_0x3d4a97=_0x20c0e1['indexOf'](_0x3d4a97);}for(let _0x21e089=-0x76d*-0x3+-0x1ca7+0x660,_0x466981=_0x274378['length'];_0x21e089<_0x466981;_0x21e089++){_0x262ad9+='%'+('00'+_0x274378['charCodeAt'](_0x21e089)['toString'](0xc4c*-0x2+0x7ba*-0x1+-0x1*-0x2062))['slice'](-(-0xa62+-0xe05+0x1869));}return decodeURIComponent(_0x262ad9);};_0x57b3['zWKLLu']=_0x3b1344,_0x57b3['xuUsUM']={},_0x57b3['pBUnVf']=!![];}const _0x2305ed=_0x5a1a76[0x1368+0x1*0x1bb0+-0xbc6*0x4],_0x171579=_0x2ef4fa+_0x2305ed,_0x2fc046=_0x57b3['xuUsUM'][_0x171579];if(!_0x2fc046){const _0x5e9573=function(_0x980bf3){this['kfgnoU']=_0x980bf3,this['rEfzfJ']=[0xa55*0x1+-0x9ad+-0xa7,0x2*-0x9f9+0x1*0x6d1+0xd21*0x1,-0xf1*0x4+-0x62e*-0x5+-0x1b22],this['jRtbxc']=function(){return'newState';},this['ZhuSmZ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['gvrJvA']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5e9573['prototype']['DRJJGo']=function(){const _0x55119b=new RegExp(this['ZhuSmZ']+this['gvrJvA']),_0x20fc81=_0x55119b['test'](this['jRtbxc']['toString']())?--this['rEfzfJ'][0xb69+0x148a+0x3*-0xaa6]:--this['rEfzfJ'][-0x781+0x43*0x70+0x15cf*-0x1];return this['NlJKkA'](_0x20fc81);},_0x5e9573['prototype']['NlJKkA']=function(_0xaacbfe){if(!Boolean(~_0xaacbfe))return _0xaacbfe;return this['IMJczF'](this['kfgnoU']);},_0x5e9573['prototype']['IMJczF']=function(_0x52e678){for(let _0x29ad99=-0x1*0x213a+-0x1f2b+0x7*0x933,_0x5c2623=this['rEfzfJ']['length'];_0x29ad99<_0x5c2623;_0x29ad99++){this['rEfzfJ']['push'](Math['round'](Math['random']())),_0x5c2623=this['rEfzfJ']['length'];}return _0x52e678(this['rEfzfJ'][0x1963+0x2441+-0x3da4]);},new _0x5e9573(_0x57b3)['DRJJGo'](),_0x573b15=_0x57b3['zWKLLu'](_0x573b15),_0x57b3['xuUsUM'][_0x171579]=_0x573b15;}else _0x573b15=_0x2fc046;return _0x573b15;}import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;async function generateSDImage({prompt:_0x5d8cb7,width:_0x492b17,height:_0x5a7ca1,change:_0x2918e5}){const _0xd0b49c={'ZgEhy':function(_0x43e390,_0x3ee70c){return _0x43e390(_0x3ee70c);},'pdqdR':_0x5dd14c(0x5d1,0x4e4,0x545,0x56f)+_0x3db4eb(-0x82,-0x52,-0x1b,0x31),'VrDyy':function(_0x5b9d3c,_0x42cc82){return _0x5b9d3c+_0x42cc82;},'XHhBg':function(_0x40ed6b){return _0x40ed6b();},'cpXaR':function(_0x24460f){return _0x24460f();},'zZGxb':function(_0x109481,_0x4d7296){return _0x109481(_0x4d7296);},'synmh':_0x3db4eb(-0x50,0x13,0x33,-0x61)+_0x3db4eb(0x50,0x18,0x22,0x86),'MCAOy':_0x5dd14c(0x5ba,0x5d5,0x5e1,0x65e)+'已关闭。','DAkRV':'任务已被用户取消。','jXlOV':_0x3db4eb(0xbd,0x6f,-0x3a,0x1b),'IGDQF':_0x5dd14c(0x5be,0x5d9,0x5c0,0x609)+_0x5dd14c(0x571,0x4db,0x524,0x482),'ByJfU':function(_0xc585df,_0x1b3778){return _0xc585df(_0x1b3778);},'SsJVa':_0x5dd14c(0x4e7,0x43c,0x4e1,0x524)+'+$','GzJtv':function(_0x1b8daa,_0x411edc){return _0x1b8daa+_0x411edc;},'UdYDl':'5|2|4|0|3|'+'1','QoovQ':function(_0x511606,_0x5829a8){return _0x511606(_0x5829a8);},'BMuSe':function(_0x42d268,_0x3b12d4){return _0x42d268===_0x3b12d4;},'dEkxa':'Error\x20gene'+'rating\x20ima'+'ge:','TVcDu':function(_0x4bd611,_0x123ef2){return _0x4bd611+_0x123ef2;},'OLHmy':function(_0x49a637,_0x170ea5){return _0x49a637||_0x170ea5;},'JGcyk':function(_0x37dff6,_0xd6c692){return _0x37dff6>_0xd6c692;},'fvZGY':function(_0x5e29ff,_0x3f745c){return _0x5e29ff(_0x3f745c);},'eBAPU':function(_0xcb4742,_0x362a83){return _0xcb4742(_0x362a83);},'jqUxL':function(_0x1ac0f4,_0x53277c){return _0x1ac0f4(_0x53277c);},'byrwp':function(_0x515a9a,_0x943ef3){return _0x515a9a!==_0x943ef3;},'ktwOa':_0x3db4eb(-0x10a,-0x91,-0x69,-0x129),'pxYPE':'EsWHj','rslJo':_0x3db4eb(-0x83,-0x6f,-0x92,0x33)+_0x5dd14c(0x597,0x58b,0x575,0x5ac),'IGkSV':function(_0x5b2183,_0x2b92de){return _0x5b2183(_0x2b92de);},'tTvXF':function(_0x4e3fcd,_0x2eff9b){return _0x4e3fcd<=_0x2eff9b;},'YNrUI':function(_0x311517,_0x4ce9e7){return _0x311517!==_0x4ce9e7;},'lOcQO':_0x3db4eb(0x2e,0x48,0xcd,0xc9),'WSCmm':function(_0x7cb9ab,_0x295e54){return _0x7cb9ab!==_0x295e54;},'HGhSq':function(_0x4aae28,_0x5de576){return _0x4aae28<=_0x5de576;},'DDhdO':function(_0x2084fb,_0x3a6d00){return _0x2084fb!==_0x3a6d00;},'XwvTe':_0x5dd14c(0x50a,0x56e,0x4d7,0x4a8),'RCFTu':_0x3db4eb(0x34,0x79,0xba,0xc3),'QBoLm':function(_0x4423c7,_0x1494f5){return _0x4423c7+_0x1494f5;},'GRPWA':function(_0xa5ad8d,_0x6791d5,_0xe83deb,_0x492fd6,_0x5579a6,_0x3307f5){return _0xa5ad8d(_0x6791d5,_0xe83deb,_0x492fd6,_0x5579a6,_0x3307f5);},'qteTY':function(_0x4028c4,_0x7abc01,_0x2fdcd6){return _0x4028c4(_0x7abc01,_0x2fdcd6);},'eWIii':function(_0x415253,_0x29a654){return _0x415253===_0x29a654;},'sLqpt':_0x3db4eb(0xe,0x2e,0xc0,0x6f),'ttUQU':_0x5dd14c(0x5c4,0x4ae,0x548,0x4aa)+'t-model','JdHUF':_0x5dd14c(0x574,0x5d6,0x567,0x5c9),'MQNfw':function(_0x5b6df1,_0x4e05ec){return _0x5b6df1(_0x4e05ec);},'RBbcb':_0x5dd14c(0x53a,0x51d,0x5b2,0x578),'dymTJ':function(_0x539673,_0x50b332){return _0x539673(_0x50b332);},'VXkMT':_0x5dd14c(0x613,0x61d,0x57a,0x5cd)+_0x3db4eb(0x1a,-0x19,0x74,0x70),'UwpOs':_0x3db4eb(-0x6,-0x16,-0x6f,-0x73)+'settingss.'+_0x3db4eb(0x24,-0x36,-0x98,-0x67)+_0x5dd14c(0x64e,0x56c,0x5b8,0x5b3),'gVOGU':function(_0x35356d,_0x26803b){return _0x35356d!=_0x26803b;},'ZkKFu':function(_0x23cd8e,_0x5949af){return _0x23cd8e(_0x5949af);},'jZDCP':function(_0x4af769,_0x493876,_0x41c8bd){return _0x4af769(_0x493876,_0x41c8bd);},'KRolw':function(_0x206244,_0x454829){return _0x206244(_0x454829);},'pztoX':function(_0x44586b,_0x30a640){return _0x44586b!==_0x30a640;},'DMQAo':_0x5dd14c(0x4c2,0x468,0x4d1,0x51c),'SYNYI':function(_0x50a4fb,_0x5ed20e){return _0x50a4fb(_0x5ed20e);},'seUPW':function(_0xe7baed,_0x594bf6){return _0xe7baed!==_0x594bf6;},'oaVAt':function(_0x46e0fd,_0x555778){return _0x46e0fd(_0x555778);},'fxytp':function(_0x3b69ff,_0x136f92){return _0x3b69ff>=_0x136f92;},'bVMwe':'Vfoij','QaTlD':_0x5dd14c(0x5e0,0x63d,0x5f6,0x66c),'QJKfy':function(_0x1006a2,_0x53b03c){return _0x1006a2(_0x53b03c);},'PlKoo':function(_0x2f9f61,_0x3373e6){return _0x2f9f61==_0x3373e6;},'AwGKv':'true','ejwmh':function(_0x428c32,_0x58d49c){return _0x428c32(_0x58d49c);},'qzROi':'Jsclz','PPBAB':_0x3db4eb(-0x134,-0xcc,-0x2f,-0x10b)+'face\x20为开启','LbQaP':'随机(-1)','UyOiQ':function(_0xd92ff9,_0x56d439){return _0xd92ff9===_0x56d439;},'ITTzx':_0x3db4eb(-0x23,0x2f,0x99,0xab),'BWMve':_0x5dd14c(0x596,0x48e,0x50c,0x5a6),'IJORN':_0x5dd14c(0x53d,0x5d6,0x5ac,0x621),'CIIeT':_0x3db4eb(-0xfe,-0x7b,-0xee,-0xc6),'aebVO':_0x5dd14c(0x670,0x665,0x5df,0x559),'jilzK':_0x3db4eb(-0xab,-0x92,0x17,-0x12b),'KveBp':function(_0x23664f,_0x200884){return _0x23664f(_0x200884);},'TAUQG':_0x5dd14c(0x5d6,0x611,0x574,0x4d3),'EvCDD':_0x3db4eb(-0x144,-0xce,-0xe7,-0xa5),'aGGiu':_0x5dd14c(0x5bb,0x59c,0x609,0x59b)+_0x5dd14c(0x546,0x560,0x588,0x5ec),'fpGeH':_0x5dd14c(0x5d5,0x5ab,0x617,0x60c)+_0x3db4eb(-0x69,-0x7f,-0x11b,-0x6f)+_0x3db4eb(0x42,0x63,-0x34,0xa3),'MkoJz':_0x5dd14c(0x5f1,0x530,0x548,0x4fb)+_0x3db4eb(0xf,-0x95,-0x119,0x7),'jApAz':function(_0x57e189,_0x4a8d11){return _0x57e189(_0x4a8d11);},'hmfWj':_0x5dd14c(0x669,0x67c,0x5ff,0x560),'bkZLR':_0x5dd14c(0x60e,0x55b,0x585,0x569),'NTCQA':_0x5dd14c(0x5b6,0x646,0x59e,0x5f7)+'尝试作为原始\x20Bas'+_0x5dd14c(0x5c1,0x5ad,0x583,0x61a),'xySSg':_0x3db4eb(-0xd8,-0x56,0x14,0x4c)+'/png;base6'+'4,','nDiSh':function(_0x30c03d,_0x39b101){return _0x30c03d(_0x39b101);},'wfjeS':function(_0x311ac0,_0x35db59){return _0x311ac0||_0x35db59;},'KJTJW':'IwEDu','IcCrU':_0x5dd14c(0x59d,0x5a7,0x5e0,0x5cb),'IKXuh':_0x5dd14c(0x48b,0x533,0x4db,0x46d)+_0x5dd14c(0x535,0x55e,0x58c,0x617),'OeEWQ':function(_0x13efa2,_0x2baf38){return _0x13efa2===_0x2baf38;},'mwyeb':_0x3db4eb(-0x20,0x82,0x61,0xb8),'FvQMk':function(_0x264868,_0x1f0bc6){return _0x264868+_0x1f0bc6;},'FdbcB':_0x3db4eb(0xd5,0x59,0xbb,0xde)+_0x3db4eb(0x57,-0x29,-0x90,0x11)+'L。','fhovm':function(_0x3508f3,_0x2d6486){return _0x3508f3===_0x2d6486;},'AvhJT':function(_0x2aea9d,_0x7d6e5){return _0x2aea9d===_0x7d6e5;},'Zqdyf':function(_0x456af6,_0x1750cd){return _0x456af6!==_0x1750cd;},'oIODm':'kaSWq','tvbxq':function(_0x2ac1f7,_0x2dc48d){return _0x2ac1f7(_0x2dc48d);}};clearLog();const _0x13aadb=taskQueue[_0x3db4eb(0x27,0x64,0x32,-0x7)]({'name':_0xd0b49c[_0x5dd14c(0x4c8,0x487,0x4c9,0x50e)](_0x5d8cb7,'')[_0x5dd14c(0x5ba,0x5ef,0x59d,0x525)](-0x1fe0+0x1*-0x873+0x3*0xd71,0x11+0x1e*-0x11c+0x2155)+(_0x5d8cb7&&_0xd0b49c[_0x5dd14c(0x568,0x526,0x5a3,0x576)](_0x5d8cb7[_0x3db4eb(-0x12,0x5c,0x32,-0x38)],0xdc8+0x3*0xc86+-0x333c)?_0x3db4eb(0x63,-0xf,0x27,-0x69):''),'type':TaskType['SD'],'prompt':_0x5d8cb7});currentTaskId=_0x13aadb;let _0x29b4b4=_0x2918e5;_0x5d8cb7=_0xd0b49c[_0x5dd14c(0x4b2,0x4f7,0x4f4,0x46d)](processCharacterPrompt,_0x5d8cb7),_0x2918e5=_0xd0b49c[_0x5dd14c(0x53c,0x459,0x4f1,0x461)](processCharacterPrompt,_0x2918e5),_0x5d8cb7=await stripChineseAnnotations(_0x5d8cb7),_0x2918e5=await _0xd0b49c[_0x3db4eb(0x5,-0x7a,-0x45,-0x1b)](stripChineseAnnotations,_0x2918e5);const _0xdfc839=extension_settings[extensionName]['sdUrl'][_0x5dd14c(0x583,0x5a7,0x56b,0x52e)](),_0x16644c=extension_settings[extensionName];_0xd0b49c[_0x3db4eb(-0x1,0x62,0xc2,0xbf)](addLog,_0x3db4eb(0x26,-0x74,-0x8,-0x109)+_0x5dd14c(0x4d3,0x4c5,0x50a,0x4bd)+'端为'+_0x16644c[_0x5dd14c(0x532,0x558,0x4f7,0x551)]+_0x3db4eb(-0x85,-0x43,-0x5,0x20)+_0x16644c[_0x5dd14c(0x5aa,0x5b0,0x560,0x4d0)+_0x5dd14c(0x5ec,0x59d,0x5b8,0x5e0)]);const _0x2b7212=_0x2918e5&&_0xd0b49c[_0x5dd14c(0x46c,0x55a,0x4cd,0x46d)](_0x2918e5[_0x5dd14c(0x5b9,0x594,0x56b,0x5e9)](),'')?_0x2918e5:_0x5d8cb7;addLog('用于生成的Tag:\x20'+_0x2b7212);let _0x2707e6=![];if(_0x2b7212[_0x3db4eb(0x6,0x19,-0x6e,0xb3)]('Scene\x20Comp'+_0x5dd14c(0x577,0x50f,0x544,0x573))){if(_0xd0b49c[_0x3db4eb(-0x42,-0xc9,-0x77,-0xc1)]('QdsvS',_0xd0b49c['ktwOa'])){_0xd0b49c[_0x5dd14c(0x554,0x462,0x4ed,0x4db)](_0x548f1d,_0x3db4eb(0x2d,-0x6f,-0x31,0x32)+_0x5dd14c(0x5ff,0x5ab,0x575,0x4cf)),_0x1a4cb0=_0xd0b49c['ZgEhy'](_0x509214,_0x1fc712),_0x5022a9=_0x30f46c[_0xd0b49c[_0x3db4eb(-0x108,-0x93,-0x14,-0xcb)]];for(let _0x192adb=0x1ba4+-0x2051*0x1+0x4ae;_0x192adb<=-0x55*-0x1+-0x2*0x99b+0x12e5;_0x192adb++){_0x355e07[_0x5dd14c(0x553,0x4b3,0x4fc,0x4a6)+_0x192adb+_0x3db4eb(-0x55,0x4,-0xf,-0x26)]&&(_0x5c08d6=_0xd0b49c[_0x5dd14c(0x477,0x4f1,0x4e7,0x4f4)](_0x3402a1,',\x20')+_0x23d778[_0x3db4eb(-0x117,-0x9a,-0x141,-0x10f)+_0x192adb+'\x20Prompt']);}}else _0x2707e6=!![];}_0xd0b49c[_0x5dd14c(0x4ac,0x494,0x4ed,0x4b3)](addLog,_0x5dd14c(0x585,0x4d3,0x4df,0x4f8)+_0x3db4eb(0x51,0x1a,-0x49,-0x31)+_0x5dd14c(0x5dd,0x52b,0x5b7,0x5e6)+_0x2707e6);let _0x1d4bee={};function _0x5dd14c(_0x13e417,_0xfece61,_0x383df3,_0x1b04f5){return _0x57b3(_0x383df3-0x371,_0x1b04f5);}let _0x3d9f3a='',_0x55e822='';if(_0x2707e6){if(_0xd0b49c[_0x3db4eb(-0xdd,-0x70,-0x6f,-0x15)](_0xd0b49c[_0x5dd14c(0x605,0x4ff,0x597,0x5d8)],'EsWHj')){_0xd0b49c[_0x3db4eb(0x30,-0x7a,0x2,-0x24)](addLog,_0xd0b49c['rslJo']),_0x1d4bee=_0xd0b49c['IGkSV'](parsePromptStringWithCoordinates,_0x2b7212),_0x3d9f3a=_0x1d4bee[_0xd0b49c['pdqdR']];for(let _0x2a288a=0x4cc*0x1+0x88*-0x16+0x6e5;_0xd0b49c['tTvXF'](_0x2a288a,-0xeb3+-0xe28+0x1cdf);_0x2a288a++){_0x1d4bee['Character\x20'+_0x2a288a+_0x5dd14c(0x58a,0x500,0x59a,0x53c)]&&(_0x55e822=_0xd0b49c['GzJtv'](_0xd0b49c[_0x5dd14c(0x562,0x60f,0x5c2,0x527)](_0x55e822,',\x20'),_0x1d4bee[_0x3db4eb(-0x13f,-0x9a,-0xfe,-0x3a)+_0x2a288a+'\x20Prompt']));}}else!_0x3134dd[_0x5dd14c(0x585,0x65b,0x5ea,0x5b7)+_0x3db4eb(-0x105,-0xd2,-0x2c,-0x152)]&&(_0x568f6f[_0x5dd14c(0x686,0x5d5,0x5ea,0x5e7)+_0x5dd14c(0x45a,0x4bf,0x4c4,0x4fb)]=!![],_0xd0b49c['XHhBg'](_0xf9ac16)),_0xd0b49c[_0x5dd14c(0x4dd,0x441,0x4d3,0x49f)](_0x24d4fd);}else _0xd0b49c['YNrUI'](_0xd0b49c['lOcQO'],_0xd0b49c[_0x3db4eb(-0x46,-0x46,-0x75,-0xb)])?(_0xd0b49c[_0x3db4eb(0x3c,0x5,0x20,-0x33)](_0x3c4c4e,_0xd0b49c[_0x3db4eb(-0xac,-0xac,-0x96,-0x3a)]),_0x23e140=_0x5218e7):(_0xd0b49c[_0x5dd14c(0x601,0x611,0x5f8,0x686)](addLog,_0xd0b49c[_0x5dd14c(0x522,0x531,0x4ea,0x472)]),_0x3d9f3a=_0x2b7212);let {modifiedPrompt:_0x553d3c,insertions:_0x20d414}=await prompt_replace(_0x3d9f3a,_0x55e822);if(_0x2707e6){if(_0xd0b49c[_0x3db4eb(-0x120,-0x7e,-0x11,-0x33)]('zznbd','zznbd'))_0x5a3c51[_0x5dd14c(0x4ea,0x509,0x4ec,0x582)+_0x3db4eb(0x7e,0x0,-0x73,-0x34)](_0x24e026[_0x3db4eb(-0x33,0x52,0x69,0x98)+_0x3db4eb(-0xc6,-0x1d,-0x14,-0x7d)+'ST'],_0x2544d9),_0x1c8db7[_0x5dd14c(0x658,0x5a6,0x5ea,0x629)+'SDListener']=![],_0xd0b49c['zZGxb'](_0x21d640,_0xd0b49c[_0x3db4eb(-0x3e,0x55,-0x48,-0x2d)]);else for(let _0x1a34ec=-0x1c58+-0x1*-0x1cb2+-0x1*0x59;_0xd0b49c[_0x3db4eb(0x2f,-0x60,-0xb6,-0x46)](_0x1a34ec,-0x2123+0x26bb+0xc*-0x77);_0x1a34ec++){if(_0xd0b49c[_0x3db4eb(0xbc,0x26,0x9d,0x9f)](_0xd0b49c['XwvTe'],_0x3db4eb(-0x109,-0x94,0x12,-0xf1))){if(_0x1d4bee[_0x3db4eb(-0xf,-0x9a,0xb,-0x4e)+_0x1a34ec+_0x5dd14c(0x5eb,0x4f8,0x59a,0x580)]){if(_0x5dd14c(0x529,0x5fe,0x552,0x4b4)===_0xd0b49c[_0x5dd14c(0x561,0x4d3,0x54b,0x519)]){const _0x231a19=_0x31571e?function(){function _0x5d32a3(_0x56ca67,_0x2bdf95,_0x4b438d,_0x2d42a4){return _0x3db4eb(_0x2bdf95,_0x4b438d- -0x192,_0x4b438d-0xe,_0x2d42a4-0x3a);}if(_0x488673){const _0x5dc78e=_0x549abd[_0x5d32a3(-0x222,-0x1ce,-0x213,-0x1d5)](_0x5c9d6e,arguments);return _0x54b1c0=null,_0x5dc78e;}}:function(){};return _0x4627c8=![],_0x231a19;}else _0x553d3c=_0xd0b49c[_0x5dd14c(0x588,0x54b,0x5ed,0x551)](_0x553d3c+',\x20',_0xd0b49c[_0x5dd14c(0x670,0x69e,0x5f8,0x6a4)](prompt_replace_for_character,_0x1d4bee[_0x3db4eb(-0xfb,-0x9a,-0x143,-0x36)+_0x1a34ec+_0x5dd14c(0x506,0x5d9,0x59a,0x5a5)]));}}else{_0xd0b49c[_0x3db4eb(0x33,0x5,0x9d,-0xa4)](_0x3673e7,_0xd0b49c[_0x3db4eb(0x84,0x74,0x4,0x89)]);throw new _0x11ba64(_0xd0b49c[_0x3db4eb(0x1a,-0x3f,-0xd2,-0x63)]);}}}let _0x135c0d=await _0xd0b49c[_0x3db4eb(0xb,-0x6b,-0x5e,-0x15)](zhengmian,extension_settings[extensionName]['yushe'][extension_settings[extensionName]['yusheid_sd']]['fixedPromp'+'t'],_0x553d3c,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x5dd14c(0x63d,0x62b,0x5a2,0x64e)]]['fixedPromp'+_0x3db4eb(-0x1f,-0xb6,-0xbd,-0x11d)],extension_settings[extensionName][_0x5dd14c(0x59f,0x57a,0x5fb,0x5d9)],_0x20d414),_0x2005dd=await _0xd0b49c[_0x5dd14c(0x59e,0x646,0x606,0x5e3)](fumian,extension_settings[extensionName][_0x5dd14c(0x4ad,0x4bd,0x52d,0x4f0)][extension_settings[extensionName][_0x3db4eb(0x69,0xc,-0x84,0x2b)]][_0x5dd14c(0x57b,0x511,0x535,0x573)+'ompt'],extension_settings[extensionName]['UCP_sd']);_0xd0b49c[_0x3db4eb(-0x56,-0x7a,-0x98,-0x8b)](addLog,'负面为:\x20'+_0x2005dd),extension_settings['sd'][_0x5dd14c(0x5b8,0x578,0x52c,0x509)]=_0xdfc839,await saveSettingsDebounced();try{if(_0xd0b49c[_0x5dd14c(0x5e1,0x5db,0x59f,0x5f2)](_0x16644c[_0x5dd14c(0x51b,0x4f2,0x4f7,0x57e)],_0xd0b49c[_0x3db4eb(-0x5b,-0x65,-0x5c,-0xdc)])){const _0x157dd0={};_0x157dd0[_0x3db4eb(0x1e,0x75,-0x5,0x81)]=_0x16644c[_0x5dd14c(0x548,0x553,0x5b5,0x5a7)+_0x3db4eb(-0x59,0x3e,0x29,0xa0)]?_0x16644c[_0x5dd14c(0x528,0x614,0x5b5,0x606)+_0x3db4eb(0x54,0x3e,0x67,0xad)]:'',_0x157dd0[_0x5dd14c(0x653,0x510,0x5a8,0x5e7)]=_0xdfc839;const _0x3f1d47=await _0xd0b49c[_0x5dd14c(0x642,0x597,0x606,0x61e)](fetch,_0xd0b49c[_0x3db4eb(-0xac,-0x32,0x61,-0xde)],{'method':_0xd0b49c[_0x5dd14c(0x540,0x5c2,0x5a7,0x622)],'body':JSON[_0x5dd14c(0x517,0x49a,0x53a,0x497)](_0x157dd0),'headers':_0xd0b49c[_0x3db4eb(-0xe7,-0xa0,-0x48,-0x137)](getRequestHeaders,window['token'])});if(!_0x3f1d47['ok']){if(_0xd0b49c[_0x3db4eb(0x2d,0x58,0x62,-0x44)]!==_0xd0b49c[_0x3db4eb(0x51,0x58,0x29,-0xa)])throw new _0x3a1e4f(_0xd0b49c[_0x5dd14c(0x548,0x5a1,0x5b4,0x5e3)]);else{_0xd0b49c[_0x3db4eb(-0x109,-0x87,0x3,-0x107)](addLog,_0x5dd14c(0x612,0x563,0x5c1,0x5ce)+_0x3f1d47[_0x5dd14c(0x51b,0x50b,0x525,0x589)]+'\x20'+_0x3f1d47[_0x5dd14c(0x554,0x4c9,0x52f,0x4ab)]);throw new Error(_0x3db4eb(-0x53,0x2b,-0x71,0xc7)+_0x3f1d47[_0x3db4eb(-0xfd,-0x71,-0x5e,-0x33)]+'\x20'+_0x3f1d47[_0x3db4eb(-0xea,-0x67,0x3b,-0xc1)]);}}let _0x696b3=await _0x3f1d47['text']();console[_0x3db4eb(-0xe1,-0x54,-0x2c,-0xaf)](_0xd0b49c[_0x5dd14c(0x569,0x576,0x533,0x5b9)],_0x696b3),console['log'](_0xd0b49c[_0x3db4eb(-0x13,0x35,0xce,-0x13)],_0x16644c['sd_cchatu_'+'8_model']);if(_0xd0b49c[_0x5dd14c(0x4bd,0x505,0x558,0x547)](_0x696b3,_0x16644c[_0x3db4eb(0x3c,-0x36,-0x64,-0x79)+'8_model'])){_0xd0b49c[_0x5dd14c(0x5a9,0x64d,0x5d7,0x562)](addLog,'正在设置模型为'+_0x16644c[_0x5dd14c(0x4bf,0x5eb,0x560,0x4e1)+_0x5dd14c(0x516,0x578,0x5b8,0x5e2)]+'...'),toastr[_0x3db4eb(-0xa0,-0x4a,-0xb1,-0x38)](_0x5dd14c(0x539,0x4d8,0x53f,0x5b8)+_0x16644c['sd_cchatu_'+_0x3db4eb(-0x49,0x22,0x1d,0x6e)]);const _0x374396={};_0x374396['auth']=_0x16644c['st_chatu8_'+_0x5dd14c(0x620,0x55a,0x5d4,0x626)]?_0x16644c['st_chatu8_'+_0x3db4eb(0xba,0x3e,-0x4d,-0x66)]:'',_0x374396['url']=_0xdfc839,_0x374396[_0x5dd14c(0x56c,0x5f7,0x56a,0x5ee)]=_0x16644c[_0x5dd14c(0x552,0x529,0x560,0x608)+'8_model'];const _0x6a123a=await _0xd0b49c[_0x3db4eb(-0x46,-0x25,0x49,-0x92)](fetch,_0x3db4eb(-0x103,-0x5f,-0x67,-0x50)+_0x5dd14c(0x656,0x61c,0x607,0x6a9),{'method':_0x3db4eb(-0x28,-0x2f,0x68,0x2c),'body':JSON['stringify'](_0x374396),'headers':_0xd0b49c['KRolw'](getRequestHeaders,window[_0x3db4eb(-0x3,-0x38,-0x93,0x9)])});if(!_0x6a123a['ok']){addLog(_0x5dd14c(0x4ca,0x4f3,0x51f,0x4fa)+_0x6a123a['status']+'\x20'+_0x6a123a[_0x3db4eb(-0x34,-0x67,-0xce,-0x12)]);throw new Error('切换模型失败:\x20'+_0x6a123a[_0x5dd14c(0x4f8,0x577,0x525,0x50c)]+'\x20'+_0x6a123a[_0x3db4eb(-0x8d,-0x67,-0x4f,-0x61)]);}toastr[_0x5dd14c(0x5a4,0x517,0x54c,0x55f)]('设置模型...为'+_0x16644c['sd_cchatu_'+_0x5dd14c(0x5e4,0x5ad,0x5b8,0x525)]+'成功');}}else{let _0x392af5=await _0xd0b49c[_0x3db4eb(0xe8,0x77,0x45,0xfe)](getSDMode,_0xdfc839);_0x392af5!=_0x16644c['sd_cchatu_'+_0x3db4eb(0xa4,0x22,0x5d,-0x2)]&&(_0xd0b49c[_0x3db4eb(-0x2e,0x15,0x68,0xad)](_0xd0b49c[_0x5dd14c(0x57c,0x551,0x578,0x617)],_0xd0b49c['DMQAo'])?_0x256004=_0xa81fb9(_0x156308):(_0xd0b49c['SYNYI'](addLog,_0x5dd14c(0x578,0x556,0x519,0x595)+_0x16644c[_0x3db4eb(-0x4b,-0x36,-0x96,-0x9a)+'8_model']+_0x3db4eb(-0x5b,-0xf,0x1f,-0x28)),await setSDMode(_0xdfc839,_0x16644c[_0x3db4eb(-0xc0,-0x36,-0xbf,0x12)+'8_model'])));}}catch(_0x41382e){_0xd0b49c['jqUxL'](addLog,'获取或者切换模型失败'+':\x20'+_0x41382e[_0x3db4eb(-0x53,-0xb1,-0xda,-0x12b)]+('。请检查sdwebu'+'i是否正常启动，并检'+_0x5dd14c(0x57d,0x436,0x4d6,0x470))),taskQueue[_0x3db4eb(-0xd9,-0xbe,-0x17,-0x55)+'sk'](_0x13aadb,![]),currentTaskId=null;throw new Error('获取或者切换模型失败'+_0x3db4eb(-0x7f,-0xad,-0x65,-0x1e)+_0x3db4eb(0x16,-0x1b,-0x4,-0x31)+_0x5dd14c(0x4d4,0x524,0x4d6,0x45c));}let _0x101f50=-(-0x809+0xb*-0x11b+0x1433);const _0x495d99=_0x16644c[_0x5dd14c(0x4e8,0x546,0x54e,0x576)];if(_0xd0b49c[_0x3db4eb(0x2a,0x26,0xb0,0xd1)](_0x495d99,'')&&_0xd0b49c[_0x3db4eb(0x6d,-0x6,0x2d,-0x40)](_0x495d99,null)&&!_0xd0b49c[_0x3db4eb(-0x14e,-0xa9,-0x10b,-0x9d)](isNaN,_0xd0b49c['oaVAt'](Number,_0x495d99))&&_0xd0b49c[_0x3db4eb(-0x60,-0x9d,-0x10b,-0x11b)](_0xd0b49c[_0x3db4eb(-0xd9,-0xa5,-0x136,-0x8c)](Number,_0x495d99),0x985+-0x32f*-0x5+-0x8*0x32e)){if(_0xd0b49c[_0x5dd14c(0x54e,0x58a,0x59f,0x567)](_0xd0b49c[_0x3db4eb(0x30,0x25,0x99,-0x2d)],_0xd0b49c['QaTlD'])){if(_0x47dada){const _0x179fb1=_0x1f1198['apply'](_0x3b736e,arguments);return _0x5d2228=null,_0x179fb1;}}else _0x101f50=_0xd0b49c[_0x3db4eb(-0x8b,-0x3b,-0x90,-0x1f)](Number,_0x495d99);}let _0x2efde7={'prompt':_0x135c0d,'negative_prompt':_0x2005dd,'sampler_name':_0x16644c['sd_cchatu_'+'8_samplerN'+'ame'],'scheduler':_0x16644c[_0x5dd14c(0x516,0x518,0x560,0x56d)+_0x5dd14c(0x51d,0x551,0x4dc,0x527)+'r'],'steps':_0x16644c['sd_csteps'],'cfg_scale':_0x16644c[_0x5dd14c(0x5b1,0x5c3,0x569,0x502)],'width':_0x492b17?_0x492b17:_0x16644c[_0x3db4eb(-0x123,-0x80,-0x41,-0xfc)],'height':_0x5a7ca1?_0x5a7ca1:_0x16644c['sd_cheight'],'restore_faces':_0xd0b49c[_0x3db4eb(0x82,-0x17,-0x8a,-0x14)](_0x16644c[_0x3db4eb(0x28,0x46,-0x2f,-0x23)+'es'],_0x5dd14c(0x590,0x5b3,0x58e,0x550)),'enable_hr':_0x16644c['sd_chires_'+_0x5dd14c(0x585,0x458,0x4e4,0x48d)]==_0xd0b49c[_0x5dd14c(0x54f,0x475,0x50e,0x545)],'hr_upscaler':_0x16644c['sd_cchatu_'+_0x3db4eb(0x73,0x1b,0x19,-0x20)],'hr_scale':_0x16644c[_0x5dd14c(0x4bd,0x5df,0x559,0x532)+_0x3db4eb(-0xc6,-0x99,-0x12d,0x6)],'hr_additional_modules':[],'denoising_strength':_0x16644c[_0x3db4eb(0x91,0x78,0xb5,0xb)+_0x5dd14c(0x5e5,0x4c4,0x554,0x558)+'th'],'hr_second_pass_steps':_0x16644c[_0x3db4eb(-0x1c,-0x5a,0x28,-0xf)+'steps'],'seed':_0x101f50,'override_settings':{'CLIP_stop_at_last_layers':_0xd0b49c[_0x5dd14c(0x48f,0x48f,0x4ff,0x578)](Number,_0x16644c[_0x3db4eb(-0x29,-0x15,0x8,0x19)+_0x5dd14c(0x450,0x526,0x4f8,0x53f)]),'sd_vae':_0x16644c[_0x5dd14c(0x4f4,0x580,0x560,0x4e6)+_0x3db4eb(-0x3e,0x47,-0x40,-0x22)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0xd0b49c[_0x3db4eb(-0x10e,-0xa9,-0xd4,-0xe0)](addLog,_0x3db4eb(-0x48,-0x55,-0x51,-0x2)+_0x5dd14c(0x59e,0x52e,0x538,0x59d)+_0x2efde7[_0x3db4eb(-0x94,-0x55,-0x99,0x2b)+_0x5dd14c(0x47f,0x593,0x4f5,0x473)]),addLog(_0x3db4eb(-0x7f,0xf,0xb8,0xd)+_0x5dd14c(0x4c2,0x535,0x568,0x583)+_0x2efde7[_0x5dd14c(0x671,0x5da,0x5e4,0x5a6)]);if(_0xd0b49c['PlKoo'](_0x16644c[_0x5dd14c(0x55b,0x49e,0x513,0x53e)+_0x5dd14c(0x611,0x5cf,0x5ce,0x5c4)],_0xd0b49c[_0x5dd14c(0x56a,0x4a4,0x50e,0x571)])){if(_0x3db4eb(-0x3,0x32,-0x1,0xe)!==_0xd0b49c[_0x3db4eb(-0x4a,0xb,-0x23,-0x18)])_0x3d3d64[_0x3db4eb(-0xbf,-0xbe,-0xa9,-0x96)+'sk'](_0x186d13,![]);else{addLog(_0xd0b49c[_0x3db4eb(-0x2a,0x45,0x7a,-0x18)]);const _0x752c53={};_0x752c53[_0x5dd14c(0x4d1,0x58b,0x4e6,0x4fc)]=_0x3db4eb(-0x11,0x83,-0x24,0x53)+'8n.pt';const _0x55b734={};_0x55b734[_0x3db4eb(-0x142,-0xb9,-0x14e,-0xc4)]=[!![],!![],_0x752c53];const _0x2474ba={};_0x2474ba['ADetailer']=_0x55b734;const _0x260dbe={};_0x260dbe['alwayson_s'+_0x5dd14c(0x527,0x54d,0x4e3,0x536)]=_0x2474ba,_0x2efde7=_0xd0b49c[_0x5dd14c(0x66f,0x65c,0x606,0x647)](deepMerge,_0x2efde7,_0x260dbe);}}const _0x403deb='\x0a---\x0a###\x20生'+_0x3db4eb(0x3,0xa,-0x79,-0x66)+_0x5dd14c(0x626,0x5a5,0x5f4,0x598)+'pt):**\x20'+_0x135c0d+(_0x3db4eb(-0x13,0x80,0xcb,0xb3)+'(Negative\x20'+_0x3db4eb(-0x60,0x27,0x33,-0x58)+'\x20')+_0x2005dd+(_0x3db4eb(-0x1d,-0x98,-0x128,-0x45)+_0x3db4eb(0x50,0x20,0x8c,0x55)+_0x5dd14c(0x613,0x57f,0x582,0x53d))+_0x2efde7[_0x3db4eb(-0xc6,-0xcf,-0x15e,-0x8b)+'me']+('\x0a-\x20**步数\x20(S'+_0x3db4eb(0x7d,-0xb,-0x9a,-0x9c))+_0x2efde7[_0x3db4eb(-0xe3,-0x96,-0xe3,-0x4e)]+(_0x5dd14c(0x5dc,0x58f,0x547,0x5d6)+'cale:**\x20')+_0x2efde7[_0x5dd14c(0x5e4,0x62b,0x5e7,0x55e)]+(_0x3db4eb(-0x14,-0x40,-0xaa,0x17)+_0x5dd14c(0x583,0x54c,0x510,0x4b8))+_0x2efde7['width']+'x'+_0x2efde7[_0x3db4eb(0x65,0x6a,-0xe,0xd7)]+(_0x3db4eb(-0x14,-0x33,0x53,0x23)+_0x5dd14c(0x4e8,0x4f4,0x51d,0x5c3))+(_0xd0b49c[_0x3db4eb(-0x18,-0x70,0x2a,-0x2d)](_0x2efde7['seed'],-(0x11e9+0x65f+-0x1847))?_0xd0b49c[_0x3db4eb(0x1e,0x3,0x18,-0x59)]:_0x2efde7[_0x3db4eb(0x2e,0x10,-0xd,-0x6d)])+('\x0a-\x20**模型\x20(M'+_0x5dd14c(0x530,0x56c,0x4fb,0x495))+_0x16644c[_0x3db4eb(0xd,-0x36,-0xcc,-0xb9)+'8_model']+(_0x3db4eb(-0x81,0x2,0x38,0x30)+'*\x20')+_0x2efde7[_0x3db4eb(0x56,0x5b,0x3e,0xf7)+_0x3db4eb(-0x68,-0x78,-0xef,-0x50)]['sd_vae']+(_0x5dd14c(0x518,0x4fc,0x52e,0x589)+_0x5dd14c(0x5c2,0x650,0x5c9,0x52d))+_0x2efde7[_0x3db4eb(0x18,0x5b,0x19,-0x4d)+_0x5dd14c(0x47e,0x574,0x51e,0x47f)]['CLIP_stop_'+'at_last_la'+_0x5dd14c(0x4df,0x4c5,0x55d,0x51a)]+(_0x3db4eb(0x120,0x7e,0x9b,0x3)+_0x5dd14c(0x641,0x625,0x5a4,0x627)+'):**\x20')+_0x2efde7[_0x3db4eb(-0x22,0x4e,-0x40,0xee)]+(_0x3db4eb(-0x39,-0x53,-0x9d,0x3c)+_0x5dd14c(0x67c,0x656,0x5fe,0x688)+_0x5dd14c(0x582,0x5bc,0x570,0x618))+_0x2efde7[_0x5dd14c(0x4f5,0x4e6,0x50d,0x589)]+('\x0a-\x20**重绘幅度\x20'+'(Denoising'+_0x5dd14c(0x62b,0x616,0x5ec,0x647)+_0x5dd14c(0x5bf,0x493,0x528,0x56c))+_0x2efde7[_0x5dd14c(0x495,0x47b,0x50b,0x4be)+_0x5dd14c(0x5d4,0x5c5,0x5d6,0x593)]+(_0x5dd14c(0x5df,0x551,0x57e,0x5fe)+_0x3db4eb(0xc9,0x3a,0x82,-0x47)+_0x3db4eb(0x65,-0x2a,-0xa5,-0x4b))+_0x2efde7[_0x5dd14c(0x595,0x4b3,0x541,0x540)+_0x5dd14c(0x526,0x560,0x4f5,0x50c)]+(_0x3db4eb(-0x41,-0x64,-0xd3,-0x61)+_0x5dd14c(0x5f9,0x5a5,0x610,0x6a4))+(_0x16644c[_0x5dd14c(0x55f,0x50e,0x513,0x4ca)+_0x3db4eb(-0x56,0x38,-0x46,-0x71)]==_0xd0b49c[_0x3db4eb(-0x107,-0x88,-0x104,0x20)])+'\x0a---\x0a\x20\x20\x20\x20';_0xd0b49c['QJKfy'](addLog,_0x403deb);function _0x3db4eb(_0x4683f2,_0x2409f0,_0x1a5eac,_0x4cc254){return _0x57b3(_0x2409f0- -0x225,_0x4683f2);}_0xd0b49c[_0x3db4eb(-0x2a,-0x87,-0x47,-0x38)](addLog,'sdwebui生图参'+'数为'+JSON['stringify'](_0x2efde7)),console[_0x3db4eb(0xb,-0x54,0x4,0x32)](_0x5dd14c(0x592,0x504,0x53e,0x565),_0x2efde7);let _0x215524=!![];while(_0x215524){if(_0xd0b49c[_0x5dd14c(0x574,0x5da,0x5ca,0x599)](_0xd0b49c[_0x5dd14c(0x55f,0x4d3,0x577,0x5b3)],_0xd0b49c['BWMve'])){_0xd0b49c['ZgEhy'](_0x244646,'切换模型失败:\x20'+_0x90044f['status']+'\x20'+_0x17b500['statusText']);throw new _0x242322('切换模型失败:\x20'+_0x5d2c43[_0x3db4eb(0x19,-0x71,-0xb0,-0x102)]+'\x20'+_0x16d40f['statusText']);}else{if(window[_0x3db4eb(-0x54,-0xd4,-0x173,-0x171)]){if(_0xd0b49c['seUPW'](_0xd0b49c[_0x5dd14c(0x4d2,0x52c,0x53d,0x50a)],_0xd0b49c[_0x3db4eb(-0x4a,-0x49,-0x76,-0x3f)]))_0x215524=![];else{_0xd0b49c['ByJfU'](_0x21e089,_0x3db4eb(0x65,0x2b,-0x2,0x44)+_0x466981[_0x3db4eb(-0x8b,-0x71,-0x63,-0x16)]+'\x20'+_0x5e9573[_0x3db4eb(-0xd8,-0x67,-0xd1,-0xfb)]);throw new _0x980bf3(_0x5dd14c(0x575,0x630,0x5c1,0x54a)+_0x55119b[_0x3db4eb(-0x101,-0x71,-0x82,-0xd5)]+'\x20'+_0x20fc81[_0x3db4eb(-0x27,-0x67,-0xbd,-0x8c)]);}}else _0xd0b49c['UyOiQ'](_0xd0b49c['aebVO'],_0xd0b49c[_0x3db4eb(0x38,-0x45,-0xd8,-0x5d)])?_0x555af3=![]:await _0xd0b49c[_0x3db4eb(-0x34,-0x37,0x37,-0x8f)](sleep,0x11*0x186+-0x2*0x493+-0xcd8);}};try{window[_0x3db4eb(-0x16d,-0xd4,-0x14a,-0xbd)]=!![],taskQueue['updateStat'+'us'](_0x13aadb,_0xd0b49c[_0x3db4eb(-0x2e,-0xc6,-0x77,-0xfb)]);if(_0xd0b49c[_0x5dd14c(0x5b8,0x635,0x5ca,0x5da)](_0x16644c[_0x3db4eb(-0x144,-0x9f,-0x35,-0x12e)],_0xd0b49c[_0x3db4eb(-0x64,-0x65,-0x8b,0x2a)])){if(!taskQueue[_0x5dd14c(0x5a9,0x525,0x549,0x5e6)+_0x3db4eb(-0x8e,-0x5d,-0xd2,-0x6e)](_0x13aadb)){if(_0x5dd14c(0x471,0x4f0,0x4c8,0x467)===_0xd0b49c[_0x5dd14c(0x608,0x517,0x592,0x52e)]){_0xd0b49c[_0x5dd14c(0x53c,0x4ec,0x4ed,0x525)](addLog,_0x5dd14c(0x4ad,0x44e,0x4d9,0x45f)),eventSource[_0x3db4eb(-0xa,-0x90,-0x91,0x14)](_0xd0b49c[_0x3db4eb(-0x38,0x6d,-0x35,0x107)]);throw new Error(_0xd0b49c[_0x3db4eb(0x23,-0x3f,-0x50,-0xce)]);}else return _0x1b3f59['toString']()[_0x3db4eb(-0xca,-0x75,-0x17,-0x71)](etMoDm[_0x3db4eb(0x5b,0x39,0x76,-0x64)])['toString']()[_0x5dd14c(0x4c6,0x50c,0x54a,0x58c)+'r'](_0x4684ba)['search'](etMoDm['SsJVa']);}_0x2efde7[_0x5dd14c(0x5b1,0x5bf,0x5a8,0x60c)]=_0xdfc839,console['log'](_0xd0b49c[_0x3db4eb(-0x3b,-0xab,-0x132,-0xce)],_0x16644c[_0x5dd14c(0x591,0x632,0x5b5,0x59f)+'sd_auth']),_0x2efde7[_0x3db4eb(0xed,0x75,0x85,0xd6)]=_0x16644c[_0x5dd14c(0x591,0x564,0x5b5,0x602)+_0x5dd14c(0x64a,0x57c,0x5d4,0x591)]?_0x16644c[_0x5dd14c(0x610,0x610,0x5b5,0x65c)+_0x3db4eb(0x19,0x3e,0x46,-0x2a)]:'';const _0xce66d4=await _0xd0b49c[_0x5dd14c(0x587,0x5ff,0x606,0x6a2)](fetch,_0xd0b49c[_0x3db4eb(-0x23,-0xd0,-0xca,-0x45)],{'method':_0xd0b49c['JdHUF'],'headers':getRequestHeaders(window[_0x5dd14c(0x573,0x5b0,0x55e,0x4be)]),'body':JSON[_0x5dd14c(0x589,0x5ce,0x53a,0x57b)](_0x2efde7)});if(!_0xce66d4['ok']){const _0x31c5a6=await _0xce66d4[_0x3db4eb(0x19,0x29,-0x2d,0x7f)]();_0xd0b49c['jApAz'](addLog,_0x5dd14c(0x497,0x584,0x4f0,0x48c)+_0x3db4eb(0x28,0x72,0xd7,0x23)+_0xce66d4['status']+_0x5dd14c(0x603,0x515,0x566,0x4e8)+_0x31c5a6),console[_0x3db4eb(0x12,-0x54,-0xd1,-0x81)](_0xd0b49c['hmfWj'],_0x31c5a6);throw new Error(_0x5dd14c(0x4e6,0x432,0x4c5,0x48b)+_0xce66d4[_0x5dd14c(0x5bf,0x559,0x525,0x4c8)]+_0x5dd14c(0x608,0x5aa,0x565,0x5a8)+_0x31c5a6);}const _0x3ddb4d=await _0xce66d4['text']();let _0x4dc4ad='';try{const _0xe4c3cc=JSON[_0x3db4eb(-0xa5,-0xd,0x1b,-0x67)](_0x3ddb4d);_0x4dc4ad=_0xe4c3cc[_0x3db4eb(0x74,0x5f,-0x47,-0x45)][0x1d51+-0x1*-0x13f2+-0x1*0x3143];}catch(_0x5a7a66){_0xd0b49c[_0x5dd14c(0x5f8,0x544,0x5bc,0x568)](_0xd0b49c['bkZLR'],_0xd0b49c['bkZLR'])?_0x475fba=_0xd0b49c[_0x5dd14c(0x5ae,0x554,0x5ba,0x5e6)](_0x517b07+',\x20',_0x2bf706['Character\x20'+_0x593425+_0x3db4eb(-0x3,0x4,-0x28,0xc)]):(_0xd0b49c[_0x5dd14c(0x4f6,0x56b,0x4f6,0x521)](addLog,_0xd0b49c[_0x5dd14c(0x5b9,0x5b0,0x602,0x632)]),_0x4dc4ad=_0x3ddb4d);}const _0x16dcc1=_0xd0b49c[_0x5dd14c(0x54f,0x5d9,0x58d,0x590)]+_0x4dc4ad;return _0xd0b49c[_0x5dd14c(0x556,0x625,0x5e5,0x558)](addLog,_0x3db4eb(0x55,0x59,-0x42,0x45)+_0x5dd14c(0x5c2,0x5b2,0x56d,0x552)+'L。'),taskQueue[_0x3db4eb(-0xad,-0xbe,-0x113,-0xcb)+'sk'](_0x13aadb,!![]),currentTaskId=null,{'image':_0x16dcc1,'change':_0xd0b49c[_0x3db4eb(0x77,0x3f,-0x6d,-0x6e)](_0x2918e5,'')};}else{if(_0xd0b49c[_0x3db4eb(0xcb,0x26,0x5,0x8e)]('QSBQQ',_0xd0b49c[_0x5dd14c(0x52b,0x618,0x584,0x4f1)])){if(!taskQueue[_0x5dd14c(0x518,0x503,0x549,0x565)+_0x5dd14c(0x5dd,0x57e,0x539,0x545)](_0x13aadb)){if(_0xd0b49c[_0x3db4eb(0x18,0x43,0x17,-0x27)]!==_0xd0b49c[_0x3db4eb(-0x48,0x43,0x85,0x64)])_0xf2582e=!![];else{_0xd0b49c[_0x3db4eb(0x11,0x7c,0x7c,0x6e)](addLog,_0xd0b49c[_0x5dd14c(0x5a3,0x64d,0x60a,0x66e)]);throw new Error(_0xd0b49c['jXlOV']);}}const _0x34a00a=new URL(_0xdfc839+_0xd0b49c[_0x5dd14c(0x54a,0x5bd,0x594,0x611)]);window[_0x3db4eb(-0x39,-0xd4,-0x28,-0x80)]=![];const _0x558a44=await fetch(_0x34a00a,{'method':_0xd0b49c[_0x5dd14c(0x57b,0x5ef,0x5a7,0x57c)],'body':JSON[_0x3db4eb(-0x81,-0x5c,-0x3e,-0x8b)](_0x2efde7),'headers':{'Content-Type':_0x3db4eb(-0x94,-0x7,0x43,-0x8b)+_0x3db4eb(-0x79,-0x50,-0x1a,-0xd6),'Authorization':getsdAuth()}});window[_0x5dd14c(0x52d,0x505,0x4c2,0x46b)]=!![];if(!_0x558a44['ok']){if(_0xd0b49c[_0x3db4eb(0x73,-0x28,0x9,-0x8d)](_0xd0b49c[_0x3db4eb(0x3b,-0x20,0x29,-0x62)],_0xd0b49c[_0x5dd14c(0x4e1,0x603,0x576,0x575)])){const _0x112acd=await _0x558a44['text']();addLog(_0x3db4eb(0x40,0x1d,0xb8,0x31)+_0x5dd14c(0x653,0x5f3,0x5e3,0x5a4)+_0x558a44['status']+_0x5dd14c(0x5a6,0x607,0x566,0x4e8)+_0x112acd),console[_0x5dd14c(0x5e2,0x571,0x542,0x496)](_0xd0b49c[_0x3db4eb(0x46,0x42,0x3,0x8d)],_0x112acd);throw new Error(_0x5dd14c(0x560,0x4c7,0x4c5,0x513)+_0x558a44[_0x3db4eb(-0xf7,-0x71,-0x1,-0x57)]+_0x5dd14c(0x58e,0x58c,0x565,0x5ac)+_0x112acd);}else{const _0x7492f0=_0x4e1ec1['apply'](_0x1d4f20,arguments);return _0x42cffb=null,_0x7492f0;}}const _0x164cde=await _0x558a44[_0x5dd14c(0x693,0x68c,0x613,0x639)]();if(!_0x164cde[_0x5dd14c(0x627,0x59b,0x5f5,0x5c0)]||_0x164cde[_0x5dd14c(0x58f,0x644,0x5f5,0x652)][_0x3db4eb(0x8,0x5c,-0x2f,0x21)]===-0x3*0xc05+0x6*-0x61c+-0x1*-0x48b7)throw new Error(_0x5dd14c(0x62c,0x5fc,0x5c0,0x588)+_0x5dd14c(0x4c5,0x485,0x524,0x523));const _0x3481e9=_0x164cde[_0x5dd14c(0x5e0,0x5cd,0x5f5,0x5a0)][-0x2047+0x1*0x1b92+0xf1*0x5],_0x22a358=_0xd0b49c[_0x5dd14c(0x5f3,0x5c7,0x5b9,0x5cf)](_0x5dd14c(0x517,0x5d2,0x540,0x498)+_0x5dd14c(0x570,0x58e,0x4ef,0x514)+'4,',_0x3481e9);return addLog(_0xd0b49c[_0x5dd14c(0x516,0x4e6,0x54f,0x4f2)]),taskQueue[_0x5dd14c(0x543,0x51b,0x4d8,0x470)+'sk'](_0x13aadb,!![]),currentTaskId=null,{'image':_0x22a358,'change':_0xd0b49c[_0x3db4eb(0x2d,0x3f,0xb5,0x7)](_0x29b4b4,'')};}else{const _0xff90d4=_0xd0b49c[_0x3db4eb(-0x54,-0x8d,-0x92,-0x119)][_0x5dd14c(0x637,0x652,0x5aa,0x5d6)]('|');let _0x3b611e=0x2253+0x1551+-0x37a4;while(!![]){switch(_0xff90d4[_0x3b611e++]){case'0':_0xd0b49c[_0x5dd14c(0x46c,0x516,0x4ce,0x55e)](_0x22fb57,_0x5dd14c(0x51d,0x563,0x4e8,0x58e)+_0x5ac6f5['message']);continue;case'1':throw _0x3b36b9;continue;case'2':if(_0xd0b49c[_0x3db4eb(0x2c,-0x70,0x39,-0x43)](_0x294e0b[_0x3db4eb(-0x1b,-0xb1,-0x1c,-0x7f)],_0x5dd14c(0x61c,0x65d,0x605,0x5bf))){}else _0x38c853[_0x3db4eb(-0x29,-0xbe,-0xba,-0xce)+'sk'](_0x12d57e,![]);continue;case'3':_0x500114['error'](_0xd0b49c[_0x5dd14c(0x55b,0x5c1,0x595,0x4ff)],_0x5cb6c9);continue;case'4':_0x4c488d=null;continue;case'5':_0x594bc2[_0x5dd14c(0x4e0,0x475,0x4c2,0x497)]=!![];continue;}break;}}}}catch(_0xe9521b){if(_0xd0b49c[_0x3db4eb(0x1f,0x5a,0xb4,-0x3b)](_0x5dd14c(0x529,0x51b,0x4f2,0x563),_0x5dd14c(0x502,0x490,0x508,0x48b))){const _0x2ddaff=_0x1bf94e[_0x3db4eb(0x8b,-0xd,-0xd,0x7)](_0x3dca46);_0x4f43a3=_0x2ddaff[_0x5dd14c(0x59a,0x5c0,0x5f5,0x642)][0x7*-0x56+0x468+-0x1*0x20e];}else{window[_0x3db4eb(-0x17e,-0xd4,-0x43,-0x169)]=!![];if(_0xd0b49c['AvhJT'](_0xe9521b[_0x5dd14c(0x51f,0x4f4,0x4e5,0x4c6)],_0xd0b49c[_0x5dd14c(0x524,0x4e4,0x557,0x5d2)])){}else _0xd0b49c[_0x5dd14c(0x615,0x5f2,0x573,0x558)](_0xd0b49c[_0x3db4eb(-0xcd,-0x84,-0xfc,-0xda)],_0xd0b49c[_0x3db4eb(0xa,-0x84,-0x8e,-0x73)])?_0xb8f306['Character\x20'+_0x11ac2a+_0x3db4eb(0x16,0x4,0x15,-0x51)]&&(_0x5b2824=_0xd0b49c['TVcDu'](_0xd0b49c[_0x3db4eb(-0x36,-0xaf,-0x7e,-0xd4)](_0x3ace07,',\x20'),_0x2a9e91[_0x3db4eb(-0x37,-0x9a,0x8,-0x111)+_0x23040a+_0x5dd14c(0x58b,0x55c,0x59a,0x623)])):taskQueue['completeTa'+'sk'](_0x13aadb,![]);currentTaskId=null,_0xd0b49c[_0x5dd14c(0x5c5,0x5ab,0x5d1,0x673)](addLog,'sd请求生图错误:\x20'+_0xe9521b[_0x5dd14c(0x506,0x57d,0x4e5,0x4b7)]),console[_0x5dd14c(0x58c,0x5f3,0x611,0x5c6)](_0xd0b49c[_0x5dd14c(0x5fb,0x5d3,0x595,0x607)],_0xe9521b);throw _0xe9521b;}}}async function sdGenerate(_0x474851){const _0x2b54fa={'TsLCu':function(_0x50aad7,_0x17d819){return _0x50aad7(_0x17d819);},'PoQiq':'SD\x20生图事件监听器'+'已初始化。','zYyCP':function(_0x5206b1,_0x4198da){return _0x5206b1(_0x4198da);},'QQNzZ':'{修图}','zYXQT':function(_0x29c8a6,_0x3620cf){return _0x29c8a6!==_0x3620cf;},'BfOqU':_0x21e3f6(0x2d2,0x1d8,0x21b,0x25a),'bxsji':_0x23506e(0x5a4,0x5a0,0x5cf,0x514),'pruvU':function(_0x444123,_0x486de9){return _0x444123(_0x486de9);},'iDuwl':function(_0x399c0d,_0x57158c){return _0x399c0d!=_0x57158c;},'fsMXY':function(_0x31634a,_0xe4d700,_0x13e1ce,_0x1ea3a0){return _0x31634a(_0xe4d700,_0x13e1ce,_0x1ea3a0);},'qDkDH':_0x23506e(0x690,0x5e6,0x651,0x5af),'pXKYu':_0x21e3f6(0x2cd,0x313,0x2e6,0x28d)+_0x23506e(0x4e6,0x4ef,0x4de,0x502)+_0x21e3f6(0x39e,0x2e6,0x374,0x30d),'yaJTr':function(_0x7f35ca,_0x12219a){return _0x7f35ca(_0x12219a);}};function _0x21e3f6(_0x396dd5,_0x435987,_0x4780cc,_0x927533){return _0x57b3(_0x927533-0xed,_0x435987);}const {id:_0x16057a,prompt:_0x31b279,width:_0x47f98a,height:_0x157a6f,change:_0x386e66}=_0x474851;function _0x23506e(_0x41686d,_0xaae7d8,_0x56d4ad,_0x3d8c8a){return _0x57b3(_0xaae7d8-0x38b,_0x3d8c8a);}_0x2b54fa['TsLCu'](addLog,_0x23506e(0x58e,0x626,0x6c3,0x5f1)+'ID:\x20'+_0x16057a+(_0x23506e(0x503,0x5a4,0x5cd,0x572)+':\x20')+_0x31b279+(_0x386e66?_0x23506e(0x562,0x5b6,0x652,0x5f9)+'\x20'+_0x386e66:''));if(_0x386e66&&_0x386e66['includes'](_0x2b54fa[_0x23506e(0x597,0x617,0x6ad,0x673)])){if(_0x2b54fa[_0x23506e(0x58f,0x611,0x583,0x5ba)](_0x21e3f6(0x266,0x271,0x232,0x2dd),_0x2b54fa[_0x21e3f6(0x3e4,0x3ef,0x386,0x349)])){_0x2b54fa[_0x23506e(0x600,0x576,0x50b,0x531)](bananaGenerate,_0x474851);return;}else{_0x2b54fa[_0x21e3f6(0x2e4,0x205,0x294,0x2b0)](_0x4d4249,'获取或者切换模型失败'+':\x20'+_0x2eb7a8[_0x23506e(0x5a9,0x4ff,0x4d7,0x454)]+(_0x21e3f6(0x2b1,0x374,0x259,0x2ee)+_0x21e3f6(0x2a8,0x388,0x29d,0x2f7)+'查模型是否正确。')),_0x2b467f['completeTa'+'sk'](_0x147cae,![]),_0x5653c4=null;throw new _0x3c005d(_0x21e3f6(0x2bf,0x38f,0x323,0x2f8)+_0x21e3f6(0x2b6,0x307,0x2ad,0x265)+_0x21e3f6(0x2f3,0x323,0x27b,0x2f7)+'查模型是否正确。');}}try{if(_0x2b54fa[_0x23506e(0x64b,0x611,0x5c1,0x68e)]('UIjvf',_0x2b54fa[_0x21e3f6(0x228,0x2f5,0x2d1,0x283)])){const {image:_0x14e4dd,change:_0x2f0ba7}=await _0x2b54fa[_0x21e3f6(0x370,0x306,0x317,0x356)](generateSDImage,{'prompt':_0x31b279,'width':_0x47f98a,'height':_0x157a6f,'change':_0x386e66});if(_0x2b54fa[_0x23506e(0x500,0x53d,0x4d7,0x5d7)](extension_settings[extensionName][_0x21e3f6(0x385,0x31c,0x2a8,0x2de)],'0')){const _0x4ec3da={};_0x4ec3da[_0x21e3f6(0x35b,0x2e1,0x320,0x34e)]=_0x2f0ba7,await _0x2b54fa[_0x23506e(0x479,0x4e9,0x510,0x578)](setItemImg,_0x31b279,_0x14e4dd,_0x4ec3da),addLog(_0x23506e(0x479,0x508,0x559,0x534)+_0x21e3f6(0x2d3,0x1ec,0x233,0x26f)+'\x20'+_0x31b279);}else _0x2b54fa['TsLCu'](addLog,_0x21e3f6(0x3cb,0x37c,0x3be,0x380)+'库');const _0x43e331={};_0x43e331['id']=_0x16057a,_0x43e331[_0x23506e(0x59b,0x5fc,0x5af,0x575)]=!![],_0x43e331[_0x21e3f6(0x2e0,0x203,0x2ee,0x248)]=_0x14e4dd,_0x43e331[_0x21e3f6(0x288,0x2fc,0x1fe,0x2a6)]=_0x31b279,_0x43e331[_0x23506e(0x55c,0x5ec,0x54a,0x637)]=_0x2f0ba7,eventSource[_0x23506e(0x503,0x520,0x4ec,0x523)](EventType[_0x21e3f6(0x306,0x2c6,0x354,0x364)+_0x21e3f6(0x2a7,0x307,0x275,0x2d6)+_0x23506e(0x691,0x603,0x5d8,0x5ee)],_0x43e331),_0x2b54fa[_0x23506e(0x587,0x576,0x5af,0x514)](addLog,'发送SD生图成功响应'+_0x23506e(0x61c,0x589,0x511,0x548)+_0x16057a+')');}else _0x2e9e35['on'](_0x4c6f77[_0x21e3f6(0x361,0x3a4,0x385,0x364)+_0x21e3f6(0x39f,0x369,0x24e,0x2f5)+'ST'],_0x2881e5),_0x2b54fa[_0x23506e(0x58f,0x54e,0x5bb,0x500)](_0x59475f,_0x2b54fa['PoQiq']);}catch(_0x550172){if(_0x2b54fa[_0x23506e(0x63f,0x611,0x58f,0x5c9)](_0x2b54fa[_0x23506e(0x57c,0x555,0x512,0x512)],_0x2b54fa['qDkDH'])){_0x2b54fa[_0x23506e(0x4eb,0x576,0x5e9,0x5f1)](_0x3e533b,_0x355ed6);return;}else{const _0x3b4cd8='SD生图流程捕获到异'+_0x21e3f6(0x323,0x355,0x359,0x362)+_0x16057a+_0x23506e(0x52c,0x543,0x5e6,0x5db)+_0x550172[_0x23506e(0x495,0x4ff,0x541,0x46c)];addLog('错误:\x20'+_0x3b4cd8),console[_0x21e3f6(0x2f2,0x2fa,0x306,0x38d)](_0x2b54fa[_0x21e3f6(0x36d,0x2b4,0x3e2,0x34f)],_0x550172);const _0x5482d4={};_0x5482d4['id']=_0x16057a,_0x5482d4[_0x21e3f6(0x311,0x2cc,0x3c9,0x35e)]=![],_0x5482d4[_0x21e3f6(0x422,0x34a,0x422,0x38d)]=_0x550172[_0x23506e(0x492,0x4ff,0x597,0x484)],_0x5482d4[_0x23506e(0x52a,0x544,0x530,0x5d9)]=_0x31b279,eventSource[_0x23506e(0x4ff,0x520,0x581,0x5c9)](EventType[_0x23506e(0x676,0x602,0x585,0x582)+_0x21e3f6(0x285,0x37c,0x33e,0x2d6)+_0x21e3f6(0x2bf,0x2fe,0x2f1,0x365)],_0x5482d4),_0x2b54fa[_0x21e3f6(0x385,0x2e6,0x2c8,0x329)](addLog,_0x23506e(0x5e9,0x5e1,0x68e,0x553)+_0x23506e(0x633,0x589,0x513,0x56f)+_0x16057a+')');}}}function initializeSDListener(){function _0x4c63d9(_0x1e5b24,_0x643418,_0x3f5224,_0x4f3354){return _0x57b3(_0x3f5224-0x158,_0x1e5b24);}const _0x3ecc03={};function _0x4f81bc(_0x218089,_0x1dae57,_0x4951e6,_0x10d190){return _0x57b3(_0x1dae57- -0x83,_0x10d190);}_0x3ecc03['yuyAU']=_0x4f81bc(0x23e,0x1ed,0x296,0x1c9)+'已初始化。';const _0x25a0fd=_0x3ecc03;eventSource['on'](EventType['GENERATE_I'+_0x4f81bc(0x149,0x185,0x133,0x1cc)+'ST'],sdGenerate),addLog(_0x25a0fd['yuyAU']);}export async function replaceWithSd(){const _0x244deb={'VxZeN':function(_0x1a682d,_0x507298){return _0x1a682d(_0x507298);},'dPnnU':_0x1b568f(0x51d,0x531,0x4d4,0x53b)+'face\x20为开启','WQNib':_0x409faa(0x3c4,0x33a,0x308,0x3c9)+_0x1b568f(0x573,0x5fa,0x545,0x619),'ytVSC':function(_0x8c7678,_0x57a6bf){return _0x8c7678==_0x57a6bf;},'CfPbf':function(_0x5cc990){return _0x5cc990();},'lDNrf':function(_0x11745b){return _0x11745b();},'zPkjb':'nuyPP','xSypr':_0x409faa(0x302,0x322,0x29b,0x2ea),'kFVlQ':'SD\x20生图事件监听器'+'已关闭。'};function _0x1b568f(_0xda9341,_0x59fbf0,_0x1a9604,_0x1ba047){return _0x57b3(_0xda9341-0x3c4,_0x1a9604);}function _0x409faa(_0x216158,_0xd3d867,_0x196fec,_0x23e24a){return _0x57b3(_0xd3d867-0x92,_0x23e24a);}if(_0x244deb[_0x409faa(0x19e,0x1fb,0x1e5,0x215)](extension_settings[extensionName][_0x409faa(0x18d,0x21b,0x18e,0x1b1)],'sd'))!window[_0x409faa(0x2e7,0x30b,0x350,0x30f)+_0x409faa(0x193,0x1e5,0x1f2,0x1d6)]&&(window[_0x409faa(0x2bf,0x30b,0x307,0x28a)+_0x409faa(0x1cc,0x1e5,0x247,0x145)]=!![],_0x244deb['CfPbf'](initializeSDListener)),_0x244deb[_0x409faa(0x23b,0x1e2,0x1d3,0x1c7)](initializeImageProcessing);else{if(window[_0x1b568f(0x63d,0x5ef,0x63f,0x652)+_0x409faa(0x1ff,0x1e5,0x1a4,0x18f)]){if(_0x244deb['zPkjb']!==_0x244deb['xSypr'])eventSource['removeList'+_0x1b568f(0x5e9,0x5aa,0x5a2,0x5bb)](EventType[_0x1b568f(0x63b,0x6a7,0x692,0x631)+'MAGE_REQUE'+'ST'],sdGenerate),window['initialize'+_0x409faa(0x243,0x1e5,0x286,0x1a8)]=![],_0x244deb[_0x409faa(0x1c6,0x1f3,0x25b,0x16d)](addLog,_0x244deb[_0x409faa(0x2d9,0x235,0x18a,0x1b8)]);else{_0x244deb['VxZeN'](_0x3b0c29,_0x244deb[_0x409faa(0x29b,0x23b,0x1d9,0x248)]);const _0x3d82f0={};_0x3d82f0[_0x409faa(0x1dd,0x207,0x2b2,0x219)]=_0x244deb[_0x1b568f(0x527,0x4b1,0x4ba,0x581)];const _0x346549={};_0x346549[_0x1b568f(0x530,0x550,0x525,0x589)]=[!![],!![],_0x3d82f0];const _0x590278={};_0x590278[_0x409faa(0x389,0x314,0x319,0x3af)]=_0x346549;const _0x47ef65={};_0x47ef65['alwayson_s'+_0x1b568f(0x536,0x540,0x490,0x500)]=_0x590278,_0x4db7c4=_0x4df108(_0x4e15ee,_0x47ef65);}}}}