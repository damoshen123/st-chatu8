(function(_0x5d47fc,_0x53f3dc){function _0xf10352(_0x535176,_0x2d49b7,_0x704da,_0x5d7b26){return _0x3fcb(_0x535176- -0x252,_0x2d49b7);}const _0x3b81ef=_0x5d47fc();function _0x435f65(_0x5d7e39,_0xa3b8f,_0x19f009,_0x3f18cb){return _0x3fcb(_0x5d7e39- -0xe2,_0x3f18cb);}while(!![]){try{const _0x4a16a2=parseInt(_0xf10352(-0x22,-0xb2,-0x4f,-0x64))/(-0x9b+-0x250a+0x25a6)*(parseInt(_0xf10352(0x38,0x6d,0xd7,0xc))/(0x58+0x67*0x1f+0xccf*-0x1))+parseInt(_0x435f65(0x1a4,0x155,0x184,0x19e))/(0xb*-0x35+0x2*-0x491+0xb6c)*(parseInt(_0xf10352(0x47,0x5d,-0x5c,0xb0))/(-0x981+0x1*-0x1a6b+0x23f0))+-parseInt(_0xf10352(-0x87,-0x3,-0x4c,-0x1c))/(-0x2360+-0x16dc*0x1+0x3a41)*(-parseInt(_0x435f65(0x1dd,0x14e,0x18b,0x164))/(-0x5ed+-0x13bc+-0x19af*-0x1))+parseInt(_0x435f65(0x200,0x16b,0x1fc,0x1a5))/(-0x482*-0x8+0x1*0x160d+-0x1d0b*0x2)+-parseInt(_0xf10352(-0x35,-0xd,0xd,-0x27))/(0x1dd5+-0xa8f+0x99f*-0x2)*(parseInt(_0x435f65(0x1f2,0x27e,0x156,0x170))/(-0x223d+0x26d6+-0x490))+-parseInt(_0xf10352(0xb7,0x56,0x4d,0x11f))/(-0x1555+0x1*-0x1b6b+0x1865*0x2)+-parseInt(_0x435f65(0xf7,0x147,0x15b,0xef))/(0x72f*0x4+-0xd1*-0xb+-0x25ac)*(parseInt(_0x435f65(0x1ee,0x1bf,0x1fb,0x216))/(0x1e47+-0x1*0x21+0x1e1a*-0x1));if(_0x4a16a2===_0x53f3dc)break;else _0x3b81ef['push'](_0x3b81ef['shift']());}catch(_0x1fd43a){_0x3b81ef['push'](_0x3b81ef['shift']());}}}(_0x1510,-0x43c61+0x2*-0x181f5+0xc39d2));function _0x1510(){const _0x23e6e8=['yxLkAgy','BNPrv2m','AhjFC2nHBgu','DxHTz3m','Bw9KzwW','suq6ia','C2rFy2HPCMvZxW','z3rZA1i','C2rFy3n0zxbZ','q2f3sxy','cI0GkIRMQkhLNOSGke0','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','nxW0Fdb8mNWXFa','C3rYAw5NAwz5','yxjNCW','EwHMCvO','y2vZ','DgvWCYK6kIOG','y29TCgXLDgvuyq','BMvYyxrL','C2rFDMfL','DxjS','s3Hcy24','Eu1puwq','ruTUzKW','AufmAMS','C2rdzMDty2fSzq','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','C2rFy3vWC2nHBa','ANnVBG','ALrKz3O','Cgf5Bg9Hza','CgfYC2u','5zon5BQu5yAf5A65oG','ywnLCYK6kIOG','rLvJzMG','u0qGqvbjioI/LowBNUMuMq','ntzQyMvyC00','DhL1Cg4','zML4zwrqCM9TCa','AKnxwfm','zgf0ytPPBwfNzq','BgXqzhK','6AUy5RIf5l+U5Asnios4UG','Cgf5C3rFy2HHDa','of91ChnJywXLCG','cI0GkIRPH43NU5JLUyxLUQyG','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','sMr2wMi','AhvYExG','r2XLBgu','wu9wCg4','BvnICwG','tufhrv9srvnqtW','BerrtNG','qvfux3nK','mM1juu1hrq','CMf0Aw5NigLTyq','CMvZDg9Yzv9Myq','D2LKDgG','ywrFBw9KzwW','tKnZyMO','of9TB2rLBa','EwvYCW','DKH2yvy','seTZC0W','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','Aw1Hz2u6','Ew55y20','y29UC3rYDwn0BW','r2jYseG','zML4','D1HLuvC','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','AxnuyxnRsw5rDq','ywn0B3iPoIOQia','tMHus1a','cI0GkIRMLl7LPkFLGi3NJOCG','v0HZAhq','C1zSveK','qK9yzge','5Q2J5zYO6ycA6l+hC2r3zwj1','uwjOswO','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','q0jOAxC','y2fSztOQkIa','mNW1Fdr8m3WWFa','kerLBM9PC2LUzW','ALrfB00','ktOQkIa','C2tOR7FMSylNLj/LM77PLjNOR686ia','C3ncy28','B3nPDgLVBG','y2vZioIeUoMdQos/RUwKJsdKUlO','thzvD2O','5lU75yQH5BEY5y+w5RAi','E+s/RUwBVN0','v3LtuNy','6i635y+w5QIH5z6l5AsX6lsLoIa','CNLdqMS','Bg9Hza','rKjvrhq','BwvZC2fNzq','sMTQrMq','AKPvyxC','sKHkwgm','v2LhqwG','yxv0B191CMW','C2vLza','q2HHCMfJDgvYia','rxjYB3iGz2vUzq','Aw5JBhvKzxm','Dgv4Da','BgvZktOG','B2npv2i','B1Lvtva','Dhj1zq','mJiYmG','svf3Auy','kIOG','ufvWqvK','y2zNx3nJywXL','vvjAvue','77Ym6k+35Qoa5P+LC2r3zwj1','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','ktOG','zxvxqKi','vePdqMu','z1DnCLe','6k6+572U5QIH5z6llI4U5lI6','C0XRywW','5yIh5O2I5QIH5z6l5AsX6lsLoIa','l3bUzZTIyxnLnG','CgvHzK8','Aw1Hz2vZ','B2rOD1e','ic0Gq2HHBMDLoG','q0Xjuf9ZDg9WxW','DKHftKG','A05Iquu','ChjVBxb0','cI0GkIRPH4FMOlFMLRNMS5uG','m2jRuxzeta','Bhj4Eei','yuDRsum','y21VzgvSmJiYmG','mJG5nZC4BxnkDNzq','AfH1ANK','BLvtEuq','C3vIC3rYAw5N','q1zwtwG','sKjpBM4','yw1L','Bg9N','ywrKvgfZAW','DLj4qxO','CMf0Aw5Nifneia','vM1KrhO','B1DuDKq','C2rFy2rLBM9PCW','5zU+5y+c5PwW5OQL5zgkcI0GkIO','mtq4ntC0mg9MsMXHzq','BgvY','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','C2rFy3DPzhrO','vunqx3nK','Dg9Rzw4','5Q2J6z2I5O+q56s6icHqCM9T','cI0GkIRPQ5JMUixKV67LPi0G','y3z0D20','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','C2rFy2fKzxrHAq','Cw5kBhC','DwXlq1q','y2fJAgu','D0LiCMK','C2rFyxv0Aa','EgLHBMnOzw5N','ifn0CMvUz3rOkq','v1bMz1y','zff3u20','EvvWreS','svjou1e','z2u6','v0nwv1m','ywrLDgfPBgvYxW','l2fWAs9Zzc9Nzq','CMvZDg9YzuzHyW','55sO5lQo55sF5OIq55QevgfNoIa','BK5IAve','BMvYyxrPB24','kerPDMLKzv9YBW','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','ExvZAgu','BI9QC29U','D3bZy2q','DtHFC2rFyxv0Aa','zgvUB2LZAw5NxW','44cc6k+35Qoa5P+LC2r3zwj1','mZa1nZzYqvfXB0i','zfjLwwe','5BEY5yID5AEl5yYw44cc','zxr0Aw5NCW','ifbYB21WDa','loAOOEwEI+s4UG','6k+V44cc54Q25Ocb56cboIa','yxrFBgfZDf9Syq','ruPpv28','yxbWBhK','oIOQia','zKX4Awm','C2rFy2nOyxr1xW','Dg9tDhjPBMC','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','sfDft24','C2rFy2HLAwDODa','mZyYmZu0ngLPzurkva','Aw5Nx3n0CMvUzW','BwXMz1K','yw9cvg8','mZaWmZKZvwzuEuDf','cI0GkIROHlJPG6JKV67LPi0G','kcGOlISPkYKRkq','cI0GkIPdBgLWia','Aw5PDgLHBgL6zq','AwnrBfe','of9Zy2HLzhvSzq','cI0GkIROTj/PNAlMJ5dNPlOG','tufhrv9srvfvrq','ChqPoIOQia','D1nzCLC','zxjYB3i','ALzLyNy','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','mZqYoti3mMjOsMngwq','tvLWqKW','zw1PDa','y2XPzw50','icHjrdOG','C2vHCMnO','vNbJBKW','keHPCMvZiezPEa','5BEY5ywZ6zET44cc','C3vJy2vZCW','u0rmAxn0zw5LCG','v1Prtey','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','ywX3yxLZB25FCW','cI0TlqOJiYmG55sF','zty0ioAvSoAnRUwKHoEqHUoaGG','yxDfEKe','B29tCxC','BMn4AgC','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','ue9tva','cI0GkIRMRAxMLBaGkfm','wxvqEge','DwfqBM4','DhH0mMLTzW','yK5Yugy','B3zLCNjPzgvFCW','lcdOR6BMG4u6ia','DgfJz2C','tLnf','5Q2J5zYO6k6+572U5QIH5z6l5lI6','C3rHDhvZvgv4Da','AwT3u3u','vhrJuva','cI0GkIRNP43LRzaGkfm','EMT4sNK','wNPJA3q','DhjPBq','r3Lstve','nta4nJeZme5nr1jttW','5yYw5lI6igrHDgeGvvi','DwHnDhu','ke5Lz2f0AxzLia','l2fWAs9Zzc9Zzq','og4UChq','qxDxEMy','mJe1EfrAALz6','vgzOsKW','zMfJzsdKUlRLVidLKk8','44cc5zon5BQu5yAf5A65oIa','zMfJzv95B2XVDG','tKvJuMS','uLLiqw4','D0fPzLe','uhnzseS','C3rLChm','yxv0Aa','s2DOD3e','r0vorvjbvevFsq','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','mtfMvwXnyM0','zw5LCG','ChvcA04','5BI4icHjrdOG','q1vpv2e','cI0GkIPdrKCGuW','zw5HyMXLx2HY','sLnptIdOP6pMNPdLPlhOTkxVViW','Dc1TB2rLBa','BeLwyK8','DfvUy2q','lI4U','svjVvLC','zxH0zw5ZAw9UxW','ExvZAgvPzf9Zza','BgvUz3rO','DwHvy20','v1zhthu','EuTWDfa','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','B2nPBgK','B01fu2m','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','y2HHBMDL','zwvKktOQkIa','sMLSwxO','kfvWC2nHBguGrG','C3rHDhvZ','zv9Mywn0B3i','C3rFy2HHDhu4xW','uMvQDvy'];_0x1510=function(){return _0x23e6e8;};return _0x1510();}const _0x4c8790=(function(){let _0x375782=!![];return function(_0x51368f,_0x55ece3){const _0x1cd08e=_0x375782?function(){if(_0x55ece3){const _0x2a804f=_0x55ece3['apply'](_0x51368f,arguments);return _0x55ece3=null,_0x2a804f;}}:function(){};return _0x375782=![],_0x1cd08e;};}()),_0x254849=_0x4c8790(this,function(){function _0x42fbc7(_0x390d62,_0x4b40c1,_0x491f4b,_0x43d046){return _0x3fcb(_0x43d046- -0x8a,_0x390d62);}function _0x2499c6(_0x426ffe,_0x101d1c,_0x14ac09,_0x316296){return _0x3fcb(_0x426ffe-0x37f,_0x316296);}return _0x254849[_0x42fbc7(0x295,0x1ee,0x236,0x242)]()[_0x2499c6(0x666,0x5d0,0x69d,0x665)](_0x2499c6(0x655,0x620,0x668,0x641)+'+$')['toString']()[_0x2499c6(0x5bc,0x599,0x602,0x643)+'r'](_0x254849)[_0x2499c6(0x666,0x689,0x629,0x69f)](_0x42fbc7(0x286,0x26e,0x20b,0x24c)+'+$');});_0x254849();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;function _0x3fcb(_0x39a82a,_0x5adc33){_0x39a82a=_0x39a82a-(0x1172+0x1ece+-0xb7*0x41);const _0x51da9c=_0x1510();let _0x5ca816=_0x51da9c[_0x39a82a];if(_0x3fcb['thiEFH']===undefined){var _0x2916b7=function(_0x3595b8){const _0x423ff1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xd25f59='',_0x4aae6f='',_0x46d2ba=_0xd25f59+_0x2916b7;for(let _0x1dffb3=-0x6*-0x233+0x1d27+-0x2a59,_0x3787cf,_0x3460e4,_0x1051bc=-0x5*-0xe5+0x154c+-0x19c5;_0x3460e4=_0x3595b8['charAt'](_0x1051bc++);~_0x3460e4&&(_0x3787cf=_0x1dffb3%(-0x217e+-0xbe0+0x2d62)?_0x3787cf*(-0xb*0x2c9+0x1541+-0x112*-0x9)+_0x3460e4:_0x3460e4,_0x1dffb3++%(-0x1*-0x851+-0xe9d+-0x65*-0x10))?_0xd25f59+=_0x46d2ba['charCodeAt'](_0x1051bc+(0x1*-0x12d+0x21*0xb+-0x34))-(-0x17*0x7+-0x13fc+0x1*0x14a7)!==-0x12*0x83+-0x82*-0x30+-0x287*0x6?String['fromCharCode'](-0x20*0xd1+-0x7c1+0x2e8*0xc&_0x3787cf>>(-(0x3a*0x43+0x18b2+-0x27de)*_0x1dffb3&-0x1*0x1fd0+0x17b1*-0x1+-0xb1b*-0x5)):_0x1dffb3:0x21d9+0x3*-0x99d+-0x281*0x2){_0x3460e4=_0x423ff1['indexOf'](_0x3460e4);}for(let _0x25df47=-0x662*0x5+-0x1df2+0x3ddc,_0x2bb794=_0xd25f59['length'];_0x25df47<_0x2bb794;_0x25df47++){_0x4aae6f+='%'+('00'+_0xd25f59['charCodeAt'](_0x25df47)['toString'](0x4*-0x359+-0xc9d*0x1+0x1a11))['slice'](-(-0x194f+0x1a0b+-0xba));}return decodeURIComponent(_0x4aae6f);};_0x3fcb['UtSZFs']=_0x2916b7,_0x3fcb['WpygJS']={},_0x3fcb['thiEFH']=!![];}const _0x46f57c=_0x51da9c[-0x621*0x3+-0x1b70+0x2dd3],_0x1c1bc4=_0x39a82a+_0x46f57c,_0x4c2c12=_0x3fcb['WpygJS'][_0x1c1bc4];if(!_0x4c2c12){const _0x4bc5f5=function(_0x376a09){this['uazpnB']=_0x376a09,this['XFFIAw']=[0x1*0x2468+0x15de+-0x1*0x3a45,-0x792+-0x3c1+0xb53,0x1b8a+-0x16*-0x178+0x1ded*-0x2],this['KPnepo']=function(){return'newState';},this['TBgwCN']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['iuzeLF']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4bc5f5['prototype']['tIdFNs']=function(){const _0x2b5067=new RegExp(this['TBgwCN']+this['iuzeLF']),_0x2a37f1=_0x2b5067['test'](this['KPnepo']['toString']())?--this['XFFIAw'][-0x1*-0xa96+0x1cc7*0x1+-0x275c]:--this['XFFIAw'][0x1d*-0xca+-0xcf7+-0x3*-0xbf3];return this['wgPcCH'](_0x2a37f1);},_0x4bc5f5['prototype']['wgPcCH']=function(_0x2c3505){if(!Boolean(~_0x2c3505))return _0x2c3505;return this['sxpFXf'](this['uazpnB']);},_0x4bc5f5['prototype']['sxpFXf']=function(_0x878125){for(let _0x2f4656=0x1*0xd8c+0x58*0x4c+-0x1*0x27ac,_0x3dfe9e=this['XFFIAw']['length'];_0x2f4656<_0x3dfe9e;_0x2f4656++){this['XFFIAw']['push'](Math['round'](Math['random']())),_0x3dfe9e=this['XFFIAw']['length'];}return _0x878125(this['XFFIAw'][0x3*-0x7bf+0x198a+-0x24d]);},new _0x4bc5f5(_0x3fcb)['tIdFNs'](),_0x5ca816=_0x3fcb['UtSZFs'](_0x5ca816),_0x3fcb['WpygJS'][_0x1c1bc4]=_0x5ca816;}else _0x5ca816=_0x4c2c12;return _0x5ca816;}async function generateSDImage({prompt:_0x329cf9,width:_0x266709,height:_0xf8c1f5,change:_0x5dbfde}){const _0x278393={'ynycm':_0x141f3b(0x4e1,0x50c,0x4b0,0x529)+'+$','PUpAY':function(_0x6dc09c,_0x4ab2d5){return _0x6dc09c+_0x4ab2d5;},'zkxJy':function(_0x12fdbe,_0x2d2558){return _0x12fdbe+_0x2d2558;},'yUpDK':function(_0x337542,_0x5039d8){return _0x337542(_0x5039d8);},'dReYa':_0x29eacc(0x224,0x1bd,0x25b,0x222)+'尝试作为原始\x20Bas'+_0x29eacc(0x2bb,0x2ce,0x32d,0x368),'EJOWo':_0x29eacc(0x28b,0x28e,0x24d,0x29a)+_0x29eacc(0x161,0x1aa,0x121,0x248),'euWBB':function(_0x1c0abe,_0x19f27a,_0x2d3786){return _0x1c0abe(_0x19f27a,_0x2d3786);},'mSbqh':_0x141f3b(0x3c2,0x398,0x3a4,0x422)+_0x29eacc(0x19e,0x1a6,0x1c9,0x1c4),'yMOQd':function(_0x6afe09){return _0x6afe09();},'JdvZb':function(_0x5bdcea,_0x4b65a6){return _0x5bdcea+_0x4b65a6;},'gtskR':_0x141f3b(0x494,0x413,0x409,0x457)+'3','jCWXS':_0x141f3b(0x445,0x50b,0x4a1,0x4b9)+_0x141f3b(0x488,0x3e3,0x44f,0x484)+_0x29eacc(0x2e1,0x28c,0x236,0x237),'huryx':function(_0xd8f6c6,_0x327d16){return _0xd8f6c6(_0x327d16);},'uaPnn':function(_0x2eadc2,_0x38b7ed){return _0x2eadc2===_0x38b7ed;},'ssBco':function(_0x13ad04,_0x321d3a){return _0x13ad04+_0x321d3a;},'YOVpn':function(_0x359163,_0x176e0a){return _0x359163||_0x176e0a;},'VmdDz':function(_0x34aec3,_0x1ace3c){return _0x34aec3>_0x1ace3c;},'wSYrW':function(_0x31a53c,_0x3d838e){return _0x31a53c(_0x3d838e);},'JkjFd':function(_0x13904e,_0x13e789){return _0x13904e(_0x13e789);},'URZUA':function(_0x1a3d93,_0x5b7f37){return _0x1a3d93(_0x5b7f37);},'FBUDt':function(_0x257344,_0x1b670d){return _0x257344!==_0x1b670d;},'CawIv':'Scene\x20Comp'+_0x141f3b(0x4eb,0x456,0x51b,0x4a7),'GyRMQ':function(_0x550c88,_0x7f4297){return _0x550c88(_0x7f4297);},'tacgg':_0x141f3b(0x4ec,0x4c2,0x46c,0x461),'NCsbj':function(_0x6eea23,_0x390677){return _0x6eea23+_0x390677;},'BOXda':_0x29eacc(0x1cc,0x228,0x293,0x278)+'中的\x20prompt。','WZQLF':function(_0x1cb6de,_0x2eaef6,_0x224ad7,_0x32c686,_0x16db47,_0x1c766b){return _0x1cb6de(_0x2eaef6,_0x224ad7,_0x32c686,_0x16db47,_0x1c766b);},'bNrPf':function(_0x56d651,_0x2567d6,_0x2b9de0){return _0x56d651(_0x2567d6,_0x2b9de0);},'ryCBk':function(_0xf75d75,_0x28ac76){return _0xf75d75(_0x28ac76);},'CUOWa':function(_0x427d22){return _0x427d22();},'jJUaw':'jiuguan','jVebv':function(_0x4b7a19,_0x5e81db){return _0x4b7a19!==_0x5e81db;},'jAtHd':'TfhJL','oMESc':function(_0xd3e5ec,_0x5f11ad,_0x57e993){return _0xd3e5ec(_0x5f11ad,_0x57e993);},'GDrhA':_0x29eacc(0x29d,0x28f,0x2af,0x329)+_0x141f3b(0x432,0x3ac,0x3b2,0x434),'oYUMP':_0x141f3b(0x5bf,0x565,0x599,0x549),'yKptP':_0x29eacc(0x25d,0x266,0x26c,0x1e2)+_0x29eacc(0x2c4,0x24a,0x1d5,0x260),'llPdy':function(_0x239959,_0x164eff){return _0x239959!=_0x164eff;},'IRoVW':function(_0x356441,_0x1a8810){return _0x356441===_0x1a8810;},'PsYHK':_0x141f3b(0x483,0x582,0x506,0x4fe),'AwWzf':function(_0x32151f,_0x31359c){return _0x32151f(_0x31359c);},'QbhIj':_0x29eacc(0x335,0x2ea,0x254,0x321)+_0x141f3b(0x455,0x4ae,0x415,0x434),'NdnPo':function(_0x5a3481,_0x231430){return _0x5a3481===_0x231430;},'yhfqZ':_0x29eacc(0x1f8,0x1d6,0x264,0x226),'cvtwm':function(_0x5755f9,_0x47e4e){return _0x5755f9===_0x47e4e;},'WiGAh':_0x29eacc(0x1e4,0x221,0x1a2,0x2a3),'WySRv':function(_0x4301a3,_0x2b2e6c){return _0x4301a3!==_0x2b2e6c;},'icQlQ':function(_0x3d7957,_0x3ae07a){return _0x3d7957(_0x3ae07a);},'tyupn':function(_0x332a52,_0x329005){return _0x332a52>=_0x329005;},'Kghwq':function(_0x204598,_0xee129e){return _0x204598==_0xee129e;},'aGkIC':_0x141f3b(0x557,0x4f6,0x4cb,0x4bf),'VpcnL':function(_0x880fb,_0x50cee2){return _0x880fb(_0x50cee2);},'peafO':function(_0x598373,_0x380491){return _0x598373(_0x380491);},'wXeQW':'ivXON','dQwSm':'随机(-1)','NbhTA':function(_0x489f98,_0x5d7ae5){return _0x489f98==_0x5d7ae5;},'GbrHH':function(_0x2dfb0b,_0x419a82){return _0x2dfb0b(_0x419a82);},'rgljW':_0x141f3b(0x4f1,0x441,0x4b4,0x46a),'SOVAu':_0x141f3b(0x457,0x4cd,0x3c6,0x440),'RYHAn':function(_0x4d0623,_0x5e03de){return _0x4d0623===_0x5e03de;},'YuPxa':_0x29eacc(0x255,0x2df,0x30d,0x2b5),'jTEoM':'wVDgN','lDQNx':function(_0x424594,_0x48b017){return _0x424594!==_0x48b017;},'uhUcm':_0x141f3b(0x4f1,0x50d,0x480,0x4a9),'qnJlw':_0x141f3b(0x471,0x53e,0x554,0x501),'fLxic':'running','RejuV':function(_0x405bd0,_0x1cfbb4){return _0x405bd0===_0x1cfbb4;},'iALjk':function(_0x44c969,_0x274d84){return _0x44c969!==_0x274d84;},'JHJXc':_0x141f3b(0x4c9,0x56b,0x48c,0x4ca),'oWTvD':function(_0x3b8c24,_0x36c004){return _0x3b8c24(_0x36c004);},'ayJhf':'sd_stop_ge'+_0x29eacc(0x235,0x293,0x2a9,0x2f5),'aoBTo':_0x29eacc(0x195,0x234,0x292,0x22f),'Zzckt':_0x29eacc(0x1c4,0x201,0x171,0x23b)+_0x29eacc(0x2be,0x299,0x2b6,0x278)+_0x29eacc(0x281,0x239,0x197,0x1c4),'uxmgs':_0x29eacc(0x238,0x28f,0x252,0x298)+_0x141f3b(0x49a,0x46a,0x42b,0x45e),'tUncd':_0x29eacc(0x1da,0x224,0x220,0x2a8),'sLkal':_0x141f3b(0x3d0,0x3f1,0x4a6,0x46c),'nNbiQ':function(_0x37d7e3,_0x4037c7){return _0x37d7e3!==_0x4037c7;},'hXujy':_0x29eacc(0x262,0x2ab,0x2eb,0x30b),'EKnfL':function(_0x138969,_0x319c3b){return _0x138969+_0x319c3b;},'kNbAE':_0x29eacc(0x242,0x1fe,0x1bf,0x260)+_0x29eacc(0x230,0x259,0x1fc,0x2cb)+'4,','uhMtu':_0x141f3b(0x4c9,0x4a1,0x528,0x4ee)+_0x141f3b(0x4ec,0x59f,0x5cf,0x55d)+'L。','ulKCT':function(_0x18dc3c,_0x297b28){return _0x18dc3c||_0x297b28;},'JVoQv':function(_0x2e6a67,_0x2a5439){return _0x2e6a67===_0x2a5439;},'lIVbO':_0x29eacc(0x24f,0x264,0x1cd,0x281),'ocOWb':_0x29eacc(0x2a8,0x2be,0x27b,0x2c7),'JBOnn':function(_0x1e5247,_0x3fccb0){return _0x1e5247+_0x3fccb0;},'WVGLu':'/sdapi/v1/'+_0x141f3b(0x59d,0x589,0x50b,0x54d),'wIHri':'applicatio'+_0x29eacc(0x1f9,0x297,0x339,0x1fd),'MYpBL':function(_0x252222,_0xc255e){return _0x252222===_0xc255e;},'gWMrQ':_0x29eacc(0x316,0x2d0,0x244,0x278),'nUSyD':_0x141f3b(0x526,0x596,0x5be,0x541)+'像数据。','awEzA':function(_0x2941a8,_0x2f0cad){return _0x2941a8||_0x2f0cad;},'vHvaV':_0x29eacc(0x146,0x1cf,0x21d,0x158),'tnMgX':_0x141f3b(0x496,0x48a,0x4d6,0x4a1)+'1','wAifQ':function(_0x4c00c5,_0x41fb80){return _0x4c00c5(_0x41fb80);},'IrutS':function(_0xeb2390,_0x1ca6f9){return _0xeb2390===_0x1ca6f9;}};_0x278393[_0x29eacc(0x194,0x1ec,0x280,0x1d9)](clearLog);const _0x393859=taskQueue[_0x141f3b(0x4b5,0x536,0x523,0x4e5)]({'name':_0x278393[_0x141f3b(0x4f8,0x45c,0x4d1,0x4a6)](_0x278393[_0x141f3b(0x473,0x50a,0x4e8,0x47e)](_0x329cf9,'')[_0x29eacc(0x1f1,0x26a,0x2c4,0x2c5)](0xcd7+-0xa8f+0x124*-0x2,0x6fe*0x2+-0x1789+0x9ab),_0x329cf9&&_0x278393[_0x141f3b(0x555,0x4f1,0x548,0x4e8)](_0x329cf9[_0x141f3b(0x3bc,0x3fb,0x4c4,0x43b)],0x209*-0xa+-0x1*0x2453+-0x38cb*-0x1)?_0x29eacc(0x203,0x1c1,0x217,0x240):''),'type':TaskType['SD'],'prompt':_0x329cf9});currentTaskId=_0x393859;let _0xf86ae5=_0x5dbfde;_0x329cf9=_0x278393['wSYrW'](processCharacterPrompt,_0x329cf9),_0x5dbfde=processCharacterPrompt(_0x5dbfde),_0x329cf9=await _0x278393[_0x141f3b(0x4a4,0x4a1,0x3e8,0x47c)](stripChineseAnnotations,_0x329cf9),_0x5dbfde=await _0x278393[_0x141f3b(0x536,0x48a,0x41d,0x4b2)](stripChineseAnnotations,_0x5dbfde);const _0x456896=extension_settings[extensionName]['sdUrl'][_0x29eacc(0x2c5,0x2e4,0x26f,0x292)](),_0x3e6aca=extension_settings[extensionName];_0x278393[_0x141f3b(0x4ef,0x451,0x540,0x4c5)](addLog,_0x29eacc(0x28f,0x226,0x2b1,0x2ae)+'i生成图片...客户'+'端为'+_0x3e6aca[_0x141f3b(0x4f0,0x4aa,0x4f1,0x538)]+_0x29eacc(0x280,0x2a1,0x2ca,0x313)+_0x3e6aca['sd_cchatu_'+'8_model']);const _0x59dbbe=_0x5dbfde&&_0x278393[_0x141f3b(0x4fc,0x4d3,0x4d2,0x4b0)](_0x5dbfde[_0x29eacc(0x28b,0x2e4,0x333,0x2a9)](),'')?_0x5dbfde:_0x329cf9;_0x278393['huryx'](addLog,_0x141f3b(0x473,0x538,0x54d,0x507)+_0x59dbbe);let _0x385d3a=![];_0x59dbbe['includes'](_0x278393[_0x29eacc(0x1a6,0x1de,0x20b,0x1b2)])&&(_0x385d3a=!![]);_0x278393[_0x29eacc(0x2aa,0x28a,0x2e6,0x2b4)](addLog,_0x29eacc(0x250,0x295,0x32c,0x320)+_0x141f3b(0x516,0x4dc,0x576,0x50a)+_0x29eacc(0x20c,0x246,0x1fa,0x1e6)+_0x385d3a);let _0x822c14={};function _0x141f3b(_0x21d693,_0x50a6e0,_0x9ed046,_0x5193f4){return _0x3fcb(_0x5193f4-0x253,_0x50a6e0);}let _0x52d06b='',_0x467005='';if(_0x385d3a){_0x278393[_0x141f3b(0x4fb,0x4d0,0x5d1,0x55b)](addLog,_0x29eacc(0x246,0x27f,0x2d7,0x29d)+_0x141f3b(0x4b6,0x3e5,0x47d,0x43f)),_0x822c14=_0x278393[_0x141f3b(0x4e5,0x50c,0x3e0,0x47c)](parsePromptStringWithCoordinates,_0x59dbbe),_0x52d06b=_0x822c14[_0x278393['CawIv']];for(let _0x40697d=-0x1d16+0xd8e+0xf89;_0x40697d<=-0x1*-0x18a9+0x5*0x36f+-0x29d0;_0x40697d++){if(_0x822c14[_0x141f3b(0x4b6,0x55b,0x488,0x4b8)+_0x40697d+_0x29eacc(0x308,0x2a0,0x22b,0x234)]){if(_0x278393[_0x141f3b(0x5a3,0x517,0x4ce,0x551)]!=='wBMpN')_0x467005=_0x278393[_0x29eacc(0x2d8,0x2e2,0x2f5,0x2ba)](_0x278393[_0x29eacc(0x1c3,0x212,0x278,0x242)](_0x467005,',\x20'),_0x822c14['Character\x20'+_0x40697d+_0x141f3b(0x486,0x5a7,0x497,0x516)]);else return _0x3add0b[_0x29eacc(0x329,0x2a9,0x2f4,0x228)]()[_0x29eacc(0x24a,0x2c4,0x30c,0x274)](czgrjh[_0x141f3b(0x476,0x412,0x468,0x48f)])['toString']()[_0x141f3b(0x50b,0x409,0x43e,0x490)+'r'](_0x1335ff)[_0x141f3b(0x51f,0x4f3,0x559,0x53a)](czgrjh[_0x141f3b(0x472,0x4c9,0x433,0x48f)]);}}}else addLog(_0x278393[_0x29eacc(0x200,0x225,0x1a0,0x1c9)]),_0x52d06b=_0x59dbbe;let {modifiedPrompt:_0x4d4449,insertions:_0x53eee7}=await _0x278393[_0x141f3b(0x4ca,0x503,0x4de,0x4c9)](prompt_replace,_0x52d06b,_0x467005);if(_0x385d3a)for(let _0x3feb2f=0x1dfe+-0x143*0x3+-0x1a34;_0x3feb2f<=0x151f+-0x2*0x168+-0x124b;_0x3feb2f++){_0x822c14[_0x29eacc(0x1b8,0x242,0x1a4,0x2c2)+_0x3feb2f+_0x141f3b(0x4b0,0x4fb,0x4d8,0x516)]&&(_0x4d4449=_0x278393['ssBco'](_0x4d4449+',\x20',_0x278393[_0x141f3b(0x544,0x504,0x459,0x4b2)](prompt_replace_for_character,_0x822c14[_0x141f3b(0x4ba,0x4a5,0x4a9,0x4b8)+_0x3feb2f+_0x141f3b(0x4cd,0x571,0x4d4,0x516)])));}let _0x3cba20=await _0x278393[_0x29eacc(0x239,0x2ca,0x23c,0x2f1)](zhengmian,extension_settings[extensionName][_0x141f3b(0x524,0x4de,0x51a,0x50c)][extension_settings[extensionName][_0x141f3b(0x4af,0x499,0x4c8,0x43a)]][_0x29eacc(0x168,0x1fc,0x195,0x15a)+'t'],_0x4d4449,extension_settings[extensionName][_0x29eacc(0x2fa,0x296,0x2ba,0x27d)][extension_settings[extensionName][_0x29eacc(0x253,0x1c4,0x152,0x218)]][_0x141f3b(0x40e,0x44a,0x48b,0x472)+'t_end'],extension_settings[extensionName][_0x141f3b(0x50f,0x4ae,0x42b,0x482)],_0x53eee7),_0x226b35=await _0x278393[_0x141f3b(0x505,0x599,0x4ca,0x54e)](fumian,extension_settings[extensionName][_0x29eacc(0x209,0x296,0x2ae,0x2be)][extension_settings[extensionName]['yusheid_sd']]['negativePr'+'ompt'],extension_settings[extensionName][_0x141f3b(0x500,0x52f,0x495,0x4f0)]);_0x278393[_0x29eacc(0x252,0x238,0x195,0x1dd)](addLog,'负面为:\x20'+_0x226b35),extension_settings['sd'][_0x29eacc(0x1d1,0x240,0x2e0,0x2be)]=_0x456896,await _0x278393['CUOWa'](saveSettingsDebounced);try{if(_0x278393[_0x29eacc(0x2c3,0x2d6,0x2bd,0x376)](_0x3e6aca['client'],_0x278393[_0x29eacc(0x2b8,0x23d,0x20d,0x2a7)])){if(_0x278393[_0x141f3b(0x5be,0x4a1,0x550,0x533)](_0x29eacc(0x23e,0x1a9,0x1a0,0x1e9),_0x278393['jAtHd']))_0x5c2019=_0x278393[_0x141f3b(0x4f1,0x491,0x48b,0x4c3)](_0x4a60a9+',\x20',_0x32b00c[_0x141f3b(0x538,0x482,0x452,0x4b8)+_0x30038e+_0x29eacc(0x295,0x2a0,0x224,0x31c)]);else{const _0x246aff={};_0x246aff[_0x141f3b(0x3bf,0x43d,0x390,0x428)]=_0x3e6aca[_0x29eacc(0x171,0x1d3,0x206,0x1b6)+'sd_auth']?_0x3e6aca[_0x141f3b(0x3b5,0x40a,0x3ac,0x449)+_0x141f3b(0x4c5,0x589,0x51a,0x4fb)]:'',_0x246aff['url']=_0x456896;const _0x52334f=await _0x278393[_0x29eacc(0x241,0x1cb,0x26b,0x230)](fetch,_0x278393['GDrhA'],{'method':_0x278393[_0x141f3b(0x4e8,0x55c,0x547,0x4be)],'body':JSON[_0x29eacc(0x190,0x1e2,0x265,0x1ab)](_0x246aff),'headers':_0x278393['wSYrW'](getRequestHeaders,window['token'])});if(!_0x52334f['ok']){_0x278393[_0x141f3b(0x54d,0x4f0,0x56d,0x531)](addLog,_0x29eacc(0x281,0x237,0x239,0x23a)+_0x52334f['status']+'\x20'+_0x52334f[_0x141f3b(0x5ed,0x5eb,0x54c,0x554)]);throw new Error(_0x29eacc(0x1eb,0x237,0x2a6,0x26e)+_0x52334f[_0x29eacc(0x260,0x1d1,0x18d,0x1ff)]+'\x20'+_0x52334f['statusText']);}let _0x137cd5=await _0x52334f[_0x29eacc(0x1c6,0x245,0x2dc,0x234)]();console['log'](_0x278393[_0x29eacc(0x238,0x1c8,0x14b,0x1aa)],_0x137cd5),console[_0x141f3b(0x45f,0x523,0x4cf,0x4e4)](_0x141f3b(0x4a9,0x456,0x43e,0x439)+'settingss.'+_0x141f3b(0x50a,0x53a,0x4b9,0x51e)+_0x141f3b(0x422,0x43e,0x516,0x489),_0x3e6aca[_0x141f3b(0x4be,0x5b2,0x4ac,0x51e)+'8_model']);if(_0x278393[_0x141f3b(0x3e3,0x505,0x4e0,0x475)](_0x137cd5,_0x3e6aca[_0x141f3b(0x4ca,0x59e,0x492,0x51e)+'8_model'])){if(_0x278393[_0x29eacc(0x23a,0x1c2,0x1ae,0x1d8)](_0x29eacc(0x380,0x2e0,0x299,0x2bd),_0x278393[_0x141f3b(0x42d,0x3dc,0x49c,0x426)])){if(_0x316be3){const _0x58f5a9=_0x49b9c1[_0x29eacc(0x2b4,0x2a5,0x30d,0x2a9)](_0x4937b6,arguments);return _0x2eec0b=null,_0x58f5a9;}}else{_0x278393['AwWzf'](addLog,_0x29eacc(0x2f8,0x2dd,0x379,0x264)+_0x3e6aca[_0x141f3b(0x506,0x574,0x4a0,0x51e)+'8_model']+_0x141f3b(0x39d,0x47e,0x3ac,0x437)),toastr['info'](_0x29eacc(0x298,0x2aa,0x33d,0x2d1)+_0x3e6aca['sd_cchatu_'+_0x141f3b(0x4cc,0x52a,0x47b,0x489)]);const _0x4fa580={};_0x4fa580[_0x141f3b(0x4b4,0x3a8,0x3b8,0x428)]=_0x3e6aca[_0x29eacc(0x1c7,0x1d3,0x135,0x230)+_0x29eacc(0x269,0x285,0x2a2,0x2cc)]?_0x3e6aca['st_chatu8_'+_0x29eacc(0x1ea,0x285,0x2af,0x30f)]:'',_0x4fa580[_0x141f3b(0x45d,0x3c8,0x464,0x460)]=_0x456896,_0x4fa580[_0x141f3b(0x49f,0x4ed,0x42c,0x44f)]=_0x3e6aca['sd_cchatu_'+_0x29eacc(0x1ba,0x213,0x1f5,0x271)];const _0x17cb1b=await _0x278393[_0x141f3b(0x513,0x5a4,0x4e9,0x54e)](fetch,_0x278393[_0x29eacc(0x297,0x227,0x1c2,0x2be)],{'method':_0x29eacc(0x255,0x2d3,0x2e0,0x2a8),'body':JSON[_0x141f3b(0x3ed,0x45b,0x3ea,0x458)](_0x4fa580),'headers':getRequestHeaders(window[_0x29eacc(0x2fc,0x27b,0x2dd,0x306)])});if(!_0x17cb1b['ok']){addLog('切换模型失败:\x20'+_0x17cb1b[_0x141f3b(0x3a8,0x41a,0x434,0x447)]+'\x20'+_0x17cb1b[_0x141f3b(0x5e5,0x53a,0x4d6,0x554)]);throw new Error(_0x141f3b(0x4c3,0x4b0,0x4e0,0x4ce)+_0x17cb1b[_0x29eacc(0x1c7,0x1d1,0x1c3,0x1bb)]+'\x20'+_0x17cb1b[_0x29eacc(0x2b9,0x2de,0x26c,0x2b4)]);}toastr['info'](_0x141f3b(0x488,0x4fc,0x462,0x4cc)+_0x3e6aca[_0x29eacc(0x27a,0x2a8,0x30b,0x345)+_0x29eacc(0x191,0x213,0x184,0x2a8)]+'成功');}}}}else{if(_0x278393['NdnPo'](_0x278393['yhfqZ'],_0x278393[_0x29eacc(0x261,0x1e4,0x25f,0x19f)])){let _0x577543=await _0x278393[_0x29eacc(0x34c,0x2bb,0x32b,0x2e8)](getSDMode,_0x456896);_0x278393[_0x29eacc(0x27c,0x1ff,0x1d2,0x1a1)](_0x577543,_0x3e6aca[_0x29eacc(0x2c3,0x2a8,0x2f0,0x29b)+_0x141f3b(0x3ea,0x4de,0x4aa,0x489)])&&(_0x278393[_0x29eacc(0x284,0x24f,0x233,0x2c5)](addLog,_0x29eacc(0x215,0x1e0,0x1ff,0x210)+_0x3e6aca['sd_cchatu_'+_0x29eacc(0x193,0x213,0x213,0x175)]+_0x141f3b(0x3a6,0x43a,0x4c9,0x437)),await _0x278393[_0x141f3b(0x5ae,0x51b,0x543,0x54e)](setSDMode,_0x456896,_0x3e6aca[_0x141f3b(0x56b,0x5a4,0x555,0x51e)+_0x29eacc(0x193,0x213,0x257,0x25d)]));}else{const _0x100681='SD生图流程捕获到异'+_0x29eacc(0x126,0x1b9,0x198,0x25b)+_0x5b6a21+_0x29eacc(0x1b3,0x252,0x2e3,0x23f)+_0x1fed62[_0x29eacc(0x2d9,0x23b,0x19d,0x271)];_0x5501ed('错误:\x20'+_0x100681),_0x2c9dea[_0x29eacc(0x35b,0x2bc,0x23f,0x2c4)]('Error\x20gene'+_0x141f3b(0x471,0x4d9,0x4e5,0x4e7)+_0x141f3b(0x520,0x422,0x4d8,0x48e),_0x1da33c);const _0x1b31d2={};_0x1b31d2['id']=_0x1ee3fa,_0x1b31d2[_0x29eacc(0x2ab,0x2c8,0x333,0x30e)]=![],_0x1b31d2['error']=_0x9587ee['message'],_0x1b31d2[_0x29eacc(0x2e9,0x261,0x283,0x1c2)]=_0x5292e2,_0x512582['emit'](_0x155850[_0x29eacc(0x1c3,0x1b4,0x131,0x1fd)+_0x141f3b(0x472,0x455,0x4f5,0x480)+_0x29eacc(0x35e,0x2dc,0x2a7,0x324)],_0x1b31d2),_0x1c1157(_0x141f3b(0x4d7,0x5e0,0x4c1,0x548)+'\x20(ID:\x20'+_0x59882a+')');}}}catch(_0xb50ff0){if(_0x278393[_0x141f3b(0x53b,0x45d,0x57c,0x4f4)](_0x278393[_0x141f3b(0x450,0x4fd,0x4ba,0x4b5)],_0x278393[_0x141f3b(0x54c,0x435,0x4a1,0x4b5)])){addLog('获取或者切换模型失败'+':\x20'+_0xb50ff0[_0x141f3b(0x478,0x4d1,0x4ad,0x4b1)]+(_0x29eacc(0x259,0x29b,0x2b0,0x29d)+'i是否正常启动，并检'+'查模型是否正确。')),taskQueue[_0x141f3b(0x3de,0x40f,0x4ec,0x45d)+'sk'](_0x393859,![]),currentTaskId=null;throw new Error(_0x141f3b(0x40e,0x4e2,0x40f,0x466)+_0x29eacc(0x2da,0x250,0x1b3,0x222)+'i是否正常启动，并检'+'查模型是否正确。');}else _0x4ec5d2[_0x141f3b(0x521,0x459,0x4e7,0x4b8)+_0x6a2d94+_0x29eacc(0x22f,0x2a0,0x31a,0x267)]&&(_0x2b948b=_0x278393[_0x141f3b(0x45c,0x487,0x48b,0x4c3)](_0x278393[_0x29eacc(0x358,0x2e2,0x30f,0x274)](_0x178c76,',\x20'),_0x193f92[_0x141f3b(0x479,0x4e3,0x457,0x4b8)+_0xe33198+_0x141f3b(0x575,0x4c5,0x48f,0x516)]));}let _0x307286=-(-0x16d1+-0x2663+0x3d35);const _0x510908=_0x3e6aca['sd_cseed'];_0x510908!==''&&_0x278393[_0x141f3b(0x4ff,0x526,0x4e8,0x4ac)](_0x510908,null)&&!_0x278393[_0x141f3b(0x3f1,0x460,0x500,0x47c)](isNaN,_0x278393['icQlQ'](Number,_0x510908))&&_0x278393[_0x29eacc(0x188,0x1fb,0x202,0x23a)](Number(_0x510908),-0xb*-0x226+0x5*-0x30b+0x86b*-0x1)&&(_0x307286=Number(_0x510908));let _0x5b922d={'prompt':_0x3cba20,'negative_prompt':_0x226b35,'sampler_name':_0x3e6aca['sd_cchatu_'+'8_samplerN'+_0x141f3b(0x4d4,0x4f0,0x4b4,0x4e3)],'scheduler':_0x3e6aca[_0x29eacc(0x288,0x2a8,0x254,0x2bc)+_0x29eacc(0x329,0x2b7,0x22e,0x287)+'r'],'steps':_0x3e6aca[_0x141f3b(0x4d2,0x4e9,0x46c,0x453)],'cfg_scale':_0x3e6aca[_0x141f3b(0x4a7,0x4d9,0x466,0x465)],'width':_0x266709?_0x266709:_0x3e6aca[_0x141f3b(0x544,0x4e6,0x4d8,0x4ef)],'height':_0xf8c1f5?_0xf8c1f5:_0x3e6aca[_0x141f3b(0x592,0x4af,0x514,0x522)],'restore_faces':_0x278393[_0x141f3b(0x42a,0x410,0x46e,0x429)](_0x3e6aca[_0x29eacc(0x2ef,0x290,0x2cf,0x28c)+'es'],'true'),'enable_hr':_0x278393[_0x141f3b(0x48d,0x3a1,0x3b3,0x429)](_0x3e6aca[_0x29eacc(0x170,0x1db,0x263,0x216)+_0x29eacc(0x1c7,0x21c,0x27c,0x293)],_0x278393['aGkIC']),'hr_upscaler':_0x3e6aca[_0x141f3b(0x4e8,0x54d,0x59e,0x51e)+_0x29eacc(0x29c,0x202,0x1b6,0x29c)],'hr_scale':_0x3e6aca[_0x29eacc(0x1d4,0x1f1,0x260,0x218)+_0x29eacc(0x18f,0x1d2,0x1b0,0x187)],'hr_additional_modules':[],'denoising_strength':_0x3e6aca[_0x29eacc(0x2ff,0x274,0x28e,0x24d)+_0x29eacc(0x2dc,0x2ae,0x29a,0x257)+'th'],'hr_second_pass_steps':_0x3e6aca[_0x141f3b(0x4bf,0x3fb,0x458,0x451)+_0x141f3b(0x4a6,0x471,0x46f,0x427)],'seed':_0x307286,'override_settings':{'CLIP_stop_at_last_layers':_0x278393[_0x141f3b(0x5d9,0x4c1,0x527,0x53b)](Number,_0x3e6aca['sd_cclip_s'+'kip']),'sd_vae':_0x3e6aca['sd_cchatu_'+'8_vae']},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x278393[_0x29eacc(0x2fa,0x25a,0x281,0x257)](addLog,_0x141f3b(0x490,0x4aa,0x4a9,0x485)+_0x29eacc(0x1b6,0x232,0x1a2,0x22a)+_0x5b922d['restore_fa'+_0x141f3b(0x3c1,0x3f1,0x3eb,0x45b)]),_0x278393['yUpDK'](addLog,'enable_hr\x20'+_0x29eacc(0x164,0x200,0x1c3,0x26c)+_0x5b922d[_0x141f3b(0x40e,0x43e,0x4d2,0x432)]);if(_0x278393[_0x29eacc(0x126,0x1b3,0x158,0x1c3)](_0x3e6aca['sd_cadetai'+_0x29eacc(0x2fb,0x277,0x209,0x2d6)],_0x278393[_0x29eacc(0x294,0x265,0x1f1,0x248)])){if(_0x278393['wXeQW']!==_0x278393[_0x141f3b(0x48c,0x48a,0x426,0x493)])_0x3208e5=![];else{_0x278393['JkjFd'](addLog,_0x278393['EJOWo']);const _0x296bcb={};_0x296bcb[_0x141f3b(0x4c0,0x459,0x519,0x487)]=_0x278393[_0x141f3b(0x512,0x3e1,0x4b5,0x47f)];const _0x160689={};_0x160689[_0x29eacc(0x26c,0x1e3,0x1d4,0x22d)]=[!![],!![],_0x296bcb];const _0x24eeb8={};_0x24eeb8['ADetailer']=_0x160689;const _0x4a1b30={};_0x4a1b30[_0x141f3b(0x575,0x4e5,0x58d,0x542)+'cripts']=_0x24eeb8,_0x5b922d=deepMerge(_0x5b922d,_0x4a1b30);}}const _0x29bf54=_0x29eacc(0x365,0x2cd,0x292,0x30a)+_0x29eacc(0x279,0x275,0x303,0x2c4)+_0x29eacc(0x1e8,0x27c,0x2d3,0x259)+_0x141f3b(0x4fd,0x4f9,0x49e,0x530)+_0x3cba20+(_0x141f3b(0x55b,0x4a7,0x48c,0x52e)+_0x141f3b(0x577,0x4ed,0x58e,0x55f)+'Prompt):**'+'\x20')+_0x226b35+(_0x141f3b(0x4e8,0x4f5,0x4c7,0x4d8)+'(Sampler):'+_0x29eacc(0x261,0x24c,0x212,0x27a))+_0x5b922d['sampler_na'+'me']+(_0x29eacc(0x31b,0x2d4,0x2de,0x28f)+_0x141f3b(0x3de,0x458,0x424,0x45c))+_0x5b922d['steps']+(_0x29eacc(0x1f7,0x1bb,0x1fd,0x189)+_0x141f3b(0x508,0x537,0x41c,0x4a0))+_0x5b922d[_0x29eacc(0x2e8,0x24e,0x217,0x1d1)]+('\x0a-\x20**尺寸\x20(S'+'ize):**\x20')+_0x5b922d[_0x29eacc(0x1b3,0x210,0x1f2,0x1e1)]+'x'+_0x5b922d['height']+(_0x29eacc(0x270,0x2e1,0x362,0x261)+_0x29eacc(0x226,0x1ce,0x149,0x1e7))+(_0x5b922d[_0x29eacc(0x26b,0x241,0x286,0x2ce)]===-(0x2*0xeac+-0x4*-0x937+-0x4233)?_0x278393[_0x141f3b(0x53b,0x490,0x505,0x4ff)]:_0x5b922d[_0x141f3b(0x51d,0x4ef,0x4da,0x4b7)])+(_0x29eacc(0x1f0,0x1df,0x1d5,0x143)+'odel):**\x20')+_0x3e6aca[_0x29eacc(0x342,0x2a8,0x220,0x26d)+_0x141f3b(0x4f2,0x4e4,0x4d0,0x489)]+('\x0a-\x20**VAE:*'+'*\x20')+_0x5b922d['override_s'+_0x29eacc(0x312,0x29f,0x2a2,0x244)][_0x141f3b(0x417,0x415,0x49a,0x45f)]+(_0x29eacc(0x32d,0x2b4,0x256,0x251)+'Skip:**\x20')+_0x5b922d[_0x29eacc(0x272,0x2d9,0x35a,0x25d)+_0x29eacc(0x336,0x29f,0x25e,0x291)][_0x141f3b(0x4b1,0x474,0x4f3,0x4d4)+_0x141f3b(0x590,0x572,0x499,0x519)+_0x141f3b(0x457,0x488,0x41a,0x48a)]+(_0x29eacc(0x265,0x27d,0x298,0x22b)+_0x29eacc(0x33b,0x2c6,0x254,0x2fa)+_0x141f3b(0x502,0x518,0x447,0x4a4))+_0x5b922d['enable_hr']+(_0x29eacc(0x2bf,0x222,0x246,0x2a0)+_0x141f3b(0x3b8,0x405,0x43f,0x446)+_0x29eacc(0x24a,0x220,0x1cb,0x18b))+_0x5b922d[_0x29eacc(0x195,0x1d7,0x222,0x1f9)]+(_0x29eacc(0x189,0x203,0x1f8,0x233)+_0x141f3b(0x4b5,0x4ab,0x505,0x4a2)+_0x29eacc(0x260,0x287,0x1fd,0x2e7)+_0x141f3b(0x55a,0x56f,0x568,0x51c))+_0x5b922d[_0x141f3b(0x55e,0x4b7,0x5a6,0x510)+'strength']+(_0x141f3b(0x51b,0x4f6,0x4e3,0x528)+'(Restore\x20F'+_0x29eacc(0x1ca,0x1f7,0x198,0x1c4))+_0x5b922d[_0x141f3b(0x4d0,0x402,0x477,0x485)+_0x141f3b(0x4cb,0x4c4,0x3ca,0x45b)]+('\x0a-\x20**ADeta'+'iler:**\x20')+_0x278393['NbhTA'](_0x3e6aca[_0x29eacc(0x272,0x280,0x30f,0x221)+_0x141f3b(0x58a,0x45a,0x49e,0x4ed)],_0x278393[_0x141f3b(0x4e7,0x492,0x4ea,0x4db)])+'\x0a---\x0a\x20\x20\x20\x20';_0x278393['JkjFd'](addLog,_0x29bf54),_0x278393[_0x141f3b(0x4cd,0x4d0,0x42c,0x491)](addLog,'sdwebui生图参'+'数为'+JSON['stringify'](_0x5b922d)),console['log'](_0x278393['rgljW'],_0x5b922d);function _0x29eacc(_0x11f252,_0x2f4200,_0x4481c9,_0x57413f){return _0x3fcb(_0x2f4200- -0x23,_0x4481c9);}let _0x30f9b3=!![];while(_0x30f9b3){window[_0x29eacc(0x2f8,0x286,0x222,0x284)]?_0x141f3b(0x4c7,0x47c,0x418,0x440)!==_0x278393['SOVAu']?(_0x278393['yUpDK'](_0x21b482,_0x278393[_0x29eacc(0x218,0x29d,0x2c3,0x20f)]),_0x5ccbd4=_0x50304c):_0x30f9b3=![]:_0x278393[_0x29eacc(0x24f,0x1ae,0x238,0x1d8)](_0x278393[_0x29eacc(0x31c,0x2d5,0x274,0x2d5)],_0x278393[_0x141f3b(0x450,0x4f7,0x4e1,0x4a3)])?_0x4584f9=_0x278393['yUpDK'](_0x49d334,_0x4697ba):await sleep(-0xa8a+0x1*-0xbbf+0x1a31);};try{if(_0x278393[_0x141f3b(0x3fd,0x453,0x4cb,0x481)](_0x278393[_0x29eacc(0x145,0x1c6,0x1b3,0x20e)],_0x278393[_0x141f3b(0x55b,0x46a,0x46d,0x4f7)])){window[_0x141f3b(0x559,0x480,0x50d,0x4fc)]=!![],taskQueue['updateStat'+'us'](_0x393859,_0x278393[_0x141f3b(0x51a,0x49c,0x585,0x51d)]);if(_0x278393[_0x141f3b(0x3c2,0x425,0x4d2,0x44a)](_0x3e6aca[_0x29eacc(0x235,0x2c2,0x2ad,0x270)],_0x278393[_0x29eacc(0x235,0x23d,0x2b5,0x242)])){if(!taskQueue[_0x29eacc(0x2b4,0x21f,0x29c,0x2a9)+'eue'](_0x393859)){if(_0x278393[_0x29eacc(0x26a,0x1ee,0x23b,0x171)](_0x278393[_0x141f3b(0x47d,0x439,0x4ff,0x4b4)],'kMSBL')){_0x278393[_0x141f3b(0x480,0x559,0x563,0x4e9)](addLog,_0x29eacc(0x293,0x2be,0x26c,0x341)),eventSource['emit'](_0x278393[_0x141f3b(0x455,0x44c,0x483,0x44b)]);throw new Error(_0x278393[_0x29eacc(0x301,0x2b0,0x25d,0x32b)]);}else _0x278393[_0x141f3b(0x50c,0x48e,0x542,0x500)](_0x29a325,_0x278393[_0x29eacc(0x275,0x2a4,0x31c,0x28f)]),_0x78a536=_0x278393['euWBB'](_0x5c86f4,_0x39df2d,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x278393[_0x29eacc(0x1f1,0x209,0x287,0x238)]}]}}});}_0x5b922d[_0x29eacc(0x239,0x1ea,0x225,0x1e6)]=_0x456896,console['log'](_0x278393[_0x29eacc(0x24a,0x2e3,0x281,0x25b)],_0x3e6aca[_0x141f3b(0x4a7,0x3d4,0x4b6,0x449)+_0x29eacc(0x263,0x285,0x20a,0x2d7)]),_0x5b922d['auth']=_0x3e6aca[_0x141f3b(0x3cc,0x4dc,0x45d,0x449)+_0x29eacc(0x20b,0x285,0x327,0x282)]?_0x3e6aca[_0x29eacc(0x162,0x1d3,0x134,0x14f)+_0x141f3b(0x4fb,0x47a,0x45a,0x4fb)]:'';const _0x3e3a84=await fetch(_0x278393[_0x29eacc(0x16d,0x1d8,0x165,0x147)],{'method':_0x278393[_0x141f3b(0x438,0x4b9,0x4d7,0x4be)],'headers':getRequestHeaders(window[_0x141f3b(0x53b,0x483,0x47f,0x4f1)]),'body':JSON[_0x29eacc(0x18d,0x1e2,0x14b,0x170)](_0x5b922d)});if(!_0x3e3a84['ok']){if(_0x278393['RejuV'](_0x278393[_0x29eacc(0x210,0x1c0,0x204,0x146)],_0x278393['tUncd'])){const _0x19c702=await _0x3e3a84[_0x29eacc(0x1f9,0x245,0x1eb,0x20c)]();addLog(_0x29eacc(0x1db,0x21e,0x212,0x1d9)+'码:\x20'+_0x3e3a84[_0x141f3b(0x44a,0x4e7,0x3d4,0x447)]+_0x141f3b(0x3ef,0x425,0x406,0x421)+_0x19c702),console[_0x141f3b(0x57d,0x513,0x448,0x4e4)](_0x278393[_0x29eacc(0x298,0x257,0x1c1,0x24d)],_0x19c702);throw new Error('请求失败,状态码:\x20'+_0x3e3a84[_0x29eacc(0x26b,0x1d1,0x1e5,0x192)]+',\x20详情:\x20'+_0x19c702);}else{_0x278393['yUpDK'](_0x2c3505,'获取模型失败:\x20'+_0x878125[_0x29eacc(0x1a9,0x1d1,0x22f,0x1ae)]+'\x20'+_0x2f4656[_0x141f3b(0x5c6,0x5ba,0x522,0x554)]);throw new _0x3dfe9e(_0x29eacc(0x25f,0x237,0x26f,0x19f)+_0x25e1c6[_0x29eacc(0x17c,0x1d1,0x21b,0x195)]+'\x20'+_0x161d70[_0x29eacc(0x2d1,0x2de,0x36e,0x332)]);}}const _0x1f11b9=await _0x3e3a84[_0x29eacc(0x261,0x245,0x22d,0x227)]();let _0xda5de7='';try{const _0x59fce3=JSON[_0x141f3b(0x3d7,0x42c,0x4bc,0x46b)](_0x1f11b9);_0xda5de7=_0x59fce3[_0x141f3b(0x4e5,0x4e8,0x532,0x4d1)][0x14c+-0x96e+0x822];}catch(_0x3ef509){_0x278393[_0x141f3b(0x57a,0x561,0x50c,0x508)](_0x278393[_0x29eacc(0x2fa,0x268,0x278,0x2e8)],_0x278393[_0x141f3b(0x46d,0x48f,0x483,0x4de)])?_0x12611c=!![]:(_0x278393[_0x29eacc(0x15d,0x1a7,0x157,0x239)](addLog,_0x278393['dReYa']),_0xda5de7=_0x1f11b9);}const _0x169793=_0x278393[_0x29eacc(0x248,0x1ed,0x1a1,0x1d2)](_0x278393[_0x141f3b(0x512,0x4dd,0x442,0x4d6)],_0xda5de7);return _0x278393[_0x141f3b(0x517,0x4ae,0x4c9,0x4d0)](addLog,_0x278393['uhMtu']),taskQueue['completeTa'+'sk'](_0x393859,!![]),currentTaskId=null,{'image':_0x169793,'change':_0x278393[_0x141f3b(0x48b,0x527,0x479,0x4f8)](_0x5dbfde,'')};}else{if(!taskQueue['isTaskInQu'+'eue'](_0x393859)){if(_0x278393['JVoQv'](_0x141f3b(0x442,0x507,0x50c,0x49f),_0x278393[_0x141f3b(0x44f,0x408,0x432,0x435)]))!_0x361a7d[_0x141f3b(0x57f,0x49e,0x4e6,0x52b)+_0x141f3b(0x547,0x503,0x54f,0x53f)]&&(_0x331076[_0x29eacc(0x229,0x2b5,0x2e7,0x23a)+_0x141f3b(0x4ec,0x4f7,0x587,0x53f)]=!![],_0x278393['yMOQd'](_0x1fc967)),_0x278393[_0x29eacc(0x1a4,0x1ec,0x1ad,0x247)](_0x8cccb6);else{addLog(_0x278393[_0x141f3b(0x45d,0x499,0x4fe,0x4bd)]);throw new Error(_0x278393[_0x29eacc(0x2f4,0x2b0,0x33e,0x224)]);}}const _0x1a3f47=new URL(_0x278393[_0x141f3b(0x484,0x4b7,0x4e7,0x4e2)](_0x456896,_0x278393[_0x29eacc(0x1e3,0x1c7,0x149,0x154)]));window[_0x29eacc(0x2c4,0x286,0x2a3,0x248)]=![];const _0x27e3a2=await fetch(_0x1a3f47,{'method':_0x278393['oYUMP'],'body':JSON['stringify'](_0x5b922d),'headers':{'Content-Type':_0x278393[_0x141f3b(0x577,0x58a,0x587,0x4fa)],'Authorization':_0x278393[_0x29eacc(0x247,0x1ba,0x233,0x177)](getsdAuth)}});window[_0x29eacc(0x298,0x286,0x2c0,0x286)]=!![];if(!_0x27e3a2['ok']){const _0x133b05=await _0x27e3a2['text']();addLog(_0x29eacc(0x1bf,0x1f9,0x268,0x18d)+_0x141f3b(0x5b7,0x49a,0x599,0x518)+_0x27e3a2[_0x141f3b(0x4a8,0x3ee,0x4a5,0x447)]+_0x141f3b(0x398,0x3d8,0x40e,0x421)+_0x133b05),console[_0x141f3b(0x587,0x50b,0x580,0x4e4)](_0x278393[_0x29eacc(0x2ae,0x257,0x25f,0x1e3)],_0x133b05);throw new Error('请求失败,状态码:\x20'+_0x27e3a2[_0x29eacc(0x194,0x1d1,0x1a2,0x147)]+_0x141f3b(0x51f,0x4ca,0x4cf,0x550)+_0x133b05);}const _0x2c64b0=await _0x27e3a2[_0x141f3b(0x48b,0x4b4,0x4b5,0x468)]();if(!_0x2c64b0[_0x141f3b(0x54d,0x563,0x493,0x4d1)]||_0x278393[_0x141f3b(0x4b4,0x534,0x4d4,0x536)](_0x2c64b0[_0x29eacc(0x204,0x25b,0x29f,0x273)]['length'],0x66f+0x1522+0x1b91*-0x1)){if(_0x278393[_0x141f3b(0x4cb,0x4ab,0x4ab,0x481)](_0x141f3b(0x55a,0x4f0,0x4c0,0x546),_0x278393[_0x141f3b(0x48e,0x468,0x539,0x4cb)]))_0x46d2ba=_0x278393[_0x29eacc(0x183,0x205,0x231,0x163)](_0x278393[_0x141f3b(0x42e,0x4bd,0x460,0x4c3)](_0x1dffb3,',\x20'),_0x278393[_0x29eacc(0x2e3,0x28a,0x284,0x305)](_0x3787cf,_0x3460e4[_0x141f3b(0x4c7,0x4b0,0x4c4,0x4b8)+_0x1051bc+_0x141f3b(0x4f9,0x4ed,0x492,0x516)]));else throw new Error(_0x278393[_0x29eacc(0x223,0x269,0x30b,0x2e2)]);}const _0x5cf413=_0x2c64b0[_0x29eacc(0x297,0x25b,0x2b1,0x1d2)][-0xdaa+0x6*-0x4cd+0x24*0x12e],_0x164972=_0x278393[_0x141f3b(0x46b,0x463,0x405,0x4a6)](_0x29eacc(0x198,0x1fe,0x28d,0x21d)+_0x141f3b(0x48b,0x4b3,0x44a,0x4cf)+'4,',_0x5cf413);return _0x278393[_0x141f3b(0x5c6,0x57f,0x4f9,0x52c)](addLog,_0x278393[_0x29eacc(0x2c0,0x2e8,0x340,0x2e1)]),taskQueue[_0x141f3b(0x425,0x3d4,0x4b4,0x45d)+'sk'](_0x393859,!![]),currentTaskId=null,{'image':_0x164972,'change':_0x278393[_0x29eacc(0x2e7,0x2cf,0x248,0x298)](_0xf86ae5,'')};}}else{const _0x343ba7=_0x278393[_0x141f3b(0x461,0x4bf,0x4db,0x452)]['split']('|');let _0x36ff1e=-0xf29*-0x1+0x3b3*0x7+-0x2*0x1487;while(!![]){switch(_0x343ba7[_0x36ff1e++]){case'0':_0x108b79=null;continue;case'1':_0xf8e39f[_0x141f3b(0x556,0x551,0x5ca,0x532)](_0x278393[_0x141f3b(0x477,0x4c6,0x482,0x473)],_0x432e0f);continue;case'2':_0x278393[_0x29eacc(0x1c8,0x206,0x283,0x260)](_0x589b13,_0x29eacc(0x202,0x22f,0x26e,0x2c6)+_0x11624c[_0x29eacc(0x210,0x23b,0x1b2,0x1fd)]);continue;case'3':throw _0x1853ad;continue;case'4':if(_0x278393['uaPnn'](_0x39fe6c['message'],'任务已取消')){}else _0x3e47b7[_0x29eacc(0x1c0,0x1e7,0x235,0x20a)+'sk'](_0x3dd1c3,![]);continue;case'5':_0x4d1206['xiancheng']=!![];continue;}break;}}}catch(_0x4e4120){if(_0x278393[_0x141f3b(0x58e,0x4f2,0x512,0x508)](_0x29eacc(0x1cb,0x25f,0x281,0x20b),_0x278393[_0x141f3b(0x47b,0x3f0,0x4af,0x48b)])){const _0xa0ffef=_0x278393['tnMgX']['split']('|');let _0x385579=-0x2675+0xa*-0xeb+0x10f*0x2d;while(!![]){switch(_0xa0ffef[_0x385579++]){case'0':console[_0x141f3b(0x502,0x577,0x4c9,0x532)](_0x278393[_0x29eacc(0x17f,0x1fd,0x210,0x22a)],_0x4e4120);continue;case'1':throw _0x4e4120;continue;case'2':window[_0x29eacc(0x301,0x286,0x254,0x1ee)]=!![];continue;case'3':_0x278393[_0x141f3b(0x38f,0x453,0x478,0x425)](addLog,'sd请求生图错误:\x20'+_0x4e4120[_0x29eacc(0x1c3,0x23b,0x23d,0x243)]);continue;case'4':currentTaskId=null;continue;case'5':if(_0x278393['IrutS'](_0x4e4120[_0x141f3b(0x50d,0x509,0x499,0x4b1)],_0x278393[_0x29eacc(0x223,0x2b0,0x269,0x2a0)])){}else taskQueue['completeTa'+'sk'](_0x393859,![]);continue;}break;}}else{_0x56d437(_0x141f3b(0x43f,0x481,0x43c,0x4ce)+_0x1e03e0[_0x29eacc(0x1ac,0x1d1,0x21d,0x1d9)]+'\x20'+_0x4dfa55[_0x29eacc(0x355,0x2de,0x355,0x2b1)]);throw new _0x134128('切换模型失败:\x20'+_0x1dd9fb[_0x141f3b(0x46d,0x4dd,0x3f5,0x447)]+'\x20'+_0x1eb65f[_0x29eacc(0x342,0x2de,0x2f1,0x330)]);}}}async function sdGenerate(_0x4cd861){const _0x2febf3={'odhwQ':function(_0x3ca2b8,_0x33a344){return _0x3ca2b8(_0x33a344);},'jTdgz':_0x3b2907(0x28a,0x229,0x29f,0x208),'Glele':function(_0xaece1b,_0x3c6e8a){return _0xaece1b(_0x3c6e8a);},'JiCCA':function(_0x57f3f2,_0x574b06){return _0x57f3f2!=_0x574b06;},'HKssL':function(_0x3cb17e,_0x3d0f04){return _0x3cb17e(_0x3d0f04);},'PHHIF':function(_0x2081c2,_0x4b7b5e){return _0x2081c2(_0x4b7b5e);},'IQwiF':'Error\x20gene'+_0x3b2907(0x322,0x2db,0x2db,0x295)+_0x20f80d(0x238,0x1c4,0x19b,0x246),'FUcfh':function(_0xe8daf5,_0x2f6cbc){return _0xe8daf5(_0x2f6cbc);}},{id:_0x4b6203,prompt:_0x3aa898,width:_0x499a34,height:_0x32c8c9,change:_0x41c109}=_0x4cd861;_0x2febf3[_0x3b2907(0x2ed,0x292,0x2c6,0x2f5)](addLog,_0x20f80d(0x224,0x1ec,0x264,0x2c6)+_0x3b2907(0x1a6,0x226,0x244,0x21d)+_0x4b6203+(')\x20-\x20Prompt'+':\x20')+_0x3aa898+(_0x41c109?_0x3b2907(0x301,0x31c,0x2c7,0x2dc)+'\x20'+_0x41c109:''));function _0x20f80d(_0x533247,_0x105556,_0x5ac629,_0x286e5d){return _0x3fcb(_0x533247- -0x3,_0x5ac629);}if(_0x41c109&&_0x41c109[_0x3b2907(0x2f3,0x2fc,0x2ae,0x219)](_0x2febf3[_0x3b2907(0x2f1,0x2f6,0x25d,0x2f9)])){_0x2febf3[_0x20f80d(0x227,0x184,0x252,0x246)](bananaGenerate,_0x4cd861);return;}function _0x3b2907(_0x217e1a,_0x4961df,_0x3f9e50,_0x4cc1bc){return _0x3fcb(_0x3f9e50-0x47,_0x4cc1bc);}try{const {image:_0x52832d,change:_0x34aea8}=await generateSDImage({'prompt':_0x3aa898,'width':_0x499a34,'height':_0x32c8c9,'change':_0x41c109});if(_0x2febf3['JiCCA'](extension_settings[extensionName][_0x20f80d(0x2a3,0x330,0x2ce,0x2fb)],'0')){const _0x4feaf2={};_0x4feaf2[_0x3b2907(0x249,0x1a9,0x237,0x228)]=_0x34aea8,await setItemImg(_0x3aa898,_0x52832d,_0x4feaf2),_0x2febf3[_0x3b2907(0x24b,0x2fa,0x2c6,0x338)](addLog,_0x20f80d(0x271,0x248,0x2bf,0x2c2)+'or\x20prompt:'+'\x20'+_0x3aa898);}else _0x2febf3[_0x3b2907(0x29b,0x27a,0x280,0x249)](addLog,_0x3b2907(0x2c2,0x20c,0x21f,0x292)+'库');const _0x2fc618={};_0x2fc618['id']=_0x4b6203,_0x2fc618['success']=!![],_0x2fc618['imageData']=_0x52832d,_0x2fc618[_0x20f80d(0x281,0x207,0x2b9,0x1df)]=_0x3aa898,_0x2fc618[_0x20f80d(0x1ed,0x167,0x264,0x1a6)]=_0x34aea8,eventSource[_0x20f80d(0x2e1,0x251,0x2e5,0x36c)](EventType[_0x3b2907(0x2b0,0x23d,0x21e,0x243)+_0x3b2907(0x2dd,0x22e,0x274,0x251)+_0x3b2907(0x33e,0x3c8,0x346,0x309)],_0x2fc618),_0x2febf3['Glele'](addLog,'发送SD生图成功响应'+_0x3b2907(0x2af,0x301,0x32d,0x29b)+_0x4b6203+')');}catch(_0x31c695){const _0x40d848=_0x20f80d(0x237,0x230,0x1c2,0x292)+_0x20f80d(0x1d9,0x1f2,0x17a,0x201)+_0x4b6203+'):\x20'+_0x31c695[_0x3b2907(0x237,0x2c7,0x2a5,0x27d)];_0x2febf3['PHHIF'](addLog,'错误:\x20'+_0x40d848),console['error'](_0x2febf3[_0x3b2907(0x2df,0x25a,0x2b5,0x266)],_0x31c695);const _0xb25adb={};_0xb25adb['id']=_0x4b6203,_0xb25adb[_0x3b2907(0x313,0x36e,0x332,0x2ff)]=![],_0xb25adb['error']=_0x31c695[_0x20f80d(0x25b,0x211,0x250,0x213)],_0xb25adb[_0x20f80d(0x281,0x1fb,0x2f1,0x1df)]=_0x3aa898,eventSource[_0x20f80d(0x2e1,0x2ad,0x2d1,0x31d)](EventType['GENERATE_I'+_0x3b2907(0x20b,0x2ca,0x274,0x2a6)+_0x3b2907(0x3e6,0x2fa,0x346,0x3d0)],_0xb25adb),_0x2febf3[_0x3b2907(0x2b1,0x2e5,0x262,0x2d8)](addLog,'发送SD生图失败响应'+'\x20(ID:\x20'+_0x4b6203+')');}}function initializeSDListener(){function _0x5ef02(_0x195d24,_0x1a4766,_0x2f3857,_0x201308){return _0x3fcb(_0x2f3857-0x12c,_0x195d24);}const _0x2b83d7={};_0x2b83d7[_0x35878e(0x5d5,0x4fb,0x547,0x4d6)]=_0x5ef02(0x346,0x382,0x31b,0x3a3)+_0x5ef02(0x416,0x3b4,0x3ed,0x37f);const _0x18b054=_0x2b83d7;function _0x35878e(_0x45b112,_0x425947,_0x509744,_0x316dca){return _0x3fcb(_0x509744-0x36c,_0x425947);}eventSource['on'](EventType[_0x5ef02(0x2ce,0x385,0x303,0x28d)+'MAGE_REQUE'+'ST'],sdGenerate),addLog(_0x18b054[_0x35878e(0x4da,0x59f,0x547,0x4e8)]);}export async function replaceWithSd(){function _0x2bd53e(_0x48d9a6,_0x472080,_0x16eba6,_0x4ca2ee){return _0x3fcb(_0x48d9a6- -0xab,_0x472080);}function _0x42caf4(_0x7d4b0,_0x27a665,_0x3a3d17,_0x4829a4){return _0x3fcb(_0x3a3d17-0xa3,_0x27a665);}const _0x184569={'mlfgY':function(_0x23db0d,_0x56c895){return _0x23db0d==_0x56c895;},'wpscd':function(_0x1e04cf,_0xc97561){return _0x1e04cf!==_0xc97561;},'NEcRk':'zPgan','ncxhg':function(_0x3cbe0d){return _0x3cbe0d();},'vRxAz':function(_0x1d0801){return _0x1d0801();},'WHsht':function(_0x432f3b,_0x15b626){return _0x432f3b===_0x15b626;},'gxpFi':_0x2bd53e(0x205,0x233,0x19b,0x1e2),'WScai':function(_0x2de909,_0x5b1491){return _0x2de909(_0x5b1491);},'CVVMh':_0x2bd53e(0x144,0x1a0,0x15a,0x183)+_0x2bd53e(0x23f,0x22e,0x2d1,0x1ef)};if(_0x184569[_0x42caf4(0x36d,0x31f,0x375,0x2fe)](extension_settings[extensionName]['mode'],'sd'))_0x184569[_0x42caf4(0x388,0x389,0x35e,0x2c8)](_0x184569[_0x42caf4(0x2c0,0x23d,0x273,0x311)],'UEBOV')?(!window[_0x42caf4(0x415,0x3a3,0x37b,0x384)+_0x2bd53e(0x241,0x29b,0x263,0x2de)]&&(window[_0x2bd53e(0x22d,0x1a0,0x1a8,0x21b)+'SDListener']=!![],_0x184569[_0x2bd53e(0x249,0x257,0x1b3,0x2c8)](initializeSDListener)),_0x184569[_0x2bd53e(0x1e8,0x268,0x26f,0x23d)](initializeImageProcessing)):_0x147193[_0x42caf4(0x27c,0x30b,0x2ad,0x2d0)+'sk'](_0x21211a,![]);else{if(window[_0x42caf4(0x383,0x2db,0x37b,0x41e)+_0x42caf4(0x3bf,0x3b9,0x38f,0x3af)]){if(_0x184569[_0x2bd53e(0x19b,0x1ce,0x15b,0x103)]('WCVWS',_0x184569['gxpFi']))eventSource['removeList'+_0x42caf4(0x216,0x306,0x27d,0x2a6)](EventType[_0x42caf4(0x2b0,0x1d7,0x27a,0x310)+_0x2bd53e(0x231,0x1ed,0x263,0x258)+'ST'],sdGenerate),window[_0x2bd53e(0x22d,0x220,0x2af,0x1d7)+_0x2bd53e(0x241,0x281,0x1d8,0x1ff)]=![],_0x184569['WScai'](addLog,_0x184569[_0x2bd53e(0x1e3,0x21c,0x1a4,0x16b)]);else{const _0x432dc4=_0x319ccb['apply'](_0x3b75e3,arguments);return _0x247230=null,_0x432dc4;}}}}