(function(_0x2db934,_0x455832){function _0x18ba75(_0xf75c7f,_0x11e93d,_0x5d0cdd,_0xfae837){return _0x39d1(_0xf75c7f-0x288,_0x5d0cdd);}function _0x415304(_0x10d474,_0x33d01e,_0x22f9af,_0x186628){return _0x39d1(_0x22f9af-0xc6,_0x33d01e);}const _0x4fb449=_0x2db934();while(!![]){try{const _0x8a4b77=-parseInt(_0x18ba75(0x323,0x2a8,0x370,0x360))/(0x542*0x7+-0x2d5*0x3+0x1*-0x1c4e)*(-parseInt(_0x18ba75(0x309,0x341,0x2d6,0x35a))/(0x1*0x2459+-0x120c+-0x124b))+parseInt(_0x415304(0x225,0x1cc,0x215,0x223))/(-0x26c6+-0x118d+0x3856)*(parseInt(_0x18ba75(0x444,0x3c1,0x450,0x3b9))/(0x1*-0x2133+-0x8ec*-0x1+0x3*0x819))+parseInt(_0x18ba75(0x33c,0x3ce,0x2c5,0x38d))/(0xe*0x107+-0x3*-0x349+-0x1838)*(parseInt(_0x415304(0x2a9,0x1ff,0x26c,0x299))/(0x2ab*-0xb+0x14b9*0x1+0x8a6*0x1))+parseInt(_0x18ba75(0x32e,0x2ea,0x309,0x2ea))/(-0x1744+0x13a4+0x3a7)+parseInt(_0x415304(0x1ab,0x1a6,0x156,0x17a))/(-0x8d0*0x2+0x6*0x12f+-0x2*-0x547)*(-parseInt(_0x18ba75(0x3ef,0x46b,0x483,0x496))/(0x5a7+-0x221e+0x1c80))+parseInt(_0x18ba75(0x3ed,0x3ce,0x350,0x403))/(0x38*-0xa2+0x1c96*0x1+0x6*0x126)*(parseInt(_0x18ba75(0x398,0x394,0x357,0x2f3))/(-0x77b*-0x2+0x2076+-0x2f61))+-parseInt(_0x18ba75(0x386,0x30f,0x41b,0x37a))/(-0xf*0x236+0x1711+0xa25);if(_0x8a4b77===_0x455832)break;else _0x4fb449['push'](_0x4fb449['shift']());}catch(_0x59d370){_0x4fb449['push'](_0x4fb449['shift']());}}}(_0x5a18,0xb5286+0x4b012+-0x907e7));function _0x5a18(){const _0x44772b=['yxrFBgfZDf9Syq','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','yxbWBhK','5yIh5O2I5QIH5z6l5AsX6lsLoIa','rNnhuKW','uwL0sLO','qurLDgfPBgvY','AMLhs3u','nde4mZq4mePoDgPmra','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','tg1orMS','CgTLCw0','zMfJzv95B2XVDG','EwDqA1K','C0XLBva','tgrcze8','veLYEMm','uvDUwgK','DhjPBq','ndDOAurxswq','Evz2Avm','C3rYAw5NAwz5','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','C3jPr2W','zu1bweu','yxv0Aa','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','ywrFBw9KzwW','C3rHDhvZ','og4UChq','ndC5nZm1mLHNvM5Rzq','ENjoCK0','B3iGChjVBxb0oG','cI0GkIRNP43LRzaGkfm','suq6ia','tufhrv9srvfvrq','BgvY','Cgf5Bg9Hza','AML1z3vHBG','cI0GkIRPH43NU5JLUyxLUQyG','sgnLD08','Df9LBMq','C3rYzw5NDgG','DMPSz0i','mJmWnJKWyLHiBu5r','sLnptIdOP6pMNPdLPlhOTkxVViW','Eu1YALG','C3vIC3rYAw5N','s1HzwM8','AwXLCJOQkIa','v1r6txa','cI0GkIRPH4FMOlFMLRNMS5uG','C2rFy2nOyxr1xW','cI0GkIRMLl7LPkFLGi3NJOCG','Ahv6t0q','6i635y+w5QIH5z6l5AsX6lsLoIa','tM5LEuC','ic0Gq2HHBMDLoG','uvDPy3G','y2HHBMDL','A2LW','cI0GkIPdrKCGuW','uLzlu1i','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','q0vpzxC','wMrAEK0','C094s0C','B2TQs0W','tgH0yNy','6k+V44cc54Q25Ocb56cboIa','rg1LA20','q0Xjuf9ZDg9WxW','v0vMtNu','BMvNyxrPDMvqCG','C2vLza','s2fssuK','ywrKvgfZAW','44cc5zon5BQu5yAf5A65oIa','Dg9tDhjPBMC','of9Zyw1WBgvYtG','B0rdsuG','ke5Lz2f0AxzLia','C3rFy2HHDhu4xW','ywnLCYK6kIOG','C2rdzMDty2fSzq','5lIT55QeihbYB21WDooaGG','Bw9Kzq','AhjFC2nHBgu','CMvZDg9YzuzHyW','C2tOR7FMSylNLj/LM77PLjNOR686ia','5lU75yQH5BEY5y+w5RAi','l3bUzZTIyxnLnG','5yYw5lI6igrHDgeGvvi','AM13teC','y2vZioIeUoMdQos/RUwKJsdKUlO','r0vorvjbvevFsq','zw5HyMXLx2HYia','quLYBNm','6lsF6z2I5lI6oIa','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','y3jPChrZ','y2zNx3nJywXL','ktOG','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','AxPLktOQkIa','Aw5Nx3n0CMvUzW','C2rFy2HPCMvZxW','CMvZDg9Yzv9Myq','rezXtuO','BgvUz3rO','DxjS','yvzoB1K','cI0GkIROTj/PNAlMJ5dNPlOG','tM1Qs3e','y1HTsM8','ExvZAgvPzf9Zza','zxjYB3i','icHjrdOG','mti2ntuYnZjXrMDLy3i','ugf6Afa','CurVy28','zty0ioAvSoAnRUwKHoEqHUoaGG','zejUA1C','u0rmAxn0zw5LCG','Dgv4Da','ifbYB21WDa','y2fJAgu','vxzisNm','5yop5PwW5O2U44cc','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','y2zdtMW','C2rFyxv0Aa','rengzwK','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','sgvit24','q2HHCMfJDgvYia','mtG0ndDjrgTks1G','zxvL','zv9Mywn0B3i','Aw5JBhvKzxm','q0jfqwm','Dev6wMC','y29TCgXLDgvuyq','kerPDMLKzv9YBW','Aw1Hz2veyxrH','l2fWAs9Zzc9Zzq','rxHQBxu','qvPdEKW','yvn0wei','BMvYyxrPB24','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','BNvmzMu','AMXxDhK','Bg9Hza','t3HgB1G','yxjNCW','loAOOEwEI+s4UG','cI0GkIROHlJPG6JKV67LPi0G','uhjVBxb0ktOQkG','C3rHDhvZvgv4Da','5zon5BQu5yAf5A65oG','v0DVzuS','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','y0nZA2q','vNDRzNm','Aw5PDgLHBgL6zq','yMTTvLm','t0vMt04','ksaTifbYB21WDa','cI0GkIRMRAxMLBaGkfm','B3nPDgLVBG','of92ywu','Aw1Hz2u6','D2z1u2u','yMf5tKG','CgfYC2u','CMvTB3zLtgLZDa','AKjgufe','lI4U','E+s/RUwBVN0','lcdOR6BMG4u6ia','u0qGqvbjioI/LowBNUMuMq','s3zgrKu','zgf0ytPPBwfNzq','EMfTCMy','uLPhrNC','tunpv3u','BgvZktOG','yxbWBgLJyxrPBW','zw1PDa','5BEY5ywZ6zET44cc','DgP6q0q','EwHgBfm','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','s0fkzLy','ifn0CMvUz3rOkq','6AUy5RIf5l+U5Asnios4UG','zxr0Aw5NCW','ywX3yxLZB25FCW','nNzyz0LdEG','6zQp5PY6kc0Xkq','y21VzgvSmJiYmG','s1rLrvG','Dc1TB2rLBa','q1PTv3a','cI0GkIRPQ5JMUixKV67LPi0G','AMXJCfi','ug9ACMO','y29UC3rYDwn0BW','whbNDu8','z0DOtve','zML4zwrqCM9TCa','C2rFy2fKzxrHAq','EMD5Exy','C2rFy3DPzhrO','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','wMjbANO','swXWExm','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','tufhrv9srvnqtW','C2rFy3vWC2nHBa','mZqWA3f1vePk','kfvWC2nHBguGrG','owzzruz2ua','C2rvCMW','s0LKC1u','BI9QC29U','CLrXEwW','rLjfBfe','C2rFC3rVCf9Nzq','ywn0B3iPoIOQia','C3rLChm','zMfJzsdKUlRLVidLKk8','Dhj1zq','u2nLBMuGq29TCa','sg1hsvm','y3PUuxO','z1bqA2u','C2rFy3nLzwq','u2TPCdOQkIa','C2rFy2rLBM9PCW','BNvYBvO','CwT3veO','ExvZAgu','Cu1OEhC','B21WDa','BwvZC2fNzq','B3zLCNjPzgvFCW','DeHzqvq','uuTbyvy','C3vJy2vZCW','y2vZ','zfvRtuq','cI0GkIRMQkhLNOSGke0','kerLBM9PC2LUzW','C2rFDMfL','kcGOlISPkYKRkq','B2rLBcK6kIOG','BwTlBK0','mJiYmG','twfWDeK','ktOQkIa','Aw1Hz2vZ','t1bQqNC','AxnuyxnRsw5rDq','l2fWAs9Zzc9Nzq','cI0TlqOGicaG','of9Zy2HLzhvSzq','rLfmq0K','B21grfq','of9TB2rLBa','5BEY5yID5AEl5yYw44cc','yxv0B191CMW','ue9tva','AKrlChi','ANnVBG','Cgf5C3rFy2HHDa','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','55sO5lQo55sF5OIq55QevgfNoIa','l3nKyxbPl3yXlW','BxnUqMS','BNrdv0S','oIOQia','quzdCKK','z21tr04','vMryC2O','mtjNr2fPzge','AgvPz2H0','zwvKktOQkIa','Bw9KzwW','cI0GkIPdBgLWia','u0HIvw0','zw5LCG','zgj1CfK','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','AhnjyuO','ve9SC0q','C2rFy2HLAwDODa','BhnpvxK','wM9LwgO','ywrLDgfPBgvYxW','uer4DfC','ufDtEKi','ENP6t1q','77Ym6k+35Qoa5P+LC2r3zwj1','C2vHCMnO','CufWDNy','wLLAuwW','mtmYodyZmMTmEhzlEa','z2u6','C2rFy2nSAxbFCW','tMXXCgK','qvfux3nK','rgjMwNu','cI0GkIPwquu6kG','ruDOshK','wgvdBwq','EgLHBMnOzw5N','C2rFy3n0zxbZ','ve5SAgq','5zU+5y+c5PwW5OQL5zgkcI0GkIO','CMf0Aw5Nifneia','tLPYEKG','CMf0Aw5NigLTyq','CNvUBMLUzW','vunqx3nK','5BcD6k+v5l2C5lI65y6F5AEliejHCW','tLnf','DMjMtLG','BwLSuxa','EgDYu0G','Def5rNi','DLP3wxK','DfPzruy','Bg9N','y2XPzw50','EgvtAMq','mJi4mdHhtvftsMi','44cc6k+35Qoa5P+LC2r3zwj1','wMHUBu4','C3fdCfK','zw5HyMXLx2HY','yw1L','Aw5MBW'];_0x5a18=function(){return _0x44772b;};return _0x5a18();}const _0x318874=(function(){let _0x421b8e=!![];return function(_0x1acb45,_0x46159c){const _0x4c098e=_0x421b8e?function(){function _0x329673(_0x3ad334,_0x1a17f0,_0x5e102a,_0x2fa6d0){return _0x39d1(_0x3ad334- -0x102,_0x2fa6d0);}if(_0x46159c){const _0x5e676f=_0x46159c[_0x329673(-0x78,-0xbb,-0x16,-0x98)](_0x1acb45,arguments);return _0x46159c=null,_0x5e676f;}}:function(){};return _0x421b8e=![],_0x4c098e;};}()),_0x15ba4d=_0x318874(this,function(){function _0x5cd78b(_0x83d003,_0x3c30b3,_0x3b97f0,_0x3bf3a1){return _0x39d1(_0x83d003- -0x172,_0x3b97f0);}function _0x2c6f5f(_0x5cbf61,_0x269f50,_0x1e6ab8,_0x5be1e5){return _0x39d1(_0x5cbf61- -0x39e,_0x5be1e5);}const _0x49bb42={};_0x49bb42['Vwkfs']=_0x5cd78b(0x16,0x87,0x6b,-0x5c)+'+$';const _0xacdcf1=_0x49bb42;return _0x15ba4d[_0x5cd78b(-0x9c,-0xd1,-0xce,-0x7a)]()['search'](_0xacdcf1[_0x2c6f5f(-0x272,-0x271,-0x214,-0x26e)])[_0x5cd78b(-0x9c,-0x3b,-0x92,-0x124)]()[_0x2c6f5f(-0x246,-0x1be,-0x298,-0x1f5)+'r'](_0x15ba4d)[_0x5cd78b(0x47,0x60,-0x15,-0x5d)](_0xacdcf1[_0x2c6f5f(-0x272,-0x28c,-0x2b6,-0x1e2)]);});_0x15ba4d();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';function _0x39d1(_0x5ea9d4,_0x5dd78c){_0x5ea9d4=_0x5ea9d4-(-0x1337+-0x13a8+0x275e*0x1);const _0x534001=_0x5a18();let _0x16a084=_0x534001[_0x5ea9d4];if(_0x39d1['KbyqRJ']===undefined){var _0x1896ec=function(_0x2f868d){const _0xb59de='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3e3b9d='',_0x42e736='',_0x28af77=_0x3e3b9d+_0x1896ec;for(let _0xfb32ea=0x84d+-0xd43+0x4f6,_0x1613f9,_0x4e46e9,_0x332fb8=-0x1a41+0x7a6+0x129b;_0x4e46e9=_0x2f868d['charAt'](_0x332fb8++);~_0x4e46e9&&(_0x1613f9=_0xfb32ea%(0x893+-0x278+-0x617)?_0x1613f9*(-0x13b4+0x991+0x1*0xa63)+_0x4e46e9:_0x4e46e9,_0xfb32ea++%(-0x2*-0x91d+0x1e5c+0x1849*-0x2))?_0x3e3b9d+=_0x28af77['charCodeAt'](_0x332fb8+(0x17*0x65+0x119b+-0x1aa4))-(-0x1*0xa97+-0x1*-0x2657+0x1bb6*-0x1)!==-0x2*-0xbf3+0x11dd+-0x29c3?String['fromCharCode'](0x19*-0x140+0x1*0xf16+0x1129&_0x1613f9>>(-(0x5b6*-0x1+-0x20cf+-0x581*-0x7)*_0xfb32ea&0x15e1+-0xc*-0xb8+0x363*-0x9)):_0xfb32ea:0xbb1*0x1+-0x2052+0x14a1){_0x4e46e9=_0xb59de['indexOf'](_0x4e46e9);}for(let _0x93cfd2=-0x13d6+0x1696+0x2*-0x160,_0x2c2c32=_0x3e3b9d['length'];_0x93cfd2<_0x2c2c32;_0x93cfd2++){_0x42e736+='%'+('00'+_0x3e3b9d['charCodeAt'](_0x93cfd2)['toString'](-0x18cd+-0x22ea*-0x1+0x53*-0x1f))['slice'](-(0x47*0x5a+-0x1*0x575+-0xd9*0x17));}return decodeURIComponent(_0x42e736);};_0x39d1['KsCHcI']=_0x1896ec,_0x39d1['kAcqLr']={},_0x39d1['KbyqRJ']=!![];}const _0x54c011=_0x534001[-0x12be+-0x25e9+0x1*0x38a7],_0x33d06c=_0x5ea9d4+_0x54c011,_0x5b4845=_0x39d1['kAcqLr'][_0x33d06c];if(!_0x5b4845){const _0x54d25f=function(_0x3284b0){this['owlQaO']=_0x3284b0,this['kueQVe']=[0x8b*0x3c+-0x2*0x359+-0x19e1,0x194*-0x16+-0xe25+0x30dd,0xcf+0x1*0x1aeb+-0xa9*0x2a],this['iuczJU']=function(){return'newState';},this['RZCesT']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['tHTkib']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x54d25f['prototype']['BMOxyk']=function(){const _0x4b40da=new RegExp(this['RZCesT']+this['tHTkib']),_0x114eb9=_0x4b40da['test'](this['iuczJU']['toString']())?--this['kueQVe'][-0x473+-0x2f*0x8c+0x1*0x1e28]:--this['kueQVe'][-0x5c6+0x1420+-0xe5a];return this['WrkPVj'](_0x114eb9);},_0x54d25f['prototype']['WrkPVj']=function(_0x57a133){if(!Boolean(~_0x57a133))return _0x57a133;return this['iAAvUY'](this['owlQaO']);},_0x54d25f['prototype']['iAAvUY']=function(_0x23cc20){for(let _0x345288=0x10f*0x23+-0x2476+0x97*-0x1,_0x5b1f7a=this['kueQVe']['length'];_0x345288<_0x5b1f7a;_0x345288++){this['kueQVe']['push'](Math['round'](Math['random']())),_0x5b1f7a=this['kueQVe']['length'];}return _0x23cc20(this['kueQVe'][0x14*-0x3d+-0xbe*-0x2c+-0x1be4]);},new _0x54d25f(_0x39d1)['BMOxyk'](),_0x16a084=_0x39d1['KsCHcI'](_0x16a084),_0x39d1['kAcqLr'][_0x33d06c]=_0x16a084;}else _0x16a084=_0x5b4845;return _0x16a084;}import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;async function generateSDImage({prompt:_0x4b5edc,width:_0xc37ea8,height:_0x1f7b15,change:_0x3e381d}){function _0x1af8d2(_0x5d3711,_0x40bee4,_0x477b00,_0x392ed4){return _0x39d1(_0x477b00- -0x157,_0x40bee4);}const _0x198410={'aStXB':function(_0x453199){return _0x453199();},'qDoco':function(_0x63b528,_0x13139c){return _0x63b528(_0x13139c);},'KTeEX':function(_0x34a365,_0x52bbc1){return _0x34a365(_0x52bbc1);},'iaoPF':function(_0x4093d7,_0x448dc5){return _0x4093d7(_0x448dc5);},'pkeqm':_0x1af8d2(-0x70,-0xab,-0xa2,-0xe9)+_0x12be96(0x5fe,0x531,0x534,0x5a8)+_0x12be96(0x4f9,0x4ea,0x4d4,0x4db),'yhFlS':function(_0x3a9426,_0x31e849){return _0x3a9426(_0x31e849);},'XeCmd':_0x1af8d2(-0x5d,0x88,-0xe,0x79),'ZYZQl':'sd_stop_ge'+_0x1af8d2(0x69,-0x6c,-0x3a,0x62),'cznQz':_0x12be96(0x55a,0x45e,0x4a4,0x4bc),'Exjmu':'分角色模式:\x20解析带'+_0x1af8d2(-0x62,-0x88,-0x90,-0xa4),'PDxtW':_0x1af8d2(-0x42,0x4c,0x1b,0x33)+_0x1af8d2(-0x9a,-0x7c,-0x25,0x3b),'WxnMN':function(_0x41c712,_0x132a5f){return _0x41c712<=_0x132a5f;},'aVNoY':function(_0x26fb2a,_0x103383){return _0x26fb2a+_0x103383;},'zamrf':function(_0x4d0a6f,_0x45dc2d){return _0x4d0a6f+_0x45dc2d;},'LmNFk':function(_0x4cce34,_0x30a5c4){return _0x4cce34+_0x30a5c4;},'milQp':function(_0x424639,_0x3a7004){return _0x424639(_0x3a7004);},'PazhP':function(_0x431727,_0x4ac0aa){return _0x431727+_0x4ac0aa;},'sriGl':function(_0x3f7db6,_0x2ff36a){return _0x3f7db6+_0x2ff36a;},'FQLCI':function(_0x4b6080){return _0x4b6080();},'bayNH':function(_0xc16da7,_0x1952b7){return _0xc16da7+_0x1952b7;},'QWicx':function(_0x1c5717,_0x5cf907){return _0x1c5717||_0x5cf907;},'RdRXv':function(_0x1ef765,_0x18c79b){return _0x1ef765(_0x18c79b);},'jmwLG':function(_0x535018,_0x54760c){return _0x535018(_0x54760c);},'WTzMp':function(_0x18f0de,_0x39eb1e){return _0x18f0de(_0x39eb1e);},'qApvv':function(_0x484f46,_0x1be869){return _0x484f46(_0x1be869);},'nuLfe':function(_0x4dd430,_0x25f37f){return _0x4dd430!==_0x25f37f;},'MaptI':function(_0x631e51,_0x115a39){return _0x631e51(_0x115a39);},'cfCNl':function(_0x2ced1f,_0x4e60b1){return _0x2ced1f(_0x4e60b1);},'sLemP':_0x12be96(0x59e,0x55e,0x4af,0x53b),'NmjKq':_0x1af8d2(0x1b,0x45,-0x15,-0x47),'oDCIH':'标准模式:\x20使用请求'+_0x1af8d2(-0x6e,-0xe6,-0x7a,0xe),'NZrzH':function(_0x33040b,_0x1f6d10,_0x3c91a9){return _0x33040b(_0x1f6d10,_0x3c91a9);},'AIrns':function(_0x9039f4,_0x37ae4c){return _0x9039f4<=_0x37ae4c;},'FsGRL':_0x1af8d2(-0x26,-0xb1,-0xbe,-0x136),'wCaHZ':function(_0x3e469e,_0x4cded5){return _0x3e469e+_0x4cded5;},'dbupY':function(_0xf1011c,_0x163f2e){return _0xf1011c(_0x163f2e);},'DCFei':function(_0x34cbf2,_0x503ce6,_0x14bb31,_0x21bc12,_0x1dac2c,_0x5dd4fb){return _0x34cbf2(_0x503ce6,_0x14bb31,_0x21bc12,_0x1dac2c,_0x5dd4fb);},'qkwTJ':_0x1af8d2(0x11,-0x4e,0x41,0x3b),'NneyG':function(_0x2ac283,_0x9de86){return _0x2ac283===_0x9de86;},'SHbUm':'hDXIl','jBFPQ':_0x1af8d2(-0x1c,-0x12e,-0xa4,-0x27),'jiGKu':_0x12be96(0x569,0x57e,0x57a,0x503),'dUkMD':_0x1af8d2(-0x1b,-0x70,0x3a,0x52)+'t-model','CEOew':_0x12be96(0x54a,0x579,0x5de,0x573),'bkmVS':function(_0x171ea8,_0x1bfa79){return _0x171ea8!==_0x1bfa79;},'OPjBw':_0x1af8d2(0xec,0x7b,0x6a,0x1f),'WEfNu':_0x12be96(0x4a1,0x4ed,0x514,0x52b)+_0x1af8d2(0x89,0xa8,0x34,0x67),'tEzZg':'extension_'+'settingss.'+'sd_cchatu_'+'8_model','EGhHy':function(_0x4f0ce8,_0x360458){return _0x4f0ce8!=_0x360458;},'cCskd':'waArE','wfuSe':function(_0x6f12f1,_0xfd0d68){return _0x6f12f1(_0xfd0d68);},'hcEMx':function(_0x880c7a,_0x1ace67,_0x1cf87c){return _0x880c7a(_0x1ace67,_0x1cf87c);},'gPPke':_0x1af8d2(-0xd1,-0x7,-0x3e,-0x73)+_0x12be96(0x4f1,0x518,0x55d,0x52d),'HeHOn':function(_0x3b6388,_0x2b14ce){return _0x3b6388(_0x2b14ce);},'tjzCD':function(_0x445579,_0x286bb4){return _0x445579(_0x286bb4);},'KAJfV':function(_0x5efb1e,_0x2bb80c){return _0x5efb1e!=_0x2bb80c;},'KXYZo':_0x1af8d2(-0x60,-0x9f,-0x8e,-0xe5),'hsIaJ':function(_0x3f2e33,_0x21de7a,_0x5bee7f){return _0x3f2e33(_0x21de7a,_0x5bee7f);},'Lhtbv':function(_0x249ec0,_0x48daee){return _0x249ec0!==_0x48daee;},'tAyFr':function(_0xa30dcc,_0x5b24a6){return _0xa30dcc(_0x5b24a6);},'sqCpY':function(_0x148f00,_0x4fe56f){return _0x148f00==_0x4fe56f;},'AZCzL':_0x1af8d2(0xa5,0x42,0x1a,-0x8),'dBnkW':function(_0x2efbc2,_0x1e235e){return _0x2efbc2==_0x1e235e;},'AdOwI':function(_0x17d4b8,_0x320b01){return _0x17d4b8(_0x320b01);},'eMAXE':function(_0x1aa4e8,_0x1571f4){return _0x1aa4e8===_0x1571f4;},'ZoeXj':'Fmhll','KvFFE':_0x1af8d2(0x85,0xbd,0x5d,0x2a)+_0x1af8d2(-0x23,-0x34,0x19,0x72),'xeSjd':function(_0x36f8ad,_0x3e2dd1){return _0x36f8ad===_0x3e2dd1;},'gVjAR':_0x1af8d2(-0x3d,0x5d,-0x7,-0xa4),'qLBuz':function(_0x37e06d,_0x5c8be){return _0x37e06d==_0x5c8be;},'QrnxT':_0x1af8d2(0xf4,0x90,0x7d,-0x1),'XpguO':function(_0x9f7482,_0x59e689){return _0x9f7482(_0x59e689);},'FRElQ':function(_0x446475,_0x178d44){return _0x446475===_0x178d44;},'zgyyv':_0x12be96(0x4e3,0x4b1,0x442,0x4ce),'rTqyl':function(_0x282bff,_0x3e6a72){return _0x282bff===_0x3e6a72;},'gmSGN':_0x1af8d2(-0xa7,-0x16,-0xa9,-0xfb),'HmGIS':_0x1af8d2(-0x98,-0xb6,-0xa1,-0x5a),'lHYLm':function(_0x56d815,_0x53010f){return _0x56d815(_0x53010f);},'jlcpR':_0x1af8d2(0xab,0xe1,0x45,0x78)+'u8_sd_auth'+_0x1af8d2(-0x7,0x29,-0x36,-0x57),'TNlhd':_0x12be96(0x58e,0x476,0x52c,0x502),'OEfON':function(_0x18014b,_0x6a4468){return _0x18014b!==_0x6a4468;},'TOlsD':_0x1af8d2(-0x13,-0xa7,-0x99,-0x72),'xgrSH':function(_0x5b4d55,_0x220d5a){return _0x5b4d55(_0x220d5a);},'KaRII':_0x1af8d2(0x68,0x94,-0x18,-0xa2)+_0x1af8d2(-0x2e,-0x115,-0x74,-0xe4)+'4,','QitJZ':function(_0x35c2c9,_0x25bebf){return _0x35c2c9(_0x25bebf);},'OxFoX':'图像已成功获取并格式'+_0x1af8d2(-0x9e,-0x5b,-0x73,-0x46)+'L。','QycSj':function(_0x1f35eb,_0x33f350){return _0x1f35eb||_0x33f350;},'CZmWp':_0x12be96(0x40c,0x45b,0x503,0x4a8),'CBEAc':_0x12be96(0x537,0x526,0x550,0x57f),'AFCrI':function(_0x29592e,_0x530704){return _0x29592e+_0x530704;},'zzzOT':_0x12be96(0x59f,0x576,0x57a,0x579)+'txt2img','UvHJs':function(_0xb0070e,_0x45138b){return _0xb0070e===_0x45138b;},'LdBdO':_0x12be96(0x547,0x631,0x605,0x5af),'aHMuD':_0x12be96(0x502,0x51b,0x588,0x539)+_0x1af8d2(-0x84,-0x92,-0x4f,-0x62),'sOxKG':function(_0x38a741,_0x214e91){return _0x38a741||_0x214e91;},'qMhxw':'Error\x20gene'+_0x1af8d2(-0x27,0x20,0x74,0x107)+_0x12be96(0x5cd,0x5a7,0x5a9,0x597)};_0x198410[_0x1af8d2(0x42,0x2d,0x3d,0x4)](clearLog);const _0x4a83ba=taskQueue[_0x12be96(0x43f,0x4dc,0x535,0x4ae)]({'name':_0x198410[_0x12be96(0x5ad,0x47c,0x580,0x510)](_0x198410[_0x12be96(0x4cf,0x457,0x41d,0x49c)](_0x4b5edc,'')[_0x12be96(0x536,0x491,0x409,0x491)](-0x12d0+-0x2b6*0x5+0x205e,0x216*0x6+-0xcb4+0x4e),_0x4b5edc&&_0x4b5edc[_0x12be96(0x4ae,0x494,0x456,0x4cf)]>0x7ca+0x15e5+-0x3*0x9db?_0x12be96(0x486,0x474,0x5ad,0x514):''),'type':TaskType['SD'],'prompt':_0x4b5edc});currentTaskId=_0x4a83ba;let _0x5d7f6c=_0x3e381d;_0x4b5edc=_0x198410['RdRXv'](processCharacterPrompt,_0x4b5edc),_0x3e381d=processCharacterPrompt(_0x3e381d),_0x4b5edc=await _0x198410[_0x12be96(0x423,0x563,0x437,0x4bf)](stripChineseAnnotations,_0x4b5edc),_0x3e381d=await _0x198410[_0x1af8d2(-0x9c,-0x74,-0x9d,-0x9c)](stripChineseAnnotations,_0x3e381d);function _0x12be96(_0x33bd8f,_0x4873e5,_0x105796,_0x1c8d8b){return _0x39d1(_0x1c8d8b-0x3da,_0x105796);}const _0x359c14=extension_settings[extensionName][_0x12be96(0x584,0x52f,0x4b8,0x542)][_0x12be96(0x45f,0x43d,0x3ed,0x474)](),_0x50bce1=extension_settings[extensionName];_0x198410['qApvv'](addLog,'正在通过sdwebu'+_0x12be96(0x507,0x58b,0x4e5,0x577)+'端为'+_0x50bce1[_0x1af8d2(-0x3e,-0x135,-0xd8,-0x122)]+_0x1af8d2(0x23,-0xa0,-0x33,-0xcc)+_0x50bce1['sd_cchatu_'+_0x12be96(0x5a9,0x58f,0x5a8,0x570)]);const _0x46dfe7=_0x3e381d&&_0x198410['nuLfe'](_0x3e381d[_0x12be96(0x425,0x3f3,0x3ee,0x474)](),'')?_0x3e381d:_0x4b5edc;addLog(_0x12be96(0x590,0x5f4,0x56a,0x578)+_0x46dfe7);let _0x5f4aa5=![];_0x46dfe7[_0x1af8d2(-0x27,-0x80,-0x44,-0x27)](_0x198410[_0x12be96(0x5de,0x56a,0x5d7,0x58f)])&&(_0x5f4aa5=!![]);_0x198410[_0x1af8d2(0x7f,0x82,0x35,0x1e)](addLog,'是否启用分角色模式\x20'+_0x1af8d2(0x52,0x63,-0x40,0x38)+_0x12be96(0x590,0x57f,0x4e4,0x51d)+_0x5f4aa5);let _0x55822a={},_0x276533='',_0x2b9615='';if(_0x5f4aa5){_0x198410[_0x12be96(0x4b0,0x576,0x511,0x4da)](addLog,_0x198410[_0x12be96(0x4e8,0x46d,0x469,0x4f4)]),_0x55822a=_0x198410[_0x12be96(0x4e2,0x4ad,0x58e,0x4e4)](parsePromptStringWithCoordinates,_0x46dfe7),_0x276533=_0x55822a[_0x198410[_0x12be96(0x604,0x5aa,0x51f,0x58f)]];for(let _0x13c737=0x2023*-0x1+-0x2*-0x4+0x201c;_0x13c737<=-0x15a*-0x4+0x1*-0x21ad+0x1c49;_0x13c737++){if(_0x198410[_0x1af8d2(-0x10c,-0xfb,-0xc1,-0x12d)]!==_0x1af8d2(-0x49,0x3,0xa,0xa8))_0x40794c[_0x12be96(0x493,0x4d7,0x536,0x507)+_0x1af8d2(-0x48,-0x18,-0x54,0x1d)]=!![],_0x198410[_0x1af8d2(-0xa1,0x4a,-0x3b,-0x21)](_0x77903c);else{if(_0x55822a[_0x12be96(0x48d,0x54d,0x500,0x4e9)+_0x13c737+_0x1af8d2(-0xe9,-0xd0,-0x52,-0x42)]){if(_0x198410[_0x1af8d2(-0xc4,-0xc,-0x38,-0x31)](_0x198410['NmjKq'],_0x198410[_0x1af8d2(-0x105,0x29,-0x5e,-0x3a)])){_0x198410[_0x12be96(0x554,0x4eb,0x4fc,0x4da)](_0x32008a,_0x1af8d2(-0x82,-0xce,-0xb9,-0xa3)+':\x20'+_0x4083c5[_0x12be96(0x526,0x527,0x592,0x558)]+(_0x1af8d2(-0xb3,-0xa2,-0xd5,-0x116)+_0x12be96(0x4d5,0x45f,0x4f9,0x47c)+_0x12be96(0x40c,0x484,0x471,0x463))),_0x150f74[_0x1af8d2(-0x4c,-0x15,-0x41,-0xc2)+'sk'](_0x4adbb9,![]),_0x281a78=null;throw new _0x91ba5f(_0x1af8d2(-0x23,-0x134,-0xb9,-0xa0)+_0x1af8d2(0x47,0x6,0x61,0x83)+'i是否正常启动，并检'+'查模型是否正确。');}else _0x2b9615=_0x198410[_0x1af8d2(-0x1f,-0x156,-0xb8,-0xbf)](_0x198410[_0x1af8d2(0x29,-0x25,-0x60,0x22)](_0x2b9615,',\x20'),_0x55822a[_0x12be96(0x4cd,0x594,0x4a1,0x4e9)+_0x13c737+'\x20Prompt']);}}}}else _0x198410[_0x1af8d2(-0x8d,-0x9d,-0xf,-0x98)](addLog,_0x198410[_0x1af8d2(-0x129,-0x75,-0x7f,-0x128)]),_0x276533=_0x46dfe7;let {modifiedPrompt:_0x2001b1,insertions:_0x425c07}=await _0x198410[_0x12be96(0x517,0x537,0x57a,0x5a4)](prompt_replace,_0x276533,_0x2b9615);if(_0x5f4aa5)for(let _0x204cba=-0x359*0xb+0x1aa*0x3+0x1fd6;_0x198410[_0x1af8d2(-0x41,-0xba,-0x6e,-0xe)](_0x204cba,0xbb8*0x3+-0x29a+-0x31*0xaa);_0x204cba++){_0x55822a['Character\x20'+_0x204cba+_0x1af8d2(-0xb7,-0x9d,-0x52,-0x35)]&&(_0x198410[_0x1af8d2(-0xc8,0x48,-0x38,-0x79)](_0x1af8d2(-0x4d,-0x9e,-0xbe,-0x4b),_0x198410[_0x12be96(0x42a,0x3be,0x432,0x466)])?_0x198410[_0x1af8d2(0xd,0x69,-0x5,0x7d)](_0x39e087,'缓存设置为不存入数据'+'库'):_0x2001b1=_0x198410[_0x1af8d2(-0xc5,0x3c,-0x58,0x21)](_0x198410['wCaHZ'](_0x2001b1,',\x20'),_0x198410['dbupY'](prompt_replace_for_character,_0x55822a[_0x12be96(0x536,0x48d,0x532,0x4e9)+_0x204cba+_0x12be96(0x4be,0x50e,0x50c,0x4df)])));}let _0x4ebff=await _0x198410[_0x1af8d2(0x46,0x3a,-0x4b,-0x19)](zhengmian,extension_settings[extensionName][_0x12be96(0x4ea,0x577,0x4d1,0x555)][extension_settings[extensionName]['yusheid_sd']][_0x1af8d2(-0x2d,0xa3,0x4,0x8b)+'t'],_0x2001b1,extension_settings[extensionName]['yushe'][extension_settings[extensionName]['yusheid_sd']][_0x12be96(0x4a7,0x501,0x586,0x535)+_0x1af8d2(-0x84,-0x13e,-0xa6,-0xa3)],extension_settings[extensionName][_0x12be96(0x5cf,0x4ee,0x507,0x59a)],_0x425c07),_0x5a3600=await fumian(extension_settings[extensionName][_0x1af8d2(-0x8,-0x3a,0x24,-0x77)][extension_settings[extensionName][_0x1af8d2(-0xbe,-0x8a,-0x5c,-0xa2)]][_0x12be96(0x4a5,0x4d4,0x4cb,0x4ab)+_0x1af8d2(0x64,0xb1,0x26,0x12)],extension_settings[extensionName][_0x1af8d2(0xaf,0x9c,0x76,0xc7)]);_0x198410[_0x1af8d2(-0xf0,-0xa4,-0x57,0x1e)](addLog,_0x12be96(0x536,0x4f9,0x4ac,0x4c4)+_0x5a3600),extension_settings['sd'][_0x198410[_0x1af8d2(0x5b,0x8c,0x23,-0x36)]]=_0x359c14,await _0x198410['FQLCI'](saveSettingsDebounced);try{if(_0x198410['NneyG'](_0x198410[_0x12be96(0x597,0x4e9,0x5a9,0x585)],_0x198410[_0x1af8d2(-0x71,-0xa8,-0x1e,-0xba)]))_0x4fc470[_0x12be96(0x46d,0x505,0x52c,0x507)+_0x12be96(0x44a,0x482,0x4f0,0x4dd)]&&(_0x1f81bb[_0x12be96(0x4f4,0x56a,0x52b,0x512)+_0x12be96(0x578,0x545,0x52d,0x586)](_0x5e191f['GENERATE_I'+'MAGE_REQUE'+'ST'],_0x4a6bee),_0x504411[_0x1af8d2(-0xa0,0x52,-0x2a,0x32)+_0x1af8d2(-0x85,-0xf5,-0x54,-0xf8)]=![],_0xe37a00(_0x1af8d2(-0xd9,-0x73,-0x4e,0x14)+_0x12be96(0x584,0x535,0x50b,0x520)));else{if(_0x50bce1[_0x1af8d2(-0x11c,-0x3f,-0xd8,-0x103)]==='jiuguan'){if(_0x198410['NneyG'](_0x12be96(0x4ed,0x54d,0x49d,0x503),_0x198410[_0x12be96(0x4ec,0x3ec,0x503,0x469)])){const _0x16628c={};_0x16628c['auth']=_0x50bce1[_0x12be96(0x54d,0x53f,0x4db,0x4b4)+_0x1af8d2(0x1,-0x31,-0x4c,-0xc8)]?_0x50bce1[_0x12be96(0x51e,0x456,0x452,0x4b4)+'sd_auth']:'',_0x16628c[_0x1af8d2(-0x5a,0x17,-0x61,-0xfd)]=_0x359c14;const _0x39846c=await fetch(_0x198410[_0x12be96(0x5aa,0x5a6,0x5be,0x55e)],{'method':_0x198410[_0x12be96(0x428,0x47a,0x465,0x4a2)],'body':JSON['stringify'](_0x16628c),'headers':getRequestHeaders(window['token'])});if(!_0x39846c['ok']){if(_0x198410[_0x12be96(0x57a,0x52c,0x470,0x508)](_0x12be96(0x568,0x5f1,0x555,0x59b),_0x198410[_0x1af8d2(0x4c,-0x28,0x38,0x8f)]))_0x198410['iaoPF'](_0x4daec9,_0x198410[_0x1af8d2(-0x112,-0x133,-0xc4,-0x83)]),_0x1e2148=_0x3acaa0;else{addLog('获取模型失败:\x20'+_0x39846c[_0x1af8d2(-0xad,-0xae,-0xb3,-0xd)]+'\x20'+_0x39846c['statusText']);throw new Error(_0x1af8d2(-0xdf,-0x89,-0x98,-0xc6)+_0x39846c['status']+'\x20'+_0x39846c[_0x12be96(0x509,0x472,0x4cb,0x501)]);}}let _0x5b1c72=await _0x39846c[_0x12be96(0x56e,0x569,0x51a,0x4de)]();console[_0x12be96(0x59e,0x585,0x5cb,0x5b0)](_0x198410[_0x12be96(0x4ca,0x497,0x545,0x4aa)],_0x5b1c72),console[_0x1af8d2(0x8,0x113,0x7f,0x38)](_0x198410[_0x1af8d2(-0xa0,0x4e,-0x42,0x3a)],_0x50bce1[_0x1af8d2(-0x115,-0x42,-0x9b,-0x3a)+_0x12be96(0x5a1,0x4fe,0x5a3,0x570)]);if(_0x198410[_0x1af8d2(-0x19,0x41,0x6c,-0x21)](_0x5b1c72,_0x50bce1['sd_cchatu_'+_0x12be96(0x54e,0x60a,0x4f6,0x570)])){if(_0x198410['nuLfe'](_0x198410['cCskd'],_0x198410[_0x12be96(0x4c8,0x599,0x4c3,0x505)])){const _0xdf4240=_0x2a72f9[_0x12be96(0x466,0x4c8,0x543,0x511)](_0x3ed71c);_0x401feb=_0xdf4240['images'][-0x1*-0x1c73+-0x1df*0x2+-0x17*0x113];}else{_0x198410[_0x12be96(0x546,0x515,0x517,0x50f)](addLog,'正在设置模型为'+_0x50bce1[_0x12be96(0x443,0x482,0x519,0x496)+'8_model']+_0x12be96(0x49c,0x52a,0x49b,0x514)),toastr[_0x12be96(0x457,0x3c8,0x4d3,0x461)](_0x1af8d2(0x5d,0x70,0x57,0xa1)+_0x50bce1[_0x1af8d2(-0xce,-0xfe,-0x9b,-0x55)+_0x1af8d2(-0x3c,0x24,0x3f,0x9a)]);const _0x1a0f24={};_0x1a0f24[_0x1af8d2(-0x146,-0x28,-0xb6,-0x7a)]=_0x50bce1[_0x1af8d2(-0x4e,-0x10,-0x7d,0x20)+_0x12be96(0x461,0x555,0x4cf,0x4e5)]?_0x50bce1[_0x12be96(0x50c,0x4f6,0x466,0x4b4)+_0x12be96(0x4c8,0x532,0x565,0x4e5)]:'',_0x1a0f24['url']=_0x359c14,_0x1a0f24[_0x1af8d2(-0x4c,-0x2d,0x52,0xab)]=_0x50bce1[_0x12be96(0x467,0x4be,0x43c,0x496)+_0x1af8d2(-0x20,0x4,0x3f,-0x21)];const _0x588cd4=await _0x198410['hcEMx'](fetch,_0x198410[_0x12be96(0x523,0x5bf,0x5f1,0x54f)],{'method':_0x198410[_0x12be96(0x4ff,0x484,0x516,0x4a2)],'body':JSON['stringify'](_0x1a0f24),'headers':_0x198410[_0x12be96(0x4ba,0x495,0x442,0x4e8)](getRequestHeaders,window['token'])});if(!_0x588cd4['ok']){_0x198410[_0x1af8d2(-0x29,-0xa1,-0x10,-0x26)](addLog,'切换模型失败:\x20'+_0x588cd4[_0x1af8d2(-0xd0,-0x130,-0xb3,-0x144)]+'\x20'+_0x588cd4['statusText']);throw new Error('切换模型失败:\x20'+_0x588cd4['status']+'\x20'+_0x588cd4[_0x12be96(0x543,0x485,0x5a2,0x501)]);}toastr[_0x1af8d2(-0x8e,-0x5d,-0xd0,-0x165)]('设置模型...为'+_0x50bce1[_0x12be96(0x4a7,0x49e,0x4f9,0x496)+_0x1af8d2(0x47,0x79,0x3f,-0x2b)]+'成功');}}}else{_0x198410[_0x1af8d2(0x2,0xb,-0xf,-0x26)](_0x3ce5b1,_0x198410['XeCmd']),_0x33192c[_0x12be96(0x5c8,0x530,0x52d,0x51f)](_0x198410[_0x12be96(0x4ff,0x5bf,0x637,0x595)]);throw new _0x53fe16(_0x198410['cznQz']);}}else{let _0x20b981=await getSDMode(_0x359c14);if(_0x198410[_0x1af8d2(-0x8,-0x7b,-0xd,0x66)](_0x20b981,_0x50bce1[_0x1af8d2(-0x1c,-0x4f,-0x9b,-0x10c)+_0x1af8d2(0x7f,-0x39,0x3f,-0xf)])){if(_0x198410[_0x12be96(0x466,0x4cd,0x47e,0x4f9)](_0x198410[_0x12be96(0x487,0x4d0,0x421,0x492)],'qtGYd'))_0x198410[_0x12be96(0x53a,0x4fd,0x4ea,0x522)](addLog,_0x12be96(0x484,0x47b,0x4ba,0x4c5)+_0x50bce1['sd_cchatu_'+_0x1af8d2(0x49,0xce,0x3f,-0x26)]+_0x12be96(0x4fa,0x4d2,0x581,0x514)),await _0x198410[_0x1af8d2(0x22,-0x36,0x58,0x2e)](setSDMode,_0x359c14,_0x50bce1[_0x1af8d2(0x6,-0x137,-0x9b,-0x22)+_0x12be96(0x4e6,0x599,0x555,0x570)]);else{_0x3a37a0(_0x198410[_0x12be96(0x468,0x4d1,0x55f,0x4f4)]),_0x288185=_0x198410[_0x1af8d2(-0x65,-0xab,-0x57,-0x80)](_0x3b2f67,_0x23c369),_0x5cbd1c=_0x53f64d[_0x198410['PDxtW']];for(let _0x47b33e=0x209*-0x13+-0x13ea+0x3a96;_0x198410['WxnMN'](_0x47b33e,-0x17*-0xa1+-0x2ae+-0x17*0x83);_0x47b33e++){_0x98e83d[_0x1af8d2(0x48,-0x51,-0x48,-0xc6)+_0x47b33e+_0x12be96(0x54a,0x515,0x447,0x4df)]&&(_0x116ada=_0x198410['aVNoY'](_0x5a4d53+',\x20',_0x16b2f5[_0x12be96(0x495,0x490,0x49f,0x4e9)+_0x47b33e+'\x20Prompt']));}}}}}}catch(_0x3e95ea){_0x198410['dbupY'](addLog,_0x1af8d2(-0x1c,-0xad,-0xb9,-0x162)+':\x20'+_0x3e95ea[_0x1af8d2(-0x22,0x23,0x27,0x6b)]+(_0x1af8d2(-0xbe,-0x52,-0xd5,-0x65)+_0x12be96(0x3ee,0x3e8,0x45b,0x47c)+_0x1af8d2(-0x105,-0x44,-0xce,-0xc9))),taskQueue[_0x12be96(0x47e,0x4dd,0x586,0x4f0)+'sk'](_0x4a83ba,![]),currentTaskId=null;throw new Error(_0x12be96(0x51b,0x4ec,0x3ea,0x478)+_0x1af8d2(0xd2,0x32,0x61,0x7e)+'i是否正常启动，并检'+_0x12be96(0x4cd,0x4d5,0x425,0x463));}let _0x534a5b=-(-0x67f*-0x1+0x1ef6+-0x2574);const _0x432742=_0x50bce1[_0x1af8d2(-0x72,0x60,0x1f,-0x88)];_0x198410[_0x1af8d2(-0x67,-0x97,-0x8b,-0x134)](_0x432742,'')&&_0x198410[_0x1af8d2(-0x67,-0xd9,-0x38,-0x64)](_0x432742,null)&&!_0x198410[_0x1af8d2(0xb4,0x56,0x7a,-0x12)](isNaN,_0x198410[_0x1af8d2(-0x15,0xb3,0x56,-0x2f)](Number,_0x432742))&&_0x198410['tAyFr'](Number,_0x432742)>=0x1b64+0x2289+-0x3ded*0x1&&(_0x534a5b=Number(_0x432742));let _0x1a0524={'prompt':_0x4ebff,'negative_prompt':_0x5a3600,'sampler_name':_0x50bce1[_0x1af8d2(-0x3a,-0xd6,-0x9b,-0xd0)+_0x12be96(0x4d8,0x4db,0x509,0x4b1)+_0x1af8d2(-0x9f,-0xec,-0xd1,-0x4a)],'scheduler':_0x50bce1[_0x12be96(0x434,0x43c,0x542,0x496)+_0x12be96(0x514,0x5c7,0x4ef,0x56d)+'r'],'steps':_0x50bce1[_0x1af8d2(-0x11,0x42,0x6f,0x70)],'cfg_scale':_0x50bce1[_0x12be96(0x4dc,0x444,0x46b,0x4b6)],'width':_0xc37ea8?_0xc37ea8:_0x50bce1[_0x1af8d2(0x9a,-0x95,0x7,-0x59)],'height':_0x1f7b15?_0x1f7b15:_0x50bce1[_0x12be96(0x53b,0x5eb,0x620,0x58b)],'restore_faces':_0x198410[_0x1af8d2(-0x169,-0xf5,-0xd3,-0x4f)](_0x50bce1[_0x1af8d2(-0x84,-0xce,-0x77,0x15)+'es'],_0x198410[_0x1af8d2(0x43,0x3b,-0x3c,0x4f)]),'enable_hr':_0x198410[_0x12be96(0x4ea,0x4fb,0x4b7,0x4dc)](_0x50bce1[_0x12be96(0x4ab,0x424,0x448,0x4cc)+'fix'],_0x1af8d2(-0x5b,0x8f,0x1a,0x8)),'hr_upscaler':_0x50bce1['sd_cchatu_'+'8_upscaler'],'hr_scale':_0x50bce1[_0x1af8d2(0x8b,0x8d,0xd,0x89)+_0x12be96(0x53d,0x4d9,0x548,0x4ec)],'hr_additional_modules':[],'denoising_strength':_0x50bce1[_0x12be96(0x53d,0x58d,0x567,0x552)+_0x12be96(0x543,0x496,0x43d,0x4cb)+'th'],'hr_second_pass_steps':_0x50bce1[_0x12be96(0x42b,0x428,0x43d,0x4cc)+_0x12be96(0x5b5,0x51b,0x54e,0x549)],'seed':_0x534a5b,'override_settings':{'CLIP_stop_at_last_layers':_0x198410['AdOwI'](Number,_0x50bce1[_0x1af8d2(0x71,0xf2,0x67,0xff)+_0x12be96(0x443,0x527,0x4fb,0x49e)]),'sd_vae':_0x50bce1[_0x12be96(0x4c4,0x4a6,0x4c6,0x496)+_0x1af8d2(0x61,0x81,-0x24,-0x57)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x198410[_0x1af8d2(-0x2f,-0x4,0x56,0xcc)](addLog,_0x12be96(0x463,0x521,0x4dd,0x4cd)+_0x1af8d2(-0xdb,-0x4,-0x71,-0xf3)+_0x1a0524[_0x1af8d2(-0x8f,-0xae,-0x64,-0xa7)+_0x12be96(0x561,0x5c8,0x50b,0x55d)]),_0x198410['MaptI'](addLog,_0x1af8d2(-0xdc,-0x8b,-0x6f,-0x106)+_0x12be96(0x561,0x4d2,0x52c,0x526)+_0x1a0524[_0x12be96(0x4da,0x412,0x452,0x45f)]);if(_0x198410[_0x1af8d2(-0x5,-0xf8,-0x55,-0x3a)](_0x50bce1[_0x12be96(0x592,0x5dd,0x592,0x536)+_0x12be96(0x512,0x484,0x485,0x486)],_0x12be96(0x56c,0x51a,0x56a,0x54b))){if(_0x198410[_0x1af8d2(-0xa5,-0x132,-0xb7,-0x8b)](_0x198410[_0x1af8d2(0x73,0x83,0x5c,-0x1f)],_0x198410['ZoeXj'])){_0x198410[_0x1af8d2(0xdb,0x9,0x7c,0x8f)](addLog,_0x198410[_0x1af8d2(-0x8a,0x1b,-0x19,0x74)]);const _0x4d3849={};_0x4d3849[_0x1af8d2(-0x143,-0x59,-0xb4,-0x23)]=_0x1af8d2(-0x12d,-0x14b,-0xc3,-0x145)+_0x1af8d2(-0xad,-0xa,-0xb2,-0xfd);const _0x40b922={};_0x40b922[_0x12be96(0x503,0x451,0x490,0x4fd)]=[!![],!![],_0x4d3849];const _0x23a63e={};_0x23a63e[_0x12be96(0x4de,0x3c0,0x3c4,0x468)]=_0x40b922;const _0x363992={};_0x363992[_0x12be96(0x53f,0x587,0x5c1,0x528)+_0x1af8d2(0x19,0xc,-0x6b,-0x9e)]=_0x23a63e,_0x1a0524=deepMerge(_0x1a0524,_0x363992);}else{if(_0x1569d2){const _0x274831=_0x5a8517['apply'](_0x185248,arguments);return _0x4547b4=null,_0x274831;}}}const _0x440ef9='\x0a---\x0a###\x20生'+_0x12be96(0x52b,0x601,0x5e0,0x5a2)+'正面提示\x20(Prom'+'pt):**\x20'+_0x4ebff+(_0x12be96(0x50a,0x45f,0x529,0x4d2)+_0x12be96(0x45d,0x4ba,0x4f6,0x4b3)+_0x1af8d2(-0xba,0x38,-0x31,-0x63)+'\x20')+_0x5a3600+(_0x12be96(0x53f,0x4d6,0x410,0x495)+'(Sampler):'+'**\x20')+_0x1a0524['sampler_na'+'me']+(_0x12be96(0x488,0x47b,0x578,0x50b)+'teps):**\x20')+_0x1a0524['steps']+(_0x1af8d2(-0x55,-0x50,-0x92,0x19)+'cale:**\x20')+_0x1a0524[_0x1af8d2(-0xfa,-0xe2,-0x6a,-0xf3)]+('\x0a-\x20**尺寸\x20(S'+_0x1af8d2(-0x62,-0x91,-0x67,-0xcf))+_0x1a0524['width']+'x'+_0x1a0524[_0x1af8d2(0xb1,0x24,0x50,0x9a)]+(_0x12be96(0x454,0x458,0x42e,0x483)+_0x12be96(0x54e,0x541,0x62a,0x582))+(_0x198410[_0x12be96(0x4e5,0x48a,0x3ff,0x45a)](_0x1a0524['seed'],-(0xc*0x122+-0x841+-0x556*0x1))?_0x198410['gVjAR']:_0x1a0524[_0x1af8d2(-0x30,-0x74,-0x85,0x1e)])+(_0x12be96(0x5cd,0x5d7,0x56e,0x55f)+_0x1af8d2(0x20,0xb6,0x32,0x18))+_0x50bce1[_0x1af8d2(-0x58,-0xf9,-0x9b,-0xf2)+_0x12be96(0x520,0x537,0x5fd,0x570)]+(_0x12be96(0x640,0x5fe,0x619,0x59c)+'*\x20')+_0x1a0524[_0x1af8d2(-0x33,-0x1d,0x28,0x88)+_0x1af8d2(0x3b,-0x5b,-0xa,-0x24)][_0x12be96(0x5dc,0x5f5,0x551,0x561)]+(_0x1af8d2(0xcd,-0x48,0x53,-0x4c)+_0x1af8d2(0x9,-0x18,0x20,-0x15))+_0x1a0524['override_s'+_0x1af8d2(0x34,0x4d,-0xa,-0x5b)][_0x1af8d2(-0xf2,-0x43,-0x88,-0x9a)+_0x12be96(0x50d,0x404,0x435,0x462)+'yers']+(_0x12be96(0x5d5,0x581,0x593,0x52f)+'(Hires\x20Fix'+_0x12be96(0x5c3,0x5c2,0x4ea,0x567))+_0x1a0524['enable_hr']+(_0x12be96(0x410,0x487,0x441,0x497)+_0x1af8d2(-0x94,0x81,0xf,-0x6a)+_0x1af8d2(-0x7,-0x47,0x17,0x2c))+_0x1a0524[_0x1af8d2(-0x44,-0xb6,-0x78,-0x6f)]+(_0x12be96(0x438,0x41c,0x431,0x489)+_0x1af8d2(0x17,0x7b,0x2f,0x8c)+_0x1af8d2(-0x8f,0x50,-0xc,0xe)+_0x12be96(0x4e0,0x4d2,0x5c0,0x57c))+_0x1a0524['denoising_'+_0x12be96(0x41e,0x472,0x449,0x48c)]+(_0x1af8d2(-0x2f,-0x33,-0x32,0x2e)+'(Restore\x20F'+_0x1af8d2(-0x55,-0x95,-0x7c,-0x110))+_0x1a0524['restore_fa'+_0x1af8d2(0xb8,0x28,0x2c,0xb6)]+('\x0a-\x20**ADeta'+_0x12be96(0x4df,0x4fa,0x4cc,0x493))+_0x198410['qLBuz'](_0x50bce1[_0x12be96(0x48a,0x531,0x4df,0x536)+'ler'],_0x198410[_0x1af8d2(0x4b,0x6d,-0x3c,0x6d)])+_0x1af8d2(-0x15,0x88,0x3b,0x50);_0x198410['wfuSe'](addLog,_0x440ef9),addLog('sdwebui生图参'+'数为'+JSON[_0x12be96(0x49b,0x47e,0x513,0x477)](_0x1a0524)),console[_0x1af8d2(0xc0,0x30,0x7f,0x44)](_0x12be96(0x4d9,0x4d2,0x460,0x487),_0x1a0524);let _0x1757c=!![];while(_0x1757c){window['xiancheng']?_0x1af8d2(0x105,0x7e,0x7d,0x104)!==_0x198410['QrnxT']?_0x186c09=![]:_0x1757c=![]:await _0x198410[_0x12be96(0x519,0x4d4,0x531,0x533)](sleep,-0x3a6+0x1*-0x1e9+-0x977*-0x1);};try{if(_0x198410['FRElQ'](_0x198410[_0x12be96(0x4e0,0x4b5,0x5d2,0x537)],'WAgKe'))_0x38bedb[_0x1af8d2(0x1b,-0x7,-0x41,0x14)+'sk'](_0x3b783e,![]);else{window[_0x12be96(0x5c9,0x552,0x57c,0x59f)]=!![],taskQueue['updateStat'+'us'](_0x4a83ba,_0x12be96(0x621,0x5a3,0x56d,0x5a6));if(_0x198410[_0x12be96(0x59c,0x4cf,0x4d0,0x545)](_0x50bce1[_0x1af8d2(-0x13e,-0xcd,-0xd8,-0xba)],_0x198410[_0x1af8d2(-0x5e,0x77,0x4d,0x33)])){if(_0x198410[_0x1af8d2(0x83,-0x46,0x15,-0x57)](_0x198410['HmGIS'],_0x198410[_0x1af8d2(0x1b,-0x76,0x1c,0xbf)])){if(!taskQueue[_0x1af8d2(-0x44,0xc4,0x39,-0x73)+_0x1af8d2(0x35,-0x2b,-0x46,-0x59)](_0x4a83ba)){_0x198410['lHYLm'](addLog,_0x198410[_0x12be96(0x50c,0x5f0,0x52e,0x59e)]),eventSource[_0x1af8d2(0x7b,0x32,-0x12,0x95)](_0x12be96(0x4fa,0x57b,0x53b,0x547)+_0x1af8d2(-0xd4,-0x2a,-0x3a,0x1));throw new Error(_0x198410[_0x12be96(0x5cc,0x5ad,0x4e9,0x54e)]);}_0x1a0524[_0x12be96(0x424,0x4df,0x4af,0x4d0)]=_0x359c14,console[_0x1af8d2(0x59,-0x6,0x7f,0x1)](_0x198410[_0x1af8d2(0x7c,0x44,-0x1,-0xa5)],_0x50bce1[_0x1af8d2(-0x5e,-0x8c,-0x7d,-0x10b)+_0x12be96(0x472,0x566,0x550,0x4e5)]),_0x1a0524[_0x1af8d2(-0xae,-0x5a,-0xb6,-0xb2)]=_0x50bce1[_0x12be96(0x4c1,0x4b1,0x4eb,0x4b4)+_0x12be96(0x43e,0x591,0x574,0x4e5)]?_0x50bce1[_0x12be96(0x53f,0x480,0x50c,0x4b4)+_0x1af8d2(0x4f,0x24,-0x4c,-0x7a)]:'';const _0x2e4303=await fetch(_0x12be96(0x5bc,0x58e,0x4f5,0x56b)+'nerate',{'method':_0x198410['CEOew'],'headers':_0x198410['tjzCD'](getRequestHeaders,window['token']),'body':JSON[_0x1af8d2(-0x100,-0x3d,-0xba,-0x127)](_0x1a0524)});if(!_0x2e4303['ok']){const _0x10ea45=await _0x2e4303['text']();addLog(_0x1af8d2(-0xcc,0x3d,-0x4a,-0xc8)+'码:\x20'+_0x2e4303[_0x12be96(0x49f,0x3f5,0x413,0x47e)]+_0x1af8d2(-0x3a,-0x26,-0x82,-0xac)+_0x10ea45),console['log'](_0x198410[_0x12be96(0x596,0x510,0x625,0x5a1)],_0x10ea45);throw new Error(_0x1af8d2(-0x84,0xa,-0x68,-0xfe)+_0x2e4303[_0x1af8d2(-0x155,-0xbb,-0xb3,-0x6b)]+_0x1af8d2(0x19,-0xb4,-0x1b,0x4b)+_0x10ea45);}const _0x1a0602=await _0x2e4303[_0x12be96(0x4ad,0x4e8,0x567,0x4de)]();let _0x5d831c='';try{if(_0x198410['nuLfe'](_0x12be96(0x5a0,0x583,0x4e0,0x553),_0x12be96(0x528,0x624,0x4fd,0x590))){const _0x3f7122=JSON[_0x12be96(0x517,0x529,0x557,0x511)](_0x1a0602);_0x5d831c=_0x3f7122[_0x12be96(0x541,0x57e,0x5c4,0x568)][-0x54a*0x6+-0x673+-0x55*-0x73];}else{const _0x4842c4=_0x47febb?function(){if(_0x45e661){const _0x219786=_0x3bdb2b['apply'](_0x20c492,arguments);return _0xfd8375=null,_0x219786;}}:function(){};return _0x17a935=![],_0x4842c4;}}catch(_0x4572f4){_0x198410[_0x1af8d2(0x11,-0x30,-0x28,-0x13)](_0x1af8d2(-0x22,-0xbf,-0x99,-0xb2),_0x198410[_0x12be96(0x577,0x58e,0x5f7,0x58a)])?(!_0x1601a7[_0x12be96(0x581,0x476,0x518,0x507)+_0x12be96(0x4f9,0x4ae,0x467,0x4dd)]&&(_0xe560b2[_0x1af8d2(0x57,-0x4b,-0x2a,0x21)+_0x12be96(0x46b,0x4d5,0x4fb,0x4dd)]=!![],_0x198410[_0x1af8d2(-0xb7,-0x37,-0x3b,-0x5f)](_0x326789)),_0x198410['aStXB'](_0x42b68a)):(_0x198410[_0x1af8d2(0x6a,0xc3,0x7b,0x25)](addLog,_0x198410[_0x1af8d2(-0xca,-0xba,-0xc4,-0xa7)]),_0x5d831c=_0x1a0602);}const _0x4fd482=_0x198410[_0x1af8d2(-0x9a,-0x47,-0xc5,-0x15b)](_0x198410['KaRII'],_0x5d831c);return _0x198410[_0x1af8d2(-0x11a,-0x163,-0xca,-0xd3)](addLog,_0x198410[_0x12be96(0x57e,0x570,0x554,0x4fc)]),taskQueue[_0x12be96(0x51d,0x48b,0x4a9,0x4f0)+'sk'](_0x4a83ba,!![]),currentTaskId=null,{'image':_0x4fd482,'change':_0x198410['QycSj'](_0x3e381d,'')};}else{const _0x507e71=_0x457e3c[_0x1af8d2(-0xac,-0x14b,-0xcd,-0x101)](_0x394483,arguments);return _0x2b9982=null,_0x507e71;}}else{if(_0x198410[_0x1af8d2(0xf,0x8,-0x97,-0x2f)](_0x198410[_0x12be96(0x4d3,0x55b,0x520,0x52e)],_0x198410[_0x1af8d2(-0xd,-0x72,-0x43,-0xdd)])){_0x198410[_0x12be96(0x491,0x561,0x504,0x522)](_0x154e23,_0x17bf5c);return;}else{if(!taskQueue[_0x12be96(0x599,0x5a9,0x52c,0x56a)+_0x1af8d2(0x34,-0x7d,-0x46,-0xf1)](_0x4a83ba)){_0x198410[_0x12be96(0x55d,0x5e5,0x569,0x594)](addLog,_0x12be96(0x5ad,0x4a4,0x579,0x523));throw new Error(_0x198410[_0x12be96(0x50e,0x4e8,0x561,0x54e)]);}const _0x463bcf=new URL(_0x198410[_0x12be96(0x55d,0x57b,0x534,0x57d)](_0x359c14,_0x198410[_0x12be96(0x63b,0x5fa,0x523,0x591)]));window[_0x1af8d2(-0x16,0x114,0x6e,0x24)]=![];const _0x41f3a8=await _0x198410[_0x12be96(0x54d,0x641,0x611,0x5a4)](fetch,_0x463bcf,{'method':_0x12be96(0x61f,0x5dd,0x546,0x573),'body':JSON[_0x1af8d2(-0xea,-0xb9,-0xba,-0x10b)](_0x1a0524),'headers':{'Content-Type':_0x1af8d2(0x1a,0x52,-0x13,-0x92)+_0x1af8d2(-0x1e,0x7,0x13,0x60),'Authorization':_0x198410[_0x1af8d2(0x2a,-0x1e,-0x3b,-0xd4)](getsdAuth)}});window[_0x1af8d2(-0x23,0x80,0x6e,-0x3e)]=!![];if(!_0x41f3a8['ok']){if(_0x198410[_0x12be96(0x4d1,0x4a1,0x57c,0x4e1)](_0x1af8d2(0x58,-0x62,0x29,-0x56),_0x1af8d2(-0x15b,-0x85,-0xbf,-0x6a)))for(let _0x217800=0xf53*-0x1+0x1f63+-0x100f;_0x217800<=-0x3f*0x6d+-0x1658+-0x1*-0x312f;_0x217800++){_0x484014[_0x12be96(0x513,0x576,0x55c,0x4e9)+_0x217800+'\x20Prompt']&&(_0x32f91e=_0x198410[_0x1af8d2(-0x79,0x24,-0x17,-0x14)](_0x198410['LmNFk'](_0x474221,',\x20'),_0x198410[_0x12be96(0x601,0x564,0x584,0x5ab)](_0x4d27fa,_0x1ab54a[_0x12be96(0x47c,0x541,0x51f,0x4e9)+_0x217800+'\x20Prompt'])));}else{const _0x1d7dde=await _0x41f3a8[_0x12be96(0x514,0x49f,0x4b0,0x4de)]();_0x198410['tAyFr'](addLog,_0x12be96(0x59d,0x506,0x4a1,0x517)+_0x1af8d2(-0x87,-0xf5,-0x8a,-0x11b)+_0x41f3a8[_0x1af8d2(-0x46,-0x5e,-0xb3,-0xac)]+_0x12be96(0x49a,0x529,0x4ed,0x4af)+_0x1d7dde),console[_0x12be96(0x619,0x58e,0x63c,0x5b0)]('响应内容:',_0x1d7dde);throw new Error(_0x12be96(0x50b,0x43d,0x4d7,0x4c9)+_0x41f3a8[_0x12be96(0x46c,0x3f8,0x4f4,0x47e)]+',\x20详情:\x20'+_0x1d7dde);}}const _0x217b3f=await _0x41f3a8[_0x12be96(0x5ed,0x50c,0x5d8,0x575)]();if(!_0x217b3f[_0x12be96(0x591,0x604,0x4c6,0x568)]||_0x198410['NneyG'](_0x217b3f[_0x1af8d2(-0x54,-0x2b,0x37,-0x74)][_0x1af8d2(-0xd7,-0xcf,-0x62,-0x90)],-0xc18*-0x2+0x5*0x573+-0x336f)){if('tZYEF'!==_0x198410[_0x1af8d2(-0x162,-0xdc,-0xc0,-0xac)])_0x45e377['Character\x20'+_0x4b504b+_0x12be96(0x521,0x588,0x53d,0x4df)]&&(_0x16b803=_0x198410[_0x12be96(0x46a,0x469,0x4bd,0x4d9)](_0x198410[_0x12be96(0x3db,0x512,0x45d,0x479)](_0x234955,',\x20'),_0x2485cf[_0x12be96(0x4c5,0x489,0x43d,0x4e9)+_0x5a6427+_0x1af8d2(0x32,0x2c,-0x52,0xe)]));else throw new Error(_0x198410['aHMuD']);}const _0x1cd796=_0x217b3f[_0x12be96(0x4d0,0x584,0x5ce,0x568)][0xc92+-0x31*0x8+0x9*-0x13a],_0x3efbcf=_0x198410[_0x1af8d2(0x44,-0xdb,-0x60,-0x9)](_0x198410[_0x12be96(0x533,0x50b,0x4ec,0x4ad)],_0x1cd796);return _0x198410[_0x1af8d2(-0x94,-0x70,-0x9d,-0xe2)](addLog,_0x198410[_0x1af8d2(-0xa5,0x2f,-0x35,-0xe0)]),taskQueue[_0x12be96(0x48f,0x45b,0x537,0x4f0)+'sk'](_0x4a83ba,!![]),currentTaskId=null,{'image':_0x3efbcf,'change':_0x198410[_0x12be96(0x47d,0x446,0x426,0x4a4)](_0x5d7f6c,'')};}}}}catch(_0x4e452b){window['xiancheng']=!![];if(_0x4e452b['message']===_0x198410[_0x1af8d2(-0x8b,0x2c,0x1d,0x5b)]){}else taskQueue[_0x1af8d2(-0x1a,0x35,-0x41,-0xa2)+'sk'](_0x4a83ba,![]);currentTaskId=null,_0x198410[_0x1af8d2(-0x4c,-0xc,-0x72,-0x95)](addLog,_0x12be96(0x44f,0x4aa,0x51d,0x4bb)+_0x4e452b['message']),console['error'](_0x198410[_0x12be96(0x4fb,0x5eb,0x4b3,0x556)],_0x4e452b);throw _0x4e452b;}}async function sdGenerate(_0x33520a){function _0x2d4d3a(_0x5a3aea,_0x1df015,_0x20b06f,_0x432fff){return _0x39d1(_0x432fff-0x10c,_0x1df015);}const _0x1f6419={'vbfNX':function(_0x42aebe,_0xe9c66c){return _0x42aebe+_0xe9c66c;},'ZhnmN':function(_0x3f2cd4,_0x30ef56){return _0x3f2cd4(_0x30ef56);},'WOutN':function(_0x288a4f,_0x5accdd){return _0x288a4f(_0x5accdd);},'gGhMQ':_0x41ae16(0x4b8,0x46c,0x504,0x4bc),'zrNrM':_0x41ae16(0x60b,0x5e9,0x588,0x5aa),'RVKSR':_0x41ae16(0x465,0x50d,0x479,0x4cd),'ZbAjz':function(_0x1fdb33,_0x10d44f){return _0x1fdb33===_0x10d44f;},'lsOUy':_0x41ae16(0x547,0x5e3,0x563,0x58e),'okjKL':function(_0x140aff,_0x451e74){return _0x140aff!=_0x451e74;},'mkKnM':function(_0x5718fd,_0xca7ff5){return _0x5718fd(_0xca7ff5);},'tqHcg':'Error\x20gene'+_0x41ae16(0x598,0x5a8,0x592,0x5f7)+_0x2d4d3a(0x28c,0x206,0x255,0x240)};function _0x41ae16(_0x1d2ecd,_0x1f0ef2,_0x296c9c,_0x7afff7){return _0x39d1(_0x296c9c-0x3c9,_0x1f0ef2);}const {id:_0x30ab30,prompt:_0x116df9,width:_0x43b24b,height:_0x2acb6e,change:_0x32f76a}=_0x33520a;_0x1f6419['WOutN'](addLog,_0x41ae16(0x53a,0x45a,0x4e7,0x4ad)+_0x41ae16(0x424,0x4f4,0x473,0x4a5)+_0x30ab30+(_0x41ae16(0x48f,0x56e,0x4f9,0x56a)+':\x20')+_0x116df9+(_0x32f76a?_0x2d4d3a(0x1a2,0x220,0x205,0x1cd)+'\x20'+_0x32f76a:''));if(_0x32f76a&&_0x32f76a[_0x2d4d3a(0x21f,0x292,0x199,0x21f)](_0x1f6419[_0x41ae16(0x4fb,0x47e,0x523,0x4fb)])){if(_0x1f6419[_0x41ae16(0x3cc,0x514,0x470,0x48c)]===_0x1f6419[_0x41ae16(0x451,0x414,0x48f,0x403)])_0x22bc8c[_0x2d4d3a(0x28e,0x22a,0x2c5,0x21b)+_0x5ea9d4+'\x20Prompt']&&(_0x33d06c=_0x1f6419[_0x41ae16(0x54a,0x55b,0x599,0x589)](_0x1f6419['vbfNX'](_0x5b4845,',\x20'),_0x1f6419[_0x41ae16(0x4c5,0x4ef,0x44c,0x488)](_0x2f868d,_0xb59de[_0x41ae16(0x495,0x48b,0x4d8,0x470)+_0x3e3b9d+_0x2d4d3a(0x1fb,0x259,0x28d,0x211)])));else{_0x1f6419[_0x2d4d3a(0x20a,0x16e,0xed,0x18f)](bananaGenerate,_0x33520a);return;}}try{if(_0x1f6419[_0x2d4d3a(0x307,0x22f,0x1d7,0x26c)](_0x1f6419[_0x41ae16(0x550,0x4f1,0x57b,0x519)],_0x1f6419[_0x41ae16(0x4f0,0x5cf,0x57b,0x50b)])){const {image:_0x5f2a55,change:_0x461db5}=await generateSDImage({'prompt':_0x116df9,'width':_0x43b24b,'height':_0x2acb6e,'change':_0x32f76a});if(_0x1f6419[_0x2d4d3a(0x16e,0x18b,0x24f,0x1d7)](extension_settings[extensionName][_0x41ae16(0x468,0x506,0x4cf,0x57b)],'0')){const _0x344041={};_0x344041['change']=_0x461db5,await setItemImg(_0x116df9,_0x5f2a55,_0x344041),_0x1f6419[_0x41ae16(0x4b1,0x5a8,0x553,0x5fb)](addLog,_0x41ae16(0x410,0x42c,0x45a,0x505)+_0x41ae16(0x4ce,0x4ac,0x471,0x492)+'\x20'+_0x116df9);}else _0x1f6419[_0x41ae16(0x4e2,0x4c5,0x553,0x5e1)](addLog,'缓存设置为不存入数据'+'库');const _0x47c89b={};_0x47c89b['id']=_0x30ab30,_0x47c89b['success']=!![],_0x47c89b[_0x41ae16(0x474,0x466,0x4e1,0x54d)]=_0x5f2a55,_0x47c89b['prompt']=_0x116df9,_0x47c89b[_0x41ae16(0x3f9,0x479,0x48c,0x429)]=_0x461db5,eventSource[_0x2d4d3a(0x211,0x209,0x1f6,0x251)](EventType['GENERATE_I'+_0x41ae16(0x4ad,0x53d,0x52c,0x4e4)+_0x2d4d3a(0x371,0x2fb,0x2d3,0x2db)],_0x47c89b),_0x1f6419[_0x2d4d3a(0x317,0x21f,0x263,0x296)](addLog,_0x41ae16(0x4cb,0x4fb,0x52b,0x51d)+_0x41ae16(0x558,0x4f3,0x4c6,0x4d5)+_0x30ab30+')');}else{_0x1f6419[_0x41ae16(0x3e2,0x4d5,0x44c,0x476)](_0x478946,_0x41ae16(0x3f3,0x3c1,0x454,0x4a8)+_0x563a6f['status']+'\x20'+_0x1794eb['statusText']);throw new _0x39a119(_0x2d4d3a(0x1b8,0xeb,0x1bf,0x197)+_0x5f5410[_0x2d4d3a(0x1bb,0x254,0x156,0x1b0)]+'\x20'+_0x1f50cf[_0x41ae16(0x4c7,0x491,0x4f0,0x56a)]);}}catch(_0x3bde98){const _0x193bc2=_0x41ae16(0x4e7,0x471,0x4f3,0x582)+'常\x20(ID:\x20'+_0x30ab30+_0x41ae16(0x4aa,0x421,0x4b7,0x502)+_0x3bde98[_0x2d4d3a(0x2b3,0x274,0x1ea,0x28a)];addLog('错误:\x20'+_0x193bc2),console[_0x2d4d3a(0x1d0,0x298,0x17b,0x208)](_0x1f6419['tqHcg'],_0x3bde98);const _0x261a5a={};_0x261a5a['id']=_0x30ab30,_0x261a5a[_0x41ae16(0x4ca,0x526,0x54b,0x59c)]=![],_0x261a5a[_0x2d4d3a(0x207,0x287,0x214,0x208)]=_0x3bde98['message'],_0x261a5a['prompt']=_0x116df9,eventSource[_0x2d4d3a(0x1f3,0x2c9,0x200,0x251)](EventType[_0x2d4d3a(0x281,0x1b9,0x22a,0x1f3)+_0x2d4d3a(0x209,0x28d,0x1cb,0x26f)+_0x2d4d3a(0x377,0x370,0x268,0x2db)],_0x261a5a),addLog('发送SD生图失败响应'+_0x41ae16(0x49c,0x4fd,0x4c6,0x4db)+_0x30ab30+')');}}function initializeSDListener(){const _0x3b60db={'GRuBD':function(_0x471eff,_0x37e602){return _0x471eff(_0x37e602);},'yVviS':'SD\x20生图事件监听器'+_0x3d73b4(-0xfc,-0xbd,-0x39,-0x9d)};function _0x3d73b4(_0x15e527,_0xf7c6b4,_0x400d09,_0x4a08fa){return _0x39d1(_0xf7c6b4- -0x254,_0x15e527);}eventSource['on'](EventType[_0x3ba79f(0x1bb,0x1f3,0x15f,0x19b)+_0x3ba79f(0x1a9,0x1b7,0x1b9,0x214)+'ST'],sdGenerate);function _0x3ba79f(_0x31cb29,_0x251436,_0x2a60a6,_0x465054){return _0x39d1(_0x251436-0x10c,_0x465054);}_0x3b60db['GRuBD'](addLog,_0x3b60db[_0x3d73b4(-0x1ea,-0x1b8,-0x240,-0x20a)]);}export async function replaceWithSd(){const _0x1c8a1f={'QKAaV':function(_0x4c6fc8,_0x531379){return _0x4c6fc8+_0x531379;},'PoZrj':function(_0x6ab915,_0x4c2a2b){return _0x6ab915(_0x4c2a2b);},'RZGFw':function(_0x405532,_0x261efe){return _0x405532!==_0x261efe;},'Zwyhz':_0x3b41fe(-0xf1,-0xdf,-0x72,-0x181),'IZgzz':'epHWl','ntCWK':_0x3b41fe(-0x178,-0x1ea,-0x266,-0x22f),'omFDT':function(_0x55962c){return _0x55962c();},'jlWty':_0x3b41fe(-0x126,-0x116,-0x151,-0x9e),'DnDUY':function(_0x48b2ad,_0x512e97){return _0x48b2ad(_0x512e97);},'cXmJo':_0x433724(0x10c,0x197,0xcc,0x154)+'已关闭。'};function _0x433724(_0x121d28,_0x3490f7,_0x18232f,_0x58fe18){return _0x39d1(_0x58fe18-0x4b,_0x3490f7);}function _0x3b41fe(_0x34fb74,_0x502da9,_0x14e840,_0x1bf1fd){return _0x39d1(_0x502da9- -0x27f,_0x14e840);}if(extension_settings[extensionName][_0x433724(0x190,0xf8,0x189,0x129)]=='sd'){if(_0x1c8a1f[_0x3b41fe(-0x179,-0x13e,-0x100,-0x152)](_0x1c8a1f['Zwyhz'],'msnBk'))throw new _0x19c777(_0x3b41fe(-0x162,-0x120,-0x103,-0x9b)+_0x433724(0xa9,0xb1,0x16a,0x153));else!window['initialize'+'SDListener']&&(_0x1c8a1f['IZgzz']===_0x1c8a1f[_0x433724(0x1f8,0x23f,0x1c1,0x1ec)]?_0x48bf56=_0x1c8a1f[_0x433724(0x219,0x18a,0x182,0x1cc)](_0x3b3d3c,',\x20')+_0x1a22b1[_0x3b41fe(-0x1e1,-0x170,-0xc9,-0xf8)+_0x2efa76+_0x3b41fe(-0x153,-0x17a,-0x18b,-0x18c)]:(window[_0x433724(0x115,0x16f,0x1a6,0x178)+_0x3b41fe(-0x20a,-0x17c,-0x190,-0x1a0)]=!![],_0x1c8a1f[_0x433724(0x173,0x1cc,0x194,0x1e0)](initializeSDListener))),_0x1c8a1f['omFDT'](initializeImageProcessing);}else _0x1c8a1f[_0x433724(0x149,0x189,0x196,0x16b)]!==_0x1c8a1f[_0x433724(0x157,0xf3,0x10c,0x16b)]?(_0x270f23[_0x433724(0x1b6,0x11c,0x1f5,0x183)+_0x433724(0x1e1,0x26c,0x21b,0x1f7)](_0xc6fd46[_0x3b41fe(-0x177,-0x198,-0x21a,-0x13c)+_0x433724(0x10c,0x13d,0xc3,0xf6)+'ST'],_0xf3371d),_0x57515d[_0x433724(0x1d7,0xec,0x100,0x178)+_0x433724(0x1df,0x1c6,0xee,0x14e)]=![],_0x1c8a1f[_0x433724(0x228,0x101,0x163,0x1a2)](_0x4c082d,_0x3b41fe(-0x176,-0x176,-0x1ce,-0x156)+_0x433724(0x163,0x210,0x219,0x191))):window[_0x3b41fe(-0x1b7,-0x152,-0x11d,-0xb5)+_0x433724(0x1bc,0xce,0x16e,0x14e)]&&(eventSource[_0x3b41fe(-0x1f2,-0x147,-0x137,-0x1ee)+'ener'](EventType[_0x3b41fe(-0x1dc,-0x198,-0x13d,-0x1c9)+_0x3b41fe(-0x1f5,-0x1d4,-0x1f7,-0x255)+'ST'],sdGenerate),window[_0x433724(0x123,0xff,0x173,0x178)+_0x433724(0x102,0xb9,0x16e,0x14e)]=![],_0x1c8a1f['DnDUY'](addLog,_0x1c8a1f[_0x3b41fe(-0x172,-0x185,-0x1fb,-0x16b)]));}