(function(_0x583d93,_0x401f39){function _0x5dcf0c(_0x5b0c42,_0x444bc7,_0xf02eed,_0x34b4b5){return _0x4cec(_0x444bc7-0x2dc,_0x5b0c42);}const _0x5c2486=_0x583d93();function _0x5ce864(_0x5a9874,_0x2a02e7,_0x3a2a92,_0x33a9d1){return _0x4cec(_0x5a9874-0x15,_0x3a2a92);}while(!![]){try{const _0x7bfa0a=parseInt(_0x5ce864(0x233,0x1e3,0x1d1,0x1bf))/(-0x11*-0x157+0x25*-0x43+0x1*-0xd17)+-parseInt(_0x5ce864(0x2e8,0x256,0x26e,0x319))/(-0x1b41*0x1+0x2122+-0x9*0xa7)*(parseInt(_0x5dcf0c(0x605,0x5dc,0x5b3,0x608))/(0xaa1*0x3+-0x1*-0x3b6+-0x2396))+-parseInt(_0x5ce864(0x2ed,0x25c,0x354,0x318))/(0x24dd*0x1+0x14bf+-0x3998)*(parseInt(_0x5dcf0c(0x559,0x5b2,0x550,0x636))/(0x2211+0x18e1+0x1*-0x3aed))+parseInt(_0x5ce864(0x24b,0x272,0x2c1,0x269))/(0x1*-0xf17+0x12a7+-0x38a)+parseInt(_0x5dcf0c(0x560,0x5a4,0x5d8,0x524))/(-0x2266+-0x42d+0xcde*0x3)*(parseInt(_0x5ce864(0x30c,0x2f9,0x29c,0x3a7))/(-0x1f0a*-0x1+-0x146b*-0x1+-0x336d*0x1))+parseInt(_0x5ce864(0x224,0x28c,0x216,0x29d))/(0x1b30+0x1*0xa30+-0x2557)+parseInt(_0x5dcf0c(0x41d,0x4a3,0x442,0x40d))/(-0x137f+-0x1d03+0x1846*0x2)*(parseInt(_0x5dcf0c(0x560,0x517,0x569,0x49b))/(0x9a3+0x2320*-0x1+0x1988));if(_0x7bfa0a===_0x401f39)break;else _0x5c2486['push'](_0x5c2486['shift']());}catch(_0x1786ed){_0x5c2486['push'](_0x5c2486['shift']());}}}(_0x38a8,-0x54f91*-0x3+0x80f*0x2bb+-0xa3*0x254f));const _0x2c2e4e=(function(){let _0x2dcca6=!![];return function(_0x3d0863,_0x3f9832){const _0x137e09=_0x2dcca6?function(){function _0x28ef3a(_0x1f76c8,_0x16e5ff,_0x3522de,_0x18146c){return _0x4cec(_0x1f76c8-0x221,_0x18146c);}if(_0x3f9832){const _0x4ff983=_0x3f9832[_0x28ef3a(0x4ac,0x51a,0x424,0x4f0)](_0x3d0863,arguments);return _0x3f9832=null,_0x4ff983;}}:function(){};return _0x2dcca6=![],_0x137e09;};}()),_0x34a5d2=_0x2c2e4e(this,function(){function _0x3c9310(_0x1278e7,_0x43e834,_0xca44be,_0x4ea141){return _0x4cec(_0x4ea141-0x1ca,_0x43e834);}function _0x40398f(_0x240301,_0x7c39e3,_0x4b6339,_0x130931){return _0x4cec(_0x7c39e3- -0xc3,_0x4b6339);}return _0x34a5d2[_0x40398f(0xd4,0x12f,0x15c,0x11e)]()[_0x3c9310(0x460,0x42a,0x436,0x41a)]('(((.+)+)+)'+'+$')[_0x40398f(0x1ca,0x12f,0xe5,0x131)]()[_0x3c9310(0x434,0x4db,0x518,0x4bf)+'r'](_0x34a5d2)[_0x40398f(0x1ab,0x18d,0x1c9,0x1a4)](_0x3c9310(0x4a9,0x4f4,0x467,0x47d)+'+$');});_0x34a5d2();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';function _0x4cec(_0x31b9a6,_0x5339a6){_0x31b9a6=_0x31b9a6-(0x116d+-0x1*0x1bcf+0x81*0x18);const _0xfc68db=_0x38a8();let _0x587333=_0xfc68db[_0x31b9a6];if(_0x4cec['YcuwNI']===undefined){var _0x587338=function(_0x59c789){const _0x195298='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x39593f='',_0x2419bd='',_0xc8c36d=_0x39593f+_0x587338;for(let _0xe37bdd=0x11*-0x187+0x1*0x9fa+0x1*0xffd,_0x397fd8,_0xe1082e,_0x117dd4=-0x2de+0x28a+-0x4*-0x15;_0xe1082e=_0x59c789['charAt'](_0x117dd4++);~_0xe1082e&&(_0x397fd8=_0xe37bdd%(0xc5b+-0x23*-0xc7+-0x2*0x13c6)?_0x397fd8*(0x1*0x160f+-0x2019+0xa4a)+_0xe1082e:_0xe1082e,_0xe37bdd++%(0x1ff9+-0x1415+-0xbe0))?_0x39593f+=_0xc8c36d['charCodeAt'](_0x117dd4+(0x17e6+-0xf17+0x1*-0x8c5))-(-0x25ca+0x16dc+0xef8)!==-0xf7f*0x1+0x13*0x25+-0x44*-0x30?String['fromCharCode'](-0x1*0x256f+0x26ed+0x1*-0x7f&_0x397fd8>>(-(-0x57f+-0x15a7+-0x16*-0x13c)*_0xe37bdd&-0x17d7+0x1b0a+-0x10f*0x3)):_0xe37bdd:-0x1*-0xead+-0x156f+0x6c2){_0xe1082e=_0x195298['indexOf'](_0xe1082e);}for(let _0x14edfd=-0xbb7*-0x3+-0x1dac+0x579*-0x1,_0x2bd85a=_0x39593f['length'];_0x14edfd<_0x2bd85a;_0x14edfd++){_0x2419bd+='%'+('00'+_0x39593f['charCodeAt'](_0x14edfd)['toString'](0x14c5+0x392+-0x1847))['slice'](-(0x103*-0xd+0x136c*0x2+-0x19af));}return decodeURIComponent(_0x2419bd);};_0x4cec['oZuyzL']=_0x587338,_0x4cec['bPIBIq']={},_0x4cec['YcuwNI']=!![];}const _0x5c2546=_0xfc68db[-0x10c6+-0x666*0x4+0x3da*0xb],_0x1935b5=_0x31b9a6+_0x5c2546,_0x117338=_0x4cec['bPIBIq'][_0x1935b5];if(!_0x117338){const _0x4ad88d=function(_0x17b582){this['aozbSW']=_0x17b582,this['NmbqkD']=[0x771*0x1+-0x1e3f+0x16cf,0xa*-0x14b+0x406+0x8e8,-0x1cf*-0x3+-0x7eb*0x1+0x27e*0x1],this['skeqow']=function(){return'newState';},this['yrBwtL']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['hZpQbV']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4ad88d['prototype']['RnXOmO']=function(){const _0x4586e8=new RegExp(this['yrBwtL']+this['hZpQbV']),_0x3c915c=_0x4586e8['test'](this['skeqow']['toString']())?--this['NmbqkD'][-0x3e3*0x3+0x900+0x2aa]:--this['NmbqkD'][-0xaf6+0x4*0x841+-0x160e];return this['erMrNb'](_0x3c915c);},_0x4ad88d['prototype']['erMrNb']=function(_0x36a147){if(!Boolean(~_0x36a147))return _0x36a147;return this['RuiGVn'](this['aozbSW']);},_0x4ad88d['prototype']['RuiGVn']=function(_0xfd5bf1){for(let _0x5d1a3d=-0x143b+-0x190c+0x2d47,_0x8b65c5=this['NmbqkD']['length'];_0x5d1a3d<_0x8b65c5;_0x5d1a3d++){this['NmbqkD']['push'](Math['round'](Math['random']())),_0x8b65c5=this['NmbqkD']['length'];}return _0xfd5bf1(this['NmbqkD'][-0x7*-0x375+-0x2673+0x20*0x72]);},new _0x4ad88d(_0x4cec)['RnXOmO'](),_0x587333=_0x4cec['oZuyzL'](_0x587333),_0x4cec['bPIBIq'][_0x1935b5]=_0x587333;}else _0x587333=_0x117338;return _0x587333;}import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;function _0x38a8(){const _0x20cc14=['5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','6i635y+w5QIH5z6l5AsX6lsLoIa','rvLsCw8','zxvL','Ee1Qz1m','sMHyugS','AhL1vKi','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','Aw5PDgLHBgL6zq','Dg1qD1i','AerxDuO','l2fWAs9Zzc9Zzq','y2nJsuG','AgvPz2H0','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','nZeYndy1mLnQr2LoyW','u0HuD1C','BMvYyxrPB24','ic0Gq2HHBMDLoG','B2rLBcK6kIOG','mtuWn0jNEKD1Ca','q2HHCMfJDgvYia','txjVvMS','CLnfvw0','y2vZ','CNb1s2G','keHPCMvZiezPEa','A2Lprxm','Dgv4Da','AwjhCxO','C3rHDhvZvgv4Da','zNrWrue','Dc1TB2rLBa','AvPIsvq','Aw5Nx3n0CMvUzW','u1bpEKW','y2HHBMDL','CgfYC2u','swHbs0u','zty0ioAvSoAnRUwKHoEqHUoaGG','EeTisfu','C2vHCMnO','BuDRC1a','ifbYB21WDa','of9TB2rLBa','Ew5bAgO','uwDNCey','q1bZzxa','ktOQkIa','vMHLyMq','zMfJzv95B2XVDG','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','ChqPoIOQia','BI9QC29U','C2rFy3DPzhrO','wLHRuei','q3nVrge','EwvYCW','B3iGChjVBxb0oG','C2fTCgXLCL9Uyq','DxjS','sg9cCuG','5Q2J5zYO6k6+572U5QIH5z6l5lI6','5zon5BQu5yAf5A65oG','DhjPBq','5zU+5y+c5PwW5OQL5zgkcI0GkIO','rxjYB3iGz2vUzq','cI0GkIPbrgv0yq','wwPvv08','yxrFBgfZDf9Syq','qxnUDuq','zgvUB2LZAw5NxW','u0qGqvbjioI/LowBNUMuMq','ywrLDgfPBgvYxW','C2rvCMW','ywzTrLa','C2rFy2HPCMvZxW','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','C2tOR7FMSylNLj/LM77PLjNOR686ia','yxv0B191CMW','t0fXveG','zw5HyMXLx2HY','DhH0mMLTzW','Be9gww0','vfD6v3e','wvjZCMi','vxDSq0u','DeD0Dui','zw5LCG','AwXLCJOQkIa','A3DSEfG','l2fWAs9Zzc9Nzq','6lsF6z2I5lI6oIa','tufhrv9srvnqtW','E+s/RUwBVN0','C3rYAw5NAwz5','vMrnD0K','EMH2zfy','C2rFy2nOyxr1xW','tLnf','yxbWBhK','u0PftMe','AxnuyxnRsw5rDq','u2nLBMuGq29TCa','rNvItM0','CLDTzK0','mJiYmG','cI0GkIROTj/PNAlMJ5dNPlOG','C3rLChm','tgXTsMu','DxbKyxrLu3rHDa','C3rYzw5NDgG','vuHVBxq','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','zxjYB3i','vunqx3nK','Aw5MBW','y1v4sMi','ktOG','C2rFy3nLzwq','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','zeXpBfC','u2TPCdOQkIa','CxHMqLG','cI0TlqOJiYmG55sF','r0vorvjbvevFsq','kfjLC3rVCMuGrG','rxHrDwS','r2H2AhK','AML1z3vHBG','zu5Tv3q','cI0GkIPdBgLWia','se9ez0O','CvL3q2e','BwvZC2fNzq','yvPcqNC','EgLHBMnOzw5N','5yop5PwW5O2U44cc','wKz2Cwi','u3jUreK','kcGOlISPkYKRkq','s2LNDfm','BgrSthO','q2PVD3a','cI0GkIRMRAxMLBaGkfm','zw5HyMXLx2HYia','5BcD6k+v5l2C5lI65y6F5AEliejHCW','q0LmvKW','cI0GkIPdrKCGuW','zw1PDa','cI0GkIRPH43NU5JLUyxLUQyG','yxv0Aa','C2rFy3n0zxbZ','loAOOEwEI+s4UG','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','sLnptIdOP6pMNPdLPlhOTkxVViW','zMfJzsdKUlRLVidLKk8','Bw9KzwW','zertDu0','C2r3zwj1AEEuN+wBVUwpGG','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','n3vIEwPqtG','cI0GkIRMLl7LPkFLGi3NJOCG','44cc5zon5BQu5yAf5A65oIa','C3vJy2vZCW','rffhsg4','cI0GkIROHlJPG6JKV67LPi0G','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','zML4zwrqCM9TCa','tufhrv9srvfvrq','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','cI0GkIRNP43LRzaGkfm','mtbqterxAgW','C2rdzMDty2fSzq','A2LW','mtbMB2nMruW','C2v0DgLUz3nZlG','mtiZmtuWnhbWyxvRva','Cgf5C3rFy2HHDa','mhWXFdn8mNW1Fa','Chnnrwi','Bg9Hza','C2rFy2rLBM9PCW','AxPLktOQkIa','AhjFC2nHBgu','B3nPDgLVBG','ywrKvgfZAW','y2fJAgu','ifn0CMvUz3rOkq','ywnLCYK6kIOG','Aw1Hz2u6','6zsz6k+VoIa','BuzOuMW','D1rNzNq','Df9LBMq','Aw5JBhvKzxm','y2XPzw50','q0Xjuf9ZDg9WxW','BgrQrLO','AgTvBMi','C2rFC3rVCf9Nzq','C3rFy2HHDhu4xW','zgf0ytPPBwfNzq','rMnyCNG','Afvqvhe','yNPYrLu','y29UC3rYDwn0BW','CMvTB3zLtgLZDa','odC1mtKYoevIDfftsa','yNfYtey','zuLxs1y','DgjwrfG','og4UChq','Dg9Rzw4','5lIT55QeihbYB21WDooaGG','icHjrdOG','B3zLCNjPzgvFCW','odG5nty5Cxv1sg95','y29TCgXLDgvuyq','Aw1Hz2vZ','oIOQia','wwD0D3q','DtHFC2rFyxv0Aa','q2jYB2y','wwvzDMm','cI0GkIRPQ5JMUixKV67LPi0G','kfvWC2nHBguGrG','DgvWCYK6kIOG','zML4','C2rFy2fKzxrHAq','DeDbrKK','Eev2zgi','BMvYyxrL','AgvrzMu','ExvZAgvPzf9Zza','wKTlELC','wwDcrNO','CuXlAgC','mJi0mtbqr2XAvxq','5Q2J5zYO6ycA6l+hC2r3zwj1','EgDzA1O','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','C2rFDMfL','of91ChnJywXLCG','r1PRwge','surktK4','BgvUz3rO','vgH0B0S','Dhj1zq','5Q2J6z2I5O+q56s6icHqCM9T','Bg9N','5yYw5lI6igrHDgeGvvi','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','r3fYsK4','kerPDMLKzv9YBW','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','B21WDa','C2rFy3vWC2nHBa','BgvY','vNnmrei','kfnHBxbSzxiPoG','lI4U','zxr0Aw5NCW','y2zNx3nJywXL','yw1L','BgvZktOG','5BEY5ywZ6zET44cc','CNvUBMLUzW','tMjRqwO','77Ym6k+35Qoa5P+LC2r3zwj1','6k+V44cc54Q25Ocb56cboIa','l3nKyxbPl3yXlW','ExvZAgu','uhvcruO','5yIh5O2I5QIH5z6l5AsX6lsLoIa','AMPlA0q','y2vZioIeUoMdQos/RUwKJsdKUlO','Cevlsxa','BLfdAwW','ywzqq3m','Dg9tDhjPBMC','cI0GkIRLSlRLR7GGkfm','C3rHDhvZ','suq6ia','DuXmEvG','C2rFyxv0Aa','C2rFy2nSAxbFCW','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','y2fSztOQkIa','sevlzKK','Efbdv2K','z1jsCg4','B2znzei','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','yK1UA2K','Ag1uDMK','BMvNyxrPDMvqCG','q1PZsu0','tLDksK0','qvfux3nK','Cgf5Bg9Hza','ANnVBG','kerLBM9PC2LUzW','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','Au9HtNO','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','5BEY5yID5AEl5yYw44cc','qMTtBg4','mJK2ody5nxDQCenrwq','y2vOyNa','uvvyuwq','Bw9Kzq','C2vLza','l3bUzZTIyxnLnG','ChjVBxb0','u0rmAxn0zw5LCG','6zQp5PY6kc0Xkq','lcdOR6BMG4u6ia','v2vuDuy','cI0GkIRPH4FMOlFMLRNMS5uG','rhf6B1m','y21VzgvSmJiYmG','56cboIa','mta5ndmZDKfgvuDb','BM1Wwvm','vhfrrLC','ue5bvfq','CMvZDg9Yzv9Myq','z0TvsNO','C2rFy2HLAwDODa','zKjzAM4','Aw1Hz2u'];_0x38a8=function(){return _0x20cc14;};return _0x38a8();}async function generateSDImage({prompt:_0x4d084d,width:_0x110878,height:_0x1dfc34,change:_0x4edde6}){const _0x361970={'xgYkZ':function(_0x2e1f1a){return _0x2e1f1a();},'HODgJ':function(_0x3c7e07){return _0x3c7e07();},'VdMwI':function(_0x843068,_0x5b82b7){return _0x843068(_0x5b82b7);},'AsnuD':'标准模式:\x20使用请求'+_0x4c4d6e(0x123,0xf3,0x129,0x87),'cehbp':_0x4c4d6e(0x80,0x4b,0x19,0xbc),'hmTvi':'任务已取消','NbkAj':'(((.+)+)+)'+'+$','rSEUm':function(_0x3d37e3,_0x5cf1bf){return _0x3d37e3(_0x5cf1bf);},'tGtuB':function(_0x218431,_0x4366ad){return _0x218431+_0x4366ad;},'cUxJb':function(_0x3e4e1d,_0x1d98e1){return _0x3e4e1d+_0x1d98e1;},'ldlLz':function(_0x197c24){return _0x197c24();},'ZFvqb':function(_0x3c637a,_0x5401b6){return _0x3c637a+_0x5401b6;},'ThtoK':function(_0x28184a,_0x1da7f8){return _0x28184a||_0x1da7f8;},'uLLyX':function(_0x4afad8,_0x27f4e2){return _0x4afad8>_0x27f4e2;},'bMnki':'...','QUXQd':function(_0x3b8391,_0x4848d8){return _0x3b8391(_0x4848d8);},'tbVDX':function(_0x505797,_0x3256f1){return _0x505797(_0x3256f1);},'ldjFZ':function(_0x5a753f,_0x102948){return _0x5a753f(_0x102948);},'PNATT':_0x360ee3(0x66e,0x644,0x6f3,0x648)+_0x4c4d6e(0x106,0x10c,0x1a8,0x69),'Vhebd':function(_0x5a1424,_0x4695c8){return _0x5a1424===_0x4695c8;},'hyuVB':function(_0x207760,_0x1acc39){return _0x207760(_0x1acc39);},'xEvdb':function(_0x4bc79f,_0x227b81){return _0x4bc79f(_0x227b81);},'HEKfI':_0x4c4d6e(0x32,-0x55,0x8e,0x57)+_0x4c4d6e(0x4d,0xda,0x9,0xa2),'JxFNQ':function(_0x5c5568,_0x1308f5){return _0x5c5568(_0x1308f5);},'bqrLF':function(_0x5d3ad2,_0x576735){return _0x5d3ad2<=_0x576735;},'ZXkPB':function(_0x255724,_0x5724e2){return _0x255724+_0x5724e2;},'WCXgX':function(_0x569bca,_0x1b6da0){return _0x569bca+_0x1b6da0;},'HYrDP':function(_0x3c8181,_0x1d26d0){return _0x3c8181!==_0x1d26d0;},'ibGqz':_0x4c4d6e(0x10e,0x72,0xc5,0x175),'eIWKV':_0x4c4d6e(0x9d,0xae,0x51,0xa0),'cccIH':_0x4c4d6e(0x70,-0x1a,-0x37,0xbd),'ExQuk':_0x4c4d6e(0x34,0xa9,-0x13,0x48),'rXNUI':function(_0x2189fb,_0x589745){return _0x2189fb+_0x589745;},'kwlxX':function(_0x31c000,_0x492ea5,_0x4b4369,_0x54a4a1,_0xea79a1,_0x4e15f4){return _0x31c000(_0x492ea5,_0x4b4369,_0x54a4a1,_0xea79a1,_0x4e15f4);},'lOFYm':function(_0x27e064,_0x3943c3,_0xa7db33){return _0x27e064(_0x3943c3,_0xa7db33);},'VsLDB':_0x360ee3(0x656,0x6b2,0x6b6,0x685),'YeYvc':function(_0x528e90){return _0x528e90();},'pEKIp':_0x4c4d6e(0xce,0x152,0x27,0x85),'KRGNE':function(_0x5e284b,_0x352e89,_0x2e99f4){return _0x5e284b(_0x352e89,_0x2e99f4);},'AlqVR':_0x4c4d6e(0xa8,0x4b,0x12e,0x12d)+_0x360ee3(0x627,0x5d4,0x69c,0x619),'NWJJM':'POST','nQCil':function(_0x94eff2,_0x41f433){return _0x94eff2(_0x41f433);},'OGFOW':_0x4c4d6e(0x42,0x14,-0x5f,0x5c)+_0x360ee3(0x671,0x5d5,0x6e0,0x674),'gRRpn':'extension_'+_0x4c4d6e(0xfd,0xd3,0x194,0x158)+'sd_cchatu_'+_0x360ee3(0x633,0x662,0x5e3,0x5e4),'UwlCE':function(_0x2efbfe,_0x268c3b){return _0x2efbfe!=_0x268c3b;},'CsoDa':function(_0xf67ee,_0x591e05){return _0xf67ee!==_0x591e05;},'MroVk':_0x4c4d6e(0x10d,0x180,0xf4,0x137),'bPJpP':'KpwAR','LjfGu':function(_0xdb4bca,_0x4e7d76,_0x3970a0){return _0xdb4bca(_0x4e7d76,_0x3970a0);},'tGAFI':_0x360ee3(0x612,0x646,0x656,0x5e5)+'t-model','QggpF':_0x4c4d6e(-0x14,0x5d,-0xb1,0x84),'FubNm':function(_0x57d13f,_0x1c528c){return _0x57d13f!==_0x1c528c;},'WUVeC':'Fzanx','hplwN':function(_0x53ceb5,_0x58d2d9){return _0x53ceb5!=_0x58d2d9;},'PuBEJ':function(_0x19b751,_0x277ae5){return _0x19b751(_0x277ae5);},'QeEJJ':function(_0x2f934c,_0x25c1b3){return _0x2f934c===_0x25c1b3;},'jjKkD':'egOHK','LlmJe':function(_0x46dd57,_0x49c030){return _0x46dd57(_0x49c030);},'DqzoS':function(_0x5b40f9,_0x962fc5){return _0x5b40f9!==_0x962fc5;},'aZBBw':function(_0x3d4b56,_0x41f189){return _0x3d4b56!==_0x41f189;},'Cjowp':function(_0x431545,_0x59bcbe){return _0x431545>=_0x59bcbe;},'Ghvhy':_0x4c4d6e(0x49,-0x17,-0x4f,-0x3a),'TWzWq':function(_0x5810d7,_0x2dd209){return _0x5810d7(_0x2dd209);},'CZsIM':function(_0x162b23,_0x46ef70){return _0x162b23==_0x46ef70;},'xKHHU':_0x4c4d6e(-0x8,0x96,0x9f,-0x31),'WeTuF':function(_0x2f93a9,_0xf6f69e){return _0x2f93a9(_0xf6f69e);},'FcXrx':function(_0x564930,_0x4507b4){return _0x564930(_0x4507b4);},'hUPTq':_0x4c4d6e(0x96,0x45,0x44,0x41)+_0x4c4d6e(0xe9,0x11b,0xef,0x5d),'IDJNN':function(_0x4b6425,_0x25969a,_0x314100){return _0x4b6425(_0x25969a,_0x314100);},'SJENa':_0x4c4d6e(0x7f,0x6,0xbb,0xa1)+_0x360ee3(0x6db,0x667,0x69a,0x6e3),'YRsrb':_0x360ee3(0x5f7,0x576,0x5db,0x5b6),'iZbIT':_0x4c4d6e(0x2c,-0x4b,0xc3,0x1c),'Cbrof':'iXVfe','iOaNz':_0x4c4d6e(0xb,0x57,-0x1,-0x1f),'nmpYS':function(_0x24bb10,_0xd7e070){return _0x24bb10===_0xd7e070;},'JhXPk':function(_0x5e7742,_0x2f5dad){return _0x5e7742!==_0x2f5dad;},'ZKKzW':_0x360ee3(0x652,0x6ac,0x674,0x67b),'qYwCa':_0x4c4d6e(0x115,0xe3,0xcb,0x16b)+_0x360ee3(0x618,0x5ae,0x5c6,0x5e8),'qxfBX':_0x360ee3(0x6b9,0x6f2,0x6e3,0x625)+_0x4c4d6e(-0x23,-0x25,0x15,-0x90)+_0x360ee3(0x6bc,0x718,0x6a2,0x6c1),'KigtS':_0x4c4d6e(0xa8,0xbb,0xb3,0x98)+_0x4c4d6e(-0x19,-0x99,-0x57,-0xaa),'fBYjn':_0x4c4d6e(0xbd,0x32,0xfa,0x56),'mGksP':function(_0x514100,_0x424e6e){return _0x514100(_0x424e6e);},'ftpEA':_0x4c4d6e(0x8c,0x112,-0x2,0x78),'aNrCx':'JSON\x20解析失败，'+'尝试作为原始\x20Bas'+_0x360ee3(0x62e,0x5ea,0x64b,0x5bb),'heQfe':function(_0x296d36,_0x50a0dc){return _0x296d36===_0x50a0dc;},'Ygtwt':_0x360ee3(0x692,0x714,0x6bd,0x664),'ynAhj':_0x4c4d6e(0x30,-0x24,-0x14,-0xc)+_0x4c4d6e(0xd6,0x42,0x51,0xd9),'AHYXl':'data:image'+_0x360ee3(0x5f4,0x5d0,0x637,0x565)+'4,','bzrFU':_0x360ee3(0x5e9,0x5f5,0x571,0x688)+_0x4c4d6e(-0x5,-0x61,-0x60,-0x2e)+'L。','CILVL':_0x4c4d6e(0x100,0x74,0x1a7,0x6c)+'4','RHjWb':function(_0x5f8483,_0x3b2c9c){return _0x5f8483(_0x3b2c9c);},'zhvdV':_0x360ee3(0x649,0x5ae,0x6d2,0x682)+'rating\x20ima'+'ge:'};_0x361970[_0x4c4d6e(0xdb,0xcf,0x74,0x144)](clearLog);const _0x30d34e=taskQueue[_0x360ee3(0x6c1,0x620,0x650,0x677)]({'name':_0x361970[_0x360ee3(0x691,0x6f6,0x67b,0x65c)](_0x361970[_0x4c4d6e(-0x9,-0xc,-0x57,-0x2)](_0x4d084d,'')['substring'](-0x198+0x8*-0x6f+0x510,0x1a83+-0x271+-0xe*0x1b6),_0x4d084d&&_0x361970[_0x4c4d6e(0x1c,-0x5e,0xa7,-0x51)](_0x4d084d['length'],-0xf8*0x22+-0x93c+0x2a4a)?_0x361970[_0x360ee3(0x5e0,0x5c6,0x610,0x5da)]:''),'type':TaskType['SD'],'prompt':_0x4d084d});currentTaskId=_0x30d34e;let _0x116089=_0x4edde6;function _0x360ee3(_0x157cdb,_0x52238d,_0x1cd7d8,_0x54dd06){return _0x4cec(_0x157cdb-0x3e0,_0x52238d);}_0x4d084d=processCharacterPrompt(_0x4d084d),_0x4edde6=_0x361970['QUXQd'](processCharacterPrompt,_0x4edde6),_0x4d084d=await _0x361970[_0x4c4d6e(0x64,0x10,0x18,0x11)](stripChineseAnnotations,_0x4d084d),_0x4edde6=await _0x361970[_0x360ee3(0x667,0x707,0x6f1,0x6a2)](stripChineseAnnotations,_0x4edde6);const _0x11518d=extension_settings[extensionName][_0x4c4d6e(0x97,0x17,-0x8,0x68)]['trim'](),_0x5d4b49=extension_settings[extensionName];_0x361970[_0x4c4d6e(0x120,0x167,0x178,0xe9)](addLog,_0x360ee3(0x5a8,0x5be,0x637,0x577)+_0x4c4d6e(0xc5,0xc9,0x169,0x14b)+'端为'+_0x5d4b49[_0x360ee3(0x6cb,0x64b,0x6a3,0x637)]+_0x4c4d6e(0xe6,0x10e,0x4e,0x58)+_0x5d4b49[_0x4c4d6e(0xaf,0x107,0x47,0xcf)+_0x360ee3(0x633,0x5c8,0x5a1,0x5e7)]);const _0x58bc60=_0x4edde6&&_0x4edde6[_0x4c4d6e(0x8d,0x67,0xd9,0xe2)]()!==''?_0x4edde6:_0x4d084d;_0x361970[_0x4c4d6e(0x113,0xdb,0x85,0x19c)](addLog,'用于生成的Tag:\x20'+_0x58bc60);let _0x5ed822=![];_0x58bc60[_0x360ee3(0x6ca,0x6d9,0x6fc,0x6ef)](_0x361970[_0x360ee3(0x601,0x657,0x5c5,0x649)])&&(_0x361970[_0x360ee3(0x638,0x6cd,0x5a4,0x628)](_0x4c4d6e(0x56,0x17,-0x5,0x8a),_0x360ee3(0x610,0x635,0x5a1,0x606))?_0x5ed822=!![]:(!_0x195500[_0x4c4d6e(0x55,0x50,0x33,0x84)+_0x4c4d6e(0x3c,-0x19,-0x26,0xcb)]&&(_0x162182[_0x4c4d6e(0x55,0x27,0x25,0xbf)+_0x4c4d6e(0x3c,0x13,0x92,0xb6)]=!![],_0x361970[_0x360ee3(0x5a9,0x59e,0x521,0x56d)](_0x2cbf3b)),_0x361970[_0x360ee3(0x68b,0x6e9,0x62c,0x732)](_0x3c50b9)));_0x361970[_0x360ee3(0x60d,0x5ef,0x659,0x60f)](addLog,_0x4c4d6e(-0x10,-0x29,0x78,-0xb)+_0x360ee3(0x5b8,0x621,0x5bc,0x58e)+_0x360ee3(0x5c3,0x58c,0x5f3,0x548)+_0x5ed822);let _0x50964e={},_0x5622ec='',_0x5a8917='';if(_0x5ed822){_0x361970['xEvdb'](addLog,_0x361970[_0x4c4d6e(0x21,0x14,0x54,-0x9)]),_0x50964e=_0x361970['JxFNQ'](parsePromptStringWithCoordinates,_0x58bc60),_0x5622ec=_0x50964e[_0x361970[_0x360ee3(0x601,0x672,0x590,0x68f)]];for(let _0x2d7010=-0xc7c+-0xf7d+-0xdfd*-0x2;_0x361970[_0x360ee3(0x6d8,0x6b8,0x728,0x663)](_0x2d7010,0x1108+0xa7*0xe+-0x1a26);_0x2d7010++){_0x50964e[_0x4c4d6e(0x62,0x9c,0x5f,0x7e)+_0x2d7010+'\x20Prompt']&&(_0x5a8917=_0x361970[_0x4c4d6e(0x84,0x129,0x104,0x12)](_0x361970['WCXgX'](_0x5a8917,',\x20'),_0x50964e['Character\x20'+_0x2d7010+_0x4c4d6e(0x78,0x76,-0x2a,0x5f)]));}}else addLog(_0x361970['AsnuD']),_0x5622ec=_0x58bc60;let {modifiedPrompt:_0xdd51d,insertions:_0x11ca98}=await prompt_replace(_0x5622ec,_0x5a8917);if(_0x5ed822){if(_0x361970['HYrDP'](_0x361970[_0x360ee3(0x624,0x5c6,0x653,0x5e6)],_0x361970[_0x4c4d6e(0x11f,0x183,0x86,0x80)]))for(let _0x488cdd=0x1628+0xa3*-0xe+-0xd3d;_0x361970['bqrLF'](_0x488cdd,-0x151c+0x1*-0x1dfe+0x331e);_0x488cdd++){_0x361970[_0x4c4d6e(0x59,0xe,0x61,0x30)]===_0x361970[_0x360ee3(0x686,0x64f,0x6c3,0x630)]?_0x23f358=![]:_0x50964e[_0x360ee3(0x61c,0x5a1,0x600,0x685)+_0x488cdd+_0x360ee3(0x632,0x668,0x5da,0x624)]&&(_0xdd51d=_0x361970['ZFvqb'](_0x361970['rXNUI'](_0xdd51d,',\x20'),_0x361970['QUXQd'](prompt_replace_for_character,_0x50964e[_0x360ee3(0x61c,0x5f8,0x5d5,0x688)+_0x488cdd+_0x360ee3(0x632,0x614,0x597,0x673)])));}else _0x57442b=_0x361970[_0x4c4d6e(0xad,0xdc,0x8f,0x48)](_0x3de00e,_0x3ec108);}let _0x1f6357=await _0x361970[_0x4c4d6e(0xa7,0x11b,0xa3,0x1f)](zhengmian,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x4c4d6e(-0x17,0x66,0x82,-0x6c)]][_0x360ee3(0x6af,0x667,0x660,0x71b)+'t'],_0xdd51d,extension_settings[extensionName][_0x4c4d6e(0x10,0xb2,-0x75,0x3b)][extension_settings[extensionName][_0x4c4d6e(-0x17,-0x23,-0xa3,0xa)]][_0x4c4d6e(0xf5,0xb6,0x60,0xad)+_0x360ee3(0x6c9,0x6be,0x634,0x70b)],extension_settings[extensionName][_0x4c4d6e(0x2b,-0x42,-0x51,-0x13)],_0x11ca98),_0x58d778=await _0x361970[_0x4c4d6e(0xa0,0x33,0x6e,0xa)](fumian,extension_settings[extensionName][_0x4c4d6e(0x10,-0x31,-0x88,-0x84)][extension_settings[extensionName][_0x360ee3(0x5a3,0x5f7,0x5bf,0x5a0)]][_0x4c4d6e(0x28,-0x74,-0x6b,0xb8)+_0x360ee3(0x5ba,0x619,0x55f,0x5aa)],extension_settings[extensionName][_0x4c4d6e(0xc0,0xa6,0x15c,0x100)]);_0x361970[_0x4c4d6e(0xad,0x13e,0xe0,0xab)](addLog,_0x4c4d6e(0xa9,0x3b,0x5,0xd4)+_0x58d778),extension_settings['sd'][_0x361970[_0x4c4d6e(0x3,-0x19,0x6f,-0x6f)]]=_0x11518d,await _0x361970[_0x4c4d6e(-0x21,0x54,-0x4a,-0x99)](saveSettingsDebounced);try{if(_0x5d4b49[_0x360ee3(0x6cb,0x634,0x67c,0x6cf)]===_0x361970[_0x4c4d6e(0x15,0xa4,0x2b,0x90)]){const _0x4388f5={};_0x4388f5[_0x4c4d6e(0xe4,0x57,0x11d,0x8f)]=_0x5d4b49[_0x360ee3(0x6d0,0x75c,0x677,0x63c)+'sd_auth']?_0x5d4b49[_0x360ee3(0x6d0,0x6a5,0x6af,0x649)+'sd_auth']:'',_0x4388f5['url']=_0x11518d;const _0x18214d=await _0x361970['KRGNE'](fetch,_0x361970['AlqVR'],{'method':_0x361970[_0x4c4d6e(0x2a,-0x53,0x21,0x60)],'body':JSON[_0x360ee3(0x666,0x5f3,0x6fa,0x68d)](_0x4388f5),'headers':_0x361970['nQCil'](getRequestHeaders,window[_0x360ee3(0x6dc,0x687,0x655,0x755)])});if(!_0x18214d['ok']){_0x361970[_0x360ee3(0x667,0x5d1,0x657,0x6a7)](addLog,_0x360ee3(0x608,0x69d,0x576,0x57e)+_0x18214d['status']+'\x20'+_0x18214d['statusText']);throw new Error(_0x4c4d6e(0x4e,0x8c,0xe7,0x21)+_0x18214d[_0x4c4d6e(0x1a,0xa4,0x4a,-0x7f)]+'\x20'+_0x18214d[_0x4c4d6e(0x6b,0x79,-0x1,0x44)]);}let _0x4f587c=await _0x18214d[_0x4c4d6e(0x69,0x108,0x78,0x6a)]();console[_0x360ee3(0x5b4,0x522,0x54d,0x5c9)](_0x361970['OGFOW'],_0x4f587c),console[_0x360ee3(0x5b4,0x657,0x58c,0x654)](_0x361970[_0x4c4d6e(0x23,0xc7,0x44,-0x67)],_0x5d4b49[_0x4c4d6e(0xaf,0x108,0x9b,0xee)+_0x4c4d6e(0x79,0x12,0x36,0x0)]);if(_0x361970[_0x4c4d6e(0xa3,0x7c,0xac,0x114)](_0x4f587c,_0x5d4b49[_0x360ee3(0x669,0x64d,0x638,0x6fe)+_0x4c4d6e(0x79,0x10f,0x62,0x101)])){if(_0x361970[_0x360ee3(0x63f,0x5c2,0x65f,0x66a)](_0x361970[_0x360ee3(0x61d,0x653,0x5a0,0x582)],_0x361970['bPJpP'])){addLog(_0x4c4d6e(0x8b,0xca,0x84,0xd2)+_0x5d4b49[_0x4c4d6e(0xaf,0x8,0x27,0x67)+_0x4c4d6e(0x79,0x28,0x9c,0x61)]+_0x4c4d6e(0x5,-0x57,-0x98,-0x30)),toastr[_0x360ee3(0x67b,0x65c,0x6cb,0x6bc)](_0x360ee3(0x5b9,0x551,0x65b,0x5ea)+_0x5d4b49[_0x360ee3(0x669,0x674,0x5f3,0x6c4)+_0x360ee3(0x633,0x642,0x5da,0x60b)]);const _0x54c21c={};_0x54c21c[_0x4c4d6e(0xe4,0x17f,0x164,0x161)]=_0x5d4b49[_0x360ee3(0x6d0,0x6a9,0x666,0x69d)+_0x360ee3(0x5d7,0x57d,0x5f6,0x5db)]?_0x5d4b49['st_chatu8_'+'sd_auth']:'',_0x54c21c[_0x4c4d6e(0x89,0xb,-0xd,0x90)]=_0x11518d,_0x54c21c[_0x4c4d6e(0xea,0x7d,0x100,0x100)]=_0x5d4b49[_0x4c4d6e(0xaf,0x6f,0x79,0xa7)+_0x4c4d6e(0x79,0x6f,-0x23,0x10b)];const _0x16a43f=await _0x361970['LjfGu'](fetch,_0x361970[_0x360ee3(0x59f,0x51e,0x5bd,0x52d)],{'method':_0x361970[_0x4c4d6e(0x2a,0xc5,-0x6e,0x3)],'body':JSON[_0x360ee3(0x666,0x5e0,0x66c,0x6da)](_0x54c21c),'headers':_0x361970['rSEUm'](getRequestHeaders,window[_0x4c4d6e(0x122,0xfe,0x12e,0x82)])});if(!_0x16a43f['ok']){if(_0x361970[_0x4c4d6e(0x7e,0xcd,0x4a,0x5c)](_0x361970['QggpF'],_0x361970[_0x4c4d6e(0x7b,-0x1f,0xa7,0x34)])){addLog(_0x4c4d6e(0x12,-0x61,0x81,-0x10)+_0x16a43f[_0x360ee3(0x5d4,0x53b,0x647,0x59d)]+'\x20'+_0x16a43f[_0x360ee3(0x625,0x57f,0x5c8,0x68c)]);throw new Error(_0x4c4d6e(0x12,0x39,0x21,-0x4f)+_0x16a43f[_0x360ee3(0x5d4,0x674,0x662,0x573)]+'\x20'+_0x16a43f['statusText']);}else{if(_0x2376c1){const _0x56a745=_0x1ce665[_0x4c4d6e(0xb1,0x77,0x56,0xa6)](_0x32fd46,arguments);return _0x350494=null,_0x56a745;}}}toastr['info']('设置模型...为'+_0x5d4b49[_0x360ee3(0x669,0x66f,0x5d5,0x61b)+_0x4c4d6e(0x79,-0x19,0x1f,0x3e)]+'成功');}else _0x361970[_0x4c4d6e(0xad,0xbf,0xc5,0x23)](_0x42ef9e,_0x361970[_0x360ee3(0x64d,0x68d,0x6e1,0x6c0)]),_0xfff820=_0x59b448;}}else{if(_0x361970[_0x4c4d6e(0xb5,0x4c,0x107,0x156)](_0x361970['WUVeC'],'Fzanx')){_0x361970[_0x4c4d6e(0xad,0xe5,0x46,0x3f)](_0x2c6e77,'获取模型失败:\x20'+_0x25a666[_0x360ee3(0x5d4,0x5fc,0x629,0x53c)]+'\x20'+_0x52b78b[_0x4c4d6e(0x6b,0xc7,-0x29,-0x27)]);throw new _0x1a518f(_0x360ee3(0x608,0x585,0x57c,0x5f2)+_0x3f928f[_0x360ee3(0x5d4,0x622,0x60f,0x66d)]+'\x20'+_0x108c6b[_0x360ee3(0x625,0x5c3,0x5b3,0x69c)]);}else{let _0x1e6a9d=await _0x361970[_0x360ee3(0x5f1,0x5b4,0x5d3,0x5dd)](getSDMode,_0x11518d);if(_0x361970['hplwN'](_0x1e6a9d,_0x5d4b49[_0x360ee3(0x669,0x6d1,0x6ae,0x62d)+_0x4c4d6e(0x79,0x3b,0xd2,0x52)])){if(_0x361970['Vhebd'](_0x360ee3(0x6a5,0x740,0x71d,0x722),_0x4c4d6e(0x7c,0x11c,0xd3,0x8d))){_0x361970[_0x4c4d6e(0xad,0xe0,0x13b,0x70)](_0x2fd0cd,_0x361970[_0x4c4d6e(0x36,-0x4d,0xd2,0x7b)]);throw new _0x48f241(_0x361970[_0x360ee3(0x5e1,0x5a0,0x576,0x5ee)]);}else _0x361970[_0x4c4d6e(0x11,0xe,0x74,-0x73)](addLog,_0x4c4d6e(0x9a,0xa3,0xc1,0xff)+_0x5d4b49[_0x360ee3(0x669,0x64d,0x61b,0x691)+_0x360ee3(0x633,0x590,0x5e7,0x6cf)]+_0x360ee3(0x5bf,0x612,0x63f,0x654)),await setSDMode(_0x11518d,_0x5d4b49[_0x360ee3(0x669,0x6a9,0x681,0x5c9)+_0x4c4d6e(0x79,0xe6,0x84,-0x25)]);}}}}catch(_0x12e53c){if(_0x361970['QeEJJ'](_0x361970[_0x4c4d6e(0x13,0x1c,0x20,-0x89)],_0x361970['jjKkD'])){_0x361970['LlmJe'](addLog,_0x4c4d6e(0xbe,0x11b,0x21,0x6a)+':\x20'+_0x12e53c[_0x4c4d6e(0xd3,0xa1,0xd6,0x90)]+('。请检查sdwebu'+_0x360ee3(0x6a1,0x6be,0x691,0x6c2)+'查模型是否正确。')),taskQueue['completeTa'+'sk'](_0x30d34e,![]),currentTaskId=null;throw new Error('获取或者切换模型失败'+_0x360ee3(0x5c7,0x5d7,0x5b9,0x555)+_0x4c4d6e(0xe7,0x147,0x86,0x89)+_0x360ee3(0x6ae,0x6cc,0x679,0x69c));}else{const _0x19527b=_0x18dd3a['apply'](_0x1cc6e0,arguments);return _0x330a18=null,_0x19527b;}}let _0x2184a4=-(0x37b+0x943*-0x2+0x3c3*0x4);const _0x388457=_0x5d4b49[_0x360ee3(0x67e,0x6aa,0x610,0x6c3)];if(_0x361970[_0x360ee3(0x5fb,0x583,0x610,0x60a)](_0x388457,'')&&_0x361970[_0x360ee3(0x68e,0x6b4,0x6d6,0x68a)](_0x388457,null)&&!_0x361970[_0x360ee3(0x5d0,0x52b,0x5a1,0x5f0)](isNaN,_0x361970[_0x360ee3(0x5a0,0x63f,0x55a,0x63a)](Number,_0x388457))&&_0x361970[_0x4c4d6e(0xdc,0x10e,0xbe,0x16c)](_0x361970[_0x360ee3(0x5cb,0x58e,0x659,0x60a)](Number,_0x388457),-0x83*-0x41+0x1191*-0x1+0x1*-0xfb2)){if(_0x361970[_0x360ee3(0x63f,0x661,0x69a,0x5e9)](_0x361970[_0x4c4d6e(0xcd,0x16f,0x55,0x58)],_0x361970[_0x360ee3(0x687,0x675,0x610,0x6ac)])){const _0x1712ca=_0x5582e7?function(){function _0xa13da2(_0x5ad3ca,_0x52e8ab,_0x1e73b5,_0x1ec3c1){return _0x4c4d6e(_0x52e8ab-0x36a,_0x52e8ab-0x188,_0x5ad3ca,_0x1ec3c1-0x96);}if(_0x1b052f){const _0x3bcc2a=_0x883587[_0xa13da2(0x418,0x41b,0x451,0x407)](_0x45dc46,arguments);return _0x38e30b=null,_0x3bcc2a;}}:function(){};return _0x4b1d19=![],_0x1712ca;}else _0x2184a4=_0x361970[_0x4c4d6e(0xa1,0x125,0xb,0x7e)](Number,_0x388457);}let _0x4ead9e={'prompt':_0x1f6357,'negative_prompt':_0x58d778,'sampler_name':_0x5d4b49[_0x4c4d6e(0xaf,0xba,0xff,0x127)+'8_samplerN'+_0x360ee3(0x5c2,0x5bc,0x523,0x617)],'scheduler':_0x5d4b49[_0x360ee3(0x669,0x6e2,0x68a,0x6c6)+'8_schedule'+'r'],'steps':_0x5d4b49[_0x4c4d6e(0xe5,0x118,0x18b,0xc7)],'cfg_scale':_0x5d4b49[_0x360ee3(0x6b4,0x725,0x6ca,0x65e)],'width':_0x110878?_0x110878:_0x5d4b49[_0x4c4d6e(0x83,0x97,0xfe,0xb8)],'height':_0x1dfc34?_0x1dfc34:_0x5d4b49[_0x4c4d6e(0x4a,-0x51,0xcb,-0x5a)],'restore_faces':_0x361970[_0x360ee3(0x5e3,0x654,0x5fc,0x5bf)](_0x5d4b49['restoreFac'+'es'],_0x361970[_0x360ee3(0x62f,0x635,0x62f,0x5c0)]),'enable_hr':_0x5d4b49[_0x4c4d6e(0x99,-0x5,0x8,0x13f)+_0x4c4d6e(-0x1d,-0x61,0x54,0x14)]==_0x361970[_0x4c4d6e(0x75,0x27,0xf2,0x14)],'hr_upscaler':_0x5d4b49[_0x4c4d6e(0xaf,0xaa,0x70,0x104)+_0x360ee3(0x5ad,0x5e4,0x5f4,0x624)],'hr_scale':_0x5d4b49[_0x4c4d6e(0x1,-0x36,0x23,-0x12)+'e_factor'],'hr_additional_modules':[],'denoising_strength':_0x5d4b49[_0x4c4d6e(0x103,0x88,0xe1,0xa5)+_0x360ee3(0x629,0x65b,0x606,0x589)+'th'],'hr_second_pass_steps':_0x5d4b49[_0x360ee3(0x653,0x602,0x5e4,0x6a8)+_0x360ee3(0x673,0x710,0x6b8,0x670)],'seed':_0x2184a4,'override_settings':{'CLIP_stop_at_last_layers':_0x361970[_0x4c4d6e(0x3f,0x86,0x71,-0x21)](Number,_0x5d4b49[_0x360ee3(0x5d8,0x566,0x64a,0x60c)+_0x360ee3(0x6b5,0x610,0x616,0x6d0)]),'sd_vae':_0x5d4b49[_0x4c4d6e(0xaf,0xe6,0x23,0x7f)+'8_vae']},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};function _0x4c4d6e(_0x375145,_0x50678c,_0x141da4,_0x1d1989){return _0x4cec(_0x375145- -0x1da,_0x141da4);}_0x361970[_0x4c4d6e(0x118,0xb2,0x19a,0xdf)](addLog,_0x4c4d6e(0x48,0x49,0x3f,-0x58)+_0x360ee3(0x5ce,0x5d5,0x5eb,0x5f7)+_0x4ead9e[_0x360ee3(0x602,0x691,0x561,0x672)+_0x4c4d6e(0x65,0xcb,0x5,-0x30)]),addLog(_0x4c4d6e(0xde,0x148,0x130,0x16d)+'高清修复\x20为'+_0x4ead9e[_0x4c4d6e(0x9e,0x15,0x8b,0x87)]);_0x361970[_0x360ee3(0x5e3,0x634,0x577,0x63f)](_0x5d4b49[_0x4c4d6e(-0x1c,-0x99,-0x76,-0x65)+_0x360ee3(0x5bc,0x58b,0x543,0x624)],'true')&&(addLog(_0x361970[_0x360ee3(0x6d3,0x6ca,0x662,0x6cb)]),_0x4ead9e=_0x361970[_0x360ee3(0x5af,0x555,0x50a,0x5a0)](deepMerge,_0x4ead9e,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x361970[_0x4c4d6e(0xb2,0xa4,0x53,0x12d)]}]}}}));const _0x183aaa=_0x360ee3(0x683,0x615,0x65d,0x6fb)+_0x360ee3(0x648,0x5e5,0x681,0x648)+_0x360ee3(0x5b3,0x5cd,0x5ae,0x59d)+_0x360ee3(0x63b,0x64b,0x59d,0x59f)+_0x1f6357+(_0x4c4d6e(0xb8,0xca,0x68,0x53)+'(Negative\x20'+'Prompt):**'+'\x20')+_0x58d778+(_0x360ee3(0x5fa,0x65f,0x5ed,0x5f8)+_0x4c4d6e(0x4,-0x67,0x4e,-0x5b)+'**\x20')+_0x4ead9e[_0x4c4d6e(0x88,0x41,0x34,0x55)+'me']+(_0x360ee3(0x697,0x65a,0x6e9,0x62a)+_0x4c4d6e(-0x1e,-0x87,-0x94,0x4))+_0x4ead9e['steps']+(_0x360ee3(0x69b,0x662,0x5f4,0x732)+_0x4c4d6e(0x20,0x93,0x6,-0x9))+_0x4ead9e[_0x4c4d6e(0x7,-0x1e,-0x86,-0x6c)]+(_0x4c4d6e(0x19,-0x2,-0x5f,0x85)+_0x360ee3(0x6be,0x6ff,0x721,0x719))+_0x4ead9e['width']+'x'+_0x4ead9e[_0x360ee3(0x614,0x60f,0x635,0x61c)]+(_0x4c4d6e(0xf8,0x72,0x100,0xa3)+'eed):**\x20')+(_0x4ead9e['seed']===-(0x2d3*0x9+0x210c+-0x3a76)?_0x361970[_0x4c4d6e(0xa2,0x74,0x96,0x2e)]:_0x4ead9e[_0x4c4d6e(0x39,-0x5b,0xc2,-0x3d)])+('\x0a-\x20**模型\x20(M'+_0x4c4d6e(0x60,0x30,0xd4,0x77))+_0x5d4b49[_0x4c4d6e(0xaf,0x144,0xfa,0xa9)+_0x4c4d6e(0x79,0xe4,0x102,0xef)]+('\x0a-\x20**VAE:*'+'*\x20')+_0x4ead9e[_0x4c4d6e(0x125,0x16d,0x1b0,0x114)+_0x360ee3(0x5c0,0x5ba,0x647,0x53b)][_0x4c4d6e(-0xe,0x5f,-0xa2,-0x7d)]+(_0x360ee3(0x68a,0x731,0x653,0x6b1)+_0x360ee3(0x681,0x5f0,0x6ef,0x6f5))+_0x4ead9e['override_s'+_0x4c4d6e(0x6,0x1b,0x86,-0x39)][_0x360ee3(0x6cc,0x74a,0x66f,0x65c)+_0x360ee3(0x64c,0x671,0x639,0x698)+_0x360ee3(0x640,0x6d4,0x641,0x6a6)]+(_0x4c4d6e(-0x20,0x22,-0x9c,-0x68)+_0x4c4d6e(0x67,0x1f,-0x36,0x6)+_0x360ee3(0x637,0x654,0x596,0x6b2))+_0x4ead9e[_0x360ee3(0x658,0x5d0,0x63f,0x5d2)]+(_0x4c4d6e(0xef,0x12e,0xde,0x141)+_0x360ee3(0x59b,0x520,0x56b,0x556)+'actor):**\x20')+_0x4ead9e[_0x360ee3(0x6bf,0x6d2,0x753,0x73b)]+(_0x360ee3(0x69d,0x6de,0x665,0x716)+_0x4c4d6e(0x2e,-0x77,0x92,0xc5)+_0x4c4d6e(0x109,0x119,0x102,0xbc)+_0x4c4d6e(0x129,0xb0,0x19c,0xe3))+_0x4ead9e[_0x4c4d6e(0x94,0xe9,0xeb,0x127)+_0x4c4d6e(0xbc,0x35,0x53,0x142)]+(_0x4c4d6e(0xf3,0x5f,0x148,0x134)+_0x4c4d6e(0xcb,0x127,0xfb,0x14e)+_0x4c4d6e(0x10a,0xd5,0x199,0xe4))+_0x4ead9e['restore_fa'+'ces']+(_0x360ee3(0x64a,0x67f,0x606,0x6ad)+_0x4c4d6e(0xa6,0x108,0x94,0x42))+(_0x5d4b49[_0x4c4d6e(-0x1c,-0xc0,0x1f,-0x8f)+_0x360ee3(0x5bc,0x57c,0x61f,0x5ac)]=='true')+'\x0a---\x0a\x20\x20\x20\x20';addLog(_0x183aaa),_0x361970['QUXQd'](addLog,_0x4c4d6e(0xec,0x192,0x131,0xdc)+'数为'+JSON['stringify'](_0x4ead9e)),console['log'](_0x361970[_0x360ee3(0x628,0x686,0x5f4,0x69b)],_0x4ead9e);let _0x565a49=!![];while(_0x565a49){if(window[_0x360ee3(0x68f,0x6f4,0x601,0x6db)]){if(_0x361970[_0x4c4d6e(0x85,0xdb,0xe0,0x2b)](_0x361970['Cbrof'],_0x361970[_0x4c4d6e(-0x22,-0x18,0x29,0x4c)]))throw new _0xc80e1c('API响应中未找到图'+_0x360ee3(0x690,0x602,0x6c4,0x70e));else _0x565a49=![];}else await _0x361970[_0x360ee3(0x6cd,0x639,0x6b5,0x756)](sleep,-0x60*0x1d+0x2*0x1231+0x229*-0xa);};try{window[_0x4c4d6e(0xd5,0xd9,0x13c,0x8f)]=!![],taskQueue[_0x360ee3(0x675,0x636,0x6a9,0x708)+'us'](_0x30d34e,_0x361970[_0x4c4d6e(0x31,0x77,-0x67,0xc2)]);if(_0x361970[_0x360ee3(0x5ff,0x5b7,0x68b,0x5c9)](_0x5d4b49[_0x360ee3(0x6cb,0x6d8,0x655,0x6af)],_0x361970[_0x4c4d6e(0x15,0x76,0x92,0x13)])){if(!taskQueue[_0x360ee3(0x66d,0x62f,0x65a,0x671)+_0x360ee3(0x60a,0x62c,0x5cc,0x651)](_0x30d34e)){if(_0x361970[_0x360ee3(0x60c,0x580,0x5b4,0x6b1)](_0x361970['ZKKzW'],_0x361970[_0x4c4d6e(-0x16,0x7e,0x6,0x65)]))return _0x3f7946[_0x4c4d6e(0x18,0x83,-0x4c,-0x35)]()[_0x4c4d6e(0x76,0x66,0x7f,0x43)](LigTNQ[_0x360ee3(0x5c6,0x584,0x644,0x5ab)])[_0x4c4d6e(0x18,0x85,0x26,-0x31)]()[_0x360ee3(0x6d5,0x744,0x740,0x70a)+'r'](_0x4b4be3)[_0x360ee3(0x630,0x631,0x5fd,0x675)](LigTNQ['NbkAj']);else{addLog(_0x361970[_0x360ee3(0x5f0,0x55c,0x632,0x68d)]),eventSource[_0x360ee3(0x69c,0x693,0x628,0x736)](_0x361970[_0x4c4d6e(0xd2,0x9e,0x9a,0x16f)]);throw new Error(_0x361970['hmTvi']);}}_0x4ead9e[_0x360ee3(0x643,0x666,0x64d,0x6c5)]=_0x11518d,console[_0x4c4d6e(-0x6,-0x7a,0x33,0x9c)](_0x361970[_0x360ee3(0x682,0x61c,0x69a,0x649)],_0x5d4b49[_0x4c4d6e(0x116,0x181,0xe2,0xba)+_0x4c4d6e(0x1d,-0x59,0x62,-0x74)]),_0x4ead9e[_0x360ee3(0x69e,0x6e6,0x72c,0x6da)]=_0x5d4b49['st_chatu8_'+_0x360ee3(0x5d7,0x597,0x666,0x56c)]?_0x5d4b49['st_chatu8_'+_0x4c4d6e(0x1d,0x8,0x6b,0x87)]:'';const _0x3d851b=await _0x361970['IDJNN'](fetch,_0x361970[_0x360ee3(0x694,0x6eb,0x636,0x737)],{'method':_0x361970[_0x4c4d6e(0x2a,0x69,-0x4a,0x81)],'headers':_0x361970[_0x360ee3(0x667,0x5ec,0x5d7,0x66c)](getRequestHeaders,window[_0x360ee3(0x6dc,0x752,0x6c9,0x6be)]),'body':JSON['stringify'](_0x4ead9e)});if(!_0x3d851b['ok']){if(_0x361970['CsoDa'](_0x361970[_0x4c4d6e(0x4b,0xd3,-0x2c,0xd9)],_0x361970[_0x4c4d6e(0x4b,0xb,-0x45,-0x4e)])){_0x361970[_0x360ee3(0x61e,0x628,0x5f3,0x5dd)](_0x120492,'切换模型失败:\x20'+_0x3f06d9[_0x4c4d6e(0x1a,0x19,-0x1c,-0x59)]+'\x20'+_0x58dfbe[_0x360ee3(0x625,0x5b1,0x5cf,0x593)]);throw new _0x481058(_0x4c4d6e(0x12,0x57,0x8a,0xa0)+_0x34f7bc[_0x4c4d6e(0x1a,0xb6,0x5d,0xaf)]+'\x20'+_0x1edeeb[_0x4c4d6e(0x6b,-0x11,0xf8,0x10c)]);}else{const _0x32d76d=await _0x3d851b[_0x4c4d6e(0x69,0x100,0x51,-0x1d)]();_0x361970['mGksP'](addLog,_0x360ee3(0x5df,0x639,0x616,0x605)+_0x4c4d6e(0x43,-0x2e,0x8b,0x75)+_0x3d851b['status']+_0x4c4d6e(0xf0,0x122,0x17c,0x168)+_0x32d76d),console[_0x360ee3(0x5b4,0x572,0x545,0x5f2)](_0x361970[_0x4c4d6e(0x6c,0xd3,0x84,-0x2e)],_0x32d76d);throw new Error(_0x360ee3(0x6b1,0x6c4,0x678,0x62c)+_0x3d851b[_0x4c4d6e(0x1a,-0x14,0x98,0x5)]+_0x360ee3(0x5f8,0x5ed,0x696,0x55f)+_0x32d76d);}}const _0x12382f=await _0x3d851b[_0x360ee3(0x623,0x5ad,0x60a,0x609)]();let _0x2ec6b7='';try{const _0x3d96cf=JSON[_0x360ee3(0x62c,0x5d9,0x615,0x608)](_0x12382f);_0x2ec6b7=_0x3d96cf[_0x360ee3(0x6e2,0x640,0x75a,0x6c2)][-0x4f8+0xca*-0x1a+0x4*0x65f];}catch(_0x154ad3){_0x361970[_0x4c4d6e(0x120,0x123,0x16c,0x80)](addLog,_0x361970['aNrCx']),_0x2ec6b7=_0x12382f;}const _0xf16c73=_0x4c4d6e(0x117,0x112,0xb5,0xed)+_0x360ee3(0x5f4,0x658,0x569,0x680)+'4,'+_0x2ec6b7;addLog(_0x360ee3(0x5e9,0x63f,0x60c,0x67a)+_0x4c4d6e(-0x5,-0x98,-0x54,0x2b)+'L。'),taskQueue[_0x360ee3(0x6e1,0x779,0x685,0x648)+'sk'](_0x30d34e,!![]),currentTaskId=null;const _0x3a463b={};return _0x3a463b[_0x4c4d6e(0x4c,0xa9,-0x39,-0x5)]=_0xf16c73,_0x3a463b[_0x360ee3(0x62b,0x590,0x5e2,0x694)]=_0x4edde6||'',_0x3a463b;}else{if(_0x360ee3(0x644,0x658,0x6b2,0x60a)!==_0x360ee3(0x644,0x5a0,0x5c3,0x6b6))_0x56f560=_0x361970[_0x360ee3(0x65e,0x617,0x682,0x659)](_0x361970[_0x4c4d6e(0xc2,0x7a,0xee,0x8d)](_0x5f44bf,',\x20'),_0xfede70[_0x4c4d6e(0x62,0xbe,0x38,0x4d)+_0x28217b+_0x360ee3(0x632,0x602,0x612,0x5eb)]);else{if(!taskQueue['isTaskInQu'+_0x360ee3(0x60a,0x5a0,0x564,0x669)](_0x30d34e)){_0x361970[_0x360ee3(0x674,0x69d,0x61f,0x5fc)](addLog,_0x361970[_0x4c4d6e(0x36,0xb1,0xd4,0x9a)]);throw new Error(_0x361970['hmTvi']);}const _0x4dc120=new URL(_0x361970['ZFvqb'](_0x11518d,_0x360ee3(0x5c9,0x555,0x5a9,0x628)+_0x360ee3(0x659,0x61a,0x6a7,0x66b)));window[_0x360ee3(0x68f,0x727,0x676,0x6f5)]=![];const _0x58daba=await _0x361970[_0x360ee3(0x5af,0x579,0x5c1,0x525)](fetch,_0x4dc120,{'method':_0x361970[_0x4c4d6e(0x2a,0x66,0x33,0x69)],'body':JSON['stringify'](_0x4ead9e),'headers':{'Content-Type':'applicatio'+_0x4c4d6e(0x82,0xcb,0x105,0xb1),'Authorization':getsdAuth()}});window[_0x4c4d6e(0xd5,0x38,0xa8,0x145)]=!![];if(!_0x58daba['ok']){const _0x4c3d0a=await _0x58daba['text']();_0x361970[_0x4c4d6e(0x77,0x101,0x10d,0xe1)](addLog,_0x4c4d6e(0x95,-0xb,0x109,0x49)+_0x360ee3(0x5c8,0x528,0x668,0x544)+_0x58daba['status']+_0x4c4d6e(0xf0,0x7f,0x14b,0x149)+_0x4c3d0a),console[_0x4c4d6e(-0x6,-0xe,0x4c,-0xb)](_0x361970[_0x4c4d6e(0x6c,0x6d,0x53,0x2a)],_0x4c3d0a);throw new Error('请求失败,状态码:\x20'+_0x58daba[_0x360ee3(0x5d4,0x559,0x55b,0x653)]+_0x360ee3(0x5f8,0x5d3,0x614,0x59c)+_0x4c3d0a);}const _0x4f0a32=await _0x58daba[_0x360ee3(0x5e7,0x58b,0x596,0x5a7)]();if(!_0x4f0a32[_0x4c4d6e(0x128,0x12c,0x154,0x136)]||_0x361970[_0x4c4d6e(-0x18,0x86,0x30,-0x6f)](_0x4f0a32[_0x360ee3(0x6e2,0x6bc,0x689,0x731)][_0x360ee3(0x5b0,0x614,0x638,0x624)],0x825*0x3+0x1f8+-0x1a67)){if(_0x361970[_0x4c4d6e(0x85,-0x1b,0x19,0x1b)](_0x361970[_0x360ee3(0x596,0x625,0x5dd,0x5b3)],_0x361970[_0x360ee3(0x596,0x631,0x574,0x61e)])){const _0x4d9d6b=_0x116917[_0x4c4d6e(0x72,-0x2e,0x6f,0x93)](_0x53b5e4);_0x292b63=_0x4d9d6b[_0x4c4d6e(0x128,0x16e,0x108,0x15c)][0x9*-0x62+0x2*0x89f+-0x373*0x4];}else throw new Error(_0x361970[_0x360ee3(0x634,0x618,0x60c,0x65e)]);}const _0xdbb80c=_0x4f0a32['images'][0x8f9+0x16e8+-0x1*0x1fe1],_0x4fc996=_0x361970[_0x4c4d6e(0xd7,0x163,0xec,0xd2)](_0x361970['AHYXl'],_0xdbb80c);return _0x361970['mGksP'](addLog,_0x361970[_0x360ee3(0x6d4,0x71b,0x693,0x696)]),taskQueue[_0x360ee3(0x6e1,0x752,0x777,0x66c)+'sk'](_0x30d34e,!![]),currentTaskId=null,{'image':_0x4fc996,'change':_0x361970[_0x4c4d6e(-0x9,0x89,-0x26,0x33)](_0x116089,'')};}}}catch(_0xeb8886){const _0x3e0327=_0x361970[_0x4c4d6e(0xe0,0xa6,0x84,0xde)]['split']('|');let _0x2ebbac=0x84a+-0x2573*0x1+0x1d29;while(!![]){switch(_0x3e0327[_0x2ebbac++]){case'0':window[_0x360ee3(0x68f,0x671,0x63a,0x6b2)]=!![];continue;case'1':if(_0xeb8886[_0x4c4d6e(0xd3,0x8e,0x109,0x49)]===_0x361970[_0x4c4d6e(0x27,0x81,-0x3c,0x2f)]){}else taskQueue[_0x4c4d6e(0x127,0xd0,0x11d,0xaa)+'sk'](_0x30d34e,![]);continue;case'2':_0x361970['RHjWb'](addLog,_0x4c4d6e(0x9b,0x86,0x121,-0xa)+_0xeb8886[_0x360ee3(0x68d,0x620,0x61c,0x6cc)]);continue;case'3':currentTaskId=null;continue;case'4':throw _0xeb8886;continue;case'5':console[_0x360ee3(0x679,0x664,0x66c,0x6ac)](_0x361970[_0x4c4d6e(0xae,0x8b,0x112,0xe3)],_0xeb8886);continue;}break;}}}async function sdGenerate(_0x544c36){const _0x38c3cf={'hDWuJ':function(_0x2ceb7c,_0x41a1eb){return _0x2ceb7c(_0x41a1eb);},'DQGHn':function(_0x1189b0,_0x70a423){return _0x1189b0(_0x70a423);},'xPCWi':_0x3fa97f(0x4ed,0x461,0x4a9,0x583)+_0x3fa97f(0x4d8,0x52c,0x564,0x4eb),'dvyzV':function(_0xf39617,_0x133ee5){return _0xf39617===_0x133ee5;},'afPCs':'kteXE','IhAKE':function(_0x7b3261,_0xc4f44){return _0x7b3261!=_0xc4f44;},'xMjgS':function(_0x54904a,_0x416b8b){return _0x54904a!==_0x416b8b;},'ofMdB':_0x4b6813(0x445,0x3a8,0x3ba,0x314),'EYRqo':function(_0x3bfc6b,_0x1f9421,_0x470708,_0x40fd6e){return _0x3bfc6b(_0x1f9421,_0x470708,_0x40fd6e);},'dLOlW':function(_0x13e6d6,_0x3d5c42){return _0x13e6d6===_0x3d5c42;},'psMEb':_0x4b6813(0x3fd,0x358,0x330,0x36c),'TqQFW':function(_0xc570e,_0x17bde0){return _0xc570e(_0x17bde0);},'GZkXa':_0x3fa97f(0x55d,0x537,0x584,0x54a)+'rating\x20SD\x20'+_0x4b6813(0x3d0,0x3fd,0x456,0x448)},{id:_0x292789,prompt:_0x4a0ea9,width:_0x498660,height:_0x5baed9,change:_0x458941}=_0x544c36;_0x38c3cf[_0x3fa97f(0x525,0x566,0x546,0x59d)](addLog,'收到SD生图请求\x20('+_0x4b6813(0x36e,0x30d,0x2b3,0x2ad)+_0x292789+(')\x20-\x20Prompt'+':\x20')+_0x4a0ea9+(_0x458941?_0x4b6813(0x2e7,0x351,0x3ae,0x3ae)+'\x20'+_0x458941:''));function _0x3fa97f(_0x26e2ca,_0xd074e1,_0x494181,_0x3cf5f1){return _0x4cec(_0x26e2ca-0x2f4,_0xd074e1);}if(_0x458941&&_0x458941[_0x4b6813(0x435,0x402,0x41a,0x40c)](_0x4b6813(0x329,0x39d,0x337,0x328))){if(_0x38c3cf['dvyzV'](_0x38c3cf[_0x3fa97f(0x4e5,0x570,0x537,0x4b9)],_0x38c3cf[_0x4b6813(0x34c,0x309,0x2e3,0x322)])){_0x38c3cf[_0x4b6813(0x381,0x349,0x334,0x346)](bananaGenerate,_0x544c36);return;}else _0x3a8f88['on'](_0x206abb[_0x4b6813(0x3bc,0x3bc,0x354,0x332)+_0x3fa97f(0x5c4,0x57b,0x662,0x5ed)+'ST'],_0x5739fc),_0x38c3cf['hDWuJ'](_0x45d006,'SD\x20生图事件监听器'+_0x3fa97f(0x501,0x54f,0x5a2,0x51c));}function _0x4b6813(_0xb1fa80,_0x1fa2c7,_0x122d8c,_0x2349fe){return _0x4cec(_0x1fa2c7-0x118,_0x122d8c);}try{const {image:_0x5a1d2d,change:_0x590e8c}=await generateSDImage({'prompt':_0x4a0ea9,'width':_0x498660,'height':_0x5baed9,'change':_0x458941});if(_0x38c3cf[_0x4b6813(0x392,0x365,0x2c2,0x2da)](extension_settings[extensionName][_0x3fa97f(0x5d6,0x541,0x593,0x642)],'0')){if(_0x38c3cf[_0x3fa97f(0x51f,0x5bc,0x53d,0x5a9)](_0x38c3cf[_0x4b6813(0x2ce,0x316,0x326,0x2b9)],_0x38c3cf[_0x3fa97f(0x4f2,0x510,0x4a5,0x481)]))_0x49ceab(_0x4b6813(0x413,0x3da,0x38b,0x406)+_0x3fa97f(0x5ad,0x50d,0x578,0x611)+_0x4b6813(0x3c7,0x366,0x364,0x3bd)),_0x2d80b0=_0x5e51f9;else{const _0x590444={};_0x590444[_0x3fa97f(0x53f,0x580,0x5bd,0x503)]=_0x590e8c,await _0x38c3cf[_0x4b6813(0x3bb,0x341,0x345,0x2e4)](setItemImg,_0x4a0ea9,_0x5a1d2d,_0x590444),_0x38c3cf[_0x3fa97f(0x5c0,0x5de,0x545,0x53e)](addLog,_0x3fa97f(0x4ca,0x4e5,0x47a,0x4b9)+_0x4b6813(0x32a,0x379,0x3dd,0x326)+'\x20'+_0x4a0ea9);}}else _0x38c3cf[_0x4b6813(0x385,0x3b8,0x31b,0x418)](_0x38c3cf[_0x3fa97f(0x5cf,0x532,0x66c,0x621)],_0x3fa97f(0x534,0x593,0x4e1,0x538))?_0x38c3cf[_0x4b6813(0x346,0x349,0x2df,0x370)](addLog,_0x4b6813(0x3b8,0x34d,0x351,0x35d)+'库'):(_0x85299b[_0x4b6813(0x44d,0x40e,0x399,0x3bc)+_0x3fa97f(0x573,0x565,0x5ba,0x57a)](_0x52baa5['GENERATE_I'+_0x4b6813(0x46c,0x3e8,0x481,0x358)+'ST'],_0x19c1ad),_0x46e5f8[_0x3fa97f(0x523,0x4f1,0x4c7,0x4b6)+_0x3fa97f(0x50a,0x4b9,0x4dd,0x58a)]=![],_0x38c3cf['DQGHn'](_0x4580c8,_0x38c3cf[_0x4b6813(0x2dd,0x314,0x2ad,0x3a2)]));const _0x2cfe19={};_0x2cfe19['id']=_0x292789,_0x2cfe19[_0x4b6813(0x3d9,0x3e3,0x39a,0x364)]=!![],_0x2cfe19['imageData']=_0x5a1d2d,_0x2cfe19['prompt']=_0x4a0ea9,_0x2cfe19[_0x4b6813(0x3c3,0x363,0x2da,0x394)]=_0x590e8c,eventSource['emit'](EventType[_0x4b6813(0x43c,0x3bc,0x44a,0x36f)+_0x4b6813(0x430,0x39c,0x3df,0x3d1)+_0x3fa97f(0x57e,0x541,0x552,0x519)],_0x2cfe19),_0x38c3cf[_0x4b6813(0x33c,0x349,0x31d,0x3c3)](addLog,_0x4b6813(0x30b,0x346,0x2a7,0x2a0)+_0x4b6813(0x3a4,0x416,0x3f8,0x4a3)+_0x292789+')');}catch(_0x3854e2){const _0xb84cb8=_0x4b6813(0x37a,0x2e3,0x297,0x282)+'常\x20(ID:\x20'+_0x292789+_0x4b6813(0x35c,0x3b5,0x35f,0x382)+_0x3854e2['message'];_0x38c3cf[_0x3fa97f(0x514,0x565,0x523,0x4ae)](addLog,_0x3fa97f(0x5da,0x58a,0x61a,0x64c)+_0xb84cb8),console['error'](_0x38c3cf[_0x4b6813(0x338,0x2e6,0x32f,0x2f9)],_0x3854e2);const _0x4c8818={};_0x4c8818['id']=_0x292789,_0x4c8818['success']=![],_0x4c8818[_0x4b6813(0x348,0x3b1,0x451,0x379)]=_0x3854e2[_0x3fa97f(0x5a1,0x5d1,0x5c3,0x505)],_0x4c8818[_0x3fa97f(0x509,0x580,0x51f,0x519)]=_0x4a0ea9,eventSource['emit'](EventType[_0x4b6813(0x426,0x3bc,0x34c,0x3a9)+_0x4b6813(0x400,0x39c,0x3c2,0x41e)+_0x4b6813(0x42f,0x3a2,0x42d,0x414)],_0x4c8818),_0x38c3cf[_0x3fa97f(0x525,0x541,0x564,0x569)](addLog,_0x3fa97f(0x5bb,0x618,0x55c,0x604)+_0x4b6813(0x430,0x416,0x454,0x3a3)+_0x292789+')');}}function initializeSDListener(){const _0x2aa20d={'pSeAr':function(_0x1db568,_0x1a2725){return _0x1db568(_0x1a2725);},'lEOqv':'SD\x20生图事件监听器'+_0x5a27a8(0x4de,0x40e,0x436,0x486)};eventSource['on'](EventType[_0x5a27a8(0x584,0x516,0x516,0x51d)+_0x1a497b(0x506,0x544,0x598,0x513)+'ST'],sdGenerate);function _0x1a497b(_0x544848,_0x50e2a1,_0x392a3f,_0x3c2f66){return _0x4cec(_0x544848-0x236,_0x50e2a1);}function _0x5a27a8(_0x3d13e3,_0x22ceb0,_0x5af1e0,_0x16f20f){return _0x4cec(_0x16f20f-0x279,_0x22ceb0);}_0x2aa20d['pSeAr'](addLog,_0x2aa20d['lEOqv']);}export async function replaceWithSd(){function _0x4be031(_0x425c31,_0x587f42,_0x2d853f,_0x3e7357){return _0x4cec(_0x2d853f-0x342,_0x587f42);}function _0x4f404e(_0x260320,_0x463d17,_0x212a90,_0x507b33){return _0x4cec(_0x212a90-0x145,_0x260320);}const _0x5a710a={'YjUWO':function(_0x440cae){return _0x440cae();},'GqrJN':function(_0x3bbe72,_0x152547){return _0x3bbe72==_0x152547;},'eNmWt':function(_0x41fe08){return _0x41fe08();},'YgBFz':_0x4f404e(0x4b4,0x3f1,0x433,0x4b1),'ZwpnN':_0x4f404e(0x3fd,0x334,0x37c,0x2de),'kiOEs':function(_0x5784fe,_0x4575a8){return _0x5784fe(_0x4575a8);}};_0x5a710a[_0x4be031(0x4cd,0x511,0x519,0x546)](extension_settings[extensionName][_0x4f404e(0x3ca,0x375,0x357,0x3e3)],'sd')?(!window[_0x4be031(0x4fc,0x53a,0x571,0x5da)+'SDListener']&&(window[_0x4f404e(0x2d8,0x31e,0x374,0x3be)+_0x4be031(0x558,0x5a4,0x558,0x5b8)]=!![],_0x5a710a[_0x4be031(0x520,0x56f,0x5ad,0x628)](initializeSDListener)),_0x5a710a[_0x4be031(0x684,0x5f7,0x5eb,0x56c)](initializeImageProcessing)):_0x5a710a[_0x4f404e(0x2f4,0x329,0x30a,0x32d)]===_0x5a710a['ZwpnN']?(_0x1ed05c[_0x4be031(0x617,0x603,0x571,0x552)+'SDListener']=!![],_0x5a710a[_0x4be031(0x5ec,0x559,0x5ad,0x557)](_0x2ed195)):window[_0x4be031(0x5d7,0x539,0x571,0x55a)+'SDListener']&&(eventSource[_0x4be031(0x668,0x5d0,0x638,0x60f)+_0x4be031(0x608,0x58d,0x5c1,0x602)](EventType[_0x4f404e(0x3d8,0x3ab,0x3e9,0x3dd)+_0x4f404e(0x38a,0x4ad,0x415,0x3b9)+'ST'],sdGenerate),window[_0x4f404e(0x3e6,0x2e5,0x374,0x338)+_0x4f404e(0x2c2,0x3d0,0x35b,0x2c4)]=![],_0x5a710a[_0x4f404e(0x402,0x3a0,0x387,0x309)](addLog,'SD\x20生图事件监听器'+'已关闭。'));}