(function(_0x14d73c,_0x5f4b1e){const _0xbd5d14=_0x14d73c();function _0x37428a(_0x4c82a3,_0x1fedcd,_0x5e70b9,_0x2bd0c1){return _0x45c1(_0x5e70b9-0xef,_0x2bd0c1);}function _0x10e348(_0x464464,_0x3239c1,_0x41f1dc,_0x5828fe){return _0x45c1(_0x3239c1- -0x5c,_0x41f1dc);}while(!![]){try{const _0x3574fd=-parseInt(_0x10e348(0x136,0xfb,0x7c,0x101))/(-0x7*0x88+0x1*-0x2507+0x28c0)*(-parseInt(_0x10e348(0x85,0x70,0xe2,0xd5))/(-0x25ef+0x391*0x5+0x141c))+-parseInt(_0x37428a(0x200,0x18e,0x1a5,0x195))/(0x2339+-0x51d+0x1e19*-0x1)+-parseInt(_0x10e348(0x1fc,0x17b,0x130,0x1a5))/(0xe52+-0x3c+-0xe12*0x1)+parseInt(_0x10e348(0x1ac,0x122,0xe2,0xa5))/(-0x207f+-0x1694+-0xdc6*-0x4)+-parseInt(_0x37428a(0x296,0x2a3,0x23b,0x288))/(-0x74d+0xc23+-0x4d0)*(-parseInt(_0x10e348(0xbe,0xb3,0xaa,0x157))/(0x49d*0x1+0x1*-0x1666+-0x1c8*-0xa))+-parseInt(_0x37428a(0x287,0x1fd,0x20a,0x1b3))/(-0x386+-0x17*0x15f+0x2317)+parseInt(_0x37428a(0x2b0,0x1ab,0x233,0x250))/(0x1b93+0x4a8+-0xd*0x27a)*(parseInt(_0x10e348(0x123,0xf7,0xb1,0xee))/(0x18aa+-0x209e+-0x5d*-0x16));if(_0x3574fd===_0x5f4b1e)break;else _0xbd5d14['push'](_0xbd5d14['shift']());}catch(_0x55801b){_0xbd5d14['push'](_0xbd5d14['shift']());}}}(_0x3ce3,0x155a81+0x1b1df4*-0x1+0x1*0x138be9));const _0x37101a=(function(){let _0x2021dd=!![];return function(_0xbc3719,_0x206231){const _0x5a792d=_0x2021dd?function(){function _0x47c511(_0x5a6c21,_0x323124,_0x5e4f09,_0x1ac018){return _0x45c1(_0x1ac018- -0x28d,_0x5e4f09);}if(_0x206231){const _0x544a33=_0x206231[_0x47c511(-0xf1,-0x174,-0xec,-0x15a)](_0xbc3719,arguments);return _0x206231=null,_0x544a33;}}:function(){};return _0x2021dd=![],_0x5a792d;};}()),_0x3970cd=_0x37101a(this,function(){function _0x31364b(_0x5997b9,_0x4c0496,_0x3ffcc4,_0x88e875){return _0x45c1(_0x4c0496- -0x174,_0x3ffcc4);}const _0x15c95a={};function _0x3fa4e1(_0x562fc5,_0x5892bb,_0x25d379,_0x4ac2b4){return _0x45c1(_0x25d379- -0x1d1,_0x562fc5);}_0x15c95a[_0x31364b(0x1d,-0x74,0x26,-0xe8)]='(((.+)+)+)'+'+$';const _0x37f890=_0x15c95a;return _0x3970cd[_0x31364b(0x6c,0x2c,0x25,0x14)]()['search'](_0x3fa4e1(0x14,0x3f,-0x1d,-0x28)+'+$')['toString']()['constructo'+'r'](_0x3970cd)['search'](_0x37f890[_0x31364b(-0xda,-0x74,-0x60,0x8)]);});_0x3970cd();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';function _0x3ce3(){const _0x1e0b55=['DgvWCYK6kIOG','D0HAEwq','6zsz6k+VoIa','zxjYB3i','loAOOEwEI+s4UG','Ehf2r2S','CeT4Chm','5BEY5ywZ6zET44cc','uKTLqwG','wu9ctvy','rg5UuwW','n2XTBezMBq','yLbSAvC','y1jvtei','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','6lsF6z2I5lI6oIa','qvHzvhK','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','cI0GkIRPH4FMOlFMLRNMS5uG','5zon5BQu5yAf5A65oG','wuTWzva','DhbOsw8','rvzVqK0','nta2mZeYoeTnrvrKvG','6k+V44cc54Q25Ocb56cboIa','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','v3fTyKG','B2rLBcK6kIOG','zuHPu3O','Aw1Hz2u6','ywn0B3iPoIOQia','5lIT55QeihbYB21WDooaGG','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','AeT5wgm','y2fSztOQkIa','r01oqNO','of9TB2rLBa','zML4','u0rmAxn0zw5LCG','zwvKktOQkIa','qK9mCgK','Aw5JBhvKzxm','zw5HyMXLx2HYia','zKLPtgG','zxr0Aw5NCW','Bw9KzwW','ywnLCYK6kIOG','yxbWBhK','5Q2J5zYO6ycA6l+hC2r3zwj1','vLPlv2u','cI0GkIROTj/PNAlMJ5dNPlOG','qM1Nr2K','vu1MEha','y2fJAgu','vvj2EgO','ifbYB21WDa','5yop5PwW5O2U44cc','C2rdzMDty2fSzq','AwXLCJOQkIa','l2fWAs9Zzc9Nzq','ic0Gq2HHBMDLoG','nxWZFdj8nhWXFa','rNHyy2y','BMvYyxrPB24','ovzbvwjKva','EgLHBMnOzw5N','of91ChnJywXLCG','Dc1TB2rLBa','Dg9Rzw4','zw5HyMXLx2HY','rMPNBwW','uhjVBxb0ktOQkG','mty5nZyYogDXAgTvza','sLnptIdOP6pMNPdLPlhOTkxVViW','Aw1Hz2vhzw5jBG','cI0TlqOJiYmG55sF','l3bUzZTIyxnLnG','ExvZAgvPzf9Zza','CgfYC2u','mtK2ntu0mZbgt0LbEwu','ifn0CMvUz3rOkq','cI0GkIROHlJPG6JKV67LPi0G','qvbnCNG','mJy2odDwtKPzBLm','C2rFy2fKzxrHAq','EKPttNO','A2LW','ufrwz3G','ELbQzhq','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','BgvZktOG','tufhrv9srvnqtW','C2rFy3DPzhrO','56cboIa','tfrsBg0','C3rHDhvZvgv4Da','ywHLvvi','6i635y+w5QIH5z6l5AsX6lsLoIa','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','C2r3zwj1AEEuN+wBVUwpGG','yw1L','of9Zyw1WBgvYtG','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','C3rLChm','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','D2LKDgG','EwvYCW','AML1z3vHBG','zMfJzsdKUlRLVidLKk8','DezzCMG','u2TPCdOQkIa','lI4U','5BcD6k+v5l2C5lI65y6F5AEliejHCW','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','BvDmt04','CNvUBMLUzW','cI0GkIRPH43NU5JLUyxLUQyG','zxvL','ExvZAgu','ksaTifbYB21WDa','DxjS','ndG2mZiWugzJwxbA','5lI6Dhj1zq','y29TCgXLDgvuyq','C2rFyxv0Aa','q0Xjuf9ZDg9WxW','q2fxswi','Ee9hzLm','EfvYD0G','EuvXzK0','zw5LCG','qMjTv3K','yxv0Aa','zw1PDa','og4UChq','B0XpuNm','DhrvBuy','cI0GkIPwquu6kG','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','C1rZvfe','uLLrDxm','uhLKvMO','cI0GkIRPQ5JMUixKV67LPi0G','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','y0jJC1a','ywjjqKS','5Q2J5zYO6k6+572U5QIH5z6l5lI6','z2jPu1C','Ew5qtLe','DhjPBq','C2Phz0O','C2rFy2nOyxr1xW','C2vLza','qNboAKS','BK5Svhu','Dg9tDhjPBMC','cI0GkIRMRAxMLBaGkfm','CffewhO','cI0GkIPdBgLWia','q2XUsvy','y2HHBMDL','of9Zy2HLzhvSzq','tefcuva','Aw5PDgLHBgL6zq','DMzvD1e','55sO5lQo55sF5OIq55QevgfNoIa','CMf0Aw5Nifneia','y2vZ','yxbWBgLJyxrPBW','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','B3iGChjVBxb0oG','EgLHBMnOzw5Nia','Bef3rKq','rxPjDNC','r0vorvjbvevFsq','kcGOlISPkYKRkq','vunqx3nK','ktOG','D2jgq1y','tejbEgS','uKnLvK0','Ew9xA3O','ChqPoIOQia','vNbrt3i','DfrizK4','kerPDMLKzv9YBW','BMvYyxrL','C2fTCgXLCL9Uyq','Bw9Kzq','yxrXDNu','CvDxqLa','CfrTyNa','Dhj1zq','B3nPDgLVBG','txblCgy','q0vgA0K','C2rFy2HLAwDODa','zgf0ytPPBwfNzq','Bhb0AMW','vufquKq','C3vJy2vZCW','mJiYmG','DhH0mMLTzW','C2vZrxq','tKfqC3i','lcdOR6BMG4u6ia','Aw1Hz2u','vLDYr3e','C3buCMm','DM5MtLy','ntaYotaZnKzfA2jhvq','Aw5Nx3n0CMvUzW','BMHQuLq','ugXMvfy','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','5yIh5O2I5QIH5z6l5AsX6lsLoIa','zML4zwrqCM9TCa','y2XPzw50','AgvPz2H0','B3zLCNjPzgvFCW','C2rFy2rLBM9PCW','sM5MDMm','vgz3B0m','Ee1SqKi','kfjLC3rVCMuGrG','AhjFC2nHBgu','zfrgAg4','Cfb6vhy','tLnf','77Ym6k+35Qoa5P+LC2r3zwj1','y0vyueS','tufhrv9srvfvrq','C2tOR7FMSylNLj/LM77PLjNOR686ia','t1nyzvq','u2nLBMuGq29TCa','C2rFy2HPCMvZxW','wgHcCvC','ru5Szee','tenIrfO','tNLdsMG','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','44cc6k+35Qoa5P+LC2r3zwj1','AMz6wee','C3vIC3rYAw5N','DNjKD2y','AwjuuuG','ExHMtwq','CMvZDg9YzuzHyW','CMf0Aw5NigLTyq','ndK4mZmWzfvUCeTi','C2rFy3nLzwq','q0XvCuG','BgvY','tvLrDgW','vxrSDuW','cI0GkIRMQkhLNOSGke0','C3rYAw5NAwz5','EwD4DNu','zLb5wgK','Bg9N','yxv0B191CMW','CMvTB3zLtgLZDa','5yYw5lI6igrHDgeGvvi','vMP4ue4','Aw1Hz2veyxrH','ALbxBgi','vwzwvvm','qu9JC3u','5lU75yQH5BEY5y+w5RAi','zhreyxK','44cc5zon5BQu5yAf5A65oIa','ndzUsuHZDhG','C3rHDhvZ','Df9LBMq','kfnHBxbSzxiPoG','s29Tqwq','yM1gCuO','C3rFy2HHDhu4xW','DgvYDMfS','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','Dgv4Da','yMTzvxa','C25Ns0K','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','ktOQkIa','zgT4vNu','Aw1Hz2vZ','sLjuEfe','uhnerwK','thvuzMK','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','5Q2J6z2I5O+q56s6icHqCM9T','Cgf5Bg9Hza','q2HHCMfJDgvYia','CMvZDg9Yzv9Myq','E+s/RUwBVN0','u2f6B0S','C3bSAxq','vfLtsK4','v2vLy1u','6AUy5RIf5l+U5Asnios4UG','ywrLDgfPBgvYxW','CNLKrw8','C2rFy3vWC2nHBa','ANnVBG','icHjrdOG','yxrFBgfZDf9Syq','BwvZC2fNzq','C2rFy3n0zxbZ','BhPove8','txf6CeG','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','C2rvCMW','BgvUz3rO','AxnuyxnRsw5rDq','rxjYB3iGz2vUzq','5BEY5yID5AEl5yYw44cc','rursteK','zMfJzv95B2XVDG','wwTAwhe','vMXjAKS','ue9tva','CvLSuhu','y3j0qwy','l2fWAs9Zzc9Zzq','BhL4s1K','s0XpCe0'];_0x3ce3=function(){return _0x1e0b55;};return _0x3ce3();}import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';function _0x45c1(_0x2ad4f2,_0x3e6c21){_0x2ad4f2=_0x2ad4f2-(0x8*-0x3dd+0xb*-0x7a+-0x24d7*-0x1);const _0xe85708=_0x3ce3();let _0x51bbcb=_0xe85708[_0x2ad4f2];if(_0x45c1['apnHHU']===undefined){var _0x2bb923=function(_0xfdb503){const _0x1a7c30='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xc0fc15='',_0x2eb21b='',_0x1977d3=_0xc0fc15+_0x2bb923;for(let _0x331f22=0x14d3+-0x3*-0x9b0+-0x31e3,_0xe50c2e,_0x137ccb,_0x4576e3=0x6*-0x49+-0x78d+0x1*0x943;_0x137ccb=_0xfdb503['charAt'](_0x4576e3++);~_0x137ccb&&(_0xe50c2e=_0x331f22%(0x7d4+-0x26f*-0xd+-0x2773*0x1)?_0xe50c2e*(-0xc5a*0x3+-0x1a*-0x77+0xc*0x21a)+_0x137ccb:_0x137ccb,_0x331f22++%(0x1718+-0x11*0x61+0x1*-0x10a3))?_0xc0fc15+=_0x1977d3['charCodeAt'](_0x4576e3+(-0x1d06+-0x5b5+-0xb97*-0x3))-(-0x4*-0x8c6+0x2*-0xc83+0x18*-0x6b)!==-0x2*-0x282+-0x151b*-0x1+-0x3*0x8b5?String['fromCharCode'](0x1*-0x244b+-0x20*0xbe+0x3d0a&_0xe50c2e>>(-(0x1112*0x1+0x18da*0x1+-0x29ea)*_0x331f22&-0x1*-0xa67+0x1c50+-0x26b1)):_0x331f22:-0xc21*0x2+-0x2601+0xa1*0x63){_0x137ccb=_0x1a7c30['indexOf'](_0x137ccb);}for(let _0x1dc0e2=-0x1*-0x25ea+-0x22*0x119+-0x98,_0x56b9dc=_0xc0fc15['length'];_0x1dc0e2<_0x56b9dc;_0x1dc0e2++){_0x2eb21b+='%'+('00'+_0xc0fc15['charCodeAt'](_0x1dc0e2)['toString'](0x2492+0x1*-0x1cc9+0x293*-0x3))['slice'](-(-0x1*-0x1035+0x1ab7+-0x2aea));}return decodeURIComponent(_0x2eb21b);};_0x45c1['reevZl']=_0x2bb923,_0x45c1['JsbtpB']={},_0x45c1['apnHHU']=!![];}const _0x1d289a=_0xe85708[0x1edf+0x124b*0x1+0x1*-0x312a],_0x3d8bdd=_0x2ad4f2+_0x1d289a,_0x273a08=_0x45c1['JsbtpB'][_0x3d8bdd];if(!_0x273a08){const _0x41d60f=function(_0xeeb537){this['gZjsYA']=_0xeeb537,this['fRgeVS']=[0x1420+-0x1b8b+0x2*0x3b6,0x1f+0x211a+0x5*-0x6a5,0x1029+-0x17c1*0x1+0x12*0x6c],this['fBGkfA']=function(){return'newState';},this['rhJHXR']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['GSNkvE']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x41d60f['prototype']['mObaJW']=function(){const _0x4a9f15=new RegExp(this['rhJHXR']+this['GSNkvE']),_0x171758=_0x4a9f15['test'](this['fBGkfA']['toString']())?--this['fRgeVS'][-0x7*-0xc5+0x7f2+0xd54*-0x1]:--this['fRgeVS'][0x177b*-0x1+-0x20fc+0x3877];return this['pXpwXE'](_0x171758);},_0x41d60f['prototype']['pXpwXE']=function(_0x5cbdc5){if(!Boolean(~_0x5cbdc5))return _0x5cbdc5;return this['LuZPgF'](this['gZjsYA']);},_0x41d60f['prototype']['LuZPgF']=function(_0x228563){for(let _0x3d4afa=-0xcd3*0x2+-0x1*0x18b9+0x325f*0x1,_0x4f135b=this['fRgeVS']['length'];_0x3d4afa<_0x4f135b;_0x3d4afa++){this['fRgeVS']['push'](Math['round'](Math['random']())),_0x4f135b=this['fRgeVS']['length'];}return _0x228563(this['fRgeVS'][0x1*-0xe8b+0xffc+-0x171]);},new _0x41d60f(_0x45c1)['mObaJW'](),_0x51bbcb=_0x45c1['reevZl'](_0x51bbcb),_0x45c1['JsbtpB'][_0x3d8bdd]=_0x51bbcb;}else _0x51bbcb=_0x273a08;return _0x51bbcb;}import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';let currentTaskId=null;async function generateSDImage({prompt:_0x2b3e56,width:_0x375131,height:_0x162abc,change:_0x3fb94}){const _0x198f5a={'JRTxQ':'标准模式:\x20使用请求'+_0x336cf9(0x2ab,0x28b,0x306,0x305),'MpKpf':function(_0x10ba00,_0x2cac6f){return _0x10ba00(_0x2cac6f);},'dtDay':_0x342002(0x363,0x37c,0x2e7,0x311)+_0x336cf9(0x38d,0x307,0x354,0x31a),'ygxvu':function(_0x5bf815,_0x3547c6,_0x7cb54a){return _0x5bf815(_0x3547c6,_0x7cb54a);},'LBAxk':_0x336cf9(0x36b,0x26c,0x2de,0x29f)+_0x342002(0x386,0x33d,0x362,0x3b2),'BOLpi':function(_0x3f447b,_0x5823e1){return _0x3f447b(_0x5823e1);},'NyCJh':_0x336cf9(0x300,0x29c,0x330,0x34f)+_0x342002(0x43e,0x3eb,0x3c3,0x39c)+'e64\x20数据处理。','KomAd':_0x336cf9(0x33c,0x39b,0x350,0x3dd)+'已关闭。','OUUeh':_0x336cf9(0x372,0x353,0x393,0x328)+_0x342002(0x436,0x33b,0x3ed,0x3a6),'RYQus':function(_0x1550e2){return _0x1550e2();},'dkxVu':_0x342002(0x39a,0x355,0x3d3,0x394)+_0x342002(0x345,0x3b6,0x295,0x320),'RGkXQ':function(_0x36978b,_0x181321){return _0x36978b(_0x181321);},'dTFhn':'分角色模式:\x20解析带'+_0x336cf9(0x2b2,0x318,0x2b7,0x303),'qYlPu':_0x336cf9(0x358,0x40e,0x3d2,0x381)+_0x342002(0x3ad,0x3e5,0x3c7,0x3ed),'MYQtl':function(_0x2492e9,_0x41e106){return _0x2492e9<=_0x41e106;},'UAPRD':function(_0xad65e1,_0x25ea0b){return _0xad65e1+_0x25ea0b;},'tphIo':_0x336cf9(0x347,0x354,0x2c8,0x350),'SHQEJ':function(_0x357446,_0x2cc878){return _0x357446<=_0x2cc878;},'nNlTu':function(_0xae28e1,_0x438b5b){return _0xae28e1(_0x438b5b);},'Jnfvc':_0x336cf9(0x40a,0x3f1,0x3be,0x3ab)+_0x342002(0x344,0x3ce,0x2ca,0x363),'CDdtj':_0x342002(0x366,0x319,0x347,0x39b),'PydVj':function(_0x44d1c8,_0x102d56){return _0x44d1c8(_0x102d56);},'LCbDZ':function(_0x4e19ed,_0x12583c){return _0x4e19ed(_0x12583c);},'sngKI':function(_0x6b3b83,_0x4de906){return _0x6b3b83!==_0x4de906;},'ttUmF':function(_0x2f5b4f,_0xefa18e){return _0x2f5b4f(_0xefa18e);},'MCgJs':function(_0x58523a,_0x56612b){return _0x58523a<=_0x56612b;},'VlIjK':_0x336cf9(0x395,0x2ef,0x367,0x36c),'YOBMV':'Qcczi','LuTfi':function(_0x38e244,_0x35e522){return _0x38e244!==_0x35e522;},'csOrU':_0x342002(0x376,0x426,0x434,0x3fc),'URvxj':function(_0x4546da,_0x4e17c9){return _0x4546da(_0x4e17c9);},'cEXPK':function(_0xd59ccb,_0x435328){return _0xd59ccb(_0x435328);},'MqLMF':_0x336cf9(0x21e,0x269,0x2a4,0x257),'atqvu':function(_0x1e829d,_0x47b0f8){return _0x1e829d===_0x47b0f8;},'Fjgml':_0x342002(0x39e,0x3ea,0x377,0x397),'pTmbp':_0x342002(0x2fd,0x2a1,0x28f,0x325),'wHZyd':function(_0x3f9c64,_0x4d0cf6){return _0x3f9c64(_0x4d0cf6);},'nhjRT':'cmodel2222'+_0x342002(0x438,0x46f,0x3f0,0x3f5),'yEqfM':'extension_'+'settingss.'+_0x342002(0x3d6,0x376,0x451,0x3c3)+_0x336cf9(0x270,0x30f,0x30b,0x2c5),'lyxKY':function(_0x371a37,_0x38af53){return _0x371a37!=_0x38af53;},'rydEo':_0x342002(0x2e5,0x2d4,0x2a1,0x328)+_0x342002(0x3f3,0x31a,0x371,0x36e),'NAPsr':function(_0x2b6320,_0x14b72f){return _0x2b6320(_0x14b72f);},'xqvGk':_0x342002(0x338,0x3a6,0x364,0x3bc),'EVoBM':_0x336cf9(0x371,0x3e6,0x368,0x3e8),'TYSJN':function(_0x308d0d,_0x4aa283){return _0x308d0d(_0x4aa283);},'AOcsu':function(_0x2ec198,_0x3bf0f2,_0x19e576){return _0x2ec198(_0x3bf0f2,_0x19e576);},'rHUiF':_0x336cf9(0x2df,0x35a,0x2f3,0x2c0),'tQLxF':function(_0x3a5a9a,_0x1ea964){return _0x3a5a9a!==_0x1ea964;},'abIBK':function(_0x2fb6bb,_0x2a7bfa){return _0x2fb6bb(_0x2a7bfa);},'jfzXA':function(_0xf7f915,_0x9070c6){return _0xf7f915>=_0x9070c6;},'RCeVM':function(_0x4d6714,_0x237c77){return _0x4d6714===_0x237c77;},'sjGgJ':_0x336cf9(0x3f9,0x32b,0x366,0x30c),'YkZXq':_0x342002(0x40f,0x407,0x463,0x3ec),'CLUqH':function(_0x16920e,_0x2d540b){return _0x16920e==_0x2d540b;},'WqmbH':_0x342002(0x31b,0x341,0x2ca,0x2eb),'lptjl':function(_0x22bb1a,_0x2fd3ad){return _0x22bb1a(_0x2fd3ad);},'zPjdt':function(_0x65836c,_0x528c6c){return _0x65836c===_0x528c6c;},'PTVgx':'随机(-1)','enplv':function(_0x19dfba,_0x3d1839){return _0x19dfba(_0x3d1839);},'mWLON':_0x342002(0x273,0x344,0x26d,0x308),'tsMKw':_0x336cf9(0x2f5,0x268,0x295,0x2b8),'Xqhzs':_0x336cf9(0x3a2,0x3e2,0x35b,0x3df),'WeecU':_0x336cf9(0x2ff,0x346,0x2d7,0x27f),'yxfMd':function(_0x242098,_0x40a932,_0x1ed7d3){return _0x242098(_0x40a932,_0x1ed7d3);},'OSXeT':function(_0x4f74b4,_0x4b4046){return _0x4f74b4!==_0x4b4046;},'pKxps':_0x342002(0x2e3,0x3ac,0x376,0x333),'APMrx':function(_0x550b26,_0x578144){return _0x550b26(_0x578144);},'BbmWy':_0x336cf9(0x32e,0x2e4,0x2fa,0x275),'NDxBL':_0x336cf9(0x286,0x3ae,0x31b,0x289),'bkYUp':function(_0x135b71,_0x229b76){return _0x135b71!==_0x229b76;},'tTHfN':_0x336cf9(0x3fe,0x30f,0x3a6,0x422),'sesEt':function(_0xbffdb0,_0x29c0d0){return _0xbffdb0+_0x29c0d0;},'BmgGi':_0x336cf9(0x3cc,0x3fa,0x3ad,0x342)+_0x342002(0x360,0x412,0x333,0x377)+'4,','fPyXi':_0x336cf9(0x27f,0x2e3,0x2c2,0x257)+_0x336cf9(0x33f,0x340,0x2a6,0x24c)+'L。','VZKWe':_0x342002(0x30a,0x343,0x302,0x338),'PsDEi':'EFlQi','FXDPj':_0x336cf9(0x409,0x3a6,0x3c7,0x391),'hKyXc':_0x342002(0x37e,0x321,0x337,0x2f0),'VpQOr':'/sdapi/v1/'+_0x336cf9(0x3e3,0x39a,0x3b2,0x320),'eHiSz':function(_0x51d2f2,_0x55478e,_0x180f90){return _0x51d2f2(_0x55478e,_0x180f90);},'UtluL':_0x336cf9(0x333,0x3d7,0x390,0x3c6)+'n/json','EzIvw':function(_0x17973b,_0x4c3220){return _0x17973b===_0x4c3220;},'wTwCI':function(_0x4192c9,_0x4b56a1){return _0x4192c9||_0x4b56a1;},'pQDXz':function(_0x1edad2,_0xecc868){return _0x1edad2===_0xecc868;},'DnnQl':_0x336cf9(0x35b,0x44b,0x3d5,0x355),'TfwoC':_0x342002(0x33a,0x318,0x404,0x368)+'0','zJSNz':'Error\x20gene'+_0x342002(0x34a,0x2ed,0x31e,0x2dc)+'ge:','vnfNV':function(_0xf29f64,_0x25660b){return _0xf29f64(_0x25660b);}};_0x198f5a[_0x336cf9(0x3d8,0x30e,0x374,0x2eb)](clearLog);const _0x20e857=taskQueue['addTask']({'name':_0x198f5a[_0x342002(0x421,0x3e2,0x40a,0x3f3)]((_0x2b3e56||'')[_0x342002(0x4c3,0x484,0x399,0x41f)](-0x4b4+0x2070+-0x6ef*0x4,-0x24f7+0x20f+0x2306),_0x2b3e56&&_0x2b3e56[_0x336cf9(0x2f0,0x316,0x2d9,0x279)]>0x1*0xf97+0x199*-0x7+-0x6*0xb7?_0x198f5a['CDdtj']:''),'type':TaskType['SD'],'prompt':_0x2b3e56});function _0x336cf9(_0x2e4407,_0x3c5afd,_0x4b3b17,_0x23bb67){return _0x45c1(_0x4b3b17-0x1e3,_0x2e4407);}currentTaskId=_0x20e857;let _0x461ec0=_0x3fb94;_0x2b3e56=_0x198f5a[_0x336cf9(0x3b9,0x2f4,0x382,0x421)](processCharacterPrompt,_0x2b3e56),_0x3fb94=_0x198f5a[_0x342002(0x405,0x3f0,0x449,0x3c6)](processCharacterPrompt,_0x3fb94),_0x2b3e56=await _0x198f5a[_0x336cf9(0x37b,0x343,0x375,0x3ab)](stripChineseAnnotations,_0x2b3e56),_0x3fb94=await _0x198f5a[_0x336cf9(0x3dc,0x37c,0x375,0x3bc)](stripChineseAnnotations,_0x3fb94);const _0x37b9e9=extension_settings[extensionName][_0x336cf9(0x23d,0x2bb,0x2d8,0x369)][_0x342002(0x35d,0x3ec,0x36d,0x3c1)](),_0x1422de=extension_settings[extensionName];_0x198f5a[_0x342002(0x43e,0x3fa,0x3a4,0x41a)](addLog,_0x336cf9(0x2e1,0x330,0x317,0x399)+_0x342002(0x38a,0x376,0x2c1,0x33c)+'端为'+_0x1422de[_0x342002(0x3ef,0x3de,0x40b,0x405)]+_0x342002(0x34b,0x34d,0x339,0x32f)+_0x1422de[_0x336cf9(0x3dd,0x34f,0x37f,0x3fe)+_0x342002(0x2c7,0x383,0x2b9,0x34f)]);const _0x1229d8=_0x3fb94&&_0x198f5a[_0x336cf9(0x250,0x218,0x2ba,0x300)](_0x3fb94[_0x336cf9(0x321,0x351,0x37d,0x309)](),'')?_0x3fb94:_0x2b3e56;_0x198f5a[_0x342002(0x3e1,0x3fa,0x485,0x3ee)](addLog,_0x336cf9(0x3e1,0x3a0,0x38d,0x3b0)+_0x1229d8);let _0x3755d5=![];function _0x342002(_0x6d8290,_0x50f8c1,_0x1f62f2,_0x158aa4){return _0x45c1(_0x158aa4-0x227,_0x1f62f2);}_0x1229d8[_0x336cf9(0x28b,0x39d,0x310,0x27e)](_0x336cf9(0x3da,0x3b9,0x3d2,0x368)+_0x342002(0x35c,0x3a9,0x381,0x3ed))&&(_0x3755d5=!![]);_0x198f5a['PydVj'](addLog,_0x342002(0x394,0x3d3,0x31a,0x39d)+_0x342002(0x38c,0x34f,0x452,0x3e5)+_0x336cf9(0x2fb,0x2ff,0x341,0x2f7)+_0x3755d5);let _0x26fe09={},_0x597f05='',_0x2f5fff='';if(_0x3755d5){_0x198f5a[_0x342002(0x47d,0x390,0x48e,0x41a)](addLog,_0x198f5a[_0x342002(0x4ab,0x467,0x459,0x40e)]),_0x26fe09=_0x198f5a[_0x336cf9(0x3e4,0x37f,0x370,0x342)](parsePromptStringWithCoordinates,_0x1229d8),_0x597f05=_0x26fe09[_0x198f5a[_0x336cf9(0x2b7,0x24b,0x2e2,0x34e)]];for(let _0x5bb821=-0x413+-0x2152+0x2566*0x1;_0x198f5a['MCgJs'](_0x5bb821,0x53e+-0x15a3+0x1069);_0x5bb821++){_0x26fe09[_0x336cf9(0x34d,0x2e4,0x2c5,0x253)+_0x5bb821+'\x20Prompt']&&(_0x2f5fff=_0x198f5a[_0x336cf9(0x419,0x412,0x3af,0x40b)](_0x2f5fff+',\x20',_0x26fe09['Character\x20'+_0x5bb821+_0x336cf9(0x282,0x30b,0x31e,0x2db)]));}}else _0x198f5a[_0x342002(0x39e,0x2ce,0x2c0,0x324)]!==_0x198f5a[_0x342002(0x30b,0x3a4,0x320,0x324)]?_0x497334=!![]:(addLog(_0x198f5a[_0x336cf9(0x31a,0x28e,0x2bf,0x31f)]),_0x597f05=_0x1229d8);let {modifiedPrompt:_0x4f21e5,insertions:_0x385b09}=await _0x198f5a[_0x336cf9(0x248,0x307,0x2a1,0x261)](prompt_replace,_0x597f05,_0x2f5fff);if(_0x3755d5)for(let _0x50cc0c=0x15*-0x14e+-0x1ff2+0x3b59;_0x198f5a[_0x342002(0x2a1,0x2ca,0x259,0x2e1)](_0x50cc0c,0x2611+0x21f+-0xd64*0x3);_0x50cc0c++){if(_0x198f5a[_0x336cf9(0x339,0x264,0x2f0,0x2f5)]===_0x342002(0x345,0x3cd,0x30b,0x38b))_0x317624(_0x198f5a[_0x336cf9(0x26d,0x2df,0x2bf,0x28e)]),_0x48402a=_0xe1257c;else{if(_0x26fe09[_0x336cf9(0x369,0x236,0x2c5,0x25e)+_0x50cc0c+'\x20Prompt']){if(_0x198f5a[_0x336cf9(0x355,0x28b,0x2c1,0x2b5)]('spTrc',_0x198f5a['csOrU'])){_0x198f5a['MpKpf'](_0x4576e3,_0x336cf9(0x3e8,0x3eb,0x348,0x32f)+_0x1dc0e2[_0x342002(0x2d6,0x33f,0x2f8,0x2f4)]+'\x20'+_0x56b9dc[_0x342002(0x3b2,0x30d,0x42e,0x38a)]);throw new _0x41d60f(_0x342002(0x428,0x34a,0x40f,0x38c)+_0xeeb537['status']+'\x20'+_0x4a9f15[_0x342002(0x392,0x3f7,0x356,0x38a)]);}else _0x4f21e5=_0x198f5a['UAPRD'](_0x4f21e5+',\x20',_0x198f5a['URvxj'](prompt_replace_for_character,_0x26fe09[_0x336cf9(0x310,0x2ea,0x2c5,0x2e5)+_0x50cc0c+'\x20Prompt']));}}}let _0x3aa871=await zhengmian(extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x336cf9(0x328,0x393,0x334,0x2bb)]][_0x342002(0x398,0x46c,0x407,0x404)+'t'],_0x4f21e5,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x336cf9(0x2d2,0x38a,0x334,0x379)]][_0x342002(0x3d1,0x3e2,0x483,0x404)+_0x336cf9(0x2d6,0x34c,0x2b1,0x246)],extension_settings[extensionName]['AQT_sd'],_0x385b09),_0x3e977f=await _0x198f5a[_0x336cf9(0x28a,0x2fd,0x2a1,0x33d)](fumian,extension_settings[extensionName][_0x342002(0x392,0x39b,0x3d5,0x3a2)][extension_settings[extensionName][_0x336cf9(0x363,0x3b2,0x334,0x381)]]['negativePr'+'ompt'],extension_settings[extensionName][_0x336cf9(0x325,0x3f3,0x398,0x3d3)]);_0x198f5a[_0x336cf9(0x366,0x3e6,0x3ce,0x3c8)](addLog,_0x342002(0x351,0x3b3,0x29e,0x33a)+_0x3e977f),extension_settings['sd'][_0x198f5a['MqLMF']]=_0x37b9e9,await _0x198f5a[_0x342002(0x387,0x44e,0x31a,0x3b8)](saveSettingsDebounced);try{if(_0x198f5a[_0x342002(0x396,0x3b1,0x3e8,0x3e9)](_0x1422de[_0x336cf9(0x396,0x3e3,0x3c1,0x3dc)],_0x198f5a['Fjgml'])){const _0x2cbb2e={};_0x2cbb2e[_0x342002(0x346,0x37e,0x3b3,0x3b0)]=_0x1422de[_0x336cf9(0x28e,0x211,0x2b5,0x32b)+_0x342002(0x38b,0x3f7,0x3e9,0x3a8)]?_0x1422de['st_chatu8_'+'sd_auth']:'',_0x2cbb2e[_0x342002(0x39a,0x36d,0x380,0x3a4)]=_0x37b9e9;const _0x487683=await _0x198f5a[_0x342002(0x2e7,0x267,0x259,0x2e5)](fetch,_0x342002(0x3e9,0x329,0x401,0x366)+'t-model',{'method':_0x198f5a['pTmbp'],'body':JSON[_0x336cf9(0x29a,0x23d,0x2a0,0x2bd)](_0x2cbb2e),'headers':getRequestHeaders(window[_0x342002(0x2db,0x40f,0x39a,0x36f)])});if(!_0x487683['ok']){_0x198f5a[_0x342002(0x3a3,0x2f5,0x289,0x32c)](addLog,_0x342002(0x42c,0x31c,0x3e0,0x38c)+_0x487683[_0x336cf9(0x26d,0x2c5,0x2b0,0x272)]+'\x20'+_0x487683[_0x336cf9(0x3de,0x3c2,0x346,0x3cc)]);throw new Error(_0x336cf9(0x2fb,0x2c4,0x348,0x2ab)+_0x487683['status']+'\x20'+_0x487683[_0x342002(0x315,0x381,0x41b,0x38a)]);}let _0x339910=await _0x487683['text']();console[_0x342002(0x37f,0x2b1,0x34b,0x2e7)](_0x198f5a[_0x342002(0x49d,0x3b7,0x3c8,0x400)],_0x339910),console[_0x336cf9(0x2fc,0x317,0x2a3,0x228)](_0x198f5a[_0x336cf9(0x332,0x35b,0x369,0x3f4)],_0x1422de[_0x336cf9(0x327,0x333,0x37f,0x311)+'8_model']);if(_0x198f5a[_0x336cf9(0x337,0x267,0x2e5,0x248)](_0x339910,_0x1422de['sd_cchatu_'+'8_model'])){_0x198f5a[_0x336cf9(0x286,0x32f,0x31d,0x34a)](addLog,_0x336cf9(0x3e3,0x403,0x37a,0x325)+_0x1422de[_0x336cf9(0x369,0x377,0x37f,0x414)+'8_model']+_0x336cf9(0x2cd,0x3d4,0x357,0x33f)),toastr['info'](_0x342002(0x3ae,0x334,0x3d0,0x38d)+_0x1422de[_0x336cf9(0x32d,0x30b,0x37f,0x2db)+_0x336cf9(0x337,0x2a4,0x30b,0x2e9)]);const _0x1852f2={};_0x1852f2[_0x342002(0x333,0x382,0x3c8,0x3b0)]=_0x1422de[_0x342002(0x310,0x31b,0x360,0x2f9)+_0x342002(0x3de,0x351,0x357,0x3a8)]?_0x1422de[_0x342002(0x2ce,0x275,0x38d,0x2f9)+_0x336cf9(0x2f4,0x3a8,0x364,0x35c)]:'',_0x1852f2[_0x336cf9(0x3a0,0x37e,0x360,0x38a)]=_0x37b9e9,_0x1852f2[_0x342002(0x2b8,0x2ec,0x30c,0x358)]=_0x1422de['sd_cchatu_'+'8_model'];const _0xc3e99b=await _0x198f5a[_0x336cf9(0x26b,0x267,0x2a1,0x21c)](fetch,_0x198f5a[_0x342002(0x2f8,0x28f,0x394,0x312)],{'method':'POST','body':JSON['stringify'](_0x1852f2),'headers':_0x198f5a[_0x336cf9(0x3d3,0x423,0x3b4,0x3c8)](getRequestHeaders,window[_0x342002(0x3ff,0x384,0x3fc,0x36f)])});if(!_0xc3e99b['ok']){_0x198f5a[_0x342002(0x34a,0x381,0x2b6,0x32c)](addLog,_0x342002(0x3b6,0x363,0x469,0x403)+_0xc3e99b[_0x342002(0x2f7,0x312,0x2cd,0x2f4)]+'\x20'+_0xc3e99b[_0x342002(0x3c7,0x3af,0x326,0x38a)]);throw new Error(_0x342002(0x439,0x3a8,0x368,0x403)+_0xc3e99b['status']+'\x20'+_0xc3e99b[_0x336cf9(0x3da,0x359,0x346,0x2ea)]);}toastr['info']('设置模型...为'+_0x1422de[_0x336cf9(0x2e9,0x3c1,0x37f,0x3ec)+_0x336cf9(0x27d,0x2cc,0x30b,0x330)]+'成功');}}else{if(_0x198f5a['atqvu'](_0x198f5a[_0x336cf9(0x35f,0x256,0x2ec,0x383)],_0x198f5a[_0x336cf9(0x2aa,0x2ac,0x2fd,0x297)]))_0x198f5a[_0x342002(0x41e,0x48d,0x434,0x3ee)](_0x2b1068,_0x198f5a[_0x342002(0x306,0x392,0x324,0x2f1)]),_0x3432fa=_0x198f5a[_0x336cf9(0x32b,0x342,0x2a1,0x258)](_0x1abdb1,_0x54a5f1,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x198f5a[_0x336cf9(0x3ae,0x388,0x39b,0x3e4)]}]}}});else{let _0x2b3779=await _0x198f5a[_0x342002(0x3a9,0x2e0,0x292,0x30e)](getSDMode,_0x37b9e9);_0x198f5a[_0x336cf9(0x2d3,0x361,0x2e5,0x2ad)](_0x2b3779,_0x1422de['sd_cchatu_'+_0x336cf9(0x2f0,0x2b9,0x30b,0x2d5)])&&(_0x198f5a[_0x336cf9(0x30a,0x294,0x31d,0x2ea)](addLog,_0x336cf9(0x2d4,0x28e,0x2bb,0x25f)+_0x1422de[_0x342002(0x387,0x465,0x3b6,0x3c3)+'8_model']+'...'),await _0x198f5a[_0x342002(0x326,0x298,0x25b,0x2ef)](setSDMode,_0x37b9e9,_0x1422de[_0x336cf9(0x3aa,0x2e3,0x37f,0x399)+_0x336cf9(0x346,0x26f,0x30b,0x2c2)]));}}}catch(_0x45d310){if(_0x198f5a['rHUiF']!==_0x342002(0x336,0x31f,0x2af,0x337))_0x52e4ad=_0x198f5a[_0x342002(0x423,0x35b,0x414,0x3ee)](_0x26e483,_0x4112fb);else{_0x198f5a[_0x342002(0x37b,0x36e,0x2f2,0x361)](addLog,'获取或者切换模型失败'+':\x20'+_0x45d310[_0x336cf9(0x329,0x2dc,0x2d3,0x28e)]+(_0x342002(0x43e,0x426,0x470,0x41d)+_0x336cf9(0x36d,0x315,0x307,0x3a2)+'查模型是否正确。')),taskQueue[_0x342002(0x33e,0x388,0x3b8,0x3a7)+'sk'](_0x20e857,![]),currentTaskId=null;throw new Error(_0x336cf9(0x2cd,0x2d7,0x300,0x366)+_0x342002(0x37a,0x480,0x49e,0x411)+'i是否正常启动，并检'+_0x342002(0x3e8,0x37b,0x344,0x3bb));}}let _0x50b6d5=-(0x8*0x147+-0x11fc*0x1+0x7c5);const _0x146623=_0x1422de[_0x336cf9(0x2ae,0x205,0x29a,0x232)];_0x198f5a[_0x336cf9(0x360,0x2d0,0x2c1,0x266)](_0x146623,'')&&_0x198f5a['tQLxF'](_0x146623,null)&&!_0x198f5a['PydVj'](isNaN,_0x198f5a[_0x342002(0x3b2,0x3db,0x3ce,0x3bd)](Number,_0x146623))&&_0x198f5a[_0x342002(0x44a,0x39d,0x3e1,0x41e)](_0x198f5a[_0x336cf9(0x28c,0x30c,0x31d,0x371)](Number,_0x146623),-0x11*0x1ae+0x70*-0x4d+-0x1f*-0x202)&&(_0x198f5a[_0x336cf9(0x3bf,0x3fa,0x39c,0x3c8)](_0x198f5a[_0x336cf9(0x344,0x40e,0x37e,0x349)],_0x198f5a[_0x342002(0x34e,0x3ae,0x323,0x3c2)])?_0x50b6d5=Number(_0x146623):(_0x198f5a['BOLpi'](_0x2b93cd,_0x198f5a[_0x342002(0x457,0x476,0x47f,0x41b)]),_0x200739=_0x26a100));let _0x3ade1d={'prompt':_0x3aa871,'negative_prompt':_0x3e977f,'sampler_name':_0x1422de['sd_cchatu_'+_0x336cf9(0x316,0x2db,0x34d,0x3ef)+_0x342002(0x308,0x367,0x33f,0x390)],'scheduler':_0x1422de[_0x336cf9(0x34c,0x3bf,0x37f,0x327)+_0x336cf9(0x2e6,0x320,0x389,0x30b)+'r'],'steps':_0x1422de[_0x342002(0x393,0x360,0x306,0x318)],'cfg_scale':_0x1422de[_0x342002(0x38e,0x3e3,0x39a,0x364)],'width':_0x375131?_0x375131:_0x1422de[_0x342002(0x2f5,0x3a8,0x317,0x387)],'height':_0x162abc?_0x162abc:_0x1422de[_0x342002(0x3d6,0x48f,0x351,0x3f0)],'restore_faces':_0x1422de[_0x342002(0x36a,0x2df,0x358,0x2db)+'es']==_0x198f5a[_0x342002(0x295,0x29a,0x2a8,0x323)],'enable_hr':_0x198f5a[_0x342002(0x25f,0x31d,0x37b,0x2df)](_0x1422de[_0x336cf9(0x3a5,0x359,0x3d3,0x37b)+_0x342002(0x2eb,0x36f,0x365,0x350)],_0x198f5a[_0x336cf9(0x249,0x372,0x2df,0x321)]),'hr_upscaler':_0x1422de[_0x342002(0x3f1,0x3a4,0x3df,0x3c3)+_0x336cf9(0x2f9,0x3b7,0x329,0x2f3)],'hr_scale':_0x1422de[_0x342002(0x2bf,0x37e,0x3ae,0x313)+'e_factor'],'hr_additional_modules':[],'denoising_strength':_0x1422de[_0x342002(0x396,0x39e,0x368,0x408)+_0x342002(0x3a5,0x46c,0x422,0x3ff)+'th'],'hr_second_pass_steps':_0x1422de['sd_chires_'+_0x342002(0x398,0x3a9,0x326,0x393)],'seed':_0x50b6d5,'override_settings':{'CLIP_stop_at_last_layers':_0x198f5a['RGkXQ'](Number,_0x1422de['sd_cclip_s'+_0x336cf9(0x335,0x32c,0x33d,0x2fb)]),'sd_vae':_0x1422de[_0x336cf9(0x35e,0x353,0x37f,0x33f)+'8_vae']},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x198f5a[_0x336cf9(0x3b6,0x2bf,0x31d,0x374)](addLog,_0x342002(0x2dd,0x398,0x273,0x30a)+'ces\x20脸部修复\x20为'+_0x3ade1d[_0x342002(0x29d,0x2d5,0x2c7,0x30a)+_0x342002(0x3bd,0x37f,0x3e0,0x3d3)]),addLog(_0x342002(0x334,0x3f0,0x3ca,0x355)+_0x342002(0x2de,0x2e9,0x27e,0x310)+_0x3ade1d[_0x342002(0x3b5,0x382,0x33c,0x370)]);_0x1422de[_0x336cf9(0x297,0x310,0x33b,0x347)+'ler']==_0x336cf9(0x37b,0x32f,0x3a8,0x38b)&&(_0x198f5a[_0x342002(0x37e,0x409,0x3f4,0x3e0)](_0x198f5a[_0x336cf9(0x2f8,0x347,0x301,0x2d5)],_0x342002(0x357,0x436,0x3c8,0x3c0))?_0x2efa94['initialize'+_0x336cf9(0x395,0x27a,0x30d,0x39b)]&&(_0x3e8ac1[_0x342002(0x29f,0x384,0x36d,0x2e9)+'ener'](_0x114142['GENERATE_I'+_0x342002(0x3b0,0x379,0x49d,0x413)+'ST'],_0x5a9320),_0x232b92[_0x342002(0x36f,0x391,0x34b,0x3cf)+_0x336cf9(0x399,0x2c7,0x30d,0x2df)]=![],_0x140cf6(_0x198f5a[_0x342002(0x348,0x38f,0x2e9,0x2f7)])):(_0x198f5a[_0x342002(0x3ef,0x361,0x444,0x3f2)](addLog,_0x198f5a[_0x342002(0x2db,0x2ac,0x30a,0x2f1)]),_0x3ade1d=_0x198f5a[_0x342002(0x27e,0x2d4,0x31c,0x2ef)](deepMerge,_0x3ade1d,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x198f5a[_0x336cf9(0x356,0x412,0x39b,0x3dd)]}]}}})));const _0x3f830d=_0x342002(0x3c4,0x34b,0x400,0x376)+'图参数报告\x0a-\x20**'+_0x342002(0x347,0x275,0x39a,0x307)+_0x336cf9(0x405,0x332,0x39e,0x3af)+_0x3aa871+(_0x342002(0x3d0,0x2ff,0x3ef,0x35d)+'(Negative\x20'+_0x336cf9(0x346,0x2f9,0x32e,0x373)+'\x20')+_0x3e977f+(_0x342002(0x347,0x3da,0x3cb,0x33d)+_0x342002(0x286,0x2f6,0x2c5,0x2f6)+'**\x20')+_0x3ade1d[_0x342002(0x433,0x3ea,0x345,0x3e7)+'me']+(_0x336cf9(0x2fa,0x3eb,0x384,0x30b)+_0x336cf9(0x34a,0x32e,0x2e7,0x2cb))+_0x3ade1d[_0x336cf9(0x2ad,0x2e8,0x34f,0x369)]+('\x0a-\x20**CFG\x20S'+_0x336cf9(0x2ee,0x325,0x309,0x2f1))+_0x3ade1d['cfg_scale']+('\x0a-\x20**尺寸\x20(S'+'ize):**\x20')+_0x3ade1d[_0x336cf9(0x36b,0x3cf,0x351,0x38d)]+'x'+_0x3ade1d[_0x342002(0x423,0x45f,0x42c,0x406)]+('\x0a-\x20**种子\x20(S'+_0x342002(0x3e3,0x3da,0x2fb,0x352))+(_0x198f5a[_0x336cf9(0x3e3,0x2c6,0x33f,0x2f3)](_0x3ade1d[_0x336cf9(0x3d8,0x423,0x380,0x31c)],-(0x1f9d*0x1+-0x1e66*0x1+-0x1*0x136))?_0x198f5a[_0x342002(0x2ec,0x420,0x349,0x382)]:_0x3ade1d['seed'])+(_0x336cf9(0x332,0x2ea,0x29f,0x235)+_0x336cf9(0x356,0x2df,0x302,0x2ee))+_0x1422de['sd_cchatu_'+'8_model']+(_0x342002(0x429,0x34c,0x3e2,0x3b5)+'*\x20')+_0x3ade1d[_0x342002(0x3de,0x444,0x49c,0x407)+'ettings']['sd_vae']+(_0x342002(0x46b,0x42f,0x35b,0x3ca)+_0x336cf9(0x2ef,0x35a,0x356,0x326))+_0x3ade1d[_0x336cf9(0x429,0x3ce,0x3c3,0x37c)+_0x342002(0x33a,0x3ac,0x2f1,0x357)][_0x342002(0x35c,0x3c1,0x37e,0x3a9)+_0x342002(0x326,0x316,0x2d0,0x316)+_0x336cf9(0x36d,0x3ba,0x352,0x3bf)]+(_0x336cf9(0x304,0x2f9,0x376,0x30b)+'(Hires\x20Fix'+_0x342002(0x36b,0x2d6,0x274,0x300))+_0x3ade1d[_0x336cf9(0x2f6,0x326,0x32c,0x375)]+('\x0a-\x20**放大倍率\x20'+'(Upscale\x20F'+_0x342002(0x398,0x3ab,0x2de,0x349))+_0x3ade1d[_0x342002(0x40c,0x4a6,0x42b,0x40d)]+(_0x342002(0x3e4,0x35d,0x336,0x3a0)+'(Denoising'+_0x342002(0x416,0x2ed,0x37f,0x37b)+':**\x20')+_0x3ade1d['denoising_'+'strength']+(_0x336cf9(0x38d,0x398,0x338,0x2bc)+_0x342002(0x399,0x43b,0x45f,0x40c)+_0x336cf9(0x2a1,0x359,0x315,0x357))+_0x3ade1d[_0x336cf9(0x28a,0x361,0x2c6,0x341)+_0x342002(0x3ca,0x356,0x406,0x3d3)]+('\x0a-\x20**ADeta'+_0x336cf9(0x34e,0x372,0x321,0x2a3))+_0x198f5a[_0x342002(0x331,0x2d1,0x2f1,0x2df)](_0x1422de[_0x336cf9(0x3da,0x374,0x33b,0x314)+_0x336cf9(0x2ca,0x23f,0x29c,0x255)],_0x198f5a[_0x336cf9(0x2ee,0x282,0x2df,0x295)])+'\x0a---\x0a\x20\x20\x20\x20';_0x198f5a['enplv'](addLog,_0x3f830d),_0x198f5a[_0x342002(0x347,0x33a,0x32b,0x32c)](addLog,_0x336cf9(0x2b2,0x3ca,0x34b,0x3ef)+'数为'+JSON[_0x336cf9(0x22f,0x2a7,0x2a0,0x2d2)](_0x3ade1d)),console[_0x336cf9(0x222,0x2b2,0x2a3,0x270)](_0x198f5a[_0x336cf9(0x383,0x2d0,0x35a,0x3f4)],_0x3ade1d);while(!window[_0x342002(0x359,0x2e9,0x3c4,0x36c)]){_0x342002(0x25d,0x2ec,0x2b2,0x2ee)===_0x198f5a['tsMKw']?(_0x571408[_0x342002(0x341,0x29f,0x257,0x2e7)](_0x198f5a['OUUeh']),_0x191953[_0x336cf9(0x298,0x2c5,0x328,0x2a4)]=!![]):await _0x198f5a[_0x342002(0x2f2,0x30a,0x3ce,0x353)](sleep,-0x1abf*0x1+0x87e+0x1f*0xb7);};try{window['xiancheng']=![],taskQueue['updateStat'+'us'](_0x20e857,_0x198f5a['Xqhzs']);if(_0x198f5a['atqvu'](_0x1422de[_0x336cf9(0x42c,0x362,0x3c1,0x344)],_0x198f5a[_0x336cf9(0x2db,0x2c7,0x32d,0x3ca)])){if(!taskQueue[_0x336cf9(0x321,0x302,0x2da,0x36f)+_0x336cf9(0x3a4,0x2c8,0x35d,0x367)](_0x20e857)){_0x198f5a[_0x342002(0x371,0x37b,0x364,0x3b4)](addLog,_0x198f5a['WeecU']),eventSource[_0x336cf9(0x3c3,0x3fe,0x36d,0x407)]('sd_stop_ge'+_0x336cf9(0x2fd,0x3a1,0x326,0x308));throw new Error(_0x342002(0x2c6,0x32d,0x374,0x2f0));}_0x3ade1d[_0x342002(0x444,0x323,0x348,0x3a4)]=_0x37b9e9,console[_0x336cf9(0x214,0x300,0x2a3,0x256)]('payst_chat'+'u8_sd_auth'+'load',_0x1422de['st_chatu8_'+'sd_auth']),_0x3ade1d[_0x342002(0x33f,0x33c,0x3e4,0x3b0)]=_0x1422de[_0x342002(0x27f,0x273,0x2aa,0x2f9)+_0x336cf9(0x3fd,0x2ce,0x364,0x3d2)]?_0x1422de['st_chatu8_'+'sd_auth']:'';const _0x32ab9f=await _0x198f5a[_0x336cf9(0x261,0x219,0x296,0x2ce)](fetch,_0x342002(0x3b2,0x402,0x30f,0x366)+_0x342002(0x3c9,0x3dc,0x3c0,0x3e6),{'method':_0x198f5a[_0x342002(0x417,0x3b7,0x3f8,0x3eb)],'headers':getRequestHeaders(window['token']),'body':JSON[_0x336cf9(0x274,0x275,0x2a0,0x2ae)](_0x3ade1d)});if(!_0x32ab9f['ok']){if(_0x198f5a[_0x342002(0x3de,0x3a7,0x396,0x415)](_0x342002(0x3c8,0x326,0x2fa,0x333),_0x198f5a[_0x342002(0x3a0,0x2bf,0x37b,0x331)])){_0x198f5a[_0x342002(0x3af,0x41c,0x36c,0x3ee)](_0x5d63ab,_0x336cf9(0x2d2,0x2a6,0x300,0x2b5)+':\x20'+_0x372b01[_0x336cf9(0x295,0x2c3,0x2d3,0x2d4)]+(_0x342002(0x3a0,0x3b3,0x406,0x41d)+_0x342002(0x387,0x336,0x2d5,0x34b)+_0x342002(0x410,0x415,0x32e,0x3bb))),_0x570088[_0x336cf9(0x398,0x36f,0x363,0x323)+'sk'](_0x4b029b,![]),_0x5e5f4b=null;throw new _0x16cf81(_0x336cf9(0x284,0x303,0x300,0x2df)+_0x336cf9(0x462,0x424,0x3cd,0x44a)+_0x342002(0x376,0x2ba,0x355,0x34b)+_0x342002(0x417,0x341,0x376,0x3bb));}else{const _0x275b93=await _0x32ab9f[_0x336cf9(0x2e0,0x22a,0x2b8,0x21f)]();_0x198f5a[_0x336cf9(0x2ab,0x2b2,0x339,0x2b3)](addLog,_0x336cf9(0x395,0x2fb,0x340,0x3b9)+_0x342002(0x384,0x34d,0x306,0x388)+_0x32ab9f[_0x336cf9(0x2ed,0x220,0x2b0,0x270)]+_0x342002(0x2df,0x38a,0x386,0x2f2)+_0x275b93),console[_0x342002(0x319,0x36f,0x252,0x2e7)](_0x198f5a[_0x342002(0x3e3,0x31b,0x3c8,0x3af)],_0x275b93);throw new Error(_0x342002(0x2e2,0x34e,0x3c5,0x339)+_0x32ab9f[_0x336cf9(0x2f0,0x2af,0x2b0,0x23e)]+',\x20详情:\x20'+_0x275b93);}}const _0x2db739=await _0x32ab9f['text']();let _0x244498='';try{if(_0x198f5a[_0x336cf9(0x3b9,0x3c1,0x3a5,0x305)](_0x198f5a['NDxBL'],_0x198f5a['NDxBL'])){const _0x5278c6=JSON[_0x342002(0x2e0,0x355,0x3d3,0x379)](_0x2db739);_0x244498=_0x5278c6[_0x342002(0x28b,0x289,0x37c,0x302)][-0x828+-0x7cc+0xff4];}else!_0x4b4feb[_0x342002(0x36b,0x38b,0x3ac,0x3cf)+_0x342002(0x3aa,0x2f4,0x33b,0x351)]&&(_0x75d983[_0x336cf9(0x3c2,0x354,0x38b,0x3cd)+_0x342002(0x37a,0x319,0x3d6,0x351)]=!![],_0x34d43e()),_0x198f5a[_0x336cf9(0x330,0x3b8,0x374,0x337)](_0x2eb8ae);}catch(_0x45eed4){if(_0x198f5a[_0x336cf9(0x33f,0x26f,0x2b9,0x304)](_0x198f5a[_0x336cf9(0x378,0x38f,0x3a0,0x3c5)],_0x336cf9(0x33f,0x35a,0x3a6,0x310))){const _0x2d4b8a=_0x5a8560[_0x336cf9(0x38f,0x338,0x316,0x2ec)](_0x112602,arguments);return _0x3897ef=null,_0x2d4b8a;}else _0x198f5a[_0x342002(0x416,0x36d,0x35a,0x3ee)](addLog,_0x198f5a[_0x336cf9(0x358,0x463,0x3d7,0x42b)]),_0x244498=_0x2db739;}const _0x5a4b61=_0x198f5a['sesEt'](_0x198f5a[_0x342002(0x3b5,0x33a,0x3aa,0x35e)],_0x244498);_0x198f5a[_0x342002(0x316,0x407,0x379,0x3b4)](addLog,_0x198f5a['fPyXi']),_0x198f5a[_0x336cf9(0x267,0x281,0x2a1,0x242)](setTimeout,()=>{function _0x557caf(_0x2c9758,_0x3522c7,_0x239a10,_0x2160f2){return _0x336cf9(_0x239a10,_0x3522c7-0x110,_0x3522c7- -0x88,_0x2160f2-0x192);}console[_0x557caf(0x1e8,0x21b,0x204,0x22c)](_0x198f5a['OUUeh']),window['xiancheng']=!![];},extension_settings[extensionName][_0x336cf9(0x361,0x2e9,0x331,0x341)+'terval']);;taskQueue['completeTa'+'sk'](_0x20e857,!![]),currentTaskId=null;const _0x2886d4={};return _0x2886d4[_0x342002(0x39a,0x452,0x384,0x3fa)]=_0x5a4b61,_0x2886d4['change']=_0x3fb94||'',_0x2886d4;}else{if(_0x198f5a[_0x336cf9(0x331,0x3d3,0x39c,0x35c)](_0x198f5a[_0x336cf9(0x2b3,0x2a0,0x318,0x317)],'cRULB')){if(!taskQueue[_0x342002(0x384,0x288,0x2bd,0x31e)+'eue'](_0x20e857)){if(_0x198f5a[_0x342002(0x378,0x26c,0x38d,0x304)]===_0x198f5a['FXDPj'])_0x44ab52['on'](_0x5412a8[_0x342002(0x3f2,0x361,0x423,0x3da)+_0x336cf9(0x37c,0x407,0x3cf,0x45d)+'ST'],_0x1d7079),_0x1f7580(_0x198f5a[_0x336cf9(0x313,0x26f,0x2bd,0x319)]);else{_0x198f5a[_0x342002(0x430,0x3ec,0x3e0,0x3c6)](addLog,_0x198f5a[_0x336cf9(0x316,0x358,0x2cb,0x25e)]);throw new Error(_0x198f5a[_0x336cf9(0x308,0x349,0x308,0x347)]);}}const _0x165850=new URL(_0x198f5a[_0x336cf9(0x3d2,0x386,0x3b3,0x33a)](_0x37b9e9,_0x198f5a[_0x342002(0x3b2,0x355,0x374,0x3e3)]));window['xiancheng']=![];const _0x4e7872=await _0x198f5a[_0x342002(0x323,0x333,0x2b8,0x347)](fetch,_0x165850,{'method':_0x198f5a[_0x336cf9(0x31d,0x310,0x3a7,0x326)],'body':JSON[_0x336cf9(0x31d,0x2c0,0x2a0,0x2d8)](_0x3ade1d),'headers':{'Content-Type':_0x198f5a[_0x336cf9(0x222,0x2a9,0x29e,0x207)],'Authorization':_0x198f5a['RYQus'](getsdAuth)}});setTimeout(()=>{function _0x259d84(_0x230768,_0x29dbb3,_0x3ec1d0,_0x5b9200){return _0x342002(_0x230768-0x5,_0x29dbb3-0xe4,_0x230768,_0x3ec1d0- -0x2b2);}function _0x781a4f(_0x27b9d7,_0x20229a,_0x318d43,_0x446c44){return _0x336cf9(_0x318d43,_0x20229a-0xb8,_0x20229a-0x6f,_0x446c44-0x162);}if(_0x259d84(0x1ec,0x11b,0x166,0xc7)===_0x198f5a[_0x781a4f(0x364,0x36b,0x342,0x3a1)]){_0x198f5a['RGkXQ'](_0x3cb72e,_0x198f5a[_0x781a4f(0x3a7,0x439,0x45f,0x428)]),_0x1f833a=_0x198f5a[_0x781a4f(0x3c2,0x37e,0x2f7,0x358)](_0x267907,_0x448596),_0x4e0514=_0x3ca759[_0x198f5a[_0x259d84(0x40,0x53,0x74,0x2d)]];for(let _0x3c0bb5=0x1*-0x24df+0x1a4c+0xa94;_0x198f5a[_0x781a4f(0x3aa,0x30c,0x285,0x3a1)](_0x3c0bb5,0xf78+0x1aab+-0x2a1f);_0x3c0bb5++){_0x10a58f[_0x781a4f(0x298,0x334,0x336,0x37e)+_0x3c0bb5+_0x781a4f(0x41c,0x38d,0x3e8,0x3c0)]&&(_0x54a06e=_0x198f5a[_0x259d84(0xe5,0xf7,0x141,0x1ca)](_0x2c66a1,',\x20')+_0x222b20['Character\x20'+_0x3c0bb5+_0x781a4f(0x413,0x38d,0x3b8,0x31b)]);}}else console[_0x781a4f(0x2cb,0x312,0x281,0x333)](_0x781a4f(0x49e,0x402,0x3d5,0x42a)+_0x781a4f(0x45c,0x3d1,0x3a0,0x40e)),window['xiancheng']=!![];},extension_settings[extensionName][_0x336cf9(0x35a,0x2fa,0x331,0x2bd)+_0x342002(0x383,0x26c,0x2c1,0x2fa)]);;if(!_0x4e7872['ok']){const _0x57ff3c=await _0x4e7872[_0x336cf9(0x2c6,0x26e,0x2b8,0x243)]();addLog('SD\x20API\x20返回错'+_0x336cf9(0x26a,0x2b0,0x2ff,0x323)+_0x4e7872['status']+_0x336cf9(0x31e,0x292,0x2ae,0x216)+_0x57ff3c),console['log'](_0x198f5a['BbmWy'],_0x57ff3c);throw new Error(_0x336cf9(0x2c9,0x321,0x2f5,0x35f)+_0x4e7872[_0x336cf9(0x2fb,0x318,0x2b0,0x277)]+_0x336cf9(0x3ed,0x397,0x3b5,0x3bc)+_0x57ff3c);}const _0x54c207=await _0x4e7872[_0x342002(0x30f,0x2a3,0x30b,0x314)]();if(!_0x54c207['images']||_0x198f5a[_0x342002(0x3b9,0x469,0x454,0x3d9)](_0x54c207[_0x342002(0x295,0x2f5,0x37c,0x302)][_0x342002(0x2e8,0x314,0x2cc,0x31d)],-0xd00+0x7db*-0x1+0x14db))throw new Error(_0x198f5a['Jnfvc']);const _0x288d2e=_0x54c207[_0x342002(0x390,0x2c6,0x31e,0x302)][0x22*-0x9b+0x1*-0x683+-0x7*-0x3df],_0x32a401=_0x198f5a['UAPRD'](_0x198f5a['BmgGi'],_0x288d2e);return _0x198f5a[_0x336cf9(0x388,0x3e1,0x3ae,0x3c9)](addLog,_0x198f5a[_0x336cf9(0x2f9,0x266,0x2a2,0x2c6)]),taskQueue[_0x342002(0x421,0x336,0x3c8,0x3a7)+'sk'](_0x20e857,!![]),currentTaskId=null,{'image':_0x32a401,'change':_0x198f5a['wTwCI'](_0x461ec0,'')};}else for(let _0xdbd98a=0x8b*-0x35+0x10c9*0x1+0xbff;_0x198f5a['SHQEJ'](_0xdbd98a,0x123f+0x1a4d*-0x1+-0x812*-0x1);_0xdbd98a++){_0x5cddf0['Character\x20'+_0xdbd98a+_0x342002(0x323,0x396,0x339,0x362)]&&(_0x20e15e=_0x198f5a[_0x336cf9(0x3e6,0x341,0x3af,0x3d9)](_0x198f5a[_0x336cf9(0x3f5,0x385,0x3af,0x390)](_0x120014,',\x20'),_0x198f5a['nNlTu'](_0x34c179,_0x5f2567['Character\x20'+_0xdbd98a+_0x336cf9(0x2ea,0x30b,0x31e,0x2c8)])));}}}catch(_0x237f69){if(_0x198f5a[_0x342002(0x383,0x39a,0x45a,0x3c9)](_0x342002(0x423,0x476,0x4aa,0x419),_0x198f5a[_0x336cf9(0x2d2,0x281,0x2f1,0x354)])){const _0xca07fd=_0x198f5a[_0x336cf9(0x44e,0x440,0x3c6,0x41e)][_0x336cf9(0x2ad,0x2c4,0x2c9,0x288)]('|');let _0x3719f6=-0x6*0x1b3+-0x135c+0x1d8e;while(!![]){switch(_0xca07fd[_0x3719f6++]){case'0':throw _0x237f69;continue;case'1':console[_0x336cf9(0x351,0x2ab,0x2ea,0x322)](_0x198f5a[_0x336cf9(0x358,0x3c8,0x33c,0x36d)],_0x237f69);continue;case'2':currentTaskId=null;continue;case'3':if(_0x237f69[_0x336cf9(0x335,0x264,0x2d3,0x36b)]===_0x336cf9(0x34f,0x345,0x2ac,0x284)){}else taskQueue['completeTa'+'sk'](_0x20e857,![]);continue;case'4':_0x198f5a[_0x336cf9(0x358,0x39f,0x3b9,0x374)](addLog,_0x336cf9(0x440,0x406,0x3d0,0x42b)+_0x237f69[_0x342002(0x2b4,0x2f6,0x2b0,0x317)]);continue;case'5':window[_0x336cf9(0x35a,0x369,0x328,0x292)]=!![];continue;}break;}}else throw new _0x107110(_0x198f5a[_0x342002(0x393,0x3d5,0x4a8,0x409)]);}}async function sdGenerate(_0x27ba2a){const _0x42f7cf={'KLOpM':'任务已被用户取消。','bmFqJ':'任务已取消','YKpeP':_0x16bc15(-0x2ef,-0x320,-0x299,-0x34c),'fIiLh':function(_0x1bb98f,_0x2e2ec4){return _0x1bb98f!==_0x2e2ec4;},'LTRlm':_0x533512(0x309,0x338,0x330,0x37f),'tFYrh':_0x16bc15(-0x2ac,-0x2b4,-0x226,-0x290),'MqzpH':function(_0x1a86c3,_0x317d34){return _0x1a86c3(_0x317d34);},'QYKYM':function(_0x200ca9,_0x52941f){return _0x200ca9!=_0x52941f;},'LABQP':_0x16bc15(-0x322,-0x37f,-0x3c4,-0x2e9),'Orpwh':_0x533512(0x20d,0x271,0x250,0x1eb),'dLXWC':_0x16bc15(-0x23b,-0x228,-0x23d,-0x28e),'CEFkI':function(_0x1c7f38,_0x3cd41c){return _0x1c7f38!==_0x3cd41c;},'LQugw':'KUkPp','YnDBe':_0x16bc15(-0x235,-0x210,-0x253,-0x1f5)};function _0x533512(_0x5454a4,_0x5056f8,_0x53efbf,_0x2ec991){return _0x45c1(_0x53efbf-0x156,_0x5056f8);}const {id:_0x117721,prompt:_0x42636a,width:_0x241ad4,height:_0x232f8f,change:_0x21af67}=_0x27ba2a;addLog(_0x16bc15(-0x1de,-0x159,-0x18d,-0x14e)+'ID:\x20'+_0x117721+(_0x16bc15(-0x257,-0x1b7,-0x289,-0x2b8)+':\x20')+_0x42636a+(_0x21af67?_0x16bc15(-0x293,-0x2f1,-0x2b0,-0x2a9)+'\x20'+_0x21af67:''));if(_0x21af67&&_0x21af67['includes'](_0x42f7cf[_0x533512(0x2d0,0x26f,0x26e,0x262)])){if(_0x42f7cf[_0x16bc15(-0x2a4,-0x293,-0x31c,-0x29e)](_0x42f7cf[_0x533512(0x272,0x256,0x2b8,0x302)],'PlfTV')){if(_0x240919){const _0x5a7f7d=_0x3ca535[_0x16bc15(-0x2a0,-0x20b,-0x212,-0x26c)](_0xc4332b,arguments);return _0x28b8cd=null,_0x5a7f7d;}}else{bananaGenerate(_0x27ba2a);return;}}function _0x16bc15(_0x40a8f5,_0x2bf689,_0x12c9e1,_0x1d30b0){return _0x45c1(_0x40a8f5- -0x3d3,_0x2bf689);}try{if(_0x42f7cf[_0x533512(0x2b3,0x317,0x285,0x26d)](_0x42f7cf[_0x16bc15(-0x261,-0x212,-0x23c,-0x274)],_0x42f7cf[_0x533512(0x228,0x25c,0x2c8,0x2de)])){_0x3a60ed(_0x4277dd);return;}else{const {image:_0x16978d,change:_0x290644}=await _0x42f7cf['MqzpH'](generateSDImage,{'prompt':_0x42636a,'width':_0x241ad4,'height':_0x232f8f,'change':_0x21af67});if(_0x42f7cf['QYKYM'](extension_settings[extensionName][_0x533512(0x22e,0x29e,0x28f,0x283)],'0')){if('vrdwf'!==_0x42f7cf[_0x533512(0x31f,0x2b2,0x2fd,0x2c1)]){_0x59db38(_0x42f7cf[_0x16bc15(-0x2d0,-0x294,-0x2b4,-0x274)]),_0x3aa2ab[_0x533512(0x2b3,0x312,0x2e0,0x2cc)]('sd_stop_ge'+'neration');throw new _0x34fbaa(_0x42f7cf[_0x533512(0x1ac,0x1d5,0x227,0x190)]);}else{const _0x3b5986={};_0x3b5986[_0x16bc15(-0x22e,-0x2ab,-0x25c,-0x1e4)]=_0x290644,await setItemImg(_0x42636a,_0x16978d,_0x3b5986),addLog(_0x533512(0x26c,0x286,0x2bd,0x26f)+_0x16bc15(-0x224,-0x285,-0x219,-0x2c7)+'\x20'+_0x42636a);}}else{if(_0x42f7cf['Orpwh']!==_0x42f7cf['dLXWC'])_0x42f7cf[_0x16bc15(-0x2e0,-0x36e,-0x31a,-0x317)](addLog,_0x16bc15(-0x268,-0x1e9,-0x2bb,-0x2da)+'库');else{const _0x1a10c4=_0x3d1407?function(){function _0x1a852a(_0x1df4de,_0x3662e4,_0x266300,_0x15b1f6){return _0x16bc15(_0x15b1f6-0x589,_0x266300,_0x266300-0x81,_0x15b1f6-0x49);}if(_0x11bee6){const _0x471a22=_0x3e7002[_0x1a852a(0x2f1,0x36a,0x2c8,0x2e9)](_0x5c50da,arguments);return _0x4cf2d8=null,_0x471a22;}}:function(){};return _0x3ce57a=![],_0x1a10c4;}}const _0x5b590d={};_0x5b590d['id']=_0x117721,_0x5b590d[_0x16bc15(-0x206,-0x20a,-0x162,-0x19e)]=!![],_0x5b590d[_0x16bc15(-0x30e,-0x361,-0x2d4,-0x330)]=_0x16978d,_0x5b590d['prompt']=_0x42636a,_0x5b590d[_0x16bc15(-0x22e,-0x237,-0x1c5,-0x287)]=_0x290644,eventSource[_0x533512(0x33c,0x2f9,0x2e0,0x33f)](EventType[_0x16bc15(-0x220,-0x286,-0x20b,-0x1c9)+_0x16bc15(-0x274,-0x277,-0x1e8,-0x2f7)+'NSE'],_0x5b590d),_0x42f7cf[_0x16bc15(-0x2e0,-0x356,-0x331,-0x2c3)](addLog,_0x16bc15(-0x244,-0x269,-0x1a0,-0x1d2)+_0x16bc15(-0x2e5,-0x324,-0x2c5,-0x2c3)+_0x117721+')');}}catch(_0x268bf){if(_0x42f7cf[_0x533512(0x35a,0x2d4,0x31e,0x330)](_0x42f7cf['LQugw'],_0x42f7cf['YnDBe'])){const _0x24fc8f='SD生图流程捕获到异'+'常\x20(ID:\x20'+_0x117721+_0x16bc15(-0x21d,-0x254,-0x29e,-0x1d0)+_0x268bf[_0x16bc15(-0x2e3,-0x35d,-0x312,-0x2de)];_0x42f7cf['MqzpH'](addLog,_0x533512(0x1f7,0x1cc,0x25c,0x200)+_0x24fc8f),console[_0x16bc15(-0x2cc,-0x2f4,-0x363,-0x2ab)](_0x533512(0x1ed,0x2e5,0x24e,0x294)+_0x16bc15(-0x228,-0x248,-0x21d,-0x27e)+_0x16bc15(-0x2b2,-0x29f,-0x34e,-0x2ae),_0x268bf);const _0x17d356={};_0x17d356['id']=_0x117721,_0x17d356['success']=![],_0x17d356[_0x533512(0x260,0x293,0x25d,0x2fc)]=_0x268bf['message'],_0x17d356['prompt']=_0x42636a,eventSource[_0x16bc15(-0x249,-0x1f5,-0x2e4,-0x245)](EventType[_0x16bc15(-0x220,-0x295,-0x267,-0x1b3)+_0x16bc15(-0x274,-0x294,-0x242,-0x240)+_0x533512(0x349,0x36e,0x33f,0x2e3)],_0x17d356),_0x42f7cf[_0x533512(0x1fe,0x210,0x249,0x1c8)](addLog,_0x533512(0x308,0x334,0x304,0x2ed)+_0x16bc15(-0x2e5,-0x277,-0x255,-0x375)+_0x117721+')');}else{const _0x5662d0=_0xb01ffc[_0x533512(0x33b,0x30a,0x2a8,0x21a)](_0x50ad63);_0x56d776=_0x5662d0[_0x533512(0x1c2,0x255,0x231,0x1ba)][0x568+-0x7*0x5d+-0x2dd];}}}function initializeSDListener(){function _0x584797(_0xf9f8b2,_0x35f717,_0x5224e4,_0x46db8b){return _0x45c1(_0x35f717- -0x331,_0x5224e4);}const _0x55270f={'lAwFD':function(_0x10b53c,_0x5560fb){return _0x10b53c(_0x5560fb);},'lzNTO':_0x4b2cad(-0x260,-0x2c3,-0x246,-0x2db)+'已初始化。'};function _0x4b2cad(_0xaca522,_0x5eb7e7,_0x3c18b0,_0x247972){return _0x45c1(_0x3c18b0- -0x3b3,_0xaca522);}eventSource['on'](EventType[_0x4b2cad(-0x22b,-0x293,-0x200,-0x298)+_0x584797(-0x138,-0x145,-0x12d,-0xee)+'ST'],sdGenerate),_0x55270f[_0x4b2cad(-0x299,-0x1aa,-0x202,-0x2a2)](addLog,_0x55270f[_0x584797(-0x239,-0x23f,-0x1ea,-0x1be)]);}export async function replaceWithSd(){function _0x42ddd4(_0x2745a5,_0x84512,_0x4014b0,_0x3ff8e1){return _0x45c1(_0x2745a5- -0x3e3,_0x3ff8e1);}const _0x3fb65e={'AXYTy':function(_0x97bc81,_0x2c7657){return _0x97bc81+_0x2c7657;},'VWrGq':function(_0x2f75e8,_0x21f904){return _0x2f75e8==_0x21f904;},'yoWkz':function(_0x5b1638,_0x2b8cdb){return _0x5b1638!==_0x2b8cdb;},'sTsTQ':_0x42ddd4(-0x1fb,-0x19f,-0x253,-0x29d),'oLORs':function(_0x304bb4){return _0x304bb4();},'FxXcf':function(_0x808ae3,_0x34cf2e){return _0x808ae3===_0x34cf2e;},'ClnIV':'CWKtE','jPWlb':function(_0x455790,_0x2d4de8){return _0x455790(_0x2d4de8);},'wbFCV':_0x42ddd4(-0x276,-0x306,-0x2d6,-0x23a)+_0x42ddd4(-0x2d8,-0x308,-0x255,-0x257)};function _0x35d840(_0xc787a2,_0x8f9607,_0x309b29,_0x2aed2c){return _0x45c1(_0x2aed2c-0x276,_0x309b29);}if(_0x3fb65e[_0x42ddd4(-0x20f,-0x1a1,-0x22d,-0x27a)](extension_settings[extensionName][_0x42ddd4(-0x222,-0x1a7,-0x275,-0x203)],'sd')){if(_0x3fb65e[_0x42ddd4(-0x229,-0x197,-0x2a6,-0x18a)](_0x3fb65e[_0x42ddd4(-0x253,-0x1dd,-0x2f2,-0x23e)],_0x3fb65e[_0x42ddd4(-0x253,-0x2db,-0x1ef,-0x24a)])){_0x34df51(_0x35d840(0x3e7,0x3c9,0x4db,0x452)+_0x32c776[_0x42ddd4(-0x316,-0x345,-0x29e,-0x2fa)]+'\x20'+_0xcbb994[_0x35d840(0x3c1,0x3b1,0x33e,0x3d9)]);throw new _0x5e3abb(_0x35d840(0x3ca,0x3db,0x487,0x452)+_0x39364e[_0x42ddd4(-0x316,-0x346,-0x362,-0x294)]+'\x20'+_0x136883[_0x35d840(0x352,0x353,0x42e,0x3d9)]);}else!window['initialize'+_0x35d840(0x324,0x410,0x324,0x3a0)]&&(window[_0x35d840(0x470,0x4b2,0x3e1,0x41e)+_0x35d840(0x334,0x434,0x408,0x3a0)]=!![],_0x3fb65e[_0x35d840(0x46a,0x3bc,0x423,0x402)](initializeSDListener)),_0x3fb65e['oLORs'](initializeImageProcessing);}else _0x3fb65e[_0x42ddd4(-0x2a1,-0x309,-0x286,-0x23b)](_0x35d840(0x3fd,0x49e,0x4ae,0x41f),_0x3fb65e[_0x35d840(0x3e1,0x439,0x473,0x41a)])?_0x1982b7[_0x42ddd4(-0x301,-0x336,-0x317,-0x2f1)+_0x100729+'\x20Prompt']&&(_0x34ed69=_0x3fb65e[_0x35d840(0x3ed,0x345,0x3eb,0x38a)](_0x4d762b,',\x20')+_0x4b4498[_0x42ddd4(-0x301,-0x2c7,-0x36c,-0x39b)+_0x437867+_0x42ddd4(-0x2a8,-0x2cd,-0x22f,-0x284)]):window[_0x42ddd4(-0x23b,-0x21e,-0x297,-0x20a)+_0x42ddd4(-0x2b9,-0x343,-0x2ca,-0x2e7)]&&(eventSource[_0x42ddd4(-0x321,-0x312,-0x2f0,-0x3be)+_0x42ddd4(-0x25c,-0x2a2,-0x22c,-0x2c2)](EventType[_0x42ddd4(-0x230,-0x20e,-0x1c4,-0x2bf)+_0x35d840(0x478,0x3d4,0x48d,0x462)+'ST'],sdGenerate),window['initialize'+_0x35d840(0x38a,0x318,0x3f7,0x3a0)]=![],_0x3fb65e[_0x42ddd4(-0x31d,-0x2d3,-0x315,-0x37d)](addLog,_0x3fb65e[_0x35d840(0x395,0x3d7,0x468,0x42d)]));}