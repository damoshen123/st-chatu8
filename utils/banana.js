(function(_0x4032bd,_0x308439){function _0xfd63e2(_0x14cab6,_0x26645e,_0xa2a48a,_0x219b8c){return _0x4712(_0x26645e-0x15c,_0xa2a48a);}const _0x187857=_0x4032bd();function _0x5d47ab(_0x14af33,_0x241f7f,_0x19f1e4,_0x2a0a0a){return _0x4712(_0x19f1e4-0x2e3,_0x14af33);}while(!![]){try{const _0x340cb6=-parseInt(_0xfd63e2(0x3fa,0x3e9,0x451,0x3af))/(0x71b*-0x1+-0x2427+-0x2b43*-0x1)*(parseInt(_0xfd63e2(0x239,0x305,0x36a,0x3c6))/(0x15e3+0x19d7+-0x18*0x1fd))+parseInt(_0xfd63e2(0x49d,0x4a4,0x568,0x532))/(-0x154+0x7*0x92+0x61*-0x7)+-parseInt(_0x5d47ab(0x656,0x55c,0x586,0x512))/(0x23f+-0x66*-0x24+-0x1093)+-parseInt(_0xfd63e2(0x4ce,0x482,0x400,0x4a6))/(0x2*-0x771+0xfc8+-0xe1)+parseInt(_0xfd63e2(0x4c8,0x47f,0x41d,0x494))/(-0x1612+-0x1fda+0x35f2*0x1)+-parseInt(_0xfd63e2(0x3ef,0x499,0x4a4,0x3cb))/(0x824*0x1+0x854*-0x2+0x88b)+parseInt(_0xfd63e2(0x332,0x3bb,0x3b8,0x426))/(-0x161c+0x1293*0x1+0x1*0x391);if(_0x340cb6===_0x308439)break;else _0x187857['push'](_0x187857['shift']());}catch(_0xa34d1f){_0x187857['push'](_0x187857['shift']());}}}(_0x1948,0x3b5af*0x1+-0x6a4*-0xe9+-0x4bfe*0x13));const _0x5e7a49=(function(){const _0x278f19={'NIBaS':function(_0x47b22a,_0x166202){return _0x47b22a(_0x166202);},'OhZmt':'[Banana]\x20启'+'用了\x20{修图}\x20标识'+'。','XbjsZ':function(_0x232e59,_0x20ce1f){return _0x232e59!==_0x20ce1f;},'aXyaK':'NVytM'};let _0xc2fe8a=!![];return function(_0x24b183,_0x4fceeb){const _0x15e4f3={'cskwq':function(_0x55eea9,_0x1f07ea){function _0x3be5cf(_0x1e92b2,_0x9bb1c9,_0xea5672,_0x4cf33a){return _0x4712(_0x1e92b2- -0x2d8,_0x9bb1c9);}return _0x278f19[_0x3be5cf(0x59,0xd6,0x1,0x4d)](_0x55eea9,_0x1f07ea);},'jZhrd':_0x278f19['OhZmt']};function _0x3c9a82(_0x47dd66,_0x4b9733,_0x40c346,_0x4bb756){return _0x4712(_0x4b9733-0x251,_0x4bb756);}function _0x2d0f57(_0x27e7db,_0xc76a88,_0x188341,_0x1ab448){return _0x4712(_0x188341- -0xcc,_0xc76a88);}if(_0x278f19[_0x2d0f57(0x20c,0x260,0x1fd,0x27f)](_0x278f19[_0x3c9a82(0x3ff,0x449,0x486,0x4e3)],_0x278f19['aXyaK'])){_0x15e4f3[_0x2d0f57(0x11b,0x17e,0x10c,0xd5)](_0x3a788a,_0x15e4f3[_0x2d0f57(0xed,0x205,0x136,0x1c9)]);const _0x37254e=_0x339cba||'默认',_0x5ab4f5={};_0x5ab4f5[_0x2d0f57(0x19a,0x1ab,0x280,0x35f)+'on']=[],_0x5ab4f5[_0x3c9a82(0x493,0x478,0x515,0x3b6)+'t']='',_0x1af887=_0x4de29a[_0x37254e]||_0x5ab4f5,_0x15e4f3[_0x2d0f57(0x1f2,0x1ef,0x10c,0x1d0)](_0x57d67d,_0x3c9a82(0x57d,0x52f,0x49e,0x612)+'用修图预设:\x20\x22'+_0x37254e+'\x22');}else{const _0x4ee3a9=_0xc2fe8a?function(){function _0x42f92a(_0x25e80e,_0x39ef74,_0x550e91,_0x54f65e){return _0x2d0f57(_0x25e80e-0xd7,_0x54f65e,_0x25e80e-0x3fc,_0x54f65e-0x1c3);}if(_0x4fceeb){const _0xb10a90=_0x4fceeb[_0x42f92a(0x629,0x5c6,0x548,0x675)](_0x24b183,arguments);return _0x4fceeb=null,_0xb10a90;}}:function(){};return _0xc2fe8a=![],_0x4ee3a9;}};}()),_0x4dbfa3=_0x5e7a49(this,function(){function _0x4cb806(_0x549c47,_0x3ff034,_0x4177fb,_0x7a1a7e){return _0x4712(_0x3ff034-0xcc,_0x7a1a7e);}function _0x109a46(_0x1cfde8,_0x265dbc,_0x3ee176,_0x2fbea5){return _0x4712(_0x3ee176- -0x383,_0x2fbea5);}const _0x3511d={};_0x3511d[_0x4cb806(0x219,0x2cd,0x328,0x3a7)]='(((.+)+)+)'+'+$';const _0x46d0f9=_0x3511d;return _0x4dbfa3['toString']()[_0x109a46(-0x221,-0x1cd,-0x163,-0x209)](_0x46d0f9[_0x4cb806(0x2da,0x2cd,0x35e,0x3ae)])['toString']()[_0x4cb806(0x3c7,0x3e0,0x347,0x3e7)+'r'](_0x4dbfa3)[_0x4cb806(0x27d,0x2ec,0x2b9,0x27f)](_0x46d0f9[_0x109a46(-0x267,-0xd6,-0x182,-0x107)]);});_0x4dbfa3();import{extension_settings}from'../../../../extensions.js';function _0x1948(){const _0x519306=['w0jHBMfUyv0GuW','mZy3mZbzBeTJCMu','rfLntgi','y2LZAhu','qvbjihjLC3bVBG','BhvKzv9OzwfKzq','ve52DKe','zw5LCG','tufhrv9srvnqtW','s1Pvvuy','AxrOihn0yxr1CW','rhH5vwe','yvjHvhy','Aw1Hz2u','w0jHBMfUyv0GrG','vhfABfe','Aer0C2m','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','vhvpz2e','wLLLANy','w0jHBMfUyv0Gua','uK1YBfO','tNvPAKm','mJK4mdq4qwT6q2Po','DxnLCG','Aw5JBhvKzxm','l3yX','vKfosuS','sLviDxq','udqGvvjm','s2fAs3q','y2HHDf9JB21WBa','AhrNsKG','AwT2s0q','yurjvfC','C3vIC3rYAw5N','mNWWFdr8m3WX','C3rHDhvZ','yxLSB2fKoIa','D29hqxC','y2fUy2vSx2jHBG','ChvZAa','6Akr5QIH5BYp6zsz6k+VoIa','DcbMywLSzwqGDW','swLXtxq','tw5Xzhm','igLTywDLihrVia','qvbjihjLCxvLCW','y2HVAwnLCW','EMHVsuS','lI4U','mxWZFdb8mNW0','r3DLvM0','DhjPz2DLCNm','veTysKO','qxPOC3O','tKnkshq','wg50uvO','yxPczgC','BwfNzsbNzw5LCG','B3qGy29UDgfPBG','wgjQC1O','yw1uvKW','B25LCNjVCG','yK10q2e','BZOG','5zU+5QIH5BYp77YA5OYh5lUKid0G','CMvZDwX0','yMfUyw5H','C3flEgy','DgfYDgLUzYbPBq','t3LTCee','CgLZzgO','DwnJzxnZzNvSBa','z2vUzxjHDguTAq','CNfNsfu','5RAi5B2t5yMn5lU75yQH77Ym5y+r6ycb5AsX6lsL','B3nPDgLVBG','ksbbChbSzvDLyG','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','zgvSCY8','y2zNAw1NxW','w0jHBMfUyv0G5l2/','zw1PDa','ifbYB21WDa','vNLdzNe','sezWv3C','ChjVBxb0','v1r5vu4','q29UDgvUDc1uEq','zgvVoIa','CM9Szq','y3vZDg9T','AML1z3vHBG','qKDIA1K','tcaO','55sO5l+U5zU+6Ake6k6+oIaI','Aw1Hz2vU','zw1vwvK','vfr4sMe','yMfZzty0lG','C3bSAxq','CMTKB3DUigLTyq','DhjPBq','EsbLEhrYywn0zq','qvjSs24','y1jeC00','rNbPr3O','wezOzNi','yxbWBhK','DwLSDcbTDwX0Aq','CNrYq1u','C3rYAw5NAwz5','Ae5oEfK','s0TMBgu','Dg9mB3DLCKnHCW','E+INHUMIKx0','zNngtfy','CgDysKW','t1P5rKO','6kEg6Akr5zU+54MhoIbB5BEY5O+q5l6B','r2Hhvxq','DhLWzq','sgDbDuq','C2L6zq','wvzry0u','rgntwLC','DxjS','rhP0wxK','w0jHBMfUyv0GqG','ELjiD1m','6Akr5QIH5BYpihbHEwXVyq','6Akr5QIH5BYp77YA5BEY5RE75yQG5y+c6icd5zU+','ELjXywK','sKjqqxm','iIbMCM9TihbYzq','y29UC3rYDwn0BW','C2LUzYbKAxjLyW','Bw9KzwW','uLb5uge','AwrLBYbvuKWGzq','zxjYB3i','uu5yDKS','BwnOzMu','EMv0vxe','l2DLBMvYyxrL','wK9qqwm','w0jHBMfUyv0GrW','DhjHy3rPBMCUlG','y29UDgvUDa','C3rYAw5N','mti1mJKYmhbNB0jRza','B21WBgv0Aw9UCW','uNnTsvu','mta0mJGYme1xDvHQCq','BwfNzsbPBIbpCa','BhnNsNC','vKnHrMG','AwrLBYbKB3DUBa','DgHKAMC','y29TCgXLDgvuyq','C2uGzgLKig5VDa','terjAeW','zcbnyxjRzg93BG','u2nLBMuGq29TCa','tKLcyvm','tfrTELa','z0jTq08','yM9puxa','yu9LBxO','ANnVBG','qvzryu4','yxnRsuq6ia','w0jHBMfUyv0GvG','5BYa5AEliejHBMfUyEEuNW','Aw9UoIaIqMvHCG','l3yXlW','mJm1ntm3neHRt0Pkrq','ueLTr1y','w0jHBMfUyv0G6kEg','swjYs1K','ioADOEA2IoAbRW','ihWG','5Q2J6z2I5O+q56s66k+noIa','zwrKzwqGyMfZzq','uhzhvNe','qvjSu3C','qKfoqu5b','mte3ndeWn1HkDu5WqG','zxrJAcbnyxjRza','BwL0DgvKigzHAq','zvrSCxC','y29UDMvYC2f0Aq','DfvRsMO','Bw9KywWGCgf5Ba','DvzWsgi','vxLzC2O','E+s/RUwBVN0','EePODMe','55Qe5zU+54Mh','5lIT55QeihbYB21WDooaGG','wKzcq2m','55sO6yws6AAg5lUJ55cg5QIH5BYp','Aw1Hz2vdB25MAq','vu5MDNi','ywrKvgfZAW','te5xywi','tMnVA2G','tLnf','BhvYzsbYzxnWBW','BKPWz1G','zgf0ytPPBwfNzq','l3yXyMv0ys9TBW','z2uGvvjmlcbLEa','y3vZDg9Tx2LUyW','icHlsfrntcWGBa','5zco572U5zco','zcbIyxnLnJqGAq','w0jHBMfUyv0G5y+w','BKjXqMe','ie1ckq','BvngAxe','Aw5NihrYAwDNzq','55sO5lQgihVKV67LM759ioAGH+IVHG','z0TUB1u','BgvUz3rO','tufhrv9srvfvrq','sfbUuxK','zvzZrLe','wgfOqMW','zMXHDa','rMXwz2O','Aw5PDgLHBgL6zq','uMf5z0S','w0jHBMfUyv0Gsq','B2fKihDPDgGG','v2LUnJq7ihG2na','q2HHCMfJDgvYia','nKvbChbRua','B3DUBg9Hzcb2Aq','nJqGAw1Hz2uU','CMvTB3zLtgLZDa','C3jrzKO','qvP1r3K','Dg9gAxHLza','CMvWBgfJzufSBa','w0jHBMfUyv0G5Ps2','Bwf0y2G','sgPkyLe','w0jHBMfUyv0G5l+U','55sO5lQgihVOP4BPOPf9ioAGH+IVHG','zxrPB25FC291CG','qwnJzxb0','Aw1Hz2vjza','uMLcrKe','y2XgsMy','s3vbwKm','tLz3tLq','B2HpDgO','ugnMrMq','C0DHseO','Dg9Rzw4','zxrLy3rLzcbnyq','qxv0Ag9YAxPHDa','zMLSDgvY','D1PyEem','yurwCey','rMfPBgvKihrVia','w0jHBMfUyv0Gra','vMLKzw8GCMvZCa','s3nfyvC','rgrAthO','reD6wvq','w0jHBMfUyv0Gvq','CIbWCM9TChq6ia','5zco572U5yMn','vvvqDvy','EvrPyLa','igeGDMfSAwqGtq','6k+n5Ase55cg77Ym55U05O6L5P6e5BU66kEg6Akr','zMv0y2GGDMLKzq','vxnLCI1bz2vUDa','BwfNzw4G5QIH5z6l5lIn5PsV','CMvHzefZrgf0yq','rM1Zwgi','y3nRD3e','zw5bssbMB3jTyq','5lU75yQH5BEY5y+w5RAi','wNv6DLu','DdOG','Aw9U','C3rYzwfT','s0nVu3G','vu9Htwi','AfLzwxe','zMfPBgvKigzVCG','yw5Hx3rHC2S','w0jHBMfUyv0G5zcV','zKTcCwu','BwvZC2fNzxm','Bw9Kzq','Aw5ZDgfUy2vZ','wezluKi','wvHdwem','CMTkrwy','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','C2v0ici','ExbZEMK','rxj6uwi','5O6L6k+35Rgc','CMLPv3m','Eg1IDKm','BgvZktOG','D3fbvNi','teLKzNe','zM9YrwfJAa','uvLgv0u','yvH5yuS','ywLSzwqGDg8Gza','yuX6sgy','DcbVBMX5lcbUBW','y3zYB1e','5yIW5y+w5RAi5lU75yQH5lQl5lU2icHu','s3zwvwi','6Akr5QIH5BYp5y+r6ycb6k+35Rgc5yIWoIa','yxjRzg93BIbPBq','EwD3r0m','ALPOCMq','ywDLigDLBMvYyq','ienOCM9Tzs8XmG','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','igLTywDLlG','q054BMK','D0TUyw0','5yMn572U5zco','whvRB3m','Dgv4Da','DwLSDcbjBwfNzq','yxnZAxn0yw50','vM9cqNa','BuDrvu4','q1H5Dgq','Aw1Hz2vFDxjS','l2fWAs9IywnRzq','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','zw5KC1DPDgG','BwfW','6kEg6Akr5OYh5lUKoIa','D2L0AcbWCM9TCa','qMvHCMvYia','DLrTzw4','Cu5KCu8','Dhj1zq','thj3Ew4','5PYa5zco572U','wxPRy0S','C2vHCMnO','55sO6kEg6Akr6Ake6k6+oIaI','kI8Q','yu5szwS','C3rFy2HHDhu4xW','qMfUyw5HtgLZDa','mhWYFdn8nhWX','zML4zwrqCM9TCa','DevjDwG','tuT6Bwe','BI9QC29U','5zU+5Rwb56Il44cc5A6I5OI356UV5lI6','AwTLieDLy2TVkq','zcdLJixLKkSG','twP5B3C','rMv3EgO','C2fTCgXLq291BG','CNvUBMLUzW','BejMwM0','6kEg6Akr5lIl6l295AsX6lsLoIa','zxrJAcbLCNjVCG','w0jHBMfUyv0Gtq','B3iGChjVBxb0oG','AMD6z0m','B2fKzwqGyw5Kia','rgzfs3e','ue9tva','CuDcAe4','zMv0y2GGAw1HzW','C2nesgq','uffSDLa','ig1LC3nHz2vZlG','t2vyEKq','qMTLrui','DwvZDcb0BZOG','Bxb0','AvvVBMu','qMfUyw5H5l+U5zU+5QIH5BYp','6Akr5QIH5BYp77YA5OYh5lUKid0G','vwHst1q','C3vJy2vZCW','yxbWBgLJyxrPBW','v2fmy2C','ztOG','AM9PBG','BwfNzsbMCM9Tia','tK5mq0O','Bw9KzwW6ia','z05Vv3O','BhrKrMu','weftwNO','twfYA2rVD24U','AvDbq1e','yNP0Au8','6Akr5QIH5BYp77YA6lEZ6l+h5zU+54Mh5O+q56s6','6AkrifbHEwXVywq6','ie5uideWlJa7ia','B25SB2fKzw5K','s3HnuvK','yxnWzwn0uMf0Aq','EMXdD28','y2vZCYbYzxnWBW','y3vZDg9Tx3vYBa','mZe5mZiXnLrpteLLAG','CgXpBxi','yMXVyG','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','BwvZC2fNzq','r1rUtge','ywDLifvstdOG','mc4WlJaUmcbtyq','5l+U5zU+5OYh5lUKoIa','DgLVBIbYzxf1zq','B25ZzsbKAwqGBG','ve1jvuq','vvfAC2C','ENf4u1G','vvjm','z0nTqMC','CMvWBgfJzq','yNPwCNe','vu1OA2q','EwPOq0W','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','uKHWre0','ufzOy04','ANPhsgK','y2XPzw50','r0vorvjbvevFsq','Cg9ZDgzPEfbYBW','Buj1v2W','C3nMDwXSEs4','EhrYywn0zwq6ia','B2fKzwqGka','EsbJB252zxj0zq','qMfUyw5H6kEg6Akr5QIH5BYp','zLDxA1u','55sO5lQo55sF5OIq55QevgfNoIa','zxiG','vhvKzLu','B0DoteK','BMrZl2nOyxqTyW','wwTwDgy','w0jHBMfUyv0Grq','C3rHCNrZv2L0Aa','BNnLigzVCIbjra','5OYb6yws6AAg5lUJ55cg77Ym5yIh5O2I5lI655U0'];_0x1948=function(){return _0x519306;};return _0x1948();}import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,convertImageToJpeg}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';import{taskQueue,TaskType,TaskStatus}from'./taskQueue.js';function _0x4712(_0xf1b523,_0x46f643){_0xf1b523=_0xf1b523-(-0x206c+0x1aa7*-0x1+0x3c96);const _0x2edb13=_0x1948();let _0x2dfedc=_0x2edb13[_0xf1b523];if(_0x4712['LPoQXs']===undefined){var _0x8b6570=function(_0x1d5bb1){const _0x3a6668='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xc31d16='',_0x4d4255='',_0x489dbe=_0xc31d16+_0x8b6570;for(let _0x5ae389=-0x221*-0x9+-0x125b+-0xce,_0xc6f0c1,_0x1a7aa1,_0x5610db=0x4*0x91b+0xb*0x2e3+-0x442d;_0x1a7aa1=_0x1d5bb1['charAt'](_0x5610db++);~_0x1a7aa1&&(_0xc6f0c1=_0x5ae389%(-0x201*-0x3+-0x1299+-0x64d*-0x2)?_0xc6f0c1*(-0x2337+-0x5ff*0x3+-0x1aba*-0x2)+_0x1a7aa1:_0x1a7aa1,_0x5ae389++%(-0x1*-0xfe1+-0x92c+-0x6b1))?_0xc31d16+=_0x489dbe['charCodeAt'](_0x5610db+(-0x1*0x21d8+-0x30*0x5f+0x33b2))-(-0x7c3+-0x9f4+0x11c1)!==-0x548+0xa0*0x1d+-0xc*0x112?String['fromCharCode'](0xa2d+0x124c+-0x1b7a&_0xc6f0c1>>(-(0xd63+-0x23b8+0x1657)*_0x5ae389&-0x491*0x2+0xd*-0x209+0x239d)):_0x5ae389:-0x4*-0x469+0x1fdc+-0x3180){_0x1a7aa1=_0x3a6668['indexOf'](_0x1a7aa1);}for(let _0xa2532=-0x1*0x24df+-0x1f*-0xcb+0xc4a,_0xf63776=_0xc31d16['length'];_0xa2532<_0xf63776;_0xa2532++){_0x4d4255+='%'+('00'+_0xc31d16['charCodeAt'](_0xa2532)['toString'](-0x27*0x8f+0x2*-0xec7+0x3367))['slice'](-(-0x7b8+-0x8*0x1bf+0x1*0x15b2));}return decodeURIComponent(_0x4d4255);};_0x4712['IAkoEU']=_0x8b6570,_0x4712['ygqCAC']={},_0x4712['LPoQXs']=!![];}const _0x4db371=_0x2edb13[-0x23f0+0x18e9+0xb07],_0x63cab5=_0xf1b523+_0x4db371,_0x3616a4=_0x4712['ygqCAC'][_0x63cab5];if(!_0x3616a4){const _0x18a1ed=function(_0x3cb875){this['fnrfEL']=_0x3cb875,this['grnMHb']=[0x1a43+0x1226+-0x2c68,0xb52+0xc24+0x7*-0x35a,0x2*0x8eb+0x7*-0x35e+0x5bc],this['bCzcYw']=function(){return'newState';},this['soZuFz']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['yRpTzV']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x18a1ed['prototype']['uVreTH']=function(){const _0x5dc1a0=new RegExp(this['soZuFz']+this['yRpTzV']),_0x684ab1=_0x5dc1a0['test'](this['bCzcYw']['toString']())?--this['grnMHb'][0x1*-0xc94+-0x1267*-0x1+-0x2*0x2e9]:--this['grnMHb'][-0x219a+-0x838*0x1+-0x14e9*-0x2];return this['fVUecA'](_0x684ab1);},_0x18a1ed['prototype']['fVUecA']=function(_0x63617b){if(!Boolean(~_0x63617b))return _0x63617b;return this['BTLDDs'](this['fnrfEL']);},_0x18a1ed['prototype']['BTLDDs']=function(_0x7c7d16){for(let _0x981a52=0x5ad*0x2+-0x17d*0x10+0x122*0xb,_0x40ea60=this['grnMHb']['length'];_0x981a52<_0x40ea60;_0x981a52++){this['grnMHb']['push'](Math['round'](Math['random']())),_0x40ea60=this['grnMHb']['length'];}return _0x7c7d16(this['grnMHb'][-0x26d7+-0x1*0x1d32+0x4409]);},new _0x18a1ed(_0x4712)['uVreTH'](),_0x2dfedc=_0x4712['IAkoEU'](_0x2dfedc),_0x4712['ygqCAC'][_0x63cab5]=_0x2dfedc;}else _0x2dfedc=_0x3616a4;return _0x2dfedc;}function getDirectHeaders(_0xe89f1a=null,_0x12d739=null){const _0xd7d53={};_0xd7d53[_0x578c0e(0x3bd,0x46a,0x465,0x4b8)]='Mozilla/5.'+'0\x20(Windows'+_0x2f783d(0x2aa,0x269,0x1a9,0x233)+_0x578c0e(0x35f,0x3f7,0x3b8,0x448)+_0x578c0e(0x5c7,0x504,0x4eb,0x4fd)+'Kit/537.36'+_0x578c0e(0x2e9,0x3fa,0x3a3,0x2e2)+_0x2f783d(0x26c,0x253,0x175,0x207)+_0x2f783d(0x267,0x23a,0x150,0x1df)+_0x578c0e(0x458,0x489,0x477,0x3b3)+'fari/537.3'+'6',_0xd7d53[_0x2f783d(0x29b,0x10c,0x1c3,0x1cc)]=_0x2f783d(0x231,0x1ec,0x1d0,0x1fd);function _0x578c0e(_0x4f9316,_0x4b3483,_0x414b94,_0x525420){return _0x4712(_0x414b94-0x211,_0x4f9316);}_0xd7d53[_0x2f783d(0x252,0x30e,0x1e4,0x272)]=_0x2f783d(0xd7,0x20c,0x102,0x19d)+_0x2f783d(0xd5,0xf0,0x1f6,0x1b8);const _0x956f37=_0xd7d53,_0x3ef099={};_0x3ef099[_0x2f783d(0x239,0x1b7,0x263,0x1af)]=_0x956f37[_0x2f783d(0x302,0x177,0x248,0x22f)];function _0x2f783d(_0x3a42a6,_0x7637ab,_0x5d285c,_0x40fe93){return _0x4712(_0x40fe93- -0x25,_0x3a42a6);}_0x3ef099[_0x2f783d(0x26d,0xd8,0x1d8,0x192)]=_0x956f37['riiWs'];const _0x2c447e=_0x3ef099;return _0xe89f1a&&(_0x2c447e['Content-Ty'+'pe']=_0xe89f1a),_0x12d739&&(_0x2c447e[_0x956f37[_0x2f783d(0x341,0x2fd,0x1c3,0x272)]]=_0x12d739),_0x2c447e;}let currentTaskId=null,currentRequestId=null,currentPrompt=null;async function getImageFromTurnData(_0x5702cd){const _0x160fb6={'XFKRB':function(_0x1f669b,_0x368790){return _0x1f669b(_0x368790);},'FsEFl':_0x28bb54(-0x8e,0x9b,-0x37,0x59)+_0x28bb54(-0x8e,0x76,-0x4d,-0x37),'XrOyv':function(_0xab05f9,_0x481925){return _0xab05f9!==_0x481925;},'nxdUY':_0x28bb54(0x3,0x101,0x10c,0xcb),'clFJf':function(_0xa9c46c,_0x35db22){return _0xa9c46c||_0x35db22;},'zRqai':_0x3d1121(-0x1f7,-0x15d,-0x1ad,-0x119),'EYSvt':_0x28bb54(-0x22,0xc1,-0x77,-0x1b)};if(!_0x5702cd)return'';if(_0x5702cd[_0x3d1121(-0x41,-0x130,-0xd,-0xef)]&&_0x5702cd[_0x3d1121(-0x134,-0x20,-0x80,-0xef)][_0x3d1121(-0xd1,0xc,-0xc2,-0x1e)](_0x28bb54(0x1d7,0x15b,0x5b,0x123))){if(_0x160fb6['XrOyv'](_0x160fb6['nxdUY'],_0x160fb6['nxdUY']))_0x1e9d91[_0x302dc2]['banana']['cishu']=0x103d+0x719+-0x21*0xb5,_0x160fb6['XFKRB'](_0x479489,_0x28bb54(0xd0,0x85,-0x70,0x4b)+_0x3d1121(-0xae,-0x157,-0x79,-0xda)+_0x1422d[_0x38f4a8][_0x3d1121(0x86,-0x37,-0x7e,0x29)]['cishu']);else{const _0x1af92b=await _0x160fb6[_0x28bb54(0xa6,0x59,0xa0,0x2f)](getConfigImage,_0x5702cd[_0x3d1121(-0x53,-0xf9,-0x10c,-0xef)]);return _0x160fb6[_0x28bb54(-0x61,-0xd8,-0xc8,0x0)](_0x1af92b,'');}}function _0x3d1121(_0x5ac725,_0x327cb2,_0x290217,_0x2992be){return _0x4712(_0x2992be- -0x2a7,_0x5ac725);}function _0x28bb54(_0x243e26,_0x501b82,_0x2a1425,_0x2ad549){return _0x4712(_0x2ad549- -0x1ba,_0x243e26);}if(_0x5702cd[_0x3d1121(0xb8,0x42,0x38,-0xe)]&&_0x5702cd['image']['startsWith'](_0x160fb6[_0x3d1121(0x130,0xae,0xa3,0x6a)])){if(_0x160fb6['EYSvt']!==_0x160fb6['EYSvt'])_0x160fb6[_0x28bb54(-0xa0,0xc,0x7e,0x2f)](_0x27c9e2,_0x160fb6['FsEFl']),_0x26f620=_0x3f3774;else return _0x5702cd[_0x28bb54(0x186,0x8a,0x111,0xdf)];}return'';}async function generateBananaImage({prompt:_0x217dd6,width:_0x5d5ebc,height:_0x2f13fc,change:_0x3fa974,retouchPrompt:_0xc36059,retouchImage:_0x4093a4,videoPrompt:_0x313e9f,videoImage:_0x13b23a}){const _0x37c912={'zhoIK':function(_0x31ec79,_0x208398){return _0x31ec79(_0x208398);},'rtrCU':_0x25df1a(-0x76,0x3e,0xb7,0x26)+'坐标的提示词字符串。','ZFBCc':_0x25df1a(0x32,0xfa,0x191,0x1ca)+_0x25df1a(-0x30,0xa3,0x31,0x12e),'TtrNg':function(_0x9e6d60,_0x5e5290){return _0x9e6d60<=_0x5e5290;},'JBPAs':function(_0x2984de,_0x3c98d5){return _0x2984de+_0x3c98d5;},'iUone':function(_0x340c97,_0x50fe8b){return _0x340c97+_0x50fe8b;},'RiBFA':function(_0x3f9608,_0x59e42a){return _0x3f9608+_0x59e42a;},'EhtCy':function(_0x21ab56,_0x2c2a21){return _0x21ab56+_0x2c2a21;},'BkeEB':function(_0xde3ae3,_0x389e50){return _0xde3ae3+_0x389e50;},'uVpHb':_0x25df1a(0x62,0x10c,0x15d,0x6b),'thdjg':_0x1cf65d(0x6c,0xa9,0x62,0x1b)+_0x25df1a(0x1bd,0xf7,0xb8,0xc7)+'\x20contain\x20i'+'mage\x20in\x20Op'+_0x25df1a(0x1c,-0x5d,-0x3b,-0x8d)+'t','HFpWw':_0x25df1a(0x23,0xaf,0xb1,0x143)+'pe','ltdFe':function(_0x1db53a,_0x35ef44){return _0x1db53a+_0x35ef44;},'Xukos':function(_0x4518d3,_0xcaee07){return _0x4518d3(_0xcaee07);},'Ncokh':function(_0xcfec5d){return _0xcfec5d();},'sGaHJ':'[Banana]\x20R'+'esponse\x20co'+'ntains\x20tex'+_0x25df1a(0x97,-0x3b,-0xd5,-0x94)+_0x25df1a(0x89,-0x30,-0x86,0x29),'zRHwS':_0x1cf65d(0xf7,0x192,0x2d,0xdc),'IbrKY':'{视频}','DdZLz':function(_0x3626f6){return _0x3626f6();},'PQlvP':function(_0x37805e,_0x5c92c4){return _0x37805e+_0x5c92c4;},'nxLin':function(_0x49e349,_0x51e792){return _0x49e349||_0x51e792;},'QYFWE':_0x1cf65d(-0x44,0x19,0xf6,0x49),'bztiO':function(_0x707bf9,_0x2e72f0){return _0x707bf9===_0x2e72f0;},'onrkh':_0x25df1a(0x2a,-0x72,-0x110,-0xd9),'xemnm':function(_0x58bf3c,_0x3e796c){return _0x58bf3c||_0x3e796c;},'amTVL':_0x1cf65d(0x4,0x58,0x5c,-0x64),'bMtCa':_0x1cf65d(-0x5b,-0x7,-0xc3,-0x6a),'TqZlQ':'user','ohOtj':function(_0x2f671f,_0x5bd688){return _0x2f671f(_0x5bd688);},'pisdj':function(_0x210dc0,_0x92f52b){return _0x210dc0(_0x92f52b);},'Mjyow':'/v1/chat/c'+_0x1cf65d(0xfc,-0x27,0xad,0xaf),'OeXzD':_0x1cf65d(-0x97,-0x8f,-0x7d,0x31),'TNvvA':function(_0x51fa3c,_0x2fbf63){return _0x51fa3c+_0x2fbf63;},'IiqMt':_0x25df1a(0xab,0x106,0x95,0x1bb),'gRPIu':function(_0xa06516,_0x5078dd){return _0xa06516===_0x5078dd;},'azBdg':_0x25df1a(0x11a,0xb3,-0xb,-0x19),'pgXJL':function(_0x49ce84,_0x47c297){return _0x49ce84!==_0x47c297;},'dfbca':_0x25df1a(-0x7,0x8c,0x3d,0xd6),'gROSq':function(_0xecaeaf,_0x5e69ac){return _0xecaeaf+_0x5e69ac;},'UhROT':_0x1cf65d(-0xa2,-0x85,-0xc2,-0x63)+_0x1cf65d(-0xb5,-0x44,0x80,0x11)+_0x25df1a(0x139,0xee,0x122,0x146)+'/generate','gCmBg':_0x1cf65d(-0x6e,0x9a,0xd0,0x73),'UOaMb':function(_0x32f16e,_0x12b01c){return _0x32f16e===_0x12b01c;},'wKnam':function(_0x4dcff2,_0x1e2a35,_0x5cdeca){return _0x4dcff2(_0x1e2a35,_0x5cdeca);},'DYMLb':_0x1cf65d(-0xc6,0x85,-0x34,-0x2c)+_0x1cf65d(0x63,0x18,-0x112,-0x4b),'GweVm':function(_0x336499,_0x33eb67){return _0x336499(_0x33eb67);},'hDtsc':_0x25df1a(-0xaa,-0x5,-0x60,-0xa2),'nBqBa':_0x25df1a(0x68,0x4,0x2f,0x81),'gNoWz':function(_0x5e59b2,_0x5e9bc8){return _0x5e59b2===_0x5e9bc8;},'DGzYT':_0x25df1a(0x16e,0xec,0x8a,0x3f),'PVhcN':_0x25df1a(-0xa,0xbf,0xe4,0x158),'rGITY':function(_0x145337,_0x1ec1cc){return _0x145337/_0x1ec1cc;},'PImGV':function(_0xad512e,_0x1ef98b){return _0xad512e/_0x1ef98b;},'yTibP':function(_0x47e3ce,_0x47394c){return _0x47e3ce||_0x47394c;},'sqKxf':'video/mp4','htgJH':'Video\x20resp'+_0x25df1a(0x4f,0x33,0x11c,-0x6e)+_0x1cf65d(0x9e,-0x16,0x45,0x53)+_0x25df1a(-0x5e,-0x65,0x6,-0xf7)+_0x25df1a(0x87,0x73,0xe7,-0x66),'NNLCJ':_0x25df1a(0x19,0x3f,0xc3,0x8f),'LTmzP':function(_0x25e257,_0x1adeef){return _0x25e257(_0x1adeef);},'aDVpF':_0x1cf65d(-0x91,-0x82,-0x64,-0x9b),'UNfvr':function(_0x193578,_0x1f9fac){return _0x193578===_0x1f9fac;},'KIdOp':_0x1cf65d(-0xc2,0x0,0x3c,0x2),'KxMQY':function(_0xc0abc6,_0x203a8d){return _0xc0abc6||_0x203a8d;},'plOmr':function(_0x1e2ffb,_0x2dd665){return _0x1e2ffb!==_0x2dd665;},'nVGIy':_0x25df1a(0xf1,0x1c,0x64,0x45),'gmJsi':_0x1cf65d(-0xfc,0x33,-0x68,-0x3e),'xmbvC':function(_0x1e5fc9,_0x5ffad6){return _0x1e5fc9(_0x5ffad6);},'RpvSP':function(_0x170ab2,_0x4fb9e6){return _0x170ab2<=_0x4fb9e6;},'LvoAj':function(_0x542806,_0x220b5f){return _0x542806+_0x220b5f;},'GhGUt':function(_0x1d0247,_0x1fa539){return _0x1d0247+_0x1fa539;},'RPyPa':function(_0x306796,_0x4129b3){return _0x306796(_0x4129b3);},'SEPXB':_0x1cf65d(-0x24,0x64,-0x51,-0x62)+_0x1cf65d(-0x7b,-0x7d,-0x1a2,-0xf2),'QNXvK':function(_0x4e8731,_0x392ebb){return _0x4e8731<=_0x392ebb;},'UyYsj':function(_0x359bbe,_0x274992){return _0x359bbe===_0x274992;},'XahBl':_0x1cf65d(0x93,0xe5,0xd9,0x6c),'mGQUN':function(_0x387898,_0x2c18fa){return _0x387898!==_0x2c18fa;},'zqxSX':_0x25df1a(-0xb4,0x26,0x1,0x1b),'RsmIU':_0x1cf65d(0x27,-0x30,-0x27,0x6f),'gBmCO':function(_0x197321,_0x225849){return _0x197321+_0x225849;},'eTlqw':function(_0x53127a,_0x39bc00){return _0x53127a(_0x39bc00);},'KCoSx':'obPUc','TuOga':'前置前','NuijC':_0x25df1a(-0x3a,-0x68,-0x63,0x31),'vpdHj':_0x1cf65d(-0x152,-0x1e,-0x1c,-0xe2),'vTmen':_0x1cf65d(-0x97,0x43,0x24,-0x57),'scDHd':function(_0x32f11f,_0x24b04a){return _0x32f11f(_0x24b04a);},'cRDsM':_0x25df1a(-0x3c,-0x52,-0xa1,-0x49)+_0x1cf65d(-0x140,-0x2b,-0x191,-0xdb)+'。','KKfle':function(_0x42d69b,_0x1173d4){return _0x42d69b||_0x1173d4;},'qNdqO':_0x1cf65d(-0x12,-0x107,0x1,-0x91)+_0x1cf65d(-0x156,-0x157,-0x10e,-0xc0)+'。','cvroQ':function(_0x58fd81,_0x32ae7d){return _0x58fd81||_0x32ae7d;},'YXCXC':function(_0x273430,_0x3595bd){return _0x273430(_0x3595bd);},'FmsXb':_0x1cf65d(-0x38,-0x14d,-0xc5,-0xc2),'fsFLV':function(_0x4484ab,_0x257a08){return _0x4484ab(_0x257a08);},'nJpgX':function(_0x432c97,_0x370805){return _0x432c97>_0x370805;},'bsfBT':function(_0xe8e9d,_0x2d8d27){return _0xe8e9d>_0x2d8d27;},'mksLG':_0x1cf65d(-0xce,-0x14c,-0x12e,-0x68),'aRaTv':function(_0x31ff3f,_0x268551){return _0x31ff3f(_0x268551);},'rkJEf':function(_0x4f59b4,_0x50a812){return _0x4f59b4(_0x50a812);},'JUHut':function(_0x3e6c15,_0xd8bb09){return _0x3e6c15||_0xd8bb09;},'JUPHz':function(_0x3f4c2f,_0x1f8eff){return _0x3f4c2f(_0x1f8eff);},'KsEaW':function(_0xe1df9a,_0x46046c){return _0xe1df9a+_0x46046c;},'gKnoU':function(_0x2856f6,_0x57a9ed){return _0x2856f6!==_0x57a9ed;},'KuAZC':_0x25df1a(-0x3c,0x2e,0xf7,0x6f),'AZuGy':function(_0x36393d,_0x3b14ca){return _0x36393d+_0x3b14ca;},'hNNxY':function(_0x5c4d0b,_0xece3ff){return _0x5c4d0b+_0xece3ff;},'KvVUb':function(_0x7058cd,_0x261b77){return _0x7058cd+_0x261b77;},'FpiGz':function(_0x651b31,_0x5c9989){return _0x651b31===_0x5c9989;},'IntWc':_0x25df1a(0x27,0xd3,0x1b4,0x128),'YewYR':_0x1cf65d(0xe3,0xbb,0x64,0x12),'ghMRP':_0x1cf65d(-0x8b,-0x26,-0x126,-0x80),'mSFiq':'FLALI','QTgwx':function(_0x373ed,_0x2373f3,_0x7c943b){return _0x373ed(_0x2373f3,_0x7c943b);},'UBAgu':function(_0x31e236,_0x4c1ae5){return _0x31e236/_0x4c1ae5;},'XFhfr':function(_0x4ece95,_0x55c936){return _0x4ece95||_0x55c936;},'PvGVq':function(_0x4ee11b,_0x5e1a50){return _0x4ee11b(_0x5e1a50);},'JUNOD':function(_0x103dfe,_0x2d3459){return _0x103dfe!==_0x2d3459;},'aOemz':_0x25df1a(0x3f,0x71,-0x1f,0x8f),'Kxfpw':function(_0x4e3f2,_0x577406){return _0x4e3f2===_0x577406;},'ARlSw':_0x1cf65d(0x3,0x5b,0x173,0x92),'DztYy':function(_0x1c9748,_0x48b388){return _0x1c9748===_0x48b388;},'DfEKq':_0x1cf65d(0x120,-0x2d,0x2b,0xa7),'yjhCL':_0x1cf65d(-0x17c,-0x16f,-0xc6,-0xe7)+'/','FUxhg':function(_0x2946d2,_0x1765ff){return _0x2946d2(_0x1765ff);},'fKBqe':function(_0x4ef98c,_0x303933){return _0x4ef98c(_0x303933);},'lBfZm':function(_0x19d406,_0x28769d){return _0x19d406===_0x28769d;},'GyIrN':_0x25df1a(0x8c,0x83,0x9a,0xb1),'OZyFJ':'[Banana]\x20D'+_0x25df1a(0x2d,-0x75,-0x95,-0x2b)+_0x25df1a(0x25,0xbc,0x6e,0x132)+_0x1cf65d(-0xe1,-0x15c,-0xef,-0xe5)+_0x25df1a(0x88,0xea,0x105,0x6f)+'.','TudfU':_0x1cf65d(0xcd,-0x24,0x6f,0x79),'TTxJa':function(_0x51e33d,_0x5bcee3,_0xf692b1){return _0x51e33d(_0x5bcee3,_0xf692b1);},'woGAw':function(_0x2f9ae3){return _0x2f9ae3();},'KaZKt':function(_0xcd60b6,_0x17c89e){return _0xcd60b6(_0x17c89e);},'LNWab':_0x1cf65d(-0x7b,-0x122,-0x4e,-0x59),'GVTWM':function(_0x183f09,_0x1c7c4e){return _0x183f09!==_0x1c7c4e;},'RMrlZ':_0x1cf65d(0x5e,0x1a3,0x8d,0xbf),'TMIUD':_0x1cf65d(-0x2a,0x90,0x94,0x17)+_0x1cf65d(0xf0,0x109,-0x31,0x60)+_0x1cf65d(0x6a,0xc0,-0x7e,0xa)+_0x1cf65d(0x92,0x109,0x102,0xba)+_0x1cf65d(0x34,0x99,-0x65,0x45)+_0x1cf65d(0xcd,0x31,-0x14,0x7b),'AVQaN':_0x1cf65d(0x9e,0xb3,0x18,0x4f),'VwmAk':_0x1cf65d(-0xb8,-0x6,-0x121,-0xd1),'xKKfq':function(_0x51231b,_0x1f8248){return _0x51231b(_0x1f8248);},'YzkcK':_0x25df1a(-0x15c,-0x78,-0x20,-0x50),'VraLt':_0x1cf65d(0x9c,-0x4d,0x80,-0x3a),'XntQZ':_0x1cf65d(-0xc4,-0x12b,-0x7d,-0xd0)+_0x1cf65d(0x40,-0x2,0xb7,0x52)+'ated\x20succe'+_0x1cf65d(-0x85,0xb6,-0x10,0x7),'srQfJ':function(_0x254575,_0x1a0196){return _0x254575||_0x1a0196;},'pxsBg':_0x1cf65d(0x124,0x11b,-0x85,0x4a),'MKzma':function(_0x7b571c,_0x22aefd){return _0x7b571c(_0x22aefd);},'bzVrq':_0x25df1a(-0x38,0x64,-0x6e,0x113)+_0x25df1a(0x74,-0x2,-0xa2,0xa1)+':'};_0x37c912[_0x25df1a(-0x41,-0x6c,-0x93,-0xa2)](clearLog);const _0x262136=taskQueue[_0x1cf65d(-0x1c,-0xa3,-0x135,-0xed)]({'name':_0x37c912[_0x1cf65d(-0xc3,0x33,-0xc1,-0x37)](_0x37c912['nxLin'](_0x217dd6,'')[_0x1cf65d(-0x57,0x92,0x4a,0x3a)](-0x1a9c+-0x1*-0x1973+0x129,0x1*-0x169f+0x2f7*0x7+0x1fc),_0x217dd6&&_0x217dd6[_0x1cf65d(-0x150,-0xe7,0x4,-0xd9)]>-0x2155+-0x377*0x1+0x24ea?_0x37c912[_0x1cf65d(-0x1e,0x5b,-0xa5,-0x7e)]:''),'type':TaskType[_0x1cf65d(0x195,0x118,0x122,0xd2)],'prompt':_0x217dd6});currentTaskId=_0x262136;if(_0x3fa974&&_0x3fa974[_0x1cf65d(-0x80,0x9d,0x10e,0x30)](_0x37c912[_0x25df1a(0x9e,0x10a,0x3b,0x125)])){if(_0x37c912[_0x25df1a(-0x1c,0x1f,0x8a,-0x88)](_0x37c912['onrkh'],_0x37c912['onrkh'])){addLog('[Banana]\x20视'+_0x1cf65d(-0xf7,0x53,0x98,-0x1f)+_0x1cf65d(-0x9b,-0x4,-0x60,-0xa3)+'请求');const _0x3a4304=extension_settings[extensionName][_0x25df1a(0xfd,0x9a,0x2c,0x11b)],{videoModel:_0x289b28,model:_0x11ddbd,apiUrl:_0x59bb36,apiKey:_0x29891b,conversationPresets:_0x47032b,videoPresetId:_0x2168bb,aspectRatio:_0x51ffd8}=_0x3a4304,_0xdc853c=_0x37c912['xemnm'](_0x289b28,_0x11ddbd);addLog(_0x1cf65d(0x162,0xc5,0x8e,0xca)+'频模式使用模型:\x20'+_0xdc853c);const _0x4d94a7=_0x2168bb||'默认',_0x3524ff={};_0x3524ff['conversati'+'on']=[],_0x3524ff[_0x1cf65d(-0x125,-0x4b,-0xaf,-0x4e)+'t']='';const _0x20b3cd=_0x47032b[_0x4d94a7]||_0x3524ff;_0x37c912[_0x25df1a(0x53,-0x2c,-0x7d,-0x14)](addLog,_0x1cf65d(-0x44,0x68,0x8,0x69)+'用视频预设:\x20\x22'+_0x4d94a7+'\x22');const _0x1c8965={};_0x1c8965[_0x1cf65d(0xc4,0x14d,0xec,0x72)]=_0x1cf65d(0xda,0x32,0xad,0x2f),_0x1c8965[_0x25df1a(0x1c2,0xeb,0x111,0x118)]=[];const _0x27968f={};_0x27968f[_0x25df1a(0x13d,0xb1,0x47,0x9c)]='assistant',_0x27968f[_0x1cf65d(0x24,0x13c,-0x1c,0xac)]=[];const _0x573fc7=_0x20b3cd[_0x25df1a(0x72,0x116,0x1a9,0x182)+'on'][_0x1cf65d(-0x81,0x48,-0x133,-0x5f)](_0x369c14=>[_0x1c8965,_0x27968f])[_0x25df1a(0x3d,-0x95,-0x163,0x2e)]();let _0x2e49ca=-0x1876+0xde3+-0x1*-0xa93;for(const _0x57c292 of _0x20b3cd[_0x25df1a(0x1bf,0x116,0x175,0x6f)+'on']){if(_0x57c292[_0x1cf65d(0x101,-0x96,-0x6,0x2f)]?.[_0x25df1a(-0x4e,-0x2b,0x6,-0x6a)])_0x573fc7[_0x2e49ca]['content'][_0x1cf65d(0x26,-0x2c,-0x65,0x40)]({'type':'text','text':_0x57c292[_0x25df1a(0xa5,0x6e,0x85,0x88)][_0x1cf65d(-0x2,-0x50,0x7a,-0x6a)]});const _0x5439d5=await _0x37c912['zhoIK'](getImageFromTurnData,_0x57c292[_0x1cf65d(0x76,0x10e,0xc8,0x2f)]);if(_0x5439d5)_0x573fc7[_0x2e49ca][_0x25df1a(0x18e,0xeb,0x25,0xbf)]['push']({'type':_0x37c912[_0x25df1a(0x49,0x94,0x3d,0x114)],'image_url':{'url':_0x5439d5}});_0x2e49ca++;if(_0x57c292[_0x25df1a(0xd,0xe0,0x1bb,0xfd)]?.[_0x25df1a(-0x2,-0x2b,-0x5a,-0x66)])_0x573fc7[_0x2e49ca][_0x25df1a(0x4,0xeb,0x9c,0x9e)][_0x25df1a(0x20,0x7f,0xa6,0x63)]({'type':_0x37c912[_0x1cf65d(0x4f,0x0,0x123,0x57)],'text':_0x57c292[_0x25df1a(0x15a,0xe0,0x4c,0x109)][_0x1cf65d(0x49,-0x12e,0xc,-0x6a)]});const _0x1a7e4f=await getImageFromTurnData(_0x57c292[_0x25df1a(0x139,0xe0,0x14d,0x10b)]);if(_0x1a7e4f)_0x573fc7[_0x2e49ca][_0x1cf65d(0xf7,0xe5,-0x39,0xac)][_0x25df1a(-0x44,0x7f,-0x41,0x79)]({'type':_0x37c912[_0x1cf65d(0x132,0xdf,0x10,0x55)],'image_url':{'url':_0x1a7e4f}});_0x2e49ca++;}const _0x302011=[],_0x2afe32=_0x313e9f||'',_0x371a48=[_0x20b3cd[_0x1cf65d(0x8a,-0x65,-0xe7,-0x4e)+'t'],_0x2afe32,_0x20b3cd[_0x1cf65d(-0x8,-0x2a,-0x9f,0x5)+_0x1cf65d(-0x4e,0x36,-0x10b,-0x32)]]['filter'](Boolean)[_0x1cf65d(0x3b,-0xa9,-0x8d,-0x29)](',\x20'),_0x21177a={};_0x21177a['type']=_0x37c912[_0x1cf65d(0x53,0xdf,0x1c,0x57)],_0x21177a[_0x25df1a(-0x27,-0x2b,-0x3f,-0xa8)]=_0x371a48,_0x302011[_0x1cf65d(-0x8a,0x74,-0x42,0x40)](_0x21177a);if(_0x13b23a){const _0x2e8cef={};_0x2e8cef['url']=_0x13b23a;const _0x1e9bd9={};_0x1e9bd9[_0x25df1a(0x137,0xd0,0xe3,0x77)]=_0x37c912[_0x25df1a(0x151,0x94,0xc7,-0x4a)],_0x1e9bd9[_0x25df1a(-0x97,-0x25,0x62,0xa2)]=_0x2e8cef,_0x302011[_0x25df1a(-0x21,0x7f,0x107,0x15d)](_0x1e9bd9),_0x37c912[_0x1cf65d(-0x104,-0x4b,-0x82,-0x6b)](addLog,'[Banana]\x20视'+_0x1cf65d(0xb3,0x149,-0x42,0x9b)+'片');}const _0x1fb655={};_0x1fb655['role']=_0x37c912[_0x1cf65d(0x7d,-0x73,-0xba,0x26)],_0x1fb655[_0x25df1a(0xf4,0xeb,0xff,0x138)]=_0x302011,_0x573fc7['push'](_0x1fb655),_0x37c912['ohOtj'](addLog,_0x1cf65d(0xc2,0x88,0xe9,0xca)+_0x25df1a(-0x27,0x10,-0x45,0xd1)+_0x371a48);const _0x4d7028={};_0x4d7028['aspectRati'+'o']=_0x51ffd8;const _0x4226b5={};_0x4226b5[_0x1cf65d(-0x95,-0x1d0,-0x1cf,-0xef)+'g']=_0x4d7028;const _0x2c35eb={'model':_0xdc853c,'messages':_0x573fc7[_0x1cf65d(-0xf7,-0x6f,-0xc7,-0xb2)](_0x59bf3b=>_0x59bf3b[_0x25df1a(0xf,0xeb,0x106,0x1cc)]['length']>0xc*-0x2e6+0x251c+-0x4*0x95),'config':_0x4226b5};_0x37c912[_0x1cf65d(0x139,0xcf,0xdc,0x5f)](addLog,_0x1cf65d(0x3,0xdc,0x11f,0xca)+_0x1cf65d(0x13f,0x30,0x41,0x9a)+_0x25df1a(0xb6,-0x9,0x43,0x70)+_0x2c35eb['messages'][_0x1cf65d(-0x99,-0x168,-0x175,-0xd9)]+_0x1cf65d(0x83,0x92,0xa,0xcc));const _0x393faa=_0x37c912[_0x25df1a(0x2,-0x8,-0xd5,0x39)];let _0x271a95=_0x59bb36[_0x25df1a(-0xa6,0x39,-0x11,0x6f)](/\/$/,''),_0x1c0be7;_0x271a95[_0x25df1a(0x91,-0x21,-0xd6,-0x5d)](_0x37c912['OeXzD'])||_0x271a95[_0x25df1a(-0x39,0x6f,0x5c,0x14b)]('/v1/')?_0x1c0be7=_0x37c912[_0x1cf65d(0xa6,0x66,0x5d,0x1d)](_0x271a95,_0x393faa):_0x1c0be7=_0x37c912['JBPAs'](_0x37c912[_0x25df1a(0xbb,0xdc,0x9,0x8a)](_0x271a95,_0x37c912[_0x1cf65d(-0x21,0x52,-0xd8,-0x35)]),_0x393faa);_0x1c0be7=_0x1c0be7[_0x1cf65d(0x8a,-0x8,-0x5e,-0x6)](/\/v1\/v1\//g,_0x37c912[_0x1cf65d(-0x47,0x1c,-0x67,0x43)]);const _0x30ce11=extension_settings[extensionName][_0x1cf65d(0xdb,0x3f,0xe0,0x3)];let _0x2c0334,_0x581dcf,_0x37e4de;if(_0x37c912['gRPIu'](_0x30ce11,_0x37c912['azBdg'])){if(_0x37c912[_0x1cf65d(0x46,0x161,-0x49,0x8d)](_0x37c912['dfbca'],_0x37c912['dfbca'])){_0x15aa52(_0x25df1a(0x4e,-0x91,0x49,-0xcd)+'magen\x20模型不支'+_0x25df1a(0x112,0x55,0x41,0x8f)+_0x1cf65d(0x19,-0x15f,0x25,-0x85)),_0x499e27=_0x3c9cb0;const _0x41ec3f={};_0x41ec3f[_0x1cf65d(0x4f,0xa0,0x98,0x70)+'pe']='applicatio'+_0x1cf65d(-0x1e,0x1c,-0x83,-0x4b),_0x41ec3f[_0x25df1a(-0x151,-0x74,0x21,-0x140)+_0x1cf65d(-0x48,-0x1a,-0x8c,-0x98)]=_0x25df1a(0xb2,-0x1d,-0x6e,0x1d)+_0x4a53f0,_0x1d0274=_0x41ec3f,_0x1f1ea8=_0x3acb25;}else{let _0x29efcd=_0x271a95;!_0x29efcd['endsWith'](_0x37c912[_0x1cf65d(0x46,-0xe8,-0x99,-0x35)])&&!_0x29efcd[_0x1cf65d(-0x11,-0x42,-0x56,0x30)](_0x37c912[_0x1cf65d(-0x41,0x82,0xcf,0x43)])&&(_0x29efcd=_0x37c912['gROSq'](_0x29efcd,'/v1'));_0x29efcd=_0x29efcd[_0x1cf65d(-0xc,0x9e,0x54,-0x6)](/\/v1\/$/,_0x37c912['OeXzD']),_0x2c0334=_0x37c912[_0x1cf65d(0x3b,-0xd1,0x19,-0x2e)],_0x581dcf=getRequestHeaders(window[_0x25df1a(0x35,-0x76,0x3c,-0x40)]);const _0x1cbbd6={};_0x1cbbd6[_0x25df1a(0x82,0x75,-0x62,0xbd)+_0x25df1a(-0x141,-0x80,-0x160,-0x17)+'ce']=_0x37c912[_0x25df1a(0xa9,0x38,-0x4e,-0x97)],_0x1cbbd6[_0x1cf65d(0x2d,0x3,-0x8c,-0x17)]=_0x29efcd,_0x1cbbd6[_0x25df1a(-0x17,-0xa5,-0x17b,0x10)+'lude_heade'+'rs']=_0x1cf65d(-0xc9,-0xa6,0x2a,-0xb3)+_0x1cf65d(0x10a,0xef,0x12f,0xc6)+_0x25df1a(0xdb,0x4d,0x123,0x51)+_0x29891b+'\x22',_0x1cbbd6[_0x1cf65d(0xd6,0x10d,0x167,0xa1)]=_0xdc853c,_0x1cbbd6[_0x1cf65d(0x25,0x13,0x54,-0x8f)]=_0x2c35eb['messages'],_0x1cbbd6[_0x25df1a(-0x100,-0x58,0x3c,0x5d)]=![],_0x37e4de=_0x1cbbd6;}}else{if(_0x37c912[_0x1cf65d(-0xcd,-0xd9,-0x5e,-0x95)](_0x25df1a(0x16a,0xa1,0xee,0x147),'bpGZs')){_0x37c912['zhoIK'](_0x276757,_0x37c912[_0x1cf65d(0x79,0x13c,-0x5d,0x86)]),_0x403acb=_0x51f9ac(_0x48cdea),_0x15e45c=_0x200b2d[_0x37c912[_0x1cf65d(-0x156,-0xb8,-0xa0,-0xf1)]];for(let _0x25f8ca=-0x1c05+-0x1ca2+0x38a8;_0x37c912['TtrNg'](_0x25f8ca,-0x1*0x7db+0x1dfe+-0x161f);_0x25f8ca++){_0x20e83c[_0x25df1a(-0x31,-0x8e,-0xff,-0x117)+_0x25f8ca+_0x25df1a(0xca,0xaa,0x159,0x11a)]&&(_0x535a5d=_0x37c912['JBPAs'](_0x381518,',\x20')+_0xcaf363[_0x1cf65d(-0x8f,-0x137,-0x19f,-0xcd)+_0x25f8ca+_0x1cf65d(0xd6,0xf0,0xe6,0x6b)]);}}else _0x2c0334=_0x1c0be7,_0x581dcf=_0x37c912[_0x25df1a(-0xd9,-0x2e,-0x4c,-0x7f)](getDirectHeaders,_0x37c912['DYMLb'],_0x1cf65d(-0x12,-0x3f,0x53,-0x5c)+_0x29891b),_0x37e4de=_0x2c35eb;}_0x37c912[_0x25df1a(0xa6,-0x2c,0x77,-0x7b)](addLog,_0x1cf65d(0x42,0x12a,-0xb,0xca)+_0x25df1a(-0xbf,-0x37,-0xda,-0x14)+_0x2c0334),_0x37c912[_0x25df1a(0x1d,0x8a,0x35,0x157)](addLog,_0x25df1a(0x5c,0x109,0x118,0xa7)+_0x25df1a(0x6,0x21,0x33,0xf8)+'\x20'+JSON[_0x25df1a(0x6e,0xc6,0x68,0x66)](_0x37e4de,null,0x1a75+0x4*-0x56a+0x199*-0x3));try{if(_0x37c912[_0x25df1a(0x78,0x1f,0x94,0x4b)](_0x25df1a(-0x2f,-0x98,-0x148,-0x16e),_0x1cf65d(-0x1,-0x18,-0x6f,-0xd7))){taskQueue['updateStat'+'us'](_0x262136,_0x37c912[_0x1cf65d(-0x45,0xb8,-0x5,0x27)]);const _0x16330a=await fetch(_0x2c0334,{'method':_0x37c912['nBqBa'],'headers':_0x581dcf,'body':JSON['stringify'](_0x37e4de)});if(!_0x16330a['ok']){if(_0x25df1a(0x6a,-0x2f,0x31,0xa8)!==_0x25df1a(-0x39,0x5f,0x2,0x48)){const _0x438e24=await _0x16330a[_0x1cf65d(-0xd,-0x64,-0x57,-0x6a)]();throw new Error(_0x25df1a(0x9d,0x85,0x49,-0x62)+_0x25df1a(0x15e,0x81,0x18,-0x50)+_0x1cf65d(-0x6a,0xf,0x39,0x21)+'\x20'+_0x16330a[_0x25df1a(0x108,0x7b,-0x45,0xea)]+':\x20'+_0x438e24);}else{const _0x52beb5=new _0x12a080();_0x52beb5[_0x25df1a(-0x7a,0x23,-0x19,0xce)]=()=>_0x10fdd2(_0x52beb5['result']),_0x52beb5[_0x1cf65d(0xdf,0xe7,0x85,0x56)]=_0x47efa2,_0x52beb5[_0x25df1a(-0x40,-0x60,-0x8a,-0x131)+_0x25df1a(-0x58,0x37,0xf2,-0x2c)](_0x3cd45c);}}const _0x3374da=await _0x16330a[_0x1cf65d(0x193,0x146,0x6b,0xc1)](),_0x2b201b=_0x3374da[_0x1cf65d(0x118,0x48,0xc3,0x47)]?.[-0x1b8f+-0xe7d+-0x24*-0x12b]?.[_0x1cf65d(0xcb,-0xc9,0xaf,-0x12)]?.['content'];if(_0x37c912['gNoWz'](typeof _0x2b201b,_0x37c912['DGzYT'])){const _0x505bd3=_0x2b201b[_0x1cf65d(-0x47,-0x12a,-0x32,-0xc3)](/src="([^"]+\.mp4[^"]*)"/);if(_0x505bd3&&_0x505bd3[0x1cf4+0x1*-0xe9f+-0xe*0x106]){const _0x51118a=_0x505bd3[-0xc64+0x885+-0x1f0*-0x2];addLog('[Banana]\x20V'+_0x25df1a(0x7e,0xe2,0x21,0x19a)+_0x25df1a(0xcb,0x47,0x25,0xfd)+_0x51118a);try{const _0x1751f8=await fetch(_0x51118a,{'headers':_0x37c912[_0x1cf65d(-0xed,-0x111,-0x42,-0xab)](getDirectHeaders)});if(!_0x1751f8['ok']){if(_0x37c912[_0x25df1a(-0x125,-0x56,0x86,0x36)](_0x37c912[_0x1cf65d(0x89,0x3,0x19,0x1)],'GoyRs'))_0x2016bf=_0x37c912[_0x1cf65d(-0xe9,0x43,0x47,-0x31)](_0x151934,_0xb9d7c7);else throw new Error(_0x25df1a(-0x62,-0x70,-0x13f,-0x5f)+'fetch\x20vide'+_0x25df1a(0x168,0x97,-0x20,0x17f)+_0x1751f8[_0x1cf65d(0x4c,-0x92,-0x7b,0x3c)]);}const _0x56c228=await _0x1751f8[_0x1cf65d(0x19,-0x20,-0xb5,-0x14)](),_0x28e4fb=await new Promise((_0x162d1c,_0x1f0371)=>{const _0x40bab9=new FileReader();function _0x4271de(_0x3580c3,_0x314b1b,_0x55c692,_0x4126be){return _0x1cf65d(_0x3580c3-0x17b,_0x55c692,_0x55c692-0x19,_0x3580c3- -0xc8);}_0x40bab9[_0x256d0d(0x567,0x56e,0x48f,0x50b)]=()=>_0x162d1c(_0x40bab9[_0x4271de(-0x6e,-0x56,-0x2b,-0xce)]);function _0x256d0d(_0x505b54,_0x40621f,_0x4da7cb,_0x3ba23b){return _0x1cf65d(_0x505b54-0x8e,_0x4da7cb,_0x4da7cb-0xda,_0x40621f-0x58a);}_0x40bab9[_0x256d0d(0x65d,0x5e0,0x613,0x521)]=_0x1f0371,_0x40bab9['readAsData'+_0x256d0d(0x666,0x582,0x4b9,0x5f8)](_0x56c228);});addLog(_0x25df1a(0xc7,0x103,0x120,0x55)+'ideo\x20downl'+_0x25df1a(0x1f,0x48,0x12f,0x21)+_0x37c912['rGITY'](_0x37c912[_0x25df1a(0xa2,0x108,0xc6,0xdd)](_0x56c228[_0x1cf65d(0x107,0xf7,-0x4a,0x93)],-0x144f+0xe*0x192+0x253),-0x15*-0xc8+0xe7d*0x2+-0x2962)[_0x25df1a(-0xeb,-0x87,-0x8a,-0xc6)](0x3*0xce5+0x78d*0x2+0x1*-0x35c7)+_0x25df1a(-0x10f,-0x9f,-0x105,-0x159)),taskQueue['completeTa'+'sk'](_0x262136,!![]),currentTaskId=null;const _0x2a6110=_0x3fa974[_0x25df1a(-0x3a,-0x86,0x2e,-0xed)](_0x25df1a(0x1a4,0xca,0xf0,0x161),'');return{'image':_0x28e4fb,'change':_0x37c912[_0x25df1a(0x73,-0x66,-0x135,0x10)](_0x2a6110,_0x217dd6),'isVideo':!![],'format':_0x37c912[_0x1cf65d(0x56,-0x1a,0xc7,0x5c)]};}catch(_0x49292e){_0x37c912[_0x1cf65d(-0xd,-0x10f,0x49,-0x6b)](addLog,'[Banana]\x20F'+_0x25df1a(-0x2a,-0x3d,-0x125,0x23)+_0x25df1a(0x13,-0x8c,-0x152,-0x149)+'deo:\x20'+_0x49292e[_0x1cf65d(-0x88,-0xd2,-0x4b,-0x12)]);throw new Error(_0x1cf65d(0x49,0xe,-0x74,-0x42)+_0x49292e[_0x25df1a(0x9b,0x2d,0x30,0xd2)]);}}}throw new Error(_0x37c912[_0x25df1a(-0x14,0x76,0x110,0x13b)]);}else{const _0x213bab=new _0x2bab8a();_0x213bab[_0x1cf65d(0x4e,0x53,0x11,-0x1c)]=()=>_0x2117b0(_0x213bab[_0x1cf65d(0xb3,0x2b,0x35,0x5a)]),_0x213bab[_0x1cf65d(-0x2c,0xa8,0xa5,0x56)]=_0x426896,_0x213bab[_0x1cf65d(-0x146,-0x5d,-0x141,-0x9f)+_0x1cf65d(0xd2,-0x19,-0x63,-0x8)](_0x55d33f);}}catch(_0x3d1a5c){if(_0x37c912['pgXJL'](_0x37c912[_0x25df1a(0xfb,0x18,0xd4,0xfe)],_0x37c912[_0x25df1a(0x1b,0x18,-0x1e,-0x32)])){const _0x4ea1fd={};_0x4ea1fd[_0x25df1a(0x11b,0xb1,0x41,0xe1)]='assistant',_0x4ea1fd[_0x1cf65d(0x14a,0xe8,0xef,0xac)]=_0x1fea4f,_0x5e797c[_0x25df1a(-0x69,0x7f,0x86,0x2f)](_0x4ea1fd);}else{_0x37c912['LTmzP'](addLog,_0x1cf65d(0x6d,0x24,0x14c,0xca)+_0x1cf65d(-0x3f,0x11b,0x86,0x41)+_0x3d1a5c[_0x1cf65d(0x36,-0x24,-0xf0,-0x12)]);if(_0x3d1a5c[_0x25df1a(0xae,0x2d,-0x8c,0x24)]===_0x37c912[_0x25df1a(-0x4f,-0x71,-0x157,-0x144)]){}else _0x37c912[_0x1cf65d(-0x89,-0x98,-0x166,-0xee)](_0x37c912['KIdOp'],_0x1cf65d(-0xc0,0xe3,0x98,0x2))?taskQueue[_0x1cf65d(0x98,0x141,0xad,0xb7)+'sk'](_0x262136,![]):_0x503ed9[_0x25df1a(0x24,0xf6,0x182,0x57)+'sk'](_0x4fc1e7,![]);currentTaskId=null;throw _0x3d1a5c;}}}else _0x37c912['zhoIK'](_0x272934,_0x25df1a(0x62,0x67,0x5c,-0x71)+'库');}_0x217dd6=_0x37c912[_0x25df1a(0x142,0xfc,0x189,0xbd)](processCharacterPrompt,_0x217dd6),_0x217dd6=await stripChineseAnnotations(_0x217dd6);let _0x2f1727=_0x3fa974;_0x3fa974=processCharacterPrompt(_0x3fa974),_0x3fa974=await _0x37c912[_0x25df1a(0xe4,0xfc,0x71,0x58)](stripChineseAnnotations,_0x3fa974),_0x37c912[_0x25df1a(0x83,0x9e,0xb4,0x62)](addLog,_0x1cf65d(0x62,0xfe,0x70,0xc5)+_0x1cf65d(-0x116,-0xce,-0xfc,-0x4a)+extension_settings[extensionName]['client']),_0x37c912['GweVm'](addLog,_0x25df1a(0x65,0x3d,-0x19,-0x17)+'\x20'+_0x37c912[_0x1cf65d(-0xa9,-0x101,-0x13f,-0xa5)](_0x5d5ebc,'默认')+',\x20高度\x20-\x20'+_0x37c912[_0x1cf65d(0x9d,0x8f,0xc8,-0x1b)](_0x2f13fc,'默认')),_0x217dd6=_0x3fa974&&_0x37c912[_0x1cf65d(-0x44,-0xa6,0x1d,-0x15)](_0x3fa974[_0x25df1a(0x50,0xbd,0xef,0xf3)](),'')?_0x3fa974:_0x217dd6,addLog(_0x1cf65d(0xaf,0x7,-0x3b,0xd)+_0x217dd6);let _0x5c4ea3=![];_0x217dd6[_0x25df1a(0xfa,0x6f,0x152,0x97)](_0x37c912[_0x1cf65d(-0x15e,-0x63,-0x52,-0xf1)])&&(_0x5c4ea3=!![]);addLog('是否启用分角色模式\x20'+'(Divide_ro'+_0x25df1a(-0xc4,-0x43,-0xed,0x37)+_0x5c4ea3);let _0x8ec758={},_0x382a97='';function _0x25df1a(_0x244c35,_0x3d6507,_0xeb8f62,_0x3e02b8){return _0x4712(_0x3d6507- -0x236,_0xeb8f62);}let _0x4d4e18='';if(_0x5c4ea3){if(_0x37c912['nVGIy']!==_0x37c912['gmJsi']){_0x37c912[_0x25df1a(-0x9b,-0x44,-0xe5,-0x31)](addLog,_0x25df1a(-0x39,0x3e,0xc2,0x62)+_0x25df1a(-0x1a,0xa5,0x127,0x37)),_0x8ec758=_0x37c912['LTmzP'](parsePromptStringWithCoordinates,_0x217dd6),_0x382a97=_0x8ec758[_0x37c912['ZFBCc']];for(let _0x52c2ae=0x2a*-0x6c+0x4e*0x24+0x6c1;_0x37c912['RpvSP'](_0x52c2ae,0x22d*-0x11+0x1*0x1c31+-0x4*-0x234);_0x52c2ae++){_0x8ec758[_0x1cf65d(-0x49,-0xb0,-0x6e,-0xcd)+_0x52c2ae+'\x20Prompt']&&(_0x4d4e18=_0x37c912['LvoAj'](_0x37c912[_0x25df1a(0x168,0xcf,0x160,0x137)](_0x4d4e18,',\x20'),_0x8ec758[_0x25df1a(0x4,-0x8e,-0x3,0x57)+_0x52c2ae+_0x1cf65d(-0xa,-0x14,-0x4,0x6b)]));}}else return _0x584a36[_0x1cf65d(0xda,-0x89,-0x4d,0x24)];}else _0x37c912[_0x1cf65d(0x96,0x2,0x10,0xa2)](addLog,_0x37c912['SEPXB']),_0x382a97=_0x217dd6;let {modifiedPrompt:_0x36c152,insertions:_0x289cea}=await _0x37c912['wKnam'](prompt_replace,_0x382a97,_0x4d4e18);if(_0x5c4ea3)for(let _0x523adb=0xd2d+-0xd03*-0x1+-0x1a2f;_0x37c912[_0x25df1a(0x67,0xe4,0x81,-0x1)](_0x523adb,0x4b8+0x1*0x1c35+-0x695*0x5);_0x523adb++){_0x37c912[_0x25df1a(0x1fb,0x11a,0x85,0x83)](_0x37c912['XahBl'],_0x37c912[_0x1cf65d(-0x19b,-0x198,-0x186,-0xd5)])?_0x8ec758[_0x1cf65d(-0x150,-0xd2,-0x115,-0xcd)+_0x523adb+_0x25df1a(0x172,0xaa,0x118,-0x18)]&&(_0x37c912[_0x1cf65d(-0x45,-0x57,-0x147,-0x66)](_0x37c912[_0x25df1a(-0x79,0x36,0x5,-0xab)],_0x37c912[_0x25df1a(0x62,0xef,0x10,0x16b)])?_0x36c152=_0x37c912[_0x25df1a(0x62,0xcf,0xcb,0xb5)](_0x37c912[_0x25df1a(0xb1,0xfd,0x5e,0x1de)](_0x36c152,_0x37c912[_0x1cf65d(0x134,0x51,0x172,0xda)]),_0x37c912[_0x1cf65d(0xbb,0x131,0x132,0xa2)](prompt_replace_for_character,_0x8ec758[_0x1cf65d(-0x70,-0xe4,-0x35,-0xcd)+_0x523adb+_0x25df1a(0xfb,0xaa,0xe1,0x14)])):(_0x4720f3[_0x4e489b][_0x1cf65d(0x3b,0x7b,-0x30,0x5b)][_0x25df1a(-0x49,0x59,-0x3d,0x6a)]=_0x37c912[_0x1cf65d(-0x127,-0x10a,-0xe4,-0xbc)](_0x1e9d6e[_0x58c0b5][_0x25df1a(-0x3d,0x9a,0xf,0x97)][_0x25df1a(0x11f,0x59,0x15,-0x15)],-0x6f*-0x58+-0x6*0x36c+0x119f*-0x1),_0x37c912['zhoIK'](_0x304e6b,_0x1cf65d(-0x144,-0xac,0x59,-0x70)+_0x25df1a(-0xb5,-0x69,-0xb4,-0x88)+_0x4c902c[_0x232648][_0x1cf65d(-0x60,-0x57,0xc7,0x5b)][_0x25df1a(0x4e,0x59,0x133,0x89)]))):_0x468331['Character\x20'+_0x486d3a+_0x1cf65d(0x118,0xd7,0xf9,0x6b)]&&(_0x2bb55c=_0x37c912['EhtCy'](_0x37c912['BkeEB'](_0x5015d0,',\x20'),_0x45074a[_0x25df1a(-0x5,-0x8e,-0xc0,-0x17)+_0x4303e7+'\x20Prompt']));}const _0x58e126=extension_settings[extensionName][_0x1cf65d(-0x77,0x72,0x112,0x5b)],{model:_0x3a3d77,videoModel:_0x4e5673,apiUrl:_0x4a9592,apiKey:_0x4bded3,conversationPresets:_0x32e3d5,conversationPresetId:_0x2d28ea,editPresetId:_0x13201f,videoPresetId:_0x4713dc,aspectRatio:_0x5d0fba}=_0x58e126;_0x37c912[_0x25df1a(0xb0,0x115,0x195,0x1af)](addLog,_0x1cf65d(0xcc,-0x97,-0x5b,0x17)+_0x1cf65d(-0x8,0xe0,0x3f,0x5d)+'age\x20genera'+'tion\x20with\x20'+_0x1cf65d(0x62,0x39,0xa6,-0x26)+_0x3a3d77);let _0x455779,_0x5382fc;if(_0x3a3d77[_0x25df1a(-0x70,0x53,-0x17,-0x39)](_0x1cf65d(0x15,-0x19,0x9d,0x78))){if(_0x37c912[_0x25df1a(-0x79,-0x56,-0x22,0x4b)](_0x37c912[_0x1cf65d(0x1,-0x8e,0x6,-0x96)],'obPUc')){_0x455779=_0x1cf65d(-0xa,-0xfc,-0x76,-0xe6)+_0x1cf65d(-0x55,0x140,0xf3,0x67)+_0x3a3d77;const _0xe914ee={};_0xe914ee[_0x25df1a(0x67,-0xf,-0x17,-0x9f)+'t']='';const _0x271bb7=_0x32e3d5[_0x2d28ea]||_0xe914ee,_0x9fb0f0=[_0x271bb7['fixedPromp'+'t'],_0x289cea[_0x37c912[_0x1cf65d(0x0,-0x13,-0x97,0x29)]],_0x289cea[_0x1cf65d(-0x21,-0xf6,-0x24,-0x6c)],_0x36c152,_0x289cea[_0x37c912[_0x25df1a(0x10f,0x6c,0xe6,-0x38)]],_0x289cea[_0x37c912['vpdHj']],_0x271bb7[_0x1cf65d(0x67,-0x6d,0x2,0x5)+_0x1cf65d(-0x118,-0x119,0x5d,-0x32)],_0x289cea[_0x37c912[_0x25df1a(-0x75,-0x1c,-0x33,0x6e)]]][_0x1cf65d(-0x115,-0x30,-0x93,-0xb2)](Boolean)[_0x1cf65d(-0xbb,0x8a,0x3b,-0x29)](',\x20');addLog('正面提示词:\x20'+_0x9fb0f0);const _0x21b250={};_0x21b250[_0x1cf65d(0xa0,0xff,0xdb,0x6e)]=_0x9fb0f0;const _0x300c84={};_0x300c84[_0x1cf65d(-0x9e,0x74,0x77,-0x45)+'t']=0x1,_0x300c84[_0x25df1a(0x37,0x25,-0xc1,-0x3f)+'o']=_0x5d0fba;const _0x139d56={};_0x139d56[_0x1cf65d(0xc,-0xe8,0x2c,-0x8d)]=[_0x21b250],_0x139d56['parameters']=_0x300c84,_0x5382fc=_0x139d56,addLog(_0x25df1a(0x122,0xd7,0xe8,0x27)+_0x1cf65d(0x76,-0x9d,-0x148,-0x69)+'n\x20payload\x20'+_0x1cf65d(-0xe1,-0x94,-0x1a,-0x5d)+_0x25df1a(-0x92,-0x5a,0x1a,-0x10a)+_0x9fb0f0);}else{_0x4bc5cc('[Banana]\x20F'+_0x25df1a(-0xe4,-0x3d,-0xce,-0x51)+'ownload\x20vi'+_0x25df1a(0x49,0xb0,0x194,0xa2)+_0x2dca39[_0x1cf65d(0x52,0xf,0x2c,-0x12)]);throw new _0x15e715(_0x1cf65d(-0x2b,-0xb2,0x5e,-0x42)+_0xf1b523[_0x1cf65d(0x9d,-0xf1,0x70,-0x12)]);}}else{_0x455779=_0x37c912['Mjyow'];let _0x1cff64;if(_0x3fa974[_0x25df1a(-0xd,0x6f,-0x36,-0x16)](_0x37c912[_0x1cf65d(0x148,0x97,-0x6,0x99)])){_0x37c912[_0x25df1a(-0x29,0x7,-0x47,0x96)](addLog,_0x37c912[_0x25df1a(0x1a1,0xc0,0x6d,0x198)]);const _0x2a4a44=_0x37c912['KKfle'](_0x13201f,'默认'),_0x12cde2={};_0x12cde2[_0x25df1a(0x7c,0x116,0x44,0x4c)+'on']=[],_0x12cde2[_0x1cf65d(-0x99,-0x69,0x29,-0x4e)+'t']='',_0x1cff64=_0x32e3d5[_0x2a4a44]||_0x12cde2,addLog(_0x25df1a(0x43,0xa8,-0x5,-0x1)+_0x25df1a(0x2d,0xb6,0x110,0x19e)+_0x2a4a44+'\x22');}else{if(_0x3fa974[_0x25df1a(0x25,0x6f,0xc2,0x143)](_0x37c912['IbrKY'])){_0x37c912[_0x1cf65d(-0xba,-0x147,-0x33,-0xb8)](addLog,_0x37c912[_0x25df1a(-0x5e,-0x1b,-0xe7,0x19)]);const _0x2a1e44=_0x37c912[_0x1cf65d(-0x15e,-0xa,-0xfb,-0x79)](_0x4713dc,'默认'),_0x2beb83={};_0x2beb83['conversati'+'on']=[],_0x2beb83[_0x25df1a(0x77,-0xf,-0x92,-0x14)+'t']='',_0x1cff64=_0x32e3d5[_0x2a1e44]||_0x2beb83,_0x37c912[_0x1cf65d(-0x19c,-0x64,-0xc6,-0xb8)](addLog,'[Banana]\x20使'+_0x1cf65d(-0x12d,0x2e,0x3e,-0x54)+_0x2a1e44+'\x22');}else{const _0x1a6f05={};_0x1a6f05['conversati'+'on']=[],_0x1a6f05[_0x1cf65d(0x82,-0x70,-0x90,-0x4e)+'t']='',_0x1cff64=_0x32e3d5[_0x2d28ea]||_0x1a6f05;}}const _0x17640e=[_0x1cff64[_0x1cf65d(0x7a,-0xbc,-0x4c,-0x4e)+'t'],_0x289cea[_0x37c912[_0x1cf65d(0x58,0x53,0x82,0x29)]],_0x289cea[_0x1cf65d(-0x20,-0x12c,-0xdd,-0x6c)],_0x36c152,_0x289cea[_0x37c912[_0x1cf65d(-0x19,0x9b,0xff,0x2d)]],_0x289cea[_0x25df1a(-0x115,-0xa3,-0x22,-0xa4)],_0x1cff64[_0x1cf65d(-0xd6,0x77,0x60,0x5)+_0x25df1a(0xc4,0xd,0xb9,0xd1)],_0x289cea[_0x37c912[_0x1cf65d(-0x125,-0xa8,-0x11e,-0x5b)]]][_0x1cf65d(-0x131,-0x114,-0x18d,-0xb2)](Boolean)[_0x25df1a(-0x40,0x16,0xc2,0xe5)](',\x20');_0x37c912['RPyPa'](addLog,_0x25df1a(0x14f,0x10d,0x9a,0xc1)+_0x17640e);const _0x355167={};_0x355167[_0x25df1a(0x139,0xb1,0xb6,0x17b)]='user',_0x355167[_0x1cf65d(-0x24,0x93,0x115,0xac)]=[];const _0x4ceab5={};_0x4ceab5[_0x25df1a(0x181,0xb1,0x1f,0x8a)]=_0x25df1a(-0xf8,-0x29,0x5c,-0xfd),_0x4ceab5[_0x1cf65d(0xa9,0x20,0x130,0xac)]=[];const _0x5121e4=_0x1cff64[_0x1cf65d(0x13f,0xc0,-0xd,0xd7)+'on'][_0x1cf65d(-0xb1,-0xcf,-0x81,-0x5f)](_0x5e74ad=>[_0x355167,_0x4ceab5])[_0x25df1a(-0x13,-0x95,-0x66,-0x72)]();let _0x393a07=-0xd99*-0x2+-0x211*0x1+-0x1921;for(const _0x101642 of _0x1cff64[_0x25df1a(0x95,0x116,0xc1,0x150)+'on']){if(_0x101642['user']?.[_0x1cf65d(-0xed,0x54,-0x5a,-0x6a)])_0x5121e4[_0x393a07]['content'][_0x1cf65d(-0x8,0x53,-0x6d,0x40)]({'type':_0x37c912[_0x1cf65d(0x2b,0x76,0x11f,0x57)],'text':_0x101642[_0x1cf65d(0xdb,0xc2,0x73,0x2f)][_0x1cf65d(-0xfd,-0x1b,-0x4a,-0x6a)]});const _0x266213=await getImageFromTurnData(_0x101642[_0x1cf65d(0x32,0xac,0x30,0x2f)]);if(_0x266213)_0x5121e4[_0x393a07][_0x25df1a(0x149,0xeb,0x134,0x13b)]['push']({'type':_0x37c912[_0x1cf65d(0x57,-0x21,-0x16,0x55)],'image_url':{'url':_0x266213}});_0x393a07++;if(_0x101642[_0x25df1a(0x1ad,0xe0,0xb3,0x45)]?.[_0x1cf65d(-0x2f,-0x30,-0x76,-0x6a)])_0x5121e4[_0x393a07]['content'][_0x25df1a(0x2b,0x7f,0x61,-0x5d)]({'type':_0x37c912[_0x25df1a(0x15f,0x96,0xe,0x15d)],'text':_0x101642[_0x1cf65d(0x1c,-0x47,-0x5,0xa1)]['text']});const _0x132165=await _0x37c912['YXCXC'](getImageFromTurnData,_0x101642['model']);if(_0x132165)_0x5121e4[_0x393a07][_0x1cf65d(0x148,0x94,0xf3,0xac)][_0x25df1a(0x148,0x7f,-0x64,0xf2)]({'type':_0x37c912['amTVL'],'image_url':{'url':_0x132165}});_0x393a07++;}if(!_0x3fa974['includes'](_0x37c912[_0x25df1a(0x197,0xd8,0x4e,0x47)])&&!_0x3fa974['includes'](_0x37c912['IbrKY'])){if(_0x25df1a(-0xaf,-0x26,0x8f,0x3d)===_0x37c912[_0x1cf65d(-0x10,-0xd1,-0x5d,-0x9e)])_0x346cd7[_0x25df1a(-0xd4,-0x8e,-0x12e,-0x131)+_0x4d4f30+'\x20Prompt']&&(_0x1342ce=_0x37c912[_0x1cf65d(0x73,-0x11,0x90,-0x34)](_0x4973bb+_0x37c912['uVpHb'],_0x37c912['zhoIK'](_0x4bc95e,_0x26badc[_0x1cf65d(-0x12e,-0x113,-0xe2,-0xcd)+_0xcb8ac4+_0x1cf65d(0x9f,0x7d,0x12,0x6b)])));else{const _0x58ea25=extension_settings[extensionName]['bananaChar'+'acterPrese'+'ts']||{};for(const _0x4bb8fe in _0x58ea25){const _0x564c04=_0x58ea25[_0x4bb8fe],_0x5ee5f7=(_0x564c04[_0x1cf65d(0x2d,-0x1b,-0x91,0x4c)]||'')[_0x1cf65d(0xef,0xa,0xaf,0x7c)]('|')[_0x1cf65d(-0xd7,-0xcf,-0x19b,-0xb2)](_0x48714e=>_0x48714e[_0x1cf65d(0xde,0x70,0x15e,0x7e)]()!=='');for(const _0xedfd9d of _0x5ee5f7){if(_0x17640e[_0x25df1a(0x131,0xc9,-0x15,0xf5)+'e']()['includes'](_0xedfd9d[_0x1cf65d(0xcf,-0x1f,-0x31,0x8a)+'e']())){_0x37c912[_0x1cf65d(-0x12b,-0x18a,-0x12a,-0xb8)](addLog,_0x25df1a(0x77,0x64,0x21,-0x3c)+'ound\x20match'+_0x1cf65d(-0x8e,-0x18c,-0x1d,-0xdc)+'r\x20\x22'+_0xedfd9d+(_0x25df1a(0x13f,0xdd,0x64,0x141)+_0x25df1a(-0xa7,-0x49,0x84,-0x119))+_0x4bb8fe+'\x22.');const _0x51fa48=_0x564c04[_0x25df1a(0x8d,0x116,0xc5,0x63)+'on'];if(_0x51fa48){const _0x53a5b3=[];if(_0x51fa48[_0x1cf65d(0x4e,-0x8b,0x5e,0x2f)]&&_0x51fa48['user'][_0x25df1a(0x28,-0x2b,-0xff,-0xac)])_0x53a5b3[_0x1cf65d(0x81,-0x6e,0xc3,0x40)]({'type':_0x37c912[_0x25df1a(0x10d,0x96,0xea,-0x2e)],'text':_0x51fa48[_0x25df1a(-0x6b,0x6e,0xec,0xdc)][_0x25df1a(-0x5d,-0x2b,-0xf,-0x76)]});const _0x1e66a8=await _0x37c912[_0x25df1a(-0x13,0xcb,0xe7,0x148)](getImageFromTurnData,_0x51fa48[_0x25df1a(-0x4f,0x6e,0x134,0x12d)]);if(_0x1e66a8)_0x53a5b3[_0x25df1a(0x36,0x7f,-0x3d,-0x64)]({'type':_0x37c912['amTVL'],'image_url':{'url':_0x1e66a8}});if(_0x37c912[_0x1cf65d(-0x11c,-0xf4,-0xfe,-0xe8)](_0x53a5b3[_0x25df1a(-0x23,-0x9a,-0x4d,0x27)],0x40*0x5+0x1aec+-0x1c2c*0x1)){const _0x2ae8cd={};_0x2ae8cd[_0x25df1a(0x5f,0xb1,0x182,0x186)]=_0x25df1a(0x110,0x6e,0x3f,0x7a),_0x2ae8cd[_0x25df1a(0xe1,0xeb,0x183,0x1bb)]=_0x53a5b3,_0x5121e4['push'](_0x2ae8cd);}const _0x2a7412=[];if(_0x51fa48[_0x1cf65d(-0x15,0xb0,0x13a,0xa1)]&&_0x51fa48[_0x25df1a(0xfa,0xe0,0x96,0x2)][_0x1cf65d(-0x71,0x61,0x1b,-0x6a)])_0x2a7412['push']({'type':_0x37c912['bMtCa'],'text':_0x51fa48[_0x25df1a(0x41,0xe0,0xf0,0x10f)]['text']});const _0x50dbd2=await _0x37c912[_0x1cf65d(-0x60,0x11,0x3,0x48)](getImageFromTurnData,_0x51fa48['model']);if(_0x50dbd2)_0x2a7412['push']({'type':_0x37c912[_0x25df1a(0x4f,0x94,-0x22,0x83)],'image_url':{'url':_0x50dbd2}});if(_0x37c912['bsfBT'](_0x2a7412[_0x25df1a(-0x80,-0x9a,-0xf7,0x36)],-0x6d4+0xf61*-0x1+0x1635)){const _0x568a77={};_0x568a77[_0x25df1a(0xcd,0xb1,0xb1,0x57)]=_0x37c912['mksLG'],_0x568a77[_0x1cf65d(0xc9,0x18b,-0x19,0xac)]=_0x2a7412,_0x5121e4[_0x25df1a(0x145,0x7f,-0x53,0x61)](_0x568a77);}}break;}}}}}if(!_0x3fa974['includes'](_0x37c912[_0x25df1a(0x9f,0xd8,0x101,0x137)])&&!_0x3fa974[_0x25df1a(0x122,0x6f,0xa4,-0x5a)](_0x37c912[_0x1cf65d(0xa0,0x19f,0x48,0xcb)])){const _0x5c2dd2={};_0x5c2dd2[_0x1cf65d(0xf5,-0x43,0x60,0x91)]=_0x37c912['bMtCa'],_0x5c2dd2[_0x25df1a(0x6e,-0x2b,0xa2,0x43)]=_0x17640e;const _0x509928={};_0x509928[_0x25df1a(0x13f,0xb1,0x18d,0x6f)]=_0x1cf65d(-0x63,0x3d,-0x69,0x2f),_0x509928[_0x25df1a(0x82,0xeb,0xdd,0x19)]=[_0x5c2dd2],_0x5121e4[_0x1cf65d(0x111,0x35,-0x60,0x40)](_0x509928);}else{if(_0x3fa974[_0x1cf65d(-0xb5,0xb7,-0x67,0x30)](_0x37c912[_0x25df1a(0x17b,0xd8,0x6d,0x19e)])){const _0x5c96b6=[],_0x36fa84=_0xc36059||_0x17640e,_0x54ee35=[_0x1cff64[_0x25df1a(-0x46,-0xf,-0xe8,-0x2e)+'t'],_0x36fa84,_0x1cff64['postfixPro'+_0x1cf65d(-0xd0,0x26,0xa2,-0x32)]][_0x1cf65d(-0xbe,-0x1e,-0xd0,-0xb2)](Boolean)['join'](',\x20'),_0x39e6f5={};_0x39e6f5[_0x25df1a(0xa8,0xd0,0x69,0x18f)]=_0x37c912[_0x1cf65d(0x89,0x11e,-0x16,0x57)],_0x39e6f5[_0x25df1a(0x35,-0x2b,-0x1b,0x3e)]=_0x54ee35,_0x5c96b6[_0x1cf65d(0xd8,0xcb,0x3c,0x40)](_0x39e6f5);if(_0x4093a4){const _0x4b027c={};_0x4b027c['url']=_0x4093a4;const _0x10c3db={};_0x10c3db[_0x1cf65d(0x112,-0x3d,0xcd,0x91)]=_0x37c912[_0x25df1a(0x120,0x94,0x13f,0x15)],_0x10c3db[_0x25df1a(-0xd6,-0x25,0x2b,-0x4e)]=_0x4b027c,_0x5c96b6[_0x25df1a(0xa,0x7f,0xb6,0x8e)](_0x10c3db),_0x37c912[_0x25df1a(0xf2,0x62,-0x14,0xc9)](addLog,_0x1cf65d(-0xc7,-0x97,-0x166,-0xc1)+'图模式：已添加待修改'+_0x25df1a(0x73,0x11d,0x110,0x76));}const _0x4073a2={};_0x4073a2[_0x1cf65d(0x76,0x74,0xa7,0x72)]=_0x25df1a(0xeb,0x6e,0xa2,-0x31),_0x4073a2[_0x25df1a(0xa1,0xeb,0x19a,0x31)]=_0x5c96b6,_0x5121e4[_0x1cf65d(0x52,0xf4,-0x9b,0x40)](_0x4073a2),_0x37c912[_0x25df1a(-0x10d,-0x4c,-0xff,-0xe3)](addLog,_0x25df1a(-0xe4,-0x82,-0x4a,-0x80)+_0x25df1a(0x33,0x98,0xb5,0x11b)+_0x54ee35);}else{if(_0x3fa974['includes'](_0x37c912[_0x1cf65d(0x53,0x89,0x1b1,0xcb)])){const _0xf4e3f=[],_0x194ea3=_0x37c912[_0x25df1a(-0x4a,0x24,-0x35,0xeb)](_0x313e9f,_0x17640e),_0x3ba27e=[_0x1cff64[_0x25df1a(-0x33,-0xf,0xd,0x5d)+'t'],_0x194ea3,_0x1cff64[_0x25df1a(0x14,0x44,0xfb,0x76)+_0x25df1a(0x98,0xd,0xb6,-0x27)]][_0x25df1a(-0xf3,-0x73,-0xfe,-0xa5)](Boolean)[_0x25df1a(0xea,0x16,-0xb1,-0xe)](',\x20'),_0x1d2a4e={};_0x1d2a4e[_0x25df1a(0xf9,0xd0,0x132,0xfb)]=_0x37c912[_0x25df1a(0xd8,0x96,0x76,0x5d)],_0x1d2a4e[_0x1cf65d(-0x77,-0x89,-0x10f,-0x6a)]=_0x3ba27e,_0xf4e3f[_0x1cf65d(0xa6,-0xa1,0x99,0x40)](_0x1d2a4e);if(_0x13b23a){if(_0x37c912[_0x25df1a(0x3e,0x1a,-0x6c,-0xc3)]('OympA',_0x25df1a(0x14f,0x9d,-0xb,-0x3f))){const _0x276445={};_0x276445[_0x1cf65d(0x16b,0x79,0x11b,0x96)]=_0x13b23a;const _0x3c632d={};_0x3c632d[_0x25df1a(0xa,0xd0,0x43,0x9e)]=_0x25df1a(0x1,-0x25,0x9b,-0xa0),_0x3c632d[_0x25df1a(0x78,-0x25,-0x106,-0x13)]=_0x276445,_0xf4e3f[_0x1cf65d(-0x38,0x10d,-0x8c,0x40)](_0x3c632d),_0x37c912['zhoIK'](addLog,'[Banana]\x20视'+_0x25df1a(0xc8,0xda,0x17a,0xb7)+'片');}else throw new _0x15a254(_0x37c912[_0x1cf65d(-0x2c,0x17b,0xd9,0xb6)]);}const _0x53244a={};_0x53244a[_0x1cf65d(0x136,0xd4,-0x6f,0x72)]=_0x37c912[_0x25df1a(0xe9,0x65,0xcf,0x39)],_0x53244a[_0x1cf65d(-0x19,0x17a,-0x2b,0xac)]=_0xf4e3f,_0x5121e4[_0x1cf65d(0xf5,0x3f,-0x56,0x40)](_0x53244a),_0x37c912[_0x1cf65d(-0x1b,-0x94,-0x1f,-0x8a)](addLog,_0x25df1a(0xda,0x109,0x42,0x182)+_0x1cf65d(0x67,-0x5,0x6e,-0x2f)+_0x3ba27e);}}}const _0x708035={};_0x708035[_0x1cf65d(0x6e,-0xc9,-0xcd,-0x1a)+'o']=_0x5d0fba;const _0x5430e5={};_0x5430e5[_0x1cf65d(-0x89,-0x86,-0x55,-0xef)+'g']=_0x708035,_0x5382fc={'model':_0x3fa974[_0x1cf65d(0x21,0xb6,-0xa9,0x30)](_0x37c912[_0x25df1a(0x1a7,0x10a,0x1a8,0x87)])?_0x37c912[_0x1cf65d(0x4c,0xfb,0x0,0x33)](_0x4e5673,_0x3a3d77):_0x3a3d77,'messages':_0x5121e4['filter'](_0x20be33=>_0x20be33[_0x1cf65d(0x8f,0x35,0x24,0xac)]['length']>0x2181+0x2*0x123a+-0x45f5),'config':_0x5430e5},_0x37c912['JUPHz'](addLog,'[Banana]\x20B'+_0x1cf65d(0x10c,0x1c,0xfb,0x85)+_0x25df1a(0xa9,0x118,0xe9,0xe6)+_0x25df1a(-0x60,-0x90,-0x88,-0x11f)+_0x5382fc[_0x25df1a(-0x45,-0x50,-0x10d,0x22)]['length']+_0x1cf65d(0xab,-0xbc,-0x4,-0x36));}let _0x57a7d6=_0x4a9592[_0x1cf65d(-0x1d,-0xcc,-0x82,-0x6)](/\/$/,''),_0x5f26b1;if(_0x57a7d6['endsWith'](_0x37c912[_0x25df1a(-0x76,0xa,0x70,0xa8)])||_0x57a7d6[_0x25df1a(0x63,0x6f,0x74,0xfd)](_0x25df1a(0x5b,0x106,0x5e,0x1e)))_0x5f26b1=_0x37c912[_0x1cf65d(-0x16d,-0xff,-0x139,-0xac)](_0x57a7d6,_0x455779);else{if(_0x37c912[_0x25df1a(-0xa8,-0x9b,-0x11f,0x4a)](_0x25df1a(0xce,-0xe,-0xa5,-0x87),_0x37c912[_0x1cf65d(-0xa6,-0xab,-0xb9,-0xba)]))_0x5f26b1=_0x37c912[_0x1cf65d(0x20,0x18,-0x16,-0xc7)](_0x37c912[_0x1cf65d(0x167,0x40,0xef,0x88)](_0x57a7d6,_0x37c912[_0x25df1a(-0x37,0xa,-0xb5,0x4c)]),_0x455779);else{if(_0x2551cd){const _0x5c557c=_0x2e7da1[_0x25df1a(0x111,0xc3,0x54,0xab)](_0x5a0ec6,arguments);return _0x1b0c5a=null,_0x5c557c;}}}_0x5f26b1=_0x5f26b1['replace'](/\/v1\/v1\//g,_0x37c912[_0x25df1a(0xbc,0x82,0xe9,0xf9)]);function _0x1cf65d(_0x5dc96d,_0x213fb2,_0xdabe5,_0x2325a9){return _0x4712(_0x2325a9- -0x275,_0x213fb2);}const _0x19cc18=extension_settings[extensionName][_0x1cf65d(0x6f,0x1f,-0x65,0x3)];let _0x904c42,_0x2c502f,_0x1f0d90;if(_0x19cc18===_0x37c912[_0x25df1a(0x12b,0x90,0x3a,0x2f)]){let _0x390196=_0x57a7d6;!_0x390196[_0x1cf65d(-0x128,-0x64,0x3d,-0x60)](_0x1cf65d(0x104,-0x8d,0xbd,0x31))&&!_0x390196[_0x1cf65d(0x34,0xc3,-0x57,0x30)](_0x1cf65d(0x9d,0x5,0x171,0xc7))&&(_0x390196=_0x37c912[_0x1cf65d(-0x12c,-0x141,-0x72,-0x77)](_0x390196,_0x37c912[_0x1cf65d(-0xd8,-0x69,0x6c,-0x35)]));_0x390196=_0x390196[_0x1cf65d(0x4a,-0x29,0x17,-0x6)](/\/v1\/$/,_0x25df1a(0xbb,0x70,0x1a,-0x7)),_0x904c42=_0x25df1a(0x9f,-0x24,-0x108,-0xeb)+_0x1cf65d(0x4d,-0x3f,-0xad,0x11)+_0x25df1a(0xf4,0xee,0x75,0x149)+_0x1cf65d(0x66,0xd8,-0x33,0xa8),_0x2c502f=_0x37c912[_0x1cf65d(0xd9,0x8f,-0xc,0x5f)](getRequestHeaders,window[_0x25df1a(-0x13d,-0x76,-0xc8,-0xc1)]);const _0x5d8556=_0x3fa974[_0x25df1a(0xc2,0x6f,-0x6,-0x79)](_0x25df1a(0x144,0xca,0xd0,0x39))?_0x37c912[_0x1cf65d(-0xe,0xdd,0x65,0x89)](_0x4e5673,_0x3a3d77):_0x3a3d77,_0x3bef13={};_0x3bef13[_0x1cf65d(-0x9,-0x32,0xdb,0x36)+_0x25df1a(0x14,-0x80,0x59,-0x52)+'ce']=_0x37c912[_0x1cf65d(-0xa9,0x59,-0x5,-0x7)],_0x3bef13['custom_url']=_0x390196,_0x3bef13['custom_inc'+_0x25df1a(0xb9,0x5b,0xc5,-0x6b)+'rs']=_0x25df1a(-0x150,-0x74,-0x10f,-0x4b)+_0x1cf65d(0x1a2,0x17c,0x169,0xc6)+_0x25df1a(0xf5,0x4d,0x85,-0x4f)+_0x4bded3+'\x22',_0x3bef13[_0x1cf65d(0x14c,0x3d,0x103,0xa1)]=_0x5d8556,_0x3bef13[_0x25df1a(-0x12f,-0x50,-0x70,-0x89)]=_0x5382fc[_0x1cf65d(-0xd4,-0x1,-0x81,-0x8f)],_0x3bef13[_0x1cf65d(-0xc7,0x19,0x1f,-0x97)]=![],_0x1f0d90=_0x3bef13;if(_0x5d8556[_0x1cf65d(0x68,-0x1b,-0xba,0x14)](_0x1cf65d(0xd9,0x3,0x50,0x78))){if(_0x37c912[_0x25df1a(0xba,0xc1,-0x24,0xfa)](_0x37c912['IntWc'],_0x37c912['YewYR']))_0x18a1ed[_0x1cf65d(0x189,0xe8,0x141,0xb7)+'sk'](_0x3cb875,![]);else{addLog(_0x1cf65d(-0x106,-0x13e,-0xd4,-0xd0)+'magen\x20模型不支'+_0x1cf65d(0x7,0x8c,-0x33,0x16)+_0x25df1a(0x97,-0x46,0x33,0x87)),_0x904c42=_0x5f26b1;const _0x4261b3={};_0x4261b3[_0x1cf65d(0x96,0x7f,0x21,0x70)+'pe']=_0x37c912[_0x1cf65d(-0x2b,-0x53,0x29,0x19)],_0x4261b3[_0x1cf65d(-0xca,-0x9a,-0x70,-0xb3)+'ion']='Bearer\x20'+_0x4bded3,_0x2c502f=_0x4261b3,_0x1f0d90=_0x5382fc;}}_0x37c912[_0x1cf65d(0x169,0x57,0x9e,0xd6)](addLog,_0x1cf65d(-0x1f,0x149,-0x16,0x69)+_0x25df1a(-0xf4,-0xb1,0x18,-0xd4));}else _0x904c42=_0x5f26b1,_0x2c502f=_0x37c912['wKnam'](getDirectHeaders,_0x37c912['DYMLb'],_0x25df1a(-0x103,-0x1d,0xab,-0x91)+_0x4bded3),_0x1f0d90=_0x5382fc,addLog(_0x25df1a(0x110,0xa8,0xc3,0x110)+'用直接请求模式');_0x37c912['YXCXC'](addLog,_0x25df1a(0x13e,0x56,0x108,-0x5d)+'ending\x20req'+_0x25df1a(0xba,0xc,-0x1f,-0xbe)+_0x904c42),_0x37c912[_0x1cf65d(-0x8d,0xdb,0xa7,0x23)](addLog,_0x25df1a(0x78,0x6a,0x68,0xaa)+_0x1cf65d(0x0,0xba,-0x44,0x3d)+JSON[_0x1cf65d(0xba,0xd4,0xc9,0x87)](_0x1f0d90,null,-0x42f+0xc7*0x14+-0xb5b));try{taskQueue['updateStat'+'us'](_0x262136,_0x37c912['hDtsc']);const _0x20bffb=await fetch(_0x904c42,{'method':_0x37c912[_0x25df1a(-0x121,-0xa0,-0x140,-0x91)],'headers':_0x2c502f,'body':JSON[_0x1cf65d(-0x44,0x47,-0x19,0x87)](_0x1f0d90)});if(!_0x20bffb['ok']){const _0xc0ec28=await _0x20bffb['text']();throw new Error(_0x1cf65d(0xab,-0x96,0x55,0x46)+_0x25df1a(0x41,0x81,0xbf,-0x45)+_0x25df1a(0x88,0x60,0x105,0xd0)+'\x20'+_0x20bffb[_0x1cf65d(-0x55,0x56,-0x62,0x3c)]+':\x20'+_0xc0ec28);}const _0x1373b0=await _0x20bffb[_0x25df1a(0x85,0x100,0xa9,0x168)]();if(_0x3fa974&&_0x3fa974['includes'](_0x1cf65d(-0x20,0x7,0x47,0x8b))){if(_0x37c912[_0x1cf65d(0x61,0x5a,-0x95,-0x20)](_0x37c912['ghMRP'],_0x37c912[_0x25df1a(-0x116,-0x9e,-0x12e,-0xd2)]))_0x4c061e[_0x37c912[_0x1cf65d(0xe5,0x10,-0x7,0x6d)]]=_0xb9a6aa;else{const _0x116fc2=_0x1373b0['choices']?.[0x81d*-0x4+0x138+-0x2*-0xf9e]?.[_0x1cf65d(0x4d,-0x9b,0x82,-0x12)]?.[_0x25df1a(0x168,0xeb,0x109,0x8d)];if(_0x37c912[_0x25df1a(0x172,0x11a,0x96,0x15b)](typeof _0x116fc2,_0x37c912[_0x25df1a(-0x12,-0x6b,-0xb8,-0xac)])){const _0x316de6=_0x116fc2['match'](/src="([^"]+\.mp4[^"]*)"/);if(_0x316de6&&_0x316de6[0x1622*0x1+0xcce+-0x22ef]){const _0x593b7f=_0x316de6[0x52*-0xf+0x26dd+-0x220e];addLog(_0x1cf65d(0xa2,0x48,0x127,0xc4)+_0x1cf65d(0x102,0xc9,0x18b,0xa3)+'xtracted:\x20'+_0x593b7f);try{const _0x1556a0=await _0x37c912['QTgwx'](fetch,_0x593b7f,{'headers':_0x37c912[_0x25df1a(-0xfd,-0x6c,0x5,-0x9f)](getDirectHeaders)});if(!_0x1556a0['ok'])throw new Error(_0x25df1a(-0x17,-0x70,0x44,-0x62)+_0x25df1a(-0x18,-0x63,-0xc2,0x28)+'o:\x20'+_0x1556a0[_0x1cf65d(-0x99,0x28,0x71,0x3c)]);const _0x3b9ffd=await _0x1556a0[_0x1cf65d(-0xe3,0x4d,-0x49,-0x14)](),_0x18762f=await new Promise((_0x290cbb,_0x4b44d9)=>{const _0x34b506=new FileReader();function _0x13b08c(_0x3479f4,_0xf88eab,_0x5e3ec6,_0x4b1b89){return _0x1cf65d(_0x3479f4-0x1e9,_0xf88eab,_0x5e3ec6-0x4b,_0x4b1b89-0x41b);}function _0x290ec6(_0x19345a,_0x54593d,_0x5dcd2f,_0x4f747c){return _0x25df1a(_0x19345a-0x13,_0x19345a-0x4e7,_0x54593d,_0x4f747c-0xcc);}_0x34b506[_0x13b08c(0x35e,0x438,0x3d4,0x3ff)]=()=>_0x290cbb(_0x34b506[_0x290ec6(0x580,0x545,0x58e,0x63c)]),_0x34b506[_0x290ec6(0x57c,0x4e1,0x62e,0x57b)]=_0x4b44d9,_0x34b506['readAsData'+_0x290ec6(0x51e,0x565,0x518,0x51c)](_0x3b9ffd);});return addLog(_0x25df1a(0xb1,0x103,0x28,0x14b)+_0x25df1a(0x4f,0xf4,0x1d3,0x1a4)+_0x25df1a(0x5b,0x2,0xbe,0x23)+'converted\x20'+'to\x20data\x20UR'+_0x1cf65d(0x7a,0xd5,-0x49,0x76)+(_0x37c912['UBAgu'](_0x3b9ffd[_0x1cf65d(0x4e,0xa5,0x82,0x93)],0xc33+-0x124*-0x1+-0x957)/(-0x1131+0x1a2d*-0x1+0x2f5e))[_0x1cf65d(-0x1a0,-0x8,-0x100,-0xc6)](0x16e+0x60c+-0x778)+_0x25df1a(0x36,-0x9f,-0x8a,-0x16d)),taskQueue[_0x1cf65d(0x1e,0x11e,0x66,0xb7)+'sk'](_0x262136,!![]),currentTaskId=null,{'image':_0x18762f,'change':_0x37c912[_0x1cf65d(0x123,0xfc,0xac,0x83)](_0x2f1727,''),'isVideo':!![],'format':_0x37c912[_0x1cf65d(-0x74,0x5f,0xac,0x5c)]};}catch(_0x47e5b5){_0x37c912[_0x25df1a(0x156,0x10f,0x19e,0x188)](addLog,'[Banana]\x20F'+_0x1cf65d(-0xa6,-0x138,-0x13,-0x7c)+_0x1cf65d(-0xf0,-0x83,-0x1aa,-0xcb)+'deo:\x20'+_0x47e5b5['message']);throw new Error(_0x25df1a(0x96,-0x3,0x51,-0x3d)+_0x47e5b5[_0x1cf65d(0xab,0x90,-0x73,-0x12)]);}}}throw new Error(_0x1cf65d(-0x10c,-0x97,-0x142,-0xad)+_0x1cf65d(-0xaf,0xa6,0x18,-0xc)+_0x1cf65d(0xd1,-0x75,0x119,0x53)+_0x25df1a(-0x8d,-0x65,-0xcf,0x33)+_0x1cf65d(-0x82,-0xb3,0x68,0x34));}}let _0x2182ca='';const _0x2c610f=_0x1373b0[_0x1cf65d(0x92,0x1,-0x63,0x47)];if(_0x2c610f&&_0x2c610f[_0x1cf65d(-0xa5,-0x141,-0x91,-0xd9)]>0x6e2+0xb71*-0x3+0x1b71){const _0x921844=_0x2c610f[-0x2a0+0x1*0x32c+-0x8c][_0x1cf65d(-0xd2,-0x26,0x6f,-0x12)]?.[_0x1cf65d(0x15c,-0x13,0x157,0xac)];if(Array['isArray'](_0x921844)){if(_0x37c912['JUNOD'](_0x37c912['aOemz'],_0x37c912[_0x1cf65d(0x63,0x39,0x5a,0xc0)])){const _0x47df77=new _0x23fe3a();_0x47df77[_0x25df1a(0x83,0x23,-0xa2,-0xb9)]=()=>_0x2ff584(_0x47df77['result']),_0x47df77[_0x25df1a(0x95,0x95,0xc0,0x19)]=_0x4e75a4,_0x47df77[_0x25df1a(-0x50,-0x60,-0xaa,0x13)+'URL'](_0x300b03);}else for(const _0x48bd96 of _0x921844){if(_0x37c912['Kxfpw']('fMpOg',_0x37c912[_0x1cf65d(0x18c,0xc7,0x67,0xd1)]))_0x9a3953=_0x37c912[_0x25df1a(-0xb7,0x1b,0xd1,0xe)](_0x37c912[_0x25df1a(0x8,0xe,0xed,-0xd3)](_0x64581c,_0x37c912[_0x25df1a(0x9a,0x119,0x92,0x1f2)]),_0x37c912['Xukos'](_0x4bc125,_0x565d12[_0x25df1a(-0x5f,-0x8e,-0x9f,-0xf5)+_0x3baa6a+_0x1cf65d(0x7,0x110,0x10,0x6b)]));else{if(_0x37c912[_0x25df1a(0x1a,-0x56,-0x5c,-0x40)](_0x48bd96['type'],_0x37c912[_0x1cf65d(-0x2e,0x135,0x77,0x55)])&&_0x48bd96[_0x1cf65d(-0x1a,-0xfe,0x62,-0x64)]){if(_0x37c912[_0x25df1a(0x11d,0xd6,0x54,0x158)](_0x25df1a(0x1b5,0xe6,0x9e,0xbe),_0x37c912[_0x1cf65d(0x91,0x2f,-0x74,-0x3c)])){_0x2182ca=_0x37c912['bztiO'](typeof _0x48bd96[_0x25df1a(-0x93,-0x25,0x97,-0x2c)],_0x1cf65d(0x9e,0x1c,0x13e,0xad))?_0x48bd96[_0x25df1a(-0x36,-0x25,-0x26,-0x9e)]:_0x48bd96[_0x1cf65d(0x83,0x75,-0x120,-0x64)]['url'];break;}else _0x33286d=_0x37c912[_0x25df1a(-0xbb,0xe,0xd0,-0x1a)](_0x37c912['RiBFA'](_0x1f63cc,_0x1cf65d(0x16,0xd3,0x78,0x31)),_0x2644aa);}}}}else{if(typeof _0x921844===_0x37c912[_0x1cf65d(-0x8d,-0x7f,-0x26,-0xaa)]){const _0x5c7954=/!\[.*?\]\(((?:https?:\/\/|data:image\/[^;]+;base64,)[^\s\)]+)\)/,_0x1f43f8=_0x921844[_0x1cf65d(-0x112,-0x130,-0x14c,-0xc3)](_0x5c7954);if(_0x1f43f8&&_0x1f43f8[0x143b+0x1*-0x1321+-0x119]){const _0x868680=_0x1f43f8[0x21*-0x45+-0x3b*0x9b+0x1*0x2c9f];if(_0x868680[_0x25df1a(-0x24,0x53,-0x4b,-0x1)](_0x37c912[_0x1cf65d(-0x24,-0xc9,0xbb,-0x3)]))_0x37c912['FUxhg'](addLog,_0x1cf65d(-0x106,-0x2d,-0x125,-0xae)+'etected\x20Ma'+'rkdown\x20emb'+_0x1cf65d(0x2a,-0x11,0x108,0xcf)+_0x25df1a(0x5,-0x8b,-0xb,-0x43)),_0x2182ca=_0x868680,_0x37c912[_0x1cf65d(-0xcf,-0xc3,-0x154,-0x90)](addLog,_0x1cf65d(0xed,-0x13,-0x1d,0x17)+_0x25df1a(0x2e,0x9f,0x16f,-0x35)+_0x1cf65d(0x3b,0x153,0x7,0x7f)+_0x1cf65d(-0x119,-0x12a,-0x1ab,-0xe1)+_0x1cf65d(-0xe6,-0xb7,-0xcc,-0x28)+_0x25df1a(-0x26,0x1d,0xc5,-0xe));else{if(_0x37c912[_0x1cf65d(-0x69,-0x9e,-0xc8,-0x43)](_0x37c912['GyIrN'],_0x25df1a(-0x4,-0x94,-0x92,-0x86))){_0x37c912[_0x25df1a(0xeb,0x87,0x15d,0x106)](_0x5ea79a,_0x25df1a(-0x9b,0xf,0x6,0x25)+'启动');if(_0x54846a)_0x37c912['zhoIK'](_0x3a73e9,_0x1cf65d(-0xaa,-0x56,-0x4d,-0xe)+_0x5d3311);if(_0x1fd318)_0x37c912['zhoIK'](_0x5dd54a,_0x25df1a(-0xe2,-0x4a,0x1d,0x7c)+']');}else{addLog(_0x37c912[_0x25df1a(0xac,0xcd,0x0,0x2e)]),addLog(_0x1cf65d(0x50,-0xf7,-0x23,-0x40)+_0x25df1a(0x70,-0x36,0x7c,-0xae)+_0x25df1a(-0x64,0x2f,-0x29,0xd1)+_0x868680);try{if(_0x37c912[_0x25df1a(0x74,0x1a,0xe6,0x56)](_0x37c912[_0x25df1a(-0xe,0x4e,-0x6c,0x10c)],_0x37c912[_0x1cf65d(0xca,-0x7f,-0xc,0xf)])){const _0x1ea8dc=await _0x37c912[_0x25df1a(0x159,0xb9,0x28,0x62)](fetch,_0x868680,{'headers':_0x37c912[_0x1cf65d(-0x63,0x55,0x33,0x3e)](getDirectHeaders)});if(!_0x1ea8dc['ok'])throw new Error(_0x25df1a(0x2f,-0x70,-0x110,-0x63)+_0x1cf65d(-0xd3,-0xe2,0x75,-0x39)+_0x1cf65d(-0xba,-0xfd,0x63,-0x2a)+_0x1ea8dc[_0x25df1a(0x13,0x7b,0xa3,0x10f)]);const _0x5cee52=await _0x1ea8dc[_0x1cf65d(-0xb3,0xf,-0x42,-0x14)](),_0x43c50f=await new Promise((_0x39d346,_0x5a01ff)=>{function _0x10dacb(_0x44bd73,_0x1a713c,_0x4ae763,_0x22b00a){return _0x25df1a(_0x44bd73-0x85,_0x4ae763-0x3a1,_0x1a713c,_0x22b00a-0x165);}const _0x58d7e2=new FileReader();_0x58d7e2[_0x1e810f(0x60f,0x5ec,0x56e,0x620)]=()=>_0x39d346(_0x58d7e2[_0x1e810f(0x685,0x662,0x5d0,0x695)]);function _0x1e810f(_0x250704,_0x53d376,_0x17805b,_0x25c09f){return _0x1cf65d(_0x250704-0x90,_0x53d376,_0x17805b-0x9,_0x250704-0x62b);}_0x58d7e2[_0x10dacb(0x4d0,0x389,0x436,0x41a)]=_0x5a01ff,_0x58d7e2[_0x1e810f(0x58c,0x626,0x64b,0x544)+_0x10dacb(0x450,0x310,0x3d8,0x478)](_0x5cee52);});_0x2182ca=_0x43c50f;if(_0x37c912[_0x1cf65d(-0xa0,-0x4c,-0x95,-0x20)](_0x37c912[_0x1cf65d(-0x86,-0x92,0x78,0x35)](String,extension_settings[extensionName]['convertToJ'+'pegStorage']),_0x37c912[_0x1cf65d(-0x131,-0x104,-0x1a2,-0xec)])){if(_0x37c912['GVTWM'](_0x37c912[_0x1cf65d(0x111,-0x16,0xe5,0x2c)],_0x37c912[_0x1cf65d(-0x76,0x7d,0x10b,0x2c)])){_0x459d4f('Banana视频模式'+'启动');if(_0x292d34)_0x37c912[_0x1cf65d(-0x96,0x1f,-0x1d,-0x6b)](_0x47842a,_0x1cf65d(0x1b,-0x10b,0x14,-0x5e)+_0x12f0d8);if(_0x3272ee)_0x37c912[_0x25df1a(-0x3e,-0x2c,0x8c,0x48)](_0x184879,_0x25df1a(-0x10,0xce,0x1b1,0xe1)+']');}else _0x2182ca=await _0x37c912[_0x25df1a(0xd3,0x8a,0x34,0x109)](convertImageToJpeg,_0x2182ca);}_0x37c912['aRaTv'](addLog,_0x37c912[_0x25df1a(0x6a,0x34,0x5a,0x30)]);}else!_0x4ab0e3[_0x25df1a(-0x155,-0x93,0x4a,0x42)+_0x25df1a(0xa8,-0x11,-0xf6,-0x44)+_0x1cf65d(0x2e,-0x83,0x106,0x1e)]&&(_0x2c4042['initialize'+'BananaList'+'ener']=!![],_0x37c912[_0x25df1a(-0xba,-0xac,-0x119,-0xd5)](_0x231a85)),_0x37c912[_0x25df1a(-0xf3,-0xac,-0x15e,-0x194)](_0x43a7f2);}catch(_0x335c1d){_0x37c912[_0x1cf65d(0x71,0xcb,0x155,0xc2)]!==_0x37c912['VwmAk']?(addLog(_0x1cf65d(0x3b,0x83,-0x67,0x25)+'ailed\x20to\x20f'+_0x1cf65d(0xcd,0xd5,0xcc,0xd4)+'own\x20image:'+'\x20'+_0x335c1d[_0x25df1a(0x4e,0x2d,0x36,-0x93)]),_0x2182ca=_0x868680,_0x37c912['xKKfq'](addLog,_0x25df1a(0x20,-0x6a,0x29,-0x142)+_0x1cf65d(0xea,0xb8,0xbd,0xa0)+'t\x20URL\x20as\x20f'+'allback.')):_0x37c912['Xukos'](_0x7b9cde,_0x37c912['sGaHJ']);}}}}else _0x37c912[_0x1cf65d(0x66,0x52,0x51,-0x83)](addLog,_0x37c912[_0x1cf65d(-0x195,-0x164,-0x7e,-0xb6)]);}}}if(!_0x2182ca){if(_0x37c912[_0x1cf65d(0xb,-0x9b,-0xbe,-0x43)](_0x37c912[_0x1cf65d(0x37,-0x81,-0x1f,-0x56)],_0x37c912['VraLt']))_0x9ac7f=_0x3637a2['replaceAll'](_0x37c912[_0x1cf65d(0x136,0x35,-0x45,0x99)],'')[_0x25df1a(0x54,-0x86,-0x103,0x48)](_0x37c912[_0x1cf65d(0x19f,0x18f,-0x19,0xcb)],'');else throw new Error(_0x1cf65d(0x1a,0xc,-0xd,0x1b)+_0x1cf65d(-0x24,0xef,0x90,0xb8)+'\x20contain\x20i'+_0x25df1a(0x109,0xf1,0x1a3,0x79)+_0x1cf65d(-0x110,0x36,-0x129,-0x9c)+'t');}return _0x37c912[_0x1cf65d(-0xc2,-0x1,0x1c,-0x38)](addLog,_0x37c912[_0x1cf65d(0xc9,0x113,0x135,0x50)]),taskQueue[_0x1cf65d(0x16a,0xe9,0xd1,0xb7)+'sk'](_0x262136,!![]),currentTaskId=null,{'image':_0x2182ca,'change':_0x37c912[_0x25df1a(-0x97,-0x89,-0x44,0x1b)](_0x2f1727,'')};}catch(_0x14e8ab){const _0x18010a=_0x37c912['pxsBg'][_0x1cf65d(0x7d,0x41,0xaf,0x7c)]('|');let _0x4bafd0=0xa48+0xdc5*-0x1+0x37d;while(!![]){switch(_0x18010a[_0x4bafd0++]){case'0':if(_0x14e8ab['message']===_0x37c912[_0x25df1a(-0x4,-0x71,-0x105,-0xa2)]){}else taskQueue[_0x1cf65d(0x9d,0x117,0x10c,0xb7)+'sk'](_0x262136,![]);continue;case'1':_0x37c912[_0x1cf65d(-0x127,-0xe0,-0x83,-0x4c)](addLog,_0x1cf65d(-0x3d,-0x88,0xd6,0x25)+'etch\x20error'+':\x20'+_0x14e8ab[_0x25df1a(0x10e,0x2d,-0xa4,0xbc)]);continue;case'2':currentTaskId=null;continue;case'3':console[_0x25df1a(0x1b1,0xe3,0x19b,0x1cb)](_0x37c912[_0x1cf65d(-0x98,-0x1,0x99,-0x5)],_0x14e8ab);continue;case'4':throw _0x14e8ab;continue;}break;}}}export async function bananaGenerate(_0x4694a4){const _0x47cdb8={'ypszi':'/v1','pEKSt':_0x5296f6(0x17c,0x12e,0xc5,0x77),'UUPuV':function(_0x4c2433,_0x4533ca){return _0x4c2433(_0x4533ca);},'tUkJj':function(_0x69fa3f,_0xb60398){return _0x69fa3f||_0xb60398;},'aByDj':_0x5296f6(-0x60,0xe4,0x71,0x12d),'aNRek':_0x51affd(0x255,0x298,0x1c9,0x197),'NVwNT':function(_0x33802a,_0x132fa2){return _0x33802a(_0x132fa2);},'mchfe':_0x51affd(0x134,0x14a,0x125,0x1e0)+_0x51affd(0x12f,0x1b2,0x106,0x27),'IuMFu':function(_0x21fa4b){return _0x21fa4b();},'LDIhL':function(_0x147c73,_0x38d59c){return _0x147c73(_0x38d59c);},'mBuWl':_0x5296f6(0x1b5,0x13e,0xda,0x33),'yRuzn':'{视频}','lsgJw':function(_0x1da976,_0xa6b272){return _0x1da976(_0xa6b272);},'ZOPAc':function(_0x2136bc,_0x40040d){return _0x2136bc!==_0x40040d;},'fWWkU':_0x51affd(0x247,0x274,0x1e6,0x24f),'ZuzvU':function(_0x1f905d,_0x3543f2){return _0x1f905d(_0x3543f2);},'Azhsz':function(_0x1a2475,_0x36f801){return _0x1a2475!=_0x36f801;},'aLzHf':_0x51affd(0x189,0x7b,0xd0,0x169),'GgvMM':_0x5296f6(-0xb8,-0xb3,-0x2d,-0x24),'abhwc':function(_0x4e64e2,_0x42deec){return _0x4e64e2||_0x42deec;},'UMhkd':function(_0x2abcdc,_0x8d193f){return _0x2abcdc||_0x8d193f;},'ikvKD':function(_0x140cd,_0x1737ca){return _0x140cd||_0x1737ca;},'VoBBp':_0x5296f6(0x13a,0x13c,0x5f,-0x40)+'mage-respo'+'nse','Fewxj':function(_0x578151,_0x2ecead){return _0x578151||_0x2ecead;},'hYYYq':_0x51affd(0x103,0x237,0x175,0x95),'BGbkY':function(_0xa2f97e,_0x232e70){return _0xa2f97e(_0x232e70);}};_0x47cdb8['IuMFu'](clearLog);let {id:_0xa2d283,prompt:_0x22fbd0,width:_0x1740a8,height:_0x3f6d2c,change:_0x494343,retouchPrompt:_0x5bc871,retouchImage:_0x242b14,videoPrompt:_0x44ff01,videoImage:_0x5af2ee}=_0x4694a4;currentRequestId=_0xa2d283;function _0x5296f6(_0x4007dd,_0x46ff43,_0x3ecca6,_0x2aef5d){return _0x4712(_0x3ecca6- -0x277,_0x2aef5d);}currentPrompt=_0x22fbd0,_0x47cdb8[_0x51affd(0x1a8,0x21d,0x20a,0x172)](addLog,'[Banana]\x20R'+'eceived\x20im'+_0x5296f6(-0xb1,-0x9b,-0x74,-0xd4)+_0x5296f6(0x62,-0x51,-0xf,-0x9a)+'st\x20(ID:\x20'+_0xa2d283+')');let _0x215651='';_0x494343?_0x215651=_0x494343[_0x51affd(0xfa,0xc3,0x8c,0x144)](_0x47cdb8[_0x5296f6(-0x8e,-0x32,0x4,0xe0)],'')[_0x51affd(0x12c,-0x46,0x8c,-0x48)](_0x47cdb8['yRuzn'],''):_0x215651=_0x22fbd0;if(_0x494343&&_0x494343[_0x5296f6(0x76,-0x2b,0x2e,-0x40)](_0x5296f6(0x29,0xbe,0xda,0x15e))){_0x47cdb8[_0x51affd(0x172,0x179,0x20a,0x1b7)](addLog,'Banana修图模式'+'启动');if(_0x5bc871)addLog(_0x5296f6(-0xda,-0x8a,-0x10,-0xa4)+_0x5bc871);if(_0x242b14)_0x47cdb8[_0x5296f6(-0xaf,0x2a,-0xbb,-0x19)](addLog,_0x5296f6(-0x14e,-0x10b,-0x8b,0x13)+']');}if(_0x494343&&_0x494343[_0x5296f6(-0x79,0xfd,0x2e,0x9)](_0x47cdb8['yRuzn'])){_0x47cdb8[_0x51affd(0x16d,0x15f,0x204,0x230)](addLog,_0x5296f6(-0x4f,-0xc1,0x9,-0x3a)+'启动');if(_0x44ff01)_0x47cdb8[_0x5296f6(-0xfd,-0x17e,-0xa8,-0xe2)](addLog,_0x51affd(0x1c6,0xd2,0xf3,0xef)+_0x44ff01);if(_0x5af2ee)_0x47cdb8[_0x5296f6(-0x9b,-0x18c,-0xa8,-0x170)](addLog,_0x5296f6(0x158,0xe2,0x8d,0x1f)+']');}function _0x51affd(_0x2b5312,_0x4c6d23,_0x9e0ced,_0xc91de7){return _0x4712(_0x9e0ced- -0x124,_0x4c6d23);}try{if(_0x47cdb8[_0x5296f6(0xeb,0x174,0xa7,0xbc)](_0x5296f6(0x152,0x25,0x93,-0x4c),_0x47cdb8[_0x5296f6(-0x88,-0x4,0xa,-0x83)])){const _0x3dc28a=_0x3706dc?function(){function _0x3fdba9(_0x601872,_0x1320c7,_0x150c31,_0x58d014){return _0x5296f6(_0x601872-0x192,_0x1320c7-0x1c1,_0x601872- -0x16b,_0x150c31);}if(_0x13ca27){const _0x34940c=_0x50b860[_0x3fdba9(-0xe9,-0x2c,-0xf6,-0x2e)](_0xbbe234,arguments);return _0x45048e=null,_0x34940c;}}:function(){};return _0x585c92=![],_0x3dc28a;}else{const {image:_0x5edcc2,change:_0x344301,isVideo:_0x4d2923,format:_0x1b5e4c}=await _0x47cdb8[_0x5296f6(-0xf,-0xc6,-0x9c,-0x138)](generateBananaImage,{'prompt':_0x22fbd0,'width':_0x1740a8,'height':_0x3f6d2c,'change':_0x494343,'retouchPrompt':_0x5bc871,'retouchImage':_0x242b14,'videoPrompt':_0x44ff01,'videoImage':_0x5af2ee});if(_0x47cdb8[_0x51affd(0xf3,0x254,0x19f,0x147)](extension_settings[extensionName]['cache'],'0')){if(_0x47cdb8['ZOPAc'](_0x47cdb8[_0x51affd(0xb,0xb7,0xd6,0xdc)],_0x47cdb8['GgvMM']))await setItemImg(_0x22fbd0,_0x5edcc2,{'change':_0x215651,'isVideo':_0x4d2923||![],'format':_0x47cdb8['abhwc'](_0x1b5e4c,_0x51affd(0xf4,0x1a7,0x175,0x98))}),_0x47cdb8[_0x51affd(0x293,0x289,0x204,0x1dd)](addLog,_0x5296f6(0x21,0x1b,-0x15,0x19)+_0x5296f6(0x7f,0x76,-0x41,-0x2d)+'\x20'+_0x22fbd0),extension_settings[extensionName]['banana'][_0x5296f6(-0x4a,0xfa,0x18,0x7a)]?(extension_settings[extensionName][_0x51affd(0x1f2,0x179,0x1ac,0x214)][_0x51affd(0x17e,0x1a7,0x16b,0x210)]=extension_settings[extensionName][_0x51affd(0x1ef,0x162,0x1ac,0x147)][_0x51affd(0x22c,0x1a4,0x16b,0x14e)]+(0x20ae+0x13ed*0x1+-0x349a),_0x47cdb8['ZuzvU'](addLog,_0x5296f6(-0x156,-0x81,-0x72,0x33)+'r\x20prompt:\x20'+extension_settings[extensionName][_0x51affd(0x20e,0x111,0x1ac,0x131)][_0x51affd(0x239,0x246,0x16b,0xad)])):(extension_settings[extensionName][_0x5296f6(0x133,0xc4,0x59,0x10e)][_0x51affd(0xd1,0x21f,0x16b,0x10a)]=-0x1d9c+0x1e35+-0x98,addLog('当前生图次数为\x20fo'+_0x51affd(0x121,0x17d,0xa9,0xec)+extension_settings[extensionName][_0x5296f6(0x0,0x1c,0x59,0x79)][_0x51affd(0x110,0x20e,0x16b,0x241)]));else{let _0x406c2e=_0x4468b9;!_0x406c2e['endsWith'](_0x47cdb8[_0x51affd(0x6f,0x19f,0xca,-0x8)])&&!_0x406c2e[_0x51affd(0x1c0,0xf6,0x181,0x11c)](_0x47cdb8['pEKSt'])&&(_0x406c2e=_0x406c2e+_0x47cdb8[_0x5296f6(-0x101,-0x47,-0x89,-0x52)]);_0x406c2e=_0x406c2e[_0x51affd(0xaa,0x6a,0x14b,0x182)](/\/v1\/$/,_0x47cdb8['ypszi']),_0x36b831='/api/backe'+'nds/chat-c'+'ompletions'+_0x51affd(0x12f,0x11e,0x1f9,0x2ce),_0x17fbea=_0x47cdb8[_0x5296f6(-0x4b,-0x174,-0xa8,-0x11c)](_0x15e52e,_0x329219[_0x5296f6(-0x18a,-0xb9,-0xb7,-0x85)]);const _0x438a9d=_0x554bf3[_0x5296f6(0x23,0xad,0x2e,0xdc)]('{视频}')?_0x47cdb8[_0x5296f6(0xeb,0xef,0xd6,0x158)](_0x504f27,_0x4bca96):_0x5e277c,_0x3f4802={};_0x3f4802[_0x5296f6(-0xa5,0x73,0x34,0xf1)+_0x51affd(-0x17,-0x8,0x92,0x2c)+'ce']=_0x47cdb8['aByDj'],_0x3f4802[_0x5296f6(0x31,-0xe3,-0x19,0x7a)]=_0x406c2e,_0x3f4802['custom_inc'+_0x51affd(0x152,0x9f,0x16d,0xa3)+'rs']='Authorizat'+_0x51affd(0x2bc,0x19c,0x217,0x26a)+_0x5296f6(0x87,0x7b,0xc,-0x63)+_0x2f06d9+'\x22',_0x3f4802[_0x51affd(0x185,0x2a0,0x1f2,0x260)]=_0x438a9d,_0x3f4802[_0x5296f6(-0x116,-0x9d,-0x91,-0x14b)]=_0x1ace8a[_0x51affd(0x150,0x40,0xc2,0x86)],_0x3f4802['stream']=![],_0x4ec794=_0x3f4802;if(_0x438a9d['startsWith'](_0x47cdb8[_0x51affd(0x1bc,0x83,0xff,0x185)])){_0x47cdb8[_0x51affd(0x88,0x46,0x98,-0x4d)](_0x23c023,_0x51affd(0x2,0x2a,0x81,0x128)+_0x5296f6(-0x15d,-0x156,-0xa2,-0xef)+_0x5296f6(0xf6,0xe0,0x14,-0xc9)+_0x5296f6(0x16,-0x106,-0x87,0x5d)),_0xba7567=_0x4a7cea;const _0x7c37d5={};_0x7c37d5[_0x5296f6(-0x2e,0xbe,0x6e,-0x77)+'pe']=_0x47cdb8[_0x5296f6(0xe6,0x29,0xa4,0x72)],_0x7c37d5[_0x51affd(0x178,0x11b,0x9e,0xd3)+_0x5296f6(-0x1d,-0x15,-0x9a,0x3f)]=_0x5296f6(-0xbb,-0xdc,-0x5e,-0xcf)+_0x3a8856,_0x325ed1=_0x7c37d5,_0x22385d=_0x1e8dbf;}_0x48b954(_0x5296f6(0xed,0x130,0x67,0x10b)+'用酒馆代理模式');}}else addLog(_0x51affd(0xf7,0x1db,0x179,0xa7)+'库');eventSource['emit'](EventType['GENERATE_I'+_0x5296f6(0xe2,0x5d,0x1d,0x104)+_0x51affd(0x9d,0x24,0x67,-0x66)],{'id':_0xa2d283,'success':!![],'imageData':_0x5edcc2,'prompt':_0x22fbd0,'change':_0x215651,'isVideo':_0x47cdb8[_0x5296f6(0xa5,0x5c,-0x6,0xad)](_0x4d2923,![]),'format':_0x47cdb8[_0x51affd(0xb6,0xe7,0x189,0x1ad)](_0x1b5e4c,_0x51affd(0x126,0x112,0x175,0x235))}),eventSource[_0x5296f6(0x13f,0x32,0x68,0xc8)](_0x47cdb8['VoBBp'],{'id':_0xa2d283,'success':!![],'imageData':_0x5edcc2,'prompt':_0x22fbd0,'change':_0x215651,'isVideo':_0x47cdb8[_0x5296f6(-0x9d,-0x76,0x36,-0x8e)](_0x4d2923,![]),'format':_0x47cdb8[_0x51affd(0xa7,0x141,0x10b,0x87)](_0x1b5e4c,_0x47cdb8[_0x51affd(0x48,0x160,0xbd,0x122)])}),_0x47cdb8[_0x5296f6(-0x11e,-0x123,-0xa8,-0xb9)](addLog,_0x51affd(0x8c,0x1e9,0x164,0x24c)+'mitted\x20suc'+_0x5296f6(0x7b,-0x1a,-0x1a,-0x7d)+_0x51affd(0x1c9,0x241,0x166,0x8d)+':\x20'+_0xa2d283);}}catch(_0x41d83c){const _0x192488=_0x51affd(0x235,0x1a8,0x1fb,0x236)+'eneration\x20'+_0x5296f6(-0x158,-0x103,-0x95,-0x7f)+'\x20ID\x20'+_0xa2d283+':\x20'+_0x41d83c[_0x51affd(0x202,0x227,0x13f,0x115)];addLog(_0x192488),console[_0x51affd(0x20a,0x1aa,0x1f5,0x202)](_0x192488);const _0x466164={};_0x466164['id']=_0xa2d283,_0x466164[_0x51affd(0x6b,0x174,0x124,0xaf)]=![],_0x466164[_0x51affd(0x129,0x1d1,0x1f5,0x111)]=_0x41d83c[_0x5296f6(-0xa9,-0x17,-0x14,-0xc3)],_0x466164[_0x51affd(0x287,0x25a,0x1bf,0x114)]=_0x22fbd0,eventSource['emit'](EventType[_0x5296f6(-0xe3,0xc2,0x2,-0xbd)+'MAGE_RESPO'+_0x5296f6(-0xdf,-0x47,-0xec,-0x181)],_0x466164);const _0x4044ff={};_0x4044ff['id']=_0xa2d283,_0x4044ff['success']=![],_0x4044ff[_0x51affd(0x2cb,0x1af,0x1f5,0x1a4)]=_0x41d83c['message'],_0x4044ff[_0x51affd(0x21b,0x266,0x1bf,0x1a0)]=_0x22fbd0,eventSource[_0x5296f6(-0xd,-0x5f,0x68,0xd1)](_0x47cdb8[_0x5296f6(0x16,0x2,-0x69,-0x27)],_0x4044ff),_0x47cdb8[_0x51affd(0x27c,0x129,0x1c6,0x142)](addLog,_0x5296f6(-0x15,0x9a,0x11,-0x37)+_0x51affd(0x1eb,0x2e3,0x226,0x213)+_0x5296f6(-0x6f,-0x1af,-0xeb,-0x123)+_0x51affd(0x108,0x1f5,0x166,0xd1)+':\x20'+_0xa2d283);}}function handleCancelBananaTask(_0x47f3e3){const _0x2408cb={'FHBVP':function(_0x184889,_0x2acf5d){return _0x184889===_0x2acf5d;},'QXdad':_0x628f4(-0x69,0x3c,0x49,-0xde),'Lrwyn':function(_0x36a703,_0x965f8e){return _0x36a703||_0x965f8e;},'fuPJr':function(_0x3fbb99,_0x251cb9){return _0x3fbb99(_0x251cb9);}};function _0x1d2b0d(_0x1d1de2,_0x5b203c,_0x5c9e35,_0xe86f3){return _0x4712(_0x5b203c- -0x3e2,_0x5c9e35);}const {taskId:_0x360d85}=_0x47f3e3;addLog(_0x628f4(-0x92,-0x14e,-0xe6,-0xb6)+_0x1d2b0d(-0x1d0,-0x1e5,-0x1ba,-0x1e4)+_0x1d2b0d(-0x148,-0xaa,-0x168,-0x131)+_0x360d85+')');function _0x628f4(_0x3e467a,_0x221a72,_0x33b4db,_0x30fea6){return _0x4712(_0x3e467a- -0x243,_0x30fea6);}if(_0x2408cb['FHBVP'](currentTaskId,_0x360d85)&&currentRequestId){const _0x27f3f8=_0x1d2b0d(-0xbd,-0x132,-0x135,-0x1de)[_0x1d2b0d(-0x154,-0xf1,-0x1c8,-0x108)]('|');let _0x402b03=-0x1996*0x1+-0x1300+-0x164b*-0x2;while(!![]){switch(_0x27f3f8[_0x402b03++]){case'0':eventSource[_0x1d2b0d(-0x35,-0x103,-0x94,-0x47)](EventType[_0x628f4(0x36,0x11,0x22,0x3c)+'MAGE_RESPO'+_0x1d2b0d(-0x2bc,-0x257,-0x2be,-0x33b)],{'id':currentRequestId,'success':![],'error':_0x2408cb['QXdad'],'prompt':_0x2408cb[_0x1d2b0d(-0x25f,-0x1c5,-0x162,-0x1c3)](currentPrompt,'')});continue;case'1':currentPrompt=null;continue;case'2':_0x2408cb['fuPJr'](addLog,_0x628f4(-0xae,-0xfe,-0xfe,-0xf)+_0x628f4(0x95,0x11f,0xae,0xc3)+'响应\x20(ID:\x20'+currentRequestId+')');continue;case'3':currentRequestId=null;continue;case'4':currentTaskId=null;continue;}break;}}}function initializeBananaListener(){const _0x40285a={'aDITW':_0x440db5(0x392,0x3c3,0x411,0x496)+_0x440db5(0x46c,0x453,0x3d6,0x382)+_0x440db5(0x39c,0x382,0x434,0x2ce),'ErzQb':function(_0x1185e3,_0x1ee225){return _0x1185e3(_0x1ee225);},'ZYejv':'banana\x20生图事'+_0x440db5(0x449,0x3b3,0x397,0x3d3)};function _0x440db5(_0x182f67,_0x11f687,_0x119a13,_0x2eb87e){return _0x4712(_0x11f687-0x19f,_0x119a13);}eventSource['on'](EventType[_0x560207(0x26,0x131,0xaf,0x141)+_0x440db5(0x286,0x33c,0x411,0x3eb)+'ST'],bananaGenerate),eventSource['on'](_0x40285a[_0x440db5(0x3b4,0x44d,0x42d,0x3c7)],handleCancelBananaTask);function _0x560207(_0x27d2eb,_0x20b06c,_0x187d9b,_0x520f54){return _0x4712(_0x187d9b- -0x1ca,_0x520f54);}_0x40285a[_0x560207(0x59,-0xc2,0x25,-0x3)](addLog,_0x40285a[_0x560207(0x96,-0x6,0xd5,0x4c)]);}export async function replaceWithBanana(){function _0x27e9f3(_0x211256,_0x5be4ac,_0x1a33b3,_0x473d07){return _0x4712(_0x473d07- -0x116,_0x5be4ac);}const _0x30ea31={'xJhva':_0x27a050(0x1cf,0x321,0x252,0x1a2),'QnWYB':'LgjlY','VCaFh':function(_0x4aec97){return _0x4aec97();},'bVTQw':'[Banana]\x20生'+'图事件监听器已关闭。','fbzcK':'st_chatu8_'+_0x27e9f3(0x14a,0x22f,0x141,0x19e)+_0x27a050(0x1a8,0x1bf,0x1ca,0x242)};function _0x27a050(_0x161bc9,_0x12a1f7,_0x5e1de8,_0x24ab70){return _0x4712(_0x5e1de8- -0x19,_0x24ab70);}if(extension_settings[extensionName][_0x27a050(0x195,0x19a,0x1ce,0x109)]==_0x27a050(0x263,0x32f,0x2b7,0x351)){if(_0x30ea31[_0x27e9f3(0x219,0x210,0x25f,0x23c)]!==_0x30ea31['QnWYB'])!window['initialize'+_0x27a050(0x222,0x296,0x20c,0x27d)+'ener']&&(window[_0x27a050(0x20b,0x1df,0x18a,0x1a7)+_0x27a050(0x1a1,0x284,0x20c,0x1e7)+_0x27e9f3(0x1ea,0x227,0x1c2,0x17d)]=!![],_0x30ea31[_0x27a050(0x28b,0x22e,0x310,0x243)](initializeBananaListener)),_0x30ea31['VCaFh'](initializeImageProcessing);else{const _0x5b2489={};_0x5b2489['role']=_0x27a050(0x236,0x2e4,0x28b,0x290),_0x5b2489[_0x27a050(0x25f,0x31c,0x308,0x242)]=_0x3e5488,_0x4e4f1d['push'](_0x5b2489);}}else{if(window[_0x27e9f3(0x5b,0x146,-0x56,0x8d)+_0x27a050(0x182,0x20d,0x20c,0x242)+'ener']){const _0x272827=_0x27e9f3(0x172,0x98,0x7a,0x110)[_0x27a050(0x276,0x350,0x2d8,0x2ec)]('|');let _0x48b145=0x1ba*0x9+-0x5ea+-0x9a0;while(!![]){switch(_0x272827[_0x48b145++]){case'0':eventSource[_0x27e9f3(0x177,0x12a,0x150,0x96)+_0x27e9f3(0x1fd,0x1f9,0x17b,0x17d)](EventType[_0x27a050(0x26f,0x33b,0x260,0x33c)+_0x27a050(0x20f,0x122,0x184,0x20d)+'ST'],bananaGenerate);continue;case'1':addLog(_0x30ea31['bVTQw']);continue;case'2':eventSource[_0x27a050(0x140,0x274,0x193,0xd0)+'ener'](_0x30ea31['fbzcK'],handleCancelBananaTask);continue;case'3':LEGACY_EVENT_NAMES[_0x27a050(0x1a4,0x14b,0x1dd,0x269)](_0x1a590=>{function _0x9e9355(_0x1c1a29,_0x379742,_0x271d2c,_0xa44f23){return _0x27e9f3(_0x1c1a29-0xfa,_0xa44f23,_0x271d2c-0x16f,_0x271d2c-0x163);}eventSource[_0x9e9355(0x1bc,0x157,0x1f9,0x2b5)+'ener'](_0x1a590,bananaGenerate);});continue;case'4':window[_0x27e9f3(0x10d,0xac,0x99,0x8d)+_0x27a050(0x2e7,0x2f2,0x20c,0x219)+_0x27e9f3(0xf7,0x132,0x1f3,0x17d)]=![];continue;}break;}}}}