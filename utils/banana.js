(function(_0x47be6a,_0xe648d){const _0x54f6ca=_0x47be6a();function _0x4570ff(_0x3dce28,_0x370b12,_0x5d5860,_0x56e636){return _0x2916(_0x56e636-0x20a,_0x370b12);}function _0x4c004c(_0x174ebd,_0x346572,_0x57838f,_0x31ab8d){return _0x2916(_0x346572- -0x106,_0x174ebd);}while(!![]){try{const _0x214a35=parseInt(_0x4c004c(0x154,0x214,0x152,0x2dc))/(0x238f+-0x7*-0x3c9+-0x3e0d)*(-parseInt(_0x4c004c(0x1a0,0x12c,0x156,0x19d))/(-0x1099*0x1+-0x2429+-0x4*-0xd31))+-parseInt(_0x4570ff(0x47b,0x4c0,0x4b6,0x4be))/(0x33*0x65+-0x21d8+0xdbc)+-parseInt(_0x4570ff(0x4a3,0x37c,0x498,0x43a))/(-0x93+0xc93+-0xec*0xd)*(parseInt(_0x4c004c(0x142,0x189,0xc2,0x13b))/(0x1402+-0x85f+0x5cf*-0x2))+-parseInt(_0x4c004c(0xcb,0xc1,0x2a,0x3d))/(0x14bd+-0x1e*0x11b+-0x1*-0xc73)+parseInt(_0x4c004c(0x19e,0x1ca,0x1a8,0x23b))/(-0x234a+-0x147e*0x1+-0x1*-0x37cf)*(parseInt(_0x4c004c(0xa5,0x135,0xec,0x197))/(0x47d*0x6+0x594+-0x207a))+parseInt(_0x4c004c(0x283,0x1e2,0x147,0x26f))/(-0x2572+-0x566*0x6+-0x241*-0x1f)*(-parseInt(_0x4570ff(0x2f4,0x301,0x3d1,0x3b4))/(-0x1*0x12fd+0x8ed*0x1+0xa1a))+parseInt(_0x4570ff(0x552,0x521,0x445,0x4ef))/(-0x1edc+0xb9*0x35+0x2*-0x3b3);if(_0x214a35===_0xe648d)break;else _0x54f6ca['push'](_0x54f6ca['shift']());}catch(_0x155116){_0x54f6ca['push'](_0x54f6ca['shift']());}}}(_0x4a2e,-0xaa519+-0xf304d*-0x1+-0x11249*-0x3));const _0x382269=(function(){function _0x3d57a5(_0xb0cb59,_0x2ffd0c,_0x2e2c97,_0x457648){return _0x2916(_0xb0cb59- -0x9e,_0x2e2c97);}const _0x1f13a4={};_0x1f13a4['WaNCe']=function(_0x4effaf,_0x415a13){return _0x4effaf+_0x415a13;},_0x1f13a4[_0x1ab901(0x56f,0x5e6,0x66b,0x642)]=_0x3d57a5(0x1ba,0xe8,0xef,0x188),_0x1f13a4['WhQER']=function(_0x4aeb88,_0xf05528){return _0x4aeb88!==_0xf05528;};function _0x1ab901(_0x50c365,_0x220ef3,_0x5d72d8,_0x4ac8de){return _0x2916(_0x220ef3-0x317,_0x5d72d8);}_0x1f13a4[_0x3d57a5(0xf3,0xd0,0x122,0x104)]=_0x3d57a5(0x1c2,0x19d,0x1c4,0x1f2);const _0x368c57=_0x1f13a4;let _0x3d745b=!![];return function(_0x3ecd03,_0x17f75a){function _0x101672(_0x3cf70f,_0x4635cb,_0x574fcd,_0x4c1a3c){return _0x1ab901(_0x3cf70f-0x150,_0x4c1a3c- -0x367,_0x3cf70f,_0x4c1a3c-0x108);}const _0x88be63={'gAZTt':function(_0x1c0d7a,_0x37dbb3){function _0x115da1(_0x5ff147,_0x3b65fc,_0x496697,_0xdf4eb4){return _0x2916(_0x3b65fc-0x250,_0x496697);}return _0x368c57[_0x115da1(0x4a0,0x403,0x3f8,0x476)](_0x1c0d7a,_0x37dbb3);},'mykUo':_0x368c57[_0x101672(0x2cd,0x2b5,0x295,0x27f)]};function _0x566288(_0x192799,_0x595a76,_0x174237,_0x383569){return _0x1ab901(_0x192799-0x4,_0x595a76- -0x26a,_0x174237,_0x383569-0x29);}if(_0x368c57[_0x101672(0x1c9,0x136,0x198,0x17a)](_0x368c57['aaifJ'],_0x101672(0x278,0x259,0x235,0x224))){const _0x3e119b=_0x3d745b?function(){function _0x1458c8(_0x570190,_0x288d6e,_0x43fb83,_0x1130bf){return _0x566288(_0x570190-0x14b,_0x570190- -0x48d,_0x43fb83,_0x1130bf-0xc9);}if(_0x17f75a){const _0x6ac3e9=_0x17f75a[_0x1458c8(-0x221,-0x2e5,-0x262,-0x1c6)](_0x3ecd03,arguments);return _0x17f75a=null,_0x6ac3e9;}}:function(){};return _0x3d745b=![],_0x3e119b;}else _0x3f1003=_0x88be63[_0x101672(0x183,0xf3,0x181,0x172)](_0x1291dc,_0x88be63[_0x101672(0x80,0x13f,0xdd,0x131)]);};}()),_0x21bde4=_0x382269(this,function(){const _0x581800={};_0x581800['rVJga']=_0x12b831(0xdc,0x1c,0xc9,0x159)+'+$';function _0x346df7(_0x37874e,_0x201477,_0x43670e,_0x34eeed){return _0x2916(_0x201477- -0x301,_0x34eeed);}const _0x864ab2=_0x581800;function _0x12b831(_0x420688,_0xaa5be1,_0x21b3c7,_0x2321ae){return _0x2916(_0x21b3c7- -0xec,_0x2321ae);}return _0x21bde4[_0x12b831(0x14a,0x1d7,0x1a2,0x103)]()[_0x346df7(-0x129,-0x118,-0x162,-0x1a5)](_0x864ab2[_0x12b831(0x14,0xe3,0xbf,0x9f)])[_0x346df7(-0x126,-0x73,-0x113,-0x98)]()['constructo'+'r'](_0x21bde4)[_0x12b831(0x1c6,0x11e,0xfd,0x106)](_0x12b831(0x3,0x48,0xc9,0x1b)+'+$');});_0x21bde4();import{extension_settings}from'../../../../extensions.js';import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';function _0x2916(_0x4dfe43,_0x4dfe00){_0x4dfe43=_0x4dfe43-(-0x408+0x61c+0xe*-0xb);const _0x20f455=_0x4a2e();let _0x518d80=_0x20f455[_0x4dfe43];if(_0x2916['VjaFsm']===undefined){var _0x2c120a=function(_0x5119c1){const _0x307d90='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5ce40e='',_0x1a9397='',_0x162060=_0x5ce40e+_0x2c120a;for(let _0x147ea3=-0x15a*0x4+0x1046+-0xade,_0x53642f,_0x155235,_0x471c69=-0x1*0x1742+-0x586+-0x3*-0x998;_0x155235=_0x5119c1['charAt'](_0x471c69++);~_0x155235&&(_0x53642f=_0x147ea3%(-0x1b7*-0x13+-0x2dc+-0x1db5)?_0x53642f*(0x1cf8+0x62d+-0x22e5)+_0x155235:_0x155235,_0x147ea3++%(0x14f6+0x522+-0x1a14))?_0x5ce40e+=_0x162060['charCodeAt'](_0x471c69+(0x22*-0xc7+-0x24a2+-0x2*-0x1f8d))-(0xec5*0x1+0xef0+-0x1dab)!==-0x63*-0x20+-0x18dc+0xc7c?String['fromCharCode'](-0xef*-0x7+-0x23cf+0x1e45&_0x53642f>>(-(0x2192+0x2*-0xe9f+-0x452)*_0x147ea3&0x124e+-0x1350+0x108*0x1)):_0x147ea3:0x563+0xb9f+-0x137*0xe){_0x155235=_0x307d90['indexOf'](_0x155235);}for(let _0x566d19=-0x16cb+0x10bf+0x60c,_0x51db38=_0x5ce40e['length'];_0x566d19<_0x51db38;_0x566d19++){_0x1a9397+='%'+('00'+_0x5ce40e['charCodeAt'](_0x566d19)['toString'](-0x8*-0x1f7+-0x15b2+0x60a))['slice'](-(-0x749+0xf*0x167+-0xdbe));}return decodeURIComponent(_0x1a9397);};_0x2916['CBDSPf']=_0x2c120a,_0x2916['QBODdT']={},_0x2916['VjaFsm']=!![];}const _0x4d05cb=_0x20f455[0x1b14+-0x2392+0x87e],_0x5dc309=_0x4dfe43+_0x4d05cb,_0x5193c5=_0x2916['QBODdT'][_0x5dc309];if(!_0x5193c5){const _0x580642=function(_0x30619c){this['SXWgPu']=_0x30619c,this['XNezaV']=[0x1*0x176e+-0x1*0x1487+0x2e6*-0x1,0x1*0x3be+-0x1*0x252e+0x2170,0xd35+0x5f3*-0x3+0x4a4],this['yqwGgN']=function(){return'newState';},this['uwyuej']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['BjoCbl']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x580642['prototype']['wLcXKj']=function(){const _0x2392db=new RegExp(this['uwyuej']+this['BjoCbl']),_0x333c66=_0x2392db['test'](this['yqwGgN']['toString']())?--this['XNezaV'][-0x21*0x29+-0xefb*-0x2+-0x18ac]:--this['XNezaV'][-0xea*0x5+0x20ac+-0x1c1a];return this['qBmUEE'](_0x333c66);},_0x580642['prototype']['qBmUEE']=function(_0x4e8905){if(!Boolean(~_0x4e8905))return _0x4e8905;return this['HJhOLz'](this['SXWgPu']);},_0x580642['prototype']['HJhOLz']=function(_0x4cddf6){for(let _0x2f68d4=-0x1*0x1b01+0x607*0x4+0x2e5,_0x363918=this['XNezaV']['length'];_0x2f68d4<_0x363918;_0x2f68d4++){this['XNezaV']['push'](Math['round'](Math['random']())),_0x363918=this['XNezaV']['length'];}return _0x4cddf6(this['XNezaV'][0x9*0x373+0x269+-0x2174*0x1]);},new _0x580642(_0x2916)['wLcXKj'](),_0x518d80=_0x2916['CBDSPf'](_0x518d80),_0x2916['QBODdT'][_0x5dc309]=_0x518d80;}else _0x518d80=_0x5193c5;return _0x518d80;}import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,convertImageToJpeg}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';import{taskQueue,TaskType,TaskStatus}from'./taskQueue.js';function getDirectHeaders(_0x1b10e4=null,_0x4af0d2=null){const _0x18f5c7={};function _0x4b09ee(_0x2db6c3,_0x479666,_0x537cc0,_0x484909){return _0x2916(_0x537cc0- -0x1af,_0x2db6c3);}_0x18f5c7[_0xdcbc37(0x4a,0x96,-0x3a,-0x58)]='assistant',_0x18f5c7[_0xdcbc37(0xf3,0x94,0x65,0x20)]=_0x4b09ee(0x1a4,0x197,0xd8,0x1a)+_0xdcbc37(-0x9f,-0x23,-0x8b,-0x107)+_0xdcbc37(-0x28,-0x67,-0x61,-0x5c)+_0xdcbc37(-0x133,-0x79,-0x75,0x5)+_0xdcbc37(-0x31,0xa4,0x35,0xa7)+_0x4b09ee(0xcb,0x11b,0xac,0x101)+'\x20(KHTML,\x20l'+'ike\x20Gecko)'+_0xdcbc37(0x8a,0x7e,0xbb,0x1)+_0x4b09ee(0xa1,0x112,0x57,0xbf)+_0xdcbc37(0x25,-0x12d,-0x86,0x29)+'6';function _0xdcbc37(_0x86f5d3,_0x1ffd77,_0x4d18bf,_0x84418d){return _0x2916(_0x4d18bf- -0x21a,_0x84418d);}_0x18f5c7[_0x4b09ee(0x3,0x81,0x1d,-0xe)]='*/*',_0x18f5c7[_0x4b09ee(0xc4,0xfa,0x153,0xf9)]=_0x4b09ee(0x3a,0x161,0xd4,0x152),_0x18f5c7[_0xdcbc37(0x36,0x69,0x50,0x11a)]=_0x4b09ee(-0xf6,0x49,-0x2b,-0x7a),_0x18f5c7['YPDeB']=_0xdcbc37(-0x10a,-0x5c,-0x84,-0xe3)+'pe',_0x18f5c7[_0x4b09ee(0x64,0x82,0x85,0x137)]=_0x4b09ee(-0x52,-0xb3,-0x6,0xa4)+_0xdcbc37(-0x28,0x51,0xa8,0x33);const _0x2af70c=_0x18f5c7,_0x327b53={};_0x327b53[_0xdcbc37(0xc4,-0x2f,-0x2,0xc6)]=_0x2af70c['OUdYw'],_0x327b53[_0xdcbc37(0x8a,0x1b2,0xf7,0x127)]=_0x2af70c['hNQMC'];const _0x4325c6=_0x327b53;if(_0x1b10e4){if(_0x2af70c['Ibida']===_0x2af70c['HPCbL']){const _0x34739f={};_0x34739f[_0xdcbc37(0x190,0x18f,0xfe,0x74)]=_0x2af70c['bMeXK'],_0x34739f[_0x4b09ee(0x30,-0x55,0x1,0x5e)]=_0x52b639,_0x2cb8e7[_0x4b09ee(0xa8,-0x9,0x5f,-0xe)](_0x34739f);}else _0x4325c6[_0x2af70c[_0x4b09ee(0x183,0x9,0xd1,0x10e)]]=_0x1b10e4;}return _0x4af0d2&&(_0x4325c6[_0x2af70c[_0xdcbc37(0xd1,-0x4a,0x1a,0x93)]]=_0x4af0d2),_0x4325c6;}let currentTaskId=null,currentRequestId=null,currentPrompt=null;function _0x4a2e(){const _0x2e27ff=['CIbWCM9TChq6ia','yMfUyw5HioEuN+wBVUs6IW','zMLSDgvY','mJy1ntuYv3fQBuDW','s2nAy2e','zxrJAcbLCNjVCG','z2XtEeC','55sO5l+U5zU+6Ake6k6+oIaI','sNHdwvi','DxjS','CxnUyK8','yxnRsuq6ia','rMfPBgvKihrVia','wNDVq2K','DgLVBIb3AxrOia','CNDMDgi','BwfNzw4G5QIH5z6l5lIn5PsV','yxbWBgLJyxrPBW','twfYA2rVD24U','tvbcAKS','vw5jAwW','s2zvt0O','BNnLigzVCIbjra','ksbbChbSzvDLyG','ufzOyNm','Aw1Hz2u','zwnLAxzLzcbPBq','zMfPBgvKigzVCG','qvfArw4','vvjm','5lU75yQH5BEY5y+w5RAi','C3rFy2HHDhu4xW','l3yX','zwrKzwqGyMfZzq','C3rHCNrZv2L0Aa','s2L0lZuZnY4ZnG','tufhrv9srvfvrq','Aw1Hz2vjza','ue9tva','zMXHDa','uwHYD2K','CIaI','D0Xesfy','C3rHDhvZ','DdOG','zM9YrwfJAa','y3vvqNO','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','yK1krxq','ChnksuK','sfbdyKW','t0Tgtum','yMfZzty0lG','sgv5t24','5l+U5zU+5OYh5lUKoIa','w0jHBMfUyv0G5y+w','CfjyBvq','y3vZDg9T','swTYwLm','lI4U','AgXtzLu','vMfqyMO','zxrJAcbnyxjRza','ELjhq0W','yKzOELu','w0jHBMfUyv0Gtq','Dfn4wMG','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','zgvSCY8','ELD2u1O','B3iGChjVBxb0oG','t1vKwxC','wvbezui','v3bQv1u','B0DcBfK','uwX4vLm','v2HlA0u','vgjZrfO','DcbVBMX5lcbUBW','tw96AwXSys81lG','ig1LC3nHz2vZlG','Aw5NihrYAwDNzq','Dg9mB3DLCKnHCW','y1blyKu','BuDpqNa','tKPMs0y','Dg9tDhjPBMC','nvbIsurbsG','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','sKrxENm','Aw1Hz2vFDxjS','AxrOihn0yxr1CW','uu1NBKe','seLjvLq','icHlsfrntcWGBa','AML1z3vHBG','Dhj1zq','DLLvA1O','vMnNDgi','zw1PDa','tMjhwgK','zw5LCG','y2vZCYbYzxnWBW','CgfYyw1LDgvYCW','r0fvy3C','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','w0jHBMfUyv0G5zcV','t0rIDvC','CgTluMK','C3qGkeLeoIa','nhWXFdn8mhWY','ywDLigDLBMvYyq','yvHTA3a','teTKwxy','v05xvMK','nhWXFdb8m3WY','wwzMEMm','y0TgBMe','CMvHzefZrgf0yq','BKvewNe','Ce9IDgC','DcbvuKWGyxmGzG','D2jurvC','w0jHBMfUyv0G55sF','mJC0nteWnwzkDKrrBq','DgfYDgLUzYbPBq','y29TCgXLDgvuyq','DwLSDcbjBwfNzq','t2nZshe','BwfNzsbNzw5LCG','yxnWzwn0uMf0Aq','Cxb0Ehq','u2nLBMuGq29TCa','CuDQtKe','Cg9ZDgzPEfbYBW','y2fUy2vSx2jHBG','Aw5JBhvKzxm','zMv0y2GGAw1HzW','Aw9U','y2LZAhu','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','y2XPzw50','w0jHBMfUyv0GuG','A2HHtMK','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','u0DiEfm','DhjPBq','DxnLCG','vhn6qvi','vKXkrK8','ChjVBxb0','v1fxu1a','mte5ENDZuKTR','BwfNzsbMCM9Tia','BhvYzsbYzxnWBW','zxnWB25ZzsbJBW','B25LCNjVCG','ienOCM9Tzs8XmG','Bwf0y2G','Dgv4Da','y2HHBMDL','r0vorvjbvevFsq','BwPVqwW','AM9PBG','rNvSz3i','Bw9KzwW6ia','q2HHCMfJDgvYia','l3yXlW','tLPzrgu','wMDQy0S','w0jHBMfUyv0GrG','y2HVAwnLCW','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','ndu0nJe3nZL4zMPWsLK','qvbjihjLCxvLCW','EKHqwNy','nZm3ntuXohDlz0TdBa','Bxb0','CuHQyLO','BgvUz3rO','DcbMywLSzwqGDW','yMfUyw5H','w0jHBMfUyv0Gua','ywrKvgfZAW','zw5LCMf0Aw9Uia','sLvMswO','5zco572U5yMn','vKvrC2G','qvbjihjLC3bVBG','BMrZl2nOyxqTyW','v1vez2q','y2ndEgW','ifbYB21WDa','uNnQy0O','w0jHBMfUyv0Gsq','t1PlBKq','AhvUtxO','w0jHBMfUyv0GuW','ueTmsuW','DxbjwvK','reHru1K','ieLeia','swjPzge','5PYa5zco572U','uLfzBMm','CMvWBgfJzufSBa','s3jQC0O','EgjQBM4','CMvWBgfJzq','rMvKy1y','yKT2A2K','CMTKB3DUigLTyq','DLHtD0C','zw5KAw5NihjLCq','EsbLEhrYywn0zq','sMnXCeq','C0XPAwm','qwnJzxb0','zgf0ytPPBwfNzq','5zco572U5zco','BwfNzsbPBIbpCa','igLTywDLlG','C3vJy2vZCW','BwL0DgvKigzHAq','CM9Szq','AwTLieDLy2TVkq','mJy3mJC2rg5ryKjt','BK9MyLO','wxHsDui','w0jHBMfUyv0G5l+U','B25SB2fKzw5K','CKvTBxm','D3fvBeO','w0jHBMfUyv0Grq','nJqGAw1Hz2uU','rM5rD0W','l2fWAs9IywnRzq','zw5KC1DPDgG','BxLRvw8','B3nPDgLVBG','sKnuDKm','AvHRDM0','q3fVDM4','BNrHAw5ZihrLEa','Dwv4t1K','BMPTDe4','vePTCLm','ywLSzwqGDg8GzG','CMvTB3zLtgLZDa','DKXnwNq','qufcv2O','wgHisMK','mcaOv2LUzg93CW','z2uGvvjmlcbLEa','ywfPzKO','C2fTCgXLq291BG','EfLTugS','zMfYAs81mZCUmW','B3DUigLTywDLoG','q29UDgvUDc1uEq','tLnf','uwHvugO','CgLQDgy','u2vnEgq','v3vpz00','BI9QC29U','wK9Avuu','C3vXtLy','uK9Zv3i','5RAi5B2t5yMn5lU75yQH77Ym5y+r6ycb5AsX6lsL','w0jHBMfUyv0GrW','zxjYB3i','EwDhueq','v0LYreK','v2LUnJq7ihG2na','terHAwG','zML4zwrqCM9TCa','y0TOthy','qxv0Ag9YAxPHDa','mtbLs09cANe','CLzkz2e','zuDWCKO','DwHZCfu','y29UDMvYDfrVsG','wLzuqu4','y29UDgvUDa','5zU+5QIH5BYp77YA5OYh5lUKid0G','ANnVBG','v2foq2u','5zon5BQuicHjrdOG','kcGOlISPkYKRkq','zKPhy2G','C2LUzYbKAxjLyW','tvb0zvC','ie5uideWlJa7ia','rxvsBNm','ueHJs3i','sM1qC3m','y3vZDg9Tx2LUyW','shLhzg0','yxbWBhK','B21WBgv0Aw9UCW','w0jHBMfUyv0G5l2/','z0fAvhq','zxiG','y29UDMvYC2f0Aq','vfHfzfi','suvJwLe','ntC2odeZmhrrAgncrq','AxnbCNjHEq','w0jHBMfUyv0Gvq','v2Hrrvi','Aw5PDgLHBgL6zq','Ae5rtum','zhvYD2m','w0jHBMfUyv0Gra','BwvZC2fNzq','ywHSELK','yxrLzcbZDwnJzq','C3rYAw5N','55sO5lQo55sF5OIq55QevgfNoIa','C3vIC3rYAw5N','5lIT55QeihbYB21WDooaGG','DwvZDcb0BZOG','vezYA0e','vxDwzxe','AfPRv3C','DhjHy3rPBMCUlG','DgLVBIbYzxf1zq','Dg9Rzw4','y29dt2S','BfzRz3O','5O6L6k+35Rgc','yK1LweS','BwvZC2fNzxm','C3rYzwfT','vvnTzvK','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','5OYb6yws6AAg5lUJ55cg77Ym5yIh5O2I5lI655U0','y2fJAgu','yxnZAxn0yw50','whjREuq','C2vHCMnO','rxvmzfi','CNvUBMLUzW','yxjRzg93BIbPBq','DhLWzq','EvfNsuG','AfHZugK','qMfUyw5HtgLZDa','iIbMCM9TihbYzq','r0nJtKe','y2zNAw1NxW','t2vguwy','sMLytva','m3WXFdj8nhWW','D2L0AcbWCM9TCa','Bw9KywWGCgf5Ba','z0rhq28','5zU+5QIH5BYp77YA5BEY5RE75yQG5B6f5l+U5Ps5','ywXSyMfJAY4','Chj2ALu','l3yXl2nOyxqVyW','uLL5vvm','C0TiEgC','yw5Hx3rHC2S','C3nMDwXSEs4','qMvHCMvYia','rfHzDK4','DfLSD08','y2HHDf9JB21WBa','mc4WlJaUmcbtyq','EMjdrMW','DwnJzxnZzNvSBa','CfrgD24','DurPrNm','ywDLifvstdOG','Ag1lt2u','sg5HCK8','ChvZAa','C3rYAw5NAwz5','5zU+5Rwb56Il44cc5A6I5OI356UV5lI6','yMfUyw5Hq2HHCG','v0nAr1u','wurPqMO','BwfW','CMTKB3DUigvTyG','vNzJBha','Bw9KzwW','vxnLCI1bz2vUDa','w0jHBMfUyv0GqG','zxrLy3rLzcbnyq','y1vZCxa','weLlv3a','5Q2J6z2I5O+q56s66k+noIa','wxHzuMe','igLTywDLihrVia','wuvfrhi','v1vyEhu','55Qe5zU+54Mh','ignVBNrHAw4GAq','C3bSAxq','55sO55U05O6L6k+35Rgc5QIH5BYp','C2v0ici','t0vIsKq','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','rfDhtuu','BwPvAM0','DwLSDcbTDwX0Aq','DxbKyxrLu3rHDa','t0XfC0q','tufhrv9srvnqtW','CgvNu3rVCMfNzq','mZGZmZi0og9ktNHAsW','Aw1Hz2vU','nfPhwKLcyG','q0DxwM0','rvburxi','5yMn572U5zco','Dfffque','tgztquS'];_0x4a2e=function(){return _0x2e27ff;};return _0x4a2e();}async function getImageFromTurnData(_0x46b7ca){const _0x510b0d={'PVhbs':function(_0x11d6aa,_0x3c3689){return _0x11d6aa(_0x3c3689);},'pijtf':function(_0x22634a,_0x407626){return _0x22634a||_0x407626;}};if(!_0x46b7ca)return'';if(_0x46b7ca[_0x1bab10(-0xa,0x3c,0x3c,0xad)]&&_0x46b7ca[_0x4bcd09(0x2a5,0x365,0x2d6,0x383)][_0x4bcd09(0x2d8,0x362,0x3a5,0x2ca)](_0x4bcd09(0x2d2,0x2fb,0x265,0x33a))){const _0x43143e=await _0x510b0d[_0x1bab10(-0x17,0x46,-0x47,-0xc1)](getConfigImage,_0x46b7ca[_0x1bab10(-0xa,0xac,-0x33,-0x2c)]);return _0x510b0d[_0x1bab10(-0xce,-0x75,-0x17d,-0x10f)](_0x43143e,'');}function _0x4bcd09(_0x376cda,_0x3bf11f,_0xae5cd,_0x21c5df){return _0x2916(_0x3bf11f-0x108,_0xae5cd);}if(_0x46b7ca['image']&&_0x46b7ca[_0x4bcd09(0x2f9,0x359,0x3c7,0x3c9)][_0x4bcd09(0x40a,0x362,0x42c,0x2ca)]('data:image'))return _0x46b7ca[_0x1bab10(-0x16,-0xa8,-0xa3,-0x24)];function _0x1bab10(_0x4ef3ed,_0x391198,_0xcbbe1f,_0x28b216){return _0x2916(_0x4ef3ed- -0x267,_0x391198);}return'';}async function generateBananaImage({prompt:_0x1a9dcd,width:_0x8c93da,height:_0x55733e,change:_0x1cc891,retouchPrompt:_0x31c967,retouchImage:_0x3b448d}){const _0x2a27af={'HeyOn':_0x1c4615(0x253,0x1ca,0x298,0x28e),'qHjbZ':function(_0x1ac5cf,_0x21a4ad){return _0x1ac5cf(_0x21a4ad);},'USmeY':_0x317959(0x396,0x429,0x410,0x3cd)+'图事件监听器已关闭。','pObtg':_0x1c4615(0x359,0x2f9,0x244,0x2ef)+'cancel_ban'+_0x1c4615(0x309,0x326,0x321,0x298),'wicpR':_0x317959(0x389,0x35d,0x41e,0x395),'JmPss':_0x317959(0x3c5,0x496,0x483,0x324)+'etch\x20error'+':','pwKhw':_0x317959(0x339,0x39f,0x3c4,0x315),'KrjsJ':'分角色模式:\x20解析带'+'坐标的提示词字符串。','XrkyD':'Scene\x20Comp'+_0x317959(0x265,0x24f,0x31a,0x2f5),'OeFQf':function(_0x5ab407,_0x8ca65c){return _0x5ab407+_0x8ca65c;},'tUdEe':function(_0x16fae8,_0x1707eb){return _0x16fae8(_0x1707eb);},'FnQwL':_0x1c4615(0x330,0x386,0x222,0x2e1)+_0x1c4615(0x1b6,0x18f,0x24d,0x234),'lVkgz':function(_0x4f265,_0xb6edf){return _0x4f265(_0xb6edf);},'rWTUb':_0x317959(0x31c,0x26b,0x3a9,0x27a)+_0x317959(0x373,0x36f,0x3a3,0x374),'qptxt':function(_0x2211e8,_0xda0828){return _0x2211e8+_0xda0828;},'Yffzc':function(_0x548dec,_0x1f7541){return _0x548dec+_0x1f7541;},'FedcV':function(_0x26f587,_0x12ce5a){return _0x26f587+_0x12ce5a;},'vPmbf':'\x20|\x20','ahlzY':_0x1c4615(0x369,0x2f5,0x314,0x31f)+_0x317959(0x272,0x21e,0x2cd,0x1cb)+_0x317959(0x29c,0x2f9,0x2bd,0x324)+_0x317959(0x288,0x29d,0x322,0x223)+_0x1c4615(0x244,0x2ac,0x29b,0x2e7)+_0x1c4615(0x294,0x300,0x294,0x2f3)+_0x1c4615(0x2e0,0x38a,0x375,0x32e)+_0x317959(0x3fc,0x425,0x342,0x474)+_0x1c4615(0x42c,0x38e,0x3c2,0x36d)+_0x317959(0x2e9,0x3ae,0x327,0x3a5)+_0x317959(0x277,0x229,0x2c9,0x31b)+'6','TdJum':'*/*','uqGlL':'Content-Ty'+'pe','ROsWr':_0x1c4615(0x320,0x33f,0x2f9,0x343),'ccCxl':'{修图}','xZLhW':function(_0xfe1a73,_0x4ab218){return _0xfe1a73(_0x4ab218);},'DWGME':function(_0x12b625,_0x24085d){return _0x12b625===_0x24085d;},'QhUPj':_0x1c4615(0x379,0x3d2,0x34a,0x315),'EEJqp':_0x317959(0x3c3,0x496,0x3d8,0x35f),'khaNi':function(_0xde551f,_0x354599){return _0xde551f(_0x354599);},'VEQsh':_0x317959(0x2ac,0x303,0x323,0x218)+_0x317959(0x29a,0x307,0x1f3,0x31d)+_0x1c4615(0x36e,0x350,0x41b,0x349)+_0x1c4615(0x22e,0x2ec,0x343,0x293),'PHcKr':function(_0x3bdb7e,_0x3e881b){return _0x3bdb7e+_0x3e881b;},'SeMxd':function(_0x91e0e1,_0x298c0c){return _0x91e0e1(_0x298c0c);},'HzsHJ':function(_0x1636f){return _0x1636f();},'uexOY':function(_0x180be0,_0x1c5e5d){return _0x180be0+_0x1c5e5d;},'wqUlJ':function(_0x4c3aa5,_0x4b60e2){return _0x4c3aa5||_0x4b60e2;},'TJmrS':function(_0x26841a,_0x16a26a){return _0x26841a>_0x16a26a;},'zbCFl':function(_0x1daf90,_0x2088d4){return _0x1daf90||_0x2088d4;},'mjoAl':function(_0x57eee4,_0xc6211f){return _0x57eee4===_0xc6211f;},'JcqpD':'yQgIH','tIrmD':function(_0x1a15ad,_0x5cea51){return _0x1a15ad(_0x5cea51);},'GSSap':function(_0x2d8ac1,_0x5bae37){return _0x2d8ac1(_0x5bae37);},'tQEAA':function(_0x5e9352,_0x2e1d41){return _0x5e9352(_0x2e1d41);},'HyGdm':function(_0x5b23d2,_0x1584c8){return _0x5b23d2<=_0x1584c8;},'NJfKF':function(_0x5d6086,_0x753467){return _0x5d6086+_0x753467;},'aXmkp':'olxBp','uDiFs':function(_0x2eb1ea,_0x14a5f2){return _0x2eb1ea(_0x14a5f2);},'JDWzs':function(_0x28aead,_0x20729a,_0x4394a3){return _0x28aead(_0x20729a,_0x4394a3);},'vXSwG':_0x1c4615(0x2e0,0x317,0x248,0x24e),'YxRuB':function(_0x54f1af,_0x6161ce){return _0x54f1af===_0x6161ce;},'sLiic':_0x317959(0x303,0x380,0x367,0x28a),'WNWVi':_0x1c4615(0x37c,0x24f,0x22c,0x2c9),'MPBjK':'afAmp','bFhzU':'UxyLO','KfUOJ':'前置前','YxYRa':_0x317959(0x318,0x355,0x265,0x360),'cKFna':_0x1c4615(0x3c4,0x422,0x35b,0x38a),'Vcgtb':_0x1c4615(0x3fb,0x342,0x329,0x3ab),'pTFwn':_0x317959(0x3e6,0x38f,0x494,0x354),'KcZca':function(_0x265e34,_0x1560e4){return _0x265e34===_0x1560e4;},'ZgjcK':_0x317959(0x270,0x20e,0x28a,0x2cf),'DXYvN':_0x317959(0x2e0,0x253,0x258,0x287)+_0x1c4615(0x253,0x23d,0x242,0x258),'YDiBj':_0x1c4615(0x319,0x271,0x3c2,0x308),'PBiCA':_0x1c4615(0x370,0x2ab,0x37e,0x33a)+'用了\x20{修图}\x20标识'+'。','vLMZt':'text','IEcZQ':_0x317959(0x375,0x2fd,0x301,0x3a7),'cuUBz':function(_0x615f4c,_0x16881c){return _0x615f4c!==_0x16881c;},'SGHxS':_0x317959(0x31a,0x31b,0x29d,0x2ad),'ygGPD':'xGXPT','WUXxu':function(_0x100a00,_0x33e1b9){return _0x100a00!==_0x33e1b9;},'sKHxg':_0x317959(0x386,0x3b1,0x43d,0x302),'mGOBp':function(_0x5f11ee,_0x59d04c){return _0x5f11ee(_0x59d04c);},'TFrkA':_0x317959(0x337,0x382,0x3f2,0x3c4),'hmKOe':_0x1c4615(0x297,0x248,0x3a5,0x2d6),'VLJFO':_0x1c4615(0x33a,0x277,0x361,0x319),'cUsqp':function(_0x39eb40,_0x21670a){return _0x39eb40>_0x21670a;},'XIKWp':_0x317959(0x2ca,0x33b,0x22a,0x2a9),'UwVeq':'Fulgr','vYUkZ':'user','OqdSQ':function(_0x1eec77,_0x2e382d){return _0x1eec77(_0x2e382d);},'OZKnD':function(_0x2dedfe,_0x102f93){return _0x2dedfe(_0x102f93);},'ePhoz':function(_0x32c072,_0x51f3c7){return _0x32c072===_0x51f3c7;},'cPKbE':_0x317959(0x3ed,0x38b,0x43e,0x4bf),'wLDHV':function(_0x439867,_0x492e75){return _0x439867+_0x492e75;},'DHQSY':function(_0x6f22,_0x4c7bd4){return _0x6f22+_0x4c7bd4;},'RYyUS':_0x317959(0x33b,0x2cb,0x310,0x2bc),'JCTvC':'/v1/','JiXMP':function(_0x4c83cf,_0x304022){return _0x4c83cf===_0x304022;},'qGjNA':_0x1c4615(0x442,0x39f,0x40c,0x3b3),'OKFMC':_0x317959(0x262,0x1bc,0x28b,0x2ec)+_0x317959(0x3d8,0x4a8,0x496,0x49f)+'ompletions'+'/generate','OEbJD':function(_0x2f9921,_0x47bc45){return _0x2f9921(_0x47bc45);},'rEmms':_0x317959(0x354,0x357,0x38c,0x31f),'GAUcw':function(_0xae67e6,_0x1fb4d9){return _0xae67e6(_0x1fb4d9);},'xbjnn':function(_0x406703,_0x8a074e,_0x561d43){return _0x406703(_0x8a074e,_0x561d43);},'OLEsD':function(_0x367e0e,_0x595674){return _0x367e0e(_0x595674);},'sTMEq':_0x317959(0x341,0x2f1,0x2ba,0x315),'EuLdR':'OTPKy','WuOgM':function(_0x5512da,_0x3ec8b0){return _0x5512da===_0x3ec8b0;},'eGprJ':'LKdYv','HnarO':_0x317959(0x35d,0x2be,0x424,0x3de),'xBFRb':function(_0x134f4f,_0x3541b8){return _0x134f4f===_0x3541b8;},'NbGXi':_0x1c4615(0x2dc,0x1f8,0x1b3,0x26a),'uhspU':function(_0x277a8d,_0x3c9e7c){return _0x277a8d===_0x3c9e7c;},'njmtN':function(_0x217cb8,_0x29263f){return _0x217cb8!==_0x29263f;},'zvTwM':_0x1c4615(0x38f,0x25c,0x2f2,0x32d),'Cqovn':_0x1c4615(0x2d4,0x2d5,0x29d,0x236),'TszAR':_0x1c4615(0x413,0x330,0x435,0x397),'gDGCo':_0x1c4615(0x255,0x225,0x19f,0x266)+_0x317959(0x2fd,0x39e,0x27d,0x242)+_0x1c4615(0x238,0x217,0x2d6,0x2ad)+_0x317959(0x33c,0x3ca,0x379,0x3e0)+_0x1c4615(0x150,0x1bb,0x1fd,0x215),'zRGCL':function(_0x220afe,_0x5b7ada){return _0x220afe(_0x5b7ada);},'RQYnc':'[Banana]\x20S'+'uccessfull'+_0x317959(0x3f1,0x4b4,0x43a,0x44c)+'d\x20base64\x20i'+_0x317959(0x3b4,0x329,0x421,0x3a7)+_0x1c4615(0x2ea,0x368,0x39e,0x2e2),'prvjU':'zblUw','cKhLv':function(_0x19cd13,_0x21db40){return _0x19cd13(_0x21db40);},'TXEdR':'[Banana]\x20D'+_0x317959(0x2fd,0x381,0x378,0x3c0)+_0x317959(0x3ee,0x372,0x3a8,0x4b8)+_0x317959(0x273,0x1f7,0x1d7,0x2d1)+_0x317959(0x2bd,0x32d,0x361,0x354)+'.','KJzJT':function(_0x156b67,_0x3e895b){return _0x156b67(_0x3e895b);},'ZOZUE':function(_0xd5afed,_0x5870fd){return _0xd5afed(_0x5870fd);},'IDSSA':_0x317959(0x37b,0x37a,0x2ec,0x3d6),'qsnbO':'[Banana]\x20S'+_0x317959(0x2eb,0x23c,0x2d8,0x335)+'y\x20converte'+'d\x20Markdown'+_0x317959(0x302,0x346,0x2d2,0x2ed)+_0x1c4615(0x2bd,0x3d1,0x2dc,0x304),'XaDew':function(_0x5488da,_0x2a3bd7){return _0x5488da(_0x2a3bd7);},'hXsPi':_0x317959(0x3a9,0x2da,0x3a0,0x3f9)+_0x1c4615(0x3d7,0x354,0x2dc,0x36b)+_0x1c4615(0x26c,0x1c6,0x19b,0x21e)+_0x1c4615(0x3ce,0x38f,0x380,0x31e)+_0x1c4615(0x40b,0x303,0x320,0x3ad),'WCZGU':function(_0x5a7a36,_0x438805){return _0x5a7a36===_0x438805;},'nEDZq':_0x1c4615(0x2a3,0x2a7,0x279,0x23c),'zHPZv':_0x317959(0x3dc,0x436,0x353,0x409),'TbsDZ':_0x1c4615(0x37e,0x31b,0x3f9,0x38c)+'se\x20did\x20not'+_0x317959(0x306,0x2d9,0x282,0x38b)+_0x1c4615(0x33f,0x316,0x366,0x3ac)+'enAI\x20forma'+'t','hZkWw':'[Banana]\x20I'+_0x317959(0x39c,0x2e6,0x2da,0x339)+_0x1c4615(0x20c,0x336,0x22f,0x269)+_0x1c4615(0x29f,0x264,0x298,0x299),'ZVTAN':function(_0x4ac157,_0x586e68){return _0x4ac157===_0x586e68;},'WhKkE':'TIchR','rwftb':_0x317959(0x355,0x293,0x317,0x412),'JUfIj':'3|2|1|4|0'};_0x2a27af['HzsHJ'](clearLog);const _0x3ac208=taskQueue[_0x317959(0x3d2,0x396,0x45c,0x445)]({'name':_0x2a27af[_0x1c4615(0x150,0x1ac,0x1db,0x21f)](_0x2a27af['wqUlJ'](_0x1a9dcd,'')[_0x317959(0x2b7,0x2cd,0x2aa,0x1ea)](-0x12fa+0xae6+0x4*0x205,-0x65*-0x11+0xc5*0x1f+0x362*-0x9),_0x1a9dcd&&_0x2a27af[_0x317959(0x26c,0x2aa,0x31c,0x214)](_0x1a9dcd[_0x1c4615(0x2b3,0x34e,0x3c6,0x383)],0x611*0x5+0x9d*-0x25+0x1*-0x786)?_0x1c4615(0x3b1,0x320,0x3ac,0x30b):''),'type':TaskType['BANANA'],'prompt':_0x1a9dcd});currentTaskId=_0x3ac208,_0x1a9dcd=processCharacterPrompt(_0x1a9dcd),_0x1a9dcd=await _0x2a27af[_0x1c4615(0x19f,0x246,0x194,0x232)](stripChineseAnnotations,_0x1a9dcd);let _0x2c2c50=_0x1cc891;_0x1cc891=_0x2a27af['tUdEe'](processCharacterPrompt,_0x1cc891),_0x1cc891=await _0x2a27af[_0x1c4615(0x2be,0x21a,0x249,0x232)](stripChineseAnnotations,_0x1cc891),addLog('开始\x20Banana生'+_0x1c4615(0x1e8,0x29e,0x258,0x2a8)+extension_settings[extensionName][_0x1c4615(0x41d,0x2a8,0x427,0x35d)]),_0x2a27af[_0x317959(0x2c1,0x2ef,0x217,0x1fb)](addLog,_0x317959(0x384,0x390,0x3f1,0x414)+'\x20'+(_0x8c93da||'默认')+',\x20高度\x20-\x20'+_0x2a27af[_0x317959(0x2ea,0x316,0x293,0x3ba)](_0x55733e,'默认')),_0x1a9dcd=_0x1cc891&&_0x1cc891['trim']()!==''?_0x1cc891:_0x1a9dcd,_0x2a27af[_0x317959(0x27d,0x1be,0x1f4,0x2db)](addLog,_0x1c4615(0x22d,0x2ec,0x1a3,0x26b)+_0x1a9dcd);let _0x51416c=![];if(_0x1a9dcd[_0x317959(0x3a3,0x403,0x395,0x45d)](_0x317959(0x39f,0x40c,0x2f3,0x35b)+_0x1c4615(0x1bd,0x21b,0x255,0x21a))){if(_0x2a27af[_0x317959(0x3bd,0x3e0,0x375,0x35d)](_0x2a27af[_0x317959(0x3f2,0x381,0x431,0x4b2)],_0x317959(0x2d1,0x2dd,0x237,0x249)))_0x51416c=!![];else{const _0x3a40f8={};_0x3a40f8[_0x317959(0x3fb,0x38d,0x368,0x3cd)]=_0x317959(0x3ae,0x473,0x45e,0x371),_0x3a40f8['content']=_0x3592b6,_0xf9609a[_0x1c4615(0x26a,0x327,0x344,0x2a6)](_0x3a40f8);}}_0x2a27af['tIrmD'](addLog,_0x1c4615(0x3df,0x399,0x2cc,0x360)+'(Divide_ro'+'les):\x20'+_0x51416c);let _0x11c5b0={},_0x11f6d0='',_0x3b9c70='';if(_0x51416c){_0x2a27af['GSSap'](addLog,_0x2a27af['KrjsJ']),_0x11c5b0=_0x2a27af[_0x1c4615(0x2bf,0x30c,0x23b,0x2ce)](parsePromptStringWithCoordinates,_0x1a9dcd),_0x11f6d0=_0x11c5b0[_0x2a27af[_0x317959(0x2cb,0x26f,0x243,0x377)]];for(let _0x3e6b57=0x31d*0x8+-0x1549+-0x39e;_0x2a27af[_0x1c4615(0x219,0x309,0x209,0x256)](_0x3e6b57,0x1f3*0xd+0x3*-0x90b+0x1ce);_0x3e6b57++){_0x11c5b0['Character\x20'+_0x3e6b57+_0x1c4615(0x331,0x32f,0x300,0x390)]&&(_0x3b9c70=_0x2a27af[_0x1c4615(0x2bb,0x2f9,0x3e3,0x325)](_0x2a27af[_0x317959(0x39e,0x444,0x45b,0x440)](_0x3b9c70,',\x20'),_0x11c5b0[_0x1c4615(0x3d3,0x313,0x2fb,0x376)+_0x3e6b57+_0x317959(0x3db,0x489,0x342,0x367)]));}}else _0x2a27af[_0x317959(0x38b,0x3f6,0x32d,0x427)]===_0x2a27af[_0x1c4615(0x33f,0x2d4,0x3ab,0x340)]?(_0x2a27af[_0x317959(0x2ed,0x2e4,0x2fa,0x2b1)](addLog,'标准模式:\x20使用请求'+_0x317959(0x2b8,0x215,0x20c,0x223)),_0x11f6d0=_0x1a9dcd):_0x5d797e=_0x2b0aad+_0x5be87e;let {modifiedPrompt:_0xbc3114,insertions:_0x565ecc}=await _0x2a27af[_0x1c4615(0x295,0x2e8,0x3c1,0x329)](prompt_replace,_0x11f6d0,_0x3b9c70);if(_0x51416c)for(let _0x5b73ad=0x30e*0x3+0x3f1*-0x5+0xa8c;_0x5b73ad<=0x1*0xe41+0x922+-0x175f;_0x5b73ad++){if(_0x2a27af[_0x1c4615(0x368,0x31e,0x3af,0x3a4)]!==_0x317959(0x271,0x305,0x27e,0x274)){if(_0x11c5b0[_0x1c4615(0x3fe,0x41b,0x33c,0x376)+_0x5b73ad+_0x317959(0x3db,0x379,0x3b2,0x30f)]){if(_0x2a27af[_0x1c4615(0x35d,0x44b,0x42e,0x3b4)](_0x317959(0x303,0x2cd,0x256,0x2ae),_0x2a27af[_0x317959(0x3f3,0x3dd,0x47a,0x3dc)]))_0xbc3114=_0x2a27af[_0x317959(0x26a,0x2a9,0x2de,0x24a)](_0xbc3114,'\x20|\x20')+_0x2a27af[_0x317959(0x3aa,0x2e1,0x44f,0x47b)](prompt_replace_for_character,_0x11c5b0[_0x1c4615(0x36a,0x2e4,0x31a,0x376)+_0x5b73ad+_0x1c4615(0x40f,0x3a4,0x3e5,0x390)]);else{const _0x565ff7=_0x2a27af[_0x1c4615(0x2a0,0x29b,0x2e3,0x305)][_0x1c4615(0x23a,0x2ab,0x338,0x2bc)]('|');let _0x1feeed=0x145b+0x1b84+-0x2fdf;while(!![]){switch(_0x565ff7[_0x1feeed++]){case'0':_0x2a27af[_0x1c4615(0x404,0x3b1,0x309,0x382)](_0x36cb68,_0x2a27af[_0x1c4615(0x304,0x238,0x200,0x27b)]);continue;case'1':_0x56ef7e['removeList'+_0x1c4615(0x2c4,0x343,0x31a,0x335)](_0x2a27af[_0x1c4615(0x348,0x3fd,0x3b3,0x348)],_0x448a6b);continue;case'2':_0x5dca44['forEach'](_0x5514bc=>{_0x1adf1d['removeList'+'ener'](_0x5514bc,_0x4f47b2);});continue;case'3':_0x43db84['removeList'+_0x317959(0x380,0x32d,0x2f8,0x339)](_0x15f423['GENERATE_I'+_0x1c4615(0x352,0x251,0x345,0x2f4)+'ST'],_0x2b7f71);continue;case'4':_0x559555['initialize'+_0x1c4615(0x2dd,0x21c,0x2f8,0x288)+_0x317959(0x380,0x30c,0x401,0x374)]=![];continue;}break;}}}}else _0x279efb[_0x490f0f][_0x317959(0x3d0,0x3a6,0x3b1,0x37f)][_0x1c4615(0x3c7,0x37b,0x332,0x35b)]=-0x3*-0x52d+-0x121c+0x296,_0x2a27af[_0x1c4615(0x3bb,0x2ed,0x33d,0x382)](_0x27edfe,_0x317959(0x3a7,0x2de,0x42b,0x40d)+_0x317959(0x31b,0x29b,0x38f,0x251)+_0x2fdb75[_0x1565de]['banana'][_0x317959(0x3a6,0x46b,0x369,0x382)]);}const _0x33797d=extension_settings[extensionName]['banana'],{model:_0x34fdff,apiUrl:_0x48ed7e,apiKey:_0x2d8a46,conversationPresets:_0x532240,conversationPresetId:_0x58fba3,editPresetId:_0x944c1e,aspectRatio:_0x4eeff9}=_0x33797d;addLog(_0x317959(0x3e0,0x371,0x411,0x31c)+_0x317959(0x398,0x2e4,0x357,0x450)+_0x317959(0x38a,0x3f5,0x339,0x438)+_0x1c4615(0x301,0x353,0x224,0x2de)+_0x317959(0x3c0,0x416,0x483,0x464)+_0x34fdff);let _0x1658ca,_0x134284;if(_0x34fdff['startsWith'](_0x2a27af[_0x1c4615(0x3d0,0x339,0x283,0x342)])){if(_0x2a27af[_0x1c4615(0x2af,0x3ad,0x3d4,0x372)](_0x2a27af[_0x1c4615(0x382,0x3ab,0x356,0x2e3)],_0x2a27af[_0x317959(0x35b,0x292,0x3d6,0x399)])){const _0x304c2a=_0x2a27af['wicpR'][_0x1c4615(0x312,0x2b3,0x225,0x2bc)]('|');let _0x51f3fc=0x89*-0x11+-0x106c+-0x2f*-0x8b;while(!![]){switch(_0x304c2a[_0x51f3fc++]){case'0':_0x13e530=null;continue;case'1':_0x39508e[_0x1c4615(0x26e,0x24d,0x1d7,0x23a)](_0x2a27af[_0x317959(0x29f,0x289,0x291,0x36c)],_0x17dc94);continue;case'2':throw _0x562e6b;continue;case'3':if(_0x570633[_0x317959(0x2b2,0x2b7,0x381,0x265)]===_0x2a27af['pwKhw']){}else _0xe54f75[_0x317959(0x399,0x331,0x3d0,0x428)+'sk'](_0x503a1f,![]);continue;case'4':_0x2a27af[_0x1c4615(0x372,0x35f,0x42a,0x382)](_0x3e4e5c,_0x1c4615(0x355,0x338,0x36d,0x37a)+_0x1c4615(0x252,0x2b1,0x291,0x2d5)+':\x20'+_0x48c8ef[_0x317959(0x2b2,0x203,0x2b7,0x32c)]);continue;}break;}}else{_0x1658ca='/v1beta/mo'+_0x1c4615(0x29a,0x363,0x3a4,0x314)+_0x34fdff;const _0x323fbc={};_0x323fbc['fixedPromp'+'t']='';const _0x472c97=_0x532240[_0x58fba3]||_0x323fbc,_0x4b1607=[_0x472c97[_0x317959(0x28a,0x31f,0x1d0,0x2a7)+'t'],_0x565ecc[_0x2a27af[_0x1c4615(0x330,0x3af,0x3b5,0x2e5)]],_0x565ecc[_0x2a27af[_0x1c4615(0x2fa,0x328,0x37e,0x2b6)]],_0xbc3114,_0x565ecc[_0x2a27af[_0x317959(0x390,0x407,0x3d1,0x33e)]],_0x565ecc[_0x2a27af[_0x1c4615(0x365,0x3fd,0x3b0,0x332)]],_0x472c97[_0x1c4615(0x29a,0x3fa,0x34c,0x356)+_0x1c4615(0x350,0x307,0x382,0x381)],_0x565ecc[_0x2a27af[_0x317959(0x2ec,0x3b2,0x399,0x2b1)]]]['filter'](Boolean)[_0x317959(0x3be,0x2f3,0x43d,0x3dd)](',\x20');_0x2a27af['qHjbZ'](addLog,'正面提示词:\x20'+_0x4b1607);const _0x315f21={};_0x315f21[_0x317959(0x3b1,0x31e,0x3db,0x2e2)]=_0x4b1607;const _0x3f4fee={};_0x3f4fee[_0x1c4615(0x1ee,0x251,0x21f,0x22a)+'t']=0x1,_0x3f4fee[_0x1c4615(0x297,0x3cf,0x394,0x352)+'o']=_0x4eeff9;const _0x264377={};_0x264377['instances']=[_0x315f21],_0x264377[_0x317959(0x382,0x2f6,0x357,0x438)]=_0x3f4fee,_0x134284=_0x264377,_0x2a27af[_0x1c4615(0x3e1,0x3cc,0x42b,0x35f)](addLog,_0x317959(0x2fc,0x3c6,0x318,0x388)+_0x1c4615(0x2bd,0x37b,0x284,0x34f)+'n\x20payload\x20'+_0x317959(0x2da,0x212,0x35b,0x35c)+_0x1c4615(0x281,0x295,0x39b,0x2fc)+_0x4b1607);}}else{if(_0x2a27af[_0x317959(0x31f,0x3f2,0x380,0x256)](_0x2a27af[_0x1c4615(0x38c,0x306,0x387,0x379)],_0x2a27af[_0x317959(0x3c4,0x435,0x44f,0x33b)])){_0x1658ca=_0x2a27af[_0x317959(0x2e6,0x2f9,0x228,0x263)];let _0xbba3be;if(_0x1cc891[_0x317959(0x3a3,0x412,0x3b6,0x3ba)](_0x2a27af['ccCxl'])){if(_0x2a27af[_0x317959(0x2f6,0x2f8,0x280,0x371)]===_0x2a27af['YDiBj']){addLog(_0x2a27af['PBiCA']);const _0xd764af=_0x2a27af[_0x1c4615(0x20b,0x1fc,0x290,0x213)](_0x944c1e,'默认'),_0x46c519={};_0x46c519[_0x1c4615(0x23c,0x31c,0x258,0x25c)+'on']=[],_0x46c519[_0x1c4615(0x2a7,0x1ca,0x2a8,0x23f)+'t']='',_0xbba3be=_0x532240[_0xd764af]||_0x46c519,addLog(_0x1c4615(0x2f9,0x30a,0x1da,0x259)+_0x317959(0x322,0x3ea,0x3ad,0x26a)+_0xd764af+'\x22');}else{_0x2a27af[_0x1c4615(0x3e5,0x35c,0x36c,0x382)](_0x495d35,_0x2a27af[_0x1c4615(0x450,0x3e9,0x3cf,0x39e)]),_0x1fa451=_0x2a27af[_0x317959(0x3cd,0x334,0x3ec,0x392)](_0x48116c,_0x476f20),_0x1cb3b8=_0x50bd67[_0x2a27af[_0x1c4615(0x216,0x2bf,0x262,0x280)]];for(let _0xdfc0d=0x1c2c+0x1*-0x2407+-0x2*-0x3ee;_0xdfc0d<=-0x121*0x1+-0x139*0x1+-0x25e*-0x1;_0xdfc0d++){_0x2fd84e[_0x317959(0x3c1,0x3a0,0x494,0x3d2)+_0xdfc0d+_0x317959(0x3db,0x3b9,0x4ab,0x430)]&&(_0x34417c=_0x2a27af[_0x317959(0x2d7,0x272,0x2e0,0x3a7)](_0x24f559+',\x20',_0x574511[_0x1c4615(0x2c6,0x301,0x34b,0x376)+_0xdfc0d+_0x317959(0x3db,0x480,0x437,0x383)]));}}}else{const _0x3942b3={};_0x3942b3[_0x1c4615(0x214,0x32c,0x21b,0x25c)+'on']=[],_0x3942b3[_0x1c4615(0x1cc,0x19c,0x2f7,0x23f)+'t']='',_0xbba3be=_0x532240[_0x58fba3]||_0x3942b3;}const _0x1839e6=[_0xbba3be[_0x1c4615(0x2bf,0x187,0x27f,0x23f)+'t'],_0x565ecc[_0x2a27af[_0x317959(0x330,0x39e,0x339,0x3c2)]],_0x565ecc['前置后'],_0xbc3114,_0x565ecc[_0x1c4615(0x37c,0x3c5,0x324,0x38a)],_0x565ecc[_0x2a27af[_0x317959(0x37d,0x2fe,0x360,0x40e)]],_0xbba3be[_0x1c4615(0x344,0x32f,0x303,0x356)+_0x1c4615(0x3fe,0x3e9,0x3de,0x381)],_0x565ecc[_0x2a27af['pTFwn']]][_0x317959(0x31d,0x36a,0x31d,0x3ea)](Boolean)[_0x1c4615(0x427,0x2e0,0x2d9,0x373)](',\x20');_0x2a27af['lVkgz'](addLog,_0x317959(0x300,0x3b2,0x2ac,0x2e2)+_0x1839e6);const _0x49249a={};_0x49249a[_0x317959(0x3fb,0x343,0x4ab,0x33d)]='user',_0x49249a['content']=[];const _0x247e02={};_0x247e02[_0x317959(0x3fb,0x43f,0x3f7,0x4b6)]=_0x1c4615(0x1e5,0x350,0x2fd,0x27f),_0x247e02[_0x1c4615(0x27c,0x187,0x184,0x248)]=[];const _0x5d312c=_0xbba3be[_0x317959(0x2a7,0x215,0x35e,0x218)+'on'][_0x1c4615(0x24c,0x239,0x26c,0x2ac)](_0x5970db=>[_0x49249a,_0x247e02])[_0x1c4615(0x3b5,0x2e3,0x3b2,0x2f7)]();let _0x279acc=-0x685+0x265*-0xb+-0x106e*-0x2;for(const _0x37db2a of _0xbba3be[_0x317959(0x2a7,0x25c,0x2d4,0x290)+'on']){if(_0x37db2a['user']?.['text'])_0x5d312c[_0x279acc][_0x317959(0x293,0x2b1,0x357,0x206)][_0x1c4615(0x256,0x24e,0x340,0x2a6)]({'type':_0x2a27af[_0x317959(0x26f,0x33c,0x2c6,0x19e)],'text':_0x37db2a[_0x317959(0x3ae,0x3df,0x37b,0x41f)]['text']});const _0x1aa4fb=await getImageFromTurnData(_0x37db2a[_0x1c4615(0x309,0x417,0x339,0x363)]);if(_0x1aa4fb)_0x5d312c[_0x279acc][_0x317959(0x293,0x301,0x35f,0x2a7)][_0x1c4615(0x1da,0x320,0x2c1,0x2a6)]({'type':_0x317959(0x375,0x42f,0x355,0x304),'image_url':{'url':_0x1aa4fb}});_0x279acc++;if(_0x37db2a['model']?.[_0x317959(0x3ba,0x348,0x3aa,0x370)])_0x5d312c[_0x279acc][_0x317959(0x293,0x1e9,0x359,0x299)][_0x317959(0x2f1,0x3be,0x231,0x2e8)]({'type':_0x2a27af[_0x1c4615(0x22f,0x19c,0x28d,0x224)],'text':_0x37db2a['model'][_0x1c4615(0x3d5,0x411,0x359,0x36f)]});const _0x1f4552=await _0x2a27af[_0x1c4615(0x200,0x27c,0x288,0x232)](getImageFromTurnData,_0x37db2a[_0x1c4615(0x2ad,0x1f0,0x274,0x2af)]);if(_0x1f4552)_0x5d312c[_0x279acc]['content']['push']({'type':_0x2a27af['IEcZQ'],'image_url':{'url':_0x1f4552}});_0x279acc++;}if(!_0x1cc891[_0x317959(0x3a3,0x34e,0x2d2,0x3da)](_0x2a27af[_0x1c4615(0x2df,0x3e3,0x372,0x38f)])){if(_0x2a27af[_0x1c4615(0x300,0x329,0x3a7,0x2fe)](_0x2a27af[_0x1c4615(0x312,0x3c4,0x38c,0x361)],_0x2a27af[_0x317959(0x3ac,0x315,0x473,0x43a)])){const _0x3270ff={};_0x3270ff[_0x317959(0x324,0x32a,0x371,0x3be)]=_0x101088;const _0x4bead8={};_0x4bead8[_0x1c4615(0x244,0x314,0x236,0x285)]=_0x1c4615(0x2cb,0x31d,0x2e7,0x32a),_0x4bead8[_0x1c4615(0x341,0x2f9,0x26c,0x32a)]=_0x3270ff,_0x32ffb6[_0x1c4615(0x302,0x1e7,0x2d9,0x2a6)](_0x4bead8),_0x2a27af['tUdEe'](_0x2ea448,_0x1c4615(0x31e,0x446,0x46f,0x3b5)+'图模式：已添加待修改'+'的图片');}else{const _0x37ff7e=extension_settings[extensionName][_0x317959(0x2f4,0x2fd,0x391,0x2fb)+'acterPrese'+'ts']||{};for(const _0x44c17 in _0x37ff7e){if('xGXPT'===_0x2a27af[_0x1c4615(0x2c8,0x185,0x2a6,0x23b)]){const _0x265d28=_0x37ff7e[_0x44c17],_0x37c0b6=(_0x265d28['triggers']||'')[_0x317959(0x307,0x2c5,0x2e2,0x34d)]('|')[_0x317959(0x31d,0x2a2,0x394,0x334)](_0x18a0b4=>_0x18a0b4[_0x317959(0x3ad,0x44c,0x46b,0x417)]()!=='');for(const _0xc532c2 of _0x37c0b6){if(_0x1839e6[_0x1c4615(0x3c2,0x2b5,0x32c,0x322)+'e']()[_0x1c4615(0x420,0x31c,0x3a7,0x358)](_0xc532c2['toLowerCas'+'e']())){if(_0x2a27af[_0x1c4615(0x21d,0x2de,0x34f,0x2b9)]('ODbuW',_0x2a27af[_0x317959(0x2e2,0x25e,0x2e5,0x2a4)])){const _0x4f892b=_0x57743a?function(){function _0x29ce87(_0x124dba,_0x5db470,_0x22ea93,_0x1a370d){return _0x1c4615(_0x22ea93,_0x5db470-0x72,_0x22ea93-0x1e,_0x5db470- -0x32d);}if(_0x530bb3){const _0x5775f3=_0x15ff8f[_0x29ce87(-0xb2,-0xd6,-0xb3,-0x6f)](_0x494613,arguments);return _0x35f476=null,_0x5775f3;}}:function(){};return _0x163c98=![],_0x4f892b;}else{_0x2a27af[_0x317959(0x36f,0x383,0x347,0x408)](addLog,_0x1c4615(0x2a8,0x439,0x3ad,0x37a)+'ound\x20match'+_0x317959(0x36c,0x2b9,0x2eb,0x2cd)+_0x1c4615(0x307,0x32e,0x29a,0x2f9)+_0xc532c2+(_0x317959(0x2d4,0x391,0x35b,0x36e)+_0x1c4615(0x234,0x200,0x2aa,0x2be))+_0x44c17+'\x22.');const _0xa6681c=_0x265d28['conversati'+'on'];if(_0xa6681c){if(_0x2a27af['YxRuB'](_0x2a27af[_0x317959(0x2ba,0x284,0x30d,0x232)],_0x2a27af[_0x317959(0x2ba,0x361,0x309,0x1e7)])){const _0x3d7f49=[];if(_0xa6681c[_0x317959(0x3ae,0x3bb,0x466,0x391)]&&_0xa6681c[_0x317959(0x3ae,0x418,0x3c9,0x3f7)][_0x317959(0x3ba,0x3c1,0x3f9,0x396)])_0x3d7f49['push']({'type':_0x2a27af[_0x317959(0x26f,0x30c,0x29c,0x254)],'text':_0xa6681c['user'][_0x317959(0x3ba,0x42f,0x3a5,0x2fd)]});const _0x2a3f0c=await _0x2a27af['SeMxd'](getImageFromTurnData,_0xa6681c[_0x1c4615(0x3ee,0x38f,0x413,0x363)]);if(_0x2a3f0c)_0x3d7f49[_0x1c4615(0x256,0x2ee,0x24f,0x2a6)]({'type':_0x2a27af[_0x1c4615(0x2bd,0x295,0x1b5,0x25e)],'image_url':{'url':_0x2a3f0c}});if(_0x2a27af[_0x317959(0x26c,0x1ba,0x1d0,0x1e8)](_0x3d7f49['length'],-0x5*-0xe+-0x10*0xca+0xc5a)){if(_0x2a27af[_0x317959(0x30c,0x252,0x3b3,0x318)](_0x2a27af[_0x317959(0x2ef,0x32d,0x30d,0x315)],_0x2a27af[_0x317959(0x3b0,0x3c6,0x35c,0x463)])){_0x46ca4a(_0x1c4615(0x38a,0x3c6,0x360,0x392)+'magen\x20模型不支'+_0x317959(0x2c8,0x33a,0x282,0x2d0)+'接请求'),_0x27b15e=_0x20f7d4;const _0x6fba68={};_0x6fba68[_0x317959(0x279,0x235,0x1ba,0x33b)+'pe']=_0x2a27af[_0x317959(0x261,0x1c5,0x303,0x281)],_0x6fba68[_0x317959(0x28c,0x277,0x1cf,0x2bd)+'ion']=_0x317959(0x2e5,0x328,0x219,0x36c)+_0x3a2e9e,_0x42c84c=_0x6fba68,_0x18c620=_0x12378c;}else{const _0x5eabc1={};_0x5eabc1[_0x317959(0x3fb,0x465,0x357,0x3df)]=_0x317959(0x3ae,0x353,0x3fd,0x2f3),_0x5eabc1[_0x1c4615(0x192,0x2e3,0x176,0x248)]=_0x3d7f49,_0x5d312c[_0x1c4615(0x349,0x30f,0x29e,0x2a6)](_0x5eabc1);}}const _0x39abed=[];if(_0xa6681c[_0x317959(0x2fa,0x273,0x2ba,0x2b3)]&&_0xa6681c[_0x317959(0x2fa,0x37e,0x2d9,0x34c)][_0x1c4615(0x3e4,0x2cf,0x3b2,0x36f)])_0x39abed[_0x1c4615(0x365,0x2a6,0x1e5,0x2a6)]({'type':_0x2a27af[_0x1c4615(0x2c3,0x256,0x277,0x224)],'text':_0xa6681c['model'][_0x317959(0x3ba,0x46e,0x3c3,0x329)]});const _0x4efe3f=await _0x2a27af[_0x317959(0x319,0x328,0x2cc,0x2e4)](getImageFromTurnData,_0xa6681c[_0x1c4615(0x338,0x2cb,0x34d,0x2af)]);if(_0x4efe3f)_0x39abed[_0x317959(0x2f1,0x32d,0x275,0x2d9)]({'type':'image_url','image_url':{'url':_0x4efe3f}});if(_0x2a27af[_0x317959(0x2fe,0x331,0x33e,0x324)](_0x39abed[_0x1c4615(0x3be,0x3a0,0x322,0x383)],-0xfe*0x13+-0xc50+0x1f2a)){const _0x2a0f8c={};_0x2a0f8c[_0x317959(0x3fb,0x3e4,0x386,0x49a)]=_0x2a27af[_0x317959(0x2ff,0x2a2,0x2c1,0x373)],_0x2a0f8c[_0x317959(0x293,0x323,0x20a,0x1cf)]=_0x39abed,_0x5d312c[_0x317959(0x2f1,0x255,0x31f,0x2e2)](_0x2a0f8c);}}else _0x11e2d0['on'](_0x35e8ca[_0x1c4615(0x333,0x3d7,0x2f9,0x371)+_0x317959(0x33f,0x354,0x2b1,0x2ca)+'ST'],_0x1edbf2),_0x553c79['on'](_0x2a27af[_0x317959(0x393,0x37a,0x3ee,0x41c)],_0x558083),_0x2a27af[_0x317959(0x2c1,0x342,0x283,0x2c8)](_0x3c3ec0,_0x2a27af['rWTUb']);}break;}}}}else _0x363918[_0x1c4615(0x43c,0x425,0x434,0x376)+_0x43160c+'\x20Prompt']&&(_0x27af44=_0x2a27af['qptxt'](_0x24f98c+'\x20|\x20',_0x249883(_0x33b7bf[_0x317959(0x3c1,0x300,0x426,0x34b)+_0xe06c64+'\x20Prompt'])));}}}if(!_0x1cc891[_0x317959(0x3a3,0x411,0x452,0x3b7)](_0x2a27af[_0x317959(0x3da,0x408,0x407,0x46b)])){const _0x191f6a={};_0x191f6a[_0x1c4615(0x1f0,0x2ca,0x1cc,0x285)]='text',_0x191f6a['text']=_0x1839e6;const _0x29fa92={};_0x29fa92[_0x1c4615(0x2ff,0x429,0x32f,0x3b0)]='user',_0x29fa92[_0x1c4615(0x2ea,0x309,0x2c7,0x248)]=[_0x191f6a],_0x5d312c[_0x1c4615(0x256,0x2c4,0x35e,0x2a6)](_0x29fa92);}else{const _0x41d15c=[],_0x5938a7=_0x2a27af['wqUlJ'](_0x31c967,_0x1839e6),_0x239e15=[_0xbba3be[_0x1c4615(0x185,0x2d0,0x1cc,0x23f)+'t'],_0x5938a7,_0xbba3be[_0x317959(0x3a1,0x3d1,0x37d,0x36c)+'mpt']][_0x1c4615(0x2d5,0x2a9,0x29e,0x2d2)](Boolean)[_0x1c4615(0x386,0x2a2,0x38f,0x373)](',\x20'),_0x1ea8ce={};_0x1ea8ce['type']=_0x317959(0x3ba,0x304,0x2f3,0x3e7),_0x1ea8ce[_0x1c4615(0x42b,0x2d8,0x3ea,0x36f)]=_0x239e15,_0x41d15c['push'](_0x1ea8ce);if(_0x3b448d){if(_0x1c4615(0x40c,0x2ab,0x3ba,0x374)!==_0x2a27af[_0x1c4615(0x237,0x31e,0x296,0x270)])_0x3c778b=_0x2a27af[_0x1c4615(0x283,0x365,0x3e7,0x344)](_0x2a27af['FedcV'](_0x420f33,_0x2a27af['vPmbf']),_0x2a27af['tUdEe'](_0x34138b,_0x479756[_0x1c4615(0x2d3,0x354,0x440,0x376)+_0x87b25a+_0x1c4615(0x2d8,0x431,0x3f4,0x390)]));else{const _0x48644a={};_0x48644a[_0x1c4615(0x27a,0x370,0x25d,0x2d9)]=_0x3b448d;const _0x175323={};_0x175323[_0x317959(0x2d0,0x280,0x344,0x2cb)]='image_url',_0x175323[_0x1c4615(0x33e,0x2e8,0x323,0x32a)]=_0x48644a,_0x41d15c[_0x1c4615(0x253,0x25a,0x36c,0x2a6)](_0x175323),addLog(_0x317959(0x400,0x4af,0x402,0x368)+_0x1c4615(0x221,0x247,0x1dc,0x292)+_0x1c4615(0x330,0x2c7,0x33e,0x2ba));}}const _0x5033a0={};_0x5033a0['role']=_0x2a27af[_0x1c4615(0x30b,0x3d1,0x3da,0x331)],_0x5033a0['content']=_0x41d15c,_0x5d312c[_0x317959(0x2f1,0x38b,0x22a,0x339)](_0x5033a0),_0x2a27af['OqdSQ'](addLog,'[Banana]\x20修'+_0x1c4615(0x210,0x268,0x1d6,0x249)+_0x239e15);}const _0x2102f9={};_0x2102f9[_0x317959(0x39d,0x373,0x311,0x42d)+'o']=_0x4eeff9;const _0x596ff1={};_0x596ff1['imageConfi'+'g']=_0x2102f9,_0x134284={'model':_0x34fdff,'messages':_0x5d312c[_0x317959(0x31d,0x3dd,0x33c,0x24c)](_0x3bb7c6=>_0x3bb7c6[_0x317959(0x293,0x295,0x1d6,0x20c)][_0x1c4615(0x414,0x351,0x314,0x383)]>-0x91b+-0xebb+0x3*0x7f2),'config':_0x596ff1},_0x2a27af[_0x1c4615(0x373,0x41c,0x31f,0x393)](addLog,_0x317959(0x2fc,0x2f9,0x2b3,0x23c)+_0x1c4615(0x2b7,0x23c,0x266,0x2c3)+_0x1c4615(0x1d9,0x2b8,0x239,0x290)+'oad\x20with\x20'+_0x134284['messages'][_0x317959(0x3ce,0x35d,0x36c,0x406)]+_0x1c4615(0x2a8,0x31a,0x343,0x320));}else{const _0x17aa02={};_0x17aa02['User-Agent']=_0x2a27af[_0x317959(0x2b3,0x292,0x249,0x251)],_0x17aa02[_0x317959(0x3f4,0x329,0x496,0x33b)]=_0x2a27af['TdJum'];const _0x4f6ee4=_0x17aa02;return _0xbffda1&&(_0x4f6ee4[_0x2a27af['uqGlL']]=_0xd0ca9d),_0x578d4c&&(_0x4f6ee4[_0x317959(0x28c,0x2cf,0x26c,0x353)+_0x317959(0x3a5,0x376,0x384,0x314)]=_0x460783),_0x4f6ee4;}}let _0x56f9c3=_0x48ed7e[_0x1c4615(0x329,0x463,0x368,0x3a0)](/\/$/,''),_0x325c4a;_0x56f9c3[_0x317959(0x263,0x23a,0x295,0x1a7)](_0x1c4615(0x272,0x347,0x295,0x2f0))||_0x56f9c3[_0x317959(0x3a3,0x3c6,0x347,0x454)](_0x1c4615(0x2d8,0x449,0x2f2,0x377))?_0x2a27af['ePhoz'](_0x2a27af[_0x1c4615(0x291,0x37d,0x3b9,0x323)],_0x317959(0x328,0x3e0,0x2c1,0x330))?_0x2a27af[_0x1c4615(0x35b,0x346,0x3c0,0x382)](_0x12937d,_0x1c4615(0x2df,0x1df,0x309,0x27c)+'库'):_0x325c4a=_0x2a27af[_0x1c4615(0x3c4,0x2ed,0x2d7,0x2fa)](_0x56f9c3,_0x1658ca):_0x325c4a=_0x2a27af[_0x317959(0x3e3,0x428,0x45b,0x3f0)](_0x2a27af['PHcKr'](_0x56f9c3,_0x2a27af['RYyUS']),_0x1658ca);_0x325c4a=_0x325c4a[_0x1c4615(0x2da,0x2fa,0x3e5,0x3a0)](/\/v1\/v1\//g,_0x2a27af[_0x1c4615(0x1ae,0x20b,0x28b,0x21b)]);const _0xf57eb2=extension_settings[extensionName][_0x317959(0x3a8,0x3c6,0x3cf,0x43f)];let _0x55883e,_0x5eaf15,_0x2a01fa;if(_0x2a27af[_0x1c4615(0x350,0x212,0x345,0x28d)](_0xf57eb2,_0x1c4615(0x394,0x2af,0x2c8,0x32f))){if(_0x2a27af[_0x317959(0x3ff,0x4c7,0x338,0x48d)]('nOfbZ',_0x2a27af[_0x317959(0x3a0,0x320,0x36e,0x349)])){let _0x5d4dda=_0x56f9c3;!_0x5d4dda[_0x317959(0x263,0x30f,0x211,0x1c5)](_0x1c4615(0x2e2,0x355,0x33f,0x2f0))&&!_0x5d4dda['includes'](_0x2a27af[_0x1c4615(0x2c9,0x14a,0x17a,0x21b)])&&(_0x5d4dda=_0x2a27af[_0x1c4615(0x304,0x472,0x3cd,0x3a1)](_0x5d4dda,_0x2a27af[_0x317959(0x2e1,0x329,0x2b4,0x3aa)]));_0x5d4dda=_0x5d4dda[_0x1c4615(0x401,0x30c,0x438,0x3a0)](/\/v1\/$/,_0x1c4615(0x336,0x299,0x228,0x2f0)),_0x55883e=_0x2a27af[_0x1c4615(0x362,0x391,0x293,0x303)],_0x5eaf15=_0x2a27af[_0x317959(0x30a,0x2b0,0x2bc,0x39d)](getRequestHeaders,window[_0x317959(0x2bf,0x1fb,0x376,0x20d)]);const _0x41a76c={};_0x41a76c[_0x1c4615(0x1d2,0x263,0x2bc,0x29d)+'etion_sour'+'ce']=_0x2a27af[_0x1c4615(0x172,0x25f,0x202,0x212)],_0x41a76c['custom_url']=_0x5d4dda,_0x41a76c[_0x1c4615(0x2a9,0x236,0x30d,0x255)+'lude_heade'+'rs']=_0x1c4615(0x27c,0x1ce,0x1d7,0x241)+'ion:\x20\x22Bear'+_0x1c4615(0x1fc,0x305,0x21c,0x25b)+_0x2d8a46+'\x22',_0x41a76c['model']=_0x34fdff,_0x41a76c[_0x1c4615(0x1f8,0x338,0x272,0x279)]=_0x134284['messages'],_0x41a76c[_0x317959(0x2c5,0x2fe,0x317,0x24b)]=![],_0x2a01fa=_0x41a76c;if(_0x34fdff['startsWith'](_0x2a27af[_0x1c4615(0x290,0x298,0x2b4,0x342)])){addLog('[Banana]\x20I'+_0x317959(0x32b,0x34d,0x2fc,0x2a5)+_0x317959(0x2c8,0x295,0x369,0x253)+_0x317959(0x2c2,0x331,0x35d,0x253)),_0x55883e=_0x325c4a;const _0x526bcd={};_0x526bcd[_0x317959(0x279,0x236,0x226,0x334)+'pe']=_0x1c4615(0x237,0x2ee,0x3a8,0x2e1)+_0x1c4615(0x2a1,0x304,0x2d4,0x234),_0x526bcd[_0x317959(0x28c,0x2f9,0x27b,0x1c4)+_0x317959(0x3a5,0x473,0x3b2,0x438)]=_0x1c4615(0x208,0x2ca,0x21b,0x29a)+_0x2d8a46,_0x5eaf15=_0x526bcd,_0x2a01fa=_0x134284;}_0x2a27af[_0x1c4615(0x37a,0x2bb,0x32e,0x338)](addLog,_0x317959(0x2a4,0x2ed,0x308,0x2d9)+'用酒馆代理模式');}else{if(_0xea917b['initialize'+_0x1c4615(0x305,0x1e5,0x328,0x288)+_0x1c4615(0x279,0x36a,0x3b1,0x335)]){const _0x42dbaf=_0x2a27af[_0x317959(0x282,0x1fa,0x310,0x1fa)][_0x317959(0x307,0x24f,0x338,0x284)]('|');let _0x415003=-0xa4*0x39+-0x1e5a+-0xb25*-0x6;while(!![]){switch(_0x42dbaf[_0x415003++]){case'0':_0x3a9eac[_0x1c4615(0x27d,0x2d3,0x278,0x2fd)](_0x17a9e7=>{function _0xc40528(_0x103770,_0x2c8315,_0x49a0b1,_0x56c699){return _0x317959(_0x103770- -0xd5,_0x2c8315-0x168,_0x49a0b1-0xed,_0x2c8315);}_0x1d4e52['removeList'+_0xc40528(0x2ab,0x1ff,0x325,0x2a4)](_0x17a9e7,_0x5b4d1c);});continue;case'1':_0x5dbf45['removeList'+_0x317959(0x380,0x420,0x443,0x42a)](_0x2a27af[_0x1c4615(0x2f6,0x396,0x27d,0x348)],_0x5ac3e9);continue;case'2':_0x2a27af['qHjbZ'](_0x1cdba9,_0x2a27af[_0x1c4615(0x2bc,0x21f,0x30d,0x27b)]);continue;case'3':_0x443181['initialize'+_0x1c4615(0x212,0x1f4,0x232,0x288)+_0x1c4615(0x3e9,0x2ee,0x27e,0x335)]=![];continue;case'4':_0x171952[_0x317959(0x26e,0x2b1,0x1f9,0x1a1)+_0x1c4615(0x26c,0x3b9,0x30e,0x335)](_0x4080aa['GENERATE_I'+_0x317959(0x33f,0x32c,0x322,0x279)+'ST'],_0x1a935a);continue;}break;}}}}else _0x55883e=_0x325c4a,_0x5eaf15=_0x2a27af[_0x317959(0x3ea,0x3cc,0x334,0x364)](getDirectHeaders,_0x2a27af[_0x317959(0x261,0x2c5,0x2a8,0x2ff)],_0x1c4615(0x30e,0x349,0x1c9,0x29a)+_0x2d8a46),_0x2a01fa=_0x134284,_0x2a27af['tIrmD'](addLog,_0x1c4615(0x2b4,0x277,0x2f4,0x259)+_0x1c4615(0x2a9,0x373,0x205,0x2bd));_0x2a27af[_0x1c4615(0x29a,0x1fa,0x26c,0x2c5)](addLog,'[Banana]\x20S'+_0x317959(0x3f0,0x327,0x483,0x495)+_0x1c4615(0x253,0x246,0x26d,0x26e)+_0x55883e);function _0x317959(_0x39467e,_0x43bc0d,_0x2c898b,_0x40237b){return _0x2916(_0x39467e-0xe3,_0x40237b);}function _0x1c4615(_0x37345b,_0x151aaf,_0x116464,_0x3b210e){return _0x2916(_0x3b210e-0x98,_0x37345b);}addLog(_0x317959(0x3d1,0x3c8,0x31f,0x33f)+'ayload:\x20'+JSON[_0x1c4615(0x2c4,0x234,0x23e,0x2a7)](_0x2a01fa,null,0xa67+0x9b7+-0xa0e*0x2));try{taskQueue[_0x317959(0x30f,0x309,0x24d,0x248)+'us'](_0x3ac208,_0x317959(0x2ce,0x285,0x28b,0x315));const _0x1216df=await _0x2a27af[_0x1c4615(0x3e1,0x286,0x296,0x329)](fetch,_0x55883e,{'method':_0x2a27af['sTMEq'],'headers':_0x5eaf15,'body':JSON[_0x1c4615(0x2d4,0x24d,0x23b,0x2a7)](_0x2a01fa)});if(!_0x1216df['ok']){if(_0x2a27af[_0x317959(0x2cd,0x398,0x243,0x277)]===_0x2a27af['EuLdR']){const _0x277639=await _0x1216df[_0x1c4615(0x3b8,0x2ee,0x34f,0x36f)]();throw new Error(_0x317959(0x3c9,0x3a5,0x472,0x317)+_0x317959(0x3cf,0x35a,0x429,0x47a)+_0x1c4615(0x263,0x2b0,0x2c3,0x32b)+'\x20'+_0x1216df['status']+':\x20'+_0x277639);}else _0x4a5e94=_0x396218[_0x317959(0x3e8,0x437,0x446,0x4a4)](_0x2a27af['ccCxl'],'');}const _0x1edfd8=await _0x1216df[_0x317959(0x295,0x27d,0x2ca,0x2c2)]();let _0x7fc232='';const _0x570863=_0x1edfd8[_0x317959(0x3c6,0x444,0x341,0x2f8)];if(_0x570863&&_0x2a27af[_0x317959(0x26c,0x2d3,0x1ca,0x29d)](_0x570863['length'],0x5bf*0x1+0xc4b+-0x120a)){if(_0x2a27af[_0x317959(0x27e,0x1f1,0x228,0x281)](_0x317959(0x38c,0x3f4,0x3a3,0x398),_0x2a27af[_0x1c4615(0x24b,0x1b6,0x21c,0x244)])){const _0x2a96f1=_0x570863[0x2689+0x1b1*0xb+-0x3924][_0x317959(0x2b2,0x28e,0x364,0x22d)]?.['content'];if(Array[_0x1c4615(0x238,0x1b3,0x324,0x260)](_0x2a96f1))for(const _0x102a66 of _0x2a96f1){if(_0x2a27af['YxRuB'](_0x102a66['type'],_0x2a27af[_0x317959(0x2a9,0x1e3,0x334,0x2b5)])&&_0x102a66[_0x317959(0x375,0x3cd,0x2e1,0x3ce)]){if(_0x2a27af[_0x1c4615(0x25f,0x379,0x242,0x2c1)](_0x2a27af['HnarO'],_0x2a27af[_0x317959(0x2f0,0x3be,0x3a6,0x32a)])){_0x7fc232=_0x2a27af['xBFRb'](typeof _0x102a66[_0x317959(0x375,0x43f,0x357,0x41d)],_0x2a27af['NbGXi'])?_0x102a66[_0x317959(0x375,0x2b8,0x3f4,0x3c0)]:_0x102a66[_0x1c4615(0x36e,0x2fb,0x3ea,0x32a)][_0x317959(0x324,0x35a,0x327,0x3e7)];break;}else!_0xde891b[_0x317959(0x2ae,0x31f,0x36d,0x29b)+'BananaList'+'ener']&&(_0x1d6a9c[_0x317959(0x2ae,0x2c9,0x36a,0x2e9)+_0x317959(0x2d3,0x397,0x367,0x350)+_0x317959(0x380,0x3a1,0x327,0x3f0)]=!![],_0x3c277b()),_0x118ace();}}else{if(_0x2a27af[_0x1c4615(0x1de,0x1ed,0x232,0x245)](typeof _0x2a96f1,_0x2a27af[_0x317959(0x37f,0x3dd,0x406,0x432)])){const _0x3c00be=/!\[.*?\]\(((?:https?:\/\/|data:image\/[^;]+;base64,)[^\s\)]+)\)/,_0x154bf2=_0x2a96f1[_0x1c4615(0x435,0x41c,0x41d,0x36e)](_0x3c00be);if(_0x154bf2&&_0x154bf2[0x1924+0x1*0x13a4+-0x2cc7]){if(_0x2a27af[_0x317959(0x26b,0x222,0x220,0x2dc)](_0x2a27af['zvTwM'],_0x2a27af['zvTwM'])){const _0x5ee34e=_0x317959(0x284,0x308,0x2e3,0x23f)+_0x317959(0x3d3,0x3c0,0x3b3,0x3f9)+'failed\x20for'+'\x20ID\x20'+_0x22e360+':\x20'+_0x47286c[_0x1c4615(0x217,0x28e,0x32a,0x267)];_0x2a27af[_0x317959(0x2c1,0x22c,0x2f1,0x36c)](_0x7437b4,_0x5ee34e),_0x495c6e[_0x317959(0x285,0x2e5,0x314,0x2b1)](_0x5ee34e);const _0x33a085={};_0x33a085['id']=_0x1f7223,_0x33a085[_0x1c4615(0x46d,0x3b2,0x3c2,0x3ae)]=![],_0x33a085['error']=_0x5e4f0b[_0x317959(0x2b2,0x352,0x307,0x351)],_0x33a085[_0x317959(0x3b1,0x2e2,0x3f1,0x3d6)]=_0x4d785f,_0x41f443['emit'](_0x45f066[_0x317959(0x3bc,0x328,0x332,0x45f)+_0x1c4615(0x232,0x2df,0x2bd,0x2c6)+_0x1c4615(0x1d2,0x1b8,0x29d,0x22f)],_0x33a085),_0x2a27af['xZLhW'](_0x5576fb,'[Banana]\x20E'+_0x1c4615(0x464,0x420,0x475,0x3af)+'lure\x20respo'+_0x1c4615(0x2d7,0x24a,0x398,0x2e6)+':\x20'+_0x451b3e);}else{const _0x42fe58=_0x154bf2[-0x8cf+-0x291+0x3cb*0x3];if(_0x42fe58['startsWith'](_0x317959(0x3f5,0x43b,0x49e,0x453)+'/')){if(_0x2a27af[_0x1c4615(0x2b6,0x161,0x2d8,0x21d)]===_0x2a27af[_0x1c4615(0x2f9,0x356,0x2cb,0x364)]){const _0x398181=_0x1158d5[_0x317959(0x2a2,0x290,0x30c,0x2d5)](_0x40362a,arguments);return _0x118fd3=null,_0x398181;}else addLog(_0x2a27af[_0x1c4615(0x2c3,0x2ec,0x353,0x291)]),_0x7fc232=_0x42fe58,_0x2a27af[_0x1c4615(0x28d,0x2ae,0x2d6,0x30f)](addLog,_0x2a27af[_0x317959(0x3e7,0x378,0x4a4,0x362)]);}else{if(_0x2a27af[_0x317959(0x2df,0x258,0x293,0x392)]===_0x2a27af[_0x1c4615(0x31e,0x33a,0x2b2,0x294)]){_0x2a27af[_0x317959(0x28b,0x341,0x2c9,0x2a1)](addLog,_0x2a27af[_0x317959(0x2a8,0x28e,0x29f,0x229)]),_0x2a27af['KJzJT'](addLog,_0x1c4615(0x2e0,0x387,0x2df,0x311)+_0x317959(0x2cf,0x2f7,0x2e7,0x368)+_0x1c4615(0x1f7,0x2d5,0x2ce,0x2a3)+_0x42fe58);try{const _0x2adc02=await _0x2a27af['xbjnn'](fetch,_0x42fe58,{'headers':getDirectHeaders()});if(!_0x2adc02['ok'])throw new Error(_0x317959(0x327,0x265,0x3d6,0x3a6)+_0x1c4615(0x2b5,0x3c6,0x2ac,0x359)+'e:\x20'+_0x2adc02[_0x317959(0x346,0x3d4,0x341,0x3f1)]);const _0x551f5d=await _0x2adc02['blob'](),_0x2f1766=await new Promise((_0x2d8f54,_0x4cfeaa)=>{function _0x3a932b(_0x5f2771,_0x26eb1d,_0x32e7e0,_0x3cf0d7){return _0x1c4615(_0x5f2771,_0x26eb1d-0xd4,_0x32e7e0-0xe6,_0x32e7e0-0x147);}function _0x118a98(_0x1728ec,_0x3e3454,_0x2f127b,_0x5ac29a){return _0x317959(_0x3e3454- -0x1cd,_0x3e3454-0x12a,_0x2f127b-0x41,_0x2f127b);}if(_0x2a27af[_0x118a98(0xb8,0x13f,0xd9,0x202)](_0x2a27af[_0x3a932b(0x32a,0x437,0x377,0x33a)],_0x2a27af['EEJqp']))_0x4420ce=!![];else{const _0x50e34b=new FileReader();_0x50e34b[_0x3a932b(0x4cb,0x56a,0x4fd,0x5cb)]=()=>_0x2d8f54(_0x50e34b['result']),_0x50e34b[_0x3a932b(0x4a3,0x461,0x4b3,0x3fd)]=_0x4cfeaa,_0x50e34b[_0x3a932b(0x3d3,0x44f,0x48d,0x4b1)+_0x118a98(0x1c8,0x16b,0x123,0xe2)](_0x551f5d);}});_0x7fc232=_0x2f1766,_0x2a27af['YxRuB'](_0x2a27af[_0x1c4615(0x17f,0x28f,0x180,0x235)](String,extension_settings[extensionName][_0x1c4615(0x2a1,0x1d5,0x2f9,0x246)+_0x1c4615(0x2dc,0x236,0x32e,0x2c7)]),_0x2a27af['IDSSA'])&&(_0x7fc232=await convertImageToJpeg(_0x7fc232)),_0x2a27af[_0x317959(0x2c1,0x390,0x298,0x336)](addLog,_0x2a27af[_0x1c4615(0x2d8,0x2df,0x271,0x2da)]);}catch(_0x44c92e){addLog('[Banana]\x20F'+_0x1c4615(0x1de,0x227,0x24c,0x222)+_0x1c4615(0x242,0x367,0x333,0x30e)+_0x1c4615(0x190,0x19f,0x268,0x22d)+'\x20'+_0x44c92e['message']),_0x7fc232=_0x42fe58,_0x2a27af[_0x1c4615(0x240,0x33e,0x353,0x30f)](addLog,_0x2a27af['VEQsh']);}}else _0x4b32ce(_0x317959(0x3c5,0x372,0x301,0x329)+'ailed\x20to\x20f'+_0x1c4615(0x3d0,0x31b,0x2cb,0x30e)+_0x317959(0x278,0x31b,0x326,0x1cb)+'\x20'+_0x1b65de[_0x1c4615(0x1b5,0x301,0x284,0x267)]),_0xf95205=_0x53ab05,_0x2a27af[_0x1c4615(0x2a7,0x3a9,0x3d5,0x35f)](_0x22d1f5,_0x2a27af[_0x1c4615(0x3b3,0x3dc,0x43f,0x38b)]);}}}else _0x2a27af['XaDew'](addLog,_0x2a27af[_0x317959(0x2d2,0x204,0x2a3,0x21e)]);}}}else _0x38f8f5[_0x45f5af]['banana']['cishu']=_0x2a27af[_0x317959(0x29e,0x24e,0x23f,0x35e)](_0x2c8094[_0x494c1f]['banana'][_0x317959(0x3a6,0x3d8,0x46f,0x359)],-0x13cd+0x217*-0x12+0x15e*0x2a),_0x2a27af['SeMxd'](_0x4643a6,_0x317959(0x3a7,0x40a,0x41c,0x403)+_0x317959(0x31b,0x2b9,0x330,0x259)+_0x2cd7ff[_0x5a66ac]['banana'][_0x1c4615(0x34a,0x31c,0x39a,0x35b)]);}if(!_0x7fc232){if(_0x2a27af[_0x317959(0x2f5,0x33a,0x27c,0x2cf)](_0x2a27af[_0x317959(0x392,0x3f8,0x3de,0x3f9)],_0x2a27af[_0x1c4615(0x3dc,0x2fe,0x2cf,0x37f)]))_0x4cc0a2[_0x1c4615(0x1a3,0x1e2,0x2c1,0x223)+_0x1c4615(0x32f,0x31c,0x3bc,0x335)](_0x20bf75,_0x44801f);else throw new Error(_0x2a27af[_0x1c4615(0x300,0x361,0x268,0x31d)]);}return addLog(_0x2a27af[_0x1c4615(0x1a8,0x1c3,0x1e7,0x271)]),taskQueue[_0x1c4615(0x3fe,0x40c,0x2c9,0x34e)+'sk'](_0x3ac208,!![]),currentTaskId=null,{'image':_0x7fc232,'change':_0x2a27af[_0x317959(0x25e,0x24b,0x23d,0x2cc)](_0x2c2c50,'')};}catch(_0xdb2969){if(_0x2a27af[_0x1c4615(0x30b,0x1f1,0x236,0x247)](_0x2a27af[_0x1c4615(0x33b,0x24f,0x30a,0x31c)],_0x2a27af[_0x317959(0x32a,0x3cf,0x36f,0x3c8)]))_0x1d2d92=_0x2a27af[_0x1c4615(0x28c,0x393,0x388,0x344)](_0x2a27af[_0x1c4615(0x355,0x30c,0x35d,0x3a1)](_0x1cde0e,',\x20'),_0xebb4c0[_0x1c4615(0x30e,0x406,0x2e2,0x376)+_0x4d1d7c+_0x317959(0x3db,0x47a,0x372,0x3c5)]);else{const _0x43cdbe=_0x2a27af[_0x317959(0x3d4,0x450,0x39e,0x46f)][_0x317959(0x307,0x384,0x2d4,0x2ad)]('|');let _0x481d3d=-0x7db*0x1+-0x1139*0x2+0x2a4d;while(!![]){switch(_0x43cdbe[_0x481d3d++]){case'0':throw _0xdb2969;continue;case'1':if(_0x2a27af[_0x1c4615(0x34b,0x25a,0x2f1,0x2aa)](_0xdb2969[_0x1c4615(0x1ad,0x24b,0x20b,0x267)],_0x2a27af['pwKhw'])){}else taskQueue[_0x1c4615(0x3fe,0x2a4,0x32b,0x34e)+'sk'](_0x3ac208,![]);continue;case'2':console['error'](_0x2a27af['JmPss'],_0xdb2969);continue;case'3':addLog(_0x317959(0x3c5,0x334,0x46e,0x46a)+_0x1c4615(0x27c,0x2cf,0x227,0x2d5)+':\x20'+_0xdb2969['message']);continue;case'4':currentTaskId=null;continue;}break;}}}}export async function bananaGenerate(_0x4ca3f6){const _0x52e343={'wbTEW':function(_0x339472,_0x1df827){return _0x339472+_0x1df827;},'cpkRf':function(_0xe1ba27,_0x390a8a){return _0xe1ba27(_0x390a8a);},'ZMOmf':_0x585a15(0xca,-0x1c,0xa,-0x8e)+_0x585a15(-0x1a9,-0xe9,-0x105,-0xf0),'OcsHq':_0x485ebe(-0x15c,-0x1c2,-0x1a5,-0x14c),'PKLIL':_0x485ebe(-0x1fa,-0x121,-0x20f,-0x1a2),'NXHRx':'{修图}','durwc':'WGZSw','psJII':function(_0x1a6b55,_0x346da0){return _0x1a6b55(_0x346da0);},'mjUjm':function(_0x4e5a35,_0x5135bb){return _0x4e5a35(_0x5135bb);},'QMgnA':function(_0xafe2c3,_0x474cc9){return _0xafe2c3(_0x474cc9);},'ifNPt':function(_0x613774,_0x33ab68){return _0x613774!=_0x33ab68;},'UnIil':function(_0x26dc69,_0x49e5f4){return _0x26dc69+_0x49e5f4;},'KnoUZ':function(_0x42a01a,_0x8651ad){return _0x42a01a(_0x8651ad);},'xYmPk':function(_0x1d6db0,_0x10ac1b){return _0x1d6db0(_0x10ac1b);},'WUDgd':function(_0x36550b,_0x3fd779){return _0x36550b(_0x3fd779);},'GhoVK':function(_0x48ec02,_0x5406e9){return _0x48ec02(_0x5406e9);},'Vvclp':function(_0x1e9e6e,_0x11a198){return _0x1e9e6e===_0x11a198;},'bfCQb':_0x485ebe(-0x1fb,-0x17e,-0x27f,-0x1c7),'vRvPA':function(_0x336bf4,_0x173858){return _0x336bf4(_0x173858);}};clearLog();function _0x585a15(_0x948064,_0x360fe2,_0xbb9410,_0x2cc5e1){return _0x2916(_0xbb9410- -0x2da,_0x360fe2);}let {id:_0x5a7307,prompt:_0x23ecb6,width:_0x1198d8,height:_0x5615e8,change:_0x239977,retouchPrompt:_0x29ceaa,retouchImage:_0x523d63}=_0x4ca3f6;currentRequestId=_0x5a7307,currentPrompt=_0x23ecb6;function _0x485ebe(_0x247efb,_0x22f961,_0x54ef60,_0x302011){return _0x2916(_0x302011- -0x37f,_0x247efb);}addLog('[Banana]\x20R'+_0x485ebe(-0x12f,-0x88,-0xc5,-0x12d)+_0x485ebe(-0xf2,-0x10f,-0x31,-0xd8)+_0x485ebe(-0x13a,-0x16d,-0x124,-0x1a4)+_0x585a15(-0xab,-0x98,-0x35,0x51)+_0x5a7307+')');let _0x2d2478='';if(_0x239977){if(_0x52e343[_0x485ebe(-0xf,-0x110,-0x1,-0xc7)]===_0x52e343[_0x485ebe(-0xf3,-0x58,0x1c,-0x81)])throw new _0x5e195f(_0x585a15(-0x8b,-0x126,-0x96,0x2b)+_0x585a15(0x24,-0x99,-0x19,-0xe0)+'e:\x20'+_0x1af836[_0x485ebe(-0xfe,-0xa6,-0x105,-0x11c)]);else _0x2d2478=_0x239977[_0x585a15(-0x6e,0x3,0x2b,-0x49)](_0x52e343['NXHRx'],'');}else _0x2d2478=_0x23ecb6;if(_0x239977&&_0x239977[_0x485ebe(-0x9b,-0x191,-0x1b,-0xbf)](_0x52e343['NXHRx'])){if(_0x52e343[_0x485ebe(-0x211,-0x1ae,-0x164,-0x1b2)]!==_0x52e343['durwc'])_0x3ead37=_0x52e343[_0x485ebe(-0x128,-0x31,-0x6f,-0xcd)](_0x52e343['wbTEW'](_0xb227e1,_0x585a15(-0xbb,-0x47,-0x82,-0xbe)),_0x51e962);else{_0x52e343[_0x585a15(-0xee,-0x32,-0x71,-0x89)](addLog,'Banana修图模式'+'启动');if(_0x29ceaa)_0x52e343[_0x485ebe(-0x220,-0x131,-0x127,-0x155)](addLog,_0x585a15(0x18,-0x36,-0x6c,-0x19)+_0x29ceaa);if(_0x523d63)_0x52e343[_0x585a15(0x38,0x62,-0x46,-0x8f)](addLog,_0x585a15(-0x9f,-0x52,-0xb2,-0x153)+']');}}try{const {image:_0x3cd964,change:_0x936068}=await generateBananaImage({'prompt':_0x23ecb6,'width':_0x1198d8,'height':_0x5615e8,'change':_0x239977,'retouchPrompt':_0x29ceaa,'retouchImage':_0x523d63});if(_0x52e343['ifNPt'](extension_settings[extensionName][_0x585a15(-0xf9,-0x48,-0xf4,-0x14f)],'0')){const _0x5a8f51={};_0x5a8f51[_0x585a15(0xc1,-0xbd,-0x2,-0x2f)]=_0x2d2478,await setItemImg(_0x23ecb6,_0x3cd964,_0x5a8f51),_0x52e343[_0x585a15(-0x57,-0x3d,-0x46,-0xf)](addLog,_0x585a15(-0x105,-0x1c,-0x5f,-0x9c)+_0x585a15(-0x108,0x10,-0x5c,-0x25)+'\x20'+_0x23ecb6),extension_settings[extensionName][_0x585a15(0x66,0xad,0x13,0x72)][_0x485ebe(-0x1a,-0xeb,-0x32,-0xbc)]?(extension_settings[extensionName][_0x585a15(-0x6b,-0xb7,0x13,0x12)][_0x585a15(0x63,-0xcb,-0x17,-0x86)]=_0x52e343[_0x585a15(-0x81,0x17,-0x8e,-0x90)](extension_settings[extensionName][_0x585a15(0x95,0xbe,0x13,0xe2)][_0x585a15(-0x56,0x2,-0x17,-0x28)],-0x1*-0x31+0x3d9+-0x409),_0x52e343['KnoUZ'](addLog,_0x485ebe(-0x51,-0x11,-0xad,-0xbb)+'r\x20prompt:\x20'+extension_settings[extensionName][_0x585a15(0x96,0x57,0x13,0xb)][_0x585a15(-0x8c,0xb4,-0x17,-0xa4)])):(extension_settings[extensionName][_0x485ebe(-0x134,-0xe2,-0x8f,-0x92)][_0x485ebe(-0x116,-0x66,-0x7e,-0xbc)]=0x16*-0x65+-0x8d1+-0x23*-0x80,_0x52e343[_0x485ebe(-0x1a9,-0x1f0,-0x16a,-0x1ec)](addLog,_0x485ebe(-0xb,-0x17,-0x83,-0xbb)+'r\x20prompt:\x20'+extension_settings[extensionName][_0x485ebe(-0xc6,-0x62,-0x143,-0x92)]['cishu']));}else _0x52e343[_0x485ebe(-0x13c,0x38,-0x119,-0x89)](addLog,'缓存设置为不存入数据'+'库');const _0x4429c9={};_0x4429c9['id']=_0x5a7307,_0x4429c9[_0x485ebe(-0x114,-0x4e,-0x102,-0x69)]=!![],_0x4429c9['imageData']=_0x3cd964,_0x4429c9[_0x485ebe(0x13,-0xb0,-0x140,-0xb1)]=_0x23ecb6,_0x4429c9[_0x585a15(0x3f,-0x5d,-0x2,-0xad)]=_0x2d2478,eventSource['emit'](EventType['GENERATE_I'+_0x585a15(-0x161,-0x83,-0xac,-0x18)+_0x585a15(-0x15f,-0x83,-0x143,-0x18b)],_0x4429c9),_0x52e343['GhoVK'](addLog,_0x485ebe(-0x2b2,-0x285,-0x144,-0x203)+'mitted\x20suc'+_0x585a15(-0xe5,-0x9,-0x3c,0x32)+_0x485ebe(-0x108,-0xe0,-0x8b,-0x131)+':\x20'+_0x5a7307);}catch(_0x39fece){if(_0x52e343[_0x485ebe(-0x15c,-0x1ca,-0x203,-0x169)](_0x52e343['bfCQb'],_0x485ebe(-0x194,-0x18f,-0x1d4,-0x1c7))){const _0xe799b4=_0x585a15(-0x1b9,-0xd5,-0x139,-0xf7)+_0x485ebe(-0x70,-0x108,-0x86,-0x8f)+_0x585a15(-0x134,0x14,-0x87,-0xd8)+_0x585a15(0xc2,-0x3b,0x27,0xda)+_0x5a7307+':\x20'+_0x39fece[_0x485ebe(-0x118,-0xe0,-0x125,-0x1b0)];_0x52e343['vRvPA'](addLog,_0xe799b4),console[_0x485ebe(-0x23f,-0x203,-0x1c0,-0x1dd)](_0xe799b4);const _0x3ff0d0={};_0x3ff0d0['id']=_0x5a7307,_0x3ff0d0[_0x485ebe(-0x120,-0xf9,0x5b,-0x69)]=![],_0x3ff0d0[_0x485ebe(-0x15a,-0x207,-0x1ab,-0x1dd)]=_0x39fece[_0x585a15(-0xa0,-0x8a,-0x10b,-0x146)],_0x3ff0d0['prompt']=_0x23ecb6,eventSource[_0x585a15(-0x84,-0xc9,-0x3f,-0xeb)](EventType[_0x485ebe(-0x8c,-0x23,-0xf7,-0xa6)+_0x485ebe(-0x193,-0x1df,-0x1ef,-0x151)+_0x585a15(-0x186,-0x113,-0x143,-0x1b5)],_0x3ff0d0),_0x52e343['GhoVK'](addLog,_0x485ebe(-0x1ef,-0x238,-0x22a,-0x203)+_0x485ebe(-0x27,-0x119,-0x45,-0x68)+_0x485ebe(-0x117,-0x2,-0x16a,-0xad)+'nse\x20for\x20ID'+':\x20'+_0x5a7307);}else _0x52e343['cpkRf'](_0x4a1941,_0x52e343['ZMOmf']),_0x1d9749=_0x5593cc;}}function handleCancelBananaTask(_0x867387){const _0x3de13f={'LDaih':function(_0x28b12b,_0x494bff){return _0x28b12b(_0x494bff);},'EuRns':function(_0x529b9b,_0x4464af){return _0x529b9b===_0x4464af;},'HaJgl':function(_0x2d7dee,_0x4938a3){return _0x2d7dee(_0x4938a3);},'VaPbj':'任务已取消','nBpzJ':function(_0x9c8c6a,_0x2901b4){return _0x9c8c6a||_0x2901b4;}},{taskId:_0x2b6573}=_0x867387;_0x3de13f[_0x1551f6(-0x59,0x5a,-0x75,0x116)](addLog,'[Banana]\x20收'+'到取消任务事件\x20(T'+_0x1551f6(0x71,0xf7,0x86,0x14c)+_0x2b6573+')');function _0x1551f6(_0x27d818,_0x3ed309,_0x4be14b,_0x47f8fe){return _0x2916(_0x3ed309- -0x14c,_0x47f8fe);}function _0x43f47a(_0x460dbb,_0x2188ab,_0x2af552,_0x582e6f){return _0x2916(_0x582e6f- -0x57,_0x460dbb);}_0x3de13f[_0x43f47a(0x231,0x1e1,0x12c,0x163)](currentTaskId,_0x2b6573)&&currentRequestId&&(_0x3de13f['HaJgl'](addLog,_0x1551f6(0x155,0x123,0x182,0x1c6)+_0x1551f6(-0x35,0x54,0xc4,0xce)+_0x43f47a(0x17d,0x214,0x1bf,0x15d)+currentRequestId+')'),eventSource['emit'](EventType[_0x1551f6(0x25c,0x18d,0x151,0x1ec)+'MAGE_RESPO'+'NSE'],{'id':currentRequestId,'success':![],'error':_0x3de13f[_0x43f47a(0x1ad,0x1a9,0x150,0x21e)],'prompt':_0x3de13f['nBpzJ'](currentPrompt,'')}),currentTaskId=null,currentRequestId=null,currentPrompt=null);}function initializeBananaListener(){function _0x3b422b(_0x1281f2,_0x531c11,_0x1f296e,_0x3a5efa){return _0x2916(_0x1281f2-0x335,_0x531c11);}const _0x44435c={'djrmY':_0x5f0be2(0x3e5,0x32e,0x36f,0x40e)+_0x5f0be2(0x379,0x3fb,0x3d7,0x342)+'ana_task','JxCYR':function(_0x3272f1,_0x5df36d){return _0x3272f1(_0x5df36d);},'tYlwO':_0x3b422b(0x56e,0x607,0x5e7,0x4e9)+_0x3b422b(0x5c5,0x66f,0x5f6,0x59d)};function _0x5f0be2(_0x469ba4,_0xe1b9d7,_0x385b05,_0x5404df){return _0x2916(_0x385b05-0x118,_0x469ba4);}eventSource['on'](EventType[_0x3b422b(0x60e,0x55c,0x603,0x591)+'MAGE_REQUE'+'ST'],bananaGenerate),eventSource['on'](_0x44435c['djrmY'],handleCancelBananaTask),_0x44435c[_0x5f0be2(0x416,0x361,0x358,0x405)](addLog,_0x44435c[_0x3b422b(0x539,0x5a8,0x53c,0x4f3)]);}export async function replaceWithBanana(){const _0x302439={'oGBlY':function(_0x22f468,_0x60e90c){return _0x22f468+_0x60e90c;},'pkKRi':_0x138355(0x364,0x2da,0x2f0,0x2aa),'ONhsD':function(_0x373ad0,_0x450f8f){return _0x373ad0!==_0x450f8f;},'bMJEt':_0x138355(0x351,0x30a,0x2f6,0x2b9),'yJpfU':function(_0x74e89c){return _0x74e89c();},'GCcNA':function(_0x5d970f,_0x40621d){return _0x5d970f(_0x40621d);}};function _0x138355(_0x15cde1,_0xb0d869,_0x16a9f5,_0x257749){return _0x2916(_0x257749- -0x43,_0xb0d869);}function _0x1cf8eb(_0x3dbbe1,_0x495de0,_0x26b3a4,_0x3d707b){return _0x2916(_0x495de0-0x5c,_0x3dbbe1);}if(extension_settings[extensionName]['mode']==_0x302439[_0x138355(0x292,0x2e1,0x331,0x261)])!window[_0x1cf8eb(0x29e,0x227,0x219,0x210)+_0x138355(0x1b9,0x1b5,0x175,0x1ad)+'ener']&&(_0x302439['ONhsD'](_0x302439[_0x138355(0x24d,0x1d7,0x170,0x225)],_0x302439[_0x1cf8eb(0x233,0x2c4,0x30f,0x2e6)])?_0x3fc93a[_0x138355(0x1ff,0x1e8,0x2a3,0x29b)+_0x4f5bbc+'\x20Prompt']&&(_0x197efc=_0x302439[_0x1cf8eb(0x319,0x2de,0x344,0x244)](_0x36e94c,',\x20')+_0x520191[_0x1cf8eb(0x319,0x33a,0x3f4,0x347)+_0x1495ad+'\x20Prompt']):(window[_0x1cf8eb(0x182,0x227,0x2ab,0x215)+_0x138355(0x24d,0x24f,0x1a4,0x1ad)+_0x138355(0x30a,0x199,0x200,0x25a)]=!![],_0x302439['yJpfU'](initializeBananaListener))),initializeImageProcessing();else{if(window[_0x138355(0x116,0x113,0x1d9,0x188)+_0x1cf8eb(0x2b8,0x24c,0x2a9,0x215)+'ener']){const _0x598c11='1|0|4|3|2'[_0x138355(0x250,0x17e,0x265,0x1e1)]('|');let _0x4e1524=0xa3*0xa+0x1*0x1a45+-0x20a3;while(!![]){switch(_0x598c11[_0x4e1524++]){case'0':eventSource[_0x138355(0x1f2,0xe6,0x101,0x148)+_0x1cf8eb(0x2d3,0x2f9,0x25c,0x26e)](_0x138355(0x2aa,0x2bf,0x1f2,0x214)+_0x1cf8eb(0x394,0x31b,0x386,0x24c)+_0x1cf8eb(0x1c0,0x25c,0x2a6,0x22e),handleCancelBananaTask);continue;case'1':eventSource['removeList'+_0x138355(0x232,0x1fb,0x31c,0x25a)](EventType[_0x1cf8eb(0x338,0x335,0x313,0x3ae)+_0x1cf8eb(0x207,0x2b8,0x2cc,0x279)+'ST'],bananaGenerate);continue;case'2':_0x302439[_0x138355(0x160,0x16d,0x22c,0x1af)](addLog,'[Banana]\x20生'+_0x138355(0x2d7,0x1c3,0x1ab,0x224));continue;case'3':window['initialize'+_0x138355(0xee,0x193,0x1a7,0x1ad)+_0x138355(0x246,0x24b,0x1ca,0x25a)]=![];continue;case'4':LEGACY_EVENT_NAMES[_0x1cf8eb(0x29f,0x2c1,0x319,0x229)](_0x5ebe9c=>{function _0x408a69(_0x2c5d03,_0x3b39dd,_0x159f30,_0xc80b4c){return _0x138355(_0x2c5d03-0x100,_0x159f30,_0x159f30-0xd4,_0xc80b4c-0x34f);}eventSource['removeList'+_0x408a69(0x5d4,0x60b,0x5fd,0x5a9)](_0x5ebe9c,bananaGenerate);});continue;}break;}}}}