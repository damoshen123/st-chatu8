(function(_0x2a2ced,_0x136007){function _0x51fe03(_0x434752,_0x293dca,_0x54271c,_0x1b8741){return _0xdb80(_0x293dca- -0x146,_0x54271c);}function _0x97977(_0x1918e4,_0x4f0a3e,_0x3f5ffb,_0x39ddd8){return _0xdb80(_0x3f5ffb- -0x3b7,_0x1918e4);}const _0x5f32db=_0x2a2ced();while(!![]){try{const _0x2e78bb=parseInt(_0x97977(-0x147,-0xad,-0x109,-0x140))/(0x11f*-0x8+-0x26f2+0x2feb)*(parseInt(_0x97977(-0x135,-0x1df,-0x1ab,-0x126))/(0x1*0x313+-0xa9e+0x78d))+-parseInt(_0x97977(-0x272,-0x1ec,-0x1fb,-0x1e3))/(-0xa6*-0x15+-0x1779+0x9de)*(parseInt(_0x51fe03(0x44,0xb1,0x49,0x119))/(-0x11c+-0x1c5c+0x33*0x94))+parseInt(_0x97977(-0x149,-0x121,-0x134,-0x138))/(-0x26d7+0x2e*0x2b+0x1f22)+-parseInt(_0x51fe03(0xb0,0x80,0x7a,0xea))/(-0x4*0x611+-0x15d*0xf+-0x1*-0x2cbd)*(parseInt(_0x97977(-0xde,-0x191,-0x11c,-0x175))/(-0x4*-0x241+0xa*-0xd5+-0xab))+-parseInt(_0x51fe03(0x174,0x11d,0x93,0x17e))/(0xe69+0x1*-0x26b7+0x1856)+-parseInt(_0x97977(-0x1cf,-0x202,-0x179,-0x1da))/(-0x226a+-0x1*0x1aaa+0x3*0x145f)*(parseInt(_0x97977(-0x10c,-0x20f,-0x19c,-0x1f1))/(-0x65+0x112c+-0x1*0x10bd))+parseInt(_0x51fe03(0x17d,0x14a,0x15c,0x17b))/(0x1eb7+0x7a*-0x10+-0xb86*0x2)*(parseInt(_0x97977(-0x146,-0x17b,-0x193,-0x20a))/(-0xf64*0x1+0x1*0xf3f+0x31));if(_0x2e78bb===_0x136007)break;else _0x5f32db['push'](_0x5f32db['shift']());}catch(_0x5c5281){_0x5f32db['push'](_0x5f32db['shift']());}}}(_0x3df9,-0xd209e+-0x1ff6a+0xe46*0x199));const _0x391dfe=(function(){const _0x427925={'KkDzG':_0x3788f9(0x107,0x115,0x167,0x169),'iBdEq':function(_0x18b049,_0x21f232){return _0x18b049(_0x21f232);}};function _0x3788f9(_0x1f3060,_0x49973c,_0x16cdc8,_0x2295d4){return _0xdb80(_0x1f3060- -0x116,_0x16cdc8);}let _0x21f648=!![];return function(_0x1eba01,_0x29943d){function _0xaa27c9(_0x2516ef,_0xc71116,_0x4398c5,_0x2f5104){return _0x3788f9(_0xc71116-0x46,_0xc71116-0x18d,_0x4398c5,_0x2f5104-0x17e);}function _0x5dd994(_0x476281,_0xafa79c,_0x1c6442,_0x5d4e0c){return _0x3788f9(_0xafa79c- -0x2cd,_0xafa79c-0xea,_0x5d4e0c,_0x5d4e0c-0x5e);}if(_0x5dd994(-0x138,-0x19e,-0x1df,-0x1ac)==='wlpxv'){const _0x10ab0b=_0x21f648?function(){function _0x3abcb9(_0xd153ee,_0x136921,_0x2c64eb,_0x5bb9ab){return _0x5dd994(_0xd153ee-0x57,_0x2c64eb-0x747,_0x2c64eb-0x5a,_0x136921);}if(_0x29943d){const _0x559adb=_0x29943d[_0x3abcb9(0x4fe,0x57c,0x52f,0x4cf)](_0x1eba01,arguments);return _0x29943d=null,_0x559adb;}}:function(){};return _0x21f648=![],_0x10ab0b;}else{const _0x58105a={};_0x58105a[_0xaa27c9(0x157,0xfd,0x10a,0x11d)]=_0x1b80c7;const _0x7f2fcc={};_0x7f2fcc[_0xaa27c9(0x157,0x1d8,0x25d,0x1de)]=_0x427925['KkDzG'],_0x7f2fcc[_0xaa27c9(0xd2,0x14d,0x199,0x1cd)]=_0x58105a,_0x2ad2ef[_0xaa27c9(0x1f3,0x190,0x202,0x144)](_0x7f2fcc),_0x427925[_0xaa27c9(0xcb,0x150,0x192,0x12f)](_0x1151b6,_0x5dd994(-0x213,-0x1b2,-0x161,-0x17b)+_0x5dd994(-0xc2,-0x13d,-0x163,-0x149)+_0xaa27c9(0x149,0x1cd,0x235,0x215));}};}());function _0x393d77(_0x24f300,_0x599a17,_0x4e5a7b,_0x10813d){return _0xdb80(_0x599a17-0x19b,_0x24f300);}const _0x4d2878=_0x391dfe(this,function(){const _0x296286={};_0x296286[_0x55f607(0x492,0x450,0x4a7,0x498)]=_0x55f607(0x44c,0x4f0,0x531,0x4d5)+'+$';function _0x5ccb36(_0x2e915f,_0x5c1eb8,_0x520b70,_0x42b4e7){return _0xdb80(_0x42b4e7- -0x161,_0x5c1eb8);}const _0x4cf47a=_0x296286;function _0x55f607(_0x3c8723,_0x344c2f,_0x822f19,_0x21ac21){return _0xdb80(_0x21ac21-0x22c,_0x344c2f);}return _0x4d2878[_0x55f607(0x47f,0x44b,0x38d,0x3f3)]()[_0x5ccb36(0x1c5,0x1a3,0x17c,0x14f)](_0x4cf47a[_0x55f607(0x45d,0x431,0x4f1,0x498)])[_0x5ccb36(-0x6,0xa4,-0x5,0x66)]()[_0x55f607(0x4ba,0x4c6,0x3fb,0x466)+'r'](_0x4d2878)['search'](_0x5ccb36(0x126,0x1b7,0xbd,0x148)+'+$');});_0x4d2878();import{extension_settings}from'../../../../extensions.js';import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';function _0x40450f(_0x2c450f,_0x1059fd,_0x384712,_0x30e47b){return _0xdb80(_0x30e47b- -0x2e2,_0x1059fd);}import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';async function getImageFromTurnData(_0x1f8457){function _0x2d1966(_0x406bf3,_0x5c892a,_0x171f5f,_0x2e9abf){return _0xdb80(_0x5c892a-0xa2,_0x406bf3);}const _0x2c7723={'rVsJW':function(_0x153e7e){return _0x153e7e();},'bgmXv':function(_0x10f445,_0x24c4db){return _0x10f445===_0x24c4db;},'YYHfL':_0x2d1966(0x290,0x259,0x2bc,0x22c),'rOKfw':_0x431f71(0x532,0x57e,0x51d,0x578),'omKJb':function(_0x39f331,_0x20f016){return _0x39f331(_0x20f016);},'zEhif':function(_0x4a99ef,_0x49eb39){return _0x4a99ef||_0x49eb39;}};if(!_0x1f8457)return'';function _0x431f71(_0xbdb8a2,_0x8095fd,_0x155eab,_0x39c7e8){return _0xdb80(_0x8095fd-0x367,_0x155eab);}if(_0x1f8457[_0x431f71(0x5e9,0x619,0x58c,0x65f)]&&_0x1f8457[_0x431f71(0x655,0x619,0x5fe,0x5bc)][_0x2d1966(0x322,0x2c9,0x2e3,0x348)](_0x2d1966(0x342,0x326,0x2f9,0x3aa))){if(_0x2c7723['bgmXv'](_0x2c7723[_0x431f71(0x58d,0x554,0x56e,0x4d9)],_0x2c7723[_0x2d1966(0x318,0x30d,0x385,0x342)]))_0x50dc59['initialize'+_0x431f71(0x4bd,0x538,0x5ab,0x4df)+_0x431f71(0x518,0x58c,0x51c,0x55c)]=!![],_0x2c7723[_0x2d1966(0x272,0x2d4,0x2b9,0x320)](_0x898e85);else{const _0x4d02f5=await _0x2c7723[_0x2d1966(0x36f,0x33e,0x381,0x397)](getConfigImage,_0x1f8457[_0x431f71(0x5d6,0x619,0x5f6,0x5c2)]);return _0x2c7723['zEhif'](_0x4d02f5,'');}}if(_0x1f8457[_0x2d1966(0x398,0x349,0x338,0x3a0)]&&_0x1f8457[_0x431f71(0x5e6,0x60e,0x64f,0x590)][_0x431f71(0x5fd,0x58e,0x61a,0x5c3)](_0x431f71(0x5be,0x59a,0x5ae,0x53b)))return _0x1f8457[_0x2d1966(0x371,0x349,0x3cc,0x2d7)];return'';}function _0xdb80(_0x5e226f,_0x34f5e4){const _0x57bba9=_0x3df9();return _0xdb80=function(_0x2485df,_0x24c58e){_0x2485df=_0x2485df-(0x1401+0x6*0x38d+-0x27a7*0x1);let _0x527d0f=_0x57bba9[_0x2485df];if(_0xdb80['HtPFmT']===undefined){var _0x1c598a=function(_0x1a4e56){const _0x6e59b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x191747='',_0x20dd36='',_0x98ce03=_0x191747+_0x1c598a;for(let _0x19f211=-0x1*-0x4df+0x3b*-0xb+0x256*-0x1,_0x1ab332,_0x53f9ef,_0x39ecdf=-0x5*0x146+0x9a9+-0x3*0x119;_0x53f9ef=_0x1a4e56['charAt'](_0x39ecdf++);~_0x53f9ef&&(_0x1ab332=_0x19f211%(-0x1*0x2500+-0x1*-0x1e4f+0x6b5)?_0x1ab332*(-0xfe*-0x25+0x4*-0x94f+-0x9*-0x16)+_0x53f9ef:_0x53f9ef,_0x19f211++%(0x20*-0x29+0xdd6+-0x8b2))?_0x191747+=_0x98ce03['charCodeAt'](_0x39ecdf+(-0x2*-0xe81+-0x1*-0x655+0x234d*-0x1))-(0x1*-0x129d+0xc5f*0x3+0x1*-0x1276)!==0x4*0x977+0x93*0x23+-0x39f5?String['fromCharCode'](0x1*-0x1778+0x1d13+0x5*-0xec&_0x1ab332>>(-(-0x1*-0x1ddb+0x1aae+-0x3887)*_0x19f211&0x1e69+0x1265+-0x30c8)):_0x19f211:0x17d5*0x1+-0x950+0x4d7*-0x3){_0x53f9ef=_0x6e59b['indexOf'](_0x53f9ef);}for(let _0x397c42=0x2d7*-0x4+0x68e*-0x2+0x1878,_0x186a1a=_0x191747['length'];_0x397c42<_0x186a1a;_0x397c42++){_0x20dd36+='%'+('00'+_0x191747['charCodeAt'](_0x397c42)['toString'](0x4*0x8b1+0x1*-0x124f+-0x1065))['slice'](-(0x1348+0x1efe*0x1+-0x3244));}return decodeURIComponent(_0x20dd36);};_0xdb80['EeaqCf']=_0x1c598a,_0x5e226f=arguments,_0xdb80['HtPFmT']=!![];}const _0x2e803b=_0x57bba9[0x54*0x3c+-0x2410+-0x2*-0x830],_0x5646e9=_0x2485df+_0x2e803b,_0x49774b=_0x5e226f[_0x5646e9];if(!_0x49774b){const _0x114883=function(_0x22d4c8){this['vtqNby']=_0x22d4c8,this['QITVUw']=[-0x197f+0xdff+0xb81,0x1*-0x15e2+-0x1932+0x2*0x178a,-0x11*0x1f0+-0x1d*-0x149+-0x455],this['QlncNe']=function(){return'newState';},this['BUAHtA']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ZMWexL']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x114883['prototype']['RlBScK']=function(){const _0x4e543a=new RegExp(this['BUAHtA']+this['ZMWexL']),_0xd9d4c2=_0x4e543a['test'](this['QlncNe']['toString']())?--this['QITVUw'][-0x1654+0x19df*-0x1+-0x5*-0x9a4]:--this['QITVUw'][0xe77*0x2+0x2b*0x16+-0x20a0];return this['RzuAEs'](_0xd9d4c2);},_0x114883['prototype']['RzuAEs']=function(_0x3d3ad4){if(!Boolean(~_0x3d3ad4))return _0x3d3ad4;return this['MPkzCh'](this['vtqNby']);},_0x114883['prototype']['MPkzCh']=function(_0x32ff3a){for(let _0x417cfe=0x1956+0x1*0x1b4c+-0x34a2*0x1,_0xd11c05=this['QITVUw']['length'];_0x417cfe<_0xd11c05;_0x417cfe++){this['QITVUw']['push'](Math['round'](Math['random']())),_0xd11c05=this['QITVUw']['length'];}return _0x32ff3a(this['QITVUw'][-0x2494+0x2049+0x44b]);},new _0x114883(_0xdb80)['RlBScK'](),_0x527d0f=_0xdb80['EeaqCf'](_0x527d0f),_0x5e226f[_0x5646e9]=_0x527d0f;}else _0x527d0f=_0x49774b;return _0x527d0f;},_0xdb80(_0x5e226f,_0x34f5e4);}function _0x3df9(){const _0x397da4=['sffhqvu','tgv1C3G','zMLSDgvY','mtjMzMDYCfy','zw5LCG','u0PmAM0','C3rHCNrZv2L0Aa','C3fSCMW','w0jHBMfUyv0GuW','wvDmDhm','v2jYyLC','BwvZC2fNzxm','Aw5NihrYAwDNzq','yxbWBgLJyxrPBW','uhzivhi','AKjKsvG','w0jHBMfUyv0G5l+U','CLzZsLC','zgf0ytPPBwfNzq','rfDAEvm','CfrbqLK','DxnLCG','wfLtCu8','zw5KC1DPDgG','iIbMCM9TihbYzq','y29UC3rYDwn0BW','ihWG','C2fTCgXLq291BG','A0XhqKC','mtG3nZK5nhrRBMnzva','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','Bw9Kzq','5zU+5QIH5BYp77YA5OYh5lUKid0G','r0vorvjbvevFsq','E+s/RUwBVN0','ywn0zxjqCMvZzq','D2XWEhy','wuDjtvi','Bw9KzwW','D09MBhe','zevXrKq','zxrJAcbLCNjVCG','ENLnzwO','CMvTB3zLtgLZDa','BfDUBKu','yMfUyw5H','ignVBNrHAw4GAq','DcbVBMX5lcbUBW','B2PRtfK','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','BMr5ueC','DgLVBIb3AxrOia','EM5Xz1K','BwfNzsbPBIbpCa','qMvHCMvYia','wMHPDxG','Exfosui','vfjPvfq','v0LJAei','q3Dlr1i','tufhrv9srvnqtW','y2LZAhu','DwvZDcb0BZOG','ChvZAa','rurksfy','rK1eDe0','ndK4nJq5nLboz2TQua','CLLPC3m','DdOG','BhvYzsbYzxnWBW','BgjeqwC','5PYa5zco572U','5zco572U5yMn','BLLxsLy','CK9lzNC','qwnxA1C','B3vUzcbTyxrJAa','BMjytvm','B3nPDgLVBG','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','DwLSDcbjBwfNzq','q2HHCMfJDgvYia','C3vJy2vZCW','5l+U5zU+5OYh5lUKoIa','AeDpugK','Bxb0','CwneCvi','zhz3vvi','w0jHBMfUyv0Gsq','w0jHBMfUyv0Gua','r09pz0u','5zco572U5zco','D1LstMG','ugnUA0O','rvDfEhC','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','zwTJEue','yxrLzcbZDwnJzq','ndm4otmWnvPXBKP5qW','y2zNAw1NxW','5lIT55QeihbYB21WDooaGG','w0jHBMfUyv0Grq','z2vUzxjHDguTAq','igLTywDLlG','t0rhtee','Cg9ZDgzPEfbYBW','5yMn572U5zco','55sO5lQo55sF5OIq55QevgfNoIa','v1vWz0y','yxLSB2fKoIa','BI9QC29U','odyZmZaWoxfeBeL6BW','ig1LC3nHz2vZlG','CIaI','lcdPQ5JLUQyGlsa','y2HHBMDL','y29UDgvUDa','yxnWzwn0uMf0Aq','BwL0DgvKigzHAq','w0jHBMfUyv0GuG','DKzXzhm','w0jHBMfUyv0GqG','nZbTzujOEK4','B21lsMi','55Qe5zU+54Mh','Aw5JBhvKzxm','zKruz1q','BwvZC2fNzq','l3yX','D2L0AcbWCM9TCa','z3HHy04','CNH1DNi','5BYa5AEliejHBMfUyEEuNW','5zU+5QIH5BYp77YA5BEY5RE75yQG5B6f5l+U5Ps5','Aw1Hz2u','DhLWzq','kcGOlISPkYKRkq','CgfYyw1LDgvYCW','zM9YrwfJAa','zw1PDa','BgvUz3rO','mZeXCgfUAhLm','vefvzNm','C2vHCMnO','CvvuCK8','Aw1Hz2vjza','CM9muvK','BKvhEgy','C2v0ici','yvnotvK','AM9PBG','B3iGChjVBxb0oG','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','CMvWBgfJzq','rwnpvK4','DgLVBIbYzxf1zq','zxjYB3i','zxnWB25ZzsbJBW','w0jHBMfUyv0G55sF','CMvWBgfJzufSBa','rhPkAxi','C3rYAw5NAwz5','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','BvnLy0S','qvbjihjLC3bVBG','BNnLigzVCIbjra','zgvSCY8','rgXRy3G','CKftAvG','l3yXyMv0ys9TBW','vvj4Chq','u2nLBMuGq29TCa','C3qGkeLeoIa','BwfNzv9Yzxf1zq','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','zMfPBgvKigzVCG','yw1eEMG','DcbMywLSzwqGDW','t1LKEgS','C3bSAxq','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','vNrlwum','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','BwDHAMO','CxPur2m','zML4zwrqCM9TCa','wfLTC0e','u2fNB1u','r3bZCM8','yLfbu3C','BKzUz28','m2vhz2zQvq','DMzoCxq','CLzxvxO','rwzTD2K','l3yXlW','z3rIBwO','vgfADM8','BwfW','B21WBgv0Aw9UCW','w0jHBMfUyv0G5zcV','mZy1nZi0AMzJr1LT','Dg9tDhjPBMC','yxfVzeS','sKPhB2q','B2HQuLq','yxbWBhK','C3bkB3O','DxjS','y0TiyKC','ieLeia','ENj6vg4','qMfUyw5HtgLZDa','BwfNzs1Yzxf1zq','zw5KAw5NihjLCq','yMfUyw5HioEuN+wBVUs6IW','Aw1Hz2vU','rhbYrNO','ywDLigDLBMvYyq','AwXXEfG','B2TQyuO','ufD2wKO','D3rZvfu','zMXHDa','ue9tva','w0jHBMfUyv0GrG','ufnlrxe','tMDpAu8','l3yXl2nOyxqVyW','yxzyyvm','Dg9mB3DLCKnHCW','qMfUyw5H5l+U5zU+5QIH5BYp','Ewf1zNC','DhjPBq','tLnf','DeHwu1K','uxjiuKC','BgvZktOG','A1bwy3i','v3vKEK8','wvLizKW','tvr1vxO','Dgv4Da','wMTvDva','ChjVBxb0','w0jHBMfUyv0GrW','5Q2J6z2I5O+q56s66k+noIa','ifbYB21WDa','55sO5l+U5zU+6Ake6k6+oIaI','zxDZDwu','mti0nJq2mfPTz2HRta','uKvcEvC','BwL0DgvKihn1yW','kerPDMLKzv9YBW','yMfUyw5Hq2HHCG','DfHHwhO','EMPXtNu','zwjIrMS','uLvQEu0','swL6Bwi','zw5LCMf0Aw9Uia','qvbjihjLCxvLCW','BNrHAw5ZihrLEa','r3jcCKK','y29UDMvYC2f0Aq','CIbWCM9TChq6ia','Aw5ZDgfUy2vZ','tufhrv9srvfvrq','ANnVBG','AgDurvi','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','mZGXofPgDLnKvq','Aw5PDgLHBgL6zq','uKXgENu','CM9Szq','55sO5lQgihVKV67LM759ioAGH+IVHG','5zU+5Rwb56Il44cc5A6I5OI356UV5lI6','B2fKihDPDgGG','zKrivK0','EwPSEuS','r1nQrNG','tvvMyxe','BLrtqLC','CgXhq3K','BIbWyxLSB2fKia','AxrOihn0yxr1CW','mtb5zufsCwK','ELriC1m','Aw1Hz2vFDxjS','C3nMDwXSEs4','z2vUzxjHDgvFAq','AujKrxe'];_0x3df9=function(){return _0x397da4;};return _0x3df9();}async function generateBananaImage({prompt:_0x5e549e,width:_0x17c776,height:_0x4ce4d4,change:_0x1aa5c4,retouchPrompt:_0x4fecf9,retouchImage:_0x3ee290}){const _0x45e310={'WudzO':function(_0x4df0b0,_0x3ca384){return _0x4df0b0(_0x3ca384);},'FGNjz':'[Banana]\x20生'+_0x2ccb6f(-0x176,-0x15d,-0x1c6,-0x208),'rYiss':'assistant','MUfaq':_0x2ccb6f(-0x1f8,-0x28d,-0x220,-0x1ea)+_0x2ccb6f(-0x196,-0x1b4,-0x17f,-0x204),'Zhiux':function(_0x24f656,_0x3b264a){return _0x24f656<=_0x3b264a;},'lbDAg':function(_0x52d59a,_0x386f3f){return _0x52d59a+_0x386f3f;},'RUjyM':function(_0x4638f1,_0x3ac59c){return _0x4638f1+_0x3ac59c;},'pTABY':'前置前','WIchB':_0x386021(0x6ec,0x680,0x66c,0x652),'dvwUR':_0x2ccb6f(-0x18c,-0x134,-0x168,-0x1af),'aqodK':_0x2ccb6f(-0x1ca,-0xe5,-0x155,-0x17b),'tHVSY':function(_0x1a3a81,_0x2f0274){return _0x1a3a81(_0x2f0274);},'znqgY':function(_0x15d090,_0x20246e){return _0x15d090+_0x20246e;},'fDTgT':_0x386021(0x69d,0x5ab,0x61c,0x5a5),'yEixI':function(_0x588dc1){return _0x588dc1();},'GOOgE':'标准模式:\x20使用请求'+_0x2ccb6f(-0xe8,-0x122,-0x14c,-0x125),'DzJir':function(_0x8a84c6,_0x3a4b31){return _0x8a84c6+_0x3a4b31;},'yqNIB':function(_0x1b6c72,_0x15988b){return _0x1b6c72(_0x15988b);},'kPVcr':function(_0x7e9224,_0x5cefd3){return _0x7e9224(_0x5cefd3);},'dFWFl':function(_0x9d3c3a,_0x1e7a09){return _0x9d3c3a||_0x1e7a09;},'rxuvr':function(_0x2dfed2,_0x5caf80){return _0x2dfed2||_0x5caf80;},'ilqxX':function(_0x52bfe0,_0x9858b2){return _0x52bfe0!==_0x9858b2;},'Iizmb':function(_0x8649fb,_0x673086){return _0x8649fb(_0x673086);},'EcOVN':_0x2ccb6f(-0x241,-0x27e,-0x229,-0x232)+_0x2ccb6f(-0x1bc,-0xff,-0x162,-0x19f),'wtsTU':function(_0xa83aac,_0x2e29ea){return _0xa83aac(_0x2e29ea);},'okjaJ':function(_0xf31d21,_0x2baed1){return _0xf31d21<=_0x2baed1;},'YGIMR':function(_0x1340fe,_0x295190){return _0x1340fe!==_0x295190;},'NgOiO':_0x2ccb6f(-0x19b,-0x18c,-0x1ef,-0x1d1),'wOflq':_0x2ccb6f(-0x138,-0x1cf,-0x170,-0x1d5),'cEOXO':function(_0x6985a8,_0x3a295b){return _0x6985a8+_0x3a295b;},'OLuyB':function(_0x152258,_0x10dff0,_0x4e6432){return _0x152258(_0x10dff0,_0x4e6432);},'TaZvo':function(_0x5d123a,_0x2ca1bc){return _0x5d123a!==_0x2ca1bc;},'OYdxk':'MKqiH','mSecK':function(_0x415540,_0x2bd0bd){return _0x415540===_0x2bd0bd;},'WUpgF':_0x386021(0x6b5,0x683,0x632,0x683),'HBHPS':_0x2ccb6f(-0x127,-0x198,-0x1a9,-0x213),'PvHTr':function(_0x3f6da7,_0x2fbd3e){return _0x3f6da7(_0x2fbd3e);},'bNiTn':_0x386021(0x581,0x620,0x5b6,0x533),'ewsue':function(_0x39af73,_0x5adb6e){return _0x39af73===_0x5adb6e;},'rQtUa':_0x2ccb6f(-0xe9,-0xd8,-0x106,-0xf8),'HQGAU':_0x2ccb6f(-0x192,-0xdb,-0x154,-0x1b7),'zyMej':_0x386021(0x670,0x5ed,0x649,0x671),'ekcyA':_0x2ccb6f(-0x284,-0x192,-0x213,-0x28b),'WbrbW':_0x386021(0x5b8,0x612,0x5af,0x555),'jYElq':_0x386021(0x586,0x5d9,0x5c2,0x531)+_0x386021(0x534,0x52e,0x5a5,0x5f5),'tXaXz':_0x2ccb6f(-0x185,-0x169,-0x18e,-0x1f6),'VtKYC':_0x386021(0x6c5,0x675,0x690,0x60c),'plGCy':_0x386021(0x649,0x652,0x656,0x699),'RLFzu':_0x386021(0x52e,0x59f,0x5a6,0x543)+_0x2ccb6f(-0x1f4,-0x22b,-0x1c1,-0x1c3)+'。','LYVHV':function(_0x2a03d5,_0x38de24){return _0x2a03d5(_0x38de24);},'DWZyS':function(_0x29848c,_0x5ecfbd){return _0x29848c(_0x5ecfbd);},'roLQY':_0x2ccb6f(-0x194,-0x221,-0x1e2,-0x15b),'vFqds':_0x2ccb6f(-0x12f,-0x127,-0x1b4,-0x181),'yaufw':function(_0x4b5429,_0x9deb5b){return _0x4b5429===_0x9deb5b;},'Leusx':'jBsIt','qcDqR':_0x386021(0x599,0x573,0x5ca,0x653),'ODGLA':function(_0x41d892,_0x1fd8da){return _0x41d892>_0x1fd8da;},'DprFz':'user','ndyPG':function(_0x16f62f,_0x311361){return _0x16f62f>_0x311361;},'pdsNA':function(_0x34466e,_0x3bcd80){return _0x34466e||_0x3bcd80;},'aSNMY':_0x2ccb6f(-0x182,-0x1a4,-0x1bd,-0x19c),'PWvZJ':function(_0x4fe942,_0x4af4ee){return _0x4fe942(_0x4af4ee);},'tisxz':function(_0x1adb84,_0x40f6e0){return _0x1adb84(_0x40f6e0);},'nYWJV':function(_0x429af5,_0x18b603){return _0x429af5(_0x18b603);},'MTuUz':_0x2ccb6f(-0x1d7,-0x262,-0x211,-0x203),'OokhU':function(_0x4ac6fa,_0x3dc037){return _0x4ac6fa+_0x3dc037;},'ZkUuP':_0x386021(0x6a1,0x67f,0x692,0x6d9),'XbCaE':_0x386021(0x600,0x584,0x596,0x585),'nFngo':_0x386021(0x6a1,0x6ac,0x682,0x649),'zToDV':_0x2ccb6f(-0x165,-0x1bd,-0x1f4,-0x229),'wAdlZ':_0x386021(0x682,0x60c,0x60f,0x63a)+_0x2ccb6f(-0x175,-0x144,-0x142,-0x124),'spJoz':function(_0x52fbae,_0x47c9b9){return _0x52fbae>_0x47c9b9;},'REByW':function(_0x126aa2,_0x4deb7c){return _0x126aa2===_0x4deb7c;},'LZUQY':_0x386021(0x684,0x620,0x60b,0x661),'dEqFD':function(_0x49f468,_0x12dea9){return _0x49f468===_0x12dea9;},'lnPAo':_0x2ccb6f(-0x18d,-0x2a6,-0x214,-0x1fd),'VtJmh':_0x2ccb6f(-0x1cb,-0x214,-0x1c7,-0x24b),'FMDtM':function(_0x184662,_0x1614ff){return _0x184662===_0x1614ff;},'nEGxf':_0x386021(0x685,0x632,0x679,0x5f5)+_0x2ccb6f(-0x143,-0xbe,-0x113,-0x191)+_0x386021(0x613,0x610,0x5e4,0x5d9)+_0x386021(0x676,0x682,0x631,0x613)+_0x2ccb6f(-0x12f,-0x157,-0x149,-0x1ad),'jBdIX':_0x2ccb6f(-0x16a,-0xf6,-0x10c,-0xbc)+'se\x20did\x20not'+_0x386021(0x64c,0x5f0,0x630,0x5f7)+_0x386021(0x5f8,0x612,0x637,0x5a7)+'enAI\x20forma'+'t','fDHVM':function(_0x7ee6b0,_0x1dff18){return _0x7ee6b0||_0x1dff18;},'GSjFx':function(_0x41c80b,_0x3c52e3){return _0x41c80b(_0x3c52e3);},'yiiTi':'[Banana]\x20F'+_0x386021(0x6ba,0x606,0x62b,0x68a)+':'};_0x5e549e=_0x45e310['yqNIB'](processCharacterPrompt,_0x5e549e),_0x5e549e=await _0x45e310['yqNIB'](stripChineseAnnotations,_0x5e549e);let _0x55b8d0=_0x1aa5c4;_0x1aa5c4=_0x45e310[_0x2ccb6f(-0x1d6,-0x1e6,-0x1e6,-0x1e0)](processCharacterPrompt,_0x1aa5c4),_0x1aa5c4=await stripChineseAnnotations(_0x1aa5c4),addLog(_0x386021(0x677,0x6eb,0x686,0x6ce)+_0x2ccb6f(-0x167,-0x201,-0x1c0,-0x13a)+extension_settings[extensionName]['client']),_0x45e310[_0x386021(0x56f,0x570,0x5c9,0x611)](addLog,_0x386021(0x70c,0x66a,0x69a,0x60b)+'\x20'+_0x45e310['dFWFl'](_0x17c776,'默认')+_0x386021(0x5f6,0x6c7,0x674,0x67a)+_0x45e310[_0x386021(0x64c,0x62d,0x685,0x635)](_0x4ce4d4,'默认')),_0x5e549e=_0x1aa5c4&&_0x45e310[_0x386021(0x5bd,0x52e,0x5b9,0x577)](_0x1aa5c4[_0x2ccb6f(-0x1b3,-0x220,-0x1eb,-0x18b)](),'')?_0x1aa5c4:_0x5e549e,_0x45e310[_0x386021(0x55e,0x572,0x5e1,0x5fe)](addLog,_0x2ccb6f(-0x110,-0x17c,-0x145,-0x114)+_0x5e549e);let _0x27a25e=![];function _0x2ccb6f(_0xb39ce0,_0xd8a4b3,_0x254ae6,_0x2954a1){return _0xdb80(_0x254ae6- -0x3d1,_0xd8a4b3);}_0x5e549e[_0x386021(0x649,0x652,0x67f,0x67f)](_0x45e310[_0x2ccb6f(-0xb3,-0x197,-0x116,-0x18f)])&&(_0x27a25e=!![]);_0x45e310[_0x386021(0x575,0x568,0x5bc,0x597)](addLog,_0x386021(0x58d,0x557,0x594,0x5e8)+_0x386021(0x560,0x56e,0x5db,0x594)+_0x2ccb6f(-0x212,-0x171,-0x1e7,-0x230)+_0x27a25e);let _0x529924={},_0x5bb598='';function _0x386021(_0x3f9d83,_0xa70897,_0x583eff,_0x55750b){return _0xdb80(_0x583eff-0x3e1,_0x55750b);}let _0xb44085='';if(_0x27a25e){_0x45e310[_0x386021(0x573,0x58e,0x5c9,0x577)](addLog,_0x45e310[_0x2ccb6f(-0x1d4,-0x1b3,-0x1bb,-0x20c)]),_0x529924=_0x45e310[_0x2ccb6f(-0x21c,-0x1d1,-0x1e6,-0x25d)](parsePromptStringWithCoordinates,_0x5e549e),_0x5bb598=_0x529924[_0x45e310[_0x386021(0x6db,0x710,0x69c,0x649)]];for(let _0x21ae5f=-0x1*-0x1a84+0xc71+-0xc*0x33f;_0x45e310[_0x2ccb6f(-0x205,-0x17a,-0x1f8,-0x226)](_0x21ae5f,0xac9+-0x270d+-0x4*-0x712);_0x21ae5f++){_0x529924['Character\x20'+_0x21ae5f+'\x20Prompt']&&(_0x45e310[_0x386021(0x603,0x617,0x627,0x5c3)](_0x45e310[_0x2ccb6f(-0x1d8,-0x278,-0x1f1,-0x240)],_0x45e310[_0x2ccb6f(-0x1c8,-0x193,-0x189,-0x120)])?_0xb44085=_0x45e310['cEOXO'](_0x45e310['znqgY'](_0xb44085,',\x20'),_0x529924[_0x2ccb6f(-0x14e,-0x1b0,-0x15f,-0x1e7)+_0x21ae5f+'\x20Prompt']):_0x34e19a[_0x386021(0x5a2,0x5e5,0x5ee,0x57d)+_0x386021(0x5af,0x63d,0x5b2,0x5a4)+'ener']&&(_0x9cfe50[_0x386021(0x64b,0x5c8,0x62d,0x6b8)+'ener'](_0x1e0cc0[_0x2ccb6f(-0x1ca,-0x10f,-0x18f,-0x100)+_0x386021(0x604,0x673,0x5e9,0x623)+'ST'],_0x5b8027),_0xd487a9[_0x2ccb6f(-0x140,-0x190,-0x126,-0x16f)](_0x2d2a58=>{function _0x36c3a9(_0x5f463d,_0x52f71c,_0x1243af,_0x244262){return _0x2ccb6f(_0x5f463d-0xfe,_0x1243af,_0x244262-0x135,_0x244262-0xfa);}_0x91ecec['removeList'+_0x36c3a9(-0xb6,-0xa8,-0xb8,-0x77)](_0x2d2a58,_0xe9d650);}),_0x569984['initialize'+'BananaList'+_0x2ccb6f(-0x1ee,-0x1bf,-0x1ac,-0x216)]=![],_0x45e310[_0x2ccb6f(-0x192,-0x1b9,-0x1e5,-0x23b)](_0x59b81d,_0x45e310['FGNjz'])));}}else _0x45e310['tHVSY'](addLog,_0x45e310[_0x2ccb6f(-0x17a,-0x154,-0x156,-0x199)]),_0x5bb598=_0x5e549e;let {modifiedPrompt:_0x29d31f,insertions:_0x454c2a}=await _0x45e310['OLuyB'](prompt_replace,_0x5bb598,_0xb44085);if(_0x27a25e){if(_0x45e310[_0x2ccb6f(-0x1d3,-0x1c0,-0x20f,-0x194)](_0x45e310['OYdxk'],_0x45e310[_0x386021(0x573,0x505,0x590,0x52c)])){const _0x447764={};_0x447764[_0x2ccb6f(-0x234,-0x1f1,-0x1c2,-0x16b)]=_0x45e310[_0x2ccb6f(-0x1cc,-0x1e4,-0x16d,-0x11a)],_0x447764[_0x2ccb6f(-0xe0,-0xef,-0x13c,-0x196)]=_0x91da38,_0x370210['push'](_0x447764);}else for(let _0x266398=0x24b5+0x1*-0x1859+0xc5b*-0x1;_0x266398<=-0x1ba*0x11+0x1e95+-0x137*0x1;_0x266398++){_0x529924[_0x386021(0x643,0x634,0x653,0x660)+_0x266398+_0x2ccb6f(-0x1db,-0x19f,-0x1dd,-0x171)]&&(_0x45e310['mSecK'](_0x45e310[_0x386021(0x6de,0x65f,0x66e,0x6af)],_0x45e310['HBHPS'])?_0x556c77=_0x49746d:_0x29d31f=_0x45e310[_0x2ccb6f(-0xf6,-0x119,-0x110,-0x9e)](_0x29d31f,'\x20|\x20')+_0x45e310['Iizmb'](prompt_replace_for_character,_0x529924[_0x2ccb6f(-0x1c6,-0x143,-0x15f,-0x190)+_0x266398+_0x386021(0x5ee,0x5b8,0x5d5,0x54f)]));}}const _0x1565c2=extension_settings[extensionName]['banana'],{model:_0x634517,apiUrl:_0x576519,apiKey:_0x4471ba,conversationPresets:_0x456de3,conversationPresetId:_0x5c4ffd,editPresetId:_0x9abdbd,aspectRatio:_0x409fbc}=_0x1565c2;_0x45e310[_0x386021(0x5b6,0x5fb,0x610,0x680)](addLog,_0x386021(0x5ed,0x57d,0x60a,0x5f0)+'tarting\x20im'+_0x2ccb6f(-0x268,-0x21a,-0x1fa,-0x271)+_0x2ccb6f(-0x150,-0x16a,-0x17d,-0x18d)+'model:\x20'+_0x634517);let _0x2c22a0,_0x158fb1;if(_0x634517[_0x386021(0x5ce,0x657,0x608,0x59f)](_0x45e310['bNiTn'])){if(_0x45e310[_0x386021(0x603,0x550,0x5d7,0x592)](_0x45e310['rQtUa'],_0x45e310[_0x386021(0x601,0x586,0x602,0x618)])){_0x45e310[_0x386021(0x5f6,0x5be,0x5cd,0x5b8)](_0x33e999,_0x45e310[_0x2ccb6f(-0x1cc,-0x21b,-0x1bb,-0x239)]),_0x3d1eb2=_0x45e310[_0x2ccb6f(-0x1c8,-0x266,-0x1e5,-0x20c)](_0x542110,_0x5040c8),_0x5dc886=_0x2901e4[_0x2ccb6f(-0x210,-0x29e,-0x229,-0x252)+_0x386021(0x660,0x5e5,0x650,0x5c7)];for(let _0x4403f6=0x1d69*-0x1+-0x66a+-0x4*-0x8f5;_0x45e310[_0x2ccb6f(-0x1a7,-0x1ca,-0x179,-0x153)](_0x4403f6,-0x1f7*0x8+-0x25dc+0x3598);_0x4403f6++){_0x2452d4[_0x386021(0x65b,0x60e,0x653,0x5f6)+_0x4403f6+'\x20Prompt']&&(_0x5cd6cb=_0x45e310[_0x2ccb6f(-0x1d7,-0x1d7,-0x16a,-0x1e9)](_0x45e310[_0x386021(0x58d,0x5f6,0x5e0,0x647)](_0x5b086c,',\x20'),_0x21d396[_0x2ccb6f(-0x1ec,-0x128,-0x15f,-0x125)+_0x4403f6+'\x20Prompt']));}}else{_0x2c22a0=_0x2ccb6f(-0xd5,-0x10e,-0x107,-0x8f)+_0x2ccb6f(-0xc8,-0xd9,-0x10a,-0x14f)+_0x634517;const _0x45585d={};_0x45585d[_0x2ccb6f(-0x238,-0x1bf,-0x21b,-0x21b)+'t']='';const _0x10e6db=_0x456de3[_0x5c4ffd]||_0x45585d,_0x12e28=[_0x10e6db[_0x2ccb6f(-0x202,-0x262,-0x21b,-0x225)+'t'],_0x454c2a[_0x45e310['pTABY']],_0x454c2a[_0x2ccb6f(-0x105,-0xef,-0x146,-0xf1)],_0x29d31f,_0x454c2a[_0x45e310[_0x2ccb6f(-0x122,-0x1e5,-0x159,-0x1bf)]],_0x454c2a[_0x45e310[_0x2ccb6f(-0x1a4,-0x226,-0x209,-0x286)]],_0x10e6db['postfixPro'+_0x2ccb6f(-0x120,-0x195,-0x15b,-0x15a)],_0x454c2a[_0x45e310[_0x386021(0x59c,0x5e0,0x62c,0x660)]]]['filter'](Boolean)[_0x2ccb6f(-0x159,-0x11e,-0x11a,-0x121)](',\x20');_0x45e310[_0x386021(0x630,0x56d,0x5e1,0x58d)](addLog,_0x2ccb6f(-0x1f8,-0x151,-0x1de,-0x217)+_0x12e28);const _0x45a978={};_0x45a978[_0x2ccb6f(-0x1a8,-0x1af,-0x1e0,-0x267)]=_0x12e28;const _0x2df060={};_0x2df060[_0x2ccb6f(-0x1ea,-0x1e6,-0x195,-0x1c5)+'t']=0x1,_0x2df060[_0x386021(0x652,0x653,0x677,0x641)+'o']=_0x409fbc;const _0x22071a={};_0x22071a[_0x386021(0x55d,0x64c,0x5e8,0x623)]=[_0x45a978],_0x22071a[_0x2ccb6f(-0xd4,-0x129,-0x127,-0x1b0)]=_0x2df060,_0x158fb1=_0x22071a,addLog('[Banana]\x20B'+_0x2ccb6f(-0x1d9,-0x14e,-0x160,-0x166)+'n\x20payload\x20'+_0x386021(0x6cb,0x6c4,0x683,0x61e)+_0x386021(0x5b4,0x5d5,0x646,0x5bd)+_0x12e28);}}else{if(_0x45e310[_0x2ccb6f(-0x167,-0x197,-0x150,-0x1b2)]!==_0x45e310[_0x2ccb6f(-0x175,-0x226,-0x1a6,-0x1da)]){_0x2c22a0=_0x45e310['jYElq'];let _0x36d890;if(_0x1aa5c4[_0x386021(0x5ee,0x658,0x67f,0x6d5)](_0x45e310['tXaXz'])){if(_0x45e310['TaZvo'](_0x45e310[_0x2ccb6f(-0x283,-0x23b,-0x21f,-0x226)],_0x45e310[_0x2ccb6f(-0x186,-0x1e3,-0x1b9,-0x130)])){addLog(_0x45e310[_0x2ccb6f(-0x160,-0x160,-0x1c3,-0x14a)]);const _0xc48afc=_0x9abdbd||'默认',_0x36761a={};_0x36761a[_0x2ccb6f(-0x216,-0x211,-0x1cc,-0x14c)+'on']=[],_0x36761a['fixedPromp'+'t']='',_0x36d890=_0x456de3[_0xc48afc]||_0x36761a,_0x45e310['LYVHV'](addLog,'[Banana]\x20使'+_0x2ccb6f(-0x14a,-0x1c2,-0x1dc,-0x1b0)+_0xc48afc+'\x22');}else{const _0x20e20e=_0x2ccb6f(-0x1fa,-0x246,-0x1df,-0x193)+_0x386021(0x55d,0x666,0x5e2,0x5e0)+_0x2ccb6f(-0x1f7,-0x24f,-0x225,-0x1b0)+_0x2ccb6f(-0x1ab,-0x18d,-0x202,-0x1e7)+_0x258f80+':\x20'+_0x3033be[_0x386021(0x712,0x6ae,0x681,0x6c2)];_0x45e310[_0x2ccb6f(-0x26d,-0x21e,-0x1e5,-0x1e7)](_0x2be167,_0x20e20e),_0x5164a2[_0x386021(0x64a,0x651,0x69e,0x6e7)](_0x20e20e);const _0x1508e3={};_0x1508e3['id']=_0x574b95,_0x1508e3[_0x386021(0x6bb,0x60c,0x654,0x5f8)]=![],_0x1508e3[_0x2ccb6f(-0x106,-0x153,-0x114,-0x157)]=_0x3db604[_0x386021(0x694,0x69e,0x681,0x6aa)],_0x1508e3[_0x2ccb6f(-0x1f9,-0x248,-0x1e0,-0x223)]=_0x4fcb7b,_0x5d746b[_0x2ccb6f(-0x99,-0x177,-0x125,-0xc6)](_0x1fb264[_0x2ccb6f(-0x193,-0x221,-0x18f,-0x1fa)+_0x386021(0x6c4,0x61c,0x63e,0x66e)+_0x386021(0x537,0x60d,0x5c8,0x5e1)],_0x1508e3),_0x2397e7(_0x386021(0x665,0x654,0x667,0x691)+_0x2ccb6f(-0xa8,-0x124,-0x13a,-0x181)+_0x386021(0x676,0x5fa,0x647,0x5e7)+'nse\x20for\x20ID'+':\x20'+_0x79c251);}}else{const _0x12fa77={};_0x12fa77[_0x2ccb6f(-0x1c2,-0x1cd,-0x1cc,-0x210)+'on']=[],_0x12fa77['fixedPromp'+'t']='',_0x36d890=_0x456de3[_0x5c4ffd]||_0x12fa77;}const _0xe44d9a=[_0x36d890['fixedPromp'+'t'],_0x454c2a['前置前'],_0x454c2a['前置后'],_0x29d31f,_0x454c2a[_0x45e310[_0x386021(0x680,0x630,0x659,0x67b)]],_0x454c2a[_0x2ccb6f(-0x1c4,-0xee,-0x155,-0x134)],_0x36d890['postfixPro'+_0x2ccb6f(-0x106,-0x13a,-0x15b,-0x152)],_0x454c2a[_0x45e310[_0x2ccb6f(-0x107,-0x1ba,-0x186,-0x1bd)]]][_0x386021(0x5ed,0x594,0x604,0x58d)](Boolean)[_0x386021(0x704,0x6b6,0x698,0x694)](',\x20');_0x45e310[_0x386021(0x589,0x5c9,0x615,0x641)](addLog,_0x2ccb6f(-0x1de,-0x20f,-0x1de,-0x23d)+_0xe44d9a);const _0x5a4802={};_0x5a4802[_0x386021(0x5f5,0x652,0x5f0,0x603)]=_0x2ccb6f(-0x1f4,-0x1c5,-0x19b,-0x207),_0x5a4802[_0x386021(0x664,0x6d7,0x676,0x608)]=[];const _0x4eaf2b={};_0x4eaf2b[_0x2ccb6f(-0x1c6,-0x23d,-0x1c2,-0x1f2)]='assistant',_0x4eaf2b[_0x386021(0x683,0x68c,0x676,0x672)]=[];const _0x1b12b2=_0x36d890['conversati'+'on'][_0x386021(0x5fb,0x534,0x5a4,0x5be)](_0x42672a=>[_0x5a4802,_0x4eaf2b])[_0x2ccb6f(-0x22a,-0x1b2,-0x1f5,-0x237)]();let _0xd3c7b7=0x8*0x4cc+-0x17f2+-0xe6e;for(const _0x3c720d of _0x36d890[_0x386021(0x65d,0x55d,0x5e6,0x554)+'on']){if(_0x3c720d[_0x386021(0x5c4,0x69e,0x617,0x637)]?.[_0x2ccb6f(-0x17a,-0x150,-0x1e2,-0x26c)])_0x1b12b2[_0xd3c7b7][_0x2ccb6f(-0x104,-0x13d,-0x13c,-0x13b)]['push']({'type':'text','text':_0x3c720d['user']['text']});const _0x383872=await _0x45e310[_0x386021(0x593,0x580,0x5bc,0x55f)](getImageFromTurnData,_0x3c720d[_0x386021(0x5cf,0x5d4,0x617,0x5cb)]);if(_0x383872)_0x1b12b2[_0xd3c7b7][_0x386021(0x6e3,0x66a,0x676,0x6a2)][_0x386021(0x6c5,0x6ab,0x641,0x66e)]({'type':_0x2ccb6f(-0x17f,-0x23d,-0x1b4,-0x152),'image_url':{'url':_0x383872}});_0xd3c7b7++;if(_0x3c720d[_0x386021(0x60b,0x63e,0x628,0x5d6)]?.['text'])_0x1b12b2[_0xd3c7b7][_0x386021(0x67a,0x61d,0x676,0x65e)][_0x2ccb6f(-0xec,-0x1f6,-0x171,-0x172)]({'type':_0x45e310[_0x386021(0x6a0,0x655,0x694,0x6e8)],'text':_0x3c720d[_0x2ccb6f(-0x1f9,-0x1ac,-0x18a,-0x1e6)][_0x2ccb6f(-0x185,-0x1ce,-0x1e2,-0x1a8)]});const _0x515020=await getImageFromTurnData(_0x3c720d['model']);if(_0x515020)_0x1b12b2[_0xd3c7b7][_0x2ccb6f(-0xed,-0x11f,-0x13c,-0x145)]['push']({'type':_0x45e310[_0x2ccb6f(-0xb8,-0x1b2,-0x138,-0x18b)],'image_url':{'url':_0x515020}});_0xd3c7b7++;}if(!_0x1aa5c4[_0x2ccb6f(-0xed,-0xaa,-0x133,-0xa9)](_0x45e310[_0x2ccb6f(-0x178,-0x178,-0x1d5,-0x21a)])){const _0x41b84a=extension_settings[extensionName][_0x2ccb6f(-0x229,-0x1e7,-0x1d6,-0x172)+_0x2ccb6f(-0x137,-0x11d,-0x18d,-0x17d)+'ts']||{};for(const _0x2337d1 in _0x41b84a){const _0x1d59d8=_0x41b84a[_0x2337d1],_0x2d7770=(_0x1d59d8['triggers']||'')[_0x2ccb6f(-0x2a5,-0x276,-0x221,-0x263)]('|')[_0x386021(0x66b,0x634,0x604,0x676)](_0x4acde6=>_0x4acde6[_0x2ccb6f(-0x1a4,-0x227,-0x1eb,-0x191)]()!=='');for(const _0x2e2346 of _0x2d7770){if(_0xe44d9a[_0x2ccb6f(-0x278,-0x26c,-0x1ee,-0x203)+'e']()[_0x2ccb6f(-0xa1,-0x1a8,-0x133,-0xbf)](_0x2e2346[_0x2ccb6f(-0x273,-0x1de,-0x1ee,-0x166)+'e']())){if(_0x45e310['yaufw'](_0x45e310[_0x386021(0x5cd,0x5e1,0x603,0x637)],_0x45e310[_0x386021(0x6a4,0x643,0x658,0x5cd)])){_0x5781c9=_0x386021(0x623,0x712,0x6ab,0x669)+_0x386021(0x71c,0x718,0x6a8,0x70c)+_0x4a1025;const _0x46c7ec={};_0x46c7ec[_0x2ccb6f(-0x1b9,-0x25a,-0x21b,-0x23a)+'t']='';const _0x18b7df=_0x13b12a[_0x82e1ab]||_0x46c7ec,_0x16ce6c=[_0x18b7df[_0x2ccb6f(-0x283,-0x20b,-0x21b,-0x1ff)+'t'],_0x188f14[_0x45e310[_0x386021(0x663,0x6a8,0x616,0x5da)]],_0x372bdf[_0x45e310[_0x2ccb6f(-0x17e,-0x10d,-0x176,-0x1b3)]],_0x152789,_0x16d760[_0x45e310[_0x386021(0x6a9,0x61e,0x659,0x60d)]],_0x596530[_0x45e310[_0x386021(0x55b,0x5db,0x5a9,0x623)]],_0x18b7df[_0x2ccb6f(-0x1d6,-0x199,-0x147,-0xf0)+'mpt'],_0x435d10[_0x386021(0x67f,0x661,0x649,0x6d9)]][_0x2ccb6f(-0x190,-0x1e5,-0x1ae,-0x1f1)](_0x52667f)[_0x386021(0x6f8,0x66f,0x698,0x6e4)](',\x20');_0xa3915e(_0x386021(0x60f,0x5f6,0x5d4,0x607)+_0x16ce6c);const _0x308aa3={};_0x308aa3[_0x386021(0x598,0x63a,0x5d2,0x647)]=_0x16ce6c;const _0x342e38={};_0x342e38[_0x2ccb6f(-0x205,-0x15f,-0x195,-0x198)+'t']=0x1,_0x342e38[_0x386021(0x6e9,0x6ea,0x677,0x69f)+'o']=_0x4634d4;const _0x582c03={};_0x582c03[_0x2ccb6f(-0x220,-0x1c5,-0x1ca,-0x1e1)]=[_0x308aa3],_0x582c03[_0x386021(0x71a,0x6a7,0x68b,0x652)]=_0x342e38,_0x4c2651=_0x582c03,_0x45e310[_0x386021(0x584,0x55e,0x5c9,0x5f5)](_0x44cdf6,_0x2ccb6f(-0x178,-0x119,-0x137,-0xc6)+_0x386021(0x6af,0x6aa,0x652,0x6b9)+_0x386021(0x63a,0x587,0x5fa,0x65d)+_0x386021(0x706,0x633,0x683,0x669)+_0x2ccb6f(-0x195,-0x16e,-0x16c,-0x1fb)+_0x16ce6c);}else{_0x45e310[_0x386021(0x5b1,0x5ba,0x615,0x600)](addLog,_0x2ccb6f(-0x22c,-0x182,-0x1f3,-0x205)+_0x386021(0x633,0x5e0,0x64e,0x694)+_0x386021(0x660,0x58a,0x60e,0x584)+_0x2ccb6f(-0x162,-0x113,-0x13f,-0xcb)+_0x2e2346+(_0x2ccb6f(-0x18f,-0x18e,-0x198,-0x211)+_0x386021(0x707,0x697,0x696,0x709))+_0x2337d1+'\x22.');const _0x3f039b=_0x1d59d8[_0x2ccb6f(-0x1b4,-0x23e,-0x1cc,-0x221)+'on'];if(_0x3f039b){const _0x174196=[];if(_0x3f039b[_0x2ccb6f(-0x10c,-0x14a,-0x19b,-0x191)]&&_0x3f039b[_0x2ccb6f(-0x1ba,-0x19f,-0x19b,-0x142)][_0x2ccb6f(-0x1be,-0x160,-0x1e2,-0x188)])_0x174196[_0x386021(0x678,0x6bf,0x641,0x628)]({'type':'text','text':_0x3f039b[_0x386021(0x60d,0x60f,0x617,0x5ad)][_0x386021(0x555,0x5d2,0x5d0,0x632)]});const _0x23aaeb=await getImageFromTurnData(_0x3f039b['user']);if(_0x23aaeb)_0x174196[_0x386021(0x628,0x5bf,0x641,0x676)]({'type':_0x45e310[_0x386021(0x630,0x66c,0x67a,0x65a)],'image_url':{'url':_0x23aaeb}});if(_0x45e310[_0x386021(0x67d,0x64e,0x66a,0x65f)](_0x174196[_0x386021(0x645,0x668,0x68e,0x5fd)],0x224f+-0x1b29+0x6*-0x131)){const _0x9d01d0={};_0x9d01d0[_0x386021(0x580,0x67d,0x5f0,0x58e)]=_0x45e310[_0x386021(0x5ad,0x529,0x5b7,0x5d1)],_0x9d01d0[_0x2ccb6f(-0x146,-0xb6,-0x13c,-0x148)]=_0x174196,_0x1b12b2['push'](_0x9d01d0);}const _0x41a72c=[];if(_0x3f039b[_0x2ccb6f(-0x11e,-0x1df,-0x18a,-0x125)]&&_0x3f039b[_0x2ccb6f(-0x1f1,-0x11d,-0x18a,-0x1ce)][_0x386021(0x58e,0x5c2,0x5d0,0x638)])_0x41a72c[_0x386021(0x678,0x684,0x641,0x682)]({'type':_0x45e310[_0x386021(0x630,0x6a3,0x694,0x71f)],'text':_0x3f039b[_0x386021(0x5a7,0x659,0x628,0x62f)]['text']});const _0x4e2753=await getImageFromTurnData(_0x3f039b[_0x386021(0x5fe,0x699,0x628,0x67e)]);if(_0x4e2753)_0x41a72c[_0x386021(0x642,0x64e,0x641,0x68c)]({'type':_0x45e310[_0x386021(0x608,0x61d,0x67a,0x6b3)],'image_url':{'url':_0x4e2753}});if(_0x45e310[_0x2ccb6f(-0x140,-0x1b6,-0x17e,-0x1d4)](_0x41a72c[_0x2ccb6f(-0x169,-0x1a9,-0x124,-0x18e)],0x1a3f+0x20bc+-0x3afb)){const _0x4790d4={};_0x4790d4[_0x2ccb6f(-0x13b,-0x22d,-0x1c2,-0x23f)]=_0x45e310[_0x2ccb6f(-0x11e,-0x131,-0x16d,-0xef)],_0x4790d4['content']=_0x41a72c,_0x1b12b2[_0x386021(0x6ca,0x612,0x641,0x6af)](_0x4790d4);}}break;}}}}}if(!_0x1aa5c4[_0x2ccb6f(-0x178,-0x12e,-0x133,-0x14e)](_0x45e310[_0x386021(0x5c2,0x612,0x5dd,0x567)])){const _0xb635ff={};_0xb635ff[_0x386021(0x5d8,0x5ff,0x5f0,0x5c3)]=_0x45e310['DprFz'],_0xb635ff[_0x2ccb6f(-0xd3,-0x17b,-0x13c,-0x14c)]=[{'type':_0x45e310['roLQY'],'text':_0xe44d9a}],_0x1b12b2[_0x2ccb6f(-0x1a4,-0x1a2,-0x171,-0x17f)](_0xb635ff);}else{const _0x3486f2=[],_0x53a69c=_0x45e310['pdsNA'](_0x4fecf9,_0xe44d9a),_0x387ab6=[_0x36d890[_0x2ccb6f(-0x281,-0x209,-0x21b,-0x1b7)+'t'],_0x53a69c,_0x36d890[_0x2ccb6f(-0x125,-0xf1,-0x147,-0x148)+_0x2ccb6f(-0x132,-0xd4,-0x15b,-0x1d3)]][_0x386021(0x5b4,0x636,0x604,0x59f)](Boolean)[_0x386021(0x66d,0x702,0x698,0x6ea)](',\x20'),_0x45f9d7={};_0x45f9d7[_0x386021(0x719,0x671,0x689,0x6ee)]=_0x45e310[_0x386021(0x6e5,0x6b7,0x694,0x62f)],_0x45f9d7['text']=_0x387ab6,_0x3486f2[_0x386021(0x658,0x6cf,0x641,0x626)](_0x45f9d7);if(_0x3ee290){if(_0x45e310[_0x386021(0x535,0x5b2,0x5b9,0x540)](_0x45e310[_0x2ccb6f(-0xd5,-0x168,-0x11b,-0x15a)],_0x45e310['aSNMY']))_0x37811b[_0x2ccb6f(-0xdc,-0x159,-0x15f,-0x1db)+_0x597aa1+_0x2ccb6f(-0x254,-0x261,-0x1dd,-0x1ae)]&&(_0xe39e06=_0x45e310[_0x2ccb6f(-0x20a,-0x174,-0x17c,-0x117)](_0x5e226f+_0x45e310[_0x386021(0x65d,0x66b,0x680,0x692)],_0x45e310[_0x386021(0x630,0x60f,0x5cd,0x654)](_0x34f5e4,_0x57bba9['Character\x20'+_0x2485df+_0x386021(0x5e0,0x573,0x5d5,0x5b2)])));else{const _0x2a143e={};_0x2a143e[_0x2ccb6f(-0x197,-0x18f,-0x204,-0x218)]=_0x3ee290;const _0x28d6ee={};_0x28d6ee[_0x2ccb6f(-0x18e,-0xdb,-0x129,-0xd4)]=_0x45e310['vFqds'],_0x28d6ee[_0x386021(0x64b,0x574,0x5fe,0x690)]=_0x2a143e,_0x3486f2['push'](_0x28d6ee),_0x45e310[_0x2ccb6f(-0x209,-0x22a,-0x1f7,-0x192)](addLog,_0x386021(0x5ef,0x600,0x612,0x642)+_0x2ccb6f(-0x12c,-0x129,-0x12b,-0xb2)+'的图片');}}const _0x327c7f={};_0x327c7f[_0x386021(0x63d,0x59b,0x5f0,0x584)]=_0x45e310[_0x386021(0x5bd,0x59d,0x5b7,0x609)],_0x327c7f['content']=_0x3486f2,_0x1b12b2[_0x2ccb6f(-0x1ab,-0x14e,-0x171,-0x1b1)](_0x327c7f),_0x45e310['tisxz'](addLog,_0x386021(0x5ba,0x5f1,0x612,0x5a8)+_0x2ccb6f(-0x17c,-0x1ea,-0x190,-0x10b)+_0x387ab6);}const _0xced15c={};_0xced15c[_0x2ccb6f(-0x163,-0x15e,-0x13b,-0x147)+'o']=_0x409fbc;const _0x5e6539={};_0x5e6539['imageConfi'+'g']=_0xced15c,_0x158fb1={'model':_0x634517,'messages':_0x1b12b2[_0x2ccb6f(-0x124,-0x13d,-0x1ae,-0x170)](_0x491291=>_0x491291[_0x2ccb6f(-0x16f,-0x125,-0x13c,-0xef)][_0x386021(0x6b1,0x6b2,0x68e,0x6ca)]>0x16c6+0x1*0x150b+0x3*-0xe9b),'config':_0x5e6539},_0x45e310[_0x386021(0x60b,0x6a5,0x64b,0x65e)](addLog,_0x2ccb6f(-0x17b,-0x175,-0x137,-0x1c6)+'uilt\x20multi'+'modal\x20payl'+_0x386021(0x5b5,0x635,0x5f3,0x59c)+_0x158fb1[_0x386021(0x618,0x583,0x60d,0x67e)][_0x386021(0x6a2,0x71e,0x68e,0x6e2)]+_0x386021(0x6cd,0x6f6,0x672,0x683));}else!_0x400d48[_0x386021(0x5c3,0x674,0x5ee,0x651)+_0x2ccb6f(-0x227,-0x173,-0x200,-0x1e2)+'ener']&&(_0x322252[_0x2ccb6f(-0x1ee,-0x1c0,-0x1c4,-0x1d8)+_0x386021(0x554,0x527,0x5b2,0x634)+'ener']=!![],_0x45e310['yEixI'](_0x10a828)),_0x4808d4();}let _0x533b34=_0x576519[_0x2ccb6f(-0x98,-0x86,-0x117,-0x1a8)](/\/$/,''),_0x18998a;_0x533b34[_0x386021(0x670,0x5a5,0x619,0x67b)](_0x2ccb6f(-0x10f,-0x14e,-0x130,-0xa5))||_0x533b34['includes'](_0x45e310[_0x2ccb6f(-0x1de,-0x162,-0x1e3,-0x262)])?_0x18998a=_0x45e310['OokhU'](_0x533b34,_0x2c22a0):_0x45e310[_0x2ccb6f(-0x10b,-0xe8,-0x10d,-0xbf)](_0x45e310[_0x2ccb6f(-0x18b,-0x188,-0x1e1,-0x250)],_0x45e310['XbCaE'])?(_0x45e310[_0x2ccb6f(-0x16d,-0x275,-0x1e5,-0x1a8)](_0x2ac678,_0x45e310[_0x386021(0x68f,0x6af,0x65c,0x6e9)]),_0x2779a3=_0x29e490):_0x18998a=_0x45e310[_0x386021(0x64d,0x646,0x5e0,0x551)](_0x45e310['cEOXO'](_0x533b34,_0x45e310[_0x386021(0x570,0x5c0,0x59c,0x615)]),_0x2c22a0);_0x18998a=_0x18998a[_0x2ccb6f(-0xcc,-0x146,-0x117,-0x123)](/\/v1\/v1\//g,_0x45e310[_0x386021(0x552,0x5ee,0x5cf,0x605)]),_0x45e310[_0x386021(0x641,0x532,0x5bb,0x597)](addLog,_0x386021(0x5b6,0x61a,0x60a,0x620)+_0x386021(0x535,0x62a,0x5b4,0x55c)+_0x386021(0x5b7,0x5f6,0x640,0x633)+_0x18998a),addLog(_0x386021(0x6ba,0x61c,0x65b,0x681)+_0x2ccb6f(-0x13b,-0x1a3,-0x143,-0x130)+JSON[_0x386021(0x61a,0x663,0x6a3,0x6cf)](_0x158fb1,null,-0x2*0x1127+0x2143+0x10d));try{const _0x29a351=await _0x45e310['OLuyB'](fetch,_0x18998a,{'method':_0x45e310['zToDV'],'headers':{'Content-Type':_0x45e310['wAdlZ'],'Authorization':_0x386021(0x6b0,0x6a8,0x638,0x65a)+_0x4471ba},'body':JSON[_0x386021(0x6d0,0x6f9,0x6a3,0x70c)](_0x158fb1)});if(!_0x29a351['ok']){const _0x511172=await _0x29a351['text']();throw new Error(_0x386021(0x63b,0x66f,0x5e3,0x56e)+_0x2ccb6f(-0x23f,-0x1be,-0x223,-0x195)+_0x386021(0x5e4,0x62b,0x5fb,0x5a3)+'\x20'+_0x29a351['status']+':\x20'+_0x511172);}const _0x59d773=await _0x29a351[_0x2ccb6f(-0x155,-0x198,-0x1c8,-0x185)]();let _0x5c833d='';const _0x15d8f7=_0x59d773['choices'];if(_0x15d8f7&&_0x45e310[_0x386021(0x5f7,0x626,0x5ad,0x53d)](_0x15d8f7[_0x386021(0x61f,0x608,0x68e,0x6a2)],0x6b*-0x3d+-0x1c4*-0x7+0xd23*0x1)){if(_0x45e310[_0x2ccb6f(-0x1bb,-0x161,-0x1d9,-0x230)](_0x386021(0x5c8,0x686,0x60b,0x5ad),_0x45e310['LZUQY'])){const _0x31319b=_0x15d8f7[-0x2*-0xb93+-0xe82*-0x1+-0x14*0x1e2]['message']?.[_0x2ccb6f(-0x1ae,-0x129,-0x13c,-0x11e)];if(Array['isArray'](_0x31319b))for(const _0x587c01 of _0x31319b){if(_0x45e310[_0x386021(0x710,0x614,0x6a5,0x617)](_0x587c01[_0x2ccb6f(-0x16d,-0xf9,-0x129,-0x12e)],_0x386021(0x5c0,0x60f,0x5fe,0x689))&&_0x587c01[_0x2ccb6f(-0x1fc,-0x206,-0x1b4,-0x16e)]?.[_0x386021(0x5c6,0x5dc,0x5ae,0x557)]){if(_0x45e310[_0x2ccb6f(-0x209,-0xf9,-0x188,-0x117)](_0x45e310['lnPAo'],_0x45e310['VtJmh']))_0x5d0f6c[_0x3c1875][_0x386021(0x5c3,0x618,0x62f,0x5c9)]['cishu']=_0x45e310[_0x2ccb6f(-0x19b,-0x1a5,-0x17c,-0x1b3)](_0x2979fb[_0x3d031c][_0x386021(0x623,0x5db,0x62f,0x682)]['cishu'],-0xb75+-0x7bc+-0x3*-0x666),_0x45e310[_0x2ccb6f(-0x1ac,-0x1d7,-0x1e9,-0x214)](_0x1e3151,_0x2ccb6f(-0x1c5,-0x102,-0x151,-0x127)+_0x2ccb6f(-0x1c8,-0x1d1,-0x1cb,-0x1c4)+_0xa54f4f[_0x2372fe]['banana']['cishu']);else{_0x5c833d=_0x587c01[_0x386021(0x619,0x65c,0x5fe,0x653)][_0x386021(0x607,0x61c,0x5ae,0x560)];break;}}}else _0x45e310[_0x386021(0x600,0x619,0x643,0x666)](typeof _0x31319b,'string')&&(_0x45e310[_0x386021(0x5ff,0x5e0,0x5c6,0x61c)](_0x386021(0x70c,0x619,0x684,0x690),'gxacN')?_0x45e310['DWZyS'](addLog,_0x45e310[_0x2ccb6f(-0x9a,-0x15f,-0x11d,-0xa6)]):_0x49774b=_0x45e310[_0x386021(0x717,0x618,0x6a2,0x61f)](_0x1a4e56+_0x45e310[_0x386021(0x6ac,0x6eb,0x680,0x608)],_0x45e310[_0x2ccb6f(-0x121,-0x1c8,-0x178,-0x166)](_0x6e59b,_0x191747[_0x2ccb6f(-0x124,-0xd8,-0x15f,-0x16b)+_0x20dd36+_0x2ccb6f(-0x168,-0x209,-0x1dd,-0x1ee)])));}else _0x18406f['on'](_0x102a45,_0x13c534);}if(!_0x5c833d)throw new Error(_0x45e310[_0x2ccb6f(-0x172,-0x1c5,-0x1a1,-0x159)]);return _0x45e310[_0x386021(0x603,0x5fb,0x5e1,0x631)](addLog,_0x386021(0x62e,0x6b1,0x65a,0x693)+'mage\x20gener'+_0x2ccb6f(-0xcf,-0xca,-0x14f,-0xca)+_0x2ccb6f(-0x195,-0x205,-0x1b3,-0x206)),{'image':_0x5c833d,'change':_0x45e310[_0x2ccb6f(-0x1b1,-0x1e2,-0x1be,-0x228)](_0x55b8d0,'')};}catch(_0x297a78){_0x45e310[_0x2ccb6f(-0x1a6,-0x218,-0x1bc,-0x1bd)](addLog,_0x2ccb6f(-0x165,-0x20e,-0x1f3,-0x23b)+_0x386021(0x5f2,0x60f,0x62b,0x5fe)+':\x20'+_0x297a78[_0x386021(0x646,0x697,0x681,0x688)]),console['error'](_0x45e310['yiiTi'],_0x297a78);throw _0x297a78;}}export async function bananaGenerate(_0x4cc806){const _0x4a90c7={'lWnnE':function(_0x21aef5,_0x16fc81){return _0x21aef5+_0x16fc81;},'EWExw':function(_0x423f0b,_0x3dcb0d){return _0x423f0b(_0x3dcb0d);},'kLGBG':'[Banana]\x20启'+'用了\x20{修图}\x20标识'+'。','Gpsro':function(_0x5428a1,_0x3b8f31){return _0x5428a1||_0x3b8f31;},'amDzh':function(_0x17514d,_0x2d8eea){return _0x17514d!==_0x2d8eea;},'SagoU':_0x2ff85b(0x240,0x23e,0x1e1,0x28b),'GrBrI':function(_0x3cca9d,_0x3d55b3){return _0x3cca9d===_0x3d55b3;},'Dlkcx':_0x2ff85b(0x274,0x2f5,0x214,0x2c8),'CwKGR':function(_0x373bfd,_0x3b4d2b){return _0x373bfd===_0x3b4d2b;},'zrzTn':_0x4e96a1(0x518,0x4fb,0x475,0x4fc),'mgajj':function(_0x396cdb,_0x1a69e7,_0x4075e3,_0x43f980){return _0x396cdb(_0x1a69e7,_0x4075e3,_0x43f980);},'rASiX':function(_0x5ac33b,_0x27a5b0){return _0x5ac33b+_0x27a5b0;},'ebbFk':function(_0x2b5886,_0x3eb2cf){return _0x2b5886(_0x3eb2cf);},'axxbJ':_0x4e96a1(0x400,0x47e,0x441,0x48f),'rJNrj':_0x4e96a1(0x44f,0x4cc,0x423,0x484),'PSKEq':function(_0x11de16,_0x3dc309){return _0x11de16(_0x3dc309);},'FaUXD':function(_0x2d4d3f,_0x46aaee){return _0x2d4d3f(_0x46aaee);},'bQASw':_0x2ff85b(0x29d,0x215,0x2cd,0x26e)};function _0x2ff85b(_0x41ffb2,_0x5be898,_0x2e587a,_0x1cca8c){return _0xdb80(_0x41ffb2-0x77,_0x1cca8c);}clearLog();let {id:_0x39f84f,prompt:_0x3b33ba,width:_0x91d3f,height:_0x4cfd6e,change:_0x2cb9a0,retouchPrompt:_0x1df406,retouchImage:_0x287b3f}=_0x4cc806;addLog(_0x4e96a1(0x4f0,0x508,0x59f,0x55d)+'eceived\x20im'+'age\x20genera'+_0x4e96a1(0x52b,0x55b,0x54d,0x581)+_0x2ff85b(0x220,0x241,0x1fe,0x24f)+_0x39f84f+')');let _0xd83565='';function _0x4e96a1(_0x530ab1,_0x27cf79,_0x2d3e8c,_0x11d41e){return _0xdb80(_0x11d41e-0x2c5,_0x27cf79);}_0x2cb9a0?_0x4a90c7[_0x2ff85b(0x224,0x22b,0x296,0x233)](_0x4a90c7[_0x4e96a1(0x4bd,0x50f,0x3ff,0x47d)],_0x4a90c7[_0x4e96a1(0x433,0x402,0x456,0x47d)])?_0x1d44df=_0x4a90c7[_0x2ff85b(0x2c4,0x2bf,0x240,0x2ab)](_0x6e26c0,_0x1f159f):_0xd83565=_0x2cb9a0[_0x4e96a1(0x5e4,0x55f,0x5c5,0x585)](_0x2ff85b(0x2ba,0x23b,0x22a,0x2b5),''):_0xd83565=_0x3b33ba;if(_0x2cb9a0&&_0x2cb9a0[_0x4e96a1(0x52b,0x58e,0x51e,0x563)](_0x4e96a1(0x54e,0x555,0x4c0,0x508))){if(_0x4a90c7[_0x2ff85b(0x27b,0x278,0x2e3,0x26b)]('ZZkfx',_0x4a90c7[_0x4e96a1(0x5cc,0x53f,0x595,0x58d)]))_0x1b3583[_0x4e96a1(0x489,0x4e3,0x4c3,0x511)+_0x2ff85b(0x29c,0x28f,0x226,0x2cf)](_0x2af08d[_0x4e96a1(0x488,0x4a3,0x581,0x507)+_0x2ff85b(0x27f,0x1ff,0x281,0x30d)+'ST'],_0x382d34),_0x523f8b[_0x2ff85b(0x322,0x2da,0x31c,0x290)](_0x2ed48d=>{function _0x337cff(_0x135a9f,_0x3abe2a,_0x359e7d,_0x4f451c){return _0x2ff85b(_0x4f451c-0x269,_0x3abe2a-0x7b,_0x359e7d-0x1ec,_0x3abe2a);}_0x488520[_0x337cff(0x597,0x581,0x4a5,0x52c)+'ener'](_0x2ed48d,_0x45eae5);}),_0x3d9ba0[_0x2ff85b(0x284,0x20b,0x280,0x285)+_0x2ff85b(0x248,0x1f7,0x1d4,0x2d0)+_0x2ff85b(0x29c,0x24b,0x2f4,0x32b)]=![],_0x40122b(_0x4e96a1(0x530,0x573,0x573,0x584)+'图事件监听器已关闭。');else{_0x4a90c7['EWExw'](addLog,_0x4e96a1(0x46d,0x4bd,0x49e,0x4a9)+'启动');if(_0x1df406)_0x4a90c7['EWExw'](addLog,_0x4e96a1(0x524,0x4aa,0x4b5,0x539)+_0x1df406);if(_0x287b3f)addLog(_0x2ff85b(0x2b6,0x26c,0x292,0x250)+']');}}try{if(_0x4a90c7[_0x2ff85b(0x2d3,0x2e4,0x30a,0x331)](_0x4a90c7[_0x2ff85b(0x247,0x1c6,0x1f6,0x1e6)],_0x4a90c7[_0x2ff85b(0x247,0x22a,0x1f7,0x1c8)])){const {image:_0x420182,change:_0x435eb9}=await _0x4a90c7[_0x4e96a1(0x4d1,0x4f5,0x531,0x544)](generateBananaImage,{'prompt':_0x3b33ba,'width':_0x91d3f,'height':_0x4cfd6e,'change':_0x2cb9a0,'retouchPrompt':_0x1df406,'retouchImage':_0x287b3f});if(extension_settings[extensionName]['cache']!='0'){const _0x41e87a={};_0x41e87a['change']=_0xd83565,await _0x4a90c7[_0x4e96a1(0x429,0x469,0x448,0x479)](setItemImg,_0x3b33ba,_0x420182,_0x41e87a),addLog(_0x4e96a1(0x4b5,0x3ea,0x4d7,0x470)+_0x2ff85b(0x32f,0x335,0x31f,0x2c9)+'\x20'+_0x3b33ba),extension_settings[extensionName][_0x2ff85b(0x2c5,0x32a,0x25a,0x328)][_0x2ff85b(0x2d5,0x324,0x2b9,0x300)]?(extension_settings[extensionName]['banana'][_0x2ff85b(0x2d5,0x284,0x243,0x2f1)]=_0x4a90c7[_0x2ff85b(0x340,0x2e9,0x3cb,0x2c9)](extension_settings[extensionName][_0x4e96a1(0x59d,0x4f8,0x4a8,0x513)]['cishu'],-0x2174+-0x1ae0*0x1+-0x1*-0x3c55),_0x4a90c7[_0x2ff85b(0x275,0x25e,0x212,0x2ee)](addLog,_0x2ff85b(0x2f7,0x348,0x2dc,0x33d)+_0x2ff85b(0x27d,0x2b5,0x2a4,0x2f7)+extension_settings[extensionName][_0x4e96a1(0x49c,0x4bb,0x596,0x513)][_0x4e96a1(0x589,0x4cd,0x501,0x523)])):_0x4a90c7['axxbJ']!==_0x4a90c7['rJNrj']?(extension_settings[extensionName][_0x2ff85b(0x2c5,0x30d,0x342,0x2c5)][_0x4e96a1(0x585,0x4be,0x5a2,0x523)]=-0x2*-0x24b+0x12b*0x13+-0xd63*0x2,_0x4a90c7[_0x4e96a1(0x49f,0x51f,0x42a,0x4a4)](addLog,'当前生图次数为\x20fo'+_0x2ff85b(0x27d,0x309,0x30b,0x20c)+extension_settings[extensionName]['banana']['cishu'])):_0x4de8a6=_0x4a90c7['lWnnE'](_0x49a4b6,',\x20')+_0x1074a1[_0x2ff85b(0x2e9,0x319,0x2ed,0x2fa)+_0x357fe0+_0x2ff85b(0x26b,0x2dc,0x1e7,0x23a)];}else addLog(_0x2ff85b(0x33a,0x2cf,0x310,0x313)+'库');const _0x1a469f={};_0x1a469f['id']=_0x39f84f,_0x1a469f['success']=!![],_0x1a469f['imageData']=_0x420182,_0x1a469f['prompt']=_0x3b33ba,_0x1a469f[_0x4e96a1(0x4f8,0x5a0,0x5dd,0x559)]=_0xd83565,eventSource[_0x2ff85b(0x323,0x2b4,0x29b,0x316)](EventType['GENERATE_I'+'MAGE_RESPO'+_0x4e96a1(0x4b7,0x4aa,0x459,0x4ac)],_0x1a469f),_0x4a90c7['FaUXD'](addLog,_0x4e96a1(0x508,0x576,0x4d6,0x54b)+_0x2ff85b(0x270,0x29d,0x2a7,0x209)+'cess\x20respo'+_0x4e96a1(0x583,0x521,0x565,0x58b)+':\x20'+_0x39f84f);}else return _0x2ff4a1['image'];}catch(_0x5332cb){if(_0x4a90c7[_0x2ff85b(0x27b,0x261,0x218,0x223)](_0x2ff85b(0x29d,0x23c,0x24d,0x2ac),_0x4a90c7[_0x4e96a1(0x451,0x4fa,0x477,0x47f)])){const _0x1eb8da=_0x2ff85b(0x269,0x27b,0x1db,0x2e7)+_0x2ff85b(0x278,0x21a,0x24e,0x26a)+_0x2ff85b(0x223,0x1b9,0x1c9,0x1b8)+_0x2ff85b(0x246,0x249,0x29e,0x256)+_0x39f84f+':\x20'+_0x5332cb[_0x2ff85b(0x317,0x2ca,0x342,0x2f4)];_0x4a90c7[_0x4e96a1(0x45d,0x4b9,0x437,0x4c3)](addLog,_0x1eb8da),console[_0x4e96a1(0x569,0x554,0x56c,0x582)](_0x1eb8da);const _0x2ad169={};_0x2ad169['id']=_0x39f84f,_0x2ad169['success']=![],_0x2ad169['error']=_0x5332cb['message'],_0x2ad169['prompt']=_0x3b33ba,eventSource['emit'](EventType['GENERATE_I'+_0x4e96a1(0x543,0x53f,0x515,0x522)+'NSE'],_0x2ad169),addLog(_0x2ff85b(0x2fd,0x287,0x32b,0x273)+'mitted\x20fai'+_0x2ff85b(0x2dd,0x28c,0x2ea,0x285)+'nse\x20for\x20ID'+':\x20'+_0x39f84f);}else{_0x4a90c7[_0x2ff85b(0x2f6,0x297,0x2f8,0x267)](_0x129745,_0x4a90c7[_0x2ff85b(0x2b4,0x239,0x289,0x308)]);const _0xe3a4c6=_0x4a90c7[_0x2ff85b(0x230,0x266,0x1b0,0x1c0)](_0x23c820,'默认'),_0x3ad27d={};_0x3ad27d[_0x4e96a1(0x46a,0x46e,0x496,0x4ca)+'on']=[],_0x3ad27d[_0x4e96a1(0x500,0x4ff,0x472,0x47b)+'t']='',_0x368987=_0x101139[_0xe3a4c6]||_0x3ad27d,_0x4a90c7[_0x4e96a1(0x59d,0x5bd,0x4f7,0x544)](_0x4e6842,'[Banana]\x20使'+_0x4e96a1(0x535,0x44a,0x4c1,0x4ba)+_0xe3a4c6+'\x22');}}}const LEGACY_EVENT_NAMES=[_0x393d77(0x3db,0x422,0x485,0x3a4)+_0x40450f(-0x113,-0xa7,-0x154,-0x110)+'st',_0x393d77(0x3ee,0x3ba,0x40d,0x33b)+_0x40450f(-0xab,-0x16b,-0x18c,-0x138)+'st'];function initializeBananaListener(){const _0x56e24f={'PcnkJ':function(_0x21e887,_0x2320c5){return _0x21e887(_0x2320c5);},'zTHsS':_0x7d519d(0x532,0x5ac,0x5ca,0x622)+_0x1a317b(0x1d8,0x250,0x2b1,0x1f0)};function _0x1a317b(_0x4b0a77,_0x46b3f6,_0xc73f81,_0x15ff2b){return _0x393d77(_0xc73f81,_0x46b3f6- -0x1bb,_0xc73f81-0x1d,_0x15ff2b-0xe4);}eventSource['on'](EventType[_0x1a317b(0x1d3,0x222,0x270,0x1d5)+_0x7d519d(0x5bb,0x5e0,0x570,0x636)+'ST'],bananaGenerate);function _0x7d519d(_0x29b7cb,_0x4e3765,_0x2ec8bc,_0x2847e3){return _0x393d77(_0x2847e3,_0x4e3765-0x23d,_0x2ec8bc-0x99,_0x2847e3-0xe1);}LEGACY_EVENT_NAMES['forEach'](_0x4550d1=>{eventSource['on'](_0x4550d1,bananaGenerate);}),_0x56e24f[_0x7d519d(0x640,0x656,0x6af,0x5de)](addLog,_0x56e24f[_0x7d519d(0x678,0x5f4,0x5f7,0x658)]);}export async function replaceWithBanana(){function _0xd08f16(_0xce48f2,_0x2d462d,_0x2a9265,_0x41e45b){return _0x40450f(_0xce48f2-0xf2,_0x2d462d,_0x2a9265-0x68,_0x41e45b-0x684);}const _0x4a05b4={'gtbmj':function(_0x2219ff,_0x194c72){return _0x2219ff==_0x194c72;},'pUsji':_0x22059a(-0xf7,-0xdb,-0xa6,-0x17b),'nbXMS':function(_0x413dd0){return _0x413dd0();},'TRiTT':_0x22059a(-0x86,-0xdf,-0x110,0xc)+_0x22059a(-0x13a,-0x14c,-0xdf,-0x146)};function _0x22059a(_0x18a88e,_0x16ecbc,_0x31e162,_0x483976){return _0x40450f(_0x18a88e-0x100,_0x483976,_0x31e162-0xd2,_0x18a88e- -0x63);}_0x4a05b4[_0xd08f16(0x5a1,0x58e,0x4fe,0x563)](extension_settings[extensionName][_0xd08f16(0x634,0x59d,0x579,0x5e2)],_0x4a05b4['pUsji'])?(!window[_0x22059a(-0x138,-0x1b1,-0xf6,-0xd8)+'BananaList'+_0x22059a(-0x120,-0x191,-0xd8,-0x170)]&&(window[_0x22059a(-0x138,-0xe0,-0xff,-0x1ad)+_0xd08f16(0x575,0x583,0x4e8,0x573)+_0x22059a(-0x120,-0x1ad,-0xf5,-0xd1)]=!![],_0x4a05b4[_0xd08f16(0x687,0x59f,0x635,0x610)](initializeBananaListener)),initializeImageProcessing()):window[_0x22059a(-0x138,-0x12d,-0x1a1,-0x189)+_0xd08f16(0x586,0x5e7,0x603,0x573)+'ener']&&(eventSource['removeList'+_0x22059a(-0x120,-0x10f,-0x91,-0x12e)](EventType[_0xd08f16(0x58a,0x5b4,0x675,0x5e4)+_0x22059a(-0x13d,-0xc5,-0xe9,-0xd6)+'ST'],bananaGenerate),LEGACY_EVENT_NAMES[_0xd08f16(0x69a,0x666,0x67c,0x64d)](_0x5d71e1=>{function _0x17849a(_0x43e8a0,_0x468eca,_0x36bb39,_0x5f05a5){return _0x22059a(_0x468eca-0x2a9,_0x468eca-0x15c,_0x36bb39-0x60,_0x5f05a5);}function _0x5b3341(_0x52a566,_0x41e8ff,_0x5c04dc,_0x34937e){return _0xd08f16(_0x52a566-0x1ac,_0x52a566,_0x5c04dc-0x2d,_0x5c04dc- -0x1bb);}eventSource[_0x5b3341(0x481,0x473,0x433,0x491)+_0x17849a(0x125,0x189,0x18a,0x16c)](_0x5d71e1,bananaGenerate);}),window[_0x22059a(-0x138,-0x179,-0x12f,-0x18d)+_0x22059a(-0x174,-0x167,-0x10f,-0x166)+_0xd08f16(0x621,0x5b5,0x554,0x5c7)]=![],addLog(_0x4a05b4[_0x22059a(-0xeb,-0xe7,-0xe2,-0x128)]));}
//# sourceMappingURL=http://localhost:8000/banana.js.map