(function(_0x1e174e,_0x4702eb){function _0x409e10(_0xd14155,_0x4e2e4c,_0x2bf429,_0x423dab){return _0x1b45(_0xd14155- -0x318,_0x4e2e4c);}function _0x477d4e(_0x506b6c,_0x3608d7,_0x51d2c3,_0x5e6269){return _0x1b45(_0x3608d7-0x2b5,_0x51d2c3);}const _0x391bce=_0x1e174e();while(!![]){try{const _0x3bd5a9=-parseInt(_0x477d4e(0x4b6,0x4cc,0x459,0x51c))/(-0x1*0x254b+-0x1*0x28b+0x27d7)+-parseInt(_0x477d4e(0x4e3,0x508,0x485,0x524))/(-0x1f6d+-0x1*0x1ff9+0x1*0x3f68)*(parseInt(_0x409e10(-0xad,-0xf0,-0x13c,-0x33))/(-0x511*0x2+-0x196c*-0x1+-0xf47))+-parseInt(_0x409e10(-0x139,-0x10b,-0x185,-0xe4))/(0x7*-0x13d+0xfd1*-0x1+-0x1c0*-0xe)+-parseInt(_0x477d4e(0x48a,0x511,0x591,0x47f))/(0x881+0xd25+-0x31*0x71)*(parseInt(_0x477d4e(0x54a,0x534,0x555,0x530))/(0x3*0xcbb+0x20*0x4c+-0x2fab))+-parseInt(_0x409e10(-0x132,-0x14b,-0x15e,-0x13e))/(0x1*0x22d8+-0x1af7+-0x1e*0x43)+-parseInt(_0x477d4e(0x54c,0x571,0x5b7,0x5ce))/(0x1*0x1e29+0x102+-0x1f23)*(-parseInt(_0x477d4e(0x528,0x542,0x50c,0x56f))/(-0x2e9*-0xa+0x2f*-0xa1+0x7e))+parseInt(_0x477d4e(0x57b,0x4f1,0x4de,0x45f))/(0x1f97*0x1+-0x1d3*0xb+-0xb7c*0x1)*(parseInt(_0x477d4e(0x5dd,0x58b,0x59f,0x53d))/(-0x1d4f+0x16*0x13d+0x21c));if(_0x3bd5a9===_0x4702eb)break;else _0x391bce['push'](_0x391bce['shift']());}catch(_0x261f43){_0x391bce['push'](_0x391bce['shift']());}}}(_0x1400,-0xb4168+0x22404+0x9a6b2*0x2));function _0x1400(){const _0x3f2a47=['tLrsv2G','D0zvs3K','uhfxDg4','y29UDMvYC2f0Aq','B2fKihDPDgGG','yKfoD0q','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','mtjjtNbTtfy','zxvnz20','Bxb0','5BYa5AEliejHBMfUyEEuNW','quLUCKK','Dg9mB3DLCKnHCW','CMvWBgfJzq','DfDtu1i','s0DKvgy','tLnf','ifbYB21WDa','CMvTB3zLtgLZDa','re5gtxO','u1H0sKO','mta2ndqWm0vlrhDuCG','5lIT55QeihbYB21WDooaGG','z0PXq3G','CgfYyw1LDgvYCW','Bw1ftu8','zML4zwrqCM9TCa','DgLVBIb3AxrOia','DcbMywLSzwqGDW','yxnZAxn0yw50','vvHSu1y','t1LIDfi','Au94B3G','s1frqNe','zgTwqLi','w0jHBMfUyv0G55sF','B2zkz1a','EhPZrw8','B25Mvwu','yxrLzcbZDwnJzq','BwvZC2fNzq','sgfbuhC','AxrOihn0yxr1CW','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','tvDfq1y','tM93CNC','yMfUyw5H','qwDMr2G','zw5LCG','qMfUyw5H5l+U5zU+5QIH5BYp','5yMn572U5yMn','qMfUyw5HtgLZDa','zK92sgm','B3vbuuC','y01AA1e','rhnkv0K','CvjkAgS','y2HHBMDL','BeXxCxC','yxnWzwn0uMf0Aq','ihWG','uvHnseG','yMfUyw5HioEuN+wBVUs6IW','AgTSyLq','C3rYAw5NAwz5','zwnLAxzLzcbPBq','ExvMz2u','zMfPBgvKigzVCG','oejytLvLrW','vhzxB1O','zgf0ytPPBwfNzq','uerNuKS','BNrHAw5ZihrLEa','y2fJAgu','r2P5v1a','whbyCfy','lcdPQ5JLUQyGlsa','BI9QC29U','zw5KC1DPDgG','C2vHCMnO','ywn0zxjqCMvZzq','5zco572U5yMn','B0fjs0G','CwjxuuO','CM9Szq','DgfYDgLUzYbPBq','ANrXDK0','l3yX','AurivMu','5yMn572U5zco','q0DPwNC','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','sKvkvfy','ndrND052Bxi','Aw1Hz2veyxrH','ue9tva','uhHewgO','sLjYyNK','C2fTCgXLq291BG','y2vlzue','5Q2J6z2I5O+q56s66k+noIa','tgnsBLG','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','q0LkAMK','tLDvDwK','uwrczNa','t0voBM4','igLTywDLlG','BNnLigzVCIbjra','z1jRrMK','B3vSv2C','vujZsLC','txvyBNC','u0fmD2O','zMLSDgvY','CejmBNi','Aw1Hz2vU','Bw9KzwW6ia','y2LZAhu','Aw5PDgLHBgL6zq','55sO5lQgihVKV67LM759ioAGH+IVHG','ANDOqvO','zgvSCY8','yxzrDKq','zM9YrwfJAa','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','Bw9KzwW','BwfNzv9Yzxf1zq','qMvHCMvYia','whDJuK0','5PYa5zco572U','CMvWBgfJzufSBa','Cg9ZDgzPEfbYBW','kcGOlISPkYKRkq','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','EKHkzgW','y29UC3rYDwn0BW','DhjPBq','AvvfyvK','mta3nZG5nNjtu0fkuW','rKHjBeK','z2vUzxjHDgvFAq','s2XwrMO','q2LkCvO','l3yXl2nOyxqVyW','txnrqNK','mtyYoteZmufyuhzJDW','ywDLigDLBMvYyq','AuLHBvu','BwL0DgvKihn1yW','tgPvyLG','B3nPDgLVBG','AxnbCNjHEq','DgLVBIbYzxf1zq','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','Aw1Hz2vFDxjS','y2XPzw50','w0jHBMfUyv0GuW','zMXHDa','tg12Cgi','q2Pzt0m','AxLSzgq','tuvWA3q','DcbVBMX5lcbUBW','w0jHBMfUyv0Grq','zxjYB3i','w0jHBMfUyv0G5l2/','C3LQu1K','zw1PDa','E+s/RUwBVN0','sg5NCxi','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','BwfNzsbNzw5LCG','r2XOC08','C3bSAxq','CIbWCM9TChq6ia','BwfW','qNrdA1i','tuHdBvG','D3zUt2u','y1PcrLK','w0jHBMfUyv0Gsq','w0jHBMfUyv0GrG','Aw5ZDgfUy2vZ','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','Eg5JtMi','wu5Sywq','ChjVBxb0','D3vZuwi','DxjS','qvbjihjLC3bVBG','rLfwDgm','wer4sNG','DfPvufu','qvbjihjLCxvLCW','otG2ntK0zLb3zM9k','55Qe5zU+54Mh','w0jHBMfUyv0GrW','Aw1Hz2u','C3rHDhvZ','zvv0wNa','BwPHuum','w0jHBMfUyv0GuG','zw5bssbMB3jTyq','BgvZktOG','B3iGChjVBxb0oG','Aw1Hz2vdB25MAq','B3vUzcbTyxrJAa','C3nMDwXSEs4','D1reBei','ChvZAa','z2XqEKC','BwL0DgvKigzHAq','zw5LCMf0Aw9Uia','5zU+5QIH5BYp77YA5OYh5lUKid0G','BNPODu0','ieLeia','tKDswLe','C3rHCNrZv2L0Aa','Aw1Hz2vjza','DwLSDcbTDwX0Aq','q2HHCMfJDgvYia','yvnsDMO','qu9xD1i','vhzZvfy','vKPJBhy','y2vZCYbYzxnWBW','zgv0tfK','ANnVBG','5zco572U5zco','sen6uu8','5zU+5QIH5BYp77YA5BEY5RE75yQG5B6f5l+U5Ps5','nJy0mdK0mg9mwfLcvG','C3rYAw5N','55sO5l+U5zU+6Ake6k6+oIaI','w0jHBMfUyv0GqG','Aw5JBhvKzxm','DdOG','AM9PBG','Dgv4Da','w0jHBMfUyv0Gua','C3vJy2vZCW','Aw5NihrYAwDNzq','uLLRrg8','DhLWzq','BwfNzsbPBIbpCa','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','DxnLCG','DuLAD2i','l3yXlW','kerPDMLKzv9YBW','EwLHAvq','tufhrv9srvfvrq','C3qGkeLeoIa','BwHtD28','mtK3nJjAvgrPzLy','yvPACgy','y29UDgvUDa','CfDSy28','vgzKtxq','Dg9tDhjPBMC','w0jHBMfUyv0G5l+U','l3yXyMv0ys9TBW','w0jHBMfUyv0G5zcV','oda0ndeWugjAAuHV','u2nLBMuGq29TCa','q0rdsey','uNLhr3i','BunpBNG','y0rSEuS','BIbWyxLSB2fKia','C2v0ici','z2vUzxjHDguTAq','quf1sLe','u0nOzuG','BwfNzs1Yzxf1zq','v0XyCNC','BgvUz3rO','y3fWEwO','otbMyvrdAuO','zxnWB25ZzsbJBW','r2TVy1K','55sO5lQo55sF5OIq55QevgfNoIa','5zU+5Rwb56Il44cc5A6I5OI356UV5lI6','BhvYzsbYzxnWBW','CIaI','5l+U5zU+5OYh5lUKoIa','zxrJAcbLCNjVCG','r0vorvjbvevFsq','yxbWBhK','yMfUyw5Hq2HHCG','y2HVAwnLCW'];_0x1400=function(){return _0x3f2a47;};return _0x1400();}const _0x5688a4=(function(){const _0x5743c7={};_0x5743c7[_0x53cd55(0x280,0x29a,0x21b,0x23a)]=function(_0x29f3eb,_0x8f812d){return _0x29f3eb===_0x8f812d;},_0x5743c7[_0x53cd55(0x2ca,0x2ce,0x2b5,0x24f)]=_0x53cd55(0x30e,0x305,0x2c4,0x2a3),_0x5743c7[_0x53cd55(0x26b,0x177,0x197,0x202)]=_0x364749(0x75,0x4e,0x6c,-0x34);const _0x2c55bf=_0x5743c7;function _0x364749(_0x4b96fc,_0x36c305,_0x18742d,_0x27812c){return _0x1b45(_0x36c305- -0x243,_0x18742d);}let _0x40781a=!![];function _0x53cd55(_0x34d586,_0x3e85f0,_0x16db5b,_0x2f94e2){return _0x1b45(_0x2f94e2- -0x2b,_0x3e85f0);}return function(_0x1470c0,_0x147c08){function _0x35014f(_0x3877f9,_0x1c500a,_0x1623fd,_0x193b47){return _0x53cd55(_0x3877f9-0x121,_0x193b47,_0x1623fd-0x175,_0x1c500a- -0x162);}function _0x3e4eb3(_0xf52328,_0x4e6649,_0x1ba9b4,_0xb3da06){return _0x53cd55(_0xf52328-0x25,_0x4e6649,_0x1ba9b4-0x28,_0x1ba9b4- -0x383);}if(_0x2c55bf[_0x3e4eb3(-0x198,-0x128,-0x149,-0x19a)](_0x2c55bf[_0x3e4eb3(-0x10b,-0xf8,-0x134,-0x11f)],_0x2c55bf[_0x35014f(0x87,0xa0,0x2d,0xfe)]))_0x4ea188=!![];else{const _0x44267f=_0x40781a?function(){function _0x5e4f45(_0x1e9b75,_0x3bd069,_0x22f607,_0x25387c){return _0x3e4eb3(_0x1e9b75-0x3d,_0x25387c,_0x3bd069-0x3da,_0x25387c-0x10a);}if(_0x147c08){const _0x512b61=_0x147c08[_0x5e4f45(0x2da,0x2a1,0x31f,0x26f)](_0x1470c0,arguments);return _0x147c08=null,_0x512b61;}}:function(){};return _0x40781a=![],_0x44267f;}};}()),_0x3a903f=_0x5688a4(this,function(){function _0x48186a(_0x470ec3,_0x44f12b,_0x22a81a,_0x41fa95){return _0x1b45(_0x22a81a-0x2c0,_0x41fa95);}function _0x530a0f(_0x377ada,_0x35d707,_0x9543a,_0x2cd515){return _0x1b45(_0x9543a-0x3d6,_0x377ada);}return _0x3a903f[_0x48186a(0x56f,0x56c,0x518,0x52a)]()['search'](_0x48186a(0x4b4,0x478,0x499,0x42b)+'+$')[_0x48186a(0x57e,0x5a8,0x518,0x4f2)]()[_0x48186a(0x498,0x4b1,0x49c,0x4f5)+'r'](_0x3a903f)[_0x48186a(0x5bf,0x598,0x587,0x53e)](_0x48186a(0x452,0x49a,0x499,0x410)+'+$');});_0x3a903f();import{extension_settings}from'../../../../extensions.js';import{eventSource}from'../../../../../script.js';function _0x529fd3(_0x40d61a,_0x83f702,_0x4c8c41,_0x33c9a4){return _0x1b45(_0x40d61a- -0x162,_0x83f702);}import{extensionName,EventType}from'./config.js';function _0x1b45(_0x3803b8,_0x12e0f4){_0x3803b8=_0x3803b8-(0xafa+0x289*-0x9+0xd92);const _0x4cde11=_0x1400();let _0x481272=_0x4cde11[_0x3803b8];if(_0x1b45['XjWrHD']===undefined){var _0x1be3dd=function(_0x2615aa){const _0x3fa526='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x13af94='',_0x1426a0='',_0x16765b=_0x13af94+_0x1be3dd;for(let _0xd68d85=-0x1*0x10bb+0x8fd*-0x1+0x2*0xcdc,_0x338ba6,_0x32db5b,_0x364cd4=0x1f6*-0x6+-0x1d36*0x1+-0x28fa*-0x1;_0x32db5b=_0x2615aa['charAt'](_0x364cd4++);~_0x32db5b&&(_0x338ba6=_0xd68d85%(-0x1*-0xed2+-0x38f*-0x3+-0x197b)?_0x338ba6*(0x3b*-0x81+-0x1043*-0x1+0xdb8)+_0x32db5b:_0x32db5b,_0xd68d85++%(0x1b*0xcf+0x16*0x3b+-0x1ae3))?_0x13af94+=_0x16765b['charCodeAt'](_0x364cd4+(0xef2+-0x2*0x1363+0x17de))-(0x148f+-0x4*-0x16d+-0x1a39)!==-0xc2c+0x548+0x62*0x12?String['fromCharCode'](0xb*0x223+-0x21dd+0xb5b&_0x338ba6>>(-(0x12b4+-0x9*-0x456+-0x39b8*0x1)*_0xd68d85&0x330+0x24d+-0x577*0x1)):_0xd68d85:0x64*-0x47+-0xb81+0xf5*0x29){_0x32db5b=_0x3fa526['indexOf'](_0x32db5b);}for(let _0x1d0af4=-0x1*-0x3df+-0x5ab*-0x5+0x2036*-0x1,_0x4fb940=_0x13af94['length'];_0x1d0af4<_0x4fb940;_0x1d0af4++){_0x1426a0+='%'+('00'+_0x13af94['charCodeAt'](_0x1d0af4)['toString'](0x1738+-0x1fb3+0x88b))['slice'](-(0xc08+0xa13*0x3+-0x69*0x67));}return decodeURIComponent(_0x1426a0);};_0x1b45['dIZNMf']=_0x1be3dd,_0x1b45['KTOwna']={},_0x1b45['XjWrHD']=!![];}const _0x4492bd=_0x4cde11[0x10*-0x17+0x2037+-0x1ec7],_0x4714e5=_0x3803b8+_0x4492bd,_0x506f69=_0x1b45['KTOwna'][_0x4714e5];if(!_0x506f69){const _0x49da39=function(_0x25b9ee){this['xyDNzT']=_0x25b9ee,this['urRZKD']=[-0x1*0x1e23+-0x2*0x9cc+-0x1*-0x31bc,0x162*0xb+0x76a+0x4*-0x5a8,-0x124c+-0xf26+0x2172],this['WcAYtI']=function(){return'newState';},this['YVLTja']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['wFkxBo']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x49da39['prototype']['BIBeKI']=function(){const _0x1ffca6=new RegExp(this['YVLTja']+this['wFkxBo']),_0x1c4459=_0x1ffca6['test'](this['WcAYtI']['toString']())?--this['urRZKD'][-0x198c+-0xce5*-0x1+0xca8]:--this['urRZKD'][0x1*0x19c3+0x13e7*-0x1+-0x5*0x12c];return this['ZuGQHg'](_0x1c4459);},_0x49da39['prototype']['ZuGQHg']=function(_0x6b91b0){if(!Boolean(~_0x6b91b0))return _0x6b91b0;return this['SsDejc'](this['xyDNzT']);},_0x49da39['prototype']['SsDejc']=function(_0x72474e){for(let _0x254aee=0x2b*-0x88+-0x1205+-0x3*-0xd9f,_0x340ed9=this['urRZKD']['length'];_0x254aee<_0x340ed9;_0x254aee++){this['urRZKD']['push'](Math['round'](Math['random']())),_0x340ed9=this['urRZKD']['length'];}return _0x72474e(this['urRZKD'][0x1*-0x149d+0x12f6+0x1a7]);},new _0x49da39(_0x1b45)['BIBeKI'](),_0x481272=_0x1b45['dIZNMf'](_0x481272),_0x1b45['KTOwna'][_0x4714e5]=_0x481272;}else _0x481272=_0x506f69;return _0x481272;}import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,waitForLock,releaseLock,acquireLock}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';function _0xb25b64(_0x1f40d0,_0x5e4b71,_0x40a35e,_0xf0ecf1){return _0x1b45(_0x1f40d0- -0x29a,_0x40a35e);}import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';async function getImageFromTurnData(_0x18ff73){function _0x4d243f(_0x5be7a0,_0x1a5f00,_0xe1a55f,_0x191140){return _0x1b45(_0x1a5f00-0x3a9,_0x5be7a0);}const _0x4055b5={'QdBfp':'cfgimg_','GlhsO':function(_0xdb862a,_0x3bb99d){return _0xdb862a(_0x3bb99d);},'BtCkR':function(_0x267b5c,_0x21c194){return _0x267b5c||_0x21c194;},'detLY':_0x4d243f(0x5e1,0x667,0x687,0x6b1)};if(!_0x18ff73)return'';if(_0x18ff73['imageId']&&_0x18ff73[_0x13245f(0x9,-0x89,0x6,0x92)][_0x4d243f(0x634,0x5d7,0x620,0x660)](_0x4055b5[_0x4d243f(0x580,0x566,0x51b,0x4f6)])){const _0x4a35a8=await _0x4055b5[_0x4d243f(0x5b6,0x5aa,0x5dd,0x5d8)](getConfigImage,_0x18ff73[_0x4d243f(0x5ff,0x5d8,0x5b2,0x5ff)]);return _0x4055b5[_0x13245f(0x3b,-0x4a,-0x24,0x48)](_0x4a35a8,'');}function _0x13245f(_0xfcdabb,_0x46da94,_0x2c0061,_0x57c186){return _0x1b45(_0x2c0061- -0x229,_0x57c186);}if(_0x18ff73['image']&&_0x18ff73[_0x4d243f(0x550,0x5c3,0x53a,0x53e)][_0x4d243f(0x598,0x5d7,0x54d,0x56c)](_0x4055b5[_0x4d243f(0x664,0x5e0,0x578,0x647)]))return _0x18ff73[_0x4d243f(0x571,0x5c3,0x553,0x5e0)];return'';}async function generateBananaImage({prompt:_0x3b1db8,width:_0x7c668a,height:_0xc59209,change:_0x350d07,retouchPrompt:_0x529d2e,retouchImage:_0x21f528}){const _0x518c59={'GjyWP':_0x3ba0db(-0xbd,-0x6a,-0x2a,-0x94)+_0x3ba0db(-0x16a,-0x1b9,-0x11c,-0x122),'onfUe':function(_0x5f5a5c,_0x446eb4){return _0x5f5a5c(_0x446eb4);},'avQvD':_0x3ba0db(-0x79,-0x2d,-0xbb,-0xc1)+_0x455385(-0x169,-0xd2,-0x81,-0xdf),'PxDXj':function(_0x3b7cf1,_0x33c240){return _0x3b7cf1(_0x33c240);},'TvsTV':function(_0x34255f,_0x5fc399){return _0x34255f+_0x5fc399;},'lLWqw':function(_0x556874,_0x256f1a){return _0x556874+_0x256f1a;},'JEJTV':_0x3ba0db(-0xfd,-0xba,-0xc7,-0xaf)+_0x3ba0db(-0x18c,-0x1e0,-0x20c,-0x183)+'。','aZZpf':function(_0xb40574,_0x575db1){return _0xb40574||_0x575db1;},'YNlad':function(_0x34a2de,_0x303dc1){return _0x34a2de(_0x303dc1);},'mCOnx':function(_0x24c4bf){return _0x24c4bf();},'Hngqr':function(_0x58ca39){return _0x58ca39();},'SALwj':function(_0x2e86ba,_0x18209e){return _0x2e86ba(_0x18209e);},'DsJWI':_0x3ba0db(-0x10d,-0x123,-0x161,-0x157),'hklbT':function(_0x51f7f1){return _0x51f7f1();},'oBMJK':'[Banana]\x20F'+'etch\x20error'+':','BtUAV':_0x3ba0db(-0x146,-0xfb,-0x17c,-0x126)+'se\x20did\x20not'+'\x20contain\x20i'+_0x455385(-0x198,-0x14c,-0xf3,-0x139)+_0x455385(-0x18e,-0x14e,-0xdd,-0x163)+'t','zHJdl':function(_0x449cf4,_0x5e6746){return _0x449cf4(_0x5e6746);},'GkocY':function(_0x34898a,_0x45e07d){return _0x34898a(_0x45e07d);},'sGoPE':function(_0x3cc425,_0x32fe8d){return _0x3cc425!==_0x32fe8d;},'MsQBy':function(_0x4088d9,_0x385085){return _0x4088d9(_0x385085);},'opomq':_0x3ba0db(-0xfb,-0x111,-0xab,-0x160)+_0x3ba0db(-0x16d,-0x12d,-0x1c3,-0x109),'HCzQO':function(_0x40b4ad,_0x54ee2c){return _0x40b4ad(_0x54ee2c);},'XxIAd':function(_0x2c9110,_0x225883){return _0x2c9110!==_0x225883;},'pBLnr':'zctKP','RyGGr':function(_0x431d43,_0x345b8b){return _0x431d43<=_0x345b8b;},'xzsEo':function(_0x23c9c2,_0x486223){return _0x23c9c2+_0x486223;},'KlVFj':function(_0x33eac8,_0x6c541b){return _0x33eac8!==_0x6c541b;},'jQzWd':_0x455385(-0x8d,-0x6c,-0x135,-0xb8),'AgfGh':function(_0x2a5524,_0x5dc64a){return _0x2a5524(_0x5dc64a);},'yiaiT':function(_0x2a3fc,_0x42371f){return _0x2a3fc===_0x42371f;},'wFUKy':_0x455385(-0x9a,-0x144,-0x119,-0x12c),'bANwD':_0x455385(-0x173,-0x19d,-0xc6,-0x118),'eBPzx':_0x455385(-0x91,-0x83,-0x131,-0xf7),'EUAzr':_0x455385(-0x4d,-0x15b,-0xf1,-0xd5),'XpXpV':function(_0x71cf19,_0x17c754){return _0x71cf19+_0x17c754;},'XwcRM':_0x455385(-0x105,-0x6b,-0x125,-0xce),'uHDXI':function(_0x3a0bbf,_0x1b80e4){return _0x3a0bbf(_0x1b80e4);},'CiJqZ':function(_0x30bdc4,_0x3b819d){return _0x30bdc4(_0x3b819d);},'tzBUS':'前置前','iyldd':_0x3ba0db(-0x87,-0x10a,-0xeb,-0xb3),'ZqjTs':_0x3ba0db(-0x8f,-0x6e,-0x47,-0x3f),'uZBPW':_0x455385(-0x17b,-0x107,-0x14c,-0x149),'MHCmX':_0x455385(-0x11b,-0x176,-0x19c,-0x1ac),'xRadA':function(_0x18a425,_0x1de01c){return _0x18a425(_0x1de01c);},'jwhAZ':_0x3ba0db(-0x15b,-0x1bc,-0x1a3,-0x161),'CDCHF':function(_0x34ffb3,_0x5ba9a4){return _0x34ffb3||_0x5ba9a4;},'cDlyK':function(_0x1756d5,_0x3e64c3){return _0x1756d5(_0x3e64c3);},'OYbtR':_0x455385(-0x225,-0x10e,-0x125,-0x193),'uIZwb':_0x3ba0db(-0x115,-0x143,-0xdf,-0xa9),'Lmvpb':'eyXiy','HaAPw':_0x3ba0db(-0x19d,-0x15b,-0x1d1,-0x1bf),'qbWQJ':_0x3ba0db(-0x7c,-0xd5,-0xea,-0x5a),'AInrI':_0x455385(-0x2b,-0xe0,-0x7d,-0xb2),'mhSwo':function(_0x4aa89f,_0x214df8){return _0x4aa89f(_0x214df8);},'FQVtc':function(_0x5e7796,_0x81c179){return _0x5e7796>_0x81c179;},'FHIlI':function(_0xad4aa1,_0x2ab22e){return _0xad4aa1===_0x2ab22e;},'KGdTf':_0x3ba0db(-0xcc,-0x132,-0x14e,-0xd0),'mjaQC':_0x3ba0db(-0xc3,-0xdc,-0xb8,-0x113),'dkVBR':function(_0x54b516,_0x2d2470){return _0x54b516||_0x2d2470;},'MWECV':function(_0x30ca91,_0x5c7b99){return _0x30ca91===_0x5c7b99;},'aSRvj':'RDaeC','lTIUA':function(_0x190f34,_0x31b7b7){return _0x190f34(_0x31b7b7);},'VJclv':_0x3ba0db(-0x10b,-0xb8,-0xfc,-0xfd),'StKPP':function(_0x4820c3,_0x264ae3){return _0x4820c3+_0x264ae3;},'wusQb':_0x3ba0db(-0x143,-0xd4,-0x17b,-0x19c),'Nowrw':'VFAHe','tNynG':function(_0x51b349,_0x339b08){return _0x51b349+_0x339b08;},'Vcyzm':_0x455385(-0xee,-0xdf,-0xbb,-0xb3),'iUEaY':function(_0x354ac5,_0x51d996){return _0x354ac5(_0x51d996);},'gJqCx':_0x455385(-0xc9,-0x111,-0x12d,-0xe6),'CjYOC':function(_0x52ffc8){return _0x52ffc8();},'gRkFi':function(_0x5d967a,_0x2b5438,_0x14dedf){return _0x5d967a(_0x2b5438,_0x14dedf);},'iOmSo':'applicatio'+_0x3ba0db(-0x93,-0x80,-0x2a,-0xbc),'cZBFY':function(_0x146f88,_0x207477){return _0x146f88(_0x207477);},'syjSY':_0x455385(-0x172,-0x123,-0x1d1,-0x179)+_0x455385(-0x11f,-0x18a,-0x151,-0x182)+_0x455385(-0xf4,-0x83,-0x14b,-0xe3)+_0x3ba0db(-0x134,-0x177,-0x1a1,-0xd9),'MEpkt':function(_0x4e9dda,_0xf6c861){return _0x4e9dda===_0xf6c861;},'iIamU':_0x455385(-0x150,-0x88,-0xc8,-0x11a)};_0x3b1db8=processCharacterPrompt(_0x3b1db8),_0x3b1db8=await _0x518c59[_0x3ba0db(-0xba,-0xc3,-0x108,-0x90)](stripChineseAnnotations,_0x3b1db8);let _0x482c75=_0x350d07;_0x350d07=_0x518c59[_0x3ba0db(-0x7f,-0xf3,-0x2e,-0x45)](processCharacterPrompt,_0x350d07),_0x350d07=await stripChineseAnnotations(_0x350d07),_0x518c59[_0x3ba0db(-0x17d,-0xfd,-0x19a,-0x1e0)](addLog,_0x455385(-0x18b,-0x127,-0xab,-0x100)+_0x3ba0db(-0xe9,-0x137,-0x154,-0x110)+extension_settings[extensionName][_0x3ba0db(-0x168,-0x130,-0x1e7,-0x143)]),_0x518c59[_0x3ba0db(-0xeb,-0x6d,-0x5d,-0x92)](addLog,_0x455385(-0x1f2,-0x1fd,-0x14c,-0x1b1)+'\x20'+(_0x7c668a||'默认')+_0x3ba0db(-0x94,-0x11a,-0xdd,-0xa0)+_0x518c59[_0x3ba0db(-0x104,-0x183,-0x98,-0x12e)](_0xc59209,'默认'));function _0x455385(_0xad7919,_0x58165c,_0x1eb30c,_0x528f69){return _0x1b45(_0x528f69- -0x382,_0x1eb30c);}_0x3b1db8=_0x350d07&&_0x518c59['sGoPE'](_0x350d07[_0x3ba0db(-0x17b,-0x160,-0x125,-0x113)](),'')?_0x350d07:_0x3b1db8,_0x518c59[_0x455385(-0x19b,-0x1fe,-0x124,-0x19d)](addLog,_0x455385(-0x19c,-0x149,-0xcb,-0x114)+_0x3b1db8);let _0x3e5661=![];_0x3b1db8[_0x3ba0db(-0x118,-0x19e,-0xa5,-0x12f)](_0x518c59['opomq'])&&(_0x3e5661=!![]);_0x518c59[_0x3ba0db(-0x11e,-0xab,-0x167,-0x17a)](addLog,_0x455385(-0xaa,-0x100,-0x15c,-0x104)+_0x3ba0db(-0x10a,-0xd5,-0x148,-0xc3)+_0x3ba0db(-0x138,-0x113,-0xfe,-0xf2)+_0x3e5661);let _0x509067={},_0x1b6ee0='',_0x1371f8='';if(_0x3e5661){if(_0x518c59['XxIAd'](_0x518c59[_0x3ba0db(-0x191,-0x117,-0x149,-0x14e)],_0x3ba0db(-0x99,-0xc8,-0x113,-0xde))){addLog(_0x518c59[_0x3ba0db(-0x189,-0xf8,-0x12b,-0x1e3)]),_0x509067=_0x518c59[_0x455385(-0x199,-0x179,-0x1a2,-0x115)](parsePromptStringWithCoordinates,_0x3b1db8),_0x1b6ee0=_0x509067[_0x3ba0db(-0xfb,-0xc7,-0x149,-0xd2)+_0x455385(-0x188,-0x178,-0x21a,-0x197)];for(let _0x50d8e9=0xb*0x251+0xcc3+-0xfb*0x27;_0x518c59[_0x455385(-0x13d,-0x184,-0x1a5,-0x123)](_0x50d8e9,-0x2*-0x778+0x2b*0xa3+-0x2a4d);_0x50d8e9++){_0x509067[_0x455385(-0x10b,-0x176,-0xed,-0x151)+_0x50d8e9+_0x455385(-0x17f,-0xe2,-0xe0,-0xf9)]&&(_0x1371f8=_0x518c59[_0x3ba0db(-0xbb,-0x59,-0x6f,-0x14d)](_0x518c59[_0x3ba0db(-0xa6,-0x135,-0x8d,-0x6b)](_0x1371f8,',\x20'),_0x509067[_0x3ba0db(-0x127,-0x123,-0xaf,-0x126)+_0x50d8e9+_0x3ba0db(-0xcf,-0xbc,-0xea,-0x118)]));}}else _0x552fa7[_0x3ba0db(-0x18d,-0x114,-0x1e0,-0x1f3)+'BananaList'+_0x455385(-0x14c,-0xba,-0x142,-0xda)]&&(_0x545591[_0x3ba0db(-0xce,-0x8f,-0x4e,-0x113)+_0x3ba0db(-0xb0,-0x143,-0x67,-0x13b)](_0x59a65a['GENERATE_I'+'MAGE_REQUE'+'ST'],_0x1c6d40),_0x102f3c['forEach'](_0x4ebcf0=>{_0x2689ef['removeList'+'ener'](_0x4ebcf0,_0x473bfe);}),_0xf30d80[_0x3ba0db(-0x18d,-0x127,-0x1ba,-0xfb)+_0x455385(-0x8e,-0x78,-0x126,-0xd7)+_0x3ba0db(-0xb0,-0xa7,-0x25,-0x112)]=![],_0x12f997(_0x518c59[_0x3ba0db(-0x96,-0x114,-0x6d,-0x78)]));}else{if(_0x518c59[_0x3ba0db(-0x176,-0xf4,-0x154,-0x1e2)](_0x518c59['jQzWd'],'oAIKH')){_0x518c59[_0x455385(-0x108,-0x86,-0x13e,-0xe4)](_0x280ba6,_0x518c59[_0x3ba0db(-0x189,-0x129,-0x12d,-0x1ed)]),_0x4379e7=_0x518c59[_0x3ba0db(-0x7f,-0xfd,0x6,-0x77)](_0x38309e,_0x33945d),_0x327ec2=_0x139509[_0x3ba0db(-0xfb,-0xda,-0x95,-0xba)+'osition'];for(let _0x57da88=0x1536+-0x25d5+0x214*0x8;_0x57da88<=-0x1d1+-0x1964+0x1b39;_0x57da88++){_0x3e3253[_0x3ba0db(-0x127,-0x12f,-0x16e,-0x99)+_0x57da88+_0x3ba0db(-0xcf,-0x10f,-0x12e,-0x151)]&&(_0x3184a9=_0x518c59[_0x455385(-0x168,-0x135,-0x1be,-0x14e)](_0x518c59['lLWqw'](_0x1b4594,',\x20'),_0x4fb48b[_0x455385(-0x149,-0xfe,-0x12b,-0x151)+_0x57da88+_0x455385(-0x94,-0x134,-0xb2,-0xf9)]));}}else _0x518c59[_0x455385(-0x131,-0x5a,-0xde,-0xdb)](addLog,_0x3ba0db(-0x17e,-0x1a8,-0x18e,-0x19c)+_0x3ba0db(-0xca,-0xc8,-0xfa,-0x124)),_0x1b6ee0=_0x3b1db8;}let {modifiedPrompt:_0x2d3d24,insertions:_0x5835ae}=await prompt_replace(_0x1b6ee0,_0x1371f8);if(_0x3e5661){if(_0x518c59['yiaiT'](_0x518c59[_0x3ba0db(-0xdf,-0x10c,-0xb6,-0x50)],_0x518c59['wFUKy']))for(let _0xcb026a=0x11a0+-0xeaf+-0x2f0;_0xcb026a<=0x8d5+-0x13*0x2f+-0x554;_0xcb026a++){if(_0x518c59[_0x3ba0db(-0x109,-0x19c,-0xb2,-0x172)](_0x518c59['bANwD'],_0x518c59[_0x3ba0db(-0xdb,-0x8e,-0xc9,-0x84)])){if(_0x509067['Character\x20'+_0xcb026a+_0x455385(-0xfc,-0x181,-0x108,-0xf9)]){if(_0x518c59['eBPzx']!==_0x518c59['EUAzr'])_0x2d3d24=_0x518c59[_0x3ba0db(-0x95,-0x7b,-0x51,-0xe1)](_0x518c59[_0x3ba0db(-0xbb,-0xd5,-0xd4,-0xd0)](_0x2d3d24,_0x518c59[_0x3ba0db(-0x183,-0xfd,-0x10f,-0x1e2)]),_0x518c59['uHDXI'](prompt_replace_for_character,_0x509067['Character\x20'+_0xcb026a+_0x3ba0db(-0xcf,-0x74,-0x100,-0x61)]));else{_0x518c59['onfUe'](_0x108eca,_0x518c59[_0x3ba0db(-0x83,-0x99,-0x5c,0x2)]);const _0x18acff=_0x518c59[_0x3ba0db(-0x104,-0x18b,-0x81,-0x14c)](_0x106adb,'默认'),_0x2b8376={};_0x2b8376[_0x455385(-0xfa,-0x195,-0x17e,-0x107)+'on']=[],_0x2b8376[_0x455385(-0x13d,-0xd0,-0x91,-0xf0)+'t']='',_0x1b17d5=_0x9ab908[_0x18acff]||_0x2b8376,_0x518c59[_0x3ba0db(-0x14a,-0xcc,-0x181,-0xdb)](_0x30a624,_0x455385(-0x178,-0x101,-0x161,-0x188)+_0x455385(-0x1d4,-0x108,-0x16a,-0x144)+_0x18acff+'\x22');}}}else!_0x5147ea[_0x3ba0db(-0x18d,-0x157,-0xff,-0x135)+_0x455385(-0x148,-0xd9,-0xf0,-0xd7)+_0x3ba0db(-0xb0,-0x55,-0x92,-0xbe)]&&(_0x5bb656[_0x455385(-0x202,-0x1d5,-0x1fa,-0x1b7)+_0x3ba0db(-0xad,-0x43,-0x109,-0x4f)+_0x455385(-0x107,-0x99,-0x53,-0xda)]=!![],_0x518c59[_0x455385(-0xab,-0xbd,-0xf0,-0x122)](_0x5131fe)),_0x518c59[_0x3ba0db(-0x15a,-0x18e,-0x15f,-0xed)](_0x10c95d);}else{_0x46efe6(_0x3ba0db(-0xaf,-0x9e,-0xf5,-0xbf)+'启动');if(_0x4c03ee)_0x518c59['YNlad'](_0x68ed43,_0x455385(-0xb5,-0x142,-0x121,-0x110)+_0x3fc5f9);if(_0x9adb90)_0x518c59[_0x3ba0db(-0x193,-0x1d3,-0x185,-0x130)](_0x19b0f4,_0x455385(-0x132,-0x59,-0xe9,-0xaf)+']');}}const _0xc23353=extension_settings[extensionName]['banana'],{model:_0x24266b,apiUrl:_0x30e538,apiKey:_0x230a9c,conversationPresets:_0x11822c,conversationPresetId:_0x292139,editPresetId:_0x3f43aa,aspectRatio:_0x1fe655}=_0xc23353;_0x518c59[_0x3ba0db(-0x175,-0x100,-0x14c,-0x145)](addLog,_0x455385(-0x148,-0x20a,-0x193,-0x191)+_0x455385(-0xa7,-0x139,-0x2f,-0xb5)+_0x455385(-0x1d8,-0x1b6,-0x13c,-0x19b)+_0x3ba0db(-0xc5,-0x6b,-0x13a,-0x70)+_0x3ba0db(-0x18f,-0x1dc,-0x209,-0x113)+_0x24266b);let _0x2e37a1,_0x1b429f;if(_0x24266b[_0x455385(-0x154,-0x1e1,-0x113,-0x154)](_0x455385(-0x241,-0x1c6,-0x182,-0x1ba))){_0x2e37a1=_0x3ba0db(-0xfe,-0xb3,-0x147,-0xa4)+_0x3ba0db(-0x18a,-0x1b8,-0x1a9,-0x185)+_0x24266b;const _0x58544e={};_0x58544e[_0x3ba0db(-0xc6,-0x152,-0x12c,-0x110)+'t']='';const _0x3dcd93=_0x11822c[_0x292139]||_0x58544e,_0x5e8c2f=[_0x3dcd93[_0x3ba0db(-0xc6,-0x5d,-0x133,-0x4d)+'t'],_0x5835ae[_0x518c59['tzBUS']],_0x5835ae[_0x518c59[_0x3ba0db(-0x163,-0x1a8,-0x1ec,-0x1e7)]],_0x2d3d24,_0x5835ae[_0x518c59['ZqjTs']],_0x5835ae[_0x518c59['uZBPW']],_0x3dcd93[_0x455385(-0x208,-0x21d,-0x162,-0x1aa)+'mpt'],_0x5835ae[_0x518c59['MHCmX']]][_0x3ba0db(-0x192,-0x18d,-0x1d9,-0x1cd)](Boolean)[_0x455385(-0x15a,-0x165,-0x160,-0x140)](',\x20');_0x518c59['xRadA'](addLog,_0x455385(-0x32,-0xe9,-0xc7,-0xa5)+_0x5e8c2f);const _0x30bf9b={};_0x30bf9b[_0x455385(-0x128,-0x1fc,-0x200,-0x173)]=_0x5e8c2f;const _0x49d1ca={};_0x49d1ca[_0x455385(-0xe9,-0x139,-0x121,-0xa7)+'t']=0x1,_0x49d1ca[_0x455385(-0x14d,-0xe0,-0x12e,-0xcf)+'o']=_0x1fe655;const _0x4407c3={};_0x4407c3[_0x455385(-0x155,-0x169,-0x16c,-0x177)]=[_0x30bf9b],_0x4407c3[_0x3ba0db(-0xc8,-0x5a,-0x4f,-0xc6)]=_0x49d1ca,_0x1b429f=_0x4407c3,_0x518c59[_0x455385(-0x118,-0x8d,-0x86,-0x115)](addLog,_0x455385(-0x129,-0xe0,-0x1b1,-0x143)+'uilt\x20Image'+_0x3ba0db(-0xf6,-0x135,-0x120,-0x76)+'with\x20promp'+_0x3ba0db(-0x117,-0xf0,-0xbc,-0x122)+_0x5e8c2f);}else{_0x2e37a1=_0x455385(-0x113,-0x18b,-0x18b,-0x19e)+'ompletions';let _0x5dd86c;if(_0x350d07['includes'](_0x518c59[_0x455385(-0x127,-0x20a,-0x13f,-0x1b5)])){_0x518c59['xRadA'](addLog,'[Banana]\x20启'+_0x455385(-0x19e,-0x1b3,-0x1e9,-0x1b6)+'。');const _0x124997=_0x518c59[_0x455385(-0x115,-0x12c,-0xb5,-0x124)](_0x3f43aa,'默认'),_0x1f2222={};_0x1f2222['conversati'+'on']=[],_0x1f2222[_0x3ba0db(-0xc6,-0xad,-0x58,-0x13f)+'t']='',_0x5dd86c=_0x11822c[_0x124997]||_0x1f2222,_0x518c59['uHDXI'](addLog,_0x455385(-0x1c8,-0x165,-0x20a,-0x188)+_0x3ba0db(-0x11a,-0xf9,-0xeb,-0xe8)+_0x124997+'\x22');}else{const _0x400545={};_0x400545[_0x455385(-0x178,-0x14e,-0x15d,-0x107)+'on']=[],_0x400545[_0x3ba0db(-0xc6,-0x82,-0xef,-0xed)+'t']='',_0x5dd86c=_0x11822c[_0x292139]||_0x400545;}const _0x126a05=[_0x5dd86c[_0x455385(-0x10f,-0x154,-0x9a,-0xf0)+'t'],_0x5835ae[_0x455385(-0x7e,-0x4a,-0x99,-0xd8)],_0x5835ae[_0x518c59[_0x3ba0db(-0x163,-0xea,-0xd1,-0x110)]],_0x2d3d24,_0x5835ae[_0x455385(-0x86,-0x27,-0x135,-0xb9)],_0x5835ae[_0x3ba0db(-0x11f,-0x190,-0x113,-0xb8)],_0x5dd86c[_0x3ba0db(-0x180,-0x141,-0x119,-0x169)+_0x455385(-0xf3,-0xb6,-0x165,-0x101)],_0x5835ae[_0x518c59[_0x3ba0db(-0x152,-0x1d2,-0xf6,-0xff)]]][_0x455385(-0x17e,-0x15c,-0x16b,-0x1bc)](Boolean)[_0x455385(-0x1c5,-0x17a,-0x1b2,-0x140)](',\x20');_0x518c59['xRadA'](addLog,_0x455385(-0xa8,-0x79,-0x50,-0xa5)+_0x126a05);const _0x3e9fa0={};_0x3e9fa0[_0x3ba0db(-0x8c,-0x71,-0x9e,-0xe3)]=_0x3ba0db(-0x10d,-0xa8,-0xd9,-0x19c),_0x3e9fa0[_0x455385(-0x1b5,-0x184,-0x189,-0x12d)]=[];const _0x2310a2={};_0x2310a2['role']=_0x3ba0db(-0xc3,-0x112,-0x86,-0xd9),_0x2310a2['content']=[];const _0x26e71f=_0x5dd86c[_0x455385(-0xb4,-0x10a,-0xc4,-0x107)+'on'][_0x3ba0db(-0x154,-0xf5,-0x1a9,-0x1e7)](_0x31fca6=>[_0x3e9fa0,_0x2310a2])[_0x3ba0db(-0x166,-0x1cd,-0x188,-0x1be)]();let _0xea96f9=0x1*-0x19fd+0x1eba+0x1*-0x4bd;for(const _0x2b23a7 of _0x5dd86c[_0x455385(-0x12c,-0x185,-0x181,-0x107)+'on']){if(_0x2b23a7[_0x455385(-0xd7,-0x124,-0x1aa,-0x137)]?.['text'])_0x26e71f[_0xea96f9][_0x3ba0db(-0x103,-0x11d,-0xf7,-0x116)][_0x455385(-0xdb,-0xe5,-0x146,-0x15c)]({'type':_0x455385(-0x192,-0x10d,-0x100,-0x13f),'text':_0x2b23a7['user'][_0x455385(-0x1c3,-0x1bd,-0xbf,-0x13f)]});const _0xa75226=await _0x518c59['cDlyK'](getImageFromTurnData,_0x2b23a7['user']);if(_0xa75226)_0x26e71f[_0xea96f9]['content'][_0x3ba0db(-0x132,-0x1bc,-0xb0,-0x138)]({'type':_0x518c59[_0x3ba0db(-0xc1,-0xda,-0x30,-0x131)],'image_url':{'url':_0xa75226}});_0xea96f9++;if(_0x2b23a7[_0x455385(-0x195,-0x11e,-0x1f3,-0x1b0)]?.[_0x455385(-0x11a,-0x100,-0x176,-0x13f)])_0x26e71f[_0xea96f9][_0x3ba0db(-0x103,-0x8a,-0x18f,-0x188)][_0x3ba0db(-0x132,-0xd8,-0x195,-0xda)]({'type':_0x518c59[_0x3ba0db(-0x10c,-0x9d,-0x15c,-0x18e)],'text':_0x2b23a7['model'][_0x455385(-0x193,-0xfd,-0x146,-0x13f)]});const _0x2c259b=await _0x518c59[_0x3ba0db(-0xf7,-0xdf,-0x12e,-0xe2)](getImageFromTurnData,_0x2b23a7['model']);if(_0x2c259b)_0x26e71f[_0xea96f9]['content']['push']({'type':_0x3ba0db(-0x169,-0x1de,-0x1c4,-0x11d),'image_url':{'url':_0x2c259b}});_0xea96f9++;}if(!_0x350d07[_0x455385(-0xb3,-0x106,-0x131,-0x142)](_0x518c59[_0x3ba0db(-0x18b,-0x11c,-0x101,-0x128)])){const _0x20c84f=extension_settings[extensionName][_0x455385(-0x136,-0xad,-0x16a,-0x10c)+_0x3ba0db(-0x90,-0x94,-0xcb,-0xd7)+'ts']||{};for(const _0x2c4a4a in _0x20c84f){if(_0x518c59[_0x455385(-0x213,-0x175,-0x146,-0x1a0)](_0x518c59[_0x3ba0db(-0x165,-0x1b7,-0x183,-0x151)],_0x518c59[_0x455385(-0x11b,-0x85,-0x59,-0xe1)])){const _0x165cb6=_0x20c84f[_0x2c4a4a],_0x21b88b=(_0x165cb6['triggers']||'')[_0x455385(-0x18b,-0x1d8,-0x16b,-0x180)]('|')[_0x3ba0db(-0x192,-0x1f2,-0x1b2,-0x14d)](_0x41889a=>_0x41889a[_0x3ba0db(-0x17b,-0x14e,-0x102,-0x160)]()!=='');for(const _0x1d5318 of _0x21b88b){if(_0x126a05[_0x3ba0db(-0xd4,-0x8b,-0xa7,-0x119)+'e']()[_0x455385(-0x13e,-0x10e,-0x12a,-0x142)](_0x1d5318[_0x3ba0db(-0xd4,-0x45,-0x82,-0xdd)+'e']())){addLog(_0x3ba0db(-0x14e,-0xc9,-0x1cd,-0x171)+_0x3ba0db(-0x135,-0x12e,-0xf5,-0x1a4)+_0x3ba0db(-0x112,-0x145,-0x174,-0x16a)+_0x455385(-0xf9,-0x113,-0xfe,-0x111)+_0x1d5318+('\x22\x20from\x20pre'+_0x3ba0db(-0xf5,-0x63,-0x8e,-0xaa))+_0x2c4a4a+'\x22.');const _0x3d9df5=_0x165cb6[_0x3ba0db(-0xdd,-0x52,-0x4b,-0x15d)+'on'];if(_0x3d9df5){if(_0x518c59[_0x3ba0db(-0x176,-0x203,-0x121,-0x174)](_0x518c59[_0x455385(-0xb4,-0x114,-0x5d,-0xb7)],_0x518c59[_0x3ba0db(-0xd5,-0x160,-0x13f,-0x4f)])){const _0x3f655c=[];if(_0x3d9df5[_0x455385(-0x14b,-0xb2,-0x14b,-0x137)]&&_0x3d9df5[_0x3ba0db(-0x10d,-0x11b,-0x109,-0x196)][_0x455385(-0x132,-0xcf,-0xdd,-0x13f)])_0x3f655c['push']({'type':_0x3ba0db(-0x115,-0x141,-0x19a,-0xec),'text':_0x3d9df5[_0x455385(-0xea,-0xe7,-0x19e,-0x137)][_0x3ba0db(-0x115,-0xcb,-0x8d,-0x18e)]});const _0x1e6dbd=await _0x518c59[_0x3ba0db(-0x106,-0x180,-0x124,-0x192)](getImageFromTurnData,_0x3d9df5[_0x455385(-0xb0,-0x109,-0xbe,-0x137)]);if(_0x1e6dbd)_0x3f655c[_0x3ba0db(-0x132,-0xec,-0x1bf,-0xdb)]({'type':_0x518c59[_0x3ba0db(-0xc1,-0x9e,-0xb4,-0x116)],'image_url':{'url':_0x1e6dbd}});if(_0x518c59[_0x3ba0db(-0x145,-0x11a,-0x1a8,-0xb8)](_0x3f655c[_0x3ba0db(-0xef,-0x113,-0x7d,-0x10d)],0x257b+-0x197c+-0xbff)){if(_0x518c59[_0x455385(-0x1d1,-0x1e5,-0x149,-0x1a2)](_0x518c59['KGdTf'],_0x518c59[_0x3ba0db(-0xd1,-0xb9,-0x150,-0xe9)])){const _0x3454b7={};_0x3454b7[_0x455385(-0xaa,-0x30,-0x47,-0xb6)]=_0x518c59[_0x3ba0db(-0xa9,-0x12d,-0x8f,-0x5b)],_0x3454b7[_0x3ba0db(-0x103,-0xc9,-0x96,-0x134)]=_0x3f655c,_0x26e71f[_0x3ba0db(-0x132,-0x1ba,-0x1b4,-0x162)](_0x3454b7);}else _0x4b8ac1['on'](_0x1969a,_0xc3dd2f);}const _0x271887=[];if(_0x3d9df5[_0x3ba0db(-0x186,-0x12d,-0x1a7,-0x138)]&&_0x3d9df5[_0x455385(-0x23c,-0x1a6,-0x1d7,-0x1b0)][_0x455385(-0x16f,-0xc1,-0x197,-0x13f)])_0x271887['push']({'type':_0x518c59[_0x3ba0db(-0x10c,-0x189,-0xed,-0x7a)],'text':_0x3d9df5['model']['text']});const _0x3f1b45=await _0x518c59[_0x3ba0db(-0x106,-0x142,-0x98,-0x10f)](getImageFromTurnData,_0x3d9df5[_0x3ba0db(-0x186,-0x1e6,-0x166,-0x176)]);if(_0x3f1b45)_0x271887[_0x3ba0db(-0x132,-0xbd,-0xd3,-0xdf)]({'type':_0x518c59['OYbtR'],'image_url':{'url':_0x3f1b45}});if(_0x518c59[_0x455385(-0x198,-0xfc,-0x169,-0x16f)](_0x271887[_0x3ba0db(-0xef,-0x17a,-0x9d,-0x76)],-0x762+0xd5c+-0x6*0xff)){const _0x512f43={};_0x512f43[_0x455385(-0x135,-0x110,-0x8a,-0xb6)]=_0x518c59[_0x3ba0db(-0x13b,-0xe2,-0x150,-0xb7)],_0x512f43[_0x455385(-0xa5,-0x157,-0x102,-0x12d)]=_0x271887,_0x26e71f[_0x455385(-0x14b,-0x1b6,-0x1e9,-0x15c)](_0x512f43);}}else{const _0x34a74e=[],_0x46c551=_0x37240e||_0x204e17,_0x1c9b15=[_0x9e5229[_0x455385(-0xed,-0xaf,-0x66,-0xf0)+'t'],_0x46c551,_0xe1ce1e[_0x455385(-0x196,-0x119,-0x146,-0x1aa)+_0x3ba0db(-0xd7,-0x5f,-0x153,-0xbc)]][_0x3ba0db(-0x192,-0x1e8,-0x1ca,-0x17d)](_0x41ecf7)[_0x455385(-0xf4,-0x186,-0x14e,-0x140)](',\x20'),_0x9321a8={};_0x9321a8[_0x455385(-0x145,-0x100,-0xfe,-0x13a)]='text',_0x9321a8[_0x455385(-0x1b6,-0xe8,-0x111,-0x13f)]=_0x1c9b15,_0x34a74e[_0x455385(-0x16e,-0x1a2,-0x134,-0x15c)](_0x9321a8);if(_0x3696f5){const _0x508570={};_0x508570[_0x455385(-0x18a,-0x185,-0x101,-0x171)]=_0x1bd874;const _0x444c3b={};_0x444c3b[_0x3ba0db(-0x110,-0x19b,-0x113,-0x113)]=_0x455385(-0x1ef,-0x126,-0x1a1,-0x193),_0x444c3b[_0x455385(-0x1e8,-0x1e2,-0x215,-0x193)]=_0x508570,_0x34a74e[_0x455385(-0x17a,-0xf6,-0x1be,-0x15c)](_0x444c3b),_0x518c59['PxDXj'](_0x1f012e,_0x3ba0db(-0xff,-0xa1,-0x17b,-0x6f)+_0x3ba0db(-0x11d,-0x125,-0xc2,-0x19d)+'的图片');}const _0x4fdeb5={};_0x4fdeb5[_0x3ba0db(-0x8c,-0x18,-0x2b,-0xdd)]=_0x518c59[_0x3ba0db(-0xa9,-0x100,-0xec,-0x4a)],_0x4fdeb5[_0x3ba0db(-0x103,-0x13a,-0x17c,-0x15c)]=_0x34a74e,_0x52b628[_0x455385(-0xcf,-0x192,-0x1c6,-0x15c)](_0x4fdeb5),_0x3e1301(_0x455385(-0x177,-0xd1,-0x147,-0x129)+_0x3ba0db(-0x12e,-0xd0,-0x158,-0x19a)+_0x1c9b15);}}break;}}}else{_0x518c59['hklbT'](_0x39853e),_0x26d5c0(_0x455385(-0x114,-0x1d3,-0x148,-0x178)+_0x3ba0db(-0xe5,-0x14d,-0xae,-0xdb)+':\x20'+_0xf78212[_0x455385(-0xd8,-0x16a,-0x65,-0xe2)]),_0x4b712e[_0x455385(-0x20d,-0x105,-0x192,-0x189)](_0x518c59['oBMJK'],_0x33c120);throw _0x3cc843;}}}if(!_0x350d07['includes'](_0x518c59['jwhAZ'])){const _0x55f7c5={};_0x55f7c5['type']=_0x455385(-0x1ad,-0x101,-0x1ca,-0x13f),_0x55f7c5['text']=_0x126a05;const _0x3f95f7={};_0x3f95f7[_0x455385(-0x58,-0x87,-0xa9,-0xb6)]=_0x518c59[_0x455385(-0xab,-0x146,-0xdd,-0xd3)],_0x3f95f7[_0x3ba0db(-0x103,-0x192,-0x162,-0xe6)]=[_0x55f7c5],_0x26e71f['push'](_0x3f95f7);}else{const _0x4889f2=[],_0xc4950b=_0x518c59[_0x3ba0db(-0xbe,-0xf1,-0xaa,-0xc3)](_0x529d2e,_0x126a05),_0x40e715=[_0x5dd86c[_0x3ba0db(-0xc6,-0x100,-0xd1,-0x12c)+'t'],_0xc4950b,_0x5dd86c[_0x455385(-0x21e,-0x146,-0x1ef,-0x1aa)+_0x3ba0db(-0xd7,-0x130,-0x51,-0x4b)]]['filter'](Boolean)['join'](',\x20'),_0x33abf0={};_0x33abf0[_0x455385(-0x160,-0x18b,-0x193,-0x13a)]=_0x455385(-0x1a4,-0x16a,-0x1b6,-0x13f),_0x33abf0['text']=_0x40e715,_0x4889f2[_0x455385(-0x1d6,-0x11b,-0x11a,-0x15c)](_0x33abf0);if(_0x21f528){if(_0x518c59[_0x3ba0db(-0xb4,-0xc9,-0x52,-0x123)](_0x518c59[_0x3ba0db(-0x126,-0x167,-0xb7,-0x196)],_0x518c59[_0x3ba0db(-0x126,-0x12d,-0xc3,-0x135)])){const _0x2ad078={};_0x2ad078[_0x3ba0db(-0x147,-0x1d5,-0x17b,-0xc2)]=_0x21f528;const _0x16e089={};_0x16e089[_0x455385(-0xdf,-0x173,-0xdb,-0x13a)]=_0x518c59['OYbtR'],_0x16e089['image_url']=_0x2ad078,_0x4889f2[_0x3ba0db(-0x132,-0x171,-0xf4,-0xcb)](_0x16e089),addLog(_0x455385(-0x195,-0x15b,-0xe1,-0x129)+'图模式：已添加待修改'+_0x3ba0db(-0x140,-0x126,-0x112,-0x17a));}else _0xae7ac4=_0x518c59['lLWqw'](_0x518c59[_0x455385(-0x1a2,-0xc2,-0xf7,-0x14e)](_0x17c587,',\x20'),_0x5cc655[_0x455385(-0x1a8,-0x188,-0xdd,-0x151)+_0x23dfe4+'\x20Prompt']);}const _0x31e20a={};_0x31e20a[_0x455385(-0xb1,-0xe2,-0x113,-0xb6)]=_0x455385(-0x15e,-0x19e,-0x143,-0x137),_0x31e20a[_0x455385(-0x123,-0x194,-0x116,-0x12d)]=_0x4889f2,_0x26e71f[_0x455385(-0x121,-0x1ee,-0x19e,-0x15c)](_0x31e20a),_0x518c59['lTIUA'](addLog,_0x3ba0db(-0xff,-0xdc,-0x121,-0xf1)+_0x455385(-0xfe,-0xe9,-0x185,-0x158)+_0x40e715);}const _0x7b8109={};_0x7b8109[_0x455385(-0x160,-0x106,-0x12f,-0xcf)+'o']=_0x1fe655;const _0x60f450={};_0x60f450[_0x3ba0db(-0x136,-0x19b,-0x11d,-0x195)+'g']=_0x7b8109,_0x1b429f={'model':_0x24266b,'messages':_0x26e71f['filter'](_0x11a054=>_0x11a054[_0x3ba0db(-0x103,-0x109,-0x101,-0x121)][_0x3ba0db(-0xef,-0x163,-0xe9,-0xc0)]>0x227d+0x15a5*0x1+0x95b*-0x6),'config':_0x60f450},_0x518c59[_0x3ba0db(-0x7f,-0xd8,-0x7b,-0xc8)](addLog,_0x3ba0db(-0x119,-0xe2,-0x181,-0x129)+_0x455385(-0x13e,-0x199,-0x121,-0x152)+'modal\x20payl'+_0x455385(-0x158,-0x142,-0x79,-0x106)+_0x1b429f['messages']['length']+'\x20messages.');}let _0x252365=_0x30e538[_0x455385(-0x6c,-0x15f,-0x13b,-0xfd)](/\/$/,''),_0x15d24a;_0x252365[_0x455385(-0x76,-0x13e,-0xeb,-0xbc)](_0x455385(-0xb6,-0x54,-0x110,-0xb3))||_0x252365[_0x3ba0db(-0x118,-0x108,-0x167,-0x14b)](_0x518c59['VJclv'])?_0x15d24a=_0x518c59['StKPP'](_0x252365,_0x2e37a1):_0x518c59[_0x3ba0db(-0x148,-0x11e,-0x15e,-0x1ab)]!==_0x518c59[_0x3ba0db(-0xb3,-0xad,-0x10e,-0xe2)]?_0x15d24a=_0x518c59['tNynG'](_0x252365+_0x518c59['Vcyzm'],_0x2e37a1):(_0x2e0fe6[_0x455385(-0x99,-0x17e,-0x85,-0xf8)+'ener'](_0x43589e[_0x455385(-0xff,-0x15f,-0x167,-0x10e)+_0x3ba0db(-0x108,-0x18a,-0x125,-0x10e)+'ST'],_0x479602),_0x258268[_0x455385(-0x1a4,-0x232,-0x1ab,-0x1b2)](_0x33b521=>{function _0x56ca20(_0x562a94,_0x2a7473,_0xeb7e9d,_0x5c252d){return _0x455385(_0x562a94-0x79,_0x2a7473-0xaa,_0x5c252d,_0x562a94-0xc8);}function _0x449dc3(_0x1822bd,_0x2eb62b,_0x4b6dc7,_0x51ad03){return _0x3ba0db(_0x1822bd-0x39c,_0x2eb62b-0x143,_0x51ad03,_0x51ad03-0x24);}_0x235b01[_0x56ca20(-0x30,-0x7,0x3e,-0x7b)+_0x449dc3(0x2ec,0x34b,0x284,0x27f)](_0x33b521,_0x450acb);}),_0x3cc8ab[_0x455385(-0x1f0,-0x146,-0x1d2,-0x1b7)+_0x455385(-0xc8,-0xa4,-0x6b,-0xd7)+_0x455385(-0x9c,-0xef,-0xf8,-0xda)]=![],_0x988815('[Banana]\x20生'+_0x3ba0db(-0x16a,-0xea,-0xf1,-0x171)));_0x15d24a=_0x15d24a[_0x455385(-0x121,-0x167,-0x141,-0xfd)](/\/v1\/v1\//g,_0x518c59[_0x455385(-0x13d,-0x160,-0x1c6,-0x14d)]),addLog(_0x3ba0db(-0x167,-0x121,-0x1e2,-0x1b1)+'ending\x20req'+'uest\x20to:\x20'+_0x15d24a);function _0x3ba0db(_0x4af657,_0xf33e41,_0x263ba5,_0x6caa67){return _0x1b45(_0x4af657- -0x358,_0x263ba5);}_0x518c59[_0x455385(-0x172,-0x162,-0x15f,-0x1a4)](addLog,_0x455385(-0x11a,-0x16a,-0x1a0,-0x13e)+'ayload:\x20'+JSON[_0x3ba0db(-0xa0,-0x7f,-0x10d,-0xf6)](_0x1b429f,null,0x9fa+-0x7*-0x119+-0x11a7));try{if(_0x518c59[_0x3ba0db(-0x109,-0x94,-0xff,-0xe2)](_0x518c59[_0x455385(-0x110,-0xaa,-0x14c,-0xf3)],_0x518c59['gJqCx'])){await _0x518c59[_0x455385(-0x185,-0x1bf,-0x184,-0x18e)](waitForLock),_0x518c59[_0x455385(-0x157,-0xc9,-0x83,-0xcb)](acquireLock);const _0x26ad69=await _0x518c59[_0x3ba0db(-0x197,-0x164,-0x1df,-0x176)](fetch,_0x15d24a,{'method':_0x455385(-0xdc,-0x42,-0xe2,-0xaa),'headers':{'Content-Type':_0x518c59['iOmSo'],'Authorization':_0x3ba0db(-0x184,-0x1d2,-0x1e5,-0x216)+_0x230a9c},'body':JSON['stringify'](_0x1b429f)});if(!_0x26ad69['ok']){const _0x4b1524=await _0x26ad69[_0x3ba0db(-0x115,-0x86,-0x196,-0xff)]();throw new Error(_0x455385(-0x11a,-0x172,-0x1f1,-0x16c)+_0x3ba0db(-0xc4,-0xab,-0xc0,-0x11e)+_0x3ba0db(-0xb6,-0xfb,-0x90,-0xa7)+'\x20'+_0x26ad69[_0x455385(-0x123,-0x135,-0xd9,-0x167)]+':\x20'+_0x4b1524);}const _0x259ac4=await _0x26ad69[_0x455385(-0x1d2,-0x148,-0x11f,-0x14a)]();let _0x368edd='';const _0xb73a28=_0x259ac4[_0x455385(-0x17f,-0x13d,-0x175,-0x10b)];if(_0xb73a28&&_0x518c59[_0x455385(-0x184,-0x10b,-0x1ed,-0x16f)](_0xb73a28[_0x455385(-0x9b,-0xa1,-0x103,-0x119)],0x19a4+0xa02+0x23a6*-0x1)){const _0x306f3a=_0xb73a28[0x187c+-0x5*-0x476+-0x71*0x6a][_0x3ba0db(-0xb8,-0x103,-0x11d,-0x128)]?.[_0x455385(-0x159,-0xa0,-0x199,-0x12d)];if(Array[_0x3ba0db(-0x16c,-0x1f5,-0x1cc,-0x12e)](_0x306f3a))for(const _0xdaf27c of _0x306f3a){if(_0x518c59[_0x3ba0db(-0x178,-0x14f,-0x19a,-0x133)](_0xdaf27c[_0x3ba0db(-0x110,-0x135,-0x8f,-0x117)],_0x518c59[_0x455385(-0xaf,-0xad,-0x119,-0xeb)])&&_0xdaf27c[_0x455385(-0x151,-0x118,-0x1b4,-0x193)]?.['url']){_0x368edd=_0xdaf27c[_0x3ba0db(-0x169,-0xe2,-0x1f2,-0xdf)][_0x3ba0db(-0x147,-0x17e,-0xcf,-0x16a)];break;}}else _0x518c59['FHIlI'](typeof _0x306f3a,_0x3ba0db(-0x11b,-0x163,-0xbc,-0xc9))&&_0x518c59[_0x3ba0db(-0xba,-0x6a,-0x2c,-0x120)](addLog,_0x3ba0db(-0x13a,-0x1ac,-0x112,-0x19d)+_0x3ba0db(-0xec,-0xef,-0x159,-0x175)+_0x3ba0db(-0x98,-0x2d,-0xf8,-0x5e)+_0x3ba0db(-0x161,-0x199,-0x14f,-0x1df)+_0x3ba0db(-0x199,-0x146,-0x1cc,-0x127));}if(!_0x368edd)throw new Error(_0x518c59['BtUAV']);return _0x518c59[_0x3ba0db(-0x15a,-0xfb,-0x11a,-0x141)](releaseLock),_0x518c59[_0x3ba0db(-0x150,-0x1a4,-0x17c,-0x167)](addLog,_0x518c59[_0x3ba0db(-0x15d,-0x1df,-0x187,-0x147)]),{'image':_0x368edd,'change':_0x518c59[_0x3ba0db(-0x104,-0xc1,-0x188,-0x11b)](_0x482c75,'')};}else throw new _0x2f62bc(_0x518c59['BtUAV']);}catch(_0x2d93b2){if(_0x518c59[_0x3ba0db(-0x162,-0x10b,-0x158,-0xf3)](_0x455385(-0xc8,-0xd1,-0x182,-0x11a),_0x518c59[_0x455385(-0x11a,-0x186,-0x1ec,-0x19a)])){releaseLock(),addLog(_0x3ba0db(-0x14e,-0x12c,-0x113,-0xd6)+_0x3ba0db(-0xe5,-0x9b,-0x176,-0x16c)+':\x20'+_0x2d93b2[_0x455385(-0x5d,-0x75,-0x51,-0xe2)]),console[_0x455385(-0x1ed,-0x1bd,-0x149,-0x189)](_0x518c59['oBMJK'],_0x2d93b2);throw _0x2d93b2;}else _0x17a3d0['initialize'+_0x455385(-0xde,-0x4b,-0xe2,-0xd7)+_0x3ba0db(-0xb0,-0x6d,-0xf5,-0xc6)]=!![],_0x518c59[_0x455385(-0x213,-0x15b,-0x109,-0x184)](_0x5d4295);}}export async function bananaGenerate(_0x5c087d){const _0x187127={'CGiZw':_0x25bb3d(0x45,0xa0,0xab,0x42),'tWSSR':function(_0x151531,_0x58a605){return _0x151531(_0x58a605);},'LcRnX':function(_0x3b183d,_0x458f87){return _0x3b183d!==_0x458f87;},'RYkDo':_0x25bb3d(0x7b,0x36,0x84,0xd3),'lmutD':_0x25bb3d(0x7a,0xcf,0x52,0x45),'nzhuM':_0x25bb3d(0xd5,0xf4,0x65,0xb3),'glPzG':function(_0x4f132d,_0x28e8d8){return _0x4f132d(_0x28e8d8);},'MuXnw':function(_0x17d113,_0xf8dee){return _0x17d113===_0xf8dee;},'euMgm':_0x2b28f9(0x581,0x580,0x570,0x546),'NTRWh':function(_0x1110ae,_0x3dbf92){return _0x1110ae(_0x3dbf92);},'XDxJx':function(_0x17bee6,_0x57f21){return _0x17bee6===_0x57f21;},'wvnOe':_0x25bb3d(0x165,0xee,0x116,0x1a8),'XeOnQ':'VyEEJ','SCheH':function(_0x546e53,_0x20bedd,_0x394f40,_0x5f4923){return _0x546e53(_0x20bedd,_0x394f40,_0x5f4923);},'YVuJo':function(_0x6e47f0,_0x2b8800){return _0x6e47f0+_0x2b8800;},'fOvHc':function(_0x407c0c,_0x5cc931){return _0x407c0c(_0x5cc931);},'oulWg':function(_0x2a98b2,_0x2b6953){return _0x2a98b2(_0x2b6953);}};clearLog();let {id:_0x36a10f,prompt:_0x5be128,width:_0x56683a,height:_0x4b7851,change:_0x266e7f,retouchPrompt:_0xb33c56,retouchImage:_0x40e78b}=_0x5c087d;function _0x2b28f9(_0x2db871,_0x4bd014,_0x1ac74f,_0x4788d8){return _0x1b45(_0x4bd014-0x3bd,_0x4788d8);}_0x187127[_0x25bb3d(0x15b,0x14f,0xee,0x8a)](addLog,_0x2b28f9(0x667,0x5db,0x59a,0x62a)+_0x2b28f9(0x6b4,0x676,0x695,0x6dc)+_0x25bb3d(0xba,0x70,0x4f,-0x21)+_0x2b28f9(0x52b,0x5aa,0x631,0x5b0)+_0x2b28f9(0x5be,0x60e,0x586,0x698)+_0x36a10f+')');function _0x25bb3d(_0x4b04e2,_0x35b84d,_0x3e1f60,_0x614cc){return _0x1b45(_0x3e1f60- -0x198,_0x4b04e2);}let _0x40e9e4='';_0x266e7f?_0x187127[_0x2b28f9(0x724,0x69b,0x631,0x6cf)](_0x187127[_0x25bb3d(0x65,0x124,0xaf,0x33)],_0x187127['lmutD'])?_0x40e9e4=_0x266e7f[_0x2b28f9(0x555,0x594,0x626,0x51f)](_0x187127[_0x2b28f9(0x650,0x5e8,0x5c6,0x57f)],''):_0x1aa351=_0x529688['replaceAll'](_0x25bb3d(0xdc,0x56,0x65,-0x2),''):_0x40e9e4=_0x5be128;if(_0x266e7f&&_0x266e7f[_0x25bb3d(0x51,0x9f,0xa8,0xd3)](_0x187127['nzhuM'])){_0x187127[_0x2b28f9(0x658,0x643,0x5e6,0x5de)](addLog,_0x2b28f9(0x5f4,0x666,0x5d8,0x6ba)+'启动');if(_0xb33c56)_0x187127[_0x2b28f9(0x5e7,0x5e4,0x623,0x600)](addLog,'修图指令:\x20'+_0xb33c56);if(_0x40e78b)addLog(_0x25bb3d(0x1aa,0xf8,0x13b,0x188)+']');}try{if(_0x187127[_0x2b28f9(0x572,0x581,0x60c,0x5c6)](_0x187127[_0x25bb3d(0x95,0x113,0xe8,0x12d)],_0x187127[_0x25bb3d(0xbc,0xa7,0xe8,0x7a)])){const {image:_0x8f3e4f,change:_0x4c0ebb}=await _0x187127[_0x2b28f9(0x5d3,0x635,0x672,0x65e)](generateBananaImage,{'prompt':_0x5be128,'width':_0x56683a,'height':_0x4b7851,'change':_0x266e7f,'retouchPrompt':_0xb33c56,'retouchImage':_0x40e78b});if(extension_settings[extensionName][_0x2b28f9(0x5fc,0x67e,0x6f0,0x6dd)]!='0'){if(_0x187127[_0x25bb3d(0x4a,0x89,0x7c,0xee)](_0x187127[_0x25bb3d(0x8d,0x7a,0x6f,-0xb)],_0x187127['XeOnQ'])){const _0x59ae4d={};_0x59ae4d[_0x2b28f9(0x63b,0x605,0x579,0x62b)]=_0x187127[_0x25bb3d(0x122,0x1c9,0x13a,0x18c)],_0x59ae4d[_0x25bb3d(0x122,0x42,0xab,0xb5)]=_0x335e0f;const _0x42862e={};_0x42862e[_0x25bb3d(0xad,0x1b1,0x134,0x1bd)]=_0x2b28f9(0x5b0,0x608,0x624,0x5b0),_0x42862e[_0x25bb3d(0x2d,0x3d,0xbd,0xdb)]=[_0x59ae4d],_0x39338a['push'](_0x42862e);}else{const _0x6ed9fd={};_0x6ed9fd[_0x2b28f9(0x6b8,0x66e,0x652,0x6ca)]=_0x40e9e4,await _0x187127[_0x2b28f9(0x6b1,0x623,0x5a3,0x62c)](setItemImg,_0x5be128,_0x8f3e4f,_0x6ed9fd),_0x187127[_0x25bb3d(0x77,0xb1,0xe0,0x6b)](addLog,_0x2b28f9(0x66d,0x691,0x6f3,0x620)+_0x25bb3d(0x1c,0x7b,0x89,0x81)+'\x20'+_0x5be128),extension_settings[extensionName][_0x25bb3d(0xd4,0x18b,0x10e,0xf9)]['cishu']?(extension_settings[extensionName][_0x2b28f9(0x6dd,0x663,0x6cd,0x6c6)]['cishu']=_0x187127['YVuJo'](extension_settings[extensionName][_0x2b28f9(0x623,0x663,0x6d8,0x644)][_0x2b28f9(0x5a7,0x587,0x4fb,0x5b8)],0x4a*0x28+0x497+-0x1026),addLog('当前生图次数为\x20fo'+_0x2b28f9(0x5bf,0x5c0,0x5f3,0x63c)+extension_settings[extensionName][_0x2b28f9(0x650,0x663,0x6d8,0x664)][_0x25bb3d(-0x32,-0x4f,0x32,-0x43)])):(extension_settings[extensionName][_0x25bb3d(0xf9,0xa0,0x10e,0xae)]['cishu']=-0x1d47+0x322+0x1a26,_0x187127[_0x2b28f9(0x671,0x669,0x6ed,0x6bf)](addLog,_0x25bb3d(0xf9,0x64,0xb2,0x40)+'r\x20prompt:\x20'+extension_settings[extensionName][_0x25bb3d(0xc2,0x198,0x10e,0xec)][_0x25bb3d(0x1,0xa9,0x32,-0x4)]));}}else _0x187127['fOvHc'](addLog,_0x25bb3d(-0x12,0x72,0x67,0xe5)+'库');const _0x1e7d51={};_0x1e7d51['id']=_0x36a10f,_0x1e7d51[_0x25bb3d(0x133,0x93,0xad,0x12d)]=!![],_0x1e7d51[_0x2b28f9(0x685,0x694,0x608,0x6bf)]=_0x8f3e4f,_0x1e7d51['prompt']=_0x5be128,_0x1e7d51[_0x2b28f9(0x645,0x66e,0x68b,0x609)]=_0x40e9e4,eventSource[_0x25bb3d(0x96,0xd9,0x64,0x2e)](EventType[_0x2b28f9(0x5f7,0x631,0x5d4,0x6c0)+'MAGE_RESPO'+_0x2b28f9(0x666,0x645,0x6b5,0x5cf)],_0x1e7d51),_0x187127[_0x2b28f9(0x5c1,0x57f,0x4f9,0x52e)](addLog,_0x2b28f9(0x57d,0x5b5,0x5d5,0x593)+_0x2b28f9(0x623,0x5a6,0x5e5,0x529)+_0x2b28f9(0x58b,0x5f3,0x5f8,0x658)+_0x25bb3d(-0x5b,-0x45,0x28,0x7d)+':\x20'+_0x36a10f);}else _0x32b685[_0x256fc1][_0x2b28f9(0x6ef,0x663,0x6d9,0x5fa)][_0x2b28f9(0x567,0x587,0x5d5,0x5a2)]=-0x23a*0x11+0xfe+0x24dd,_0x187127[_0x25bb3d(0x11c,0x82,0xee,0xa1)](_0x37c28f,'当前生图次数为\x20fo'+'r\x20prompt:\x20'+_0x28e75d[_0x14233d][_0x25bb3d(0x185,0x9b,0x10e,0x16e)][_0x2b28f9(0x520,0x587,0x5a6,0x58e)]);}catch(_0x5ac849){const _0xeddf47=_0x2b28f9(0x588,0x5d6,0x566,0x54e)+_0x2b28f9(0x558,0x5e6,0x62d,0x5df)+_0x2b28f9(0x6c5,0x678,0x6c8,0x6e7)+_0x25bb3d(0x11b,0x118,0x94,0xe9)+_0x36a10f+':\x20'+_0x5ac849['message'];_0x187127[_0x25bb3d(0x162,0x8d,0xee,0x100)](addLog,_0xeddf47),console[_0x25bb3d(-0x16,0xbe,0x61,0x4c)](_0xeddf47);const _0x103a9c={};_0x103a9c['id']=_0x36a10f,_0x103a9c[_0x2b28f9(0x64b,0x602,0x662,0x5dc)]=![],_0x103a9c[_0x2b28f9(0x634,0x5b6,0x598,0x631)]=_0x5ac849[_0x25bb3d(0xaf,0x117,0x108,0x128)],_0x103a9c[_0x2b28f9(0x5f2,0x5cc,0x604,0x5fb)]=_0x5be128,eventSource[_0x2b28f9(0x5a3,0x5b9,0x624,0x5ef)](EventType[_0x25bb3d(0xe5,0xd1,0xdc,0xa8)+'MAGE_RESPO'+_0x2b28f9(0x5f9,0x645,0x6b2,0x660)],_0x103a9c),addLog(_0x2b28f9(0x5d8,0x5b5,0x56f,0x642)+_0x2b28f9(0x65c,0x5e5,0x55d,0x659)+_0x25bb3d(0xbb,0x125,0xd8,0xbe)+'nse\x20for\x20ID'+':\x20'+_0x36a10f);}}const LEGACY_EVENT_NAMES=[_0xb25b64(-0x36,-0x8f,-0x90,-0x44)+_0x529fd3(0x105,0xcb,0x8a,0x143)+'st',_0x529fd3(0x7f,0x74,0x3,0x58)+_0x529fd3(0x71,0x5d,0x4e,-0x1c)+'st'];function initializeBananaListener(){const _0x4d61ae={'UXlSV':function(_0xf9bfa4,_0x1ace8a){return _0xf9bfa4===_0x1ace8a;},'NWUui':_0x1fe15c(0x1ad,0x1a8,0x1c4,0x211),'QXMHH':function(_0x30ef88,_0x2cc53a){return _0x30ef88(_0x2cc53a);},'yufge':_0x172dff(0x378,0x3ac,0x3b5,0x3f9)+_0x1fe15c(0x242,0x245,0x184,0x1f8)};eventSource['on'](EventType['GENERATE_I'+_0x1fe15c(0x268,0x210,0x294,0x23c)+'ST'],bananaGenerate);function _0x172dff(_0x570e03,_0x4349b3,_0x4f7c82,_0x480927){return _0xb25b64(_0x480927-0x3dd,_0x4349b3-0x13f,_0x570e03,_0x480927-0x14f);}function _0x1fe15c(_0x4d8774,_0x437c4d,_0x5931a0,_0xd9aa70){return _0x529fd3(_0xd9aa70-0x14e,_0x5931a0,_0x5931a0-0x20,_0xd9aa70-0x173);}LEGACY_EVENT_NAMES[_0x1fe15c(0x232,0x22c,0x21c,0x1bc)](_0x11c4d6=>{function _0x247840(_0x3f6019,_0xca057b,_0x116658,_0x345dec){return _0x172dff(_0xca057b,_0xca057b-0x68,_0x116658-0xc,_0x345dec- -0x1ef);}function _0x19dc47(_0x12587e,_0x408034,_0x22a90d,_0xc7aac0){return _0x172dff(_0x408034,_0x408034-0x14c,_0x22a90d-0x2b,_0xc7aac0- -0x85);}if(_0x4d61ae[_0x19dc47(0x3e5,0x2d6,0x2c7,0x354)](_0x4d61ae[_0x19dc47(0x2c4,0x2cd,0x21c,0x27a)],_0x4d61ae['NWUui']))eventSource['on'](_0x11c4d6,bananaGenerate);else{const _0x20bb41={};_0x20bb41[_0x247840(0x165,0x213,0x1db,0x1cf)+'on']=[],_0x20bb41[_0x19dc47(0x2e3,0x325,0x3ae,0x350)+'t']='',_0x4db4c8=_0x5a79af[_0x224bb6]||_0x20bb41;}}),_0x4d61ae[_0x172dff(0x47b,0x440,0x455,0x3f8)](addLog,_0x4d61ae[_0x1fe15c(0x2e5,0x235,0x2a3,0x2a6)]);}export async function replaceWithBanana(){function _0x59ae8e(_0x48e366,_0x7a4e22,_0x23aacf,_0x26692e){return _0x529fd3(_0x7a4e22-0x3c9,_0x48e366,_0x23aacf-0x16c,_0x26692e-0xaa);}function _0x465c9f(_0x4592f2,_0x178d04,_0x25ead8,_0x1c7fa6){return _0xb25b64(_0x178d04-0x4f3,_0x178d04-0x14f,_0x1c7fa6,_0x1c7fa6-0x87);}const _0xc44fec={'JRrby':function(_0x4d43c7,_0x12880e){return _0x4d43c7<=_0x12880e;},'xncNb':function(_0x3d8608,_0x1a6701){return _0x3d8608+_0x1a6701;},'wBpwx':_0x59ae8e(0x4b5,0x51b,0x500,0x50d),'TfdMt':function(_0x336c06,_0x35adf5){return _0x336c06(_0x35adf5);},'OENnn':function(_0x1743f1,_0x1c9581){return _0x1743f1==_0x1c9581;},'iOxox':_0x59ae8e(0x493,0x50d,0x4f1,0x58b),'KQQBq':_0x465c9f(0x4f6,0x516,0x492,0x502),'AOWwR':_0x465c9f(0x4c5,0x4f4,0x4a0,0x552)+_0x465c9f(0x3e6,0x447,0x477,0x493)};if(_0xc44fec[_0x59ae8e(0x437,0x425,0x4ab,0x3a3)](extension_settings[extensionName]['mode'],_0xc44fec[_0x59ae8e(0x47a,0x4ff,0x4b6,0x4d7)])){if(!window[_0x59ae8e(0x415,0x432,0x4bb,0x40e)+'BananaList'+_0x59ae8e(0x4bf,0x50f,0x502,0x580)]){if(_0xc44fec[_0x59ae8e(0x555,0x500,0x4c9,0x46f)]===_0x59ae8e(0x4ee,0x517,0x54c,0x575))for(let _0x1611cb=0x5*0x145+-0x15a0+-0x7a4*-0x2;_0xc44fec[_0x465c9f(0x4a2,0x533,0x5be,0x4dd)](_0x1611cb,-0x2301+0x2563+0x1*-0x25e);_0x1611cb++){_0x28403b[_0x59ae8e(0x514,0x498,0x4b7,0x515)+_0x1611cb+_0x59ae8e(0x56d,0x4f0,0x552,0x498)]&&(_0x43cbf2=_0xc44fec['xncNb'](_0xc44fec[_0x465c9f(0x3ec,0x466,0x443,0x4d4)](_0x59172b,_0xc44fec['wBpwx']),_0xc44fec[_0x465c9f(0x4e2,0x4b0,0x4c4,0x531)](_0x57b9cd,_0x2654a6['Character\x20'+_0x1611cb+_0x59ae8e(0x573,0x4f0,0x514,0x47f)])));}else window['initialize'+_0x465c9f(0x4ef,0x504,0x4b5,0x51c)+_0x465c9f(0x4a7,0x501,0x56d,0x517)]=!![],initializeBananaListener();}initializeImageProcessing();}else window['initialize'+_0x465c9f(0x57c,0x504,0x4c8,0x4c4)+_0x59ae8e(0x518,0x50f,0x574,0x4ac)]&&(eventSource[_0x59ae8e(0x50b,0x4f1,0x4a0,0x488)+_0x465c9f(0x4f6,0x501,0x526,0x503)](EventType[_0x465c9f(0x536,0x4cd,0x506,0x4a9)+_0x465c9f(0x47b,0x4a9,0x41b,0x51e)+'ST'],bananaGenerate),LEGACY_EVENT_NAMES['forEach'](_0x3f66c3=>{function _0xe5a403(_0x121a24,_0x5ee4ba,_0x133566,_0x2ec34d){return _0x59ae8e(_0x5ee4ba,_0x2ec34d- -0x307,_0x133566-0x63,_0x2ec34d-0x149);}eventSource['removeList'+_0xe5a403(0x262,0x1bf,0x1bc,0x208)](_0x3f66c3,bananaGenerate);}),window['initialize'+_0x59ae8e(0x4bd,0x512,0x4bf,0x4d5)+_0x465c9f(0x4b3,0x501,0x4a2,0x589)]=![],_0xc44fec[_0x465c9f(0x52b,0x4b0,0x438,0x469)](addLog,_0xc44fec[_0x465c9f(0x400,0x48c,0x4e0,0x4a4)]));}