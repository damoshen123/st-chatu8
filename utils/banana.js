(function(_0x4a5199,_0x303939){function _0x4be2de(_0x4b5d4f,_0x1aa9e3,_0x1d457c,_0x5b051e){return _0x1328(_0x1d457c-0x30d,_0x5b051e);}const _0x5dccfa=_0x4a5199();function _0x273a71(_0x1c17c8,_0x9eacdd,_0x5c5e0c,_0x20e5f3){return _0x1328(_0x5c5e0c-0x2e8,_0x9eacdd);}while(!![]){try{const _0x225506=-parseInt(_0x4be2de(0x503,0x3fe,0x4b9,0x54e))/(-0x23a+-0x1dd+-0x418*-0x1)+-parseInt(_0x273a71(0x325,0x37b,0x3a7,0x3b9))/(-0x83c+0x10b0+-0x872)*(parseInt(_0x4be2de(0x388,0x459,0x426,0x40a))/(-0x1*0x26bc+-0xc66+0x3325))+-parseInt(_0x4be2de(0x3e9,0x4de,0x429,0x3db))/(0x20e9+-0x1*0x15ef+-0xaf6)+parseInt(_0x273a71(0x2ee,0x30d,0x392,0x431))/(-0x1cb7*0x1+0x5cf+0x16ed)*(parseInt(_0x4be2de(0x5c0,0x454,0x511,0x4c1))/(0x5f*-0x1+0x43*0x7a+-0xd*0x26d))+-parseInt(_0x4be2de(0x4f0,0x4d0,0x49a,0x41b))/(-0xcd4+-0x2009+0x44*0xa9)+-parseInt(_0x273a71(0x437,0x47d,0x461,0x508))/(0x17fd+-0xbee+-0xc07)+parseInt(_0x273a71(0x583,0x4fa,0x4f3,0x561))/(-0x669+-0x449+0xabb);if(_0x225506===_0x303939)break;else _0x5dccfa['push'](_0x5dccfa['shift']());}catch(_0x5e5cf4){_0x5dccfa['push'](_0x5dccfa['shift']());}}}(_0x4533,0x3c1e5+0x3448a*-0x2+0x993f5));const _0x4c2c86=(function(){function _0x290ba0(_0x49908c,_0x95c4fe,_0x471df7,_0x4648e8){return _0x1328(_0x95c4fe-0x396,_0x4648e8);}function _0x3830cd(_0x4e9f3e,_0x214970,_0x110c1a,_0x2d2681){return _0x1328(_0x110c1a- -0x1be,_0x4e9f3e);}const _0xa7f260={'nvuOw':function(_0x4ca06e,_0x3b438e){return _0x4ca06e(_0x3b438e);},'ftKcb':_0x3830cd(-0xae,-0x78,-0x35,-0x35)+_0x3830cd(-0x10,-0xf0,-0xaa,-0x2c)};let _0x2d64d2=!![];return function(_0xebb370,_0x3bd2a1){const _0x2c9fcf={'CyYmO':function(_0x2c09ce,_0x1c5a18){function _0x2e804e(_0x2ce4cb,_0x59a05b,_0x339cff,_0x59b058){return _0x1328(_0x59b058-0x329,_0x2ce4cb);}return _0xa7f260[_0x2e804e(0x387,0x423,0x41e,0x40e)](_0x2c09ce,_0x1c5a18);},'WWKLT':_0xa7f260[_0x27c22c(0x35c,0x2ae,0x398,0x409)],'dpgEL':function(_0x48d78d,_0xe4d0f1){return _0x48d78d!==_0xe4d0f1;}},_0x3e9369=_0x2d64d2?function(){function _0x4a4358(_0x208996,_0x442989,_0x1aa43d,_0x12a5f5){return _0x27c22c(_0x1aa43d- -0x362,_0x442989-0x34,_0x1aa43d-0x89,_0x208996);}function _0x11368c(_0x25b583,_0x249d28,_0x2da55f,_0x3c9af5){return _0x27c22c(_0x2da55f- -0x41f,_0x249d28-0x15c,_0x2da55f-0x13,_0x25b583);}if(_0x2c9fcf[_0x4a4358(0xe,0x25,0x20,0xaa)](_0x4a4358(-0x7e,-0xbf,-0xf5,-0xc1),'KMSjN'))_0x2c9fcf['CyYmO'](_0x3de268,_0x2c9fcf['WWKLT']),_0x5b1cef=_0x123624;else{if(_0x3bd2a1){const _0x3b8261=_0x3bd2a1[_0x11368c(-0xcf,-0x175,-0xbc,-0xaa)](_0xebb370,arguments);return _0x3bd2a1=null,_0x3b8261;}}}:function(){};function _0x27c22c(_0x18355a,_0x5982bc,_0xc22c3f,_0x4443f5){return _0x3830cd(_0x4443f5,_0x5982bc-0x1a3,_0x18355a-0x34f,_0x4443f5-0x19a);}return _0x2d64d2=![],_0x3e9369;};}()),_0x4c00aa=_0x4c2c86(this,function(){const _0x37445c={};_0x37445c[_0x3be818(-0x1b9,-0x110,-0x156,-0x190)]='(((.+)+)+)'+'+$';function _0x3be818(_0x135d18,_0x2b70bb,_0x533aaf,_0x37bb7a){return _0x1328(_0x135d18- -0x345,_0x2b70bb);}function _0x182731(_0x2d0bb5,_0x28aa16,_0x2b22fa,_0x7643ae){return _0x1328(_0x2b22fa- -0xfe,_0x2d0bb5);}const _0x32b9d6=_0x37445c;return _0x4c00aa[_0x3be818(-0x249,-0x25e,-0x1fe,-0x1c3)]()[_0x182731(-0x26,0x95,-0x16,-0x2c)](_0x32b9d6[_0x3be818(-0x1b9,-0x271,-0x238,-0x1c8)])[_0x3be818(-0x249,-0x27b,-0x227,-0x226)]()[_0x3be818(-0x1b4,-0x175,-0x228,-0x19e)+'r'](_0x4c00aa)[_0x182731(0x27,-0x2,-0x16,-0x22)](_0x32b9d6['bnnaG']);});_0x4c00aa();import{extension_settings}from'../../../../extensions.js';function _0x4533(){const _0x12dbba=['rMfeC0K','yMXVyG','w0jHBMfUyv0G5zcV','CxDtvLi','Awjrzhu','zgPdwgK','A3v5q24','vurMqLy','yxnZAxn0yw50','vvbvshy','D2n0uxu','thnlt1C','l2DLBMvYyxrL','Dwrfu20','Eg56rum','5OYb6yws6AAg5lUJ55cg77Ym5yIh5O2I5lI655U0','Bxr3BMC','A25KzxC','C2rsrLK','uwPmtLm','l3yXlW','Aw5JBhvKzxm','A0XXBw0','v0jNCMG','B3DUigLTywDLoG','A1LHvwS','zNrly2i','Aw1Hz2vdB25MAq','D1boA1q','swTmA1G','BwfNzsbPBIbpCa','w0jHBMfUyv0GrG','Bw9Kzq','yxbWBhK','w0jHBMfUyv0Gtq','zML4zwrqCM9TCa','BwvZC2fNzq','C1b6uK8','Aw5NihrYAwDNzq','C3rYAw5NAwz5','qKfoqu5b','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','w0jHBMfUyv0G5l2/','y2HHBMDL','C2v0ici','Aw5PDgLHBgL6zq','C2LUzYbKAxjLyW','zw5KC1DPDgG','A1fmwfe','w0jHBMfUyv0G55sF','rxrxA2q','kcGOlISPkYKRkq','v1rHzu4','BwL0DgvKigzHAq','uu5WBNG','qMfUyw5H5l+U5zU+5QIH5BYp','DdOG','ywPosfa','tu9PAfO','ugDysMO','ig1LC3nHz2vZlG','Cu1tuvq','w0jHBMfUyv0Gra','y29UDgvUDa','zhbNruW','AM9PBG','ywXSyMfJAY4','ue9tva','CfrIs1K','r0vorvjbvevFsq','C2uGzgLKig5VDa','zxrJAcbnyxjRza','zxLVBKu','DLntq3O','sfzXwfq','tNLHA3C','u2jQrge','EfHhDLC','Dgv4Da','w0jHBMfUyv0Grq','ExL2uxC','Aw9UoIaIqMvHCG','5yMn572U5zco','mJK0nJa2AvPRBKT3','u2nLBMuGq29TCa','B3ntAwK','Dg9Rzw4','DgfYDgLUzYbPBq','ywnLt3y','wMnmt2K','mZa1mdyWnZzsveP1uwu','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','seXAChC','5yMn572U5yMn','yxjRzg93BIbPBq','y2HVAwnLCW','w0jHBMfUyv0GuW','zNvXCeq','z2Hbvuu','yw5Hx3rHC2S','Aw1Hz2veyxrH','rfvtChm','zMLSDgvY','AuzkEuC','CgfYyw1LDgvYCW','BNnLigzVCIbjra','thvruMi','w0jHBMfUyv0Gsq','yxnRsuq6ia','C2TluvG','A2fuCMq','Bxb0','5zco572U5zco','B2HKA3a','nJvurMfxsg4','EunTDKq','BLLNzMq','5O6L6k+35Rgc','zYbvuKWUlI4','ifbYB21WDa','rNnzvwW','y2fUy2vSx2jHBG','EKXcy1u','m3WWFdf8nhWY','ChvZAa','CM9Szq','BhHqAey','vgTkugu','DxjAvuG','55sO5l+U5zU+6Ake6k6+oIaI','zKzkuxK','zMfPBgvKigzVCG','rhfoB2e','zxiG','Bw9KzwW6ia','mtKZnfD2vfjTyq','5yIW5y+w5RAi5lU75yQH5lQl5lU2icHu','EMjYDeW','yMT0Bfu','ELf6zxq','y2LZAhu','55sO55U05O6L6k+35Rgc5QIH5BYp','qujxBw8','qNnkC0i','5PYa5zco572U','AePnshe','CMXjEgK','zw5bssbMB3jTyq','qMjbEMC','D3LLvee','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','ENryq0u','u2nVvgy','E+s/RUwBVN0','DgLVBIb3AxrOia','zxrJAcbLCNjVCG','vuDpC1C','55sO6yws6AAg5lUJ55cg5QIH5BYp','zxrPB25FC291CG','q2HHCMfJDgvYia','BI9QC29U','qxv0Ag9YAxPHDa','CMvTB3zLtgLZDa','wg5rtxa','s01tAK4','zw5LCMf0Aw9Uia','zw1PDa','DKniCuW','rLn6y2m','y3vZDg9Tx3vYBa','tLnf','yMfUyw5HioEuN+wBVUs6IW','v29LBva','BNz1t3C','B21WBgv0Aw9UCW','ywDLigDLBMvYyq','C2vHCMnO','y2XPzw50','zgvSCY8','vu9TDxm','B3nPDgLVBG','zxjYB3i','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','B1DHA0i','tufhrv9srvfvrq','vu5Ttw0','5zU+5Rwb56Il44cc5A6I5OI356UV5lI6','sKLvrfi','CMvHzefZrgf0yq','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','q29UDgvUDc1uEq','55sO5lQgihVKV67LM759ioAGH+IVHG','DcbMywLSzwqGDW','DM9Owu8','yMfUyw5H','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','Dg9tDhjPBMC','Aw1Hz2vFDxjS','u0vey2u','kerPDMLKzv9YBW','DxnLCG','w0jHBMfUyv0Gvq','qvbjihjLC3bVBG','ztOG','ANnVBG','w0jHBMfUyv0GqG','zMv0y2GGAw1HzW','BNrHAw5ZihrLEa','DwLSDcbTDwX0Aq','v3byreC','rMnvAvG','yNL4yMm','zMzuv2S','uxfkBMG','Bwf0y2G','B25SB2fKzw5K','DxjS','BwfW','C2HAr3a','DcbVBMX5lcbUBW','5lIT55QeihbYB21WDooaGG','q1j4v2W','zMXHDa','Cg9ZDgzPEfbYBW','DcbvuKWGyxmGzG','mJu5ogfhCfPmCq','BwL0DgvKihn1yW','Aw1Hz2vjza','mZmWntKYngXUC2HMAq','BgvZktOG','EsbJB252zxj0zq','ieLeia','CMTKB3DUigLTyq','Bw9KywWGCgf5Ba','yM5ivhm','EurlvgO','C3rFy2HHDhu4xW','wfPxr0W','Aw9U','s21zvgO','zhrHBeq','Ewrjy2q','zw5LCG','CMvWBgfJzufSBa','DxbKyxrLu3rHDa','DwnJzxnZzNvSBa','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','zxrLy3rLzcbnyq','twLWwey','zM9YrwfJAa','DgLVBIbYzxf1zq','q0TlwLO','CMvZDwX0','BwvZC2fNzxm','Bw9KzwW','w0jHBMfUyv0GrW','C3bSAxq','tgfHtMu','B3vUzcbTyxrJAa','D2L0AcbWCM9TCa','BwfNzw4G5QIH5z6l5lIn5PsV','w0jHBMfUyv0GuG','ALPVwM4','BgvUz3rO','DxrOq1G','BMrZl2nOyxqTyW','BMPbuMK','C3rYzwfT','Dg9mB3DLCKnHCW','wujRCui','rLbvBuu','l3yXl2nOyxqVyW','sMXMEeK','Cg92qwe','DgHPq1y','w0jHBMfUyv0G5l+U','vNrrrNO','BwfNzsbNzw5LCG','ywrKvgfZAW','reD6t3G','B25LCNjVCG','zw5KAw5NihjLCq','r2rbvvu','DhjPBq','DKPdAKW','yMfZzty0lG','igLTywDLihrVia','sxPrqLy','ue9gA3m','CvznBvG','zwnLAxzLzcbPBq','y2HHDf9JB21WBa','DhLWzq','wxLHyNa','ChjVBxb0','BhvYzsbYzxnWBW','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','CIaI','Exj1rhy','tufhrv9srvnqtW','zgf0ytPPBwfNzq','EvLzs2W','C2fTCgXLq291BG','u0rzru4','yxn0swm','5BYa5AEliejHBMfUyEEuNW','ywLSzwqGDg8GzG','y29TCgXLDgvuyq','C3rHCNrZv2L0Aa','CLzhqwq','yxrLzcbZDwnJzq','qvbjihjLCxvLCW','q3r2q1u','C3rHDhvZ','BeLnu1C','Aw5ZDgfUy2vZ','s2DbzMO','w0jHBMfUyv0G5y+w','seXzs08','qMfUyw5HtgLZDa','qMvHCMvYia','nJCXnty2neDOz01vuq','yxnWzwn0uMf0Aq','Aw1Hz2vU','ywn0zxjqCMvZzq','5l+U5zU+5OYh5lUKoIa','y2zNAw1NxW','ugXSAfG','C3qGkeLeoIa','B2fKihDPDgGG','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','C3vJy2vZCW','BKrqyLK','zLvfAuq','s3Pdwxi','y3vZDg9Tx2LUyW','Aw1Hz2u','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','lI4U','mNWWFdr8m3WX','yM5UyuC','mZC5mJCXowfor1bfBa','5lU75yQH5BEY5y+w5RAi','ignVBNrHAw4GAq','CIbWCM9TChq6ia','y29UC3rYDwn0BW','r3PbrKC','Ahv0zxC','CufuCMu','y3vZDg9T','5Q2J6z2I5O+q56s66k+noIa','igv4DhjHy3rPBG','CMvWBgfJzq','vhPjzhq','w0jHBMfUyv0Gua','rMfPBgvKihrVia','BhvKzv9OzwfKzq','q3PTyNK','AxPivwC','uwzQB3a','ihWG','C1z2DxC','ywDLifvstdOG','wNnAqMm','l3yX','quzwCgG','y29UDMvYC2f0Aq','t2XUEfu','AxrOihn0yxr1CW','vKXYzuW','l2fWAs9IywnRzq','yxbWBgLJyxrPBW','ntm3mdyXuxzeB0Pu','zMDpuNe','uenQDNy','CfzQquC','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc'];_0x4533=function(){return _0x12dbba;};return _0x4533();}import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';function _0x1328(_0x46751e,_0xac1a6a){_0x46751e=_0x46751e-(0x8bd*0x3+0x3f*0x65+-0x3270);const _0x11c679=_0x4533();let _0x5b02cb=_0x11c679[_0x46751e];if(_0x1328['bvsMzu']===undefined){var _0x36bb8d=function(_0x16f465){const _0x3e9b33='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3b1522='',_0x256468='',_0x1183e2=_0x3b1522+_0x36bb8d;for(let _0x8bd4a5=-0x1*-0x10a2+-0x1d3d+0x1cd*0x7,_0x11076d,_0x1216d6,_0x14197c=-0x1*-0x2215+0x1fe0+-0x1*0x41f5;_0x1216d6=_0x16f465['charAt'](_0x14197c++);~_0x1216d6&&(_0x11076d=_0x8bd4a5%(-0x143*-0x6+-0xdeb*-0x1+0x17*-0xef)?_0x11076d*(0x1907+0x1*-0x476+-0x1451)+_0x1216d6:_0x1216d6,_0x8bd4a5++%(-0x1435+0x5bd*-0x1+0x19f6))?_0x3b1522+=_0x1183e2['charCodeAt'](_0x14197c+(-0x1*-0x1f01+-0x18f9*0x1+0xd*-0x76))-(-0xc58+-0x269c+0x3d*0xd6)!==0x166*-0x3+0x2605+0x21d3*-0x1?String['fromCharCode'](0x236d+0x1e*-0x4a+0x13a*-0x15&_0x11076d>>(-(0x71a+0x63b*-0x1+-0xdd)*_0x8bd4a5&-0x7e1*-0x1+0x6d2*0x1+-0xead)):_0x8bd4a5:-0xaa5*-0x2+0x265+0x17af*-0x1){_0x1216d6=_0x3e9b33['indexOf'](_0x1216d6);}for(let _0x196926=0x962*0x2+0x4*0x51b+0x108*-0x26,_0x232839=_0x3b1522['length'];_0x196926<_0x232839;_0x196926++){_0x256468+='%'+('00'+_0x3b1522['charCodeAt'](_0x196926)['toString'](0xf45+-0x204b+0x1116))['slice'](-(0x727*0x1+-0x121+-0x604));}return decodeURIComponent(_0x256468);};_0x1328['qVsLpy']=_0x36bb8d,_0x1328['YGJmab']={},_0x1328['bvsMzu']=!![];}const _0x5c4104=_0x11c679[-0x2c7+0xaf5+-0x3*0x2ba],_0x20afac=_0x46751e+_0x5c4104,_0x280649=_0x1328['YGJmab'][_0x20afac];if(!_0x280649){const _0x1a9586=function(_0x5c8c7c){this['MkEoYA']=_0x5c8c7c,this['GmKYNm']=[-0x1*-0x2a5+-0x460*0x6+0x179c*0x1,-0x1827+0x2b0*0x2+0x12c7,0x2577+0x17c*0x16+-0x461f],this['ixsSyX']=function(){return'newState';},this['NuNNZS']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['FuRYJJ']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1a9586['prototype']['EYhOQi']=function(){const _0x9a8cc8=new RegExp(this['NuNNZS']+this['FuRYJJ']),_0x5ef530=_0x9a8cc8['test'](this['ixsSyX']['toString']())?--this['GmKYNm'][0x1*0x1b85+0x37b*-0x1+-0x803*0x3]:--this['GmKYNm'][-0x37b*-0x4+-0x1a22+-0x412*-0x3];return this['srjWFg'](_0x5ef530);},_0x1a9586['prototype']['srjWFg']=function(_0x567570){if(!Boolean(~_0x567570))return _0x567570;return this['gihDUZ'](this['MkEoYA']);},_0x1a9586['prototype']['gihDUZ']=function(_0x3e1213){for(let _0xdb16b7=0x1f2*0x8+-0x1752+-0x3*-0x296,_0xebd803=this['GmKYNm']['length'];_0xdb16b7<_0xebd803;_0xdb16b7++){this['GmKYNm']['push'](Math['round'](Math['random']())),_0xebd803=this['GmKYNm']['length'];}return _0x3e1213(this['GmKYNm'][0x1043+-0x1*-0xf95+-0x1fd8]);},new _0x1a9586(_0x1328)['EYhOQi'](),_0x5b02cb=_0x1328['qVsLpy'](_0x5b02cb),_0x1328['YGJmab'][_0x20afac]=_0x5b02cb;}else _0x5b02cb=_0x280649;return _0x5b02cb;}import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';import{taskQueue,TaskType,TaskStatus}from'./taskQueue.js';let currentTaskId=null,currentRequestId=null,currentPrompt=null;async function getImageFromTurnData(_0xdf72dc){function _0x2fb54c(_0x11164d,_0x43cffd,_0x43af72,_0x14dfcf){return _0x1328(_0x11164d-0x285,_0x43af72);}function _0x303fc5(_0x54924c,_0x48cff8,_0x5e67fa,_0x588a39){return _0x1328(_0x5e67fa- -0x78,_0x48cff8);}const _0x1ddbd4={'mTLSo':_0x2fb54c(0x403,0x38e,0x375,0x36c),'JlfxI':function(_0x2f9a5f,_0x5d2f71){return _0x2f9a5f(_0x5d2f71);},'JIUDR':function(_0x305668,_0x989e09){return _0x305668||_0x989e09;},'xnzEC':_0x2fb54c(0x3e9,0x43a,0x3c6,0x407)};if(!_0xdf72dc)return'';if(_0xdf72dc['imageId']&&_0xdf72dc[_0x303fc5(0xce,0x82,0xa3,0x1d)]['startsWith'](_0x1ddbd4['mTLSo'])){const _0x425bde=await _0x1ddbd4[_0x303fc5(0x45,0x138,0xd0,0x141)](getConfigImage,_0xdf72dc[_0x2fb54c(0x3a0,0x3a7,0x3cd,0x2ef)]);return _0x1ddbd4[_0x2fb54c(0x378,0x3d5,0x366,0x375)](_0x425bde,'');}if(_0xdf72dc[_0x2fb54c(0x40d,0x388,0x37d,0x46f)]&&_0xdf72dc['image'][_0x303fc5(0x128,0x7d,0xf4,0x147)](_0x1ddbd4[_0x2fb54c(0x444,0x394,0x3dd,0x4b5)]))return _0xdf72dc[_0x2fb54c(0x40d,0x446,0x3f5,0x37f)];return'';}async function generateBananaImage({prompt:_0x375ca1,width:_0x2896ca,height:_0x11d765,change:_0x33abea,retouchPrompt:_0x513e1a,retouchImage:_0x9f448c}){function _0x2ad880(_0x3f06fc,_0x18e92c,_0x28e8d9,_0x2fd052){return _0x1328(_0x18e92c-0x3e8,_0x2fd052);}const _0x471470={'oWakB':_0x2ad880(0x47d,0x4ea,0x450,0x4a9)+_0x378849(-0x117,-0x166,-0x1bf,-0xbd)+_0x378849(-0x17f,-0xcf,-0x1a8,-0x1d6)+_0x2ad880(0x605,0x5b7,0x623,0x532)+_0x2ad880(0x4f6,0x4b3,0x4b7,0x4e4)+'t','MipXF':function(_0x3e844d,_0x3cb9ac){return _0x3e844d+_0x3cb9ac;},'rdvoI':_0x2ad880(0x59b,0x5cc,0x5ce,0x614)+'+$','TkJPe':function(_0x30f2ca,_0x1d62d9){return _0x30f2ca+_0x1d62d9;},'Qfjop':_0x378849(-0x25b,-0x1b8,-0x25a,-0x2fb),'yCmvD':_0x2ad880(0x52a,0x50c,0x46c,0x4c0)+_0x378849(-0x25d,-0x303,-0x1fa,-0x26d)+_0x2ad880(0x691,0x5fc,0x5e9,0x616),'hJMHq':function(_0x5123db,_0x31351d){return _0x5123db(_0x31351d);},'ghAUE':'[Banana]\x20生'+_0x378849(-0x15e,-0x156,-0x155,-0x1b6),'kbfgg':_0x378849(-0x16e,-0x105,-0x1c2,-0x135),'SDYEN':_0x2ad880(0x41f,0x4b9,0x538,0x552),'LMzlj':_0x378849(-0x163,-0x1ac,-0xcf,-0x1cf)+'n/json','sdRFY':function(_0x501e2b,_0x2b9712){return _0x501e2b+_0x2b9712;},'JCcLm':function(_0x5f39ba,_0x2e69ff){return _0x5f39ba||_0x2e69ff;},'byxbc':function(_0x56da41,_0x2c9961){return _0x56da41(_0x2c9961);},'ajNHP':function(_0x34c688,_0x40ebf2){return _0x34c688(_0x40ebf2);},'qwSVR':function(_0x1d8579,_0x97a489){return _0x1d8579(_0x97a489);},'rTzoT':function(_0x28bec9,_0x2e7d9b){return _0x28bec9(_0x2e7d9b);},'kLqmm':function(_0x2e5967,_0x1aec97){return _0x2e5967||_0x1aec97;},'qVMmX':_0x378849(-0x109,-0x180,-0xdb,-0x103)+_0x2ad880(0x50d,0x4d4,0x52d,0x491),'ScoTf':function(_0x2652fb,_0x3e0f42){return _0x2652fb(_0x3e0f42);},'WoemP':function(_0x292b74,_0x8250e5){return _0x292b74(_0x8250e5);},'GdAUU':_0x378849(-0x134,-0xd7,-0x18e,-0x184)+_0x378849(-0x102,-0xf6,-0x83,-0xc3),'BbAzg':function(_0x2f42ae,_0x4eb70c){return _0x2f42ae<=_0x4eb70c;},'jZoZn':_0x378849(-0x265,-0x258,-0x1c6,-0x1be),'pVjAG':function(_0x201b19,_0x57c1eb){return _0x201b19===_0x57c1eb;},'ABWmo':_0x378849(-0xfc,-0x199,-0x64,-0x194),'bgXoE':function(_0x3d1444,_0x1bbc1d){return _0x3d1444(_0x1bbc1d);},'POFks':_0x2ad880(0x572,0x571,0x5f8,0x4f0)+_0x2ad880(0x49b,0x4fc,0x4a0,0x563),'fUEiD':function(_0x378113,_0x1ab48d,_0x562835){return _0x378113(_0x1ab48d,_0x562835);},'ibQdu':_0x2ad880(0x558,0x51b,0x548,0x4b4),'UOmus':function(_0x4ad88d,_0x1e2ff8){return _0x4ad88d(_0x1e2ff8);},'PCjvv':_0x2ad880(0x50b,0x563,0x538,0x59a),'sPzRO':function(_0x3a67a1,_0x55f344){return _0x3a67a1!==_0x55f344;},'ZcLOi':'KzCYr','shZGp':_0x2ad880(0x590,0x5f6,0x601,0x677),'SbjDa':_0x2ad880(0x57a,0x5eb,0x546,0x5da),'kndew':'后置前','MOihZ':_0x2ad880(0x420,0x490,0x41c,0x4be),'RHhIm':function(_0x5696d0,_0x28a02e){return _0x5696d0(_0x28a02e);},'CtxyM':'lMbSH','aceOv':_0x2ad880(0x5bc,0x52f,0x4b6,0x58a)+_0x378849(-0x228,-0x237,-0x1d6,-0x171),'PllhX':function(_0x340dbf,_0x46b503){return _0x340dbf(_0x46b503);},'WpXDG':_0x378849(-0x15b,-0x187,-0x1a3,-0x204)+_0x2ad880(0x53f,0x4df,0x42e,0x505)+'。','WTaeN':function(_0x4b4471,_0x38e34e){return _0x4b4471||_0x38e34e;},'zQzet':function(_0x571ade,_0x11d330){return _0x571ade!==_0x11d330;},'iFJyG':'ssXlD','vJCjL':_0x2ad880(0x5dd,0x58b,0x541,0x593),'bktlU':_0x2ad880(0x59e,0x5e7,0x599,0x667),'uENsa':function(_0x140d78,_0x567a63){return _0x140d78(_0x567a63);},'yYYKl':_0x2ad880(0x53c,0x4e5,0x45d,0x4a1),'astIc':_0x2ad880(0x4e5,0x510,0x47c,0x48a),'IzQBV':function(_0x513ac6,_0x1b457c){return _0x513ac6>_0x1b457c;},'WRrXZ':_0x378849(-0x155,-0x1f8,-0x186,-0xf2),'rVGAd':_0x378849(-0x244,-0x251,-0x2bd,-0x2ea),'LaaNe':_0x2ad880(0x512,0x57b,0x623,0x581),'xXGvW':'user','Czmby':function(_0x48d7ac,_0x273be3){return _0x48d7ac||_0x273be3;},'DqNoa':_0x2ad880(0x495,0x4f5,0x4ac,0x4cb),'WBgrh':function(_0x52d588,_0xd90562){return _0x52d588(_0xd90562);},'thiCV':function(_0x201d4c,_0x494d84){return _0x201d4c(_0x494d84);},'fFJQy':'/v1','nDPbY':_0x378849(-0x149,-0xfe,-0x112,-0xbb),'QjLNS':'qGtyO','wyeTA':_0x378849(-0x113,-0x14c,-0x16c,-0xa6),'ztXCE':function(_0x571915,_0x43f859){return _0x571915+_0x43f859;},'GzAFG':function(_0x59ae95,_0x3637b2){return _0x59ae95===_0x3637b2;},'pTbKY':'jiuguan','LuQRb':function(_0x8b3cfe,_0x2d9171){return _0x8b3cfe===_0x2d9171;},'FPUmE':'HLZpw','kQLXQ':_0x2ad880(0x597,0x592,0x51d,0x61e)+'nds/chat-c'+_0x2ad880(0x55c,0x4ce,0x444,0x4d8)+_0x378849(-0x151,-0xa2,-0xf0,-0x97),'skKQX':function(_0x9855d2,_0x341ccf){return _0x9855d2(_0x341ccf);},'mtwng':function(_0x323952,_0x200cca){return _0x323952(_0x200cca);},'djCXi':'running','EtWkd':'xcWhX','uthCX':function(_0x533dac,_0x44fbdd){return _0x533dac===_0x44fbdd;},'kYaUk':'string','iiPcL':_0x378849(-0x198,-0x1d3,-0xf0,-0x1bf),'NENPH':'XrEWz','izHUg':_0x2ad880(0x673,0x5d7,0x5e3,0x62f)+_0x2ad880(0x5bd,0x517,0x4af,0x577)+_0x2ad880(0x507,0x508,0x4bf,0x4bd)+'ge\x20format,'+_0x378849(-0x177,-0x215,-0xd1,-0x202)+_0x378849(-0x260,-0x21a,-0x2c3,-0x2f5),'vohYO':function(_0x30d46d,_0x51dbcd){return _0x30d46d(_0x51dbcd);},'FSzcc':function(_0x2b1969,_0x10af7e){return _0x2b1969(_0x10af7e);},'DUSps':_0x2ad880(0x464,0x4e9,0x44d,0x496)+_0x378849(-0x12f,-0x1a6,-0x10c,-0x190)+_0x2ad880(0x56c,0x500,0x59a,0x46a)+_0x2ad880(0x65c,0x5db,0x65b,0x65a),'eyonE':function(_0x3fb100,_0x491ba5){return _0x3fb100!==_0x491ba5;},'VtQFz':_0x378849(-0x204,-0x2af,-0x26b,-0x24e),'IkLkX':_0x378849(-0x26b,-0x257,-0x25a,-0x306)+_0x2ad880(0x554,0x535,0x531,0x541)+_0x378849(-0x1a0,-0xff,-0x144,-0x1da)+'ssfully.','povAa':function(_0x409616,_0x2b3c23){return _0x409616(_0x2b3c23);},'THnYb':_0x378849(-0x13e,-0x1f7,-0x1f7,-0x146)+'etch\x20error'+':','kaTrd':'任务已取消','ffTWk':function(_0x3bc963,_0x47d06e){return _0x3bc963===_0x47d06e;},'KmYTj':_0x378849(-0x169,-0xfc,-0x203,-0x1c0)};clearLog();const _0x2dcf7f=taskQueue[_0x378849(-0x1c0,-0x16e,-0x18e,-0x1b0)]({'name':_0x471470['sdRFY'](_0x471470['JCcLm'](_0x375ca1,'')['substring'](0x10c8+-0x2007+0xf3f,0x3*0xd03+-0x1*-0x1af2+-0x41dd),_0x375ca1&&_0x375ca1['length']>0xf79*0x1+-0x1320+0x3c5?_0x378849(-0x184,-0x125,-0x135,-0x1bb):''),'type':TaskType[_0x378849(-0x135,-0x143,-0x14e,-0x107)],'prompt':_0x375ca1});currentTaskId=_0x2dcf7f,_0x375ca1=_0x471470['hJMHq'](processCharacterPrompt,_0x375ca1),_0x375ca1=await _0x471470[_0x2ad880(0x506,0x4f3,0x4a3,0x4ef)](stripChineseAnnotations,_0x375ca1);let _0x28f80c=_0x33abea;_0x33abea=_0x471470[_0x2ad880(0x5b6,0x5d2,0x5e9,0x65c)](processCharacterPrompt,_0x33abea),_0x33abea=await _0x471470[_0x378849(-0x15a,-0x1f4,-0xd8,-0x103)](stripChineseAnnotations,_0x33abea),_0x471470['rTzoT'](addLog,_0x2ad880(0x56a,0x551,0x5af,0x579)+_0x2ad880(0x4a8,0x4da,0x4d5,0x53b)+extension_settings[extensionName][_0x378849(-0x225,-0x245,-0x1ec,-0x1e3)]),_0x471470['rTzoT'](addLog,_0x378849(-0x18c,-0x192,-0x1f0,-0x23e)+'\x20'+_0x471470[_0x378849(-0x147,-0x19a,-0x1f6,-0x190)](_0x2896ca,'默认')+',\x20高度\x20-\x20'+(_0x11d765||'默认')),_0x375ca1=_0x33abea&&_0x33abea[_0x2ad880(0x557,0x53b,0x5c9,0x55b)]()!==''?_0x33abea:_0x375ca1,_0x471470[_0x378849(-0x124,-0x169,-0x9a,-0xdd)](addLog,'用于生成的Tag:\x20'+_0x375ca1);let _0x7cd1a0=![];_0x375ca1[_0x2ad880(0x503,0x5ae,0x590,0x543)](_0x471470[_0x378849(-0x1b5,-0x1dc,-0x1b7,-0x1fe)])&&(_0x7cd1a0=!![]);_0x471470[_0x2ad880(0x4e7,0x4b8,0x553,0x539)](addLog,_0x2ad880(0x463,0x516,0x5b1,0x5c3)+_0x2ad880(0x597,0x4e7,0x526,0x452)+_0x2ad880(0x463,0x505,0x450,0x4c5)+_0x7cd1a0);let _0x3fac59={},_0x3add20='',_0x218670='';if(_0x7cd1a0){_0x471470[_0x378849(-0x22a,-0x1ed,-0x1c0,-0x189)](addLog,_0x471470[_0x378849(-0x1bc,-0x1d0,-0x183,-0x24a)]),_0x3fac59=parsePromptStringWithCoordinates(_0x375ca1),_0x3add20=_0x3fac59[_0x471470['qVMmX']];for(let _0x155d4f=0x1*0x13ca+0x1bbb+-0x2f84;_0x471470[_0x2ad880(0x567,0x4b4,0x48c,0x4ba)](_0x155d4f,-0x1144*0x2+-0x74b*0x1+-0x29d7*-0x1);_0x155d4f++){if(_0x3fac59[_0x378849(-0x237,-0x20d,-0x1fd,-0x182)+_0x155d4f+_0x378849(-0x25f,-0x24c,-0x1cb,-0x27e)]){if(_0x378849(-0x265,-0x262,-0x2bf,-0x2cd)===_0x471470[_0x378849(-0x1d0,-0x205,-0x127,-0x172)])_0x218670=_0x471470[_0x2ad880(0x627,0x5ab,0x50c,0x623)](_0x471470[_0x378849(-0x1de,-0x1e3,-0x127,-0x188)](_0x218670,',\x20'),_0x3fac59[_0x378849(-0x237,-0x2d1,-0x240,-0x1a4)+_0x155d4f+_0x378849(-0x25f,-0x269,-0x281,-0x2b8)]);else throw new _0x9cf11e(_0x471470[_0x2ad880(0x4ca,0x4d7,0x4cf,0x424)]);}}}else _0x471470[_0x378849(-0x15f,-0x1a3,-0xc4,-0xf4)](_0x471470[_0x378849(-0x248,-0x1d6,-0x1af,-0x1f9)],_0x2ad880(0x604,0x5fa,0x602,0x592))?(_0x471470['bgXoE'](addLog,_0x471470[_0x378849(-0x1b6,-0x258,-0x190,-0x127)]),_0x3add20=_0x375ca1):_0x3b1522=_0x471470[_0x378849(-0x1de,-0x287,-0x20a,-0x18e)](_0x256468,_0x2ad880(0x5ba,0x588,0x5b3,0x5af))+_0x1183e2(_0x8bd4a5[_0x2ad880(0x483,0x4bf,0x4bb,0x44c)+_0x11076d+_0x378849(-0x25f,-0x230,-0x266,-0x27e)]);let {modifiedPrompt:_0x3ff407,insertions:_0xafdf8}=await _0x471470[_0x2ad880(0x51c,0x56d,0x519,0x599)](prompt_replace,_0x3add20,_0x218670);if(_0x7cd1a0){if(_0x471470[_0x2ad880(0x5d1,0x597,0x5f1,0x638)](_0x471470[_0x2ad880(0x569,0x59d,0x55a,0x548)],_0x471470['ibQdu']))for(let _0x3bce8d=-0x443*-0x5+0x5d*0x25+-0x6f3*0x5;_0x3bce8d<=0x25*-0x4a+-0x17d2+0x2288;_0x3bce8d++){_0x3fac59['Character\x20'+_0x3bce8d+_0x378849(-0x25f,-0x200,-0x1cf,-0x244)]&&(_0x3ff407=_0x471470[_0x2ad880(0x572,0x5ab,0x54f,0x5f0)](_0x3ff407+_0x2ad880(0x575,0x588,0x628,0x608),prompt_replace_for_character(_0x3fac59[_0x378849(-0x237,-0x284,-0x280,-0x234)+_0x3bce8d+_0x378849(-0x25f,-0x24c,-0x26b,-0x1be)])));}else _0x20e912=_0x32ea03+',\x20'+_0xfa66a8[_0x2ad880(0x546,0x4bf,0x414,0x4a8)+_0x3b60fa+_0x378849(-0x25f,-0x236,-0x2c2,-0x25d)];}const _0x5acdd1=extension_settings[extensionName][_0x2ad880(0x4ae,0x4e2,0x4cb,0x458)],{model:_0x2241eb,apiUrl:_0x3d333f,apiKey:_0x134109,conversationPresets:_0x133bb5,conversationPresetId:_0x418e14,editPresetId:_0x360053,aspectRatio:_0x1b04ad}=_0x5acdd1;_0x471470[_0x378849(-0x223,-0x257,-0x26a,-0x1aa)](addLog,_0x2ad880(0x572,0x5f9,0x5ef,0x633)+_0x2ad880(0x545,0x5f0,0x540,0x60e)+_0x2ad880(0x4a5,0x4cf,0x52d,0x421)+_0x2ad880(0x4a2,0x4ba,0x505,0x4f9)+_0x378849(-0x250,-0x1b4,-0x1af,-0x276)+_0x2241eb);let _0xde8d7c,_0x13780c;if(_0x2241eb[_0x2ad880(0x4ae,0x554,0x5cc,0x594)](_0x471470[_0x378849(-0x160,-0x1e3,-0x16a,-0x1fa)])){if(_0x471470[_0x378849(-0x138,-0x94,-0x98,-0x1bc)](_0x471470[_0x2ad880(0x572,0x5f2,0x591,0x577)],_0x378849(-0x188,-0x1bd,-0x1f0,-0x178)))return _0x2a91ac['toString']()['search'](_0x378849(-0x12a,-0x165,-0xb9,-0x13f)+'+$')[_0x2ad880(0x480,0x4e4,0x486,0x55e)]()['constructo'+'r'](_0x5e17fb)[_0x2ad880(0x415,0x4d0,0x457,0x49f)](fUwMWg['rdvoI']);else{_0xde8d7c='/v1beta/mo'+_0x2ad880(0x4fc,0x4d2,0x56d,0x456)+_0x2241eb;const _0x4c28fc={};_0x4c28fc['fixedPromp'+'t']='';const _0x5a4e4c=_0x133bb5[_0x418e14]||_0x4c28fc,_0x2bc09c=[_0x5a4e4c['fixedPromp'+'t'],_0xafdf8[_0x471470[_0x2ad880(0x45f,0x4fa,0x45c,0x521)]],_0xafdf8[_0x471470[_0x378849(-0x111,-0x19a,-0x9e,-0x5e)]],_0x3ff407,_0xafdf8[_0x471470[_0x2ad880(0x647,0x5aa,0x633,0x63b)]],_0xafdf8[_0x471470[_0x2ad880(0x620,0x5d3,0x599,0x654)]],_0x5a4e4c[_0x378849(-0x1f7,-0x281,-0x1b9,-0x218)+'mpt'],_0xafdf8['最后置']][_0x378849(-0xf7,-0xec,-0x19c,-0x70)](Boolean)[_0x2ad880(0x600,0x5da,0x672,0x527)](',\x20');_0x471470[_0x2ad880(0x4e4,0x4b8,0x412,0x493)](addLog,_0x378849(-0x178,-0x126,-0x1cf,-0x14e)+_0x2bc09c);const _0x4f4753={};_0x4f4753[_0x2ad880(0x5f9,0x546,0x5f2,0x57d)]=_0x2bc09c;const _0x1def28={};_0x1def28[_0x2ad880(0x4b9,0x54e,0x540,0x5ac)+'t']=0x1,_0x1def28[_0x378849(-0x194,-0x161,-0x20e,-0xda)+'o']=_0x1b04ad;const _0x44a487={};_0x44a487[_0x2ad880(0x5f7,0x55b,0x5d5,0x608)]=[_0x4f4753],_0x44a487[_0x378849(-0xf5,-0xe9,-0xed,-0xda)]=_0x1def28,_0x13780c=_0x44a487,_0x471470['RHhIm'](addLog,_0x2ad880(0x559,0x4ed,0x461,0x45d)+'uilt\x20Image'+'n\x20payload\x20'+_0x2ad880(0x471,0x523,0x589,0x55e)+_0x2ad880(0x52e,0x5d1,0x52b,0x57e)+_0x2bc09c);}}else{if(_0x471470['CtxyM']!==_0x471470['CtxyM'])_0x1ec986=_0x471470[_0x2ad880(0x501,0x49f,0x448,0x488)](_0x4858d0,'/v1');else{_0xde8d7c=_0x471470[_0x378849(-0x105,-0x11d,-0x136,-0x82)];let _0x251871;if(_0x33abea[_0x378849(-0x148,-0xc6,-0x96,-0x1ff)]('{修图}')){_0x471470[_0x2ad880(0x577,0x567,0x4db,0x565)](addLog,_0x471470[_0x2ad880(0x54f,0x4f1,0x43c,0x54d)]);const _0x227cb0=_0x471470[_0x2ad880(0x52c,0x5cd,0x51a,0x5df)](_0x360053,'默认'),_0x589c1a={};_0x589c1a[_0x2ad880(0x582,0x58e,0x5a4,0x570)+'on']=[],_0x589c1a[_0x378849(-0x13a,-0x183,-0x189,-0xd8)+'t']='',_0x251871=_0x133bb5[_0x227cb0]||_0x589c1a,_0x471470[_0x2ad880(0x502,0x4b8,0x4d2,0x4ad)](addLog,_0x2ad880(0x52a,0x5c3,0x573,0x609)+_0x2ad880(0x510,0x4a1,0x549,0x430)+_0x227cb0+'\x22');}else{const _0x2c7aa2={};_0x2c7aa2['conversati'+'on']=[],_0x2c7aa2[_0x378849(-0x13a,-0x83,-0x1a4,-0x183)+'t']='',_0x251871=_0x133bb5[_0x418e14]||_0x2c7aa2;}const _0x3c2bd2=[_0x251871['fixedPromp'+'t'],_0xafdf8[_0x471470[_0x2ad880(0x545,0x4fa,0x498,0x465)]],_0xafdf8[_0x471470[_0x378849(-0x111,-0xb3,-0x61,-0xcb)]],_0x3ff407,_0xafdf8[_0x471470[_0x2ad880(0x522,0x5aa,0x5da,0x5e6)]],_0xafdf8[_0x471470[_0x2ad880(0x51e,0x5d3,0x5c5,0x524)]],_0x251871[_0x378849(-0x1f7,-0x27f,-0x205,-0x2ac)+_0x2ad880(0x51d,0x48f,0x3e3,0x4e4)],_0xafdf8[_0x378849(-0x246,-0x2e7,-0x1a2,-0x2ec)]][_0x378849(-0xf7,-0x1ac,-0x3b,-0xb8)](Boolean)['join'](',\x20');addLog(_0x2ad880(0x5ac,0x57e,0x55f,0x4fd)+_0x3c2bd2);const _0x145a8f={};_0x145a8f[_0x2ad880(0x513,0x49d,0x457,0x4be)]=_0x378849(-0x20e,-0x2b1,-0x1d5,-0x288),_0x145a8f[_0x378849(-0x11e,-0xc9,-0x14e,-0x133)]=[];const _0x582057={};_0x582057['role']=_0x378849(-0x155,-0x113,-0x12f,-0xd5),_0x582057[_0x2ad880(0x616,0x5d8,0x63c,0x564)]=[];const _0x5a0869=_0x251871[_0x378849(-0x168,-0xf3,-0xbb,-0xb6)+'on'][_0x378849(-0x1fd,-0x1f9,-0x20b,-0x188)](_0xe02598=>[_0x145a8f,_0x582057])[_0x378849(-0x1f8,-0x23e,-0x255,-0x224)]();let _0x35631f=-0x128c+-0x1*0xbef+-0x99*-0x33;for(const _0x15007a of _0x251871[_0x378849(-0x168,-0x108,-0x1c4,-0x1de)+'on']){if(_0x471470[_0x378849(-0x24b,-0x2ba,-0x1ee,-0x2f3)](_0x471470[_0x378849(-0xf6,-0xa1,-0xdb,-0x1a0)],_0x471470[_0x2ad880(0x50b,0x53c,0x494,0x49e)])){if(_0x15007a['user']?.[_0x378849(-0x10f,-0xf0,-0x5a,-0x12a)])_0x5a0869[_0x35631f]['content'][_0x378849(-0x25a,-0x20d,-0x2aa,-0x232)]({'type':_0x471470['bktlU'],'text':_0x15007a[_0x2ad880(0x444,0x4e8,0x464,0x4b3)][_0x2ad880(0x5b6,0x5e7,0x647,0x5ee)]});const _0x323225=await _0x471470['uENsa'](getImageFromTurnData,_0x15007a[_0x378849(-0x20e,-0x1c3,-0x262,-0x29d)]);if(_0x323225)_0x5a0869[_0x35631f][_0x378849(-0x11e,-0xbd,-0xe1,-0x13b)][_0x2ad880(0x4a9,0x49c,0x4b0,0x518)]({'type':_0x471470[_0x2ad880(0x52f,0x54d,0x54d,0x591)],'image_url':{'url':_0x323225}});_0x35631f++;if(_0x15007a['model']?.[_0x2ad880(0x5a0,0x5e7,0x57a,0x60b)])_0x5a0869[_0x35631f]['content']['push']({'type':_0x471470[_0x378849(-0x24c,-0x1a7,-0x2b7,-0x1b1)],'text':_0x15007a[_0x378849(-0x1d8,-0x266,-0x22b,-0x240)][_0x2ad880(0x66c,0x5e7,0x58a,0x67a)]});const _0x3d79a6=await _0x471470[_0x378849(-0x22a,-0x17f,-0x2be,-0x2dc)](getImageFromTurnData,_0x15007a[_0x2ad880(0x55e,0x51e,0x4a3,0x498)]);if(_0x3d79a6)_0x5a0869[_0x35631f]['content'][_0x2ad880(0x43b,0x49c,0x4ec,0x51f)]({'type':_0x471470['yYYKl'],'image_url':{'url':_0x3d79a6}});_0x35631f++;}else _0x28b608=_0x11b07d;}if(!_0x33abea[_0x378849(-0x148,-0xfb,-0x16b,-0x1a9)](_0x2ad880(0x537,0x4b9,0x568,0x4e1))){const _0x4b416b=extension_settings[extensionName]['bananaChar'+_0x2ad880(0x5db,0x564,0x59c,0x5ca)+'ts']||{};for(const _0x596b6f in _0x4b416b){const _0x541d5d=_0x4b416b[_0x596b6f],_0x364f15=(_0x541d5d['triggers']||'')['split']('|')['filter'](_0x161de3=>_0x161de3['trim']()!=='');for(const _0x38507b of _0x364f15){if(_0x3c2bd2['toLowerCas'+'e']()['includes'](_0x38507b[_0x2ad880(0x49b,0x52c,0x5bc,0x488)+'e']())){addLog('[Banana]\x20F'+_0x2ad880(0x5d9,0x522,0x591,0x583)+_0x378849(-0x137,-0x17e,-0x199,-0x9c)+_0x378849(-0x1ad,-0x1ed,-0x1eb,-0x1ce)+_0x38507b+('\x22\x20from\x20pre'+_0x378849(-0x131,-0xf7,-0x7b,-0x1a0))+_0x596b6f+'\x22.');const _0x3f0358=_0x541d5d['conversati'+'on'];if(_0x3f0358){if(_0x471470[_0x378849(-0x15f,-0x107,-0x106,-0x20c)](_0x471470[_0x2ad880(0x5f8,0x550,0x5b8,0x51f)],_0x471470[_0x378849(-0x1a6,-0x207,-0x140,-0x12d)])){const _0x187c20=[];if(_0x3f0358[_0x378849(-0x20e,-0x153,-0x24b,-0x1bd)]&&_0x3f0358[_0x2ad880(0x528,0x4e8,0x52c,0x490)][_0x2ad880(0x65d,0x5e7,0x64d,0x5ac)])_0x187c20[_0x378849(-0x25a,-0x213,-0x208,-0x253)]({'type':_0x471470[_0x378849(-0x24c,-0x1fc,-0x1d1,-0x1d3)],'text':_0x3f0358[_0x378849(-0x20e,-0x29b,-0x1ea,-0x23e)]['text']});const _0x235824=await _0x471470[_0x2ad880(0x483,0x4b8,0x535,0x552)](getImageFromTurnData,_0x3f0358[_0x2ad880(0x56b,0x4e8,0x512,0x488)]);if(_0x235824)_0x187c20[_0x378849(-0x25a,-0x2cc,-0x2bb,-0x201)]({'type':_0x2ad880(0x492,0x4e5,0x59a,0x485),'image_url':{'url':_0x235824}});if(_0x471470['IzQBV'](_0x187c20[_0x378849(-0x1cf,-0x1c8,-0x12f,-0x177)],-0x8*0x45+0xdb3+-0xb8b)){const _0x116d31={};_0x116d31[_0x378849(-0x259,-0x302,-0x1af,-0x2f6)]=_0x378849(-0x20e,-0x1ea,-0x16c,-0x19c),_0x116d31[_0x378849(-0x11e,-0x169,-0x7a,-0xc0)]=_0x187c20,_0x5a0869[_0x2ad880(0x4c5,0x49c,0x417,0x46d)](_0x116d31);}const _0x24f509=[];if(_0x3f0358['model']&&_0x3f0358[_0x378849(-0x1d8,-0x1be,-0x212,-0x201)]['text'])_0x24f509['push']({'type':_0x471470[_0x2ad880(0x436,0x4aa,0x54f,0x544)],'text':_0x3f0358[_0x378849(-0x1d8,-0x161,-0x213,-0x185)]['text']});const _0x129596=await _0x471470[_0x2ad880(0x4e1,0x4f3,0x47e,0x52a)](getImageFromTurnData,_0x3f0358[_0x2ad880(0x494,0x51e,0x575,0x467)]);if(_0x129596)_0x24f509[_0x2ad880(0x469,0x49c,0x548,0x541)]({'type':_0x471470[_0x378849(-0x1a9,-0x123,-0x23b,-0x249)],'image_url':{'url':_0x129596}});if(_0x471470[_0x378849(-0x1b7,-0x235,-0x256,-0x220)](_0x24f509[_0x378849(-0x1cf,-0x206,-0x1d2,-0x153)],0x1c5a+0xff2+-0x2c4c)){const _0x51f191={};_0x51f191[_0x2ad880(0x443,0x49d,0x505,0x4e1)]=_0x471470['WRrXZ'],_0x51f191[_0x2ad880(0x639,0x5d8,0x65a,0x556)]=_0x24f509,_0x5a0869[_0x378849(-0x25a,-0x20d,-0x29b,-0x1c1)](_0x51f191);}}else{const _0x579cc9=_0x471470[_0x2ad880(0x5b5,0x587,0x574,0x536)]['split']('|');let _0x5b05f5=0x16d2+-0x4*-0x2f1+-0x2296;while(!![]){switch(_0x579cc9[_0x5b05f5++]){case'0':_0x455b5a['removeList'+_0x378849(-0x1e4,-0x20e,-0x1b3,-0x256)](_0x471470[_0x2ad880(0x527,0x493,0x51d,0x441)],_0x107656);continue;case'1':_0x2434e6[_0x378849(-0x1dd,-0x21f,-0x21d,-0x27b)](_0x467260=>{function _0x2a5661(_0x3dd5f8,_0x2e8709,_0x4e6495,_0x1fda09){return _0x2ad880(_0x3dd5f8-0x17a,_0x4e6495- -0x793,_0x4e6495-0x5,_0x2e8709);}function _0x33e09(_0x4c2471,_0x5380fb,_0x29574d,_0x16c76d){return _0x2ad880(_0x4c2471-0x19b,_0x16c76d- -0x161,_0x29574d-0x1e3,_0x4c2471);}_0x4f0f94[_0x33e09(0x2c4,0x2d4,0x35a,0x361)+_0x2a5661(-0x309,-0x247,-0x281,-0x2de)](_0x467260,_0x2a2eac);});continue;case'2':_0x471470[_0x378849(-0x245,-0x195,-0x197,-0x23b)](_0x1ea1f7,_0x471470[_0x2ad880(0x5a3,0x5fb,0x68e,0x594)]);continue;case'3':_0x32529e[_0x378849(-0x234,-0x2da,-0x1b8,-0x278)+'ener'](_0x40b95d[_0x378849(-0x118,-0x165,-0x19a,-0x7a)+_0x378849(-0x21e,-0x2c5,-0x1f9,-0x1ae)+'ST'],_0x350f25);continue;case'4':_0x1bd3fe[_0x378849(-0x130,-0x106,-0xea,-0x108)+_0x2ad880(0x534,0x55f,0x607,0x58e)+_0x378849(-0x1e4,-0x162,-0x1af,-0x153)]=![];continue;}break;}}}break;}}}}if(!_0x33abea[_0x378849(-0x148,-0xa2,-0xea,-0x123)](_0x471470[_0x2ad880(0x592,0x54f,0x542,0x5b4)])){if(_0x471470[_0x2ad880(0x509,0x597,0x605,0x5d0)](_0x471470[_0x2ad880(0x533,0x555,0x5f1,0x505)],_0x471470[_0x2ad880(0x575,0x521,0x5b3,0x4bc)])){const _0x21f9a8={};_0x21f9a8['conversati'+'on']=[],_0x21f9a8[_0x2ad880(0x5d2,0x5bc,0x574,0x675)+'t']='',_0x2cc3e1=_0xd9d695[_0xc92e17]||_0x21f9a8;}else{const _0x31687={};_0x31687[_0x378849(-0x259,-0x1ae,-0x1dc,-0x266)]=_0x471470['xXGvW'],_0x31687[_0x2ad880(0x66f,0x5d8,0x61c,0x66b)]=[{'type':_0x471470['bktlU'],'text':_0x3c2bd2}],_0x5a0869[_0x2ad880(0x499,0x49c,0x454,0x422)](_0x31687);}}else{const _0x24dbf4=[],_0xcd6481=_0x471470[_0x2ad880(0x5d0,0x585,0x525,0x5b8)](_0x513e1a,_0x3c2bd2),_0x34c56f=[_0x251871[_0x2ad880(0x5b3,0x5bc,0x66a,0x627)+'t'],_0xcd6481,_0x251871['postfixPro'+_0x2ad880(0x505,0x48f,0x3e5,0x4d4)]][_0x378849(-0xf7,-0x6d,-0x4f,-0x130)](Boolean)[_0x2ad880(0x5ca,0x5da,0x618,0x630)](',\x20'),_0x238b7f={};_0x238b7f[_0x378849(-0x1b2,-0x207,-0x20d,-0x20e)]=_0x471470['bktlU'],_0x238b7f[_0x378849(-0x10f,-0x88,-0x1a1,-0x8e)]=_0x34c56f,_0x24dbf4[_0x378849(-0x25a,-0x1cd,-0x244,-0x216)](_0x238b7f);if(_0x9f448c){if(_0x471470[_0x2ad880(0x5a6,0x597,0x50e,0x5f9)]('iHSEH',_0x471470[_0x2ad880(0x515,0x4a4,0x4b7,0x48f)])){const _0xa392ca=new _0x1ce9ed();_0xa392ca[_0x378849(-0x1ff,-0x2a2,-0x151,-0x1f9)]=()=>_0xef8874(_0xa392ca[_0x2ad880(0x591,0x51c,0x587,0x552)]),_0xa392ca[_0x378849(-0x1be,-0x16b,-0x102,-0x1ed)]=_0x123807,_0xa392ca[_0x378849(-0x21a,-0x253,-0x25e,-0x1c3)+'URL'](_0x1de503);}else{const _0x4fbb11={};_0x4fbb11['url']=_0x9f448c;const _0x7fa5b3={};_0x7fa5b3['type']=_0x378849(-0x211,-0x27a,-0x1d3,-0x1f9),_0x7fa5b3['image_url']=_0x4fbb11,_0x24dbf4['push'](_0x7fa5b3),addLog(_0x2ad880(0x481,0x533,0x4b0,0x5aa)+'图模式：已添加待修改'+'的图片');}}const _0x5c69ab={};_0x5c69ab[_0x2ad880(0x3eb,0x49d,0x44c,0x3ec)]=_0x471470[_0x2ad880(0x5af,0x5e6,0x671,0x64a)],_0x5c69ab['content']=_0x24dbf4,_0x5a0869[_0x2ad880(0x4a4,0x49c,0x4aa,0x46d)](_0x5c69ab),_0x471470[_0x378849(-0x146,-0xc5,-0x16a,-0xcf)](addLog,_0x378849(-0x1c3,-0x234,-0x1e0,-0x1f0)+'图模式：指令\x20=\x20'+_0x34c56f);}const _0x28c41e={};_0x28c41e[_0x378849(-0x194,-0x1f6,-0x212,-0x1f5)+'o']=_0x1b04ad;const _0x1fcd8d={};_0x1fcd8d[_0x2ad880(0x536,0x5b4,0x614,0x610)+'g']=_0x28c41e,_0x13780c={'model':_0x2241eb,'messages':_0x5a0869['filter'](_0x4609a6=>_0x4609a6[_0x2ad880(0x618,0x5d8,0x551,0x5f8)]['length']>-0xb2d+0x1*-0x11f5+0x1d22),'config':_0x1fcd8d},_0x471470[_0x378849(-0x1c4,-0x11f,-0x22d,-0x13c)](addLog,_0x378849(-0x209,-0x1f6,-0x254,-0x16a)+_0x378849(-0x206,-0x1ff,-0x25a,-0x278)+_0x378849(-0x1ed,-0x25a,-0x254,-0x241)+_0x2ad880(0x537,0x569,0x612,0x5b8)+_0x13780c[_0x2ad880(0x524,0x51d,0x59f,0x540)]['length']+_0x378849(-0x121,-0x156,-0x94,-0x151));}}let _0x1c6c55=_0x3d333f[_0x378849(-0x176,-0x117,-0x187,-0x177)](/\/$/,''),_0x190b69;function _0x378849(_0xaf158,_0x415f9e,_0x3e359f,_0x7a6ed4){return _0x1328(_0xaf158- -0x30e,_0x3e359f);}_0x1c6c55['endsWith'](_0x471470[_0x2ad880(0x553,0x4a2,0x4d0,0x551)])||_0x1c6c55['includes'](_0x471470['nDPbY'])?_0x471470[_0x378849(-0x14a,-0x1bc,-0x9b,-0x1f5)]!==_0x471470[_0x2ad880(0x49c,0x4b5,0x433,0x4cd)]?_0x190b69=_0x471470['TkJPe'](_0x1c6c55,_0xde8d7c):_0x5e3c09[_0x2ad880(0x603,0x553,0x588,0x50d)+'sk'](_0x2c10fd,![]):_0x190b69=_0x471470[_0x2ad880(0x4e7,0x4b7,0x49b,0x48e)](_0x471470['TkJPe'](_0x1c6c55,_0x471470[_0x2ad880(0x4c4,0x4a2,0x4e4,0x409)]),_0xde8d7c);_0x190b69=_0x190b69[_0x378849(-0x176,-0x209,-0x172,-0x106)](/\/v1\/v1\//g,_0x471470[_0x2ad880(0x603,0x56c,0x5c8,0x507)]);const _0x39b472=extension_settings[extensionName][_0x2ad880(0x416,0x4d1,0x546,0x584)];let _0x2e0d03,_0x33bd37,_0x3ff851;if(_0x471470[_0x378849(-0x17c,-0x179,-0x16f,-0x12c)](_0x39b472,_0x471470[_0x2ad880(0x585,0x5dd,0x5a4,0x68e)])){let _0x19f61c=_0x1c6c55;if(!_0x19f61c['endsWith'](_0x471470[_0x378849(-0x254,-0x1d5,-0x2cb,-0x298)])&&!_0x19f61c['includes'](_0x471470[_0x378849(-0x18a,-0x15f,-0x1b9,-0x1e6)])){if(_0x471470[_0x2ad880(0x524,0x48a,0x4ab,0x4d1)](_0x471470[_0x2ad880(0x548,0x52e,0x4f1,0x56e)],_0x2ad880(0x58d,0x5f5,0x58e,0x60f)))_0x19f61c=_0x19f61c+_0x2ad880(0x51c,0x58c,0x4fe,0x56f);else{const _0x3a7654=_0x378849(-0x1d7,-0x28b,-0x198,-0x206)+'eneration\x20'+_0x2ad880(0x43e,0x4a3,0x521,0x4c1)+_0x378849(-0x1ef,-0x1b0,-0x1e0,-0x157)+_0x56c978+':\x20'+_0x377c02['message'];_0x471470[_0x378849(-0x245,-0x212,-0x2eb,-0x18d)](_0x1afc93,_0x3a7654),_0x399823['error'](_0x3a7654);const _0x3c75cb={};_0x3c75cb['id']=_0x12d4f1,_0x3c75cb['success']=![],_0x3c75cb[_0x2ad880(0x4ca,0x4d5,0x584,0x420)]=_0x207a3f[_0x378849(-0x139,-0x19e,-0x1d5,-0x146)],_0x3c75cb[_0x2ad880(0x55c,0x546,0x5c8,0x549)]=_0x3d5c69,_0x5ad839[_0x378849(-0x230,-0x1c2,-0x2cc,-0x1ba)](_0x48ad53[_0x378849(-0x118,-0x19b,-0x132,-0xc3)+_0x2ad880(0x5dd,0x54b,0x54f,0x5a0)+_0x378849(-0x22c,-0x278,-0x1ff,-0x196)],_0x3c75cb),_0x471470[_0x2ad880(0x3f4,0x4b1,0x557,0x4b8)](_0x5399eb,_0x2ad880(0x52f,0x5e8,0x61c,0x651)+_0x378849(-0x128,-0x8a,-0x1a8,-0x71)+_0x378849(-0x1af,-0x149,-0xf4,-0x190)+'nse\x20for\x20ID'+':\x20'+_0x78973c);}}_0x19f61c=_0x19f61c[_0x378849(-0x176,-0x1e8,-0x166,-0x200)](/\/v1\/$/,_0x2ad880(0x612,0x58c,0x569,0x4f6)),_0x2e0d03=_0x471470[_0x2ad880(0x656,0x5c9,0x657,0x517)],_0x33bd37=_0x471470[_0x378849(-0x269,-0x25d,-0x1d6,-0x2ca)](getRequestHeaders,window[_0x378849(-0x107,-0x1a7,-0x199,-0x77)]);const _0x38c43a={};_0x38c43a[_0x378849(-0x1b3,-0x15a,-0x209,-0x227)+_0x378849(-0x238,-0x25b,-0x241,-0x220)+'ce']=_0x2ad880(0x50a,0x57d,0x623,0x5e6),_0x38c43a[_0x378849(-0x22d,-0x276,-0x201,-0x210)]=_0x19f61c,_0x38c43a[_0x378849(-0x187,-0x1a8,-0x17c,-0xd4)+_0x378849(-0x172,-0xcd,-0x213,-0x14f)+'rs']=_0x2ad880(0x525,0x4c1,0x46d,0x43f)+_0x378849(-0x10c,-0xfd,-0xa0,-0xed)+_0x2ad880(0x4a6,0x4a5,0x46f,0x491)+_0x134109+'\x22',_0x38c43a['model']=_0x2241eb,_0x38c43a['messages']=_0x13780c[_0x2ad880(0x5b0,0x51d,0x4bb,0x474)],_0x38c43a['stream']=![],_0x3ff851=_0x38c43a;if(_0x2241eb[_0x2ad880(0x5b7,0x554,0x4a1,0x587)](_0x471470[_0x378849(-0x160,-0x1cb,-0x11d,-0xe5)])){addLog(_0x378849(-0x26b,-0x306,-0x1b0,-0x22f)+_0x2ad880(0x585,0x524,0x481,0x4ee)+_0x378849(-0x14e,-0x94,-0xd1,-0xf4)+_0x378849(-0x261,-0x2de,-0x2b2,-0x2e5)),_0x2e0d03=_0x190b69;const _0x32eadc={};_0x32eadc['Content-Ty'+'pe']=_0x471470['LMzlj'],_0x32eadc['Authorizat'+_0x2ad880(0x58b,0x50e,0x57e,0x578)]=_0x378849(-0x196,-0xde,-0x186,-0x182)+_0x134109,_0x33bd37=_0x32eadc,_0x3ff851=_0x13780c;}addLog(_0x378849(-0x133,-0xe1,-0x136,-0x81)+_0x378849(-0x239,-0x201,-0x23f,-0x2c0));}else{_0x2e0d03=_0x190b69;const _0x3e18c6={};_0x3e18c6['Content-Ty'+'pe']=_0x378849(-0x163,-0x216,-0x202,-0x202)+_0x2ad880(0x501,0x4c0,0x468,0x427),_0x3e18c6['Authorizat'+_0x378849(-0x1e8,-0x2a5,-0x274,-0x225)]=_0x2ad880(0x5d5,0x560,0x4d1,0x555)+_0x134109,_0x33bd37=_0x3e18c6,_0x3ff851=_0x13780c,_0x471470[_0x378849(-0x14d,-0x10b,-0x199,-0x149)](addLog,_0x378849(-0x133,-0x80,-0x150,-0xa7)+_0x378849(-0x249,-0x2e0,-0x2d2,-0x288));}_0x471470['bgXoE'](addLog,'[Banana]\x20S'+_0x378849(-0x1bd,-0x1db,-0x260,-0x217)+'uest\x20to:\x20'+_0x2e0d03),_0x471470[_0x2ad880(0x522,0x532,0x523,0x5b3)](addLog,_0x2ad880(0x593,0x582,0x61e,0x599)+'ayload:\x20'+JSON['stringify'](_0x3ff851,null,0x151e+0x3b2*0x4+-0x23e4));try{taskQueue[_0x378849(-0x1e2,-0x241,-0x26b,-0x228)+'us'](_0x2dcf7f,_0x471470[_0x378849(-0x158,-0xfb,-0x100,-0x1d2)]);const _0x37dcd7=await _0x471470['fUEiD'](fetch,_0x2e0d03,{'method':_0x378849(-0x11a,-0xa1,-0xae,-0x173),'headers':_0x33bd37,'body':JSON[_0x378849(-0x136,-0xe8,-0xa2,-0xe1)](_0x3ff851)});if(!_0x37dcd7['ok']){const _0x4d9f9e=await _0x37dcd7['text']();throw new Error(_0x2ad880(0x590,0x557,0x49e,0x579)+_0x2ad880(0x4fb,0x4e0,0x567,0x58c)+_0x2ad880(0x64c,0x590,0x5fa,0x4f9)+'\x20'+_0x37dcd7['status']+':\x20'+_0x4d9f9e);}const _0x53a9a8=await _0x37dcd7[_0x378849(-0x20a,-0x1c5,-0x2b0,-0x170)]();let _0x34c21a='';const _0x436bad=_0x53a9a8[_0x378849(-0xfe,-0xb9,-0x10f,-0x12a)];if(_0x436bad&&_0x471470[_0x2ad880(0x55e,0x53f,0x4ce,0x516)](_0x436bad['length'],0x29*0x79+0xd24*0x1+-0x2085)){if(_0x2ad880(0x604,0x589,0x5e4,0x5a5)!==_0x471470[_0x378849(-0x12b,-0x1a5,-0xb8,-0x85)]){const _0x3a8b2a=_0x436bad[0x1*-0xd9f+-0x9*0x41+-0x8*-0x1fd][_0x2ad880(0x63b,0x5bd,0x596,0x618)]?.[_0x2ad880(0x54b,0x5d8,0x559,0x687)];if(Array['isArray'](_0x3a8b2a))for(const _0x5b22a1 of _0x3a8b2a){if(_0x471470[_0x2ad880(0x400,0x48a,0x545,0x4ed)](_0x5b22a1[_0x378849(-0x1b2,-0x1b6,-0x139,-0x12b)],_0x471470['yYYKl'])&&_0x5b22a1[_0x378849(-0x211,-0x1dd,-0x1d6,-0x2cd)]?.[_0x2ad880(0x55d,0x4f8,0x45b,0x463)]){_0x34c21a=_0x5b22a1[_0x2ad880(0x580,0x4e5,0x4f7,0x47a)][_0x2ad880(0x578,0x4f8,0x496,0x525)];break;}}else{if(_0x471470[_0x2ad880(0x598,0x528,0x48b,0x4c3)](typeof _0x3a8b2a,_0x471470[_0x378849(-0x144,-0x1cd,-0x1ef,-0xab)])){if(_0x471470['iiPcL']!==_0x471470['NENPH']){const _0x585863=/!\[.*?\]\((https?:\/\/[^\s\)]+)\)/,_0x63e9f9=_0x3a8b2a[_0x378849(-0x200,-0x1b6,-0x194,-0x25f)](_0x585863);if(_0x63e9f9&&_0x63e9f9[-0x242c+0x225*0x8+0x1305]){addLog(_0x471470[_0x2ad880(0x5a5,0x586,0x5a6,0x55b)]);const _0x4ec1ec=_0x63e9f9[-0x9e5+0x1e05+-0x141f];addLog(_0x2ad880(0x5fd,0x5bb,0x59b,0x594)+_0x378849(-0xff,-0x1bc,-0x103,-0xed)+_0x2ad880(0x532,0x58a,0x5bf,0x5c8)+_0x4ec1ec);try{const _0x3b7b98=await _0x471470[_0x2ad880(0x4f3,0x4e1,0x4bc,0x502)](fetch,_0x4ec1ec);if(!_0x3b7b98['ok'])throw new Error(_0x378849(-0x173,-0x12a,-0x173,-0x162)+_0x378849(-0x208,-0x25c,-0x182,-0x288)+_0x2ad880(0x45a,0x4eb,0x581,0x430)+_0x3b7b98[_0x378849(-0x19d,-0x1ca,-0x1c4,-0x11b)]);const _0x268587=await _0x3b7b98[_0x378849(-0x15c,-0x1e8,-0x10c,-0x205)](),_0x128482=await new Promise((_0x155f38,_0x3a8cfc)=>{const _0x58f106=new FileReader();function _0x31f809(_0x4c8c8b,_0x12c985,_0x41267b,_0x1a4eb5){return _0x2ad880(_0x4c8c8b-0x83,_0x4c8c8b- -0x17f,_0x41267b-0x0,_0x12c985);}_0x58f106[_0x31f809(0x378,0x3b4,0x33d,0x2ce)]=()=>_0x155f38(_0x58f106[_0x31f809(0x39d,0x426,0x3e8,0x400)]),_0x58f106['onerror']=_0x3a8cfc;function _0x546c4f(_0x1f1585,_0x3c11a5,_0x568ac7,_0x4d6df9){return _0x378849(_0x4d6df9-0x6e,_0x3c11a5-0x4a,_0x3c11a5,_0x4d6df9-0x1ab);}_0x58f106['readAsData'+'URL'](_0x268587);});_0x34c21a=_0x128482,_0x471470['vohYO'](addLog,'[Banana]\x20S'+_0x2ad880(0x5c7,0x515,0x53f,0x49e)+_0x378849(-0x1f0,-0x1ea,-0x1fd,-0x18f)+'d\x20Markdown'+_0x2ad880(0x491,0x53e,0x4dc,0x596)+_0x2ad880(0x4a2,0x53d,0x4c0,0x4dd));}catch(_0x353494){_0x471470[_0x2ad880(0x493,0x4c8,0x576,0x4e7)](addLog,_0x378849(-0x13e,-0x105,-0xcb,-0x131)+_0x378849(-0x1a4,-0x181,-0x161,-0x1e8)+_0x378849(-0x116,-0xd8,-0xc5,-0x7d)+_0x378849(-0x145,-0x187,-0x173,-0x113)+'\x20'+_0x353494[_0x378849(-0x139,-0x1e7,-0x10e,-0x155)]),_0x34c21a=_0x4ec1ec,addLog(_0x471470[_0x2ad880(0x5b6,0x5fe,0x6a1,0x5d1)]);}}else addLog(_0x378849(-0x1d1,-0x128,-0x219,-0x241)+'esponse\x20co'+_0x378849(-0x207,-0x249,-0x276,-0x1bb)+_0x378849(-0x1fb,-0x24a,-0x273,-0x2b7)+'\x20image.');}else _0x1eaf50[_0x378849(-0x237,-0x217,-0x22a,-0x219)+_0x4389b5+_0x2ad880(0x52e,0x497,0x4c8,0x47a)]&&(_0x46751e=_0x471470[_0x2ad880(0x496,0x49f,0x466,0x443)](_0x471470[_0x378849(-0x257,-0x1db,-0x24e,-0x1d6)](_0xac1a6a,_0x471470['kbfgg']),_0x11c679(_0x5b02cb[_0x2ad880(0x4e7,0x4bf,0x529,0x51e)+_0x36bb8d+_0x378849(-0x25f,-0x24b,-0x1bb,-0x264)])));}}}else _0x2c3479=_0xd6edf1[_0x2ad880(0x50a,0x513,0x58d,0x55f)](_0x471470[_0x378849(-0x1a7,-0x155,-0x209,-0x109)],'');}if(!_0x34c21a){if(_0x471470[_0x2ad880(0x690,0x5e1,0x56b,0x603)](_0x378849(-0x154,-0x1e8,-0xca,-0x149),_0x471470[_0x378849(-0x1c2,-0x12b,-0x189,-0x235)]))throw new Error(_0x471470['oWakB']);else{_0x471470[_0x378849(-0x245,-0x213,-0x1d7,-0x231)](_0x176a33,_0x378849(-0x26b,-0x321,-0x2da,-0x2e9)+_0x378849(-0x1d2,-0x246,-0x22f,-0x14e)+'持酒馆代理，切换为直'+_0x378849(-0x261,-0x309,-0x2d4,-0x26b)),_0x6dc576=_0x570eb4;const _0x33981c={};_0x33981c[_0x378849(-0x218,-0x23b,-0x2d3,-0x2b4)+'pe']=_0x471470['LMzlj'],_0x33981c['Authorizat'+_0x378849(-0x1e8,-0x273,-0x25f,-0x258)]=_0x378849(-0x196,-0x1d5,-0x21a,-0x1d9)+_0x5603b1,_0x5c5440=_0x33981c,_0x3915ae=_0x294538;}}addLog(_0x471470[_0x378849(-0x140,-0x1be,-0x13a,-0x1f0)]),taskQueue[_0x2ad880(0x5c0,0x553,0x511,0x4c8)+'sk'](_0x2dcf7f,!![]),currentTaskId=null;const _0x3c992b={};return _0x3c992b['image']=_0x34c21a,_0x3c992b[_0x378849(-0x132,-0x18a,-0x120,-0x150)]=_0x28f80c||'',_0x3c992b;}catch(_0x268b21){_0x471470[_0x2ad880(0x4e4,0x531,0x47b,0x4b7)](addLog,_0x378849(-0x13e,-0x18f,-0x105,-0x182)+_0x2ad880(0x526,0x4bb,0x41b,0x410)+':\x20'+_0x268b21['message']),console[_0x2ad880(0x51d,0x4d5,0x453,0x42e)](_0x471470['THnYb'],_0x268b21);if(_0x268b21[_0x378849(-0x139,-0x179,-0x162,-0x106)]===_0x471470[_0x2ad880(0x3fe,0x48e,0x4f7,0x467)]){}else _0x471470[_0x378849(-0x202,-0x259,-0x2b7,-0x274)](_0x471470[_0x2ad880(0x462,0x50f,0x58d,0x4f6)],_0x378849(-0x169,-0xf4,-0x15b,-0xe1))?taskQueue['completeTa'+'sk'](_0x2dcf7f,![]):_0x2ece71=_0x471470[_0x378849(-0x1de,-0x1e3,-0x276,-0x27f)](_0x41b9b2,_0xf96895);currentTaskId=null;throw _0x268b21;}}export async function bananaGenerate(_0x4d18c6){const _0x5834f6={'TzIdt':function(_0x482a33,_0x49c6bb){return _0x482a33(_0x49c6bb);},'wPNkT':function(_0x432675,_0xee7cde){return _0x432675(_0xee7cde);},'vCHqL':_0x1eb6c7(-0x25,-0xaf,-0x64,-0xf2)+_0x1eb6c7(0x3a,0x2f,0x5f,0xd8)+_0x1eb6c7(-0x98,-0x98,-0xd3,-0x11)+_0x1eb6c7(0xd8,0x43,0x1,0x41),'vBFRs':function(_0x38ab76){return _0x38ab76();},'yruDv':function(_0x4359f0,_0x54be14){return _0x4359f0(_0x54be14);},'OlnxU':_0x1eb6c7(-0x6e,-0xdf,-0xd0,-0x8c),'nYgfd':function(_0x4fc621,_0x5f29e8){return _0x4fc621(_0x5f29e8);},'osSii':function(_0x5742b1,_0xff8c77){return _0x5742b1===_0xff8c77;},'PQByr':'EmZBa','zbrtL':'jnUsK','Yyabp':function(_0x77b2d2,_0x55806d){return _0x77b2d2(_0x55806d);},'KowrH':function(_0x58ec0d,_0x211c82,_0x5c2a7a,_0x1cc611){return _0x58ec0d(_0x211c82,_0x5c2a7a,_0x1cc611);},'Nyakw':_0x1eb6c7(-0x6d,0xe,0x3e,-0x7a),'bcQtN':function(_0x244912,_0x175c3e){return _0x244912+_0x175c3e;},'njARi':function(_0x1ae6a7,_0x5972ee){return _0x1ae6a7(_0x5972ee);},'XZWGL':_0x5d3deb(-0x59,0xe,-0xaf,-0x21),'kzMhZ':function(_0x326ebc,_0x20cac1){return _0x326ebc(_0x20cac1);},'yDKTj':_0x5d3deb(0x11f,0xa9,0xe2,0xc4),'CtvCU':function(_0x1df442,_0x36eb33){return _0x1df442(_0x36eb33);}};_0x5834f6['vBFRs'](clearLog);let {id:_0x34853a,prompt:_0x48f6d6,width:_0x491de6,height:_0x969832,change:_0xe9b9c8,retouchPrompt:_0x17b8e7,retouchImage:_0x4a9126}=_0x4d18c6;currentRequestId=_0x34853a,currentPrompt=_0x48f6d6,_0x5834f6[_0x5d3deb(0x6c,0xad,-0x58,0x2c)](addLog,_0x5d3deb(0xab,-0x4f,0x93,0x7)+_0x1eb6c7(-0x13,-0x56,0x49,-0x1f)+_0x5d3deb(-0x10a,-0xd,0x21,-0x4f)+_0x5d3deb(0x81,0x76,0x93,-0x4)+_0x1eb6c7(0x2c,-0x30,-0x3e,-0xec)+_0x34853a+')');let _0x17f63e='';_0xe9b9c8?_0x17f63e=_0xe9b9c8['replaceAll'](_0x5834f6[_0x5d3deb(0xe8,0x73,-0x39,0x71)],''):_0x17f63e=_0x48f6d6;function _0x5d3deb(_0x685810,_0x1ef268,_0x2ca267,_0x4f9627){return _0x1328(_0x4f9627- -0x136,_0x1ef268);}if(_0xe9b9c8&&_0xe9b9c8[_0x1eb6c7(0xb1,0x16,0x44,-0xa6)]('{修图}')){_0x5834f6['nYgfd'](addLog,_0x1eb6c7(0x94,0x38,-0x1a,0x24)+'启动');if(_0x17b8e7)_0x5834f6[_0x5d3deb(0xa6,-0x12,0x6c,0x63)](addLog,_0x5d3deb(0x1f,0x11,0x48,0x47)+_0x17b8e7);if(_0x4a9126)_0x5834f6[_0x5d3deb(-0x105,-0x5f,-0xdf,-0x8a)](addLog,_0x1eb6c7(-0x9b,-0xc2,-0xd9,-0xb)+']');}function _0x1eb6c7(_0x770396,_0x3fbd01,_0x725c8,_0x15fcd0){return _0x1328(_0x3fbd01- -0x1b0,_0x725c8);}try{if(_0x5834f6[_0x1eb6c7(0x94,0x56,0x96,0x37)](_0x5834f6['PQByr'],_0x5834f6[_0x1eb6c7(-0x66,-0xef,-0x185,-0x188)])){_0x5834f6[_0x1eb6c7(0x59,-0x17,0x33,-0xbf)](_0x577715,'Banana修图模式'+'启动');if(_0x167407)_0x2820b1(_0x1eb6c7(-0x65,-0x33,0x2f,0x59)+_0x575192);if(_0x337ce9)_0x5834f6['wPNkT'](_0x519ca1,_0x5d3deb(-0x28,-0x56,0x62,-0x48)+']');}else{const {image:_0x4926d0,change:_0x98dbf}=await _0x5834f6[_0x1eb6c7(0x41,-0x53,-0xad,-0x28)](generateBananaImage,{'prompt':_0x48f6d6,'width':_0x491de6,'height':_0x969832,'change':_0xe9b9c8,'retouchPrompt':_0x17b8e7,'retouchImage':_0x4a9126});if(extension_settings[extensionName]['cache']!='0'){const _0x42cd54={};_0x42cd54[_0x5d3deb(0x6b,0x63,0xf5,0xa6)]=_0x17f63e,await _0x5834f6['KowrH'](setItemImg,_0x48f6d6,_0x4926d0,_0x42cd54),_0x5834f6['TzIdt'](addLog,_0x1eb6c7(-0xa3,-0x50,-0xb,-0x4a)+'or\x20prompt:'+'\x20'+_0x48f6d6),extension_settings[extensionName]['banana'][_0x5d3deb(-0xd0,0x9,0x1d,-0x72)]?_0x1eb6c7(0x8b,0xe,0x6f,0x90)===_0x5834f6[_0x1eb6c7(0x27,0x4c,0x97,0x7)]?(extension_settings[extensionName][_0x1eb6c7(-0xba,-0xb6,-0x128,-0x16)][_0x5d3deb(-0xa7,-0x11b,-0x117,-0x72)]=_0x5834f6['bcQtN'](extension_settings[extensionName][_0x5d3deb(0x21,-0xcd,-0xb0,-0x3c)][_0x1eb6c7(-0x13a,-0xec,-0x11e,-0x82)],-0x1a32+-0x2263*0x1+0x3c96),_0x5834f6['njARi'](addLog,_0x1eb6c7(-0x16d,-0xbb,-0xbf,-0x2e)+_0x1eb6c7(0x3e,-0x20,-0xba,-0x7f)+extension_settings[extensionName][_0x5d3deb(-0xf4,0x61,-0x65,-0x3c)][_0x1eb6c7(-0xc7,-0xec,-0xcf,-0x173)])):(_0x5834f6[_0x1eb6c7(-0x11,-0x17,-0xad,0x3a)](_0x4d631d,'[Banana]\x20F'+'ailed\x20to\x20f'+_0x1eb6c7(0xfa,0x48,-0x21,0xb2)+'own\x20image:'+'\x20'+_0x2af065[_0x5d3deb(-0xb,0xa3,0xee,0x9f)]),_0x3d0c3d=_0x2b5358,_0x5834f6[_0x5d3deb(0x123,0xe1,0xb,0x97)](_0x5d738a,_0x5834f6[_0x5d3deb(-0x1e,-0x1a,-0xaf,-0x57)])):_0x5834f6[_0x1eb6c7(-0x6a,-0x8b,-0xc7,-0x2e)]===_0x5834f6[_0x1eb6c7(-0x9a,-0x8b,-0xe7,0x14)]?(extension_settings[extensionName]['banana'][_0x5d3deb(-0x8c,0x1f,-0x7d,-0x72)]=-0x1fcb*0x1+-0x4f4+0xc4*0x30,_0x5834f6['kzMhZ'](addLog,_0x5d3deb(-0xe3,-0xcd,-0x28,-0x41)+'r\x20prompt:\x20'+extension_settings[extensionName][_0x5d3deb(0x63,-0x7,0x36,-0x3c)][_0x5d3deb(-0x65,-0xa6,-0xa4,-0x72)])):_0x5834f6[_0x1eb6c7(-0x26,-0x17,0x19,-0x21)](_0x5ae2df,'缓存设置为不存入数据'+'库');}else{if(_0x5834f6[_0x1eb6c7(-0x42,0x56,0xb0,0x8f)](_0x5834f6['yDKTj'],_0x5834f6[_0x1eb6c7(-0x145,-0x8d,-0x41,-0x70)]))addLog(_0x5d3deb(0x39,-0xdb,-0x5c,-0x68)+'库');else{const _0x4e0a48=_0x209f0b['apply'](_0x9109a,arguments);return _0x32b248=null,_0x4e0a48;}}const _0x495a87={};_0x495a87['id']=_0x34853a,_0x495a87[_0x1eb6c7(-0xd1,-0x2d,0x20,-0xd3)]=!![],_0x495a87[_0x5d3deb(0xde,0x175,0x7a,0xdf)]=_0x4926d0,_0x495a87['prompt']=_0x48f6d6,_0x495a87[_0x5d3deb(0x119,0xe8,0x6e,0xa6)]=_0x17f63e,eventSource[_0x5d3deb(0x51,-0x63,-0x94,-0x58)](EventType[_0x1eb6c7(-0x33,0x46,0xeb,-0x14)+_0x5d3deb(-0xd,-0x26,0xb4,0x2d)+_0x5d3deb(-0x7c,-0xfb,-0xe8,-0x54)],_0x495a87),_0x5834f6[_0x5d3deb(0xf5,-0x69,0x66,0x3a)](addLog,'[Banana]\x20E'+_0x1eb6c7(0x16,-0x96,0x26,-0x3b)+'cess\x20respo'+_0x5d3deb(0x158,0x4e,0x5f,0xe4)+':\x20'+_0x34853a);}}catch(_0x1cbe00){const _0x5b830e=_0x1eb6c7(-0xb,-0x79,0xf,-0x2)+_0x5d3deb(-0xd9,-0xb6,-0x35,-0x59)+_0x1eb6c7(-0x196,-0xf5,-0x17a,-0x87)+'\x20ID\x20'+_0x34853a+':\x20'+_0x1cbe00[_0x1eb6c7(0x7e,0x25,-0x14,0x7a)];_0x5834f6[_0x1eb6c7(0x33,-0x6e,-0x97,-0x7a)](addLog,_0x5b830e),console['error'](_0x5b830e);const _0x5c71bd={};_0x5c71bd['id']=_0x34853a,_0x5c71bd[_0x5d3deb(0x1,-0x35,0x3b,0x4d)]=![],_0x5c71bd['error']=_0x1cbe00[_0x5d3deb(0xc3,0xb2,0x21,0x9f)],_0x5c71bd[_0x5d3deb(-0x17,0x2c,0x71,0x28)]=_0x48f6d6,eventSource[_0x1eb6c7(-0x29,-0xd2,-0x144,-0x2e)](EventType[_0x1eb6c7(-0x3d,0x46,0xfb,0x51)+_0x1eb6c7(-0xe1,-0x4d,-0xcd,-0xe5)+_0x5d3deb(-0x83,0x31,0x12,-0x54)],_0x5c71bd),_0x5834f6[_0x5d3deb(0x5,-0xaa,-0x21,-0x8a)](addLog,_0x1eb6c7(0xaa,0x50,0xb,0xcd)+'mitted\x20fai'+_0x1eb6c7(0x3b,-0x51,0x27,0x1b)+_0x1eb6c7(0x7,0x6a,-0x3a,0x45)+':\x20'+_0x34853a);}}function handleCancelBananaTask(_0x200173){const _0x5b22fe={'UNmMm':function(_0x17010c,_0x2e9f94){return _0x17010c(_0x2e9f94);},'SEDce':function(_0x43c61c,_0x211094){return _0x43c61c===_0x211094;},'DxlZt':'0|1|2|3|4','xjuSF':function(_0x3b52f7,_0x4aaffd){return _0x3b52f7||_0x4aaffd;}},{taskId:_0x20a4a4}=_0x200173;function _0x367d7e(_0x361003,_0x7d2a9d,_0x1c5d50,_0x118405){return _0x1328(_0x7d2a9d-0x243,_0x118405);}_0x5b22fe[_0x108271(0x3c7,0x3bc,0x401,0x3b1)](addLog,'[Banana]\x20收'+_0x108271(0x31d,0x389,0x3d0,0x369)+_0x367d7e(0x258,0x2e7,0x23e,0x36d)+_0x20a4a4+')');function _0x108271(_0x21212f,_0x44f94c,_0x59071d,_0x438ae2){return _0x1328(_0x59071d-0x310,_0x44f94c);}if(_0x5b22fe[_0x367d7e(0x399,0x341,0x357,0x2eb)](currentTaskId,_0x20a4a4)&&currentRequestId){const _0x59edde=_0x5b22fe['DxlZt'][_0x108271(0x3bc,0x3c6,0x448,0x390)]('|');let _0xe43cbe=-0x150a+0x18df+-0x3d5*0x1;while(!![]){switch(_0x59edde[_0xe43cbe++]){case'0':_0x5b22fe[_0x367d7e(0x2cd,0x334,0x2c3,0x29f)](addLog,_0x108271(0x3e7,0x509,0x485,0x416)+'消当前任务，发送失败'+'响应\x20(ID:\x20'+currentRequestId+')');continue;case'1':eventSource[_0x108271(0x386,0x408,0x3ee,0x3a0)](EventType[_0x108271(0x4b2,0x4fa,0x506,0x488)+'MAGE_RESPO'+'NSE'],{'id':currentRequestId,'success':![],'error':_0x108271(0x501,0x432,0x49e,0x3fd),'prompt':_0x5b22fe['xjuSF'](currentPrompt,'')});continue;case'2':currentTaskId=null;continue;case'3':currentRequestId=null;continue;case'4':currentPrompt=null;continue;}break;}}}function initializeBananaListener(){const _0x4fc006={};_0x4fc006[_0x1c5705(-0x136,-0x150,-0x20d,-0x112)]=_0x1c5705(-0x299,-0x21e,-0x1df,-0x162)+_0x1c5705(-0x291,-0x206,-0x1f8,-0x1bd);const _0x9b4d6f=_0x4fc006;eventSource['on'](EventType[_0x4b0b2e(0x3d7,0x43d,0x3fa,0x3e4)+_0x4b0b2e(0x28c,0x307,0x249,0x2de)+'ST'],bananaGenerate);function _0x1c5705(_0x39889c,_0xa98304,_0x2728f4,_0x1aee32){return _0x1328(_0xa98304- -0x301,_0x1aee32);}function _0x4b0b2e(_0x36a733,_0x16156e,_0x4ee146,_0x37b5f0){return _0x1328(_0x37b5f0-0x1ee,_0x4ee146);}eventSource['on'](_0x4b0b2e(0x291,0x2bc,0x35a,0x312)+'cancel_ban'+'ana_task',handleCancelBananaTask),addLog(_0x9b4d6f[_0x4b0b2e(0x3a5,0x328,0x2e5,0x39f)]);}export async function replaceWithBanana(){function _0x41785a(_0x44b184,_0x24729e,_0xbd7ce5,_0xe33e11){return _0x1328(_0x44b184- -0x28c,_0xbd7ce5);}const _0x4bd4a0={'FsYUl':_0x5e7cfe(0x34,-0x6a,0xaa,0x8c),'YBkqB':function(_0x4cc80c,_0x17e317){return _0x4cc80c+_0x17e317;},'kzfSs':'/v1','WuAIj':_0x5e7cfe(0x4,0x37,-0x96,-0x80),'lIMSW':function(_0x32101a,_0xee09f5){return _0x32101a(_0xee09f5);},'zLBcU':_0x41785a(-0xe1,-0x124,-0x171,-0x14e)+'n/json','YuamC':function(_0x5796b4,_0xf7e506){return _0x5796b4||_0xf7e506;},'BsJsB':'text','KgAfj':'image_url','LsKOW':function(_0x3f847e,_0x1aff98){return _0x3f847e(_0x1aff98);},'XnQMp':_0x41785a(-0x18c,-0x1d8,-0xe8,-0x18a),'PgXJj':function(_0x4a44cb,_0x10d7a0){return _0x4a44cb(_0x10d7a0);},'NIxYQ':function(_0x1f320c,_0x2a3fb0){return _0x1f320c==_0x2a3fb0;},'urZUH':_0x5e7cfe(-0x97,-0xd4,-0x113,-0xb0),'hshTp':function(_0x45bd29,_0x3d3169){return _0x45bd29!==_0x3d3169;},'qMSQT':_0x5e7cfe(0x27,-0x1b,-0x6e,0xd2),'kuyCn':function(_0x1c2fc6,_0x2cfdc8){return _0x1c2fc6!==_0x2cfdc8;},'fgORq':'DHHcF','cjSkA':function(_0x28d282){return _0x28d282();},'qATre':function(_0x1db6c1,_0x3a5206){return _0x1db6c1===_0x3a5206;},'BflJp':_0x5e7cfe(0x2a,-0x54,0x1a,0xc),'UGOsW':_0x41785a(-0x13d,-0x11a,-0xbb,-0x107),'QNpnx':function(_0x10784a,_0x1ece94){return _0x10784a!==_0x1ece94;},'bnHTs':_0x5e7cfe(0x70,0x12a,0xa9,0xbf),'ydIcd':_0x41785a(-0x168,-0x1da,-0x158,-0x1dc)+_0x41785a(-0x1db,-0x1da,-0x183,-0x19a)+_0x5e7cfe(0x83,0xdd,0xa,0x30),'VLreL':_0x41785a(-0xaa,-0x86,-0xdb,-0xfa)+_0x5e7cfe(0x1f,0x1c,0xd0,-0x1f)};function _0x5e7cfe(_0x43cb7a,_0x40e5a0,_0x35929c,_0x408730){return _0x1328(_0x43cb7a- -0x191,_0x40e5a0);}if(_0x4bd4a0['NIxYQ'](extension_settings[extensionName][_0x41785a(-0xbb,-0xa0,-0xec,-0x34)],_0x4bd4a0[_0x5e7cfe(-0xd9,-0x170,-0x43,-0x6b)])){if(_0x4bd4a0['hshTp'](_0x4bd4a0[_0x41785a(-0x9e,-0xf8,-0x116,-0x6f)],_0x41785a(-0x1d6,-0x292,-0x166,-0x286))){if(!window[_0x41785a(-0xae,-0x149,-0x4f,-0xb7)+_0x5e7cfe(-0x1a,-0xa9,0x42,0x11)+'ener']){if(_0x4bd4a0[_0x5e7cfe(0x26,0x85,-0x80,-0x45)](_0x4bd4a0[_0x41785a(-0xdf,-0x141,-0x104,-0xdd)],_0x4bd4a0[_0x41785a(-0xdf,-0x168,-0x99,-0x18b)])){let _0x237d35=_0x3e083c;!_0x237d35[_0x41785a(-0xac,-0x6,-0xcd,-0x112)](_0x41785a(-0xe8,-0x162,-0x149,-0x77))&&!_0x237d35[_0x5e7cfe(0x35,0xbd,0x20,0xd1)](_0x4bd4a0[_0x41785a(-0x1dc,-0x208,-0x194,-0x159)])&&(_0x237d35=_0x4bd4a0[_0x41785a(-0x147,-0x16b,-0x144,-0x1e1)](_0x237d35,_0x4bd4a0['kzfSs']));_0x237d35=_0x237d35[_0x5e7cfe(0x7,-0x33,-0x55,0x43)](/\/v1\/$/,_0x4bd4a0['kzfSs']),_0x4aac6f=_0x5e7cfe(0x19,0x37,0x13,0xc5)+_0x5e7cfe(-0x50,0x5c,0x43,0x47)+_0x41785a(-0x1a6,-0x197,-0x196,-0x19f)+_0x5e7cfe(0x2c,0x6a,0x93,-0x5f),_0x3b3dcd=_0x156df4(_0x12ec5a[_0x41785a(-0x85,-0x4d,-0xdc,-0x12f)]);const _0x4d9682={};_0x4d9682[_0x5e7cfe(-0x36,-0x84,0x47,0x7c)+_0x5e7cfe(-0xbb,-0x12f,-0x16a,-0x12c)+'ce']=_0x4bd4a0['WuAIj'],_0x4d9682[_0x5e7cfe(-0xb0,-0x4c,-0xa6,-0x62)]=_0x237d35,_0x4d9682[_0x41785a(-0x105,-0xdb,-0x73,-0xd7)+_0x5e7cfe(0xb,0x84,0x93,-0x37)+'rs']=_0x41785a(-0x1b3,-0x232,-0x1ed,-0x25b)+_0x5e7cfe(0x71,-0x6,0x38,-0xc)+_0x5e7cfe(-0xd4,-0xc0,-0x37,-0x182)+_0x4c511d+'\x22',_0x4d9682['model']=_0x10e464,_0x4d9682[_0x41785a(-0x157,-0x1e1,-0xb7,-0x1b3)]=_0x39fbfc[_0x5e7cfe(-0x5c,-0x10a,-0x107,0x1c)],_0x4d9682[_0x5e7cfe(-0x4e,-0x1c,-0xb1,0x2f)]=![],_0x387e49=_0x4d9682;if(_0x432b09['startsWith'](_0x41785a(-0x111,-0x1c4,-0xd9,-0x67))){_0x4bd4a0[_0x5e7cfe(-0x1f,0x99,-0xc0,0x92)](_0x1d4d61,_0x5e7cfe(-0xee,-0xc9,-0xc2,-0xb6)+'magen\x20模型不支'+_0x5e7cfe(0x2f,0x30,-0x5e,0xd6)+_0x5e7cfe(-0xe4,-0x43,-0x4d,-0x18e)),_0x2e5092=_0x1d090b;const _0x5bb0d4={};_0x5bb0d4[_0x41785a(-0x196,-0x18d,-0x1a2,-0x17d)+'pe']=_0x4bd4a0[_0x5e7cfe(-0xdf,-0xeb,-0x60,-0xea)],_0x5bb0d4['Authorizat'+_0x41785a(-0x166,-0x1aa,-0x1c5,-0x1c3)]=_0x5e7cfe(-0x19,0x46,-0x87,-0x72)+_0x5d9d4b,_0x262429=_0x5bb0d4,_0x4d1ca4=_0x2c3247;}_0x4bd4a0[_0x41785a(-0x11a,-0x190,-0xb1,-0x137)](_0x1fa535,_0x41785a(-0xb1,-0x66,-0xfc,-0x24)+'用酒馆代理模式');}else window['initialize'+'BananaList'+_0x41785a(-0x162,-0x133,-0x1bd,-0x169)]=!![],_0x4bd4a0['cjSkA'](initializeBananaListener);}_0x4bd4a0['cjSkA'](initializeImageProcessing);}else{const _0x31240c=[],_0x324abb=_0x4bd4a0['YuamC'](_0x7a6674,_0x3d00d5),_0x4dae19=[_0x483714['fixedPromp'+'t'],_0x324abb,_0x2a4ba9[_0x41785a(-0x175,-0x20b,-0xbe,-0x100)+_0x41785a(-0x1e5,-0x263,-0x24d,-0x14f)]]['filter'](_0x158332)['join'](',\x20'),_0x4db22c={};_0x4db22c[_0x41785a(-0x130,-0x1e0,-0x1df,-0xec)]=_0x4bd4a0[_0x5e7cfe(-0xca,-0x31,-0x9b,-0x139)],_0x4db22c['text']=_0x4dae19,_0x31240c[_0x5e7cfe(-0xdd,-0xc3,-0x171,-0xa2)](_0x4db22c);if(_0x37372d){const _0x33832c={};_0x33832c[_0x41785a(-0x17c,-0x137,-0x1e1,-0x1ca)]=_0x48c5d6;const _0x4c2a8b={};_0x4c2a8b['type']=_0x4bd4a0[_0x5e7cfe(-0x1d,-0x7a,-0x22,-0x2c)],_0x4c2a8b[_0x41785a(-0x18f,-0xdb,-0x19e,-0x1d6)]=_0x33832c,_0x31240c[_0x41785a(-0x1d8,-0x1ed,-0x25d,-0x27a)](_0x4c2a8b),_0x4bd4a0[_0x5e7cfe(0x2b,-0x5d,0xde,-0x6b)](_0x34e690,'[Banana]\x20修'+'图模式：已添加待修改'+'的图片');}const _0xfee848={};_0xfee848[_0x41785a(-0x1d7,-0x12c,-0x230,-0x1c6)]=_0x4bd4a0[_0x5e7cfe(-0xb6,-0x28,-0xa6,-0x20)],_0xfee848[_0x5e7cfe(0x5f,-0x36,0x4d,0x87)]=_0x31240c,_0x421b76[_0x5e7cfe(-0xdd,-0xca,-0xeb,-0x62)](_0xfee848),_0x4bd4a0[_0x41785a(-0xa0,-0x9,0x14,-0x56)](_0x47da7d,_0x5e7cfe(-0x46,-0x10,0x17,-0xd1)+'图模式：指令\x20=\x20'+_0x4dae19);}}else{if(_0x4bd4a0[_0x5e7cfe(0x3,0x64,0x60,-0x4d)](_0x4bd4a0['BflJp'],_0x4bd4a0[_0x5e7cfe(-0xbd,-0xd3,-0x28,-0x44)])){const _0x1c5c0a=_0x41e540?function(){function _0x29f006(_0x5a195b,_0x404d2e,_0x44beec,_0x5909a3){return _0x41785a(_0x404d2e-0x177,_0x404d2e-0x145,_0x44beec,_0x5909a3-0xbb);}if(_0x3c2b01){const _0xde7ca4=_0x4e3cac[_0x29f006(0xf1,0xbd,0x170,0x169)](_0x2a3ea7,arguments);return _0x28cd76=null,_0xde7ca4;}}:function(){};return _0x9de2c8=![],_0x1c5c0a;}else{if(window[_0x5e7cfe(0x4d,-0x12,-0x55,0x104)+_0x41785a(-0x115,-0xf1,-0x17a,-0xa4)+_0x5e7cfe(-0x67,-0xef,0x49,-0x10f)]){if(_0x4bd4a0[_0x41785a(-0xa5,-0x134,-0x2,-0x146)](_0x4bd4a0[_0x5e7cfe(-0x6f,-0xa6,-0x6d,-0x24)],_0x4bd4a0[_0x5e7cfe(-0x6f,-0x4,-0x2a,0x14)])){const _0x404c6a={};_0x404c6a['role']=_0x4bd4a0[_0x41785a(-0x1b1,-0x15c,-0x1c8,-0x14e)],_0x404c6a['content']=[{'type':_0x4bd4a0[_0x41785a(-0x1c5,-0x1f9,-0x22d,-0x16f)],'text':_0x485f86}],_0x562310[_0x41785a(-0x1d8,-0x23b,-0x266,-0x28d)](_0x404c6a);}else{const _0x58f5bc=_0x5e7cfe(-0x6,0x33,-0xe,-0x62)[_0x5e7cfe(-0x59,-0x2f,-0xda,-0x6b)]('|');let _0x38948a=-0x18cf+0x291*0x3+0x5b4*0x3;while(!![]){switch(_0x58f5bc[_0x38948a++]){case'0':eventSource[_0x41785a(-0x1b2,-0x23f,-0x18d,-0x221)+'ener'](_0x4bd4a0[_0x5e7cfe(-0x68,-0x69,-0xab,-0xa1)],handleCancelBananaTask);continue;case'1':_0x4bd4a0[_0x5e7cfe(-0x1f,-0x2,-0x40,0x78)](addLog,_0x4bd4a0[_0x41785a(-0xe3,-0x160,-0x134,-0x141)]);continue;case'2':eventSource[_0x5e7cfe(-0xb7,-0xb3,-0xd,-0x88)+_0x5e7cfe(-0x67,0x29,-0x111,0x48)](EventType[_0x5e7cfe(0x65,0xff,0xa5,0x8d)+_0x5e7cfe(-0xa1,-0x71,-0xd2,-0x156)+'ST'],bananaGenerate);continue;case'3':window[_0x41785a(-0xae,-0x4a,-0xf6,-0x22)+_0x41785a(-0x115,-0x100,-0x14b,-0x1c3)+_0x41785a(-0x162,-0x12e,-0x172,-0xad)]=![];continue;case'4':LEGACY_EVENT_NAMES['forEach'](_0x33592d=>{function _0x2b348b(_0x38b3dc,_0x3c41cd,_0x3e459d,_0x52ecc7){return _0x5e7cfe(_0x3e459d-0x4f5,_0x38b3dc,_0x3e459d-0x107,_0x52ecc7-0x124);}function _0x437a35(_0x596223,_0x1caf3e,_0x55c354,_0x4fce22){return _0x41785a(_0x4fce22-0x147,_0x1caf3e-0x1c,_0x55c354,_0x4fce22-0x1c);}eventSource[_0x437a35(-0xad,-0xa4,-0xb9,-0x6b)+_0x437a35(-0xcd,-0x6,0x37,-0x1b)](_0x33592d,bananaGenerate);});continue;}break;}}}}}}