(function(_0x1d6cbb,_0x265cd4){function _0x5e8b4b(_0x1a4b2e,_0x24a37f,_0x3e0025,_0x489fe0){return _0xabd9(_0x489fe0- -0x13d,_0x3e0025);}function _0x59e892(_0x44eb04,_0x423f48,_0x1fa0ca,_0xb3c076){return _0xabd9(_0x1fa0ca- -0x13a,_0x423f48);}const _0x6319b2=_0x1d6cbb();while(!![]){try{const _0x24d563=parseInt(_0x59e892(0x116,0x166,0x10a,0x156))/(-0x4fb*-0x1+0x7e5+-0xcdf)*(-parseInt(_0x5e8b4b(0x20e,0x213,0x13e,0x1a2))/(-0x1fb7+-0x8*0x115+0x1*0x2861))+-parseInt(_0x5e8b4b(0xac,0xff,0x26,0x84))/(0x181*-0xb+0x167*0x8+-0x2ab*-0x2)*(-parseInt(_0x5e8b4b(0x1cb,0x195,0x18e,0x153))/(0xc73*0x1+-0x2610+-0x3*-0x88b))+parseInt(_0x5e8b4b(0xc6,0x9b,0xf9,0x129))/(0x75d+0x1b64+-0x9*0x3dc)+-parseInt(_0x59e892(0x100,0x149,0xbf,0xc0))/(-0x1de5+-0x17d8+-0x1*-0x35c3)*(parseInt(_0x5e8b4b(0x76,0xe2,0x8a,0xc2))/(-0xefa+0x7d+-0x3a1*-0x4))+parseInt(_0x5e8b4b(0x1a6,0x1ad,0x161,0x119))/(0x191d+-0x272*0x5+-0xcdb)*(-parseInt(_0x5e8b4b(0x138,0x1f4,0x21e,0x1ab))/(0x1739+0x1075+0x11*-0x255))+parseInt(_0x59e892(0x1df,0x120,0x189,0x110))/(-0x1dfb+0x2006+-0x201)+-parseInt(_0x5e8b4b(0x81,0x5e,0xe8,0x9b))/(-0x8e4*-0x1+0x12*0x5e+-0xf75);if(_0x24d563===_0x265cd4)break;else _0x6319b2['push'](_0x6319b2['shift']());}catch(_0x4fc67c){_0x6319b2['push'](_0x6319b2['shift']());}}}(_0x7bd1,-0x952eb+0xa41d2+0x5d5f8));function _0xabd9(_0x3c0f29,_0x45f339){_0x3c0f29=_0x3c0f29-(0x163b+-0x248c+-0x100f*-0x1);const _0x1c71d9=_0x7bd1();let _0x578f6a=_0x1c71d9[_0x3c0f29];if(_0xabd9['PrPeZU']===undefined){var _0x137c6d=function(_0x427d31){const _0x3b3bd0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x56c72a='',_0x60dda5='',_0xe640a9=_0x56c72a+_0x137c6d;for(let _0x124871=-0x1e46+0x15f7+0x2c5*0x3,_0x2513ea,_0x48fccb,_0x2cb111=0x2*-0x87e+0x1*-0xec9+-0xa97*-0x3;_0x48fccb=_0x427d31['charAt'](_0x2cb111++);~_0x48fccb&&(_0x2513ea=_0x124871%(0x14*-0x91+-0x1b5e+0x26b6)?_0x2513ea*(0x16f5+0x17f+-0x4*0x60d)+_0x48fccb:_0x48fccb,_0x124871++%(0xf2c+-0x953+-0x5d5))?_0x56c72a+=_0xe640a9['charCodeAt'](_0x2cb111+(0x1747*-0x1+-0x17f*0x6+0x204b))-(0xbb*0x2b+-0x2353+0x16*0x2e)!==0x1cf8+-0xa83+0x19*-0xbd?String['fromCharCode'](0x6ae+0x215d+-0x270c&_0x2513ea>>(-(-0x24a2+0x19a5+0xaff)*_0x124871&0x4b1+-0xa1f*0x1+-0x1*-0x574)):_0x124871:0x2601+-0x6f5+-0xf86*0x2){_0x48fccb=_0x3b3bd0['indexOf'](_0x48fccb);}for(let _0x1bae9a=0x222b+0xf1+-0x231c,_0x389dfa=_0x56c72a['length'];_0x1bae9a<_0x389dfa;_0x1bae9a++){_0x60dda5+='%'+('00'+_0x56c72a['charCodeAt'](_0x1bae9a)['toString'](0x5*0x6cd+0x129a+-0x348b))['slice'](-(0x18f1+0x5d*0x6a+0x95*-0x6d));}return decodeURIComponent(_0x60dda5);};_0xabd9['JsZDZi']=_0x137c6d,_0xabd9['pNoQzV']={},_0xabd9['PrPeZU']=!![];}const _0x4783c4=_0x1c71d9[-0x1237+-0x12ab+0x24e2],_0xd4513=_0x3c0f29+_0x4783c4,_0x6b958c=_0xabd9['pNoQzV'][_0xd4513];if(!_0x6b958c){const _0x3a0616=function(_0x14f267){this['ukXbYy']=_0x14f267,this['dKWjMc']=[-0x987+0x17eb*-0x1+0x2173,0x2427+0x1*0xa5d+-0x2e84,-0x25d*0x7+0x1*0xefe+0x18d*0x1],this['uZgPsN']=function(){return'newState';},this['viOzcD']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['IZHkOq']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3a0616['prototype']['adnxVj']=function(){const _0x56f202=new RegExp(this['viOzcD']+this['IZHkOq']),_0x533c8b=_0x56f202['test'](this['uZgPsN']['toString']())?--this['dKWjMc'][0x110a+0x490+-0x39*0x61]:--this['dKWjMc'][0x1e*-0xd3+-0x1a68+0x3322];return this['XXfJUB'](_0x533c8b);},_0x3a0616['prototype']['XXfJUB']=function(_0x1bed53){if(!Boolean(~_0x1bed53))return _0x1bed53;return this['kPlPnk'](this['ukXbYy']);},_0x3a0616['prototype']['kPlPnk']=function(_0x6af8a5){for(let _0x2001d0=0x2543+0x11cc+-0x370f,_0x34a9a9=this['dKWjMc']['length'];_0x2001d0<_0x34a9a9;_0x2001d0++){this['dKWjMc']['push'](Math['round'](Math['random']())),_0x34a9a9=this['dKWjMc']['length'];}return _0x6af8a5(this['dKWjMc'][-0x20f8+-0xbc7*0x3+0x10d*0x41]);},new _0x3a0616(_0xabd9)['adnxVj'](),_0x578f6a=_0xabd9['JsZDZi'](_0x578f6a),_0xabd9['pNoQzV'][_0xd4513]=_0x578f6a;}else _0x578f6a=_0x6b958c;return _0x578f6a;}const _0x476f28=(function(){const _0xf02087={'tkuke':function(_0x4c0208,_0x2b3020){return _0x4c0208!==_0x2b3020;},'IfnyJ':_0x4ed5af(0x551,0x53b,0x491,0x4f0),'RIHpD':'rtBTl','HXNOH':function(_0x4e5b01,_0x121f59){return _0x4e5b01+_0x121f59;},'ggrBv':_0x4ed5af(0x4d3,0x43a,0x3f4,0x46c),'NxuIT':function(_0x302df6,_0x184b99){return _0x302df6(_0x184b99);}};function _0x109e45(_0x1aace4,_0x26bb13,_0x427c8e,_0xf88e2f){return _0xabd9(_0x427c8e-0x285,_0x1aace4);}function _0x4ed5af(_0x3b5dab,_0x545f56,_0x138e5d,_0x502f1c){return _0xabd9(_0x502f1c-0x287,_0x3b5dab);}let _0x21770b=!![];return function(_0xac2408,_0x5782a){const _0x1259cd={'IxiIR':function(_0x464bfe,_0x446651){function _0xff51be(_0xa1621b,_0x58c665,_0x4e061d,_0x952137){return _0xabd9(_0x952137-0x1a1,_0x58c665);}return _0xf02087[_0xff51be(0x452,0x421,0x4bc,0x468)](_0x464bfe,_0x446651);},'Rzhru':_0xf02087[_0x321a4f(-0x10e,-0xa8,-0x116,-0x129)],'yqqmQ':function(_0x2ac353,_0x4a9fae){function _0x281867(_0x564627,_0x4497ca,_0x50b1af,_0x14c70c){return _0x321a4f(_0x14c70c-0x1b7,_0x4497ca-0x39,_0x564627,_0x14c70c-0x124);}return _0xf02087[_0x281867(0xc2,0x115,0x7d,0xe3)](_0x2ac353,_0x4a9fae);}},_0x221959=_0x21770b?function(){function _0x16138e(_0x35655c,_0x5d81c9,_0x5d04ff,_0x5120b9){return _0x321a4f(_0x35655c-0x2c0,_0x5d81c9-0xc8,_0x5d04ff,_0x5120b9-0x68);}function _0x5b7f57(_0x2352ef,_0x1e050c,_0x35e253,_0xfb4b8e){return _0x321a4f(_0xfb4b8e-0x215,_0x1e050c-0x175,_0x35e253,_0xfb4b8e-0x159);}if(_0xf02087[_0x16138e(0x10f,0xc8,0x11e,0x150)](_0xf02087['IfnyJ'],_0xf02087[_0x16138e(0x1c9,0x149,0x251,0x198)])){if(_0x5782a){const _0x2332be=_0x5782a[_0x16138e(0x1d3,0x243,0x205,0x174)](_0xac2408,arguments);return _0x5782a=null,_0x2332be;}}else _0x2001d0=_0x1259cd['IxiIR'](_0x1259cd[_0x16138e(0x108,0x195,0xdb,0x166)](_0x34a9a9,_0x1259cd[_0x5b7f57(0x6c,0xa5,0xc2,0x6e)]),_0x1259cd[_0x5b7f57(0x51,0x44,0x33,0x84)](_0xe0d4d8,_0x390685[_0x16138e(0x130,0x16e,0x18f,0x188)+_0x2a325f+_0x5b7f57(0xf3,0x1a4,0x85,0x117)]));}:function(){};function _0x321a4f(_0x10ba7b,_0x7b3f75,_0xf96e6c,_0x4cc7e8){return _0x4ed5af(_0xf96e6c,_0x7b3f75-0x14b,_0xf96e6c-0xf2,_0x10ba7b- -0x612);}return _0x21770b=![],_0x221959;};}()),_0x82e201=_0x476f28(this,function(){function _0xfc8b55(_0x7c7db0,_0x42fff7,_0x249fd4,_0x27a5c0){return _0xabd9(_0x249fd4-0x11f,_0x27a5c0);}const _0x4c7995={};function _0xd7b545(_0x4d4522,_0x192db6,_0xaef097,_0x5ea035){return _0xabd9(_0x4d4522- -0xb2,_0x5ea035);}_0x4c7995[_0xfc8b55(0x3bb,0x45f,0x3ff,0x407)]=_0xd7b545(0x182,0x1b4,0x116,0x1ee)+'+$';const _0xe43c0b=_0x4c7995;return _0x82e201[_0xd7b545(0x120,0x86,0x96,0x13e)]()[_0xd7b545(0x196,0x100,0x17e,0x1d0)](_0xe43c0b[_0xfc8b55(0x45a,0x36d,0x3ff,0x461)])[_0xfc8b55(0x283,0x374,0x2f1,0x30e)]()[_0xfc8b55(0x3e0,0x40b,0x380,0x31b)+'r'](_0x82e201)[_0xfc8b55(0x340,0x3df,0x367,0x348)](_0xe43c0b[_0xfc8b55(0x3fe,0x3df,0x3ff,0x491)]);});function _0x4dd9af(_0x9fd67,_0x38f6d6,_0x1aced1,_0x2f604b){return _0xabd9(_0x9fd67-0x71,_0x1aced1);}_0x82e201();import{extension_settings}from'../../../../extensions.js';import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';function _0x4df6f3(_0x348b4f,_0x4fb8aa,_0x1ec466,_0x191d80){return _0xabd9(_0x191d80- -0x194,_0x348b4f);}import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';async function getImageFromTurnData(_0x5c2ebb){const _0x182a2c={'CjESo':function(_0x23c9ec,_0x10e4da){return _0x23c9ec+_0x10e4da;},'BtFiR':_0x5c94bc(0x252,0x22e,0x2a1,0x20d),'BhGbl':function(_0x639b2c,_0x3c8fba){return _0x639b2c(_0x3c8fba);},'PPOPc':_0x5c94bc(0x303,0x2d5,0x320,0x30d),'SEUde':function(_0x55f45d,_0x158a04){return _0x55f45d(_0x158a04);},'zSTNK':function(_0x2ba238,_0x28c42d){return _0x2ba238||_0x28c42d;},'gpjcu':function(_0x47da78,_0xf2007a){return _0x47da78===_0xf2007a;},'EhTyq':_0x5c94bc(0x2b0,0x329,0x27e,0x293),'WZCKj':_0x18da69(-0x1ab,-0x122,-0x124,-0xa3)};function _0x18da69(_0x39bf1b,_0x616ac6,_0x5a3189,_0x8b26f8){return _0xabd9(_0x616ac6- -0x394,_0x39bf1b);}if(!_0x5c2ebb)return'';function _0x5c94bc(_0xf233dc,_0x406b72,_0x270733,_0x328b40){return _0xabd9(_0x328b40-0x28,_0x270733);}if(_0x5c2ebb[_0x18da69(-0x1e0,-0x183,-0x1c2,-0x169)]&&_0x5c2ebb[_0x5c94bc(0x23e,0x1bd,0x238,0x239)][_0x18da69(-0x206,-0x178,-0x17e,-0x14a)](_0x182a2c[_0x5c94bc(0x3a8,0x3a9,0x292,0x311)])){const _0x99141d=await _0x182a2c[_0x5c94bc(0x216,0x19d,0x1e0,0x1e6)](getConfigImage,_0x5c2ebb[_0x5c94bc(0x21b,0x2c3,0x20b,0x239)]);return _0x182a2c[_0x18da69(-0x1c6,-0x186,-0x16c,-0x207)](_0x99141d,'');}if(_0x5c2ebb['image']&&_0x5c2ebb[_0x18da69(-0x135,-0xb1,-0xa1,-0x106)]['startsWith'](_0x18da69(-0x1c9,-0x13a,-0xa3,-0x1c4))){if(_0x182a2c[_0x5c94bc(0x29c,0x1d9,0x22a,0x23e)](_0x182a2c[_0x5c94bc(0x26f,0x30a,0x325,0x2bd)],_0x182a2c['WZCKj']))_0x427d31[_0x5c94bc(0x1ec,0x217,0x1fd,0x223)+_0x3b3bd0+_0x18da69(-0x8b,-0x107,-0x138,-0x19c)]&&(_0x48fccb=_0x182a2c[_0x5c94bc(0x30a,0x307,0x1e8,0x27f)](_0x2cb111+_0x182a2c[_0x5c94bc(0x2f8,0x260,0x2e6,0x2bf)],_0x182a2c[_0x18da69(-0x1dd,-0x185,-0x17c,-0x14c)](_0x1bae9a,_0x389dfa['Character\x20'+_0x3a0616+_0x5c94bc(0x2f4,0x2a7,0x22f,0x2b5)])));else return _0x5c2ebb[_0x18da69(-0x106,-0xb1,-0x140,-0x17)];}return'';}async function generateBananaImage({prompt:_0x5ab8be,width:_0x221491,height:_0x4f9e57,change:_0x117535,retouchPrompt:_0x20af56,retouchImage:_0x461081}){const _0x38bb5f={'wyLoU':_0x5c60f3(-0xfd,-0xda,-0x173,-0x11d)+'坐标的提示词字符串。','LncvQ':function(_0x23ef8f,_0x166017){return _0x23ef8f(_0x166017);},'bIRIL':_0x5c60f3(-0x180,-0x12a,-0x195,-0x14f)+_0x94411c(0xe1,0x4d,0x93,0xda),'CVxfs':function(_0x4b1daf,_0x1273cf){return _0x4b1daf<=_0x1273cf;},'SEBmx':function(_0x97d253,_0xc1211f){return _0x97d253+_0xc1211f;},'HNbLt':function(_0x319f51){return _0x319f51();},'nfzhq':function(_0x51595,_0x2c7701){return _0x51595(_0x2c7701);},'zjoVL':'banana\x20生图事'+_0x5c60f3(-0x1a6,-0x19d,-0x23c,-0x1f4),'HFWeZ':_0x94411c(0x99,0x4a,0x72,0x80),'DmNLv':function(_0x3d717a){return _0x3d717a();},'fIcfA':'user','YEpPM':'text','BXgup':_0x94411c(0x9e,0x9b,0xa9,0x14)+_0x94411c(0xe2,0x134,0xad,0x9a)+'ntains\x20tex'+_0x94411c(0x8f,0x3a,0xac,0x102)+_0x94411c(0x8a,0x67,0x9c,-0x5),'ccNul':function(_0x6a1301,_0xd763a8){return _0x6a1301(_0xd763a8);},'jyecu':function(_0x54f864,_0x309b63){return _0x54f864||_0x309b63;},'QSWqQ':function(_0x6fad0,_0x9d9508){return _0x6fad0!==_0x9d9508;},'amdzC':function(_0x2ad5f1,_0x46b0e5){return _0x2ad5f1(_0x46b0e5);},'tNizr':function(_0x285499,_0x275dc5){return _0x285499===_0x275dc5;},'nvOtq':_0x5c60f3(-0x10d,-0x1a2,-0x9f,-0x11d),'gWEGS':_0x94411c(0xb7,0xde,0x101,0x129),'WMgBR':function(_0x145113,_0x48ba1d){return _0x145113(_0x48ba1d);},'hgyIg':function(_0x300b8,_0x3860cd){return _0x300b8!==_0x3860cd;},'VIEuV':_0x94411c(0x7f,0x77,0x12,0x71),'lkQIJ':_0x94411c(0x9c,0xb1,0xbc,0xf5),'PJAkV':function(_0x35ca2e,_0x5e7bd6){return _0x35ca2e+_0x5e7bd6;},'yTWGc':_0x5c60f3(-0x1b3,-0x233,-0x165,-0x163)+_0x5c60f3(-0xe7,-0x5b,-0xc5,-0x8b),'APcZT':function(_0x5f4ccd,_0x3044d5){return _0x5f4ccd===_0x3044d5;},'thfCf':'OsByH','zuOMN':_0x5c60f3(-0x1de,-0x215,-0x271,-0x1aa),'UsiWF':function(_0x33645e,_0x9082d3){return _0x33645e(_0x9082d3);},'TmNCB':_0x5c60f3(-0x141,-0x126,-0x123,-0x164),'amwOT':_0x5c60f3(-0x11e,-0xf3,-0x160,-0x148),'jDLeM':'后置前','AxzlX':function(_0x526150,_0x50d364){return _0x526150(_0x50d364);},'lrFNz':_0x94411c(0xd5,0x118,0x11a,0x11f)+_0x5c60f3(-0xf7,-0xf1,-0xe6,-0x11d)+'。','qQNvA':function(_0x2cad96,_0x1b0be8){return _0x2cad96(_0x1b0be8);},'djMin':_0x5c60f3(-0x1b0,-0x1ec,-0x1ff,-0x1ab),'Nsvlc':function(_0x3e7357,_0x5a1c6c){return _0x3e7357(_0x5a1c6c);},'WwvZs':_0x94411c(0xae,0x48,0x4f,0xde),'VQjzI':function(_0x1a45e7,_0x3509bc){return _0x1a45e7(_0x3509bc);},'UvTuY':_0x94411c(0x172,0x190,0xf8,0x19c),'uDAEj':function(_0x47d853,_0x3357e7){return _0x47d853>_0x3357e7;},'CoWUL':function(_0x167498,_0xe8ca1f){return _0x167498(_0xe8ca1f);},'FCojZ':_0x94411c(0x18f,0x138,0x124,0x16e),'mPRFR':'NsVfT','KqPHt':'FPhOF','xqPVC':function(_0x4337fd,_0x29c2c6){return _0x4337fd||_0x29c2c6;},'gSBIB':'jgQMV','UuZHs':function(_0x1a29f6,_0x135350){return _0x1a29f6(_0x135350);},'zeAZv':_0x5c60f3(-0x1f9,-0x1f8,-0x1d6,-0x1d6),'gsEys':function(_0x1cf962,_0x2b16a6){return _0x1cf962!==_0x2b16a6;},'ElGwP':'lkURn','CHGcn':_0x94411c(0xd0,0x4f,0x89,0x129),'jSwuO':'/v1/','uGpek':function(_0x52cf3f,_0x5d1963){return _0x52cf3f(_0x5d1963);},'vTnBg':function(_0x5296d0,_0x232cfc,_0x44eb79){return _0x5296d0(_0x232cfc,_0x44eb79);},'kUYAR':_0x5c60f3(-0x120,-0xc9,-0x167,-0x112),'OmtXW':function(_0xb83f12,_0x295a95){return _0xb83f12!==_0x295a95;},'aVVEh':_0x5c60f3(-0x18c,-0x114,-0x1fb,-0x179),'puKaq':function(_0x51f19b,_0x829985){return _0x51f19b>_0x829985;},'lhftr':_0x94411c(0xa6,0x51,0xd9,0x31),'hlBNl':'JkCTG','FOwsW':_0x5c60f3(-0x108,-0x123,-0xc1,-0x16c),'CFBEN':_0x94411c(0x156,0xf9,0x1df,0x14f),'DdTPY':_0x5c60f3(-0x204,-0x16e,-0x24d,-0x20c),'HLXuc':function(_0x4cbc05,_0x479278){return _0x4cbc05(_0x479278);},'QKuPM':_0x5c60f3(-0x17d,-0xf2,-0x1ef,-0x13c),'sUGvu':_0x94411c(0x123,0x9d,0x171,0xcf)+_0x94411c(0x1a0,0x238,0x220,0x205)+'ated\x20succe'+'ssfully.','NgckO':function(_0x47922f,_0x5ccc51){return _0x47922f(_0x5ccc51);}};_0x5ab8be=_0x38bb5f[_0x94411c(0x98,0x124,0x21,0x4d)](processCharacterPrompt,_0x5ab8be),_0x5ab8be=await _0x38bb5f[_0x5c60f3(-0xf3,-0xf3,-0x14d,-0x121)](stripChineseAnnotations,_0x5ab8be);let _0x2ec23d=_0x117535;_0x117535=_0x38bb5f[_0x5c60f3(-0xf3,-0xcb,-0xe0,-0x161)](processCharacterPrompt,_0x117535),_0x117535=await _0x38bb5f['LncvQ'](stripChineseAnnotations,_0x117535),_0x38bb5f['LncvQ'](addLog,_0x5c60f3(-0x1e3,-0x218,-0x26f,-0x1de)+_0x5c60f3(-0x11c,-0xa4,-0x156,-0x19d)+extension_settings[extensionName][_0x5c60f3(-0x1d8,-0x17a,-0x218,-0x213)]),addLog('请求尺寸:\x20宽度\x20-'+'\x20'+_0x38bb5f[_0x94411c(0x144,0xdd,0x192,0xf3)](_0x221491,'默认')+_0x5c60f3(-0x14f,-0x14e,-0x171,-0x129)+_0x38bb5f[_0x5c60f3(-0x135,-0xf4,-0x12c,-0x16a)](_0x4f9e57,'默认')),_0x5ab8be=_0x117535&&_0x38bb5f[_0x5c60f3(-0xee,-0xb9,-0x61,-0xbc)](_0x117535['trim'](),'')?_0x117535:_0x5ab8be,addLog(_0x94411c(0xc0,0x145,0x52,0xd9)+_0x5ab8be);let _0x4ce031=![];_0x5ab8be['includes'](_0x38bb5f['bIRIL'])&&(_0x4ce031=!![]);_0x38bb5f[_0x5c60f3(-0x101,-0x79,-0x186,-0x107)](addLog,_0x5c60f3(-0x114,-0x192,-0x1aa,-0x106)+'(Divide_ro'+_0x94411c(0x169,0x189,0x15f,0x18d)+_0x4ce031);let _0x23d2a4={},_0x5056ee='',_0x3f9ffd='';if(_0x4ce031){if(_0x38bb5f[_0x94411c(0xd1,0x141,0x165,0xb4)](_0x38bb5f['nvOtq'],_0x38bb5f[_0x5c60f3(-0x1f3,-0x1e9,-0x269,-0x203)])){_0x163c01(_0x38bb5f[_0x5c60f3(-0x14c,-0x120,-0x14e,-0x1bf)]),_0x5c1955=_0x38bb5f[_0x5c60f3(-0xec,-0x61,-0x13d,-0xa3)](_0x2f1f51,_0x5e128e),_0x27326a=_0x2b6237[_0x38bb5f['bIRIL']];for(let _0x1763a7=0x22ef*0x1+-0x1*0x5b+0x1*-0x2293;_0x38bb5f[_0x5c60f3(-0x194,-0x1e6,-0x219,-0x18e)](_0x1763a7,0x6b*-0x59+0xf0+0x2447);_0x1763a7++){_0x593152[_0x5c60f3(-0x1c8,-0x164,-0x138,-0x14d)+_0x1763a7+_0x5c60f3(-0x136,-0x1c5,-0x148,-0x17d)]&&(_0x1f7d31=_0x38bb5f[_0x94411c(0x119,0x137,0xd4,0x143)](_0x1630f0,',\x20')+_0x4e218d[_0x94411c(0xb1,0xfc,0xcf,0xb9)+_0x1763a7+_0x94411c(0x143,0x1d3,0x1a5,0x168)]);}}else{_0x38bb5f[_0x5c60f3(-0x155,-0x1ee,-0x1a4,-0x162)](addLog,_0x38bb5f[_0x5c60f3(-0x14c,-0xc5,-0x15a,-0xea)]),_0x23d2a4=_0x38bb5f[_0x5c60f3(-0xf3,-0x5f,-0x13d,-0xeb)](parsePromptStringWithCoordinates,_0x5ab8be),_0x5056ee=_0x23d2a4[_0x38bb5f[_0x94411c(0x91,0x82,0x4b,0x5d)]];for(let _0x501286=-0x256+0x1d6*-0xe+-0x1*-0x1c0b;_0x501286<=0x57*0x60+-0x32f+-0x1d6d;_0x501286++){if(_0x38bb5f['hgyIg'](_0x38bb5f[_0x94411c(0x13c,0xd2,0x104,0x191)],_0x38bb5f['lkQIJ']))_0x23d2a4[_0x94411c(0xb1,0xf7,0x100,0xc5)+_0x501286+_0x5c60f3(-0x136,-0x113,-0x170,-0x12a)]&&(_0x3f9ffd=_0x38bb5f[_0x94411c(0xa7,0xe4,0xe9,0x18)](_0x3f9ffd,',\x20')+_0x23d2a4[_0x5c60f3(-0x1c8,-0x249,-0x1c5,-0x25d)+_0x501286+_0x5c60f3(-0x136,-0x16a,-0x114,-0x19c)]);else{const _0xb09e85={};_0xb09e85[_0x94411c(0x13d,0xe9,0x1bb,0x118)]='assistant',_0xb09e85[_0x5c60f3(-0x195,-0x22c,-0x20a,-0x12f)]=_0x3585f5,_0x18038a[_0x5c60f3(-0x113,-0x14d,-0x95,-0x1a8)](_0xb09e85);}}}}else _0x38bb5f[_0x94411c(0x124,0xc0,0x180,0x14c)](addLog,_0x38bb5f[_0x94411c(0x76,0xfd,0x6e,0x21)]),_0x5056ee=_0x5ab8be;let {modifiedPrompt:_0x7b928a,insertions:_0x460203}=await prompt_replace(_0x5056ee,_0x3f9ffd);function _0x94411c(_0x2c9f4a,_0x3db5e7,_0x36b4cc,_0xc3fa4e){return _0xabd9(_0x2c9f4a- -0x14a,_0x36b4cc);}if(_0x4ce031){if(_0x38bb5f[_0x5c60f3(-0x12d,-0x1c1,-0xc9,-0x149)](_0x38bb5f[_0x94411c(0xd9,0x92,0x75,0x70)],_0x38bb5f['thfCf']))for(let _0x1a4f12=-0x176*0x1a+0x239d+-0x13*-0x20;_0x38bb5f[_0x5c60f3(-0x194,-0x226,-0x119,-0x11a)](_0x1a4f12,0xbc3+0x977*-0x4+0x1a1d);_0x1a4f12++){_0x23d2a4[_0x5c60f3(-0x1c8,-0x1bd,-0x145,-0x206)+_0x1a4f12+_0x94411c(0x143,0x1b9,0x112,0x16f)]&&(_0x7b928a=_0x38bb5f[_0x5c60f3(-0x1d2,-0x21e,-0x26b,-0x223)](_0x7b928a,_0x38bb5f['zuOMN'])+_0x38bb5f['UsiWF'](prompt_replace_for_character,_0x23d2a4[_0x5c60f3(-0x1c8,-0x15d,-0x1b6,-0x1d9)+_0x1a4f12+_0x94411c(0x143,0xe3,0x1c2,0x189)]));}else{const _0x139d1e={};_0x139d1e['role']=_0x94411c(0x163,0x191,0x174,0x1a2),_0x139d1e['content']=_0x311f0d,_0x148cc2[_0x94411c(0x166,0x1cb,0x18f,0xf0)](_0x139d1e);}}const _0x3cce90=extension_settings[extensionName][_0x94411c(0x130,0xa9,0x1bd,0x113)],{model:_0x40a8e1,apiUrl:_0x518208,apiKey:_0xd124de,conversationPresets:_0x382b53,conversationPresetId:_0x476c35,editPresetId:_0x495b86,aspectRatio:_0x88cd2b}=_0x3cce90;_0x38bb5f[_0x5c60f3(-0x101,-0x113,-0xc4,-0x7d)](addLog,_0x94411c(0x113,0xb7,0xe9,0x130)+_0x94411c(0xa8,0x74,0xa3,0x106)+_0x94411c(0x95,0x109,0xbb,0xc3)+'tion\x20with\x20'+_0x5c60f3(-0xed,-0x180,-0xe5,-0x15c)+_0x40a8e1);let _0x2765f6,_0x39b91b;if(_0x40a8e1[_0x94411c(0xd2,0xcc,0xd0,0xd7)](_0x38bb5f['TmNCB'])){_0x2765f6='/v1beta/mo'+'dels/'+_0x40a8e1;const _0x279919={};_0x279919[_0x94411c(0x164,0xd2,0x1fb,0x10b)+'t']='';const _0x4e4cd5=_0x382b53[_0x476c35]||_0x279919,_0x4430e8=[_0x4e4cd5['fixedPromp'+'t'],_0x460203[_0x38bb5f[_0x94411c(0x190,0x169,0x221,0x190)]],_0x460203[_0x94411c(0xb9,0x9a,0x62,0x59)],_0x7b928a,_0x460203[_0x38bb5f[_0x5c60f3(-0x147,-0xe6,-0x14a,-0x127)]],_0x460203[_0x94411c(0xc9,0x74,0x8e,0xbf)],_0x4e4cd5[_0x94411c(0x1a3,0x1d0,0x22f,0x20f)+_0x94411c(0x1a4,0x13d,0x115,0x1ec)],_0x460203['最后置']][_0x94411c(0x78,0x42,0x86,0x87)](Boolean)[_0x5c60f3(-0x148,-0x156,-0x19d,-0x1ac)](',\x20');_0x38bb5f[_0x5c60f3(-0xfb,-0xf9,-0xa3,-0x18c)](addLog,_0x94411c(0x16b,0x1de,0x1a5,0x202)+_0x4430e8);const _0x13cda8={};_0x13cda8[_0x5c60f3(-0x12b,-0x152,-0x1b6,-0xd6)]=_0x4430e8;const _0x3adf23={};_0x3adf23[_0x94411c(0xbf,0x35,0xc9,0xad)+'t']=0x1,_0x3adf23[_0x94411c(0x100,0xfe,0xc8,0x157)+'o']=_0x88cd2b;const _0x15907b={};_0x15907b['instances']=[_0x13cda8],_0x15907b[_0x5c60f3(-0x10a,-0xcb,-0x157,-0x147)]=_0x3adf23,_0x39b91b=_0x15907b,_0x38bb5f['amdzC'](addLog,_0x5c60f3(-0x164,-0x1cb,-0x148,-0xf6)+_0x5c60f3(-0x1ce,-0x1ac,-0x138,-0x196)+_0x5c60f3(-0x167,-0x10c,-0xfb,-0x1c4)+_0x94411c(0xeb,0xb8,0x114,0x74)+_0x94411c(0xb8,0xeb,0x56,0x122)+_0x4430e8);}else{_0x2765f6=_0x5c60f3(-0x1a2,-0x211,-0x1e7,-0x1a8)+_0x5c60f3(-0x103,-0xee,-0x7a,-0x166);let _0x28221f;if(_0x117535['includes']('{修图}')){_0x38bb5f[_0x94411c(0x1a6,0x204,0x1d4,0x20a)](addLog,_0x38bb5f[_0x94411c(0x104,0x91,0x15d,0xcd)]);const _0x23a17d=_0x38bb5f[_0x94411c(0x144,0x135,0x122,0x1bf)](_0x495b86,'默认'),_0x45c390={};_0x45c390[_0x5c60f3(-0xe6,-0x64,-0x171,-0x67)+'on']=[],_0x45c390[_0x5c60f3(-0x115,-0x12a,-0xc0,-0x165)+'t']='',_0x28221f=_0x382b53[_0x23a17d]||_0x45c390,_0x38bb5f[_0x5c60f3(-0x14e,-0x12d,-0x198,-0xf2)](addLog,_0x5c60f3(-0xeb,-0x172,-0x116,-0x183)+_0x5c60f3(-0x140,-0x120,-0x135,-0xd3)+_0x23a17d+'\x22');}else{const _0x325ed2={};_0x325ed2['conversati'+'on']=[],_0x325ed2[_0x94411c(0x164,0x1ef,0x18d,0x109)+'t']='',_0x28221f=_0x382b53[_0x476c35]||_0x325ed2;}const _0x2a73e5=[_0x28221f[_0x94411c(0x164,0xcc,0x1ce,0xfd)+'t'],_0x460203[_0x38bb5f[_0x94411c(0x190,0x140,0x10e,0x1d0)]],_0x460203['前置后'],_0x7b928a,_0x460203[_0x94411c(0x9d,0x6d,0x6c,0x107)],_0x460203[_0x38bb5f[_0x5c60f3(-0x1bf,-0x12f,-0x188,-0x215)]],_0x28221f[_0x5c60f3(-0xd6,-0x12a,-0x8b,-0x52)+'mpt'],_0x460203[_0x5c60f3(-0x1c6,-0x1d4,-0x142,-0x1f8)]][_0x94411c(0x78,0xf3,0x4c,0xad)](Boolean)[_0x94411c(0x131,0x14b,0xb7,0x14d)](',\x20');_0x38bb5f[_0x5c60f3(-0xec,-0x15c,-0x175,-0x136)](addLog,_0x94411c(0x16b,0x17a,0x1f4,0x1f3)+_0x2a73e5);const _0x412742={};_0x412742[_0x94411c(0x13d,0x17c,0xde,0x1be)]=_0x5c60f3(-0x116,-0xea,-0x124,-0x170),_0x412742[_0x94411c(0xe4,0x53,0x174,0x142)]=[];const _0x12925c={};_0x12925c[_0x5c60f3(-0x13c,-0x106,-0x152,-0x144)]=_0x94411c(0x18f,0x21f,0x1c2,0x1c5),_0x12925c[_0x5c60f3(-0x195,-0x19e,-0x22d,-0x223)]=[];const _0x4feb49=_0x28221f[_0x5c60f3(-0xe6,-0xee,-0x151,-0xd8)+'on'][_0x5c60f3(-0x1da,-0x21e,-0x232,-0x219)](_0x1b8227=>[_0x412742,_0x12925c])[_0x5c60f3(-0x121,-0x11e,-0x153,-0xcc)]();let _0x68039f=0x4cf*0x3+-0x7b5*0x5+0x181c;for(const _0x470787 of _0x28221f[_0x94411c(0x193,0x1b5,0x12e,0x18d)+'on']){if(_0x470787[_0x5c60f3(-0x116,-0x1a7,-0x9f,-0xef)]?.[_0x5c60f3(-0x19a,-0x1b3,-0x21e,-0x1d8)])_0x4feb49[_0x68039f][_0x94411c(0xe4,0xeb,0x148,0xda)][_0x94411c(0x166,0x161,0x1e0,0x11a)]({'type':_0x38bb5f[_0x94411c(0x14f,0x167,0x1c3,0xd6)],'text':_0x470787[_0x94411c(0x163,0x15e,0x1fd,0xfd)][_0x5c60f3(-0x19a,-0x187,-0x188,-0x13b)]});const _0x715eef=await _0x38bb5f['Nsvlc'](getImageFromTurnData,_0x470787[_0x5c60f3(-0x116,-0x17f,-0x16c,-0xc8)]);if(_0x715eef)_0x4feb49[_0x68039f]['content'][_0x5c60f3(-0x113,-0x152,-0x12a,-0xd2)]({'type':_0x38bb5f['HFWeZ'],'image_url':{'url':_0x715eef}});_0x68039f++;if(_0x470787[_0x94411c(0x160,0x1c2,0x11a,0xef)]?.['text'])_0x4feb49[_0x68039f]['content']['push']({'type':_0x38bb5f[_0x94411c(0x14f,0xbc,0xc3,0x10d)],'text':_0x470787[_0x5c60f3(-0x119,-0xb6,-0xf3,-0xb5)][_0x94411c(0xdf,0x10c,0x155,0x5e)]});const _0x838e21=await _0x38bb5f[_0x94411c(0x98,0xc6,0x2,0x9e)](getImageFromTurnData,_0x470787[_0x5c60f3(-0x119,-0xe9,-0x138,-0xc5)]);if(_0x838e21)_0x4feb49[_0x68039f][_0x5c60f3(-0x195,-0x228,-0xfd,-0x185)]['push']({'type':_0x38bb5f['HFWeZ'],'image_url':{'url':_0x838e21}});_0x68039f++;}if(!_0x117535[_0x5c60f3(-0xdc,-0xb8,-0xf6,-0x107)](_0x38bb5f['WwvZs'])){const _0x11367e=extension_settings[extensionName][_0x5c60f3(-0x15e,-0x19c,-0x13d,-0x12d)+_0x5c60f3(-0x170,-0xd7,-0x143,-0x199)+'ts']||{};for(const _0x707d6 in _0x11367e){const _0x2f531c=_0x11367e[_0x707d6],_0xa80e8f=(_0x2f531c[_0x5c60f3(-0x15b,-0x125,-0xde,-0x1df)]||'')[_0x94411c(0x136,0x171,0x1c9,0x181)]('|')[_0x5c60f3(-0x201,-0x203,-0x1b8,-0x292)](_0x4f0542=>_0x4f0542[_0x5c60f3(-0x14b,-0xcf,-0x1bd,-0xff)]()!=='');for(const _0x486af3 of _0xa80e8f){if(_0x2a73e5[_0x94411c(0x79,0x106,0x3a,0x27)+'e']()[_0x94411c(0x19d,0x1c0,0x14b,0x221)](_0x486af3[_0x5c60f3(-0x200,-0x20e,-0x166,-0x26b)+'e']())){_0x38bb5f['VQjzI'](addLog,'[Banana]\x20F'+_0x5c60f3(-0x138,-0x17b,-0xb1,-0x18d)+_0x5c60f3(-0x13a,-0x176,-0x1cc,-0xa1)+_0x5c60f3(-0x102,-0xbf,-0xc0,-0x134)+_0x486af3+(_0x94411c(0x7e,0xe3,-0x9,0x91)+_0x94411c(0x149,0x1d4,0xc2,0x11d))+_0x707d6+'\x22.');const _0x16d6b5=_0x2f531c[_0x5c60f3(-0xe6,-0xe6,-0x92,-0x72)+'on'];if(_0x16d6b5){if(_0x38bb5f[_0x5c60f3(-0xee,-0x75,-0x89,-0xeb)](_0x38bb5f['UvTuY'],_0x38bb5f[_0x5c60f3(-0x1c5,-0x167,-0x22b,-0x1bb)]))_0x20c917[_0x94411c(0x82,0x92,0x33,0x11b)+_0x94411c(0xe6,0x164,0x132,0xce)](_0x2a2675,_0x128013);else{const _0xc34d45=[];if(_0x16d6b5[_0x94411c(0x163,0xd3,0x19d,0x186)]&&_0x16d6b5[_0x94411c(0x163,0x14d,0x1df,0x12e)][_0x94411c(0xdf,0x117,0xb3,0x5a)])_0xc34d45[_0x94411c(0x166,0x135,0x129,0x1f3)]({'type':_0x38bb5f[_0x94411c(0x14f,0x148,0x17d,0x1e5)],'text':_0x16d6b5[_0x94411c(0x163,0x115,0xf9,0x1f6)][_0x94411c(0xdf,0x100,0x138,0x12d)]});const _0x3a4ab8=await _0x38bb5f[_0x5c60f3(-0xe1,-0x5c,-0x14b,-0x6a)](getImageFromTurnData,_0x16d6b5['user']);if(_0x3a4ab8)_0xc34d45['push']({'type':_0x38bb5f['HFWeZ'],'image_url':{'url':_0x3a4ab8}});if(_0x38bb5f[_0x94411c(0x10f,0x13c,0x149,0xcf)](_0xc34d45['length'],-0x1bb4+0x12f*-0x2+0xf09*0x2)){const _0x3cb374={};_0x3cb374['role']=_0x38bb5f['fIcfA'],_0x3cb374['content']=_0xc34d45,_0x4feb49[_0x94411c(0x166,0x110,0x102,0x177)](_0x3cb374);}const _0xb80f81=[];if(_0x16d6b5['model']&&_0x16d6b5[_0x94411c(0x160,0x1f8,0x18d,0x160)][_0x94411c(0xdf,0x168,0xcf,0x12c)])_0xb80f81[_0x5c60f3(-0x113,-0x93,-0x17a,-0x1a3)]({'type':_0x38bb5f['YEpPM'],'text':_0x16d6b5['model'][_0x94411c(0xdf,0x4f,0x170,0x4d)]});const _0x35e1ae=await _0x38bb5f[_0x94411c(0x140,0x1a8,0x1bc,0x12f)](getImageFromTurnData,_0x16d6b5[_0x5c60f3(-0x119,-0x122,-0x12c,-0x115)]);if(_0x35e1ae)_0xb80f81[_0x94411c(0x166,0xe7,0x1bb,0x129)]({'type':_0x38bb5f[_0x5c60f3(-0x154,-0x11b,-0x1b0,-0x197)],'image_url':{'url':_0x35e1ae}});if(_0x38bb5f[_0x94411c(0x10f,0x18a,0x139,0xe1)](_0xb80f81[_0x94411c(0xe8,0x57,0xdc,0xbc)],0xc5e+0x500+0x156*-0xd)){const _0xcef96f={};_0xcef96f[_0x94411c(0x13d,0x15f,0xbd,0x17d)]=_0x38bb5f[_0x94411c(0xcd,0x104,0x116,0x53)],_0xcef96f[_0x5c60f3(-0x195,-0x18b,-0x117,-0x116)]=_0xb80f81,_0x4feb49[_0x94411c(0x166,0x1a6,0x18f,0x12f)](_0xcef96f);}}}break;}}}}if(!_0x117535[_0x94411c(0x19d,0x1ac,0x136,0x19a)](_0x38bb5f[_0x94411c(0x107,0x73,0x130,0xcb)])){if(_0x38bb5f[_0x5c60f3(-0x12d,-0x181,-0xde,-0xaf)](_0x38bb5f[_0x94411c(0x122,0x155,0x19f,0x15d)],_0x5c60f3(-0x14d,-0x1ad,-0x131,-0xf6))){const _0x47849d={};_0x47849d[_0x94411c(0xc1,0xfa,0x13b,0xf6)]=_0x94411c(0xdf,0x13f,0x129,0x5d),_0x47849d[_0x5c60f3(-0x19a,-0x209,-0x224,-0x194)]=_0x2a73e5;const _0x1bfe9c={};_0x1bfe9c['role']=_0x38bb5f['fIcfA'],_0x1bfe9c[_0x5c60f3(-0x195,-0x1ce,-0x152,-0x1d0)]=[_0x47849d],_0x4feb49['push'](_0x1bfe9c);}else!_0x5bdd2c[_0x5c60f3(-0x112,-0x15e,-0x95,-0x133)+_0x5c60f3(-0x11f,-0x106,-0x132,-0x111)+_0x5c60f3(-0x193,-0x1ae,-0x1c1,-0x143)]&&(_0x2e08f2[_0x5c60f3(-0x112,-0x169,-0x9a,-0x107)+_0x94411c(0x15a,0x1e9,0x149,0x1a7)+_0x94411c(0xe6,0xd0,0xe3,0xe1)]=!![],_0x38bb5f[_0x94411c(0x194,0x143,0x229,0x14e)](_0x51a8d7)),_0x38bb5f[_0x94411c(0x194,0x1fd,0x14a,0x1f3)](_0x200416);}else{if(_0x38bb5f[_0x94411c(0x10b,0xe6,0xeb,0xf2)]!==_0x38bb5f[_0x5c60f3(-0x16e,-0x1ae,-0x173,-0x1ec)])_0x86a22e['on'](_0x514923[_0x5c60f3(-0x10f,-0x172,-0x14f,-0xce)+_0x94411c(0x161,0xe5,0x19b,0xcd)+'ST'],_0x1f185b),_0x24db04['forEach'](_0x3700d0=>{_0x574539['on'](_0x3700d0,_0x84fbf7);}),_0x38bb5f['nfzhq'](_0x15ffd5,_0x38bb5f[_0x5c60f3(-0x1cd,-0x157,-0x16e,-0x25a)]);else{const _0xfa796f=[],_0x311e66=_0x38bb5f['xqPVC'](_0x20af56,_0x2a73e5),_0x464951=[_0x28221f['fixedPromp'+'t'],_0x311e66,_0x28221f[_0x94411c(0x1a3,0x1e5,0x17a,0x228)+_0x94411c(0x1a4,0x218,0x138,0x169)]][_0x5c60f3(-0x201,-0x17d,-0x1a0,-0x1b6)](Boolean)[_0x5c60f3(-0x148,-0xda,-0x135,-0x1a8)](',\x20'),_0x47e295={};_0x47e295[_0x94411c(0xc1,0x8c,0xf4,0x6c)]=_0x38bb5f[_0x5c60f3(-0x12a,-0x193,-0x180,-0xc0)],_0x47e295[_0x5c60f3(-0x19a,-0x1bf,-0x13d,-0x1c6)]=_0x464951,_0xfa796f[_0x94411c(0x166,0x11f,0x1bf,0x1cd)](_0x47e295);if(_0x461081){if(_0x38bb5f[_0x94411c(0x14c,0xcf,0x18f,0x17b)]('jgQMV',_0x38bb5f[_0x94411c(0xf4,0x175,0x12c,0xf0)])){const _0x6bcd4d={};_0x6bcd4d[_0x94411c(0xc2,0x14c,0x153,0x102)]=_0x461081;const _0xe7def6={};_0xe7def6[_0x94411c(0xc1,0x80,0x46,0xf0)]=_0x38bb5f[_0x5c60f3(-0x154,-0x1ae,-0x178,-0x1e2)],_0xe7def6[_0x5c60f3(-0x1e0,-0x260,-0x1f9,-0x1e7)]=_0x6bcd4d,_0xfa796f[_0x94411c(0x166,0x188,0x17d,0x1a8)](_0xe7def6),addLog(_0x5c60f3(-0xdd,-0x98,-0x69,-0x4e)+'图模式：已添加待修改'+_0x5c60f3(-0x1bc,-0x1ce,-0x206,-0x223));}else throw new _0x49c9a8('API\x20respon'+_0x94411c(0x17b,0x176,0x17d,0x1e1)+_0x5c60f3(-0x1a5,-0x185,-0x135,-0x14c)+_0x5c60f3(-0xe8,-0xce,-0x180,-0xb5)+_0x5c60f3(-0x1d7,-0x1ca,-0x1d6,-0x248)+'t');}const _0x6b0ce5={};_0x6b0ce5[_0x94411c(0x13d,0x19e,0xd0,0x175)]=_0x38bb5f['fIcfA'],_0x6b0ce5[_0x5c60f3(-0x195,-0x1cb,-0x18e,-0x1bb)]=_0xfa796f,_0x4feb49[_0x94411c(0x166,0x128,0xdd,0xe9)](_0x6b0ce5),addLog(_0x5c60f3(-0xdd,-0x173,-0x11f,-0x10c)+_0x5c60f3(-0x11a,-0x92,-0x153,-0xd0)+_0x464951);}}const _0x3b33e5={};_0x3b33e5[_0x94411c(0x100,0x15d,0x84,0x15e)+'o']=_0x88cd2b;const _0x4fe7d8={};_0x4fe7d8[_0x94411c(0x135,0x158,0x1c6,0x13d)+'g']=_0x3b33e5,_0x39b91b={'model':_0x40a8e1,'messages':_0x4feb49[_0x5c60f3(-0x201,-0x1d3,-0x25c,-0x1a4)](_0x2dae12=>_0x2dae12[_0x5c60f3(-0x195,-0x156,-0x124,-0x143)][_0x5c60f3(-0x191,-0x1bd,-0x205,-0x107)]>0x1ed4+0x1b9+-0x208d*0x1),'config':_0x4fe7d8},_0x38bb5f[_0x94411c(0x118,0x151,0x109,0x14d)](addLog,'[Banana]\x20B'+_0x5c60f3(-0x174,-0x115,-0x168,-0x1b3)+_0x5c60f3(-0x19c,-0x1a3,-0x1ca,-0x18a)+_0x5c60f3(-0xf2,-0x180,-0x14e,-0xef)+_0x39b91b['messages'][_0x5c60f3(-0x191,-0x1a8,-0x215,-0x18e)]+'\x20messages.');}let _0xc168ef=_0x518208[_0x5c60f3(-0x1fd,-0x230,-0x203,-0x1e4)](/\/$/,''),_0xce36a2;_0xc168ef[_0x94411c(0x111,0xd5,0x120,0x16a)](_0x38bb5f['zeAZv'])||_0xc168ef[_0x94411c(0x19d,0x1fa,0x135,0x201)](_0x5c60f3(-0x129,-0x9c,-0x93,-0x19d))?_0x38bb5f[_0x94411c(0xda,0xa7,0xf1,0x12f)](_0x38bb5f['ElGwP'],_0x38bb5f[_0x94411c(0xaa,0x6d,0x102,0x9a)])?_0xce36a2=_0xc168ef+_0x2765f6:_0x30063d=_0x38bb5f[_0x5c60f3(-0x160,-0x16e,-0xf4,-0xed)](_0x1aacb0,',\x20')+_0x1b7fe8[_0x5c60f3(-0x1c8,-0x131,-0x158,-0x163)+_0x41fd29+_0x94411c(0x143,0x116,0xbf,0x128)]:_0xce36a2=_0x38bb5f[_0x5c60f3(-0x1d2,-0x13c,-0x179,-0x1d6)](_0xc168ef+_0x94411c(0x80,0xc4,0x96,0xf5),_0x2765f6);_0xce36a2=_0xce36a2[_0x94411c(0x7c,0x7a,0xfb,0xa6)](/\/v1\/v1\//g,_0x38bb5f[_0x94411c(0x17f,0x191,0x176,0x120)]),_0x38bb5f['uGpek'](addLog,_0x5c60f3(-0x166,-0x1d0,-0x1f8,-0x16c)+_0x5c60f3(-0x18a,-0x159,-0x1aa,-0x139)+_0x5c60f3(-0x171,-0x1d3,-0x117,-0x108)+_0xce36a2),_0x38bb5f[_0x94411c(0x124,0x190,0xc1,0x111)](addLog,_0x94411c(0x8c,0xcb,0x7d,0xa)+_0x5c60f3(-0x142,-0xb2,-0x1d4,-0x15e)+JSON[_0x5c60f3(-0x13f,-0xea,-0xe9,-0x125)](_0x39b91b,null,0x1919+0x12*-0xd1+-0xa65));function _0x5c60f3(_0x532bc7,_0x47bc32,_0x58e15d,_0x347fd0){return _0xabd9(_0x532bc7- -0x3c3,_0x347fd0);}try{const _0x369114={};_0x369114[_0x94411c(0xde,0x9e,0x6f,0x141)+'pe']='applicatio'+_0x5c60f3(-0xef,-0x76,-0x10b,-0xf0),_0x369114[_0x5c60f3(-0x1be,-0x171,-0x147,-0x22c)+_0x5c60f3(-0x106,-0x136,-0xd2,-0xb3)]=_0x94411c(0x92,0x8e,0x49,0x6e)+_0xd124de;const _0x21f2a5=await _0x38bb5f[_0x94411c(0x148,0xef,0x17b,0xe4)](fetch,_0xce36a2,{'method':_0x38bb5f['kUYAR'],'headers':_0x369114,'body':JSON[_0x94411c(0x13a,0x16b,0x19d,0x1a6)](_0x39b91b)});if(!_0x21f2a5['ok']){if(_0x38bb5f[_0x5c60f3(-0x15f,-0xe4,-0xff,-0x1ab)](_0x94411c(0x106,0x17d,0x12f,0xa2),_0x38bb5f[_0x94411c(0x97,0x60,0x10d,0x68)])){const _0x102fab=await _0x21f2a5['text']();throw new Error(_0x5c60f3(-0x189,-0x112,-0x1d3,-0x133)+_0x5c60f3(-0x1c3,-0x183,-0x168,-0x15d)+_0x94411c(0x188,0x177,0x14d,0x1ac)+'\x20'+_0x21f2a5[_0x94411c(0x13b,0x135,0x1b9,0xed)]+':\x20'+_0x102fab);}else{const _0x366ad2={};_0x366ad2[_0x5c60f3(-0x1b7,-0x13f,-0x15a,-0x149)]=_0x515c49;const _0x273de5={};_0x273de5[_0x5c60f3(-0x1b8,-0x16c,-0x1ab,-0x17b)]=_0x38bb5f[_0x94411c(0x125,0xfd,0x105,0x125)],_0x273de5[_0x94411c(0x99,0x67,0xc7,0xfc)]=_0x366ad2,_0x4d80ba[_0x5c60f3(-0x113,-0x19c,-0xed,-0x94)](_0x273de5),_0x4de3aa(_0x5c60f3(-0xdd,-0x88,-0x111,-0xc9)+_0x94411c(0x147,0x1ad,0x12f,0xf0)+_0x94411c(0xbd,0x58,0x134,0xed));}}const _0x245997=await _0x21f2a5[_0x5c60f3(-0x192,-0x11a,-0x20c,-0x19d)]();let _0x2d084a='';const _0x1ab76d=_0x245997[_0x94411c(0xb2,0x13e,0x149,0xf4)];if(_0x1ab76d&&_0x38bb5f['puKaq'](_0x1ab76d[_0x94411c(0xe8,0x76,0x16b,0xf9)],-0x9a*-0x39+-0xd8c+-0x14be)){if(_0x38bb5f[_0x94411c(0xd1,0x15d,0x13d,0x9c)](_0x38bb5f[_0x94411c(0x81,0x21,0x67,0x9)],_0x38bb5f[_0x5c60f3(-0xf6,-0x163,-0x188,-0xbd)]))_0x374047['initialize'+_0x5c60f3(-0x11f,-0x130,-0x16c,-0x16c)+'ener']=!![],_0x38bb5f[_0x5c60f3(-0x1f4,-0x1c1,-0x220,-0x261)](_0x316868);else{const _0x1f6bf1=_0x1ab76d[0x1*-0x2359+0x2242+0x117][_0x5c60f3(-0x177,-0x12d,-0x13f,-0x165)]?.[_0x5c60f3(-0x195,-0x1fc,-0x221,-0x12a)];if(Array[_0x5c60f3(-0x1af,-0x1aa,-0x15a,-0x211)](_0x1f6bf1)){if(_0x38bb5f['FOwsW']!==_0x94411c(0x171,0x1f8,0x1da,0x1d4)){const _0x4a3988={};_0x4a3988['role']=_0x38bb5f[_0x94411c(0x8d,0x67,0x8b,0x52)],_0x4a3988[_0x5c60f3(-0x195,-0x1b9,-0x128,-0x18a)]=[{'type':_0x38bb5f[_0x94411c(0x14f,0xfb,0x168,0x16d)],'text':_0x17914a}],_0xb05dee[_0x5c60f3(-0x113,-0x119,-0xaa,-0x154)](_0x4a3988);}else for(const _0x5d8533 of _0x1f6bf1){if(_0x38bb5f[_0x5c60f3(-0xee,-0xa4,-0x67,-0xe2)](_0x38bb5f['CFBEN'],'zGzlP')){const _0x930e=_0xd0b180?function(){function _0x3b4823(_0x21dfb9,_0x494a25,_0xb8eee,_0x4ed8e1){return _0x5c60f3(_0x21dfb9-0x601,_0x494a25-0x195,_0xb8eee-0x1,_0x4ed8e1);}if(_0xfd08fb){const _0x436d8c=_0xd5e09a[_0x3b4823(0x4dc,0x475,0x52c,0x4e9)](_0x537d37,arguments);return _0x190c3a=null,_0x436d8c;}}:function(){};return _0x2a2af4=![],_0x930e;}else{if(_0x5d8533[_0x5c60f3(-0x1b8,-0x225,-0x16b,-0x1e5)]===_0x38bb5f[_0x5c60f3(-0x154,-0x1b1,-0x119,-0x11f)]&&_0x5d8533['image_url']?.[_0x94411c(0xc2,0xc3,0x58,0x117)]){_0x2d084a=_0x5d8533[_0x5c60f3(-0x1e0,-0x1ee,-0x1f6,-0x258)]['url'];break;}}}}else _0x38bb5f['tNizr'](typeof _0x1f6bf1,_0x38bb5f[_0x5c60f3(-0x150,-0x138,-0xf9,-0x1d0)])&&_0x38bb5f[_0x5c60f3(-0x18d,-0x19d,-0x1db,-0x1f9)](addLog,_0x38bb5f['BXgup']);}}if(!_0x2d084a){if(_0x38bb5f[_0x5c60f3(-0x12d,-0xc9,-0xaa,-0x17a)](_0x38bb5f[_0x94411c(0x120,0xf1,0xba,0xc6)],_0x94411c(0x142,0xd6,0x1c5,0x1c2)))_0x38bb5f[_0x94411c(0x98,0x84,0x99,0x2d)](_0x2a7eb4,_0x38bb5f['BXgup']);else throw new Error('API\x20respon'+_0x94411c(0x17b,0x10c,0x12f,0x10c)+_0x94411c(0xd4,0x7e,0x67,0xe4)+'mage\x20in\x20Op'+'enAI\x20forma'+'t');}return addLog(_0x38bb5f['sUGvu']),{'image':_0x2d084a,'change':_0x38bb5f[_0x5c60f3(-0x1b1,-0x242,-0x20f,-0x245)](_0x2ec23d,'')};}catch(_0x1fc8d0){_0x38bb5f['NgckO'](addLog,_0x5c60f3(-0x1ab,-0x226,-0x1cc,-0x12d)+_0x5c60f3(-0x1a1,-0x181,-0x16d,-0x14f)+':\x20'+_0x1fc8d0['message']),console[_0x5c60f3(-0x181,-0x1c1,-0x16f,-0x1ed)]('[Banana]\x20F'+_0x94411c(0xd8,0x97,0x109,0x104)+':',_0x1fc8d0);throw _0x1fc8d0;}}export async function bananaGenerate(_0xef247c){const _0x3b7993={'zVRsP':function(_0x52204f,_0x33450a){return _0x52204f(_0x33450a);},'GhLNt':function(_0x116b60,_0x40d45f){return _0x116b60(_0x40d45f);},'OkbJD':function(_0x31fe52,_0x53781f){return _0x31fe52+_0x53781f;},'SQVmc':function(_0x50dc1c,_0x3f60ba){return _0x50dc1c+_0x3f60ba;},'kpdXD':_0xbffeb6(0x2b0,0x210,0x299,0x23a)+'etch\x20error'+':','nQjzj':_0xbffeb6(0x220,0x298,0x299,0x225),'DuwJg':_0xbffeb6(0x22d,0x1fe,0x2a1,0x209),'uOiYZ':_0x66436e(0x344,0x2c3,0x247,0x2ae),'TMqya':'最后置','sLnyE':function(_0x570f48,_0xaefce7){return _0x570f48(_0xaefce7);},'Dgdcm':function(_0x107b21){return _0x107b21();},'hqsOU':function(_0xb14aaf,_0x16bd06){return _0xb14aaf===_0x16bd06;},'olcTL':_0xbffeb6(0x231,0x213,0x266,0x27a),'rgGvO':'{修图}','iEVTS':_0x66436e(0x214,0x2b0,0x263,0x288),'MFlji':_0x66436e(0x3b0,0x346,0x3cd,0x359),'ytFcD':function(_0x5bcd1d,_0x2a836e){return _0x5bcd1d!==_0x2a836e;},'aWmDV':_0xbffeb6(0x2f5,0x22c,0x1d8,0x26f),'mNsnV':function(_0x2050e4,_0x3c3f8b){return _0x2050e4(_0x3c3f8b);},'Lwgqr':function(_0x47c963,_0xf5d31b){return _0x47c963(_0xf5d31b);},'OAuBN':function(_0x5d96b5,_0x4839d5){return _0x5d96b5===_0x4839d5;},'YoKvV':_0xbffeb6(0x262,0x361,0x2b9,0x2f0),'Dajfd':function(_0x1d0b1c,_0x1229ec){return _0x1d0b1c!=_0x1229ec;},'fUMED':function(_0x4386a3,_0x3eeca9,_0x5e91b9,_0x16657d){return _0x4386a3(_0x3eeca9,_0x5e91b9,_0x16657d);},'EYEKk':function(_0x1b435a,_0xe5386){return _0x1b435a(_0xe5386);},'fYyXz':function(_0x2167f1,_0x531125){return _0x2167f1(_0x531125);},'rHnar':'generate-i'+_0x66436e(0x34f,0x2e3,0x338,0x2d8)+_0xbffeb6(0x295,0x2cd,0x29c,0x255)};_0x3b7993[_0xbffeb6(0x17c,0x207,0x27a,0x1ff)](clearLog);let {id:_0x27e3f9,prompt:_0x2f7b9e,width:_0x1d4fda,height:_0x47f3c6,change:_0x4f21ea,retouchPrompt:_0x4e4087,retouchImage:_0x33b9df}=_0xef247c;function _0xbffeb6(_0x23d983,_0x5dfec5,_0x2903dd,_0x1d15f8){return _0xabd9(_0x1d15f8-0x22,_0x23d983);}_0x3b7993[_0xbffeb6(0x2e4,0x1f4,0x228,0x289)](addLog,_0x66436e(0x24b,0x30f,0x277,0x283)+_0xbffeb6(0x262,0x26a,0x22c,0x276)+'age\x20genera'+'tion\x20reque'+'st\x20(ID:\x20'+_0x27e3f9+')');let _0x2134ca='';function _0x66436e(_0x55d2c3,_0x14d4f1,_0x48f57b,_0x1702f3){return _0xabd9(_0x1702f3-0x9b,_0x14d4f1);}if(_0x4f21ea){if(_0x3b7993[_0xbffeb6(0x20a,0x279,0x317,0x29b)](_0x3b7993[_0x66436e(0x2d3,0x23b,0x333,0x2c8)],_0x3b7993['olcTL']))_0x2134ca=_0x4f21ea[_0x66436e(0x292,0x259,0x357,0x2d7)](_0x3b7993[_0x66436e(0x382,0x35d,0x2ac,0x32a)],'');else{_0x3b7993['zVRsP'](_0x1512d6,_0x66436e(0x2f0,0x38e,0x326,0x337)+'启动');if(_0xdabf67)_0x3b7993[_0x66436e(0x307,0x321,0x331,0x302)](_0x272a6a,_0x66436e(0x249,0x1d8,0x28f,0x268)+_0x3e3eb1);if(_0x99ee21)_0x1be09b(_0x66436e(0x366,0x35c,0x317,0x30c)+']');}}else _0x3b7993[_0x66436e(0x30a,0x2f2,0x20f,0x2a3)]!==_0x3b7993[_0xbffeb6(0x2a1,0x334,0x330,0x2dc)]?_0x2134ca=_0x2f7b9e:_0x18e7b6[_0x66436e(0x2d9,0x200,0x317,0x296)+_0x2428b0+_0x66436e(0x33c,0x335,0x2fe,0x328)]&&(_0x1e061a=_0x3b7993[_0x66436e(0x29e,0x329,0x2e0,0x2a1)](_0x3b7993['SQVmc'](_0x5a74a8,',\x20'),_0x59821c[_0xbffeb6(0x292,0x287,0x2a7,0x21d)+_0x2ed1db+_0x66436e(0x3b9,0x380,0x345,0x328)]));if(_0x4f21ea&&_0x4f21ea['includes'](_0x3b7993['rgGvO'])){if(_0x3b7993['ytFcD'](_0x3b7993['aWmDV'],_0xbffeb6(0x388,0x2d8,0x2f3,0x30d))){_0x3b7993[_0x66436e(0x390,0x3ca,0x2dc,0x33a)](addLog,'Banana修图模式'+'启动');if(_0x4e4087)addLog(_0x66436e(0x2f9,0x231,0x1fe,0x268)+_0x4e4087);if(_0x33b9df)_0x3b7993[_0xbffeb6(0x227,0x299,0x284,0x2aa)](addLog,_0x66436e(0x2ff,0x29a,0x2d3,0x30c)+']');}else{_0x3b7993['GhLNt'](_0x2404e2,_0xbffeb6(0x2c3,0x262,0x1fd,0x23a)+_0x66436e(0x331,0x268,0x2f0,0x2bd)+':\x20'+_0x10fc6f[_0x66436e(0x25b,0x351,0x2e5,0x2e7)]),_0x511d77[_0xbffeb6(0x2a6,0x26a,0x20c,0x264)](_0x3b7993['kpdXD'],_0x5e7d79);throw _0x47517e;}}try{if(_0x3b7993[_0xbffeb6(0x26d,0x281,0x31d,0x2e1)](_0x3b7993['YoKvV'],_0x3b7993[_0xbffeb6(0x1de,0x1f4,0x245,0x1e6)])){const {image:_0x5e1f68,change:_0x30dd88}=await _0x3b7993[_0x66436e(0x3d0,0x2ce,0x304,0x353)](generateBananaImage,{'prompt':_0x2f7b9e,'width':_0x1d4fda,'height':_0x47f3c6,'change':_0x4f21ea,'retouchPrompt':_0x4e4087,'retouchImage':_0x33b9df});if(_0x3b7993[_0xbffeb6(0x2d6,0x1f1,0x243,0x25d)](extension_settings[extensionName][_0xbffeb6(0x290,0x1a7,0x272,0x23b)],'0')){const _0x50472c={};_0x50472c[_0xbffeb6(0x297,0x2e3,0x34b,0x2f5)]=_0x2134ca,await _0x3b7993['fUMED'](setItemImg,_0x2f7b9e,_0x5e1f68,_0x50472c),_0x3b7993[_0x66436e(0x345,0x263,0x250,0x2c0)](addLog,_0x66436e(0x30f,0x291,0x229,0x2b0)+_0xbffeb6(0x2c1,0x36b,0x268,0x2e6)+'\x20'+_0x2f7b9e),extension_settings[extensionName][_0x66436e(0x296,0x2e6,0x2c0,0x315)]['cishu']?(extension_settings[extensionName]['banana'][_0xbffeb6(0x1dc,0x21b,0x244,0x210)]=extension_settings[extensionName][_0x66436e(0x395,0x2f9,0x364,0x315)][_0xbffeb6(0x22d,0x196,0x20a,0x210)]+(0x575+-0x9*-0xee+-0xdd2),_0x3b7993['GhLNt'](addLog,_0xbffeb6(0x25f,0x210,0x27c,0x282)+_0x66436e(0x22c,0x2b3,0x227,0x260)+extension_settings[extensionName][_0x66436e(0x30f,0x2e6,0x3a2,0x315)][_0xbffeb6(0x293,0x1f7,0x202,0x210)])):(extension_settings[extensionName][_0xbffeb6(0x2f2,0x2c5,0x2df,0x29c)]['cishu']=0x145d+-0x8*-0x214+-0x24fc,_0x3b7993[_0xbffeb6(0x1e7,0x1ad,0x1af,0x20c)](addLog,_0xbffeb6(0x2a1,0x20a,0x230,0x282)+_0x66436e(0x2f5,0x288,0x1e8,0x260)+extension_settings[extensionName][_0x66436e(0x36b,0x313,0x28d,0x315)][_0x66436e(0x235,0x2b9,0x238,0x289)]));}else addLog(_0xbffeb6(0x220,0x202,0x1b1,0x1f7)+'库');const _0x597f18={};_0x597f18['id']=_0x27e3f9,_0x597f18[_0x66436e(0x37d,0x332,0x2a2,0x338)]=!![],_0x597f18[_0xbffeb6(0x223,0x2e9,0x2f3,0x292)]=_0x5e1f68,_0x597f18[_0xbffeb6(0x294,0x278,0x325,0x2ba)]=_0x2f7b9e,_0x597f18['change']=_0x2134ca,eventSource[_0x66436e(0x31c,0x2d5,0x2a7,0x28e)](EventType[_0xbffeb6(0x319,0x2f5,0x34e,0x2d6)+_0x66436e(0x2e2,0x323,0x2fb,0x33c)+_0xbffeb6(0x28a,0x226,0x2c4,0x22f)],_0x597f18);const _0x1acde2={};_0x1acde2['id']=_0x27e3f9,_0x1acde2['success']=!![],_0x1acde2[_0x66436e(0x2b8,0x37a,0x2c1,0x30b)]=_0x5e1f68,_0x1acde2[_0x66436e(0x2f5,0x2a2,0x2be,0x333)]=_0x2f7b9e,_0x1acde2[_0xbffeb6(0x308,0x34b,0x267,0x2f5)]=_0x2134ca,eventSource[_0x66436e(0x248,0x230,0x2ea,0x28e)](_0x66436e(0x2d3,0x2fe,0x356,0x2e6)+_0xbffeb6(0x1f1,0x2c8,0x2ef,0x25f)+'nse',_0x1acde2),_0x3b7993[_0x66436e(0x2f9,0x388,0x37f,0x37c)](addLog,_0x66436e(0x405,0x2f0,0x3e9,0x38a)+'mitted\x20suc'+_0x66436e(0x2d0,0x3cb,0x318,0x341)+'nse\x20for\x20ID'+':\x20'+_0x27e3f9);}else{_0xd05259=_0xbffeb6(0x2cd,0x297,0x319,0x2f1)+'dels/'+_0x3064ac;const _0xae3bd3={};_0xae3bd3[_0x66436e(0x31c,0x399,0x2d0,0x349)+'t']='';const _0x5adac7=_0x13109e[_0x41678e]||_0xae3bd3,_0x22507d=[_0x5adac7['fixedPromp'+'t'],_0xad577b['前置前'],_0x280e12[_0x3b7993[_0xbffeb6(0x2ce,0x21d,0x226,0x280)]],_0x1ddf25,_0x38ceaf[_0x3b7993[_0x66436e(0x2dd,0x34e,0x2f7,0x319)]],_0x3af61d[_0x3b7993[_0x66436e(0x202,0x2fc,0x20f,0x269)]],_0x5adac7['postfixPro'+_0x66436e(0x3a0,0x3e5,0x3fb,0x389)],_0x15e7cf[_0x3b7993[_0xbffeb6(0x264,0x33f,0x342,0x2ed)]]][_0x66436e(0x2cd,0x290,0x1d2,0x25d)](_0x56cc24)[_0x66436e(0x2a5,0x2cc,0x2f3,0x316)](',\x20');_0x3b7993[_0xbffeb6(0x1e0,0x260,0x29b,0x20c)](_0x9278ea,'正面提示词:\x20'+_0x22507d);const _0x2f901c={};_0x2f901c[_0x66436e(0x29e,0x2d2,0x3af,0x333)]=_0x22507d;const _0x426282={};_0x426282[_0x66436e(0x273,0x2bf,0x2ac,0x2a4)+'t']=0x1,_0x426282[_0xbffeb6(0x1fe,0x2f6,0x1e1,0x26c)+'o']=_0x4548bc;const _0x45111e={};_0x45111e[_0x66436e(0x284,0x2b5,0x257,0x279)]=[_0x2f901c],_0x45111e[_0xbffeb6(0x322,0x2eb,0x355,0x2db)]=_0x426282,_0x245ad8=_0x45111e,_0x2b16b8('[Banana]\x20B'+'uilt\x20Image'+_0xbffeb6(0x2cc,0x25d,0x211,0x27e)+_0xbffeb6(0x267,0x1f0,0x22a,0x257)+_0x66436e(0x2ae,0x21d,0x331,0x29d)+_0x22507d);}}catch(_0x11cf9a){const _0x4fae1d=_0x66436e(0x2a4,0x3b8,0x3b0,0x336)+'eneration\x20'+_0x66436e(0x2e6,0x285,0x31c,0x2e0)+'\x20ID\x20'+_0x27e3f9+':\x20'+_0x11cf9a[_0xbffeb6(0x2d3,0x2a8,0x20e,0x26e)];_0x3b7993[_0xbffeb6(0x327,0x320,0x298,0x2aa)](addLog,_0x4fae1d),console['error'](_0x4fae1d);const _0x5cabc0={};_0x5cabc0['id']=_0x27e3f9,_0x5cabc0[_0xbffeb6(0x2d7,0x312,0x350,0x2bf)]=![],_0x5cabc0[_0xbffeb6(0x1f7,0x2e6,0x270,0x264)]=_0x11cf9a[_0x66436e(0x26f,0x2fd,0x306,0x2e7)],_0x5cabc0[_0xbffeb6(0x233,0x298,0x2c1,0x2ba)]=_0x2f7b9e,eventSource[_0xbffeb6(0x1d6,0x1f3,0x1af,0x215)](EventType[_0x66436e(0x2c4,0x3a1,0x2d0,0x34f)+_0xbffeb6(0x338,0x2a0,0x236,0x2c3)+_0xbffeb6(0x1a5,0x1a3,0x24d,0x22f)],_0x5cabc0);const _0x3ec4f9={};_0x3ec4f9['id']=_0x27e3f9,_0x3ec4f9[_0x66436e(0x398,0x395,0x38f,0x338)]=![],_0x3ec4f9[_0xbffeb6(0x275,0x1db,0x2a4,0x264)]=_0x11cf9a[_0x66436e(0x34b,0x254,0x24f,0x2e7)],_0x3ec4f9['prompt']=_0x2f7b9e,eventSource[_0x66436e(0x208,0x296,0x2d2,0x28e)](_0x3b7993['rHnar'],_0x3ec4f9),addLog(_0xbffeb6(0x2bd,0x347,0x39c,0x311)+_0x66436e(0x2f8,0x34b,0x2d3,0x347)+'lure\x20respo'+_0x66436e(0x36b,0x32a,0x2d5,0x2d3)+':\x20'+_0x27e3f9);}}const LEGACY_EVENT_NAMES=[_0x4dd9af(0x2bc,0x231,0x29d,0x25c)+_0x4df6f3(0x66,-0x2,-0x27,0x3d)+'st',_0x4df6f3(0xa4,0xa5,0x8a,0x33)+_0x4dd9af(0x2ba,0x341,0x2b1,0x2fb)+'st'];function initializeBananaListener(){function _0x228424(_0x37c4d9,_0xce2a60,_0x3e9288,_0x24b1c4){return _0x4dd9af(_0xce2a60-0x1dc,_0xce2a60-0x21,_0x3e9288,_0x24b1c4-0x15a);}const _0x16acff={'wIqEW':function(_0xfda7a8,_0x288df8){return _0xfda7a8(_0x288df8);},'SuQyR':function(_0x1c2d4c,_0x48e945){return _0x1c2d4c===_0x48e945;},'hzxXV':_0x23bf99(-0x6b,-0x82,-0x105,-0x46),'RizqI':'banana\x20生图事'+_0x23bf99(-0x95,-0x71,-0xf5,0x3)};eventSource['on'](EventType[_0x228424(0x55c,0x501,0x580,0x563)+_0x228424(0x47d,0x4f8,0x505,0x49e)+'ST'],bananaGenerate);function _0x23bf99(_0x191a17,_0x516921,_0x2cfbbe,_0x5c6033){return _0x4df6f3(_0x516921,_0x516921-0x116,_0x2cfbbe-0x70,_0x191a17- -0x11e);}LEGACY_EVENT_NAMES[_0x23bf99(-0x72,-0xa5,0x24,-0x37)](_0x4dc442=>{function _0xa71533(_0x4bf454,_0x544323,_0x1b5e3b,_0x554ecf){return _0x228424(_0x4bf454-0x1c2,_0x554ecf- -0x60b,_0x1b5e3b,_0x554ecf-0x158);}function _0xef2bd3(_0x15b30e,_0x24f5ad,_0x523cd2,_0x2b0737){return _0x228424(_0x15b30e-0x1a6,_0x2b0737- -0x158,_0x523cd2,_0x2b0737-0x53);}_0x16acff[_0xef2bd3(0x439,0x38b,0x371,0x3a7)](_0xef2bd3(0x36c,0x25b,0x273,0x2e4),_0x16acff['hzxXV'])?(_0x1d1dc4[_0x4b3959][_0xa71533(-0x171,-0x1ad,-0xbc,-0x144)][_0xef2bd3(0x2a2,0x35b,0x2a9,0x2e3)]=-0xf2e+-0x4be*0x2+0x3*0x839,_0x16acff['wIqEW'](_0x57b832,_0xef2bd3(0x3c7,0x378,0x2f1,0x355)+'r\x20prompt:\x20'+_0x14ee07[_0xcaf13c][_0xef2bd3(0x404,0x3de,0x2e6,0x36f)][_0xa71533(-0x1d1,-0x213,-0x1b4,-0x1d0)])):eventSource['on'](_0x4dc442,bananaGenerate);}),_0x16acff[_0x228424(0x40b,0x477,0x4da,0x4b6)](addLog,_0x16acff[_0x228424(0x4c1,0x531,0x498,0x5ad)]);}export async function replaceWithBanana(){function _0x23ed5b(_0x509020,_0x452714,_0x233de5,_0x37310c){return _0x4df6f3(_0x37310c,_0x452714-0xec,_0x233de5-0x18c,_0x452714- -0x16c);}const _0x263cc1={'sJclD':function(_0x393275,_0x2a2e4d){return _0x393275!==_0x2a2e4d;},'aNZNO':'uVQlH','SGLyy':function(_0x42db07,_0x3d1743){return _0x42db07==_0x3d1743;},'iAccD':function(_0x239d10){return _0x239d10();},'wwGGJ':_0x444002(0x1fe,0x224,0x237,0x295)+_0x444002(0x175,0x106,0x164,0x1fa)};function _0x444002(_0x223570,_0x59d15a,_0x28dce7,_0x5e1a9b){return _0x4df6f3(_0x59d15a,_0x59d15a-0xc1,_0x28dce7-0x7,_0x28dce7-0x101);}_0x263cc1['SGLyy'](extension_settings[extensionName][_0x23ed5b(-0x16e,-0xda,-0x160,-0x9c)],'banana')?(!window[_0x23ed5b(0x2f,-0x4f,-0xc,-0xc3)+_0x444002(0x22f,0x242,0x211,0x1e4)+_0x444002(0x22c,0x1dc,0x19d,0x224)]&&(window[_0x444002(0x1d0,0x21a,0x21e,0x2ad)+'BananaList'+'ener']=!![],_0x263cc1[_0x23ed5b(-0x10c,-0xbf,-0x146,-0x36)](initializeBananaListener)),_0x263cc1[_0x444002(0x1e6,0x166,0x1ae,0x200)](initializeImageProcessing)):window[_0x23ed5b(-0x1b,-0x4f,-0xcd,-0x4d)+'BananaList'+'ener']&&(eventSource[_0x23ed5b(-0xfb,-0x134,-0x139,-0x17b)+'ener'](EventType[_0x444002(0x297,0x1ad,0x221,0x189)+_0x23ed5b(-0xa5,-0x55,-0x74,0xc)+'ST'],bananaGenerate),LEGACY_EVENT_NAMES['forEach'](_0x1c289b=>{const _0x1be83d={};function _0x2d6303(_0x38fd26,_0x3cfdf9,_0x555b52,_0x4b301e){return _0x444002(_0x38fd26-0x15f,_0x4b301e,_0x38fd26- -0x185,_0x4b301e-0x4b);}_0x1be83d[_0x2d4fa0(0x268,0x2d0,0x2ab,0x1ef)]=function(_0x342730,_0x527bf6){return _0x342730+_0x527bf6;};function _0x2d4fa0(_0x301b55,_0x2f880b,_0xf0c210,_0x12c921){return _0x23ed5b(_0x301b55-0x1da,_0x301b55-0x348,_0xf0c210-0x21,_0x12c921);}const _0x1ba417=_0x1be83d;_0x263cc1['sJclD'](_0x2d4fa0(0x2f0,0x25c,0x360,0x26d),_0x263cc1[_0x2d4fa0(0x287,0x2ff,0x22e,0x2a7)])?_0x5d146d=_0x1ba417['PITKC'](_0x31987b,_0x1da896):eventSource[_0x2d6303(-0x4c,-0x98,-0x11,0x3e)+_0x2d4fa0(0x278,0x1fe,0x2ae,0x1e4)](_0x1c289b,bananaGenerate);}),window[_0x23ed5b(0x18,-0x4f,-0x75,0x41)+'BananaList'+_0x444002(0x20a,0x124,0x19d,0x228)]=![],addLog(_0x263cc1[_0x23ed5b(0x84,-0x14,0x4e,-0x60)]));}function _0x7bd1(){const _0x27a2a3=['Bw9KzwW','tufhrv9srvfvrq','BwL0DgvKigzHAq','DxnLCG','zML4zwrqCM9TCa','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','ChvZAa','Aw5PDgLHBgL6zq','u3vrEvi','BgvZktOG','r0vorvjbvevFsq','5Q2J6z2I5O+q56s66k+noIa','wg1Jwu8','tNH1svq','ELzsC1a','CgfYyw1LDgvYCW','tuzSAMK','wuvIELC','q0Pmz3O','Aw9U','tfbWr1y','t0f1qK4','B21WBgv0Aw9UCW','CIaI','yw1KEKm','mJG3mtK0meDuA0H1BW','B3iGChjVBxb0oG','C2uGzgLKig5VDa','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','sfHot0G','vxnPv0y','ALn3Du8','w0jHBMfUyv0G55sF','ve1XEwe','55sO5lQgihVKV67LM759ioAGH+IVHG','AgXctMW','vgXlvfa','l3yXyMv0ys9TBW','y2noDwW','B2fKihDPDgGG','AxrOihn0yxr1CW','y2HHBMDL','BI9QC29U','uvnxCve','Bw9KzwW6ia','tg5JDLe','w0jHBMfUyv0G5l2/','yxnZAxn0yw50','yw13t1q','BwfNzsbPBIbpCa','5lIT55QeihbYB21WDooaGG','y29UDMvYC2f0Aq','se5Ithq','mZuYmtHdq0fWyM0','wNn5wKe','zLL5whO','tNn2Bgm','Aw1Hz2u','uML6CuK','y2zNAw1NxW','w0jHBMfUyv0G5l+U','Aw5JBhvKzxm','ownhA3jSsa','ufbpugm','BwfNzsbNzw5LCG','wMnhBxG','D3Dhr0O','Cg9ZDgzPEfbYBW','Bxb0','w0jHBMfUyv0Grq','qxH6BfG','u0vvzgu','C3rYAw5N','Evrxr2m','m1zMDNfdEa','zMLSDgvY','Dg9mB3DLCKnHCW','ww9lDLy','CIbWCM9TChq6ia','CMvWBgfJzq','z2vUzxjHDgvFAq','iIbMCM9TihbYzq','zeP2y2e','l3yX','BgHMDhi','CMvTB3zLtgLZDa','5l+U5zU+5OYh5lUKoIa','Du9PwvO','rg1othy','z1Dfr1m','BwfNzs1Yzxf1zq','Dg9tDhjPBMC','sxHPsvi','igLTywDLlG','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','w0jHBMfUyv0Gua','zKLJzKe','mZCWmdG0meTbCgHLAG','DcbVBMX5lcbUBW','DgT1A2u','yKLssuW','qMvHCMvYia','rgDKy20','Aw5ZDgfUy2vZ','ywDLigDLBMvYyq','5BYa5AEliejHBMfUyEEuNW','yvzwrwG','BMz6Ahe','Aw1Hz2vFDxjS','uNPOCNu','ihWG','tgDtvLC','5zco572U5yMn','w0jHBMfUyv0GuG','BwfW','C0XUEuu','y2XPzw50','zw5bssbMB3jTyq','C2LNCLK','y2LZAhu','qNDQv1O','ugPztKS','uePbA1y','DgfYDgLUzYbPBq','zw1PDa','q0Hhy24','DwLSDcbjBwfNzq','EMPVvKW','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','E+s/RUwBVN0','otb5A2DKzgW','ExfXBve','q2HHCMfJDgvYia','y2HVAwnLCW','5PYa5zco572U','vxzuDvK','ndG4nJDmA2DQrMW','DcbMywLSzwqGDW','ALvKDfK','DdOG','5yMn572U5zco','zgPnAw4','qxv0Ag9YAxPHDa','t2TIsKq','55Qe5zU+54Mh','Auvwvfm','C2fTCgXLq291BG','55sO5lQo55sF5OIq55QevgfNoIa','DhLWzq','DxjS','tLnf','ELnutKS','qMHhyMW','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','Aw1Hz2vjza','EhfqvKm','5zco572U5zco','AxnbCNjHEq','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','z3bQy3u','rKnVALO','w0jHBMfUyv0GrG','y2fJAgu','v3jezxm','De5PENi','C3rHCNrZv2L0Aa','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','ignVBNrHAw4GAq','w0jHBMfUyv0G5zcV','ueLus0m','l3yXl2nOyxqVyW','zxrJAcbLCNjVCG','DgHMq2y','z3nfExm','rvLfs2S','Bw9Kzq','Bw9KywWGCgf5Ba','q29UDgvUDc1uEq','Dgv4Da','D0LXrvC','B3nPDgLVBG','zxnWB25ZzsbJBW','B2XJveW','y29UDgvUDa','q1z4zNm','zw5LCG','ANnVBG','BgvUz3rO','BNnL','kcGOlISPkYKRkq','D2L0AcbWCM9TCa','seXyDwm','yLHfEfa','BNnLigzVCIbjra','zw5KAw5NihjLCq','qvbjihjLCxvLCW','rgfQzMq','CMvWBgfJzufSBa','BwfNzs1YzxnWBW','z1ncsui','yu5AtK8','zM9YrwfJAa','AufJy0q','zxjYB3i','u2nLBMuGq29TCa','mtnZvuvQCLG','zMfPBgvKigzVCG','BfPtAKu','tMLzBMW','C2vHCMnO','BwfNzv9Yzxf1zq','yxnWzwn0uMf0Aq','z2vUzxjHDguTAq','BwvZC2fNzq','CuDHsxG','BhjgtNO','DwLSDcbTDwX0Aq','t3buyNa','v3D2wNm','DwvZDcb0BZOG','ywn0zxjqCMvZzq','zwnLAxzLzcbPBq','s3fqshq','mta3oty3mKvxCgrhvG','q2Pfu28','sNrMtLm','DurbrwO','zgf0ytPPBwfNzq','zw5KC1DPDgG','BIbWyxLSB2fKia','w0jHBMfUyv0GuW','BLfQEMO','w0jHBMfUyv0GqG','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','y29UC3rYDwn0BW','vxvAshm','u0vcBxG','t210wfC','yMfUyw5Hq2HHCG','nde1nZCZnwH4CNroqG','r2HmtNq','DhjPz2DLCNm','vfPxrKe','uuT1ue0','z1LvB0S','BvbsrLi','w0jHBMfUyv0Gsq','v01NqLi','sezxzvO','Aw1Hz2veyxrH','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','zLrOrxq','rgruufK','lcdPQ5JLUQyGlsa','CvfoDKe','tNnwzLq','D3LmB1u','DhjPBq','AhfZt1u','yMfUyw5H','AM9PBG','AKrmzu0','z2DYqNy','rhv3sMC','Aw1Hz2vdB25MAq','C3bSAxq','yxLSB2fKoIa','Aw1Hz2vU','55sO5l+U5zU+6Ake6k6+oIaI','C3rYAw5NAwz5','C3rHDhvZ','vKLfDvy','CM9Szq','thDNCxi','Aw5NihrYAwDNzq','q29xvuW','B3vUzcbTyxrJAa','uenPA2K','ifbYB21WDa','ANLLy3u','CMDhDK8','nte5nJiWru12uM50','5zU+5QIH5BYp77YA5BEY5RE75yQG5B6f5l+U5Ps5','DLrUqMC','C2v0ici','uKLiCeq','rwHuExe','qvbJwLq','qNrgAvi','ChjVBxb0','wuvWue0','l3yXlW','w0jHBMfUyv0GrW','qMfUyw5H5l+U5zU+5QIH5BYp','C3vJy2vZCW','yxbWBhK','Bu5ZBLy','EKD6Bfa','tufhrv9srvnqtW','zMXHDa','ue9tva','qMfUyw5HtgLZDa','5yMn572U5yMn','y2vZCYbYzxnWBW','5zU+5Rwb56Il44cc5A6I5OI356UV5lI6','DvzrBeG','5zU+5QIH5BYp77YA5OYh5lUKid0G'];_0x7bd1=function(){return _0x27a2a3;};return _0x7bd1();}