(function(_0x15e680,_0x5556d8){function _0xaea5fa(_0x593947,_0x3616a8,_0x3653e9,_0x21dc7c){return _0x5433(_0x3616a8- -0x3bc,_0x21dc7c);}function _0xa1966c(_0x2262b9,_0x5d2d1d,_0x68415,_0x5992cf){return _0x5433(_0x68415-0x33b,_0x5d2d1d);}const _0x4f1923=_0x15e680();while(!![]){try{const _0x4d2835=-parseInt(_0xa1966c(0x4d8,0x57e,0x55e,0x4af))/(-0xf1*-0x7+0x4*-0x8a5+0x1bfe)*(-parseInt(_0xaea5fa(-0xb5,-0x11c,-0x15b,-0x1c1))/(0x963+0x323*-0x1+-0x22*0x2f))+parseInt(_0xa1966c(0x5ce,0x52e,0x551,0x59e))/(-0xb2*0x1+0x5c*-0x5e+-0x3d5*-0x9)*(parseInt(_0xaea5fa(-0x19c,-0x1e3,-0x21a,-0x1b7))/(0x1174+-0x11e8+-0x3*-0x28))+-parseInt(_0xaea5fa(-0x1a7,-0x220,-0x20f,-0x1d6))/(0x128e+-0x209d+0xe14)+parseInt(_0xa1966c(0x4fd,0x4a1,0x4d1,0x531))/(0x1ec2+0x8*0x317+0xe*-0x3f6)*(parseInt(_0xa1966c(0x600,0x637,0x5ef,0x55d))/(0x5a7*0x5+0x209c*-0x1+-0x23*-0x20))+parseInt(_0xaea5fa(-0x284,-0x24f,-0x30b,-0x2a0))/(0x443*-0x5+-0x283*0xa+0x2e75)*(parseInt(_0xa1966c(0x668,0x54b,0x5f5,0x67f))/(0x1*-0x1aff+-0xd*-0x1fd+0x65*0x3))+-parseInt(_0xaea5fa(-0x167,-0x115,-0x123,-0x68))/(0x21e+0x1d5d+0xa7b*-0x3)*(-parseInt(_0xa1966c(0x5a4,0x477,0x531,0x522))/(-0x1ba4+0x1af2+0xbd))+-parseInt(_0xaea5fa(-0x145,-0xf2,-0xee,-0x7f))/(-0x1129+-0xd79*0x1+0xa3a*0x3);if(_0x4d2835===_0x5556d8)break;else _0x4f1923['push'](_0x4f1923['shift']());}catch(_0x5b77c4){_0x4f1923['push'](_0x4f1923['shift']());}}}(_0x5c54,0x35aae+0x5*0x12cf5+-0x5890f));const _0x593be1=(function(){const _0x95bce7={};_0x95bce7[_0x52fefc(0x3c5,0x2e1,0x320,0x282)]=function(_0x5ccec3,_0x26f66a){return _0x5ccec3!==_0x26f66a;},_0x95bce7['uEgxQ']=_0x160248(-0xa7,-0x9e,-0x194,-0xe9);function _0x160248(_0x47541a,_0x4dc2d9,_0x4eebf6,_0x57787c){return _0x5433(_0x57787c- -0x3a9,_0x4dc2d9);}const _0x3c07ac=_0x95bce7;function _0x52fefc(_0x42b53d,_0x13ed79,_0x556743,_0x2b9325){return _0x5433(_0x556743-0x103,_0x13ed79);}let _0xeb9fab=!![];return function(_0x1244a3,_0x4ee469){const _0x405d35=_0xeb9fab?function(){function _0x12736d(_0xcac8bc,_0x314ffb,_0x2e43ae,_0x1e16c5){return _0x5433(_0xcac8bc-0x194,_0x2e43ae);}function _0x1e2908(_0xf22783,_0x46efc5,_0x5dfcca,_0x8bf881){return _0x5433(_0x5dfcca- -0x1bf,_0x46efc5);}if(_0x3c07ac[_0x1e2908(-0x62,0x6,0x5e,0x2f)](_0x12736d(0x37d,0x3f3,0x2d7,0x36e),_0x3c07ac[_0x12736d(0x3c2,0x3b8,0x3b2,0x37d)])){if(_0x4ee469){const _0x9913fb=_0x4ee469['apply'](_0x1244a3,arguments);return _0x4ee469=null,_0x9913fb;}}else return _0x13441e['image'];}:function(){};return _0xeb9fab=![],_0x405d35;};}()),_0x1640bb=_0x593be1(this,function(){const _0x2bb9b7={};function _0x2c024f(_0x473407,_0x5efa8e,_0x29dda6,_0x4956e4){return _0x5433(_0x4956e4- -0x81,_0x29dda6);}_0x2bb9b7[_0x55d210(0x43c,0x4f7,0x448,0x4de)]=_0x2c024f(0x1af,0x70,0x1ad,0x123)+'+$';function _0x55d210(_0x142a28,_0x95cb54,_0xb6f6f1,_0x6dd7){return _0x5433(_0x6dd7-0x207,_0x142a28);}const _0x45d6c3=_0x2bb9b7;return _0x1640bb[_0x55d210(0x3d9,0x432,0x44f,0x406)]()[_0x2c024f(0x2aa,0x2b6,0x225,0x248)](_0x45d6c3[_0x2c024f(0x2fa,0x1b4,0x29d,0x256)])['toString']()[_0x55d210(0x4fb,0x508,0x459,0x49b)+'r'](_0x1640bb)[_0x2c024f(0x278,0x29b,0x2d6,0x248)](_0x45d6c3[_0x55d210(0x508,0x4f6,0x51b,0x4de)]);});_0x1640bb();import{extension_settings}from'../../../../extensions.js';import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,convertImageToJpeg}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';import{taskQueue,TaskType,TaskStatus}from'./taskQueue.js';function getDirectHeaders(_0x288c81=null,_0x5c431d=null){function _0x1d679e(_0x1796a5,_0x4f037e,_0x41681e,_0xe0d145){return _0x5433(_0x1796a5-0x11c,_0x4f037e);}function _0x442a8b(_0x286089,_0x157e77,_0x3f5a7d,_0x10f7f1){return _0x5433(_0x3f5a7d- -0xe8,_0x286089);}const _0x2155cf={'mePUe':function(_0x1eb13e,_0x3fe983){return _0x1eb13e(_0x3fe983);},'zVLbt':_0x1d679e(0x2d2,0x258,0x2b1,0x311)+_0x1d679e(0x3b5,0x3bb,0x404,0x36a)+'ntains\x20tex'+'t\x20only,\x20no'+_0x1d679e(0x3be,0x43b,0x3cf,0x3ce),'ATjIZ':function(_0x3f15ca,_0x8abd9){return _0x3f15ca+_0x8abd9;},'OpagD':'/v1','GoIlN':_0x442a8b(0x55,0xb5,0xcc,0x15a),'CnKtN':function(_0x289221,_0x2f210f){return _0x289221!==_0x2f210f;},'uPjUm':_0x442a8b(0x178,0xee,0x17f,0x112)+'pe','adHNk':function(_0x1dc4fa,_0x19b32f){return _0x1dc4fa===_0x19b32f;},'VaWnw':'JpNnx','dQTJu':_0x442a8b(0x1cb,0x246,0x1a5,0x16a)+'ion'},_0x1321be={};_0x1321be[_0x442a8b(0x28e,0x18d,0x1f5,0x187)]=_0x442a8b(0x88,0xe5,0xc2,0x1d)+_0x1d679e(0x3fb,0x4af,0x3bc,0x361)+_0x442a8b(0x5f,0x4a,0xc9,0xb2)+'Win64;\x20x64'+_0x442a8b(0x181,0x114,0x12b,0x114)+_0x442a8b(0x272,0x213,0x1b4,0x134)+_0x1d679e(0x29f,0x351,0x205,0x233)+_0x442a8b(0x1c0,0x1d3,0x1e4,0x1db)+'\x20Chrome/12'+'0.0.0.0\x20Sa'+_0x1d679e(0x2c9,0x2b7,0x22d,0x208)+'6',_0x1321be[_0x1d679e(0x369,0x388,0x39d,0x38e)]=_0x2155cf[_0x1d679e(0x2b7,0x249,0x2f0,0x1f8)];const _0x2d5fff=_0x1321be;return _0x288c81&&(_0x2155cf[_0x442a8b(0x27,0xcf,0xca,0x82)](_0x1d679e(0x2cb,0x25c,0x2a9,0x255),_0x442a8b(0x1c3,0x146,0x183,0x1e6))?_0x2d5fff[_0x2155cf[_0x442a8b(0x14f,0x16b,0xc4,0x138)]]=_0x288c81:_0x2155cf[_0x442a8b(0x153,0x97,0x125,0x10e)](_0x4322bb,_0x2155cf['zVLbt'])),_0x5c431d&&(_0x2155cf['adHNk'](_0x2155cf[_0x1d679e(0x32c,0x394,0x2c4,0x324)],_0x1d679e(0x2ea,0x37a,0x342,0x31f))?_0x313aae=_0x2155cf[_0x442a8b(0x11e,0x279,0x1c9,0x117)](_0x4bf44e,_0x2155cf[_0x442a8b(0xd1,0x14e,0x18d,0x124)]):_0x2d5fff[_0x2155cf[_0x442a8b(0xd6,0xb2,0x141,0x1f2)]]=_0x5c431d),_0x2d5fff;}let currentTaskId=null,currentRequestId=null,currentPrompt=null;async function getImageFromTurnData(_0x5bab46){const _0x3824a8={'audYe':_0x5dc14c(0x372,0x339,0x2f2,0x38c),'fWHFe':function(_0x31c021,_0x53f058){return _0x31c021(_0x53f058);},'ClDfM':function(_0x187431,_0x575336){return _0x187431||_0x575336;},'TFEfH':_0x54d420(0x4ea,0x46e,0x3ee,0x497)};if(!_0x5bab46)return'';if(_0x5bab46[_0x54d420(0x54c,0x4e2,0x56c,0x4f4)]&&_0x5bab46[_0x54d420(0x482,0x4fa,0x557,0x4f4)][_0x54d420(0x59f,0x517,0x53b,0x50c)](_0x3824a8[_0x54d420(0x474,0x492,0x44c,0x4ec)])){const _0x448920=await _0x3824a8[_0x54d420(0x535,0x3d6,0x517,0x496)](getConfigImage,_0x5bab46['imageId']);return _0x3824a8[_0x54d420(0x596,0x532,0x4c7,0x4d4)](_0x448920,'');}if(_0x5bab46['image']&&_0x5bab46[_0x54d420(0x480,0x489,0x4f2,0x50b)][_0x5dc14c(0x2c7,0x276,0x2d9,0x276)](_0x3824a8[_0x54d420(0x5a2,0x45c,0x4d7,0x50a)]))return _0x5bab46[_0x54d420(0x4d3,0x480,0x5c5,0x50b)];function _0x54d420(_0x141bc0,_0x3ae7f3,_0x3147a2,_0x4dcfbd){return _0x5433(_0x4dcfbd-0x311,_0x3ae7f3);}function _0x5dc14c(_0x589c96,_0x50ffb2,_0x1c1d5b,_0x29cdf9){return _0x5433(_0x1c1d5b-0xde,_0x29cdf9);}return'';}async function generateBananaImage({prompt:_0x3724a3,width:_0x1fa4f0,height:_0x90396a,change:_0x127830,retouchPrompt:_0x53b99b,retouchImage:_0x592863}){const _0x2dbca8={'pwmBv':function(_0x4cb96c,_0x355396){return _0x4cb96c+_0x355396;},'rOvCh':function(_0x392b47,_0x5e4812){return _0x392b47+_0x5e4812;},'xJhgj':function(_0x1b0d40,_0x4ccecb){return _0x1b0d40(_0x4ccecb);},'sfOCd':function(_0xed3073,_0x3e50f7,_0x47f216){return _0xed3073(_0x3e50f7,_0x47f216);},'uPKAN':'applicatio'+_0x437e47(0x5da,0x528,0x589,0x658),'dDSgG':function(_0x4da6ea,_0x49b587){return _0x4da6ea(_0x49b587);},'SwxfB':'[Banana]\x20生'+_0x174afa(0xaa,0x100,0x9,0xa0),'dusMB':function(_0x94c6e9,_0x151e20){return _0x94c6e9(_0x151e20);},'xteBv':_0x437e47(0x550,0x50d,0x52f,0x598)+'sing\x20direc'+'t\x20URL\x20as\x20f'+_0x174afa(-0x2c,-0x67,-0x43,0x37),'tfuSx':function(_0x3e6452,_0x3e87ca){return _0x3e6452(_0x3e87ca);},'gUdkg':_0x174afa(0xb3,0x5e,0xdf,0x1f)+_0x437e47(0x600,0x673,0x556,0x5a3)+_0x174afa(0xdc,0x6,0x107,0x47),'RfvFi':function(_0x1a49d2,_0x3eccee){return _0x1a49d2(_0x3eccee);},'cTGMT':_0x437e47(0x51f,0x5df,0x4d5,0x479)+_0x174afa(-0x114,-0x2a,-0xc1,-0x67),'PpDJh':function(_0x375161,_0x461f46){return _0x375161<=_0x461f46;},'mAmwU':function(_0x20a688,_0x5d0373){return _0x20a688+_0x5d0373;},'sBRKv':'\x20|\x20','uLwlg':function(_0x26c9b7){return _0x26c9b7();},'NBDwA':function(_0x3a7a02,_0x3856af){return _0x3a7a02||_0x3856af;},'JRhGF':function(_0x535536,_0x213412){return _0x535536>_0x213412;},'aPrJF':'...','azSoW':function(_0x35b99f,_0x3dd0b0){return _0x35b99f(_0x3dd0b0);},'MJPPu':function(_0x30089d,_0x7c080c){return _0x30089d(_0x7c080c);},'ltlpY':function(_0x179540,_0x24e422){return _0x179540||_0x24e422;},'lVBIC':'Scene\x20Comp'+_0x174afa(0xe,-0x2f,-0x77,-0x49),'OwFvF':function(_0x4b9a1a,_0x3fd784){return _0x4b9a1a===_0x3fd784;},'NtYfl':function(_0x2b5333,_0x2f06d9){return _0x2b5333!==_0x2f06d9;},'Xhnre':_0x174afa(-0x54,0x2,-0x72,-0x53),'WIOZI':function(_0x489fa0,_0x598a56){return _0x489fa0(_0x598a56);},'tWPlQ':_0x174afa(-0x45,-0x81,-0xb5,-0xbd)+_0x437e47(0x59e,0x56c,0x640,0x5ce),'rnSAm':function(_0x2f80f5,_0x308d90){return _0x2f80f5(_0x308d90);},'WSfmF':function(_0x494755,_0x5e5ee5){return _0x494755<=_0x5e5ee5;},'SDEoZ':'标准模式:\x20使用请求'+_0x174afa(0x5e,-0xac,0x57,-0x20),'adFYf':'imagen','YbgrC':'前置后','gOJRW':'后置后','vuEOF':_0x437e47(0x5ab,0x64c,0x5f7,0x546),'mDuQx':function(_0x20b57a,_0x4948d9){return _0x20b57a(_0x4948d9);},'TMDSg':_0x437e47(0x4fe,0x46a,0x53a,0x4e4),'uNtXh':function(_0x4cd61f,_0x422764){return _0x4cd61f(_0x422764);},'AsxRG':function(_0x4e5348,_0x464c9d){return _0x4e5348||_0x464c9d;},'yqlqj':function(_0x4e4ad1,_0x3c0f0a){return _0x4e4ad1!==_0x3c0f0a;},'vNdoy':_0x174afa(0xb,-0x14a,-0xa3,-0x99),'EPXvj':'前置前','uSmpJ':_0x174afa(-0x14,0xa8,0x7,0x36),'CXIeC':_0x174afa(-0x4b,-0xa6,-0xa0,-0x9),'BQcIH':_0x437e47(0x5f3,0x649,0x599,0x587),'NBpWt':function(_0x2b9e4a,_0x51da57){return _0x2b9e4a(_0x51da57);},'VhHVn':'LogJR','GPqsF':'vmhZT','JAYmP':_0x174afa(-0x8b,-0xfb,-0x91,-0x78),'klXiT':_0x437e47(0x573,0x4f8,0x630,0x620),'gWxGU':function(_0x345264,_0x201c7f){return _0x345264(_0x201c7f);},'shyTK':'assistant','Ttrim':_0x437e47(0x53e,0x5cc,0x59a,0x56e),'TXUPb':_0x437e47(0x54b,0x5f7,0x580,0x4f8),'QYgKI':'THPXh','HavZP':function(_0x4d1484,_0x5cca54){return _0x4d1484(_0x5cca54);},'uDxNw':function(_0x1bb5a4,_0x259b6f){return _0x1bb5a4(_0x259b6f);},'MDTRq':_0x174afa(-0xb7,0x6c,-0x3f,0x3),'ORISn':_0x437e47(0x4f5,0x476,0x529,0x441),'FNoXV':function(_0x4448e1,_0x429458){return _0x4448e1+_0x429458;},'AzIIZ':function(_0x19475d,_0x5e3d0b){return _0x19475d===_0x5e3d0b;},'nmWUS':_0x437e47(0x586,0x56d,0x4df,0x644),'jjURm':_0x437e47(0x598,0x50e,0x5c6,0x5b9),'ommWV':_0x174afa(0xd,0x2c,0x147,0x93),'ljwUu':'Kmzfi','JMmyV':function(_0x536515,_0x5f1d5b){return _0x536515(_0x5f1d5b);},'PxaZI':function(_0x56fda4,_0x3b7fd9){return _0x56fda4(_0x3b7fd9);},'FoAzZ':_0x174afa(0xb0,0xd,0x62,0x10),'qMvGr':'POST','MIDnp':_0x437e47(0x553,0x586,0x4c4,0x4b9),'JqYFw':_0x437e47(0x66b,0x71a,0x6f7,0x702),'vrPCQ':function(_0x200660,_0x428989){return _0x200660===_0x428989;},'WUopt':_0x174afa(-0x9e,-0x55,-0xb0,0x0),'DFFpp':_0x174afa(-0x2b,-0x82,-0x91,-0x10),'nSVzh':_0x437e47(0x506,0x48e,0x52d,0x55a)+'/','yeCrT':'FJScP','nWZmK':'txYbO','EhNAd':function(_0x115940,_0x5e75f1){return _0x115940(_0x5e75f1);},'tukvn':_0x174afa(0x5c,0x83,0x35,-0x39)+_0x437e47(0x512,0x489,0x5bd,0x59a)+_0x437e47(0x525,0x4f0,0x50c,0x5cf)+_0x174afa(0x9c,-0x52,0xb2,0x44)+'tracting..'+'.','qdAeo':function(_0x4b1c12,_0x58928a){return _0x4b1c12===_0x58928a;},'YuDOl':'vJIkm','FSPII':function(_0x45875e,_0x277987){return _0x45875e!==_0x277987;},'QRzdc':_0x174afa(-0x94,-0xc9,-0x152,-0xc4),'WdxMW':function(_0x3f8bc5,_0x53ba34){return _0x3f8bc5===_0x53ba34;},'YaBFe':_0x437e47(0x5b6,0x54d,0x5ca,0x53c),'znjbv':function(_0x19ec31,_0x32b7fe){return _0x19ec31(_0x32b7fe);},'nduPT':function(_0x217690,_0x32192f){return _0x217690(_0x32192f);},'EwrVm':_0x437e47(0x51e,0x5be,0x501,0x509)+_0x174afa(-0x3c,-0xb8,0x1,-0x35)+_0x437e47(0x5f4,0x583,0x6b6,0x55e)+'d\x20Markdown'+_0x174afa(-0x5f,-0xce,-0x3c,-0x1a)+_0x437e47(0x5d9,0x57e,0x534,0x582),'uzcAN':_0x437e47(0x536,0x55f,0x519,0x5e4)+'esponse\x20co'+_0x437e47(0x574,0x60b,0x56d,0x4cb)+'t\x20only,\x20no'+_0x174afa(0x1a,0x17,0xac,0x61),'XWMir':_0x437e47(0x5f1,0x563,0x64a,0x627)+'se\x20did\x20not'+_0x437e47(0x591,0x602,0x62c,0x60f)+_0x437e47(0x5bf,0x517,0x648,0x642)+_0x437e47(0x5ee,0x59b,0x56d,0x5e9)+'t','DihOA':function(_0x5b672f,_0x5f1886){return _0x5b672f||_0x5f1886;},'ieAyI':_0x437e47(0x618,0x5ec,0x5e4,0x6cb)};_0x2dbca8[_0x437e47(0x592,0x4f0,0x4e0,0x4eb)](clearLog);const _0x3d25d5=taskQueue[_0x437e47(0x4f1,0x48b,0x49d,0x435)]({'name':_0x2dbca8[_0x437e47(0x617,0x6d4,0x622,0x5b4)](_0x2dbca8[_0x174afa(-0x154,-0x79,-0x39,-0xc2)](_0x3724a3,'')[_0x437e47(0x583,0x590,0x4d6,0x611)](0x2f*0x9b+-0xb2a*0x1+-0x114b,0xc4+0x316*-0xb+0x853*0x4),_0x3724a3&&_0x2dbca8[_0x437e47(0x52b,0x5a6,0x51a,0x566)](_0x3724a3[_0x437e47(0x562,0x5a1,0x558,0x4b0)],-0x1b4f+-0x1e3f+0x39ac)?_0x2dbca8[_0x174afa(-0x5b,-0xe7,-0x9b,-0xc7)]:''),'type':TaskType[_0x437e47(0x5d7,0x5e4,0x60d,0x5cf)],'prompt':_0x3724a3});currentTaskId=_0x3d25d5;function _0x437e47(_0x2d1e8f,_0x1e1128,_0x5965db,_0x4f9238){return _0x5433(_0x2d1e8f-0x380,_0x4f9238);}_0x3724a3=_0x2dbca8[_0x174afa(-0x5a,0x24,-0x47,-0x1d)](processCharacterPrompt,_0x3724a3),_0x3724a3=await _0x2dbca8['xJhgj'](stripChineseAnnotations,_0x3724a3);let _0x476f0b=_0x127830;_0x127830=processCharacterPrompt(_0x127830),_0x127830=await _0x2dbca8[_0x174afa(-0x69,-0x110,-0x17d,-0xc6)](stripChineseAnnotations,_0x127830),addLog(_0x174afa(-0x31,0x2f,0x6e,-0x50)+_0x437e47(0x5bc,0x61e,0x5f3,0x5be)+extension_settings[extensionName][_0x437e47(0x5b3,0x5e4,0x672,0x511)]),_0x2dbca8['dusMB'](addLog,_0x437e47(0x53f,0x550,0x55c,0x53d)+'\x20'+_0x2dbca8[_0x174afa(0x10,0x8c,0x65,0x82)](_0x1fa4f0,'默认')+',\x20高度\x20-\x20'+_0x2dbca8[_0x174afa(-0x8e,-0xa9,-0xa2,-0xc2)](_0x90396a,'默认')),_0x3724a3=_0x127830&&_0x127830[_0x437e47(0x5d4,0x527,0x678,0x5da)]()!==''?_0x127830:_0x3724a3,addLog(_0x174afa(0xd4,0x32,-0x3c,0x43)+_0x3724a3);let _0x32723e=![];_0x3724a3['includes'](_0x2dbca8['lVBIC'])&&(_0x2dbca8[_0x174afa(0xf1,-0x29,0x2c,0x4a)](_0x437e47(0x635,0x5ce,0x645,0x6e8),_0x437e47(0x635,0x6cd,0x611,0x5fd))?_0x32723e=!![]:_0x4ec0d6['removeList'+'ener'](_0x4702a4,_0x2c7980));addLog(_0x437e47(0x5a2,0x577,0x51d,0x609)+'(Divide_ro'+_0x174afa(-0x11,-0x96,-0xca,-0xac)+_0x32723e);let _0x5ef3e5={},_0x39390c='',_0x3bf0f6='';if(_0x32723e){if(_0x2dbca8[_0x437e47(0x50c,0x52f,0x452,0x4b3)]('BwJYH',_0x2dbca8['Xhnre'])){_0x2dbca8[_0x174afa(-0x22,0x7a,0x12,0x9f)](addLog,_0x2dbca8[_0x174afa(0x57,0xcf,0x0,0x25)]),_0x5ef3e5=_0x2dbca8['rnSAm'](parsePromptStringWithCoordinates,_0x3724a3),_0x39390c=_0x5ef3e5[_0x2dbca8['lVBIC']];for(let _0x41d1a3=-0x228b+-0x7*-0x3c4+0x830;_0x2dbca8[_0x437e47(0x500,0x4d9,0x4f1,0x5a7)](_0x41d1a3,-0x121a+0x5e*0x5a+-0x27d*0x6);_0x41d1a3++){_0x5ef3e5[_0x437e47(0x57e,0x603,0x526,0x61f)+_0x41d1a3+_0x437e47(0x55c,0x58e,0x58c,0x593)]&&(_0x3bf0f6=_0x2dbca8[_0x437e47(0x617,0x5a3,0x650,0x5fb)](_0x3bf0f6+',\x20',_0x5ef3e5['Character\x20'+_0x41d1a3+_0x174afa(0x3b,-0x106,-0xc9,-0x65)]));}}else{const _0x38548b=_0x2cf5e0['apply'](_0x323f53,arguments);return _0xf939e2=null,_0x38548b;}}else addLog(_0x2dbca8['SDEoZ']),_0x39390c=_0x3724a3;let {modifiedPrompt:_0x22e83b,insertions:_0x272464}=await _0x2dbca8[_0x174afa(-0x8b,0x9,-0x1b,-0x22)](prompt_replace,_0x39390c,_0x3bf0f6);if(_0x32723e)for(let _0x142cab=-0x2491+0x7*-0x1be+0x30c4;_0x142cab<=-0x1*0x2de+0x1e81+-0x1b9f;_0x142cab++){_0x5ef3e5[_0x174afa(0x17,-0x23,-0x8f,-0x43)+_0x142cab+_0x174afa(-0x3d,-0x11c,-0x5b,-0x65)]&&(_0x22e83b=_0x2dbca8[_0x437e47(0x510,0x57f,0x4c3,0x45b)](_0x2dbca8[_0x437e47(0x617,0x5be,0x5cc,0x5ca)](_0x22e83b,_0x174afa(-0x21,0x2f,0x1f,0x7d)),prompt_replace_for_character(_0x5ef3e5[_0x437e47(0x57e,0x5c1,0x547,0x50c)+_0x142cab+_0x437e47(0x55c,0x54b,0x4a7,0x545)])));}const _0x5da54c=extension_settings[extensionName][_0x437e47(0x558,0x528,0x4f7,0x4a0)],{model:_0x3ea557,apiUrl:_0x1846b2,apiKey:_0x47c67f,conversationPresets:_0x4f64dc,conversationPresetId:_0x11d9a0,editPresetId:_0x329981,aspectRatio:_0x183e6f}=_0x5da54c;_0x2dbca8[_0x437e47(0x4fb,0x532,0x440,0x566)](addLog,'[Banana]\x20S'+_0x437e47(0x4f8,0x56d,0x4ad,0x576)+_0x174afa(0xe,-0xa2,0x9,0x1c)+'tion\x20with\x20'+_0x174afa(-0x56,-0x10,0x3c,0x40)+_0x3ea557);let _0x5d20ee,_0x2a5988;if(_0x3ea557[_0x174afa(-0x52,-0x10,0x29,-0x46)](_0x2dbca8['adFYf'])){_0x5d20ee=_0x174afa(0xe4,0x124,0xdb,0xae)+_0x174afa(0xbb,-0x6e,0xef,0x4d)+_0x3ea557;const _0x293f62={};_0x293f62['fixedPromp'+'t']='';const _0x261fc9=_0x4f64dc[_0x11d9a0]||_0x293f62,_0x5b5e0f=[_0x261fc9[_0x174afa(0x24,0xb0,0x73,0xb)+'t'],_0x272464['前置前'],_0x272464[_0x2dbca8[_0x174afa(0x1d,-0xb3,-0x115,-0x81)]],_0x22e83b,_0x272464['后置前'],_0x272464[_0x2dbca8[_0x437e47(0x609,0x5d9,0x665,0x6c3)]],_0x261fc9[_0x174afa(0x46,0x102,0x114,0x9d)+'mpt'],_0x272464[_0x2dbca8[_0x437e47(0x58f,0x623,0x4f8,0x63a)]]]['filter'](Boolean)[_0x437e47(0x572,0x4f0,0x630,0x516)](',\x20');_0x2dbca8['mDuQx'](addLog,_0x174afa(-0x1e,0x6f,0x7d,-0x4)+_0x5b5e0f);const _0x26b651={};_0x26b651[_0x437e47(0x651,0x600,0x5ed,0x6a5)]=_0x5b5e0f;const _0x5a6604={};_0x5a6604['sampleCoun'+'t']=0x1,_0x5a6604['aspectRati'+'o']=_0x183e6f;const _0x4d9937={};_0x4d9937[_0x437e47(0x537,0x5f1,0x56e,0x51d)]=[_0x26b651],_0x4d9937[_0x437e47(0x669,0x6df,0x6d3,0x5f0)]=_0x5a6604,_0x2a5988=_0x4d9937,_0x2dbca8[_0x174afa(-0x53,0x62,0x96,0x3b)](addLog,'[Banana]\x20B'+_0x437e47(0x5be,0x5c3,0x5f4,0x56f)+_0x174afa(0x67,0x4f,-0x41,-0x6)+'with\x20promp'+_0x437e47(0x4f0,0x4b8,0x4c7,0x5ac)+_0x5b5e0f);}else{_0x5d20ee=_0x437e47(0x514,0x477,0x5a5,0x4a6)+_0x437e47(0x5b4,0x601,0x646,0x5d0);let _0x43aa33;if(_0x127830['includes'](_0x2dbca8[_0x174afa(0x4b,0x7,0x2b,0x29)])){_0x2dbca8[_0x437e47(0x642,0x6fb,0x596,0x6ac)](addLog,_0x174afa(0x53,-0x1c,0x8a,0x38)+_0x174afa(-0x148,-0x89,-0x14d,-0xb9)+'。');const _0x37a66c=_0x2dbca8[_0x174afa(-0x28,-0xa1,0x99,0x1b)](_0x329981,'默认'),_0x52e4b5={};_0x52e4b5[_0x437e47(0x581,0x4f0,0x4dd,0x4bf)+'on']=[],_0x52e4b5[_0x437e47(0x5cc,0x531,0x62e,0x5c2)+'t']='',_0x43aa33=_0x4f64dc[_0x37a66c]||_0x52e4b5,_0x2dbca8['WIOZI'](addLog,_0x437e47(0x603,0x56a,0x5d2,0x5bd)+_0x437e47(0x61d,0x6a1,0x598,0x5e1)+_0x37a66c+'\x22');}else{if(_0x2dbca8[_0x437e47(0x616,0x674,0x632,0x583)](_0x2dbca8['vNdoy'],_0x2dbca8['vNdoy']))_0x50cbd3=!![];else{const _0x1862af={};_0x1862af['conversati'+'on']=[],_0x1862af['fixedPromp'+'t']='',_0x43aa33=_0x4f64dc[_0x11d9a0]||_0x1862af;}}const _0x2a8216=[_0x43aa33['fixedPromp'+'t'],_0x272464[_0x2dbca8['EPXvj']],_0x272464[_0x2dbca8['YbgrC']],_0x22e83b,_0x272464[_0x2dbca8['uSmpJ']],_0x272464[_0x2dbca8['gOJRW']],_0x43aa33[_0x174afa(0x12d,0x15a,0x6a,0x9d)+_0x437e47(0x556,0x614,0x51a,0x513)],_0x272464[_0x2dbca8[_0x174afa(-0xed,-0xa2,-0x23,-0x32)]]]['filter'](Boolean)[_0x437e47(0x572,0x4fa,0x610,0x59c)](',\x20');addLog(_0x174afa(-0xaa,-0x79,-0x91,-0x4)+_0x2a8216);const _0x341713={};_0x341713[_0x437e47(0x585,0x576,0x547,0x519)]=_0x174afa(-0x72,-0xa1,-0x4b,-0x83),_0x341713[_0x437e47(0x58b,0x5da,0x600,0x614)]=[];const _0x3e3b41={};_0x3e3b41[_0x174afa(-0xed,0x20,0xf,-0x3c)]='assistant',_0x3e3b41[_0x437e47(0x58b,0x4f3,0x505,0x500)]=[];const _0x205c7d=_0x43aa33['conversati'+'on']['map'](_0x3ae4db=>[_0x341713,_0x3e3b41])[_0x437e47(0x570,0x5e1,0x4db,0x5fa)]();let _0x5ce81a=0x24d1+-0xf*0x20f+-0x5f0;for(const _0x57fb58 of _0x43aa33[_0x174afa(0x6b,0x34,-0xaa,-0x40)+'on']){if(_0x57fb58[_0x437e47(0x53e,0x586,0x587,0x4b8)]?.[_0x174afa(0x89,-0xbe,0x43,-0x9)])_0x205c7d[_0x5ce81a]['content']['push']({'type':_0x2dbca8['CXIeC'],'text':_0x57fb58[_0x437e47(0x53e,0x5f5,0x485,0x578)][_0x174afa(-0xb2,0x36,0x19,-0x9)]});const _0x2a59fb=await getImageFromTurnData(_0x57fb58[_0x437e47(0x53e,0x4d7,0x49c,0x5a8)]);if(_0x2a59fb)_0x205c7d[_0x5ce81a]['content'][_0x437e47(0x51a,0x57a,0x4af,0x4d2)]({'type':_0x2dbca8[_0x437e47(0x5de,0x527,0x56d,0x64f)],'image_url':{'url':_0x2a59fb}});_0x5ce81a++;if(_0x57fb58[_0x437e47(0x4f2,0x582,0x493,0x570)]?.['text'])_0x205c7d[_0x5ce81a]['content'][_0x437e47(0x51a,0x556,0x47c,0x58e)]({'type':_0x174afa(0x65,0x79,-0x5e,-0x9),'text':_0x57fb58[_0x437e47(0x4f2,0x465,0x433,0x489)][_0x174afa(-0xb4,0x49,-0x5f,-0x9)]});const _0x4cc939=await _0x2dbca8[_0x174afa(-0x3f,-0x13,0x8,-0xa0)](getImageFromTurnData,_0x57fb58['model']);if(_0x4cc939)_0x205c7d[_0x5ce81a]['content'][_0x437e47(0x51a,0x523,0x597,0x469)]({'type':_0x2dbca8['BQcIH'],'image_url':{'url':_0x4cc939}});_0x5ce81a++;}if(!_0x127830[_0x437e47(0x520,0x4b7,0x5d9,0x54f)](_0x2dbca8['TMDSg'])){if(_0x2dbca8[_0x437e47(0x50c,0x544,0x52a,0x5a4)](_0x2dbca8[_0x174afa(0x92,-0xd7,0x5b,-0x19)],'LogJR'))_0x327c40[_0x437e47(0x60d,0x5f4,0x690,0x5de)+'ion']=_0x5d562c;else{const _0x44c887=extension_settings[extensionName][_0x174afa(0x46,0xd0,-0x22,0x86)+'acterPrese'+'ts']||{};for(const _0x2f0108 in _0x44c887){if(_0x2dbca8[_0x174afa(-0xe1,-0x4b,-0x125,-0xbf)]!==_0x437e47(0x5f2,0x5a6,0x5da,0x5a8))_0x21b309=_0x2dbca8[_0x174afa(0x146,0x2d,0x3,0x9a)](_0x2dbca8[_0x174afa(0xfc,0x8c,-0x46,0x56)](_0x35514b,_0x437e47(0x63e,0x606,0x6ac,0x667)),_0x2dbca8[_0x174afa(0x67,0x9,-0x83,0x20)](_0x5daeef,_0x54c593[_0x437e47(0x57e,0x566,0x5d8,0x501)+_0x4d50f0+_0x437e47(0x55c,0x619,0x604,0x4bd)]));else{const _0x464b01=_0x44c887[_0x2f0108],_0x58a0c5=(_0x464b01['triggers']||'')[_0x437e47(0x522,0x59b,0x470,0x4ee)]('|')[_0x174afa(0xb6,0x73,0xd2,0x1e)](_0x3ab3c4=>_0x3ab3c4[_0x174afa(0x3f,-0x63,0x85,0x13)]()!=='');for(const _0x47fb19 of _0x58a0c5){if(_0x2a8216['toLowerCas'+'e']()[_0x174afa(0xf,-0xff,-0x84,-0xa1)](_0x47fb19['toLowerCas'+'e']())){if(_0x2dbca8[_0x174afa(-0x47,-0x55,-0xb5,-0xb5)](_0x2dbca8[_0x437e47(0x65c,0x5cb,0x625,0x68e)],'HdLno')){_0x236480('[Banana]\x20I'+_0x437e47(0x629,0x6c8,0x5db,0x676)+'持酒馆代理，切换为直'+_0x174afa(0x17,-0xae,0xa9,0x5)),_0xa8c97c=_0x36dd0f;const _0x28e4bc={};_0x28e4bc[_0x437e47(0x5e7,0x5f5,0x629,0x5ee)+'pe']=_0x174afa(-0x105,-0xf3,-0xbf,-0x87)+_0x174afa(-0x30,-0x60,0x13,0x19),_0x28e4bc[_0x174afa(-0x3a,0x1f,0x8,0x4c)+'ion']='Bearer\x20'+_0x529349,_0x538e28=_0x28e4bc,_0x2b2c40=_0x16a943;}else{_0x2dbca8[_0x174afa(-0x1a,-0x78,-0x64,0x20)](addLog,_0x437e47(0x5e8,0x6a6,0x5d1,0x53a)+_0x437e47(0x662,0x684,0x713,0x6ed)+'ing\x20trigge'+_0x437e47(0x4f6,0x4e4,0x494,0x5a6)+_0x47fb19+(_0x437e47(0x5af,0x5db,0x5cd,0x507)+'set\x20\x22')+_0x2f0108+'\x22.');const _0x106b38=_0x464b01['conversati'+'on'];if(_0x106b38){const _0x154519=[];if(_0x106b38[_0x174afa(-0x144,-0x80,-0xf,-0x83)]&&_0x106b38['user'][_0x174afa(-0x3a,-0x26,0x4a,-0x9)])_0x154519[_0x174afa(-0x138,-0xa4,-0x128,-0xa7)]({'type':'text','text':_0x106b38['user'][_0x174afa(-0x67,-0x4e,0x4c,-0x9)]});const _0x9459a5=await _0x2dbca8[_0x437e47(0x4f3,0x459,0x553,0x4e8)](getImageFromTurnData,_0x106b38['user']);if(_0x9459a5)_0x154519[_0x437e47(0x51a,0x580,0x57a,0x4ba)]({'type':'image_url','image_url':{'url':_0x9459a5}});if(_0x154519[_0x174afa(-0x65,-0xc4,-0xf9,-0x5f)]>0x110*0x18+-0x712+-0x126e){if(_0x2dbca8['klXiT']===_0x2dbca8[_0x437e47(0x641,0x703,0x703,0x689)]){const _0x7abaa0={};_0x7abaa0[_0x174afa(-0x42,0x4a,-0xb3,-0x3c)]='user',_0x7abaa0[_0x437e47(0x58b,0x507,0x596,0x4ec)]=_0x154519,_0x205c7d[_0x437e47(0x51a,0x53e,0x4d2,0x571)](_0x7abaa0);}else{const _0x3a0f9b={};_0x3a0f9b[_0x437e47(0x581,0x4d1,0x550,0x530)+'on']=[],_0x3a0f9b[_0x174afa(-0x1f,0x59,0x56,0xb)+'t']='',_0xa95aa3=_0x345caf[_0x39b59a]||_0x3a0f9b;}}const _0x2feb21=[];if(_0x106b38[_0x437e47(0x4f2,0x552,0x448,0x55a)]&&_0x106b38['model']['text'])_0x2feb21['push']({'type':_0x2dbca8[_0x437e47(0x5d6,0x53c,0x617,0x63b)],'text':_0x106b38[_0x174afa(-0xa6,-0xbb,-0xdc,-0xcf)][_0x174afa(0x9f,0x19,-0x17,-0x9)]});const _0x4f7ced=await _0x2dbca8[_0x437e47(0x54a,0x4a0,0x605,0x51d)](getImageFromTurnData,_0x106b38['model']);if(_0x4f7ced)_0x2feb21[_0x437e47(0x51a,0x554,0x49d,0x58c)]({'type':_0x2dbca8[_0x437e47(0x5de,0x5bd,0x577,0x5bd)],'image_url':{'url':_0x4f7ced}});if(_0x2dbca8[_0x437e47(0x52b,0x49a,0x48a,0x5e1)](_0x2feb21[_0x174afa(-0x41,-0xf2,-0xda,-0x5f)],0x1755+0x43a*-0x3+0x9*-0x12f)){const _0x2c2db6={};_0x2c2db6[_0x437e47(0x585,0x5fb,0x58d,0x501)]=_0x2dbca8['shyTK'],_0x2c2db6['content']=_0x2feb21,_0x205c7d['push'](_0x2c2db6);}}break;}}}}}}}if(!_0x127830[_0x437e47(0x520,0x5bb,0x494,0x483)](_0x2dbca8[_0x437e47(0x5ea,0x619,0x557,0x557)])){const _0x17275d={};_0x17275d['role']=_0x2dbca8['Ttrim'],_0x17275d[_0x437e47(0x58b,0x4f3,0x62e,0x4e6)]=[{'type':_0x2dbca8[_0x174afa(0x26,-0xf,-0x65,0x15)],'text':_0x2a8216}],_0x205c7d['push'](_0x17275d);}else{if(_0x2dbca8[_0x174afa(0x8b,0xb1,0x93,0x55)](_0x2dbca8[_0x437e47(0x538,0x56f,0x4e6,0x53e)],_0x2dbca8[_0x174afa(-0x39,0x55,-0x5,0x6f)])){const _0x1fb96d=[],_0x7aefb=_0x53b99b||_0x2a8216,_0x5ac435=[_0x43aa33[_0x174afa(0xa0,-0x3d,0x25,0xb)+'t'],_0x7aefb,_0x43aa33[_0x174afa(0x46,0x6f,0x81,0x9d)+_0x437e47(0x556,0x509,0x4c2,0x5c7)]][_0x174afa(0xe,0xda,0xaa,0x1e)](Boolean)[_0x437e47(0x572,0x5e1,0x572,0x58c)](',\x20'),_0x5328c5={};_0x5328c5['type']=_0x2dbca8[_0x437e47(0x5d6,0x603,0x62f,0x5dd)],_0x5328c5[_0x437e47(0x5b8,0x50e,0x55e,0x521)]=_0x5ac435,_0x1fb96d[_0x174afa(-0x21,-0x80,-0x11d,-0xa7)](_0x5328c5);if(_0x592863){const _0x234d34={};_0x234d34[_0x174afa(-0x48,0x40,-0x7c,-0x54)]=_0x592863;const _0x1411a4={};_0x1411a4[_0x174afa(-0x74,0xbc,0xc4,0xd)]=_0x437e47(0x5f3,0x5a5,0x68e,0x5e1),_0x1411a4['image_url']=_0x234d34,_0x1fb96d[_0x174afa(-0x117,-0xb0,-0xbf,-0xa7)](_0x1411a4),addLog(_0x437e47(0x656,0x663,0x66a,0x64c)+_0x437e47(0x599,0x633,0x619,0x508)+_0x174afa(-0x8d,-0x135,-0xbe,-0x8e));}const _0x17bad8={};_0x17bad8['role']=_0x2dbca8['Ttrim'],_0x17bad8[_0x174afa(-0xde,0x46,-0xca,-0x36)]=_0x1fb96d,_0x205c7d[_0x437e47(0x51a,0x503,0x4a5,0x53c)](_0x17bad8),_0x2dbca8[_0x174afa(0x32,0x7a,0x29,0x24)](addLog,_0x437e47(0x656,0x6c7,0x6e6,0x5a5)+_0x437e47(0x637,0x652,0x66f,0x636)+_0x5ac435);}else _0x3be882=_0x36b3b6,_0x5e30b8=_0x2dbca8[_0x437e47(0x59f,0x551,0x5d8,0x4ee)](_0x3d07e3,_0x2dbca8[_0x174afa(0x43,0x62,-0x63,0x2c)],'Bearer\x20'+_0x3a8fd4),_0x639c58=_0x978042,_0x2dbca8[_0x174afa(-0x64,-0x6,-0x91,-0xae)](_0x553e68,_0x437e47(0x603,0x5dd,0x5b9,0x658)+'用直接请求模式');}const _0x5a3626={};_0x5a3626[_0x437e47(0x50f,0x52c,0x481,0x511)+'o']=_0x183e6f;const _0x4ce59a={};_0x4ce59a[_0x174afa(-0x10,0x82,-0x3f,0x6a)+'g']=_0x5a3626,_0x2a5988={'model':_0x3ea557,'messages':_0x205c7d[_0x174afa(0x44,-0x2a,-0x21,0x1e)](_0x5e48d0=>_0x5e48d0[_0x174afa(-0xa8,0x57,0x2,-0x36)][_0x174afa(-0x7c,-0x121,-0x20,-0x5f)]>-0x5*0x215+0xa7*-0xb+-0x1196*-0x1),'config':_0x4ce59a},_0x2dbca8['uDxNw'](addLog,'[Banana]\x20B'+_0x437e47(0x5ad,0x5eb,0x4ed,0x54d)+_0x437e47(0x54d,0x4e3,0x57d,0x4a1)+_0x174afa(-0x1c,-0xaa,-0xfd,-0xb7)+_0x2a5988[_0x437e47(0x62c,0x643,0x628,0x5e9)]['length']+_0x174afa(-0x2d,-0x58,0x1c,0xa));}function _0x174afa(_0x52cc18,_0x5090c4,_0x52515d,_0x16d160){return _0x5433(_0x16d160- -0x241,_0x52515d);}let _0x4038ee=_0x1846b2[_0x174afa(0x9d,0x98,0x44,0x84)](/\/$/,''),_0x233378;_0x4038ee[_0x174afa(-0xab,-0x13,0xb9,0x1)](_0x2dbca8[_0x174afa(-0xeb,-0x57,-0xd5,-0xa9)])||_0x4038ee[_0x174afa(-0xcc,-0xb7,-0x44,-0xa1)](_0x2dbca8[_0x174afa(0x112,0xe7,0xf4,0xa5)])?_0x233378=_0x4038ee+_0x5d20ee:_0x233378=_0x2dbca8[_0x174afa(0x16,0x3,-0x6b,0x51)](_0x2dbca8[_0x174afa(0x9d,-0x2f,0x7b,0x56)](_0x4038ee,_0x2dbca8['MDTRq']),_0x5d20ee);_0x233378=_0x233378[_0x437e47(0x645,0x622,0x62e,0x65c)](/\/v1\/v1\//g,_0x2dbca8[_0x437e47(0x666,0x703,0x634,0x5ea)]);const _0x41ac52=extension_settings[extensionName][_0x174afa(-0x20,0x7d,-0x5f,-0xe)];let _0x3f0657,_0x353cb1,_0x481ed6;if(_0x2dbca8['AzIIZ'](_0x41ac52,_0x2dbca8[_0x437e47(0x663,0x66d,0x64c,0x5bd)])){let _0x34a74b=_0x4038ee;if(!_0x34a74b['endsWith'](_0x2dbca8['MDTRq'])&&!_0x34a74b[_0x174afa(-0x25,-0x10c,-0x137,-0xa1)](_0x2dbca8['ORISn'])){if(_0x2dbca8['OwFvF'](_0x2dbca8[_0x174afa(-0xad,-0xd3,-0xc1,-0xc8)],_0x437e47(0x545,0x4cc,0x58e,0x4c5))){if(_0x344bc9['initialize'+'BananaList'+_0x174afa(0x9c,0x10f,0x34,0x78)]){const _0x7f69c0='3|4|1|2|0'['split']('|');let _0x4cfef2=0x1*-0x1593+0x47*-0x59+0x2e42;while(!![]){switch(_0x7f69c0[_0x4cfef2++]){case'0':_0x49957e(_0x2dbca8[_0x437e47(0x52e,0x4b3,0x4f5,0x580)]);continue;case'1':_0x321b6b[_0x174afa(-0x2f,0x99,0x21,0x1a)](_0x57296e=>{function _0x4bdd2c(_0x54f1e5,_0x366fc1,_0x54968b,_0x175cbd){return _0x437e47(_0x366fc1- -0x273,_0x366fc1-0x75,_0x54968b-0x1be,_0x175cbd);}function _0xcbb1f9(_0x37b153,_0x39ce3f,_0x3d3994,_0x3590ea){return _0x174afa(_0x37b153-0x195,_0x39ce3f-0x13c,_0x37b153,_0x3d3994- -0x156);}_0x6a016e[_0xcbb1f9(-0x1f4,-0x20a,-0x177,-0x20c)+_0x4bdd2c(0x3db,0x3c6,0x32c,0x36b)](_0x57296e,_0x5a46cd);});continue;case'2':_0x1517cf[_0x174afa(-0x9e,0x5c,0x7a,-0x1b)+_0x174afa(-0x45,0xdc,-0x49,0x28)+_0x437e47(0x639,0x5c0,0x6eb,0x62a)]=![];continue;case'3':_0x39c621[_0x437e47(0x5a0,0x4fa,0x574,0x5ae)+'ener'](_0x14c4c6['GENERATE_I'+_0x174afa(0x72,0x9b,0x25,0xa3)+'ST'],_0x3e97a3);continue;case'4':_0x4de783[_0x437e47(0x5a0,0x5ae,0x614,0x65d)+_0x174afa(0x23,0x7e,0x34,0x78)](_0x437e47(0x5e0,0x64b,0x651,0x52f)+'cancel_ban'+_0x174afa(0x35,0x9a,0xb6,0x47),_0x1bb534);continue;}break;}}}else _0x34a74b=_0x34a74b+_0x174afa(0x52,0x54,0x95,0x3);}_0x34a74b=_0x34a74b[_0x174afa(0x3,0x28,0xf1,0x84)](/\/v1\/$/,_0x2dbca8[_0x437e47(0x518,0x5a4,0x542,0x5b2)]),_0x3f0657=_0x437e47(0x5c9,0x621,0x657,0x5ae)+_0x437e47(0x564,0x5ed,0x60d,0x4d8)+_0x437e47(0x5b4,0x658,0x65c,0x610)+_0x174afa(0x14d,0x8d,0x7e,0xa7),_0x353cb1=getRequestHeaders(window[_0x437e47(0x5ff,0x628,0x67f,0x5c5)]);const _0x3473b4={};_0x3473b4[_0x174afa(0x43,-0x80,-0x5d,-0x38)+_0x437e47(0x54c,0x518,0x516,0x4f0)+'ce']=_0x2dbca8['ommWV'],_0x3473b4[_0x437e47(0x648,0x5c8,0x690,0x674)]=_0x34a74b,_0x3473b4['custom_inc'+_0x174afa(-0x33,-0xb3,-0x31,-0x41)+'rs']='Authorizat'+'ion:\x20\x22Bear'+_0x437e47(0x584,0x62a,0x634,0x5ad)+_0x47c67f+'\x22',_0x3473b4[_0x437e47(0x4f2,0x474,0x5ae,0x546)]=_0x3ea557,_0x3473b4[_0x437e47(0x62c,0x664,0x641,0x578)]=_0x2a5988['messages'],_0x3473b4[_0x437e47(0x62e,0x5dc,0x5c6,0x677)]=![],_0x481ed6=_0x3473b4;if(_0x3ea557[_0x437e47(0x57b,0x5cc,0x51f,0x60c)](_0x2dbca8[_0x174afa(-0xdf,-0xfc,-0x46,-0xc5)])){if(_0x2dbca8['yqlqj'](_0x2dbca8[_0x437e47(0x5ec,0x540,0x562,0x61d)],_0x2dbca8['ljwUu'])){const _0x53570c=new _0x156928();_0x53570c[_0x437e47(0x667,0x6ad,0x68d,0x682)]=()=>_0x487c9e(_0x53570c[_0x437e47(0x56f,0x4be,0x562,0x58b)]),_0x53570c[_0x174afa(0x22,0x12a,-0x3f,0x83)]=_0x2ef34d,_0x53570c['readAsData'+_0x437e47(0x61b,0x571,0x5b6,0x58f)](_0x1e796e);}else{_0x2dbca8[_0x174afa(-0xbd,-0x3a,-0x9e,-0x7)](addLog,'[Banana]\x20I'+'magen\x20模型不支'+'持酒馆代理，切换为直'+'接请求'),_0x3f0657=_0x233378;const _0x1fc592={};_0x1fc592['Content-Ty'+'pe']=_0x174afa(-0xd0,-0xd0,-0x10c,-0x87)+'n/json',_0x1fc592[_0x437e47(0x60d,0x5a3,0x5ac,0x63c)+_0x437e47(0x655,0x5f9,0x5fa,0x700)]='Bearer\x20'+_0x47c67f,_0x353cb1=_0x1fc592,_0x481ed6=_0x2a5988;}}addLog('[Banana]\x20使'+_0x437e47(0x5e3,0x629,0x5bf,0x667));}else _0x3f0657=_0x233378,_0x353cb1=_0x2dbca8['sfOCd'](getDirectHeaders,_0x2dbca8[_0x174afa(0x36,-0x6,0xf,0x2c)],_0x174afa(0x28,0x7,-0x2f,0x8f)+_0x47c67f),_0x481ed6=_0x2a5988,_0x2dbca8[_0x437e47(0x4f7,0x592,0x451,0x46c)](addLog,_0x437e47(0x603,0x56d,0x574,0x5db)+_0x174afa(-0x71,-0x14c,-0xc3,-0x8c));_0x2dbca8['WIOZI'](addLog,_0x437e47(0x51e,0x5b4,0x5c7,0x517)+'ending\x20req'+_0x174afa(-0xea,-0x66,-0xa8,-0x84)+_0x3f0657),_0x2dbca8[_0x437e47(0x567,0x520,0x507,0x4aa)](addLog,_0x437e47(0x66a,0x5c1,0x5b1,0x5fb)+'ayload:\x20'+JSON[_0x437e47(0x560,0x5a3,0x4b0,0x55a)](_0x481ed6,null,0xd3a*0x2+-0x17*0xb5+-0xa2f));try{taskQueue[_0x174afa(0xbf,0x3e,0x3,0x41)+'us'](_0x3d25d5,_0x2dbca8[_0x174afa(-0xe0,-0x9e,-0xb8,-0xb0)]);const _0x559f0e=await _0x2dbca8[_0x174afa(0x80,-0xa0,-0xac,-0x22)](fetch,_0x3f0657,{'method':_0x2dbca8[_0x174afa(-0x19,0x57,-0x4d,-0x11)],'headers':_0x353cb1,'body':JSON[_0x174afa(0xd,-0x81,0x46,-0x61)](_0x481ed6)});if(!_0x559f0e['ok']){const _0x43c58e=await _0x559f0e['text']();throw new Error(_0x437e47(0x5d5,0x610,0x634,0x637)+_0x437e47(0x610,0x658,0x574,0x6be)+_0x437e47(0x62a,0x6a0,0x5a8,0x675)+'\x20'+_0x559f0e[_0x437e47(0x565,0x5a6,0x5b9,0x56e)]+':\x20'+_0x43c58e);}const _0x295b41=await _0x559f0e[_0x437e47(0x507,0x54e,0x550,0x50b)]();let _0x30eafb='';const _0x539dc5=_0x295b41[_0x174afa(-0xdf,-0x27,-0x3f,-0x7a)];if(_0x539dc5&&_0x539dc5[_0x174afa(-0xe9,-0x18,0x31,-0x5f)]>-0xb3*-0x23+-0xd4*-0x20+-0x32f9){const _0x10f285=_0x539dc5[-0x3*0x8a+0x111b*-0x2+0x11ea*0x2][_0x174afa(0xfb,0xf5,0x48,0x71)]?.[_0x437e47(0x58b,0x502,0x520,0x61d)];if(Array[_0x437e47(0x57d,0x4cb,0x619,0x576)](_0x10f285))for(const _0x569205 of _0x10f285){if(_0x2dbca8[_0x174afa(0x100,0x100,0xf9,0x63)]===_0x2dbca8[_0x174afa(-0xb5,0x32,-0x76,-0x72)])_0x4f99a9=_0x1c814f;else{if(_0x569205['type']===_0x2dbca8['BQcIH']&&_0x569205[_0x174afa(-0x48,-0x54,0x16,0x32)]){_0x30eafb=typeof _0x569205[_0x174afa(0x3e,0x2,-0x33,0x32)]===_0x174afa(0x16,-0x32,-0x8f,0x0)?_0x569205[_0x437e47(0x5f3,0x614,0x5e9,0x66a)]:_0x569205[_0x437e47(0x5f3,0x694,0x5da,0x540)][_0x174afa(-0x53,0x50,-0x50,-0x54)];break;}}}else{if(_0x2dbca8[_0x437e47(0x561,0x563,0x524,0x57c)](typeof _0x10f285,_0x2dbca8[_0x437e47(0x623,0x647,0x590,0x5ef)])){if(_0x2dbca8[_0x174afa(-0xab,-0x12b,-0xa8,-0xa8)]!==_0x2dbca8[_0x174afa(-0x8,-0x130,-0x139,-0xa8)])_0x2dbca8[_0x174afa(0xf,-0x101,-0xd7,-0xa4)](_0x19ca3c,_0x174afa(0xa9,0x2e,0x7c,0x27)+_0x174afa(0x63,0x3,-0x3f,0x46)+'etch\x20Markd'+_0x437e47(0x5c8,0x613,0x588,0x608)+'\x20'+_0x2bf651['message']),_0x445ece=_0x1f0577,_0x2dbca8[_0x174afa(-0x45,-0xa8,-0xda,-0xae)](_0x3e19a4,_0x2dbca8[_0x174afa(-0x60,-0x69,-0xa8,-0x15)]);else{const _0x5dd1b8=/!\[.*?\]\(((?:https?:\/\/|data:image\/[^;]+;base64,)[^\s\)]+)\)/,_0x584780=_0x10f285[_0x437e47(0x566,0x505,0x52b,0x4b7)](_0x5dd1b8);if(_0x584780&&_0x584780[-0xe67*0x1+0x3*0x80f+-0x9c5]){const _0x3c5578=_0x584780[-0x1*-0x25cf+0xde+-0x2*0x1356];if(_0x3c5578[_0x174afa(-0x73,-0x69,-0x3c,-0x46)](_0x2dbca8[_0x437e47(0x539,0x58b,0x496,0x4a1)]))addLog('[Banana]\x20D'+_0x437e47(0x512,0x5bc,0x576,0x5bc)+_0x437e47(0x66e,0x5be,0x5de,0x60b)+_0x174afa(-0x18,0x62,-0xc4,-0x4c)+'64\x20image.'),_0x30eafb=_0x3c5578,_0x2dbca8[_0x174afa(-0xfe,-0x67,-0x8b,-0x5a)](addLog,_0x437e47(0x51e,0x527,0x4fc,0x472)+_0x174afa(0x8d,-0x85,-0xea,-0x35)+_0x437e47(0x633,0x68d,0x692,0x698)+_0x174afa(-0xe0,-0x20,0x57,-0x64)+'mage\x20from\x20'+'Markdown.');else{if(_0x2dbca8[_0x174afa(-0xd2,-0x170,-0xf5,-0xb5)](_0x2dbca8['yeCrT'],_0x2dbca8[_0x174afa(-0x16e,-0x2,-0x121,-0xb8)])){_0x2dbca8['EhNAd'](addLog,_0x2dbca8[_0x174afa(-0x162,-0xf9,-0x89,-0xd3)]),addLog(_0x437e47(0x56b,0x509,0x606,0x607)+'arkdown\x20im'+_0x174afa(0xad,0xc2,0x4c,0x52)+_0x3c5578);try{if(_0x2dbca8[_0x437e47(0x628,0x5a3,0x605,0x5d4)](_0x174afa(0x65,-0x99,-0xda,-0x26),_0x2dbca8[_0x174afa(0x92,0xb0,0x5,0x8c)]))_0x2dbca8[_0x437e47(0x4f3,0x522,0x4a7,0x48c)](_0x20971b,_0x174afa(-0xdd,-0x5,-0x132,-0xb6)+'库');else{const _0x2563cd=await _0x2dbca8[_0x174afa(-0x8b,-0x74,0x29,-0x22)](fetch,_0x3c5578,{'headers':getDirectHeaders()});if(!_0x2563cd['ok']){if(_0x2dbca8[_0x174afa(0x2c,-0x80,0xa6,0x39)](_0x2dbca8['QRzdc'],_0x2dbca8[_0x174afa(0x14,0xd2,0xa9,0x21)]))_0x212c38['on'](_0x37f7af['GENERATE_I'+_0x174afa(0x120,0xb1,0x3b,0xa3)+'ST'],_0x5ec9e4),_0x20afb8['on'](_0x2dbca8[_0x437e47(0x523,0x55b,0x4cb,0x499)],_0x145338),_0x2dbca8[_0x437e47(0x5b9,0x59f,0x648,0x63e)](_0x4efd28,_0x2dbca8[_0x437e47(0x5e4,0x552,0x5f5,0x5aa)]);else throw new Error(_0x174afa(0x29,-0x129,0x6,-0x91)+_0x437e47(0x4ec,0x441,0x4e4,0x4c0)+_0x174afa(0x13d,-0xd,0x10a,0x8d)+_0x2563cd[_0x174afa(-0x63,-0x7d,-0xf7,-0x5c)]);}const _0x417900=await _0x2563cd[_0x437e47(0x568,0x53d,0x51e,0x603)](),_0x5028da=await new Promise((_0x4650f5,_0x2cf70a)=>{const _0x257fa8=new FileReader();_0x257fa8['onloadend']=()=>_0x4650f5(_0x257fa8[_0x1bc7fd(0x3aa,0x344,0x233,0x2ef)]);function _0x45f15(_0x5c7b37,_0x5c75e5,_0x5b2ff1,_0x3dd69e){return _0x174afa(_0x5c7b37-0x17b,_0x5c75e5-0xdf,_0x5c7b37,_0x5b2ff1-0x2c6);}function _0x1bc7fd(_0x362fc9,_0x15df91,_0x2a3ec5,_0x3a01f7){return _0x437e47(_0x3a01f7- -0x280,_0x15df91-0x36,_0x2a3ec5-0x7b,_0x362fc9);}_0x257fa8[_0x45f15(0x387,0x32d,0x349,0x364)]=_0x2cf70a,_0x257fa8['readAsData'+_0x45f15(0x30d,0x34c,0x320,0x2d7)](_0x417900);});_0x30eafb=_0x5028da,_0x2dbca8[_0x437e47(0x5a5,0x5a8,0x608,0x5d4)](_0x2dbca8[_0x437e47(0x521,0x57a,0x46c,0x578)](String,extension_settings[extensionName][_0x174afa(0x3c,0xba,0xc0,0x6)+_0x174afa(-0xcc,-0xf,-0x8f,-0x70)]),_0x2dbca8['YaBFe'])&&(_0x30eafb=await _0x2dbca8['znjbv'](convertImageToJpeg,_0x30eafb)),_0x2dbca8[_0x174afa(-0x2a,-0x161,-0x8a,-0xaa)](addLog,_0x2dbca8[_0x437e47(0x64b,0x6ad,0x6d7,0x66e)]);}}catch(_0x15871a){if(_0x2dbca8[_0x437e47(0x616,0x563,0x596,0x5fc)]('tNJQd',_0x174afa(-0xe6,-0x136,-0x84,-0x98)))_0x2dbca8[_0x174afa(-0x3f,0x8b,0xf,-0x33)](addLog,'[Banana]\x20F'+_0x437e47(0x607,0x5e4,0x624,0x587)+'etch\x20Markd'+'own\x20image:'+'\x20'+_0x15871a['message']),_0x30eafb=_0x3c5578,_0x2dbca8[_0x174afa(-0xac,-0xa3,-0x96,-0x1d)](addLog,_0x2dbca8[_0x437e47(0x5ac,0x5aa,0x61a,0x63a)]);else throw new _0x313911(_0x174afa(-0x12b,-0x58,-0x23,-0x91)+_0x174afa(-0xa5,-0x41,-0x99,-0xd5)+_0x174afa(0xc1,0x140,0x10a,0x8d)+_0x5f3313[_0x174afa(0x27,-0x1c,-0xd,-0x5c)]);}}else for(let _0x3af173=-0x2*0x1018+0x7*-0x152+0x296f;_0x2dbca8[_0x437e47(0x62d,0x68f,0x6d1,0x5e8)](_0x3af173,0xedf+-0x2*0x17e+-0xbdf);_0x3af173++){_0x23698f['Character\x20'+_0x3af173+_0x437e47(0x55c,0x567,0x4c8,0x585)]&&(_0xa9e06b=_0x2dbca8['pwmBv'](_0x2dbca8[_0x174afa(-0x72,0xd,-0x103,-0xb1)](_0x40ae8b,_0x2dbca8[_0x437e47(0x625,0x59a,0x673,0x6a4)]),_0x4dc4f2(_0x2dbb94[_0x437e47(0x57e,0x5b0,0x5f0,0x50b)+_0x3af173+_0x174afa(0x4c,-0xb2,0x1d,-0x65)])));}}}else _0x2dbca8[_0x174afa(0x13,0xd,-0x69,-0x33)](addLog,_0x2dbca8[_0x174afa(-0x3f,-0x11a,-0x93,-0x62)]);}}}}if(!_0x30eafb)throw new Error(_0x2dbca8[_0x174afa(-0x120,-0xbc,-0x7f,-0xcd)]);return _0x2dbca8[_0x437e47(0x54a,0x593,0x4d5,0x580)](addLog,_0x437e47(0x587,0x5eb,0x600,0x55b)+_0x437e47(0x546,0x4c0,0x490,0x4f9)+_0x437e47(0x61e,0x685,0x566,0x5d7)+_0x437e47(0x5b2,0x596,0x572,0x524)),taskQueue[_0x174afa(0x26,-0x24,0x0,-0x6f)+'sk'](_0x3d25d5,!![]),currentTaskId=null,{'image':_0x30eafb,'change':_0x2dbca8['DihOA'](_0x476f0b,'')};}catch(_0x1f4e5a){const _0x2368f7=_0x2dbca8[_0x174afa(0x12,-0x2b,-0xc,0x3a)][_0x174afa(-0xe6,-0x7e,-0x23,-0x9f)]('|');let _0x9f0cda=0x157c+0x2f*0x6b+-0x2921;while(!![]){switch(_0x2368f7[_0x9f0cda++]){case'0':throw _0x1f4e5a;continue;case'1':console[_0x437e47(0x5b5,0x54f,0x617,0x507)](_0x174afa(-0x6a,0x5d,0x5e,0x27)+_0x437e47(0x615,0x601,0x682,0x6a8)+':',_0x1f4e5a);continue;case'2':if(_0x2dbca8[_0x174afa(0x7,0x107,-0x1a,0x67)](_0x1f4e5a[_0x174afa(0xb3,0x2c,0x59,0x71)],_0x437e47(0x5cf,0x62a,0x559,0x66d))){}else taskQueue[_0x437e47(0x552,0x534,0x54f,0x5ac)+'sk'](_0x3d25d5,![]);continue;case'3':_0x2dbca8[_0x174afa(-0x5d,0x4d,-0x37,0x3b)](addLog,_0x174afa(-0x4c,0xa,0xc6,0x27)+'etch\x20error'+':\x20'+_0x1f4e5a[_0x174afa(0x52,0xb0,0x12,0x71)]);continue;case'4':currentTaskId=null;continue;}break;}}}function _0x5433(_0x5d5022,_0x56c87e){_0x5d5022=_0x5d5022-(0x258d+-0x25a5+0x184*0x1);const _0xbf7a93=_0x5c54();let _0x41628b=_0xbf7a93[_0x5d5022];if(_0x5433['hhHUKn']===undefined){var _0xa9e06b=function(_0x26c0e0){const _0x15229c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5d21ad='',_0x4851b2='',_0x4fcef0=_0x5d21ad+_0xa9e06b;for(let _0x760a92=-0x6f*-0x45+-0x24f*-0x2+0x3*-0xb83,_0x550758,_0x26ba84,_0x16bae9=0x1*0x272+-0x8*-0x38a+0x1f*-0xfe;_0x26ba84=_0x26c0e0['charAt'](_0x16bae9++);~_0x26ba84&&(_0x550758=_0x760a92%(-0x697+0x1*0x1324+-0x1*0xc89)?_0x550758*(-0x26b3*0x1+-0x1c63+0x4356)+_0x26ba84:_0x26ba84,_0x760a92++%(-0x371+0x11b4+-0xe3f))?_0x5d21ad+=_0x4fcef0['charCodeAt'](_0x16bae9+(-0x1645+-0x13*-0xae+0xd*0xb9))-(-0x19e9+-0x14f*0x19+0x3aaa)!==0x24e+-0x9*-0x303+0x1*-0x1d69?String['fromCharCode'](0x2551*0x1+0xc2+-0x2514&_0x550758>>(-(0xc*0x25d+0x1*0x1e57+-0x3ab1)*_0x760a92&-0x1*0x24d5+0x24b+0x2290)):_0x760a92:0x1b20+-0x2cf*-0xa+0x25*-0x17e){_0x26ba84=_0x15229c['indexOf'](_0x26ba84);}for(let _0x57c798=0x1cab+-0x486+-0x1825,_0x151f57=_0x5d21ad['length'];_0x57c798<_0x151f57;_0x57c798++){_0x4851b2+='%'+('00'+_0x5d21ad['charCodeAt'](_0x57c798)['toString'](0xdf9+-0x1472+0x1*0x689))['slice'](-(0x4f*-0x73+0x1*-0x691+0x10*0x2a1));}return decodeURIComponent(_0x4851b2);};_0x5433['UhkOIq']=_0xa9e06b,_0x5433['EWZuEr']={},_0x5433['hhHUKn']=!![];}const _0x40ae8b=_0xbf7a93[-0x21da+0xf8+0x20e2],_0x4dc4f2=_0x5d5022+_0x40ae8b,_0x2dbb94=_0x5433['EWZuEr'][_0x4dc4f2];if(!_0x2dbb94){const _0x7ec06=function(_0x541837){this['kXjLQB']=_0x541837,this['YOhEYM']=[0xdd3+0x8a*0x47+0x1*-0x3418,-0xa45*-0x1+-0x10*0x232+-0x7*-0x38d,0x3d2+0x1c1*-0x7+0x1b1*0x5],this['fAtnNR']=function(){return'newState';},this['tMxkdg']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['DBTAWC']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x7ec06['prototype']['dgzLHk']=function(){const _0x3e6996=new RegExp(this['tMxkdg']+this['DBTAWC']),_0xeb2bf8=_0x3e6996['test'](this['fAtnNR']['toString']())?--this['YOhEYM'][-0x1418+0x5c1+0x198*0x9]:--this['YOhEYM'][-0x1*0xa61+0xfb5+-0x7c*0xb];return this['HiMfIx'](_0xeb2bf8);},_0x7ec06['prototype']['HiMfIx']=function(_0xd9a8ee){if(!Boolean(~_0xd9a8ee))return _0xd9a8ee;return this['VIoJFg'](this['kXjLQB']);},_0x7ec06['prototype']['VIoJFg']=function(_0x4dd11c){for(let _0x44c50b=0x20c6+0x14df*-0x1+-0xbe7,_0x5e6167=this['YOhEYM']['length'];_0x44c50b<_0x5e6167;_0x44c50b++){this['YOhEYM']['push'](Math['round'](Math['random']())),_0x5e6167=this['YOhEYM']['length'];}return _0x4dd11c(this['YOhEYM'][-0xea*0x1f+0xf33*0x1+0xd23]);},new _0x7ec06(_0x5433)['dgzLHk'](),_0x41628b=_0x5433['UhkOIq'](_0x41628b),_0x5433['EWZuEr'][_0x4dc4f2]=_0x41628b;}else _0x41628b=_0x2dbb94;return _0x41628b;}export async function bananaGenerate(_0x34804a){function _0x34edaa(_0x411a83,_0x1f4abd,_0x1765ae,_0x8ca52e){return _0x5433(_0x1765ae- -0x3d9,_0x1f4abd);}const _0x3b1e45={'NQSSs':function(_0x1a1898,_0x4f5b75){return _0x1a1898+_0x4f5b75;},'Tgzdl':_0x2a3578(0x4c1,0x627,0x569,0x53b),'oNqKi':function(_0x5ac680,_0x37dbba){return _0x5ac680(_0x37dbba);},'wBhiJ':'分角色模式:\x20解析带'+_0x34edaa(-0x1f9,-0x21c,-0x1bb,-0x158),'qozpL':_0x34edaa(-0x19e,-0x15b,-0x18f,-0x119)+_0x34edaa(-0x222,-0x163,-0x1e1,-0x248),'CHvtI':function(_0x3f41d0,_0x19d9fd){return _0x3f41d0<=_0x19d9fd;},'UrpSJ':function(_0x52941c,_0x4a2357){return _0x52941c+_0x4a2357;},'BAUGL':function(_0x33aecc,_0x598e56){return _0x33aecc||_0x598e56;},'RzrKZ':function(_0x18897a,_0x33b922){return _0x18897a(_0x33b922);},'EnBzB':_0x2a3578(0x5a2,0x4a2,0x4e3,0x4c8),'BcbYt':function(_0x3f116d){return _0x3f116d();},'dfSQh':function(_0x289a7a,_0x172cec){return _0x289a7a(_0x172cec);},'rsHCe':function(_0x31143b,_0x219a5c){return _0x31143b!==_0x219a5c;},'nloSm':_0x2a3578(0x4d4,0x5cc,0x521,0x5c3),'WbiTB':function(_0x58ecf7,_0x4a6bf4){return _0x58ecf7===_0x4a6bf4;},'LVqgY':'bgobz','ATLYx':_0x34edaa(-0x22b,-0x151,-0x189,-0x1b1),'kzAgH':function(_0x2faf57,_0x2da293){return _0x2faf57!=_0x2da293;},'CWATw':'VWjMk','jlKKH':function(_0x52c400,_0x125f51,_0x46270c,_0x200dc2){return _0x52c400(_0x125f51,_0x46270c,_0x200dc2);},'GaYgp':function(_0x6bcaed,_0xfdde18){return _0x6bcaed(_0xfdde18);},'zhACU':'KjBVX','oanfI':function(_0x3fa150,_0x2f9b14){return _0x3fa150(_0x2f9b14);},'rNRIJ':_0x2a3578(0x627,0x660,0x5dd,0x5ea)};_0x3b1e45[_0x34edaa(-0x211,-0x2a6,-0x1ed,-0x215)](clearLog);let {id:_0x28012e,prompt:_0x4aa113,width:_0x5cfe34,height:_0x5f4224,change:_0x262bed,retouchPrompt:_0x2ea829,retouchImage:_0x4195d0}=_0x34804a;currentRequestId=_0x28012e;function _0x2a3578(_0x5ea282,_0x4abb6b,_0x1b35ff,_0xea9b8d){return _0x5433(_0x1b35ff-0x325,_0xea9b8d);}currentPrompt=_0x4aa113,_0x3b1e45['dfSQh'](addLog,_0x2a3578(0x42d,0x4d7,0x4db,0x55c)+_0x2a3578(0x51f,0x5af,0x55c,0x4a1)+_0x2a3578(0x5cd,0x5af,0x582,0x619)+_0x34edaa(-0x9f,-0x13b,-0x10a,-0x1a7)+_0x34edaa(-0x80,-0x146,-0x11a,-0x60)+_0x28012e+')');let _0x44d1af='';_0x262bed?_0x3b1e45[_0x2a3578(0x666,0x5e0,0x5d4,0x648)](_0x3b1e45[_0x2a3578(0x5ad,0x4b5,0x53a,0x568)],_0x3b1e45[_0x2a3578(0x52e,0x4c5,0x53a,0x4ac)])?_0x363739=_0x3b1e45[_0x34edaa(-0x1b3,-0x171,-0x1bd,-0x10b)](_0x4b2a11+_0x3b1e45[_0x34edaa(-0x286,-0x21a,-0x24b,-0x2c2)],_0xc18245):_0x44d1af=_0x262bed['replaceAll'](_0x34edaa(-0x2e2,-0x2f4,-0x25b,-0x20e),''):_0x44d1af=_0x4aa113;if(_0x262bed&&_0x262bed[_0x2a3578(0x44e,0x4db,0x4c5,0x4c1)]('{修图}')){if(_0x3b1e45[_0x34edaa(-0x25e,-0x17f,-0x21e,-0x22e)](_0x3b1e45['LVqgY'],_0x3b1e45[_0x34edaa(-0x1f7,-0x14c,-0x202,-0x1f8)]))_0x4d1b56[_0x2a3578(0x5dd,0x514,0x523,0x5c6)+_0x354740+_0x34edaa(-0x194,-0x2b3,-0x1fd,-0x2b3)]&&(_0x25441c=_0x3b1e45['NQSSs'](_0x3459f9,',\x20')+_0x20b3c5['Character\x20'+_0x205616+_0x2a3578(0x4d4,0x494,0x501,0x59b)]);else{addLog('Banana修图模式'+'启动');if(_0x2ea829)_0x3b1e45[_0x34edaa(-0xa3,-0x185,-0x133,-0xb2)](addLog,_0x34edaa(-0xa1,-0x159,-0x153,-0x16e)+_0x2ea829);if(_0x4195d0)addLog(_0x2a3578(0x540,0x5a8,0x56a,0x596)+']');}}try{const {image:_0x3de54c,change:_0x439b6f}=await _0x3b1e45[_0x2a3578(0x61c,0x54a,0x5cb,0x566)](generateBananaImage,{'prompt':_0x4aa113,'width':_0x5cfe34,'height':_0x5f4224,'change':_0x262bed,'retouchPrompt':_0x2ea829,'retouchImage':_0x4195d0});if(_0x3b1e45[_0x34edaa(-0x20e,-0x180,-0x211,-0x28e)](extension_settings[extensionName][_0x34edaa(-0x1d7,-0x1d8,-0x14a,-0x12c)],'0')){if(_0x3b1e45[_0x34edaa(-0x1d9,-0x2a2,-0x21e,-0x246)]('VWjMk',_0x3b1e45[_0x34edaa(-0xe5,-0x103,-0x11c,-0x141)])){const _0x366d12={};_0x366d12['change']=_0x44d1af,await _0x3b1e45[_0x34edaa(-0x2cd,-0x15c,-0x21d,-0x1b5)](setItemImg,_0x4aa113,_0x3de54c,_0x366d12),_0x3b1e45['oNqKi'](addLog,_0x2a3578(0x553,0x486,0x51c,0x45c)+_0x2a3578(0x5fa,0x546,0x5b6,0x510)+'\x20'+_0x4aa113),extension_settings[extensionName]['banana']['cishu']?(extension_settings[extensionName][_0x2a3578(0x53f,0x539,0x4fd,0x470)][_0x34edaa(-0x99,-0x129,-0x14d,-0xc8)]=_0x3b1e45[_0x34edaa(-0x250,-0x1af,-0x1bd,-0x230)](extension_settings[extensionName]['banana'][_0x34edaa(-0x1ef,-0x1d5,-0x14d,-0x1e9)],0x29*0x6b+0x1*0x469+-0x1*0x158b),_0x3b1e45[_0x2a3578(0x5bf,0x592,0x5cb,0x5f1)](addLog,_0x2a3578(0x52a,0x4d9,0x4e6,0x48f)+_0x34edaa(-0xda,-0x118,-0x138,-0x100)+extension_settings[extensionName][_0x34edaa(-0x169,-0x148,-0x201,-0x1d6)][_0x2a3578(0x55e,0x60b,0x5b1,0x661)])):(extension_settings[extensionName][_0x2a3578(0x492,0x443,0x4fd,0x4d4)]['cishu']=0x1*-0x1eac+0x28+-0x1*-0x1e85,_0x3b1e45[_0x2a3578(0x63c,0x51c,0x5af,0x558)](addLog,_0x2a3578(0x4f4,0x42b,0x4e6,0x598)+'r\x20prompt:\x20'+extension_settings[extensionName][_0x34edaa(-0x1a5,-0x268,-0x201,-0x277)][_0x2a3578(0x55d,0x636,0x5b1,0x582)]));}else{_0x3b1e45[_0x2a3578(0x5bd,0x4f5,0x5a3,0x4e4)](_0x1c3546,_0x3b1e45[_0x2a3578(0x483,0x48f,0x4b2,0x44e)]),_0x40bdcb=_0x3b1e45[_0x2a3578(0x5d6,0x5bc,0x5a3,0x60c)](_0x16bc33,_0x12507c),_0xd0bb63=_0x5b7786[_0x3b1e45[_0x34edaa(-0x1a4,-0x11c,-0xff,-0x132)]];for(let _0x19bbc7=-0x9d1+0xf9c+-0x5ca;_0x3b1e45[_0x34edaa(-0x1df,-0x127,-0x13f,-0x14e)](_0x19bbc7,-0xca1*-0x1+-0x5a5+0xdf*-0x8);_0x19bbc7++){_0x44d2c1[_0x34edaa(-0x1c7,-0x1de,-0x1db,-0x130)+_0x19bbc7+_0x2a3578(0x51d,0x50c,0x501,0x4a2)]&&(_0x2ade14=_0x3b1e45['UrpSJ'](_0x3b1e45['UrpSJ'](_0xc62768,',\x20'),_0x408fc4[_0x2a3578(0x5e2,0x561,0x523,0x4cc)+_0x19bbc7+_0x2a3578(0x4de,0x5b2,0x501,0x4ee)]));}}}else{if(_0x3b1e45[_0x2a3578(0x437,0x476,0x4e0,0x533)](_0x3b1e45['zhACU'],'GdziU')){_0x3b1e45[_0x34edaa(-0x1dd,-0x1c7,-0x15b,-0x12e)](_0x5ef9c4,_0x34edaa(-0x155,-0x138,-0x160,-0x19d)+_0x34edaa(-0x209,-0x2c4,-0x251,-0x216)+'。');const _0x28ed94=_0x3b1e45[_0x2a3578(0x4ae,0x500,0x4f9,0x4e0)](_0x1cf10f,'默认'),_0x2ebc1f={};_0x2ebc1f[_0x34edaa(-0x165,-0x129,-0x1d8,-0x18b)+'on']=[],_0x2ebc1f[_0x2a3578(0x5ce,0x607,0x571,0x535)+'t']='',_0x2d22cc=_0x1ed467[_0x28ed94]||_0x2ebc1f,_0x3b1e45[_0x34edaa(-0xbc,-0x133,-0x133,-0x1b2)](_0x545e5e,_0x2a3578(0x5cc,0x56b,0x5a8,0x53a)+_0x34edaa(-0x1b9,-0x15d,-0x13c,-0x1b8)+_0x28ed94+'\x22');}else addLog(_0x34edaa(-0x1ee,-0x29a,-0x24e,-0x22f)+'库');}const _0x45dfd2={};_0x45dfd2['id']=_0x28012e,_0x45dfd2[_0x34edaa(-0x13a,-0x162,-0x1fb,-0x1f2)]=!![],_0x45dfd2['imageData']=_0x3de54c,_0x45dfd2[_0x2a3578(0x655,0x571,0x5f6,0x540)]=_0x4aa113,_0x45dfd2['change']=_0x44d1af,eventSource[_0x34edaa(-0x18a,-0x1c4,-0x1cf,-0x16f)](EventType[_0x34edaa(-0x67,-0x163,-0x106,-0xc0)+_0x34edaa(-0x2f2,-0x283,-0x26a,-0x2bb)+_0x2a3578(0x529,0x632,0x57d,0x525)],_0x45dfd2),_0x3b1e45[_0x34edaa(-0x91,-0x163,-0x13a,-0xad)](addLog,_0x2a3578(0x533,0x560,0x594,0x591)+_0x2a3578(0x60d,0x61b,0x578,0x4fa)+_0x2a3578(0x68c,0x614,0x5e0,0x57f)+_0x34edaa(-0x132,-0x1aa,-0x1ef,-0x1d1)+':\x20'+_0x28012e);}catch(_0x4ea743){if(_0x3b1e45[_0x2a3578(0x54c,0x58c,0x4e0,0x512)](_0x3b1e45[_0x34edaa(-0x1c0,-0x19c,-0x123,-0x63)],_0x34edaa(-0x180,-0x1b1,-0x121,-0x104))){const _0x2e8cee=_0x34edaa(-0x147,-0xb1,-0x101,-0xdc)+_0x34edaa(-0x284,-0x24f,-0x258,-0x213)+_0x2a3578(0x4dc,0x522,0x568,0x4a9)+_0x2a3578(0x58f,0x566,0x59b,0x5be)+_0x28012e+':\x20'+_0x4ea743['message'];addLog(_0x2e8cee),console['error'](_0x2e8cee);const _0x84b746={};_0x84b746['id']=_0x28012e,_0x84b746[_0x2a3578(0x549,0x467,0x503,0x4f2)]=![],_0x84b746[_0x2a3578(0x583,0x4fd,0x55a,0x539)]=_0x4ea743[_0x34edaa(-0xec,-0x195,-0x127,-0xf7)],_0x84b746[_0x34edaa(-0x120,-0xcd,-0x108,-0x4e)]=_0x4aa113,eventSource[_0x2a3578(0x53b,0x4e5,0x52f,0x562)](EventType['GENERATE_I'+_0x2a3578(0x434,0x4ed,0x494,0x4d2)+_0x34edaa(-0xd3,-0x15a,-0x181,-0xd4)],_0x84b746),_0x3b1e45[_0x2a3578(0x527,0x537,0x5af,0x600)](addLog,_0x34edaa(-0xdb,-0x1b7,-0x16a,-0x159)+_0x34edaa(-0x120,-0x48,-0xed,-0xf0)+_0x2a3578(0x5a1,0x5b1,0x54f,0x5ce)+'nse\x20for\x20ID'+':\x20'+_0x28012e);}else{const _0x2e8b00={};_0x2e8b00[_0x2a3578(0x573,0x507,0x573,0x534)]=_0x34edaa(-0x117,-0x14f,-0x1a1,-0x201),_0x2e8b00['text']=_0x46f155;const _0x56eefe={};_0x56eefe[_0x2a3578(0x5bb,0x571,0x52a,0x526)]=_0x3b1e45[_0x2a3578(0x482,0x551,0x4cc,0x514)],_0x56eefe[_0x34edaa(-0x151,-0x124,-0x1ce,-0x23f)]=[_0x2e8b00],_0xb5d583[_0x2a3578(0x553,0x4b3,0x4bf,0x565)](_0x56eefe);}}}function handleCancelBananaTask(_0x316569){const _0x223df2={'OfAxT':function(_0x1f03c9,_0x12cd31){return _0x1f03c9(_0x12cd31);},'PXczB':_0x5a5e52(0x3da,0x469,0x51d,0x523),'lRRFh':'任务已取消','qtCjH':function(_0x4aad89,_0x3bb9ac){return _0x4aad89||_0x3bb9ac;}};function _0x5652b5(_0x1c8aff,_0x4a302a,_0x1429dd,_0x26a6ba){return _0x5433(_0x4a302a-0x27b,_0x26a6ba);}const {taskId:_0x174029}=_0x316569;function _0x5a5e52(_0x510dca,_0x1ebaf3,_0x4e64d8,_0x4a1dbf){return _0x5433(_0x1ebaf3-0x252,_0x510dca);}_0x223df2[_0x5a5e52(0x557,0x4a4,0x487,0x3e9)](addLog,_0x5652b5(0x506,0x568,0x4ec,0x59b)+_0x5652b5(0x583,0x537,0x560,0x519)+_0x5652b5(0x591,0x560,0x53f,0x58e)+_0x174029+')');if(currentTaskId===_0x174029&&currentRequestId){const _0xd3d0e7=_0x223df2[_0x5652b5(0x40d,0x495,0x45f,0x42e)]['split']('|');let _0x5800b8=0x1*-0xb88+0xd04+-0x17c;while(!![]){switch(_0xd3d0e7[_0x5800b8++]){case'0':eventSource[_0x5a5e52(0x45d,0x45c,0x3c0,0x4f8)](EventType[_0x5652b5(0x546,0x54e,0x536,0x4d9)+_0x5a5e52(0x43f,0x3c1,0x473,0x359)+_0x5a5e52(0x483,0x4aa,0x521,0x404)],{'id':currentRequestId,'success':![],'error':_0x223df2[_0x5a5e52(0x4f8,0x4cf,0x57e,0x54f)],'prompt':_0x223df2['qtCjH'](currentPrompt,'')});continue;case'1':addLog(_0x5652b5(0x488,0x4eb,0x598,0x484)+'消当前任务，发送失败'+'响应\x20(ID:\x20'+currentRequestId+')');continue;case'2':currentRequestId=null;continue;case'3':currentTaskId=null;continue;case'4':currentPrompt=null;continue;}break;}}}function _0x5c54(){const _0x459a94=['DvbQvw0','zMfYAs81mZCUmW','u3D4zKi','qML3tw8','rMfPBgvKihrVia','ie5uideWlJa7ia','q25lDe4','55Qe5zU+54Mh','kI8Q','55sO55U05O6L6k+35Rgc5QIH5BYp','w0jHBMfUyv0GuG','Aw5ZDgfUy2vZ','vfHvugi','BLnwEMG','yxbWBgLJyxrPBW','v2jPvei','AMXls0G','DwvZDcb0BZOG','DxnLCG','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','wwjNCKm','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','rMTfq3y','q2XezK0','BunirKG','tKX0r2G','BwfNzsbNzw5LCG','y2HVAwnLCW','A3Pbz0G','sgrmBM8','z1D4r1u','DwvHAM4','zxrPB25FC291CG','Bw9KywWGCgf5Ba','q21TzLu','sNfzrNC','w0jHBMfUyv0Gvq','CgvNu3rVCMfNzq','y29TCgXLDgvuyq','D0TnEMS','qKfvr0W','y0zSDei','Bxb0','qvrmwxG','yMfUyw5H','mta4nJaWmeTQCfvctW','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','yxvKwwu','ifbYB21WDa','zcbIyxnLnJqGAq','C3vJy2vZCW','DxPJqu4','C3rYAw5NAwz5','DNjqq1e','BgvUz3rO','Aw1Hz2vjza','BMrZl2nOyxqTyW','C3rHDhvZ','Bwf0y2G','uhHHwKK','yMXVyG','Bgffu0y','BNnLigzVCIbjra','w0jHBMfUyv0Gtq','qMnIwxq','DxjS','vfD0s2W','CMvZDwX0','zMXHDa','5BYa5AEliejHBMfUyEEuNW','AM9PBG','tu9XEu8','BNrHAw5ZihrLEa','zwrKzwqGyMfZzq','mtfYzeH6EeO','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','B3nPDgLVBG','vezfzKG','Aw1Hz2u','C3rHCNrZv2L0Aa','q0rVBuq','AxnbCNjHEq','q2HHCMfJDgvYia','Dg9tDhjPBMC','BhvKzv9OzwfKzq','y29UDMvYC2f0Aq','suPPuum','C3vIC3rYAw5N','zxiG','CM9Szq','AML1z3vHBG','w0jHBMfUyv0Gsq','w0jHBMfUyv0Gra','y2HHDf9JB21WBa','zw1PDa','y29UDgvUDa','DwnJzxnZzNvSBa','Bwvqvwu','Dur4tNC','DNvft0y','vMfxBNC','ignVBNrHAw4GAq','DuX3BgC','ksbbChbSzvDLyG','y2zNAw1NxW','BMXVu20','m295wKX6CW','mxWWFdn8mNW0','AKfIvKi','5zU+5QIH5BYp77YA5BEY5RE75yQG5B6f5l+U5Ps5','ufHJEKi','vvftuva','tLftu3m','BMXxq1y','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','C2zpq2q','CMvTB3zLtgLZDa','5lIT55QeihbYB21WDooaGG','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','mJqWmZq3twfrBxDV','yxPtB1C','v2r4tvC','Aw5PDgLHBgL6zq','igLTywDLihrVia','vMHivM4','zffusNu','BhvYzsbYzxnWBW','5PYa5zco572U','EhrLqNy','DwLSDcbTDwX0Aq','DuvNEfe','iIbMCM9TihbYzq','Cu12r3i','BvjgD1O','C3nMDwXSEs4','y2XPzw50','B21WBgv0Aw9UCW','zxjYB3i','Dhj1zq','zwnLAxzLzcbPBq','Dgv4Da','uMz2rMK','Bur1uxG','BIbWyxLSB2fKia','5zU+5Rwb56Il44cc5A6I5OI356UV5lI6','5Q2J6z2I5O+q56s66k+noIa','DwLSDcbjBwfNzq','BwfNzsbPBIbpCa','nhWZFdb8mxWY','C3rYAw5N','zw5KC1DPDgG','zMfPBgvKigzVCG','l3yX','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','5O6L6k+35Rgc','y29UDMvYDfrVsG','B3DUigLTywDLoG','l2fWAs9IywnRzq','u2nLBMuGq29TCa','ig1LC3nHz2vZlG','zML4zwrqCM9TCa','qwnJzxb0','DhLWzq','5lU75yQH5BEY5y+w5RAi','BNnkA04','CNvUBMLUzW','t2zbEfq','BwL0DgvKihn1yW','DhjPBq','qvbjihjLCxvLCW','q1Hjzum','qKfoqu5b','tLnf','yMfZzty0lG','BI9QC29U','zM9YrwfJAa','qxn4uKC','ywDLigDLBMvYyq','qLfJsuG','zMLSDgvY','C3rFy2HHDhu4xW','EePOz2O','uvj6zgm','55sO6yws6AAg5lUJ55cg5QIH5BYp','y1rhtvq','sgf2wLa','DfDqBfe','q29UDgvUDc1uEq','w0jHBMfUyv0GrG','qMfUyw5HtgLZDa','ve1eu2C','s0HdEvK','BgP3vxu','Dvblqu4','zw5bssbMB3jTyq','w0jHBMfUyv0Grq','w0jHBMfUyv0G5y+w','qvbjihjLC3bVBG','DM1OwLq','Aw1Hz2vFDxjS','EsbJB252zxj0zq','t3bHz0q','ieLeia','5zco572U5yMn','ywXSyMfJAY4','w0jHBMfUyv0G5zcV','rLnqsuK','AwvbEuK','CM5tqw0','BfjsrMG','B05Xs2K','Dg9Rzw4','y2fUy2vSx2jHBG','Bw9KzwW6ia','DxbKyxrLu3rHDa','w0jHBMfUyv0G5l2/','55sO5lQo55sF5OIq55QevgfNoIa','z2uGvvjmlcbLEa','5l+U5zU+5OYh5lUKoIa','ywLSzwqGDg8GzG','yw5Hx3rHC2S','z09kuLC','r2fzz3a','t3DgDKy','y2LZAhu','qxv0Ag9YAxPHDa','zgvSCY8','y2fJAgu','DcbMywLSzwqGDW','B3iGChjVBxb0oG','rK5Vwfy','ywDLifvstdOG','y29UC3rYDwn0BW','zxrJAcbLCNjVCG','ExfSCwO','CK92q2G','m3WXFdj8nhWW','zxnWB25ZzsbJBW','q0H2DeK','vvjm','s2L0lZuZnY4ZnG','55sO5l+U5zU+6Ake6k6+oIaI','yxrLzcbZDwnJzq','B2fUzKK','mM9qD1znzW','CIbWCM9TChq6ia','igLTywDLlG','v1vVChq','tuLeBNa','C0jss3y','uNPYs1O','ndy4mJG3mhfqALPTwa','Cwrbzw8','BwfNzw4G5QIH5z6l5lIn5PsV','AxrOihn0yxr1CW','Aw1Hz2vdB25MAq','BwvZC2fNzxm','uhbesMG','C3rYzwfT','CNniq2u','uvLNs0K','qvrQsvO','BwvZC2fNzq','EsbLEhrYywn0zq','mJmXyLnutwje','vNrOsMS','CK5ssuO','5zU+5QIH5BYp77YA5OYh5lUKid0G','C1bku3a','zw5LCG','otLJC05KBe0','y2vZCYbYzxnWBW','5yIW5y+w5RAi5lU75yQH5lQl5lU2icHu','q1DbvhC','ihWG','C3qGkeLeoIa','Bw9AzKe','A2XyAvq','Du50wgG','BhrSCfK','B25LCNjVCG','CMvWBgfJzq','A1zbwuC','yMfUyw5Hq2HHCG','y3vZDg9Tx3vYBa','C2vHCMnO','nZy5otG2mhDiDwzxwG','rxDYvM0','AwTLieDLy2TVkq','wxvet2W','ztOG','DgLVBIbYzxf1zq','qMvHCMvYia','ChjVBxb0','w0jHBMfUyv0G55sF','r0vorvjbvevFsq','y3vZDg9T','Aw9U','w0jHBMfUyv0G5l+U','BfzVEvK','w0jHBMfUyv0GrW','uuXSwhu','Cw96CeW','ChDTqNy','sKfzBva','vxnLCI1bz2vUDa','Cg9ZDgzPEfbYBW','mcaOv2LUzg93CW','v0LpwKK','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','B3vUzcbTyxrJAa','BM1xvvm','tufhrv9srvfvrq','yxnRsuq6ia','t1jju24','B25SB2fKzw5K','l2DLBMvYyxrL','CgfYyw1LDgvYCW','w0jHBMfUyv0Gua','DvfKuem','BwL0DgvKigzHAq','w0jHBMfUyv0G5Ps2','CMTKB3DUigvTyG','l3yXyMv0ys9TBW','zMv0y2GGAw1HzW','otm4otzSshDHDw8','DhvRDM4','tufhrv9srvnqtW','DdOG','ywrKvgfZAW','Bw9KzwW','Dgz1u3G','wfDnAxi','l3yXlW','CIaI','sK1TEvy','DgfYDgLUzYbPBq','AMPvuM0','yvbYsKy','tuPquhu','ywrgwwy','t2jmwee','E+s/RUwBVN0','tKjeD0e','v1nMBuy','zw5LCMf0Aw9Uia','r1bXC0y','icHlsfrntcWGBa','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','zLDirMu','zgf0ytPPBwfNzq','ANnVBG','55sO5lQgihVKV67LM759ioAGH+IVHG','BLDABuS','B2fKihDPDgGG','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','tNrzzMW','D0jOAuO','vgD6zgW','yxnWzwn0uMf0Aq','BufTD1u','rM9bELO','zxrLy3rLzcbnyq','zertz0C','l3yXl2nOyxqVyW','BgvZktOG','mtm1mtHds3nVC1e','BMr1ufq','turuuNe','rezgCha','ChvZAa','r29jBe4','mtq5odi3nwvKC3Puta','zhvZtui','w0jHBMfUyv0GuW','yMfUyw5HioEuN+wBVUs6IW','Aw5JBhvKzxm','tKjWv3q','C3bSAxq','z1vKA2C','kcGOlISPkYKRkq','CMTKB3DUigLTyq','CMX3zKi','rw5cEKi','ruD0D2u','v3P0sKq','tw96AwXSys81lG','sLjOr0y'];_0x5c54=function(){return _0x459a94;};return _0x5c54();}function initializeBananaListener(){const _0x42ce37={'rlwfB':_0x179878(0x317,0x21b,0x2d0,0x2f1)+_0x179878(0x2e9,0x332,0x2f0,0x2c1)+'ana_task','FkECv':function(_0x3492d8,_0x2bed02){return _0x3492d8(_0x2bed02);},'kVAYG':_0x179878(0x1ec,0x267,0x20f,0x298)+_0x179878(0x2c9,0x215,0x24a,0x294)};function _0x4b8f67(_0x20de7f,_0x40a85e,_0x74bdd5,_0x5bc5c6){return _0x5433(_0x20de7f-0xb4,_0x74bdd5);}function _0x179878(_0x164d13,_0xdea85d,_0x3b59c6,_0x18dc91){return _0x5433(_0x3b59c6-0x70,_0x18dc91);}eventSource['on'](EventType[_0x179878(0x392,0x370,0x343,0x38d)+'MAGE_REQUE'+'ST'],bananaGenerate),eventSource['on'](_0x42ce37[_0x4b8f67(0x25a,0x221,0x233,0x203)],handleCancelBananaTask),_0x42ce37[_0x179878(0x191,0x2f3,0x232,0x2bf)](addLog,_0x42ce37[_0x179878(0x369,0x281,0x336,0x394)]);}export async function replaceWithBanana(){function _0xaccb99(_0x2fc61d,_0x23066b,_0x5a6b84,_0x55ba91){return _0x5433(_0x5a6b84- -0x30c,_0x2fc61d);}const _0x27edd1={'XxtTb':_0xaccb99(-0xd1,-0x8f,-0x14e,-0x141),'QLlXu':function(_0x494bf7){return _0x494bf7();},'cFltB':function(_0x47e3a7){return _0x47e3a7();},'IJiQC':function(_0x371a5e,_0x29d445){return _0x371a5e!==_0x29d445;},'TBvAY':_0xaccb99(-0x110,-0xe4,-0x148,-0x88),'fiHdK':_0xaccb99(-0xc3,-0x12f,-0xcc,-0x174),'gVFYJ':function(_0x13f793,_0x5b7a36){return _0x13f793(_0x5b7a36);},'QOUqr':_0xaccb99(-0x93,-0x24,-0x3a,-0x5e)+_0xc2b4dc(0x36f,0x349,0x3a5,0x369),'xTeTw':_0xaccb99(0x6,-0xf1,-0xac,-0x48)+_0xc2b4dc(0x321,0x2e8,0x24d,0x273)+_0xc2b4dc(0x2d2,0x2f0,0x36f,0x27d)};function _0xc2b4dc(_0x43fac6,_0x3092d7,_0x1655a3,_0x310e2b){return _0x5433(_0x3092d7-0x68,_0x1655a3);}if(extension_settings[extensionName]['mode']==_0xaccb99(-0x19e,-0xff,-0x134,-0x154))!window['initialize'+_0xaccb99(-0x57,-0xbf,-0xa3,-0xf6)+_0xaccb99(-0x7,-0x67,-0x53,-0xd8)]&&(window[_0xaccb99(-0x15d,-0x8a,-0xe6,-0x111)+'BananaList'+_0xaccb99(-0x4b,-0xdf,-0x53,-0x59)]=!![],_0x27edd1[_0xaccb99(-0xdc,-0x1e,-0x33,0xc)](initializeBananaListener)),_0x27edd1[_0xc2b4dc(0x223,0x23d,0x25e,0x260)](initializeImageProcessing);else{if(_0x27edd1[_0xaccb99(-0x14e,-0xdb,-0x10a,-0x9e)]('mCHFH',_0x27edd1['TBvAY'])){const _0x5a4f04={};_0x5a4f04[_0xc2b4dc(0x2d4,0x26d,0x300,0x282)]=_0x27edd1['XxtTb'],_0x5a4f04[_0xaccb99(-0x1aa,-0x77,-0x101,-0x7f)]=_0x2724c2,_0x57abb9['push'](_0x5a4f04);}else{if(window[_0xaccb99(-0x7b,-0xf1,-0xe6,-0xe5)+_0xc2b4dc(0x2bd,0x2d1,0x369,0x22a)+_0xaccb99(0x51,-0x76,-0x53,-0x6b)]){const _0x1a1c09=_0x27edd1['fiHdK'][_0xc2b4dc(0x1e4,0x20a,0x16b,0x25e)]('|');let _0x1a1d52=0xe93+0x1*0x22bd+-0x18a8*0x2;while(!![]){switch(_0x1a1c09[_0x1a1d52++]){case'0':LEGACY_EVENT_NAMES['forEach'](_0x342f34=>{function _0x5833ff(_0x595d52,_0x5cc5ca,_0x445f45,_0x3b0278){return _0xaccb99(_0x5cc5ca,_0x5cc5ca-0x29,_0x445f45- -0xc9,_0x3b0278-0x1c7);}eventSource['removeList'+_0x5833ff(-0x105,-0x1dc,-0x11c,-0x179)](_0x342f34,bananaGenerate);});continue;case'1':window['initialize'+_0xaccb99(-0xa8,-0x126,-0xa3,-0x128)+_0xc2b4dc(0x2b7,0x321,0x38a,0x328)]=![];continue;case'2':_0x27edd1['gVFYJ'](addLog,_0x27edd1['QOUqr']);continue;case'3':eventSource[_0xaccb99(-0x53,-0x147,-0xec,-0x74)+'ener'](_0x27edd1['xTeTw'],handleCancelBananaTask);continue;case'4':eventSource['removeList'+'ener'](EventType[_0xc2b4dc(0x2d6,0x33b,0x2a1,0x353)+_0xaccb99(-0xb,-0x92,-0x28,-0x7f)+'ST'],bananaGenerate);continue;}break;}}}}}