(function(_0x389c7d,_0x5464d9){const _0xadaa9f=_0x389c7d();function _0x25265a(_0x2418fc,_0x5d5109,_0x5f3be7,_0x156738){return _0x537c(_0x5d5109-0x2fa,_0x156738);}function _0x7ad3a1(_0x30412a,_0x3ee9ca,_0x24f98e,_0x18e8a9){return _0x537c(_0x24f98e- -0xa3,_0x3ee9ca);}while(!![]){try{const _0x12a17c=parseInt(_0x7ad3a1(0x6b,0x17,0x83,0xf9))/(0x3ee*-0x3+0x33*-0x9d+-0x2*-0x1589)+parseInt(_0x7ad3a1(0x8,0x33,0x20,0x50))/(-0x17a1+-0x25a7+0x3d4a)+-parseInt(_0x7ad3a1(0x93,0x133,0xfb,0x9c))/(0xb21+-0x3a*-0x86+-0x297a)+parseInt(_0x7ad3a1(0x61,0x6c,0x94,0xb5))/(-0x218+0x1b3f+-0x1923)*(parseInt(_0x25265a(0x3a8,0x3f6,0x3e7,0x396))/(0x126+0xf*0x153+-0x2*0xa7f))+-parseInt(_0x25265a(0x499,0x474,0x44d,0x4cd))/(0x79d+0x1fcb+-0x1*0x2762)+parseInt(_0x25265a(0x4df,0x47f,0x48f,0x3ea))/(0xd98+-0x6*0x129+-0x69b)+parseInt(_0x7ad3a1(0xbd,0x3,0x5b,-0x1e))/(-0x67*-0x1+0x179*0x7+-0xaae);if(_0x12a17c===_0x5464d9)break;else _0xadaa9f['push'](_0xadaa9f['shift']());}catch(_0xc54093){_0xadaa9f['push'](_0xadaa9f['shift']());}}}(_0x4660,0x5fdd2+0xd5b65+0x1f*-0x590e));const _0x348f6d=(function(){const _0x5a74bf={'vAhWf':function(_0x4a0e1d,_0x52c9c5){return _0x4a0e1d(_0x52c9c5);},'fNzuH':function(_0x1038af,_0x36d217){return _0x1038af||_0x36d217;},'dEcvF':_0x28d1a3(0x220,0x19a,0x28c,0x22d),'wRzgh':_0x35087e(-0x290,-0x2f8,-0x24c,-0x325),'jWIMp':function(_0x5bf177,_0x42cb0a){return _0x5bf177+_0x42cb0a;},'ujlNa':_0x28d1a3(0x296,0x254,0x259,0x22f),'wDaMx':function(_0x3c6fac,_0x127b12){return _0x3c6fac!==_0x127b12;},'UWImo':_0x28d1a3(0x1dd,0x159,0x16c,0x223),'skFHx':function(_0x4984a3,_0x432acb){return _0x4984a3!==_0x432acb;},'ieZQX':_0x35087e(-0x24e,-0x234,-0x1e4,-0x257),'CGoBm':_0x35087e(-0x2b7,-0x2c6,-0x22a,-0x2bc)};function _0x35087e(_0x7f9bfb,_0x41938e,_0x24c1b0,_0x8d9481){return _0x537c(_0x7f9bfb- -0x336,_0x41938e);}let _0x1d41ae=!![];function _0x28d1a3(_0x4d8745,_0x104d97,_0x15a739,_0x5cd629){return _0x537c(_0x4d8745-0x13a,_0x15a739);}return function(_0x17e2a2,_0x2ed93c){const _0x188025={'fixQT':function(_0xec6a53,_0x4acea2){function _0x3fe971(_0x1401fa,_0x24a584,_0x5778eb,_0x5763ad){return _0x537c(_0x1401fa- -0x32f,_0x24a584);}return _0x5a74bf[_0x3fe971(-0x285,-0x28f,-0x2aa,-0x1ed)](_0xec6a53,_0x4acea2);},'RAIUt':'[Banana]\x20启'+_0x4bbb43(0x398,0x3a8,0x3e9,0x360)+'。','DGHzN':function(_0x1d0397,_0x198a6c){function _0x21bdc8(_0x3f0ebe,_0x23d714,_0x5ce2a5,_0x524af2){return _0x4bbb43(_0x3f0ebe-0x1e9,_0x23d714- -0x39,_0x3f0ebe,_0x524af2-0x41);}return _0x5a74bf[_0x21bdc8(0x251,0x2dc,0x282,0x30c)](_0x1d0397,_0x198a6c);},'HGHFT':_0x5a74bf['dEcvF'],'iBnkC':_0x5a74bf[_0x4bbb43(0x302,0x317,0x285,0x2a6)],'CyTkb':_0x2d1b4a(0x467,0x4cf,0x48d,0x4a0),'DqHZA':function(_0x38e12f,_0x5517c8){function _0x237491(_0x4b1646,_0x1dc8c8,_0x8a7bb4,_0x147ddc){return _0x4bbb43(_0x4b1646-0x136,_0x147ddc- -0x2b4,_0x8a7bb4,_0x147ddc-0x1f2);}return _0x5a74bf[_0x237491(0xfd,0x15d,0x5e,0xf2)](_0x38e12f,_0x5517c8);},'RIqbg':_0x5a74bf['ujlNa'],'IdhGA':function(_0x19362b,_0x44b928){function _0x5bcf4a(_0x5e8bd1,_0x33c434,_0x267d52,_0x3606bb){return _0x2d1b4a(_0x33c434,_0x33c434-0xc1,_0x267d52-0x189,_0x5e8bd1- -0x268);}return _0x5a74bf[_0x5bcf4a(0x2c7,0x2fb,0x2f7,0x243)](_0x19362b,_0x44b928);},'Vrfqr':_0x5a74bf[_0x4bbb43(0x354,0x3b2,0x3dd,0x37d)],'SaTRy':function(_0x892449,_0x5c482c){return _0x5a74bf['skFHx'](_0x892449,_0x5c482c);},'aIqUu':_0x5a74bf[_0x4bbb43(0x323,0x2ca,0x334,0x2f0)]};function _0x2d1b4a(_0x553008,_0x318686,_0x38fb94,_0x29c80b){return _0x35087e(_0x29c80b-0x6f8,_0x553008,_0x38fb94-0x1d7,_0x29c80b-0xf3);}function _0x4bbb43(_0x44b22e,_0x55aa69,_0x4ed74f,_0x436a29){return _0x35087e(_0x55aa69-0x554,_0x4ed74f,_0x4ed74f-0x16e,_0x436a29-0x2a);}if(_0x5a74bf[_0x4bbb43(0x2fb,0x2a7,0x334,0x244)](_0x5a74bf[_0x4bbb43(0x378,0x307,0x362,0x391)],_0x5a74bf['CGoBm'])){_0x188025[_0x4bbb43(0x327,0x35e,0x32e,0x336)](_0x35aa82,_0x188025[_0x2d1b4a(0x466,0x4b6,0x4a6,0x4d8)]);const _0x41abf8=_0x188025[_0x4bbb43(0x353,0x342,0x2d1,0x373)](_0x462be1,'默认'),_0x43a446={};_0x43a446[_0x2d1b4a(0x526,0x4a8,0x4e2,0x4f2)+'on']=[],_0x43a446[_0x2d1b4a(0x561,0x598,0x524,0x562)+'t']='',_0x50aca5=_0x1ecb87[_0x41abf8]||_0x43a446,_0x275a11('[Banana]\x20使'+_0x2d1b4a(0x522,0x541,0x441,0x4b6)+_0x41abf8+'\x22');}else{const _0x1db8b4=_0x1d41ae?function(){function _0x128870(_0x5441c8,_0x52faf7,_0x4a95f9,_0x5daa1a){return _0x2d1b4a(_0x4a95f9,_0x52faf7-0x178,_0x4a95f9-0x1da,_0x52faf7- -0x600);}function _0x5d79a7(_0x37a783,_0x32211d,_0x4f7c5b,_0x4cc6ad){return _0x2d1b4a(_0x4f7c5b,_0x32211d-0x76,_0x4f7c5b-0x13e,_0x37a783- -0x486);}const _0x1458d3={'hhMWj':function(_0x389f88,_0x3b4a49){return _0x188025['DqHZA'](_0x389f88,_0x3b4a49);},'BKzmh':function(_0x22fba4,_0x1131a5){return _0x22fba4+_0x1131a5;},'NTlze':_0x188025[_0x5d79a7(-0x3e,-0x80,-0x35,-0x37)]};if(_0x188025[_0x128870(-0x148,-0x161,-0x1f4,-0x1da)](_0x128870(-0x1e6,-0x19b,-0x15c,-0x1a2),_0x188025[_0x5d79a7(0x8d,0x63,-0xa,0x106)])){const _0x3d43d6=[],_0x5a6c4c=_0x154c61||_0xa2389b,_0x2f6973=[_0x455a2a['fixedPromp'+'t'],_0x5a6c4c,_0x56cb12[_0x5d79a7(-0x2d,0x0,-0x25,-0x7f)+_0x5d79a7(-0x46,0x1b,-0x3e,0x4)]][_0x5d79a7(0xa6,0xfd,0x9a,0x5a)](_0xfb2432)[_0x128870(-0x14d,-0x1c8,-0x147,-0x249)](',\x20'),_0x5f5ad1={};_0x5f5ad1[_0x5d79a7(-0x49,-0xc6,0x20,-0x56)]=_0x188025['HGHFT'],_0x5f5ad1['text']=_0x2f6973,_0x3d43d6[_0x128870(-0x176,-0x148,-0x162,-0x1a3)](_0x5f5ad1);if(_0x1b8c55){const _0x209beb={};_0x209beb[_0x128870(-0x14f,-0x14d,-0x126,-0x1b0)]=_0x4f8203;const _0xfac317={};_0xfac317[_0x5d79a7(-0x49,0x1e,-0x6c,-0x97)]=_0x188025[_0x128870(-0x1b6,-0x188,-0x21e,-0x1f7)],_0xfac317['image_url']=_0x209beb,_0x3d43d6[_0x5d79a7(0x32,-0x17,0x15,-0x1f)](_0xfac317),_0xef09a6(_0x5d79a7(0x69,0x50,0x5a,0xe6)+_0x128870(-0x171,-0x181,-0x176,-0x156)+_0x128870(-0xbc,-0x10b,-0xe7,-0x87));}const _0x4a7812={};_0x4a7812[_0x5d79a7(-0x31,0x5b,0x5,0x44)]=_0x188025[_0x5d79a7(0xa3,0x138,0xeb,0x85)],_0x4a7812['content']=_0x3d43d6,_0x5dcaf9[_0x5d79a7(0x32,0xab,-0x55,0xa5)](_0x4a7812),_0x5743ed(_0x5d79a7(0x69,0x30,0xcd,0x7e)+_0x128870(-0x158,-0x134,-0xe1,-0x193)+_0x2f6973);}else{if(_0x2ed93c){if(_0x188025[_0x5d79a7(0x97,0x7e,0x26,0x6)](_0x188025[_0x128870(-0x229,-0x1bc,-0x1be,-0x132)],_0x188025['aIqUu']))_0x2e5b5b=_0x1458d3['hhMWj'](_0x1458d3['BKzmh'](_0x25acf8,_0x1458d3[_0x128870(-0x191,-0x14e,-0x1de,-0x1c4)]),_0x1eca80);else{const _0x4467e5=_0x2ed93c[_0x5d79a7(0xd6,0x146,0x148,0x9a)](_0x17e2a2,arguments);return _0x2ed93c=null,_0x4467e5;}}}}:function(){};return _0x1d41ae=![],_0x1db8b4;}};}()),_0x2218cf=_0x348f6d(this,function(){const _0x552eec={};function _0x456130(_0x1f6972,_0x2d5321,_0x29ae73,_0x130e96){return _0x537c(_0x2d5321-0x2c1,_0x29ae73);}function _0x5bd044(_0x592ee5,_0x39ea83,_0x2033cd,_0x2ddad9){return _0x537c(_0x2ddad9- -0x3a2,_0x2033cd);}_0x552eec[_0x456130(0x3c2,0x453,0x3f8,0x3de)]=_0x5bd044(-0x271,-0x254,-0x276,-0x259)+'+$';const _0x1f884c=_0x552eec;return _0x2218cf[_0x456130(0x387,0x359,0x37d,0x2e2)]()[_0x5bd044(-0x2ba,-0x21c,-0x329,-0x2a5)](_0x1f884c[_0x5bd044(-0x21c,-0x1ca,-0x25f,-0x210)])[_0x5bd044(-0x380,-0x293,-0x281,-0x30a)]()['constructo'+'r'](_0x2218cf)[_0x456130(0x404,0x3be,0x3a5,0x427)](_0x1f884c[_0x5bd044(-0x1b2,-0x185,-0x212,-0x210)]);});_0x2218cf();import{extension_settings}from'../../../../extensions.js';import{eventSource}from'../../../../../script.js';function _0x4660(){const _0x355ca1=['yMfUyw5HioEuN+wBVUs6IW','C3bUAwy','ifbYB21WDa','zxrJAcbLCNjVCG','C1jQC1a','q1Phzvm','rxDYuMu','BKDPDwK','rePLyKK','AujUA0m','Dg5TsKm','B09nDMS','BhvYzsbYzxnWBW','E+s/RUwBVN0','tLnf','l3yXlW','5zU+5QIH5BYp77YA5BEY5RE75yQG5B6f5l+U5Ps5','yxnWzwn0uMf0Aq','B21WBgv0Aw9UCW','DfH5reC','BI9QC29U','Aw5ZDgfUy2vZ','mtq3mta4ofvlsgPysW','DwLSDcbTDwX0Aq','qLn5BNO','C3nMDwXSEs4','t2PKAgW','rMzjv1u','yMfUyw5H','5l+U5zU+5OYh5lUKoIa','CxLLChO','qMriwhO','uuXbvNG','5yMn572U5zco','A1rQD3e','B3vUzcbTyxrJAa','CMzevui','BwL0DgvKigzHAq','BNnLigzVCIbjra','y2XPzw50','DwLSDcbjBwfNzq','vKvSENG','CwrYt1O','w0jHBMfUyv0Gua','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','tMnmuhq','rwHusgC','Aw1Hz2vdB25MAq','swrOr0e','DxnLCG','tKjWy2O','shPhy2m','Bw9Kzq','ieLeia','zwnLAxzLzcbPBq','y2HVAwnLCW','ANHJyKG','Dgv4Da','CMvTB3zLtgLZDa','wxLwwuC','q0DVqM0','w0jHBMfUyv0G5zcV','q29UDgvUDc1uEq','q3PRvMC','C2v0ici','BgvZktOG','ywDLigDLBMvYyq','tLrSEMu','DxjS','BwfW','ig1LC3nHz2vZlG','55sO5l+U5zU+6Ake6k6+oIaI','5BYa5AEliejHBMfUyEEuNW','ChvZAa','zK56DuG','thHYzge','D1j6z2G','CKXgrMm','yxHyt3e','mJG0nJvKA2T1Aem','C2vHCMnO','nJe3nJi0zNbhCgf0','ru9hy1C','y2HHBMDL','sunRyK4','zgf0ytPPBwfNzq','zuPtyu4','y2vZCYbYzxnWBW','EhLAtNC','wuzpt0O','tufhrv9srvfvrq','w0jHBMfUyv0G5l2/','Bw9KywWGCgf5Ba','5zU+5QIH5BYp77YA5OYh5lUKid0G','ueruB2O','sKzLq1C','BwfNzsbNzw5LCG','zMXHDa','ALnyrMy','CvnssLG','Aw1Hz2vU','uwfWDwu','y29UDgvUDa','w0jHBMfUyv0G55sF','Dg9mB3DLCKnHCW','uKfjvxq','5PYa5zco572U','tufhrv9srvnqtW','tMfAuKW','zxnWB25ZzsbJBW','BwfNzsbPBIbpCa','C3bSAxq','w0jHBMfUyv0GuW','Cvvnsgm','BvzZy2y','w0jHBMfUyv0GuG','te1PCwm','CM9Os3G','twzSAK0','reDiEK4','Aw1Hz2u','otm2oti4uwjKuKPQ','BuD1qLi','qM93ruu','C3vJy2vZCW','tLjJDw4','r0vorvjbvevFsq','ugrAthe','w0jHBMfUyv0G5l+U','vfHHDvi','DwvZDcb0BZOG','y29UDMvYC2f0Aq','qvbjihjLCxvLCW','DdOG','55Qe5zU+54Mh','zw5LCMf0Aw9Uia','Bw9KzwW6ia','B0rgtMe','mta0BfrsqK1v','ChvNyvi','wxrdq3i','vfjoDhq','EgvPA1K','wxzPA2K','DhjPBq','sKv0Cw4','C3rHCNrZv2L0Aa','zML4uvq','AxrUq04','ywXYzve','qvbjihjLC3bVBG','DuL0C2y','C2uGzgLKig5VDa','w0jHBMfUyv0GqG','Bw9KzwW','CMvWBgfJzq','kcGOlISPkYKRkq','B0HAvKC','w0jHBMfUyv0GrG','Aw5PDgLHBgL6zq','yxLSB2fKoIa','r1PKAMe','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','vu9wrKq','vNjMCxi','BvLRq2q','l3yXyMv0ys9TBW','AMzTr3C','5zco572U5yMn','B2v1s2u','wNLtwhC','BKnlDNi','5zco572U5zco','CunIDwu','u2fuuNK','l3yX','DhjPz2DLCNm','CfzVuLm','C3rYAw5NAwz5','vND6y0O','s0nlqNu','yxrLzcbZDwnJzq','5yMn572U5yMn','vxHTzvm','B3iGChjVBxb0oG','B3nPDgLVBG','q3LuA2i','t2HHD0O','w0jHBMfUyv0Gsq','zMLSDgvY','qwvrrgS','Aw5JBhvKzxm','D0rHtxG','vej2re0','y2LZAhu','ihWG','zuD6tu8','vgzeBfu','q2HHCMfJDgvYia','AxrOihn0yxr1CW','Aw5NihrYAwDNzq','CIbWCM9TChq6ia','ywn0zxjqCMvZzq','zw5LCG','kerPDMLKzv9YBW','ntK5mdeXmMfNyKr5Eq','zxjYB3i','BgvUz3rO','qMfUyw5H5l+U5zU+5QIH5BYp','lcdPQ5JLUQyGlsa','zeHYque','EwnOCfm','DcbMywLSzwqGDW','q2Tsseu','rhvwC1q','Aw1Hz2veyxrH','mZm2nZa4nhL3ww5jEG','BwvZC2fNzq','Aw9U','ALDjtxa','igLTywDLlG','55sO5lQgihVKV67LM759ioAGH+IVHG','ANL0DeK','AMvXtKO','v1v6vxe','r29Osxe','sfjYqLC','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','D2PODxC','BNrHAw5ZihrLEa','vvDjBw8','qMfUyw5HtgLZDa','vfHlCgy','EK5Xvwu','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','Au1VC3e','yxbWBhK','Aw1Hz2vjza','Bw1stNO','yM5YyKG','mJq1nZiWnfziCwvbvG','ue1lzMi','zML4zwrqCM9TCa','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','q2zvwLC','yxnZAxn0yw50','ue9tva','C3rYAw5N','AM9PBG','ANjuvue','CIaI','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','v0Hpsw0','DhLWzq','sfjhy1m','BNjoz3a','Bxb0','r1nWsKC','vM5UsvG','y2fJAgu','yuLXvxu','s3jsqu8','DwLmvMe','w0jHBMfUyv0Grq','uKLXyMC','u2nLBMuGq29TCa','wwfAuMm','C2TgshG','B3Dytg0','BMLvzfy','u1zsqLC','C2fTCgXLq291BG','reLzr1e','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','ignVBNrHAw4GAq','CMvWBgfJzufSBa','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','CM9Szq','u0zNq2i','DcbVBMX5lcbUBW','zgDPrNq','Cg9ZDgzPEfbYBW','Dg9tDhjPBMC','CgfYyw1LDgvYCW','ufLUEem','Bwnyy24','Bwnty2m','DgLVBIbYzxf1zq','yKvNEfC','z0jWzhO','q0rPzg8','B2frqKC','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','Dwvyy3i','A1Lqv3q','D3DhAK8','Aw1Hz2vFDxjS','zw1PDa','BwL0DgvKihn1yW','ChjVBxb0','DKfOv2y','y2zNAw1NxW','AwvAuvG'];_0x4660=function(){return _0x355ca1;};return _0x4660();}import{extensionName,EventType}from'./config.js';import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';async function getImageFromTurnData(_0x325ab2){const _0x21063e={'CfUZW':function(_0x3e4ec6,_0x5d6360){return _0x3e4ec6+_0x5d6360;},'DuVsT':function(_0x4a83de,_0x42488f){return _0x4a83de+_0x42488f;},'LMiqc':'\x20|\x20','TRNtt':function(_0x358fbc,_0x396e9f){return _0x358fbc(_0x396e9f);},'dxxoI':_0x452d84(0x329,0x329,0x2d7,0x320),'wwGjO':function(_0x235434,_0x34de2d){return _0x235434(_0x34de2d);},'BdHXz':_0x452d84(0x2bd,0x2ec,0x32e,0x335),'EOGcW':function(_0x46703d,_0x26ff9c){return _0x46703d===_0x26ff9c;},'mcXcn':_0x452d84(0x414,0x33e,0x37e,0x2f5)};if(!_0x325ab2)return'';function _0x381a70(_0x3048e2,_0x4ba8ff,_0x22cc2f,_0x2cb3ee){return _0x537c(_0x3048e2-0xe5,_0x4ba8ff);}if(_0x325ab2[_0x452d84(0x442,0x348,0x3c7,0x3c9)]&&_0x325ab2['imageId']['startsWith'](_0x21063e['dxxoI'])){const _0xfca9d4=await _0x21063e[_0x452d84(0x27e,0x29b,0x2d1,0x2db)](getConfigImage,_0x325ab2['imageId']);return _0xfca9d4||'';}if(_0x325ab2[_0x381a70(0x20a,0x25d,0x25b,0x17d)]&&_0x325ab2[_0x381a70(0x20a,0x1f5,0x1cc,0x283)]['startsWith'](_0x21063e[_0x381a70(0x1b1,0x16e,0x1e4,0x1f6)])){if(_0x21063e[_0x381a70(0x1e4,0x1dd,0x271,0x163)](_0x21063e['mcXcn'],_0x21063e[_0x452d84(0x2da,0x2be,0x2c7,0x253)]))return _0x325ab2[_0x381a70(0x20a,0x1a2,0x192,0x187)];else _0x135c1e[_0x452d84(0x380,0x389,0x39f,0x399)+_0x40a0c9+'\x20Prompt']&&(_0x2cc0e8=_0x21063e[_0x381a70(0x287,0x2cc,0x27b,0x29f)](_0x21063e[_0x452d84(0x430,0x324,0x3af,0x324)](_0x50140f,_0x21063e[_0x452d84(0x38e,0x3a2,0x34d,0x3a5)]),_0x21063e[_0x381a70(0x21f,0x1fa,0x284,0x251)](_0x28ee27,_0x102d7b[_0x452d84(0x3d4,0x373,0x39f,0x33c)+_0x3c5922+'\x20Prompt'])));}function _0x452d84(_0x49c824,_0x189783,_0x22e129,_0x32aeac){return _0x537c(_0x22e129-0x22c,_0x189783);}return'';}async function generateBananaImage({prompt:_0x1290a0,width:_0x471bdd,height:_0x3baac0,change:_0x13bcac,retouchPrompt:_0x5f466c,retouchImage:_0x353673}){const _0xb1bcd1={'TXKpf':function(_0x39564f,_0x39a707){return _0x39564f<=_0x39a707;},'DJebI':function(_0x4c1248,_0x35c9ed){return _0x4c1248+_0x35c9ed;},'rLFFc':'\x20|\x20','FfIWU':function(_0x277342,_0x585c7f){return _0x277342(_0x585c7f);},'pugaR':_0x5b2dfc(0x27a,0x288,0x290,0x2e4),'oOMvk':function(_0x12b6ef,_0xaabbfb){return _0x12b6ef(_0xaabbfb);},'mmRNz':_0x589bda(-0xa3,-0xce,-0x12c,-0xa0)+'中的\x20prompt。','VnnIX':function(_0xb18b26,_0x30f78d){return _0xb18b26(_0x30f78d);},'ceUYN':_0x589bda(-0x1ee,-0x15b,-0x12d,-0x1d7)+_0x5b2dfc(0x259,0x264,0x33d,0x2b7),'EwrRe':function(_0x39191f,_0x2488da){return _0x39191f(_0x2488da);},'owXLm':_0x5b2dfc(0x362,0x360,0x2d9,0x2eb)+_0x5b2dfc(0x3c3,0x418,0x44a,0x3d6),'mcScc':_0x5b2dfc(0x3a3,0x364,0x326,0x324),'CkRHE':'user','VElzx':_0x589bda(-0x12c,-0x12c,-0xcb,-0x95)+_0x589bda(-0x1b7,-0x12a,-0x152,-0x181)+_0x5b2dfc(0x2fc,0x2dd,0x2c0,0x2ce)+_0x589bda(-0xe7,-0x154,-0x131,-0x105)+'enAI\x20forma'+'t','TfDlU':function(_0x3384d4,_0x12a3cd){return _0x3384d4+_0x12a3cd;},'ZySXw':function(_0x31ccaa,_0x1f890d){return _0x31ccaa(_0x1f890d);},'eJSaN':function(_0x2e3573,_0x42ef85){return _0x2e3573(_0x42ef85);},'jyttI':function(_0x24cf05,_0x1469cb){return _0x24cf05||_0x1469cb;},'iMosq':function(_0x7a8c76,_0x32c9b6){return _0x7a8c76||_0x32c9b6;},'mGuBR':function(_0x1db6ba,_0x44828a){return _0x1db6ba!==_0x44828a;},'nCKvr':function(_0x3bee02,_0x432bbf){return _0x3bee02(_0x432bbf);},'EoRzH':_0x589bda(-0x1ff,-0x1e8,-0x207,-0x23e)+_0x5b2dfc(0x3fa,0x3df,0x364,0x3a4),'BCIFJ':function(_0x695ff1,_0xfbb9b7){return _0x695ff1(_0xfbb9b7);},'XNCXH':_0x5b2dfc(0x32c,0x252,0x247,0x2cd)+_0x589bda(-0x8d,-0x120,-0xe7,-0xb0),'mVscf':function(_0x267e96,_0x324785){return _0x267e96===_0x324785;},'oHZVG':_0x5b2dfc(0x354,0x2e1,0x3d4,0x377),'tXyDG':_0x5b2dfc(0x294,0x32f,0x329,0x319),'RFyLD':function(_0x51a7f7,_0xc6efb8){return _0x51a7f7+_0xc6efb8;},'QLAVx':function(_0x5ae952,_0x235087){return _0x5ae952+_0x235087;},'pVoRS':function(_0x359636,_0x2a983e,_0x1a1d3c){return _0x359636(_0x2a983e,_0x1a1d3c);},'BVpwP':function(_0x4ab0ae,_0x1c388d){return _0x4ab0ae!==_0x1c388d;},'bEgxW':'jeqNJ','DIYGQ':'dsUNN','PdZLq':function(_0x26fd90,_0x28ff0d){return _0x26fd90(_0x28ff0d);},'qdrOZ':_0x589bda(-0xff,-0x15e,-0x13c,-0x13a),'jfmGw':_0x5b2dfc(0x371,0x317,0x3d6,0x3a1),'ychpS':_0x589bda(-0x218,-0x1a1,-0x155,-0x1fa),'ycnsv':_0x5b2dfc(0x3a1,0x3b1,0x33c,0x393),'eGzMO':_0x589bda(-0x163,-0x116,-0x114,-0xa1),'HRGcS':function(_0x5d05ac,_0x12961c){return _0x5d05ac(_0x12961c);},'dgiFt':_0x589bda(-0x126,-0x160,-0x14f,-0x197),'JEtqn':'/v1/chat/c'+_0x589bda(-0x200,-0x1b0,-0x1e1,-0x1a4),'itnCN':'{修图}','YFOOJ':_0x589bda(-0x167,-0x185,-0x1ce,-0x12a)+_0x5b2dfc(0x426,0x437,0x3ce,0x3c8)+'。','niUdV':function(_0x1b1100,_0x2b0ae4){return _0x1b1100(_0x2b0ae4);},'JNTPT':_0x5b2dfc(0x319,0x2c3,0x3cf,0x355),'BowEE':_0x5b2dfc(0x3c2,0x344,0x369,0x350),'GZdja':_0x589bda(-0x157,-0x177,-0x165,-0xe7),'qyepz':'cIaeq','qSRJX':_0x5b2dfc(0x297,0x284,0x2b7,0x2de),'SVRBW':function(_0x3d198f,_0x49e83b){return _0x3d198f(_0x49e83b);},'alreQ':function(_0x46d736,_0xee2f91){return _0x46d736(_0xee2f91);},'dHrAA':function(_0x4b7ad7,_0x2ffa0d){return _0x4b7ad7>_0x2ffa0d;},'rohKx':function(_0x49664a,_0x5814bf){return _0x49664a===_0x5814bf;},'PMKfb':_0x589bda(-0x12f,-0x10b,-0xa5,-0x195),'nGiui':_0x5b2dfc(0x362,0x2d6,0x33d,0x30d),'oaQBG':_0x589bda(-0x3d,-0xcc,-0x62,-0x145),'oDFNa':function(_0x3a6d9b,_0x3d1a5f){return _0x3a6d9b||_0x3d1a5f;},'OhawJ':function(_0x4c5f3b,_0x3e3b8a){return _0x4c5f3b(_0x3e3b8a);},'UOVFD':function(_0x3b1973,_0x5bf7e2){return _0x3b1973+_0x5bf7e2;},'CZGeS':function(_0x57220d,_0x1db0ef){return _0x57220d+_0x1db0ef;},'BZcRY':function(_0x2d2634,_0x38012a){return _0x2d2634+_0x38012a;},'quQYW':_0x589bda(-0x192,-0x113,-0x19d,-0xc1),'PDToj':_0x5b2dfc(0x381,0x315,0x34c,0x2fa),'Yviki':function(_0x5ca822,_0x5a9d8f){return _0x5ca822(_0x5a9d8f);},'QYSoU':_0x589bda(-0x17d,-0x1fb,-0x227,-0x25b),'qUMHc':function(_0x51f350,_0x555ab8){return _0x51f350!==_0x555ab8;},'NRcun':_0x589bda(-0x1d2,-0x19e,-0x20a,-0x223),'NtuQB':function(_0x247e77,_0x222c63){return _0x247e77>_0x222c63;},'CzkVg':_0x5b2dfc(0x343,0x2e6,0x242,0x2b3),'KrRAO':_0x589bda(-0xf4,-0x10e,-0x84,-0x146),'NaZRL':_0x5b2dfc(0x431,0x430,0x384,0x3cb),'qCbue':function(_0x4d5ebc,_0x1511a9){return _0x4d5ebc===_0x1511a9;},'PYnxC':_0x589bda(-0x1d9,-0x1c1,-0x1c8,-0x240),'gBpdz':'[Banana]\x20F'+_0x589bda(-0x1f7,-0x1bf,-0x21b,-0x1f1)+':'};_0x1290a0=processCharacterPrompt(_0x1290a0),_0x1290a0=await _0xb1bcd1[_0x589bda(-0x1f2,-0x1b7,-0x214,-0x12b)](stripChineseAnnotations,_0x1290a0);let _0xa2749b=_0x13bcac;_0x13bcac=processCharacterPrompt(_0x13bcac),_0x13bcac=await _0xb1bcd1[_0x589bda(-0x97,-0x118,-0xeb,-0x187)](stripChineseAnnotations,_0x13bcac),_0xb1bcd1['eJSaN'](addLog,_0x589bda(-0x153,-0x17a,-0xe6,-0x137)+'图流程。客户端为'+extension_settings[extensionName][_0x5b2dfc(0x359,0x378,0x2b3,0x312)]),_0xb1bcd1['ZySXw'](addLog,'请求尺寸:\x20宽度\x20-'+'\x20'+_0xb1bcd1[_0x589bda(-0xc3,-0xe4,-0x134,-0xf2)](_0x471bdd,'默认')+_0x589bda(-0x6d,-0xf1,-0xb3,-0xe0)+_0xb1bcd1[_0x5b2dfc(0x3e3,0x3a2,0x469,0x3d7)](_0x3baac0,'默认')),_0x1290a0=_0x13bcac&&_0xb1bcd1[_0x589bda(-0x16b,-0x148,-0xd3,-0xe0)](_0x13bcac[_0x5b2dfc(0x379,0x40e,0x369,0x37b)](),'')?_0x13bcac:_0x1290a0;function _0x589bda(_0x119fe4,_0x2ed433,_0x11b477,_0x2f99cc){return _0x537c(_0x2ed433- -0x26f,_0x119fe4);}_0xb1bcd1[_0x5b2dfc(0x3e6,0x3fb,0x406,0x396)](addLog,'用于生成的Tag:\x20'+_0x1290a0);let _0x412fad=![];_0x1290a0['includes'](_0xb1bcd1['EoRzH'])&&(_0x412fad=!![]);_0xb1bcd1[_0x589bda(-0x18b,-0x1a7,-0x1ab,-0x1c8)](addLog,_0x5b2dfc(0x2d8,0x297,0x33d,0x2d0)+_0x589bda(-0x163,-0xf6,-0x18b,-0x14a)+_0x589bda(-0x107,-0x181,-0x153,-0x210)+_0x412fad);let _0x3368f4={},_0x1d282e='',_0x5e5895='';if(_0x412fad){_0xb1bcd1['BCIFJ'](addLog,_0xb1bcd1['XNCXH']),_0x3368f4=parsePromptStringWithCoordinates(_0x1290a0),_0x1d282e=_0x3368f4[_0x5b2dfc(0x2a6,0x2b2,0x290,0x2c5)+'osition'];for(let _0x1291df=-0x73d+0x13*0x1cd+-0x565*0x5;_0xb1bcd1[_0x5b2dfc(0x388,0x34a,0x3cf,0x3d4)](_0x1291df,-0x1a*0xb+-0x20b1+0x21d3);_0x1291df++){if(_0x3368f4[_0x589bda(-0x112,-0xfc,-0x126,-0x187)+_0x1291df+_0x589bda(-0x23e,-0x1c0,-0x234,-0x16b)]){if(_0xb1bcd1['mVscf'](_0xb1bcd1[_0x5b2dfc(0x329,0x300,0x320,0x388)],_0xb1bcd1[_0x589bda(-0x162,-0x1af,-0x118,-0x209)]))for(let _0x2ff2d5=-0x47b+0x1a53+-0x15d7;_0xb1bcd1[_0x589bda(-0x14c,-0xd9,-0x110,-0x45)](_0x2ff2d5,-0xd4a+-0x4a8+0x11f6);_0x2ff2d5++){_0x5ad745[_0x589bda(-0xbc,-0xfc,-0x68,-0x139)+_0x2ff2d5+_0x589bda(-0x12a,-0x1c0,-0x160,-0x189)]&&(_0xee9ee2=_0xb1bcd1[_0x589bda(-0x13c,-0x1ba,-0x14a,-0x1d6)](_0xb1bcd1['DJebI'](_0x662d92,_0xb1bcd1[_0x5b2dfc(0x3c7,0x349,0x35c,0x338)]),_0xb1bcd1[_0x589bda(-0x1f0,-0x1a7,-0x135,-0x235)](_0x554477,_0x207217[_0x5b2dfc(0x35b,0x352,0x372,0x3b1)+_0x2ff2d5+_0x589bda(-0x1d2,-0x1c0,-0x24a,-0x188)])));}else _0x5e5895=_0xb1bcd1['RFyLD'](_0xb1bcd1[_0x589bda(-0x209,-0x1a2,-0x226,-0x1e8)](_0x5e5895,',\x20'),_0x3368f4[_0x5b2dfc(0x3da,0x42e,0x381,0x3b1)+_0x1291df+_0x589bda(-0x23c,-0x1c0,-0x178,-0x252)]);}}}else _0xb1bcd1[_0x589bda(-0x18a,-0x1ef,-0x19e,-0x185)](addLog,_0xb1bcd1['mmRNz']),_0x1d282e=_0x1290a0;let {modifiedPrompt:_0x6ccaa6,insertions:_0x2afec6}=await _0xb1bcd1[_0x589bda(-0xc1,-0x111,-0x1a1,-0xa4)](prompt_replace,_0x1d282e,_0x5e5895);if(_0x412fad){if(_0xb1bcd1['BVpwP'](_0x589bda(-0x90,-0xe3,-0x16d,-0x52),_0xb1bcd1[_0x5b2dfc(0x284,0x30a,0x35d,0x2dc)])){const _0x1a7014={};_0x1a7014[_0x5b2dfc(0x316,0x2c3,0x337,0x32f)]=_0x20a7c5;const _0x317153={};_0x317153[_0x589bda(-0x176,-0x1f4,-0x17e,-0x231)]=_0xb1bcd1['pugaR'],_0x317153[_0x5b2dfc(0x331,0x374,0x265,0x2e4)]=_0x1a7014,_0x21969f[_0x5b2dfc(0x371,0x3a5,0x33d,0x334)](_0x317153),_0xb1bcd1[_0x5b2dfc(0x31c,0x2f2,0x374,0x2f6)](_0x13ada3,_0x589bda(-0x1d0,-0x142,-0x187,-0x13d)+_0x589bda(-0x151,-0x1b2,-0x1b9,-0x1b7)+_0x5b2dfc(0x335,0x2e6,0x2e5,0x371));}else for(let _0x1fc199=-0x1291*0x1+0x1cd2+0x148*-0x8;_0xb1bcd1['TXKpf'](_0x1fc199,-0x4*0x617+-0x5*-0x2eb+0x1*0x9c9);_0x1fc199++){_0x3368f4[_0x5b2dfc(0x423,0x3ce,0x345,0x3b1)+_0x1fc199+_0x589bda(-0x233,-0x1c0,-0x201,-0x1fb)]&&(_0xb1bcd1['mVscf'](_0xb1bcd1[_0x589bda(-0x17f,-0x1e1,-0x183,-0x21f)],_0xb1bcd1['DIYGQ'])?_0x6ccaa6=_0x6ccaa6+_0xb1bcd1[_0x589bda(-0x17e,-0x175,-0x1ce,-0xe8)]+prompt_replace_for_character(_0x3368f4[_0x5b2dfc(0x3d6,0x322,0x345,0x3b1)+_0x1fc199+_0x589bda(-0x216,-0x1c0,-0x1c8,-0x22d)]):_0x330aa7=_0x5c621d);}}const _0x1dcdbb=extension_settings[extensionName]['banana'],{model:_0x58da3f,apiUrl:_0x2b0c8d,apiKey:_0x16c6d1,conversationPresets:_0x57b665,conversationPresetId:_0x386aba,editPresetId:_0x5e3973,aspectRatio:_0x81261a}=_0x1dcdbb;_0xb1bcd1[_0x5b2dfc(0x300,0x30c,0x311,0x36a)](addLog,'[Banana]\x20S'+'tarting\x20im'+_0x5b2dfc(0x2c2,0x2d9,0x3b0,0x32d)+'tion\x20with\x20'+_0x589bda(-0x137,-0x13a,-0x1a9,-0x159)+_0x58da3f);let _0x36ba47,_0x42b393;if(_0x58da3f[_0x5b2dfc(0x335,0x38c,0x30a,0x37d)](_0xb1bcd1[_0x5b2dfc(0x33e,0x28e,0x309,0x315)])){_0x36ba47=_0x5b2dfc(0x3a1,0x3ae,0x39c,0x391)+'dels/'+_0x58da3f;const _0x1ba843={};_0x1ba843[_0x5b2dfc(0x449,0x3a9,0x372,0x3de)+'t']='';const _0x21fc7c=_0x57b665[_0x386aba]||_0x1ba843,_0x4fbe65=[_0x21fc7c[_0x5b2dfc(0x362,0x450,0x35a,0x3de)+'t'],_0x2afec6[_0xb1bcd1[_0x5b2dfc(0x301,0x413,0x3fe,0x392)]],_0x2afec6[_0xb1bcd1['ychpS']],_0x6ccaa6,_0x2afec6[_0xb1bcd1['ycnsv']],_0x2afec6[_0xb1bcd1[_0x589bda(-0x76,-0xfe,-0x14f,-0x113)]],_0x21fc7c[_0x589bda(-0x1b9,-0x1d8,-0x1bc,-0x17e)+'mpt'],_0x2afec6[_0x5b2dfc(0x369,0x31a,0x3c3,0x355)]]['filter'](Boolean)[_0x5b2dfc(0x2fe,0x2b7,0x292,0x2b4)](',\x20');addLog('正面提示词:\x20'+_0x4fbe65);const _0x53bb60={};_0x53bb60['prompt']=_0x4fbe65;const _0x822eaa={};_0x822eaa[_0x589bda(-0x238,-0x1e2,-0x160,-0x184)+'t']=0x1,_0x822eaa['aspectRati'+'o']=_0x81261a;const _0x2d7762={};_0x2d7762[_0x5b2dfc(0x2cb,0x36c,0x353,0x300)]=[_0x53bb60],_0x2d7762[_0x5b2dfc(0x2a8,0x2ca,0x36b,0x2d7)]=_0x822eaa,_0x42b393=_0x2d7762,_0xb1bcd1['HRGcS'](addLog,_0x5b2dfc(0x2ee,0x361,0x3ed,0x384)+_0x5b2dfc(0x2dd,0x31c,0x2cb,0x313)+'n\x20payload\x20'+'with\x20promp'+_0x5b2dfc(0x3c7,0x408,0x3b3,0x370)+_0x4fbe65);}else{if(_0xb1bcd1[_0x589bda(-0x1de,-0x150,-0x143,-0x152)](_0x5b2dfc(0x364,0x382,0x372,0x31d),_0xb1bcd1[_0x5b2dfc(0x2b5,0x36c,0x271,0x2d4)]))_0xb1bcd1['FfIWU'](_0x245c04,_0xb1bcd1[_0x589bda(-0xd7,-0xd3,-0x62,-0x76)]),_0x4647f8=_0x2f92ab;else{_0x36ba47=_0xb1bcd1[_0x589bda(-0x19d,-0x131,-0xdb,-0x174)];let _0x48f527;if(_0x13bcac[_0x589bda(-0x107,-0x103,-0xba,-0x193)](_0xb1bcd1[_0x589bda(-0x10f,-0x12e,-0x190,-0xe1)])){_0xb1bcd1['eJSaN'](addLog,_0xb1bcd1[_0x589bda(-0xd9,-0x169,-0x1b8,-0xe3)]);const _0x3edc1f=_0xb1bcd1[_0x5b2dfc(0x34c,0x359,0x34e,0x3c9)](_0x5e3973,'默认'),_0x4a09e8={};_0x4a09e8[_0x5b2dfc(0x34e,0x34a,0x3d9,0x36e)+'on']=[],_0x4a09e8[_0x5b2dfc(0x408,0x3bd,0x369,0x3de)+'t']='',_0x48f527=_0x57b665[_0x3edc1f]||_0x4a09e8,_0xb1bcd1[_0x589bda(-0x184,-0x1e4,-0x18e,-0x195)](addLog,_0x5b2dfc(0x2ce,0x307,0x3cd,0x346)+'用修图预设:\x20\x22'+_0x3edc1f+'\x22');}else{const _0x597ef3={};_0x597ef3[_0x589bda(-0xe0,-0x13f,-0x14e,-0x136)+'on']=[],_0x597ef3[_0x589bda(-0xff,-0xcf,-0x44,-0xb9)+'t']='',_0x48f527=_0x57b665[_0x386aba]||_0x597ef3;}const _0x5e6242=[_0x48f527[_0x589bda(-0x138,-0xcf,-0x119,-0xf6)+'t'],_0x2afec6[_0xb1bcd1['jfmGw']],_0x2afec6[_0xb1bcd1[_0x589bda(-0xba,-0xef,-0x5d,-0xa7)]],_0x6ccaa6,_0x2afec6[_0xb1bcd1['ycnsv']],_0x2afec6[_0x589bda(-0x181,-0x116,-0x97,-0x16d)],_0x48f527[_0x589bda(-0x22f,-0x1d8,-0x1f8,-0x18d)+_0x5b2dfc(0x265,0x299,0x31e,0x2bc)],_0x2afec6[_0xb1bcd1['JNTPT']]][_0x5b2dfc(0x33f,0x3b2,0x337,0x3a8)](Boolean)['join'](',\x20');_0xb1bcd1[_0x589bda(-0x15b,-0x1e4,-0x276,-0x215)](addLog,'正面提示词:\x20'+_0x5e6242);const _0x43a12a={};_0x43a12a[_0x589bda(-0x20c,-0x1dc,-0x1d4,-0x160)]=_0x5b2dfc(0x36a,0x321,0x2b1,0x31c),_0x43a12a[_0x5b2dfc(0x33b,0x371,0x367,0x351)]=[];const _0x1d371b={};_0x1d371b[_0x5b2dfc(0x2ce,0x253,0x34c,0x2d1)]=_0x589bda(-0xe6,-0xcc,-0xde,-0xc9),_0x1d371b[_0x5b2dfc(0x32f,0x2f4,0x311,0x351)]=[];const _0x36f1e3=_0x48f527[_0x589bda(-0xe6,-0x13f,-0x19c,-0xd1)+'on'][_0x589bda(-0x167,-0x17d,-0x12b,-0x20e)](_0xa782f0=>[_0x43a12a,_0x1d371b])[_0x589bda(-0x152,-0x161,-0x144,-0x180)]();let _0x41d5c4=-0xb7f+0x1542+-0x9c3;for(const _0xe822f5 of _0x48f527[_0x589bda(-0x1b5,-0x13f,-0x121,-0x1cf)+'on']){if(_0xb1bcd1[_0x5b2dfc(0x366,0x387,0x2fd,0x365)](_0xb1bcd1[_0x589bda(-0x139,-0x147,-0x1c4,-0x146)],_0xb1bcd1[_0x5b2dfc(0x411,0x3f0,0x304,0x38c)])){if(_0xe822f5[_0x589bda(-0x190,-0x191,-0x1be,-0x173)]?.[_0x589bda(-0x1e1,-0x189,-0x20f,-0x1f6)])_0x36f1e3[_0x41d5c4][_0x5b2dfc(0x3aa,0x395,0x2e4,0x351)]['push']({'type':_0xb1bcd1[_0x5b2dfc(0x2c0,0x344,0x2cf,0x2da)],'text':_0xe822f5[_0x589bda(-0xfe,-0x191,-0x164,-0x1b8)][_0x589bda(-0x220,-0x189,-0x1f7,-0x10d)]});const _0xaf2502=await getImageFromTurnData(_0xe822f5[_0x5b2dfc(0x31a,0x3a4,0x314,0x31c)]);if(_0xaf2502)_0x36f1e3[_0x41d5c4]['content']['push']({'type':_0xb1bcd1[_0x5b2dfc(0x34a,0x3a4,0x408,0x376)],'image_url':{'url':_0xaf2502}});_0x41d5c4++;if(_0xe822f5['model']?.['text'])_0x36f1e3[_0x41d5c4]['content'][_0x5b2dfc(0x3c7,0x3a1,0x36b,0x334)]({'type':_0x589bda(-0x1eb,-0x189,-0x122,-0x1d3),'text':_0xe822f5[_0x589bda(-0x1b3,-0x128,-0x16a,-0x102)]['text']});const _0x1665e9=await _0xb1bcd1[_0x5b2dfc(0x222,0x2b3,0x2d1,0x2ba)](getImageFromTurnData,_0xe822f5['model']);if(_0x1665e9)_0x36f1e3[_0x41d5c4][_0x5b2dfc(0x2cf,0x353,0x35a,0x351)][_0x5b2dfc(0x31d,0x333,0x2c0,0x334)]({'type':_0xb1bcd1[_0x589bda(-0xed,-0x137,-0x1b4,-0xd8)],'image_url':{'url':_0x1665e9}});_0x41d5c4++;}else _0x3428b7['initialize'+_0x589bda(-0x109,-0xda,-0xa0,-0x153)+'ener']&&(_0x75b085['removeList'+_0x589bda(-0x18e,-0xf7,-0xf4,-0x14e)](_0x117745[_0x5b2dfc(0x3c1,0x3e4,0x3a2,0x369)+'MAGE_REQUE'+'ST'],_0x1a2b74),_0x4db351[_0x589bda(-0xa1,-0x123,-0xfa,-0x188)+_0x589bda(-0x74,-0xda,-0x6a,-0x123)+_0x589bda(-0x147,-0xf7,-0xb2,-0xcb)]=![],_0xb1bcd1[_0x589bda(-0x26a,-0x1ef,-0x168,-0x197)](_0x3b2915,_0xb1bcd1['ceUYN']));}if(!_0x13bcac['includes'](_0xb1bcd1[_0x5b2dfc(0x3dd,0x3a6,0x3fe,0x37f)])){const _0x3683ea=extension_settings[extensionName]['bananaChar'+_0x5b2dfc(0x40f,0x438,0x40f,0x3b5)+'ts']||{};for(const _0x44a52e in _0x3683ea){const _0x3fb874=_0x3683ea[_0x44a52e],_0x1a92d5=(_0x3fb874[_0x589bda(-0x15a,-0x112,-0x97,-0x110)]||'')[_0x5b2dfc(0x2da,0x3e4,0x354,0x35a)]('|')[_0x5b2dfc(0x318,0x330,0x3d2,0x3a8)](_0x2b727f=>_0x2b727f[_0x5b2dfc(0x39e,0x355,0x386,0x37b)]()!=='');for(const _0x4aaef6 of _0x1a92d5){if(_0x5e6242['toLowerCas'+'e']()[_0x589bda(-0x134,-0x103,-0x149,-0x143)](_0x4aaef6[_0x5b2dfc(0x345,0x335,0x31f,0x353)+'e']())){if(_0xb1bcd1[_0x589bda(-0xcf,-0x148,-0x19b,-0x134)](_0xb1bcd1[_0x589bda(-0x185,-0x1a4,-0x19c,-0x161)],_0xb1bcd1[_0x589bda(-0x112,-0x15f,-0x15e,-0x1b4)])){_0xb1bcd1[_0x589bda(-0x188,-0x1e3,-0x1a9,-0x1ca)](addLog,_0x589bda(-0x9a,-0x124,-0xd8,-0xf4)+_0x589bda(-0x1eb,-0x19f,-0x1ca,-0x186)+_0x589bda(-0x14d,-0xfa,-0xdb,-0x15a)+_0x589bda(-0x1d5,-0x1f7,-0x1c0,-0x1b7)+_0x4aaef6+('\x22\x20from\x20pre'+_0x589bda(-0x157,-0x182,-0x1bf,-0x164))+_0x44a52e+'\x22.');const _0x2e8ac3=_0x3fb874['conversati'+'on'];if(_0x2e8ac3){const _0xf7f8d8=[];if(_0x2e8ac3[_0x589bda(-0x151,-0x191,-0x1e2,-0x197)]&&_0x2e8ac3['user'][_0x5b2dfc(0x34e,0x337,0x349,0x324)])_0xf7f8d8[_0x5b2dfc(0x385,0x334,0x2af,0x334)]({'type':_0xb1bcd1[_0x5b2dfc(0x296,0x360,0x26a,0x2da)],'text':_0x2e8ac3[_0x589bda(-0x109,-0x191,-0x15b,-0x16f)][_0x5b2dfc(0x2c0,0x3a5,0x336,0x324)]});const _0x3ba2b9=await _0xb1bcd1[_0x589bda(-0x147,-0x12d,-0x163,-0x1b3)](getImageFromTurnData,_0x2e8ac3[_0x5b2dfc(0x361,0x39b,0x2a9,0x31c)]);if(_0x3ba2b9)_0xf7f8d8[_0x589bda(-0x1a8,-0x179,-0x16a,-0x1ed)]({'type':_0xb1bcd1[_0x5b2dfc(0x3d2,0x3d4,0x374,0x376)],'image_url':{'url':_0x3ba2b9}});if(_0xb1bcd1['dHrAA'](_0xf7f8d8['length'],0xaa5+-0x1*-0x177d+-0x202*0x11)){const _0x419e1a={};_0x419e1a[_0x5b2dfc(0x26e,0x312,0x266,0x2d1)]=_0xb1bcd1[_0x5b2dfc(0x37f,0x403,0x3bb,0x3c0)],_0x419e1a[_0x5b2dfc(0x39b,0x363,0x31b,0x351)]=_0xf7f8d8,_0x36f1e3[_0x5b2dfc(0x2ff,0x325,0x372,0x334)](_0x419e1a);}const _0x47a831=[];if(_0x2e8ac3[_0x5b2dfc(0x364,0x403,0x395,0x385)]&&_0x2e8ac3[_0x589bda(-0xbb,-0x128,-0xc9,-0x17e)][_0x589bda(-0x1a0,-0x189,-0x214,-0x170)])_0x47a831[_0x589bda(-0x130,-0x179,-0x11a,-0x1ab)]({'type':_0xb1bcd1[_0x5b2dfc(0x309,0x282,0x2e7,0x2da)],'text':_0x2e8ac3[_0x5b2dfc(0x380,0x38a,0x318,0x385)][_0x5b2dfc(0x322,0x3a6,0x2ce,0x324)]});const _0x5e8f48=await _0xb1bcd1['SVRBW'](getImageFromTurnData,_0x2e8ac3[_0x5b2dfc(0x2f6,0x2f2,0x3df,0x385)]);if(_0x5e8f48)_0x47a831[_0x589bda(-0x1eb,-0x179,-0x13a,-0x15f)]({'type':'image_url','image_url':{'url':_0x5e8f48}});if(_0xb1bcd1[_0x5b2dfc(0x37d,0x39e,0x352,0x3bd)](_0x47a831['length'],-0x1*-0xbb5+0x853*0x1+-0x1408)){if(_0xb1bcd1[_0x5b2dfc(0x3cd,0x38f,0x2f4,0x360)](_0xb1bcd1[_0x589bda(-0xc8,-0xd0,-0xd9,-0x10d)],_0xb1bcd1[_0x5b2dfc(0x2fd,0x340,0x2b3,0x2f2)])){_0xb1bcd1['FfIWU'](_0x30fd7f,_0x5b2dfc(0x402,0x3b2,0x40d,0x3bb)+'启动');if(_0x28be9d)_0xb1bcd1[_0x5b2dfc(0x387,0x2b1,0x26a,0x2f1)](_0x1cdbbb,_0x5b2dfc(0x335,0x365,0x348,0x308)+_0x3dbea9);if(_0x159cc4)_0xb1bcd1['EwrRe'](_0xdcdf96,_0x589bda(-0x161,-0xde,-0xed,-0xdd)+']');}else{const _0x53a512={};_0x53a512[_0x589bda(-0x15f,-0x1dc,-0x26d,-0x183)]=_0xb1bcd1[_0x5b2dfc(0x247,0x353,0x2b7,0x2df)],_0x53a512[_0x5b2dfc(0x2ca,0x376,0x378,0x351)]=_0x47a831,_0x36f1e3[_0x5b2dfc(0x353,0x307,0x2df,0x334)](_0x53a512);}}}break;}else _0x255886['on'](_0x3628ec[_0x589bda(-0x14b,-0x144,-0xba,-0x106)+_0x589bda(-0xe4,-0x168,-0x10f,-0x18f)+'ST'],_0x5ec962),_0xb1bcd1[_0x5b2dfc(0x2e0,0x226,0x25c,0x2be)](_0x4a24a1,_0xb1bcd1[_0x589bda(-0x1e2,-0x1e5,-0x224,-0x159)]);}}}}if(!_0x13bcac[_0x5b2dfc(0x428,0x37b,0x3f2,0x3aa)](_0xb1bcd1['itnCN'])){const _0x1c46ee={};_0x1c46ee['role']=_0xb1bcd1[_0x589bda(-0x11e,-0xed,-0x106,-0xd5)],_0x1c46ee[_0x5b2dfc(0x31d,0x2ba,0x37b,0x351)]=[{'type':_0xb1bcd1['mcScc'],'text':_0x5e6242}],_0x36f1e3['push'](_0x1c46ee);}else{const _0x5d92de=[],_0x458e3c=_0xb1bcd1[_0x5b2dfc(0x324,0x356,0x31b,0x374)](_0x5f466c,_0x5e6242),_0x164d52=[_0x48f527[_0x589bda(-0x15f,-0xcf,-0x42,-0x161)+'t'],_0x458e3c,_0x48f527[_0x5b2dfc(0x29b,0x2a0,0x29c,0x2d5)+_0x589bda(-0x1ad,-0x1f1,-0x1e1,-0x178)]][_0x589bda(-0x14c,-0x105,-0x83,-0xf9)](Boolean)['join'](',\x20'),_0x42d0c0={};_0x42d0c0[_0x589bda(-0x19b,-0x1f4,-0x1b5,-0x1d5)]=_0xb1bcd1[_0x589bda(-0x1be,-0x1d3,-0x215,-0x230)],_0x42d0c0[_0x5b2dfc(0x2db,0x3bc,0x2ab,0x324)]=_0x164d52,_0x5d92de[_0x589bda(-0x16f,-0x179,-0x13d,-0x125)](_0x42d0c0);if(_0x353673){const _0x5c2936={};_0x5c2936[_0x5b2dfc(0x2af,0x37a,0x2d6,0x32f)]=_0x353673;const _0x44e52b={};_0x44e52b[_0x589bda(-0x1f2,-0x1f4,-0x1ca,-0x1f2)]='image_url',_0x44e52b[_0x5b2dfc(0x378,0x2dc,0x270,0x2e4)]=_0x5c2936,_0x5d92de[_0x5b2dfc(0x2ab,0x33a,0x375,0x334)](_0x44e52b),_0xb1bcd1[_0x589bda(-0x146,-0x16c,-0x14a,-0xdd)](addLog,_0x5b2dfc(0x351,0x354,0x350,0x36b)+_0x589bda(-0x1f5,-0x1b2,-0x18a,-0x245)+_0x5b2dfc(0x3bf,0x344,0x356,0x371));}const _0x58fa74={};_0x58fa74[_0x589bda(-0x198,-0x1dc,-0x200,-0x20b)]=_0xb1bcd1[_0x5b2dfc(0x436,0x413,0x413,0x3c0)],_0x58fa74[_0x589bda(-0x157,-0x15c,-0x116,-0x1e6)]=_0x5d92de,_0x36f1e3[_0x589bda(-0x121,-0x179,-0xf4,-0x1eb)](_0x58fa74),_0xb1bcd1[_0x589bda(-0xe2,-0x107,-0xdc,-0x73)](addLog,_0x5b2dfc(0x3ec,0x3e5,0x33a,0x36b)+_0x589bda(-0xcd,-0x165,-0x16f,-0x17d)+_0x164d52);}const _0x400f75={};_0x400f75[_0x5b2dfc(0x2b8,0x2fd,0x368,0x2fc)+'o']=_0x81261a;const _0x41e3aa={};_0x41e3aa[_0x589bda(-0x225,-0x193,-0x227,-0x20b)+'g']=_0x400f75,_0x42b393={'model':_0x58da3f,'messages':_0x36f1e3[_0x5b2dfc(0x419,0x3a3,0x312,0x3a8)](_0x456941=>_0x456941[_0x589bda(-0xce,-0x15c,-0x1b7,-0xcb)]['length']>-0x15e*0x1+-0x26*0x29+0x774),'config':_0x41e3aa},_0xb1bcd1['niUdV'](addLog,_0x589bda(-0x1b0,-0x129,-0x151,-0x10a)+_0x589bda(-0x1d4,-0x1ab,-0x161,-0x169)+_0x589bda(-0x16f,-0x166,-0x107,-0x1ea)+'oad\x20with\x20'+_0x42b393['messages'][_0x5b2dfc(0x412,0x334,0x376,0x3ba)]+_0x5b2dfc(0x36c,0x2fa,0x358,0x331));}}let _0x8a6a5=_0x2b0c8d[_0x589bda(-0x109,-0x127,-0xf3,-0x1bd)](/\/$/,''),_0x466e63;_0x8a6a5['endsWith'](_0x589bda(-0xe9,-0x113,-0x8d,-0x14b))||_0x8a6a5[_0x589bda(-0xcc,-0x103,-0x74,-0x118)]('/v1/')?_0x466e63=_0xb1bcd1[_0x589bda(-0x159,-0x11f,-0xe3,-0xf7)](_0x8a6a5,_0x36ba47):_0x466e63=_0xb1bcd1[_0x5b2dfc(0x2f8,0x342,0x301,0x2f0)](_0xb1bcd1['BZcRY'](_0x8a6a5,_0xb1bcd1['quQYW']),_0x36ba47);_0x466e63=_0x466e63[_0x5b2dfc(0x416,0x392,0x418,0x386)](/\/v1\/v1\//g,_0xb1bcd1[_0x589bda(-0x19e,-0x164,-0x165,-0x19f)]),_0xb1bcd1[_0x5b2dfc(0x311,0x314,0x2e2,0x2be)](addLog,_0x5b2dfc(0x3d2,0x33a,0x3c1,0x35b)+'ending\x20req'+_0x589bda(-0x169,-0x140,-0xd0,-0xf6)+_0x466e63),_0xb1bcd1[_0x5b2dfc(0x384,0x32c,0x2f5,0x37a)](addLog,_0x5b2dfc(0x389,0x28d,0x33f,0x316)+_0x5b2dfc(0x392,0x3dc,0x3b3,0x38b)+JSON[_0x5b2dfc(0x3e5,0x433,0x3ec,0x39d)](_0x42b393,null,-0x40e*0x6+-0x22a*-0xd+-0x6c*0x9));function _0x5b2dfc(_0x355665,_0xc3646,_0x3f416c,_0x3423f5){return _0x537c(_0x3423f5-0x23e,_0x3f416c);}try{const _0xf32b91={};_0xf32b91[_0x5b2dfc(0x2b7,0x30d,0x2e2,0x329)+'pe']='applicatio'+_0x589bda(-0x178,-0x1ae,-0x166,-0x1c5),_0xf32b91['Authorizat'+_0x589bda(-0xfd,-0xe8,-0x146,-0x106)]='Bearer\x20'+_0x16c6d1;const _0x113306=await _0xb1bcd1[_0x5b2dfc(0x3c8,0x33d,0x312,0x39c)](fetch,_0x466e63,{'method':_0xb1bcd1['QYSoU'],'headers':_0xf32b91,'body':JSON[_0x589bda(-0xfb,-0x110,-0x108,-0xa9)](_0x42b393)});if(!_0x113306['ok']){if(_0xb1bcd1['qUMHc'](_0xb1bcd1['NRcun'],_0xb1bcd1[_0x589bda(-0x160,-0x145,-0x1ab,-0x1dc)])){const _0x4802ca={};_0x4802ca[_0x5b2dfc(0x234,0x23e,0x22f,0x2b9)]=_0xb1bcd1[_0x5b2dfc(0x347,0x36e,0x26f,0x2da)],_0x4802ca[_0x589bda(-0x16d,-0x189,-0x18c,-0x185)]=_0x7b794c;const _0xa3c200={};_0xa3c200['role']='user',_0xa3c200[_0x589bda(-0xcd,-0x15c,-0x16f,-0x1bc)]=[_0x4802ca],_0x1424ea[_0x589bda(-0x13b,-0x179,-0x10e,-0x1d6)](_0xa3c200);}else{const _0x5483f3=await _0x113306[_0x5b2dfc(0x324,0x3a4,0x2ca,0x324)]();throw new Error(_0x589bda(-0x1b0,-0x13e,-0xb3,-0x1b7)+_0x5b2dfc(0x3a2,0x3c9,0x3be,0x3bf)+_0x589bda(-0x124,-0xfb,-0x153,-0x10a)+'\x20'+_0x113306['status']+':\x20'+_0x5483f3);}}const _0xc319e9=await _0x113306['json']();let _0x411990='';const _0x1ce46b=_0xc319e9[_0x5b2dfc(0x2aa,0x2db,0x29b,0x322)];if(_0x1ce46b&&_0xb1bcd1['NtuQB'](_0x1ce46b['length'],0x7fb+0x6b0+-0xeab)){const _0x53d704=_0x1ce46b[0x397*0x9+-0x1*-0x258b+-0x45da][_0x5b2dfc(0x3ea,0x43d,0x40a,0x3c4)]?.[_0x5b2dfc(0x30a,0x2e0,0x2cf,0x351)];if(Array['isArray'](_0x53d704))for(const _0x42a149 of _0x53d704){if(_0xb1bcd1['rohKx'](_0x42a149[_0x589bda(-0x1df,-0x1f4,-0x256,-0x1ae)],_0xb1bcd1[_0x589bda(-0xcb,-0x137,-0x180,-0x11b)])&&_0x42a149[_0x5b2dfc(0x317,0x28f,0x298,0x2e4)]?.[_0x589bda(-0x198,-0x17e,-0x1ec,-0x141)]){_0x411990=_0x42a149[_0x589bda(-0x185,-0x1c9,-0x213,-0x133)]['url'];break;}}else{if(_0xb1bcd1[_0x589bda(-0x1bf,-0x14d,-0x1ad,-0x15a)](typeof _0x53d704,_0xb1bcd1[_0x589bda(-0x1c9,-0x183,-0x195,-0x203)])){if(_0xb1bcd1[_0x589bda(-0x18e,-0x151,-0x1cb,-0x182)](_0x589bda(-0x11c,-0x12b,-0x111,-0xca),_0xb1bcd1[_0x589bda(-0x185,-0x1ec,-0x16f,-0x1b7)]))_0xb1bcd1['VnnIX'](addLog,_0x589bda(-0x1d8,-0x14f,-0xf3,-0x1db)+_0x589bda(-0x169,-0x155,-0x112,-0x1db)+_0x5b2dfc(0x3fd,0x3f0,0x3d6,0x3d1)+_0x5b2dfc(0x2a9,0x331,0x2fe,0x2d3)+_0x589bda(-0x112,-0xe6,-0xab,-0x16f));else{const _0x559a6c={};_0x559a6c['role']=_0xb1bcd1['CkRHE'],_0x559a6c[_0x5b2dfc(0x3d7,0x3d3,0x2c7,0x351)]=_0x4d703e,_0x1196fe['push'](_0x559a6c);}}}}if(!_0x411990){if(_0xb1bcd1['mGuBR'](_0x589bda(-0x232,-0x1aa,-0x167,-0x112),_0xb1bcd1[_0x589bda(-0x159,-0x156,-0x1ec,-0xd0)]))throw new Error(_0xb1bcd1[_0x589bda(-0x1b4,-0x199,-0x132,-0x184)]);else throw new _0x416d9c(_0xb1bcd1[_0x589bda(-0x14d,-0x199,-0x1d3,-0x10f)]);}_0xb1bcd1[_0x589bda(-0x1ae,-0x12d,-0x190,-0x182)](addLog,_0x5b2dfc(0x341,0x431,0x33b,0x3a7)+_0x5b2dfc(0x361,0x382,0x392,0x34b)+_0x589bda(-0x199,-0x10d,-0x83,-0xbe)+_0x589bda(-0x1a4,-0x1a9,-0x12b,-0x1f1));const _0x25326d={};return _0x25326d[_0x5b2dfc(0x2d6,0x2cb,0x362,0x363)]=_0x411990,_0x25326d[_0x589bda(-0x134,-0x16f,-0x1d9,-0x11b)]=_0xa2749b||'',_0x25326d;}catch(_0x331549){if(_0xb1bcd1[_0x5b2dfc(0x3f6,0x3fc,0x365,0x398)]('KxEYv',_0xb1bcd1[_0x5b2dfc(0x2c0,0x2a1,0x347,0x2d8)]))_0x36674c=_0xb1bcd1[_0x5b2dfc(0x3a8,0x410,0x41a,0x3b0)](_0x5d74c2,',\x20')+_0x5bce71['Character\x20'+_0x5a74cb+_0x5b2dfc(0x348,0x2f7,0x384,0x2ed)];else{_0xb1bcd1[_0x589bda(-0x13a,-0x143,-0x120,-0x17e)](addLog,'[Banana]\x20F'+_0x5b2dfc(0x2fc,0x31d,0x2e3,0x2ee)+':\x20'+_0x331549[_0x589bda(-0x14b,-0xe9,-0x12a,-0x51)]),console['error'](_0xb1bcd1[_0x5b2dfc(0x36b,0x30a,0x2b7,0x2dd)],_0x331549);throw _0x331549;}}}export async function bananaGenerate(_0xe8990d){const _0x1368aa={'zNqUe':function(_0x145166,_0x103e22){return _0x145166+_0x103e22;},'WHOIm':function(_0x8ea23b,_0x3d652e){return _0x8ea23b+_0x3d652e;},'jxcbH':_0xaeff93(-0x78,-0x57,-0xa6,-0x3e),'MfljM':function(_0x130473,_0x1af79f){return _0x130473(_0x1af79f);},'kYPWt':function(_0x33a941){return _0x33a941();},'JFeCW':_0xaeff93(-0x12e,-0xb5,-0x137,-0xca),'HzGcc':_0x47e53(0x552,0x4fa,0x4c3,0x550),'VfDPP':_0x47e53(0x42c,0x3e5,0x440,0x34f),'jrTUA':function(_0x1f7058,_0x423e29){return _0x1f7058(_0x423e29);},'nrNgp':function(_0x4f4177,_0x3ebec0){return _0x4f4177===_0x3ebec0;},'xyUXS':_0x47e53(0x3cb,0x3e1,0x3ae,0x3da),'xyZNw':_0x47e53(0x48f,0x4c8,0x430,0x45d),'ICkbN':function(_0x39cbed,_0x194c7e){return _0x39cbed!=_0x194c7e;},'IUJrB':function(_0x17a3e6,_0x13ae3f,_0x506747,_0x66fc11){return _0x17a3e6(_0x13ae3f,_0x506747,_0x66fc11);},'oeuKe':function(_0x4210d7,_0x4ac2cf){return _0x4210d7(_0x4ac2cf);},'TBvDM':function(_0x19ec62,_0x2667f5){return _0x19ec62(_0x2667f5);}};_0x1368aa[_0xaeff93(-0x144,-0x18f,-0xdb,-0xee)](clearLog);let {id:_0x3558ca,prompt:_0x2c800c,width:_0x25760d,height:_0x2f76ce,change:_0x28716e,retouchPrompt:_0x23652a,retouchImage:_0x1663f7}=_0xe8990d;addLog(_0xaeff93(-0xc8,-0x5e,-0x118,-0x11d)+_0x47e53(0x487,0x440,0x403,0x470)+'age\x20genera'+_0xaeff93(-0x14b,-0x160,-0xc3,-0x107)+'st\x20(ID:\x20'+_0x3558ca+')');let _0x12bb30='';_0x28716e?_0x12bb30=_0x28716e[_0x47e53(0x43d,0x3ee,0x3b3,0x366)](_0x1368aa[_0x47e53(0x449,0x469,0x4db,0x438)],''):_0x1368aa[_0x47e53(0x3ec,0x43d,0x4d5,0x422)]!==_0x1368aa['VfDPP']?_0x12bb30=_0x2c800c:_0x151f47[_0x47e53(0x567,0x4d0,0x4c1,0x530)+_0xdf952e+_0xaeff93(-0x139,-0x1a1,-0x167,-0x195)]&&(_0x116764=_0x1368aa['zNqUe'](_0x1368aa['WHOIm'](_0x205aa0,',\x20'),_0x3d2169[_0xaeff93(-0x75,-0xa8,-0x94,-0x102)+_0x3fe902+_0x47e53(0x3e2,0x40c,0x427,0x48e)]));if(_0x28716e&&_0x28716e[_0x47e53(0x515,0x4c9,0x55d,0x4e0)](_0x1368aa['JFeCW'])){_0x1368aa[_0x47e53(0x3f9,0x3d4,0x368,0x344)](addLog,_0xaeff93(-0x6b,-0x8,0x11,-0x9f)+'启动');if(_0x23652a)addLog('修图指令:\x20'+_0x23652a);if(_0x1663f7)_0x1368aa[_0xaeff93(-0x171,-0x1ea,-0x1bd,-0x1d1)](addLog,_0x47e53(0x466,0x4ee,0x530,0x478)+']');}function _0x47e53(_0x322394,_0x2b32fc,_0x13844a,_0x2dadd7){return _0x537c(_0x2b32fc-0x35d,_0x13844a);}function _0xaeff93(_0x4122ca,_0x6eddb,_0x838cc7,_0x2f507b){return _0x537c(_0x4122ca- -0x1e8,_0x6eddb);}try{if(_0x1368aa[_0xaeff93(-0x16b,-0x100,-0x1f4,-0x10c)](_0x1368aa['xyUXS'],_0x1368aa[_0x47e53(0x3d6,0x462,0x430,0x4b6)]))_0x2cf160=_0x1368aa[_0xaeff93(-0x51,-0x49,0x2f,0xd)](_0x1368aa[_0x47e53(0x3c9,0x3d7,0x44e,0x3db)](_0x3d0eed,_0x1368aa[_0xaeff93(-0x103,-0xcd,-0x15c,-0x128)]),_0x1368aa['MfljM'](_0x1ea84a,_0xb5ee07[_0x47e53(0x555,0x4d0,0x485,0x546)+_0x36969e+'\x20Prompt']));else{const {image:_0x4325e1,change:_0x364117}=await _0x1368aa[_0x47e53(0x44b,0x3d4,0x449,0x3af)](generateBananaImage,{'prompt':_0x2c800c,'width':_0x25760d,'height':_0x2f76ce,'change':_0x28716e,'retouchPrompt':_0x23652a,'retouchImage':_0x1663f7});if(_0x1368aa[_0x47e53(0x4d6,0x45e,0x426,0x4bd)](extension_settings[extensionName][_0x47e53(0x44d,0x3de,0x362,0x46c)],'0')){const _0x39b54f={};_0x39b54f[_0x47e53(0x4e2,0x45d,0x4ca,0x41c)]=_0x12bb30,await _0x1368aa['IUJrB'](setItemImg,_0x2c800c,_0x4325e1,_0x39b54f),_0x1368aa[_0xaeff93(-0x92,-0x52,-0x6b,-0xbe)](addLog,_0x47e53(0x3a0,0x3ff,0x453,0x444)+_0xaeff93(-0x83,-0x1e,-0x57,-0x10c)+'\x20'+_0x2c800c),extension_settings[extensionName][_0x47e53(0x400,0x426,0x427,0x44d)][_0xaeff93(-0x79,0xb,-0xd2,-0x2b)]?(extension_settings[extensionName]['banana']['cishu']=extension_settings[extensionName][_0x47e53(0x3a1,0x426,0x479,0x3b1)]['cishu']+(-0x1133+0xa+-0xd*-0x152),_0x1368aa[_0x47e53(0x4ef,0x4b3,0x535,0x4ee)](addLog,'当前生图次数为\x20fo'+_0xaeff93(-0x72,-0xcf,-0xa9,-0x7b)+extension_settings[extensionName][_0xaeff93(-0x11f,-0x194,-0xf7,-0x1a9)][_0x47e53(0x561,0x4cc,0x485,0x449)])):(extension_settings[extensionName]['banana'][_0xaeff93(-0x79,-0x12,0x15,-0x6b)]=0x5a*0x4e+-0x4f8+-0x1673,_0x1368aa[_0xaeff93(-0x7a,-0xb1,-0xe,0x15)](addLog,_0x47e53(0x530,0x4ed,0x583,0x56e)+_0x47e53(0x43d,0x4d3,0x4e2,0x4f6)+extension_settings[extensionName][_0x47e53(0x3e6,0x426,0x420,0x39e)][_0x47e53(0x4f1,0x4cc,0x525,0x479)]));}else _0x1368aa[_0x47e53(0x464,0x480,0x427,0x4ae)](addLog,_0x47e53(0x3a6,0x436,0x3d7,0x3c3)+'库');const _0x5dc0df={};_0x5dc0df['id']=_0x3558ca,_0x5dc0df[_0xaeff93(-0xbf,-0x4f,-0x117,-0x3e)]=!![],_0x5dc0df[_0x47e53(0x472,0x4e1,0x4b1,0x483)]=_0x4325e1,_0x5dc0df['prompt']=_0x2c800c,_0x5dc0df['change']=_0x12bb30,eventSource['emit'](EventType['GENERATE_I'+_0xaeff93(-0xd0,-0xd2,-0x85,-0x58)+_0x47e53(0x3f9,0x418,0x423,0x445)],_0x5dc0df),_0x1368aa[_0xaeff93(-0x171,-0x1c5,-0x147,-0x1e9)](addLog,_0xaeff93(-0x163,-0x182,-0x14e,-0x1e9)+_0x47e53(0x3e1,0x405,0x3f7,0x3cb)+_0xaeff93(-0xe4,-0x149,-0x118,-0x85)+_0xaeff93(-0x115,-0x11f,-0x10f,-0x147)+':\x20'+_0x3558ca);}}catch(_0x412afb){const _0x15e60a='[Banana]\x20G'+_0x47e53(0x4b1,0x491,0x50c,0x4de)+'failed\x20for'+_0xaeff93(-0x106,-0x9a,-0x169,-0xfa)+_0x3558ca+':\x20'+_0x412afb[_0x47e53(0x4c5,0x4e3,0x534,0x55c)];_0x1368aa['TBvDM'](addLog,_0x15e60a),console[_0x47e53(0x4cf,0x4d8,0x495,0x50c)](_0x15e60a);const _0x23e567={};_0x23e567['id']=_0x3558ca,_0x23e567['success']=![],_0x23e567[_0x47e53(0x482,0x4d8,0x50a,0x45e)]=_0x412afb['message'],_0x23e567[_0x47e53(0x41d,0x406,0x456,0x3bd)]=_0x2c800c,eventSource[_0x47e53(0x43c,0x404,0x3ab,0x46e)](EventType[_0x47e53(0x519,0x488,0x4af,0x41e)+_0x47e53(0x4dd,0x475,0x4f5,0x3e0)+_0xaeff93(-0x12d,-0xdd,-0x101,-0x1c3)],_0x23e567),addLog(_0xaeff93(-0x163,-0xd6,-0x1cd,-0x122)+_0xaeff93(-0x116,-0x180,-0x141,-0x123)+_0x47e53(0x471,0x416,0x380,0x388)+_0xaeff93(-0x115,-0x1a7,-0x105,-0xf5)+':\x20'+_0x3558ca);}}function initializeBananaListener(){function _0xf97a46(_0x4a9594,_0x50f013,_0x4f9dea,_0x12bcb6){return _0x537c(_0x4f9dea-0x2b5,_0x4a9594);}const _0x1c3162={'SFgCb':function(_0x1b0a72,_0x122d1b){return _0x1b0a72(_0x122d1b);},'sRjsP':'banana\x20生图事'+_0x1cb6cb(-0x48,0x16,-0x31,0x36)};eventSource['on'](EventType[_0x1cb6cb(0x25,-0x2d,-0x74,-0x37)+'MAGE_REQUE'+'ST'],bananaGenerate);function _0x1cb6cb(_0x44ca18,_0x248ce5,_0x134860,_0x20c336){return _0x537c(_0x20c336- -0x162,_0x134860);}_0x1c3162[_0xf97a46(0x384,0x312,0x349,0x3b9)](addLog,_0x1c3162[_0xf97a46(0x3b4,0x32b,0x366,0x35c)]);}function _0x537c(_0x3dceae,_0x52b902){const _0x2cc0e8=_0x4660();return _0x537c=function(_0x50140f,_0x28ee27){_0x50140f=_0x50140f-(0xc33+0x477+0x32*-0x53);let _0x102d7b=_0x2cc0e8[_0x50140f];if(_0x537c['ePLJus']===undefined){var _0x3c5922=function(_0x49d23e){const _0x2fe250='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2cf160='',_0x3d0eed='',_0x1ea84a=_0x2cf160+_0x3c5922;for(let _0xb5ee07=0x1d54+-0x1*-0x1d5+-0x3*0xa63,_0x36969e,_0x447032,_0xb90911=-0x10*0x15e+0x2*-0xdb7+0x314e;_0x447032=_0x49d23e['charAt'](_0xb90911++);~_0x447032&&(_0x36969e=_0xb5ee07%(0xb*-0x21+0x1fd+-0x2*0x47)?_0x36969e*(0x2666+0x89f+-0xf97*0x3)+_0x447032:_0x447032,_0xb5ee07++%(-0x33e*0xb+0xf*-0x233+0x44ab))?_0x2cf160+=_0x1ea84a['charCodeAt'](_0xb90911+(-0x22f*0x3+0x10d1+-0xb*0xee))-(0x68a+0x989+0x1*-0x1009)!==0x2*0x1220+0x1315*0x1+0x3755*-0x1?String['fromCharCode'](-0xa6*0xb+0x105e+-0x83d&_0x36969e>>(-(-0x205*-0x5+0x3dd*0x3+-0x15ae)*_0xb5ee07&-0x159d+-0x1e9e+-0x111*-0x31)):_0xb5ee07:-0xa*-0x133+-0x8b*0x3+-0x1*0xa5d){_0x447032=_0x2fe250['indexOf'](_0x447032);}for(let _0x58ec6f=-0x4a*0x17+0x2e1*0x9+0x1343*-0x1,_0xc39439=_0x2cf160['length'];_0x58ec6f<_0xc39439;_0x58ec6f++){_0x3d0eed+='%'+('00'+_0x2cf160['charCodeAt'](_0x58ec6f)['toString'](0x1681+0xa7e+-0x20ef))['slice'](-(-0x1*0x7e3+-0x1876+0x205b));}return decodeURIComponent(_0x3d0eed);};_0x537c['NFeEjY']=_0x3c5922,_0x3dceae=arguments,_0x537c['ePLJus']=!![];}const _0x2a2029=_0x2cc0e8[0xb03+0xd4a+0x1*-0x184d],_0xcc206f=_0x50140f+_0x2a2029,_0x1d5360=_0x3dceae[_0xcc206f];if(!_0x1d5360){const _0x505320=function(_0x123273){this['pTGSYm']=_0x123273,this['hEwTNf']=[0x2c0*0x2+0x2580+-0x9*0x4c7,-0x948+0x1283*0x1+-0x93b*0x1,0x258e+-0x29*-0xc7+-0x456d],this['JZnYcL']=function(){return'newState';},this['cyGuNG']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['IKkbTD']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x505320['prototype']['YmUbqJ']=function(){const _0x4f379c=new RegExp(this['cyGuNG']+this['IKkbTD']),_0x492fc1=_0x4f379c['test'](this['JZnYcL']['toString']())?--this['hEwTNf'][-0x20cf+0x1b69*0x1+-0x1cd*-0x3]:--this['hEwTNf'][-0x4c7*0x7+-0x17da+-0x3*-0x1319];return this['DCYmmt'](_0x492fc1);},_0x505320['prototype']['DCYmmt']=function(_0xf7d83d){if(!Boolean(~_0xf7d83d))return _0xf7d83d;return this['wCMMNi'](this['pTGSYm']);},_0x505320['prototype']['wCMMNi']=function(_0x486537){for(let _0x2463a5=-0x1*-0x253f+-0xa7f+0x1*-0x1ac0,_0x586801=this['hEwTNf']['length'];_0x2463a5<_0x586801;_0x2463a5++){this['hEwTNf']['push'](Math['round'](Math['random']())),_0x586801=this['hEwTNf']['length'];}return _0x486537(this['hEwTNf'][0x1*-0x565+-0x1736+0x1c9b]);},new _0x505320(_0x537c)['YmUbqJ'](),_0x102d7b=_0x537c['NFeEjY'](_0x102d7b),_0x3dceae[_0xcc206f]=_0x102d7b;}else _0x102d7b=_0x1d5360;return _0x102d7b;},_0x537c(_0x3dceae,_0x52b902);}export async function replaceWithBanana(){function _0x11353d(_0xb24f2,_0x59fca5,_0x1d58fd,_0x276553){return _0x537c(_0x276553- -0x10c,_0x59fca5);}function _0x1d1261(_0xe98bf6,_0x2f0d53,_0x20653b,_0x2db32c){return _0x537c(_0x2db32c-0x18d,_0x20653b);}const _0x3f94ce={'xeikY':function(_0x5798ab,_0x61d33a){return _0x5798ab+_0x61d33a;},'NcLPt':function(_0x22783d,_0x311260){return _0x22783d==_0x311260;},'TXauR':_0x1d1261(0x2a0,0x2b1,0x24d,0x256),'Ojdhl':function(_0x591274){return _0x591274();},'tnmJC':function(_0x1970ff){return _0x1970ff();},'axXOq':function(_0x902ac,_0x484c48){return _0x902ac===_0x484c48;},'GohIq':'mijDL','nIbrN':'Jiszq','HRrBW':function(_0x5cd2c0,_0x2b31fa){return _0x5cd2c0(_0x2b31fa);},'VwzcJ':_0x1d1261(0x2d3,0x314,0x309,0x2a1)+'图事件监听器已关闭。'};_0x3f94ce[_0x1d1261(0x297,0x213,0x2a6,0x267)](extension_settings[extensionName][_0x11353d(0x63,0x5e,-0xae,-0x2b)],_0x3f94ce[_0x11353d(-0x1c,-0x64,0x36,0x22)])?(!window[_0x11353d(0x3d,0x58,0x4f,0x40)+_0x11353d(0x6e,0x93,0x8,0x89)+_0x1d1261(0x2d6,0x352,0x280,0x305)]&&(window[_0x1d1261(0x272,0x25d,0x285,0x2d9)+_0x11353d(0x37,0x11,0x102,0x89)+_0x1d1261(0x34a,0x398,0x30a,0x305)]=!![],_0x3f94ce[_0x11353d(-0x2a,-0x22,0x0,-0x45)](initializeBananaListener)),_0x3f94ce[_0x11353d(-0x57,-0x5b,-0x4,-0x55)](initializeImageProcessing)):_0x3f94ce[_0x1d1261(0x2b0,0x30e,0x285,0x288)](_0x3f94ce[_0x11353d(0xfe,0xf2,0xab,0x82)],_0x3f94ce['nIbrN'])?_0x2a3198=_0x3f94ce[_0x1d1261(0x2b0,0x360,0x296,0x2c8)](_0x3218ea,_0x2b9e0f):window['initialize'+_0x11353d(0xdc,0x109,-0x2,0x89)+_0x11353d(0xff,0x17,0xe,0x6c)]&&(eventSource[_0x1d1261(0x2f6,0x2ae,0x29d,0x274)+_0x11353d(0x59,-0x11,0x5a,0x6c)](EventType['GENERATE_I'+_0x11353d(-0x82,0xf,-0x8,-0x5)+'ST'],bananaGenerate),window[_0x1d1261(0x358,0x294,0x2a4,0x2d9)+_0x1d1261(0x2cb,0x33f,0x304,0x322)+_0x1d1261(0x377,0x308,0x36a,0x305)]=![],_0x3f94ce[_0x1d1261(0x318,0x2e6,0x38b,0x31c)](addLog,_0x3f94ce[_0x11353d(0x99,-0x18,0x20,0x54)]));}
//# sourceMappingURL=http://localhost:8000/banana.js.map