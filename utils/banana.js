function _0x444b(_0xa0f2ed,_0x9312cc){_0xa0f2ed=_0xa0f2ed-(-0x37b*0x3+-0x1307*0x1+0x1*0x1ec7);const _0x1102ac=_0x2e12();let _0x3943fe=_0x1102ac[_0xa0f2ed];if(_0x444b['tWtWtc']===undefined){var _0x1b49d3=function(_0x393330){const _0x427875='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2b7bb5='',_0x266454='',_0xdb2592=_0x2b7bb5+_0x1b49d3;for(let _0x37850b=0x2*0x903+-0xe84+-0x382,_0x215f08,_0x5f0ca1,_0x5557f4=0x258b+-0x11b*-0x14+-0x1*0x3ba7;_0x5f0ca1=_0x393330['charAt'](_0x5557f4++);~_0x5f0ca1&&(_0x215f08=_0x37850b%(0x10c3+0x40*-0x50+0x341)?_0x215f08*(-0xd1*-0xc+0x12af+-0x1c3b)+_0x5f0ca1:_0x5f0ca1,_0x37850b++%(0x21d7*-0x1+0x1397*0x1+-0x16*-0xa6))?_0x2b7bb5+=_0xdb2592['charCodeAt'](_0x5557f4+(-0x230d+-0x36b+0xcd6*0x3))-(-0x6b0+-0x2*0xbe+0x2*0x41b)!==0x1*-0x1271+-0x3a*-0x2a+-0x8ed*-0x1?String['fromCharCode'](0x1*0x8a3+-0x85*0x20+-0x19*-0x5c&_0x215f08>>(-(-0x4+-0x4*0x88c+-0x97*-0x3a)*_0x37850b&-0x101*-0x11+0x1add*0x1+0x28*-0x119)):_0x37850b:0x479+-0x2107+-0x22*-0xd7){_0x5f0ca1=_0x427875['indexOf'](_0x5f0ca1);}for(let _0x14030e=-0x1*-0x1b7+0xb*-0x1f7+-0x6*-0x351,_0x33f620=_0x2b7bb5['length'];_0x14030e<_0x33f620;_0x14030e++){_0x266454+='%'+('00'+_0x2b7bb5['charCodeAt'](_0x14030e)['toString'](0x3f3*-0x2+0x373*0x3+-0x263))['slice'](-(-0x63d+0x1*-0x2635+0x2c74));}return decodeURIComponent(_0x266454);};_0x444b['FeDlqT']=_0x1b49d3,_0x444b['XkpaEh']={},_0x444b['tWtWtc']=!![];}const _0x4bd707=_0x1102ac[-0x1104+0x2df+-0x3*-0x4b7],_0x19da19=_0xa0f2ed+_0x4bd707,_0x1cd112=_0x444b['XkpaEh'][_0x19da19];if(!_0x1cd112){const _0x238b88=function(_0x55f9be){this['vRjSQC']=_0x55f9be,this['zHrnjh']=[-0x1b7*-0xd+-0x7c*0x34+0x2e6,-0x12f9*-0x2+-0xb75+0x1a7d*-0x1,-0x1*0x2153+-0x1231+0x44b*0xc],this['zzZLfE']=function(){return'newState';},this['ppkVuE']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['IEjfOl']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x238b88['prototype']['UefaGc']=function(){const _0x352e1e=new RegExp(this['ppkVuE']+this['IEjfOl']),_0x4decf5=_0x352e1e['test'](this['zzZLfE']['toString']())?--this['zHrnjh'][-0x2*-0x12db+-0xe*-0x2bf+-0x4c27]:--this['zHrnjh'][-0xb*0x13f+0xcf5*-0x1+0x1aaa];return this['pHMSWK'](_0x4decf5);},_0x238b88['prototype']['pHMSWK']=function(_0x13b642){if(!Boolean(~_0x13b642))return _0x13b642;return this['AMmtyd'](this['vRjSQC']);},_0x238b88['prototype']['AMmtyd']=function(_0x3349b0){for(let _0x3b6658=-0x196d+0x137*0x19+-0x4f2,_0xa4e2c6=this['zHrnjh']['length'];_0x3b6658<_0xa4e2c6;_0x3b6658++){this['zHrnjh']['push'](Math['round'](Math['random']())),_0xa4e2c6=this['zHrnjh']['length'];}return _0x3349b0(this['zHrnjh'][-0x335*0x7+-0x2*0xb96+0xf35*0x3]);},new _0x238b88(_0x444b)['UefaGc'](),_0x3943fe=_0x444b['FeDlqT'](_0x3943fe),_0x444b['XkpaEh'][_0x19da19]=_0x3943fe;}else _0x3943fe=_0x1cd112;return _0x3943fe;}(function(_0x35a353,_0x2112b7){function _0x24f07c(_0x1356ee,_0x4097f8,_0x4fe35f,_0x51cb3a){return _0x444b(_0x4fe35f- -0x7e,_0x1356ee);}function _0x399ccd(_0x5d4058,_0x101828,_0x1bea53,_0x18bc70){return _0x444b(_0x101828- -0xd0,_0x18bc70);}const _0x53b91e=_0x35a353();while(!![]){try{const _0x3b9be2=-parseInt(_0x24f07c(0x120,0x22e,0x1c8,0x230))/(0x1785+0x2d5+-0x13*0x163)+parseInt(_0x24f07c(0x163,0x1a2,0x21b,0x1e0))/(-0x16a*0x1+0x31a*0x2+-0x4c8)*(parseInt(_0x399ccd(0xe1,0x17a,0x189,0x156))/(0x10*0xce+-0x1b08+0xe2b))+-parseInt(_0x399ccd(0x164,0x18e,0x15e,0x129))/(0x24c8+-0x229d+-0x227)+-parseInt(_0x399ccd(0x158,0xe2,0xac,0xa5))/(0x23e7+0x670+0x2*-0x1529)+-parseInt(_0x399ccd(0x12c,0xe7,0x113,0xde))/(-0x8b8+0xa8*0x7+0x213*0x2)*(parseInt(_0x399ccd(0x119,0xff,0x84,0xa0))/(0x1*-0x779+0xe1a+0x1*-0x69a))+parseInt(_0x24f07c(0x283,0x1bc,0x1d6,0x1ff))/(0x1*0x1ec2+-0x1594+-0x926)+-parseInt(_0x399ccd(0x1c9,0x156,0x15f,0x160))/(0x24a1*-0x1+0x1459+0x1051)*(-parseInt(_0x24f07c(0x212,0x161,0x1ae,0x251))/(-0x7*0x4f2+-0x1*-0x1f01+0x3a7));if(_0x3b9be2===_0x2112b7)break;else _0x53b91e['push'](_0x53b91e['shift']());}catch(_0x2056cc){_0x53b91e['push'](_0x53b91e['shift']());}}}(_0x2e12,0xa39+0x2f2c2+-0xd3*-0x383));const _0x46953f=(function(){let _0xbf473=!![];return function(_0x314723,_0x7fe20e){const _0x4bb074=_0xbf473?function(){function _0xafd0be(_0x578478,_0x1d7d7b,_0x57cd54,_0x12bb94){return _0x444b(_0x1d7d7b- -0x380,_0x12bb94);}if(_0x7fe20e){const _0x434eb8=_0x7fe20e[_0xafd0be(-0x17d,-0x18f,-0x1a4,-0x225)](_0x314723,arguments);return _0x7fe20e=null,_0x434eb8;}}:function(){};return _0xbf473=![],_0x4bb074;};}()),_0x740a01=_0x46953f(this,function(){function _0xfbd6bf(_0x1c1658,_0x4d6618,_0x39bbb3,_0x33c439){return _0x444b(_0x1c1658-0x136,_0x39bbb3);}const _0x4da281={};_0x4da281[_0x5261e7(-0x50,-0x8e,-0x134,-0x13)]='(((.+)+)+)'+'+$';function _0x5261e7(_0xcbdf66,_0x4e0e8a,_0x1e38fb,_0x43ee31){return _0x444b(_0x4e0e8a- -0x23a,_0x1e38fb);}const _0x4cdd85=_0x4da281;return _0x740a01[_0x5261e7(0x13,0x51,0x3f,0x39)]()['search'](_0x4cdd85[_0xfbd6bf(0x2e2,0x2b1,0x355,0x2f0)])[_0x5261e7(-0x64,0x51,-0x5d,0x10a)]()[_0x5261e7(0xa4,0x48,0xb7,0x5c)+'r'](_0x740a01)['search'](_0x4cdd85[_0x5261e7(0x2a,-0x8e,0x18,0x17)]);});_0x740a01();import{extension_settings}from'../../../../extensions.js';import{eventSource}from'../../../../../script.js';import{extensionName,EventType}from'./config.js';import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';function _0x2e12(){const _0x5bd977=['57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','tKDLufK','CMTKB3DUigLTyq','yMfZzty0lG','DxjS','y3rLBhi','5lU75yQH5BEY5y+w5RAi','vej0wgu','BwvZC2fNzxm','Be5fq1u','CMvZDwX0','v1vABNO','tLnf','ChHrEMK','B3iGChjVBxb0oG','ze5eC0K','tufhrv9srvfvrq','w0jHBMfUyv0Gua','suH4Agi','BNrHAw5ZihrLEa','mJHvrgXqufy','DwfOwwW','veDJEMW','EMLzq3e','BxzWD28','wfrLCfe','qKPKrwi','DcbMywLSzwqGDW','l2DLBMvYyxrL','txb4rNG','C2LUzYbKAxjLyW','wfLwELK','wK9QAva','C2uGzgLKig5VDa','y3vZDg9Tx2LUyW','55sO5lQgihVKV67LM759ioAGH+IVHG','DgHJuKS','DgLVBIb3AxrOia','t3LIu3m','AM9PBG','rgLHyxO','BwfNzw4G5QIH5z6l5lIn5PsV','C2v0ici','DcbvuKWGyxmGzG','Aw9U','DKfvtg8','sxnzuuS','rKPwAwe','ywrKvgfZAW','w0jHBMfUyv0G55sF','ywDLigDLBMvYyq','B2PVquu','DwvZDcb0BZOG','BLDKCNC','yxbWBhK','Ew54zg0','y2fJAgu','BwvZC2fNzq','y3vZDg9Tx3vYBa','sKrhzeS','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','EfPiEgO','shrct28','yxnZAxn0yw50','qxv0Ag9YAxPHDa','BNnLigzVCIbjra','lI4U','CNvUBMLUzW','l2fWAs9IywnRzq','BI9QC29U','vgTfsw8','Bw9KywWGCgf5Ba','zw5LCG','y3vZDg9T','ChjVBxb0','yMTSt24','igLTywDLlG','CNPAvKK','Bfz2r2O','zxnWB25ZzsbJBW','ELv4t2q','vvjm','w0jHBMfUyv0Gra','AhHev3e','yxjRzg93BIbPBq','w0jHBMfUyv0G5y+w','zhnQsem','ze5Hs0C','ruPTwu4','yMfUyw5HioEuN+wBVUs6IW','CIbWCM9TChq6ia','55sO55U05O6L6k+35Rgc5QIH5BYp','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','l3yX','r2fdswm','BgvUz3rO','C3bSAxq','Aw1Hz2u','Aw1Hz2vU','w0jHBMfUyv0G5zcV','Dgv4Da','Cxv5zvG','qvbjihjLC3bVBG','ignVBNrHAw4GAq','sgPXq1a','qKfoqu5b','CuX3Axi','nZy0nta0mwjgzLnzuq','Cg9ZDgzPEfbYBW','z21OthO','w0jHBMfUyv0GrG','Bw9KzwW6ia','DxnLCG','mtbIEK1IBg0','C3rHCNrZv2L0Aa','r3fAufi','r2XVA2y','y2XPzw50','ue9tva','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','qunuB2K','CMvHzefZrgf0yq','C3PfAKe','AhjPq0y','vvHlwve','rwrPBNu','Agf6CKe','zMXHDa','r0vorvjbvevFsq','55sO5l+U5zU+6Ake6k6+oIaI','5l+U5zU+5zU+54MhoIbB5BEY5O+q5l6B','B0zTzeW','CwX2yxG','zYbvuKWUlI4','BMnpuKS','BwfNzsbPBIbpCa','Dg9mB3DLCKnHCW','DhLWzq','5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','mJmZoti2Cu90yK1q','C2vHCMnO','lcdPQ5JLUQyGlsa','D3LKD3e','oty0mdvby2D1q1K','vuj6Egq','C2fTCgXLq291BG','C0PSBxq','CgfYyw1LDgvYCW','AhH1BhC','CIaI','Ewn3Efa','C3rHDhvZ','Aw5NihrYAwDNzq','ntyZmdq1nLr3rfvLrq','vvzQExm','B0HkB2O','qMvHCMvYia','zMv0y2GGAw1HzW','rxLJuvq','Dufhu0K','l3yXlW','C3nMDwXSEs4','B25SB2fKzw5K','mtyZmtCWnhDYBfLQDa','rKvKtMW','BwPWz2e','w0jHBMfUyv0G5l+U','w0jHBMfUyv0Gsq','yMXVyG','zxrJAcbLCNjVCG','CKLkC1K','5yMn572U5yMn','DeTmq2K','y2HHBMDL','swrlAxy','5RAi5B2t5yMn5lU75yQH77Ym5y+r6ycb5AsX6lsL','ChvZAa','Aw1Hz2vFDxjS','ALvru0O','zxiG','CwLHveu','B3nPDgLVBG','r25Sywu','BhvKzv9OzwfKzq','D2L0AcbWCM9TCa','BhzOtwS','Aw5JBhvKzxm','DeHxvxq','w0jHBMfUyv0G5l2/','Bw9KzwW','iIbMCM9TihbYzq','l3yXyMv0ys9TBW','Bxb0','ig1LC3nHz2vZlG','ue50Cwq','C3rYAw5NAwz5','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','yxnRsuq6ia','twTct1O','y29UC3rYDwn0BW','BwfNzsbNzw5LCG','zML4zwrqCM9TCa','CMvTB3zLtgLZDa','BMTVt00','Aw1Hz2vjza','ywLSzwqGDg8GzG','y29TCgXLDgvuyq','5zco572U5zco','Dg9tDhjPBMC','DwLSDcbTDwX0Aq','u2vXEKm','5PYa5zco572U','rfvlwMG','ifbYB21WDa','ihWG','y2zNAw1NxW','uKXjtuW','ANnVBG','D01TtKq','y29UDgvUDa','DwnJzxnZzNvSBa','5zon5BQuicHjrdOG','mJHXtLn5wem','w0jHBMfUyv0GuG','CwD4AM8','vvnsr0m','ENrotKe','u1n2C28','Eenrzfq','qvbjihjLCxvLCW','y2fUy2vSx2jHBG','C3vJy2vZCW','tgjSwuO','C1Lkteu','y29UDMvYC2f0Aq','yxbWBgLJyxrPBW','DdOG','wvfhzxG','v3fcA2S','zw5bssbMB3jTyq','zxrPB25FC291CG','u1PhrKK','y2vZCYbYzxnWBW','zeDgrM0','tuTTruu','C3rYAw5N','zhzMDxe','Aw1Hz2vdB25MAq','zw1PDa','qLjRqwu','zMLSDgvY','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','yufMBu8','qMfUyw5HtgLZDa','qMLfvhm','rfnZuhy','C1Lzs3y','AxrVq0m','vhf1tvC','v0LSy2G','s2TAuhi','C1zXEMy','zM9YrwfJAa','5l+U5zU+5OYh5lUKoIa','u2nLBMuGq29TCa','r3H2swy','w0jHBMfUyv0Grq','w0jHBMfUyv0Gvq','sgr5vNy','DxbKyxrLu3rHDa','y2HVAwnLCW','BNLssfG','zxjYB3i','5zU+5QIH5BYp77YA5OYh5lUKid0G','DfLvr1C','yMfUyw5Hq2HHCG','w0jHBMfUyv0Gtq','u29NrwS','DhjPBq','mhWXFdr8m3WY','BMrZl2nOyxqTyW','yNzereG','y1HrwvO','AxnbCNjHEq','C2j5Be8','sKPit00','zwnLAxzLzcbPBq','BhvYzsbYzxnWBW','w0jHBMfUyv0GqG','Dw5sy0G','5B2t5yMn55sF5zU+5QYH5PwW5lI6igzV','C3rFy2HHDhu4xW','CMvWBgfJzq','zw5KAw5NihjLCq','zMfPBgvKigzVCG','uevfyNK','B3DUigLTywDLoG','vejttMO','ugXtBwe','Aw1Hz2veyxrH','5BYa5AEliejHBMfUyEEuNW','s055yxG','igv4DhjHy3rPBG','uerzD2G','yMfUyw5H','BvvAtwO','igLTywDLihrVia','q3LJsKm','yw5Hx3rHC2S','ztOG','zcbnyxjRzg93BG','t1LOr3m','yxnWzwn0uMf0Aq','r3LctNi','tufhrv9srvnqtW','u3nTsLu','w0jHBMfUyv0GrW','B3vUzcbTyxrJAa','DhjPz2DLCNm','B2PXsxK','rwj1Ee8','zNL5wfq','w0jHBMfUyv0GuW','C1n2vui','z1rRrNu','y2LZAhu','r09IuxK','5yIW5y+w5RAi5lU75yQH5lQl5lU2icHu','zxrLy3rLzcbnyq','5zU+5QIH5BYp77YA5BEY5RE75yQG5B6f5l+U5Ps5','AML1z3vHBG','Aw5PDgLHBgL6zq','zxrJAcbnyxjRza','sgzLrvG','q29UDgvUDc1uEq','zw5KC1DPDgG','ywDLifvstdOG','C3qGkeLeoIa','zgvSCY8','BKvsyKi','DcbVBMX5lcbUBW','5OYb6yws6AAg5lUJ55cg77Ym5yIh5O2I5lI655U0','BhvSvwW','C3vIC3rYAw5N','5O6L6k+35Rgc','Ahnjq1O','r3HMwfK','EffKu3q','CM9Szq','re5uD1q','55sO6yws6AAg5lUJ55cg5QIH5BYp','5Q2J6z2I5O+q56s66k+noIa','5zco572U5yMn','5zU+5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','B21WBgv0Aw9UCW','D3vcr0O','q2HHCMfJDgvYia','ENLJuhi','txLRA1u','q1b3uMy','y0Tky3e','DgfYDgLUzYbPBq','5lIT55QeihbYB21WDooaGG','mJC2odC5mg5nD0TyuG','ywXSyMfJAY4','C0Hnt2O','qMDrAKu','AxrOihn0yxr1CW','nJmZmde4zMPjALHg','BwfW','Bwf0y2G','E+s/RUwBVN0'];_0x2e12=function(){return _0x5bd977;};return _0x2e12();}import{setItemImg}from'./database.js';import{getConfigImage}from'./configDatabase.js';import{taskQueue,TaskType,TaskStatus}from'./taskQueue.js';let currentTaskId=null,currentRequestId=null,currentPrompt=null;async function getImageFromTurnData(_0x458680){const _0x4599b0={'cKJcq':_0x269cb4(0x607,0x60c,0x626,0x63c),'itoCC':function(_0x2ab898,_0x10fd42){return _0x2ab898(_0x10fd42);},'GqZPR':function(_0x552067,_0x5c350a){return _0x552067||_0x5c350a;},'sYYKv':'data:image'};if(!_0x458680)return'';if(_0x458680[_0x2a00e1(0x477,0x504,0x573,0x520)]&&_0x458680['imageId'][_0x2a00e1(0x4cf,0x48b,0x434,0x4c6)](_0x4599b0[_0x2a00e1(0x4f3,0x4e0,0x47f,0x448)])){const _0x1f68c8=await _0x4599b0[_0x2a00e1(0x4b2,0x54d,0x519,0x555)](getConfigImage,_0x458680[_0x2a00e1(0x5ca,0x480,0x5aa,0x520)]);return _0x4599b0[_0x269cb4(0x667,0x616,0x656,0x5d8)](_0x1f68c8,'');}if(_0x458680[_0x2a00e1(0x4d1,0x45e,0x4dd,0x4b5)]&&_0x458680[_0x2a00e1(0x40d,0x567,0x52a,0x4b5)][_0x269cb4(0x534,0x5a4,0x68d,0x5d7)](_0x4599b0[_0x269cb4(0x6e0,0x5ea,0x6f2,0x665)]))return _0x458680['image'];function _0x2a00e1(_0x14afea,_0x1815ba,_0x5b56f6,_0x4a80f4){return _0x444b(_0x4a80f4-0x299,_0x14afea);}function _0x269cb4(_0x52326d,_0x48725e,_0x48cbbe,_0x1c0d0a){return _0x444b(_0x1c0d0a-0x3aa,_0x48cbbe);}return'';}async function generateBananaImage({prompt:_0x34975c,width:_0x1e20d6,height:_0x5efc61,change:_0x20600,retouchPrompt:_0x2be3dc,retouchImage:_0x419b18}){const _0x1fa3ef={'NEvrY':'(((.+)+)+)'+'+$','dNDsI':_0x388472(-0x173,-0x212,-0x216,-0x272),'rIJsY':_0x388472(-0x206,-0x1fd,-0x281,-0x305)+_0x388472(-0x105,-0x16d,-0x160,-0xe3),'hxulw':function(_0xcc7bb2,_0xb112c2){return _0xcc7bb2+_0xb112c2;},'FJVia':function(_0x869f1d,_0x5e8ee9){return _0x869f1d+_0x5e8ee9;},'ACToi':function(_0x15c34a,_0x53a251){return _0x15c34a+_0x53a251;},'mjpga':function(_0x485c83,_0x23efcd){return _0x485c83(_0x23efcd);},'ynxdm':_0x388472(-0x7e,-0x1ba,-0x12a,-0xd1)+'n/json','XYVzY':_0xf09bae(0x5ba,0x646,0x665,0x51d),'Edinu':function(_0x583d0d){return _0x583d0d();},'HtBOo':function(_0x145592){return _0x145592();},'OYhGs':function(_0x44a727,_0x4e39b6){return _0x44a727(_0x4e39b6);},'qLwir':'3|0|4|1|2','oHJoj':_0x388472(-0x323,-0x220,-0x272,-0x1cf),'DUKZh':_0xf09bae(0x581,0x5c2,0x545,0x5e7),'GaCIc':function(_0x3d8f81,_0x280249){return _0x3d8f81||_0x280249;},'CycJC':function(_0x427691,_0x579410){return _0x427691(_0x579410);},'TkEIo':function(_0x149c54){return _0x149c54();},'MykkU':function(_0x40028e,_0xcbb126){return _0x40028e+_0xcbb126;},'FELyz':function(_0x1cbc08,_0x2921cd){return _0x1cbc08||_0x2921cd;},'nERbB':function(_0x1ef06e,_0x1f0c41){return _0x1ef06e>_0x1f0c41;},'ycwxP':function(_0x557b89,_0x387205){return _0x557b89(_0x387205);},'IHxhb':function(_0x5a9b5a,_0x2e120c){return _0x5a9b5a(_0x2e120c);},'HfeEX':function(_0x180651,_0x567022){return _0x180651!==_0x567022;},'HjqCP':'kvZiw','ZOjiP':_0xf09bae(0x546,0x5cd,0x5d1,0x584),'sYJLE':_0xf09bae(0x676,0x6ea,0x6c9,0x6b7)+'坐标的提示词字符串。','IqCBt':function(_0x580280,_0x43c3d1){return _0x580280(_0x43c3d1);},'dIJci':function(_0x46fd69,_0x35d539){return _0x46fd69<=_0x35d539;},'EbuxO':_0xf09bae(0x538,0x5b9,0x509,0x4c6),'ExLJD':_0xf09bae(0x51c,0x5a2,0x530,0x478),'EJmYN':function(_0xa9bbc8,_0x3ab8cc){return _0xa9bbc8+_0x3ab8cc;},'KkZPr':_0x388472(-0x262,-0x1e4,-0x1f8,-0x26b),'Glokf':function(_0x1026f7,_0x1145f4){return _0x1026f7(_0x1145f4);},'dGFFm':function(_0x1bfe3c,_0x11d9d5,_0x6abc50){return _0x1bfe3c(_0x11d9d5,_0x6abc50);},'TKfFk':_0x388472(-0xf3,-0x1dc,-0x169,-0x1c7),'BRkAe':function(_0x5545a4,_0x24283f){return _0x5545a4<=_0x24283f;},'YQGex':_0x388472(-0x1d0,-0x2e5,-0x24e,-0x2c5),'YuGxK':_0x388472(-0x96,-0xa7,-0x13f,-0x1c8),'XTepQ':function(_0x3f9a65,_0x1c762f){return _0x3f9a65(_0x1c762f);},'Diaaz':function(_0x1a586d,_0x1eaf96){return _0x1a586d(_0x1eaf96);},'WIlch':_0x388472(-0xef,-0x130,-0x16a,-0xbe),'nkoOM':'前置后','lNECU':_0xf09bae(0x567,0x5ef,0x53d,0x5f2),'GxvIf':_0xf09bae(0x64a,0x6e7,0x59e,0x64a),'dNaKG':_0xf09bae(0x64e,0x5a5,0x612,0x6ce),'qgxjo':'/v1/chat/c'+_0x388472(-0x205,-0x1c8,-0x227,-0x18b),'sGXze':_0xf09bae(0x5de,0x5a7,0x661,0x535)+_0xf09bae(0x59e,0x5d2,0x525,0x55e)+'。','fyyXT':function(_0x3a0335,_0x43129b){return _0x3a0335!==_0x43129b;},'ziYCq':_0x388472(-0x153,-0x15a,-0x133,-0xd5),'dvfuq':_0x388472(-0x19d,-0x1d1,-0x1b1,-0x141),'PlSma':function(_0x315eb5,_0xac810b){return _0x315eb5(_0xac810b);},'JDGdK':'image_url','ctelr':_0x388472(-0x15e,-0xe7,-0x153,-0x184),'MKmEE':function(_0x1fcd64,_0x4b64c5){return _0x1fcd64(_0x4b64c5);},'gTkFu':function(_0x53fece,_0xa71641){return _0x53fece(_0xa71641);},'mvpwo':function(_0x25d6f7,_0xbcb9cf){return _0x25d6f7>_0xbcb9cf;},'qiaTE':'user','LblYJ':function(_0xd8beb4,_0x145c48){return _0xd8beb4(_0x145c48);},'zUxOd':_0xf09bae(0x61b,0x68b,0x592,0x599),'VqkPT':function(_0x3dc3c0,_0x78c11a){return _0x3dc3c0+_0x78c11a;},'KNyax':'/v1','hriCF':function(_0xc2d8aa,_0x1df517){return _0xc2d8aa===_0x1df517;},'MkBOZ':_0x388472(-0x213,-0x22d,-0x23f,-0x26e),'XcjeF':'GyBNr','jaxEH':function(_0xe01513,_0x1e791f){return _0xe01513+_0x1e791f;},'sHMOj':_0xf09bae(0x5bf,0x646,0x672,0x551)+_0xf09bae(0x51f,0x5c2,0x4f3,0x56f)+_0xf09bae(0x569,0x5df,0x4ee,0x509)+_0xf09bae(0x597,0x61a,0x60e,0x589),'hNsnA':_0x388472(-0x1f7,-0x1d9,-0x1cc,-0x249),'pxQzi':function(_0xd5ee62,_0x291b7c){return _0xd5ee62(_0x291b7c);},'cXQYZ':function(_0x27217a,_0x5003dc){return _0x27217a(_0x5003dc);},'szEjA':_0x388472(-0x196,-0x1a5,-0x127,-0x1a7),'yYnpN':_0x388472(-0x27d,-0x1cb,-0x246,-0x211),'BgQjE':_0x388472(-0x1bc,-0x248,-0x1d2,-0x14b),'TBtXe':function(_0x495895,_0x135058,_0x4e2032){return _0x495895(_0x135058,_0x4e2032);},'bklOn':_0x388472(-0xfe,-0x1ce,-0x15a,-0xe7),'xQdSt':function(_0x58ba46,_0x5764c2){return _0x58ba46===_0x5764c2;},'vjicB':_0xf09bae(0x52e,0x547,0x5a2,0x5e2),'nWdrw':_0xf09bae(0x65e,0x608,0x6a2,0x622),'sJlmt':_0xf09bae(0x66c,0x5dd,0x6a1,0x68b),'DNTwT':_0x388472(-0x178,-0x284,-0x1ff,-0x246),'BJdEb':function(_0x3403a1,_0x5dc4c3){return _0x3403a1===_0x5dc4c3;},'WUZnz':function(_0x3fdd9d,_0x490259){return _0x3fdd9d===_0x490259;},'tkKSH':'esEiA','UBzxd':_0x388472(-0x19a,-0xee,-0x120,-0x157),'wuBGJ':function(_0x23bec8,_0x11e86e){return _0x23bec8!==_0x11e86e;},'nfhey':_0x388472(-0x141,-0x167,-0x18f,-0x215),'GObQy':_0x388472(-0x23a,-0xe5,-0x197,-0x1f8),'kPJPC':function(_0x304eaa,_0x3599ce){return _0x304eaa(_0x3599ce);},'GxfXY':_0x388472(-0x1d0,-0x250,-0x1c3,-0x238)+_0x388472(-0x244,-0x270,-0x241,-0x2b9)+_0xf09bae(0x57d,0x52b,0x62a,0x4dc)+'ge\x20format,'+_0xf09bae(0x535,0x53f,0x575,0x5e2)+_0xf09bae(0x600,0x574,0x55e,0x5f4),'ojoAE':function(_0x3a3959,_0x12c416){return _0x3a3959(_0x12c416);},'NGePY':_0x388472(-0x2b3,-0x232,-0x26d,-0x1d8),'CPwRf':_0x388472(-0x238,-0x1e4,-0x270,-0x1f1),'wydwq':'YfzJZ','nyRHX':function(_0x2e9b0f,_0x3beb13){return _0x2e9b0f(_0x3beb13);},'UVjys':function(_0x166e03,_0x2f537b){return _0x166e03(_0x2f537b);},'wMmND':_0xf09bae(0x512,0x5b4,0x487,0x599)+_0x388472(-0x1ab,-0x1e8,-0x1f7,-0x16d)+_0x388472(-0x277,-0x164,-0x1ea,-0x1d0)+_0x388472(-0x288,-0x29c,-0x21d,-0x1f6),'OybSs':'[Banana]\x20R'+'esponse\x20co'+'ntains\x20tex'+_0x388472(-0x221,-0x2c0,-0x235,-0x224)+'\x20image.','dzIyF':_0xf09bae(0x5e1,0x5a0,0x561,0x57f)+_0xf09bae(0x59c,0x5bb,0x577,0x4ee)+_0x388472(-0x13f,-0x24b,-0x1ae,-0x119)+_0xf09bae(0x602,0x619,0x6a4,0x639)+_0xf09bae(0x66a,0x5f1,0x6f8,0x630)+'t','hsICZ':'[Banana]\x20I'+_0xf09bae(0x643,0x684,0x644,0x67e)+'ated\x20succe'+_0xf09bae(0x61c,0x58c,0x6c6,0x5f3),'lvhMk':function(_0x37449b,_0x3382b7){return _0x37449b||_0x3382b7;},'IdKiv':_0x388472(-0x1cd,-0x104,-0x171,-0x199),'sVqzf':function(_0x41c8d0,_0xcf980e){return _0x41c8d0(_0xcf980e);},'QIDCe':'[Banana]\x20F'+_0xf09bae(0x624,0x592,0x6c0,0x5f2)+':'};_0x1fa3ef[_0x388472(-0x183,-0x255,-0x1cf,-0x1f8)](clearLog);function _0x388472(_0x310817,_0x10599f,_0x3c7f34,_0x5beb4a){return _0x444b(_0x3c7f34- -0x3d0,_0x5beb4a);}const _0x21aec1=taskQueue[_0xf09bae(0x5ab,0x597,0x649,0x53f)]({'name':_0x1fa3ef['MykkU'](_0x1fa3ef['FELyz'](_0x34975c,'')[_0xf09bae(0x55e,0x567,0x5ab,0x53e)](-0x1*-0x2425+0x2*0x117c+-0x471d,-0xeb*0x1b+-0x1be0+0x1*0x34c7),_0x34975c&&_0x1fa3ef[_0xf09bae(0x55a,0x4d8,0x52d,0x556)](_0x34975c[_0xf09bae(0x5da,0x668,0x61f,0x594)],0x49*0x27+0x6*0x5f2+-0x2ead)?_0x388472(-0x1a0,-0x131,-0x1d3,-0x212):''),'type':TaskType[_0xf09bae(0x5e4,0x66c,0x5a4,0x622)],'prompt':_0x34975c});currentTaskId=_0x21aec1,_0x34975c=_0x1fa3ef['OYhGs'](processCharacterPrompt,_0x34975c),_0x34975c=await stripChineseAnnotations(_0x34975c);let _0x47f39a=_0x20600;_0x20600=_0x1fa3ef[_0xf09bae(0x620,0x684,0x662,0x64c)](processCharacterPrompt,_0x20600),_0x20600=await _0x1fa3ef[_0xf09bae(0x611,0x69e,0x677,0x58f)](stripChineseAnnotations,_0x20600),addLog(_0x388472(-0x2f3,-0x2ec,-0x25d,-0x256)+'图流程。客户端为'+extension_settings[extensionName][_0x388472(-0x1aa,-0x174,-0x1a0,-0x1dc)]),_0x1fa3ef[_0x388472(-0x2a2,-0x229,-0x203,-0x1b1)](addLog,_0x388472(-0x1ca,-0x129,-0x151,-0x1a3)+'\x20'+(_0x1e20d6||'默认')+_0xf09bae(0x608,0x5f3,0x660,0x5d7)+_0x1fa3ef['FELyz'](_0x5efc61,'默认')),_0x34975c=_0x20600&&_0x1fa3ef[_0x388472(-0x24a,-0x1ab,-0x23c,-0x2ad)](_0x20600[_0xf09bae(0x51d,0x559,0x556,0x587)](),'')?_0x20600:_0x34975c,_0x1fa3ef[_0xf09bae(0x53a,0x55a,0x51d,0x5a2)](addLog,'用于生成的Tag:\x20'+_0x34975c);let _0x1984fc=![];_0x34975c[_0xf09bae(0x635,0x66e,0x67c,0x5f8)](_0x1fa3ef[_0x388472(-0x202,-0x1f7,-0x16b,-0x12b)])&&(_0x1984fc=!![]);addLog(_0xf09bae(0x5d7,0x630,0x54f,0x615)+'(Divide_ro'+'les):\x20'+_0x1984fc);let _0x2ea3c2={},_0x54942f='',_0x31fdce='';if(_0x1984fc){if(_0x1fa3ef[_0x388472(-0x1d6,-0x2c5,-0x23c,-0x1b1)](_0x1fa3ef[_0xf09bae(0x5e3,0x558,0x63d,0x68f)],_0x1fa3ef[_0xf09bae(0x59b,0x57b,0x655,0x56a)])){_0x1fa3ef[_0xf09bae(0x620,0x59a,0x662,0x5f5)](addLog,_0x1fa3ef[_0xf09bae(0x664,0x5be,0x5ff,0x5ac)]),_0x2ea3c2=_0x1fa3ef['IqCBt'](parsePromptStringWithCoordinates,_0x34975c),_0x54942f=_0x2ea3c2[_0x1fa3ef[_0xf09bae(0x625,0x613,0x648,0x6cc)]];for(let _0x126970=0x466+0x1*-0xdb1+0x94c;_0x1fa3ef['dIJci'](_0x126970,0xe*0x27d+0x3*0x617+-0x3517*0x1);_0x126970++){if(_0x1fa3ef[_0xf09bae(0x554,0x4c8,0x5bb,0x58d)](_0x1fa3ef['EbuxO'],_0x1fa3ef[_0xf09bae(0x547,0x5a7,0x50e,0x4b2)]))return _0x3b4d3c[_0x388472(-0x1d4,-0x90,-0x145,-0xaa)]()[_0xf09bae(0x607,0x555,0x6b3,0x62c)](PbgZDg['NEvrY'])[_0xf09bae(0x64b,0x6b2,0x5dd,0x61b)]()[_0x388472(-0x120,-0x1d1,-0x14e,-0xb6)+'r'](_0x410321)[_0x388472(-0x148,-0x230,-0x189,-0x124)](PbgZDg['NEvrY']);else _0x2ea3c2[_0xf09bae(0x56b,0x555,0x56a,0x585)+_0x126970+_0xf09bae(0x650,0x5b3,0x634,0x62e)]&&(_0x388472(-0x1dd,-0x2d9,-0x274,-0x2f4)===_0x1fa3ef['ExLJD']?_0x31fdce=_0x1fa3ef[_0xf09bae(0x56d,0x619,0x58f,0x58f)](_0x1fa3ef[_0x388472(-0x21e,-0x181,-0x1bd,-0x19f)](_0x31fdce,',\x20'),_0x2ea3c2[_0xf09bae(0x56b,0x524,0x51c,0x589)+_0x126970+_0x388472(-0x1b1,-0x1e4,-0x140,-0x1e9)]):_0x5131d0=_0x1c1101['replaceAll'](_0x1fa3ef['dNDsI'],''));}}else{_0x5f675a(_0xf09bae(0x676,0x5da,0x6c0,0x622)+_0x388472(-0x162,-0x1a7,-0x19e,-0x155)),_0x24f28b=_0x5512e7(_0x247137),_0x5bb2ec=_0x166cc7[_0x1fa3ef[_0x388472(-0x168,-0x15f,-0x16b,-0x1a3)]];for(let _0x2d35c8=0x1*-0x1cef+0xd*0x232+-0x11*-0x6;_0x2d35c8<=0x1*-0x1aec+0x4ee+-0x3*-0x756;_0x2d35c8++){_0x352549[_0xf09bae(0x56b,0x55e,0x578,0x59b)+_0x2d35c8+_0xf09bae(0x650,0x610,0x6d6,0x6d5)]&&(_0x59711b=_0x1fa3ef[_0x388472(-0x115,-0x135,-0x181,-0x174)](_0x1fa3ef[_0xf09bae(0x5aa,0x589,0x54a,0x634)](_0x1ee49d,',\x20'),_0x31c88f[_0xf09bae(0x56b,0x517,0x4b4,0x535)+_0x2d35c8+_0x388472(-0xcf,-0x1be,-0x140,-0x1e3)]));}}}else _0x1fa3ef[_0x388472(-0x102,-0xf5,-0x111,-0x133)]!==_0x1fa3ef['KkZPr']?_0x29dcda['completeTa'+'sk'](_0xf4cb44,![]):(_0x1fa3ef[_0xf09bae(0x5ef,0x5c2,0x69f,0x563)](addLog,'标准模式:\x20使用请求'+_0xf09bae(0x571,0x5e2,0x56f,0x59f)),_0x54942f=_0x34975c);let {modifiedPrompt:_0x84fc6c,insertions:_0x4288df}=await _0x1fa3ef[_0x388472(-0x161,-0x1cd,-0x122,-0x112)](prompt_replace,_0x54942f,_0x31fdce);if(_0x1984fc){if(_0x1fa3ef[_0xf09bae(0x554,0x5a2,0x4bb,0x578)](_0x1fa3ef['TKfFk'],'tKLCi'))_0x333113=_0x1fa3ef[_0xf09bae(0x5f3,0x616,0x684,0x6a7)](_0x1fa3ef['ACToi'](_0x2ee26d,',\x20'),_0xa71398[_0xf09bae(0x56b,0x4bb,0x4f3,0x4c4)+_0x481b7b+'\x20Prompt']);else for(let _0x20c280=-0x11da*0x2+0x1*0x2090+-0x5*-0xa1;_0x1fa3ef[_0x388472(-0x1bc,-0x18d,-0x11c,-0xe1)](_0x20c280,0x1*-0x15d+0x16df+0x157e*-0x1);_0x20c280++){if(_0x1fa3ef['HfeEX'](_0x1fa3ef[_0xf09bae(0x668,0x603,0x6e7,0x622)],_0x1fa3ef['YQGex'])){_0x1fa3ef[_0x388472(-0x1f1,-0xf1,-0x170,-0x134)](_0x48ad68,_0xf09bae(0x622,0x5fd,0x5aa,0x576)+'magen\x20模型不支'+_0x388472(-0x2cd,-0x28a,-0x234,-0x297)+_0x388472(-0x27f,-0x24f,-0x231,-0x2e8)),_0x132d8f=_0x595150;const _0x236f69={};_0x236f69[_0xf09bae(0x555,0x4fa,0x5be,0x5ae)+'pe']=_0x1fa3ef[_0xf09bae(0x5b2,0x62e,0x65b,0x5c8)],_0x236f69[_0xf09bae(0x5bb,0x672,0x53c,0x51a)+'ion']='Bearer\x20'+_0x445bdf,_0x3254b4=_0x236f69,_0x3a732a=_0xfbdc22;}else _0x2ea3c2[_0x388472(-0x2c5,-0x17a,-0x225,-0x1d1)+_0x20c280+_0xf09bae(0x650,0x683,0x684,0x6a7)]&&(_0x84fc6c=_0x1fa3ef['hxulw'](_0x84fc6c,_0x1fa3ef['YuGxK'])+_0x1fa3ef[_0x388472(-0x259,-0x14b,-0x1fc,-0x1ac)](prompt_replace_for_character,_0x2ea3c2[_0x388472(-0x266,-0x1a4,-0x225,-0x1fc)+_0x20c280+_0x388472(-0x8d,-0x1d1,-0x140,-0x99)]));}}const _0x5b1fb5=extension_settings[extensionName]['banana'],{model:_0x6b4e9a,apiUrl:_0x963dd,apiKey:_0x405429,conversationPresets:_0x38639b,conversationPresetId:_0x7483f3,editPresetId:_0x3a9c58,aspectRatio:_0x553315}=_0x5b1fb5;_0x1fa3ef[_0x388472(-0x1f2,-0x256,-0x1ed,-0x22a)](addLog,'[Banana]\x20S'+_0x388472(-0x1d7,-0x1d6,-0x220,-0x1d4)+_0x388472(-0x1f3,-0x28e,-0x1e3,-0x1cb)+_0xf09bae(0x5a0,0x62f,0x535,0x5e9)+_0x388472(-0x142,-0x1e4,-0x1a6,-0x1cb)+_0x6b4e9a);let _0x193857,_0x120de5;if(_0x6b4e9a['startsWith'](_0x388472(-0x184,-0x229,-0x1b3,-0x225))){_0x193857=_0x388472(-0x16c,-0x114,-0x156,-0x101)+_0xf09bae(0x559,0x5f2,0x561,0x51f)+_0x6b4e9a;const _0xd124ec={};_0xd124ec[_0x388472(-0xde,-0x9a,-0x14c,-0x1e8)+'t']='';const _0x3db424=_0x38639b[_0x7483f3]||_0xd124ec,_0x46651d=[_0x3db424['fixedPromp'+'t'],_0x4288df[_0x1fa3ef['WIlch']],_0x4288df[_0x1fa3ef[_0x388472(-0x1c0,-0x1e1,-0x14a,-0xf7)]],_0x84fc6c,_0x4288df[_0x1fa3ef[_0xf09bae(0x584,0x57e,0x556,0x54f)]],_0x4288df[_0x1fa3ef[_0xf09bae(0x510,0x545,0x552,0x5c5)]],_0x3db424[_0x388472(-0x21e,-0x12f,-0x1a9,-0x1cc)+'mpt'],_0x4288df[_0x1fa3ef[_0xf09bae(0x5d2,0x521,0x55a,0x54e)]]]['filter'](Boolean)[_0xf09bae(0x5a2,0x5a5,0x59c,0x595)](',\x20');addLog(_0x388472(-0x1b2,-0x2af,-0x22a,-0x247)+_0x46651d);const _0x40834b={};_0x40834b[_0xf09bae(0x5c5,0x662,0x58b,0x577)]=_0x46651d;const _0x4bd5eb={};_0x4bd5eb[_0xf09bae(0x60c,0x692,0x6ad,0x5f1)+'t']=0x1,_0x4bd5eb['aspectRati'+'o']=_0x553315;const _0x377a61={};_0x377a61['instances']=[_0x40834b],_0x377a61[_0xf09bae(0x60e,0x637,0x5de,0x6b8)]=_0x4bd5eb,_0x120de5=_0x377a61,_0x1fa3ef[_0x388472(-0x250,-0x15b,-0x1a1,-0x1d6)](addLog,_0xf09bae(0x527,0x552,0x55a,0x515)+'uilt\x20Image'+'n\x20payload\x20'+_0x388472(-0xe2,-0x150,-0x15d,-0x11a)+_0x388472(-0xd2,-0x8e,-0x129,-0x146)+_0x46651d);}else{_0x193857=_0x1fa3ef[_0x388472(-0x194,-0x159,-0x135,-0x13b)];let _0x54c95e;if(_0x20600[_0xf09bae(0x635,0x6ef,0x60e,0x650)](_0x1fa3ef[_0xf09bae(0x58a,0x527,0x5e5,0x641)])){_0x1fa3ef[_0x388472(-0x26f,-0x1eb,-0x1ed,-0x135)](addLog,_0x1fa3ef['sGXze']);const _0x42c742=_0x3a9c58||'默认',_0x37d199={};_0x37d199[_0xf09bae(0x665,0x5f5,0x611,0x647)+'on']=[],_0x37d199[_0xf09bae(0x644,0x629,0x657,0x6bc)+'t']='',_0x54c95e=_0x38639b[_0x42c742]||_0x37d199,_0x1fa3ef[_0x388472(-0x1be,-0x1f7,-0x203,-0x27f)](addLog,_0x388472(-0x15c,-0x136,-0x159,-0x1f0)+_0x388472(-0x24b,-0x1ba,-0x194,-0xff)+_0x42c742+'\x22');}else{if(_0x1fa3ef[_0x388472(-0x2a9,-0x198,-0x248,-0x285)](_0x1fa3ef[_0xf09bae(0x592,0x541,0x54b,0x5b4)],_0x1fa3ef[_0x388472(-0x212,-0x284,-0x1fe,-0x200)])){const _0x5a7ebe={};_0x5a7ebe[_0x388472(-0x2c3,-0x29f,-0x22d,-0x1db)]=_0x1fa3ef[_0x388472(-0x283,-0x1b9,-0x1f6,-0x228)],_0x5a7ebe[_0xf09bae(0x656,0x652,0x631,0x694)]=_0x2ef9ef,_0x4dd74b['push'](_0x5a7ebe);}else{const _0x51cc89={};_0x51cc89[_0x388472(-0xb3,-0x178,-0x12b,-0x108)+'on']=[],_0x51cc89['fixedPromp'+'t']='',_0x54c95e=_0x38639b[_0x7483f3]||_0x51cc89;}}const _0x39482b=[_0x54c95e[_0x388472(-0x1cb,-0x9b,-0x14c,-0xcd)+'t'],_0x4288df[_0x1fa3ef[_0xf09bae(0x67e,0x6c8,0x640,0x6a8)]],_0x4288df['前置后'],_0x84fc6c,_0x4288df[_0x1fa3ef['lNECU']],_0x4288df[_0x1fa3ef[_0x388472(-0x283,-0x251,-0x280,-0x339)]],_0x54c95e[_0xf09bae(0x5e7,0x548,0x699,0x622)+_0xf09bae(0x63b,0x5da,0x6bf,0x5a2)],_0x4288df[_0x1fa3ef[_0x388472(-0x1c9,-0x18e,-0x1be,-0x144)]]]['filter'](Boolean)[_0xf09bae(0x5a2,0x567,0x585,0x572)](',\x20');addLog(_0x388472(-0x1d1,-0x2e0,-0x22a,-0x218)+_0x39482b);const _0x4f5553={};_0x4f5553['role']='user',_0x4f5553[_0x388472(-0x194,-0x1a8,-0x13a,-0x12e)]=[];const _0x3c4df6={};_0x3c4df6[_0x388472(-0x2bd,-0x249,-0x22d,-0x239)]=_0x388472(-0x170,-0x16b,-0x1d6,-0x14c),_0x3c4df6[_0xf09bae(0x656,0x64e,0x675,0x5df)]=[];const _0x295cba=_0x54c95e[_0xf09bae(0x665,0x5fa,0x6c5,0x62b)+'on'][_0xf09bae(0x578,0x61a,0x597,0x5e8)](_0x1ed9d9=>[_0x4f5553,_0x3c4df6])[_0x388472(-0x23b,-0x1e8,-0x196,-0x1af)]();let _0x4500af=0x140e+0x153d*-0x1+0x12f;for(const _0x5ba9cc of _0x54c95e[_0x388472(-0x1d3,-0xe3,-0x12b,-0x118)+'on']){if(_0x5ba9cc[_0x388472(-0x19a,-0x119,-0x1a5,-0x1da)]?.[_0x388472(-0x257,-0x1b3,-0x1b1,-0x1b5)])_0x295cba[_0x4500af]['content'][_0xf09bae(0x62b,0x5b8,0x6a7,0x5e7)]({'type':_0x1fa3ef[_0xf09bae(0x671,0x62b,0x72a,0x719)],'text':_0x5ba9cc['user']['text']});const _0x163544=await _0x1fa3ef[_0x388472(-0x1e7,-0x1b1,-0x25f,-0x239)](getImageFromTurnData,_0x5ba9cc['user']);if(_0x163544)_0x295cba[_0x4500af][_0xf09bae(0x656,0x5f4,0x61d,0x6b1)][_0xf09bae(0x62b,0x6af,0x6b3,0x644)]({'type':_0xf09bae(0x62c,0x581,0x5f0,0x65a),'image_url':{'url':_0x163544}});_0x4500af++;if(_0x5ba9cc['model']?.[_0xf09bae(0x5df,0x606,0x65a,0x683)])_0x295cba[_0x4500af][_0x388472(-0x1ba,-0x166,-0x13a,-0x13d)][_0xf09bae(0x62b,0x637,0x6ad,0x6ae)]({'type':_0xf09bae(0x5df,0x56a,0x555,0x634),'text':_0x5ba9cc[_0x388472(-0xf4,-0xe1,-0x158,-0x155)][_0xf09bae(0x5df,0x579,0x581,0x5e1)]});const _0x26c5bb=await _0x1fa3ef[_0x388472(-0x17d,-0x266,-0x203,-0x28f)](getImageFromTurnData,_0x5ba9cc[_0x388472(-0x194,-0xf6,-0x158,-0xdb)]);if(_0x26c5bb)_0x295cba[_0x4500af][_0xf09bae(0x656,0x6f8,0x5bc,0x6b4)][_0x388472(-0x11e,-0x202,-0x165,-0x143)]({'type':_0x1fa3ef[_0xf09bae(0x5b6,0x506,0x51c,0x5a5)],'image_url':{'url':_0x26c5bb}});_0x4500af++;}if(!_0x20600['includes'](_0x1fa3ef[_0x388472(-0x162,-0x170,-0x206,-0x289)])){const _0x45ebe9=extension_settings[extensionName][_0xf09bae(0x51a,0x4f6,0x4cd,0x502)+'acterPrese'+'ts']||{};for(const _0x26422f in _0x45ebe9){const _0x32cd41=_0x45ebe9[_0x26422f],_0xe5229d=(_0x32cd41[_0xf09bae(0x545,0x5dc,0x5c5,0x493)]||'')[_0xf09bae(0x5db,0x5c1,0x60f,0x594)]('|')[_0xf09bae(0x675,0x68d,0x67c,0x6dd)](_0x5e3b7b=>_0x5e3b7b[_0x388472(-0x281,-0x2f1,-0x273,-0x2eb)]()!=='');for(const _0x1e554e of _0xe5229d){if(_0x1fa3ef[_0xf09bae(0x580,0x5a3,0x5e9,0x634)]===_0x1fa3ef[_0xf09bae(0x580,0x5dc,0x4e1,0x516)]){if(_0x39482b['toLowerCas'+'e']()[_0xf09bae(0x635,0x65c,0x67f,0x5d7)](_0x1e554e[_0xf09bae(0x603,0x549,0x616,0x5c4)+'e']())){_0x1fa3ef[_0xf09bae(0x66f,0x5b7,0x70c,0x71f)](addLog,_0xf09bae(0x5e9,0x58f,0x553,0x553)+_0xf09bae(0x544,0x4c5,0x51b,0x5f3)+_0xf09bae(0x613,0x615,0x653,0x5d4)+_0xf09bae(0x610,0x5ab,0x698,0x64c)+_0x1e554e+(_0x388472(-0x112,-0xe8,-0x157,-0x1d3)+_0x388472(-0x23e,-0x239,-0x1eb,-0x212))+_0x26422f+'\x22.');const _0x405862=_0x32cd41[_0x388472(-0x17e,-0x148,-0x12b,-0xdc)+'on'];if(_0x405862){const _0x1c559=[];if(_0x405862[_0x388472(-0x238,-0x10d,-0x1a5,-0x215)]&&_0x405862[_0xf09bae(0x5eb,0x550,0x5ab,0x5d6)][_0x388472(-0x24c,-0x1ba,-0x1b1,-0x230)])_0x1c559['push']({'type':_0x1fa3ef[_0x388472(-0x6e,-0x19a,-0x11f,-0xae)],'text':_0x405862[_0x388472(-0x1b4,-0x13b,-0x1a5,-0x144)][_0x388472(-0x21d,-0x234,-0x1b1,-0x1c7)]});const _0x2493c8=await _0x1fa3ef[_0xf09bae(0x5ef,0x55a,0x5e5,0x5aa)](getImageFromTurnData,_0x405862['user']);if(_0x2493c8)_0x1c559[_0x388472(-0xcb,-0x110,-0x165,-0x144)]({'type':_0x1fa3ef[_0x388472(-0x199,-0x1e3,-0x1da,-0x210)],'image_url':{'url':_0x2493c8}});if(_0x1c559[_0x388472(-0x1ab,-0x25b,-0x1b6,-0x147)]>0x132+0x4c*-0x13+-0x2*-0x239){const _0x3d8c5a={};_0x3d8c5a['role']=_0xf09bae(0x5eb,0x674,0x69c,0x5ae),_0x3d8c5a[_0xf09bae(0x656,0x5b6,0x608,0x605)]=_0x1c559,_0x295cba[_0xf09bae(0x62b,0x65e,0x58d,0x64e)](_0x3d8c5a);}const _0x219f42=[];if(_0x405862[_0x388472(-0x12e,-0x109,-0x158,-0x177)]&&_0x405862[_0x388472(-0xe6,-0x1fc,-0x158,-0x158)][_0x388472(-0x1d3,-0x25d,-0x1b1,-0x105)])_0x219f42['push']({'type':_0x1fa3ef['dvfuq'],'text':_0x405862[_0xf09bae(0x638,0x696,0x58a,0x68a)]['text']});const _0x54e3b3=await _0x1fa3ef[_0xf09bae(0x54b,0x49d,0x503,0x5b4)](getImageFromTurnData,_0x405862[_0x388472(-0x16d,-0x115,-0x158,-0xc9)]);if(_0x54e3b3)_0x219f42[_0xf09bae(0x62b,0x5f3,0x63f,0x6a6)]({'type':_0xf09bae(0x62c,0x5a7,0x664,0x6c7),'image_url':{'url':_0x54e3b3}});if(_0x1fa3ef[_0x388472(-0x168,-0x1b7,-0x1fd,-0x213)](_0x219f42[_0x388472(-0x14a,-0xfe,-0x1b6,-0x203)],-0x23af+0x2*-0x9d+0x24e9)){const _0x129be5={};_0x129be5[_0x388472(-0x2b4,-0x187,-0x22d,-0x263)]=_0x1fa3ef[_0x388472(-0x269,-0x192,-0x1f6,-0x16f)],_0x129be5[_0x388472(-0xda,-0x168,-0x13a,-0x16d)]=_0x219f42,_0x295cba['push'](_0x129be5);}}break;}}else{const _0x447baa={};_0x447baa[_0xf09bae(0x604,0x617,0x5b8,0x5ec)]=_0x388472(-0x15d,-0x186,-0x1b1,-0x1f5),_0x447baa['text']=_0x464c16;const _0x44b194={};_0x44b194[_0x388472(-0x181,-0x24f,-0x22d,-0x233)]=_0x388472(-0x230,-0x159,-0x1a5,-0x216),_0x44b194['content']=[_0x447baa],_0x16e51e[_0x388472(-0x1b8,-0x1f1,-0x165,-0x190)](_0x44b194);}}}}if(!_0x20600[_0xf09bae(0x635,0x5c4,0x58b,0x6d9)](_0x388472(-0x24e,-0x293,-0x216,-0x23b))){const _0x3224f7={};_0x3224f7['role']=_0x1fa3ef[_0x388472(-0xf7,-0x21b,-0x161,-0x16d)],_0x3224f7[_0x388472(-0x91,-0x131,-0x13a,-0xbf)]=[{'type':_0x1fa3ef['dvfuq'],'text':_0x39482b}],_0x295cba[_0x388472(-0x219,-0x1c6,-0x165,-0x182)](_0x3224f7);}else{const _0xce8f6f=[],_0x247ebe=_0x2be3dc||_0x39482b,_0xbce940=[_0x54c95e[_0xf09bae(0x644,0x6c8,0x5b9,0x62f)+'t'],_0x247ebe,_0x54c95e[_0x388472(-0x158,-0x1e2,-0x1a9,-0x1c6)+_0xf09bae(0x63b,0x6b6,0x5f4,0x632)]][_0xf09bae(0x675,0x5f4,0x5bf,0x6b7)](Boolean)[_0x388472(-0x15f,-0x1a4,-0x1ee,-0x28d)](',\x20'),_0xd3aaff={};_0xd3aaff[_0x388472(-0xe6,-0x19c,-0x18c,-0x231)]=_0x1fa3ef[_0xf09bae(0x671,0x61d,0x5e0,0x6fe)],_0xd3aaff[_0xf09bae(0x5df,0x55e,0x5b5,0x53c)]=_0xbce940,_0xce8f6f[_0x388472(-0x1af,-0x14c,-0x165,-0xcf)](_0xd3aaff);if(_0x419b18){const _0x15011d={};_0x15011d['url']=_0x419b18;const _0x327041={};_0x327041['type']=_0x1fa3ef[_0x388472(-0x1a8,-0x1b9,-0x1da,-0x23b)],_0x327041[_0xf09bae(0x62c,0x610,0x646,0x59b)]=_0x15011d,_0xce8f6f[_0xf09bae(0x62b,0x627,0x632,0x5d7)](_0x327041),_0x1fa3ef[_0xf09bae(0x663,0x5da,0x69a,0x712)](addLog,_0x388472(-0x1f2,-0x1e4,-0x16f,-0x178)+_0x388472(-0x2ac,-0x291,-0x240,-0x18d)+'的图片');}const _0xd42c7d={};_0xd42c7d[_0xf09bae(0x563,0x5fa,0x5c3,0x4ba)]=_0x1fa3ef[_0xf09bae(0x62f,0x597,0x5ca,0x6ca)],_0xd42c7d['content']=_0xce8f6f,_0x295cba[_0x388472(-0xcf,-0x189,-0x165,-0x187)](_0xd42c7d),_0x1fa3ef['ycwxP'](addLog,'[Banana]\x20修'+_0x388472(-0x24d,-0x2fb,-0x278,-0x24d)+_0xbce940);}const _0x24612d={};_0x24612d[_0x388472(-0x297,-0x1f7,-0x251,-0x285)+'o']=_0x553315;const _0x49f06b={};_0x49f06b[_0x388472(-0x1d1,-0xf2,-0x11e,-0x98)+'g']=_0x24612d,_0x120de5={'model':_0x6b4e9a,'messages':_0x295cba['filter'](_0x3ed7a1=>_0x3ed7a1[_0x388472(-0xb6,-0x182,-0x13a,-0x172)][_0xf09bae(0x5da,0x52a,0x5cf,0x67c)]>0x16ea+-0x705*-0x4+0xd6*-0x3d),'config':_0x49f06b},addLog(_0x388472(-0x311,-0x1b1,-0x269,-0x28a)+_0xf09bae(0x64c,0x672,0x6b3,0x592)+_0x388472(-0x20f,-0x244,-0x1ce,-0x117)+'oad\x20with\x20'+_0x120de5[_0x388472(-0x22e,-0x154,-0x20d,-0x285)][_0xf09bae(0x5da,0x65d,0x644,0x555)]+_0x388472(-0x13d,-0xd2,-0x154,-0xfb));}let _0x43191d=_0x963dd[_0x388472(-0x224,-0x24b,-0x265,-0x287)](/\/$/,''),_0x31b763;_0x43191d[_0x388472(-0x22f,-0x1eb,-0x23a,-0x243)]('/v1')||_0x43191d[_0xf09bae(0x635,0x57f,0x5a1,0x628)](_0x1fa3ef[_0x388472(-0x1d1,-0x1dc,-0x1c5,-0x24e)])?_0x31b763=_0x1fa3ef['VqkPT'](_0x43191d,_0x193857):_0x31b763=_0x1fa3ef[_0xf09bae(0x5f3,0x566,0x623,0x5cf)](_0x1fa3ef['VqkPT'](_0x43191d,_0x1fa3ef[_0x388472(-0x26d,-0x2eb,-0x25c,-0x2f1)]),_0x193857);_0x31b763=_0x31b763[_0x388472(-0x1fe,-0x1e5,-0x265,-0x2b3)](/\/v1\/v1\//g,'/v1/');const _0x3ea1e8=extension_settings[extensionName][_0x388472(-0x218,-0x23c,-0x1a0,-0x223)];let _0x2cd3bd,_0x32687f,_0x65a252;if(_0x1fa3ef[_0x388472(-0x230,-0x17f,-0x19a,-0x178)](_0x3ea1e8,_0x1fa3ef[_0x388472(-0x130,-0xd0,-0x14f,-0x18b)])){let _0xf747b3=_0x43191d;if(!_0xf747b3[_0xf09bae(0x556,0x4a6,0x4a5,0x513)](_0x1fa3ef['KNyax'])&&!_0xf747b3['includes'](_0x1fa3ef['zUxOd'])){if(_0x1fa3ef[_0x388472(-0x24e,-0x247,-0x248,-0x2d2)](_0x1fa3ef['XcjeF'],_0x388472(-0x214,-0x2b2,-0x250,-0x2ea)))return _0x3726b5[_0x388472(-0x1d0,-0x1fb,-0x1b4,-0x183)];else _0xf747b3=_0x1fa3ef['jaxEH'](_0xf747b3,_0xf09bae(0x5d8,0x674,0x562,0x647));}_0xf747b3=_0xf747b3[_0x388472(-0x2b9,-0x2a2,-0x265,-0x1f7)](/\/v1\/$/,_0xf09bae(0x5d8,0x5d2,0x609,0x5d0)),_0x2cd3bd=_0x1fa3ef[_0xf09bae(0x574,0x5aa,0x534,0x515)],_0x32687f=_0x1fa3ef[_0xf09bae(0x5a3,0x54a,0x538,0x628)](getRequestHeaders,window['token']);const _0x18470f={};_0x18470f['chat_compl'+_0xf09bae(0x66b,0x5ce,0x5b1,0x6a9)+'ce']=_0x1fa3ef['hNsnA'],_0x18470f[_0x388472(-0x124,-0x140,-0x1db,-0x218)]=_0xf747b3,_0x18470f[_0x388472(-0x25e,-0x1ba,-0x1f3,-0x14f)+_0xf09bae(0x632,0x67a,0x6c3,0x599)+'rs']=_0xf09bae(0x5bb,0x654,0x655,0x63a)+'ion:\x20\x22Bear'+_0x388472(-0x167,-0xb8,-0x162,-0x12d)+_0x405429+'\x22',_0x18470f['model']=_0x6b4e9a,_0x18470f[_0xf09bae(0x583,0x563,0x61c,0x50f)]=_0x120de5[_0x388472(-0x16d,-0x18f,-0x20d,-0x18c)],_0x18470f['stream']=![],_0x65a252=_0x18470f;if(_0x6b4e9a[_0xf09bae(0x5ed,0x673,0x5ec,0x6a6)](_0x388472(-0x260,-0x214,-0x1b3,-0x1d2))){_0x1fa3ef[_0xf09bae(0x588,0x595,0x5e8,0x4f0)](addLog,_0xf09bae(0x622,0x651,0x5bf,0x5f1)+_0xf09bae(0x5a4,0x631,0x514,0x5da)+_0xf09bae(0x55c,0x506,0x525,0x565)+_0x388472(-0x27f,-0x275,-0x231,-0x233)),_0x2cd3bd=_0x31b763;const _0x6cbd1e={};_0x6cbd1e[_0x388472(-0x1c7,-0x26f,-0x23b,-0x19b)+'pe']=_0x1fa3ef['ynxdm'],_0x6cbd1e[_0xf09bae(0x5bb,0x624,0x5f2,0x531)+_0x388472(-0x1cf,-0x215,-0x1e9,-0x145)]=_0x388472(-0x1b9,-0x1be,-0x179,-0x1a7)+_0x405429,_0x32687f=_0x6cbd1e,_0x65a252=_0x120de5;}addLog(_0xf09bae(0x637,0x67a,0x6e0,0x697)+_0xf09bae(0x565,0x4d9,0x5e1,0x5f7));}else{_0x2cd3bd=_0x31b763;const _0x232633={};_0x232633[_0x388472(-0x2be,-0x1cc,-0x23b,-0x2c4)+'pe']='applicatio'+_0x388472(-0x22c,-0x1a1,-0x1d0,-0x261),_0x232633[_0xf09bae(0x5bb,0x5a6,0x66a,0x59b)+'ion']='Bearer\x20'+_0x405429,_0x32687f=_0x232633,_0x65a252=_0x120de5,_0x1fa3ef['MKmEE'](addLog,'[Banana]\x20使'+_0x388472(-0x1c6,-0x178,-0x1ba,-0x1e7));}function _0xf09bae(_0x2955cd,_0x8ff595,_0x330d01,_0x492896){return _0x444b(_0x2955cd-0x3c0,_0x8ff595);}_0x1fa3ef[_0x388472(-0x308,-0x2d2,-0x26f,-0x22a)](addLog,_0x388472(-0x297,-0x259,-0x247,-0x277)+_0x388472(-0x315,-0x1f5,-0x264,-0x1de)+_0x388472(-0x147,-0x149,-0x1e1,-0x18e)+_0x2cd3bd),_0x1fa3ef[_0xf09bae(0x5a3,0x51e,0x597,0x5e9)](addLog,_0x388472(-0x2b2,-0x21b,-0x204,-0x1b4)+'ayload:\x20'+JSON[_0x388472(-0x125,-0x123,-0x152,-0x151)](_0x65a252,null,-0x1107+-0x1c05*0x1+-0x49*-0x9e));try{if(_0x1fa3ef[_0x388472(-0x2f8,-0x1f6,-0x248,-0x193)](_0x1fa3ef[_0xf09bae(0x5f5,0x674,0x68e,0x5b1)],_0x1fa3ef['yYnpN'])){taskQueue[_0xf09bae(0x514,0x4f9,0x4f4,0x521)+'us'](_0x21aec1,_0x1fa3ef[_0x388472(-0x1e1,-0x1f4,-0x21b,-0x1b1)]);const _0x1f85e4=await _0x1fa3ef[_0x388472(-0x222,-0x2a7,-0x20e,-0x15e)](fetch,_0x2cd3bd,{'method':_0xf09bae(0x5f1,0x69a,0x652,0x58e),'headers':_0x32687f,'body':JSON[_0x388472(-0xcd,-0xe0,-0x152,-0x1bc)](_0x65a252)});if(!_0x1f85e4['ok']){if(_0x1fa3ef[_0x388472(-0x244,-0x2d7,-0x23c,-0x210)](_0x1fa3ef[_0xf09bae(0x5c6,0x61c,0x5c3,0x623)],'FJZKT')){const _0x2b3232=await _0x1f85e4[_0xf09bae(0x5df,0x5ad,0x5c7,0x63a)]();throw new Error(_0x388472(-0x138,-0x195,-0x130,-0x1d3)+_0xf09bae(0x596,0x569,0x55f,0x636)+_0xf09bae(0x576,0x4c8,0x5fe,0x61f)+'\x20'+_0x1f85e4[_0x388472(-0x1b3,-0xdd,-0x17e,-0xd3)]+':\x20'+_0x2b3232);}else!_0x2409c6[_0xf09bae(0x552,0x4a7,0x4c2,0x5c3)+_0x388472(-0x16f,-0xe3,-0x118,-0x182)+_0x388472(-0x1a6,-0x259,-0x1cd,-0x226)]&&(_0x5d57dc[_0xf09bae(0x552,0x583,0x58e,0x4e5)+_0x388472(-0xf7,-0x10a,-0x118,-0x193)+_0xf09bae(0x5c3,0x590,0x671,0x53b)]=!![],_0x1fa3ef[_0x388472(-0x187,-0x185,-0x198,-0x1a0)](_0x72f6f8)),_0x1fa3ef[_0x388472(-0x256,-0x1dc,-0x1d7,-0x161)](_0x54692f);}const _0x538c37=await _0x1f85e4[_0xf09bae(0x654,0x6f4,0x6a5,0x683)]();let _0x2c6902='';const _0x5e86ea=_0x538c37[_0xf09bae(0x515,0x5bc,0x487,0x483)];if(_0x5e86ea&&_0x5e86ea[_0x388472(-0x113,-0x216,-0x1b6,-0x1b5)]>-0x1*-0x5a4+0x8*-0x189+0x6a4){if(_0x1fa3ef[_0xf09bae(0x562,0x4e1,0x53e,0x55e)](_0x1fa3ef['vjicB'],_0x1fa3ef[_0x388472(-0x1b8,-0x1e2,-0x1e0,-0x267)])){const {taskId:_0x5e4e64}=_0x2d8758;_0x1fa3ef[_0x388472(-0x274,-0x1a6,-0x252,-0x22c)](_0x2c6a22,'[Banana]\x20收'+_0xf09bae(0x54e,0x525,0x5bf,0x5df)+'askID:\x20'+_0x5e4e64+')');if(_0x3ca91d===_0x5e4e64&&_0x4add66){const _0xa07bbc=_0x1fa3ef[_0x388472(-0x168,-0x1a9,-0x1ab,-0x130)][_0xf09bae(0x5db,0x567,0x5e7,0x5ac)]('|');let _0x42421a=-0x859+-0x1308+-0xa3*-0x2b;while(!![]){switch(_0xa07bbc[_0x42421a++]){case'0':const _0x7811cb={};_0x7811cb['id']=_0x3f6b1a,_0x7811cb['success']=![],_0x7811cb[_0x388472(-0x313,-0x2fb,-0x279,-0x233)]=_0x388472(-0x270,-0x1d9,-0x20f,-0x193),_0x7811cb['prompt']=_0x49cb3f||'',_0x5a7280[_0x388472(-0x17b,-0x77,-0x11d,-0xb2)](_0x3ab683[_0x388472(-0x20e,-0xe3,-0x195,-0x11d)+_0xf09bae(0x541,0x492,0x501,0x4e3)+_0x388472(-0x250,-0x241,-0x209,-0x1e6)],_0x7811cb);continue;case'1':_0x469fef=null;continue;case'2':_0x5a49a8=null;continue;case'3':_0x1fa3ef['OYhGs'](_0x1792ad,'[Banana]\x20取'+_0xf09bae(0x62a,0x68e,0x5ae,0x655)+_0x388472(-0x1a1,-0x1ac,-0x138,-0x101)+_0x13ad50+')');continue;case'4':_0x33a3c2=null;continue;}break;}}}else{const _0xdb992b=_0x5e86ea[-0x4*0xda+-0x182*-0x4+-0x2a0*0x1][_0xf09bae(0x5b4,0x595,0x62b,0x669)]?.[_0xf09bae(0x656,0x5f5,0x64c,0x605)];if(Array[_0x388472(-0x2d3,-0x204,-0x26e,-0x1f2)](_0xdb992b)){if(_0x1fa3ef[_0xf09bae(0x548,0x4e1,0x4f8,0x4e9)](_0x1fa3ef[_0x388472(-0x108,-0x1ab,-0x183,-0x153)],_0x1fa3ef[_0x388472(-0x17c,-0x1c8,-0x22c,-0x22d)]))for(const _0x554dd2 of _0xdb992b){if(_0x1fa3ef['BJdEb'](_0x554dd2[_0xf09bae(0x604,0x585,0x5e3,0x5bf)],_0x1fa3ef[_0x388472(-0x263,-0x254,-0x1da,-0x227)])&&_0x554dd2[_0xf09bae(0x62c,0x5eb,0x614,0x64e)]?.[_0x388472(-0x19f,-0x26c,-0x211,-0x2a4)]){if(_0x1fa3ef[_0x388472(-0x26d,-0x1f4,-0x20a,-0x17a)](_0x1fa3ef['tkKSH'],'RSuYw')){const _0x294f94=_0x42effe?function(){if(_0x4782fc){const _0x231f95=_0x4d7456['apply'](_0xd6028c,arguments);return _0x278525=null,_0x231f95;}}:function(){};return _0x3039da=![],_0x294f94;}else{_0x2c6902=_0x554dd2[_0x388472(-0x164,-0x1ba,-0x164,-0xc2)]['url'];break;}}}else _0xb43cbf[_0xf09bae(0x645,0x6af,0x58c,0x66a)+_0xf09bae(0x5c3,0x536,0x63a,0x677)](_0x2134a0,_0x1527ed);}else{if(typeof _0xdb992b===_0x1fa3ef[_0xf09bae(0x60b,0x6a3,0x63b,0x5a0)]){const _0x5c8682=/!\[.*?\]\((https?:\/\/[^\s\)]+)\)/,_0x47a083=_0xdb992b[_0x388472(-0x1b0,-0x20d,-0x217,-0x1bd)](_0x5c8682);if(_0x47a083&&_0x47a083[-0xe40+-0xcd6+0x1b17]){if(_0x1fa3ef[_0x388472(-0x1ee,-0x1db,-0x226,-0x298)](_0x1fa3ef['nfhey'],_0x1fa3ef[_0x388472(-0x204,-0x1af,-0x243,-0x2eb)])){_0x1fa3ef['kPJPC'](addLog,_0x1fa3ef[_0xf09bae(0x561,0x550,0x5ae,0x5af)]);const _0x5169dd=_0x47a083[-0xc3b*0x2+-0x156b+0x2de2];addLog(_0xf09bae(0x51b,0x491,0x4d1,0x5a0)+_0x388472(-0x261,-0x25f,-0x1c1,-0x1a0)+_0x388472(-0x250,-0x27d,-0x239,-0x241)+_0x5169dd);try{const _0x53f839=await _0x1fa3ef[_0xf09bae(0x5ae,0x5e5,0x565,0x5f5)](fetch,_0x5169dd);if(!_0x53f839['ok']){if(_0x1fa3ef[_0x388472(-0x171,-0x21b,-0x1fb,-0x249)](_0x1fa3ef[_0xf09bae(0x57c,0x5fa,0x579,0x5ce)],_0x1fa3ef[_0xf09bae(0x57c,0x630,0x5a5,0x611)]))throw new Error('Failed\x20to\x20'+_0x388472(-0x223,-0x206,-0x178,-0x1d0)+_0x388472(-0x2f7,-0x232,-0x254,-0x1af)+_0x53f839[_0x388472(-0x12c,-0xc7,-0x17e,-0x18d)]);else{const _0x56abb0=_0xa0324b[_0x388472(-0x298,-0x19a,-0x1df,-0x172)](_0x572147,arguments);return _0x2a6f75=null,_0x56abb0;}}const _0x21602f=await _0x53f839[_0x388472(-0x1df,-0x225,-0x16d,-0x193)](),_0xb6463a=await new Promise((_0x1511da,_0x126e18)=>{const _0x201a91=new FileReader();function _0x2b1eaa(_0x17fb9b,_0x17146c,_0x3dca74,_0x58e4e0){return _0x388472(_0x17fb9b-0x1a1,_0x17146c-0x1ef,_0x17146c-0x412,_0x3dca74);}_0x201a91[_0x1d4062(0x2f3,0x394,0x2f6,0x309)]=()=>_0x1511da(_0x201a91[_0x1d4062(0x1be,0x2d0,0x1e8,0x271)]),_0x201a91['onerror']=_0x126e18;function _0x1d4062(_0x4edf5b,_0x4388f7,_0xac492b,_0x5ca368){return _0x388472(_0x4edf5b-0x17c,_0x4388f7-0x71,_0x5ca368-0x47c,_0x4388f7);}_0x201a91[_0x2b1eaa(0x284,0x276,0x2be,0x288)+_0x2b1eaa(0x229,0x24e,0x243,0x1e6)](_0x21602f);});_0x2c6902=_0xb6463a,addLog(_0x388472(-0x28d,-0x2a5,-0x247,-0x1f0)+_0x388472(-0x150,-0x150,-0x139,-0x175)+'y\x20converte'+_0x388472(-0x19e,-0x21a,-0x253,-0x1b1)+_0x388472(-0x2ee,-0x21b,-0x257,-0x262)+_0xf09bae(0x57e,0x632,0x576,0x4d3));}catch(_0x3788e4){if(_0x1fa3ef[_0x388472(-0x234,-0x239,-0x222,-0x295)]!==_0x1fa3ef[_0xf09bae(0x609,0x55a,0x5ab,0x578)])_0x1fa3ef[_0x388472(-0x301,-0x268,-0x27a,-0x2c4)](addLog,'[Banana]\x20F'+_0xf09bae(0x648,0x590,0x5e9,0x599)+_0xf09bae(0x553,0x4a7,0x4c9,0x4d7)+_0xf09bae(0x52f,0x4dd,0x5d8,0x4bc)+'\x20'+_0x3788e4[_0xf09bae(0x5b4,0x545,0x56d,0x64a)]),_0x2c6902=_0x5169dd,_0x1fa3ef[_0x388472(-0x227,-0x174,-0x17b,-0x1f4)](addLog,_0x1fa3ef[_0x388472(-0x1b3,-0x195,-0x13b,-0x135)]);else{const _0xfa1b62=_0x1fa3ef[_0x388472(-0xcc,-0x1f0,-0x17a,-0x1d0)]['split']('|');let _0xedb8eb=0x31*-0x47+-0x2423+0x9f2*0x5;while(!![]){switch(_0xfa1b62[_0xedb8eb++]){case'0':_0x1fa3ef[_0xf09bae(0x620,0x5ba,0x5d8,0x63f)](_0x4bc2f0,_0xf09bae(0x5d0,0x61a,0x682,0x5fb)+_0xf09bae(0x62a,0x5c1,0x6af,0x5bd)+_0xf09bae(0x658,0x6ba,0x5d8,0x5a1)+_0x1c567c+')');continue;case'1':_0x4c5de2[_0xf09bae(0x673,0x684,0x6cb,0x600)](_0x57f30d[_0x388472(-0x155,-0x186,-0x195,-0x223)+_0xf09bae(0x541,0x5b2,0x528,0x58f)+_0xf09bae(0x587,0x5a4,0x61d,0x610)],{'id':_0x4b8f62,'success':![],'error':_0x1fa3ef[_0x388472(-0xee,-0x144,-0x141,-0xec)],'prompt':_0x1fa3ef[_0xf09bae(0x5d9,0x67e,0x57c,0x60b)](_0x5b6008,'')});continue;case'2':_0x213bdf=null;continue;case'3':_0x29e7f8=null;continue;case'4':_0x3fc758=null;continue;}break;}}}}else{_0x1fa3ef[_0xf09bae(0x53a,0x599,0x58f,0x50f)](_0x2c1f06,'Banana修图模式'+'启动');if(_0x4cc813)_0x1fa3ef[_0xf09bae(0x53e,0x4f4,0x4a2,0x57a)](_0x2a4516,_0xf09bae(0x682,0x6ad,0x666,0x732)+_0x2909dc);if(_0x42ec19)_0x4aba87(_0x388472(-0x1d2,-0x202,-0x193,-0xf7)+']');}}else _0x1fa3ef[_0x388472(-0x2e2,-0x2d1,-0x26f,-0x23a)](addLog,_0x1fa3ef[_0x388472(-0x1ad,-0x274,-0x1ef,-0x277)]);}}}}if(!_0x2c6902)throw new Error(_0x1fa3ef['dzIyF']);return addLog(_0x1fa3ef[_0x388472(-0x2ab,-0x24c,-0x230,-0x1ed)]),taskQueue[_0x388472(-0x124,-0x130,-0x147,-0x1c2)+'sk'](_0x21aec1,!![]),currentTaskId=null,{'image':_0x2c6902,'change':_0x1fa3ef[_0x388472(-0x1a7,-0x183,-0x15c,-0x183)](_0x47f39a,'')};}else _0x21cc12=_0x1fa3ef[_0xf09bae(0x5aa,0x585,0x524,0x54f)](_0x4b8c09,_0x388472(-0x109,-0x14f,-0x1b8,-0x13d));}catch(_0x36c5c3){if(_0xf09bae(0x61f,0x69a,0x5bf,0x68b)===_0x1fa3ef[_0x388472(-0xdc,-0x1b6,-0x167,-0x142)]){_0x1fa3ef[_0xf09bae(0x680,0x65a,0x6d6,0x5f4)](addLog,_0x388472(-0x200,-0x25b,-0x1a7,-0x151)+_0x388472(-0x141,-0x210,-0x16c,-0x1d1)+':\x20'+_0x36c5c3['message']),console[_0xf09bae(0x517,0x467,0x487,0x487)](_0x1fa3ef['QIDCe'],_0x36c5c3);if(_0x1fa3ef[_0xf09bae(0x5f6,0x5c2,0x604,0x54e)](_0x36c5c3[_0x388472(-0x228,-0x273,-0x1dc,-0x295)],_0x1fa3ef[_0xf09bae(0x64f,0x5f6,0x5a8,0x63b)])){}else taskQueue[_0x388472(-0xc2,-0xea,-0x147,-0x8d)+'sk'](_0x21aec1,![]);currentTaskId=null;throw _0x36c5c3;}else{if(_0x59efdd){const _0x1982f6=_0x2b84b7[_0xf09bae(0x5b1,0x657,0x569,0x578)](_0x1c285c,arguments);return _0x2e90b5=null,_0x1982f6;}}}}export async function bananaGenerate(_0x178608){const _0x14f0b4={'wfAvV':function(_0x14f14e,_0x2f5cb8){return _0x14f14e+_0x2f5cb8;},'TquMW':function(_0x5db0b3,_0x1f7d58){return _0x5db0b3+_0x1f7d58;},'xCQdT':function(_0x1557a2,_0x364364){return _0x1557a2(_0x364364);},'USRGC':function(_0x1b8823,_0x344282){return _0x1b8823(_0x344282);},'quyeX':_0x280e7b(0x447,0x4c9,0x4a2,0x4dc)+_0x2768c1(0x27a,0x22c,0x21f,0x2a0)+'t\x20URL\x20as\x20f'+_0x2768c1(0x254,0x1e2,0x22e,0x22d),'Ryiea':function(_0x595453,_0xde507d){return _0x595453(_0xde507d);},'IsYQK':_0x2768c1(0x25b,0x303,0x248,0x315),'BiETs':function(_0x381cf4,_0x10ab02){return _0x381cf4(_0x10ab02);},'dsjHC':function(_0x2fcaf8,_0x576469){return _0x2fcaf8(_0x576469);},'DSsPv':function(_0x2155ef,_0x5a27d8){return _0x2155ef!=_0x5a27d8;},'tYUGW':function(_0x4ee33c,_0x20e1ba){return _0x4ee33c!==_0x20e1ba;},'VDPNI':_0x280e7b(0x5ff,0x5cb,0x4bb,0x55a),'jUQSJ':'RLIML','cDcOB':function(_0x4d07ea,_0x3e9d36){return _0x4d07ea(_0x3e9d36);}};function _0x2768c1(_0x59f243,_0x170b46,_0x86e5de,_0x45b2f4){return _0x444b(_0x59f243-0xa1,_0x86e5de);}clearLog();let {id:_0x5e19e4,prompt:_0x540964,width:_0x5ced26,height:_0x344dc5,change:_0x29996f,retouchPrompt:_0x5b0de0,retouchImage:_0x1de7cb}=_0x178608;function _0x280e7b(_0x2ecdb6,_0x2f285f,_0xd0ac39,_0x1e3c43){return _0x444b(_0x1e3c43-0x38a,_0x2f285f);}currentRequestId=_0x5e19e4,currentPrompt=_0x540964,_0x14f0b4['Ryiea'](addLog,_0x2768c1(0x33b,0x2ad,0x38e,0x3b0)+_0x280e7b(0x569,0x5a9,0x43c,0x4ef)+_0x280e7b(0x525,0x4c2,0x586,0x577)+'tion\x20reque'+_0x2768c1(0x239,0x227,0x221,0x2cb)+_0x5e19e4+')');let _0x458ac1='';_0x29996f?_0x458ac1=_0x29996f['replaceAll'](_0x14f0b4[_0x2768c1(0x28a,0x27a,0x1f1,0x223)],''):_0x458ac1=_0x540964;if(_0x29996f&&_0x29996f[_0x280e7b(0x650,0x6a8,0x67a,0x5ff)](_0x14f0b4[_0x2768c1(0x28a,0x319,0x1f3,0x1fa)])){addLog('Banana修图模式'+'启动');if(_0x5b0de0)_0x14f0b4[_0x2768c1(0x35a,0x2e3,0x2a9,0x369)](addLog,'修图指令:\x20'+_0x5b0de0);if(_0x1de7cb)_0x14f0b4[_0x2768c1(0x2b2,0x2d8,0x23b,0x306)](addLog,_0x2768c1(0x2de,0x363,0x37f,0x31e)+']');}try{const {image:_0x2b94a7,change:_0x115c32}=await _0x14f0b4[_0x2768c1(0x33d,0x309,0x349,0x2e5)](generateBananaImage,{'prompt':_0x540964,'width':_0x5ced26,'height':_0x344dc5,'change':_0x29996f,'retouchPrompt':_0x5b0de0,'retouchImage':_0x1de7cb});if(_0x14f0b4[_0x280e7b(0x6fc,0x60d,0x58f,0x644)](extension_settings[extensionName][_0x2768c1(0x294,0x25d,0x226,0x244)],'0')){const _0x421e1f={};_0x421e1f[_0x2768c1(0x309,0x30a,0x39c,0x39c)]=_0x458ac1,await setItemImg(_0x540964,_0x2b94a7,_0x421e1f),addLog(_0x2768c1(0x298,0x335,0x21b,0x2c3)+_0x280e7b(0x4b4,0x517,0x55b,0x553)+'\x20'+_0x540964),extension_settings[extensionName][_0x2768c1(0x218,0x169,0x205,0x29d)][_0x2768c1(0x22d,0x2d3,0x1ec,0x2a4)]?(extension_settings[extensionName]['banana'][_0x2768c1(0x22d,0x244,0x2e4,0x1ef)]=_0x14f0b4[_0x280e7b(0x68a,0x6e9,0x5d7,0x647)](extension_settings[extensionName][_0x2768c1(0x218,0x2bf,0x26e,0x27e)][_0x2768c1(0x22d,0x2bd,0x1e2,0x235)],-0x313*0x4+0x2*0xc1d+0x2b*-0x47),_0x14f0b4[_0x280e7b(0x6b3,0x65d,0x678,0x643)](addLog,_0x280e7b(0x44a,0x441,0x568,0x4f3)+_0x280e7b(0x56a,0x544,0x5e0,0x59f)+extension_settings[extensionName]['banana'][_0x2768c1(0x22d,0x23c,0x283,0x251)])):_0x14f0b4['tYUGW'](_0x14f0b4['VDPNI'],'uahYl')?_0x260c05[_0x280e7b(0x520,0x49e,0x506,0x535)+_0x3c50d9+_0x280e7b(0x5b9,0x6a9,0x684,0x61a)]&&(_0x214f20=_0x14f0b4['wfAvV'](_0x14f0b4[_0x2768c1(0x35e,0x378,0x35a,0x2e9)](_0x28136e,',\x20'),_0x10edb2['Character\x20'+_0x1fec04+_0x280e7b(0x60f,0x566,0x63e,0x61a)])):(extension_settings[extensionName][_0x280e7b(0x4fa,0x563,0x4af,0x501)][_0x2768c1(0x22d,0x2b7,0x223,0x197)]=-0x2ba+-0x1d2+0x48d,_0x14f0b4['xCQdT'](addLog,_0x280e7b(0x513,0x4be,0x44b,0x4f3)+_0x2768c1(0x2b6,0x2e0,0x2fe,0x267)+extension_settings[extensionName][_0x280e7b(0x4f1,0x4f5,0x5ac,0x501)][_0x280e7b(0x4e9,0x586,0x594,0x516)]));}else _0x14f0b4[_0x2768c1(0x1fa,0x18a,0x223,0x275)](_0x14f0b4[_0x280e7b(0x585,0x642,0x5e9,0x5f7)],_0x280e7b(0x6ac,0x698,0x5a6,0x61d))?(_0x14f0b4[_0x280e7b(0x6d5,0x60e,0x678,0x629)](_0x1a848e,_0x2768c1(0x2ca,0x36b,0x2b4,0x322)+_0x2768c1(0x329,0x35b,0x379,0x2c5)+_0x2768c1(0x234,0x200,0x2ed,0x191)+_0x2768c1(0x210,0x28b,0x2c6,0x21a)+'\x20'+_0x347181[_0x2768c1(0x295,0x2f7,0x315,0x2bd)]),_0x34ae74=_0x1c9a32,_0x14f0b4[_0x280e7b(0x574,0x6ab,0x617,0x626)](_0x1c504a,_0x14f0b4[_0x280e7b(0x5b1,0x568,0x521,0x5aa)])):_0x14f0b4['cDcOB'](addLog,_0x2768c1(0x25c,0x1ef,0x22a,0x284)+'库');const _0x5ee404={};_0x5ee404['id']=_0x5e19e4,_0x5ee404[_0x2768c1(0x343,0x3f0,0x3de,0x293)]=!![],_0x5ee404[_0x280e7b(0x45e,0x53a,0x489,0x4fc)]=_0x2b94a7,_0x5ee404[_0x2768c1(0x2a6,0x247,0x35b,0x33d)]=_0x540964,_0x5ee404[_0x280e7b(0x5d2,0x6a4,0x65b,0x5f2)]=_0x458ac1,eventSource[_0x280e7b(0x5bb,0x632,0x6dc,0x63d)](EventType['GENERATE_I'+'MAGE_RESPO'+_0x280e7b(0x569,0x51c,0x577,0x551)],_0x5ee404),addLog('[Banana]\x20E'+'mitted\x20suc'+_0x2768c1(0x34e,0x2a1,0x2ed,0x341)+'nse\x20for\x20ID'+':\x20'+_0x5e19e4);}catch(_0x3d7524){const _0x5717be=_0x2768c1(0x224,0x2b5,0x1b1,0x266)+'eneration\x20'+_0x2768c1(0x20e,0x295,0x270,0x1f1)+'\x20ID\x20'+_0x5e19e4+':\x20'+_0x3d7524[_0x2768c1(0x295,0x2ba,0x1dd,0x24a)];addLog(_0x5717be),console[_0x280e7b(0x522,0x515,0x462,0x4e1)](_0x5717be);const _0x27b9ac={};_0x27b9ac['id']=_0x5e19e4,_0x27b9ac[_0x280e7b(0x6ca,0x5f3,0x619,0x62c)]=![],_0x27b9ac[_0x2768c1(0x1f8,0x1fd,0x2a5,0x238)]=_0x3d7524[_0x280e7b(0x4e6,0x571,0x54a,0x57e)],_0x27b9ac[_0x2768c1(0x2a6,0x2fc,0x300,0x356)]=_0x540964,eventSource[_0x280e7b(0x5fd,0x632,0x5b7,0x63d)](EventType[_0x2768c1(0x2dc,0x38a,0x241,0x284)+_0x280e7b(0x4c4,0x49d,0x51a,0x50b)+_0x2768c1(0x268,0x1be,0x289,0x314)],_0x27b9ac),_0x14f0b4[_0x2768c1(0x35a,0x335,0x2f2,0x383)](addLog,_0x280e7b(0x4b0,0x460,0x439,0x4db)+'mitted\x20fai'+_0x280e7b(0x507,0x43f,0x529,0x4f0)+_0x2768c1(0x29d,0x26a,0x257,0x34a)+':\x20'+_0x5e19e4);}}function handleCancelBananaTask(_0x17187a){const _0x2e1c45={'JJHOM':function(_0x25fe3a,_0x3a22b9){return _0x25fe3a+_0x3a22b9;},'TBSNj':function(_0x304b42,_0xcaeca4){return _0x304b42(_0xcaeca4);},'unRcH':_0x491b83(0x561,0x591,0x4b2,0x524),'hyIRz':_0x250090(-0x221,-0x245,-0x1c0,-0x1d0)};function _0x250090(_0x5e17d3,_0x15a342,_0x5bd7df,_0x5329ac){return _0x444b(_0x5bd7df- -0x381,_0x15a342);}function _0x491b83(_0x515b3b,_0x2bfd2b,_0x4f56a8,_0x318efe){return _0x444b(_0x515b3b-0x369,_0x2bfd2b);}const {taskId:_0x6e4f57}=_0x17187a;_0x2e1c45[_0x491b83(0x4d9,0x454,0x52c,0x56b)](addLog,'[Banana]\x20收'+'到取消任务事件\x20(T'+_0x491b83(0x5e9,0x63f,0x649,0x671)+_0x6e4f57+')');if(currentTaskId===_0x6e4f57&&currentRequestId){if(_0x2e1c45[_0x491b83(0x4d1,0x417,0x4bf,0x4e6)]===_0x2e1c45[_0x250090(-0x22f,-0x20f,-0x219,-0x286)]){_0x2e1c45[_0x491b83(0x4d9,0x53e,0x552,0x55b)](addLog,_0x491b83(0x579,0x604,0x60c,0x4cd)+_0x491b83(0x5d3,0x65f,0x57d,0x566)+_0x491b83(0x601,0x571,0x5bd,0x573)+currentRequestId+')');const _0x36e21d={};_0x36e21d['id']=currentRequestId,_0x36e21d['success']=![],_0x36e21d['error']=_0x2e1c45['hyIRz'],_0x36e21d[_0x250090(-0x1e6,-0xdd,-0x17c,-0x102)]=currentPrompt||'',eventSource[_0x491b83(0x61c,0x679,0x682,0x599)](EventType[_0x250090(-0xe9,-0xcf,-0x146,-0x1fe)+'MAGE_RESPO'+_0x491b83(0x530,0x587,0x4f8,0x5e1)],_0x36e21d),currentTaskId=null,currentRequestId=null,currentPrompt=null;}else _0xbb8936=_0x2e1c45[_0x491b83(0x4cd,0x444,0x453,0x423)](_0x553327,_0x3dea94);}}function initializeBananaListener(){const _0x5b386d={'KYdAr':_0x395f69(0x33c,0x2d0,0x2f5,0x290)+_0x160a1c(0x2d2,0x284,0x2bc,0x2ad)+_0x395f69(0x34d,0x293,0x339,0x2ee),'aAfmO':function(_0x5dd938,_0x579edd){return _0x5dd938(_0x579edd);},'SeqzC':_0x395f69(0x3e6,0x409,0x386,0x43a)+_0x395f69(0x417,0x437,0x42f,0x472)};eventSource['on'](EventType[_0x395f69(0x40d,0x3d9,0x489,0x378)+_0x395f69(0x39d,0x378,0x396,0x3e3)+'ST'],bananaGenerate);function _0x160a1c(_0x11ce76,_0x458594,_0x295de8,_0x3427ff){return _0x444b(_0x458594- -0x1d,_0x295de8);}eventSource['on'](_0x5b386d['KYdAr'],handleCancelBananaTask);function _0x395f69(_0xdfcf0d,_0x4b45b0,_0x33cf33,_0x2a3a27){return _0x444b(_0xdfcf0d-0x1d2,_0x4b45b0);}_0x5b386d[_0x395f69(0x489,0x4a7,0x4fd,0x4ba)](addLog,_0x5b386d[_0x395f69(0x45f,0x46d,0x47f,0x3e6)]);}export async function replaceWithBanana(){function _0x543adb(_0x3550db,_0x1f3276,_0x1d50ac,_0x3dd361){return _0x444b(_0x3dd361- -0x2b1,_0x3550db);}function _0x4223b3(_0x319f2b,_0x42af74,_0x1ec837,_0x7896d0){return _0x444b(_0x42af74- -0x252,_0x7896d0);}const _0x5e67a8={'thcRK':function(_0x2beb15,_0x146c93){return _0x2beb15(_0x146c93);},'FZyGW':'2|1|3|4|0','gmhLz':_0x543adb(-0x99,-0x172,-0xd3,-0xc5)+_0x4223b3(-0x5b,-0xaa,-0xdc,-0x13),'hxDWq':_0x543adb(-0x1d7,-0x1e0,-0x1bb,-0x147)+_0x4223b3(-0x13,0x4f,0xe3,0x8e)+_0x543adb(-0x128,-0x1cf,-0x1a6,-0x136),'lulUl':'user','lVvGj':function(_0x5a617e,_0x1569d7){return _0x5a617e==_0x1569d7;},'EycQT':'banana','vAULo':function(_0x10800c,_0x51fae2){return _0x10800c!==_0x51fae2;},'rzZVI':_0x543adb(-0x7b,0x6f,-0x1c,-0x40),'crXtw':function(_0x1d45ab,_0x4d26e9){return _0x1d45ab===_0x4d26e9;},'PDYwh':_0x4223b3(-0x13c,-0xff,-0x174,-0x1ab),'YfCFj':function(_0xae2c5b){return _0xae2c5b();},'qlvax':function(_0x5d59fe,_0x8f41b1){return _0x5d59fe===_0x8f41b1;},'vQyqE':_0x543adb(-0x5a,-0x58,-0xd5,-0x7a),'uAGSI':'0|2|1|3|4'};if(_0x5e67a8[_0x4223b3(0xb,-0x49,-0x103,0x45)](extension_settings[extensionName]['mode'],_0x5e67a8[_0x543adb(-0x76,-0x5,-0x97,-0x58)])){if(_0x5e67a8[_0x543adb(-0x88,-0x14d,-0x77,-0xc9)](_0x5e67a8[_0x543adb(-0x19,-0xa3,-0x2,-0xa9)],_0x5e67a8['rzZVI']))_0x5e67a8[_0x4223b3(-0xb1,-0x73,0x29,-0x49)](_0x198b1c,_0x543adb(0x3b,-0xd,-0xcf,-0x17)+_0x543adb(-0x81,-0xc,-0x12d,-0xa7)+_0x4223b3(-0x5e,-0x84,-0xf2,-0x94)+_0x543adb(-0xe9,-0xdf,-0x1ac,-0x116)+_0x4223b3(0x3,-0x4b,-0x28,-0x36));else{if(!window[_0x543adb(-0x14d,-0x70,-0x17b,-0x11f)+'BananaList'+'ener']){if(_0x5e67a8['crXtw'](_0x5e67a8[_0x543adb(-0x169,-0x175,-0x120,-0x13b)],_0x5e67a8[_0x543adb(-0x10e,-0x18d,-0x198,-0x13b)]))window[_0x4223b3(-0xf8,-0xc0,-0xa5,-0x16c)+_0x4223b3(0xf3,0x66,0xe2,0x81)+_0x4223b3(-0xb,-0x4f,0x5c,0x55)]=!![],initializeBananaListener();else{const _0x34827e=_0x5e67a8['FZyGW'][_0x4223b3(0x8,-0x37,-0x2b,-0x66)]('|');let _0x41456a=0x1a85*0x1+-0x1*-0x1c9b+-0x1260*0x3;while(!![]){switch(_0x34827e[_0x41456a++]){case'0':_0x5e67a8['thcRK'](_0x2b9453,_0x5e67a8[_0x4223b3(-0xdd,-0x2a,0x84,-0x2b)]);continue;case'1':_0x4d906c['removeList'+'ener'](_0x5e67a8[_0x4223b3(0x51,-0x44,-0xd5,0x3)],_0x1427ef);continue;case'2':_0x56aa37[_0x543adb(0x82,-0xd1,0x18,-0x2c)+_0x543adb(-0xf4,-0x134,-0x7e,-0xae)](_0x20c6a6['GENERATE_I'+_0x543adb(-0x9f,-0x173,-0x60,-0xe6)+'ST'],_0x44e588);continue;case'3':_0x7d0287[_0x4223b3(0xd,0x6f,0xfc,-0x35)](_0x12df24=>{function _0x2b5a06(_0x1c975a,_0x1e04da,_0x468b64,_0x200edf){return _0x4223b3(_0x1c975a-0x2f,_0x1c975a- -0xbb,_0x468b64-0x2c,_0x200edf);}function _0x2efa93(_0x2396cb,_0x134c5a,_0x41c3e5,_0x5cf0c9){return _0x543adb(_0x41c3e5,_0x134c5a-0x69,_0x41c3e5-0x88,_0x5cf0c9-0x55b);}_0x134a96[_0x2b5a06(-0x88,-0x74,-0xc8,-0x3b)+_0x2b5a06(-0x10a,-0x193,-0x73,-0x60)](_0x12df24,_0x46c586);});continue;case'4':_0x358fa8[_0x543adb(-0x177,-0x133,-0xd4,-0x11f)+_0x543adb(0x74,-0x87,0x67,0x7)+_0x4223b3(0x4a,-0x4f,-0x3c,0x6b)]=![];continue;}break;}}}_0x5e67a8['YfCFj'](initializeImageProcessing);}}else{if(_0x5e67a8[_0x543adb(-0x92,-0x123,-0x44,-0x72)](_0x543adb(-0x9,-0x73,-0x12c,-0x73),_0x5e67a8['vQyqE'])){const _0x40f352={};_0x40f352['role']=_0x5e67a8[_0x4223b3(-0xaf,-0xb5,-0x98,-0x15f)],_0x40f352[_0x4223b3(-0x59,0x44,-0x2d,0x58)]=_0x4f9b6c,_0x19cda7['push'](_0x40f352);}else{if(window[_0x4223b3(-0x13d,-0xc0,-0x15f,-0xb4)+_0x4223b3(0x86,0x66,0x9e,0x2b)+_0x543adb(-0x31,-0x115,-0x11b,-0xae)]){const _0x3694cc=_0x5e67a8[_0x4223b3(0x8e,0x8,0xba,-0x4b)][_0x543adb(-0xd4,0x15,-0xb1,-0x96)]('|');let _0x2e9b1e=0xc2*-0x1+0x8c*-0x8+0x522;while(!![]){switch(_0x3694cc[_0x2e9b1e++]){case'0':eventSource[_0x4223b3(-0x69,0x33,-0x11,0x39)+_0x543adb(-0xd2,-0x47,-0xdd,-0xae)](EventType['GENERATE_I'+'MAGE_REQUE'+'ST'],bananaGenerate);continue;case'1':LEGACY_EVENT_NAMES[_0x543adb(-0x98,0x71,0x47,0x10)](_0x3cf503=>{function _0x298415(_0xfcae96,_0x369e99,_0x12396b,_0xbf4ad3){return _0x543adb(_0xbf4ad3,_0x369e99-0x86,_0x12396b-0x1c9,_0x369e99-0x133);}function _0x58b041(_0x4d79d4,_0x1d1139,_0x3ff0cd,_0x4431d0){return _0x4223b3(_0x4d79d4-0x149,_0x1d1139- -0x1d,_0x3ff0cd-0x24,_0x3ff0cd);}eventSource[_0x58b041(-0x9b,0x16,0x7f,0x66)+_0x298415(0xaf,0x85,0x81,0x113)](_0x3cf503,bananaGenerate);});continue;case'2':eventSource[_0x543adb(0x11,-0xb2,-0x38,-0x2c)+_0x4223b3(-0xb3,-0x4f,-0xc,-0x66)](_0x5e67a8[_0x543adb(-0x6a,-0x57,-0xfe,-0xa3)],handleCancelBananaTask);continue;case'3':window[_0x543adb(-0x150,-0x65,-0x10f,-0x11f)+'BananaList'+_0x543adb(0xa,-0x55,-0x6,-0xae)]=![];continue;case'4':_0x5e67a8[_0x4223b3(-0xb,-0x73,0x26,0x1e)](addLog,_0x5e67a8['gmhLz']);continue;}break;}}}}}