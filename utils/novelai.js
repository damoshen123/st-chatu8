(function(_0x10c448,_0x10e40c){function _0x50f85d(_0x113518,_0x34658a,_0x7fdddd,_0xbab2d0){return _0x49df(_0x113518- -0xab,_0x34658a);}const _0x58742b=_0x10c448();function _0x270991(_0x3504bf,_0x95141b,_0x4dbd54,_0x100a3e){return _0x49df(_0x100a3e- -0x7d,_0x3504bf);}while(!![]){try{const _0x217179=parseInt(_0x270991(0x9c,0x282,0x21d,0x185))/(0x26b3*0x1+-0xc66+-0x1a4c)+parseInt(_0x50f85d(0xa0,-0x7d,0x1eb,0x57))/(0x73e+-0xd9e+0x662)*(parseInt(_0x50f85d(0x14f,0x2b2,0x17b,0x1db))/(0x905*-0x3+0x1f0b+-0x153*0x3))+parseInt(_0x270991(0x22d,0x2e8,0x3be,0x2c8))/(-0xdb*-0x4+0xac2+-0x715*0x2)+-parseInt(_0x270991(0x38f,0x30f,0x242,0x305))/(-0x66d+0x47b+0x1*0x1f7)*(-parseInt(_0x270991(0x246,0x44b,0x240,0x311))/(-0x4cd*-0x5+0x632*-0x1+-0x11c9*0x1))+parseInt(_0x50f85d(0x173,0x2c,0xe,0x13e))/(0xc4*0x12+-0x1524+0x763)*(parseInt(_0x50f85d(0xbc,0xaf,0x10,-0x5f))/(0x53*0x4f+-0x18ee+-0x1*0xa7))+parseInt(_0x270991(0x1b8,0xb5,0xdb,0x112))/(0x24f9+-0x1243+-0x7*0x2ab)+-parseInt(_0x270991(0x2c0,0xd7,0x7f,0x1cb))/(0x26d7+0x8b*-0x6+-0x238b);if(_0x217179===_0x10e40c)break;else _0x58742b['push'](_0x58742b['shift']());}catch(_0x5d4a9c){_0x58742b['push'](_0x58742b['shift']());}}}(_0x2ce8,0xa70f*-0x7+-0x504e1+0xdd082));const _0x247e70=(function(){let _0x22e38c=!![];return function(_0xb0964,_0x44fd85){const _0x552359=_0x22e38c?function(){function _0x835b00(_0x48e03f,_0x49233d,_0x2f3daa,_0x5cee89){return _0x49df(_0x2f3daa- -0x3c5,_0x49233d);}if(_0x44fd85){const _0x3b905c=_0x44fd85[_0x835b00(-0xbd,-0x145,-0xff,-0xc2)](_0xb0964,arguments);return _0x44fd85=null,_0x3b905c;}}:function(){};return _0x22e38c=![],_0x552359;};}()),_0x16c7be=_0x247e70(this,function(){const _0x10a73e={};function _0x5bccca(_0x58650c,_0xe43fbc,_0xd8c68d,_0x28d441){return _0x49df(_0xe43fbc-0x2e3,_0x28d441);}_0x10a73e['ufuej']=_0x5bccca(0x465,0x4da,0x514,0x538)+'+$';const _0x5e0ce1=_0x10a73e;function _0x45d72f(_0x2d024b,_0x39b101,_0x36e829,_0x4bbfe0){return _0x49df(_0x4bbfe0-0x55,_0x36e829);}return _0x16c7be[_0x45d72f(0x3a6,0x35d,0x2db,0x324)]()[_0x5bccca(0x3d5,0x408,0x2ef,0x33a)](_0x5e0ce1[_0x5bccca(0x539,0x57f,0x520,0x41e)])['toString']()[_0x5bccca(0x762,0x6cd,0x55a,0x60d)+'r'](_0x16c7be)[_0x5bccca(0x4d5,0x408,0x43f,0x4d2)](_0x45d72f(0x2c9,0x268,0x13f,0x24c)+'+$');});_0x16c7be();import{sleep,generateRandomSeed,zhengmian,fumian,prompt_replace,prompt_replace_for_character,parsePromptStringWithCoordinates,getRequestHeaders,calculateSkipCfgAboveSigma,processReferenceImage,addLog,clearLog,stripChineseAnnotations}from'./utils.js';import{extension_settings}from'../../../../extensions.js';function _0x2ce8(){const _0x132ccd=['zNrVBMuSihnJCG','5lQl5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','CgfK','yxrLCM1HCMTZla','zNjVBunOyxjdBW','lI4U','DgXPBMuSig11Ba','ywDLlM5VDMvSyq','BMfTzq','sw5MB3jTyxrPBW','yxbWBhK','C1jJs3a','AgvPz2H0','q2LWAgvYugfYyq','thPiyvu','DLzIzxi','rNzXs24','zwqUifvZAw5Nia','5RE75yQG5lQgicDMDxiGza','Dg9tDhjPBMC','yNL0zuXLBMD0Aa','ywLUlcbZy2fUia','u25PB2W','BgXeEhe','ywKVz2vUzxjHDa','C3rYAw5N','CMf0zwq','wg54wgy','EsbKAxnWBgvHCW','wfbYrw8','BwfUEsb3yxrLCG','AgL0zsbIBgfUAW','iebFqcWGBwLZBq','u2PYt00','xv0SignVBwLJ','BYb0zxH0','yMfKigfUyxrVBq','5lU2oIa','y1n2AwC','CMf3ihzHBhvLlG','B25Z','BhztAwK','wuzMz1q','Aw5Nlcb3B3jZDa','zsbRzxKGBwLNAa','lcdPLjNOR6/KV6hMGA86ia','y2fJAgu','DgeGy29YCNvWDa','BwfNzq','zunIEM0','zgvJB2rL','rKLPEgK','y0HfA1G','DLDNu3K','rfzkAee','CIWGzMLSBsbNCG','EwrYsNe','zYbLEwvZlcbIyq','wuTksNG','BgvUz3rO','BM92zwXHAxnPDa','DhmSihDVCNn0ia','tgXXA3G','yKTkr3e','CMfPBIWGC2nHBG','yM92zv9ZAwDTyq','B2jqq0y','5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','Aw9UltqTns1MDq','5BcD6k+v5l2C5lI65y6F5AEliejHCW','Bg9HzefZEw5J','DhKSigfTyxPPBG','C3rLChm','igPWzwCGyxj0Aq','As5UzxqVywKVzW','ios6I+s7TUwKSEI0PtOG','Aw9syxy','CNbpDgy','DcbIzsb3CM9UzW','AxDKv2C','5zYOifPjucdKUk3MIB7LIldMLOC','6kEJ5y6l5PAh5lU2ia','ufDou1O','ChvZAa','zKHPAfi','5lIT55QeihbYB21WDooaGG','Aw9UltqTnq','ywn0xq','Aw5JBhvKzxm','C1PjvKe','BeLitK4','BMfPm1zPyMvuCG','svf3veK','keLeoIa','DcbJB2XVCNnDla','ExvZAgvPzf9UBW','55sO5lQo55sF5OIq55QevgfNoIa','yxbPx2TLEv9UBW','C2XPy2u','y2zNx3jLC2nHBa','zcbHBMf0B215','z25HDhvYzsWGBq','ywXPDhKSigjHza','zhvSzq','Aw1Hz2u','ioA2IoAbR+wKSEI0PtOG','DKX2Ee4','DhjPBq','yM9gtuq','zNvYigrHDgfZzq','zLnWC2W','lcbMAwXTigDYyq','wMvutwi','wMrpEfa','Aw9UlcbSB2DVla','Bg93CMvZlcbQCa','thr4qM4','Bw9KzwW','ihrVBYbTyw55ia','DgfZzxq','uhPICuG','zxr2qNO','zhmSihDVCNn0ia','yMvZDcbXDwfSAq','zMfJDhmSihzLCG','sLnptIdOP6pMNPdLPlhOTkxVViW','zJzHmwiYyZnKna','ihWG','zw1PDa','CMLUzYbKzwnYEq','EfzUqvy','BM9PC2vFC2nOzq','5y+r6ycb55sF5zU+5OIq5yQF5zon5BQuicG','zwzLCMvUy2vFza','qLDkugO','tK5MquO','CeXsELu','mtGXmtGZnNbyAe1Vva','tufhrv9srvnqtW','ywn0CYWGyMfKia','EhrYysWGBwLZCW','zxjTyxjRCYWGBG','AwDODa','lcbUzwDHDgL2zq','Denss3a','t0jqwKi','5PYa57Ui55sF5zU+5y+c5PwWicHWyq','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','5BYa5AEl6kEJ5y6lifPjucdMLOC','yM1KC3m','zwnYExb0Aw9Uia','BM92zwXHAv9Ozq','AYbWywDL','CgvNigfYDgLMyq','DhjHy3rPBMCGDW','BMuSig11BhrPCa','txnNCgfJAYdKUOVKU7y','zxjJzxb0Aw9U','qLjpEhu','ioIUVUE9RJOG','D3mSigXVz28Sia','tgLNAhq','yxj0AwzHy3rZla','EuXvrgW','CevTA3i','DhmVCMvHza','yYbHyMvYCMf0Aq','Aw5NlcbJAhjVBq','igXVz28SihrVBW','CgfYyw1LDgvYCW','AxnWBgvHC2LUzW','DeX0Dva','rLjqvNu','ihbHz2uSigjSyq','z3Pgt2y','EgLHBMnOzw5N','C2nYzwvUFsWGDq','y2HHCL9Jyxb0Aq','DeTMr0C','uMvMzxjLBMnLuW','r2LcrvK','6kEJ5P6qie1Zz3bHy2S','zxzLBNrFDhLWzq','DgLJigfIzxjYyq','AvjlEvC','sffhvhq','CK93zKK','B21HDgLJigfIzq','shvxAhq','t3PrqLC','A3nzELq','tMjkAhG','ywfPEw0','BwvZC2fNzq','6zsz6k+VoIa','qu1msLu','ios4QUs6I+s7TUoaGG','6lsLoIa','mtG1BgngDLfm','zuD3svK','BgLI','A2v0y2GSigv2zq','suXMEfG','Df9LBMq','q0PZqKi','Aw5PDgLHBgL6zq','zwjlv0S','z3nPBum','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','zs1PBwfNzq','nJyWotbzuwvwBMq','yxrPDMuGC3bHyW','B1DpsKW','ssbbueKGs2v5','Aw5Nlcb3AgL0zq','ywPWvhC','q0jd','DgnOzwqGChvWAq','z2u6','Dgv4Da','zty0ioAvSoAnRUwKHoEqHUoaGG','5y+r6ycb55sF5zU+5AsX6lsL5zon5BQuicG','yZnKngu1zJzHmq','yK54BxG','vhf2wLm','ywn0Aw9U','ue9zuue','zxn0CMfSx2j1zW','y2HHCMfJDgvY','yMfZzty0','ksdPGiNMI6NOTj/PNAlMJ5dNPlROR40U','56s66k+n44cc','55Yl6yws6AAg5O6N5yI25y+WoIa','uMzXugC','t0j4veW','yxrHC2v0jYdLIldMJ5a','x2LK','zxjtAxrL','sufqCLq','5Q2J5zYO5Qc55O2U5QIH5z6licG','B24SigHHBgz0BW','suq6ia','zxrPyYWGBwfZDa','vvH1uMu','AML1z3vHBG','DhmSihzLCNKGza','vhzuEgW','r1jWz3u','yxnPBMCSigPHzW','zxjUyw1LlcbZyW','EhnlANO','ue9tva','ExvZAgu','lcbJAhjVBwf0Aq','twfnDM8','vwPzsNq','CYWGD2HPDguGyG','y2fWDgLVBG','ssblzxNJGii','vezjrxm','sgv4','Bg93CMvZlcbHCG','DxnLx25LD19ZAa','BfbvzgW','DxjKCMvZ','z2vUzxjHDguTAq','rKzesKy','Bgz0B25LlcbTDq','zw5LCG','z3KGBgLUzxmSyG','qKjAAM0','B2PMteu','5O+s5lU26k6+572U55QeyxbPx2S','CM91BMqSignOCG','BMvNyxrPDMvFCa','6k+35AgR5yAzie5VDMvSqq','rxLtt2m','ioA2IoAbRZOG6zw/5BQMia','ihbHz2u','BfD5Chq','DhmVD3jPDgu','tM92zwXbsuXPCW','ywnLlcbIBgfUAW','vKjSsMS','t2XVCg8','ifbYB21WDa','wwzLsgS','Aw1Hz2vFBxvSDa','zsWGyMXHBMSGCa','5OgV5AsX6lsLoG','zgLYzwn0B3jFCG','5z6lic0G','tK9qC2G','ytfImMmZzdrLnq','zxDZlcbNAwDHBG','zhrO','wNz0rxq','CMf0Aw5NigLTyq','BM92zwXHAu90Aa','BhvLCW','yxn5BMm','AxbSzq','y29UC3rYDwn0BW','BM92zwXHAv9Zyq','Aw9UltqTns1JDq','zNPZCNu','6kEJ5P6qtxnNCgfJA+A2Ia','C2vLza','zxjYB3i','tM92zwXbssbJCG','5Q2J5zYO5Ase55cg5lIT5PAh5RoO6yEk5A6m5OIq','6kEJ5P6qtxnNCgfJA+s6IW','yw4SifTHyNn0CG','igvYCM9Ylcb1CW','CgfNzsWGyMXHBG','qMvHCMvYia','5OIw5PEG5Pwi77Ym6k+35Qoa5P+Liefq','CNrPzMfJDhmSia','uvb3v1q','BxbSzsWGw2zSyq','Du9AqKO','DwnpChO','DgLWBguGC2nLBG','6zYa6kAb5PYj5Pwi6k6I6zIf5OMn6io96k6/6zEU','AwXZlcbNBg93Aq','ChjVBxb0','E3DVCNn0ihf1yq','yMX1CNj5lcbSBW','zwXPuxC','zxn0ihf1ywXPDa','zxDZlcbSB2DVla','C3rPyYbLCNjVCG','vhHpEvG','tuvtDNC','yNPJu1G','wMH1Bei','txnJAKC','zdrLnwy2ytfImG','ELHvs0C','y2XPzw50','DgLZDgLJigvYCG','Aw9UltqTzNvSBa','EgzxBhm','44cc5Bcg5zYOmEENKUwqJUMhJEIVLs4U','zerWwe8','5y+r546Wie1Zz3bHy2S','ig9YihrOzsbKyq','y3jLyxrL','zxLFBM92zwW','z2vUzxjHDgu','DMD6BeS','BxDdzM8','sgvHDNK','zwCGyxj0AwzHyW','B21WDa','zKLTywDL','ALjNrxu','EMDNyw4','yxjLzf90CMLHBa','y21TBfG','zLjKv1O','ru52yMy','CMvMzxjLBMnLxW','C2vHCMnO','quvt','5y+w5zU+5yop5PwW5O2U44cc','vhDmtxa','Aw1Hz2vZ','BgL0EsWGyMfKia','l2fPl2DLBMvYyq','zw1mq1O','Aw5NlcbSB2DVla','DhjHigrPz2L0CW','t3rNquy','l2fWAs9ZzwnYzq','yMfZzv9Jyxb0Aq','BMfPm0nOyxjszq','zw5LCMfS','veDnsgS','Bg9NBYWGDg9Via','lcbMzxDLCIWGzq','EuPSquS','DgvKlxbYzxzPzq','vuDtuwO','t1LJAuK','5lU25AsX6lsLoG','Dw5MAw5PC2HLza','DxnLx2nVB3jKCW','zfnPz2q','55sF5zU+5Rwb56Il5O2v6i635yIW5BYc5BI4ia','ioEuN+wBVUA1GEEOIY4UlUwUOUAiTW','wxf0q3u','DwX0AxbSzsb2Aq','BM8GDgv4DcWGyG','DNvOAha','whjTwMy','DwfSAxr5lcbQCa','s0Lut0O','zxf1zw5Jzx0Sia','uKXyrg4','C3rOzxrPyYWGyq','otu1odjcz1LovuK','CgfYC2u','zxzLBNruExbL','6yws6AAg56UV5lIn5PsV5OYb6iEQ5A6A5lMj56Uz','C2nHBgu','yvzAyKy','yxjYyxLcDwzMzq','C3r5Bgu','yxrPB24SihnPzW','BMHRENO','wNP5C0u','zwfZAw5Nlcb0BW','ihLJAcaOy2HHCG','zwrLBNrPywWGza','CMjlu3K','BYbTyw55ihDHDa','zhLUyw1Py190Aa','Ahr0Chm6lY9PBq','ChnJywXLlcb7CW','seLUzKW','rg5Zr0i','D3jLCYWGDxbZyW','rNvYCNKGrM9JDq','yK1Qq3m','igrPC3bSzwfZAq','Aw4SihnJyw4Gyq','zLvXzMW','BLjJtMG','mJq5mdmYtLveyvHH','zxbZ','yNvMzMvY','Dg9Rzw4','EsWGDMvYEsbHzq','D1H0ELe','A1j4uwy','rwDcquu','ioINO+woI+s4UIbcyxnLnG','AxDMCe8','ywXLzcWGyxj0Aq','Be1nvvu','rM1gD3i','uuTIAM0','BgfUAYbWywDLla','ChLLDKm','BM92zwXHAv93Aq','lcb3B3jZDcbXDq','u2fPshq','ywDL','ksdLKOWGvunqioMIHoIUVG','u2nLBMuGq29TCa','BMfPm1nJywXL','iowKSEI0PtOG','D1fQAgW','EwfYuwK','5lU2lI4U','zwzLCMvUy2vFAq','s2fov0K','swnPu0C','sfLnAwC','q0rZzvq','x2v1BgvYx2fUyW','y2n1CNjLzcbKDq','CxvHBgL0EsWGAG','uhjnEvO','DgvUzxi','ywn0CYWGDMvYEq','yMzSwei','yw5ZzMvY','mJK0nJq4m3LjA0rHra','DcWG','D29YC3qGCxvHBa','A05xBKS','sNn5ueu','zxntrhi','y3rZlcb2zxj5ia','DMvS','B3iSigzPBg0GzW','ztvMnMeXyJjJmW','ywqGAgfUzhmSia','no+8JowKP+wWJZOG','DwfSAxr5lcbIyq','yM9PAfq','yxrLCM1HCMSSia','igrHDgvKlcbZAq','5Ps25yIW55sF5zU+6k+35RgcicHjra','EwXVywqPoIa','y2f0y2G','turVtfG','rgzvB08','z25HDhvYzsWGDW','zhLU','zYWGy2HYB21HDa','BMzVCM1HDgLVBG','C21uv2C','yuvrwK4','D2ntAgq','zf9TDwX0AxbSzq','tKvqufa','A19LDwXLCL9HBG','D3jLCYWGzxjYBW','tKvNtMK','BNHAvu4','CMvTB3zLtgLZDa','igfYDgLMywn0CW','y2HHBMDL','r0vorvjbvevFsq','CNLVBMuSifTZAW','zxjPBMCSigHHBa','yxrJAgvKihb1Ca','ww9qv3G','qvfux25VDMvSyq','u05RB2y','zw1fDem','wfn4see','igjSyw5RihbHzW','x2v4DhjHy3rLza','ywr9lcbLCNjVCG','rvLLCNm','ihDVCNn0ihf1yq','DMvYEsbHzxn0Aa','rxHwwuO','yxrHihrYDw5Jyq','ywn0zxiPlcbVDq','DhmSig11BhrPCa','yxLAC3a','C2LUzW','BKrpBfO','zML4zwrqCM9TCa','wuvdt24','CxvHBgL0EsWGDW','lcdOJipLM7qG','zcbXDwfSAxr5la','BMSGCgfNzq','qvfuicJOTkJPH4/MOiFNRB4P','tufhrv9srvfvrq','renytuS','q2j0qvK','DgHLBG','Dhj1zq','BxbSzxi','Aw9UlcbTDwX0Aq','swzLu28','wuLbANi','Bfzfq0C','DgLVBIWGzgL0Aa','sgDcuve','AgvYzwqGy29UDa','yLjguwG','vunqx25VDMvSyq','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','CvHhtMm','AwTuqvK','BM92zwXHAw1Vza','quLFDxnLx2nVBW','BxnNCgfJAW','quL6wfu','C0zzqw4','vw55Ahe','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','Awn2A0C','lJG6oMzLzxq6oG','rvvmrfK','ihf1ywXPDhKSia','5Rwb6kEJ5P6q5A6m5OIq77Ym5ywX5OM+5yIWia','BguGDMLLD3mSia','tvH3wve','zw5LCMf0zs1PBq','CNvyr2e','zwzLCMvUy2vFCW','r1nRBhC','weTdBMG','zxnJCMLWDgLVBG','kcGOlISPkYKRkq','AwzHy3rZlcb2zq','B0vlDLO','owXLBvjPvW','zgLZCgXLyxnPBG','BNnMDW','yNn1CMrYzxm','BMfPm0rLy2vPCW','lcbHCNrPC3rPyW','ANnVBG','BM92zwXHAufWAq','mZyWodu1y0DKC3nO','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','veTzEwu','rK56Eui','ywn0xsWGyMfKia','Cu1mqwi','ig1HBNKGD2f0zq','CKXZu1a','z2HUveG','CIWGD29YC3qGCq','5PYQ6io95lUoqvbj5zon5BQu5lIT5O+q','CM1HCMTZlcb3Aa','ywqGCxvHBgL0Eq','5Q2J5zYO5Ase55cg5lIT5PAh5RoO6yEklI4','BwfYA3mSig5LzW','y2vUDgvYCW','s0jnzhi','zMHcrfu','vMr6A3a','Aw9Ultm','tM1kEwO','ignVB3jKAw5HDa','DgLJigjYzwfZDa','D090Dw0','BMf0DxjLlcbLEa','DhmVzgvSzxrL','BfLQCMi','sxDIBgS','n3PlwLrvwq','seDWuvC','y2HHCMfJDgvYjG','AhrvD3i','CM9TChq','t0D2vw0','lcbKAxnWBgvHCW','sxzcsMq','tM92zwXbssdNLj/LM74','tLnf','CM91BMrDlcbZAq','ihzLCNKGywvZDa','Ce1AwMi','t1HZqLi','C3vJy2vZCW','svb2Awm','Dg9Vig1HBNKGDW','vMv4svi','zgf0yteXoG','uhLpyLq','CNKGzgLZCgXLyq','yxvOAKK','qvbjieTLEsdPLjNOR68','BLPzzwe','D2LKDgG','vxrMoa','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','yurIB00','zxrPyYWGywjZDq','CNjSwLG','yvLYtK0','AejUALu','y2SG5lQl5lU25RwblI4U','DMXzuK8','ioA2IoAbR+AiKowkNZOG5lQl5lU257g7','CMf0Aw5NoMDLBG','B3iGChjVBxb0oG','DMvYEsbKAxnWBa','Aw9UltqTy3vYyq','zgvSAwjLCMf0zq','zwDHDgL2zsbZCa','rhPUExK','mtq0nJiXmdbwBMv5s1a','sfPwB1q','EhHjEfi','BM92zwXHAv9ZDa','qf9alcbTAxnTyq','BgvZktOG','s29bBge','DKTOtKu','y096Aw4','DeLdANa','CNjHDgLVBIWGCW','AwmGywjLCNjHDa','u1fJrge','B25LigfYBxmSBa','CgXLihzPzxDZla','E3TNCMfUzgzHDa','ANbLzYbHCNrPzG','v21xrgi','A0PHAhG','zMfPBgvKlIbuAa','lcbIywqGCxvHBa','Bwf0AwmGywjLCG','ywDuvuO','Bg9N','DwX0AxbSzq','Devjuva','Axr5lcbIywqGCq','ifvd','zw5J','s3vpvxG','EvzzqMW','BKX1wMS','q2HHCMfJDgvYia','DMvSywK','vvDqr2m','q0HTBeO','zgf0ytPPBwfNzq','Aw1Hz2veyxrH','BLbLtKi','txHTAhG','BYb0zxH0lcaTma','C2fTCgXLCG','C2TPCf9JzMDFyq','BNnMDYWG','yJjJm2q0ztvMnG','vMf2ywy','DMfYAwv0Ev9IBW','C3rYAw5NAwz5','reLlque','zw50Fx0SigjSDq','Eu5jt2q','BM92zwXHAv9Zzq','zMfSC2u','u2nxtMG','DhmVCM90yxrL','uxjXDuu','lcbQCgvNigfYDa','5PAh5lU2ia','zgvJCNLWDa','BgvNywn5x3vJ','DgrRzfO','ktOG','ALbbwxm','55sF5OIq5zU+54Mh5AsX6lsL77Ym6k+M5Oof5P+L','r1j5z00','zxmSifTBAg9YCG','ugTJCZC','vMnIqvy','EsWGyMfKigHHBG','yw5ZzMvYsw1HzW','ChrPB246','q1rWDei','Axr5lcb7D2LKzq','we9Uzxu','CKDdCvK','u2nOzwr1Bgu','q1vLExy','EKj6wKi','A2jgywK','y1rSte8','DNf1zwe','zYbXDwfSAxr5la','qxDOr0G','ihnWywnLlcbIBa','Dwz1zwO','BhmSigHLyxj0lq','zxjWAwvJzsWGBG','zgvJCMLZCgvY','BMfPm1zHCMLLDa','ChDxtuC','CMrYzxm','zwvUDg9UzsWGBq','DguTAw1Hz2u','y1DKDNG','Agv0AwmSigfICW','yw5HDg9TEsWGyG','zK5nrwm','y3zRBKu','BwfNzxm','zNjOyLm','yMPcy1a','C21FzhLU','vK9ptgK','CfjxENK','shvTyw4GrM9JDq','z0XlzwW','BMfPlwrPzMz1CW','D3foyxm','CwTOz0q','DvbtC3a','t1Dzywe','CKnHyuq','z2v0vwLUDdmY','vhDps00','z2zxtNG','BL9LEhrYywn0zq'];_0x2ce8=function(){return _0x132ccd;};return _0x2ce8();}import{extensionName,EventType}from'./config.js';import{setItemImg}from'./database.js';import{saveChatDebounced,saveSettingsDebounced,eventSource}from'../../../../../script.js';function _0x49df(_0x10003f,_0x1439bc){const _0x2f6ff1=_0x2ce8();return _0x49df=function(_0x323662,_0x73ab7b){_0x323662=_0x323662-(-0x26*-0x23+-0x17e0+0x1399);let _0xd33cb2=_0x2f6ff1[_0x323662];if(_0x49df['NsmejA']===undefined){var _0x5f14d5=function(_0x16da22){const _0x14f372='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x12cedc='',_0x421449='',_0x47b580=_0x12cedc+_0x5f14d5;for(let _0x490247=0xaba*0x2+-0x1*-0x1ba1+0x5*-0x9d1,_0x491f6f,_0x128198,_0x375bbc=-0x25d8+-0xe51*0x1+0x3429;_0x128198=_0x16da22['charAt'](_0x375bbc++);~_0x128198&&(_0x491f6f=_0x490247%(0xcaf+-0x3*-0x1ff+0xc7*-0x18)?_0x491f6f*(0x9f5+0x1f*-0x117+0x1814)+_0x128198:_0x128198,_0x490247++%(-0x149a+0x47*0x1d+0x1d*0x6f))?_0x12cedc+=_0x47b580['charCodeAt'](_0x375bbc+(0x14a2+0x3cb*-0x7+0x3d*0x19))-(-0x15e9*-0x1+-0x4f*-0x67+-0x35a8)!==-0x178a+0x2318+-0xb8e?String['fromCharCode'](-0x14d3+0x1*-0x14e6+0x2ab8&_0x491f6f>>(-(0x256a+0xf51+-0x34b9)*_0x490247&-0x2f*0x12+-0x1f20+-0x1*-0x2274)):_0x490247:0x8ad*-0x2+0x2021+-0x1*0xec7){_0x128198=_0x14f372['indexOf'](_0x128198);}for(let _0x176023=-0x20dc+-0x241*-0x8+0x1*0xed4,_0x17e156=_0x12cedc['length'];_0x176023<_0x17e156;_0x176023++){_0x421449+='%'+('00'+_0x12cedc['charCodeAt'](_0x176023)['toString'](0x11b1*-0x2+-0x6c9+-0x2a3b*-0x1))['slice'](-(-0x26f9+-0x1696+-0x1*-0x3d91));}return decodeURIComponent(_0x421449);};_0x49df['zcuZpa']=_0x5f14d5,_0x10003f=arguments,_0x49df['NsmejA']=!![];}const _0x38c0ef=_0x2f6ff1[-0x6d1+0x6a4+0x2d],_0xf507eb=_0x323662+_0x38c0ef,_0x3416c6=_0x10003f[_0xf507eb];if(!_0x3416c6){const _0x3e874e=function(_0x5ed950){this['ZyLhmE']=_0x5ed950,this['QKvllA']=[0x176d+0x110c+-0x2878,0x21be+-0x91*0x44+0x4c6,-0x5*0x4b+0x1684+-0x11*0x13d],this['CIqWTF']=function(){return'newState';},this['VbpAho']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['fbSjAC']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3e874e['prototype']['UgUpiG']=function(){const _0x5e7629=new RegExp(this['VbpAho']+this['fbSjAC']),_0x59972e=_0x5e7629['test'](this['CIqWTF']['toString']())?--this['QKvllA'][-0x6*0x1b1+0x2342+-0x191b]:--this['QKvllA'][-0x1fb9+-0x2130+-0x3*-0x15a3];return this['aRaFGx'](_0x59972e);},_0x3e874e['prototype']['aRaFGx']=function(_0x1a0d56){if(!Boolean(~_0x1a0d56))return _0x1a0d56;return this['ZWvHGi'](this['ZyLhmE']);},_0x3e874e['prototype']['ZWvHGi']=function(_0x5b3368){for(let _0x2bcf3f=-0x2e*-0x2e+0x8*-0x31d+0x10a4,_0x230799=this['QKvllA']['length'];_0x2bcf3f<_0x230799;_0x2bcf3f++){this['QKvllA']['push'](Math['round'](Math['random']())),_0x230799=this['QKvllA']['length'];}return _0x5b3368(this['QKvllA'][-0x1*-0x1b82+-0x1291+-0x8f1]);},new _0x3e874e(_0x49df)['UgUpiG'](),_0xd33cb2=_0x49df['zcuZpa'](_0xd33cb2),_0x10003f[_0xf507eb]=_0xd33cb2;}else _0xd33cb2=_0x3416c6;return _0xd33cb2;},_0x49df(_0x10003f,_0x1439bc);}import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';function decryptNovelAI(_0x5adad6){const _0x2eceaa={};_0x2eceaa['sRcKp']=_0x1b7bf4(0x317,0x42b,0x302,0x410)+'eral,\x20best'+_0x1b7bf4(0x425,0x3fc,0x2ae,0x3bb)+'very\x20aesth'+'etic,\x20absu'+'rdres',_0x2eceaa[_0x1b7bf4(0x26d,0x135,0x2ab,0x2ff)]=function(_0x50f696,_0xcf6f03){return _0x50f696!==_0xcf6f03;};function _0x1b7bf4(_0x2f3d05,_0x26f066,_0x7afc69,_0x2c5bd7){return _0x49df(_0x7afc69-0xc1,_0x2c5bd7);}_0x2eceaa[_0x55af75(0x3ed,0x316,0x48e,0x32b)]=_0x55af75(0x342,0x4bc,0x5f4,0x4aa),_0x2eceaa[_0x1b7bf4(0x3fe,0x373,0x437,0x551)]=_0x1b7bf4(0x345,0x523,0x4a2,0x33a)+_0x1b7bf4(0x3c9,0x397,0x3fb,0x4fd)+_0x55af75(0x43c,0x37f,0x32d,0x360)+_0x55af75(0x193,0x2f2,0x328,0x27b)+_0x1b7bf4(0x5ab,0x334,0x45b,0x3eb)+_0x1b7bf4(0x2bb,0x1ed,0x335,0x492)+'a1b2',_0x2eceaa[_0x1b7bf4(0x430,0x3b9,0x3b7,0x3bb)]=_0x1b7bf4(0x277,0x284,0x322,0x231),_0x2eceaa[_0x55af75(0x509,0x513,0x51a,0x5ae)]=_0x55af75(0x49c,0x34c,0x497,0x313),_0x2eceaa[_0x1b7bf4(0x49c,0x47a,0x3b2,0x246)]=_0x55af75(0x1d8,0x2d6,0x436,0x15d)+_0x55af75(0x284,0x33f,0x3cd,0x23b)+'ecryption\x20'+_0x1b7bf4(0x2a0,0x2ce,0x31c,0x3c2)+'e\x20key\x20migh'+_0x55af75(0x545,0x4f1,0x3d2,0x468)+'\x20or\x20the\x20da'+_0x1b7bf4(0x452,0x4ef,0x3ac,0x3a0)+_0x55af75(0x4ef,0x4b4,0x4e7,0x4bc)+'raw\x20value.',_0x2eceaa[_0x1b7bf4(0x390,0x3a4,0x311,0x267)]=_0x1b7bf4(0x386,0x1bf,0x2ee,0x2bd),_0x2eceaa[_0x1b7bf4(0x114,0x16c,0x1ff,0x356)]='An\x20error\x20o'+_0x55af75(0x210,0x36f,0x2d6,0x4a5)+_0x1b7bf4(0x51a,0x57c,0x3fe,0x56f)+_0x1b7bf4(0x37d,0x3c6,0x34f,0x3c4);function _0x55af75(_0x57851b,_0x47ea3c,_0x379517,_0x4e1b39){return _0x49df(_0x47ea3c-0x1e7,_0x57851b);}const _0x4defbc=_0x2eceaa;if(!_0x5adad6||_0x4defbc[_0x55af75(0x4b8,0x3d1,0x508,0x389)](typeof _0x5adad6,_0x4defbc[_0x1b7bf4(0x1a0,0x23e,0x1f0,0x2e9)])||!_0x5adad6['includes'](':'))return _0x5adad6;try{const _0x457398=_0x4defbc[_0x1b7bf4(0x4e4,0x3af,0x437,0x587)],_0x2ea9e2=CryptoJS[_0x55af75(0x5a4,0x44b,0x3e7,0x352)][_0x1b7bf4(0x506,0x55d,0x481,0x309)]['parse'](_0x457398),_0x41a2f7=_0x5adad6['split'](':');if(_0x4defbc[_0x55af75(0x29f,0x3d1,0x2c8,0x3ea)](_0x41a2f7['length'],-0x14f+0x2*-0xf4f+0x1fef))return _0x5adad6;const _0x376935=CryptoJS[_0x1b7bf4(0x2f0,0x45e,0x325,0x20c)][_0x55af75(0x711,0x5a7,0x5cc,0x55e)]['parse'](_0x41a2f7[0x2447+-0x7be*0x4+-0x54f]),_0x2728aa=_0x41a2f7[0x19a7+-0x1*0x18da+-0xcc],_0x2a5ddb=CryptoJS[_0x55af75(0x5f4,0x56b,0x56d,0x616)][_0x55af75(0x50a,0x4b0,0x587,0x4d9)+'ms'][_0x55af75(0x392,0x2fc,0x371,0x36d)]({'ciphertext':CryptoJS[_0x55af75(0x4eb,0x44b,0x38e,0x4b5)]['Hex'][_0x55af75(0x1f6,0x333,0x1d9,0x276)](_0x2728aa)}),_0x3a762b=CryptoJS[_0x55af75(0x3b8,0x30d,0x3ea,0x352)][_0x1b7bf4(0x1e2,0x4a9,0x343,0x2d3)](_0x2a5ddb,_0x2ea9e2,{'iv':_0x376935,'mode':CryptoJS['mode'][_0x55af75(0x5dd,0x57b,0x636,0x69f)],'padding':CryptoJS[_0x1b7bf4(0x352,0x393,0x37f,0x30f)][_0x1b7bf4(0x3f1,0x1d8,0x34b,0x21b)]}),_0x3e2426=_0x3a762b['toString'](CryptoJS[_0x55af75(0x399,0x44b,0x3f0,0x2df)][_0x1b7bf4(0x215,0x34f,0x2f8,0x337)]);if(_0x3e2426)return _0x3e2426;else{if(_0x4defbc[_0x55af75(0x566,0x4dd,0x5a4,0x578)]!==_0x4defbc['ZeTMb'])return console[_0x1b7bf4(0x25c,0x19d,0x1af,0x2f8)](_0x4defbc[_0x1b7bf4(0x430,0x4ef,0x3b2,0x24b)]),_0x5adad6;else _0x254f19=!![];}}catch(_0x5e968d){if(_0x4defbc['cOzin']===_0x4defbc[_0x55af75(0x419,0x437,0x3a8,0x4ed)])return console[_0x1b7bf4(0xa2,0x1e3,0x1af,0x32d)](_0x4defbc['dSigd'],_0x5e968d),_0x5adad6;else _0x21df2c=_0x4defbc[_0x1b7bf4(0x2f3,0x39f,0x388,0x263)];}}function unzipFile(_0x4d8efd){function _0x5bb47c(_0x1b2426,_0x4a4778,_0x552ddb,_0x326ffd){return _0x49df(_0x326ffd- -0x10d,_0x4a4778);}const _0x149f87={'QPwWT':function(_0x57174d,_0x48e985){return _0x57174d(_0x48e985);},'fSpsl':'ZIP\x20文件加载成功','fzsru':function(_0xdd94dd,_0x54767c){return _0xdd94dd!==_0x54767c;},'mwCfo':_0x49aabe(-0x19,-0x39,-0x80,0xe8)};_0x149f87['QPwWT'](addLog,_0x49aabe(-0x83,-0x84,0x19,0x45)+_0x5bb47c(-0xec,0x61,-0x35,0x74));function _0x49aabe(_0x47952e,_0x53e335,_0x5e5b52,_0x3f572a){return _0x49df(_0x5e5b52- -0x337,_0x53e335);}return new Promise((_0x558e46,_0x34b729)=>{function _0x3fcf19(_0x1b591a,_0x5dae92,_0xfce49f,_0x3656af){return _0x49aabe(_0x1b591a-0x11c,_0x1b591a,_0xfce49f-0x76,_0x3656af-0x131);}function _0x523723(_0x35e426,_0x3bad2d,_0x29fe39,_0x23b183){return _0x49aabe(_0x35e426-0x171,_0x35e426,_0x23b183-0x3a0,_0x23b183-0x10b);}const _0xc80c37={'zBzZB':function(_0x22abb4,_0x16b811){function _0x2b0fd4(_0xf00722,_0x5c596d,_0xce4ac3,_0xf44fa0){return _0x49df(_0x5c596d-0x20c,_0xf00722);}return _0x149f87[_0x2b0fd4(0x31c,0x304,0x3f1,0x1ec)](_0x22abb4,_0x16b811);},'ruXGa':_0x3fcf19(0x259,0x1e3,0x109,0x13e),'wXtzQ':_0x149f87[_0x3fcf19(-0x52,0x29,0x69,-0xff)]};_0x149f87[_0x3fcf19(-0x230,-0x171,-0x1d6,-0x66)](_0x149f87[_0x523723(0x229,0xbc,0x2e0,0x182)],'rCaaD')?_0x149f87[_0x3fcf19(-0xe0,-0x55,-0x1c9,-0xde)](_0x454cb0,'缓存设置为不存入数据'+'库'):JSZip[_0x523723(0x419,0x2c3,0x3d8,0x36b)](_0x4d8efd)[_0x3fcf19(0x2d,-0x21b,-0xed,-0x25b)](function(_0x48c350){function _0x5cf624(_0x5b6134,_0x4019ae,_0x4279dc,_0x1f8d78){return _0x523723(_0x4279dc,_0x4019ae-0xe4,_0x4279dc-0x1cf,_0x4019ae- -0x1f8);}const _0x79f26={'CDseT':function(_0x21fc04,_0xa24ab8){function _0x5add61(_0x8c9dad,_0x36a80b,_0x390fce,_0x4dbf05){return _0x49df(_0x4dbf05- -0x3d7,_0x390fce);}return _0xc80c37[_0x5add61(-0xce,-0x2b5,-0xda,-0x142)](_0x21fc04,_0xa24ab8);},'cvknE':_0xc80c37[_0x5cf624(-0xbf,0x63,-0xdb,0xfe)]};function _0x3b1e58(_0x458d03,_0x2c608d,_0x221ae2,_0x47dff8){return _0x3fcf19(_0x47dff8,_0x2c608d-0x80,_0x221ae2-0x4f2,_0x47dff8-0xb9);}_0xc80c37[_0x3b1e58(0x44c,0x540,0x4c6,0x453)](addLog,_0xc80c37[_0x3b1e58(0x51a,0x3eb,0x39d,0x3a3)]),_0x48c350['forEach'](function(_0x5f0343,_0x424837){const _0x442937={'eliQw':function(_0x2d4056,_0x2240c3){function _0x46bbd0(_0x312e82,_0x1a0675,_0x4689d8,_0x1377a5){return _0x49df(_0x1377a5- -0x2fe,_0x312e82);}return _0x79f26[_0x46bbd0(-0x81,-0x162,-0xe7,-0x178)](_0x2d4056,_0x2240c3);},'EYers':_0x79f26[_0x19f028(0x577,0x6cc,0x64b,0x675)],'AkFPg':function(_0x4c21ae,_0x393dbb){function _0x18dfc3(_0x8a6e0d,_0x43320b,_0x4283e6,_0x1347b8){return _0x19f028(_0x8a6e0d- -0x4e1,_0x1347b8,_0x4283e6-0xfa,_0x1347b8-0x11c);}return _0x79f26[_0x18dfc3(-0x8d,-0xa8,-0x12c,0x17)](_0x4c21ae,_0x393dbb);},'lVECG':function(_0x3d5781,_0x540616){return _0x3d5781(_0x540616);}};function _0x9b3042(_0x38e98c,_0x2caa5b,_0x57923b,_0x5d1d51){return _0x3b1e58(_0x38e98c-0x9b,_0x2caa5b-0x1df,_0x2caa5b- -0x4b2,_0x38e98c);}addLog('在\x20ZIP\x20中找到文'+_0x19f028(0x5af,0x657,0x4e0,0x5e7)+_0x424837[_0x9b3042(0xcf,0x43,0x14b,0x17d)]);function _0x19f028(_0x1cc4c8,_0x48826f,_0x9ebcb9,_0x2a2b44){return _0x3b1e58(_0x1cc4c8-0xa8,_0x48826f-0x1,_0x1cc4c8-0x9d,_0x48826f);}_0x424837[_0x9b3042(0xde,0x167,0x166,0x9f)](_0x9b3042(0x66,0x120,0xb4,-0x56))[_0x9b3042(-0x59,-0xad,-0xdb,-0x11c)](function(_0x24a10e){function _0x2d7c90(_0x5e603f,_0x423895,_0x30abc3,_0x4e9e12){return _0x19f028(_0x423895- -0x2a3,_0x4e9e12,_0x30abc3-0x19c,_0x4e9e12-0x1aa);}function _0x17f0cc(_0x54af37,_0x480482,_0xef7838,_0x19775f){return _0x19f028(_0xef7838- -0x488,_0x19775f,_0xef7838-0x16e,_0x19775f-0x155);}const _0x4c64ec={'nxZUN':function(_0x467c0e,_0x59caa1){function _0x44f615(_0x163692,_0x5d912d,_0x5496d4,_0xaa8fdc){return _0x49df(_0x5496d4-0x6e,_0xaa8fdc);}return _0x442937[_0x44f615(0x27b,0x137,0x170,-0xd)](_0x467c0e,_0x59caa1);}};_0x442937['EYers']===_0x442937[_0x2d7c90(0x12c,0x1eb,0x10f,0x118)]?(_0x442937['AkFPg'](addLog,_0x2d7c90(0x429,0x2ac,0x23e,0x380)+_0x424837[_0x17f0cc(0x26,0x111,0x10a,0x4e)]+(_0x17f0cc(-0xfa,-0xda,-0x4b,0x68)+_0x17f0cc(0xe1,0xe3,-0x20,0x151))+_0x24a10e['length']),_0x442937[_0x17f0cc(-0x8b,-0x52,0x20,0x10a)](_0x558e46,_0x24a10e)):_0x4c64ec[_0x2d7c90(0x1fe,0x1db,0x1cc,0x86)](_0x231b17,_0x2d7c90(0x298,0x379,0x488,0x282)+_0x17f0cc(0xc5,0x15a,-0x1a,-0xbe)+_0x34a4e7[_0x2d7c90(0x391,0x2a2,0x2d0,0x306)](_0x204162,null,-0x1d*0x5b+0x144*0x11+0x2f*-0x3d));})[_0x9b3042(-0x24c,-0xe0,-0x18d,-0x1e8)](_0x4c595d=>{addLog(_0x24034a(0x67e,0x676,0x5b1,0x662)+_0x424837['name']+_0x24034a(0x5a1,0x4e7,0x3b6,0x3da)+_0x4c595d[_0x1344ed(0x752,0x78d,0x708,0x692)]);function _0x24034a(_0x1ed49c,_0x4d32e5,_0x5e1252,_0x4174a9){return _0x19f028(_0x4d32e5-0x9b,_0x4174a9,_0x5e1252-0x14a,_0x4174a9-0x108);}function _0x1344ed(_0x5ad263,_0xf28c74,_0x27a31a,_0x3bd796){return _0x19f028(_0x5ad263-0x107,_0x3bd796,_0x27a31a-0x99,_0x3bd796-0x59);}_0x34b729(_0x4c595d);});});})[_0x523723(0x1a1,0xbc,0x22d,0x20a)](_0x59c258=>{function _0x35349d(_0x1d5303,_0x1caef4,_0x175440,_0xc1ea49){return _0x523723(_0x175440,_0x1caef4-0x179,_0x175440-0xe8,_0x1caef4-0x23);}addLog('加载\x20ZIP\x20文件失'+_0x35349d(0x444,0x40d,0x3f4,0x2ed)+_0x59c258[_0x35349d(0x462,0x409,0x4c9,0x32d)]);function _0xc5bc3e(_0x34d237,_0x3b0d62,_0x159db5,_0x35dad2){return _0x3fcf19(_0x35dad2,_0x3b0d62-0x1c1,_0x34d237-0x232,_0x35dad2-0x1cd);}_0x149f87[_0x35349d(0x29c,0x184,0x28f,0x2d8)](_0x34b729,_0x59c258);});});}function _parseMsgpackMessage(_0xad9c5f){function _0x39354c(_0x255ff6,_0x4d2c75,_0x52e2c1,_0x3333e2){return _0x49df(_0x255ff6- -0x3d0,_0x52e2c1);}const _0x26608a={'yJlAK':function(_0x508bb4,_0x2d77e9){return _0x508bb4(_0x2d77e9);},'ENvbf':function(_0x4d0a0d,_0x521e9f){return _0x4d0a0d(_0x521e9f);},'TKYye':_0x39354c(-0x1,0x13b,-0x92,0x67)+_0x4b6264(0x648,0x5f9,0x590,0x4fa),'QKbjm':_0x4b6264(0x3df,0x3de,0x331,0x494),'pwWMG':'NCKez','pEmkr':_0x39354c(-0x1a1,-0x1e2,-0x2c9,-0x1d1),'nbieC':function(_0xb02bd3,_0x36a05d){return _0xb02bd3(_0x36a05d);},'JgyuB':_0x4b6264(0x2c2,0x354,0x4c3,0x2b1)+_0x39354c(0xd,-0x25,0x63,0x14b)};function _0x4b6264(_0xe61dc7,_0x32b465,_0x4171c7,_0x490104){return _0x49df(_0x32b465-0x268,_0xe61dc7);}try{if(_0x26608a[_0x39354c(-0x25c,-0x164,-0x193,-0x15a)]!==_0x26608a['QKbjm'])_0x26608a[_0x39354c(-0x299,-0x181,-0x261,-0x1fb)](_0x59972e,'解压文件\x20'+_0x1a0d56[_0x39354c(-0x10c,0x61,-0xc5,-0x53)]+_0x4b6264(0x566,0x3e6,0x347,0x557)+_0x5b3368[_0x39354c(-0x53,-0xc1,0xb2,0x10)]),_0x26608a[_0x4b6264(0x259,0x39f,0x33f,0x403)](_0x2bcf3f,_0x230799);else{const _0x4ccc5e=MessagePack[_0x39354c(-0xe2,-0xa9,-0xa,0x8c)](_0xad9c5f);if(_0x4ccc5e&&_0x4ccc5e[_0x4b6264(0x60b,0x5da,0x61f,0x605)]){_0x26608a[_0x39354c(-0x2ad,-0x169,-0x254,-0x1d3)](addLog,_0x4b6264(0x55b,0x5d9,0x479,0x5df)+_0x4b6264(0x5d9,0x4a8,0x45d,0x38f)+'型\x20-\x20'+_0x4ccc5e[_0x39354c(-0x5e,0x13,-0x122,-0xfb)]);const _0x2eb23c={};return _0x2eb23c[_0x39354c(-0x283,-0x126,-0x28e,-0x12f)]=_0x4ccc5e[_0x4b6264(0x670,0x5da,0x4e6,0x593)],_0x2eb23c[_0x4b6264(0x623,0x4d5,0x4dc,0x5dd)]=_0x4ccc5e['image'],_0x2eb23c;}}}catch(_0x3aed2c){if(_0x26608a[_0x4b6264(0x644,0x509,0x402,0x4c4)]!==_0x26608a[_0x4b6264(0x4ab,0x5c8,0x5cf,0x4aa)])_0x26608a['nbieC'](addLog,_0x4b6264(0x4a8,0x5d9,0x6f3,0x607)+_0x4b6264(0x40d,0x58d,0x4a9,0x460)+_0x3aed2c[_0x4b6264(0x670,0x5e5,0x760,0x4f6)]),console[_0x39354c(-0x2e2,-0x44b,-0x31e,-0x2e0)](_0x26608a['JgyuB'],_0x3aed2c);else{_0x26608a['ENvbf'](_0x123670,_0x26608a[_0x4b6264(0x2ec,0x46c,0x352,0x58b)]),_0x43425b['error'](_0x26608a['TKYye']);throw new _0x545db1(_0x26608a['TKYye']);}}return null;}function _parseMsgpackEvents(_0xf8f47c){const _0x5c392e={'YECOn':function(_0x28382c,_0x19db0d){return _0x28382c+_0x19db0d;},'nRcNh':function(_0x37ea28,_0x146a0f){return _0x37ea28(_0x146a0f);},'bKJGq':function(_0x361658,_0x4da397){return _0x361658(_0x4da397);},'lIHNN':_0x1fac6b(0x3de,0x3d0,0x368,0x2d9)+_0x1b2b7c(0x192,0x327,0x21a,0x299),'xfWls':function(_0x16098c,_0x424f66){return _0x16098c(_0x424f66);},'wJkTk':'开始解析\x20Msgpa'+_0x1fac6b(0x2ed,0x53c,0x558,0x426),'oEKvZ':function(_0x5b9aeb,_0x4fd09b){return _0x5b9aeb<_0x4fd09b;},'ebKWK':function(_0x5ae711,_0x1f85e1){return _0x5ae711!==_0x1f85e1;},'FIixi':_0x1b2b7c(0x405,0x490,0x3b8,0x4c8),'iAYFu':function(_0x3e5cf9,_0x1ce0c6){return _0x3e5cf9+_0x1ce0c6;},'kXBvV':function(_0x127fc9,_0x1ec2b1){return _0x127fc9+_0x1ec2b1;},'oYhTY':function(_0x291fd2,_0x27ecba){return _0x291fd2(_0x27ecba);},'vgzlK':'pCGlp','YFfgT':_0x1b2b7c(0x5e2,0x384,0x492,0x42e)};_0x5c392e['xfWls'](addLog,_0x5c392e['wJkTk']);let _0x5a2d5c=-0x1d02+0x2*0xe8f+-0x1c;const _0x4f18f0=[];function _0x1b2b7c(_0x4fa97a,_0x33e134,_0x587c07,_0x23dbbd){return _0x49df(_0x587c07-0xdf,_0x4fa97a);}while(_0x5c392e[_0x1b2b7c(0x33c,0x3a1,0x2d8,0x453)](_0x5a2d5c,_0xf8f47c[_0x1b2b7c(0x487,0x40a,0x3d6,0x3e2)])){if(_0x5c392e[_0x1b2b7c(0x3aa,0x45d,0x469,0x4c9)](_0x1fac6b(0x389,0x49d,0x205,0x356),_0x5c392e[_0x1b2b7c(0x455,0x3dd,0x3ce,0x4be)]))try{const _0x327b6c=_0xf8f47c[_0x1b2b7c(0x475,0x34b,0x3fd,0x4d0)](_0x5a2d5c,_0x5c392e['iAYFu'](_0x5a2d5c,-0x1749+-0x140+0x188d)),_0x293e7b=new DataView(_0x327b6c['buffer'])[_0x1fac6b(0x57f,0x589,0x621,0x4a0)](0x897*0x2+0x20d+-0x133b),_0x59ae94=_0x5c392e[_0x1b2b7c(0x133,0x3d1,0x2aa,0x280)](_0x5a2d5c,0x1b8b+-0x3*-0x911+-0x36ba),_0x300518=_0x5c392e['kXBvV'](_0x59ae94,_0x293e7b);_0x5c392e[_0x1fac6b(0x32c,0x1c2,0x257,0x2f8)](addLog,_0x1b2b7c(0x213,0x171,0x1f2,0x2ed)+_0x1b2b7c(0x578,0x52f,0x4b0,0x465)+_0x293e7b+_0x1b2b7c(0x3e1,0x19d,0x2ac,0x250)+_0x59ae94+'-'+_0x300518);const _0x40e384=_0xf8f47c[_0x1b2b7c(0x40d,0x41e,0x3fd,0x536)](_0x59ae94,_0x300518),_0x434bc3=_0x5c392e['oYhTY'](_parseMsgpackMessage,_0x40e384);if(_0x434bc3)_0x4f18f0[_0x1fac6b(0x5f0,0x50f,0x672,0x4f7)](_0x434bc3);_0x5a2d5c=_0x300518;}catch(_0x1bdf22){if(_0x5c392e[_0x1fac6b(0x428,0x19f,0x46a,0x300)]===_0x5c392e[_0x1fac6b(0x508,0x4ad,0x3b9,0x4ce)])try{const _0x150a55=_0x1c21c8[_0x1fac6b(0x614,0x506,0x640,0x506)](_0x21d008,_0x5c392e['YECOn'](_0x2c41a9,-0x1*0x83+-0x277*0xa+0x1*0x192d)),_0x38072b=new _0x43979e(_0x150a55[_0x1b2b7c(0x2b8,0x37d,0x248,0x11f)])[_0x1fac6b(0x3eb,0x400,0x4c4,0x4a0)](0x26f6+0x2*0xeb0+-0x2*0x222b),_0x4ec8f3=_0x278dc2+(0x21f6+0x6c1+-0x97*0x45),_0x2c7e00=_0x4ec8f3+_0x38072b;_0x5c392e['nRcNh'](_0x321553,'发现\x20Msgpack'+_0x1fac6b(0x645,0x4c0,0x68a,0x5b9)+_0x38072b+_0x1fac6b(0x2ab,0x474,0x493,0x3b5)+_0x4ec8f3+'-'+_0x2c7e00);const _0x4a297c=_0x1f9725[_0x1fac6b(0x5a6,0x65d,0x45a,0x506)](_0x4ec8f3,_0x2c7e00),_0x403de9=_0x5c392e[_0x1b2b7c(0x345,0x336,0x245,0x150)](_0x240dda,_0x4a297c);if(_0x403de9)_0x585e84[_0x1fac6b(0x408,0x41b,0x484,0x4f7)](_0x403de9);_0x43ce0d=_0x2c7e00;}catch(_0x1b010f){_0x5c392e[_0x1fac6b(0x49e,0x5c9,0x655,0x4e3)](_0x3c17b3,_0x1fac6b(0x606,0x539,0x5db,0x559)+_0x1b2b7c(0x375,0x2f7,0x3e6,0x42f)+_0x1b010f[_0x1b2b7c(0x31f,0x4ca,0x45c,0x3f8)]),_0x3dcfb8[_0x1fac6b(0x196,0x339,0x370,0x2d6)](_0x5c392e[_0x1fac6b(0x4a0,0x55f,0x5f2,0x4fe)],_0x1b010f),_0x1b9aca++;}else _0x5c392e[_0x1b2b7c(0x24c,0x200,0x1ef,0x31e)](addLog,'解析\x20Msgpack'+'\x20事件失败:\x20'+_0x1bdf22['message']),console[_0x1b2b7c(0x1ac,0x7c,0x1cd,0x176)](_0x5c392e['lIHNN'],_0x1bdf22),_0x5a2d5c++;}else _0x2828cf[_0x1b2b7c(0x412,0x46c,0x468,0x4da)+_0x1fac6b(0x520,0x52e,0x471,0x5bd)+_0x1fac6b(0x2d3,0x251,0x47d,0x373)]=!![],_0x1013b4();}function _0x1fac6b(_0x3eedce,_0x1118f5,_0x1477b5,_0xce94d7){return _0x49df(_0xce94d7-0x1e8,_0x1118f5);}return addLog(_0x1b2b7c(0x440,0x56a,0x437,0x4e0)+_0x1fac6b(0x392,0x372,0x29f,0x3d6)+_0x4f18f0[_0x1fac6b(0x36c,0x39e,0x546,0x4df)]+_0x1b2b7c(0x45d,0x3d5,0x45f,0x3d3)),_0x4f18f0;}function uint8ArrayToBase64(_0xeb73f1){const _0x76885c={'CUeyv':function(_0x2a2d69,_0x19cb7f){return _0x2a2d69<_0x19cb7f;},'IfeSo':function(_0x2409ad,_0x24c2ca){return _0x2409ad(_0x24c2ca);}};let _0x1096ce='';function _0x55b29a(_0x108e3c,_0x5727c3,_0x434bfd,_0x3796d9){return _0x49df(_0x5727c3-0xb9,_0x434bfd);}const _0x33402f=_0xeb73f1[_0x346b01(0x628,0x349,0x4bd,0x4bc)];for(let _0x3acc11=-0x15d2+0xb*-0x1f+-0x1727*-0x1;_0x76885c[_0x346b01(0x436,0x314,0x481,0x3e6)](_0x3acc11,_0x33402f);_0x3acc11++){_0x1096ce+=String[_0x55b29a(0x483,0x379,0x442,0x33d)+'de'](_0xeb73f1[_0x3acc11]);}function _0x346b01(_0x50674a,_0xcd7015,_0x3ff13f,_0x531986){return _0x49df(_0x3ff13f-0x1ed,_0x50674a);}return _0x76885c[_0x55b29a(0x366,0x291,0x12e,0x241)](btoa,_0x1096ce);}async function generateNovelAIImage({prompt:_0x3314ec,width:_0x10bf95,height:_0x177cfa,change:_0x30c98a}){const _0x77b6ab={'Olopo':function(_0x42abcd,_0x4f5af1){return _0x42abcd(_0x4f5af1);},'ioRav':_0x358b39(-0x32,0x101,0x6b,0x16e)+'osition','YIAjr':function(_0x1823bc,_0xf8b2c6){return _0x1823bc<=_0xf8b2c6;},'GSklw':function(_0x13a8fd,_0x2b9bb5){return _0x13a8fd+_0x2b9bb5;},'bNxmx':_0x358b39(0x11c,0xd3,0x181,0x244)+'点！','qYaQv':'blurry,\x20lo'+'wres,\x20upsc'+_0x179000(0x438,0x510,0x4e8,0x5f4)+_0x358b39(0xdb,0x8a,-0xef,-0x91)+',\x20film\x20gra'+_0x179000(0x49d,0x3f7,0x4db,0x3f2)+'rtifacts,\x20'+_0x179000(0x58e,0x730,0x657,0x7ab)+_0x179000(0x571,0x4ae,0x603,0x579)+_0x179000(0x5fd,0x71b,0x6ad,0x555)+'quality,\x20b'+_0x358b39(0xf4,0x193,0xd0,0x78)+_0x358b39(0x299,0x205,0x292,0x342)+_0x358b39(0x10b,0x17d,0x13e,0x115)+_0x179000(0x56a,0x57e,0x5a9,0x511)+'sing,\x20chro'+_0x179000(0x461,0x59f,0x5d4,0x74c)+'ration,\x20ha'+_0x179000(0x717,0x80f,0x73e,0x76a)+'ltiple\x20vie'+_0x179000(0x5b5,0x7b5,0x6d3,0x80e)+_0x358b39(0x240,0x1b3,0x205,0xe2)+_0x358b39(0x38f,0x244,0x293,0x10e)+_0x179000(0x752,0x7a8,0x653,0x5f8)+_0x179000(0x3ca,0x509,0x52e,0x51a)+_0x179000(0x419,0x5b3,0x475,0x3e3)+'ng\x20eyes,\x20n'+_0x358b39(0xec,0x1cb,0xd5,0x138)+_0x358b39(0x29f,0x35b,0x382,0x49c)+'\x20page','xVnAV':_0x358b39(0x1f3,0x1da,0x354,0x332)+'owres,\x20ali'+_0x179000(0x7fb,0x6eb,0x72b,0x8a9)+_0x358b39(0x336,0x34e,0x240,0x2ae)+'ad\x20hands,o'+'ne\x20legs','ExVYJ':function(_0x4fc94e,_0x57b63b){return _0x4fc94e(_0x57b63b);},'nDOlZ':function(_0x5d7738,_0x193d73){return _0x5d7738(_0x193d73);},'tUdiP':function(_0x5d4cc2,_0x18135a){return _0x5d4cc2(_0x18135a);},'bmdss':function(_0x3e0628,_0x57e84d){return _0x3e0628(_0x57e84d);},'YfeHk':'base64','DnsGB':_0x179000(0x68e,0x5cf,0x734,0x874),'iRKyW':_0x358b39(0x110,0xb6,0x155,0x18c)+'on','wcShd':_0x358b39(0x93,0x1a5,0x24f,0xff)+_0x358b39(0xb3,0xd7,0xee,-0x39),'cmmlX':_0x358b39(0xa1,0x74,0x2a,0x196)+_0x358b39(-0x67,0xdd,0x3c,0x1b6)+_0x358b39(0x251,0x2d7,0x407,0x1b0)+_0x358b39(0x270,0x1e0,0x279,0x266)+_0x179000(0x4df,0x748,0x65f,0x612)+_0x179000(0x69a,0x516,0x681,0x635)+_0x179000(0x58c,0x600,0x48b,0x440)+_0x179000(0x780,0x593,0x662,0x558)+'ed.\x20Using\x20'+_0x179000(0x55d,0x574,0x65a,0x66b),'fHihR':'lowres,\x20{b'+'ad},\x20error'+_0x179000(0x42c,0x51e,0x4ad,0x39e)+_0x358b39(0x1f9,0x2cd,0x279,0x266)+_0x179000(0x61c,0x74c,0x65e,0x6ee)+_0x179000(0x4ab,0x40d,0x564,0x521)+_0x358b39(0xff,0x1dd,0x27a,0x93)+'acts,\x20bad\x20'+_0x358b39(0x1f9,0x151,0xfe,0x186)+_0x358b39(0x16f,0x122,0x270,0x15f)+'unfinished'+_0x358b39(0x178,0x1a9,0x1f6,0x31e)+'ing,\x20chrom'+'atic\x20aberr'+_0x179000(0x374,0x43e,0x4ca,0x5c3)+_0x358b39(0x2e2,0x19f,0x304,0x1c1)+_0x179000(0x402,0x3f2,0x4a5,0x477)+_0x358b39(0x164,0x184,0xbe,0x106)+_0x358b39(0x7c,0x78,0x193,-0x103)+_0x358b39(0x427,0x33a,0x44e,0x2c3)+_0x358b39(0x9a,0x77,-0xe5,0x88)+_0x358b39(0x214,0x18b,0x189,0xf2)+_0x179000(0x5d2,0x572,0x61e,0x62a)+_0x358b39(-0x12,0x11e,0x250,0x221)+_0x179000(0x621,0x4b8,0x5c3,0x6c7)+_0x358b39(0x371,0x31a,0x3c4,0x2d8)+_0x179000(0x6d2,0x680,0x614,0x61a)+'shaped\x20pup'+_0x358b39(0xa,0x83,0x43,-0xfb)+'ng\x20eyes','wOtum':_0x358b39(0x41,0x147,0x15d,0xdc)+_0x179000(0x685,0x66f,0x725,0x696)+_0x179000(0x4c0,0x75f,0x615,0x666)+_0x179000(0x54d,0x557,0x656,0x67e),'gsimC':function(_0x4ad765){return _0x4ad765();},'uOZBJ':_0x358b39(-0xa6,0x86,-0x20,0xbb)+_0x179000(0x575,0x588,0x4d7,0x4fb)+_0x358b39(-0x7a,0xf6,0x22a,-0x68)+'stic\x20error'+_0x358b39(0x130,0x2b0,0x3f2,0x311)+_0x358b39(0x228,0xe9,0x61,0x1f9)+'rtifacts,\x20'+_0x179000(0x3dc,0x5df,0x508,0x625)+_0x358b39(0x258,0x1e7,0xe8,0x2dc)+_0x358b39(0x185,0xcb,0x18b,-0x65)+'eg\x20artifac'+_0x179000(0x5db,0x5c1,0x728,0x789)+_0x179000(0x822,0x5cc,0x6dd,0x69f)+_0x179000(0x5e0,0x83b,0x730,0x89e)+_0x358b39(0x277,0x2e7,0x167,0x325)+_0x358b39(0x22d,0x331,0x3e0,0x41d)+_0x358b39(0x421,0x2dc,0x23c,0x17e)+_0x358b39(0x58,0x174,0x2ad,0x2d0)+'logo,\x20too\x20'+_0x358b39(0x341,0x25f,0x31f,0x195)+_0x358b39(0x22,0x195,0x196,0x89)+_0x179000(0x5e5,0x79b,0x706,0x648)+_0x358b39(0x4c6,0x361,0x24a,0x262)+_0x179000(0x457,0x47a,0x4f1,0x66c),'ucOpz':function(_0x56283f,_0x132469){return _0x56283f+_0x132469;},'TFIEs':'best\x20quali'+_0x358b39(0x3ce,0x288,0x32a,0x274)+_0x358b39(0x127,0x21e,0x1b9,0x23f)+_0x358b39(0xd1,0x1ae,0x6a,0x1c6)+_0x179000(0x590,0x781,0x61d,0x4c2)+_0x358b39(0x479,0x349,0x297,0x319),'nLuZk':'...image\x20d'+_0x358b39(0x293,0x149,0x4,0x18c)+'ted...','MscjG':_0x358b39(0x181,0x1f7,0x2d9,0x330)+'bove_sigma','XnxXf':_0x179000(0x6b3,0x897,0x738,0x6f5)+_0x179000(0x33e,0x518,0x485,0x30a)+_0x179000(0x631,0x5c6,0x50e,0x5c5)+_0x358b39(0x3f2,0x281,0x151,0x32b)+_0x179000(0x401,0x513,0x529,0x419)+_0x179000(0x571,0x5bd,0x4ef,0x58e)+_0x358b39(0x26c,0x2a7,0x3d8,0x22a)+_0x179000(0x4fd,0x4bd,0x564,0x3f1)+'jpeg\x20artif'+_0x179000(0x592,0x5bd,0x503,0x51b)+'\x20displeasi'+'ng,\x20chroma'+_0x358b39(0x453,0x2f8,0x44d,0x19f)+'tion,\x20dith'+_0x179000(0x68e,0x522,0x52d,0x5bb)+_0x358b39(0x311,0x241,0x238,0x3aa)+'eentone,\x20m'+'ultiple\x20vi'+_0x179000(0x462,0x5e9,0x47b,0x4db)+_0x179000(0x553,0x56a,0x6a9,0x5cf)+'watermarks'+_0x179000(0x649,0x6e4,0x6c2,0x708)+'\x20space,\x20bl'+'ank\x20page,\x20'+_0x179000(0x589,0x686,0x5c3,0x6b7)+'tched\x20pupi'+'ls,\x20glowin'+_0x179000(0x7e5,0x602,0x66c,0x57a)+_0x179000(0x621,0x75d,0x697,0x5cd),'qXGNc':function(_0x3e0dca,_0x2148a9){return _0x3e0dca-_0x2148a9;},'MESvw':_0x358b39(0x22a,0x346,0x49a,0x3b7)+_0x179000(0x4c5,0x555,0x485,0x3ed)+'or,\x20scan\x20a'+_0x179000(0x590,0x563,0x46e,0x370)+_0x179000(0x612,0x3fa,0x508,0x4ce)+'ity,\x20bad\x20q'+_0x179000(0x375,0x5ec,0x4bd,0x373)+'eg\x20artifac'+_0x179000(0x4cf,0x541,0x53d,0x4b6)+_0x358b39(0x197,0x174,0x1d1,0xc5)+_0x179000(0x65d,0x45f,0x5ba,0x712)+_0x179000(0x48c,0x53d,0x4cd,0x3b4)+_0x179000(0x570,0x613,0x4d1,0x53e)+_0x358b39(0x323,0x2ce,0x360,0x284)+_0x179000(0x71e,0x6d3,0x5bd,0x682)+'ace,\x20blank'+_0x179000(0x7cb,0x73f,0x749,0x632),'WmWDb':_0x358b39(0x39b,0x2b4,0x2e9,0x25e)+_0x358b39(0x11c,0xa0,0xa,0xc1)+_0x358b39(0x24d,0x27e,0x2fb,0x395)+_0x179000(0x4ef,0x679,0x543,0x6a9)+'atermark,\x20'+'blurry,\x20ve'+_0x179000(0x6c5,0x430,0x5a9,0x516)+_0x358b39(0x230,0x14d,0x105,0x2c7),'FRPVu':_0x179000(0x6d6,0x7fe,0x73c,0x7c4)+_0x358b39(0x36c,0x271,0x3cb,0x3d0),'Sniol':function(_0x934fc5){return _0x934fc5();},'RLXDn':function(_0x7acb12,_0x3e3c28){return _0x7acb12(_0x3e3c28);},'UmqtG':function(_0xaf6c5e,_0x323e7f){return _0xaf6c5e||_0x323e7f;},'oRovm':_0x358b39(0x105,0x194,0x227,0xd9)+'.','POYQA':function(_0x249760,_0x5f2452){return _0x249760(_0x5f2452);},'SQcDa':function(_0x323c24,_0x5ab505){return _0x323c24==_0x5ab505;},'SNkof':'000000','kRxQf':function(_0x55f78f,_0x3dca59){return _0x55f78f===_0x3dca59;},'aEQZN':_0x358b39(0x2b5,0x301,0x226,0x193),'DVJhA':_0x179000(0x7a2,0x733,0x746,0x7a7)+_0x358b39(0x195,0x316,0x1dd,0x1f3),'GvbNH':function(_0x30fa60,_0x385635){return _0x30fa60!==_0x385635;},'UWPGc':_0x358b39(0x173,0x237,0x1e8,0x132)+_0x358b39(0x132,0x94,0x1ff,-0x12),'CTptB':_0x179000(0x697,0x6d6,0x629,0x685)+_0x179000(0x71c,0x512,0x677,0x5b3)+'ll','IciSG':function(_0x10f2e9,_0x18d05e){return _0x10f2e9==_0x18d05e;},'DIKAA':_0x179000(0x69f,0x68d,0x629,0x7a0)+_0x179000(0x6a2,0x882,0x763,0x67f)+_0x179000(0x4e0,0x6b2,0x64d,0x6e4),'ksYzT':function(_0x4d0e57,_0x39015e){return _0x4d0e57(_0x39015e);},'SjrOM':function(_0x22090f,_0x44be1e){return _0x22090f!=_0x44be1e;},'CJsBB':function(_0x10fd63,_0x539c08){return _0x10fd63==_0x539c08;},'pMZZb':_0x358b39(0x329,0x237,0x360,0x308)+_0x358b39(0x1cf,0x1c9,0x2f9,0x216)+_0x179000(0x367,0x615,0x4af,0x474)+'w','VOOLi':_0x179000(0x4a3,0x60f,0x539,0x40f)+'etic,\x20mast'+_0x358b39(0x2f7,0x223,0xb6,0x2ce)+_0x358b39(0x1fa,0x1f5,0xaf,0x1a1)+_0x179000(0x5bb,0x3f8,0x562,0x68c)+',\x20rating:g'+_0x179000(0x383,0x49d,0x4aa,0x4b5),'HYMig':function(_0x31aad3,_0x168ddf){return _0x31aad3!=_0x168ddf;},'aVZbF':function(_0x2feee3,_0x2179eb){return _0x2feee3==_0x2179eb;},'esSDr':_0x179000(0x778,0x778,0x629,0x541)+_0x179000(0x430,0x413,0x58c,0x58a),'Llqkx':function(_0x44651b,_0x523870){return _0x44651b!==_0x523870;},'oIgRA':_0x358b39(0x1b5,0x1c2,0x54,0x165),'vquea':function(_0x529de5,_0x13819c){return _0x529de5(_0x13819c);},'SaiHt':_0x358b39(0x32f,0x1bd,0xa5,0x336)+_0x358b39(0x427,0x2d4,0x2f6,0x221),'ydrJq':function(_0x8b11b8,_0x4f3ef7){return _0x8b11b8(_0x4f3ef7);},'xIXKz':'itaRr','etvBz':_0x358b39(0x1ba,0x32a,0x26e,0x33f),'TGMHk':function(_0x3a691b,_0x4909c4){return _0x3a691b!==_0x4909c4;},'CbtAY':_0x358b39(0x2b5,0x300,0x286,0x34a),'IWpld':function(_0x26ceff,_0xa7766c){return _0x26ceff+_0xa7766c;},'FvqKn':function(_0xc8e67e,_0x3fc0b2){return _0xc8e67e+_0x3fc0b2;},'OBPZB':_0x179000(0x48d,0x626,0x55e,0x6a6),'QrquE':_0x179000(0x50a,0x4e3,0x5c6,0x535),'rLsSP':function(_0x14ca28,_0x1dd20e){return _0x14ca28(_0x1dd20e);},'vLvxN':_0x358b39(0x13a,0x16e,0x5,0xa7)+'中的\x20prompt。','nPeNB':function(_0x4b73b4,_0x59b736,_0x19f951){return _0x4b73b4(_0x59b736,_0x19f951);},'iwfpO':'jiuguan','htUwr':function(_0x226910,_0x234a05){return _0x226910<=_0x234a05;},'PzbqH':function(_0x4c423a,_0x5893ca){return _0x4c423a!==_0x5893ca;},'YoPWx':_0x179000(0x780,0x69f,0x641,0x707),'TqvZS':function(_0x1bbe6c,_0x282a5b){return _0x1bbe6c!==_0x282a5b;},'NNfAJ':_0x358b39(0x257,0x117,0x225,0x7c),'vlYRO':function(_0x288c48,_0x18210b){return _0x288c48+_0x18210b;},'cTlLO':_0x358b39(0x39f,0x2c0,0x32a,0x257),'fNMEc':function(_0x355423,_0x33b6f7,_0x3a0781,_0x5f52fd,_0x3de615,_0x19575a){return _0x355423(_0x33b6f7,_0x3a0781,_0x5f52fd,_0x3de615,_0x19575a);},'rrlZX':_0x358b39(0x26,0x15a,0x297,0x1fc),'rGCqY':function(_0x19f758,_0x436537){return _0x19f758+_0x436537;},'bflXB':_0x358b39(0x306,0x2ae,0x36d,0x275)+_0x179000(0x5d2,0x3d7,0x507,0x535),'Wwrwu':_0x358b39(0x112,0x253,0x1bf,0x379)+_0x179000(0x83e,0x65c,0x71e,0x5ba)+_0x179000(0x64c,0x732,0x71a,0x75e),'VBlJk':_0x358b39(0xfd,0x9f,-0x9d,0x209),'BROxu':function(_0x4b256e,_0xc0e7a7){return _0x4b256e!==_0xc0e7a7;},'ZzysE':'lowres,\x20{b'+_0x358b39(0x65,0x144,0x186,0x2c0)+_0x358b39(0x1ae,0xbb,-0x20,0x1e4)+_0x358b39(0x2a8,0x2cd,0x257,0x288)+_0x358b39(0x122,0x26c,0x2bc,0x1d8)+'\x20quality,\x20'+_0x179000(0x677,0x576,0x5cf,0x672)+_0x358b39(0x230,0x2cc,0x16a,0x35d)+'quality,\x20w'+'atermark,\x20'+_0x358b39(-0x8f,0xc1,0xaf,-0x1f)+_0x179000(0x4f0,0x5d6,0x59b,0x629)+_0x358b39(0x24d,0x2e8,0x231,0x3e2)+'atic\x20aberr'+'ation,\x20sig'+_0x358b39(0x22f,0x19f,0x44,0xc7)+_0x358b39(0x22,0xb3,0x1b4,0x4a)+_0x179000(0x6eb,0x5e2,0x576,0x564)+'\x20error,\x20us'+'ername,\x20sc'+_0x179000(0x424,0x33d,0x469,0x402)+_0x179000(0x510,0x54a,0x68a,0x76c),'rpOtf':function(_0x5dd94e,_0x12b2a4){return _0x5dd94e==_0x12b2a4;},'MXwYQ':function(_0x55e87e,_0xd66268){return _0x55e87e==_0xd66268;},'jPAYs':_0x358b39(0x445,0x2e2,0x1b2,0x209),'ikTAY':'Human\x20Focu'+'s','boihT':function(_0x164b58,_0x495f5b){return _0x164b58==_0x495f5b;},'DCXMK':function(_0x4dda28,_0x3a25ad){return _0x4dda28!==_0x3a25ad;},'wQjhl':_0x358b39(0x25,0x17a,0x39,0x2),'xsKjz':_0x179000(0x461,0x4a5,0x478,0x58a)+_0x358b39(0x10c,0x133,0x1b4,0x2ac)+'r,\x20film\x20gr'+_0x179000(0x729,0x730,0x648,0x4fd)+_0x179000(0x646,0x7f6,0x6d5,0x7c6)+'\x20worst\x20qua'+_0x179000(0x545,0x374,0x4a1,0x469)+_0x179000(0x4fe,0x45f,0x500,0x43b)+_0x179000(0x796,0x558,0x6cc,0x611)+_0x358b39(0x214,0x11a,0x18c,0x15d)+_0x179000(0x4b4,0x4bd,0x572,0x638)+_0x358b39(0x102,0x12b,0xfc,0x6c)+'ic\x20aberrat'+_0x179000(0x665,0x57b,0x54e,0x499)+_0x179000(0x70f,0x515,0x5cd,0x6b9)+_0x179000(0x5ba,0x6c7,0x6db,0x796)+'\x20many\x20wate'+_0x179000(0x5c1,0x6b4,0x584,0x4f2)+'ite\x20blank\x20'+'page,\x20blan'+_0x358b39(0x3d6,0x2d9,0x232,0x2b8),'lMMUU':'blurry,\x20lo'+_0x358b39(-0x4b,0x133,0xc2,0x261)+_0x179000(0x629,0x573,0x582,0x699)+_0x179000(0x486,0x50f,0x512,0x614)+_0x358b39(0x1f5,0x153,0xbf,0x1c9)+_0x358b39(0x357,0x28a,0x22d,0x3cd)+_0x358b39(0x16f,0x2bd,0x3a8,0x1df)+_0x179000(0x64d,0x599,0x64f,0x4d1)+_0x179000(0x822,0x5b5,0x709,0x638)+'\x20blank\x20pag'+_0x358b39(0x3d2,0x361,0x49c,0x1ee)+_0x179000(0x49a,0x61d,0x4f1,0x47e),'lYjrb':function(_0x5a8db2,_0x59ab95){return _0x5a8db2!==_0x59ab95;},'WcHwx':_0x358b39(0x67,0x161,0x2bd,0xf),'NmJyj':_0x358b39(0x3a5,0x29d,0x3bd,0x3e6),'fklTg':_0x179000(0x5de,0x3c0,0x478,0x4e5)+_0x358b39(0xd0,0x133,0x1d8,0x7e)+_0x358b39(0x23f,0x278,0x2d8,0x310)+'ain,\x20scan\x20'+_0x179000(0x598,0x76e,0x6d5,0x635)+'\x20worst\x20qua'+_0x179000(0x42a,0x4f8,0x4a1,0x5ef)+_0x358b39(-0x48,0x10e,-0xb,0x253)+'peg\x20artifa'+_0x358b39(0x13f,0x11a,0xc3,-0x66)+_0x358b39(0xa7,0x180,0x4f,0x181)+'g,\x20chromat'+_0x179000(0x52e,0x738,0x5ca,0x48b)+_0x358b39(0x21f,0x2b3,0x280,0x23d)+_0x358b39(0x15,0x123,0x11c,0xd)+_0x358b39(0x3c3,0x2a6,0x3eb,0x398)+_0x179000(0x568,0x3d3,0x4b9,0x35e)+_0x179000(0x794,0x81f,0x759,0x72a)+'tic\x20breast'+_0x179000(0x86f,0x6e3,0x733,0x7d3)+'lank\x20page,'+_0x179000(0x456,0x5c7,0x534,0x5fd)+'e','gzFOf':function(_0x23651a,_0x21472c){return _0x23651a==_0x21472c;},'lwuUb':_0x179000(0x3fa,0x4a2,0x478,0x551)+_0x179000(0x5e2,0x459,0x525,0x559)+_0x358b39(0x11d,0x190,0x7a,0x105)+'uality,\x20ba'+_0x179000(0x4c5,0x5a3,0x545,0x60a)+_0x358b39(0x25f,0x28a,0x2ea,0x1be)+_0x358b39(0x22d,0x2bd,0x409,0x3db)+_0x358b39(0x232,0x25d,0x193,0x1bd)+_0x358b39(0x90,0xb2,0x78,-0x8f)+_0x179000(0x679,0x549,0x515,0x5a1)+_0x179000(0x479,0x693,0x51b,0x674)+_0x358b39(0x297,0x260,0x256,0x2c2)+_0x179000(0x7ad,0x5ca,0x6e0,0x7e9)+_0x179000(0x523,0x499,0x546,0x49f),'TvTxl':function(_0x274bb4,_0x5d0be3){return _0x274bb4==_0x5d0be3;},'aDboM':function(_0x586f2d,_0x5b5196){return _0x586f2d==_0x5b5196;},'ZhulB':function(_0x32f16d,_0x17adcf){return _0x32f16d==_0x17adcf;},'cWdvx':function(_0x5ee7f6,_0x4a15fe){return _0x5ee7f6===_0x4a15fe;},'pRWzy':_0x358b39(0x17e,0x1f0,0x2ef,0xd6),'cHEkX':function(_0x295ef4,_0x10ec88){return _0x295ef4==_0x10ec88;},'Dznyy':function(_0x56cd83,_0x5e4a79){return _0x56cd83!==_0x5e4a79;},'MmnGJ':_0x179000(0x798,0x639,0x6e7,0x62e),'FFDJF':'RCKMg','SiBdg':_0x358b39(-0xbe,0x85,0xa,0x2d)+'lity},\x20dis'+_0x179000(0x5d1,0x686,0x6cd,0x56d)+_0x358b39(0x1d7,0x122,0x1f0,0x17)+_0x358b39(0xdd,0xc1,0x211,0x1e1)+_0x358b39(0x312,0x1e1,0x234,0x140)+_0x179000(0x6ac,0x599,0x607,0x771)+_0x358b39(0x1eb,0x2f1,0x2f8,0x308)+_0x179000(0x5b8,0x4a2,0x4d4,0x62f)+_0x358b39(0x17b,0xcd,-0x9d,0x110)+_0x179000(0x48c,0x4f7,0x5ce,0x715)+_0x179000(0x409,0x6b4,0x554,0x5b2)+_0x358b39(0x228,0x1fe,0x1da,0x296)+'rred\x20foreg'+_0x179000(0x740,0x85c,0x744,0x7c6)+_0x358b39(0x1d8,0x2fc,0x365,0x34e)+_0x358b39(0x32d,0x1d7,0x222,0x1a1)+_0x358b39(0x3d7,0x30a,0x2e8,0x299)+_0x179000(0x403,0x3fd,0x52c,0x496)+'etch\x20backg'+_0x179000(0x5ff,0x6dd,0x59f,0x4ca)+_0x358b39(0x18f,0x7e,0x51,0x10a)+_0x358b39(0x18a,0x29f,0x1ea,0x2be)+_0x179000(0x47e,0x450,0x4ce,0x618)+_0x358b39(0xaa,0x14a,0x6e,0x233)+_0x358b39(0x25b,0x247,0x37d,0x2b7)+_0x358b39(-0xc8,0x81,0xa6,-0x82)+_0x179000(0x597,0x681,0x600,0x726)+'or\x20(theme)'+_0x179000(0x652,0x6a4,0x655,0x79a),'TxOyX':_0x358b39(0x96,0x181,0x1cd,0x16),'sUddd':_0x358b39(0x8c,0x1f8,0x370,0x295),'PWNSZ':'false','suCdD':function(_0x1b69eb,_0x343776){return _0x1b69eb(_0x343776);},'OWYaa':function(_0x287ec3,_0x4bb1d1){return _0x287ec3(_0x4bb1d1);},'MDoLX':function(_0x50cc1f,_0x4b9b10){return _0x50cc1f===_0x4b9b10;},'OBxTL':function(_0x3e859e,_0x486fde){return _0x3e859e===_0x486fde;},'MaMvo':function(_0x4d098a,_0x23ee0c){return _0x4d098a===_0x23ee0c;},'GmtAt':function(_0x541511,_0x368d5f){return _0x541511===_0x368d5f;},'iwdWg':_0x358b39(0x1c8,0x2ec,0x293,0x1ab),'ayZsp':'seqdr','UjYJt':_0x358b39(0x359,0x239,0x348,0x1cc),'yLUDl':function(_0x381c2f,_0x3cf00c){return _0x381c2f-_0x3cf00c;},'bjBcP':function(_0x41f3d2,_0x1a281c){return _0x41f3d2!==_0x1a281c;},'XSxHA':_0x179000(0x684,0x6ba,0x608,0x75f),'HGpQW':function(_0x951add,_0x2e0361){return _0x951add<=_0x2e0361;},'bRFQh':'fbfPt','PKKry':_0x358b39(0x1e5,0x334,0x4aa,0x38d),'boFMD':function(_0x30cd46,_0x117b2d){return _0x30cd46!=_0x117b2d;},'UeUwi':function(_0x5b03d3,_0x28ecab){return _0x5b03d3==_0x28ecab;},'dDpXO':function(_0x41aecd,_0x5090e6){return _0x41aecd==_0x5090e6;},'HuWht':_0x358b39(0x191,0x21f,0x170,0x375),'TwLMp':function(_0x244868,_0x5f1116){return _0x244868(_0x5f1116);},'SCQCs':function(_0x282e1c,_0xf20064){return _0x282e1c(_0xf20064);},'OYciI':function(_0x272f9d,_0x51dbdf){return _0x272f9d===_0x51dbdf;},'TwOKM':function(_0x5427a7,_0x410db4){return _0x5427a7===_0x410db4;},'tICjp':function(_0x388493,_0x55b2f7){return _0x388493===_0x55b2f7;},'JsyPE':function(_0x54ecec,_0x46f705){return _0x54ecec(_0x46f705);},'aYrNM':_0x179000(0x56d,0x678,0x55c,0x5df),'EULDY':function(_0x2b82c7,_0x253c52){return _0x2b82c7(_0x253c52);},'AMLJU':function(_0x1bbff5,_0x4b654e){return _0x1bbff5(_0x4b654e);},'SiqLX':function(_0x29d23f){return _0x29d23f();},'kJahx':function(_0x2ae2ee,_0x12f162){return _0x2ae2ee(_0x12f162);},'GRygM':_0x358b39(0x271,0x1ca,0xf0,0x112)+_0x358b39(0x26a,0x10c,0x1af,0x73)+_0x358b39(0x2b6,0x324,0x257,0x3af),'ZvtEt':'prefer_bro'+'wnian','pLRzU':function(_0x38e70d,_0x561903){return _0x38e70d!=_0x561903;},'Iwblk':function(_0x201ed9,_0x3127ac){return _0x201ed9==_0x3127ac;},'zXUKG':function(_0x4e243d,_0xe59be9){return _0x4e243d!==_0xe59be9;},'BnZGl':_0x358b39(0xa6,0x108,0x11,0x140),'NOPsh':_0x358b39(0xae,0xde,0x57,0x11c),'PyObT':function(_0x25faf2,_0x30b0fb){return _0x25faf2(_0x30b0fb);},'Mxmhx':function(_0x415b86,_0x1e8943){return _0x415b86==_0x1e8943;},'cSvig':_0x179000(0x79f,0x717,0x629,0x5df)+_0x179000(0x752,0x5c3,0x689,0x58e),'sZIVA':'RNiCh','VcbAV':_0x358b39(0x288,0x363,0x359,0x477)+'eference_d'+_0x179000(0x687,0x4cc,0x56d,0x53e)+'s','Vavaf':function(_0x50f8a4,_0x397772){return _0x50f8a4>_0x397772;},'auhjI':_0x179000(0x3b8,0x4c5,0x523,0x47c),'KuOUx':function(_0x400f0c,_0x1b75da){return _0x400f0c(_0x1b75da);},'smTWg':_0x179000(0x525,0x406,0x4d3,0x60f)+_0x358b39(0x232,0x248,0x256,0x234)+_0x179000(0x751,0x63c,0x67d,0x5a7)+_0x358b39(0x105,0x176,0x13e,0x2cf)+'age','nYlMx':_0x358b39(0x21a,0x23f,0x195,0x282),'IWWtM':function(_0x52982e,_0x1de1e5){return _0x52982e==_0x1de1e5;},'FmFwr':_0x358b39(0x379,0x202,0x2bb,0xfb),'KBMdr':_0x179000(0x3d7,0x4a3,0x4b8,0x562),'mOPLH':function(_0x1a0625,_0x4625fd){return _0x1a0625===_0x4625fd;},'obPCF':function(_0x213cd6,_0x415103){return _0x213cd6!==_0x415103;},'ILfxX':function(_0x273d3a,_0x55a64b,_0x5d7be4){return _0x273d3a(_0x55a64b,_0x5d7be4);},'chGfx':'/api/secre'+_0x358b39(0x1b5,0x2e6,0x444,0x396),'Unyhq':_0x358b39(0x2b7,0x33c,0x2a6,0x309),'nZYea':'Dctwp','Vdzkp':function(_0x5abce4,_0x41826a){return _0x5abce4!=_0x41826a;},'tdkdZ':_0x179000(0x5de,0x512,0x4a7,0x4ff)+_0x179000(0x452,0x598,0x592,0x5e3),'yarQi':_0x179000(0x7c2,0x55d,0x694,0x7c5)+_0x358b39(0x76,0x11b,0x204,0x121),'ojfLE':'/api/secre'+_0x358b39(0x420,0x359,0x426,0x3b5),'bzcSX':function(_0x24cfe1,_0x4c14e6){return _0x24cfe1(_0x4c14e6);},'zNujK':_0x179000(0x6dd,0x76f,0x743,0x73b)+_0x179000(0x453,0x4f6,0x48d,0x53a),'ybjyx':'/api/novel'+_0x358b39(0x25b,0x259,0x25d,0x314)+_0x358b39(0x25e,0x312,0x299,0x290),'lPUdl':_0x179000(0x598,0x680,0x664,0x7c7),'NEgNi':'iACYF','IvBJd':_0x358b39(0x2e6,0x2be,0x3c1,0x309)+_0x179000(0x79e,0x778,0x678,0x5d8)+_0x179000(0x620,0x86d,0x70f,0x59b),'HZVoT':_0x179000(0x43c,0x48c,0x46c,0x488),'zvmPw':_0x179000(0x5bd,0x4c0,0x48e,0x4b8),'XrmZf':_0x358b39(0x3a,0x1b5,0xec,0x130),'nhkzz':function(_0x3ba4df,_0x32eb12){return _0x3ba4df(_0x32eb12);},'XkXXp':function(_0x1273f2,_0x310fbf,_0xe31667){return _0x1273f2(_0x310fbf,_0xe31667);},'kbFai':'applicatio'+'n/json','MpxdH':function(_0x5cc149,_0x40f4dd){return _0x5cc149(_0x40f4dd);},'HInfL':_0x179000(0x7b7,0x867,0x6ec,0x81d),'bMjCs':function(_0x2b7b61,_0x323691,_0x1d427d){return _0x2b7b61(_0x323691,_0x1d427d);},'QvPbz':function(_0x2f400e,_0x5de026){return _0x2f400e(_0x5de026);},'HcDJn':_0x358b39(0x8d,0x1b9,0x25e,0x1ac)+_0x179000(0x4ee,0x476,0x46d,0x43f)+_0x179000(0x696,0x892,0x735,0x89a),'lWypt':function(_0x35bc6e,_0x4f92b1){return _0x35bc6e!==_0x4f92b1;},'KoAla':'swDan','LtxBn':_0x179000(0x640,0x4e1,0x583,0x4c1)+'取图像数据。','llDxq':_0x179000(0x47a,0x6c8,0x5e3,0x73b)+'/png;base6'+'4,','BWJPj':function(_0x545dfe,_0x53dce7){return _0x545dfe(_0x53dce7);},'AKukb':_0x179000(0x5f9,0x428,0x57a,0x439)+'化为\x20data\x20UR'+'L。','agTUJ':function(_0x7b9d05,_0x1b6006){return _0x7b9d05!==_0x1b6006;},'emLCZ':_0x179000(0x606,0x37f,0x4be,0x4bd)};_0x77b6ab[_0x358b39(0x275,0x257,0x227,0x298)](clearLog),_0x77b6ab['nDOlZ'](addLog,'开始\x20NovelAI'+_0x179000(0x54f,0x45b,0x4b7,0x59d)+'端为'+extension_settings[extensionName][_0x358b39(0x1a1,0x92,0x17c,-0x76)]),_0x77b6ab[_0x179000(0x43f,0x359,0x4c0,0x38e)](addLog,'请求尺寸:\x20宽度\x20-'+'\x20'+_0x77b6ab['UmqtG'](_0x10bf95,'默认')+',\x20高度\x20-\x20'+(_0x177cfa||'默认')),console[_0x358b39(0x204,0x1e4,0x293,0x231)](_0x77b6ab['oRovm'],_0x3314ec);let _0x4acc97=_0x30c98a;_0x3314ec=processCharacterPrompt(_0x3314ec),_0x30c98a=_0x77b6ab[_0x358b39(0x331,0x35d,0x222,0x35c)](processCharacterPrompt,_0x30c98a),_0x3314ec=await stripChineseAnnotations(_0x3314ec),_0x30c98a=await _0x77b6ab[_0x358b39(0x2db,0x323,0x498,0x488)](stripChineseAnnotations,_0x30c98a),console[_0x358b39(0x183,0x1e4,0x346,0x22f)](_0x358b39(-0xf0,0x75,0x3a,0x77)+_0x358b39(0x231,0x246,0x26b,0xed),_0x3314ec);if(_0x77b6ab['SQcDa'](extension_settings[extensionName]['novelaiApi'],_0x77b6ab[_0x358b39(0x8,0x13f,0x143,0x23a)])){if(_0x77b6ab['kRxQf'](_0x77b6ab[_0x358b39(0x2ac,0x12e,0x1f,-0x1c)],_0x179000(0x5d9,0x5bc,0x70a,0x595))){_0x77b6ab[_0x179000(0x6f5,0x7b0,0x74f,0x8c4)](_0x4826b3,_0x358b39(0x8b,0x1bd,0x30d,0x2fc)+'坐标的提示词字符串。'),_0x58090c=_0x77b6ab[_0x358b39(0x1f0,0x35d,0x475,0x2de)](_0xb1903e,_0x3d80f3),_0xf2220c=_0x5badf6[_0x77b6ab['ioRav']];for(let _0x3b30d0=-0xe*0x28+-0x1f48+0x30b*0xb;_0x77b6ab[_0x358b39(0x213,0x15e,0x293,0x1c9)](_0x3b30d0,-0x1ae2+-0x1354+0x2e3a*0x1);_0x3b30d0++){_0x57b84c['Character\x20'+_0x3b30d0+_0x358b39(0x4a4,0x35e,0x407,0x39b)]&&(_0x4adc45=_0x77b6ab[_0x179000(0x504,0x50d,0x56b,0x442)](_0x22ffe6,',\x20')+_0x11e4fe[_0x358b39(0x1c8,0x1ed,0x2f3,0xe9)+_0x3b30d0+_0x358b39(0x2bc,0x35e,0x313,0x48f)]);}}else{_0x77b6ab['bmdss'](addLog,_0x77b6ab[_0x358b39(0x234,0x277,0x38c,0x34e)]),toastr[_0x358b39(-0x9c,0x73,0x1f,0x175)](_0x77b6ab[_0x358b39(0x158,0x277,0x3ca,0x2a9)]);throw new Error(_0x77b6ab[_0x358b39(0x294,0x277,0x24a,0x25c)]);}}const _0x6dd4f7=_0x30c98a&&_0x77b6ab['GvbNH'](_0x30c98a[_0x358b39(0x398,0x2ac,0x279,0x236)](),'')?_0x30c98a:_0x3314ec;addLog(_0x179000(0x644,0x5c0,0x693,0x757)+_0x6dd4f7);let _0x213f3b=![];_0x6dd4f7[_0x179000(0x7f0,0x62f,0x68b,0x665)](_0x77b6ab['ioRav'])&&(_0x77b6ab[_0x358b39(0x94,0x1d9,0x14c,0x1e6)](extension_settings[extensionName][_0x358b39(0x265,0x168,0x1de,0xc6)+'e'],_0x358b39(0x325,0x237,0x3b2,0x300)+'ion-4-cura'+_0x179000(0x59c,0x371,0x4af,0x58a)+'w')||_0x77b6ab[_0x358b39(0x327,0x1d9,0x329,0x160)](extension_settings[extensionName][_0x179000(0x435,0x65a,0x55a,0x525)+'e'],_0x77b6ab[_0x358b39(0x211,0x1ef,0x196,0x227)])||extension_settings[extensionName][_0x358b39(0xf1,0x168,0x151,-0xe)+'e']==_0x77b6ab[_0x179000(0x62b,0x4d2,0x606,0x4d5)]||_0x77b6ab[_0x358b39(0x19a,0x109,0x265,0x1c1)](extension_settings[extensionName][_0x358b39(0x149,0x168,0x2bc,0x16d)+'e'],_0x77b6ab[_0x179000(0x4aa,0x4dc,0x5ef,0x6e0)]))&&(_0x213f3b=!![]);_0x77b6ab[_0x358b39(0x379,0x2ff,0x21b,0x18c)](addLog,'是否启用分角色模式\x20'+'(Divide_ro'+_0x358b39(0x343,0x1d2,0xf8,0x227)+_0x213f3b);let _0x2de8c8=extension_settings[extensionName]['novelaiApi'],_0x178cc5='';if(_0x77b6ab['SjrOM'](extension_settings[extensionName][_0x179000(0x659,0x5e7,0x530,0x5a0)+'i'],'')&&_0x77b6ab[_0x179000(0x642,0x666,0x6ff,0x7fe)](extension_settings[extensionName]['novelaimod'+'e'],_0x77b6ab[_0x179000(0x614,0x51d,0x5a1,0x4ff)]))_0x178cc5='rating:gen'+'eral,\x20best'+_0x358b39(0x203,0x172,0x20,0xd4)+_0x358b39(0x14,0x147,0x110,0x235)+_0x179000(0x56d,0x6c8,0x5b1,0x6d5)+_0x358b39(0x268,0x227,0x33d,0x16c);else{if(_0x77b6ab[_0x358b39(0x1da,0x262,0x2ec,0x286)](extension_settings[extensionName][_0x179000(0x460,0x65f,0x530,0x48b)+'i'],'')&&extension_settings[extensionName][_0x358b39(0x18,0x168,0x1e,0xdd)+'e']==_0x358b39(0x2a3,0x237,0x15f,0x331)+_0x358b39(-0x4f,0x94,0xa7,0x185))_0x178cc5=_0x358b39(-0x71,0xc8,0x9,-0xb7)+_0x358b39(-0x8c,0x88,-0xaf,0x15e)+_0x179000(0x376,0x663,0x4e2,0x47d)+_0x179000(0x419,0x4e1,0x4c1,0x3d1)+_0x358b39(0x1bd,0x182,0x26a,0x2df);else{if(_0x77b6ab[_0x179000(0x706,0x4e5,0x654,0x759)](extension_settings[extensionName]['AQT_novela'+'i'],'')&&_0x77b6ab[_0x358b39(0x43c,0x30d,0x342,0x2d8)](extension_settings[extensionName][_0x179000(0x60a,0x501,0x55a,0x463)+'e'],_0x179000(0x4ba,0x5e7,0x629,0x53a)+_0x358b39(0x3b2,0x285,0x1c4,0x3d9)+'ll'))_0x178cc5=_0x77b6ab[_0x179000(0x5c5,0x698,0x590,0x4e4)];else{if(_0x77b6ab[_0x179000(0x729,0x5c8,0x654,0x7b7)](extension_settings[extensionName][_0x179000(0x539,0x4eb,0x530,0x627)+'i'],'')&&extension_settings[extensionName][_0x358b39(0x53,0x168,0xcf,0x290)+'e']==_0x179000(0x52c,0x743,0x629,0x508)+_0x179000(0x6fe,0x624,0x763,0x63e)+_0x179000(0x6b2,0x686,0x64d,0x53b))_0x178cc5=_0x77b6ab[_0x179000(0x539,0x51a,0x625,0x5bb)];else{if(_0x77b6ab[_0x179000(0x52b,0x507,0x4fc,0x54c)](extension_settings[extensionName][_0x179000(0x648,0x4b1,0x530,0x4fb)+'i'],'')&&_0x77b6ab['aVZbF'](extension_settings[extensionName][_0x179000(0x4ba,0x4f7,0x55a,0x620)+'e'],_0x77b6ab['esSDr'])){if(_0x77b6ab[_0x358b39(0x146,0x27f,0x391,0x204)](_0x77b6ab['oIgRA'],_0x179000(0x5d4,0x673,0x6e5,0x729)))_0x178cc5=_0x358b39(0x1e9,0x2bc,0x3fe,0x406)+_0x358b39(0x1b1,0x288,0x2a2,0x244)+_0x179000(0x60a,0x70e,0x610,0x55d)+_0x358b39(0x41,0x1ae,0x274,0x171)+_0x179000(0x72f,0x720,0x61d,0x5ba)+'urdres';else{_0x77b6ab[_0x358b39(0x410,0x35d,0x4ac,0x314)](_0xfd0308,_0x179000(0x6b6,0x746,0x6e8,0x6ff)+_0x358b39(0x12b,0x1c5,0xc9,0x244)+_0x358b39(0x4a4,0x364,0x3dc,0x38c)+_0x5ba7f5[_0x358b39(0x345,0x2f7,0x398,0x40b)]);const _0x3d124b={};return _0x3d124b['eventType']=_0x1bcc2e[_0x358b39(0x40a,0x2f7,0x31e,0x1ca)],_0x3d124b[_0x179000(0x58f,0x530,0x5e4,0x63d)]=_0x25e945['image'],_0x3d124b;}}}}}}_0x77b6ab['RLXDn'](addLog,_0x358b39(0x1de,0x155,0x139,-0x12)+_0x179000(0x6ea,0x646,0x6d2,0x648)+(_0x178cc5||'无'));let _0x1a84fb='',_0x47ecd4={},_0x32fa17='',_0x3de02f='';if(_0x213f3b){_0x77b6ab[_0x179000(0x58f,0x734,0x60f,0x6e9)](addLog,_0x77b6ab[_0x358b39(0x17f,0xfe,0x15e,0x195)]),_0x47ecd4=_0x77b6ab[_0x358b39(0x316,0x279,0x100,0x282)](parsePromptStringWithCoordinates,_0x6dd4f7),_0x32fa17=_0x47ecd4[_0x77b6ab[_0x179000(0x53a,0x75f,0x67f,0x712)]];for(let _0x55b2f3=0x4*-0x41b+-0x24f8+0x3565;_0x77b6ab[_0x179000(0x5b1,0x440,0x550,0x4fa)](_0x55b2f3,0x5*-0x6c7+0x2f*0x1c+0x1cc3);_0x55b2f3++){if(_0x77b6ab['Llqkx'](_0x77b6ab['xIXKz'],_0x77b6ab[_0x358b39(0x269,0x2ba,0x1ef,0x39a)])){if(_0x47ecd4['Character\x20'+_0x55b2f3+_0x358b39(0x25a,0x35e,0x44d,0x1f4)]){if(_0x77b6ab[_0x358b39(0x15f,0xb9,0x230,0xf0)]('VWnUh',_0x77b6ab[_0x358b39(0x32,0x158,0x170,0x14a)]))_0x3de02f=_0x77b6ab['IWpld'](_0x77b6ab[_0x358b39(0x365,0x251,0x394,0xf1)](_0x3de02f,',\x20'),_0x47ecd4[_0x358b39(0x29b,0x1ed,0xa7,0x1ec)+_0x55b2f3+_0x358b39(0x40a,0x35e,0x3fe,0x343)]);else return _0xc0e809;}}else throw new _0x170eaa(_0x77b6ab[_0x358b39(0x1e3,0x320,0x373,0x33a)]);}}else _0x77b6ab[_0x179000(0x67a,0x740,0x6c4,0x57a)]===_0x77b6ab[_0x179000(0x719,0x6bb,0x5f6,0x495)]?_0xf4b8fd=_0x77b6ab['qYaQv']:(_0x77b6ab[_0x358b39(0x220,0x18e,0x2ee,0x36)](addLog,_0x77b6ab[_0x179000(0x807,0x561,0x69d,0x575)]),_0x32fa17=_0x6dd4f7);let {modifiedPrompt:_0x2f747f,insertions:_0x1966dd}=await _0x77b6ab[_0x179000(0x678,0x5c4,0x5e5,0x567)](prompt_replace,_0x32fa17,_0x3de02f);if(_0x213f3b&&_0x77b6ab[_0x179000(0x6ca,0x72f,0x5cb,0x630)](extension_settings[extensionName][_0x179000(0x557,0x37c,0x484,0x331)],_0x77b6ab[_0x179000(0x385,0x641,0x4e7,0x667)]))for(let _0x523a13=0x2*-0x363+-0x217*-0xe+-0x167b;_0x77b6ab[_0x358b39(0xc2,0x1a6,0x90,0x2b4)](_0x523a13,-0x1db*0x1+0x97e+0x79f*-0x1);_0x523a13++){if(_0x77b6ab[_0x358b39(0x16e,0x2b9,0x3ee,0x2b2)](_0x77b6ab['YoPWx'],_0x77b6ab[_0x179000(0x55a,0x45f,0x52f,0x3e4)]))_0x1b5b65=![];else{if(_0x47ecd4[_0x358b39(0x305,0x1ed,0x1fd,0x115)+_0x523a13+'\x20Prompt']){if(_0x77b6ab[_0x358b39(0x35a,0x321,0x3cb,0x2bd)]('LUPaY',_0x77b6ab[_0x358b39(0x266,0x2c8,0x1ea,0x25e)]))_0x2f747f=_0x77b6ab['GSklw'](_0x77b6ab[_0x179000(0x56e,0x555,0x5b6,0x548)](_0x2f747f,_0x77b6ab[_0x358b39(0x33a,0x21c,0x31e,0x294)]),_0x77b6ab[_0x358b39(0x236,0x323,0x2cc,0x3ca)](prompt_replace_for_character,_0x47ecd4[_0x358b39(0xb2,0x1ed,0x359,0x84)+_0x523a13+_0x358b39(0x22e,0x35e,0x340,0x39e)]));else{const _0x18ced0=_0x2947d1[_0x358b39(0x3e1,0x273,0x339,0x11f)](_0x1164f4);if(_0x18ced0&&_0x18ced0['event_type']){_0x255290(_0x358b39(0x37f,0x2f6,0x20a,0x315)+_0x358b39(0xb2,0x1c5,0x190,0xe2)+'型\x20-\x20'+_0x18ced0['event_type']);const _0x4b066c={};return _0x4b066c[_0x358b39(0x11b,0xd2,0x214,-0x83)]=_0x18ced0[_0x179000(0x5ae,0x6b7,0x6e9,0x5ea)],_0x4b066c[_0x179000(0x47d,0x4b5,0x5e4,0x759)]=_0x18ced0[_0x358b39(0x411,0x2a9,0x302,0x32a)],_0x4b066c;}}}}}_0x1a84fb=await _0x77b6ab[_0x358b39(0xad,0x22d,0x1f7,0x1f7)](zhengmian,extension_settings[extensionName][_0x358b39(0x3d1,0x33d,0x483,0x2df)][extension_settings[extensionName][_0x179000(0x66e,0x58c,0x692,0x75c)+'velai']][_0x358b39(0x2ca,0x14f,-0x1d,0x1e4)+'t'],_0x2f747f,extension_settings[extensionName][_0x179000(0x750,0x6da,0x72f,0x66e)][extension_settings[extensionName][_0x358b39(0x3d7,0x2a0,0x32b,0x2eb)+_0x358b39(0x256,0x1ee,0x1bc,0x1e3)]][_0x358b39(0x17,0x14f,0x15f,0x72)+_0x358b39(0x195,0x30c,0x3c2,0x483)],_0x178cc5,_0x1966dd);_0x77b6ab[_0x179000(0x5cf,0x5ef,0x5cb,0x60b)](extension_settings[extensionName]['addFurryDa'+_0x358b39(0x2ab,0x2b8,0x3a9,0x2e3)],_0x77b6ab[_0x179000(0x453,0x574,0x5b2,0x6bb)])&&(_0x1a84fb=_0x77b6ab[_0x179000(0x573,0x5a9,0x609,0x653)](_0x77b6ab[_0x179000(0x57a,0x3b8,0x504,0x3a4)],_0x1a84fb),addLog(_0x77b6ab['Wwrwu']));let _0x142e19='';function _0x358b39(_0x3e60b0,_0x12cfde,_0x183b01,_0x4d3ded){return _0x49df(_0x12cfde- -0x7b,_0x3e60b0);}_0x77b6ab[_0x179000(0x681,0x589,0x6c8,0x675)](addLog,_0x358b39(0x1d8,0x330,0x482,0x2f6)+extension_settings[extensionName]['novelaimod'+'e']+(_0x358b39(0xc3,0x100,0x1cc,0x24a)+'\x20(')+extension_settings[extensionName]['UCP_novela'+'i']+(_0x179000(0x6e2,0x6dd,0x719,0x7da)+'..'));if(_0x77b6ab[_0x179000(0x395,0x605,0x4fb,0x545)](extension_settings[extensionName][_0x358b39(0x11f,0x168,0xec,0x1dc)+'e'],_0x77b6ab['esSDr'])&&_0x77b6ab[_0x179000(0x54a,0x4a1,0x4c7,0x569)](extension_settings[extensionName]['UCP_novela'+'i'],_0x77b6ab[_0x358b39(0x44f,0x35c,0x1ea,0x222)])){if(_0x77b6ab[_0x358b39(0x43c,0x2df,0x34d,0x2bd)](_0x358b39(0x1b5,0x128,0xdf,-0x4e),_0x179000(0x4a1,0x54a,0x51a,0x618)))throw new _0x13397c(_0x358b39(0x19e,0x191,0x1a1,0xef)+_0x358b39(0x49,0xac,0x3f,-0x9c));else _0x142e19=_0x77b6ab[_0x358b39(0x1b6,0xda,-0xa4,-0x7c)];}if(_0x77b6ab[_0x179000(0x55d,0x7ba,0x680,0x796)](extension_settings[extensionName][_0x179000(0x554,0x4d9,0x55a,0x50d)+'e'],_0x77b6ab[_0x358b39(-0x42,0x119,0x48,0x1c2)])&&_0x77b6ab[_0x358b39(0x141,0x175,0x87,0x2dc)](extension_settings[extensionName][_0x179000(0x508,0x4c2,0x556,0x4ab)+'i'],_0x77b6ab[_0x179000(0x76f,0x5d6,0x5fd,0x728)])){if(_0x77b6ab[_0x179000(0x6f8,0x74c,0x6d1,0x80f)](_0x179000(0x5ce,0x65f,0x707,0x591),'EyXtX'))_0x142e19=_0x77b6ab[_0x179000(0x5c6,0x6bb,0x5d0,0x5d5)];else{if(_0x3e270f['Character\x20'+_0x2da3be+'\x20Prompt']){const _0x2b01cd={};_0x2b01cd[_0x358b39(0x44e,0x2f2,0x39d,0x199)+'on']=_0x418605[_0x179000(0x60f,0x661,0x5df,0x503)+_0x2e3d51+_0x358b39(0x24b,0x1e8,0x2c7,0x68)]?_0x21ae8b[_0x179000(0x6c6,0x56e,0x5df,0x653)+_0x3698a1+_0x179000(0x6ca,0x64f,0x5da,0x482)]:_0x77b6ab[_0x179000(0x716,0x72a,0x6b5,0x7a2)],_0x2b01cd['centers']=[_0x2f5622[_0x179000(0x45f,0x5a2,0x5df,0x4ca)+_0x2b31be+(_0x358b39(0x163,0x19c,0x27f,0x2cd)+'es')]],_0x469719[_0x358b39(0x355,0x342,0x476,0x385)][_0x179000(0x62f,0x6ea,0x6e4,0x650)+'ons'][_0x179000(0x5e3,0x6e6,0x686,0x625)](_0x2b01cd);}}}_0x77b6ab[_0x179000(0x5c0,0x4fb,0x567,0x5ce)](extension_settings[extensionName][_0x179000(0x47f,0x467,0x55a,0x52e)+'e'],'nai-diffus'+'ion-3')&&_0x77b6ab[_0x179000(0x639,0x5df,0x680,0x793)](extension_settings[extensionName][_0x358b39(0x1fb,0x164,0x2c7,0x269)+'i'],_0x77b6ab['ikTAY'])&&(_0x142e19=_0x77b6ab['fHihR']);if(_0x77b6ab[_0x358b39(0x24e,0x121,0x11f,0x17)](extension_settings[extensionName][_0x179000(0x5f1,0x406,0x55a,0x674)+'e'],_0x358b39(0x2e5,0x237,0x24f,0x224)+'ion-4-full')&&extension_settings[extensionName]['UCP_novela'+'i']==_0x77b6ab[_0x179000(0x50e,0x600,0x559,0x6aa)]){}extension_settings[extensionName][_0x358b39(0x1f8,0x168,0x202,0xbb)+'e']==_0x77b6ab['UWPGc']&&_0x77b6ab['SQcDa'](extension_settings[extensionName]['UCP_novela'+'i'],_0x77b6ab[_0x358b39(0x4c8,0x35c,0x3fc,0x4d9)])&&(_0x77b6ab[_0x179000(0x659,0x598,0x549,0x5ae)](_0x77b6ab[_0x358b39(0x1a0,0x104,0x25a,0x52)],_0x77b6ab[_0x179000(0x4eb,0x52b,0x4f6,0x65d)])?(_0x49848b['on'](_0x18bcca[_0x358b39(0x1ef,0x139,0xb4,0x20e)+_0x358b39(0x2d2,0x156,0x2cf,0x111)+'ST'],_0x241449),_0x77b6ab['ExVYJ'](_0x2174ca,_0x179000(0x643,0x507,0x59d,0x5be)+_0x358b39(0x1c0,0x242,0x3c1,0x206))):_0x142e19=_0x77b6ab[_0x179000(0x643,0x745,0x72d,0x7b2)]);_0x77b6ab[_0x179000(0x4b3,0x663,0x4fb,0x477)](extension_settings[extensionName][_0x179000(0x540,0x573,0x55a,0x549)+'e'],_0x77b6ab['UWPGc'])&&extension_settings[extensionName][_0x179000(0x4b8,0x69c,0x556,0x52c)+'i']==_0x77b6ab['jPAYs']&&(_0x142e19=_0x77b6ab[_0x179000(0x4f3,0x502,0x4e9,0x53d)]);if(_0x77b6ab[_0x179000(0x452,0x6f4,0x5cb,0x587)](extension_settings[extensionName][_0x358b39(0x250,0x168,0x22a,0x233)+'e'],_0x358b39(0x398,0x237,0x189,0x1fa)+_0x179000(0x6a1,0x5c3,0x5bb,0x4fe)+_0x358b39(0x1d3,0xbd,0x119,-0x10)+'w')&&extension_settings[extensionName]['UCP_novela'+'i']==_0x77b6ab[_0x358b39(0x294,0x167,0x25,0x75)]){}_0x77b6ab[_0x358b39(0x1b1,0x1d9,0x11d,0x16c)](extension_settings[extensionName][_0x358b39(0x111,0x168,0xb1,0xd)+'e'],_0x77b6ab[_0x358b39(0x87,0x1af,0x215,0x2b4)])&&_0x77b6ab[_0x179000(0x72f,0x6bd,0x680,0x6a6)](extension_settings[extensionName]['UCP_novela'+'i'],_0x77b6ab[_0x358b39(0x343,0x35c,0x27d,0x48f)])&&(_0x77b6ab[_0x358b39(0x21a,0x1a1,0x2a9,0xa0)](_0x77b6ab['WcHwx'],_0x77b6ab[_0x358b39(0xf6,0x19b,0x2c,0xde)])?_0x142e19=_0x77b6ab['fklTg']:_0xc97d00=_0x179000(0x3ee,0x4b3,0x478,0x3f5)+_0x358b39(0x1df,0x133,0x2a5,-0x2)+_0x179000(0x712,0x7df,0x66a,0x63b)+_0x358b39(0x343,0x256,0x3af,0x1fc)+_0x179000(0x6d3,0x832,0x6d5,0x5d5)+_0x358b39(0x213,0x146,-0x35,0x107)+_0x179000(0x619,0x480,0x4a1,0x53f)+'quality,\x20j'+_0x179000(0x666,0x7fc,0x6cc,0x70c)+_0x179000(0x45d,0x402,0x50c,0x537)+_0x179000(0x6d4,0x41c,0x572,0x51d)+_0x358b39(0x12f,0x12b,0x1fc,-0x1c)+'ic\x20aberrat'+'ion,\x20logo,'+_0x358b39(0x141,0x123,0x68,0x22d)+'gnature,\x20m'+_0x358b39(0x3d,0xc7,0x1e4,0x1d3)+_0x179000(0x7af,0x7bb,0x759,0x8ab)+_0x179000(0x597,0x510,0x58f,0x441)+_0x179000(0x69d,0x674,0x733,0x805)+_0x358b39(0x166,0xfa,0x114,0x1d0)+_0x358b39(0x51,0x142,-0xc,0x120)+'e');_0x77b6ab['gzFOf'](extension_settings[extensionName][_0x358b39(0x8f,0x168,0x49,0xd9)+'e'],_0x77b6ab[_0x179000(0x55d,0x572,0x5a1,0x570)])&&_0x77b6ab[_0x179000(0x596,0x70d,0x6ff,0x5f3)](extension_settings[extensionName][_0x179000(0x4de,0x667,0x556,0x5fd)+'i'],_0x77b6ab[_0x358b39(0x190,0x20b,0x23b,0x219)])&&(_0x142e19=_0x77b6ab['lwuUb']);extension_settings[extensionName][_0x358b39(0xa3,0x168,0x54,0x3e)+'e']==_0x77b6ab[_0x358b39(0x272,0x1fd,0x146,0x162)]&&_0x77b6ab['TvTxl'](extension_settings[extensionName][_0x179000(0x40d,0x426,0x556,0x510)+'i'],_0x358b39(0x1ff,0x235,0x383,0x2fc)+'s')&&(_0x142e19=_0x77b6ab['qYaQv']);if(_0x77b6ab[_0x179000(0x5f3,0x720,0x5b0,0x5a8)](extension_settings[extensionName][_0x179000(0x653,0x605,0x55a,0x4c1)+'e'],_0x77b6ab[_0x179000(0x704,0x527,0x5ef,0x6bb)])&&_0x77b6ab[_0x358b39(-0x45,0x8e,0x82,0x1fe)](extension_settings[extensionName][_0x179000(0x67f,0x464,0x556,0x63b)+'i'],_0x77b6ab[_0x179000(0x753,0x8bd,0x74e,0x5d6)])){if(_0x77b6ab[_0x179000(0x60a,0x747,0x61c,0x6c4)]('CHmlJ',_0x77b6ab[_0x358b39(0x242,0x234,0x32e,0x357)]))_0x142e19=_0x358b39(0x22,0x86,0x5e,-0x82)+_0x358b39(0x1dd,0xe5,0x9b,-0x78)+_0x179000(0x61c,0x586,0x4e8,0x642)+_0x179000(0x4fb,0x318,0x47c,0x4d9)+_0x358b39(0x14b,0x2b0,0x40c,0x21a)+_0x179000(0x476,0x46b,0x4db,0x538)+_0x179000(0x31a,0x398,0x46e,0x3c8)+_0x358b39(0x20d,0x116,-0x2,0x15d)+'ity,\x20bad\x20q'+_0x179000(0x456,0x42b,0x4bd,0x4f8)+'eg\x20artifac'+'ts,\x20very\x20d'+_0x358b39(0x3b4,0x2eb,0x37a,0x180)+',\x20chromati'+'c\x20aberrati'+_0x179000(0x6d0,0x7af,0x723,0x6f6)+'ne,\x20multip'+_0x358b39(0x264,0x174,0x106,0x1f1)+_0x358b39(0x1ac,0xba,0x16d,-0x6b)+_0x358b39(0x291,0x25f,0x191,0x13b)+_0x179000(0x6e7,0x553,0x587,0x4d1)+'ative\x20spac'+'e,\x20blank\x20p'+_0x179000(0x60f,0x3f1,0x4f1,0x4a6);else{const _0x33195e={'ZKoah':function(_0x300946,_0x6c2c37){return _0x77b6ab['tUdiP'](_0x300946,_0x6c2c37);}};_0x77b6ab[_0x358b39(0x432,0x2d6,0x358,0x2f8)](_0x467eb2,_0x179000(0x53c,0x60d,0x683,0x598)+_0x358b39(0x114,0x266,0x1e7,0x171)+_0x7ff608[_0x358b39(0x246,0x249,0x25f,0x2c9)]),_0x51437a[_0x179000(0x75f,0x664,0x75f,0x6c2)](_0x77b6ab[_0x358b39(0x2cb,0x35f,0x413,0x432)])[_0x358b39(0x2b,0x159,0x21a,0x206)](function(_0x9e900f){function _0xa4b1db(_0x544e26,_0x3edfc3,_0x17d6fe,_0x36d40d){return _0x358b39(_0x544e26,_0x36d40d-0x62,_0x17d6fe-0xb5,_0x36d40d-0x119);}function _0x5d5889(_0x1a7437,_0x47d9d6,_0x4b9b1d,_0x40287a){return _0x179000(_0x1a7437,_0x47d9d6-0x189,_0x4b9b1d- -0x2c0,_0x40287a-0x1af);}_0x33195e['ZKoah'](_0x1439bc,_0xa4b1db(0x387,0x3a1,0x391,0x268)+_0x2f6ff1[_0x5d5889(0x2de,0x36d,0x37b,0x280)]+(_0x5d5889(0x346,0x2ab,0x226,0x12b)+'4，大小:\x20')+_0x9e900f['length']),_0x33195e['ZKoah'](_0x323662,_0x9e900f);})['catch'](_0x5b1e22=>{function _0x29d071(_0x302d16,_0x119fa5,_0x3fc8e7,_0x51f272){return _0x179000(_0x302d16,_0x119fa5-0xea,_0x3fc8e7- -0x693,_0x51f272-0x5c);}function _0x8ae760(_0x3fbf75,_0x44669c,_0xb887d4,_0x4f7204){return _0x179000(_0x44669c,_0x44669c-0x1ed,_0xb887d4- -0xf,_0x4f7204-0x118);}_0x77b6ab[_0x29d071(-0x22e,-0x2ac,-0x153,0x1c)](_0x73ab7b,_0x29d071(0xfc,-0x166,-0xf,0x110)+_0xd33cb2[_0x8ae760(0x4b8,0x777,0x62c,0x74a)]+_0x8ae760(0x4db,0x567,0x4e6,0x537)+_0x5b1e22[_0x29d071(0x63,0x119,0x61,0x1ad)]),_0x77b6ab[_0x8ae760(0x602,0x625,0x740,0x8a2)](_0x5f14d5,_0x5b1e22);});}}_0x77b6ab[_0x358b39(0x3cb,0x2ef,0x2df,0x323)](extension_settings[extensionName][_0x358b39(0xa3,0x168,0x146,0x3e)+'e'],_0x358b39(0x3aa,0x237,0x1b3,0x127)+'ion-4-5-cu'+_0x358b39(0xe5,0x25b,0x379,0x368))&&_0x77b6ab[_0x358b39(0x484,0x337,0x46b,0x1c9)](extension_settings[extensionName][_0x358b39(0x1b2,0x164,0x245,0x23e)+'i'],_0x77b6ab[_0x179000(0x579,0x607,0x5fd,0x623)])&&(_0x142e19=_0x77b6ab['uOZBJ']);_0x77b6ab[_0x358b39(0x1a,0x175,0x103,0x179)](extension_settings[extensionName][_0x358b39(0x257,0x168,0x21b,0x2b6)+'e'],_0x77b6ab[_0x358b39(0x2a1,0x214,0x289,0x2df)])&&_0x77b6ab[_0x358b39(0x300,0x275,0x1b7,0x1e1)](extension_settings[extensionName][_0x358b39(0x3b,0x164,0x10c,0x33)+'i'],_0x77b6ab[_0x179000(0x688,0x626,0x559,0x4dc)])&&(_0x77b6ab[_0x179000(0x462,0x544,0x5be,0x6a0)](_0x179000(0x6bf,0x73e,0x6e7,0x698),_0x77b6ab['MmnGJ'])?_0x31254f[_0x179000(0x68b,0x672,0x755,0x710)+_0x179000(0x5bb,0x745,0x6b8,0x7f6)+_0x179000(0x5f9,0x419,0x56d,0x46b)+'s'][0xac*-0x1b+-0xce5+0x1f09][_0x77b6ab[_0x179000(0x3cb,0x3af,0x4d6,0x650)]][_0x77b6ab['iRKyW']]=_0x77b6ab['wcShd']:_0x142e19=_0x77b6ab[_0x179000(0x603,0x7c7,0x64e,0x4dc)]);_0x77b6ab[_0x179000(0x703,0x7e9,0x6e1,0x580)](extension_settings[extensionName][_0x358b39(0x59,0x168,0x23c,0x41)+'e'],_0x77b6ab[_0x179000(0x6e0,0x619,0x606,0x54e)])&&_0x77b6ab[_0x358b39(0x150,0x121,0xd3,0x19b)](extension_settings[extensionName][_0x179000(0x50d,0x6c2,0x556,0x663)+'i'],_0x77b6ab['VBlJk'])&&(_0x142e19='lowres,\x20ar'+_0x179000(0x495,0x3d9,0x485,0x5c3)+_0x358b39(0x86,0x11c,0x118,0x212)+_0x179000(0x5d6,0x576,0x673,0x523)+'\x20artifacts'+',\x20worst\x20qu'+_0x358b39(0x353,0x2a7,0x235,0x166)+_0x179000(0x642,0x515,0x564,0x4d9)+'jpeg\x20artif'+_0x179000(0x562,0x57a,0x503,0x3ba)+_0x179000(0x4cf,0x45b,0x4da,0x4da)+'ng,\x20chroma'+_0x358b39(0x327,0x2f8,0x298,0x293)+_0x179000(0x4da,0x680,0x552,0x6ca)+_0x358b39(0x255,0x13b,0x214,0x29e)+_0x358b39(0xe5,0x241,0x374,0x379)+_0x358b39(0x2a4,0x228,0x220,0x241)+_0x179000(0x45a,0x400,0x4b9,0x3f5)+'ews,\x20logo,'+_0x358b39(0x436,0x2b7,0x23a,0x202)+'watermarks'+',\x20negative'+_0x179000(0x74b,0x51d,0x612,0x59b)+'ank\x20page');_0x77b6ab[_0x179000(0x6b8,0x5d1,0x5cb,0x679)](extension_settings[extensionName][_0x179000(0x3ed,0x44e,0x55a,0x5ba)+'e'],'nai-diffus'+_0x179000(0x5ea,0x50b,0x677,0x509)+'ll')&&extension_settings[extensionName]['UCP_novela'+'i']==_0x179000(0x56c,0x5c8,0x6d4,0x80c)&&(_0x142e19=_0x77b6ab[_0x179000(0x35b,0x59f,0x47e,0x479)]);if(_0x77b6ab[_0x179000(0x4e0,0x659,0x513,0x679)](extension_settings[extensionName][_0x358b39(0x1fd,0x168,0x1cf,0x282)+'e'],_0x77b6ab[_0x358b39(0x12f,0x214,0x332,0x313)])&&_0x77b6ab['TvTxl'](extension_settings[extensionName]['UCP_novela'+'i'],_0x358b39(0x15d,0xe6,0x68,0x132)+'s')){if(_0x77b6ab[_0x179000(0x5c2,0x749,0x61c,0x6ac)](_0x77b6ab[_0x179000(0x5e1,0x82f,0x73d,0x879)],_0x358b39(0x29e,0x250,0x2d6,0x39f)))return _0x230545['error'](_0x77b6ab[_0x358b39(0x216,0xa6,-0xcd,0xaa)]),_0x232cd7;else _0x142e19=_0x77b6ab['SiBdg'];}!_0x1a84fb[_0x358b39(0x3e2,0x299,0x34b,0x3ee)](_0x77b6ab[_0x358b39(0xeb,0x8b,-0xc9,-0x16)])&&(_0x142e19=_0x77b6ab[_0x358b39(0x14c,0x217,0x194,0x9d)](_0x77b6ab['sUddd'],_0x142e19));let _0x573cd7=await _0x77b6ab['nPeNB'](fumian,extension_settings[extensionName][_0x358b39(0x47e,0x33d,0x20d,0x276)][extension_settings[extensionName]['yusheid_no'+_0x358b39(0x31c,0x1ee,0xfa,0x259)]]['negativePr'+_0x179000(0x444,0x377,0x493,0x52d)],_0x142e19);function _0x179000(_0x2c2423,_0x20ef4e,_0x136b45,_0x21db38){return _0x49df(_0x136b45-0x377,_0x2c2423);}let _0x4dd798=extension_settings[extensionName][_0x358b39(0x294,0x169,0x1af,0x143)+'rds']==_0x77b6ab['PWNSZ'],_0x3c0cc4={'params_version':0x3,'width':Number(_0x10bf95?_0x10bf95:extension_settings[extensionName]['novelai_wi'+_0x358b39(0x3db,0x368,0x3da,0x487)]),'height':Number(_0x177cfa?_0x177cfa:extension_settings[extensionName][_0x179000(0x5ae,0x559,0x6ca,0x72e)+_0x179000(0x838,0x7ac,0x6c1,0x6d7)]),'scale':_0x77b6ab['suCdD'](Number,extension_settings[extensionName][_0x179000(0x63f,0x65b,0x4f4,0x62f)]),'sampler':extension_settings[extensionName][_0x179000(0x793,0x8dd,0x762,0x601)+'mpler'],'steps':_0x77b6ab['OWYaa'](Number,extension_settings[extensionName]['novelai_st'+_0x179000(0x519,0x55c,0x4df,0x5cd)]),'n_samples':0x1,'ucPreset':0x3,'qualityToggle':!![],'sm':extension_settings[extensionName]['sm']===_0x77b6ab['PWNSZ']?![]:!![],'sm_dyn':_0x77b6ab['MDoLX'](extension_settings[extensionName][_0x358b39(0x1b9,0x12a,0x122,0x1d7)],_0x179000(0x76e,0x560,0x5f3,0x654))||_0x77b6ab[_0x179000(0x7c4,0x851,0x71d,0x7e2)](extension_settings[extensionName]['sm'],_0x77b6ab[_0x179000(0x64e,0x5d2,0x685,0x6a9)])?![]:!![],'dynamic_thresholding':extension_settings[extensionName][_0x358b39(0xbf,0x183,0x15c,0x1db)+'p']===_0x77b6ab['PWNSZ']?![]:!![],'controlnet_strength':0x1,'legacy':![],'legacy_uc':![],'add_original_image':!![],'cfg_rescale':_0x77b6ab[_0x179000(0x64c,0x468,0x540,0x524)](Number,extension_settings[extensionName]['cfg_rescal'+'e']),'noise_schedule':extension_settings[extensionName][_0x179000(0x492,0x617,0x60a,0x582)],'skip_cfg_above_sigma':_0x77b6ab[_0x358b39(0x23a,0xf2,-0x17,0x8f)](extension_settings[extensionName][_0x358b39(0x175,0x225,0x2c4,0x264)+'y'],_0x77b6ab[_0x358b39(0x314,0x293,0x1d9,0x146)])?null:0x815+0x2302+-0x2b04,'legacy_v3_extend':![],'stream':_0x179000(0x687,0x46a,0x55c,0x60e),'seed':_0x77b6ab[_0x358b39(0x3ba,0x33f,0x46c,0x30d)](extension_settings[extensionName][_0x179000(0x652,0x4ae,0x5f2,0x76a)+'ed'],'0')||_0x77b6ab['cWdvx'](extension_settings[extensionName][_0x179000(0x54d,0x52e,0x5f2,0x705)+'ed'],'')?_0x77b6ab['gsimC'](generateRandomSeed):Number(extension_settings[extensionName][_0x358b39(0x307,0x200,0x21f,0x230)+'ed']),'negative_prompt':_0x573cd7,'reference_image_multiple':[],'reference_information_extracted_multiple':[],'reference_strength_multiple':[],'use_coords':_0x4dd798};if(_0x77b6ab[_0x179000(0x724,0x52d,0x6ab,0x6a6)](extension_settings[extensionName]['novelaimod'+'e'],_0x358b39(0x1d6,0x237,0x218,0x16b)+_0x179000(0x45f,0x4ae,0x58c,0x569))){if(_0x213f3b){if(_0x77b6ab['GmtAt'](_0x77b6ab[_0x358b39(0x2a9,0x290,0x290,0x3cd)],_0x77b6ab[_0x179000(0x593,0x438,0x53e,0x3f5)]))_0xaf850d=_0x77b6ab[_0x179000(0x568,0x5ac,0x687,0x7bf)];else{for(let _0x13976d=-0xc07+-0x10*-0x188+0x63c*-0x2;_0x13976d<=0xc95+0x1845+-0x5*0x75e;_0x13976d++){_0x47ecd4[_0x358b39(0x36d,0x1ed,0x171,0x17b)+_0x13976d+'\x20Prompt']&&(_0x77b6ab['UjYJt']!==_0x77b6ab[_0x179000(0x8aa,0x695,0x732,0x662)]?(_0x464c6c(_0x179000(0x67f,0x6ec,0x6e8,0x64d)+_0x358b39(0x34b,0x2aa,0x2f9,0x194)+_0x3b594e[_0x358b39(0x26c,0x302,0x1cb,0x351)]),_0x4856d4['error']('解析Msgpack消'+_0x358b39(0x312,0x362,0x2a6,0x281),_0x4c2a3d)):_0x47ecd4[_0x179000(0x4ef,0x612,0x5df,0x6ef)+_0x13976d+_0x358b39(0x2ce,0x35e,0x266,0x491)]=await prompt_replace_for_character(_0x47ecd4['Character\x20'+_0x13976d+_0x358b39(0x380,0x35e,0x2b7,0x4aa)]));}let _0x84eaa5=[];for(let _0x4d3659=0x2be+0x3*-0xb9b+0x2014;_0x77b6ab[_0x358b39(0x1bf,0x1a6,0x275,0xa1)](_0x4d3659,0x1e46+-0x206*-0x11+0x40a8*-0x1);_0x4d3659++){_0x47ecd4[_0x179000(0x557,0x546,0x5df,0x6de)+_0x4d3659+'\x20Prompt']&&(_0x84eaa5[_0x77b6ab[_0x179000(0x64c,0x850,0x6d6,0x6e1)](_0x4d3659,-0x175*0x17+-0x18c3+0x3a47)]={'enabled':!![],'prompt':_0x47ecd4['Character\x20'+_0x4d3659+'\x20Prompt'],'center':_0x47ecd4['Character\x20'+_0x4d3659+('\x20coordinat'+'es')],'uc':_0x47ecd4['Character\x20'+_0x4d3659+_0x179000(0x505,0x47d,0x5da,0x684)]?_0x47ecd4[_0x358b39(0x2e6,0x1ed,0x340,0x1b5)+_0x4d3659+_0x179000(0x4f6,0x4fc,0x5da,0x69e)]:_0x77b6ab[_0x358b39(0x2e2,0x2c3,0x3cb,0x167)]});}const _0x574a86={};_0x574a86[_0x358b39(0x1be,0xb6,-0x3d,-0xbe)+'on']=_0x573cd7,_0x574a86[_0x179000(0x5b0,0x56a,0x6e4,0x5d3)+_0x179000(0x708,0x581,0x65b,0x71f)]=[];const _0x2ad790={};_0x2ad790[_0x179000(0x664,0x896,0x734,0x78d)]=_0x574a86,_0x2ad790[_0x358b39(0x188,0x208,0x193,0x36a)]=![];let _0xa725d5=_0x2ad790;for(let _0x185724=-0x205+-0x13b2+0xadc*0x2;_0x77b6ab[_0x358b39(0x175,0x1a6,0x1c7,0x2cd)](_0x185724,-0x1f*-0xef+0x3*0x36f+0x1*-0x273a);_0x185724++){if(_0x47ecd4['Character\x20'+_0x185724+_0x358b39(0x3eb,0x35e,0x453,0x423)]){if(_0x77b6ab[_0x179000(0x502,0x4c9,0x623,0x4f3)](_0x358b39(0x167,0xa7,0x83,-0xa2),_0x77b6ab[_0x358b39(0x21a,0x141,0x14d,0x27f)])){const _0x25bc91={};_0x25bc91[_0x179000(0x859,0x78a,0x6e4,0x64d)+'on']=_0x47ecd4[_0x358b39(0xf0,0x1ed,0x282,0x1dd)+_0x185724+'\x20UC']?_0x47ecd4[_0x358b39(0x26a,0x1ed,0x323,0x160)+_0x185724+_0x358b39(0x209,0x1e8,0x2c5,0x203)]:_0x77b6ab[_0x358b39(0x1cb,0x2c3,0x27e,0x1a0)],_0x25bc91['centers']=[_0x47ecd4[_0x179000(0x5a7,0x75b,0x5df,0x6f8)+_0x185724+('\x20coordinat'+'es')]],_0xa725d5[_0x358b39(0x27d,0x342,0x32e,0x22e)]['char_capti'+_0x179000(0x5d0,0x5ec,0x65b,0x666)][_0x179000(0x61a,0x802,0x686,0x7c2)](_0x25bc91);}else _0x36c464=_0x77b6ab[_0x179000(0x5d1,0x531,0x590,0x691)];}}const _0x2ee28a={};_0x2ee28a[_0x179000(0x56a,0x423,0x4a8,0x53f)+'on']=_0x1a84fb,_0x2ee28a[_0x179000(0x848,0x784,0x6e4,0x6aa)+_0x358b39(0x147,0x269,0x173,0x3d9)]=[];const _0xc1fa22={};_0xc1fa22[_0x179000(0x7ae,0x781,0x734,0x75b)]=_0x2ee28a,_0xc1fa22[_0x358b39(-0x36,0xc2,0x23d,0x100)]=_0x4dd798,_0xc1fa22['use_order']=!![];let _0x1eadae=_0xc1fa22;for(let _0x3de69e=-0x7*-0x47f+-0x9c*0x1a+-0xfa0;_0x77b6ab[_0x179000(0x572,0x48c,0x596,0x635)](_0x3de69e,0x1d2e+-0x25e7+0x8bd);_0x3de69e++){if(_0x47ecd4[_0x179000(0x6a2,0x642,0x5df,0x4a6)+_0x3de69e+_0x358b39(0x474,0x35e,0x3c7,0x390)]){if(_0x77b6ab[_0x179000(0x4fc,0x57c,0x555,0x53d)]!==_0x77b6ab['PKKry']){const _0x586fc3={};_0x586fc3[_0x179000(0x7c3,0x771,0x6e4,0x7ef)+'on']=_0x47ecd4[_0x358b39(0x14e,0x1ed,0x1cf,0xf8)+_0x3de69e+'\x20Prompt'],_0x586fc3['centers']=[_0x47ecd4['Character\x20'+_0x3de69e+(_0x358b39(0x1d5,0x19c,0x12f,0x10e)+'es')]],_0x1eadae[_0x179000(0x775,0x764,0x734,0x6e1)][_0x358b39(0x382,0x2f2,0x40f,0x2ab)+'ons']['push'](_0x586fc3);}else!_0x4712e9[_0x358b39(0x359,0x30e,0x2e0,0x2b6)+'NovelAILis'+'tener']&&(_0xd03b75[_0x358b39(0x424,0x30e,0x222,0x466)+'NovelAILis'+_0x358b39(0x18a,0x110,0x227,0x1c7)]=!![],_0x77b6ab[_0x358b39(0x3b2,0x310,0x205,0x2ca)](_0x2f91bf)),_0x57da22();}}_0x3c0cc4={..._0x3c0cc4,'characterPrompts':_0x84eaa5,'v4_prompt':_0x1eadae,'v4_negative_prompt':_0xa725d5,'add_original_image':!![],'skip_cfg_above_sigma':_0x77b6ab[_0x358b39(0x147,0xf2,0x1d3,0x12f)](extension_settings[extensionName][_0x179000(0x70b,0x780,0x617,0x61c)+'y'],_0x179000(0x47a,0x668,0x5f3,0x52c))?null:-0x19f4+-0xe3*0x25+0x3ad6+0.34305679446364223},_0x77b6ab[_0x358b39(0x182,0x10a,0x128,0x7d)](extension_settings[extensionName][_0x179000(0x624,0x701,0x617,0x6f1)+'y'],_0x179000(0x652,0x6a1,0x5f3,0x5c8))&&_0x77b6ab[_0x179000(0x542,0x583,0x480,0x3a3)](extension_settings[extensionName]['novelaimod'+'e'],_0x77b6ab[_0x179000(0x5f6,0x758,0x5e1,0x6bc)])&&(_0x3c0cc4[_0x77b6ab[_0x179000(0x348,0x563,0x481,0x5eb)]]=-0x7ec+0x1790+0x31d*-0x5),_0x77b6ab[_0x179000(0x62d,0x64c,0x69f,0x617)](extension_settings[extensionName][_0x358b39(0xad,0x225,0x1b2,0x274)+'y'],_0x358b39(0xea,0x201,0x19f,0x355))&&(_0x77b6ab['UeUwi'](extension_settings[extensionName]['novelaimod'+'e'],_0x77b6ab[_0x358b39(0x306,0x1fd,0x2a6,0x1d7)])||_0x77b6ab[_0x179000(0x3b4,0x514,0x489,0x43f)](extension_settings[extensionName]['novelaimod'+'e'],_0x77b6ab[_0x358b39(0x11f,0x214,0x207,0x21a)]))&&(_0x77b6ab[_0x358b39(0x1d8,0x2fd,0x1c3,0x201)]===_0x77b6ab['HuWht']?_0x3c0cc4[_0x77b6ab['MscjG']]=0x110f*0x1+-0x1*0x17+-0x10bd+0.04722600415217215:_0xae5ac9=_0x77b6ab[_0x179000(0x5d8,0x30c,0x471,0x57c)]),_0x3c0cc4={'autoSmea':![],'normalize_reference_strength_multiple':![],'inpaintImg2ImgStrength':0x1,'params_version':0x3,'width':_0x77b6ab[_0x358b39(0x260,0x2ff,0x356,0x200)](Number,_0x10bf95?_0x10bf95:extension_settings[extensionName][_0x358b39(0x266,0xfc,0x23d,0x275)+_0x358b39(0x24c,0x368,0x420,0x416)]),'height':_0x77b6ab['TwLMp'](Number,_0x177cfa?_0x177cfa:extension_settings[extensionName]['novelai_he'+_0x358b39(0x34b,0x2cf,0x31d,0x238)]),'scale':Number(extension_settings[extensionName][_0x358b39(0x204,0x102,0x23b,0x1ed)]),'sampler':extension_settings[extensionName][_0x179000(0x833,0x5eb,0x762,0x6db)+'mpler'],'steps':_0x77b6ab[_0x179000(0x34c,0x45e,0x4c0,0x348)](Number,extension_settings[extensionName][_0x179000(0x4ff,0x448,0x5c2,0x56c)+_0x358b39(0x250,0xed,0x1c9,0x1e)]),'n_samples':0x1,'ucPreset':0x3,'qualityToggle':!![],'dynamic_thresholding':![],'controlnet_strength':0x1,'legacy':![],'legacy_uc':![],'add_original_image':!![],'cfg_rescale':_0x77b6ab['SCQCs'](Number,extension_settings[extensionName]['cfg_rescal'+'e']),'noise_schedule':extension_settings[extensionName][_0x179000(0x741,0x707,0x60a,0x6ab)],'skip_cfg_above_sigma':_0x77b6ab['OYciI'](extension_settings[extensionName][_0x179000(0x6b2,0x546,0x617,0x774)+'y'],_0x77b6ab[_0x358b39(0x19b,0x293,0x2d8,0x259)])?null:0x471+0x163b+0x26b*-0xb+0.34305679446364223,'legacy_v3_extend':![],'seed':_0x77b6ab[_0x179000(0x6e5,0x6c4,0x630,0x71f)](extension_settings[extensionName]['novelai_se'+'ed'],'0')||_0x77b6ab[_0x179000(0x461,0x4b8,0x5c8,0x4af)](extension_settings[extensionName][_0x179000(0x582,0x6e5,0x5f2,0x482)+'ed'],'')?_0x77b6ab[_0x358b39(0x199,0x310,0x2c4,0x419)](generateRandomSeed):_0x77b6ab['JsyPE'](Number,extension_settings[extensionName][_0x179000(0x72f,0x6a6,0x5f2,0x598)+'ed']),'negative_prompt':_0x573cd7,'use_coords':_0x4dd798,'stream':_0x77b6ab[_0x179000(0x699,0x4e6,0x5b3,0x52a)],'characterPrompts':_0x84eaa5,'v4_prompt':_0x1eadae,'v4_negative_prompt':_0xa725d5};}}else{const _0x4808b8={};_0x4808b8[_0x179000(0x4eb,0x525,0x4a8,0x44f)+'on']=_0x1a84fb,_0x4808b8['char_capti'+'ons']=[],_0x3c0cc4={'autoSmea':![],'normalize_reference_strength_multiple':![],'inpaintImg2ImgStrength':0x1,'params_version':0x3,'width':_0x77b6ab[_0x358b39(0x24f,0xce,0x21a,0x96)](Number,_0x10bf95?_0x10bf95:extension_settings[extensionName][_0x358b39(0x141,0xfc,0x23,0xb5)+'dth']),'height':_0x77b6ab[_0x358b39(0x1fc,0x148,0x113,0x24d)](Number,_0x177cfa?_0x177cfa:extension_settings[extensionName]['novelai_he'+_0x179000(0x7d4,0x5dc,0x6c1,0x6e8)]),'scale':_0x77b6ab[_0x358b39(0x99,0x171,0x26c,0xee)](Number,extension_settings[extensionName]['nai3Scale']),'sampler':extension_settings[extensionName][_0x179000(0x668,0x829,0x762,0x76c)+_0x358b39(0x168,0x15b,-0x11,0x23a)],'steps':_0x77b6ab[_0x358b39(0x3ba,0x304,0x42a,0x3fd)](Number,extension_settings[extensionName][_0x358b39(0x10b,0x1d0,0x298,0xdc)+'eps']),'n_samples':0x1,'ucPreset':0x3,'qualityToggle':![],'dynamic_thresholding':![],'controlnet_strength':0x1,'legacy':![],'legacy_uc':![],'add_original_image':!![],'cfg_rescale':_0x77b6ab[_0x179000(0x75a,0x85b,0x715,0x7de)](Number,extension_settings[extensionName][_0x179000(0x64d,0x5fe,0x696,0x6cc)+'e']),'noise_schedule':extension_settings[extensionName][_0x358b39(0x109,0x218,0x16f,0x9d)],'skip_cfg_above_sigma':_0x77b6ab[_0x179000(0x6f4,0x6b1,0x5c8,0x493)](extension_settings[extensionName]['nai3Variet'+'y'],_0x77b6ab[_0x358b39(0x25d,0x293,0x117,0x323)])?null:0x96*0x1b+0x1*-0x20bd+0x3*0x5aa+0.34305679446364223,'legacy_v3_extend':![],'seed':_0x77b6ab['cWdvx'](extension_settings[extensionName]['novelai_se'+'ed'],'0')||_0x77b6ab[_0x358b39(0xf1,0x127,0x186,0x256)](extension_settings[extensionName][_0x179000(0x76f,0x48d,0x5f2,0x4f0)+'ed'],'')?_0x77b6ab['SiqLX'](generateRandomSeed):_0x77b6ab[_0x179000(0x482,0x460,0x5d1,0x6bf)](Number,extension_settings[extensionName][_0x358b39(0x98,0x200,0x219,0xfa)+'ed']),'negative_prompt':_0x573cd7,'use_coords':_0x4dd798,'characterPrompts':[],'stream':_0x77b6ab[_0x179000(0x44a,0x546,0x5b3,0x4b6)],'v4_prompt':{'caption':_0x4808b8,'use_coords':_0x4dd798,'use_order':!![]},'v4_negative_prompt':{'caption':{'base_caption':_0x573cd7,'char_captions':[]},'legacy_uc':![]}};}}_0x77b6ab['TvTxl'](extension_settings[extensionName]['novelai_sa'+'mpler'],_0x358b39(0x275,0x132,0x147,0xc)+'cestral')&&(_0x3c0cc4[_0x77b6ab[_0x358b39(0xec,0x20d,0x1a8,0x2da)]]=![],_0x3c0cc4[_0x77b6ab[_0x179000(0x73b,0x8a4,0x75b,0x72b)]]=!![]);_0x77b6ab[_0x358b39(0x2a1,0x2c9,0x165,0x33d)](extension_settings[extensionName]['nai3Variet'+'y'],_0x77b6ab[_0x358b39(0x31f,0x293,0x1b4,0x1d9)])&&(_0x3c0cc4[_0x77b6ab[_0x179000(0x504,0x44e,0x481,0x302)]]=calculateSkipCfgAboveSigma(_0x3c0cc4[_0x358b39(0x184,0x1bb,0x229,0x126)],_0x3c0cc4[_0x179000(0x4d8,0x723,0x63f,0x60a)],extension_settings[extensionName][_0x358b39(0x11,0x168,0xee,0x118)+'e']));if(window['nai3VibeTr'+_0x179000(0x55a,0x4b9,0x604,0x673)+'e']!=''&&_0x77b6ab['MXwYQ'](extension_settings[extensionName][_0x358b39(0x1d2,0x29c,0x15d,0x2fc)+_0x358b39(0x2,0x113,0x256,0x19d)],'true')&&_0x77b6ab[_0x358b39(0x317,0x1a2,0x30e,0x41)](extension_settings[extensionName]['novelaimod'+'e'],_0x358b39(0xea,0x237,0x1cf,0xfa)+'ion-3')){if(_0x77b6ab[_0x358b39(-0x49,0x91,-0x4b,0x83)](_0x77b6ab['BnZGl'],_0x77b6ab[_0x179000(0x644,0x8b2,0x757,0x6c8)])){let _0x3c9a9b=await _0x77b6ab[_0x179000(0x48f,0x5f4,0x5a8,0x582)](processReferenceImage,window[_0x358b39(0x288,0x29c,0x35e,0x12a)+_0x179000(0x75b,0x5a1,0x604,0x64f)+'e']);_0x3c0cc4[_0x179000(0x4ab,0x4a0,0x49b,0x4ac)+_0x358b39(0x1ef,0x360,0x40d,0x1e4)+'iple'][_0x179000(0x5f0,0x757,0x686,0x740)](_0x3c9a9b),_0x3c0cc4[_0x179000(0x351,0x557,0x49b,0x344)+'informatio'+_0x179000(0x560,0x6f6,0x632,0x5cd)+_0x179000(0x5f7,0x5a8,0x522,0x670)][_0x179000(0x544,0x797,0x686,0x59e)](_0x77b6ab[_0x179000(0x46a,0x539,0x580,0x431)](Number,extension_settings[extensionName][_0x358b39(0x31c,0x24a,0x220,0x31b)+'nExtracted'])),_0x3c0cc4['reference_'+'strength_m'+_0x179000(0x460,0x47d,0x5d7,0x5d5)][_0x358b39(0x2f9,0x294,0x244,0x356)](_0x77b6ab[_0x179000(0x4cd,0x47b,0x50a,0x47e)](Number,extension_settings[extensionName][_0x358b39(0x247,0x2f4,0x1ca,0x437)+'trength']));}else{const _0x34b834=_0x251d27?function(){function _0x3ef6ba(_0x43ee3,_0x4720bb,_0x5aa6d0,_0x4e7ce4){return _0x179000(_0x4720bb,_0x4720bb-0x195,_0x4e7ce4- -0x38e,_0x4e7ce4-0xf6);}if(_0x49dd09){const _0x2369de=_0x21b54c[_0x3ef6ba(0x1e7,0x203,0x3f5,0x2af)](_0x5511eb,arguments);return _0x436e0c=null,_0x2369de;}}:function(){};return _0x24dcee=![],_0x34b834;}}if(window['nai3CharRe'+_0x358b39(0xcb,0xa2,0xc4,0x16a)]&&_0x77b6ab[_0x179000(0x64b,0x6d3,0x5e6,0x56c)](extension_settings[extensionName]['nai3CharRe'+'f'],_0x77b6ab[_0x358b39(0xb8,0x1c0,0x33d,0x341)])&&extension_settings[extensionName]['novelaimod'+'e'][_0x179000(0x645,0x6c3,0x68b,0x5d6)](_0x77b6ab[_0x358b39(0x16e,0x267,0x10a,0x251)])){if(_0x358b39(0x87,0x18f,0x126,0x1b4)===_0x358b39(0x377,0x32f,0x3dd,0x3e4)){const _0x2b5900=_0xf3233c[_0x358b39(0x213,0x2a3,0x2ce,0x238)](_0x5f2483,_0x77b6ab['GSklw'](_0x23723f,0x1ef0+-0x22a8+-0xef*-0x4)),_0xb7d05c=new _0x311c24(_0x2b5900[_0x179000(0x51c,0x619,0x4e0,0x3d2)])['getUint32'](-0x43*-0x41+0x5bc*0x1+-0x16bf),_0x23c199=_0x77b6ab[_0x358b39(0x60,0x179,0x1a2,0xe2)](_0x1053fb,-0x4*0x153+-0x1*-0x1003+-0xab3),_0x18a532=_0x77b6ab[_0x179000(0x365,0x390,0x472,0x2f5)](_0x23c199,_0xb7d05c);_0x2f1245(_0x179000(0x491,0x475,0x48a,0x323)+_0x179000(0x608,0x6c2,0x748,0x811)+_0xb7d05c+_0x358b39(0x107,0x152,0x79,0x275)+_0x23c199+'-'+_0x18a532);const _0x53ed08=_0x5299ce[_0x179000(0x70f,0x634,0x695,0x637)](_0x23c199,_0x18a532),_0x179765=_0x5908f8(_0x53ed08);if(_0x179765)_0x2e360c['push'](_0x179765);_0x54643f=_0x18a532;}else{let _0x43443a=await _0x77b6ab[_0x179000(0x53b,0x534,0x60f,0x4ca)](processReferenceImage,window[_0x358b39(0xf9,0xb7,0x11e,0x8f)+_0x179000(0x461,0x5ef,0x494,0x5cc)]);_0x3c0cc4[_0x358b39(0x4a3,0x363,0x403,0x3a8)+_0x179000(0x4b2,0x4d7,0x4f9,0x4fa)+'mages']=[''+_0x43443a];const _0x599cba={};_0x599cba[_0x358b39(0xb5,0xb6,-0xf,0x237)+'on']=_0x358b39(0x360,0x325,0x340,0x4a5),_0x599cba['char_capti'+_0x358b39(0x185,0x269,0x326,0x2e8)]=[];const _0xde785c={};_0xde785c[_0x179000(0x732,0x8b5,0x734,0x7b7)]=_0x599cba,_0xde785c[_0x179000(0x47d,0x4b8,0x5fa,0x59f)]=![],_0x3c0cc4[_0x358b39(0x1f3,0x363,0x491,0x316)+'eference_d'+_0x179000(0x53a,0x45f,0x56d,0x44b)+'s']=[_0xde785c],_0x3c0cc4[_0x179000(0x6f1,0x8cd,0x755,0x88c)+'eference_i'+_0x179000(0x439,0x53f,0x51e,0x581)+_0x358b39(0x220,0x143,0x27e,0x22e)]=[0x163f+-0x3*-0xbc7+-0x1331*0x3],_0x3c0cc4['director_r'+_0x358b39(0xdd,0x178,0x143,0x1c6)+'trength_va'+_0x179000(0x6ca,0x6eb,0x75e,0x65a)]=[0x19*-0x112+0x3*0x10f+0x1796],extension_settings[extensionName]['nai3StyleP'+_0x179000(0x58b,0x56b,0x6d0,0x760)]==_0x77b6ab['rrlZX']&&(_0x77b6ab[_0x358b39(0x455,0x33f,0x275,0x287)](_0x77b6ab[_0x358b39(0x26e,0x29a,0x24c,0x272)],'RNiCh')?_0x3c0cc4[_0x77b6ab[_0x358b39(0x191,0x210,0x15d,0x129)]][-0x63*0x56+0x25d9+-0x497][_0x358b39(0x3ee,0x342,0x286,0x267)][_0x77b6ab[_0x179000(0x6b6,0x776,0x6eb,0x64b)]]=_0x77b6ab[_0x358b39(0x288,0x12f,0xe7,0x54)]:_0x2a86ca=_0x77b6ab[_0x358b39(0x459,0x344,0x3ef,0x1d9)]);}}const _0x26075c=_0x3c0cc4,_0x2bd801=JSON[_0x358b39(-0x8a,0xd1,-0x42,-0x36)](JSON[_0x358b39(0x7b,0x1fc,0x2b0,0x2f9)](_0x26075c));_0x2bd801[_0x179000(0x5d6,0x555,0x49b,0x537)+'image_mult'+'iple']&&_0x77b6ab[_0x358b39(0xfb,0x1fa,0x335,0x31b)](_0x2bd801[_0x179000(0x574,0x358,0x49b,0x3c1)+_0x358b39(0x36a,0x360,0x349,0x38d)+_0x358b39(0x3ab,0x36e,0x253,0x425)][_0x179000(0x68e,0x739,0x66e,0x615)],0x2*-0xcb3+0xa59*-0x1+-0x1*-0x23bf)&&(_0x2bd801[_0x179000(0x392,0x4a9,0x49b,0x555)+_0x179000(0x8cc,0x74b,0x752,0x638)+_0x358b39(0x3e4,0x36e,0x417,0x274)]=[_0x77b6ab['nLuZk']]);_0x2bd801[_0x179000(0x875,0x6f1,0x755,0x7cc)+_0x179000(0x635,0x646,0x4f9,0x402)+_0x358b39(0x155,0x22f,0x206,0x2f3)]&&_0x77b6ab['Vavaf'](_0x2bd801[_0x179000(0x72c,0x6d2,0x755,0x7c2)+_0x179000(0x393,0x3e1,0x4f9,0x64b)+'mages'][_0x358b39(0x3b0,0x27c,0x1f5,0x11d)],0x22e3+0x1b9d+-0xa*0x640)&&(_0x2bd801[_0x179000(0x872,0x5ea,0x755,0x66f)+_0x358b39(0x135,0x107,0x23c,0x165)+_0x358b39(0xee,0x22f,0xd2,0x103)]=[_0x77b6ab[_0x179000(0x65e,0x641,0x5de,0x4b3)]]);_0x77b6ab['SjrOM'](extension_settings[extensionName][_0x358b39(0x75,0x92,0x19a,-0xd2)],_0x77b6ab['iwfpO'])&&(_0x77b6ab[_0x358b39(0x198,0x1b8,0x18f,0xb5)]===_0x358b39(0x37,0x131,0xbd,0x108)?_0x77b6ab[_0x358b39(0x114,0x1ea,0x336,0x14b)](addLog,_0x358b39(0x2f2,0x2d3,0x3f6,0x24b)+_0x358b39(0xc5,0x125,0x116,-0x36)+JSON[_0x179000(0x621,0x519,0x5ee,0x686)](_0x2bd801,null,-0x1*-0x40+0x15*-0x197+-0x2125*-0x1)):(_0x77b6ab[_0x358b39(0x363,0x2d6,0x3cf,0x266)](_0x47b580,'文件\x20'+_0x490247['name']+(_0x358b39(0x81,0xf4,0x203,0x1e4)+'4，大小:\x20')+_0x491f6f['length']),_0x77b6ab[_0x179000(0x7c6,0x7db,0x74f,0x708)](_0x128198,_0x375bbc)));let _0x3f0720=new URL(_0x77b6ab[_0x358b39(0x279,0x12d,0x226,0x188)]);if(extension_settings[extensionName][_0x179000(0x598,0x6c8,0x66f,0x64f)+'e']!='官网'){if(_0x77b6ab['nYlMx']===_0x179000(0x63d,0x4ea,0x631,0x719)){if(_0x77b6ab['IWWtM'](extension_settings[extensionName][_0x179000(0x4ff,0x3a5,0x484,0x43f)],_0x179000(0x607,0x662,0x727,0x7dd)))throw new Error(_0x77b6ab[_0x358b39(0x1da,0x320,0x301,0x360)]);let _0xe880d3=extension_settings[extensionName][_0x179000(0x8a7,0x7fb,0x75d,0x85f)+_0x358b39(0x335,0x32e,0x327,0x37c)];_0x3f0720=_0xe880d3[_0x179000(0x781,0x50d,0x68b,0x562)](_0x77b6ab[_0x358b39(0x249,0x2ed,0x3a9,0x3b6)])?new URL(_0xe880d3):new URL(_0xe880d3+(_0x358b39(0x19,0xb0,0x6f,0x129)+_0x358b39(0x180,0x229,0x31d,0x351)));}else{const _0x379288={};_0x379288['char_capti'+'on']=_0x11d058[_0x358b39(0x268,0x1ed,0x2e9,0x264)+_0x489d56+_0x358b39(0x248,0x35e,0x444,0x3eb)],_0x379288[_0x358b39(0x203,0x196,0x9a,0x30b)]=[_0x1e3f66['Character\x20'+_0x21a312+(_0x358b39(0xa0,0x19c,0x281,0xa7)+'es')]],_0x3e255e[_0x179000(0x737,0x84f,0x734,0x815)][_0x179000(0x74c,0x742,0x6e4,0x5da)+_0x179000(0x4dd,0x4dc,0x65b,0x592)]['push'](_0x379288);}}try{if(_0x77b6ab[_0x179000(0x4e7,0x4ac,0x4ea,0x5c6)]!==_0x77b6ab[_0x358b39(0x20b,0xf8,0x1c5,-0x47)])_0x1fa5f7[_0x179000(0x3be,0x4cb,0x49b,0x52d)+_0x179000(0x7b8,0x70a,0x752,0x70b)+_0x179000(0x8b4,0x66e,0x760,0x864)]=[_0x77b6ab[_0x358b39(0x36b,0x1ec,0x25e,0x1f4)]];else{let _0x6270d9='';if(extension_settings[extensionName][_0x358b39(0xb1,0x92,-0xc7,0x135)]==_0x358b39(0x3c1,0x335,0x327,0x20f)){let _0x1c0b3f=!![];while(_0x1c0b3f){window[_0x358b39(0x437,0x2f0,0x2df,0x384)]?_0x1c0b3f=![]:await sleep(0x1317+-0xf64*0x2+-0xb*-0x16b);};window[_0x179000(0x59e,0x6ea,0x6e2,0x5c9)]=![];while(_0x1c0b3f){_0x77b6ab[_0x358b39(0x123,0xbf,0x40,0x1aa)](_0x358b39(0x171,0xbe,0x73,0x1e6),_0x77b6ab[_0x358b39(0x185,0x197,0x2b8,0x15b)])?_0x4b36fc[_0x77b6ab[_0x179000(0x47b,0x57b,0x481,0x3c8)]]=-0x20ff*0x1+-0x2*0xfd6+0x40be:window['xiancheng']?_0x77b6ab['mOPLH'](_0x179000(0x543,0x46d,0x5dd,0x4f9),_0x358b39(0x1dc,0x16b,0x99,0xf2))?_0x33802f=_0x77b6ab[_0x358b39(0x270,0x25c,0x35f,0x35e)]:_0x1c0b3f=![]:_0x77b6ab[_0x358b39(0x353,0x283,0x3cf,0x213)](_0x179000(0x388,0x44e,0x4bb,0x45d),_0x179000(0x67c,0x79c,0x65c,0x5f8))?await sleep(0x4*0x4a+-0x24*0x8e+0x16b8):_0x468fde[_0x179000(0x672,0x4b9,0x5df,0x536)+_0x1c9e70+_0x358b39(0x395,0x35e,0x322,0x2ca)]&&(_0x3eee18[_0x77b6ab[_0x179000(0x5cc,0x691,0x558,0x698)](_0x245ecf,0x7*0x418+-0x1*0x2a5+-0x1a02)]={'enabled':!![],'prompt':_0x2954fa[_0x179000(0x743,0x5ff,0x5df,0x515)+_0x248a3a+_0x358b39(0x3b1,0x35e,0x2b5,0x337)],'center':_0x4a255a[_0x179000(0x4fa,0x604,0x5df,0x47d)+_0x4a830e+('\x20coordinat'+'es')],'uc':_0x101c44['Character\x20'+_0x5db44b+'\x20UC']?_0x446f50[_0x358b39(0x10f,0x1ed,0x293,0x26c)+_0xb78701+'\x20UC']:_0x77b6ab[_0x358b39(0x33d,0x2c3,0x1bd,0x396)]});};window[_0x358b39(0x287,0x2f0,0x3a1,0x2f9)]=![];const _0x248f09=await _0x77b6ab[_0x179000(0x611,0x6a0,0x6fd,0x58e)](fetch,_0x77b6ab['chGfx'],{'method':_0x77b6ab['Unyhq'],'headers':_0x77b6ab['suCdD'](getRequestHeaders,window['token']),'body':JSON[_0x179000(0x48c,0x502,0x5ee,0x73f)]({})});if(_0x248f09['ok']){if(_0x179000(0x6e0,0x5dd,0x6f0,0x5e6)===_0x77b6ab[_0x358b39(0x116,0x1ba,0x79,0xfe)])_0x291c1f=_0x77b6ab[_0x179000(0x48b,0x33d,0x47e,0x3d2)];else{if(_0x77b6ab[_0x358b39(0xff,0x199,0x9d,0x152)](extension_settings[extensionName]['novelaiApi'+_0x358b39(0x1ee,0x32d,0x256,0x474)],'')){const _0x5af861=await _0x77b6ab[_0x179000(0x5be,0x4fa,0x5e5,0x51a)](fetch,_0x77b6ab[_0x179000(0x69a,0x4fb,0x5fb,0x6fd)],{'method':_0x358b39(0x322,0x33c,0x3c2,0x275),'headers':getRequestHeaders(window[_0x179000(0x4aa,0x56a,0x4e1,0x50b)]),'body':JSON[_0x179000(0x6ec,0x6b8,0x5ee,0x5a3)]({'id':extension_settings[extensionName][_0x179000(0x541,0x449,0x578,0x6cf)+_0x179000(0x6a3,0x78a,0x71f,0x63a)],'key':_0x77b6ab['yarQi']})});}let _0x2001da='';const _0x381f1c=await fetch(_0x77b6ab[_0x179000(0x6fe,0x65b,0x742,0x6d3)],{'method':_0x179000(0x6cd,0x64b,0x72e,0x6d8),'headers':_0x77b6ab[_0x358b39(0x23,0x8d,0x18d,-0x1a)](getRequestHeaders,window[_0x358b39(-0x8e,0xef,0x59,0x1f7)]),'body':JSON[_0x179000(0x710,0x671,0x5ee,0x49f)]({'key':_0x77b6ab[_0x358b39(0x144,0x105,-0x33,0x1c7)],'value':extension_settings[extensionName][_0x179000(0x68b,0x641,0x578,0x65d)],'label':_0x77b6ab['zNujK']})}),_0x1f3ca4=await _0x381f1c[_0x358b39(0xb7,0x185,0x248,0x1f0)]();extension_settings[extensionName][_0x179000(0x688,0x681,0x578,0x5fc)+_0x179000(0x6a0,0x819,0x71f,0x77b)]=_0x1f3ca4['id'],saveSettingsDebounced(),await fetch('/api/secre'+_0x179000(0x62f,0x600,0x5f5,0x6f3),{'method':_0x77b6ab[_0x358b39(0x1d2,0x16d,0x226,0x249)],'headers':getRequestHeaders(window[_0x358b39(0x16a,0xef,0x252,-0xe)]),'body':JSON[_0x179000(0x53e,0x729,0x5ee,0x661)]({'id':_0x1f3ca4['id'],'key':_0x77b6ab[_0x358b39(-0x60,0x105,0x1cb,0x143)]})});}}const _0x83f58d={};_0x83f58d[_0x358b39(-0xe8,0x84,0x115,0x152)]=_0x1a84fb,_0x83f58d[_0x358b39(0x195,0x2b6,0x31f,0x270)]=extension_settings[extensionName][_0x358b39(0x39,0x168,0xfc,0x144)+'e'],_0x83f58d[_0x358b39(0xc0,0x1f6,0x25f,0x157)]=_0x3c0cc4[_0x179000(0x71e,0x4e0,0x5e8,0x740)],_0x83f58d['scheduler']=_0x3c0cc4[_0x179000(0x6ac,0x78e,0x6b6,0x6f1)+_0x358b39(0x1ce,0x2a8,0x26a,0x312)],_0x83f58d[_0x358b39(0x2a5,0x289,0x228,0x1d9)]=_0x3c0cc4[_0x358b39(0x1a3,0x289,0x2c7,0x348)],_0x83f58d[_0x179000(0x5d0,0x359,0x4c6,0x46a)]=_0x3c0cc4['scale'],_0x83f58d[_0x358b39(0x191,0x1bb,0x308,0x83)]=_0x3c0cc4['width'],_0x83f58d['height']=_0x3c0cc4[_0x358b39(0x146,0x24d,0x27a,0x12d)],_0x83f58d[_0x358b39(0x30a,0x353,0x20e,0x3f3)+_0x358b39(0x44,0x1a7,0x15d,0x9e)]=_0x3c0cc4['negative_p'+_0x358b39(0x138,0x1a7,0x290,0x2e8)],_0x83f58d[_0x179000(0x5c6,0x558,0x616,0x506)]=_0x3c0cc4[_0x179000(0x3f4,0x493,0x4d2,0x5ff)+'resholding'],_0x83f58d[_0x179000(0x66c,0x47d,0x5ed,0x517)+'ost']=_0x3c0cc4[_0x179000(0x58d,0x4d7,0x5e9,0x5ef)+_0x179000(0x623,0x706,0x674,0x71e)],_0x83f58d['sm']=_0x3c0cc4['sm'],_0x83f58d[_0x179000(0x55a,0x5c8,0x624,0x4e5)]=_0x3c0cc4[_0x179000(0x543,0x5d6,0x624,0x5f2)],_0x83f58d[_0x179000(0x3d8,0x44b,0x464,0x434)]=_0x3c0cc4[_0x179000(0x3c6,0x4bd,0x464,0x37f)];const _0x158dd7=_0x83f58d;_0x77b6ab[_0x358b39(0x2a,0xad,0x1ce,0xea)](addLog,_0x358b39(0x399,0x2d3,0x375,0x2e9)+'yload):\x20'+JSON['stringify'](_0x158dd7,null,-0x1*0x2685+0x1*-0x1e02+0x4489));const _0xc22f4a=await _0x77b6ab[_0x358b39(0x2c2,0x30b,0x361,0x1b6)](fetch,_0x77b6ab['ybjyx'],{'method':_0x77b6ab['Unyhq'],'headers':_0x77b6ab[_0x179000(0x54d,0x5f6,0x62d,0x6a1)](getRequestHeaders,window[_0x179000(0x42e,0x389,0x4e1,0x496)]),'body':JSON['stringify'](_0x158dd7)});window[_0x179000(0x65e,0x593,0x6e2,0x79c)]=!![];if(!_0xc22f4a['ok']){const _0x2c54fd=await _0xc22f4a[_0x179000(0x642,0x799,0x70e,0x7de)]();throw new Error(_0x179000(0x4a8,0x599,0x5fe,0x5fb)+_0x179000(0x7e4,0x5eb,0x71b,0x718)+_0x2c54fd);}let _0x159225=await _0xc22f4a[_0x358b39(0x1d4,0x31c,0x3a5,0x48a)]();try{if(_0x77b6ab[_0x179000(0x3e5,0x4a7,0x4ab,0x39e)](_0x77b6ab[_0x179000(0x74b,0x81a,0x73a,0x5e1)],_0x77b6ab['lPUdl']))return _0x3dc4bb;else{const _0x2fa693=JSON['parse'](_0x159225);_0x6270d9=_0x2fa693[_0x179000(0x5c2,0x324,0x4a0,0x56a)][-0x1e89*0x1+0xd5a+-0x53*-0x35];}}catch(_0x4ce838){_0x77b6ab[_0x358b39(0x1b4,0x127,-0x34,0x87)](_0x77b6ab[_0x358b39(0xcf,0x134,0x2a9,0x237)],_0x77b6ab[_0x179000(0x55d,0x65d,0x526,0x3cc)])?(_0x77b6ab['suCdD'](addLog,_0x77b6ab[_0x358b39(0x229,0x1aa,0x2a9,0x1c8)]),_0x6270d9=_0x159225):_0x43d66c+=_0x29ac9d['fromCharCo'+'de'](_0x35e431[_0x596176]);}}else{let _0x538247='',_0x29ba7e=_0x77b6ab[_0x358b39(0x2ed,0x179,0x2d8,0x19)](_0x77b6ab[_0x358b39(0x1fe,0x1ce,0x121,0x7f)],_0x2de8c8),_0x262a45='';const _0x17b174={};_0x17b174['input']=_0x1a84fb,_0x17b174[_0x179000(0x826,0x7ed,0x6a8,0x6b0)]=extension_settings[extensionName][_0x358b39(0x9c,0x168,0x5e,0x2d2)+'e'],_0x17b174[_0x179000(0x889,0x6ea,0x714,0x6c6)]=_0x77b6ab['zvmPw'],_0x17b174[_0x179000(0x610,0x789,0x6dc,0x6c0)]=_0x26075c,_0x17b174[_0x179000(0x774,0x890,0x739,0x5ca)+_0x358b39(0x17c,0xa5,0x20,0x151)]=!![],_0x538247=_0x17b174,console[_0x179000(0x650,0x67a,0x5d6,0x596)](_0x77b6ab[_0x179000(0x4a2,0x483,0x4bc,0x440)],_0x538247);let _0x1ea287=!![];while(_0x1ea287){window[_0x179000(0x734,0x703,0x6e2,0x7de)]?_0x1ea287=![]:await _0x77b6ab[_0x358b39(0x199,0xd9,0x1d1,-0x1a)](sleep,0x3*-0x115+0x5*0x41f+0x2*-0x6ba);};window[_0x179000(0x74f,0x653,0x6e2,0x654)]=![];let _0x145698;try{_0x145698=await _0x77b6ab['XkXXp'](fetch,_0x3f0720,{'method':_0x77b6ab[_0x358b39(0x44,0x16d,0xad,0x27d)],'headers':{'Content-Type':_0x77b6ab[_0x358b39(0x20b,0x21b,0x37c,0x229)],'Authorization':_0x29ba7e},'body':JSON[_0x179000(0x5da,0x607,0x5ee,0x4dd)](_0x538247)});}catch(_0x37ad4e){_0x77b6ab['MpxdH'](addLog,'请求遇到网络错误:\x20'+_0x37ad4e['message']+(_0x179000(0x5a8,0x40c,0x488,0x445)+'.')),await _0x77b6ab['MpxdH'](sleep,0x6ef*-0x3+0x1999*-0x1+0x1927*0x2);try{_0x77b6ab[_0x179000(0x7f6,0x5f5,0x713,0x86c)](_0x77b6ab[_0x179000(0x38c,0x3d3,0x4d5,0x481)],_0x179000(0x858,0x80c,0x747,0x7c5))?_0x145698=await _0x77b6ab[_0x358b39(0x226,0xe7,0x20e,-0x53)](fetch,_0x3f0720,{'method':_0x77b6ab[_0x358b39(0x23f,0x16d,0x246,0x109)],'headers':{'Content-Type':_0x77b6ab[_0x179000(0x68d,0x6d7,0x60d,0x592)],'Authorization':_0x29ba7e},'body':JSON[_0x179000(0x4d0,0x54b,0x5ee,0x489)](_0x538247)}):_0x3e43a3=_0x77b6ab[_0x179000(0x642,0x521,0x5d0,0x5e2)];}catch(_0x171231){window[_0x179000(0x5b6,0x73e,0x6e2,0x740)]=!![],_0x77b6ab['QvPbz'](addLog,'重试失败:\x20'+_0x171231[_0x179000(0x7b9,0x607,0x6f4,0x59f)]);throw _0x171231;}}window[_0x358b39(0x25a,0x2f0,0x231,0x230)]=!![];if(!_0x145698['ok']){const _0x4ac4b0=await _0x145698[_0x179000(0x672,0x832,0x70e,0x5cb)]();let _0x4cedd3='请求失败,\x20状态码:'+'\x20'+_0x145698['status']+_0x179000(0x7a4,0x757,0x660,0x6c2)+_0x4ac4b0;switch(_0x145698['status']){case-0xa1f+0x653*-0x2+-0xc2b*-0x2:_0x4cedd3=_0x77b6ab['HcDJn'];break;case 0x2019+0x109e+-0x2f25:_0x4cedd3=_0x179000(0x4da,0x420,0x474,0x300)+'此端点。';break;}throw new Error(_0x4cedd3);}const _0x531a02=await _0x145698[_0x179000(0x414,0x3df,0x4c8,0x359)+'r']();_0x6270d9=await _0x77b6ab['Olopo'](unzipFile,_0x531a02);}if(!_0x6270d9){if(_0x77b6ab[_0x358b39(0x3d5,0x358,0x498,0x460)](_0x77b6ab[_0x358b39(0x256,0x1d3,0x1b7,0x31e)],_0x77b6ab['KoAla']))_0x336bb9=_0x179000(0x491,0x3c3,0x478,0x3fe)+_0x179000(0x607,0x619,0x4d7,0x5de)+'aled,\x20arti'+_0x179000(0x487,0x332,0x47c,0x37c)+_0x179000(0x6a2,0x636,0x6a2,0x7f5)+_0x358b39(0x195,0xe9,0x11d,-0x16)+_0x358b39(0x66,0x7c,0x9d,0x188)+_0x358b39(0x113,0x116,0x56,0x17e)+_0x358b39(0x258,0x1e7,0x251,0x97)+'uality,\x20jp'+_0x179000(0x556,0x474,0x492,0x3c9)+_0x179000(0x693,0x826,0x728,0x6b0)+_0x358b39(0x1bc,0x2eb,0x278,0x45e)+_0x358b39(0x1c8,0x33e,0x3df,0x47e)+_0x358b39(0x3cf,0x2e7,0x261,0x178)+'on,\x20halfto'+_0x358b39(0x210,0x2dc,0x328,0x44e)+_0x358b39(0x275,0x174,0xdb,0x2da)+_0x179000(0x3ca,0x46d,0x4ac,0x4f5)+_0x179000(0x74d,0x6cc,0x651,0x77f)+_0x358b39(0x309,0x195,0x78,0x253)+_0x179000(0x693,0x796,0x706,0x6c9)+'e,\x20blank\x20p'+'age';else throw new Error(_0x77b6ab[_0x179000(0x760,0x753,0x6a7,0x542)]);}let _0x48a622=_0x77b6ab[_0x358b39(0xfe,0x179,0xfa,0x1bd)](_0x77b6ab[_0x179000(0x5f1,0x71d,0x64a,0x7c2)],_0x6270d9);return _0x77b6ab[_0x179000(0x590,0x6ba,0x6b9,0x732)](addLog,_0x77b6ab['AKukb']),{'image':_0x48a622,'change':_0x77b6ab['UmqtG'](_0x4acc97,'')};}}catch(_0x1eb23f){if(_0x77b6ab[_0x179000(0x47d,0x5c3,0x5d5,0x579)](_0x358b39(0x111,0xcc,0x135,0x23d),_0x77b6ab[_0x179000(0x594,0x39e,0x4a3,0x4cb)])){if(_0x3a319d[_0x2726cf][_0x179000(0x3b8,0x3c7,0x484,0x3cb)]==_0x358b39(0x3c4,0x335,0x1f4,0x48d))throw new _0xd76706(_0x77b6ab[_0x358b39(0x2ce,0x320,0x1af,0x279)]);let _0x3520c8=_0x3fc7aa[_0x72e0c5][_0x179000(0x64e,0x62b,0x75d,0x72a)+_0x358b39(0x347,0x32e,0x483,0x305)];_0x2c6afd=_0x3520c8[_0x358b39(0x2c2,0x299,0x12a,0x36f)](_0x77b6ab[_0x358b39(0x1f3,0x2ed,0x3e6,0x2e6)])?new _0x1cf3e0(_0x3520c8):new _0x14226e(_0x3520c8+(_0x358b39(-0x74,0xb0,0x67,0x1a8)+'te-image'));}else{window['xiancheng']=!![];throw _0x1eb23f;}}}async function novelaigenerate(_0x371108){function _0x32507c(_0x5a31ee,_0x1990dd,_0x2f101c,_0x53ae58){return _0x49df(_0x1990dd- -0x339,_0x5a31ee);}function _0x51c6bb(_0x31e4b1,_0x2c3ecd,_0x57bca2,_0x29c8af){return _0x49df(_0x2c3ecd- -0xe3,_0x29c8af);}const _0x354697={'emEtC':_0x51c6bb(-0x2f,0x60,0xd2,0x1b6)+_0x51c6bb(0x10d,0x20,-0x23,0x103)+_0x32507c(-0x251,-0x1ce,-0x1bd,-0x176)+_0x51c6bb(-0x13,0x67,0x10d,-0x10e)+_0x32507c(-0x1b8,-0x13c,-0x123,-0x219),'ctxJC':function(_0x5ecfeb,_0x885d78){return _0x5ecfeb(_0x885d78);},'ZdOxP':'标准模式:\x20使用请求'+_0x51c6bb(0xe2,0x22e,0x1b8,0x39f),'frhbS':function(_0x5d6f3e,_0x5c018b){return _0x5d6f3e(_0x5c018b);},'MsKPM':function(_0x97988,_0x1ddc92){return _0x97988(_0x1ddc92);},'PrMyZ':function(_0x52ae12,_0x16548c){return _0x52ae12!=_0x16548c;},'OGvUm':_0x51c6bb(0x17d,0x167,0x1a2,0xb6),'jVqEk':function(_0x2c42ba,_0x544be0,_0x10ccef,_0x4cc9a9){return _0x2c42ba(_0x544be0,_0x10ccef,_0x4cc9a9);},'OXsBR':function(_0x2e08e,_0x1d4034){return _0x2e08e===_0x1d4034;},'uPSsp':_0x51c6bb(0x27f,0x1d0,0x1b3,0xda),'GSnJl':function(_0x12efa4,_0x396441){return _0x12efa4(_0x396441);},'eGwIY':function(_0x3e4456,_0x3ea877){return _0x3e4456(_0x3ea877);},'yNIOd':'Error\x20gene'+_0x32507c(0x11e,0xac,-0x43,-0xae)+_0x32507c(0x183,0x5d,0x48,0x132),'PPXyt':function(_0x101462,_0x1b1661){return _0x101462(_0x1b1661);}},{id:_0x28a404,prompt:_0x55593d,width:_0x2c7391,height:_0x35e30c,change:_0xfad5e7}=_0x371108;_0x354697[_0x32507c(-0xe8,-0x8e,-0xd2,0x18)](addLog,_0x32507c(-0xcd,-0x19a,-0x200,-0x298)+':\x20'+_0x28a404+(')\x20-\x20Prompt'+':\x20')+_0x55593d+(_0xfad5e7?'\x20-\x20Change:'+'\x20'+_0xfad5e7:''));try{const {image:_0xafe8c3,change:_0x473ac5}=await _0x354697['MsKPM'](generateNovelAIImage,{'prompt':_0x55593d,'width':_0x2c7391,'height':_0x35e30c,'change':_0xfad5e7});if(_0x354697[_0x51c6bb(0x14a,0xa7,-0x65,0xc5)](extension_settings[extensionName][_0x32507c(0x4e,-0x4f,-0x168,-0x13a)],'0')){if(_0x354697[_0x51c6bb(0x1b1,0x140,0x98,0xda)]!==_0x51c6bb(0xe9,0x167,0xb2,0xfb))_0x58501c=_0x354697[_0x32507c(-0x90,-0x17e,-0xb2,-0x10a)];else{const _0x3a3946={};_0x3a3946[_0x32507c(-0x12f,-0x186,-0x2da,-0x1ae)]=_0x473ac5,await _0x354697['jVqEk'](setItemImg,_0x55593d,_0xafe8c3,_0x3a3946),_0x354697['ctxJC'](addLog,_0x32507c(-0x6c,0x53,0xce,0x17b)+_0x51c6bb(0x10d,0x15f,0x19d,0x148)+'\x20'+_0x55593d);}}else _0x354697[_0x51c6bb(0x2b,0x148,0x127,0x28b)](_0x354697[_0x51c6bb(0x248,0x1d2,0xdc,0x1bb)],'wqNas')?_0x354697['GSnJl'](addLog,_0x51c6bb(0x1c1,0xfd,0x4c,-0x55)+'库'):(_0x354697['ctxJC'](_0x575856,_0x354697[_0x51c6bb(0x197,0x24a,0xd8,0x245)]),_0x250374=_0x3fb877);const _0x2ce871={};_0x2ce871['id']=_0x28a404,_0x2ce871[_0x32507c(-0x196,-0x10d,-0x149,-0x10f)]=!![],_0x2ce871[_0x51c6bb(0x8c,0x18a,0x1a8,0x91)]=_0xafe8c3,_0x2ce871[_0x32507c(-0x337,-0x23a,-0x1b6,-0x1c1)]=_0x55593d,_0x2ce871[_0x32507c(-0x27d,-0x186,-0x117,-0x1c9)]=_0x473ac5,eventSource[_0x32507c(-0x14d,0x3,0x14b,0x23)](EventType['GENERATE_I'+_0x51c6bb(0x37d,0x263,0x13b,0x33e)+'NSE'],_0x2ce871),_0x354697[_0x32507c(0x14e,0x4a,-0xb1,0xaa)](addLog,_0x32507c(-0x11d,0x7,-0x7b,0x13a)+_0x51c6bb(0x1f2,0x2ca,0x32e,0x3fb)+_0x28a404+')');}catch(_0x1e0cd7){const _0x2a7d9a=_0x32507c(-0x1ea,-0x1fa,-0x2ed,-0x7b)+_0x32507c(0xf1,-0x20,0x20,-0x13f)+_0x28a404+_0x32507c(0x4,-0xb4,0x7,-0x17e)+_0x1e0cd7[_0x51c6bb(0x2cd,0x29a,0x380,0x20a)];_0x354697['frhbS'](addLog,_0x32507c(-0x28,0x45,-0xd0,0x14d)+_0x2a7d9a),console[_0x51c6bb(0xfe,0xb,-0x171,0x110)](_0x354697[_0x51c6bb(0x1b0,0x197,0x2fc,0x13f)],_0x1e0cd7);const _0x3da141={};_0x3da141['id']=_0x28a404,_0x3da141[_0x51c6bb(0x2a5,0x149,-0x1c,0x29a)]=![],_0x3da141[_0x51c6bb(0x108,0xb,-0xf2,0x116)]=_0x1e0cd7['message'],_0x3da141[_0x51c6bb(-0x18,0x1c,-0x101,0x7d)]=_0x55593d,eventSource['emit'](EventType[_0x32507c(-0x1dd,-0x185,-0x27c,-0xb3)+_0x51c6bb(0x2af,0x263,0x209,0x39b)+_0x51c6bb(0x76,0x144,0x5b,0x285)],_0x3da141),_0x354697['PPXyt'](addLog,_0x51c6bb(0x3f0,0x2b6,0x270,0x1d8)+_0x32507c(-0x9e,0x74,-0x105,0xa2)+_0x28a404+')');}}function initializeNovelAIListener(){const _0x45b16f={'tCRKp':function(_0x471988,_0x592002){return _0x471988(_0x592002);},'Rojwc':_0x10e52d(0x31d,0x33b,0x41f,0x384)+'事件监听器已初始化。'};eventSource['on'](EventType[_0x1840b5(-0x247,-0x1e6,-0x1bb,-0x2e4)+_0x1840b5(-0x193,-0x2f2,-0x19e,-0x18c)+'ST'],novelaigenerate);function _0x1840b5(_0x30b7c9,_0x50c86b,_0x2192e4,_0xc6f1d3){return _0x49df(_0x2192e4- -0x36f,_0x30b7c9);}function _0x10e52d(_0x49a9d6,_0x599746,_0x5dc4b7,_0x42aa02){return _0x49df(_0x599746-0x115,_0x42aa02);}_0x45b16f[_0x1840b5(0x8,-0xd6,-0x23,0x3e)](addLog,_0x45b16f['Rojwc']);}export async function replaceWithnovelai(){function _0x45ce88(_0x13e01b,_0x30ee91,_0x4e6694,_0x22bcf7){return _0x49df(_0x30ee91-0x13b,_0x4e6694);}const _0x1b7454={'gLKel':_0x4870b2(0x27a,0x294,0x354,0x405)+'wres,\x20erro'+_0x45ce88(0x39d,0x42e,0x3c5,0x52d)+'ain,\x20scan\x20'+'artifacts,'+_0x45ce88(0x2f2,0x2fc,0x411,0x2c6)+_0x45ce88(0xfb,0x265,0x23c,0x190)+_0x45ce88(0x316,0x2c4,0x276,0x3dd)+_0x45ce88(0x48e,0x490,0x34f,0x41f)+_0x4870b2(0x39b,0x328,0x418,0x1fc)+_0x45ce88(0x25c,0x336,0x464,0x30a)+_0x45ce88(0x445,0x2e1,0x165,0x262)+_0x4870b2(0x2e4,0x3e6,0x406,0x4c8)+_0x4870b2(0x26d,0x36a,0x317,0x32f)+_0x45ce88(0x3ec,0x391,0x3a8,0x429)+'\x20logo,\x20too'+_0x45ce88(0x2e6,0x343,0x272,0x298)+'rmarks,\x20wh'+'ite\x20blank\x20'+_0x4870b2(0x12d,0x287,0x1a8,0x17f)+_0x4870b2(0x46a,0x4e7,0x3f7,0x5a2),'fhBDU':function(_0x437b12,_0xaf1f02){return _0x437b12==_0xaf1f02;},'qMLAb':function(_0x3a080c){return _0x3a080c();},'zggan':function(_0xf1b3b2){return _0xf1b3b2();},'jRgEu':'EbNHk','FNzyB':function(_0x2f7e17,_0x44b939){return _0x2f7e17(_0x44b939);},'huTwb':_0x4870b2(0x3a8,0x3b9,0x456,0x2ed)+_0x4870b2(0x42e,0x492,0x4f2,0x32f)};function _0x4870b2(_0x5ce730,_0x5d45c1,_0x19007f,_0x2209b8){return _0x49df(_0x5d45c1-0x193,_0x19007f);}_0x1b7454[_0x4870b2(0x272,0x3a6,0x4ce,0x2b8)](extension_settings[extensionName]['mode'],'novelai')?(!window['initialize'+'NovelAILis'+_0x45ce88(0x29c,0x2c6,0x29e,0x28f)]&&(window[_0x4870b2(0x5ca,0x51c,0x5dc,0x5d4)+'NovelAILis'+_0x45ce88(0x3c9,0x2c6,0x197,0x2b5)]=!![],_0x1b7454[_0x4870b2(0x26a,0x39a,0x31c,0x3b3)](initializeNovelAIListener)),_0x1b7454[_0x45ce88(0x382,0x25a,0x1e7,0xe1)](initializeImageProcessing)):_0x1b7454[_0x45ce88(0x37c,0x259,0x3da,0x377)]===_0x1b7454[_0x45ce88(0x32c,0x259,0x2bb,0x327)]?window[_0x45ce88(0x5c6,0x4c4,0x4c8,0x354)+_0x4870b2(0x6c9,0x568,0x5dc,0x4cb)+_0x4870b2(0x213,0x31e,0x2db,0x1fc)]&&(eventSource[_0x4870b2(0x3dc,0x344,0x2e4,0x227)+_0x45ce88(0x682,0x503,0x57c,0x631)](EventType[_0x45ce88(0x1ed,0x2ef,0x1d2,0x2f0)+'MAGE_REQUE'+'ST'],novelaigenerate),window['initialize'+'NovelAILis'+_0x4870b2(0x2e0,0x31e,0x47a,0x25d)]=![],_0x1b7454[_0x45ce88(0x3a9,0x340,0x3e5,0x33b)](addLog,_0x1b7454['huTwb'])):_0x234ffc=_0x1b7454[_0x4870b2(0x445,0x444,0x2f3,0x5aa)];}
//# sourceMappingURL=http://localhost:8000/novelai.js.map