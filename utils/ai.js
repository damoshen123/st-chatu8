(function(_0x5689c4,_0x4f3ab3){const _0x58eea9=_0x5689c4();function _0x5d8994(_0x1aa219,_0x201ca4,_0x3443bd,_0x2df3fb){return _0x3274(_0x2df3fb- -0x3d2,_0x3443bd);}function _0x5c848a(_0x381c61,_0x531daf,_0x49ca02,_0x2c210f){return _0x3274(_0x531daf- -0x80,_0x2c210f);}while(!![]){try{const _0xb7a972=-parseInt(_0x5c848a(0xbb,0xe3,0xf9,0x148))/(-0x15ce+0x98d+0xc42)*(-parseInt(_0x5d8994(-0x17b,-0x195,-0x1fa,-0x1d0))/(0xff*0x7+0x5*0x109+-0xc24))+parseInt(_0x5c848a(0x185,0x173,0x108,0x1c8))/(0xe07+0x2ba*0x1+-0x10be)*(-parseInt(_0x5c848a(0x1a3,0x157,0x1a5,0x106))/(0x1d6b+-0x1c36+-0x131))+-parseInt(_0x5c848a(0xe1,0xfe,0xf9,0xe8))/(-0x24d4+0x1*-0x236b+-0x1211*-0x4)*(parseInt(_0x5c848a(0x1cc,0x180,0x1e6,0x188))/(0x22ef+-0x211f+-0x2*0xe5))+-parseInt(_0x5d8994(-0x25b,-0x27c,-0x216,-0x234))/(0xc9d+0xbd6+0x6*-0x412)+parseInt(_0x5c848a(0x12e,0x138,0x176,0x132))/(0x4d0+-0x1*-0x53f+-0xa07)*(-parseInt(_0x5c848a(0x58,0xb5,0xe0,0x82))/(0x1a8*0x5+0xd3c+0x9*-0x263))+-parseInt(_0x5c848a(0xa1,0xb1,0xf8,0x51))/(0x204d*-0x1+0x1014+0xb5*0x17)+-parseInt(_0x5d8994(-0x2b6,-0x270,-0x2a7,-0x27e))/(-0x2706+0x1aed*0x1+0xc24)*(-parseInt(_0x5d8994(-0x277,-0x20c,-0x2b3,-0x25a))/(-0x18d9+0x3*0x161+0x14c2));if(_0xb7a972===_0x4f3ab3)break;else _0x58eea9['push'](_0x58eea9['shift']());}catch(_0x2a976a){_0x58eea9['push'](_0x58eea9['shift']());}}}(_0x2051,0xc7*0xc77+-0x389b2+0x2a*-0x7e1));const _0x35a128=(function(){const _0x196f13={};_0x196f13[_0x3824a5(0x27c,0x217,0x1cf,0x283)]='afBpw',_0x196f13[_0x3824a5(0x232,0x22a,0x23d,0x208)]=function(_0x56ef58,_0x510333){return _0x56ef58!==_0x510333;},_0x196f13[_0x5556b4(-0x17a,-0x159,-0x149,-0x16b)]=_0x5556b4(-0x190,-0x1b2,-0x1d9,-0x21c);const _0x24aadb=_0x196f13;let _0x4d7517=!![];function _0x3824a5(_0xd82efc,_0x27e5df,_0x1d98c2,_0x1147e4){return _0x3274(_0x27e5df-0xbd,_0x1147e4);}function _0x5556b4(_0x5b089c,_0x34928b,_0x1102bf,_0x43186d){return _0x3274(_0x34928b- -0x332,_0x1102bf);}return function(_0x16a124,_0x50d2cf){const _0x339eb7={};_0x339eb7[_0x56fc77(-0x2b9,-0x28b,-0x24e,-0x2a8)]=_0x24aadb[_0x56fc77(-0x2cb,-0x2ae,-0x273,-0x24f)];const _0x322ed3=_0x339eb7;function _0x4a53f3(_0x20b061,_0x1ff21a,_0x241afc,_0x4db6e8){return _0x5556b4(_0x20b061-0x1c1,_0x4db6e8-0x371,_0x241afc,_0x4db6e8-0x162);}function _0x56fc77(_0x321a37,_0x236960,_0x3026af,_0xa1eb61){return _0x3824a5(_0x321a37-0xd,_0x3026af- -0x48a,_0x3026af-0x67,_0x321a37);}if(_0x24aadb[_0x4a53f3(0x17c,0x210,0x1bb,0x1ac)](_0x24aadb['zexlq'],_0x24aadb[_0x4a53f3(0x208,0x25c,0x1dc,0x218)]))_0x11305c[_0x4a53f3(0x1f7,0x22a,0x29b,0x23e)](_0xdeaa1d),_0x50983e['set'](_0x24f8ab[_0x4a53f3(0x1e5,0x1f9,0x19b,0x1fa)+'e'](),_0x15e180);else{const _0x506e5b=_0x4d7517?function(){function _0x4c757c(_0x3cabd0,_0x1611f8,_0x1b5ed1,_0xc1402e){return _0x56fc77(_0x1b5ed1,_0x1611f8-0xd0,_0xc1402e-0x1b0,_0xc1402e-0x101);}function _0x396abf(_0x4cd942,_0x1bfe6d,_0x5c8512,_0x1b7011){return _0x56fc77(_0x4cd942,_0x1bfe6d-0x97,_0x5c8512-0x316,_0x1b7011-0x16c);}if(_0x322ed3[_0x4c757c(-0x9d,-0xa9,-0x75,-0x9e)]!==_0x322ed3[_0x396abf(0xc6,0x94,0xc8,0x102)]){const _0x3717a9={};return _0x3717a9['results']=[],_0x3717a9[_0x396abf(0x142,0xb1,0x102,0x11a)+'t']='',_0x3717a9['originalTa'+'gs']=[],_0x3717a9;}else{if(_0x50d2cf){const _0x25ef88=_0x50d2cf['apply'](_0x16a124,arguments);return _0x50d2cf=null,_0x25ef88;}}}:function(){};return _0x4d7517=![],_0x506e5b;}};}()),_0x756165=_0x35a128(this,function(){function _0x3b343a(_0x30614f,_0xc53e40,_0x291f57,_0x504c9a){return _0x3274(_0x30614f- -0x63,_0x504c9a);}const _0x56aee5={};_0x56aee5[_0x3b343a(0x15b,0x178,0x1a8,0xef)]=_0x14f227(0x54,0x58,0x26,0x58)+'+$';const _0x1d9b79=_0x56aee5;function _0x14f227(_0x1b5469,_0x1418e9,_0x4f1c65,_0x2b5ee0){return _0x3274(_0x2b5ee0- -0xf5,_0x4f1c65);}return _0x756165[_0x3b343a(0x10f,0xc5,0x12d,0x14b)]()[_0x14f227(0xea,0xd4,0x85,0x9d)](_0x1d9b79[_0x14f227(0x8a,0x12a,0x76,0xc9)])[_0x3b343a(0x10f,0xde,0x15a,0x139)]()['constructo'+'r'](_0x756165)[_0x3b343a(0x12f,0xe8,0xce,0x136)](_0x3b343a(0xea,0xd8,0xc2,0xa4)+'+$');});_0x756165();import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{extensionName,eventNames}from'./config.js';import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{mergeAdjacentMessages}from'./promptProcessor.js';function _0x3274(_0x50efce,_0x198e8c){_0x50efce=_0x50efce-(-0x239c+0xf7e+-0x154b*-0x1);const _0x4a78ac=_0x2051();let _0x58bd76=_0x4a78ac[_0x50efce];if(_0x3274['vBIuGc']===undefined){var _0x3a53ab=function(_0x1f78bf){const _0x55221b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3f463b='',_0x435d69='',_0x43bf81=_0x3f463b+_0x3a53ab;for(let _0x3db6bf=0x4*0x91+-0x1018+0xa*0x162,_0x1013cc,_0x49f12e,_0x140ccf=0x947*-0x1+-0xd36+0x167d;_0x49f12e=_0x1f78bf['charAt'](_0x140ccf++);~_0x49f12e&&(_0x1013cc=_0x3db6bf%(-0x59c*-0x3+0x17*-0x49+-0xf*0xaf)?_0x1013cc*(-0x6a*0x16+0xc32+-0x21*0x16)+_0x49f12e:_0x49f12e,_0x3db6bf++%(0x2*-0xe4+0x8d*-0x43+-0x1*-0x26b3))?_0x3f463b+=_0x43bf81['charCodeAt'](_0x140ccf+(0x1ee+0x1124+-0x1308))-(0x1bd+-0x30*0x6d+-0x171*-0xd)!==0x1090+0xbef+-0x1*0x1c7f?String['fromCharCode'](-0x147d*0x1+0x2606+-0x108a&_0x1013cc>>(-(0x4*0x3b3+-0x5*0x279+0x1b*-0x17)*_0x3db6bf&0x1e7*-0x5+0x1*0x24da+-0x25*0xbd)):_0x3db6bf:0x7*-0x18b+0x1e43*-0x1+-0xdb*-0x30){_0x49f12e=_0x55221b['indexOf'](_0x49f12e);}for(let _0x926393=0x44d+0x22f8+0x9*-0x45d,_0x388f1a=_0x3f463b['length'];_0x926393<_0x388f1a;_0x926393++){_0x435d69+='%'+('00'+_0x3f463b['charCodeAt'](_0x926393)['toString'](0x2643+0x18f*0x3+-0x2ae0))['slice'](-(0xdf*-0x2+-0x1*0x9a6+-0x2*-0x5b3));}return decodeURIComponent(_0x435d69);};_0x3274['zaoBWE']=_0x3a53ab,_0x3274['WPqWjZ']={},_0x3274['vBIuGc']=!![];}const _0x3cd7cc=_0x4a78ac[-0x16a0+0xa8e+0xc12],_0x50d22d=_0x50efce+_0x3cd7cc,_0xdf2b57=_0x3274['WPqWjZ'][_0x50d22d];if(!_0xdf2b57){const _0x2b43c8=function(_0x581543){this['JmSXCE']=_0x581543,this['yqsbcq']=[0x5*-0x3f1+0x7*-0x3b+0x1553,0xe7a*-0x1+-0x185c*0x1+-0x26d6*-0x1,0x2114+0x49b+-0x36d*0xb],this['MhMIHt']=function(){return'newState';},this['jEtpVd']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['yEvcFV']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2b43c8['prototype']['XfcfUx']=function(){const _0x44d425=new RegExp(this['jEtpVd']+this['yEvcFV']),_0x205052=_0x44d425['test'](this['MhMIHt']['toString']())?--this['yqsbcq'][0x1c17+-0x7*-0x4a1+0x3c7d*-0x1]:--this['yqsbcq'][0x17f6+-0x25ac+0xdb6];return this['jPgwNh'](_0x205052);},_0x2b43c8['prototype']['jPgwNh']=function(_0x45f574){if(!Boolean(~_0x45f574))return _0x45f574;return this['qdJGeM'](this['JmSXCE']);},_0x2b43c8['prototype']['qdJGeM']=function(_0x31010c){for(let _0x3fb58e=0x12d5*-0x1+0x127e+-0x57*-0x1,_0x582c63=this['yqsbcq']['length'];_0x3fb58e<_0x582c63;_0x3fb58e++){this['yqsbcq']['push'](Math['round'](Math['random']())),_0x582c63=this['yqsbcq']['length'];}return _0x31010c(this['yqsbcq'][0x22*-0xd+0x12a8+-0x10ee]);},new _0x2b43c8(_0x3274)['XfcfUx'](),_0x58bd76=_0x3274['zaoBWE'](_0x58bd76),_0x3274['WPqWjZ'][_0x50d22d]=_0x58bd76;}else _0x58bd76=_0xdf2b57;return _0x58bd76;}let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0x18c700){function _0x2948da(_0x4ab55f,_0x4dc932,_0x4222f2,_0x2523f1){return _0x3274(_0x4222f2- -0x24a,_0x4ab55f);}function _0x3352a8(_0x3e1e26,_0x2d6e38,_0x7eb9d1,_0x9458e){return _0x3274(_0x2d6e38-0x177,_0x3e1e26);}return SKIP_PATTERNS[_0x2948da(-0x9e,-0x7b,-0x50,-0x30)](_0x34ad55=>_0x34ad55[_0x2948da(-0xff,-0x134,-0xd6,-0xeb)](_0x18c700[_0x3352a8(0x381,0x339,0x386,0x316)]()));}export function tagsToJsonString(_0x1bba27){function _0x487831(_0x290ba2,_0x2544b1,_0x395d3a,_0x42f420){return _0x3274(_0x42f420- -0x380,_0x395d3a);}if(!Array[_0x538c1d(0x30e,0x39e,0x35b,0x33f)](_0x1bba27))return'[]';function _0x538c1d(_0x90ce9d,_0x2bfdb1,_0x444311,_0x196006){return _0x3274(_0x196006-0x1bd,_0x444311);}return JSON[_0x487831(-0x170,-0x1d8,-0x21e,-0x1d6)](_0x1bba27[_0x538c1d(0x2e8,0x2a0,0x2d1,0x2fa)](_0x2e067c=>_0x2e067c&&typeof _0x2e067c===_0x538c1d(0x3a3,0x400,0x3ae,0x3a0)));}export function preprocessPromptForTranslation(_0x5e9a09){function _0xf969e6(_0x2e00e5,_0x1aa6a0,_0x51dbe1,_0xb82763){return _0x3274(_0x1aa6a0- -0x2a6,_0x51dbe1);}const _0x2a5e23={'PpIwe':function(_0x30422a,_0x281b79){return _0x30422a===_0x281b79;},'eEyxS':function(_0x491102,_0x9360d6){return _0x491102!==_0x9360d6;},'CcIna':function(_0x32bad2,_0x41502f){return _0x32bad2<_0x41502f;},'fzyZm':function(_0x50d2fd,_0x3cd2f5){return _0x50d2fd===_0x3cd2f5;},'AdMaR':_0xf969e6(-0x19b,-0x141,-0x184,-0xf0),'ZnNJq':function(_0x1f9cfd,_0x3c849f){return _0x1f9cfd===_0x3c849f;},'NlSGa':function(_0x18573d,_0x219a75){return _0x18573d===_0x219a75;},'UtoAk':_0x2e116a(0x95,0x44,0xe9,0xdc),'TGQej':_0x2e116a(0x93,0xef,0x55,0xf6),'aPcHs':function(_0x5c1b68,_0x22e0ab){return _0x5c1b68(_0x22e0ab);},'FEVPD':function(_0x3af37a,_0x44ae2f){return _0x3af37a!==_0x44ae2f;},'obYjK':_0xf969e6(-0xf9,-0xa8,-0xc7,-0x93),'QtWFL':_0x2e116a(0x66,0x9a,0x43,0x48),'VvPrU':function(_0x3537bb,_0x4e15dc){return _0x3537bb===_0x4e15dc;},'RtcjL':'JFJNJ'};if(!_0x5e9a09||_0x2a5e23[_0x2e116a(0x1b,0x27,0x58,-0x1f)](typeof _0x5e9a09,_0x2a5e23[_0x2e116a(0x9b,0x6e,0xbd,0x100)]))return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()};const _0x18ae0c=_0x49c13a=>{const _0x3a5c99={'hCicJ':function(_0x9176e5,_0x308f2c){function _0x572792(_0x33fd5a,_0x7dd6af,_0x347260,_0x23ffa5){return _0x3274(_0x7dd6af-0x1c,_0x23ffa5);}return _0x2a5e23[_0x572792(0x1bf,0x1b1,0x16f,0x1a2)](_0x9176e5,_0x308f2c);},'czfPd':_0x2246bd(0x1fc,0x18d,0x1c1,0x171),'oRALn':function(_0x442884,_0x19a209){function _0x5e00ee(_0x2da50a,_0x4912e0,_0x417b32,_0x56a4ae){return _0x2246bd(_0x56a4ae,_0x4912e0-0x103,_0x417b32-0xbd,_0x56a4ae-0x1c8);}return _0x2a5e23[_0x5e00ee(0x244,0x24c,0x1ed,0x254)](_0x442884,_0x19a209);},'RwNyM':function(_0x369b17,_0x37b5be){return _0x369b17+_0x37b5be;}},_0x4ee837=[];let _0x54e30c='';function _0x2a0975(_0x1afc7f,_0x2dc54b,_0x2bdb2b,_0x32d98c){return _0xf969e6(_0x1afc7f-0x8,_0x2bdb2b- -0xbd,_0x1afc7f,_0x32d98c-0x4f);}let _0x3d5ec8=![];for(let _0x5b78ad=0x10*0x9e+-0x881+-0x1b*0xd;_0x2a5e23[_0x2a0975(-0x27b,-0x20d,-0x222,-0x1d5)](_0x5b78ad,_0x49c13a['length']);_0x5b78ad++){if(_0x2a5e23[_0x2246bd(0xe6,0xb9,0x10e,0xc6)](_0x2a5e23[_0x2a0975(-0x166,-0x22e,-0x1ca,-0x1e2)],'xtDvG')){const _0x48ef37=_0x49c13a[_0x5b78ad];if(_0x2a5e23['PpIwe'](_0x48ef37,'$'))_0x3d5ec8=!_0x3d5ec8,_0x54e30c+=_0x48ef37;else{if((_0x2a5e23[_0x2246bd(0x197,0x1d0,0x18d,0x145)](_0x48ef37,',')||_0x2a5e23['PpIwe'](_0x48ef37,'，'))&&!_0x3d5ec8){if(_0x2a5e23['NlSGa'](_0x2a5e23['UtoAk'],_0x2a5e23[_0x2a0975(-0x249,-0x229,-0x211,-0x249)])){const _0x10f76b=_0x54e30c['trim']();if(_0x10f76b)_0x4ee837[_0x2246bd(0x1fe,0x1c4,0x1c4,0x169)](_0x10f76b);_0x54e30c='';}else{const _0x2790df=_0x404b73['parse'](_0x2dda82[-0x4*-0xc9+-0x9fe*-0x2+-0x1720]);if(_0x3a5c99['hCicJ'](typeof _0x2790df,_0x3a5c99[_0x2a0975(-0x18a,-0x1d3,-0x188,-0x13a)])&&_0x3a5c99['oRALn'](_0x2790df,null))return _0x2790df;}}else _0x54e30c+=_0x48ef37;}}else{if(_0x4491cf&&_0x3085f6[_0x2a0975(-0x242,-0x1c8,-0x229,-0x25f)])return _0x424aae['randomUUID']();return _0x3a5c99[_0x2a0975(-0x200,-0x1a1,-0x1cb,-0x1f8)](_0xc75a79['now']()[_0x2a0975(-0x230,-0x1a0,-0x1f1,-0x257)](0x26d3+-0x1e9*-0xc+-0x7*0x8cd),_0x2b910c[_0x2246bd(0x18e,0xf0,0x150,0x130)]()[_0x2a0975(-0x24c,-0x24a,-0x1f1,-0x236)](0x1b6e+-0x1da2+0x14*0x1e)[_0x2a0975(-0x24d,-0x1de,-0x206,-0x1f6)](-0x4*-0x1cc+-0x33*-0xb9+-0x2c09*0x1));}}function _0x2246bd(_0x10aa13,_0xa1a720,_0x2a8152,_0x33933e){return _0x2e116a(_0x2a8152-0x115,_0xa1a720-0x1cb,_0x10aa13,_0x33933e-0x1c4);}if(_0x54e30c['trim']())_0x4ee837[_0x2a0975(-0x132,-0x1a9,-0x164,-0x167)](_0x54e30c[_0x2a0975(-0x170,-0x13d,-0x1a1,-0x156)]());return _0x4ee837;},_0x5c7453=_0x2a5e23[_0x2e116a(0x9f,0xf8,0xd7,0xb3)](_0x18ae0c,_0x5e9a09),_0x2d7753=[];function _0x2e116a(_0x2e78de,_0x4e62f2,_0x18ab40,_0x441e97){return _0x3274(_0x2e78de- -0x150,_0x18ab40);}const _0x3628dd=[],_0x32ba52=new Map();for(const _0x196e03 of _0x5c7453){if(_0x2a5e23[_0xf969e6(-0xd9,-0xf2,-0x157,-0xbb)](_0x2a5e23[_0x2e116a(0x82,0x85,0x23,0x58)],_0x2a5e23[_0x2e116a(0x82,0xae,0xb5,0x31)])){const _0x1e3467=_0x2e3391['apply'](_0x3f1b33,arguments);return _0x1a1d34=null,_0x1e3467;}else{const _0x1342d9=_0x196e03[_0xf969e6(-0x145,-0xe7,-0xd2,-0x115)](SD_SYMBOL_PATTERN);if(_0x1342d9){if(_0x2a5e23[_0x2e116a(0x78,0x83,0x60,0xa4)](_0x2e116a(0x66,0x3c,0xc1,0xbf),_0x2a5e23[_0xf969e6(-0x1ae,-0x144,-0xe0,-0x125)])){const _0x17113c=_0x1342d9[0xcfb+-0x1*-0x1d09+-0x2a03]||'',_0x1e827e=(_0x1342d9[-0x106*-0x7+-0xf8f*0x1+0x867]||'')[_0xf969e6(-0xa5,-0xe4,-0xb2,-0x93)](),_0x9c154=_0x1342d9[-0x15*-0x5c+-0x1594*0x1+0x5*0x2cf]||'',_0x4fc80e=_0x1342d9[-0x2547*-0x1+-0x1faf+-0x3*0x1dc]||'',_0x4551b2={'original':_0x196e03,'cleaned':_0x1e827e,'prefix':_0x17113c,'suffix':_0x9c154,'weight':_0x4fc80e,'skip':_0x2a5e23['aPcHs'](shouldSkipTranslation,_0x196e03)||_0x2a5e23[_0x2e116a(0x9f,0xc3,0xc6,0x58)](shouldSkipTranslation,_0x1e827e)};_0x2d7753[_0x2e116a(0xaf,0x107,0xe4,0x44)](_0x4551b2),!_0x4551b2[_0xf969e6(-0x102,-0x16a,-0x11a,-0x184)]&&_0x1e827e&&(_0x2a5e23['VvPrU'](_0x2a5e23[_0xf969e6(-0x84,-0xa3,-0x4a,-0xc8)],_0x2a5e23['RtcjL'])?(_0x3628dd[_0xf969e6(-0xbe,-0xa7,-0xb7,-0xfd)](_0x1e827e),_0x32ba52[_0x2e116a(-0x15,0x17,0x22,0x6)](_0x1e827e[_0x2e116a(0x6b,0xa9,0xa9,0xcb)+'e'](),_0x4551b2)):_0x425a86+=_0x1e6be9);}else{const _0x17cecb=_0x15d5c1[_0xf969e6(-0xb6,-0xd9,-0x10c,-0x87)](-0x1b04+-0x154d+0x3051,_0x5d36d5)[_0xf969e6(-0x92,-0xe4,-0x114,-0xa8)](),_0x566c92=_0x37e275[_0x2e116a(0x7d,0xdf,0x17,0x99)](_0x4e0716+(0x2000+0x908+-0x3*0xdad))[_0x2e116a(0x72,0x32,0x47,0x18)]();if(_0x17cecb)_0x1817af[_0x17cecb]=_0x566c92;}}else{const _0x1074d2={'original':_0x196e03,'cleaned':_0x196e03,'prefix':'','suffix':'','weight':'','skip':_0x2a5e23[_0x2e116a(0x9f,0x97,0x76,0xc1)](shouldSkipTranslation,_0x196e03)};_0x2d7753['push'](_0x1074d2),!_0x1074d2['skip']&&_0x196e03&&(_0x3628dd[_0xf969e6(-0xef,-0xa7,-0x4b,-0x68)](_0x196e03),_0x32ba52[_0xf969e6(-0x133,-0x16b,-0x132,-0x192)](_0x196e03['toLowerCas'+'e'](),_0x1074d2));}}}return{'originalTags':_0x2d7753,'cleanedTags':_0x3628dd,'cleanedText':tagsToJsonString(_0x3628dd),'tagMap':_0x32ba52};}export function combineTranslationResult(_0x28d643,_0x3f0731){const _0x69ff2a={'nbVXl':function(_0x48770e,_0x7a4a22){return _0x48770e(_0x7a4a22);},'pVxHX':'获取翻译提示词超时','GHgoK':function(_0x410819){return _0x410819();},'txWKv':function(_0xa55f07,_0xeffa03,_0x1dd1ef){return _0xa55f07(_0xeffa03,_0x1dd1ef);},'tNLyQ':_0x28c714(0x5bd,0x509,0x4ed,0x556),'AisCc':_0x38cc08(0xa3,0x52,0xa3,0x5e),'JQdhm':_0x28c714(0x590,0x584,0x550,0x52b)};if(!_0x28d643||!Array['isArray'](_0x28d643)){if(_0x69ff2a[_0x28c714(0x4c6,0x4db,0x537,0x525)]!==_0x69ff2a[_0x38cc08(0x79,0xa,0x45,0x2)]){const _0x2a7939=_0x69ff2a[_0x38cc08(0x51,-0x3,0x17,0x38)](_0x581c07);_0x4b2baf[_0x28c714(0x52a,0x537,0x536,0x548)]('st-chatu8:'+_0x38cc08(0x7f,0xbf,0x5b,0xa9)+_0x38cc08(0x73,0x31,0x58,0x5e)+_0x2a7939+')');const _0x5dad06=_0x17343d=>{if(_0x17343d['id']!==_0x2a7939)return;_0x57b4f5[_0xe1dc0e(0x401,0x3a8,0x3ff,0x373)+_0x499427(0x297,0x30b,0x2b2,0x2b3)](_0x10fa2b[_0xe1dc0e(0x356,0x392,0x32b,0x3fc)+_0xe1dc0e(0x2ff,0x339,0x2e7,0x35a)+_0xe1dc0e(0x328,0x349,0x35d,0x2fa)+_0x499427(0x256,0x200,0x250,0x1f1)],_0x5dad06);function _0xe1dc0e(_0x151cf9,_0x514227,_0x4c903f,_0x320e85){return _0x28c714(_0x4c903f,_0x514227-0x17b,_0x4c903f-0x8c,_0x514227- -0x1d3);}const {prompt:_0x5a9245}=_0x17343d;_0x14643e[_0x499427(0x310,0x2fb,0x2ac,0x297)]('st-chatu8:'+_0xe1dc0e(0x2e5,0x32d,0x2f8,0x383)+'(ID:\x20'+_0x2a7939+'):',_0x5a9245);function _0x499427(_0x32d00e,_0x5a6433,_0x357dfb,_0x2deb1c){return _0x28c714(_0x5a6433,_0x5a6433-0x169,_0x357dfb-0x12a,_0x357dfb- -0x29c);}_0x69ff2a['nbVXl'](_0x2d6bb4,_0x5a9245);};_0x2e487d['on'](_0x47d41a[_0x28c714(0x587,0x54f,0x5be,0x565)+_0x28c714(0x501,0x4ec,0x4c0,0x50c)+_0x28c714(0x500,0x587,0x4cf,0x51c)+'PONSE'],_0x5dad06);const _0x4c9c0e={};_0x4c9c0e['id']=_0x2a7939,_0x2d93bd['emit'](_0x1efcd2[_0x28c714(0x5bf,0x55d,0x581,0x565)+_0x28c714(0x541,0x50d,0x4eb,0x50c)+_0x38cc08(0x77,0xca,0x60,0xb7)+_0x28c714(0x58f,0x5ad,0x60a,0x5a9)],_0x4c9c0e),_0x69ff2a[_0x28c714(0x5df,0x5ae,0x547,0x595)](_0x980809,()=>{_0x1e0d4c[_0x3aae87(-0x258,-0x213,-0x1c8,-0x1c4)+_0x3a17df(0x2c2,0x288,0x2b8,0x2f1)](_0x2b1ecb[_0x3a17df(0x236,0x29f,0x2da,0x300)+_0x3a17df(0x294,0x246,0x281,0x1ee)+_0x3a17df(0x272,0x256,0x29c,0x286)+_0x3a17df(0x269,0x226,0x266,0x274)],_0x5dad06);function _0x3a17df(_0x5c89f8,_0x6306f7,_0x4c7cc2,_0x586f0c){return _0x38cc08(_0x5c89f8-0x92,_0x5c89f8,_0x6306f7-0x21a,_0x586f0c-0xf0);}function _0x3aae87(_0x4cf84c,_0x1a264d,_0x20f4a9,_0xf509fd){return _0x28c714(_0xf509fd,_0x1a264d-0xce,_0x20f4a9-0x175,_0x1a264d- -0x78e);}_0x69ff2a[_0x3a17df(0x2ba,0x2d7,0x26c,0x27c)](_0x7a045a,new _0x39f78a(_0x69ff2a['pVxHX']));},0x3d5+0x15ab+0xd90);}else return[];}const _0x5cb5d2={};if(_0x3f0731&&typeof _0x3f0731===_0x38cc08(0x12c,0x76,0xd0,0x13b)){if(_0x69ff2a[_0x28c714(0x5e8,0x535,0x589,0x587)]!==_0x69ff2a[_0x28c714(0x585,0x595,0x5a2,0x545)])for(const [_0x1f98b0,_0x526e57]of Object[_0x38cc08(0x127,0xab,0xc4,0xe4)](_0x3f0731)){_0x5cb5d2[_0x1f98b0['toLowerCas'+'e']()]=_0x526e57;}else{const _0x32fc0f={};return _0x32fc0f[_0x38cc08(0xcc,0xa8,0x99,0x42)]=_0x55093b,_0x32fc0f[_0x38cc08(0x69,-0x3b,0xb,0x48)+'n']='',_0x32fc0f['cleaned']=_0x4aa2ab,_0x32fc0f[_0x28c714(0x522,0x59d,0x4e9,0x551)]=!![],_0x32fc0f;}}function _0x38cc08(_0x30de1e,_0x3e8699,_0x3400d8,_0x2fed34){return _0x3274(_0x3400d8- -0x12c,_0x3e8699);}function _0x28c714(_0x34a554,_0x5c4dae,_0x2075cd,_0x272c67){return _0x3274(_0x272c67-0x3b4,_0x34a554);}return _0x28d643[_0x38cc08(0x34,0x81,0x8b,0x9e)](_0x5415e3=>{const {original:_0x39895b,cleaned:_0x498f1c,skip:_0x35765c}=_0x5415e3;if(_0x35765c){const _0x4dc5bc={};return _0x4dc5bc[_0x2f23b8(0x349,0x399,0x39c,0x33f)]=_0x39895b,_0x4dc5bc['translatio'+'n']='',_0x4dc5bc['cleaned']=_0x498f1c,_0x4dc5bc[_0x2f23b8(0x386,0x35f,0x374,0x35c)]=!![],_0x4dc5bc;}const _0x54b903=_0x5cb5d2[_0x498f1c[_0x2f23b8(0x391,0x329,0x392,0x335)+'e']()]||'',_0x1303b3={};_0x1303b3['original']=_0x39895b;function _0x45d8bb(_0x245e7d,_0x8334d2,_0x138522,_0x7e5732){return _0x38cc08(_0x245e7d-0x1b6,_0x8334d2,_0x7e5732-0x2c8,_0x7e5732-0xfd);}_0x1303b3[_0x2f23b8(0x376,0x307,0x30e,0x2d1)+'n']=_0x54b903;function _0x2f23b8(_0x3cc377,_0x3d92a5,_0x3eeaee,_0x35cc4e){return _0x38cc08(_0x3cc377-0x1b3,_0x3d92a5,_0x3eeaee-0x303,_0x35cc4e-0xae);}return _0x1303b3[_0x2f23b8(0x3be,0x3a1,0x3b7,0x40c)]=_0x498f1c,_0x1303b3['skipped']=![],_0x1303b3;});}export function formatTranslationDisplay(_0x4da3a2,_0xd7de71={}){const _0xb16de4={'OFXZR':function(_0x33bc6e,_0xf31207){return _0x33bc6e!==_0xf31207;},'FIomG':function(_0x5dfc6b,_0xcfe609){return _0x5dfc6b(_0xcfe609);},'XHTkA':_0x9da412(-0x203,-0x24b,-0x1f5,-0x20a),'INORH':function(_0x23526d,_0x2ef192,_0x8d844d){return _0x23526d(_0x2ef192,_0x8d844d);},'bxNUx':_0x9da412(-0x258,-0x1df,-0x21a,-0x24b),'TKjJK':function(_0x203b24,_0x3cc494){return _0x203b24===_0x3cc494;},'YqQaC':_0x1aef08(0x31f,0x2e1,0x325,0x2eb),'cVpmd':function(_0x39ccb6,_0x28b894){return _0x39ccb6===_0x28b894;},'NnCLA':_0x9da412(-0x197,-0x150,-0x16d,-0x19c)};function _0x1aef08(_0x2388dd,_0x148490,_0x4e7303,_0x18426d){return _0x3274(_0x148490-0x13b,_0x4e7303);}const {separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0xd7de71;if(!_0x4da3a2||!Array[_0x9da412(-0x1cd,-0x1a5,-0x1db,-0x210)](_0x4da3a2)){if(_0xb16de4['cVpmd'](_0x1aef08(0x2de,0x331,0x350,0x397),_0xb16de4['NnCLA']))return'';else{const _0xc45b96={'VtMjo':function(_0x49521c,_0x58b1bd){return _0xb16de4['OFXZR'](_0x49521c,_0x58b1bd);},'rxuBm':function(_0x4ef532,_0x30c34a){function _0x65adfa(_0x4de442,_0x13281e,_0x26a67c,_0x1b3325){return _0x1aef08(_0x4de442-0x16a,_0x26a67c- -0x46f,_0x1b3325,_0x1b3325-0x17c);}return _0xb16de4[_0x65adfa(-0x19c,-0x160,-0x142,-0xfc)](_0x4ef532,_0x30c34a);},'DBlTW':function(_0x341222,_0x407acd){function _0x68cc1f(_0xab3ac2,_0x3deec8,_0x758ff1,_0x3430df){return _0x1aef08(_0xab3ac2-0x194,_0x758ff1- -0x1cc,_0x3deec8,_0x3430df-0x1e7);}return _0xb16de4[_0x68cc1f(0x153,0x1a4,0x161,0x131)](_0x341222,_0x407acd);},'wzBQJ':_0xb16de4['XHTkA'],'VGutS':function(_0xdcfe13,_0x435a92,_0x54794e){function _0x25ceee(_0x519d04,_0x53755f,_0x2fb4b3,_0x12d66b){return _0x9da412(_0x519d04-0x14d,_0x53755f-0x102,_0x2fb4b3,_0x12d66b- -0x38);}return _0xb16de4[_0x25ceee(-0x209,-0x27a,-0x1c0,-0x210)](_0xdcfe13,_0x435a92,_0x54794e);}};return new _0x5ac74b((_0x5885c6,_0x300430)=>{function _0x50f446(_0xddd371,_0x1412fa,_0x5216e4,_0x56db31){return _0x1aef08(_0xddd371-0xb6,_0x56db31- -0x481,_0x1412fa,_0x56db31-0x187);}const _0x5ec6fa={'yPQqD':function(_0x4b3203,_0x1596f4){function _0x45b5ef(_0x3519f7,_0x223668,_0xd724c6,_0x137353){return _0x3274(_0x137353-0x3e1,_0x3519f7);}return _0xc45b96[_0x45b5ef(0x574,0x5ef,0x566,0x594)](_0x4b3203,_0x1596f4);},'oEDbi':_0xc45b96[_0x57a382(-0x216,-0x27a,-0x24c,-0x25c)]},_0x122d90=_0x4e301f();_0x5580c8[_0x57a382(-0x204,-0x27f,-0x2b7,-0x251)](_0x50f446(-0x23b,-0x1c9,-0x1b7,-0x1f6)+_0x50f446(-0x1a6,-0x18e,-0x1ba,-0x1bf)+_0x57a382(-0x204,-0x257,-0x2b0,-0x261)+_0x122d90+')');const _0x20aa3e=_0x5d517d=>{if(_0xc45b96[_0x2cf299(0x304,0x2ff,0x350,0x340)](_0x5d517d['id'],_0x122d90))return;_0x2b7974['removeList'+_0x593795(0x4bf,0x514,0x4cf,0x4d6)](_0x4bea0e['LLM_TRANSL'+_0x2cf299(0x356,0x352,0x2f6,0x322)+_0x2cf299(0x368,0x30e,0x326,0x332)+'PONSE'],_0x20aa3e);function _0x2cf299(_0x3c7b5a,_0x236b56,_0x59d853,_0x5e6f8b){return _0x50f446(_0x3c7b5a-0x1df,_0x236b56,_0x59d853-0xa5,_0x5e6f8b-0x510);}const {prompt:_0x5dd6e2}=_0x5d517d;function _0x593795(_0x15478c,_0x35c4d2,_0x3d431c,_0x40c664){return _0x57a382(_0x15478c-0xf0,_0x35c4d2-0x153,_0x15478c,_0x40c664-0x721);}_0x210832['log'](_0x2cf299(0x2ec,0x31a,0x365,0x31a)+_0x2cf299(0x314,0x36f,0x326,0x316)+_0x2cf299(0x387,0x3e1,0x365,0x393)+_0x122d90+'):',_0x5dd6e2),_0xc45b96[_0x2cf299(0x2fd,0x2ae,0x2dc,0x300)](_0x5885c6,_0x5dd6e2);};_0x5ec598['on'](_0x5cde6c['LLM_TRANSL'+_0x50f446(-0x210,-0x193,-0x1d6,-0x1ee)+_0x50f446(-0x219,-0x21f,-0x222,-0x1de)+_0x50f446(-0x1d8,-0x21d,-0x21b,-0x20e)],_0x20aa3e);const _0x573639={};_0x573639['id']=_0x122d90,_0x3473bb[_0x50f446(-0x1b8,-0x1ac,-0x1d8,-0x1d1)](_0x2ce585[_0x57a382(-0x223,-0x1fc,-0x1eb,-0x234)+_0x57a382(-0x275,-0x298,-0x26e,-0x28d)+_0x50f446(-0x1bb,-0x1d4,-0x1fa,-0x1ba)+'UEST'],_0x573639);function _0x57a382(_0x499549,_0x446889,_0x55f545,_0x487455){return _0x9da412(_0x499549-0x126,_0x446889-0x6,_0x55f545,_0x487455- -0x53);}_0xc45b96[_0x57a382(-0x20f,-0x248,-0x2b5,-0x260)](_0x219786,()=>{function _0x471a8c(_0x514958,_0x392f0,_0x489851,_0x576f54){return _0x50f446(_0x514958-0xa0,_0x576f54,_0x489851-0x138,_0x489851-0x700);}_0x115592['removeList'+_0x471a8c(0x523,0x5b9,0x554,0x56e)](_0x2c4878[_0x48e37a(0xf,0x32,0x88,0x6)+_0x48e37a(-0x75,-0x27,-0x88,0x44)+_0x471a8c(0x522,0x508,0x522,0x57a)+_0x48e37a(-0x2d,-0x47,-0x8d,-0x47)],_0x20aa3e);function _0x48e37a(_0x446d80,_0xa1630c,_0x4ee56d,_0xfceccb){return _0x50f446(_0x446d80-0xba,_0x446d80,_0x4ee56d-0x1f2,_0xa1630c-0x1c7);}_0x5ec6fa[_0x48e37a(-0x46,-0x3d,0x24,0x4)](_0x300430,new _0x345fc1(_0x5ec6fa['oEDbi']));},0x4a78+-0x1d7d*-0x2+-0x5e62);});}}function _0x9da412(_0x58f462,_0x4bb4b7,_0x79d9f3,_0x3c8f46){return _0x3274(_0x3c8f46- -0x392,_0x79d9f3);}return _0x4da3a2[_0x9da412(-0x1d6,-0x1f0,-0x210,-0x1db)](_0x5dfac9=>{if(_0x5dfac9[_0x3496dc(0xb7,0x9c,0xe7,0xef)]){if(_0xb16de4[_0x4188a5(-0x1d5,-0x1f4,-0x1ee,-0x1e1)](_0x4188a5(-0x276,-0x2ae,-0x27b,-0x2aa),_0xb16de4['bxNUx']))_0x50616b[_0x4188a5(-0x2be,-0x252,-0x278,-0x2af)]('st-chatu8:'+_0x3496dc(0x93,0x6d,0x61,0xd8)+'尝试旧格式:',_0x547a74[_0x4188a5(-0x23b,-0x1d5,-0x1ff,-0x21c)]);else return showOriginal?_0x5dfac9[_0x4188a5(-0x1ec,-0x1a0,-0x1fd,-0x257)]:'';}const _0x113932=[];if(showOriginal)_0x113932[_0x4188a5(-0x1b5,-0x212,-0x1c3,-0x183)](_0x5dfac9['original']);if(showTranslation&&_0x5dfac9[_0x3496dc(0x51,0x4e,0x7a,0x44)+'n']){if(_0xb16de4[_0x4188a5(-0x256,-0x266,-0x201,-0x213)](_0xb16de4['YqQaC'],_0x3496dc(0x96,0x57,0x91,0x6a)))return _0x423ce4;else _0x113932[_0x3496dc(0x119,0xe6,0x137,0x108)]('('+_0x5dfac9['translatio'+'n']+')');}function _0x4188a5(_0x3d3147,_0x3aa6f9,_0x5543c7,_0x5b8d57){return _0x1aef08(_0x3d3147-0xdf,_0x5543c7- -0x4fd,_0x3d3147,_0x5b8d57-0x2b);}function _0x3496dc(_0x31e6d,_0x4f2786,_0x3a5ffa,_0x181ef7){return _0x9da412(_0x31e6d-0x153,_0x4f2786-0xac,_0x3a5ffa,_0x31e6d-0x2ac);}return _0x113932[_0x4188a5(-0x1d1,-0x23f,-0x21b,-0x243)]('\x20');})[_0x9da412(-0x1ea,-0x2bc,-0x22f,-0x255)](Boolean)[_0x1aef08(0x2a1,0x2e2,0x2e2,0x2f9)](separator);}export async function translatePromptTags(_0x5d506d){const _0x216f2d={'znaxb':_0x27e412(-0x283,-0x2a8,-0x2cd,-0x264)+'+$','UrajF':function(_0x23e981,_0x59359a){return _0x23e981(_0x59359a);},'EEVcr':function(_0x203a91,_0x309c1e){return _0x203a91===_0x309c1e;},'YJUfc':'dYZeR','OJWmX':_0x50353e(0x3aa,0x363,0x37f,0x358),'XWoet':function(_0x48636f,_0x578a5b){return _0x48636f!==_0x578a5b;},'QaHJV':_0x50353e(0x397,0x34e,0x3bf,0x333),'QthVM':function(_0x269891,_0x1cf6aa){return _0x269891(_0x1cf6aa);},'ZcntC':function(_0x482ccb,_0x2626f4,_0x1e9b8a){return _0x482ccb(_0x2626f4,_0x1e9b8a);},'bUYNK':function(_0x38959e,_0x237014){return _0x38959e!==_0x237014;},'CTWbx':_0x27e412(-0x281,-0x252,-0x22a,-0x282)};function _0x27e412(_0x3a7573,_0x426dff,_0x37de6f,_0x327b7f){return _0x3274(_0x327b7f- -0x3b1,_0x37de6f);}const {originalTags:_0x55772f,cleanedText:_0xb82ea7}=_0x216f2d['UrajF'](preprocessPromptForTranslation,_0x5d506d);if(!_0xb82ea7){if(_0x216f2d[_0x27e412(-0x25c,-0x236,-0x299,-0x250)](_0x216f2d[_0x27e412(-0x19a,-0x26b,-0x21b,-0x202)],_0x216f2d[_0x27e412(-0x290,-0x225,-0x2c1,-0x26c)]))for(const [_0x2a0a95,_0xf2db9c]of _0xcd48d7[_0x27e412(-0x1dc,-0x189,-0x198,-0x1c1)](_0x31d711)){_0x2fcad8[_0x2a0a95['toLowerCas'+'e']()]=_0xf2db9c;}else{const _0xae4726={};return _0xae4726[_0x27e412(-0x22b,-0x260,-0x277,-0x281)]=[],_0xae4726[_0x27e412(-0x226,-0x1ee,-0x255,-0x1f8)+'t']='',_0xae4726['originalTa'+'gs']=[],_0xae4726;}}function _0x50353e(_0x2eb42d,_0x21ed51,_0x491a57,_0x31bb5f){return _0x3274(_0x2eb42d-0x1b9,_0x31bb5f);}try{if(_0x216f2d[_0x50353e(0x30f,0x326,0x30d,0x2f7)](_0x216f2d['QaHJV'],_0x216f2d[_0x50353e(0x385,0x3a4,0x3ef,0x346)])){if(_0x4b9ba1){const _0x4398e7=_0x320bae[_0x27e412(-0x22d,-0x27a,-0x1e9,-0x24d)](_0x449c6e,arguments);return _0x2b35af=null,_0x4398e7;}}else{const _0x274c98=await callTranslation(_0xb82ea7),_0x1af8dc=_0x216f2d['QthVM'](parseTranslationResult,_0x274c98),_0x311bb6=_0x216f2d['ZcntC'](combineTranslationResult,_0x55772f,_0x1af8dc),_0x524cd6=formatTranslationDisplay(_0x311bb6),_0x5568df={};return _0x5568df['results']=_0x311bb6,_0x5568df['displayTex'+'t']=_0x524cd6,_0x5568df['originalTa'+'gs']=_0x55772f,_0x5568df;}}catch(_0x336283){if(_0x216f2d[_0x50353e(0x33f,0x2e6,0x399,0x39c)](_0x216f2d[_0x27e412(-0x206,-0x258,-0x1d2,-0x205)],_0x216f2d['CTWbx']))return _0x3e40a8[_0x50353e(0x32b,0x37f,0x2c9,0x32c)]()['search'](BimpRU[_0x50353e(0x319,0x36d,0x318,0x2c6)])[_0x27e412(-0x215,-0x236,-0x249,-0x23f)]()[_0x27e412(-0x248,-0x22a,-0x1ec,-0x236)+'r'](_0x110239)['search'](BimpRU['znaxb']);else{console[_0x50353e(0x393,0x3f1,0x349,0x36f)](_0x27e412(-0x2bb,-0x1f5,-0x23e,-0x261)+_0x27e412(-0x22b,-0x243,-0x22d,-0x209)+':',_0x336283);throw _0x336283;}}}export function parseTranslationResult(_0x118a51){function _0x56bf78(_0x12c320,_0x21edd0,_0x4d0c54,_0x3064d9){return _0x3274(_0x4d0c54-0x15b,_0x3064d9);}const _0x4ebf8a={'KauHt':function(_0x41a2d0,_0x36b778){return _0x41a2d0(_0x36b778);},'tJPXb':_0x2dc3ed(0x25,0x81,0x4c,0xab)+'\x20AI\x20设置已统一到'+_0x2dc3ed(0xa9,0x7f,0x95,0x25),'qqCci':function(_0xfac9eb,_0x27193c){return _0xfac9eb===_0x27193c;},'uNwWb':_0x56bf78(0x306,0x330,0x333,0x38d),'OeUSP':_0x56bf78(0x30d,0x31d,0x343,0x38a),'ECkiT':function(_0x1959bc,_0x91bae7){return _0x1959bc!==_0x91bae7;},'UPBKS':function(_0x599187,_0x2d8450){return _0x599187===_0x2d8450;},'mUNkE':_0x56bf78(0x30d,0x32d,0x338,0x331),'TqtAC':function(_0x55a8ea,_0x56d667){return _0x55a8ea===_0x56d667;},'SjQye':'ckeiM','TukOp':_0x2dc3ed(0xc5,0x81,0xcb,0xc9)+_0x56bf78(0x300,0x26d,0x2d4,0x2ad)+_0x2dc3ed(0xf7,0x10d,0x154,0x113),'BRoHL':function(_0x23848d,_0x4da6a0){return _0x23848d(_0x4da6a0);},'yLkyx':function(_0x466345,_0xa9b6ad){return _0x466345>_0xa9b6ad;},'IDgAd':function(_0x1e6497,_0x97dff8){return _0x1e6497!==_0x97dff8;},'ttOZT':_0x2dc3ed(0x5d,0xae,0xd9,0x6b),'YBqHw':_0x2dc3ed(0x147,0x11f,0xc7,0x17e),'AaStI':function(_0x280ff4,_0x454c04){return _0x280ff4+_0x454c04;}};function _0x2dc3ed(_0x44da39,_0x50d254,_0x5a57a3,_0x344309){return _0x3274(_0x50d254- -0xcf,_0x5a57a3);}if(!_0x118a51)return{};try{const _0xb57a64=_0x118a51[_0x2dc3ed(0x10a,0xf0,0xe3,0x89)](/\{[\s\S]*\}/);if(_0xb57a64){if(_0x4ebf8a['qqCci'](_0x4ebf8a['uNwWb'],_0x4ebf8a[_0x2dc3ed(0xf4,0x9b,0xd5,0x49)])){const _0x485b55=_0x21d077['trim']();if(_0x485b55)_0x17a289['push'](_0x485b55);_0x2db798='';}else{const _0x2c28e8=JSON[_0x56bf78(0x22f,0x2d1,0x28d,0x2bf)](_0xb57a64[0x1cdd+0x1b4f+-0x382c]);if(_0x4ebf8a[_0x2dc3ed(0x92,0x70,0x1b,0x72)](typeof _0x2c28e8,'object')&&_0x4ebf8a['ECkiT'](_0x2c28e8,null)){if(_0x4ebf8a[_0x56bf78(0x2f7,0x2b1,0x2b6,0x317)](_0x2dc3ed(0xac,0x117,0x14b,0x134),_0x4ebf8a['mUNkE'])){const _0x54237d={'original':_0x3f463b,'cleaned':_0x435d69,'prefix':'','suffix':'','weight':'','skip':_0x4ebf8a[_0x56bf78(0x2ae,0x258,0x2ba,0x2b4)](_0x43bf81,_0x3db6bf)};_0x1013cc[_0x56bf78(0x3bf,0x394,0x35a,0x32f)](_0x54237d),!_0x54237d[_0x2dc3ed(0xbb,0x6d,0xc8,0xd2)]&&_0x49f12e&&(_0x581543[_0x2dc3ed(0xca,0x130,0xfb,0x137)](_0x44d425),_0x205052['set'](_0x45f574[_0x2dc3ed(0x93,0xec,0x9b,0x144)+'e'](),_0x54237d));}else return _0x2c28e8;}}}}catch(_0x25342f){_0x4ebf8a[_0x2dc3ed(0x11c,0xfc,0x149,0x10b)](_0x4ebf8a[_0x2dc3ed(0xac,0x86,0x6e,0x6a)],_0x4ebf8a['SjQye'])?console[_0x2dc3ed(0x88,0x7b,0x61,0x62)](_0x4ebf8a[_0x56bf78(0x265,0x239,0x29b,0x2db)],_0x25342f['message']):(_0x2f0708=!_0x4f089f,_0x20324e+=_0x141376);}const _0x4918d8=_0x4ebf8a[_0x2dc3ed(0xd0,0x6a,0x75,0xbc)](String,_0x118a51)[_0x56bf78(0x369,0x311,0x33f,0x31b)](/[\r\n]+/g,'\x20')[_0x2dc3ed(0x127,0x115,0xca,0x128)](/^[\s"'`]+|[\s"'`]+$/g,'')['trim'](),_0x4a1ded=_0x4918d8[_0x56bf78(0x22f,0x2c0,0x28f,0x272)](/[,，]/)[_0x2dc3ed(0x11a,0xe8,0xa8,0x119)](_0x289e13=>_0x289e13[_0x56bf78(0x2d6,0x2b8,0x31d,0x2d4)]())[_0x56bf78(0x278,0x252,0x298,0x2d3)](Boolean),_0x382faf={};for(const _0x49c9d1 of _0x4a1ded){if(_0x4ebf8a[_0x2dc3ed(0xae,0xf5,0xcc,0x15c)](_0x56bf78(0x31a,0x303,0x321,0x2cf),'LysAQ')){const _0x380be3=_0x49c9d1[_0x2dc3ed(0xb7,0xf1,0x95,0x102)]('\x5c');if(_0x4ebf8a[_0x2dc3ed(0xcc,0x9a,0x3e,0x97)](_0x380be3,-0x9b8+0xc*0xf4+-0x1b8)){if(_0x4ebf8a[_0x2dc3ed(0x10c,0x101,0xa1,0x10b)](_0x4ebf8a['ttOZT'],_0x4ebf8a['YBqHw'])){const _0x595ace=_0x49c9d1['slice'](-0x268e+-0x3*0x91a+0x41dc,_0x380be3)[_0x2dc3ed(0x107,0xf3,0x8d,0x97)](),_0x2facd9=_0x49c9d1[_0x2dc3ed(0x129,0xfe,0x15b,0x14d)](_0x4ebf8a['AaStI'](_0x380be3,-0x883*0x1+0x4e3+-0x3a1*-0x1))[_0x2dc3ed(0x141,0xf3,0x9f,0xde)]();if(_0x595ace)_0x382faf[_0x595ace]=_0x2facd9;}else!_0x35ca55&&(_0xf6979d[_0x2dc3ed(0x67,0xc5,0x9f,0x123)](_0x4ebf8a[_0x56bf78(0x295,0x346,0x2e9,0x30f)]),_0x47d31a=!![]);}}else return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new _0x48eb9f()};}return _0x382faf;}function generateRequestId(){if(crypto&&crypto['randomUUID'])return crypto[_0x88282c(-0x289,-0x22a,-0x21f,-0x203)]();function _0x4d1f4a(_0x2ebbe7,_0x37e2c3,_0x28b93d,_0x3377aa){return _0x3274(_0x2ebbe7- -0x2ef,_0x37e2c3);}function _0x88282c(_0x22b180,_0x1ba3c3,_0x54df5d,_0x3b02f0){return _0x3274(_0x1ba3c3- -0x364,_0x22b180);}return Date['now']()[_0x88282c(-0x1fb,-0x1f2,-0x1d8,-0x192)](0x64f+-0x1a2d*0x1+-0xa01*-0x2)+Math[_0x88282c(-0x172,-0x1d9,-0x22d,-0x1c1)]()[_0x88282c(-0x1e6,-0x1f2,-0x1c2,-0x217)](0xf42+-0x330*-0x1+0x1aa*-0xb)[_0x88282c(-0x233,-0x207,-0x1e5,-0x220)](0x29*0xc2+-0x8*-0x1a3+-0x3ae*0xc);}export function LLM_TRANSLATION_GET_PROMPT(){function _0x51865b(_0x4e2365,_0x348571,_0x2a2728,_0x1de031){return _0x3274(_0x348571-0xc7,_0x1de031);}const _0x4adcd6={'bEwRS':function(_0x27a5c4,_0xc269f0){return _0x27a5c4===_0xc269f0;},'pORGj':_0x51865b(0x1e8,0x22e,0x25a,0x251),'blQso':'Efvky','DquFM':function(_0x14fbd3,_0xe5369e){return _0x14fbd3(_0xe5369e);},'WGdSd':_0x5d8de(-0x164,-0xfc,-0xd5,-0x139),'LjiHv':_0x51865b(0x2c5,0x295,0x24f,0x2bf),'YUVhD':function(_0x1692a4,_0x3e6e2d){return _0x1692a4(_0x3e6e2d);},'TtSUS':function(_0x1e9905,_0x2da838){return _0x1e9905!==_0x2da838;},'cqSrN':_0x5d8de(-0x157,-0xee,-0x125,-0xe1),'eJzBN':_0x5d8de(-0x9a,-0x87,-0x42,-0xe6),'vsiIs':function(_0x1ed72b){return _0x1ed72b();},'vIdXq':function(_0x34a764,_0x4529fb,_0x48b0cb){return _0x34a764(_0x4529fb,_0x48b0cb);}};function _0x5d8de(_0x578292,_0x1e5010,_0x24dadf,_0x5b14a1){return _0x3274(_0x1e5010- -0x284,_0x5b14a1);}return new Promise((_0x33528c,_0x1fe35d)=>{const _0xba46eb={'DpJZe':function(_0x1754bb,_0x2296c4){return _0x1754bb===_0x2296c4;},'oQzwI':_0x4adcd6['LjiHv'],'IDkjP':function(_0x30217f,_0x457d95){function _0x5d6979(_0x147701,_0x1c59fd,_0x11047a,_0x1a6a9c){return _0x3274(_0x11047a-0x127,_0x1c59fd);}return _0x4adcd6[_0x5d6979(0x2b4,0x310,0x2c8,0x311)](_0x30217f,_0x457d95);}};function _0x45ccc4(_0x1df71c,_0xc5f833,_0x2240de,_0x2c81be){return _0x5d8de(_0x1df71c-0x180,_0x2240de-0x51,_0x2240de-0xd6,_0x2c81be);}function _0x1d8b96(_0x36c3db,_0x958f11,_0x1ffbb9,_0x351e40){return _0x51865b(_0x36c3db-0x121,_0x958f11- -0x30,_0x1ffbb9-0x37,_0x36c3db);}if(_0x4adcd6[_0x45ccc4(-0x109,-0xf1,-0xa9,-0x53)](_0x4adcd6[_0x45ccc4(-0x6e,-0x9a,-0x5d,-0x93)],_0x4adcd6[_0x45ccc4(-0xa0,-0x41,-0x83,-0x76)])){const _0x4fa55f=_0x4adcd6['vsiIs'](generateRequestId);console[_0x45ccc4(-0xaa,-0xfc,-0x9f,-0x9e)](_0x1d8b96(0x209,0x1e7,0x1ec,0x1bd)+_0x45ccc4(-0xeb,-0x74,-0xac,-0x96)+_0x1d8b96(0x26c,0x21b,0x1db,0x232)+_0x4fa55f+')');const _0x142033=_0x287213=>{function _0x3d67f3(_0x1712a2,_0x26d6f2,_0x1ef765,_0x22f973){return _0x1d8b96(_0x1ef765,_0x1712a2-0x155,_0x1ef765-0x141,_0x22f973-0x10);}function _0x3eb7b4(_0x17c7b4,_0x3f16af,_0x1aa46f,_0x24c0be){return _0x45ccc4(_0x17c7b4-0x18e,_0x3f16af-0xa6,_0x17c7b4- -0x114,_0x3f16af);}if(_0xba46eb['DpJZe'](_0x3eb7b4(-0x179,-0x1d9,-0x138,-0x15e),_0xba46eb[_0x3d67f3(0x33f,0x337,0x36e,0x347)])){if(_0x287213['id']!==_0x4fa55f)return;eventSource[_0x3eb7b4(-0x180,-0x18b,-0x1e7,-0x130)+_0x3eb7b4(-0x1ad,-0x1f5,-0x16b,-0x14d)](eventNames[_0x3eb7b4(-0x196,-0x12e,-0x1d7,-0x1e2)+_0x3d67f3(0x344,0x33c,0x35c,0x2e1)+_0x3d67f3(0x354,0x307,0x2f1,0x2f8)+'PONSE'],_0x142033);const {prompt:_0x6fbcdc}=_0x287213;console['log'](_0x3d67f3(0x33c,0x392,0x366,0x2e3)+_0x3eb7b4(-0x1fb,-0x23b,-0x1b9,-0x200)+_0x3d67f3(0x3b5,0x417,0x35c,0x35e)+_0x4fa55f+'):',_0x6fbcdc),_0xba46eb[_0x3d67f3(0x37c,0x34b,0x333,0x393)](_0x33528c,_0x6fbcdc);}else _0x1ad1ba[_0xa1edeb[_0x3d67f3(0x3a7,0x374,0x3f0,0x397)+'e']()]=_0xb408b7;};eventSource['on'](eventNames[_0x1d8b96(0x233,0x248,0x29e,0x24c)+'ATION_GET_'+_0x1d8b96(0x235,0x1ff,0x1ee,0x21f)+_0x45ccc4(-0x13c,-0xdc,-0xfb,-0xf3)],_0x142033);const _0x48d70f={};_0x48d70f['id']=_0x4fa55f,eventSource[_0x45ccc4(-0x53,-0xb4,-0xbe,-0x10b)](eventNames['LLM_TRANSL'+_0x1d8b96(0x1bf,0x1ef,0x185,0x240)+_0x45ccc4(-0xb0,-0x47,-0xa7,-0x6e)+_0x1d8b96(0x27f,0x28c,0x2d1,0x2e2)],_0x48d70f),_0x4adcd6['vIdXq'](setTimeout,()=>{function _0x269f67(_0x96cf10,_0xf7d32e,_0x31fd97,_0x30bc10){return _0x1d8b96(_0x96cf10,_0xf7d32e-0x2c6,_0x31fd97-0x1c9,_0x30bc10-0x190);}function _0x2cddea(_0xf403d8,_0x1603bb,_0x140f01,_0x41cb16){return _0x1d8b96(_0x41cb16,_0xf403d8-0x28e,_0x140f01-0x83,_0x41cb16-0x157);}if(_0x4adcd6[_0x269f67(0x4ab,0x4a1,0x503,0x4ac)](_0x4adcd6[_0x2cddea(0x453,0x4ae,0x49e,0x425)],_0x4adcd6[_0x269f67(0x4a8,0x4c3,0x4b5,0x4aa)])){if(_0x2059a5['skipped'])return _0x4820f8?_0xa663a7[_0x2cddea(0x4ea,0x4d3,0x4d0,0x51d)]:'';const _0x3ef6=[];if(_0x464c81)_0x3ef6[_0x2cddea(0x524,0x4e8,0x4e5,0x4f4)](_0x2983e2['original']);return _0x55b9d5&&_0x2a0934['translatio'+'n']&&_0x3ef6[_0x2cddea(0x524,0x589,0x4fb,0x52f)]('('+_0x5cb203[_0x269f67(0x4fe,0x494,0x473,0x444)+'n']+')'),_0x3ef6[_0x2cddea(0x4cc,0x526,0x479,0x4ff)]('\x20');}else eventSource[_0x269f67(0x576,0x524,0x4bd,0x505)+_0x2cddea(0x4bf,0x463,0x4cd,0x524)](eventNames[_0x269f67(0x4c4,0x50e,0x541,0x528)+'ATION_GET_'+_0x269f67(0x488,0x4c5,0x497,0x46a)+_0x269f67(0x43e,0x495,0x4ee,0x4bd)],_0x142033),_0x4adcd6[_0x2cddea(0x4d0,0x4f6,0x527,0x4c6)](_0x1fe35d,new Error(_0x4adcd6[_0x269f67(0x4a3,0x4f8,0x546,0x4ae)]));},-0x165c+-0x3838+-0x75a4*-0x1);}else return _0x5bdcd1[_0x1d8b96(0x1c7,0x1d1,0x236,0x212)]();});}export function LLM_TRANSLATION(_0x5b5a51,{timeoutMs:timeoutMs=0x77a5*-0x1+0xd6ce+0x8b37}={}){const _0x7f7c90={'uGgsz':function(_0x31be6e,_0xa35ece){return _0x31be6e===_0xa35ece;},'Niwlv':_0x5eec4d(-0x68,0xc,-0x11,0x4c),'sShgj':_0x5eec4d(-0x68,-0x72,-0x3b,-0x3f),'yPYtw':function(_0x415cc8,_0x33b5f0){return _0x415cc8(_0x33b5f0);},'PKgJU':function(_0x5148c2,_0x57c57b){return _0x5148c2>_0x57c57b;},'sAmfl':function(_0x2c6cd9,_0x1c9498){return _0x2c6cd9!==_0x1c9498;},'CKYRq':'flnFb','ASget':_0x5eec4d(0x60,0x6d,0x7a,0x17),'CwmgF':function(_0x2fbda3,_0x33aac4){return _0x2fbda3!==_0x33aac4;},'efZKq':function(_0x242769){return _0x242769();},'HyJAW':function(_0x53e46d,_0x477b04,_0x20c292){return _0x53e46d(_0x477b04,_0x20c292);}};function _0x5eec4d(_0x563999,_0x374a4a,_0x3c7f57,_0x43a160){return _0x3274(_0x3c7f57- -0x181,_0x563999);}function _0x544dc1(_0x103fa3,_0xc532f1,_0x53b275,_0x4cea98){return _0x3274(_0xc532f1- -0x38,_0x103fa3);}return new Promise((_0x1280de,_0x3bd2e1)=>{const _0x9f41be={'IPLyg':_0x528562(0x4fd,0x516,0x4b6,0x4d1)+_0x285164(0x441,0x3c4,0x423,0x3df)+':','uhPQC':function(_0x534c1d,_0x296479){function _0x13a168(_0x59a7c9,_0xb4f5e8,_0x7fcdd8,_0x12200f){return _0x528562(_0x7fcdd8,_0xb4f5e8-0x1ce,_0x59a7c9- -0x3ba,_0x12200f-0x1ab);}return _0x7f7c90[_0x13a168(0x168,0x115,0x166,0x19b)](_0x534c1d,_0x296479);},'lNKrr':function(_0x1df2dc,_0x5aeb00){return _0x7f7c90['sAmfl'](_0x1df2dc,_0x5aeb00);},'xcbHn':function(_0x46529d){return _0x46529d();},'yrjHZ':_0x7f7c90['CKYRq'],'duFtG':_0x7f7c90[_0x528562(0x4d4,0x511,0x4d5,0x48d)],'KPtou':function(_0xd43d09,_0x5c71ea){return _0xd43d09(_0x5c71ea);},'KmGpY':function(_0x2174ad,_0x3717f7){return _0x7f7c90['CwmgF'](_0x2174ad,_0x3717f7);},'TSHRB':_0x528562(0x52c,0x54f,0x50f,0x577),'xnatD':_0x285164(0x473,0x45a,0x448,0x416),'GoSjZ':_0x285164(0x3ac,0x43f,0x440,0x3d6),'UjdVR':function(_0xa7cb29,_0xac9b04){return _0xa7cb29===_0xac9b04;},'uINvx':'wAImv','sppRr':function(_0x558d62,_0x1cfefd){function _0x5ecf40(_0x1327d5,_0x44eba8,_0x5babce,_0x225ed0){return _0x528562(_0x44eba8,_0x44eba8-0x9c,_0x5babce-0x49,_0x225ed0-0x195);}return _0x7f7c90[_0x5ecf40(0x593,0x5f1,0x599,0x58e)](_0x558d62,_0x1cfefd);},'RNRdF':function(_0x29d799){function _0x2daf7b(_0x13cd46,_0x1736da,_0x317ffd,_0x1d2ad){return _0x528562(_0x1d2ad,_0x1736da-0x117,_0x13cd46- -0x53a,_0x1d2ad-0x16a);}return _0x7f7c90[_0x2daf7b(-0x53,-0x1,-0xa0,0x2)](_0x29d799);}},_0x49ead9=generateRequestId();console[_0x528562(0x55b,0x535,0x4fa,0x52e)](_0x285164(0x3da,0x36d,0x344,0x387)+'\x20请求翻译\x20LLM\x20'+'(ID:\x20'+_0x49ead9+')');function _0x528562(_0x4c416f,_0x1341d6,_0xcdf84b,_0x1fd528){return _0x544dc1(_0x4c416f,_0xcdf84b-0x39e,_0xcdf84b-0x144,_0x1fd528-0x173);}let _0x4376e2=null;function _0x285164(_0x496a5b,_0x420044,_0x1b804b,_0xcd8302){return _0x544dc1(_0x496a5b,_0xcd8302-0x26f,_0x1b804b-0xe4,_0xcd8302-0xa3);}const _0x56fd49=()=>{function _0x58d4f5(_0x50c36d,_0xad1449,_0x1c9ef6,_0x3c7aa2){return _0x285164(_0x3c7aa2,_0xad1449-0x194,_0x1c9ef6-0x89,_0x50c36d-0x1a7);}function _0x504261(_0x179e4b,_0x188105,_0x3637bb,_0xc99913){return _0x285164(_0x179e4b,_0x188105-0x197,_0x3637bb-0x9a,_0xc99913- -0x482);}if(_0x7f7c90['uGgsz'](_0x7f7c90[_0x504261(-0xa7,-0x112,-0x76,-0xc8)],_0x7f7c90[_0x504261(-0x100,-0x147,-0x120,-0xf4)])){_0x577a5e['error'](_0x9f41be[_0x504261(-0x5d,-0x45,-0x82,-0x69)],_0x487806);throw _0x137b85;}else{eventSource[_0x58d4f5(0x5a5,0x5a0,0x5db,0x55c)+_0x504261(-0xb8,-0x10c,-0xfb,-0xb1)](eventNames['LLM_TRANSL'+'ATION_RESP'+_0x504261(-0xf4,-0x91,-0xe3,-0xb4)],_0x4f24fc);if(_0x4376e2)_0x7f7c90[_0x58d4f5(0x5c8,0x5c3,0x5c4,0x606)](clearTimeout,_0x4376e2);}},_0x4f24fc=_0x493585=>{const _0x5e31eb={'FiddY':function(_0x376aaf,_0x2ac96f){function _0x433654(_0x528800,_0x26bd78,_0x3a8ae4,_0x125c44){return _0x3274(_0x528800-0x38,_0x3a8ae4);}return _0x9f41be[_0x433654(0x225,0x264,0x1ff,0x1ee)](_0x376aaf,_0x2ac96f);},'JJFek':function(_0x4cc180,_0x138714){return _0x4cc180+_0x138714;}};function _0x2f249f(_0x4550d7,_0x3525ab,_0x5b550e,_0x54378a){return _0x528562(_0x3525ab,_0x3525ab-0x140,_0x4550d7- -0x649,_0x54378a-0x187);}if(_0x9f41be[_0x3e70c8(0x38e,0x387,0x447,0x3e7)](_0x493585['id'],_0x49ead9))return;_0x9f41be['xcbHn'](_0x56fd49);function _0x3e70c8(_0x73edc,_0x369199,_0x120406,_0x207e93){return _0x285164(_0x73edc,_0x369199-0x189,_0x120406-0xc2,_0x207e93-0x5f);}console['log'](_0x2f249f(-0x193,-0x1e7,-0x16d,-0x13e)+_0x3e70c8(0x38d,0x446,0x428,0x3e5)+_0x3e70c8(0x35e,0x3cc,0x3d7,0x3c9)+'\x20'+_0x49ead9+'):',_0x493585);if(_0x493585[_0x3e70c8(0x4b8,0x4fe,0x443,0x497)]){if(_0x9f41be[_0x3e70c8(0x3de,0x3e0,0x3a0,0x402)]!==_0x9f41be[_0x2f249f(-0x147,-0x16f,-0x17a,-0x171)])_0x9f41be[_0x3e70c8(0x45d,0x464,0x3ee,0x439)](_0x1280de,_0x493585[_0x2f249f(-0x13f,-0x17c,-0x110,-0x195)]);else{const _0x3cf8cc=_0x18c5a0[_0x3e70c8(0x45d,0x4ab,0x46f,0x456)]('\x5c');if(_0x5e31eb['FiddY'](_0x3cf8cc,0x19e+-0x1a70+-0xc69*-0x2)){const _0xd475d5=_0x33d110['slice'](-0x8*-0x1fb+-0x127a+-0x2a2*-0x1,_0x3cf8cc)[_0x3e70c8(0x471,0x4c2,0x3f7,0x458)](),_0x95d17c=_0x535a46['slice'](_0x5e31eb[_0x2f249f(-0xfc,-0x162,-0x11a,-0xb2)](_0x3cf8cc,0x1ca4+-0x308*-0x6+-0x2ed3))[_0x3e70c8(0x49b,0x4aa,0x42c,0x458)]();if(_0xd475d5)_0x15c64e[_0xd475d5]=_0x95d17c;}}}else{if(_0x9f41be[_0x2f249f(-0x19b,-0x1c3,-0x149,-0x1ae)](_0x9f41be[_0x2f249f(-0x112,-0x120,-0x159,-0xb9)],_0x9f41be[_0x3e70c8(0x3cd,0x378,0x3df,0x3c3)])){if(_0x493585[_0x2f249f(-0x109,-0xa2,-0xaf,-0x10b)]&&_0x493585[_0x3e70c8(0x47f,0x44e,0x4db,0x470)]['name']===_0x9f41be['GoSjZ']){if(_0x9f41be['UjdVR'](_0x2f249f(-0x156,-0x18e,-0x15f,-0x117),_0x9f41be[_0x3e70c8(0x408,0x3ce,0x3b1,0x3d4)]))return _0x53fb7e?_0x8b0079['original']:'';else{const _0x2f39db=new Error(_0x493585[_0x2f249f(-0x109,-0xa1,-0x174,-0x126)][_0x2f249f(-0x120,-0xea,-0x136,-0xdb)]);_0x2f39db['name']=_0x9f41be[_0x3e70c8(0x489,0x406,0x484,0x429)],_0x9f41be[_0x2f249f(-0x175,-0x154,-0x14e,-0x1ad)](_0x3bd2e1,_0x2f39db);}}else _0x9f41be[_0x2f249f(-0x140,-0x15b,-0x134,-0xeb)](_0x3bd2e1,new Error(_0x493585[_0x3e70c8(0x49a,0x478,0x4a6,0x43a)]));}else return'';}};eventSource['on'](eventNames[_0x285164(0x3c5,0x3e3,0x422,0x3e8)+'ATION_RESP'+_0x285164(0x3a7,0x3b3,0x436,0x3ce)],_0x4f24fc);const _0x222cdd={};_0x222cdd['prompt']=_0x5b5a51,_0x222cdd['id']=_0x49ead9,eventSource[_0x285164(0x349,0x3c1,0x353,0x3ac)](eventNames['LLM_TRANSL'+'ATION_REQU'+_0x528562(0x526,0x55a,0x513,0x4c2)],_0x222cdd),_0x4376e2=_0x7f7c90[_0x285164(0x407,0x3ef,0x40e,0x401)](setTimeout,()=>{function _0x58a2ab(_0x18521a,_0x16521e,_0x4e8710,_0x34146e){return _0x285164(_0x34146e,_0x16521e-0xe8,_0x4e8710-0x1d9,_0x4e8710- -0x20);}_0x9f41be[_0x4cf5e9(0x1d2,0x25a,0x1b0,0x20c)](_0x56fd49);function _0x4cf5e9(_0xf014aa,_0x5a12ca,_0x1f1564,_0x4ea7c1){return _0x285164(_0xf014aa,_0x5a12ca-0x1d3,_0x1f1564-0x149,_0x4ea7c1- -0x1d9);}_0x3bd2e1(new Error(_0x58a2ab(0x3ad,0x3d2,0x391,0x3d9)+'时（'+timeoutMs+_0x58a2ab(0x382,0x366,0x362,0x377)));},timeoutMs);});}export async function callTranslation(_0x36e122){function _0x3bc59b(_0x147e03,_0x1300ab,_0x5b8bcb,_0x452a3b){return _0x3274(_0x147e03- -0xf6,_0x1300ab);}const _0x3b972c={'WPrGw':_0x77ce8b(0x29f,0x2d6,0x324,0x33d),'jTHcK':function(_0x127263,_0x292dc8){return _0x127263(_0x292dc8);},'PAMeU':function(_0x4f85d7,_0x4bef7c,_0x268dbe){return _0x4f85d7(_0x4bef7c,_0x268dbe);},'nyUYY':_0x3bc59b(0x41,0x1a,0x6f,-0x9)+'n','LmlDN':function(_0x357a7e,_0x48909f){return _0x357a7e||_0x48909f;},'FLVau':function(_0x11d476,_0x181231){return _0x11d476(_0x181231);},'ravev':_0x77ce8b(0x245,0x293,0x2e5,0x24a),'iBFtN':function(_0x6d6055,_0x1c55b2){return _0x6d6055||_0x1c55b2;},'pAYRb':function(_0x3488dc,_0x53ca9d){return _0x3488dc(_0x53ca9d);},'lhEPC':function(_0x4bfd04,_0x290fc1){return _0x4bfd04!==_0x290fc1;},'uMVxM':_0x77ce8b(0x2b8,0x2dc,0x297,0x28c),'Itmae':_0x3bc59b(0x63,0xc6,0xa7,0x2c),'SguyC':_0x77ce8b(0x2e6,0x2aa,0x2ca,0x2fa)};function _0x77ce8b(_0xb1ce7d,_0x429e6c,_0x17d0b6,_0x3d7e4c){return _0x3274(_0x429e6c-0x137,_0x3d7e4c);}try{let _0x3e8383=_0x3b972c['PAMeU'](buildPromptForRequestType,_0x3b972c[_0x3bc59b(0x99,0x69,0x103,0xa5)],_0x3b972c[_0x3bc59b(0xbc,0xa1,0xac,0x94)](_0x36e122,''));_0x3e8383=_0x3b972c[_0x77ce8b(0x33d,0x323,0x2d8,0x377)](mergeAdjacentMessages,_0x3e8383);const _0xf806be=[..._0x3e8383,{'role':_0x3b972c[_0x3bc59b(0x68,0x7e,0x85,0xc0)],'content':_0x3b972c[_0x3bc59b(0xbf,0x78,0xf2,0x8b)](_0x36e122,'')}];_0x3b972c[_0x77ce8b(0x335,0x323,0x2d0,0x2d9)](updateCombinedPrompt,_0xf806be);const _0x409945=await _0x3b972c[_0x77ce8b(0x2da,0x32b,0x305,0x2e9)](LLM_TRANSLATION,_0xf806be);return _0x409945;}catch(_0x3dbb83){if(_0x3b972c[_0x77ce8b(0x35f,0x330,0x314,0x370)](_0x3b972c[_0x3bc59b(0x101,0xc7,0xd7,0xe1)],_0x3b972c['Itmae'])){_0x3b972c[_0x77ce8b(0x2c1,0x32b,0x2ec,0x393)](addLog,'翻译失败:\x20'+_0x3dbb83[_0x77ce8b(0x29c,0x2fa,0x305,0x299)]),console[_0x77ce8b(0x324,0x311,0x348,0x365)](_0x3b972c['SguyC'],_0x3dbb83);throw _0x3dbb83;}else{const _0x187a96=new _0x1432a6(_0x594ee7[_0x77ce8b(0x315,0x311,0x33b,0x2ce)][_0x3bc59b(0xcd,0x9d,0xa1,0xb9)]);_0x187a96[_0x77ce8b(0x340,0x2d7,0x296,0x2fd)]=_0x3b972c[_0x3bc59b(0x102,0x127,0xd9,0xd8)],_0x3b972c[_0x3bc59b(0xdf,0xe6,0xbf,0x7e)](_0xf38f3e,_0x187a96);}}}let isAiInitialized=![];export function initAiSettings(_0x315f3c){function _0x6aba26(_0x53009b,_0x1578f5,_0x51743f,_0x2707a7){return _0x3274(_0x51743f- -0x267,_0x53009b);}function _0x55fe83(_0x2e6709,_0x3e7947,_0x18403b,_0x1b5197){return _0x3274(_0x2e6709- -0x312,_0x1b5197);}!isAiInitialized&&(console['log'](_0x6aba26(-0xf6,-0xfb,-0x117,-0x177)+_0x55fe83(-0x155,-0x182,-0x1bd,-0x1a0)+'\x20LLM\x20设置页面'),isAiInitialized=!![]);}function _0x2051(){const _0x538e05=['y2XLyw5Lza','DhHxs3y','svbmEwC','C3rYAw5N','CMvWBgfJzq','zePWufK','v0Pzthi','sKPgzwS','EfjpwKe','BMjwwgW','EvbzDhC','veDrzwO','rKXwyxu','DwHquum','DLPesMS','yvbJshm','zw50CMLLCW','t0nrwwi','rKLVBuC','mZK3mdGZqKvbwxrJ','CefzuMi','vuvtva','z1rLuKK','Du1wEe0','v1bYr3C','BgHfuem','C29Tzq','EK9rBxq','B2jQzwn0','qwTqChK','se9Ss0G','ChvZAa','mJmZmdG4BuDpDxPz','C3vJy2vZCW','mteWAhn2wejh','uNrJAKW','Eg5HDeq','Ce9sr2O','qwv6qxG','CMvZDwX0CW','nta1odu3mfbYCuf4Cq','CgfYC2u','ioAjP+IHJoE7K+AENcaOsuq6','C3bSAxq','nZjVDeDpqKy','CNH1qM0','DhjHBNnSyxrPBW','ue9ou0u','qLjVseW','CMfUzg9Tvvvjra','C2v0','C2TPCa','zMLSDgvY','DuLoDNG','Cxfdy2K','vhvRt3a','q2njBMe','EvbrCuq','r0HNB0S','yKv3uLm','t0PxBvG','uLzeugS','AgDYtfK','s21hCfK','zNP5wM0','D2fYBG','BxpVViK','iow3SUIoT+wpLUE/U+IVKEApKoEKUUIVJsa','kcGOlISPkYKRkq','ieXmtsdORR7NVA7POBxPNAi','iow3SUAuTUwiSoE/U+IVKsbmte0','C3qTy2HHDhu4oG','Be5lCNi','vxrVqwS','B1f6D0K','mtfzugTvs2S','u2PrEwu','wfDVzxq','C1nOz2O','qvrjt05Fr0vuxW','u1jhDuO','u2DkyMC','vvbcs1m','DxnLCG','C3vIC3rYAw5N','CMf2zxy','s2f1shq','EM5HEgi','ruvwy3i','uxrxrKW','mZK0nM5PDw1AsW','yxbWBhK','EhreDKC','yMXrC28','Au5wBhy','ufjptvbux1jfuW','EuXRExG','t2vvu1a','zuv5Efm','ExjQsfO','AwnQvNm','C3bWuNi','qvnNzxq','wuzpvMu','De5mEve','Dg9tDhjPBMC','57+76k+r5AsX6lsLoG','DgvZDa','zw1PDa','vNrnAM8','zuPizwW','mJqXnJGXnJHUuKDhsLy','iePtt07OP6pMNPdLPlhOTkxVViW','57+76k+rieXmtsdMIAFOOyZOTOu','y29UC3rYDwn0BW','sxbRyMu','t1fkCNe','ntbOtwfXuha','uwv4v24','D21PwNO','zwzAs3e','AxnbCNjHEq','tML3Bhy','icHjrdOG','vKD1Dfm','yLvztKS','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','6i635y+w57+76k+r5O+q56s66k+n6lAf5PE2','D3PcuuO','vhrtvvm','CMfUzg9T','ufjptvbux1jfuq','tefrAKS','DePqwgi','BNLvwvK','surRALa','sLfKAg0','C2vHCMnO','r29tALO','Bg9N','uhbjD2u','veXjqMi','t05trq','uNDoEu0','qwrnyvi','zw5LCG','v0DKu2q','zhvgDeC','C2TPChbLza','mtC3oty5ne1MwKfqrW','qwjVCNrfCNjVCG','BMfTzq','wvvwAeq','uxrOCKi','s1b0B3u','CMvZDwX0','wLLSv0u','Bfn0t3u','AM9PBG','ioE/U+IVKEApKoEKUUIVJEAGH+ETVUwKSEI0Pq','tvL0vvG','C3rYAw5NAwz5','rhf1rK0','q1rxyNG','rvnu','uK5szey','wuPvzMm','zuP6qK4','teXnx1rsqu5tta','tg1Sre4','rejSvfC','rKvwueq','AujgDe4','vKjJtKq','BwfW','mJm0ntG0quLPsLDL','zgLZCgXHEvrLEa','su5puKG','Dg9mB3DLCKnHCW','ueTNsLu','iefjioIUVUE9RUw3SUE7N+s4GowiSa','sKnLque','Bwf0y2G','Aw5KzxHpzG','veTQsKS','DhjPBq','BwvZC2fNzq','runRAvq','B3jPz2LUywW','EhbQvxi','CMvTB3zLtgLZDa','wM5osNe','keLeoIa','shLkqvC','vhf0qum','uwfisLy','C2XPy2u','wxDqBxK','B0nHq1y','surNqwq','vfniuKi','B2jzAKS','qwLZq2m','t0zywLi','ALriy0S','y3ftCK4','mtzOCNzrAei','uLvUv0u','EMv4Bhe','zxjYB3i','y3PMugq','5BcD6k+v5PEN5Qc85BYpoG','BM9Quee','B29tyvO','qKLrAMy'];_0x2051=function(){return _0x538e05;};return _0x2051();}