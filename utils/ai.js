(function(_0x389a62,_0x48400b){function _0x319af9(_0x48c5cf,_0x188bf4,_0x74904c,_0x5e2306){return _0x567e(_0x188bf4-0x3cc,_0x74904c);}const _0x4aa842=_0x389a62();function _0x4481b3(_0x2c46a3,_0x103340,_0x467aaf,_0x3d8444){return _0x567e(_0x2c46a3- -0x271,_0x467aaf);}while(!![]){try{const _0x4ad423=parseInt(_0x4481b3(-0xb3,-0x95,-0x8e,-0xff))/(-0x1*0x24a7+0x11*-0xaf+0x3047)*(parseInt(_0x319af9(0x543,0x59a,0x5d0,0x5c0))/(-0x19*0x67+0x1a48+-0x1037))+parseInt(_0x4481b3(-0xd7,-0xb4,-0x95,-0x11d))/(0x2f*0x43+0x148*0x16+0x1d7*-0x16)*(parseInt(_0x4481b3(-0x73,-0x21,-0x1f,-0x75))/(-0xb*-0x41+-0x247e+0x21b7))+-parseInt(_0x319af9(0x4fe,0x53f,0x589,0x52e))/(-0x24c+0x21e3+-0x1f92)*(-parseInt(_0x319af9(0x573,0x53b,0x511,0x56d))/(0x20fc*-0x1+0x1*-0x2121+0x4223))+-parseInt(_0x4481b3(-0x9e,-0x97,-0x54,-0x50))/(-0x1bba+0x1fb9*0x1+-0x1fc*0x2)+parseInt(_0x319af9(0x5b3,0x5a0,0x5e0,0x556))/(-0x3e9*0x2+-0xc36+0x1410)+-parseInt(_0x319af9(0x562,0x548,0x54d,0x4f3))/(-0x841*-0x1+-0x24da+0x1ca2)*(parseInt(_0x319af9(0x5a2,0x5c6,0x587,0x60f))/(0x7f8+0x7a1+-0xf8f))+parseInt(_0x319af9(0x5d0,0x5ac,0x5e4,0x578))/(-0x9*-0x12+0x19e1+0x4*-0x69e)*(-parseInt(_0x4481b3(-0x84,-0x56,-0x80,-0x99))/(-0x8df*-0x1+-0x2d3+0x600*-0x1));if(_0x4ad423===_0x48400b)break;else _0x4aa842['push'](_0x4aa842['shift']());}catch(_0x1259e0){_0x4aa842['push'](_0x4aa842['shift']());}}}(_0x577f,0x2*-0x32cc+-0x34ce0+0x2*0x2e6e5));const _0x4a2af4=(function(){let _0x5aaa6e=!![];return function(_0x1894c2,_0x7ae565){const _0x3db961=_0x5aaa6e?function(){function _0x26c49c(_0x2c4767,_0x4ba0db,_0x2ab526,_0x114571){return _0x567e(_0x2c4767-0x46,_0x4ba0db);}if(_0x7ae565){const _0x1f4360=_0x7ae565[_0x26c49c(0x254,0x26a,0x206,0x270)](_0x1894c2,arguments);return _0x7ae565=null,_0x1f4360;}}:function(){};return _0x5aaa6e=![],_0x3db961;};}()),_0x5ac5ce=_0x4a2af4(this,function(){const _0x3d6fed={};_0x3d6fed['tFpVr']=_0xd89522(0x73,0xa1,0xc9,0x11e)+'+$';const _0x1fcf40=_0x3d6fed;function _0x2b7aca(_0x515786,_0xab0e35,_0x1f5af0,_0x297949){return _0x567e(_0x297949-0x14d,_0x1f5af0);}function _0xd89522(_0x4b8d38,_0x5751f,_0x37b329,_0x294f0a){return _0x567e(_0x37b329- -0x140,_0x5751f);}return _0x5ac5ce[_0xd89522(-0x5,0x4d,0x38,0x6)]()['search'](_0x1fcf40[_0x2b7aca(0x363,0x315,0x33a,0x351)])[_0x2b7aca(0x2c7,0x2a5,0x2a2,0x2c5)]()[_0x2b7aca(0x36b,0x364,0x366,0x32e)+'r'](_0x5ac5ce)[_0xd89522(0x36,0x97,0x48,0x89)](_0xd89522(0xd9,0xff,0xc9,0xe8)+'+$');});_0x5ac5ce();import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{extensionName,eventNames}from'./config.js';import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';function _0x577f(){const _0x1c11be=['y1fbq0G','Dg9mB3DLCKnHCW','C2vHCMnO','Be9pyKW','CMfUzg9T','zw5ZyLG','r3j1vLa','6i635y+w57+76k+r5O+q56s66k+n6lAf5PE2','rLz6yLK','CMfctg0','ioIVT+AXGUE/U+IVKsbmte0G','B01gCeC','teXnx1rsqu5tta','uLberKq','iePtt07OP6pMNPdLPlhOTkxVViW','B3jPz2LUywW','ENbtC00','wNHrz2u','AevWtg8','ioAjP+IHJoE7K+AENcaOsuq6','m2rlr3LdzW','C2v0','zMLSDgvY','CxfzD0K','Bg9N','C2TPCa','AxnbCNjHEq','DvjTEMi','DvDnCNm','CNHRCeq','BMfTzq','z0Dztfy','BwfW','zxjYB3i','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','C29Tzq','tu9ztwy','C3vJy2vZCW','ufjptvbux1jfuq','DgvZDa','vLfeu1C','iow3SUIoT+wpLUE/U+IVKEApKoEKUUIVJsa','CM9YzMi','qwriywy','BwvZC2fNzq','CgPTzhy','t0HTqxm','tNnVAgK','EwTNrLK','CMvZDwX0CW','r01OAem','keLeoIa','CMvZDwX0','yLjADMG','vvfly3O','57+76k+r5AsX6lsLoIa','mtaZodiXzwXlwgXo','rxPMwe8','r1fzAem','ue9ou0u','y2XLyw5Lza','vffMywC','C3rYAw5N','B2jQzwn0','vLPcDhK','57+76k+rieXmtsdMIAFOOyZOTOu','BLbYCxy','tLfyCKO','Eun4te0','Ee91txi','BwrxrKS','t05trq','mLnQEvv0Dq','wurPCMO','ALngseW','Bwf0y2G','CMvTB3zLtgLZDa','mZu2ntq1BgndzezN','mta0mdiXnNjnz1n3wG','yLH4BuG','uMDsEKO','CgfYC2u','CKT6zhK','y0LXzeO','D3npsM0','wvjpyxi','tKX3tMS','C2XPy2u','zvjvvMG','B2jZr2W','mtf2zxrhvgm','y29UC3rYDwn0BW','CMfUzg9Tvvvjra','u2nRzgi','BgDWwxm','r3fpsvm','AM9PBG','ChvZAa','q05UBKS','BxpVViK','re1WBuu','q2zLzxG','qvzor3O','nta2ote3mKLZyMftDa','B0Pvvue','r0jfwwC','5BcD6k+v5PEN5Qc85BYpoG','CM1yze4','wvviAve','CMvWBgfJzq','B3jPz2LUywXuyq','DxnLCG','BMLmBw0','rhj1vLu','vvPwqvi','t0jcC1m','nJe0mgncy3L5sq','qvrjt05FuKvtua','twjyswW','ChjVBxb0','odu1mJCYwuvkzMfr','y3riC2q','ELrLuhu','iefjioIUVUE9RUw3SUE7N+s4GowiSa','q2TtD08','C3vIC3rYAw5N','DezWvNi','qvrjt05FuKvrvq','y0fPu1O','EwTev3q','iow3SUAuTUwiSoE/U+IVKsbmte0','kcGOlISPkYKRkq','CK9ftLi','C3qTy2HHDhu4oG','yNnct2S','Bw9Au0K','yxbWBhK','BMPey1O','ALzVyxK','rvnu','Bw1JsMq','DhjPBq','zgLZCgXHEvrLEa','yvLxAhm','Dfv5v1e','rgzgswS','A0rSqwC','A1zSDvi','rhnxvvC','icHjrdOG','rNfuDgm','mtjAEKfrr0u','ExfHB3u','ChP5BLi','A21NAeW','ntq0ndK1wNrpvNLM','uLrRwhO','BM93','C2TPChbLza','AvP3Dvy','Dg9tDhjPBMC','Bef2rvy','zw1PDa','s0vdBuK','nZKYzvLbqNvj','zw5LCG','uLjXA3i','rxPzsK8','zMH2sNe','D1jKA2q','DhjHBNnSyxrPBW','ufjptvbux1jfuW','qvrjt05Fr0vuxW','ioE/U+IVKEApKoEKUUIVJEAGH+ETVUwKSEI0Pq'];_0x577f=function(){return _0x1c11be;};return _0x577f();}import{mergeAdjacentMessages}from'./promptProcessor.js';let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0x28e044){function _0x5413e9(_0xfd8501,_0x32941f,_0x3f2538,_0x3d5c0f){return _0x567e(_0x32941f-0x280,_0xfd8501);}function _0xf35f50(_0x30bd9c,_0x370379,_0x29499c,_0x5e9443){return _0x567e(_0x370379-0x111,_0x5e9443);}return SKIP_PATTERNS[_0xf35f50(0x2b3,0x2ba,0x2d1,0x30c)](_0x78d0f7=>_0x78d0f7[_0xf35f50(0x273,0x2be,0x309,0x2af)](_0x28e044['trim']()));}export function tagsToJsonString(_0x4e1db4){function _0x15c4bd(_0x27bec7,_0x53d0d5,_0x298f56,_0x2d80f9){return _0x567e(_0x298f56-0x3a3,_0x53d0d5);}if(!Array['isArray'](_0x4e1db4))return'[]';function _0x20d4a5(_0x55124f,_0x286e2c,_0x5303b4,_0x772cc9){return _0x567e(_0x286e2c-0x2e2,_0x772cc9);}return JSON['stringify'](_0x4e1db4[_0x15c4bd(0x538,0x4e9,0x53f,0x561)](_0x39ed14=>_0x39ed14&&typeof _0x39ed14===_0x20d4a5(0x45e,0x4a6,0x4eb,0x48d)));}export function preprocessPromptForTranslation(_0x412753){const _0xb018ea={'cIqdJ':function(_0x103b90,_0x565637){return _0x103b90===_0x565637;},'ofLzQ':function(_0x447587,_0x49b80e){return _0x447587===_0x49b80e;},'FVzbY':_0x21247d(0x127,0x149,0xe1,0x13c)+'\x20JSON解析失败，'+_0x21247d(0x10c,0xfb,0x145,0xc1),'hEpLo':'yLtTS','ZcNWY':function(_0x20439e,_0x5da2ec){return _0x20439e<_0x5da2ec;},'OHmAs':'RPnCK','UZVAR':function(_0x1d9f5d,_0x2caa05){return _0x1d9f5d===_0x2caa05;},'kmghL':function(_0x19d2a5,_0x1d935a){return _0x19d2a5!==_0x1d935a;},'QgAeU':_0x53eba3(0x119,0x121,0xd0,0x122),'AVNGz':function(_0x53bb7c,_0x4cc13c){return _0x53bb7c===_0x4cc13c;},'lOObL':_0x21247d(0xeb,0x100,0xc3,0x122),'Rtvbs':function(_0x4a286b,_0x45b0be){return _0x4a286b!==_0x45b0be;},'EzfXO':function(_0x3aa150,_0x326a37){return _0x3aa150(_0x326a37);},'eZZBj':_0x21247d(0xa9,0x73,0x72,0x6b),'kDlAg':function(_0x2a7da2){return _0x2a7da2();},'OBBsS':function(_0x468f0b,_0x2c1fc0){return _0x468f0b!==_0x2c1fc0;},'QoytJ':_0x21247d(0xe0,0xd2,0x117,0x12a),'uRmzb':function(_0x22484c,_0x1b2a9f){return _0x22484c(_0x1b2a9f);},'Nsohi':function(_0x5b56b6,_0x214dc1){return _0x5b56b6===_0x214dc1;},'iZwuV':'blkdu'};if(!_0x412753||_0xb018ea[_0x21247d(0x115,0xe1,0x159,0x115)](typeof _0x412753,_0xb018ea['QoytJ']))return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()};const _0x228bcd=_0x12873a=>{function _0x50d6bc(_0x8a5cc4,_0x5716ba,_0x507118,_0x61f295){return _0x21247d(_0x8a5cc4-0x1aa,_0x5716ba-0x1ef,_0x507118-0x102,_0x61f295);}const _0x55c692={};_0x55c692[_0x390f8c(0x189,0x140,0x170,0x1ac)]=_0xb018ea[_0x50d6bc(0x254,0x212,0x253,0x26f)];function _0x390f8c(_0x205710,_0x4a228c,_0x49e91c,_0x3498c0){return _0x21247d(_0x205710-0x7f,_0x4a228c-0x186,_0x49e91c-0x11,_0x4a228c);}const _0x595a9f=_0x55c692;if(_0xb018ea[_0x50d6bc(0x29f,0x267,0x2b5,0x2d8)](_0xb018ea[_0x390f8c(0x133,0xeb,0x113,0x137)],_0xb018ea[_0x50d6bc(0x25e,0x25f,0x26b,0x240)])){const _0x40097a=[];let _0x4b684d='',_0x5913ba=![];for(let _0x1bd837=-0x215*0x6+-0x1fb2+0x8*0x586;_0xb018ea['ZcNWY'](_0x1bd837,_0x12873a['length']);_0x1bd837++){if(_0xb018ea[_0x50d6bc(0x27a,0x2a0,0x244,0x22d)]!==_0xb018ea[_0x50d6bc(0x27a,0x284,0x29d,0x2ac)])_0x24b60f[_0x3dd0d3[_0x50d6bc(0x24d,0x206,0x215,0x264)+'e']()]=_0x131aa8;else{const _0x12848f=_0x12873a[_0x1bd837];if(_0xb018ea[_0x50d6bc(0x2be,0x29f,0x302,0x299)](_0x12848f,'$')){if(_0xb018ea[_0x390f8c(0x10d,0x138,0x133,0x10f)](_0x390f8c(0x156,0x12f,0x13c,0x1ab),_0xb018ea['QgAeU']))_0x5913ba=!_0x5913ba,_0x4b684d+=_0x12848f;else return _0x56475c?_0xe99440[_0x390f8c(0x130,0x17e,0x123,0x15e)]:'';}else{if((_0xb018ea[_0x50d6bc(0x29f,0x294,0x2ac,0x287)](_0x12848f,',')||_0xb018ea[_0x390f8c(0x187,0x185,0x152,0x196)](_0x12848f,'，'))&&!_0x5913ba){const _0x3ea82d=_0x4b684d[_0x390f8c(0x1ae,0x1ef,0x17b,0x1e9)]();if(_0x3ea82d)_0x40097a[_0x50d6bc(0x2ad,0x298,0x29d,0x2a7)](_0x3ea82d);_0x4b684d='';}else{if(_0xb018ea[_0x50d6bc(0x24f,0x282,0x246,0x21f)]!==_0xb018ea['lOObL']){const _0x2022d3=_0x3a4559[_0x1c4e80];if(_0xb018ea[_0x50d6bc(0x29f,0x2ec,0x2e9,0x264)](_0x2022d3,'$'))_0x4c8bc2=!_0x4781b5,_0x89b8c+=_0x2022d3;else{if((_0xb018ea['ofLzQ'](_0x2022d3,',')||_0x2022d3==='，')&&!_0x396d6d){const _0x22ece4=_0x381ef8[_0x50d6bc(0x2d9,0x30a,0x2bb,0x307)]();if(_0x22ece4)_0x437290[_0x390f8c(0x182,0x176,0x1d5,0x14e)](_0x22ece4);_0x38de14='';}else _0x387bfe+=_0x2022d3;}}else _0x4b684d+=_0x12848f;}}}}if(_0x4b684d[_0x390f8c(0x1ae,0x205,0x1a9,0x205)]())_0x40097a['push'](_0x4b684d[_0x390f8c(0x1ae,0x188,0x163,0x1cd)]());return _0x40097a;}else _0x178b29['warn'](_0x595a9f[_0x50d6bc(0x2b4,0x300,0x2ca,0x2d0)],_0x2022cd[_0x390f8c(0x14d,0x10d,0x193,0x103)]);},_0x225ce7=_0x228bcd(_0x412753);function _0x21247d(_0x1ff387,_0x5570a6,_0x3fce58,_0x39514b){return _0x567e(_0x1ff387- -0xe4,_0x39514b);}const _0x50b200=[],_0x2a2c90=[],_0x395de0=new Map();function _0x53eba3(_0x49c039,_0xfede3b,_0x3879af,_0x101605){return _0x567e(_0x49c039- -0xc6,_0x101605);}for(const _0x33053c of _0x225ce7){const _0x501e6b=_0x33053c[_0x21247d(0xed,0xeb,0x13a,0xa6)](SD_SYMBOL_PATTERN);if(_0x501e6b){const _0x56bfe1=_0x501e6b[0x3be*-0x9+-0x2d*0x4c+0x2f0b]||'',_0x58d249=(_0x501e6b[0x1*-0x1949+-0x44b*0x7+0xb8*0x4d]||'')[_0x21247d(0x12f,0x10a,0x116,0xe4)](),_0x308087=_0x501e6b[0xd*0x287+0x2*-0x6dd+0x2*-0x98f]||'',_0x59bec6=_0x501e6b[-0x17a1*-0x1+-0xb7*-0x21+-0x2f34]||'',_0x47746a={'original':_0x33053c,'cleaned':_0x58d249,'prefix':_0x56bfe1,'suffix':_0x308087,'weight':_0x59bec6,'skip':shouldSkipTranslation(_0x33053c)||_0xb018ea[_0x21247d(0xbd,0x98,0xa0,0x78)](shouldSkipTranslation,_0x58d249)};_0x50b200[_0x53eba3(0x121,0x13d,0x108,0x156)](_0x47746a),!_0x47746a[_0x53eba3(0xd9,0xae,0xf4,0xcf)]&&_0x58d249&&(_0x2a2c90[_0x53eba3(0x121,0x135,0x13c,0x133)](_0x58d249),_0x395de0[_0x53eba3(0xd5,0x101,0xd9,0x122)](_0x58d249[_0x21247d(0xa3,0xc4,0xaf,0x59)+'e'](),_0x47746a));}else{const _0x368bb0={'original':_0x33053c,'cleaned':_0x33053c,'prefix':'','suffix':'','weight':'','skip':_0xb018ea[_0x21247d(0xdb,0xcb,0x97,0x8c)](shouldSkipTranslation,_0x33053c)};_0x50b200[_0x53eba3(0x121,0x172,0x158,0x131)](_0x368bb0);if(!_0x368bb0['skip']&&_0x33053c){if(_0xb018ea[_0x21247d(0xd1,0xe3,0x105,0x109)](_0xb018ea[_0x53eba3(0xb1,0xeb,0x104,0xa2)],_0xb018ea[_0x21247d(0x93,0x9f,0xb5,0x80)]))_0x2a2c90[_0x53eba3(0x121,0x140,0xe2,0xdc)](_0x33053c),_0x395de0[_0x53eba3(0xd5,0x7e,0xad,0x103)](_0x33053c[_0x53eba3(0xc1,0xc1,0xa1,0x70)+'e'](),_0x368bb0);else{const _0x110f5a=_0xb018ea[_0x21247d(0x86,0x91,0xa5,0x99)](_0x3b148f);_0x206d67[_0x53eba3(0xd8,0xd8,0xfe,0x119)](_0x53eba3(0x145,0x124,0x19b,0x15c)+_0x53eba3(0xe2,0x11a,0xe0,0xa4)+_0x21247d(0x89,0x86,0x5e,0x74)+_0x110f5a+')');const _0x4dee3c=_0x1d8af6=>{if(_0xb018ea['Rtvbs'](_0x1d8af6['id'],_0x110f5a))return;_0x24a1e6[_0x3274e2(0x579,0x59c,0x59e,0x580)+_0x3274e2(0x4ff,0x547,0x575,0x545)](_0x3850ee[_0x223aaf(-0x280,-0x231,-0x203,-0x263)+_0x3274e2(0x530,0x54e,0x4fe,0x564)+_0x223aaf(-0x250,-0x240,-0x272,-0x26c)+_0x3274e2(0x583,0x58b,0x563,0x54a)],_0x4dee3c);function _0x223aaf(_0x523e14,_0x2922fc,_0x4eade5,_0x380a94){return _0x53eba3(_0x2922fc- -0x2fd,_0x2922fc-0x18e,_0x4eade5-0x9a,_0x380a94);}const {prompt:_0x3fcd49}=_0x1d8af6;_0x12bb5e[_0x3274e2(0x533,0x568,0x522,0x57a)](_0x223aaf(-0x162,-0x1b8,-0x1cf,-0x1fd)+_0x223aaf(-0x1f8,-0x214,-0x1f6,-0x202)+'(ID:\x20'+_0x110f5a+'):',_0x3fcd49);function _0x3274e2(_0x734f0f,_0x320dad,_0x4505fe,_0xcd29a5){return _0x21247d(_0x320dad-0x4ae,_0x320dad-0xc1,_0x4505fe-0xe,_0x734f0f);}_0xb018ea[_0x3274e2(0x555,0x589,0x5b7,0x55c)](_0x1fb731,_0x3fcd49);};_0x2fa177['on'](_0x448a01[_0x53eba3(0xcc,0xc1,0xba,0x8a)+_0x21247d(0xa0,0x97,0xd9,0x80)+_0x21247d(0x9f,0x98,0xb5,0xad)+_0x21247d(0xdd,0xa4,0x107,0xea)],_0x4dee3c);const _0x32cdc1={};_0x32cdc1['id']=_0x110f5a,_0x203aca[_0x21247d(0x96,0x8e,0xc0,0xd6)](_0x37a9ee[_0x21247d(0xae,0xf9,0xc3,0x94)+_0x53eba3(0xbe,0x75,0x103,0x92)+_0x53eba3(0xe6,0x104,0x114,0x91)+'UEST'],_0x32cdc1),_0x1ad0ac(()=>{function _0x1cec1a(_0x117143,_0x23746a,_0x57291a,_0x559ead){return _0x21247d(_0x57291a- -0x100,_0x23746a-0x130,_0x57291a-0x111,_0x23746a);}function _0x155f5c(_0x4ee3ea,_0x5a19ca,_0x450c32,_0x895e10){return _0x53eba3(_0x4ee3ea-0x64,_0x5a19ca-0x1a9,_0x450c32-0x9c,_0x5a19ca);}_0x465192[_0x155f5c(0x170,0x13b,0x1ac,0x168)+_0x155f5c(0x11b,0x108,0x135,0xe2)](_0xe039da[_0x155f5c(0x130,0x10a,0xe9,0x16d)+'ATION_GET_'+'PROMPT_RES'+'PONSE'],_0x4dee3c),_0xb018ea[_0x1cec1a(0x10,-0x4f,-0x25,-0x21)](_0x3a90ef,new _0x443a38(_0xb018ea['eZZBj']));},0x3142+-0x2c7e+0x1126*0x2);}}}}return{'originalTags':_0x50b200,'cleanedTags':_0x2a2c90,'cleanedText':tagsToJsonString(_0x2a2c90),'tagMap':_0x395de0};}export function combineTranslationResult(_0x5b9961,_0x1d9b31){const _0x318ac5={};_0x318ac5[_0x9796bc(0x2d,0xc3,0x8b,0x6f)]=_0x9796bc(-0x9,-0xf,-0x38,0x3);function _0x3cc3a7(_0x1b21a1,_0x5c2a51,_0x48bfa3,_0x527a4f){return _0x567e(_0x1b21a1- -0x262,_0x527a4f);}_0x318ac5['AdHaf']=function(_0x436b17,_0x409d52){return _0x436b17===_0x409d52;},_0x318ac5[_0x9796bc(0x25,0x9d,0x67,0x54)]='object';function _0x9796bc(_0x17cc15,_0x2193f9,_0x31a5c3,_0x4ef166){return _0x567e(_0x4ef166- -0x190,_0x17cc15);}const _0x3e7885=_0x318ac5;if(!_0x5b9961||!Array[_0x3cc3a7(-0xc2,-0x106,-0xdf,-0xf4)](_0x5b9961))return[];const _0xf40583={};if(_0x1d9b31&&_0x3e7885[_0x3cc3a7(-0xb1,-0xeb,-0xcb,-0x91)](typeof _0x1d9b31,_0x3e7885[_0x9796bc(0x91,0x2,0xa7,0x54)]))for(const [_0x32379f,_0x48628d]of Object['entries'](_0x1d9b31)){_0xf40583[_0x32379f['toLowerCas'+'e']()]=_0x48628d;}return _0x5b9961[_0x3cc3a7(-0xbc,-0x80,-0xa9,-0x7b)](_0x433e58=>{const {original:_0x5b4bcd,cleaned:_0x407fd8,skip:_0x265f8f}=_0x433e58;if(_0x265f8f){if('PLaPJ'===_0x3e7885[_0x11cf3f(-0x15b,-0xcd,-0x121,-0x134)]){const {original:_0x3aac13,cleaned:_0x44b3b9,skip:_0x15999b}=_0x52b16a;if(_0x15999b){const _0x161073={};return _0x161073[_0x311bc4(0x42b,0x459,0x47c,0x490)]=_0x3aac13,_0x161073['translatio'+'n']='',_0x161073[_0x311bc4(0x4af,0x459,0x4a9,0x470)]=_0x44b3b9,_0x161073['skipped']=!![],_0x161073;}const _0x56f01e=_0x563dff[_0x44b3b9['toLowerCas'+'e']()]||'',_0x2400bd={};return _0x2400bd[_0x11cf3f(-0x150,-0x1aa,-0x18b,-0x14e)]=_0x3aac13,_0x2400bd['translatio'+'n']=_0x56f01e,_0x2400bd['cleaned']=_0x44b3b9,_0x2400bd[_0x311bc4(0x40b,0x4b0,0x45d,0x454)]=![],_0x2400bd;}else{const _0x885994={};return _0x885994[_0x311bc4(0x492,0x44d,0x47c,0x495)]=_0x5b4bcd,_0x885994[_0x11cf3f(-0x195,-0x159,-0x19e,-0x17d)+'n']='',_0x885994[_0x11cf3f(-0x184,-0x197,-0x15e,-0x1ac)]=_0x407fd8,_0x885994[_0x11cf3f(-0x19a,-0x18b,-0x1aa,-0x191)]=!![],_0x885994;}}function _0x11cf3f(_0x2ca9c2,_0x33ca32,_0x2d5b6d,_0x591d8f){return _0x9796bc(_0x33ca32,_0x33ca32-0xc6,_0x2d5b6d-0x138,_0x2d5b6d- -0x190);}function _0x311bc4(_0x4e6802,_0x662fe7,_0x577cf0,_0x522124){return _0x9796bc(_0x522124,_0x662fe7-0x13e,_0x577cf0-0x31,_0x577cf0-0x477);}const _0x2f3ad4=_0xf40583[_0x407fd8['toLowerCas'+'e']()]||'',_0x41c09f={};return _0x41c09f[_0x11cf3f(-0x155,-0x18f,-0x18b,-0x171)]=_0x5b4bcd,_0x41c09f[_0x311bc4(0x41c,0x46b,0x469,0x4a2)+'n']=_0x2f3ad4,_0x41c09f[_0x11cf3f(-0x14b,-0x158,-0x15e,-0x132)]=_0x407fd8,_0x41c09f[_0x311bc4(0x4af,0x414,0x45d,0x44d)]=![],_0x41c09f;});}export function formatTranslationDisplay(_0x123eb7,_0x25a14b={}){function _0x457eef(_0x2ad462,_0x30eda8,_0x3e74fb,_0x27a92d){return _0x567e(_0x2ad462- -0x8c,_0x27a92d);}const _0x1d8fec={'gGYLV':function(_0x4b762f,_0x2d2c36){return _0x4b762f(_0x2d2c36);},'njDcZ':function(_0x5ee48b,_0x3d3474){return _0x5ee48b===_0x3d3474;},'fhvJq':_0x7ab8b4(0x422,0x3eb,0x427,0x43e),'rorfb':_0x457eef(0x159,0x15f,0x152,0x134)};function _0x7ab8b4(_0x18278e,_0x1bb5e7,_0x288ebd,_0x3b16e9){return _0x567e(_0x1bb5e7-0x25a,_0x288ebd);}const {separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0x25a14b;if(!_0x123eb7||!Array['isArray'](_0x123eb7))return _0x1d8fec[_0x457eef(0xf4,0xf4,0xf0,0x129)]===_0x1d8fec[_0x457eef(0x124,0x17b,0xdd,0xd8)]?[]:'';return _0x123eb7[_0x7ab8b4(0x41f,0x400,0x3ec,0x3eb)](_0xe5990f=>{const _0x43387e={'jVoay':function(_0x5e1dd7,_0x4a89e2){function _0x1d816d(_0x45abf8,_0xad6f8f,_0x1d8127,_0x3b68ac){return _0x567e(_0x3b68ac-0x107,_0xad6f8f);}return _0x1d8fec[_0x1d816d(0x2e4,0x2df,0x27d,0x2ac)](_0x5e1dd7,_0x4a89e2);}};function _0x122091(_0x30d89b,_0x541498,_0x18a5bd,_0x3710a5){return _0x457eef(_0x3710a5- -0x275,_0x541498-0x1e4,_0x18a5bd-0x19e,_0x30d89b);}if(_0xe5990f[_0x122091(-0x1ba,-0x177,-0x13f,-0x18b)])return showOriginal?_0xe5990f[_0x122091(-0x14a,-0x1c2,-0x155,-0x16c)]:'';const _0x5c65b8=[];function _0x1013f8(_0x907f08,_0x34c3d3,_0x388f23,_0xdfee21){return _0x7ab8b4(_0x907f08-0xad,_0x907f08- -0x4a5,_0xdfee21,_0xdfee21-0x4d);}if(showOriginal)_0x5c65b8['push'](_0xe5990f[_0x1013f8(-0xb6,-0xa9,-0xfe,-0x67)]);if(showTranslation&&_0xe5990f[_0x122091(-0x1b9,-0x172,-0x173,-0x17f)+'n']){if(_0x1d8fec[_0x122091(-0x103,-0xc7,-0x9e,-0xf2)](_0x122091(-0x15f,-0x1b6,-0x197,-0x18d),_0x1013f8(-0x34,-0x86,-0x87,-0x44))){_0x5c0ca1[_0x122091(-0x14a,-0xea,-0xed,-0x12f)+_0x1013f8(-0xce,-0x9e,-0xff,-0x90)](_0x2e5d22[_0x122091(-0x18e,-0x145,-0x178,-0x16f)+_0x122091(-0x125,-0xda,-0xf3,-0x106)+_0x1013f8(-0x7e,-0x9e,-0xc8,-0x4b)],_0x5348d2);if(_0x37f922)_0x43387e[_0x122091(-0xe3,-0xda,-0x126,-0xf1)](_0x2b0cb7,_0x2d8f74);}else _0x5c65b8[_0x122091(-0xd6,-0x11c,-0x16f,-0x11a)]('('+_0xe5990f[_0x1013f8(-0xc9,-0x80,-0x92,-0xa2)+'n']+')');}return _0x5c65b8['join']('\x20');})['filter'](Boolean)[_0x457eef(0x15a,0x139,0x147,0x159)](separator);}export async function translatePromptTags(_0x3446f5){const _0x41a380={'dfjck':function(_0x45364f,_0x58b2c6){return _0x45364f+_0x58b2c6;},'RRqkr':function(_0x3e0289,_0x2301e9){return _0x3e0289(_0x2301e9);},'NLwNk':function(_0xdcc029,_0x56ad2b){return _0xdcc029!==_0x56ad2b;},'GBEYg':'CGaRg','GruVP':_0x8e81c9(-0x7e,-0x42,-0x8f,-0x6a),'Cfeex':_0x8e81c9(-0x7e,-0xb2,-0x7c,-0xd2),'CNnnK':function(_0x1e921b,_0x1538af){return _0x1e921b(_0x1538af);},'Sckdb':function(_0x3afa48,_0x243ec4){return _0x3afa48(_0x243ec4);},'zTVcK':_0x8e81c9(0xf,-0x62,-0x2b,-0x35)+_0x8e81c9(-0xd8,-0xfd,-0xb7,-0xbb)+':'},{originalTags:_0x2c35f6,cleanedText:_0x1e77a3}=_0x41a380[_0xf64215(0x263,0x250,0x229,0x254)](preprocessPromptForTranslation,_0x3446f5);function _0xf64215(_0x539367,_0x3f40be,_0x5e33c9,_0x5cf4f7){return _0x567e(_0x3f40be-0xd2,_0x5cf4f7);}if(!_0x1e77a3){if(_0x41a380[_0xf64215(0x25f,0x2ae,0x2c0,0x2bb)](_0x41a380[_0xf64215(0x2df,0x2c1,0x274,0x2ee)],_0x41a380[_0xf64215(0x26c,0x25e,0x220,0x247)])){const _0xb2ca16={};return _0xb2ca16[_0x8e81c9(-0x82,-0xb6,-0x68,-0x89)]=[],_0xb2ca16[_0xf64215(0x2d4,0x2e6,0x2a1,0x2e8)+'t']='',_0xb2ca16[_0xf64215(0x282,0x2c6,0x293,0x311)+'gs']=[],_0xb2ca16;}else{const _0x5ac86d={};return _0x5ac86d['results']=[],_0x5ac86d[_0x8e81c9(-0x5f,0x17,0x1f,-0x2c)+'t']='',_0x5ac86d['originalTa'+'gs']=[],_0x5ac86d;}}function _0x8e81c9(_0x3eb5c0,_0x3a494c,_0x26c8b5,_0x1aa3f7){return _0x567e(_0x1aa3f7- -0x240,_0x3eb5c0);}try{if(_0x41a380[_0xf64215(0x2ab,0x2ae,0x2c3,0x25a)](_0xf64215(0x25f,0x240,0x20f,0x241),_0x41a380[_0x8e81c9(-0x35,-0x85,-0x96,-0x55)])){const _0x41e050=_0xb139ee['slice'](0x7*-0x40+-0x216a*0x1+0x232a,_0x36cc52)[_0x8e81c9(-0x20,-0x2c,-0x55,-0x2d)](),_0x4a9ae7=_0x59be26['slice'](_0x41a380['dfjck'](_0x160fc8,0x14f9+0x10fd+-0x25f5))['trim']();if(_0x41e050)_0x528abb[_0x41e050]=_0x4a9ae7;}else{const _0x415689=await _0x41a380['CNnnK'](callTranslation,_0x1e77a3),_0x23889c=_0x41a380[_0x8e81c9(-0xa1,-0x2f,-0xb,-0x58)](parseTranslationResult,_0x415689),_0x3069bd=combineTranslationResult(_0x2c35f6,_0x23889c),_0x50978e=_0x41a380[_0x8e81c9(-0x49,-0x68,-0x84,-0x5d)](formatTranslationDisplay,_0x3069bd),_0x24a7a0={};return _0x24a7a0[_0x8e81c9(-0x41,-0xa0,-0x7d,-0x89)]=_0x3069bd,_0x24a7a0[_0xf64215(0x2a9,0x2e6,0x28f,0x2e4)+'t']=_0x50978e,_0x24a7a0['originalTa'+'gs']=_0x2c35f6,_0x24a7a0;}}catch(_0x3a8783){console[_0x8e81c9(-0xbf,-0x72,-0x5a,-0x99)](_0x41a380['zTVcK'],_0x3a8783);throw _0x3a8783;}}export function parseTranslationResult(_0x2e7c27){function _0x4a900f(_0x134618,_0x45344c,_0x46a7d8,_0x582977){return _0x567e(_0x134618-0x8c,_0x582977);}const _0x417a8d={'kVluR':function(_0x566b9f,_0x5c1da8){return _0x566b9f===_0x5c1da8;},'raBLm':_0x5b65df(0x28c,0x27c,0x23e,0x230),'moZSI':_0x5b65df(0x270,0x232,0x284,0x230)+_0x4a900f(0x220,0x1f6,0x203,0x276)+_0x4a900f(0x27c,0x285,0x236,0x2ca),'GCJOy':function(_0x351e6e,_0x266257){return _0x351e6e(_0x266257);},'uWMrs':'eKHvF','zpSsM':function(_0x428965,_0xff7262){return _0x428965>_0xff7262;},'xOuMr':_0x5b65df(0x1fb,0x26a,0x22c,0x236),'cQACH':function(_0x3c0013,_0x240bd8){return _0x3c0013+_0x240bd8;}};if(!_0x2e7c27)return{};try{const _0x167042=_0x2e7c27[_0x4a900f(0x25d,0x220,0x281,0x269)](/\{[\s\S]*\}/);if(_0x167042){const _0x23e088=JSON[_0x4a900f(0x263,0x296,0x22b,0x241)](_0x167042[-0x1502+0xa7f+0xa83]);if(_0x417a8d['kVluR'](typeof _0x23e088,_0x417a8d[_0x5b65df(0x1cc,0x241,0x208,0x1fc)])&&_0x23e088!==null)return _0x23e088;}}catch(_0x5317ce){console['warn'](_0x417a8d[_0x4a900f(0x299,0x2e6,0x2c0,0x27b)],_0x5317ce[_0x4a900f(0x23e,0x1f1,0x25f,0x275)]);}const _0x618a6b=_0x417a8d['GCJOy'](String,_0x2e7c27)[_0x5b65df(0x2a4,0x24b,0x26c,0x273)](/[\r\n]+/g,'\x20')[_0x5b65df(0x244,0x2a5,0x26c,0x2bd)](/^[\s"'`]+|[\s"'`]+$/g,'')['trim'](),_0x540f84=_0x618a6b['split'](/[,，]/)['map'](_0x435839=>_0x435839[_0x5b65df(0x27b,0x275,0x28c,0x23a)]())[_0x4a900f(0x228,0x219,0x210,0x21f)](Boolean),_0x9169b5={};for(const _0x1233cb of _0x540f84){if(_0x417a8d[_0x5b65df(0x223,0x18f,0x1e4,0x227)](_0x417a8d[_0x4a900f(0x22e,0x214,0x23c,0x25a)],_0x417a8d[_0x5b65df(0x268,0x252,0x21b,0x1da)])){const _0x17470f=_0x1233cb['indexOf']('\x5c');if(_0x417a8d[_0x4a900f(0x222,0x22f,0x22f,0x1fd)](_0x17470f,-0x566+0xbb5+0x11*-0x5f)){if(_0x417a8d['kVluR'](_0x417a8d[_0x4a900f(0x257,0x20f,0x284,0x26a)],_0x417a8d[_0x5b65df(0x27a,0x25c,0x244,0x208)])){const _0xe51eca=_0x1233cb[_0x4a900f(0x269,0x280,0x243,0x279)](-0x328+-0xcaf*0x2+-0x2*-0xe43,_0x17470f)[_0x5b65df(0x241,0x2ca,0x28c,0x248)](),_0x1234f4=_0x1233cb[_0x5b65df(0x227,0x24c,0x256,0x26b)](_0x417a8d[_0x5b65df(0x244,0x1de,0x1ff,0x20f)](_0x17470f,0x11f*-0x20+-0x12f7+0x10e*0x34))[_0x5b65df(0x26b,0x244,0x28c,0x2bb)]();if(_0xe51eca)_0x9169b5[_0xe51eca]=_0x1234f4;}else _0x43b5c7[_0x4a900f(0x273,0x235,0x29b,0x22a)](_0x3b6266),_0x38d819[_0x5b65df(0x24b,0x1d7,0x214,0x22c)](_0x284057[_0x4a900f(0x213,0x258,0x201,0x1fd)+'e'](),_0x4655ff);}}else return _0x5dbd18[_0x4a900f(0x26e,0x223,0x2bc,0x28b)]();}function _0x5b65df(_0x1925ee,_0x499e6c,_0x2d0c05,_0x9a0767){return _0x567e(_0x2d0c05-0x79,_0x9a0767);}return _0x9169b5;}function generateRequestId(){const _0x293479={'Bqcnl':function(_0x41eb85,_0x34995d){return _0x41eb85(_0x34995d);},'XHCiQ':function(_0x15abca,_0x4aeb90){return _0x15abca!==_0x4aeb90;},'CkSwO':_0x3af6a3(0x390,0x3c3,0x3c8,0x3d9),'VZBty':function(_0x2c8834,_0x16c1de){return _0x2c8834+_0x16c1de;}};function _0x491c28(_0x418bc1,_0x4c4396,_0x2a8dcc,_0x3057b2){return _0x567e(_0x3057b2-0x91,_0x2a8dcc);}if(crypto&&crypto['randomUUID']){if(_0x293479['XHCiQ'](_0x293479['CkSwO'],_0x293479[_0x3af6a3(0x414,0x3e7,0x3e7,0x3da)]))_0x293479['Bqcnl'](_0x2d481d,new _0x3b1c96(_0x54f793['result']));else return crypto[_0x491c28(0x266,0x274,0x294,0x273)]();}function _0x3af6a3(_0x257c11,_0x41bd47,_0x4f7ad4,_0x355af0){return _0x567e(_0x41bd47-0x1e5,_0x355af0);}return _0x293479[_0x491c28(0x215,0x299,0x273,0x257)](Date['now']()[_0x3af6a3(0x32d,0x35d,0x3ae,0x36a)](0x1*0x2135+-0x8a3+-0x186e),Math[_0x3af6a3(0x3c6,0x36f,0x3a6,0x394)]()['toString'](-0x1b34+0x1ff9*0x1+0x1*-0x4a1)[_0x491c28(0x2e7,0x25d,0x247,0x294)](-0x1e33+-0x1*0x1345+-0x3*-0x107e));}export function LLM_TRANSLATION_GET_PROMPT(){const _0x48f8d5={'iVicc':function(_0x49d2f8,_0x23033b){return _0x49d2f8===_0x23033b;},'yqaou':function(_0x5c2667,_0x287dd1){return _0x5c2667!==_0x287dd1;},'bsBOk':function(_0x40b51e,_0x3465e8){return _0x40b51e===_0x3465e8;},'KECmI':function(_0x4021c8,_0x57b4d7){return _0x4021c8(_0x57b4d7);},'lctDC':function(_0x2ac456){return _0x2ac456();},'niLmm':function(_0x7ef7af,_0x21306e,_0x59592e){return _0x7ef7af(_0x21306e,_0x59592e);}};return new Promise((_0x537fd3,_0x28cd75)=>{const _0x2c40cb={'wRdkd':function(_0x1a96ff,_0x222a0e){return _0x48f8d5['iVicc'](_0x1a96ff,_0x222a0e);},'EzYJO':_0x259b32(-0x1bc,-0x1eb,-0x1a6,-0x1ab),'zTePu':function(_0x5f11a5,_0x1fc2af){function _0x471b59(_0x56a334,_0x172f7c,_0x442ad3,_0x13b819){return _0x259b32(_0x56a334-0x5c,_0x56a334,_0x442ad3-0xf1,_0x172f7c-0x35c);}return _0x48f8d5[_0x471b59(0x155,0x15c,0x167,0x199)](_0x5f11a5,_0x1fc2af);},'rOENR':function(_0x56a6d1,_0x431c7b){function _0xe7d7c4(_0x4a1a54,_0x133c83,_0x5dac0d,_0x2425e4){return _0x259b32(_0x4a1a54-0xea,_0x133c83,_0x5dac0d-0x5c,_0x4a1a54-0x4bb);}return _0x48f8d5[_0xe7d7c4(0x357,0x378,0x318,0x35e)](_0x56a6d1,_0x431c7b);},'hFZsn':function(_0x573d3a,_0x6db261){return _0x573d3a(_0x6db261);},'tAROv':function(_0x2c66ca,_0x1eac9c){function _0x46cc8d(_0x3458bb,_0x3782cd,_0x2ed22d,_0x1c138a){return _0x259b32(_0x3458bb-0xb3,_0x3782cd,_0x2ed22d-0x97,_0x2ed22d-0x1de);}return _0x48f8d5[_0x46cc8d(-0x5a,0x3,-0x17,-0x2)](_0x2c66ca,_0x1eac9c);}},_0x202b1e=_0x48f8d5['lctDC'](generateRequestId);console[_0x4ee640(-0x18,-0x59,-0x23,-0xa9)]('st-chatu8:'+_0x259b32(-0x171,-0x1d0,-0x1ee,-0x1c8)+_0x259b32(-0x257,-0x200,-0x216,-0x203)+_0x202b1e+')');const _0x288def=_0x14821f=>{function _0x44e481(_0x46aa5a,_0x364e91,_0x3e9ac8,_0x50b498){return _0x4ee640(_0x46aa5a-0xc,_0x50b498-0x526,_0x3e9ac8-0x1a5,_0x46aa5a);}function _0x532782(_0x2aa6ef,_0x17e4fb,_0x3f06cd,_0x4c8a0b){return _0x259b32(_0x2aa6ef-0x42,_0x4c8a0b,_0x3f06cd-0x1e6,_0x3f06cd-0x40c);}if(_0x2c40cb[_0x44e481(0x55e,0x50d,0x4f6,0x539)](_0x532782(0x29e,0x2bb,0x2b2,0x2f8),_0x532782(0x287,0x282,0x24a,0x28e))){const _0x430fea=_0x33cc9e[_0x532782(0x23a,0x29c,0x273,0x23f)](_0xf1a733[0xe80+-0x2527+0x16a7]);if(_0x2c40cb[_0x532782(0x1df,0x1f0,0x21d,0x240)](typeof _0x430fea,_0x2c40cb[_0x44e481(0x491,0x4da,0x4ef,0x4ae)])&&_0x2c40cb[_0x44e481(0x4fc,0x555,0x515,0x52f)](_0x430fea,null))return _0x430fea;}else{if(_0x2c40cb[_0x532782(0x2c3,0x28d,0x29c,0x27d)](_0x14821f['id'],_0x202b1e))return;eventSource['removeList'+'ener'](eventNames[_0x532782(0x1ef,0x224,0x22e,0x213)+_0x44e481(0x471,0x475,0x4d3,0x4b3)+_0x532782(0x1eb,0x205,0x21f,0x1ff)+_0x532782(0x221,0x228,0x25d,0x25e)],_0x288def);const {prompt:_0x249e3d}=_0x14821f;console[_0x532782(0x217,0x222,0x23a,0x22d)]('st-chatu8:'+_0x44e481(0x4f3,0x4c1,0x4f5,0x4de)+_0x532782(0x23a,0x23d,0x255,0x243)+_0x202b1e+'):',_0x249e3d),_0x2c40cb['hFZsn'](_0x537fd3,_0x249e3d);}};function _0x4ee640(_0x40e2af,_0x1b2310,_0xbb265a,_0x4f23a1){return _0x567e(_0x1b2310- -0x1f7,_0x4f23a1);}function _0x259b32(_0x2fdc4b,_0x420342,_0x1bbfd0,_0xd9c7a1){return _0x567e(_0xd9c7a1- -0x370,_0x420342);}eventSource['on'](eventNames[_0x259b32(-0x191,-0x189,-0x233,-0x1de)+'ATION_GET_'+_0x4ee640(-0x86,-0x74,-0x2c,-0x37)+_0x4ee640(0xf,-0x36,-0x27,-0x49)],_0x288def);const _0x501221={};_0x501221['id']=_0x202b1e,eventSource['emit'](eventNames[_0x4ee640(-0x19,-0x65,-0x9f,-0x8f)+_0x4ee640(-0x6f,-0x73,-0x69,-0x4c)+'PROMPT_REQ'+'UEST'],_0x501221),_0x48f8d5[_0x4ee640(0x53,-0x1,-0x20,-0x28)](setTimeout,()=>{eventSource[_0x186fe0(-0x11e,-0x10f,-0x145,-0x133)+_0x22e5fd(0x76,0xb5,0x88,0x8e)](eventNames[_0x186fe0(-0x16f,-0x14f,-0x111,-0x178)+'ATION_GET_'+_0x22e5fd(0xd6,0x9f,0x8e,0xe0)+'PONSE'],_0x288def);function _0x22e5fd(_0x2db1a3,_0x52a1e8,_0x1f42bf,_0x3669b0){return _0x4ee640(_0x2db1a3-0x76,_0x1f42bf-0x102,_0x1f42bf-0x14b,_0x2db1a3);}function _0x186fe0(_0x263d41,_0x58e79f,_0x394a62,_0x5066b2){return _0x259b32(_0x263d41-0x33,_0x263d41,_0x394a62-0x78,_0x58e79f-0x8f);}_0x2c40cb['tAROv'](_0x28cd75,new Error(_0x186fe0(-0x14c,-0x154,-0x135,-0x118)));},0xc*-0x291+-0x3*0xaa9+0x383*0x1d);});}export function LLM_TRANSLATION(_0x54087c,{timeoutMs:timeoutMs=0x1b7e*-0xd+-0x3f*-0x10b+0x20e11}={}){function _0x2a0ff7(_0x2570c0,_0x2ea81c,_0x46aaf5,_0x37ad70){return _0x567e(_0x2ea81c-0x1e1,_0x37ad70);}function _0x488d4f(_0x966595,_0x1e09ae,_0x11f1a9,_0x2ba4e5){return _0x567e(_0x11f1a9- -0x26f,_0x1e09ae);}const _0x3394ff={'rmXdN':function(_0x33ad3d,_0xadca31){return _0x33ad3d!==_0xadca31;},'pzynR':function(_0x1745d4){return _0x1745d4();},'lAvEV':function(_0x2d9d7f,_0x5512c3){return _0x2d9d7f===_0x5512c3;},'mdWFK':_0x488d4f(-0x107,-0xa7,-0xb3,-0xe1),'aYWhs':function(_0x443e79,_0x58495a){return _0x443e79(_0x58495a);},'ooBhY':function(_0x1d476e,_0x15efa9){return _0x1d476e===_0x15efa9;},'ZxQge':'AbortError','GOotM':function(_0x3e24e6,_0x405273){return _0x3e24e6===_0x405273;},'qqYwI':_0x2a0ff7(0x3de,0x3b6,0x366,0x3d3),'rKzdy':function(_0xe4fe6c,_0x317601){return _0xe4fe6c!==_0x317601;},'rxkpD':function(_0x4657c3,_0x426824,_0x54c51b){return _0x4657c3(_0x426824,_0x54c51b);}};return new Promise((_0x2dde9b,_0x1241d4)=>{const _0x24df1c={'YUHiQ':function(_0x504f84,_0x31b477){return _0x504f84!==_0x31b477;},'yCxLM':_0x10f35f(0x4cc,0x50e,0x491,0x4c9),'YROar':function(_0x14a542,_0x191de8){function _0x25065d(_0x49f82f,_0x480142,_0x56e383,_0x445cbd){return _0x10f35f(_0x480142,_0x480142-0xb3,_0x56e383-0x40,_0x445cbd- -0x42a);}return _0x3394ff[_0x25065d(0xf5,0x115,0xf1,0xca)](_0x14a542,_0x191de8);},'nPrqv':function(_0x927c35,_0x488985){return _0x3394ff['GOotM'](_0x927c35,_0x488985);},'DruVU':_0x3394ff[_0x10f35f(0x4cc,0x45e,0x470,0x47c)]};function _0x10f35f(_0x4974d5,_0x241196,_0x484609,_0x6227af){return _0x2a0ff7(_0x4974d5-0xf9,_0x6227af-0xfe,_0x484609-0x78,_0x4974d5);}function _0x24d693(_0xb64f5c,_0x3fab5c,_0x5c4368,_0x2e0eb2){return _0x488d4f(_0xb64f5c-0x60,_0x5c4368,_0x2e0eb2-0x63a,_0x2e0eb2-0x16a);}if(_0x3394ff[_0x10f35f(0x46c,0x49a,0x4c3,0x4b7)](_0x10f35f(0x490,0x4c7,0x4e4,0x49f),'aIgoR')){const _0x30f1c4=generateRequestId();console[_0x10f35f(0x42f,0x427,0x42e,0x47d)](_0x24d693(0x5bc,0x5c3,0x61f,0x5d6)+_0x10f35f(0x42a,0x4a7,0x442,0x46f)+'(ID:\x20'+_0x30f1c4+')');let _0x25c2de=null;const _0x9ad31f=()=>{function _0x7edee1(_0x44402c,_0x4b26d1,_0x5df420,_0x4d25f7){return _0x24d693(_0x44402c-0xdc,_0x4b26d1-0xfd,_0x44402c,_0x4d25f7- -0x620);}const _0x4c7169={'ykDWt':function(_0xe1b0ee,_0xc03668){function _0x17cd15(_0x45f7c9,_0x4578bf,_0x4cc3d4,_0x52b413){return _0x567e(_0x4cc3d4-0x394,_0x4578bf);}return _0x24df1c[_0x17cd15(0x533,0x537,0x586,0x554)](_0xe1b0ee,_0xc03668);},'ykgFY':function(_0x3be643,_0x3c5e27){return _0x3be643(_0x3c5e27);}};function _0x2c2015(_0x3bd28c,_0xfa9ff1,_0x4871ea,_0x305e99){return _0x24d693(_0x3bd28c-0x18c,_0xfa9ff1-0x19c,_0x305e99,_0x4871ea-0xa);}if(_0x24df1c[_0x7edee1(-0xcd,-0xbb,-0x8a,-0x8b)]===_0x24df1c[_0x2c2015(0x5e9,0x5a7,0x59f,0x5f4)]){eventSource['removeList'+_0x7edee1(-0x101,-0xd8,-0x10e,-0xd8)](eventNames[_0x2c2015(0x524,0x54b,0x567,0x52f)+_0x2c2015(0x5cb,0x596,0x5d0,0x584)+_0x2c2015(0x5bc,0x56c,0x5a2,0x5ce)],_0x3d7e48);if(_0x25c2de)_0x24df1c[_0x7edee1(-0x82,-0x44,-0x83,-0x7a)](clearTimeout,_0x25c2de);}else{if(_0x4c7169[_0x7edee1(-0x67,-0x3b,-0x6b,-0x4e)](_0x1a75e6['id'],_0x43b44b))return;_0x506be8['removeList'+_0x2c2015(0x521,0x575,0x552,0x59e)](_0x126fd8[_0x7edee1(-0x112,-0xee,-0xdf,-0xc3)+_0x2c2015(0x536,0x52d,0x559,0x55b)+_0x2c2015(0x520,0x507,0x558,0x554)+_0x2c2015(0x567,0x588,0x596,0x5b9)],_0x2c7ab5);const {prompt:_0x2770f0}=_0x1ed132;_0xf56da2['log']('st-chatu8:'+_0x7edee1(-0xf4,-0xae,-0x98,-0xa6)+_0x2c2015(0x599,0x588,0x58e,0x543)+_0x51326c+'):',_0x2770f0),_0x4c7169[_0x7edee1(-0xd6,-0xad,-0x7c,-0x9f)](_0x36c1cd,_0x2770f0);}},_0x3d7e48=_0x2b72fc=>{if(_0x3394ff[_0x3253be(0x20d,0x1e5,0x1af,0x1cd)](_0x2b72fc['id'],_0x30f1c4))return;_0x3394ff[_0x44ed9d(-0xcd,-0xdb,-0xde,-0x123)](_0x9ad31f);function _0x44ed9d(_0x114ac6,_0x3eeb9c,_0x2ccaa7,_0x23a960){return _0x10f35f(_0x114ac6,_0x3eeb9c-0x13b,_0x2ccaa7-0x193,_0x23a960- -0x573);}function _0x3253be(_0x215506,_0x40780f,_0x2cb735,_0x34d4c5){return _0x10f35f(_0x34d4c5,_0x40780f-0xa8,_0x2cb735-0xa,_0x40780f- -0x2eb);}console[_0x44ed9d(-0x123,-0xe2,-0x113,-0xf6)](_0x3253be(0x232,0x1ff,0x244,0x1bf)+_0x44ed9d(-0xb0,-0xb0,-0xc8,-0x8c)+_0x44ed9d(-0xbf,-0x146,-0x115,-0xfb)+'\x20'+_0x30f1c4+'):',_0x2b72fc);if(_0x2b72fc[_0x3253be(0x15e,0x19f,0x157,0x16d)]){if(_0x3394ff[_0x3253be(0x18a,0x16d,0x11e,0x1bf)](_0x3394ff[_0x44ed9d(-0xff,-0xe0,-0x71,-0xc8)],_0x3394ff[_0x44ed9d(-0xa9,-0xc8,-0xa6,-0xc8)]))_0x3394ff[_0x44ed9d(-0xd3,-0xaf,-0xb1,-0x7f)](_0x2dde9b,_0x2b72fc[_0x3253be(0x1b6,0x1ae,0x1c2,0x19f)]);else for(const [_0x5f2ced,_0x407b6e]of _0x5e13d2['entries'](_0x16e576)){_0x1f0dd5[_0x5f2ced[_0x3253be(0x168,0x17b,0x136,0x14c)+'e']()]=_0x407b6e;}}else{if(_0x2b72fc['error']&&_0x3394ff['ooBhY'](_0x2b72fc[_0x3253be(0x15c,0x19b,0x1d3,0x157)]['name'],_0x3394ff['ZxQge'])){const _0x3f195a=new Error(_0x2b72fc[_0x44ed9d(-0x13f,-0x116,-0x142,-0xed)][_0x44ed9d(-0xac,-0xdb,-0xf9,-0xe2)]);_0x3f195a[_0x3253be(0x18f,0x198,0x1a3,0x1d3)]=_0x3394ff[_0x3253be(0x1a1,0x18b,0x1a6,0x136)],_0x3394ff[_0x44ed9d(-0x2e,-0xc7,-0x8d,-0x7f)](_0x1241d4,_0x3f195a);}else _0x1241d4(new Error(_0x2b72fc[_0x44ed9d(-0x108,-0x115,-0xd7,-0xda)]));}};eventSource['on'](eventNames[_0x24d693(0x575,0x52d,0x535,0x55d)+_0x24d693(0x5a0,0x5b7,0x5a3,0x5c6)+_0x24d693(0x5ca,0x5a9,0x5de,0x598)],_0x3d7e48);const _0x1bdf65={};_0x1bdf65[_0x24d693(0x5d2,0x5b6,0x601,0x5c8)]=_0x54087c,_0x1bdf65['id']=_0x30f1c4,eventSource[_0x24d693(0x548,0x555,0x53e,0x545)](eventNames['LLM_TRANSL'+_0x10f35f(0x51f,0x539,0x492,0x4e4)+_0x10f35f(0x4e8,0x547,0x4b9,0x4f0)],_0x1bdf65),_0x25c2de=_0x3394ff[_0x10f35f(0x44f,0x4ba,0x4aa,0x482)](setTimeout,()=>{function _0x148e73(_0x4a1c1b,_0x59dc75,_0x3050a3,_0x172f49){return _0x24d693(_0x4a1c1b-0x60,_0x59dc75-0x16,_0x3050a3,_0x172f49- -0x6c7);}function _0x13ddc2(_0x395696,_0xb24881,_0x14c6b1,_0x33ca76){return _0x24d693(_0x395696-0xab,_0xb24881-0x54,_0x14c6b1,_0xb24881- -0x2a5);}_0x24df1c[_0x13ddc2(0x2a9,0x2ee,0x2d0,0x30c)](_0x24df1c[_0x13ddc2(0x2df,0x31d,0x2e6,0x2d4)],_0x148e73(-0xd6,-0x144,-0x119,-0xf6))?_0x50b857[_0x148e73(-0x128,-0x14a,-0x110,-0x115)]('('+_0x4f92a1[_0x148e73(-0x181,-0x176,-0x1aa,-0x17a)+'n']+')'):(_0x9ad31f(),_0x24df1c[_0x13ddc2(0x32a,0x301,0x34d,0x2d0)](_0x1241d4,new Error(_0x13ddc2(0x29d,0x2ed,0x2c3,0x2c7)+'时（'+timeoutMs+_0x148e73(-0xf4,-0xee,-0x114,-0x113))));},timeoutMs);}else{const _0x41bd89=_0x57f0e6[_0x10f35f(0x4c7,0x537,0x4b0,0x4ed)](_0x49b4de,arguments);return _0x3f99f6=null,_0x41bd89;}});}export async function callTranslation(_0x420aef){function _0x17c6b9(_0x1c8f35,_0xba2671,_0x1d23d1,_0x5a1197){return _0x567e(_0x1d23d1- -0xcb,_0x1c8f35);}const _0x3a60f8={'TQfag':function(_0x3e2cd4,_0x14b38d,_0x249dc0){return _0x3e2cd4(_0x14b38d,_0x249dc0);},'NQXrJ':_0x17c6b9(0x9f,0xf3,0xb7,0xa4)+'n','DsWUW':function(_0x47b5f9,_0xa2c4c6){return _0x47b5f9||_0xa2c4c6;},'wsOJm':function(_0x2075a7,_0x451f94){return _0x2075a7(_0x451f94);},'ensbX':function(_0x39aa12,_0x15e90a){return _0x39aa12||_0x15e90a;},'GMhhC':function(_0x15f61c,_0x5bb78e){return _0x15f61c!==_0x5bb78e;},'gCyGD':_0x17c6b9(0x106,0x126,0x131,0x12a),'mmcJd':'翻译失败:'};function _0xbd5450(_0x362637,_0x44489d,_0x7c7348,_0x2dfbfe){return _0x567e(_0x362637- -0x207,_0x7c7348);}try{let _0x5b033b=_0x3a60f8[_0x17c6b9(0xff,0x107,0xf8,0xb1)](buildPromptForRequestType,_0x3a60f8[_0x17c6b9(0x110,0xd1,0xfe,0x110)],_0x3a60f8[_0xbd5450(-0x9b,-0xad,-0xe3,-0x49)](_0x420aef,''));_0x5b033b=_0x3a60f8[_0x17c6b9(0x113,0xc7,0x10f,0x14b)](mergeAdjacentMessages,_0x5b033b);const _0x2b2b87=[..._0x5b033b,{'role':_0xbd5450(-0x12,-0xd,0x13,-0x58),'content':_0x3a60f8[_0x17c6b9(0x107,0x116,0xc0,0xdf)](_0x420aef,'')}];_0x3a60f8[_0x17c6b9(0xc0,0x141,0x10f,0x112)](updateCombinedPrompt,_0x2b2b87);const _0x18d7a3=await _0x3a60f8['wsOJm'](LLM_TRANSLATION,_0x2b2b87);return _0x18d7a3;}catch(_0x5ddb1f){if(_0x3a60f8[_0xbd5450(-0x4f,-0x4,-0xa1,-0xa0)](_0x3a60f8['gCyGD'],_0x17c6b9(0xb2,0xcf,0x105,0xd9))){_0x3a60f8[_0xbd5450(-0x2d,0x17,-0x22,-0x20)](addLog,_0x17c6b9(0x10d,0xae,0xf2,0x109)+_0x5ddb1f[_0x17c6b9(0x13e,0x109,0xe7,0xbd)]),console['error'](_0x3a60f8[_0x17c6b9(0x11a,0x12f,0x147,0x153)],_0x5ddb1f);throw _0x5ddb1f;}else{if(_0x1f2e64&&_0x3660b3[_0xbd5450(-0x25,0x22,0x26,0xd)])return _0x33163c[_0xbd5450(-0x25,-0xd,0x2a,-0x34)]();return _0x1e41f9[_0xbd5450(-0x92,-0xd8,-0x79,-0x4a)]()[_0xbd5450(-0x8f,-0xce,-0x43,-0x4e)](-0x5*0x19c+0x5*0x111+0x2db)+_0xcd3aae['random']()[_0x17c6b9(0x69,0x9a,0xad,0x78)](0xb5*0x1+0x85*-0x17+0xb62)[_0xbd5450(-0x4,-0x3c,-0x4a,-0x50)](0xbab+-0x222f*0x1+-0x3*-0x782);}}}let isAiInitialized=![];function _0x567e(_0x284057,_0x4655ff){_0x284057=_0x284057-(0xc06+-0x2632*0x1+0x932*0x3);const _0x4c1887=_0x577f();let _0x2cd69a=_0x4c1887[_0x284057];if(_0x567e['sHnpFr']===undefined){var _0x3f323c=function(_0x522dfa){const _0x414a0c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x403b87='',_0x321d37='',_0x100c87=_0x403b87+_0x3f323c;for(let _0xd3b682=-0xfd2+0xa*-0x267+-0x33*-0xc8,_0x12752f,_0x16fbba,_0x3c223d=0x4*0x29+-0x1*0xb3e+0x1*0xa9a;_0x16fbba=_0x522dfa['charAt'](_0x3c223d++);~_0x16fbba&&(_0x12752f=_0xd3b682%(0x1c0+0x7b8+-0x16*0x6e)?_0x12752f*(0x11ad+0xc72*0x3+-0x36c3)+_0x16fbba:_0x16fbba,_0xd3b682++%(-0x1*-0x190f+0x8b4+0xa3*-0x35))?_0x403b87+=_0x100c87['charCodeAt'](_0x3c223d+(-0x217*0x12+-0x1*-0x871+0x1*0x1d37))-(-0x1*-0x20fb+0x1551+-0x3642)!==0x1bb+-0x1405+0x124a?String['fromCharCode'](-0x225a+-0x1*-0x1363+0xff6&_0x12752f>>(-(0x24bd+-0x10bf+-0x13fc)*_0xd3b682&0x1d9f*-0x1+-0x5c*-0x58+0xa9*-0x3)):_0xd3b682:-0x1e0a+0x145d+0x1*0x9ad){_0x16fbba=_0x414a0c['indexOf'](_0x16fbba);}for(let _0x1eb9dd=-0x5*0x32d+0x25f*0xd+-0xef2,_0x55286b=_0x403b87['length'];_0x1eb9dd<_0x55286b;_0x1eb9dd++){_0x321d37+='%'+('00'+_0x403b87['charCodeAt'](_0x1eb9dd)['toString'](0xe*-0x25f+-0x1d70+0x32*0x141))['slice'](-(-0xaf*-0xb+0xcd*0x9+-0x274*0x6));}return decodeURIComponent(_0x321d37);};_0x567e['ManRfq']=_0x3f323c,_0x567e['XJkJlS']={},_0x567e['sHnpFr']=!![];}const _0x409636=_0x4c1887[-0x262a*0x1+0xc36+0x19f4],_0x4f73c6=_0x284057+_0x409636,_0x5d52f2=_0x567e['XJkJlS'][_0x4f73c6];if(!_0x5d52f2){const _0x2202cd=function(_0x3282d0){this['ZSAtqH']=_0x3282d0,this['DBGyEl']=[-0xccd+-0x1738*-0x1+-0x1f*0x56,0x19e2+0x2408+0x631*-0xa,0x10ea+-0x1c39+0xb4f],this['qKnfzp']=function(){return'newState';},this['lzuVrO']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ttTfio']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2202cd['prototype']['Xssnve']=function(){const _0x1bf668=new RegExp(this['lzuVrO']+this['ttTfio']),_0x3cefbd=_0x1bf668['test'](this['qKnfzp']['toString']())?--this['DBGyEl'][-0x14c9+0x138d+0x13d]:--this['DBGyEl'][-0x517*0x6+-0xd3*-0x8+0x17f2*0x1];return this['GSCSzk'](_0x3cefbd);},_0x2202cd['prototype']['GSCSzk']=function(_0x2f2d2e){if(!Boolean(~_0x2f2d2e))return _0x2f2d2e;return this['XEGvxZ'](this['ZSAtqH']);},_0x2202cd['prototype']['XEGvxZ']=function(_0x1f2537){for(let _0x343a6a=0x2136+-0x2*0xfef+-0x8*0x2b,_0x233d74=this['DBGyEl']['length'];_0x343a6a<_0x233d74;_0x343a6a++){this['DBGyEl']['push'](Math['round'](Math['random']())),_0x233d74=this['DBGyEl']['length'];}return _0x1f2537(this['DBGyEl'][0x1c*0xac+0x2a*0x5e+0x4*-0x88f]);},new _0x2202cd(_0x567e)['Xssnve'](),_0x2cd69a=_0x567e['ManRfq'](_0x2cd69a),_0x567e['XJkJlS'][_0x4f73c6]=_0x2cd69a;}else _0x2cd69a=_0x5d52f2;return _0x2cd69a;}export function initAiSettings(_0x597f7c){function _0xf619d7(_0x3bec4f,_0x3392ff,_0x5bbbe3,_0x1a8e66){return _0x567e(_0x3392ff- -0x322,_0x1a8e66);}function _0xb46506(_0x4b315e,_0x30efa5,_0x132c47,_0x51baca){return _0x567e(_0x4b315e- -0x34a,_0x51baca);}const _0x3a3356={};_0x3a3356[_0xb46506(-0x1a0,-0x1ae,-0x16c,-0x176)]='st-chatu8:'+_0xf619d7(-0x172,-0x121,-0xdb,-0xd7)+'\x20LLM\x20设置页面';const _0x18b17d=_0x3a3356;!isAiInitialized&&(console[_0xb46506(-0x1ac,-0x15f,-0x17d,-0x198)](_0x18b17d[_0xb46506(-0x1a0,-0x1e3,-0x1c7,-0x160)]),isAiInitialized=!![]);}