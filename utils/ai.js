(function(_0x5715e0,_0x14246e){function _0x5e42f1(_0x5cdf0c,_0x4093e4,_0x32714d,_0x52fed5){return _0x4f3c(_0x4093e4-0x1f3,_0x32714d);}const _0x420b4b=_0x5715e0();function _0x4d5fba(_0x529e96,_0x38a0eb,_0x2b3e7c,_0x26985c){return _0x4f3c(_0x38a0eb-0x138,_0x529e96);}while(!![]){try{const _0x31b156=-parseInt(_0x4d5fba(0x215,0x256,0x20d,0x24f))/(-0xf5f+-0x3*0x8bf+0x299d)+-parseInt(_0x4d5fba(0x218,0x22f,0x212,0x256))/(-0xd*0x12f+0x1d13+-0xdae)*(parseInt(_0x5e42f1(0x365,0x32f,0x2f5,0x2ec))/(0xaa3+-0x100*-0x11+0x1ba0*-0x1))+-parseInt(_0x4d5fba(0x1d3,0x219,0x211,0x1f1))/(-0x4f*-0x3d+-0x1*-0x242a+-0x36f9)+parseInt(_0x5e42f1(0x355,0x324,0x30e,0x2de))/(0x1f75+0x5*-0x751+0x525*0x1)*(parseInt(_0x5e42f1(0x2c2,0x2d8,0x2aa,0x332))/(-0x189c+0x4*0x42d+-0x5*-0x196))+parseInt(_0x5e42f1(0x2b2,0x2e9,0x31a,0x2a1))/(0x2*0xe4a+-0x4c*0x83+0xa57)+-parseInt(_0x5e42f1(0x38d,0x358,0x317,0x382))/(-0x2564+-0x2*-0xac8+0xfdc)+parseInt(_0x4d5fba(0x24c,0x1f9,0x202,0x1d6))/(0x1d9*-0xf+-0x2448+-0x556*-0xc);if(_0x31b156===_0x14246e)break;else _0x420b4b['push'](_0x420b4b['shift']());}catch(_0x3aaf43){_0x420b4b['push'](_0x420b4b['shift']());}}}(_0x4f06,-0x493b*0x8+-0x29653*0x1+0x989b3*0x1));function _0x4f3c(_0x1cc3fd,_0x1cb3d8){_0x1cc3fd=_0x1cc3fd-(0x1*0x13f1+-0x1e50+0x2c5*0x4);const _0x403053=_0x4f06();let _0x549fd7=_0x403053[_0x1cc3fd];if(_0x4f3c['YNVLAF']===undefined){var _0x442e51=function(_0x1d079c){const _0x32350b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x497445='',_0x26f396='',_0x3e627d=_0x497445+_0x442e51;for(let _0x25eb0d=-0x5*0x6b6+-0x1fc2+0x4150,_0x4070b6,_0x4941ad,_0x3f6a47=-0x1*-0x177f+0x20a7+0x3826*-0x1;_0x4941ad=_0x1d079c['charAt'](_0x3f6a47++);~_0x4941ad&&(_0x4070b6=_0x25eb0d%(-0xc4b*0x1+0x2592+-0xdf*0x1d)?_0x4070b6*(-0x4c*0x26+0xf10*-0x2+0x29a8)+_0x4941ad:_0x4941ad,_0x25eb0d++%(0x1039*0x1+0x1e2+-0x1217*0x1))?_0x497445+=_0x3e627d['charCodeAt'](_0x3f6a47+(0x56f*-0x3+0x16b5*0x1+-0x146*0x5))-(0x26da+0x3d*-0x94+0x2*-0x1c6)!==0x3a1*-0x7+0x4f*-0x25+0x24d2?String['fromCharCode'](-0x2074+-0x1238+0x33ab&_0x4070b6>>(-(0x1*0x237e+-0xce8*-0x2+-0x3d4c)*_0x25eb0d&0x240b+-0x21f7+-0x2*0x107)):_0x25eb0d:0x14*-0x38+-0x220b+0x119*0x23){_0x4941ad=_0x32350b['indexOf'](_0x4941ad);}for(let _0x35084a=0x1bc+-0xe2c*-0x2+-0x2bc*0xb,_0x42b2c8=_0x497445['length'];_0x35084a<_0x42b2c8;_0x35084a++){_0x26f396+='%'+('00'+_0x497445['charCodeAt'](_0x35084a)['toString'](-0x15e8+0x1b14+0x147*-0x4))['slice'](-(-0x25e+0x36e+-0x87*0x2));}return decodeURIComponent(_0x26f396);};_0x4f3c['qOSZXm']=_0x442e51,_0x4f3c['eCaBBl']={},_0x4f3c['YNVLAF']=!![];}const _0x3c9321=_0x403053[0x222f+-0xfbd+-0x1272],_0x5a6ed4=_0x1cc3fd+_0x3c9321,_0x1b053d=_0x4f3c['eCaBBl'][_0x5a6ed4];if(!_0x1b053d){const _0x453e01=function(_0xe124c4){this['rxPvwt']=_0xe124c4,this['dlgykD']=[0x92f+0x1416+-0x1*0x1d44,0x12cd+0x1*0x1a4f+-0x2d1c,0x2a1*0x5+-0x2*0xd2e+0xd37],this['XabMYO']=function(){return'newState';},this['OLNItZ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['CSRqxm']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x453e01['prototype']['Mzydyx']=function(){const _0x57a239=new RegExp(this['OLNItZ']+this['CSRqxm']),_0x78e301=_0x57a239['test'](this['XabMYO']['toString']())?--this['dlgykD'][-0x172d+-0x1fb1+0xb*0x4fd]:--this['dlgykD'][0x14ca+-0x23b6+-0x5*-0x2fc];return this['RNQGaQ'](_0x78e301);},_0x453e01['prototype']['RNQGaQ']=function(_0x356283){if(!Boolean(~_0x356283))return _0x356283;return this['vIrrws'](this['rxPvwt']);},_0x453e01['prototype']['vIrrws']=function(_0x63f469){for(let _0x4089e9=0x42*0x3b+-0x211c+0x11e6,_0x224bbe=this['dlgykD']['length'];_0x4089e9<_0x224bbe;_0x4089e9++){this['dlgykD']['push'](Math['round'](Math['random']())),_0x224bbe=this['dlgykD']['length'];}return _0x63f469(this['dlgykD'][0x20db+-0x16a4+-0xa37]);},new _0x453e01(_0x4f3c)['Mzydyx'](),_0x549fd7=_0x4f3c['qOSZXm'](_0x549fd7),_0x4f3c['eCaBBl'][_0x5a6ed4]=_0x549fd7;}else _0x549fd7=_0x1b053d;return _0x549fd7;}const _0x35187e=(function(){const _0x543307={'KtitG':_0x318657(0x3e2,0x372,0x3db,0x3c1)+'+$','yZKOq':function(_0x56ca9f,_0x215c32){return _0x56ca9f(_0x215c32);},'KjWXI':function(_0x124206,_0x5c1cf3){return _0x124206===_0x5c1cf3;},'YYzNw':function(_0x1deca7,_0x55648f){return _0x1deca7!==_0x55648f;},'RAXpv':_0x15bf54(0x1dd,0x213,0x26c,0x211)};let _0x1074d0=!![];function _0x318657(_0xac700a,_0x595a16,_0x604350,_0x7f2184){return _0x4f3c(_0x7f2184-0x2bd,_0x595a16);}function _0x15bf54(_0x448c08,_0x228c81,_0x1f3b9e,_0x3ffdda){return _0x4f3c(_0x3ffdda-0x12d,_0x228c81);}return function(_0x3a0a88,_0x1beb0b){function _0x4539a4(_0xf5d95f,_0x1d8d1b,_0x7b1a0a,_0xcc75c4){return _0x318657(_0xf5d95f-0xe8,_0xcc75c4,_0x7b1a0a-0x51,_0x7b1a0a-0x11a);}function _0x3e6279(_0x1817d6,_0x140c02,_0x5d0be8,_0x56a7f4){return _0x15bf54(_0x1817d6-0x192,_0x5d0be8,_0x5d0be8-0x1c1,_0x56a7f4- -0x11e);}if(_0x543307['YYzNw'](_0x543307[_0x3e6279(0x13b,0x174,0x13a,0x16a)],_0x543307[_0x4539a4(0x51b,0x582,0x532,0x541)]))return _0x3c91fc['toString']()[_0x3e6279(0x124,0x17b,0x125,0x153)](_0x543307[_0x3e6279(0x166,0x138,0x146,0x170)])[_0x4539a4(0x4c1,0x4f3,0x4be,0x4d6)]()[_0x4539a4(0x4c6,0x483,0x4d6,0x4e2)+'r'](_0x10afac)[_0x3e6279(0x19c,0x112,0x12f,0x153)](_0x543307[_0x3e6279(0x152,0x185,0x17d,0x170)]);else{const _0x5cdb65=_0x1074d0?function(){const _0x4b824b={'TmTUi':function(_0x26770e,_0x2d222e){function _0x22ee54(_0x5587ac,_0x253bbe,_0x353043,_0x771513){return _0x4f3c(_0x5587ac-0x82,_0x253bbe);}return _0x543307[_0x22ee54(0x1d6,0x1f5,0x18f,0x215)](_0x26770e,_0x2d222e);}};function _0x2a5b8c(_0x49320d,_0x195eac,_0x55ab3d,_0x6d9e85){return _0x3e6279(_0x49320d-0x38,_0x195eac-0x83,_0x55ab3d,_0x195eac- -0x22c);}function _0x340077(_0x38ee37,_0x188fc4,_0x242ab3,_0x41c0f0){return _0x3e6279(_0x38ee37-0x117,_0x188fc4-0x77,_0x41c0f0,_0x242ab3-0xad);}if(_0x1beb0b){if(_0x543307[_0x340077(0x18d,0x199,0x191,0x153)](_0x340077(0x1d1,0x21f,0x212,0x1d7),_0x340077(0x222,0x22f,0x212,0x1e8))){const _0x3c3b3a=_0x1beb0b[_0x340077(0x21e,0x1d0,0x1d4,0x202)](_0x3a0a88,arguments);return _0x1beb0b=null,_0x3c3b3a;}else{const _0x3f102f=_0x2b4629[0x7e8+-0x3b6+-0x1d*0x25]||'',_0x2ad0fc=(_0x1ef4d1[-0x574+0x1*-0x152b+-0x191*-0x11]||'')[_0x340077(0x1b3,0x18b,0x17a,0x1b5)](),_0x2dd860=_0x49422e[0x1195+0x1ac4+0x2*-0x162b]||'',_0x5517f2=_0x42ee23[0xa4+0x1ce+-0x26e*0x1]||'',_0xa741bb={'original':_0x491073,'cleaned':_0x2ad0fc,'prefix':_0x3f102f,'suffix':_0x2dd860,'weight':_0x5517f2,'skip':_0x4b824b[_0x2a5b8c(-0xbb,-0x10c,-0xfc,-0xb7)](_0x41a0b6,_0x2661ff)||_0x4b824b[_0x340077(0x170,0x18a,0x1cd,0x1d5)](_0x1fdf4c,_0x2ad0fc)};_0x34bf43[_0x2a5b8c(-0x11e,-0x110,-0x122,-0x156)](_0xa741bb),!_0xa741bb[_0x340077(0x1bd,0x222,0x1ec,0x1f7)]&&_0x2ad0fc&&(_0x746c26[_0x340077(0x1f4,0x184,0x1c9,0x1d3)](_0x2ad0fc),_0x305771[_0x340077(0x252,0x1c4,0x206,0x1ea)](_0x2ad0fc[_0x2a5b8c(-0xc4,-0x10d,-0x158,-0x112)+'e'](),_0xa741bb));}}}:function(){};return _0x1074d0=![],_0x5cdb65;}};}()),_0x322e6d=_0x35187e(this,function(){function _0x32423d(_0x4aa0e9,_0x3379a2,_0x4b28a0,_0x8ec445){return _0x4f3c(_0x4b28a0-0x1f1,_0x4aa0e9);}const _0x19bcb7={};_0x19bcb7[_0x32423d(0x35b,0x2fe,0x308,0x326)]=_0x32423d(0x341,0x331,0x2f5,0x337)+'+$';const _0x251f74=_0x19bcb7;function _0x2d9834(_0x24c736,_0x4f8b45,_0xb825b7,_0x125567){return _0x4f3c(_0xb825b7-0xce,_0x24c736);}return _0x322e6d[_0x2d9834(0x1d7,0x1b6,0x1b5,0x15c)]()['search'](_0x251f74[_0x2d9834(0x214,0x230,0x1e5,0x1e7)])[_0x32423d(0x320,0x323,0x2d8,0x2cc)]()['constructo'+'r'](_0x322e6d)[_0x32423d(0x352,0x30d,0x335,0x2d9)](_0x251f74[_0x32423d(0x322,0x32b,0x308,0x2ca)]);});_0x322e6d();import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{extensionName,eventNames}from'./config.js';import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{mergeAdjacentMessages}from'./promptProcessor.js';function _0x4f06(){const _0x391076=['rxLWu0K','ANrtvum','EvPlt3e','sNDyrKe','rMDOAxK','zxHYyLm','C2XPy2u','vgzusum','rvnTz0y','uKfyChy','Cvv5vxK','y3nmr1q','zvjiy1e','u3PJsKu','57+76k+rieXmtsdMIAFOOyZOTOu','s3rPDeC','uxLgs2q','ugvkrxu','qvrjt05FuKvtua','mZi3odG4y3D3t0nP','z2XSrNK','57+76k+r5AsX6lsLoIa','qvrNu2S','ChjVBxb0','s0z2shy','C3rYAw5NAwz5','C0DAug8','Euz4BeK','ue9ou0u','Aw5KzxHpzG','ufjptvbux1jfuq','iefjioIUVUE9RUw3SUE7N+s4GowiSa','zhHOuMm','CMvWBgfJzq','Dunyz2m','sLnWB1e','6i635y+w57+76k+r5O+q56s66k+n6lAf5PE2','DhjPBq','vuvtva','ieXmtsdORR7NVA7POBxPNAi','mta4mta0nZzYuxbzsK4','ufbXDgW','tgPKvMi','Cxnhq0G','qvrjt05FuKvrvq','wvHUDwm','zeLcAfi','ELLOAg8','zw50CMLLCW','Eufzvuq','zMLSDgvY','zw1PDa','EvvHuMm','DhjHBNnSyxrPBW','z3DUBhC','C3rYAw5N','EwjRsfu','ufjptvbux1jfuW','DgvZDa','qKXSqw8','s2PxweK','suT1yKK','BwfW','CgfYC2u','y05WBfi','ufn5t1q','tgfMtLu','uwnPCeq','iePtt07OP6pMNPdLPlhOTkxVViW','EMXLv1C','icHjrdOG','yKfYr3G','mtC0mtmWnfLJrhn3wa','CgTcBLy','vevHz04','tNLVEw4','mJu2mZu2uKvgq1DK','wfrKwwO','Dg9tDhjPBMC','uu5or3u','zxjYB3i','DxnLCG','BhzdAe0','wNrTru0','twTVDeO','s3ndsKS','C3vIC3rYAw5N','zhvQBei','s0PmufO','C3qTy2HHDhu4oG','BMfTzq','AeLUsgq','BMjzqLy','ody3mdeZDwrWqMLs','nJjVBfrTAMu','uMfMC1C','BeHurLq','q0Hrvxa','vendtfG','Cuzctgi','rNzdwNu','zw5LCG','y29UC3rYDwn0BW','5BcD6k+v5PEN5Qc85BYpoG','vfrKy08','qwjVCNrfCNjVCG','swTjv2m','kcGOlISPkYKRkq','uw5urfu','sgv3swe','u2DzveK','DNj6DM8','BM93','swvuD24','t2zhtge','tgPUsKq','ChvZAa','ioE/U+IVKEApKoEKUUIVJEAGH+ETVUwKSEI0Pq','wLnpyMG','Dg9mB3DLCKnHCW','vg1uvwK','BwvZC2fNzq','t05trq','B2LpChO','revrzfq','u0rmruK','qvbcqMi','yxbWBhK','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','Bwf0y2G','B3jPz2LUywXuyq','CMfUzg9Tvvvjra','B3jPz2LUywW','mZq5ndq5Au1MCK5h','DvLQCha','teXnx1rsqu5tta','qvrjt05Fr0vuxW','y2XLyw5Lza','v3noC24','CMvZDwX0','ioAjP+IHJoE7K+AENcaOsuq6','D2fYBG','zgLZCgXHEvrLEa','ioIVT+AXGUE/U+IVKsbmte0G','Cgr5Bfu','rLbpzNi','uMn0zwS','keLeoIa','C3bSAxq','uKnVz3i','uuLTvgK','C2TPCa','mJbprvHvvuu','iow3SUIoT+wpLUE/U+IVKEApKoEKUUIVJsa','AxnbCNjHEq','D0LVu24','C29Tzq','surfzeO','Bg9N','BNLzyNC','57+76k+r5AsX6lsLoG','Awzoze4','AKzMy3e','mZuYodzRwfDPEwC','uKPOwfq','rvnu','vunRA1O','AM9PBG','y0vxDMK','CMvTB3zLtgLZDa','DePvCKu','C2vHCMnO','BgvUz3rO','yvHSzMO','DhH2t3e','AMHJz0e','s0DUwe0','C2v0','CMvZDwX0CW','u1Hbyui','zM5RBvy','r29KwK0','vePlCxK','C2TPChbLza','ufrjqxO'];_0x4f06=function(){return _0x391076;};return _0x4f06();}let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0x16f380){function _0x5e65c9(_0xdcc5d1,_0x1b80bf,_0x19a4eb,_0x201e26){return _0x4f3c(_0xdcc5d1- -0x95,_0x201e26);}function _0x30226b(_0x5afa4a,_0x5a098e,_0x42cfc7,_0x2ea6bf){return _0x4f3c(_0x2ea6bf- -0x11e,_0x5a098e);}return SKIP_PATTERNS[_0x30226b(-0xa,0x3a,0x24,0x17)](_0x513c8f=>_0x513c8f[_0x30226b(-0x72,-0x81,0xb,-0x4b)](_0x16f380['trim']()));}export function tagsToJsonString(_0x47c91e){if(!Array[_0x3dc17f(0x146,0x144,0xe5,0x12e)](_0x47c91e))return'[]';function _0x3dc17f(_0x176fb4,_0x165d99,_0x328566,_0x1fa635){return _0x4f3c(_0x1fa635- -0x5,_0x328566);}function _0x4529a7(_0xfa3396,_0x272f0f,_0x469ed4,_0x3bd257){return _0x4f3c(_0x272f0f-0x3a0,_0xfa3396);}return JSON[_0x4529a7(0x541,0x50b,0x516,0x544)](_0x47c91e[_0x4529a7(0x44d,0x46b,0x460,0x4a7)](_0x212b23=>_0x212b23&&typeof _0x212b23===_0x4529a7(0x4a8,0x470,0x41b,0x4aa)));}export function preprocessPromptForTranslation(_0x53e568){const _0x1a9f9e={'GhBJY':function(_0x1775da,_0x327dcc){return _0x1775da!==_0x327dcc;},'wIoSn':_0x3d006e(0x29a,0x2b5,0x25e,0x2a7),'pdylU':function(_0x1ae60c,_0x4df047){return _0x1ae60c<_0x4df047;},'YXnuc':function(_0x3dd991,_0x37f4a1){return _0x3dd991===_0x37f4a1;},'CtKXR':function(_0x18dd97,_0x1f7724){return _0x18dd97===_0x1f7724;},'OfGLa':function(_0x4effcc,_0x910c8a){return _0x4effcc!==_0x910c8a;},'PSyOT':'uZJMW','TfTIC':_0x3d006e(0x247,0x285,0x2cf,0x2d2),'oiOpz':function(_0x31541d,_0x46d280){return _0x31541d!==_0x46d280;},'cEWvi':'njqYJ','qRMBv':function(_0x37780e,_0x2fa4ac){return _0x37780e!==_0x2fa4ac;},'DEQdT':function(_0x2e83ae,_0x4bd360){return _0x2e83ae(_0x4bd360);},'TEagN':'string','JSpoQ':'dxhRc','cNplR':'BdZVd','RafsW':_0x1d462e(-0x119,-0x17f,-0x165,-0x141),'PTIAz':function(_0x34074e,_0x434129){return _0x34074e(_0x434129);},'JwXFA':function(_0x97faf,_0x4f4c03){return _0x97faf(_0x4f4c03);}};if(!_0x53e568||_0x1a9f9e['oiOpz'](typeof _0x53e568,_0x1a9f9e[_0x1d462e(-0x21f,-0x1ac,-0x1d1,-0x19d)])){if(_0x1a9f9e[_0x1d462e(-0x1e2,-0x1b7,-0x1f8,-0x20f)]!==_0x1d462e(-0x1f2,-0x201,-0x1fb,-0x218)){const _0x4ea89d=_0x5f1b6a[_0x1d462e(-0x1bf,-0x159,-0x19c,-0x16a)](_0x4a543b,arguments);return _0x141bed=null,_0x4ea89d;}else return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()};}const _0x20069e=_0x1989c9=>{function _0x2eb024(_0x5ef273,_0x221737,_0x4c7f8e,_0x1a2c58){return _0x1d462e(_0x5ef273-0x16f,_0x221737,_0x5ef273- -0xd4,_0x1a2c58-0x17f);}function _0x123087(_0x282457,_0x4bdc51,_0x52683,_0x4d9345){return _0x1d462e(_0x282457-0xd3,_0x4bdc51,_0x282457-0x8c,_0x4d9345-0x47);}if(_0x1a9f9e['GhBJY'](_0x1a9f9e[_0x123087(-0xf4,-0x104,-0x123,-0xb0)],_0x1a9f9e[_0x123087(-0xf4,-0x104,-0x102,-0xe0)]))return[];else{const _0x22b3f3=[];let _0x329af5='',_0x22d654=![];for(let _0x1275a6=0x1*0x1699+-0x15a*-0x1+-0x17f3*0x1;_0x1a9f9e[_0x123087(-0xff,-0xa5,-0xb6,-0xd6)](_0x1275a6,_0x1989c9[_0x123087(-0xe3,-0x104,-0xb1,-0x10d)]);_0x1275a6++){const _0x4fdb79=_0x1989c9[_0x1275a6];if(_0x1a9f9e[_0x2eb024(-0x2c2,-0x318,-0x319,-0x2ce)](_0x4fdb79,'$'))_0x22d654=!_0x22d654,_0x329af5+=_0x4fdb79;else{if((_0x1a9f9e[_0x123087(-0x162,-0x116,-0x18d,-0x18f)](_0x4fdb79,',')||_0x1a9f9e['CtKXR'](_0x4fdb79,'，'))&&!_0x22d654){if(_0x1a9f9e[_0x2eb024(-0x27d,-0x2b0,-0x2b2,-0x25d)](_0x1a9f9e[_0x123087(-0x14e,-0x18b,-0x19e,-0x113)],_0x1a9f9e[_0x2eb024(-0x22f,-0x235,-0x219,-0x244)])){const _0x1c483b=_0x329af5['trim']();if(_0x1c483b)_0x22b3f3[_0x123087(-0x11b,-0x118,-0x10d,-0xc5)](_0x1c483b);_0x329af5='';}else{const _0x5a52ce=_0x2e7127[_0x2eb024(-0x230,-0x24b,-0x1ee,-0x238)](-0x21d*-0x4+-0x4ae*-0x2+-0x11d0,_0x5191fc)['trim'](),_0x3b2be2=_0x5d7807['slice'](_0x5373e1+(0x5*-0x8d+-0x4f9+0x7bb))[_0x2eb024(-0x2ca,-0x28b,-0x2d3,-0x30c)]();if(_0x5a52ce)_0x428b59[_0x5a52ce]=_0x3b2be2;}}else{if(_0x1a9f9e[_0x123087(-0x114,-0xc6,-0x101,-0x124)](_0x1a9f9e[_0x123087(-0xe7,-0xd3,-0x102,-0xcd)],_0x1a9f9e[_0x2eb024(-0x247,-0x27e,-0x27b,-0x22a)]))return _0x49f906[_0x123087(-0xf3,-0x125,-0xa1,-0x144)](_0x8f95d9=>_0x8f95d9['test'](_0x484450[_0x123087(-0x16a,-0x1a0,-0x163,-0x15f)]()));else _0x329af5+=_0x4fdb79;}}}if(_0x329af5[_0x2eb024(-0x2ca,-0x2a2,-0x315,-0x279)]())_0x22b3f3['push'](_0x329af5[_0x123087(-0x16a,-0x11e,-0x155,-0x1a6)]());return _0x22b3f3;}};function _0x3d006e(_0x5724f8,_0x5edaaf,_0x4e7aeb,_0x3153d3){return _0x4f3c(_0x5edaaf-0x1ca,_0x3153d3);}const _0x1f4d51=_0x1a9f9e[_0x1d462e(-0x1b5,-0x1d9,-0x19f,-0x181)](_0x20069e,_0x53e568),_0x7209bb=[];function _0x1d462e(_0x3884c3,_0x1fbc6c,_0x35a6cc,_0x39f207){return _0x4f3c(_0x35a6cc- -0x2b4,_0x1fbc6c);}const _0x5dce78=[],_0x3b7116=new Map();for(const _0x288c7c of _0x1f4d51){if(_0x1a9f9e[_0x1d462e(-0x1c3,-0x1e1,-0x1ee,-0x238)](_0x1a9f9e[_0x1d462e(-0x1fd,-0x21b,-0x1db,-0x1a7)],_0x1a9f9e[_0x1d462e(-0x1fa,-0x1cf,-0x1bc,-0x1e9)])){const _0x39be24={'CHQUp':function(_0x3a7428,_0x359fac){return _0x1a9f9e['DEQdT'](_0x3a7428,_0x359fac);},'zYhho':'获取翻译提示词超时'};return new _0x2aa20a((_0xdb54ca,_0x25cb7b)=>{const _0x215b38={'tHqQR':function(_0x163e19,_0x9b2195){return _0x1a9f9e['qRMBv'](_0x163e19,_0x9b2195);},'ZSObh':function(_0x1c530e,_0x3e585d){function _0x5e7b85(_0x3e010a,_0x336d20,_0x2e91ce,_0xaeb2d4){return _0x4f3c(_0x2e91ce- -0x25e,_0x3e010a);}return _0x1a9f9e[_0x5e7b85(-0x166,-0x193,-0x149,-0x144)](_0x1c530e,_0x3e585d);}};function _0x1919ff(_0x205929,_0x1b8a68,_0xba4286,_0x38a20e){return _0x1d462e(_0x205929-0x1e0,_0xba4286,_0x205929-0x3d0,_0x38a20e-0x87);}const _0x1c384c=_0x486dbd();_0x51e649[_0x1919ff(0x253,0x23b,0x2ad,0x2a7)]('st-chatu8:'+_0x1919ff(0x235,0x205,0x284,0x281)+_0x1919ff(0x1fb,0x243,0x1fa,0x21d)+_0x1c384c+')');const _0x3b8ede=_0x2fd217=>{if(_0x215b38['tHqQR'](_0x2fd217['id'],_0x1c384c))return;_0x15bbc8[_0x518d09(0x137,0x14c,0xe8,0xe6)+_0x3596e1(-0x13a,-0x16f,-0x181,-0x11c)](_0x50cd05['LLM_TRANSL'+_0x518d09(0x116,0xb9,0x148,0x10a)+_0x518d09(0xc7,0xd0,0xe6,0x118)+_0x518d09(0xaa,0xb1,0xf0,0xc7)],_0x3b8ede);const {prompt:_0x157d51}=_0x2fd217;function _0x3596e1(_0x374c59,_0x118ff6,_0x4e857d,_0x56fb31){return _0x1919ff(_0x118ff6- -0x389,_0x118ff6-0x27,_0x4e857d,_0x56fb31-0xe6);}_0x328496[_0x518d09(0x12c,0x125,0xe4,0x118)](_0x3596e1(-0x18e,-0x17b,-0x157,-0x196)+_0x3596e1(-0x194,-0x13b,-0xf1,-0x13a)+'(ID:\x20'+_0x1c384c+'):',_0x157d51);function _0x518d09(_0xd792b,_0x3f311e,_0x1cf671,_0x4a963a){return _0x52ea34(_0x3f311e,_0xd792b- -0x2c2,_0x1cf671-0x1de,_0x4a963a-0x163);}_0x215b38[_0x3596e1(-0x197,-0x15e,-0x13a,-0x196)](_0xdb54ca,_0x157d51);};_0x2168a1['on'](_0x507f9e[_0x1919ff(0x23c,0x239,0x24f,0x1f2)+_0x1919ff(0x23d,0x26d,0x209,0x276)+_0x52ea34(0x3bb,0x389,0x3a5,0x359)+_0x1919ff(0x1d1,0x17a,0x1ec,0x1cb)],_0x3b8ede);const _0x57b638={};_0x57b638['id']=_0x1c384c;function _0x52ea34(_0x1e41f5,_0x2cb9a0,_0x4810a1,_0x565bba){return _0x3d006e(_0x1e41f5-0x1f4,_0x2cb9a0-0xed,_0x4810a1-0x88,_0x1e41f5);}_0x48aafb['emit'](_0x1b9cbf[_0x1919ff(0x23c,0x206,0x1ea,0x204)+_0x1919ff(0x23d,0x230,0x259,0x1fb)+_0x1919ff(0x1d3,0x1ae,0x1b7,0x22a)+_0x52ea34(0x3c1,0x376,0x355,0x395)],_0x57b638),_0x4a0fc4(()=>{_0x9342fb[_0xe49815(0x222,0x214,0x20b,0x210)+'ener'](_0x30ec86[_0x2c6a0f(0x1f7,0x240,0x1c6,0x1e4)+_0xe49815(0x191,0x19e,0x1ea,0x1ab)+_0x2c6a0f(0x1a9,0x1c8,0x1ac,0x159)+_0xe49815(0x150,0x13e,0x17e,0x1c8)],_0x3b8ede);function _0xe49815(_0x494be0,_0xa7e5d4,_0x2eb053,_0x3138c4){return _0x52ea34(_0x3138c4,_0x2eb053- -0x1ee,_0x2eb053-0x1f2,_0x3138c4-0xd9);}function _0x2c6a0f(_0x462e3c,_0x43f15f,_0x3f6b3d,_0x19b545){return _0x52ea34(_0x19b545,_0x462e3c- -0x1e0,_0x3f6b3d-0x104,_0x19b545-0x174);}_0x39be24[_0xe49815(0x1b7,0x187,0x1c3,0x174)](_0x25cb7b,new _0x22359f(_0x39be24[_0x2c6a0f(0x19f,0x1b4,0x1a7,0x159)]));},-0x31a5+0x4*-0x8a7+0x7b51);});}else{const _0x18a56e=_0x288c7c[_0x1d462e(-0x1df,-0x1eb,-0x19a,-0x1bb)](SD_SYMBOL_PATTERN);if(_0x18a56e){const _0x5b3267=_0x18a56e[0x1239*-0x2+0x5*0x6ee+-0x1cd*-0x1]||'',_0x1c9cad=(_0x18a56e[-0xd*-0x185+0x67a+-0x1a39]||'')[_0x1d462e(-0x203,-0x1dd,-0x1f6,-0x216)](),_0x29efde=_0x18a56e[-0x157*0x1+-0x1e85+0x1*0x1fdf]||'',_0x15f637=_0x18a56e[-0x49*0x43+-0x91b+0x1c3a]||'',_0x4dd999={'original':_0x288c7c,'cleaned':_0x1c9cad,'prefix':_0x5b3267,'suffix':_0x29efde,'weight':_0x15f637,'skip':_0x1a9f9e['PTIAz'](shouldSkipTranslation,_0x288c7c)||_0x1a9f9e[_0x1d462e(-0x177,-0x18f,-0x163,-0x11a)](shouldSkipTranslation,_0x1c9cad)};_0x7209bb[_0x3d006e(0x2f8,0x2d7,0x313,0x2f0)](_0x4dd999),!_0x4dd999[_0x1d462e(-0x1bf,-0x148,-0x184,-0x13a)]&&_0x1c9cad&&(_0x5dce78[_0x1d462e(-0x17a,-0x1d1,-0x1a7,-0x1f7)](_0x1c9cad),_0x3b7116[_0x1d462e(-0x11a,-0x115,-0x16a,-0x192)](_0x1c9cad[_0x3d006e(0x2c7,0x2da,0x2b3,0x31d)+'e'](),_0x4dd999));}else{const _0x1dfda5={'original':_0x288c7c,'cleaned':_0x288c7c,'prefix':'','suffix':'','weight':'','skip':_0x1a9f9e[_0x1d462e(-0x1ea,-0x166,-0x19f,-0x180)](shouldSkipTranslation,_0x288c7c)};_0x7209bb[_0x3d006e(0x2a6,0x2d7,0x283,0x2d6)](_0x1dfda5),!_0x1dfda5[_0x1d462e(-0x1a3,-0x1c4,-0x184,-0x172)]&&_0x288c7c&&(_0x5dce78[_0x1d462e(-0x183,-0x183,-0x1a7,-0x1cd)](_0x288c7c),_0x3b7116[_0x3d006e(0x358,0x314,0x2d8,0x313)](_0x288c7c['toLowerCas'+'e'](),_0x1dfda5));}}}return{'originalTags':_0x7209bb,'cleanedTags':_0x5dce78,'cleanedText':_0x1a9f9e[_0x1d462e(-0x13f,-0x182,-0x15f,-0x16e)](tagsToJsonString,_0x5dce78),'tagMap':_0x3b7116};}export function combineTranslationResult(_0x2976b3,_0x1331d4){const _0x2537ea={};_0x2537ea[_0x170a6b(-0x1ab,-0x120,-0x148,-0x163)]=_0xe9e8fb(0xff,0x12a,0x145,0xce),_0x2537ea[_0xe9e8fb(0x126,0xdd,0x8d,0xa6)]=function(_0x3a66f8,_0x3a2f53){return _0x3a66f8!==_0x3a2f53;},_0x2537ea['ROapB']=_0x170a6b(-0x1f9,-0x187,-0x207,-0x1c8);function _0xe9e8fb(_0x472a3a,_0x44e794,_0x18c40e,_0x3c3a85){return _0x4f3c(_0x44e794- -0x2d,_0x3c3a85);}_0x2537ea[_0xe9e8fb(0x112,0x10b,0x122,0x10e)]=_0x170a6b(-0x1b9,-0x187,-0x198,-0x193),_0x2537ea[_0x170a6b(-0x195,-0x17b,-0x1b6,-0x178)]=function(_0x18eae0,_0x45b32c){return _0x18eae0===_0x45b32c;};function _0x170a6b(_0x4b546b,_0x457fcc,_0x1d779e,_0x31e82c){return _0x4f3c(_0x31e82c- -0x2c1,_0x457fcc);}_0x2537ea[_0x170a6b(-0x1f0,-0x1ed,-0x203,-0x1db)]='object',_0x2537ea[_0xe9e8fb(0xdf,0xa7,0xdc,0xe3)]=function(_0x28aab2,_0x83b921){return _0x28aab2!==_0x83b921;},_0x2537ea[_0xe9e8fb(0x125,0x11a,0x16b,0x122)]=_0x170a6b(-0x177,-0x117,-0x125,-0x15e);const _0x6a6ee6=_0x2537ea;if(!_0x2976b3||!Array['isArray'](_0x2976b3)){if(_0x6a6ee6['IeTwn'](_0x6a6ee6['ROapB'],_0x6a6ee6[_0xe9e8fb(0x156,0x10b,0x15b,0xce)]))return[];else{const _0x3ce376={};return _0x3ce376[_0x170a6b(-0x171,-0x161,-0x1cb,-0x1a4)]=_0x19ddb1,_0x3ce376[_0x170a6b(-0x199,-0x1b9,-0x235,-0x1f3)+'n']='',_0x3ce376[_0x170a6b(-0x1f4,-0x143,-0x186,-0x19f)]=_0x1bab0d,_0x3ce376['skipped']=!![],_0x3ce376;}}const _0x249e7a={};if(_0x1331d4&&_0x6a6ee6[_0xe9e8fb(0x100,0x11c,0x12a,0xfa)](typeof _0x1331d4,_0x6a6ee6['XTdYj']))for(const [_0x29c527,_0x5d58f3]of Object[_0xe9e8fb(0x7b,0x9c,0xc3,0x94)](_0x1331d4)){_0x6a6ee6[_0xe9e8fb(0xd4,0xa7,0xdb,0x68)](_0x170a6b(-0x126,-0x14c,-0x135,-0x15e),_0x6a6ee6['txvOq'])?_0x503ffa[_0x4c51ad['toLowerCas'+'e']()]=_0x503d7c:_0x249e7a[_0x29c527[_0x170a6b(-0x1f0,-0x19a,-0x157,-0x1b1)+'e']()]=_0x5d58f3;}return _0x2976b3[_0xe9e8fb(0x9e,0xaa,0xfc,0x100)](_0x50acca=>{function _0x182002(_0x448912,_0x564342,_0x4da68a,_0x5f54e7){return _0xe9e8fb(_0x448912-0xb2,_0x4da68a-0x2eb,_0x4da68a-0x175,_0x448912);}function _0x1a0174(_0x4c2b98,_0x11e70f,_0x5dfcc1,_0x2f3dce){return _0xe9e8fb(_0x4c2b98-0x3,_0x4c2b98- -0xab,_0x5dfcc1-0xc5,_0x2f3dce);}if(_0x6a6ee6[_0x1a0174(0x86,0xd3,0x2d,0x71)]!==_0x6a6ee6[_0x182002(0x41d,0x473,0x41c,0x3f8)]){_0x3a2154['error'](_0x1a0174(0x1a,0x62,-0x13,0x61)+_0x1a0174(0x36,0x7,-0x5,0x66)+':',_0x1f3c1a);throw _0x4d9a6a;}else{const {original:_0x5d0f53,cleaned:_0x58c940,skip:_0x3b00dd}=_0x50acca;if(_0x3b00dd){const _0x4b455c={};return _0x4b455c[_0x182002(0x430,0x38c,0x3db,0x387)]=_0x5d0f53,_0x4b455c['translatio'+'n']='',_0x4b455c[_0x1a0174(0x4a,0x62,0x41,0x69)]=_0x58c940,_0x4b455c[_0x1a0174(0x78,0x3e,0x64,0x57)]=!![],_0x4b455c;}const _0x4646a0=_0x249e7a[_0x58c940[_0x1a0174(0x38,0x52,0x32,0x3)+'e']()]||'',_0x3da619={};return _0x3da619[_0x182002(0x38d,0x423,0x3db,0x434)]=_0x5d0f53,_0x3da619['translatio'+'n']=_0x4646a0,_0x3da619[_0x1a0174(0x4a,0x5f,-0xf,0x3c)]=_0x58c940,_0x3da619[_0x182002(0x436,0x3f2,0x40e,0x3fd)]=![],_0x3da619;}});}export function formatTranslationDisplay(_0x5923a0,_0x9cfa80={}){const _0x288232={};function _0x2cfd2b(_0x12abc8,_0x44b54c,_0x146206,_0x50dfa6){return _0x4f3c(_0x50dfa6- -0x363,_0x44b54c);}function _0x1e0d1e(_0x5b3a8f,_0x4f0d37,_0x42c2e6,_0x1c201f){return _0x4f3c(_0x4f0d37- -0x315,_0x1c201f);}_0x288232[_0x2cfd2b(-0x1d5,-0x1d1,-0x1ec,-0x217)]=function(_0x18b4b9,_0x1aa505){return _0x18b4b9===_0x1aa505;},_0x288232[_0x1e0d1e(-0x1fe,-0x1c7,-0x1b1,-0x1ab)]='jtSUC',_0x288232[_0x1e0d1e(-0x1d3,-0x1a9,-0x15e,-0x195)]=_0x1e0d1e(-0x25c,-0x214,-0x1c4,-0x25a),_0x288232[_0x1e0d1e(-0x247,-0x21a,-0x220,-0x1fb)]='kQFzx';const _0x417c02=_0x288232,{separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0x9cfa80;if(!_0x5923a0||!Array[_0x2cfd2b(-0x25a,-0x288,-0x221,-0x230)](_0x5923a0))return'';return _0x5923a0[_0x2cfd2b(-0x2ac,-0x24a,-0x253,-0x28c)](_0x1b7b06=>{const _0x39fdaa={'ybkHU':_0x4dca59(-0x210,-0x1bf,-0x1db,-0x21b),'tJUrE':function(_0x19550a,_0x476d6e){return _0x19550a(_0x476d6e);}};function _0x4dca59(_0x8c6ba6,_0x5c6b7d,_0x4f2b02,_0x26477c){return _0x1e0d1e(_0x8c6ba6-0x1be,_0x5c6b7d-0x54,_0x4f2b02-0x1d7,_0x4f2b02);}function _0x5db1fd(_0x24a09c,_0x314dcd,_0x5b8468,_0x5f3d93){return _0x1e0d1e(_0x24a09c-0x18a,_0x5b8468- -0x87,_0x5b8468-0x1e,_0x24a09c);}if(_0x417c02[_0x5db1fd(-0x282,-0x22f,-0x250,-0x297)](_0x4dca59(-0x11d,-0x16e,-0x125,-0x18c),_0x417c02[_0x5db1fd(-0x295,-0x262,-0x24e,-0x215)])){if(_0x1b7b06[_0x5db1fd(-0x245,-0x231,-0x24c,-0x287)]){if(_0x417c02['sGZPo']!==_0x417c02['TCCLX'])return showOriginal?_0x1b7b06['original']:'';else{if(_0x5bc233[_0x5db1fd(-0x288,-0x2d9,-0x2b3,-0x269)]&&_0x4b9d33[_0x5db1fd(-0x274,-0x27e,-0x2b3,-0x2a3)][_0x4dca59(-0x1b9,-0x1ce,-0x1f7,-0x1c9)]===_0x39fdaa['ybkHU']){const _0x3e73a7=new _0x15491f(_0x1da110[_0x4dca59(-0x1dd,-0x1d8,-0x1b8,-0x1ec)][_0x4dca59(-0x1e1,-0x1af,-0x1c7,-0x159)]);_0x3e73a7['name']=_0x39fdaa[_0x5db1fd(-0x2fc,-0x2e0,-0x2cb,-0x293)],_0x39fdaa[_0x4dca59(-0x13e,-0x17e,-0x1a6,-0x124)](_0x479944,_0x3e73a7);}else _0x11e9c6(new _0x31b75e(_0x395d75[_0x4dca59(-0x14d,-0x19d,-0x195,-0x1ec)]));}}const _0x47422f=[];if(showOriginal)_0x47422f[_0x4dca59(-0x1b5,-0x1b4,-0x177,-0x1f6)](_0x1b7b06['original']);return showTranslation&&_0x1b7b06[_0x5db1fd(-0x2d0,-0x2e5,-0x2ce,-0x2de)+'n']&&_0x47422f['push']('('+_0x1b7b06[_0x5db1fd(-0x306,-0x295,-0x2ce,-0x2bc)+'n']+')'),_0x47422f[_0x4dca59(-0x126,-0x181,-0x16d,-0x19d)]('\x20');}else{_0x57de47(_0x5db1fd(-0x258,-0x21d,-0x235,-0x27e)+_0x4adf3f[_0x5db1fd(-0x23f,-0x24d,-0x28a,-0x271)]),_0x1fe87c[_0x4dca59(-0x20b,-0x1d8,-0x216,-0x18c)](_0x4dca59(-0x143,-0x188,-0x1ba,-0x1ab),_0x5da060);throw _0x1ff296;}})[_0x2cfd2b(-0x25c,-0x29b,-0x2da,-0x298)](Boolean)['join'](separator);}export async function translatePromptTags(_0x2dfabd){const _0xd4197f={'nbYBV':function(_0x11417d,_0x50411d){return _0x11417d(_0x50411d);},'hInHd':function(_0x5e4381,_0x4b4fae){return _0x5e4381(_0x4b4fae);},'gllFy':function(_0x4b3034,_0x10444d,_0x1f063e){return _0x4b3034(_0x10444d,_0x1f063e);},'yUaRc':_0x268c70(-0x22d,-0x24a,-0x21e,-0x209)+'\x20翻译提示词标签失败'+':'};function _0x42548e(_0x246576,_0xff1040,_0x4ba4fb,_0x457bc2){return _0x4f3c(_0x246576- -0x3c9,_0x457bc2);}function _0x268c70(_0x4ae01b,_0x53153c,_0xbc60ad,_0x3591e7){return _0x4f3c(_0x53153c- -0x33c,_0xbc60ad);}const {originalTags:_0x4242f9,cleanedText:_0x1711db}=_0xd4197f[_0x268c70(-0x1f5,-0x247,-0x1eb,-0x1fb)](preprocessPromptForTranslation,_0x2dfabd);if(!_0x1711db){const _0x290ba8={};return _0x290ba8[_0x42548e(-0x27e,-0x256,-0x2a4,-0x28e)]=[],_0x290ba8['displayTex'+'t']='',_0x290ba8[_0x268c70(-0x23d,-0x221,-0x245,-0x220)+'gs']=[],_0x290ba8;}try{const _0x5685e8=await _0xd4197f[_0x268c70(-0x1f9,-0x248,-0x291,-0x236)](callTranslation,_0x1711db),_0x2cc481=parseTranslationResult(_0x5685e8),_0x3b185e=_0xd4197f[_0x42548e(-0x263,-0x295,-0x217,-0x22c)](combineTranslationResult,_0x4242f9,_0x2cc481),_0x2d1c53=_0xd4197f[_0x268c70(-0x28a,-0x248,-0x211,-0x216)](formatTranslationDisplay,_0x3b185e),_0x15fe44={};return _0x15fe44[_0x268c70(-0x216,-0x1f1,-0x234,-0x1d3)]=_0x3b185e,_0x15fe44[_0x268c70(-0x1da,-0x215,-0x1f1,-0x1c7)+'t']=_0x2d1c53,_0x15fe44[_0x268c70(-0x1d0,-0x221,-0x1ec,-0x1de)+'gs']=_0x4242f9,_0x15fe44;}catch(_0x152444){console[_0x268c70(-0x221,-0x253,-0x25b,-0x22f)](_0xd4197f[_0x268c70(-0x243,-0x26f,-0x259,-0x248)],_0x152444);throw _0x152444;}}export function parseTranslationResult(_0x1350d9){function _0x361871(_0x1ffd91,_0x5d0099,_0x154eb3,_0x55e244){return _0x4f3c(_0x55e244- -0x3da,_0x1ffd91);}const _0x3945c6={'ESmgF':_0x361871(-0x2ce,-0x297,-0x2a3,-0x2e8)+'\x20AI\x20设置已统一到'+_0x2ec73d(-0x2c3,-0x22d,-0x241,-0x277),'qFBLb':function(_0x1b0531,_0x17bb60){return _0x1b0531===_0x17bb60;},'KJLPZ':_0x361871(-0x30f,-0x2d1,-0x351,-0x2fa),'SDLEI':_0x2ec73d(-0x1c2,-0x1ba,-0x1d8,-0x1ef),'QNNGu':'object','lBKCr':function(_0xeb7599,_0x34ab6d){return _0xeb7599!==_0x34ab6d;},'ATgSk':_0x361871(-0x268,-0x2a4,-0x25b,-0x2af),'LafNU':_0x2ec73d(-0x235,-0x1f2,-0x1d3,-0x1da),'LjdVb':function(_0x14ff16,_0x3fd3ab){return _0x14ff16(_0x3fd3ab);},'gwnlw':function(_0x3ff2eb,_0x21818f){return _0x3ff2eb===_0x21818f;},'PPqtl':_0x361871(-0x2d5,-0x2b9,-0x322,-0x2ec),'dzZfk':function(_0x4c3f8a,_0x585f35){return _0x4c3f8a>_0x585f35;},'IKubI':function(_0x592b27,_0x3cd50e){return _0x592b27+_0x3cd50e;}};if(!_0x1350d9)return{};try{const _0x4155f3=_0x1350d9[_0x2ec73d(-0x1d4,-0x214,-0x21e,-0x21d)](/\{[\s\S]*\}/);if(_0x4155f3){if(_0x3945c6[_0x361871(-0x2e9,-0x2b3,-0x2d9,-0x2de)](_0x3945c6[_0x361871(-0x2a1,-0x2e2,-0x2b5,-0x2e9)],_0x3945c6[_0x2ec73d(-0x267,-0x24a,-0x1eb,-0x221)])){if(_0x5e0446['skipped'])return _0x45b99a?_0x4dc01e[_0x2ec73d(-0x20b,-0x1d7,-0x1c0,-0x21a)]:'';const _0x1732d1=[];if(_0x2a35a8)_0x1732d1['push'](_0x38d057['original']);return _0x8c9e60&&_0x2eb523[_0x361871(-0x339,-0x2e5,-0x315,-0x30c)+'n']&&_0x1732d1[_0x361871(-0x312,-0x2da,-0x2be,-0x2cd)]('('+_0xbce0bf[_0x361871(-0x350,-0x367,-0x33f,-0x30c)+'n']+')'),_0x1732d1['join']('\x20');}else{const _0x45020c=JSON[_0x2ec73d(-0x2bc,-0x2b8,-0x219,-0x25f)](_0x4155f3[-0xa75+0x1343*0x1+-0x8ce*0x1]);if(typeof _0x45020c===_0x3945c6[_0x361871(-0x322,-0x30f,-0x319,-0x2f2)]&&_0x3945c6['lBKCr'](_0x45020c,null))return _0x45020c;}}}catch(_0x28e480){_0x3945c6['qFBLb'](_0x3945c6[_0x361871(-0x28b,-0x23f,-0x250,-0x272)],_0x3945c6[_0x2ec73d(-0x28e,-0x26d,-0x28c,-0x25c)])?!_0x30e0ba&&(_0xb1f239[_0x2ec73d(-0x1ec,-0x1f0,-0x21b,-0x200)](_0x3945c6[_0x2ec73d(-0x231,-0x1a8,-0x1f4,-0x1dd)]),_0x543d02=!![]):console[_0x361871(-0x2af,-0x30f,-0x309,-0x2b4)]('st-chatu8:'+_0x361871(-0x2cd,-0x2f6,-0x2fa,-0x2fd)+_0x361871(-0x315,-0x2b5,-0x328,-0x2da),_0x28e480[_0x2ec73d(-0x1d2,-0x244,-0x259,-0x225)]);}const _0x38ab22=_0x3945c6[_0x2ec73d(-0x287,-0x292,-0x287,-0x274)](String,_0x1350d9)[_0x361871(-0x2ef,-0x37d,-0x366,-0x320)](/[\r\n]+/g,'\x20')['replace'](/^[\s"'`]+|[\s"'`]+$/g,'')['trim'](),_0x486a77=_0x38ab22[_0x361871(-0x29d,-0x28e,-0x2d7,-0x2ad)](/[,，]/)[_0x2ec73d(-0x29c,-0x23f,-0x20d,-0x260)](_0xf6e1bf=>_0xf6e1bf[_0x361871(-0x366,-0x326,-0x342,-0x31c)]())[_0x361871(-0x300,-0x2ed,-0x333,-0x30f)](Boolean);function _0x2ec73d(_0x496665,_0x3e0be3,_0xb0cb0b,_0x3e041d){return _0x4f3c(_0x3e041d- -0x337,_0xb0cb0b);}const _0x1cf5ec={};for(const _0x4bf4a2 of _0x486a77){if(_0x3945c6[_0x2ec73d(-0x2ac,-0x242,-0x22d,-0x268)](_0x3945c6[_0x361871(-0x361,-0x322,-0x324,-0x318)],_0x3945c6[_0x2ec73d(-0x2c4,-0x286,-0x294,-0x275)])){const _0xb906b1=_0x4bf4a2['indexOf']('\x5c');if(_0x3945c6['dzZfk'](_0xb906b1,-0x64d+-0xf8b*-0x1+-0x7*0x152)){const _0x11cf07=_0x4bf4a2['slice'](0x1*0x114b+-0x8b7+-0x894,_0xb906b1)['trim'](),_0x1c4539=_0x4bf4a2[_0x2ec73d(-0x191,-0x1d9,-0x227,-0x1df)](_0x3945c6[_0x2ec73d(-0x2a5,-0x249,-0x205,-0x261)](_0xb906b1,0x1568*0x1+-0x25dd+-0x7*-0x25a))['trim']();if(_0x11cf07)_0x1cf5ec[_0x11cf07]=_0x1c4539;}}else _0x1c4ede[_0x361871(-0x248,-0x2bb,-0x2f6,-0x2a3)](_0x3945c6[_0x361871(-0x267,-0x26f,-0x2c1,-0x280)]),_0x580394=!![];}return _0x1cf5ec;}function generateRequestId(){const _0x56d1e9={};_0x56d1e9['HewIa']=function(_0x27cb2f,_0x58001f){return _0x27cb2f===_0x58001f;},_0x56d1e9['QyFKd']='kjgDg';function _0x5b4c13(_0x49d5a1,_0x4f8e2d,_0x50e1eb,_0x2a5105){return _0x4f3c(_0x50e1eb-0x2b8,_0x2a5105);}const _0x174ceb=_0x56d1e9;function _0x22ffdd(_0x32ff9e,_0x380df6,_0x399f71,_0x5e7838){return _0x4f3c(_0x380df6-0x335,_0x399f71);}if(crypto&&crypto[_0x5b4c13(0x42f,0x3dd,0x3d4,0x415)]){if(_0x174ceb[_0x5b4c13(0x3d0,0x3e7,0x3be,0x3b9)](_0x174ceb[_0x5b4c13(0x3de,0x45b,0x41a,0x445)],_0x174ceb[_0x22ffdd(0x485,0x497,0x4ad,0x44e)]))return crypto[_0x22ffdd(0x4a1,0x451,0x400,0x47a)]();else _0x286093+=_0x424d89;}return Date[_0x5b4c13(0x3fa,0x387,0x3c1,0x3a1)]()[_0x22ffdd(0x474,0x41c,0x40d,0x450)](-0x1f19+-0x1*-0x26ef+-0x7b2)+Math['random']()[_0x22ffdd(0x3ef,0x41c,0x462,0x3fc)](0x16*0xa9+0xbad*0x1+-0x1a0f)[_0x22ffdd(0x428,0x424,0x3d2,0x40a)](0x1733+0xb1+-0x17e2);}export function LLM_TRANSLATION_GET_PROMPT(){const _0x5d2e71={'EypSI':'BpUSi','RJhXT':function(_0x5eeab0,_0x358aef){return _0x5eeab0!==_0x358aef;},'zleWW':function(_0x31f03f,_0x38d15d){return _0x31f03f(_0x38d15d);},'yFxlI':_0x45f965(-0x1b1,-0x1cf,-0x1c1,-0x1ed),'KAtem':function(_0x428f31,_0x480e7e){return _0x428f31>_0x480e7e;},'dujlB':function(_0x124575,_0x3f5fdc){return _0x124575+_0x3f5fdc;},'PZqGP':function(_0x47df1b){return _0x47df1b();}};function _0x45f965(_0x584053,_0x5abff6,_0x162749,_0x1f0e8b){return _0x4f3c(_0x162749- -0x27e,_0x1f0e8b);}return new Promise((_0x20dbc0,_0x3413e4)=>{const _0x284b50={'rTqCv':function(_0x54f454,_0x2a6135){return _0x5d2e71['KAtem'](_0x54f454,_0x2a6135);},'SgYTI':function(_0x2df7b7,_0x4e0423){function _0x5bf74f(_0x3ac911,_0x38985e,_0x1cb498,_0x4ed894){return _0x4f3c(_0x3ac911- -0x235,_0x38985e);}return _0x5d2e71[_0x5bf74f(-0x145,-0x182,-0x11c,-0x12d)](_0x2df7b7,_0x4e0423);}},_0x27f528=_0x5d2e71['PZqGP'](generateRequestId);console[_0x42919b(-0x55,-0x5b,-0x4a,-0x25)]('st-chatu8:'+_0x42919b(-0x5e,-0xe,-0x31,-0x43)+_0x422603(-0x225,-0x246,-0x28c,-0x26f)+_0x27f528+')');const _0x14fd5a=_0x14bb18=>{function _0x394c89(_0x5cbdf0,_0x5f43c9,_0x5dd93a,_0x6082ee){return _0x422603(_0x5dd93a,_0x6082ee-0x3ad,_0x5dd93a-0x1b7,_0x6082ee-0x13d);}function _0x3d0027(_0x460a57,_0x21166e,_0x432ad7,_0x13c673){return _0x42919b(_0x21166e,_0x21166e-0x61,_0x432ad7-0x18d,_0x13c673-0x6c);}if(_0x5d2e71[_0x3d0027(0x7,0x7a,0xad,0x62)]===_0x5d2e71['EypSI']){if(_0x5d2e71[_0x394c89(0x1a9,0x17f,0x16c,0x1c5)](_0x14bb18['id'],_0x27f528))return;eventSource[_0x3d0027(-0x8,0xa1,0x83,0x52)+_0x3d0027(-0x4d,-0x5,-0x33,0xe)](eventNames[_0x394c89(0x163,0x1e4,0x1f5,0x1a8)+'ATION_GET_'+'PROMPT_RES'+_0x3d0027(-0x5b,-0x63,-0x2,-0x3b)],_0x14fd5a);const {prompt:_0x44435d}=_0x14bb18;console[_0x394c89(0x218,0x193,0x1df,0x1bf)](_0x3d0027(0x10,-0x49,0x21,0x2)+'\x20已获取翻译提示词\x20'+_0x3d0027(0x4c,-0xf,0x19,0x3c)+_0x27f528+'):',_0x44435d),_0x20dbc0(_0x44435d);}else{const _0x1e67a6=_0x535f26[_0x394c89(0xe3,0x147,0x135,0x13e)]('\x5c');if(_0x284b50['rTqCv'](_0x1e67a6,-0x1825+-0xab0+0x22d5)){const _0x8c7418=_0x2a6ce0['slice'](0x6a8+0x25f3+-0x259*0x13,_0x1e67a6)[_0x3d0027(-0x63,-0x34,0x2,-0x32)](),_0x4307be=_0x394099[_0x394c89(0x21d,0x1ff,0x211,0x1e0)](_0x284b50[_0x394c89(0x1cd,0x17d,0x160,0x18f)](_0x1e67a6,-0x9e6+0x1913+-0xf2c))['trim']();if(_0x8c7418)_0x26a689[_0x8c7418]=_0x4307be;}}};eventSource['on'](eventNames[_0x422603(-0x229,-0x205,-0x222,-0x255)+_0x42919b(-0x6c,-0x12,-0x1,-0x3b)+'PROMPT_RES'+_0x422603(-0x25a,-0x270,-0x256,-0x26d)],_0x14fd5a);const _0x2ba639={};function _0x422603(_0x2fcf23,_0x20b00b,_0x9581b,_0x370e0b){return _0x45f965(_0x2fcf23-0x43,_0x20b00b-0xa8,_0x20b00b- -0xa7,_0x2fcf23);}function _0x42919b(_0x368894,_0x4baf77,_0x5de51,_0xa282a9){return _0x45f965(_0x368894-0x1a0,_0x4baf77-0x10a,_0xa282a9-0x122,_0x368894);}_0x2ba639['id']=_0x27f528,eventSource['emit'](eventNames[_0x422603(-0x1de,-0x205,-0x23b,-0x1f4)+'ATION_GET_'+_0x42919b(-0x80,-0xdf,-0x5d,-0xa5)+'UEST'],_0x2ba639),setTimeout(()=>{eventSource['removeList'+'ener'](eventNames[_0x2912fd(0x14b,0xf1,0x14e,0x172)+_0x1e6ea0(0x476,0x4d2,0x49b,0x4d7)+'PROMPT_RES'+_0x1e6ea0(0x424,0x415,0x42f,0x46c)],_0x14fd5a);function _0x1e6ea0(_0x306789,_0x2dd0de,_0x1ea9f4,_0x2cca0f){return _0x42919b(_0x2cca0f,_0x2dd0de-0x50,_0x1ea9f4-0x153,_0x1ea9f4-0x4d6);}function _0x2912fd(_0x2f083a,_0x258993,_0x4d00b5,_0x2cef3f){return _0x42919b(_0x2f083a,_0x258993-0x187,_0x4d00b5-0x1ae,_0x4d00b5-0x18a);}_0x5d2e71[_0x2912fd(0xf0,0xef,0x10c,0x101)](_0x3413e4,new Error(_0x5d2e71[_0x2912fd(0x1ed,0x14b,0x19b,0x145)]));},-0x2287+0x1*-0x28e7+0x727e);});}export function LLM_TRANSLATION(_0x212f2b,{timeoutMs:timeoutMs=-0x1715a+0xb728+-0x1a492*-0x1}={}){function _0x3e96aa(_0x46706e,_0x269635,_0x3d79f9,_0x4d5879){return _0x4f3c(_0x4d5879-0xe3,_0x3d79f9);}function _0x10777e(_0xce23d2,_0x2eb937,_0x1b6b1b,_0x47ca06){return _0x4f3c(_0x2eb937- -0x9,_0x47ca06);}const _0x4474d6={'aXlfj':_0x10777e(0xca,0xe9,0xea,0xe6)+'\x20JSON解析失败，'+_0x10777e(0x154,0xf7,0xc1,0xb3),'MkotJ':_0x10777e(0x151,0xf9,0x147,0x154),'jFfcq':function(_0x24fd11,_0x5b10c6){return _0x24fd11(_0x5b10c6);},'nxlMM':function(_0x3056c3){return _0x3056c3();},'dIBhR':function(_0x117b84,_0x2fde09){return _0x117b84===_0x2fde09;},'uYjpp':'WtRVR','KjIAB':_0x3e96aa(0x262,0x21f,0x1c0,0x20d),'yAYUD':_0x10777e(0xa1,0xfa,0xf4,0x121),'CfAKM':function(_0x58c8bb,_0x137e38){return _0x58c8bb===_0x137e38;},'jynOt':'wvBRJ','IDEdJ':'CFZxM','WsNsn':function(_0xa8a4e0){return _0xa8a4e0();},'pkBnV':function(_0x27d47f,_0x45aa66,_0x249f7a){return _0x27d47f(_0x45aa66,_0x249f7a);}};return new Promise((_0x286aa7,_0x185788)=>{const _0x33e4eb={'noAch':function(_0x3cfea6,_0x138e83){function _0x32832c(_0x14a591,_0x19c983,_0x4f056c,_0xa8e902){return _0x4f3c(_0x4f056c-0x3a6,_0x14a591);}return _0x4474d6[_0x32832c(0x4d1,0x4c2,0x4e1,0x4a6)](_0x3cfea6,_0x138e83);},'QcipD':function(_0x52d6ff){function _0x57d683(_0x3ab791,_0x5d42b8,_0x4eee48,_0x8fbe50){return _0x4f3c(_0x4eee48- -0x2ee,_0x3ab791);}return _0x4474d6[_0x57d683(-0x18b,-0x221,-0x1cb,-0x1b4)](_0x52d6ff);}},_0x20946b=_0x4474d6[_0xf490ff(0x473,0x47e,0x49c,0x443)](generateRequestId);console[_0xf490ff(0x410,0x436,0x412,0x457)]('st-chatu8:'+_0x33e715(-0x2bc,-0x26e,-0x240,-0x221)+'(ID:\x20'+_0x20946b+')');let _0xfed96b=null;const _0xf787d6=()=>{function _0x38ff9c(_0x33f49d,_0x427e0e,_0x2f4e0e,_0x52de67){return _0xf490ff(_0x33f49d-0x1c9,_0x427e0e-0x1c3,_0x33f49d,_0x52de67- -0x39f);}eventSource[_0x38ff9c(0xe6,0x10e,0x7a,0xc3)+_0x38ff9c(0xcd,0x87,0xb4,0x7f)](eventNames['LLM_TRANSL'+_0x38ff9c(0xcc,0x117,0x8d,0xe5)+'ONSE'],_0xd68b22);function _0x3811f8(_0x3af1c1,_0x2348fa,_0x2d6e48,_0x4d3f75){return _0x33e715(_0x3af1c1-0x1ac,_0x2348fa- -0x4c,_0x4d3f75,_0x4d3f75-0x150);}if(_0xfed96b)_0x33e4eb['noAch'](clearTimeout,_0xfed96b);};function _0xf490ff(_0x14d3c5,_0x2a4d78,_0x2afa39,_0x12f1d6){return _0x3e96aa(_0x14d3c5-0x10c,_0x2a4d78-0x83,_0x2afa39,_0x12f1d6-0x23d);}const _0xd68b22=_0x38b049=>{const _0x481386={'Eovgy':_0x4474d6[_0x253b04(-0x1b6,-0x192,-0x1d4,-0x168)],'hfrEk':_0x4474d6[_0x253b04(-0x20f,-0x1dc,-0x1ba,-0x1b4)],'cxfpp':function(_0x245523,_0x3d60a3){function _0x18b086(_0x3e048c,_0x4d6a69,_0x129cf4,_0x5cffff){return _0x272097(_0x3e048c-0x30,_0x4d6a69-0x191,_0x129cf4,_0x4d6a69- -0x25c);}return _0x4474d6[_0x18b086(-0x1b1,-0x1a6,-0x14e,-0x154)](_0x245523,_0x3d60a3);}};if(_0x38b049['id']!==_0x20946b)return;function _0x253b04(_0x2fa30d,_0x5393fe,_0x5ec2b0,_0x4ba8b0){return _0x33e715(_0x2fa30d-0x82,_0x2fa30d-0x9a,_0x5ec2b0,_0x4ba8b0-0xa1);}_0x4474d6['nxlMM'](_0xf787d6),console[_0x253b04(-0x1c5,-0x16a,-0x1e2,-0x219)](_0x253b04(-0x20a,-0x1e5,-0x258,-0x229)+'\x20已收到翻译\x20LLM'+_0x253b04(-0x1d7,-0x205,-0x187,-0x1ef)+'\x20'+_0x20946b+'):',_0x38b049);function _0x272097(_0x60e1f7,_0x444c5b,_0x4ccf4e,_0x592d72){return _0xf490ff(_0x60e1f7-0xd4,_0x444c5b-0x96,_0x4ccf4e,_0x592d72- -0x3a5);}if(_0x38b049['success']){if(_0x4474d6['dIBhR'](_0x272097(0xbb,0x84,0x2f,0x67),_0x4474d6[_0x253b04(-0x1dd,-0x231,-0x215,-0x1ae)])){if(_0x2419a5&&_0x5e7624['randomUUID'])return _0x297202[_0x253b04(-0x1e0,-0x19a,-0x1c4,-0x229)]();return _0x3b1b4e[_0x272097(0x94,0xc7,0x9b,0x84)]()[_0x253b04(-0x215,-0x1e1,-0x238,-0x1fb)](0x3*0x91b+-0x1301+-0x82c*0x1)+_0x46b705['random']()[_0x272097(0x9f,0xb2,0x39,0x62)](0x341*0x4+-0x1*-0x8cb+0x15ab*-0x1)[_0x272097(0x9c,0x2b,0x61,0x6a)](-0x8*-0x53+0x22c0+-0x2556);}else _0x4474d6['jFfcq'](_0x286aa7,_0x38b049[_0x253b04(-0x1d8,-0x1a9,-0x19a,-0x180)]);}else{if(_0x4474d6[_0x272097(-0x3,0x3f,0x4d,0x42)](_0x4474d6['KjIAB'],_0x272097(0x8c,0xab,0x80,0xa5))){if(_0x38b049[_0x272097(0x9a,0x3d,0x87,0x64)]&&_0x38b049['error'][_0x272097(0xc5,0xbb,0xa0,0x6e)]===_0x4474d6[_0x272097(0x49,0x2e,0x5b,0x68)]){if(_0x4474d6[_0x272097(0x14,0x21,0xa,0x42)](_0x4474d6[_0x253b04(-0x232,-0x233,-0x237,-0x260)],_0x272097(0x5c,0x81,0x2d,0x7e))){const _0xc8ca05=new Error(_0x38b049[_0x253b04(-0x213,-0x1d5,-0x1e5,-0x25b)][_0x253b04(-0x1ea,-0x214,-0x1aa,-0x226)]);_0xc8ca05[_0x272097(0x25,0x4b,0x90,0x6e)]=_0x4474d6['MkotJ'],_0x185788(_0xc8ca05);}else _0x4cad7e['warn'](_0x481386['Eovgy'],_0x5e077b[_0x253b04(-0x1ea,-0x242,-0x1b1,-0x23a)]);}else{if(_0x4474d6['CfAKM'](_0x4474d6['jynOt'],_0x4474d6[_0x253b04(-0x1c6,-0x1c7,-0x1dc,-0x196)])){const _0x597e11=new _0x3167a8(_0x2f2720[_0x253b04(-0x213,-0x229,-0x23c,-0x26a)][_0x272097(0xd0,0xdf,0x57,0x8d)]);_0x597e11[_0x272097(0x32,0x1f,0x4f,0x6e)]=_0x481386['hfrEk'],_0x481386['cxfpp'](_0xf6349a,_0x597e11);}else _0x4474d6[_0x253b04(-0x1c1,-0x17a,-0x16f,-0x1a3)](_0x185788,new Error(_0x38b049[_0x253b04(-0x1d8,-0x1f2,-0x20d,-0x1d0)]));}}else return _0x13f634?_0x55d16f['original']:'';}};eventSource['on'](eventNames[_0x33e715(-0x270,-0x276,-0x27c,-0x291)+_0x33e715(-0x212,-0x232,-0x207,-0x23d)+_0x33e715(-0x25a,-0x283,-0x26b,-0x28c)],_0xd68b22);const _0x1ca5bc={};_0x1ca5bc[_0x33e715(-0x1fb,-0x22d,-0x245,-0x27f)]=_0x212f2b,_0x1ca5bc['id']=_0x20946b,eventSource[_0xf490ff(0x3d2,0x3ab,0x3f1,0x3ec)](eventNames['LLM_TRANSL'+_0x33e715(-0x2cd,-0x2d1,-0x2dd,-0x279)+_0x33e715(-0x240,-0x258,-0x27a,-0x212)],_0x1ca5bc);function _0x33e715(_0x378308,_0x2d198e,_0x35a522,_0x5450d4){return _0x3e96aa(_0x378308-0xe,_0x2d198e-0x1a8,_0x35a522,_0x2d198e- -0x479);}_0xfed96b=_0x4474d6[_0x33e715(-0x2b6,-0x2b4,-0x2af,-0x29b)](setTimeout,()=>{_0x33e4eb[_0xdd336d(0x28e,0x281,0x277,0x290)](_0xf787d6);function _0x11bf87(_0x43a6b1,_0x28cd62,_0x2110e0,_0x494d3b){return _0xf490ff(_0x43a6b1-0x178,_0x28cd62-0x13,_0x2110e0,_0x494d3b- -0x6e3);}function _0xdd336d(_0x1fbb99,_0x45f48c,_0x2995f6,_0x45207d){return _0x33e715(_0x1fbb99-0x158,_0x45f48c-0x53b,_0x2995f6,_0x45207d-0x8e);}_0x185788(new Error(_0xdd336d(0x2e5,0x305,0x2ef,0x357)+'时（'+timeoutMs+'ms）'));},timeoutMs);});}export async function callTranslation(_0x594397){const _0x4dc68d={'vrzvo':function(_0x3691fa,_0x433760){return _0x3691fa(_0x433760);},'FvCZu':function(_0x16ba85,_0x2b0aad){return _0x16ba85===_0x2b0aad;},'QImTi':_0x1d1d9e(-0x248,-0x2bd,-0x293,-0x2ad),'nLClQ':'yYsan','cFoCl':function(_0x2bbbe7,_0x3dd9d8,_0x349e78){return _0x2bbbe7(_0x3dd9d8,_0x349e78);},'qdesg':_0x3a54c7(0x345,0x374,0x381,0x3c9)+'n','UCkkZ':function(_0x70e516,_0x3fea6b){return _0x70e516||_0x3fea6b;},'JuzXt':_0x3a54c7(0x351,0x390,0x37f,0x3d2),'ZOsWO':function(_0x58ba44,_0xc20c96){return _0x58ba44||_0xc20c96;},'qsGCH':function(_0x23f48d,_0x49b818){return _0x23f48d(_0x49b818);},'fnkmV':function(_0x49fb1d,_0x20e5b3){return _0x49fb1d(_0x20e5b3);}};function _0x1d1d9e(_0x30063f,_0x51f0f3,_0x5e9ca3,_0x5e5083){return _0x4f3c(_0x5e9ca3- -0x398,_0x51f0f3);}function _0x3a54c7(_0x1644af,_0x4b0626,_0x5d6616,_0x225084){return _0x4f3c(_0x4b0626-0x2a6,_0x5d6616);}try{if(_0x4dc68d[_0x1d1d9e(-0x269,-0x2e5,-0x29b,-0x2a2)](_0x4dc68d[_0x1d1d9e(-0x22e,-0x2a3,-0x269,-0x23c)],_0x4dc68d['nLClQ']))_0x4dc68d[_0x3a54c7(0x388,0x3ae,0x358,0x363)](_0x5ab487,_0x15183a['result']);else{let _0x381618=_0x4dc68d['cFoCl'](buildPromptForRequestType,_0x4dc68d['qdesg'],_0x4dc68d[_0x3a54c7(0x437,0x3e5,0x3cc,0x3fd)](_0x594397,''));_0x381618=_0x4dc68d[_0x3a54c7(0x3f2,0x3ae,0x3bb,0x402)](mergeAdjacentMessages,_0x381618);const _0xb517ed=[..._0x381618,{'role':_0x4dc68d['JuzXt'],'content':_0x4dc68d['ZOsWO'](_0x594397,'')}];_0x4dc68d[_0x1d1d9e(-0x28e,-0x2ad,-0x2d4,-0x2fc)](updateCombinedPrompt,_0xb517ed);const _0x183c9d=await LLM_TRANSLATION(_0xb517ed);return _0x183c9d;}}catch(_0x4e1e6a){_0x4dc68d[_0x3a54c7(0x449,0x3f3,0x42f,0x3f9)](addLog,_0x1d1d9e(-0x22f,-0x1e9,-0x231,-0x217)+_0x4e1e6a[_0x3a54c7(0x405,0x3b8,0x3ff,0x3cd)]),console['error'](_0x3a54c7(0x437,0x3df,0x3f3,0x3d4),_0x4e1e6a);throw _0x4e1e6a;}}let isAiInitialized=![];export function initAiSettings(_0x4e156a){function _0x5857fb(_0x27d189,_0xfb7fde,_0x172bcb,_0x5cb779){return _0x4f3c(_0x172bcb-0x2fc,_0x27d189);}const _0x4c4f6c={'SzcJE':function(_0x5c3d1c,_0x4b2c07){return _0x5c3d1c(_0x4b2c07);},'qUyUy':_0x40564a(0x3e7,0x43a,0x424,0x40c),'KFvHv':function(_0x147de5,_0x33aefb){return _0x147de5===_0x33aefb;},'AGpeN':_0x40564a(0x45f,0x4d8,0x4cd,0x489)};function _0x40564a(_0x4acc95,_0x4b1275,_0x4600de,_0x5b77bb){return _0x4f3c(_0x5b77bb-0x34f,_0x4acc95);}!isAiInitialized&&(_0x4c4f6c[_0x5857fb(0x47f,0x476,0x466,0x49a)](_0x4c4f6c['AGpeN'],_0x5857fb(0x459,0x43a,0x408,0x458))?(_0x58e7dc[_0x40564a(0x494,0x4b2,0x4ca,0x491)+_0x5857fb(0x3fe,0x40a,0x3fa,0x3fe)](_0x7b287d[_0x40564a(0x4a8,0x41e,0x4c3,0x46f)+_0x40564a(0x4a7,0x475,0x487,0x470)+_0x40564a(0x400,0x430,0x418,0x421)+_0x5857fb(0x3dc,0x355,0x3b1,0x37c)],_0x169461),_0x4c4f6c[_0x40564a(0x479,0x491,0x465,0x4ae)](_0x86e117,new _0xd659b8(_0x4c4f6c[_0x5857fb(0x443,0x453,0x458,0x434)]))):(console[_0x40564a(0x461,0x44d,0x43e,0x486)](_0x5857fb(0x41e,0x3be,0x3ee,0x3f0)+_0x40564a(0x416,0x422,0x40f,0x407)+'\x20LLM\x20设置页面'),isAiInitialized=!![]));}