(function(_0x5c15fd,_0x387db8){function _0x36398e(_0x293cea,_0x59221d,_0x9fa93b,_0x890f0f){return _0x35f9(_0x890f0f- -0x213,_0x293cea);}const _0x58d536=_0x5c15fd();function _0x2a3268(_0x2af4f5,_0x507005,_0x2ffd6b,_0x23a57e){return _0x35f9(_0x507005-0x13a,_0x2ffd6b);}while(!![]){try{const _0x4cbe82=parseInt(_0x36398e(0x162,0x14f,0x1bb,0x18d))/(-0x9e0+-0x2288+0x1*0x2c69)+parseInt(_0x36398e(0xb7,0x9e,0xe7,0x11a))/(0x1876+0x1206+-0x2a7a)*(parseInt(_0x2a3268(0x494,0x443,0x4aa,0x393))/(-0xefc+-0x1*0x1529+0x2428))+parseInt(_0x36398e(0x7a,0xc2,0xc0,0x85))/(-0x1*0x5f9+-0x2*-0xc2e+-0x125f)*(parseInt(_0x2a3268(0x54a,0x47b,0x3e1,0x4e0))/(0xe*0x2c3+0x7aa+0x943*-0x5))+parseInt(_0x2a3268(0x435,0x3ea,0x3ca,0x37d))/(0xa31+0x1*0x2225+0x1*-0x2c50)+-parseInt(_0x2a3268(0x430,0x46e,0x46e,0x447))/(0xd9*-0x15+0x1*0x25c5+-0x13f1)+parseInt(_0x36398e(0xc7,-0x92,0xae,-0x15))/(0x41*-0x4b+0x1bb*-0xa+0x8b*0x43)*(parseInt(_0x2a3268(0x48b,0x3b5,0x3d9,0x43e))/(-0x1c9*-0x4+-0xd52+0x2b*0x25))+-parseInt(_0x2a3268(0x51c,0x44d,0x4eb,0x534))/(-0x118a+-0x1722+0x28b6);if(_0x4cbe82===_0x387db8)break;else _0x58d536['push'](_0x58d536['shift']());}catch(_0x46a5e4){_0x58d536['push'](_0x58d536['shift']());}}}(_0x1ec9,-0x68*-0x2afb+0x2*0xab55+-0x7611c));function _0x35f9(_0x518e40,_0x13aa5d){_0x518e40=_0x518e40-(-0x1*0x2199+0xb83+0x17f3);const _0x304dac=_0x1ec9();let _0x4d57ea=_0x304dac[_0x518e40];if(_0x35f9['elKqKP']===undefined){var _0x599140=function(_0x10d5fa){const _0x5214ca='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4ac54f='',_0x2239f7='',_0x3ac30b=_0x4ac54f+_0x599140;for(let _0x15b616=-0x1*-0x527+-0x6e6*-0x5+-0x27a5,_0x1956f7,_0x1a10c9,_0x168f26=0x4eb*-0x1+0x198b+-0x160*0xf;_0x1a10c9=_0x10d5fa['charAt'](_0x168f26++);~_0x1a10c9&&(_0x1956f7=_0x15b616%(0xcca+-0x5ce+-0x37c*0x2)?_0x1956f7*(0x1506+-0x16f1+0x22b)+_0x1a10c9:_0x1a10c9,_0x15b616++%(-0xfe5+-0x2124+0x1*0x310d))?_0x4ac54f+=_0x3ac30b['charCodeAt'](_0x168f26+(0xa17+-0x17*-0x15b+-0x3*0xdbe))-(0x1b1f+0x9b5+-0x24ca)!==-0x125f*0x2+0x1b0+-0x1187*-0x2?String['fromCharCode'](-0x1a4f+-0x26a4+0x41f2&_0x1956f7>>(-(-0x2187+0x62f+0x1b5a)*_0x15b616&0x22b3+0x3*-0x38+-0x2205)):_0x15b616:-0x2bd+-0x3ad+0x66a){_0x1a10c9=_0x5214ca['indexOf'](_0x1a10c9);}for(let _0x3d5fef=0xf1*-0x1f+0x11c0+0xb6f,_0x229883=_0x4ac54f['length'];_0x3d5fef<_0x229883;_0x3d5fef++){_0x2239f7+='%'+('00'+_0x4ac54f['charCodeAt'](_0x3d5fef)['toString'](-0x516+-0x1b7f+0x89*0x3d))['slice'](-(-0x31*-0x3b+-0x89*-0x47+-0x3148));}return decodeURIComponent(_0x2239f7);};_0x35f9['lhJHIE']=_0x599140,_0x35f9['pPJNFJ']={},_0x35f9['elKqKP']=!![];}const _0x3b844c=_0x304dac[0x1*0x57e+0xb5f+0x1*-0x10dd],_0x236430=_0x518e40+_0x3b844c,_0x4557d8=_0x35f9['pPJNFJ'][_0x236430];if(!_0x4557d8){const _0x678f8d=function(_0xb3aa64){this['YRvvcc']=_0xb3aa64,this['ETVsSU']=[-0x15a1+0xb*-0x1af+-0x21d*-0x13,-0x2605+-0x10da+0x36df,-0xc6c+-0x1*0x170f+0x237b],this['FDptui']=function(){return'newState';},this['PFEqpS']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['sSsDjf']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x678f8d['prototype']['yXPPqq']=function(){const _0xd5fb82=new RegExp(this['PFEqpS']+this['sSsDjf']),_0x38f943=_0xd5fb82['test'](this['FDptui']['toString']())?--this['ETVsSU'][-0x14a4+-0x1c3b+-0x61c*-0x8]:--this['ETVsSU'][-0x1c59*0x1+-0x1*-0x205+0x1a54];return this['FugPlo'](_0x38f943);},_0x678f8d['prototype']['FugPlo']=function(_0x442eb5){if(!Boolean(~_0x442eb5))return _0x442eb5;return this['FIVRhG'](this['YRvvcc']);},_0x678f8d['prototype']['FIVRhG']=function(_0x2f2633){for(let _0x49535a=-0x2291+-0x4ca+0x275b,_0x472205=this['ETVsSU']['length'];_0x49535a<_0x472205;_0x49535a++){this['ETVsSU']['push'](Math['round'](Math['random']())),_0x472205=this['ETVsSU']['length'];}return _0x2f2633(this['ETVsSU'][0x236b*-0x1+-0x62b+0x2996]);},new _0x678f8d(_0x35f9)['yXPPqq'](),_0x4d57ea=_0x35f9['lhJHIE'](_0x4d57ea),_0x35f9['pPJNFJ'][_0x236430]=_0x4d57ea;}else _0x4d57ea=_0x4557d8;return _0x4d57ea;}const _0x1f074d=(function(){const _0x2c5c3f={};_0x2c5c3f['LkNGK']=function(_0x4af06e,_0x3e10ed){return _0x4af06e!==_0x3e10ed;};function _0x17c8d0(_0x438826,_0x511e61,_0x2f5300,_0x1aa14e){return _0x35f9(_0x1aa14e- -0x2ac,_0x511e61);}_0x2c5c3f['SIcfW']=_0x17c8d0(-0xac,-0x99,0x63,0x3c);const _0x12eee6=_0x2c5c3f;let _0x2f57b2=!![];return function(_0x38e6e1,_0x47165e){function _0x1d9f6b(_0x2e768f,_0x93c1fd,_0x119d77,_0x53c81c){return _0x17c8d0(_0x2e768f-0xd1,_0x93c1fd,_0x119d77-0x87,_0x2e768f-0x682);}function _0x48368e(_0x148a65,_0x1a508d,_0x319665,_0x499e7d){return _0x17c8d0(_0x148a65-0x99,_0x1a508d,_0x319665-0xdd,_0x319665-0x27d);}if(_0x12eee6[_0x1d9f6b(0x732,0x65c,0x76d,0x69a)](_0x48368e(0x308,0x1e9,0x2b9,0x20e),_0x12eee6[_0x48368e(0x282,0x208,0x1c2,0x208)]))_0x461194[_0x53c827]=_0x2afa5a[_0x39e242];else{const _0x3531e8=_0x2f57b2?function(){if(_0x47165e){const _0x5f2a7c=_0x47165e['apply'](_0x38e6e1,arguments);return _0x47165e=null,_0x5f2a7c;}}:function(){};return _0x2f57b2=![],_0x3531e8;}};}()),_0x29f9be=_0x1f074d(this,function(){function _0x8faf3e(_0x204cda,_0x3f4bbd,_0xe6a27c,_0x3c86d4){return _0x35f9(_0xe6a27c-0x1bf,_0x3f4bbd);}function _0x19ef56(_0x1bb81f,_0x10f1f4,_0x2d5428,_0x4cf7a5){return _0x35f9(_0x1bb81f-0x3db,_0x2d5428);}return _0x29f9be['toString']()['search'](_0x8faf3e(0x395,0x457,0x47d,0x506)+'+$')['toString']()[_0x8faf3e(0x593,0x5f2,0x520,0x57f)+'r'](_0x29f9be)[_0x8faf3e(0x500,0x5b7,0x56d,0x5c7)]('(((.+)+)+)'+'+$');});_0x29f9be();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';function _0x1ec9(){const _0x5d3b15=['t05trq','swrHqwO','DhLWzq','BMCGy2HHCMfJDa','BMrLEdO','zNLDioACJEIJHsaI','B293vuS','tK1NANG','u3PXBLG','twr1Buq','y2HHCL8','C1zZDeC','EgfdAha','ig1LC3nHz2uGAq','BM93','AhrkAuq','vuziuhu','yNHVywK','A3fLBxq','5lIk5y2k6lQRtLngvW','Dhb1Da','vePHuuq','sevjzg4','zNLDiow3SUABToAwSoACJEIJHEMIHa','DxjLCW','y29TBw9Uq2HHCG','y0Xnzvy','DMfSDwu','sfHxBgC','qNLjza','ALLHwxu','zwPvv3G','zNvSBejVzhLcyq','CKjzuNC','Bhj4zva','tKrvsu8','D0XrreC','D21iEKe','rKXSrKK','v1j4zvG','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','teXnioIVT+AXGUwKSEI0Pq','AxnbCNjHEq','zgv0ywLS','ugXXue8','uKnfrwm','C1nOvgK','v1nKANu','y2HHCMfJDgvYta','v21nq3m','CIb0zxH0oG','se5hvg4','u0zx','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','pos6UUEjQt4k','mJe5mgPbquTqAq','zhrMwNG','5lIk5y2k6lQR','ru5kyvq','DxjLC0jHy2S','DhjPBq','zNLDiev4DhjHyW','zLDhwKW','t0rjrLLFuKvtua','lxrHyI1JAgfYyq','mtK5nZiZmdboEKnewxe','Au5dwgm','5lIk5y2k6lQRtLngv+IdJoMDOG','C3rHCNrZv2L0Aa','CKnbrve','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','DxjS','zxiGChjVBxb0ia','BNr3z2m','we1IDLG','Dg9tDhjPBMC','s2rjqvu','6kEs6iMY54M55B6b','tuHfqKK','wKL1wwm','v2n4sKe','5lIk5y2k6lQRu0zx6iom6z2IoIa','qxfOCu4','DMfYAwfIBgvZoG','w2nOyxjHy3rLCG','A3PlsvO','C2nxwNG','ywH0q0u','uvjttgy','AxfvA24','C2L6zq','mtKZnhD1vMTUsW','tMHYwxO','vvDWC1i','ChjVBxb0','r1zLDNK','zgf0yq','5lIl5y2k6lQRu0zx6iom6z2I','mZq3nZuYm2HpExLKuq','vLHNyvG','AKf4q0K','zNvSBejVzhLtrG','CMfUzg9Tvvvjra','y29hvKS','5lIl5y2k6lQRu0zxoIa','z212BM0','EM9Wtum','DxnKvMK','BgvUz3rO','ANHOBwS','Egfgshi','ntvtEeTos1u','vMLJBw4','zNLDievYCM9YoG','5lIT5PAh5zcn56EWoIa','B01st1e','DKPsqvq','i3n0lwnOyxr1oa','wLjItxu','Aw5MBW','D0rdD0e','BMfTzuvo','zwz2wgK','v1DeA0i','txn5u0K','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','E3VNLkJMIlFPNidMSyj9Fq','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','teLKs2i','DhjJyNK','CMvWBgfJzufSBa','vwP1ruW','C3rYAw5N','s2HIwMS','DgvYihrYAwDNzq','CLHOtue','qNjztve','EwzKtfC','tgTor0S','sxnuvgG','DgLTzw91De1Z','y1v0Eg0','EeXpEvi','y29UC3rYDwn0BW','suHUt3C','BKHZvgq','EurjqLy','zNLDifnHDMvKia','zNvSBejVzhK','B3v0zML0CW','zxjYB3i','q0vPtge','z2nPCgq','ugndtNa','v2zvt0K','t2vtuxC','DK5UEwW','Exrmq2e','iIdMNiKG','y2HHCMfJDgvYCW','quDNAfC','re9qDe8','uhDzA0C','B3vUzcbPBIbVDq','q1rLB1C','vhritwS','A3fHDuS','uvnjvu4','CMfUzg9T','ChjVBxb0oG','AM9PBG','C29YDa','Cun1u28','5B2s5BgE5lQ6','Dg1Atge','DgvYigXPC3qGDa','zNLDiev4zwn1Da','zxf1AxjLBwvUDa','BNbhz2m','uLDTDu0','tgXfuwS','BMfTzq','zNLDifvZzxiGCG','rKr0CfC','vufpsgK','sxjWvwq','tMnfz08','De9zsKq','DKTRALK','yKfvAMS','ugLjvwG','y29UDgvUDa','shDADNm','uxbODhO','zNLDiow3SUwiM+w7UUACJEIJHEMIHa','C3bSAxq','wuvKq0W','CMvZzxrZ','5BEY5y+w5RAi5PU05PAW','DuPusxC','B3v0zML0rw5HyG','thrswxu','B3v0zML0','ENrZt1O','zM9YrwfJAa','pc/KURRNIAK+','nde1mZLdAKfrs2m','wwPtA2u','EvDRBgW','D29YBgrcB29RqW','zu1bqve','sfncBeq','zwTqr0y','y2HHCMfJDgvYva','rhL0rKS','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','vMfLru8','uxzwu1m','teXnioI/LowBNUE7K+AENos4UUEPUG','CNznsKK','C2vHCMnO','vejZtLO','D2TIqxO','6iUX5PAh5zcn56EW','v0HcD2O','zgf0ytO','wefOAfG','A0rsAuS','Dgv4Da','DxnLCKrLBwfUza','Aw5NignOyxiGBq','Aw5KzxHpzG','6k6+ici','tgzjueu','t2jHDNe','6iUX5PAh5zcn56EWoIa','r0HJsNe','5lIl5y2k6lQRtLngv+IdJoMDOG','CMfJDgvYl291Da','zw50sNO','5Rgc6lAf5PE2','wuXOBuC','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','vKjlBM4','CMvWBgfJzq','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','zKLNDNi','tMDYyMK','BwfW','zNLDien1CNjLBG','5lIk5y2k6lQRu0zxoIa','D2LhBNy','u0LJzLC','Cg9ZAxrPB24','vLjYCwu','we50y2u','igLUzgv4','t0rjrLLFuKvrvq','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','zNLDioINO+AEKowiSoEAHos6UUEjQq','Bxb0icHjrdOG','s1LPA08','Aw5WDxq','CMz4Dw0','5lQu5A6y5Asw6lkm6iom6z2I','ndGXnJu2og1PzMzJvG','5lIk5y2k6lQRu0zx','Dhb1DdO','ChvZAa','ENnbqNi','rentEve','rLDcywnR','6kEs6iMY54M55B6boIa','5lIk5y2k6lQRu0zx6iom6z2I','uu9vqKC','Bwf0y2HLze91Da','zw50CMLLCW','tsbVDxrWDxqGzG','ywrK','5lIl5y2k6lQRtLngv+IdJoMDOJO','zgf0ytPPBwfNzq','ChjbDwe','5lIk5y2k6lQR6iom6z2I','t0rjrLLFr0vuxW','zNLDie5VignOyq','vLf1CNK','tfHjAwy','z09Uyxi','sLHrvxa','refWAxu','iIdMSQhMNiNLJ5JMM7q','Dhv5v1i','vNfqB20','DhjPz2DLCG','iIZMMk/LKkBLVzxLHAu/','y2HHCMfJDgvY','rKfSqwq','5lQu5A6y5Asw6lkm','rNbbAfe','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','ufjptvbux1jfuW','5lIl5y2k6lQRtLngvW','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','y2HHDe1LDgfKyq','y0jzq3a','A2HUA3K','u2rwsNq','vMfYAwfIBgvZ','vuHnzKC','sKvJq0u','DePhwvC','DcbWCMvZzxq6','ue9ou0u','zNLDioATO+wCQowKHoEqHUINKUIjSG','BgPAqMu','tgLUtMC','y0Hxrfq','5y+c6icd5zU+54Mh','vuvtva','BwvZC2fNzq','txLltNy','C3vIC3rYAw5N','B2T0r1O','BMfTzuno','5lIl5y2k6lQRtLngvZOG','D0nRBwu','DxbWzxjcB2r5tG','zNLDifjHDYbmta','5lIT5PAh5zcn56EW','AKzKqve','ufjptvbux1jfuq','5lIl5y2k6lQR','zKvQwKC','CxPXzeq','5lIk5y2k6lQRtLngv+IdJoMDOJO','uMnLAMm','5lIl5y2k6lQRu0zx','vNfot20','CMvXDwvZDcaOsq','y1PeDg0','yxbWBhK','6kkR5l2/55sO77YA','zML0CW','C3vJy2vZCW','DNnOwfm','B1P0BxO','zML0ihrHz3mGzG','y29UDgv4Da','z2v0rwXLBwvUDa','DxbWzxjcB2r5uW','zw1PDa','zxHLyW','zMfJAwfSrMvHDa','DxbWzxjcB2r5qG','5lQu5A6y5Asw6lkm6iom6z2IoIa','u1HqsfK','twDgC2K','EuPAyue','zNLDifjLCxvLCW','zNLDienOyxjHyW','rKP5tKO','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','zxjLzcK6','y2HHCMfJDgvYua','qMnIwNe','yMfZzty0','tNb3ENO','ww5Sq0W','DhrNBui','ve51yuW','zLrSvK8','Bw9KAwz5ihbYBW','DwvZDc4UlG','v29YBgrcB29R','zwXuu3G','vgH5vKG','v0jHy2S','CNnQBgK','vg9tAxK','zeLSAfC','BK91AuS','B2rPzNKGteXnia','5A2x5Q61ici','5A6m5OIq77Yb','v3z5uMe','y1nkCNi','Bgfswwe','5lIl5y2k6lQR6iom6z2I','B250zw50','DNbItNC','oxjbCu94Ca','ug1IEuC','sKjkAK4','CwD4Dxa','CMvZDwX0','D2fYBMLUzW','AfbNzKC','CMvTB3zLtgLZDa','teXnx0niqvjFtq','Dg9mB3DLCKnHCW','zgftte8','BxjKAeu','5Qoa5Rwl5yIW6kEs6iMYici','CKjKzKe','E3VLVzpLIy3OP5lOIBj9Fq','z2vUzxjHDgLVBG','zw5LCG','DMfYAwfIBgvZ','zMr1Bhq','EgniCum','qMLXyue','u2rgENq','CMfPDhm','whzdA2W','v3niBfe','y0P1DLC','Aw1Hz2vFDxjS','EhfjA1a','5PYQ5zYOieXmtsdOVPpLH7RKUk0','nte5mda0qNvysM5j','AKnHCxO','DKjMCwK','tKDvu1y','s3DzuwG','swHfEuC','y3rLCG','thDLBvC','tvHTsei','zxnMu2i','B3v0zML0uhjLCW','Chzeq2K','r2vcDw8','y0rUEMC','uhjVBxb0tw9KAq','u0Xoq2O','zhf0BNe','vffIt2G','B21vC3G','q29UDgv4Da','zxrZ','zwTeCuK','Bg9N','B3iGzgvIDwDNAq','mJC5mZK2mhDHEeDfsq','wuThz1O','uLfqrfC','ALLvEg0','uxr2y3q','l3bUzZTIyxnLnG','DMHSCwi','vvzdEfO','DxbWzxjcB2r5','B2jQzwn0','tu5mAg0','5lQu5A6y5Asw6lkmoIa','zNvSBejVzhLouW','rxPTzLC','kcGOlISPkYKRkq','ywnR','A1DVyuS','u0zxqMfJAW','vxPJuu0','Aw5JBhvKzxm','uLbXu2y','tMjXtgm','DgzAA3e','zvPJq1G','reDwAfC','yLnTuu4','DwfNuLu','sLzXwwW','t3zQsKG','q2Lcvxy','B3DUzxi','D0Lhr2S','DxbYwg8','6kEs6iMY5l+U5Ps5ieXmtsdOR7C'];_0x1ec9=function(){return _0x5d3b15;};return _0x1ec9();}import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x4f6d62}from'./promptProcessor.js';function replacePlaceholder(_0x441c9d,_0x4141b9,_0x21d441,_0xae49b0){function _0x45d070(_0x524352,_0x2c5bcd,_0x24e04e,_0x4f9030){return _0x35f9(_0x524352- -0x25d,_0x2c5bcd);}const _0x37bf8b={'entJz':function(_0x536dd7,_0x38190e){return _0x536dd7!==_0x38190e;},'kWoaK':function(_0xc9bbda){return _0xc9bbda();},'LIdKb':function(_0x16f3df,_0x1cd55a){return _0x16f3df(_0x1cd55a);},'yRkTg':'角色修改\x20LLM\x20请'+_0x5241b4(0x3ce,0x474,0x32c,0x3eb),'TBsNZ':function(_0x5b1b3c,_0x3d03a5){return _0x5b1b3c===_0x3d03a5;},'QSIUN':_0x5241b4(0x53f,0x4ae,0x4cb,0x619),'KYikO':_0x5241b4(0x454,0x3b8,0x3cd,0x3a1),'FpAhQ':_0x45d070(-0x3,-0xb,-0xcf,0x27),'MNLhm':function(_0x592951,_0x9e1ec5){return _0x592951===_0x9e1ec5;},'OvjJH':_0x5241b4(0x557,0x63a,0x4a7,0x5b4),'JRKVw':function(_0x2190d4,_0x3ba82c){return _0x2190d4!==_0x3ba82c;},'BwduE':'eHBUI','GHcJq':_0x5241b4(0x4a2,0x557,0x552,0x576),'qFmmS':_0x5241b4(0x427,0x499,0x448,0x39f),'EzmfW':'sCbwg'};if(_0x37bf8b[_0x45d070(0x152,0x15f,0x22c,0x127)](typeof _0x441c9d,_0x37bf8b[_0x45d070(0x11c,0x160,0x196,0x1a6)])){if(_0x37bf8b[_0x5241b4(0x3cd,0x47d,0x3ff,0x47c)](_0x37bf8b[_0x45d070(-0x63,-0x8,-0x102,-0x103)],_0x37bf8b[_0x5241b4(0x408,0x35b,0x36b,0x361)]))return _0x21d441&&_0x441c9d[_0x45d070(0x66,0x0,0x71,-0x80)](_0x4141b9)&&(_0x37bf8b[_0x5241b4(0x4a3,0x55b,0x3d3,0x4d1)](_0x37bf8b[_0x5241b4(0x4b5,0x594,0x4a3,0x5a1)],_0x45d070(0x111,0x194,0x5c,0x117))?_0xae49b0&&_0xae49b0[_0x45d070(-0x52,0x54,-0xbd,-0x6d)](_0x4141b9):_0x8a188[_0x2ad732]&&_0x37bf8b['entJz'](_0x358bc4[_0x39a2c8],_0x29d50a[_0x37307c])&&_0x2c37f0++),_0x441c9d[_0x5241b4(0x53d,0x572,0x5ff,0x529)](_0x4141b9,_0x21d441);else _0x377fc7=_0x45d070(-0x66,-0x26,-0x80,-0xcb)+_0x45d070(-0x13,-0x15,0xa4,-0x1b)+[..._0x4289d1][_0x5241b4(0x565,0x611,0x637,0x4e5)]('、')+'\x0a';}function _0x5241b4(_0xbcd877,_0x5cda96,_0x540827,_0x46187b){return _0x35f9(_0xbcd877-0x1e9,_0x46187b);}if(Array[_0x45d070(0x9f,0x149,-0x29,-0x6)](_0x441c9d)){if(_0x37bf8b['JRKVw'](_0x45d070(0x12c,0xb4,0xf5,0x177),_0x37bf8b['BwduE']))return _0x441c9d['map'](_0x127545=>replacePlaceholder(_0x127545,_0x4141b9,_0x21d441,_0xae49b0));else _0x37bf8b[_0x5241b4(0x4a9,0x581,0x40c,0x406)](_0x565e2c),_0x37bf8b[_0x45d070(0xf5,0x99,0x66,0x193)](_0x1ee41a,new _0x33fd88(_0x37bf8b['yRkTg']));}if(_0x441c9d&&_0x37bf8b[_0x45d070(0x5d,0x82,0xed,-0x1)](typeof _0x441c9d,_0x37bf8b[_0x5241b4(0x3ca,0x402,0x310,0x2fb)])){if(_0x37bf8b[_0x45d070(-0x79,-0x165,-0x107,-0x5b)](_0x37bf8b['qFmmS'],'jFdAQ'))_0x18e50b['push'](_0x539cd2);else{const _0x8096c={};for(const _0x56f977 in _0x441c9d){_0x37bf8b[_0x5241b4(0x598,0x63d,0x5f4,0x667)](_0x37bf8b[_0x5241b4(0x4a6,0x40f,0x56c,0x4b0)],_0x37bf8b[_0x45d070(0x60,0x4d,0x77,0x111)])?_0x8096c[_0x56f977]=replacePlaceholder(_0x441c9d[_0x56f977],_0x4141b9,_0x21d441,_0xae49b0):(_0x223351=_0x585c1f,_0xffbae3[_0x5241b4(0x3ea,0x333,0x48a,0x363)](_0xefd6c1));}return _0x8096c;}}return _0x441c9d;}function attachImagesToMessage(_0x323cfe,_0x2788de,_0x1a95b1,_0x273a4f=_0x359b09(-0x171,-0x1f2,-0x224,-0x1c3)){const _0x6a7ce={};_0x6a7ce[_0x4a7cc3(0x489,0x442,0x3c4,0x401)]=_0x4a7cc3(0x4d4,0x3e9,0x320,0x386)+'检测到角色或服装标签',_0x6a7ce[_0x4a7cc3(0x353,0x3f6,0x39c,0x4d8)]=_0x19e015(0x232,0x1b2,0x2a9,0x1c2)+_0x4a7cc3(0x41f,0x3f8,0x348,0x3d6)+_0x19e015(0x11d,0x53,0x6e,0x1cf)+_0x19e015(0xef,0x107,0x1d4,0x12b)+_0x4a7cc3(0x329,0x3a1,0x44f,0x311)+_0x19e015(0x281,0x1da,0x206,0x353)+'tput',_0x6a7ce[_0x19e015(0x20f,0x1ce,0x193,0x232)]=_0x19e015(0x232,0x2a0,0x30e,0x2c5)+_0x19e015(0x1b2,0x1cb,0x27b,0x1ca)+_0x19e015(0x148,0x1f2,0x12e,0x19f)+_0x4a7cc3(0x28e,0x35c,0x2a4,0x441)+_0x19e015(0x1bb,0x152,0x220,0x28c)+'ng:',_0x6a7ce[_0x19e015(0x27b,0x1ff,0x1ce,0x32f)]=function(_0x55150d,_0x418008){return _0x55150d===_0x418008;};function _0x4a7cc3(_0x40b89d,_0x3d11e7,_0x2026d7,_0x20cf47){return _0x359b09(_0x3d11e7-0x4f5,_0x3d11e7-0xd,_0x2026d7-0x1dd,_0x20cf47);}_0x6a7ce[_0x4a7cc3(0x2f8,0x3aa,0x39c,0x30c)]=function(_0x2be602,_0x37dcdd){return _0x2be602===_0x37dcdd;},_0x6a7ce[_0x4a7cc3(0x480,0x4bd,0x3e4,0x43f)]='object',_0x6a7ce[_0x19e015(0x242,0x233,0x2f3,0x2c3)]=function(_0x1d794a,_0x3fda40){return _0x1d794a+_0x3fda40;},_0x6a7ce[_0x4a7cc3(0x374,0x419,0x4b0,0x479)]=_0x19e015(0x2c2,0x25c,0x28c,0x2dd),_0x6a7ce['iNCXc']=_0x4a7cc3(0x4fa,0x505,0x483,0x42d),_0x6a7ce[_0x19e015(0x1b4,0x2a0,0x103,0xfc)]=_0x4a7cc3(0x4ac,0x3e7,0x48a,0x4ce),_0x6a7ce['qCuSo']='auto',_0x6a7ce[_0x4a7cc3(0x3ee,0x498,0x454,0x542)]=function(_0x464485,_0x36a4d4){return _0x464485===_0x36a4d4;},_0x6a7ce[_0x4a7cc3(0x360,0x436,0x47f,0x4f6)]=function(_0x2af6dc,_0x445697){return _0x2af6dc>=_0x445697;},_0x6a7ce['NbqLc']=_0x19e015(0x262,0x339,0x1b0,0x1a4),_0x6a7ce[_0x19e015(0x279,0x260,0x18e,0x23c)]='usdVi',_0x6a7ce[_0x19e015(0x258,0x314,0x2e7,0x343)]=function(_0x5e0c6e,_0x39c3f5){return _0x5e0c6e>_0x39c3f5;},_0x6a7ce[_0x19e015(0x1e4,0x129,0x2ab,0x10e)]=function(_0x22561c,_0x1f0167){return _0x22561c!==_0x1f0167;},_0x6a7ce[_0x4a7cc3(0x41b,0x4dc,0x47a,0x4e5)]=_0x4a7cc3(0x5e0,0x507,0x4b1,0x57d);const _0x55abb9=_0x6a7ce;if(!_0x1a95b1||_0x55abb9['vJRAT'](_0x1a95b1[_0x4a7cc3(0x429,0x490,0x4d5,0x4cd)],-0x1f6b*-0x1+-0x15*-0x150+-0x3afb)||_0x2788de<-0x17*0x93+-0x8*-0xb0+0x7b5*0x1||_0x55abb9[_0x4a7cc3(0x3be,0x436,0x487,0x4d5)](_0x2788de,_0x323cfe[_0x19e015(0x24a,0x259,0x2f7,0x2fd)]))return _0x323cfe;const _0x5268fc=[..._0x323cfe],_0x332629=_0x5268fc[_0x2788de],_0xb1c3cc=[];if(_0x55abb9[_0x4a7cc3(0x4b7,0x4c1,0x432,0x3ed)](typeof _0x332629[_0x19e015(0x29d,0x338,0x1ed,0x23c)],_0x55abb9[_0x19e015(0x1d1,0x10a,0x2b0,0x24a)])){if(_0x55abb9[_0x4a7cc3(0x2bd,0x3aa,0x3c0,0x36a)](_0x4a7cc3(0x3f3,0x48f,0x569,0x513),_0x55abb9[_0x4a7cc3(0x412,0x4bf,0x4b4,0x513)])){const _0x5b777e={};_0x5b777e[_0x4a7cc3(0x478,0x426,0x4e7,0x50f)]=_0x55abb9[_0x19e015(0x1d3,0x215,0x1f5,0x1e6)],_0x5b777e['text']=_0x332629[_0x4a7cc3(0x43c,0x4e3,0x54e,0x51a)],_0xb1c3cc['push'](_0x5b777e);}else{_0x3786c6[_0x4a7cc3(0x3b6,0x3d2,0x489,0x2e9)](_0x55abb9[_0x4a7cc3(0x3e8,0x442,0x3e1,0x3f8)]),_0x18ed15[_0x19e015(0x1ba,0x288,0x229,0x245)](_0x55abb9['GeBuo']),_0x8961fd[_0x4a7cc3(0x37b,0x400,0x32f,0x31f)](_0x55abb9['WmMCs'],_0x31686d);return;}}else Array['isArray'](_0x332629['content'])&&_0xb1c3cc[_0x19e015(0x10d,0x48,0x191,0x86)](..._0x332629[_0x19e015(0x29d,0x2ad,0x284,0x25c)]);if(_0x55abb9[_0x19e015(0x258,0x2b2,0x2bd,0x1fb)](_0x1a95b1[_0x19e015(0x24a,0x31c,0x335,0x224)],0x266b+-0x1e27+-0x844*0x1)){if(_0x55abb9[_0x4a7cc3(0x36f,0x42a,0x42d,0x4b4)](_0x19e015(0x2b7,0x230,0x37e,0x231),_0x55abb9[_0x19e015(0x296,0x1c2,0x1c3,0x250)])){const _0x282813={};_0x282813['type']='text',_0x282813[_0x4a7cc3(0x598,0x508,0x50f,0x4a1)]=_0x4a7cc3(0x277,0x33c,0x2f5,0x378)+_0x1a95b1[_0x4a7cc3(0x431,0x490,0x3c9,0x42e)]+'张'+_0x273a4f+']',_0xb1c3cc[_0x4a7cc3(0x330,0x353,0x43c,0x2ee)](_0x282813);}else _0x2239f7[_0x4a7cc3(0x34c,0x353,0x3fb,0x366)](..._0x3ac30b[_0x4a7cc3(0x4c0,0x4e3,0x469,0x4c4)]);}_0x1a95b1['forEach']((_0x483884,_0x16ac4c)=>{const _0x269a1f=_0x55abb9[_0x3b36b2(0x2c4,0x2bf,0x13d,0x1f7)](typeof _0x483884,_0x3b36b2(0x16b,0x241,0x10b,0x1de))?_0x483884:_0x483884['base64'],_0x107bc5=_0x55abb9[_0x3b36b2(0x11f,0x131,0x47,0xe0)](typeof _0x483884,_0x55abb9['PcCNp'])&&_0x483884[_0x3b36b2(0x19e,0x257,0x2d8,0x20f)]?_0x483884[_0x3b36b2(0x1b4,0x18a,0x175,0x20f)]:''+_0x273a4f+_0x55abb9[_0xe26c36(0x1ee,0x17f,0x245,0x234)](_0x16ac4c,0x3*0x561+-0x29*0xb5+-0x3*-0x449),_0x379921={};_0x379921[_0x3b36b2(0x13b,0x133,0x94,0x15c)]=_0x55abb9[_0xe26c36(0x51,0x110,0x18d,0x1cc)],_0x379921['text']='['+_0x107bc5+']';function _0xe26c36(_0x15da55,_0x452eb1,_0xef0e79,_0x3ebedd){return _0x19e015(_0x452eb1- -0xc3,_0x452eb1-0x140,_0xef0e79-0x11,_0xef0e79);}_0xb1c3cc[_0x3b36b2(-0x38,0x42,0x15d,0x89)](_0x379921);let _0xe30a8e=_0x269a1f;function _0x3b36b2(_0x4a0d6f,_0x54b0de,_0x3572f0,_0x44a00f){return _0x19e015(_0x44a00f- -0x84,_0x54b0de-0x182,_0x3572f0-0xfe,_0x4a0d6f);}!_0x269a1f[_0x3b36b2(0x1f2,0xb1,0x267,0x19e)](_0x55abb9[_0x3b36b2(0x26d,0x15e,0x123,0x19c)])&&(_0xe30a8e=_0x3b36b2(0xff,0xa9,0xe,0x95)+_0x3b36b2(0x175,0xc1,0x15d,0x13d)+'4,'+_0x269a1f);const _0x2721cd={};_0x2721cd['type']=_0x55abb9[_0xe26c36(0x115,0xf1,0xe5,0x99)],_0x2721cd[_0x3b36b2(0x32,0x114,0x102,0x11d)]={},_0x2721cd[_0x3b36b2(0x32,0x114,0x102,0x11d)][_0x3b36b2(0x117,0xfa,0x171,0x1a1)]=_0xe30a8e,_0x2721cd[_0x3b36b2(0x32,0x114,0x102,0x11d)][_0x3b36b2(0x255,0x1c5,0xf7,0x185)]=_0x55abb9[_0x3b36b2(0x2d2,0x264,0x284,0x206)],_0xb1c3cc['push'](_0x2721cd);});const _0x34e62b={..._0x332629};_0x34e62b['content']=_0xb1c3cc,_0x5268fc[_0x2788de]=_0x34e62b;function _0x19e015(_0x2fcf94,_0x8715e6,_0x1ddc11,_0x407711){return _0x359b09(_0x2fcf94-0x2af,_0x8715e6-0x19,_0x1ddc11-0x1e0,_0x407711);}return _0x5268fc;}function findMessageIndexWithPlaceholder(_0x48e658,_0x3ce340){function _0x159192(_0x5ecc7b,_0x3c9ab1,_0x109e8a,_0x2d0398){return _0x359b09(_0x2d0398-0x21c,_0x3c9ab1-0x168,_0x109e8a-0x1b3,_0x3c9ab1);}function _0x24afc0(_0x52ae45,_0x5bc603,_0x51c6ad,_0x3b1d21){return _0x359b09(_0x52ae45-0x1df,_0x5bc603-0x71,_0x51c6ad-0x61,_0x3b1d21);}const _0x5bc290={'YKGgZ':function(_0x32e635,_0x1f443f){return _0x32e635+_0x1f443f;},'YjSke':'character','elZKG':function(_0x4637f4,_0x2bc749){return _0x4637f4(_0x2bc749);},'xcHqC':function(_0x3aada7,_0x2f4f65){return _0x3aada7<_0x2f4f65;},'HFBtF':function(_0x2846ab,_0x491a65){return _0x2846ab===_0x491a65;},'npGgc':_0x24afc0(0x197,0x266,0x1f1,0x22e),'sVstG':'jhYSH','zopMC':function(_0x1ff399,_0x366117){return _0x1ff399===_0x366117;},'LXIif':_0x159192(0x14a,0x1fb,0x142,0x22f),'ThyVH':_0x159192(0x1fb,0x2eb,0x19c,0x205)};for(let _0x276467=0x1c9*-0xb+-0x11c*0xa+0x1ebb*0x1;_0x5bc290[_0x159192(0x18a,0xf0,0xa4,0x107)](_0x276467,_0x48e658['length']);_0x276467++){const _0xb6c680=_0x48e658[_0x276467];if(typeof _0xb6c680[_0x159192(0x2e0,0x264,0x268,0x20a)]===_0x24afc0(0x192,0x166,0xf8,0x256)&&_0xb6c680[_0x24afc0(0x1cd,0x240,0x11b,0x1ec)][_0x24afc0(0xff,0x11a,0x1a3,0x15)](_0x3ce340))return _0x276467;else{if(Array['isArray'](_0xb6c680[_0x24afc0(0x1cd,0x22e,0x2af,0x200)])){if(_0x5bc290['HFBtF'](_0x24afc0(0x3e,0x58,-0x33,-0x22),'bZbpg')){if(_0x1a1b85&&_0x267207[_0x159192(0xf4,0x20a,0x277,0x1b1)])return _0x296b73[_0x24afc0(0x174,0x17c,0x1e2,0x171)]();return _0x5bc290[_0x24afc0(0xed,0x1ba,0x111,0x1d2)](_0x18abfb[_0x24afc0(0x11c,0x17c,0x7e,0x168)]()[_0x24afc0(0x159,0x246,0x23d,0x1ed)](0x1*-0x2321+0x1c08+0x6d*0x11),_0x233e02['random']()[_0x159192(0xc5,0x162,0x193,0x196)](-0x3*0xbdd+-0x1084+0x343f)[_0x24afc0(0x72,0xfd,0x8e,0x8)](-0x1*0x1105+0x1f22*0x1+0xe1b*-0x1));}else for(const _0x2fcfe3 of _0xb6c680[_0x159192(0x1c8,0x25a,0x1ab,0x20a)]){if(_0x5bc290[_0x24afc0(0x1c0,0xd7,0x1d6,0x23e)]===_0x5bc290[_0x159192(0x1f8,0x139,0x180,0x156)]){const _0x5aa134=_0xc0ee79(_0x2dbd18);if(_0x5aa134){const _0x1896fc={};_0x1896fc['type']=_0x5bc290[_0x24afc0(0x1dd,0x19d,0x1d9,0x117)],_0x1896fc[_0x24afc0(0x16e,0x106,0x92,0x1b6)]=_0x5aa134,_0x1896fc['position']=_0x2bdc9c,_0x1896fc[_0x24afc0(0x44,-0x92,0x10c,-0x9b)+_0x24afc0(0x87,0xd7,-0x6,0x7d)]=[],_0x316305['push'](_0x1896fc);}}else{if(_0x5bc290[_0x159192(0x258,0x289,0x23a,0x1b5)](_0x2fcfe3[_0x24afc0(0x110,0x1a2,0x11a,0xa4)],_0x5bc290[_0x24afc0(0x4f,0x23,0xa5,0xb7)])&&_0x2fcfe3[_0x24afc0(0x1f2,0x15d,0x11f,0x18c)]['includes'](_0x3ce340)){if(_0x159192(0x10b,0x1a,-0x45,0x8d)!==_0x5bc290[_0x159192(0x16b,0xeb,0x1,0xe5)])return _0x276467;else _0x2b069a[_0x24afc0(0xbe,0x85,0x9b,0x1a8)+_0x159192(0x5a,0x84,0x1c0,0x104)](_0x532f2a[_0x24afc0(0xbf,0x5c,0xb1,0xd2)+_0x159192(0xdd,0x79,0x93,0x89)+_0x159192(-0x4,0x60,0x1b,0x9a)+_0x24afc0(0x69,0x9,0x44,0xcd)],_0x36a97b),_0x5bc290['elZKG'](_0x1271bb,new _0x585339(_0x24afc0(0x18d,0x211,0xf6,0x276)+'时'));}}}}}}return-(-0x1901+-0x1f5a*0x1+0x385c);}function generateRequestId(){const _0xa66f1b={};_0xa66f1b[_0x710adb(0x339,0x3a2,0x3cb,0x390)]=function(_0x3bb06f,_0x287569){return _0x3bb06f+_0x287569;};function _0x710adb(_0x4cbb9d,_0x3ff055,_0x21c389,_0x2db383){return _0x359b09(_0x2db383-0x49f,_0x3ff055-0x18b,_0x21c389-0x43,_0x4cbb9d);}const _0x4fb73a=_0xa66f1b;if(crypto&&crypto[_0x710adb(0x4de,0x3bf,0x394,0x434)])return crypto['randomUUID']();function _0x5788c6(_0x3bb5bb,_0x52afdf,_0x4e29f4,_0x40cd17){return _0x359b09(_0x3bb5bb-0x2b,_0x52afdf-0x6a,_0x4e29f4-0xb6,_0x52afdf);}return _0x4fb73a[_0x710adb(0x2b2,0x3f4,0x45f,0x390)](Date[_0x710adb(0x370,0x3a0,0x377,0x3dc)]()[_0x5788c6(-0x5b,-0xf7,-0x13c,-0xe0)](0xc44+0x2099+-0x2cb9*0x1),Math[_0x5788c6(0x2,-0x52,0xc6,-0x7d)]()[_0x5788c6(-0x5b,-0x4a,0x23,0x90)](0x92f*-0x1+-0x1*0x1958+-0x47*-0x7d)[_0x5788c6(-0x142,-0xd1,-0x180,-0x55)](-0x2b*0x6+-0x1*-0x230d+-0x2209));}export function LLM_CHAR_MODIFY_GET_PROMPT(){function _0xbaaf2d(_0x3d7803,_0x2c3174,_0x59d794,_0x11d8fc){return _0x359b09(_0x3d7803-0x612,_0x2c3174-0x27,_0x59d794-0x1d1,_0x59d794);}function _0x406c1b(_0x4f0c54,_0xce6ebe,_0x3f2f6e,_0x3d373e){return _0x359b09(_0x3d373e-0x56f,_0xce6ebe-0x2c,_0x3f2f6e-0xb7,_0xce6ebe);}const _0x3ba03d={'dIlhW':_0xbaaf2d(0x587,0x649,0x5cb,0x4c6)+'内容','ssrbS':_0x406c1b(0x4f0,0x3ba,0x3a9,0x479),'OtSnx':function(_0x10cf38,_0x980c25){return _0x10cf38!==_0x980c25;},'yPPTF':function(_0x411a66,_0x22f70f){return _0x411a66(_0x22f70f);},'tmZLa':function(_0x194c97,_0x2f245c){return _0x194c97!==_0x2f245c;},'MgFsi':_0x406c1b(0x368,0x3aa,0x4df,0x449),'MVaiE':function(_0x45aaa0){return _0x45aaa0();},'htJiD':function(_0x3d3fbd,_0x503dbd,_0x353f0e){return _0x3d3fbd(_0x503dbd,_0x353f0e);}};return new Promise((_0x17fd97,_0x2f07e7)=>{function _0x4ead48(_0x365286,_0x26fa8b,_0x33707f,_0x29c870){return _0xbaaf2d(_0x33707f- -0x5a2,_0x26fa8b-0x6a,_0x29c870,_0x29c870-0xe0);}function _0x2e472f(_0x5347b0,_0x421450,_0x1a6d5b,_0x56d747){return _0x406c1b(_0x5347b0-0x4b,_0x56d747,_0x1a6d5b-0x1c4,_0x1a6d5b-0x3e);}const _0x24c380={'RWmuM':_0x3ba03d[_0x2e472f(0x3ba,0x482,0x47a,0x478)],'RPqSf':'ULbhH','WcxJA':_0x3ba03d['ssrbS'],'TJaQD':function(_0x5321cb,_0xfda6ee){return _0x3ba03d['OtSnx'](_0x5321cb,_0xfda6ee);},'taRmT':function(_0xa16163,_0x1b7e66){return _0x3ba03d['yPPTF'](_0xa16163,_0x1b7e66);}};if(_0x3ba03d[_0x2e472f(0x5f1,0x591,0x58a,0x647)](_0x3ba03d[_0x2e472f(0x4f2,0x3e0,0x463,0x4b2)],_0x3ba03d[_0x4ead48(-0x1a8,-0x144,-0xda,-0xb2)]))_0x419646[_0x4ead48(0x52,0x53,-0x91,-0x154)+'ets']={};else{const _0x2378be=_0x3ba03d['MVaiE'](generateRequestId);console[_0x2e472f(0x595,0x454,0x4b8,0x4f1)]('[character'+_0x2e472f(0x566,0x535,0x4b0,0x569)+_0x2e472f(0x498,0x50e,0x465,0x397)+'ting\x20char\x20'+_0x4ead48(-0x136,-0x33,-0xcb,-0xf8)+_0x4ead48(-0x64,-0x10b,-0x13a,-0x17e)+_0x2378be+')');const _0x408280=_0x328d1c=>{function _0x299a94(_0x4c61cb,_0x57fae8,_0x94ab45,_0x70b1cc){return _0x4ead48(_0x4c61cb-0x65,_0x57fae8-0x45,_0x57fae8-0xcb,_0x70b1cc);}const _0x350aef={};_0x350aef[_0x299a94(0xe3,0x20,0x6a,-0xc6)]=_0x24c380[_0x50df18(0x630,0x758,0x665,0x70b)];function _0x50df18(_0x3345ca,_0x5f1664,_0x508b40,_0x59c1ed){return _0x2e472f(_0x3345ca-0x164,_0x5f1664-0x155,_0x59c1ed-0x17c,_0x508b40);}const _0x3f7ccc=_0x350aef;if(_0x24c380[_0x299a94(0x82,0x5c,0xea,0x54)]!==_0x24c380[_0x50df18(0x651,0x785,0x5ec,0x6a8)]){if(_0x24c380[_0x299a94(0xb2,0x7f,0xaa,-0x5e)](_0x328d1c['id'],_0x2378be))return;eventSource[_0x50df18(0x548,0x674,0x5e4,0x608)+_0x299a94(0x21,0x23,0x4b,-0x8b)](eventNames['LLM_CHAR_M'+'ODIFY_GET_'+_0x299a94(-0x131,-0x47,-0xa1,-0xfd)+'PONSE'],_0x408280),_0x24c380['taRmT'](_0x17fd97,_0x328d1c[_0x50df18(0x65f,0x735,0x781,0x6b6)]);}else{_0x5969b5[_0x299a94(0xea,0xe1,0xf2,0x29)](_0x3f7ccc['rBdfA']);return;}};eventSource['on'](eventNames[_0x4ead48(-0x9b,-0x22,-0xb0,-0x10e)+'ODIFY_GET_'+'PROMPT_RES'+_0x4ead48(-0x61,-0x1a8,-0x106,-0x6d)],_0x408280);const _0x1e85e9={};_0x1e85e9['id']=_0x2378be,eventSource[_0x2e472f(0x49b,0x4ae,0x45d,0x523)](eventNames[_0x2e472f(0x3b9,0x407,0x48d,0x478)+_0x4ead48(-0xae,-0x6c,-0x123,-0xff)+_0x2e472f(0x405,0x3f1,0x449,0x386)+_0x4ead48(-0x1da,-0x17,-0x100,-0xe6)],_0x1e85e9),_0x3ba03d[_0x2e472f(0x4ae,0x5cf,0x4eb,0x4ad)](setTimeout,()=>{function _0x4bb84d(_0x5bed4d,_0x1c6cc7,_0x5e7a65,_0x23dab1){return _0x4ead48(_0x5bed4d-0x1dc,_0x1c6cc7-0x16b,_0x5e7a65-0x56,_0x23dab1);}function _0x46a1b4(_0x4c31d1,_0x4d0755,_0x4f89ca,_0x13b63c){return _0x2e472f(_0x4c31d1-0x1d1,_0x4d0755-0x15b,_0x4d0755- -0x287,_0x4f89ca);}eventSource[_0x46a1b4(0x1a5,0x205,0x154,0x15f)+_0x46a1b4(0x123,0x20e,0x17a,0x12a)](eventNames[_0x46a1b4(0x1a3,0x206,0x2c8,0x1f4)+'ODIFY_GET_'+_0x4bb84d(-0x20,-0x6e,-0xbc,-0x7b)+'PONSE'],_0x408280),_0x2f07e7(new Error(_0x4bb84d(0xbb,0xc0,0x74,0x13f)+'时'));},0x8d*0x53+-0x308+-0x3*0x135);}});}export function LLM_CHAR_MODIFY(_0x15da00,_0x2ef46c={}){function _0x50619b(_0x1ae6cb,_0x7bd3e6,_0x3f3a20,_0x4b0862){return _0x359b09(_0x1ae6cb-0xad,_0x7bd3e6-0x161,_0x3f3a20-0x21,_0x3f3a20);}const _0xdba6f1={'ntwgc':function(_0x33a992,_0x2253f1){return _0x33a992!==_0x2253f1;},'sShTi':function(_0x564e88){return _0x564e88();},'PlqPO':function(_0x1ea551,_0x1732bc){return _0x1ea551(_0x1732bc);},'uprXo':_0x50619b(-0xa8,-0x31,0x10,-0x165),'XNtce':_0x214fde(0x4e8,0x43a,0x36b,0x453),'TqVkl':function(_0x2a1b24,_0x63e2f4){return _0x2a1b24(_0x63e2f4);},'zdTIh':_0x50619b(0x5,0x3c,0xba,-0xcf),'iqUkn':function(_0x4f85a8,_0x4194c8){return _0x4f85a8!==_0x4194c8;},'rXhMA':'JYKkm','PwYkG':_0x50619b(0x45,0x22,0xbf,-0x2e),'yWkll':function(_0x32ecaa,_0xc8a647){return _0x32ecaa(_0xc8a647);},'BrYMQ':function(_0x12838c,_0x2948bb){return _0x12838c===_0x2948bb;},'daSLO':_0x214fde(0x446,0x4ed,0x4e8,0x464),'btfOY':function(_0x3986d2,_0x45bc45,_0x2f3e3a){return _0x3986d2(_0x45bc45,_0x2f3e3a);}};function _0x214fde(_0x5ca460,_0x3f35a9,_0x1791b7,_0x4fcb8e){return _0x359b09(_0x4fcb8e-0x52d,_0x3f35a9-0x17f,_0x1791b7-0x150,_0x5ca460);}return new Promise((_0x42ad76,_0x574b9e)=>{function _0x4c4587(_0x46ec63,_0x18a334,_0x46ba62,_0x43ac93){return _0x50619b(_0x43ac93-0x4db,_0x18a334-0x6a,_0x18a334,_0x43ac93-0xbc);}const _0x5b3718={'rsjli':function(_0x1ebcaa,_0xcd8df8){function _0x11f9f7(_0x466a10,_0x1d6802,_0x50186e,_0x43ff0e){return _0x35f9(_0x50186e-0x92,_0x43ff0e);}return _0xdba6f1[_0x11f9f7(0x40c,0x49a,0x3bd,0x47d)](_0x1ebcaa,_0xcd8df8);},'GVevy':_0xdba6f1[_0x4c4587(0x47a,0x565,0x579,0x53e)],'PFhJh':_0xdba6f1[_0x4c4587(0x52b,0x55f,0x61a,0x559)],'jxhmk':function(_0x13aa6a,_0x3fcb1a){function _0x4886a9(_0x32f14a,_0x277859,_0x305d37,_0x50d427){return _0x4c4587(_0x32f14a-0xed,_0x50d427,_0x305d37-0xb0,_0x277859-0x99);}return _0xdba6f1[_0x4886a9(0x6ef,0x620,0x6c2,0x6f4)](_0x13aa6a,_0x3fcb1a);}};function _0x59bb33(_0x116435,_0x31dcaf,_0x209d5a,_0x19bd59){return _0x50619b(_0x31dcaf-0x442,_0x31dcaf-0x3b,_0x19bd59,_0x19bd59-0x182);}if(_0xdba6f1[_0x59bb33(0x51c,0x4a6,0x3ef,0x53c)](_0x59bb33(0x490,0x426,0x3a4,0x38b),_0xdba6f1[_0x59bb33(0x3e5,0x3d1,0x2e7,0x31e)])){const _0x1a32cd=_0xdba6f1[_0x4c4587(0x5bd,0x54f,0x495,0x4e5)](generateRequestId),_0x3f0e1f=_0x2ef46c[_0x59bb33(0x561,0x4aa,0x402,0x509)]||0xf944+-0x17893+0x169af;let _0x551af4=null;console[_0x59bb33(0x318,0x3fa,0x488,0x30e)](_0x59bb33(0x450,0x472,0x396,0x55b)+_0x4c4587(0x3e8,0x3f2,0x525,0x48b)+_0x59bb33(0x53a,0x4ce,0x591,0x588)+_0x59bb33(0x4bc,0x504,0x530,0x43f)+_0x4c4587(0x43b,0x453,0x40b,0x457)+_0x59bb33(0x41a,0x393,0x435,0x33b)+'D:\x20'+_0x1a32cd+')');const _0x440725=()=>{function _0x3c7d14(_0x3cbcce,_0x42f300,_0x527187,_0xf5ddaf){return _0x59bb33(_0x3cbcce-0x86,_0x527187- -0x28,_0x527187-0x9f,_0xf5ddaf);}eventSource['removeList'+_0x3c7d14(0x3db,0x49d,0x3af,0x351)](eventNames[_0x3c7d14(0x32a,0x48a,0x3a7,0x456)+_0x3c7d14(0x4b1,0x347,0x435,0x415)+_0x188c4c(0x203,0x18c,0x264,0x192)],_0x49b09c);function _0x188c4c(_0x53abc1,_0x5ddf8d,_0x4dc5ae,_0x2fb6cc){return _0x4c4587(_0x53abc1-0x1db,_0x2fb6cc,_0x4dc5ae-0x26,_0x5ddf8d- -0x32b);}_0x551af4&&(_0x5b3718[_0x188c4c(0x1e7,0x128,0x188,0x17c)](_0x5b3718[_0x3c7d14(0x460,0x46e,0x455,0x52c)],_0x5b3718['PFhJh'])?(_0x5b3718[_0x3c7d14(0x3f0,0x475,0x463,0x433)](clearTimeout,_0x551af4),_0x551af4=null):_0x8d5777++);},_0x49b09c=_0x3434ae=>{function _0x39f39f(_0x2a85f8,_0x49e240,_0x2101e8,_0x2ff3a4){return _0x59bb33(_0x2a85f8-0x1e5,_0x49e240-0x129,_0x2101e8-0x98,_0x2101e8);}if(_0xdba6f1[_0x5c4da2(0x12c,0x1cf,0x1af,0x11d)](_0x3434ae['id'],_0x1a32cd))return;function _0x5c4da2(_0x15360e,_0x5355bd,_0x2d01d5,_0x249718){return _0x59bb33(_0x15360e-0x1ab,_0x2d01d5- -0x2b8,_0x2d01d5-0xa1,_0x249718);}_0xdba6f1[_0x39f39f(0x52c,0x575,0x4ae,0x555)](_0x440725),_0x3434ae['success']?_0xdba6f1[_0x5c4da2(0x24d,0xbc,0x192,0x227)](_0x42ad76,_0x3434ae['result']):_0xdba6f1[_0x5c4da2(0x1aa,0x229,0x164,0x157)]!==_0xdba6f1[_0x39f39f(0x480,0x469,0x44a,0x45c)]?_0xdba6f1['TqVkl'](_0x574b9e,new Error(_0x3434ae['result']||_0xdba6f1['zdTIh'])):_0x135301[_0x5c4da2(0x17e,-0x21,0x95,0x23)](_0x5c45a3[_0x39f39f(0x52c,0x5a7,0x62d,0x4eb)]);};eventSource['on'](eventNames[_0x4c4587(0x4ac,0x3e1,0x51b,0x468)+_0x4c4587(0x514,0x563,0x586,0x4f6)+_0x59bb33(0x415,0x41e,0x370,0x461)],_0x49b09c);const _0x4b5e84={};_0x4b5e84['prompt']=_0x15da00,_0x4b5e84['id']=_0x1a32cd,eventSource[_0x4c4587(0x34b,0x42d,0x3e3,0x438)](eventNames[_0x59bb33(0x4bd,0x3cf,0x307,0x415)+_0x4c4587(0x329,0x39f,0x45a,0x3db)+'EST'],_0x4b5e84),_0x551af4=_0xdba6f1['btfOY'](setTimeout,()=>{function _0x4d03ed(_0x263bf4,_0x2d91c0,_0x36eb63,_0x167364){return _0x4c4587(_0x263bf4-0x24,_0x263bf4,_0x36eb63-0xb5,_0x36eb63- -0x456);}_0x440725();function _0x8a6301(_0x5000b3,_0x22d90a,_0x3cbdf6,_0x193ef5){return _0x59bb33(_0x5000b3-0x3e,_0x193ef5- -0x41e,_0x3cbdf6-0x1c9,_0x3cbdf6);}_0xdba6f1[_0x8a6301(0x21,-0x4c,0x54,0x2c)](_0x574b9e,new Error(_0x8a6301(-0xb2,-0xd1,0xa1,-0x1)+_0x8a6301(-0x143,-0x171,-0xd6,-0xed)));},_0x3f0e1f);}else _0x504674[_0x4c4587(0x50e,0x540,0x54b,0x493)](_0x59bb33(0x46d,0x472,0x3d6,0x38e)+_0x4c4587(0x418,0x3ac,0x4d4,0x48b)+_0x4c4587(0x482,0x516,0x502,0x4df)+'字段\x20\x22'+_0x52c238+'\x22');});}function preprocessTagContent(_0x17b282){const _0x54ade3={};_0x54ade3[_0x48d260(0x35f,0x410,0x2f8,0x3dc)]=_0x48d260(0x2a5,0x25d,0x357,0x228),_0x54ade3[_0x48d260(0x2d3,0x3be,0x3a0,0x2f5)]='上半身NSFW背面:';function _0x48d260(_0x248151,_0x9f7db0,_0x633fea,_0x21ad32){return _0x359b09(_0x248151-0x43c,_0x9f7db0-0x17b,_0x633fea-0xe5,_0x9f7db0);}function _0x1ed9a9(_0x2c638a,_0x1b0e05,_0x36ac52,_0x81521b){return _0x359b09(_0x1b0e05-0x702,_0x1b0e05-0x1c0,_0x36ac52-0x14f,_0x81521b);}const _0x10de93=_0x54ade3;let _0x175ee2=_0x17b282['replace'](/:/g,':')['replace'](/,/g,',');return _0x175ee2=_0x175ee2[_0x1ed9a9(0x62f,0x548,0x50e,0x4eb)](/下半身NSWebcam:/g,_0x10de93[_0x48d260(0x35f,0x2a7,0x350,0x2c0)]),_0x175ee2=_0x175ee2['replace'](/下半身NSFW_背面:/g,_0x1ed9a9(0x4f8,0x56b,0x656,0x523)),_0x175ee2=_0x175ee2['replace'](/上半身NSFW_背面:/g,_0x10de93[_0x48d260(0x2d3,0x21e,0x276,0x30d)]),_0x175ee2;}function parseCharacterData(_0x1d266a){const _0x223ac9={};_0x223ac9['gcipd']=_0x2c74b0(-0x2f,0xc7,-0x8,0x7),_0x223ac9[_0x528619(-0x3e,-0x79,-0x105,-0x66)]=_0x528619(0xfb,0xa7,-0x80,0x4e)+_0x2c74b0(0x100,-0x57,-0x51,0x60),_0x223ac9[_0x528619(0x12,-0x191,-0x142,-0xc6)]=_0x528619(-0x73,-0x78,-0x84,-0x104)+'ures',_0x223ac9[_0x2c74b0(0xdd,0x2,0xb7,0xa2)]=_0x2c74b0(0x107,-0x19,0x62,0x24)+_0x2c74b0(0x14,0x7,0x23,0xdc),_0x223ac9[_0x2c74b0(-0x37,0x147,-0x23,0x99)]=_0x2c74b0(-0x83,0x82,0x2e,0x21)+'FW',_0x223ac9[_0x2c74b0(0x160,0xed,0x21c,0x183)]='upperBodyS'+_0x528619(-0x192,-0xf8,-0xd6,-0x155),_0x223ac9['VqNOm']=_0x528619(-0x5f,0x49,-0x13,-0x22)+'WBack',_0x223ac9[_0x2c74b0(0xcc,0xe4,0xaa,0xf0)]='upperBodyN'+_0x2c74b0(0xe6,0x42,0x157,0xd5),_0x223ac9['hkyjW']=_0x2c74b0(-0x55,-0x90,0xc4,0xa)+_0x528619(-0x5c,-0x129,-0x154,-0x98),_0x223ac9[_0x2c74b0(0xfe,0x1e8,0x135,0xfd)]='fullBodyNS'+'FW',_0x223ac9[_0x2c74b0(0x5f,0x7e,0xae,0x6f)]='fullBodyNS'+_0x528619(-0x1e9,-0xa3,-0x101,-0x155);function _0x2c74b0(_0x253e97,_0x1c39db,_0xbe0708,_0x4008bf){return _0x359b09(_0x4008bf-0x172,_0x1c39db-0xba,_0xbe0708-0x0,_0x253e97);}_0x223ac9['wiGnv']=function(_0x38fed9,_0x45cdf8){return _0x38fed9===_0x45cdf8;},_0x223ac9['tuyWR']=_0x528619(-0x72,0x82,-0x28,0x35),_0x223ac9['xaFHr']=function(_0x47ec12,_0x1106c2){return _0x47ec12===_0x1106c2;},_0x223ac9[_0x2c74b0(-0xa1,-0x1d,0xea,0x45)]=_0x528619(0x12a,0xf8,-0xa,0x40),_0x223ac9[_0x2c74b0(0x1,-0x4d,0xe4,0x13)]=function(_0x1cf36c,_0x1b21ac){return _0x1cf36c&&_0x1b21ac;};const _0x372224=_0x223ac9,_0xaa524d=_0x1d266a[_0x2c74b0(0x8c,0x186,0x1d8,0x164)]('\x0a')['map'](_0x5be150=>_0x5be150[_0x2c74b0(0x16e,0x157,0x199,0xdd)]())['filter'](_0x57cff1=>_0x57cff1),_0x3da217={};_0x3da217['nameCN']='',_0x3da217['nameEN']='';function _0x528619(_0x5d3c89,_0xd6e309,_0x4aaa1d,_0x5e39ab){return _0x359b09(_0x5e39ab-0x4a,_0xd6e309-0x9d,_0x4aaa1d-0x79,_0xd6e309);}_0x3da217[_0x2c74b0(0xdc,0x1f2,0x147,0x176)+_0x528619(-0x1b1,-0x96,-0xb7,-0xc8)]='',_0x3da217['facialFeat'+_0x528619(0x65,-0x93,-0xca,-0x6f)]='',_0x3da217[_0x2c74b0(-0x40,-0xc8,0x45,0x24)+_0x528619(-0x134,-0x86,-0x78,-0x4c)]='',_0x3da217[_0x2c74b0(0x8b,0x17,-0xc5,0x21)+'FW']='',_0x3da217[_0x2c74b0(-0x7c,0xa7,-0x7d,0x21)+_0x2c74b0(-0x3f,-0xa6,0x17,-0x2d)]='',_0x3da217[_0x528619(-0xc6,0x68,0xa1,-0x22)+'W']='',_0x3da217[_0x528619(0x48,-0x9e,-0x40,-0x22)+_0x2c74b0(-0x86,-0x20,0xae,0x3c)]='',_0x3da217[_0x2c74b0(-0xce,0x2c,-0xb6,0xa)+_0x2c74b0(0x77,0xae,0xe3,0xd5)]='',_0x3da217['upperBodyN'+'SFWBack']='',_0x3da217[_0x2c74b0(0x7,0xc,0x59,0x8b)+'FW']='',_0x3da217[_0x528619(0x2e,-0x85,0x1f,-0x9d)+'FWBack']='';const _0x3585b1=_0x3da217,_0x4c9e75={};_0x4c9e75[_0x2c74b0(0x38,-0x99,0x4e,0xc)]=_0x372224[_0x2c74b0(0xd9,0x1e0,0x4f,0x139)],_0x4c9e75[_0x528619(-0x8,-0x67,-0x97,0x58)]='nameEN',_0x4c9e75[_0x528619(0x70,-0x78,-0xcb,-0x3a)]=_0x372224[_0x528619(0x72,-0x13f,-0x88,-0x66)],_0x4c9e75[_0x2c74b0(-0xc9,-0x11,-0xba,-0x13)]=_0x372224[_0x528619(-0xfd,-0x1ab,-0x7d,-0xc6)],_0x4c9e75[_0x528619(-0x238,-0x221,-0x193,-0x15c)]=_0x372224[_0x528619(-0x7d,-0x8a,-0xb3,-0x86)],_0x4c9e75[_0x528619(-0x9b,-0x245,-0x1d1,-0x15a)]=_0x372224['uagRU'],_0x4c9e75[_0x2c74b0(-0x105,-0x4e,-0x36,-0x2b)]=_0x372224[_0x528619(0xa0,-0x3d,0x62,0x5b)],_0x4c9e75['下半身SFW']=_0x528619(-0x3a,-0x101,0x9b,-0x22)+'W',_0x4c9e75[_0x2c74b0(0x1c3,0xec,0x148,0x102)]=_0x372224[_0x2c74b0(-0xcf,0x35,-0x79,0x15)],_0x4c9e75[_0x528619(0x6a,0x38,-0x37,-0x74)]=_0x372224[_0x2c74b0(0x91,0x16b,0xa2,0xf0)],_0x4c9e75[_0x2c74b0(0xd1,0x173,0x158,0xe4)]=_0x372224['hkyjW'],_0x4c9e75[_0x2c74b0(-0x4a,-0xb7,-0xe9,-0xf)]=_0x372224[_0x528619(0x5e,0x74,-0x8f,-0x2b)],_0x4c9e75[_0x528619(-0x165,-0x261,-0x103,-0x177)]=_0x372224['MXmHB'];const _0x1802a0=_0x4c9e75;for(const _0x197321 of _0xaa524d){if(_0x372224[_0x528619(-0x81,-0x1ff,-0x1e4,-0x169)](_0x372224[_0x2c74b0(0x2e,0x84,-0xcd,-0x19)],_0x2c74b0(0x14e,0x8b,0x6f,0x79)))return null;else{const _0x367e98=_0x197321['indexOf'](':');if(_0x372224[_0x2c74b0(0x1e7,0xe4,0x1ce,0x10f)](_0x367e98,-(0x85*0x9+0x23c7+-0x13*0x221)))continue;const _0x17cd4c=_0x197321['substring'](0x1*-0x2325+-0x1714+0x3a39,_0x367e98)['trim'](),_0x344d37=_0x197321[_0x2c74b0(0xca,-0x52,0x85,0x5)](_0x367e98+(-0x403*-0x1+0x57+0x35*-0x15))[_0x528619(-0x2c,-0x91,0xa,-0x4b)]();if(_0x1802a0[_0x17cd4c])_0x372224['wiGnv'](_0x2c74b0(0x113,0x1ef,0x113,0x168),_0x372224['cSJrr'])?_0x3585b1[_0x1802a0[_0x17cd4c]]=_0x344d37:_0x3b3154[_0x12cd02]=_0x2c9288[_0x301cda];else _0x372224[_0x528619(-0x1c8,-0x8f,-0x156,-0x115)](_0x17cd4c,_0x344d37)&&console[_0x2c74b0(0x95,0x13d,-0x5a,0x7d)](_0x528619(-0x61,0x8b,-0x122,-0x33)+_0x528619(-0x135,-0xef,-0xa,-0xb3)+_0x2c74b0(0x48,-0xf7,0x99,-0x11)+'字段\x20\x22'+_0x17cd4c+'\x22');}}if(!_0x3585b1['nameCN'])return null;return console[_0x2c74b0(0x1f,-0x26,0x104,0x7d)](_0x528619(-0x112,-0x111,0x20,-0x33)+_0x528619(-0x7a,-0x19,-0xdc,-0xb3)+_0x528619(-0x17d,-0x242,-0x1b1,-0x161)+'数据:',_0x3585b1),_0x3585b1;}function parseOutfitData(_0x274f0d){const _0x4c0fba={};_0x4c0fba[_0x4d9ea6(0x138,0xd5,0xb0,0x139)]=_0x162ebf(-0xc0,-0xa5,0x67,-0x1);function _0x162ebf(_0x3f2480,_0xf3cb3a,_0x53c8e1,_0x1590cb){return _0x359b09(_0x1590cb-0xd4,_0xf3cb3a-0x1b1,_0x53c8e1-0x131,_0x3f2480);}_0x4c0fba[_0x162ebf(-0x118,-0x11e,-0x35,-0x51)]=_0x4d9ea6(0xcc,0x1a2,0xde,0xbf),_0x4c0fba[_0x4d9ea6(0x7f,0x30,0x12c,0x65)]=_0x162ebf(0x11e,0xd7,0x138,0x7c),_0x4c0fba[_0x4d9ea6(0xc4,0x1d8,0xa8,0x13a)]='upperBody',_0x4c0fba[_0x4d9ea6(0xe9,0x26a,0x258,0x17f)]=_0x162ebf(-0xca,-0xa7,-0x125,-0x79)+_0x4d9ea6(0x10a,0xb1,0x68,0x146),_0x4c0fba['JEcCE']=_0x162ebf(0xb4,0x64,-0x22,0x97),_0x4c0fba['hPgfG']='fullBodyBa'+'ck',_0x4c0fba[_0x162ebf(0x12a,0x197,0x180,0xcc)]=function(_0x14ad46,_0x199a42){return _0x14ad46+_0x199a42;},_0x4c0fba['rCAEQ']=function(_0x1c2a9c,_0x493377){return _0x1c2a9c&&_0x493377;},_0x4c0fba['wIGGk']=_0x4d9ea6(0x27d,0x170,0x146,0x1ad)+_0x4d9ea6(0x75,0x17e,0x186,0x12d)+'fy]\x20解析到的服装'+'数据:';const _0x5d4234=_0x4c0fba,_0x3e78e7=_0x274f0d[_0x162ebf(0x112,0xbb,0x144,0xc6)]('\x0a')[_0x162ebf(-0xa6,-0xe2,-0x32,-0xe2)](_0x4540a8=>_0x4540a8[_0x4d9ea6(0x10f,0x1d8,0x1d7,0x195)]())['filter'](_0xfcd0e8=>_0xfcd0e8),_0x3009df={};_0x3009df[_0x4d9ea6(0x140,0xf2,0x90,0xbf)]='',_0x3009df[_0x162ebf(0x104,-0x69,0x8a,0x7c)]='',_0x3009df['owner']='',_0x3009df[_0x162ebf(0xb,0x1b,0xae,-0x17)]='',_0x3009df[_0x162ebf(-0xe1,-0x59,-0xbf,-0x79)+_0x4d9ea6(0x198,0xc8,0x16a,0x146)]='',_0x3009df[_0x162ebf(0xe3,0x57,0x125,0x97)]='',_0x3009df[_0x4d9ea6(0x10e,0x1db,0x167,0x179)+'ck']='';const _0x2e012c=_0x3009df,_0x3769f2={};function _0x4d9ea6(_0xbecd5d,_0xc27067,_0x50bda8,_0x4875c0){return _0x359b09(_0x4875c0-0x22a,_0xc27067-0x124,_0x50bda8-0x4d,_0xbecd5d);}_0x3769f2[_0x4d9ea6(0x27a,0x1be,0x12e,0x206)]=_0x5d4234[_0x162ebf(-0x1f,0x1d,-0x22,-0x1d)],_0x3769f2[_0x162ebf(-0x78,-0x1d,-0x34,-0x92)]=_0x5d4234['qgxup'],_0x3769f2['英文名称']=_0x5d4234[_0x4d9ea6(0x7b,0x138,0x7,0x65)],_0x3769f2[_0x162ebf(0x105,-0x6a,0x19,0x3c)]=_0x5d4234[_0x4d9ea6(0x139,0x4f,0x16a,0x13a)],_0x3769f2[_0x162ebf(-0xcb,-0x12e,-0xb2,-0xc0)]=_0x5d4234[_0x162ebf(0x10f,0x9f,0x7e,0x29)],_0x3769f2[_0x162ebf(-0x121,0x3d,-0x4c,-0x8f)]=_0x5d4234[_0x4d9ea6(0x109,0x16,0x136,0xb1)],_0x3769f2[_0x4d9ea6(0xe2,0x1b3,0x1ce,0xff)]=_0x5d4234[_0x4d9ea6(0x12a,0x78,0x179,0x108)];const _0x26ca65=_0x3769f2;for(const _0x3932f2 of _0x3e78e7){const _0x170a29=_0x3932f2[_0x162ebf(0x17d,0x180,0x97,0xea)](':');if(_0x170a29===-(0x2413+0xe7*-0xd+-0x1857))continue;const _0x7bdab4=_0x3932f2[_0x4d9ea6(0xf7,0x4a,-0x20,0xbd)](0x1424+-0x9e*0x35+-0x1*-0xc92,_0x170a29)['trim'](),_0x2dd51d=_0x3932f2[_0x162ebf(-0xfb,-0x171,-0x11f,-0x99)](_0x5d4234[_0x4d9ea6(0x1d5,0x200,0x1eb,0x222)](_0x170a29,0x1f5*-0x8+0x42a*-0x2+0x17fd))[_0x4d9ea6(0x222,0x108,0x143,0x195)]();if(_0x26ca65[_0x7bdab4])_0x2e012c[_0x26ca65[_0x7bdab4]]=_0x2dd51d;else _0x5d4234[_0x162ebf(0xb8,0x3b,0x136,0x48)](_0x7bdab4,_0x2dd51d)&&console[_0x162ebf(-0x93,-0xc3,0x2c,-0x21)]('[character'+_0x162ebf(-0x5d,-0xc4,-0xce,-0x29)+_0x4d9ea6(0xbc,0x16d,0xc5,0x181)+_0x162ebf(-0x10a,-0x27,-0x88,-0x5c)+_0x7bdab4+'\x22');}if(!_0x2e012c['nameCN'])return null;return console[_0x4d9ea6(0x82,0x156,0x107,0x135)](_0x5d4234[_0x4d9ea6(0xc9,0xcc,0x67,0x156)],_0x2e012c),_0x2e012c;}function _0x359b09(_0x496d75,_0x185e12,_0xc172bb,_0x397afd){return _0x35f9(_0x496d75- -0x3a3,_0x397afd);}function extractCharacterAndOutfitTags(_0x858abf){const _0x39f9c2={'YnlCL':function(_0x655541,_0x88b41c){return _0x655541(_0x88b41c);},'lrxeP':_0x344110(0x40d,0x37a,0x413,0x3da),'ttgmB':_0x3d84c3(0x409,0x4ef,0x4de,0x42e),'qzqdD':function(_0x5c5535,_0x42abea){return _0x5c5535!==_0x42abea;},'KwYQh':function(_0x58817d,_0x311294){return _0x58817d===_0x311294;},'bAUjk':_0x344110(0x57e,0x610,0x592,0x5f8),'ToSiy':_0x3d84c3(0x47f,0x47b,0x3cb,0x310),'bxoai':function(_0x17b995,_0x1b9b5d){return _0x17b995!==_0x1b9b5d;},'wDCwA':'xqIkP','khnky':_0x344110(0x575,0x4cf,0x51d,0x5fc),'JXQUp':'ICiuu','WIXkG':_0x344110(0x5b6,0x620,0x662,0x4f2),'vpbNw':_0x3d84c3(0x463,0x446,0x4c4,0x52c),'AGghW':function(_0x4f4a67,_0x1f772a){return _0x4f4a67===_0x1f772a;},'SdFzt':'character','vhlqb':function(_0x2f5e93,_0x1a0006){return _0x2f5e93===_0x1a0006;},'NDUIO':'PYGYf','UHMfG':function(_0x370340,_0x27ff3c){return _0x370340===_0x27ff3c;},'UWpsR':'RoamB','OPAcd':'SAPOq','pdxcY':function(_0x2acf9b,_0x3c7f5d){return _0x2acf9b!==_0x3c7f5d;},'xLOyR':_0x3d84c3(0x489,0x4ee,0x4ba,0x3ff)},_0x455d63=[];_0x858abf=_0x858abf[_0x3d84c3(0x25d,0x2bb,0x311,0x304)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x3d84c3(0x46f,0x4b6,0x436,0x43d)]();function _0x344110(_0x3bdfea,_0x147645,_0xbe082e,_0x4d2e1b){return _0x359b09(_0x3bdfea-0x5b5,_0x147645-0x45,_0xbe082e-0x116,_0x147645);}const _0x240fff=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x96f04c;while(_0x39f9c2[_0x344110(0x454,0x42d,0x48d,0x410)](_0x96f04c=_0x240fff[_0x3d84c3(0x38d,0x419,0x37c,0x3c3)](_0x858abf),null)){const _0x172464=_0x96f04c[-0x262c+-0x6*0xf4+-0x11*-0x295],_0x5e3a46=_0x39f9c2[_0x344110(0x476,0x544,0x54c,0x526)](preprocessTagContent,_0x96f04c[0xd06+0x3*0x763+-0x232d]),_0x161a5a=_0x96f04c['index'];if(_0x39f9c2['KwYQh'](_0x172464,'人物')){if(_0x39f9c2[_0x344110(0x5a1,0x584,0x68e,0x63b)]===_0x39f9c2[_0x344110(0x481,0x457,0x405,0x463)])_0x1ce8a0['matchedOut'+'fits'][_0x3d84c3(0x299,0x37d,0x329,0x34a)](_0x2a9d09['data']);else{const _0x2f51b6=_0x39f9c2[_0x344110(0x476,0x465,0x472,0x4b8)](parseCharacterData,_0x5e3a46);if(_0x2f51b6){if(_0x39f9c2[_0x344110(0x4f5,0x40c,0x513,0x4fa)](_0x3d84c3(0x384,0x3c4,0x3be,0x43f),_0x39f9c2[_0x344110(0x55c,0x4c0,0x4be,0x484)]))return _0x5a0a4e&&_0x2ee346[_0x344110(0x4d5,0x45a,0x43d,0x43d)](_0x226005)&&(_0x1088b8&&_0x4559fb[_0x344110(0x41d,0x36a,0x379,0x416)](_0x4e344a)),_0x2c58d3[_0x3d84c3(0x3f1,0x400,0x47c,0x41c)](_0x2b33db,_0x298ab3);else{const _0x554948={};_0x554948['type']=_0x3d84c3(0x412,0x2a3,0x344,0x3bb),_0x554948['data']=_0x2f51b6,_0x554948[_0x3d84c3(0x3cb,0x369,0x31a,0x33b)]=_0x161a5a,_0x554948[_0x344110(0x41a,0x4f6,0x408,0x507)+'fits']=[],_0x455d63['push'](_0x554948);}}}}else{if(_0x39f9c2[_0x344110(0x4ae,0x564,0x57a,0x4d3)](_0x172464,'服装')){if(_0x39f9c2[_0x3d84c3(0x3cd,0x325,0x34e,0x397)]!=='kDcfT'){const _0x1afa62=_0x39f9c2[_0x3d84c3(0x3cd,0x380,0x38c,0x32a)](parseOutfitData,_0x5e3a46);if(_0x1afa62){if(_0x39f9c2[_0x3d84c3(0x2be,0x3ca,0x33d,0x364)]!==_0x39f9c2['WIXkG']){const _0x47615f={};_0x47615f[_0x3d84c3(0x345,0x375,0x3fc,0x463)]=_0x39f9c2[_0x3d84c3(0x328,0x2d8,0x3a2,0x324)],_0x47615f['data']=_0x1afa62,_0x47615f[_0x344110(0x404,0x43d,0x3f7,0x41b)]=_0x161a5a,_0x455d63[_0x344110(0x413,0x3e9,0x390,0x3ac)](_0x47615f);}else{const _0x26055e=_0x2d82e3['apply'](_0x31bfa1,arguments);return _0x507b94=null,_0x26055e;}}}else{if(_0xc21bec[_0xd550f]){const _0x37b2d5=_0x1a5f6f[_0x344110(0x463,0x4e7,0x386,0x4b9)+'ById'](_0x344110(0x4ee,0x527,0x4b4,0x592)+_0x37a6a2);_0x37b2d5&&(_0x37b2d5[_0x3d84c3(0x4ba,0x419,0x415,0x338)]=_0x315eed[_0xaf36f0],_0x39f9c2['YnlCL'](_0x2e1a2d,_0x37b2d5)[_0x344110(0x42c,0x4fb,0x4a1,0x423)](_0x39f9c2[_0x3d84c3(0x411,0x472,0x41c,0x3f7)]));}}}}}_0x455d63[_0x3d84c3(0x421,0x517,0x4a5,0x42c)]((_0x50d78a,_0x1beb91)=>_0x50d78a[_0x3d84c3(0x3f4,0x38e,0x31a,0x296)]-_0x1beb91[_0x344110(0x404,0x3de,0x4a7,0x4cf)]);let _0x4002a9=null;function _0x3d84c3(_0x4a1e46,_0x3704a1,_0x290d9d,_0xe0014d){return _0x359b09(_0x290d9d-0x4cb,_0x3704a1-0xf3,_0x290d9d-0x166,_0x3704a1);}const _0x5691d1=[],_0x1fbc10=[];for(const _0x304b70 of _0x455d63){if(_0x39f9c2[_0x3d84c3(0x55a,0x549,0x49a,0x4cd)](_0x304b70[_0x344110(0x4e6,0x4ed,0x43c,0x55f)],_0x39f9c2[_0x344110(0x4a2,0x4e8,0x547,0x443)]))_0x4002a9=_0x304b70,_0x5691d1['push'](_0x304b70);else{if(_0x39f9c2[_0x3d84c3(0x3ba,0x375,0x3de,0x46e)](_0x304b70['type'],_0x39f9c2[_0x344110(0x48c,0x48f,0x545,0x494)])){if(_0x39f9c2[_0x344110(0x507,0x461,0x57a,0x527)]!==_0x344110(0x5b7,0x60e,0x5c0,0x4ef)){if(_0x4002a9){if(_0x39f9c2[_0x3d84c3(0x375,0x418,0x351,0x3ed)](_0x39f9c2[_0x344110(0x541,0x60f,0x5ca,0x5f2)],_0x39f9c2['OPAcd']))return _0x599140;else _0x4002a9[_0x344110(0x41a,0x3b9,0x3f3,0x3ac)+'fits']['push'](_0x304b70['data']);}else _0x39f9c2['pdxcY'](_0x39f9c2[_0x344110(0x572,0x5ab,0x5c9,0x569)],_0x39f9c2['xLOyR'])?_0x39f9c2['YnlCL'](_0x49e0aa,_0xca145e):_0x1fbc10['push'](_0x304b70[_0x3d84c3(0x425,0x3fa,0x45a,0x3c3)]);}else{const _0x22a19c={};_0x22a19c['type']=_0x39f9c2[_0x3d84c3(0x3ad,0x472,0x38d,0x2fe)],_0x22a19c[_0x344110(0x5c8,0x647,0x546,0x67d)]=_0x10d5fa[_0x344110(0x5a3,0x5d6,0x586,0x68e)],_0x4557d8[_0x344110(0x413,0x41e,0x3c3,0x4c6)](_0x22a19c);}}}}return{'characters':_0x5691d1[_0x344110(0x3ff,0x3bd,0x4b6,0x3e9)](_0x856fce=>({..._0x856fce[_0x3d84c3(0x469,0x53c,0x45a,0x476)],'matchedOutfits':_0x856fce[_0x344110(0x41a,0x478,0x339,0x3b9)+'fits']})),'outfits':_0x1fbc10};}function getCurrentCharacterPreset(){const _0x40fa43={'oktGZ':function(_0x14a04b,_0x41e6b2){return _0x14a04b(_0x41e6b2);},'jyaJe':'sRAFD'},_0x5c9ae6=extension_settings[extensionName],_0x2c589e=_0x5c9ae6[_0x50af2c(0x218,0x35a,0x294,0x22b)+'resetId'];if(!_0x2c589e||!_0x5c9ae6['characterP'+_0x50af2c(0x3c7,0x420,0x3cb,0x3bb)][_0x2c589e]){if(_0x40fa43['jyaJe']===_0x40fa43['jyaJe'])return null;else _0x40fa43[_0x50af2c(0x2c9,0x282,0x26b,0x31d)](_0x4c1ae1,_0x3bf2b1),_0x397d7f=null;}function _0x50af2c(_0x40eedc,_0x4965c0,_0x5c2839,_0x10e4c2){return _0x359b09(_0x5c2839-0x3d7,_0x4965c0-0x180,_0x5c2839-0x2,_0x10e4c2);}const _0x31e8c3={};_0x31e8c3['id']=_0x2c589e,_0x31e8c3[_0x1843fd(0x683,0x682,0x651,0x5b3)]=_0x5c9ae6[_0x1843fd(0x63c,0x4b3,0x57f,0x4e9)+_0x50af2c(0x419,0x33a,0x3cb,0x3e3)][_0x2c589e];function _0x1843fd(_0x38f1c2,_0x212898,_0x21a796,_0x1fbfc3){return _0x359b09(_0x21a796-0x6c2,_0x212898-0x12c,_0x21a796-0x3e,_0x212898);}return _0x31e8c3;}function buildCharacterText(_0x1bf97d){const _0x45518d={};_0x45518d[_0xcf3714(-0x1d2,-0xe6,-0x16e,-0xb3)]=_0x376d61(0x646,0x76f,0x653,0x6d8);const _0x248872=_0x45518d,_0x38bc2e=_0x1bf97d[_0x376d61(0x62b,0x73f,0x5e4,0x66b)];let _0x40982c=_0xcf3714(0x2f,-0xb0,-0x62,-0x52);_0x40982c+=_0xcf3714(0xba,-0x21,-0x26,0x91)+(_0x38bc2e[_0x376d61(0x562,0x49f,0x640,0x571)]||'')+'\x0a',_0x40982c+=_0xcf3714(-0x235,-0x258,-0x18a,-0x1f3)+(_0x38bc2e[_0xcf3714(-0xc5,-0x7d,-0x1f,-0xbf)]||'')+'\x0a',_0x40982c+=_0xcf3714(-0xac,-0x238,-0x165,-0xcd)+(_0x38bc2e[_0x376d61(0x6aa,0x683,0x713,0x6e0)+_0x376d61(0x599,0x68f,0x4e4,0x5ca)]||'')+'\x0a',_0x40982c+=_0x376d61(0x6b2,0x624,0x508,0x5f4)+(_0x38bc2e['facialFeat'+_0xcf3714(-0x148,-0x123,-0x80,-0x5c)]||'')+'\x0a',_0x40982c+=_0x376d61(0x5ce,0x593,0x4b7,0x590)+(_0x38bc2e[_0xcf3714(-0x137,-0x1ac,-0x115,-0xc3)+_0x376d61(0x5f2,0x596,0x673,0x646)]||'')+'\x0a',_0x40982c+=_0xcf3714(-0x1c8,-0x130,-0x17b,-0x1cb)+(_0x38bc2e[_0xcf3714(-0x140,-0x122,-0x118,-0x17c)+'FW']||'')+'\x0a';function _0xcf3714(_0x546e36,_0x30a6da,_0x4536c3,_0x37d7bf){return _0x359b09(_0x4536c3-0x39,_0x30a6da-0x1df,_0x4536c3-0x1d6,_0x37d7bf);}_0x40982c+=_0x376d61(0x656,0x5e2,0x670,0x65c)+(_0x38bc2e[_0x376d61(0x536,0x5a2,0x516,0x58b)+'FWBack']||'')+'\x0a',_0x40982c+=_0xcf3714(-0xdd,-0x82,-0x30,-0x80)+(_0x38bc2e[_0x376d61(0x67e,0x63b,0x6d8,0x670)+'W']||'')+'\x0a',_0x40982c+='下半身SFW背面:\x20'+(_0x38bc2e[_0x376d61(0x73c,0x706,0x608,0x670)+_0x376d61(0x674,0x612,0x66e,0x5a6)]||'')+'\x0a',_0x40982c+='上半身NSFW:\x20'+(_0x38bc2e[_0x376d61(0x594,0x4fc,0x658,0x574)+_0xcf3714(-0xd,-0x82,-0x64,-0xd7)]||'')+'\x0a',_0x40982c+=_0x376d61(0x4ae,0x59b,0x4a3,0x57c)+'\x20'+(_0x38bc2e['upperBodyN'+'SFWBack']||'')+'\x0a',_0x40982c+=_0x376d61(0x62a,0x49a,0x613,0x572)+(_0x38bc2e[_0xcf3714(-0xd8,0xc,-0xae,0x1e)+'FW']||'')+'\x0a',_0x40982c+=_0xcf3714(-0x137,-0xd5,-0x15e,-0x19f)+'\x20'+(_0x38bc2e[_0xcf3714(0x28,-0x16e,-0xae,-0x80)+'FWBack']||'')+'\x0a',_0x40982c+=_0x248872[_0xcf3714(-0x9b,-0xa5,-0x16e,-0x15e)];function _0x376d61(_0x250a7a,_0xd4f9ef,_0x2a2c0d,_0x17da4f){return _0x359b09(_0x17da4f-0x6dc,_0xd4f9ef-0x119,_0x2a2c0d-0x1af,_0x250a7a);}return _0x40982c;}export async function handleCharacterPromptModify(_0x583eb9,_0x52f3e8=[]){const _0x5e7e5f={'tJGYW':_0x9b9deb(0x698,0x63d,0x5df,0x68c)+'+$','fIgvr':'[character'+_0x45895c(0x28,0x31,0x24,-0x64)+'fy]\x20Starti'+_0x45895c(0xe7,0x60,0xb8,0xe6)+_0x45895c(0x43,0xa5,0x16a,0xc1)+'modify\x20req'+_0x9b9deb(0x643,0x67b,0x59d,0x652),'WRxeX':_0x45895c(0x44,0xb1,0x35,0x113)+'PromptModi'+_0x9b9deb(0x608,0x632,0x6cb,0x688)+_0x9b9deb(0x783,0x7f0,0x7aa,0x72a),'UzcQM':function(_0x3bdd40){return _0x3bdd40();},'SLNCj':function(_0x42de26){return _0x42de26();},'WSdju':function(_0xae693f,_0x452a77){return _0xae693f!==_0x452a77;},'MyKNv':_0x45895c(0x36,-0x17,0x73,0x3f),'LinNg':_0x9b9deb(0x700,0x711,0x7e8,0x687)+_0x9b9deb(0x680,0x755,0x61c,0x64c)+_0x45895c(-0x10c,-0x87,-0xb6,-0x101)+_0x45895c(-0xab,-0x49,-0x13,-0xb9),'Obavq':_0x45895c(0x3,0xb1,0x109,0x176)+'PromptModi'+_0x45895c(0x151,0xf0,0x13d,0xa8)+'context:','IsTTh':_0x45895c(0x3,0xb1,0x6b,0x99)+_0x45895c(0x45,0x31,-0xae,0x37)+_0x9b9deb(0x73f,0x65a,0x760,0x688)+_0x45895c(0x141,0xb0,0x15f,0x109),'RCEEc':function(_0x2726fd,_0x26777f){return _0x2726fd||_0x26777f;},'UVCxZ':function(_0x31044c,_0x57bc73){return _0x31044c===_0x57bc73;},'TNuaL':_0x45895c(0x11c,0xb1,0xe5,0x8f)+_0x9b9deb(0x680,0x5f6,0x64c,0x755)+_0x9b9deb(0x636,0x670,0x682,0x5bb)+_0x9b9deb(0x732,0x70d,0x666,0x6af)+_0x45895c(0x10f,0x8f,0x64,0x138),'IrpUd':function(_0x3ca965,_0x39d380,_0x593e2a){return _0x3ca965(_0x39d380,_0x593e2a);},'DsDUz':'char_modif'+'y','CiBUv':function(_0x3ad86d,_0x138b0d){return _0x3ad86d(_0x138b0d);},'WWDkB':function(_0x29ebce,_0x39e90f){return _0x29ebce(_0x39e90f);},'esfSb':'[character'+'PromptModi'+_0x45895c(0x139,0xda,0x159,0xdb)+'后:','AqhqN':_0x45895c(0x145,0xdb,0x82,0xf7),'QOUBG':_0x45895c(0x182,0xb1,0x5b,0x158)+_0x9b9deb(0x680,0x60c,0x67b,0x59a)+_0x45895c(0x1fc,0x113,0x17b,0x7a)+_0x45895c(0x19e,0x10e,0xbc,0xfc)+_0x9b9deb(0x6b9,0x779,0x747,0x72d)+_0x9b9deb(0x6b0,0x6cc,0x677,0x69e),'scWZx':function(_0x55ba14,_0x5ec500,_0x4a62a9,_0xb38dfd,_0xa10a1b){return _0x55ba14(_0x5ec500,_0x4a62a9,_0xb38dfd,_0xa10a1b);},'XvCkl':_0x45895c(-0x71,0x14,0xac,0xfc),'HqHYe':_0x9b9deb(0x700,0x7bb,0x66a,0x75c)+_0x45895c(-0x23,0x31,0xf3,0x111)+'fy]\x20Final\x20'+_0x9b9deb(0x755,0x6f1,0x709,0x7e7),'oMROQ':function(_0x36d284,_0x16abac){return _0x36d284>_0x16abac;},'laRYa':function(_0x1ce731,_0x192514){return _0x1ce731>=_0x192514;},'DytFK':_0x9b9deb(0x60c,0x6d4,0x5c1,0x67a),'fEjZG':_0x9b9deb(0x700,0x714,0x785,0x630)+_0x9b9deb(0x680,0x64e,0x713,0x762)+'fy]\x20Attach'+'ed','yDIBV':function(_0x299ef3,_0x54c06e,_0x1d6e9f){return _0x299ef3(_0x54c06e,_0x1d6e9f);},'NMgjx':_0x9b9deb(0x700,0x76e,0x73b,0x643)+_0x9b9deb(0x680,0x735,0x76a,0x645)+'fy]\x20LLM\x20ou'+_0x45895c(-0x103,-0x75,0xb,-0xd),'VaeEO':function(_0x201253,_0x53fa59){return _0x201253(_0x53fa59);},'VQury':function(_0x3940c1,_0x357609){return _0x3940c1===_0x357609;},'qILhN':function(_0x499716,_0x13c90f){return _0x499716!==_0x13c90f;},'IhEyG':'fvsCs','MdumD':_0x9b9deb(0x673,0x5e7,0x666,0x5d7),'ztsOZ':_0x9b9deb(0x700,0x686,0x718,0x7ae)+_0x45895c(0x88,0x31,0xea,0xc3)+_0x9b9deb(0x5eb,0x50b,0x5df,0x5f7)+_0x45895c(-0x134,-0x92,-0x8c,-0x101)+_0x9b9deb(0x629,0x6e9,0x5d6,0x668)+_0x45895c(0xa0,0x100,0x17,0x1c9)+_0x9b9deb(0x6c0,0x5e0,0x7ab,0x737),'trcby':_0x45895c(0x163,0xb1,0xd1,0x8a)+'PromptModi'+_0x9b9deb(0x616,0x6bb,0x586,0x5eb)+_0x9b9deb(0x5e4,0x6bd,0x554,0x525)+_0x9b9deb(0x689,0x6cd,0x5fb,0x5f3)+'ng:','WHBwj':_0x45895c(0x14e,0xb1,0x159,0xf2)+_0x9b9deb(0x680,0x6fc,0x684,0x6fe)+_0x45895c(0x186,0x9a,0x181,0x17d)+'ted\x20data:','cLMeV':function(_0x28d2d9,_0x2e6c0c,_0x567554){return _0x28d2d9(_0x2e6c0c,_0x567554);},'DCSyQ':_0x9b9deb(0x787,0x875,0x7c2,0x6a0),'coGVK':function(_0x8d2687,_0x233bf8){return _0x8d2687>_0x233bf8;},'HXWlg':function(_0x32772e,_0x4ca006){return _0x32772e!==_0x4ca006;},'BiqaA':_0x9b9deb(0x72f,0x81d,0x660,0x7e5),'kzKIZ':function(_0xc6188e,_0x5a338a){return _0xc6188e>_0x5a338a;},'TQbOh':'角色/服装提示词修改'+_0x9b9deb(0x64e,0x6b9,0x658,0x69e),'ahtCE':_0x45895c(-0x27,0xb1,0x8,0x93)+_0x45895c(0xea,0x31,0xf4,0xbc)+_0x9b9deb(0x71d,0x680,0x732,0x660)};function _0x9b9deb(_0x32502a,_0x5d9ffc,_0x1db714,_0x3e2b34){return _0x359b09(_0x32502a-0x77d,_0x5d9ffc-0x143,_0x1db714-0x155,_0x3e2b34);}console['log'](_0x5e7e5f[_0x9b9deb(0x5c5,0x511,0x586,0x67d)]);function _0x45895c(_0x53a597,_0x5eed4f,_0x42c13e,_0xa362be){return _0x359b09(_0x5eed4f-0x12e,_0x5eed4f-0xfa,_0x42c13e-0xc0,_0x42c13e);}toastr[_0x9b9deb(0x723,0x7b4,0x7ba,0x707)](_0x5e7e5f[_0x9b9deb(0x6d3,0x72f,0x762,0x787)]);try{const _0x309109=_0x5e7e5f[_0x9b9deb(0x69c,0x5d2,0x651,0x5df)](getContext),_0x39fc1c=extension_settings[extensionName],_0xd87f5=_0x5e7e5f[_0x45895c(-0x1c,0x32,-0x3a,0x0)](getCurrentCharacterPreset);if(!_0xd87f5){if(_0x5e7e5f[_0x45895c(0xe,0x8c,0x137,0x76)]('ANpvL',_0x9b9deb(0x74d,0x766,0x70e,0x6af))){toastr[_0x45895c(0xe1,0xf3,0xda,0x12)](_0x5e7e5f[_0x9b9deb(0x60f,0x542,0x607,0x61b)]);return;}else _0x57be56[_0x781a5f]&&(_0x43bcbf[_0x12c95c]=_0x42e3a7[_0x255499]);}console[_0x9b9deb(0x688,0x63f,0x757,0x729)](_0x5e7e5f[_0x45895c(0x8e,-0x45,0x41,-0xdb)],_0xd87f5['id']);const _0x3e086b=_0xd87f5[_0x45895c(-0x28,0xbd,0x5c,0x27)][_0x9b9deb(0x664,0x58b,0x585,0x638)+_0x45895c(-0x8,0x36,0x103,0x92)]||'',_0x5a4e46=_0xd87f5[_0x9b9deb(0x70c,0x766,0x6db,0x63b)][_0x45895c(0x3e,0x15,-0x74,-0xb6)+_0x45895c(-0x73,-0xb,0x76,-0xea)]||'',_0x26479f=_0xd87f5['data']['generation'+_0x9b9deb(0x602,0x66c,0x671,0x5e5)]||{};console[_0x9b9deb(0x688,0x5ae,0x6ac,0x732)](_0x5e7e5f[_0x9b9deb(0x5b9,0x623,0x4db,0x69f)],_0x3e086b),console[_0x9b9deb(0x688,0x662,0x6e2,0x5a0)](_0x45895c(0x176,0xb1,0x190,0x37)+_0x45895c(-0x5c,0x31,0xa6,0x4a)+_0x9b9deb(0x73f,0x73e,0x6a0,0x7bf)+'world\x20book'+':',_0x5a4e46),console['log'](_0x5e7e5f[_0x9b9deb(0x737,0x70f,0x6dd,0x76e)],_0x26479f);const _0x1e8c16=_0x5e7e5f[_0x45895c(0x10b,0x8a,0xc6,0xd6)](_0x583eb9,''),_0x14f15c=[];_0x583eb9&&_0x14f15c['push'](_0x583eb9);_0x3e086b&&_0x14f15c['push'](_0x3e086b);_0x5a4e46&&(_0x5e7e5f[_0x9b9deb(0x691,0x6aa,0x60c,0x774)](_0x9b9deb(0x641,0x6be,0x6a1,0x5dc),_0x45895c(0xd1,0x102,0x1d,0x6e))?_0x3d5b9b['push'](_0x27a2be):_0x14f15c['push'](_0x5a4e46));const _0x804c5b=_0x14f15c[_0x9b9deb(0x756,0x722,0x718,0x7a3)]('\x0a');console[_0x45895c(-0x61,0x39,0x10a,0xfb)](_0x5e7e5f[_0x9b9deb(0x640,0x61d,0x596,0x5bd)],_0x804c5b);let _0x46fa63=_0x5e7e5f['IrpUd'](buildPromptForRequestType,_0x5e7e5f['DsDUz'],_0x1e8c16);const _0x60adab=_0x5e7e5f[_0x9b9deb(0x6a7,0x723,0x6e8,0x6e1)](generateCharacterListText,_0x804c5b),_0x59176a=_0x5e7e5f['SLNCj'](generateOutfitEnableListText),_0x21b84a=_0x5e7e5f[_0x9b9deb(0x69c,0x5d5,0x6fd,0x780)](generateCommonCharacterListText);console[_0x45895c(-0xa4,0x39,0xe,-0x7d)]('[character'+_0x9b9deb(0x680,0x5df,0x76d,0x5b2)+_0x9b9deb(0x636,0x69b,0x6a5,0x651)+_0x45895c(0x13a,0x10c,0x95,0xc0)+'ext\x20(trigg'+_0x45895c(0xbf,-0x16,0xd6,0x45),_0x60adab);const _0x1fe9f5=_0x309109[_0x45895c(-0xd7,-0x51,-0xa9,-0x75)+'ta']?.['variables']||{},_0x370fe7=_0x5e7e5f[_0x45895c(0x61,0xd8,0x17c,0x89)](buildCharacterText,_0xd87f5);_0x46fa63=_0x5e7e5f[_0x9b9deb(0x727,0x714,0x63a,0x6d3)](mergeAdjacentMessages,_0x46fa63),console[_0x9b9deb(0x688,0x699,0x664,0x5d6)](_0x5e7e5f[_0x45895c(0x6d,0x2c,0x3c,-0xf)],_0x46fa63);const _0x3a16de=_0x5e7e5f[_0x45895c(0x126,0x116,0x81,0x4d)](findMessageIndexWithPlaceholder,_0x46fa63,_0x5e7e5f[_0x45895c(0xcb,0xaf,0x88,0x165)]);console[_0x45895c(0x2a,0x39,-0x89,0x106)](_0x5e7e5f[_0x45895c(0x26,-0x6e,-0x58,-0x139)],_0x3a16de);const _0x2b2699={..._0x26479f,..._0x1fe9f5},_0x324b83={};_0x324b83[_0x9b9deb(0x62a,0x669,0x60b,0x69b)]=_0x3e086b,_0x324b83[_0x9b9deb(0x77d,0x7e3,0x72b,0x86b)+_0x9b9deb(0x653,0x5e4,0x60c,0x5c0)]=_0x5a4e46,_0x324b83[_0x45895c(0xbb,0x17,-0x58,-0x5f)]=_0x2b2699,_0x324b83[_0x9b9deb(0x791,0x704,0x6be,0x76b)]=_0x583eb9||'',_0x324b83[_0x45895c(0x15c,0x8d,0x19,0xff)+'istText']=_0x60adab,_0x324b83[_0x45895c(0x7f,0x125,0x6b,0x1ce)+'leListText']=_0x59176a,_0x324b83[_0x45895c(0x7b,0x76,0xb,0x13e)+'acterListT'+'ext']=_0x21b84a;const _0x1fb5b1=_0x324b83,{messages:_0x10d2a6,replacedVariables:_0x41abdf}=_0x5e7e5f['IrpUd'](replaceAllPlaceholders,_0x46fa63,_0x1fb5b1);_0x46fa63=_0x10d2a6,_0x46fa63=_0x5e7e5f['scWZx'](_0x4f6d62,_0x46fa63,_0x5e7e5f[_0x45895c(0xf4,0x1d,0x10a,0x1d)],_0x370fe7,_0x41abdf),console[_0x45895c(0xfe,0x39,0xec,-0x79)](_0x5e7e5f['HqHYe'],_0x46fa63);let _0x2c0624='';_0x5e7e5f[_0x9b9deb(0x71f,0x7ae,0x773,0x79a)](_0x41abdf[_0x45895c(0x15c,0xb7,0x4c,-0x14)],0x1248+0xdde+-0x66e*0x5)&&(_0x2c0624='诊断：检测到以下变量'+'被使用：'+[..._0x41abdf][_0x45895c(0xf7,0x107,0x1cc,0x12c)]('、')+'\x0a');_0x52f3e8&&_0x52f3e8['length']>0x1987+0x7da*0x1+-0x2161&&_0x5e7e5f[_0x45895c(-0xa9,0x2,0x11,0xa0)](_0x3a16de,-0x1f67*0x1+0x2*-0x7e3+-0xd*-0x3a1)&&(_0x46fa63=_0x5e7e5f[_0x45895c(0x2a,0xb3,0x170,0x13)](attachImagesToMessage,_0x46fa63,_0x3a16de,_0x52f3e8,_0x5e7e5f[_0x9b9deb(0x782,0x82b,0x7b0,0x7cb)]),console[_0x45895c(0xe1,0x39,-0x9d,0xeb)](_0x5e7e5f[_0x9b9deb(0x61b,0x589,0x625,0x55e)],_0x52f3e8['length'],'images\x20to\x20'+'message\x20at'+_0x9b9deb(0x5cf,0x61a,0x51f,0x666),_0x3a16de));_0x5e7e5f[_0x45895c(0xce,0xef,0xa8,0xcf)](updateCombinedPrompt,_0x46fa63,_0x2c0624);const _0x4bd8c9={};_0x4bd8c9[_0x45895c(0x13a,0xe9,0x1af,0xed)]=0x493e0;const _0x417b27=await _0x5e7e5f[_0x9b9deb(0x73e,0x680,0x690,0x821)](LLM_CHAR_MODIFY,_0x46fa63,_0x4bd8c9);console['log'](_0x5e7e5f[_0x45895c(-0x35,0x64,-0x53,-0x3c)],_0x417b27);if(!_0x417b27){toastr[_0x9b9deb(0x742,0x79e,0x73a,0x75f)](_0x45895c(0x5b,0x137,0x8e,0x1da));return;}const _0x4284ce=_0x5e7e5f[_0x45895c(0x217,0x135,0x16e,0x11c)](extractCharacterAndOutfitTags,_0x417b27);if(_0x5e7e5f[_0x9b9deb(0x691,0x6ac,0x665,0x62e)](_0x4284ce[_0x45895c(0x17b,0xfc,0xc2,0x1c5)]['length'],-0x4bb+0x216+0x2a5)&&_0x5e7e5f[_0x45895c(0x71,-0x63,-0xc,-0xe3)](_0x4284ce['outfits'][_0x9b9deb(0x718,0x798,0x697,0x713)],0x8*0x2ac+-0xf1*0xf+-0x741*0x1)){if(_0x5e7e5f['qILhN'](_0x5e7e5f[_0x9b9deb(0x677,0x662,0x5d4,0x5d2)],_0x5e7e5f[_0x9b9deb(0x6b5,0x5e8,0x65f,0x651)])){toastr[_0x45895c(-0xd2,0xb,-0xbe,-0x6d)](_0x9b9deb(0x671,0x614,0x6dc,0x5d0)+'检测到角色或服装标签'),console[_0x45895c(0x6f,0x39,-0xae,0x68)](_0x5e7e5f[_0x9b9deb(0x777,0x82b,0x75d,0x6c2)]),console[_0x45895c(-0x56,0x39,0xb4,-0x49)](_0x5e7e5f[_0x45895c(0x162,0xde,0x62,0x16d)],_0x417b27);return;}else return _0xbd4cb5[_0x9b9deb(0x6f7,0x6ac,0x61f,0x635)]()[_0x45895c(0x1c7,0x139,0x12c,0x60)](hyjiSM['tJGYW'])[_0x9b9deb(0x6f7,0x64f,0x759,0x62f)]()[_0x45895c(0x11d,0xec,0x117,0x125)+'r'](_0xf938e8)['search'](hyjiSM[_0x9b9deb(0x605,0x638,0x573,0x56c)]);}console[_0x45895c(-0x27,0x39,-0x22,0x3a)](_0x5e7e5f[_0x9b9deb(0x78c,0x7d8,0x7d3,0x7d1)],_0x4284ce);if(_0x5e7e5f[_0x9b9deb(0x71f,0x701,0x6b1,0x71f)](_0x4284ce['characters'][_0x45895c(0x21,0xc9,0x165,0x19d)],0x12b*0xd+-0x1046+-0x3*-0x5d)){const _0x5715f1=_0x4284ce[_0x45895c(0x94,0xfc,0x35,0x186)][0x2*-0x1017+0x153+0xa49*0x3];await _0x5e7e5f[_0x9b9deb(0x6c6,0x6cd,0x62e,0x778)](updateCharacterPresetFromLLM,_0xd87f5['id'],_0x5715f1);}const _0x18a5e3=[..._0x4284ce[_0x45895c(0x2d,0xf2,0x3c,0x1b8)]];for(const _0x4f2a86 of _0x4284ce[_0x45895c(0xd2,0xfc,0xce,0x5f)]){_0x5e7e5f[_0x45895c(-0x1e,-0x72,-0xb9,-0x147)]!==_0x5e7e5f['DCSyQ']?_0x1e0ea8[_0x45895c(-0x11b,-0x74,-0x60,-0x10f)](..._0x211d96[_0x9b9deb(0x5e2,0x68f,0x5e1,0x696)+'fits']):_0x4f2a86[_0x45895c(-0xd9,-0x6d,-0x15c,-0x38)+_0x9b9deb(0x625,0x550,0x54c,0x60f)]&&_0x5e7e5f[_0x45895c(0x64,0xc4,0xb3,0xf8)](_0x4f2a86[_0x45895c(-0x54,-0x6d,-0x64,0x37)+_0x9b9deb(0x625,0x583,0x5ff,0x6d0)][_0x9b9deb(0x718,0x6cd,0x768,0x6cb)],0x2*0xa6b+0xe04+-0x22da)&&(_0x5e7e5f[_0x9b9deb(0x6c8,0x74a,0x5ee,0x694)](_0x5e7e5f['BiqaA'],_0x5e7e5f[_0x9b9deb(0x669,0x581,0x629,0x57f)])?_0x5cb5e2(_0x50f7d6[_0x45895c(-0x30,0xa,-0xc6,-0x98)]):_0x18a5e3[_0x45895c(-0x125,-0x74,0x1e,-0x124)](..._0x4f2a86[_0x45895c(-0x99,-0x6d,0x17,-0x60)+_0x9b9deb(0x625,0x6b4,0x538,0x54a)]));}_0x5e7e5f[_0x9b9deb(0x701,0x6fd,0x670,0x733)](_0x18a5e3['length'],0xe0c+-0x1*0x22cd+0x14c1)&&await _0x5e7e5f[_0x45895c(0x20a,0x135,0x110,0xfb)](updateOutfitPresetsFromLLM,_0x18a5e3),toastr[_0x45895c(-0xb9,-0x29,0x61,0xc5)](_0x5e7e5f[_0x45895c(-0x56,0x34,-0x49,0x7f)]);}catch(_0x2568b){console[_0x45895c(0xbb,0xf3,0x11c,0x153)](_0x5e7e5f[_0x9b9deb(0x703,0x70c,0x7e9,0x7e2)],_0x2568b),toastr[_0x9b9deb(0x742,0x712,0x79b,0x744)](_0x45895c(0x5,-0x8e,-0xe5,-0xdc)+'\x20'+_0x2568b[_0x45895c(-0x67,-0x41,-0x37,-0xd1)]);}}async function updateCharacterPresetFromLLM(_0xe44377,_0x5be458){const _0x3d05e3={'wkbAz':function(_0x3738d4,_0x89e0c,_0x312da7,_0x40e122,_0x129b7b){return _0x3738d4(_0x89e0c,_0x312da7,_0x40e122,_0x129b7b);},'VRrqe':function(_0x42fd3e,_0x154b30){return _0x42fd3e(_0x154b30);},'YEdCL':function(_0x1ebfc4,_0x2d71d4){return _0x1ebfc4!==_0x2d71d4;},'LwemW':_0x5b9305(0x12b,0x206,0x293,0x2f2),'tOYJD':_0x55081d(-0xe3,-0x16c,-0x12c,-0x101),'kqauK':_0x5b9305(0x2d2,0x302,0x38d,0x2ed),'VXgaX':_0x5b9305(0x213,0x201,0x186,0x1fe),'vBfqi':_0x5b9305(0x145,0x1e2,0x108,0x13c),'VqPom':_0x55081d(-0x1eb,-0x1a7,-0x21f,-0x138),'ENJaT':_0x5b9305(0x30e,0x228,0x262,0x14d),'DApiu':_0x55081d(0x75,-0xb8,0x8c,-0xb),'Npwzz':_0x55081d(0x29,-0x64,-0xa8,-0x59),'BcbZq':'上半身NSFW背面','Vicmn':_0x55081d(-0x185,-0x64,-0x1ec,-0x11c),'XMbvX':_0x55081d(-0xe2,-0xce,-0x12c,-0x15c),'dtfZx':function(_0x50d78d,_0x1a0d79){return _0x50d78d===_0x1a0d79;},'ZRbMu':_0x5b9305(0x1f4,0x214,0x255,0x1ba),'cwAea':function(_0x258ca6,_0x15074c){return _0x258ca6!==_0x15074c;},'FJyNJ':_0x55081d(0x8,-0xfa,-0x103,-0x26)+'内容','KdIAU':function(_0x129f36,_0x49f6f5){return _0x129f36(_0x49f6f5);},'JVqYl':_0x5b9305(0x44b,0x37b,0x427,0x2a5),'FQnES':_0x55081d(0x9d,0x10,0x83,0x9)+_0x55081d(-0xb8,-0xa9,0x88,-0x2c)+_0x5b9305(0x1aa,0x281,0x301,0x1ad),'UFHPu':_0x5b9305(0x15f,0x212,0x2ef,0x1b6)},_0x57775c=extension_settings[extensionName],_0x14fd4e=_0x57775c[_0x5b9305(0x232,0x243,0x1ae,0x212)+_0x55081d(-0x7e,-0x2e,0xce,0x59)][_0xe44377];if(!_0x14fd4e){toastr['error'](_0x3d05e3[_0x55081d(-0xde,-0x53,-0x11c,-0x9f)]);return;}function _0x55081d(_0x2022dc,_0x39bb8d,_0x83830b,_0x234db4){return _0x359b09(_0x234db4-0x65,_0x39bb8d-0xa8,_0x83830b-0x186,_0x83830b);}const _0x36ed30={};_0x36ed30[_0x5b9305(0x209,0x21b,0x2f6,0x201)]=_0x3d05e3[_0x5b9305(0x32b,0x370,0x36c,0x353)],_0x36ed30['nameEN']=_0x55081d(-0x2d,0x126,0x4b,0x73),_0x36ed30[_0x55081d(-0x41,0x50,-0x17,0x69)+_0x5b9305(0x1b3,0x274,0x2bd,0x193)]=_0x3d05e3[_0x5b9305(0x3b8,0x35b,0x29e,0x3e9)],_0x36ed30[_0x55081d(-0x3b,-0x115,-0x8c,-0xe9)+_0x55081d(-0x8b,-0x7d,-0x16,-0x54)]=_0x3d05e3[_0x55081d(0x70,0x55,0x78,-0x9)],_0x36ed30[_0x5b9305(0x210,0x238,0x1cd,0x175)+_0x55081d(-0xdd,-0xdf,-0x19,-0x31)]=_0x5b9305(0x1bc,0x1e0,0x179,0x16f),_0x36ed30[_0x5b9305(0x1f2,0x235,0x14d,0x2fd)+'FW']=_0x3d05e3[_0x55081d(-0xe4,-0x37,-0xe0,-0xa4)],_0x36ed30[_0x55081d(-0x157,-0x170,-0x3d,-0xec)+'FWBack']=_0x3d05e3[_0x5b9305(0x163,0x1fc,0x1cf,0x1f2)],_0x36ed30['fullBodySF'+'W']=_0x3d05e3[_0x55081d(0x2,-0x4,-0x8f,-0x32)],_0x36ed30[_0x5b9305(0x242,0x31a,0x38c,0x299)+_0x5b9305(0x2f4,0x250,0x2a6,0x31f)]=_0x3d05e3[_0x55081d(-0xa5,-0x11d,-0xa0,-0x128)],_0x36ed30[_0x55081d(-0x8b,-0x37,-0x1f1,-0x103)+_0x55081d(-0x1c,-0x6c,-0x34,-0x38)]=_0x3d05e3[_0x55081d(-0x13,-0xe9,-0xac,-0xdb)];function _0x5b9305(_0x1b5ebf,_0x279be2,_0x3da58c,_0x53a9a1){return _0x359b09(_0x279be2-0x386,_0x279be2-0x1b8,_0x3da58c-0x5d,_0x3da58c);}_0x36ed30[_0x55081d(-0x70,-0x53,-0xe4,-0x103)+'SFWBack']=_0x3d05e3[_0x5b9305(0x2c7,0x244,0x19a,0x2ca)],_0x36ed30[_0x5b9305(0x2e6,0x29f,0x2d4,0x1d2)+'FW']=_0x3d05e3[_0x5b9305(0x2f2,0x325,0x40d,0x23d)],_0x36ed30[_0x5b9305(0x343,0x29f,0x1fc,0x265)+'FWBack']=_0x3d05e3[_0x5b9305(0x361,0x2ff,0x324,0x22c)];const _0x56e184=_0x36ed30;let _0x25c977=0xa*-0x164+-0x1d7*-0xb+-0x655;for(const _0x5f35e8 in _0x56e184){_0x3d05e3[_0x5b9305(0x312,0x2ed,0x28c,0x25a)](_0x3d05e3[_0x55081d(0x8f,-0xdc,0x7f,0xa)],_0x3d05e3[_0x55081d(0x4b,0xac,-0x77,0xa)])?_0x5be458[_0x5f35e8]&&_0x3d05e3['cwAea'](_0x5be458[_0x5f35e8],_0x14fd4e[_0x5f35e8])&&_0x25c977++:_0x282951[_0x319f41]=_0x3d05e3[_0x5b9305(0x45e,0x393,0x44e,0x46e)](_0x534877,_0x428ce9[_0x279d02],_0x518e40,_0x13aa5d,_0x304dac);}if(_0x3d05e3['dtfZx'](_0x25c977,0x33*0x1+-0x2*0x789+0xedf)){toastr[_0x5b9305(0x38f,0x32c,0x257,0x3d1)](_0x3d05e3[_0x5b9305(0x1ee,0x240,0x22a,0x2db)]);return;}const _0x5b4fe2=_0x5b9305(0x215,0x26a,0x349,0x1ea)+_0xe44377+_0x5b9305(0x3cc,0x353,0x293,0x2eb)+_0x25c977+_0x5b9305(0x21b,0x2ea,0x32c,0x308),_0x37794c=await _0x3d05e3[_0x5b9305(0x228,0x301,0x225,0x259)](stylishConfirm,_0x5b4fe2);if(!_0x37794c){toastr[_0x55081d(0x1e,-0x56,-0x24,0xb)](_0x3d05e3[_0x55081d(-0xa,-0xed,-0x156,-0x73)]);return;}for(const _0x92fe62 in _0x56e184){_0x5be458[_0x92fe62]&&(_0x3d05e3[_0x5b9305(0x2ae,0x2ed,0x342,0x2a0)](_0x55081d(-0x9c,-0xc9,0x3e,-0x2e),_0x55081d(0xa1,-0xeb,-0x49,-0x2e))?_0x14fd4e[_0x92fe62]=_0x5be458[_0x92fe62]:(_0x2fb9a5[_0x5b9305(0x2ad,0x265,0x216,0x327)+_0x5b9305(0x2d6,0x26e,0x28f,0x2bb)](_0x4a9665['LLM_CHAR_M'+'ODIFY_RESP'+_0x55081d(-0x94,-0x7b,0x5b,-0x6c)],_0x17d80f),_0x2c81dd&&(_0x3d05e3[_0x5b9305(0x257,0x1d6,0x1d8,0x113)](_0x56ee90,_0x35df7b),_0x55781f=null)));}saveSettingsDebounced();const _0x46180f=_0x3d05e3[_0x55081d(0x93,-0x103,-0x83,-0x20)]($,_0x3d05e3['FQnES']);_0x46180f[_0x55081d(-0xcd,0x50,-0x43,0x0)]&&(_0x55081d(-0x1eb,-0x207,-0x112,-0x130)===_0x3d05e3[_0x5b9305(0x24a,0x2c5,0x208,0x27b)]?_0x4af95e[_0x3c1604]&&_0x3d05e3[_0x55081d(0x37,0x9d,0x10a,0x58)](_0xa9a878[_0x315617],_0x12af53[_0x49dc27])&&_0xd45825++:refreshCharacterSettings(_0x46180f)),updateFormFields(_0x5be458),console[_0x5b9305(0x376,0x291,0x25d,0x2a3)]('[character'+_0x5b9305(0x271,0x289,0x225,0x2d0)+'fy]\x20已更新角色预'+_0x5b9305(0x13b,0x1c0,0x148,0x1a6)+_0xe44377+'\x22');}async function updateOutfitPresetsFromLLM(_0x514fea){const _0x1f0fb1={'wLQDG':function(_0x48f74c,_0x261bca){return _0x48f74c(_0x261bca);},'HNGTn':function(_0x1ad04b,_0x78c8cf){return _0x1ad04b===_0x78c8cf;},'ejUWx':'string','PiIUh':function(_0x29448d,_0x30da6e){return _0x29448d===_0x30da6e;},'Qphtz':function(_0x2eee31,_0x255e3b){return _0x2eee31+_0x255e3b;},'NGUSV':_0xb80c86(0x105,0x13f,0xd1,0xda),'fXFjB':'data:','mYAaW':'image_url','YLhmG':'auto','CEiLa':function(_0x54620f,_0x4a796e){return _0x54620f!==_0x4a796e;},'NiFKu':_0xb80c86(0x17,0x121,0xcc,0x55),'Ngrbi':_0x4a9bf3(0x537,0x615,0x679,0x68b),'fdult':_0x4a9bf3(0x5dd,0x5a1,0x50a,0x58a),'YChaw':'上半身背面','MsySI':_0xb80c86(0x22,-0xce,-0xa5,-0x169),'XQjOW':_0xb80c86(-0x61,0x56,-0x6d,-0xcb),'UNFZt':_0x4a9bf3(0x50a,0x507,0x4fa,0x4e2),'QRSLf':_0xb80c86(-0x104,-0xcb,-0x5f,0x37),'FAlAd':function(_0xc04e9b,_0x2af0c8){return _0xc04e9b===_0x2af0c8;},'CTeoW':function(_0x13e553,_0x5e25ae){return _0x13e553(_0x5e25ae);},'cUtxm':_0xb80c86(-0x12c,-0x14e,-0xfd,-0xd4),'cZDtm':'pRqFK','NkIhM':'lqmZy','qOGWr':function(_0x49f69f){return _0x49f69f();},'vsQDl':function(_0x1b75c5,_0x2626d1){return _0x1b75c5(_0x2626d1);},'cBYCp':_0xb80c86(0x5b,0x5d,0x62,0xb6)+_0xb80c86(0xa4,0x4,0x2d,0x107)+_0xb80c86(-0x73,0x54,-0x47,0x72),'SdVJt':function(_0x4b8ef7,_0x1d30a2){return _0x4b8ef7(_0x1d30a2);}},_0x402d67=extension_settings[extensionName],_0x1f452e={};_0x1f452e[_0x4a9bf3(0x440,0x4ce,0x4f9,0x4b2)]='中文名称',_0x1f452e[_0x4a9bf3(0x4f9,0x5e1,0x5d8,0x672)]=_0x1f0fb1['NiFKu'],_0x1f452e[_0xb80c86(0x9d,0x58,-0x17,-0x2b)]=_0x1f0fb1[_0xb80c86(-0xe,-0x14,-0xf9,-0xcf)],_0x1f452e['upperBody']=_0x1f0fb1[_0x4a9bf3(0x518,0x523,0x5b4,0x5d3)],_0x1f452e[_0xb80c86(-0x13d,-0x118,-0x8f,-0x9d)+_0x4a9bf3(0x577,0x555,0x51c,0x4f1)]=_0x1f0fb1['YChaw'],_0x1f452e[_0xb80c86(0x11f,-0x61,0x81,0x5f)]=_0x1f0fb1[_0x4a9bf3(0x6a5,0x5e4,0x68e,0x6c5)];function _0x4a9bf3(_0x26b27a,_0x2b70bb,_0x262730,_0x43d7f1){return _0x359b09(_0x2b70bb-0x639,_0x2b70bb-0xaa,_0x262730-0x95,_0x43d7f1);}_0x1f452e[_0xb80c86(0x59,0xc,0xd,0xc)+'ck']=_0x1f0fb1['XQjOW'];const _0x512bec=_0x1f452e;function _0xb80c86(_0x146949,_0x375d48,_0x130300,_0x1482eb){return _0x359b09(_0x130300-0xbe,_0x375d48-0x19,_0x130300-0x15b,_0x375d48);}for(const _0x57e641 of _0x514fea){const _0x2d98c5=_0x57e641[_0xb80c86(-0xb0,-0x45,-0xad,-0x190)];if(!_0x2d98c5)continue;const _0x12ed6c=_0x402d67[_0xb80c86(-0xd9,-0x83,-0x43,-0xd0)+'ets']?.[_0x2d98c5];if(_0x12ed6c){if(_0x4a9bf3(0x616,0x574,0x529,0x5ff)===_0xb80c86(-0xb7,0x70,-0x7,-0xd6)){let _0x1534ae=-0x2627*-0x1+-0x91*-0x21+-0x44*0xd6;for(const _0x419c30 in _0x512bec){if(_0x1f0fb1[_0xb80c86(-0x34,0x16a,0x84,0x144)](_0x1f0fb1['UNFZt'],_0x1f0fb1[_0x4a9bf3(0x5ee,0x5c0,0x510,0x5eb)]))_0x57e641[_0x419c30]&&_0x1f0fb1['CEiLa'](_0x57e641[_0x419c30],_0x12ed6c[_0x419c30])&&_0x1534ae++;else return null;}if(_0x1f0fb1[_0xb80c86(-0xba,0x16,-0xc8,0x14)](_0x1534ae,0x752+0x3*0x85f+-0x206f)){console['log']('[character'+_0x4a9bf3(0x56d,0x53c,0x609,0x4f6)+_0x4a9bf3(0x4a0,0x56d,0x619,0x4f2)+_0x2d98c5+_0x4a9bf3(0x4dd,0x4ad,0x4c1,0x4ff));continue;}const _0x1c332='检测到服装\x20\x22'+_0x2d98c5+'\x22\x20有\x20'+_0x1534ae+_0xb80c86(0x72,0xc4,0x22,-0xba),_0x5c6a16=await stylishConfirm(_0x1c332);if(!_0x5c6a16)continue;for(const _0x424275 in _0x512bec){_0x57e641[_0x424275]&&(_0x12ed6c[_0x424275]=_0x57e641[_0x424275]);}console['log'](_0x4a9bf3(0x538,0x5bc,0x5ca,0x65e)+_0x4a9bf3(0x4bb,0x53c,0x466,0x5a2)+_0xb80c86(-0x18,0x9b,0x4,-0x9)+_0x4a9bf3(0x4e0,0x473,0x475,0x4db)+_0x2d98c5+'\x22');}else _0x1f0fb1['wLQDG'](_0x43ffbd,_0x147f09);}else{const _0x3ce481='检测到新服装\x20\x22'+_0x2d98c5+_0x4a9bf3(0x3e0,0x4b1,0x4ce,0x3ee),_0x4e9247=await _0x1f0fb1[_0xb80c86(-0x20,0x36,0x91,0x16b)](stylishConfirm,_0x3ce481);if(!_0x4e9247){if(_0x1f0fb1[_0xb80c86(-0x23,0x56,0x84,0x2a)](_0x1f0fb1[_0xb80c86(0xb1,0xaa,0x7a,0x67)],_0x4a9bf3(0x396,0x47e,0x51a,0x470))){const _0x321dc4=_0x1f0fb1[_0x4a9bf3(0x4f8,0x59b,0x652,0x592)](typeof _0x1a5eb9,_0x1f0fb1[_0xb80c86(0x56,-0x1,0xc,-0x7f)])?_0x252680:_0x5215df[_0xb80c86(-0x153,0xa,-0x83,-0x70)],_0x59c0b4=_0x1f0fb1[_0x4a9bf3(0x622,0x626,0x6a5,0x5bd)](typeof _0x314692,_0xb80c86(-0xf3,0x7c,-0x2c,0x50))&&_0x2009f8[_0x4a9bf3(0x64b,0x61d,0x616,0x65f)]?_0x39ef13['name']:''+_0x36c328+_0x1f0fb1[_0x4a9bf3(0x63b,0x629,0x547,0x57c)](_0x353552,-0x1*-0x1cca+-0x2c5+0x9*-0x2e4),_0x5a55e1={};_0x5a55e1[_0xb80c86(0xb6,0xda,-0x11,0x29)]=_0x1f0fb1[_0x4a9bf3(0x5d4,0x531,0x5ae,0x5cb)],_0x5a55e1[_0x4a9bf3(0x6c6,0x64c,0x56c,0x669)]='['+_0x59c0b4+']',_0x1ca450[_0xb80c86(-0xa7,-0xef,-0xe4,-0x13c)](_0x5a55e1);let _0x3ab1a3=_0x321dc4;!_0x321dc4[_0xb80c86(0xb4,0x8c,0x31,0xe5)](_0x1f0fb1['fXFjB'])&&(_0x3ab1a3=_0x4a9bf3(0x3f7,0x4a3,0x53b,0x4a6)+_0x4a9bf3(0x576,0x54b,0x5af,0x540)+'4,'+_0x321dc4);const _0x6cfba1={};_0x6cfba1['type']=_0x1f0fb1['mYAaW'],_0x6cfba1[_0xb80c86(0x3,-0xc0,-0x50,0x50)]={},_0x6cfba1[_0xb80c86(0x3,-0xc0,-0x50,0x50)][_0x4a9bf3(0x5cc,0x5af,0x4d7,0x619)]=_0x3ab1a3,_0x6cfba1[_0xb80c86(0x3,-0xc0,-0x50,0x50)][_0xb80c86(-0x8d,-0xb6,0x18,0xa3)]=_0x1f0fb1[_0xb80c86(-0xe1,-0x1ad,-0xff,-0x1b)],_0x9f8d09['push'](_0x6cfba1);}else continue;}!_0x402d67[_0xb80c86(-0x50,-0x40,-0x43,-0xd8)+_0xb80c86(-0x95,-0x61,-0x39,-0xe6)]&&(_0x402d67['outfitPres'+_0x4a9bf3(0x5e3,0x542,0x4dd,0x5b7)]={});const _0x463859={};_0x463859[_0x4a9bf3(0x47a,0x4ce,0x521,0x5aa)]=_0x57e641[_0xb80c86(-0xe9,-0x2e,-0xad,-0x10e)],_0x463859[_0x4a9bf3(0x50e,0x5e1,0x5db,0x580)]=_0x57e641[_0xb80c86(0x130,0x1a,0x66,-0x7f)]||'',_0x463859['owner']=_0x57e641[_0x4a9bf3(0x501,0x564,0x55d,0x549)]||'',_0x463859[_0x4a9bf3(0x618,0x54e,0x46a,0x62d)]=_0x57e641[_0x4a9bf3(0x5e0,0x54e,0x46e,0x48d)]||'',_0x463859[_0xb80c86(-0x69,-0x1b,-0x8f,0x5d)+'ack']=_0x57e641[_0xb80c86(0x21,-0xf5,-0x8f,0x42)+'ack']||'',_0x463859[_0x4a9bf3(0x5c6,0x5fc,0x6bd,0x542)]=_0x57e641['fullBody']||'',_0x463859[_0xb80c86(-0x6d,0x9c,0xd,0x29)+'ck']=_0x57e641[_0xb80c86(-0x14,0x8e,0xd,-0x7c)+'ck']||'',_0x402d67[_0x4a9bf3(0x5ea,0x538,0x450,0x599)+_0xb80c86(0x21,0x58,-0x39,-0x2)][_0x2d98c5]=_0x463859,console[_0x4a9bf3(0x526,0x544,0x58b,0x5e1)](_0xb80c86(0xab,-0x41,0x41,0x83)+_0xb80c86(-0x43,-0x7,-0x3f,-0x37)+_0xb80c86(0xb0,0xc5,0xaf,0x188)+_0x4a9bf3(0x3b9,0x473,0x39a,0x40d)+_0x2d98c5+'\x22');if(_0x57e641[_0xb80c86(-0x5d,0x14,-0x17,-0x73)]&&_0x57e641[_0x4a9bf3(0x4d4,0x564,0x4af,0x63d)]['trim']()){const _0x1a12d8=_0x57e641[_0x4a9bf3(0x5ac,0x564,0x476,0x625)]['trim']()[_0xb80c86(-0x63,-0x78,-0x61,-0x95)+'e']()[_0xb80c86(-0xaa,-0x12a,-0xfc,-0x1bb)](/\s+/g,'');for(const [_0x21ff5b,_0x2bf26f]of Object[_0xb80c86(-0x104,-0xdd,-0xdc,-0x10f)](_0x402d67[_0xb80c86(-0xe,-0x2a,-0x85,-0xb4)+'resets']||{})){if(_0x1f0fb1[_0x4a9bf3(0x560,0x4de,0x50b,0x480)]!==_0x1f0fb1['NkIhM']){if(_0x2bf26f[_0xb80c86(0xdf,-0x88,0x66,0xff)]&&_0x1f0fb1[_0x4a9bf3(0x423,0x4b3,0x595,0x52f)](_0x2bf26f[_0x4a9bf3(0x521,0x5e1,0x6be,0x65c)][_0x4a9bf3(0x4b2,0x51a,0x557,0x490)+'e']()['replace'](/\s+/g,''),_0x1a12d8)){if(_0x1f0fb1[_0x4a9bf3(0x645,0x626,0x69c,0x6d6)]('IpgGx','IpgGx')){!_0x2bf26f['outfits']&&(_0x2bf26f['outfits']=[]);!_0x2bf26f['outfits'][_0x4a9bf3(0x4ca,0x559,0x4a9,0x4dc)](_0x2d98c5)&&(_0x2bf26f[_0xb80c86(0x31,0x11d,0x82,0x13)][_0xb80c86(-0x2c,-0x57,-0xe4,-0xdc)](_0x2d98c5),console[_0xb80c86(-0x18,-0xa7,-0x37,-0x98)](_0x4a9bf3(0x5f4,0x5bc,0x61e,0x54c)+_0xb80c86(-0x7e,0x3d,-0x3f,-0xb2)+_0xb80c86(0x7e,0x90,-0xe,0xda)+_0x2d98c5+'\x22\x20已归属到角色\x20\x22'+_0x21ff5b+'\x22'));break;}else{const _0x57ee65=_0xa32713?function(){function _0x3d506a(_0x4e1e35,_0x4310e0,_0x181ca3,_0x25d89b){return _0x4a9bf3(_0x4e1e35-0x1cb,_0x25d89b- -0x616,_0x181ca3-0x11e,_0x181ca3);}if(_0x93ecb6){const _0x46ef8a=_0x2d7b97[_0x3d506a(-0x20d,-0x6b,-0x116,-0x137)](_0xcc14a2,arguments);return _0x1c4a87=null,_0x46ef8a;}}:function(){};return _0x4593ef=![],_0x57ee65;}}}else{if(_0x1f0fb1[_0xb80c86(0xc6,0x104,0x84,0xb3)](_0x3a9b4f['id'],_0x5c5119))return;_0x18ceb4[_0xb80c86(-0xd7,-0x133,-0x63,-0x2f)+_0xb80c86(0x7,0x38,-0x5a,-0x124)](_0x5177de['LLM_CHAR_M'+_0xb80c86(-0x1a3,0x0,-0xd5,-0xbc)+'PROMPT_RES'+_0xb80c86(0x1c,-0x15f,-0xb8,-0xa6)],_0x1892dd),_0x1f0fb1[_0xb80c86(-0x3e,-0x98,0x11,0x2b)](_0x3488ed,_0xae72d9[_0xb80c86(0x86,-0xf,0x4b,0x5e)]);}}}}}_0x1f0fb1['qOGWr'](saveSettingsDebounced);const _0x67289b=_0x1f0fb1['vsQDl']($,_0x1f0fb1[_0x4a9bf3(0x3cf,0x4bb,0x3d2,0x595)]);_0x67289b['length']&&_0x1f0fb1[_0xb80c86(-0x86,-0x13c,-0xbe,-0xe9)](refreshCharacterSettings,_0x67289b);}function updateFormFields(_0x312148){function _0x1e68b4(_0x305c3f,_0x242c34,_0xad2277,_0x19af63){return _0x359b09(_0xad2277-0x236,_0x242c34-0x133,_0xad2277-0x54,_0x242c34);}const _0x15cbbe={'vshXS':function(_0xe41fe5,_0x21e642){return _0xe41fe5!==_0x21e642;},'Qtvct':_0x1e68b4(0x1dc,0x81,0x138,0xd8),'MHEBI':function(_0x5c3683,_0x46f741){return _0x5c3683(_0x46f741);},'IHnOw':'input','CGHzX':'nameCN','PmbyG':'nameEN','ldPTz':_0x380c36(0x2b8,0x32b,0x268,0x2a1)+_0x380c36(0x235,0x215,0x2ee,0x14d),'WvyRa':'facialFeat'+_0x380c36(0x22d,0x26e,0x1f0,0x1bc),'KhbZk':_0x1e68b4(0x111,0xa6,0xe8,0x1b2)+_0x1e68b4(0x1ee,0x286,0x1a0,0x286),'LlEQk':_0x380c36(0x238,0x1d6,0x1db,0x21b)+_0x380c36(0x1b0,0x188,0x273,0x231),'LpCzO':'fullBodySF'+'W','ekPGF':_0x1e68b4(0x1d5,0x25a,0x1ca,0x1a9)+_0x1e68b4(0x62,0x1b4,0x100,0x19d),'DGVhW':_0x380c36(0x149,0x1bf,0x209,0x1bd)+_0x380c36(0x2d3,0x28a,0x375,0x374),'wmHzA':_0x380c36(0xf5,0x1bf,0x138,0x22a)+_0x1e68b4(0x93,0x191,0x154,0x1b2)},_0x2449c2=[_0x15cbbe['CGHzX'],_0x15cbbe[_0x380c36(0x291,0x200,0x298,0x2ee)],_0x15cbbe['ldPTz'],_0x15cbbe[_0x1e68b4(0x15f,0xcc,0x108,0xec)],_0x15cbbe[_0x380c36(0x1ff,0x2db,0x276,0x30e)],_0x1e68b4(0xa6,0x116,0xe5,0x18f)+'FW',_0x15cbbe[_0x380c36(0x267,0x30a,0x35e,0x229)],_0x15cbbe['LpCzO'],_0x15cbbe[_0x1e68b4(0x14a,0x246,0x239,0x170)],_0x15cbbe[_0x380c36(0x1f6,0x24c,0x327,0x1a1)],_0x15cbbe[_0x380c36(0x33e,0x27b,0x1a0,0x2e0)],_0x380c36(0x203,0x240,0x17b,0x28b)+'FW',_0x1e68b4(0x6a,0x1c5,0x14f,0x133)+_0x1e68b4(-0x1,0x151,0x97,0x12e)];function _0x380c36(_0x42de3a,_0x20afb3,_0x9e48ff,_0x83a463){return _0x359b09(_0x20afb3-0x327,_0x20afb3-0x1b7,_0x9e48ff-0x1e1,_0x83a463);}_0x2449c2[_0x1e68b4(0x30a,0x17c,0x231,0x2b6)](_0x154477=>{function _0x448324(_0x25e4c0,_0x53991f,_0x3bd6ee,_0x570d3e){return _0x1e68b4(_0x25e4c0-0x3a,_0x25e4c0,_0x570d3e-0x16a,_0x570d3e-0x15c);}function _0x18786c(_0x14a761,_0x1fcd2d,_0x30843f,_0x4defb7){return _0x380c36(_0x14a761-0x1bf,_0x14a761- -0x17a,_0x30843f-0x68,_0x30843f);}if(_0x312148[_0x154477]){const _0x248ccf=document[_0x18786c(0x5b,0xdf,0x140,0xe3)+_0x448324(0x33f,0x2fc,0x2f6,0x2ec)]('char_'+_0x154477);if(_0x248ccf){if(_0x15cbbe[_0x448324(0x30c,0x277,0x161,0x24a)](_0x15cbbe[_0x18786c(0xbe,0x163,-0x13,-0x28)],'cDnzg')){const _0x335ab1={};_0x335ab1[_0x18786c(0xde,0x131,0x177,0xd0)]=_0x448324(0x219,0x2a6,0x1a6,0x219),_0x335ab1[_0x448324(0x27c,0x3f2,0x274,0x32f)]=_0x5f42f1,_0x335ab1[_0x18786c(-0x4,-0x27,-0x2f,0x9a)]=_0x1443dd,_0x335ab1[_0x448324(0x14b,0x2d2,0x150,0x205)+_0x18786c(0x55,-0x3b,0x75,0xce)]=[],_0x4ffca3[_0x448324(0x1e4,0x2ca,0x2cd,0x1fe)](_0x335ab1);}else _0x248ccf[_0x448324(0x357,0x3a7,0x3cb,0x2ea)]=_0x312148[_0x154477],_0x15cbbe[_0x18786c(0x12a,0x9b,0x67,0x1cd)]($,_0x248ccf)[_0x448324(0x16d,0x305,0x209,0x217)](_0x15cbbe[_0x448324(0x420,0x34e,0x3b3,0x35f)]);}}});}