(function(_0x3bf38e,_0x2756c2){function _0x4395c1(_0x56be2c,_0x190055,_0x450663,_0x4d2b88){return _0xfdee(_0x56be2c- -0x10a,_0x190055);}function _0x357d20(_0x1b5850,_0x5745f6,_0x3edc47,_0x15a1bb){return _0xfdee(_0x5745f6-0x4c,_0x15a1bb);}const _0x1d89f4=_0x3bf38e();while(!![]){try{const _0x18bae1=-parseInt(_0x4395c1(-0x21,0x42,-0x46,-0xac))/(0x14a0+-0x1*0x19cf+0x14c*0x4)*(-parseInt(_0x357d20(0x1e7,0x136,0xaa,0x82))/(0x19c5+0x7*-0x3c1+0x84))+-parseInt(_0x4395c1(0x179,0x1f1,0x24e,0x1dd))/(0x1589*0x1+0x7d*-0x33+-0x5*-0xad)+parseInt(_0x357d20(0x1c8,0x21e,0x191,0x26b))/(-0x2700+-0x394+0x8*0x553)*(-parseInt(_0x4395c1(0x12d,0x11b,0x15c,0x16c))/(-0x18*0x12c+-0xece*-0x2+0x4b*-0x5))+parseInt(_0x4395c1(0x15e,0x15c,0x130,0x164))/(0x18f1+0x19*-0x99+-0x9fa)*(parseInt(_0x357d20(0x1c1,0x22a,0x20a,0x2e7))/(-0x359+0x1dd5*-0x1+-0x2135*-0x1))+parseInt(_0x357d20(0x131,0x172,0xde,0x9f))/(0x1*0x1a6e+0x38*0x46+-0x29b6)+-parseInt(_0x4395c1(0xad,0x77,-0x12,0x129))/(0x132b*0x2+-0x27*0xed+0x1*-0x232)*(parseInt(_0x4395c1(0xee,0x198,0x5a,0x139))/(-0x11*0xb3+0xb49+0xa4))+parseInt(_0x357d20(0x1a6,0x144,0xf1,0xcc))/(-0x8a1*-0x1+-0x452*-0x8+0x7*-0x62a)*(parseInt(_0x357d20(0x17b,0x17e,0xdc,0x259))/(-0x1090+-0x2c4*-0x1+-0x1*-0xdd8));if(_0x18bae1===_0x2756c2)break;else _0x1d89f4['push'](_0x1d89f4['shift']());}catch(_0x37af31){_0x1d89f4['push'](_0x1d89f4['shift']());}}}(_0x2418,0xaa102+-0x45999+0x1df48));const _0x2b79a0=(function(){const _0x4087ed={};_0x4087ed['nuihm']='character',_0x4087ed[_0xf40e21(0x3b,-0x65,-0x1d,-0xf1)]=function(_0x1c3d8f,_0x214bad){return _0x1c3d8f===_0x214bad;};function _0xf40e21(_0x5aa6a2,_0x2aa61d,_0x36891a,_0x26fb13){return _0xfdee(_0x36891a- -0x139,_0x5aa6a2);}_0x4087ed[_0xf73859(0x488,0x3b2,0x4ea,0x419)]=_0xf73859(0x3f0,0x4ab,0x34b,0x4cc),_0x4087ed[_0xf40e21(-0x9,-0x10,0x36,-0xa4)]=function(_0x52f561,_0x17f470){return _0x52f561!==_0x17f470;},_0x4087ed[_0xf40e21(-0xbf,0x6b,-0x40,-0x114)]=_0xf40e21(-0xb3,-0x8d,-0x43,-0x36);function _0xf73859(_0x40c72c,_0x39811d,_0x4e2c58,_0x1a98f3){return _0xfdee(_0x40c72c-0x28b,_0x39811d);}const _0x31a0ea=_0x4087ed;let _0x3a193c=!![];return function(_0x5369ba,_0x1a7410){function _0x3deae5(_0x578d2c,_0x4791d7,_0x5582c5,_0x315bf5){return _0xf73859(_0x5582c5-0x41,_0x4791d7,_0x5582c5-0xb0,_0x315bf5-0x17c);}function _0x306c2c(_0x5b1f4c,_0xe4dd41,_0x59b6ee,_0x1ad9ec){return _0xf40e21(_0xe4dd41,_0xe4dd41-0xce,_0x1ad9ec-0x126,_0x1ad9ec-0x192);}if(_0x31a0ea['Zhafk'](_0x31a0ea['RWtIY'],_0x31a0ea[_0x3deae5(0x37e,0x315,0x3c5,0x3a2)])){const _0x3e6342={};_0x3e6342[_0x306c2c(0x15b,0x176,0x165,0x133)]=_0x31a0ea[_0x3deae5(0x393,0x481,0x3d2,0x3f4)],_0x3e6342['data']=_0x3dfaab,_0x3e6342[_0x3deae5(0x5c8,0x5d5,0x565,0x4f8)]=_0x304d34,_0x3e6342[_0x3deae5(0x630,0x540,0x568,0x4f3)+_0x306c2c(0x235,0x198,0x241,0x181)]=[],_0x13aae9[_0x3deae5(0x5a0,0x592,0x564,0x538)](_0x3e6342);}else{const _0x2038fc=_0x3a193c?function(){function _0x12c29c(_0x58eec7,_0x37f4b0,_0x120f8e,_0x3a781c){return _0x3deae5(_0x58eec7-0x107,_0x120f8e,_0x37f4b0-0xdb,_0x3a781c-0xa1);}function _0xe77e6f(_0x5d6695,_0x1a426d,_0x2b0908,_0x5611e8){return _0x306c2c(_0x5d6695-0x1cd,_0x2b0908,_0x2b0908-0xd9,_0x1a426d- -0x309);}if(_0x1a7410){if(_0x31a0ea[_0x12c29c(0x434,0x4c3,0x522,0x3f5)](_0x31a0ea[_0xe77e6f(-0x1d0,-0x11f,-0xbd,-0x82)],_0x31a0ea[_0xe77e6f(-0xa9,-0x11f,-0xb4,-0x146)])){const _0x5c9db4=_0x1a7410[_0x12c29c(0x4d1,0x523,0x458,0x4c6)](_0x5369ba,arguments);return _0x1a7410=null,_0x5c9db4;}else _0x43a967?_0x30d7b4[_0xe77e6f(-0x96,-0x80,-0x126,-0x97)+_0x12c29c(0x59b,0x53b,0x581,0x488)][_0x12c29c(0x5af,0x63f,0x675,0x655)](_0x3182b8['data']):_0x518fe3[_0xe77e6f(-0x71,-0x84,-0x67,-0x29)](_0x28cf45['data']);}}:function(){};return _0x3a193c=![],_0x2038fc;}};}()),_0x5cce68=_0x2b79a0(this,function(){const _0x5642a4={};_0x5642a4[_0x2f40a5(0x302,0x291,0x293,0x264)]=_0x1e520c(0x3bd,0x32d,0x322,0x303)+'+$';function _0x1e520c(_0x17bec7,_0x167f98,_0x231617,_0x2b0d33){return _0xfdee(_0x17bec7-0x19f,_0x2b0d33);}function _0x2f40a5(_0x5293ff,_0x1205ae,_0x23e332,_0x33c6d3){return _0xfdee(_0x1205ae-0x92,_0x5293ff);}const _0x16c003=_0x5642a4;return _0x5cce68[_0x1e520c(0x347,0x3db,0x33e,0x3c8)]()['search'](_0x16c003[_0x2f40a5(0x284,0x291,0x277,0x289)])[_0x2f40a5(0x2e2,0x23a,0x234,0x236)]()[_0x2f40a5(0x1be,0x24e,0x320,0x291)+'r'](_0x5cce68)['search'](_0x16c003['sSEhW']);});_0x5cce68();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x4af978}from'./promptProcessor.js';function replacePlaceholder(_0x4bb3cf,_0x1a6cfe,_0x44f87e,_0x367fc7){const _0x51d6a7={'ImMKK':_0x57bbc9(-0x2f7,-0x28e,-0x283,-0x2ff)+'时','ipiTU':function(_0x46e45f,_0x49edb5,_0x38d0e6){return _0x46e45f(_0x49edb5,_0x38d0e6);},'rgBSL':'text','uUgBr':function(_0x25ca8a,_0x12b78c){return _0x25ca8a!==_0x12b78c;},'pSkBV':_0x57bbc9(-0x1cb,-0x2fb,-0x246,-0x2a9),'FCVNO':function(_0xb84554,_0x980ecf){return _0xb84554===_0x980ecf;},'lhjhn':'HVjpc','jOUWw':function(_0x458f36,_0x274a63){return _0x458f36===_0x274a63;},'hjBTn':'object','ioNkw':_0x4db726(0x63,0x44,0x10,0xb0),'kqDoh':function(_0x46b73b,_0x332910,_0x4f84f8,_0x2310fe,_0x172785){return _0x46b73b(_0x332910,_0x4f84f8,_0x2310fe,_0x172785);}};function _0x57bbc9(_0x2c07b3,_0x8bec25,_0x1edae7,_0x4731e1){return _0xfdee(_0x1edae7- -0x38a,_0x2c07b3);}function _0x4db726(_0x2db7c6,_0x3b83a4,_0x5de4cd,_0x3a8065){return _0xfdee(_0x3a8065- -0x66,_0x5de4cd);}if(typeof _0x4bb3cf===_0x4db726(0x26c,0x1f0,0x174,0x231)){if(_0x51d6a7['uUgBr'](_0x51d6a7[_0x57bbc9(-0x213,-0x135,-0x19b,-0xf1)],_0x51d6a7[_0x57bbc9(-0x257,-0x116,-0x19b,-0x250)])){const _0x151af9={'pTjEB':function(_0xfdac79,_0x2758da){return _0xfdac79(_0x2758da);},'FkaFM':_0x51d6a7[_0x4db726(0xda,-0x9,0x10e,0xba)],'sPuNz':function(_0x26a76f){return _0x26a76f();},'SOAtw':function(_0x47d578,_0x360e6b,_0x490d67){function _0x5363ea(_0x5ca31a,_0xae8259,_0x34d8f0,_0x13bd76){return _0x4db726(_0x5ca31a-0x11c,_0xae8259-0x1d0,_0x5ca31a,_0x13bd76-0x313);}return _0x51d6a7[_0x5363ea(0x584,0x4e5,0x51d,0x522)](_0x47d578,_0x360e6b,_0x490d67);}};return new _0x39bd02((_0x1322e1,_0x508062)=>{function _0x2accd3(_0x2af9e8,_0x244105,_0x4dfe57,_0x3f4a43){return _0x4db726(_0x2af9e8-0x135,_0x244105-0x67,_0x4dfe57,_0x244105-0x2d6);}function _0x308a0e(_0x62a16e,_0x4fe152,_0x4f0629,_0x49ef71){return _0x4db726(_0x62a16e-0x120,_0x4fe152-0x109,_0x4f0629,_0x62a16e-0x26f);}const _0x2d368d=_0x151af9['sPuNz'](_0x11ea61);_0x1055a2[_0x308a0e(0x3aa,0x383,0x3ff,0x329)](_0x308a0e(0x428,0x476,0x443,0x44c)+_0x2accd3(0x42a,0x4fb,0x590,0x47c)+_0x308a0e(0x341,0x2a5,0x34b,0x31c)+_0x2accd3(0x3ae,0x40f,0x358,0x365)+_0x308a0e(0x3d7,0x366,0x44b,0x34f)+_0x2accd3(0x49b,0x454,0x3b7,0x479)+_0x2d368d+')');const _0x530204=_0x52f71f=>{if(_0x52f71f['id']!==_0x2d368d)return;function _0x5390cb(_0x39b41f,_0x4ad5f1,_0x2c535a,_0x189fb6){return _0x308a0e(_0x4ad5f1- -0x79,_0x4ad5f1-0x131,_0x2c535a,_0x189fb6-0x1b0);}_0x559c5a['removeList'+_0x5390cb(0x2cf,0x344,0x3ef,0x3d1)](_0x144264[_0x5390cb(0x248,0x299,0x1f9,0x29d)+'ODIFY_GET_'+_0x17a5e7(0x180,0x8,0x170,0xae)+'PONSE'],_0x530204);function _0x17a5e7(_0x9eced6,_0x345013,_0x4e34c7,_0x67ea2b){return _0x2accd3(_0x9eced6-0x8d,_0x67ea2b- -0x3c5,_0x9eced6,_0x67ea2b-0x66);}_0x151af9[_0x5390cb(0x3ab,0x40e,0x40c,0x3b7)](_0x1322e1,_0x52f71f['prompt']);};_0x469629['on'](_0x1c97dc[_0x2accd3(0x3fd,0x379,0x3e4,0x361)+_0x2accd3(0x46c,0x3ac,0x3b4,0x475)+'PROMPT_RES'+_0x2accd3(0x2eb,0x37f,0x333,0x2cc)],_0x530204);const _0x202ffd={};_0x202ffd['id']=_0x2d368d,_0x262098['emit'](_0x52e5c7[_0x2accd3(0x2d1,0x379,0x2ca,0x43c)+_0x308a0e(0x345,0x33e,0x2fe,0x286)+'PROMPT_REQ'+'UEST'],_0x202ffd),_0x151af9['SOAtw'](_0xbd3826,()=>{function _0x4e1f9f(_0x4e817f,_0x313078,_0xcf0ab1,_0x4dcea2){return _0x308a0e(_0xcf0ab1-0xdd,_0x313078-0x1c7,_0x4e817f,_0x4dcea2-0x35);}function _0x430aff(_0x431886,_0x2a9774,_0x5e1d10,_0x4fcd54){return _0x308a0e(_0x4fcd54- -0x17,_0x2a9774-0x169,_0x2a9774,_0x4fcd54-0x194);}_0x60e205[_0x4e1f9f(0x587,0x604,0x528,0x594)+_0x430aff(0x324,0x43e,0x353,0x3a6)](_0x27d120[_0x4e1f9f(0x47e,0x392,0x3ef,0x422)+_0x4e1f9f(0x44e,0x476,0x422,0x4ba)+_0x430aff(0x3cc,0x493,0x3bc,0x3f5)+'PONSE'],_0x530204),_0x151af9['pTjEB'](_0x508062,new _0x41dcd0(_0x151af9[_0x4e1f9f(0x4ae,0x4eb,0x55f,0x4a0)]));},-0x3366+0x441f+0x1*0x1657);});}else{if(_0x44f87e&&_0x4bb3cf[_0x57bbc9(-0x1bc,-0x281,-0x1cb,-0x19d)](_0x1a6cfe)){if(_0x51d6a7[_0x4db726(0x213,0x20f,0x171,0x234)](_0x51d6a7['lhjhn'],_0x57bbc9(-0xc6,-0x145,-0x134,-0x111)))_0x367fc7&&_0x367fc7[_0x4db726(0x297,0x165,0x237,0x1c0)](_0x1a6cfe);else{const _0x21e992={};_0x21e992[_0x4db726(0x51,0x33,0xab,0xe0)]=_0x51d6a7['rgBSL'],_0x21e992[_0x4db726(0x152,0xb5,0x211,0x166)]=_0x21115d[_0x4db726(0xa5,0x226,0x99,0x150)],_0x438f36[_0x57bbc9(-0x154,-0xae,-0xf2,-0xe1)](_0x21e992);}}return _0x4bb3cf[_0x4db726(0x1f0,0x169,0x1a3,0x174)](_0x1a6cfe,_0x44f87e);}}if(Array[_0x57bbc9(-0x273,-0x205,-0x1ae,-0x14a)](_0x4bb3cf))return _0x4bb3cf[_0x4db726(0x26c,0x262,0x19f,0x1b3)](_0x3f36ba=>replacePlaceholder(_0x3f36ba,_0x1a6cfe,_0x44f87e,_0x367fc7));if(_0x4bb3cf&&_0x51d6a7[_0x57bbc9(-0x8f,-0x1e6,-0x166,-0x12d)](typeof _0x4bb3cf,_0x51d6a7[_0x4db726(0x1ee,0x16e,0x156,0x1a2)])){if(_0x51d6a7[_0x4db726(0x115,0x1e8,0x23c,0x1be)](_0x51d6a7[_0x57bbc9(-0x1f1,-0x1f4,-0x194,-0x152)],_0x51d6a7[_0x57bbc9(-0x1cf,-0x1d9,-0x194,-0x1f0)])){const _0x19a5cf={};for(const _0x2b2ac1 in _0x4bb3cf){_0x19a5cf[_0x2b2ac1]=_0x51d6a7[_0x4db726(0x16c,0x1d5,0x1f8,0x138)](replacePlaceholder,_0x4bb3cf[_0x2b2ac1],_0x1a6cfe,_0x44f87e,_0x367fc7);}return _0x19a5cf;}else _0xddaceb(_0x323f09);}return _0x4bb3cf;}function attachImagesToMessage(_0x54fa1d,_0x2b495c,_0x23bba2,_0x2e8087='参考图片'){const _0x4cf962={};_0x4cf962['rtzqz']=_0x298e6e(0x43d,0x43d,0x4ef,0x488),_0x4cf962['UwCcH']=function(_0x309b29,_0x2bbea3){return _0x309b29===_0x2bbea3;},_0x4cf962[_0x4a33dc(0x5d6,0x5b0,0x543,0x4fd)]=_0x4a33dc(0x3cb,0x349,0x44a,0x3c1),_0x4cf962['myzXQ']=function(_0x4c18aa,_0x1f20ae){return _0x4c18aa+_0x1f20ae;},_0x4cf962[_0x4a33dc(0x4c8,0x494,0x43c,0x4eb)]='text',_0x4cf962[_0x4a33dc(0x3b3,0x4c2,0x4e9,0x482)]='data:',_0x4cf962[_0x4a33dc(0x44c,0x42e,0x3d0,0x447)]=_0x298e6e(0x2d6,0x271,0x300,0x33a),_0x4cf962[_0x298e6e(0x44f,0x4cc,0x390,0x42b)]=function(_0x18281e,_0xf1d7d2){return _0x18281e===_0xf1d7d2;},_0x4cf962[_0x4a33dc(0x428,0x48d,0x471,0x490)]=function(_0x22117d,_0x577561){return _0x22117d>=_0x577561;},_0x4cf962[_0x298e6e(0x51f,0x446,0x400,0x45f)]=function(_0x513d8f,_0x29edce){return _0x513d8f===_0x29edce;};function _0x298e6e(_0x47eafa,_0x530c48,_0x2a098b,_0x5f40b3){return _0xfdee(_0x5f40b3-0x1f1,_0x47eafa);}_0x4cf962[_0x4a33dc(0x3f8,0x3c6,0x45f,0x46d)]=function(_0x4b0b4c,_0x3d1b99){return _0x4b0b4c===_0x3d1b99;},_0x4cf962['XUnIp']=_0x298e6e(0x3f9,0x3ee,0x513,0x44d),_0x4cf962[_0x4a33dc(0x3ca,0x412,0x4bf,0x427)]=_0x4a33dc(0x57c,0x592,0x5c7,0x500);const _0x5d5ad4=_0x4cf962;if(!_0x23bba2||_0x5d5ad4[_0x298e6e(0x502,0x3a9,0x36d,0x42b)](_0x23bba2[_0x4a33dc(0x40c,0x3d7,0x50b,0x466)],-0x1*0x23b9+-0x1af*-0xb+0x1134)||_0x2b495c<0x256b+0x2152+0x1*-0x46bd||_0x5d5ad4['xaPhi'](_0x2b495c,_0x54fa1d[_0x298e6e(0x2f4,0x2ad,0x2c7,0x387)]))return _0x54fa1d;const _0x18f997=[..._0x54fa1d],_0x582224=_0x18f997[_0x2b495c],_0x2c8348=[];if(_0x5d5ad4[_0x298e6e(0x3f1,0x454,0x4fa,0x45f)](typeof _0x582224[_0x4a33dc(0x42c,0x3f2,0x47a,0x486)],_0x5d5ad4[_0x298e6e(0x377,0x42b,0x348,0x373)])){if(_0x5d5ad4[_0x4a33dc(0x53d,0x521,0x39d,0x46d)](_0x5d5ad4[_0x4a33dc(0x458,0x44c,0x34f,0x42b)],_0x5d5ad4[_0x298e6e(0x378,0x2b1,0x313,0x348)]))return null;else{const _0x26db96={};_0x26db96['type']=_0x5d5ad4['NYoJh'],_0x26db96[_0x298e6e(0x2e9,0x431,0x3ac,0x3bd)]=_0x582224[_0x298e6e(0x429,0x3e0,0x3c5,0x3a7)],_0x2c8348['push'](_0x26db96);}}else Array[_0x4a33dc(0x3de,0x41b,0x496,0x4ac)](_0x582224[_0x4a33dc(0x3d4,0x434,0x4d6,0x486)])&&_0x2c8348[_0x298e6e(0x4d1,0x565,0x3f0,0x489)](..._0x582224['content']);if(_0x23bba2[_0x4a33dc(0x38d,0x398,0x46c,0x466)]>0xc0d+-0x16a*-0xb+-0x1*0x1b9b){const _0xad46f={};_0xad46f[_0x298e6e(0x2aa,0x350,0x401,0x337)]=_0x5d5ad4[_0x298e6e(0x389,0x427,0x3e2,0x40c)],_0xad46f[_0x4a33dc(0x563,0x46b,0x4f2,0x49c)]=_0x4a33dc(0x535,0x530,0x4ac,0x496)+_0x23bba2[_0x298e6e(0x2be,0x3b6,0x3a4,0x387)]+'张'+_0x2e8087+']',_0x2c8348[_0x298e6e(0x4ea,0x3c9,0x4d1,0x489)](_0xad46f);}_0x23bba2[_0x4a33dc(0x463,0x41f,0x4f5,0x4af)]((_0x323d1e,_0xe0e417)=>{function _0x1d9221(_0x437d0d,_0x2ba46a,_0x278370,_0x506bf0){return _0x298e6e(_0x506bf0,_0x2ba46a-0x183,_0x278370-0x86,_0x437d0d-0xe0);}const _0x4ecf7d=typeof _0x323d1e===_0x5d5ad4[_0x1d9221(0x453,0x4ce,0x4fe,0x517)]?_0x323d1e:_0x323d1e[_0xb4a039(-0x1e,-0xf0,0x66,0x1d)],_0x43f58c=_0x5d5ad4[_0x1d9221(0x4ed,0x44f,0x563,0x427)](typeof _0x323d1e,_0x5d5ad4[_0xb4a039(-0x4a,-0x9a,-0x43,0x49)])&&_0x323d1e['name']?_0x323d1e['name']:''+_0x2e8087+_0x5d5ad4[_0xb4a039(-0x75,-0x121,-0x138,-0x5b)](_0xe0e417,-0x1700+-0x1295*-0x1+0x46c),_0x507149={};_0x507149['type']=_0x5d5ad4['NYoJh'],_0x507149['text']='['+_0x43f58c+']',_0x2c8348[_0x1d9221(0x569,0x4c4,0x50a,0x546)](_0x507149);let _0x368286=_0x4ecf7d;!_0x4ecf7d['startsWith'](_0x5d5ad4[_0x1d9221(0x483,0x50f,0x478,0x3b6)])&&(_0x368286='data:image'+_0xb4a039(-0x11,-0xa5,0x20,0x68)+'4,'+_0x4ecf7d);function _0xb4a039(_0x94270e,_0xf6bfd8,_0x223b42,_0x178940){return _0x298e6e(_0x223b42,_0xf6bfd8-0xbd,_0x223b42-0x152,_0x94270e- -0x468);}const _0x19e131={};_0x19e131[_0xb4a039(-0x4c,-0x10a,-0x10b,0x24)]=_0x368286,_0x19e131[_0x1d9221(0x405,0x40d,0x3f1,0x37d)]='auto';const _0xed58f6={};_0xed58f6[_0xb4a039(-0x131,-0x8c,-0x10e,-0x14d)]=_0x5d5ad4[_0xb4a039(-0x100,-0x1af,-0x1b3,-0x173)],_0xed58f6[_0xb4a039(-0x12e,-0x174,-0x1f8,-0x14c)]=_0x19e131,_0x2c8348[_0xb4a039(0x21,0xca,0x44,-0xad)](_0xed58f6);});const _0x52bede={..._0x582224};_0x52bede[_0x4a33dc(0x547,0x52b,0x41c,0x486)]=_0x2c8348,_0x18f997[_0x2b495c]=_0x52bede;function _0x4a33dc(_0x4b4402,_0x3c2923,_0x295849,_0xbc500b){return _0xfdee(_0xbc500b-0x2d0,_0x3c2923);}return _0x18f997;}function findMessageIndexWithPlaceholder(_0x18a037,_0x36056c){function _0x40a281(_0x373da5,_0xc3f0e2,_0x2c94cb,_0x65cd94){return _0xfdee(_0xc3f0e2-0x25,_0x65cd94);}function _0x385293(_0x264df5,_0x5e0570,_0x4eacf1,_0x5c37b5){return _0xfdee(_0x5c37b5-0xe8,_0x264df5);}const _0x4544c9={'qTACQ':'text','jJlMZ':function(_0x56223c,_0x4e5135){return _0x56223c(_0x4e5135);},'bSiQb':_0x385293(0x244,0x1c2,0x2b9,0x275),'BjoPW':function(_0x258747,_0x411c60){return _0x258747<_0x411c60;},'NUgQP':function(_0xa4319,_0x8f1467){return _0xa4319===_0x8f1467;},'jTpgQ':_0x385293(0x2c7,0x407,0x3ec,0x37f),'WOEVf':function(_0x206c42,_0x3103f1){return _0x206c42!==_0x3103f1;},'IQagA':'cbzEc','vyNXO':_0x385293(0x2c1,0x2de,0x319,0x2e8),'lVKgj':_0x40a281(0x1b3,0x155,0x185,0x208)};for(let _0xf13d37=-0x2*-0x263+-0x2*0x54a+0x5ce;_0x4544c9[_0x40a281(0x331,0x2ae,0x265,0x2f5)](_0xf13d37,_0x18a037[_0x385293(0x1b5,0x24e,0x1ba,0x27e)]);_0xf13d37++){const _0x1f17d9=_0x18a037[_0xf13d37];if(_0x4544c9[_0x40a281(0x24f,0x21f,0x269,0x2f0)](typeof _0x1f17d9['content'],_0x4544c9[_0x40a281(0x19f,0x235,0x273,0x1a2)])&&_0x1f17d9[_0x385293(0x32e,0x295,0x240,0x29e)]['includes'](_0x36056c))return _0xf13d37;else{if(Array[_0x385293(0x25f,0x254,0x39b,0x2c4)](_0x1f17d9['content'])){if(_0x4544c9[_0x385293(0x25e,0x287,0x2fb,0x256)](_0x4544c9[_0x40a281(0x17b,0x158,0xaf,0x204)],_0x4544c9[_0x385293(0x12d,0x1ec,0x1d8,0x1e5)]))for(const _0x522c7d of _0x1f17d9[_0x40a281(0x279,0x1db,0x121,0x269)]){if(_0x4544c9[_0x40a281(0x1d0,0x193,0x167,0xef)](_0x4544c9['lVKgj'],_0x40a281(0x145,0x155,0x15f,0xf5))){const _0x4444ba={};_0x4444ba[_0x40a281(0x21b,0x16b,0x1a5,0x1f9)]=_0x4544c9[_0x40a281(0x1ba,0x23c,0x233,0x238)],_0x4444ba[_0x40a281(0x1e6,0x1f1,0x194,0x293)]=_0x40a281(0x1c5,0x1eb,0x255,0x172)+_0x17b4a2['length']+'张'+_0x42cf2e+']',_0xe89f6e[_0x40a281(0x20f,0x2bd,0x36e,0x264)](_0x4444ba);}else{if(_0x522c7d[_0x385293(0x2cb,0x2c4,0x25f,0x22e)]===_0x385293(0x215,0x385,0x228,0x2b4)&&_0x522c7d[_0x40a281(0x1b4,0x1f1,0x189,0x283)]['includes'](_0x36056c))return _0xf13d37;}}else{const _0x15d87d=_0x4544c9[_0x385293(0x1d1,0x324,0x33b,0x282)](_0x11cc01,_0x3fde87);if(_0x15d87d){const _0x2cf543={};_0x2cf543[_0x385293(0x150,0x1d8,0x28f,0x22e)]=_0x4544c9[_0x40a281(0xd7,0x132,0x162,0x17e)],_0x2cf543[_0x385293(0x351,0x2e2,0x3b8,0x317)]=_0x15d87d,_0x2cf543['position']=_0xe5424,_0x2cf543[_0x385293(0x395,0x42d,0x31d,0x384)+_0x385293(0x1d5,0x2a1,0x2fe,0x27c)]=[],_0x5fb72f[_0x40a281(0x2ba,0x2bd,0x238,0x33c)](_0x2cf543);}}}}}return-(-0x17f0+-0x1389+-0x9f*-0x46);}function generateRequestId(){if(crypto&&crypto[_0x3a4bf5(0x62e,0x679,0x6e6,0x6df)])return crypto[_0x1b6783(0x3be,0x328,0x3a4,0x431)]();function _0x1b6783(_0x293df2,_0x29d056,_0x221556,_0x4e7db8){return _0xfdee(_0x293df2-0x161,_0x4e7db8);}function _0x3a4bf5(_0x851f55,_0x534d93,_0x5ba205,_0x1723eb){return _0xfdee(_0x851f55-0x3d1,_0x1723eb);}return Date[_0x1b6783(0x28f,0x236,0x23b,0x273)]()[_0x3a4bf5(0x579,0x5a0,0x63d,0x55f)](0x716+-0x88b+-0x199*-0x1)+Math[_0x3a4bf5(0x5cd,0x649,0x59d,0x674)]()[_0x3a4bf5(0x579,0x5dd,0x54b,0x4d9)](0x1228+0xad2+0x1*-0x1cd6)['substring'](-0x1892+-0x2105+0x3999);}export function LLM_CHAR_MODIFY_GET_PROMPT(){function _0x3ef76e(_0x385d13,_0x497e87,_0x2ac5cc,_0x387a65){return _0xfdee(_0x387a65- -0xc9,_0x2ac5cc);}const _0x48c6d7={'yfJiM':function(_0x2f54e2,_0x1bd67a){return _0x2f54e2!==_0x1bd67a;},'pdtPC':function(_0x18e900,_0x3e0dee){return _0x18e900(_0x3e0dee);},'EahZE':_0x3ef76e(0xb2,0x86,0xef,0x3e)+'时','bWrAL':function(_0x20f728){return _0x20f728();},'JJsUt':function(_0x5972e7,_0x2fd5e6,_0x21607e){return _0x5972e7(_0x2fd5e6,_0x21607e);}};return new Promise((_0x246428,_0x43f939)=>{const _0x14ec12={'GdtGC':function(_0x125be8,_0x19045c){return _0x125be8(_0x19045c);},'udQZI':_0x48c6d7[_0xcadb9c(0xba,0x2d,0x188,-0xc)]},_0x5de7d1=_0x48c6d7['bWrAL'](generateRequestId);console[_0x3e5c1a(0x3ac,0x45e,0x450,0x38e)](_0x3e5c1a(0x517,0x4dc,0x589,0x520)+_0x3e5c1a(0x526,0x548,0x4eb,0x4e3)+_0xcadb9c(0x31,-0xa7,0x45,-0x9b)+'ting\x20char\x20'+_0xcadb9c(0xc7,0x71,0x10d,0x16b)+'mpt\x20(ID:\x20'+_0x5de7d1+')');function _0xcadb9c(_0x28f8a6,_0x18d182,_0x4ad924,_0x49e3b8){return _0x3ef76e(_0x28f8a6-0x163,_0x18d182-0x1c6,_0x18d182,_0x28f8a6- -0x3e);}const _0x3b8fe3=_0x3a9ce5=>{function _0x174f2e(_0x55617c,_0x58ed7e,_0x5ef426,_0x629bf4){return _0xcadb9c(_0x58ed7e- -0x209,_0x5ef426,_0x5ef426-0x30,_0x629bf4-0x2a);}if(_0x48c6d7[_0x174f2e(-0xe2,-0x8f,-0x13b,-0x80)](_0x3a9ce5['id'],_0x5de7d1))return;eventSource['removeList'+_0x210ceb(-0x8c,0x8c,-0x1d,-0x32)](eventNames[_0x174f2e(-0x1e5,-0x207,-0x162,-0x23a)+'ODIFY_GET_'+'PROMPT_RES'+_0x174f2e(-0x28a,-0x201,-0x216,-0x1d1)],_0x3b8fe3);function _0x210ceb(_0x49dec8,_0x23a384,_0xcee76d,_0x2f7d4b){return _0xcadb9c(_0x2f7d4b- -0xdf,_0x23a384,_0xcee76d-0xb5,_0x2f7d4b-0xd4);}_0x48c6d7[_0x174f2e(-0x16a,-0x152,-0x138,-0x169)](_0x246428,_0x3a9ce5[_0x210ceb(-0x87,-0x22,-0x2f,-0x53)]);};eventSource['on'](eventNames['LLM_CHAR_M'+'ODIFY_GET_'+_0x3e5c1a(0x565,0x4c0,0x4ed,0x4f6)+_0xcadb9c(0x8,-0x96,0xd8,0x8b)],_0x3b8fe3);function _0x3e5c1a(_0x238bc9,_0xd88673,_0xeecbb5,_0x71178c){return _0x3ef76e(_0x238bc9-0x183,_0xd88673-0x47,_0x71178c,_0xd88673-0x386);}const _0x41457a={};_0x41457a['id']=_0x5de7d1,eventSource[_0xcadb9c(0x169,0xff,0xde,0x238)](eventNames[_0xcadb9c(0x2,-0x93,-0xce,0xa5)+_0xcadb9c(0x35,0x27,-0x47,0x6d)+'PROMPT_REQ'+_0x3e5c1a(0x4c4,0x496,0x465,0x46e)],_0x41457a),_0x48c6d7['JJsUt'](setTimeout,()=>{function _0x48816e(_0x24a939,_0x5df6cc,_0x47e969,_0x486ab1){return _0x3e5c1a(_0x24a939-0xca,_0x486ab1- -0x2c6,_0x47e969-0xf0,_0x24a939);}eventSource[_0x5b4d5a(-0x13a,-0x20c,-0x10b,-0x217)+'ener'](eventNames[_0x48816e(0x8a,0x9c,0x116,0x100)+_0x48816e(0xa5,0x183,0x195,0x133)+_0x5b4d5a(-0x179,-0xd5,-0x1c6,-0x141)+'PONSE'],_0x3b8fe3);function _0x5b4d5a(_0x1b48f5,_0x2e813b,_0x82652c,_0x31d51b){return _0x3e5c1a(_0x1b48f5-0x10c,_0x1b48f5- -0x639,_0x82652c-0x16f,_0x82652c);}_0x14ec12[_0x48816e(0x168,0xfc,0x1d0,0x183)](_0x43f939,new Error(_0x14ec12[_0x48816e(0x200,0x126,0x191,0x1cc)]));},-0x42de+-0x712+0x7100);});}export function LLM_CHAR_MODIFY(_0x286f33,_0x124954={}){const _0x2fde19={'noGPv':function(_0x191b95,_0x1cd9b6){return _0x191b95(_0x1cd9b6);},'tBWxS':function(_0x374fcc,_0x43fdd9){return _0x374fcc!==_0x43fdd9;},'NkxCi':function(_0x37fe29){return _0x37fe29();},'yRjqJ':_0x84da27(0xe0,0x98,0x100,0x3e),'NUpUN':function(_0x923236,_0x2aadf5){return _0x923236(_0x2aadf5);},'lvjLR':_0x3b4e9e(-0x123,-0x17a,-0x147,-0x19a)+_0x84da27(-0x20,-0xa5,-0x2d,-0xd5),'VronR':function(_0x484837,_0x14d0c3,_0x1fe303){return _0x484837(_0x14d0c3,_0x1fe303);}};function _0x84da27(_0x1e8614,_0x59668b,_0x5b4ee6,_0x937683){return _0xfdee(_0x5b4ee6- -0x154,_0x59668b);}function _0x3b4e9e(_0x259439,_0x59b111,_0x5147b7,_0x2aa44c){return _0xfdee(_0x2aa44c- -0x3d0,_0x259439);}return new Promise((_0x4acaa4,_0x3ed2b7)=>{const _0x5a6969=generateRequestId(),_0x4b9e7c=_0x124954['timeoutMs']||0x5e*0x466+-0x1*0x571f+-0x5bf5;function _0x44e3c0(_0x214f0f,_0x52af3e,_0x1fcdf3,_0x250293){return _0x3b4e9e(_0x52af3e,_0x52af3e-0x46,_0x1fcdf3-0x1c3,_0x1fcdf3-0x2f5);}let _0x480f89=null;console[_0x282a7e(0x4df,0x4a1,0x46f,0x45e)](_0x282a7e(0x4cb,0x51f,0x5dd,0x5cf)+_0x44e3c0(0xf5,0x10c,0x1b0,0x150)+_0x44e3c0(0x236,0x13f,0x177,0xdb)+'ing\x20char\x20m'+_0x44e3c0(0x1b2,0x147,0x1af,0x10c)+_0x44e3c0(0x15c,0x1aa,0xcf,0x78)+_0x44e3c0(0x17e,0x3c,0xa6,0x17c)+_0x5a6969+')');const _0x39bbfa=()=>{function _0x24dbe3(_0x59dfc5,_0x1164c8,_0x498452,_0x2e9b83){return _0x44e3c0(_0x59dfc5-0x16e,_0x2e9b83,_0x498452- -0x23b,_0x2e9b83-0x8d);}eventSource[_0x24dbe3(-0x186,-0x17a,-0xd4,-0xba)+'ener'](eventNames['LLM_CHAR_M'+_0x24dbe3(-0x16d,-0x292,-0x221,-0x264)+'ONSE'],_0x4fdea3);function _0x5de888(_0x6b078c,_0x1980ac,_0x2f6162,_0x44326b){return _0x44e3c0(_0x6b078c-0x83,_0x1980ac,_0x2f6162-0xb2,_0x44326b-0x15);}_0x480f89&&(_0x2fde19[_0x5de888(0x1a1,0x1bb,0x102,0x65)](clearTimeout,_0x480f89),_0x480f89=null);},_0x4fdea3=_0x5697e4=>{if(_0x2fde19[_0x3d5aeb(-0x6f,-0xf6,-0x1c1,-0x147)](_0x5697e4['id'],_0x5a6969))return;function _0x16167f(_0x2f0b6e,_0x4fec84,_0x355317,_0x1ae8ba){return _0x282a7e(_0x2f0b6e,_0x1ae8ba- -0x597,_0x355317-0x79,_0x1ae8ba-0x7a);}_0x2fde19['NkxCi'](_0x39bbfa);function _0x3d5aeb(_0x2385ca,_0x4005a7,_0x54b813,_0x3ad12a){return _0x44e3c0(_0x2385ca-0x16f,_0x2385ca,_0x3ad12a- -0x254,_0x3ad12a-0xe6);}_0x5697e4[_0x16167f(-0xb2,-0x66,0x22,-0x1a)]?_0x4acaa4(_0x5697e4[_0x3d5aeb(-0x1e5,-0xcd,-0x1bb,-0x1a5)]):_0x2fde19[_0x16167f(-0x10a,-0x21e,-0xf3,-0x16c)](_0x3ed2b7,new Error(_0x5697e4[_0x3d5aeb(-0x1c5,-0x22c,-0x182,-0x1a5)]||_0x2fde19[_0x16167f(0x8c,-0xa3,0xc3,-0xa)]));};eventSource['on'](eventNames[_0x282a7e(0x34f,0x409,0x4b1,0x402)+_0x282a7e(0x394,0x3f5,0x3c4,0x364)+_0x44e3c0(0xdc,0xe7,0xa,-0x1c)],_0x4fdea3);const _0x280625={};function _0x282a7e(_0x242670,_0x392874,_0xa58fd,_0x5c6598){return _0x3b4e9e(_0x242670,_0x392874-0x1dd,_0xa58fd-0x175,_0x392874-0x6d0);}_0x280625[_0x282a7e(0x56f,0x493,0x531,0x520)]=_0x286f33,_0x280625['id']=_0x5a6969,eventSource[_0x282a7e(0x57b,0x570,0x573,0x555)](eventNames[_0x44e3c0(-0x9b,-0xf,0x2e,0xfa)+_0x44e3c0(0xd,0xf4,0x5c,0x4b)+'EST'],_0x280625),_0x480f89=_0x2fde19[_0x282a7e(0x4a1,0x56f,0x5fa,0x556)](setTimeout,()=>{function _0x840a0f(_0x4c6770,_0x5e234c,_0x2e2bc1,_0x360d8e){return _0x44e3c0(_0x4c6770-0x8d,_0x5e234c,_0x2e2bc1-0x47b,_0x360d8e-0x11d);}_0x2fde19[_0x48fb36(0x313,0x359,0x2de,0x366)](_0x39bbfa);function _0x48fb36(_0xc26f67,_0x13dd35,_0x22eff6,_0x447d1d){return _0x44e3c0(_0xc26f67-0x114,_0x447d1d,_0xc26f67-0x252,_0x447d1d-0x1c4);}_0x2fde19[_0x48fb36(0x25b,0x2d3,0x228,0x258)](_0x3ed2b7,new Error(_0x2fde19['lvjLR']));},_0x4b9e7c);});}function preprocessTagContent(_0x2d066b){function _0x2631da(_0x40b8f3,_0x3cec28,_0x47c628,_0x4299d9){return _0xfdee(_0x4299d9- -0x68,_0x40b8f3);}const _0x5fc89d={};_0x5fc89d[_0x2631da(0x253,0x119,0xb6,0x17b)]=_0x5f4ee2(0x3f5,0x3d8,0x44a,0x464);function _0x5f4ee2(_0x4f3a5d,_0x5a315e,_0x42fed7,_0x44aad1){return _0xfdee(_0x44aad1-0x253,_0x4f3a5d);}_0x5fc89d[_0x2631da(0x98,0x76,0xa4,0xd9)]=_0x5f4ee2(0x3a6,0x3e2,0x462,0x3ba);const _0x25712b=_0x5fc89d;let _0x30ace5=_0x2d066b['replace'](/:/g,':')[_0x2631da(0x2e9,0x28e,0x298,0x21a)](/,/g,',');return _0x30ace5=_0x30ace5[_0x5f4ee2(0x599,0x4a2,0x53b,0x4d5)](/下半身NSWebcam:/g,_0x25712b[_0x5f4ee2(0x3b1,0x49d,0x50d,0x436)]),_0x30ace5=_0x30ace5[_0x2631da(0x13d,0x1e9,0x251,0x21a)](/下半身NSFW_背面:/g,_0x25712b[_0x5f4ee2(0x3ac,0x3e1,0x4ba,0x436)]),_0x30ace5=_0x30ace5[_0x5f4ee2(0x4f8,0x587,0x3fd,0x4d5)](/上半身NSFW_背面:/g,_0x25712b[_0x2631da(0x19d,0x1b,0x12c,0xd9)]),_0x30ace5;}function parseCharacterData(_0x1eca40){const _0x6d6480={'NFrFz':_0x3dbe4e(0x20c,0x13b,0x17c,0x1c8),'XGOvn':_0x133489(0x1e1,0x1d1,0x128,0x1d2),'emGLx':function(_0x428c6c,_0x4eb8fc,_0x1fb434,_0x48e957,_0x449001){return _0x428c6c(_0x4eb8fc,_0x1fb434,_0x48e957,_0x449001);},'keEMt':_0x133489(0x274,0x1a3,0x269,0x216),'ItnRg':_0x3dbe4e(0x217,0x149,0x14c,0x1f0)+'PromptModi'+'fy]\x20Attach'+'ed','LlYFa':_0x3dbe4e(0xd9,0x115,0x52,0xf1)+_0x3dbe4e(0x18c,0xaf,0x147,0x15)+_0x133489(0x18c,0x224,0x200,0x17c),'cftjY':_0x133489(0x1e9,0x165,0x15f,0x89),'hmrmP':'nameEN','mEWdp':_0x3dbe4e(0xe0,0x76,0x1b,0x81)+_0x133489(0xed,0x16a,0x1c6,0x182),'HocFT':'facialFeat'+'uresBack','gnHNN':_0x3dbe4e(0x18e,0x13e,0xac,0x211)+'FW','DfWfT':_0x133489(0x2a3,0x27e,0x207,0x30a)+_0x133489(0x2ce,0x2ee,0x297,0x2f9),'geeVX':'fullBodySF'+'W','jmlHs':'fullBodySF'+_0x133489(0x250,0x1b2,0x288,0xf4),'kHxkL':_0x3dbe4e(0x194,0x158,0x14b,0x89)+_0x3dbe4e(0xf5,0x17d,0x11c,0xfe),'OWGnA':_0x3dbe4e(0x189,0x158,0xb0,0x205)+'SFWBack','UliET':'fullBodyNS'+_0x133489(0x361,0x2ee,0x231,0x268),'MNjBd':function(_0x477bc6,_0x2611c0){return _0x477bc6===_0x2611c0;},'ZnCZu':_0x133489(0x2fc,0x28a,0x22f,0x2b5),'fbtkl':function(_0x4d5a92,_0x2183c3){return _0x4d5a92===_0x2183c3;},'Zmtav':function(_0x49e87c,_0xe3d689){return _0x49e87c!==_0xe3d689;},'TqCJH':function(_0x991e0b,_0x3f3747){return _0x991e0b&&_0x3f3747;},'BYgJF':function(_0xdd0655,_0x4df5a2){return _0xdd0655===_0x4df5a2;},'dPKVQ':_0x3dbe4e(-0x2d,0x24,-0x4,0xd0),'QDHCr':'[character'+'PromptModi'+_0x133489(0x18a,0x223,0x2e6,0x19e)+'数据:'},_0x49f0bc=_0x1eca40[_0x3dbe4e(0x25c,0x1c8,0x156,0x13b)]('\x0a')[_0x3dbe4e(0x19f,0x143,0x181,0xa0)](_0x46b61b=>_0x46b61b[_0x3dbe4e(0xd4,0x128,0xf0,0x14c)]())[_0x133489(0x333,0x25a,0x29b,0x274)](_0x108b61=>_0x108b61),_0x5a216a={};_0x5a216a[_0x3dbe4e(-0x64,0x25,-0x7c,-0x81)]='',_0x5a216a['nameEN']='',_0x5a216a['characterT'+_0x3dbe4e(0x19d,0x16d,0x1e5,0x163)]='',_0x5a216a['facialFeat'+_0x133489(0x15f,0x16a,0x117,0x179)]='',_0x5a216a['facialFeat'+_0x3dbe4e(-0x5,0x97,0xcc,-0x6)]='';function _0x133489(_0x5d6ae3,_0x5646bb,_0x54da00,_0x1ab55a){return _0xfdee(_0x5646bb-0x6a,_0x54da00);}_0x5a216a[_0x133489(0x280,0x27e,0x31f,0x30b)+'FW']='',_0x5a216a['upperBodyS'+'FWBack']='';function _0x3dbe4e(_0xc0fb0a,_0x2f5adf,_0x55f37d,_0x1ee819){return _0xfdee(_0x2f5adf- -0xd6,_0x1ee819);}_0x5a216a[_0x133489(0x31a,0x2b0,0x2e0,0x205)+'W']='',_0x5a216a[_0x3dbe4e(0x10d,0x170,0x10a,0x1df)+_0x3dbe4e(0x10f,0x72,0xbc,-0x65)]='',_0x5a216a['upperBodyN'+_0x133489(0x387,0x2bd,0x37e,0x305)]='',_0x5a216a[_0x133489(0x373,0x298,0x342,0x1ed)+_0x133489(0x152,0x219,0x287,0x202)]='',_0x5a216a['fullBodyNS'+'FW']='',_0x5a216a[_0x133489(0x114,0x1bc,0x251,0x1e6)+'FWBack']='';const _0x33f852=_0x5a216a,_0x467063={};_0x467063[_0x133489(0x1d5,0x1ee,0x11e,0x211)]=_0x6d6480['cftjY'],_0x467063[_0x133489(0x2f3,0x250,0x242,0x31b)]=_0x6d6480[_0x3dbe4e(0xac,0x111,0x14b,0x37)],_0x467063[_0x133489(0x2e3,0x276,0x244,0x1e1)]='characterT'+_0x133489(0x280,0x2ad,0x336,0x311),_0x467063[_0x133489(0x342,0x274,0x1c0,0x32b)]=_0x6d6480[_0x133489(0x3a4,0x2ff,0x256,0x346)],_0x467063[_0x133489(0x1d3,0x1ff,0x195,0x236)]=_0x6d6480[_0x3dbe4e(0x284,0x1c0,0x201,0x181)],_0x467063[_0x133489(0x1a3,0x1a9,0x1fd,0x27d)]=_0x6d6480[_0x133489(0x89,0x156,0xf6,0x151)],_0x467063[_0x3dbe4e(0xe,0xba,0xf7,0xfc)]=_0x6d6480[_0x3dbe4e(0x17,0x9b,0xce,0xd5)],_0x467063[_0x133489(0x226,0x2aa,0x32c,0x20e)]=_0x6d6480[_0x133489(0x23f,0x2e4,0x36c,0x311)],_0x467063[_0x3dbe4e(0x195,0x10b,0x130,0xc0)]=_0x6d6480[_0x133489(0x20c,0x169,0xcb,0x1a6)],_0x467063[_0x133489(0x1d8,0x26e,0x23b,0x1f4)]=_0x6d6480[_0x133489(0x187,0x15c,0x9e,0x135)],_0x467063[_0x133489(0x224,0x185,0x1cf,0xe5)]=_0x6d6480[_0x133489(0x239,0x254,0x22a,0x28d)],_0x467063['下半身NSFW']=_0x3dbe4e(0x100,0x7c,0x5f,0x6d)+'FW',_0x467063[_0x3dbe4e(0xb5,0x53,-0x35,0xf6)]=_0x6d6480[_0x133489(0x20c,0x29d,0x2e3,0x357)];const _0x1cc3da=_0x467063;for(const _0x2392b3 of _0x49f0bc){if(_0x6d6480['MNjBd'](_0x3dbe4e(0xbd,0x9f,-0x4,0x14d),_0x6d6480[_0x133489(0x2db,0x22c,0x235,0x195)])){let _0x12ebb2=_0x4d69b5[_0x133489(0x312,0x2ec,0x2f6,0x2c2)](/:/g,':')[_0x3dbe4e(0x1ea,0x1ac,0x22c,0x1f0)](/,/g,',');return _0x12ebb2=_0x12ebb2['replace'](/下半身NSWebcam:/g,_0x6d6480[_0x133489(0x18c,0x1c3,0x22b,0x256)]),_0x12ebb2=_0x12ebb2[_0x3dbe4e(0x200,0x1ac,0x1ec,0x12b)](/下半身NSFW_背面:/g,_0x6d6480[_0x3dbe4e(-0x27,0x83,-0x3e,0x13d)]),_0x12ebb2=_0x12ebb2['replace'](/上半身NSFW_背面:/g,_0x6d6480[_0x133489(0x190,0x1a8,0x245,0x20b)]),_0x12ebb2;}else{const _0x437ac2=_0x2392b3[_0x133489(0x2ec,0x2af,0x1d1,0x356)](':');if(_0x6d6480[_0x3dbe4e(0x167,0x193,0x139,0x1ec)](_0x437ac2,-(0x1733*0x1+0x1*-0x23c2+0xc90)))continue;const _0x17a71c=_0x2392b3[_0x133489(0x2a4,0x2e9,0x2c1,0x296)](-0x12bb+0x49*-0x74+0x33cf,_0x437ac2)[_0x133489(0x2b0,0x268,0x212,0x283)](),_0x1b4964=_0x2392b3['substring'](_0x437ac2+(0x6f3+0x244b+-0x2b3d*0x1))[_0x133489(0x278,0x268,0x309,0x32b)]();if(_0x1cc3da[_0x17a71c])_0x6d6480['Zmtav'](_0x133489(0x264,0x2c9,0x342,0x1f1),_0x133489(0x20c,0x2c9,0x346,0x382))?_0x1c1836[_0x133489(0x27a,0x1e5,0x13b,0x2a0)+_0x133489(0xcc,0x15d,0x155,0x229)]={}:_0x33f852[_0x1cc3da[_0x17a71c]]=_0x1b4964;else _0x6d6480[_0x3dbe4e(0x41,0x3f,0x8b,-0x21)](_0x17a71c,_0x1b4964)&&(_0x6d6480[_0x133489(0x311,0x234,0x203,0x22e)](_0x6d6480[_0x3dbe4e(0xb4,0x77,-0x4,0x7f)],'JjaRY')?console[_0x3dbe4e(0xd6,0xcb,0x13d,0x115)](_0x3dbe4e(0x134,0x149,0x14c,0xd8)+_0x3dbe4e(0x269,0x1b5,0x1ce,0x195)+_0x3dbe4e(0x1b4,0x135,0xce,0x210)+_0x133489(0x1d0,0x1d2,0x245,0x18e)+_0x17a71c+'\x22'):(_0x2e06fe=_0x6d6480[_0x133489(0x279,0x305,0x375,0x27a)](_0x409c50,_0x334016,_0x45b8a6,_0x4191b2,_0x6d6480[_0x133489(0x1e3,0x18c,0x1b5,0xfa)]),_0x49d5be['log'](_0x6d6480[_0x133489(0x22c,0x277,0x21b,0x225)],_0x37bf5a['length'],_0x6d6480[_0x133489(0x36d,0x2a2,0x33c,0x37e)],_0x2e2000)));}}if(!_0x33f852['nameCN'])return null;return console['log'](_0x6d6480[_0x133489(0x1c4,0x278,0x328,0x2d0)],_0x33f852),_0x33f852;}function parseOutfitData(_0x38cbde){const _0x13cd60={};_0x13cd60[_0xfed6f7(0x193,0x243,0xc9,0x16d)]=_0x161530(0x324,0x38a,0x2ee,0x33d),_0x13cd60['dPbFh']=_0xfed6f7(0x78,0xcd,-0x63,0x91),_0x13cd60[_0xfed6f7(0x68,0x7d,0xf2,0xe1)]=_0xfed6f7(0x55,-0x3b,0x4c,0xd5),_0x13cd60['VNEkX']=_0x161530(0x383,0x3b2,0x410,0x382)+'ack',_0x13cd60[_0x161530(0x290,0x152,0x1fe,0x1ff)]=_0xfed6f7(0x16c,0x1c9,0x112,0x20e),_0x13cd60[_0xfed6f7(0x53,0xa1,0xa5,-0x5d)]=_0xfed6f7(0xc9,0x1a4,0x13e,0x80)+'ck',_0x13cd60[_0xfed6f7(0xf7,0x17b,0xed,0x125)]=function(_0x226644,_0x3df82a){return _0x226644===_0x3df82a;},_0x13cd60['MSGdv']=function(_0x25cb9f,_0x24e177){return _0x25cb9f===_0x24e177;};function _0xfed6f7(_0x4fef7c,_0x2fb9dc,_0x4f438e,_0x11d0dc){return _0xfdee(_0x4fef7c- -0xfe,_0x11d0dc);}_0x13cd60['Ovwlq']=_0x161530(0x256,0x277,0x213,0x1f5);function _0x161530(_0x64136a,_0x583c44,_0x1a51bb,_0x5aebb0){return _0xfdee(_0x5aebb0-0xf4,_0x64136a);}_0x13cd60['GIJri']=function(_0x4201ac,_0x32a95d){return _0x4201ac&&_0x32a95d;},_0x13cd60[_0x161530(0x344,0x2ba,0x2d9,0x294)]=function(_0x529163,_0x47d009){return _0x529163===_0x47d009;},_0x13cd60[_0x161530(0x2bf,0x27d,0x3bf,0x2ed)]=_0xfed6f7(0xf4,0xfa,0x141,0x43),_0x13cd60[_0x161530(0x2f8,0x219,0x379,0x2bd)]=_0x161530(0x26b,0x254,0x255,0x313)+_0x161530(0x432,0x3de,0x2d7,0x37f)+_0x161530(0x2c4,0x2a4,0x23b,0x2c1)+_0xfed6f7(0x51,0xa4,-0x17,0x40);const _0x397114=_0x13cd60,_0x352791=_0x38cbde[_0xfed6f7(0x1a0,0x1c4,0x201,0x1a8)]('\x0a')[_0x161530(0x2ce,0x291,0x2cc,0x30d)](_0x12cfd1=>_0x12cfd1[_0xfed6f7(0x100,0x31,0x13e,0x79)]())[_0x161530(0x2da,0x2f1,0x38f,0x2e4)](_0x81071c=>_0x81071c),_0x4222bd={};_0x4222bd[_0xfed6f7(-0x3,-0xb7,0x55,-0xba)]='',_0x4222bd[_0xfed6f7(0x55,0x37,0x3f,0xba)]='',_0x4222bd[_0x161530(0x24b,0x1de,0x1ef,0x26a)]='',_0x4222bd[_0xfed6f7(0x14c,0xb9,0x21b,0x1c1)]='',_0x4222bd[_0xfed6f7(0x190,0x217,0x24c,0x25d)+_0x161530(0x1d1,0x1fe,0x29d,0x264)]='',_0x4222bd[_0x161530(0x34e,0x391,0x3bd,0x35e)]='',_0x4222bd[_0x161530(0x25f,0x334,0x372,0x2bb)+'ck']='';const _0x49a5e3=_0x4222bd,_0x276f4f={};_0x276f4f[_0xfed6f7(0xd8,0x195,0x5e,0x1b5)]=_0x397114[_0x161530(0x332,0x239,0x393,0x2fb)],_0x276f4f[_0xfed6f7(0x86,0x129,0x100,0x39)]=_0xfed6f7(-0x3,0x46,-0x4b,0xca),_0x276f4f[_0x161530(0x346,0x267,0x2c2,0x2da)]=_0x397114[_0x161530(0x283,0x243,0x22d,0x25a)],_0x276f4f[_0x161530(0x22d,0x258,0x20a,0x211)]=_0x161530(0x40f,0x2d8,0x2dd,0x33e),_0x276f4f[_0xfed6f7(0x163,0x16a,0x15d,0xa5)]=_0x397114['VNEkX'],_0x276f4f[_0x161530(0x21d,0x35c,0x283,0x29d)]=_0x397114['iFyLr'],_0x276f4f[_0xfed6f7(0x146,0x120,0x97,0x21c)]=_0x397114[_0x161530(0x2e9,0x281,0x1f3,0x245)];const _0x2215fe=_0x276f4f;for(const _0x27d1e8 of _0x352791){const _0x317e14=_0x27d1e8[_0x161530(0x350,0x26e,0x2b4,0x339)](':');if(_0x397114[_0x161530(0x348,0x2fa,0x35d,0x2e9)](_0x317e14,-(0x3c3*-0x3+-0x4*0xa4+0xdda)))continue;const _0x3f22e5=_0x27d1e8['substring'](-0x515*0x4+-0x583*-0x1+-0xed1*-0x1,_0x317e14)['trim'](),_0x5e7fcb=_0x27d1e8[_0xfed6f7(0x181,0x1db,0x247,0x1a7)](_0x317e14+(-0x8b7+-0x15e7+0x367*0x9))[_0x161530(0x350,0x311,0x38c,0x2f2)]();if(_0x2215fe[_0x3f22e5]){if(_0x397114[_0x161530(0x418,0x3bb,0x37e,0x367)](_0x397114[_0xfed6f7(0xe2,0x1b7,0x121,0x79)],_0x397114['Ovwlq']))_0x49a5e3[_0x2215fe[_0x3f22e5]]=_0x5e7fcb;else{const _0x2328eb={};_0x2328eb[_0xfed6f7(0x48,-0x80,0x34,-0x8d)]=_0x397114[_0x161530(0x2e4,0x357,0x407,0x385)],_0x2328eb[_0x161530(0x24e,0x3bf,0x391,0x323)]=_0x9a3066,_0x2328eb[_0x161530(0x31a,0x440,0x404,0x38d)]=_0x372d5c,_0x5d2d0b[_0x161530(0x2dc,0x307,0x3f2,0x38c)](_0x2328eb);}}else _0x397114[_0xfed6f7(0x1b,0x23,0x2f,0xd5)](_0x3f22e5,_0x5e7fcb)&&console[_0xfed6f7(0xa3,0xf0,0x10a,0x169)](_0xfed6f7(0x121,0x175,0x1c8,0xfa)+_0x161530(0x44f,0x42d,0x2d6,0x37f)+_0xfed6f7(0xa5,0x10f,-0x26,0x9f)+_0xfed6f7(0x6a,-0x58,0xd0,-0x44)+_0x3f22e5+'\x22');}if(!_0x49a5e3[_0x161530(0x13b,0x1bf,0x21e,0x1ef)]){if(_0x397114[_0xfed6f7(0xa2,0x15f,0x9f,0x148)](_0x397114['vRtRP'],'qrpCF')){_0x5aeeb9[_0x161530(0x20d,0x297,0x2a4,0x2dd)](_0xfed6f7(0x61,-0x2,0x13,0x19));return;}else return null;}return console[_0x161530(0x309,0x2cf,0x1c5,0x295)](_0x397114[_0xfed6f7(0xcb,0xe4,-0xa,0x18)],_0x49a5e3),_0x49a5e3;}function extractCharacterAndOutfitTags(_0x143daf){function _0x5afd3a(_0x3ec2a7,_0x3d67e,_0x1142f1,_0x370f8f){return _0xfdee(_0x370f8f- -0x389,_0x3ec2a7);}const _0x87d7db={'bRQki':function(_0x3cb1ba,_0x4d49a9){return _0x3cb1ba!==_0x4d49a9;},'obivu':function(_0x4f5568,_0x1d2464){return _0x4f5568(_0x1d2464);},'rOycc':function(_0x351921,_0x4efa96){return _0x351921(_0x4efa96);},'ijpfZ':function(_0x2cf13e,_0x20a076){return _0x2cf13e===_0x20a076;},'IjcRN':_0x24989c(0x8d,0x27,0xad,0x139),'vHwBh':'djoBU','gijHJ':function(_0x518a8c,_0x306425){return _0x518a8c===_0x306425;},'MlzRD':function(_0x5bbc84,_0x478ecb){return _0x5bbc84===_0x478ecb;},'uBqCd':'MfsPS','bvWna':_0x24989c(-0x25,-0xed,0xb4,-0xfa),'xlvsP':function(_0x1a0a2b,_0x450e32){return _0x1a0a2b===_0x450e32;},'QFnfD':function(_0x2c3137,_0x57ab40){return _0x2c3137!==_0x57ab40;},'bXZzZ':_0x24989c(-0xa2,-0x7e,-0x31,-0x18),'RCnOF':_0x5afd3a(-0x6c,-0x17d,-0x1d4,-0x126)},_0x17952a=[];_0x143daf=_0x143daf['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x5afd3a(-0xf2,-0xeb,-0x195,-0x18b)]();const _0x8f1d8b=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x4ebaf9;while(_0x87d7db[_0x24989c(-0x5d,-0xd3,0x19,-0x136)](_0x4ebaf9=_0x8f1d8b[_0x24989c(0x77,0x78,-0x6,0x1)](_0x143daf),null)){const _0x2fcd34=_0x4ebaf9[0xe46+0x1ce4+-0x2b29],_0x5e0eeb=_0x87d7db[_0x5afd3a(-0x22e,-0x200,-0x175,-0x1b5)](preprocessTagContent,_0x4ebaf9[-0x2e4+0xea*0x24+0x2e*-0xa7]),_0x4ad8ed=_0x4ebaf9[_0x5afd3a(-0x13f,-0x13c,-0x21d,-0x1ac)];if(_0x2fcd34==='人物'){const _0x12764c=_0x87d7db[_0x24989c(0x87,-0x53,0xff,0x131)](parseCharacterData,_0x5e0eeb);if(_0x12764c){if(_0x87d7db[_0x5afd3a(-0x341,-0x25c,-0x20a,-0x27d)](_0x87d7db[_0x5afd3a(-0x22e,-0x1e4,-0x29c,-0x235)],_0x87d7db['vHwBh']))return null;else{const _0x19cccf={};_0x19cccf[_0x24989c(-0x6c,-0x72,-0xa0,-0x86)]=_0x5afd3a(-0x2b3,-0x2b5,-0x2d0,-0x1fc),_0x19cccf[_0x5afd3a(-0xee,-0x126,-0x1b6,-0x15a)]=_0x12764c,_0x19cccf['position']=_0x4ad8ed,_0x19cccf[_0x5afd3a(-0x16a,-0x32,-0xce,-0xed)+_0x5afd3a(-0x11f,-0x268,-0x1b9,-0x1f5)]=[],_0x17952a['push'](_0x19cccf);}}}else{if(_0x87d7db['gijHJ'](_0x2fcd34,'服装')){const _0x5c0629=_0x87d7db[_0x24989c(0x22,0x60,0x68,0x6d)](parseOutfitData,_0x5e0eeb);if(_0x5c0629){const _0x878cc={};_0x878cc[_0x5afd3a(-0x2f0,-0x224,-0x2df,-0x243)]='outfit',_0x878cc[_0x24989c(0x7d,-0x5a,0x7,0xff)]=_0x5c0629,_0x878cc[_0x24989c(0xe7,0x112,0x14f,0x1bd)]=_0x4ad8ed,_0x17952a[_0x5afd3a(-0x166,-0x165,-0xb0,-0xf1)](_0x878cc);}}}}_0x17952a[_0x5afd3a(-0x290,-0x1b6,-0x123,-0x1b6)]((_0x3a5cd1,_0x357ba6)=>_0x3a5cd1['position']-_0x357ba6[_0x5afd3a(-0x67,-0x10e,-0x175,-0xf0)]);function _0x24989c(_0x4504a5,_0x30d8ab,_0x1b1015,_0xd9a220){return _0xfdee(_0x4504a5- -0x1b2,_0x30d8ab);}let _0x1f7577=null;const _0x5b1600=[],_0xab488b=[];for(const _0x40d16c of _0x17952a){if(_0x87d7db[_0x24989c(-0x93,-0x3d,-0xac,0x29)](_0x87d7db[_0x5afd3a(-0x1df,-0xbe,-0x5d,-0x12e)],_0x87d7db[_0x24989c(0xa9,-0x27,0x177,0x7)])){if(_0x40d16c['type']===_0x87d7db[_0x5afd3a(-0x13d,-0x127,-0xbd,-0x167)])_0x1f7577=_0x40d16c,_0x5b1600[_0x5afd3a(-0x9e,-0xb0,-0xba,-0xf1)](_0x40d16c);else{if(_0x87d7db[_0x24989c(0xc0,0xbf,0x118,0x150)](_0x40d16c[_0x5afd3a(-0x2e9,-0x2c3,-0x1a6,-0x243)],_0x5afd3a(-0x16f,-0x9a,-0x1b5,-0x140))){if(_0x1f7577)_0x1f7577['matchedOut'+_0x24989c(-0x1e,0xa6,0x7e,-0x34)][_0x5afd3a(-0x2c,-0x6b,-0x91,-0xf1)](_0x40d16c[_0x24989c(0x7d,0xcb,-0x52,0x73)]);else{if(_0x87d7db[_0x5afd3a(-0x29f,-0x2ca,-0x22e,-0x292)](_0x87d7db[_0x24989c(-0x4f,-0x11b,0x7d,0x17)],_0x87d7db[_0x24989c(-0x6d,0x8,-0x7,0x3a)]))_0xab488b[_0x5afd3a(-0xe6,-0x47,-0x58,-0xf1)](_0x40d16c['data']);else{if(_0x87d7db[_0x5afd3a(-0x2ba,-0x15a,-0x26e,-0x234)](_0xd85e2d['id'],_0x257f99))return;_0x5d9812[_0x24989c(0x90,0x95,0xcd,0xc7)+_0x24989c(0x2,0xb1,-0x30,0x7)](_0x229484['LLM_CHAR_M'+_0x24989c(-0x76,-0xab,-0xd9,0x3a)+_0x24989c(0x51,0x85,0x64,0x12a)+_0x24989c(-0xa3,0x1a,-0x146,0x2f)],_0x18e17c),_0x87d7db[_0x5afd3a(-0x1f5,-0x1fa,-0x244,-0x1b5)](_0x1ecec8,_0x492ce7[_0x5afd3a(-0x225,-0x1d3,-0x20a,-0x1f6)]);}}}}}else _0x598a1f[_0x273ab7]&&(_0x3a3b0d[_0x1dd4f7]=_0x41d30e[_0x855f6f]);}return{'characters':_0x5b1600[_0x24989c(0x67,-0x54,0xbe,0x28)](_0x575001=>({..._0x575001['data'],'matchedOutfits':_0x575001[_0x24989c(0xea,0x5f,0x147,0x7d)+'fits']})),'outfits':_0xab488b};}function _0xfdee(_0x42cf2e,_0x544a54){_0x42cf2e=_0x42cf2e-(-0x1795+-0x1*0xceb+0x2563);const _0x188cc1=_0x2418();let _0x510581=_0x188cc1[_0x42cf2e];if(_0xfdee['BJbqTh']===undefined){var _0x2a4b3c=function(_0x561441){const _0x24288e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x54c0b2='',_0x2c91fa='',_0x2c9f0d=_0x54c0b2+_0x2a4b3c;for(let _0x3e0a31=-0x1a12+0x20a3+-0x691,_0x13bbc7,_0x141bf2,_0x3ef8b4=0x2*0xdd3+0x16f7*0x1+-0x329d;_0x141bf2=_0x561441['charAt'](_0x3ef8b4++);~_0x141bf2&&(_0x13bbc7=_0x3e0a31%(0x3f6+-0x1aba+0x16c8)?_0x13bbc7*(0x22*0xe5+0x3*0x521+0x381*-0xd)+_0x141bf2:_0x141bf2,_0x3e0a31++%(0x5*0x274+-0x23e5*0x1+0x1*0x17a5))?_0x54c0b2+=_0x2c9f0d['charCodeAt'](_0x3ef8b4+(-0x17c*0x1+0x25ce+0x18*-0x183))-(0x21bf*-0x1+-0x2*-0xd5a+0x103*0x7)!==-0x2030+-0x1b9d*-0x1+0x493?String['fromCharCode'](-0x1784+0x65*-0x5b+-0x32e*-0x13&_0x13bbc7>>(-(0xf29*0x1+0x2557+-0x1a3f*0x2)*_0x3e0a31&0x1f45+0x23e3+0x4322*-0x1)):_0x3e0a31:0x6e*-0x5+-0x4*0xc5+-0x1be*-0x3){_0x141bf2=_0x24288e['indexOf'](_0x141bf2);}for(let _0x3cb870=0xe7b+-0x1*-0x11d7+0x3*-0xac6,_0x57eb4d=_0x54c0b2['length'];_0x3cb870<_0x57eb4d;_0x3cb870++){_0x2c91fa+='%'+('00'+_0x54c0b2['charCodeAt'](_0x3cb870)['toString'](-0xb14*0x3+-0x1af*0x6+0x15b3*0x2))['slice'](-(0x26*-0x56+0x4f4*-0x5+-0x3e*-0x9b));}return decodeURIComponent(_0x2c91fa);};_0xfdee['yfVrvx']=_0x2a4b3c,_0xfdee['HRLqDX']={},_0xfdee['BJbqTh']=!![];}const _0x575261=_0x188cc1[0x433*-0x1+-0x55b*0x5+0x1efa],_0x2e2972=_0x42cf2e+_0x575261,_0x3e8bd8=_0xfdee['HRLqDX'][_0x2e2972];if(!_0x3e8bd8){const _0x272ce2=function(_0x3f3138){this['TgKItz']=_0x3f3138,this['zZjKWr']=[-0x67c+-0x4a3+-0x4*-0x2c8,-0x135*-0x11+-0x1*-0xf73+0x1*-0x23f8,-0x1e02+0x45a*0x2+0x12f*0x12],this['bZLpag']=function(){return'newState';},this['kZOypZ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['gSTWDg']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x272ce2['prototype']['halnVk']=function(){const _0x1b9241=new RegExp(this['kZOypZ']+this['gSTWDg']),_0x3ab098=_0x1b9241['test'](this['bZLpag']['toString']())?--this['zZjKWr'][-0x8d1+-0x66d+0xf3f]:--this['zZjKWr'][-0x15d5+-0x1*0x20b5+0x368a*0x1];return this['cxoQQH'](_0x3ab098);},_0x272ce2['prototype']['cxoQQH']=function(_0x5f2c83){if(!Boolean(~_0x5f2c83))return _0x5f2c83;return this['bPbFjY'](this['TgKItz']);},_0x272ce2['prototype']['bPbFjY']=function(_0x59bd89){for(let _0x31a757=-0x246a+0x1048+0x1422,_0x524e38=this['zZjKWr']['length'];_0x31a757<_0x524e38;_0x31a757++){this['zZjKWr']['push'](Math['round'](Math['random']())),_0x524e38=this['zZjKWr']['length'];}return _0x59bd89(this['zZjKWr'][-0x20cd*-0x1+-0xe3*0x1+-0x1fea]);},new _0x272ce2(_0xfdee)['halnVk'](),_0x510581=_0xfdee['yfVrvx'](_0x510581),_0xfdee['HRLqDX'][_0x2e2972]=_0x510581;}else _0x510581=_0x3e8bd8;return _0x510581;}function _0x2418(){const _0x1a1dcb=['uKrgwhm','wMfdy3O','uKnUt0y','DhLWzq','sMrnrvO','v0jHy2S','Aw1Hz2vFDxjS','sKLIAhe','6kEs6iMYl+ACJEIJHEApKoEKUUIVJEs/RUAuUq','zMfJAwfSrMvHDa','zfblvLe','BKPts0C','5PwW5O2UoG','y293Aw4','CLD6vgC','zNvSBejVzhLouW','BMfTzuvo','swPJuK4','yLjrA2K','sMzizKi','vhjJDey','sKvWu3K','tKzYrNO','vfD1B1u','wfvUsxa','y2HHDe1LDgfKyq','6k6+ici','5lIl5y2k6lQRu0zx6iom6z2IoIa','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','zgLor3q','rxzqz0u','zNLDifnHDMvKia','yLHAELO','Be9wr0q','A1fhsfa','qLD2Aum','5lIk5y2k6lQRtLngv+IdJoMDOJO','5A2x5Q61ici','tefrELO','ig1LC3nHz2uGAq','C3HgCge','qNLjza','DxjLC0jHy2S','v09fvMy','wMHHzMS','ywnR','rgzxzLq','C2PRr0i','C2L6zq','pc/KURRNIAK+','qM1Hsvy','B3DUzxi','AMzLEvu','5lIl5y2k6lQRtLngvZOG','B1zwDK4','ANbMAfa','B3v0zML0uhjLCW','yxbWBhK','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','Dw5VBwO','zNLDifjHDYbmta','uvvLv0u','rdOG','CNr6CxO','teXnioI/LowBNUE7K+AENos4UUEPUG','5lIT5PAh5zcn56EW','BwvZC2fNzsbHDa','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','A3LAsfy','tuP6ufG','6kkR5l2/55sO77YA','CMvZDwX0','y3fYEKq','r2r0r0m','y2HHCMfJDgvY','yNfdrMm','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','5lIk5y2k6lQRu0zx6iom6z2I','AxjIBwi','BhvRq0K','ChjVBxb0','zML0CW','5lQu5A6y5Asw6lkm6iom6z2I','BgvUz3rO','tgHjBue','uhLxBe8','6kEs6iMY54M55B6boIa','AKPStvO','Aw5WDxq','tMT4q2K','sw10Avm','A3feB2G','DgLUzYbJAgfYia','BhLNA2y','Bg9N','q0XwCKC','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','DcbWCMvZzxq6','qLH5swe','weX1BKy','ENLmDvO','Dg9tDhjPBMC','5lIl5y2k6lQR','CMvXDwvZDcaOsq','rMDRAwS','zNLDiow3SUABToAwSoINKUIjSUMIHa','lxrHyI1JAgfYyq','Dg9mB3DLCKnHCW','u0zxqMfJAW','qMvqr1y','i3n0lwnOyxr1oa','wLPbBe4','y2HHCL9TB2rPzG','zw5LCG','v0Ljtg4','y29UDgvUDa','mtHKtgjmAuW','yMvywLu','zNLDioINO+AEKowiSoEAHos6UUEjQq','igLUzgv4','t05NEuG','y29UC3rYDwn0BW','EhndtKy','Cgr0uem','Aw5JBhvKzxm','EgfqAgK','rwfOwKu','wM5dwNu','Ag1eBhi','BgHKwuO','5lIT5PAh5zcn56EWoIa','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','zNvSBejVzhLcyq','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','sKfWCNy','qLLNsKy','CMvZzxrZ','Dgv4Da','zNLDioINO+AEKowiSoEAHoACJEIJHq','Bw9KAwz5ihbYBW','t250vgS','y2HvueW','zNLDieXmtsbVDq','ndu5ntK2CeX2rfzN','C29YDa','B2jPDNu','DwrrwKK','5B2s5BgE5lQ6','z2v0rwXLBwvUDa','s1HbExm','vuvtva','CMvWBgfJzufSBa','ufLcweq','AxnbCNjHEq','Aw5KzxG','mJfJCLnMu20','zM9YrwfJAa','t3z3Bhe','5lIl5y2k6lQRu0zx6iom6z2I','zxH0icH0CMLNzW','ELfbtee','Bxb0icHjrdOG','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','6iUX5PAh5zcn56EW','Ag1YBva','DejxEfm','zxjYB3i','t1DhBKe','Aw1Hz2vZihrVia','q0PewgG','shDZDKS','y2HHCMfJDgvYva','CfnRqLy','zMLSDgvY','zMLmwxe','DMjbA2u','AM9PBG','rev5Cuu','u3DUAfy','Aw9oA3C','wvz4wvG','mtmXmZK3mgPWywfnrG','DLj0uLa','tLvNuva','yuHyAuG','CMfUzg9T','t2rSweS','DhjPBq','C1nfAfC','uxvUr1m','vvrYA3O','BxL6wfe','ufjptvbux1jfuW','5lIk5y2k6lQRtLngvW','tK5irhm','AKPetK8','zfbIrMG','AgPcvg4','zvLOrvO','5lQu5A6y5Asw6lkm','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','6kEs6iMY54M55B6b','sxrUuMC','uuriq3i','5Qoa5Rwl5yIW6kEs6iMYici','ALrWz1e','5lIl5y2k6lQRtLngv+IdJoMDOJO','5lIl5y2k6lQRtLngvW','C1DmzxG','DxbWzxjcB2r5uW','zNLDievYCM9YoG','tsbVDxrWDxqGzG','Cvrbq1e','z1zmAvO','BwfW','ue1kEKC','tLLVsMG','vxDdy0G','zwzLCNu','kcGOlISPkYKRkq','w2nOyxjHy3rLCG','Defut3a','Dw5ADNC','yNzxBMe','AMjhr3K','AK9vv3C','5PYQ5zYOieXmtsdOVPpLH7RKUk0','ywrK','qvbjvuG','BhLOv1a','zxHLyW','BMCGy2HHCMfJDa','DxjS','CMvgqNK','r2TVt2W','DxbWzxjcB2r5tG','zgf0yq','qLP5BuO','B3iGzgvIDwDNAq','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','vwXPrvq','Dhb1Da','5Qoa5Rwl5yIW5PAW5PYn6kofici','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','mtbYrMPYveW','tgXzrMe','CK95y2m','qxnWBg0','vMfYAwfIBgvZ','s3Dvvgq','AhD1BvC','wNbpwge','shb3vhq','5lIl5y2k6lQRu0zx','u2fLtLe','CMvTB3zLtgLZDa','CMfPDhm','5lIl5y2k6lQR6iom6z2I','Aw5KzxHpzG','zNvSBejVzhLtrG','y3rLCG','DvPJEfC','B3v0zML0','DxbWzxjcB2r5','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','BwXMEMK','y29UDgv4DdO','BwvZC2fNzq','zNLDioACJEIJHsaI','iIZMMk/LKkBLVzxLHAu/','sLz0zha','zNLDiev4zwn1Da','u0zx','teXnioIVT+AXGUwKSEI0Pq','y2HHCMfJDgvYCW','sfzQCgm','DgvKigrHDge6','BhDxyuW','yMfZzty0','zNLDiezPBMfSia','DujXq2q','BfLiywS','CMfUzg9Tvvvjra','qwjzwxK','ELH4wge','ru5bBw8','5lIk5y2k6lQR6iom6z2I','rMXnyKK','yvLgyu8','wufTDMK','zw50CMLLCW','l3bUzZTIyxnLnG','CMfJDgvYl291Da','ndm0mtqYB1vUAMHn','zMj0A2W','zNvSBejVzhK','zNLDifn0yxj0Aq','DhjPz2DLCG','CMvZzxrjza','wMfIAvm','vNjVBLi','zw1PDa','EvPfuM8','EgX2C1a','tvnhzhy','rvn0r0K','AxbPvfu','zNLDiev4DhjHyW','DgvYihrYAwDNzq','EuzSDeq','rMTHrK0','z2vLvLG','q29UDgv4Da','iIdMNiKG','C3vJy2vZCW','CfrQrui','C3vIC3rYAw5N','Ehj5CKu','EwzkAu0','CMvWBgfJzq','mJC1mZG0nhrqA0fZvq','rLDcywnR','rKvrvNK','vNrzA3i','rLfuwha','quHbrvy','qMPVufC','B2rPzNKGteXnia','uhjVBxb0tw9KAq','BMC6','EvjQCuO','DxbWzxjcB2r5qG','y2HHCL8','5lQu5A6y5Asw6lkm6iom6z2IoIa','q0zhruG','yNnAywC','CIb0zxH0oG','DwvZDc4UlG','Buvxzha','sg9JrLq','C3rYAw5N','ChvZAa','Cg9ZAxrPB24','rKnwtK8','zw1hthG','Bwf0y2HLze91Da','B3v0zML0CW','C3bSAxq','6iUX5PAh5zcn56EWoIa','tLvWvu4','t05trq','zNLDifvZzxiGCG','EuPYB2G','AujPrvq','n01TzwTWyG','mJa3mZa2C2H2uevz','5BEY5y+w5RAi5PU05PAW','z25itK4','y2HHCMfJDgvYua','zu5NAMK','v05VAha','zNLDienOyxjHyW','B2jQzwn0','A0H4A0W','zxrZ','5Qoa5Rwl5yIW5PYn6kofici','t0rjrLLFuKvtua','vgDeDLa','uuzUzKq','mZeZnJf4D1v0Bfi','uLD0svK','sMPHuLK','BMfTzuno','z2vUzxjHDgLVBG','DNLowe8','CvDpwNG','AM1Sshm','DxjLCW','BgDNAha','yKDMsMm','DMfYAwfIBgvZoG','zNLDief0DgfJAa','ugfKBvi','BNvPAg0','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','qvjOrNq','teXnx0niqvjFtq','5lQu5A6y5Asw6lkmoIa','Auz5thi','AwPWzLO','yLnPuwi','EhftueW','ue9ou0u','vKnwuNa','E3VNLkJMIlFPNidMSyj9Fq','iIdMSQhMNiNLJ5JMM7q','Bw9KAwz5ihjLCq','A2ndyvC','vhfdsKG','vuH3yNC','ChjVBxb0oG','B1fht3e','r0LkCMK','uhbiwfa','5lIk5y2k6lQRtLngv+IdJoMDOG','B1r2u2S','5lIk5y2k6lQR','DM9tCLC','twX6uKq','sw1ns0S','Aw5MBW','A2vftxq','wMztrNa','iIdLT7lLVzlLSz7LIldOP5lOIBiGiG','D29YBgqGyM9VAW','nZyWnJe4ngnZyKLIva','5Rgc6lAf5PE2','5lIk5y2k6lQRu0zxoIa','5lIl5y2k6lQRtLngv+IdJoMDOG','5lIk5y2k6lQRu0zx6iom6z2IoIa','BM9huhy','yuvkuxi','Cxfzugu','BM93','y3nPrKy','t1ztu1e','BKT5qNC','mJe2u0jUBKXk','svfHz0e','zgv0ywLS','vKTVBM0','zxf1AxjLBwvUDa','t0rjrLLFuKvrvq','zNLDifjLCxvLCW','5y+c6icd5zU+54Mh','txjkAwe','C2LWBLC','t0rjrLLFr0vuxW','zNLDien1CNjLBG','weDpDM4','5lIk5y2k6lQRu0zx','DefwuhK','s2rgv1e','B29xsha'];_0x2418=function(){return _0x1a1dcb;};return _0x2418();}function getCurrentCharacterPreset(){function _0x3750b9(_0x275e38,_0xdadc5c,_0x4bc3e9,_0x2294d8){return _0xfdee(_0x4bc3e9-0x8b,_0x275e38);}const _0xafcf46=extension_settings[extensionName],_0xcf9e38=_0xafcf46[_0x301853(-0xf1,-0x1b8,-0x14e,-0x264)+_0x3750b9(0x30c,0x2c3,0x2f8,0x360)];if(!_0xcf9e38||!_0xafcf46[_0x3750b9(0x1e9,0x14f,0x178,0xd6)+'resets'][_0xcf9e38])return null;const _0x450c3f={};function _0x301853(_0x2af9fb,_0x20391a,_0x22209c,_0x23d8bc){return _0xfdee(_0x20391a- -0x2a5,_0x23d8bc);}return _0x450c3f['id']=_0xcf9e38,_0x450c3f[_0x301853(-0x154,-0x76,-0x6a,-0x113)]=_0xafcf46[_0x3750b9(0x16e,0x15c,0x178,0x24d)+_0x301853(-0x1c,-0xda,-0xe1,-0x112)][_0xcf9e38],_0x450c3f;}function buildCharacterText(_0x118bf4){const _0x521289={};_0x521289[_0x84c971(0x4eb,0x55a,0x5a0,0x524)]='<人物>\x0a',_0x521289['sxFpa']=_0x84c971(0x5dc,0x493,0x559,0x4b4);const _0x54cda2=_0x521289,_0x129c3a=_0x118bf4['data'];let _0x3246c8=_0x54cda2['ONgyH'];_0x3246c8+=_0x4ff7f2(0x198,0x2bc,0x210,0x2e0)+(_0x129c3a[_0x84c971(0x52c,0x55c,0x4e0,0x489)]||'')+'\x0a',_0x3246c8+=_0x4ff7f2(0x1c9,0x1de,0x12e,0x1b9)+(_0x129c3a['nameEN']||'')+'\x0a',_0x3246c8+=_0x4ff7f2(0x269,0x185,0x1e4,0x2bf)+(_0x129c3a[_0x4ff7f2(0x20b,0x308,0x239,0x279)+_0x84c971(0x64f,0x68f,0x628,0x58b)]||'')+'\x0a',_0x3246c8+=_0x4ff7f2(0x126,0xd4,0x155,0xd0)+(_0x129c3a['facialFeat'+_0x4ff7f2(0x206,0xd9,0x14b,0x18e)]||'')+'\x0a',_0x3246c8+=_0x84c971(0x60c,0x650,0x675,0x63e)+(_0x129c3a[_0x4ff7f2(0x14f,0x24f,0x197,0xf7)+'uresBack']||'')+'\x0a',_0x3246c8+=_0x84c971(0x43d,0x4fc,0x50d,0x586)+(_0x129c3a[_0x84c971(0x595,0x69e,0x5f9,0x5b2)+'FW']||'')+'\x0a',_0x3246c8+=_0x4ff7f2(0xb0,0x1f0,0x175,0x117)+(_0x129c3a['upperBodyS'+'FWBack']||'')+'\x0a',_0x3246c8+='下半身SFW:\x20'+(_0x129c3a[_0x84c971(0x584,0x55e,0x62b,0x5c0)+'W']||'')+'\x0a',_0x3246c8+=_0x4ff7f2(0x13c,0x197,0x1a9,0x26b)+(_0x129c3a[_0x84c971(0x56d,0x55c,0x62b,0x564)+'WBack']||'')+'\x0a',_0x3246c8+='上半身NSFW:\x20'+(_0x129c3a[_0x84c971(0x559,0x557,0x613,0x6d7)+_0x84c971(0x588,0x650,0x638,0x5c4)]||'')+'\x0a';function _0x84c971(_0x32995b,_0x1d6866,_0x4f7012,_0x5397f9){return _0xfdee(_0x4f7012-0x3e5,_0x5397f9);}_0x3246c8+=_0x84c971(0x5b3,0x4ec,0x54c,0x563)+'\x20'+(_0x129c3a[_0x4ff7f2(0x337,0x346,0x279,0x23d)+_0x4ff7f2(0x27b,0x1c6,0x1fa,0x1c4)]||'')+'\x0a',_0x3246c8+=_0x4ff7f2(0xf1,0x171,0x1c3,0xf0)+(_0x129c3a[_0x4ff7f2(0x1fe,0x1ff,0x19d,0x244)+'FW']||'')+'\x0a',_0x3246c8+='下半身NSFW背面:'+'\x20'+(_0x129c3a['fullBodyNS'+_0x4ff7f2(0x2fc,0x3ab,0x2cf,0x348)]||'')+'\x0a';function _0x4ff7f2(_0x1077fc,_0x475ad0,_0x27f2c8,_0x1190c8){return _0xfdee(_0x27f2c8-0x4b,_0x1077fc);}return _0x3246c8+=_0x54cda2[_0x4ff7f2(0x1d1,0x28b,0x1b6,0x242)],_0x3246c8;}export async function handleCharacterPromptModify(_0xe66d37,_0x1b6259=[]){function _0x2c4b06(_0x10642f,_0x5e4ea1,_0xc5460f,_0x3f88d4){return _0xfdee(_0xc5460f-0x57,_0x10642f);}const _0x5d5c64={'JfHfB':'请先选择一个角色预设','ZhFOZ':function(_0x31460d,_0x264a18){return _0x31460d!==_0x264a18;},'PMJzG':_0x2c4b06(0x285,0x22c,0x276,0x1ab)+_0x2c4b06(0x39a,0x2e1,0x2e2,0x37e)+_0x2c4b06(0x212,0x286,0x2c2,0x322)+_0x2c4b06(0x206,0x2d2,0x281,0x2d9)+'er\x20prompt\x20'+_0x2c4b06(0x15c,0x1a6,0x16a,0x221)+_0x2c4b06(0x2f1,0x269,0x2eb,0x385),'nYoLL':function(_0x8203d2){return _0x8203d2();},'Ngcib':'[character'+'PromptModi'+_0x4f729d(-0xf,-0xd8,-0x78,-0x32)+_0x2c4b06(0x1f3,0x215,0x1fb,0x233),'yZERo':_0x4f729d(0xb0,0xb,0x6a,0x14)+_0x4f729d(0x180,0x10f,0xd6,0x96)+_0x4f729d(-0x6c,-0x1f,-0x53,-0x121)+_0x2c4b06(0x205,0x25e,0x2a4,0x252),'aSWuh':_0x4f729d(0x10a,0x10d,0x6a,0x1)+'PromptModi'+'fy]\x20Saved\x20'+_0x2c4b06(0x242,0x1a7,0x17c,0x1bf)+':','BePGV':'[character'+_0x2c4b06(0x2b4,0x2f1,0x2e2,0x2d2)+_0x2c4b06(0x179,0x26b,0x1b9,0x268)+_0x2c4b06(0x1a8,0x220,0x15a,0x109),'VtYkr':function(_0x1f1005,_0x4555cd){return _0x1f1005||_0x4555cd;},'xsCNF':_0x4f729d(0x4a,-0x8a,-0x6e,0x4f),'fiLYq':function(_0x55aedd,_0x3d5f11){return _0x55aedd===_0x3d5f11;},'ARhFt':'DsbrD','oVVvN':function(_0x19bd9c,_0x59428a,_0x1959f1){return _0x19bd9c(_0x59428a,_0x1959f1);},'ooWHp':_0x4f729d(-0xbc,-0x3d,-0x2,0x4d)+'y','WNohp':function(_0x32a6b2,_0x4f6578){return _0x32a6b2(_0x4f6578);},'aEJQr':function(_0x311f2b){return _0x311f2b();},'cowin':function(_0x20a999){return _0x20a999();},'XyUks':'[character'+_0x2c4b06(0x36e,0x2e9,0x2e2,0x351)+'fy]\x20Charac'+'ter\x20list\x20t'+_0x4f729d(0x93,0x24,0x2d,-0x5)+'ered):','JVtdp':_0x4f729d(-0x167,-0x33,-0xa4,0x17),'TYCMm':'[character'+_0x4f729d(0xd1,0x193,0xd6,0xa4)+_0x2c4b06(0x8b,0x16c,0x13d,0x20d)+_0x4f729d(0x38,0x17,-0x7f,0x52)+_0x2c4b06(0x1c7,0x234,0x1c1,0x1f9)+'ndex:','iBiET':function(_0x20fb28,_0xab9d2d,_0xd0f199,_0x451407,_0x32b931){return _0x20fb28(_0xab9d2d,_0xd0f199,_0x451407,_0x32b931);},'BSBif':_0x2c4b06(0x240,0x25c,0x276,0x1ac)+_0x2c4b06(0x384,0x256,0x2e2,0x23e)+_0x4f729d(0xb6,0x7c,0xa5,0x38)+_0x4f729d(-0x127,-0x83,-0x9e,-0xfd),'NNHDs':function(_0x43c86d,_0x1f9e36){return _0x43c86d>_0x1f9e36;},'cqrzD':function(_0x29eff0,_0x3f67ca){return _0x29eff0>_0x3f67ca;},'SGplZ':function(_0x8ec2c0,_0x547c65){return _0x8ec2c0>=_0x547c65;},'jJDNO':function(_0x5e6850,_0xe5ec97){return _0x5e6850!==_0xe5ec97;},'nKyBw':'ofMSK','tAVPy':_0x2c4b06(0xf6,0x10e,0x190,0x1c5),'unomj':_0x2c4b06(0x26e,0x214,0x276,0x246)+'PromptModi'+_0x4f729d(-0x75,-0x12c,-0xb1,-0xbb)+'ed','TWuoU':_0x4f729d(0xeb,0x119,0x6a,0x73)+'PromptModi'+_0x4f729d(-0x22,0x91,0x1c,0x83)+'tput:','reFBy':_0x4f729d(-0x57,-0x70,-0x32,0x0),'sewlx':function(_0x14fe0c,_0x404017){return _0x14fe0c===_0x404017;},'eYhEZ':_0x2c4b06(0x1dd,0x2a0,0x27c,0x266)+_0x2c4b06(0x12d,0x234,0x1dd,0x153),'ZfSFp':_0x2c4b06(0x325,0x2f1,0x276,0x21e)+_0x4f729d(0x136,0x74,0xd6,0x189)+'fy]\x20No\x20cha'+_0x2c4b06(0x307,0x2db,0x2be,0x2e8)+'fit\x20tags\x20f'+'ound\x20in\x20ou'+_0x4f729d(0xc7,0xe2,0x7f,-0xb),'voSrW':_0x2c4b06(0x23f,0x2ad,0x276,0x31a)+_0x4f729d(0x17f,0x4c,0xd6,0x134)+_0x2c4b06(0x1a6,0x214,0x1d6,0x1ca)+_0x4f729d(-0x2e,0x5c,0x61,-0x4e)+_0x2c4b06(0x2e4,0x2e5,0x288,0x1d7)+_0x2c4b06(0x245,0x31d,0x2e3,0x259),'irbmb':_0x2c4b06(0x335,0x2fd,0x276,0x20f)+_0x4f729d(0x17e,0x2a,0xd6,0x7)+_0x4f729d(0x19f,0x84,0xc1,0xf8)+_0x2c4b06(0x2ba,0x244,0x2ae,0x2b2),'LhImA':function(_0x25c0e1,_0x6e579b,_0x5b0370){return _0x25c0e1(_0x6e579b,_0x5b0370);},'tnyiW':function(_0x1ba208,_0x3655e7){return _0x1ba208>_0x3655e7;},'dURfI':_0x4f729d(-0x145,0x39,-0x6a,0x4e)+'完成！'};function _0x4f729d(_0x87e0e1,_0xdc001,_0x3ada97,_0x1bac55){return _0xfdee(_0x3ada97- -0x1b5,_0xdc001);}console['log'](_0x5d5c64[_0x2c4b06(0x1fa,0x1b1,0x271,0x268)]),toastr['info'](_0x4f729d(0xd5,-0x36,0x6a,0xb5)+_0x2c4b06(0x2a7,0x263,0x2e2,0x258)+'fy]\x20正在处理角色'+_0x2c4b06(0x28f,0x2dd,0x289,0x32e));try{const _0x5a6a0c=getContext(),_0x394890=extension_settings[extensionName],_0x3fa922=_0x5d5c64['nYoLL'](getCurrentCharacterPreset);if(!_0x3fa922){toastr['error'](_0x5d5c64[_0x4f729d(0x22,-0x10b,-0x5f,-0x71)]);return;}console[_0x4f729d(-0x71,-0x13,-0x14,-0xaf)](_0x5d5c64['Ngcib'],_0x3fa922['id']);const _0x25140e=_0x3fa922[_0x2c4b06(0x282,0x1ce,0x286,0x29f)][_0x4f729d(-0xce,-0xae,-0xb9,-0x18e)+_0x2c4b06(0x37c,0x200,0x2d2,0x338)]||'',_0x4115fc=_0x3fa922[_0x4f729d(-0xc,0xf5,0x7a,0x5e)][_0x2c4b06(0x1a2,0x1b7,0x153,0x1af)+'WorldBook']||'',_0x176ba5=_0x3fa922[_0x2c4b06(0x218,0x1cb,0x286,0x2bd)]['generation'+_0x2c4b06(0x36a,0x1ef,0x292,0x236)]||{};console['log'](_0x5d5c64[_0x4f729d(0x163,0x31,0xbc,-0xa)],_0x25140e),console[_0x2c4b06(0x1eb,0x2a7,0x1f8,0x147)](_0x5d5c64['aSWuh'],_0x4115fc),console[_0x2c4b06(0x210,0x2b8,0x1f8,0x222)](_0x5d5c64[_0x2c4b06(0x1a0,0x25e,0x207,0x265)],_0x176ba5);const _0x548948=_0x5d5c64[_0x4f729d(0x19f,0x82,0xd1,0x85)](_0xe66d37,''),_0x41664b=[];if(_0xe66d37){if(_0x5d5c64[_0x2c4b06(0x167,0x165,0x214,0x1c9)]===_0x5d5c64['xsCNF'])_0x41664b[_0x4f729d(0x175,0xdb,0xe3,0xb6)](_0xe66d37);else{_0x3e905d[_0x4f729d(-0xa3,0x1a,0x34,0xd2)](_0x5d5c64[_0x4f729d(-0x97,0x1e,-0x5f,0x70)]);return;}}_0x25140e&&_0x41664b['push'](_0x25140e);_0x4115fc&&(_0x5d5c64[_0x4f729d(0x4f,0x4c,0x3c,-0x7f)](_0x4f729d(0x12e,0x155,0xa3,0x10d),_0x5d5c64[_0x4f729d(-0x9c,-0x15a,-0xad,-0xe8)])?_0x173449['add'](_0x51c66b):_0x41664b['push'](_0x4115fc));const _0x41c8c4=_0x41664b[_0x2c4b06(0x1eb,0x1f8,0x24a,0x1cf)]('\x0a');console['log'](_0x4f729d(0xf4,0xb0,0x6a,-0x3d)+_0x4f729d(0x16,0x10,0xd6,0x3f)+_0x2c4b06(0x149,0x21e,0x147,0xee)+_0x2c4b06(0x344,0x2f8,0x2ce,0x242)+_0x2c4b06(0x39a,0x226,0x2ea,0x30c),_0x41c8c4);let _0x22f7a3=_0x5d5c64[_0x4f729d(-0x89,-0xf0,-0x3c,-0x81)](buildPromptForRequestType,_0x5d5c64[_0x2c4b06(0x216,0x189,0x199,0x1ed)],_0x548948);const _0xeb471f=_0x5d5c64[_0x4f729d(-0x149,-0x19c,-0xc6,-0x1)](generateCharacterListText,_0x41c8c4),_0x2a2662=_0x5d5c64[_0x4f729d(-0x28,-0x45,-0x89,0x1e)](generateOutfitEnableListText),_0x31ed96=_0x5d5c64[_0x2c4b06(0x110,0x138,0x1a7,0x1f3)](generateCommonCharacterListText);console[_0x2c4b06(0x153,0x290,0x1f8,0x238)](_0x5d5c64['XyUks'],_0xeb471f);const _0x16e665=_0x5a6a0c[_0x2c4b06(0x1ff,0x25e,0x1b3,0x171)+'ta']?.['variables']||{},_0x105a20=_0x5d5c64['WNohp'](buildCharacterText,_0x3fa922);_0x22f7a3=_0x5d5c64['WNohp'](mergeAdjacentMessages,_0x22f7a3),console['log']('[character'+_0x4f729d(0x9,0x2a,0xd6,0x9e)+_0x2c4b06(0x21d,0x223,0x21f,0x25a)+'后:',_0x22f7a3);const _0xeec0f9=_0x5d5c64[_0x4f729d(-0x35,0x8d,-0x3c,-0x5)](findMessageIndexWithPlaceholder,_0x22f7a3,_0x5d5c64[_0x2c4b06(0x252,0x36d,0x2a8,0x212)]);console[_0x4f729d(0xb8,-0xe,-0x14,0xb0)](_0x5d5c64['TYCMm'],_0xeec0f9);const _0xc63eaf={..._0x176ba5,..._0x16e665},_0x401117={'context':_0x25140e,'worldBookContent':_0x4115fc,'variables':_0xc63eaf,'userDemand':_0x5d5c64[_0x4f729d(0x32,0x109,0xd1,0x8)](_0xe66d37,''),'characterListText':_0xeb471f,'outfitEnableListText':_0x2a2662,'commonCharacterListText':_0x31ed96},{messages:_0xaf4f08,replacedVariables:_0x2fc0ef}=_0x5d5c64['oVVvN'](replaceAllPlaceholders,_0x22f7a3,_0x401117);_0x22f7a3=_0xaf4f08,_0x22f7a3=_0x5d5c64[_0x4f729d(-0xc9,-0x34,-0xcd,-0x6c)](_0x4af978,_0x22f7a3,'{{当前角色}}',_0x105a20,_0x2fc0ef),console[_0x2c4b06(0x126,0x23a,0x1f8,0x245)](_0x5d5c64['BSBif'],_0x22f7a3);let _0x16f520='';_0x5d5c64[_0x2c4b06(0x2ac,0x2e6,0x25c,0x339)](_0x2fc0ef[_0x4f729d(0x5c,-0x103,-0x42,-0xd8)],0x10e+0x2*-0xa7f+0x13f0)&&(_0x16f520=_0x2c4b06(0x13d,0x241,0x1e6,0x1ab)+_0x4f729d(0x8d,-0x10,-0x2c,0x7e)+[..._0x2fc0ef][_0x4f729d(0x6a,0x91,0x3e,0x3d)]('、')+'\x0a');_0x1b6259&&_0x5d5c64[_0x2c4b06(0x1f6,0x185,0x1e2,0x23f)](_0x1b6259['length'],-0xa9*0x25+0x1*0x9eb+0xe82)&&_0x5d5c64['SGplZ'](_0xeec0f9,-0x105f+-0xaa1+0x1b00)&&(_0x5d5c64[_0x2c4b06(0x332,0x27c,0x25d,0x2a5)](_0x4f729d(0x25,-0xfc,-0x2d,0x20),_0x5d5c64[_0x2c4b06(0xe9,0x212,0x188,0x1a9)])?(_0x22f7a3=attachImagesToMessage(_0x22f7a3,_0xeec0f9,_0x1b6259,_0x5d5c64[_0x4f729d(-0x125,-0x10a,-0x75,-0x5f)]),console[_0x4f729d(0x5a,0xf,-0x14,0xbb)](_0x5d5c64[_0x4f729d(0x5f,-0x2,-0x37,-0xd)],_0x1b6259['length'],_0x2c4b06(0x204,0x26c,0x242,0x266)+_0x2c4b06(0x2a8,0x1c6,0x1dc,0x183)+_0x2c4b06(0x25b,0x23d,0x211,0x22b),_0xeec0f9)):_0x4f90c5[_0x5d7e6d]&&_0x5d5c64['ZhFOZ'](_0x4dbcfb[_0x42a33b],_0x8f405f[_0x2b12ec])&&_0x30a5f3++);updateCombinedPrompt(_0x22f7a3,_0x16f520);const _0x7f826b={};_0x7f826b['timeoutMs']=0x493e0;const _0x231d62=await _0x5d5c64[_0x2c4b06(0x164,0x201,0x1d0,0x181)](LLM_CHAR_MODIFY,_0x22f7a3,_0x7f826b);console['log'](_0x5d5c64[_0x4f729d(-0xcd,-0x61,-0x5b,-0x9b)],_0x231d62);if(!_0x231d62){toastr[_0x4f729d(-0x9,0x46,0x34,0xa5)](_0x5d5c64[_0x4f729d(0x136,0x41,0x77,-0x38)]);return;}const _0x2d572f=extractCharacterAndOutfitTags(_0x231d62);if(_0x5d5c64['sewlx'](_0x2d572f[_0x2c4b06(0x1d9,0x2e2,0x2ac,0x2b5)][_0x4f729d(-0xea,0x70,-0x1f,-0x1a)],0x123d+0x18b6+-0x2af3)&&_0x2d572f[_0x4f729d(0x46,0x1a7,0xe8,0x23)][_0x2c4b06(0x200,0x186,0x1ed,0x1d9)]===-0x1319+0x1bef+0x57*-0x1a){toastr['warning'](_0x5d5c64[_0x4f729d(0xf1,0x1b,0x54,0x7a)]),console[_0x4f729d(-0xd2,-0x8f,-0x14,0x20)](_0x5d5c64[_0x2c4b06(0x11f,0x114,0x17a,0xdd)]),console['log'](_0x5d5c64[_0x4f729d(-0x18,-0xe1,-0x97,-0x13b)],_0x231d62);return;}console[_0x4f729d(0xa,-0x11,-0x14,-0x90)](_0x5d5c64[_0x2c4b06(0x20c,0x172,0x1e8,0x148)],_0x2d572f);if(_0x5d5c64[_0x2c4b06(0x242,0x1bc,0x1e2,0x277)](_0x2d572f[_0x2c4b06(0x331,0x31a,0x2ac,0x381)][_0x4f729d(0x83,-0xfb,-0x1f,-0x7)],0x1f19+-0x1eb+0x1f2*-0xf)){const _0x39f0cb=_0x2d572f[_0x4f729d(0x77,0x20,0xa0,0x160)][-0x17d*-0x11+-0x24d*0x6+-0xb7f];await _0x5d5c64[_0x4f729d(-0x29,0x73,-0x1e,-0x9d)](updateCharacterPresetFromLLM,_0x3fa922['id'],_0x39f0cb);}const _0x515f46=[..._0x2d572f[_0x2c4b06(0x3b2,0x2dc,0x2f4,0x3c4)]];for(const _0x357c6c of _0x2d572f[_0x2c4b06(0x21b,0x24e,0x2ac,0x1d7)]){_0x357c6c[_0x2c4b06(0x36d,0x38a,0x2f3,0x393)+_0x2c4b06(0x13d,0x2b1,0x1eb,0x1cb)]&&_0x357c6c[_0x4f729d(0x15a,0x120,0xe7,0x150)+_0x2c4b06(0x2aa,0x155,0x1eb,0x27d)]['length']>-0x133*-0x19+0x9b1+0x1*-0x27ac&&_0x515f46[_0x4f729d(0x19e,0x170,0xe3,0xa2)](..._0x357c6c[_0x4f729d(0x65,0x38,0xe7,0x77)+_0x2c4b06(0x27e,0x15d,0x1eb,0x21a)]);}_0x5d5c64['tnyiW'](_0x515f46[_0x4f729d(-0x32,-0xc5,-0x1f,-0x78)],-0x1*0x4bd+-0xc5*-0xb+0x6*-0x9f)&&await updateOutfitPresetsFromLLM(_0x515f46),toastr[_0x4f729d(0x32,0x48,0xc8,0x117)](_0x5d5c64['dURfI']);}catch(_0x32878c){console['error']('[character'+_0x4f729d(0x91,0x3,0xd6,0x14d)+_0x2c4b06(0x298,0x337,0x26c,0x28f),_0x32878c),toastr[_0x2c4b06(0x282,0x252,0x240,0x1c9)](_0x4f729d(0x2b,-0x9c,0x30,-0x2e)+'\x20'+_0x32878c[_0x2c4b06(0x24b,0x2e7,0x2a5,0x29b)]);}}async function updateCharacterPresetFromLLM(_0x3c69dc,_0x2e0310){const _0x2808f9={'KXAys':function(_0x23208e,_0x31a201){return _0x23208e!==_0x31a201;},'VKonm':function(_0x4b6c09,_0x5c181d){return _0x4b6c09(_0x5c181d);},'hmDlr':_0x2a788a(0x398,0x2f5,0x375,0x2bf),'bsZag':_0x2a788a(0x29d,0x27f,0x2a5,0x29b),'chUPL':'英文名称','vtlkM':_0x2a788a(0x3d4,0x370,0x32b,0x2c4),'WIILn':_0x2a788a(0x251,0x323,0x2b6,0x34a),'kcCaW':_0x474cf8(0x2e0,0x2e8,0x2f0,0x37b),'yFltD':_0x474cf8(0x407,0x35a,0x3a0,0x3ae),'isycm':_0x474cf8(0x2e5,0x2e3,0x364,0x2be),'uyqpl':_0x474cf8(0x348,0x344,0x27b,0x278),'RDFXs':_0x474cf8(0x2bd,0x2f7,0x372,0x2fe),'MrJia':_0x2a788a(0x1d4,0x27a,0x24a,0x1fa),'FEQVy':function(_0x29ea3f,_0x1bb27e){return _0x29ea3f===_0x1bb27e;},'gVLiZ':_0x2a788a(0x28e,0x249,0x2cc,0x2f4),'XLunF':function(_0x2672c6,_0x29aad9){return _0x2672c6!==_0x29aad9;},'AbYYy':'zeqaX','sjkGB':'dXgRI','zyLuZ':function(_0x2892e7,_0x27ab12){return _0x2892e7!==_0x27ab12;},'xryrE':_0x2a788a(0x333,0x36f,0x334,0x3f7),'KwUTd':_0x474cf8(0x393,0x457,0x3ab,0x339)+'内容','bGfJc':_0x474cf8(0x3bf,0x416,0x3e7,0x468),'rGzyd':_0x474cf8(0x288,0x219,0x24b,0x1b0),'ZpOXa':function(_0x260cef){return _0x260cef();},'GfVLg':_0x474cf8(0x281,0x3bb,0x311,0x360)+_0x474cf8(0x3d5,0x370,0x30d,0x25c)+_0x474cf8(0x3c6,0x360,0x3a7,0x3ff),'PYBXD':function(_0x5e06a8,_0x207368){return _0x5e06a8!==_0x207368;},'kyZHV':_0x474cf8(0x2cf,0x318,0x247,0x1a3),'FlMbI':function(_0x4197f2,_0x140793){return _0x4197f2(_0x140793);},'UTrkz':function(_0x2e6001,_0x1ac86a){return _0x2e6001(_0x1ac86a);}},_0x1669f9=extension_settings[extensionName],_0x5dd3fa=_0x1669f9[_0x474cf8(0x2ce,0x1a1,0x24d,0x259)+_0x2a788a(0x359,0x318,0x2ec,0x288)][_0x3c69dc];if(!_0x5dd3fa){toastr[_0x2a788a(0x3d9,0x3a1,0x30a,0x321)](_0x2a788a(0x1e7,0x209,0x280,0x349));return;}const _0x41fd15={};_0x41fd15['nameCN']=_0x2808f9[_0x474cf8(0x4bb,0x31b,0x3f2,0x3dd)],_0x41fd15['nameEN']=_0x2808f9[_0x2a788a(0x2ba,0x343,0x2f1,0x329)];function _0x474cf8(_0x36cccf,_0x2717ff,_0x4ed7e8,_0x2519b2){return _0xfdee(_0x4ed7e8-0x160,_0x36cccf);}_0x41fd15['characterT'+_0x474cf8(0x2cb,0x457,0x3a3,0x431)]='角色特征',_0x41fd15['facialFeat'+_0x2a788a(0x24c,0x1a9,0x221,0x1f9)]=_0x2808f9['vtlkM'],_0x41fd15[_0x2a788a(0x1c9,0x275,0x26d,0x1e1)+_0x474cf8(0x2ba,0x2f4,0x2cd,0x393)]=_0x2808f9[_0x2a788a(0x2cd,0x303,0x2d6,0x25b)];function _0x2a788a(_0x489af4,_0x32c1f7,_0x17bf04,_0x3fde55){return _0xfdee(_0x17bf04-0x121,_0x489af4);}_0x41fd15[_0x474cf8(0x309,0x2bd,0x374,0x441)+'FW']='上半身SFW',_0x41fd15['upperBodyS'+_0x2a788a(0x45d,0x30f,0x3a5,0x38b)]=_0x2808f9[_0x2a788a(0x16f,0x264,0x235,0x300)],_0x41fd15['fullBodySF'+'W']=_0x2808f9[_0x2a788a(0x3c4,0x30c,0x399,0x371)],_0x41fd15[_0x474cf8(0x329,0x387,0x3a6,0x3a4)+_0x474cf8(0x2ec,0x371,0x2a8,0x1d3)]=_0x474cf8(0x413,0x37c,0x341,0x3fe),_0x41fd15[_0x2a788a(0x41a,0x280,0x34f,0x371)+'SFW']=_0x2808f9['isycm'],_0x41fd15[_0x2a788a(0x2c3,0x377,0x34f,0x3a0)+_0x2a788a(0x244,0x255,0x2d0,0x373)]=_0x2808f9['uyqpl'],_0x41fd15[_0x474cf8(0x26d,0x2b8,0x2b2,0x225)+'FW']=_0x2808f9[_0x474cf8(0x30a,0x373,0x2a3,0x202)],_0x41fd15['fullBodyNS'+_0x474cf8(0x486,0x3b4,0x3e4,0x351)]=_0x2808f9[_0x2a788a(0x267,0x2c0,0x25b,0x1c2)];const _0x4a6edd=_0x41fd15;let _0x5f630=-0x26*0xa+0x177e+-0x1*0x1602;for(const _0x5c8a3b in _0x4a6edd){if(_0x2808f9[_0x2a788a(0x3aa,0x3e8,0x3a6,0x325)](_0x474cf8(0x24d,0x38f,0x2e0,0x2cd),_0x2808f9[_0x2a788a(0x311,0x3c9,0x339,0x2da)]))return _0x3dafda[_0x474cf8(0x2fd,0x41c,0x3bd,0x3ce)]();else{if(_0x2e0310[_0x5c8a3b]&&_0x2808f9[_0x474cf8(0x26e,0x2d9,0x306,0x277)](_0x2e0310[_0x5c8a3b],_0x5dd3fa[_0x5c8a3b])){if(_0x2808f9[_0x474cf8(0x362,0x2e5,0x338,0x321)](_0x2808f9[_0x474cf8(0x335,0x38b,0x3be,0x3cd)],_0x2808f9[_0x474cf8(0x30f,0x249,0x2d2,0x38b)]))_0x5f630++;else return null;}}}if(_0x2808f9[_0x474cf8(0x30f,0x318,0x3e5,0x41f)](_0x5f630,0xe38+0x12*-0xb7+-0x15a)){if(_0x2808f9[_0x2a788a(0x2b7,0x2c1,0x2c8,0x34b)](_0x2808f9[_0x474cf8(0x49f,0x48b,0x3e0,0x4ad)],_0x2a788a(0x327,0x2d7,0x30d,0x24c))){toastr[_0x474cf8(0x2bc,0x31c,0x281,0x29e)](_0x2808f9[_0x474cf8(0x3b9,0x325,0x39c,0x38a)]);return;}else{if(_0x2808f9['KXAys'](_0x39b16f['id'],_0x2f15cf))return;_0x52ee12(),_0x1064c4[_0x2a788a(0x408,0x3f7,0x39e,0x336)]?_0x2808f9[_0x474cf8(0x27e,0x338,0x295,0x34b)](_0x5b1053,_0x508e2b['result']):_0x2808f9[_0x474cf8(0x30b,0x2c9,0x295,0x2eb)](_0x528a13,new _0x43e6e9(_0xc5fe70[_0x474cf8(0x3aa,0x395,0x2ea,0x26b)]||_0x2808f9[_0x474cf8(0x319,0x2e2,0x323,0x371)]));}}const _0xd24800=_0x2a788a(0x348,0x39a,0x330,0x330)+_0x3c69dc+_0x474cf8(0x45d,0x32f,0x3dc,0x373)+_0x5f630+_0x2a788a(0x24e,0x265,0x29e,0x354),_0x1fed92=await _0x2808f9[_0x2a788a(0x26f,0x1ad,0x256,0x1ce)](stylishConfirm,_0xd24800);if(!_0x1fed92){if(_0x2808f9[_0x474cf8(0x338,0x3af,0x3e5,0x4be)](_0x2808f9[_0x2a788a(0x15c,0x2e0,0x223,0x1be)],_0x2808f9[_0x474cf8(0x22e,0x1a0,0x262,0x1ae)])){toastr['info'](_0x2808f9['rGzyd']);return;}else _0x2637d8[_0x474cf8(0x477,0x33c,0x3fd,0x465)]=[];}for(const _0x2e22fd in _0x4a6edd){_0x2e0310[_0x2e22fd]&&(_0x5dd3fa[_0x2e22fd]=_0x2e0310[_0x2e22fd]);}_0x2808f9[_0x474cf8(0x2e2,0x426,0x39e,0x3fb)](saveSettingsDebounced);const _0x2b6c28=_0x2808f9[_0x474cf8(0x2cb,0x2d9,0x295,0x246)]($,_0x2808f9['GfVLg']);_0x2b6c28[_0x474cf8(0x395,0x2f5,0x2f6,0x26c)]&&(_0x2808f9[_0x474cf8(0x274,0x366,0x33b,0x3ec)](_0x2808f9[_0x2a788a(0x243,0x271,0x2a8,0x31d)],_0x2808f9[_0x2a788a(0x24a,0x205,0x2a8,0x239)])?_0x18a08a[_0x2a788a(0x39e,0x2e4,0x3b9,0x424)](..._0x210904['matchedOut'+_0x2a788a(0x1f2,0x277,0x2b5,0x332)]):_0x2808f9[_0x2a788a(0x3e9,0x338,0x383,0x39c)](refreshCharacterSettings,_0x2b6c28)),_0x2808f9[_0x474cf8(0x2a3,0x36f,0x361,0x28e)](updateFormFields,_0x2e0310),console[_0x474cf8(0x28e,0x3b5,0x301,0x2d4)]('[character'+_0x2a788a(0x381,0x464,0x3ac,0x403)+_0x474cf8(0x378,0x39c,0x30c,0x379)+'设\x20\x22'+_0x3c69dc+'\x22');}async function updateOutfitPresetsFromLLM(_0x1698ea){const _0x5ddad2={'lukCI':function(_0x1b5143,_0x349679){return _0x1b5143(_0x349679);},'APIUH':_0x49b566(0x3d,0xd8,-0x51,0x72),'OntTk':function(_0xb94c21){return _0xb94c21();},'LAQzZ':_0x2d168f(0x192,0x14b,0x117,0x42)+_0x49b566(-0xf0,-0x1c0,-0xdf,-0x1a1),'lOVGD':function(_0x5e4bc6,_0x820c37){return _0x5e4bc6===_0x820c37;},'bqCFc':'text','xqSPL':'中文名称','EStGI':_0x2d168f(0x16c,0x13d,0xc7,0x124),'dXmyx':'上半身','SaeNQ':'下半身','JEpSy':_0x49b566(0x2d,0xbf,0x9,0x103),'YAmvi':_0x49b566(-0xea,-0xef,-0x171,-0x142),'qWOZx':_0x2d168f(0x94,0x1a0,0x11e,0x1b0),'YVxYX':function(_0x211111,_0x56fa85){return _0x211111!==_0x56fa85;},'DEyqE':'oSlnN','jbGGy':function(_0x11eb45,_0x42bb5c){return _0x11eb45!==_0x42bb5c;},'ENAmo':_0x2d168f(0x1d3,0x1c0,0x12d,0x50),'eferu':function(_0x26213e,_0x1da2c9){return _0x26213e(_0x1da2c9);},'HwsvK':function(_0x45edea,_0x4f9724){return _0x45edea===_0x4f9724;},'diNGt':'SttdD','AHAEV':_0x49b566(-0x7f,-0x15,-0xae,-0xf1),'lhdYJ':_0x49b566(-0xfd,-0x68,-0x7a,-0xdb),'oQGOq':function(_0x54f1a6,_0x340a74){return _0x54f1a6(_0x340a74);},'gxnza':function(_0x1dab08){return _0x1dab08();},'JIbhq':function(_0x4a6995,_0x54204e){return _0x4a6995(_0x54204e);},'CLVrG':_0x49b566(-0x66,-0x12d,-0x12b,0x1b)+'-tab-chara'+'cter','sJNgq':_0x49b566(-0x9d,-0x4c,-0xdf,-0x157),'EvPgE':function(_0x13d012,_0x2bcf39){return _0x13d012(_0x2bcf39);}},_0x23697e=extension_settings[extensionName],_0x47d3c8={};function _0x49b566(_0x3cdeb6,_0x494d09,_0x11048f,_0x10a31b){return _0xfdee(_0x3cdeb6- -0x217,_0x11048f);}_0x47d3c8[_0x2d168f(-0x8e,-0xd2,-0x24,-0x5b)]=_0x5ddad2[_0x49b566(-0x109,-0x7e,-0xa5,-0x8b)],_0x47d3c8[_0x2d168f(0xc4,-0x55,0x34,-0x2e)]=_0x5ddad2[_0x2d168f(0x1d0,0x146,0x155,0x149)],_0x47d3c8[_0x2d168f(0x59,-0x4f,0x57,0xdf)]='归属人',_0x47d3c8[_0x49b566(0x33,0xa1,-0x95,0xb0)]=_0x5ddad2['dXmyx'],_0x47d3c8['upperBodyB'+'ack']='上半身背面',_0x47d3c8['fullBody']=_0x5ddad2[_0x2d168f(0x6c,0x12c,0x122,0x1b8)],_0x47d3c8[_0x2d168f(0x3f,0xf0,0xa8,0x10e)+'ck']=_0x5ddad2[_0x2d168f(0xaf,0xf3,0x39,0x108)];const _0x1120b5=_0x47d3c8;for(const _0x3478bb of _0x1698ea){const _0x1e1331=_0x3478bb[_0x49b566(-0x11c,-0x16c,-0x129,-0x1c5)];if(!_0x1e1331)continue;const _0x26c5b1=_0x23697e[_0x2d168f(0x101,0xbf,0x5c,-0x23)+_0x49b566(-0x124,-0x17a,-0x95,-0x49)]?.[_0x1e1331];if(_0x26c5b1){if(_0x5ddad2[_0x2d168f(0xe7,0x6e,0x45,-0x68)](_0x5ddad2[_0x49b566(0x4d,-0x32,0xf4,0xd5)],_0x5ddad2[_0x49b566(-0x119,-0xed,-0x1c1,-0x195)]))_0x5ddad2[_0x2d168f(0x76,-0xe,0x73,-0x47)](_0x4a0849,new _0x2e1b72(_0x4aa9d8['result']||_0x5ddad2[_0x49b566(0x10,-0x60,0x8a,0x77)]));else{let _0x297e13=-0x17c8+0xbbf+0xc09;for(const _0x691baa in _0x1120b5){if(_0x5ddad2[_0x49b566(-0x20,0x99,-0xd7,0x7f)](_0x2d168f(0x1dc,0x1cc,0x102,0x188),_0x5ddad2[_0x2d168f(0x26,0x8a,0xd5,0xa5)]))_0x3478bb[_0x691baa]&&_0x5ddad2[_0x49b566(0xc,-0x4,0xb3,-0x11)](_0x3478bb[_0x691baa],_0x26c5b1[_0x691baa])&&(_0x5ddad2[_0x2d168f(0x8,-0x70,0x45,0xd9)](_0x2d168f(0x71,0x11d,0x86,0x5),_0x5ddad2[_0x49b566(0x49,0x10b,0x5c,0xea)])?(_0x5ddad2[_0x2d168f(0x12e,0x94,0xb0,0x184)](_0x4beec8),_0x5ddad2[_0x2d168f(0x22,-0x2a,0x73,0x62)](_0x308d35,new _0x18a61d(_0x5ddad2[_0x2d168f(0x102,0xf5,0x4a,0xa6)]))):_0x297e13++);else{const _0x526d5c=_0x569c3d['apply'](_0x48e69d,arguments);return _0x1fcc86=null,_0x526d5c;}}if(_0x297e13===-0x11*-0xc5+0x2011+0x1*-0x2d26){console['log'](_0x2d168f(0x3f,0x138,0x100,0x124)+_0x49b566(0x74,0x14f,0x7a,0x4f)+'fy]\x20服装\x20\x22'+_0x1e1331+_0x49b566(-0x105,-0x1a8,-0xf5,-0xa9));continue;}const _0x4ac36f=_0x2d168f(0x62,-0x41,-0x2b,-0x101)+_0x1e1331+_0x2d168f(0x1fb,0xc6,0x15d,0x1c4)+_0x297e13+_0x49b566(-0x9a,0x27,-0x40,-0x30),_0xcb129d=await _0x5ddad2[_0x49b566(0x6,0xbf,0x20,0x52)](stylishConfirm,_0x4ac36f);if(!_0xcb129d){if(_0x5ddad2[_0x49b566(-0x2a,-0xae,-0xd3,0x15)](_0x5ddad2[_0x49b566(-0xb7,-0xab,-0x14,-0x43)],_0x5ddad2[_0x2d168f(-0x6d,0x48,0x41,-0x47)]))continue;else _0x477d26['matchedOut'+'fits']['push'](_0x30b91d[_0x2d168f(0x84,0x15e,0x110,0x12a)]);}for(const _0x4d6724 in _0x1120b5){if(_0x3478bb[_0x4d6724]){if(_0x5ddad2['HwsvK'](_0x49b566(-0x7f,-0x92,-0x1,-0x54),_0x5ddad2[_0x49b566(0x71,-0x14,-0x15,0x133)]))_0x26c5b1[_0x4d6724]=_0x3478bb[_0x4d6724];else{if(_0x5ddad2[_0x49b566(-0xb3,-0x180,0x1a,-0x157)](_0x34bd21[_0x49b566(-0xd1,-0x160,-0x161,-0xe1)],_0x5ddad2[_0x2d168f(0x9a,-0x69,0x6f,0x65)])&&_0x2462bf[_0x2d168f(0x2f,0x123,0xad,0x2f)][_0x49b566(-0x58,-0xf7,-0xbf,-0xf5)](_0x45cf21))return _0xffab0c;}}}console[_0x49b566(-0x76,-0x78,-0xad,-0x8d)](_0x2d168f(0x17f,0xf4,0x100,0xab)+'PromptModi'+'fy]\x20已更新服装预'+'设\x20\x22'+_0x1e1331+'\x22');}}else{if(_0x5ddad2[_0x49b566(0xc,0x1f,0xa8,-0x4b)](_0x2d168f(0xb8,0x68,0x129,0xdf),_0x5ddad2[_0x49b566(-0x53,0x7,-0x12d,0x20)])){const _0x8bed38=_0x2d168f(0xec,0x1ef,0x116,0xd1)+_0x1e1331+_0x2d168f(0xc8,0xb8,0x131,0x6f),_0x499994=await _0x5ddad2[_0x2d168f(0x19,-0x32,-0x7,0x3e)](stylishConfirm,_0x8bed38);if(!_0x499994)continue;!_0x23697e[_0x2d168f(0x4d,-0x30,0x5c,0xa3)+'ets']&&(_0x23697e[_0x49b566(-0x9c,-0x6f,-0xa3,-0x2)+_0x2d168f(-0x93,0x87,-0x2c,-0x22)]={});const _0x25a85b={};_0x25a85b[_0x2d168f(0x25,-0xb7,-0x24,-0x9f)]=_0x3478bb[_0x49b566(-0x11c,-0x198,-0x14d,-0xae)],_0x25a85b['nameEN']=_0x3478bb['nameEN']||'',_0x25a85b[_0x2d168f(-0x13,0xed,0x57,-0x23)]=_0x3478bb[_0x2d168f(0xcc,-0x78,0x57,0xa4)]||'',_0x25a85b[_0x2d168f(0x123,0x60,0x12b,0xa0)]=_0x3478bb[_0x2d168f(0x9d,0x8e,0x12b,0x205)]||'',_0x25a85b[_0x2d168f(0x1eb,0x213,0x16f,0x21b)+_0x2d168f(0xd4,0x5d,0x51,0x4b)]=_0x3478bb[_0x49b566(0x77,-0x36,0x80,0x21)+'ack']||'',_0x25a85b[_0x49b566(0x53,0x11a,0xb6,0x7f)]=_0x3478bb[_0x2d168f(0x182,0x6f,0x14b,0x174)]||'',_0x25a85b[_0x49b566(-0x50,0x33,-0x12c,0x4d)+'ck']=_0x3478bb[_0x2d168f(0xac,0x167,0xa8,0xd8)+'ck']||'',_0x23697e[_0x49b566(-0x9c,-0x154,0x27,-0x4d)+'ets'][_0x1e1331]=_0x25a85b,console[_0x2d168f(-0x16,0x138,0x82,0x81)](_0x2d168f(0x178,0xdc,0x100,0x88)+_0x49b566(0x74,0xb5,-0x18,-0x16)+'fy]\x20已创建服装预'+_0x49b566(-0xba,-0x3,-0x67,-0x76)+_0x1e1331+'\x22');if(_0x3478bb['owner']&&_0x3478bb['owner'][_0x49b566(-0x19,-0x3b,-0x7e,-0xd6)]()){const _0x450f23=_0x3478bb['owner'][_0x2d168f(0xa,0x74,0xdf,0xc3)]()[_0x49b566(-0x69,-0x3,-0xaa,-0x67)+'e']()[_0x49b566(0x6b,0xec,0x36,0x88)](/\s+/g,'');for(const [_0x168ffc,_0x25277a]of Object[_0x49b566(0x4e,0x95,-0x40,0xf6)](_0x23697e['characterP'+_0x49b566(-0x4c,-0x10b,0x87,0x23)]||{})){if(_0x25277a[_0x2d168f(0x2c,0x22,0x34,0x84)]&&_0x5ddad2[_0x2d168f(0xf,0x87,0x45,0xee)](_0x25277a[_0x49b566(-0xc4,-0xb9,-0x129,-0xb0)]['toLowerCas'+'e']()[_0x49b566(0x6b,0xb5,0x104,-0x3d)](/\s+/g,''),_0x450f23)){!_0x25277a[_0x49b566(0x86,0x30,0x27,0x10)]&&(_0x25277a[_0x2d168f(0x185,0x1af,0x17e,0x119)]=[]);!_0x25277a[_0x49b566(0x86,-0x2e,0x143,0x38)][_0x2d168f(0x15b,0x144,0xa0,-0x3e)](_0x1e1331)&&(_0x25277a[_0x2d168f(0x196,0xc6,0x17e,0x220)]['push'](_0x1e1331),console[_0x49b566(-0x76,-0x114,-0x11a,0x12)](_0x2d168f(0x136,0x73,0x100,0x1ab)+'PromptModi'+_0x49b566(0x38,0xeb,0x39,0x10f)+_0x1e1331+_0x49b566(-0xf3,-0xf6,-0x119,-0x121)+_0x168ffc+'\x22'));break;}}}}else _0x1a0c49['log']('[character'+_0x2d168f(0x12b,0x20b,0x16c,0x20a)+'fy]\x20未识别的服装'+_0x2d168f(0xb1,-0x8e,0x49,0x11e)+_0xde197a+'\x22');}}_0x5ddad2['gxnza'](saveSettingsDebounced);const _0x7cd137=_0x5ddad2[_0x49b566(-0xcd,-0x12e,-0x19a,-0xe9)]($,_0x5ddad2[_0x2d168f(-0x45,-0x28,0x83,-0x2)]);function _0x2d168f(_0x119b1e,_0x36768d,_0xd6bcc2,_0x38cb81){return _0xfdee(_0xd6bcc2- -0x11f,_0x38cb81);}_0x7cd137[_0x2d168f(-0x9,-0x8,0x77,0xca)]&&(_0x5ddad2['sJNgq']!==_0x5ddad2['sJNgq']?_0x4e3479[_0x49b566(0x81,0x10a,-0x7,0xfc)](_0x27d562[_0x49b566(0x18,0x85,-0x21,0xb0)]):_0x5ddad2[_0x2d168f(-0x12,0x9b,0x42,0xa4)](refreshCharacterSettings,_0x7cd137));}function updateFormFields(_0x2a100e){function _0x43c918(_0x28ddd5,_0x407812,_0x2f4151,_0x5197c1){return _0xfdee(_0x28ddd5- -0x3e,_0x5197c1);}const _0x58ef5d={'IaNWK':function(_0x41241f,_0x16488e){return _0x41241f(_0x16488e);},'aHXiH':_0x43c918(0xbd,-0x3,0xaa,0xf3),'csiFF':'characterT'+_0x43c918(0x205,0x29f,0x188,0x17a),'eNgji':'facialFeat'+'ures','sipnW':_0xabf18e(-0x17d,-0x11,-0x26,-0xe0)+_0xabf18e(-0x151,-0x162,-0x1,-0xbf),'lyhWP':_0xabf18e(-0x40,0x7d,-0x93,-0x18)+_0xabf18e(-0x66,0x7b,-0x58,0x58),'PadmR':_0x43c918(0x208,0x12b,0x1b8,0x273)+'W','beXZU':_0x43c918(0x1f0,0x235,0x232,0x252)+_0xabf18e(-0x12a,0x52,-0xb1,-0x7d),'nJSKG':_0xabf18e(-0x4c,-0x123,-0xf3,-0xda)+'FW','FaKLm':_0x43c918(0x114,0x155,0x9b,0xd0)+_0xabf18e(-0x2e,-0x45,-0x38,0x58)},_0x6481cb=[_0x58ef5d[_0x43c918(0x1bd,0x21c,0x19b,0x22a)],'nameEN',_0x58ef5d[_0xabf18e(-0x25,-0x18a,-0xf1,-0xfd)],_0x58ef5d[_0xabf18e(-0x1dc,-0x218,-0x73,-0x13e)],_0x58ef5d[_0xabf18e(-0x57,-0x27,-0x187,-0xf1)],_0xabf18e(0xab,-0x17,-0x29,-0x18)+'FW',_0x58ef5d[_0xabf18e(0x94,-0x44,-0xf,-0x4)],_0x58ef5d[_0x43c918(0xc7,0x3e,0xb2,0x4d)],_0xabf18e(0x10,0xbd,0x2c,0x1a)+_0x43c918(0x10a,0x71,0xcc,0x36),'upperBodyN'+_0x43c918(0x215,0x2e2,0x252,0x296),_0x58ef5d[_0xabf18e(-0xca,-0x6e,-0x6,-0x74)],_0x58ef5d[_0x43c918(0x110,0xf8,0x1c0,0x71)],_0x58ef5d['FaKLm']];function _0xabf18e(_0x445deb,_0x285364,_0x1edb5a,_0x118db0){return _0xfdee(_0x118db0- -0x22c,_0x1edb5a);}_0x6481cb[_0x43c918(0x1a1,0x176,0x17e,0x21a)](_0x449a71=>{function _0x12780c(_0x4c8eea,_0x16430e,_0x3626b6,_0x5ba470){return _0x43c918(_0x4c8eea- -0x2a0,_0x16430e-0x10e,_0x3626b6-0x44,_0x5ba470);}function _0x21c0a8(_0x123553,_0x2644db,_0x32a6c2,_0x3de53d){return _0x43c918(_0x123553- -0x324,_0x2644db-0xe7,_0x32a6c2-0x163,_0x2644db);}if(_0x2a100e[_0x449a71]){const _0x36fac1=document[_0x12780c(-0x107,-0x3b,-0x2f,-0x1ab)+_0x21c0a8(-0x1f6,-0x15c,-0x28a,-0x1bd)](_0x21c0a8(-0xd3,-0x18,-0xf2,-0x71)+_0x449a71);_0x36fac1&&(_0x36fac1['value']=_0x2a100e[_0x449a71],_0x58ef5d['IaNWK']($,_0x36fac1)[_0x21c0a8(-0xf6,-0x11c,-0xc2,-0xaf)](_0x21c0a8(-0x1c7,-0x134,-0x237,-0x29c)));}});}