(function(_0x32f402,_0x295c76){const _0x3698b8=_0x32f402();function _0x8175ef(_0x504f41,_0x3605b6,_0x5b252b,_0x16e260){return _0x2cfd(_0x16e260- -0x3bf,_0x5b252b);}function _0xe5fd2(_0x275aff,_0x59706c,_0x576768,_0x44716e){return _0x2cfd(_0x275aff-0xb5,_0x59706c);}while(!![]){try{const _0x1157cf=-parseInt(_0x8175ef(-0x29d,-0x2a7,-0x207,-0x214))/(0x1fdb+-0x11*-0x23b+-0x35*0x151)*(parseInt(_0xe5fd2(0x1e9,0x24a,0x1c3,0x248))/(-0x240f+-0x11*0x21d+-0xc2*-0x5f))+parseInt(_0xe5fd2(0x2a3,0x351,0x2aa,0x343))/(0x1a03*-0x1+-0xf6c+-0x84a*-0x5)*(-parseInt(_0x8175ef(-0x32b,-0x1e1,-0x2e5,-0x27f))/(0x1*-0x697+0x6*0x57f+-0x1a5f))+parseInt(_0xe5fd2(0x196,0x1c9,0x113,0x200))/(0x5*-0x44d+-0x1*0x1297+0x281d)*(parseInt(_0x8175ef(-0x2a2,-0x30f,-0x2e0,-0x2ea))/(0xaaa+-0x1fa0+-0x22*-0x9e))+parseInt(_0xe5fd2(0x2a0,0x347,0x243,0x24f))/(-0x1481+0xa6d*0x3+-0xabf)*(parseInt(_0x8175ef(-0x241,-0x1b0,-0x2e0,-0x22d))/(-0x16b0+-0x218e+0x3846))+parseInt(_0x8175ef(-0x1af,-0x2cb,-0x253,-0x217))/(0x24ae+-0x1a*0xa9+-0x137b*0x1)+-parseInt(_0xe5fd2(0x26e,0x293,0x202,0x310))/(0x1f35*0x1+-0x371*-0x1+-0x114e*0x2)+parseInt(_0xe5fd2(0x228,0x181,0x2bd,0x2bf))/(-0x13*-0x187+0x7b*0x1f+-0x2bdf);if(_0x1157cf===_0x295c76)break;else _0x3698b8['push'](_0x3698b8['shift']());}catch(_0x2ddcf3){_0x3698b8['push'](_0x3698b8['shift']());}}}(_0x4f89,-0xecfca*0x1+0x6a75a+-0xd6*-0x154a));function _0x2cfd(_0x196e12,_0x39bb99){const _0x538619=_0x4f89();return _0x2cfd=function(_0x2380a4,_0x4faf24){_0x2380a4=_0x2380a4-(0x3*0x4bd+0x962*-0x3+0xeb4);let _0x185b33=_0x538619[_0x2380a4];if(_0x2cfd['GLfbZG']===undefined){var _0x40a9b4=function(_0x1f3d9c){const _0xfa62da='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1b9e38='',_0x1ce178='',_0x5c1f89=_0x1b9e38+_0x40a9b4;for(let _0x16377b=0x1376+0x7c*-0x29+0x66,_0x311124,_0x487241,_0x14f3c7=-0x7*0x2a1+-0x2153+0x33ba;_0x487241=_0x1f3d9c['charAt'](_0x14f3c7++);~_0x487241&&(_0x311124=_0x16377b%(-0x2677+-0x199*-0x15+0x4ee)?_0x311124*(0x1*-0x2d4+0x43*-0x7f+0x9*0x409)+_0x487241:_0x487241,_0x16377b++%(-0x1f12+-0xc7*-0xd+0x14fb))?_0x1b9e38+=_0x5c1f89['charCodeAt'](_0x14f3c7+(-0x1904+-0x26be+0x3fcc))-(0x11c6+-0x17a+-0x1042)!==-0x8*0x224+-0x15fc+-0x1*-0x271c?String['fromCharCode'](0xcca+-0x1518+0x1*0x94d&_0x311124>>(-(-0x1d22+-0x2*-0xfa2+0x1*-0x220)*_0x16377b&0x5*0x40f+-0x12f2+-0x153)):_0x16377b:-0x4*-0x7af+0x1056*0x1+0x1*-0x2f12){_0x487241=_0xfa62da['indexOf'](_0x487241);}for(let _0xfa25f8=-0xa14+-0xbea+0x15fe*0x1,_0x4093a7=_0x1b9e38['length'];_0xfa25f8<_0x4093a7;_0xfa25f8++){_0x1ce178+='%'+('00'+_0x1b9e38['charCodeAt'](_0xfa25f8)['toString'](0x26cd+0xac9*0x2+-0x3c4f*0x1))['slice'](-(-0x1*-0x17b9+-0x270d+-0x1*-0xf56));}return decodeURIComponent(_0x1ce178);};_0x2cfd['udRbAN']=_0x40a9b4,_0x196e12=arguments,_0x2cfd['GLfbZG']=!![];}const _0x436d12=_0x538619[-0x111*0x4+0x1*-0x18+0x45c],_0x453d51=_0x2380a4+_0x436d12,_0x336091=_0x196e12[_0x453d51];if(!_0x336091){const _0xb837fc=function(_0x405c53){this['lQuwFD']=_0x405c53,this['fOJuUm']=[-0x493*-0x8+-0x1*-0x1eb5+-0x434c,0xe6d+0x23db+-0x8*0x649,0x1*-0xf09+0x1ca2+0xd99*-0x1],this['tHlMLg']=function(){return'newState';},this['MMPLKS']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['TNJMfT']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xb837fc['prototype']['cyfnAU']=function(){const _0x2ae5e=new RegExp(this['MMPLKS']+this['TNJMfT']),_0x291353=_0x2ae5e['test'](this['tHlMLg']['toString']())?--this['fOJuUm'][0x97*0xb+0xe3+-0x3*0x275]:--this['fOJuUm'][-0x214d+-0x7b4*0x1+0x2901];return this['fBfFSn'](_0x291353);},_0xb837fc['prototype']['fBfFSn']=function(_0x4e4ddc){if(!Boolean(~_0x4e4ddc))return _0x4e4ddc;return this['eWArSq'](this['lQuwFD']);},_0xb837fc['prototype']['eWArSq']=function(_0x452787){for(let _0x5e79c8=0xf39+-0x15*0x11f+-0x429*-0x2,_0x51385c=this['fOJuUm']['length'];_0x5e79c8<_0x51385c;_0x5e79c8++){this['fOJuUm']['push'](Math['round'](Math['random']())),_0x51385c=this['fOJuUm']['length'];}return _0x452787(this['fOJuUm'][-0x5fe+-0x66a+0x634*0x2]);},new _0xb837fc(_0x2cfd)['cyfnAU'](),_0x185b33=_0x2cfd['udRbAN'](_0x185b33),_0x196e12[_0x453d51]=_0x185b33;}else _0x185b33=_0x336091;return _0x185b33;},_0x2cfd(_0x196e12,_0x39bb99);}const _0x568ec3=(function(){const _0xc0f450={};_0xc0f450[_0x1d86fc(-0x31,-0x58,-0x96,0xa)]=_0x5a5e30(-0x13b,-0x9d,-0x6b,-0x92);function _0x1d86fc(_0x220c3b,_0x306a30,_0x59e9ce,_0x44b714){return _0x2cfd(_0x306a30- -0x1c1,_0x44b714);}_0xc0f450[_0x5a5e30(-0x2f,0x62,-0x31,0xf5)]=_0x1d86fc(-0x65,0x45,0xad,0x6b),_0xc0f450[_0x1d86fc(-0x7d,-0x12,-0xb8,0x9b)]='tEGIV',_0xc0f450[_0x5a5e30(0xb1,0x5,0x91,-0xa5)]=_0x5a5e30(-0x111,-0x76,-0xca,-0x117);const _0xe9586=_0xc0f450;function _0x5a5e30(_0x2f08f5,_0x405953,_0x21d8d4,_0x1aeb9a){return _0x2cfd(_0x405953- -0x1a0,_0x2f08f5);}let _0xf4d09=!![];return function(_0x22f4aa,_0x486f87){const _0x4d0816={};_0x4d0816[_0xb1f715(0x2d,0x2,-0x87,0x15)]=_0xe9586['lOfpv'];const _0x1338e7=_0x4d0816;function _0x4d935d(_0x129bdf,_0x3921c4,_0x1b8910,_0x278756){return _0x1d86fc(_0x129bdf-0x1c6,_0x129bdf- -0xf9,_0x1b8910-0xd2,_0x1b8910);}function _0xb1f715(_0x1607ec,_0x2ff136,_0x2aef47,_0x61d4f4){return _0x1d86fc(_0x1607ec-0x125,_0x2ff136-0xe1,_0x2aef47-0x1c6,_0x1607ec);}if(_0xe9586['oAsUF']===_0x4d935d(-0x154,-0x14a,-0x168,-0x16b)){let _0x122c88=_0x28869b[_0xb1f715(0xe2,0xf5,0x181,0x103)](/:/g,':')[_0xb1f715(0x175,0xf5,0x4f,0xc5)](/\(/g,'（')[_0x4d935d(-0xe5,-0x112,-0xba,-0xfc)](/\)/g,'）')[_0x4d935d(-0xe5,-0xb6,-0x163,-0x12b)](/,/g,',');return _0x122c88=_0x122c88[_0x4d935d(-0xe5,-0xdf,-0xdb,-0x11d)](/下半身NSWebcam:/g,_0xe9586['nxchw']),_0x122c88=_0x122c88['replace'](/下半身NSFW_背面:/g,_0xe9586[_0x4d935d(-0x151,-0x173,-0x1cf,-0xad)]),_0x122c88=_0x122c88[_0xb1f715(0xd5,0xf5,0x91,0x4e)](/上半身NSFW_背面:/g,_0xe9586[_0x4d935d(-0xb8,-0x8,-0x141,-0x2f)]),_0x122c88;}else{const _0x26aa01=_0xf4d09?function(){function _0x55ec7b(_0x592688,_0x143993,_0x190660,_0x4472f8){return _0x4d935d(_0x592688-0x49c,_0x143993-0x18d,_0x143993,_0x4472f8-0x1c);}function _0x416a86(_0x46dc11,_0x2bfe07,_0xd1447,_0x2b74d0){return _0x4d935d(_0x46dc11-0x52b,_0x2bfe07-0x28,_0x2bfe07,_0x2b74d0-0x103);}if(_0x486f87){if(_0x1338e7[_0x55ec7b(0x2c4,0x2ad,0x34a,0x226)]===_0x1338e7[_0x55ec7b(0x2c4,0x2e0,0x27d,0x2a8)]){const _0x510f76=_0x486f87[_0x55ec7b(0x2f9,0x28a,0x30b,0x2d9)](_0x22f4aa,arguments);return _0x486f87=null,_0x510f76;}else{const _0xfd5bb4=_0xbe43e?function(){function _0x208395(_0x4a29b9,_0x5bbbd9,_0x1f159e,_0x1e6313){return _0x416a86(_0x1f159e- -0x364,_0x1e6313,_0x1f159e-0x10f,_0x1e6313-0xfc);}if(_0x2c3c2c){const _0x30aa24=_0x4c5d11[_0x208395(0x99,0x7a,0x24,-0x5)](_0x4025cf,arguments);return _0x45b416=null,_0x30aa24;}}:function(){};return _0x14ed18=![],_0xfd5bb4;}}}:function(){};return _0xf4d09=![],_0x26aa01;}};}()),_0x3ec3c6=_0x568ec3(this,function(){function _0x335861(_0x18a00b,_0x4b802e,_0x50eea7,_0x27a087){return _0x2cfd(_0x4b802e-0xd6,_0x50eea7);}const _0x2fb3c9={};function _0x289ceb(_0x481557,_0x212a9b,_0x4bfbbe,_0x174b86){return _0x2cfd(_0x481557- -0xed,_0x174b86);}_0x2fb3c9[_0x289ceb(0x13a,0x17b,0x1dc,0x160)]='(((.+)+)+)'+'+$';const _0x23efe5=_0x2fb3c9;return _0x3ec3c6[_0x335861(0x2ea,0x279,0x2b4,0x28f)]()[_0x335861(0x31f,0x2fa,0x349,0x37f)](_0x23efe5[_0x289ceb(0x13a,0x156,0xb8,0x19d)])[_0x335861(0x29f,0x279,0x1e4,0x317)]()[_0x289ceb(0x10b,0xf6,0x12f,0x61)+'r'](_0x3ec3c6)[_0x335861(0x2f3,0x2fa,0x34f,0x29f)](_0x23efe5[_0x335861(0x2ba,0x2fd,0x38c,0x384)]);});_0x3ec3c6();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';function _0x2ed6ba(_0x120f61,_0x721890,_0x58f059,_0x77cf54){return _0x2cfd(_0x120f61- -0x392,_0x721890);}import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x2cb6fc}from'./promptProcessor.js';function replacePlaceholder(_0x152db2,_0x3aa997,_0x3c6424,_0x215383){function _0x200735(_0x53cf42,_0x45f684,_0x3c1d97,_0x2ec63f){return _0x2cfd(_0x2ec63f-0x7a,_0x45f684);}function _0x1b0a2e(_0x92b76a,_0x5f565f,_0x2fe4f8,_0x5d8670){return _0x2cfd(_0x5d8670- -0x383,_0x92b76a);}const _0x38876d={'vcewO':_0x200735(0xac,0xf6,0x1b4,0x149),'vavHh':function(_0x5cac8a,_0x52ab53){return _0x5cac8a!==_0x52ab53;},'NVQEg':function(_0x90ca28,_0x2eaa85){return _0x90ca28(_0x2eaa85);},'YuBrp':function(_0x2ddf70,_0x1c4152){return _0x2ddf70===_0x1c4152;},'Jrxaa':_0x200735(0x242,0x1d7,0x1d8,0x228),'Uvbuu':_0x1b0a2e(-0x309,-0x1df,-0x2b1,-0x279),'lzSPv':function(_0x3225d5,_0x44622e){return _0x3225d5!==_0x44622e;},'sPETO':_0x200735(0xa1,0xe0,0x194,0x155),'sYNXs':_0x200735(0x221,0x26f,0x2b7,0x281),'jybzG':function(_0x3e50a0,_0x56b21b,_0x5c61b3,_0x21c289,_0x264909){return _0x3e50a0(_0x56b21b,_0x5c61b3,_0x21c289,_0x264909);}};if(_0x38876d[_0x200735(0x2c6,0x28c,0x22f,0x2a2)](typeof _0x152db2,_0x38876d['Jrxaa']))return _0x3c6424&&_0x152db2[_0x200735(0x29e,0x2d2,0x1c0,0x22b)](_0x3aa997)&&(_0x38876d[_0x1b0a2e(-0x159,-0x174,-0x250,-0x1a4)](_0x38876d[_0x200735(0xfd,0x18f,0x17c,0x178)],_0x38876d[_0x200735(0x1c3,0x1ab,0xe6,0x178)])?_0x85ad87(_0x367870[_0x1b0a2e(-0x1f4,-0x2e6,-0x265,-0x284)]):_0x215383&&_0x215383[_0x1b0a2e(-0x1cc,-0x1e9,-0x25c,-0x1cb)](_0x3aa997)),_0x152db2[_0x1b0a2e(-0x14c,-0x28c,-0x193,-0x1fe)](_0x3aa997,_0x3c6424);if(Array[_0x1b0a2e(-0x14e,-0x28f,-0x2b5,-0x203)](_0x152db2))return _0x152db2[_0x200735(0x1ed,0x243,0x112,0x1a2)](_0x3682e0=>replacePlaceholder(_0x3682e0,_0x3aa997,_0x3c6424,_0x215383));if(_0x152db2&&_0x38876d[_0x200735(0x31f,0x2ab,0x2d3,0x2a2)](typeof _0x152db2,'object')){if(_0x38876d[_0x1b0a2e(-0x1bc,-0x1d0,-0x249,-0x208)](_0x38876d[_0x1b0a2e(-0x1ce,-0x126,-0x23b,-0x1be)],_0x38876d[_0x200735(0x198,0x21b,0x1e1,0x23f)]))for(const _0x5b4488 of _0x158885[_0x1b0a2e(-0x276,-0x338,-0x248,-0x2b2)]){if(_0x5b4488[_0x1b0a2e(-0x1ab,-0xee,-0x208,-0x183)]===_0x38876d['vcewO']&&_0x5b4488[_0x200735(0xb7,0x12a,0xc6,0x149)]['includes'](_0x2cbbe1))return _0x383fa9;}else{const _0x4022a8={};for(const _0x63d838 in _0x152db2){if(_0x38876d[_0x1b0a2e(-0x1c2,-0xdc,-0x12a,-0x15b)](_0x38876d[_0x1b0a2e(-0x2d9,-0x264,-0x22f,-0x288)],_0x38876d[_0x200735(0x125,0x126,0x1a7,0x175)]))_0x4022a8[_0x63d838]=_0x38876d[_0x200735(0x275,0x1c6,0x1e1,0x1d9)](replacePlaceholder,_0x152db2[_0x63d838],_0x3aa997,_0x3c6424,_0x215383);else{const _0x47f38d={};_0x47f38d[_0x200735(0x244,0x2c2,0x303,0x27f)]=[];const _0x48c5db=_0x47f38d;_0x505767=_0x344fe0['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x200735(0x168,0x194,0x1cf,0x1b5)]();const _0x37ac0b=/<人物>([\s\S]*?)<\/人物>/g;let _0x33e06e;while(_0x38876d['vavHh'](_0x33e06e=_0x37ac0b[_0x200735(0x266,0x12f,0x115,0x1be)](_0xd51949),null)){const _0x4c5209=_0x38876d['NVQEg'](_0x45c2f9,_0x33e06e[0x15c4+-0x45*-0x5b+0x5*-0x942]),_0x28baf3=_0x38876d[_0x200735(0x302,0x213,0x26b,0x263)](_0x51add6,_0x4c5209);_0x28baf3&&_0x48c5db[_0x200735(0x26e,0x275,0x310,0x27f)]['push'](_0x28baf3);}return _0x48c5db;}}return _0x4022a8;}}return _0x152db2;}function attachImagesToMessage(_0x3ce44d,_0x498235,_0x46c8ab,_0x5da803=_0x2ed6ba(-0x1d4,-0x195,-0x22d,-0x1c5)){const _0x22fd24={};_0x22fd24[_0x39ee79(0x8c,0xc3,0xda,0xee)]=function(_0x42dce9,_0x368b46){return _0x42dce9===_0x368b46;},_0x22fd24[_0x39ee79(0x87,0x8a,0x9e,0x4a)]='string',_0x22fd24[_0x219bb1(-0x20,-0xba,-0x38,-0x6c)]=_0x39ee79(0xc5,0x1a,0x67,0x23),_0x22fd24['RDsAO']=function(_0x481275,_0x32b73d){return _0x481275+_0x32b73d;},_0x22fd24[_0x219bb1(-0x198,-0x196,-0x14a,-0x160)]='text',_0x22fd24[_0x39ee79(0xc0,0x128,0x109,0xeb)]='data:',_0x22fd24['RPAlL']=_0x39ee79(-0x8c,0x0,0x27,-0x69),_0x22fd24[_0x39ee79(0x48,0xb,0xc,0xbd)]=_0x219bb1(-0x92,-0xb9,-0x32,-0x1f),_0x22fd24['SOeUd']=function(_0x1f1137,_0x53c1e8){return _0x1f1137===_0x53c1e8;},_0x22fd24[_0x39ee79(0x7e,0x8c,0x108,-0x15)]=function(_0x4e67a7,_0x3d64f8){return _0x4e67a7<_0x3d64f8;},_0x22fd24[_0x219bb1(0x65,-0xd3,-0x44,-0x7b)]=function(_0x2f5bea,_0x41cf4d){return _0x2f5bea>=_0x41cf4d;},_0x22fd24[_0x219bb1(-0x29,0x50,-0x3e,-0xd2)]=function(_0x237661,_0x133ea6){return _0x237661===_0x133ea6;},_0x22fd24['HNreA']='zCQRf';function _0x219bb1(_0x13f443,_0x121b8d,_0x33cfb2,_0x775235){return _0x2ed6ba(_0x33cfb2-0x14b,_0x121b8d,_0x33cfb2-0x1c5,_0x775235-0xd0);}_0x22fd24[_0x39ee79(0x110,0x92,0x6a,0xbe)]=function(_0x41cba8,_0x131863){return _0x41cba8>_0x131863;},_0x22fd24['OsAjL']=function(_0x561f5f,_0xba6fa3){return _0x561f5f!==_0xba6fa3;},_0x22fd24['fvsBc']=_0x39ee79(-0x66,-0x2a,-0x82,-0x2c),_0x22fd24[_0x39ee79(0x38,0x96,-0xe,0x67)]=_0x39ee79(0xe5,0x8b,0x1d,0x5);const _0x5843a4=_0x22fd24;if(!_0x46c8ab||_0x5843a4[_0x39ee79(0xa4,0x50,0x61,0x51)](_0x46c8ab[_0x39ee79(-0x32,0x4f,0xd1,0x83)],0x2153+0x13ea+-0xb1*0x4d)||_0x5843a4[_0x39ee79(0x1,0x8c,0xc5,-0x16)](_0x498235,0x1f*-0xf9+-0xcad*-0x3+-0x7e0)||_0x5843a4['noJPO'](_0x498235,_0x3ce44d[_0x219bb1(-0xb6,-0x97,-0xf4,-0xa5)]))return _0x3ce44d;const _0x332969=[..._0x3ce44d],_0x4825ce=_0x332969[_0x498235],_0x2d1115=[];if(typeof _0x4825ce[_0x39ee79(-0x3e,-0x33,0x47,-0x4e)]===_0x219bb1(-0x66,0x17,-0x99,-0xd9)){const _0x23e53b={};_0x23e53b['type']=_0x5843a4['PypbY'],_0x23e53b['text']=_0x4825ce['content'],_0x2d1115[_0x39ee79(0xe,0x9,-0x23,-0x47)](_0x23e53b);}else Array[_0x219bb1(-0x148,-0x5a,-0xc7,-0x73)](_0x4825ce[_0x39ee79(-0x26,-0x33,-0xdf,-0x42)])&&(_0x5843a4['jaSdc'](_0x39ee79(-0x17,0x6c,0x1e,0xe4),_0x5843a4[_0x219bb1(-0xe5,-0x5a,-0xdb,-0xb9)])?_0x2d1115[_0x39ee79(-0x2a,0x9,-0x34,-0xa)](..._0x4825ce[_0x219bb1(-0x107,-0x101,-0x176,-0xfc)]):_0x574b40=_0x219bb1(-0x102,-0xab,-0xa3,-0xc3)+_0x219bb1(-0x57,-0x77,-0x102,-0xcb)+[..._0x4c6a3c][_0x219bb1(-0xdf,-0x8b,-0x12e,-0x153)]('、')+'\x0a');if(_0x5843a4[_0x39ee79(0x1f,0x92,0x68,0xaf)](_0x46c8ab[_0x219bb1(-0x178,-0xbe,-0xf4,-0xca)],0x525+-0x1*-0x15eb+-0x1b10)){if(_0x5843a4[_0x39ee79(0x67,0x73,0xe0,0xfa)](_0x5843a4[_0x39ee79(0xf9,0xd4,0x51,0xdb)],_0x5843a4['hRjAr'])){const _0x259b8d={};_0x259b8d[_0x219bb1(-0x11,-0x7a,-0x47,-0xbb)]=_0x5843a4[_0x219bb1(-0xc2,-0x17c,-0x14a,-0x177)],_0x259b8d[_0x39ee79(-0x2c,-0x35,-0x7d,0x8)]=_0x219bb1(-0xa,0x52,-0x1a,-0xac)+_0x46c8ab[_0x219bb1(-0xd5,-0xed,-0xf4,-0x13f)]+'张'+_0x5da803+']',_0x2d1115['push'](_0x259b8d);}else return null;}_0x46c8ab[_0x39ee79(0x80,0x35,0xbc,0xb6)]((_0x3bd608,_0x194a8d)=>{const _0xee9fd2=_0x5843a4[_0x55e96f(-0x196,-0x130,-0x1ad,-0x1d7)](typeof _0x3bd608,_0x5843a4['XIiRX'])?_0x3bd608:_0x3bd608[_0x2e0cba(0xa8,0x1d3,0x158,0x1ab)],_0x21428b=typeof _0x3bd608===_0x5843a4['Ofajk']&&_0x3bd608[_0x2e0cba(0x123,0x129,0x15a,0x192)]?_0x3bd608[_0x2e0cba(0xaf,0xbc,0x15a,0x1d6)]:''+_0x5da803+_0x5843a4[_0x2e0cba(0x282,0x23c,0x281,0x318)](_0x194a8d,-0x2*-0x602+-0x34e+0x1*-0x8b5),_0x2d0860={};_0x2d0860[_0x2e0cba(0x28f,0x325,0x28e,0x2ff)]=_0x5843a4[_0x2e0cba(0x17e,0x1a9,0x18b,0x11a)],_0x2d0860[_0x55e96f(-0x24e,-0x2e9,-0x2a5,-0x2a8)]='['+_0x21428b+']',_0x2d1115['push'](_0x2d0860);let _0x318ac7=_0xee9fd2;function _0x55e96f(_0x39a28e,_0x63f5de,_0x519944,_0x7a7e13){return _0x219bb1(_0x39a28e-0xf7,_0x63f5de,_0x519944- -0x12d,_0x7a7e13-0x1a);}function _0x2e0cba(_0x40d1dd,_0x44f055,_0x351edc,_0x2d9501){return _0x39ee79(_0x40d1dd-0x26,_0x351edc-0x192,_0x351edc-0x62,_0x40d1dd);}!_0xee9fd2['startsWith'](_0x5843a4[_0x55e96f(-0x1bf,-0x1cd,-0x148,-0x17f)])&&(_0x318ac7=_0x55e96f(-0x224,-0x1e5,-0x26c,-0x1d2)+_0x2e0cba(0x244,0x1c6,0x242,0x1ae)+'4,'+_0xee9fd2);const _0x1b72dc={};_0x1b72dc[_0x55e96f(-0x1de,-0xe1,-0x174,-0x113)]=_0x5843a4[_0x2e0cba(0x202,0x1a2,0x1f3,0x27a)],_0x1b72dc[_0x55e96f(-0x28a,-0x2ed,-0x270,-0x269)]={},_0x1b72dc[_0x55e96f(-0x28a,-0x2ed,-0x270,-0x269)][_0x2e0cba(0x1b1,0x1a0,0x1c0,0x265)]=_0x318ac7,_0x1b72dc[_0x55e96f(-0x28a,-0x2ed,-0x270,-0x269)][_0x55e96f(-0x218,-0x218,-0x257,-0x308)]=_0x5843a4[_0x55e96f(-0x206,-0x1d5,-0x265,-0x1d2)],_0x2d1115['push'](_0x1b72dc);});function _0x39ee79(_0x3ad090,_0x208576,_0x42f4af,_0x44cc9f){return _0x2ed6ba(_0x208576-0x28e,_0x44cc9f,_0x42f4af-0xf8,_0x44cc9f-0x1d0);}const _0x238925={..._0x4825ce};return _0x238925[_0x219bb1(-0x20c,-0x212,-0x176,-0x22b)]=_0x2d1115,_0x332969[_0x498235]=_0x238925,_0x332969;}function findMessageIndexWithPlaceholder(_0x49de26,_0x3e5452){const _0x29fcc0={'ABNeS':function(_0x58134f,_0x3f4bc3){return _0x58134f(_0x3f4bc3);},'pwTvh':function(_0x554f34,_0x349f5f,_0x81ffb6,_0x4df69a,_0x2b3df5){return _0x554f34(_0x349f5f,_0x81ffb6,_0x4df69a,_0x2b3df5);},'HhscH':function(_0xc054e1,_0x49c20b){return _0xc054e1<_0x49c20b;},'EoyMr':'IGGWR','jLrvP':function(_0x14a4c0,_0x8064d5){return _0x14a4c0===_0x8064d5;},'XwSSO':'string','cdWjG':function(_0x108eb6,_0xa4dbd1){return _0x108eb6===_0xa4dbd1;},'fZign':_0x339920(0x4fc,0x53f,0x45b,0x597),'ZbeYC':_0x339920(0x47b,0x426,0x4d3,0x432)};for(let _0x272a6d=-0x7*0x4cb+-0x5c7*-0x2+-0x755*-0x3;_0x29fcc0[_0x339920(0x4fa,0x457,0x4e6,0x519)](_0x272a6d,_0x49de26[_0x339920(0x4ff,0x4f5,0x49c,0x4ba)]);_0x272a6d++){if(_0x29fcc0['EoyMr']===_0x29fcc0[_0x339920(0x5cf,0x655,0x526,0x5ce)]){const _0x338e96=_0x49de26[_0x272a6d];if(_0x29fcc0[_0x39622b(0x1f2,0x101,0x1e1,0x176)](typeof _0x338e96['content'],_0x29fcc0[_0x339920(0x58f,0x52c,0x638,0x638)])&&_0x338e96[_0x39622b(0xed,0x13a,0xd2,0x106)][_0x39622b(0x285,0x1d3,0x18f,0x1e6)](_0x3e5452))return _0x272a6d;else{if(Array[_0x39622b(0x20e,0x1cb,0x140,0x1b5)](_0x338e96[_0x339920(0x47d,0x434,0x3f2,0x4af)]))for(const _0x2493ad of _0x338e96[_0x339920(0x47d,0x4d5,0x4ba,0x43a)]){if(_0x29fcc0[_0x39622b(0x2d6,0x300,0x2b3,0x25b)]('KMQmH',_0x29fcc0[_0x339920(0x4a6,0x443,0x530,0x497)]))_0x29fcc0[_0x339920(0x589,0x59d,0x4de,0x524)](_0x152b77,_0x4c7f57);else{if(_0x29fcc0[_0x339920(0x4ed,0x505,0x527,0x51b)](_0x2493ad[_0x339920(0x5ac,0x5f5,0x63f,0x5c3)],_0x29fcc0[_0x339920(0x4bc,0x54a,0x49c,0x4ed)])&&_0x2493ad[_0x39622b(0xc8,0xd9,0xf5,0x104)][_0x339920(0x55d,0x59a,0x4c0,0x4eb)](_0x3e5452))return _0x272a6d;}}}}else _0x5a05a1[_0x1a0468]=_0x29fcc0[_0x339920(0x4ea,0x46f,0x55c,0x4db)](_0xf7ce8,_0x4244eb[_0x12f422],_0x1f6389,_0x4c1719,_0x207082);}function _0x39622b(_0x379d61,_0x560595,_0x5da04e,_0x3e6215){return _0x2ed6ba(_0x3e6215-0x3c7,_0x379d61,_0x5da04e-0xa5,_0x3e6215-0xc5);}function _0x339920(_0x2bfbee,_0x527d58,_0x5a7a91,_0x586e8c){return _0x2ed6ba(_0x2bfbee-0x73e,_0x586e8c,_0x5a7a91-0x142,_0x586e8c-0xec);}return-(0xaf1+0x23*-0x29+-0x7*0xc3);}function generateRequestId(){const _0x18b661={};function _0x39fb30(_0x42ca00,_0x1acc22,_0x245aa3,_0x47fdbf){return _0x2ed6ba(_0x47fdbf-0x154,_0x42ca00,_0x245aa3-0x1b1,_0x47fdbf-0x149);}_0x18b661[_0x39fb30(-0x227,-0xfb,-0xcb,-0x179)]=function(_0x234ff1,_0x4c34f1){return _0x234ff1===_0x4c34f1;},_0x18b661[_0xfb3ab2(0x42d,0x3da,0x4c2,0x47f)]=_0xfb3ab2(0x408,0x485,0x399,0x3e7),_0x18b661[_0xfb3ab2(0x335,0x307,0x3b4,0x387)]=function(_0x1549cf,_0x331f7a){return _0x1549cf+_0x331f7a;};function _0xfb3ab2(_0x16986f,_0x4a2f12,_0x35ddb6,_0x481887){return _0x2ed6ba(_0x16986f-0x5d0,_0x481887,_0x35ddb6-0x72,_0x481887-0x8);}const _0x3f6e3e=_0x18b661;if(crypto&&crypto[_0x39fb30(-0x175,-0x65,-0x87,-0xf1)])return _0x3f6e3e['nWuxJ'](_0x3f6e3e[_0x39fb30(-0xbb,-0xbf,-0x11,-0x4f)],_0xfb3ab2(0x420,0x487,0x4a1,0x468))?_0x21673e[_0x39fb30(-0x18b,-0x7d,-0x60,-0xf1)]():crypto[_0x39fb30(-0x182,-0xbd,-0x10c,-0xf1)]();return _0x3f6e3e[_0x39fb30(-0xba,-0x9b,-0x10d,-0x147)](Date[_0x39fb30(-0x13c,-0x78,-0x1ae,-0x11d)]()['toString'](-0xebd+-0xeee+0x1dcf),Math['random']()['toString'](-0x1803+-0xcaa*0x2+0xef*0x35)[_0xfb3ab2(0x32c,0x27e,0x29a,0x2ef)](0x1973+-0x1552+-0x41f));}function _0x4f89(){const _0x6ce7a7=['lI4U','sfnyAgG','qNLjza','BNrlDvK','tLzrrwC','CMvXDwvZDcaOsq','mtrKuM9Mwfu','zxjYB3i','zxf1AxjLBwvUDa','nZC5mdKXEhHtreTf','ywzYvM0','y2HHCMfJDgvYta','rfDQu3K','DvjlBLm','uKrZqu8','qMroDNa','DxjLC0jHy2S','v0jHy2S','ALncrvm','y29UC3rYDwn0BW','DMfSDwu','ywn0zxjmAxn0va','q29UDgv4Da','6iUX5PAh5zcn56EWoIa','Bw9KAwz5ihjLCq','qMXUDM4','DwvZDc4UlG','DhLWzq','rdOG','DhjLEwq','BM9kue8','DK5bDfu','y2HHCMfJDgvYCW','5lIk5y2k6lQRtLngv+IdJoMDOJO','y2vVDKW','5lIl5y2k6lQRu0zx6iom6z2I','AMftzgm','t0TLwhu','zvLcDhi','5A2x5Q61ici','qvnuzhm','vfjRAgy','t2zHAMS','t0n5zvK','Chfvyxm','u0n6BKG','5PYQ5zYOieXmtsdOVPpLH7RKUk0','BwXnwhm','yxv0BW','q0PVtwC','5lIT5PAh5zcn56EW','AgzUwxy','ig91Dhb1Da','rhLyBeO','E3VLVzpLIy3OP5lOIBj9Fq','rfrdEfe','wKHLCvO','vwvdsxK','wuvoz24','tgPpCLu','DMfYAwfIBgvZ','5yEg5Ash5PU05PAW6kEs6iMYici','rw95txi','C2vHCMnO','CvHIyuS','y2rxAKC','rgnjEey','wxvcCNa','EgvqC0C','BMfTzuvo','zNLDiow3SUABToAwSoINKUIjSUMIHa','ANfMteC','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','BLD1EeO','DgvYigXPC3qGDa','zNvSBejVzhLouW','zNLDiev4DhjHyW','y3vmruu','yMfZzty0','txHZDeW','BMfTzq','rLDcywnR','zNLDienOyxjHyW','Dgv4Da','D2fYBMLUzW','y29UDgvUDa','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','pos6UUEjQt4k','shLxrKK','nKriANrWvq','ufjptvbux1jfuW','5lIk5y2k6lQRtLngvZOG','vwjsDNO','5lIl5y2k6lQRu0zxoIa','EgLOAum','Chf4tvi','iIdNMOtKU6xKUiVMLBdMJA46cGO','z1PVrgO','B2rPzNKGteXnia','ChjVBxb0','zNvSBejVzhLtrG','mZq2mtq1wvz0B2Lr','qxjQtu4','zMfJAwfSrMvHDa','6k6+ici','zw5LCG','tLfft1O','y3HkBwC','CIb0zxH0oG','sMTwAgW','ufjptvbux1jfuq','wxzpDhm','6kEs6iMY5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','Dwfqvxi','C3vIC3rYAw5N','uM16tu4','C3bSAxq','DMvACvK','C3rHCNrZv2L0Aa','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','DxbWzxjcB2r5tG','CMvTB3zLtgLZDa','vMjYA2y','BxDwswW','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','r1bnDva','zLPPz24','C1Lowhm','5lQu5A6y5Asw6lkm6iom6z2IoIa','uhLWyLK','vxzIDxu','CMvZDwX0','ter4Afq','u0zxqMfJAW','D29YBgqGyM9VAW','5lIl5y2k6lQRtLngv+IdJoMDOJO','Aw1Hz2vFDxjS','w2nOyxjHy3rLCG','qufNtLG','uMDnqMu','zgf0ytPPBwfNzq','C2XTz0y','yKzAve4','zNLDifnHDMvKia','vMfYAwfIBgvZ','ChvZAa','quXTt2q','uhzeEe8','wMjLwum','uKDUrxO','teXnioI/LowBNUE7K+AENos4UUEPUG','DgLTzw91De1Z','wMnKtw8','z2vUzxjHDgLVBG','CYbMB3vUzcbPBG','yxbWBhK','q2rpyxy','AM9PBG','icdMLRa6ia','A2zHvvy','y29UDgv4DdO','zgv0ywLS','B2jQzwn0','Aw5KzxHpzG','5lIk5y2k6lQRu0zx6iom6z2IoIa','BM93','Dhb1DdO','C0jpugi','koEPUIK','CK5kD2K','uMHWq0e','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','BwfW','CwL2wNa','zLrcr28','uhjVBxb0tw9KAq','AwnKAgy','qufAruy','wwrHAM4','v05cDwu','i3n0lwnOyxr1oa','seXqBfq','DxjS','5Rgc6lAf5PE2','mLncD1Hvwq','zgjMs1q','B0jpvuS','AxrLDNe','y2HHDe1LDgfKyq','zM9YrwfJAa','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','DhjPBq','ig1LC3nHz2uGAq','t0rjrLLFuKvrvq','ChDuDMG','DKnxDue','nefAv3n2rq','AKXYDLa','rNbdvMS','Bfrzz3G','zxHLyW','6kkR5l2/55sO77YA','shLkr0O','DxjLCW','ue9ou0u','qxv6CeC','Aw5MBW','AKnou0O','zgf0ytO','CMfUzg9Tvvvjra','sgHZy0G','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','B1n3vvq','B0TtvLC','vMTnD1K','BgvUz3rO','u09Lvwq','Dvf5A2C','zNLDiezPBMfSia','5lIl5y2k6lQRtLngvW','qK1oA24','CMvZzxrZ','y2HHCL9TB2rPzG','t05trq','q2DSAxu','CgH0wwy','zNLDifn0yxj0Aq','ANLIEKC','5lIk5y2k6lQRtLngvW','u2TTDxy','AfPoseW','CKD6uK8','zfbyuhG','uLbbBeW','DNzzufq','zNLDief0DgfJAa','rvnu','BNHJAhC','CvfxDwm','zxH0icH0CMLNzW','se5Yzue','qKXpC2e','5lIk5y2k6lQRu0zx','Aw5WDxq','EKnruMy','CLD0z20','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','ote5mZaXouHNwxfPCG','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','DKL1rKO','5Qoa5Rwl5yIW6kEs6iMY5Qch562+','t3nbAKW','E3VNLkJMIlFPNidMSyj9Fq','thDXwK4','rfzVALe','BhPtuhy','z2v0rwXLBwvUDa','qNrpBLi','qMzkAum','5lIl5y2k6lQRu0zx','AxnbCNjHEq','zvnjBxe','DxnLCKrLBwfUza','zNLDie5VignOyq','5lQu5A6y5Asw6lkm','CMvWBgfJzufSBa','5lQu5A6y5Asw6lkmoIa','EfPPq2i','DhjPz2DLCG','tsbVDxrWDxqGzG','zxiGChjVBxb0ia','s2fJr3i','r2THq0i','AKvWzgW','weLPuLG','zxfoAey','zg96CMi','BgXTvM4','mJK2mtq3mMPPq2HzBG','D2Pnrue','y2HHCMfJDgvYua','teDVBfy','zg5mwMi','6iUX5PAh5zcn56EW','CKDNDvq','zw1PDa','AfjQqxi','vuvtva','DMXtvLy','CfnJrK0','r09Yuhe','ChjVBxb0oG','zeX6uKG','thjWELm','rgv5rgS','Dg9tDhjPBMC','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','B0fZvuy','thDMuhC','zNLDifjHDYbmta','ndmYntG0mw5iy21guq','BwvZC2fNzsbHDa','teXnioIVT+AXGUwKSEI0Pq','ntK2mJGYrNrRzgr2','teXnx0niqvjFtq','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','C3rYAw5N','Be9MChy','zxjLzcK6','Aw5JBhvKzxm','Aw1Hz2vZihrVia','t0rjrLLFr0vuxW','l3bUzZTIyxnLnG','ufDZwMu','DxbWzxjcB2r5uW','y2HHCL8','ywrK','nJm4mZm2mgTQwKT0DG','tMD0vMm','lxrHyI1JAgfYyq','qKrWqxy','zMLSDgvY','5y+c6icd5zU+54Mh','wxjXuNi','sMP4yve','5lIk5y2k6lQRtLngv+IdJoMDOG','wvLYvNO','BwvZC2fNzq','D0PNwwG','C1bfve8','rNDrzwG','vuzfyvy','Bw9KAwz5ihbYBW','uvz0sNy','EMLoBuu','DLjYtKy','BMfTzuno','5lIl5y2k6lQRtLngv+IdJoMDOG','AxzfAMy','D0jfz0K','t0rjrLLFuKvtua','B3iGzgvIDwDNAq','C0DSAwy','yMzeAva','y29UDgv4Da','CMvWBgfJzq','C3vJy2vZCW','zNLDieXmtsbVDq','zNzZqMm','zNLDioINO+AEKowiSoEAHos6UUEjQq','zgf0yq','Axn0vgv4Da','u0zx','qujozvm','rNjYvwi','DMf2sgG','y3rLCG','Bg9N','zKfeEwq','whDtu08','A2PsqNO'];_0x4f89=function(){return _0x6ce7a7;};return _0x4f89();}export function LLM_CHAR_MODIFY_GET_PROMPT(){function _0x2349be(_0x4f6b2d,_0x29f357,_0x2acdec,_0x2c7fad){return _0x2ed6ba(_0x29f357-0x40c,_0x2c7fad,_0x2acdec-0x17f,_0x2c7fad-0x8b);}function _0x3f4ae4(_0x27eef2,_0x535867,_0x42f306,_0x5ae65c){return _0x2ed6ba(_0x42f306-0x659,_0x27eef2,_0x42f306-0x76,_0x5ae65c-0x8d);}const _0x16df1f={'pqUas':function(_0xe2782b,_0xf6396d){return _0xe2782b(_0xf6396d);},'qivZp':_0x2349be(0x149,0x172,0x10a,0xf8)+'时','OKeXu':function(_0xd8adfd){return _0xd8adfd();},'BfJiC':function(_0x9263cd,_0x4701d8){return _0x9263cd!==_0x4701d8;},'DeyDk':function(_0x21ab4d,_0x2f1b04){return _0x21ab4d(_0x2f1b04);},'vIuFJ':function(_0x1b99e0,_0x4d2599){return _0x1b99e0===_0x4d2599;},'cxJmg':_0x2349be(0x1e3,0x21a,0x250,0x1ef)};return new Promise((_0x1e1260,_0x4a1492)=>{const _0x38a926={'dPXPx':function(_0xc6c012,_0x1c5805){function _0x3939e1(_0xad6431,_0x49351d,_0x5e1b01,_0x666348){return _0x2cfd(_0xad6431- -0x220,_0x49351d);}return _0x16df1f[_0x3939e1(-0xa2,-0x6c,-0x12e,-0xb4)](_0xc6c012,_0x1c5805);},'dbfKT':function(_0x3a1069,_0x56889a){return _0x3a1069(_0x56889a);},'rGguT':function(_0x2676d8,_0x45e07c){function _0x5e8171(_0x5bc227,_0x2ac20f,_0x444da0,_0x582318){return _0x2cfd(_0x5bc227-0x1bb,_0x582318);}return _0x16df1f[_0x5e8171(0x35d,0x3c9,0x38e,0x3d6)](_0x2676d8,_0x45e07c);},'PWsZe':_0x16df1f[_0x253a75(-0x239,-0x1bb,-0x172,-0x23d)]};function _0x212cab(_0x17629c,_0x28d23e,_0x3128d6,_0x2546ea){return _0x3f4ae4(_0x28d23e,_0x28d23e-0xed,_0x17629c- -0x2e8,_0x2546ea-0xcc);}function _0x253a75(_0x455def,_0x1ca0db,_0x22facf,_0x373d55){return _0x3f4ae4(_0x455def,_0x1ca0db-0x174,_0x1ca0db- -0x5ab,_0x373d55-0x12e);}if(_0x16df1f[_0x212cab(0x154,0x143,0x181,0x1af)](_0x212cab(0x17f,0x16a,0xd5,0xfb),_0x16df1f[_0x253a75(-0x286,-0x1fd,-0x1a7,-0x1d6)])){const _0x1a4988=generateRequestId();console[_0x212cab(0x1c0,0x258,0x227,0x252)]('[character'+_0x212cab(0x10a,0x1b7,0x13b,0x17d)+'fy]\x20Reques'+'ting\x20char\x20'+_0x253a75(-0x190,-0x11c,-0x68,-0x8d)+'mpt\x20(ID:\x20'+_0x1a4988+')');const _0x37c694=_0x160b2b=>{function _0x1ac0ff(_0x5a4636,_0x2c9b72,_0x121329,_0x5273b2){return _0x212cab(_0x2c9b72- -0x39b,_0x5273b2,_0x121329-0x1aa,_0x5273b2-0x86);}if(_0x38a926[_0x5d34fb(0x3fd,0x337,0x382,0x3a7)](_0x160b2b['id'],_0x1a4988))return;function _0x5d34fb(_0x1c230d,_0x388e53,_0x3620a0,_0x29d8dc){return _0x253a75(_0x29d8dc,_0x3620a0-0x502,_0x3620a0-0xda,_0x29d8dc-0xb6);}eventSource[_0x1ac0ff(-0x313,-0x2c7,-0x26d,-0x2c8)+_0x1ac0ff(-0x26e,-0x2d7,-0x2aa,-0x2ba)](eventNames[_0x5d34fb(0x326,0x317,0x3ca,0x347)+_0x5d34fb(0x388,0x337,0x3d1,0x46b)+_0x5d34fb(0x294,0x249,0x2f4,0x2a5)+'PONSE'],_0x37c694),_0x38a926[_0x1ac0ff(-0x225,-0x287,-0x2e6,-0x32a)](_0x1e1260,_0x160b2b[_0x1ac0ff(-0x2f4,-0x2dd,-0x289,-0x2ed)]);};eventSource['on'](eventNames[_0x253a75(-0xa2,-0x138,-0x1b1,-0x126)+_0x212cab(0x192,0xf4,0x118,0x1c9)+_0x212cab(0xb5,0x14d,0xcf,0x4c)+_0x253a75(-0x155,-0x19c,-0xe8,-0x1b9)],_0x37c694);const _0xd3f810={};_0xd3f810['id']=_0x1a4988,eventSource['emit'](eventNames[_0x253a75(-0x1c1,-0x138,-0x175,-0x180)+_0x253a75(-0x113,-0x131,-0x1d3,-0x1c4)+'PROMPT_REQ'+_0x212cab(0x17a,0x1d2,0xed,0x107)],_0xd3f810),setTimeout(()=>{function _0x2eecaf(_0x1cf2ce,_0x1a8f65,_0x58f46f,_0x4ab72d){return _0x253a75(_0x58f46f,_0x4ab72d-0x179,_0x58f46f-0xa0,_0x4ab72d-0x1be);}eventSource[_0x4d0592(0x3cd,0x3ae,0x3e9,0x3a5)+'ener'](eventNames[_0x2eecaf(-0x13,-0x55,0xd5,0x41)+_0x2eecaf(-0x3,-0x1c,-0x1b,0x48)+_0x2eecaf(-0x1,-0xc6,0x17,-0x95)+'PONSE'],_0x37c694);function _0x4d0592(_0xd1ba82,_0x1f32e4,_0x1d3b04,_0x446adc){return _0x253a75(_0xd1ba82,_0x446adc-0x594,_0x1d3b04-0x69,_0x446adc-0x139);}_0x38a926[_0x2eecaf(0x58,-0x41,-0x17,0x2d)](_0x4a1492,new Error(_0x38a926[_0x4d0592(0x3f3,0x4eb,0x466,0x465)]));},0x2*0x1e0b+-0x40*-0xb7+0x21*-0x206);}else{const _0x5c2a35={'qQWuc':function(_0x5281da,_0x3e9590){function _0xd8f46f(_0xc1c70b,_0x37543c,_0x37b233,_0x3abf12){return _0x253a75(_0x37b233,_0x37543c-0x22a,_0x37b233-0x7e,_0x3abf12-0x1c9);}return _0x16df1f[_0xd8f46f(0x102,0x157,0x1d1,0xe3)](_0x5281da,_0x3e9590);},'FrrUb':_0x16df1f['qivZp'],'gZoDj':function(_0x2d80f5){function _0x225dba(_0x552927,_0x484574,_0x252412,_0x2bf52e){return _0x253a75(_0x252412,_0x2bf52e-0x649,_0x252412-0x178,_0x2bf52e-0x1cf);}return _0x16df1f[_0x225dba(0x55e,0x5a6,0x543,0x56f)](_0x2d80f5);},'WIbcl':function(_0x4b23bd,_0x5df8a3,_0x375217){return _0x4b23bd(_0x5df8a3,_0x375217);}};return new _0x4ac0c7((_0xcee6bc,_0x33af3b)=>{const _0x4b17f8=_0x5c2a35[_0x2d926b(0x1af,0x1fe,0x230,0x21f)](_0x2e1435);_0x222317[_0x2d926b(0x3b0,0x3a7,0x368,0x323)](_0x2d926b(0x1a9,0x2c8,0x1ff,0x247)+_0x2d926b(0x240,0x312,0x21e,0x26d)+'fy]\x20Reques'+'ting\x20char\x20'+_0x4f1a70(0x526,0x567,0x4fb,0x4ca)+'mpt\x20(ID:\x20'+_0x4b17f8+')');function _0x4f1a70(_0x392584,_0xd5bbd1,_0x1fe009,_0x16d3fd){return _0x212cab(_0x1fe009-0x354,_0x392584,_0x1fe009-0x146,_0x16d3fd-0x8a);}const _0xa7cd3a=_0x4db0de=>{function _0x3f6341(_0x34744d,_0xf14bb5,_0x1b63c5,_0x3a797c){return _0x4f1a70(_0x1b63c5,_0xf14bb5-0x5a,_0x34744d- -0x32a,_0x3a797c-0x13d);}if(_0x4db0de['id']!==_0x4b17f8)return;_0x37a67e[_0x38b5a2(0x32b,0x303,0x2d5,0x361)+_0x3f6341(0xee,0x113,0x43,0xf9)](_0x188712[_0x38b5a2(0x36d,0x3ba,0x385,0x347)+_0x3f6341(0x1bc,0x137,0x139,0x21e)+_0x3f6341(0xdf,0x113,0xf4,0x45)+_0x3f6341(0x151,0x206,0x1ff,0xc6)],_0xa7cd3a);function _0x38b5a2(_0x547557,_0x10009a,_0x133865,_0x26d826){return _0x2d926b(_0x133865,_0x10009a-0xd5,_0x133865-0x148,_0x10009a-0xcc);}_0xcee6bc(_0x4db0de[_0x3f6341(0xe8,0xc7,0x9e,0x7f)]);};_0x387518['on'](_0x1fb3c2[_0x2d926b(0x30c,0x378,0x317,0x2ee)+_0x4f1a70(0x4e0,0x4b8,0x4e6,0x50f)+_0x2d926b(0x2cb,0x27f,0x26a,0x218)+_0x4f1a70(0x4e5,0x52c,0x47b,0x3c6)],_0xa7cd3a);const _0x4441e4={};_0x4441e4['id']=_0x4b17f8,_0x2fc7ba[_0x2d926b(0x2e0,0x272,0x26b,0x2db)](_0x3e8593[_0x4f1a70(0x43b,0x49c,0x4df,0x490)+_0x2d926b(0x361,0x31f,0x2b1,0x2f5)+_0x4f1a70(0x3ac,0x39b,0x41d,0x449)+_0x2d926b(0x347,0x337,0x31e,0x2dd)],_0x4441e4);function _0x2d926b(_0x382321,_0x4fa76d,_0x20be86,_0x487311){return _0x253a75(_0x382321,_0x487311-0x426,_0x20be86-0x15d,_0x487311-0x121);}_0x5c2a35['WIbcl'](_0x76ae3e,()=>{function _0x5dfc8f(_0x4a4699,_0x3d5717,_0x5052ec,_0x57a1bb){return _0x4f1a70(_0x3d5717,_0x3d5717-0xc2,_0x4a4699-0x3c,_0x57a1bb-0x196);}_0x7bb9a6[_0x577297(-0x29c,-0x227,-0x21e,-0x32e)+'ener'](_0x368646['LLM_CHAR_M'+'ODIFY_GET_'+_0x5dfc8f(0x445,0x3f4,0x3ec,0x3c4)+_0x5dfc8f(0x4b7,0x491,0x444,0x50c)],_0xa7cd3a);function _0x577297(_0x53a826,_0x2f1f9a,_0x29d2b6,_0x53299d){return _0x2d926b(_0x2f1f9a,_0x2f1f9a-0xf9,_0x29d2b6-0xfc,_0x53a826- -0x4d3);}_0x5c2a35[_0x5dfc8f(0x4d9,0x459,0x501,0x556)](_0x33af3b,new _0x4f2c26(_0x5c2a35[_0x577297(-0x1b3,-0x23c,-0x132,-0x25e)]));},-0x1201+0x3f42+-0x631);});}});}export function LLM_CHAR_MODIFY(_0x14df0d,_0x38e20b={}){function _0x41af93(_0x5cf698,_0xb27647,_0x34d5b6,_0x2df64c){return _0x2ed6ba(_0xb27647-0x3da,_0x2df64c,_0x34d5b6-0x10a,_0x2df64c-0x9d);}const _0x4090f6={'DyXlJ':function(_0x486837){return _0x486837();},'gleBy':function(_0x2e253f,_0xf67016){return _0x2e253f(_0xf67016);},'AAZEF':function(_0x4ab7aa){return _0x4ab7aa();},'qXbaK':_0x5a3217(0x4b1,0x44d,0x42a,0x3f2)+_0x41af93(0xd4,0x17b,0x17b,0x139),'GOrPq':function(_0x49d8cd){return _0x49d8cd();},'LwqZN':function(_0x5a727f,_0x45de10,_0x21d82f){return _0x5a727f(_0x45de10,_0x21d82f);}};function _0x5a3217(_0x4da1c9,_0x2a53c6,_0x3b6277,_0x58b7d6){return _0x2ed6ba(_0x3b6277-0x682,_0x4da1c9,_0x3b6277-0x6,_0x58b7d6-0xea);}return new Promise((_0x1c5fb7,_0x52b9ad)=>{const _0x4364ef={'YoQqG':function(_0x2e8f47,_0x224c69){return _0x4090f6['gleBy'](_0x2e8f47,_0x224c69);}},_0x2ab987=_0x4090f6[_0x1ce4f8(0x559,0x4f1,0x4ff,0x586)](generateRequestId),_0x6d0b9a=_0x38e20b[_0xc89aeb(0x170,0x13f,0x113,0x12f)]||0x1da*-0x22+0x11*0x253+0x101d1;let _0x3e6411=null;console['log'](_0x1ce4f8(0x50b,0x48d,0x524,0x4ed)+_0x1ce4f8(0x45e,0x566,0x503,0x513)+'fy]\x20Execut'+'ing\x20char\x20m'+_0xc89aeb(0x125,0x153,0xde,0xcf)+_0x1ce4f8(0x5a1,0x5af,0x5aa,0x5d2)+_0xc89aeb(0x244,0x1a3,0x201,0x1ec)+_0x2ab987+')');const _0x291c35=()=>{eventSource['removeList'+_0x2fc6dc(-0xa2,-0x148,-0x4,-0x1e)](eventNames[_0x37dd4b(-0x59,-0x40,-0x137,-0xdf)+_0x37dd4b(-0x31,-0x86,-0xc5,-0xbb)+_0x37dd4b(-0x110,-0x18c,-0x1e1,-0x130)],_0xb36bd9);function _0x37dd4b(_0x3a9c92,_0x120734,_0x4cf89f,_0x3a4c71){return _0x1ce4f8(_0x3a9c92-0x1ab,_0x4cf89f,_0x4cf89f-0x9d,_0x3a4c71- -0x673);}function _0x2fc6dc(_0x55440a,_0x23f1eb,_0x50dd64,_0x47f8b3){return _0x1ce4f8(_0x55440a-0x8b,_0x47f8b3,_0x50dd64-0xc5,_0x55440a- -0x56f);}_0x3e6411&&(_0x4364ef['YoQqG'](clearTimeout,_0x3e6411),_0x3e6411=null);},_0xb36bd9=_0x42a3b4=>{function _0x5cd1f1(_0x33b8bd,_0x5b9930,_0xfb2ac5,_0x16821e){return _0xc89aeb(_0x33b8bd-0x169,_0x5b9930-0x1a9,_0x33b8bd-0xb5,_0xfb2ac5);}function _0x1b8d50(_0x53d8e3,_0x3b326a,_0x42ec01,_0xbfa7e6){return _0x1ce4f8(_0x53d8e3-0x1eb,_0x42ec01,_0x42ec01-0x5,_0x53d8e3- -0x2f4);}if(_0x42a3b4['id']!==_0x2ab987)return;_0x4090f6[_0x1b8d50(0x30e,0x38e,0x347,0x3b3)](_0x291c35),_0x42a3b4[_0x5cd1f1(0x28b,0x275,0x2af,0x278)]?_0x1c5fb7(_0x42a3b4[_0x5cd1f1(0x1b4,0x1a5,0x1a6,0x1d5)]):_0x4090f6['gleBy'](_0x52b9ad,new Error(_0x42a3b4[_0x1b8d50(0x1f3,0x1cd,0x1d5,0x220)]||_0x1b8d50(0x29e,0x33f,0x1ef,0x279)));};eventSource['on'](eventNames[_0xc89aeb(0x1f5,0x25b,0x1ac,0x182)+_0x1ce4f8(0x510,0x64f,0x5cf,0x5b8)+_0xc89aeb(0xdb,0x1d3,0x15b,0x15b)],_0xb36bd9);const _0x1231e4={};_0x1231e4[_0x1ce4f8(0x525,0x476,0x48a,0x4c7)]=_0x14df0d;function _0x1ce4f8(_0x58f525,_0x258503,_0x700d75,_0x21145a){return _0x41af93(_0x58f525-0xd1,_0x21145a-0x3a0,_0x700d75-0xac,_0x258503);}_0x1231e4['id']=_0x2ab987;function _0xc89aeb(_0x15635d,_0x16f001,_0x540ba6,_0x3b471b){return _0x41af93(_0x15635d-0x186,_0x540ba6- -0x48,_0x540ba6-0x1e0,_0x3b471b);}eventSource[_0xc89aeb(0x17c,0x168,0x199,0x222)](eventNames['LLM_CHAR_M'+_0x1ce4f8(0x576,0x5be,0x4f2,0x525)+_0xc89aeb(0x1e3,0x1df,0x168,0xca)],_0x1231e4),_0x3e6411=_0x4090f6[_0x1ce4f8(0x544,0x5a6,0x59c,0x561)](setTimeout,()=>{function _0x50dd72(_0x1704f5,_0x1832ba,_0x2de88d,_0x508545){return _0x1ce4f8(_0x1704f5-0x1bd,_0x1832ba,_0x2de88d-0x1cc,_0x508545- -0x133);}function _0xa1dd23(_0x527b14,_0x424549,_0x5e1ac7,_0x16b783){return _0xc89aeb(_0x527b14-0x12,_0x424549-0xc3,_0x5e1ac7- -0x2a0,_0x16b783);}_0x4090f6[_0x50dd72(0x364,0x44b,0x3dd,0x3e2)](_0x291c35),_0x52b9ad(new Error(_0x4090f6[_0x50dd72(0x4ce,0x51d,0x56f,0x4da)]));},_0x6d0b9a);});}function preprocessTagContent(_0x585eaf){const _0x218199={};function _0x30fb7a(_0x1b5b16,_0x24b0a5,_0x26cecd,_0x426f91){return _0x2ed6ba(_0x1b5b16-0x108,_0x24b0a5,_0x26cecd-0xeb,_0x426f91-0x140);}function _0x15ca1c(_0x1b0e9c,_0x498c92,_0x4a3075,_0x2e3f2c){return _0x2ed6ba(_0x2e3f2c-0x2ea,_0x1b0e9c,_0x4a3075-0x6f,_0x2e3f2c-0x9d);}_0x218199[_0x30fb7a(-0xe9,-0xf9,-0x8d,-0xe5)]=_0x30fb7a(-0x84,-0x42,-0x3e,-0x2c);const _0x4ce0df=_0x218199;let _0x22fc35=_0x585eaf[_0x15ca1c(0xc6,0x15b,0x161,0x12d)](/:/g,':')[_0x15ca1c(0x1dc,0x126,0x1d0,0x12d)](/\(/g,'（')[_0x15ca1c(0x103,0x1b6,0xcf,0x12d)](/\)/g,'）')[_0x15ca1c(0x17c,0xd0,0x130,0x12d)](/,/g,',');return _0x22fc35=_0x22fc35[_0x30fb7a(-0xb5,-0xa7,-0xa4,-0xe9)](/下半身NSWebcam:/g,_0x15ca1c(0x3f,0xb3,-0x5,0x5b)),_0x22fc35=_0x22fc35['replace'](/下半身NSFW_背面:/g,_0x30fb7a(-0x187,-0xef,-0x1bf,-0x1b0)),_0x22fc35=_0x22fc35[_0x30fb7a(-0xb5,-0x70,-0x161,-0x112)](/上半身NSFW_背面:/g,_0x4ce0df[_0x15ca1c(0xc8,0x135,0x83,0xf9)]),_0x22fc35;}function parseCharacterData(_0x391d92){const _0x4f1377={'rGzRO':function(_0x5cf785,_0x58babc){return _0x5cf785(_0x58babc);},'Skmuv':function(_0x16f3e6,_0x20303e){return _0x16f3e6===_0x20303e;},'Cgliu':_0x3d6df8(-0x68,-0xd,-0x109,-0xbc),'DlsMi':_0x3d6df8(-0xb7,-0xcf,-0x100,-0x11e),'eYBtr':_0x5dd11a(0x478,0x484,0x476,0x48e),'lTYgx':_0x3d6df8(-0x82,-0xee,-0x11c,-0x27),'BDpAv':_0x3d6df8(0x8f,-0x3,0x26,0x85),'itevq':_0x3d6df8(-0xa3,-0x7f,-0x113,-0x64)+_0x5dd11a(0x47f,0x47f,0x490,0x410),'vWYPY':_0x3d6df8(-0xa3,-0x6e,-0xc4,-0x10f)+'uresBack','kjRBz':_0x5dd11a(0x569,0x4ee,0x4fd,0x4e7)+'FW','OCyeY':_0x5dd11a(0x4f0,0x4ee,0x54f,0x56d)+_0x3d6df8(-0xb9,-0xb6,-0xff,-0xbb),'HyJGJ':'fullBodySF'+'W','ZHeqZ':_0x3d6df8(-0xa6,-0x7d,-0x47,-0xe7)+'WBack','YvOts':'upperBodyN'+'SFW','UbRvz':'fullBodyNS'+_0x3d6df8(-0xb9,-0xe0,-0x13d,-0xcd),'phtYf':function(_0x5afd5b,_0x152ba7){return _0x5afd5b+_0x152ba7;},'IDqdk':function(_0x458153,_0x7dde18){return _0x458153&&_0x7dde18;},'mMgIW':_0x5dd11a(0x545,0x550,0x5fc,0x53e),'RGnEz':_0x5dd11a(0x431,0x40c,0x3fd,0x38a),'BMNkn':'[character'+'PromptModi'+_0x3d6df8(0x53,0x45,-0x6,0x2b)+'数据:'},_0x553e8f=_0x391d92[_0x5dd11a(0x49b,0x428,0x3ef,0x452)]('\x0a')[_0x5dd11a(0x4c7,0x460,0x3b2,0x3ad)](_0x1f3666=>_0x1f3666[_0x3d6df8(-0x4b,0x44,-0x6f,-0xec)]())[_0x5dd11a(0x544,0x4f5,0x588,0x58a)](_0x13661c=>_0x13661c),_0x51e222={};_0x51e222[_0x3d6df8(0x46,0x1f,0x8d,0xc5)]='',_0x51e222['nameEN']='',_0x51e222[_0x5dd11a(0x415,0x41b,0x381,0x394)+'ures']='',_0x51e222[_0x5dd11a(0x3a2,0x41b,0x3cd,0x3e4)+_0x3d6df8(0x6f,0x57,-0x32,-0x45)]='',_0x51e222['upperBodyS'+'FW']='',_0x51e222['upperBodyS'+_0x3d6df8(-0xb9,-0x11,-0x93,-0x14)]='',_0x51e222[_0x3d6df8(-0xa6,-0x131,-0x3d,0x4)+'W']='',_0x51e222[_0x5dd11a(0x3c4,0x418,0x363,0x3f6)+'WBack']='',_0x51e222[_0x5dd11a(0x4a4,0x42c,0x3cc,0x3aa)+_0x5dd11a(0x52c,0x514,0x484,0x4aa)]='',_0x51e222[_0x5dd11a(0x48b,0x42c,0x392,0x3fb)+_0x5dd11a(0x404,0x439,0x4cb,0x3fa)]='',_0x51e222['fullBodyNS'+'FW']='',_0x51e222['fullBodyNS'+_0x5dd11a(0x3b7,0x405,0x424,0x41c)]='';const _0x1e9cb8=_0x51e222,_0x47aa8b={};function _0x5dd11a(_0x26b1cf,_0x2e99e7,_0x312984,_0x5e19c0){return _0x2ed6ba(_0x2e99e7-0x6ca,_0x312984,_0x312984-0xda,_0x5e19c0-0x190);}_0x47aa8b[_0x3d6df8(0x91,0x17,0x129,0x131)]='nameCN';function _0x3d6df8(_0x2ca24e,_0x390879,_0xe89e61,_0x3c19c4){return _0x2ed6ba(_0x2ca24e-0x20c,_0xe89e61,_0xe89e61-0x1d9,_0x3c19c4-0x88);}_0x47aa8b[_0x3d6df8(0x11,-0x40,0xa6,0xa0)]=_0x5dd11a(0x4e5,0x562,0x50d,0x4cb),_0x47aa8b[_0x5dd11a(0x4e5,0x4bc,0x502,0x49c)]=_0x4f1377[_0x3d6df8(-0x4f,0x20,0x6,-0x45)],_0x47aa8b['五官外貌背面']=_0x4f1377['vWYPY'],_0x47aa8b[_0x3d6df8(-0x18,-0x31,-0xb2,-0x19)]=_0x4f1377[_0x3d6df8(0x5e,0xf0,0x70,-0x41)],_0x47aa8b['上半身SFW背面']=_0x4f1377[_0x3d6df8(0x8a,0x109,0xc,0xe)],_0x47aa8b['下半身SFW']=_0x4f1377[_0x5dd11a(0x3dd,0x47e,0x489,0x46d)],_0x47aa8b[_0x5dd11a(0x500,0x540,0x513,0x5cf)]=_0x4f1377[_0x5dd11a(0x556,0x555,0x558,0x538)],_0x47aa8b['上半身NSFW']=_0x4f1377[_0x3d6df8(-0x9b,-0x8b,-0x3b,-0x14f)],_0x47aa8b[_0x5dd11a(0x4bb,0x4f9,0x4e5,0x546)]=_0x5dd11a(0x41c,0x42c,0x441,0x3c6)+_0x5dd11a(0x4eb,0x439,0x387,0x3c2),_0x47aa8b[_0x3d6df8(-0x2f,-0xb2,-0x48,-0x71)]='fullBodyNS'+'FW',_0x47aa8b[_0x3d6df8(0x47,0xf5,0xa2,0xfb)]=_0x4f1377[_0x5dd11a(0x3a5,0x410,0x437,0x460)];const _0x19c194=_0x47aa8b;for(const _0x4df035 of _0x553e8f){if(_0x4f1377['Skmuv'](_0x5dd11a(0x515,0x489,0x3d5,0x40d),_0x5dd11a(0x58a,0x51e,0x515,0x480))){const _0x1b56e0=_0x481cb5[_0x3d6df8(-0xa,-0x65,0x1a,0x14)+_0x5dd11a(0x503,0x51f,0x479,0x58c)]('char_'+_0x1f66e3);_0x1b56e0&&(_0x1b56e0[_0x5dd11a(0x56d,0x531,0x595,0x4a2)]=_0x2f54cd[_0x1cadaa],_0x4f1377[_0x3d6df8(-0x23,0x6e,-0x36,-0x4e)](_0x18016e,_0x1b56e0)[_0x3d6df8(0x2,-0x5b,0x48,0xa0)](_0x5dd11a(0x530,0x4a7,0x42b,0x517)));}else{const _0x15177a=_0x4df035[_0x5dd11a(0x41d,0x457,0x508,0x479)](':');if(_0x15177a===-(0xf99+-0x211a+0x1182))continue;const _0x4bc6c8=_0x4df035[_0x5dd11a(0x4b1,0x426,0x3ed,0x3bf)](-0x72*0x57+0x1d2f*-0x1+0x43ed,_0x15177a)[_0x5dd11a(0x4fb,0x473,0x4ac,0x4a6)](),_0x2ce829=_0x4df035[_0x3d6df8(-0x98,-0x118,-0x73,-0x81)](_0x4f1377[_0x5dd11a(0x4b5,0x495,0x401,0x4cf)](_0x15177a,0xb94+0x99e+-0x1*0x1531))[_0x3d6df8(-0x4b,-0x3,0x5,0x47)]();if(_0x19c194[_0x4bc6c8])_0x1e9cb8[_0x19c194[_0x4bc6c8]]=_0x2ce829;else{if(_0x4f1377['IDqdk'](_0x4bc6c8,_0x2ce829)){if(_0x3d6df8(-0x58,-0xce,0x3,-0x31)===_0x4f1377['mMgIW']){const _0x1576e4=_0x4f1377['Skmuv'](typeof _0x14f3c7,_0x5dd11a(0x4d3,0x4e6,0x52b,0x526))?_0xfa25f8:_0x4093a7['base64'],_0x35863a=_0x4f1377[_0x3d6df8(-0x25,-0xad,0x36,0x19)](typeof _0xb837fc,_0x4f1377[_0x5dd11a(0x4d8,0x494,0x44a,0x42f)])&&_0x405c53[_0x3d6df8(-0xba,-0x94,-0x11b,-0xa0)]?_0x2ae5e['name']:''+_0x291353+(_0x4e4ddc+(-0x5d1*0x1+0xce0+-0x15*0x56)),_0x13da0d={};_0x13da0d['type']=_0x4f1377['DlsMi'],_0x13da0d['text']='['+_0x35863a+']',_0x452787[_0x5dd11a(0x3cf,0x445,0x463,0x444)](_0x13da0d);let _0x4c39b5=_0x1576e4;!_0x1576e4[_0x5dd11a(0x471,0x42a,0x420,0x453)](_0x4f1377[_0x3d6df8(0x85,0x50,0x128,0x9)])&&(_0x4c39b5=_0x5dd11a(0x3ca,0x440,0x3b7,0x484)+_0x5dd11a(0x4d2,0x4ec,0x4ab,0x4a8)+'4,'+_0x1576e4);const _0xc842d={};_0xc842d[_0x3d6df8(0x7a,0x36,0xe3,0x96)]=_0x4f1377[_0x5dd11a(0x48b,0x47b,0x489,0x40e)],_0xc842d[_0x5dd11a(0x44d,0x43c,0x3fd,0x47f)]={},_0xc842d[_0x5dd11a(0x44d,0x43c,0x3fd,0x47f)][_0x3d6df8(-0x54,0x5b,-0x67,-0xa7)]=_0x4c39b5,_0xc842d[_0x5dd11a(0x44d,0x43c,0x3fd,0x47f)][_0x3d6df8(-0x69,-0xab,-0x6d,-0xba)]=_0x4f1377[_0x3d6df8(0x36,-0x66,0x77,0x41)],_0x5e79c8[_0x5dd11a(0x47c,0x445,0x3b0,0x3d5)](_0xc842d);}else console[_0x5dd11a(0x4f1,0x519,0x57f,0x5a4)](_0x5dd11a(0x446,0x43d,0x3f4,0x4c8)+_0x3d6df8(-0x5b,-0x3a,0x21,-0xa)+_0x3d6df8(-0x14,0x16,-0x99,-0xf)+_0x5dd11a(0x55f,0x544,0x571,0x5a5)+_0x4bc6c8+'\x22');}}}}if(!_0x1e9cb8[_0x3d6df8(0x46,-0x2b,0x65,-0x55)]){if(_0x4f1377[_0x5dd11a(0x3a5,0x449,0x3ea,0x4dd)]!==_0x4f1377['RGnEz'])_0x23636c&&_0x12a251['add'](_0x55e503);else return null;}return console['log'](_0x4f1377[_0x3d6df8(-0x2e,-0x10,-0xd1,0x53)],_0x1e9cb8),_0x1e9cb8;}function extractCharacterTags(_0x168f58){const _0x2a73d4={'YYrVz':function(_0x207a9f,_0x4a474b){return _0x207a9f(_0x4a474b);},'DVojQ':function(_0x344a78,_0x1f24eb){return _0x344a78===_0x1f24eb;},'xZiCb':_0x57c4d4(0x373,0x423,0x4bd,0x42c),'rAUfi':_0x57c4d4(0x437,0x42d,0x498,0x4a5)},_0x5a5fe0={};function _0x113ab4(_0x3a84b5,_0x13751e,_0x1ad85e,_0x4effbb){return _0x2ed6ba(_0x3a84b5-0x28,_0x13751e,_0x1ad85e-0x1b2,_0x4effbb-0xcb);}_0x5a5fe0['characters']=[];const _0x26f959=_0x5a5fe0;function _0x57c4d4(_0x558289,_0x3d9d62,_0x115cd3,_0x312fa3){return _0x2ed6ba(_0x3d9d62-0x69a,_0x312fa3,_0x115cd3-0x119,_0x312fa3-0xb5);}_0x168f58=_0x168f58[_0x113ab4(-0x195,-0x1ab,-0x12d,-0x1bf)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x113ab4(-0x22f,-0x24c,-0x29e,-0x194)]();const _0x72b5bd=/<人物>([\s\S]*?)<\/人物>/g;let _0x5e3502;while((_0x5e3502=_0x72b5bd[_0x57c4d4(0x43f,0x44c,0x3c5,0x3dc)](_0x168f58))!==null){const _0x30645b=_0x2a73d4[_0x113ab4(-0x1a8,-0x1ca,-0x24c,-0x20e)](preprocessTagContent,_0x5e3502[-0x692*-0x5+0xd93+0x1736*-0x2]),_0x1d1ccf=_0x2a73d4[_0x113ab4(-0x1a8,-0x18e,-0x164,-0x11c)](parseCharacterData,_0x30645b);_0x1d1ccf&&(_0x2a73d4[_0x113ab4(-0x1f0,-0x22e,-0x180,-0x22b)](_0x2a73d4[_0x57c4d4(0x3e9,0x48f,0x4b9,0x46a)],_0x2a73d4['rAUfi'])?_0x373837[_0x113ab4(-0x25d,-0x25d,-0x247,-0x258)](_0x27c530):_0x26f959[_0x57c4d4(0x530,0x50d,0x51c,0x527)][_0x113ab4(-0x25d,-0x2bf,-0x285,-0x1fd)](_0x1d1ccf));}return _0x26f959;}function getCurrentCharacterPreset(){const _0x2feec1={};_0x2feec1['KacGr']=_0x1eac3d(0x45b,0x412,0x374,0x48f),_0x2feec1[_0x210d61(-0xef,-0xd2,-0x3f,-0xe6)]=function(_0x49c3a2,_0x3b7c35){return _0x49c3a2!==_0x3b7c35;},_0x2feec1['xYABM']=_0x1eac3d(0x39b,0x3ed,0x3c6,0x393),_0x2feec1['NgtVc']=_0x210d61(-0xee,-0x170,-0x1a5,-0x10a);const _0x4b9ddc=_0x2feec1;function _0x1eac3d(_0x2bbe5b,_0x4484f8,_0x4c88f0,_0x3b2285){return _0x2ed6ba(_0x4484f8-0x692,_0x2bbe5b,_0x4c88f0-0x7a,_0x3b2285-0x26);}const _0x16a3c4=extension_settings[extensionName],_0x2e3bd8=_0x16a3c4[_0x1eac3d(0x3fb,0x494,0x481,0x43d)+'resetId'];if(!_0x2e3bd8||!_0x16a3c4[_0x210d61(-0x10a,-0x15d,-0xd1,-0x14f)+_0x210d61(-0x241,-0x198,-0x233,-0x173)][_0x2e3bd8]){if(_0x4b9ddc[_0x210d61(-0x5c,-0xd2,-0x50,-0x4f)](_0x4b9ddc['xYABM'],_0x4b9ddc[_0x210d61(-0x19e,-0x137,-0x135,-0x133)]))return null;else{_0x1f53ec['error'](_0x4b9ddc[_0x1eac3d(0x4c9,0x48b,0x49f,0x483)]);return;}}const _0x34a59b={};_0x34a59b['id']=_0x2e3bd8,_0x34a59b['data']=_0x16a3c4[_0x1eac3d(0x49c,0x494,0x3fb,0x455)+_0x210d61(-0xf6,-0x198,-0x228,-0x1f5)][_0x2e3bd8];function _0x210d61(_0x28c72f,_0x1602f5,_0x26ebb5,_0x372011){return _0x2ed6ba(_0x1602f5-0xa1,_0x372011,_0x26ebb5-0x6c,_0x372011-0xe8);}return _0x34a59b;}function buildCharacterText(_0x24e9e3){const _0x2aed84={};function _0xb9b0cb(_0x3a4b84,_0x299345,_0x467f51,_0x41ac5d){return _0x2ed6ba(_0x467f51-0x184,_0x299345,_0x467f51-0xd9,_0x41ac5d-0xeb);}_0x2aed84[_0xb9b0cb(-0x19f,-0xde,-0x143,-0x139)]=_0xb9b0cb(-0x11b,-0x8a,-0x13b,-0x166);const _0x36aa85=_0x2aed84,_0x5e6bfa=_0x24e9e3['data'];let _0x21dfa6=_0x36aa85['MxstL'];_0x21dfa6+='中文名称:\x20'+(_0x5e6bfa[_0x152ae3(-0x6e,-0x25,-0xd2,-0xf2)]||'')+'\x0a',_0x21dfa6+=_0xb9b0cb(-0x5b,0x37,-0x12,-0xa8)+(_0x5e6bfa['nameEN']||'')+'\x0a';function _0x152ae3(_0x42b41d,_0x2a2d77,_0x288977,_0x521872){return _0x2ed6ba(_0x42b41d-0x158,_0x2a2d77,_0x288977-0xfb,_0x521872-0x16f);}return _0x21dfa6+=_0x152ae3(-0xb4,-0xbd,-0x122,-0xb4)+(_0x5e6bfa[_0xb9b0cb(-0xc0,-0x1ae,-0x12b,-0xec)+_0xb9b0cb(-0x86,-0x54,-0xc7,-0x12a)]||'')+'\x0a',_0x21dfa6+=_0x152ae3(-0x13e,-0x13e,-0x1dd,-0x129)+(_0x5e6bfa[_0xb9b0cb(-0x166,-0xa9,-0x12b,-0xf3)+_0xb9b0cb(-0x30,0x7d,-0x19,0x8b)]||'')+'\x0a',_0x21dfa6+='上半身SFW:\x20'+(_0x5e6bfa[_0xb9b0cb(-0xe1,-0x108,-0x58,-0xaf)+'FW']||'')+'\x0a',_0x21dfa6+=_0x152ae3(-0x11a,-0x1bd,-0x9c,-0x139)+(_0x5e6bfa[_0xb9b0cb(-0x3f,-0xfc,-0x58,-0xb5)+'FWBack']||'')+'\x0a',_0x21dfa6+=_0x152ae3(-0x161,-0x201,-0x1a1,-0x18e)+(_0x5e6bfa[_0xb9b0cb(-0xa9,-0x17f,-0x12e,-0x18c)+'W']||'')+'\x0a',_0x21dfa6+='下半身SFW背面:\x20'+(_0x5e6bfa[_0xb9b0cb(-0x15c,-0x114,-0x12e,-0x14c)+_0x152ae3(-0x44,0x24,0x16,-0xea)]||'')+'\x0a',_0x21dfa6+=_0x152ae3(-0x163,-0x19a,-0x1d1,-0x128)+(_0x5e6bfa[_0x152ae3(-0x146,-0xdb,-0xe3,-0x140)+_0x152ae3(-0x5e,-0xf4,0x35,-0xbe)]||'')+'\x0a',_0x21dfa6+='上半身NSFW背面:'+'\x20'+(_0x5e6bfa[_0x152ae3(-0x146,-0x96,-0xfb,-0xa2)+_0x152ae3(-0x139,-0x1c5,-0x1a7,-0x168)]||'')+'\x0a',_0x21dfa6+='下半身NSFW:\x20'+(_0x5e6bfa[_0x152ae3(-0x173,-0x1c7,-0x1d7,-0x155)+'FW']||'')+'\x0a',_0x21dfa6+=_0xb9b0cb(-0x10c,-0x18e,-0x10b,-0x169)+'\x20'+(_0x5e6bfa[_0xb9b0cb(-0x1d4,-0x117,-0x147,-0x106)+_0xb9b0cb(-0x1c2,-0xf8,-0x141,-0x1ea)]||'')+'\x0a',_0x21dfa6+='</人物>',_0x21dfa6;}export async function handleCharacterPromptModify(_0x58f356,_0x3a266b=[]){const _0x33abc1={'AuzpG':'(((.+)+)+)'+'+$','Piuhv':_0x12f258(-0xbb,-0xef,-0x13d,-0x150)+_0x12f258(-0xe9,-0xc9,-0xff,-0x105)+_0x12f258(-0x56,-0x96,-0x136,-0xce)+'ng\x20charact'+_0x12f258(-0xec,-0x6a,-0x69,-0xf0)+_0x24c8bf(0x5c7,0x58b,0x557,0x520)+_0x24c8bf(0x5c9,0x573,0x518,0x65f),'vlSVV':function(_0x4ce854){return _0x4ce854();},'ZcdMo':function(_0x4655ee){return _0x4655ee();},'wjMEA':'请先选择一个角色预设','KlFAv':_0x24c8bf(0x4cf,0x4e3,0x573,0x472)+_0x24c8bf(0x4f5,0x46a,0x4c8,0x49d)+_0x24c8bf(0x4d5,0x4bd,0x4d6,0x589)+_0x24c8bf(0x4e6,0x522,0x4b3,0x4b0),'LLwQB':_0x12f258(-0xeb,-0xef,-0x171,-0x43)+_0x12f258(-0x69,-0xc9,-0x5c,-0xec)+_0x12f258(-0xb5,-0xe9,-0x78,-0x140)+_0x12f258(-0x135,-0xf2,-0x66,-0x69)+':','wBEgI':_0x12f258(-0x41,-0xef,-0x178,-0x72)+_0x24c8bf(0x4f5,0x4f3,0x53f,0x4b8)+_0x24c8bf(0x4d5,0x559,0x4a9,0x4fc)+'variables:','DTCxQ':function(_0x31d1c0,_0x4e45a8){return _0x31d1c0||_0x4e45a8;},'FpCVk':function(_0x1e781e,_0x5360ac){return _0x1e781e!==_0x5360ac;},'QVtJv':_0x24c8bf(0x4c0,0x487,0x4b5,0x45d),'TuOPc':'[character'+_0x12f258(-0x35,-0xc9,-0xb8,-0xb7)+_0x12f258(-0x120,-0x126,-0x9b,-0xca)+'ter\x20trigge'+_0x24c8bf(0x4b2,0x45b,0x416,0x441),'CJoMg':function(_0x4ffe8c,_0x687384,_0x282243){return _0x4ffe8c(_0x687384,_0x282243);},'pScFM':function(_0x32abb3){return _0x32abb3();},'VkMwY':'[character'+_0x12f258(-0xad,-0xc9,-0x116,-0x143)+_0x12f258(-0xd1,-0x126,-0x1af,-0x146)+_0x24c8bf(0x490,0x438,0x4b5,0x4a9)+_0x12f258(-0x6b,-0x89,0x2a,-0xf8)+_0x24c8bf(0x57a,0x5d6,0x4f2,0x4d3),'RhpCA':function(_0x5508ec,_0x11f67e){return _0x5508ec(_0x11f67e);},'HLPlT':function(_0x56494d,_0x2110fe){return _0x56494d(_0x2110fe);},'icdhf':_0x12f258(-0xa1,-0xef,-0xe4,-0x134)+_0x12f258(-0x8b,-0xc9,-0xfe,-0x56)+_0x24c8bf(0x49c,0x536,0x473,0x541)+'后:','RvGBy':function(_0x42b27e,_0x5083bd,_0x25d0bd){return _0x42b27e(_0x5083bd,_0x25d0bd);},'RgMBe':_0x12f258(0xb,-0x7c,-0x6d,-0x5a),'RmzMN':_0x24c8bf(0x4cf,0x578,0x568,0x54e)+_0x24c8bf(0x4f5,0x537,0x521,0x479)+'fy]\x20User\x20r'+_0x12f258(-0x40,-0x7,0x6,0x1)+_0x12f258(-0x134,-0xb8,-0x120,-0xd6)+'ndex:','mIHFd':function(_0x591296,_0x455056,_0xea6037){return _0x591296(_0x455056,_0xea6037);},'SCznH':function(_0x4feb15,_0x13c6b7,_0x5d3848,_0x2a14bc,_0x5f0afc){return _0x4feb15(_0x13c6b7,_0x5d3848,_0x2a14bc,_0x5f0afc);},'sGlif':_0x12f258(-0x6a,-0xef,-0xbd,-0x197)+_0x12f258(-0x124,-0xc9,-0x157,-0x85)+_0x12f258(-0x12f,-0x9e,-0x72,-0x84)+_0x12f258(-0xbb,-0x55,-0x9f,-0xe),'WNBue':_0x12f258(-0x4b,0x0,0x79,0x7e),'cQgPE':function(_0x4194a0,_0x19e7ce){return _0x4194a0>_0x19e7ce;},'slmgF':function(_0x38e200,_0x4514c2){return _0x38e200>=_0x4514c2;},'thgNk':_0x24c8bf(0x4e2,0x4ad,0x43d,0x4fe),'vCWuA':_0x12f258(-0x25,-0x36,-0xe5,-0xe4),'BtOnR':_0x12f258(-0xae,-0xef,-0x18a,-0x153)+'PromptModi'+_0x24c8bf(0x531,0x5bf,0x5d8,0x4fa)+'ed','oBOUK':_0x12f258(0x5b,-0x42,-0x4c,0x4f)+_0x24c8bf(0x573,0x4df,0x4cb,0x525)+'\x20index','mlMXs':function(_0x21132b,_0x1ba7ee,_0x553069){return _0x21132b(_0x1ba7ee,_0x553069);},'bfDiP':_0x24c8bf(0x4cf,0x42d,0x53c,0x4d8)+'PromptModi'+_0x24c8bf(0x5a1,0x4ec,0x519,0x535)+_0x24c8bf(0x4ec,0x566,0x55c,0x589),'ALmOd':'lmUJm','nIJiy':_0x12f258(-0x150,-0xa9,-0x14d,-0x40),'veZqY':_0x12f258(-0x13b,-0xe2,-0x9e,-0x66),'LwfPw':_0x24c8bf(0x5dd,0x5aa,0x597,0x600)+_0x24c8bf(0x540,0x4a4,0x4b0,0x49e),'jSBES':_0x24c8bf(0x4cf,0x423,0x548,0x45d)+_0x12f258(-0xf1,-0xc9,-0xae,-0x86)+_0x12f258(-0x1c,-0x71,-0xdb,-0xf0)+'racter\x20tag'+_0x12f258(-0x124,-0xde,-0x8f,-0x17e)+_0x12f258(-0x3f,0x25,0x1d,0xd3),'GPMuP':_0x12f258(-0xcc,-0xef,-0xf6,-0x59)+'PromptModi'+_0x24c8bf(0x571,0x5ba,0x5d4,0x4cc)+_0x12f258(0x12,-0x6b,-0x5a,-0x11c)+_0x24c8bf(0x59b,0x584,0x541,0x5ca)+'ng:'};console[_0x12f258(-0x70,-0x13,-0x5f,0x41)](_0x33abc1['Piuhv']);function _0x24c8bf(_0x471105,_0x35a505,_0x19b3c8,_0x1e34da){return _0x2ed6ba(_0x471105-0x75c,_0x35a505,_0x19b3c8-0x5f,_0x1e34da-0x127);}toastr[_0x24c8bf(0x514,0x48a,0x490,0x47f)](_0x24c8bf(0x4cf,0x54c,0x523,0x4b2)+_0x12f258(-0x158,-0xc9,-0xe5,-0xc3)+'fy]\x20正在处理角色'+_0x24c8bf(0x53e,0x5c0,0x4f0,0x57c));function _0x12f258(_0x4d7554,_0x450aaf,_0x1d9065,_0x4fa8a5){return _0x2ed6ba(_0x450aaf-0x19e,_0x4d7554,_0x1d9065-0x1e6,_0x4fa8a5-0x11a);}try{const _0x511cf9=_0x33abc1[_0x12f258(0x5d,-0x58,-0x90,-0x64)](getContext),_0x44368e=extension_settings[extensionName],_0x21e66a=_0x33abc1['ZcdMo'](getCurrentCharacterPreset);if(!_0x21e66a){toastr['error'](_0x33abc1[_0x12f258(-0xb9,-0x61,-0xc5,0x15)]);return;}console[_0x24c8bf(0x5ab,0x537,0x64b,0x613)](_0x24c8bf(0x4cf,0x48a,0x4b2,0x4eb)+_0x12f258(-0x11d,-0xc9,-0x71,-0x17c)+'fy]\x20Curren'+'t\x20preset:',_0x21e66a['id']);const _0x4f252c=_0x21e66a[_0x12f258(0x6b,-0x1a,-0x65,-0x7e)][_0x12f258(-0x57,-0xdf,-0x5c,-0x47)+_0x12f258(-0x6c,0x7,0x88,-0x9b)]||'',_0x3ffae4=_0x21e66a[_0x12f258(0x82,-0x1a,-0x4d,-0xc4)]['generation'+'WorldBook']||'',_0x560d40=_0x21e66a[_0x12f258(-0xac,-0x1a,0x88,-0x5c)][_0x24c8bf(0x4df,0x4a3,0x4a3,0x579)+_0x24c8bf(0x4d6,0x501,0x4a1,0x468)]||{};console[_0x12f258(0x86,-0x13,0x81,0x4e)](_0x33abc1['KlFAv'],_0x4f252c),console[_0x12f258(-0x83,-0x13,0x55,-0xa8)](_0x33abc1['LLwQB'],_0x3ffae4),console[_0x12f258(0x3e,-0x13,-0x2c,-0x93)](_0x33abc1[_0x12f258(-0xcc,-0x25,-0x63,-0x45)],_0x560d40);const _0x3bbc00=_0x33abc1[_0x24c8bf(0x5e6,0x5cd,0x68e,0x5d1)](_0x58f356,''),_0x4c377f=[];_0x58f356&&_0x4c377f[_0x24c8bf(0x4d7,0x426,0x55b,0x44f)](_0x58f356);_0x4f252c&&_0x4c377f[_0x24c8bf(0x4d7,0x547,0x557,0x51d)](_0x4f252c);if(_0x3ffae4){if(_0x33abc1[_0x24c8bf(0x50c,0x56d,0x45b,0x515)](_0x33abc1[_0x24c8bf(0x593,0x4de,0x56c,0x611)],'Vbrkf')){if(_0x2d4487){const _0x1c3650=_0x20225d[_0x24c8bf(0x4e1,0x433,0x493,0x482)](_0x4b6d2c,arguments);return _0x4561b4=null,_0x1c3650;}}else _0x4c377f[_0x24c8bf(0x4d7,0x4fa,0x4a9,0x423)](_0x3ffae4);}const _0x83b3df=_0x4c377f[_0x12f258(-0x81,-0xdb,-0xb2,-0x62)]('\x0a');console[_0x24c8bf(0x5ab,0x5ba,0x5f3,0x57d)](_0x33abc1['TuOPc'],_0x83b3df);let _0xaad145=_0x33abc1[_0x12f258(0x14,0x22,0x41,-0x7a)](buildPromptForRequestType,_0x12f258(-0x5f,-0x9a,-0xd4,-0x133)+'y',_0x3bbc00);const _0x2fbd92=generateCharacterListText(_0x83b3df),_0x33abe2=_0x33abc1[_0x12f258(-0x6b,-0x57,-0x4c,-0xeb)](generateOutfitEnableListText),_0x4366cc=_0x33abc1[_0x24c8bf(0x4de,0x512,0x58a,0x560)](generateCommonCharacterListText);console['log'](_0x33abc1[_0x24c8bf(0x51c,0x4df,0x4d9,0x51a)],_0x2fbd92);const _0x39eb0b=_0x511cf9[_0x24c8bf(0x502,0x4f5,0x482,0x519)+'ta']?.[_0x24c8bf(0x5eb,0x5ba,0x5f3,0x577)]||{},_0x26e48f=_0x33abc1[_0x12f258(-0x10e,-0xce,-0x10e,-0xfa)](buildCharacterText,_0x21e66a);_0xaad145=_0x33abc1[_0x12f258(-0x154,-0xc3,-0xa4,-0xaa)](mergeAdjacentMessages,_0xaad145),console[_0x12f258(0x6c,-0x13,-0x27,-0xb)](_0x33abc1[_0x24c8bf(0x4f6,0x4c6,0x469,0x4c6)],_0xaad145);const _0x4c8e0e=_0x33abc1['RvGBy'](findMessageIndexWithPlaceholder,_0xaad145,_0x33abc1[_0x12f258(-0x18b,-0xed,-0x17e,-0x11a)]);console[_0x24c8bf(0x5ab,0x541,0x62d,0x652)](_0x33abc1[_0x12f258(-0x1a5,-0x105,-0x7d,-0x18d)],_0x4c8e0e);const _0x11688a={..._0x560d40,..._0x39eb0b},_0x574e05={};_0x574e05[_0x24c8bf(0x59e,0x597,0x5fc,0x508)]=_0x4f252c,_0x574e05['worldBookC'+'ontent']=_0x3ffae4,_0x574e05[_0x24c8bf(0x5eb,0x65b,0x569,0x671)]=_0x11688a,_0x574e05[_0x24c8bf(0x54c,0x53c,0x514,0x50e)]=_0x58f356||'',_0x574e05[_0x12f258(-0x33,-0x4,0x4d,-0x2a)+_0x24c8bf(0x5a5,0x53e,0x543,0x64f)]=_0x2fbd92,_0x574e05['outfitEnab'+'leListText']=_0x33abe2,_0x574e05['commonChar'+_0x24c8bf(0x5c4,0x52a,0x5fe,0x516)+'ext']=_0x4366cc;const _0xda5e85=_0x574e05,{messages:_0x1d2ef0,replacedVariables:_0x406aea}=_0x33abc1['mIHFd'](replaceAllPlaceholders,_0xaad145,_0xda5e85);_0xaad145=_0x1d2ef0,_0xaad145=_0x33abc1[_0x24c8bf(0x5dc,0x5c9,0x5c4,0x5fb)](_0x2cb6fc,_0xaad145,_0x12f258(-0x7a,0x27,-0x8a,0x5e),_0x26e48f,_0x406aea),console[_0x24c8bf(0x5ab,0x57c,0x5bf,0x651)](_0x33abc1[_0x12f258(0x8e,-0x22,-0x10,-0x46)],_0xaad145);let _0x288ee0='';if(_0x406aea['size']>0x57*-0x6b+0x2691+-0x234){if(_0x33abc1[_0x24c8bf(0x4f9,0x4c7,0x50c,0x4b2)]!==_0x33abc1[_0x12f258(-0x116,-0xc5,-0x14f,-0x15a)])return _0x2bc6bc[_0x12f258(0x43,-0x51,-0x2d,0x50)]()[_0x12f258(0x32,0x30,0xde,0x0)](FULCIV[_0x12f258(-0x37,-0xab,-0x7,-0x40)])[_0x12f258(0xe,-0x51,-0xc8,-0x106)]()[_0x24c8bf(0x5c2,0x54c,0x582,0x548)+'r'](_0x3f4bd3)[_0x24c8bf(0x5ee,0x69e,0x5cc,0x5b6)](FULCIV[_0x24c8bf(0x513,0x58e,0x460,0x501)]);else _0x288ee0='诊断：检测到以下变量'+'被使用：'+[..._0x406aea][_0x12f258(-0x139,-0xdb,-0x7e,-0xd4)]('、')+'\x0a';}_0x3a266b&&_0x33abc1['cQgPE'](_0x3a266b[_0x24c8bf(0x51d,0x50d,0x5a1,0x54d)],-0x649+-0x79*0x12+-0x7*-0x21d)&&_0x33abc1[_0x12f258(-0xb8,-0xeb,-0x82,-0x16d)](_0x4c8e0e,-0x1*-0x1191+0x92*-0x22+0x1*0x1d3)&&(_0x33abc1[_0x12f258(-0x124,-0xb2,-0x46,-0x15)](_0x33abc1['thgNk'],_0x24c8bf(0x5d7,0x5bb,0x685,0x662))?(_0xaad145=_0x33abc1['SCznH'](attachImagesToMessage,_0xaad145,_0x4c8e0e,_0x3a266b,_0x33abc1[_0x24c8bf(0x509,0x544,0x48c,0x56b)]),console[_0x24c8bf(0x5ab,0x554,0x59e,0x5b6)](_0x33abc1[_0x12f258(0x2d,-0x77,-0xe7,-0x6e)],_0x3a266b[_0x12f258(-0x19,-0xa1,-0x12c,-0x141)],_0x33abc1[_0x12f258(-0xc0,-0xbe,-0xb2,-0x127)],_0x4c8e0e)):_0x23e438[_0x517d00]&&(_0x57a63b[_0x10dbd9]=_0x2608c0[_0x510cb7]));updateCombinedPrompt(_0xaad145,_0x288ee0);const _0x495447={};_0x495447[_0x12f258(-0xf8,-0xe1,-0x15a,-0xf1)]=0x493e0;const _0x1b4dd6=await _0x33abc1[_0x24c8bf(0x5de,0x5b0,0x683,0x583)](LLM_CHAR_MODIFY,_0xaad145,_0x495447);console[_0x12f258(-0x73,-0x13,0x5e,-0x8d)](_0x33abc1[_0x24c8bf(0x59d,0x643,0x555,0x5ea)],_0x1b4dd6);if(!_0x1b4dd6){if(_0x33abc1[_0x12f258(-0x59,-0xe6,-0x91,-0x3d)]===_0x33abc1['nIJiy'])_0x155856[_0x12f258(0x7c,0x11,-0x94,0x88)]['push'](_0x45444d);else{toastr[_0x24c8bf(0x5b6,0x524,0x5c8,0x640)](_0x33abc1[_0x24c8bf(0x4bb,0x4c6,0x534,0x552)]);return;}}const _0x48f8b3=_0x33abc1['RhpCA'](extractCharacterTags,_0x1b4dd6);if(_0x48f8b3[_0x12f258(0x2c,0x11,0x9a,-0x70)][_0x12f258(-0x3e,-0xa1,-0xeb,-0x6b)]===-0x16d5+0x98f+-0x2*-0x6a3){toastr[_0x24c8bf(0x49a,0x41a,0x3ef,0x3f9)](_0x33abc1[_0x24c8bf(0x570,0x4da,0x5c2,0x578)]),console['log'](_0x33abc1[_0x12f258(0xae,0x3,-0x5a,-0x11)]),console['log'](_0x33abc1[_0x12f258(-0x55,-0xfb,-0x174,-0xf8)],_0x1b4dd6);return;}console['log']('[character'+_0x24c8bf(0x4f5,0x58f,0x475,0x534)+_0x12f258(-0xf8,-0x12c,-0x1d6,-0x104)+'ted\x20data:',_0x48f8b3);const _0x15186c=_0x48f8b3[_0x24c8bf(0x5cf,0x5da,0x625,0x62f)][-0x2113+0x17b*-0xb+-0xa2*-0x4e];await _0x33abc1[_0x24c8bf(0x5de,0x5a3,0x589,0x658)](updateCharacterPresetFromLLM,_0x21e66a['id'],_0x15186c),toastr[_0x12f258(0x42,-0x1e,0x3e,-0xaa)](_0x12f258(-0x189,-0x108,-0x65,-0x69));}catch(_0x2077d4){console[_0x24c8bf(0x5b6,0x5dd,0x622,0x563)]('[character'+_0x12f258(-0x24,-0xc9,-0xa7,-0xba)+'fy]\x20Error:',_0x2077d4),toastr[_0x24c8bf(0x5b6,0x5d4,0x64a,0x5a4)](_0x24c8bf(0x4f1,0x597,0x487,0x5a1)+'\x20'+_0x2077d4[_0x12f258(-0x21,-0x31,0x14,0x1f)]);}}async function updateCharacterPresetFromLLM(_0x26e24b,_0x2fb8af){function _0x7b463c(_0x3ee86c,_0x1bbec9,_0xfd15ac,_0x492eb1){return _0x2ed6ba(_0x492eb1-0x554,_0x1bbec9,_0xfd15ac-0x99,_0x492eb1-0x1c);}const _0x31ff28={'TRkhf':function(_0x44acc7,_0x563e3c){return _0x44acc7===_0x563e3c;},'LGolV':'lRwFl','GjQCh':'DKugI','Blnvn':'中文名称','wJgYh':_0x7b463c(0x2cc,0x3c1,0x399,0x359),'jEpdl':'五官外貌背面','NQEOZ':_0x7b463c(0x349,0x2f5,0x36b,0x330),'Eaniq':'上半身SFW背面','FwQeh':_0x57a95(0x476,0x53c,0x50b,0x5a7),'DuveF':_0x57a95(0x462,0x4fd,0x4ec,0x43d),'LDxhT':_0x7b463c(0x2e5,0x3ee,0x423,0x383),'AAgNX':'下半身NSFW','BLOsa':_0x57a95(0x561,0x5be,0x559,0x4ba),'uQykg':_0x7b463c(0x2df,0x2df,0x26f,0x2e6),'wAtmK':function(_0x411275,_0x5efea5){return _0x411275>_0x5efea5;},'qVJzr':_0x7b463c(0x42a,0x314,0x421,0x3a7),'DJudg':function(_0x5ea47a,_0x4a19b9){return _0x5ea47a!==_0x4a19b9;},'GkaCB':'oqPXx','ebBEa':'sNKNa','tATJO':_0x7b463c(0x2f2,0x314,0x31a,0x311)+'内容','vRrNF':function(_0xc1ec57,_0x3eff30){return _0xc1ec57(_0x3eff30);},'syxTj':'已取消更新','llmVn':function(_0x4c416a){return _0x4c416a();},'LjOrU':function(_0xecf5d5,_0xcd85c){return _0xecf5d5(_0xcd85c);},'BHamW':_0x7b463c(0x324,0x356,0x323,0x2f2)+_0x7b463c(0x3aa,0x40d,0x309,0x37d)+_0x57a95(0x51e,0x4d4,0x56c,0x586),'prPkw':function(_0x4af859,_0x35c9a4){return _0x4af859(_0x35c9a4);},'PKgMs':function(_0x10fc02,_0x1eaa23){return _0x10fc02(_0x1eaa23);}},_0x48dd6c=extension_settings[extensionName],_0x3bbacd=_0x48dd6c[_0x57a95(0x53a,0x485,0x520,0x55d)+_0x7b463c(0x2e2,0x38c,0x356,0x31b)][_0x26e24b];if(!_0x3bbacd){if(_0x31ff28[_0x7b463c(0x339,0x3dc,0x433,0x3d0)](_0x31ff28[_0x57a95(0x4b0,0x591,0x521,0x48b)],_0x31ff28['GjQCh']))return _0x2c9101&&_0x319bf6[_0x7b463c(0x35c,0x363,0x33e,0x373)](_0x314ea7)&&(_0x553379&&_0x24f66c[_0x7b463c(0x412,0x3b7,0x40a,0x37a)](_0x44fc1a)),_0x3f803b[_0x7b463c(0x3af,0x34d,0x3e6,0x347)](_0x1e4b63,_0x15778f);else{toastr['error'](_0x57a95(0x4cd,0x46f,0x47f,0x4bd));return;}}let _0x509169=_0x57a95(0x50b,0x50f,0x5ae,0x5e6)+_0x26e24b+_0x7b463c(0x348,0x226,0x2b2,0x29e);const _0x569a1c={};_0x569a1c['nameCN']=_0x31ff28[_0x57a95(0x597,0x509,0x58a,0x557)],_0x569a1c[_0x57a95(0x571,0x61e,0x5b6,0x569)]=_0x31ff28[_0x7b463c(0x2e7,0x2f7,0x42a,0x386)],_0x569a1c['facialFeat'+_0x57a95(0x429,0x576,0x4d3,0x49f)]=_0x7b463c(0x2ce,0x2b1,0x3a0,0x346),_0x569a1c[_0x57a95(0x444,0x4bd,0x46f,0x417)+_0x57a95(0x544,0x533,0x581,0x5da)]=_0x31ff28[_0x7b463c(0x3ef,0x372,0x2ab,0x34f)],_0x569a1c[_0x7b463c(0x2f0,0x3c6,0x30a,0x378)+'FW']=_0x31ff28[_0x57a95(0x493,0x4bb,0x472,0x4cc)],_0x569a1c[_0x57a95(0x5f1,0x5e9,0x542,0x5aa)+_0x7b463c(0x239,0x2b2,0x1fc,0x28f)]=_0x31ff28['Eaniq'],_0x569a1c[_0x7b463c(0x25c,0x212,0x314,0x2a2)+'W']=_0x31ff28[_0x57a95(0x4d7,0x570,0x552,0x5e9)],_0x569a1c['fullBodySF'+'WBack']=_0x57a95(0x626,0x558,0x594,0x4f9),_0x569a1c['upperBodyN'+_0x7b463c(0x301,0x424,0x419,0x39e)]=_0x31ff28['DuveF'],_0x569a1c[_0x7b463c(0x300,0x344,0x2c3,0x2b6)+_0x57a95(0x4d3,0x4f7,0x48d,0x4e8)]=_0x31ff28[_0x7b463c(0x29b,0x21f,0x318,0x2c2)],_0x569a1c[_0x7b463c(0x1de,0x280,0x1ef,0x289)+'FW']=_0x31ff28[_0x7b463c(0x2f0,0x309,0x24a,0x2c8)],_0x569a1c[_0x57a95(0x4f6,0x4ee,0x453,0x477)+_0x7b463c(0x2b5,0x334,0x295,0x28f)]=_0x31ff28[_0x7b463c(0x3cb,0x37e,0x2b8,0x32f)];const _0x51afdc=_0x569a1c;let _0x336a54=-0x19*0x187+-0xd4b+-0x16*-0x257;for(const _0x56c657 in _0x51afdc){if(_0x2fb8af[_0x56c657]&&_0x2fb8af[_0x56c657]!==_0x3bbacd[_0x56c657]){const _0x4a968e=_0x3bbacd[_0x56c657]||_0x31ff28[_0x57a95(0x446,0x54c,0x4e1,0x519)],_0x54832e=_0x2fb8af[_0x56c657];_0x509169+='•\x20'+_0x51afdc[_0x56c657]+':\x0a',_0x509169+='\x20\x20旧:\x20'+_0x4a968e[_0x7b463c(0x35e,0x20f,0x232,0x2b0)](0x1*0x8b5+0x2*0x2b+-0x90b,0x2*0xdbb+0x533*0x2+-0x25aa)+(_0x4a968e[_0x57a95(0x542,0x57f,0x4df,0x44d)]>0x1889*0x1+-0x1*0xd07+0x5a8*-0x2?_0x57a95(0x5b9,0x618,0x571,0x4bc):'')+'\x0a',_0x509169+=_0x57a95(0x499,0x44c,0x4a6,0x421)+_0x54832e[_0x7b463c(0x33b,0x280,0x305,0x2b0)](-0x1d5e+-0xd*-0x29f+-0x5*0xf1,0x1cc*0x3+0x10bc+-0x15ee)+(_0x31ff28['wAtmK'](_0x54832e[_0x7b463c(0x302,0x2b1,0x398,0x315)],0x1cf*-0x15+0x45c*-0x3+-0x1*-0x3341)?_0x31ff28['qVJzr']:'')+'\x0a\x0a',_0x336a54++;}}if(_0x336a54===-0xf8a+-0x18*-0x6c+0x56a){if(_0x31ff28['DJudg'](_0x31ff28[_0x57a95(0x54c,0x56c,0x518,0x56e)],_0x31ff28['ebBEa'])){toastr[_0x57a95(0x566,0x4aa,0x4d6,0x4c1)](_0x31ff28['tATJO']);return;}else _0x196e12[_0x57a95(0x523,0x41f,0x499,0x54e)](..._0x39bb99[_0x7b463c(0x32c,0x2b2,0x1ee,0x293)]);}_0x509169+='共\x20'+_0x336a54+_0x7b463c(0x3e5,0x3dd,0x3c4,0x36f);const _0x4556f3=await _0x31ff28[_0x57a95(0x4e1,0x4e9,0x557,0x593)](stylishConfirm,_0x509169);function _0x57a95(_0x2c7b86,_0x36e9a9,_0x2f9c64,_0x2d652f){return _0x2ed6ba(_0x2f9c64-0x71e,_0x2c7b86,_0x2f9c64-0xab,_0x2d652f-0x35);}if(!_0x4556f3){toastr['info'](_0x31ff28['syxTj']);return;}for(const _0x8e0c89 in _0x51afdc){_0x2fb8af[_0x8e0c89]&&(_0x3bbacd[_0x8e0c89]=_0x2fb8af[_0x8e0c89]);}_0x31ff28[_0x57a95(0x535,0x562,0x51d,0x4cd)](saveSettingsDebounced);const _0x2fa2a2=_0x31ff28[_0x57a95(0x5c9,0x634,0x5ac,0x5ef)]($,_0x31ff28['BHamW']);_0x2fa2a2[_0x57a95(0x443,0x492,0x4df,0x4f4)]&&_0x31ff28['prPkw'](refreshCharacterSettings,_0x2fa2a2),_0x31ff28['PKgMs'](updateFormFields,_0x2fb8af),console[_0x57a95(0x5e7,0x587,0x56d,0x5ca)](_0x57a95(0x4a9,0x508,0x491,0x485)+_0x57a95(0x4b9,0x4e7,0x4b7,0x4df)+_0x7b463c(0x3fa,0x359,0x42d,0x3ed)+_0x57a95(0x44b,0x412,0x470,0x503)+_0x26e24b+'\x22');}function updateFormFields(_0x57b311){const _0x17ae40={};_0x17ae40[_0x4cca9d(0x181,0x228,0x2b1,0x232)]=function(_0x3aedb4,_0x13377a){return _0x3aedb4===_0x13377a;},_0x17ae40[_0x3b6483(0x5da,0x5bf,0x5c2,0x5a0)]='JJwvz';function _0x3b6483(_0x3c07aa,_0x3301f1,_0x3da4d1,_0x137d64){return _0x2ed6ba(_0x3c07aa-0x77a,_0x137d64,_0x3da4d1-0x65,_0x137d64-0x3b);}_0x17ae40['ZYhSN']=function(_0x58a35d,_0x534397){return _0x58a35d!==_0x534397;};function _0x4cca9d(_0x48eb86,_0x24f0d7,_0x3a7206,_0x4aa164){return _0x2ed6ba(_0x24f0d7-0x449,_0x3a7206,_0x3a7206-0x117,_0x4aa164-0x1bc);}_0x17ae40[_0x4cca9d(0x27d,0x276,0x1d4,0x223)]=_0x4cca9d(0x18f,0x226,0x2d2,0x175),_0x17ae40[_0x4cca9d(0x222,0x29f,0x2e5,0x2a2)]=_0x3b6483(0x612,0x67c,0x5f1,0x6bc),_0x17ae40[_0x3b6483(0x50b,0x518,0x570,0x5bc)]=_0x3b6483(0x4cb,0x520,0x46a,0x4f0)+'ures',_0x17ae40[_0x4cca9d(0x2ab,0x285,0x214,0x2d9)]='upperBodyS'+'FW',_0x17ae40[_0x4cca9d(0x245,0x219,0x2ad,0x23b)]=_0x3b6483(0x59e,0x5a6,0x54c,0x590)+'FWBack',_0x17ae40['xePsG']=_0x4cca9d(0x1cf,0x197,0x1b9,0x19a)+'W',_0x17ae40['UeCIy']='fullBodySF'+_0x3b6483(0x5de,0x5e9,0x652,0x5b6),_0x17ae40[_0x3b6483(0x5d9,0x5b6,0x5aa,0x55f)]=_0x3b6483(0x4dc,0x539,0x563,0x4e9)+_0x4cca9d(0x2d0,0x293,0x2d7,0x335),_0x17ae40[_0x3b6483(0x4d1,0x434,0x4f2,0x506)]=_0x4cca9d(0x1ed,0x1ab,0x1bd,0x142)+_0x3b6483(0x4e9,0x4b1,0x55a,0x4c4),_0x17ae40[_0x4cca9d(0x1f2,0x277,0x2d5,0x24f)]=_0x3b6483(0x4af,0x4d1,0x4eb,0x45a)+'FW';const _0x2f641a=_0x17ae40,_0x447019=[_0x4cca9d(0x283,0x283,0x27b,0x2da),_0x2f641a[_0x4cca9d(0x29d,0x29f,0x340,0x33f)],_0x2f641a[_0x3b6483(0x50b,0x461,0x501,0x505)],'facialFeat'+_0x3b6483(0x5dd,0x594,0x60b,0x5be),_0x2f641a[_0x3b6483(0x5b6,0x5ef,0x517,0x65a)],_0x2f641a[_0x4cca9d(0x29c,0x219,0x2bd,0x1ee)],_0x2f641a[_0x4cca9d(0x34a,0x2e0,0x23d,0x25e)],_0x2f641a[_0x3b6483(0x606,0x5a2,0x5eb,0x67d)],_0x2f641a['DWjSy'],_0x2f641a[_0x4cca9d(0x13d,0x1a0,0x13f,0x17f)],_0x2f641a[_0x4cca9d(0x320,0x277,0x28e,0x283)],_0x4cca9d(0x1ad,0x17e,0x230,0x12f)+_0x3b6483(0x4b5,0x505,0x523,0x405)];_0x447019['forEach'](_0x474775=>{function _0x52e95d(_0x2a72f6,_0x495d0e,_0x40199f,_0x4b0734){return _0x4cca9d(_0x2a72f6-0x173,_0x40199f- -0x41d,_0x4b0734,_0x4b0734-0x164);}function _0x2de82b(_0x234bbe,_0x56fa83,_0x2837bf,_0x599315){return _0x4cca9d(_0x234bbe-0x9c,_0x599315-0x1f1,_0x234bbe,_0x599315-0x129);}if(_0x57b311[_0x474775]){if(_0x2f641a[_0x52e95d(-0x22e,-0x14b,-0x1f5,-0x155)](_0x2de82b(0x41d,0x42b,0x41a,0x4ac),_0x2f641a[_0x2de82b(0x4b3,0x49c,0x502,0x49a)]))return _0x3eb39e;else{const _0x5c3bd2=document[_0x2de82b(0x4a8,0x486,0x483,0x424)+_0x2de82b(0x446,0x3e5,0x458,0x48f)](_0x52e95d(-0x144,-0x1cf,-0x1af,-0x10b)+_0x474775);if(_0x5c3bd2){if(_0x2f641a['ZYhSN'](_0x2de82b(0x2f6,0x3b6,0x35c,0x371),_0x2de82b(0x352,0x338,0x366,0x371)))return _0x4e6f5c;else _0x5c3bd2[_0x52e95d(-0x181,-0x167,-0x16d,-0x221)]=_0x57b311[_0x474775],$(_0x5c3bd2)[_0x52e95d(-0x27b,-0x194,-0x1de,-0x189)](_0x2f641a['YrqRr']);}}}});}
//# sourceMappingURL=http://localhost:8000/characterPromptModify.js.map