(function(_0x1a9ef1,_0x197b30){function _0xc8270c(_0x52207a,_0xee2427,_0x534375,_0x46a1c0){return _0x157e(_0x52207a-0x1c0,_0x534375);}const _0x380fe7=_0x1a9ef1();function _0xd8bb78(_0x341a1a,_0x6cf832,_0x2a4213,_0x17d45d){return _0x157e(_0x2a4213- -0x221,_0x17d45d);}while(!![]){try{const _0x12b095=parseInt(_0xd8bb78(-0x77,0xc,-0x1e,-0xa8))/(0x5cf+0x199*0xb+0x3*-0x7cb)+-parseInt(_0xc8270c(0x507,0x5a4,0x44a,0x48a))/(-0xbc1+0x20b+0x9b8)*(parseInt(_0xd8bb78(0x12c,0x117,0xbc,0x8c))/(-0x5*0x1f1+0x53a*0x6+-0x15a4))+-parseInt(_0xc8270c(0x42a,0x3f3,0x359,0x41e))/(0x213d+0x1ec*-0x10+-0x279)+parseInt(_0xd8bb78(0x65,0xa7,-0x29,-0xc8))/(0x2*-0xb08+-0x1a93+0xad*0x48)+-parseInt(_0xd8bb78(0x1d5,0x103,0x124,0x1da))/(0x9ad+0x17f2+0x3*-0xb33)+-parseInt(_0xd8bb78(0xc8,-0xa2,0x30,-0xb))/(0x162d+0x128*0x13+-0x2c1e)+parseInt(_0xc8270c(0x4fb,0x596,0x59e,0x585))/(0x24d9+0x1*0x1bfb+-0x40cc);if(_0x12b095===_0x197b30)break;else _0x380fe7['push'](_0x380fe7['shift']());}catch(_0x322e61){_0x380fe7['push'](_0x380fe7['shift']());}}}(_0x494a,-0x1*0xa2c66+0x1*-0xdab97+-0x2c8e*-0xd9));const _0x24e0a8=(function(){let _0x15da59=!![];return function(_0x1af0f4,_0x4f26f1){const _0xe23a0f=_0x15da59?function(){if(_0x4f26f1){const _0x3aa0fd=_0x4f26f1['apply'](_0x1af0f4,arguments);return _0x4f26f1=null,_0x3aa0fd;}}:function(){};return _0x15da59=![],_0xe23a0f;};}()),_0x2c4bf8=_0x24e0a8(this,function(){const _0x5385dd={};function _0x39bdad(_0x3c42ef,_0x5f550a,_0x2517bc,_0x2547dc){return _0x157e(_0x5f550a-0x1be,_0x2517bc);}function _0xb1c4eb(_0x541573,_0x3c47c5,_0x3348b8,_0x48ab9a){return _0x157e(_0x541573- -0x340,_0x48ab9a);}_0x5385dd[_0xb1c4eb(-0x8f,0x32,-0x56,-0x24)]=_0xb1c4eb(-0x5c,-0x5f,-0xfe,0x62)+'+$';const _0x1a05b1=_0x5385dd;return _0x2c4bf8['toString']()['search'](_0x39bdad(0x46f,0x4a2,0x407,0x48d)+'+$')[_0x39bdad(0x51a,0x45e,0x4eb,0x3f2)]()[_0x39bdad(0x467,0x493,0x3bd,0x55e)+'r'](_0x2c4bf8)['search'](_0x1a05b1[_0x39bdad(0x4d4,0x46f,0x48d,0x417)]);});_0x2c4bf8();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';function _0x31db9b(_0x3c22ff,_0x2e2290,_0x224043,_0xa2f06b){return _0x157e(_0x3c22ff-0x91,_0x224043);}import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x388224}from'./promptProcessor.js';function replacePlaceholder(_0x4b0289,_0x264074,_0x3565da,_0x305124){const _0xd729a2={'iIrfX':function(_0x48e725,_0x20f1b9){return _0x48e725(_0x20f1b9);},'tmkrD':function(_0x1c5f75,_0x4a0d79){return _0x1c5f75===_0x4a0d79;},'gBiaB':_0x4c02ab(0x430,0x4d3,0x45a,0x4a0),'qSaVL':'SddRw','YvOjs':_0x4c02ab(0x4aa,0x42f,0x38e,0x497),'mXHZu':_0x4c02ab(0x49b,0x48f,0x525,0x400),'ZaBIN':function(_0x55baf2,_0x81957b){return _0x55baf2===_0x81957b;},'sXZpJ':'object'};if(_0xd729a2['tmkrD'](typeof _0x4b0289,_0xd729a2[_0x557281(0x49d,0x44e,0x422,0x406)])){if(_0xd729a2['qSaVL']!==_0xd729a2[_0x4c02ab(0x49e,0x50b,0x5c6,0x4da)]){if(_0x3565da&&_0x4b0289[_0x557281(0x2e6,0x351,0x354,0x30f)](_0x264074)){if('pRqAo'===_0xd729a2[_0x557281(0x292,0x3e9,0x325,0x3ba)]){const _0x45d9a3=_0x4b15a0[_0x4c02ab(0x3e4,0x39b,0x2f9,0x2eb)](_0x5be7b5,arguments);return _0x1b9de2=null,_0x45d9a3;}else _0x305124&&_0x305124[_0x557281(0x4b3,0x48a,0x484,0x411)](_0x264074);}return _0x4b0289[_0x4c02ab(0x417,0x495,0x509,0x41c)](_0x264074,_0x3565da);}else _0xd729a2[_0x557281(0x3ba,0x324,0x3de,0x3dc)](_0x4059ea,_0x1f983f[_0x4c02ab(0x443,0x3c2,0x454,0x392)]);}function _0x557281(_0x53c02c,_0x434bdf,_0x37173d,_0x117d4f){return _0x157e(_0x37173d-0x140,_0x117d4f);}function _0x4c02ab(_0x23b1dc,_0x210cbb,_0x240112,_0x538194){return _0x157e(_0x210cbb-0x1bb,_0x538194);}if(Array[_0x4c02ab(0x454,0x4cd,0x55d,0x50d)](_0x4b0289))return _0x4b0289['map'](_0x2d9bab=>replacePlaceholder(_0x2d9bab,_0x264074,_0x3565da,_0x305124));if(_0x4b0289&&_0xd729a2[_0x4c02ab(0x477,0x430,0x364,0x4e0)](typeof _0x4b0289,_0xd729a2[_0x557281(0x3f7,0x3a0,0x3cd,0x306)])){const _0x554bac={};for(const _0x1730ca in _0x4b0289){_0x554bac[_0x1730ca]=replacePlaceholder(_0x4b0289[_0x1730ca],_0x264074,_0x3565da,_0x305124);}return _0x554bac;}return _0x4b0289;}function attachImagesToMessage(_0x5424cb,_0x9eef4e,_0x2cfbe8,_0x463e60=_0x31db9b(0x40b,0x450,0x410,0x495)){const _0xf4fe2a={'uhpqW':function(_0xd0cf9d,_0x2bc50f){return _0xd0cf9d!==_0x2bc50f;},'mYhbI':_0x537f30(0x11a,0xaa,0x119,0x5d),'fKNmf':function(_0x33e6df,_0x1f3796){return _0x33e6df!==_0x1f3796;},'PFAOb':function(_0x28f9f1,_0x24646d){return _0x28f9f1(_0x24646d);},'dwBgJ':_0x537f30(0x97,0x86,0x32,0xbf)+'时','IaUaa':function(_0x33b030){return _0x33b030();},'YyvRz':function(_0x1c7e96,_0x38672b){return _0x1c7e96!==_0x38672b;},'kCEHr':'gWNDX','oywes':_0x537f30(0xa8,0x4d,0x54,0xbe),'TgxMr':function(_0x77cb3f,_0x27ddec){return _0x77cb3f===_0x27ddec;},'JaGZU':_0x58abbc(0x1f0,0x288,0x1a0,0x1f0),'kKvCh':function(_0x4ce7ba,_0x13ab6a){return _0x4ce7ba+_0x13ab6a;},'NWhBa':_0x58abbc(0x143,0x15c,0x1b9,0xc3),'qbURY':_0x58abbc(0xb2,0x13b,0x179,0x11),'gDftN':_0x58abbc(0x101,0x175,0x153,0x1cc),'GgdEj':_0x58abbc(0x147,0x8a,0xd0,0x1be),'DxMUC':function(_0x250a8f,_0x1bc634){return _0x250a8f<_0x1bc634;},'kSFOF':function(_0x354987,_0x230939){return _0x354987>=_0x230939;},'rNJIM':function(_0x4c3eb0,_0x4649c6){return _0x4c3eb0>_0x4649c6;},'boMWc':_0x58abbc(0x211,0x28b,0x23f,0x2c4)};function _0x58abbc(_0xa04059,_0x151b99,_0x1ce02a,_0x2f81aa){return _0x31db9b(_0xa04059- -0x1b9,_0x151b99-0x14f,_0x151b99,_0x2f81aa-0x87);}if(!_0x2cfbe8||_0x2cfbe8[_0x537f30(0x129,0x7,0xd3,0x87)]===0x2041+-0xf04*0x1+-0x113d||_0xf4fe2a[_0x58abbc(0xe0,0xe1,0x166,0x1b8)](_0x9eef4e,0x1740+0x998+-0x20d8)||_0xf4fe2a[_0x58abbc(0xe9,0x35,0x20,0x18)](_0x9eef4e,_0x5424cb['length'])){if(_0x537f30(0x3a,0xc6,0x47,0x25)!=='BmvlW')return _0x5424cb;else _0x314b08[_0x58abbc(0x1df,0x1a8,0x104,0x1f4)]=[];}const _0x175089=[..._0x5424cb],_0x483a31=_0x175089[_0x9eef4e];function _0x537f30(_0x137661,_0x187ef7,_0x5cdbd7,_0x3384cf){return _0x31db9b(_0x5cdbd7- -0x2de,_0x187ef7-0x199,_0x3384cf,_0x3384cf-0xd4);}const _0x286eeb=[];if(typeof _0x483a31['content']===_0x58abbc(0x1f0,0x2b2,0x283,0x26b)){if(_0xf4fe2a['uhpqW']('RmLQI',_0x537f30(-0x11,-0x20,0xa8,0x84)))_0x2f737f[_0xb051e4]&&_0xf4fe2a[_0x537f30(0x84,0xc,0x41,0x97)](_0xc67e15[_0x3809a8],_0x480d1b[_0x41bd8f])&&_0x24ac4d++;else{const _0x4c40d8={};_0x4c40d8[_0x58abbc(0x22a,0x253,0x2ad,0x282)]=_0x537f30(0xf9,0xa5,0x1e,0x7c),_0x4c40d8[_0x58abbc(0x143,0x122,0x16d,0xa2)]=_0x483a31[_0x537f30(-0x30,0xd2,0x89,0x2e)],_0x286eeb[_0x537f30(-0x3,0xbc,-0x19,-0x3a)](_0x4c40d8);}}else Array[_0x58abbc(0x1ea,0x25c,0x169,0x275)](_0x483a31[_0x537f30(0x106,0xe0,0x89,0x84)])&&_0x286eeb[_0x58abbc(0x10c,0x1e6,0x68,0x68)](..._0x483a31[_0x537f30(0xb6,0x69,0x89,0x15)]);if(_0xf4fe2a[_0x58abbc(0xeb,0x10b,0x4b,0xae)](_0x2cfbe8['length'],0x1d9+-0x82*0x42+0x1fab)){if(_0xf4fe2a[_0x58abbc(0x117,0x106,0x5f,0xa6)](_0xf4fe2a[_0x537f30(-0x157,0x22,-0x80,0x10)],_0xf4fe2a[_0x58abbc(0xa5,-0x30,0x4,0x150)])){const _0x29d7be={};_0x29d7be['type']=_0xf4fe2a[_0x58abbc(0x192,0xb7,0x159,0x1fc)],_0x29d7be[_0x537f30(-0x41,-0xb8,0x1e,-0x4d)]=_0x58abbc(0x24c,0x2f8,0x254,0x2cc)+_0x2cfbe8[_0x537f30(0x1a3,0x13d,0xd3,0x17d)]+'张'+_0x463e60+']',_0x286eeb[_0x58abbc(0x10c,0x107,0x117,0xda)](_0x29d7be);}else{if(_0x4bd7d3[_0x1cccca]){const _0x5952d7=_0x525248['getElement'+_0x58abbc(0xce,0x134,0xc3,0x10a)](_0x58abbc(0xd5,0x6b,0x19c,0x37)+_0x527f82);_0x5952d7&&(_0x5952d7[_0x537f30(-0x3,0x6c,-0x6f,-0x7f)]=_0x18ae8b[_0x4cc7e2],_0x5d9124(_0x5952d7)[_0x58abbc(0xfb,0x16f,0x14e,0x89)](_0xf4fe2a[_0x58abbc(0xaa,0x166,0xf8,0x32)]));}}}_0x2cfbe8[_0x58abbc(0x222,0x26d,0x1b9,0x258)]((_0x6b94d2,_0x3e86c1)=>{function _0x494d4e(_0x6cf96e,_0x398e68,_0x43bf51,_0x2eb7f5){return _0x537f30(_0x6cf96e-0x14f,_0x398e68-0x18d,_0x43bf51-0x273,_0x2eb7f5);}const _0x380a60={'SGErz':function(_0x1ee263,_0x1ae7c7){return _0xf4fe2a['fKNmf'](_0x1ee263,_0x1ae7c7);},'ElTUU':function(_0x41b49f,_0x4ec35a){return _0xf4fe2a['PFAOb'](_0x41b49f,_0x4ec35a);},'wiBRk':function(_0xdcdd6,_0x282cce){function _0x2fd095(_0x4bbfeb,_0x56f99e,_0x49a60d,_0x388c3c){return _0x157e(_0x4bbfeb-0x307,_0x56f99e);}return _0xf4fe2a[_0x2fd095(0x4dd,0x4ec,0x51c,0x509)](_0xdcdd6,_0x282cce);},'CMtcF':_0xf4fe2a['dwBgJ'],'OVgiK':function(_0x1539c3){function _0x25ad19(_0x188117,_0x3514c6,_0x11ae5d,_0x53a8c1){return _0x157e(_0x11ae5d- -0x2af,_0x188117);}return _0xf4fe2a[_0x25ad19(-0x38,0x64,0x99,0x3c)](_0x1539c3);}};function _0x20db3b(_0x36507d,_0x599ff8,_0x218cd1,_0x471260){return _0x537f30(_0x36507d-0x58,_0x599ff8-0xcf,_0x599ff8-0x4cf,_0x471260);}if(_0xf4fe2a[_0x494d4e(0x1a1,0x1d9,0x268,0x265)](_0xf4fe2a[_0x494d4e(0x1da,0x365,0x28b,0x233)],_0xf4fe2a['oywes'])){const _0x342924=_0xf4fe2a[_0x494d4e(0x29e,0x28a,0x265,0x29a)](typeof _0x6b94d2,_0xf4fe2a[_0x494d4e(0x413,0x36e,0x350,0x2f8)])?_0x6b94d2:_0x6b94d2[_0x494d4e(0x3e5,0x32d,0x324,0x390)],_0x530cf2=typeof _0x6b94d2===_0x494d4e(0x312,0x309,0x30c,0x325)&&_0x6b94d2['name']?_0x6b94d2['name']:''+_0x463e60+_0xf4fe2a[_0x494d4e(0x314,0x221,0x2d9,0x21b)](_0x3e86c1,0x1f1e+-0xf50+-0xfcd),_0x5cf4fc={};_0x5cf4fc[_0x494d4e(0x352,0x423,0x378,0x313)]=_0xf4fe2a['NWhBa'],_0x5cf4fc[_0x20db3b(0x52c,0x4ed,0x4cd,0x526)]='['+_0x530cf2+']',_0x286eeb[_0x494d4e(0x1a3,0x1b4,0x25a,0x23e)](_0x5cf4fc);let _0x52c79b=_0x342924;!_0x342924['startsWith'](_0xf4fe2a[_0x494d4e(0x308,0x358,0x37d,0x379)])&&(_0xf4fe2a[_0x20db3b(0x44b,0x4c1,0x431,0x447)](_0x494d4e(0x271,0x2cb,0x211,0x25c),_0x494d4e(0x18b,0x18c,0x211,0x180))?_0x52c79b=_0x494d4e(0x22f,0x197,0x242,0x2d7)+_0x20db3b(0x548,0x50d,0x5c0,0x4cb)+'4,'+_0x342924:_0x4b54d4[_0x494d4e(0x305,0x228,0x25a,0x1b8)](..._0x41a3ce[_0x20db3b(0x599,0x558,0x4e4,0x523)]));const _0x500301={};_0x500301[_0x494d4e(0x2d6,0x359,0x378,0x2ce)]=_0xf4fe2a['gDftN'],_0x500301[_0x494d4e(0x2e2,0x176,0x24f,0x1ad)]={},_0x500301[_0x494d4e(0x2e2,0x176,0x24f,0x1ad)][_0x494d4e(0x2db,0x29a,0x25c,0x18f)]=_0x52c79b,_0x500301[_0x494d4e(0x2e2,0x176,0x24f,0x1ad)][_0x494d4e(0x275,0x287,0x285,0x2d4)]=_0xf4fe2a[_0x20db3b(0x57a,0x5d8,0x54a,0x68c)],_0x286eeb[_0x20db3b(0x42e,0x4b6,0x3df,0x4e8)](_0x500301);}else{const _0x4100ab=_0x380a60['OVgiK'](_0x418e5a);_0x4e6465[_0x494d4e(0x317,0x24d,0x2f1,0x288)](_0x494d4e(0x329,0x3ab,0x3a2,0x31f)+_0x494d4e(0x298,0x34c,0x337,0x2d9)+'fy]\x20Reques'+_0x494d4e(0x1eb,0x25d,0x253,0x2bd)+_0x494d4e(0x2c3,0x2b7,0x212,0x23a)+_0x494d4e(0x2e9,0x379,0x2ac,0x376)+_0x4100ab+')');const _0x128e19=_0x27d01a=>{if(_0x380a60[_0x4c1c3f(0x3ba,0x34f,0x2e7,0x2ed)](_0x27d01a['id'],_0x4100ab))return;_0x4846bc[_0x1fb122(0x562,0x469,0x520,0x525)+'ener'](_0x3ba8cc['LLM_CHAR_M'+_0x1fb122(0x5c8,0x5bd,0x508,0x546)+_0x4c1c3f(0x355,0x3aa,0x3c5,0x2f4)+_0x1fb122(0x424,0x453,0x48e,0x40a)],_0x128e19);function _0x4c1c3f(_0x33fa66,_0x29eccb,_0x2cd7bb,_0x55c568){return _0x20db3b(_0x33fa66-0xe5,_0x29eccb- -0x24f,_0x2cd7bb-0x186,_0x55c568);}function _0x1fb122(_0x4d68e8,_0x5c4d50,_0x5b9bed,_0x469246){return _0x20db3b(_0x4d68e8-0x115,_0x5b9bed-0x3c,_0x5b9bed-0x1a,_0x469246);}_0x380a60[_0x1fb122(0x5d9,0x61b,0x623,0x652)](_0x48f534,_0x27d01a[_0x1fb122(0x5e1,0x460,0x534,0x474)]);};_0x2c0c00['on'](_0x2a85f9['LLM_CHAR_M'+_0x494d4e(0x344,0x229,0x270,0x277)+_0x20db3b(0x58b,0x5f9,0x5e0,0x557)+_0x494d4e(0x286,0x23c,0x1f6,0x1af)],_0x128e19);const _0x756433={};_0x756433['id']=_0x4100ab,_0x1fbb63[_0x494d4e(0x3a5,0x376,0x2dd,0x235)](_0x50ae1c[_0x20db3b(0x569,0x5d6,0x56d,0x6a7)+_0x494d4e(0x32d,0x230,0x270,0x1c9)+'PROMPT_REQ'+_0x494d4e(0x2cf,0x2d5,0x27c,0x328)],_0x756433),_0x1f58c3(()=>{_0x1e1e71['removeList'+'ener'](_0x4e1867[_0x54e987(0x710,0x651,0x6a6,0x6e9)+'ODIFY_GET_'+'PROMPT_RES'+_0x54e987(0x5a0,0x4cd,0x516,0x491)],_0x128e19);function _0x118e1c(_0x1a6362,_0x3d8df2,_0x15b7f9,_0x2ab22d){return _0x494d4e(_0x1a6362-0x18c,_0x3d8df2-0x187,_0x15b7f9- -0x306,_0x2ab22d);}function _0x54e987(_0x39171b,_0xf540c7,_0x5c1043,_0x2ff09b){return _0x20db3b(_0x39171b-0xc5,_0xf540c7-0x7b,_0x5c1043-0x1af,_0x2ff09b);}_0x380a60[_0x54e987(0x5c5,0x5f9,0x6d0,0x5e8)](_0x31964e,new _0x5773ce(_0x380a60[_0x118e1c(0x14a,0x70,0x9e,0x8f)]));},-0x404f+0x2bbe*-0x1+0x931d*0x1);}});const _0x3a087a={..._0x483a31};return _0x3a087a['content']=_0x286eeb,_0x175089[_0x9eef4e]=_0x3a087a,_0x175089;}function findMessageIndexWithPlaceholder(_0x2eaa33,_0x5b05ab){const _0x317ebc={};function _0x382883(_0x10921e,_0x481dfd,_0x33dea1,_0x229aba){return _0x31db9b(_0x229aba-0x11b,_0x481dfd-0x83,_0x10921e,_0x229aba-0x47);}_0x317ebc[_0x3251ae(0x6c8,0x67a,0x6bf,0x5fd)]=function(_0x1c7355,_0x236f98){return _0x1c7355<_0x236f98;},_0x317ebc[_0x3251ae(0x6ec,0x644,0x665,0x692)]=function(_0x5f58bd,_0x443063){return _0x5f58bd===_0x443063;},_0x317ebc[_0x382883(0x39c,0x51c,0x395,0x46f)]=_0x3251ae(0x5a5,0x666,0x5d3,0x697),_0x317ebc['MnwQG']=_0x3251ae(0x5ca,0x575,0x617,0x530),_0x317ebc[_0x3251ae(0x56f,0x569,0x532,0x612)]=_0x3251ae(0x68c,0x5fb,0x5e8,0x63a),_0x317ebc[_0x3251ae(0x562,0x534,0x4a8,0x4ff)]=function(_0x5930f2,_0x5e1565){return _0x5930f2===_0x5e1565;},_0x317ebc[_0x382883(0x426,0x49c,0x561,0x495)]=_0x382883(0x569,0x485,0x471,0x51c),_0x317ebc[_0x3251ae(0x549,0x537,0x5ec,0x5b4)]=_0x382883(0x588,0x540,0x414,0x4ea);const _0x236f04=_0x317ebc;function _0x3251ae(_0x10df37,_0x2140cc,_0x5c5844,_0x510fc4){return _0x31db9b(_0x2140cc-0x2bd,_0x2140cc-0xc5,_0x10df37,_0x510fc4-0xb0);}for(let _0x74c4ac=-0x2*0x8d5+0x1*-0x2401+0x1*0x35ab;_0x236f04[_0x382883(0x58a,0x532,0x4b0,0x4d8)](_0x74c4ac,_0x2eaa33['length']);_0x74c4ac++){const _0x17be6e=_0x2eaa33[_0x74c4ac];if(_0x236f04['pYgwO'](typeof _0x17be6e[_0x382883(0x541,0x42b,0x505,0x482)],_0x236f04['hJUwM'])&&_0x17be6e[_0x382883(0x4a5,0x55a,0x3f0,0x482)][_0x382883(0x37f,0x304,0x389,0x3c0)](_0x5b05ab))return _0x236f04[_0x382883(0x3fd,0x532,0x45a,0x4a2)](_0x236f04[_0x3251ae(0x594,0x54e,0x586,0x5ab)],_0x236f04[_0x3251ae(0x521,0x569,0x5d9,0x4da)])?_0x5d8670:_0x74c4ac;else{if(Array[_0x3251ae(0x58c,0x660,0x5ca,0x631)](_0x17be6e[_0x382883(0x40b,0x3e9,0x4ad,0x482)]))for(const _0x56c9d4 of _0x17be6e[_0x382883(0x539,0x47f,0x4c0,0x482)]){if(_0x236f04[_0x382883(0x44f,0x389,0x2ff,0x392)](_0x236f04[_0x382883(0x4dc,0x48a,0x4c2,0x495)],_0x236f04[_0x382883(0x39d,0x30f,0x39b,0x395)]))return _0x3776cd;else{if(_0x56c9d4[_0x3251ae(0x669,0x6a0,0x6aa,0x712)]==='text'&&_0x56c9d4['text'][_0x382883(0x2eb,0x37b,0x43a,0x3c0)](_0x5b05ab))return _0x74c4ac;}}}}return-(0xf*0x14b+-0x24ef+0x118b*0x1);}function generateRequestId(){const _0x756f06={};_0x756f06[_0x2916f7(0x38b,0x389,0x44e,0x43a)]=_0x1d27b6(0x8e,0x158,0xad,-0x2d);function _0x2916f7(_0x38baa6,_0x396ef5,_0x336a43,_0x535f0c){return _0x31db9b(_0x38baa6- -0xb,_0x396ef5-0x1af,_0x336a43,_0x535f0c-0x178);}_0x756f06['gRMbM']=function(_0x1b5a1e,_0x1a2753){return _0x1b5a1e===_0x1a2753;};function _0x1d27b6(_0x36d072,_0x26b50a,_0x5bf0d6,_0x423a5d){return _0x31db9b(_0x36d072- -0x26e,_0x26b50a-0xc3,_0x5bf0d6,_0x423a5d-0x1a6);}_0x756f06['OWPdI']='WhVua',_0x756f06[_0x1d27b6(0x18,-0x9f,-0xb1,0x13)]='OPHSj',_0x756f06[_0x1d27b6(0x84,0x8,0x140,-0x50)]=function(_0x2fdea4,_0x3d3af6){return _0x2fdea4+_0x3d3af6;};const _0x3b03eb=_0x756f06;if(crypto&&crypto[_0x2916f7(0x39a,0x308,0x36e,0x464)]){if(_0x3b03eb[_0x2916f7(0x2a4,0x2d2,0x2fb,0x260)](_0x3b03eb['OWPdI'],_0x3b03eb[_0x2916f7(0x27b,0x32c,0x2c2,0x2f5)])){const _0x2e276f={};_0x2e276f[_0x1d27b6(0x175,0x247,0x1ea,0x204)]=_0x3b03eb['iLSan'],_0x2e276f['text']=_0x2260cd['content'],_0x537e00[_0x1d27b6(0x57,-0x37,0xcb,0x95)](_0x2e276f);}else return crypto[_0x2916f7(0x39a,0x431,0x37c,0x3a9)]();}return _0x3b03eb[_0x1d27b6(0x84,0xe2,0xdf,0x9b)](Date[_0x2916f7(0x393,0x2c9,0x3a2,0x2c6)]()[_0x2916f7(0x326,0x2b8,0x2a1,0x38e)](-0x2*0xe51+-0xdb6+0x2a7c),Math[_0x2916f7(0x3d4,0x412,0x48e,0x33e)]()[_0x1d27b6(0xc3,0x167,0xda,0x10e)](0x47f+0x40f*0x9+0x1*-0x28e2)[_0x1d27b6(0x9a,0x86,0xd6,0x41)](0x24d2+0x26c4+-0x4b94));}export function LLM_CHAR_MODIFY_GET_PROMPT(){const _0x56753f={'XqPEo':function(_0x282a1b,_0x3a1f87){return _0x282a1b(_0x3a1f87);},'uvmWy':'获取角色修改提示词超'+'时','smGsi':function(_0x20d4f2,_0x19ccaa){return _0x20d4f2!==_0x19ccaa;},'kGXiJ':function(_0x1f9958,_0x2902ba){return _0x1f9958(_0x2902ba);},'UjKIL':function(_0x2774b5){return _0x2774b5();},'UgMcS':function(_0x1d9f28,_0x3a0223,_0x2359f2){return _0x1d9f28(_0x3a0223,_0x2359f2);}};return new Promise((_0x154ebc,_0x13e7f8)=>{function _0x2c4260(_0x4fdcd3,_0x418edf,_0x37bb80,_0x3b32ab){return _0x157e(_0x3b32ab- -0x7d,_0x4fdcd3);}function _0x275ed9(_0x23aa26,_0x1f89e1,_0x3c797a,_0x426f2e){return _0x157e(_0x426f2e- -0x35b,_0x3c797a);}const _0x261e5e={'fUomR':function(_0x41946f,_0x469846){function _0x38fdd5(_0x1ac988,_0x26837d,_0x1cb653,_0x22b338){return _0x157e(_0x1ac988-0x399,_0x1cb653);}return _0x56753f[_0x38fdd5(0x6fb,0x732,0x68e,0x64d)](_0x41946f,_0x469846);},'tAEPF':function(_0x3db773,_0x5b2b84){return _0x56753f['kGXiJ'](_0x3db773,_0x5b2b84);}},_0x40dba9=_0x56753f[_0x275ed9(-0xd,-0x37,-0x79,-0xb6)](generateRequestId);console['log'](_0x275ed9(-0x60,-0x17,0x77,0x21)+_0x275ed9(0x2d,0x23,0x3d,-0x4a)+_0x275ed9(-0xb2,-0x6,-0x16c,-0x9c)+'ting\x20char\x20'+_0x2c4260(0x1cd,0xc7,0x22f,0x16f)+_0x2c4260(0x274,0x139,0x163,0x209)+_0x40dba9+')');const _0x4c2c74=_0x1de3d1=>{if(_0x261e5e[_0x1c1a59(0x67,0xaa,0x54,0x121)](_0x1de3d1['id'],_0x40dba9))return;eventSource[_0x1c1a59(0xac,0xae,0xd2,0x66)+'ener'](eventNames[_0x3f5216(0x127,0x231,0x1d8,0x211)+_0x1c1a59(0x22,0x96,-0x1f,0x72)+'PROMPT_RES'+_0x1c1a59(0x41,0x1c,0xb1,0x56)],_0x4c2c74);function _0x1c1a59(_0x4575a3,_0x25208b,_0x29fe48,_0x4b1d5c){return _0x2c4260(_0x4575a3,_0x25208b-0x14a,_0x29fe48-0x2c,_0x25208b- -0x137);}function _0x3f5216(_0x367861,_0x4877ef,_0x162e72,_0x27f5e0){return _0x275ed9(_0x367861-0x1d,_0x4877ef-0xa2,_0x27f5e0,_0x162e72-0x1df);}_0x261e5e[_0x3f5216(0x6c,0x130,0xfe,0x164)](_0x154ebc,_0x1de3d1[_0x3f5216(0x4f,0x33,0xfa,0x1d3)]);};eventSource['on'](eventNames[_0x2c4260(0x34e,0x216,0x326,0x2d7)+_0x275ed9(-0x137,-0x74,-0x1ec,-0x111)+_0x275ed9(0xa2,-0x3,-0xa0,0x1c)+_0x275ed9(-0x156,-0xcd,-0x133,-0x18b)],_0x4c2c74);const _0x2e824b={};_0x2e824b['id']=_0x40dba9,eventSource['emit'](eventNames['LLM_CHAR_M'+_0x275ed9(-0xff,-0x16f,-0xc0,-0x111)+'PROMPT_REQ'+_0x275ed9(-0x74,-0x101,-0x3d,-0x105)],_0x2e824b),_0x56753f[_0x275ed9(-0x48,-0xd7,-0x26,-0x82)](setTimeout,()=>{function _0x42fc00(_0x5c29d0,_0x39e2f3,_0x46d31c,_0x46074f){return _0x275ed9(_0x5c29d0-0xc4,_0x39e2f3-0x58,_0x46d31c,_0x5c29d0-0x1ce);}eventSource[_0x42fc00(0xd5,0x10d,0x2f,0x109)+_0x42fc00(0x128,0x136,0x81,0x18c)](eventNames[_0x42fc00(0x1c7,0x19e,0x1b1,0x1fb)+'ODIFY_GET_'+_0x389909(0x460,0x3e0,0x538,0x3b3)+'PONSE'],_0x4c2c74);function _0x389909(_0x40079b,_0x403e63,_0x2369dc,_0xe797ff){return _0x2c4260(_0x2369dc,_0x403e63-0xf3,_0x2369dc-0x199,_0x40079b-0x166);}_0x56753f['XqPEo'](_0x13e7f8,new Error(_0x56753f['uvmWy']));},-0x37d*-0x7+0x4*0x10a7+-0x1*0x33f7);});}export function LLM_CHAR_MODIFY(_0x5b0033,_0x9bfee1={}){const _0x9fa9c6={'HWGxM':function(_0x154fd9,_0x1eeef0){return _0x154fd9!==_0x1eeef0;},'jpZWb':_0x4efe1f(0x52d,0x4a9,0x4c6,0x499),'WJqkO':function(_0x5299b7,_0x140fe3){return _0x5299b7(_0x140fe3);},'jkuqE':function(_0x1f0ea2,_0x575a8a){return _0x1f0ea2(_0x575a8a);},'cWGWf':_0x27d72c(0x467,0x477,0x50f,0x3e4),'VRSUx':function(_0x3ad64a){return _0x3ad64a();},'TqAgd':_0x4efe1f(0x4c8,0x452,0x551,0x42d),'NVDrg':function(_0x37591d,_0xaf151f){return _0x37591d(_0xaf151f);},'xREwp':'hXlFq','TpbiP':function(_0x4f691d,_0x3885ec){return _0x4f691d!==_0x3885ec;},'pnZWm':_0x4efe1f(0x594,0x5f8,0x61e,0x53a),'zGgLa':_0x4efe1f(0x4eb,0x423,0x591,0x5af),'PuLQK':function(_0x2e0eaf){return _0x2e0eaf();},'rxBPA':_0x27d72c(0x376,0x404,0x4c9,0x42e)+_0x4efe1f(0x609,0x5d3,0x54f,0x6b7)};function _0x27d72c(_0x39c6c8,_0x54529e,_0x11becc,_0x1d3b96){return _0x31db9b(_0x54529e-0x7f,_0x54529e-0x1f1,_0x39c6c8,_0x1d3b96-0x59);}function _0x4efe1f(_0x6747d2,_0x4bb04c,_0x39312b,_0x353446){return _0x31db9b(_0x6747d2-0x20c,_0x4bb04c-0x125,_0x353446,_0x353446-0x59);}return new Promise((_0x4a5139,_0x50b355)=>{const _0x2a6498=generateRequestId(),_0x1d1a66=_0x9bfee1[_0xecaf2b(-0x1a6,-0x6e,-0x1bc,-0xfe)]||0x5142+0x1a30c+-0x109ee;let _0x52df28=null;console['log'](_0xecaf2b(0xbc,0x10c,-0x33,0x90)+'PromptModi'+_0xecaf2b(0xf2,0x129,-0x37,0x4e)+_0xecaf2b(0x21,0x40,0xd3,0x1e)+_0x2176ae(0x163,0x147,0x1c2,0x203)+_0x2176ae(0x6b,0xca,0x191,0x153)+_0xecaf2b(0x133,0xb1,0x57,0x8f)+_0x2a6498+')');const _0x1ebe97=()=>{function _0x1f3caa(_0x48afcf,_0x423224,_0x57335a,_0x79310c){return _0x2176ae(_0x48afcf-0xbf,_0x79310c-0x16,_0x423224,_0x79310c-0x37);}function _0x5117f9(_0x18eedd,_0x17bf00,_0x47a1d4,_0xe6a12e){return _0x2176ae(_0x18eedd-0x1e0,_0x18eedd-0x6f,_0x47a1d4,_0xe6a12e-0x182);}if(_0x9fa9c6['HWGxM'](_0x9fa9c6[_0x5117f9(0x15a,0x129,0x207,0x19f)],_0x5117f9(0x17f,0x229,0x223,0x13e)))eventSource[_0x1f3caa(0x18f,0x111,0x7,0xd0)+'ener'](eventNames[_0x5117f9(0x21b,0x28f,0x260,0x254)+_0x1f3caa(-0x7a,-0xb,0x61,0x49)+'ONSE'],_0x3e6daa),_0x52df28&&(_0x9fa9c6[_0x1f3caa(0xc2,0x210,0x188,0x169)](clearTimeout,_0x52df28),_0x52df28=null);else{let _0x5c7923=_0x61d6b[_0x5117f9(0x1f8,0x142,0x192,0x16c)](/:/g,':')[_0x5117f9(0x1f8,0x160,0x2d1,0x150)](/,/g,',');return _0x5c7923=_0x5c7923[_0x5117f9(0x1f8,0x1c8,0x258,0x17a)](/下半身NSWebcam:/g,'下半身NSFW背面:'),_0x5c7923=_0x5c7923[_0x1f3caa(0x219,0x24d,0x234,0x19f)](/下半身NSFW_背面:/g,_0x5117f9(0x1fc,0x153,0x1cd,0x1ff)),_0x5c7923=_0x5c7923[_0x1f3caa(0x252,0x115,0xc8,0x19f)](/上半身NSFW_背面:/g,_0x5117f9(0x9f,0x15c,0x140,0x62)),_0x5c7923;}},_0x3e6daa=_0x52606d=>{const _0x15a2f8={'BPkFn':function(_0x3f6636,_0x60d50c){function _0x3e7699(_0x53fedf,_0x5ed9d6,_0x4f9b61,_0x4f0c2b){return _0x157e(_0x53fedf-0x357,_0x4f0c2b);}return _0x9fa9c6[_0x3e7699(0x555,0x59b,0x48a,0x50a)](_0x3f6636,_0x60d50c);}};function _0x57e607(_0x50fc22,_0x58c474,_0x513fdf,_0x12f1c3){return _0x2176ae(_0x50fc22-0x1d6,_0x12f1c3- -0x93,_0x58c474,_0x12f1c3-0x12);}function _0x517d67(_0x1423c6,_0x49dbd9,_0x3486d3,_0x36157c){return _0xecaf2b(_0x49dbd9,_0x49dbd9-0x146,_0x3486d3-0x3a,_0x3486d3-0x4b9);}if(_0x9fa9c6['HWGxM'](_0x9fa9c6[_0x57e607(0x72,-0x4f,0x11c,0x61)],_0x517d67(0x3aa,0x3f3,0x481,0x42c))){if(_0x9fa9c6[_0x57e607(0x19b,0x184,0x127,0x104)](_0x52606d['id'],_0x2a6498))return;_0x9fa9c6[_0x57e607(0x17,0x1f,0xe7,0x73)](_0x1ebe97);if(_0x52606d['success']){if(_0x9fa9c6['TqAgd']!==_0x57e607(0xaa,0x7a,-0x7f,-0x10)){const _0x89e7bb=_0x15a2f8['BPkFn'](_0x29581f,_0x5bfb8d);if(_0x89e7bb){const _0x14a54a={};_0x14a54a[_0x517d67(0x4c0,0x57a,0x51f,0x558)]=_0x517d67(0x44f,0x3f0,0x478,0x3c2),_0x14a54a[_0x517d67(0x4af,0x420,0x44f,0x4dd)]=_0x89e7bb,_0x14a54a['position']=_0x92879f,_0x2a0aa6['push'](_0x14a54a);}}else _0x9fa9c6['NVDrg'](_0x4a5139,_0x52606d[_0x517d67(0x37a,0x3b2,0x3d4,0x41d)]);}else{if('hXlFq'===_0x9fa9c6[_0x517d67(0x372,0x3bd,0x397,0x421)])_0x9fa9c6[_0x57e607(0x12b,0x9d,0x131,0xc0)](_0x50b355,new Error(_0x52606d[_0x517d67(0x37a,0x474,0x3d4,0x412)]||'LLM\x20请求失败'));else{const _0x31a9a1=_0x59c4db[_0x52ca51],_0x5d3e92=_0x31a9a1[_0x57e607(0xaa,-0x72,0x67,-0x15)+'resetId'];if(!_0x5d3e92||!_0x31a9a1[_0x57e607(0x74,-0x95,0x27,-0x15)+_0x57e607(0x77,0x46,0xdb,0x11f)][_0x5d3e92])return null;const _0x35027b={};return _0x35027b['id']=_0x5d3e92,_0x35027b['data']=_0x31a9a1['characterP'+'resets'][_0x5d3e92],_0x35027b;}}}else return null;};eventSource['on'](eventNames[_0xecaf2b(0x131,-0x48,-0x73,0x68)+_0x2176ae(0xae,0x33,0xa3,0xf8)+_0xecaf2b(-0x42,0x54,0x118,0x7c)],_0x3e6daa);const _0x59c258={};_0x59c258['prompt']=_0x5b0033;function _0xecaf2b(_0x145eb2,_0x24d37f,_0x307c20,_0x1becb2){return _0x27d72c(_0x145eb2,_0x1becb2- -0x3fc,_0x307c20-0x9d,_0x1becb2-0x114);}function _0x2176ae(_0x8e5807,_0x1a0b7a,_0x310a79,_0x2ae0b4){return _0x27d72c(_0x310a79,_0x1a0b7a- -0x2b8,_0x310a79-0x31,_0x2ae0b4-0xf7);}_0x59c258['id']=_0x2a6498,eventSource[_0xecaf2b(-0xe3,-0x4f,-0x29,-0x35)](eventNames['LLM_CHAR_M'+'ODIFY_REQU'+_0x2176ae(0x10f,0xab,0x46,0x151)],_0x59c258),_0x52df28=setTimeout(()=>{function _0x36d1fd(_0x52b312,_0x256048,_0xb394c8,_0x4e82f7){return _0xecaf2b(_0x52b312,_0x256048-0xb0,_0xb394c8-0xd0,_0xb394c8- -0xc7);}function _0x199c58(_0x5b006b,_0x3f4d8d,_0x1bcc66,_0x5180be){return _0x2176ae(_0x5b006b-0x151,_0x1bcc66- -0x191,_0x5b006b,_0x5180be-0x1c4);}if(_0x9fa9c6[_0x36d1fd(-0x95,-0x140,-0x13b,-0x71)](_0x9fa9c6[_0x36d1fd(-0x176,-0x131,-0xfa,-0x1a1)],_0x9fa9c6['zGgLa']))_0x9fa9c6['PuLQK'](_0x1ebe97),_0x9fa9c6['jkuqE'](_0x50b355,new Error(_0x9fa9c6[_0x36d1fd(-0x31,-0x9d,-0xe1,-0x3f)]));else return _0x5c4a2e&&_0x45f092[_0x199c58(-0x1eb,-0x1ee,-0x125,-0x1ae)](_0x3b99a1)&&(_0x31ad27&&_0x389294[_0x36d1fd(-0x68,-0xa7,-0x6f,-0x138)](_0x2c839e)),_0x2edc4e[_0x36d1fd(-0x8c,-0x9d,-0xd9,-0x18e)](_0x22f524,_0x4608e3);},_0x1d1a66);});}function _0x157e(_0x168a1a,_0x13f2a3){_0x168a1a=_0x168a1a-(-0x2483+0x907+0x1d46);const _0x3a2737=_0x494a();let _0x4e0d7a=_0x3a2737[_0x168a1a];if(_0x157e['sbHojw']===undefined){var _0x381cf0=function(_0xcd488a){const _0x35ba3c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x551327='',_0xf94804='',_0x442edf=_0x551327+_0x381cf0;for(let _0x1e995a=0x14fa+-0x52*0x43+0x7c,_0x8be730,_0x45e341,_0x165d03=-0x31c+0x25*-0xe3+-0xbf9*-0x3;_0x45e341=_0xcd488a['charAt'](_0x165d03++);~_0x45e341&&(_0x8be730=_0x1e995a%(0xe09*0x1+-0x51*0x47+0x872)?_0x8be730*(-0x2dd+-0x23b6+-0x1*-0x26d3)+_0x45e341:_0x45e341,_0x1e995a++%(0x1ed5+-0x1*-0x39+-0x1f0a))?_0x551327+=_0x442edf['charCodeAt'](_0x165d03+(0x17*0x199+-0x2b8*0xe+0x15b))-(0x23ec+-0x230d*0x1+0xd5*-0x1)!==-0x12d4*0x2+-0x1c5*0x9+0x3595?String['fromCharCode'](-0x18d7+0x1*-0xf89+0x59*0x77&_0x8be730>>(-(0x1*-0x1d86+0x248b+-0x5*0x167)*_0x1e995a&0x1*-0xae+-0x5*0x216+-0x591*-0x2)):_0x1e995a:-0x1*-0x1513+0x146f+-0x2982){_0x45e341=_0x35ba3c['indexOf'](_0x45e341);}for(let _0xe09263=0x4*-0x8f5+0x503*0x4+-0x65*-0x28,_0x55779b=_0x551327['length'];_0xe09263<_0x55779b;_0xe09263++){_0xf94804+='%'+('00'+_0x551327['charCodeAt'](_0xe09263)['toString'](-0x140*-0xa+0x1330+-0x1fa0))['slice'](-(0x4e3+0x1ea0+-0x95*0x3d));}return decodeURIComponent(_0xf94804);};_0x157e['meNUtd']=_0x381cf0,_0x157e['YSkNzi']={},_0x157e['sbHojw']=!![];}const _0x570f5a=_0x3a2737[-0x7a*-0x3+0x1bb*0x4+0x85a*-0x1],_0x332fbe=_0x168a1a+_0x570f5a,_0xf42dca=_0x157e['YSkNzi'][_0x332fbe];if(!_0xf42dca){const _0x3395c8=function(_0x360cf7){this['kknSjK']=_0x360cf7,this['EKxNbp']=[-0x110f+-0x26c9*-0x1+0x1*-0x15b9,0x235f+-0x9df+-0x1980,0x16f2*0x1+0x1*0x26a9+-0x3d9b],this['NzdNeB']=function(){return'newState';},this['ZGkZZm']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['epbMXn']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3395c8['prototype']['EuXCqL']=function(){const _0x4a9cee=new RegExp(this['ZGkZZm']+this['epbMXn']),_0x29fbf2=_0x4a9cee['test'](this['NzdNeB']['toString']())?--this['EKxNbp'][-0x223b+-0x1d9c+0x3fd8]:--this['EKxNbp'][-0x4d*-0x2+-0x1251+0x5*0x38b];return this['qABNfd'](_0x29fbf2);},_0x3395c8['prototype']['qABNfd']=function(_0x21de7c){if(!Boolean(~_0x21de7c))return _0x21de7c;return this['ewnrOS'](this['kknSjK']);},_0x3395c8['prototype']['ewnrOS']=function(_0xaaf61a){for(let _0x14b4e7=0xc7*-0x2+0x10*-0xce+0xe6e,_0x4bda03=this['EKxNbp']['length'];_0x14b4e7<_0x4bda03;_0x14b4e7++){this['EKxNbp']['push'](Math['round'](Math['random']())),_0x4bda03=this['EKxNbp']['length'];}return _0xaaf61a(this['EKxNbp'][0x1d56+0x15d*-0x8+-0x126e*0x1]);},new _0x3395c8(_0x157e)['EuXCqL'](),_0x4e0d7a=_0x157e['meNUtd'](_0x4e0d7a),_0x157e['YSkNzi'][_0x332fbe]=_0x4e0d7a;}else _0x4e0d7a=_0xf42dca;return _0x4e0d7a;}function preprocessTagContent(_0xe16d3e){function _0x341007(_0x46007e,_0x2f74ab,_0x389959,_0x10a229){return _0x31db9b(_0x10a229- -0xad,_0x2f74ab-0xc,_0x2f74ab,_0x10a229-0xa1);}const _0x1954df={};_0x1954df['tjtSW']=_0x5b77d7(0x317,0x319,0x39c,0x31e),_0x1954df['nMIpU']=_0x5b77d7(0x254,0x141,0x285,0x1c1);const _0x14100a=_0x1954df;let _0x419821=_0xe16d3e['replace'](/:/g,':')['replace'](/,/g,',');_0x419821=_0x419821['replace'](/下半身NSWebcam:/g,_0x14100a[_0x341007(0x141,0x28b,0x28c,0x205)]),_0x419821=_0x419821[_0x5b77d7(0x3a4,0x2ae,0x287,0x31a)](/下半身NSFW_背面:/g,_0x14100a['tjtSW']),_0x419821=_0x419821[_0x5b77d7(0x367,0x393,0x385,0x31a)](/上半身NSFW_背面:/g,_0x14100a[_0x341007(0x310,0x2a9,0x2a8,0x287)]);function _0x5b77d7(_0xac86c0,_0x268284,_0x5dbdc0,_0x28c338){return _0x31db9b(_0x28c338- -0xa8,_0x268284-0x12a,_0x5dbdc0,_0x28c338-0x1cd);}return _0x419821;}function parseCharacterData(_0x589706){const _0x525689={};_0x525689['UDUpL']=function(_0x55cfcd,_0x3b30f8){return _0x55cfcd===_0x3b30f8;},_0x525689['BEHqu']=_0x43cb13(-0x42,-0x100,-0xe6,-0xa1),_0x525689[_0x43cb13(0xe,-0x12a,-0xbe,-0x3)]=_0x43cb13(-0xe7,-0xaf,-0xd0,-0xe),_0x525689[_0x2a21d5(0x537,0x5b1,0x4cb,0x5f1)]=_0x43cb13(0xe8,0xfb,0x72,-0x21)+_0x43cb13(0x1b,-0x176,-0xac,-0x4),_0x525689[_0x43cb13(0x22,-0x12e,-0x5f,-0x19)]='facialFeat'+_0x43cb13(-0x13d,-0x2d,-0xf7,-0x85),_0x525689[_0x2a21d5(0x443,0x42e,0x40f,0x439)]=_0x43cb13(-0x17d,-0xe5,-0xd9,-0x196)+'uresBack',_0x525689[_0x43cb13(0x5c,-0x1c,0x24,0xdb)]=_0x43cb13(-0xc4,-0x18e,-0x12e,-0x133)+'FW',_0x525689['yVvkY']='fullBodySF'+'WBack';function _0x43cb13(_0x27fbd5,_0x453d9d,_0xfd265d,_0x4c9a50){return _0x31db9b(_0xfd265d- -0x394,_0x453d9d-0x2b,_0x27fbd5,_0x4c9a50-0x143);}_0x525689['rYrVh']=_0x2a21d5(0x5c2,0x64e,0x5fd,0x687)+'SFWBack',_0x525689[_0x2a21d5(0x58a,0x605,0x4e5,0x55d)]='fullBodyNS'+'FWBack',_0x525689[_0x43cb13(0xee,-0x33,0x7a,0x10c)]=function(_0x6d536b,_0x1f938b){return _0x6d536b+_0x1f938b;},_0x525689['TBSIA']=function(_0x3035d9,_0x4c3821){return _0x3035d9&&_0x4c3821;},_0x525689['KBafS']=function(_0x40a7ca,_0x539701){return _0x40a7ca===_0x539701;},_0x525689[_0x2a21d5(0x4e8,0x589,0x463,0x452)]=_0x2a21d5(0x4c8,0x42c,0x462,0x485),_0x525689['Nhktf']='[character'+_0x43cb13(-0xb6,-0xba,0xe,-0xa6)+_0x2a21d5(0x564,0x5db,0x613,0x4f5)+_0x2a21d5(0x4a2,0x4f8,0x454,0x51f);const _0x207f4b=_0x525689,_0x47ad26=_0x589706[_0x43cb13(-0x5c,-0xc3,-0x17,0x6b)]('\x0a')[_0x2a21d5(0x4ec,0x52c,0x504,0x456)](_0x4e2719=>_0x4e2719[_0x43cb13(0x5c,-0x2b,0x2b,0x6)]())['filter'](_0x13d2e7=>_0x13d2e7),_0x19e8d8={};_0x19e8d8[_0x43cb13(-0x44,-0xd6,-0xe6,-0x1a9)]='',_0x19e8d8['nameEN']='',_0x19e8d8['characterT'+_0x2a21d5(0x4bb,0x4c3,0x3e5,0x571)]='',_0x19e8d8[_0x2a21d5(0x48e,0x513,0x47b,0x469)+_0x43cb13(-0x155,-0x8e,-0xf7,-0x19c)]='',_0x19e8d8[_0x2a21d5(0x48e,0x495,0x4f6,0x3cc)+_0x2a21d5(0x597,0x4c0,0x54c,0x65b)]='',_0x19e8d8[_0x43cb13(-0x199,-0x1bd,-0x12e,-0x1f6)+'FW']='',_0x19e8d8[_0x2a21d5(0x439,0x3c0,0x366,0x4aa)+_0x2a21d5(0x495,0x570,0x409,0x3de)]='',_0x19e8d8[_0x43cb13(-0xbd,-0x16,-0x74,-0x147)+'W']='',_0x19e8d8[_0x43cb13(-0x14c,0x45,-0x74,-0x3f)+_0x2a21d5(0x492,0x552,0x552,0x4f9)]='',_0x19e8d8['upperBodyN'+_0x2a21d5(0x445,0x3dc,0x4ed,0x4e7)]='',_0x19e8d8[_0x2a21d5(0x5c2,0x62a,0x632,0x5da)+'SFWBack']='',_0x19e8d8['fullBodyNS'+'FW']='',_0x19e8d8[_0x43cb13(-0x18,0x5,-0x66,-0x11a)+_0x43cb13(-0x28,-0xf9,-0xd2,-0x95)]='';const _0x2a7c03=_0x19e8d8,_0x498b65={};_0x498b65[_0x43cb13(0x26,-0xe7,-0x80,-0xa9)]=_0x207f4b[_0x2a21d5(0x58f,0x53a,0x61b,0x53f)],_0x498b65[_0x2a21d5(0x583,0x522,0x5d5,0x5df)]=_0x207f4b[_0x43cb13(-0x137,-0x63,-0xbe,-0xbc)],_0x498b65['角色特征']=_0x207f4b['KltiE'];function _0x2a21d5(_0x54ced7,_0x5ca78c,_0x3237e5,_0x16aee2){return _0x31db9b(_0x54ced7-0x1d3,_0x5ca78c-0x51,_0x5ca78c,_0x16aee2-0xab);}_0x498b65[_0x2a21d5(0x457,0x3d8,0x49d,0x3f0)]=_0x207f4b[_0x2a21d5(0x508,0x572,0x442,0x52b)],_0x498b65['五官外貌背面']=_0x207f4b[_0x43cb13(-0x93,-0xd4,-0x124,-0x9c)],_0x498b65[_0x2a21d5(0x594,0x503,0x5e8,0x55f)]=_0x207f4b[_0x43cb13(0xe8,-0x3a,0x24,0x7)],_0x498b65['上半身SFW背面']=_0x2a21d5(0x439,0x422,0x47b,0x503)+'FWBack',_0x498b65[_0x2a21d5(0x440,0x36c,0x3be,0x37b)]='fullBodySF'+'W',_0x498b65[_0x2a21d5(0x4a5,0x481,0x4d0,0x402)]=_0x207f4b[_0x2a21d5(0x5a1,0x613,0x4e9,0x673)],_0x498b65['上半身NSFW']=_0x43cb13(0x95,0x84,0x5b,0x8e)+_0x2a21d5(0x445,0x44e,0x3b7,0x3b6),_0x498b65[_0x2a21d5(0x46d,0x509,0x4dc,0x425)]=_0x207f4b['rYrVh'],_0x498b65[_0x2a21d5(0x52b,0x542,0x506,0x4d3)]=_0x43cb13(-0xcf,-0x103,-0x66,-0x6d)+'FW',_0x498b65[_0x2a21d5(0x544,0x4c0,0x5b1,0x479)]=_0x207f4b['Ymcku'];const _0x458933=_0x498b65;for(const _0x44654d of _0x47ad26){const _0x410633=_0x44654d[_0x2a21d5(0x53c,0x5b5,0x51f,0x4b8)](':');if(_0x207f4b[_0x2a21d5(0x54e,0x4e8,0x4f5,0x5f9)](_0x410633,-(0x6bf+-0x1*-0x5+-0x6c3)))continue;const _0x16aec1=_0x44654d[_0x43cb13(0x4d,-0x1,-0x8c,-0xa1)](0x2111+-0xa*-0x239+-0x374b,_0x410633)[_0x43cb13(-0x3b,-0x2e,0x2b,-0x7e)](),_0x2fa237=_0x44654d[_0x43cb13(-0x9e,-0x3b,-0x8c,-0xf7)](_0x207f4b['aHzEM'](_0x410633,-0x1a1*-0x8+-0x1e80+0x1179))[_0x2a21d5(0x592,0x5d2,0x572,0x52c)]();if(_0x458933[_0x16aec1])_0x2a7c03[_0x458933[_0x16aec1]]=_0x2fa237;else{if(_0x207f4b[_0x2a21d5(0x5c1,0x61f,0x51b,0x5c5)](_0x16aec1,_0x2fa237)){if(_0x207f4b[_0x2a21d5(0x514,0x4e9,0x514,0x4a7)](_0x207f4b[_0x43cb13(-0xc8,-0xbd,-0x7f,-0x5c)],_0x43cb13(-0xa1,-0x1fa,-0x135,-0xe0))){if(_0x207f4b[_0x43cb13(-0xee,0x3b,-0x19,-0x22)](_0x1edff3[_0x43cb13(0xa,-0x5b,0x4f,0xa)],_0x2a21d5(0x4cf,0x40e,0x44d,0x4af))&&_0x550b2a[_0x2a21d5(0x4cf,0x57e,0x4be,0x4fc)][_0x43cb13(-0x170,-0xdd,-0xef,-0x12e)](_0x1fee79))return _0x316be1;}else console['log'](_0x43cb13(0xef,0xb7,0x79,-0x49)+_0x43cb13(-0x9f,-0x32,0xe,0x70)+_0x2a21d5(0x4a8,0x4a7,0x4a2,0x3ec)+_0x43cb13(-0x106,-0xd7,-0x88,0x25)+_0x16aec1+'\x22');}}}if(!_0x2a7c03[_0x43cb13(-0x1a4,-0x107,-0xe6,-0x137)])return null;return console[_0x2a21d5(0x52f,0x4cd,0x529,0x57a)](_0x207f4b[_0x43cb13(0xf0,0xbb,0x34,0x93)],_0x2a7c03),_0x2a7c03;}function parseOutfitData(_0x2977af){const _0x609d6={};_0x609d6[_0xe59b0b(-0x4,0x9e,0x15f,0x8a)]=_0xe59b0b(0xa0,0xd9,0x1b,0x6b),_0x609d6[_0xe59b0b(0x3b,0x46,0x1a1,0xf2)]=_0xe59b0b(-0x99,0x4f,-0x44,-0x70),_0x609d6[_0xe59b0b(0x12,0x2f,0xc2,0x30)]=_0x373c47(-0x211,-0x116,-0x140,-0x1ec),_0x609d6[_0x373c47(-0x3c,-0xfa,-0x6a,-0x45)]=_0xe59b0b(0x30,0x183,0x26,0xbf),_0x609d6[_0xe59b0b(0x1,-0x36,0xd5,0x7e)]='fullBody',_0x609d6[_0xe59b0b(0x77,-0x23,-0x8a,-0x27)]=_0x373c47(-0x6d,-0x1ba,-0x136,-0x1b0)+'ck',_0x609d6[_0x373c47(-0xf6,-0xa2,-0x2d,-0x8d)]=function(_0x577731,_0x1c278a){return _0x577731===_0x1c278a;},_0x609d6[_0x373c47(0x7f,-0xd1,-0x9,0xd2)]=function(_0x5aaa0d,_0x44c057){return _0x5aaa0d+_0x44c057;},_0x609d6[_0x373c47(-0x22f,-0x11f,-0x19a,-0x1f2)]=function(_0x1eda17,_0x5caf86){return _0x1eda17&&_0x5caf86;},_0x609d6[_0x373c47(0x29,-0x19,0x3,-0x26)]=_0x373c47(0xae,0x10,0x9,-0x9a)+_0xe59b0b(0xb8,0xfa,0x15,0x84)+_0x373c47(0x2b,-0xf8,-0x44,-0x52)+_0xe59b0b(-0x8,-0x129,-0xd0,-0x4f);const _0x35f92e=_0x609d6;function _0x373c47(_0x24f471,_0x495ec0,_0x5ceec1,_0x12d638){return _0x31db9b(_0x5ceec1- -0x404,_0x495ec0-0x5a,_0x495ec0,_0x12d638-0x1ae);}const _0x460ed0=_0x2977af[_0x373c47(0x1d,-0x115,-0x87,-0xc6)]('\x0a')['map'](_0x3bea37=>_0x3bea37[_0xe59b0b(0xe7,0x31,0x99,0xa1)]())[_0xe59b0b(0x82,0x77,0x113,0x83)](_0x574410=>_0x574410),_0x1c3eb6={};_0x1c3eb6['nameCN']='',_0x1c3eb6['nameEN']='',_0x1c3eb6['owner']='',_0x1c3eb6[_0x373c47(0x3e,-0x57,-0x27,-0xe8)]='',_0x1c3eb6['upperBodyB'+'ack']='';function _0xe59b0b(_0xc6209d,_0x465314,_0x3a8170,_0x3ffdc9){return _0x31db9b(_0x3ffdc9- -0x31e,_0x465314-0x6b,_0x465314,_0x3ffdc9-0x1b4);}_0x1c3eb6[_0xe59b0b(-0x24,-0x72,0xc,-0x1)]='',_0x1c3eb6[_0xe59b0b(0x6a,0x1d,0x77,-0x50)+'ck']='';const _0x43a2fe=_0x1c3eb6,_0x2d97ad={};_0x2d97ad['归属人']=_0x35f92e[_0x373c47(-0xd8,-0x123,-0x5c,0x3d)],_0x2d97ad[_0x373c47(-0xb1,-0x19,-0xf0,-0x10a)]=_0x35f92e[_0xe59b0b(0xe7,0xb8,0x54,0xf2)],_0x2d97ad[_0xe59b0b(0xcb,0xf1,0x7a,0x92)]=_0x35f92e[_0x373c47(0x19,-0x190,-0xb6,0x1c)],_0x2d97ad['上半身']=_0x35f92e['xfBWL'],_0x2d97ad[_0x373c47(-0x1c4,-0x1de,-0x153,-0xe1)]=_0xe59b0b(-0x1d,-0x3a,-0x2f,0x96)+_0xe59b0b(0x111,-0x7d,-0xe,0x51),_0x2d97ad[_0x373c47(-0x2e,-0x149,-0xca,-0xaf)]=_0x35f92e[_0x373c47(-0x84,-0x5,-0x68,-0x15)],_0x2d97ad['下半身背面']=_0x35f92e[_0xe59b0b(-0x1f,0x48,-0x57,-0x27)];const _0x39978c=_0x2d97ad;for(const _0x565356 of _0x460ed0){const _0x557abb=_0x565356[_0x373c47(-0x16e,-0x1d,-0x9b,-0xfa)](':');if(_0x35f92e[_0xe59b0b(0x7c,0x66,0xd1,0xb9)](_0x557abb,-(0x21f9+-0x745*-0x5+-0x4651)))continue;const _0x5c913c=_0x565356['substring'](0x1b7+-0x26de+0x2527*0x1,_0x557abb)[_0x373c47(-0x4c,-0x75,-0x45,0x35)](),_0x2dd9b1=_0x565356[_0x373c47(-0x1a5,-0xf6,-0xfc,-0x74)](_0x35f92e['WbYPN'](_0x557abb,-0x51+0x5*0x580+-0x1b2e))[_0xe59b0b(0x89,0xad,0x4,0xa1)]();if(_0x39978c[_0x5c913c])_0x43a2fe[_0x39978c[_0x5c913c]]=_0x2dd9b1;else _0x35f92e[_0x373c47(-0x1eb,-0x264,-0x19a,-0x1ac)](_0x5c913c,_0x2dd9b1)&&console[_0xe59b0b(0x3b,0x59,0x5c,0x3e)](_0xe59b0b(0x163,0x168,0x125,0xef)+_0xe59b0b(0x11e,0x11f,0xce,0x84)+'fy]\x20未识别的服装'+'字段\x20\x22'+_0x5c913c+'\x22');}if(!_0x43a2fe[_0xe59b0b(-0xf0,0x3,-0xfd,-0x70)]){if(_0x373c47(-0x118,-0xc0,-0x16f,-0x1ea)!==_0x373c47(-0x1ab,-0x1fc,-0x16f,-0x109))_0x5dc599[_0x373c47(-0xbc,-0x6a,-0x12b,-0x185)+_0xe59b0b(0xcc,0x123,0xcc,0xb3)][_0x373c47(-0xd3,-0x1fd,-0x13f,-0xff)](_0x589cd8[_0x373c47(-0xd8,-0x171,-0xf1,-0x91)]);else return null;}return console[_0xe59b0b(-0x91,0x73,-0x56,0x3e)](_0x35f92e['shVUl'],_0x43a2fe),_0x43a2fe;}function extractCharacterAndOutfitTags(_0x2370ee){const _0x1fc67c={'HezTO':function(_0x115ac7,_0x3fb9bd){return _0x115ac7(_0x3fb9bd);},'jomjp':_0x2cda14(0x449,0x36b,0x3ca,0x416),'YytmE':function(_0xeece60,_0x22566a){return _0xeece60===_0x22566a;},'zJerV':'roeqD','gJmIr':function(_0x5638b5,_0x4b04cc){return _0x5638b5(_0x4b04cc);},'Enehi':function(_0x1ea50a,_0x4cf797){return _0x1ea50a===_0x4cf797;},'pJYtZ':function(_0x3f483e,_0x8401f0){return _0x3f483e(_0x8401f0);},'QzPSt':_0x2cda14(0x3b0,0x37d,0x3b3,0x31c),'sJsTX':function(_0x13eeec,_0x95ad67){return _0x13eeec===_0x95ad67;},'IuYNI':function(_0x56bdf7,_0x58ef24){return _0x56bdf7(_0x58ef24);},'yQNkg':function(_0xc27786,_0x335598){return _0xc27786!==_0x335598;},'QnJnw':_0x3b8cbe(0x66d,0x5b4,0x54d,0x5f0),'REuKL':function(_0x5ab5da,_0x1a2df4){return _0x5ab5da===_0x1a2df4;}},_0x4d90c=[];function _0x3b8cbe(_0x4c110f,_0x24f2dc,_0xef8517,_0x18193f){return _0x31db9b(_0x24f2dc-0x1e0,_0x24f2dc-0x34,_0xef8517,_0x18193f-0x49);}_0x2370ee=_0x2370ee['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x3b8cbe(0x4c5,0x59f,0x578,0x53e)]();const _0x24add1=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x1baaef;while((_0x1baaef=_0x24add1['exec'](_0x2370ee))!==null){if(_0x1fc67c[_0x2cda14(0x343,0x2d1,0x259,0x30d)](_0x1fc67c[_0x2cda14(0x465,0x3e5,0x359,0x409)],'roeqD')){const _0x3eaa5c=_0x1baaef[0x994*0x4+-0x2237*0x1+-0x418],_0x1757fd=_0x1fc67c[_0x3b8cbe(0x5f4,0x5d0,0x623,0x5e9)](preprocessTagContent,_0x1baaef[0x1ed2+-0x26*-0x43+-0x28c2]),_0xc057d7=_0x1baaef[_0x3b8cbe(0x3c6,0x48a,0x43e,0x467)];if(_0x1fc67c[_0x2cda14(0x3e8,0x465,0x446,0x3c6)](_0x3eaa5c,'人物')){const _0x3ee3b2=_0x1fc67c[_0x3b8cbe(0x4ce,0x4ee,0x438,0x54b)](parseCharacterData,_0x1757fd);if(_0x3ee3b2){const _0x1e13e0={};_0x1e13e0[_0x2cda14(0x42c,0x4d6,0x3d7,0x402)]=_0x1fc67c[_0x2cda14(0x413,0x359,0x3a9,0x3f2)],_0x1e13e0[_0x3b8cbe(0x41f,0x4f3,0x523,0x4a0)]=_0x3ee3b2,_0x1e13e0[_0x3b8cbe(0x42f,0x454,0x3e4,0x4dc)]=_0xc057d7,_0x1e13e0[_0x3b8cbe(0x55b,0x4b9,0x4df,0x477)+_0x3b8cbe(0x681,0x5b1,0x673,0x5bf)]=[],_0x4d90c['push'](_0x1e13e0);}}else{if(_0x1fc67c['sJsTX'](_0x3eaa5c,'服装')){const _0x1a5f19=_0x1fc67c['IuYNI'](parseOutfitData,_0x1757fd);if(_0x1a5f19){if(_0x1fc67c[_0x3b8cbe(0x3ee,0x4b1,0x438,0x3e6)](_0x2cda14(0x3c9,0x323,0x3b0,0x32c),_0x1fc67c[_0x3b8cbe(0x4ec,0x599,0x532,0x628)])){const _0x1917e2={};_0x1917e2[_0x2cda14(0x3cc,0x33e,0x35d,0x402)]=_0x2cda14(0x294,0x3f5,0x407,0x35b),_0x1917e2[_0x2cda14(0x38e,0x29a,0x359,0x332)]=_0x1a5f19,_0x1917e2[_0x3b8cbe(0x525,0x454,0x460,0x503)]=_0xc057d7,_0x4d90c[_0x2cda14(0x2f6,0x22d,0x2ef,0x2e4)](_0x1917e2);}else _0x23f791?_0x59ed39[_0x3b8cbe(0x417,0x4b9,0x548,0x476)+_0x2cda14(0x4a3,0x349,0x45f,0x3f0)][_0x3b8cbe(0x457,0x4a5,0x42f,0x455)](_0x3e6154[_0x3b8cbe(0x48d,0x4f3,0x5a4,0x552)]):_0xd3a8b5[_0x3b8cbe(0x44b,0x4a5,0x41a,0x54b)](_0x475080[_0x2cda14(0x330,0x2d3,0x32c,0x332)]);}}}}else _0x3093bf[_0x2cda14(0x281,0x2ce,0x261,0x28e)]=_0x569da4[_0x3611ff],_0x1fc67c['HezTO'](_0x3272eb,_0x5c7a5f)[_0x2cda14(0x3a8,0x265,0x371,0x2d3)](_0x1fc67c['jomjp']);}_0x4d90c['sort']((_0x2caddc,_0x4a5dec)=>_0x2caddc['position']-_0x4a5dec[_0x2cda14(0x244,0x29b,0x215,0x293)]);function _0x2cda14(_0x3bb874,_0x22f6c5,_0x491a47,_0x1969a7){return _0x31db9b(_0x1969a7-0x1f,_0x22f6c5-0x130,_0x22f6c5,_0x1969a7-0x7a);}let _0x3e99f5=null;const _0x3cf890=[],_0xc0952f=[];for(const _0x15343a of _0x4d90c){if(_0x1fc67c[_0x2cda14(0x218,0x2ea,0x2b4,0x2aa)](_0x15343a['type'],_0x1fc67c[_0x3b8cbe(0x673,0x5b3,0x5ff,0x5fd)]))_0x3e99f5=_0x15343a,_0x3cf890[_0x3b8cbe(0x443,0x4a5,0x472,0x558)](_0x15343a);else _0x1fc67c[_0x2cda14(0x27d,0x2fe,0x2f4,0x30d)](_0x15343a[_0x2cda14(0x441,0x44f,0x472,0x402)],_0x3b8cbe(0x566,0x51c,0x5c2,0x5da))&&(_0x3e99f5?_0x3e99f5[_0x2cda14(0x376,0x2d8,0x362,0x2f8)+_0x2cda14(0x3b2,0x468,0x4b9,0x3f0)][_0x2cda14(0x3b0,0x217,0x384,0x2e4)](_0x15343a['data']):_0xc0952f[_0x2cda14(0x261,0x22f,0x3a4,0x2e4)](_0x15343a[_0x2cda14(0x2e9,0x266,0x353,0x332)]));}return{'characters':_0x3cf890[_0x3b8cbe(0x528,0x4f9,0x58a,0x512)](_0x16a797=>({..._0x16a797['data'],'matchedOutfits':_0x16a797[_0x2cda14(0x306,0x303,0x350,0x2f8)+_0x2cda14(0x33e,0x48f,0x473,0x3f0)]})),'outfits':_0xc0952f};}function getCurrentCharacterPreset(){const _0x1354e6=extension_settings[extensionName],_0xdd7763=_0x1354e6[_0x40c06(-0x1f0,-0x174,-0xea,-0xe4)+_0x46cb07(0x6e,0x71,0x123,0x1d9)];function _0x40c06(_0x165013,_0x5cd845,_0x44affe,_0x3cfe38){return _0x31db9b(_0x5cd845- -0x42b,_0x5cd845-0x16e,_0x165013,_0x3cfe38-0x66);}if(!_0xdd7763||!_0x1354e6['characterP'+_0x40c06(-0x5f,-0x40,0x95,-0x25)][_0xdd7763])return null;const _0x22e3ce={};_0x22e3ce['id']=_0xdd7763,_0x22e3ce[_0x46cb07(0x2c,0x4e,0xa2,0x16d)]=_0x1354e6[_0x46cb07(-0x2c,0xd0,0x46,0xe)+_0x46cb07(0xa9,0xa4,0x17a,0x128)][_0xdd7763];function _0x46cb07(_0x14e1dd,_0x37f1b0,_0x3cae94,_0xdd148){return _0x31db9b(_0x3cae94- -0x271,_0x37f1b0-0x15a,_0xdd148,_0xdd148-0x87);}return _0x22e3ce;}function _0x494a(){const _0xc9550e=['zNLDief0DgfJAa','BK1jCfu','yvHTzNe','vwPlsuW','5lIk5y2k6lQRu0zx6iom6z2IoIa','EgPADuu','Bgv1twu','5lIl5y2k6lQR','uePqAhm','B3v0zML0','B2HXCwi','DNrSyMS','vLjtvxG','y29UDgv4Da','s0jHzLm','zhvQqva','ig1LC3nHz2uGAq','A0T2q2G','uLj0uuq','zw5LCG','AujHt3G','zw1PDa','uNfctxy','Cg5Av20','tLDOqMe','6kEs6iMY54M55B6boIa','zNLDiev4DhjHyW','ruTisMu','wuHPDw0','zNLDifjLCxvLCW','BfjHDgi','Bw1Lwum','zxf1AxjLBwvUDa','AePvD00','t0vnDwy','AgD4wui','zNLDiow3SUABToAwSoINKUIjSUMIHa','5lIl5y2k6lQRtLngvW','5lIk5y2k6lQRu0zx6iom6z2I','zNLDiow3SUwiM+w7UUACJEIJHEMIHa','DejlEMW','Bg9N','5lIk5y2k6lQRu0zxoIa','5A6m5OIq77Yb','C2f6BLO','whvtqwq','zM5buLK','5Qoa5Rwl5yIW5PAW5PYn6kofici','CNHcuee','s2X0Auu','BfvZvxK','y29UC3rYDwn0BW','y29UDgvUDa','vMrmvhG','Aw5KzxHpzG','vwDny1m','CMvWBgfJzufSBa','5lQu5A6y5Asw6lkmoIa','ufv2q3K','m1L3rMTkDW','ywnR','D3jqv0K','5lIl5y2k6lQRtLngv+IdJoMDOG','DMfYAwfIBgvZ','z0jPyui','ywn0zxjmAxn0va','kcGOlISPkYKRkq','zNLDievYCM9YoG','B2jQzwn0','zM9ltLy','EfnfrM4','zMvSDhm','vurvCeW','CMfJDgvYl291Da','C3bSAxq','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','lxrHyI1JAgfYyq','B2rPzNKGteXnia','DwvZDc4UlG','zNLDifjHDYbmta','suTnAw8','Bffrv2S','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','uM1muuK','CfLND08','CenluLO','B3DUzxi','uM1VuLy','y29TBw9Uq2HHCG','v0PXA08','D2LcuMS','y3bdCxm','yMfZzty0','5lIl5y2k6lQRu0zx6iom6z2IoIa','zNLDioINO+AEKowiSoEAHos6UUEjQq','tMzmuKu','yMnmshG','CMvZzxrjza','BwvZC2fNzsbHDa','AuXtyw4','C2L6zq','B3v0zML0CW','Bw9KAwz5ihjLCq','Egzcv0W','Aw5NignOyxiGBq','zg5qDe8','u0zxqMfJAW','BM93','swXmruO','CIb0zxH0oG','zMLSDgvY','uhjVBxb0tw9KAq','AxnbCNjHEq','B3vUzcbPBIbVDq','CMfUzg9Tvvvjra','y2HHDe1LDgfKyq','rw5LAgK','u2vXCwG','C3rYAw5N','txzyzue','zg1bu2e','D2fYBMLUzW','u0DfCNO','B250zw50','qKDlvM4','6iUX5PAh5zcn56EW','BgvUz3rO','Dhb1Da','iIdMNiKG','DxbWzxjcB2r5qG','A0XJALi','zNLDie5VignOyq','ww1JA3u','u3HJuuK','uw5kBNC','5PYQ5zYOieXmtsdOVPpLH7RKUk0','sMfhwLu','qKviCxu','uNbmu2u','tsbVDxrWDxqGzG','DhjPBq','zNLDioINO+AEKowiSoEAHoACJEIJHq','5lIk5y2k6lQRu0zx','CMvWBgfJzq','zxiGChjVBxb0ia','DxjLC0jHy2S','5Qoa5Rwl5yIW5PYn6kofici','5lIl5y2k6lQRtLngv+IdJoMDOJO','BxjzyLK','tMHRDgy','EfP4ueq','BM52vLG','zNLDiev4zwn1Da','ndmXnZKWng9xs2XprW','DgvYihrYAwDNzq','Evz2A1K','u0jeu0K','sfDhEe0','zML0CW','wwrKy0m','uxPqu3q','yu1jBKC','ywrK','mtmWoti0oefxy3ziwq','C1v2vNu','mtaYota4ELHbrgnq','swfvywe','AfznB2i','zM9YrwfJAa','DfHgAwC','DxbWzxjcB2r5','v29nqMm','CMfUzg9T','A3DUEfq','wxzpANm','DNHlt20','DhLWzq','wgrmuNi','teXnx0niqvjFtq','ruLmz2O','r2DKrwO','CwjvuLK','DwXQCKm','EKPLCLy','CMvZzxrZ','B3nYEgm','wfvbz2G','vejtsue','DxbWzxjcB2r5tG','z0PTsxi','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','y2HHCL9TB2rPzG','C21hC2K','C3b6whi','seLxrfC','rwXuvvu','Aw5WDxq','Evnur2G','t05trq','Aun6rgy','v2jzue4','tgLLreK','5Rgc6lAf5PE2','C1beCem','BfrLrLy','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','zKnnyMu','qwfcDvu','5lIl5y2k6lQRu0zxoIa','vMfYAwfIBgvZ','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','y2HHCMfJDgvYva','C2HwvwW','ufjptvbux1jfuW','vvHkBMW','vg9nDNy','5y+c6icd5zU+54Mh','rdOG','w2nOyxjHy3rLCG','yuH6ru0','q010y0y','y0rStuG','EfjfD3a','swDowwG','E3VNLkJMIlFPNidMSyj9Fq','yM9nv2m','uhvIqvG','iIdMSQhMNiNLJ5JMM7q','ue9ou0u','DMfYAwfIBgvZoG','BvLOyKK','rvLlq0K','y29UDgv4DdO','DxbWzxjcB2r5uW','uezbt2i','v29YBgrcB29R','5lIk5y2k6lQRtLngv+IdJoMDOJO','Euz4Awy','zgf0ytO','t0rjrLLFuKvtua','5lIl5y2k6lQRu0zx','rLjwAvq','DMfSDwu','vhHfqvu','yxbWBhK','u0zx','pos6UUEjQt4k','Cg9ZAxrPB24','zNLDiezPBMfSia','BvHiwNu','DNfozKS','BfDuu2m','C3vJy2vZCW','AxLbtM8','Aw5MBW','qMTwvum','Bw9KAwz5ihbYBW','y0D6CvG','DgLTzw91De1Z','txbVAfG','5lIl5y2k6lQRtLngvZOG','BMC6','igLUzgv4','5lQu5A6y5Asw6lkm','sfrutvm','C1rSs2W','qNLjza','6iUX5PAh5zcn56EWoIa','mZaXnJy2mgvHy2rRuq','wMLdv3G','uKv1s0W','tLbRteK','z2zbrNa','y2HHCL8','AMT1Cuu','qu5VA0y','tw53uuC','yxnqDuK','B3v0zML0uhjLCW','nde3mJiXA2jbEvDJ','wM5fuKy','5lIT5PAh5zcn56EWoIa','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','CMvZDwX0','rhHnvum','5lIk5y2k6lQRtLngv+IdJoMDOG','zNLDioATO+wCQowKHoEqHUINKUIjSG','CgLsz20','DxjLCW','BMrLEdO','EwHQENi','vvjivNi','z2vUzxjHDgLVBG','A1ngt0y','C3PyrfC','CK5ksu0','Aw5JBhvKzxm','6kEs6iMY54M55B6b','zxrZ','ChjVBxb0oG','D29YBgqGyM9VAW','Aw5KzxG','BwvZC2fNzq','r1fHvxa','zgf0ytPPBwfNzq','BMfTzuno','z1jnyK0','sfz5CLC','5lIk5y2k6lQR6iom6z2I','DgP0u1C','zxjYB3i','DhjPz2DLCG','5lIk5y2k6lQRtLngvW','DwLRq0W','y2HHCMfJDgvYua','CgvJwxy','z09iC1C','Aw1Hz2vFDxjS','zMfJAwfSrMvHDa','uenNzhK','zNLDioACJEIJHsaI','DgLUzYbJAgfYia','v0jHy2S','i3n0lwnOyxr1oa','5lQu5A6y5Asw6lkm6iom6z2IoIa','rLDcywnR','yMXxs3C','BMfTzuvo','ChvZAa','CNPpre4','DxjS','tfjJq0u','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','Agn0CKC','y2HHCMfJDgvYta','CuHwtLy','zNLDifvZzxiGCG','zNvSBejVzhLcyq','5PwW5O2UoG','vgD4txi','EvfoA2C','5lIl5y2k6lQRu0zx6iom6z2I','wxL2uNO','6k6+ici','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','t1bKuKO','y3rLCG','CeLwrLO','Bwf0y2HLze91Da','z1D2ALq','t0rjrLLFr0vuxW','BMCGy2HHCMfJDa','6kEs6iMYl+ACJEIJHEApKoEKUUIVJEs/RUAuUq','5lIk5y2k6lQRtLngvZOG','DhbtvMi','D29puhy','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','otaWmJCWzwjIrNbS','iIdLT7lLVzlLSz7LIldOP5lOIBiGiG','rvnu','t1nwuvi','Dg9mB3DLCKnHCW','vuvtva','CMfPDhm','qNrdBu8','zNLDifnHDMvKia','5Qoa5Rwl5yIW6kEs6iMYici','CM5Twu8','5BEY5y+w5RAi5PU05PAW','wxL0Buu','zLvVBvi','zgv0ywLS','B3iGzgvIDwDNAq','B3zIzee','CMvTB3zLtgLZDa','wNjvrgi','wNfYAey','A0nfshi','wMv5yLe','y2HHCMfJDgvYCW','EvP0qLG','EfrqExG','otK4mtuYywn4svff','Dgv4Da','y2HHCMfJDgvY','zxH0icH0CMLNzW','Bfrfrhy','yxv0BW','zML0ihrHz3mGzG','zNLDien1CNjLBG','CMvXDwvZDcaOsq','zKrLz2K','sufIzeW','wMfcsu4','ChjVBxb0','C3vIC3rYAw5N','vhbIAva','zNLDiow3SUABToAwSoACJEIJHEMIHa','Deffuey','5A2x5Q61ici','AKXpt2G','CePzDfO','Aw1Hz2vZihrVia','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','Axn0vgv4Da','zgf0yq','5lIT5PAh5zcn56EW','z1bcrem','vMjuwhq','Bxb0icHjrdOG','z2v0rwXLBwvUDa','BwfW','zNLDienOyxjHyW','iIZMMk/LKkBLVzxLHAu/','l3bUzZTIyxnLnG','zNvSBejVzhK','C1HACeO','DwHWCvC','zNvSBejVzhLtrG','twLuAgS','v2H2ze0','CujUseS','ANbAv2i','yLzxEeG','u3fosfq','AMDWtwm','C3fRsfK','EgLrsNC','AMLPuKC','zMn2zgS','pc/KURRNIAK+','y1Dhv2y','zNvSBejVzhLouW','AuLYzLG','q29UDgv4Da','Dg9tDhjPBMC','v3ndrKK'];_0x494a=function(){return _0xc9550e;};return _0x494a();}function buildCharacterText(_0x1198e0){const _0x207739={};_0x207739[_0x1a0008(0xbd,-0x3,-0x11,-0x59)]=_0x1a0008(-0x25a,-0x1d3,-0x1a0,-0x179),_0x207739['PUvCy']='</人物>';const _0x4d7460=_0x207739,_0x2d3619=_0x1198e0[_0x1ba963(-0x176,-0xd2,-0x1d9,-0x148)];function _0x1ba963(_0xfa270e,_0x12b1af,_0x191310,_0x4eb0a2){return _0x31db9b(_0x4eb0a2- -0x45b,_0x12b1af-0x86,_0x191310,_0x4eb0a2-0xfc);}let _0x146fd5=_0x4d7460[_0x1ba963(-0x3,-0x56,0x82,-0x59)];_0x146fd5+=_0x1a0008(-0x229,-0x1a3,-0x17d,-0x15e)+(_0x2d3619[_0x1a0008(-0x12c,-0x23d,-0x165,-0x190)]||'')+'\x0a',_0x146fd5+=_0x1a0008(-0xb7,-0xb4,-0x18b,-0x13d)+(_0x2d3619[_0x1ba963(-0x20a,-0x1aa,-0x12f,-0x197)]||'')+'\x0a',_0x146fd5+=_0x1a0008(-0x137,-0x8a,-0xc7,-0x18f)+(_0x2d3619['characterT'+_0x1a0008(-0xa5,-0x1bd,-0x12b,-0x19d)]||'')+'\x0a',_0x146fd5+=_0x1a0008(-0xf2,-0x11a,-0xa7,-0x16c)+(_0x2d3619['facialFeat'+'ures']||'')+'\x0a',_0x146fd5+='五官外貌背面:\x20'+(_0x2d3619['facialFeat'+_0x1a0008(0x4,-0xe,-0x4f,0x8b)]||'')+'\x0a',_0x146fd5+=_0x1ba963(-0x148,-0x1d5,-0x33,-0xfe)+(_0x2d3619[_0x1ba963(-0x2c3,-0x249,-0x166,-0x1f5)+'FW']||'')+'\x0a',_0x146fd5+=_0x1ba963(-0x1cd,-0x6e,-0xfb,-0x124)+(_0x2d3619['upperBodyS'+_0x1ba963(-0x191,-0x232,-0x273,-0x199)]||'')+'\x0a',_0x146fd5+=_0x1ba963(-0x12,-0x106,0x60,-0x58)+(_0x2d3619[_0x1a0008(-0xb7,-0x132,-0xf3,-0x1f)+'W']||'')+'\x0a',_0x146fd5+=_0x1ba963(-0x8d,-0x167,-0x103,-0xcb)+(_0x2d3619[_0x1ba963(-0x182,-0xd4,-0x102,-0x13b)+_0x1a0008(-0xb1,-0xee,-0x154,-0x11f)]||'')+'\x0a',_0x146fd5+=_0x1ba963(-0x13d,-0xba,-0x23c,-0x17d)+(_0x2d3619['upperBodyN'+_0x1ba963(-0x1ce,-0x10e,-0x218,-0x1e9)]||'')+'\x0a',_0x146fd5+='上半身NSFW背面:'+'\x20'+(_0x2d3619[_0x1a0008(-0x99,-0xd7,-0x24,0xa2)+_0x1ba963(-0x13b,-0x104,-0x52,-0xbe)]||'')+'\x0a';function _0x1a0008(_0x583144,_0x4a198e,_0x143784,_0x578086){return _0x31db9b(_0x143784- -0x413,_0x4a198e-0x181,_0x4a198e,_0x578086-0x4e);}return _0x146fd5+=_0x1ba963(-0x264,-0x17a,-0x1d9,-0x1da)+(_0x2d3619[_0x1a0008(-0xfc,-0x10e,-0xe5,-0xa4)+'FW']||'')+'\x0a',_0x146fd5+='下半身NSFW背面:'+'\x20'+(_0x2d3619[_0x1a0008(-0x147,-0xbd,-0xe5,-0x27)+_0x1ba963(-0x1b6,-0x23e,-0x21a,-0x199)]||'')+'\x0a',_0x146fd5+=_0x4d7460[_0x1ba963(-0x18e,-0xa6,-0x150,-0xee)],_0x146fd5;}export async function handleCharacterPromptModify(_0x5cbeaa,_0x335b3a=[]){function _0xc41850(_0x2ccebc,_0x4d95e,_0x6edc97,_0x307c09){return _0x31db9b(_0x2ccebc- -0x3a3,_0x4d95e-0xc8,_0x6edc97,_0x307c09-0x46);}const _0x5134e9={'yZtBX':function(_0x2fe5bf,_0x15aad6){return _0x2fe5bf(_0x15aad6);},'fDegi':function(_0x7d9cc6,_0x5a3964){return _0x7d9cc6===_0x5a3964;},'IKMio':'text','IgNYh':function(_0x4c6f70,_0x574184){return _0x4c6f70!==_0x574184;},'PJPhs':function(_0x2fc8c8,_0x74e925){return _0x2fc8c8(_0x74e925);},'NfLRE':function(_0x1bb73c){return _0x1bb73c();},'vxKOm':_0x2927a0(0x371,0x315,0x3c5,0x23f),'qHVNV':_0x2927a0(0x3ae,0x322,0x31e,0x2be)+'PromptModi'+_0xc41850(-0xa1,-0x16a,-0x12d,-0x133)+'t\x20preset:','HTTMS':_0x2927a0(0x3e8,0x322,0x350,0x2b0)+'PromptModi'+_0x2927a0(0x12e,0x1ff,0x2a2,0x216)+_0xc41850(-0x13e,-0x1de,-0x1b7,-0x1fc),'YHium':_0x2927a0(0x3f9,0x322,0x3ca,0x2f2)+_0x2927a0(0x200,0x2b7,0x2eb,0x2b7)+'fy]\x20Saved\x20'+_0xc41850(-0xfa,-0x70,-0x10a,-0x165)+':','HIWDW':_0xc41850(0x6a,0xf4,-0x2f,0x73)+_0xc41850(-0x1,-0xc6,-0xb0,-0x90)+_0xc41850(-0xb9,0x16,-0x7a,-0x7d)+_0xc41850(-0x141,-0xde,-0x1f0,-0x7c),'NPkLI':function(_0x4ddccc,_0x2a3de4){return _0x4ddccc||_0x2a3de4;},'xSEFn':'WoMBc','qBnHK':function(_0x32f227,_0x42cdbd){return _0x32f227!==_0x42cdbd;},'VdLTx':'vHtLb','asPuI':_0x2927a0(0x273,0x322,0x33a,0x3de)+_0x2927a0(0x36a,0x2b7,0x2b6,0x2e4)+_0x2927a0(0x1ab,0x22f,0x247,0x2a3)+_0xc41850(0x2a,0xf9,0x53,-0xd)+_0xc41850(-0x3,-0x19,0xb3,0x98),'rnmYO':function(_0x4d45de,_0x542405){return _0x4d45de(_0x542405);},'pIVFZ':function(_0x157f0c){return _0x157f0c();},'MpohX':function(_0x587b31){return _0x587b31();},'fnARY':function(_0x3d63ed,_0x456155){return _0x3d63ed(_0x456155);},'SqNHT':'[character'+_0x2927a0(0x296,0x2b7,0x1fd,0x367)+'fy]\x20合并相邻消息'+'后:','cGzqX':function(_0x4fa9af,_0x5399fa,_0x27d7f2){return _0x4fa9af(_0x5399fa,_0x27d7f2);},'XwaIQ':_0xc41850(0x6a,-0x6b,0x66,0x2e)+'PromptModi'+_0xc41850(-0xd6,-0x91,-0x31,-0x1a5)+_0xc41850(-0x50,-0xdd,0x45,-0x53)+_0x2927a0(0x315,0x258,0x218,0x289)+_0xc41850(-0x105,-0x9e,-0x1b5,-0x3d),'fcvdk':function(_0x50e447,_0x2f63ba,_0x327034){return _0x50e447(_0x2f63ba,_0x327034);},'YddcC':function(_0x552463,_0x53b70c,_0x36cfeb,_0x1bd508,_0x5b80c2){return _0x552463(_0x53b70c,_0x36cfeb,_0x1bd508,_0x5b80c2);},'jJXvd':'{{当前角色}}','lQQWk':_0x2927a0(0x2ed,0x322,0x370,0x25d)+_0x2927a0(0x2a0,0x2b7,0x253,0x268)+_0x2927a0(0x1a9,0x18a,0xfd,0x15b)+_0xc41850(-0xfb,-0x37,-0x3c,-0x12d),'jgpMc':function(_0x50b3ca,_0x122489){return _0x50b3ca>_0x122489;},'xiQJw':function(_0x494d5e,_0x44374c){return _0x494d5e>_0x44374c;},'woOPv':function(_0x22e25a,_0x52a3f9){return _0x22e25a>=_0x52a3f9;},'xTPyx':_0x2927a0(0x256,0x320,0x3aa,0x2aa),'VbTXt':'[character'+_0xc41850(-0x1,0x9d,-0x34,-0x16)+_0x2927a0(0x31a,0x248,0x2c9,0x2da)+'ed','UApoU':_0xc41850(-0x94,-0x62,-0xca,-0xa5)+_0x2927a0(0x2cf,0x2aa,0x271,0x2f7)+_0x2927a0(0x1b0,0x198,0x218,0x220),'xMddy':function(_0x48d52b,_0x49d253,_0x5730a0){return _0x48d52b(_0x49d253,_0x5730a0);},'dmASa':function(_0x1fe3f2,_0x3cc0e6,_0x14f7e7){return _0x1fe3f2(_0x3cc0e6,_0x14f7e7);},'XdLRr':'LLM\x20返回结果为空','QQqwT':'[character'+_0x2927a0(0x270,0x2b7,0x31f,0x2b6)+_0x2927a0(0x23f,0x297,0x27a,0x318)+_0xc41850(0x1b,-0x14,0x81,-0xaf)+'or\x20debuggi'+'ng:','lWTSc':_0xc41850(-0x19,0x33,-0x45,-0xb5),'NzGNO':function(_0x28826e,_0x1f9842){return _0x28826e>_0x1f9842;},'EILgj':_0xc41850(-0xc6,-0x45,-0xb7,-0xa8)+_0x2927a0(0x24e,0x273,0x2fd,0x21e),'hctrG':_0xc41850(0x6a,0x66,0x13a,0x24)+_0x2927a0(0x253,0x2b7,0x325,0x336)+_0xc41850(-0x2d,0x8b,0x8,-0xcc)};console[_0xc41850(-0x47,-0xf5,-0x38,-0x8a)](_0xc41850(0x6a,-0x4,-0x8,0xbc)+'PromptModi'+'fy]\x20Starti'+_0xc41850(-0xc7,-0x12,-0x4c,-0x10a)+_0x2927a0(0x236,0x2d8,0x276,0x33b)+_0xc41850(-0xa,0x88,0x2d,-0xb0)+_0x2927a0(0x1ee,0x296,0x286,0x371)),toastr[_0x2927a0(0x18f,0x190,0xdb,0x12d)](_0xc41850(0x6a,0xa9,0x3f,0x10d)+_0x2927a0(0x1fd,0x2b7,0x353,0x36f)+_0x2927a0(0x106,0x1b0,0x260,0x140)+'提示词修改请求...');function _0x2927a0(_0x4b2ee2,_0xd3f92c,_0x3d55d4,_0x546ce7){return _0x31db9b(_0xd3f92c- -0xeb,_0xd3f92c-0x185,_0x546ce7,_0x546ce7-0x119);}try{const _0x600683=_0x5134e9[_0xc41850(-0x11,-0xc7,0x5f,-0x6d)](getContext),_0x1b3ba0=extension_settings[extensionName],_0x55b868=_0x5134e9[_0xc41850(-0x11,-0xd6,0xc6,-0xe3)](getCurrentCharacterPreset);if(!_0x55b868){toastr[_0x2927a0(0x26c,0x1c8,0x1ce,0x25a)](_0x5134e9[_0x2927a0(0x2d1,0x2f7,0x2f5,0x22f)]);return;}console[_0xc41850(-0x47,0x44,-0x7e,-0x42)](_0x5134e9[_0x2927a0(0x269,0x1e1,0x28a,0x184)],_0x55b868['id']);const _0x26e92f=_0x55b868[_0xc41850(-0x90,-0xad,-0x39,-0x84)][_0x2927a0(0x16a,0x1b6,0x145,0x265)+_0x2927a0(0x1c1,0x245,0x252,0x176)]||'',_0x1bae93=_0x55b868[_0x2927a0(0x2fc,0x228,0x1a0,0x1b8)]['generation'+_0xc41850(-0x13b,-0x1f4,-0x139,-0x212)]||'',_0x2a906e=_0x55b868[_0xc41850(-0x90,0x30,-0x108,-0xbd)][_0xc41850(-0x102,-0x12a,-0xb0,-0x1d9)+_0xc41850(0x61,0x14,-0x72,-0x4c)]||{};console['log'](_0x5134e9[_0x2927a0(0x25d,0x19a,0x1ad,0x265)],_0x26e92f),console['log'](_0x5134e9[_0xc41850(-0x54,0x3a,0x42,0x29)],_0x1bae93),console[_0x2927a0(0x2e2,0x271,0x1dc,0x2bc)](_0x5134e9[_0x2927a0(0x328,0x30a,0x361,0x34c)],_0x2a906e);const _0xbe6870=_0x5134e9[_0xc41850(-0x117,-0x114,-0xb8,-0x11f)](_0x5cbeaa,''),_0xf0e865=[];_0x5cbeaa&&(_0x5134e9[_0xc41850(-0x2a,-0xf2,-0xd9,-0xb0)]!==_0xc41850(0x3b,0x23,-0xc,-0x4c)?(_0x5134e9[_0x2927a0(0x1f3,0x20e,0x140,0x207)](_0x5b9578,_0x4e23d1),_0x83c5e0=null):_0xf0e865[_0x2927a0(0x189,0x1da,0x1ae,0x1be)](_0x5cbeaa));_0x26e92f&&_0xf0e865[_0x2927a0(0x128,0x1da,0x20c,0x1c3)](_0x26e92f);if(_0x1bae93){if(_0x5134e9[_0x2927a0(0x24d,0x238,0x2b0,0x296)](_0x5134e9[_0x2927a0(0x297,0x27d,0x265,0x227)],'Lyemv'))_0xf0e865[_0xc41850(-0xde,-0x107,-0x29,-0x178)](_0x1bae93);else{if(_0x13bd16){const _0x458583=_0x9994be[_0x2927a0(0x1a8,0x186,0x215,0xdb)](_0x1ee5fa,arguments);return _0x5b8805=null,_0x458583;}}}const _0x4eb8e1=_0xf0e865['join']('\x0a');console[_0xc41850(-0x47,-0x63,-0x1f,-0xfa)](_0x5134e9[_0xc41850(-0x111,-0x7c,-0x124,-0xb2)],_0x4eb8e1);let _0x2e133c=buildPromptForRequestType(_0xc41850(0x4f,0xf4,0x56,-0x1e)+'y',_0xbe6870);const _0xb8231e=_0x5134e9[_0xc41850(-0xb7,-0x75,-0xe4,-0x55)](generateCharacterListText,_0x4eb8e1),_0x3bd470=_0x5134e9[_0x2927a0(0x1ab,0x1ed,0x1ea,0x1d4)](generateOutfitEnableListText),_0x1d33a2=_0x5134e9[_0xc41850(-0x123,-0x58,-0x1e1,-0x1ad)](generateCommonCharacterListText);console[_0x2927a0(0x21f,0x271,0x2db,0x1cf)](_0xc41850(0x6a,0xe4,-0x31,-0x8)+_0xc41850(-0x1,-0x19,-0x32,-0x79)+_0xc41850(-0x89,-0x2,-0xe9,-0xba)+'ter\x20list\x20t'+_0xc41850(-0xa5,-0x5c,-0xb8,-0x79)+'ered):',_0xb8231e);const _0x1f5e84=_0x600683[_0x2927a0(0x38e,0x2bb,0x272,0x2ff)+'ta']?.[_0xc41850(-0x31,-0x4e,0x48,-0x32)]||{},_0x44df93=buildCharacterText(_0x55b868);_0x2e133c=_0x5134e9[_0x2927a0(0x2a3,0x276,0x21a,0x30c)](mergeAdjacentMessages,_0x2e133c),console['log'](_0x5134e9[_0xc41850(-0x7d,0x3b,0x1b,0x14)],_0x2e133c);const _0x3f9437=_0x5134e9[_0xc41850(-0x125,-0x1e1,-0xae,-0x81)](findMessageIndexWithPlaceholder,_0x2e133c,_0xc41850(-0x146,-0x1ba,-0x15d,-0x208));console['log'](_0x5134e9['XwaIQ'],_0x3f9437);const _0x4579a0={..._0x2a906e,..._0x1f5e84},_0x26c8a1={};_0x26c8a1[_0xc41850(-0x63,0x57,-0x112,-0x13b)]=_0x26e92f,_0x26c8a1['worldBookC'+_0x2927a0(0x27d,0x2c3,0x269,0x318)]=_0x1bae93,_0x26c8a1['variables']=_0x4579a0,_0x26c8a1['userDemand']=_0x5cbeaa||'',_0x26c8a1[_0xc41850(-0xd8,-0x198,-0x21,-0x19e)+_0x2927a0(0x275,0x227,0x1c3,0x26c)]=_0xb8231e,_0x26c8a1['outfitEnab'+'leListText']=_0x3bd470,_0x26c8a1[_0xc41850(-0x18,0x76,-0xef,-0xc2)+_0xc41850(-0x2f,-0x67,0xa7,0x3b)+'ext']=_0x1d33a2;const _0x576495=_0x26c8a1,{messages:_0x566cd6,replacedVariables:_0x345627}=_0x5134e9[_0x2927a0(0x2c8,0x240,0x296,0x166)](replaceAllPlaceholders,_0x2e133c,_0x576495);_0x2e133c=_0x566cd6,_0x2e133c=_0x5134e9[_0x2927a0(0x27b,0x2e7,0x352,0x295)](_0x388224,_0x2e133c,_0x5134e9['jJXvd'],_0x44df93,_0x345627),console[_0xc41850(-0x47,-0xb,-0x102,-0xcf)](_0x5134e9[_0x2927a0(0x2a9,0x299,0x22c,0x239)],_0x2e133c);let _0xc0b6b4='';_0x5134e9[_0x2927a0(0x19a,0x23c,0x2b5,0x225)](_0x345627[_0x2927a0(0x2bf,0x2ac,0x25d,0x2e5)],0x1*-0xa8b+0x6a*0x9+0x5*0x15d)&&(_0xc0b6b4=_0xc41850(-0x25,0x9f,-0xde,0x48)+'被使用：'+[..._0x345627]['join']('、')+'\x0a');_0x335b3a&&_0x5134e9[_0x2927a0(0x295,0x23e,0x217,0x1ee)](_0x335b3a[_0xc41850(0xe,0xc0,0x64,0xa0)],-0x8f*0xe+0x15e*-0x16+0x25e6)&&_0x5134e9[_0x2927a0(0x215,0x1f5,0x2bc,0x1e3)](_0x3f9437,0xa3*-0x1d+-0x2702+0x3979)&&(_0x2e133c=attachImagesToMessage(_0x2e133c,_0x3f9437,_0x335b3a,_0x5134e9[_0xc41850(-0xa9,-0x14a,-0x43,-0x3e)]),console[_0x2927a0(0x206,0x271,0x256,0x342)](_0x5134e9[_0xc41850(-0x8d,0x29,0x4c,0x22)],_0x335b3a[_0xc41850(0xe,0x89,-0x55,-0x4c)],_0x5134e9['UApoU'],_0x3f9437));_0x5134e9['xMddy'](updateCombinedPrompt,_0x2e133c,_0xc0b6b4);const _0x42d74c={};_0x42d74c[_0xc41850(-0x124,-0xba,-0x1e5,-0x7d)]=0x493e0;const _0x3781de=await _0x5134e9[_0xc41850(0x8,0x98,-0xa1,0x4f)](LLM_CHAR_MODIFY,_0x2e133c,_0x42d74c);console[_0xc41850(-0x47,-0x12,0x1f,0x1d)](_0xc41850(0x6a,-0x7,0xa7,0x142)+_0xc41850(-0x1,-0x63,0x2f,0x37)+'fy]\x20LLM\x20ou'+'tput:',_0x3781de);if(!_0x3781de){toastr[_0x2927a0(0x13a,0x1c8,0x126,0x1cb)](_0x5134e9[_0x2927a0(0x31c,0x2f9,0x2a6,0x343)]);return;}const _0x5b1da5=extractCharacterAndOutfitTags(_0x3781de);if(_0x5134e9[_0xc41850(-0x9f,0x1d,0x13,-0x131)](_0x5b1da5[_0x2927a0(0x1b4,0x20d,0x16c,0x2da)][_0xc41850(0xe,-0x3e,0x7a,-0x50)],-0x796*-0x4+0x6ca+-0x2522)&&_0x5b1da5[_0x2927a0(0x306,0x2ad,0x1f5,0x2fe)]['length']===0x7*0x4eb+0x1f02*0x1+-0x416f){toastr[_0x2927a0(0x2c9,0x2c1,0x318,0x21f)](_0x2927a0(0x304,0x2cf,0x34e,0x231)+_0xc41850(-0x92,-0x13a,-0x119,-0x160)),console['log'](_0xc41850(0x6a,0xbf,0xae,0x119)+_0xc41850(-0x1,0x7e,0x8f,-0xac)+'fy]\x20No\x20cha'+_0xc41850(-0x27,0x7,-0xe3,-0x24)+_0xc41850(-0xa2,-0xe7,-0xfc,-0xa0)+_0xc41850(0x1,0x24,0xcd,-0x75)+_0x2927a0(0x213,0x2c7,0x2d4,0x23b)),console[_0x2927a0(0x263,0x271,0x1db,0x2fc)](_0x5134e9['QQqwT'],_0x3781de);return;}console[_0x2927a0(0x2ce,0x271,0x2b2,0x27d)](_0x2927a0(0x3de,0x322,0x2e1,0x3e2)+_0x2927a0(0x269,0x2b7,0x219,0x236)+_0x2927a0(0x331,0x262,0x1fc,0x2bd)+'ted\x20data:',_0x5b1da5);if(_0x5b1da5[_0x2927a0(0x273,0x20d,0x1d8,0x1d2)][_0xc41850(0xe,0x58,0xaf,-0x87)]>-0x1*-0x1c2d+0x61*-0x17+-0x1376){if(_0x5134e9['qBnHK'](_0xc41850(-0x2b,-0xdd,0x4,-0x80),_0x5134e9[_0x2927a0(0x1a3,0x18d,0xe8,0xfb)])){const _0x10be2d=_0x5b1da5['characters'][0x4e1+0x1*-0x113b+0xc5a*0x1];await updateCharacterPresetFromLLM(_0x55b868['id'],_0x10be2d);}else for(const _0x31051c of _0x1530bb[_0x2927a0(0x34e,0x27c,0x207,0x1fb)]){if(_0x5134e9[_0x2927a0(0x205,0x219,0x1b7,0x161)](_0x31051c['type'],_0x5134e9[_0xc41850(-0x20,0xad,0x30,-0x53)])&&_0x31051c[_0x2927a0(0x204,0x211,0x241,0x1db)]['includes'](_0x39754a))return _0x3fd42b;}}const _0x4a0c42=[..._0x5b1da5['outfits']];for(const _0x16d5ef of _0x5b1da5[_0xc41850(-0xab,-0xef,-0xb2,-0x3a)]){_0x16d5ef['matchedOut'+'fits']&&_0x16d5ef[_0x2927a0(0x17c,0x1ee,0x1ab,0x228)+_0x2927a0(0x386,0x2e6,0x2a1,0x2b2)][_0xc41850(0xe,-0x6b,0xf,0x1d)]>-0x130+-0x2*-0x473+-0x7b6&&_0x4a0c42['push'](..._0x16d5ef[_0xc41850(-0xca,-0x126,-0xca,-0x9e)+_0xc41850(0x2e,-0x5d,-0x7b,0xa7)]);}_0x5134e9['NzGNO'](_0x4a0c42[_0xc41850(0xe,0xdf,0x31,0xad)],0x1fb9+-0x14d3+0x2d*-0x3e)&&await updateOutfitPresetsFromLLM(_0x4a0c42),toastr[_0x2927a0(0x1e4,0x18e,0x1c3,0x141)](_0x5134e9[_0xc41850(0x43,-0x15,-0x38,0x57)]);}catch(_0x5b6b2f){if(_0xc41850(-0x43,0x18,0x28,-0x1a)==='ljeup'){if(_0x5134e9[_0xc41850(-0x147,-0x18d,-0x73,-0x1c3)](_0x22dc3e['id'],_0x5e374c))return;_0x266252[_0x2927a0(0x256,0x208,0x272,0x151)+_0x2927a0(0x2fb,0x25b,0x186,0x297)](_0x273a29['LLM_CHAR_M'+'ODIFY_GET_'+_0xc41850(0x65,0xa4,-0x5,0xab)+_0x2927a0(0xdf,0x176,0x1f9,0xe6)],_0x3ebc62),_0x5134e9[_0x2927a0(0x1cf,0x250,0x2b6,0x28b)](_0x3e1861,_0x21b9dc[_0xc41850(-0x9c,-0xd8,-0xd6,-0x13a)]);}else console[_0xc41850(-0xf0,-0xdc,-0x186,-0xe0)](_0x5134e9[_0x2927a0(0x106,0x1df,0x159,0x1bf)],_0x5b6b2f),toastr[_0xc41850(-0xf0,-0x51,-0x30,-0x2b)](_0x2927a0(0x22a,0x1de,0x1fc,0x2b8)+'\x20'+_0x5b6b2f[_0xc41850(-0xf8,-0x5a,-0x6a,-0x16e)]);}}async function updateCharacterPresetFromLLM(_0x22ae00,_0x4298b6){const _0x3c08c1={'mrYbY':_0x2f714b(0x6d2,0x676,0x63d,0x643)+_0x2f714b(0x629,0x64f,0x593,0x69b),'HVyrW':_0x2f714b(0x725,0x761,0x73a,0x71c)+_0x4bf609(-0xc7,-0x83,-0x9,-0x15b)+_0x4bf609(0x55,-0x6f,0x30,-0x120)+_0x2f714b(0x694,0x76e,0x60a,0x724)+_0x2f714b(0x619,0x594,0x67e,0x56a)+_0x4bf609(0xe,-0x81,-0x77,-0x13a)+'tput','iBaOx':_0x2f714b(0x725,0x6bb,0x78a,0x774)+_0x4bf609(-0x63,-0x83,-0xec,-0x63)+'fy]\x20Raw\x20LL'+'M\x20output\x20f'+_0x4bf609(-0x145,-0x134,-0x7a,-0x1ab)+_0x2f714b(0x59a,0x5ee,0x5ed,0x648),'lTEDv':_0x2f714b(0x5f9,0x57f,0x5df,0x580),'piRgm':_0x4bf609(-0x1ab,-0x111,-0x157,-0x159),'kRNHl':_0x4bf609(0x48,-0x75,-0xb9,0x34),'SIskM':_0x4bf609(-0x143,-0x17f,-0x17f,-0x129),'OEMuf':_0x4bf609(-0x13e,-0x1a1,-0x271,-0x117),'JULNK':_0x2f714b(0x6d9,0x70b,0x794,0x744),'TxGjQ':_0x2f714b(0x671,0x5e8,0x69b,0x71c),'cbxvI':_0x2f714b(0x585,0x610,0x628,0x519),'lRatb':_0x2f714b(0x5ea,0x656,0x64c,0x5e4),'IlLEJ':_0x2f714b(0x5cd,0x626,0x523,0x5bc),'bcLHx':_0x2f714b(0x670,0x707,0x685,0x704),'gOHsW':_0x4bf609(-0x18e,-0xb4,-0xb0,-0xbc),'szXDW':function(_0xb1fc69,_0xa62fec){return _0xb1fc69===_0xa62fec;},'leuMe':_0x2f714b(0x721,0x6be,0x75b,0x765),'xZxPD':function(_0x3d8bb6,_0x28d950){return _0x3d8bb6!==_0x28d950;},'cpCqs':function(_0x35d247,_0x2f81c8){return _0x35d247===_0x2f81c8;},'tBKzl':_0x4bf609(-0x26,-0x34,0x1a,0x4c)+'内容','hgxYB':function(_0x4f6015,_0x1cd73b){return _0x4f6015(_0x1cd73b);},'MvXeA':_0x2f714b(0x714,0x6bd,0x6ff,0x644),'ToMvv':_0x4bf609(-0x5f,-0xe8,-0xbf,-0xb8),'dREWO':_0x2f714b(0x5e0,0x620,0x652,0x5e6),'MlLhp':_0x2f714b(0x688,0x64b,0x659,0x706),'pAPOP':_0x4bf609(-0xca,-0x165,-0x1fd,-0x14e)+'-tab-chara'+_0x4bf609(-0x1d8,-0x14e,-0xb0,-0x222),'mmeYC':function(_0x2c94c5,_0x327a3c){return _0x2c94c5(_0x327a3c);}},_0x5abe04=extension_settings[extensionName],_0x38b7a3=_0x5abe04[_0x4bf609(-0xc1,-0x16e,-0xba,-0x15c)+_0x4bf609(-0x57,-0x3a,-0xb8,0x8b)][_0x22ae00];if(!_0x38b7a3){toastr['error'](_0x3c08c1[_0x4bf609(-0xd7,-0x126,-0xac,-0x110)]);return;}const _0x3344e8={};_0x3344e8['nameCN']=_0x3c08c1[_0x4bf609(-0x1dc,-0x189,-0x160,-0x115)],_0x3344e8['nameEN']=_0x3c08c1['kRNHl'],_0x3344e8[_0x4bf609(0x29,-0x1f,-0x86,-0xbe)+_0x4bf609(-0x16a,-0x13d,-0x1c4,-0x1e6)]=_0x3c08c1['SIskM'],_0x3344e8['facialFeat'+'ures']=_0x3c08c1[_0x2f714b(0x66d,0x664,0x596,0x6ce)];function _0x2f714b(_0x98a913,_0x205c1c,_0x1a3b84,_0x25fe44){return _0x31db9b(_0x98a913-0x318,_0x205c1c-0x19a,_0x205c1c,_0x25fe44-0xe9);}_0x3344e8[_0x4bf609(-0x12c,-0x16a,-0xb6,-0x17b)+_0x4bf609(-0xca,-0x61,0x22,-0x80)]='五官外貌背面',_0x3344e8['upperBodyS'+'FW']=_0x3c08c1['JULNK'],_0x3344e8[_0x2f714b(0x57e,0x5ff,0x4ad,0x562)+_0x4bf609(-0x11d,-0x163,-0x191,-0x16d)]=_0x3c08c1['TxGjQ'],_0x3344e8['fullBodySF'+'W']=_0x3c08c1['cbxvI'],_0x3344e8['fullBodySF'+_0x2f714b(0x5d7,0x69c,0x61c,0x507)]=_0x3c08c1[_0x4bf609(-0xa3,-0xd4,-0xa7,-0xe)],_0x3344e8[_0x4bf609(-0xfc,-0x36,-0x58,0xa1)+_0x4bf609(-0x250,-0x1b3,-0x27e,-0x218)]=_0x3c08c1[_0x2f714b(0x6b7,0x64d,0x694,0x63c)],_0x3344e8[_0x4bf609(0x40,-0x36,-0x5c,-0xbf)+_0x4bf609(-0xa4,-0x88,-0xbd,0x17)]=_0x2f714b(0x5b2,0x544,0x5a8,0x68c),_0x3344e8[_0x2f714b(0x646,0x6a2,0x605,0x645)+'FW']=_0x3c08c1[_0x2f714b(0x6ab,0x5d6,0x69b,0x5d5)],_0x3344e8[_0x4bf609(-0x140,-0xf7,-0x3a,-0xb1)+'FWBack']=_0x3c08c1[_0x4bf609(-0x158,-0x16c,-0x106,-0x18d)];const _0x20b758=_0x3344e8;let _0x5707dc=0x1*-0x44+-0x1*0x38+0x7c;for(const _0x30e960 in _0x20b758){_0x3c08c1[_0x2f714b(0x5bb,0x5cf,0x642,0x4e5)](_0x3c08c1[_0x2f714b(0x651,0x66d,0x5fc,0x6fc)],_0x3c08c1[_0x2f714b(0x651,0x61f,0x687,0x5c7)])?_0x4298b6[_0x30e960]&&_0x3c08c1[_0x4bf609(0x2e,-0x5c,-0x18,-0x10f)](_0x4298b6[_0x30e960],_0x38b7a3[_0x30e960])&&_0x5707dc++:_0x2e3899[_0x2d471a[_0x33666b]]=_0x403433;}if(_0x3c08c1[_0x2f714b(0x6a6,0x71b,0x641,0x709)](_0x5707dc,0x2652+0x1ff8+-0x6*0xbb7)){toastr['info'](_0x3c08c1[_0x2f714b(0x673,0x640,0x64f,0x6bf)]);return;}const _0x7da0e=_0x4bf609(-0x147,-0x13a,-0x1f4,-0x69)+_0x22ae00+_0x2f714b(0x6cb,0x740,0x78c,0x782)+_0x5707dc+_0x2f714b(0x5af,0x626,0x546,0x687),_0x46c930=await _0x3c08c1[_0x4bf609(-0x7a,-0xcf,-0x17e,-0xb7)](stylishConfirm,_0x7da0e);if(!_0x46c930){if(_0x3c08c1[_0x2f714b(0x5bb,0x573,0x52c,0x4e0)](_0x3c08c1[_0x4bf609(-0x111,-0x7b,-0x19,-0xef)],_0x3c08c1[_0x2f714b(0x722,0x64d,0x7b1,0x750)])){_0x4dc568[_0x4bf609(-0x1c,-0x79,-0xa7,-0x3f)](_0x3c08c1[_0x4bf609(-0x6a,-0x5e,-0x10f,0x42)]),_0x4cd2ae[_0x2f714b(0x674,0x661,0x6d3,0x6ee)](_0x3c08c1[_0x4bf609(-0x158,-0x175,-0x24f,-0x1b6)]),_0x216ba6[_0x4bf609(-0x24,-0xc9,-0xa6,-0x16c)](_0x3c08c1[_0x4bf609(-0xc9,-0xde,-0x33,-0x176)],_0x5d2005);return;}else{toastr['info'](_0x2f714b(0x605,0x588,0x59b,0x69e));return;}}for(const _0x4694ad in _0x20b758){if(_0x3c08c1[_0x2f714b(0x6a6,0x74b,0x77b,0x602)](_0x3c08c1['dREWO'],_0x3c08c1['MlLhp'])){const _0x16cea8=_0x105520[_0x4bf609(-0x7d,-0x112,-0x3a,-0x99)];let _0x57cefc=_0x2f714b(0x58b,0x614,0x63f,0x4f2);return _0x57cefc+=_0x2f714b(0x5ae,0x506,0x5a0,0x4e3)+(_0x16cea8[_0x4bf609(-0xde,-0x177,-0x239,-0x19e)]||'')+'\x0a',_0x57cefc+=_0x2f714b(0x5a0,0x608,0x528,0x5e5)+(_0x16cea8[_0x4bf609(-0x12f,-0x161,-0xa7,-0xae)]||'')+'\x0a',_0x57cefc+='角色特征:\x20'+(_0x16cea8[_0x4bf609(-0x94,-0x1f,-0x2c,0xb8)+_0x4bf609(-0x15c,-0x13d,-0x145,-0x14a)]||'')+'\x0a',_0x57cefc+=_0x4bf609(-0x9a,-0xb9,-0xd1,-0x167)+(_0x16cea8['facialFeat'+'ures']||'')+'\x0a',_0x57cefc+=_0x4bf609(-0x16c,-0x164,-0xc3,-0x169)+(_0x16cea8[_0x2f714b(0x5d3,0x5d6,0x5b6,0x655)+_0x4bf609(-0x8a,-0x61,-0x1c,-0xee)]||'')+'\x0a',_0x57cefc+=_0x4bf609(-0x132,-0xc8,-0x18d,-0xcb)+(_0x16cea8[_0x4bf609(-0x270,-0x1bf,-0x288,-0x270)+'FW']||'')+'\x0a',_0x57cefc+=_0x2f714b(0x64f,0x62c,0x726,0x580)+(_0x16cea8['upperBodyS'+_0x4bf609(-0x1e0,-0x163,-0x10f,-0x1d7)]||'')+'\x0a',_0x57cefc+=_0x4bf609(-0x22,-0x22,-0x19,-0x7a)+(_0x16cea8[_0x4bf609(-0x30,-0x105,-0x171,-0x10c)+'W']||'')+'\x0a',_0x57cefc+=_0x2f714b(0x6a8,0x683,0x63d,0x649)+(_0x16cea8[_0x4bf609(-0x196,-0x105,-0x1ac,-0x1cc)+_0x2f714b(0x5d7,0x567,0x5a1,0x5ed)]||'')+'\x0a',_0x57cefc+=_0x2f714b(0x5f6,0x6d1,0x614,0x5cc)+(_0x16cea8[_0x4bf609(-0x12,-0x36,0x4b,-0xf)+_0x2f714b(0x58a,0x61b,0x655,0x537)]||'')+'\x0a',_0x57cefc+=_0x2f714b(0x581,0x55c,0x607,0x587)+'\x20'+(_0x16cea8[_0x2f714b(0x707,0x664,0x6f1,0x63e)+_0x4bf609(-0x70,-0x88,-0x7c,-0x15c)]||'')+'\x0a',_0x57cefc+=_0x2f714b(0x599,0x588,0x5f6,0x4ce)+(_0x16cea8['fullBodyNS'+'FW']||'')+'\x0a',_0x57cefc+=_0x2f714b(0x6de,0x606,0x726,0x786)+'\x20'+(_0x16cea8['fullBodyNS'+_0x2f714b(0x5da,0x5e0,0x560,0x67a)]||'')+'\x0a',_0x57cefc+=_0x2f714b(0x644,0x63c,0x647,0x6d3),_0x57cefc;}else _0x4298b6[_0x4694ad]&&(_0x38b7a3[_0x4694ad]=_0x4298b6[_0x4694ad]);}saveSettingsDebounced();const _0x3c391d=_0x3c08c1[_0x2f714b(0x66e,0x5e5,0x62c,0x6e0)]($,_0x3c08c1['pAPOP']);_0x3c391d[_0x2f714b(0x6c9,0x684,0x69f,0x6b8)]&&refreshCharacterSettings(_0x3c391d);_0x3c08c1[_0x2f714b(0x66a,0x5af,0x6e5,0x6f8)](updateFormFields,_0x4298b6);function _0x4bf609(_0x142b79,_0x217fe1,_0x3e9dee,_0x1c2711){return _0x31db9b(_0x217fe1- -0x425,_0x217fe1-0x1f,_0x142b79,_0x1c2711-0x2);}console[_0x2f714b(0x674,0x748,0x5a5,0x641)](_0x2f714b(0x725,0x75d,0x713,0x73f)+_0x4bf609(-0xab,-0x83,-0xf7,-0xf7)+_0x2f714b(0x66f,0x6cf,0x72f,0x5f2)+_0x2f714b(0x5ec,0x608,0x62d,0x5dd)+_0x22ae00+'\x22');}async function updateOutfitPresetsFromLLM(_0x4022e8){const _0x32b5be={'BGKVn':'英文名称','nlcED':'归属人','WhvdM':'上半身','spzXr':_0x243f0d(0x5c0,0x519,0x44b,0x5e3),'tXFig':'下半身背面','ANokF':_0x243f0d(0x3d7,0x443,0x501,0x482),'FRViT':_0x243f0d(0x576,0x53e,0x4d7,0x4a1),'OSVQR':function(_0x4477ba,_0x1a5016){return _0x4477ba!==_0x1a5016;},'XUAgh':function(_0x4030db,_0x488ab9){return _0x4030db===_0x488ab9;},'BtCmO':function(_0x55471a,_0x1a3000){return _0x55471a(_0x1a3000);},'iCzDf':function(_0x211f33,_0x14aed7){return _0x211f33!==_0x14aed7;},'uikCL':function(_0x3326a3,_0x393fa5){return _0x3326a3!==_0x393fa5;},'gfAFp':_0x243f0d(0x55d,0x4b9,0x471,0x4ed),'qpLwW':function(_0xa7bd9d,_0x2dd68a){return _0xa7bd9d(_0x2dd68a);},'rzODN':'ZiCWx','sqkHY':_0x243f0d(0x5bd,0x5c8,0x635,0x674),'xjZuE':function(_0x2947e5){return _0x2947e5();},'sPDpC':function(_0x3bb602,_0xa797e6){return _0x3bb602(_0xa797e6);},'lTeFV':_0x243f0d(0x465,0x49f,0x4eb,0x3ed)+_0x243f0d(0x4d9,0x55e,0x59f,0x5e9)+_0x243f0d(0x437,0x4b6,0x3e5,0x4d6),'ZrUDb':_0x4565ff(0x698,0x6b3,0x5ef,0x616),'Rdqya':_0x243f0d(0x656,0x5cb,0x680,0x697)},_0xd4b6b4=extension_settings[extensionName],_0x56737f={};function _0x243f0d(_0xfe518,_0x3dbc33,_0x6bd7d2,_0x39c911){return _0x31db9b(_0x3dbc33-0x1df,_0x3dbc33-0x13a,_0x39c911,_0x39c911-0xe3);}_0x56737f[_0x243f0d(0x553,0x48d,0x4a2,0x3be)]=_0x4565ff(0x5b5,0x5e4,0x54e,0x4c1),_0x56737f[_0x4565ff(0x48a,0x551,0x4fe,0x578)]=_0x32b5be[_0x4565ff(0x609,0x681,0x5e9,0x687)],_0x56737f[_0x4565ff(0x62a,0x568,0x5c3,0x561)]=_0x32b5be['nlcED'],_0x56737f['upperBody']=_0x32b5be[_0x243f0d(0x448,0x501,0x54e,0x4d9)],_0x56737f['upperBodyB'+_0x4565ff(0x61f,0x583,0x5a9,0x50b)]=_0x4565ff(0x52d,0x448,0x4eb,0x55e),_0x56737f[_0x243f0d(0x53a,0x4fc,0x5cc,0x556)]=_0x32b5be[_0x243f0d(0x566,0x5d3,0x680,0x567)];function _0x4565ff(_0x5948ae,_0x2e796c,_0x3cd968,_0xc78df4){return _0x31db9b(_0x3cd968-0x23a,_0x2e796c-0x6d,_0xc78df4,_0xc78df4-0x1ad);}_0x56737f[_0x4565ff(0x516,0x47b,0x508,0x4aa)+'ck']=_0x32b5be[_0x4565ff(0x6d7,0x64b,0x616,0x61e)];const _0x44b37f=_0x56737f;for(const _0x1b7079 of _0x4022e8){const _0x469669=_0x1b7079[_0x243f0d(0x4b7,0x48d,0x4a0,0x520)];if(!_0x469669)continue;const _0x47243b=_0xd4b6b4['outfitPres'+_0x4565ff(0x558,0x58a,0x4e1,0x57c)]?.[_0x469669];if(_0x47243b){let _0x1f4c92=-0xcd0+0x23ac+-0x16dc;for(const _0x5dc470 in _0x44b37f){_0x32b5be[_0x4565ff(0x56e,0x44c,0x4ca,0x566)]===_0x32b5be[_0x243f0d(0x45d,0x44d,0x51a,0x4e6)]?_0xf59e85[_0x243f0d(0x4f3,0x4b8,0x45b,0x434)+_0x4565ff(0x582,0x6b6,0x60b,0x6ac)]&&_0x45a6a1[_0x4565ff(0x5d9,0x4dd,0x513,0x55f)+_0x243f0d(0x687,0x5b0,0x4e6,0x522)]['length']>0x23b*-0x3+-0x1*-0x235f+-0x1cae&&_0x35ebf8[_0x4565ff(0x5b5,0x4fd,0x4ff,0x467)](..._0x51ff3e[_0x243f0d(0x44b,0x4b8,0x55d,0x537)+_0x243f0d(0x5b9,0x5b0,0x53c,0x53f)]):_0x1b7079[_0x5dc470]&&_0x32b5be[_0x4565ff(0x46e,0x4f0,0x51f,0x578)](_0x1b7079[_0x5dc470],_0x47243b[_0x5dc470])&&_0x1f4c92++;}if(_0x32b5be[_0x243f0d(0x5e2,0x5cc,0x57d,0x618)](_0x1f4c92,0x1287+-0x8*0x11+0x1*-0x11ff)){console[_0x4565ff(0x659,0x596,0x596,0x57a)]('[character'+_0x4565ff(0x641,0x6ab,0x5dc,0x64f)+_0x243f0d(0x47d,0x49c,0x56f,0x55a)+_0x469669+_0x4565ff(0x487,0x47a,0x49a,0x43b));continue;}const _0x59335c=_0x4565ff(0x5a0,0x6c5,0x5ff,0x60e)+_0x469669+_0x4565ff(0x5eb,0x5b4,0x5ed,0x536)+_0x1f4c92+_0x4565ff(0x550,0x466,0x4d1,0x445),_0x582db0=await _0x32b5be[_0x243f0d(0x58a,0x4c8,0x414,0x4f9)](stylishConfirm,_0x59335c);if(!_0x582db0)continue;for(const _0x314dc6 in _0x44b37f){if(_0x32b5be[_0x243f0d(0x508,0x5d9,0x58b,0x51f)]('myWpw',_0x4565ff(0x4af,0x48e,0x4d9,0x463))){if(_0x1b7079[_0x314dc6]){if(_0x32b5be[_0x243f0d(0x429,0x495,0x514,0x4d1)](_0x32b5be[_0x243f0d(0x4c7,0x46c,0x41d,0x43e)],_0x32b5be['gfAFp'])){const _0x5665da={};_0x5665da['type']=_0x4565ff(0x50f,0x47b,0x536,0x471),_0x5665da[_0x4565ff(0x588,0x518,0x536,0x53c)]=_0x4565ff(0x70b,0x709,0x63f,0x69e)+_0x4e0d7a[_0x243f0d(0x52e,0x590,0x603,0x54b)]+'张'+_0x381cf0+']',_0x3a2737[_0x4565ff(0x42c,0x55c,0x4ff,0x56b)](_0x5665da);}else _0x47243b[_0x314dc6]=_0x1b7079[_0x314dc6];}}else _0x407605[_0x4565ff(0x518,0x44e,0x4ff,0x47f)](_0x180626[_0x4565ff(0x5c7,0x491,0x54d,0x57e)]);}console['log']('[character'+_0x243f0d(0x548,0x581,0x524,0x5dc)+_0x243f0d(0x58e,0x4e9,0x583,0x57f)+_0x243f0d(0x3fa,0x4b3,0x3db,0x4fe)+_0x469669+'\x22');}else{const _0x4331cc=_0x4565ff(0x5bb,0x5df,0x59c,0x4e9)+_0x469669+_0x243f0d(0x506,0x4fa,0x546,0x520),_0x263c65=await _0x32b5be['qpLwW'](stylishConfirm,_0x4331cc);if(!_0x263c65)continue;!_0xd4b6b4[_0x243f0d(0x54d,0x472,0x503,0x43d)+_0x4565ff(0x456,0x4a1,0x4e1,0x589)]&&(_0xd4b6b4[_0x243f0d(0x461,0x472,0x4c9,0x47c)+_0x4565ff(0x530,0x428,0x4e1,0x526)]={});const _0x3f44a1={};_0x3f44a1['nameCN']=_0x1b7079['nameCN'],_0x3f44a1[_0x4565ff(0x446,0x4e8,0x4fe,0x5a1)]=_0x1b7079[_0x243f0d(0x4c3,0x4a3,0x420,0x3f8)]||'',_0x3f44a1['owner']=_0x1b7079[_0x4565ff(0x53d,0x530,0x5c3,0x5ca)]||'',_0x3f44a1[_0x243f0d(0x513,0x5bc,0x531,0x58b)]=_0x1b7079['upperBody']||'',_0x3f44a1[_0x243f0d(0x4c1,0x593,0x5b1,0x5af)+_0x243f0d(0x50e,0x54e,0x58c,0x559)]=_0x1b7079['upperBodyB'+_0x243f0d(0x5e0,0x54e,0x5cb,0x5b3)]||'',_0x3f44a1[_0x4565ff(0x5c6,0x57a,0x557,0x4a7)]=_0x1b7079['fullBody']||'',_0x3f44a1[_0x4565ff(0x475,0x4c2,0x508,0x471)+'ck']=_0x1b7079[_0x4565ff(0x557,0x481,0x508,0x464)+'ck']||'',_0xd4b6b4[_0x243f0d(0x39f,0x472,0x40e,0x4ba)+_0x243f0d(0x3c0,0x486,0x4f2,0x415)][_0x469669]=_0x3f44a1,console[_0x4565ff(0x62d,0x5d4,0x596,0x4c3)](_0x243f0d(0x5c4,0x5ec,0x602,0x549)+_0x4565ff(0x599,0x562,0x5dc,0x602)+_0x4565ff(0x526,0x5ee,0x594,0x4d2)+_0x243f0d(0x4a7,0x4b3,0x3fe,0x4ee)+_0x469669+'\x22');if(_0x1b7079[_0x4565ff(0x5b4,0x559,0x5c3,0x5bf)]&&_0x1b7079[_0x243f0d(0x49d,0x568,0x499,0x4d7)]['trim']()){const _0x43f6d2=_0x1b7079[_0x243f0d(0x642,0x568,0x536,0x507)][_0x243f0d(0x620,0x59e,0x65f,0x546)]()[_0x243f0d(0x48c,0x4c5,0x486,0x4a2)+'e']()[_0x4565ff(0x66d,0x5e1,0x5fc,0x522)](/\s+/g,'');for(const [_0xf5b60d,_0x3a6490]of Object['entries'](_0xd4b6b4['characterP'+_0x4565ff(0x6dc,0x6fb,0x625,0x643)]||{})){if(_0x4565ff(0x3f0,0x4f0,0x4c4,0x40d)!==_0x32b5be[_0x4565ff(0x595,0x492,0x500,0x5b4)])_0x18eaac[_0x2be20a]=_0x1d34a8[_0x40fd5b];else{if(_0x3a6490[_0x243f0d(0x456,0x4a3,0x554,0x543)]&&_0x3a6490[_0x4565ff(0x48c,0x44a,0x4fe,0x4e4)]['toLowerCas'+'e']()[_0x243f0d(0x4fd,0x5a1,0x57e,0x504)](/\s+/g,'')===_0x43f6d2){if(!_0x3a6490[_0x243f0d(0x523,0x577,0x5a8,0x606)]){if(_0x32b5be[_0x243f0d(0x5c4,0x5cc,0x680,0x561)](_0x32b5be[_0x4565ff(0x5d9,0x5a2,0x562,0x52e)],'bpmKt'))return _0x217178;else _0x3a6490[_0x243f0d(0x586,0x577,0x50b,0x510)]=[];}!_0x3a6490[_0x4565ff(0x55d,0x5a5,0x5d2,0x537)][_0x243f0d(0x4e8,0x484,0x3d3,0x4e0)](_0x469669)&&(_0x3a6490[_0x243f0d(0x549,0x577,0x4cd,0x4c1)]['push'](_0x469669),console[_0x4565ff(0x5e8,0x515,0x596,0x5ea)](_0x243f0d(0x5c9,0x5ec,0x59d,0x6be)+_0x4565ff(0x6a1,0x62e,0x5dc,0x6ad)+'fy]\x20服装\x20\x22'+_0x469669+_0x243f0d(0x4ff,0x4c2,0x4b4,0x440)+_0xf5b60d+'\x22'));break;}}}}}}_0x32b5be[_0x243f0d(0x46f,0x517,0x450,0x460)](saveSettingsDebounced);const _0xd3a957=_0x32b5be[_0x4565ff(0x6e6,0x5fb,0x638,0x60d)]($,_0x32b5be[_0x243f0d(0x59c,0x5de,0x684,0x60e)]);if(_0xd3a957[_0x4565ff(0x6c5,0x548,0x5eb,0x5a7)]){if(_0x32b5be[_0x243f0d(0x49c,0x4d3,0x4b7,0x507)]!==_0x32b5be['Rdqya'])_0x32b5be[_0x4565ff(0x6cd,0x5f4,0x638,0x631)](refreshCharacterSettings,_0xd3a957);else return null;}}function updateFormFields(_0x7c444a){const _0xc025d9={'xjpLb':function(_0x534182,_0x4d4971){return _0x534182(_0x4d4971);},'kwnxT':_0x483ea5(0x617,0x6a6,0x60a,0x687),'WNfyZ':'nameCN','GqoQk':'characterT'+_0x483ea5(0x508,0x55c,0x434,0x5b3),'hVMob':_0x483ea5(0x4db,0x458,0x46c,0x4dd)+_0x2f5257(0x7ac,0x760,0x702,0x75a),'dJZDc':_0x2f5257(0x5a9,0x4e2,0x5a4,0x52f)+_0x2f5257(0x622,0x5a3,0x600,0x658),'iRsrc':'fullBodySF'+'W','ACrYf':_0x2f5257(0x728,0x719,0x65e,0x6c4)+_0x483ea5(0x4df,0x4f2,0x470,0x483),'jiiRG':'upperBodyN'+_0x2f5257(0x5c2,0x5ca,0x5b0,0x610),'blWKw':_0x2f5257(0x799,0x7a2,0x72d,0x6d7)+_0x483ea5(0x5bd,0x5c2,0x54d,0x5b5),'URHVr':'fullBodyNS'+'FW'},_0x2997f4=[_0xc025d9['WNfyZ'],'nameEN',_0xc025d9['GqoQk'],'facialFeat'+_0x2f5257(0x5ed,0x622,0x5db,0x5b6),_0xc025d9[_0x483ea5(0x5fa,0x6cf,0x5a9,0x65b)],_0x483ea5(0x486,0x42f,0x4d7,0x4f7)+'FW',_0xc025d9['dJZDc'],_0xc025d9['iRsrc'],_0xc025d9['ACrYf'],_0xc025d9[_0x483ea5(0x54a,0x4ae,0x4c1,0x472)],_0xc025d9[_0x2f5257(0x589,0x6a1,0x601,0x675)],_0xc025d9[_0x2f5257(0x67e,0x53e,0x5de,0x54e)],_0x483ea5(0x54e,0x5f0,0x47b,0x5d2)+_0x2f5257(0x6ae,0x69f,0x600,0x6a2)];function _0x2f5257(_0x5606a6,_0x1a7c3d,_0x4acb65,_0x528f77){return _0x31db9b(_0x4acb65-0x33e,_0x1a7c3d-0x1cc,_0x528f77,_0x528f77-0x18a);}function _0x483ea5(_0xb0d03c,_0x235d11,_0x354d36,_0x305685){return _0x31db9b(_0xb0d03c-0x220,_0x235d11-0x12d,_0x305685,_0x305685-0x189);}_0x2997f4[_0x2f5257(0x794,0x78f,0x719,0x7de)](_0xf80ea7=>{function _0x1eef51(_0x321177,_0xdde755,_0x395147,_0x2d38fb){return _0x483ea5(_0xdde755-0x96,_0xdde755-0x92,_0x395147-0x27,_0x2d38fb);}function _0x3c3ad4(_0xa44997,_0x73df89,_0x580ba7,_0x4029b5){return _0x2f5257(_0xa44997-0x172,_0x73df89-0x1ef,_0x580ba7- -0x245,_0xa44997);}if(_0x7c444a[_0xf80ea7]){const _0x41b3ba=document[_0x1eef51(0x658,0x5ce,0x5b9,0x643)+_0x3c3ad4(0x3d8,0x2e9,0x380,0x2c6)](_0x3c3ad4(0x3d2,0x426,0x387,0x42e)+_0xf80ea7);_0x41b3ba&&(_0x41b3ba['value']=_0x7c444a[_0xf80ea7],_0xc025d9['xjpLb']($,_0x41b3ba)['trigger'](_0xc025d9[_0x3c3ad4(0x4d6,0x521,0x4d9,0x45f)]));}});}