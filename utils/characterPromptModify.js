(function(_0x20c2e9,_0xd1d644){const _0xfeca1d=_0x20c2e9();function _0x48b60f(_0x26df81,_0x1a5bfe,_0x337f1d,_0x27a5c6){return _0x44a3(_0x27a5c6- -0x2eb,_0x1a5bfe);}function _0x24b22c(_0x476480,_0x23be23,_0x4e128e,_0x23d60d){return _0x44a3(_0x4e128e-0x39d,_0x23be23);}while(!![]){try{const _0xf5ed74=-parseInt(_0x24b22c(0x602,0x552,0x547,0x4f5))/(-0x1d13+-0x5*-0x747+-0x1*0x74f)*(-parseInt(_0x48b60f(-0xc6,-0xc8,0x2d,-0x54))/(0xe3b*0x1+0x49*0x49+-0x230a))+-parseInt(_0x48b60f(-0xa1,-0x8d,-0xcf,-0x7d))/(-0x8e*0x4+0x1c82+-0x1a47)*(parseInt(_0x48b60f(0x85,-0x7b,-0xd9,-0x12))/(-0x161f*-0x1+0x2262*-0x1+0xc47))+parseInt(_0x48b60f(-0xf3,-0x155,-0x13d,-0xaf))/(-0xc7+-0xae7*0x1+0xbb3)+parseInt(_0x48b60f(-0xf8,-0x1b7,-0x94,-0x13c))/(0x1633*-0x1+0x128c+0x3ad)*(-parseInt(_0x48b60f(0xa1,-0x7c,0x52,0x14))/(-0xc82+-0x1996+-0x1*-0x261f))+parseInt(_0x24b22c(0x602,0x61a,0x6bb,0x6f6))/(-0x1*0x75c+-0x2*0xdfb+-0x712*-0x5)+parseInt(_0x24b22c(0x54c,0x5b1,0x5f8,0x558))/(-0x12ca+-0x419*0x3+-0x2*-0xf8f)*(parseInt(_0x48b60f(-0x87,-0x70,-0xfe,-0xc1))/(0x907*-0x1+-0xc68+0x1*0x1579))+-parseInt(_0x48b60f(-0x123,-0x173,-0xea,-0x123))/(0x6*-0xd4+0x11*0xad+-0x67a)*(parseInt(_0x48b60f(-0x1f,-0x86,-0xc6,-0x9b))/(-0x246b+0x1c3c+0x83b));if(_0xf5ed74===_0xd1d644)break;else _0xfeca1d['push'](_0xfeca1d['shift']());}catch(_0x5b95c6){_0xfeca1d['push'](_0xfeca1d['shift']());}}}(_0x290b,0x1*-0x5d2e9+0x660c2+0x50fad));const _0x28c6f2=(function(){const _0x2f6516={};_0x2f6516['Bwept']=function(_0x31348c,_0x2cc2df){return _0x31348c!==_0x2cc2df;},_0x2f6516[_0x4fd615(0x362,0x3a1,0x3d5,0x389)]='fvyqx';const _0x42b60b=_0x2f6516;function _0x4fd615(_0x1fd042,_0x507fbc,_0x660af9,_0x3c5757){return _0x44a3(_0x1fd042-0x70,_0x3c5757);}let _0x1c7b80=!![];return function(_0x21e879,_0x351cd2){const _0x3ba8f8=_0x1c7b80?function(){function _0x5b1911(_0x170c8c,_0x48d8db,_0x5dfd9c,_0xc6bf4b){return _0x44a3(_0xc6bf4b- -0x21e,_0x48d8db);}function _0x57607b(_0x5d6be7,_0x2dfd53,_0x32b600,_0x4e2409){return _0x44a3(_0x5d6be7- -0x9a,_0x32b600);}if(_0x351cd2){if(_0x42b60b['Bwept'](_0x42b60b[_0x5b1911(0x63,0xcd,0x168,0xd4)],_0x42b60b[_0x57607b(0x258,0x2af,0x24f,0x1af)])){const _0x509ec5=_0x19b423[_0x13afe4],_0xb7f50f=_0x509ec5[_0x57607b(0x102,0xa2,0x15d,0x13d)+_0x5b1911(0x8f,0x132,0x22,0xc3)];if(!_0xb7f50f||!_0x509ec5[_0x5b1911(-0x21,-0x6b,-0x40,-0x82)+_0x57607b(0x112,0x131,0x11e,0xc2)][_0xb7f50f])return null;const _0x9fadb3={};return _0x9fadb3['id']=_0xb7f50f,_0x9fadb3[_0x57607b(0x167,0x157,0xca,0x136)]=_0x509ec5['characterP'+_0x5b1911(-0xd,-0x21,-0x26,-0x72)][_0xb7f50f],_0x9fadb3;}else{const _0x411da4=_0x351cd2[_0x5b1911(0xa,-0x53,0x61,0x3)](_0x21e879,arguments);return _0x351cd2=null,_0x411da4;}}}:function(){};return _0x1c7b80=![],_0x3ba8f8;};}()),_0x44ebf2=_0x28c6f2(this,function(){function _0x59a032(_0x1662c4,_0x1011b0,_0x4d260c,_0xd55b7d){return _0x44a3(_0x4d260c-0x109,_0x1662c4);}function _0x2a54ce(_0x516699,_0x20f397,_0x1c6fe3,_0x13014c){return _0x44a3(_0x13014c- -0xaa,_0x1c6fe3);}return _0x44ebf2[_0x59a032(0x3aa,0x34e,0x37a,0x3db)]()[_0x2a54ce(0x20f,0x219,0x1f2,0x1fc)](_0x2a54ce(0x308,0x1f7,0x2d3,0x276)+'+$')[_0x2a54ce(0x133,0x215,0x216,0x1c7)]()[_0x2a54ce(0x2fc,0x2be,0x307,0x24f)+'r'](_0x44ebf2)[_0x59a032(0x452,0x337,0x3af,0x32e)](_0x59a032(0x490,0x407,0x429,0x397)+'+$');});_0x44ebf2();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x5368ee}from'./promptProcessor.js';function replacePlaceholder(_0x4624e8,_0x40cf89,_0x57d3c9,_0xeeff71){function _0x1ef0b0(_0x5c08f1,_0x511029,_0x34bb4a,_0x53acbd){return _0x44a3(_0x53acbd- -0x347,_0x34bb4a);}function _0x4e7948(_0x2abd10,_0x5131f5,_0x9ff5f3,_0x12d288){return _0x44a3(_0x9ff5f3-0x2d1,_0x12d288);}const _0x334964={'BMmGt':_0x1ef0b0(-0x1bb,-0x1a9,-0x1b0,-0x11c),'bLDWR':_0x1ef0b0(0x28,-0x4a,-0xd,-0x57)+_0x4e7948(0x42b,0x472,0x475,0x50d)+'fy]\x20Attach'+'ed','kTQTI':'images\x20to\x20'+_0x1ef0b0(-0x6,-0x170,-0x7e,-0xb3)+_0x4e7948(0x548,0x416,0x4d9,0x56b),'vZwxS':function(_0xa870e7,_0x474e1a){return _0xa870e7(_0x474e1a);},'ADGCl':function(_0x5db8da,_0x763d5){return _0x5db8da===_0x763d5;},'YPgYT':_0x4e7948(0x52c,0x51e,0x566,0x5e9),'qbSml':_0x4e7948(0x65f,0x61f,0x5b9,0x616),'uiONC':_0x4e7948(0x512,0x4b3,0x56a,0x60c),'NKETF':_0x1ef0b0(0x11,-0xa5,-0x3c,-0x23),'mEvSj':_0x4e7948(0x56c,0x6a4,0x5e7,0x58b),'MGZjw':_0x1ef0b0(-0x13f,-0x13a,0x1d,-0x9d),'QJvWL':_0x1ef0b0(-0x125,-0x100,-0x194,-0x161),'GtkGJ':function(_0x33eb4f,_0x283fcd){return _0x33eb4f!==_0x283fcd;},'CJKdw':_0x1ef0b0(-0x15c,-0x13a,-0xe1,-0x177),'Icnzx':function(_0x29b982,_0x14d3b6,_0x306c1d,_0x2eb0f0,_0x5ec64d){return _0x29b982(_0x14d3b6,_0x306c1d,_0x2eb0f0,_0x5ec64d);}};if(_0x334964[_0x4e7948(0x4c6,0x42c,0x4c8,0x462)](typeof _0x4624e8,_0x334964['YPgYT']))return _0x57d3c9&&_0x4624e8[_0x1ef0b0(-0xa6,-0xef,-0x46,-0xa4)](_0x40cf89)&&(_0x334964[_0x4e7948(0x485,0x41d,0x46f,0x3f5)]!==_0x334964['qbSml']?(_0x3bc6af=_0x12fe89(_0x19c4b8,_0x302af7,_0x1f4e79,_0x334964['BMmGt']),_0x3fad13[_0x4e7948(0x48e,0x530,0x473,0x49d)](_0x334964[_0x1ef0b0(-0xd1,-0xf7,-0x39,-0xa9)],_0x36a06e[_0x1ef0b0(-0x1cd,-0x1f0,-0xdb,-0x164)],_0x334964[_0x4e7948(0x624,0x5b1,0x5c6,0x619)],_0x32055f)):_0xeeff71&&(_0x334964[_0x1ef0b0(-0x14b,-0x80,-0xb0,-0xb5)]!=='WZIRV'?(_0x334964[_0x1ef0b0(-0xe8,-0x7b,-0x83,-0x73)](_0x3342f7,_0xb5d5f3),_0x1327fc=null):_0xeeff71['add'](_0x40cf89))),_0x4624e8[_0x1ef0b0(-0x11d,0x23,-0x110,-0xa2)](_0x40cf89,_0x57d3c9);if(Array[_0x1ef0b0(-0xe9,-0x13b,-0x249,-0x187)](_0x4624e8)){if(_0x334964[_0x4e7948(0x650,0x589,0x5ce,0x520)]!==_0x334964[_0x1ef0b0(-0x223,-0xe4,-0x11d,-0x17c)])return _0x4624e8[_0x1ef0b0(-0x45,-0x4c,-0x191,-0x104)](_0x1f6ff0=>replacePlaceholder(_0x1f6ff0,_0x40cf89,_0x57d3c9,_0xeeff71));else{const _0x56a174=_0x4f47d3?function(){if(_0x301a7a){const _0x10f1f9=_0x50e934['apply'](_0x35e8ad,arguments);return _0x189d41=null,_0x10f1f9;}}:function(){};return _0xc9c393=![],_0x56a174;}}if(_0x4624e8&&_0x334964['ADGCl'](typeof _0x4624e8,_0x334964[_0x1ef0b0(0x2,-0xa,-0x59,-0x88)])){if(_0x4e7948(0x5d8,0x500,0x523,0x5b0)!==_0x334964[_0x4e7948(0x4f9,0x57b,0x58c,0x532)]){const _0x1b6c06={};for(const _0x334116 in _0x4624e8){_0x334964[_0x1ef0b0(-0x32,0x1f,0x38,-0x71)](_0x334964[_0x1ef0b0(-0x105,-0x11d,-0x18,-0xc2)],_0x334964[_0x1ef0b0(-0x54,-0x185,-0x39,-0xc2)])?_0x218497=_0x4e7948(0x4c0,0x411,0x4cc,0x513)+_0x1ef0b0(-0x17b,-0x11c,-0x14b,-0x14b)+[..._0x5b7b07][_0x1ef0b0(0x49,-0x66,-0x40,-0x42)]('、')+'\x0a':_0x1b6c06[_0x334116]=_0x334964[_0x4e7948(0x588,0x4b0,0x4f6,0x435)](replacePlaceholder,_0x4624e8[_0x334116],_0x40cf89,_0x57d3c9,_0xeeff71);}return _0x1b6c06;}else _0x45fa2e[_0x4f7f9b[_0x53284b]]=_0x45aa7a;}return _0x4624e8;}function attachImagesToMessage(_0xda39b2,_0x4a0f40,_0x2efc88,_0x36e53a=_0x380bc6(0x441,0x49a,0x459,0x496)){const _0x5a5eb1={};_0x5a5eb1[_0x2cb022(-0x11d,-0x73,-0xa,-0xac)]=function(_0x12013f,_0x46aa18){return _0x12013f!==_0x46aa18;},_0x5a5eb1[_0x2cb022(-0x6a,-0x103,-0x1d5,-0x128)]=_0x2cb022(-0x288,-0x226,-0x233,-0x1e7),_0x5a5eb1[_0x3f6841(0x360,0x312,0x2db,0x2ff)]=function(_0x33a8ee,_0x359021){return _0x33a8ee>_0x359021;},_0x5a5eb1[_0x2cb022(-0x120,-0xbd,-0x1d1,-0x169)]='...',_0x5a5eb1[_0x3f6841(0x2bd,0x325,0x380,0x361)]=function(_0x56307b,_0x828618){return _0x56307b>_0x828618;},_0x5a5eb1['FkzSb']=_0x3f6841(0x2d2,0x3d9,0x3e2,0x35b)+'+$',_0x5a5eb1[_0x2cb022(-0x10b,-0xf1,-0x259,-0x1ad)]=_0x3f6841(0x277,0x357,0x235,0x2d0);function _0x3f6841(_0x99d8c2,_0x5d575d,_0x1a7e30,_0x3926f2){return _0x380bc6(_0x3926f2- -0x1db,_0x1a7e30,_0x1a7e30-0x1b2,_0x3926f2-0x62);}_0x5a5eb1[_0x3f6841(0x1ca,0x1f3,0x2df,0x218)]=function(_0x4a0eaa,_0x2eb53b){return _0x4a0eaa===_0x2eb53b;},_0x5a5eb1[_0x2cb022(-0x17d,-0x39,-0x189,-0xf1)]=_0x2cb022(-0x48,-0xb0,-0x77,-0xda),_0x5a5eb1[_0x3f6841(0x280,0x2d6,0x2f3,0x31e)]=function(_0x2f8127,_0x28287e){return _0x2f8127+_0x28287e;},_0x5a5eb1[_0x3f6841(0x282,0x273,0x213,0x26b)]=_0x3f6841(0x28b,0x293,0x2d3,0x24e),_0x5a5eb1[_0x2cb022(-0x13,-0x176,-0x83,-0xc1)]=_0x2cb022(-0x1dc,-0x235,-0x1c5,-0x1ce),_0x5a5eb1['maUZX']=function(_0x2840e6,_0x2e2f40){return _0x2840e6<_0x2e2f40;},_0x5a5eb1[_0x3f6841(0x331,0x241,0x2b9,0x299)]=function(_0x20f5ab,_0x5e2ee7){return _0x20f5ab>=_0x5e2ee7;},_0x5a5eb1[_0x2cb022(-0x153,-0x1c7,-0x7d,-0x10f)]=function(_0x51a3f4,_0x4858a3){return _0x51a3f4!==_0x4858a3;},_0x5a5eb1[_0x2cb022(-0x79,-0x60,-0x8b,-0xfd)]=_0x3f6841(0x290,0x260,0x23a,0x21c),_0x5a5eb1[_0x2cb022(-0x13e,-0x173,-0x3a,-0xc8)]=_0x2cb022(-0x17d,-0xbd,-0xc1,-0x13a),_0x5a5eb1[_0x2cb022(-0xf6,-0x6a,-0x12b,-0x123)]='AdWwX',_0x5a5eb1[_0x3f6841(0x1b7,0x1e7,0x2c1,0x225)]='text',_0x5a5eb1[_0x2cb022(-0x4d,0x1e,-0x1a,-0x95)]=function(_0x9d7647,_0xefea51){return _0x9d7647!==_0xefea51;},_0x5a5eb1[_0x2cb022(-0x1bc,-0x26b,-0x1e6,-0x1d4)]=_0x3f6841(0x23a,0x368,0x396,0x2f9);const _0x5e667c=_0x5a5eb1;if(!_0x2efc88||_0x5e667c[_0x2cb022(-0x1c0,-0xe3,-0x119,-0x1a7)](_0x2efc88['length'],-0x881+0x289+0x5f8)||_0x5e667c[_0x3f6841(0x2a9,0x26e,0x2ee,0x2b7)](_0x4a0f40,-0x1*-0x14c0+0x3*-0x3a5+0x1*-0x9d1)||_0x5e667c['JmmjA'](_0x4a0f40,_0xda39b2['length'])){if(_0x5e667c[_0x3f6841(0x2ed,0x264,0x36c,0x2b0)]('DyyCD',_0x5e667c[_0x3f6841(0x22c,0x351,0x228,0x2c2)]))return _0xda39b2;else{if(_0x508679[_0x24e738]){const _0xc7efb6=_0x8d28a3['getElement'+_0x3f6841(0x2d5,0x1dd,0x1e4,0x231)](_0x3f6841(0x399,0x3fe,0x316,0x34d)+_0x1056b9);_0xc7efb6&&(_0xc7efb6[_0x3f6841(0x294,0x284,0x344,0x337)]=_0x280650[_0x14b255],_0x38e916(_0xc7efb6)[_0x3f6841(0x1af,0x285,0x2f7,0x252)](_0x3f6841(0x249,0x252,0x1e3,0x205)));}}}const _0x4e07b6=[..._0xda39b2],_0x193c6f=_0x4e07b6[_0x4a0f40],_0x3c518a=[];if(_0x5e667c[_0x2cb022(-0x134,-0x260,-0x1a8,-0x1a7)](typeof _0x193c6f[_0x3f6841(0x293,0x2d4,0x2c0,0x345)],_0x5e667c['UISqr'])){if(_0x5e667c[_0x3f6841(0x258,0x18a,0x2a5,0x218)](_0x5e667c[_0x2cb022(-0x8c,-0x81,-0x7a,-0xc8)],_0x5e667c[_0x3f6841(0x24d,0x203,0x290,0x29c)])){if(_0x514a96[_0x20c3fd]&&_0x5e667c[_0x2cb022(-0x20,0xc,0x18,-0xac)](_0xc2e853[_0x4693cc],_0x2bed3d[_0x4a2a02])){const _0x4b1abd=_0x4e65d7[_0x171bdb]||_0x5e667c['ZrjIk'],_0x36158a=_0x457b8b[_0x147e0e];_0x318c5c+='•\x20'+_0x462e72[_0x145910]+':\x0a',_0x38751d+=_0x3f6841(0x292,0x31e,0x257,0x2c6)+_0x4b1abd[_0x3f6841(0x28c,0x263,0x36f,0x304)](-0x108b+0x12ac*-0x1+0x2337,-0x26ee+-0x2*0x10a7+0x486e)+(_0x5e667c[_0x3f6841(0x26d,0x390,0x378,0x2ff)](_0x4b1abd[_0x3f6841(0x2a6,0x194,0x235,0x21e)],-0x5*0x15a+0x18ea+0x79*-0x26)?_0x5e667c[_0x2cb022(-0x137,-0xea,-0x163,-0x169)]:'')+'\x0a',_0x5becf0+=_0x3f6841(0x1ec,0x2b4,0x2d8,0x261)+_0x36158a[_0x3f6841(0x300,0x273,0x250,0x304)](-0x20ae+-0xaee*-0x1+0x15c0,0xb7*0x25+0x68f+-0x20d0)+(_0x5e667c['lvTVD'](_0x36158a[_0x3f6841(0x1b9,0x236,0x242,0x21e)],0x1b7+0x1804+0x883*-0x3)?_0x5e667c['ReKTe']:'')+'\x0a\x0a',_0x1c891d++;}}else{const _0x42716c={};_0x42716c[_0x3f6841(0x254,0x273,0x34a,0x29f)]=_0x5e667c['OaLnP'],_0x42716c[_0x2cb022(0x3e,-0xd3,0x9,-0x74)]=_0x193c6f[_0x3f6841(0x3a4,0x3ef,0x2c4,0x345)],_0x3c518a[_0x2cb022(-0x1eb,-0x19f,-0x1b6,-0x12c)](_0x42716c);}}else Array['isArray'](_0x193c6f[_0x3f6841(0x3bc,0x319,0x34c,0x345)])&&_0x3c518a[_0x3f6841(0x32e,0x2e2,0x229,0x293)](..._0x193c6f[_0x2cb022(0xb,-0xa1,-0x66,-0x7a)]);if(_0x5e667c[_0x3f6841(0x30b,0x405,0x410,0x361)](_0x2efc88['length'],-0x106d+0x2604+-0x1597)){if(_0x5e667c[_0x3f6841(0x28c,0x3d3,0x309,0x32a)](_0x3f6841(0x26b,0x25f,0x2db,0x310),_0x5e667c[_0x3f6841(0x2b3,0x203,0x1a7,0x1eb)])){const _0x442b6d={};_0x442b6d[_0x2cb022(-0x75,-0x14b,-0x13a,-0x120)]=_0x3f6841(0x33a,0x303,0x2bc,0x34b),_0x442b6d['text']=_0x2cb022(-0x1b7,-0x14f,-0x19e,-0x14c)+_0x2efc88[_0x3f6841(0x1dd,0x2ae,0x25f,0x21e)]+'张'+_0x36e53a+']',_0x3c518a[_0x3f6841(0x328,0x28f,0x1f2,0x293)](_0x442b6d);}else return _0x5d6a61[_0x2cb022(-0x1a7,-0x71,-0x141,-0x113)]()['search'](PxRfvA[_0x3f6841(0x220,0x279,0x175,0x1f8)])[_0x2cb022(-0xbf,-0x17b,-0x8b,-0x113)]()[_0x3f6841(0x275,0x28c,0x34f,0x334)+'r'](_0x1376db)[_0x3f6841(0x258,0x357,0x325,0x2e1)](PxRfvA[_0x2cb022(-0x28d,-0x1e7,-0x1c7,-0x1c7)]);}_0x2efc88[_0x3f6841(0x1f1,0x250,0x291,0x1e1)]((_0x1f8e8c,_0x2ae3a0)=>{const _0x46d680=typeof _0x1f8e8c===_0x5e667c[_0x515349(-0x49,-0x101,-0x19f,-0x79)]?_0x1f8e8c:_0x1f8e8c[_0x30ec20(-0x83,-0x41,-0x12b,-0xed)];function _0x515349(_0x4575ad,_0x5a41c9,_0x125e7e,_0x20d0a7){return _0x3f6841(_0x4575ad-0x1ea,_0x5a41c9-0x1f2,_0x4575ad,_0x5a41c9- -0x313);}const _0x3fa8cb=_0x5e667c[_0x515349(-0x12a,-0xfb,-0x97,-0x1c2)](typeof _0x1f8e8c,_0x5e667c[_0x30ec20(-0x36,0x61,-0x79,-0x35)])&&_0x1f8e8c[_0x515349(0x91,-0x37,0x4c,-0x61)]?_0x1f8e8c['name']:''+_0x36e53a+_0x5e667c['BCLuo'](_0x2ae3a0,-0x6c*-0x5c+-0x6*-0x517+-0x4559),_0x31ce7d={};_0x31ce7d['type']='text',_0x31ce7d[_0x30ec20(0x10b,0x99,0xb9,0x48)]='['+_0x3fa8cb+']',_0x3c518a['push'](_0x31ce7d);let _0x45c3fb=_0x46d680;!_0x46d680[_0x515349(0x43,-0x22,-0xe7,-0x50)](_0x5e667c[_0x515349(-0x16a,-0xa8,0x1e,-0x14)])&&(_0x45c3fb=_0x515349(-0x6d,-0x8b,-0x36,-0xf4)+_0x515349(-0xde,-0x89,0x2,-0x38)+'4,'+_0x46d680);const _0x404c5f={};_0x404c5f[_0x515349(0x34,0x3,-0x2c,-0x99)]=_0x45c3fb,_0x404c5f[_0x515349(-0xa8,0x11,0xcb,-0x27)]=_0x5e667c[_0x30ec20(-0x13,0x75,-0x8b,-0x5)];const _0x304100={};_0x304100[_0x515349(0x38,-0x74,-0x17,-0x41)]=_0x515349(0xc1,0x16,0x9b,0xb1);function _0x30ec20(_0x817d11,_0x259778,_0x3de322,_0x357ddf){return _0x2cb022(_0x817d11-0x18b,_0x259778-0x14e,_0x3de322,_0x357ddf-0xbc);}_0x304100[_0x30ec20(0x2c,0x7e,0x31,0x26)]=_0x404c5f,_0x3c518a[_0x30ec20(0x4f,-0x1c,-0xd9,-0x70)](_0x304100);});function _0x2cb022(_0x14bc1a,_0x32a505,_0x154440,_0x19f844){return _0x380bc6(_0x19f844- -0x59a,_0x154440,_0x154440-0x139,_0x19f844-0x13f);}const _0x10dcb6={..._0x193c6f};return _0x10dcb6[_0x2cb022(-0xb9,-0xe1,-0xe1,-0x7a)]=_0x3c518a,_0x4e07b6[_0x4a0f40]=_0x10dcb6,_0x4e07b6;}function findMessageIndexWithPlaceholder(_0x4a4add,_0x1199cd){const _0x473d7f={};function _0x31210a(_0x26f96f,_0x17d9e5,_0x3070e6,_0x442d5b){return _0x380bc6(_0x17d9e5- -0x7a,_0x442d5b,_0x3070e6-0x192,_0x442d5b-0x194);}_0x473d7f['HqCWv']=function(_0x1bfef5,_0x5d7d73){return _0x1bfef5<_0x5d7d73;};function _0x3451ef(_0x5ca717,_0x457794,_0x35d00c,_0x28b952){return _0x380bc6(_0x28b952- -0x1,_0x35d00c,_0x35d00c-0x3d,_0x28b952-0x174);}_0x473d7f['NyNGP']=_0x3451ef(0x4db,0x401,0x4c7,0x4aa),_0x473d7f[_0x3451ef(0x4e0,0x482,0x431,0x432)]=function(_0x59a325,_0x724a1f){return _0x59a325===_0x724a1f;};const _0x51fb56=_0x473d7f;for(let _0x3e586a=0x6b3*0x2+0xf6e+-0x1cd4;_0x51fb56[_0x31210a(0x410,0x36e,0x397,0x345)](_0x3e586a,_0x4a4add[_0x3451ef(0x33d,0x394,0x414,0x3f8)]);_0x3e586a++){const _0x2edf65=_0x4a4add[_0x3e586a];if(typeof _0x2edf65[_0x31210a(0x460,0x4a6,0x4b1,0x46f)]===_0x51fb56[_0x31210a(0x564,0x49d,0x4c3,0x48d)]&&_0x2edf65['content'][_0x3451ef(0x53a,0x489,0x54d,0x4b8)](_0x1199cd))return _0x3e586a;else{if(Array[_0x3451ef(0x40a,0x39f,0x370,0x3d5)](_0x2edf65[_0x3451ef(0x48d,0x4bc,0x5e6,0x51f)]))for(const _0x378e2f of _0x2edf65[_0x31210a(0x486,0x4a6,0x43d,0x416)]){if(_0x51fb56[_0x3451ef(0x474,0x4bf,0x486,0x432)](_0x378e2f[_0x31210a(0x411,0x400,0x44e,0x4ad)],_0x31210a(0x449,0x4ac,0x41a,0x43f))&&_0x378e2f[_0x3451ef(0x534,0x5b2,0x5c8,0x525)][_0x3451ef(0x3f8,0x4a9,0x533,0x4b8)](_0x1199cd))return _0x3e586a;}}}return-(-0x540+-0x1*-0x1b9f+0xe*-0x199);}function generateRequestId(){const _0x288bae={};_0x288bae[_0xffb7f7(0xdc,0x62,0xe5,0xe9)]=function(_0x482aa5,_0x4d48c8){return _0x482aa5+_0x4d48c8;};const _0x3c29ff=_0x288bae;function _0xffb7f7(_0xecd567,_0x403753,_0x7a5257,_0x2dc0af){return _0x380bc6(_0x7a5257- -0x3e2,_0xecd567,_0x7a5257-0x112,_0x2dc0af-0x123);}function _0x53c25c(_0x395157,_0x5331eb,_0x193ca6,_0x420820){return _0x380bc6(_0x5331eb-0x7d,_0x193ca6,_0x193ca6-0x1e5,_0x420820-0x1ea);}if(crypto&&crypto[_0xffb7f7(0xa4,0x39,0x2d,0xb7)])return crypto[_0xffb7f7(0x98,0xa5,0x2d,-0x7)]();return _0x3c29ff[_0xffb7f7(0x183,0xc8,0xe5,0xc4)](Date[_0xffb7f7(-0x14,0x3c,0x9d,-0x26)]()['toString'](0xd37+0x156e+-0x2281),Math['random']()[_0xffb7f7(0x95,0x25,0xa5,0x38)](0x23e+-0x4f1+0x2d7*0x1)[_0x53c25c(0x4f7,0x55c,0x536,0x4a9)](-0x11b*0x3+-0x953+-0xca6*-0x1));}export function LLM_CHAR_MODIFY_GET_PROMPT(){function _0x18bace(_0x3a9b32,_0x2e6dd7,_0x3810b9,_0x35a1e6){return _0x380bc6(_0x2e6dd7- -0x389,_0x3a9b32,_0x3810b9-0x11,_0x35a1e6-0x2b);}const _0x4ebd86={'fxwIF':function(_0x4efc95,_0x175a68){return _0x4efc95===_0x175a68;},'daolv':_0x56dc39(-0x81,-0x4d,-0x99,-0xf5),'zczEs':_0x56dc39(-0x28,-0x4a,-0x6d,-0x31),'ZYTUh':function(_0x3dc50f,_0x3a515c){return _0x3dc50f(_0x3a515c);},'TYSyE':_0x56dc39(-0xb3,-0xd7,-0x21,-0x76)+'时','FVMfO':function(_0x2008f5){return _0x2008f5();},'HEgBv':function(_0x1dbfc8,_0x2373c0,_0x5d3776){return _0x1dbfc8(_0x2373c0,_0x5d3776);}};function _0x56dc39(_0x2518a9,_0xfedce0,_0x58f028,_0xc5018d){return _0x380bc6(_0x58f028- -0x480,_0x2518a9,_0x58f028-0x186,_0xc5018d-0x8e);}return new Promise((_0x38750c,_0x4384d9)=>{const _0x59b0dd={'ZAHks':function(_0x740af9,_0x5f09c0){return _0x740af9!==_0x5f09c0;},'XnXlZ':function(_0x522a50,_0x5b2487){return _0x522a50(_0x5b2487);},'gORFs':function(_0x23789c,_0x546a54){return _0x23789c===_0x546a54;}},_0x474153=_0x4ebd86['FVMfO'](generateRequestId);function _0x37c89a(_0x5a09f1,_0x1b6c18,_0x91ccd6,_0x225676){return _0x18bace(_0x1b6c18,_0x225676-0x171,_0x91ccd6-0x99,_0x225676-0x185);}console[_0x37c89a(0x1f4,0x21d,0x113,0x1a0)]('[character'+'PromptModi'+_0x37c89a(0x2fc,0x1e7,0x2ed,0x28a)+_0x37c89a(0x20d,0x25e,0x276,0x294)+_0x394a8c(-0x1c9,-0x1e3,-0x1d1,-0x1a0)+'mpt\x20(ID:\x20'+_0x474153+')');const _0x361564=_0x5c8c25=>{function _0x4d40c5(_0x19303c,_0x26e989,_0x5ac070,_0x466bd4){return _0x394a8c(_0x19303c-0x16e,_0x26e989-0x5be,_0x5ac070-0xb4,_0x19303c);}if(_0x59b0dd[_0x4d40c5(0x3b1,0x3ef,0x337,0x46f)](_0x5c8c25['id'],_0x474153))return;eventSource[_0x140caa(0x2e6,0x21e,0x180,0x264)+'ener'](eventNames[_0x140caa(0x3e2,0x322,0x2db,0x284)+_0x4d40c5(0x451,0x3d2,0x3a2,0x410)+_0x4d40c5(0x543,0x4f9,0x530,0x4c9)+_0x4d40c5(0x42a,0x3c4,0x451,0x443)],_0x361564);function _0x140caa(_0x111426,_0x45ed9e,_0x3aa2bc,_0x23c333){return _0x37c89a(_0x111426-0xa2,_0x3aa2bc,_0x3aa2bc-0x116,_0x45ed9e-0x13);}_0x59b0dd[_0x4d40c5(0x45a,0x4c0,0x54c,0x47a)](_0x38750c,_0x5c8c25[_0x140caa(0x370,0x2fe,0x381,0x3aa)]);};eventSource['on'](eventNames['LLM_CHAR_M'+_0x37c89a(0x1f6,0x1bf,0x1dc,0x1c3)+'PROMPT_RES'+_0x37c89a(0x23f,0xf4,0x1c6,0x1b5)],_0x361564);function _0x394a8c(_0x410194,_0x3cb032,_0x49026d,_0x450f68){return _0x56dc39(_0x450f68,_0x3cb032-0xf3,_0x3cb032- -0x147,_0x450f68-0xe2);}const _0x330649={};_0x330649['id']=_0x474153,eventSource['emit'](eventNames['LLM_CHAR_M'+_0x394a8c(-0x2a3,-0x1ec,-0x143,-0x195)+_0x37c89a(0x21d,0x102,0x1bc,0x1a5)+_0x37c89a(0x2b8,0x163,0x265,0x222)],_0x330649),_0x4ebd86[_0x394a8c(-0x115,-0x171,-0xac,-0x1e5)](setTimeout,()=>{function _0xe263d0(_0x510bf5,_0x190a57,_0x2faf06,_0x474db0){return _0x394a8c(_0x510bf5-0x157,_0x510bf5-0x80,_0x2faf06-0x164,_0x2faf06);}function _0x41b03c(_0x3f3293,_0x20646a,_0x39b243,_0x322a2a){return _0x37c89a(_0x3f3293-0x1b7,_0x39b243,_0x39b243-0x1f3,_0x3f3293-0x22b);}if(_0x4ebd86[_0xe263d0(-0x113,-0x13f,-0x117,-0x159)](_0x4ebd86[_0x41b03c(0x4d8,0x4af,0x411,0x49e)],_0x4ebd86[_0xe263d0(-0xc4,-0x17b,-0x109,-0x35)])){if(_0x59b0dd[_0x41b03c(0x409,0x3e4,0x456,0x370)](_0x3177e0[_0xe263d0(-0xcd,-0x137,-0x13d,-0xc1)],_0xe263d0(-0x21,0x11,-0xd2,0x19))&&_0x4a7e83[_0xe263d0(-0x21,0x26,0x4a,0x36)][_0x41b03c(0x4cc,0x485,0x40e,0x4ce)](_0x15a9a7))return _0x59b621;}else eventSource[_0xe263d0(-0x124,-0x168,-0x10e,-0xf5)+_0x41b03c(0x490,0x433,0x495,0x4bd)](eventNames[_0x41b03c(0x53a,0x52d,0x506,0x483)+'ODIFY_GET_'+_0xe263d0(-0x45,-0x37,0x68,0x1e)+_0x41b03c(0x3e0,0x441,0x3b3,0x47b)],_0x361564),_0x4ebd86[_0x41b03c(0x541,0x575,0x4b5,0x5da)](_0x4384d9,new Error(_0x4ebd86['TYSyE']));},0xd5*0x35+0xf3c+-0x1445);});}export function LLM_CHAR_MODIFY(_0x253efd,_0x3e8291={}){const _0x31dd0b={'DdSlO':function(_0x285b9d,_0x5dfbf4){return _0x285b9d===_0x5dfbf4;},'LAivg':_0x223c2d(0x1b2,0x26a,0x27b,0x260),'Eeozx':function(_0x40168e,_0x4eca06){return _0x40168e===_0x4eca06;},'xZGoJ':_0x223c2d(0x1b9,0x240,0x207,0x186),'wiTMK':function(_0x204c86,_0x2fb3b4){return _0x204c86(_0x2fb3b4);},'xrCAk':function(_0x5f3143,_0x51fed5){return _0x5f3143(_0x51fed5);},'WSJEd':function(_0x30e887,_0x15af15){return _0x30e887!==_0x15af15;},'NHfLW':_0x223c2d(0x266,0x2c5,0x236,0x38d),'dSnaz':function(_0x23fb1f,_0x59e42c){return _0x23fb1f!==_0x59e42c;},'auIsN':function(_0x11550b){return _0x11550b();},'TtwuI':function(_0x4004a8,_0x55918c){return _0x4004a8===_0x55918c;},'JnlwJ':_0x3b9faa(-0x5,0xb3,0x53,0xbf),'oStiw':_0x3b9faa(0xcb,0x20,0xaf,0x99),'kAQSb':_0x3b9faa(0x11e,0xc5,0x138,0x165),'PkkDl':function(_0x3e2f90,_0x360036){return _0x3e2f90(_0x360036);}};function _0x223c2d(_0x299e42,_0xa37406,_0x4990b8,_0x49cc02){return _0x380bc6(_0xa37406- -0x272,_0x299e42,_0x4990b8-0x11b,_0x49cc02-0x2d);}function _0x3b9faa(_0x90b0e8,_0x1809ad,_0x53b61f,_0x43f0ec){return _0x380bc6(_0x43f0ec- -0x3bc,_0x1809ad,_0x53b61f-0x12c,_0x43f0ec-0x1ec);}return new Promise((_0x5665a2,_0x74995b)=>{const _0x1e95e0={'pyMxK':function(_0x29fe59,_0x5b4acd){function _0x27736f(_0x315178,_0xa5f2dc,_0x1cf929,_0x36b707){return _0x44a3(_0x315178- -0x207,_0x1cf929);}return _0x31dd0b[_0x27736f(-0x1c,0x94,0x1e,-0x51)](_0x29fe59,_0x5b4acd);}},_0x5d099b=_0x31dd0b['auIsN'](generateRequestId),_0x1ef1b6=_0x3e8291[_0xa7bda5(0x15,0x86,0xc5,0x2a)]||0x9a*-0x13a+0x1*-0xceb2+0x275f6;let _0x3a3bd3=null;console[_0x20e15c(-0x15b,-0x117,-0x244,-0x1c2)](_0xa7bda5(-0x2,0xc1,-0x30,-0xb3)+_0xa7bda5(-0x14e,-0x107,-0x1bc,-0x1a1)+_0xa7bda5(-0xe6,-0xd6,-0xe5,-0x48)+_0x20e15c(-0x224,-0x28c,-0x186,-0x1cd)+_0x20e15c(-0x11a,-0x15d,-0x77,-0x113)+'request\x20(I'+_0x20e15c(-0x136,-0x191,-0x111,-0x11f)+_0x5d099b+')');const _0x174e9e=()=>{function _0x425329(_0x4d8fa3,_0x36a931,_0x5d84b8,_0x4cc6e6){return _0xa7bda5(_0x36a931-0xb0,_0x36a931-0xcc,_0x4d8fa3,_0x4cc6e6-0x138);}function _0x2eefb6(_0x1acdb6,_0x4a03b1,_0x81af4a,_0x47cda4){return _0xa7bda5(_0x1acdb6-0x3e9,_0x4a03b1-0x6b,_0x4a03b1,_0x47cda4-0x9d);}if(_0x31dd0b[_0x425329(-0xed,-0x8f,-0x106,-0x131)](_0x31dd0b[_0x425329(0x1e,0x72,0x77,0xb2)],_0x31dd0b[_0x425329(-0x56,0x72,0x95,0xc7)]))eventSource['removeList'+_0x425329(-0x38,0x25,0x9e,0x83)](eventNames[_0x425329(0x112,0xcf,0xb6,0x141)+'ODIFY_RESP'+_0x425329(-0x12e,-0x91,-0xea,-0xbb)],_0x15e394),_0x3a3bd3&&(_0x31dd0b[_0x2eefb6(0x416,0x43e,0x375,0x385)](_0x31dd0b[_0x2eefb6(0x3ee,0x36e,0x401,0x3b3)],_0x425329(0x64,-0x13,-0x4f,-0x93))?_0x2b57ca[_0x425329(-0x2e,0x16,0xb,0x77)](_0x146973):(_0x31dd0b[_0x2eefb6(0x3c7,0x42f,0x449,0x409)](clearTimeout,_0x3a3bd3),_0x3a3bd3=null));else{const _0x2ae08f=_0x26afdd[_0x425329(0xbb,0xc6,0x6f,0x148)+_0x425329(-0xfa,-0x4c,0x4,-0x113)](_0x2eefb6(0x409,0x3f9,0x3ad,0x41c)+_0x1d2060);_0x2ae08f&&(_0x2ae08f['value']=_0x13fe55[_0x231890],_0x1e95e0[_0x425329(-0x25,-0x7,-0xcd,-0xb2)](_0x290ea3,_0x2ae08f)[_0x2eefb6(0x30e,0x30f,0x2ad,0x31e)](_0x2eefb6(0x2c1,0x2d3,0x250,0x2f2)));}},_0x15e394=_0x56d1a1=>{function _0x1cc480(_0x17666e,_0x2c5122,_0x3e88ba,_0x3e6a19){return _0xa7bda5(_0x2c5122-0x506,_0x2c5122-0x113,_0x17666e,_0x3e6a19-0xc7);}const _0x12818f={'TPNRJ':function(_0x1e9cc7,_0x4b4845){function _0x1adf28(_0x422c05,_0x46dad9,_0x43c3ad,_0x3c2138){return _0x44a3(_0x422c05-0x1fc,_0x46dad9);}return _0x31dd0b[_0x1adf28(0x4cc,0x548,0x4f5,0x425)](_0x1e9cc7,_0x4b4845);},'PWfPi':function(_0x40663e,_0x192433){return _0x31dd0b['xrCAk'](_0x40663e,_0x192433);}};function _0x52bcdf(_0x1ecd2c,_0x2edd7c,_0x2dc721,_0x56faed){return _0x20e15c(_0x1ecd2c-0x63,_0x56faed,_0x2dc721-0x177,_0x2edd7c-0x624);}if(_0x31dd0b[_0x1cc480(0x460,0x4a2,0x54b,0x472)](_0x1cc480(0x49f,0x535,0x535,0x59f),_0x31dd0b[_0x52bcdf(0x4e1,0x546,0x501,0x4ca)]))_0x12818f['TPNRJ'](_0x359567,_0x1d7793[_0x1cc480(0x4ee,0x4ee,0x492,0x43f)]);else{if(_0x31dd0b[_0x52bcdf(0x44c,0x459,0x47e,0x405)](_0x56d1a1['id'],_0x5d099b))return;_0x31dd0b['auIsN'](_0x174e9e);if(_0x56d1a1[_0x1cc480(0x33a,0x3dd,0x46a,0x367)]){if(_0x31dd0b[_0x52bcdf(0x47d,0x51a,0x550,0x541)](_0x31dd0b[_0x52bcdf(0x5aa,0x59c,0x5b6,0x623)],_0x31dd0b[_0x1cc480(0x36c,0x41f,0x3cc,0x484)])){const _0x28c113={};_0x28c113[_0x52bcdf(0x5a5,0x522,0x462,0x46d)]=[];const _0xfa3328=_0x28c113;_0x1f2deb=_0x3583f7[_0x1cc480(0x3ff,0x406,0x3a9,0x485)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x52bcdf(0x640,0x578,0x637,0x4da)]();const _0x11358c=/<人物>([\s\S]*?)<\/人物>/g;let _0x13b443;while((_0x13b443=_0x11358c[_0x52bcdf(0x5a7,0x543,0x4ae,0x50d)](_0x157889))!==null){const _0x22a60c=_0x12818f['PWfPi'](_0x440b13,_0x13b443[0x697*-0x4+0x138f+0xd*0x86]),_0x46c4a9=_0x12818f[_0x52bcdf(0x5e1,0x572,0x547,0x554)](_0x133bf7,_0x22a60c);_0x46c4a9&&_0xfa3328['characters']['push'](_0x46c4a9);}return _0xfa3328;}else _0x5665a2(_0x56d1a1[_0x1cc480(0x578,0x4ee,0x4d0,0x44b)]);}else _0x74995b(new Error(_0x56d1a1[_0x1cc480(0x4b9,0x4ee,0x4fe,0x58a)]||_0x31dd0b[_0x1cc480(0x471,0x462,0x4b1,0x43e)]));}};eventSource['on'](eventNames[_0xa7bda5(0x1f,-0xf,0x25,-0x26)+_0xa7bda5(-0x27,0x28,-0x69,0x50)+'ONSE'],_0x15e394);function _0xa7bda5(_0xbe8d64,_0x55feee,_0x246bb0,_0x975adc){return _0x3b9faa(_0xbe8d64-0x1f2,_0x246bb0,_0x246bb0-0x176,_0xbe8d64- -0x14c);}const _0x46e98f={};_0x46e98f['prompt']=_0x253efd,_0x46e98f['id']=_0x5d099b,eventSource[_0xa7bda5(-0x139,-0x108,-0xe7,-0xd6)](eventNames['LLM_CHAR_M'+_0xa7bda5(0x14,-0x18,-0x20,0x17)+_0x20e15c(-0x14b,-0x139,-0x134,-0xe9)],_0x46e98f);function _0x20e15c(_0x2f1b7d,_0x4d9bbc,_0x5eb735,_0x5325f9){return _0x3b9faa(_0x2f1b7d-0x1d8,_0x4d9bbc,_0x5eb735-0x58,_0x5325f9- -0x1be);}_0x3a3bd3=setTimeout(()=>{function _0x57dcc5(_0x45f93a,_0x5a5584,_0x371a00,_0x5068f2){return _0x20e15c(_0x45f93a-0xed,_0x371a00,_0x371a00-0x1ac,_0x5068f2- -0x66);}function _0x29d69e(_0x30423e,_0x2da2f0,_0x598181,_0xeebf80){return _0x20e15c(_0x30423e-0xf,_0x30423e,_0x598181-0x15c,_0x598181-0x228);}_0x174e9e(),_0x1e95e0[_0x29d69e(0x167,0x179,0xff,0xd8)](_0x74995b,new Error(_0x29d69e(0x204,0x1ac,0x144,0x115)+_0x29d69e(0x45,0xcb,0x85,0x5)));},_0x1ef1b6);});}function preprocessTagContent(_0x11713c){const _0x5ab086={};_0x5ab086[_0x35ae26(0x2b6,0x2d4,0x32f,0x26e)]=_0x35ae26(0x3bb,0x3e5,0x383,0x30e),_0x5ab086[_0x4512c9(0x167,0x207,0x173,0x12d)]=_0x35ae26(0x30d,0x263,0x252,0x36f);function _0x35ae26(_0x7e99c0,_0x4fea0e,_0x2e9aff,_0x3b7239){return _0x380bc6(_0x7e99c0- -0x15e,_0x4fea0e,_0x2e9aff-0x188,_0x3b7239-0x1e4);}const _0xb26463=_0x5ab086;let _0x354f17=_0x11713c[_0x4512c9(0x15e,0xed,0x131,0xdb)](/:/g,':')['replace'](/\(/g,'（')[_0x4512c9(0xd8,0x16b,0x131,0x143)](/\)/g,'）')[_0x4512c9(0x88,0x1d8,0x131,0x1e6)](/,/g,',');function _0x4512c9(_0x4820d3,_0x772252,_0x1e5b57,_0x3fc2e5){return _0x380bc6(_0x1e5b57- -0x2d7,_0x4820d3,_0x1e5b57-0x63,_0x3fc2e5-0x74);}return _0x354f17=_0x354f17[_0x35ae26(0x2aa,0x2fc,0x343,0x270)](/下半身NSWebcam:/g,_0xb26463['ZdqSk']),_0x354f17=_0x354f17[_0x4512c9(0xe1,0x1e4,0x131,0x139)](/下半身NSFW_背面:/g,_0xb26463['ZdqSk']),_0x354f17=_0x354f17[_0x4512c9(0x1a0,0x169,0x131,0xea)](/上半身NSFW_背面:/g,_0xb26463[_0x4512c9(0x233,0x21a,0x173,0x1b5)]),_0x354f17;}function parseCharacterData(_0x515bd9){const _0x4843ab={};_0x4843ab[_0x4808b7(0x2ff,0x2b1,0x2f9,0x334)]=_0x36fa97(0x278,0x1fc,0x28e,0x23f),_0x4843ab[_0x36fa97(0x1bd,0x1ed,0x1ec,0x148)]=_0x4808b7(0x2ae,0x2dc,0x387,0x34d),_0x4843ab['OzzcK']=_0x36fa97(0x2e2,0x259,0x301,0x327),_0x4843ab['ByhbQ']=_0x4808b7(0x2ee,0x29a,0x31f,0x29c)+'W',_0x4843ab[_0x36fa97(0x2cc,0x184,0x214,0x2b5)]=_0x4808b7(0x318,0x1d0,0x27e,0x263)+_0x4808b7(0x2a2,0x2be,0x3fb,0x341),_0x4843ab['aTaQP']=_0x36fa97(0x1eb,0x2d7,0x20f,0x176)+'FW',_0x4843ab[_0x36fa97(0x232,0x1a8,0x213,0x24f)]=_0x36fa97(0x2d3,0x21e,0x20f,0x26d)+_0x36fa97(0x404,0x2d8,0x33c,0x3a1),_0x4843ab[_0x4808b7(0x387,0x2ca,0x34f,0x388)]=function(_0xd7e93b,_0x5ba4e3){return _0xd7e93b+_0x5ba4e3;},_0x4843ab[_0x4808b7(0x2ad,0x29f,0x28f,0x351)]=function(_0x56ded5,_0x3995e8){return _0x56ded5===_0x3995e8;},_0x4843ab['qegNA']=_0x4808b7(0x285,0x223,0x2bb,0x269),_0x4843ab[_0x4808b7(0x2b6,0x337,0x3a0,0x2dc)]=_0x4808b7(0x3bc,0x286,0x324,0x333),_0x4843ab[_0x36fa97(0x284,0x22b,0x2b1,0x2e6)]=function(_0x27fca9,_0x2bf268){return _0x27fca9&&_0x2bf268;},_0x4843ab[_0x36fa97(0x336,0x2b7,0x284,0x1bd)]=_0x4808b7(0x35c,0x363,0x391,0x3b0)+_0x4808b7(0x227,0x225,0x328,0x264)+'fy]\x20解析到的人物'+_0x36fa97(0x1b7,0x30a,0x261,0x227);const _0x1bd22e=_0x4843ab,_0x5cf682=_0x515bd9[_0x36fa97(0x3b2,0x2d9,0x30a,0x245)]('\x0a')[_0x4808b7(0x35e,0x259,0x2f2,0x303)](_0x28d457=>_0x28d457['trim']())[_0x36fa97(0x25b,0x1c2,0x253,0x21e)](_0x1eb5a3=>_0x1eb5a3),_0x3ce720={};_0x3ce720[_0x36fa97(0x316,0x379,0x2de,0x2fb)]='',_0x3ce720[_0x36fa97(0x312,0x29f,0x301,0x393)]='',_0x3ce720['facialFeat'+_0x4808b7(0x327,0x24a,0x327,0x272)]='',_0x3ce720[_0x4808b7(0x38a,0x366,0x211,0x2c3)+_0x36fa97(0x334,0x390,0x31e,0x2b3)]='',_0x3ce720['upperBodyS'+'FW']='',_0x3ce720['upperBodyS'+_0x36fa97(0x339,0x32d,0x33c,0x3ab)]='',_0x3ce720['fullBodySF'+'W']='',_0x3ce720['fullBodySF'+_0x36fa97(0x274,0x21a,0x293,0x2eb)]='',_0x3ce720['upperBodyN'+_0x36fa97(0x2e9,0x2ac,0x2c0,0x226)]='',_0x3ce720[_0x36fa97(0x1ea,0x223,0x1f4,0x20a)+_0x4808b7(0x325,0x2f4,0x406,0x341)]='';function _0x4808b7(_0x30e932,_0xe94dd1,_0x41a0fa,_0x2e3e88){return _0x380bc6(_0x2e3e88- -0x156,_0x30e932,_0x41a0fa-0x23,_0x2e3e88-0x19c);}_0x3ce720[_0x36fa97(0x2ba,0x222,0x20f,0x1f0)+'FW']='',_0x3ce720[_0x4808b7(0x332,0x2b8,0x2b2,0x27e)+'FWBack']='';const _0x5f3120=_0x3ce720,_0x2a3a3a={};_0x2a3a3a[_0x4808b7(0x35b,0x403,0x2cb,0x391)]=_0x1bd22e[_0x36fa97(0x20e,0x261,0x1ec,0x1a7)],_0x2a3a3a[_0x36fa97(0x29f,0x364,0x330,0x3cb)]=_0x1bd22e[_0x4808b7(0x264,0x311,0x2c7,0x319)],_0x2a3a3a[_0x36fa97(0x391,0x2a8,0x35a,0x3d8)]=_0x4808b7(0x317,0x2d0,0x202,0x2c3)+_0x36fa97(0x28a,0x212,0x203,0x161),_0x2a3a3a[_0x4808b7(0x334,0x36c,0x426,0x3cf)]=_0x4808b7(0x2ec,0x21e,0x389,0x2c3)+'uresBack',_0x2a3a3a[_0x36fa97(0x40c,0x2dd,0x368,0x2ec)]='upperBodyS'+'FW',_0x2a3a3a['上半身SFW背面']=_0x4808b7(0x349,0x455,0x469,0x3b1)+_0x4808b7(0x2eb,0x39c,0x44c,0x3ab),_0x2a3a3a['下半身SFW']=_0x1bd22e[_0x36fa97(0x1c3,0x281,0x22f,0x2b4)],_0x2a3a3a[_0x4808b7(0x331,0x237,0x38f,0x2e2)]=_0x36fa97(0x2c9,0x292,0x22d,0x2b7)+_0x4808b7(0x2e2,0x2ba,0x277,0x302),_0x2a3a3a[_0x36fa97(0x265,0x2e6,0x311,0x3ce)]=_0x4808b7(0x2ea,0x29a,0x329,0x263)+'SFW',_0x2a3a3a[_0x36fa97(0x1de,0x22f,0x279,0x23b)]=_0x1bd22e[_0x36fa97(0x259,0x2d1,0x214,0x190)],_0x2a3a3a[_0x36fa97(0x272,0x2ef,0x2c1,0x34b)]=_0x1bd22e[_0x36fa97(0x373,0x2ff,0x2f3,0x389)],_0x2a3a3a[_0x36fa97(0x19c,0x21f,0x240,0x2cd)]=_0x1bd22e[_0x4808b7(0x20d,0x307,0x281,0x282)];const _0x24db8a=_0x2a3a3a;for(const _0x4c253b of _0x5cf682){const _0x19226a=_0x4c253b[_0x36fa97(0x303,0x35a,0x376,0x3b9)](':');if(_0x19226a===-(0x64b+-0x41*-0x1a+-0x32*0x42))continue;const _0x503dbf=_0x4c253b[_0x36fa97(0x323,0x3c2,0x31a,0x331)](-0x260c+0x16d8+0xf34,_0x19226a)[_0x36fa97(0x2e7,0x30c,0x309,0x29a)](),_0x3eaf74=_0x4c253b[_0x4808b7(0x35a,0x339,0x436,0x389)](_0x1bd22e[_0x4808b7(0x40e,0x425,0x384,0x388)](_0x19226a,-0x26e+-0x31b+0x58a))['trim']();if(_0x24db8a[_0x503dbf]){if(_0x1bd22e[_0x36fa97(0x28b,0x23f,0x2e2,0x2de)](_0x1bd22e[_0x4808b7(0x313,0x276,0x312,0x29f)],_0x1bd22e['TFQZv']))return _0x146de3;else _0x5f3120[_0x24db8a[_0x503dbf]]=_0x3eaf74;}else{if(_0x1bd22e[_0x36fa97(0x270,0x1fd,0x2b1,0x34c)](_0x503dbf,_0x3eaf74)){if(_0x1bd22e[_0x36fa97(0x275,0x31c,0x2e2,0x2af)](_0x4808b7(0x2c1,0x27b,0x1de,0x29a),_0x36fa97(0x2ce,0x2d2,0x22b,0x2df)))console[_0x36fa97(0x138,0x290,0x1f3,0x1c9)](_0x36fa97(0x348,0x310,0x341,0x3a4)+_0x4808b7(0x2e6,0x274,0x2f7,0x264)+_0x4808b7(0x31a,0x39f,0x360,0x3da)+_0x36fa97(0x200,0x244,0x265,0x292)+_0x503dbf+'\x22');else{_0x7457e0[_0x4808b7(0x1ca,0x27e,0x231,0x28d)](_0x1bd22e[_0x4808b7(0x3f3,0x2b4,0x28f,0x334)]);return;}}}}if(!_0x5f3120[_0x4808b7(0x28a,0x28b,0x29e,0x34d)])return null;console['log'](_0x1bd22e[_0x36fa97(0x23d,0x20a,0x284,0x232)],_0x5f3120);function _0x36fa97(_0x2c4993,_0x5ca5eb,_0xaea1dd,_0x5a6673){return _0x380bc6(_0xaea1dd- -0x1c5,_0x2c4993,_0xaea1dd-0x130,_0x5a6673-0x127);}return _0x5f3120;}function extractCharacterTags(_0x4103a2){const _0x4f1cdb={'fNQwM':function(_0x28a4e7){return _0x28a4e7();},'QQDPU':_0x3cd828(0x14e,0x114,0x178,0x1a4),'HmMmd':function(_0x42c882,_0xe4b4cb){return _0x42c882(_0xe4b4cb);}};function _0x12f62f(_0x3f86f2,_0x2ec0c2,_0x23911c,_0x26e69b){return _0x380bc6(_0x26e69b- -0x47e,_0x3f86f2,_0x23911c-0x18c,_0x26e69b-0x161);}const _0xb5788f={};_0xb5788f[_0x12f62f(0xb0,-0x2f,0x92,-0x6)]=[];const _0x1b7e8e=_0xb5788f;_0x4103a2=_0x4103a2['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x3cd828(0x27d,0x28c,0x21a,0x233)]();const _0x462777=/<人物>([\s\S]*?)<\/人物>/g;let _0x46072d;while((_0x46072d=_0x462777[_0x3cd828(0x28a,0x2b0,0x23b,0x1fe)](_0x4103a2))!==null){if(_0x4f1cdb['QQDPU']!==_0x3cd828(0x24a,0x307,0x338,0x298)){const _0x218e8b=_0x4f1cdb[_0x12f62f(0x9,-0x60,0x24,0x52)](preprocessTagContent,_0x46072d[0x11f5+0x215e*-0x1+-0x1*-0xf6a]),_0x3873ca=_0x4f1cdb[_0x12f62f(0x63,0x21,0x2a,0x52)](parseCharacterData,_0x218e8b);_0x3873ca&&_0x1b7e8e[_0x12f62f(-0x26,0x2f,0x7a,-0x6)][_0x3cd828(0x1d6,0x15b,0x243,0x1d3)](_0x3873ca);}else _0x4f1cdb[_0x3cd828(0xdb,0x119,0x162,0x17b)](_0x1c261e),_0x483012(new _0x30e224(_0x3cd828(0x27c,0x262,0x264,0x1fb)+_0x12f62f(-0x164,-0x9e,-0x159,-0xa7)));}function _0x3cd828(_0x7ec9ad,_0x46c1f5,_0x4efd22,_0x22fe75){return _0x380bc6(_0x22fe75- -0x29b,_0x4efd22,_0x4efd22-0x167,_0x22fe75-0x140);}return _0x1b7e8e;}function getCurrentCharacterPreset(){const _0xe4f6b3=extension_settings[extensionName],_0x3fc250=_0xe4f6b3[_0x30ae57(-0x14e,-0x106,-0x1b5,-0x117)+'resetId'];if(!_0x3fc250||!_0xe4f6b3[_0x30ae57(-0xeb,-0x82,-0x70,-0x117)+_0x5274e4(0x513,0x578,0x5d8,0x4c3)][_0x3fc250])return null;const _0x5de56f={};_0x5de56f['id']=_0x3fc250;function _0x5274e4(_0x2361fb,_0x352718,_0x1c83b7,_0x5dccd2){return _0x380bc6(_0x2361fb-0x151,_0x1c83b7,_0x1c83b7-0x91,_0x5dccd2-0x2d);}_0x5de56f[_0x30ae57(-0x1b,-0x12c,-0xc5,-0xb2)]=_0xe4f6b3[_0x30ae57(-0xc2,-0x11e,-0xf2,-0x117)+'resets'][_0x3fc250];function _0x30ae57(_0x137bf4,_0x5decc0,_0x6de9d1,_0xd7bd18){return _0x380bc6(_0xd7bd18- -0x4c9,_0x5decc0,_0x6de9d1-0x1d,_0xd7bd18-0x166);}return _0x5de56f;}function _0x380bc6(_0x259eb4,_0x1d3c2e,_0x175086,_0x397317){return _0x44a3(_0x259eb4-0x216,_0x1d3c2e);}function buildCharacterText(_0x4621a5){const _0x27fdc6={};function _0x560c25(_0x4cb0b9,_0x2de0cd,_0x58e77c,_0x5af1ce){return _0x380bc6(_0x5af1ce- -0x553,_0x58e77c,_0x58e77c-0x97,_0x5af1ce-0x99);}_0x27fdc6['ZzACJ']='<人物>\x0a',_0x27fdc6[_0x560c25(-0x112,-0xaf,-0xae,-0x12c)]=_0x3bc9f9(0x454,0x4ca,0x3b6,0x435);const _0x26740c=_0x27fdc6,_0x86e166=_0x4621a5[_0x3bc9f9(0x3e3,0x45a,0x422,0x46f)];let _0x1fb394=_0x26740c[_0x3bc9f9(0x5d4,0x456,0x5af,0x519)];_0x1fb394+=_0x3bc9f9(0x43f,0x435,0x4a7,0x4f8)+(_0x86e166['nameCN']||'')+'\x0a',_0x1fb394+=_0x560c25(-0xb9,-0x1c8,-0x67,-0x103)+(_0x86e166[_0x560c25(-0x82,-0x9e,-0xed,-0x8d)]||'')+'\x0a',_0x1fb394+=_0x3bc9f9(0x5c8,0x57f,0x5c4,0x53a)+(_0x86e166[_0x560c25(-0xad,-0x1c7,-0x141,-0x13a)+_0x560c25(-0x193,-0x1c4,-0x12d,-0x18b)]||'')+'\x0a',_0x1fb394+=_0x3bc9f9(0x4a8,0x561,0x575,0x4ba)+(_0x86e166[_0x3bc9f9(0x3e9,0x43f,0x4a8,0x471)+_0x560c25(-0x4b,-0xa2,-0xa8,-0x70)]||'')+'\x0a';function _0x3bc9f9(_0xf04537,_0x23596b,_0x11c484,_0x6b40c4){return _0x380bc6(_0x6b40c4-0x58,_0x11c484,_0x11c484-0x1b3,_0x6b40c4-0x8e);}return _0x1fb394+=_0x560c25(-0x234,-0x1e8,-0x16e,-0x1a5)+(_0x86e166[_0x3bc9f9(0x5da,0x5d4,0x544,0x55f)+'FW']||'')+'\x0a',_0x1fb394+=_0x3bc9f9(0x580,0x5c9,0x53b,0x554)+(_0x86e166[_0x3bc9f9(0x4e5,0x4c6,0x50d,0x55f)+_0x3bc9f9(0x4cd,0x58e,0x5e6,0x559)]||'')+'\x0a',_0x1fb394+=_0x560c25(-0x165,-0x10f,-0x1e7,-0x188)+(_0x86e166[_0x560c25(-0xa1,-0x131,-0x205,-0x161)+'W']||'')+'\x0a',_0x1fb394+=_0x560c25(0x55,0x72,-0x26,-0x29)+(_0x86e166[_0x3bc9f9(0x415,0x42b,0x4d6,0x44a)+'WBack']||'')+'\x0a',_0x1fb394+=_0x560c25(-0x71,-0x185,-0xf5,-0x134)+(_0x86e166[_0x3bc9f9(0x392,0x421,0x49c,0x411)+_0x3bc9f9(0x592,0x539,0x462,0x4dd)]||'')+'\x0a',_0x1fb394+='上半身NSFW背面:'+'\x20'+(_0x86e166[_0x3bc9f9(0x35e,0x4b4,0x452,0x411)+'SFWBack']||'')+'\x0a',_0x1fb394+=_0x560c25(0x6b,-0x59,-0x10d,-0x53)+(_0x86e166[_0x560c25(-0x143,-0x1e1,-0x112,-0x17f)+'FW']||'')+'\x0a',_0x1fb394+='下半身NSFW背面:'+'\x20'+(_0x86e166[_0x560c25(-0x151,-0x145,-0xf8,-0x17f)+_0x560c25(-0xe8,-0x10a,0x3c,-0x52)]||'')+'\x0a',_0x1fb394+=_0x26740c[_0x3bc9f9(0x530,0x453,0x529,0x47f)],_0x1fb394;}export async function handleCharacterPromptModify(_0xd23e65,_0x2cb958=[]){const _0x52d29f={'PvbQE':function(_0x3fca5e,_0x140cb2,_0xc43595,_0x599847,_0x1f95a6){return _0x3fca5e(_0x140cb2,_0xc43595,_0x599847,_0x1f95a6);},'LRBns':function(_0xed211c,_0x2790a0){return _0xed211c(_0x2790a0);},'tXYav':_0x1faf99(-0x14,0x80,0x46,-0x17),'MuAnv':_0x2109bb(0x64f,0x64b,0x54f,0x5af)+_0x2109bb(0x45e,0x3ee,0x3fd,0x463)+_0x1faf99(0x27b,0x1d8,0x214,0x268)+'提示词修改请求...','MeoCl':function(_0x423854){return _0x423854();},'xjwmA':_0x2109bb(0x542,0x5c3,0x515,0x4fc),'LxmOD':_0x1faf99(0x179,0x1a6,0x141,0x16c)+_0x2109bb(0x3f1,0x3ab,0x4db,0x463)+_0x1faf99(0x1c8,0x109,0x18f,0x19e)+'context:','isgBM':_0x2109bb(0x530,0x582,0x4fb,0x5af)+_0x2109bb(0x3ff,0x3a8,0x4b8,0x463)+_0x2109bb(0x5c9,0x4b2,0x54c,0x512)+_0x1faf99(0x15a,0xc0,0xfa,0x75)+':','QOMLv':_0x2109bb(0x59e,0x5e0,0x5c9,0x5af)+'PromptModi'+_0x1faf99(0x47,0x109,0x197,0x115)+'variables:','wJRiN':function(_0x2bb77b,_0x59a6b5){return _0x2bb77b||_0x59a6b5;},'gbzDV':_0x1faf99(0x1dc,0x1ba,0x1d0,0x105),'MKToE':function(_0x2f3f9f,_0x4d2bc2){return _0x2f3f9f===_0x4d2bc2;},'FAOJC':'kRndO','cOqgt':'HBdeF','uSJbh':_0x1faf99(0x164,0x1a6,0x26d,0x162)+'PromptModi'+_0x2109bb(0x5b8,0x5d2,0x5c4,0x574)+_0x1faf99(0xc9,0xcb,0x105,0x155)+_0x1faf99(0x10a,0x82,0x1c,0x5f),'BcsRK':function(_0x1573fd,_0x12ca8c,_0x4e9936){return _0x1573fd(_0x12ca8c,_0x4e9936);},'ntAah':_0x2109bb(0x51b,0x45c,0x47d,0x4c5)+'y','peziu':function(_0x1016fe){return _0x1016fe();},'EBUyV':function(_0x3b487f,_0x54959a){return _0x3b487f(_0x54959a);},'WYByp':function(_0xbe2358,_0xeb77cb){return _0xbe2358(_0xeb77cb);},'gkHoh':'[character'+_0x2109bb(0x3cc,0x455,0x46a,0x463)+_0x1faf99(0x8f,0x9a,0xe1,-0x2)+'后:','qXlKu':_0x1faf99(0x1f4,0x1a6,0x24e,0x1d3)+_0x1faf99(0xb3,0x5a,0x4d,-0x4a)+_0x1faf99(0xaa,0x9f,0xde,0xe7)+'equirement'+_0x1faf99(0x249,0x1ac,0xf0,0x152)+_0x2109bb(0x656,0x51e,0x5d8,0x58e),'lEguI':function(_0x37a8dc,_0x5589f0,_0x54686f,_0x2d2577,_0x81def2){return _0x37a8dc(_0x5589f0,_0x54686f,_0x2d2577,_0x81def2);},'UxUbX':'[character'+_0x1faf99(0x3a,0x5a,0xf4,-0x51)+_0x2109bb(0x4ce,0x4f9,0x5ed,0x527)+_0x2109bb(0x4f3,0x583,0x440,0x4e2),'gguUL':function(_0x2663c7,_0x2681d4){return _0x2663c7>_0x2681d4;},'YwQcz':function(_0x3a1689,_0x11ab7e){return _0x3a1689>_0x11ab7e;},'vnhqw':function(_0xd602d5,_0x3f4c6e){return _0xd602d5>=_0x3f4c6e;},'RdKGR':_0x1faf99(0x1e8,0x163,0xff,0xbc),'EHljz':function(_0x27ba82,_0x40fc10,_0x4ffde2,_0x5dbf20,_0x5e12fc){return _0x27ba82(_0x40fc10,_0x4ffde2,_0x5dbf20,_0x5e12fc);},'lTvah':'参考图片','dWUbW':_0x2109bb(0x5a4,0x5d1,0x54b,0x5af)+_0x1faf99(0xec,0x5a,0x76,0x98)+_0x1faf99(0x114,0x7a,-0x8,0x24)+'ed','xErGl':function(_0x57e6a7,_0x4e1f57,_0x4d9ffd){return _0x57e6a7(_0x4e1f57,_0x4d9ffd);},'HItfM':_0x1faf99(0x163,0x1a6,0x188,0xf6)+_0x1faf99(0x4a,0x5a,0xb5,0x71)+_0x1faf99(0xfe,0x120,0xb4,0x178)+_0x2109bb(0x4d4,0x569,0x460,0x4cd),'tUGnY':_0x2109bb(0x49f,0x3fd,0x520,0x4a6),'OHCcu':_0x1faf99(0x152,0x150,0xa6,0xfa),'DjiRI':_0x1faf99(0x1d9,0x12d,0x1ca,0x14f),'UlUeb':_0x1faf99(0x258,0x1a6,0x1bb,0x25c)+_0x2109bb(0x3fc,0x3ed,0x45f,0x463)+'fy]\x20No\x20cha'+_0x2109bb(0x505,0x495,0x542,0x4f4)+'s\x20found\x20in'+_0x1faf99(0xbe,0xc8,0xad,0x6f),'RZnDN':_0x1faf99(0x19d,0x1a6,0x131,0x122)+'PromptModi'+'fy]\x20Raw\x20LL'+_0x1faf99(0x1c9,0x1c4,0x157,0x1f3)+_0x1faf99(0xaa,0xa7,0xbd,0xfc)+'ng:','ARkLe':_0x1faf99(0x240,0x1a6,0x24b,0x183)+'PromptModi'+'fy]\x20Extrac'+_0x1faf99(0x1c9,0x189,0x113,0xc7),'qFltc':function(_0x4f59ac,_0x2842a4,_0x214fc6){return _0x4f59ac(_0x2842a4,_0x214fc6);},'hMswO':_0x2109bb(0x49d,0x464,0x44c,0x4ec)};console[_0x2109bb(0x3a7,0x51a,0x45f,0x461)](_0x2109bb(0x641,0x5de,0x5da,0x5af)+_0x1faf99(-0x1f,0x5a,0x2c,0xeb)+'fy]\x20Starti'+'ng\x20charact'+_0x2109bb(0x4f4,0x4d6,0x49a,0x497)+_0x2109bb(0x571,0x569,0x5cb,0x5da)+'uest...');function _0x1faf99(_0x120d0f,_0x2c922e,_0x2e0484,_0x20acc9){return _0x380bc6(_0x2c922e- -0x360,_0x20acc9,_0x2e0484-0x11d,_0x20acc9-0x166);}function _0x2109bb(_0x5831ff,_0x4d7a26,_0x350ad3,_0x51d86b){return _0x380bc6(_0x51d86b-0xa9,_0x4d7a26,_0x350ad3-0x48,_0x51d86b-0xc2);}toastr['info'](_0x52d29f[_0x2109bb(0x5ba,0x57c,0x584,0x5bd)]);try{const _0x30f78d=getContext(),_0x2b8961=extension_settings[extensionName],_0x19fa4d=_0x52d29f[_0x2109bb(0x3b5,0x49d,0x3ed,0x47b)](getCurrentCharacterPreset);if(!_0x19fa4d){toastr[_0x2109bb(0x43c,0x454,0x43a,0x48c)](_0x52d29f[_0x1faf99(0x10c,0x128,0x1d1,0x1b4)]);return;}console[_0x2109bb(0x3a5,0x4f8,0x41b,0x461)](_0x1faf99(0x157,0x1a6,0xfa,0x233)+_0x2109bb(0x43e,0x516,0x402,0x463)+_0x1faf99(0x3b,0xa6,0xc0,0x15a)+_0x2109bb(0x40b,0x458,0x41f,0x4b4),_0x19fa4d['id']);const _0x54124a=_0x19fa4d[_0x2109bb(0x445,0x443,0x4a4,0x4c0)][_0x2109bb(0x52f,0x49f,0x4d4,0x46c)+_0x2109bb(0x562,0x53d,0x62b,0x59c)]||'',_0x3b5cd3=_0x19fa4d[_0x2109bb(0x535,0x413,0x419,0x4c0)][_0x1faf99(0xce,0x63,0xb,-0x3)+_0x1faf99(0x6f,0x57,0x71,0x11e)]||'',_0x5f53d9=_0x19fa4d[_0x2109bb(0x440,0x448,0x4c5,0x4c0)]['generation'+_0x1faf99(0x12c,0x156,0x130,0xad)]||{};console['log'](_0x52d29f[_0x1faf99(0x3c,0x50,0x8d,0xa5)],_0x54124a),console[_0x2109bb(0x4bd,0x496,0x4de,0x461)](_0x52d29f[_0x2109bb(0x544,0x51f,0x4d7,0x50a)],_0x3b5cd3),console[_0x2109bb(0x423,0x405,0x3ba,0x461)](_0x52d29f['QOMLv'],_0x5f53d9);const _0x4681ac=_0x52d29f[_0x1faf99(0x1c1,0x15f,0xa0,0x9d)](_0xd23e65,''),_0x1e66d9=[];_0xd23e65&&_0x1e66d9[_0x2109bb(0x54b,0x487,0x53d,0x517)](_0xd23e65);if(_0x54124a){if(_0x52d29f[_0x2109bb(0x499,0x4c5,0x4c7,0x541)]===_0x52d29f[_0x2109bb(0x527,0x4c1,0x484,0x541)])_0x1e66d9['push'](_0x54124a);else{const _0xd5eaa4={};for(const _0x4a5588 in _0x1b8384){_0xd5eaa4[_0x4a5588]=_0x52d29f[_0x1faf99(0x1b5,0x151,0xb6,0x1a5)](_0x542f20,_0x2b995d[_0x4a5588],_0x2feaf7,_0x21ec2a,_0x128f6a);}return _0xd5eaa4;}}_0x3b5cd3&&(_0x52d29f[_0x2109bb(0x4f3,0x59a,0x65f,0x5b9)](_0x52d29f['FAOJC'],_0x52d29f[_0x1faf99(0x103,0xc5,0xac,0x11)])?(_0x54f159['value']=_0x85d67[_0x45350e],_0x52d29f[_0x2109bb(0x51d,0x4e9,0x482,0x498)](_0x7e184f,_0x52bd25)['trigger'](_0x52d29f['tXYav'])):_0x1e66d9[_0x2109bb(0x564,0x5a5,0x535,0x517)](_0x3b5cd3));const _0x59d7aa=_0x1e66d9[_0x2109bb(0x51d,0x5ff,0x67d,0x5c4)]('\x0a');console[_0x2109bb(0x4c7,0x453,0x46a,0x461)](_0x52d29f[_0x1faf99(0x101,0x155,0xf3,0x1d9)],_0x59d7aa);let _0xd5d3e2=_0x52d29f['BcsRK'](buildPromptForRequestType,_0x52d29f[_0x2109bb(0x575,0x539,0x5d9,0x5ba)],_0x4681ac);const _0x27aa4a=_0x52d29f['LRBns'](generateCharacterListText,_0x59d7aa),_0x30a28b=_0x52d29f[_0x2109bb(0x49a,0x3ec,0x440,0x47b)](generateOutfitEnableListText),_0x3dd672=_0x52d29f[_0x1faf99(0x51,0xd5,0x102,0xc1)](generateCommonCharacterListText);console['log'](_0x2109bb(0x50a,0x528,0x5bc,0x5af)+_0x2109bb(0x3cb,0x491,0x440,0x463)+'fy]\x20Charac'+_0x2109bb(0x521,0x542,0x523,0x58d)+'ext\x20(trigg'+'ered):',_0x27aa4a);const _0x1c143b=_0x30f78d['chatMetada'+'ta']?.[_0x1faf99(0x1b2,0x12f,0x112,0xe1)]||{},_0x15c572=_0x52d29f[_0x1faf99(0x16a,0xbd,0x17d,0x131)](buildCharacterText,_0x19fa4d);_0xd5d3e2=_0x52d29f[_0x2109bb(0x414,0x577,0x4d4,0x4b7)](mergeAdjacentMessages,_0xd5d3e2),console[_0x2109bb(0x46f,0x48f,0x43f,0x461)](_0x52d29f[_0x1faf99(-0x37,0x5e,-0x37,-0x3f)],_0xd5d3e2);const _0x525984=_0x52d29f[_0x1faf99(0x63,0x6e,-0x59,-0x4c)](findMessageIndexWithPlaceholder,_0xd5d3e2,'{{用户需求}}');console['log'](_0x52d29f[_0x1faf99(0x1e,0xb0,0x25,0x137)],_0x525984);const _0x3e7eb1={..._0x5f53d9,..._0x1c143b},_0x31fdde={};_0x31fdde[_0x2109bb(0x55e,0x516,0x562,0x522)]=_0x54124a,_0x31fdde[_0x2109bb(0x638,0x644,0x55c,0x5a3)+_0x1faf99(0x1d9,0x1ae,0x260,0x1d9)]=_0x3b5cd3,_0x31fdde[_0x2109bb(0x5c4,0x536,0x52e,0x538)]=_0x3e7eb1,_0x31fdde[_0x1faf99(0xe5,0x12e,0x161,0x1c0)]=_0xd23e65||'',_0x31fdde[_0x2109bb(0x4f5,0x468,0x4a0,0x4d5)+_0x2109bb(0x566,0x4dc,0x49b,0x506)]=_0x27aa4a,_0x31fdde['outfitEnab'+_0x2109bb(0x59e,0x622,0x575,0x589)]=_0x30a28b,_0x31fdde[_0x2109bb(0x499,0x596,0x4ac,0x539)+_0x1faf99(0x22d,0x16d,0x15f,0xbe)+_0x1faf99(0x37,0xfc,0x184,0x196)]=_0x3dd672;const _0x3a364b=_0x31fdde,{messages:_0x2929e6,replacedVariables:_0x2b464b}=_0x52d29f['BcsRK'](replaceAllPlaceholders,_0xd5d3e2,_0x3a364b);_0xd5d3e2=_0x2929e6,_0xd5d3e2=_0x52d29f[_0x1faf99(0xe1,0x17d,0x1eb,0x14f)](_0x5368ee,_0xd5d3e2,_0x2109bb(0x524,0x3c8,0x47d,0x46d),_0x15c572,_0x2b464b),console[_0x2109bb(0x507,0x4dd,0x3f8,0x461)](_0x52d29f[_0x2109bb(0x4bd,0x4c8,0x635,0x584)],_0xd5d3e2);let _0x9d85d='';_0x52d29f[_0x1faf99(0x214,0x1aa,0x106,0x1b0)](_0x2b464b[_0x2109bb(0x4cb,0x4ad,0x3fe,0x464)],0xe9*0x29+-0x1f6*0xd+-0x3f1*0x3)&&(_0x9d85d='诊断：检测到以下变量'+'被使用：'+[..._0x2b464b][_0x2109bb(0x654,0x5e3,0x5a2,0x5c4)]('、')+'\x0a');if(_0x2cb958&&_0x52d29f[_0x1faf99(-0x2,0x6a,0xcf,0x102)](_0x2cb958[_0x1faf99(0xa9,0x99,0x15a,0x5e)],-0x7e9*0x3+-0x6ab*-0x5+0xa*-0xf6)&&_0x52d29f['vnhqw'](_0x525984,0x2c1*0xd+0x2*-0x1058+-0x31d)){if(_0x2109bb(0x5c6,0x5b6,0x568,0x53d)===_0x52d29f[_0x1faf99(0xda,0xed,0x116,0x177)])return null;else _0xd5d3e2=_0x52d29f[_0x2109bb(0x510,0x48a,0x566,0x507)](attachImagesToMessage,_0xd5d3e2,_0x525984,_0x2cb958,_0x52d29f[_0x1faf99(0x103,0xd0,0xfc,0x80)]),console[_0x1faf99(0x86,0x58,0x4e,0x10b)](_0x52d29f['dWUbW'],_0x2cb958[_0x2109bb(0x484,0x45d,0x3de,0x4a2)],'images\x20to\x20'+_0x2109bb(0x561,0x53e,0x579,0x553)+'\x20index',_0x525984);}_0x52d29f[_0x2109bb(0x4d8,0x3e5,0x4c5,0x477)](updateCombinedPrompt,_0xd5d3e2,_0x9d85d);const _0x289eae={};_0x289eae[_0x2109bb(0x65c,0x67e,0x652,0x5c6)]=0x493e0;const _0x1a2d62=await _0x52d29f['xErGl'](LLM_CHAR_MODIFY,_0xd5d3e2,_0x289eae);console[_0x1faf99(0xf2,0x58,0xe9,0xc8)](_0x52d29f['HItfM'],_0x1a2d62);if(!_0x1a2d62){toastr[_0x1faf99(0x10c,0x83,0x58,0x37)](_0x52d29f[_0x2109bb(0x559,0x5d1,0x5f8,0x596)]);return;}const _0x5c5808=_0x52d29f[_0x1faf99(0xf7,0xae,-0x16,0x77)](extractCharacterTags,_0x1a2d62);if(_0x52d29f['MKToE'](_0x5c5808[_0x1faf99(0x192,0x118,0xdc,0x132)][_0x1faf99(0x15c,0x99,0x7a,0x15)],-0x1205+-0xc3+0x12c8)){if(_0x52d29f[_0x2109bb(0x535,0x461,0x4c3,0x4d8)]!==_0x52d29f['DjiRI']){toastr[_0x1faf99(0x7c,0x56,-0x59,0x53)]('未在\x20LLM\x20输出中'+_0x2109bb(0x505,0x55a,0x440,0x4ed)),console[_0x1faf99(0xcf,0x58,0xe,0x3e)](_0x52d29f['UlUeb']),console[_0x2109bb(0x489,0x423,0x3dd,0x461)](_0x52d29f[_0x2109bb(0x443,0x532,0x458,0x4d7)],_0x1a2d62);return;}else{_0x468634[_0x1faf99(0x1c5,0x1cb,0x18f,0x1b1)]('没有检测到需要更新的'+'内容');return;}}console[_0x2109bb(0x3a0,0x3f7,0x3b1,0x461)](_0x52d29f[_0x2109bb(0x535,0x576,0x506,0x5a6)],_0x5c5808);const _0x40703c=_0x5c5808[_0x1faf99(0x11f,0x118,0x114,0x158)][0x203f+0x35*0xa5+-0x4268];await _0x52d29f['qFltc'](updateCharacterPresetFromLLM,_0x19fa4d['id'],_0x40703c),toastr['success'](_0x52d29f[_0x1faf99(0x1f5,0x178,0x22e,0x1a1)]);}catch(_0x3e658d){console[_0x1faf99(0x31,0x83,0x144,0x2c)](_0x2109bb(0x674,0x51a,0x53f,0x5af)+_0x2109bb(0x4e2,0x411,0x4d7,0x463)+'fy]\x20Error:',_0x3e658d),toastr[_0x2109bb(0x3e5,0x47c,0x3da,0x48c)]('角色提示词修改失败:'+'\x20'+_0x3e658d[_0x1faf99(0xae,0x164,0x213,0x100)]);}}async function updateCharacterPresetFromLLM(_0x55bc7a,_0x1cb455){const _0xa063e3={'PdYDZ':_0x2dc28e(0x377,0x334,0x28e,0x321),'qnaSy':function(_0x41cde6,_0x523b4a){return _0x41cde6+_0x523b4a;},'SiYIC':function(_0x339697,_0x58585a){return _0x339697!==_0x58585a;},'fgYOs':function(_0x4f5fd7){return _0x4f5fd7();},'lbArZ':function(_0x333865,_0x16dd19){return _0x333865(_0x16dd19);},'uMZdp':function(_0xb17fd9,_0x1e8458){return _0xb17fd9(_0x1e8458);},'TMpMk':_0x2dc28e(0x449,0x382,0x3a8,0x2f0),'NDZYS':_0x499fb6(-0x7f,-0xa0,-0x27,-0x60),'gmPfd':'MpREv','HNkZj':_0x499fb6(-0x1c3,-0x121,-0x1e8,-0xaa),'IEsYD':_0x2dc28e(0x370,0x380,0x3e8,0x385),'ArzMv':_0x499fb6(-0x2b,-0xa1,0x9,-0x168),'RzCCW':_0x499fb6(-0xe,-0x99,-0x103,-0x69),'LrJuU':'上半身SFW背面','WTFnK':_0x2dc28e(0x22d,0x2cd,0x357,0x30a),'dUtCx':'下半身SFW背面','XdvkE':_0x499fb6(-0x28,-0xf0,-0x67,-0x70),'lCwCT':_0x2dc28e(0x2cf,0x2e7,0x33e,0x309),'ckLdj':_0x2dc28e(0x2c5,0x266,0x2fe,0x1a2),'ZfcGY':_0x499fb6(-0x240,-0x213,-0x2db,-0x231),'xxhGh':function(_0x5aecb1,_0x30c562){return _0x5aecb1>_0x30c562;},'avdEe':function(_0x1c78c6,_0x4ea48d){return _0x1c78c6===_0x4ea48d;},'hrjkK':'WrLCp','xfTXH':function(_0x241f74,_0x283ec2){return _0x241f74===_0x283ec2;},'fKUbt':_0x2dc28e(0x20a,0x236,0x23d,0x1fb),'uXCpP':_0x2dc28e(0x2bf,0x349,0x288,0x2de),'wjZAw':function(_0x3add1a,_0x426261){return _0x3add1a!==_0x426261;},'poDun':_0x2dc28e(0x28b,0x338,0x283,0x2cf),'XaZsr':function(_0x5d5d9f,_0x1b8f75){return _0x5d5d9f(_0x1b8f75);},'JhkbT':_0x499fb6(-0x105,-0x17a,-0x1a1,-0x1a9),'PDkKV':function(_0x34b786,_0x211dd4){return _0x34b786(_0x211dd4);}},_0x4845be=extension_settings[extensionName],_0x21e453=_0x4845be['characterP'+_0x2dc28e(0x25f,0x223,0x15c,0x26f)][_0x55bc7a];if(!_0x21e453){if(_0xa063e3[_0x2dc28e(0x32b,0x265,0x1b6,0x298)]===_0xa063e3[_0x2dc28e(0x299,0x27c,0x2ab,0x24d)]){_0x59429c[_0x499fb6(-0x17e,-0x1e3,-0x24d,-0x212)](_0xa063e3['PdYDZ']);return;}else{toastr[_0x499fb6(-0x18c,-0x1e3,-0x293,-0x1a6)](_0xa063e3[_0x499fb6(-0x16e,-0xd2,-0x31,-0x42)]);return;}}let _0x457288=_0x2dc28e(0x27b,0x300,0x32f,0x35f)+_0x55bc7a+_0x2dc28e(0x24b,0x2b8,0x246,0x36c);const _0x59e20f={};_0x59e20f[_0x2dc28e(0x398,0x304,0x35f,0x288)]=_0x2dc28e(0x2bc,0x348,0x310,0x36c),_0x59e20f[_0x2dc28e(0x2c3,0x327,0x383,0x26d)]=_0x499fb6(-0xa8,-0xd1,-0x56,-0x79),_0x59e20f[_0x499fb6(-0x221,-0x1ad,-0x1c8,-0x142)+'ures']=_0xa063e3[_0x499fb6(-0x135,-0x108,-0x1b2,-0xc2)],_0x59e20f['facialFeat'+_0x499fb6(-0xe7,-0xe3,-0x181,-0x3e)]=_0xa063e3[_0x2dc28e(0x35b,0x2b5,0x2fc,0x353)],_0x59e20f[_0x499fb6(-0x65,-0xbf,-0x140,-0xc0)+'FW']=_0xa063e3[_0x2dc28e(0x276,0x2ed,0x280,0x2ff)],_0x59e20f['upperBodyS'+_0x2dc28e(0x35b,0x362,0x2f9,0x305)]=_0xa063e3[_0x499fb6(-0x7e,-0x9d,-0x15b,0x5)],_0x59e20f[_0x2dc28e(0x307,0x253,0x1ca,0x2c5)+'W']=_0xa063e3['WTFnK'],_0x59e20f[_0x2dc28e(0x233,0x253,0x273,0x23c)+_0x499fb6(-0x19c,-0x16e,-0xb6,-0xd8)]=_0xa063e3[_0x499fb6(-0x1a6,-0x211,-0x1e8,-0x29d)],_0x59e20f[_0x499fb6(-0x15b,-0x20d,-0x204,-0x2b2)+_0x2dc28e(0x2d3,0x2e6,0x2d7,0x27f)]=_0xa063e3[_0x499fb6(-0x176,-0x1b1,-0x198,-0xee)],_0x59e20f[_0x2dc28e(0x2c0,0x21a,0x2e1,0x204)+_0x499fb6(-0x18a,-0x12f,-0x116,-0x158)]='上半身NSFW背面',_0x59e20f[_0x499fb6(-0x283,-0x1f2,-0x162,-0x24d)+'FW']=_0xa063e3[_0x2dc28e(0x2e1,0x2e2,0x244,0x25b)],_0x59e20f['fullBodyNS'+_0x2dc28e(0x29c,0x362,0x390,0x3bc)]=_0xa063e3[_0x2dc28e(0x3e9,0x390,0x390,0x36d)];const _0x71751d=_0x59e20f;function _0x2dc28e(_0x4eeeae,_0x5a7570,_0x3f43ea,_0x25a417){return _0x380bc6(_0x5a7570- -0x19f,_0x4eeeae,_0x3f43ea-0x180,_0x25a417-0x68);}let _0x5d1bcc=-0x1800+0x116a*0x2+-0xad4;for(const _0x1b14fc in _0x71751d){if(_0x1cb455[_0x1b14fc]&&_0x1cb455[_0x1b14fc]!==_0x21e453[_0x1b14fc]){const _0x4c621c=_0x21e453[_0x1b14fc]||_0xa063e3[_0x2dc28e(0x262,0x2a9,0x259,0x200)],_0x5668fb=_0x1cb455[_0x1b14fc];_0x457288+='•\x20'+_0x71751d[_0x1b14fc]+':\x0a',_0x457288+='\x20\x20旧:\x20'+_0x4c621c[_0x2dc28e(0x2a5,0x340,0x352,0x28e)](-0xd6f*-0x2+-0x8*-0x25c+-0x2dbe,0x85d+-0x8a7+0x7c)+(_0xa063e3[_0x499fb6(-0xef,-0x104,-0x92,-0x110)](_0x4c621c[_0x499fb6(-0x27d,-0x1cd,-0x1ab,-0x1e9)],-0xf59+-0x2*0xaee+0x2567)?_0x499fb6(-0xf8,-0xb0,0xe,-0xbd):'')+'\x0a',_0x457288+=_0x2dc28e(0x364,0x29d,0x2b6,0x2e2)+_0x5668fb['substring'](-0x2124+-0xf19*-0x1+0x120b,-0x101c+0xdc4+-0xd*-0x32)+(_0x5668fb[_0x499fb6(-0x1c6,-0x1cd,-0x164,-0x241)]>0x926+-0x1*0x1525+0xc31?_0x2dc28e(0x3fd,0x377,0x3c0,0x355):'')+'\x0a\x0a',_0x5d1bcc++;}}function _0x499fb6(_0x45cfe6,_0x97b1ab,_0x34e27d,_0x5cc50a){return _0x380bc6(_0x97b1ab- -0x5c6,_0x45cfe6,_0x34e27d-0xe4,_0x5cc50a-0xb3);}if(_0xa063e3[_0x2dc28e(0x2e2,0x2b0,0x32f,0x266)](_0x5d1bcc,-0x1fe6+-0x1*-0x210b+-0x125)){if(_0xa063e3[_0x499fb6(-0xb5,-0x177,-0x118,-0x15d)](_0xa063e3['hrjkK'],_0xa063e3[_0x2dc28e(0x18e,0x231,0x20d,0x2ca)])){toastr[_0x499fb6(0x22,-0x9b,-0xe3,0xc)](_0x499fb6(-0x11d,-0xcb,-0x18d,-0x187)+'内容');return;}else return _0x47b7d3;}_0x457288+='共\x20'+_0x5d1bcc+_0x2dc28e(0x282,0x2d4,0x30e,0x2f6);const _0x3cf11e=await _0xa063e3[_0x499fb6(-0x20d,-0x184,-0xf1,-0x1f9)](stylishConfirm,_0x457288);if(!_0x3cf11e){if(_0xa063e3[_0x2dc28e(0x257,0x25c,0x276,0x2a6)](_0xa063e3[_0x499fb6(-0x26a,-0x1c4,-0x26f,-0x260)],_0xa063e3['uXCpP'])){if(_0x470e15&&_0x286484['randomUUID'])return _0x53689c['randomUUID']();return _0xa063e3[_0x2dc28e(0x31d,0x264,0x1dd,0x1c2)](_0x3f4c22[_0x2dc28e(0x2a7,0x2e0,0x224,0x278)]()['toString'](0x63f+-0x1127*0x2+0x1c33),_0x3f7ba6['random']()['toString'](0x1*-0xd9f+0x1b5c+-0xd99*0x1)[_0x2dc28e(0x281,0x340,0x3fc,0x33c)](-0x24f6*-0x1+0x1*0x1d72+-0x4266));}else{toastr[_0x499fb6(0x24,-0x9b,0x3,0x2d)](_0x499fb6(-0x30,-0xd0,-0x9c,-0xd7));return;}}for(const _0x65a39a in _0x71751d){if(_0xa063e3['wjZAw'](_0xa063e3[_0x499fb6(-0x211,-0x1e1,-0x220,-0x147)],_0xa063e3['poDun']))_0x331c96[_0x2dc28e(0x2da,0x379,0x30c,0x2fa)](_0x1d5a03);else{if(_0x1cb455[_0x65a39a]){if(_0x2dc28e(0x26f,0x222,0x284,0x1b5)===_0x499fb6(-0x121,-0x131,-0xb2,-0x1d5)){if(_0xa063e3[_0x2dc28e(0x3d0,0x314,0x33f,0x29b)](_0x1f6f9b['id'],_0x3233d9))return;_0xa063e3[_0x499fb6(-0x202,-0x189,-0x1dd,-0x22e)](_0x427e59),_0xc4eb83['success']?_0xa063e3[_0x2dc28e(0x292,0x2a3,0x2a5,0x1ed)](_0x526cd0,_0x141eaf[_0x2dc28e(0x31e,0x351,0x3aa,0x377)]):_0xa063e3['uMZdp'](_0x48b7bf,new _0x330a44(_0x1d75ee[_0x499fb6(-0x99,-0xd6,-0xdb,-0x44)]||_0xa063e3[_0x2dc28e(0x1fe,0x26a,0x1bd,0x1a5)]));}else _0x21e453[_0x65a39a]=_0x1cb455[_0x65a39a];}}}saveSettingsDebounced();const _0x953ae8=_0xa063e3[_0x499fb6(-0x11e,-0x1bc,-0x18c,-0x246)]($,_0x499fb6(-0x218,-0x159,-0x21a,-0x181)+_0x2dc28e(0x297,0x24d,0x1db,0x1fd)+_0x2dc28e(0x1a4,0x232,0x28f,0x2e1));if(_0x953ae8[_0x499fb6(-0x146,-0x1cd,-0x271,-0x223)]){if(_0xa063e3[_0x2dc28e(0x381,0x30f,0x280,0x2c1)]===_0xa063e3[_0x2dc28e(0x2ba,0x30f,0x332,0x328)])_0xa063e3[_0x499fb6(-0x273,-0x1ac,-0x136,-0x20e)](refreshCharacterSettings,_0x953ae8);else{const _0x1418a1={};_0x1418a1[_0x2dc28e(0x384,0x2db,0x2e3,0x360)]=_0xa063e3['NDZYS'],_0x1418a1[_0x2dc28e(0x38b,0x387,0x333,0x396)]=_0x2b3876[_0x499fb6(-0x52,-0xa6,-0x75,-0xa4)],_0x5b8cde[_0x2dc28e(0x2da,0x2cf,0x219,0x35f)](_0x1418a1);}}_0xa063e3[_0x499fb6(-0x12c,-0x12c,-0x1ac,-0xb0)](updateFormFields,_0x1cb455),console[_0x2dc28e(0x16e,0x219,0x2b0,0x1ff)]('[character'+'PromptModi'+_0x2dc28e(0x3c1,0x384,0x3f8,0x35a)+_0x2dc28e(0x3b3,0x39a,0x320,0x43f)+_0x55bc7a+'\x22');}function updateFormFields(_0x494381){const _0x111c40={'ujhTN':_0x509836(0x317,0x290,0x2de,0x2be),'sfcnp':function(_0x56ebbb,_0x1890d6){return _0x56ebbb>_0x1890d6;},'IkUYS':_0x29dfdc(0x58f,0x5b7,0x611,0x648),'cjxcg':function(_0x294430,_0x1157cf){return _0x294430===_0x1157cf;},'bhFsk':_0x29dfdc(0x4af,0x488,0x561,0x548),'WwGVm':_0x509836(0x34e,0x2f2,0x2b3,0x338),'gEToz':function(_0x1e73ef,_0x2ef892){return _0x1e73ef!==_0x2ef892;},'xjara':_0x509836(0x3ab,0x3fb,0x355,0x36c),'MBPGU':_0x509836(0x34d,0x357,0x2a9,0x35c),'dOWlU':function(_0x11ce03,_0x3a76c5){return _0x11ce03(_0x3a76c5);},'eBMWg':'input','jydhX':_0x509836(0x407,0x408,0x373,0x3fb),'bXSIP':_0x509836(0x42a,0x4d1,0x4b3,0x4d3),'Zdcmi':_0x509836(0x37d,0x2be,0x3c1,0x3a1)+_0x509836(0x32c,0x358,0x3f4,0x2a3),'pVfQu':_0x509836(0x37d,0x432,0x439,0x364)+_0x29dfdc(0x55c,0x4d9,0x498,0x5a4),'zZXfB':_0x509836(0x46b,0x494,0x3fc,0x3ec)+'FW','SxhDo':_0x509836(0x46b,0x3a6,0x3b6,0x52c)+_0x29dfdc(0x57a,0x630,0x5cd,0x4d5),'puEGc':_0x509836(0x356,0x340,0x335,0x32f)+_0x509836(0x3bc,0x358,0x323,0x32f),'bqTcn':_0x509836(0x31d,0x2e3,0x31c,0x2eb)+_0x29dfdc(0x510,0x4a4,0x536,0x4f3),'Jtlib':_0x29dfdc(0x44d,0x502,0x475,0x49c)+_0x29dfdc(0x57a,0x5a1,0x524,0x4e5)};function _0x29dfdc(_0x41b2d8,_0x4aad5e,_0x2a4b0d,_0x8a06d3){return _0x380bc6(_0x41b2d8-0x79,_0x4aad5e,_0x2a4b0d-0x124,_0x8a06d3-0xf);}function _0x509836(_0xc86ea0,_0x4ce1f8,_0x53f04f,_0x483c2){return _0x380bc6(_0xc86ea0- -0x9c,_0x53f04f,_0x53f04f-0xf1,_0x483c2-0x1db);}const _0x151b22=[_0x111c40[_0x29dfdc(0x455,0x4c9,0x41a,0x3e1)],_0x111c40[_0x29dfdc(0x4f5,0x502,0x4f4,0x582)],_0x111c40[_0x509836(0x41e,0x47c,0x4af,0x3e1)],_0x111c40[_0x509836(0x3d9,0x43d,0x32f,0x417)],_0x111c40[_0x509836(0x45c,0x39d,0x4c8,0x4df)],_0x111c40[_0x509836(0x3be,0x312,0x387,0x3ef)],_0x509836(0x356,0x2be,0x39f,0x2a9)+'W',_0x111c40[_0x509836(0x34f,0x290,0x371,0x2a8)],_0x29dfdc(0x432,0x3b5,0x49e,0x3ef)+'SFW',_0x111c40[_0x29dfdc(0x50c,0x56a,0x58e,0x569)],_0x509836(0x338,0x310,0x3ea,0x3d0)+'FW',_0x111c40[_0x29dfdc(0x582,0x5b8,0x640,0x55f)]];_0x151b22[_0x509836(0x320,0x369,0x383,0x2b8)](_0x115dab=>{function _0x2b7eee(_0x22f3f6,_0x4e1777,_0x5c61b0,_0x2226d2){return _0x509836(_0x22f3f6- -0x49a,_0x4e1777-0x128,_0x5c61b0,_0x2226d2-0x14c);}function _0x2ab4f9(_0x2122d7,_0x92299f,_0xa55943,_0x1fc386){return _0x29dfdc(_0x1fc386- -0x5e2,_0x92299f,_0xa55943-0xb3,_0x1fc386-0x15d);}if(_0x111c40[_0x2b7eee(-0x90,-0xb9,-0x111,-0xa0)](_0x2b7eee(-0x100,-0xfa,-0x1c4,-0x56),_0x111c40[_0x2b7eee(-0xcc,-0x139,-0xfb,-0x125)])){if(_0x494381[_0x115dab]){if(_0x111c40['WwGVm']!==_0x111c40[_0x2b7eee(-0x4,0x6b,0x58,-0xa3)]){const _0x13835f=_0x350ac1(_0x4349e8[0x95*0x2e+0x24b*0x1+-0x1d10]),_0x18c3c1=_0x55503e(_0x13835f);_0x18c3c1&&_0x297a2b['characters'][_0x2b7eee(-0xc8,-0x156,-0xa0,-0xda)](_0x18c3c1);}else{const _0x4928e0=document[_0x2ab4f9(-0x10b,-0x99,-0x6b,-0x4b)+_0x2b7eee(-0x12a,-0xd5,-0x9c,-0x106)](_0x2b7eee(-0xe,-0x90,0x74,0x51)+_0x115dab);if(_0x4928e0){if(_0x111c40[_0x2ab4f9(-0x149,-0xc2,-0x231,-0x16b)](_0x111c40['xjara'],_0x111c40['MBPGU']))_0x4928e0['value']=_0x494381[_0x115dab],_0x111c40[_0x2ab4f9(-0x9f,-0xbf,-0x1c,-0xcb)]($,_0x4928e0)[_0x2b7eee(-0x109,-0x43,-0x174,-0x173)](_0x111c40['eBMWg']);else{const _0x144b04=_0x106e4f[_0x505f5c]||_0x111c40[_0x2ab4f9(-0x80,-0x46,-0x80,-0xac)],_0x118949=_0x37b8c2[_0x3e67bb];_0x2ca4a6+='•\x20'+_0xa39b43[_0x3ab7ab]+':\x0a',_0x5e1c01+=_0x2b7eee(-0x95,-0x84,-0x8d,-0x26)+_0x144b04[_0x2ab4f9(-0x11e,-0x12a,-0x2c,-0x8a)](0x7*-0x2b9+0x71*-0x36+0x2ae5,-0xac9+0x2*-0xed6+0x28a7)+(_0x111c40['sfcnp'](_0x144b04['length'],-0x503+0x2399*0x1+-0x185*0x14)?'...':'')+'\x0a',_0x9b1d88+=_0x2ab4f9(-0x1d5,-0xb8,-0x1bb,-0x12d)+_0x118949['substring'](0xf4d+-0x1225+0x5b*0x8,0x1d8*0x4+-0x30*-0x79+0x1dde*-0x1)+(_0x111c40[_0x2ab4f9(-0x5d,-0x103,-0x22,-0x47)](_0x118949[_0x2b7eee(-0x13d,-0x1de,-0x16c,-0x19f)],-0x1e5+-0x16*-0x1b4+0x2361*-0x1)?_0x111c40[_0x2ab4f9(-0x64,-0xaf,-0x160,-0xe7)]:'')+'\x0a\x0a',_0x17a90d++;}}}}}else{const _0x35bab2=_0x114f2b[_0x2b7eee(-0xff,-0x13a,-0x44,-0x132)](_0x10feac,arguments);return _0x3d700f=null,_0x35bab2;}});}function _0x44a3(_0x317a99,_0x5e8b9b){_0x317a99=_0x317a99-(-0x1395+-0x2*-0xe43+-0x75a);const _0x2046b8=_0x290b();let _0x58b4f1=_0x2046b8[_0x317a99];if(_0x44a3['SAMDPy']===undefined){var _0x390c88=function(_0x4f156b){const _0x5d4509='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x102632='',_0x18d37d='',_0x330066=_0x102632+_0x390c88;for(let _0x2a170c=0x112a+0x10bc+-0x21e6,_0x3fffa1,_0x12468a,_0x4bcb26=-0x18fc+-0x1293+-0x213*-0x15;_0x12468a=_0x4f156b['charAt'](_0x4bcb26++);~_0x12468a&&(_0x3fffa1=_0x2a170c%(0x5f3*0x1+-0x31e+-0x2d1)?_0x3fffa1*(-0x20*-0x8e+-0xe5f*0x2+0x1*0xb3e)+_0x12468a:_0x12468a,_0x2a170c++%(-0x12e8*0x1+-0xa0a*-0x1+-0x471*-0x2))?_0x102632+=_0x330066['charCodeAt'](_0x4bcb26+(-0x2520+0x473*-0x1+-0x35*-0xc9))-(-0x1bb*-0x3+0x4c6+0x16b*-0x7)!==-0x62b*0x1+0x1e9a+-0x186f?String['fromCharCode'](0xcf5+0x1*-0xbe8+-0x2*0x7&_0x3fffa1>>(-(-0x303*-0xb+0x692*-0x5+-0x45)*_0x2a170c&0x2407+-0xd3e*0x1+0x1*-0x16c3)):_0x2a170c:-0x3*0x299+-0x1f71+0x273c){_0x12468a=_0x5d4509['indexOf'](_0x12468a);}for(let _0x466be3=0x820+0x1*-0x1603+0xde3,_0x323711=_0x102632['length'];_0x466be3<_0x323711;_0x466be3++){_0x18d37d+='%'+('00'+_0x102632['charCodeAt'](_0x466be3)['toString'](0x18ba+0x87a+-0x6*0x586))['slice'](-(-0x3e9+-0xa5*0x2+0x1f*0x2b));}return decodeURIComponent(_0x18d37d);};_0x44a3['lnHfuH']=_0x390c88,_0x44a3['rlwFyG']={},_0x44a3['SAMDPy']=!![];}const _0x5d97b1=_0x2046b8[-0x1*-0xbb4+-0x1b0+-0x2*0x502],_0x1ed6db=_0x317a99+_0x5d97b1,_0x14e066=_0x44a3['rlwFyG'][_0x1ed6db];if(!_0x14e066){const _0x5939f5=function(_0x401f00){this['zxcBOH']=_0x401f00,this['VIHrJD']=[-0x5c7*0x3+0x67b+0xadb,-0x5*-0x381+-0x1088+-0xb*0x17,-0x1de7*-0x1+-0x35a+0x1*-0x1a8d],this['ZRsedH']=function(){return'newState';},this['xzwgKQ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['myQRMl']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5939f5['prototype']['qNGgaA']=function(){const _0x2e2665=new RegExp(this['xzwgKQ']+this['myQRMl']),_0x19c013=_0x2e2665['test'](this['ZRsedH']['toString']())?--this['VIHrJD'][0x1*0x7f7+0x1*-0xbd5+0x1*0x3df]:--this['VIHrJD'][0x1*0x15c7+0x13*0x49+-0x1b32];return this['DRgfVn'](_0x19c013);},_0x5939f5['prototype']['DRgfVn']=function(_0x38b4b0){if(!Boolean(~_0x38b4b0))return _0x38b4b0;return this['knPdgf'](this['zxcBOH']);},_0x5939f5['prototype']['knPdgf']=function(_0x28df51){for(let _0x360827=0x167f+-0x2650+0xfd1,_0x1263b4=this['VIHrJD']['length'];_0x360827<_0x1263b4;_0x360827++){this['VIHrJD']['push'](Math['round'](Math['random']())),_0x1263b4=this['VIHrJD']['length'];}return _0x28df51(this['VIHrJD'][0x23f0+-0x3a9+-0x2047]);},new _0x5939f5(_0x44a3)['qNGgaA'](),_0x58b4f1=_0x44a3['lnHfuH'](_0x58b4f1),_0x44a3['rlwFyG'][_0x1ed6db]=_0x58b4f1;}else _0x58b4f1=_0x14e066;return _0x58b4f1;}function _0x290b(){const _0x430011=['Bw9KAwz5ihbYBW','Cg9eDw4','vxvuAfm','CLrLwwi','shfdv3y','u0zbt20','CLflruO','Chvfr2m','lxrHyI1JAgfYyq','vuLtCxi','zxiGChjVBxb0ia','tfjcBNm','yKDgBee','yMfZzty0','zNvSBejVzhLtrG','AejAAMG','qNLOyLe','CwvNtKe','z09srNm','AervtwK','wKfiA3m','BgvUz3rO','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','EgzuweG','A3fbtNi','teXnioI/LowBNUE7K+AENos4UUEPUG','z0vuB3O','zNLDifvZzxiGCG','t2fmBLa','ugTRrgW','zKTvyNq','Cw5Hu3K','z21qzMq','5lIl5y2k6lQRtLngv+IdJoMDOG','zNLDien1CNjLBG','B3iGzgvIDwDNAq','CMvWBgfJzq','ve1WtwS','wgfAC3i','DcbWCMvZzxq6','qNLjza','qurhq2W','v1LcExa','CMfUzg9Tvvvjra','CvHSs3u','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','6kkR5l2/55sO77YA','EuD0sLy','wMrXu2S','wgr2A0u','zK5rD00','zgf0yq','zMLSDgvY','zMfJAwfSrMvHDa','Du1Azha','se5RwMO','y2HHCL9TB2rPzG','rujvEvy','igLUzgv4','5lIk5y2k6lQRtLngvZOG','D29YBgqGyM9VAW','B1n0AxC','zNLDiev4zwn1Da','CMvTB3zLtgLZDa','Dhb1DdO','y09Xz3q','5PwW5O2UoG','zwrXtMq','ig91Dhb1Da','zgf0ytO','5A2x5Q61ici','DgvYihrYAwDNzq','y2HHCMfJDgvYta','DhjPz2DLCG','uLPUre4','t0Hdy3u','Bfr2ywG','uMvlvgu','vezrwNy','Cw92tgy','zNH3suy','Cgv6Axu','wenyB3O','yxbWBhK','5lIl5y2k6lQRu0zx6iom6z2I','ChjVBxb0oG','vuvtva','swnUENG','icdMLRa6ia','zMDzt3m','5lIk5y2k6lQRtLngv+IdJoMDOG','vLLSAwG','mZuWnZGWtxPoCNLc','5y+c6icd5zU+54Mh','BgjbCLO','6kEs6iMY5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','5Qoa5Rwl5yIW6kEs6iMY5Qch562+','CeHer04','vxLVswe','vufHAMO','wMzJr1K','DNfNrvi','rxPAywO','CMfJDgvYihrHzW','ELHnALy','uMrlr1i','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','yxzKrwu','6iUX5PAh5zcn56EWoIa','ChLnEeS','mZqZntG2nwHHwMXjAa','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','qxj6txy','v3nhCuy','sevNqNy','iIdNMOtKU6xKUiVMLBdMJA46cGO','v0jHy2S','BwfW','u3HOrg8','rdOG','zxH0','Axn0vgv4Da','ruHSANO','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','DuTuweG','AxnNqK0','5lQu5A6y5Asw6lkm6iom6z2IoIa','zgf0ytPPBwfNzq','A0fru2i','l3bUzZTIyxnLnG','mtjLzgfVBgW','B2rPzNKGteXnia','y0rQsgS','zNLDifnHDMvKia','yMHgC2S','5lIk5y2k6lQRtLngv+IdJoMDOJO','5lIl5y2k6lQRu0zx','i3n0lwnOyxr1oa','ChvZAa','t3P6y0S','vhr3DuK','mZziqKXls04','wNjQswS','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','sM1TAKe','CfzMuxu','DMfovvm','twXYBve','y2HHCMfJDgvYCW','y29UDgv4Da','DhLWzq','y0TTCg4','yLHtsva','zw5LCG','zNLDiezPBMfSia','BM93','zNLDieXmtsbVDq','Ben3q1q','swTvwvm','EMn6rxm','ntq5y3jjreDT','u0zx','5lIl5y2k6lQRtLngvW','Dg9tDhjPBMC','EgP3Bue','tgjJCLG','s1Hut3i','quLeuxO','uNPdq1C','zu1bzeG','DxnLCKrLBwfUza','DMfYAwfIBgvZ','y29TBw9Uq2HHCG','rvnu','BwfvwLG','yNfuy24','yvL0y0i','wfLJyLi','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','u0zxqMfJAW','z2j6rfy','zxHLyW','uerRs1y','q0PlzhC','tKHMtfC','y2X3sei','ze9xBfu','5yEg5Ash5PU05PAW6kEs6iMYici','5lIT5PAh5zcn56EWoIa','icdML6C6ia','zNLDifjLCxvLCW','BMfTzuno','v1nkrwq','Eg9ryNm','y2P4y2C','wgLwDKm','DwLptKm','zKzbq3u','BwvZC2fNzsbHDa','C3rYAw5N','DgLUzYbJAgfYia','ne1Hs0XJuq','sMHRyLq','v1PjuLy','wfPrENe','uhzIuuu','yKvztKC','u2Lzsum','yKXev1i','DvnkyMG','vMfYAwfIBgvZ','BMfTzq','yvrHuva','Aw5JBhvKzxm','wMrJBwK','CMvWBgfJzufSBa','C2vHCMnO','DwPOve4','suvZwuq','D0PsAu4','B2jQzwn0','wNPbq0O','EhHOr2G','Bvb6z0K','BwvZC2fNzq','zgfVBhy','BMfTzuvo','we1HqwC','ufDMugK','wg5yBfO','tefPDMC','zNLDienOyxjHyW','C3rHCNrZv2L0Aa','ywn0zxjmAxn0va','DhjPBq','C3bSAxq','sg1nBwq','uuP2v0W','DKrguuW','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','uLj5BNe','tuDAANC','5lIk5y2k6lQRtLngvW','uuDHBMu','Ae1ZD08','zNziwwC','u0XLzw4','vxHvyLG','BufsCfu','BevNDuK','CMvHzeq','C3vIC3rYAw5N','BgvmAxn0vgv4Da','t0rjrLLFuKvtua','5lQu5A6y5Asw6lkmoIa','DxjLC0jHy2S','DgvYigXPC3qGDa','BMrLEdO','D2LutuS','5lIT5PAh5zcn56EW','vNzUAeK','DgvKigrHDge6','DLP3Efm','BLjwEuq','r3rRr0O','DfvhBLK','C3DAshe','nZiYohbiq3vgCq','CMvZDwX0','DxjS','sM5SD0O','q29UDgv4Da','ugrzrfO','6iUX5PAh5zcn56EW','5BEY5y+w5RAi5PU05PAW','CMvZzxrjza','ELPyzKi','qKnmDw8','D29YBgrcB29RqW','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','5lIk5y2k6lQRu0zx6iom6z2IoIa','qvjRtgu','yu90ENC','zgv0ywLS','5lIl5y2k6lQRtLngvZOG','rLDcywnR','ufjptvbux1jfuW','ChjVBxb0','Aw1Hz2vFDxjS','zxfeseS','w2nOyxjHy3rLCG','DxbWzxjcB2r5uW','uerMB20','sNrSAwi','z2D1vuW','A1rrveK','ig1LC3nHz2uGAq','EfPhB0O','B250zw50','y29UC3rYDwn0BW','tuTuB0u','BNrbywG','DMfSDwu','tKTfvey','txvbBNy','ndaXmdaYCgDKtg9i','lI4U','tNLor1a','ywrK','5lIl5y2k6lQRtLngv+IdJoMDOJO','A1jiDeS','AM9PBG','t0rjrLLFuKvrvq','DgLTzw91De1Z','z2v0rwXLBwvUDa','5lQu5A6y5Asw6lkm','y29UDgvUDa','teXnioIVT+AXGUwKSEI0Pq','C2zJBNa','zNLDiow3SUABToAwSoINKUIjSUMIHa','tsbVDxrWDxqGzG','5lQu5A6y5Asw6lkm6iom6z2I','Dgv4Da','teXnx0niqvjFtq','y2HHCL8','thjkDvu','5lIl5y2k6lQRu0zx6iom6z2IoIa','Aw5MBW','C2PRwKW','5lIk5y2k6lQRu0zx','wLLuvwG','y2TmzgO','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','Bw9KAwz5ihjLCq','v3DhvM0','uxjkBMC','ntmZmdaYngTuvhP4za','rwvVENG','kcGOlISPkYKRkq','wLLUsve','zNLDioATO+wCQowKHoEqHUINKUIjSG','6k6+ici','BejOyLy','Aw5KzxHpzG','BhzuvKq','Aw5NignOyxiGBq','5lIk5y2k6lQRu0zxoIa','zfnUyxO','thHTt0q','AhPStMi','y2HHCMfJDgvYua','koEPUIK','CwjtBwW','zfv0q3G','D2fYBMLUzW','v29YBgrcB29R','Bg9N','DxbWzxjcB2r5tG','uhjVBxb0tw9KAq','C2L6zq','zM9YrwfJAa','ufjptvbux1jfuq','z2TiB2G','CKzkExC','mJiYmJCXsxPtufjm','z0nuALO','CMvZzxrZ','z2vUzxjHDgLVBG','E3VLVzpLIy3OP5lOIBj9Fq','mtjgqM91BMe','vffXzMm','t05trq','DxjLCW','rgrtBe8','wxDry3O','5lIl5y2k6lQRu0zxoIa','yxv0BW','ue9ou0u','qMnZuKS','zw1PDa','AhjQA0S','y3rLCG','twvVq2W','rMT6u2i','zNvSBejVzhLouW','y1jLsgW','AxnbCNjHEq','5Rgc6lAf5PE2','wK1dCxG','qwvVuvu','zNLDief0DgfJAa','t0rjrLLFr0vuxW','ANLKAfG','pc/KURRNIAK+','mtiZnZuYmZfjru5cAKG','C3vJy2vZCW','Aw5WDxq','Buv2u2O','CIb0zxH0oG','zxjYB3i'];_0x290b=function(){return _0x430011;};return _0x290b();}