function _0x4056(_0x244b78,_0x3fdbff){_0x244b78=_0x244b78-(-0x1b73+0x1456+0x889);const _0x51a989=_0x5cb8();let _0x4cada1=_0x51a989[_0x244b78];if(_0x4056['FdftZB']===undefined){var _0x302c39=function(_0x2aeb03){const _0x51995c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xa27590='',_0x482197='',_0x5b9ba8=_0xa27590+_0x302c39;for(let _0x44d859=0x24e5+0x61*0x24+0x3289*-0x1,_0x1cc217,_0x3a5eb0,_0x929f3e=0x698+0xb2f+-0x11c7;_0x3a5eb0=_0x2aeb03['charAt'](_0x929f3e++);~_0x3a5eb0&&(_0x1cc217=_0x44d859%(0x2*0xe6+0x2*0x938+-0x1438)?_0x1cc217*(-0x3*-0x1bc+0x5a8*-0x6+0x1cfc)+_0x3a5eb0:_0x3a5eb0,_0x44d859++%(-0x24fe+0x22fb+0x207))?_0xa27590+=_0x5b9ba8['charCodeAt'](_0x929f3e+(-0x331*-0x7+-0x11ab+-0x4a2))-(0x16a7+-0x1*-0xe17+-0x24b4)!==-0x2*-0x1a9+-0x20ad*-0x1+-0x23ff?String['fromCharCode'](-0x2*0x4f0+-0xd67*-0x1+-0x288&_0x1cc217>>(-(0x152*0x7+-0x615*-0x3+-0x1b7b)*_0x44d859&-0x1f6d+0x1*0x1f1+0x1d82*0x1)):_0x44d859:-0x1*0x15d+0xb72+-0xa15){_0x3a5eb0=_0x51995c['indexOf'](_0x3a5eb0);}for(let _0x4c170c=0x1265*-0x2+0x1f24+0x1e2*0x3,_0x1f00a4=_0xa27590['length'];_0x4c170c<_0x1f00a4;_0x4c170c++){_0x482197+='%'+('00'+_0xa27590['charCodeAt'](_0x4c170c)['toString'](0x1bab+-0x5*-0x211+-0x25f0))['slice'](-(-0x12a1+0x1e9d+0x3fe*-0x3));}return decodeURIComponent(_0x482197);};_0x4056['hrOSLk']=_0x302c39,_0x4056['MMNAAP']={},_0x4056['FdftZB']=!![];}const _0x13de20=_0x51a989[0x522*0x1+0x23d6+-0x28f8],_0x3841ec=_0x244b78+_0x13de20,_0x223c65=_0x4056['MMNAAP'][_0x3841ec];if(!_0x223c65){const _0x2afdf6=function(_0x2122c3){this['bNPTDv']=_0x2122c3,this['UhoghY']=[0x1b1*-0x6+0x1*-0x155+0xf5*0xc,-0x7*0x4af+-0x53a+0x2603,-0x5*-0x53b+0x72d*-0x4+0x28d*0x1],this['JEOGHg']=function(){return'newState';},this['IMLAgA']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['XKdDeV']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2afdf6['prototype']['rQFpfy']=function(){const _0x438adb=new RegExp(this['IMLAgA']+this['XKdDeV']),_0x2b40b4=_0x438adb['test'](this['JEOGHg']['toString']())?--this['UhoghY'][-0x1011+0x140e*0x1+0x22*-0x1e]:--this['UhoghY'][0x2*0x8f5+-0x1b55+-0x1*-0x96b];return this['wFJdOw'](_0x2b40b4);},_0x2afdf6['prototype']['wFJdOw']=function(_0x166b2d){if(!Boolean(~_0x166b2d))return _0x166b2d;return this['RKBeKk'](this['bNPTDv']);},_0x2afdf6['prototype']['RKBeKk']=function(_0x4e1972){for(let _0x40cf0a=-0x12d3+-0x7*-0x191+-0x3ee*-0x2,_0x2ea64c=this['UhoghY']['length'];_0x40cf0a<_0x2ea64c;_0x40cf0a++){this['UhoghY']['push'](Math['round'](Math['random']())),_0x2ea64c=this['UhoghY']['length'];}return _0x4e1972(this['UhoghY'][0x1d0b+-0x937*-0x1+-0x76*0x53]);},new _0x2afdf6(_0x4056)['rQFpfy'](),_0x4cada1=_0x4056['hrOSLk'](_0x4cada1),_0x4056['MMNAAP'][_0x3841ec]=_0x4cada1;}else _0x4cada1=_0x223c65;return _0x4cada1;}(function(_0x3a1b6f,_0x3062f9){const _0x21b7e0=_0x3a1b6f();function _0x2b0fad(_0x330436,_0x5b5ee1,_0x58b685,_0x239d83){return _0x4056(_0x5b5ee1-0x33,_0x239d83);}function _0x1d659c(_0x45a4a2,_0x2550e5,_0xc60367,_0x28981f){return _0x4056(_0x45a4a2- -0xf6,_0x28981f);}while(!![]){try{const _0x339046=parseInt(_0x1d659c(0x122,0x150,0x14c,0x15e))/(-0x1f77+-0x17ff+-0x3*-0x127d)*(parseInt(_0x2b0fad(0x322,0x339,0x3c8,0x39d))/(-0x4f*-0x4a+-0x10e3*0x2+0xaf2))+parseInt(_0x1d659c(0x7b,0x16,0xe3,0x62))/(-0x1b68*-0x1+-0x17f7+-0x36e)*(parseInt(_0x1d659c(0xbb,0xe6,0x5d,-0x1))/(0x17*-0xed+0x2*0x67c+-0x1*-0x857))+-parseInt(_0x1d659c(0x1e4,0x287,0x116,0x159))/(-0x59d+-0x2233+0x135*0x21)+parseInt(_0x2b0fad(0x172,0x224,0x163,0x25a))/(0x38f*0x4+0x6f7*0x3+-0xd1*0x2b)+-parseInt(_0x1d659c(0x96,0x11d,-0x2a,-0x6))/(0x1f60+0x149a+-0x33f3)+-parseInt(_0x1d659c(0x1b9,0x260,0x202,0x158))/(-0x48b*-0x2+0x1e30+-0x273e*0x1)*(-parseInt(_0x1d659c(0x1f1,0x204,0x123,0x26b))/(0x14b7*0x1+0xa98+-0x1f46))+parseInt(_0x1d659c(0x163,0x1fa,0x1b2,0x17c))/(-0x9b3*0x2+-0x422+0xbc9*0x2)*(-parseInt(_0x1d659c(0x183,0x21d,0x196,0x10f))/(0x144*-0x5+-0x1437+-0x1*-0x1a96));if(_0x339046===_0x3062f9)break;else _0x21b7e0['push'](_0x21b7e0['shift']());}catch(_0xbe46f8){_0x21b7e0['push'](_0x21b7e0['shift']());}}}(_0x5cb8,0x1*-0xafb5b+-0x1*-0x3e6a3+0x70b62*0x2));const _0xbe31b0=(function(){function _0x4663af(_0x4bc45c,_0x27829b,_0x398fed,_0x21e80a){return _0x4056(_0x398fed-0x179,_0x4bc45c);}const _0x4c8ec9={};_0x4c8ec9[_0x430df1(0x11a,0x11f,0x13f,0x194)]=function(_0x393adf,_0x443ae7){return _0x393adf!==_0x443ae7;},_0x4c8ec9[_0x430df1(0x154,0x216,0x151,0x13d)]=_0x4663af(0x40b,0x512,0x46d,0x469);const _0x48e810=_0x4c8ec9;function _0x430df1(_0x287774,_0x3c9b81,_0x27e425,_0x3e790f){return _0x4056(_0x27e425- -0x197,_0x3e790f);}let _0x1dc8f0=!![];return function(_0xee312d,_0x6ce7b){const _0x582f2f={'Eomzs':function(_0x305c79,_0x5f246c){function _0x22ec55(_0x613589,_0x4cbf71,_0x1eaf95,_0x447bc2){return _0x4056(_0x1eaf95-0x1bf,_0x613589);}return _0x48e810[_0x22ec55(0x3f3,0x534,0x495,0x3f4)](_0x305c79,_0x5f246c);},'TrBuL':_0x48e810[_0x334922(0x651,0x6bb,0x630,0x683)]},_0xf58a4b=_0x1dc8f0?function(){function _0x5dc4d4(_0x3cce1b,_0x43a801,_0x380291,_0x118645){return _0x334922(_0x3cce1b-0x10e,_0x118645- -0x55b,_0x43a801,_0x118645-0x182);}function _0x4225c8(_0x3d7dfe,_0xc78c92,_0x2dfca0,_0x4f37e3){return _0x334922(_0x3d7dfe-0x189,_0x4f37e3- -0x75d,_0x3d7dfe,_0x4f37e3-0xce);}if(_0x582f2f['Eomzs'](_0x582f2f[_0x4225c8(-0xaa,-0xd6,-0x102,-0x7c)],'FnblQ'))_0x4ba8f4[_0x5dc4d4(0xf2,0xec,0x11d,0x6e)+'fits'][_0x5dc4d4(0x163,0xc3,0x144,0x8f)](_0x4ef591['data']);else{if(_0x6ce7b){const _0x421aeb=_0x6ce7b[_0x5dc4d4(0xa8,0x34,0xb9,0xb2)](_0xee312d,arguments);return _0x6ce7b=null,_0x421aeb;}}}:function(){};_0x1dc8f0=![];function _0x334922(_0x287967,_0x4260cc,_0x301b94,_0x25080c){return _0x430df1(_0x287967-0x1c2,_0x4260cc-0xa0,_0x4260cc-0x56a,_0x301b94);}return _0xf58a4b;};}()),_0x12c158=_0xbe31b0(this,function(){function _0x4bb58e(_0xc8f82b,_0x47a8fa,_0x4d77ed,_0x4b6d73){return _0x4056(_0x4b6d73-0x2e4,_0x47a8fa);}const _0x184096={};_0x184096[_0x4bb58e(0x3ed,0x4b1,0x56c,0x4c3)]=_0x4bb58e(0x54a,0x52e,0x4e2,0x528)+'+$';const _0x208cee=_0x184096;function _0x16ad6d(_0x4eca95,_0x3c2d81,_0x42682b,_0x2b7105){return _0x4056(_0x3c2d81-0x96,_0x4eca95);}return _0x12c158[_0x16ad6d(0x3a7,0x38c,0x2db,0x36b)]()[_0x4bb58e(0x4f0,0x453,0x5f5,0x523)](_0x208cee[_0x16ad6d(0x20a,0x275,0x282,0x261)])[_0x4bb58e(0x627,0x530,0x606,0x5da)]()['constructo'+'r'](_0x12c158)['search'](_0x208cee['JFtgc']);});_0x12c158();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x450665}from'./promptProcessor.js';function replacePlaceholder(_0x200412,_0x355422,_0x29f293,_0x25b0a9){const _0x185194={'vQIiF':function(_0x2bb165,_0x5b0ab5,_0x48e415,_0x5871ef,_0x38d169){return _0x2bb165(_0x5b0ab5,_0x48e415,_0x5871ef,_0x38d169);},'ohgZd':function(_0x114d4c,_0x300ae2){return _0x114d4c===_0x300ae2;},'iQGvO':function(_0x45a9a7,_0x2716c5){return _0x45a9a7===_0x2716c5;},'cPNwe':_0x153090(0x573,0x4d2,0x4fd,0x543),'srMBp':function(_0x2c60b3,_0x279183){return _0x2c60b3===_0x279183;},'CdDrv':'object'};if(_0x185194[_0x1a3340(-0xd1,-0xc9,-0x8a,-0x7)](typeof _0x200412,'string'))return _0x29f293&&_0x200412[_0x1a3340(-0x1e,-0x5e,-0xd5,0x32)](_0x355422)&&(_0x185194[_0x153090(0x3ef,0x451,0x437,0x46f)](_0x185194[_0x1a3340(0x54,-0x3f,-0x70,-0xd2)],_0x185194['cPNwe'])?_0x25b0a9&&_0x25b0a9['add'](_0x355422):_0x27a3ce[_0x372914]=_0x185194[_0x153090(0x38d,0x374,0x3cd,0x44f)](_0x1df106,_0x18b6a5[_0x3d11b6],_0x15e147,_0x505a81,_0x1d468d)),_0x200412[_0x153090(0x500,0x511,0x476,0x474)](_0x355422,_0x29f293);if(Array['isArray'](_0x200412))return _0x200412['map'](_0xf31dfa=>replacePlaceholder(_0xf31dfa,_0x355422,_0x29f293,_0x25b0a9));function _0x1a3340(_0x7e713d,_0x1b6578,_0x4ade48,_0x3092ec){return _0x4056(_0x1b6578- -0x351,_0x4ade48);}function _0x153090(_0x2567cd,_0x19b0a7,_0x10047e,_0x2667fc){return _0x4056(_0x10047e-0x229,_0x2567cd);}if(_0x200412&&_0x185194['srMBp'](typeof _0x200412,_0x185194['CdDrv'])){const _0x4840d2={};for(const _0x3e31b1 in _0x200412){_0x4840d2[_0x3e31b1]=replacePlaceholder(_0x200412[_0x3e31b1],_0x355422,_0x29f293,_0x25b0a9);}return _0x4840d2;}return _0x200412;}function attachImagesToMessage(_0x501249,_0x4c3189,_0x55548c,_0x28be4c='参考图片'){const _0x1a589f={};_0x1a589f['chfVr']=function(_0xb7e86a,_0x512f04){return _0xb7e86a===_0x512f04;},_0x1a589f[_0x3d6d0c(-0x76,-0x12e,-0xfe,-0x59)]=_0x3d6d0c(0xf3,0x102,0x135,0x81),_0x1a589f[_0x3d6d0c(0x4b,-0x27,-0x5a,-0x79)]='RleCX',_0x1a589f[_0xde53b8(0x5d8,0x58a,0x628,0x632)]=_0x3d6d0c(0x7a,0x5e,-0xb4,-0x15),_0x1a589f['MZSYB']=_0x3d6d0c(0x55,-0x38,0xb,-0x48),_0x1a589f[_0x3d6d0c(0x105,0x152,0xb9,0xc7)]=_0x3d6d0c(-0xa2,-0xe1,0x66,-0x29),_0x1a589f[_0xde53b8(0x460,0x5b2,0x53e,0x52f)]=function(_0x35b9aa,_0x52fdf9){return _0x35b9aa===_0x52fdf9;},_0x1a589f[_0x3d6d0c(0x62,0x1c,-0x6b,-0x4e)]=function(_0x473a03,_0x44e8d9){return _0x473a03>=_0x44e8d9;},_0x1a589f['LncRO']=_0x3d6d0c(-0x4,0x64,-0x6c,-0x39),_0x1a589f[_0xde53b8(0x52f,0x55b,0x4b4,0x56f)]=function(_0x35fdfb,_0x34cdc3){return _0x35fdfb===_0x34cdc3;},_0x1a589f[_0xde53b8(0x508,0x5df,0x5cb,0x57b)]=function(_0x36ad28,_0x419745){return _0x36ad28>_0x419745;};const _0x5eb4b5=_0x1a589f;if(!_0x55548c||_0x5eb4b5['RdwEA'](_0x55548c[_0x3d6d0c(0x110,-0x54,0x41,0x5c)],-0x5*0x9d+0x1e69+-0x1b58)||_0x4c3189<-0x25f7*-0x1+-0xf82+-0x1675||_0x5eb4b5[_0x3d6d0c(-0x40,0x14,-0xe,-0x4e)](_0x4c3189,_0x501249[_0x3d6d0c(-0x66,0xcc,0xed,0x5c)])){if(_0x5eb4b5[_0x3d6d0c(-0x16,-0x19,-0x41,-0x6e)](_0x5eb4b5['LncRO'],_0x5eb4b5[_0xde53b8(0x6bd,0x6f1,0x5bd,0x64c)]))return _0x501249;else _0xd980cf[_0x51a195[_0x11df13]]=_0x47e3c0;}function _0x3d6d0c(_0x4ba1be,_0x80c1f6,_0x4a7544,_0x29f308){return _0x4056(_0x29f308- -0x1eb,_0x4a7544);}const _0x22f234=[..._0x501249],_0x39c50d=_0x22f234[_0x4c3189],_0x4cad8=[];function _0xde53b8(_0x5ae4b4,_0x4038cd,_0x2d0356,_0xe87436){return _0x4056(_0xe87436-0x3b2,_0x2d0356);}if(_0x5eb4b5[_0x3d6d0c(-0xb4,-0x69,-0x65,-0x2e)](typeof _0x39c50d[_0xde53b8(0x57d,0x5e0,0x5c6,0x5c2)],_0x5eb4b5[_0x3d6d0c(0xec,-0x16,0x75,0x95)])){const _0x34409d={};_0x34409d[_0x3d6d0c(-0x23,0xb0,0x53,0x55)]=_0x5eb4b5[_0x3d6d0c(0x5e,-0x3f,-0x65,-0x59)],_0x34409d[_0x3d6d0c(0xb4,0xfd,0x100,0x81)]=_0x39c50d[_0x3d6d0c(0xf0,-0x1a,-0x3f,0x25)],_0x4cad8[_0x3d6d0c(0xf6,0xb4,-0x7a,0x2c)](_0x34409d);}else Array[_0xde53b8(0x697,0x6dd,0x6ff,0x635)](_0x39c50d[_0xde53b8(0x5d3,0x5d8,0x622,0x5c2)])&&_0x4cad8[_0xde53b8(0x610,0x5f1,0x5e3,0x5c9)](..._0x39c50d[_0x3d6d0c(-0x97,0x87,-0x9a,0x25)]);if(_0x5eb4b5[_0xde53b8(0x5af,0x5ee,0x4d5,0x57b)](_0x55548c[_0xde53b8(0x574,0x581,0x53e,0x5f9)],-0x1*0x2426+-0x1*-0xf95+-0x195*-0xd)){const _0x52fe74={};_0x52fe74[_0x3d6d0c(-0x70,0x27,0x2f,0x55)]=_0x3d6d0c(-0x8,-0x47,0x3c,0x81),_0x52fe74['text']=_0xde53b8(0x5b5,0x565,0x549,0x520)+_0x55548c[_0x3d6d0c(0x8b,-0x3e,-0x63,0x5c)]+'张'+_0x28be4c+']',_0x4cad8[_0xde53b8(0x5b3,0x658,0x683,0x5c9)](_0x52fe74);}_0x55548c[_0xde53b8(0x51a,0x597,0x4c1,0x52d)]((_0x3b9c2b,_0x5f0f20)=>{function _0x4741b2(_0x2c482f,_0x30cc19,_0x516b14,_0x3fab34){return _0xde53b8(_0x2c482f-0xca,_0x30cc19-0xe8,_0x2c482f,_0x3fab34- -0x4a7);}function _0x36ec29(_0x2f20ef,_0x2e6c43,_0x1da41b,_0xda58ef){return _0xde53b8(_0x2f20ef-0x72,_0x2e6c43-0x165,_0x2f20ef,_0x2e6c43- -0x56b);}if(_0x5eb4b5[_0x4741b2(0x1fc,0x1a6,0x13a,0x1b9)](_0x4741b2(0x193,0x281,0x131,0x1bf),_0x5eb4b5[_0x36ec29(-0x46,-0x47,0x5,-0x8d)])){const _0x48600e=_0x5eb4b5['chfVr'](typeof _0x3b9c2b,_0x5eb4b5[_0x36ec29(0xba,0xc7,0xc8,0xcf)])?_0x3b9c2b:_0x3b9c2b[_0x4741b2(0x10f,0x165,0x5a,0x127)],_0x58ffd3=_0x5eb4b5[_0x4741b2(0x249,0x1ce,0x1c8,0x1b9)](typeof _0x3b9c2b,_0x36ec29(-0x109,-0x45,-0xd6,0x6e))&&_0x3b9c2b[_0x4741b2(0x164,0x157,0x100,0xa4)]?_0x3b9c2b[_0x36ec29(-0x54,-0x20,0x38,-0x2f)]:''+_0x28be4c+(_0x5f0f20+(-0x2541+0x264+0x22de)),_0x6a5dbd={};_0x6a5dbd['type']=_0x5eb4b5[_0x36ec29(0x2,-0x27,-0x5b,0xaa)],_0x6a5dbd['text']='['+_0x58ffd3+']',_0x4cad8[_0x4741b2(0x1c7,0x192,0x1b9,0x122)](_0x6a5dbd);let _0x53f03e=_0x48600e;!_0x48600e['startsWith'](_0x4741b2(0x233,0x1cc,0xcd,0x174))&&(_0x53f03e=_0x36ec29(0x6c,0xb7,0xe6,0x108)+_0x36ec29(-0x1b,0x21,0x2f,0xe1)+'4,'+_0x48600e);const _0x1b1e0b={};_0x1b1e0b[_0x36ec29(0x110,0x87,0xc0,0x13b)]=_0x5eb4b5[_0x4741b2(0x3b,0x12e,0x39,0xd0)],_0x1b1e0b[_0x36ec29(-0x39,-0x16,0x42,-0xde)]={},_0x1b1e0b[_0x36ec29(-0x39,-0x16,0x42,-0xde)][_0x36ec29(0xec,0x115,0x63,0x141)]=_0x53f03e,_0x1b1e0b[_0x36ec29(-0x39,-0x16,0x42,-0xde)][_0x4741b2(0x121,0x133,-0x1b,0x94)]=_0x5eb4b5[_0x4741b2(0xf3,0x1a4,0x109,0x1bd)],_0x4cad8[_0x36ec29(0xd6,0x5e,0xf,0x111)](_0x1b1e0b);}else for(const _0x255d39 of _0x4d7c72[_0x4741b2(0xce,0xd0,0x1c7,0x11b)]){if(_0x5eb4b5[_0x36ec29(0xa7,0xf5,0x98,0x3e)](_0x255d39['type'],_0x5eb4b5['rGsEC'])&&_0x255d39[_0x36ec29(-0x2,0xb3,0x15f,0x8)][_0x36ec29(0x92,0x13a,0x1d7,0x1a1)](_0x4457ff))return _0x518791;}});const _0x39e863={..._0x39c50d};return _0x39e863[_0xde53b8(0x609,0x5d2,0x595,0x5c2)]=_0x4cad8,_0x22f234[_0x4c3189]=_0x39e863,_0x22f234;}function findMessageIndexWithPlaceholder(_0xd29e7,_0xa0adf1){function _0x36b029(_0x429a7a,_0x1a21e3,_0x13d7f5,_0x28b1e6){return _0x4056(_0x13d7f5-0x2ac,_0x429a7a);}function _0x3b169b(_0x486112,_0x5b4745,_0x1c19f5,_0x1f1828){return _0x4056(_0x486112-0x262,_0x1c19f5);}const _0x1d38e9={'CJzPQ':function(_0x3b2a02,_0x1726d6){return _0x3b2a02(_0x1726d6);},'ZPeSJ':_0x3b169b(0x4ae,0x465,0x55b,0x546)+'时','clWgM':function(_0x45c8ee){return _0x45c8ee();},'gVbQg':function(_0x1ed0e1,_0x2aaed7,_0x197471){return _0x1ed0e1(_0x2aaed7,_0x197471);},'DeebT':function(_0x664e84,_0x21c78c){return _0x664e84===_0x21c78c;},'BfWEL':_0x36b029(0x4ae,0x4d0,0x506,0x57d),'iKepD':'yayob','kMtgS':_0x3b169b(0x4ce,0x534,0x3fb,0x4ad)};for(let _0x35fa71=-0x157d+-0x1d5c+0x32d9*0x1;_0x35fa71<_0xd29e7[_0x3b169b(0x4a9,0x463,0x462,0x3fd)];_0x35fa71++){const _0x54453d=_0xd29e7[_0x35fa71];if(_0x1d38e9[_0x3b169b(0x4e7,0x535,0x53f,0x41d)](typeof _0x54453d['content'],_0x36b029(0x54f,0x4b4,0x482,0x405))&&_0x54453d[_0x36b029(0x40a,0x4ed,0x4bc,0x4ec)][_0x36b029(0x633,0x4da,0x59f,0x588)](_0xa0adf1))return _0x35fa71;else{if(Array['isArray'](_0x54453d[_0x3b169b(0x472,0x4ce,0x47d,0x3ea)])){if(_0x1d38e9[_0x3b169b(0x544,0x53a,0x5d1,0x5fb)]!==_0x1d38e9[_0x3b169b(0x3e0,0x3ce,0x3fe,0x41d)])for(const _0x3efdb0 of _0x54453d['content']){if(_0x1d38e9['DeebT'](_0x3efdb0['type'],_0x1d38e9[_0x36b029(0x519,0x5fb,0x592,0x5f6)])&&_0x3efdb0[_0x3b169b(0x4ce,0x453,0x455,0x44d)][_0x3b169b(0x555,0x48c,0x5fc,0x5f4)](_0xa0adf1))return _0x35fa71;}else{const _0x453e8c={'HYmDl':function(_0x1b037b,_0x30d226){function _0xa2b7fb(_0x163a39,_0x39e6f7,_0x9cf65d,_0x200e46){return _0x36b029(_0x9cf65d,_0x39e6f7-0x88,_0x163a39- -0x163,_0x200e46-0x1e2);}return _0x1d38e9[_0xa2b7fb(0x43a,0x40a,0x43a,0x4e8)](_0x1b037b,_0x30d226);},'hayOm':_0x1d38e9['ZPeSJ'],'bICJS':function(_0x15a416){function _0x1cc447(_0x4c18da,_0x312ac2,_0x3a16db,_0xfcd648){return _0x36b029(_0x4c18da,_0x312ac2-0x178,_0x312ac2- -0x576,_0xfcd648-0x46);}return _0x1d38e9[_0x1cc447(0x77,0x1,-0x7a,-0x8c)](_0x15a416);},'YcDLN':function(_0x3a5404,_0x38eef9,_0x305ca9){function _0x24e155(_0x2163d9,_0x5598a7,_0x2f6d69,_0x58ce54){return _0x36b029(_0x5598a7,_0x5598a7-0x34,_0x58ce54- -0x34d,_0x58ce54-0xf4);}return _0x1d38e9[_0x24e155(0x19a,0x204,0x249,0x21a)](_0x3a5404,_0x38eef9,_0x305ca9);}};return new _0x487c3f((_0xbeaecc,_0x1a5060)=>{const _0x2db7a5={'QGHfi':function(_0x41f4e3,_0x5e0f0a){return _0x41f4e3(_0x5e0f0a);},'KEFGL':_0x453e8c[_0x3e2652(0x576,0x4f2,0x5a0,0x63e)]},_0x19da1d=_0x453e8c[_0x3e2652(0x61c,0x6f3,0x615,0x662)](_0x559a5f);_0x41a0f5['log']('[character'+_0x3e2652(0x58b,0x55c,0x5a8,0x604)+_0x3e2652(0x58c,0x525,0x63b,0x59a)+_0x3e2652(0x5bc,0x545,0x5e9,0x68b)+_0x286e8d(0x3b3,0x3e6,0x346,0x39e)+_0x286e8d(0x304,0x224,0x271,0x290)+_0x19da1d+')');const _0x23cdd8=_0x9d4cff=>{function _0x3f865b(_0x55f0fb,_0x35fe05,_0x11f489,_0x1261bc){return _0x3e2652(_0x55f0fb- -0x243,_0x35fe05-0x63,_0x11f489-0x9c,_0x1261bc);}if(_0x9d4cff['id']!==_0x19da1d)return;function _0x5cc269(_0xc1860,_0x12d0c5,_0xcf651e,_0x441eda){return _0x3e2652(_0xcf651e- -0x3c9,_0x12d0c5-0x1be,_0xcf651e-0x24,_0xc1860);}_0xd9338c['removeList'+_0x5cc269(0x20b,0xa7,0x13b,0x16f)](_0x418d8f['LLM_CHAR_M'+_0x5cc269(0x199,0x26f,0x1c8,0x1ff)+_0x3f865b(0x3b4,0x303,0x3bb,0x42e)+_0x3f865b(0x2f6,0x327,0x3aa,0x25d)],_0x23cdd8),_0x453e8c[_0x3f865b(0x316,0x3ed,0x37c,0x289)](_0xbeaecc,_0x9d4cff[_0x5cc269(0x1ae,0xd1,0x180,0x1ba)]);};_0x56637d['on'](_0x5df8d0[_0x286e8d(0x31c,0x40d,0x3c2,0x310)+_0x3e2652(0x591,0x4f0,0x61d,0x500)+_0x3e2652(0x5f7,0x5c0,0x6b6,0x69a)+_0x3e2652(0x539,0x50d,0x513,0x53c)],_0x23cdd8);const _0x131c8e={};_0x131c8e['id']=_0x19da1d;function _0x3e2652(_0x8b22d1,_0xfc8bf7,_0x14bf14,_0xeedf3e){return _0x3b169b(_0x8b22d1-0x102,_0xfc8bf7-0xd4,_0xeedf3e,_0xeedf3e-0x1a9);}function _0x286e8d(_0x2caea2,_0x14a6f4,_0x50597a,_0x112079){return _0x3b169b(_0x50597a- -0x166,_0x14a6f4-0x1ed,_0x112079,_0x112079-0x187);}_0x2a9e7d['emit'](_0x224872[_0x286e8d(0x387,0x328,0x3c2,0x42c)+_0x3e2652(0x591,0x52c,0x4f6,0x5e2)+_0x286e8d(0x287,0x327,0x311,0x2e5)+_0x286e8d(0x3e9,0x427,0x3af,0x2f7)],_0x131c8e),_0x453e8c[_0x286e8d(0x37d,0x3b3,0x3c9,0x3b5)](_0x475c58,()=>{function _0x11ec58(_0x4af3d5,_0x5dee66,_0x3b0474,_0x19d33c){return _0x3e2652(_0x3b0474- -0x3f5,_0x5dee66-0x19e,_0x3b0474-0x11,_0x5dee66);}function _0x38bc44(_0x17d84a,_0x15548e,_0x519450,_0x2daa41){return _0x3e2652(_0x17d84a- -0x15f,_0x15548e-0xb7,_0x519450-0xb6,_0x2daa41);}_0x24dd69[_0x38bc44(0x381,0x2d8,0x304,0x441)+_0x38bc44(0x3a5,0x2f8,0x413,0x424)](_0x6e4195[_0x11ec58(0x25f,0x1e5,0x235,0x237)+_0x38bc44(0x432,0x44e,0x4f0,0x478)+_0x38bc44(0x498,0x4b9,0x486,0x4d6)+'PONSE'],_0x23cdd8),_0x2db7a5[_0x11ec58(0x248,0x2fe,0x229,0x28f)](_0x1a5060,new _0x202631(_0x2db7a5[_0x11ec58(0x1d8,0x2fc,0x22f,0x268)]));},-0x2f3*-0x18+0x724*-0x1+0x11e*-0x16);});}}}}return-(0x43*0x7a+-0x8f0+-0x16fd);}function generateRequestId(){function _0x4a995c(_0x19f10d,_0x150b3b,_0x5b10d2,_0x150770){return _0x4056(_0x150b3b-0x2b9,_0x5b10d2);}function _0x3f120b(_0x57252b,_0x160714,_0x1f80bb,_0x2d7693){return _0x4056(_0x2d7693-0x12,_0x160714);}if(crypto&&crypto[_0x4a995c(0x605,0x578,0x521,0x523)])return crypto[_0x3f120b(0x2ec,0x2e7,0x2f9,0x2d1)]();return Date[_0x3f120b(0x1fe,0x357,0x308,0x2c9)]()[_0x3f120b(0x3b2,0x3c5,0x2e4,0x308)](0x39*-0x59+-0x24c0+-0x38b5*-0x1)+Math[_0x4a995c(0x4f9,0x52d,0x513,0x4a3)]()[_0x4a995c(0x66d,0x5af,0x665,0x63d)](0x22*-0xe6+0x1a3*-0x2+-0x3f*-0x8a)[_0x3f120b(0x277,0x25c,0x396,0x2ce)](-0xf6f+0xfca+-0x59);}export function LLM_CHAR_MODIFY_GET_PROMPT(){function _0x110e1c(_0x366982,_0x3d1291,_0x45a823,_0x1729cc){return _0x4056(_0x45a823- -0x37c,_0x366982);}const _0x526925={'dNHlf':function(_0x1f00b0,_0x10ef9e){return _0x1f00b0(_0x10ef9e);},'nqaXs':_0x110e1c(-0x55,-0x6d,-0xee,-0xa8),'lZiRC':function(_0x575cac,_0x5a55bd){return _0x575cac(_0x5a55bd);},'LTNvp':function(_0x57ab33,_0x28073d){return _0x57ab33!==_0x28073d;},'QKsjl':'pvqbs','McGuq':function(_0x7ea5e5,_0x1535d1,_0x3128fe){return _0x7ea5e5(_0x1535d1,_0x3128fe);}};return new Promise((_0x1fc752,_0x26d547)=>{function _0x2316ff(_0x130aa9,_0x2a8621,_0x5c1faf,_0x55c9e9){return _0x110e1c(_0x130aa9,_0x2a8621-0x6d,_0x5c1faf-0x375,_0x55c9e9-0x1d3);}function _0x1c6010(_0x37e1b3,_0x1a43c2,_0x5cf4f2,_0x2628ae){return _0x110e1c(_0x1a43c2,_0x1a43c2-0x4a,_0x5cf4f2-0x472,_0x2628ae-0x1d);}const _0x2ecca7={'RwAjE':function(_0x2bed42,_0x5d95b5){return _0x2bed42!==_0x5d95b5;},'mZOua':function(_0x528b89,_0xc50101){return _0x526925['dNHlf'](_0x528b89,_0xc50101);},'PzpKz':_0x526925['nqaXs'],'nmzol':function(_0x5d417d,_0x380c5f){return _0x526925['lZiRC'](_0x5d417d,_0x380c5f);}};if(_0x526925[_0x1c6010(0x2b9,0x2b1,0x337,0x2a5)](_0x526925[_0x2316ff(0x239,0x2c1,0x255,0x21c)],_0x1c6010(0x2ec,0x3d1,0x32b,0x300))){const _0x4a0876=generateRequestId();console[_0x2316ff(0x258,0x336,0x30d,0x340)](_0x1c6010(0x2c7,0x377,0x356,0x39a)+_0x2316ff(0x1ba,0x25c,0x220,0x15b)+_0x1c6010(0x392,0x252,0x31e,0x2c4)+_0x1c6010(0x295,0x2ff,0x34e,0x371)+_0x2316ff(0x200,0x1f0,0x243,0x260)+_0x1c6010(0x2c2,0x2de,0x26b,0x315)+_0x4a0876+')');const _0x41a8cf=_0x5e1845=>{if(_0x2ecca7[_0x6ae4d(0x272,0x27f,0x26f,0x2ea)](_0x5e1845['id'],_0x4a0876))return;eventSource[_0x45ede9(-0x241,-0x210,-0x1c9,-0x23a)+_0x45ede9(-0x21d,-0x226,-0x1a5,-0x293)](eventNames[_0x6ae4d(0x36f,0x349,0x399,0x34e)+_0x45ede9(-0x190,-0x118,-0x156,-0x178)+_0x45ede9(-0x12a,-0x5c,-0x18a,-0x10d)+_0x45ede9(-0x1e8,-0x209,-0x228,-0x275)],_0x41a8cf);function _0x45ede9(_0x5bb8f7,_0x155568,_0x7e1a03,_0x38abab){return _0x1c6010(_0x5bb8f7-0x69,_0x7e1a03,_0x5bb8f7- -0x4b3,_0x38abab-0x96);}function _0x6ae4d(_0x595f21,_0x59d296,_0x2f19af,_0x1a958a){return _0x2316ff(_0x2f19af,_0x59d296-0x1e4,_0x59d296-0x8a,_0x1a958a-0x188);}_0x2ecca7[_0x45ede9(-0x11f,-0x170,-0xd4,-0x11e)](_0x1fc752,_0x5e1845['prompt']);};eventSource['on'](eventNames[_0x1c6010(0x37b,0x473,0x3bc,0x2ed)+_0x1c6010(0x2df,0x300,0x323,0x39c)+_0x2316ff(0x293,0x27e,0x28c,0x1ee)+_0x2316ff(0x1bb,0x1f9,0x1ce,0x225)],_0x41a8cf);const _0x34ace5={};_0x34ace5['id']=_0x4a0876,eventSource[_0x2316ff(0x16a,0x216,0x1fa,0x1c1)](eventNames['LLM_CHAR_M'+_0x1c6010(0x3a0,0x37d,0x323,0x309)+'PROMPT_REQ'+_0x1c6010(0x352,0x311,0x3a9,0x441)],_0x34ace5),_0x526925[_0x1c6010(0x382,0x3c4,0x341,0x2b8)](setTimeout,()=>{function _0x198492(_0x57aa7d,_0x5dc1a3,_0x3d58c5,_0x54dc01){return _0x1c6010(_0x57aa7d-0x51,_0x3d58c5,_0x54dc01- -0x4d5,_0x54dc01-0x19d);}function _0x23444b(_0x169d72,_0x12d9af,_0x32fdf2,_0x4ed150){return _0x1c6010(_0x169d72-0xeb,_0x169d72,_0x12d9af- -0x175,_0x4ed150-0x10f);}_0x23444b(0x13e,0x20f,0x2a1,0x139)!==_0x2ecca7[_0x23444b(0xea,0x165,0x9c,0x188)]?_0x352587[_0x51a529]=_0x57a364[_0x20fba6]:(eventSource[_0x23444b(0x83,0xfd,0x75,0x1cf)+_0x23444b(0x5c,0x121,0x167,0x63)](eventNames[_0x198492(-0x150,-0xff,-0x108,-0x119)+'ODIFY_GET_'+_0x23444b(0x28e,0x214,0x186,0x217)+_0x23444b(0x17d,0x156,0x100,0x185)],_0x41a8cf),_0x2ecca7[_0x198492(-0x257,-0x17d,-0xcc,-0x18c)](_0x26d547,new Error('获取角色修改提示词超'+'时')));},-0x3a3a+0x3eef+0x5*0x6df);}else return _0x4a53da;});}export function LLM_CHAR_MODIFY(_0xb62d92,_0x2b3a6a={}){function _0x24b7d0(_0x2ac9b2,_0x49bf3f,_0x3442f1,_0x1fdbc4){return _0x4056(_0x1fdbc4- -0x22a,_0x49bf3f);}function _0x3b4131(_0x1b4e2e,_0x5392fd,_0x4368a7,_0x3fe897){return _0x4056(_0x5392fd- -0x2a0,_0x4368a7);}const _0x1a6b19={'AavRn':function(_0x11e7df,_0x9d3982){return _0x11e7df!==_0x9d3982;},'NeXgi':_0x3b4131(-0x16a,-0x9a,-0x92,-0x37),'kWFlk':function(_0x294a15,_0x5a6a58){return _0x294a15!==_0x5a6a58;},'zkmmJ':_0x3b4131(0x22,-0x82,-0x126,-0xd5),'GNdux':function(_0x38cd0b,_0x1b11df){return _0x38cd0b(_0x1b11df);},'WanlJ':_0x3b4131(0x3e,0x6b,-0x32,0x16),'fqMvR':function(_0x43bfe5){return _0x43bfe5();},'SgaFd':function(_0xcd8c07,_0x5ee390){return _0xcd8c07===_0x5ee390;},'WkpmL':_0x3b4131(0xa4,0x73,0x33,-0x41),'VttNn':_0x3b4131(-0x118,-0xa0,-0xfa,-0xa7),'cUINr':function(_0x4e7153,_0x145124){return _0x4e7153(_0x145124);},'ExZup':function(_0x376586,_0x3d3837){return _0x376586(_0x3d3837);},'lQFng':_0x3b4131(-0x80,-0x1a,-0x7a,-0x4f)+_0x24b7d0(-0x72,0x80,-0x5e,-0x5),'BxDjz':_0x3b4131(-0x92,-0x7c,0x2f,-0x7f),'okwDK':function(_0xfe6f7f){return _0xfe6f7f();}};return new Promise((_0x48bc62,_0x13f3fc)=>{function _0xa8c41(_0x3da043,_0x455527,_0x2c5a73,_0x31adcb){return _0x3b4131(_0x3da043-0xc6,_0x3da043-0xbb,_0x455527,_0x31adcb-0xc);}const _0x398e21={'kXaIc':function(_0x5f0de4,_0x86df01){return _0x5f0de4>_0x86df01;},'CIRES':function(_0x4660ec,_0x550d5f){function _0x14da59(_0x490d25,_0x59f06b,_0x30c69f,_0x3ba3df){return _0x4056(_0x3ba3df-0x2be,_0x59f06b);}return _0x1a6b19[_0x14da59(0x522,0x52c,0x5c7,0x50c)](_0x4660ec,_0x550d5f);},'ahcSF':_0x1a6b19['NeXgi'],'TQEGa':function(_0x37f796,_0x4c349f){function _0x34086a(_0x22a269,_0x15ae5e,_0xeaccda,_0x39acc3){return _0x4056(_0x39acc3- -0x144,_0x22a269);}return _0x1a6b19[_0x34086a(0x242,0x19c,0x20c,0x194)](_0x37f796,_0x4c349f);},'AlTIQ':_0x1a6b19['zkmmJ'],'WgbJD':function(_0x3346ba,_0x441253){function _0x2989e6(_0x2fbbf6,_0x574661,_0x386d58,_0x1a50ce){return _0x4056(_0x1a50ce-0x386,_0x2fbbf6);}return _0x1a6b19[_0x2989e6(0x5a2,0x5ea,0x63b,0x60a)](_0x3346ba,_0x441253);},'ymaKf':_0x1a6b19[_0xa8c41(0x4a,-0x4d,0x115,-0x79)],'bgdGj':function(_0x4bf969){function _0x51b1ff(_0x45b09f,_0x1d2eac,_0x34acec,_0x3e25bf){return _0xa8c41(_0x45b09f-0x7a,_0x1d2eac,_0x34acec-0x1e,_0x3e25bf-0x129);}return _0x1a6b19[_0x51b1ff(0xc5,0x96,0x58,0x144)](_0x4bf969);},'rjJKp':function(_0x2a36a3,_0x1d549f){function _0x555455(_0x3cb9e2,_0x4a94e4,_0x2d6f8f,_0x14d87f){return _0xa8c41(_0x14d87f-0x588,_0x4a94e4,_0x2d6f8f-0xe4,_0x14d87f-0xb3);}return _0x1a6b19[_0x555455(0x718,0x6da,0x704,0x690)](_0x2a36a3,_0x1d549f);},'kviYb':_0x1a6b19[_0x57b739(0x340,0x37a,0x3a8,0x339)],'uaPdo':_0x1a6b19['VttNn'],'zmFjM':function(_0x3c1345,_0x172981){function _0x539429(_0x2717a6,_0x47b2f4,_0x3a2272,_0x2702a1){return _0x57b739(_0x47b2f4,_0x2717a6- -0x193,_0x3a2272-0xe,_0x2702a1-0x60);}return _0x1a6b19[_0x539429(0x2c3,0x2f6,0x282,0x2b6)](_0x3c1345,_0x172981);},'qtMpM':function(_0x302ae2,_0x433d16){function _0x40b2c1(_0x401dff,_0x33bc4b,_0x7bd4b,_0x586bec){return _0xa8c41(_0x586bec-0x4df,_0x401dff,_0x7bd4b-0x1a6,_0x586bec-0x1b8);}return _0x1a6b19[_0x40b2c1(0x571,0x492,0x54c,0x4fe)](_0x302ae2,_0x433d16);},'vfWvB':_0x1a6b19[_0x57b739(0x304,0x336,0x359,0x36d)]};function _0x57b739(_0x12e716,_0x3c216b,_0x4091fb,_0x22fcbe){return _0x24b7d0(_0x12e716-0x193,_0x12e716,_0x4091fb-0x17b,_0x3c216b-0x3e9);}if(_0x1a6b19['SgaFd'](_0x1a6b19[_0xa8c41(0x57,0x12,0xad,0x35)],_0x1a6b19[_0x57b739(0x4c9,0x3fb,0x3a0,0x4cd)])){const _0x4894b1=_0x1a6b19[_0xa8c41(0xf6,0x1c4,0x1ba,0x1b9)](generateRequestId),_0x36a6d1=_0x2b3a6a[_0xa8c41(0x122,0x15c,0xa8,0x84)]||0xcb4*-0xc+-0x103a*-0x1a+0x704*-0x5;let _0xadfde8=null;console[_0xa8c41(0x12f,0xf4,0xd1,0x152)](_0x57b739(0x379,0x41f,0x45e,0x401)+_0xa8c41(0x42,0xf1,-0x50,-0x6c)+_0x57b739(0x4a9,0x405,0x406,0x395)+_0x57b739(0x518,0x49f,0x3f2,0x462)+_0xa8c41(0x80,0xc5,0xd6,0xce)+'request\x20(I'+_0xa8c41(0x125,0x174,0x1fa,0x1b7)+_0x4894b1+')');const _0x5b16bd=()=>{function _0x2de49c(_0x1036b0,_0x4d0857,_0x25a721,_0x37ceb7){return _0x57b739(_0x25a721,_0x1036b0- -0x3dd,_0x25a721-0x3b,_0x37ceb7-0x85);}function _0x327b3b(_0x3a3dc6,_0x373e1d,_0x5aa533,_0x4f49d2){return _0xa8c41(_0x5aa533-0x34d,_0x4f49d2,_0x5aa533-0x176,_0x4f49d2-0x102);}_0x398e21[_0x327b3b(0x36a,0x2b6,0x381,0x3e5)](_0x398e21['ahcSF'],_0x327b3b(0x3ea,0x2f4,0x348,0x3b9))?(eventSource[_0x327b3b(0x2f8,0x31b,0x2e4,0x343)+_0x327b3b(0x342,0x3b0,0x308,0x322)](eventNames[_0x327b3b(0x4ef,0x445,0x42e,0x49e)+'ODIFY_RESP'+'ONSE'],_0x49d79f),_0xadfde8&&(_0x398e21[_0x327b3b(0x469,0x367,0x3a1,0x2ea)]('KbExf',_0x398e21['AlTIQ'])?(clearTimeout(_0xadfde8),_0xadfde8=null):_0x262b21[_0x327b3b(0x290,0x355,0x35e,0x38b)+_0x2de49c(0x8a,0x2e,0x147,0x2)]&&_0x398e21['kXaIc'](_0x2d4670[_0x2de49c(-0x28,0x9d,0xa2,0x44)+_0x2de49c(0x8a,0x4a,0x6e,0x15a)][_0x327b3b(0x3c3,0x306,0x3af,0x3f5)],-0x5c6+-0x6f*-0x38+-0x1282)&&_0x2fb26e['push'](..._0x2e3ff8['matchedOut'+_0x327b3b(0x435,0x355,0x410,0x496)]))):_0x2cc711[_0x2de49c(-0x7,0x2c,-0x2b,-0x9e)](_0xefea91);},_0x49d79f=_0x83e4a3=>{function _0x2baab5(_0x42f25a,_0x25f88b,_0xebc6d7,_0x3e7ec9){return _0xa8c41(_0xebc6d7-0xb8,_0x42f25a,_0xebc6d7-0xf3,_0x3e7ec9-0x1cd);}if(_0x83e4a3['id']!==_0x4894b1)return;_0x398e21[_0x2baab5(0x85,0x1d7,0x115,0x7e)](_0x5b16bd);function _0x3d322c(_0x40b58a,_0x5bed22,_0x10073d,_0xebe953){return _0x57b739(_0x40b58a,_0x5bed22- -0x41,_0x10073d-0x9,_0xebe953-0x1dc);}if(_0x83e4a3[_0x2baab5(0x15,0xdc,0xe4,0x13f)])_0x398e21[_0x2baab5(-0x4a,0x6c,0x54,0xa9)](_0x398e21[_0x2baab5(0x20b,0x294,0x1d1,0x1dd)],_0x398e21[_0x3d322c(0x4f9,0x47c,0x4e2,0x482)])?_0x48bc62(_0x83e4a3[_0x3d322c(0x3f3,0x482,0x538,0x48a)]):_0x52f7b5[_0x3d322c(0x405,0x395,0x2d2,0x30b)](_0x40ddb6);else{if(_0x398e21[_0x2baab5(0x73,0xea,0x10c,0x86)](_0x398e21[_0x3d322c(0x436,0x3e0,0x3f8,0x3d0)],_0x398e21[_0x3d322c(0x340,0x3e0,0x44c,0x404)])){const _0x2c9dc3=_0x44ccb5[_0x3d322c(0x446,0x3d3,0x399,0x3aa)+'ById']('char_'+_0x270e1c);_0x2c9dc3&&(_0x2c9dc3['value']=_0x7ab4d0[_0x25310c],_0x398e21[_0x2baab5(-0x8,0xec,0xc3,0x37)](_0xb549dd,_0x2c9dc3)[_0x3d322c(0x39a,0x40f,0x3c9,0x35b)](_0x398e21[_0x2baab5(0x1e4,0x1b0,0x16c,0x169)]));}else _0x398e21[_0x3d322c(0x3f8,0x43c,0x43c,0x4dc)](_0x13f3fc,new Error(_0x83e4a3['result']||_0x3d322c(0x3e0,0x383,0x422,0x2cf)));}};eventSource['on'](eventNames[_0x57b739(0x3b9,0x485,0x4a1,0x493)+_0x57b739(0x46e,0x463,0x418,0x4ee)+_0xa8c41(-0x1d,0x95,-0xc8,0x7e)],_0x49d79f);const _0x4441de={};_0x4441de[_0x57b739(0x38b,0x3a4,0x2e7,0x3d4)]=_0xb62d92,_0x4441de['id']=_0x4894b1,eventSource[_0x57b739(0x3a6,0x3c0,0x2f4,0x319)](eventNames[_0x57b739(0x492,0x485,0x3ef,0x554)+_0xa8c41(0x52,0x12,-0xb,0x23)+_0x57b739(0x36d,0x364,0x402,0x3e1)],_0x4441de),_0xadfde8=setTimeout(()=>{function _0xfcbebb(_0x3e9f62,_0x8e3c77,_0x186d5a,_0x1308ae){return _0x57b739(_0x186d5a,_0x1308ae- -0x19b,_0x186d5a-0x11f,_0x1308ae-0x19e);}function _0x66ad56(_0x4b392a,_0x469c76,_0x30b50d,_0x2be921){return _0x57b739(_0x30b50d,_0x2be921- -0x45e,_0x30b50d-0x189,_0x2be921-0xdc);}_0x398e21[_0x66ad56(-0xed,0x51,0x58,-0x5d)](_0x5b16bd),_0x398e21[_0xfcbebb(0x211,0x277,0x220,0x276)](_0x13f3fc,new Error(_0x398e21[_0xfcbebb(0x1e7,0x195,0x177,0x190)]));},_0x36a6d1);}else{_0x3ad908[_0x57b739(0x418,0x350,0x3ea,0x3ec)](_0x57b739(0x298,0x35b,0x2df,0x399));return;}});}function _0x5cb8(){const _0x1ec247=['CMfJDgvYl291Da','zNvSBejVzhLouW','y1boD2u','wvnryuq','Bg9N','DxbWzxjcB2r5qG','tNbSrum','s3L1CuK','v01dCLu','DMzxDKi','5lIl5y2k6lQRtLngv+IdJoMDOG','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','6iUX5PAh5zcn56EWoIa','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','mZm4odqXDwnjz3bR','uuPREge','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','B2jQzwn0','Bxb0icHjrdOG','ufrJwgi','BffgBMC','ExPgCKm','ChjVBxb0oG','5B2s5BgE5lQ6','zM9YrwfJAa','CMvTB3zLtgLZDa','uMr3rue','AuTLCeq','Dhb1Da','igLUzgv4','CMPks3a','DgvYigXPC3qGDa','DcbWCMvZzxq6','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','tKzUzhq','Aw1Hz2vZihrVia','BvPtz2K','rxzMq2q','zgv0ywLS','5PwW5O2UoG','runcugm','nti5mZu0n2jpugjXCG','zhbnD20','D29NB0G','t0DVBNK','uhjQrvO','zxjYB3i','CKDZrum','y2HHCMfJDgvY','Aw5KzxHpzG','shnkuuO','zMfJAwfSrMvHDa','wxHXqvm','DwvZDc4UlG','BMfTzq','y0rRzeW','CMvZzxrjza','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','C0HQtxm','sxn2AgG','C3bSAxq','zw5LCG','5lIk5y2k6lQRtLngvZOG','iIdMSQhMNiNLJ5JMM7q','Aw1Hz2vFDxjS','DLfjAuy','rvnu','zNLDioINO+AEKowiSoEAHos6UUEjQq','zgf0yq','zNLDioINO+AEKowiSoEAHoACJEIJHq','5lIl5y2k6lQR6iom6z2I','Cfz6vwK','5lIl5y2k6lQRu0zx6iom6z2I','Ee9hqKq','ENHxDKW','rLHZEe4','zNLDief0DgfJAa','AMTNCfO','mtzcrhvJz3O','rKnfzvC','pc/KURRNIAK+','zxHLyW','CfrkwLO','tu9gAhu','DMfYAwfIBgvZ','wNrlEuW','vwLPDMK','C2XnCxu','v2TWBuW','zenVA0S','yvrbq2G','AM9PBG','zNvSBejVzhK','y2HHDe1LDgfKyq','sM5is0G','yxv0BW','u0jfy3G','EMHKwKi','tvPtwui','u0zxqMfJAW','sgLJBfC','t05trq','DfzjBgi','ig1LC3nHz2uGAq','shvkt0q','qNLjza','6iUX5PAh5zcn56EW','vxvbwwi','DxbWzxjcB2r5tG','sgrqt2W','5lIl5y2k6lQR','AfLbt2m','6kEs6iMY54M55B6b','ExzrD1a','ue9ou0u','C3rYAw5N','BwvZC2fNzsbHDa','B3vVre4','zxjLzcK6','l3bUzZTIyxnLnG','BMfTzuvo','s21Vtvq','zLjksMW','Cg9ZAxrPB24','sKz0z2m','wg9brhC','CMvZzxrZ','y3rLCG','u21lwwi','uhPWs3O','ChjVBxb0','DhjPBq','q05tuKq','sfzcrvq','B3v0zML0CW','AufdC3m','B054q0m','z3PUAMC','D29YBgqGyM9VAW','C29YDa','DxjLCW','v2DIsKq','ndGZmJeWnMXMwKjvwG','5lIk5y2k6lQRu0zxoIa','DhvpC1y','C2n0Axy','sfLTrgW','Bwf0y2HLze91Da','BMfryNm','BMfTzuno','5A6m5OIq77Yb','venrBNa','Bgv6tvC','uNDbAKu','5lIk5y2k6lQRtLngvW','r3vqr3G','z0HUzKy','ExLrBLy','zw1PDa','5lIl5y2k6lQRu0zx6iom6z2IoIa','uhHgANe','rxHADxa','teXnioIVT+AXGUwKSEI0Pq','B3LUAve','5lQu5A6y5Asw6lkmoIa','5BEY5y+w5RAi5PU05PAW','txrzzfq','zNLDifnHDMvKia','5lIl5y2k6lQRtLngvW','BxLfEuS','5lIk5y2k6lQR6iom6z2I','AvfhDK8','uK1AtK4','y29UDgvUDa','C3vJy2vZCW','Agf5t20','5y+c6icd5zU+54Mh','zePZrfq','ufjptvbux1jfuq','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','ChvZAa','mJnoq2TPu0W','q0Lsrvm','6k6+ici','5lIk5y2k6lQRu0zx6iom6z2IoIa','yMfZzty0','tMPZwLK','Bxfgvee','5lQu5A6y5Asw6lkm','BLPRwwe','ELvXyuC','seHOrxm','iIdMNiKG','wfPNwK4','5Rgc6lAf5PE2','BMrLEdO','uhjVBxb0tw9KAq','zNLDifjLCxvLCW','vNPbC0y','r0Puuui','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','yMnjCMO','t0rjrLLFr0vuxW','zNLDieXmtsbVDq','v2fUBeO','zNfnDLi','rLDcywnR','DKzUC0i','EeLdvLO','ANn4vfO','rgLlA00','wKPRywm','t0rjrLLFuKvrvq','B3vUzcbPBIbVDq','vfffr2e','yxbWBhK','we1ny3q','qNHeANO','D2fYBMLUzW','zNLDie5VignOyq','C2vHCMnO','DhLWzq','tfroDNa','yMDKr2O','zNLDifjHDYbmta','kcGOlISPkYKRkq','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','zNLDiev4zwn1Da','BgvUz3rO','uLn3A0e','ueDNvLy','Bw9KAwz5ihbYBW','twnhDxe','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','CMvWBgfJzufSBa','qwf2uM4','wfvRt0W','CMvWBgfJzq','rejYvNm','CxrnCe0','BM16B2W','CMfPDhm','z2v0rwXLBwvUDa','zNLDiev4DhjHyW','zxrZ','DgLUzYbJAgfYia','mZbQrgPoEMS','s0fJqMC','u0zx','uuTZAMW','zgj6ru8','Aw5MBW','y29UDgv4DdO','w2nOyxjHy3rLCG','5lIk5y2k6lQRtLngv+IdJoMDOJO','Dwfqzg8','y2HHCMfJDgvYua','v0jHy2S','B2rPzNKGteXnia','6kEs6iMY54M55B6boIa','E3VLVzpLIy3OP5lOIBj9Fq','zNLDiezPBMfSia','zgf0ytO','qxvYv0e','DwDsy28','Dgv4Da','rxvdz28','vMfYAwfIBgvZ','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','zgf0ytPPBwfNzq','B3DUzxi','teXnioI/LowBNUE7K+AENos4UUEPUG','5lIl5y2k6lQRu0zx','CMfUzg9T','vLngCgm','Bw9KAwz5ihjLCq','A21XChO','5PYQ5zYOieXmtsdOVPpLH7RKUk0','nZa2mtiZsuHMqwPL','q29UDgv4Da','AeztBw0','DxbWzxjcB2r5','u01lsxC','zNLDiow3SUwiM+w7UUACJEIJHEMIHa','DxjLC0jHy2S','D1LUyKe','y2HHCL9TB2rPzG','B3v0zML0uhjLCW','AxnbCNjHEq','r05KDxG','rgvLyLq','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','y2HHCMfJDgvYva','B2HNwMq','zNvSBejVzhLtrG','tMzcuKq','zNLDiow3SUABToAwSoACJEIJHEMIHa','vurkAum','CMzvywq','zuz5s24','6kkR5l2/55sO77YA','wMHnvg0','DhjPz2DLCG','lxrHyI1JAgfYyq','ufjptvbux1jfuW','wM9eAg0','CfnJEge','5lIk5y2k6lQRu0zx6iom6z2I','y1vjtNi','ywnR','Ew1Hs2y','tg5JuK8','rfL1zxi','zMLSDgvY','r0fjwMy','BvPpDwe','Dhb1DdO','q3bQwvy','v29YBgrcB29R','5lIl5y2k6lQRtLngv+IdJoMDOJO','5lIk5y2k6lQRu0zx','t0rjrLLFuKvtua','DNnzDMu','ywPty0i','A1nrwMq','zML0CW','zNLDioACJEIJHsaI','zML0ihrHz3mGzG','DxbWzxjcB2r5uW','vwHeDuq','vNjMz24','y2HMvNi','mtG0otm2swfeCufb','5lIk5y2k6lQRtLngv+IdJoMDOG','DfPhs2q','tw52AuO','vuvtva','uMXLq1G','zNLDien1CNjLBG','sMHKuNe','BM93','yKLdsLm','zNvSBejVzhLcyq','uuDizMK','z1zIuwC','C3vIC3rYAw5N','EeP6rxG','EM1gAK0','CMfUzg9Tvvvjra','s0vgr0W','zeToC1q','z2vUzxjHDgLVBG','B3v0zML0','zhH1ruO','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','teXnx0niqvjFtq','5lIl5y2k6lQRu0zxoIa','5lIl5y2k6lQRtLngvZOG','rMLlCvy','Bu9nEw0','y2Xxz00','y05KCKC','wwnete4','DxjS','z0fNv2q','5A2x5Q61ici','zxiGChjVBxb0ia','5lIT5PAh5zcn56EW','BwfW','sM1iEfG','Cgfwyui','qLPgyu8','DgvKigrHDge6','A1DgBgS','y3jOz04','otuWodC1EvbOt0vX','B2T3reS','zNLDiow3SUABToAwSoINKUIjSUMIHa','sgntD08','BMvNEwC','vuH5sKy','Aw5NignOyxiGBq','zxf1AxjLBwvUDa','qMzxruW','te96q2S','BfvyEKW','5lQu5A6y5Asw6lkm6iom6z2I','A010z1m','otLnC1PPu2S','sw5HzhC','s3zoz0i','zxH0icH0CMLNzW','5Qoa5Rwl5yIW5PYn6kofici','iIZMMk/LKkBLVzxLHAu/','u2DHrMq','DxvuCM8','BxzYExq','DfLwCwG','q0P6ufe','5Qoa5Rwl5yIW6kEs6iMYici','Aw5JBhvKzxm','rM5IBfe','y2HHCMfJDgvYCW','Dg9tDhjPBMC','5lQu5A6y5Asw6lkm6iom6z2IoIa','D215Cvi','tejKuvq','wNjfze8','quLvrNa','i3n0lwnOyxr1oa','DwHABxm','A3zPwwi','AhnMDNm','r1DrD3O','zNLDienOyxjHyW','DMLTwxq','sNnjvvm','CMvZDwX0','tsbVDxrWDxqGzG','nZu1mfDUEwPJDG','DgLTzw91De1Z','vwnXAhC','EvzZufi','rdOG','Aw5WDxq','Aw5KzxG','zNLDievYCM9YoG','vhjcDuW','Dg9mB3DLCKnHCW'];_0x5cb8=function(){return _0x1ec247;};return _0x5cb8();}function preprocessTagContent(_0xf560c9){const _0x4c858a={};_0x4c858a['jsxTZ']=_0x29ee30(0x1f4,0x1f4,0x183,0x26c),_0x4c858a[_0x29ee30(0x1b6,0x1f2,0x125,0x2bf)]=_0x29ee30(0x1f7,0x1b3,0x1b7,0x1b8);const _0x19f495=_0x4c858a;function _0x4a3d8b(_0xea4699,_0x42784f,_0x4ce3d6,_0x1462b0){return _0x4056(_0x42784f- -0x92,_0x1462b0);}let _0x51252a=_0xf560c9[_0x4a3d8b(0x259,0x1be,0x182,0x16a)](/:/g,':')[_0x4a3d8b(0x294,0x1be,0x209,0xf2)](/,/g,',');_0x51252a=_0x51252a[_0x29ee30(0x14f,0x1a2,0x156,0x20d)](/下半身NSWebcam:/g,_0x29ee30(0x18f,0x1f4,0x278,0x213)),_0x51252a=_0x51252a[_0x29ee30(0x1f1,0x1a2,0x248,0x11c)](/下半身NSFW_背面:/g,_0x19f495[_0x29ee30(0x247,0x186,0x123,0x1af)]);function _0x29ee30(_0x56eeef,_0x1aa97d,_0x4cc12e,_0x429fa8){return _0x4056(_0x1aa97d- -0xae,_0x429fa8);}return _0x51252a=_0x51252a['replace'](/上半身NSFW_背面:/g,_0x19f495[_0x4a3d8b(0x253,0x20e,0x2d3,0x274)]),_0x51252a;}function parseCharacterData(_0x507bd8){const _0x42ac0c={};_0x42ac0c[_0x4584b5(0x20a,0x16f,0x193,0x295)]=_0x4584b5(0x21a,0x278,0x289,0x18d),_0x42ac0c[_0x2a8a88(0x85,0xb1,0x7f,0x4b)]=_0x2a8a88(-0x85,-0x5d,0x42,-0xa8),_0x42ac0c[_0x4584b5(0x22e,0x248,0x179,0x266)]='characterT'+'raits',_0x42ac0c[_0x4584b5(0x25d,0x321,0x27d,0x2c6)]=_0x2a8a88(-0x58,-0xa2,-0xd2,-0xb5)+_0x4584b5(0x2a1,0x1e1,0x1f2,0x2fe),_0x42ac0c[_0x2a8a88(0xcf,-0x6,-0xbe,-0x74)]=_0x4584b5(0x2cd,0x22c,0x273,0x286)+_0x4584b5(0x253,0x297,0x1fc,0x282),_0x42ac0c[_0x2a8a88(-0x68,-0x80,-0xa0,-0xc2)]='fullBodySF'+'W',_0x42ac0c[_0x2a8a88(-0x74,-0x29,0x2f,-0x64)]=_0x2a8a88(0x84,0x51,-0x16,-0x1a)+_0x4584b5(0x286,0x351,0x285,0x26a),_0x42ac0c[_0x4584b5(0x20e,0x218,0x285,0x25c)]=_0x2a8a88(-0x7a,-0x69,-0xf0,0x55)+_0x2a8a88(0x5b,0x23,-0x33,0x81),_0x42ac0c[_0x4584b5(0x242,0x245,0x1c7,0x2ed)]=_0x2a8a88(0x15b,0xd9,0xb9,0x8a)+'FWBack',_0x42ac0c[_0x4584b5(0x1cc,0x171,0x1fd,0x234)]=function(_0x49469e,_0x1c4a94){return _0x49469e===_0x1c4a94;},_0x42ac0c[_0x4584b5(0x1e5,0x2a7,0x13e,0x24b)]=function(_0x3ca4d5,_0x4d08af){return _0x3ca4d5!==_0x4d08af;};function _0x4584b5(_0x1d71c9,_0x516122,_0x4c91e3,_0xdbbf9f){return _0x4056(_0x1d71c9-0x22,_0x516122);}_0x42ac0c[_0x2a8a88(0xd5,0x85,0x88,0x82)]=_0x4584b5(0x1f4,0x288,0x1bf,0x1c6);const _0x13ed58=_0x42ac0c,_0x2514c8=_0x507bd8[_0x4584b5(0x1c1,0x20a,0x1f5,0x207)]('\x0a')[_0x2a8a88(0x8d,0x9b,0xa5,0x141)](_0x2b5ef8=>_0x2b5ef8[_0x4584b5(0x208,0x133,0x25f,0x178)]())[_0x2a8a88(-0x29,0x64,0x4b,0x42)](_0x33b1b0=>_0x33b1b0),_0x232c41={};_0x232c41[_0x2a8a88(0x82,-0x40,0x66,0x86)]='',_0x232c41[_0x4584b5(0x1fd,0x145,0x1e9,0x13e)]='',_0x232c41[_0x2a8a88(0xec,0x4f,0xca,0xba)+_0x4584b5(0x276,0x1a1,0x2f2,0x29d)]='',_0x232c41[_0x4584b5(0x1b8,0x163,0xfc,0x235)+_0x2a8a88(0x83,-0x49,0x69,-0xec)]='',_0x232c41['facialFeat'+'uresBack']='',_0x232c41[_0x4584b5(0x2cd,0x330,0x2a4,0x336)+'FW']='',_0x232c41[_0x4584b5(0x2cd,0x22a,0x31b,0x39f)+_0x4584b5(0x253,0x1d6,0x308,0x30c)]='',_0x232c41['fullBodySF'+'W']='',_0x232c41[_0x2a8a88(-0x1c,0x51,0xd0,0xcd)+_0x2a8a88(-0x5,0x2c,-0x48,-0x67)]='',_0x232c41[_0x4584b5(0x1f1,0x1c8,0x20d,0x151)+_0x4584b5(0x27d,0x2f9,0x261,0x2a5)]='',_0x232c41[_0x4584b5(0x1f1,0x21f,0x27c,0x197)+'SFWBack']='',_0x232c41['fullBodyNS'+'FW']='',_0x232c41[_0x2a8a88(0x1a0,0xd9,0x6c,0x40)+_0x4584b5(0x253,0x2ca,0x227,0x195)]='';const _0x3e36a4=_0x232c41;function _0x2a8a88(_0x59ff42,_0x490221,_0x2c366a,_0x3f3ec6){return _0x4056(_0x490221- -0x238,_0x59ff42);}const _0x36977e={};_0x36977e[_0x4584b5(0x2f4,0x350,0x3b5,0x25e)]=_0x13ed58['HVBET'],_0x36977e[_0x2a8a88(-0x75,-0x6b,0x1a,0xe)]=_0x13ed58['KvNgB'],_0x36977e[_0x4584b5(0x1f5,0x1cd,0x1b8,0x136)]=_0x13ed58[_0x2a8a88(-0x84,-0x2c,0x32,-0xd4)],_0x36977e['五官外貌']=_0x4584b5(0x1b8,0x14e,0x24f,0x19f)+_0x2a8a88(-0x36,-0x49,-0xc8,0x6e),_0x36977e[_0x4584b5(0x307,0x34e,0x394,0x270)]=_0x13ed58[_0x4584b5(0x25d,0x1c3,0x1c4,0x209)],_0x36977e[_0x2a8a88(-0xc,0x6b,-0x61,0x1b)]=_0x2a8a88(0xf1,0x73,0x4,0xd3)+'FW',_0x36977e[_0x2a8a88(0xab,0x5e,0x55,0x68)]=_0x13ed58[_0x2a8a88(-0xb,-0x6,-0x4e,-0xd6)],_0x36977e[_0x2a8a88(0xe0,0x3b,0x6f,0x3f)]=_0x13ed58['ZtKyL'],_0x36977e[_0x4584b5(0x1cd,0x251,0x27e,0x297)]=_0x13ed58['RMZNN'],_0x36977e[_0x2a8a88(0x19,-0x3b,-0x20,-0xea)]=_0x13ed58['gznjg'],_0x36977e[_0x4584b5(0x2d2,0x357,0x274,0x375)]='upperBodyN'+_0x2a8a88(-0x46,-0x72,-0x13,-0xae),_0x36977e[_0x2a8a88(0x84,-0x2d,-0xb0,-0x73)]=_0x4584b5(0x333,0x3b2,0x333,0x25c)+'FW',_0x36977e[_0x4584b5(0x18f,0x189,0x1f3,0xe7)]=_0x13ed58[_0x2a8a88(-0x83,-0x18,0x6,-0x35)];const _0x405a0c=_0x36977e;for(const _0x41c897 of _0x2514c8){const _0x254505=_0x41c897['indexOf'](':');if(_0x13ed58[_0x4584b5(0x1cc,0x26f,0x1ba,0x1c2)](_0x254505,-(0xd16+-0x26e7+0x19d2)))continue;const _0x45da21=_0x41c897[_0x4584b5(0x2de,0x363,0x370,0x323)](0x563*0x1+-0x4*-0x43a+-0x164b,_0x254505)[_0x4584b5(0x208,0x161,0x232,0x21a)](),_0xd6ab8=_0x41c897[_0x4584b5(0x2de,0x340,0x31a,0x2cb)](_0x254505+(0x108c+-0x11*0x1f7+0x10dc))[_0x2a8a88(-0x108,-0x52,-0x58,-0xe4)]();if(_0x405a0c[_0x45da21])_0x3e36a4[_0x405a0c[_0x45da21]]=_0xd6ab8;else _0x45da21&&_0xd6ab8&&(_0x13ed58[_0x4584b5(0x1e5,0x205,0x13b,0x295)](_0x4584b5(0x1f4,0x1b4,0x250,0x285),_0x13ed58[_0x2a8a88(0x159,0x85,0x153,0x142)])?(_0x16f85b=_0x229549,_0x39fa4d[_0x2a8a88(0x99,-0x21,-0xf4,0x84)](_0x4fb6ae)):console[_0x2a8a88(0xe8,0xdc,0xaf,0x12)](_0x2a8a88(-0x8,0x28,0xde,0x3b)+_0x2a8a88(0x34,-0x11,0x6c,-0x77)+'fy]\x20未识别的人物'+_0x4584b5(0x2f2,0x2e5,0x3bf,0x2b3)+_0x45da21+'\x22'));}if(!_0x3e36a4['nameCN'])return null;return console[_0x4584b5(0x336,0x34a,0x2d6,0x2db)](_0x2a8a88(0xf4,0x28,-0x70,0xd0)+'PromptModi'+_0x4584b5(0x1c8,0x1e8,0x26a,0x232)+_0x2a8a88(-0xd7,-0xae,-0x7f,-0xe3),_0x3e36a4),_0x3e36a4;}function parseOutfitData(_0x94b552){const _0x169a00={};_0x169a00[_0x1ec235(0x35a,0x392,0x309,0x38b)]=_0x237e8b(0x191,0xcc,0x12e,0xce),_0x169a00[_0x1ec235(0x300,0x2d2,0x272,0x2a4)]=_0x237e8b(0x19c,0x1e6,0x168,0xc9),_0x169a00[_0x1ec235(0x363,0x2dc,0x2f7,0x2ab)]=_0x237e8b(0x235,0x294,0x16c,0x308)+_0x1ec235(0x2ce,0x3bd,0x370,0x345),_0x169a00[_0x237e8b(0x98,0x11,0xec,0x81)]=_0x1ec235(0x1a9,0x29c,0x1c8,0x26c),_0x169a00[_0x1ec235(0x21b,0x1f1,0x337,0x289)]=_0x237e8b(0x1d9,0x26c,0x178,0x2a0)+'ck',_0x169a00['slMqu']=function(_0x2783d0,_0x3505e9){return _0x2783d0===_0x3505e9;},_0x169a00[_0x1ec235(0x485,0x308,0x3f5,0x3b6)]=_0x237e8b(0xcd,0xa8,0xd9,0xc8),_0x169a00['vYeZU']=_0x1ec235(0x24c,0x28f,0x29c,0x2a1),_0x169a00['tZGKd']=function(_0x53e53f,_0x2feeeb){return _0x53e53f&&_0x2feeeb;},_0x169a00[_0x1ec235(0x316,0x286,0x2cc,0x281)]=function(_0x30fb6b,_0xc2c4f8){return _0x30fb6b===_0xc2c4f8;},_0x169a00[_0x237e8b(0x1b0,0x1e2,0x141,0x225)]=_0x237e8b(0x1bb,0x171,0x1b0,0x1a2),_0x169a00['tuOsV']=_0x237e8b(0x180,0x1d0,0x19c,0xf0)+_0x1ec235(0x3a8,0x32c,0x252,0x2d4)+_0x1ec235(0x2d4,0x1bb,0x218,0x255)+_0x1ec235(0x27f,0x1ff,0x1c8,0x237);const _0x284438=_0x169a00,_0x18bbd4=_0x94b552[_0x237e8b(0xbf,-0x13,0x18c,0x4)]('\x0a')['map'](_0x49d4ca=>_0x49d4ca[_0x237e8b(0x106,0x38,0x19d,0x1d6)]())[_0x237e8b(0x1bc,0x15e,0x243,0x119)](_0x11955c=>_0x11955c);function _0x1ec235(_0x514136,_0x206a53,_0x348d30,_0x2736be){return _0x4056(_0x2736be-0xad,_0x514136);}const _0x1ea6b9={};_0x1ea6b9[_0x237e8b(0x118,0x187,0x9d,0x7b)]='',_0x1ea6b9[_0x1ec235(0x2c1,0x2a8,0x294,0x288)]='',_0x1ea6b9['owner']='',_0x1ea6b9['upperBody']='',_0x1ea6b9['upperBodyB'+_0x237e8b(0x1b8,0x19f,0x252,0x27e)]='',_0x1ea6b9[_0x237e8b(0xdf,0x174,0x101,0x102)]='',_0x1ea6b9[_0x237e8b(0x1d9,0x126,0x211,0x275)+'ck']='';const _0x2ab4ee=_0x1ea6b9,_0x5b6745={};_0x5b6745['归属人']=_0x284438[_0x1ec235(0x2bc,0x31c,0x30c,0x38b)],_0x5b6745[_0x237e8b(0x1f2,0x149,0x274,0x213)]='nameCN',_0x5b6745[_0x237e8b(0xed,0x184,0x5a,0x3d)]=_0x237e8b(0xfb,0x30,0xd5,0xe4),_0x5b6745['上半身']=_0x284438[_0x237e8b(0x117,0x12d,0x14a,0x83)],_0x5b6745[_0x1ec235(0x285,0x227,0x271,0x2ba)]=_0x284438[_0x237e8b(0x11e,0xef,0x49,0x129)],_0x5b6745['下半身']=_0x284438['yzFrC'],_0x5b6745[_0x237e8b(0xc9,-0x3,0x12b,0x68)]=_0x284438[_0x237e8b(0xfc,0x1aa,0xd0,0xd9)];const _0x36fe4f=_0x5b6745;for(const _0x522697 of _0x18bbd4){if(_0x1ec235(0x32d,0x2c8,0x1f0,0x2b0)!==_0x237e8b(0x123,0x1e4,0xba,0x19f))_0x1fa8c5[_0x237e8b(0x137,0x1d4,0x79,0x147)](_0xa5163b);else{const _0x4ef439=_0x522697[_0x1ec235(0x19a,0x22c,0x1c3,0x241)](':');if(_0x284438[_0x237e8b(0xda,0x142,0x199,0xdd)](_0x4ef439,-(0x1*0x143b+0x253d+-0x3977)))continue;const _0x4bd4b1=_0x522697[_0x1ec235(0x3b3,0x391,0x320,0x369)](0xf5*0x4+-0x4*0xd2+0x2*-0x46,_0x4ef439)[_0x1ec235(0x32d,0x29a,0x270,0x293)](),_0x3e904c=_0x522697['substring'](_0x4ef439+(-0x1*0xe46+0x1*0x19be+-0xb77))['trim']();if(_0x36fe4f[_0x4bd4b1])_0x284438[_0x1ec235(0x3d5,0x3ca,0x39d,0x3b6)]===_0x284438['vYeZU']?_0x5a9f8c['push'](..._0x32a179['matchedOut'+_0x1ec235(0x3ea,0x35e,0x2b8,0x355)]):_0x2ab4ee[_0x36fe4f[_0x4bd4b1]]=_0x3e904c;else _0x284438[_0x237e8b(0x1d1,0x284,0x1fc,0x1c3)](_0x4bd4b1,_0x3e904c)&&console[_0x1ec235(0x337,0x3ec,0x380,0x3c1)](_0x237e8b(0x180,0x1f1,0x16e,0xb1)+_0x237e8b(0x147,0x15c,0x1e3,0xb7)+_0x1ec235(0x164,0x16d,0x2e1,0x220)+'字段\x20\x22'+_0x4bd4b1+'\x22');}}if(!_0x2ab4ee['nameCN']){if(_0x284438['yvQwP'](_0x284438['ZhMTm'],_0x1ec235(0x34d,0x35e,0x361,0x359)))_0x4964d5=_0x237e8b(0x90,0x91,0x48,0xb5)+_0x1ec235(0x2ad,0x407,0x3f0,0x33c)+[..._0x12be1e]['join']('、')+'\x0a';else return null;}function _0x237e8b(_0x1dfdac,_0x4d3dd6,_0x595c15,_0x3ea281){return _0x4056(_0x1dfdac- -0xe0,_0x3ea281);}return console[_0x237e8b(0x234,0x260,0x231,0x2fb)](_0x284438[_0x1ec235(0x329,0x306,0x263,0x2a0)],_0x2ab4ee),_0x2ab4ee;}function extractCharacterAndOutfitTags(_0x43a563){const _0x32a8a0={'cNdrG':function(_0x5d326b,_0xe679d8){return _0x5d326b(_0xe679d8);},'dxuEJ':function(_0x36a26a,_0x24b570){return _0x36a26a!==_0x24b570;},'KTYQi':function(_0x4bb380,_0x301982){return _0x4bb380(_0x301982);},'OxLpx':function(_0x27d92a,_0x5ef001){return _0x27d92a===_0x5ef001;},'RSwkA':_0x15d704(0xd9,0x7c,0xfa,0xca),'XUkOL':function(_0x4350f1,_0x56f0d7){return _0x4350f1===_0x56f0d7;},'EvfCd':_0x15d704(0x215,0x169,0x2ea,0x2d3),'dKNsT':_0x15d704(0x209,0x1f9,0x2d3,0x2a6),'OZWzM':function(_0x3bba5f,_0x231286){return _0x3bba5f===_0x231286;},'tYVqh':function(_0x36488b,_0x281195){return _0x36488b===_0x281195;},'fRJJl':'NDOrA'},_0x2d0207=[];_0x43a563=_0x43a563[_0x15d704(0x196,0xcf,0xec,0xd2)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x15d704(0x12c,0x78,0x121,0x7b)]();function _0x26b0b6(_0x27749d,_0x61cb3e,_0x820600,_0x1e18d3){return _0x4056(_0x61cb3e-0x20f,_0x1e18d3);}const _0x24be01=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x3b35e2;while(_0x32a8a0[_0x26b0b6(0x4d2,0x4d3,0x48e,0x462)](_0x3b35e2=_0x24be01[_0x26b0b6(0x3d9,0x3c3,0x327,0x3b5)](_0x43a563),null)){const _0xf36b91=_0x3b35e2[0xee8+0xb*-0x18b+-0x1*-0x212],_0x3afd66=_0x32a8a0['KTYQi'](preprocessTagContent,_0x3b35e2[-0x18fe+-0x5*-0x473+0x2c1*0x1]),_0x1059a2=_0x3b35e2[_0x26b0b6(0x4f1,0x51b,0x49e,0x456)];if(_0x32a8a0['OxLpx'](_0xf36b91,'人物')){const _0x329207=_0x32a8a0[_0x26b0b6(0x56c,0x4db,0x525,0x5b0)](parseCharacterData,_0x3afd66);if(_0x329207){const _0x4b669b={};_0x4b669b['type']=_0x32a8a0[_0x26b0b6(0x439,0x457,0x448,0x3bb)],_0x4b669b['data']=_0x329207,_0x4b669b[_0x15d704(0x124,0xbf,0x95,0x17e)]=_0x1059a2,_0x4b669b[_0x15d704(0x13c,0xbc,0x111,0x133)+_0x15d704(0x1ee,0x200,0x1b5,0x15c)]=[],_0x2d0207[_0x26b0b6(0x38f,0x426,0x3b0,0x494)](_0x4b669b);}}else{if(_0x32a8a0[_0x15d704(0x195,0x22b,0x192,0x157)](_0xf36b91,'服装')){const _0x524ebd=parseOutfitData(_0x3afd66);if(_0x524ebd){if(_0x26b0b6(0x52e,0x4de,0x447,0x554)!==_0x32a8a0[_0x26b0b6(0x356,0x397,0x42d,0x3c3)])_0x310a1b[_0x15d704(0xc2,0x109,0x97,0xe1)+_0x15d704(0xe6,0x1a2,0x5c,0x25)](_0x24d800[_0x15d704(0x20c,0x250,0x201,0x259)+'ODIFY_RESP'+_0x26b0b6(0x402,0x3d7,0x41c,0x3be)],_0x5c2129),_0x195f74&&(_0x32a8a0['cNdrG'](_0x132aa1,_0xc050f2),_0x1a283e=null);else{const _0x435c5b={};_0x435c5b[_0x15d704(0x186,0x157,0x1f9,0x18b)]=_0x32a8a0[_0x26b0b6(0x401,0x4d0,0x4d9,0x535)],_0x435c5b[_0x15d704(0xed,0x71,0x92,0x91)]=_0x524ebd,_0x435c5b['position']=_0x1059a2,_0x2d0207[_0x15d704(0x15d,0x20e,0x1c6,0x16e)](_0x435c5b);}}}}}function _0x15d704(_0x3fa20b,_0x2e86fa,_0x4f9d03,_0x4a91d3){return _0x4056(_0x3fa20b- -0xba,_0x4a91d3);}_0x2d0207[_0x15d704(0x134,0x11c,0x1fd,0x1d2)]((_0x4bca62,_0x11400f)=>_0x4bca62[_0x26b0b6(0x414,0x3ed,0x37c,0x4af)]-_0x11400f['position']);let _0x300de8=null;const _0x2c7995=[],_0x1eae5f=[];for(const _0x398d8d of _0x2d0207){if(_0x32a8a0['OZWzM'](_0x398d8d[_0x15d704(0x186,0x254,0x1a5,0xb4)],_0x32a8a0[_0x26b0b6(0x3f7,0x457,0x427,0x396)]))_0x300de8=_0x398d8d,_0x2c7995[_0x26b0b6(0x3e2,0x426,0x46c,0x353)](_0x398d8d);else _0x32a8a0[_0x26b0b6(0x4f5,0x4ff,0x5c5,0x55e)](_0x398d8d['type'],_0x32a8a0[_0x26b0b6(0x537,0x4d0,0x40f,0x4ac)])&&(_0x32a8a0['dxuEJ'](_0x32a8a0[_0x15d704(0x123,0x144,0x5a,0x15a)],'NDOrA')?_0x124e5b[_0x36b272]=_0x4ba029[_0xff1dad]:_0x300de8?_0x300de8[_0x26b0b6(0x39b,0x405,0x42f,0x4d7)+_0x15d704(0x1ee,0x1a0,0x206,0x274)][_0x26b0b6(0x451,0x426,0x37f,0x45b)](_0x398d8d[_0x26b0b6(0x2e3,0x3b6,0x34e,0x47d)]):_0x1eae5f[_0x26b0b6(0x39a,0x426,0x49d,0x4b9)](_0x398d8d[_0x15d704(0xed,0x56,0x2a,0x20)]));}return{'characters':_0x2c7995[_0x15d704(0x219,0x2a6,0x1b3,0x1a5)](_0x44cad0=>({..._0x44cad0[_0x26b0b6(0x2fc,0x3b6,0x39d,0x434)],'matchedOutfits':_0x44cad0[_0x26b0b6(0x3fd,0x405,0x486,0x3c3)+_0x15d704(0x1ee,0x176,0x121,0x1e8)]})),'outfits':_0x1eae5f};}function getCurrentCharacterPreset(){const _0x26f104=extension_settings[extensionName],_0x1ea361=_0x26f104[_0x30b2ea(0x394,0x365,0x30c,0x23a)+_0x30b2ea(0x2c5,0x29c,0x244,0x25d)];if(!_0x1ea361||!_0x26f104[_0x30b2ea(0x340,0x25a,0x30c,0x274)+'resets'][_0x1ea361])return null;const _0x53e36f={};_0x53e36f['id']=_0x1ea361;function _0x30b2ea(_0x1081c0,_0x181903,_0x4197d6,_0x101472){return _0x4056(_0x4197d6-0xa9,_0x101472);}function _0xa34ff7(_0x147173,_0x39da24,_0xcc8857,_0x243401){return _0x4056(_0x243401- -0xc6,_0xcc8857);}return _0x53e36f[_0x30b2ea(0x1ec,0x2e2,0x250,0x2db)]=_0x26f104[_0x30b2ea(0x30e,0x38d,0x30c,0x333)+_0x30b2ea(0x351,0x308,0x28a,0x22e)][_0x1ea361],_0x53e36f;}function buildCharacterText(_0x22d0d2){const _0x3b9421={};_0x3b9421['NFndt']='<人物>\x0a',_0x3b9421[_0x33a0cc(0x125,0x109,0x1b3,0x18f)]=_0x978da1(0x3a8,0x3e9,0x4a9,0x42a);const _0x2330de=_0x3b9421,_0xdcc8fc=_0x22d0d2['data'];let _0x27ceb7=_0x2330de[_0x33a0cc(0x109,0x1c2,0x1cc,0x189)];_0x27ceb7+='中文名称:\x20'+(_0xdcc8fc[_0x978da1(0x4bf,0x42e,0x3e5,0x47e)]||'')+'\x0a',_0x27ceb7+=_0x33a0cc(0x138,0x1e6,0x20d,0x173)+(_0xdcc8fc[_0x33a0cc(0x278,0x1df,0x199,0x1df)]||'')+'\x0a',_0x27ceb7+=_0x978da1(0x464,0x49c,0x528,0x533)+(_0xdcc8fc['characterT'+_0x978da1(0x3db,0x48a,0x46a,0x431)]||'')+'\x0a',_0x27ceb7+=_0x33a0cc(0x145,0x218,0x273,0x20b)+(_0xdcc8fc[_0x33a0cc(0x26e,0x268,0x11d,0x19a)+_0x33a0cc(0x26b,0x14c,0x2a3,0x1f3)]||'')+'\x0a',_0x27ceb7+=_0x33a0cc(0x2ee,0x302,0x2f9,0x2fb)+(_0xdcc8fc[_0x978da1(0x445,0x3cc,0x313,0x3b9)+_0x33a0cc(0x226,0x23d,0x338,0x283)]||'')+'\x0a',_0x27ceb7+=_0x978da1(0x42e,0x428,0x436,0x3ce)+(_0xdcc8fc[_0x33a0cc(0x2f0,0x355,0x2bf,0x2af)+'FW']||'')+'\x0a',_0x27ceb7+=_0x978da1(0x4bd,0x451,0x3ab,0x40f)+(_0xdcc8fc[_0x33a0cc(0x33f,0x35a,0x34b,0x2af)+_0x978da1(0x4dd,0x467,0x47b,0x419)]||'')+'\x0a',_0x27ceb7+=_0x978da1(0x55e,0x4fd,0x476,0x4c8)+(_0xdcc8fc[_0x978da1(0x403,0x4bf,0x508,0x4bb)+'W']||'')+'\x0a',_0x27ceb7+=_0x33a0cc(0x259,0x1e0,0x1e9,0x206)+(_0xdcc8fc[_0x978da1(0x429,0x4bf,0x557,0x518)+_0x33a0cc(0x275,0x1ea,0x303,0x268)]||'')+'\x0a',_0x27ceb7+=_0x978da1(0x30c,0x3d7,0x413,0x316)+(_0xdcc8fc[_0x978da1(0x343,0x405,0x3b4,0x38a)+'SFW']||'')+'\x0a',_0x27ceb7+='上半身NSFW背面:'+'\x20'+(_0xdcc8fc[_0x978da1(0x44a,0x405,0x3f5,0x48c)+_0x33a0cc(0x270,0x23d,0x1ef,0x1ca)]||'')+'\x0a';function _0x978da1(_0xa26ad5,_0xc66f8f,_0x2edda0,_0x396578){return _0x4056(_0xc66f8f-0x236,_0x396578);}_0x27ceb7+=_0x978da1(0x4f5,0x4fe,0x462,0x4d0)+(_0xdcc8fc[_0x33a0cc(0x2c8,0x3e9,0x30b,0x315)+'FW']||'')+'\x0a';function _0x33a0cc(_0x165838,_0x1d8239,_0x1bff4e,_0x4506a6){return _0x4056(_0x4506a6-0x4,_0x165838);}return _0x27ceb7+=_0x33a0cc(0x28e,0x2a7,0x25b,0x2a6)+'\x20'+(_0xdcc8fc['fullBodyNS'+'FWBack']||'')+'\x0a',_0x27ceb7+=_0x2330de[_0x33a0cc(0x190,0xb8,0x113,0x18f)],_0x27ceb7;}export async function handleCharacterPromptModify(_0x3bf06e,_0x43e11b=[]){const _0x2577e2={'HdPOl':'下半身NSFW背面:','RJlAt':_0x584ff8(0x26c,0x267,0x1a3,0x185),'PTcXb':_0x584ff8(0x1e2,0x178,0x1a2,0x17f)+_0x1c97c8(0xc6,0x121,0x6a,0x152)+'fy]\x20Starti'+'ng\x20charact'+_0x584ff8(0x290,0x1df,0x213,0x170)+_0x584ff8(0x182,0x21c,0x1b8,0x27f)+_0x584ff8(0x1a5,0x106,0xda,0x152),'xICVZ':'[character'+'PromptModi'+'fy]\x20正在处理角色'+_0x584ff8(0xed,0x18a,0x187,0x1ea),'TCQnp':function(_0x3ae306,_0x3b815c){return _0x3ae306!==_0x3b815c;},'lezMW':function(_0x1d9eff){return _0x1d9eff();},'ugRco':_0x1c97c8(0xb5,0xfb,0x169,0x71),'xOGBD':_0x584ff8(0x12d,0xde,0x1a2,0x19a)+'PromptModi'+_0x584ff8(0x1f5,0x2c5,0x1f7,0x294)+_0x584ff8(-0x8,0x187,0xc5,0xc2),'MtYdT':_0x584ff8(0x17f,0x18e,0x1a2,0x19d)+'PromptModi'+_0x584ff8(0x96,0x135,0x14c,0x1a9)+_0x1c97c8(0xfe,0x1ce,0xfd,0x1c9),'ZKeiL':_0x584ff8(0x171,0xf8,0x1a2,0xf7)+_0x1c97c8(0xc6,0x110,0xbb,0x4)+_0x1c97c8(0xa9,0x10c,0xab,0x143)+_0x1c97c8(0x8c,0xd4,0x80,0x116)+':','GJTQB':'[character'+_0x584ff8(0x22c,0x14e,0x169,0x1da)+_0x584ff8(0x202,0x19d,0x14c,0x183)+'variables:','HcSwO':function(_0x5f38c3,_0x2d1d1a){return _0x5f38c3||_0x2d1d1a;},'dpMwm':_0x584ff8(0x20b,0x14a,0x1a2,0x218)+_0x1c97c8(0xc6,-0xf,0x195,0x9b)+_0x584ff8(0x2d9,0x259,0x243,0x24d)+'ter\x20trigge'+'r\x20text:','UDJiC':function(_0xbeeab2,_0x3f81a0,_0x163e7e){return _0xbeeab2(_0x3f81a0,_0x163e7e);},'hbPxG':_0x1c97c8(0x120,0x102,0x9c,0x19b)+'y','FiKqV':_0x1c97c8(0xff,0x5d,0x31,0x1ac)+_0x584ff8(0x1c6,0x236,0x169,0x193)+'fy]\x20Charac'+_0x1c97c8(0x21,0x96,0x9c,0x2c)+_0x1c97c8(0x189,0x1a0,0x1a3,0x143)+_0x1c97c8(0x78,0x71,0x9d,0xfd),'pScxa':function(_0x31caa0,_0x47088f){return _0x31caa0(_0x47088f);},'paVaB':function(_0x10e34e,_0x5d706e){return _0x10e34e(_0x5d706e);},'hSHmo':_0x584ff8(0x25c,0x22f,0x1a2,0x109)+_0x1c97c8(0xc6,0xea,0x5,0x16e)+_0x584ff8(0xfa,0xbd,0x16d,0x1fb)+'后:','NjsZY':'{{用户需求}}','mvryt':'[character'+_0x584ff8(0x213,0x173,0x169,0x150)+'fy]\x20User\x20r'+_0x1c97c8(0x180,0xe5,0x21b,0x1d7)+_0x584ff8(0x15d,0x196,0x10c,0x18b)+_0x584ff8(0x12c,0xba,0x168,0x191),'Uiivi':function(_0x432c51,_0x23f9c0,_0x2314ea){return _0x432c51(_0x23f9c0,_0x2314ea);},'PrjEZ':_0x1c97c8(0xff,0x9c,0x64,0xc6)+'PromptModi'+_0x584ff8(0x251,0x181,0x1aa,0x260)+_0x1c97c8(0x18,-0x3e,0x36,0xa9),'EuCgo':function(_0x1d30a8,_0x49fc5e){return _0x1d30a8>_0x49fc5e;},'rfUad':function(_0x570063,_0x296946){return _0x570063>=_0x296946;},'dbzEO':function(_0x27b8e0,_0x356423,_0x3ad9c5,_0x456408,_0x12e78e){return _0x27b8e0(_0x356423,_0x3ad9c5,_0x456408,_0x12e78e);},'bcIrj':_0x584ff8(0x174,0xbb,0xc8,0x160)+_0x1c97c8(0x76,-0x20,0xf,0x10d)+_0x1c97c8(0x1f,0xaa,0xa6,-0x5),'QgZdZ':function(_0x1561b0,_0x3a74fa,_0x5977d5){return _0x1561b0(_0x3a74fa,_0x5977d5);},'YxqAS':_0x1c97c8(0xff,0x53,0xdc,0x52)+'PromptModi'+_0x1c97c8(0xcd,0x121,0xc1,0x11e)+_0x1c97c8(0x13e,0xfe,0x145,0x8a),'fzyQr':_0x584ff8(0x10,0x13b,0xdc,0x133),'ZJkac':function(_0x46e55e,_0x72e65c){return _0x46e55e(_0x72e65c);},'lYWKP':function(_0x46e81b,_0x1118a1){return _0x46e81b===_0x1118a1;},'dCokK':function(_0x306f44,_0x10f76a){return _0x306f44===_0x10f76a;},'hsfvs':_0x1c97c8(0x117,0x9a,0x1a7,0x196)+_0x1c97c8(0x10e,0x10f,0x19b,0x52),'wogoH':_0x1c97c8(0xff,0x72,0x75,0xfd)+'PromptModi'+_0x1c97c8(0xdd,0xf3,0x11a,0x135)+_0x584ff8(0x1f7,0x2ba,0x252,0x23b)+_0x584ff8(0x196,0x164,0x1ec,0x2ae)+_0x584ff8(0xfa,0x195,0x17a,0x23d)+_0x1c97c8(0x1e,0x90,-0xae,0xa5),'TWhjP':_0x1c97c8(0xff,0x198,0x197,0x13e)+_0x1c97c8(0xc6,0x7f,0xf7,0x9e)+_0x1c97c8(0xe2,0xbd,0xff,0xf1)+_0x584ff8(0x1d6,0x1d6,0x247,0x1cb)+'or\x20debuggi'+'ng:','ZrEdO':_0x1c97c8(0xff,0x19c,0xcb,0x105)+_0x1c97c8(0xc6,0x129,0x2a,-0x11)+_0x1c97c8(0xf5,0x188,0x105,0x146)+_0x584ff8(0x2c4,0x2c8,0x219,0x1e3),'OGony':function(_0x3bf4f2,_0x19a0f7){return _0x3bf4f2>_0x19a0f7;},'JsIUS':_0x584ff8(0x296,0x271,0x23b,0x308),'jkgpZ':function(_0x1522d8,_0x336150){return _0x1522d8===_0x336150;},'Ucqhw':_0x584ff8(0x68,0x1a2,0x10d,0x70),'tMqSG':_0x1c97c8(0x63,0x4,0x8c,-0x39),'oNxCC':function(_0x4a6734,_0x32a3ec){return _0x4a6734>_0x32a3ec;},'DBrVs':function(_0x277954,_0x3f5248){return _0x277954(_0x3f5248);},'QTERn':'角色/服装提示词修改'+_0x584ff8(0x14f,0x1db,0x13b,0x86),'sGmMj':'[character'+'PromptModi'+_0x1c97c8(0x1ac,0x1c3,0x11e,0x24a)};function _0x584ff8(_0x194550,_0x35ecac,_0x39881d,_0x4f220f){return _0x4056(_0x39881d- -0xbe,_0x35ecac);}console[_0x1c97c8(0x1b3,0x11c,0x176,0x207)](_0x2577e2[_0x584ff8(0x125,0x175,0xb8,0x147)]);function _0x1c97c8(_0x400b95,_0x1738df,_0x1038c3,_0x28ec6a){return _0x4056(_0x400b95- -0x161,_0x1038c3);}toastr[_0x584ff8(0x1ce,0x101,0x1a0,0x1eb)](_0x2577e2[_0x584ff8(0x132,0x119,0x175,0x1bd)]);try{if(_0x2577e2[_0x1c97c8(0x99,0x93,-0x34,0x60)](_0x1c97c8(0x13c,0xb1,0xec,0xe4),_0x1c97c8(0x133,0x195,0x90,0x17f))){const _0x576e33=_0x2577e2['lezMW'](getContext),_0x436cfd=extension_settings[extensionName],_0x221d9c=_0x2577e2[_0x1c97c8(0x9a,0xa7,0xf9,0xc6)](getCurrentCharacterPreset);if(!_0x221d9c){toastr[_0x1c97c8(0x30,-0x7e,0xdd,-0x18)](_0x2577e2[_0x1c97c8(0x10a,0x143,0x1d7,0x179)]);return;}console['log'](_0x2577e2[_0x584ff8(0x1a7,0xf1,0xee,0x81)],_0x221d9c['id']);const _0x184f48=_0x221d9c['data'][_0x584ff8(0x2ab,0x2a9,0x204,0x2ae)+_0x1c97c8(0x119,0xac,0x19b,0x5a)]||'',_0x5885a8=_0x221d9c[_0x584ff8(0x147,0xda,0xe9,0xc6)][_0x584ff8(0x13a,0x1b5,0x204,0x185)+_0x584ff8(0x23b,0x275,0x1e3,0x11b)]||'',_0x4ac863=_0x221d9c[_0x584ff8(0x14d,0x29,0xe9,0x87)]['generation'+_0x1c97c8(0x10d,0xd4,0x4e,0x101)]||{};console[_0x1c97c8(0x1b3,0x209,0x217,0x254)](_0x2577e2[_0x1c97c8(0xa8,0x91,-0x2a,0x69)],_0x184f48),console['log'](_0x2577e2['ZKeiL'],_0x5885a8),console['log'](_0x2577e2[_0x584ff8(0x178,0x18d,0x16c,0x123)],_0x4ac863);const _0x41bbc0=_0x2577e2[_0x584ff8(0x182,0x261,0x21f,0x2ec)](_0x3bf06e,''),_0x4f5854=[];_0x3bf06e&&_0x4f5854[_0x584ff8(0x112,0x16f,0x159,0xee)](_0x3bf06e);_0x184f48&&_0x4f5854[_0x1c97c8(0xb6,0x14,0x155,0x8f)](_0x184f48);_0x5885a8&&_0x4f5854[_0x1c97c8(0xb6,0xc6,0x82,0x73)](_0x5885a8);const _0x835c6e=_0x4f5854[_0x584ff8(0xd8,0xa9,0x100,0x2e)]('\x0a');console['log'](_0x2577e2[_0x584ff8(0x83,0x119,0xcf,0x7a)],_0x835c6e);let _0x100759=_0x2577e2[_0x584ff8(0x219,0x231,0x1ce,0x17a)](buildPromptForRequestType,_0x2577e2['hbPxG'],_0x41bbc0);const _0x485947=generateCharacterListText(_0x835c6e),_0x386e1c=_0x2577e2[_0x584ff8(0xdf,0x12e,0x13d,0x17d)](generateOutfitEnableListText),_0x4d3730=generateCommonCharacterListText();console[_0x584ff8(0x296,0x22b,0x256,0x1f0)](_0x2577e2[_0x1c97c8(0x168,0x149,0xb5,0x115)],_0x485947);const _0x3acc66=_0x576e33[_0x584ff8(0x5b,0xd0,0x102,0x77)+'ta']?.[_0x584ff8(0x114,0x198,0xf9,0xa8)]||{},_0x1062e8=_0x2577e2[_0x1c97c8(0x134,0xdf,0x119,0x123)](buildCharacterText,_0x221d9c);_0x100759=_0x2577e2[_0x584ff8(0x23e,0x258,0x217,0x150)](mergeAdjacentMessages,_0x100759),console[_0x584ff8(0x30e,0x1c8,0x256,0x327)](_0x2577e2['hSHmo'],_0x100759);const _0x338615=_0x2577e2[_0x1c97c8(0x12b,0x1c9,0x13e,0x1ef)](findMessageIndexWithPlaceholder,_0x100759,_0x2577e2[_0x584ff8(0x183,0x22a,0x15f,0x13a)]);console[_0x1c97c8(0x1b3,0x1d1,0x289,0x27b)](_0x2577e2[_0x584ff8(0x185,0x2db,0x231,0x1b8)],_0x338615);const _0xadaa1a={..._0x4ac863,..._0x3acc66},_0x1bb693={'context':_0x184f48,'worldBookContent':_0x5885a8,'variables':_0xadaa1a,'userDemand':_0x2577e2['HcSwO'](_0x3bf06e,''),'characterListText':_0x485947,'outfitEnableListText':_0x386e1c,'commonCharacterListText':_0x4d3730},{messages:_0x35a873,replacedVariables:_0x18206d}=_0x2577e2[_0x1c97c8(0x58,-0x24,0x50,0xcd)](replaceAllPlaceholders,_0x100759,_0x1bb693);_0x100759=_0x35a873,_0x100759=_0x450665(_0x100759,_0x584ff8(0x1b1,0x1c8,0x1a9,0x1d9),_0x1062e8,_0x18206d),console[_0x1c97c8(0x1b3,0xfc,0x24f,0x19d)](_0x2577e2[_0x584ff8(0x129,0x195,0xd2,0x64)],_0x100759);let _0x3717c4='';_0x18206d['size']>-0x1aba+-0x1a22+0x34dc*0x1&&(_0x3717c4=_0x584ff8(0x38,0x7d,0xb2,0xb9)+_0x584ff8(0x17e,0x245,0x1d1,0x1b7)+[..._0x18206d][_0x584ff8(0x150,0xac,0x100,0xbf)]('、')+'\x0a');_0x43e11b&&_0x2577e2[_0x584ff8(0x25b,0x1ed,0x1af,0x18d)](_0x43e11b[_0x1c97c8(0xe6,0x92,0xd3,0x17f)],0x1972+-0x18cb+-0xa7)&&_0x2577e2[_0x584ff8(0x150,0x1a3,0x1cf,0x113)](_0x338615,-0x1e43*0x1+0x124b+-0x2*-0x5fc)&&(_0x100759=_0x2577e2[_0x584ff8(0x155,0xe2,0x19f,0x1a1)](attachImagesToMessage,_0x100759,_0x338615,_0x43e11b,_0x584ff8(0x11c,0x190,0x155,0x103)),console['log'](_0x584ff8(0x24a,0xdc,0x1a2,0xe5)+'PromptModi'+_0x1c97c8(0x4e,-0x83,-0x64,-0x27)+'ed',_0x43e11b['length'],_0x2577e2[_0x584ff8(0x1b2,0x1f6,0x16e,0x13e)],_0x338615));_0x2577e2['QgZdZ'](updateCombinedPrompt,_0x100759,_0x3717c4);const _0x29400d={};_0x29400d[_0x1c97c8(0x1a6,0x19a,0x19a,0xfe)]=0x493e0;const _0x4f89f4=await LLM_CHAR_MODIFY(_0x100759,_0x29400d);console[_0x1c97c8(0x1b3,0xe4,0x1b4,0x118)](_0x2577e2[_0x584ff8(0x12f,0x12f,0xd9,0x151)],_0x4f89f4);if(!_0x4f89f4){if(_0x2577e2['fzyQr']!==_0x2577e2['fzyQr']){let _0x1be9ff=_0x27d11b['replace'](/:/g,':')[_0x1c97c8(0xef,0x153,0xd2,0xcd)](/,/g,',');return _0x1be9ff=_0x1be9ff[_0x584ff8(0x1d1,0x247,0x192,0x255)](/下半身NSWebcam:/g,_0x2577e2[_0x584ff8(0x160,0x7c,0x112,0x12b)]),_0x1be9ff=_0x1be9ff[_0x584ff8(0x241,0xeb,0x192,0x1b1)](/下半身NSFW_背面:/g,_0x584ff8(0x29b,0x198,0x1e4,0x20e)),_0x1be9ff=_0x1be9ff[_0x584ff8(0x12c,0x101,0x192,0x164)](/上半身NSFW_背面:/g,_0x2577e2['RJlAt']),_0x1be9ff;}else{toastr[_0x584ff8(0xc9,0x105,0xd3,0x30)](_0x584ff8(0x179,0x15c,0x1b4,0x264));return;}}const _0x6ca49a=_0x2577e2[_0x584ff8(0xb4,0x235,0x178,0x236)](extractCharacterAndOutfitTags,_0x4f89f4);if(_0x2577e2['lYWKP'](_0x6ca49a[_0x1c97c8(0x194,0xfd,0x205,0x126)][_0x584ff8(0x118,0x196,0x189,0x214)],0x1759+-0x210a+0x9b1)&&_0x2577e2[_0x1c97c8(0x5b,-0x5c,-0x77,0x94)](_0x6ca49a[_0x584ff8(0xae,0x11e,0x12b,0x176)][_0x584ff8(0x252,0x11e,0x189,0x244)],-0xd3c*-0x1+0xe1*-0x26+0x142a)){toastr[_0x1c97c8(0xdc,0xe8,0x15e,0x25)](_0x2577e2[_0x1c97c8(0x19e,0x265,0x1e1,0x263)]),console['log'](_0x2577e2[_0x1c97c8(0x2d,0xe7,0xfe,0x5)]),console[_0x1c97c8(0x1b3,0x12e,0x1b9,0x280)](_0x2577e2['TWhjP'],_0x4f89f4);return;}console[_0x584ff8(0x185,0x196,0x256,0x23a)](_0x2577e2[_0x584ff8(0x27f,0x1aa,0x23c,0x2b3)],_0x6ca49a);if(_0x2577e2[_0x584ff8(0xc6,0x11c,0xd1,0x1a5)](_0x6ca49a['characters']['length'],-0x1*0x724+0x12e3+-0xbbf)){if(_0x2577e2[_0x584ff8(0x2e6,0x283,0x245,0x182)]!==_0x584ff8(0x190,0x1d5,0x23b,0x18a))_0x204f1b['log'](_0x584ff8(0x205,0x236,0x1a2,0xf2)+_0x584ff8(0x1ae,0x198,0x169,0x144)+_0x584ff8(0x1c5,0x192,0x207,0x138)+_0x1c97c8(0x16f,0x142,0xb0,0x211)+_0x76a7f2+'\x22');else{const _0x2ec395=_0x6ca49a[_0x584ff8(0x1b1,0x19a,0x237,0x2b6)][-0x4*0x593+-0x138+0x1784];await _0x2577e2[_0x1c97c8(0x12b,0x98,0x187,0xb1)](updateCharacterPresetFromLLM,_0x221d9c['id'],_0x2ec395);}}const _0x349396=[..._0x6ca49a[_0x1c97c8(0x88,0x52,-0xb,0x30)]];for(const _0x3f055 of _0x6ca49a[_0x584ff8(0x23d,0x1a7,0x237,0x1e1)]){if(_0x2577e2[_0x584ff8(0x8f,0x18e,0xf2,0x4f)](_0x2577e2[_0x1c97c8(0x1a7,0x1f5,0x1da,0x1dd)],_0x2577e2['tMqSG'])){if(_0x413429){const _0x5b9073=_0x4b564e[_0x1c97c8(0xd9,0x10a,0x9f,0x133)](_0x40e286,arguments);return _0x2e7d9b=null,_0x5b9073;}}else _0x3f055['matchedOut'+'fits']&&_0x3f055['matchedOut'+_0x1c97c8(0x147,0x21c,0xbd,0x159)][_0x1c97c8(0xe6,0x161,0xf3,0x192)]>0x100d+0x2389+-0x3396&&_0x349396[_0x584ff8(0xd6,0x1d7,0x159,0x8e)](..._0x3f055[_0x584ff8(0x208,0x195,0x138,0xa9)+_0x584ff8(0x154,0x140,0x1ea,0x11a)]);}_0x2577e2[_0x584ff8(0x1d7,0x1b4,0x12d,0x1a2)](_0x349396[_0x584ff8(0x156,0x149,0x189,0x225)],0x11e*0x6+0x1*0xc9a+0x2c2*-0x7)&&await _0x2577e2[_0x584ff8(0x123,0x11a,0x193,0x1e4)](updateOutfitPresetsFromLLM,_0x349396),toastr['success'](_0x2577e2['QTERn']);}else return _0x2e47d6['map'](_0x5e3649=>_0x5b6dc4(_0x5e3649,_0x48b4ec,_0x5e5a12,_0x46e7d5));}catch(_0x2a849d){console[_0x1c97c8(0x30,0xd,0x72,0xaf)](_0x2577e2['sGmMj'],_0x2a849d),toastr[_0x1c97c8(0x30,0xcb,-0x2f,-0xd)]('角色提示词修改失败:'+'\x20'+_0x2a849d['message']);}}async function updateCharacterPresetFromLLM(_0x3dba12,_0x438450){const _0x4fc6d0={'WMCrU':function(_0x4f26c4,_0x2ba428){return _0x4f26c4(_0x2ba428);},'kmqpz':'character','HHhEs':'已取消更新','MOFhu':_0x725189(0x3c4,0x48e,0x34e,0x416),'JnHKH':'中文名称','mOMym':'角色特征','AurWA':_0x725189(0x4e9,0x546,0x4dc,0x499),'PGgVV':_0x58bc6b(0x4fa,0x593,0x5bd,0x61e),'VSFpc':_0x725189(0x543,0x4fe,0x575,0x510),'mqybK':_0x725189(0x4f8,0x56d,0x50f,0x4ed),'NfBRD':_0x58bc6b(0x535,0x4ed,0x58c,0x51c),'pTJZZ':_0x725189(0x4d1,0x48b,0x5ec,0x52a),'qIfRi':_0x725189(0x318,0x330,0x358,0x3e7),'FXsxN':function(_0x1efad5,_0x4756b7){return _0x1efad5!==_0x4756b7;},'lUXzL':_0x58bc6b(0x548,0x56b,0x4d3,0x547),'MoUyo':function(_0x26647f,_0x1728f5){return _0x26647f!==_0x1728f5;},'VzAsF':function(_0x1cda53,_0x30a191){return _0x1cda53===_0x30a191;},'dJsDT':_0x58bc6b(0x65a,0x5eb,0x68e,0x5be),'pcrmP':function(_0x539926,_0x2339c6){return _0x539926(_0x2339c6);},'crhgN':function(_0x3d1572,_0x7dbc24){return _0x3d1572!==_0x7dbc24;},'vdMvV':_0x58bc6b(0x528,0x4da,0x4b5,0x4a4),'ihdzp':'uDMhx','HiclW':_0x725189(0x538,0x465,0x469,0x4f7),'HXUSR':function(_0x152349,_0x2be0c2){return _0x152349(_0x2be0c2);},'UuAYb':_0x58bc6b(0x560,0x5ec,0x52f,0x553)+_0x725189(0x4bc,0x57a,0x559,0x50c)+_0x725189(0x4d6,0x500,0x516,0x45c),'txyJd':function(_0xcf2ac7,_0x1ed2e0){return _0xcf2ac7(_0x1ed2e0);}},_0x6c9e92=extension_settings[extensionName],_0x1e61db=_0x6c9e92[_0x58bc6b(0x587,0x553,0x57c,0x5b1)+'resets'][_0x3dba12];if(!_0x1e61db){toastr[_0x58bc6b(0x4cd,0x481,0x548,0x508)](_0x4fc6d0[_0x725189(0x4ae,0x39a,0x366,0x430)]);return;}const _0x1f1af5={};_0x1f1af5['nameCN']=_0x4fc6d0[_0x725189(0x38f,0x434,0x50b,0x43b)],_0x1f1af5['nameEN']='英文名称';function _0x725189(_0x45af56,_0x412d87,_0x2f17d8,_0x2e9714){return _0x4056(_0x2e9714-0x27a,_0x2f17d8);}_0x1f1af5['characterT'+_0x725189(0x59b,0x422,0x42d,0x4ce)]=_0x4fc6d0[_0x58bc6b(0x653,0x5ba,0x4fb,0x584)],_0x1f1af5[_0x58bc6b(0x4d7,0x486,0x420,0x531)+'ures']=_0x4fc6d0[_0x58bc6b(0x5e8,0x55a,0x4af,0x5ee)],_0x1f1af5[_0x725189(0x45d,0x446,0x3a7,0x410)+_0x725189(0x528,0x469,0x480,0x4f9)]=_0x725189(0x5cc,0x5a3,0x4bb,0x55f),_0x1f1af5['upperBodyS'+'FW']=_0x4fc6d0[_0x58bc6b(0x4e3,0x539,0x558,0x572)],_0x1f1af5[_0x58bc6b(0x5b0,0x59b,0x52b,0x662)+_0x58bc6b(0x474,0x521,0x474,0x463)]=_0x4fc6d0[_0x58bc6b(0x5cf,0x565,0x4cb,0x56e)],_0x1f1af5['fullBodySF'+'W']=_0x4fc6d0['mqybK'],_0x1f1af5['fullBodySF'+'WBack']=_0x58bc6b(0x3e0,0x49b,0x561,0x50d),_0x1f1af5[_0x58bc6b(0x4ec,0x4bf,0x47d,0x50f)+_0x58bc6b(0x4b3,0x54b,0x57f,0x5fd)]=_0x4fc6d0[_0x58bc6b(0x645,0x57a,0x578,0x50d)],_0x1f1af5[_0x725189(0x4a8,0x471,0x49a,0x449)+_0x58bc6b(0x477,0x4b6,0x4ae,0x49c)]=_0x4fc6d0[_0x58bc6b(0x521,0x4a5,0x469,0x456)],_0x1f1af5[_0x58bc6b(0x5c7,0x601,0x52b,0x5b9)+'FW']=_0x725189(0x490,0x4c9,0x3d7,0x485),_0x1f1af5[_0x58bc6b(0x5f1,0x601,0x540,0x5a1)+_0x725189(0x469,0x4e8,0x462,0x4ab)]=_0x4fc6d0['qIfRi'];function _0x58bc6b(_0x5197b4,_0x1d01f8,_0x3b85d5,_0x26f53b){return _0x4056(_0x1d01f8-0x2f0,_0x5197b4);}const _0x5f01d1=_0x1f1af5;let _0x31a333=0x487*0x1+0x1705+-0x1b8c;for(const _0x339403 in _0x5f01d1){if(_0x4fc6d0[_0x58bc6b(0x490,0x49e,0x555,0x4a1)](_0x4fc6d0[_0x725189(0x573,0x558,0x5e8,0x55e)],_0x4fc6d0[_0x58bc6b(0x520,0x5d4,0x54b,0x63e)]))_0x4fc6d0[_0x58bc6b(0x5cd,0x608,0x6bd,0x67b)](_0x20dbfb,new _0x400a06(_0x337c9a[_0x725189(0x634,0x59e,0x574,0x57e)]||_0x725189(0x3f5,0x45d,0x4bd,0x47f)));else{if(_0x438450[_0x339403]&&_0x4fc6d0['MoUyo'](_0x438450[_0x339403],_0x1e61db[_0x339403])){if(_0x725189(0x40f,0x52d,0x455,0x49b)===_0x58bc6b(0x466,0x511,0x4a4,0x538))_0x31a333++;else{const _0x23b84d=_0x4fc6d0['WMCrU'](_0x322807,_0x2f8bdc);if(_0x23b84d){const _0x5b0ece={};_0x5b0ece[_0x725189(0x461,0x496,0x511,0x4ba)]=_0x4fc6d0[_0x58bc6b(0x573,0x567,0x604,0x626)],_0x5b0ece[_0x58bc6b(0x4e9,0x497,0x422,0x3f1)]=_0x23b84d,_0x5b0ece[_0x725189(0x4ad,0x4ba,0x3af,0x458)]=_0x192927,_0x5b0ece[_0x725189(0x40e,0x47f,0x39b,0x470)+_0x58bc6b(0x4e8,0x598,0x61e,0x62d)]=[],_0x41d900[_0x58bc6b(0x471,0x507,0x522,0x4bd)](_0x5b0ece);}}}}}if(_0x4fc6d0[_0x725189(0x43b,0x4b3,0x46a,0x4a3)](_0x31a333,-0xd*0x13d+-0x24b2+0x34cb)){if(_0x4fc6d0['FXsxN']('ciHyM',_0x4fc6d0[_0x725189(0x4a7,0x494,0x3e0,0x48e)])){toastr['info']('没有检测到需要更新的'+'内容');return;}else{_0x5ee167[_0x58bc6b(0x485,0x54e,0x587,0x4db)](_0x4fc6d0[_0x58bc6b(0x455,0x512,0x4b5,0x567)]);return;}}const _0x1557c2=_0x58bc6b(0x542,0x5e2,0x5d4,0x56d)+_0x3dba12+_0x725189(0x450,0x471,0x40a,0x49d)+_0x31a333+_0x58bc6b(0x42e,0x474,0x489,0x4a1),_0x387d22=await _0x4fc6d0['pcrmP'](stylishConfirm,_0x1557c2);if(!_0x387d22){if(_0x4fc6d0[_0x58bc6b(0x535,0x5c9,0x661,0x690)](_0x4fc6d0['vdMvV'],_0x4fc6d0['ihdzp'])){toastr[_0x725189(0x478,0x55b,0x566,0x4d8)](_0x725189(0x53c,0x545,0x53a,0x482));return;}else _0x28904a[_0x58bc6b(0x4de,0x572,0x5be,0x62f)+_0x58bc6b(0x478,0x547,0x4b8,0x60d)]={};}for(const _0x48cf2c in _0x5f01d1){if(_0x4fc6d0[_0x58bc6b(0x42d,0x4b7,0x503,0x4e0)]===_0x4fc6d0[_0x58bc6b(0x432,0x4b7,0x53b,0x485)])_0x438450[_0x48cf2c]&&(_0x1e61db[_0x48cf2c]=_0x438450[_0x48cf2c]);else{const _0x2b0a3b=_0x3aaaa6[_0x9a4bf0],_0x482185=_0x2b0a3b[_0x725189(0x4a0,0x425,0x553,0x4dd)+_0x58bc6b(0x3be,0x48b,0x4e6,0x4c8)];if(!_0x482185||!_0x2b0a3b[_0x58bc6b(0x575,0x553,0x546,0x5ee)+_0x58bc6b(0x4cb,0x4d1,0x3fd,0x427)][_0x482185])return null;const _0x8d2061={};return _0x8d2061['id']=_0x482185,_0x8d2061[_0x725189(0x420,0x3cd,0x3c9,0x421)]=_0x2b0a3b[_0x58bc6b(0x4e7,0x553,0x57c,0x5e5)+_0x58bc6b(0x50f,0x4d1,0x411,0x551)][_0x482185],_0x8d2061;}}saveSettingsDebounced();const _0x3ca437=_0x4fc6d0['HXUSR']($,_0x4fc6d0[_0x58bc6b(0x4a2,0x4be,0x4dd,0x4ac)]);_0x3ca437['length']&&_0x4fc6d0['txyJd'](refreshCharacterSettings,_0x3ca437),updateFormFields(_0x438450),console['log'](_0x725189(0x4fa,0x5a2,0x49e,0x4da)+_0x725189(0x444,0x3cc,0x52e,0x4a1)+_0x58bc6b(0x5b5,0x5cc,0x529,0x50e)+'设\x20\x22'+_0x3dba12+'\x22');}async function updateOutfitPresetsFromLLM(_0x61e2c9){const _0x244ae5={'vsYve':function(_0x769156,_0xd2a07c){return _0x769156!==_0xd2a07c;},'ajScB':_0x97e3ed(0x2d0,0x1ff,0x22b,0x2fc)+'时','wmyqR':function(_0x17d13c){return _0x17d13c();},'gBDSP':function(_0x4b605b,_0x267061,_0x17bbc8){return _0x4b605b(_0x267061,_0x17bbc8);},'CNSRD':'中文名称','kSQZd':_0x97e3ed(0x251,0x233,0x1cf,0x2ed),'gHnfF':'上半身','gvPQQ':_0x585f89(0x2f1,0x222,0x26d,0x1d9),'mZSgi':function(_0x40949c,_0xd5dd09){return _0x40949c===_0xd5dd09;},'Isvhh':function(_0x22eae1,_0x548b57){return _0x22eae1(_0x548b57);},'UHyJF':'brXIa','KyuqI':'vimYt','uhZms':function(_0x1dbd5c,_0x3c3129){return _0x1dbd5c(_0x3c3129);},'LOzCk':_0x585f89(0x2d1,0x36a,0x398,0x352)+_0x585f89(0x2a9,0x26e,0x32e,0x2b5)+'cter','Quyrj':function(_0x8ec1a9,_0x13224f){return _0x8ec1a9(_0x13224f);}},_0x4284f5=extension_settings[extensionName],_0x4bebb7={};_0x4bebb7[_0x585f89(0x1c5,0x362,0x294,0x282)]=_0x244ae5[_0x585f89(0x1c9,0x327,0x283,0x2cf)],_0x4bebb7['nameEN']=_0x244ae5[_0x585f89(0x33d,0x39e,0x343,0x37e)],_0x4bebb7[_0x585f89(0x3a5,0x2fa,0x30d,0x2ed)]=_0x97e3ed(0x1fe,0x247,0x2c9,0x28e),_0x4bebb7[_0x97e3ed(0x300,0x39f,0x35a,0x245)]=_0x244ae5[_0x97e3ed(0x283,0x281,0x262,0x347)],_0x4bebb7[_0x97e3ed(0x399,0x3d8,0x380,0x42a)+'ack']=_0x97e3ed(0x291,0x2cd,0x2cf,0x23b);function _0x97e3ed(_0x3829cd,_0x208f80,_0x592227,_0xb428c5){return _0x4056(_0x3829cd-0x84,_0x592227);}_0x4bebb7['fullBody']=_0x244ae5['gvPQQ'],_0x4bebb7[_0x585f89(0x39d,0x380,0x355,0x41d)+'ck']=_0x97e3ed(0x22d,0x2e2,0x161,0x1ff);const _0x5c9483=_0x4bebb7;function _0x585f89(_0x3197d3,_0x30bd29,_0x1bf9ab,_0x18844f){return _0x4056(_0x1bf9ab-0x9c,_0x30bd29);}for(const _0x4920c0 of _0x61e2c9){const _0x1ff515=_0x4920c0['nameCN'];if(!_0x1ff515)continue;const _0x262174=_0x4284f5[_0x97e3ed(0x306,0x35a,0x376,0x341)+'ets']?.[_0x1ff515];if(_0x262174){let _0x59d35d=0x1159*0x1+0xb2f*-0x2+-0x505*-0x1;for(const _0x12e082 in _0x5c9483){_0x4920c0[_0x12e082]&&_0x244ae5[_0x97e3ed(0x329,0x2ea,0x2a6,0x283)](_0x4920c0[_0x12e082],_0x262174[_0x12e082])&&_0x59d35d++;}if(_0x244ae5['mZSgi'](_0x59d35d,-0x24fe+-0x381*0x5+-0x5*-0xae7)){console['log'](_0x97e3ed(0x2e4,0x2c4,0x390,0x327)+'PromptModi'+_0x585f89(0x3d9,0x328,0x345,0x2e9)+_0x1ff515+_0x97e3ed(0x226,0x213,0x215,0x1e9));continue;}const _0x2768b8=_0x585f89(0x3b6,0x426,0x387,0x38c)+_0x1ff515+'\x22\x20有\x20'+_0x59d35d+_0x97e3ed(0x208,0x150,0x1f6,0x1f4),_0x59fece=await stylishConfirm(_0x2768b8);if(!_0x59fece)continue;for(const _0x212d2f in _0x5c9483){_0x4920c0[_0x212d2f]&&(_0x262174[_0x212d2f]=_0x4920c0[_0x212d2f]);}console[_0x585f89(0x452,0x40d,0x3b0,0x34d)](_0x585f89(0x256,0x28d,0x2fc,0x2d8)+'PromptModi'+_0x585f89(0x340,0x28b,0x327,0x333)+_0x97e3ed(0x29e,0x1cc,0x21f,0x23f)+_0x1ff515+'\x22');}else{const _0x1a2112='检测到新服装\x20\x22'+_0x1ff515+_0x97e3ed(0x370,0x306,0x304,0x2af),_0x1a67f5=await _0x244ae5[_0x585f89(0x220,0x1cd,0x23a,0x2f6)](stylishConfirm,_0x1a2112);if(!_0x1a67f5)continue;if(!_0x4284f5[_0x97e3ed(0x306,0x2db,0x282,0x38e)+'ets']){if(_0x97e3ed(0x219,0x184,0x265,0x196)===_0x244ae5[_0x585f89(0x2fa,0x451,0x37b,0x3da)]){const _0x289db3=_0x244ae5[_0x97e3ed(0x37c,0x3a1,0x2c6,0x2ab)](_0x5a4ab8);_0x536aee[_0x97e3ed(0x398,0x40c,0x3e7,0x300)]('[character'+_0x97e3ed(0x2ab,0x2c7,0x317,0x373)+_0x585f89(0x2ca,0x2b9,0x2c4,0x31b)+_0x97e3ed(0x2dc,0x39e,0x385,0x2c9)+_0x585f89(0x2a1,0x39d,0x2e6,0x3ae)+'mpt\x20(ID:\x20'+_0x289db3+')');const _0x58feb5=_0x22ee7b=>{if(_0x244ae5[_0x4c40f5(0x39f,0x42b,0x3eb,0x32a)](_0x22ee7b['id'],_0x289db3))return;function _0x5594b3(_0x4fc232,_0x159350,_0x4a5bd0,_0x428caf){return _0x585f89(_0x4fc232-0x109,_0x428caf,_0x4fc232- -0x2a7,_0x428caf-0x35);}_0x188741[_0x4c40f5(0x2a1,0x232,0x2c2,0x241)+_0x4c40f5(0x364,0x350,0x2e6,0x3a0)](_0x5769d9[_0x5594b3(0xbb,0x82,0x10f,0x153)+_0x5594b3(0x22,0xca,0xc2,0xc4)+_0x5594b3(0x88,-0x25,-0x37,0x2f)+_0x4c40f5(0x3b0,0x2b5,0x31b,0x28c)],_0x58feb5);function _0x4c40f5(_0x1185d5,_0x2104ec,_0x3e74d3,_0x280b9b){return _0x97e3ed(_0x3e74d3-0xc2,_0x2104ec-0x1ae,_0x280b9b,_0x280b9b-0x2e);}_0x432a8e(_0x22ee7b[_0x4c40f5(0x362,0x33f,0x32b,0x2f2)]);};_0x473eeb['on'](_0x3b75ee['LLM_CHAR_M'+_0x97e3ed(0x2b1,0x292,0x1fe,0x23c)+'PROMPT_RES'+_0x97e3ed(0x259,0x265,0x32c,0x21c)],_0x58feb5);const _0x2f1b01={};_0x2f1b01['id']=_0x289db3,_0x160ef9['emit'](_0x1cab88[_0x585f89(0x3c8,0x399,0x362,0x403)+_0x97e3ed(0x2b1,0x2a3,0x281,0x226)+'PROMPT_REQ'+'UEST'],_0x2f1b01),_0x244ae5['gBDSP'](_0x45ccdb,()=>{function _0xfa5bd1(_0x2d1ccc,_0x389c31,_0x317286,_0x1df27d){return _0x585f89(_0x2d1ccc-0x176,_0x389c31,_0x1df27d-0x154,_0x1df27d-0x160);}_0x5ad0c6['removeList'+_0xfa5bd1(0x467,0x3dd,0x2e7,0x390)](_0x3234fb[_0xfa5bd1(0x55b,0x53d,0x4cc,0x4b6)+_0x4f00ac(0x38d,0x30a,0x385,0x2dd)+'PROMPT_RES'+_0xfa5bd1(0x357,0x39f,0x487,0x3c5)],_0x58feb5);function _0x4f00ac(_0x336421,_0x218e50,_0x4a3ba2,_0x2d0c1d){return _0x585f89(_0x336421-0x6c,_0x2d0c1d,_0x336421-0xc4,_0x2d0c1d-0x170);}_0x2d3c08(new _0x358891(_0x244ae5[_0xfa5bd1(0x3c4,0x4a2,0x48c,0x496)]));},-0x25f7+0x38f1+0x3*0x6b2);}else _0x4284f5['outfitPres'+_0x585f89(0x322,0x235,0x2f3,0x2ae)]={};}const _0x41f49f={};_0x41f49f[_0x585f89(0x34f,0x210,0x294,0x28d)]=_0x4920c0[_0x97e3ed(0x27c,0x2bb,0x233,0x1c5)],_0x41f49f[_0x585f89(0x1a1,0x244,0x277,0x1a9)]=_0x4920c0[_0x97e3ed(0x25f,0x1aa,0x1e3,0x2fc)]||'',_0x41f49f[_0x585f89(0x322,0x3e0,0x30d,0x3ca)]=_0x4920c0[_0x97e3ed(0x2f5,0x3bc,0x389,0x354)]||'',_0x41f49f[_0x585f89(0x2a0,0x2e0,0x318,0x2a8)]=_0x4920c0[_0x585f89(0x378,0x2a6,0x318,0x2d4)]||'',_0x41f49f['upperBodyB'+_0x97e3ed(0x31c,0x366,0x2a5,0x318)]=_0x4920c0[_0x97e3ed(0x399,0x438,0x46b,0x39c)+'ack']||'',_0x41f49f[_0x585f89(0x272,0x1c4,0x25b,0x30b)]=_0x4920c0[_0x585f89(0x2ca,0x2cc,0x25b,0x187)]||'',_0x41f49f[_0x97e3ed(0x33d,0x3d3,0x3af,0x344)+'ck']=_0x4920c0[_0x585f89(0x36f,0x2aa,0x355,0x28b)+'ck']||'',_0x4284f5[_0x585f89(0x315,0x384,0x31e,0x2b0)+_0x97e3ed(0x2db,0x380,0x394,0x25d)][_0x1ff515]=_0x41f49f,console['log'](_0x585f89(0x394,0x366,0x2fc,0x268)+'PromptModi'+_0x97e3ed(0x302,0x32f,0x2ff,0x39a)+'设\x20\x22'+_0x1ff515+'\x22');if(_0x4920c0[_0x585f89(0x2fa,0x2d4,0x30d,0x3c6)]&&_0x4920c0[_0x585f89(0x3c6,0x3c8,0x30d,0x38c)][_0x585f89(0x217,0x24f,0x282,0x2ee)]()){const _0x1b5a17=_0x4920c0[_0x585f89(0x31e,0x261,0x30d,0x3da)]['trim']()[_0x97e3ed(0x393,0x393,0x432,0x38e)+'e']()[_0x97e3ed(0x2d4,0x284,0x353,0x39d)](/\s+/g,'');for(const [_0x13c4d5,_0x48933d]of Object['entries'](_0x4284f5[_0x97e3ed(0x2e7,0x375,0x22e,0x325)+'resets']||{})){if(_0x244ae5[_0x97e3ed(0x329,0x2fc,0x2ee,0x35b)](_0x244ae5[_0x585f89(0x2ff,0x385,0x3b3,0x33c)],_0x585f89(0x367,0x44d,0x39e,0x2d3))){const _0xda9aa2={};_0xda9aa2[_0x97e3ed(0x2c4,0x2d9,0x234,0x35b)]=_0x97e3ed(0x217,0x2d7,0x2d6,0x28c),_0xda9aa2['data']=_0x583e35,_0xda9aa2[_0x97e3ed(0x262,0x21f,0x2ff,0x2b2)]=_0x2d762d,_0xda9aa2[_0x585f89(0x247,0x2a3,0x292,0x30c)+_0x97e3ed(0x32c,0x322,0x3c1,0x312)]=[],_0x11f92e[_0x97e3ed(0x29b,0x28e,0x2af,0x1d3)](_0xda9aa2);}else{if(_0x48933d[_0x585f89(0x2ed,0x335,0x277,0x2f9)]&&_0x244ae5[_0x97e3ed(0x20b,0x217,0x1dc,0x1a6)](_0x48933d[_0x97e3ed(0x25f,0x2a1,0x2d1,0x32b)][_0x97e3ed(0x393,0x35e,0x3a3,0x2e6)+'e']()[_0x585f89(0x21d,0x311,0x2ec,0x2f1)](/\s+/g,''),_0x1b5a17)){!_0x48933d[_0x585f89(0x2de,0x325,0x285,0x1b6)]&&(_0x48933d[_0x97e3ed(0x26d,0x2be,0x238,0x321)]=[]);!_0x48933d[_0x585f89(0x28a,0x2ad,0x285,0x1ea)][_0x97e3ed(0x377,0x2ec,0x443,0x376)](_0x1ff515)&&(_0x48933d[_0x585f89(0x2be,0x2f5,0x285,0x29a)][_0x97e3ed(0x29b,0x276,0x2ac,0x2a1)](_0x1ff515),console[_0x97e3ed(0x398,0x2c8,0x2db,0x3aa)](_0x97e3ed(0x2e4,0x2d9,0x233,0x2c0)+_0x97e3ed(0x2ab,0x380,0x2ad,0x25a)+'fy]\x20服装\x20\x22'+_0x1ff515+'\x22\x20已归属到角色\x20\x22'+_0x13c4d5+'\x22'));break;}}}}}}_0x244ae5[_0x97e3ed(0x37c,0x2e0,0x2bb,0x3a8)](saveSettingsDebounced);const _0x5e65be=_0x244ae5[_0x585f89(0x3e5,0x317,0x399,0x42a)]($,_0x244ae5[_0x585f89(0x386,0x306,0x37f,0x34b)]);_0x5e65be[_0x585f89(0x2a0,0x267,0x2e3,0x25a)]&&_0x244ae5['Quyrj'](refreshCharacterSettings,_0x5e65be);}function updateFormFields(_0x3693dc){const _0x1fa63f={'NplEC':function(_0x1da7d7,_0x104a49){return _0x1da7d7(_0x104a49);},'hCBqw':'input','JhdRq':_0x188958(0x2bd,0x384,0x331,0x1fe),'Vrfgn':_0x188958(0x369,0x2f6,0x2a2,0x41e)+_0x1c8dc4(-0x10b,-0xa2,-0x6d,-0x121),'uuTro':_0x188958(0x278,0x2d3,0x2e7,0x1c9)+_0x188958(0x2d1,0x2a1,0x33f,0x20a),'rokEf':'facialFeat'+_0x188958(0x361,0x2f6,0x32d,0x322),'GWQwz':_0x1c8dc4(-0xb4,-0x40,-0xcd,-0x99)+'FW','SmKYb':'fullBodySF'+'W','ouoDN':_0x1c8dc4(-0x190,-0x1cf,-0x21c,-0x1e2)+_0x1c8dc4(-0x199,-0xc7,-0x109,-0x1f6),'IYBTM':_0x1c8dc4(-0x4e,-0xf1,-0x98,0x4b)+'FWBack'},_0x19e786=['nameCN',_0x1fa63f[_0x188958(0x398,0x36f,0x3a3,0x450)],_0x1fa63f[_0x1c8dc4(-0xb2,-0x41,-0x12,-0x5d)],_0x1fa63f[_0x188958(0x3d0,0x413,0x37b,0x345)],_0x1fa63f['rokEf'],_0x1fa63f[_0x1c8dc4(-0x5f,-0x116,-0xa1,-0x93)],'upperBodyS'+_0x188958(0x313,0x28e,0x330,0x368),_0x1fa63f[_0x188958(0x2c5,0x2ae,0x203,0x287)],_0x1c8dc4(-0xd6,-0x160,-0x1a9,-0x151)+'WBack',_0x188958(0x2b1,0x322,0x2b5,0x36c)+_0x188958(0x33d,0x2db,0x334,0x28e),_0x1fa63f[_0x188958(0x2ba,0x290,0x257,0x29f)],_0x1c8dc4(-0x4e,-0x7,-0x3,0x4)+'FW',_0x1fa63f['IYBTM']];function _0x188958(_0x2087e1,_0x93e0db,_0x46e1f8,_0x3abd54){return _0x4056(_0x2087e1-0xe2,_0x93e0db);}function _0x1c8dc4(_0x107761,_0x596a92,_0x32056a,_0x488019){return _0x4056(_0x107761- -0x35f,_0x488019);}_0x19e786[_0x188958(0x25d,0x28e,0x188,0x2cb)](_0x1a62c6=>{function _0x84422(_0x116260,_0x59a449,_0x9becd3,_0x33db48){return _0x188958(_0x59a449-0x6b,_0x116260,_0x9becd3-0x107,_0x33db48-0xb);}function _0x3f6e88(_0x34d97f,_0xc539cb,_0xee567f,_0x2bf17e){return _0x1c8dc4(_0x2bf17e-0x639,_0xc539cb-0x39,_0xee567f-0x10e,_0xc539cb);}if(_0x3693dc[_0x1a62c6]){const _0x235438=document[_0x84422(0x3e0,0x3a2,0x377,0x2e0)+_0x3f6e88(0x3f6,0x495,0x478,0x4a6)]('char_'+_0x1a62c6);_0x235438&&(_0x235438['value']=_0x3693dc[_0x1a62c6],_0x1fa63f[_0x84422(0x4af,0x463,0x474,0x4b1)]($,_0x235438)[_0x84422(0x31f,0x3de,0x4af,0x3a6)](_0x1fa63f['hCBqw']));}});}