(function(_0x4a7e89,_0x3465e0){function _0x3a133d(_0x47db3a,_0xa14f3b,_0x2303a7,_0x2cc877){return _0xaa66(_0xa14f3b-0x2d,_0x2303a7);}function _0x4e25a7(_0x43414d,_0x2095ff,_0x399356,_0x14c7a7){return _0xaa66(_0x14c7a7- -0x1b0,_0x2095ff);}const _0x7c1904=_0x4a7e89();while(!![]){try{const _0x5cc56b=-parseInt(_0x4e25a7(0x8f,0xaf,-0xe,0x9b))/(0x1*0x1b0a+0x19*-0xc9+0x4f*-0x18)+parseInt(_0x4e25a7(0xd8,0x143,-0x8,0x90))/(0x1724+-0xeaf+-0x873)+parseInt(_0x4e25a7(0x76,0x96,0xa4,0x10b))/(0x1*-0x25d9+-0x18f4+0x3ed0)+-parseInt(_0x3a133d(0x1cd,0x1be,0x1e5,0x13f))/(-0x539+0xb60+-0x623)*(-parseInt(_0x4e25a7(0x109,0xae,0x92,0x66))/(0x3c3*-0x5+-0x1*-0x923+0x9b1))+parseInt(_0x3a133d(0x35d,0x31f,0x3a9,0x3bf))/(-0x179f*-0x1+-0x6fb*0x1+0x84f*-0x2)+-parseInt(_0x3a133d(0x358,0x2bd,0x354,0x250))/(-0xfb5+-0x6*0x629+0x8e*0x5f)+-parseInt(_0x3a133d(0x243,0x2c4,0x2f6,0x33a))/(-0x2326+0x159*-0xc+0x335a);if(_0x5cc56b===_0x3465e0)break;else _0x7c1904['push'](_0x7c1904['shift']());}catch(_0x847892){_0x7c1904['push'](_0x7c1904['shift']());}}}(_0x5835,0x860ea+0x49f33+-0x2*0x32cdf));const _0x305bdf=(function(){let _0x5cdce7=!![];return function(_0x4b46f2,_0x4346b3){const _0xcb73b4=_0x5cdce7?function(){function _0x5bbea9(_0x182f9c,_0x39c246,_0x1179a7,_0x45433b){return _0xaa66(_0x1179a7- -0x36b,_0x45433b);}if(_0x4346b3){const _0x400a72=_0x4346b3[_0x5bbea9(-0xe1,-0xea,-0x10d,-0xa3)](_0x4b46f2,arguments);return _0x4346b3=null,_0x400a72;}}:function(){};return _0x5cdce7=![],_0xcb73b4;};}()),_0x2792fb=_0x305bdf(this,function(){const _0x4bbd49={};function _0x4f2d1c(_0x156c68,_0x32d233,_0xc85231,_0x34a67f){return _0xaa66(_0x34a67f-0x396,_0x32d233);}_0x4bbd49[_0x4f2d1c(0x636,0x609,0x55b,0x5b5)]=_0x4dddd2(-0x23,-0x46,-0x45,0x3a)+'+$';const _0x2fce15=_0x4bbd49;function _0x4dddd2(_0x176753,_0x24b6e3,_0x892abf,_0x2bb62c){return _0xaa66(_0x24b6e3- -0x23f,_0x892abf);}return _0x2792fb['toString']()[_0x4f2d1c(0x71d,0x715,0x6ea,0x678)](_0x2fce15[_0x4f2d1c(0x5b7,0x5cb,0x539,0x5b5)])[_0x4f2d1c(0x5e9,0x684,0x63d,0x646)]()[_0x4dddd2(-0x5b,-0xa,-0x79,-0x99)+'r'](_0x2792fb)[_0x4f2d1c(0x6c5,0x5d5,0x5d4,0x678)](_0x2fce15[_0x4dddd2(-0x32,-0x20,-0x5,-0x17)]);});_0x2792fb();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x524f7f}from'./promptProcessor.js';function replacePlaceholder(_0x6c3c2e,_0x4c39e3,_0x1ed02d,_0x1db4a2){const _0xb1bca1={'nYxdy':function(_0x4b26f,_0x5d365f){return _0x4b26f===_0x5d365f;},'MDrse':_0x5d077e(0xf4,0x1ce,0x11e,0x134),'sSQZB':_0x5d077e(0x1a4,0x13e,0x15b,0x1da),'XGoyN':function(_0x1523e3,_0x449dfa,_0x35eddf,_0x440ac7,_0x242f7f){return _0x1523e3(_0x449dfa,_0x35eddf,_0x440ac7,_0x242f7f);}};if(_0xb1bca1['nYxdy'](typeof _0x6c3c2e,_0x5d077e(0x11b,0x133,0x16e,0x18e)))return _0x5e4d60(-0xc0,-0x1e,-0xa9,-0xaa)==='RhprX'?_0x4c5ce1:(_0x1ed02d&&_0x6c3c2e['includes'](_0x4c39e3)&&(_0x1db4a2&&_0x1db4a2[_0x5e4d60(-0x11,0x83,-0x16,0x129)](_0x4c39e3)),_0x6c3c2e[_0x5e4d60(-0x25,-0xc0,-0x155,-0xdb)](_0x4c39e3,_0x1ed02d));if(Array[_0x5d077e(0x100,0x121,0x165,0x1ea)](_0x6c3c2e)){if(_0xb1bca1['MDrse']!==_0x5e4d60(-0x1b,-0x26,-0x9d,-0x83)){const _0x14e0ef=_0x13f55e[_0x27dc81],_0x262a7c=_0x14e0ef[_0x5e4d60(0x9d,0x6b,0x124,-0x4b)+_0x5e4d60(-0x37,-0xc,-0xa9,-0x68)];if(!_0x262a7c||!_0x14e0ef[_0x5e4d60(0xb4,0x6b,0x76,-0x4d)+_0x5e4d60(-0xba,-0x41,-0x25,-0x5d)][_0x262a7c])return null;const _0x4794a5={};return _0x4794a5['id']=_0x262a7c,_0x4794a5[_0x5d077e(0xdc,0xbd,0x13a,0x17e)]=_0x14e0ef[_0x5e4d60(0x72,0x6b,0x7,0x48)+_0x5d077e(0x8b,0xda,0x103,0x100)][_0x262a7c],_0x4794a5;}else return _0x6c3c2e[_0x5d077e(0x14f,0x25e,0x1b8,0x1e7)](_0x1722e9=>replacePlaceholder(_0x1722e9,_0x4c39e3,_0x1ed02d,_0x1db4a2));}function _0x5d077e(_0x579428,_0x3d0310,_0x3bd7b9,_0xe072a){return _0xaa66(_0x3bd7b9- -0x114,_0xe072a);}if(_0x6c3c2e&&typeof _0x6c3c2e===_0xb1bca1['sSQZB']){const _0x1572cf={};for(const _0x3e9c3e in _0x6c3c2e){_0x1572cf[_0x3e9c3e]=_0xb1bca1[_0x5d077e(0x1ba,0x187,0x108,0x135)](replacePlaceholder,_0x6c3c2e[_0x3e9c3e],_0x4c39e3,_0x1ed02d,_0x1db4a2);}return _0x1572cf;}function _0x5e4d60(_0x1291ca,_0x3c909b,_0x19b065,_0x385a3c){return _0xaa66(_0x3c909b- -0x258,_0x19b065);}return _0x6c3c2e;}function attachImagesToMessage(_0x4d5c80,_0x5cbc7a,_0x53a000,_0x421339=_0x448fb0(0xea,0x103,0xd7,0x182)){const _0x1e40b4={};_0x1e40b4['RnvlW']=function(_0x5ebc56,_0x580a87){return _0x5ebc56===_0x580a87;},_0x1e40b4[_0x5e1608(0x505,0x5bc,0x47b,0x4d4)]=_0x4bd4ae(0x5f4,0x5e5,0x53b,0x5af),_0x1e40b4[_0x5e1608(0x5a3,0x5b4,0x655,0x63e)]=_0x4bd4ae(0x606,0x60d,0x525,0x59c);function _0x4bd4ae(_0x5b6cd5,_0x1270fb,_0x1cd244,_0x2abd2c){return _0x448fb0(_0x5b6cd5-0x18b,_0x1270fb-0x90,_0x5b6cd5,_0x2abd2c-0x418);}_0x1e40b4['GvpVT']=_0x5e1608(0x5a4,0x5f0,0x575,0x5d0),_0x1e40b4['QvxnB']=function(_0x5e0ebb,_0x5841ce){return _0x5e0ebb===_0x5841ce;},_0x1e40b4['jNXpI']=_0x5e1608(0x599,0x567,0x5ed,0x51b),_0x1e40b4[_0x4bd4ae(0x649,0x637,0x6a6,0x624)]=_0x4bd4ae(0x55a,0x597,0x5bc,0x5ed),_0x1e40b4[_0x4bd4ae(0x5d6,0x5a4,0x656,0x5eb)]='auto',_0x1e40b4[_0x4bd4ae(0x634,0x604,0x534,0x5d2)]=function(_0x10beb8,_0x1e9ce2){return _0x10beb8<_0x1e9ce2;};function _0x5e1608(_0x4b34cc,_0x39d2fb,_0x213162,_0x567a9d){return _0x448fb0(_0x4b34cc-0x66,_0x39d2fb-0x43,_0x39d2fb,_0x4b34cc-0x400);}_0x1e40b4[_0x5e1608(0x54b,0x492,0x588,0x5e6)]=function(_0x3180c9,_0x16a554){return _0x3180c9>=_0x16a554;},_0x1e40b4[_0x5e1608(0x5bc,0x675,0x606,0x5ba)]=function(_0x2df34d,_0x5e40b4){return _0x2df34d===_0x5e40b4;},_0x1e40b4[_0x4bd4ae(0x576,0x56e,0x4ba,0x542)]=function(_0x2cc782,_0x1d88fc){return _0x2cc782===_0x1d88fc;};const _0x3cfd2b=_0x1e40b4;if(!_0x53a000||_0x3cfd2b[_0x4bd4ae(0x482,0x46c,0x51b,0x4fd)](_0x53a000['length'],-0x17*-0x11+-0x1375*-0x2+-0x2871)||_0x3cfd2b[_0x4bd4ae(0x556,0x60a,0x680,0x5d2)](_0x5cbc7a,-0x3*-0x4df+-0x1e3d*-0x1+-0x2cda)||_0x3cfd2b['VuxwS'](_0x5cbc7a,_0x4d5c80[_0x5e1608(0x532,0x530,0x551,0x4bc)]))return _0x4d5c80;const _0x14b06e=[..._0x4d5c80],_0x5aa6c3=_0x14b06e[_0x5cbc7a],_0x5c95eb=[];if(_0x3cfd2b[_0x5e1608(0x5bc,0x5b4,0x50d,0x645)](typeof _0x5aa6c3['content'],_0x3cfd2b[_0x5e1608(0x505,0x506,0x4f9,0x592)])){const _0x199e6c={};_0x199e6c['type']=_0x3cfd2b[_0x5e1608(0x4f6,0x457,0x53b,0x4fb)],_0x199e6c[_0x5e1608(0x5a4,0x62b,0x565,0x5b1)]=_0x5aa6c3[_0x4bd4ae(0x620,0x580,0x556,0x5f7)],_0x5c95eb['push'](_0x199e6c);}else Array[_0x5e1608(0x58e,0x612,0x4f8,0x605)](_0x5aa6c3[_0x4bd4ae(0x674,0x65e,0x648,0x5f7)])&&_0x5c95eb['push'](..._0x5aa6c3['content']);if(_0x53a000[_0x4bd4ae(0x52d,0x5b4,0x5be,0x54a)]>0x1d5c+-0x11*-0x1b+-0x1d*0x113){if(_0x3cfd2b[_0x4bd4ae(0x58e,0x549,0x50f,0x542)]('OWfhb',_0x4bd4ae(0x628,0x69c,0x612,0x5fb))){const _0x2fee0c={};_0x2fee0c['type']='text',_0x2fee0c[_0x4bd4ae(0x5f8,0x536,0x58c,0x5bc)]=_0x4bd4ae(0x4d1,0x4e4,0x5fa,0x55d)+_0x53a000[_0x5e1608(0x532,0x501,0x59c,0x572)]+'张'+_0x421339+']',_0x5c95eb['push'](_0x2fee0c);}else _0x3bcddb&&_0x136d15[_0x4bd4ae(0x621,0x568,0x590,0x608)](_0x179591);}_0x53a000[_0x5e1608(0x5c9,0x5bd,0x60b,0x590)]((_0x27dd1d,_0x453dfe)=>{const _0x23fc3c=_0x3cfd2b['RnvlW'](typeof _0x27dd1d,_0x3cfd2b[_0x45badc(0x1cb,0x285,0x133,0x15b)])?_0x27dd1d:_0x27dd1d[_0x4e15ca(0x474,0x402,0x47e,0x3c7)],_0x1224aa=_0x3cfd2b['RnvlW'](typeof _0x27dd1d,_0x3cfd2b[_0x45badc(0x269,0x206,0x2ec,0x1c0)])&&_0x27dd1d[_0x4e15ca(0x433,0x3cc,0x3d1,0x4be)]?_0x27dd1d['name']:''+_0x421339+(_0x453dfe+(0xffe+-0x1*-0x1b02+-0x2aff)),_0x41d7da={};_0x41d7da[_0x4e15ca(0x3ef,0x3ac,0x341,0x35b)]=_0x3cfd2b[_0x4e15ca(0x36e,0x2cd,0x3eb,0x39a)],_0x41d7da[_0x45badc(0x26a,0x310,0x24d,0x1f4)]='['+_0x1224aa+']',_0x5c95eb['push'](_0x41d7da);let _0x388cf3=_0x23fc3c;!_0x23fc3c[_0x45badc(0x2bc,0x269,0x28a,0x23b)](_0x45badc(0x1b6,0x25f,0x16b,0x127))&&(_0x3cfd2b[_0x45badc(0x19a,0x1a3,0x1a4,0x18f)](_0x3cfd2b[_0x4e15ca(0x482,0x4f3,0x4b6,0x533)],_0x45badc(0x25f,0x261,0x300,0x2ac))?_0x388cf3=_0x45badc(0x278,0x2e3,0x29d,0x293)+_0x4e15ca(0x32b,0x27b,0x34e,0x280)+'4,'+_0x23fc3c:_0x3d1af2[_0x4e15ca(0x468,0x50a,0x4e0,0x3b4)](_0x3884d2));function _0x45badc(_0x34c5fb,_0x3028a7,_0x1dbdcd,_0x13c2b1){return _0x5e1608(_0x34c5fb- -0x33a,_0x3028a7,_0x1dbdcd-0xff,_0x13c2b1-0xe5);}const _0xd78a56={};_0xd78a56['type']=_0x3cfd2b[_0x45badc(0x2d2,0x374,0x38a,0x2b1)];function _0x4e15ca(_0x2c3f94,_0x39242d,_0x51bbf3,_0x1eee22){return _0x4bd4ae(_0x51bbf3,_0x39242d-0x116,_0x51bbf3-0x6,_0x2c3f94- -0x1a0);}_0xd78a56[_0x4e15ca(0x44d,0x431,0x3d4,0x39d)]={},_0xd78a56[_0x4e15ca(0x44d,0x431,0x3d4,0x39d)][_0x45badc(0x260,0x27d,0x250,0x2fc)]=_0x388cf3,_0xd78a56[_0x4e15ca(0x44d,0x431,0x3d4,0x39d)][_0x45badc(0x177,0x1b3,0x148,0x1cb)]=_0x3cfd2b[_0x4e15ca(0x44b,0x39e,0x3c5,0x4da)],_0x5c95eb[_0x45badc(0x216,0x1e2,0x160,0x275)](_0xd78a56);});const _0x2182de={..._0x5aa6c3};return _0x2182de[_0x5e1608(0x5df,0x662,0x61e,0x64c)]=_0x5c95eb,_0x14b06e[_0x5cbc7a]=_0x2182de,_0x14b06e;}function findMessageIndexWithPlaceholder(_0x68be49,_0x468021){const _0x4999bb={};function _0x842e26(_0x35524c,_0x3f43e8,_0x3c9b91,_0x5607a7){return _0x448fb0(_0x35524c-0x3e,_0x3f43e8-0x143,_0x3c9b91,_0x5607a7-0xd3);}_0x4999bb[_0x842e26(0x170,0x25a,0x150,0x1dd)]='(((.+)+)+)'+'+$',_0x4999bb[_0x19bf7a(0x487,0x3ff,0x4a9,0x442)]=function(_0x2fa438,_0x122370){return _0x2fa438===_0x122370;},_0x4999bb['FSGkF']=function(_0x123253,_0x2bda20){return _0x123253<_0x2bda20;},_0x4999bb[_0x842e26(0x249,0x203,0x1f6,0x265)]='QXbqE';function _0x19bf7a(_0x52d3d1,_0x30b634,_0x7223bf,_0x20499e){return _0x448fb0(_0x52d3d1-0xf2,_0x30b634-0x8f,_0x52d3d1,_0x30b634-0x247);}_0x4999bb[_0x19bf7a(0x326,0x34e,0x3e0,0x3df)]='ZqBRH',_0x4999bb[_0x842e26(0x263,0x164,0x271,0x1d7)]=_0x842e26(0x1f4,0x2db,0x2da,0x277),_0x4999bb[_0x842e26(0x30e,0x242,0x1ef,0x29f)]=_0x19bf7a(0x272,0x311,0x366,0x3a7);const _0x3e2d01=_0x4999bb;for(let _0x19588f=0xa23+0xb72+0x41*-0x55;_0x3e2d01[_0x19bf7a(0x251,0x2eb,0x37b,0x324)](_0x19588f,_0x68be49[_0x842e26(0x193,0x236,0x1a7,0x205)]);_0x19588f++){const _0x5f386d=_0x68be49[_0x19588f];if(typeof _0x5f386d['content']==='string'&&_0x5f386d[_0x842e26(0x2b5,0x331,0x346,0x2b2)]['includes'](_0x468021))return _0x19588f;else{if(Array['isArray'](_0x5f386d['content']))for(const _0x21a7cf of _0x5f386d['content']){if(_0x3e2d01[_0x19bf7a(0x3d8,0x3d9,0x3ab,0x3c4)]!==_0x3e2d01[_0x19bf7a(0x400,0x34e,0x2a6,0x29a)]){if(_0x3e2d01['kuuml'](_0x21a7cf[_0x19bf7a(0x40e,0x3be,0x372,0x452)],_0x3e2d01[_0x19bf7a(0x2d0,0x34b,0x3b1,0x3de)])&&_0x21a7cf['text'][_0x842e26(0x161,0x15f,0x179,0x1f2)](_0x468021))return _0x3e2d01[_0x842e26(0x240,0x237,0x2be,0x28b)](_0x3e2d01[_0x842e26(0x32c,0x2ae,0x274,0x29f)],_0x3e2d01['VkEwN'])?_0x19588f:_0x26458e[_0x19bf7a(0x48b,0x40c,0x40c,0x48b)]()[_0x19bf7a(0x3df,0x43e,0x38b,0x47e)](QwJqXI['DChne'])[_0x19bf7a(0x485,0x40c,0x3f7,0x45a)]()[_0x842e26(0x24c,0x211,0x16e,0x21d)+'r'](_0x3c9ccf)[_0x19bf7a(0x41e,0x43e,0x3ee,0x3e5)](QwJqXI['DChne']);}else for(const _0x156c6d of _0x1d742f['content']){if(_0x3e2d01[_0x842e26(0x1d3,0x2aa,0x329,0x28b)](_0x156c6d[_0x19bf7a(0x3dd,0x3be,0x39d,0x3b5)],_0x19bf7a(0x383,0x3eb,0x468,0x3c9))&&_0x156c6d[_0x19bf7a(0x41e,0x3eb,0x364,0x34f)][_0x19bf7a(0x41a,0x366,0x2e7,0x2fd)](_0x50d2b4))return _0x30fcaa;}}}}return-(0xd*0x10b+0x1abb+-0x2849*0x1);}function generateRequestId(){function _0x3a34a3(_0x550679,_0x1cde8a,_0x1e7406,_0x4f1a2b){return _0x448fb0(_0x550679-0x18c,_0x1cde8a-0x14a,_0x4f1a2b,_0x1cde8a-0x498);}if(crypto&&crypto[_0x3a34a3(0x659,0x600,0x585,0x632)])return crypto[_0x158c6d(0xa5,0x6f,0x66,-0x53)]();function _0x158c6d(_0x40994f,_0x121d7b,_0x3b2de6,_0x21cfe7){return _0x448fb0(_0x40994f-0x112,_0x121d7b-0x14a,_0x21cfe7,_0x3b2de6- -0x102);}return Date['now']()[_0x3a34a3(0x5ed,0x65d,0x641,0x67e)](0x61*0xa+0x3*-0xb6f+0x1ea7)+Math[_0x158c6d(-0x6e,0x62,-0x43,-0xde)]()[_0x158c6d(0xe6,0x87,0xc3,0x15e)](-0x1*-0xab5+0x24e*-0x10+0x1a4f)[_0x3a34a3(0x692,0x698,0x6ae,0x6bb)](0xa5*0x1e+0xd35+-0x2089);}function _0x5835(){const _0x2297cd=['teXnioI/LowBNUE7K+AENos4UUEPUG','zxH0','rLnhA0y','Aw1Hz2vZihrVia','mtGYofPgzuHKAq','ELnsvvy','yw1fDNy','CKPttxm','zfjozgC','zNLDie5VignOyq','5lQu5A6y5Asw6lkm6iom6z2IoIa','CMvWBgfJzufSBa','ENHhyLy','y0XfyKG','ywn0zxjmAxn0va','zgv0ywLS','Efrprwq','l3bUzZTIyxnLnG','z2vUzxjHDgLVBG','yxv0BW','zNLDiow3SUABToAwSoINKUIjSUMIHa','D3jotNy','y2HHCL8','zwfYqvu','zw1PDa','zu1HvfG','CLbiCKu','A2PvvLC','lxrHyI1JAgfYyq','CMfUzg9T','B21jAuS','C2zHrhq','ENbJs0y','Bxb0icHjrdOG','u1Huu2G','BuLjqKi','Aw5KzxHpzG','rKzHAg4','zNLDieXmtsbVDq','C1n5rgm','BND1ueG','sfvfr2m','ChjVBxb0','twrqrxa','C3vJy2vZCW','BgvmAxn0vgv4Da','DMfpCu4','swzXqNy','y3j1q0K','5Qoa5Rwl5yIW6kEs6iMY5Qch562+','uxz4BKi','qML2vuO','whf2D0S','DMfSDwu','E3VNLkJMIlFPNidMSyj9Fq','Cvbmq24','vxDRt1e','Axn0vgv4Da','u2vWtuC','Be9hrKK','tg1fvLm','rxnmyva','t3HkAMi','seH5yNm','DuDLEeK','zNLDifnHDMvKia','s0fXvui','uM52BfC','CMvTB3zLtgLZDa','qxLvEgK','Aw5NignOyxiGBq','5lIk5y2k6lQRtLngv+IdJoMDOG','5lIk5y2k6lQRu0zx6iom6z2IoIa','y2vgsgO','DfrwA0e','D25ksxC','DxbWzxjcB2r5tG','sfzLBhm','zgf0ytO','B2r6tMK','zgTxEwO','sMHHyMO','zxH0icH0CMLNzW','zxiGChjVBxb0ia','r3zWvLq','DcbWCMvZzxq6','DhjPz2DLCG','BgvRAxy','vNbKr20','u0zxqMfJAW','quP4CMO','uNnJrvO','te5pCey','DvfXA0y','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','vMfYAwfIBgvZ','swncCxm','CMvWBgfJzq','zhnUzgS','txjKqwG','5lIl5y2k6lQRu0zx6iom6z2IoIa','sMTvCg8','EejTvMK','rfDfu0i','renOBMu','ANnhA2m','svjtwKC','ChfkCfi','kcGOlISPkYKRkq','koEPUIK','EgvtDuS','y29UDgv4DdO','t0jZwKW','DMfYAwfIBgvZoG','rNj1AeS','5lIl5y2k6lQRtLngvW','5lIl5y2k6lQRu0zx','tK1WreO','DeLHCKS','r2vfsu8','t0rjrLLFuKvtua','5lIl5y2k6lQRtLngv+IdJoMDOG','teXnioIVT+AXGUwKSEI0Pq','tNfQBMu','y1P1t3C','Aw5JBhvKzxm','Aw5WDxq','DhjPBq','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','5lIk5y2k6lQRu0zx','zhbOA1u','qLzfuwi','CMfJDgvYihrHzW','qLPlBg4','vxj6ALC','B1LYDfG','tgXHq3a','odyZnxDQD0TSCa','CMvZzxrZ','tKHqs08','zMLSDgvY','v0Drufm','5PwW5O2UoG','weDVEu4','BgvUz3rO','tu5bs2S','tuHhDMO','5BEY5y+w5RAi5PU05PAW','DhP5s0q','t0rjrLLFuKvrvq','zhn2yM8','ChPxz2O','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','vgH6B2y','B2rPzNKGteXnia','C0jfu2u','wgrQAfm','C3rQzNy','DxjLC0jHy2S','Ag11yuS','DMfYAwfIBgvZ','uhjVBxb0tw9KAq','y3rLCG','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','zNLDievYCM9YoG','rfL6sKC','vfzqrLC','swDftfy','y29UC3rYDwn0BW','vNv4D1m','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','ANHnuvG','i3n0lwnOyxr1oa','ue5uB0O','ChvZAa','CLrVwu8','uLPAq3G','zw5LCG','5lIk5y2k6lQRtLngvZOG','mtqXmtKWogPWvg9sEq','u0zx','v3v1vwC','BMC6','t0nWBfi','AhboCNm','5lIk5y2k6lQRu0zx6iom6z2I','z0r2y3a','AxPeuvy','zNLDienOyxjHyW','wu5eshK','nZC0mZqXrKTTwK5z','CMvZzxrjza','vwjTAMG','zgf0yq','rejbvNe','zNLDifjHDYbmta','BwjzqMm','A0jMzeW','CMfUzg9Tvvvjra','5lIl5y2k6lQRu0zx6iom6z2I','v25bvLO','z2v0rwXLBwvUDa','y2HHCMfJDgvYCW','zhrQrhu','5lIT5PAh5zcn56EW','AKjAEwq','zhrgzKq','B2f3C2y','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','yxbWBhK','5Rgc6lAf5PE2','zNLDioATO+wCQowKHoEqHUINKUIjSG','icdML6C6ia','DhLWzq','ExnczNC','B2fVCxy','EgPxsLi','ue1Kzg4','C2rsrLi','t05trq','5A2x5Q61ici','D29YBgrcB29RqW','uvPNrgq','zNLDien1CNjLBG','5y+c6icd5zU+54Mh','5lIl5y2k6lQRtLngvZOG','B2jQzwn0','5lIl5y2k6lQRtLngv+IdJoMDOJO','B01yDwi','t0rjrLLFr0vuxW','CMvZDwX0','u3DMuLm','w2nOyxjHy3rLCG','D1vPC2O','Bw9KAwz5ihjLCq','seXbz3m','AxnbCNjHEq','uK5ItLe','rLDcywnR','DuHez1y','zeHAsey','twrAzw0','v29YBgrcB29R','uhPcuNu','6iUX5PAh5zcn56EWoIa','C3rYAw5N','E3VLVzpLIy3OP5lOIBj9Fq','EMXVveC','DxjS','CgP3AwO','q25XEwe','uxHLsNO','5lIk5y2k6lQRtLngv+IdJoMDOJO','qvbKugK','DxnLCKrLBwfUza','AfPzzem','AhHxzgS','BMvXt1q','Dgv4Da','mtaZntm3n3DdzLDxDa','zMfJAwfSrMvHDa','zNLDiev4zwn1Da','DxbWzxjcB2r5uW','CMvXDwvZDcaOsq','CYbMB3vUzcbPBG','D29YBgqGyM9VAW','mti0nZu0otz5C29fBg4','zNvSBejVzhLtrG','sfP4CuK','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','B3iGzgvIDwDNAq','vLfzzKu','zgf0ytPPBwfNzq','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','C3bSAxq','5lQu5A6y5Asw6lkm','CLLiuKK','v0jHy2S','A3v1BwW','z09itwK','rhrWzxG','BMfTzq','tKvLB2i','igLUzgv4','5lIT5PAh5zcn56EWoIa','tKnmz0S','DxjLCW','t05tthK','sKThvfG','zxHLyW','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','Dg9tDhjPBMC','zNLDifvZzxiGCG','teXnx0niqvjFtq','DgLTzw91De1Z','zM9YrwfJAa','y29TBw9Uq2HHCG','5lIk5y2k6lQRtLngvW','vMTfD04','ufjptvbux1jfuW','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','CIb0zxH0oG','mJmWntu2mhbQvhrzyW','lI4U','Bw9KAwz5ihbYBW','q2nOquS','pc/KURRNIAK+','Aw1Hz2vFDxjS','qKPLCw0','B3v0zML0rw5HyG','y2HHCMfJDgvYua','rKnSEfK','BMfTzuvo','q29UDgv4Da','5lQu5A6y5Asw6lkm6iom6z2I','ChjVBxb0oG','Bg9N','y29UDgvUDa','ue9ou0u','BwfW','C2jcC0q','t1DMAgi','DxzMuu8','ig91Dhb1Da','DgvKigrHDge6','BwvZC2fNzq','ig1LC3nHz2uGAq','y2HHDe1LDgfKyq','rdOG','AezjEfi','AfDNzKK','AwrosMK','v3nLBLu','zxjLzcK6','ywrK','6k6+ici','zNLDiezPBMfSia','q3nyzuy','y29UDgv4Da','rvnu','C3rHCNrZv2L0Aa','C2vHCMnO','5yEg5Ash5PU05PAW6kEs6iMYici','B250zw50','y2HHCL9TB2rPzG','BMj1r1G','yMfZzty0','r3P5wLG','BMfTzuno','v2X1Dve','C3vIC3rYAw5N','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','pos6UUEjQt4k','iIdNMOtKU6xKUiVMLBdMJA46cGO','C2L6zq','vuvtva','zxjYB3i','mZKYmJy5oezYBK9ptG','Dhb1DdO','zNvSBejVzhLouW','AK5yCeK','Aw5MBW','y2vADKW','BgL2CgK','wez6wu8','vfPNvwe','6iUX5PAh5zcn56EW','5PYQ5zYOieXmtsdOVPpLH7RKUk0','CxPkvLm','qNLjza','5lIl5y2k6lQRu0zxoIa','sLPby0q'];_0x5835=function(){return _0x2297cd;};return _0x5835();}export function LLM_CHAR_MODIFY_GET_PROMPT(){const _0x407233={'pjwij':function(_0x4db182,_0x503f2b){return _0x4db182===_0x503f2b;},'BVEQb':_0x507bab(0x13a,0x1ed,0x1fe,0x190),'tIarK':function(_0x5e1e6e,_0x25629e){return _0x5e1e6e!==_0x25629e;},'sdRFR':function(_0x44e5f7,_0x1b30e3){return _0x44e5f7(_0x1b30e3);},'dkWyj':function(_0x362da7){return _0x362da7();},'FruhK':function(_0x136d97,_0xffb84a,_0x36c4c2){return _0x136d97(_0xffb84a,_0x36c4c2);}};function _0x507bab(_0x36fe2f,_0x1ee244,_0x50d745,_0x5a2735){return _0x448fb0(_0x36fe2f-0x4c,_0x1ee244-0x163,_0x50d745,_0x5a2735-0x83);}return new Promise((_0xb3bea7,_0xf1f04)=>{const _0x4060a6={'JKGTX':function(_0x54a713,_0x42ea0a){function _0x12b20b(_0x54e498,_0x46230a,_0x184fc6,_0x1ed199){return _0xaa66(_0x46230a- -0x329,_0x184fc6);}return _0x407233[_0x12b20b(-0x59,-0xa3,-0x14,-0x3f)](_0x54a713,_0x42ea0a);},'BZKln':_0x218e89(0x342,0x3aa,0x340,0x3dc),'IgELV':_0x407233[_0xa07d03(0x183,0x182,0x16f,0x187)],'amEvv':function(_0x413587,_0x39dbbe){function _0x56b27b(_0x51eca3,_0x2f66a6,_0x157050,_0x43a674){return _0xa07d03(_0x51eca3-0x19e,_0x51eca3,_0x43a674-0x80,_0x43a674-0x1ba);}return _0x407233[_0x56b27b(0x1e7,0x254,0x14d,0x1e2)](_0x413587,_0x39dbbe);},'YNDHy':function(_0xd5250d,_0x5d7925){function _0x12c0c2(_0x6f6264,_0x532a57,_0x482c98,_0xd41efd){return _0xa07d03(_0x6f6264-0x8c,_0x6f6264,_0xd41efd-0x12b,_0xd41efd-0xb);}return _0x407233[_0x12c0c2(0x2d5,0x2b6,0x388,0x2f1)](_0xd5250d,_0x5d7925);}},_0x4dc39f=_0x407233[_0x218e89(0x331,0x3b0,0x43e,0x3ac)](generateRequestId);function _0x218e89(_0x4f12ed,_0x1ce865,_0x46b4b1,_0x9d58f7){return _0x507bab(_0x4f12ed-0x147,_0x1ce865-0x1d9,_0x4f12ed,_0x1ce865-0x23b);}console[_0xa07d03(0x2e0,0x2b4,0x228,0x2dd)](_0x218e89(0x43b,0x448,0x4b9,0x43c)+_0xa07d03(0x11b,0x239,0x18d,0x1ee)+'fy]\x20Reques'+'ting\x20char\x20'+_0x218e89(0x4e9,0x490,0x4cd,0x4bd)+_0x218e89(0x39e,0x381,0x2ea,0x406)+_0x4dc39f+')');const _0x3f8f5c=_0x406565=>{function _0xb25afb(_0x199336,_0x21b989,_0x10e858,_0x5534c8){return _0x218e89(_0x21b989,_0x10e858- -0x33b,_0x10e858-0x90,_0x5534c8-0xa1);}function _0x2f8504(_0x590645,_0x564f9b,_0x44ed6d,_0x4e9c5a){return _0x218e89(_0x590645,_0x4e9c5a- -0x50d,_0x44ed6d-0x1e1,_0x4e9c5a-0x1f1);}if(_0x4060a6[_0x2f8504(-0x13a,-0x13e,-0x88,-0x8d)](_0x4060a6[_0xb25afb(0x2f,0x155,0xaa,0xc9)],_0x4060a6[_0x2f8504(-0xc9,-0x93,-0x123,-0x106)]))_0x2333c4[_0x2f8504(-0x78,-0x85,-0x82,-0xff)](_0x298c4c);else{if(_0x4060a6[_0xb25afb(0xcf,-0x2,0x2b,0xcc)](_0x406565['id'],_0x4dc39f))return;eventSource[_0x2f8504(-0x138,-0xde,-0x164,-0x169)+_0xb25afb(0x13c,0xc2,0xd6,0xda)](eventNames[_0xb25afb(0x143,0x1d6,0x14a,0x100)+_0x2f8504(-0x15b,-0x136,-0x151,-0xc8)+_0x2f8504(-0x124,-0x85,-0x11c,-0x82)+_0x2f8504(-0x8b,-0x83,-0xae,-0x6f)],_0x3f8f5c),_0xb3bea7(_0x406565['prompt']);}};eventSource['on'](eventNames[_0xa07d03(0x199,0x23e,0x211,0x194)+_0x218e89(0x48c,0x445,0x4a6,0x460)+_0x218e89(0x45b,0x48b,0x474,0x4b6)+'PONSE'],_0x3f8f5c);const _0x3c2836={};_0x3c2836['id']=_0x4dc39f,eventSource[_0xa07d03(0x157,0x186,0x104,0x141)](eventNames[_0x218e89(0x4dd,0x485,0x52b,0x3f5)+'ODIFY_GET_'+'PROMPT_REQ'+_0x218e89(0x413,0x4c3,0x483,0x520)],_0x3c2836);function _0xa07d03(_0x161633,_0x41ba13,_0x56a8d4,_0x42891c){return _0x507bab(_0x161633-0x134,_0x41ba13-0x33,_0x41ba13,_0x56a8d4- -0x39);}_0x407233[_0x218e89(0x344,0x3d2,0x38b,0x3bb)](setTimeout,()=>{function _0x15f7bc(_0x2445ce,_0x37c242,_0x4eb3fb,_0x39a594){return _0x218e89(_0x37c242,_0x39a594- -0x9e,_0x4eb3fb-0x14b,_0x39a594-0x43);}function _0x121f3b(_0x3f74e7,_0x1e2dcd,_0x1c853a,_0x1481a3){return _0x218e89(_0x1e2dcd,_0x1c853a- -0xbf,_0x1c853a-0xf8,_0x1481a3-0x1f0);}eventSource['removeList'+_0x121f3b(0x322,0x36e,0x352,0x35c)](eventNames['LLM_CHAR_M'+'ODIFY_GET_'+'PROMPT_RES'+'PONSE'],_0x3f8f5c),_0x4060a6[_0x121f3b(0x2d1,0x2fd,0x35e,0x322)](_0xf1f04,new Error('获取角色修改提示词超'+'时'));},-0x101*-0x16+0x2ad6*0x1+-0x1*0x19dc);});}export function LLM_CHAR_MODIFY(_0x3ae1ff,_0x1b8a67={}){function _0x478834(_0xfc0636,_0x4c86a2,_0x16b968,_0x3dfb67){return _0x448fb0(_0xfc0636-0x13c,_0x4c86a2-0x78,_0x4c86a2,_0x16b968-0x377);}const _0x592f65={'Jhabj':function(_0x5e76e1,_0x3b0d60){return _0x5e76e1!==_0x3b0d60;},'rJSMs':function(_0x3c3339){return _0x3c3339();},'UwkOQ':function(_0x3721d1,_0x14d7c1){return _0x3721d1(_0x14d7c1);},'cruCI':_0x478834(0x3e2,0x3ec,0x493,0x427),'hZYdC':function(_0x5b9492,_0xe25446){return _0x5b9492===_0xe25446;},'KAqUB':_0x478834(0x4a2,0x463,0x4c4,0x567),'xeSuK':function(_0x531e42,_0x549310){return _0x531e42!==_0x549310;},'cLEbH':_0x478834(0x508,0x502,0x464,0x3f7),'HUEGc':function(_0x81f50c){return _0x81f50c();},'FKdnC':_0x478834(0x4a7,0x5a0,0x53b,0x5da)+_0x478834(0x513,0x4f8,0x4eb,0x4b3),'VpdGm':function(_0x2b3d1e){return _0x2b3d1e();},'NHPKO':function(_0x5962e4,_0x4b4d77,_0x256843){return _0x5962e4(_0x4b4d77,_0x256843);}};function _0x524943(_0x5ce49c,_0x17d564,_0x38543c,_0x39aee5){return _0x448fb0(_0x5ce49c-0x5c,_0x17d564-0x1b0,_0x39aee5,_0x38543c-0x1f1);}return new Promise((_0x30e07b,_0x4a2a22)=>{const _0x2e96fc={'earAU':_0x20dbc4(0x553,0x56a,0x57b,0x582)+'内容','WnAVZ':function(_0x32f6f2,_0x4edbe9){function _0x3c410d(_0x2ad691,_0x44da2a,_0x30e011,_0x4d960d){return _0x20dbc4(_0x4d960d- -0xab,_0x44da2a-0x13f,_0x30e011-0xc,_0x2ad691);}return _0x592f65[_0x3c410d(0x4c4,0x4fa,0x488,0x50f)](_0x32f6f2,_0x4edbe9);},'TZgUa':function(_0x57ac79,_0xe7722a){function _0x18aebf(_0x3e6439,_0x1c1a8c,_0x3f6679,_0x533ce3){return _0x20dbc4(_0x1c1a8c-0x8,_0x1c1a8c-0xa4,_0x3f6679-0x195,_0x3f6679);}return _0x592f65[_0x18aebf(0x4f4,0x514,0x498,0x581)](_0x57ac79,_0xe7722a);},'wODpT':_0x592f65[_0x20dbc4(0x4fd,0x4f5,0x55f,0x55a)],'VeTSH':function(_0x10e1d2,_0xe3d1c2){return _0x592f65['hZYdC'](_0x10e1d2,_0xe3d1c2);},'WsenU':_0x37e5f8(0x88,0xac,0x13e,0xf3),'eMaTX':function(_0xd41817,_0x4d7bc9){function _0x38ab43(_0x3b44e7,_0x511118,_0x54ee61,_0x2b303f){return _0x20dbc4(_0x2b303f-0x3b,_0x511118-0x1a8,_0x54ee61-0x1d7,_0x3b44e7);}return _0x592f65[_0x38ab43(0x5be,0x580,0x4ec,0x564)](_0xd41817,_0x4d7bc9);},'TVPFW':_0x592f65[_0x20dbc4(0x4c8,0x46c,0x500,0x4c1)],'tzyKD':function(_0x2d97a5){function _0xfb615e(_0x384b36,_0x58f85b,_0x16f298,_0x2b79c1){return _0x37e5f8(_0x384b36,_0x58f85b-0x1e7,_0x16f298- -0x176,_0x2b79c1-0x1b3);}return _0x592f65[_0xfb615e(-0x1c7,-0xfa,-0x111,-0x15a)](_0x2d97a5);},'oMXub':function(_0x171a3b,_0x381eab){return _0x592f65['UwkOQ'](_0x171a3b,_0x381eab);},'hpNrs':_0x592f65['FKdnC']},_0xf79f90=_0x592f65[_0x20dbc4(0x513,0x5a8,0x5ba,0x5c6)](generateRequestId),_0x12ba34=_0x1b8a67[_0x37e5f8(0x203,0xdc,0x162,0x128)]||-0xb*-0x182d+0x1f*-0x626+0x9f0b;let _0x1dbdc1=null;console[_0x20dbc4(0x5f7,0x565,0x562,0x587)]('[character'+'PromptModi'+_0x37e5f8(0xb9,0x132,0x141,0x108)+_0x37e5f8(0xe2,0x1c,0x82,0x27)+_0x37e5f8(0x95,0x148,0xd6,0x87)+_0x20dbc4(0x5c2,0x530,0x5df,0x518)+_0x37e5f8(0x1d3,0x23e,0x184,0x1b2)+_0xf79f90+')');const _0x46f3db=()=>{const _0xec7a32={'Cnqya':_0x2e96fc[_0x3a55e9(0x232,0x28b,0x301,0x231)],'lekiv':function(_0x59a82d,_0xec27fe){function _0x34c6ea(_0x2d9220,_0xe787a4,_0x374ef0,_0x5dc9bb){return _0x3a55e9(_0x2d9220-0x6a,_0x374ef0- -0x162,_0x2d9220,_0x5dc9bb-0x168);}return _0x2e96fc[_0x34c6ea(0x240,0x1b2,0x1da,0x183)](_0x59a82d,_0xec27fe);}};function _0x249f30(_0x1981b7,_0x55c21e,_0x1fd3a4,_0x2daba9){return _0x37e5f8(_0x55c21e,_0x55c21e-0x1af,_0x2daba9-0x518,_0x2daba9-0x22);}function _0x3a55e9(_0x418696,_0x501e2c,_0x1b1f4a,_0x1dc5df){return _0x20dbc4(_0x501e2c- -0x247,_0x501e2c-0x1c,_0x1b1f4a-0x14f,_0x1b1f4a);}if(_0x2e96fc[_0x3a55e9(0x43f,0x3e1,0x343,0x439)](_0x2e96fc['wODpT'],_0x249f30(0x5b4,0x625,0x54f,0x5ff))){_0x4365b6['info'](_0xec7a32[_0x3a55e9(0x34c,0x36e,0x3c2,0x375)]);return;}else{eventSource['removeList'+_0x3a55e9(0x383,0x325,0x34e,0x2bc)](eventNames[_0x3a55e9(0x3bd,0x399,0x369,0x42b)+_0x249f30(0x5a9,0x657,0x51d,0x5cc)+_0x249f30(0x59e,0x665,0x6d3,0x62f)],_0x7270c8);if(_0x1dbdc1){if(_0x2e96fc['VeTSH']('PzScR',_0x249f30(0x633,0x65e,0x63f,0x5b4))){if(_0xec7a32[_0x3a55e9(0x327,0x2cb,0x2df,0x214)](_0x4ee133['type'],_0x249f30(0x682,0x6d1,0x631,0x656))&&_0x1cfd90[_0x249f30(0x68a,0x6aa,0x67f,0x656)][_0x3a55e9(0x283,0x2f1,0x379,0x2eb)](_0x55a20d))return _0x23d9d6;}else clearTimeout(_0x1dbdc1),_0x1dbdc1=null;}}},_0x7270c8=_0x1611f2=>{function _0x8c5227(_0x243dda,_0x3c3fab,_0x31f3cd,_0x2dc88d){return _0x37e5f8(_0x2dc88d,_0x3c3fab-0x26,_0x3c3fab-0x325,_0x2dc88d-0xe1);}function _0x3d73bf(_0x40825f,_0x12da21,_0x251c50,_0x47dfc1){return _0x20dbc4(_0x251c50- -0x122,_0x12da21-0x185,_0x251c50-0x1cd,_0x40825f);}if(_0x592f65['Jhabj'](_0x1611f2['id'],_0xf79f90))return;_0x592f65[_0x3d73bf(0x42c,0x3f0,0x3a0,0x3ea)](_0x46f3db),_0x1611f2[_0x3d73bf(0x43a,0x39e,0x3c5,0x41c)]?_0x30e07b(_0x1611f2[_0x3d73bf(0x45c,0x3d6,0x47f,0x480)]):_0x592f65[_0x3d73bf(0x3a3,0x3d1,0x3d1,0x371)](_0x4a2a22,new Error(_0x1611f2[_0x3d73bf(0x502,0x514,0x47f,0x3c5)]||_0x592f65[_0x8c5227(0x349,0x391,0x3cd,0x31f)]));};eventSource['on'](eventNames[_0x37e5f8(0xc4,0x16f,0x161,0x1fb)+_0x37e5f8(0xde,0x121,0xb4,0x13a)+_0x20dbc4(0x596,0x527,0x64c,0x60f)],_0x7270c8);const _0x71423c={};function _0x20dbc4(_0x9f101f,_0x5756a8,_0x10e3b6,_0x3985b5){return _0x524943(_0x9f101f-0x16c,_0x5756a8-0x5b,_0x9f101f-0x228,_0x3985b5);}function _0x37e5f8(_0x2819ab,_0x553de6,_0x3d4207,_0x2c7a4f){return _0x524943(_0x2819ab-0x48,_0x553de6-0x1ab,_0x3d4207- -0x257,_0x2819ab);}_0x71423c[_0x37e5f8(0xd3,0x2a,0x66,0xc8)]=_0x3ae1ff,_0x71423c['id']=_0xf79f90,eventSource[_0x20dbc4(0x4d3,0x496,0x43a,0x441)](eventNames[_0x20dbc4(0x5e0,0x68d,0x5f5,0x556)+_0x20dbc4(0x550,0x510,0x4ec,0x5b2)+_0x37e5f8(0x233,0x105,0x18f,0x1af)],_0x71423c),_0x1dbdc1=_0x592f65[_0x37e5f8(0x12d,0x37,0xc7,0x177)](setTimeout,()=>{const _0x1be2a8={};_0x1be2a8[_0x55bf1b(0x585,0x69c,0x5e5,0x694)]=_0x2e96fc[_0x55bf1b(0x6b2,0x74e,0x6c1,0x717)];function _0x55bf1b(_0x3aa5ce,_0x1d7df1,_0x428eb6,_0x2c8edc){return _0x37e5f8(_0x2c8edc,_0x1d7df1-0xb,_0x428eb6-0x539,_0x2c8edc-0xde);}const _0x401eb0=_0x1be2a8;function _0xaa219d(_0x481273,_0x59676d,_0x43cb82,_0x451010){return _0x20dbc4(_0x451010- -0x560,_0x59676d-0x74,_0x43cb82-0x15,_0x59676d);}if(_0x2e96fc[_0x55bf1b(0x62a,0x4e7,0x58e,0x500)](_0x2e96fc[_0xaa219d(-0x6a,-0x57,-0xb9,0x1)],_0x55bf1b(0x617,0x5f7,0x5c0,0x540))){const _0x294c92={};_0x294c92['type']=_0x401eb0[_0x55bf1b(0x5ed,0x669,0x5e5,0x5e8)],_0x294c92['text']=_0xaa219d(-0x6b,-0x73,-0x35,-0x2)+_0x137f70[_0xaa219d(-0xbf,-0x4b,0x23,-0x15)]+'张'+_0x4e61c1+']',_0x3662d1['push'](_0x294c92);}else _0x2e96fc[_0x55bf1b(0x608,0x644,0x609,0x5e2)](_0x46f3db),_0x2e96fc[_0x55bf1b(0x614,0x664,0x659,0x702)](_0x4a2a22,new Error(_0x2e96fc[_0x55bf1b(0x5ea,0x67a,0x62d,0x62b)]));},_0x12ba34);});}function _0xaa66(_0x2a42f5,_0x2d8770){const _0x1e54ed=_0x5835();return _0xaa66=function(_0x3662d1,_0x137f70){_0x3662d1=_0x3662d1-(0x21be+0xfb4+0xff7*-0x3);let _0x4e61c1=_0x1e54ed[_0x3662d1];if(_0xaa66['xGLrBw']===undefined){var _0x21ac2b=function(_0x2030fd){const _0x225371='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2c6feb='',_0x2ef2e6='',_0x1a992a=_0x2c6feb+_0x21ac2b;for(let _0x104f6d=0x1e59*-0x1+0x1*-0x196a+0x37c3,_0x5a5306,_0x298833,_0x1de68b=-0xa2f+0x1*0x1b4+0x87b;_0x298833=_0x2030fd['charAt'](_0x1de68b++);~_0x298833&&(_0x5a5306=_0x104f6d%(0x15d7*0x1+-0x2520+-0xf4d*-0x1)?_0x5a5306*(0x237+0x26af+-0x28a6)+_0x298833:_0x298833,_0x104f6d++%(0x1*-0x4dc+-0x10fc*0x1+-0x15dc*-0x1))?_0x2c6feb+=_0x1a992a['charCodeAt'](_0x1de68b+(0xc1*0x2b+-0x15cb+-0xa*0x10f))-(0x545*-0x3+-0x71*0x57+-0x10*-0x364)!==0x1*-0x222b+0x1*-0x7b7+0x29e2?String['fromCharCode'](0xd49+0x1ae8+0x15a*-0x1d&_0x5a5306>>(-(0xc47*-0x1+0x948+0x301)*_0x104f6d&-0x1d01+-0x4c8+0x241*0xf)):_0x104f6d:-0xf04+0xa2d+-0x19d*-0x3){_0x298833=_0x225371['indexOf'](_0x298833);}for(let _0x59ff50=0x4b6+-0x1728+0x1272,_0x4263dd=_0x2c6feb['length'];_0x59ff50<_0x4263dd;_0x59ff50++){_0x2ef2e6+='%'+('00'+_0x2c6feb['charCodeAt'](_0x59ff50)['toString'](0x1d5*0x6+0x1*0x73c+0x4b*-0x3e))['slice'](-(0x17b*0x13+0x20a7*-0x1+0x2*0x244));}return decodeURIComponent(_0x2ef2e6);};_0xaa66['qhzfLD']=_0x21ac2b,_0x2a42f5=arguments,_0xaa66['xGLrBw']=!![];}const _0x4f90cf=_0x1e54ed[0x375*0x2+-0x3b*0x21+0xb1],_0x42bbd7=_0x3662d1+_0x4f90cf,_0x41b64c=_0x2a42f5[_0x42bbd7];if(!_0x41b64c){const _0x2a1a66=function(_0x2ae9c2){this['NOMzZO']=_0x2ae9c2,this['ubzmhu']=[0x2597*-0x1+0x1*0x25a3+-0x1*0xb,-0x1d72*0x1+0x21cd+-0x45b,0x25*-0xef+-0x1fdc+0x4267],this['YpEazS']=function(){return'newState';},this['yvDlLH']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['wxFQLX']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2a1a66['prototype']['IwJqzm']=function(){const _0x2e1b83=new RegExp(this['yvDlLH']+this['wxFQLX']),_0x31c624=_0x2e1b83['test'](this['YpEazS']['toString']())?--this['ubzmhu'][0x8a6+0x18d9*0x1+-0x217e]:--this['ubzmhu'][-0xe*-0x232+0x2079+0x5bf*-0xb];return this['tKCQsk'](_0x31c624);},_0x2a1a66['prototype']['tKCQsk']=function(_0x43d31b){if(!Boolean(~_0x43d31b))return _0x43d31b;return this['nTNDCv'](this['NOMzZO']);},_0x2a1a66['prototype']['nTNDCv']=function(_0x13731b){for(let _0x4d1863=-0x912+0x2494*-0x1+0x2da6,_0x1b444e=this['ubzmhu']['length'];_0x4d1863<_0x1b444e;_0x4d1863++){this['ubzmhu']['push'](Math['round'](Math['random']())),_0x1b444e=this['ubzmhu']['length'];}return _0x13731b(this['ubzmhu'][-0x215f*0x1+-0x1d7b+0x3eda]);},new _0x2a1a66(_0xaa66)['IwJqzm'](),_0x4e61c1=_0xaa66['qhzfLD'](_0x4e61c1),_0x2a42f5[_0x42bbd7]=_0x4e61c1;}else _0x4e61c1=_0x41b64c;return _0x4e61c1;},_0xaa66(_0x2a42f5,_0x2d8770);}function preprocessTagContent(_0x2df34a){const _0x8c830={};_0x8c830['hWgfI']=_0x570c1d(0x111,0x13a,0xb5,0x118);function _0x467ae0(_0x2054ad,_0x4bd359,_0x44b520,_0x4ba479){return _0x448fb0(_0x2054ad-0x84,_0x4bd359-0x90,_0x2054ad,_0x44b520- -0x262);}_0x8c830[_0x570c1d(0xa5,0x148,0x137,0x18d)]='上半身NSFW背面:';const _0x28a1b7=_0x8c830;function _0x570c1d(_0x293469,_0x379edb,_0x23f05d,_0x5e0ff6){return _0x448fb0(_0x293469-0x1b6,_0x379edb-0xee,_0x5e0ff6,_0x379edb- -0x4b);}let _0x15ac62=_0x2df34a['replace'](/:/g,':')[_0x570c1d(0x5d,0xb8,0x6b,0x94)](/\(/g,'（')[_0x570c1d(0xfc,0xb8,0x45,0x11)](/\)/g,'）')['replace'](/,/g,',');return _0x15ac62=_0x15ac62[_0x467ae0(-0xb3,-0x1e9,-0x15f,-0x104)](/下半身NSWebcam:/g,_0x28a1b7[_0x467ae0(0x39,-0xf9,-0x76,0x18)]),_0x15ac62=_0x15ac62[_0x570c1d(0x13a,0xb8,0x7a,0x3c)](/下半身NSFW_背面:/g,_0x28a1b7[_0x570c1d(0x20a,0x1a1,0x1bf,0x1ea)]),_0x15ac62=_0x15ac62[_0x570c1d(0x2a,0xb8,0x12a,0x9e)](/上半身NSFW_背面:/g,_0x28a1b7[_0x467ae0(-0xdc,-0xdd,-0xcf,-0x11f)]),_0x15ac62;}function parseCharacterData(_0x39b349){const _0x1af1e6={};_0x1af1e6[_0x28ba29(0x2f6,0x326,0x34e,0x2e2)]=function(_0x5d0107,_0x3067bc){return _0x5d0107===_0x3067bc;},_0x1af1e6[_0x65f11f(0x410,0x40e,0x428,0x409)]=_0x65f11f(0x4c0,0x414,0x430,0x4b4),_0x1af1e6[_0x28ba29(0x319,0x2f4,0x261,0x2e4)]=function(_0x44dd65,_0x14a563){return _0x44dd65+_0x14a563;},_0x1af1e6[_0x65f11f(0x3ae,0x306,0x388,0x3f1)]=_0x28ba29(0x38d,0x3ee,0x472,0x386),_0x1af1e6['hFIxR']='data:',_0x1af1e6[_0x28ba29(0x2a1,0x2f1,0x34f,0x324)]=_0x65f11f(0x505,0x4e8,0x46e,0x51c),_0x1af1e6[_0x28ba29(0x38c,0x30e,0x27c,0x2d8)]=_0x65f11f(0x3c2,0x2d3,0x34e,0x3be),_0x1af1e6['XdjhS']=_0x28ba29(0x271,0x2ec,0x261,0x297),_0x1af1e6[_0x28ba29(0x34b,0x32b,0x3a6,0x2f6)]=_0x65f11f(0x514,0x4ac,0x497,0x4b7),_0x1af1e6[_0x28ba29(0x4c0,0x45f,0x40f,0x519)]=_0x28ba29(0x397,0x424,0x37a,0x47a),_0x1af1e6[_0x28ba29(0x295,0x301,0x313,0x2f1)]='facialFeat'+'ures',_0x1af1e6[_0x65f11f(0x302,0x403,0x36e,0x321)]=_0x65f11f(0x4aa,0x4d4,0x43f,0x4f6)+_0x65f11f(0x445,0x3bb,0x3d9,0x391),_0x1af1e6[_0x28ba29(0x250,0x306,0x397,0x33e)]=_0x28ba29(0x399,0x3f2,0x43a,0x403)+'FW',_0x1af1e6[_0x28ba29(0x297,0x31b,0x295,0x3ce)]=_0x65f11f(0x4e2,0x4af,0x441,0x491)+_0x65f11f(0x3f1,0x39e,0x429,0x468),_0x1af1e6[_0x28ba29(0x299,0x328,0x38c,0x2e2)]=_0x65f11f(0x3bf,0x40e,0x446,0x3a1)+'W',_0x1af1e6[_0x65f11f(0x471,0x3fd,0x3d8,0x362)]=_0x28ba29(0x375,0x3f7,0x44b,0x37a)+_0x65f11f(0x4f6,0x4e6,0x450,0x4cb),_0x1af1e6[_0x28ba29(0x366,0x32a,0x309,0x329)]=function(_0x5613d7,_0x402ae3){return _0x5613d7!==_0x402ae3;},_0x1af1e6['OQJxp']=function(_0x262e6f,_0x42007d){return _0x262e6f===_0x42007d;},_0x1af1e6['sbCMB']=function(_0x129e76,_0x1ffdcd){return _0x129e76+_0x1ffdcd;},_0x1af1e6[_0x65f11f(0x39f,0x43d,0x408,0x375)]=function(_0x2f1682,_0x1226fd){return _0x2f1682&&_0x1226fd;},_0x1af1e6[_0x28ba29(0x3a9,0x3c5,0x3f0,0x402)]=function(_0x4a039a,_0x309ba2){return _0x4a039a!==_0x309ba2;},_0x1af1e6[_0x65f11f(0x426,0x528,0x498,0x468)]=_0x28ba29(0x39a,0x313,0x3ca,0x25a),_0x1af1e6[_0x28ba29(0x2d0,0x323,0x374,0x2e8)]=_0x28ba29(0x44a,0x3d4,0x481,0x376)+_0x65f11f(0x390,0x3bd,0x3dc,0x344)+'fy]\x20解析到的人物'+_0x65f11f(0x448,0x3b4,0x3c9,0x446);const _0x2aad03=_0x1af1e6,_0x33644f=_0x39b349[_0x28ba29(0x457,0x3fe,0x390,0x3a4)]('\x0a')[_0x65f11f(0x4dd,0x50a,0x47a,0x4b2)](_0x516dcb=>_0x516dcb[_0x65f11f(0x43d,0x3d8,0x3ba,0x3bc)]())[_0x65f11f(0x44d,0x31c,0x3c7,0x450)](_0x367dae=>_0x367dae),_0x25f346={};_0x25f346[_0x28ba29(0x3e4,0x448,0x495,0x4be)]='',_0x25f346['nameEN']='',_0x25f346['facialFeat'+_0x65f11f(0x50a,0x4d7,0x459,0x4b3)]='',_0x25f346['facialFeat'+_0x65f11f(0x411,0x492,0x3d9,0x450)]='',_0x25f346[_0x28ba29(0x458,0x3f2,0x3d3,0x3f8)+'FW']='',_0x25f346[_0x28ba29(0x424,0x3f2,0x429,0x44c)+_0x65f11f(0x418,0x3b0,0x429,0x43c)]='',_0x25f346[_0x65f11f(0x3f4,0x494,0x446,0x4c2)+'W']='',_0x25f346[_0x28ba29(0x3e7,0x3f7,0x381,0x432)+_0x28ba29(0x3af,0x401,0x35e,0x4b4)]='',_0x25f346['upperBodyN'+_0x65f11f(0x391,0x3be,0x3ef,0x425)]='',_0x25f346[_0x65f11f(0x34e,0x3c7,0x387,0x43c)+_0x28ba29(0x2cd,0x345,0x2b7,0x3db)]='',_0x25f346[_0x65f11f(0x53b,0x471,0x4a2,0x4fe)+'FW']='',_0x25f346[_0x28ba29(0x42c,0x453,0x3c4,0x469)+_0x28ba29(0x327,0x3da,0x46d,0x462)]='';const _0x3d7c10=_0x25f346,_0x192ee4={};_0x192ee4[_0x28ba29(0x46c,0x3b8,0x466,0x2ff)]=_0x2aad03['HHybs'],_0x192ee4['英文名称']=_0x2aad03[_0x65f11f(0x497,0x53f,0x4ae,0x473)],_0x192ee4['五官外貌']=_0x2aad03[_0x65f11f(0x3a0,0x2dc,0x350,0x30a)],_0x192ee4['五官外貌背面']=_0x2aad03['BivUJ'],_0x192ee4[_0x65f11f(0x3fc,0x475,0x3bc,0x409)]=_0x2aad03[_0x65f11f(0x3d1,0x40a,0x355,0x363)],_0x192ee4[_0x65f11f(0x467,0x38a,0x3f4,0x364)]=_0x2aad03['IfqBv'],_0x192ee4['下半身SFW']=_0x2aad03[_0x65f11f(0x3a1,0x363,0x377,0x3ed)];function _0x28ba29(_0x1ab503,_0xb86fcc,_0xb60dc9,_0x53a768){return _0x448fb0(_0x1ab503-0x11c,_0xb86fcc-0x1c8,_0xb60dc9,_0xb86fcc-0x24a);}_0x192ee4[_0x28ba29(0x426,0x3b3,0x3fe,0x454)]=_0x2aad03[_0x65f11f(0x3b6,0x3dd,0x3d8,0x392)],_0x192ee4[_0x65f11f(0x4b2,0x446,0x464,0x3c4)]=_0x65f11f(0x351,0x33c,0x387,0x384)+_0x28ba29(0x33f,0x3a0,0x2f3,0x3fd),_0x192ee4['上半身NSFW背面']='upperBodyN'+'SFWBack',_0x192ee4[_0x65f11f(0x318,0x450,0x3ae,0x2f9)]=_0x65f11f(0x3fe,0x45d,0x4a2,0x491)+'FW',_0x192ee4[_0x28ba29(0x2ff,0x365,0x317,0x30a)]='fullBodyNS'+'FWBack';const _0xa2d5ef=_0x192ee4;for(const _0x258ada of _0x33644f){if(_0x2aad03[_0x28ba29(0x2df,0x32a,0x2a9,0x3bb)](_0x28ba29(0x29f,0x352,0x2e0,0x3de),_0x28ba29(0x3e2,0x352,0x362,0x380))){const _0x3b5775=_0x2aad03['SepMG'](typeof _0x5a5306,_0x2aad03[_0x28ba29(0x36d,0x3d9,0x48d,0x392)])?_0x298833:_0x1de68b[_0x65f11f(0x4a3,0x4a3,0x495,0x4cf)],_0xec2867=_0x2aad03[_0x65f11f(0x3ac,0x2d8,0x375,0x2c1)](typeof _0x59ff50,_0x65f11f(0x457,0x4b2,0x41d,0x399))&&_0x4263dd[_0x28ba29(0x4b2,0x405,0x429,0x37b)]?_0x2a1a66[_0x28ba29(0x376,0x405,0x42e,0x388)]:''+_0x2ae9c2+_0x2aad03[_0x65f11f(0x2bd,0x3d1,0x343,0x366)](_0x2e1b83,0x16c*0x8+0x1*-0x1b41+0xfe2),_0x5ecae3={};_0x5ecae3[_0x28ba29(0x421,0x3c1,0x389,0x394)]=_0x2aad03[_0x28ba29(0x2d2,0x339,0x39b,0x397)],_0x5ecae3[_0x28ba29(0x41a,0x3ee,0x33a,0x431)]='['+_0xec2867+']',_0x31c624[_0x28ba29(0x31b,0x39a,0x302,0x35a)](_0x5ecae3);let _0x50e6d0=_0x3b5775;!_0x3b5775['startsWith'](_0x2aad03[_0x65f11f(0x41f,0x491,0x484,0x47a)])&&(_0x50e6d0='data:image'+'/png;base6'+'4,'+_0x3b5775);const _0xc03a60={};_0xc03a60['type']=_0x2aad03[_0x65f11f(0x3f9,0x3f3,0x340,0x2f4)],_0xc03a60[_0x28ba29(0x457,0x41f,0x474,0x47a)]={},_0xc03a60[_0x28ba29(0x457,0x41f,0x474,0x47a)][_0x28ba29(0x440,0x3e4,0x3ce,0x32d)]=_0x50e6d0,_0xc03a60[_0x28ba29(0x457,0x41f,0x474,0x47a)][_0x65f11f(0x38f,0x2c1,0x34a,0x2a1)]=_0x2aad03[_0x65f11f(0x2ad,0x3fd,0x35d,0x349)],_0x43d31b[_0x65f11f(0x45b,0x3a8,0x3e9,0x38d)](_0xc03a60);}else{const _0x5bd70=_0x258ada[_0x28ba29(0x265,0x310,0x287,0x288)](':');if(_0x2aad03['OQJxp'](_0x5bd70,-(0x2*0x9f5+-0xa8f+-0x7e*0x13)))continue;const _0xe7ef31=_0x258ada['substring'](0x23*0xa7+-0xca3*0x1+-0xa32,_0x5bd70)[_0x28ba29(0x3c8,0x36b,0x3c4,0x30a)](),_0x3e823a=_0x258ada['substring'](_0x2aad03['sbCMB'](_0x5bd70,0xe*-0x1a5+0x2365+-0xc5e))[_0x28ba29(0x342,0x36b,0x395,0x326)]();if(_0xa2d5ef[_0xe7ef31])_0x3d7c10[_0xa2d5ef[_0xe7ef31]]=_0x3e823a;else{if(_0x2aad03['jBZyd'](_0xe7ef31,_0x3e823a)){if(_0x2aad03['OxJjb'](_0x65f11f(0x2fc,0x2e1,0x34b,0x384),_0x65f11f(0x306,0x294,0x34b,0x2a8))){_0x325550[_0x65f11f(0x412,0x433,0x49f,0x543)](_0x2aad03[_0x65f11f(0x426,0x37e,0x3d7,0x3a1)]);return;}else console['log'](_0x28ba29(0x336,0x3d4,0x477,0x3b2)+'PromptModi'+_0x28ba29(0x3e7,0x3f9,0x34b,0x483)+_0x65f11f(0x442,0x395,0x417,0x430)+_0xe7ef31+'\x22');}}}}if(!_0x3d7c10[_0x28ba29(0x3b8,0x448,0x4f8,0x450)])return _0x2aad03[_0x28ba29(0x3dc,0x3c5,0x395,0x347)](_0x2aad03[_0x65f11f(0x42d,0x4d4,0x498,0x52a)],_0x2aad03['WluuQ'])?_0x482b56[_0x28ba29(0x475,0x42b,0x47c,0x4db)](_0x5c1756=>_0x39df59(_0x5c1756,_0x58edc1,_0x500fae,_0x334bf6)):null;console['log'](_0x2aad03['qPLCn'],_0x3d7c10);function _0x65f11f(_0xf196ca,_0x1f1a7f,_0x3ec308,_0x2bdf69){return _0x448fb0(_0xf196ca-0x33,_0x1f1a7f-0xe6,_0x2bdf69,_0x3ec308-0x299);}return _0x3d7c10;}function _0x448fb0(_0x471967,_0x16284d,_0x17374f,_0x30a87e){return _0xaa66(_0x30a87e- -0xeb,_0x17374f);}function extractCharacterTags(_0x4aed11){const _0x254201={'GeEIO':function(_0x5578bb,_0x218e1e){return _0x5578bb(_0x218e1e);}},_0x246d5a={};_0x246d5a[_0x532b49(0x110,0xb7,0xe0,0xe4)]=[];const _0x437387=_0x246d5a;_0x4aed11=_0x4aed11[_0x35d737(0x227,0x302,0x230,0x282)](/<thinking>[\s\S]*?<\/thinking>/gi,'')['trim']();const _0x26d095=/<人物>([\s\S]*?)<\/人物>/g;function _0x532b49(_0x26f237,_0x32f4c1,_0x21607d,_0x16483a){return _0x448fb0(_0x26f237-0x132,_0x32f4c1-0x1b,_0x16483a,_0x21607d- -0x8c);}let _0x38722c;function _0x35d737(_0x1382fb,_0x110b45,_0x24afe3,_0x293259){return _0x448fb0(_0x1382fb-0x172,_0x110b45-0xec,_0x1382fb,_0x293259-0x17f);}while((_0x38722c=_0x26d095[_0x35d737(0x2fd,0x33b,0x29d,0x342)](_0x4aed11))!==null){const _0x1737c0=_0x254201[_0x532b49(-0x18,0x34,0x8d,0x34)](preprocessTagContent,_0x38722c[-0x1*0x981+-0x1f5e+0x28e0]),_0x3325b1=_0x254201[_0x35d737(0x296,0x2a3,0x2c3,0x298)](parseCharacterData,_0x1737c0);_0x3325b1&&_0x437387['characters']['push'](_0x3325b1);}return _0x437387;}function getCurrentCharacterPreset(){const _0x18b59c={};_0x18b59c['lEHdr']=function(_0x1c1251,_0x16524c){return _0x1c1251!==_0x16524c;};function _0x5124b5(_0x23f5f1,_0x3c5293,_0x164b36,_0x2472d9){return _0x448fb0(_0x23f5f1-0x16c,_0x3c5293-0x18f,_0x2472d9,_0x23f5f1-0xd5);}_0x18b59c[_0x53b20f(0x339,0x335,0x293,0x2ff)]='(空)',_0x18b59c[_0x53b20f(0x41b,0x4a3,0x411,0x46c)]=function(_0x444e07,_0x52c1a9){return _0x444e07>_0x52c1a9;},_0x18b59c[_0x5124b5(0x24e,0x1d3,0x203,0x2b5)]=_0x53b20f(0x42d,0x3f7,0x493,0x3fa),_0x18b59c[_0x53b20f(0x395,0x408,0x3da,0x339)]=function(_0x3bafb2,_0x36f28d){return _0x3bafb2===_0x36f28d;},_0x18b59c['idNJi']='wNOEJ',_0x18b59c[_0x53b20f(0x3d6,0x3e3,0x439,0x448)]=_0x53b20f(0x35a,0x3bf,0x333,0x2c8);const _0x21858b=_0x18b59c,_0x41b4ed=extension_settings[extensionName],_0x59014f=_0x41b4ed[_0x53b20f(0x434,0x478,0x488,0x4ae)+'resetId'];if(!_0x59014f||!_0x41b4ed[_0x5124b5(0x2ad,0x239,0x350,0x287)+_0x53b20f(0x388,0x304,0x43c,0x35b)][_0x59014f]){if(_0x21858b['pzWgj'](_0x21858b[_0x53b20f(0x449,0x4c4,0x3ce,0x4a5)],_0x21858b[_0x53b20f(0x3d6,0x37c,0x3a3,0x346)])){if(_0x22699d[_0x1ac13c]&&_0x21858b['lEHdr'](_0x54b525[_0x372f8e],_0x2ee463[_0x401a30])){const _0x27d227=_0x573a0a[_0x485c06]||_0x21858b['lOGFI'],_0x1bd8bb=_0x547b0e[_0x225197];_0x3aa59a+='•\x20'+_0x334d85[_0x39da99]+':\x0a',_0x7ce74b+=_0x53b20f(0x3d2,0x402,0x39a,0x3c2)+_0x27d227[_0x5124b5(0x2d5,0x38a,0x2f0,0x38b)](0x2*0x327+0x1d3d+-0x238b,-0x2129+0x1*-0x1f9c+0x40f7)+(_0x21858b[_0x5124b5(0x294,0x315,0x2bf,0x1e2)](_0x27d227[_0x53b20f(0x38e,0x392,0x384,0x443)],0x1b98*-0x1+-0x1*0xcbf+-0xd83*-0x3)?_0x21858b[_0x5124b5(0x24e,0x26b,0x2a1,0x2a4)]:'')+'\x0a',_0x668ab9+='\x20\x20新:\x20'+_0x1bd8bb[_0x53b20f(0x45c,0x43f,0x475,0x49a)](0xf88+-0x2647*0x1+0x16bf,-0x4ee+0xc95+-0x775)+(_0x21858b['NCLgK'](_0x1bd8bb[_0x53b20f(0x38e,0x3ee,0x319,0x41e)],-0x116d+0x26a5*0x1+0x17*-0xea)?_0x21858b['oaoqv']:'')+'\x0a\x0a',_0x2c6ba1++;}}else return null;}const _0xd0a863={};_0xd0a863['id']=_0x59014f,_0xd0a863['data']=_0x41b4ed[_0x53b20f(0x434,0x4dc,0x434,0x472)+_0x5124b5(0x201,0x289,0x1a5,0x212)][_0x59014f];function _0x53b20f(_0x27201d,_0x306958,_0xcb80fc,_0x222aaf){return _0x448fb0(_0x27201d-0x2d,_0x306958-0x5e,_0x306958,_0x27201d-0x25c);}return _0xd0a863;}function buildCharacterText(_0x23e43e){const _0x4c4b04={};_0x4c4b04[_0x516ae1(-0x50,-0xe,-0x47,-0x86)]=_0x516ae1(0xc3,0x118,0x10e,0x37);const _0x47b881=_0x4c4b04,_0x48f420=_0x23e43e['data'];let _0x5d521f=_0x516ae1(0xf1,0x64,0xcf,0xee);_0x5d521f+=_0x162dd0(0x139,0x1ce,0x20a,0x25e)+(_0x48f420[_0x162dd0(0x190,0x20e,0x197,0x1dc)]||'')+'\x0a',_0x5d521f+=_0x516ae1(0x85,0x13,0x67,0x10d)+(_0x48f420[_0x162dd0(0x1c8,0x1ea,0x150,0x256)]||'')+'\x0a',_0x5d521f+='五官外貌:\x20'+(_0x48f420[_0x516ae1(0x95,0xe2,0xfe,0x128)+_0x516ae1(0xaf,0x143,0xae,0xc7)]||'')+'\x0a',_0x5d521f+=_0x162dd0(0x168,0xbc,0x5c,0xbb)+(_0x48f420[_0x516ae1(0x95,0xe2,0x49,0x135)+_0x162dd0(0x105,0x150,0x19e,0x199)]||'')+'\x0a',_0x5d521f+='上半身SFW:\x20'+(_0x48f420['upperBodyS'+'FW']||'')+'\x0a',_0x5d521f+=_0x162dd0(0x16f,0xfa,0x190,0xfe)+(_0x48f420[_0x162dd0(0x182,0x1b8,0x14f,0x1bb)+_0x516ae1(0x7f,0x17,0x4f,0xba)]||'')+'\x0a',_0x5d521f+=_0x162dd0(0x230,0x224,0x264,0x2c2)+(_0x48f420['fullBodySF'+'W']||'')+'\x0a',_0x5d521f+=_0x516ae1(-0xb,-0x66,0x26,-0x5)+(_0x48f420['fullBodySF'+_0x516ae1(0xa6,0x50,0x107,0x38)]||'')+'\x0a',_0x5d521f+=_0x162dd0(0x1d0,0x164,0x11d,0x10f)+(_0x48f420[_0x162dd0(0x79,0xfe,0x1b5,0x1b3)+_0x162dd0(0x176,0x166,0x1d9,0xbb)]||'')+'\x0a',_0x5d521f+=_0x516ae1(0x8d,0x8a,0xad,0xe3)+'\x20'+(_0x48f420[_0x516ae1(-0x23,-0xb9,-0xa9,0x2a)+_0x516ae1(-0x16,-0x1f,0x13,-0x11)]||'')+'\x0a',_0x5d521f+=_0x162dd0(0x215,0x193,0x15a,0x1be)+(_0x48f420['fullBodyNS'+'FW']||'')+'\x0a',_0x5d521f+='下半身NSFW背面:'+'\x20'+(_0x48f420[_0x516ae1(0xf8,0x15e,0x99,0x60)+_0x162dd0(0x1c7,0x1a0,0x148,0x1a7)]||'')+'\x0a';function _0x162dd0(_0xbed24c,_0x5eae67,_0x9f277b,_0x2427f2){return _0x448fb0(_0xbed24c-0x43,_0x5eae67-0x1eb,_0x2427f2,_0x5eae67-0x10);}function _0x516ae1(_0x75b1c6,_0x1c1d11,_0x17442d,_0x515b7a){return _0x448fb0(_0x75b1c6-0x2b,_0x1c1d11-0x153,_0x1c1d11,_0x75b1c6- -0x111);}return _0x5d521f+=_0x47b881[_0x162dd0(0x5a,0xd1,0x16f,0x5b)],_0x5d521f;}export async function handleCharacterPromptModify(_0x4a1b50,_0x5210b2=[]){function _0x391902(_0x28e0bd,_0xabb79e,_0x5633b4,_0x4ec11d){return _0x448fb0(_0x28e0bd-0x107,_0xabb79e-0x9e,_0xabb79e,_0x5633b4- -0x1f6);}function _0x35f37b(_0x45eca2,_0x3f55c3,_0x11cef8,_0x243731){return _0x448fb0(_0x45eca2-0xd8,_0x3f55c3-0xfd,_0x3f55c3,_0x243731-0x68);}const _0x4849f8={'dtjDu':function(_0x1b1057,_0xb0f92a){return _0x1b1057(_0xb0f92a);},'MNAKk':_0x35f37b(0x221,0x1da,0x1f7,0x1f2)+_0x35f37b(0xfd,0xf8,0x263,0x1ab)+'fy]\x20Starti'+'ng\x20charact'+_0x391902(-0x50,-0x169,-0x101,-0x5a)+_0x35f37b(0x1a2,0x174,0x208,0x1f4)+'uest...','mbYBc':function(_0x11fea0,_0x3d0120){return _0x11fea0===_0x3d0120;},'OCplR':'JZsiu','uQqkF':function(_0x4c89f3){return _0x4c89f3();},'cZuOw':function(_0x354af2){return _0x354af2();},'RscEZ':_0x35f37b(0x227,0x1b2,0x1b8,0x1f2)+_0x35f37b(0x145,0x20d,0x1b4,0x1ab)+_0x391902(-0x4f,0xf,-0x75,-0x5b)+_0x391902(-0x10c,-0x8d,-0xff,-0x1a0),'eAVUQ':_0x35f37b(0x200,0x1f8,0x2a5,0x1f2)+_0x35f37b(0x13c,0x137,0x182,0x1ab)+_0x391902(-0xae,-0x103,-0x113,-0xd4)+_0x35f37b(0x20f,0x18c,0xe5,0x179),'OtUKF':_0x391902(-0xf7,-0x86,-0x6c,-0x11c)+_0x391902(-0xc8,-0x65,-0xb3,0x6)+_0x391902(-0x11c,-0x14b,-0x113,-0x83)+_0x391902(0x62,-0xb8,-0x4b,-0x46)+':','zUMpO':function(_0x5f1b9e,_0xb6ed69){return _0x5f1b9e||_0xb6ed69;},'Thzof':'[character'+'PromptModi'+_0x35f37b(0x250,0x23a,0x14e,0x1c6)+'ter\x20trigge'+_0x35f37b(0x2b3,0x213,0x23f,0x237),'ONSLy':function(_0x17e81b,_0x47c6bb,_0x1b4a6d){return _0x17e81b(_0x47c6bb,_0x1b4a6d);},'ysBfw':_0x35f37b(0x2d2,0x311,0x22c,0x262)+'y','AyUxi':function(_0x698d48){return _0x698d48();},'FFahn':_0x35f37b(0x26a,0x1f7,0x228,0x1f2)+_0x35f37b(0x187,0x25f,0x1cb,0x1ab)+_0x35f37b(0x26b,0x144,0x21a,0x1c6)+'ter\x20list\x20t'+_0x35f37b(0x1c4,0xc2,0x10d,0x15c)+_0x35f37b(0x2af,0x22e,0x265,0x257),'ceFHj':function(_0x1a1075,_0x27847a){return _0x1a1075(_0x27847a);},'qzJVS':'[character'+_0x391902(-0x126,-0x15b,-0xb3,-0x9c)+_0x391902(-0x10c,-0xe2,-0xaa,-0x108)+'后:','rYHRI':function(_0x3cb163,_0x887157,_0x8ebdb7){return _0x3cb163(_0x887157,_0x8ebdb7);},'BJeqm':_0x35f37b(0x150,0x105,0x1e6,0x140),'APdPi':'[character'+_0x35f37b(0x153,0x231,0x11e,0x1ab)+_0x391902(0xd,-0xdf,-0x30,-0x91)+'equirement'+_0x35f37b(0x2fa,0x213,0x2d6,0x250)+'ndex:','QZgDd':function(_0x208643,_0x1b7219,_0x2db243){return _0x208643(_0x1b7219,_0x2db243);},'kjUVW':function(_0x1f8c6a,_0x37c1bb,_0x5774d6,_0x15e5ac,_0x49b5dc){return _0x1f8c6a(_0x37c1bb,_0x5774d6,_0x15e5ac,_0x49b5dc);},'oYrtX':function(_0x1dbd73,_0x559763){return _0x1dbd73>_0x559763;},'gvpng':function(_0x3f1059,_0x28bf49){return _0x3f1059>_0x28bf49;},'WXVQk':function(_0x3a3ecb,_0x50e18f){return _0x3a3ecb>=_0x50e18f;},'izDQV':_0x391902(0x8,-0x5f,-0x45,-0xa),'nbuGX':'参考图片','gDvcp':_0x35f37b(0x1e6,0x20b,0x1fa,0x1f2)+_0x391902(-0x90,-0x68,-0xb3,-0xf7)+'fy]\x20Attach'+'ed','uvfQO':_0x391902(-0xa7,-0x17a,-0x151,-0xb0)+'message\x20at'+_0x35f37b(0x2c1,0x20e,0x248,0x225),'omIiK':'[character'+_0x391902(-0x114,-0xfd,-0xb3,-0x26)+_0x391902(-0x8c,-0x1aa,-0x12e,-0x1cc)+_0x391902(0x40,0x79,0x12,0x26),'vaOqN':function(_0x34a26d,_0x16a0f1){return _0x34a26d(_0x16a0f1);},'PzBRu':_0x35f37b(0x24a,0x1f0,0x32e,0x279)+_0x391902(-0x105,-0xb1,-0x123,-0x1d4),'sBESe':_0x391902(0x32,0x20,-0x6c,-0xea)+_0x391902(-0x144,-0x133,-0xb3,-0x5e)+_0x35f37b(0x14c,0x87,0x15e,0x113)+_0x35f37b(0x17d,0x110,0xef,0x18e)+_0x35f37b(0x223,0x1c0,0x253,0x212)+_0x391902(-0x10,-0xc4,-0x11,-0xa9),'NMpDJ':_0x35f37b(0x278,0x20d,0x14f,0x1f2)+_0x35f37b(0x169,0x1a5,0x193,0x1ab)+_0x391902(-0x86,-0x14b,-0x91,-0x76)+'M\x20output\x20f'+_0x35f37b(0x1d4,0x240,0x1ba,0x218)+_0x391902(-0x6f,-0x110,-0x9e,-0xfe),'DBAVq':_0x391902(-0xfe,-0x10c,-0x6c,-0xe7)+'PromptModi'+'fy]\x20Extrac'+_0x391902(-0x11,-0xc4,-0x10,-0x82),'rGoui':'角色提示词修改完成！','Ubmjh':_0x35f37b(0x245,0x19b,0x260,0x1f2)+_0x35f37b(0x183,0x242,0x169,0x1ab)+_0x35f37b(0x1b7,0x202,0x228,0x1ae)};console['log'](_0x4849f8[_0x391902(-0x10c,-0xb0,-0xc3,-0x4b)]),toastr['info'](_0x391902(-0x36,0x2d,-0x6c,-0x62)+_0x391902(-0xb,-0x15c,-0xb3,-0xc4)+_0x35f37b(0x163,0x204,0x1c0,0x1dd)+_0x391902(-0x38,-0x17a,-0xd4,-0xc3));try{if(_0x4849f8['mbYBc'](_0x4849f8[_0x35f37b(0x25e,0x1b8,0x1b6,0x1c1)],_0x4849f8[_0x35f37b(0x256,0x278,0x122,0x1c1)])){const _0x316460=_0x4849f8[_0x391902(-0x4d,-0x89,-0xf7,-0xb1)](getContext),_0x55917c=extension_settings[extensionName],_0x5c73b8=_0x4849f8[_0x35f37b(0xdc,0x223,0x12a,0x186)](getCurrentCharacterPreset);if(!_0x5c73b8){toastr[_0x35f37b(0x1d5,0x2b8,0x1f7,0x26e)](_0x391902(-0x56,0x63,-0x43,-0xf1));return;}console[_0x391902(-0x5b,-0x13,-0x18,-0x79)](_0x4849f8[_0x391902(-0x150,-0xdd,-0xf9,-0xa2)],_0x5c73b8['id']);const _0x405ac5=_0x5c73b8[_0x35f37b(0x252,0x19e,0x141,0x1cb)][_0x391902(-0x105,-0x1fc,-0x142,-0x126)+_0x391902(-0xd1,0x14,-0x1b,-0xc)]||'',_0x15f5cc=_0x5c73b8[_0x391902(-0x39,-0x30,-0x93,-0xb9)][_0x391902(-0x13f,-0x174,-0x142,-0x150)+_0x391902(-0x42,-0x89,-0x62,0x16)]||'',_0x40cfb7=_0x5c73b8['data'][_0x35f37b(0x176,0xf3,0x66,0x11c)+_0x391902(-0xaf,-0x95,-0xf5,-0xca)]||{};console[_0x391902(-0xb1,0x3c,-0x18,0x17)](_0x4849f8['eAVUQ'],_0x405ac5),console[_0x35f37b(0x19c,0x2f0,0x207,0x246)](_0x4849f8['OtUKF'],_0x15f5cc),console[_0x391902(-0xae,-0xb7,-0x18,-0xc0)](_0x35f37b(0x15c,0x16e,0x25e,0x1f2)+'PromptModi'+_0x391902(-0x198,-0x161,-0x113,-0x153)+_0x35f37b(0xca,0xf7,0x156,0x17b),_0x40cfb7);const _0x555993=_0x4849f8['zUMpO'](_0x4a1b50,''),_0x485778=[];_0x4a1b50&&_0x485778[_0x35f37b(0x255,0xff,0x1b2,0x1b8)](_0x4a1b50);_0x405ac5&&_0x485778['push'](_0x405ac5);_0x15f5cc&&_0x485778[_0x35f37b(0x229,0x224,0x16d,0x1b8)](_0x15f5cc);const _0x459ec0=_0x485778['join']('\x0a');console['log'](_0x4849f8[_0x35f37b(0x197,0x1e2,0xf3,0x1a3)],_0x459ec0);let _0xe11df4=_0x4849f8['ONSLy'](buildPromptForRequestType,_0x4849f8[_0x391902(-0xcf,-0xe7,-0x7e,-0xdd)],_0x555993);const _0x5b8311=_0x4849f8[_0x391902(-0x4e,0x0,-0x89,-0x117)](generateCharacterListText,_0x459ec0),_0x22f21a=_0x4849f8[_0x35f37b(0xf4,0xce,0x1a9,0x14f)](generateOutfitEnableListText),_0x1f883e=_0x4849f8[_0x391902(-0xd9,-0xd5,-0xf7,-0x124)](generateCommonCharacterListText);console[_0x35f37b(0x279,0x2e7,0x2d6,0x246)](_0x4849f8[_0x35f37b(0x14c,0x15b,0xee,0x12f)],_0x5b8311);const _0x125fe1=_0x316460[_0x391902(-0x4a,-0x33,-0xd,0x47)+'ta']?.[_0x35f37b(0xfd,0xfa,0x1fa,0x1aa)]||{},_0x7e19c0=_0x4849f8['ceFHj'](buildCharacterText,_0x5c73b8);_0xe11df4=_0x4849f8[_0x35f37b(0x16a,0x173,0x184,0x153)](mergeAdjacentMessages,_0xe11df4),console[_0x35f37b(0x1a3,0x210,0x2f9,0x246)](_0x4849f8[_0x391902(-0x22,0x6f,0x1c,-0x3)],_0xe11df4);const _0x3236a8=_0x4849f8[_0x35f37b(0x17e,0x2bc,0x1bc,0x21e)](findMessageIndexWithPlaceholder,_0xe11df4,_0x4849f8[_0x35f37b(0x255,0x269,0x214,0x23e)]);console[_0x35f37b(0x2ab,0x194,0x2f5,0x246)](_0x4849f8[_0x391902(-0x100,-0xc2,-0x57,-0x61)],_0x3236a8);const _0x3696be={..._0x40cfb7,..._0x125fe1},_0x4f8b4f={};_0x4f8b4f[_0x35f37b(0x1e4,0x1c1,0x1e5,0x25c)]=_0x405ac5,_0x4f8b4f[_0x35f37b(0x273,0x264,0x1af,0x1e7)+_0x35f37b(0x280,0x29f,0x240,0x261)]=_0x15f5cc,_0x4f8b4f[_0x391902(-0x44,-0x10b,-0xb4,-0x9f)]=_0x3696be,_0x4f8b4f[_0x35f37b(0x29b,0x16a,0x23e,0x208)]=_0x4a1b50||'',_0x4f8b4f['characterL'+_0x391902(-0x196,-0x1d1,-0x11b,-0x161)]=_0x5b8311,_0x4f8b4f[_0x35f37b(0x261,0x228,0x1fa,0x23f)+_0x35f37b(0x10e,0xe0,0x1b7,0x137)]=_0x22f21a,_0x4f8b4f[_0x391902(-0x71,0x6f,-0x2c,-0xb6)+_0x391902(-0xf0,-0x1e9,-0x146,-0x177)+_0x391902(-0xa6,-0x1d4,-0x153,-0xe2)]=_0x1f883e;const _0x1d4997=_0x4f8b4f,{messages:_0x1fdbfd,replacedVariables:_0x3a3cd6}=_0x4849f8[_0x391902(-0x7b,-0xfe,-0x76,-0x106)](replaceAllPlaceholders,_0xe11df4,_0x1d4997);_0xe11df4=_0x1fdbfd,_0xe11df4=_0x4849f8['kjUVW'](_0x524f7f,_0xe11df4,_0x391902(-0xf3,0x7,-0x5e,-0xb7),_0x7e19c0,_0x3a3cd6),console[_0x35f37b(0x190,0x1ec,0x2ed,0x246)](_0x391902(-0x107,0x14,-0x6c,-0x107)+_0x391902(-0x137,-0x20,-0xb3,-0x150)+_0x391902(0xaf,0xc,-0x4,-0x44)+_0x391902(0x17,-0xc2,-0x19,-0xc8),_0xe11df4);let _0x2ea6e7='';_0x4849f8[_0x35f37b(0x146,0x1ec,0x128,0x191)](_0x3a3cd6[_0x35f37b(0x254,0x2d5,0x1e0,0x26c)],0x2*0x11ab+-0x81b+-0x1b3b)&&(_0x2ea6e7=_0x35f37b(0x1cb,0x1e8,0x2ba,0x269)+'被使用：'+[..._0x3a3cd6]['join']('、')+'\x0a');if(_0x5210b2&&_0x4849f8['gvpng'](_0x5210b2[_0x391902(-0x141,-0x156,-0xc4,-0x2d)],-0x2*0x7b3+-0x23de*-0x1+0x28f*-0x8)&&_0x4849f8['WXVQk'](_0x3236a8,-0xf0b+0x9bd+0xc2*0x7)){if(_0x4849f8['mbYBc'](_0x4849f8[_0x391902(-0x33,-0x77,-0x99,-0x153)],_0x4849f8[_0x35f37b(0x149,0x1f8,0x17b,0x1c5)]))_0xe11df4=_0x4849f8[_0x35f37b(0x1de,0x86,0xdb,0x125)](attachImagesToMessage,_0xe11df4,_0x3236a8,_0x5210b2,_0x4849f8[_0x35f37b(0x2bc,0x283,0x2c5,0x263)]),console[_0x391902(-0xc8,-0x1d,-0x18,-0xa)](_0x4849f8[_0x391902(-0x14c,-0x8f,-0x9a,-0x4b)],_0x5210b2[_0x391902(-0x3b,-0x176,-0xc4,-0x107)],_0x4849f8[_0x391902(-0x6b,-0x17,-0x12,0x17)],_0x3236a8);else{const _0x467413=_0x4849f8[_0x35f37b(0x1f6,0x13e,0x21e,0x1d5)](_0x41d376,_0xb82d7[-0x1*-0x1f51+0x1918*-0x1+0x2*-0x31c]),_0x5ef0da=_0x4849f8[_0x391902(0x1e,-0x10f,-0x89,-0x32)](_0x20ff8b,_0x467413);_0x5ef0da&&_0x2f7dac[_0x391902(-0xfc,-0xbf,-0x8a,-0x116)][_0x391902(-0x1c,-0x3,-0xa6,-0x4f)](_0x5ef0da);}}updateCombinedPrompt(_0xe11df4,_0x2ea6e7);const _0x173b09={};_0x173b09[_0x35f37b(0x1ff,0x185,0x279,0x230)]=0x493e0;const _0x133cbc=await LLM_CHAR_MODIFY(_0xe11df4,_0x173b09);console[_0x391902(-0x3c,-0x46,-0x18,-0x52)](_0x4849f8[_0x391902(-0x178,-0x1bd,-0x136,-0x1dc)],_0x133cbc);if(!_0x133cbc){toastr[_0x391902(0x27,-0x42,0x10,-0x73)](_0x391902(-0x1b4,-0x179,-0x154,-0xc3));return;}const _0x2eddf7=_0x4849f8[_0x391902(-0x10a,-0x8d,-0x126,-0x1ad)](extractCharacterTags,_0x133cbc);if(_0x4849f8[_0x391902(-0x137,-0xfa,-0x90,-0xe8)](_0x2eddf7[_0x391902(-0x7c,-0x1f,-0x8a,-0x25)][_0x391902(-0xcd,-0xe9,-0xc4,-0xda)],0x3*0x97f+0x121d+-0x2e9a)){toastr['warning'](_0x4849f8[_0x35f37b(0x1c6,0x272,0x246,0x1fd)]),console[_0x35f37b(0x216,0x2e8,0x224,0x246)](_0x4849f8[_0x391902(-0x5,-0x92,-0xb9,-0x151)]),console[_0x35f37b(0x1c3,0x1a1,0x260,0x246)](_0x4849f8[_0x35f37b(0x123,0x1bc,0x1bf,0x17f)],_0x133cbc);return;}console['log'](_0x4849f8[_0x391902(-0x8e,-0x12f,-0x92,-0x8b)],_0x2eddf7);const _0x22524b=_0x2eddf7[_0x35f37b(0x1b4,0x250,0x289,0x1d4)][-0x1b2e+-0x1f7*0xc+-0x49*-0xb2];await _0x4849f8[_0x391902(-0xd3,-0xa7,-0x35,-0x18)](updateCharacterPresetFromLLM,_0x5c73b8['id'],_0x22524b),toastr['success'](_0x4849f8['rGoui']);}else return _0x53759e['randomUUID']();}catch(_0x2f038e){console[_0x35f37b(0x23e,0x1de,0x2ec,0x26e)](_0x4849f8[_0x391902(0x8,-0x38,-0x94,-0x111)],_0x2f038e),toastr['error'](_0x35f37b(0x12f,0x20d,0x247,0x1da)+'\x20'+_0x2f038e[_0x35f37b(0x2b4,0x2a3,0x2e4,0x24f)]);}}async function updateCharacterPresetFromLLM(_0x537d1c,_0x2cab25){const _0x2f1b0e={'MdPEp':_0x3b8ad3(0x93,-0x27,0x20,0x129),'IRSZG':_0x1ee044(0xad,0x111,0x0,0x10b),'uGexI':_0x3b8ad3(0x119,0x1c3,0x131,0x16c)+_0x3b8ad3(0x133,0x134,0x194,0xa1),'AJxrj':_0x1ee044(0x55,0x103,-0x29,-0x24)+_0x3b8ad3(0xb3,0x92,0xc6,0x74),'idZXh':_0x1ee044(0x57,0xbd,0xd4,0x102)+'FW','EsLaP':_0x1ee044(-0x63,0x24,-0x6e,-0x6d)+_0x3b8ad3(0xc9,0x43,0x15d,0xd8),'HLAgs':_0x3b8ad3(0x61,0x102,-0x49,-0x24)+'SFWBack','odzNi':'fullBodyNS'+'FW','livpi':function(_0x31f399,_0x4c51fc){return _0x31f399(_0x4c51fc);},'KjEbm':_0x1ee044(0x7d,0x14,0x8e,-0x4),'dtFfD':_0x3b8ad3(0xe1,0x3d,0x15d,0x14f),'FClxY':_0x1ee044(0x64,0xfd,-0x2,0xea),'CsXeF':_0x3b8ad3(0x14f,0x1e4,0x1b8,0x144),'XqvwK':'上半身SFW','jsGkc':_0x1ee044(-0x3b,0x21,-0xae,0xe),'XFzYO':_0x3b8ad3(0xdc,0x5a,0x98,0x14c),'dsvbo':_0x1ee044(0x7a,0x3c,-0x33,-0x40),'QEMMu':function(_0x5edcaa,_0x27d8ed){return _0x5edcaa!==_0x27d8ed;},'mIIBB':function(_0x3afdcf,_0x2108ad){return _0x3afdcf===_0x2108ad;},'ffsVX':_0x3b8ad3(0x12c,0x1b0,0x97,0x185),'DWESB':_0x3b8ad3(0x82,0x48,0xa,-0x29),'hxWdk':function(_0x2d3e49,_0x423466){return _0x2d3e49>_0x423466;},'CNiOG':_0x3b8ad3(0x144,0x10d,0x1e8,0x134),'SwfRS':_0x3b8ad3(0xad,0x56,0x165,0x2c)+'内容','SQENn':_0x3b8ad3(0xa8,0xdc,0x144,-0xe),'rToYO':function(_0x5eeb4c,_0x71c6f3){return _0x5eeb4c!==_0x71c6f3;},'WGQPS':_0x3b8ad3(0xb4,0x77,0x9f,0x42),'wUisj':_0x3b8ad3(0x21,0x32,0xb0,0xd5),'PTOhQ':_0x3b8ad3(0xc1,0xdf,0xbd,0x138)+_0x1ee044(-0x93,-0x8,-0x6f,0x18)+_0x1ee044(-0xd,-0xab,0xa3,-0x18),'NWPvo':function(_0x4ac53f,_0x3ca9f1){return _0x4ac53f===_0x3ca9f1;},'GzyZX':'cNqEQ'},_0xfd2a1a=extension_settings[extensionName],_0x18ddb2=_0xfd2a1a[_0x1ee044(0x87,0x10c,0x33,0xdc)+_0x1ee044(-0x25,0x8b,-0x3e,0x54)][_0x537d1c];if(!_0x18ddb2){toastr[_0x1ee044(0xb5,0x6,0xc3,0x11d)](_0x2f1b0e['KjEbm']);return;}let _0x2b400a=_0x3b8ad3(0x16b,0xbd,0xc9,0x1a9)+_0x537d1c+_0x1ee044(0xb2,0x6b,0xb1,0x56);const _0x4847d1={};_0x4847d1[_0x1ee044(0xad,0x30,0x64,0x9b)]=_0x2f1b0e[_0x1ee044(0x1f,-0x62,-0x50,-0x6f)],_0x4847d1[_0x3b8ad3(0x14d,0xda,0x150,0x1b2)]=_0x3b8ad3(0x183,0x1fb,0x105,0x157),_0x4847d1['facialFeat'+_0x3b8ad3(0x133,0x171,0xc8,0x1e5)]=_0x2f1b0e[_0x3b8ad3(0x14c,0xf4,0xed,0x1d9)],_0x4847d1[_0x3b8ad3(0x119,0x77,0x144,0x1a1)+_0x1ee044(-0x11,0x76,-0x22,0x9f)]=_0x2f1b0e[_0x3b8ad3(0x166,0xc6,0x120,0x177)],_0x4847d1[_0x3b8ad3(0x11b,0x83,0xe3,0x1d2)+'FW']=_0x2f1b0e[_0x1ee044(-0x7b,0x28,-0x101,-0xca)],_0x4847d1[_0x3b8ad3(0x11b,0xa7,0x194,0xcc)+_0x1ee044(0x3f,-0x2c,0x3d,-0x26)]=_0x3b8ad3(0xce,0xf5,0x67,0x146),_0x4847d1['fullBodySF'+'W']=_0x2f1b0e[_0x3b8ad3(0x7e,-0x11,0x64,0x87)],_0x4847d1[_0x1ee044(0x5c,0x28,-0x2d,0xe)+'WBack']=_0x2f1b0e[_0x3b8ad3(0x181,0x11b,0x1bf,0xd8)],_0x4847d1[_0x3b8ad3(0x61,0xec,0x73,-0x43)+_0x3b8ad3(0xc9,0x54,0x110,0x13b)]=_0x2f1b0e[_0x1ee044(-0x19,0x8f,0x9b,0xf)],_0x4847d1[_0x3b8ad3(0x61,0x48,-0x22,0xb6)+_0x3b8ad3(0x6e,0x26,0x115,0x100)]=_0x3b8ad3(0x5c,0x51,0x38,0x8f),_0x4847d1['fullBodyNS'+'FW']=_0x1ee044(-0x3c,-0x7d,-0x5e,-0x52),_0x4847d1[_0x3b8ad3(0x17c,0x1fb,0x21b,0x1ac)+_0x3b8ad3(0x103,0x124,0xe0,0xe0)]='下半身NSFW背面';function _0x3b8ad3(_0x3d8dc9,_0x426616,_0x1ef4a9,_0x112939){return _0x448fb0(_0x3d8dc9-0x159,_0x426616-0x178,_0x112939,_0x3d8dc9- -0x8d);}const _0x5e2d9d=_0x4847d1;let _0x2b1d01=-0x16c2+-0x46e+0x1b30;for(const _0x5d7a31 in _0x5e2d9d){if(_0x2cab25[_0x5d7a31]&&_0x2f1b0e['QEMMu'](_0x2cab25[_0x5d7a31],_0x18ddb2[_0x5d7a31])){if(_0x2f1b0e[_0x3b8ad3(0x38,0x8c,-0x2b,-0x38)](_0x2f1b0e['ffsVX'],_0x2f1b0e['ffsVX'])){const _0x584eeb=_0x18ddb2[_0x5d7a31]||_0x2f1b0e[_0x3b8ad3(0x7c,-0xb,0x93,0x93)],_0x45cfb7=_0x2cab25[_0x5d7a31];_0x2b400a+='•\x20'+_0x5e2d9d[_0x5d7a31]+':\x0a',_0x2b400a+='\x20\x20旧:\x20'+_0x584eeb['substring'](-0x3a+0xd3*0xb+-0x1*0x8d7,0x135c+-0x17a6+0x23e*0x2)+(_0x2f1b0e[_0x1ee044(0x51,0x6c,0xb1,0x29)](_0x584eeb['length'],0x5*0x54e+-0x5d0+0x65*-0x34)?_0x2f1b0e['CNiOG']:'')+'\x0a',_0x2b400a+='\x20\x20新:\x20'+_0x45cfb7['substring'](-0x877*0x1+-0x2395*0x1+-0xb03*-0x4,-0x16e7+-0x127c+0x2995)+(_0x2f1b0e[_0x3b8ad3(0x115,0x18d,0x5d,0x70)](_0x45cfb7[_0x1ee044(-0x1f,-0x70,-0xa6,-0xaa)],0x4*-0x2ea+-0x1f82+0x2b5c)?_0x3b8ad3(0x144,0x175,0x1e9,0x157):'')+'\x0a\x0a',_0x2b1d01++;}else{const _0x6f8757={};for(const _0x4a833e in _0x5a068d){_0x6f8757[_0x4a833e]=_0x2bd1a5(_0x1ac4e3[_0x4a833e],_0x5879ff,_0x8cd358,_0x4791d1);}return _0x6f8757;}}}if(_0x2f1b0e['mIIBB'](_0x2b1d01,-0x4cc+0x16b+0x361)){toastr[_0x3b8ad3(0x17e,0x218,0x11d,0x1a2)](_0x2f1b0e[_0x1ee044(0x38,0xab,0xbe,0x3c)]);return;}_0x2b400a+='共\x20'+_0x2b1d01+_0x3b8ad3(0x73,0x62,0x50,0x117);function _0x1ee044(_0x4d153f,_0x5f62ab,_0x508a1d,_0x187ddf){return _0x448fb0(_0x4d153f-0x72,_0x5f62ab-0xa5,_0x5f62ab,_0x4d153f- -0x151);}const _0x1e7fac=await _0x2f1b0e['livpi'](stylishConfirm,_0x2b400a);if(!_0x1e7fac){toastr[_0x1ee044(0xba,0xc5,0x26,0xde)](_0x2f1b0e['SQENn']);return;}for(const _0x4cc060 in _0x5e2d9d){if(_0x2f1b0e[_0x1ee044(0x0,-0x78,0xa2,0x4f)](_0x3b8ad3(0x121,0x1ad,0x16e,0x125),_0x2f1b0e[_0x1ee044(-0x22,0x80,-0x4d,-0x30)])){if(_0x2cab25[_0x4cc060]){if(_0x2f1b0e[_0x3b8ad3(0xfe,0x102,0x132,0x148)]!==_0x2f1b0e[_0x1ee044(0x3a,-0x68,-0x2b,0x69)]){const _0x21cc14={};_0x21cc14[_0x3b8ad3(0x97,0xc8,-0xf,0x139)]=_0x2f1b0e[_0x1ee044(-0x84,-0x9c,-0xaa,-0x11e)];const _0x39ffb9=_0x21cc14,_0x3fbf52=[_0x2f1b0e[_0x3b8ad3(0x7f,0x53,0x43,-0x12)],_0x3b8ad3(0x14d,0x93,0xe6,0x16b),_0x2f1b0e[_0x3b8ad3(0x55,-0x3,0x2,-0x8)],_0x2f1b0e[_0x3b8ad3(0x6f,0xf9,0x3f,0x68)],_0x2f1b0e['idZXh'],_0x3b8ad3(0x11b,0xa2,0xe6,0xe1)+_0x1ee044(0x3f,0x3a,-0xf,0xaf),_0x1ee044(0x5c,-0x4f,0x51,0x4b)+'W',_0x1ee044(0x5c,0x72,0x1,-0x38)+_0x3b8ad3(0x12a,0x19c,0x1b9,0x183),_0x2f1b0e[_0x1ee044(-0x72,-0x119,-0x74,-0x103)],_0x2f1b0e[_0x1ee044(0x3c,-0x10,0x4d,0x80)],_0x2f1b0e[_0x3b8ad3(0x64,0xe0,0x92,0x115)],_0x1ee044(0xb8,0x167,0x45,0x128)+_0x1ee044(0x3f,0xab,0x3c,0x58)];_0x3fbf52[_0x1ee044(0x78,0xf8,0x6,-0x33)](_0x3b566c=>{function _0x4864e6(_0x2f4d3b,_0xf7c797,_0x1b514c,_0x2b192d){return _0x3b8ad3(_0x2f4d3b-0x311,_0xf7c797-0x57,_0x1b514c-0xd3,_0x1b514c);}function _0x5ade68(_0x43b135,_0x192a39,_0x686db2,_0x9a23a0){return _0x3b8ad3(_0x192a39-0x1dc,_0x192a39-0xd4,_0x686db2-0x18,_0x9a23a0);}if(_0x136759[_0x3b566c]){const _0x23d398=_0x3f8533[_0x5ade68(0x2e2,0x2ba,0x324,0x2a3)+_0x5ade68(0x38d,0x362,0x2ca,0x407)](_0x4864e6(0x33c,0x331,0x3dd,0x297)+_0x3b566c);_0x23d398&&(_0x23d398['value']=_0x2ac9b2[_0x3b566c],_0x491c05(_0x23d398)[_0x5ade68(0x243,0x247,0x1ed,0x1fe)](_0x39ffb9[_0x4864e6(0x3a8,0x426,0x324,0x348)]));}});}else _0x18ddb2[_0x4cc060]=_0x2cab25[_0x4cc060];}}else _0x5751ff[_0x343d78]=_0x1cc465(_0x2f3dc9[_0x4eb29d],_0x50c625,_0x249dfe,_0x30b22b);}saveSettingsDebounced();const _0x10a538=$(_0x2f1b0e['PTOhQ']);_0x10a538[_0x3b8ad3(0xa5,0xd0,0x121,-0x15)]&&(_0x2f1b0e['NWPvo'](_0x2f1b0e[_0x1ee044(0xac,0x7d,0x25,0x95)],_0x2f1b0e[_0x1ee044(0xac,0xd2,0xa9,0x15d)])?refreshCharacterSettings(_0x10a538):_0x2f1b0e[_0x1ee044(0xbc,0xbb,0x10,0xb4)](_0x492122,_0x219f01[_0x3b8ad3(0xfb,0x10a,0xd9,0x17d)])),_0x2f1b0e[_0x1ee044(0xbc,0x114,0x13,0x29)](updateFormFields,_0x2cab25),console['log'](_0x1ee044(0x39,0xd2,0xd4,0x90)+_0x3b8ad3(0xb6,0x23,0x50,0xfc)+_0x1ee044(-0x9b,-0xb0,-0xdd,-0xc)+_0x1ee044(0xa0,0x0,0xe2,0x115)+_0x537d1c+'\x22');}function updateFormFields(_0x5251b6){function _0x3e248a(_0x5eebc5,_0x34c1f3,_0x4a8bb7,_0x5c89d0){return _0x448fb0(_0x5eebc5-0x174,_0x34c1f3-0x85,_0x5c89d0,_0x4a8bb7- -0xe4);}function _0xf720b2(_0x3a901b,_0x2bde3e,_0x393be8,_0x4bda28){return _0x448fb0(_0x3a901b-0x19a,_0x2bde3e-0xf8,_0x4bda28,_0x2bde3e-0x231);}const _0x4982ee={'zpcKF':function(_0x29b7bf,_0x32804f){return _0x29b7bf(_0x32804f);},'WuuUg':_0x3e248a(0x16f,0x184,0x11a,0x161),'RZZCx':_0x3e248a(0x195,0x102,0xf6,0x73),'oawsf':_0x3e248a(0x128,0x48,0xc2,0xf7)+_0x3e248a(0x66,0x69,0xdc,0x66),'kBfdL':_0x3e248a(0x10f,0x11a,0xc2,0x4d)+_0x3e248a(0xad,-0x5b,0x5c,-0x12),'EQvPe':'upperBodyS'+'FW','sbBsD':_0x3e248a(0x8a,0xe0,0xc4,0xe4)+'FWBack','Nqjne':_0xf720b2(0x3f0,0x3de,0x45b,0x378)+'W','lpUKN':'fullBodySF'+_0x3e248a(0x162,0xc9,0xd3,0xf1),'UrzjW':'upperBodyN'+'SFW','uHDgV':_0xf720b2(0x3bb,0x31f,0x318,0x2fd)+'SFWBack','QxeJz':_0xf720b2(0x449,0x43a,0x45d,0x403)+'FW'},_0x5b8548=[_0x4982ee[_0x3e248a(0x9,0x8f,0x73,0x5c)],_0x4982ee[_0x3e248a(0x7a,-0x2d,0x6e,0xcd)],_0x4982ee[_0xf720b2(0x33b,0x3a2,0x356,0x34f)],_0x4982ee[_0xf720b2(0x32b,0x398,0x2e2,0x315)],_0x4982ee['EQvPe'],_0x4982ee[_0xf720b2(0x3b4,0x413,0x361,0x3b2)],_0x4982ee[_0x3e248a(0xf,0x3d,0x39,0x84)],_0x4982ee['lpUKN'],_0x4982ee[_0xf720b2(0x2e3,0x359,0x2b5,0x396)],_0x4982ee[_0xf720b2(0x37a,0x3c2,0x3d0,0x3e4)],_0x4982ee[_0x3e248a(0x93,0x116,0xb9,0x149)],_0x3e248a(0x130,0x17c,0x125,0x171)+_0x3e248a(-0x9,0xcd,0xac,0x70)];_0x5b8548[_0xf720b2(0x3e9,0x3fa,0x414,0x453)](_0x1a7b39=>{function _0x5beadd(_0x1c62bd,_0x542555,_0x85d1fa,_0x38b3f8){return _0xf720b2(_0x1c62bd-0xcf,_0x38b3f8- -0xad,_0x85d1fa-0xd7,_0x1c62bd);}function _0x3c2f22(_0x130f91,_0x1f457c,_0x4cea17,_0x41ed68){return _0x3e248a(_0x130f91-0x197,_0x1f457c-0xbe,_0x4cea17-0x228,_0x41ed68);}if(_0x5251b6[_0x1a7b39]){const _0x360328=document[_0x5beadd(0x26e,0x258,0x35b,0x2ef)+_0x5beadd(0x321,0x37b,0x344,0x397)]('char_'+_0x1a7b39);_0x360328&&(_0x360328[_0x5beadd(0x1a5,0x1b3,0x29f,0x25b)]=_0x5251b6[_0x1a7b39],_0x4982ee[_0x5beadd(0x234,0x1a6,0x243,0x246)]($,_0x360328)[_0x3c2f22(0x1e6,0x186,0x23c,0x25c)](_0x3c2f22(0x1b6,0x1fc,0x264,0x300)));}});}
//# sourceMappingURL=http://localhost:8000/characterPromptModify.js.map