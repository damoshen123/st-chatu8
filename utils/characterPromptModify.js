(function(_0x478dc6,_0xea81c){function _0x1edbdd(_0x1976f6,_0x185f4b,_0x273636,_0x103e12){return _0xc31b(_0x103e12-0x65,_0x1976f6);}const _0x4335e6=_0x478dc6();function _0x334eee(_0x2d4eb5,_0x347341,_0x5bfdb6,_0x1b964d){return _0xc31b(_0x5bfdb6-0x141,_0x1b964d);}while(!![]){try{const _0x4bba8e=-parseInt(_0x1edbdd(0x383,0x25b,0x346,0x2d5))/(0x20a9+0x1*-0xc7+-0x1fe1)+-parseInt(_0x334eee(0x39f,0x2b2,0x329,0x404))/(0x52b*-0x7+-0x17d1+0x180*0x28)+parseInt(_0x334eee(0x1e1,0x1cb,0x210,0x252))/(-0x17f4+0x2*-0x9ad+0x2b51*0x1)+parseInt(_0x1edbdd(0x167,0x104,0x236,0x1d6))/(-0x31*-0x41+-0x1727+0xaba)+parseInt(_0x1edbdd(0x20b,0x2ed,0x1ca,0x25c))/(0x919*-0x4+-0x1365+0x37ce)+parseInt(_0x1edbdd(0x149,0x150,0x1d4,0x1b5))/(0x215+0x171+-0x380)*(parseInt(_0x1edbdd(0x17f,0x159,0x142,0x1e7))/(-0x250e+0x7b*-0x3+0x2686))+-parseInt(_0x1edbdd(0x153,0xc3,0x59,0x136))/(0x297+-0xe*-0x1e4+-0x1d07);if(_0x4bba8e===_0xea81c)break;else _0x4335e6['push'](_0x4335e6['shift']());}catch(_0x46729d){_0x4335e6['push'](_0x4335e6['shift']());}}}(_0x2ae4,-0x27d35+-0x2*-0x7afef+-0x2f2f5));const _0x18a4f4=(function(){function _0x5b3c02(_0x39a2a8,_0x47d3fd,_0x576dc7,_0x115a46){return _0xc31b(_0x115a46-0x2fe,_0x39a2a8);}function _0x24b31a(_0x55ce6e,_0x296b32,_0x49d548,_0x1272bb){return _0xc31b(_0x1272bb- -0x5d,_0x55ce6e);}const _0x3b599e={'xcDTV':function(_0x5299a6,_0x4e0907){return _0x5299a6!==_0x4e0907;},'EGGOt':_0x5b3c02(0x4f7,0x58b,0x45b,0x4b5),'BJShj':function(_0x4e5553,_0x32c655){return _0x4e5553===_0x32c655;},'tSnxQ':_0x24b31a(0x122,0xca,0x199,0x16d),'wadRj':_0x5b3c02(0x434,0x454,0x321,0x3ff),'QgmCz':function(_0xfe8185,_0x1c9d6f,_0x1b715d,_0x90c9df,_0x9bd33a){return _0xfe8185(_0x1c9d6f,_0x1b715d,_0x90c9df,_0x9bd33a);},'fQBQu':function(_0x4095fc,_0x5f2492){return _0x4095fc!==_0x5f2492;},'jTxfL':_0x5b3c02(0x39e,0x47b,0x3cf,0x45b),'enOOG':_0x5b3c02(0x566,0x435,0x5eb,0x50e)};let _0x3cc32c=!![];return function(_0x3e49d0,_0x5c001c){function _0x4f0518(_0x422c0c,_0x589015,_0x30f9aa,_0xa086fb){return _0x5b3c02(_0x30f9aa,_0x589015-0x79,_0x30f9aa-0x19e,_0xa086fb- -0x338);}const _0xa7671f={'YmAOD':function(_0x5197e0,_0x133a1e){function _0x3ec4f6(_0x14afb1,_0x59bc56,_0x16e294,_0x2d0ab1){return _0xc31b(_0x14afb1-0x10,_0x2d0ab1);}return _0x3b599e[_0x3ec4f6(0x261,0x33e,0x268,0x281)](_0x5197e0,_0x133a1e);},'YwkFK':function(_0x317248,_0x5b41f0){return _0x317248!==_0x5b41f0;},'ibAqN':_0x3b599e['EGGOt'],'cciLN':function(_0x56b26a,_0x28e4a4){function _0x28bb64(_0x26ec78,_0x38995e,_0x5681dc,_0x5681b3){return _0xc31b(_0x5681dc- -0x3a4,_0x38995e);}return _0x3b599e[_0x28bb64(-0x1be,-0x1fa,-0x1cd,-0x1ed)](_0x56b26a,_0x28e4a4);},'qOoJo':_0x3b599e[_0x4f0518(0x1f9,0xfc,0x1e6,0x171)],'jjOcY':_0x3b599e[_0x4f0518(0x17f,0x1cb,0x111,0x126)],'SyVwN':function(_0xefcc7e,_0x3c6a35,_0x147646,_0x81bd5a,_0xa81876){function _0x52f52e(_0x378529,_0x273dfe,_0x4bfb93,_0x54d28e){return _0x26b114(_0x4bfb93,_0x273dfe-0x658,_0x4bfb93-0x1b2,_0x54d28e-0x150);}return _0x3b599e[_0x52f52e(0x445,0x396,0x402,0x3a6)](_0xefcc7e,_0x3c6a35,_0x147646,_0x81bd5a,_0xa81876);}};function _0x26b114(_0x236997,_0x2f9eb7,_0x443ef4,_0x4e58d8){return _0x24b31a(_0x236997,_0x2f9eb7-0x41,_0x443ef4-0x1ab,_0x2f9eb7- -0x384);}if(_0x3b599e['fQBQu'](_0x3b599e[_0x4f0518(0x15c,0x86,0x101,0xfe)],_0x3b599e['enOOG'])){const _0x2b8d23=_0x3cc32c?function(){function _0x34c338(_0x53ce59,_0xd086d3,_0x20af7d,_0x1f3222){return _0x26b114(_0x53ce59,_0x20af7d-0x79e,_0x20af7d-0x1df,_0x1f3222-0x79);}function _0x48d0aa(_0x57cb3d,_0x7269b7,_0x44b201,_0x67a3af){return _0x4f0518(_0x57cb3d-0x107,_0x7269b7-0x1d4,_0x57cb3d,_0x44b201- -0x24f);}const _0x875c25={'Bmwte':function(_0x531659,_0x3200d0){return _0xa7671f['YmAOD'](_0x531659,_0x3200d0);}};if(_0xa7671f[_0x34c338(0x6c7,0x596,0x5ff,0x615)](_0xa7671f[_0x34c338(0x475,0x4c2,0x478,0x46f)],_0xa7671f[_0x34c338(0x4c0,0x4e3,0x478,0x4b8)]))_0x1af72c[_0x222bd1]&&_0x875c25[_0x34c338(0x563,0x53a,0x51e,0x58b)](_0x807f8b[_0x8611b],_0x3d27c0[_0x4ed3ea])&&_0x3c4b40++;else{if(_0x5c001c){if(_0xa7671f[_0x34c338(0x61b,0x671,0x5d0,0x522)](_0xa7671f['qOoJo'],_0xa7671f[_0x34c338(0x4eb,0x4a3,0x482,0x535)]))_0x4b3f8d++;else{const _0x1079a4=_0x5c001c['apply'](_0x3e49d0,arguments);return _0x5c001c=null,_0x1079a4;}}}}:function(){};return _0x3cc32c=![],_0x2b8d23;}else _0x2d27aa[_0x563d3d]=_0xa7671f[_0x4f0518(0x2fd,0x222,0x173,0x228)](_0x1fb3e4,_0x44291c[_0x13199a],_0x2d0a4e,_0x2b122c,_0x5a7246);};}()),_0x2e190f=_0x18a4f4(this,function(){const _0x169cbc={};_0x169cbc['aPvtK']='(((.+)+)+)'+'+$';const _0x53e949=_0x169cbc;function _0x382e51(_0x2ca579,_0x3b2db6,_0x2c6280,_0x37e93d){return _0xc31b(_0x2ca579-0x19c,_0x2c6280);}function _0x4c2699(_0x2c227f,_0x262be4,_0x37d3be,_0x5db7eb){return _0xc31b(_0x5db7eb- -0x322,_0x262be4);}return _0x2e190f[_0x4c2699(-0x2b6,-0x18c,-0x185,-0x24b)]()[_0x4c2699(-0x1bd,-0x175,-0x1fd,-0x12c)](_0x382e51(0x3a5,0x3d1,0x43c,0x420)+'+$')[_0x4c2699(-0x228,-0x1df,-0x208,-0x24b)]()[_0x382e51(0x2c0,0x265,0x2d0,0x35b)+'r'](_0x2e190f)[_0x382e51(0x392,0x2c6,0x2ba,0x466)](_0x53e949[_0x382e51(0x40a,0x46e,0x406,0x3c8)]);});_0x2e190f();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';function _0x393a05(_0x51b849,_0x42f38e,_0x40b8e4,_0x452331){return _0xc31b(_0x42f38e- -0x80,_0x51b849);}import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';function _0x2ae4(){const _0x40a913=['zNLDioACJEIJHsaI','t2rdBhK','zNLDioATO+wCQowKHoEqHUINKUIjSG','zvrHBwq','vxPeuu0','zxjYB3i','C3vIC3rYAw5N','nZDXuxPcuhK','Aw5WDxq','w2nOyxjHy3rLCG','CevbEM0','zLPmww0','y29UDgvUDa','tfb5Evq','5lIk5y2k6lQRu0zx6iom6z2I','CMvTB3zLtgLZDa','pos6UUEjQt4k','DwjrqLG','t05trq','B1D3yvm','vhb4wM4','B2rPzNKGteXnia','zwfQAeO','yMfZzty0','yLrgyNC','BMC6','ru5iuKe','ChrOBwu','C0X6uuW','uhvLq1u','tfrbyuq','s0fNq2e','vevYqwW','yvLRALe','A09Ytvi','E3VNLkJMIlFPNidMSyj9Fq','A3D1A3C','i3n0lwnOyxr1oa','y2HHCMfJDgvY','v0PmrLq','zxf1AxjLBwvUDa','B3v0zML0rw5HyG','rhPuqLi','zwLquKy','BMfTzuno','DNDVrfa','q1fHz1K','uhjVBxb0tw9KAq','DfnUEfe','zvjrrwm','zNblA3C','AM9PBG','zw5LCG','rgHsB2u','5lIk5y2k6lQRtLngv+IdJoMDOG','CvLmv2G','vxryqwW','B2jQzwn0','D29YBgrcB29RqW','t0rsze8','DgDRu2i','u0zx','C3rYAw5N','Bg9N','DMfYAwfIBgvZoG','qvHNueS','rvDuv3e','u1nYuhO','wNfvtKy','CMvZzxrZ','igLUzgv4','y2HHCMfJDgvYua','Aw5MBW','BMfTzq','z2vUzxjHDgLVBG','tMD2CNq','A0rzs2y','yxjbswu','ig1LC3nHz2uGAq','vuf2rvC','5lQu5A6y5Asw6lkm6iom6z2I','BMCGy2HHCMfJDa','DcbWCMvZzxq6','EfvQqwm','D1zkzKy','5Qoa5Rwl5yIW5PYn6kofici','t0rjrLLFr0vuxW','u3LMuxK','CMvWBgfJzufSBa','BMfTzuvo','zwnqsge','CMfUzg9Tvvvjra','qKPtAgO','sefYBNG','y29TBw9Uq2HHCG','DgzzBwm','sxnfwgm','vNfcC20','D3z4zhm','EKfkt1a','ENf0C1u','Aunwv2y','zNLDien1CNjLBG','A1LfBxq','qwPoCMu','uuvsu1e','rxbdB2q','zgf0ytO','Bxb0icHjrdOG','mJiYntKZnML1uxbWuq','EKnethu','5lIl5y2k6lQRu0zx','BfDerKq','CMvZzxrjza','5B2s5BgE5lQ6','wKjivxe','Bw9KAwz5ihbYBW','5lIl5y2k6lQRtLngvW','B2v4ug8','C0P6ENq','B3v0zML0','zNLDifnHDMvKia','y3nzrLK','C2vHCMnO','mZC0odC5mhDrzKfLvW','ANz2wfe','DxbWzxjcB2r5uW','Avzbv1O','y2HHCMfJDgvYCW','zNLDiow3SUwiM+w7UUACJEIJHEMIHa','y29UDgv4DdO','rNn5zLu','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','DMfYAwfIBgvZ','suTtsfi','CMvWBgfJzq','DufKC2e','t0vPzNC','ufjptvbux1jfuW','tNrYqMK','teXnioI/LowBNUE7K+AENos4UUEPUG','C3bSAxq','kcGOlISPkYKRkq','u2rfs2K','zNLDienOyxjHyW','wwXQze8','q29UDgv4Da','BgvUz3rO','rwnRvxm','v25yzuO','yxv0BW','t0rjrLLFuKvtua','y2nPte4','zNLDiev4DhjHyW','DKPtrMe','zvjyBeK','vvjrEeG','q2X0AMG','yLfdC3y','DLnXBNO','yMrmz0S','r2vTzK4','zMfJAwfSrMvHDa','wwrvBeO','tfjmBw0','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','zxjwC2K','ChvfA28','B3DUzxi','veTmCMG','yM9qvgC','tvD0qKO','l3bUzZTIyxnLnG','Aw5NignOyxiGBq','B3v0zML0CW','B01Sv2K','BM93','5lIl5y2k6lQRu0zx6iom6z2I','5lQu5A6y5Asw6lkm6iom6z2IoIa','pc/KURRNIAK+','tvHbsw8','zNLDiev4zwn1Da','D2fYBMLUzW','ufjptvbux1jfuq','zNLDiezPBMfSia','5A2x5Q61ici','DwHxz3a','DgvYihrYAwDNzq','CM5bu1i','Cg9ZAxrPB24','z2LfEw4','vMfYAwfIBgvZ','CMfUzg9T','iIdMSQhMNiNLJ5JMM7q','C29YDa','D29YBgqGyM9VAW','zfLnEMO','Egj3rhG','AfDjrvG','wxDRrKS','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','zNvSBejVzhK','DhjPz2DLCG','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','zNvSBejVzhLouW','6k6+ici','t0zqD3i','DxbWzxjcB2r5','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','DgLTzw91De1Z','5lIk5y2k6lQRu0zx','zNLDievYCM9YoG','Dhb1Da','rgHnu3a','Egnevfy','5lIl5y2k6lQRu0zx6iom6z2IoIa','C2PysKG','zNLDiow3SUABToAwSoINKUIjSUMIHa','ywn0zxjmAxn0va','ywrK','5lIk5y2k6lQR','DxjS','Aw1Hz2vZihrVia','DwjbseW','zxHLyW','zxjLzcK6','C3rHCNrZv2L0Aa','v0jHy2S','sxH6tgO','zxvrswy','AKPmtLm','u3LwD04','swzkvK8','6kEs6iMY54M55B6boIa','s0nhsNm','5lQu5A6y5Asw6lkm','swHvBe0','y0HQz3G','svLrv3u','CKHLCwi','CMfPDhm','vw5Yuvu','5lIl5y2k6lQR6iom6z2I','yvb2DeS','tLrbEfe','ndyYodK0ruDMwgro','A2DhwKO','DxjLC0jHy2S','Dg9mB3DLCKnHCW','rgPbu2e','ELPzteW','AhbdqKe','AwjbCu4','5BEY5y+w5RAi5PU05PAW','BMrLEdO','ANjjCgS','yxbWBhK','BwfW','ue9ou0u','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','BuvNC3u','zMPfzMC','AMPpy1K','6kkR5l2/55sO77YA','5Qoa5Rwl5yIW6kEs6iMYici','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','5lIT5PAh5zcn56EWoIa','BwvZC2fNzq','5y+c6icd5zU+54Mh','B25Os0y','lxrHyI1JAgfYyq','Bwf0y2HLze91Da','mti0ntm3nuzjuhLjtW','iIZMMk/LKkBLVzxLHAu/','nJu4otqWoeT1Dg5xBW','zu9ct2e','teH6ENq','Aw5JBhvKzxm','6kEs6iMY54M55B6b','B250zw50','Dg9tDhjPBMC','DxbWzxjcB2r5qG','5Rgc6lAf5PE2','DgvKigrHDge6','u01Vv0O','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','ueTVzNm','uMjVzKC','Axn0vgv4Da','5lIl5y2k6lQR','Aw5KzxHpzG','vuvtva','vwHbtvO','r0DUB2C','yvjzB1q','zxrZ','wvzOz3a','wLzjy00','5PwW5O2UoG','ALbSBgC','DgvYigXPC3qGDa','Bw1QwMe','5lIk5y2k6lQRtLngvZOG','u1PoCg0','DhLWzq','5lIk5y2k6lQRtLngvW','zgv0ywLS','ywnR','ChjVBxb0oG','y2jJuu8','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','CMfJDgvYl291Da','r0DhvKS','yKngvw8','5lIT5PAh5zcn56EW','zNLDioINO+AEKowiSoEAHoACJEIJHq','yMDhA3a','tgHbDLO','zNLDifn0yxj0Aq','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','shncB20','zhj2weG','t3ztvva','5Qoa5Rwl5yIW5PAW5PYn6kofici','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','6kEs6iMYl+ACJEIJHEApKoEKUUIVJEs/RUAuUq','ywPOtwG','uvLZwuy','tMnVuu0','zxH0icH0CMLNzW','q3PRz1K','DxjLCW','y3rLCG','vgjuEMC','zNLDioINO+AEKowiSoEAHos6UUEjQq','zNLDiow3SUABToAwSoACJEIJHEMIHa','zNLDief0DgfJAa','6iUX5PAh5zcn56EW','C3vJy2vZCW','y3Pgug8','r0zfAei','ugPRu08','ChjVBxb0','yNbdCw8','rKDZzeS','CNfHz2K','qLjIy1e','DKX6qwm','Cuffvfa','5lIl5y2k6lQRtLngv+IdJoMDOG','rLDcywnR','twvTAMK','uwDTq3O','rNfZtwe','su5PuKG','zNvSBejVzhLcyq','sNjctMe','y29UC3rYDwn0BW','EfvxBLa','EwzuwK4','s0XXqLO','5lIl5y2k6lQRu0zxoIa','u0zxqMfJAW','CNrdELu','t2LbAey','v3HOrKG','ChvZAa','DxbWzxjcB2r5tG','Bw9KAwz5ihjLCq','DNnkweK','Aw1Hz2vFDxjS','v29YBgrcB29R','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','vu51D3a','DMfSDwu','Ee1esMu','AxnbCNjHEq','ALr4zKW','B3iGzgvIDwDNAq','y2HHCMfJDgvYva','sLfuqNO','s2nhEei','qxfOwfq','EwL5EKm','zgf0yq','EefJBwC','zML0CW','teXnx0niqvjFtq','wgzgsLu','uuzUs28','vwPdueC','zNfLCMe','DhjPBq','5lIk5y2k6lQRtLngv+IdJoMDOJO','uenqq2u','B3vUzcbPBIbVDq','zwPlq0u','CLD4wxC','D1fIqwq','qM9jBMq','zgf0ytPPBwfNzq','ndqZotK0seLvDenh','teDZr3m','zw10tg4','sMLqthq','5lIk5y2k6lQR6iom6z2I','CMvXDwvZDcaOsq','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','ywHzCKm','zNLDifjLCxvLCW','EwvxwKq','z0znBg8','Awfyufu','C2L6zq','z3LIv3q','t0rjrLLFuKvrvq','rhDUBLO','D2fKuMO','qM13Dgu','zNvSBejVzhLtrG','Dgv4Da','q0vRyvG','ugHXD3i','DxnLCKrLBwfUza','sMXtEgO','rdOG','rvnu','rNHABhG','q1v2sKq','zM9YrwfJAa','zxjdCgy','D0P1DM8','5lIl5y2k6lQRtLngv+IdJoMDOJO','A1zABgm','ndi4nZqXnMTVuKDhAq','CMvZDwX0','zMLSDgvY','zNLDie5VignOyq','CNrPsem','wuzzCuW','wMrwu0O','B3v0zML0uhjLCW','BuLpCeq','tu1oDuq'];_0x2ae4=function(){return _0x40a913;};return _0x2ae4();}import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0xec3cba}from'./promptProcessor.js';function replacePlaceholder(_0x7c904b,_0x88eefd,_0x19afda,_0x47eeae){function _0x4c3add(_0x217050,_0x443be5,_0x461837,_0x1e81e1){return _0xc31b(_0x217050-0x217,_0x1e81e1);}const _0x15aba8={'FGsdK':function(_0x57ae75,_0x56503b){return _0x57ae75===_0x56503b;},'dYMzj':function(_0x454b13,_0x1c394a){return _0x454b13!==_0x1c394a;},'puEko':'DIPip','IYQWu':function(_0x53b200,_0x5d9750){return _0x53b200!==_0x5d9750;},'Phqwr':_0x4c3add(0x42e,0x40d,0x443,0x4a7),'tuXqY':_0x5057ab(0x55a,0x56e,0x5ca,0x501),'LhAvZ':function(_0x4a7e70,_0x45939d,_0x52f2f7,_0x9470a2,_0x12434e){return _0x4a7e70(_0x45939d,_0x52f2f7,_0x9470a2,_0x12434e);}};if(_0x15aba8[_0x5057ab(0x44b,0x3c6,0x444,0x464)](typeof _0x7c904b,'string')){if(_0x19afda&&_0x7c904b[_0x5057ab(0x386,0x46b,0x406,0x421)](_0x88eefd)){if(_0x47eeae){if(_0x15aba8[_0x5057ab(0x656,0x503,0x652,0x58c)]('DIPip',_0x15aba8[_0x4c3add(0x439,0x3bc,0x508,0x375)]))return _0x493ffd;else _0x47eeae[_0x4c3add(0x46d,0x4f6,0x3ea,0x509)](_0x88eefd);}}return _0x7c904b[_0x4c3add(0x3ea,0x494,0x3d9,0x366)](_0x88eefd,_0x19afda);}if(Array['isArray'](_0x7c904b)){if(_0x15aba8[_0x5057ab(0x5e7,0x635,0x5bd,0x5b6)](_0x15aba8[_0x5057ab(0x4ba,0x56e,0x551,0x4b2)],_0x15aba8[_0x4c3add(0x37c,0x33a,0x39f,0x392)]))_0x476158[_0x4c3add(0x3d1,0x43c,0x41a,0x39b)](_0x5057ab(0x4da,0x46b,0x425,0x4d1)+_0x5057ab(0x50d,0x477,0x56b,0x4f7)+'fy]\x20未识别的服装'+_0x4c3add(0x44b,0x4ad,0x3d1,0x3a4)+_0x23b74b+'\x22');else return _0x7c904b['map'](_0x33497f=>replacePlaceholder(_0x33497f,_0x88eefd,_0x19afda,_0x47eeae));}if(_0x7c904b&&_0x15aba8[_0x5057ab(0x3d7,0x482,0x46c,0x464)](typeof _0x7c904b,_0x15aba8['tuXqY'])){const _0x495236={};for(const _0x4c4a8d in _0x7c904b){_0x495236[_0x4c4a8d]=_0x15aba8[_0x5057ab(0x4a2,0x39f,0x4c2,0x449)](replacePlaceholder,_0x7c904b[_0x4c4a8d],_0x88eefd,_0x19afda,_0x47eeae);}return _0x495236;}function _0x5057ab(_0x426bf2,_0x204602,_0x53eebb,_0x104528){return _0xc31b(_0x104528-0x34d,_0x53eebb);}return _0x7c904b;}function attachImagesToMessage(_0x1f3635,_0x1bc636,_0x2b8aeb,_0x4e24fc=_0x393a05(-0x1c,0x4b,0xf1,-0x8e)){const _0x16883c={};function _0x225ff3(_0x1ddfbd,_0xeb118f,_0x7fdfda,_0x5baaee){return _0x393a05(_0xeb118f,_0x5baaee- -0x1dc,_0x7fdfda-0x1d3,_0x5baaee-0x1ae);}_0x16883c[_0x225ff3(-0x33,-0x13a,-0x154,-0xc6)]=function(_0x404b29,_0x5eaccd){return _0x404b29===_0x5eaccd;},_0x16883c['bQCsv']=_0x4f1024(0x1d7,0x23e,0x352,0x28d)+'+$',_0x16883c['UnrQU']=_0x225ff3(-0x3c,-0xda,-0x17,-0xa3),_0x16883c[_0x225ff3(-0x47,-0x1a5,-0x1ee,-0x111)]=function(_0x1e2111,_0x2a4224){return _0x1e2111===_0x2a4224;},_0x16883c[_0x225ff3(-0xad,-0x68,-0x20,-0x41)]=_0x225ff3(-0x114,-0x7c,-0x78,-0x76);function _0x4f1024(_0x269845,_0x35ffee,_0x14b293,_0x12c6a2){return _0x393a05(_0x35ffee,_0x12c6a2-0x104,_0x14b293-0x5,_0x12c6a2-0x30);}_0x16883c[_0x4f1024(0x1ff,0xfe,0x28a,0x1af)]='oCNvt',_0x16883c[_0x4f1024(0x221,0x2e9,0x2a4,0x2bd)]=_0x4f1024(0x9b,0x13d,0x159,0x13c),_0x16883c[_0x225ff3(-0x1a6,-0x209,-0x1c9,-0x17e)]=_0x4f1024(0x100,0x279,0x158,0x1b5),_0x16883c[_0x225ff3(-0x8d,-0x8d,-0x2,-0x4d)]=_0x225ff3(-0x9a,-0x7e,-0xba,-0x4b),_0x16883c[_0x4f1024(0x194,0x2c1,0x19f,0x213)]=function(_0x51aab3,_0x40c778){return _0x51aab3===_0x40c778;},_0x16883c[_0x4f1024(0x2eb,0x33e,0x350,0x2d4)]=function(_0xffe303,_0x45159c){return _0xffe303>=_0x45159c;},_0x16883c[_0x4f1024(0x106,0x1c5,0x1bd,0x170)]=_0x225ff3(-0x13e,-0x136,-0xe2,-0x146),_0x16883c[_0x225ff3(-0x86,-0x1cb,-0x1dc,-0x13b)]=function(_0x3e9304,_0x1b99a4){return _0x3e9304===_0x1b99a4;},_0x16883c[_0x4f1024(0x1f6,0x23b,0x2ed,0x268)]=_0x4f1024(0x29b,0x144,0x24c,0x1e7),_0x16883c[_0x225ff3(-0xd2,-0xe2,-0x17a,-0x102)]=_0x225ff3(-0x79,-0x192,-0x6d,-0xc2),_0x16883c[_0x4f1024(0x1a6,0xc8,0x1a1,0x178)]=function(_0x35c9cc,_0x2cc586){return _0x35c9cc!==_0x2cc586;},_0x16883c['SZNpm']=_0x225ff3(-0x7,0xb,0x57,-0x7c);const _0xb22e2d=_0x16883c;if(!_0x2b8aeb||_0xb22e2d[_0x4f1024(0x20a,0x1fd,0x1fc,0x213)](_0x2b8aeb[_0x4f1024(0x221,0x27f,0x201,0x292)],0x247f*0x1+-0x157c+0x3f*-0x3d)||_0x1bc636<-0x17eb+0x1f6c+-0x781||_0xb22e2d[_0x225ff3(0x66,0x89,0x6a,-0xc)](_0x1bc636,_0x1f3635['length']))return _0xb22e2d[_0x4f1024(0x168,0x1f2,0x1a5,0x170)]!==_0xb22e2d[_0x225ff3(-0x15c,-0x135,-0x228,-0x170)]?_0x13b68b[_0x225ff3(-0x143,-0x211,-0x1db,-0x19c)](_0x4d2e9b=>_0x4f9c84(_0x4d2e9b,_0x4777c6,_0x744a84,_0x296c3a)):_0x1f3635;const _0x3e4022=[..._0x1f3635],_0x58330a=_0x3e4022[_0x1bc636],_0x3efc75=[];if(_0xb22e2d[_0x225ff3(-0xaf,-0x8e,-0xca,-0x13b)](typeof _0x58330a[_0x225ff3(-0x4e,-0x131,-0xcd,-0xd5)],_0xb22e2d[_0x4f1024(0x390,0x399,0x284,0x2f0)])){const _0x30fb18={};_0x30fb18[_0x225ff3(-0x94,-0x1c8,-0xc0,-0x16d)]=_0xb22e2d['QERSQ'],_0x30fb18[_0x4f1024(0x1bb,0x115,0x204,0x1e7)]=_0x58330a['content'],_0x3efc75[_0x225ff3(-0xd3,-0x176,-0x72,-0x12f)](_0x30fb18);}else Array[_0x225ff3(-0x8d,-0x1c3,-0x158,-0x125)](_0x58330a[_0x4f1024(0x184,0x2ba,0x1c3,0x20b)])&&(_0xb22e2d[_0x225ff3(0x3,-0x58,-0x99,-0xcd)](_0xb22e2d[_0x225ff3(-0x10f,-0xec,-0x158,-0x102)],_0x4f1024(0x2b9,0x1d0,0x1e4,0x290))?_0x40cbc5[_0x2df5df]&&(_0xfc568b[_0x372c8a]=_0x57088d[_0x34fd45]):_0x3efc75[_0x225ff3(-0x1fe,-0x188,-0xbe,-0x12f)](..._0x58330a['content']));if(_0x2b8aeb[_0x4f1024(0x288,0x23f,0x370,0x292)]>0x17*-0x96+0x2*0x197+0x2*0x526){if(_0xb22e2d[_0x4f1024(0x18f,0x13e,0xff,0x178)](_0xb22e2d[_0x4f1024(0xcf,0x222,0x1b7,0x172)],_0x4f1024(0x2fd,0x1d8,0x2b9,0x264)))for(const _0x3bafb1 of _0x1317c0[_0x4f1024(0x18f,0x2b2,0x2c7,0x20b)]){if(_0xb22e2d[_0x225ff3(-0x159,-0x112,-0x139,-0xc6)](_0x3bafb1['type'],_0x225ff3(-0xbb,-0xf9,-0x31,-0xf9))&&_0x3bafb1['text'][_0x225ff3(-0x13b,-0x17d,-0x15f,-0x188)](_0xcf1f4))return _0x316b55;}else{const _0x321c56={};_0x321c56[_0x225ff3(-0x1b2,-0x1e8,-0x18a,-0x16d)]=_0xb22e2d[_0x225ff3(-0x2c,0x51,-0x92,-0x78)],_0x321c56[_0x225ff3(-0x2f,-0x100,-0x41,-0xf9)]=_0x4f1024(0x2f6,0x2df,0x1d4,0x2a4)+_0x2b8aeb[_0x225ff3(-0x12b,0x9,0x5b,-0x4e)]+'张'+_0x4e24fc+']',_0x3efc75[_0x225ff3(-0x7d,-0x148,-0xc3,-0x12f)](_0x321c56);}}_0x2b8aeb[_0x4f1024(0x24c,0x196,0x1ab,0x1f0)]((_0x23718b,_0x274df0)=>{const _0x2fadef={};_0x2fadef[_0x4e24e5(-0x206,-0x245,-0x224,-0x19e)]=_0xb22e2d[_0x38d7ee(-0x118,-0x198,-0x1c2,-0x135)];const _0x50f84c=_0x2fadef,_0x5dcfed=typeof _0x23718b===_0xb22e2d[_0x4e24e5(-0x120,-0x18f,0x10,-0xb7)]?_0x23718b:_0x23718b[_0x4e24e5(-0xc2,-0x1eb,-0xdd,-0x191)],_0x37f622=_0xb22e2d[_0x4e24e5(-0x1da,-0x11f,-0x197,-0x1d8)](typeof _0x23718b,_0x38d7ee(-0x206,-0x118,-0xc2,-0x19a))&&_0x23718b['name']?_0x23718b[_0x38d7ee(-0x16b,-0xaf,-0x1ef,-0x18a)]:''+_0x4e24fc+(_0x274df0+(-0x67*0x26+-0x583*-0x6+-0x11c7)),_0x28fbc8={};_0x28fbc8['type']=_0x4e24e5(-0x29b,-0x257,-0x124,-0x1c0),_0x28fbc8['text']='['+_0x37f622+']',_0x3efc75['push'](_0x28fbc8);let _0x1b24d4=_0x5dcfed;function _0x4e24e5(_0x1f5997,_0x35a120,_0xede048,_0x583fd3){return _0x225ff3(_0x1f5997-0xa9,_0x1f5997,_0xede048-0xf0,_0x583fd3- -0xc7);}if(!_0x5dcfed[_0x38d7ee(-0x15c,-0x19,-0x9e,-0xf1)](_0xb22e2d[_0x38d7ee(-0x71,-0x1b0,-0x15a,-0x133)])){if(_0xb22e2d[_0x38d7ee(-0x24e,-0x232,-0x17d,-0x1b8)](_0xb22e2d['OiAhF'],_0xb22e2d[_0x4e24e5(-0x194,-0x88,-0x2b,-0xea)]))return _0x27513c[_0x4e24e5(-0x181,-0x262,-0x1cf,-0x24c)]()[_0x38d7ee(-0xd7,-0x171,-0x236,-0x158)](sQAVHX[_0x4e24e5(-0x270,-0x263,-0x1ad,-0x19e)])[_0x38d7ee(-0x31e,-0x292,-0x1dc,-0x277)]()[_0x4e24e5(-0x2a2,-0x21e,-0x18c,-0x1ff)+'r'](_0x872065)['search'](sQAVHX[_0x38d7ee(-0x289,-0x27d,-0x278,-0x1c9)]);else _0x1b24d4='data:image'+'/png;base6'+'4,'+_0x5dcfed;}const _0xb47994={};_0xb47994[_0x38d7ee(-0x289,-0x32e,-0x33c,-0x25f)]=_0xb22e2d[_0x38d7ee(-0x1de,-0x1ea,-0x276,-0x270)],_0xb47994[_0x4e24e5(-0x214,-0x2a9,-0x1fd,-0x1f2)]={},_0xb47994[_0x4e24e5(-0x214,-0x2a9,-0x1fd,-0x1f2)][_0x4e24e5(-0x32,-0x5b,-0x190,-0xcb)]=_0x1b24d4;function _0x38d7ee(_0x32da40,_0x24c6ae,_0x3a964f,_0x18752e){return _0x225ff3(_0x32da40-0x196,_0x24c6ae,_0x3a964f-0xb9,_0x18752e- -0xf2);}_0xb47994[_0x4e24e5(-0x214,-0x2a9,-0x1fd,-0x1f2)][_0x38d7ee(-0x1fa,-0x31d,-0x277,-0x25d)]=_0xb22e2d[_0x38d7ee(-0x159,-0x1cd,-0x1fd,-0x13f)],_0x3efc75[_0x38d7ee(-0x2dd,-0x19d,-0x29c,-0x221)](_0xb47994);});const _0x93163e={..._0x58330a};return _0x93163e['content']=_0x3efc75,_0x3e4022[_0x1bc636]=_0x93163e,_0x3e4022;}function findMessageIndexWithPlaceholder(_0x29d89e,_0x24b76f){function _0x62e3a0(_0x3a7511,_0x3f00fd,_0x218ae0,_0x33cd85){return _0x393a05(_0x3f00fd,_0x3a7511- -0x30a,_0x218ae0-0x1c1,_0x33cd85-0x92);}const _0x4c9404={'rpUXj':function(_0x3635f9,_0xf2a7d0){return _0x3635f9(_0xf2a7d0);},'ZBHUq':_0x62e3a0(-0x1e9,-0x29b,-0x15b,-0x162),'SMoWJ':function(_0x56a9bd,_0x471284){return _0x56a9bd<_0x471284;},'WxhFH':function(_0x103f2e,_0x5d348f){return _0x103f2e===_0x5d348f;},'zCDLu':_0x575cd0(0x36b,0x39e,0x2ff,0x332),'QXsuv':function(_0x52454b,_0x5bb2c9){return _0x52454b!==_0x5bb2c9;},'HRQhC':'BTvMO','CzkgY':_0x575cd0(0x2c5,0x304,0x248,0x2b5),'lWDFD':_0x62e3a0(-0x227,-0x200,-0x22a,-0x2c3),'bbiBH':function(_0x52245f,_0xcdd522){return _0x52245f===_0xcdd522;},'Cltjh':'ofZrN'};for(let _0x281cdd=0x1c+-0x226e+0x2252*0x1;_0x4c9404[_0x575cd0(0x1e7,0x201,0x29c,0x254)](_0x281cdd,_0x29d89e[_0x575cd0(0x2c0,0x362,0x395,0x387)]);_0x281cdd++){const _0x25805a=_0x29d89e[_0x281cdd];if(_0x4c9404[_0x62e3a0(-0x25e,-0x2ac,-0x1d3,-0x330)](typeof _0x25805a[_0x575cd0(0x397,0x3d1,0x2fb,0x300)],_0x4c9404[_0x62e3a0(-0x1a1,-0x142,-0x1d0,-0x20b)])&&_0x25805a[_0x62e3a0(-0x203,-0x1e1,-0x269,-0x1e6)][_0x575cd0(0x189,0x2a5,0x27b,0x24d)](_0x24b76f)){if(_0x4c9404['QXsuv'](_0x4c9404['HRQhC'],_0x4c9404[_0x575cd0(0x1d7,0x1ff,0x2a6,0x282)]))return _0x281cdd;else{const _0x414bbe=_0x4c9404['rpUXj'](_0x202fab,_0x444b1c);if(_0x414bbe){const _0xac2bd5={};_0xac2bd5[_0x575cd0(0x258,0x2e6,0x1b1,0x268)]=_0x4c9404[_0x62e3a0(-0x19c,-0x272,-0xfc,-0x214)],_0xac2bd5['data']=_0x414bbe,_0xac2bd5[_0x62e3a0(-0x152,-0x207,-0xeb,-0x12f)]=_0x4f386f,_0xac2bd5[_0x62e3a0(-0x2bc,-0x355,-0x333,-0x254)+'fits']=[],_0x26e14e[_0x575cd0(0x2ad,0x34c,0x23f,0x2a6)](_0xac2bd5);}}}else{if(Array[_0x575cd0(0x361,0x1f4,0x2ff,0x2b0)](_0x25805a['content']))for(const _0x14487f of _0x25805a[_0x62e3a0(-0x203,-0x2a0,-0x2d2,-0x1d7)]){if(_0x4c9404['WxhFH'](_0x14487f['type'],_0x4c9404[_0x62e3a0(-0x19f,-0x1da,-0x14f,-0x218)])&&_0x14487f[_0x62e3a0(-0x227,-0x1bf,-0x2bc,-0x242)][_0x62e3a0(-0x2b6,-0x1dc,-0x27a,-0x232)](_0x24b76f)){if(_0x4c9404['bbiBH']('ofZrN',_0x4c9404[_0x62e3a0(-0x172,-0x14c,-0x118,-0xa4)]))return _0x281cdd;else _0x333c15&&_0x2b078a[_0x575cd0(0x311,0x371,0x3e5,0x3cf)](_0x46d6b7);}}}}function _0x575cd0(_0x1a3d85,_0x181c46,_0x1656a5,_0x129439){return _0x393a05(_0x181c46,_0x129439-0x1f9,_0x1656a5-0x61,_0x129439-0x8e);}return-(0x1f1b*0x1+0x223d+-0x4157);}function generateRequestId(){function _0x10b9f9(_0x787b19,_0x1bfadf,_0x3c2e56,_0x59feab){return _0x393a05(_0x59feab,_0x787b19-0x367,_0x3c2e56-0xb6,_0x59feab-0x10);}const _0x1a515d={};function _0x4e68a8(_0x5f321c,_0x54eb26,_0x869fb2,_0x38295d){return _0x393a05(_0x5f321c,_0x54eb26- -0x2e7,_0x869fb2-0x15b,_0x38295d-0x1d1);}_0x1a515d[_0x10b9f9(0x51e,0x4ee,0x546,0x5fb)]=function(_0x401902,_0xbfb6b7){return _0x401902+_0xbfb6b7;};const _0x26e1aa=_0x1a515d;if(crypto&&crypto['randomUUID'])return crypto[_0x4e68a8(-0xe6,-0x191,-0x1ba,-0xbd)]();return _0x26e1aa[_0x10b9f9(0x51e,0x500,0x547,0x5f9)](Date[_0x4e68a8(-0xf0,-0x13c,-0xc3,-0x209)]()[_0x4e68a8(-0x343,-0x290,-0x1ea,-0x352)](0x22d1+0x97*-0x26+0xc43*-0x1),Math[_0x10b9f9(0x522,0x58e,0x5f3,0x461)]()[_0x4e68a8(-0x1f9,-0x290,-0x218,-0x342)](-0x42a*0x7+-0xf*-0xc+0x1c96)[_0x10b9f9(0x468,0x523,0x4ac,0x3b1)](-0x1*0x2203+0x205*0xd+0x7c4));}export function LLM_CHAR_MODIFY_GET_PROMPT(){const _0x116da0={'MdveV':_0x364ec6(0x47e,0x530,0x50f,0x44f)+'时','jrIpk':function(_0x5f45d9,_0x4df20a){return _0x5f45d9!==_0x4df20a;},'IsEXc':function(_0x3f3725,_0x5d6f7f){return _0x3f3725(_0x5d6f7f);},'zqtsU':function(_0x3fb8e1){return _0x3fb8e1();}};function _0x364ec6(_0x52f3f5,_0x53ee25,_0x160665,_0x14af8b){return _0x393a05(_0x160665,_0x52f3f5-0x3a8,_0x160665-0xdf,_0x14af8b-0x156);}return new Promise((_0x22ad7f,_0x99135f)=>{const _0x15d24b={'LPyyT':function(_0x3516ab,_0x569466){function _0x5f1f09(_0x45c4da,_0x5a9d98,_0x250f5f,_0x36f62b){return _0xc31b(_0x36f62b-0x20e,_0x45c4da);}return _0x116da0[_0x5f1f09(0x387,0x324,0x2a3,0x2cc)](_0x3516ab,_0x569466);},'AXgPK':function(_0x6a0f2a,_0x310c8a){function _0x493c9d(_0x14494a,_0x3e8e40,_0x2cb452,_0x3c0931){return _0xc31b(_0x14494a-0x22a,_0x2cb452);}return _0x116da0[_0x493c9d(0x405,0x466,0x3ab,0x33d)](_0x6a0f2a,_0x310c8a);}},_0x2ae2cc=_0x116da0[_0x25cc36(0x2cd,0x1d1,0x2f4,0x267)](generateRequestId);console['log'](_0x25cc36(0x201,0x1d0,0x15c,0x20c)+_0x399d78(0x46,-0x11,0x59,0xf6)+_0x399d78(-0x5,-0x81,0x7,-0xbb)+'ting\x20char\x20'+_0x25cc36(0x2b0,0x26f,0x249,0x277)+_0x399d78(-0x37,0x18,0x96,-0x31)+_0x2ae2cc+')');const _0xc994c=_0x11112a=>{if(_0x15d24b[_0xfa1a8c(0x36a,0x434,0x4a5,0x357)](_0x11112a['id'],_0x2ae2cc))return;eventSource[_0x1d60e2(0xc3,-0x1,0x7b,-0x55)+_0xfa1a8c(0x46d,0x45b,0x492,0x3b4)](eventNames[_0xfa1a8c(0x3f1,0x3ee,0x3cf,0x394)+_0x1d60e2(0xe0,0xb3,0xc2,0x31)+_0xfa1a8c(0x567,0x4b1,0x4c3,0x50d)+_0xfa1a8c(0x382,0x36d,0x2a2,0x34a)],_0xc994c);function _0xfa1a8c(_0x537f84,_0x298052,_0x2f5f31,_0x1dc4e6){return _0x399d78(_0x2f5f31,_0x298052-0x1d3,_0x298052-0x3fd,_0x1dc4e6-0x97);}function _0x1d60e2(_0x16b685,_0x5b38e9,_0x1bf4b0,_0x7e3470){return _0x399d78(_0x7e3470,_0x5b38e9-0x34,_0x1bf4b0-0x42,_0x7e3470-0x9);}_0x15d24b[_0x1d60e2(0xb3,0x17f,0xad,0x3d)](_0x22ad7f,_0x11112a[_0x1d60e2(-0xcc,-0x2a,0x6,0x9c)]);};eventSource['on'](eventNames[_0x25cc36(0x264,0x10a,0x20f,0x1ca)+_0x399d78(0xb,0x2,0x80,-0x42)+_0x25cc36(0x288,0x329,0x1df,0x28d)+_0x399d78(0x24,0x11,-0x90,-0x45)],_0xc994c);function _0x25cc36(_0x4e8826,_0x4b842e,_0x820898,_0xc6cba3){return _0x364ec6(_0xc6cba3- -0x2a0,_0x4b842e-0x118,_0x820898,_0xc6cba3-0x1ec);}const _0x41572={};_0x41572['id']=_0x2ae2cc;function _0x399d78(_0x420e6f,_0x3ee752,_0x5cebdd,_0x3346f3){return _0x364ec6(_0x5cebdd- -0x479,_0x3ee752-0x155,_0x420e6f,_0x3346f3-0x18a);}eventSource['emit'](eventNames[_0x399d78(-0x2d,-0x29,-0xf,0x3d)+'ODIFY_GET_'+_0x399d78(0x26,0xc1,0xe1,0x3b)+_0x25cc36(0x1d5,0xf3,0x16d,0x16a)],_0x41572),setTimeout(()=>{function _0xa77041(_0x592233,_0xfcb74,_0x31c2e8,_0x148611){return _0x399d78(_0xfcb74,_0xfcb74-0x99,_0x31c2e8- -0x9f,_0x148611-0x74);}eventSource[_0xa77041(0x3b,-0x97,-0x66,-0x30)+_0xa77041(-0x5c,-0xba,-0x41,-0x46)](eventNames['LLM_CHAR_M'+_0x465c6f(0xc4,0x198,0x110,0x242)+'PROMPT_RES'+_0xa77041(-0x153,-0x207,-0x12f,-0x82)],_0xc994c);function _0x465c6f(_0x56ead5,_0x27eb3d,_0x58e8cb,_0x13e7ba){return _0x25cc36(_0x56ead5-0x15a,_0x27eb3d-0xf7,_0x13e7ba,_0x27eb3d- -0xc1);}_0x99135f(new Error(_0x116da0['MdveV']));},-0x1162+-0x2ad4+0x6346);});}export function LLM_CHAR_MODIFY(_0x2c10d5,_0x2e918f={}){function _0x2e381e(_0x31d9e7,_0x5757fe,_0x4a42e1,_0x350d33){return _0x393a05(_0x31d9e7,_0x350d33-0x13e,_0x4a42e1-0x1ee,_0x350d33-0x116);}function _0x39100d(_0x5f4348,_0x17e6e9,_0x12d547,_0x48c0cc){return _0x393a05(_0x48c0cc,_0x17e6e9- -0x1c3,_0x12d547-0x98,_0x48c0cc-0x1e5);}const _0x174510={'YFYqL':function(_0x4dd24c,_0x2dc6cb){return _0x4dd24c(_0x2dc6cb);},'mLnVX':function(_0x1e8826,_0x5382c4){return _0x1e8826===_0x5382c4;},'WPUVZ':_0x2e381e(0x204,0x202,0x20c,0x191),'JrBNa':function(_0x58c926){return _0x58c926();},'jPllg':_0x2e381e(0x1a0,0x25d,0x10c,0x19a)+_0x2e381e(0x134,0xba,0x116,0x197),'UjCPG':function(_0x2580b6){return _0x2580b6();},'zZYLL':function(_0x3aeb72,_0x28fe44,_0x5cdbf1){return _0x3aeb72(_0x28fe44,_0x5cdbf1);}};return new Promise((_0x5de2b9,_0xcd2409)=>{function _0x570f62(_0x4d496e,_0x442e3d,_0x54238e,_0x3316d5){return _0x39100d(_0x4d496e-0xcf,_0x54238e-0x332,_0x54238e-0x12c,_0x442e3d);}const _0x475401={'ODRdO':function(_0x437712,_0x14775f){return _0x437712(_0x14775f);},'mIOpD':function(_0x4d93c0,_0x617814){return _0x174510['mLnVX'](_0x4d93c0,_0x617814);},'rtiHC':_0x174510['WPUVZ'],'rHeqb':function(_0x34d59c){function _0x35f07d(_0x4898db,_0x397765,_0x586549,_0x28eb56){return _0xc31b(_0x586549- -0x299,_0x397765);}return _0x174510[_0x35f07d(-0x1cb,-0x14e,-0x176,-0x1e0)](_0x34d59c);},'iQTqi':_0x174510[_0x570f62(0x203,0x246,0x1d9,0x1af)]};function _0x3b603d(_0x25d1c5,_0x2873d6,_0x20af61,_0x4cdc9e){return _0x39100d(_0x25d1c5-0x66,_0x4cdc9e-0x47a,_0x20af61-0x3b,_0x2873d6);}const _0x26f2a2=_0x174510[_0x3b603d(0x381,0x37d,0x396,0x37c)](generateRequestId),_0x58a694=_0x2e918f[_0x3b603d(0x554,0x47e,0x544,0x483)]||0x128*0xe+0x9dbb+0x3c75;let _0x5bdb30=null;console['log']('[character'+_0x570f62(0x372,0x1bd,0x299,0x26f)+_0x3b603d(0x4e4,0x490,0x391,0x467)+_0x3b603d(0x44e,0x4e2,0x3ac,0x45f)+_0x570f62(0x317,0x2c1,0x27f,0x340)+_0x570f62(0x2c1,0x2a7,0x244,0x303)+_0x3b603d(0x2d1,0x32e,0x36e,0x39f)+_0x26f2a2+')');const _0x58b7fd=()=>{function _0x5f2c71(_0x227707,_0x551da9,_0x5dbca7,_0xd88547){return _0x3b603d(_0x227707-0x2f,_0x5dbca7,_0x5dbca7-0xcc,_0x551da9-0xeb);}function _0x5beb31(_0x3b7fbc,_0x245f89,_0x3a03f3,_0x37ff4b){return _0x570f62(_0x3b7fbc-0x1e4,_0x37ff4b,_0x3a03f3- -0x453,_0x37ff4b-0x1f4);}eventSource['removeList'+'ener'](eventNames[_0x5beb31(-0x262,-0x27a,-0x222,-0x2db)+_0x5f2c71(0x595,0x534,0x599,0x59e)+_0x5beb31(-0x17b,-0x1fa,-0x1d7,-0x109)],_0x468f97),_0x5bdb30&&(_0x475401[_0x5f2c71(0x4ff,0x4d8,0x44c,0x3fe)](clearTimeout,_0x5bdb30),_0x5bdb30=null);},_0x468f97=_0x19f608=>{if(_0x19f608['id']!==_0x26f2a2)return;function _0x480b90(_0x1f3d73,_0x5eecab,_0x5a34e0,_0x47d94f){return _0x570f62(_0x1f3d73-0x74,_0x1f3d73,_0x5eecab- -0xfb,_0x47d94f-0x98);}function _0x4d71d0(_0x164ea8,_0x178765,_0x4a6703,_0x504df2){return _0x3b603d(_0x164ea8-0x1d7,_0x178765,_0x4a6703-0x70,_0x4a6703- -0x494);}_0x58b7fd(),_0x19f608[_0x4d71d0(-0x140,-0xce,-0x14c,-0x123)]?_0x174510[_0x480b90(0x142,0x16a,0xb9,0xcf)](_0x5de2b9,_0x19f608[_0x4d71d0(-0xd6,-0x50,-0xeb,-0x185)]):_0xcd2409(new Error(_0x19f608[_0x480b90(0x210,0x166,0xbf,0x1ba)]||'LLM\x20请求失败'));};eventSource['on'](eventNames[_0x570f62(0x237,0x262,0x231,0x156)+_0x570f62(0x369,0x364,0x301,0x2fa)+'ONSE'],_0x468f97);const _0xbf185f={};_0xbf185f[_0x570f62(0x12b,0x286,0x204,0x2d8)]=_0x2c10d5,_0xbf185f['id']=_0x26f2a2,eventSource['emit'](eventNames[_0x570f62(0x2d6,0x1c5,0x231,0x2d9)+_0x570f62(0x2dd,0x1d7,0x24d,0x22b)+_0x570f62(0x262,0x298,0x258,0x25e)],_0xbf185f),_0x5bdb30=_0x174510[_0x570f62(0x244,0x265,0x1a8,0xfe)](setTimeout,()=>{function _0x5dead8(_0x1ff7aa,_0x2d007c,_0x32eb18,_0x143e64){return _0x570f62(_0x1ff7aa-0xef,_0x2d007c,_0x32eb18- -0x3f8,_0x143e64-0xc);}function _0x546bc4(_0x1189d9,_0x1fdefa,_0x4aaa69,_0x15b1a3){return _0x3b603d(_0x1189d9-0x94,_0x4aaa69,_0x4aaa69-0x1bb,_0x1fdefa-0x57);}if(_0x475401[_0x5dead8(-0xeb,-0xbd,-0x190,-0xd2)](_0x475401['rtiHC'],_0x475401[_0x5dead8(-0x1da,-0x217,-0x194,-0x121)]))_0x475401[_0x5dead8(0xf,-0x166,-0x9f,-0x10a)](_0x58b7fd),_0xcd2409(new Error(_0x475401['iQTqi']));else return null;},_0x58a694);});}function preprocessTagContent(_0x1e1a1a){const _0x2cc530={};function _0x45af9f(_0x40ddd4,_0x4018ab,_0x58c332,_0x20675e){return _0x393a05(_0x40ddd4,_0x20675e-0x20b,_0x58c332-0xaa,_0x20675e-0x16b);}function _0x51ea68(_0x4947c2,_0xc12c89,_0x1fedc1,_0x3e89c1){return _0x393a05(_0xc12c89,_0x3e89c1- -0x56,_0x1fedc1-0x19c,_0x3e89c1-0x1e6);}_0x2cc530[_0x45af9f(0x1d6,0x30e,0x21b,0x272)]='下半身NSFW背面:',_0x2cc530[_0x51ea68(-0x38,0x93,0xff,0x8e)]=_0x45af9f(0x2aa,0x2b4,0x368,0x2d3);const _0x3d9e4b=_0x2cc530;let _0x1a7746=_0x1e1a1a[_0x45af9f(0x3be,0x33f,0x303,0x38d)](/:/g,':')[_0x51ea68(0x61,0xca,0x156,0x12c)](/,/g,',');return _0x1a7746=_0x1a7746[_0x45af9f(0x3fd,0x313,0x3e4,0x38d)](/下半身NSWebcam:/g,_0x3d9e4b[_0x51ea68(-0xcc,-0x2d,0x31,0x11)]),_0x1a7746=_0x1a7746['replace'](/下半身NSFW_背面:/g,_0x3d9e4b[_0x51ea68(0xa2,-0x32,0x32,0x11)]),_0x1a7746=_0x1a7746['replace'](/上半身NSFW_背面:/g,_0x3d9e4b[_0x51ea68(0xae,0x13e,-0x2f,0x8e)]),_0x1a7746;}function _0xc31b(_0x44bcb4,_0x1c4ff2){_0x44bcb4=_0x44bcb4-(-0x149d+0x106+0x144e);const _0x363334=_0x2ae4();let _0x259270=_0x363334[_0x44bcb4];if(_0xc31b['bopkEv']===undefined){var _0x42a587=function(_0xfdcc8a){const _0x3a1f50='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5bfee9='',_0x573cc6='',_0x16fdb6=_0x5bfee9+_0x42a587;for(let _0x362c89=-0x1f7*0x2+-0x2673+0x2a61,_0x2ca086,_0x494fe9,_0x209d3a=0x514+0x1f5b+-0x246f;_0x494fe9=_0xfdcc8a['charAt'](_0x209d3a++);~_0x494fe9&&(_0x2ca086=_0x362c89%(0x1*-0x8ef+0x2*0x1321+-0x3*0x9c5)?_0x2ca086*(0x17c6*0x1+-0x1252+-0x534)+_0x494fe9:_0x494fe9,_0x362c89++%(-0x1c94+0xd*-0xd7+0x2783))?_0x5bfee9+=_0x16fdb6['charCodeAt'](_0x209d3a+(-0x266b*0x1+-0x20eb+0x4760))-(0x20c+-0xffb*0x2+0x6*0x4fe)!==-0x52*0x5d+-0x1*0x1b65+0x392f?String['fromCharCode'](-0x2027+-0x5b1+0x3d*0xa3&_0x2ca086>>(-(-0x8d+0x14*0x15d+-0x9f*0x2b)*_0x362c89&-0x6ba+-0x236f*-0x1+-0x1caf)):_0x362c89:-0x4e+0x66d*-0x1+0x6bb){_0x494fe9=_0x3a1f50['indexOf'](_0x494fe9);}for(let _0x7ec6c9=0x5*0x69d+0x1f38+-0x4049,_0x2cf703=_0x5bfee9['length'];_0x7ec6c9<_0x2cf703;_0x7ec6c9++){_0x573cc6+='%'+('00'+_0x5bfee9['charCodeAt'](_0x7ec6c9)['toString'](-0x4*-0x4be+0x176+-0x365*0x6))['slice'](-(-0x7bb*0x4+-0x1*-0x1936+0x5b8));}return decodeURIComponent(_0x573cc6);};_0xc31b['pyhEiz']=_0x42a587,_0xc31b['ymDgav']={},_0xc31b['bopkEv']=!![];}const _0x420833=_0x363334[-0x121f*-0x1+0x1a28+0x2c47*-0x1],_0x2c7bd5=_0x44bcb4+_0x420833,_0x17a3cc=_0xc31b['ymDgav'][_0x2c7bd5];if(!_0x17a3cc){const _0x254815=function(_0x324f16){this['iDOTyX']=_0x324f16,this['YxOZeA']=[-0x3ca*0x6+-0x9ad*-0x1+0xd10,-0x1ac2+0x1*-0x179+0x969*0x3,0x263*-0x1+-0x5*0x411+0x2d7*0x8],this['AvuSAi']=function(){return'newState';},this['UnzzdA']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['fdZRqT']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x254815['prototype']['lNuLvS']=function(){const _0x5b2399=new RegExp(this['UnzzdA']+this['fdZRqT']),_0x353255=_0x5b2399['test'](this['AvuSAi']['toString']())?--this['YxOZeA'][-0x1dfe+-0x13a+0x1f39]:--this['YxOZeA'][-0x4*0x3c8+0x28+0xef8];return this['FnVqKV'](_0x353255);},_0x254815['prototype']['FnVqKV']=function(_0x1ea2e4){if(!Boolean(~_0x1ea2e4))return _0x1ea2e4;return this['WMheYf'](this['iDOTyX']);},_0x254815['prototype']['WMheYf']=function(_0x2fe3a6){for(let _0xbde001=-0x137*-0x1a+-0xd19+-0x127d,_0x39f580=this['YxOZeA']['length'];_0xbde001<_0x39f580;_0xbde001++){this['YxOZeA']['push'](Math['round'](Math['random']())),_0x39f580=this['YxOZeA']['length'];}return _0x2fe3a6(this['YxOZeA'][0x98*0x3b+-0x75f+-0x1ba9]);},new _0x254815(_0xc31b)['lNuLvS'](),_0x259270=_0xc31b['pyhEiz'](_0x259270),_0xc31b['ymDgav'][_0x2c7bd5]=_0x259270;}else _0x259270=_0x17a3cc;return _0x259270;}function parseCharacterData(_0x1a76f){const _0xdfa848={};_0xdfa848[_0x3f8511(-0xd0,-0x32,-0x5a,-0x4f)]='nameCN',_0xdfa848[_0x4c3c67(0x61e,0x5ee,0x55b,0x55e)]='characterT'+_0x4c3c67(0x4e3,0x4f8,0x5e2,0x5ab),_0xdfa848[_0x4c3c67(0x41b,0x40f,0x46d,0x4ae)]=_0x3f8511(0x55,0x49,0x46,0x38)+'ures',_0xdfa848[_0x4c3c67(0x4b3,0x48b,0x402,0x480)]=_0x4c3c67(0x57d,0x594,0x4e4,0x539)+'FW',_0xdfa848['MMNuD']=_0x4c3c67(0x4ff,0x48e,0x539,0x539)+_0x4c3c67(0x4fd,0x465,0x4c0,0x45d),_0xdfa848[_0x4c3c67(0x526,0x47f,0x4db,0x531)]='upperBodyN'+_0x3f8511(0x82,-0x1c,0x4e,-0x60),_0xdfa848['PCPCe']=_0x3f8511(-0x113,-0xa6,-0x162,-0x3a)+'SFWBack',_0xdfa848[_0x4c3c67(0x3e5,0x412,0x4f2,0x440)]=_0x4c3c67(0x56a,0x5df,0x4c1,0x587)+'FWBack',_0xdfa848['kDYKf']=function(_0x528233,_0x178d1d){return _0x528233!==_0x178d1d;},_0xdfa848[_0x3f8511(-0x6c,-0xf7,-0x22,-0x1b6)]=_0x3f8511(0x7,-0xc2,-0x10a,-0x10e),_0xdfa848[_0x3f8511(-0x16,-0x97,-0x90,0x38)]=_0x3f8511(-0x168,-0xaf,-0x59,-0x134);function _0x3f8511(_0x37ce1a,_0x59e3b8,_0x36649f,_0x26087c){return _0x393a05(_0x26087c,_0x59e3b8- -0x154,_0x36649f-0xdc,_0x26087c-0x17e);}_0xdfa848['wbZuI']=function(_0x593859,_0xdf6af){return _0x593859===_0xdf6af;},_0xdfa848[_0x4c3c67(0x3ff,0x417,0x469,0x4bc)]=function(_0x19af81,_0x49d4b3){return _0x19af81+_0x49d4b3;},_0xdfa848[_0x3f8511(-0x151,-0xc0,0xe,-0x70)]=_0x3f8511(-0x51,-0x16,-0x9b,-0x47),_0xdfa848[_0x3f8511(0x81,-0x2c,-0xfc,0x99)]=function(_0x317475,_0x55ed17){return _0x317475&&_0x55ed17;},_0xdfa848['vLzAc']=_0x4c3c67(0x3f0,0x4ee,0x40c,0x4c4)+_0x3f8511(-0xac,-0x2a,-0x8e,0x64)+_0x4c3c67(0x436,0x4cf,0x505,0x44d)+'数据:';const _0x59cfc1=_0xdfa848,_0x4944b1=_0x1a76f[_0x3f8511(0x8d,0x34,0x106,-0x36)]('\x0a')[_0x3f8511(-0x144,-0x114,-0xe9,-0x5c)](_0x166f31=>_0x166f31[_0x3f8511(-0x2,-0x8d,-0x34,-0x16a)]())[_0x4c3c67(0x484,0x3e5,0x475,0x4b3)](_0x46f0d0=>_0x46f0d0),_0x3252e5={};_0x3252e5[_0x4c3c67(0x421,0x40f,0x44a,0x4e7)]='',_0x3252e5[_0x4c3c67(0x48f,0x518,0x502,0x514)]='',_0x3252e5[_0x3f8511(-0xb7,-0x9a,0x32,-0x37)+'raits']='',_0x3252e5[_0x3f8511(-0x91,0x49,-0x46,0xce)+_0x4c3c67(0x473,0x50d,0x3e3,0x44a)]='',_0x3252e5['facialFeat'+_0x4c3c67(0x660,0x554,0x4dd,0x5b2)]='',_0x3252e5['upperBodyS'+'FW']='',_0x3252e5[_0x4c3c67(0x591,0x538,0x57a,0x539)+_0x4c3c67(0x50c,0x4b0,0x41b,0x45d)]='',_0x3252e5[_0x3f8511(-0x143,-0x72,0xc,-0xac)+'W']='',_0x3252e5['fullBodySF'+'WBack']='',_0x3252e5['upperBodyN'+_0x4c3c67(0x467,0x569,0x518,0x4f8)]='',_0x3252e5[_0x4c3c67(0x475,0x53c,0x3de,0x46e)+_0x3f8511(-0xa3,-0xab,-0xa8,-0x103)]='',_0x3252e5[_0x3f8511(0x130,0x73,0x129,0x95)+'FW']='',_0x3252e5[_0x4c3c67(0x578,0x589,0x58b,0x587)+_0x4c3c67(0x455,0x3a5,0x40e,0x45d)]='';const _0x1c463a=_0x3252e5,_0x4aa7bf={};_0x4aa7bf['中文名称']=_0x59cfc1[_0x4c3c67(0x4d0,0x4a5,0x5ba,0x4e2)],_0x4aa7bf[_0x4c3c67(0x4a2,0x4eb,0x4b4,0x450)]=_0x3f8511(0xa7,0x0,0x24,-0x29),_0x4aa7bf[_0x4c3c67(0x4b1,0x41d,0x425,0x415)]=_0x59cfc1[_0x4c3c67(0x604,0x4c2,0x5a6,0x55e)],_0x4aa7bf[_0x4c3c67(0x5fd,0x657,0x5a1,0x5a6)]=_0x59cfc1[_0x4c3c67(0x47a,0x443,0x3fd,0x4ae)],_0x4aa7bf[_0x4c3c67(0x58a,0x4e6,0x4a0,0x50b)]=_0x4c3c67(0x639,0x4eb,0x4f3,0x55d)+_0x3f8511(0x156,0x9e,0x4,-0x3c),_0x4aa7bf['上半身SFW']=_0x59cfc1[_0x3f8511(-0x13e,-0x94,-0xb6,-0xda)],_0x4aa7bf[_0x3f8511(-0x4a,-0x4b,0x88,-0xd0)]=_0x59cfc1[_0x3f8511(-0xb4,-0x5a,0x54,-0x3c)],_0x4aa7bf[_0x3f8511(0x4,0x16,-0x8,0x85)]=_0x3f8511(-0xa3,-0x72,0x34,-0xf2)+'W',_0x4aa7bf[_0x4c3c67(0x52e,0x4c3,0x4cb,0x56c)]='fullBodySF'+_0x3f8511(0x88,0x8a,-0x1e,0x132),_0x4aa7bf[_0x4c3c67(0x38d,0x3b3,0x488,0x430)]=_0x59cfc1[_0x4c3c67(0x47e,0x45a,0x4c8,0x531)],_0x4aa7bf[_0x4c3c67(0x455,0x4ee,0x550,0x4f1)]=_0x59cfc1[_0x3f8511(0xe,-0x8b,-0x114,-0xfa)],_0x4aa7bf[_0x3f8511(0x55,0x1c,-0x46,-0x1f)]=_0x4c3c67(0x587,0x5ea,0x5a0,0x587)+'FW',_0x4aa7bf[_0x3f8511(-0x16f,-0xb8,-0x131,-0x7c)]=_0x59cfc1[_0x4c3c67(0x4fd,0x405,0x3d6,0x440)];const _0x40c3a3=_0x4aa7bf;function _0x4c3c67(_0x36342b,_0x3f6e1f,_0xccce76,_0x533fd8){return _0x393a05(_0x3f6e1f,_0x533fd8-0x3c0,_0xccce76-0x57,_0x533fd8-0x1a0);}for(const _0x210e68 of _0x4944b1){if(_0x59cfc1[_0x4c3c67(0x4f3,0x4c5,0x595,0x507)](_0x59cfc1['PKofs'],_0x59cfc1[_0x4c3c67(0x3c5,0x4b0,0x45e,0x47d)])){const _0x231e6f=_0x210e68['indexOf'](':');if(_0x59cfc1['wbZuI'](_0x231e6f,-(0x21f4+-0x1c*0x114+-0x3c3)))continue;const _0x9796ac=_0x210e68[_0x3f8511(-0x76,-0x53,0x0,-0x82)](-0x158*0xd+0x29f*-0x5+0x1e93,_0x231e6f)[_0x3f8511(-0xd2,-0x8d,-0x124,-0x34)](),_0x3e83a8=_0x210e68['substring'](_0x59cfc1[_0x3f8511(-0xc0,-0x58,0x7e,-0x33)](_0x231e6f,0x59*0x7+0x3*0xa24+-0x5*0x692))[_0x3f8511(-0x3f,-0x8d,-0x146,-0xb1)]();if(_0x40c3a3[_0x9796ac])_0x59cfc1['kDYKf'](_0x59cfc1[_0x3f8511(-0x45,-0xc0,-0xed,-0x193)],_0x59cfc1[_0x3f8511(-0xfd,-0xc0,-0x7a,-0xc8)])?_0xcbdbe4=_0x3f8511(0x1d,-0x85,-0x115,0x4c)+_0x3f8511(0x2,0x53,-0x64,0x110)+'4,'+_0x12e9c1:_0x1c463a[_0x40c3a3[_0x9796ac]]=_0x3e83a8;else _0x59cfc1[_0x4c3c67(0x420,0x4a2,0x46f,0x4e8)](_0x9796ac,_0x3e83a8)&&console['log'](_0x4c3c67(0x4d7,0x459,0x422,0x4c4)+_0x3f8511(-0x1d,-0x2a,0x49,-0xb8)+_0x3f8511(-0x17a,-0xa1,-0x83,-0xe5)+_0x3f8511(0x1e,0x60,0x11f,-0x1d)+_0x9796ac+'\x22');}else _0x585043(_0x421159);}if(!_0x1c463a[_0x4c3c67(0x5a3,0x42e,0x583,0x4e7)])return null;return console[_0x3f8511(0x28,-0x1a,-0x14,0xb0)](_0x59cfc1[_0x3f8511(-0x18f,-0xba,-0xf6,-0xc)],_0x1c463a),_0x1c463a;}function parseOutfitData(_0x5e3750){const _0x1c565e={};_0x1c565e[_0x277574(0x413,0x388,0x471,0x3dd)]=_0x44c445(0x302,0x204,0x216,0x279),_0x1c565e[_0x277574(0x518,0x45a,0x4b9,0x5b0)]=_0x277574(0x533,0x4c3,0x457,0x4f3),_0x1c565e[_0x277574(0x448,0x4e5,0x4d8,0x3f4)]=_0x44c445(0x1e4,0x267,0x1d7,0x1aa)+_0x277574(0x3db,0x3c4,0x426,0x49c),_0x1c565e['SJwUt']='fullBody',_0x1c565e[_0x277574(0x440,0x4e7,0x40d,0x3f7)]=_0x44c445(0x13b,0x239,0x28b,0x1f4)+'ck',_0x1c565e[_0x44c445(0x398,0x404,0x366,0x331)]=function(_0x3361d6,_0x1735bf){return _0x3361d6===_0x1735bf;},_0x1c565e[_0x44c445(0x212,0x1b3,0x1ae,0x196)]=function(_0x4c463f,_0x188962){return _0x4c463f+_0x188962;},_0x1c565e[_0x44c445(0x412,0x3e5,0x2f0,0x33a)]=function(_0x369164,_0x4117f0){return _0x369164!==_0x4117f0;},_0x1c565e[_0x277574(0x4e3,0x455,0x5a6,0x49a)]=_0x277574(0x4f3,0x5c5,0x4fc,0x476),_0x1c565e[_0x44c445(0x23a,0x1fb,0x233,0x1eb)]='xiijd';const _0x58b997=_0x1c565e,_0x21f056=_0x5e3750[_0x277574(0x4f1,0x434,0x4a1,0x536)]('\x0a')[_0x277574(0x3a9,0x30d,0x335,0x3e7)](_0x5d8434=>_0x5d8434['trim']())[_0x44c445(0x182,0x261,0x235,0x245)](_0xd937a7=>_0xd937a7);function _0x277574(_0x59fed4,_0x28b126,_0x4023e6,_0x3949fc){return _0x393a05(_0x3949fc,_0x59fed4-0x369,_0x4023e6-0x136,_0x3949fc-0x13d);}const _0x5a0597={};_0x5a0597[_0x277574(0x490,0x3f2,0x424,0x4da)]='',_0x5a0597[_0x277574(0x4bd,0x435,0x476,0x4a7)]='',_0x5a0597[_0x277574(0x50c,0x5c3,0x518,0x468)]='',_0x5a0597[_0x44c445(0x250,0x315,0x333,0x31c)]='',_0x5a0597[_0x277574(0x3c1,0x450,0x421,0x3b7)+_0x277574(0x3db,0x4b6,0x327,0x486)]='',_0x5a0597['fullBody']='',_0x5a0597['fullBodyBa'+'ck']='';const _0x441a0d=_0x5a0597,_0x3c138b={};_0x3c138b[_0x277574(0x4d6,0x503,0x541,0x4b5)]='owner',_0x3c138b[_0x277574(0x3e2,0x492,0x39e,0x47f)]=_0x58b997['rtCzU'],_0x3c138b[_0x44c445(0x290,0x2c0,0x17b,0x1e2)]=_0x277574(0x4bd,0x4a0,0x440,0x502),_0x3c138b['上半身']=_0x58b997['MXAIo'],_0x3c138b[_0x44c445(0x26b,0x21e,0x2e3,0x226)]=_0x58b997[_0x277574(0x448,0x3f6,0x460,0x4f4)],_0x3c138b[_0x277574(0x3c9,0x333,0x473,0x303)]=_0x58b997['SJwUt'],_0x3c138b[_0x277574(0x556,0x5f1,0x51c,0x4ac)]=_0x58b997[_0x277574(0x440,0x4ce,0x465,0x51b)];const _0x48fa1e=_0x3c138b;function _0x44c445(_0x3f5aa1,_0x18314c,_0x2c7ec0,_0x46dffb){return _0x393a05(_0x18314c,_0x46dffb-0x152,_0x2c7ec0-0x1c8,_0x46dffb-0xb);}for(const _0x4ed305 of _0x21f056){const _0x36c379=_0x4ed305[_0x277574(0x3ca,0x438,0x2fd,0x36d)](':');if(_0x58b997[_0x44c445(0x2b4,0x3ae,0x2e3,0x331)](_0x36c379,-(-0x14b9+0x3ed+-0xfd*-0x11)))continue;const _0x2ee56a=_0x4ed305['substring'](-0x4*-0x1fd+-0x1f0a+0x2*0xb8b,_0x36c379)[_0x277574(0x430,0x3ef,0x4da,0x43f)](),_0x59e78c=_0x4ed305['substring'](_0x58b997[_0x44c445(0x17c,0xe5,0xfa,0x196)](_0x36c379,0x1c4c+-0x1*0x1acf+-0x17c))['trim']();if(_0x48fa1e[_0x2ee56a])_0x441a0d[_0x48fa1e[_0x2ee56a]]=_0x59e78c;else _0x2ee56a&&_0x59e78c&&console['log'](_0x277574(0x46d,0x3e1,0x40b,0x446)+_0x277574(0x493,0x3e6,0x40a,0x4df)+_0x44c445(0x20a,0x296,0x1d0,0x1c7)+'字段\x20\x22'+_0x2ee56a+'\x22');}if(!_0x441a0d[_0x44c445(0x2fb,0x1b2,0x240,0x279)]){if(_0x58b997['cHjgx'](_0x58b997[_0x277574(0x4e3,0x541,0x5a1,0x586)],_0x58b997['BRbcQ']))return null;else _0x28cb7e['matchedOut'+_0x277574(0x42a,0x448,0x4c7,0x4f8)]['push'](_0x3a852f[_0x44c445(0x201,0x172,0x26a,0x211)]);}return console[_0x277574(0x4a3,0x3f1,0x491,0x528)](_0x44c445(0x24b,0x18b,0x2d6,0x256)+_0x44c445(0x28c,0x32f,0x1e4,0x27c)+_0x277574(0x3e3,0x424,0x3fe,0x41c)+_0x277574(0x3d2,0x35c,0x375,0x45d),_0x441a0d),_0x441a0d;}function extractCharacterAndOutfitTags(_0x424b9d){const _0x505d35={'EpCod':'没有检测到需要更新的'+'内容','eOBOa':function(_0x14a923,_0x26dd5f){return _0x14a923(_0x26dd5f);},'eRQEc':function(_0x3bd5c6,_0x277bb4){return _0x3bd5c6!==_0x277bb4;},'qYLWh':function(_0x301708,_0x472e3c){return _0x301708===_0x472e3c;},'TKLrh':_0x139e19(0x2b6,0x2ba,0x251,0x264),'arAIe':_0x1791a9(0x3e1,0x430,0x3dd,0x3e5),'jvHFG':_0x139e19(0x3b9,0x2e3,0x3b4,0x385),'FxZlx':'character','TbTzg':_0x1791a9(0x52a,0x4a9,0x3d9,0x50f),'Memji':function(_0x416c1b,_0x399f9c){return _0x416c1b(_0x399f9c);},'ONEKQ':function(_0x5b422f,_0x12ba81){return _0x5b422f===_0x12ba81;},'KCGJs':'ydXLW','rqagi':_0x1791a9(0x52c,0x484,0x3ab,0x55b),'ubAHL':_0x139e19(0x36b,0x341,0x41c,0x33a)},_0x8ed4c9=[];_0x424b9d=_0x424b9d[_0x139e19(0x37a,0x373,0x371,0x2c9)](/<thinking>[\s\S]*?<\/thinking>/gi,'')['trim']();const _0xd76bf8=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x4375a4;while(_0x505d35[_0x1791a9(0x45e,0x483,0x446,0x48b)](_0x4375a4=_0xd76bf8[_0x139e19(0x3d3,0x498,0x326,0x47a)](_0x424b9d),null)){if(_0x505d35[_0x139e19(0x32a,0x341,0x2f1,0x35c)](_0x505d35[_0x139e19(0x39c,0x405,0x3be,0x3c1)],_0x505d35[_0x139e19(0x39c,0x3ff,0x3fc,0x447)])){const _0x3af4c4=_0x4375a4[-0x2291+-0x25db+0x486d],_0x37fe68=preprocessTagContent(_0x4375a4[0x91*0x19+-0x12be*0x1+-0x2f*-0x19]),_0x4440cf=_0x4375a4['index'];if(_0x3af4c4==='人物'){const _0x518c1c=parseCharacterData(_0x37fe68);if(_0x518c1c){if(_0x505d35['qYLWh'](_0x505d35[_0x139e19(0x340,0x3d9,0x288,0x382)],_0x505d35['jvHFG']))return null;else{const _0x54881a={};_0x54881a[_0x1791a9(0x3ad,0x3c6,0x3cf,0x42a)]=_0x505d35[_0x1791a9(0x4a4,0x441,0x3b2,0x3e5)],_0x54881a[_0x1791a9(0x4cc,0x416,0x47f,0x3a6)]=_0x518c1c,_0x54881a[_0x1791a9(0x520,0x50f,0x58f,0x512)]=_0x4440cf,_0x54881a[_0x1791a9(0x3ed,0x3a5,0x3cf,0x2e0)+_0x139e19(0x2b9,0x326,0x339,0x34e)]=[],_0x8ed4c9[_0x1791a9(0x353,0x404,0x482,0x36a)](_0x54881a);}}}else{if(_0x3af4c4==='服装'){if(_0x505d35[_0x1791a9(0x4df,0x489,0x422,0x449)](_0x505d35[_0x139e19(0x284,0x33f,0x26e,0x341)],_0x139e19(0x34a,0x3ff,0x3fd,0x2ee))){const _0x293ef5=_0x505d35[_0x139e19(0x296,0x2a1,0x22d,0x332)](parseOutfitData,_0x37fe68);if(_0x293ef5){if(_0x505d35['ONEKQ'](_0x505d35[_0x1791a9(0x5a5,0x53c,0x565,0x4a3)],_0x505d35[_0x139e19(0x290,0x246,0x1e0,0x2a3)])){_0x4ce47c[_0x1791a9(0x532,0x49a,0x4ab,0x3e2)](_0x505d35[_0x139e19(0x35d,0x375,0x2a4,0x2fe)]);return;}else{const _0x91979e={};_0x91979e[_0x1791a9(0x395,0x3c6,0x3c4,0x30d)]=_0x1791a9(0x53b,0x4ca,0x43e,0x54e),_0x91979e[_0x139e19(0x2b7,0x27c,0x215,0x1f5)]=_0x293ef5,_0x91979e[_0x1791a9(0x5a0,0x50f,0x5b9,0x5e8)]=_0x4440cf,_0x8ed4c9[_0x1791a9(0x374,0x404,0x38d,0x42e)](_0x91979e);}}}else _0x2c0f50['value']=_0x346085[_0x132ab5],_0x505d35[_0x139e19(0x24a,0x182,0x210,0x2d0)](_0x590a17,_0x3ffb59)[_0x139e19(0x3bd,0x3ce,0x3ea,0x314)](_0x1791a9(0x537,0x45a,0x463,0x46e));}}}else{const _0x46f5af=_0xb5520f[_0x1791a9(0x32b,0x396,0x448,0x36b)](_0xe40c28,arguments);return _0x4c5e28=null,_0x46f5af;}}_0x8ed4c9[_0x1791a9(0x4a1,0x514,0x561,0x46e)]((_0x3dc911,_0x281291)=>_0x3dc911[_0x139e19(0x3b0,0x452,0x340,0x2ed)]-_0x281291[_0x139e19(0x3b0,0x3ac,0x419,0x3de)]);let _0x4de566=null;const _0x67003f=[],_0x33e3dd=[];for(const _0x5425a4 of _0x8ed4c9){if(_0x5425a4[_0x1791a9(0x3ce,0x3c6,0x3d1,0x3f6)]===_0x505d35[_0x139e19(0x2e2,0x214,0x254,0x26c)])_0x4de566=_0x5425a4,_0x67003f[_0x139e19(0x2a5,0x25b,0x35e,0x2e7)](_0x5425a4);else _0x5425a4[_0x139e19(0x267,0x20c,0x1d3,0x227)]===_0x505d35[_0x139e19(0x3d2,0x40f,0x2f4,0x3ba)]&&(_0x4de566?_0x4de566[_0x1791a9(0x3a0,0x3a5,0x32f,0x361)+_0x139e19(0x2b9,0x385,0x337,0x2bf)]['push'](_0x5425a4[_0x139e19(0x2b7,0x2ac,0x2ad,0x202)]):_0x33e3dd[_0x139e19(0x2a5,0x2bc,0x367,0x322)](_0x5425a4[_0x1791a9(0x49f,0x416,0x47e,0x3fb)]));}function _0x1791a9(_0x2fce01,_0x3a40ae,_0x274cc9,_0x208d9c){return _0x393a05(_0x2fce01,_0x3a40ae-0x357,_0x274cc9-0x51,_0x208d9c-0xd2);}function _0x139e19(_0x2bf55a,_0x9678fb,_0x597bbe,_0x843a69){return _0x393a05(_0x597bbe,_0x2bf55a-0x1f8,_0x597bbe-0xd6,_0x843a69-0xa7);}return{'characters':_0x67003f[_0x1791a9(0x38f,0x397,0x2d9,0x3ac)](_0x14084c=>({..._0x14084c[_0x1791a9(0x3c6,0x416,0x4d7,0x3c3)],'matchedOutfits':_0x14084c[_0x1791a9(0x2c7,0x3a5,0x360,0x2cd)+_0x139e19(0x2b9,0x246,0x1f8,0x365)]})),'outfits':_0x33e3dd};}function getCurrentCharacterPreset(){const _0x5d69ab={'eoDta':function(_0x1b5180,_0x7e655d){return _0x1b5180(_0x7e655d);},'qUjNO':function(_0x4db1e4,_0x45721b){return _0x4db1e4!==_0x45721b;},'thZmA':_0x4561be(0x2d4,0x25e,0x28c,0x235)},_0x5508df=extension_settings[extensionName],_0xadc415=_0x5508df['characterP'+_0x1b2e12(0x361,0x29b,0x2b6,0x232)];function _0x1b2e12(_0x1e2a54,_0x4d8aa5,_0x3a0a82,_0x14e06e){return _0x393a05(_0x14e06e,_0x4d8aa5-0x12f,_0x3a0a82-0xc8,_0x14e06e-0xa1);}if(!_0xadc415||!_0x5508df[_0x4561be(0x39e,0x3c5,0x39f,0x34a)+'resets'][_0xadc415]){if(_0x5d69ab['qUjNO'](_0x5d69ab['thZmA'],_0x5d69ab['thZmA']))_0x4c3c25[_0x4561be(0x366,0x292,0x2b1,0x3b2)+_0x4561be(0x38b,0x415,0x3f9,0x3a9)](_0x271305[_0x1b2e12(0x2c7,0x1f1,0x215,0x24d)+'ODIFY_GET_'+_0x4561be(0x3e1,0x3d8,0x422,0x39c)+_0x4561be(0x29d,0x209,0x2e8,0x1c5)],_0x37ae6e),_0x5d69ab['eoDta'](_0x288ea5,new _0x13007b(_0x1b2e12(0x160,0x205,0x257,0x2c6)+'时'));else return null;}const _0x48a86a={};function _0x4561be(_0x2734ba,_0x172bef,_0x33047b,_0x1ef6ec){return _0x393a05(_0x33047b,_0x2734ba-0x25c,_0x33047b-0x58,_0x1ef6ec-0xa0);}return _0x48a86a['id']=_0xadc415,_0x48a86a[_0x4561be(0x31b,0x2dd,0x253,0x331)]=_0x5508df[_0x1b2e12(0x1c3,0x271,0x2e1,0x222)+_0x1b2e12(0x2a1,0x26f,0x32b,0x2cc)][_0xadc415],_0x48a86a;}function buildCharacterText(_0x563e6f){const _0xbc00e9={};_0xbc00e9[_0x24544c(0x5a6,0x57c,0x4aa,0x583)]=_0x24544c(0x606,0x519,0x590,0x548);const _0x47dce9=_0xbc00e9,_0x2528d4=_0x563e6f[_0x24544c(0x46a,0x423,0x455,0x4fc)];function _0x3beb63(_0xd0d740,_0x5ee2d8,_0x22c8ca,_0x32f2af){return _0x393a05(_0x5ee2d8,_0x22c8ca- -0x2d9,_0x22c8ca-0x9a,_0x32f2af-0x18d);}function _0x24544c(_0x92c3e4,_0x1beba1,_0x151a6a,_0x2c4a98){return _0x393a05(_0x151a6a,_0x2c4a98-0x43d,_0x151a6a-0x1b8,_0x2c4a98-0x1db);}let _0x380e66=_0x47dce9[_0x3beb63(-0x23e,-0x1af,-0x193,-0x136)];return _0x380e66+=_0x24544c(0x42c,0x4c1,0x4dd,0x486)+(_0x2528d4['nameCN']||'')+'\x0a',_0x380e66+='英文名称:\x20'+(_0x2528d4[_0x24544c(0x5d6,0x4cf,0x5b5,0x591)]||'')+'\x0a',_0x380e66+=_0x24544c(0x553,0x622,0x58e,0x621)+(_0x2528d4[_0x3beb63(-0x16f,-0x20f,-0x21f,-0x27c)+'raits']||'')+'\x0a',_0x380e66+='五官外貌:\x20'+(_0x2528d4[_0x3beb63(-0xf0,-0x1d5,-0x13c,-0xe4)+_0x24544c(0x440,0x41f,0x3ea,0x4c7)]||'')+'\x0a',_0x380e66+=_0x24544c(0x643,0x6a5,0x598,0x5ea)+(_0x2528d4['facialFeat'+'uresBack']||'')+'\x0a',_0x380e66+='上半身SFW:\x20'+(_0x2528d4['upperBodyS'+'FW']||'')+'\x0a',_0x380e66+='上半身SFW背面:\x20'+(_0x2528d4[_0x3beb63(-0x20c,-0x15f,-0x160,-0x83)+_0x24544c(0x586,0x516,0x548,0x4da)]||'')+'\x0a',_0x380e66+=_0x24544c(0x445,0x457,0x4ff,0x4e5)+(_0x2528d4[_0x3beb63(-0x2b9,-0x26a,-0x1f7,-0x26f)+'W']||'')+'\x0a',_0x380e66+=_0x24544c(0x66f,0x6c0,0x618,0x60f)+(_0x2528d4[_0x24544c(0x4aa,0x491,0x494,0x51f)+_0x3beb63(-0x19f,-0x11d,-0xfb,-0x1c2)]||'')+'\x0a',_0x380e66+=_0x3beb63(-0x349,-0x1b3,-0x26c,-0x207)+(_0x2528d4[_0x24544c(0x5bf,0x46c,0x50b,0x4eb)+_0x3beb63(-0xd8,-0x233,-0x1a1,-0x1d0)]||'')+'\x0a',_0x380e66+=_0x24544c(0x5e2,0x4db,0x48b,0x505)+'\x20'+(_0x2528d4[_0x24544c(0x466,0x4bb,0x43c,0x4eb)+_0x24544c(0x520,0x51c,0x587,0x4e6)]||'')+'\x0a',_0x380e66+='下半身NSFW:\x20'+(_0x2528d4[_0x24544c(0x5ce,0x634,0x566,0x604)+'FW']||'')+'\x0a',_0x380e66+=_0x3beb63(-0x1c9,-0x2c3,-0x1ea,-0x2ac)+'\x20'+(_0x2528d4[_0x24544c(0x64b,0x5a2,0x659,0x604)+'FWBack']||'')+'\x0a',_0x380e66+=_0x24544c(0x644,0x54d,0x673,0x5eb),_0x380e66;}export async function handleCharacterPromptModify(_0x166c06,_0x3b95c6=[]){function _0x35caad(_0x57deff,_0x437dca,_0x2d0dc6,_0x22eb82){return _0x393a05(_0x437dca,_0x22eb82- -0x176,_0x2d0dc6-0x1c3,_0x22eb82-0x10d);}const _0xae7b89={'TErAl':function(_0x10fa68,_0x2d7c92){return _0x10fa68(_0x2d7c92);},'vsJXI':function(_0x4a1503,_0x2f3206){return _0x4a1503!==_0x2f3206;},'FsyfU':function(_0x29d66b,_0x5e8461,_0x122da4,_0xf9b2d5,_0x3b1dfb){return _0x29d66b(_0x5e8461,_0x122da4,_0xf9b2d5,_0x3b1dfb);},'QYsYF':_0x35caad(-0xa1,-0x205,-0x199,-0x12b),'IfJVO':_0x35caad(0x7,-0x12,-0x3,-0x72)+_0x220e3a(0x519,0x5cb,0x483,0x53c)+_0x220e3a(0x3e1,0x50a,0x3ef,0x4a1)+'ed','DzTBR':_0x220e3a(0x5db,0x626,0x5b9,0x5eb)+'message\x20at'+_0x220e3a(0x56a,0x4b1,0x57f,0x553),'BoInd':_0x220e3a(0x49b,0x5a4,0x4c5,0x516)+_0x220e3a(0x4a0,0x5f8,0x559,0x53c)+_0x35caad(-0x13a,-0x3a,-0x10b,-0xf9)+_0x220e3a(0x4e1,0x4de,0x558,0x55e)+'er\x20prompt\x20'+_0x35caad(-0x136,-0x126,-0x119,-0xc7)+'uest...','sJzzt':'[character'+'PromptModi'+_0x35caad(-0x76,-0x46,-0xd9,-0x79)+_0x35caad(-0x1be,-0x17a,-0x1d1,-0xf3),'GFEhB':function(_0x3fce44){return _0x3fce44();},'HsBom':function(_0x2354bb,_0x15e69c){return _0x2354bb===_0x15e69c;},'fqera':_0x35caad(0x3f,0x88,0x87,0x53),'onhKF':_0x35caad(0x6b,-0x30,0x2a,-0x72)+_0x35caad(-0x5c,-0x14,-0xdb,-0x4c)+_0x35caad(0x56,-0x54,-0xe5,-0x15)+_0x35caad(-0x106,-0xcc,-0xcc,-0x29),'sLzQL':_0x35caad(-0x13b,0x64,-0xdc,-0x72)+_0x35caad(0x13,-0xbf,-0x7f,-0x4c)+_0x35caad(0x12,-0x9,-0x4,-0x2)+_0x220e3a(0x5b8,0x55f,0x64b,0x58f),'OEifw':'[character'+'PromptModi'+_0x220e3a(0x59b,0x553,0x4c0,0x586)+_0x35caad(0x11e,0x0,-0x67,0x48)+':','wvxds':'[character'+_0x220e3a(0x4a4,0x570,0x4ae,0x53c)+_0x220e3a(0x4bf,0x5db,0x5cc,0x59d)+_0x220e3a(0x636,0x5d6,0x5f1,0x5c8)+'r\x20text:','xMDJe':function(_0x50556e,_0x17dfe5,_0x1152f4){return _0x50556e(_0x17dfe5,_0x1152f4);},'iziug':'char_modif'+'y','kaOWg':function(_0xf77483){return _0xf77483();},'vJSFa':'[character'+_0x220e3a(0x569,0x5c9,0x469,0x53c)+'fy]\x20Charac'+_0x35caad(-0xc5,-0x186,-0x174,-0x10b)+_0x220e3a(0x46d,0x4cb,0x3f4,0x49a)+_0x220e3a(0x6bd,0x61b,0x5d4,0x5ee),'CUvJD':function(_0x1496e8,_0x354409){return _0x1496e8(_0x354409);},'tfYmc':_0x220e3a(0x575,0x5c3,0x56f,0x516)+_0x220e3a(0x4e1,0x606,0x486,0x53c)+_0x35caad(0xce,0x69,0x32,0x9)+'后:','UtXAl':_0x220e3a(0x5d2,0x5e9,0x603,0x530),'EjVEF':_0x220e3a(0x51f,0x5c8,0x52a,0x516)+_0x220e3a(0x5aa,0x539,0x5d5,0x53c)+'fy]\x20User\x20r'+_0x35caad(0x22,0x16,-0xc9,-0x53)+_0x35caad(-0x66,-0xf0,-0xdb,-0x2d)+_0x220e3a(0x417,0x3d7,0x448,0x44f),'oMlWi':'{{当前角色}}','eRXlI':_0x220e3a(0x495,0x4bc,0x576,0x516)+'PromptModi'+_0x220e3a(0x62c,0x546,0x63d,0x5c5)+_0x35caad(-0xf7,-0xa5,-0xf9,-0x103),'NcoQM':function(_0x46b700,_0x287115){return _0x46b700>_0x287115;},'xUjAc':_0x220e3a(0x61a,0x504,0x63f,0x593),'HArnx':function(_0xb0cf8a,_0x1dec0b){return _0xb0cf8a>=_0x1dec0b;},'wQbAd':function(_0x5ef969,_0x30c965,_0x250e6c,_0x18cccb,_0x23f53d){return _0x5ef969(_0x30c965,_0x250e6c,_0x18cccb,_0x23f53d);},'NTAxQ':function(_0x3bd42b,_0x5e42e7,_0x584f74){return _0x3bd42b(_0x5e42e7,_0x584f74);},'UhAMZ':'KdznI','GGGVK':_0x35caad(-0x66,0x7,-0xa,0x10),'GemfN':_0x220e3a(0x4e3,0x5fa,0x51b,0x599),'yfTZN':function(_0x484c5d,_0x350485){return _0x484c5d===_0x350485;},'aYkjQ':'未在\x20LLM\x20输出中'+_0x35caad(-0x154,-0x90,-0x187,-0x134),'zFxJq':_0x220e3a(0x592,0x557,0x56e,0x516)+'PromptModi'+'fy]\x20Raw\x20LL'+'M\x20output\x20f'+_0x220e3a(0x518,0x418,0x533,0x4cb)+_0x35caad(-0x105,-0xa5,-0x89,-0x62),'DhRoe':function(_0x51f790,_0x38c2a5){return _0x51f790>_0x38c2a5;},'uAdsa':'CrEov','kOrMR':'NKlpY','xbwDx':_0x35caad(-0xf7,-0x7,-0x78,-0x4d),'oWwaS':function(_0x5a3d49,_0x3c7d68){return _0x5a3d49>_0x3c7d68;},'EWTWq':_0x220e3a(0x5fe,0x59e,0x532,0x525),'LTAaD':_0x35caad(-0x132,-0xb4,-0xab,-0xf2)+'完成！','FqsMa':'[character'+_0x220e3a(0x4dc,0x50b,0x5a0,0x53c)+_0x220e3a(0x5bd,0x611,0x511,0x5e0)};console[_0x220e3a(0x625,0x4e7,0x48b,0x54c)](_0xae7b89[_0x35caad(-0x7e,-0x108,-0x168,-0xa8)]),toastr[_0x35caad(-0xd2,0x35,-0xe2,-0x33)](_0xae7b89[_0x35caad(-0x6b,-0x61,0xd8,-0x4)]);function _0x220e3a(_0x1999ef,_0x397b20,_0x51f158,_0x33ee16){return _0x393a05(_0x397b20,_0x33ee16-0x412,_0x51f158-0x69,_0x33ee16-0x1d6);}try{const _0x181cec=_0xae7b89[_0x35caad(-0x1bb,-0x19b,-0x1a8,-0xe3)](getContext),_0x4c834e=extension_settings[extensionName],_0x18a0ac=getCurrentCharacterPreset();if(!_0x18a0ac){if(_0xae7b89[_0x220e3a(0x4cd,0x46b,0x442,0x491)](_0xae7b89[_0x35caad(0x28,-0x27,0x22,-0xb0)],'vsTAJ'))_0xae7b89[_0x220e3a(0x57f,0x480,0x473,0x52d)](_0xec674,_0x26c5a5),_0x3a65ce=null;else{toastr[_0x35caad(0x2b,0x63,-0x35,-0x76)]('请先选择一个角色预设');return;}}console[_0x35caad(-0xf1,0x94,0x63,-0x3c)](_0xae7b89[_0x220e3a(0x467,0x3dc,0x42c,0x45e)],_0x18a0ac['id']);const _0x506f06=_0x18a0ac[_0x35caad(-0x6e,-0x11d,-0x15e,-0xb7)][_0x220e3a(0x5b5,0x515,0x5fb,0x557)+_0x220e3a(0x59a,0x62f,0x5f4,0x59f)]||'',_0x1872c2=_0x18a0ac['data'][_0x35caad(-0x44,0x5f,-0xd8,-0x31)+_0x220e3a(0x491,0x473,0x43b,0x4c4)]||'',_0x2ad5fa=_0x18a0ac[_0x35caad(-0x15f,-0x3d,-0x127,-0xb7)]['generation'+_0x220e3a(0x692,0x5ff,0x53c,0x5cc)]||{};console[_0x35caad(0x88,-0xc3,-0xae,-0x3c)](_0xae7b89[_0x35caad(0x23,-0x73,-0x1f,-0x5f)],_0x506f06),console[_0x35caad(-0x5c,0x6,0x9e,-0x3c)](_0xae7b89[_0x220e3a(0x60e,0x560,0x574,0x596)],_0x1872c2),console[_0x220e3a(0x4de,0x5a3,0x4a8,0x54c)](_0x35caad(0x57,-0xc1,-0x107,-0x72)+_0x35caad(0x2b,0x8d,-0x10b,-0x4c)+_0x220e3a(0x547,0x4e7,0x518,0x586)+_0x220e3a(0x50e,0x51c,0x4b6,0x54d),_0x2ad5fa);const _0x14cbcd=_0x166c06||'',_0x135aed=[];_0x166c06&&_0x135aed[_0x35caad(-0x13c,-0x1a,-0x60,-0xc9)](_0x166c06);_0x506f06&&_0x135aed['push'](_0x506f06);_0x1872c2&&_0x135aed[_0x220e3a(0x3f6,0x4ec,0x572,0x4bf)](_0x1872c2);const _0x313c82=_0x135aed['join']('\x0a');console[_0x220e3a(0x5e5,0x621,0x603,0x54c)](_0xae7b89[_0x220e3a(0x4da,0x573,0x4bd,0x56f)],_0x313c82);let _0x56a276=_0xae7b89[_0x35caad(-0x154,-0xba,-0xc9,-0xc0)](buildPromptForRequestType,_0xae7b89['iziug'],_0x14cbcd);const _0x35b202=_0xae7b89['TErAl'](generateCharacterListText,_0x313c82),_0x3f2e64=generateOutfitEnableListText(),_0x42fc30=_0xae7b89['kaOWg'](generateCommonCharacterListText);console[_0x220e3a(0x56c,0x624,0x50c,0x54c)](_0xae7b89[_0x35caad(0x4c,0x9a,-0x9c,0x1f)],_0x35b202);const _0x802bc8=_0x181cec['chatMetada'+'ta']?.['variables']||{},_0x3ba00e=buildCharacterText(_0x18a0ac);_0x56a276=_0xae7b89[_0x220e3a(0x4f7,0x544,0x4f4,0x4fd)](mergeAdjacentMessages,_0x56a276),console[_0x220e3a(0x55e,0x4ed,0x502,0x54c)](_0xae7b89[_0x220e3a(0x537,0x58f,0x5db,0x56c)],_0x56a276);const _0x35402b=_0xae7b89['xMDJe'](findMessageIndexWithPlaceholder,_0x56a276,_0xae7b89[_0x220e3a(0x51c,0x612,0x578,0x545)]);console['log'](_0xae7b89['EjVEF'],_0x35402b);const _0x2a9d17={..._0x2ad5fa,..._0x802bc8},_0x189fca={};_0x189fca['context']=_0x506f06,_0x189fca[_0x35caad(-0x2b,0x5d,0x24,-0x41)+_0x220e3a(0x48a,0x484,0x405,0x468)]=_0x1872c2,_0x189fca[_0x220e3a(0x520,0x5a1,0x594,0x592)]=_0x2a9d17,_0x189fca[_0x35caad(0x40,0x21,-0xb,-0x90)]=_0x166c06||'',_0x189fca['characterL'+_0x220e3a(0x4e3,0x446,0x4b7,0x471)]=_0x35b202,_0x189fca[_0x220e3a(0x572,0x5e7,0x5c2,0x536)+'leListText']=_0x3f2e64,_0x189fca[_0x220e3a(0x60a,0x506,0x568,0x56b)+_0x220e3a(0x639,0x585,0x53b,0x5e7)+'ext']=_0x42fc30;const _0x7d90b2=_0x189fca,{messages:_0x941950,replacedVariables:_0x38cb9a}=_0xae7b89['xMDJe'](replaceAllPlaceholders,_0x56a276,_0x7d90b2);_0x56a276=_0x941950,_0x56a276=_0xec3cba(_0x56a276,_0xae7b89[_0x220e3a(0x513,0x64e,0x57d,0x5bc)],_0x3ba00e,_0x38cb9a),console[_0x35caad(-0x31,-0x8,0x20,-0x3c)](_0xae7b89[_0x220e3a(0x5d4,0x4ee,0x624,0x5a8)],_0x56a276);let _0x31a34f='';if(_0xae7b89[_0x35caad(-0x136,-0xd7,-0x3f,-0xef)](_0x38cb9a[_0x220e3a(0x4b7,0x446,0x4de,0x4ee)],0x1*-0x1cdb+0x1a54+0x287)){if(_0xae7b89[_0x35caad(-0x34,0x9,-0xd1,-0xc6)](_0xae7b89[_0x35caad(-0x2e,-0xb1,-0xa4,-0x28)],_0xae7b89[_0x35caad(-0xb3,-0x21,-0xe0,-0x28)])){if(_0xae7b89[_0x35caad(-0x111,-0x11e,-0x90,-0xc6)](_0x19bdeb['id'],_0x3ae0bf))return;_0xbb8a48[_0x220e3a(0x58c,0x57f,0x513,0x51c)+_0x220e3a(0x573,0x519,0x49b,0x541)](_0x16cc47['LLM_CHAR_M'+_0x35caad(-0xca,-0x1f,-0xd5,-0x25)+_0x220e3a(0x66f,0x511,0x5a7,0x597)+'PONSE'],_0x461103),_0xae7b89[_0x220e3a(0x5dd,0x46e,0x5e9,0x52d)](_0x1438f1,_0xd03393[_0x35caad(-0x4e,-0xb8,-0x51,-0xe1)]);}else _0x31a34f='诊断：检测到以下变量'+_0x35caad(-0x153,-0xec,-0x95,-0x130)+[..._0x38cb9a][_0x35caad(-0x8b,-0x1c,0x6c,-0x48)]('、')+'\x0a';}_0x3b95c6&&_0xae7b89[_0x220e3a(0x405,0x4c2,0x556,0x499)](_0x3b95c6[_0x220e3a(0x4ca,0x65d,0x635,0x5a0)],-0x187c+0x17e2+0x4d*0x2)&&_0xae7b89[_0x35caad(0x3,-0xd3,-0xf2,-0x1e)](_0x35402b,-0x2b5*0xd+-0xaab*-0x3+0x330)&&(_0x56a276=_0xae7b89[_0x220e3a(0x4af,0x45c,0x595,0x4df)](attachImagesToMessage,_0x56a276,_0x35402b,_0x3b95c6,_0xae7b89[_0x35caad(-0x1b9,-0x129,-0x18e,-0xf0)]),console[_0x220e3a(0x4fe,0x4dd,0x626,0x54c)](_0xae7b89[_0x220e3a(0x5be,0x6b5,0x601,0x5f5)],_0x3b95c6[_0x220e3a(0x586,0x4fe,0x5c4,0x5a0)],_0xae7b89['DzTBR'],_0x35402b));_0xae7b89[_0x35caad(-0x26,-0x5e,-0x15c,-0xc0)](updateCombinedPrompt,_0x56a276,_0x31a34f);const _0x338454={};_0x338454[_0x35caad(0x7d,0x7d,0x98,0x56)]=0x493e0;const _0xce6094=await _0xae7b89[_0x35caad(-0x51,0x2c,-0x58,0x79)](LLM_CHAR_MODIFY,_0x56a276,_0x338454);console['log'](_0x220e3a(0x500,0x46b,0x5c7,0x516)+'PromptModi'+'fy]\x20LLM\x20ou'+'tput:',_0xce6094);if(!_0xce6094){if(_0xae7b89[_0x35caad(-0x120,-0xc1,-0xb4,-0x113)]!==_0xae7b89[_0x35caad(-0x17a,-0x109,-0x47,-0xff)]){toastr[_0x220e3a(0x517,0x490,0x49c,0x512)](_0xae7b89[_0x220e3a(0x5d5,0x602,0x5b9,0x5ae)]);return;}else _0xee2ff1=_0xae7b89[_0x220e3a(0x4ce,0x59b,0x532,0x590)](_0x551951,_0x5b704d,_0xec6d07,_0x3c9474,_0xae7b89[_0x35caad(-0x76,-0x47,-0x52,-0xf0)]),_0x3d839c[_0x35caad(0x4e,-0xe1,-0x11a,-0x3c)](_0xae7b89[_0x35caad(0xf4,0x1c,0x10f,0x6d)],_0x2b383a[_0x220e3a(0x5a2,0x4e9,0x528,0x5a0)],_0xae7b89[_0x220e3a(0x526,0x565,0x4f3,0x537)],_0x56860f);}const _0x2c4d4c=_0xae7b89[_0x35caad(-0x11d,-0x26,-0xd4,-0x8b)](extractCharacterAndOutfitTags,_0xce6094);if(_0xae7b89[_0x35caad(-0xdb,-0x2b,-0x5,-0xd0)](_0x2c4d4c[_0x220e3a(0x62a,0x635,0x507,0x58d)][_0x35caad(0xc4,-0x93,-0x14,0x18)],0x1f66*0x1+-0x1924+-0x216*0x3)&&_0xae7b89[_0x35caad(-0x98,-0x1a4,-0x175,-0xd0)](_0x2c4d4c[_0x35caad(0xb0,-0x10,-0x64,0x33)][_0x35caad(-0x29,0x49,0x86,0x18)],-0x17f*0xb+0x15ee+-0x1*0x579)){toastr[_0x35caad(-0x30,-0x47,0x71,0x3b)](_0xae7b89[_0x35caad(0x28,-0x63,-0x3c,-0x5a)]),console[_0x35caad(-0xcf,0x64,0x4f,-0x3c)](_0x35caad(-0xc2,0x2c,-0xde,-0x72)+'PromptModi'+_0x35caad(0x29,-0xf9,-0x125,-0x82)+_0x220e3a(0x502,0x443,0x46b,0x488)+'fit\x20tags\x20f'+_0x220e3a(0x59b,0x514,0x5ab,0x4dc)+_0x35caad(0x7d,0xe8,0x8c,0x59)),console['log'](_0xae7b89['zFxJq'],_0xce6094);return;}console[_0x35caad(0x5f,-0x2c,0x2f,-0x3c)]('[character'+_0x35caad(-0x10b,-0x5f,-0x5,-0x4c)+_0x35caad(0x8b,0x1a,-0x87,0x1e)+_0x220e3a(0x48b,0x4c4,0x484,0x46c),_0x2c4d4c);if(_0xae7b89[_0x35caad(-0xdf,0x72,-0xcb,-0x46)](_0x2c4d4c['characters'][_0x35caad(-0x86,0xf3,-0x1f,0x18)],-0x2*0xd+-0x228b+0x22a5)){if(_0xae7b89[_0x220e3a(0x475,0x436,0x580,0x4b8)](_0x220e3a(0x563,0x60c,0x47c,0x531),_0xae7b89[_0x35caad(0xb6,0x3e,-0x4d,0xd)]))return _0x2fef49;else{const _0xa3d863=_0x2c4d4c[_0x35caad(0x79,-0xa3,0xbc,0x5)][-0x2377+0x1*-0x621+0x14cc*0x2];await updateCharacterPresetFromLLM(_0x18a0ac['id'],_0xa3d863);}}const _0x48f4d6=[..._0x2c4d4c[_0x220e3a(0x677,0x5bb,0x609,0x5bb)]];for(const _0x360221 of _0x2c4d4c['characters']){_0x360221[_0x35caad(-0x1f3,-0x1bb,-0x1b5,-0x128)+'fits']&&_0x360221['matchedOut'+_0x35caad(-0x45,-0xa4,-0x25,-0xb5)][_0x220e3a(0x625,0x612,0x519,0x5a0)]>-0x1be*0xd+0xc00+-0x2*-0x553&&(_0xae7b89['yfTZN'](_0xae7b89[_0x35caad(0x24,-0xbf,0x45,-0x59)],_0xae7b89[_0x35caad(0x53,0x2e,-0x6,0x4a)])?_0x195b5c=_0x35caad(0x47,-0x54,0xdd,0x4d)+_0x220e3a(0x4f5,0x442,0x52d,0x458)+[..._0x175932]['join']('、')+'\x0a':_0x48f4d6[_0x220e3a(0x566,0x4d1,0x465,0x4bf)](..._0x360221[_0x35caad(-0xce,-0x1b2,-0x1dc,-0x128)+_0x220e3a(0x46c,0x516,0x3fc,0x4d3)]));}if(_0xae7b89[_0x35caad(0x17,-0xf0,-0x9d,-0x68)](_0x48f4d6[_0x35caad(-0x20,0x19,-0x70,0x18)],0x1a75*-0x1+0x1809+0x4*0x9b)){if(_0xae7b89[_0x35caad(-0x95,-0x6,-0xc7,-0x39)]!==_0xae7b89[_0x35caad(0x91,-0x3d,-0x6f,-0x39)]){const _0x6c544=_0x37de1e?function(){function _0x11fe2c(_0x3d7874,_0xdf015c,_0x1185d9,_0x4fb645){return _0x220e3a(_0x3d7874-0x149,_0xdf015c,_0x1185d9-0x2d,_0x1185d9- -0x36c);}if(_0x1953fc){const _0x9c4bd3=_0x114aa1[_0x11fe2c(0x116,0x159,0xe5,0xea)](_0xccf20e,arguments);return _0x225c4e=null,_0x9c4bd3;}}:function(){};return _0x4cb3fe=![],_0x6c544;}else await _0xae7b89[_0x220e3a(0x54a,0x47e,0x4b6,0x52d)](updateOutfitPresetsFromLLM,_0x48f4d6);}toastr[_0x220e3a(0x4a4,0x535,0x4f2,0x4a3)](_0xae7b89[_0x220e3a(0x5ec,0x4f9,0x483,0x52b)]);}catch(_0x2c323b){console[_0x35caad(0x14,-0x73,-0x14e,-0x76)](_0xae7b89[_0x35caad(-0xaa,-0x134,-0x84,-0xd6)],_0x2c323b),toastr[_0x35caad(0x63,-0x12d,-0x42,-0x76)](_0x35caad(0xcc,0x23,-0x5b,0x50)+'\x20'+_0x2c323b[_0x220e3a(0x439,0x44b,0x44c,0x45c)]);}}async function updateCharacterPresetFromLLM(_0x540e8e,_0x4d7733){const _0x3299e9={'JiPLt':function(_0x3ef234,_0x448fb8){return _0x3ef234(_0x448fb8);},'VqBsm':_0xffa98c(0x4a1,0x4b8,0x536,0x594),'emtLn':_0x2fab0(0xf5,0xb0,0x10d,0x74),'wVJfF':_0xffa98c(0x412,0x48f,0x487,0x4cf),'csYFY':_0xffa98c(0x611,0x585,0x4b9,0x501),'eajhJ':_0xffa98c(0x6d6,0x607,0x5f9,0x6d3),'ajhMh':_0x2fab0(0x1ab,0x180,0x1fe,0x2b5),'aRYoT':_0x2fab0(0x2df,0x1bb,0x240,0x23b),'XfFJU':_0x2fab0(0x1e1,0x247,0x204,0x1f7),'uhWgp':function(_0x8cecd9,_0x3e94a1){return _0x8cecd9!==_0x3e94a1;},'VdiqV':_0x2fab0(0x66,0x125,0x13b,0x14b),'zAJOP':_0xffa98c(0x60e,0x60d,0x6bf,0x6a0),'LRLmm':function(_0x3bfe63,_0x3f3375){return _0x3bfe63===_0x3f3375;},'fZLYm':'USJwh','JlSxj':_0x2fab0(0xd8,0x20,0xdc,0xe0)+'内容','kVZlc':_0x2fab0(0x264,0x278,0x274,0x321),'GGnog':'dutQW','iaXPU':_0xffa98c(0x590,0x50b,0x4aa,0x4f0),'MWtBJ':function(_0x5e0b54){return _0x5e0b54();},'LOVCU':_0xffa98c(0x513,0x55a,0x5ab,0x5e8)+_0xffa98c(0x561,0x487,0x4c3,0x4d2)+'cter','AnbdS':function(_0x1f5fb1,_0x26d62a){return _0x1f5fb1(_0x26d62a);},'ubQBX':function(_0x2f06f1,_0x52fd8b){return _0x2f06f1(_0x52fd8b);}},_0x5869be=extension_settings[extensionName],_0x38c6f7=_0x5869be[_0xffa98c(0x4d2,0x57c,0x4e2,0x618)+_0xffa98c(0x570,0x57a,0x4d7,0x64f)][_0x540e8e];if(!_0x38c6f7){toastr[_0x2fab0(0xb8,0xf1,0x194,0x1b9)](_0x3299e9[_0xffa98c(0x5a7,0x596,0x5d1,0x582)]);return;}const _0x52a64f={};function _0xffa98c(_0x147c27,_0x512cce,_0x6c4ae3,_0x476f73){return _0x393a05(_0x6c4ae3,_0x512cce-0x43a,_0x6c4ae3-0x138,_0x476f73-0x44);}_0x52a64f[_0xffa98c(0x4fe,0x561,0x553,0x627)]=_0x3299e9[_0xffa98c(0x49a,0x50c,0x56b,0x4fc)],_0x52a64f[_0x2fab0(0x1a8,0x218,0x1e8,0x15a)]='英文名称',_0x52a64f[_0xffa98c(0x443,0x4f4,0x4d0,0x445)+_0x2fab0(0x317,0x1e0,0x27f,0x200)]=_0x3299e9[_0xffa98c(0x58e,0x589,0x5d8,0x50a)],_0x52a64f['facialFeat'+_0x2fab0(0xf3,0x160,0x11e,0x112)]=_0x2fab0(0x2e8,0x33a,0x27a,0x26d),_0x52a64f[_0x2fab0(0x1ed,0x220,0x231,0x24b)+_0x2fab0(0x326,0x2b9,0x286,0x329)]=_0x3299e9[_0xffa98c(0x616,0x5af,0x530,0x5b2)],_0x52a64f[_0x2fab0(0x215,0x1a8,0x20d,0x237)+'FW']=_0x3299e9[_0x2fab0(0x254,0x1ed,0x1a5,0xde)],_0x52a64f[_0x2fab0(0x19e,0x2e0,0x20d,0x27e)+_0x2fab0(0x1ae,0xe5,0x131,0x184)]=_0x2fab0(0x110,0x158,0x19d,0x16b),_0x52a64f[_0xffa98c(0x5a6,0x51c,0x4f4,0x521)+'W']=_0x3299e9[_0xffa98c(0x571,0x4bf,0x559,0x4fa)],_0x52a64f['fullBodySF'+_0x2fab0(0x1fd,0x2a5,0x272,0x23b)]=_0x3299e9[_0xffa98c(0x464,0x49f,0x572,0x43a)],_0x52a64f[_0xffa98c(0x52d,0x4e8,0x52d,0x555)+_0xffa98c(0x49b,0x572,0x525,0x52f)]=_0xffa98c(0x444,0x4aa,0x501,0x527),_0x52a64f[_0x2fab0(0xaf,0x91,0x142,0x12a)+_0xffa98c(0x483,0x4e3,0x5b4,0x4ef)]='上半身NSFW背面',_0x52a64f[_0x2fab0(0x2ff,0x32c,0x25b,0x2e8)+'FW']=_0x3299e9[_0x2fab0(0x15e,0xab,0x157,0xcb)],_0x52a64f[_0xffa98c(0x63f,0x601,0x676,0x66d)+_0xffa98c(0x54f,0x4d7,0x554,0x4dd)]='下半身NSFW背面';const _0x55f3f7=_0x52a64f;let _0x4098ba=-0xdc9+0x193e+0x1*-0xb75;for(const _0x5d6946 in _0x55f3f7){if(_0x4d7733[_0x5d6946]&&_0x3299e9[_0x2fab0(0x1ac,0x26c,0x249,0x1a9)](_0x4d7733[_0x5d6946],_0x38c6f7[_0x5d6946])){if(_0x3299e9[_0x2fab0(0x27a,0x1c5,0x249,0x1eb)](_0x3299e9['VdiqV'],_0x3299e9[_0xffa98c(0x4c6,0x598,0x542,0x66a)]))_0x4098ba++;else{_0x5478a7[_0x2fab0(0x227,0x119,0x194,0x18c)](_0x2fab0(0x254,0x2b4,0x21b,0x1ab));return;}}}if(_0x3299e9[_0x2fab0(0x214,0x258,0x233,0x26f)](_0x4098ba,-0x12de+0x117*-0x9+0x1cad)){if(_0x3299e9[_0xffa98c(0x69c,0x5ef,0x554,0x6ca)](_0x3299e9[_0x2fab0(0x240,0xfa,0x19a,0x237)],_0xffa98c(0x530,0x54f,0x572,0x540))){toastr['info'](_0x3299e9[_0x2fab0(0xc7,0xb9,0x17b,0xce)]);return;}else _0x36b43d[_0x4f962f]=_0x4d7b87[_0x427d56];}const _0x26235a=_0xffa98c(0x54f,0x481,0x3a8,0x3c0)+_0x540e8e+'\x22\x20有\x20'+_0x4098ba+_0x2fab0(0x203,0x2d2,0x25f,0x225),_0x530bcf=await _0x3299e9['JiPLt'](stylishConfirm,_0x26235a);if(!_0x530bcf){toastr[_0x2fab0(0x25b,0x272,0x1d7,0x1f9)](_0x2fab0(-0x1,0x143,0xd0,0x41));return;}function _0x2fab0(_0x1ff4da,_0x2c6035,_0x330160,_0x152944){return _0x393a05(_0x1ff4da,_0x330160-0x94,_0x330160-0x154,_0x152944-0x187);}for(const _0x4ada82 in _0x55f3f7){if(_0x3299e9[_0x2fab0(0x137,0x1e7,0x184,0x238)]!==_0x3299e9[_0x2fab0(0xc5,0x3d,0xf8,0xec)])_0x4d7733[_0x4ada82]&&(_0x3299e9[_0x2fab0(0x2de,0x2a0,0x249,0x25e)](_0x3299e9[_0x2fab0(0x185,0x1c4,0x16f,0x24b)],_0x3299e9[_0xffa98c(0x509,0x515,0x4d8,0x4fc)])?(_0x39e669[_0xffa98c(0x4f7,0x544,0x51a,0x4fa)+_0x2fab0(0x17a,0x1ac,0x1c3,0xe8)](_0xfd90e8['LLM_CHAR_M'+_0xffa98c(0x587,0x5cc,0x638,0x5f7)+'ONSE'],_0x1c7e4c),_0x1509b7&&(_0x3299e9[_0xffa98c(0x50f,0x50d,0x5e3,0x5aa)](_0x1887ca,_0x48ef59),_0xf6fdcd=null)):_0x38c6f7[_0x4ada82]=_0x4d7733[_0x4ada82]);else{if(_0x32287e){const _0x54bf2e=_0x322fb7[_0x2fab0(0xe3,0x137,0xd3,0x122)](_0x8adfa0,arguments);return _0x2a7357=null,_0x54bf2e;}}}_0x3299e9[_0xffa98c(0x609,0x5e0,0x5ea,0x6bd)](saveSettingsDebounced);const _0x588c38=_0x3299e9[_0xffa98c(0x57d,0x50d,0x524,0x508)]($,_0x3299e9['LOVCU']);_0x588c38[_0xffa98c(0x66f,0x5c8,0x5c7,0x5f7)]&&_0x3299e9['AnbdS'](refreshCharacterSettings,_0x588c38),_0x3299e9[_0xffa98c(0x50c,0x546,0x5b3,0x475)](updateFormFields,_0x4d7733),console[_0x2fab0(0x198,0x206,0x1ce,0x114)]('[character'+_0xffa98c(0x60d,0x564,0x4f8,0x5b8)+_0xffa98c(0x623,0x60e,0x567,0x6b2)+_0x2fab0(0x337,0x2b8,0x25c,0x1ed)+_0x540e8e+'\x22');}async function updateOutfitPresetsFromLLM(_0xec4a0d){const _0x4f5b9d={'kYEmt':'LLM\x20请求失败','inExb':_0x3ee82a(-0x228,-0x175,-0x1b4,-0x149),'boPTg':'英文名称','dqDKv':_0x3ee82a(-0xfc,0x8,-0x56,-0xdb),'ZqUNF':_0x3ee82a(-0x224,-0x83,-0x159,-0x1f4),'ecPHa':function(_0x4172bc,_0x5255bf){return _0x4172bc!==_0x5255bf;},'VTGlO':_0x3ee82a(-0x215,-0x1b6,-0x179,-0x1d9),'dQqwA':function(_0x4201bc,_0xf82036){return _0x4201bc===_0xf82036;},'rWxYw':_0x3ee82a(-0x59,-0x20,-0xca,-0xaf),'IdHYL':'xVcGl','UzDQM':_0x5c95b5(0x179,0x18c,0x1d0,0x15b),'kgGZJ':function(_0xa26505,_0xae24ae){return _0xa26505(_0xae24ae);},'WUDkT':_0x3ee82a(-0x1fb,-0x1b6,-0x192,-0x1e5),'QFnKo':function(_0xfdec63){return _0xfdec63();},'ZVIcM':function(_0x1af77f,_0x5c49ee){return _0x1af77f(_0x5c49ee);},'erCpf':_0x3ee82a(-0x118,-0x14c,-0x10d,-0x96)+_0x3ee82a(-0x219,-0x186,-0x1e0,-0x22c)+_0x5c95b5(0x5f,0x120,0x1da,0xe5),'bgGkp':function(_0x27f28e,_0x3df33){return _0x27f28e===_0x3df33;},'JQTBz':_0x3ee82a(-0x7f,-0x1f0,-0x12f,-0xc0)},_0x56a011=extension_settings[extensionName],_0x32ce4f={};_0x32ce4f[_0x5c95b5(0x176,0x1bc,0x192,0x190)]=_0x4f5b9d['inExb'],_0x32ce4f[_0x5c95b5(0x13b,0x1e9,0x286,0x28e)]=_0x4f5b9d[_0x5c95b5(0x242,0x23a,0x24a,0x228)],_0x32ce4f[_0x5c95b5(0x2f2,0x238,0x15b,0x263)]=_0x5c95b5(0x1a3,0x202,0x142,0x176),_0x32ce4f[_0x5c95b5(0x19c,0x25f,0x1e0,0x2da)]=_0x4f5b9d['dqDKv'],_0x32ce4f[_0x3ee82a(-0x114,-0x123,-0x1d5,-0x279)+_0x3ee82a(-0x220,-0x28b,-0x1bb,-0x1af)]=_0x4f5b9d[_0x5c95b5(0x11f,0x1d4,0x166,0x23b)];function _0x3ee82a(_0x554316,_0x4c83a6,_0x130e22,_0x5cb951){return _0x393a05(_0x5cb951,_0x130e22- -0x22d,_0x130e22-0x1d0,_0x5cb951-0xb7);}_0x32ce4f[_0x3ee82a(0x59,-0x5a,-0x69,0x8)]=_0x3ee82a(-0x26b,-0x100,-0x1cd,-0x20c),_0x32ce4f['fullBodyBa'+'ck']=_0x3ee82a(-0x85,0x97,-0x40,0x8e);const _0x3ea810=_0x32ce4f;for(const _0x32ed05 of _0xec4a0d){const _0x5a9cf3=_0x32ed05['nameCN'];if(!_0x5a9cf3)continue;const _0x1232a0=_0x56a011[_0x5c95b5(0x23a,0x18d,0x1cd,0x21c)+_0x5c95b5(0x87,0xfb,0x123,0x133)]?.[_0x5a9cf3];if(_0x1232a0){let _0x322ce8=-0xab9+0x228c+-0x1*0x17d3;for(const _0x15f9fc in _0x3ea810){_0x4f5b9d['ecPHa'](_0x4f5b9d['VTGlO'],_0x4f5b9d['VTGlO'])?_0x4ac10e[_0x371ad1]=_0xa3e4a7[_0x11a7ca]:_0x32ed05[_0x15f9fc]&&_0x4f5b9d[_0x5c95b5(0x214,0x1ea,0x131,0x16d)](_0x32ed05[_0x15f9fc],_0x1232a0[_0x15f9fc])&&_0x322ce8++;}if(_0x4f5b9d['dQqwA'](_0x322ce8,0x4*-0x1e3+-0x20d2+0x285e*0x1)){if(_0x4f5b9d['ecPHa'](_0x4f5b9d[_0x3ee82a(-0x195,-0x22f,-0x161,-0x1b2)],_0x4f5b9d['IdHYL'])){console[_0x5c95b5(0x112,0x1cf,0x1f6,0x245)]('[character'+_0x3ee82a(-0x136,-0xf0,-0x103,-0x32)+_0x3ee82a(-0x1bd,-0x86,-0x132,-0xbd)+_0x5a9cf3+_0x5c95b5(0x312,0x251,0x1e2,0x1a8));continue;}else _0x504ea5(_0x1d4807[_0x3ee82a(-0x5d,-0x1c9,-0x13b,-0x88)]);}const _0x47f38d=_0x5c95b5(0x1f7,0x1e5,0x29f,0x2b2)+_0x5a9cf3+'\x22\x20有\x20'+_0x322ce8+_0x5c95b5(0x1aa,0x260,0x2bb,0x339),_0x5686d=await stylishConfirm(_0x47f38d);if(!_0x5686d){if(_0x4f5b9d['dQqwA'](_0x4f5b9d[_0x5c95b5(0x1b4,0x194,0x170,0x118)],_0x4f5b9d['UzDQM']))continue;else _0x44ba90[_0x5c95b5(0xc9,0x142,0xa3,0x79)](_0x25ca7c);}for(const _0x35aed4 in _0x3ea810){_0x32ed05[_0x35aed4]&&(_0x1232a0[_0x35aed4]=_0x32ed05[_0x35aed4]);}console[_0x3ee82a(-0xf3,-0xa3,-0xf3,-0x18b)]('[character'+_0x5c95b5(0x1cd,0x1bf,0x254,0x147)+_0x3ee82a(-0x1a8,-0x1b5,-0x19f,-0x253)+_0x5c95b5(0x1d5,0x25d,0x21c,0x31e)+_0x5a9cf3+'\x22');}else{const _0x4efa47=_0x5c95b5(0x84,0x117,0xc2,0x181)+_0x5a9cf3+_0x5c95b5(0x67,0xe5,0x1b1,0x1a4),_0x583b04=await _0x4f5b9d[_0x5c95b5(0x234,0x286,0x266,0x274)](stylishConfirm,_0x4efa47);if(!_0x583b04)continue;if(!_0x56a011['outfitPres'+_0x3ee82a(-0x27a,-0x209,-0x1c7,-0x1bd)]){if(_0x4f5b9d['WUDkT']!==_0x5c95b5(0x176,0xcf,0xe3,0x41))_0x56a011[_0x3ee82a(-0x9f,-0xb5,-0x135,-0x20b)+_0x5c95b5(0xae,0xfb,0x30,0xa4)]={};else return _0x7d1ce1[_0x5c95b5(0x212,0x1eb,0x26f,0x217)]();}const _0x2e16cd={};_0x2e16cd[_0x5c95b5(0x1d9,0x1bc,0x1d1,0x159)]=_0x32ed05[_0x5c95b5(0x201,0x1bc,0x27b,0x247)],_0x2e16cd[_0x3ee82a(-0x6b,-0x173,-0xd9,-0x183)]=_0x32ed05[_0x5c95b5(0x252,0x1e9,0x212,0x2ac)]||'',_0x2e16cd[_0x5c95b5(0x226,0x238,0x18d,0x27a)]=_0x32ed05[_0x3ee82a(-0x106,0x33,-0x8a,0x23)]||'',_0x2e16cd[_0x5c95b5(0x1ef,0x25f,0x2fb,0x29c)]=_0x32ed05[_0x3ee82a(-0x52,0x8,-0x63,-0xc4)]||'',_0x2e16cd[_0x3ee82a(-0x1ba,-0x140,-0x1d5,-0x193)+_0x5c95b5(0x1ba,0x107,0x7d,0x4b)]=_0x32ed05['upperBodyB'+_0x3ee82a(-0x19b,-0x161,-0x1bb,-0x139)]||'',_0x2e16cd[_0x3ee82a(-0x37,-0xc4,-0x69,-0xf1)]=_0x32ed05[_0x5c95b5(0x1d9,0x259,0x1c3,0x25a)]||'',_0x2e16cd[_0x5c95b5(0x78,0x137,0x67,0x6a)+'ck']=_0x32ed05[_0x5c95b5(0x9a,0x137,0x1e0,0x9b)+'ck']||'',_0x56a011[_0x3ee82a(-0x1a0,-0x206,-0x135,-0xfd)+_0x3ee82a(-0x173,-0x272,-0x1c7,-0x14f)][_0x5a9cf3]=_0x2e16cd,console['log'](_0x3ee82a(-0xec,-0xad,-0x129,-0x1ff)+_0x5c95b5(0x204,0x1bf,0x14a,0x254)+_0x3ee82a(-0x2c,-0x185,-0xb1,-0xea)+_0x3ee82a(-0x102,0x53,-0x65,-0x12b)+_0x5a9cf3+'\x22');if(_0x32ed05[_0x3ee82a(0x20,-0x23,-0x8a,-0x98)]&&_0x32ed05[_0x5c95b5(0x250,0x238,0x1cc,0x231)]['trim']()){const _0x29da1e=_0x32ed05['owner'][_0x5c95b5(0xaf,0x15c,0x15b,0x129)]()['toLowerCas'+'e']()['replace'](/\s+/g,'');for(const [_0x4f13b3,_0x36cea9]of Object['entries'](_0x56a011[_0x5c95b5(0x14a,0x1d7,0x264,0x294)+_0x3ee82a(-0x6b,-0x1f,-0xed,-0x11b)]||{})){if(_0x36cea9[_0x3ee82a(-0x12e,-0x2c,-0xd9,-0xf5)]&&_0x4f5b9d['dQqwA'](_0x36cea9['nameEN'][_0x3ee82a(-0x252,-0x1de,-0x1f6,-0x232)+'e']()[_0x5c95b5(0x1ce,0x217,0x2be,0x2a0)](/\s+/g,''),_0x29da1e)){!_0x36cea9['outfits']&&(_0x36cea9[_0x5c95b5(0x2f4,0x23e,0x1e2,0x2bb)]=[]);!_0x36cea9[_0x5c95b5(0x2ec,0x23e,0x2a7,0x223)][_0x5c95b5(0xb5,0xe9,0xa9,0x152)](_0x5a9cf3)&&(_0x36cea9[_0x5c95b5(0x304,0x23e,0x186,0x2a6)][_0x5c95b5(0x185,0x142,0xc5,0x170)](_0x5a9cf3),console[_0x3ee82a(-0x17b,-0x10c,-0xf3,-0x93)]('[character'+_0x5c95b5(0x152,0x1bf,0x208,0x131)+'fy]\x20服装\x20\x22'+_0x5a9cf3+'\x22\x20已归属到角色\x20\x22'+_0x4f13b3+'\x22'));break;}}}}}function _0x5c95b5(_0x57ec96,_0x43d07d,_0x4eeddc,_0x43e507){return _0x393a05(_0x43e507,_0x43d07d-0x95,_0x4eeddc-0x1d6,_0x43e507-0xd2);}_0x4f5b9d[_0x3ee82a(-0x192,-0x1b8,-0x169,-0x1de)](saveSettingsDebounced);const _0x22f6d8=_0x4f5b9d[_0x3ee82a(-0x10b,-0x1ca,-0x1c5,-0x248)]($,_0x4f5b9d[_0x3ee82a(-0xef,-0xed,-0x140,-0x1e9)]);_0x22f6d8['length']&&(_0x4f5b9d[_0x5c95b5(0x1d4,0x110,0x11c,0xd1)](_0x3ee82a(-0xbe,-0x11e,-0x8c,-0x14d),_0x4f5b9d[_0x3ee82a(-0x1b0,-0x200,-0x172,-0x1ba)])?_0x3d4496(new _0x4d19da(_0x517162[_0x5c95b5(0x21d,0x187,0xe7,0xd2)]||_0x4f5b9d[_0x5c95b5(0x15d,0x1f7,0x16d,0x222)])):_0x4f5b9d[_0x5c95b5(0x1b8,0x286,0x2c5,0x315)](refreshCharacterSettings,_0x22f6d8));}function updateFormFields(_0xc4536e){const _0x4b2052={'vSqnz':function(_0x55aff2,_0x4b2baf){return _0x55aff2(_0x4b2baf);},'jvvXQ':_0x50701d(-0x112,-0x1ed,-0x125,-0x180),'mEgsu':_0x2c9e3c(0x6ca,0x5b5,0x5ef,0x5ce)+_0x50701d(0x6,-0xe4,-0x87,-0x91),'PueCU':_0x50701d(-0x187,-0x105,-0x12c,-0x10a)+'FW','DpEuP':_0x50701d(-0xd5,-0x14f,-0x219,-0x1a1)+'W','vHsKu':_0x2c9e3c(0x508,0x5ae,0x534,0x4bb)+_0x50701d(-0x88,-0x83,-0x3b,-0xa5),'vsvpo':_0x50701d(-0x10c,-0x20a,-0x15a,-0x1d5)+_0x2c9e3c(0x572,0x5b3,0x58a,0x593),'IhUlM':_0x50701d(-0x1e6,-0x152,-0x101,-0x1d5)+'SFWBack','eiPRF':_0x2c9e3c(0x658,0x6d8,0x619,0x59a)+'FW','jJLNS':_0x2c9e3c(0x5a9,0x546,0x619,0x640)+_0x2c9e3c(0x42b,0x433,0x4ef,0x4bf)},_0x4ed70d=[_0x2c9e3c(0x5a1,0x4cf,0x579,0x53b),_0x50701d(-0x158,-0xe4,-0x1c9,-0x12f),'characterT'+_0x50701d(-0x106,-0xf4,-0x56,-0x98),'facialFeat'+'ures',_0x4b2052[_0x2c9e3c(0x4cf,0x45f,0x495,0x469)],_0x4b2052[_0x2c9e3c(0x5b8,0x5a4,0x56a,0x4a1)],_0x50701d(-0xea,-0x172,-0x73,-0x10a)+_0x50701d(-0x177,-0x1a0,-0x1fc,-0x1e6),_0x4b2052['DpEuP'],_0x4b2052['vHsKu'],_0x4b2052['vsvpo'],_0x4b2052[_0x2c9e3c(0x582,0x6a1,0x639,0x6b6)],_0x4b2052[_0x2c9e3c(0x642,0x560,0x578,0x50b)],_0x4b2052[_0x50701d(-0x155,-0x6f,0x19,-0xa2)]];function _0x50701d(_0x4453a0,_0x3e48f2,_0x11b42a,_0xf4df70){return _0x393a05(_0x4453a0,_0xf4df70- -0x283,_0x11b42a-0xbe,_0xf4df70-0x2d);}function _0x2c9e3c(_0x3a0da7,_0x38bafe,_0x326978,_0x428130){return _0x393a05(_0x428130,_0x326978-0x452,_0x326978-0xcb,_0x428130-0x74);}_0x4ed70d[_0x2c9e3c(0x5cd,0x593,0x53e,0x463)](_0x1aedd9=>{function _0x31a6e4(_0x16a433,_0x495394,_0x1613cb,_0x3caf99){return _0x50701d(_0x495394,_0x495394-0x9f,_0x1613cb-0xb1,_0x3caf99-0x5e0);}function _0x1bcd62(_0x36cd69,_0x41d1e1,_0x128a90,_0x358834){return _0x50701d(_0x41d1e1,_0x41d1e1-0x1a6,_0x128a90-0x24,_0x36cd69-0x50);}if(_0xc4536e[_0x1aedd9]){const _0x387716=document['getElement'+'ById']('char_'+_0x1aedd9);_0x387716&&(_0x387716[_0x31a6e4(0x3fb,0x419,0x338,0x412)]=_0xc4536e[_0x1aedd9],_0x4b2052[_0x1bcd62(-0x99,-0x9,-0x37,-0x176)]($,_0x387716)['trigger'](_0x4b2052[_0x1bcd62(-0xbb,-0x82,-0x130,-0x118)]));}});}