(function(_0x3ef83a,_0x3da9b6){function _0x2083b9(_0x75481f,_0x30e2db,_0x28e49b,_0x5f2ed7){return _0x4ba3(_0x28e49b- -0x215,_0x5f2ed7);}function _0x1c657c(_0x7aeb9e,_0x3352b6,_0x51d8ef,_0x5dffd9){return _0x4ba3(_0x51d8ef-0x4c,_0x7aeb9e);}const _0x144081=_0x3ef83a();while(!![]){try{const _0x510a8e=parseInt(_0x1c657c(0x150,0x1e9,0x212,0x290))/(0x159e+-0x13e1+-0x1bc)*(-parseInt(_0x2083b9(-0xe8,0x25,-0x99,-0x121))/(-0x47a*-0x4+0x1105*-0x1+-0x5*0x2d))+-parseInt(_0x1c657c(0x208,0x229,0x27b,0x1dc))/(0x17d1+-0x22c+0x15a2*-0x1)*(-parseInt(_0x1c657c(0xb7,0x13d,0x186,0xc3))/(0x1*-0x1e77+0x1d07*-0x1+0x1dc1*0x2))+parseInt(_0x2083b9(-0x197,-0xd7,-0xca,-0x2b))/(0x1*-0x18e5+0x8be+0x102c)+-parseInt(_0x2083b9(-0x73,0x16,-0x59,-0x10d))/(0x993+0x78b*0x4+-0x27b9*0x1)+parseInt(_0x1c657c(0x244,0x1b4,0x1c0,0x1bd))/(-0x1bc8*0x1+-0xd53*-0x1+-0xc*-0x135)*(parseInt(_0x1c657c(0x246,0x117,0x1cf,0x1a2))/(-0x9e6*-0x3+-0x9*-0x3d1+0x925*-0x7))+-parseInt(_0x2083b9(-0x2a,0x102,0x24,0x9a))/(-0xb84+-0x2*0x1115+0x2db7)+parseInt(_0x1c657c(0x1fd,0x143,0x123,0xba))/(0x1cfc+-0x394+-0x195e);if(_0x510a8e===_0x3da9b6)break;else _0x144081['push'](_0x144081['shift']());}catch(_0x2fcaa5){_0x144081['push'](_0x144081['shift']());}}}(_0xfe59,-0x2*0x16db3+-0x1fc0e+0x2*0x39ad8));const _0x147236=(function(){const _0x50d57a={};function _0x3286f7(_0x364d7e,_0x575ad4,_0x83b206,_0x541092){return _0x4ba3(_0x83b206- -0x2ad,_0x541092);}_0x50d57a[_0x4c5b90(0xc8,0xc9,0x32,-0x18)]='未在\x20LLM\x20输出中'+'检测到角色或服装标签';function _0x4c5b90(_0x384af1,_0x6b96c5,_0x212553,_0x15aca3){return _0x4ba3(_0x384af1- -0x90,_0x15aca3);}_0x50d57a[_0x4c5b90(0x1b9,0x1d6,0x1df,0x241)]='GboXY';const _0x22d151=_0x50d57a;let _0x1bbe4f=!![];return function(_0x11e72f,_0x3ce931){const _0x4cbf8a=_0x1bbe4f?function(){const _0x1cef85={};_0x1cef85[_0x2609bc(0x55,0x70,0x7f,0x5e)]=_0x22d151[_0x210d0a(-0x1c7,-0x157,-0x1ca,-0x13a)];function _0x2609bc(_0x58f4ec,_0x4afd38,_0x7187e9,_0x557342){return _0x4ba3(_0x4afd38- -0x89,_0x7187e9);}_0x1cef85[_0x210d0a(-0x230,-0x169,-0x252,-0x150)]=_0x2609bc(0x1a1,0x1a2,0x1da,0x10c)+'PromptModi'+_0x210d0a(-0x174,-0xd0,-0x246,-0x1dc)+_0x2609bc(0xd7,0xb9,0xf9,0x10d)+_0x2609bc(-0x32,0x75,0x111,0xa2)+_0x2609bc(0x7b,0x93,0x3a,0xed)+_0x210d0a(-0x113,-0x193,-0x1ca,-0x1ca);function _0x210d0a(_0xc4161c,_0x34d96f,_0x5338cb,_0x58a2ca){return _0x4ba3(_0xc4161c- -0x31f,_0x5338cb);}_0x1cef85['hNmuL']=_0x2609bc(0x114,0x1a2,0x252,0x111)+_0x210d0a(-0x1a9,-0x27a,-0x101,-0x224)+'fy]\x20Raw\x20LL'+'M\x20output\x20f'+'or\x20debuggi'+_0x210d0a(-0x252,-0x21a,-0x29d,-0x2e0);const _0x29c75f=_0x1cef85;if(_0x2609bc(0xfa,0xda,0x68,0x15b)===_0x22d151[_0x2609bc(0x1ca,0x1c0,0x230,0x130)]){_0x230600[_0x210d0a(-0x171,-0x1be,-0x186,-0x17b)](_0x29c75f['xMtwP']),_0x2fc834[_0x2609bc(0x19a,0x104,0x199,0x161)](_0x29c75f['oVEab']),_0x45e227[_0x2609bc(0x4e,0x104,0x1bf,0x100)](_0x29c75f['hNmuL'],_0x5843e1);return;}else{if(_0x3ce931){const _0x37ea18=_0x3ce931['apply'](_0x11e72f,arguments);return _0x3ce931=null,_0x37ea18;}}}:function(){};return _0x1bbe4f=![],_0x4cbf8a;};}()),_0x9316b4=_0x147236(this,function(){function _0x418b41(_0x16db1b,_0x45f73b,_0x305e8c,_0x348265){return _0x4ba3(_0x305e8c- -0x7b,_0x16db1b);}const _0x40627f={};function _0x2cbf11(_0x29180e,_0x420bc7,_0x1fe00c,_0x18315d){return _0x4ba3(_0x18315d- -0x64,_0x29180e);}_0x40627f[_0x418b41(0x1d1,0x17f,0x12f,0xaa)]=_0x418b41(0x29f,0x114,0x1d6,0x252)+'+$';const _0x45265e=_0x40627f;return _0x9316b4[_0x2cbf11(0x1bc,0x76,0x1e1,0x144)]()['search'](_0x418b41(0x10d,0x15f,0x1d6,0x1ee)+'+$')[_0x2cbf11(0x73,0x215,0xf9,0x144)]()[_0x2cbf11(0x8c,0xfa,-0x29,0xb7)+'r'](_0x9316b4)[_0x2cbf11(0xfa,0x19e,0x119,0x1ce)](_0x45265e['fjcbZ']);});function _0x3953d2(_0x26b7d9,_0xdba866,_0x47bbef,_0x4c1dab){return _0x4ba3(_0xdba866- -0x3cf,_0x47bbef);}function _0x4ba3(_0x4bf1c6,_0x3a69b5){_0x4bf1c6=_0x4bf1c6-(-0x1f3d+0x66e+0x1994);const _0x1d0c77=_0xfe59();let _0x411150=_0x1d0c77[_0x4bf1c6];if(_0x4ba3['tmzpOB']===undefined){var _0x34f7b4=function(_0x4ec90e){const _0x1f261d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x218a00='',_0x1e3516='',_0x15b1f1=_0x218a00+_0x34f7b4;for(let _0x3ce90f=-0x1a0c*0x1+0x3*0x7a2+0x1f*0x1a,_0x13fc2c,_0x5a05bf,_0x15f4a9=0x6d5+0x6*-0x482+0x1437;_0x5a05bf=_0x4ec90e['charAt'](_0x15f4a9++);~_0x5a05bf&&(_0x13fc2c=_0x3ce90f%(-0x6ed*0x5+0xe87*0x1+0x141e)?_0x13fc2c*(-0x235b+0xfb+0x454*0x8)+_0x5a05bf:_0x5a05bf,_0x3ce90f++%(-0x21eb+0x22c*-0x7+0x3123))?_0x218a00+=_0x15b1f1['charCodeAt'](_0x15f4a9+(0x26e1+0x1707+-0x1eef*0x2))-(0xd7e+0x7*-0x143+-0x49f)!==0x6a5+0x9b*-0x38+0x1b43?String['fromCharCode'](0x20a*-0x6+-0x2349+0x3084&_0x13fc2c>>(-(-0x1462+0x1d35*-0x1+0x3199*0x1)*_0x3ce90f&0x4a*0x42+0x9b7+-0xf*0x1eb)):_0x3ce90f:-0x136a+0x19ca+-0x660){_0x5a05bf=_0x1f261d['indexOf'](_0x5a05bf);}for(let _0x3c9b5d=-0xb3*-0x3+0x207*-0x11+0x205e,_0x59c2a2=_0x218a00['length'];_0x3c9b5d<_0x59c2a2;_0x3c9b5d++){_0x1e3516+='%'+('00'+_0x218a00['charCodeAt'](_0x3c9b5d)['toString'](0x1306+-0x4*0x8a9+-0xdf*-0x12))['slice'](-(0x5fb*0x2+-0xb73+-0x81));}return decodeURIComponent(_0x1e3516);};_0x4ba3['erAczC']=_0x34f7b4,_0x4ba3['MOglvb']={},_0x4ba3['tmzpOB']=!![];}const _0x5f2dac=_0x1d0c77[-0x8e*0x43+-0x1f6a+-0x134*-0x39],_0x569793=_0x4bf1c6+_0x5f2dac,_0x33c6cf=_0x4ba3['MOglvb'][_0x569793];if(!_0x33c6cf){const _0x1d19e6=function(_0xb705d6){this['oiryLI']=_0xb705d6,this['PObbBY']=[-0x2159*0x1+-0x40b+0x3*0xc77,-0x176c*-0x1+0x10d8+-0x1*0x2844,0x16a9*0x1+0x64f*0x1+-0x1cf8],this['EPIslc']=function(){return'newState';},this['GtSwcT']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['jDIszy']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1d19e6['prototype']['LiCAcY']=function(){const _0x1513a8=new RegExp(this['GtSwcT']+this['jDIszy']),_0x18f817=_0x1513a8['test'](this['EPIslc']['toString']())?--this['PObbBY'][0x1a30+-0x2191+0x762]:--this['PObbBY'][0x22*0xca+-0x22f2+-0x2*-0x40f];return this['KsvLHS'](_0x18f817);},_0x1d19e6['prototype']['KsvLHS']=function(_0x1cec5f){if(!Boolean(~_0x1cec5f))return _0x1cec5f;return this['HGLuzH'](this['oiryLI']);},_0x1d19e6['prototype']['HGLuzH']=function(_0x5f43f7){for(let _0x10f61c=-0x6*0x14b+0x23b8+-0x1bf6*0x1,_0x25898a=this['PObbBY']['length'];_0x10f61c<_0x25898a;_0x10f61c++){this['PObbBY']['push'](Math['round'](Math['random']())),_0x25898a=this['PObbBY']['length'];}return _0x5f43f7(this['PObbBY'][-0xc17+-0x535*-0x7+0x1*-0x185c]);},new _0x1d19e6(_0x4ba3)['LiCAcY'](),_0x411150=_0x4ba3['erAczC'](_0x411150),_0x4ba3['MOglvb'][_0x569793]=_0x411150;}else _0x411150=_0x33c6cf;return _0x411150;}_0x9316b4();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';function _0xfe59(){const _0x3ee6aa=['Cw5eCK0','AeTSsMe','EfLJy1G','wM9NshG','BwfW','lxrHyI1JAgfYyq','5lIk5y2k6lQRtLngvZOG','teXnioIVT+AXGUwKSEI0Pq','BMC6','zNvSBejVzhLouW','wfvoDw8','BM93','qu51BhG','qwPnvhO','sMDAyMu','v0ffEhK','y29UDgvUDa','vvnktvu','mtiYmJmYmhDiDNHVva','zgf0ytO','5y+c6icd5zU+54Mh','svrlCem','Eujgs1C','zxf1AxjLBwvUDa','wM9lreu','ufnvEMu','twLmBem','y1fKAxy','B3v0zML0CW','q2Dht2m','zKzQq2e','s3LryLC','sgPyCuu','qKv2EhK','yLLWAe0','i3n0lwnOyxr1oa','A1H5D0O','uxDdrhy','zNLDioATO+wCQowKHoEqHUINKUIjSG','5A2x5Q61ici','vhfwrNa','r01sA3q','B1zfywi','sejTEM8','C3vJy2vZCW','zur4CLi','pos6UUEjQt4k','z0jeELm','5B2s5BgE5lQ6','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','5lQu5A6y5Asw6lkm6iom6z2I','z0ngzNa','Ee10D1a','5lQu5A6y5Asw6lkm','z2vUzxjHDgLVBG','5lIl5y2k6lQRu0zx6iom6z2I','tu5Pu2i','zML0ihrHz3mGzG','5BEY5y+w5RAi5PU05PAW','r3joyM4','venXDuG','6kkR5l2/55sO77YA','qNb1wgS','6iUX5PAh5zcn56EWoIa','CMvWBgfJzufSBa','5lIl5y2k6lQRu0zx6iom6z2IoIa','zKT6uLe','B3iGzgvIDwDNAq','s1DgCLi','5Qoa5Rwl5yIW5PYn6kofici','Dgv4Da','wfbbALi','qurRsuC','5lIl5y2k6lQRtLngv+IdJoMDOG','5lIl5y2k6lQRu0zx','DxbWzxjcB2r5uW','zNLDioINO+AEKowiSoEAHoACJEIJHq','wuvXu3K','q3nmtxG','seThDMK','zNLDiev4DhjHyW','zKvXDeW','C3vIC3rYAw5N','l3bUzZTIyxnLnG','ywrK','5lIk5y2k6lQRu0zx6iom6z2I','y29UC3rYDwn0BW','B3vUzcbPBIbVDq','t0rjrLLFr0vuxW','CMvWBgfJzq','rw5Rtwy','zNLDifjLCxvLCW','y2HHCMfJDgvYua','E3VNLkJMIlFPNidMSyj9Fq','t0rjrLLFuKvtua','qNLjza','rNz4qLG','CLb3uNi','ALHAyui','Cg9ZAxrPB24','ufjptvbux1jfuq','B0rLvwO','sgnPsu0','CwXuu2i','tKXwt0S','Aw5WDxq','zxrZ','t3DuANK','t0rsCve','DxbWzxjcB2r5tG','Aw5KzxHpzG','CMvZDwX0','iIdMSQhMNiNLJ5JMM7q','qvrlD28','DfHhr3m','BNrdEgK','D05LChe','nJy4vK5rC3Lk','v0jHy2S','zgv0ywLS','uM5ltgy','DNLnzMW','zNvSBejVzhLtrG','y3rLCG','zwvNsNm','CMfJDgvYl291Da','tNPgAMi','y2HHCMfJDgvYCW','D29YBgqGyM9VAW','C3bSAxq','ugrztLe','C2L6zq','q1rzq1q','Bwnpvxm','mtmZodq1mgTeuMvQzW','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','BvfKsfi','DcbWCMvZzxq6','E3VLVzpLIy3OP5lOIBj9Fq','vfvgzuS','zNLDievYCM9YoG','BNjbEuy','Bw9KAwz5ihbYBW','EMnNENa','s3L1tei','qxLxELq','C29YDa','ChHdtLG','DMfYAwfIBgvZoG','rfbIt0y','ANLgwhi','s2vRweG','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','zw50CMLLCW','rLDcywnR','wKPIEvG','yKLosgq','yxv0BW','yxDwqLa','Egngtva','wgPJsgy','Bw9KAwz5ihjLCq','zNvSBejVzhK','5lIk5y2k6lQR6iom6z2I','suLtDgO','wg1ZDvG','zKfMzwm','wKTAvMy','Aw1Hz2vFDxjS','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','zNLDien1CNjLBG','CMvZzxrjza','5A6m5OIq77Yb','vuvtva','rLvzq08','n3niDeXMwa','Dfb3EvK','uhjVBxb0tw9KAq','AfnHqM4','Bu9Xq3K','5lQu5A6y5Asw6lkm6iom6z2IoIa','r1vqD3G','zxjYB3i','mMH0B3nlwq','Aw5MBW','CMvTB3zLtgLZDa','y2HHCL9TB2rPzG','zfD6vfy','Eu5nBMS','5lIk5y2k6lQRu0zx','nZq5mdmYDw9Sy1HH','yvznDgG','C3rYAw5N','5lIl5y2k6lQRtLngv+IdJoMDOJO','zxjLzcK6','svrNrgG','y29UDgv4DdO','BgvUz3rO','zNLDifjHDYbmta','zNLDifnHDMvKia','Bg9N','t3nXwNq','r0jZuwW','s3LXCeO','EuDgA2O','D1LsDgm','qwT5quO','rvnu','DMnLDem','C3rHCNrZv2L0Aa','A2rgEg8','tfnbAeK','CvnvweW','6kEs6iMYl+ACJEIJHEApKoEKUUIVJEs/RUAuUq','ue9ou0u','tNvts24','rwHmyMe','DxbWzxjcB2r5','q0fdsLa','ue1Lrgq','5lIl5y2k6lQRtLngvZOG','yxvnCuC','EKXpzLm','DxnICvy','EuzPque','AxnbCNjHEq','teXnioI/LowBNUE7K+AENos4UUEPUG','Dg9tDhjPBMC','BfvJwuq','zMPJyLO','zNLDie5VignOyq','CwDYBxO','B3v0zML0uhjLCW','D2fYBMLUzW','A2DWz28','uLvyEKS','ELnsAxy','z1n6wLC','DhLWzq','BMfTzuno','5lIl5y2k6lQRtLngvW','DNzrrxu','yuzetMK','v29YBgrcB29R','rwnSAKe','5lIk5y2k6lQRtLngvW','svzRC2K','mJCXmtGYCfL0BwDR','zNLDiev4zwn1Da','teXnx0niqvjFtq','terkz2G','y2HHCMfJDgvY','5lIk5y2k6lQRu0zxoIa','zMLSDgvY','yKnbyuq','BwvZC2fNzsbHDa','zuDfwhG','mJm3odLnB2Pqv1i','u0zxqMfJAW','yw55q3e','tKrIvee','zw1PDa','rMrQBeO','Dg9mB3DLCKnHCW','yu1ktM4','ENr2BKC','B2rPzNKGteXnia','5PwW5O2UoG','rLHfy0O','BuTWAuS','A3DqBNq','BvHpBNC','DxjLC0jHy2S','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','CwHNzvm','yNDZEui','zNLDioACJEIJHsaI','zNLDiezPBMfSia','wMDtEwW','BMfTzuvo','zM9YrwfJAa','zw5tEhC','B3DUzxi','zML0CW','vwzzDKe','zMfJAwfSrMvHDa','wKn6tMK','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','wfPSuMG','CuzsBxO','wufwBvG','shHIwxC','CMfUzg9Tvvvjra','AM9PBG','B3v0zML0','DMjqD2C','Aevdsu4','DxjLCW','ChjVBxb0oG','vezIANm','5lIl5y2k6lQRu0zxoIa','5Qoa5Rwl5yIW5PAW5PYn6kofici','u0zx','5lIk5y2k6lQRtLngv+IdJoMDOG','Bwf0y2HLze91Da','u252zNC','BMHxDKe','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','EfrgCwm','Exv1te0','DgvKigrHDge6','ywHTyxe','ChjVBxb0','CwnUwNe','Aw5JBhvKzxm','DMfSDwu','qK9ICfm','y2HHCMfJDgvYva','A2TSB1K','pc/KURRNIAK+','t05trq','DhjPBq','wgPOwwq','tsbVDxrWDxqGzG','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','s2TMEuK','CMvXDwvZDcaOsq','Dhb1Da','rdOG','DKfXyvu','wgjAs2W','yxbWBhK','whbowKi','qLveBhy','DMfYAwfIBgvZ','Bxb0icHjrdOG','sgzYrfa','Auv1C0u','q3bZq2m','Dvnmufe','z0fvy1e','ANvPyKC','uurZtgW','5lIT5PAh5zcn56EWoIa','5lIT5PAh5zcn56EW','Dhb1DdO','DhjPz2DLCG','Ahrmtfi','twrYzgW','iIdLT7lLVzlLSz7LIldOP5lOIBiGiG','sfnitu4','ANnhCMy','v2rjwe0','ywnR','z2v0rwXLBwvUDa','5lIk5y2k6lQRtLngv+IdJoMDOJO','BwvZC2fNzq','Ew11D3a','w2nOyxjHy3rLCG','yMfZzty0','Eu5wqvi','6k6+ici','mJq5Cg1OrwHM','txrLrwO','sMzLEuC','C2vHCMnO','BKvUEe8','zNLDifvZzxiGCG','EwHKCxG','DxbWzxjcB2r5qG','5lIk5y2k6lQR','Aw5KzxG','mJq1ota3mhPJCfDMuq','AK5JwgC','q2DdtK8','6iUX5PAh5zcn56EW','yxrwBLG','BMCGy2HHCMfJDa','sufXquq','qwHPsLK','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','vvPNzKG','5lQu5A6y5Asw6lkmoIa','renJze8','BMfTzq','AxfIweu','DM9juuW','sNLMEe8','vvfuAxy','zxiGChjVBxb0ia','CNbWz0C','CgrqAKu','rvryENK','DgLTzw91De1Z','zw5LCG','kcGOlISPkYKRkq','5lIl5y2k6lQR','Aw5NignOyxiGBq','De1Jz3O','5lIk5y2k6lQRu0zx6iom6z2IoIa','rxrUBfi','6kEs6iMY54M55B6boIa','vMfYAwfIBgvZ','tLjJz1e','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','vxPswLi','y2HHCL8','zNLDienOyxjHyW','y1fcuhe','v1j3zwi','rejusfG','zNLDieXmtsbVDq','v1f3vMi','ruTUCLC','rMnyrfi','BwnrAhC','zxH0icH0CMLNzW','weHMqNy','uKHwwey','ChvZAa','zuXlu3u','wxD4Cuy','ANHurNG','q1nnvKm','yvnxyNy','CMfPDhm','B3POsfO','q29UDgv4Da','zgf0yq','rMfMBhG','DhHUyvy','z3vtDhm','zNvSBejVzhLcyq','CMfUzg9T','y0PVqNO','5Rgc6lAf5PE2','vM9wtg8','Bfzzuuy','6kEs6iMY54M55B6b','CMvZzxrZ','BxPwvu0','ufjptvbux1jfuW','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','DezxAxO','ELbxuKC','Ew56Cfy','sxnpzuK'];_0xfe59=function(){return _0x3ee6aa;};return _0xfe59();}import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x12329d}from'./promptProcessor.js';function replacePlaceholder(_0x522be4,_0x38260a,_0x163435,_0x29c9ea){function _0xb5103a(_0xac3363,_0x4bc2dd,_0x1026cd,_0x130793){return _0x4ba3(_0x130793-0x1e8,_0xac3363);}const _0x54c95a={'qnDrM':function(_0x3bad1d,_0x48739c){return _0x3bad1d===_0x48739c;},'CTYCT':_0x322c53(0x13c,0xbb,0x1cc,0x11e),'uSLPQ':_0x322c53(0x1fc,0x15f,0x1fb,0x1f7),'AyWzT':_0xb5103a(0x41d,0x4c3,0x4af,0x435),'OsqZt':'object','eegJs':function(_0x40dbc9,_0x5b4d92){return _0x40dbc9!==_0x5b4d92;},'cQdiv':function(_0x5e739f,_0x21c8fd,_0x13a804,_0x597a51,_0xd60313){return _0x5e739f(_0x21c8fd,_0x13a804,_0x597a51,_0xd60313);}};if(_0x54c95a[_0xb5103a(0x353,0x309,0x256,0x2ad)](typeof _0x522be4,_0x54c95a[_0x322c53(0x100,0xbb,0x83,0x1d6)]))return _0x163435&&_0x522be4[_0xb5103a(0x374,0x35a,0x388,0x3e7)](_0x38260a)&&(_0x29c9ea&&_0x29c9ea[_0xb5103a(0x2a4,0x36e,0x3ac,0x301)](_0x38260a)),_0x522be4[_0x322c53(0xbc,0x8b,0x10d,0x16c)](_0x38260a,_0x163435);function _0x322c53(_0x258ca4,_0x5dd69f,_0x43275c,_0x49aaaa){return _0x4ba3(_0x258ca4- -0x49,_0x43275c);}if(Array['isArray'](_0x522be4)){if(_0x54c95a[_0xb5103a(0x448,0x34f,0x387,0x400)]!==_0x54c95a[_0xb5103a(0x3e7,0x306,0x2ca,0x33e)])return _0x522be4[_0xb5103a(0x28f,0x35e,0x2a8,0x2b1)](_0x36c16e=>replacePlaceholder(_0x36c16e,_0x38260a,_0x163435,_0x29c9ea));else{if(_0x5f2434){const _0x3fb266=_0x59faa1['apply'](_0x103536,arguments);return _0x40287a=null,_0x3fb266;}}}if(_0x522be4&&_0x54c95a[_0xb5103a(0x34b,0x22b,0x2ed,0x2ad)](typeof _0x522be4,_0x54c95a[_0x322c53(0x145,0xb5,0x1c1,0xf5)])){if(_0x54c95a[_0x322c53(0xf8,0x1cf,0x141,0xbc)]('nsWmC',_0xb5103a(0x3db,0x40f,0x48a,0x3ba))){const _0x4f156c={};for(const _0x56bb73 in _0x522be4){_0x4f156c[_0x56bb73]=_0x54c95a[_0xb5103a(0x30c,0x234,0x300,0x2c8)](replacePlaceholder,_0x522be4[_0x56bb73],_0x38260a,_0x163435,_0x29c9ea);}return _0x4f156c;}else _0x18c998[_0x322c53(0x220,0x2c7,0x145,0x26b)](_0x21cc87);}return _0x522be4;}function attachImagesToMessage(_0x3ca96e,_0x246961,_0x54c542,_0x4da5a3=_0x3953d2(-0x38f,-0x2f6,-0x248,-0x3ce)){const _0x5de57f={};_0x5de57f[_0x4f5d1b(-0x16f,-0xa4,-0xcb,-0x128)]=_0x30b85b(0x2a8,0x335,0x315,0x2fc)+'+$',_0x5de57f[_0x30b85b(0x2b0,0x2e5,0x332,0x27f)]=function(_0x558dbf,_0x51eb3f){return _0x558dbf!==_0x51eb3f;},_0x5de57f[_0x30b85b(0x26b,0x1ed,0x298,0x27c)]=_0x30b85b(0x31c,0x365,0x2f1,0x37a),_0x5de57f['zcgzp']=_0x30b85b(0x1f0,0x269,0x1c7,0x22a),_0x5de57f[_0x4f5d1b(0x43,-0x30,0x132,0x62)]='object',_0x5de57f['ueSOe']=function(_0x5b10fa,_0x384664){return _0x5b10fa+_0x384664;},_0x5de57f[_0x4f5d1b(-0x162,-0x172,-0x9c,-0x96)]='text',_0x5de57f[_0x30b85b(0x190,0x1b6,0x1f8,0x27c)]=_0x4f5d1b(-0xd,-0xec,-0xe6,-0xa9);function _0x30b85b(_0x3f72b7,_0x105779,_0x4f4550,_0x3c9315){return _0x3953d2(_0x3f72b7-0x13c,_0x105779-0x4b3,_0x4f4550,_0x3c9315-0x104);}_0x5de57f['YwxqF']=function(_0x82e5ae,_0x7cee4f){return _0x82e5ae===_0x7cee4f;},_0x5de57f[_0x30b85b(0x2e3,0x32e,0x2aa,0x283)]=function(_0x775c99,_0xad177a){return _0x775c99<_0xad177a;},_0x5de57f[_0x30b85b(0x2e9,0x279,0x2bc,0x308)]=_0x30b85b(0x28d,0x348,0x392,0x3e5),_0x5de57f['LDJgh']=function(_0x531484,_0x34c04a){return _0x531484>_0x34c04a;};const _0x425668=_0x5de57f;if(!_0x54c542||_0x425668[_0x30b85b(0x274,0x34f,0x330,0x34f)](_0x54c542[_0x4f5d1b(-0x149,-0xfa,-0x20,-0x81)],0x2*-0x1af+-0x8c6*-0x4+0x1f*-0x106)||_0x425668[_0x30b85b(0x303,0x32e,0x306,0x354)](_0x246961,0x109*-0x2+0x11e7*0x2+-0x21bc)||_0x246961>=_0x3ca96e[_0x4f5d1b(0x3e,0x23,-0xb1,-0x81)])return _0x425668['YwxqF'](_0x425668[_0x30b85b(0x263,0x279,0x1b3,0x1f7)],_0x30b85b(0x38c,0x348,0x306,0x40a))?_0x3ca96e:_0x12a53b[_0x4f5d1b(-0x2c,-0x2b,-0x5f,-0x63)]()['search'](_0x4f5d1b(-0x95,0xa3,-0x29,0x46)+'+$')['toString']()[_0x4f5d1b(-0x10a,-0x140,-0x4f,-0xf0)+'r'](_0x20c1f7)[_0x4f5d1b(-0x98,0xd3,-0xa,0x27)](dzJRQG[_0x4f5d1b(-0x18c,-0x1fd,-0xc8,-0x128)]);const _0x38cdf3=[..._0x3ca96e],_0x13efdb=_0x38cdf3[_0x246961],_0x123eca=[];if(typeof _0x13efdb['content']===_0x425668[_0x30b85b(0x166,0x238,0x22a,0x1ab)]){const _0x2dfd55={};_0x2dfd55[_0x4f5d1b(0x43,-0x7a,-0xb6,-0x58)]=_0x30b85b(0x18e,0x1ef,0x15a,0x13c),_0x2dfd55[_0x4f5d1b(-0xaf,-0x101,-0x42,-0x100)]=_0x13efdb[_0x30b85b(0x15d,0x1b9,0x17c,0x12d)],_0x123eca[_0x4f5d1b(0xf6,0x11a,0x110,0x5e)](_0x2dfd55);}else Array['isArray'](_0x13efdb[_0x4f5d1b(-0x13e,-0x111,-0x1e8,-0x136)])&&_0x123eca[_0x30b85b(0x36d,0x34d,0x339,0x325)](..._0x13efdb[_0x4f5d1b(-0xe0,-0x1f6,-0x1c5,-0x136)]);if(_0x425668[_0x4f5d1b(-0xa1,-0x39,-0x10a,-0x4c)](_0x54c542['length'],0x377+-0x1286+0x5*0x303)){const _0x344ec8={};_0x344ec8[_0x30b85b(0x1ce,0x297,0x20d,0x2ee)]=_0x425668['tPwyY'],_0x344ec8[_0x30b85b(0x1c5,0x1ef,0x173,0x1f7)]=_0x4f5d1b(0xfd,0x107,0x77,0x4f)+_0x54c542['length']+'张'+_0x4da5a3+']',_0x123eca[_0x4f5d1b(0x58,-0x5a,-0x1f,0x5e)](_0x344ec8);}_0x54c542['forEach']((_0x173790,_0x4361fa)=>{function _0xb1387b(_0x571d8e,_0x3fd69f,_0x13e276,_0x635f98){return _0x30b85b(_0x571d8e-0xb3,_0x13e276- -0xae,_0x635f98,_0x635f98-0x149);}function _0x1d4436(_0x53f2f0,_0x78cf67,_0xa6e6c5,_0x2b81f0){return _0x4f5d1b(_0x53f2f0-0xc9,_0x78cf67-0x196,_0x2b81f0,_0x78cf67-0x110);}if(_0x425668[_0x1d4436(0x6e,0x106,0x1b7,0x129)](_0x1d4436(0x10e,0x186,0x185,0x131),_0x425668[_0xb1387b(0x117,0x73,0x13f,0x70)]))_0x286196[_0xb1387b(0x349,0x298,0x29f,0x35c)](_0xf294e6);else{const _0x4516a4=typeof _0x173790===_0x425668['zcgzp']?_0x173790:_0x173790[_0xb1387b(0x247,0x198,0x262,0x216)],_0x4a9e7b=typeof _0x173790===_0x425668[_0x1d4436(0x196,0x172,0xcd,0xd8)]&&_0x173790['name']?_0x173790[_0x1d4436(0xc6,0x14b,0x103,0x1e9)]:''+_0x4da5a3+_0x425668['ueSOe'](_0x4361fa,-0x905*-0x4+-0x163f+-0x24e*0x6),_0x2cbefb={};_0x2cbefb['type']=_0x425668[_0x1d4436(0x13c,0x7a,0xab,-0x4e)],_0x2cbefb[_0xb1387b(0x1da,0x13d,0x141,0x151)]='['+_0x4a9e7b+']',_0x123eca[_0x1d4436(0x109,0x16e,0x93,0xa0)](_0x2cbefb);let _0x3ad261=_0x4516a4;!_0x4516a4[_0x1d4436(0xc5,0x9b,0x10,0x82)](_0x1d4436(0x23,-0x23,0x41,0x62))&&(_0x3ad261='data:image'+_0x1d4436(0x9f,0x1d,-0x50,0x63)+'4,'+_0x4516a4);const _0x52ad80={};_0x52ad80['url']=_0x3ad261,_0x52ad80[_0xb1387b(0x220,0x1f9,0x172,0x249)]=_0x425668[_0xb1387b(0x110,0x17c,0x108,0x191)];const _0x2be588={};_0x2be588[_0x1d4436(-0xc,0xb8,0xae,0xa4)]='image_url',_0x2be588[_0x1d4436(0x36,0x72,-0x28,0xa5)]=_0x52ad80,_0x123eca[_0x1d4436(0x21e,0x16e,0xa8,0x118)](_0x2be588);}});const _0x5e273f={..._0x13efdb};_0x5e273f['content']=_0x123eca,_0x38cdf3[_0x246961]=_0x5e273f;function _0x4f5d1b(_0x21ff1d,_0x58b4f0,_0x3d65a5,_0x3a0300){return _0x3953d2(_0x21ff1d-0x185,_0x3a0300-0x1c4,_0x3d65a5,_0x3a0300-0x94);}return _0x38cdf3;}function findMessageIndexWithPlaceholder(_0x155d2a,_0x28168b){function _0x559e50(_0x1b0d90,_0x327622,_0x97da22,_0x1508ff){return _0x3953d2(_0x1b0d90-0x120,_0x97da22-0x2c4,_0x327622,_0x1508ff-0x107);}const _0x5407db={'ymuwp':function(_0x59b2b2,_0xa62bb3){return _0x59b2b2(_0xa62bb3);},'XPAjR':_0x559e50(0x183,0x153,0xd1,0xd3),'PSUze':'characterT'+'raits','TqVFp':'facialFeat'+_0x559e50(0x1a0,0x95,0xe3,0x103),'ADkIG':_0x559e50(0xdb,0x7c,0x5,0xa2)+_0x559e50(0x9b,0x70,0x54,0x120),'tXGGs':_0x559e50(0x2,0xde,0x34,0x100)+'W','WdIXM':'fullBodySF'+'WBack','RUXzK':_0xe1f82a(-0x1e8,-0x161,-0x285,-0x1d0)+_0x559e50(0x1e,0x58,0xe8,0xeb),'iqbXE':_0x559e50(0x5,-0x7a,-0x3d,0x62)+'FW','lUcYD':'fullBodyNS'+'FWBack','KyqpJ':function(_0x5192a5,_0xdb3019){return _0x5192a5!==_0xdb3019;},'EfHWR':function(_0x104444,_0x1bae89){return _0x104444(_0x1bae89);},'IqYNy':'LLM\x20请求失败','CgGOc':function(_0x10ed54,_0x574ae9){return _0x10ed54<_0x574ae9;},'kXywJ':function(_0x3e1531,_0x33e942){return _0x3e1531!==_0x33e942;},'kOtpD':_0x559e50(0x63,0x6f,0x8e,-0x11),'NzFjb':function(_0x26dcda,_0x2433e0){return _0x26dcda===_0x2433e0;},'BUDlv':_0xe1f82a(-0x17b,-0xb5,-0x189,-0x17d),'cQBPq':_0xe1f82a(-0x28a,-0x17d,-0xe2,-0x1ad),'GmStP':function(_0x2a43e5,_0x229d73){return _0x2a43e5!==_0x229d73;}};function _0xe1f82a(_0x1ed047,_0x511f9c,_0x103de6,_0x1b7a14){return _0x3953d2(_0x1ed047-0xd9,_0x1b7a14-0xcd,_0x1ed047,_0x1b7a14-0x88);}for(let _0x26a02f=-0x22a6+-0xa7b+0x2d21;_0x5407db[_0xe1f82a(-0x26b,-0x196,-0x271,-0x220)](_0x26a02f,_0x155d2a['length']);_0x26a02f++){if(_0x5407db[_0xe1f82a(-0x288,-0x25b,-0x2d7,-0x219)](_0x5407db['kOtpD'],'qSUXL'))_0x5407db[_0xe1f82a(-0x8,-0x53,-0x199,-0xd8)](_0x579ab1,_0x44d6fd);else{const _0x219f21=_0x155d2a[_0x26a02f];if(_0x5407db[_0xe1f82a(-0x1f7,-0x27e,-0x12b,-0x1bf)](typeof _0x219f21['content'],_0x5407db[_0x559e50(0xcb,0x3f,0x107,0x129)])&&_0x219f21[_0x559e50(0x2d,-0x9,-0x36,-0xa)]['includes'](_0x28168b)){if(_0x5407db['kXywJ'](_0xe1f82a(-0x135,-0x103,-0x23d,-0x1c9),_0x559e50(0x85,0xe1,0x2e,-0x1d))){const _0x14bba0={'enSxw':function(_0xfa2b11,_0x3d9332){return _0x5407db['ymuwp'](_0xfa2b11,_0x3d9332);},'qlTSb':_0xe1f82a(-0x228,-0x18d,-0x1c4,-0x1d4)},_0x3a2638=[_0xe1f82a(-0xb0,-0xcb,-0x198,-0x14e),_0x5407db[_0xe1f82a(-0x171,-0x21a,-0x13a,-0x1f6)],_0x5407db[_0xe1f82a(-0x1bd,-0x2fb,-0x1c2,-0x224)],_0x5407db[_0xe1f82a(-0x193,-0x2a0,-0x244,-0x215)],_0xe1f82a(-0x11d,-0x17e,-0x125,-0x120)+_0x559e50(0x10a,0x23,0xca,0xd4),_0x559e50(0xb1,-0x5d,0x5,-0x2c)+'FW',_0x5407db[_0x559e50(0x5b,-0x12,0x2,0xdd)],_0x5407db[_0x559e50(0xc1,-0x76,0x2c,0x7d)],_0x5407db[_0x559e50(0xa1,0xbd,0x11a,0xb4)],_0x5407db[_0x559e50(0xa0,0x14,0xa5,0x128)],_0xe1f82a(-0xf8,-0x155,-0x185,-0x1d0)+_0xe1f82a(-0x19a,-0x1f9,-0x1bc,-0x13b),_0x5407db[_0x559e50(0x1d8,0xea,0x13c,0x215)],_0x5407db[_0xe1f82a(-0x1c6,-0x1e2,-0xfa,-0x159)]];_0x3a2638[_0x559e50(0x3,0xd6,0xd2,0x33)](_0x30dcf8=>{function _0x329188(_0x2fa688,_0x514276,_0x266fd3,_0x1e499){return _0xe1f82a(_0x514276,_0x514276-0x1bf,_0x266fd3-0x1d8,_0x1e499-0x509);}function _0x151fe9(_0x220c4c,_0x3e4a40,_0x4ba79f,_0x16b625){return _0xe1f82a(_0x4ba79f,_0x3e4a40-0xbd,_0x4ba79f-0x129,_0x3e4a40-0x64b);}if(_0x56a2a0[_0x30dcf8]){const _0xcc05bb=_0x2cf49b['getElement'+_0x151fe9(0x4e4,0x46d,0x467,0x4ae)](_0x329188(0x427,0x496,0x4b0,0x463)+_0x30dcf8);_0xcc05bb&&(_0xcc05bb[_0x329188(0x328,0x38a,0x4d5,0x407)]=_0x436556[_0x30dcf8],_0x14bba0[_0x329188(0x35c,0x31e,0x4b4,0x3e5)](_0x3d2929,_0xcc05bb)[_0x151fe9(0x48c,0x568,0x4db,0x575)](_0x14bba0[_0x151fe9(0x39f,0x475,0x53b,0x4bf)]));}});}else return _0x26a02f;}else{if(Array[_0xe1f82a(-0x15e,-0x156,-0x1d0,-0x15c)](_0x219f21['content'])){if(_0x5407db['NzFjb'](_0x5407db[_0xe1f82a(-0x52,-0x55,-0x84,-0xa4)],_0xe1f82a(-0xdc,-0x277,-0x1d3,-0x1ad)))for(const _0x1c890f of _0x219f21[_0xe1f82a(-0x235,-0x184,-0x174,-0x22d)]){if(_0x5407db['GmStP'](_0xe1f82a(-0x15d,-0x151,-0x129,-0xf8),'KkfyI')){if(_0x5407db[_0x559e50(0xd2,0x105,0x85,-0x34)](_0xfd583c['id'],_0x38b4f2))return;_0x4bf6dd(),_0x37c242[_0xe1f82a(-0x14e,-0x15a,-0x1ce,-0x211)]?_0x43509e(_0x5eca6e['result']):_0x5407db['EfHWR'](_0x1a9acc,new _0x176fdb(_0x131c51[_0xe1f82a(-0x1e6,-0x267,-0xfd,-0x1ce)]||_0x5407db['IqYNy']));}else{if(_0x5407db['NzFjb'](_0x1c890f['type'],_0x559e50(0xaf,0x35,0x0,0x44))&&_0x1c890f[_0xe1f82a(-0x20f,-0x198,-0x2a3,-0x1f7)][_0xe1f82a(-0x33,-0x1d5,-0x118,-0x103)](_0x28168b))return _0x26a02f;}}else _0x5407db[_0xe1f82a(-0x145,-0x7b,-0x198,-0xd8)](_0x13c8e1,_0x31939b);}}}}return-(0x2471+-0x1eb+0x1*-0x2285);}function generateRequestId(){function _0x537d6b(_0x3c2017,_0xd61cb1,_0x69ff7d,_0x29b8b5){return _0x3953d2(_0x3c2017-0x1e6,_0x69ff7d-0x3da,_0x29b8b5,_0x29b8b5-0x43);}if(crypto&&crypto[_0x11025c(0x32b,0x3c4,0x2a5,0x33f)])return crypto[_0x11025c(0x3dc,0x40c,0x2b3,0x33f)]();function _0x11025c(_0xbbcacf,_0x301a1d,_0x53488e,_0x51a6b1){return _0x3953d2(_0xbbcacf-0x18c,_0x51a6b1-0x525,_0xbbcacf,_0x51a6b1-0x109);}return Date[_0x11025c(0x1aa,0x16e,0x1f5,0x226)]()['toString'](0x11de+-0x1*-0x1462+-0x261c)+Math[_0x11025c(0x457,0x34f,0x2fd,0x3cd)]()[_0x537d6b(0x20d,0x13e,0x1b3,0x1f7)](-0x128d+0x26*0xb7+-0x879)[_0x11025c(0x201,0x332,0x249,0x26d)](0x351*0xb+-0xf8e+-0x14eb);}export function LLM_CHAR_MODIFY_GET_PROMPT(){function _0x1647eb(_0x50334f,_0x14ba85,_0x248f5b,_0x402119){return _0x3953d2(_0x50334f-0x1f,_0x14ba85-0x4a8,_0x402119,_0x402119-0x34);}const _0x33e70b={'KkoyU':function(_0x5c6279,_0x3eaf36){return _0x5c6279!==_0x3eaf36;},'DIjjv':function(_0xe92405,_0x565320){return _0xe92405(_0x565320);},'HxbYw':_0x1647eb(0x3bf,0x31b,0x2a5,0x25f)+'时','AqOnh':function(_0x118b31){return _0x118b31();},'xvlOn':function(_0xe505ea,_0x32f99d,_0x3fd970){return _0xe505ea(_0x32f99d,_0x3fd970);}};return new Promise((_0x432798,_0xf58ea4)=>{function _0x5b8325(_0x182163,_0x3c5109,_0x171093,_0x197b74){return _0x1647eb(_0x182163-0x47,_0x182163- -0x48a,_0x171093-0x193,_0x171093);}const _0x2791a3={'PdYNQ':function(_0x11e703,_0x168fc2){return _0x33e70b['KkoyU'](_0x11e703,_0x168fc2);},'NLVOK':function(_0x359a95,_0x13018d){return _0x33e70b['DIjjv'](_0x359a95,_0x13018d);},'Mdrdl':_0x33e70b[_0x5996e2(0x199,0x135,0x1d8,0x297)]},_0x9dce34=_0x33e70b['AqOnh'](generateRequestId);console[_0x5996e2(0x25b,0x1ea,0x17d,0x106)](_0x5996e2(0x27e,0x299,0x21b,0x1fa)+'PromptModi'+_0x5b8325(-0x291,-0x242,-0x2b6,-0x32a)+'ting\x20char\x20'+_0x5b8325(-0x25e,-0x257,-0x1a1,-0x1f8)+_0x5996e2(0x26b,0x24f,0x204,0x125)+_0x9dce34+')');const _0x5b3328=_0x45518b=>{if(_0x2791a3[_0x64789e(-0xd7,0xa,-0x4e,-0x20)](_0x45518b['id'],_0x9dce34))return;function _0x45355c(_0x3ff875,_0x1816fd,_0x218f3d,_0x12fe92){return _0x5b8325(_0x1816fd-0x642,_0x1816fd-0x1bc,_0x3ff875,_0x12fe92-0xfa);}eventSource[_0x45355c(0x49b,0x40f,0x35b,0x4d8)+_0x45355c(0x41b,0x4e1,0x47d,0x550)](eventNames['LLM_CHAR_M'+_0x64789e(-0x61,-0x8e,-0xdf,-0x4a)+'PROMPT_RES'+_0x45355c(0x4ce,0x42c,0x4a9,0x3e7)],_0x5b3328);function _0x64789e(_0x505668,_0x2d2726,_0x215f97,_0x42aec6){return _0x5996e2(_0x505668-0xa7,_0x505668,_0x42aec6- -0x157,_0x42aec6-0x66);}_0x2791a3[_0x45355c(0x472,0x3be,0x496,0x316)](_0x432798,_0x45518b[_0x64789e(0x15f,0x77,0x68,0x96)]);};eventSource['on'](eventNames[_0x5b8325(-0x1f3,-0x220,-0x1d9,-0x17e)+'ODIFY_GET_'+_0x5996e2(0x1f6,0x346,0x26f,0x330)+_0x5b8325(-0x216,-0x156,-0x19d,-0x162)],_0x5b3328);const _0x1ce1ac={};_0x1ce1ac['id']=_0x9dce34,eventSource[_0x5b8325(-0x1e7,-0x10e,-0x18b,-0x131)](eventNames[_0x5996e2(0xe4,0xf1,0x1ae,0x149)+_0x5996e2(0x84,0x66,0x10d,0x64)+_0x5996e2(0x19c,0x1a7,0x119,0x115)+_0x5b8325(-0x23f,-0x1a8,-0x19f,-0x242)],_0x1ce1ac);function _0x5996e2(_0x4c403a,_0x1bf254,_0x270cd3,_0x3c354d){return _0x1647eb(_0x4c403a-0x9c,_0x270cd3- -0xe9,_0x270cd3-0x1ae,_0x1bf254);}_0x33e70b['xvlOn'](setTimeout,()=>{function _0x4cbb34(_0x170dfd,_0x47d8c5,_0x580572,_0x20c41a){return _0x5b8325(_0x47d8c5-0x81,_0x47d8c5-0x4f,_0x20c41a,_0x20c41a-0xab);}function _0xf5b27(_0x1c78b2,_0x9f8c61,_0x40a96a,_0x196925){return _0x5b8325(_0x9f8c61-0x41,_0x9f8c61-0x6c,_0x196925,_0x196925-0x190);}eventSource['removeList'+_0xf5b27(-0x12b,-0x120,-0xf7,-0xa6)](eventNames[_0x4cbb34(-0x177,-0x172,-0x1c1,-0x119)+_0xf5b27(-0x2d4,-0x253,-0x331,-0x298)+'PROMPT_RES'+_0x4cbb34(-0x13e,-0x195,-0xcd,-0x259)],_0x5b3328),_0x2791a3[_0xf5b27(-0x231,-0x243,-0x25c,-0x314)](_0xf58ea4,new Error(_0x2791a3[_0xf5b27(-0x1a0,-0x14f,-0x174,-0x191)]));},-0xdf2+-0x12c*0x4+-0x1cd9*-0x2);});}export function LLM_CHAR_MODIFY(_0x2001b6,_0x240a6c={}){function _0x334a93(_0x5876e1,_0x1d0333,_0x50d3ef,_0x37be5d){return _0x3953d2(_0x5876e1-0x57,_0x5876e1-0x711,_0x50d3ef,_0x37be5d-0x182);}const _0x4e38db={'vvQEu':function(_0x50076c,_0x55282b){return _0x50076c===_0x55282b;},'ZJbyX':_0x334a93(0x4e6,0x4a4,0x51b,0x42c),'htLLR':function(_0x221046,_0x53ba95){return _0x221046!==_0x53ba95;},'yRiMk':_0xe037ca(-0x32,-0xe9,0x2,-0xc9),'XDlPq':_0x334a93(0x52f,0x5cd,0x5e8,0x599),'gAUcQ':function(_0x4c7c96){return _0x4c7c96();},'IAqAD':function(_0x37a701,_0xa3f8f4){return _0x37a701(_0xa3f8f4);},'yGFkj':function(_0x1b76d8){return _0x1b76d8();},'ZogHx':'角色修改\x20LLM\x20请'+_0xe037ca(-0x28,0x13,0x13,-0xca),'xYccX':function(_0x376549){return _0x376549();},'QDsLl':function(_0x47f8bc,_0x1422a6,_0xf153f5){return _0x47f8bc(_0x1422a6,_0xf153f5);}};function _0xe037ca(_0x1f1e63,_0x34e6bb,_0x29960a,_0x2047cc){return _0x3953d2(_0x1f1e63-0x25,_0x2047cc-0x8c,_0x29960a,_0x2047cc-0xe2);}return new Promise((_0x4415db,_0x5b9589)=>{function _0x19862e(_0x380847,_0x25a5db,_0x49bea9,_0x21b554){return _0x334a93(_0x21b554- -0x64b,_0x25a5db-0xa2,_0x49bea9,_0x21b554-0x19f);}const _0x36ae26={'hKlJa':function(_0x207183){function _0x4e64be(_0xd81a77,_0x154b87,_0x35bc1c,_0xd834d){return _0x4ba3(_0x35bc1c- -0x16c,_0xd81a77);}return _0x4e38db[_0x4e64be(0x71,-0x33,0xad,0xf6)](_0x207183);},'IVksi':function(_0x30c4e8,_0x13caae){function _0x529c2c(_0xc55c59,_0x31f4ca,_0x195821,_0x414863){return _0x4ba3(_0x195821- -0x2ed,_0x414863);}return _0x4e38db[_0x529c2c(-0xba,-0x188,-0xae,-0x11)](_0x30c4e8,_0x13caae);},'WAExy':_0x19862e(-0x277,-0x2ab,-0x16e,-0x23d),'XjcHf':function(_0x5058dd){function _0x4c1849(_0x31109b,_0x2dc813,_0x227d87,_0x31cb5c){return _0x19862e(_0x31109b-0x198,_0x2dc813-0x1cc,_0x227d87,_0x31cb5c-0x297);}return _0x4e38db[_0x4c1849(0x159,0x45,0x86,0x11f)](_0x5058dd);},'xDvoR':_0x4e38db[_0x19862e(-0x241,-0x17d,-0x2b3,-0x241)]},_0x5650d3=_0x4e38db[_0x56cec4(0x168,0x18e,0x199,0x1e8)](generateRequestId);function _0x56cec4(_0x43b074,_0x11ca15,_0x1eb820,_0x3082bc){return _0x334a93(_0x43b074- -0x2a1,_0x11ca15-0x6c,_0x1eb820,_0x3082bc-0xe9);}const _0x307dd0=_0x240a6c[_0x56cec4(0x2f0,0x342,0x3a1,0x32a)]||-0x1d*0x7f6+-0x1f7*0x93+-0x2f213*-0x1;let _0x16b619=null;console[_0x56cec4(0x22e,0x17a,0x169,0x2b6)](_0x56cec4(0x2cc,0x2d5,0x265,0x36f)+_0x19862e(-0xdf,-0x260,-0xcb,-0x193)+_0x19862e(-0x117,-0xa4,-0x1a0,-0x14c)+_0x56cec4(0x2f4,0x378,0x25e,0x2fb)+_0x56cec4(0x270,0x1f0,0x2f1,0x243)+_0x19862e(-0x177,-0xe7,-0xa3,-0xfe)+_0x19862e(-0x138,-0x8c,-0x8d,-0xfc)+_0x5650d3+')');const _0x2ee7cc=()=>{function _0x48a779(_0x5559a1,_0xaa246,_0x22acf2,_0x436906){return _0x19862e(_0x5559a1-0x12a,_0xaa246-0x36,_0x436906,_0xaa246- -0x83);}function _0x274ef2(_0x2dcaa6,_0x4f222a,_0x1d8005,_0x67b728){return _0x19862e(_0x2dcaa6-0x20,_0x4f222a-0x7,_0x2dcaa6,_0x1d8005-0x147);}if(_0x4e38db[_0x48a779(-0x27c,-0x1d6,-0x127,-0x22f)](_0x4e38db[_0x48a779(-0x164,-0x22c,-0x18b,-0x1b9)],_0x4e38db['ZJbyX'])){eventSource[_0x274ef2(0x58,-0x87,-0x44,-0xeb)+_0x274ef2(0x105,-0x2b,0x8e,0x10e)](eventNames['LLM_CHAR_M'+_0x48a779(-0x19a,-0x269,-0x196,-0x2fa)+_0x274ef2(0x9a,0xab,0x43,0x53)],_0x47c6c);if(_0x16b619){if(_0x4e38db[_0x274ef2(0xf7,0x4c,0x5e,-0x49)](_0x4e38db['yRiMk'],_0x4e38db['XDlPq']))clearTimeout(_0x16b619),_0x16b619=null;else{const _0x206b01=_0x47ffac[_0x2e5ed6],_0x588ae8=_0x206b01['characterP'+'resetId'];if(!_0x588ae8||!_0x206b01[_0x48a779(-0x2e9,-0x26b,-0x1cb,-0x32d)+'resets'][_0x588ae8])return null;const _0x415979={};return _0x415979['id']=_0x588ae8,_0x415979[_0x274ef2(-0x2,0x10,0xb0,0xce)]=_0x206b01[_0x274ef2(-0x31,-0x29,-0xa1,-0x161)+_0x274ef2(0xbd,0x174,0xbb,0x11)][_0x588ae8],_0x415979;}}}else{const _0x564605=_0x56c3c1?function(){function _0x2fc207(_0x340817,_0x5ca6ea,_0x2839f6,_0x5bfb1e){return _0x48a779(_0x340817-0xc9,_0x340817-0x766,_0x2839f6-0x179,_0x5bfb1e);}if(_0xd2c5ff){const _0x3a1af6=_0x23af2c[_0x2fc207(0x5ea,0x5ee,0x629,0x55a)](_0x429c01,arguments);return _0x533194=null,_0x3a1af6;}}:function(){};return _0x53c34e=![],_0x564605;}},_0x47c6c=_0x3b6abd=>{if(_0x3b6abd['id']!==_0x5650d3)return;function _0x29a3a9(_0x49556c,_0x1fbe60,_0x310cd0,_0x5f2bdd){return _0x56cec4(_0x5f2bdd-0x239,_0x1fbe60-0x10c,_0x1fbe60,_0x5f2bdd-0xda);}_0x36ae26[_0x29a3a9(0x384,0x31b,0x2eb,0x3a0)](_0x2ee7cc);function _0x9141e4(_0x42addc,_0x58619f,_0x2468b0,_0x4aa944){return _0x56cec4(_0x42addc-0x214,_0x58619f-0x54,_0x2468b0,_0x4aa944-0xc3);}_0x3b6abd['success']?_0x36ae26[_0x9141e4(0x470,0x54b,0x3cc,0x3ce)](_0x4415db,_0x3b6abd[_0x9141e4(0x3e9,0x3a2,0x4ab,0x37d)]):_0x5b9589(new Error(_0x3b6abd[_0x9141e4(0x3e9,0x353,0x434,0x430)]||_0x36ae26[_0x9141e4(0x389,0x44b,0x3af,0x414)]));};eventSource['on'](eventNames[_0x56cec4(0x25f,0x2c5,0x2c6,0x33b)+_0x56cec4(0x1c4,0x155,0xf6,0x115)+'ONSE'],_0x47c6c);const _0x4c9ed9={};_0x4c9ed9[_0x19862e(-0x16a,-0xde,-0x160,-0x10c)]=_0x2001b6,_0x4c9ed9['id']=_0x5650d3,eventSource[_0x19862e(-0x1bb,-0xeb,-0xd6,-0x13f)](eventNames[_0x56cec4(0x25f,0x18a,0x2f7,0x2d9)+'ODIFY_REQU'+_0x19862e(-0xef,-0x1d1,-0x160,-0x175)],_0x4c9ed9),_0x16b619=_0x4e38db[_0x19862e(-0x16,-0x16b,-0x34,-0xee)](setTimeout,()=>{_0x36ae26[_0x180cef(0x214,0x13b,0x2f4,0x221)](_0x2ee7cc);function _0x180cef(_0x2ba713,_0x59a944,_0x1df96f,_0x1ffc0d){return _0x56cec4(_0x2ba713-0xe,_0x59a944-0x197,_0x59a944,_0x1ffc0d-0xdd);}_0x5b9589(new Error(_0x36ae26['xDvoR']));},_0x307dd0);});}function preprocessTagContent(_0x2219db){const _0x1ffbd7={};_0x1ffbd7['yNMnk']='下半身NSFW背面:';function _0x4ba6fa(_0x183a5d,_0x1504f2,_0x439273,_0x3934ae){return _0x3953d2(_0x183a5d-0x1aa,_0x1504f2-0xc7,_0x439273,_0x3934ae-0x15);}_0x1ffbd7[_0x280caf(0x183,0x22b,0x15a,0x16e)]=_0x4ba6fa(-0x119,-0xe0,-0xd,-0x14b);const _0x31b5c3=_0x1ffbd7;let _0x191d21=_0x2219db[_0x280caf(0xc9,0x89,0xa7,0xac)](/:/g,':')['replace'](/,/g,',');function _0x280caf(_0x417951,_0x3a9a64,_0x19e9e5,_0x397424){return _0x3953d2(_0x417951-0x3d,_0x19e9e5-0x358,_0x3a9a64,_0x397424-0x3c);}return _0x191d21=_0x191d21[_0x280caf(0x37,0x2c,0xa7,0x44)](/下半身NSWebcam:/g,_0x31b5c3[_0x280caf(0x95,0x9c,0x10a,0x178)]),_0x191d21=_0x191d21[_0x280caf(0x74,0x127,0xa7,0x159)](/下半身NSFW_背面:/g,_0x31b5c3[_0x4ba6fa(-0xd7,-0x187,-0x123,-0xd1)]),_0x191d21=_0x191d21[_0x4ba6fa(-0x279,-0x1ea,-0x1ed,-0x13a)](/上半身NSFW_背面:/g,_0x31b5c3[_0x280caf(0xe5,0x1e3,0x15a,0xf0)]),_0x191d21;}function parseCharacterData(_0x1d7d44){const _0x1d1419={'ETXzy':function(_0x405a61,_0x425ea2){return _0x405a61(_0x425ea2);},'CpsCc':_0x2c6bf5(-0x46,-0xfe,-0x86,-0x76),'yhdqx':_0x3038a5(-0x1ad,-0x139,-0x1d1,-0x159),'qSPMo':'nameEN','tMcgz':_0x3038a5(-0x96,-0x1fd,-0xe4,-0x12b)+_0x3038a5(-0x1a6,-0x166,-0x6f,-0x11f),'rppgG':_0x2c6bf5(-0x4a,-0x11,0x2e,0xd7)+_0x3038a5(-0x1a1,-0x211,-0x20d,-0x138),'ATKwo':_0x2c6bf5(-0x149,0x2b,-0xa4,-0x118)+'FW','ZgSyl':_0x3038a5(-0x1a5,-0x228,-0x16e,-0x1fd)+_0x3038a5(-0x1db,-0x1eb,-0x13e,-0x1ae),'UZgfH':_0x2c6bf5(-0x71,-0xf8,-0x75,0xd)+'W','rPwRr':'fullBodySF'+_0x2c6bf5(-0xd3,-0xfc,-0x79,0x29),'CgCNO':_0x3038a5(-0x1a1,-0x19d,-0x140,-0x1db)+'SFW','XbZKl':_0x3038a5(-0x285,-0x1d5,-0x10a,-0x1db)+_0x2c6bf5(0xc4,0x30,0x13,0xd7),'IIStj':'fullBodyNS'+_0x2c6bf5(-0x12e,-0xe9,-0x55,-0xd9),'DPbOF':function(_0x44604f,_0x5ee33b){return _0x44604f+_0x5ee33b;},'ITKpC':function(_0x1778f7,_0x5ce6dd){return _0x1778f7!==_0x5ce6dd;},'jyFXr':_0x2c6bf5(-0x5a,0x23,0x53,-0x72),'ajEHk':'DWxJC','ANulx':'msEeQ','FvxBX':'[character'+'PromptModi'+'fy]\x20解析到的人物'+_0x2c6bf5(0xe6,0x87,0x1c,-0x9b)},_0x59c239=_0x1d7d44[_0x3038a5(-0xfc,-0x1fc,-0x1f5,-0x1c7)]('\x0a')[_0x3038a5(-0x1d8,-0x230,-0x2b3,-0x244)](_0xa13d1b=>_0xa13d1b[_0x3038a5(-0x43,-0x117,-0x140,-0x107)]())['filter'](_0x3bba64=>_0x3bba64),_0x114057={};_0x114057['nameCN']='',_0x114057[_0x2c6bf5(0xd5,0x46,0x28,0x7b)]='',_0x114057[_0x2c6bf5(0xd8,-0x61,0x4e,0x5)+_0x2c6bf5(0xaa,0x12e,0xbb,0xb3)]='',_0x114057[_0x3038a5(-0x115,-0x75,-0x19f,-0x12b)+_0x2c6bf5(0x92,-0x55,0x3a,0x84)]='';function _0x3038a5(_0x16f4a3,_0x585fa9,_0x2c3753,_0x1e607d){return _0x3953d2(_0x16f4a3-0x1ad,_0x1e607d-0xc2,_0x2c3753,_0x1e607d-0x10f);}_0x114057[_0x3038a5(-0x9e,-0x54,-0x15a,-0x12b)+_0x2c6bf5(-0x40,0x8c,0x21,-0x5b)]='',_0x114057[_0x3038a5(-0x294,-0x24c,-0x1d0,-0x1fd)+'FW']='',_0x114057[_0x3038a5(-0x204,-0x15b,-0x1b7,-0x1fd)+_0x3038a5(-0x25a,-0x215,-0x192,-0x1ae)]='',_0x114057[_0x3038a5(-0x1b2,-0x208,-0x274,-0x1ce)+'W']='',_0x114057[_0x2c6bf5(-0x10f,-0x5a,-0x75,-0x93)+_0x3038a5(-0x154,-0x1b2,-0x171,-0x1d2)]='',_0x114057['upperBodyN'+'SFW']='',_0x114057['upperBodyN'+'SFWBack']='',_0x114057[_0x2c6bf5(-0x4e,-0x51,-0xe6,-0x6c)+'FW']='',_0x114057['fullBodyNS'+'FWBack']='';const _0x480ec0=_0x114057,_0x389043={};_0x389043['中文名称']=_0x1d1419[_0x3038a5(-0x9a,-0x27,-0x169,-0xd8)],_0x389043['英文名称']=_0x1d1419['qSPMo'],_0x389043[_0x3038a5(-0x96,-0x5a,-0x124,-0x91)]='characterT'+'raits',_0x389043['五官外貌']=_0x1d1419[_0x3038a5(-0xf2,-0x178,-0x178,-0xb9)],_0x389043['五官外貌背面']=_0x1d1419[_0x3038a5(-0x4,-0x10c,-0xa4,-0xc1)],_0x389043[_0x2c6bf5(-0x1c,-0x16,-0x32,0x45)]=_0x1d1419[_0x3038a5(-0x1bb,-0x1c6,-0x116,-0x1d7)];function _0x2c6bf5(_0x234cb3,_0x493ce0,_0x50773f,_0x3718bc){return _0x3953d2(_0x234cb3-0x53,_0x50773f-0x21b,_0x493ce0,_0x3718bc-0x6f);}_0x389043[_0x3038a5(-0x208,-0x14d,-0x1b5,-0x1f3)]=_0x1d1419[_0x2c6bf5(0xc2,-0x1a,0x27,0xf2)],_0x389043['下半身SFW']=_0x1d1419[_0x2c6bf5(0x139,-0x3,0x8f,-0x20)],_0x389043[_0x2c6bf5(-0x25,-0xb4,-0xb8,-0x86)]=_0x1d1419[_0x3038a5(-0x204,-0x2bb,-0x1d5,-0x1e7)],_0x389043[_0x3038a5(-0x75,-0xd0,-0x8b,-0x153)]=_0x1d1419[_0x2c6bf5(0x15,0x116,0x87,-0x3d)],_0x389043[_0x3038a5(-0x8e,-0x90,-0xa1,-0x119)]=_0x1d1419[_0x2c6bf5(0x95,0x115,0x5b,0x75)],_0x389043[_0x3038a5(-0x232,-0x176,-0x1b3,-0x158)]='fullBodyNS'+'FW',_0x389043[_0x2c6bf5(0x22,-0x15d,-0xa6,-0xbb)]=_0x1d1419[_0x3038a5(-0x12f,-0x191,-0x12c,-0x1a4)];const _0xc3e238=_0x389043;for(const _0x4a8b70 of _0x59c239){const _0x5c2f82=_0x4a8b70[_0x2c6bf5(-0x8c,-0xb0,-0x81,-0xea)](':');if(_0x5c2f82===-(0x2*-0xa4c+-0x541*0x7+0x3960))continue;const _0x33d301=_0x4a8b70[_0x3038a5(-0x137,-0x293,-0x2aa,-0x1f6)](0x22*-0xb3+0x39c*-0x3+0x229a,_0x5c2f82)[_0x3038a5(-0x107,-0x13c,-0x162,-0x107)](),_0x425dd0=_0x4a8b70[_0x3038a5(-0x292,-0x1db,-0x24a,-0x1f6)](_0x1d1419[_0x2c6bf5(-0xc6,0x65,-0x5a,-0x7c)](_0x5c2f82,-0x2c0+-0x2*0xde+0x17f*0x3))[_0x3038a5(-0x6e,-0x31,-0x19b,-0x107)]();if(_0xc3e238[_0x33d301])_0x1d1419[_0x3038a5(-0x1c4,-0x1ea,-0x191,-0x233)](_0x1d1419['jyFXr'],_0x1d1419[_0x3038a5(-0x112,-0x151,-0x145,-0x1b2)])?_0x3c2f58(_0xc8f732[_0x3038a5(-0x124,-0x1ca,-0x1f3,-0x1d9)]):_0x480ec0[_0xc3e238[_0x33d301]]=_0x425dd0;else{if(_0x33d301&&_0x425dd0){if(_0x1d1419['ajEHk']===_0x1d1419['ajEHk'])console['log'](_0x3038a5(-0xfd,-0x1ae,-0xbd,-0xe2)+_0x3038a5(-0x131,-0x1a1,-0x169,-0x197)+_0x2c6bf5(-0xe,-0xae,-0x68,-0x41)+'字段\x20\x22'+_0x33d301+'\x22');else{const _0x5e9bd2=_0x125bc5[_0x3038a5(-0xc9,-0x23,-0x13a,-0xe6)+_0x3038a5(-0x19a,-0x15a,-0x1dd,-0x1e9)](_0x3038a5(-0x18e,-0x3d,0xe,-0xb1)+_0x57dcbe);_0x5e9bd2&&(_0x5e9bd2['value']=_0x13d4b1[_0xa46d90],_0x1d1419[_0x3038a5(-0x14a,-0xb9,-0xd4,-0xbf)](_0x428572,_0x5e9bd2)['trigger'](_0x1d1419[_0x2c6bf5(-0x75,0x62,0x63,0x5e)]));}}}}if(!_0x480ec0[_0x2c6bf5(0xa4,-0x89,0x0,0x7e)]){if(_0x1d1419[_0x3038a5(-0x283,-0x272,-0x29d,-0x23c)]!==_0x1d1419['ANulx'])_0x4caa0d='诊断：检测到以下变量'+_0x2c6bf5(-0xc9,-0x17d,-0xb2,-0x52)+[..._0x43fe3a][_0x2c6bf5(0x4,-0x79,0x36,0x2e)]('、')+'\x0a';else return null;}return console[_0x2c6bf5(-0xd1,-0x9e,-0x27,-0xf)](_0x1d1419[_0x2c6bf5(-0x2,0x0,-0x8f,-0x77)],_0x480ec0),_0x480ec0;}function parseOutfitData(_0x435171){const _0x4144f2={};_0x4144f2[_0x312e2c(-0xab,-0xd0,-0x73,-0x6d)]=function(_0x12f3bc,_0x413cbc){return _0x12f3bc===_0x413cbc;},_0x4144f2[_0x32faa8(0x472,0x464,0x52c,0x506)]=_0x32faa8(0x4c9,0x4e0,0x440,0x4b7),_0x4144f2['YAVmX']=_0x312e2c(0x7d,0x4e,0x166,0x9f),_0x4144f2['YKWkh']='nameEN',_0x4144f2[_0x32faa8(0x50d,0x4f1,0x52b,0x553)]=_0x312e2c(0x35,0x4a,0xff,0x5e),_0x4144f2[_0x32faa8(0x4f7,0x4ad,0x568,0x521)]=_0x312e2c(-0x57,0xf9,0x21,0x27),_0x4144f2[_0x312e2c(0x204,0x211,0xe5,0x13b)]=_0x32faa8(0x652,0x576,0x5ab,0x5e2)+'ck',_0x4144f2['HSHMN']=function(_0x2f9798,_0x3fdf8d){return _0x2f9798!==_0x3fdf8d;},_0x4144f2[_0x312e2c(0xb1,0x8e,0x8d,0xbc)]='BaOdr';function _0x312e2c(_0x3127e4,_0x28edd2,_0x3a6930,_0x40caf8){return _0x3953d2(_0x3127e4-0x1f,_0x40caf8-0x28f,_0x28edd2,_0x40caf8-0x7d);}_0x4144f2[_0x32faa8(0x479,0x473,0x423,0x493)]=function(_0x177e08,_0x5cd611){return _0x177e08+_0x5cd611;},_0x4144f2['yFiAA']=function(_0x1b04a4,_0x240273){return _0x1b04a4&&_0x240273;},_0x4144f2[_0x312e2c(0xbb,0xb4,0x108,0xb9)]=_0x312e2c(0x155,0x77,0x112,0xeb)+'PromptModi'+_0x32faa8(0x4d6,0x51a,0x446,0x3a2)+'数据:';const _0x3d1779=_0x4144f2,_0x1dd2eb=_0x435171[_0x312e2c(-0x1b,0xc9,0x2e,0x6)]('\x0a')[_0x312e2c(-0x10e,-0xd0,-0x4c,-0x77)](_0x5d8934=>_0x5d8934[_0x32faa8(0x4cd,0x5f2,0x53b,0x5f4)]())[_0x312e2c(-0x39,0xf6,-0x1d,0x82)](_0x47b10d=>_0x47b10d),_0x29e457={};_0x29e457[_0x312e2c(0x62,-0x60,0x14b,0x74)]='',_0x29e457[_0x32faa8(0x543,0x510,0x511,0x573)]='',_0x29e457[_0x32faa8(0x50c,0x59d,0x514,0x4c9)]='',_0x29e457[_0x32faa8(0x3f4,0x518,0x4d3,0x47e)]='',_0x29e457[_0x312e2c(0x2d,0x6b,0x32,0xf6)+_0x312e2c(0x184,0x122,0xbc,0xe6)]='',_0x29e457[_0x32faa8(0x502,0x481,0x49c,0x542)]='',_0x29e457[_0x312e2c(0x152,0x147,0xe4,0x136)+'ck']='';const _0x32ded4=_0x29e457,_0x534d94={};_0x534d94[_0x312e2c(0x54,-0x5d,-0x12b,-0x4b)]=_0x3d1779[_0x312e2c(0x51,-0x18,0x164,0xa7)],_0x534d94[_0x32faa8(0x55d,0x54b,0x552,0x614)]=_0x32faa8(0x47e,0x512,0x4e9,0x555);function _0x32faa8(_0x11f311,_0x553981,_0x5a969e,_0x2724ef){return _0x3953d2(_0x11f311-0x1ae,_0x5a969e-0x704,_0x553981,_0x2724ef-0x152);}_0x534d94[_0x312e2c(0xed,0x10c,0x11d,0xfc)]=_0x3d1779['YKWkh'],_0x534d94['上半身']=_0x3d1779[_0x312e2c(0x178,0x15f,0x21,0xb6)],_0x534d94[_0x32faa8(0x413,0x495,0x49d,0x412)]='upperBodyB'+_0x312e2c(0x1e,0xcf,0x1aa,0xe6),_0x534d94[_0x312e2c(0x17f,0x1e8,0x1a5,0x112)]=_0x3d1779[_0x312e2c(0x12e,0x13e,0xe7,0xf3)],_0x534d94['下半身背面']=_0x3d1779[_0x32faa8(0x56f,0x668,0x5b0,0x587)];const _0x53913c=_0x534d94;for(const _0x48b294 of _0x1dd2eb){if(_0x3d1779[_0x312e2c(0x43,0x174,0xff,0xe3)](_0x3d1779[_0x32faa8(0x5e7,0x5bc,0x531,0x492)],_0x3d1779[_0x32faa8(0x489,0x482,0x531,0x555)])){if(_0x3d1779['JgZbe'](_0x11836f[_0x312e2c(0x78,-0x2c,0x96,0x73)],_0x3d1779[_0x312e2c(0xca,0x138,0x100,0xb7)])&&_0x274f05[_0x312e2c(-0x2e,-0x4b,-0xd3,-0x35)][_0x312e2c(0x185,0x21,0x167,0xbf)](_0x96f3bf))return _0x44d10e;}else{const _0x1ebd8f=_0x48b294['indexOf'](':');if(_0x1ebd8f===-(0x685*0x1+0x1175*0x1+0x1*-0x17f9))continue;const _0x271a94=_0x48b294[_0x32faa8(0x3f0,0x442,0x44c,0x4cf)](0x1069+0x12b0+-0x2319,_0x1ebd8f)[_0x312e2c(0x30,0xf,0x14e,0xc6)](),_0x463e24=_0x48b294[_0x32faa8(0x51d,0x3d0,0x44c,0x513)](_0x3d1779['GMRkt'](_0x1ebd8f,0xbd2+-0x1*-0x1c03+0x9f5*-0x4))[_0x32faa8(0x5d6,0x568,0x53b,0x4dc)]();if(_0x53913c[_0x271a94])_0x32ded4[_0x53913c[_0x271a94]]=_0x463e24;else _0x3d1779[_0x32faa8(0x53b,0x596,0x4da,0x456)](_0x271a94,_0x463e24)&&console[_0x312e2c(0x126,0x41,-0x5,0x4d)](_0x32faa8(0x57c,0x543,0x560,0x5b4)+_0x312e2c(0xdc,0x84,0x8b,0x36)+_0x32faa8(0x49e,0x366,0x42b,0x38d)+_0x32faa8(0x3d8,0x4b8,0x421,0x37d)+_0x271a94+'\x22');}}if(!_0x32ded4['nameCN'])return null;return console['log'](_0x3d1779[_0x32faa8(0x606,0x49e,0x52e,0x5ed)],_0x32ded4),_0x32ded4;}function extractCharacterAndOutfitTags(_0x1e9a5d){const _0x3427c9={'HciIM':_0x3d2c75(0x21,0xfb,0x90,0x39),'XHfBv':_0x3d2c75(0x19b,0xe3,0xee,0x151),'juibG':_0x3d2c75(0x1d8,0x1f4,0x2ae,0x170),'CEUlL':function(_0x1faa3e,_0x592045){return _0x1faa3e===_0x592045;},'ITgDh':function(_0x46ddd8,_0x1d306f){return _0x46ddd8===_0x1d306f;},'gfSut':_0x3d2c75(0x221,0x273,0x257,0x29b),'KyQbW':function(_0x4c909d,_0x4c88ca){return _0x4c909d(_0x4c88ca);},'dWzTV':_0x3d2c75(0x1f4,0x1b3,0x220,0x247),'FUYCO':_0x3d2c75(0x1e5,0x1a9,0x186,0x203),'TUFeK':_0x3d2c75(0xe7,0x1b0,0x23c,0x102),'IsOeI':_0x267762(0x36c,0x2d4,0x38c,0x317),'mcOUs':_0x267762(0x1c1,0x285,0x1f8,0x262),'AoNBJ':'OogpP','fAfec':_0x3d2c75(0x192,0xf1,0x3a,0x169)},_0x37033a=[];function _0x267762(_0x49aaed,_0x583c2f,_0x38b490,_0x239d85){return _0x3953d2(_0x49aaed-0x52,_0x583c2f-0x4b8,_0x38b490,_0x239d85-0x1e5);}_0x1e9a5d=_0x1e9a5d[_0x267762(0x137,0x207,0x1b4,0x244)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x267762(0x335,0x2ef,0x224,0x27c)]();const _0x1bd78f=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x3e6dc7;while((_0x3e6dc7=_0x1bd78f['exec'](_0x1e9a5d))!==null){const _0x122624=_0x3e6dc7[0x1898+0x1358+0x3*-0xea5],_0x1b8343=preprocessTagContent(_0x3e6dc7[-0x539+-0x1*0x2004+0x253f]),_0x32c04c=_0x3e6dc7[_0x267762(0x3d7,0x321,0x3e7,0x367)];if(_0x3427c9['CEUlL'](_0x122624,'人物')){if(_0x3427c9[_0x3d2c75(0x13f,0x178,0x218,0xb0)](_0x3427c9['gfSut'],_0x3427c9['gfSut'])){const _0x54be6a=_0x3427c9[_0x267762(0x1f8,0x1cd,0x1d2,0x194)](parseCharacterData,_0x1b8343);if(_0x54be6a){if(_0x3427c9[_0x3d2c75(0x108,0x178,0x135,0xf1)](_0x3427c9[_0x3d2c75(0xd5,0x170,0xa6,0x99)],_0x3427c9[_0x267762(0x206,0x25c,0x324,0x1b6)]))_0x4cd4e8?_0x12e85c['matchedOut'+_0x267762(0x28e,0x2c9,0x295,0x319)]['push'](_0x520e18[_0x3d2c75(0x33a,0x262,0x1ca,0x31c)]):_0x1791a3[_0x267762(0x324,0x352,0x34a,0x273)](_0x5371c9['data']);else{const _0x543549={};_0x543549['type']=_0x3427c9[_0x3d2c75(0x123,0x140,0x10d,0x1e7)],_0x543549[_0x267762(0x294,0x35b,0x2c9,0x384)]=_0x54be6a,_0x543549[_0x267762(0x162,0x211,0x2eb,0x280)]=_0x32c04c,_0x543549['matchedOut'+_0x267762(0x304,0x2c9,0x2d6,0x222)]=[],_0x37033a[_0x267762(0x38e,0x352,0x2a0,0x289)](_0x543549);}}}else{const _0x25f113={};_0x25f113[_0x267762(0x1eb,0x29c,0x2ca,0x1ed)]=_0x3427c9[_0x3d2c75(0x1f7,0x11b,0x144,0x155)],_0x25f113[_0x3d2c75(0x112,0xfb,0x17b,0x81)]=_0x3d2c75(0x2ae,0x24a,0x1eb,0x235)+_0x33c6cf[_0x267762(0x306,0x273,0x2f2,0x244)]+'张'+_0x4ec90e+']',_0x569793['push'](_0x25f113);}}else{if(_0x3427c9['CEUlL'](_0x122624,'服装')){const _0xfe1a9f=parseOutfitData(_0x1b8343);if(_0xfe1a9f){const _0x459bf3={};_0x459bf3['type']=_0x3427c9[_0x267762(0x434,0x36d,0x3f9,0x337)],_0x459bf3['data']=_0xfe1a9f,_0x459bf3[_0x3d2c75(0x4b,0x118,0x4d,0xe3)]=_0x32c04c,_0x37033a[_0x267762(0x34f,0x352,0x2ae,0x279)](_0x459bf3);}}}}_0x37033a[_0x3d2c75(0x17b,0x147,0x213,0x110)]((_0x3224a4,_0x537d1e)=>_0x3224a4[_0x3d2c75(0xb7,0x118,0x138,0x10e)]-_0x537d1e[_0x267762(0x1f0,0x211,0x205,0x2ae)]);let _0x478906=null;function _0x3d2c75(_0x1452a,_0xd03070,_0x1eee99,_0x317db8){return _0x3953d2(_0x1452a-0xd4,_0xd03070-0x3bf,_0x317db8,_0x317db8-0xb3);}const _0x5365cd=[],_0x432d9f=[];for(const _0x5796bd of _0x37033a){if(_0x3427c9[_0x267762(0x2d7,0x271,0x349,0x214)]('qhgeS',_0x267762(0x2cf,0x2c0,0x352,0x354))){if(_0x3427c9['CEUlL'](_0x5796bd[_0x267762(0x352,0x29c,0x25c,0x363)],_0x3427c9[_0x3d2c75(0x61,0x140,0xd3,0x188)])){if(_0x3427c9[_0x3d2c75(0x1aa,0x13a,0x1a5,0x16c)]!==_0x3d2c75(0x245,0x167,0x173,0x144))_0x478906=_0x5796bd,_0x5365cd[_0x3d2c75(0x194,0x259,0x23c,0x28e)](_0x5796bd);else{const _0x1bd03d=_0x48c5b5['data'];let _0x293092=_0x3427c9[_0x267762(0x303,0x350,0x3b7,0x36a)];return _0x293092+=_0x267762(0x2bc,0x305,0x341,0x329)+(_0x1bd03d[_0x3d2c75(0x101,0x1a4,0xf5,0x282)]||'')+'\x0a',_0x293092+=_0x267762(0x21e,0x1ed,0x2cb,0x1f8)+(_0x1bd03d[_0x3d2c75(0x133,0x1cc,0x20f,0x1b4)]||'')+'\x0a',_0x293092+=_0x267762(0x40f,0x340,0x30d,0x3cf)+(_0x1bd03d[_0x267762(0x3b6,0x2eb,0x254,0x277)+_0x267762(0x2fe,0x358,0x298,0x331)]||'')+'\x0a',_0x293092+=_0x3d2c75(0x1d4,0x234,0x29a,0x2db)+(_0x1bd03d['facialFeat'+_0x3d2c75(0x28f,0x1de,0x168,0x103)]||'')+'\x0a',_0x293092+='五官外貌背面:\x20'+(_0x1bd03d[_0x267762(0x390,0x2cb,0x206,0x233)+_0x3d2c75(0x1cd,0x1c5,0x14a,0x18c)]||'')+'\x0a',_0x293092+=_0x267762(0x223,0x2aa,0x306,0x2b9)+(_0x1bd03d[_0x3d2c75(0x17b,0x100,0x47,0x13d)+'FW']||'')+'\x0a',_0x293092+=_0x267762(0x3d5,0x33e,0x3af,0x39d)+(_0x1bd03d[_0x3d2c75(0x20,0x100,0x11b,0x4e)+_0x267762(0x27d,0x248,0x2b5,0x182)]||'')+'\x0a',_0x293092+=_0x267762(0x300,0x2da,0x257,0x36e)+(_0x1bd03d[_0x3d2c75(0x101,0x12f,0x190,0x161)+'W']||'')+'\x0a',_0x293092+='下半身SFW背面:\x20'+(_0x1bd03d[_0x3d2c75(0x74,0x12f,0x53,0x132)+'WBack']||'')+'\x0a',_0x293092+=_0x267762(0x145,0x1b4,0x23f,0xed)+(_0x1bd03d[_0x3d2c75(0x49,0x122,0x50,0x4e)+'SFW']||'')+'\x0a',_0x293092+=_0x267762(0x32e,0x311,0x276,0x2e4)+'\x20'+(_0x1bd03d[_0x267762(0x1b3,0x21b,0x202,0x204)+_0x3d2c75(0x1ce,0x1b7,0x10e,0x1bb)]||'')+'\x0a',_0x293092+='下半身NSFW:\x20'+(_0x1bd03d[_0x267762(0x17c,0x1b7,0x174,0x114)+'FW']||'')+'\x0a',_0x293092+=_0x3d2c75(0x196,0x176,0xac,0x187)+'\x20'+(_0x1bd03d['fullBodyNS'+_0x267762(0x1f1,0x248,0x2bd,0x2c1)]||'')+'\x0a',_0x293092+=_0x3427c9[_0x3d2c75(0x264,0x20a,0x233,0x281)],_0x293092;}}else{if(_0x5796bd[_0x3d2c75(0x173,0x1a3,0x15b,0x105)]===_0x3427c9['IsOeI']){if(_0x3427c9['CEUlL'](_0x3427c9['AoNBJ'],_0x3427c9[_0x267762(0x1bd,0x254,0x194,0x22a)]))return _0x51d6c4&&_0x59e468[_0x267762(0x256,0x2e8,0x26b,0x2d8)](_0x557118)&&(_0x1879b0&&_0x297030['add'](_0xf5f1f6)),_0x483f92[_0x3d2c75(0x154,0xf5,0x89,0xec)](_0x11b9ff,_0x47f007);else _0x478906?_0x478906[_0x3d2c75(0x14c,0x1e5,0x168,0x147)+_0x3d2c75(0x19d,0x1d0,0x19f,0x125)][_0x3d2c75(0x231,0x259,0x279,0x28a)](_0x5796bd[_0x267762(0x3aa,0x35b,0x3d5,0x2eb)]):_0x432d9f[_0x267762(0x42c,0x352,0x2c1,0x3c6)](_0x5796bd['data']);}}}else _0x53f707[_0x3d2c75(0x189,0xd1,0xd1,0x45)]=[];}return{'characters':_0x5365cd[_0x267762(0x222,0x1b2,0x215,0x1b5)](_0x3cdb52=>({..._0x3cdb52['data'],'matchedOutfits':_0x3cdb52[_0x267762(0x3bb,0x2de,0x3b6,0x2ae)+'fits']})),'outfits':_0x432d9f};}function getCurrentCharacterPreset(){const _0x49e3d8={};function _0x3ec179(_0x446cf8,_0xaa7a12,_0x46df10,_0x65d444){return _0x3953d2(_0x446cf8-0x127,_0x446cf8-0x760,_0x46df10,_0x65d444-0x84);}function _0x1aeb6a(_0x131c7f,_0x108e7f,_0x4bed29,_0x5e8377){return _0x3953d2(_0x131c7f-0xb8,_0x131c7f-0x668,_0x108e7f,_0x5e8377-0x124);}_0x49e3d8[_0x3ec179(0x481,0x55b,0x50a,0x3f9)]=function(_0x2c4b28,_0x415fb8){return _0x2c4b28!==_0x415fb8;},_0x49e3d8[_0x3ec179(0x4b0,0x55a,0x3d1,0x457)]='XGfGp';const _0x41c089=_0x49e3d8,_0x2e5d2e=extension_settings[extensionName],_0xe76634=_0x2e5d2e[_0x1aeb6a(0x3ba,0x496,0x419,0x45b)+_0x3ec179(0x501,0x5b2,0x4ab,0x4d4)];if(!_0xe76634||!_0x2e5d2e['characterP'+_0x1aeb6a(0x516,0x480,0x49f,0x4d8)][_0xe76634]){if(_0x41c089[_0x1aeb6a(0x389,0x337,0x45c,0x3e7)](_0x41c089[_0x3ec179(0x4b0,0x433,0x512,0x51c)],_0x41c089[_0x3ec179(0x4b0,0x581,0x443,0x468)]))_0x416935&&_0x4d84f4['add'](_0x23f424);else return null;}const _0x251d9a={};return _0x251d9a['id']=_0xe76634,_0x251d9a[_0x3ec179(0x603,0x5a2,0x53c,0x5cc)]=_0x2e5d2e[_0x1aeb6a(0x3ba,0x336,0x3fc,0x32d)+'resets'][_0xe76634],_0x251d9a;}function buildCharacterText(_0x289dcc){const _0x5ac99d={};_0x5ac99d[_0x1214cf(-0x17f,-0x1c8,-0x139,-0xd9)]=_0x493d80(0x290,0x284,0x247,0x317);const _0x220783=_0x5ac99d,_0x42f0a9=_0x289dcc[_0x1214cf(0xbd,0x7e,0x8,0x72)];let _0x459da6=_0x493d80(0x17f,0x255,0xb3,0x1a4);_0x459da6+='中文名称:\x20'+(_0x42f0a9[_0x1214cf(-0xce,-0x12c,-0xb6,-0xb7)]||'')+'\x0a',_0x459da6+=_0x1214cf(-0x1db,-0xa0,-0x166,-0x222)+(_0x42f0a9[_0x1214cf(-0x43,-0x37,-0x8e,0x2f)]||'')+'\x0a',_0x459da6+=_0x1214cf(0x6a,0x3b,-0x13,0xc)+(_0x42f0a9[_0x493d80(0x28e,0x29a,0x257,0x254)+_0x493d80(0x2fb,0x2dd,0x31c,0x33f)]||'')+'\x0a',_0x459da6+=_0x493d80(0x2d0,0x26a,0x298,0x2cb)+(_0x42f0a9['facialFeat'+_0x493d80(0x27a,0x2cc,0x29d,0x2aa)]||'')+'\x0a';function _0x1214cf(_0x4e4178,_0x574ab1,_0x147c23,_0x3a5bc2){return _0x3953d2(_0x4e4178-0x92,_0x147c23-0x165,_0x3a5bc2,_0x3a5bc2-0x1a7);}function _0x493d80(_0x186832,_0x2855e4,_0x739b95,_0x400111){return _0x3953d2(_0x186832-0xbe,_0x186832-0x45b,_0x400111,_0x400111-0xdc);}return _0x459da6+=_0x1214cf(-0x4c,-0x14,-0xf1,-0x1cc)+(_0x42f0a9[_0x1214cf(-0x112,-0x62,-0x88,-0x34)+_0x1214cf(-0xe5,-0x91,-0x95,-0xd4)]||'')+'\x0a',_0x459da6+=_0x1214cf(-0xab,-0x56,-0xa9,-0x4e)+(_0x42f0a9['upperBodyS'+'FW']||'')+'\x0a',_0x459da6+=_0x493d80(0x2e1,0x213,0x24a,0x360)+(_0x42f0a9[_0x493d80(0x19c,0x16a,0x1c6,0x1d6)+'FWBack']||'')+'\x0a',_0x459da6+=_0x1214cf(-0x14a,-0x117,-0x79,-0x128)+(_0x42f0a9[_0x1214cf(-0x4c,-0x1b8,-0x12b,-0x14d)+'W']||'')+'\x0a',_0x459da6+=_0x1214cf(-0x89,-0x1d5,-0x164,-0x1df)+(_0x42f0a9[_0x1214cf(-0x207,-0x83,-0x12b,-0x193)+'WBack']||'')+'\x0a',_0x459da6+=_0x1214cf(-0x170,-0x276,-0x19f,-0x21d)+(_0x42f0a9['upperBodyN'+_0x493d80(0x27f,0x2da,0x249,0x339)]||'')+'\x0a',_0x459da6+=_0x1214cf(-0xec,0x4b,-0x42,-0x8b)+'\x20'+(_0x42f0a9['upperBodyN'+_0x493d80(0x253,0x283,0x283,0x233)]||'')+'\x0a',_0x459da6+=_0x1214cf(-0xd9,-0xc8,-0xc9,-0x186)+(_0x42f0a9[_0x1214cf(-0x202,-0x226,-0x19c,-0x1a9)+'FW']||'')+'\x0a',_0x459da6+=_0x493d80(0x212,0x14e,0x13d,0x2da)+'\x20'+(_0x42f0a9[_0x493d80(0x15a,0x101,0x1fe,0x7b)+_0x1214cf(-0x1d8,-0x10a,-0x10b,-0x188)]||'')+'\x0a',_0x459da6+=_0x220783[_0x1214cf(-0x95,-0x7b,-0x139,-0x159)],_0x459da6;}export async function handleCharacterPromptModify(_0x19a9c6,_0x47df89=[]){const _0x251b97={'xcFMP':function(_0xf9edaf,_0x511278){return _0xf9edaf!==_0x511278;},'ZoKDE':_0x17a2ad(0xa0,0x116,0xba,0x4),'yBFKW':'[character'+_0x17a2ad(0xc9,-0x8a,0x45,-0x31)+'fy]\x20Starti'+_0x17a2ad(0x191,0x79,0x10d,0xed)+_0x17a2ad(0xb0,0xda,0x11a,0x15e)+_0x17a2ad(0xf8,-0x2,0x35,0xe8)+'uest...','Faflx':_0x17a2ad(0x10f,0x113,0xfa,0xb7)+_0x17a2ad(-0xb,0x91,0x45,-0x5b)+_0x17a2ad(-0xcc,-0x19,-0x46,-0xd3)+'提示词修改请求...','VXqPO':function(_0x4ca0f5){return _0x4ca0f5();},'NRcgQ':function(_0x145789){return _0x145789();},'AokiQ':_0x5a0dff(-0xa5,-0x10f,-0x2f,-0x3f)+'PromptModi'+_0x17a2ad(0xd9,0x6f,0x3e,-0x55)+_0x5a0dff(-0x139,-0x1ec,-0x1c5,-0x1a0),'QwCDv':_0x5a0dff(-0x6a,-0x10f,-0x160,-0x173)+_0x5a0dff(-0x24f,-0x1c4,-0x138,-0x131)+_0x5a0dff(-0xdc,-0x1ae,-0x185,-0x158)+_0x5a0dff(-0x136,-0x1b1,-0x162,-0x116),'aSWbv':_0x5a0dff(-0x1c7,-0x10f,-0x70,-0x1d7)+'PromptModi'+'fy]\x20Saved\x20'+_0x5a0dff(-0x15d,-0x1f5,-0x1a0,-0x259)+':','HKGvi':_0x5a0dff(-0x1b9,-0x10f,-0xf9,-0x31)+'PromptModi'+_0x5a0dff(-0x25c,-0x1ae,-0x25e,-0x10d)+_0x5a0dff(-0x129,-0x1e1,-0x1ea,-0x217),'jsGrf':function(_0x23dcf2,_0x3d7f7d){return _0x23dcf2||_0x3d7f7d;},'WQwVb':function(_0x285ed4,_0x52edfc){return _0x285ed4===_0x52edfc;},'mzVUM':_0x17a2ad(0x125,0x5c,0x7b,0xca),'RnKLf':function(_0x4f00e7,_0x38a42d,_0x46b822){return _0x4f00e7(_0x38a42d,_0x46b822);},'lIwXq':_0x17a2ad(0x4f,-0x64,0x4e,0x113)+'y','FdjlJ':'[character'+_0x17a2ad(-0x2e,0x7d,0x45,-0x65)+_0x17a2ad(0xfd,0x135,0x12c,0xed)+'ter\x20list\x20t'+_0x5a0dff(-0x13,-0xd4,-0x60,-0x168)+_0x17a2ad(0x58,0xc,0x56,-0x2e),'jxTFx':function(_0x176779,_0x20b489){return _0x176779(_0x20b489);},'vHKoF':_0x17a2ad(0xa0,0x49,0xfa,0x13a)+_0x5a0dff(-0x284,-0x1c4,-0x101,-0x111)+_0x17a2ad(0x7c,0x20e,0x14f,0x227)+'后:','WRweb':_0x17a2ad(0x10b,0xfb,0xfa,0x1a)+'PromptModi'+_0x5a0dff(-0x7c,-0x106,-0x72,-0x3f)+_0x17a2ad(-0x7e,0x78,-0x55,0x3d)+'\x20message\x20i'+'ndex:','GdBqf':_0x17a2ad(-0xc1,0x38,0x1e,0x45),'GpzpH':_0x5a0dff(-0xb6,-0x10f,-0xe8,-0x8a)+'PromptModi'+_0x5a0dff(-0x232,-0x160,-0x12b,-0x134)+_0x17a2ad(0xc3,0x52,0xbe,0x31),'qFRmz':function(_0xd19b8c,_0x4fbce9){return _0xd19b8c>_0x4fbce9;},'gCFfp':_0x17a2ad(0xc7,0x157,0xe4,0x120),'BEvxy':_0x17a2ad(-0x94,-0x33,-0x62,-0x118),'guSts':function(_0x50c139,_0x11d76e){return _0x50c139>_0x11d76e;},'oDeUj':function(_0x12ec8b,_0x26ffbc,_0x30183f,_0x32f246,_0x57dc1d){return _0x12ec8b(_0x26ffbc,_0x30183f,_0x32f246,_0x57dc1d);},'UfYvA':'参考图片','DBTHX':'images\x20to\x20'+_0x5a0dff(-0x17f,-0x176,-0x204,-0x251)+'\x20index','yuuLM':function(_0x5d6658,_0x54eb6e,_0x403c82){return _0x5d6658(_0x54eb6e,_0x403c82);},'UzRZR':'[character'+'PromptModi'+_0x17a2ad(0xa5,0x205,0x130,0x206)+_0x5a0dff(-0x19c,-0x11c,-0x15c,-0x133),'hGfnM':function(_0x3b4ccc,_0x451053){return _0x3b4ccc===_0x451053;},'IGNME':_0x5a0dff(-0x10b,-0x193,-0x1e6,-0x1cf),'BpuXk':function(_0x3c22dc,_0x56a433){return _0x3c22dc===_0x56a433;},'CNGrs':'未在\x20LLM\x20输出中'+_0x5a0dff(-0x18b,-0x1cc,-0x1c9,-0x23d),'gBDzS':_0x17a2ad(0x129,0x138,0xfa,0xc3)+_0x17a2ad(0x111,-0x49,0x45,0x39)+_0x5a0dff(-0x1fa,-0x18f,-0x173,-0x1ac)+'racter/out'+_0x17a2ad(-0xaa,-0xc9,-0x33,0xa7)+_0x17a2ad(0x77,0x50,-0x15,0x0)+_0x17a2ad(0x112,0x13a,0xdb,0x1a3),'wYRtc':_0x17a2ad(0xef,0xe3,0xfa,0x1a8)+'PromptModi'+_0x5a0dff(-0x113,-0x1af,-0x271,-0x1fa)+_0x17a2ad(0xe8,0x11d,0xd7,0x16c)+_0x17a2ad(-0x26,-0x20,-0x29,0xb0)+_0x17a2ad(0x26,-0x6c,-0x64,-0xbb),'kkloY':_0x5a0dff(-0x123,-0x10f,-0x153,-0xbd)+_0x17a2ad(0xdd,0xa5,0x45,0xd3)+_0x5a0dff(-0x254,-0x225,-0x2fe,-0x29a)+_0x5a0dff(-0x198,-0x13f,-0x167,-0x15a),'ZKZVf':'fVSLW','YEqSy':_0x5a0dff(-0x1da,-0x255,-0x243,-0x2db),'JmIhs':function(_0x42c3d7,_0x5c097d){return _0x42c3d7>_0x5c097d;},'fEqtL':_0x5a0dff(-0x2bd,-0x25b,-0x2c0,-0x31b),'jXZaB':'uqsiz','gdIMi':function(_0x11f1cf,_0x2fef9f){return _0x11f1cf(_0x2fef9f);},'GqquN':_0x17a2ad(0xc0,0xa9,0x69,0xff)+_0x5a0dff(-0x173,-0x1c9,-0x23a,-0x1a7),'BlYGW':function(_0x3fe532,_0x15325c){return _0x3fe532===_0x15325c;},'atVnX':_0x5a0dff(-0x1ed,-0x20a,-0x1f1,-0x14e),'jNcXg':'[character'+_0x5a0dff(-0x114,-0x1c4,-0x22c,-0x233)+_0x17a2ad(0xa9,0xd5,0x20,-0x78)};function _0x5a0dff(_0x9f4985,_0x3cbe90,_0x562735,_0x373970){return _0x3953d2(_0x9f4985-0xe6,_0x3cbe90-0x95,_0x562735,_0x373970-0x104);}console['log'](_0x251b97[_0x17a2ad(0x1e,-0x49,-0x56,-0xb5)]);function _0x17a2ad(_0x4c06a9,_0x1a4398,_0x95aacb,_0x57d1a4){return _0x3953d2(_0x4c06a9-0x4a,_0x95aacb-0x29e,_0x4c06a9,_0x57d1a4-0x7d);}toastr[_0x5a0dff(-0x13e,-0x1bd,-0xff,-0x267)](_0x251b97[_0x17a2ad(0x81,0x6e,0x142,0xa3)]);try{const _0x1aefee=_0x251b97['VXqPO'](getContext),_0x4ec339=extension_settings[extensionName],_0x21cec2=_0x251b97[_0x17a2ad(0xd6,0xec,0x128,0x197)](getCurrentCharacterPreset);if(!_0x21cec2){toastr[_0x17a2ad(0x115,-0x4,0x4a,-0x1b)](_0x17a2ad(0x1d3,0xdb,0x110,0x4c));return;}console[_0x5a0dff(-0xf1,-0x1ad,-0x251,-0x209)](_0x251b97['AokiQ'],_0x21cec2['id']);const _0xa27171=_0x21cec2[_0x5a0dff(0x4,-0xc8,-0xc0,-0xce)][_0x5a0dff(-0x1ff,-0x23f,-0x235,-0x30a)+_0x17a2ad(0x127,0xc6,0x140,0x10c)]||'',_0x4ac676=_0x21cec2[_0x17a2ad(0x1c4,0xe3,0x141,0xf4)][_0x17a2ad(-0x108,-0xa6,-0x36,0x96)+_0x17a2ad(-0x32,0xef,0x87,0x7a)]||'',_0x13a80e=_0x21cec2['data'][_0x5a0dff(-0x2b8,-0x23f,-0x314,-0x1f3)+_0x5a0dff(-0xc8,-0xe2,-0x131,-0x131)]||{};console[_0x5a0dff(-0x1c8,-0x1ad,-0x111,-0x195)](_0x251b97[_0x17a2ad(-0x90,-0xf2,-0x47,-0xd3)],_0xa27171),console[_0x17a2ad(0x12a,0xd7,0x5c,0xf1)](_0x251b97[_0x5a0dff(-0xf,-0xcc,-0x126,-0x161)],_0x4ac676),console[_0x5a0dff(-0x1fc,-0x1ad,-0xf3,-0x1ad)](_0x251b97[_0x17a2ad(0x5b,0x7e,-0x1d,0x5e)],_0x13a80e);const _0xaf616=_0x251b97[_0x17a2ad(0x11a,0x186,0xf3,0x1a7)](_0x19a9c6,''),_0x2767ea=[];_0x19a9c6&&_0x2767ea['push'](_0x19a9c6);_0xa27171&&_0x2767ea['push'](_0xa27171);_0x4ac676&&(_0x251b97[_0x5a0dff(-0x1b2,-0xd8,-0x166,-0x142)](_0x251b97[_0x5a0dff(0x14,-0xbc,-0xac,-0x45)],'TyzQg')?_0x2d3bdd[_0x17a2ad(0x153,0x15c,0x138,0xc8)](_0x3a589a[_0x17a2ad(0x209,0x77,0x141,0x205)]):_0x2767ea[_0x5a0dff(-0x59,-0xd1,-0xdd,-0x193)](_0x4ac676));const _0x3b41d5=_0x2767ea[_0x17a2ad(0x14,0x94,0xb9,0x144)]('\x0a');console[_0x17a2ad(0x5c,0x102,0x5c,-0x3b)](_0x5a0dff(-0x136,-0x10f,-0x12f,-0xd1)+_0x5a0dff(-0x1cc,-0x1c4,-0xeb,-0x283)+'fy]\x20Charac'+'ter\x20trigge'+'r\x20text:',_0x3b41d5);let _0x1e2a08=_0x251b97[_0x5a0dff(-0x136,-0x1fd,-0x236,-0x12d)](buildPromptForRequestType,_0x251b97['lIwXq'],_0xaf616);const _0x329a41=generateCharacterListText(_0x3b41d5),_0x5eff92=generateOutfitEnableListText(),_0xf19bf1=generateCommonCharacterListText();console[_0x17a2ad(0xe8,0x8,0x5c,0x11a)](_0x251b97[_0x5a0dff(-0x1cb,-0x16f,-0xcb,-0x1b4)],_0x329a41);const _0x21e781=_0x1aefee['chatMetada'+'ta']?.[_0x17a2ad(0xbf,0xc7,0xe2,0xd1)]||{},_0x16c8e8=_0x251b97['jxTFx'](buildCharacterText,_0x21cec2);_0x1e2a08=_0x251b97[_0x17a2ad(0xf3,0xf5,0x13b,0xad)](mergeAdjacentMessages,_0x1e2a08),console[_0x17a2ad(-0x3e,0x12a,0x5c,-0x49)](_0x251b97['vHKoF'],_0x1e2a08);const _0x531356=_0x251b97[_0x5a0dff(-0x235,-0x1fd,-0x24a,-0x126)](findMessageIndexWithPlaceholder,_0x1e2a08,_0x17a2ad(-0xaf,-0x37,-0xf,0xcd));console['log'](_0x251b97[_0x17a2ad(0x162,0x50,0x12e,0x208)],_0x531356);const _0x342d9d={..._0x13a80e,..._0x21e781},_0x49f6b6={'context':_0xa27171,'worldBookContent':_0x4ac676,'variables':_0x342d9d,'userDemand':_0x251b97[_0x17a2ad(0x3b,0x1c8,0xf3,0xab)](_0x19a9c6,''),'characterListText':_0x329a41,'outfitEnableListText':_0x5eff92,'commonCharacterListText':_0xf19bf1},{messages:_0x86d679,replacedVariables:_0x5c3dd6}=_0x251b97['RnKLf'](replaceAllPlaceholders,_0x1e2a08,_0x49f6b6);_0x1e2a08=_0x86d679,_0x1e2a08=_0x12329d(_0x1e2a08,_0x251b97['GdBqf'],_0x16c8e8,_0x5c3dd6),console['log'](_0x251b97['GpzpH'],_0x1e2a08);let _0x5619d7='';if(_0x251b97[_0x17a2ad(0x26,0xf8,0xb5,0xc3)](_0x5c3dd6[_0x5a0dff(-0x158,-0x1f2,-0x1de,-0x1bc)],-0x1a34+0x8af+-0x1*-0x1185)){if(_0x251b97[_0x5a0dff(-0x265,-0x1d6,-0x116,-0x1f6)](_0x251b97[_0x5a0dff(-0x1a7,-0x242,-0x185,-0x1fe)],_0x251b97[_0x5a0dff(-0x225,-0x254,-0x300,-0x1ca)]))_0x5619d7=_0x17a2ad(0x94,-0x49,0x2c,-0x69)+_0x17a2ad(-0x83,0xad,-0x2f,0x49)+[..._0x5c3dd6][_0x5a0dff(-0x103,-0x150,-0xac,-0x79)]('、')+'\x0a';else return null;}_0x47df89&&_0x251b97[_0x5a0dff(-0x193,-0xc5,-0x13,-0xe5)](_0x47df89[_0x5a0dff(-0x11f,-0x1b0,-0x279,-0x13d)],0x2*-0xaa9+0x9c2*-0x1+0x1f14)&&_0x531356>=-0x16b7*0x1+0xdff*-0x2+-0x10e7*-0x3&&(_0x1e2a08=_0x251b97[_0x17a2ad(0x4c,0x9c,-0x7,0x7)](attachImagesToMessage,_0x1e2a08,_0x531356,_0x47df89,_0x251b97[_0x17a2ad(0xde,0x67,0xb0,0xd6)]),console['log'](_0x17a2ad(0xb4,0x42,0xfa,0xf5)+_0x5a0dff(-0x276,-0x1c4,-0x1d5,-0x156)+'fy]\x20Attach'+'ed',_0x47df89['length'],_0x251b97[_0x17a2ad(0x100,0x1a4,0x12f,0x1fb)],_0x531356));updateCombinedPrompt(_0x1e2a08,_0x5619d7);const _0x3068d2={};_0x3068d2['timeoutMs']=0x493e0;const _0x17e478=await _0x251b97[_0x5a0dff(-0x112,-0x140,-0x9a,-0x92)](LLM_CHAR_MODIFY,_0x1e2a08,_0x3068d2);console[_0x5a0dff(-0x19c,-0x1ad,-0x12d,-0x20f)](_0x251b97[_0x17a2ad(0xf7,0x1f5,0x12a,0x17a)],_0x17e478);if(!_0x17e478){if(_0x251b97['hGfnM']('mOqCy',_0x17a2ad(-0x51,-0x29,0x47,0x124))){toastr[_0x5a0dff(-0x22e,-0x1bf,-0x1c3,-0x220)](_0x251b97['IGNME']);return;}else _0x4fdaf0[_0x5cd223]&&_0x251b97[_0x5a0dff(-0x19c,-0x1d6,-0x152,-0x230)](_0x3a9c3e[_0xa0369d],_0x3f7cc8[_0x56029a])&&_0x50907c++;}const _0x55e6aa=_0x251b97[_0x5a0dff(-0x1c,-0xce,-0x11,-0xf8)](extractCharacterAndOutfitTags,_0x17e478);if(_0x251b97[_0x5a0dff(-0x28c,-0x237,-0x23f,-0x1e1)](_0x55e6aa['characters'][_0x5a0dff(-0x12c,-0x1b0,-0x176,-0x17a)],0x936+0x1c75+0x25ab*-0x1)&&_0x251b97[_0x17a2ad(0x9e,0x68,0x131,0x1ee)](_0x55e6aa[_0x5a0dff(-0x230,-0x259,-0x30c,-0x2ab)]['length'],-0x55d*-0x2+-0x119*-0x10+0x8e*-0x33)){toastr['warning'](_0x251b97['CNGrs']),console['log'](_0x251b97[_0x17a2ad(0x86,-0xff,-0x3d,-0x3c)]),console[_0x5a0dff(-0x233,-0x1ad,-0x1f0,-0x28b)](_0x251b97[_0x17a2ad(0x22,0xa4,0x61,0x1e)],_0x17e478);return;}console[_0x5a0dff(-0x198,-0x1ad,-0x1d0,-0x18c)](_0x251b97[_0x17a2ad(0x58,0xb8,0xd2,0xb9)],_0x55e6aa);if(_0x55e6aa[_0x17a2ad(-0x10,0x7f,0x13,-0x20)][_0x17a2ad(0x4a,0x109,0x59,0xb1)]>0x1c48+0x2332+-0x7d*0x82){if(_0x251b97[_0x5a0dff(-0x153,-0x1d6,-0x137,-0x10a)](_0x251b97[_0x17a2ad(0xfa,0xe0,0x3b,-0x2f)],_0x251b97[_0x5a0dff(-0x300,-0x228,-0x1f6,-0x1ce)])){const _0x51b472=_0x55e6aa[_0x17a2ad(0x21,0xd6,0x13,0x39)][-0x1945+0x20a3+-0x17*0x52];await _0x251b97['RnKLf'](updateCharacterPresetFromLLM,_0x21cec2['id'],_0x51b472);}else _0x55f6b9[_0x3e1843]&&(_0xb2e79a[_0x557e1b]=_0x34d144[_0x461786]);}const _0x4e68bb=[..._0x55e6aa[_0x17a2ad(0x65,-0x105,-0x50,-0x1d)]];for(const _0x4b1e22 of _0x55e6aa[_0x17a2ad(-0xca,-0xd,0x13,-0x8b)]){_0x4b1e22[_0x17a2ad(0x8e,0x114,0xc4,0x4c)+_0x5a0dff(-0x1e1,-0x15a,-0x132,-0xb7)]&&_0x251b97['JmIhs'](_0x4b1e22[_0x5a0dff(-0xff,-0x145,-0x225,-0xd9)+_0x5a0dff(-0x123,-0x15a,-0x195,-0x90)]['length'],0x9a7+-0x1539+0xb92)&&_0x4e68bb[_0x5a0dff(-0x33,-0xd1,-0x155,-0x16f)](..._0x4b1e22[_0x5a0dff(-0x9c,-0x145,-0x11a,-0x1e6)+_0x5a0dff(-0xbc,-0x15a,-0x1ce,-0x83)]);}if(_0x251b97[_0x17a2ad(0x45,0x46,0xb5,0x6b)](_0x4e68bb['length'],0xb95*-0x2+0x19bf+-0x295)){if(_0x251b97[_0x5a0dff(-0x1ab,-0xd8,-0x4b,-0xc5)](_0x251b97[_0x5a0dff(-0x14a,-0x224,-0x2d3,-0x2d6)],_0x251b97[_0x17a2ad(0x24,-0xca,-0xa,-0xa1)])){const _0x110e4b={};_0x110e4b[_0x5a0dff(-0xf6,-0x187,-0x192,-0x168)]=_0x251b97[_0x17a2ad(-0xfe,-0xeb,-0x54,0x5b)],_0x110e4b[_0x17a2ad(0x1ba,0x16f,0x141,0xb2)]=_0x2f25b5,_0x110e4b[_0x17a2ad(0x4,0x47,-0x9,-0x57)]=_0x44af61,_0x2acb2[_0x17a2ad(0x13e,0x98,0x138,0x1cf)](_0x110e4b);}else await _0x251b97['gdIMi'](updateOutfitPresetsFromLLM,_0x4e68bb);}toastr[_0x17a2ad(-0xb6,-0x69,-0x40,-0xca)](_0x251b97['GqquN']);}catch(_0x3749a5){_0x251b97['BlYGW'](_0x251b97[_0x5a0dff(-0xdb,-0xfd,-0xb1,-0x4f)],_0x251b97[_0x5a0dff(-0x1c6,-0xfd,-0x20,-0x183)])?(console[_0x5a0dff(-0x187,-0x1bf,-0x1f9,-0x108)](_0x251b97[_0x5a0dff(-0x9b,-0x100,-0x1ca,-0xa7)],_0x3749a5),toastr[_0x5a0dff(-0x228,-0x1bf,-0x131,-0x21a)](_0x5a0dff(-0xc1,-0x131,-0x10b,-0xf6)+'\x20'+_0x3749a5[_0x5a0dff(-0x123,-0x111,-0x135,-0x6f)])):_0x3677b2[_0x17a2ad(0x153,0x13e,0x7c,0xf6)+_0x17a2ad(-0x8b,0x65,-0x2,-0x13)]={};}}async function updateCharacterPresetFromLLM(_0x5e3cc4,_0x53c6d2){const _0xb18a67={'mXOnw':function(_0xe13482,_0x2dbb65){return _0xe13482(_0x2dbb65);},'EtnlR':'角色修改\x20LLM\x20请'+_0x406083(0x313,0x227,0x272,0x2e7),'cJoBz':_0x4f53cb(-0xca,-0x255,-0x194,-0x25d),'eGEXx':function(_0x127573,_0x51974a){return _0x127573+_0x51974a;},'nrtRY':_0x406083(0x329,0x320,0x2ed,0x28b),'nrAyF':'英文名称','XZlRh':_0x4f53cb(-0x15e,-0x163,-0x199,-0x204),'anyCq':_0x4f53cb(-0x1fb,-0x220,-0x19c,-0x1db),'MteEj':_0x4f53cb(-0x4e,-0x1e1,-0x111,-0x60),'VAheN':_0x406083(0x21f,0x1f3,0x188,0x188),'GrNbn':_0x406083(0x117,0x16a,0x24d,0x17d),'AhiJY':_0x406083(0x1d4,0x1fd,0x11a,0x16a),'aFDNi':'下半身NSFW','vbPwg':_0x4f53cb(-0x20d,-0x28e,-0x1bd,-0x208),'qcnZq':function(_0x23119b,_0x2c542c){return _0x23119b!==_0x2c542c;},'aMJNn':function(_0x3b9cea,_0x218e87){return _0x3b9cea===_0x218e87;},'tdGUe':_0x4f53cb(-0x8,-0xd7,-0x30,0x7),'aVMth':_0x406083(0x292,0x226,0x25d,0x266)+'内容','vAqaU':function(_0x4716f3,_0x3448ed){return _0x4716f3(_0x3448ed);},'bwsyB':function(_0x38c206,_0xf2d3fb){return _0x38c206===_0xf2d3fb;},'kdFxo':_0x406083(0x2c6,0x297,0x248,0x2d3),'JCYZL':'PPpwT','ZCzNi':function(_0x5658a5){return _0x5658a5();},'gXpOi':'#st-chatu8'+'-tab-chara'+'cter','bYphM':function(_0x1e282a,_0x297150){return _0x1e282a!==_0x297150;},'bINHd':'kwPnt'},_0x369b67=extension_settings[extensionName],_0xc1dc68=_0x369b67[_0x4f53cb(-0x245,-0x20f,-0x172,-0x237)+_0x4f53cb(-0x5a,-0x45,-0x16,0x6d)][_0x5e3cc4];if(!_0xc1dc68){toastr[_0x406083(0x13d,0x19b,0x178,0x1e9)](_0x406083(0x2d0,0x267,0x1f9,0x252));return;}function _0x4f53cb(_0x546a19,_0x464100,_0x1a34a4,_0x2d6e6c){return _0x3953d2(_0x546a19-0xd,_0x1a34a4-0x13c,_0x546a19,_0x2d6e6c-0xfc);}const _0x4518ad={};_0x4518ad[_0x4f53cb(-0xcb,-0x1a5,-0xdf,-0x17b)]=_0xb18a67['nrtRY'],_0x4518ad[_0x4f53cb(-0x13f,-0x21,-0xb7,-0xd1)]=_0xb18a67[_0x406083(0x1c4,0x1e7,0x10a,0x1c0)],_0x4518ad[_0x4f53cb(-0x75,-0xde,-0x91,0x24)+_0x406083(0x2c0,0x3ae,0x22b,0x2dd)]='角色特征',_0x4518ad['facialFeat'+_0x4f53cb(-0x96,-0x68,-0xa5,-0x47)]=_0xb18a67[_0x4f53cb(-0x85,-0x62,-0xae,-0xa0)],_0x4518ad[_0x4f53cb(0x23,-0x81,-0xb1,-0xb5)+'uresBack']=_0xb18a67[_0x4f53cb(-0xdb,-0x1d,-0xcb,0x15)],_0x4518ad[_0x406083(0xab,0x106,0x181,0x17e)+'FW']=_0xb18a67[_0x406083(0x1ef,0x32d,0x333,0x29e)],_0x4518ad[_0x406083(0x23d,0x214,0x183,0x17e)+_0x406083(0x191,0x137,0x11b,0x1cd)]=_0xb18a67['VAheN'],_0x4518ad['fullBodySF'+'W']=_0xb18a67[_0x4f53cb(-0x166,-0x176,-0x193,-0x1a3)],_0x4518ad['fullBodySF'+_0x4f53cb(-0x1a8,-0x12f,-0x158,-0x219)]=_0xb18a67[_0x406083(0x357,0x313,0x201,0x2ae)];function _0x406083(_0x28304d,_0x2166e6,_0x437138,_0x2e04d1){return _0x3953d2(_0x28304d-0xbd,_0x2e04d1-0x43d,_0x2166e6,_0x2e04d1-0x53);}_0x4518ad[_0x4f53cb(-0x18d,-0xb5,-0x161,-0x117)+_0x406083(0x2d0,0x2a5,0x2f4,0x261)]=_0x4f53cb(-0x5d,-0xc2,-0xd9,-0x37),_0x4518ad['upperBodyN'+_0x406083(0x2f4,0x296,0x223,0x235)]=_0x406083(0x2e3,0x194,0x23e,0x262),_0x4518ad[_0x4f53cb(-0x26d,-0x24d,-0x1c5,-0x1dd)+'FW']=_0xb18a67[_0x4f53cb(-0x15,-0x3d,-0xdc,-0xca)],_0x4518ad[_0x4f53cb(-0x2a2,-0x15c,-0x1c5,-0x259)+_0x406083(0x12a,0xf3,0x222,0x1cd)]=_0x406083(0x186,0x173,0x11f,0x17c);const _0x3fd9c5=_0x4518ad;let _0x277d43=0x269e+-0x23*-0x71+-0x3611*0x1;for(const _0x4ade07 in _0x3fd9c5){_0xb18a67[_0x406083(0x284,0x23e,0x305,0x25a)]===_0xb18a67[_0x4f53cb(-0x35,-0x14c,-0xa7,-0x135)]?_0x53c6d2[_0x4ade07]&&_0xb18a67[_0x406083(0x1bb,0x226,0x1f7,0x26c)](_0x53c6d2[_0x4ade07],_0xc1dc68[_0x4ade07])&&_0x277d43++:(_0x3225c8[_0x4f53cb(-0x244,-0x18b,-0x1b2,-0x189)][_0x4f53cb(-0x4a,-0x3f,-0x2a,0x9a)](_0x368a25),_0x443050['log'](_0x406083(0x200,0x20c,0x26d,0x299)+_0x406083(0x186,0x234,0x21a,0x1e4)+_0x406083(0x213,0x1a6,0x223,0x247)+_0x53a9e6+_0x4f53cb(-0xf,0x2a,-0x71,0x5a)+_0x162c21+'\x22'));}if(_0xb18a67[_0x406083(0x16f,0x2c5,0x30c,0x23b)](_0x277d43,-0x1*-0x175a+-0x2270+0xb16)){if(_0xb18a67[_0x406083(0x196,0x275,0x265,0x23b)](_0x406083(0x359,0x2ea,0x26f,0x2d1),_0xb18a67['tdGUe'])){toastr[_0x406083(0x1e1,0x264,0x1e1,0x1eb)](_0xb18a67[_0x406083(0x2c8,0x1fd,0x2ab,0x1f2)]);return;}else _0x4183f4(),_0xb18a67['mXOnw'](_0x547270,new _0x42b5ff(_0xb18a67[_0x4f53cb(-0xf7,-0xd8,-0x3d,-0xc7)]));}const _0x1e4dd7='检测到角色\x20\x22'+_0x5e3cc4+'\x22\x20有\x20'+_0x277d43+_0x406083(0x1d3,0x25a,0x1e8,0x244),_0x569af2=await _0xb18a67[_0x4f53cb(-0xd5,-0x149,-0x85,-0x40)](stylishConfirm,_0x1e4dd7);if(!_0x569af2){if(_0xb18a67[_0x406083(0x16f,0x296,0x229,0x23b)](_0x406083(0x15a,0x1bd,0x28c,0x1bb),_0x406083(0x1ee,0x110,0x1de,0x1ca))){_0x3ea1f0['info'](_0xb18a67['cJoBz']);return;}else{toastr[_0x406083(0x1a8,0x242,0x23e,0x1eb)](_0xb18a67[_0x4f53cb(-0x48,0x80,-0x1b,-0x19)]);return;}}for(const _0x2a8bb8 in _0x3fd9c5){if(_0x53c6d2[_0x2a8bb8]){if(_0xb18a67[_0x406083(0x2bc,0x21b,0x1ca,0x246)](_0xb18a67[_0x4f53cb(-0x17b,-0x36,-0xfc,-0x1bf)],_0xb18a67['JCYZL'])){if(_0x9f7c42&&_0x224813[_0x4f53cb(-0x13a,-0x2,-0xaa,0x1d)])return _0x1bc529[_0x4f53cb(-0x73,-0xe4,-0xaa,-0xd6)]();return _0xb18a67[_0x406083(0x2b5,0x25b,0x1b2,0x233)](_0x6cc69[_0x4f53cb(-0x1dd,-0x292,-0x1c3,-0x26a)]()[_0x406083(0x168,0x2b3,0x2c6,0x216)](-0x371*-0x1+0x646+0x2b*-0x39),_0x53c711[_0x406083(0x2d5,0x216,0x217,0x2e5)]()['toString'](0x9ff+0x1f73+-0x294e)[_0x406083(0x219,0x119,0x22f,0x185)](-0x3*0x29+-0x679*0x3+0x13e8));}else _0xc1dc68[_0x2a8bb8]=_0x53c6d2[_0x2a8bb8];}}_0xb18a67[_0x4f53cb(-0x41,-0x148,-0xb0,-0x13)](saveSettingsDebounced);const _0x5006b3=$(_0xb18a67['gXpOi']);_0x5006b3[_0x4f53cb(-0x6f,-0xeb,-0x109,-0x194)]&&(_0xb18a67[_0x4f53cb(-0x241,-0x21a,-0x1ac,-0x106)](_0x4f53cb(-0x154,-0x10c,-0xc0,-0xee),_0xb18a67[_0x4f53cb(-0x149,-0x120,-0x132,-0x65)])?_0x5a291f[_0x3fe292[_0x47d597]]=_0x7d2999:_0xb18a67[_0x406083(0x2c2,0x178,0x31c,0x242)](refreshCharacterSettings,_0x5006b3)),updateFormFields(_0x53c6d2),console['log'](_0x4f53cb(0x41,0xd,-0x68,-0x12d)+'PromptModi'+'fy]\x20已更新角色预'+_0x4f53cb(0x64,-0xe2,-0x65,0x58)+_0x5e3cc4+'\x22');}async function updateOutfitPresetsFromLLM(_0x193c22){const _0x3cd21a={'FlOHf':function(_0x2259ba,_0x526c68,_0x361bdc,_0x47fa50,_0x2d4fc4){return _0x2259ba(_0x526c68,_0x361bdc,_0x47fa50,_0x2d4fc4);},'EfwxO':_0x5e5637(-0x178,-0x186,-0x1bc,-0x1f5),'vyMfl':function(_0x4c244a,_0x123b11){return _0x4c244a(_0x123b11);},'DhxQX':_0x5e5637(-0x157,-0xa9,-0x158,-0xe7),'GIRPO':_0x5e5637(-0x64,-0x188,-0x1a0,-0xec),'KrVvz':_0x32bf10(0x298,0x321,0x1ee,0x249),'GUPwx':'PEQDO','CsLMx':function(_0x2d028c,_0x5857b0){return _0x2d028c!==_0x5857b0;},'vUrnk':function(_0x52521f,_0x48380c){return _0x52521f!==_0x48380c;},'zLOfS':function(_0x3633db,_0x975c37){return _0x3633db===_0x975c37;},'iEusE':function(_0x4af430,_0x5a755c){return _0x4af430===_0x5a755c;},'PMeDd':'nNqNY','yNVAR':_0x32bf10(0x124,0x21b,0x103,0x196),'trqSn':function(_0x7a6f71,_0xf7acdf){return _0x7a6f71!==_0xf7acdf;},'MNiSb':_0x32bf10(0x177,0x260,0xed,0x186),'RHVXF':'DUAtB','TFbjs':function(_0x460a54,_0x55b154){return _0x460a54===_0x55b154;},'ztvnG':_0x5e5637(-0x108,-0xc8,-0xcf,-0xb3),'kgpgo':_0x32bf10(0x167,0xaf,0x15a,0x18a),'XmsuX':function(_0x1a9443){return _0x1a9443();},'zSRiv':function(_0xedf41b,_0x464102){return _0xedf41b(_0x464102);}},_0x41a440=extension_settings[extensionName],_0x421859={};_0x421859[_0x32bf10(0x1f6,0x241,0x186,0x1ab)]=_0x5e5637(-0x117,-0x76,-0x12e,-0x106),_0x421859[_0x32bf10(0x218,0x210,0x159,0x1d3)]=_0x3cd21a['DhxQX'];function _0x32bf10(_0x9b6995,_0x35e6b,_0x995946,_0x4c8140){return _0x3953d2(_0x9b6995-0xec,_0x4c8140-0x3c6,_0x9b6995,_0x4c8140-0x4b);}_0x421859['owner']=_0x32bf10(0x29,0x4d,0x18,0xec),_0x421859[_0x32bf10(0x176,0x1b4,0x187,0x195)]=_0x3cd21a['GIRPO'],_0x421859[_0x32bf10(0x2aa,0x2a2,0x24d,0x22d)+_0x32bf10(0x18f,0x277,0x1b2,0x21d)]=_0x32bf10(0x216,0x198,0x109,0x15f),_0x421859['fullBody']=_0x3cd21a['KrVvz'],_0x421859[_0x32bf10(0x1e1,0x195,0x264,0x26d)+'ck']='下半身背面';function _0x5e5637(_0x306c51,_0x516eef,_0x460342,_0x508ea0){return _0x3953d2(_0x306c51-0x13d,_0x508ea0-0xac,_0x516eef,_0x508ea0-0x1cf);}const _0x2d5cd1=_0x421859;for(const _0xd03770 of _0x193c22){if(_0x5e5637(-0x68,-0x10b,-0x192,-0x112)!==_0x3cd21a[_0x32bf10(0x20b,0x147,0x213,0x171)]){const _0x22199a=_0xd03770[_0x32bf10(0xef,0x109,0x1c6,0x1ab)];if(!_0x22199a)continue;const _0x34e141=_0x41a440['outfitPres'+_0x32bf10(0x163,0xd7,0xb8,0x126)]?.[_0x22199a];if(_0x34e141){if(_0x3cd21a[_0x5e5637(-0x1e4,-0x2be,-0x254,-0x210)](_0x5e5637(-0x10a,-0x1ce,-0xe8,-0xf2),_0x5e5637(-0x71,-0x181,-0x30,-0xf2)))_0xa5bde9['push'](_0x182596);else{let _0x24671f=0x740+-0x2603+0x1ec3;for(const _0x2fbb85 in _0x2d5cd1){_0xd03770[_0x2fbb85]&&_0x3cd21a['vUrnk'](_0xd03770[_0x2fbb85],_0x34e141[_0x2fbb85])&&_0x24671f++;}if(_0x3cd21a['zLOfS'](_0x24671f,-0x1127+0xf45*-0x2+0x2fb1)){if(_0x3cd21a[_0x5e5637(-0x5d,-0x1a5,-0x19e,-0x10d)](_0x3cd21a[_0x32bf10(0x13a,0x1f7,0x122,0x197)],_0x3cd21a[_0x5e5637(-0xd0,-0xc5,-0xba,-0xf6)])){const _0x1045d2={};for(const _0x538dbf in _0x1e42f7){_0x1045d2[_0x538dbf]=_0x3cd21a['FlOHf'](_0x4a992b,_0x563e75[_0x538dbf],_0x5a3358,_0x258868,_0x4fa70d);}return _0x1045d2;}else{console[_0x32bf10(0xbe,0xac,0xca,0x184)](_0x32bf10(0x300,0x1c5,0x253,0x222)+_0x5e5637(-0x117,-0x28d,-0x1d9,-0x1ad)+'fy]\x20服装\x20\x22'+_0x22199a+_0x32bf10(0x1c3,0xe8,0x6d,0x12c));continue;}}const _0x3a10a3=_0x32bf10(0x72,0x192,0x62,0x101)+_0x22199a+'\x22\x20有\x20'+_0x24671f+_0x32bf10(0xf5,0xed,0x132,0x1cd),_0x21b778=await _0x3cd21a[_0x5e5637(-0x1db,-0x255,-0x145,-0x1e5)](stylishConfirm,_0x3a10a3);if(!_0x21b778)continue;for(const _0x37aace in _0x2d5cd1){_0x3cd21a['trqSn'](_0x3cd21a[_0x5e5637(-0x1ea,-0x254,-0x215,-0x226)],_0x3cd21a[_0x32bf10(0x2a2,0x18f,0x33a,0x25f)])?_0xd03770[_0x37aace]&&(_0x34e141[_0x37aace]=_0xd03770[_0x37aace]):_0x3a69b5['push'](..._0x1d0c77[_0x5e5637(-0x1d0,-0x321,-0x19c,-0x24e)]);}console[_0x5e5637(-0x1a6,-0x1f1,-0x152,-0x196)](_0x32bf10(0x1c0,0x279,0x151,0x222)+_0x32bf10(0x1bf,0x1c0,0x1c4,0x16d)+'fy]\x20已更新服装预'+'设\x20\x22'+_0x22199a+'\x22');}}else{if(_0x3cd21a[_0x5e5637(-0x5e,-0x117,-0x74,-0x133)](_0x3cd21a[_0x32bf10(0xeb,0x1eb,0x1cf,0x1c5)],_0x3cd21a['ztvnG'])){const _0x11faee=_0x32bf10(0x1cd,0x2b5,0x163,0x1e9)+_0x22199a+'\x22,是否录入?',_0x536456=await _0x3cd21a[_0x32bf10(0x1cd,0x67,0x14e,0x135)](stylishConfirm,_0x11faee);if(!_0x536456)continue;!_0x41a440['outfitPres'+_0x32bf10(0xb2,0x187,0x60,0x126)]&&(_0x41a440[_0x32bf10(0x23e,0x1c7,0x13f,0x1a4)+_0x32bf10(0x10f,0xde,0x16f,0x126)]={});const _0x56202f={};_0x56202f['nameCN']=_0xd03770[_0x5e5637(-0x121,-0x152,-0x1c1,-0x16f)],_0x56202f[_0x32bf10(0x15a,0x251,0x1af,0x1d3)]=_0xd03770[_0x5e5637(-0x13d,-0x70,-0x126,-0x147)]||'',_0x56202f[_0x5e5637(-0x1e4,-0x1fe,-0x1b6,-0x144)]=_0xd03770[_0x5e5637(-0x1f7,-0x143,-0x1a7,-0x144)]||'',_0x56202f[_0x5e5637(-0x1e7,-0x227,-0x110,-0x185)]=_0xd03770[_0x5e5637(-0x20c,-0x185,-0xd0,-0x185)]||'',_0x56202f[_0x32bf10(0x2a5,0x2ce,0x2a5,0x22d)+_0x32bf10(0x271,0x242,0x278,0x21d)]=_0xd03770[_0x32bf10(0x294,0x2e3,0x21e,0x22d)+_0x32bf10(0x21b,0x280,0x243,0x21d)]||'',_0x56202f[_0x32bf10(0xc0,0x10d,0x1be,0x15e)]=_0xd03770[_0x5e5637(-0x1dd,-0x27e,-0x127,-0x1bc)]||'',_0x56202f[_0x5e5637(-0xec,-0x8c,-0x5d,-0xad)+'ck']=_0xd03770[_0x5e5637(0x2e,-0x71,-0x12a,-0xad)+'ck']||'',_0x41a440['outfitPres'+'ets'][_0x22199a]=_0x56202f,console[_0x5e5637(-0xee,-0x176,-0x273,-0x196)](_0x5e5637(-0xe0,-0xbe,-0x18e,-0xf8)+_0x5e5637(-0x232,-0x229,-0x211,-0x1ad)+'fy]\x20已创建服装预'+_0x32bf10(0x232,0x2c0,0x239,0x225)+_0x22199a+'\x22');if(_0xd03770[_0x32bf10(0x22d,0x21f,0xfc,0x1d6)]&&_0xd03770[_0x32bf10(0x25a,0x264,0x27a,0x1d6)]['trim']()){const _0x3ee553=_0xd03770[_0x5e5637(-0x12a,-0x206,-0x14f,-0x144)][_0x32bf10(0x182,0x1f9,0x28e,0x1fd)]()[_0x5e5637(-0xcf,-0x19f,-0x21e,-0x157)+'e']()['replace'](/\s+/g,'');for(const [_0x377a10,_0x5e158c]of Object[_0x5e5637(-0x15c,-0x290,-0x144,-0x1c5)](_0x41a440[_0x5e5637(-0x1ae,-0x1a3,-0x2a0,-0x202)+_0x32bf10(0x32c,0x2f0,0x2c0,0x274)]||{})){if(_0x3cd21a[_0x32bf10(0x13f,0xd0,0xe5,0x19a)](_0x3cd21a[_0x5e5637(-0x240,-0x235,-0x190,-0x174)],_0x3cd21a['kgpgo'])){if(_0x5e158c['nameEN']&&_0x3cd21a[_0x32bf10(0x199,0x1f3,0x1a8,0x20d)](_0x5e158c[_0x32bf10(0x240,0x2a7,0x216,0x1d3)][_0x32bf10(0x186,0x1b9,0x12f,0x1c3)+'e']()['replace'](/\s+/g,''),_0x3ee553)){!_0x5e158c[_0x5e5637(-0x2cc,-0x2a3,-0x1fb,-0x242)]&&(_0x5e158c[_0x32bf10(0x1b4,0xe8,0xbe,0xd8)]=[]);!_0x5e158c[_0x5e5637(-0x1de,-0x2b8,-0x1cd,-0x242)][_0x5e5637(-0x1c9,-0x11a,-0x121,-0x124)](_0x22199a)&&(_0x5e158c[_0x32bf10(0x12a,0x1a9,0x3d,0xd8)][_0x5e5637(-0x191,-0x15e,-0x6c,-0xba)](_0x22199a),console[_0x5e5637(-0xbb,-0x1f4,-0x141,-0x196)]('[character'+_0x5e5637(-0x1f2,-0x18c,-0x129,-0x1ad)+_0x32bf10(0x105,0x245,0x128,0x1d0)+_0x22199a+_0x5e5637(-0x169,-0xf8,-0x27,-0x101)+_0x377a10+'\x22'));break;}}else _0x113491[_0x32d05a]=_0x590380[_0x5604ab];}}}else{if(_0x4bdeef[_0x277c88]){const _0xa7f87e=_0x3cbbab[_0x5e5637(-0x61,-0x1c,-0xb1,-0xfc)+_0x32bf10(0x1f3,0x109,0x45,0x11b)]('char_'+_0x412e0c);_0xa7f87e&&(_0xa7f87e[_0x32bf10(0x2bf,0x16b,0x23c,0x1f7)]=_0x484ae2[_0x120da5],_0x24957b(_0xa7f87e)[_0x5e5637(-0xbe,-0x12a,-0xcd,-0x104)](_0x3cd21a['EfwxO']));}}}}else _0x4134bb['removeList'+_0x32bf10(0x193,0x293,0x1da,0x247)](_0x381393['LLM_CHAR_M'+_0x5e5637(-0x166,-0x199,-0x237,-0x200)+_0x5e5637(-0x94,-0x1fb,-0x1c2,-0x11e)],_0x1cb0e2),_0x5b9542&&(_0x3cd21a[_0x5e5637(-0x223,-0x1c9,-0x199,-0x1e5)](_0x328471,_0x5ceb7c),_0x5434e8=null);}_0x3cd21a[_0x32bf10(0xd0,0x225,0x160,0x161)](saveSettingsDebounced);const _0xb3f9a9=$(_0x32bf10(0x1bf,0x23,0x15f,0xdf)+_0x5e5637(-0x1f6,-0x298,-0x18d,-0x259)+_0x5e5637(-0x15d,-0x28c,-0x167,-0x1e3));_0xb3f9a9[_0x32bf10(0xef,0x1a4,0x241,0x181)]&&_0x3cd21a[_0x5e5637(-0x18f,-0x1d4,-0x1ed,-0x172)](refreshCharacterSettings,_0xb3f9a9);}function updateFormFields(_0x15780c){const _0x48cf29={'zPWRG':function(_0xa031c4,_0x6b0ed5){return _0xa031c4===_0x6b0ed5;},'fKzRQ':_0xcbf981(0x473,0x3a0,0x4f8,0x429),'ntCxi':function(_0x138fe7,_0x4f40d3){return _0x138fe7(_0x4f40d3);},'auMqG':_0xcbf981(0x3d8,0x376,0x41b,0x3bf),'UllEe':_0xcbf981(0x3c0,0x458,0x497,0x445),'NDbTA':_0xcbf981(0x452,0x551,0x491,0x493)+_0x15f7ed(-0x154,-0xec,-0x4e,-0x11a),'voIQL':_0xcbf981(0x479,0x520,0x443,0x473)+_0xcbf981(0x40b,0x448,0x40f,0x47f),'txnaV':_0x15f7ed(-0x1e9,-0x179,-0x203,-0x111)+_0xcbf981(0x4d0,0x3ac,0x478,0x466),'eLKSu':_0xcbf981(0x3e8,0x447,0x3fa,0x3a1)+'FW','gSzZW':_0xcbf981(0x409,0x305,0x3f6,0x3c3)+'SFW','eDxrR':_0xcbf981(0x3c3,0x2cc,0x402,0x35f)+'FW','EhLba':'fullBodyNS'+_0xcbf981(0x32a,0x33b,0x382,0x3f0)};function _0x15f7ed(_0x529477,_0x4963ca,_0x1e1092,_0x59e703){return _0x3953d2(_0x529477-0xe9,_0x4963ca-0x74,_0x59e703,_0x59e703-0x1f0);}const _0x31a1f7=[_0x48cf29['UllEe'],_0x15f7ed(-0x1a6,-0x17f,-0x22e,-0x1af),_0x48cf29[_0xcbf981(0x528,0x4c6,0x411,0x45a)],_0x48cf29[_0xcbf981(0x49d,0x42c,0x58f,0x4d9)],_0x48cf29[_0x15f7ed(-0x5d,-0xe7,-0x1a5,-0xd9)],_0x48cf29[_0xcbf981(0x5b8,0x44b,0x4fe,0x4fb)],'upperBodyS'+'FWBack',_0xcbf981(0x3d0,0x2fb,0x483,0x3d0)+'W',_0x15f7ed(-0x230,-0x21c,-0x2e5,-0x20e)+'WBack',_0x48cf29[_0xcbf981(0x363,0x406,0x4da,0x443)],_0x15f7ed(-0x1bb,-0x229,-0x29d,-0x21e)+'SFWBack',_0x48cf29[_0xcbf981(0x417,0x2c7,0x3a3,0x383)],_0x48cf29[_0x15f7ed(-0x276,-0x1be,-0x287,-0x123)]];function _0xcbf981(_0x232d0c,_0x2a1b3a,_0x18dcac,_0x4f2d74){return _0x3953d2(_0x232d0c-0x130,_0x4f2d74-0x660,_0x232d0c,_0x4f2d74-0x126);}_0x31a1f7['forEach'](_0x361e9f=>{function _0x1095b9(_0x304c39,_0x514cc9,_0x50d46f,_0xf0939a){return _0x15f7ed(_0x304c39-0x196,_0x50d46f-0x6ac,_0x50d46f-0x126,_0xf0939a);}function _0x4802e1(_0x296946,_0x581fd3,_0x32817b,_0x46848e){return _0xcbf981(_0x296946,_0x581fd3-0x7c,_0x32817b-0x2e,_0x581fd3- -0x3f3);}if(_0x15780c[_0x361e9f]){const _0x32cdc3=document[_0x4802e1(0xda,0xc5,0x7e,0x40)+_0x4802e1(-0xb1,-0x3e,-0xda,-0x4a)](_0x4802e1(0x1c9,0xfa,0x60,0x1c2)+_0x361e9f);if(_0x32cdc3){if(_0x48cf29[_0x4802e1(0x1af,0x120,0x1cb,0x58)](_0x48cf29[_0x4802e1(0x4f,-0x5b,-0xc5,-0x2a)],_0x48cf29[_0x1095b9(0x3a2,0x3ba,0x458,0x43c)]))_0x32cdc3['value']=_0x15780c[_0x361e9f],_0x48cf29[_0x1095b9(0x492,0x52e,0x489,0x524)]($,_0x32cdc3)[_0x1095b9(0x5d9,0x5c9,0x570,0x607)](_0x48cf29[_0x1095b9(0x453,0x545,0x4f3,0x476)]);else return _0x3a7ca3;}}});}