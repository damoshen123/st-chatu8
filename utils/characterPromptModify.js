(function(_0xf71c84,_0x3dde6){function _0x207318(_0x3cce9e,_0x1c38e0,_0x59e5ab,_0x37f628){return _0x2bef(_0x3cce9e- -0x3ba,_0x59e5ab);}const _0x55895c=_0xf71c84();function _0x53249d(_0x2ecf62,_0x523307,_0x4cd67a,_0x21cc32){return _0x2bef(_0x2ecf62- -0x186,_0x4cd67a);}while(!![]){try{const _0x49d1d6=parseInt(_0x207318(-0x6e,-0x39,0x2e,-0x116))/(0xc7f+0x109d*0x2+-0x688*0x7)+parseInt(_0x53249d(0x1a6,0x18c,0x1de,0x234))/(-0x1278+0x1d4e+0x15*-0x84)*(-parseInt(_0x207318(-0xdf,-0x17f,-0x1a3,-0xdb))/(0x1*0x73+-0x1*0x1dd5+0x1d65))+parseInt(_0x207318(-0x123,-0x131,-0x189,-0x167))/(0x160f+-0x619+-0xd*0x13a)+-parseInt(_0x207318(-0x1d8,-0x272,-0x266,-0x283))/(-0x1a27+0x49*-0x17+-0x20bb*-0x1)*(parseInt(_0x207318(-0x177,-0xd5,-0x101,-0x21b))/(0x44*0x8c+-0x182c+-0xcfe))+parseInt(_0x53249d(0x13b,0x171,0x12e,0x125))/(0x7*-0x3e5+-0x1f5e+0x3aa8)+-parseInt(_0x53249d(0xb9,0x58,0x39,0x157))/(0x1*-0x1b07+-0x9c*-0xc+0x13bf)+parseInt(_0x207318(-0x7c,-0x13e,0x43,-0xdf))/(0x2cc*0xd+-0x103f*-0x2+-0x1*0x44d1);if(_0x49d1d6===_0x3dde6)break;else _0x55895c['push'](_0x55895c['shift']());}catch(_0x1d08eb){_0x55895c['push'](_0x55895c['shift']());}}}(_0x597a,-0x36104+0xd312d+-0x121d9));const _0x22ee14=(function(){function _0x51c3b4(_0x1296d5,_0x42f668,_0x56dd81,_0x2c8bd0){return _0x2bef(_0x1296d5-0x26d,_0x56dd81);}const _0x4bc0c0={};function _0x3b2a70(_0x1c948b,_0x3a0dfa,_0x5329c9,_0x59ae35){return _0x2bef(_0x3a0dfa-0x17b,_0x59ae35);}_0x4bc0c0[_0x3b2a70(0x4f9,0x463,0x3a8,0x4d4)]=_0x3b2a70(0x529,0x4a6,0x53c,0x412);const _0x5395ac=_0x4bc0c0;let _0x3ed0ed=!![];return function(_0x2d23b4,_0x2275ab){function _0x274535(_0x5e4857,_0x315b71,_0x250754,_0x2c81c0){return _0x3b2a70(_0x5e4857-0xa8,_0x5e4857-0x15e,_0x250754-0x131,_0x250754);}function _0x666dc1(_0x25d65a,_0x564a30,_0xd9ed78,_0x502c9d){return _0x51c3b4(_0xd9ed78- -0x40a,_0x564a30-0x4e,_0x502c9d,_0x502c9d-0x13b);}if(_0x5395ac[_0x274535(0x5c1,0x667,0x5f2,0x615)]===_0x5395ac['kESuy']){const _0x1fad75=_0x3ed0ed?function(){function _0x3633f6(_0x7832b7,_0x186146,_0x1dcfa1,_0x48dcab){return _0x274535(_0x48dcab- -0x292,_0x186146-0x5,_0x186146,_0x48dcab-0x188);}if(_0x2275ab){const _0x2c61b8=_0x2275ab[_0x3633f6(0x334,0x238,0x2c6,0x2a1)](_0x2d23b4,arguments);return _0x2275ab=null,_0x2c61b8;}}:function(){};return _0x3ed0ed=![],_0x1fad75;}else _0x4ff250['matchedOut'+_0x274535(0x5fa,0x61c,0x572,0x545)]['push'](_0x948fbc[_0x274535(0x53e,0x4b0,0x5fa,0x54f)]);};}()),_0x920c5f=_0x22ee14(this,function(){function _0x32f384(_0x4757ac,_0x15749c,_0x1a2e86,_0xf83dfe){return _0x2bef(_0x4757ac- -0x4f,_0xf83dfe);}const _0x36c1ec={};function _0x8085c5(_0xdade22,_0x189c5e,_0x5c0502,_0x24f8f9){return _0x2bef(_0x24f8f9- -0x3b4,_0x5c0502);}_0x36c1ec[_0x8085c5(-0x89,-0xd,-0x6e,-0x51)]=_0x32f384(0x256,0x1b8,0x1e4,0x1ce)+'+$';const _0x2f43e9=_0x36c1ec;return _0x920c5f[_0x8085c5(-0x47,-0x70,-0x26,-0x79)]()[_0x8085c5(-0x1ed,-0x176,-0x14a,-0x16e)](_0x2f43e9[_0x32f384(0x314,0x358,0x37e,0x2d7)])[_0x8085c5(-0x124,-0x10a,-0xd,-0x79)]()[_0x8085c5(-0xea,-0x125,-0xd2,-0x94)+'r'](_0x920c5f)[_0x8085c5(-0xe6,-0xd1,-0x1f7,-0x16e)](_0x2f43e9[_0x8085c5(-0x10a,-0x36,-0x4f,-0x51)]);});function _0x597a(){const _0x599c4d=['6kEs6iMY54M55B6b','r2Dsv3a','5PwW5O2UoG','pc/KURRNIAK+','y2HHCL8','t05trq','ENfqq28','wwvMuLi','DuTAs3q','z1zUv3q','Aw5WDxq','zxf1AxjLBwvUDa','Evrbvvu','BMCGy2HHCMfJDa','DMD1ufO','vhDZD1i','5y+c6icd5zU+54Mh','tefTuem','zNLDiezPBMfSia','Aw5NignOyxiGBq','DK1qz3C','5lQu5A6y5Asw6lkm','zgf0ytO','mtuYndvHAMnRAey','CNjkyMG','zNLDie5VignOyq','r21szue','vgvkB0O','CMfPDhm','zeHpBwC','sxDPr00','Ew51twe','BhvMEhK','rLn4rfq','A01yBgy','CMfUzg9T','DMHyD3i','C3vJy2vZCW','DhjPz2DLCG','wfrArvq','rwv2zfq','t0rjrLLFuKvrvq','uu5lsK4','Dgv4Da','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','zNLDifjLCxvLCW','EgnQrhG','uhjVBxb0tw9KAq','B3vUzcbPBIbVDq','zgvWBfC','DgvYigXPC3qGDa','E3VNLkJMIlFPNidMSyj9Fq','CKvlDLm','B2rPzNKGteXnia','y2HHCL9TB2rPzG','vwzcAw0','v0jHy2S','txLnrvq','rhPpDuS','ue9ou0u','B3v0zML0','vwLXq2O','vMjTwK0','zeToD0y','q2zpthy','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','tKzJt2S','AMXWuKy','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','6kkR5l2/55sO77YA','6k6+ici','thz1re4','5lIl5y2k6lQRu0zx6iom6z2IoIa','B3DUzxi','ANLRBwO','ven6B2e','u0zx','5Qoa5Rwl5yIW5PYn6kofici','rKTIvfm','tufSuM0','z0XgEfu','DhLWzq','Cg9YsuO','qLLwv00','qMPRD1q','BuzVwK8','y2HHCMfJDgvYua','AMPrsvG','DcbWCMvZzxq6','E3VLVzpLIy3OP5lOIBj9Fq','uNzpwu8','EfDYBK4','Aw1Hz2vZihrVia','zM9YrwfJAa','ufjptvbux1jfuW','DxbWzxjcB2r5qG','6kEs6iMYl+ACJEIJHEApKoEKUUIVJEs/RUAuUq','Exv0uMK','z0PXrMu','CMfUzg9Tvvvjra','5Qoa5Rwl5yIW6kEs6iMYici','q1bdveG','DhnWCha','CMvZDwX0','zMLSDgvY','AM9PBG','Exn6Cwi','DgLTzw91De1Z','DMfSDwu','seTjuKC','5A2x5Q61ici','quTbD2O','zw50CMLLCW','t0rjrLLFr0vuxW','y2HHCMfJDgvY','v1bevg0','odyZnZC4nhr0u25SDW','5lIk5y2k6lQRtLngvZOG','AeP5CMe','sKfUufi','nty0zMXhzvje','ue1HAgq','t1rKsgq','C2vHCMnO','yNHssgO','qKToD2K','Aw1Hz2vFDxjS','rwPisw8','Bg9N','whbJAxK','DxbWzxjcB2r5tG','yMrIEMS','5lIl5y2k6lQRtLngv+IdJoMDOJO','ChjVBxb0oG','DNDQAwu','D2fYBMLUzW','vuvtva','ChjVBxb0','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','5B2s5BgE5lQ6','5lIT5PAh5zcn56EW','BMfTzq','5lIk5y2k6lQRtLngvW','yxbWBhK','sgXvzvu','5lQu5A6y5Asw6lkm6iom6z2I','svniCgW','zwzAELO','Aw5MBW','DuDpuwC','C3rYAw5N','5Rgc6lAf5PE2','DxjLC0jHy2S','EMf0r0i','zgf0yq','ugzODhC','ru5kshm','zNvSBejVzhLouW','DhDLufG','z2vUzxjHDgLVBG','sgzQrwi','C29YDa','zNLDief0DgfJAa','DMz5qLG','CMvTB3zLtgLZDa','BMrLEdO','AfLcreC','BfDfseu','5BEY5y+w5RAi5PU05PAW','u0zxqMfJAW','ExbXrfC','r3jgr2K','y29UDgvUDa','rwPMr2i','tM9rr3a','iIdLT7lLVzlLSz7LIldOP5lOIBiGiG','5lIk5y2k6lQRu0zx','zK9kr0G','zNLDienOyxjHyW','Dhb1DdO','tKvQzNO','rNfkt3y','5lIl5y2k6lQRtLngv+IdJoMDOG','5lIk5y2k6lQR','uwHPyKK','Bxvhwum','z2v0rwXLBwvUDa','zxPWrfG','reDhy2C','BMC6','tLDAENa','DxzKshy','Cg9ZAxrPB24','zxH0icH0CMLNzW','EwTouxu','zNLDifnHDMvKia','y2HHCMfJDgvYCW','qNLjza','pos6UUEjQt4k','zvziwva','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','Bwf0y2HLze91Da','qun2B2e','y2HHCMfJDgvYva','mJCWodiWohPuD2X3sa','rLDcywnR','5lIk5y2k6lQRu0zx6iom6z2IoIa','EwTNC20','wuvHCLK','iIdMNiKG','6iUX5PAh5zcn56EWoIa','zNLDievYCM9YoG','qxPvDu0','teXnioI/LowBNUE7K+AENos4UUEPUG','DgLUzYbJAgfYia','C0nbz1u','Dhb1Da','ze1UyvO','kcGOlISPkYKRkq','B2jQzwn0','DvbJrhu','zNLDiow3SUABToAwSoACJEIJHEMIHa','BMrMBLO','zgH1EMm','EwzrBLu','Bxb0icHjrdOG','5lIl5y2k6lQR','q29UDgv4Da','zMfJAwfSrMvHDa','D2jHyNu','zxiGChjVBxb0ia','DvfjvNG','EKjHEKe','DM9Zv0e','zNLDifjHDYbmta','CvDJAhO','y29UDgv4DdO','zNLDiev4zwn1Da','tuLiqxi','zxrZ','5lIk5y2k6lQRu0zx6iom6z2I','zgv0ywLS','tuzACuO','y0z6shi','CNjQEeq','tKXAww8','mZyYmJaXn05OtwzcCa','Ae5Tq3y','ig1LC3nHz2uGAq','w2nOyxjHy3rLCG','tujbywG','t2TxsuG','5lIl5y2k6lQRu0zx6iom6z2I','DxzjyK4','tu1kwhq','ugHdA3a','Aw5KzxHpzG','5lIk5y2k6lQRtLngv+IdJoMDOJO','ywnR','swzbEvG','qwX6rK0','AKHpwLi','yxv0BW','yw5dDhu','CIb0zxH0oG','zxjLzcK6','D0z4tNa','zNLDien1CNjLBG','yMTgC0W','CvrpCxe','zML0ihrHz3mGzG','BgvUz3rO','oty4muHwywniva','C0n0zgi','zNLDioACJEIJHsaI','uePzzfG','BwvZC2fNzq','DvzKDK8','DMfYAwfIBgvZ','zNLDioINO+AEKowiSoEAHos6UUEjQq','suPuveu','5lIk5y2k6lQR6iom6z2I','wNPHC24','zw1PDa','DMfYAwfIBgvZoG','A0vtDxK','zxjYB3i','z3Hcrhm','DgvKigrHDge6','t0rjrLLFuKvtua','DxjLCW','D1n5swm','zgLJEvy','DvnUBgm','s1D2EK8','wuHADfy','rvzlv1a','5lIl5y2k6lQR6iom6z2I','tw1yzvm','yLbHCLu','CMfJDgvYl291Da','EKDHqwG','Eu96t1G','BwfW','qvjMwMq','AKz1EKC','BM93','zuvyExq','l3bUzZTIyxnLnG','zK1eteG','C3vIC3rYAw5N','EMPrAuG','Cwzbt3O','y05puey','CMvWBgfJzq','iIZMMk/LKkBLVzxLHAu/','qu1fv1K','CLLTBgK','rxHpt1u','5lQu5A6y5Asw6lkmoIa','DxbWzxjcB2r5uW','Bw9KAwz5ihbYBW','q3LNtgm','teXnx0niqvjFtq','5lIT5PAh5zcn56EWoIa','DgvYihrYAwDNzq','teD0D1a','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','yw5stMy','A21xru4','r2fYqNi','CxneDe0','BgrIqwq','BLDkv0W','twXQuue','BMfTzuno','vMT3v2S','C2L6zq','tw94D2W','EhnkqNq','DxjS','y29UC3rYDwn0BW','zML0CW','EKr5wMq','AwTqCxe','zNvSBejVzhLcyq','v0fqC0S','Aw5JBhvKzxm','zw5LCG','CMvZzxrZ','zhPLENu','s01NwLm','B0HLu2y','mZa2DLn0DvfJ','DMHty3m','B3v0zML0uhjLCW','lxrHyI1JAgfYyq','BMfTzuvo','zNvSBejVzhLtrG','yNbSuuO','B3iGzgvIDwDNAq','tLbttMK','CMvWBgfJzufSBa','igLUzgv4','DxbWzxjcB2r5','ChvZAa','y2HHDe1LDgfKyq','EwrdvvK','Dg9tDhjPBMC','uwrXzMm','5lIk5y2k6lQRu0zxoIa','mJi2mJu1nuHvExvruq','B3v0zML0CW','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','BwvZC2fNzsbHDa','BenJAxG','5lQu5A6y5Asw6lkm6iom6z2IoIa','D29YBgqGyM9VAW','v2XjseC','C3bSAxq','iIdMSQhMNiNLJ5JMM7q','Aw5KzxG','sKT3CgW','yMfZzty0','ChfSB0C','otGZmdK0u2Hqtxny','5lIl5y2k6lQRtLngvW','5lIl5y2k6lQRtLngvZOG','ywrK','ALfmrvK','svDSBhu','5lIl5y2k6lQRu0zxoIa','ufjptvbux1jfuq','AxnbCNjHEq','q2j6yvu','5lIl5y2k6lQRu0zx','DhjPBq','B2HNzMu','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','6iUX5PAh5zcn56EW','t0Ldu3C','zNvSBejVzhK'];_0x597a=function(){return _0x599c4d;};return _0x597a();}_0x920c5f();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';function _0x2bef(_0xf2a12c,_0x4ec4d4){_0xf2a12c=_0xf2a12c-(-0xc75*0x3+-0x1b32+-0x1*-0x426a);const _0x427877=_0x597a();let _0x5c5074=_0x427877[_0xf2a12c];if(_0x2bef['ZouyRg']===undefined){var _0x5d39bb=function(_0x39bf32){const _0x2081e7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4dd9f8='',_0x8dfbc4='',_0x3ebc89=_0x4dd9f8+_0x5d39bb;for(let _0x411242=-0xd9b+0x1511+-0x5*0x17e,_0x358697,_0x340807,_0x55f1ff=-0x33*-0x24+-0x16b5+0xf89;_0x340807=_0x39bf32['charAt'](_0x55f1ff++);~_0x340807&&(_0x358697=_0x411242%(-0x1af*-0x3+0x18*-0x6d+0x1*0x52f)?_0x358697*(0x786+-0x409*-0x1+-0xb4f)+_0x340807:_0x340807,_0x411242++%(-0x2388+0x83d*0x3+0xad5))?_0x4dd9f8+=_0x3ebc89['charCodeAt'](_0x55f1ff+(-0x110*0x11+-0x145d+0x2677))-(0x1b5c*0x1+0x63e+-0x2190)!==0xa5+0x7*0x69+-0x4b*0xc?String['fromCharCode'](0x229d+0x1914*-0x1+-0x88a&_0x358697>>(-(-0x257*0x7+-0x1*0x2681+-0x2*-0x1b72)*_0x411242&0x19c9+-0x1b16*-0x1+0x53*-0xa3)):_0x411242:0x2666+-0x792+-0x1ed4){_0x340807=_0x2081e7['indexOf'](_0x340807);}for(let _0xe24041=-0x41f*0x1+-0x87f+0xc9e,_0xedda83=_0x4dd9f8['length'];_0xe24041<_0xedda83;_0xe24041++){_0x8dfbc4+='%'+('00'+_0x4dd9f8['charCodeAt'](_0xe24041)['toString'](-0x60c+0x850+-0x234))['slice'](-(0x1*-0x2065+0x66a+0x19fd));}return decodeURIComponent(_0x8dfbc4);};_0x2bef['wSsfHr']=_0x5d39bb,_0x2bef['CebxDH']={},_0x2bef['ZouyRg']=!![];}const _0x3e9968=_0x427877[0x167c+-0x965+0x45d*-0x3],_0x1983d0=_0xf2a12c+_0x3e9968,_0x1243e8=_0x2bef['CebxDH'][_0x1983d0];if(!_0x1243e8){const _0x20814b=function(_0x172984){this['SfOhCe']=_0x172984,this['IVKFWs']=[-0x37*-0x4d+0x1*-0x943+-0x747,-0xf45*-0x2+0x133a+-0x38e*0xe,0xba*0x17+-0x158*-0x1+0x120e*-0x1],this['pEiDqx']=function(){return'newState';},this['iQGFmR']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['mAyyDY']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x20814b['prototype']['sUsKSI']=function(){const _0x575918=new RegExp(this['iQGFmR']+this['mAyyDY']),_0x469f92=_0x575918['test'](this['pEiDqx']['toString']())?--this['IVKFWs'][0x2af*-0x3+-0x1cae+-0x2*-0x125e]:--this['IVKFWs'][-0x1*0x42d+-0x203*0x7+0x1242];return this['LBIhel'](_0x469f92);},_0x20814b['prototype']['LBIhel']=function(_0x36e6ad){if(!Boolean(~_0x36e6ad))return _0x36e6ad;return this['vhAZLL'](this['SfOhCe']);},_0x20814b['prototype']['vhAZLL']=function(_0x439cbd){for(let _0x377bcc=-0x7*-0x155+-0x135a+-0x97*-0x11,_0x569d18=this['IVKFWs']['length'];_0x377bcc<_0x569d18;_0x377bcc++){this['IVKFWs']['push'](Math['round'](Math['random']())),_0x569d18=this['IVKFWs']['length'];}return _0x439cbd(this['IVKFWs'][-0x2655+0x4ed+0x2168]);},new _0x20814b(_0x2bef)['sUsKSI'](),_0x5c5074=_0x2bef['wSsfHr'](_0x5c5074),_0x2bef['CebxDH'][_0x1983d0]=_0x5c5074;}else _0x5c5074=_0x1243e8;return _0x5c5074;}import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';function _0x405d6a(_0x5bbecf,_0x3343a2,_0x2fc288,_0x4f4ef6){return _0x2bef(_0x2fc288-0x2a5,_0x3343a2);}import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0xc7b1c1}from'./promptProcessor.js';function replacePlaceholder(_0x56cd0,_0x3b4930,_0x18710c,_0x2cf83b){const _0x54cf90={'rHiNn':function(_0x44d4ed,_0x209750){return _0x44d4ed(_0x209750);},'BYVWM':_0x5aedf1(0x592,0x5c9,0x64a,0x5d6),'KWvzO':function(_0x3275fa,_0x149df9){return _0x3275fa===_0x149df9;},'LvuDN':_0x5aedf1(0x586,0x4c3,0x550,0x44a),'bdbzk':function(_0x4d434f,_0x155fba){return _0x4d434f===_0x155fba;},'MFZqJ':_0x5aedf1(0x4a4,0x4ef,0x4a5,0x566),'OkWIH':_0x151852(0x1a7,0x109,0xf5,0x115),'BFgvZ':function(_0x3ce621,_0x52e572,_0x2f5108,_0x3f9e9b,_0x5add34){return _0x3ce621(_0x52e572,_0x2f5108,_0x3f9e9b,_0x5add34);}};function _0x5aedf1(_0x3f6090,_0x33e4f8,_0x42bef9,_0x11c191){return _0x2bef(_0x33e4f8-0x262,_0x3f6090);}if(_0x54cf90[_0x151852(0x1f2,0x28d,0x1f0,0x1ed)](typeof _0x56cd0,_0x54cf90[_0x5aedf1(0x51a,0x474,0x472,0x3ff)])){if(_0x18710c&&_0x56cd0[_0x5aedf1(0x62a,0x588,0x583,0x5a2)](_0x3b4930)){if(_0x54cf90[_0x151852(0x14f,0x159,0x186,0x99)]('ykNQu',_0x54cf90[_0x5aedf1(0x493,0x51f,0x589,0x599)]))_0x2cf83b&&_0x2cf83b[_0x151852(0x250,0x285,0x2ec,0x248)](_0x3b4930);else{if(_0x10df4e[_0x29aba1]){const _0x225307=_0xe16348[_0x151852(0x186,0x23a,0xe6,0x126)+'ById'](_0x151852(0x262,0x2e7,0x1c9,0x239)+_0x540b09);_0x225307&&(_0x225307[_0x5aedf1(0x443,0x499,0x504,0x3f8)]=_0x20f608[_0x2a8099],_0x54cf90['rHiNn'](_0x1273d1,_0x225307)[_0x151852(0xf2,0x170,0xb3,0x1a3)](_0x54cf90[_0x5aedf1(0x4ea,0x480,0x3ee,0x503)]));}}}return _0x56cd0[_0x5aedf1(0x544,0x597,0x5b8,0x531)](_0x3b4930,_0x18710c);}if(Array[_0x151852(0x255,0x1bb,0x2c2,0x25b)](_0x56cd0))return _0x56cd0[_0x151852(0x1fb,0x233,0x1ab,0x246)](_0x33f634=>replacePlaceholder(_0x33f634,_0x3b4930,_0x18710c,_0x2cf83b));if(_0x56cd0&&typeof _0x56cd0===_0x54cf90[_0x151852(0x1c7,0x253,0x127,0x184)]){const _0x9bffb7={};for(const _0x1f7da1 in _0x56cd0){_0x9bffb7[_0x1f7da1]=_0x54cf90['BFgvZ'](replacePlaceholder,_0x56cd0[_0x1f7da1],_0x3b4930,_0x18710c,_0x2cf83b);}return _0x9bffb7;}function _0x151852(_0x59521f,_0x4001cb,_0x31dd98,_0x1192e2){return _0x2bef(_0x59521f- -0xff,_0x31dd98);}return _0x56cd0;}function attachImagesToMessage(_0x41908c,_0x3bb048,_0x3ff8df,_0x21d0bc=_0x405d6a(0x489,0x51b,0x480,0x49d)){const _0x55511a={};_0x55511a[_0x5a8700(0x1a7,0x11f,0x114,0x177)]=function(_0x276a22,_0x23e875){return _0x276a22!==_0x23e875;},_0x55511a[_0x72c3c2(0x3ef,0x373,0x41f,0x384)]=_0x72c3c2(0x40f,0x4f8,0x4ad,0x434),_0x55511a[_0x5a8700(0x86,0x14a,0x1af,0x1f8)]=_0x5a8700(-0x8,0x62,-0x67,-0x29),_0x55511a['yszqb']=function(_0x552846,_0x479a7b){return _0x552846===_0x479a7b;},_0x55511a[_0x5a8700(0xa2,0x8a,-0x13,0xf7)]=_0x5a8700(-0x96,-0x9,0x76,-0x1e),_0x55511a[_0x5a8700(0x16,0x7a,0xf,0x8c)]=_0x72c3c2(0x31e,0x444,0x395,0x456),_0x55511a['wFxNp']='image_url',_0x55511a[_0x5a8700(0x8,0xa0,0x11,0x11)]=_0x5a8700(0x66,0xd2,0x57,0x12c);function _0x5a8700(_0x1d734c,_0x2b3cc3,_0x2ed732,_0x577c27){return _0x405d6a(_0x1d734c-0x9b,_0x2ed732,_0x2b3cc3- -0x4a4,_0x577c27-0x1d0);}_0x55511a[_0x5a8700(0x122,0xa5,0x48,0x4c)]=function(_0x5583ae,_0x2e12a1){return _0x5583ae<_0x2e12a1;},_0x55511a[_0x72c3c2(0x541,0x4d7,0x4cb,0x4e7)]=function(_0xea42ea,_0x299195){return _0xea42ea>_0x299195;};function _0x72c3c2(_0x49dd25,_0x59cafb,_0x2c3c3a,_0x34a056){return _0x405d6a(_0x49dd25-0x16a,_0x34a056,_0x2c3c3a- -0xf1,_0x34a056-0x33);}_0x55511a[_0x72c3c2(0x47a,0x475,0x51d,0x559)]=function(_0x395dec,_0x2b2b14){return _0x395dec!==_0x2b2b14;},_0x55511a[_0x72c3c2(0x49e,0x4ce,0x425,0x48f)]=_0x72c3c2(0x46a,0x555,0x494,0x514);const _0x322ad4=_0x55511a;if(!_0x3ff8df||_0x3ff8df['length']===-0x2442+-0x1241*0x1+-0xae7*-0x5||_0x322ad4[_0x5a8700(0x74,0xa5,0xbf,0x14e)](_0x3bb048,-0xc6+-0x1*-0x188b+-0x5*0x4c1)||_0x3bb048>=_0x41908c[_0x72c3c2(0x3eb,0x53c,0x48e,0x4a6)])return _0x41908c;const _0xc3bd29=[..._0x41908c],_0x544c99=_0xc3bd29[_0x3bb048],_0x15dc45=[];if(_0x322ad4[_0x72c3c2(0x4ac,0x36a,0x3e9,0x483)](typeof _0x544c99[_0x5a8700(-0x4d,0x78,0x8b,0xf6)],_0x322ad4[_0x5a8700(0x204,0x14a,0x1c4,0xbe)])){const _0x32a21a={};_0x32a21a['type']=_0x322ad4[_0x5a8700(0xa6,0x8a,-0xf,0x38)],_0x32a21a['text']=_0x544c99[_0x5a8700(0xf2,0x78,0x132,-0x1a)],_0x15dc45['push'](_0x32a21a);}else Array['isArray'](_0x544c99[_0x5a8700(0x132,0x78,0x110,0xcb)])&&_0x15dc45[_0x5a8700(0x1a9,0x139,0x114,0x1c4)](..._0x544c99[_0x72c3c2(0x3f7,0x448,0x42b,0x492)]);if(_0x322ad4[_0x72c3c2(0x567,0x4e2,0x4cb,0x516)](_0x3ff8df['length'],-0xec7+0x1847+-0x4c*0x20)){if(_0x322ad4[_0x5a8700(0x222,0x16a,0xfb,0x154)](_0x5a8700(0x16d,0xe1,0x3f,0x169),_0x322ad4[_0x5a8700(0x94,0x72,0x37,0xeb)]))_0xa02353[_0x6020e6]&&_0x4b9209[_0x1a4460]!==_0x5cd0b2[_0x211f4f]&&_0x26e5dd++;else{const _0x3e54b7={};_0x3e54b7[_0x72c3c2(0x416,0x371,0x3d0,0x401)]=_0x72c3c2(0x39f,0x40e,0x3aa,0x404),_0x3e54b7[_0x5a8700(-0x59,-0x9,0xd,0x44)]='\x0a[以下是用户上传的'+_0x3ff8df[_0x72c3c2(0x3f8,0x553,0x48e,0x4f6)]+'张'+_0x21d0bc+']',_0x15dc45[_0x72c3c2(0x554,0x437,0x4ec,0x492)](_0x3e54b7);}}_0x3ff8df['forEach']((_0x872ae4,_0x307cbb)=>{function _0x850f0f(_0x29909f,_0x3d8ca6,_0x302c87,_0x4e36d8){return _0x5a8700(_0x29909f-0x194,_0x302c87-0x81,_0x3d8ca6,_0x4e36d8-0x17d);}function _0x18f921(_0x1e5295,_0x26f450,_0x208da3,_0x769358){return _0x5a8700(_0x1e5295-0x1e2,_0x769358-0x1b6,_0x208da3,_0x769358-0x1cc);}const _0x5ee181={};_0x5ee181[_0x850f0f(0x1d0,0x195,0x117,0x1da)]='text';const _0x53fd09=_0x5ee181;if(_0x322ad4[_0x850f0f(0x185,0x1e3,0x1a0,0xfc)](_0x322ad4[_0x850f0f(0x18b,0xe4,0xed,0xac)],_0x850f0f(0x1b0,0x1b8,0x129,0x1a2))){const _0x43064a=typeof _0x872ae4===_0x322ad4[_0x850f0f(0x1d1,0x1c6,0x1cb,0x182)]?_0x872ae4:_0x872ae4[_0x18f921(0x2e6,0x23c,0x25e,0x301)],_0x371b07=_0x322ad4[_0x18f921(0x273,0x23e,0x283,0x1ec)](typeof _0x872ae4,_0x850f0f(0xfb,0x1c3,0x128,0x198))&&_0x872ae4[_0x850f0f(0x118,0x84,0xda,0x51)]?_0x872ae4['name']:''+_0x21d0bc+(_0x307cbb+(0x265c+0x1cc0+0x431b*-0x1)),_0x400f98={};_0x400f98[_0x850f0f(0x6f,0x56,0x9e,0x8d)]=_0x322ad4[_0x850f0f(0xa1,0x192,0x10b,0x141)],_0x400f98[_0x850f0f(0x4c,0x86,0x78,0x84)]='['+_0x371b07+']',_0x15dc45[_0x850f0f(0x1f5,0x18f,0x1ba,0x1ae)](_0x400f98);let _0x2d1b1c=_0x43064a;!_0x43064a['startsWith'](_0x322ad4[_0x18f921(0x18d,0x18b,0x2f5,0x230)])&&(_0x2d1b1c='data:image'+_0x18f921(0x283,0x20b,0x322,0x2b6)+'4,'+_0x43064a);const _0x4cd093={};_0x4cd093[_0x18f921(0x176,0x1f3,0x14c,0x1d3)]=_0x322ad4[_0x18f921(0x28a,0x263,0x2d1,0x28c)],_0x4cd093[_0x850f0f(0xd3,0x162,0xcb,0xe2)]={},_0x4cd093[_0x850f0f(0xd3,0x162,0xcb,0xe2)][_0x18f921(0x219,0x254,0x2f9,0x2d6)]=_0x2d1b1c,_0x4cd093[_0x850f0f(0xd3,0x162,0xcb,0xe2)][_0x850f0f(0xd1,0xef,0x13e,0x88)]=_0x322ad4[_0x850f0f(0xba,0x1ea,0x121,0xb0)],_0x15dc45[_0x850f0f(0x1e8,0x218,0x1ba,0x1bd)](_0x4cd093);}else{const _0x535074={};_0x535074[_0x18f921(0x27f,0x204,0x155,0x1d3)]=_0x53fd09['ACvoa'],_0x535074[_0x18f921(0x174,0x126,0x147,0x1ad)]=_0x18f921(0xe8,0x14c,0x1e6,0x1ae)+_0x1243e8[_0x850f0f(0x10d,0x1b1,0x15c,0xeb)]+'张'+_0x39bf32+']',_0x1983d0[_0x18f921(0x298,0x2e7,0x31f,0x2ef)](_0x535074);}});const _0x5815f5={..._0x544c99};return _0x5815f5['content']=_0x15dc45,_0xc3bd29[_0x3bb048]=_0x5815f5,_0xc3bd29;}function findMessageIndexWithPlaceholder(_0x5844c5,_0x114bc5){const _0x69452b={};_0x69452b[_0x6ab434(0x4da,0x443,0x4af,0x426)]=function(_0x583114,_0x4248df){return _0x583114===_0x4248df;},_0x69452b[_0x3e7aed(0x105,0x194,0x62,0x1b5)]=_0x3e7aed(0x59,0x105,0x38,0x55),_0x69452b[_0x6ab434(0x553,0x5f5,0x5fe,0x6a5)]=function(_0x5bbdb2,_0x364efe){return _0x5bbdb2<_0x364efe;},_0x69452b[_0x3e7aed(0xf5,0x171,0x113,0xfe)]=function(_0xc62048,_0x1ba402){return _0xc62048===_0x1ba402;},_0x69452b[_0x3e7aed(0x8f,-0x2,0x12a,0x8c)]=_0x3e7aed(0xc4,0x116,0x21,0x179),_0x69452b['vguPZ']=function(_0x35dedf,_0x5b2c53){return _0x35dedf!==_0x5b2c53;},_0x69452b[_0x6ab434(0x563,0x5d1,0x5ba,0x5f0)]=_0x3e7aed(0xc7,0x8,0x114,0x9f);function _0x6ab434(_0xe2ef1c,_0x5efb7d,_0xd65974,_0x1ac3d1){return _0x405d6a(_0xe2ef1c-0x86,_0x5efb7d,_0xd65974-0x1,_0x1ac3d1-0xaf);}_0x69452b[_0x3e7aed(0x158,0xc1,0x179,0xbe)]=function(_0x263de2,_0x1e522d){return _0x263de2===_0x1e522d;},_0x69452b[_0x6ab434(0x4aa,0x534,0x4ee,0x4b1)]=_0x6ab434(0x5ed,0x5df,0x5d3,0x64b),_0x69452b[_0x3e7aed(0x153,0x113,0x199,0x96)]=_0x3e7aed(0xa5,0x5,0xd4,0x14),_0x69452b[_0x6ab434(0x4dc,0x4ce,0x56e,0x5d6)]=function(_0x4ac2ff,_0x3ad4fa){return _0x4ac2ff!==_0x3ad4fa;},_0x69452b[_0x6ab434(0x44c,0x4d0,0x4b1,0x46b)]='ZDgJb',_0x69452b[_0x6ab434(0x576,0x608,0x55f,0x606)]=_0x6ab434(0x62a,0x517,0x5ae,0x514),_0x69452b[_0x3e7aed(0x195,0x1b7,0x175,0x117)]=function(_0x444f14,_0xd0d546){return _0x444f14===_0xd0d546;};const _0x251f62=_0x69452b;for(let _0x2d3a28=0x2003+-0x1a8+-0x1e5b;_0x251f62[_0x6ab434(0x64f,0x555,0x5fe,0x660)](_0x2d3a28,_0x5844c5[_0x3e7aed(0x13d,0xf6,0x158,0x11a)]);_0x2d3a28++){const _0x3b02ad=_0x5844c5[_0x2d3a28];if(_0x251f62['eVHYP'](typeof _0x3b02ad[_0x3e7aed(0xda,0x145,0x145,0xcc)],_0x251f62[_0x3e7aed(0x8f,0xc3,0x103,0x11d)])&&_0x3b02ad[_0x3e7aed(0xda,0xfb,0x157,0x155)][_0x6ab434(0x558,0x63f,0x5cc,0x537)](_0x114bc5)){if(_0x251f62[_0x6ab434(0x40f,0x4c0,0x47f,0x4d1)](_0x251f62[_0x6ab434(0x678,0x67d,0x5ba,0x5a1)],_0x251f62['kmWEN'])){_0x56cb8a['error'](_0x6ab434(0x49a,0x590,0x539,0x470));return;}else return _0x2d3a28;}else{if(Array[_0x6ab434(0x5b8,0x59b,0x5fa,0x697)](_0x3b02ad[_0x6ab434(0x581,0x5bc,0x51d,0x553)])){if(_0x251f62['MmXeS'](_0x251f62['BKNwi'],_0x251f62[_0x6ab434(0x620,0x569,0x596,0x544)])){if(_0x297eac){const _0x27b646=_0x12189c[_0x6ab434(0x49b,0x452,0x500,0x449)](_0x2f15e8,arguments);return _0x2b55cf=null,_0x27b646;}}else for(const _0xafd8d8 of _0x3b02ad[_0x3e7aed(0xda,0xae,0x41,0x104)]){if(_0x251f62[_0x3e7aed(0x12b,0x143,0x118,0x13b)](_0x251f62[_0x6ab434(0x3f6,0x501,0x4b1,0x4b2)],_0x251f62[_0x3e7aed(0x11c,0xe6,0x135,0x139)])){if(_0x251f62['bplQJ'](_0xafd8d8[_0x6ab434(0x55b,0x480,0x4c2,0x571)],_0x251f62[_0x6ab434(0x4c6,0x5a8,0x548,0x5ce)])&&_0xafd8d8['text']['includes'](_0x114bc5))return _0x2d3a28;}else for(const _0x239bef of _0x27be21[_0x3e7aed(0xda,0x185,0x14,0x119)]){if(_0x251f62[_0x6ab434(0x520,0x501,0x4af,0x3f0)](_0x239bef[_0x6ab434(0x3fb,0x512,0x4c2,0x45c)],_0x251f62[_0x6ab434(0x52f,0x514,0x548,0x50c)])&&_0x239bef['text'][_0x3e7aed(0x189,0x104,0x197,0x19c)](_0x3b9602))return _0x4f5cc3;}}}}}function _0x3e7aed(_0x536909,_0x16db07,_0x20c01b,_0x365680){return _0x405d6a(_0x536909-0x1a9,_0x16db07,_0x536909- -0x442,_0x365680-0x155);}return-(-0x1fc+-0x2103+-0x2*-0x1180);}function generateRequestId(){function _0x284db4(_0x4dfbf2,_0x4024f5,_0x1adfe3,_0x2d794c){return _0x405d6a(_0x4dfbf2-0xaf,_0x2d794c,_0x4dfbf2- -0x20d,_0x2d794c-0x118);}function _0x23dbf1(_0x3dc293,_0x403ba7,_0x26aeed,_0x117aa7){return _0x405d6a(_0x3dc293-0x2c,_0x117aa7,_0x403ba7- -0x4b5,_0x117aa7-0x197);}const _0x28cb26={};_0x28cb26['tvXHG']=function(_0x3d9a98,_0x1d1fb5){return _0x3d9a98+_0x1d1fb5;};const _0x1e6ad8=_0x28cb26;if(crypto&&crypto[_0x23dbf1(0x9e,0x1e,-0xc,-0x91)])return crypto['randomUUID']();return _0x1e6ad8['tvXHG'](Date['now']()[_0x23dbf1(0x14e,0x12b,0xfb,0xe5)](0x10c6+0xe*-0x1+-0x1094),Math['random']()[_0x23dbf1(0x1a7,0x12b,0x13d,0x9a)](-0x153*-0x1+-0x762+0x45*0x17)[_0x284db4(0x399,0x426,0x30c,0x372)](-0x506+0xd0f*-0x1+0x1217));}export function LLM_CHAR_MODIFY_GET_PROMPT(){const _0x33765c={'ypqDW':function(_0x38c7f6,_0x1a45e1){return _0x38c7f6(_0x1a45e1);},'DVLYi':_0x2f9e5b(0x311,0x38c,0x329,0x3f7)+'时','VuAhr':function(_0x2fb4f0){return _0x2fb4f0();},'CygLc':function(_0x33b6f3,_0x1f2cdb,_0x4ab44b){return _0x33b6f3(_0x1f2cdb,_0x4ab44b);}};function _0x2f9e5b(_0x576f67,_0x226b64,_0x202699,_0xcd1c13){return _0x405d6a(_0x576f67-0xf0,_0xcd1c13,_0x226b64- -0x272,_0xcd1c13-0xf0);}return new Promise((_0x4aecca,_0x523362)=>{function _0x59c3d8(_0x3b4108,_0x41eca3,_0xf94a76,_0x4394eb){return _0x2f9e5b(_0x3b4108-0x1f3,_0x41eca3- -0x2bd,_0xf94a76-0x9f,_0x3b4108);}const _0x4c0f70=_0x33765c['VuAhr'](generateRequestId);console[_0x59c3d8(-0x30,-0x3f,0x85,-0x2f)](_0x59c3d8(-0x1f,0x3a,0x5d,0x7c)+'PromptModi'+_0x3ac8bb(0x40,0x2d,-0x2,0x98)+_0x3ac8bb(0x30,0xd6,0x164,0x25)+_0x59c3d8(0x95,0x82,0x100,0x11c)+_0x59c3d8(0xae,0x22,-0x43,0x49)+_0x4c0f70+')');const _0x2676c4=_0x5138d9=>{function _0x2dd2c9(_0x386491,_0x2670a6,_0x41f939,_0x314f27){return _0x59c3d8(_0x314f27,_0x386491-0x29,_0x41f939-0xb2,_0x314f27-0x1b8);}function _0x90b1c4(_0x14e69e,_0x5f3363,_0x2def03,_0xc9e321){return _0x3ac8bb(_0x14e69e-0x16c,_0x14e69e- -0x35,_0x2def03-0x1b0,_0x5f3363);}if(_0x5138d9['id']!==_0x4c0f70)return;eventSource[_0x90b1c4(0x6f,0x91,0x6b,0x110)+_0x2dd2c9(0xc6,0x147,0x87,0x50)](eventNames[_0x90b1c4(0x10e,0x94,0x188,0x10b)+_0x2dd2c9(-0x25,-0x69,-0x3e,-0x22)+_0x90b1c4(0x29,-0x2b,0x77,0x42)+_0x90b1c4(0x6,-0x64,0xa8,0x78)],_0x2676c4),_0x33765c[_0x90b1c4(0x75,0x85,0x125,0x124)](_0x4aecca,_0x5138d9[_0x90b1c4(0x54,0x89,0x4f,0x7d)]);};eventSource['on'](eventNames[_0x3ac8bb(0xbb,0x143,0xde,0x11a)+_0x3ac8bb(0x134,0x71,0x83,0x4a)+_0x3ac8bb(0x109,0x5e,0x4,-0x4c)+_0x59c3d8(-0xe5,-0x84,-0x141,-0x47)],_0x2676c4);function _0x3ac8bb(_0x48f7f6,_0x4bf6a4,_0x2762fe,_0x2a3447){return _0x2f9e5b(_0x48f7f6-0xb7,_0x4bf6a4- -0x1fe,_0x2762fe-0x1ab,_0x2a3447);}const _0x1a0e9f={};_0x1a0e9f['id']=_0x4c0f70,eventSource[_0x3ac8bb(0x1a3,0x11b,0xa5,0xe2)](eventNames[_0x59c3d8(0x42,0x84,0xcc,0x108)+'ODIFY_GET_'+_0x59c3d8(0xf6,0xc9,0x17c,0xe7)+_0x59c3d8(-0x54,-0x37,-0x2f,0x1a)],_0x1a0e9f),_0x33765c[_0x59c3d8(0x144,0x83,-0xa,-0x44)](setTimeout,()=>{function _0x59c55d(_0x338d1c,_0x28e86c,_0x5bab2e,_0x4fbb2f){return _0x3ac8bb(_0x338d1c-0x16,_0x338d1c- -0x202,_0x5bab2e-0x1d9,_0x5bab2e);}function _0x4c77e6(_0x4fca95,_0x1a73dd,_0x31d7ed,_0x5895ce){return _0x3ac8bb(_0x4fca95-0x4d,_0x4fca95-0xc8,_0x31d7ed-0x17d,_0x1a73dd);}eventSource[_0x4c77e6(0x16c,0x11d,0xdc,0x125)+_0x59c55d(-0xa6,-0x3d,-0xc0,-0x25)](eventNames['LLM_CHAR_M'+_0x59c55d(-0x191,-0x223,-0x185,-0x173)+_0x4c77e6(0x126,0x1e3,0x13a,0xf8)+_0x4c77e6(0x103,0x139,0x18c,0xc7)],_0x2676c4),_0x33765c[_0x59c55d(-0x158,-0x213,-0x107,-0xcb)](_0x523362,new Error(_0x33765c['DVLYi']));},-0x102d+-0x67*-0x6b+0x5*0x270);});}export function LLM_CHAR_MODIFY(_0x299173,_0x20508c={}){function _0x3a79af(_0x24e58e,_0x5ebc85,_0x23ca6a,_0x1ef51d){return _0x405d6a(_0x24e58e-0x94,_0x5ebc85,_0x24e58e- -0x533,_0x1ef51d-0xe4);}function _0x3ba8ac(_0x1d6960,_0x431b78,_0x423c97,_0xbe895d){return _0x405d6a(_0x1d6960-0x188,_0xbe895d,_0x423c97-0x120,_0xbe895d-0x9c);}const _0x198d02={'Moxwl':_0x3ba8ac(0x5e9,0x5fb,0x683,0x6c5),'tsppp':_0x3ba8ac(0x521,0x5b7,0x5c9,0x613),'jFuzG':function(_0x3d2e19,_0x4976bc){return _0x3d2e19!==_0x4976bc;},'qHcWL':function(_0xbe10e9,_0x44dcb1){return _0xbe10e9(_0x44dcb1);},'HfYXL':function(_0x3bad48,_0x980f3d){return _0x3bad48(_0x980f3d);},'yFndf':function(_0x833c70){return _0x833c70();},'KMgZS':'角色修改\x20LLM\x20请'+_0x3ba8ac(0x588,0x6cc,0x627,0x5b4),'dowUi':function(_0x20a3ed,_0x56715e,_0x92b516){return _0x20a3ed(_0x56715e,_0x92b516);}};return new Promise((_0x207631,_0xee335a)=>{function _0x497a81(_0x254e07,_0x53d6ea,_0x531cde,_0x4e2620){return _0x3a79af(_0x53d6ea-0x388,_0x531cde,_0x531cde-0x163,_0x4e2620-0x13f);}const _0x3a72e4={'GgRWp':function(_0x5195ef,_0x37c31c){return _0x5195ef(_0x37c31c);},'rrJbh':function(_0x5171a1,_0xde9f88){return _0x198d02['jFuzG'](_0x5171a1,_0xde9f88);},'jlpRF':function(_0xab8264){return _0x198d02['yFndf'](_0xab8264);},'xWrnN':_0x198d02[_0x497a81(0x3e3,0x424,0x3ae,0x4c8)]},_0x3a2349=generateRequestId(),_0x535bb8=_0x20508c[_0x44ef34(0x47,0x199,0xe4,0x58)]||0x8*-0x22d2+0x23bc+0x1dd34;let _0x3d2bb1=null;function _0x44ef34(_0x24387f,_0x5e2c1d,_0x4f7e1e,_0x2ba434){return _0x3a79af(_0x4f7e1e-0x13c,_0x24387f,_0x4f7e1e-0x74,_0x2ba434-0x5b);}console['log'](_0x44ef34(0x238,0x1f1,0x172,0xb4)+_0x44ef34(0x145,0x14d,0xa8,0x139)+_0x497a81(0x3c1,0x3b2,0x45a,0x34a)+_0x497a81(0x2be,0x2d8,0x23e,0x395)+_0x44ef34(0x151,0x12c,0xae,0x77)+'request\x20(I'+'D:\x20'+_0x3a2349+')');const _0x444bcf=()=>{function _0x3d4f0d(_0x403750,_0x58ca68,_0x2910fc,_0x11f62e){return _0x497a81(_0x403750-0xeb,_0x2910fc-0xc5,_0x58ca68,_0x11f62e-0x15d);}function _0x15ab59(_0x2dec67,_0x1ce509,_0x44e0f9,_0x27b449){return _0x44ef34(_0x27b449,_0x1ce509-0x182,_0x44e0f9-0xc3,_0x27b449-0x1d3);}eventSource[_0x15ab59(0x160,0x275,0x1e0,0x274)+_0x15ab59(0x230,0x25a,0x298,0x203)](eventNames[_0x15ab59(0x1ef,0x30c,0x27f,0x1e5)+_0x3d4f0d(0x50c,0x4dc,0x4ab,0x4e7)+_0x3d4f0d(0x4fe,0x47c,0x521,0x4c9)],_0x491ae3),_0x3d2bb1&&(_0x3a72e4[_0x3d4f0d(0x5ab,0x4e9,0x51d,0x4c1)](clearTimeout,_0x3d2bb1),_0x3d2bb1=null);},_0x491ae3=_0x1b6f6e=>{function _0x4ab837(_0x80ca37,_0x51af74,_0x5361b5,_0x258b0a){return _0x497a81(_0x80ca37-0x28,_0x258b0a-0x27,_0x5361b5,_0x258b0a-0x1c1);}function _0x31caa2(_0x31b979,_0x3888be,_0x10590b,_0x119f87){return _0x497a81(_0x31b979-0xab,_0x10590b- -0x354,_0x31b979,_0x119f87-0x4d);}if(_0x198d02[_0x4ab837(0x420,0x4b7,0x4d3,0x43e)]!==_0x198d02[_0x31caa2(0x1e,0x36,-0x29,-0x4a)]){if(_0x198d02[_0x4ab837(0x469,0x496,0x4ae,0x41d)](_0x1b6f6e['id'],_0x3a2349))return;_0x444bcf(),_0x1b6f6e[_0x31caa2(-0x10a,0x12,-0x6a,-0x6c)]?_0x198d02['qHcWL'](_0x207631,_0x1b6f6e[_0x4ab837(0x3ab,0x3ab,0x30d,0x353)]):_0x198d02['HfYXL'](_0xee335a,new Error(_0x1b6f6e['result']||'LLM\x20请求失败'));}else _0x680f5b[_0x81e547[_0x33f1df]]=_0x1b7fac;};eventSource['on'](eventNames[_0x497a81(0x386,0x408,0x4cd,0x3ff)+'ODIFY_RESP'+_0x44ef34(0x2ae,0x1d4,0x210,0x2a5)],_0x491ae3);const _0x2e6ec5={};_0x2e6ec5[_0x44ef34(0x11d,0x171,0x102,0xd4)]=_0x299173,_0x2e6ec5['id']=_0x3a2349,eventSource['emit'](eventNames[_0x44ef34(0x147,0x234,0x1bc,0x280)+_0x497a81(0x36d,0x2ee,0x2cc,0x233)+'EST'],_0x2e6ec5),_0x3d2bb1=_0x198d02['dowUi'](setTimeout,()=>{function _0xa086dc(_0x11e6b1,_0x3b95fd,_0x15903b,_0x2b7b4d){return _0x44ef34(_0x11e6b1,_0x3b95fd-0x104,_0x3b95fd-0x34,_0x2b7b4d-0x4b);}function _0x5edc1d(_0x103f8e,_0x51eeab,_0x272098,_0x3d4f89){return _0x44ef34(_0x3d4f89,_0x51eeab-0x8d,_0x51eeab-0x3f8,_0x3d4f89-0xa9);}if(_0x3a72e4[_0x5edc1d(0x443,0x489,0x409,0x3ca)](_0x5edc1d(0x41c,0x4d3,0x57b,0x466),_0xa086dc(0x68,0x12e,0xea,0x1ad)))_0x3a72e4[_0x5edc1d(0x56c,0x4b4,0x446,0x54b)](_0x444bcf),_0x3a72e4[_0xa086dc(0x2ca,0x240,0x2e5,0x287)](_0xee335a,new Error(_0x3a72e4[_0x5edc1d(0x55d,0x4cc,0x4ff,0x47e)]));else return _0x102c82;},_0x535bb8);});}function preprocessTagContent(_0x181fdd){const _0x29f130={};_0x29f130[_0x2e3ef9(0x22d,0x175,0x290,0x269)]='下半身NSFW背面:',_0x29f130[_0x2e3ef9(0x282,0x33b,0x1d1,0x338)]='上半身NSFW背面:';const _0x17e5e1=_0x29f130;let _0x3813c1=_0x181fdd[_0x2b289a(-0x3,-0x25,-0x21,0x81)](/:/g,':')['replace'](/,/g,',');function _0x2b289a(_0x255519,_0x303e36,_0x52d027,_0x265d47){return _0x405d6a(_0x255519-0x7e,_0x265d47,_0x303e36- -0x5cf,_0x265d47-0xbd);}_0x3813c1=_0x3813c1[_0x2e3ef9(0x340,0x3eb,0x381,0x3a3)](/下半身NSWebcam:/g,_0x17e5e1['XTZET']),_0x3813c1=_0x3813c1[_0x2e3ef9(0x340,0x2e1,0x3bb,0x3fc)](/下半身NSFW_背面:/g,_0x17e5e1[_0x2e3ef9(0x22d,0x29f,0x1c7,0x1d6)]);function _0x2e3ef9(_0x2dcbba,_0x2c0a50,_0x336a70,_0x4a66be){return _0x405d6a(_0x2dcbba-0xd3,_0x2c0a50,_0x2dcbba- -0x26a,_0x4a66be-0x15a);}return _0x3813c1=_0x3813c1['replace'](/上半身NSFW_背面:/g,_0x17e5e1[_0x2e3ef9(0x282,0x23c,0x254,0x275)]),_0x3813c1;}function parseCharacterData(_0x1d095d){const _0x5d1ada={'jROFv':function(_0x1a57d3,_0x27347d){return _0x1a57d3(_0x27347d);},'ykgsm':'nameCN','HeeId':'characterT'+_0x58f649(0x375,0x358,0x45b,0x40a),'KNeuy':_0x58f649(0x522,0x562,0x5f4,0x52e)+'FW','lNkwq':_0x257ecb(-0xd8,-0x15b,-0x65,-0x7d)+_0x257ecb(-0x14b,-0x1ad,-0xb3,-0xbd),'wSyIc':'fullBodySF'+'W','AKAwj':_0x58f649(0x531,0x49c,0x567,0x554)+_0x58f649(0x4c7,0x48c,0x465,0x426),'fcORq':_0x257ecb(-0x196,-0xd4,-0x1e9,-0x139)+_0x58f649(0x472,0x4fb,0x4a7,0x43a),'bParU':_0x58f649(0x46e,0x48b,0x4ce,0x470)+_0x58f649(0x4eb,0x4f7,0x4b9,0x497),'HlUeU':_0x58f649(0x3f3,0x4d4,0x40b,0x48b)+'FW','MAlRm':function(_0x4285bc,_0x27895f){return _0x4285bc===_0x27895f;},'dhuzc':function(_0x23577a,_0x4fbad8){return _0x23577a+_0x4fbad8;},'GmReA':function(_0x568f4a,_0x2fe035){return _0x568f4a!==_0x2fe035;},'PMahd':_0x58f649(0x487,0x3f8,0x398,0x453),'reqDD':_0x58f649(0x4b4,0x56b,0x56e,0x55d),'lufxy':'[character'+_0x58f649(0x39f,0x3b4,0x4a6,0x41d)+_0x58f649(0x4c9,0x480,0x4cb,0x505)+_0x58f649(0x604,0x569,0x5c0,0x582)},_0x1ff8a2=_0x1d095d[_0x257ecb(-0x9d,-0x28,0x2a,-0xe)]('\x0a')['map'](_0x58d51c=>_0x58d51c['trim']())[_0x257ecb(-0x1b0,-0x202,-0x250,-0x17b)](_0x3127dd=>_0x3127dd),_0x245f9c={};_0x245f9c['nameCN']='',_0x245f9c['nameEN']='',_0x245f9c[_0x257ecb(-0x14d,-0x147,-0x200,-0xa9)+_0x58f649(0x4b6,0x3ba,0x34b,0x40a)]='',_0x245f9c['facialFeat'+_0x58f649(0x4b6,0x52a,0x4ac,0x510)]='',_0x245f9c[_0x58f649(0x4e6,0x4e8,0x434,0x4d2)+_0x58f649(0x3f1,0x418,0x3f5,0x486)]='',_0x245f9c[_0x58f649(0x4f7,0x535,0x48a,0x52e)+'FW']='',_0x245f9c[_0x58f649(0x57c,0x550,0x54e,0x52e)+'FWBack']='',_0x245f9c[_0x257ecb(-0xb2,-0x23,-0x95,-0xb4)+'W']='',_0x245f9c[_0x257ecb(-0xb2,-0x82,0x10,-0x49)+_0x58f649(0x36a,0x3e2,0x4b8,0x426)]='',_0x245f9c['upperBodyN'+_0x257ecb(-0x1cc,-0x111,-0x131,-0x1c2)]='',_0x245f9c[_0x257ecb(-0x196,-0x220,-0x15c,-0x1c9)+_0x58f649(0x46e,0x4ed,0x3d3,0x497)]='',_0x245f9c[_0x58f649(0x501,0x45b,0x4a7,0x48b)+'FW']='',_0x245f9c[_0x257ecb(-0x17b,-0x214,-0x12c,-0x191)+_0x58f649(0x403,0x4a2,0x3f2,0x4bb)]='';const _0x486c33=_0x245f9c,_0x537e73={};_0x537e73[_0x257ecb(-0x18c,-0xf4,-0x10e,-0xe9)]=_0x5d1ada[_0x58f649(0x40a,0x4b8,0x4b5,0x4bd)],_0x537e73[_0x257ecb(-0x89,-0x74,-0xaa,-0x3b)]=_0x58f649(0x603,0x608,0x525,0x553),_0x537e73[_0x257ecb(-0x86,-0x28,-0x6e,-0xca)]=_0x5d1ada['HeeId'],_0x537e73[_0x257ecb(-0x203,-0x2a6,-0x141,-0x1e2)]=_0x257ecb(-0x134,-0x1cd,-0xf1,-0x1b5)+_0x58f649(0x4a0,0x5d7,0x5c8,0x510),_0x537e73['五官外貌背面']=_0x58f649(0x597,0x51c,0x452,0x4d2)+_0x257ecb(-0x180,-0x213,-0x236,-0x223);function _0x257ecb(_0x39989b,_0x28560b,_0x1c2350,_0x2d91e2){return _0x405d6a(_0x39989b-0x1f3,_0x1c2350,_0x39989b- -0x688,_0x2d91e2-0x1d6);}_0x537e73[_0x58f649(0x495,0x4c8,0x4c8,0x49e)]=_0x5d1ada['KNeuy'],_0x537e73['上半身SFW背面']=_0x5d1ada['lNkwq'],_0x537e73[_0x257ecb(-0x8d,-0x101,-0xc8,-0x5f)]=_0x5d1ada[_0x257ecb(-0xf5,-0xf6,-0x197,-0x106)],_0x537e73['下半身SFW背面']=_0x5d1ada[_0x257ecb(-0x1a9,-0x14f,-0x142,-0x169)],_0x537e73[_0x58f649(0x47b,0x3b7,0x545,0x47c)]=_0x5d1ada['fcORq'],_0x537e73['上半身NSFW背面']=_0x5d1ada[_0x257ecb(-0xed,-0x18e,-0x28,-0x85)],_0x537e73['下半身NSFW']=_0x5d1ada[_0x257ecb(-0x188,-0x1e8,-0xe2,-0x23e)],_0x537e73[_0x257ecb(-0x162,-0x156,-0x225,-0x9b)]=_0x58f649(0x445,0x46e,0x516,0x48b)+_0x58f649(0x4c3,0x548,0x521,0x4bb);const _0x34b758=_0x537e73;for(const _0x163f7b of _0x1ff8a2){const _0x1cbff6=_0x163f7b[_0x58f649(0x55e,0x560,0x576,0x4ee)](':');if(_0x5d1ada[_0x58f649(0x4a5,0x471,0x374,0x43d)](_0x1cbff6,-(-0x104e+0x48d+0x2*0x5e1)))continue;const _0x51dbce=_0x163f7b[_0x257ecb(-0xe2,-0x60,-0x196,-0xb9)](0x168c+0x1*0xc9d+-0x2329,_0x1cbff6)[_0x58f649(0x561,0x515,0x5c7,0x57a)](),_0x3fe936=_0x163f7b[_0x257ecb(-0xe2,-0x147,-0x1a0,-0x5e)](_0x5d1ada[_0x257ecb(-0x139,-0x7a,-0x1c1,-0x9a)](_0x1cbff6,0x2314+0x179b+-0x3aae))[_0x58f649(0x5fc,0x55a,0x4c4,0x57a)]();if(_0x34b758[_0x51dbce])_0x486c33[_0x34b758[_0x51dbce]]=_0x3fe936;else _0x51dbce&&_0x3fe936&&console['log'](_0x58f649(0x520,0x455,0x425,0x4e7)+_0x257ecb(-0x1e9,-0x235,-0x26c,-0x19f)+'fy]\x20未识别的人物'+_0x257ecb(-0x1aa,-0x14d,-0x268,-0x233)+_0x51dbce+'\x22');}function _0x58f649(_0x391442,_0x1c8838,_0x5a1c72,_0x220aed){return _0x405d6a(_0x391442-0x43,_0x1c8838,_0x220aed- -0x82,_0x220aed-0x1de);}if(!_0x486c33[_0x58f649(0x5ca,0x522,0x5fb,0x53d)]){if(_0x5d1ada[_0x58f649(0x468,0x4c5,0x406,0x408)](_0x5d1ada[_0x58f649(0x4a6,0x451,0x4e7,0x467)],_0x5d1ada['reqDD']))return null;else _0x5d1ada['jROFv'](_0x31c304,_0x57eefe),_0x448cd3=null;}return console[_0x58f649(0x45b,0x40f,0x3ed,0x46e)](_0x5d1ada[_0x58f649(0x3d8,0x3e4,0x3ee,0x40e)],_0x486c33),_0x486c33;}function parseOutfitData(_0x43c878){const _0x389eb7={};_0x389eb7[_0x5a7fcd(0x58d,0x51f,0x4cf,0x4d2)]=_0x1cf736(0x219,0x15e,0x1ba,0x211),_0x389eb7[_0x5a7fcd(0x460,0x4cd,0x382,0x42a)]='nameEN',_0x389eb7['dNbji']=_0x5a7fcd(0x497,0x46a,0x4c8,0x4b8),_0x389eb7[_0x1cf736(0x2de,0x3ab,0x2d2,0x31f)]=_0x1cf736(0x1d3,0x1be,0x1cd,0x227)+_0x1cf736(0x2cf,0x29b,0x29d,0x2ca),_0x389eb7[_0x1cf736(0x379,0x2e1,0x2bc,0x313)]=_0x5a7fcd(0x3fe,0x514,0x413,0x4a5)+'ck',_0x389eb7[_0x1cf736(0x2a4,0x34a,0x378,0x361)]=function(_0x587ac9,_0x44f196){return _0x587ac9+_0x44f196;},_0x389eb7['OTdHd']=function(_0x54d7b2,_0x39179c){return _0x54d7b2&&_0x39179c;},_0x389eb7['VXLwS']=_0x5a7fcd(0x3e3,0x46f,0x426,0x445)+_0x1cf736(0x15d,0x1da,0x1d7,0x1f7)+'fy]\x20解析到的服装'+_0x1cf736(0x2d5,0x39b,0x38a,0x35c);const _0x1337cc=_0x389eb7,_0x172254=_0x43c878[_0x5a7fcd(0x4e9,0x457,0x435,0x4c7)]('\x0a')[_0x1cf736(0x249,0x254,0x35f,0x2f7)](_0x5bf1d4=>_0x5bf1d4[_0x5a7fcd(0x4a4,0x55c,0x44d,0x4d8)]())[_0x5a7fcd(0x421,0x3d1,0x389,0x3b4)](_0x2f1dcc=>_0x2f1dcc),_0x56d1cf={};_0x56d1cf[_0x5a7fcd(0x487,0x43d,0x4a1,0x49b)]='',_0x56d1cf['nameEN']='',_0x56d1cf[_0x1cf736(0x238,0x1a3,0x1e7,0x211)]='',_0x56d1cf[_0x1cf736(0x2e6,0x327,0x3d0,0x334)]='',_0x56d1cf[_0x5a7fcd(0x41c,0x3bf,0x3f8,0x3ab)+_0x5a7fcd(0x413,0x423,0x471,0x44e)]='',_0x56d1cf[_0x5a7fcd(0x4dd,0x491,0x5a6,0x4dd)]='',_0x56d1cf[_0x1cf736(0x27f,0x3bf,0x2c0,0x321)+'ck']='';const _0x486395=_0x56d1cf,_0x16b13e={};_0x16b13e['归属人']=_0x1337cc[_0x5a7fcd(0x4ea,0x53a,0x542,0x4d2)],_0x16b13e[_0x1cf736(0x1da,0x2bd,0x2a1,0x254)]=_0x1cf736(0x36d,0x2da,0x280,0x317),_0x16b13e[_0x5a7fcd(0x4b1,0x497,0x588,0x4db)]=_0x1337cc[_0x1cf736(0x24b,0x2b0,0x319,0x2a6)],_0x16b13e['上半身']=_0x1337cc['dNbji'],_0x16b13e[_0x1cf736(0x359,0x25d,0x219,0x2e1)]=_0x1337cc['zDyZd'],_0x16b13e[_0x5a7fcd(0x3e4,0x491,0x3c1,0x42e)]='fullBody';function _0x1cf736(_0x1e1ab9,_0x416b49,_0x5cf5f7,_0x4b81a0){return _0x405d6a(_0x1e1ab9-0x154,_0x1e1ab9,_0x4b81a0- -0x2a8,_0x4b81a0-0x1c5);}_0x16b13e[_0x5a7fcd(0x43a,0x493,0x508,0x475)]=_0x1337cc['qsDtM'];function _0x5a7fcd(_0x554faa,_0xa6374,_0x4f44e1,_0xfe8436){return _0x405d6a(_0x554faa-0x1d7,_0xa6374,_0xfe8436- -0x124,_0xfe8436-0xc);}const _0x365029=_0x16b13e;for(const _0x21f55e of _0x172254){const _0xe0d844=_0x21f55e[_0x1cf736(0x267,0x347,0x23d,0x2c8)](':');if(_0xe0d844===-(0x15c0+0x1*-0x12fb+-0x2c4))continue;const _0x448dec=_0x21f55e[_0x1cf736(0x347,0x38d,0x2da,0x2fe)](-0x9d8*0x2+0x53f*0x1+0x1*0xe71,_0xe0d844)['trim'](),_0x3eaee0=_0x21f55e[_0x1cf736(0x27d,0x391,0x35b,0x2fe)](_0x1337cc[_0x5a7fcd(0x46c,0x4d2,0x53b,0x4e5)](_0xe0d844,0xd5d+0x57d+-0x12d9))[_0x1cf736(0x361,0x3a2,0x2f8,0x354)]();if(_0x365029[_0x448dec])_0x486395[_0x365029[_0x448dec]]=_0x3eaee0;else _0x1337cc[_0x5a7fcd(0x3a4,0x3cb,0x3da,0x3c6)](_0x448dec,_0x3eaee0)&&console[_0x1cf736(0x227,0x195,0x30c,0x248)]('[character'+_0x1cf736(0x24a,0x13d,0x133,0x1f7)+_0x5a7fcd(0x3a1,0x41f,0x2e5,0x390)+_0x5a7fcd(0x38f,0x2f2,0x3da,0x3ba)+_0x448dec+'\x22');}if(!_0x486395[_0x1cf736(0x25c,0x35e,0x279,0x317)])return null;return console['log'](_0x1337cc['VXLwS'],_0x486395),_0x486395;}function extractCharacterAndOutfitTags(_0x3ddea8){function _0x1054e5(_0x51efd0,_0x534cc3,_0x195a1a,_0x506e6e){return _0x405d6a(_0x51efd0-0x1b9,_0x51efd0,_0x195a1a- -0x2e9,_0x506e6e-0x1d2);}const _0x392a4c={'UfBim':function(_0x40b78f,_0x1c1174,_0x1ba67a,_0x739670,_0x4b0143){return _0x40b78f(_0x1c1174,_0x1ba67a,_0x739670,_0x4b0143);},'dHOmg':_0x1054e5(0x22e,0x250,0x197,0x239),'DGGcg':_0x48db84(0x2cd,0x32b,0x293,0x218)+_0x1054e5(0x1bc,0x16a,0x1b6,0x121)+_0x1054e5(0x2a6,0x2d6,0x229,0x22a)+'ed','hNmCv':_0x48db84(0x230,0x2f2,0x2c8,0x230)+_0x1054e5(0x2c5,0x316,0x2fd,0x260)+_0x48db84(0x33f,0x3f3,0x3cb,0x34c),'OICSw':function(_0x388e08,_0x4f2324,_0xe7fb1f,_0x247823,_0x15e64a){return _0x388e08(_0x4f2324,_0xe7fb1f,_0x247823,_0x15e64a);},'mFoZO':_0x48db84(0x247,0x2f1,0x1c9,0x208),'CiKko':function(_0x511ed4,_0x2fd0ca){return _0x511ed4!==_0x2fd0ca;},'AlzFM':'oVUxu','Ktgxm':function(_0x3ce438,_0x1b024d){return _0x3ce438(_0x1b024d);},'jykmj':function(_0x29c458,_0x4d039d){return _0x29c458===_0x4d039d;},'UiqCj':_0x1054e5(0x1cf,0x33e,0x28a,0x272),'MMJXt':_0x48db84(0x210,0x1f1,0x1b8,0x147),'gFjxY':function(_0x185ba6,_0x55193b){return _0x185ba6!==_0x55193b;},'FSxDT':_0x1054e5(0x2ea,0x2d9,0x223,0x2a2),'AhVAW':_0x1054e5(0x1fb,0x2f4,0x26c,0x29d),'FOgzG':_0x1054e5(0x166,0x23a,0x1a2,0x144)},_0x1c2645=[];_0x3ddea8=_0x3ddea8['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x1054e5(0x356,0x39b,0x313,0x30e)]();const _0x2ee92e=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x4b2fdd;while((_0x4b2fdd=_0x2ee92e['exec'](_0x3ddea8))!==null){if(_0x392a4c[_0x1054e5(0x248,0x237,0x1dc,0x18b)]!==_0x48db84(0x216,0x254,0x1b6,0x2d8)){const _0x4dddab=_0x4b2fdd[0xed4+0x208e+0x3*-0xfcb],_0x5eb53c=preprocessTagContent(_0x4b2fdd[-0x19e3+0x1088+-0x8d*-0x11]),_0x4f7abf=_0x4b2fdd[_0x1054e5(0x304,0x37c,0x304,0x2fe)];if(_0x4dddab==='人物'){const _0x26cb61=parseCharacterData(_0x5eb53c);if(_0x26cb61){if(_0x48db84(0x269,0x24c,0x2dd,0x2c3)===_0x1054e5(0x205,0x1b7,0x21c,0x1d5)){const _0xef4684={};_0xef4684[_0x48db84(0x225,0x189,0x242,0x1a9)]='character',_0xef4684['data']=_0x26cb61,_0xef4684[_0x48db84(0x294,0x343,0x213,0x20f)]=_0x4f7abf,_0xef4684[_0x1054e5(0x251,0x23f,0x250,0x292)+_0x48db84(0x32a,0x262,0x3b6,0x3d2)]=[],_0x1c2645['push'](_0xef4684);}else _0x228062['push'](_0x54c812[_0x1054e5(0x1dd,0x1df,0x221,0x17b)]);}}else{if(_0x4dddab==='服装'){if(_0x392a4c['CiKko'](_0x392a4c[_0x1054e5(0x1d0,0x326,0x28b,0x1c6)],_0x392a4c[_0x48db84(0x2d8,0x28b,0x249,0x2c3)]))_0x5dcf90=_0x392a4c[_0x48db84(0x20b,0x148,0x279,0x23c)](_0x2d888a,_0x41713a,_0x499c04,_0x4c5199,_0x392a4c[_0x48db84(0x1f1,0x1dd,0x26c,0x1ba)]),_0x581c05[_0x48db84(0x254,0x297,0x263,0x310)](_0x392a4c[_0x1054e5(0x1db,0x219,0x243,0x2b6)],_0x3827a5[_0x1054e5(0x2a8,0x22a,0x296,0x27f)],_0x392a4c[_0x1054e5(0x298,0x246,0x27e,0x305)],_0x7f8551);else{const _0x43f8ad=_0x392a4c['Ktgxm'](parseOutfitData,_0x5eb53c);if(_0x43f8ad){if(_0x392a4c[_0x1054e5(0x299,0x228,0x1d1,0x228)](_0x392a4c[_0x1054e5(0x171,0x1ac,0x1c4,0x16d)],'BPWhN')){_0x32e3e2[_0x48db84(0x268,0x272,0x331,0x259)]('已取消更新');return;}else{const _0x264607={};_0x264607[_0x1054e5(0x1e7,0x201,0x1d8,0x14f)]=_0x392a4c[_0x1054e5(0x304,0x343,0x285,0x2b5)],_0x264607['data']=_0x43f8ad,_0x264607[_0x1054e5(0x21c,0x1e9,0x247,0x1f8)]=_0x4f7abf,_0x1c2645[_0x1054e5(0x388,0x3a9,0x2f4,0x3b6)](_0x264607);}}}}}}else _0x39ca8b[_0xc6d9a1]=_0x392a4c[_0x1054e5(0x28c,0x2c1,0x317,0x3b6)](_0xbf1454,_0x3b117a[_0x18116f],_0x3500e8,_0x26a7a4,_0x472003);}_0x1c2645[_0x1054e5(0x1ea,0x274,0x228,0x22b)]((_0xd85127,_0x5af920)=>_0xd85127[_0x48db84(0x294,0x1e0,0x336,0x2dc)]-_0x5af920['position']);let _0x3708ff=null;const _0x22df5f=[],_0x453ae9=[];for(const _0x6f7283 of _0x1c2645){if(_0x392a4c[_0x48db84(0x21e,0x26d,0x1d9,0x223)](_0x6f7283[_0x48db84(0x225,0x18b,0x1b2,0x298)],_0x1054e5(0x2b7,0x235,0x1f9,0x28a))){if(_0x392a4c['gFjxY'](_0x392a4c[_0x1054e5(0x26f,0x1cc,0x1a8,0x247)],'maulN'))_0x3708ff=_0x6f7283,_0x22df5f[_0x48db84(0x341,0x281,0x306,0x37b)](_0x6f7283);else return _0x4b5aec&&_0xf58728['includes'](_0x4a0074)&&(_0x5b86b1&&_0x46616a[_0x1054e5(0x247,0x266,0x30b,0x374)](_0x5e8e4c)),_0x4f2859[_0x48db84(0x33e,0x398,0x3fa,0x33a)](_0x50bfbc,_0x1d3f40);}else{if(_0x6f7283['type']===_0x392a4c['MMJXt']){if(_0x3708ff)_0x3708ff[_0x1054e5(0x292,0x1b3,0x250,0x222)+'fits'][_0x48db84(0x341,0x2c2,0x2aa,0x2d0)](_0x6f7283[_0x1054e5(0x258,0x293,0x221,0x203)]);else{if(_0x392a4c['AhVAW']===_0x392a4c['FOgzG']){if(_0x226b84&&_0xfd99a8[_0x48db84(0x237,0x1a6,0x1df,0x1af)])return _0x5aa482[_0x48db84(0x237,0x24e,0x211,0x1f8)]();return _0x2aa1cb[_0x1054e5(0x2a1,0x262,0x2b9,0x30f)]()[_0x48db84(0x344,0x3a3,0x348,0x2f2)](-0x1366+0xe19+-0xc7*-0x7)+_0x2df974[_0x48db84(0x1f7,0x155,0x274,0x202)]()[_0x1054e5(0x2f0,0x304,0x2f7,0x31e)](0x26e*-0xa+-0x1b8d*0x1+0x1*0x33fd)[_0x1054e5(0x37c,0x2ea,0x2bd,0x24f)](0x2*0x650+0x37*-0x39+0x5f*-0x1);}else _0x453ae9[_0x1054e5(0x34a,0x23c,0x2f4,0x2df)](_0x6f7283[_0x1054e5(0x2bd,0x16e,0x221,0x1e9)]);}}}}function _0x48db84(_0x2deecb,_0x4f4333,_0x1792bb,_0x22384f){return _0x405d6a(_0x2deecb-0xa5,_0x1792bb,_0x2deecb- -0x29c,_0x22384f-0x18b);}return{'characters':_0x22df5f[_0x1054e5(0x2a9,0x271,0x2b6,0x2ca)](_0x3bf7ec=>({..._0x3bf7ec[_0x48db84(0x26e,0x24e,0x28f,0x1ab)],'matchedOutfits':_0x3bf7ec[_0x48db84(0x29d,0x26a,0x313,0x2fe)+_0x48db84(0x32a,0x2db,0x309,0x3bd)]})),'outfits':_0x453ae9};}function getCurrentCharacterPreset(){const _0x4127c9={};function _0x42fc47(_0x3f6de6,_0x4c0469,_0x181dab,_0x4f1845){return _0x405d6a(_0x3f6de6-0x17,_0x4c0469,_0x181dab- -0x246,_0x4f1845-0x16b);}_0x4127c9[_0xb4308a(0x1b6,0x16a,0x275,0x202)]=function(_0x3aabe3,_0x5ac3d1){return _0x3aabe3===_0x5ac3d1;},_0x4127c9[_0x42fc47(0x254,0x1e7,0x269,0x300)]='LGtwP';const _0x960950=_0x4127c9,_0x3e8ef6=extension_settings[extensionName],_0x4d2113=_0x3e8ef6['characterP'+'resetId'];function _0xb4308a(_0x2ba47c,_0x1b9589,_0x1d2059,_0x31fe5e){return _0x405d6a(_0x2ba47c-0x1c2,_0x1d2059,_0x2ba47c- -0x3af,_0x31fe5e-0x1c0);}if(!_0x4d2113||!_0x3e8ef6[_0x42fc47(0x2cf,0x24d,0x280,0x1d1)+_0xb4308a(0x21e,0x27e,0x221,0x215)][_0x4d2113])return _0x960950['NLZYo'](_0xb4308a(0x207,0x158,0x1c9,0x19e),_0x960950[_0x42fc47(0x270,0x2ff,0x269,0x330)])?null:_0x42ee9d['map'](_0x5ac7f4=>_0x2438b7(_0x5ac7f4,_0x10d62e,_0x26b032,_0x3299f3));const _0x392467={};return _0x392467['id']=_0x4d2113,_0x392467[_0xb4308a(0x15b,0x1d8,0x220,0xde)]=_0x3e8ef6[_0xb4308a(0x117,0x85,0x17d,0x7a)+_0xb4308a(0x21e,0x1e2,0x28f,0x186)][_0x4d2113],_0x392467;}function buildCharacterText(_0x1c3857){const _0x39c5c9={};_0x39c5c9[_0x5c03c4(0x648,0x5db,0x58a,0x66d)]='<人物>\x0a',_0x39c5c9[_0x5c03c4(0x581,0x5e7,0x653,0x5f9)]=_0x814bce(0x281,0x1ec,0x265,0x22c);function _0x814bce(_0xaff4ae,_0x471644,_0x5c3346,_0x1684f7){return _0x405d6a(_0xaff4ae-0x12c,_0x5c3346,_0xaff4ae- -0x384,_0x1684f7-0x1a0);}const _0xa96509=_0x39c5c9,_0xc04aa4=_0x1c3857[_0x814bce(0x186,0x1ff,0x17f,0x101)];let _0x278641=_0xa96509[_0x814bce(0x1f8,0x2b1,0x212,0x20f)];_0x278641+=_0x814bce(0x230,0x299,0x263,0x281)+(_0xc04aa4[_0x5c03c4(0x635,0x61e,0x696,0x6c2)]||'')+'\x0a',_0x278641+='英文名称:\x20'+(_0xc04aa4[_0x5c03c4(0x592,0x634,0x658,0x5ab)]||'')+'\x0a',_0x278641+='角色特征:\x20'+(_0xc04aa4[_0x5c03c4(0x507,0x59a,0x54e,0x4da)+_0x5c03c4(0x588,0x4eb,0x56c,0x50b)]||'')+'\x0a',_0x278641+=_0x5c03c4(0x581,0x60e,0x66e,0x676)+(_0xc04aa4[_0x5c03c4(0x5a0,0x5b3,0x618,0x560)+_0x814bce(0x20e,0x2b1,0x1a1,0x1b5)]||'')+'\x0a',_0x278641+='五官外貌背面:\x20'+(_0xc04aa4[_0x814bce(0x1d0,0x28a,0x1e3,0x1aa)+_0x814bce(0x184,0x16b,0x116,0x127)]||'')+'\x0a',_0x278641+=_0x5c03c4(0x6fe,0x641,0x65f,0x5c1)+(_0xc04aa4[_0x814bce(0x22c,0x18c,0x18c,0x2a8)+'FW']||'')+'\x0a',_0x278641+=_0x814bce(0x1ba,0x106,0x1ed,0x240)+(_0xc04aa4[_0x814bce(0x22c,0x1ba,0x181,0x2bb)+_0x814bce(0x1b9,0x113,0x268,0x170)]||'')+'\x0a',_0x278641+=_0x814bce(0x273,0x24f,0x1bb,0x21f)+(_0xc04aa4[_0x5c03c4(0x5d5,0x635,0x607,0x607)+'W']||'')+'\x0a',_0x278641+=_0x814bce(0x134,0x182,0x90,0xc8)+(_0xc04aa4[_0x5c03c4(0x63c,0x635,0x69e,0x5e5)+'WBack']||'')+'\x0a',_0x278641+=_0x814bce(0x161,0x1d1,0x1f0,0x176)+(_0xc04aa4[_0x5c03c4(0x564,0x551,0x60f,0x5a9)+_0x814bce(0x138,0x1b3,0xb0,0x9e)]||'')+'\x0a',_0x278641+=_0x5c03c4(0x63c,0x5d0,0x56e,0x570)+'\x20'+(_0xc04aa4['upperBodyN'+_0x5c03c4(0x5dd,0x578,0x5c4,0x4d3)]||'')+'\x0a';function _0x5c03c4(_0x14808e,_0x55b263,_0x10897b,_0x3bfa1f){return _0x405d6a(_0x14808e-0x76,_0x10897b,_0x55b263-0x5f,_0x3bfa1f-0x6b);}return _0x278641+=_0x5c03c4(0x6f9,0x652,0x66d,0x58c)+(_0xc04aa4['fullBodyNS'+'FW']||'')+'\x0a',_0x278641+=_0x814bce(0x170,0xc7,0xf9,0x1b1)+'\x20'+(_0xc04aa4['fullBodyNS'+'FWBack']||'')+'\x0a',_0x278641+=_0xa96509['IJTTE'],_0x278641;}export async function handleCharacterPromptModify(_0x10ad10,_0x4b8739=[]){function _0x3deca5(_0xaa7e6a,_0x3bd023,_0x299b34,_0x3175f2){return _0x405d6a(_0xaa7e6a-0x1ed,_0x3bd023,_0xaa7e6a- -0x52e,_0x3175f2-0x18a);}const _0x43d397={'uKZKt':function(_0x192f3f,_0x1d38a7){return _0x192f3f(_0x1d38a7);},'LAmPC':_0x3deca5(0xde,0x134,0x3d,0x14d),'qfAOz':function(_0x5734e0,_0x6524f0){return _0x5734e0(_0x6524f0);},'muGYC':_0x527635(-0x60,-0x35,-0x49,-0xa)+_0x527635(-0xc9,-0xff,-0x115,-0x19e)+'fy]\x20Starti'+_0x527635(0x42,0x71,0x24,0xf3)+_0x3deca5(0x28,0x47,0x66,-0x31)+'modify\x20req'+'uest...','ynuMa':'[character'+'PromptModi'+'fy]\x20正在处理角色'+_0x3deca5(-0x34,0x4f,-0x34,-0x20),'xQClA':function(_0x1bcd61,_0x1cfb06){return _0x1bcd61!==_0x1cfb06;},'MljQA':_0x3deca5(0xb9,0xe,0x155,0x43),'IWPvo':'请先选择一个角色预设','ExOOU':_0x527635(-0x87,-0x35,0x73,-0xaf)+_0x527635(-0x1b1,-0xff,-0xee,-0x141)+_0x527635(0x27,-0x23,0x80,0x9b)+_0x3deca5(-0x66,-0x65,-0xe5,-0xa4),'EVKWP':'[character'+'PromptModi'+_0x527635(-0xec,-0x6b,0x17,-0x89)+_0x3deca5(0x5e,0xaf,0x43,0xa4),'lWEHE':function(_0x267a3f,_0x1315fa){return _0x267a3f===_0x1315fa;},'mtMaz':_0x527635(-0x135,-0x10a,-0x167,-0x65),'OUAgu':_0x527635(0x3e,-0x8b,-0x12d,-0x127),'eEXyt':_0x527635(-0x119,-0xb8,-0x163,-0x14f),'rrjxD':_0x3deca5(0x3b,0x94,-0x8a,0xd7)+'PromptModi'+'fy]\x20Charac'+_0x527635(-0x44,0x17,0x79,0xbc)+_0x3deca5(0x4a,0xa4,0x52,0xa3),'deplW':function(_0x2803aa){return _0x2803aa();},'IyvYv':_0x3deca5(0x3b,-0x30,-0x3f,0xc4)+_0x527635(-0x111,-0xff,-0x19a,-0x177)+_0x3deca5(-0xc,-0x6,0xb0,-0x6a)+_0x3deca5(-0x8c,-0x106,-0xeb,-0xd3)+_0x527635(-0x69,-0x6d,0x46,0x52)+_0x3deca5(0x4b,0x3b,0xb1,0xa3),'CbzaU':_0x527635(-0x5b,-0x35,0x51,-0xae)+_0x3deca5(-0x8f,-0xc9,-0x90,-0xcf)+_0x3deca5(0xb7,0xb,0x14,0x118)+'后:','KdqaY':function(_0x57ab89,_0xb7728c,_0x56341d){return _0x57ab89(_0xb7728c,_0x56341d);},'GarBr':_0x3deca5(-0x8b,-0x95,-0x5a,-0x10f),'HKIRG':function(_0x51888e,_0x9d7d64){return _0x51888e||_0x9d7d64;},'nWJWL':function(_0x30112c,_0x110bdd,_0x18b7a8,_0x3dccb5,_0x114f41){return _0x30112c(_0x110bdd,_0x18b7a8,_0x3dccb5,_0x114f41);},'Tuici':_0x3deca5(-0x65,0x63,0x56,0x5f),'MBAah':_0x527635(-0xfd,-0x35,-0xee,-0x49)+'PromptModi'+_0x527635(-0x7b,-0x11c,-0x12b,-0x149)+_0x3deca5(-0x39,-0x23,-0x1,0x87),'ARfZd':function(_0x2f4a7e,_0x40665c){return _0x2f4a7e>_0x40665c;},'ZNIzP':function(_0x418c72,_0x4836c7){return _0x418c72>_0x4836c7;},'vosWA':function(_0x1cf05b,_0x51d833){return _0x1cf05b>=_0x51d833;},'vwjie':_0x527635(-0xf3,-0x11e,-0x16d,-0x1e2),'yfQnU':_0x3deca5(0x3b,0xeb,0x9a,-0xd)+'PromptModi'+_0x3deca5(-0x1c,0x9d,0x35,-0x36)+'ed','SPEem':'images\x20to\x20'+_0x3deca5(0xb8,0x10e,0x16b,0x171)+_0x3deca5(0xad,0x5,0x71,-0x5),'Pfhtw':'[character'+'PromptModi'+'fy]\x20LLM\x20ou'+_0x3deca5(-0xb,-0x66,-0x38,-0xb9),'fMDLH':function(_0x276f03,_0x3c315a){return _0x276f03===_0x3c315a;},'swJOT':'aeiQK','NEjfz':'未在\x20LLM\x20输出中'+'检测到角色或服装标签','YEarY':'[character'+_0x527635(-0x196,-0xff,-0x51,-0xf5)+_0x3deca5(-0xa5,-0xa4,-0x12c,-0x10d)+_0x527635(-0x2,-0x2,-0xb3,-0x50)+_0x527635(0x6c,-0x20,0x6b,0x8a)+_0x3deca5(-0x8e,-0x127,-0x2a,-0xe8)+_0x527635(-0x78,-0x56,-0xc5,-0xf2),'sCtdb':'[character'+_0x3deca5(-0x8f,-0x8a,0x6,-0x4c)+_0x527635(0x33,-0x44,-0xe3,-0xbd)+'M\x20output\x20f'+_0x3deca5(0xaa,0x86,0x12e,0x102)+_0x527635(-0x72,-0x71,-0xe9,-0xbf),'YHZtV':function(_0x2cf42f,_0x1495df){return _0x2cf42f>_0x1495df;},'PhCkp':function(_0x16e299,_0x2b10d7,_0x21f9a2){return _0x16e299(_0x2b10d7,_0x21f9a2);},'qArpA':function(_0xc1fa10,_0x4a1684){return _0xc1fa10(_0x4a1684);},'PJYdX':_0x3deca5(-0x5e,0x5b,-0x115,0x57)+'完成！','anCtu':'hsunu','GrFGi':_0x527635(-0xe1,-0x35,0x16,0x36)+_0x527635(-0x1b3,-0xff,-0x7d,-0x167)+_0x527635(0x25,-0x5b,-0xaf,-0x4b)};function _0x527635(_0x19d4ed,_0x4e297f,_0x391386,_0x3f8bac){return _0x405d6a(_0x19d4ed-0x30,_0x19d4ed,_0x4e297f- -0x59e,_0x3f8bac-0x3f);}console[_0x527635(-0xd2,-0xae,-0x96,-0x9f)](_0x43d397[_0x3deca5(-0x5,-0x57,-0x92,0x31)]),toastr[_0x527635(-0xd5,-0x9a,-0x9,-0x107)](_0x43d397[_0x3deca5(-0x9f,-0x45,-0x10,-0xc7)]);try{if(_0x43d397['xQClA'](_0x43d397[_0x527635(0x25,0x20,-0x95,-0x82)],_0x43d397['MljQA'])){_0x1746d2[_0x3deca5(0x60,0xba,0x48,0x32)](_0x527635(0x3b,-0x59,-0xef,-0x3b));return;}else{const _0x290db5=getContext(),_0x3a0553=extension_settings[extensionName],_0x40787d=getCurrentCharacterPreset();if(!_0x40787d){toastr[_0x527635(0xae,-0x10,-0x14,0x9a)](_0x43d397['IWPvo']);return;}console[_0x3deca5(-0x3e,0x43,-0x15,-0x7)](_0x43d397[_0x3deca5(0x80,0xad,0xdf,0x56)],_0x40787d['id']);const _0x436982=_0x40787d['data'][_0x527635(-0x47,-0x8f,-0x7c,-0x18)+_0x527635(-0x77,-0x4b,0x61,-0x10f)]||'',_0x3a8642=_0x40787d['data']['generation'+'WorldBook']||'',_0x5cd600=_0x40787d[_0x3deca5(-0x24,0x27,0x2d,-0x80)]['generation'+'Variables']||{};console['log'](_0x3deca5(0x3b,0x70,0x55,0xc1)+'PromptModi'+'fy]\x20Saved\x20'+_0x3deca5(0x2e,-0x3f,-0x55,0x28),_0x436982),console[_0x3deca5(-0x3e,0x8a,-0x7f,0x29)](_0x3deca5(0x3b,0x3b,0xb0,0x8e)+_0x527635(-0x1c7,-0xff,-0xcd,-0x13b)+_0x527635(-0xba,-0x6b,0x25,0x27)+_0x3deca5(0xbb,0x3d,0xb6,0xf3)+':',_0x3a8642),console['log'](_0x43d397[_0x527635(-0x68,-0x6,0x38,-0xb0)],_0x5cd600);const _0xa63fed=_0x10ad10||'',_0x380ceb=[];if(_0x10ad10){if(_0x43d397[_0x3deca5(-0x17,0x97,0x77,0x3e)](_0x43d397['mtMaz'],_0x43d397['OUAgu'])){const _0x149889=_0x57a2bd['getElement'+'ById'](_0x3deca5(0xd8,0x85,0xcc,0x20)+_0x105fa8);_0x149889&&(_0x149889['value']=_0x4e48da[_0x309544],_0x43d397[_0x527635(0x4c,0x6c,0x68,-0x12)](_0x51aa9e,_0x149889)[_0x3deca5(-0x98,-0x33,-0x64,-0x4)](_0x43d397[_0x527635(-0xbe,-0x11d,-0x73,-0x147)]));}else _0x380ceb[_0x3deca5(0xaf,0x2b,0x2e,0x142)](_0x10ad10);}_0x436982&&_0x380ceb['push'](_0x436982);if(_0x3a8642){if(_0x43d397[_0x527635(-0xd8,-0x87,0x1,-0x75)](_0x43d397[_0x527635(0x12,0x5,-0x4b,0x27)],_0x43d397[_0x3deca5(0x75,0x4b,0x111,0x89)]))_0x380ceb[_0x527635(0x1,0x3f,-0x2e,0xf2)](_0x3a8642);else{if(_0x216915['id']!==_0x550ecb)return;_0x290319[_0x3deca5(-0x1a,-0xb9,0x7c,-0x7d)+'ener'](_0x5c6d2e[_0x527635(0xcf,0x15,-0x41,0x97)+_0x527635(-0x21,-0xbd,-0x80,-0x15a)+_0x3deca5(-0x60,-0xf7,-0x23,-0xa9)+_0x3deca5(-0x83,-0xb9,0x2b,0xe)],_0x329be8),_0x43d397[_0x3deca5(0x7a,-0x16,0x4d,0x51)](_0x10c366,_0x116e5f['prompt']);}}const _0x369e6d=_0x380ceb['join']('\x0a');console[_0x527635(-0x15e,-0xae,-0x8b,-0x152)](_0x43d397[_0x527635(-0x7d,-0x3a,0x4d,-0xa9)],_0x369e6d);let _0x1da215=buildPromptForRequestType(_0x527635(-0xf2,-0xf8,-0xef,-0x60)+'y',_0xa63fed);const _0x3b49e7=_0x43d397['qfAOz'](generateCharacterListText,_0x369e6d),_0x3412e8=_0x43d397['deplW'](generateOutfitEnableListText),_0x2d4278=_0x43d397[_0x3deca5(-0x8d,-0x127,-0x24,-0x11b)](generateCommonCharacterListText);console['log'](_0x43d397['IyvYv'],_0x3b49e7);const _0x109194=_0x290db5[_0x3deca5(0xb0,0x15d,0xd7,0x108)+'ta']?.[_0x527635(0x7b,-0x18,-0x3e,0x8a)]||{},_0x206653=buildCharacterText(_0x40787d);_0x1da215=_0x43d397[_0x3deca5(0x7a,0x120,0x7c,0x54)](mergeAdjacentMessages,_0x1da215),console[_0x3deca5(-0x3e,0x5e,-0xc9,-0x70)](_0x43d397[_0x3deca5(0xcc,0x3b,0x163,0x9a)],_0x1da215);const _0x1c29d4=_0x43d397['KdqaY'](findMessageIndexWithPlaceholder,_0x1da215,_0x43d397[_0x3deca5(0x8c,0x123,0xeb,0x3)]);console['log'](_0x3deca5(0x3b,0x46,-0x14,-0x1d)+_0x3deca5(-0x8f,-0x63,-0xe9,-0x14c)+'fy]\x20User\x20r'+_0x3deca5(0xdf,0xec,0x94,0x13f)+_0x527635(-0x1b,-0x36,-0xbd,-0xd4)+_0x527635(-0xa7,-0x89,-0x128,-0xf8),_0x1c29d4);const _0x4ef0bd={..._0x5cd600,..._0x109194},_0x16d9de={'context':_0x436982,'worldBookContent':_0x3a8642,'variables':_0x4ef0bd,'userDemand':_0x43d397[_0x3deca5(-0x51,-0xfa,0x0,0x6)](_0x10ad10,''),'characterListText':_0x3b49e7,'outfitEnableListText':_0x3412e8,'commonCharacterListText':_0x2d4278},{messages:_0x4a6ee7,replacedVariables:_0x1dd026}=replaceAllPlaceholders(_0x1da215,_0x16d9de);_0x1da215=_0x4a6ee7,_0x1da215=_0x43d397[_0x527635(0xd1,0x1f,-0x9,0xb5)](_0xc7b1c1,_0x1da215,_0x43d397['Tuici'],_0x206653,_0x1dd026),console[_0x3deca5(-0x3e,-0x82,-0xfd,-0x81)](_0x43d397[_0x3deca5(0x3c,0xad,0x39,0xf0)],_0x1da215);let _0x3b23d2='';_0x43d397[_0x3deca5(0x72,-0x1d,0xcb,0x70)](_0x1dd026[_0x3deca5(0x93,0x14b,0xba,0x10d)],0x1*-0x89e+0x5*0x52f+-0x114d)&&(_0x3b23d2=_0x3deca5(0x89,0x137,0x69,0x24)+_0x527635(-0x2d,-0xe9,-0xdd,-0x13b)+[..._0x1dd026][_0x527635(-0x122,-0xc5,-0x1d,-0xe4)]('、')+'\x0a');_0x4b8739&&_0x43d397['ZNIzP'](_0x4b8739['length'],0x1c00+0xaba+0x1*-0x26ba)&&_0x43d397[_0x3deca5(0x2b,0xda,0x13,-0x10)](_0x1c29d4,-0x3c4+0x22d+0x197*0x1)&&(_0x1da215=attachImagesToMessage(_0x1da215,_0x1c29d4,_0x4b8739,_0x43d397[_0x527635(-0xc0,-0xa8,-0x14e,-0xfd)]),console['log'](_0x43d397[_0x527635(0x47,-0x4e,-0xa7,-0x28)],_0x4b8739[_0x3deca5(0x51,-0x3c,0x96,0x2d)],_0x43d397['SPEem'],_0x1c29d4));updateCombinedPrompt(_0x1da215,_0x3b23d2);const _0xdb9542={};_0xdb9542[_0x3deca5(-0x53,-0x22,-0xa7,-0x27)]=0x493e0;const _0x1280a9=await LLM_CHAR_MODIFY(_0x1da215,_0xdb9542);console[_0x527635(-0x13a,-0xae,-0x9d,-0x1e)](_0x43d397[_0x527635(-0x54,-0x93,0x26,-0xd1)],_0x1280a9);if(!_0x1280a9){toastr['error']('LLM\x20返回结果为空');return;}const _0x5d221a=_0x43d397[_0x3deca5(0x7a,-0x18,0xdd,0xef)](extractCharacterAndOutfitTags,_0x1280a9);if(_0x43d397['fMDLH'](_0x5d221a[_0x3deca5(0x6,-0x7c,0xa,-0xd)][_0x527635(0xa4,-0x1f,-0x8e,0x7d)],-0x1218+-0x38*0x61+0x2750)&&_0x5d221a[_0x527635(0xc3,0x46,0x37,-0x45)][_0x3deca5(0x51,-0x67,0x9a,-0x3f)]===-0x737*-0x5+-0xae*-0x12+-0x304f){if(_0x43d397[_0x527635(-0xb3,0x7,0x45,-0x7)](_0x43d397['swJOT'],_0x3deca5(0xab,0x12b,0x102,0x1c)))_0x5147ef[_0x58b1da]=_0x1ca52b[_0x3068e3];else{toastr[_0x527635(-0x2a,-0xa7,0x1e,-0xf0)](_0x43d397[_0x3deca5(-0xa,-0xb9,0x34,-0x78)]),console[_0x527635(-0x130,-0xae,-0x96,-0x137)](_0x43d397[_0x3deca5(0x12,0x8,0x33,-0x93)]),console['log'](_0x43d397[_0x527635(0x6c,-0x1d,-0xa2,-0x2a)],_0x1280a9);return;}}console[_0x3deca5(-0x3e,0x79,-0x22,-0x40)](_0x3deca5(0x3b,0x7d,0x6d,0xb5)+_0x3deca5(-0x8f,-0xa9,-0x14e,-0xfd)+'fy]\x20Extrac'+_0x3deca5(0x62,0x6c,0x8e,-0x23),_0x5d221a);if(_0x43d397[_0x3deca5(0x69,-0x38,-0x4b,0x132)](_0x5d221a[_0x3deca5(0x6,0x16,0x9d,-0x40)][_0x527635(0x57,-0x1f,-0x30,0x95)],-0xfd5+-0xcb*0xd+0x1a24)){const _0x2e9052=_0x5d221a[_0x527635(-0x2e,-0x6a,-0x129,-0x4f)][-0x18fa+-0x1b3*0x16+-0x4cc*-0xd];await _0x43d397[_0x3deca5(0x41,-0x8,0xf2,0xf6)](updateCharacterPresetFromLLM,_0x40787d['id'],_0x2e9052);}const _0x4effed=[..._0x5d221a[_0x527635(0xd7,0x46,-0x4b,0xd2)]];for(const _0x1b1fea of _0x5d221a['characters']){_0x1b1fea[_0x3deca5(0xb,-0x2f,-0x15,-0x7c)+'fits']&&_0x43d397[_0x3deca5(0x69,0xde,0x81,0x51)](_0x1b1fea[_0x3deca5(0xb,0x2,0x2f,-0x64)+_0x527635(-0x93,0x28,0x58,0x5)][_0x3deca5(0x51,-0x4b,0xbb,0xd4)],0x2f9*-0x1+0x1*-0x626+0x91f)&&_0x4effed[_0x3deca5(0xaf,0x123,0x7a,0x32)](..._0x1b1fea[_0x3deca5(0xb,0xd3,0x51,-0xa7)+_0x527635(0xee,0x28,0x91,0xcf)]);}_0x4effed[_0x527635(-0x9f,-0x1f,-0x65,-0xa4)]>-0x382*0x1+-0x23bc+0x273e&&await _0x43d397['qArpA'](updateOutfitPresetsFromLLM,_0x4effed),toastr[_0x3deca5(-0x99,-0x151,-0x144,0x29)](_0x43d397[_0x3deca5(0x55,0xa7,0xbc,-0x66)]);}}catch(_0x4becc8){_0x43d397['fMDLH'](_0x43d397[_0x527635(-0x53,-0x27,-0x9d,-0xbc)],_0x43d397[_0x3deca5(0x49,-0x3f,-0x6b,0x14)])?(console[_0x3deca5(0x60,-0xf,0xaa,-0x69)](_0x43d397[_0x3deca5(-0x13,0x27,0x31,-0x47)],_0x4becc8),toastr[_0x3deca5(0x60,-0x51,0x5d,0x83)]('角色提示词修改失败:'+'\x20'+_0x4becc8[_0x3deca5(0x56,-0x2d,0xd2,-0x20)])):_0x3d5347['outfitPres'+_0x3deca5(0x31,0xd3,0xa4,-0x57)]={};}}async function updateCharacterPresetFromLLM(_0x3d2f59,_0x38a56b){const _0x585e92={'vMPgw':_0x9548dc(-0xbe,0x30,-0x21,-0x97),'cNOPF':_0x9548dc(0x8e,0x130,0x20,0x6c),'DzOuK':_0x9548dc(0x8c,0xbb,0x105,0x6f),'EjHIo':'五官外貌','rvVHq':_0x31f606(0x5ab,0x5d8,0x5da,0x613),'rEKvS':_0x9548dc(-0xc4,-0xd3,0x90,-0x33),'TCzoa':_0x31f606(0x6c3,0x6d2,0x72c,0x620),'gLFxU':_0x31f606(0x598,0x643,0x5ad,0x583),'AMEWY':_0x31f606(0x525,0x5d5,0x571,0x5ff),'pqloG':_0x31f606(0x6f9,0x6c9,0x6b5,0x6ce),'jHOZR':'下半身NSFW背面','kMXlf':function(_0x388809,_0x375772){return _0x388809!==_0x375772;},'dicyV':function(_0x1ddd01,_0x818cd0){return _0x1ddd01===_0x818cd0;},'VkwWk':_0x31f606(0x54d,0x588,0x535,0x4dd)+'内容','jQLEY':function(_0x45ae2c,_0x4e79e2){return _0x45ae2c(_0x4e79e2);},'WAPsK':_0x31f606(0x601,0x5ef,0x566,0x5a5),'Zzasn':_0x9548dc(0x5,0x6f,0x9f,0x78),'TwswR':function(_0x11f98e,_0x459737){return _0x11f98e!==_0x459737;},'zkcnS':'xZcZE','qTOqq':_0x9548dc(-0xb9,-0x2,-0xfa,-0x90)},_0x92fb3d=extension_settings[extensionName],_0x4de9fc=_0x92fb3d[_0x9548dc(-0x172,-0x66,-0x166,-0xcd)+_0x31f606(0x6f3,0x6a4,0x5de,0x5f7)][_0x3d2f59];if(!_0x4de9fc){toastr[_0x9548dc(0x3f,-0x17,0x88,-0x5)]('找不到指定的角色预设');return;}const _0x2156fe={};_0x2156fe[_0x9548dc(0x0,0xe9,0xa1,0x2c)]=_0x585e92[_0x31f606(0x570,0x55b,0x548,0x602)],_0x2156fe[_0x9548dc(0xed,0x42,0x77,0x42)]=_0x585e92[_0x31f606(0x6ef,0x680,0x688,0x5d9)],_0x2156fe[_0x9548dc(-0x97,-0xb0,-0x9d,-0x58)+_0x9548dc(-0x127,-0xbd,-0xf9,-0x107)]=_0x585e92[_0x31f606(0x648,0x581,0x5d4,0x5e1)],_0x2156fe[_0x31f606(0x621,0x62b,0x6d2,0x60e)+_0x9548dc(0x25,-0xf,0x8d,-0x1)]=_0x585e92[_0x31f606(0x665,0x5c6,0x5c9,0x649)],_0x2156fe['facialFeat'+'uresBack']=_0x585e92['rvVHq'];function _0x9548dc(_0x13f152,_0x4587b8,_0x2489fc,_0x348664){return _0x405d6a(_0x13f152-0x126,_0x13f152,_0x348664- -0x593,_0x348664-0x172);}_0x2156fe['upperBodyS'+'FW']='上半身SFW',_0x2156fe[_0x9548dc(-0x24,0xe5,-0x2f,0x1d)+_0x9548dc(-0x7,-0xe5,-0x14,-0x56)]=_0x585e92[_0x31f606(0x58e,0x57b,0x4df,0x532)],_0x2156fe[_0x9548dc(0x50,0xa6,0xa5,0x43)+'W']=_0x585e92[_0x31f606(0x577,0x592,0x4c9,0x50b)];function _0x31f606(_0x1f9f3f,_0x5e75fb,_0x319c2a,_0x230265){return _0x405d6a(_0x1f9f3f-0x1ed,_0x1f9f3f,_0x5e75fb-0xd7,_0x230265-0x19a);}_0x2156fe[_0x31f606(0x71b,0x6ad,0x758,0x6de)+_0x9548dc(-0x74,-0x53,-0x8d,-0xeb)]=_0x585e92[_0x9548dc(-0x16a,-0x15d,-0x10c,-0xd3)],_0x2156fe[_0x31f606(0x541,0x5c9,0x678,0x611)+_0x9548dc(-0xbf,-0x11b,-0x3b,-0xd7)]=_0x585e92[_0x31f606(0x738,0x683,0x66c,0x6c8)],_0x2156fe[_0x9548dc(-0x168,-0x76,-0xb2,-0xa1)+_0x31f606(0x6a6,0x5f0,0x642,0x629)]='上半身NSFW背面',_0x2156fe[_0x31f606(0x61c,0x5e4,0x61d,0x557)+'FW']=_0x585e92[_0x9548dc(0xc8,0x89,0xcf,0x5d)],_0x2156fe[_0x9548dc(-0xb3,-0xeb,-0x72,-0x86)+'FWBack']=_0x585e92[_0x31f606(0x69b,0x64c,0x5bd,0x6b0)];const _0x481bd7=_0x2156fe;let _0x26196f=0xff4+0x2*-0x10a6+0x1158;for(const _0x206f5b in _0x481bd7){_0x38a56b[_0x206f5b]&&_0x585e92[_0x9548dc(-0x1a8,-0xf6,-0x1a8,-0x101)](_0x38a56b[_0x206f5b],_0x4de9fc[_0x206f5b])&&_0x26196f++;}if(_0x585e92[_0x31f606(0x5e8,0x66b,0x6f3,0x61d)](_0x26196f,-0xe0f+-0x109*-0x1+-0x1*-0xd06)){toastr['info'](_0x585e92[_0x31f606(0x650,0x697,0x635,0x6e5)]);return;}const _0x1f2566=_0x9548dc(-0xa,-0xe5,-0x169,-0xbf)+_0x3d2f59+_0x9548dc(-0xd4,-0x10f,0x5b,-0x52)+_0x26196f+'\x20项更改,是否应用?',_0x453793=await _0x585e92[_0x9548dc(0x5f,0xce,-0x18,0x62)](stylishConfirm,_0x1f2566);if(!_0x453793){toastr['info'](_0x585e92[_0x31f606(0x672,0x6a1,0x6be,0x5e9)]);return;}for(const _0x42fad8 in _0x481bd7){if(_0x585e92[_0x31f606(0x67b,0x661,0x60f,0x646)]!==_0x585e92['Zzasn']){const _0x231314=_0x236fd1[_0x31f606(0x5a3,0x5d6,0x61a,0x69d)](_0x17c253,arguments);return _0x3079ad=null,_0x231314;}else{if(_0x38a56b[_0x42fad8]){if(_0x585e92[_0x9548dc(-0x175,-0x1d7,-0x84,-0x114)](_0x585e92['zkcnS'],_0x585e92[_0x31f606(0x66c,0x654,0x68b,0x5d0)]))_0x4de9fc[_0x42fad8]=_0x38a56b[_0x42fad8];else return _0x16c0f6[_0x31f606(0x54d,0x5aa,0x667,0x650)]();}}}saveSettingsDebounced();const _0x53d5aa=_0x585e92[_0x9548dc(-0x11,0x121,0x5f,0x62)]($,'#st-chatu8'+'-tab-chara'+'cter');_0x53d5aa['length']&&_0x585e92[_0x31f606(0x707,0x6cc,0x68e,0x62a)](refreshCharacterSettings,_0x53d5aa),_0x585e92[_0x9548dc(0xb4,0x5a,0xd1,0x62)](updateFormFields,_0x38a56b),console[_0x9548dc(-0x16,-0x10c,-0x56,-0xa3)]('[character'+_0x9548dc(-0xba,-0x1ad,-0xe7,-0xf4)+'fy]\x20已更新角色预'+_0x31f606(0x639,0x58d,0x5e6,0x4cd)+_0x3d2f59+'\x22');}async function updateOutfitPresetsFromLLM(_0x4f3ecb){const _0x9917e={'QNKJN':_0x2340b3(0x53c,0x568,0x4c9,0x53b),'fOJGH':_0x3b7dfd(0xcb,0x164,0x17c,0x212)+_0x3b7dfd(0x73,0x4f,0xb2,0x97)+_0x2340b3(0x50c,0x575,0x50c,0x545),'QhibI':function(_0x1b1fdd,_0xafc6c3){return _0x1b1fdd(_0xafc6c3);},'zGaAh':_0x2340b3(0x4ac,0x52e,0x474,0x5a1),'dzezu':_0x3b7dfd(0x21f,0x2c3,0x212,0x1ff),'YOdnS':_0x3b7dfd(0x142,0x67,0x10e,0x137),'uvdHv':_0x2340b3(0x5ba,0x5bb,0x558,0x673),'RvOYO':'下半身','WlIHG':function(_0x2aadc4,_0x593d4b){return _0x2aadc4===_0x593d4b;},'wdsxg':'GMJLW','xcjDx':function(_0x4ae453,_0x8d0b5f){return _0x4ae453!==_0x8d0b5f;},'xsDUN':function(_0x436880,_0x39d625){return _0x436880!==_0x39d625;},'PrWOz':_0x2340b3(0x4aa,0x55d,0x58e,0x562),'ISHpl':function(_0x5b9386,_0x564c7f){return _0x5b9386===_0x564c7f;},'anRNf':function(_0x2182c2,_0x5bec98){return _0x2182c2(_0x5bec98);},'zBazA':_0x3b7dfd(0x236,0x1f5,0x1db,0x20a),'vlUBn':_0x3b7dfd(0x21f,0x12f,0x1ba,0x27a),'twePX':function(_0x142c08){return _0x142c08();},'lxdsi':function(_0x21d544,_0x4c500a){return _0x21d544!==_0x4c500a;},'EevdT':_0x3b7dfd(0x258,0x19b,0x1a2,0x238)};function _0x2340b3(_0x54ea27,_0x106728,_0x2d49c6,_0xa25721){return _0x405d6a(_0x54ea27-0x9b,_0x2d49c6,_0x106728-0x32,_0xa25721-0x154);}const _0x4079f0=extension_settings[extensionName],_0x4e47b1={};_0x4e47b1[_0x2340b3(0x6aa,0x5f1,0x5bc,0x5a8)]=_0x9917e[_0x3b7dfd(0x22a,0x124,0x1b0,0x1e9)],_0x4e47b1[_0x2340b3(0x5c4,0x607,0x65a,0x540)]=_0x9917e[_0x2340b3(0x62b,0x600,0x64d,0x589)];function _0x3b7dfd(_0x49a082,_0x18d3de,_0x876204,_0x4e307a){return _0x405d6a(_0x49a082-0x4e,_0x4e307a,_0x876204- -0x3ed,_0x4e307a-0x114);}_0x4e47b1[_0x3b7dfd(0x96,0xc0,0xcc,0xae)]=_0x9917e['YOdnS'],_0x4e47b1[_0x2340b3(0x5ae,0x60e,0x558,0x66b)]=_0x3b7dfd(0xf2,0x96,0x13a,0x113),_0x4e47b1[_0x3b7dfd(0x17b,0x185,0xe2,0xea)+_0x2340b3(0x60f,0x5a4,0x627,0x643)]=_0x9917e[_0x2340b3(0x4e9,0x561,0x49d,0x51a)],_0x4e47b1[_0x3b7dfd(0x27d,0x1d2,0x214,0x200)]=_0x9917e[_0x2340b3(0x45b,0x4fc,0x5c5,0x43e)],_0x4e47b1[_0x3b7dfd(0x1ee,0x13a,0x1dc,0x281)+'ck']=_0x2340b3(0x67f,0x5cb,0x518,0x5f8);const _0x24b829=_0x4e47b1;for(const _0x5128b1 of _0x4f3ecb){const _0x325734=_0x5128b1[_0x2340b3(0x5cc,0x5f1,0x6b7,0x5d0)];if(!_0x325734)continue;const _0x27c5cd=_0x4079f0[_0x2340b3(0x573,0x605,0x54a,0x5bd)+_0x2340b3(0x598,0x591,0x64e,0x54f)]?.[_0x325734];if(_0x27c5cd){if(_0x9917e[_0x2340b3(0x6d2,0x61c,0x559,0x645)](_0x3b7dfd(0xda,0x1af,0x130,0x1c9),_0x9917e['wdsxg']))return null;else{let _0x2b00e3=0x2539+0x17ef+-0x3d28;for(const _0x465af7 in _0x24b829){if(_0x5128b1[_0x465af7]&&_0x9917e[_0x2340b3(0x577,0x4d0,0x577,0x47d)](_0x5128b1[_0x465af7],_0x27c5cd[_0x465af7])){if(_0x9917e['xsDUN'](_0x9917e['PrWOz'],_0x2340b3(0x4d8,0x55d,0x5c0,0x4c5))){const _0xbd002=_0x33f664[_0x3b7dfd(0xa4,0x9b,0x11d,0x199)];let _0x12c150=_0x9917e[_0x3b7dfd(0xb0,0xc5,0xad,0xa2)];return _0x12c150+='中文名称:\x20'+(_0xbd002['nameCN']||'')+'\x0a',_0x12c150+=_0x2340b3(0x5cc,0x574,0x5ca,0x5de)+(_0xbd002[_0x3b7dfd(0x269,0x20b,0x1e8,0x1e3)]||'')+'\x0a',_0x12c150+='角色特征:\x20'+(_0xbd002['characterT'+'raits']||'')+'\x0a',_0x12c150+='五官外貌:\x20'+(_0xbd002[_0x3b7dfd(0x230,0xe2,0x167,0x213)+'ures']||'')+'\x0a',_0x12c150+=_0x2340b3(0x6dd,0x61a,0x60c,0x5fd)+(_0xbd002[_0x2340b3(0x60e,0x586,0x4c8,0x5d2)+'uresBack']||'')+'\x0a',_0x12c150+='上半身SFW:\x20'+(_0xbd002[_0x3b7dfd(0x22a,0x25d,0x1c3,0x17a)+'FW']||'')+'\x0a',_0x12c150+=_0x2340b3(0x564,0x570,0x55b,0x50a)+(_0xbd002[_0x2340b3(0x5d8,0x5e2,0x595,0x5c5)+'FWBack']||'')+'\x0a',_0x12c150+='下半身SFW:\x20'+(_0xbd002[_0x2340b3(0x54b,0x608,0x648,0x612)+'W']||'')+'\x0a',_0x12c150+=_0x2340b3(0x516,0x4ea,0x5ae,0x51c)+(_0xbd002[_0x3b7dfd(0x1d8,0x1ba,0x1e9,0x25b)+_0x2340b3(0x495,0x4da,0x57f,0x523)]||'')+'\x0a',_0x12c150+=_0x3b7dfd(0x119,0x1a3,0xf8,0x56)+(_0xbd002[_0x2340b3(0x51b,0x524,0x53f,0x530)+'SFW']||'')+'\x0a',_0x12c150+=_0x2340b3(0x559,0x5a3,0x55d,0x5c2)+'\x20'+(_0xbd002['upperBodyN'+_0x2340b3(0x600,0x54b,0x4ae,0x58a)]||'')+'\x0a',_0x12c150+=_0x2340b3(0x5d7,0x625,0x6d3,0x688)+(_0xbd002[_0x2340b3(0x5c7,0x53f,0x4a7,0x58b)+'FW']||'')+'\x0a',_0x12c150+=_0x2340b3(0x4a6,0x526,0x4e5,0x5e7)+'\x20'+(_0xbd002[_0x3b7dfd(0x117,0x161,0x120,0x100)+'FWBack']||'')+'\x0a',_0x12c150+=_0x2340b3(0x6e8,0x637,0x589,0x5c7),_0x12c150;}else _0x2b00e3++;}}if(_0x9917e['ISHpl'](_0x2b00e3,0x2659+0x173d+-0x3d96)){if(_0x9917e['xsDUN'](_0x2340b3(0x555,0x557,0x57b,0x517),_0x3b7dfd(0x1f2,0x18d,0x16a,0x222))){console[_0x2340b3(0x4f7,0x522,0x57c,0x4ef)]('[character'+_0x2340b3(0x4fe,0x4d1,0x502,0x49c)+_0x2340b3(0x53b,0x5b4,0x596,0x612)+_0x325734+_0x2340b3(0x5cc,0x61e,0x582,0x5a3));continue;}else _0x4c0f3c['error'](_0x9917e[_0x2340b3(0x5e0,0x553,0x48d,0x5d5)],_0x2213ac),_0x1d86be['error']('角色提示词修改失败:'+'\x20'+_0x83ca3c[_0x3b7dfd(0x1ed,0x1c0,0x197,0x186)]);}const _0x2bc52f=_0x2340b3(0x45f,0x4ef,0x4b5,0x431)+_0x325734+_0x2340b3(0x55a,0x573,0x5fa,0x545)+_0x2b00e3+'\x20项更改,是否应用?',_0xcb1692=await _0x9917e[_0x2340b3(0x61a,0x5ea,0x62e,0x5da)](stylishConfirm,_0x2bc52f);if(!_0xcb1692)continue;for(const _0x2275fe in _0x24b829){_0x5128b1[_0x2275fe]&&(_0x27c5cd[_0x2275fe]=_0x5128b1[_0x2275fe]);}console['log']('[character'+'PromptModi'+_0x3b7dfd(0xdb,0x132,0x160,0x1a6)+'设\x20\x22'+_0x325734+'\x22');}}else{const _0x276bbe='检测到新服装\x20\x22'+_0x325734+_0x2340b3(0x585,0x5dd,0x668,0x689),_0x69bc4c=await stylishConfirm(_0x276bbe);if(!_0x69bc4c){if(_0x9917e[_0x2340b3(0x420,0x4d0,0x4d7,0x52f)](_0x9917e[_0x2340b3(0x647,0x58a,0x5c6,0x582)],_0x9917e[_0x3b7dfd(0x20f,0x159,0x16b,0xcc)]))_0x9917e[_0x2340b3(0x4f7,0x55a,0x57e,0x5a8)](_0x539d9f,_0x470626);else continue;}!_0x4079f0[_0x3b7dfd(0x23e,0x27d,0x1e6,0x25d)+'ets']&&(_0x9917e[_0x3b7dfd(0x73,0x73,0x115,0x154)](_0x2340b3(0x5b3,0x5d9,0x622,0x5b2),_0x9917e['vlUBn'])?_0x4079f0[_0x3b7dfd(0x184,0x219,0x1e6,0x227)+_0x3b7dfd(0x19d,0x163,0x172,0x192)]={}:(_0x2a04b6=_0x590b41,_0x57cecc['push'](_0x7fae74)));const _0x101f98={};_0x101f98['nameCN']=_0x5128b1[_0x3b7dfd(0x211,0x275,0x1d2,0x1cd)],_0x101f98[_0x3b7dfd(0x133,0x2a1,0x1e8,0x24c)]=_0x5128b1[_0x3b7dfd(0x206,0x213,0x1e8,0x1fc)]||'',_0x101f98['owner']=_0x5128b1[_0x2340b3(0x58c,0x4eb,0x51c,0x54a)]||'',_0x101f98[_0x3b7dfd(0x192,0x1f7,0x1ef,0x1d1)]=_0x5128b1[_0x2340b3(0x6b8,0x60e,0x6b0,0x5ee)]||'',_0x101f98[_0x3b7dfd(0xf6,0x2d,0xe2,0xfd)+'ack']=_0x5128b1[_0x3b7dfd(0x15f,0x193,0xe2,0x12b)+'ack']||'',_0x101f98['fullBody']=_0x5128b1['fullBody']||'',_0x101f98[_0x2340b3(0x6ae,0x5fb,0x5d7,0x6a3)+'ck']=_0x5128b1['fullBodyBa'+'ck']||'',_0x4079f0[_0x2340b3(0x58f,0x605,0x6b8,0x682)+_0x2340b3(0x638,0x591,0x60f,0x516)][_0x325734]=_0x101f98,console[_0x3b7dfd(0x155,0xea,0x103,0x180)](_0x2340b3(0x5dc,0x59b,0x5cb,0x500)+'PromptModi'+'fy]\x20已创建服装预'+'设\x20\x22'+_0x325734+'\x22');if(_0x5128b1[_0x2340b3(0x4bd,0x4eb,0x51d,0x590)]&&_0x5128b1[_0x3b7dfd(0x68,0xfe,0xcc,0x12c)][_0x2340b3(0x5b1,0x62e,0x5e2,0x57b)]()){const _0x55b399=_0x5128b1['owner'][_0x2340b3(0x593,0x62e,0x6f4,0x614)]()['toLowerCas'+'e']()[_0x3b7dfd(0x109,0x140,0x1bd,0x24f)](/\s+/g,'');for(const [_0x4d7f96,_0x11bb3c]of Object[_0x2340b3(0x5c8,0x512,0x4bc,0x4b9)](_0x4079f0[_0x2340b3(0x565,0x4f8,0x573,0x48c)+_0x3b7dfd(0x18f,0x1ad,0x1e0,0x130)]||{})){if(_0x11bb3c[_0x2340b3(0x63a,0x607,0x554,0x5d5)]&&_0x9917e[_0x3b7dfd(0x264,0x206,0x1fd,0x20b)](_0x11bb3c[_0x2340b3(0x6bc,0x607,0x58b,0x691)]['toLowerCas'+'e']()[_0x2340b3(0x5da,0x5dc,0x5fd,0x52e)](/\s+/g,''),_0x55b399)){!_0x11bb3c['outfits']&&(_0x11bb3c[_0x2340b3(0x631,0x616,0x580,0x5c5)]=[]);!_0x11bb3c[_0x2340b3(0x667,0x616,0x573,0x6c9)]['includes'](_0x325734)&&(_0x11bb3c['outfits']['push'](_0x325734),console[_0x3b7dfd(0x19c,0x189,0x103,0x1bf)]('[character'+'PromptModi'+'fy]\x20服装\x20\x22'+_0x325734+_0x3b7dfd(0x113,0x1bf,0x132,0x15d)+_0x4d7f96+'\x22'));break;}}}}}_0x9917e[_0x2340b3(0x47f,0x540,0x4ae,0x509)](saveSettingsDebounced);const _0x1ad894=$('#st-chatu8'+_0x3b7dfd(0x1b6,0x20f,0x1e7,0x197)+'cter');_0x1ad894['length']&&(_0x9917e['lxdsi'](_0x3b7dfd(0x230,0x227,0x1a2,0x244),_0x9917e[_0x3b7dfd(0x64,0x3b,0xab,0xd3)])?_0x9917e[_0x2340b3(0x5a3,0x55a,0x4e5,0x5e4)](_0x250e4f,_0x48d948):refreshCharacterSettings(_0x1ad894));}function updateFormFields(_0x5b4189){function _0x3b5c0e(_0x6fea95,_0xa6750d,_0x2d5f7e,_0x430b4f){return _0x405d6a(_0x6fea95-0x155,_0x6fea95,_0x2d5f7e- -0x1d3,_0x430b4f-0x1ab);}const _0x3cf2fd={'BjkwT':function(_0x2ce2e7,_0x206498){return _0x2ce2e7(_0x206498);},'ACZyg':_0x47e2ca(0x6a9,0x695,0x667,0x647),'Qdqfc':_0x3b5c0e(0x388,0x34d,0x3ec,0x444),'orRlq':_0x3b5c0e(0x390,0x3bb,0x402,0x39a),'FKbTS':_0x3b5c0e(0x394,0x2a2,0x368,0x387)+'raits','qWchz':_0x47e2ca(0x68b,0x5dd,0x572,0x59c)+'uresBack','IwiGM':_0x47e2ca(0x5bc,0x639,0x66f,0x6fd)+'FW','ugjOr':_0x47e2ca(0x6f2,0x65f,0x67a,0x5e8)+_0x47e2ca(0x5ec,0x531,0x540,0x49a),'ABkEV':'upperBodyN'+_0x47e2ca(0x5dd,0x545,0x4f9,0x5b5),'jjQIX':'upperBodyN'+_0x3b5c0e(0x2b9,0x2c7,0x346,0x307),'porIJ':_0x3b5c0e(0x2aa,0x2e2,0x33a,0x378)+'FW'};function _0x47e2ca(_0x18b996,_0xc535a8,_0x265197,_0x162f87){return _0x405d6a(_0x18b996-0x7b,_0x162f87,_0xc535a8-0x89,_0x162f87-0x9e);}const _0x2a2252=[_0x3cf2fd[_0x3b5c0e(0x4a7,0x4b5,0x40e,0x472)],_0x3cf2fd['orRlq'],_0x3cf2fd[_0x3b5c0e(0x2d7,0x377,0x2eb,0x288)],'facialFeat'+_0x47e2ca(0x62b,0x61b,0x68b,0x65b),_0x3cf2fd[_0x47e2ca(0x57d,0x5e4,0x6aa,0x604)],_0x3cf2fd[_0x3b5c0e(0x335,0x203,0x2bb,0x2d0)],'upperBodyS'+_0x47e2ca(0x52c,0x5c6,0x574,0x664),_0x3b5c0e(0x404,0x36b,0x403,0x384)+'W',_0x3cf2fd['ugjOr'],_0x3cf2fd['ABkEV'],_0x3cf2fd[_0x47e2ca(0x601,0x550,0x4a3,0x5f4)],_0x3cf2fd[_0x47e2ca(0x492,0x54b,0x504,0x4d5)],'fullBodyNS'+_0x47e2ca(0x650,0x5c6,0x576,0x5a3)];_0x2a2252[_0x47e2ca(0x50f,0x556,0x5d4,0x5aa)](_0x75c1bc=>{function _0x8d8a59(_0x45a059,_0x7417b,_0x3668e5,_0x5b2814){return _0x47e2ca(_0x45a059-0x59,_0x5b2814- -0x39,_0x3668e5-0x27,_0x45a059);}function _0x1bdeaa(_0x22359f,_0x5ccb0e,_0x2fec9d,_0xc94339){return _0x47e2ca(_0x22359f-0x15e,_0x2fec9d- -0x673,_0x2fec9d-0x189,_0x5ccb0e);}if(_0x5b4189[_0x75c1bc]){const _0x1d4b15=document[_0x8d8a59(0x4e2,0x5b3,0x54a,0x57a)+_0x1bdeaa(0x8,-0x156,-0xb5,-0xc1)](_0x1bdeaa(0x22,0x7d,0x1c,0x6)+_0x75c1bc);_0x1d4b15&&(_0x1d4b15['value']=_0x5b4189[_0x75c1bc],_0x3cf2fd[_0x8d8a59(0x5a3,0x538,0x4af,0x514)]($,_0x1d4b15)[_0x1bdeaa(-0xe9,-0xda,-0x154,-0x11f)](_0x3cf2fd['ACZyg']));}});}