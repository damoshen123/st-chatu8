(function(_0xd51245,_0x24e942){function _0x5cfba1(_0x349c5c,_0x573f1f,_0x33031c,_0x5effea){return _0x3b86(_0x349c5c- -0xa,_0x5effea);}function _0x150eae(_0x46a3fa,_0x506af3,_0x1b846a,_0x467f0a){return _0x3b86(_0x506af3- -0x63,_0x467f0a);}const _0x129930=_0xd51245();while(!![]){try{const _0x17af0c=parseInt(_0x5cfba1(0x270,0x2b7,0x19f,0x1af))/(0x12c5*-0x2+-0x24d0+0x9*0x843)+parseInt(_0x5cfba1(0x1cb,0x1c5,0x172,0x113))/(0x7d9+0x56a+-0xd41)+-parseInt(_0x150eae(0x352,0x2c7,0x29d,0x280))/(-0x2e9+0x2*0xda2+-0x1858)+parseInt(_0x150eae(0x2d0,0x2c1,0x1fb,0x31b))/(-0xdeb+-0x13*-0x9d+0x248)*(-parseInt(_0x150eae(0x23f,0x1e0,0x1f2,0x2b2))/(0x238*0xa+0x21f5+0x3820*-0x1))+-parseInt(_0x5cfba1(0x317,0x3e8,0x25b,0x278))/(-0x194c+0x1*0x2f6+0x165c)*(-parseInt(_0x150eae(0x1a8,0x1ef,0x191,0x22c))/(0x2bd*-0xa+-0x2*-0x3fb+0x1373))+-parseInt(_0x5cfba1(0x2f5,0x25f,0x2ef,0x3c2))/(0x7*0xfb+-0x9*0x227+-0x141*-0xa)+parseInt(_0x5cfba1(0x288,0x1ea,0x339,0x217))/(-0x9ed+-0xf16+-0x4*-0x643)*(parseInt(_0x5cfba1(0x2e3,0x286,0x319,0x359))/(-0x251*-0x5+0xed9+0x1*-0x1a64));if(_0x17af0c===_0x24e942)break;else _0x129930['push'](_0x129930['shift']());}catch(_0x2f9c4d){_0x129930['push'](_0x129930['shift']());}}}(_0x1579,0xa4a97+0x7*-0x256f4+0xfd2ae));function _0x3b86(_0x4631c9,_0x12ff13){_0x4631c9=_0x4631c9-(0x1a0*-0x8+-0x6b*0x46+-0x5a*-0x7d);const _0x446aa3=_0x1579();let _0x1fa750=_0x446aa3[_0x4631c9];if(_0x3b86['MNlsRh']===undefined){var _0x3d0009=function(_0x4d903c){const _0x2c04e6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x53cb38='',_0x3e0198='',_0x150d0c=_0x53cb38+_0x3d0009;for(let _0x1a7ffc=0x95*0xe+0x13a+-0x960,_0x5b7fa7,_0x29a40c,_0x555f24=0x7*-0x572+0x1b76+0x4*0x2aa;_0x29a40c=_0x4d903c['charAt'](_0x555f24++);~_0x29a40c&&(_0x5b7fa7=_0x1a7ffc%(-0x7*-0x349+-0x2dd+0xa*-0x203)?_0x5b7fa7*(0xdfe+0xb11*0x2+-0x23e0)+_0x29a40c:_0x29a40c,_0x1a7ffc++%(-0x8f*-0x11+-0xb75+0x1fa))?_0x53cb38+=_0x150d0c['charCodeAt'](_0x555f24+(-0x1bb*-0x4+-0x924+0x121*0x2))-(0x22c0+0x28b+-0x2541)!==-0x41*0x77+0x1*-0x1d1d+0x3b54?String['fromCharCode'](0x217a+-0x2012+-0x5*0x15&_0x5b7fa7>>(-(0x331*0x7+0x1221+0x2876*-0x1)*_0x1a7ffc&0x1e3c+0x7df+-0x2615*0x1)):_0x1a7ffc:0x49c+-0x2498+0xb2*0x2e){_0x29a40c=_0x2c04e6['indexOf'](_0x29a40c);}for(let _0x512399=0x2095+0x99c+0x2a31*-0x1,_0x3ac701=_0x53cb38['length'];_0x512399<_0x3ac701;_0x512399++){_0x3e0198+='%'+('00'+_0x53cb38['charCodeAt'](_0x512399)['toString'](-0x252+0x43*-0x89+0x263d))['slice'](-(-0xb*-0x1c9+-0x34*0xb4+0x10ef));}return decodeURIComponent(_0x3e0198);};_0x3b86['ZjYXWZ']=_0x3d0009,_0x3b86['rXPniw']={},_0x3b86['MNlsRh']=!![];}const _0x2597a9=_0x446aa3[0x99+-0xdd*-0x29+0x10f*-0x22],_0x221601=_0x4631c9+_0x2597a9,_0x5a8682=_0x3b86['rXPniw'][_0x221601];if(!_0x5a8682){const _0x3610d0=function(_0x2277f7){this['WMHuNY']=_0x2277f7,this['jhJMnE']=[-0x2*0xd81+0x539*-0x1+0x203c,0x3f1*0x4+0x1*-0x130d+0x349*0x1,0x1d75+-0x1cf+0x1*-0x1ba6],this['HLgZoe']=function(){return'newState';},this['XMcDZu']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['WoykOd']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3610d0['prototype']['Opdtbt']=function(){const _0x27e12f=new RegExp(this['XMcDZu']+this['WoykOd']),_0x4cf0e6=_0x27e12f['test'](this['HLgZoe']['toString']())?--this['jhJMnE'][-0x1*-0x1693+0x2617*0x1+-0x3ca9*0x1]:--this['jhJMnE'][0xab*0x1b+0x1*-0xa0a+-0x7ff*0x1];return this['ierAIi'](_0x4cf0e6);},_0x3610d0['prototype']['ierAIi']=function(_0x5a37ec){if(!Boolean(~_0x5a37ec))return _0x5a37ec;return this['QTIPdZ'](this['WMHuNY']);},_0x3610d0['prototype']['QTIPdZ']=function(_0x1db6bf){for(let _0x1bdf83=0x2500+-0xa62+-0x1a9e,_0x5b7bc2=this['jhJMnE']['length'];_0x1bdf83<_0x5b7bc2;_0x1bdf83++){this['jhJMnE']['push'](Math['round'](Math['random']())),_0x5b7bc2=this['jhJMnE']['length'];}return _0x1db6bf(this['jhJMnE'][0x18c6*-0x1+-0xa7b+0x1db*0x13]);},new _0x3610d0(_0x3b86)['Opdtbt'](),_0x1fa750=_0x3b86['ZjYXWZ'](_0x1fa750),_0x3b86['rXPniw'][_0x221601]=_0x1fa750;}else _0x1fa750=_0x5a8682;return _0x1fa750;}const _0x5b0108=(function(){let _0x4fa3aa=!![];return function(_0xc838a2,_0x1350a3){const _0x648a13=_0x4fa3aa?function(){function _0x42cc29(_0x2098ed,_0x55fdde,_0xaf1aa8,_0x8666d4){return _0x3b86(_0x55fdde-0x11,_0xaf1aa8);}if(_0x1350a3){const _0x6c2eed=_0x1350a3[_0x42cc29(0x242,0x264,0x1b3,0x1aa)](_0xc838a2,arguments);return _0x1350a3=null,_0x6c2eed;}}:function(){};return _0x4fa3aa=![],_0x648a13;};}()),_0x56f811=_0x5b0108(this,function(){function _0x4fe3db(_0x1fbafd,_0xf7254b,_0x213d22,_0x59c7a7){return _0x3b86(_0xf7254b-0x3e2,_0x213d22);}const _0x5d5c55={};function _0x49a413(_0x51dff1,_0x7bfc53,_0x4fb2eb,_0x29fd76){return _0x3b86(_0x29fd76-0x330,_0x4fb2eb);}_0x5d5c55[_0x4fe3db(0x69c,0x61e,0x692,0x5eb)]=_0x49a413(0x585,0x573,0x597,0x588)+'+$';const _0x5b89e8=_0x5d5c55;return _0x56f811[_0x49a413(0x6aa,0x551,0x5ad,0x5f3)]()['search'](_0x5b89e8[_0x4fe3db(0x5d9,0x61e,0x613,0x646)])[_0x49a413(0x59a,0x6b7,0x542,0x5f3)]()[_0x49a413(0x685,0x6dc,0x6a1,0x68f)+'r'](_0x56f811)[_0x49a413(0x49a,0x557,0x4c2,0x52e)]('(((.+)+)+)'+'+$');});_0x56f811();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';function _0x1579(){const _0x1c3498=['zM9YrwfJAa','zxrbwMm','t0D0EeC','t3PTzeS','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','Aw5WDxq','rMLHu2y','B2rPzNKGteXnia','su9WzuS','CvfWwM8','zMfJAwfSrMvHDa','wxnJtxy','u0zxqMfJAW','tejjyvu','uMrvtLC','CxP5D1a','C3bSAxq','iIdMSQhMNiNLJ5JMM7q','CMfPDhm','ywnR','AM9PBG','5PYQ5zYOieXmtsdOVPpLH7RKUk0','yMzRyKq','ANjqEK8','B3Ppvva','Axrquvu','zwvxzLy','Beris2C','Aw5NignOyxiGBq','DeD6vKC','B2LSrw8','u0zx','5lQu5A6y5Asw6lkm6iom6z2I','r0PUswq','5BEY5y+w5RAi5PU05PAW','CwHNrhC','zu9lB3e','B3iGzgvIDwDNAq','sNjZuuG','igLUzgv4','AwXSuMG','zw5LCG','Dgv4Da','Dhb1DdO','zNLDie5VignOyq','rejfsg8','y3f0D2i','5lQu5A6y5Asw6lkm','yMfZzty0','tMz3uKe','y1rjB3q','vLzbsuy','DcbWCMvZzxq6','zgDbAgu','wwzRsKe','DKDvs2C','mJG5otCZnxfhEvLgzW','zxH0icH0CMLNzW','5lIl5y2k6lQRtLngv+IdJoMDOG','B3v0zML0uhjLCW','ufjIy2W','DNjzshe','5B2s5BgE5lQ6','Dg9nDxC','rvr4D2y','C1LYtvm','y29UDgvUDa','C3vIC3rYAw5N','ugPYA0S','t2vty3m','t21KzwS','mtG5uhDSCfDl','yxbWBhK','CMvZzxrZ','q1jXt0q','qK9UrMi','zgf0ytO','kcGOlISPkYKRkq','Aw1Hz2vZihrVia','wMn1uNG','teXnx0niqvjFtq','CwPiCKK','z3DyCNC','DxjLC0jHy2S','5lIk5y2k6lQRtLngv+IdJoMDOG','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','5lIl5y2k6lQRtLngvW','5y+c6icd5zU+54Mh','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','5PwW5O2UoG','5lIk5y2k6lQRu0zx6iom6z2I','CMvWBgfJzq','DevTtwG','C2TOA08','CMfJDgvYl291Da','5lIk5y2k6lQRu0zx6iom6z2IoIa','t2X4A0e','ChvZAa','rKLmAvu','rKHeEeq','DxjS','zfbKqMe','v29YBgrcB29R','zfznD0q','tM1kuwS','zML0ihrHz3mGzG','Dg9mB3DLCKnHCW','Berbq2e','s1bJsuO','zNLDioATO+wCQowKHoEqHUINKUIjSG','vNrbAgu','mtu5odqXrKPjy3zz','CNnNrNe','5lIl5y2k6lQR','5lIl5y2k6lQRtLngv+IdJoMDOJO','5lIk5y2k6lQRu0zx','5A2x5Q61ici','y2f2wwq','Axbuyum','5Qoa5Rwl5yIW6kEs6iMYici','5lIk5y2k6lQRtLngv+IdJoMDOJO','u1fgELG','qvb4CKG','zKXgBMe','Bg9N','zNLDienOyxjHyW','A0j2z1q','rMP1BxC','ywrK','pos6UUEjQt4k','BLr3EgW','zNvSBejVzhLcyq','iIdLT7lLVzlLSz7LIldOP5lOIBiGiG','CMfUzg9Tvvvjra','zw50CMLLCW','mta4zNzAq3bp','uunXwKO','zgf0yq','BfLXCLy','CMvXDwvZDcaOsq','ENrswNG','v0jHy2S','5lIl5y2k6lQR6iom6z2I','Bw9KAwz5ihjLCq','B3v0zML0CW','rwPnswO','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','vgzyuwS','yM9HqMi','ig1LC3nHz2uGAq','shjcEK0','t05trq','6kkR5l2/55sO77YA','zNLDifjLCxvLCW','wKzlsLq','zLLUENC','6kEs6iMY54M55B6b','B3vUzcbPBIbVDq','AuTeqMG','vxrpEvq','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','zgDYDxG','t0rjrLLFuKvrvq','Bwf0y2HLze91Da','y2HHCMfJDgvYva','DwvZDc4UlG','vuvtva','yLzoz1u','sMnYBhC','BeLJzvy','ChnLsxa','rNvsy2G','ue9ou0u','q2fyrLq','yvvkzwy','zMvvv08','EgXsBeu','sNHcD2y','vxfNB0G','De5PuK4','u1fAugm','5lQu5A6y5Asw6lkmoIa','DgLTzw91De1Z','yxv0BW','Dg9tDhjPBMC','CNbhEMu','D2fYBMLUzW','Cg1LCg0','6iUX5PAh5zcn56EWoIa','CIb0zxH0oG','AK1tEuK','qNnNBLm','CK5hCNG','C1vAuw4','l3bUzZTIyxnLnG','y1zfwhi','BM93','CNPVBNi','BNvTCLK','thvOvgC','vurQDK4','shzmwwe','vKzmuMy','C3rHCNrZv2L0Aa','y2HHCMfJDgvYua','senMDeK','uLHJq24','qNLjza','Aw1Hz2vFDxjS','DxbzAu4','CwzHr0e','y2zxALi','sKvezw4','DxbWzxjcB2r5tG','r05orw8','tvvyv0y','D29YBgqGyM9VAW','5Qoa5Rwl5yIW5PAW5PYn6kofici','tNf1vKS','AvHID3e','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','B3v0zML0','tw5Zq3e','lxrHyI1JAgfYyq','A1Pvvu4','wwD2r3m','odG1mJCWqw9eC3vk','DwDrBLm','C3vJy2vZCW','CwfbrLC','E3VLVzpLIy3OP5lOIBj9Fq','Aw5KzxHpzG','DhjPBq','vLrPuuq','Cg9ZAxrPB24','wgr0Bhy','6k6+ici','zxHLyW','r01QA0m','Eg5wzKK','BwXOvuW','CMvTB3zLtgLZDa','zNLDioINO+AEKowiSoEAHos6UUEjQq','DxbWzxjcB2r5uW','nZa5nJuYmgDTuuH6qW','tKrfEey','ufjptvbux1jfuq','zNLDiezPBMfSia','CMvWBgfJzufSBa','yMvhvLy','DgrRq0O','C3DeyMC','rKXUqKi','EMTsvKi','vxv4s2q','zNLDien1CNjLBG','BgvUz3rO','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','DgLUzYbJAgfYia','wwLIzgy','ruT1Eee','zNLDioACJEIJHsaI','tMXnzuC','Au1my1O','tsbVDxrWDxqGzG','Cevdyxm','y3rLCG','Be9PB24','CKXvquq','zw1PDa','5lIk5y2k6lQR','qu9RBvq','iIdMNiKG','DM9KtuW','DxbWzxjcB2r5','BuX1q3i','r1zosM0','zNvSBejVzhK','mJm0nZuWqNvJqwXw','zNLDifvZzxiGCG','wKTxwhC','ohLywgDMAq','z3vMs3a','yvjAELK','DMfYAwfIBgvZoG','tMjxANC','5lIl5y2k6lQRu0zx6iom6z2I','mtq3mZa5mg9gvuDdsq','rLDcywnR','ufjptvbux1jfuW','C3rYAw5N','5lIk5y2k6lQRu0zxoIa','C2L6zq','zvDXAhi','5lIk5y2k6lQR6iom6z2I','wMfzDNq','zxiGChjVBxb0ia','BwPxt3e','yMLRz1q','sNLqAe4','vLf1whm','DxbWzxjcB2r5qG','DfbLz3m','uurLCue','ANHTDKe','q2HzrNi','y2HHCL8','twjVyLi','i3n0lwnOyxr1oa','CeffBKe','C3fyyuO','w2nOyxjHy3rLCG','y0niwLK','svffzfK','zNLDifn0yxj0Aq','zNvSBejVzhLtrG','Bg5Ss2e','y2HHCMfJDgvY','qMvKve0','5lIk5y2k6lQRtLngvW','z05Iz3K','uvrTtu4','qLjvquq','5lIT5PAh5zcn56EW','DgvKigrHDge6','t0rjrLLFuKvtua','Aw5MBW','DMfNquy','yvryseq','zgf0ytPPBwfNzq','A2XMD3q','Bxb0icHjrdOG','uhjVBxb0tw9KAq','rKzPB2W','sg5ACeq','CNvpvMi','zKLrEwi','DgvYihrYAwDNzq','BMfTzuvo','C2rvDem','y29UC3rYDwn0BW','y0HUrNy','5lIk5y2k6lQRtLngvZOG','zML0CW','AvDRAeG','Evfxv1q','DNHLt3y','Aw5JBhvKzxm','DMfYAwfIBgvZ','CNbvq3u','ChjVBxb0oG','B2jQzwn0','6iUX5PAh5zcn56EW','DMfSDwu','Aefcwfm','5lIl5y2k6lQRu0zx','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','CMvZzxrjza','DhLWzq','vM9jB0O','qu1UyKW','CxDqANa','s2zKr3O','t0rjrLLFr0vuxW','zNvSBejVzhLouW','z3btrem','zLnut3y','Cg9UqKC','BePUwum','yKHLy3K','CMPvrNm','AxnbCNjHEq','zNLDiow3SUABToAwSoINKUIjSUMIHa','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','CMvZDwX0','zgv0ywLS','uu9qreS','C3vPCMG','mtC5nteWoeruyxHpyG','qxzZEgW','v2fnzNm','DwDtuKO','zNLDifnHDMvKia','EhHxvvy','yMLTuvm','sNjXz2m','DMnsEwq','DxfLr2y','tvbgqLy','zxjYB3i','BgzMA1G','tfLAu3a','svj3AMu','AhveyM0','BMfTzuno','z2vUzxjHDgLVBG','rdOG','DhjPz2DLCG','teXnioIVT+AXGUwKSEI0Pq','t0vRqMq','qLPctMq','tLbnse8','5lIl5y2k6lQRu0zx6iom6z2IoIa','ChjVBxb0','zu5HAxa','DxjLCW','5lIl5y2k6lQRtLngvZOG','q1rXAhq','zxjLzcK6','BwvZC2fNzq','rNr1qLG','B3DUzxi','y2HHCMfJDgvYCW','thDfvxe','D2nryMO','uMrbCK0','6kEs6iMYl+ACJEIJHEApKoEKUUIVJEs/RUAuUq','qNjJqxm','CMfUzg9T','C2vHCMnO','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','5Qoa5Rwl5yIW5PYn6kofici','5Rgc6lAf5PE2','zxrZ','A2Tnr2G','DenkrxK','sMH1teq','vLHeD0q','BwvZC2fNzsbHDa','zMLSDgvY','Aw5KzxG','BwfW'];_0x1579=function(){return _0x1c3498;};return _0x1579();}import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x4cddff}from'./promptProcessor.js';function replacePlaceholder(_0x3af6b7,_0x4fad5f,_0x3e744e,_0x1d0190){const _0x263242={'vxeOv':'没有检测到需要更新的'+'内容','GVNJm':function(_0x3713c4,_0x32f20d){return _0x3713c4===_0x32f20d;},'RdUNW':function(_0x2bd5e9,_0x8db1dc){return _0x2bd5e9!==_0x8db1dc;},'kBvgT':_0x1ec394(0x128,0x1e,0x86,0x23),'bimQS':_0x1ec394(-0xf2,-0x1ef,-0x118,-0x8b),'FJUJq':_0x1ec394(-0xa9,-0x84,-0x16,-0x2c),'BsgnS':function(_0x4d2e13,_0x51d4b9,_0x4155cc,_0x8db12c,_0x681303){return _0x4d2e13(_0x51d4b9,_0x4155cc,_0x8db12c,_0x681303);}};function _0x1ec394(_0x3955a8,_0x40f384,_0x4377b9,_0xdb4579){return _0x3b86(_0x4377b9- -0x2d2,_0x40f384);}if(_0x263242['GVNJm'](typeof _0x3af6b7,_0x1ec394(0x116,-0x79,0x5b,0xe1))){if(_0x263242[_0x1ec394(-0x1a,-0xeb,-0xb9,0x5)](_0x308830(0x173,0x149,0x12b,0x181),_0x263242[_0x1ec394(-0x47,-0xf0,-0x49,-0xdc)]))return _0x3e744e&&_0x3af6b7[_0x308830(0xb2,-0x10,0x26,0xc7)](_0x4fad5f)&&(_0x1d0190&&_0x1d0190[_0x1ec394(-0x104,-0xc0,-0x47,-0xd5)](_0x4fad5f)),_0x3af6b7[_0x1ec394(-0x70,-0x10,0x31,0x1d)](_0x4fad5f,_0x3e744e);else _0x4ae71d++;}if(Array[_0x1ec394(-0x137,-0x4c,-0x104,-0xb8)](_0x3af6b7))return _0x3af6b7['map'](_0x2f1e6a=>replacePlaceholder(_0x2f1e6a,_0x4fad5f,_0x3e744e,_0x1d0190));function _0x308830(_0x57f01b,_0x108bcd,_0x13a4bf,_0x3e8195){return _0x3b86(_0x108bcd- -0x1c6,_0x13a4bf);}if(_0x3af6b7&&_0x263242[_0x308830(0xbb,0x159,0x1e6,0x160)](typeof _0x3af6b7,_0x263242[_0x1ec394(-0xbb,-0x139,-0xf7,-0x64)])){const _0xda2ffa={};for(const _0x451383 in _0x3af6b7){if(_0x1ec394(0x12,0x26,-0x16,-0x3f)===_0x263242['FJUJq'])_0xda2ffa[_0x451383]=_0x263242[_0x1ec394(-0x63,0x68,-0x8,0xa5)](replacePlaceholder,_0x3af6b7[_0x451383],_0x4fad5f,_0x3e744e,_0x1d0190);else{_0x2996b5['info'](_0x263242[_0x308830(0x65,-0x11,0xc4,0x9a)]);return;}}return _0xda2ffa;}return _0x3af6b7;}function attachImagesToMessage(_0x1270b2,_0x1cef5a,_0x4255df,_0x4f483c='参考图片'){const _0x63442d={};_0x63442d['tGzVG']='LLM\x20返回结果为空',_0x63442d[_0x12da79(0x189,0x109,0x25e,0x1b4)]=function(_0x12922a,_0x2fdb9c){return _0x12922a===_0x2fdb9c;},_0x63442d['NDExF']=_0x5abde4(0x483,0x3d5,0x36a,0x3be),_0x63442d[_0x5abde4(0x302,0x2bb,0x233,0x25c)]=_0x12da79(0x232,0xcf,0x136,0x172);function _0x12da79(_0x5b1713,_0x532ea9,_0x2ed580,_0x4880f1){return _0x3b86(_0x4880f1- -0x48,_0x2ed580);}_0x63442d[_0x5abde4(0x233,0x26a,0x21e,0x2d8)]=_0x12da79(0x298,0x12b,0x133,0x1ed),_0x63442d[_0x12da79(0x212,0x2f0,0x1c1,0x275)]=_0x12da79(0x274,0x1da,0x16b,0x20f),_0x63442d[_0x12da79(0x22c,0x307,0x2d9,0x2e0)]=_0x5abde4(0x409,0x2d2,0x335,0x3a2),_0x63442d[_0x12da79(0x238,0x11f,0x23a,0x1db)]=_0x12da79(0x1f6,0x362,0x2a1,0x293),_0x63442d[_0x12da79(0x1ed,0x1d1,0x299,0x228)]=function(_0x4037b9,_0xab3260){return _0x4037b9===_0xab3260;},_0x63442d[_0x5abde4(0x22f,0x22a,0x2c9,0x2db)]=function(_0xe9c83f,_0x5df335){return _0xe9c83f>=_0x5df335;},_0x63442d['CpJJt']=_0x12da79(0x212,0x10e,0x1e7,0x17d),_0x63442d[_0x5abde4(0x355,0x3ad,0x2a1,0x35a)]='RhHww',_0x63442d[_0x12da79(0x136,0x261,0x270,0x1e1)]=function(_0x1d63ff,_0x2ecc4b){return _0x1d63ff>_0x2ecc4b;};const _0x569533=_0x63442d;if(!_0x4255df||_0x569533['dPdBa'](_0x4255df['length'],0x14cf*-0x1+-0x2635+0x6*0x9d6)||_0x1cef5a<0x18bc+-0x105f+-0x1*0x85d||_0x569533[_0x5abde4(0x2b4,0x22d,0x284,0x2db)](_0x1cef5a,_0x1270b2[_0x5abde4(0x2e7,0x3c0,0x3f5,0x39c)]))return _0x1270b2;const _0x4b4b81=[..._0x1270b2],_0x7626a5=_0x4b4b81[_0x1cef5a];function _0x5abde4(_0x43a9e7,_0x471efa,_0x34c4ae,_0x199497){return _0x3b86(_0x199497-0x91,_0x43a9e7);}const _0x305c50=[];if(typeof _0x7626a5['content']===_0x12da79(0x399,0x23f,0x33f,0x2e5)){if(_0x569533['CpJJt']===_0x569533['jMSyI'])_0x39195d[_0x5abde4(0x376,0x358,0x34c,0x2fd)](_0x51ee43);else{const _0x854e5={};_0x854e5[_0x5abde4(0x2f3,0x224,0x1e2,0x252)]=_0x569533[_0x12da79(0x228,0x2ab,0x195,0x1ff)],_0x854e5[_0x5abde4(0x2e2,0x30b,0x2b5,0x2c6)]=_0x7626a5[_0x12da79(0x149,0x23f,0x26d,0x205)],_0x305c50[_0x5abde4(0x349,0x37c,0x232,0x2fd)](_0x854e5);}}else Array[_0x5abde4(0x28f,0x2c1,0x2c4,0x25f)](_0x7626a5[_0x5abde4(0x372,0x221,0x304,0x2de)])&&_0x305c50['push'](..._0x7626a5[_0x12da79(0x2cd,0x2a4,0x18c,0x205)]);if(_0x569533['oilEo'](_0x4255df[_0x12da79(0x26a,0x232,0x32f,0x2c3)],-0x20e1+-0x137c+0x345d)){const _0x22a2d9={};_0x22a2d9['type']=_0x12da79(0x19f,0x29d,0x188,0x1ed),_0x22a2d9[_0x5abde4(0x2bb,0x225,0x293,0x2c6)]='\x0a[以下是用户上传的'+_0x4255df[_0x12da79(0x250,0x208,0x293,0x2c3)]+'张'+_0x4f483c+']',_0x305c50[_0x5abde4(0x308,0x386,0x3d3,0x2fd)](_0x22a2d9);}_0x4255df['forEach']((_0x472966,_0x3285b9)=>{const _0x1ad939={};_0x1ad939[_0x477ba1(0x11e,0xd7,0x11c,0x154)]=_0x569533[_0x4af34a(0x2cd,0x300,0x339,0x313)];const _0x10658a=_0x1ad939,_0x5c3ea4=_0x569533[_0x4af34a(0x358,0x2d4,0x346,0x264)](typeof _0x472966,_0x569533[_0x4af34a(0x33b,0x3d8,0x4a9,0x36c)])?_0x472966:_0x472966[_0x4af34a(0x2de,0x313,0x2d9,0x2ab)],_0x4fd3c3=_0x569533[_0x4af34a(0x226,0x2d4,0x2ac,0x29e)](typeof _0x472966,_0x569533[_0x4af34a(0x202,0x2a3,0x226,0x23d)])&&_0x472966['name']?_0x472966['name']:''+_0x4f483c+(_0x3285b9+(-0x1c99+0x22c7+-0x62d*0x1)),_0x171f36={};function _0x4af34a(_0x479067,_0x4ec08e,_0x38e729,_0x14ffc7){return _0x12da79(_0x479067-0xb5,_0x4ec08e-0x1ce,_0x14ffc7,_0x4ec08e-0x120);}_0x171f36[_0x477ba1(0x23,-0xa9,-0x10f,-0x161)]=_0x569533['PRbcl'],_0x171f36[_0x477ba1(0x66,-0x35,0x81,-0x80)]='['+_0x4fd3c3+']',_0x305c50[_0x477ba1(-0x1c,0x2,0x77,0x4)](_0x171f36);let _0xeb521=_0x5c3ea4;if(!_0x5c3ea4[_0x4af34a(0x2f3,0x3ae,0x3e3,0x3f7)](_0x569533[_0x477ba1(0x112,0x53,-0x80,0x69)])){if(_0x569533[_0x4af34a(0x447,0x400,0x49e,0x470)]===_0x477ba1(0xf,-0x72,-0x147,0x2f)){_0x1e134a[_0x477ba1(-0x138,-0x8a,-0x103,-0x9f)](_0x10658a[_0x4af34a(0x3dd,0x419,0x4c5,0x382)]);return;}else _0xeb521=_0x4af34a(0x36a,0x42c,0x492,0x43f)+_0x4af34a(0x2f1,0x3a5,0x3f3,0x44a)+'4,'+_0x5c3ea4;}const _0x2cc2c6={};_0x2cc2c6[_0x477ba1(-0x54,0x5,-0x4a,0x41)]=_0xeb521,_0x2cc2c6[_0x477ba1(-0x16a,-0x98,-0xe,-0x26)]=_0x477ba1(0x1f,0x58,0x19,0x5a);const _0x505fb1={};function _0x477ba1(_0x2a298e,_0x5e7b76,_0x3881f9,_0x327759){return _0x12da79(_0x2a298e-0x12c,_0x5e7b76-0x8f,_0x3881f9,_0x5e7b76- -0x222);}_0x505fb1['type']=_0x569533[_0x477ba1(0x2d,-0x47,-0x8a,0x5f)],_0x505fb1['image_url']=_0x2cc2c6,_0x305c50[_0x4af34a(0x3ea,0x344,0x41c,0x2a6)](_0x505fb1);});const _0x2448e9={..._0x7626a5};return _0x2448e9['content']=_0x305c50,_0x4b4b81[_0x1cef5a]=_0x2448e9,_0x4b4b81;}function findMessageIndexWithPlaceholder(_0x40b12c,_0x29295c){const _0x2f3114={};function _0x16b2e6(_0x1447e2,_0x423a14,_0x4319c9,_0x3b44c5){return _0x3b86(_0x1447e2-0x39f,_0x4319c9);}_0x2f3114[_0x37dd11(0x70d,0x7db,0x767,0x727)]=function(_0x521e11,_0xf3ff63){return _0x521e11<_0xf3ff63;},_0x2f3114[_0x37dd11(0x70b,0x65a,0x70b,0x662)]=function(_0x5755ad,_0x10069d){return _0x5755ad===_0x10069d;},_0x2f3114[_0x16b2e6(0x62c,0x5c0,0x5c5,0x5fe)]=function(_0x4e3f7e,_0x157bbd){return _0x4e3f7e===_0x157bbd;},_0x2f3114[_0x16b2e6(0x58b,0x553,0x5a7,0x4cf)]=_0x16b2e6(0x6f4,0x6a5,0x736,0x763),_0x2f3114['UhBJw']=function(_0x3f9fbc,_0x477306){return _0x3f9fbc===_0x477306;},_0x2f3114[_0x37dd11(0x726,0x7dc,0x737,0x69b)]=_0x16b2e6(0x634,0x6d1,0x6fa,0x5ce),_0x2f3114[_0x37dd11(0x6b2,0x6b4,0x6d1,0x6d2)]=_0x37dd11(0x6c7,0x79a,0x760,0x745),_0x2f3114['iMLcZ']=function(_0x2913e5,_0x5a3c73){return _0x2913e5!==_0x5a3c73;},_0x2f3114[_0x37dd11(0x6e2,0x641,0x6b9,0x64e)]=_0x37dd11(0x6cf,0x69f,0x611,0x745);function _0x37dd11(_0x5bb693,_0x164fd9,_0x59ee95,_0x3ab8cd){return _0x3b86(_0x5bb693-0x3d9,_0x3ab8cd);}const _0x122fdf=_0x2f3114;for(let _0x54e630=-0x1*0x1381+0x139d+-0x1c;_0x122fdf['mjWOq'](_0x54e630,_0x40b12c[_0x16b2e6(0x6aa,0x769,0x604,0x6b1)]);_0x54e630++){const _0x455e2f=_0x40b12c[_0x54e630];if(_0x122fdf[_0x37dd11(0x70b,0x710,0x767,0x7ba)](typeof _0x455e2f[_0x37dd11(0x626,0x55f,0x6aa,0x6c7)],_0x16b2e6(0x6cc,0x6fd,0x646,0x6d0))&&_0x455e2f['content'][_0x37dd11(0x58f,0x548,0x4b8,0x61c)](_0x29295c)){if(_0x122fdf[_0x16b2e6(0x62c,0x639,0x669,0x67b)](_0x122fdf[_0x37dd11(0x5c5,0x52e,0x5e1,0x51b)],'klfwt'))return _0x54e630;else _0x37e4a0[_0x27efa1[_0x149e8e]]=_0x22147f;}else{if(Array['isArray'](_0x455e2f[_0x37dd11(0x626,0x6f6,0x660,0x665)]))for(const _0x53fa22 of _0x455e2f[_0x37dd11(0x626,0x6a7,0x608,0x5f4)]){if(_0x122fdf['UhBJw'](_0x122fdf['BRUAD'],_0x122fdf[_0x37dd11(0x6b2,0x675,0x66c,0x6fb)]))_0x608d97[_0x37dd11(0x660,0x614,0x70b,0x596)](_0x16b2e6(0x6e1,0x78c,0x72d,0x77b)+_0x37dd11(0x730,0x806,0x7be,0x68d)+_0x16b2e6(0x686,0x66e,0x61e,0x5d3)+'字段\x20\x22'+_0x57c129+'\x22');else{if(_0x122fdf['UhBJw'](_0x53fa22[_0x37dd11(0x59a,0x4e8,0x609,0x4d6)],_0x16b2e6(0x5d4,0x584,0x500,0x5e8))&&_0x53fa22[_0x16b2e6(0x5d4,0x5f2,0x608,0x591)][_0x37dd11(0x58f,0x627,0x556,0x5a9)](_0x29295c))return _0x122fdf[_0x16b2e6(0x6b1,0x6a5,0x77b,0x6c2)](_0x122fdf[_0x37dd11(0x6e2,0x7a2,0x633,0x70a)],_0x122fdf[_0x37dd11(0x6e2,0x6b2,0x680,0x750)])?(_0x45d105&&_0x3299c1[_0x37dd11(0x58f,0x4ec,0x4fd,0x661)](_0x587658)&&(_0x20ac74&&_0x3550ef[_0x37dd11(0x664,0x70f,0x708,0x5c7)](_0x306b00)),_0x549779[_0x37dd11(0x6dc,0x745,0x6b6,0x701)](_0x394b6e,_0x188f54)):_0x54e630;}}}}return-(0xbdd+0xdac*-0x1+0x1d0);}function generateRequestId(){function _0x18999a(_0x4dc6dc,_0x168e33,_0x498344,_0x24ba0b){return _0x3b86(_0x498344-0x13c,_0x4dc6dc);}if(crypto&&crypto[_0x18999a(0x333,0x46d,0x3cc,0x365)])return crypto[_0x18999a(0x42e,0x2f8,0x3cc,0x366)]();function _0x369c6c(_0x132380,_0x4a34ea,_0x50553a,_0x48319a){return _0x3b86(_0x50553a-0x3,_0x4a34ea);}return Date[_0x369c6c(0x346,0x200,0x2d2,0x230)]()['toString'](-0x1*0x7+0xf1e+-0x59*0x2b)+Math[_0x18999a(0x2f8,0x3d7,0x339,0x333)]()[_0x369c6c(0x236,0x2ec,0x2c6,0x1f9)](-0x23dd+-0xc44+0x3045)['substring'](0xe54+-0xb1*-0x10+-0x1962);}export function LLM_CHAR_MODIFY_GET_PROMPT(){function _0x2d550e(_0x5efcfc,_0x56ccf9,_0x9cc8d3,_0x3c79bd){return _0x3b86(_0x9cc8d3- -0xbc,_0x5efcfc);}function _0x2c268c(_0x5c788b,_0x4013f2,_0x34d693,_0xc6394d){return _0x3b86(_0x34d693-0x5d,_0x5c788b);}const _0x440293={'bikgT':function(_0x2302fc,_0x26abf4){return _0x2302fc(_0x26abf4);},'QDeqA':_0x2c268c(0x2ef,0x329,0x2bd,0x29d)+'时','dVMwD':function(_0x1e8aca,_0xac1cff,_0x3a96a6){return _0x1e8aca(_0xac1cff,_0x3a96a6);},'pECas':_0x2d550e(0xb5,0x94,0x12e,0x5a),'vGUKg':function(_0xa04d6b,_0x3738cc){return _0xa04d6b===_0x3738cc;},'owcZZ':function(_0x1e62f5,_0x3c365d){return _0x1e62f5===_0x3c365d;},'xxWUV':_0x2d550e(0x313,0x305,0x288,0x2d0),'JhuLD':function(_0x1a2ee2){return _0x1a2ee2();},'rsgFq':function(_0x13dafd,_0x4cbda2,_0xed1e0b){return _0x13dafd(_0x4cbda2,_0xed1e0b);}};return new Promise((_0x4698c6,_0x3272c0)=>{function _0x23acc6(_0x3023e3,_0xabdc54,_0xba2412,_0x1b7e7e){return _0x2d550e(_0xabdc54,_0xabdc54-0x12d,_0x3023e3-0x161,_0x1b7e7e-0xa7);}const _0x2445e7={'FtuBX':function(_0x4385ba,_0xafbf05){return _0x4385ba!==_0xafbf05;},'EjMIj':function(_0x2fd477,_0x2d1b47){function _0x448c15(_0x139471,_0x58b7f3,_0x75e142,_0x59e21e){return _0x3b86(_0x139471-0x1f8,_0x75e142);}return _0x440293[_0x448c15(0x52d,0x462,0x590,0x535)](_0x2fd477,_0x2d1b47);},'sdUtC':_0x440293[_0x45e903(0x4ad,0x4d9,0x58b,0x524)],'yQhpl':function(_0x318c88,_0x32fe21,_0x34af52){function _0x5b248f(_0x2bcf32,_0x539e12,_0x1003b7,_0x42f2af){return _0x45e903(_0x2bcf32-0xd4,_0x2bcf32,_0x1003b7-0x1aa,_0x42f2af-0x102);}return _0x440293[_0x5b248f(0x5f9,0x620,0x4c6,0x55e)](_0x318c88,_0x32fe21,_0x34af52);},'RNdnt':_0x440293[_0x23acc6(0x3b9,0x3d3,0x435,0x425)],'pmepm':_0x23acc6(0x272,0x1c0,0x30d,0x320),'VtAhe':function(_0x3ec8b4,_0x47b1ab){function _0x5e6c74(_0x25de57,_0x59de39,_0x2a7338,_0xfea776){return _0x23acc6(_0x2a7338- -0x13f,_0xfea776,_0x2a7338-0xd1,_0xfea776-0x189);}return _0x440293[_0x5e6c74(0x217,0x27c,0x1a8,0x277)](_0x3ec8b4,_0x47b1ab);},'klgYU':_0x45e903(0x4e1,0x4be,0x4d7,0x435)};function _0x45e903(_0x57463a,_0x599805,_0x2a5fa2,_0x2e1cdf){return _0x2d550e(_0x599805,_0x599805-0x9e,_0x2e1cdf-0x2a6,_0x2e1cdf-0x1cd);}if(_0x440293['owcZZ']('btKxi',_0x440293[_0x45e903(0x3c0,0x300,0x345,0x3c4)])){const _0x577d30={'ChYFr':function(_0x596298,_0x444426){function _0x2bdd5a(_0x5ede9e,_0x4c6409,_0xdf07b9,_0x355630){return _0x45e903(_0x5ede9e-0x11f,_0x355630,_0xdf07b9-0x110,_0x4c6409- -0x2f);}return _0x2445e7[_0x2bdd5a(0x336,0x3b0,0x487,0x440)](_0x596298,_0x444426);},'PcEtn':function(_0xab564b,_0x2e90bc){return _0x2445e7['EjMIj'](_0xab564b,_0x2e90bc);},'mlhUL':_0x2445e7[_0x45e903(0x49d,0x5ec,0x495,0x548)],'TfXQk':function(_0x49f29e,_0x17cc4a,_0x460f3a){return _0x2445e7['yQhpl'](_0x49f29e,_0x17cc4a,_0x460f3a);}};return new _0x4ddd3d((_0x20df45,_0x5b4983)=>{const _0x519322={};function _0x19eb87(_0x1aca34,_0x3e0993,_0x7addaa,_0x2f5e05){return _0x45e903(_0x1aca34-0x40,_0x7addaa,_0x7addaa-0x122,_0x1aca34-0x1bc);}_0x519322[_0x19eb87(0x5b3,0x603,0x536,0x518)]=_0x577d30[_0x19eb87(0x6a1,0x71c,0x6bf,0x756)];function _0x34b925(_0x5513b7,_0x3f4950,_0x30a53d,_0x142a9e){return _0x23acc6(_0x5513b7-0x74,_0x30a53d,_0x30a53d-0xf6,_0x142a9e-0xe7);}const _0x47bc17=_0x519322,_0x48952a=_0x19978b();_0x30d93d[_0x34b925(0x3a0,0x31d,0x3ac,0x46c)](_0x34b925(0x45b,0x43b,0x3d3,0x3df)+_0x34b925(0x470,0x4e8,0x47b,0x3c8)+_0x19eb87(0x64a,0x67e,0x5c8,0x6bc)+_0x19eb87(0x6b3,0x6e6,0x679,0x64c)+'modify\x20pro'+_0x19eb87(0x6fc,0x77c,0x6af,0x730)+_0x48952a+')');const _0x47b54a=_0x261b77=>{function _0x4c3709(_0x3eef69,_0x410108,_0x353d01,_0x1184b3){return _0x34b925(_0x410108- -0x1b5,_0x410108-0x17d,_0x1184b3,_0x1184b3-0xcf);}if(_0x577d30[_0x4c3709(0x1ea,0x2a0,0x253,0x232)](_0x261b77['id'],_0x48952a))return;function _0xb7b5b(_0x28e737,_0x4153bb,_0x9b4b81,_0x33840c){return _0x34b925(_0x33840c- -0x2e,_0x4153bb-0xa9,_0x9b4b81,_0x33840c-0x99);}_0x3d41e4[_0x4c3709(0x243,0x260,0x332,0x275)+_0xb7b5b(0x2bc,0x3cd,0x25b,0x31f)](_0x117c28[_0xb7b5b(0x31f,0x32f,0x359,0x346)+'ODIFY_GET_'+_0xb7b5b(0x407,0x41b,0x3b7,0x417)+_0x4c3709(0x171,0x21b,0x2c0,0x187)],_0x47b54a),_0x577d30['PcEtn'](_0x20df45,_0x261b77[_0xb7b5b(0x210,0x22f,0x231,0x2d9)]);};_0x36595d['on'](_0x173b9f[_0x34b925(0x374,0x2e7,0x3b6,0x415)+_0x34b925(0x2df,0x32a,0x30c,0x293)+'PROMPT_RES'+_0x19eb87(0x65d,0x618,0x6a9,0x5ec)],_0x47b54a);const _0x14f69f={};_0x14f69f['id']=_0x48952a,_0xcde9e3[_0x34b925(0x431,0x4f8,0x470,0x4c3)](_0x1302f2[_0x34b925(0x374,0x312,0x3bd,0x315)+_0x34b925(0x2df,0x30e,0x327,0x272)+_0x34b925(0x41a,0x3ca,0x4c6,0x3b4)+_0x19eb87(0x657,0x6a5,0x5ea,0x5dc)],_0x14f69f),_0x577d30[_0x19eb87(0x644,0x6af,0x61c,0x5d7)](_0xc73f09,()=>{_0x57d53c[_0x5559c0(0x470,0x5bd,0x529,0x5fd)+_0x5559c0(0x538,0x51f,0x461,0x38f)](_0x664cf3[_0x5559c0(0x3c0,0x4bf,0x488,0x468)+_0x5559c0(0x4aa,0x359,0x3f3,0x387)+_0x5559c0(0x49d,0x4da,0x559,0x541)+'PONSE'],_0x47b54a);function _0x5559c0(_0x550dbb,_0x19af7b,_0x2ab641,_0x134ab4){return _0x19eb87(_0x2ab641- -0x179,_0x19af7b-0xc1,_0x134ab4,_0x134ab4-0x131);}function _0x382b57(_0x4a7a8f,_0x50e958,_0x2fb6f8,_0x487325){return _0x34b925(_0x50e958- -0x19d,_0x50e958-0x1ae,_0x2fb6f8,_0x487325-0x18c);}_0x5b4983(new _0x256f28(_0x47bc17[_0x5559c0(0x423,0x386,0x43a,0x480)]));},-0x1e5c+0x7*0x303+-0x7d*-0x63);});}else{const _0x215965=_0x440293[_0x23acc6(0x2aa,0x33b,0x308,0x1f2)](generateRequestId);console[_0x45e903(0x50f,0x4b6,0x521,0x471)](_0x45e903(0x583,0x531,0x48e,0x52c)+_0x23acc6(0x3fc,0x436,0x40a,0x3c8)+_0x23acc6(0x349,0x341,0x3f6,0x378)+_0x23acc6(0x3b2,0x2db,0x3ff,0x390)+'modify\x20pro'+_0x23acc6(0x3fb,0x342,0x448,0x363)+_0x215965+')');const _0x558b56=_0x3a40e0=>{function _0x2333e5(_0x1f2111,_0x2059c2,_0x4cb05e,_0x59e092){return _0x23acc6(_0x2059c2- -0x83,_0x1f2111,_0x4cb05e-0x11d,_0x59e092-0x4b);}function _0x4f026e(_0x33b177,_0x45d8f5,_0x3e60f2,_0x4f9a86){return _0x45e903(_0x33b177-0x42,_0x4f9a86,_0x3e60f2-0x4c,_0x33b177-0x47);}if(_0x2445e7[_0x4f026e(0x426,0x439,0x394,0x452)](_0x2445e7['RNdnt'],_0x2445e7[_0x4f026e(0x4f7,0x432,0x57e,0x5a1)])){if(_0x2445e7[_0x4f026e(0x426,0x48f,0x4ad,0x3ae)](_0x3a40e0['id'],_0x215965))return;eventSource[_0x2333e5(0x339,0x31e,0x2b6,0x2fe)+'ener'](eventNames[_0x2333e5(0x230,0x27d,0x2cd,0x2aa)+_0x2333e5(0x2a7,0x1e8,0x243,0x181)+'PROMPT_RES'+_0x4f026e(0x4e8,0x4bb,0x429,0x47a)],_0x558b56),_0x2445e7[_0x2333e5(0x342,0x2be,0x361,0x2dc)](_0x4698c6,_0x3a40e0['prompt']);}else return _0x3191f9[_0x2333e5(0x2aa,0x2b2,0x366,0x270)]();};eventSource['on'](eventNames[_0x45e903(0x396,0x4f9,0x3cc,0x445)+'ODIFY_GET_'+'PROMPT_RES'+'PONSE'],_0x558b56);const _0x346be5={};_0x346be5['id']=_0x215965,eventSource[_0x23acc6(0x3bd,0x375,0x3ae,0x3b3)](eventNames[_0x23acc6(0x300,0x317,0x246,0x2b3)+_0x45e903(0x404,0x43d,0x354,0x3b0)+'PROMPT_REQ'+_0x45e903(0x432,0x55e,0x563,0x49b)],_0x346be5),_0x440293[_0x23acc6(0x320,0x33a,0x3db,0x345)](setTimeout,()=>{function _0x19489f(_0x5477f1,_0x414af6,_0xad7171,_0x3f4b41){return _0x23acc6(_0xad7171- -0x36c,_0x3f4b41,_0xad7171-0x88,_0x3f4b41-0x1e0);}function _0x418d90(_0x3ec572,_0x34f581,_0x10ab9c,_0xd6807f){return _0x23acc6(_0x10ab9c- -0xf9,_0xd6807f,_0x10ab9c-0x12d,_0xd6807f-0x1a);}_0x2445e7[_0x418d90(0x22c,0x171,0x225,0x25a)](_0x19489f(0x1e,-0x83,0x25,0xe6),_0x2445e7['klgYU'])?_0x303acb['push'](_0x39b8c9):(eventSource['removeList'+_0x19489f(-0xd2,-0x8b,-0x93,-0x16a)](eventNames['LLM_CHAR_M'+_0x418d90(0x209,0x115,0x172,0x1ea)+_0x19489f(0x1b,0x2e,0x65,-0xc)+_0x19489f(-0xd0,0x69,-0x10,0x7f)],_0x558b56),_0x2445e7[_0x19489f(0x80,-0x9b,-0x2b,-0x3b)](_0x3272c0,new Error(_0x2445e7['sdUtC'])));},0x312e+-0x480b+0x3ded);}});}export function LLM_CHAR_MODIFY(_0x2ce867,_0x298fca={}){const _0x5487d2={'jrPzO':function(_0x2eb4a2,_0xc0b653){return _0x2eb4a2!==_0xc0b653;},'sYrMS':'xuspU','UDjvN':function(_0x4ed312,_0x4ea70f){return _0x4ed312(_0x4ea70f);},'ZKWXw':function(_0x2b031c){return _0x2b031c();},'lDHKg':_0x5740ad(0x3c,-0x58,0x5c,0xce)+_0x4fcc8d(0x526,0x4d7,0x472,0x437),'HvLYa':function(_0x518b6d,_0x53fd19,_0x5ab766,_0x2a9140,_0x336750){return _0x518b6d(_0x53fd19,_0x5ab766,_0x2a9140,_0x336750);},'kZUUN':_0x4fcc8d(0x3b3,0x4a3,0x484,0x4e1),'JrsQH':function(_0x29b187){return _0x29b187();},'BZBNd':function(_0x375eee,_0x864ba6,_0x42c754){return _0x375eee(_0x864ba6,_0x42c754);}};function _0x5740ad(_0x3e3607,_0x28d994,_0x9dbf04,_0x206fd6){return _0x3b86(_0x9dbf04- -0x241,_0x28d994);}function _0x4fcc8d(_0x18b4f5,_0x2a5427,_0x3c1a9b,_0x3fbff2){return _0x3b86(_0x3c1a9b-0x271,_0x18b4f5);}return new Promise((_0x5edaca,_0x20dccd)=>{const _0x28fc09={'VPyJK':function(_0xbf0ed3,_0x24b8d3){function _0x2c136b(_0x36702e,_0x1dae66,_0x309296,_0x22ce26){return _0x3b86(_0x22ce26-0x110,_0x36702e);}return _0x5487d2[_0x2c136b(0x393,0x33e,0x264,0x332)](_0xbf0ed3,_0x24b8d3);},'uqeGf':function(_0x16b28b,_0x11b1a2,_0x38d3b8,_0x311b01,_0x2127fd){function _0x5830eb(_0x4d4bf0,_0x23327b,_0xc2abd,_0xa54fba){return _0x3b86(_0x23327b- -0x215,_0xa54fba);}return _0x5487d2[_0x5830eb(0x2f,0xbf,0xbd,0x193)](_0x16b28b,_0x11b1a2,_0x38d3b8,_0x311b01,_0x2127fd);},'FHDxD':function(_0x3abd27,_0x3c4c9f){function _0x5a1afb(_0x4191bf,_0x15d712,_0x17c057,_0x399ab0){return _0x3b86(_0x15d712- -0x2e5,_0x17c057);}return _0x5487d2[_0x5a1afb(-0x172,-0xc3,-0xd1,-0x115)](_0x3abd27,_0x3c4c9f);},'rLUAD':function(_0x2f2ddf){function _0x4ed778(_0x242cbd,_0x15b7dc,_0x5bb14f,_0x5b6379){return _0x3b86(_0x5bb14f-0x194,_0x242cbd);}return _0x5487d2[_0x4ed778(0x50e,0x50d,0x4b7,0x42b)](_0x2f2ddf);},'xggIP':function(_0x96a870,_0x21f70d){return _0x96a870===_0x21f70d;},'lIceV':_0x5487d2[_0x21da3e(0x105,0xf0,0x7e,0xf4)],'GNNEo':function(_0x33c0bb,_0xdb618d){return _0x33c0bb(_0xdb618d);}},_0x1f6470=_0x5487d2[_0x21da3e(-0x48,-0x6b,0x1,0x3a)](generateRequestId),_0x123224=_0x298fca['timeoutMs']||0x3f4c+0x1833c+-0xd828;let _0x548f2c=null;console['log'](_0x445deb(0x303,0x374,0x259,0x35c)+_0x21da3e(0x92,0x118,0xae,0x160)+'fy]\x20Execut'+_0x21da3e(0xb8,0x106,0x2e,0x30)+_0x445deb(0x1d3,0x173,0x13c,0x1c0)+_0x21da3e(0x93,0x5d,-0x19,0x9f)+_0x445deb(0x1a8,0x215,0x217,0x1f6)+_0x1f6470+')');const _0x3e8bce=()=>{function _0x17b415(_0x3c5ec9,_0x10446b,_0x30e521,_0x3ec527){return _0x21da3e(_0x3ec527,_0x10446b-0xf6,_0x30e521-0xf8,_0x10446b-0x452);}eventSource[_0x5d9d53(0x48d,0x541,0x509,0x4ef)+'ener'](eventNames[_0x5d9d53(0x47c,0x42f,0x468,0x4c8)+_0x17b415(0x5c3,0x5ab,0x616,0x5e2)+_0x17b415(0x4ea,0x4fd,0x4e6,0x598)],_0xc8301c);function _0x5d9d53(_0x4728e1,_0x56f20c,_0x13dfec,_0x44d7bc){return _0x445deb(_0x13dfec-0x24c,_0x56f20c-0x128,_0x44d7bc,_0x44d7bc-0x34);}_0x548f2c&&(_0x5487d2[_0x17b415(0x470,0x47d,0x3e8,0x3db)](_0x5487d2['sYrMS'],_0x5487d2[_0x17b415(0x4e8,0x4a7,0x4f2,0x436)])?_0x1dd147[_0x374afb]&&_0x28fc09['VPyJK'](_0x158f4f[_0x3b61c7],_0x5627bb[_0x325bae])&&_0x348b32++:(_0x5487d2['UDjvN'](clearTimeout,_0x548f2c),_0x548f2c=null));};function _0x445deb(_0x31809c,_0x2529d9,_0x127cda,_0x8304f4){return _0x5740ad(_0x31809c-0x16c,_0x127cda,_0x31809c-0x202,_0x8304f4-0xec);}const _0xc8301c=_0x592498=>{const _0x1fc674={'bfkbD':function(_0x4a6336,_0x3ffcb4,_0x6c284f,_0x1df063,_0x1c2045){function _0x311688(_0x5dd11f,_0xbe5ee0,_0x327c63,_0x274381){return _0x3b86(_0x327c63- -0x260,_0x274381);}return _0x28fc09[_0x311688(-0xa1,0x26,-0x82,-0x36)](_0x4a6336,_0x3ffcb4,_0x6c284f,_0x1df063,_0x1c2045);}};function _0x22883f(_0x169789,_0x464c4b,_0xdcb254,_0x3af135){return _0x21da3e(_0x169789,_0x464c4b-0xcd,_0xdcb254-0x87,_0x464c4b-0x25e);}if(_0x28fc09[_0x22883f(0x376,0x2d5,0x225,0x358)](_0x592498['id'],_0x1f6470))return;_0x28fc09[_0x22883f(0x398,0x37e,0x390,0x33e)](_0x3e8bce);function _0x1140f2(_0x2beec7,_0x129be3,_0x3d152e,_0x2f9779){return _0x21da3e(_0x129be3,_0x129be3-0x11c,_0x3d152e-0x16c,_0x2f9779-0x39b);}_0x592498[_0x1140f2(0x450,0x4f7,0x3e6,0x493)]?_0x5edaca(_0x592498[_0x1140f2(0x36b,0x39d,0x2f3,0x375)]):_0x28fc09['xggIP'](_0x28fc09[_0x22883f(0x3b6,0x31b,0x39f,0x27b)],_0x28fc09[_0x22883f(0x2f1,0x31b,0x26a,0x270)])?_0x28fc09[_0x1140f2(0x53b,0x4ca,0x452,0x485)](_0x20dccd,new Error(_0x592498[_0x22883f(0x271,0x238,0x1c7,0x20c)]||'LLM\x20请求失败')):_0x236f40[_0x42c50d]=_0x1fc674[_0x1140f2(0x3ad,0x404,0x377,0x3c5)](_0x4d2e9d,_0x38c081[_0x3433c5],_0x559d8e,_0xa5cee8,_0x5cd8ad);};eventSource['on'](eventNames[_0x21da3e(0xf6,0x2,-0x60,0x64)+_0x445deb(0x311,0x2e7,0x341,0x255)+_0x445deb(0x263,0x334,0x1d3,0x1ac)],_0xc8301c);const _0x11911d={};_0x11911d['prompt']=_0x2ce867,_0x11911d['id']=_0x1f6470,eventSource[_0x21da3e(0x147,0x1bb,0x1dd,0x121)](eventNames[_0x445deb(0x21c,0x289,0x1df,0x1d2)+_0x21da3e(0x142,0xa,0x1e,0xb6)+'EST'],_0x11911d);function _0x21da3e(_0x3d6352,_0x2d32c1,_0x1d3d6b,_0x16bb28){return _0x4fcc8d(_0x3d6352,_0x2d32c1-0x124,_0x16bb28- -0x468,_0x16bb28-0x103);}_0x548f2c=_0x5487d2[_0x21da3e(-0x52,0x35,-0x39,-0xc)](setTimeout,()=>{function _0x55b3db(_0xbb1ef5,_0x33a661,_0x255c25,_0x5c830e){return _0x21da3e(_0x5c830e,_0x33a661-0x16,_0x255c25-0x9,_0x33a661-0x241);}_0x5487d2[_0x55b3db(0x3b3,0x36d,0x345,0x348)](_0x3e8bce);function _0xcd7c8f(_0x362ff2,_0x371b33,_0x57ccf8,_0x4bf477){return _0x21da3e(_0x4bf477,_0x371b33-0x10,_0x57ccf8-0x77,_0x57ccf8-0x57c);}_0x5487d2[_0xcd7c8f(0x699,0x591,0x658,0x72f)](_0x20dccd,new Error(_0x5487d2[_0xcd7c8f(0x4e4,0x55a,0x5ab,0x5e2)]));},_0x123224);});}function preprocessTagContent(_0x457de6){const _0xb86aa0={};_0xb86aa0[_0x522f68(-0xc9,-0x1e,0xb7,0x7d)]='下半身NSFW背面:';function _0x15e158(_0x15b1b9,_0x3cae88,_0x2e8975,_0x42b9b7){return _0x3b86(_0x3cae88- -0x11c,_0x15b1b9);}function _0x522f68(_0x29ff2e,_0xb0628b,_0x1d372a,_0x5f48f9){return _0x3b86(_0xb0628b- -0x354,_0x5f48f9);}const _0x4a6382=_0xb86aa0;let _0x5577cb=_0x457de6[_0x522f68(-0x18,-0xee,-0x1b3,-0xa2)](/:/g,':')[_0x15e158(0x1ee,0x14a,0xd3,0x1e3)](/,/g,',');return _0x5577cb=_0x5577cb['replace'](/下半身NSWebcam:/g,_0x4a6382[_0x522f68(-0xeb,-0x1e,-0x56,-0x48)]),_0x5577cb=_0x5577cb[_0x522f68(-0x163,-0xee,-0x18b,-0x19c)](/下半身NSFW_背面:/g,_0x4a6382[_0x522f68(0x63,-0x1e,-0xc0,0x69)]),_0x5577cb=_0x5577cb[_0x522f68(-0x126,-0xee,-0x109,-0xe1)](/上半身NSFW_背面:/g,_0x522f68(-0x11a,-0xd1,-0xb7,-0x114)),_0x5577cb;}function parseCharacterData(_0x44df07){const _0x5de1d5={'eWqhr':function(_0x38fba9){return _0x38fba9();},'AOkmT':function(_0xf25b2f,_0xd76cd2){return _0xf25b2f(_0xd76cd2);},'ixMZl':_0x168016(0x185,0xe6,0x121,0x166),'WgSbu':_0x38b02a(0x3ba,0x218,0x2dd,0x2ef),'QTmMN':_0x168016(0xcc,0x243,0xd7,0x196)+'ures','CTqht':_0x168016(0x285,0x2e2,0x33f,0x27f)+_0x38b02a(0x24d,0x344,0x363,0x2bd),'fSTOv':_0x168016(0x330,0x340,0x231,0x2c7)+'W','cavYd':_0x168016(0x278,0x385,0x361,0x2c7)+_0x38b02a(0x1b5,0x268,0x2d5,0x22a),'cfWjR':_0x168016(0x2e5,0x24f,0x283,0x261)+_0x168016(0x165,0x14b,0x20d,0x1ab),'zkRVB':_0x168016(0x24c,0x2c8,0x310,0x261)+_0x38b02a(0x22c,0x129,0x1d3,0x1a9),'ZFKJT':'fullBodyNS'+'FW','iXbwq':'fullBodyNS'+'FWBack','NzzEj':function(_0x52f617,_0x52b9bc){return _0x52f617!==_0x52b9bc;},'lDACa':_0x168016(0x222,0x229,0x22b,0x15d),'AMnbL':'odAED','rpUCu':function(_0x3d5f31,_0x3dd316){return _0x3d5f31===_0x3dd316;},'sZIFF':function(_0x498ed1,_0x183a98){return _0x498ed1+_0x183a98;},'cTIot':function(_0x48d041,_0x13f6ce){return _0x48d041&&_0x13f6ce;},'skhkO':_0x38b02a(0x38f,0x3a5,0x34b,0x2d4)+_0x168016(0x25d,0x3ac,0x37e,0x2d8)+_0x168016(0x2ec,0x2cb,0x204,0x27e)+_0x168016(0x1b7,0x25e,0x288,0x1e5)},_0x3b42eb=_0x44df07[_0x38b02a(0x16d,0x244,0x1a4,0x1ad)]('\x0a')[_0x168016(0x14f,0x23d,0x136,0x18b)](_0x262754=>_0x262754[_0x38b02a(0x2aa,0x306,0x2fa,0x285)]())[_0x38b02a(0x138,0x190,0x15c,0x19a)](_0xc5e999=>_0xc5e999),_0x8c7168={};_0x8c7168['nameCN']='',_0x8c7168[_0x38b02a(0x2d5,0x2e2,0x217,0x2ef)]='',_0x8c7168[_0x38b02a(0x187,0x1c3,0x189,0x241)+_0x38b02a(0x1a6,0x20c,0x154,0x1af)]='',_0x8c7168[_0x38b02a(0x1b8,0x262,0x12f,0x1a7)+_0x38b02a(0x155,0x204,0x258,0x182)]='',_0x8c7168[_0x38b02a(0x1e4,0x27a,0x223,0x1a7)+_0x168016(0x19c,0x243,0x181,0x1df)]='',_0x8c7168[_0x38b02a(0x2e8,0x207,0x1f9,0x290)+'FW']='',_0x8c7168[_0x38b02a(0x300,0x2fc,0x1e0,0x290)+_0x168016(0x36a,0x36d,0x35c,0x2ac)]='',_0x8c7168['fullBodySF'+'W']='',_0x8c7168[_0x168016(0x29e,0x34c,0x32f,0x2c7)+_0x38b02a(0x29d,0x2c6,0x1a1,0x22a)]='';function _0x38b02a(_0x261fc0,_0x1d7ae3,_0x458f56,_0x5585e3){return _0x3b86(_0x5585e3- -0x6e,_0x1d7ae3);}_0x8c7168['upperBodyN'+_0x168016(0x1bf,0x25e,0x250,0x1ab)]='',_0x8c7168[_0x168016(0x265,0x198,0x2ca,0x261)+_0x168016(0x239,0x134,0x125,0x198)]='',_0x8c7168[_0x168016(0x82,0x75,0x129,0x148)+'FW']='',_0x8c7168['fullBodyNS'+_0x38b02a(0x328,0x231,0x1f5,0x2bd)]='';const _0x224129=_0x8c7168,_0x24ebce={};_0x24ebce[_0x168016(0x30b,0x307,0x2e8,0x2cf)]=_0x5de1d5['ixMZl'],_0x24ebce[_0x168016(0x201,0xcd,0x19c,0x13c)]=_0x5de1d5['WgSbu'],_0x24ebce['角色特征']=_0x168016(0x20d,0x243,0x161,0x230)+_0x38b02a(0x1a5,0x155,0x12c,0x1af),_0x24ebce['五官外貌']=_0x5de1d5[_0x168016(0x2f0,0x275,0x20f,0x2cd)],_0x24ebce['五官外貌背面']='facialFeat'+'uresBack',_0x24ebce[_0x168016(0x1f5,0x249,0x1cf,0x1ff)]=_0x38b02a(0x2f2,0x26f,0x25d,0x290)+'FW',_0x24ebce[_0x38b02a(0x23a,0x27e,0x19a,0x1f7)]=_0x5de1d5[_0x38b02a(0x1ef,0x212,0x1ec,0x184)],_0x24ebce[_0x168016(0x163,0xf6,0x107,0x13f)]=_0x5de1d5[_0x38b02a(0x16a,0x1a9,0x200,0x15b)],_0x24ebce['下半身SFW背面']=_0x5de1d5[_0x38b02a(0x1b9,0x1e7,0x1f1,0x212)];function _0x168016(_0x44ec98,_0x53eebc,_0x2a452d,_0x175c8f){return _0x3b86(_0x175c8f- -0x7f,_0x53eebc);}_0x24ebce[_0x38b02a(0x398,0x2f8,0x278,0x2dc)]=_0x5de1d5[_0x38b02a(0x2a4,0x309,0x23e,0x270)],_0x24ebce[_0x168016(0x26b,0x23d,0x197,0x1e0)]=_0x5de1d5[_0x168016(0x2c8,0x23e,0x203,0x289)],_0x24ebce[_0x168016(0x29d,0x1a3,0x259,0x1e2)]=_0x5de1d5[_0x38b02a(0x304,0x1ff,0x2a1,0x237)],_0x24ebce[_0x38b02a(0x12a,0x294,0x1fc,0x1d7)]=_0x5de1d5[_0x38b02a(0x2a6,0x335,0x33e,0x278)];const _0x2b54ee=_0x24ebce;for(const _0x593cb6 of _0x3b42eb){if(_0x5de1d5['NzzEj'](_0x5de1d5[_0x38b02a(0x20c,0x21f,0x1bd,0x208)],_0x5de1d5[_0x38b02a(0x225,0x146,0x170,0x155)])){const _0x345901=_0x593cb6[_0x168016(0x1ee,0x2c1,0x302,0x273)](':');if(_0x5de1d5[_0x38b02a(0x1fa,0x10c,0x1c0,0x14a)](_0x345901,-(0x186a+0x1146+-0x29af*0x1)))continue;const _0x174611=_0x593cb6[_0x168016(0x222,0x196,0x1fc,0x1cf)](-0x87+-0x1*0xe75+-0x89*-0x1c,_0x345901)[_0x38b02a(0x32f,0x1d4,0x2ca,0x285)](),_0x56829e=_0x593cb6[_0x38b02a(0x1a0,0x214,0x1dc,0x1e0)](_0x5de1d5['sZIFF'](_0x345901,-0x9a7+-0x1451+0x1df9))[_0x38b02a(0x342,0x1b6,0x2cd,0x285)]();if(_0x2b54ee[_0x174611])_0x224129[_0x2b54ee[_0x174611]]=_0x56829e;else _0x5de1d5[_0x168016(0x193,0x10d,0x108,0x1be)](_0x174611,_0x56829e)&&console[_0x38b02a(0x23f,0x24b,0x1ff,0x219)](_0x38b02a(0x366,0x25d,0x219,0x2d4)+_0x168016(0x393,0x393,0x326,0x2d8)+_0x38b02a(0x260,0x2e4,0x2c8,0x29e)+_0x38b02a(0x199,0x15d,0x2b8,0x211)+_0x174611+'\x22');}else _0x5de1d5[_0x38b02a(0x2f3,0x318,0x305,0x2c2)](_0x424653),_0x5de1d5[_0x38b02a(0x30d,0x342,0x334,0x2ac)](_0x4a18e1,new _0x30ef7b(_0x168016(0x17f,0x2f3,0x149,0x21e)+'求超时'));}if(!_0x224129['nameCN'])return null;return console[_0x168016(0x169,0x26b,0x28f,0x208)](_0x5de1d5[_0x168016(0x1a7,0x209,0x273,0x1e9)],_0x224129),_0x224129;}function parseOutfitData(_0xbfe0a9){const _0x3e3335={};_0x3e3335['ugSRJ']=_0x3b07e9(0x1b1,0x1ee,0xd6,0x17c),_0x3e3335[_0x3b07e9(0x37c,0x36e,0x209,0x2a4)]='nameEN',_0x3e3335[_0x403b9d(0x5b2,0x6d7,0x58a,0x653)]=_0x3b07e9(0x349,0x32b,0x261,0x2a3),_0x3e3335['QCqZJ']=_0x403b9d(0x627,0x6f6,0x6f6,0x6ec)+_0x3b07e9(0x224,0xeb,0x181,0x1a4),_0x3e3335[_0x3b07e9(0x1e7,0x2d7,0x2a0,0x210)]=_0x403b9d(0x659,0x58b,0x709,0x642)+'ck',_0x3e3335[_0x3b07e9(0x27b,0x235,0x22b,0x23f)]=function(_0x4f3cd6,_0x1e22f0){return _0x4f3cd6===_0x1e22f0;},_0x3e3335['qhgDw']=function(_0x59a603,_0x3e723f){return _0x59a603+_0x3e723f;},_0x3e3335[_0x3b07e9(0x251,0x18e,0x2a6,0x265)]=function(_0x1329ef,_0x1fc6ad){return _0x1329ef&&_0x1fc6ad;},_0x3e3335[_0x3b07e9(0x1ce,0x1d9,0x311,0x244)]=_0x403b9d(0x73d,0x6ce,0x6bc,0x6f6)+_0x3b07e9(0x22e,0x2fa,0x265,0x2dd)+'fy]\x20解析到的服装'+_0x3b07e9(0x1a8,0x184,0x263,0x1ea);const _0x19a22f=_0x3e3335,_0x47e680=_0xbfe0a9['split']('\x0a')[_0x403b9d(0x67f,0x62b,0x60b,0x5be)](_0x124f3a=>_0x124f3a[_0x3b07e9(0x25e,0x25d,0x2df,0x279)]())['filter'](_0x1d4407=>_0x1d4407),_0x36a36e={};_0x36a36e['nameCN']='',_0x36a36e[_0x3b07e9(0x2a9,0x308,0x366,0x2e3)]='',_0x36a36e['owner']='';function _0x403b9d(_0x48481d,_0x4c3262,_0x59893a,_0x4c0562){return _0x3b86(_0x4c0562-0x3b4,_0x59893a);}_0x36a36e[_0x3b07e9(0x344,0x290,0x249,0x2a3)]='',_0x36a36e[_0x403b9d(0x718,0x699,0x6d1,0x6ec)+_0x3b07e9(0x1cd,0x1d8,0x156,0x1a4)]='',_0x36a36e['fullBody']='',_0x36a36e['fullBodyBa'+'ck']='';const _0x1d25f2=_0x36a36e,_0x349587={};_0x349587[_0x3b07e9(0x234,0x1aa,0x1fc,0x1cf)]=_0x19a22f[_0x403b9d(0x4c8,0x56f,0x557,0x58c)];function _0x3b07e9(_0x5b4400,_0x322e19,_0x5b3947,_0x4044a8){return _0x3b86(_0x4044a8- -0x7a,_0x322e19);}_0x349587[_0x3b07e9(0x2c1,0x388,0x348,0x2d4)]='nameCN',_0x349587['英文名称']=_0x19a22f['mLuCr'],_0x349587[_0x3b07e9(0x2a3,0x316,0x2b3,0x29f)]=_0x19a22f[_0x3b07e9(0x295,0x2b8,0x233,0x225)],_0x349587[_0x403b9d(0x75a,0x6fc,0x6a7,0x6e5)]=_0x19a22f[_0x403b9d(0x6f0,0x5e6,0x603,0x647)],_0x349587['下半身']=_0x403b9d(0x6df,0x6f6,0x689,0x6d4),_0x349587[_0x3b07e9(0x1d0,0x2a1,0x2ac,0x21f)]=_0x19a22f[_0x403b9d(0x5fd,0x608,0x6d3,0x63e)];const _0x44fecf=_0x349587;for(const _0x52aef8 of _0x47e680){const _0x2f73d2=_0x52aef8[_0x3b07e9(0x1a7,0x2df,0x286,0x278)](':');if(_0x19a22f[_0x3b07e9(0x1d9,0x30a,0x307,0x23f)](_0x2f73d2,-(-0x7*0x223+0x2*-0x1277+0x33e4)))continue;const _0x2ad54b=_0x52aef8[_0x403b9d(0x64b,0x647,0x5ee,0x602)](0xa*0x31f+0xb3e*0x3+-0x40f0,_0x2f73d2)[_0x3b07e9(0x278,0x1a4,0x1d1,0x279)](),_0x576596=_0x52aef8['substring'](_0x19a22f[_0x403b9d(0x62b,0x564,0x693,0x5e2)](_0x2f73d2,-0x2014+0x4*0x9b+0x1da9))[_0x403b9d(0x63b,0x6d5,0x761,0x6a7)]();if(_0x44fecf[_0x2ad54b])_0x1d25f2[_0x44fecf[_0x2ad54b]]=_0x576596;else _0x19a22f['JEDen'](_0x2ad54b,_0x576596)&&console['log']('[character'+_0x403b9d(0x77d,0x7a7,0x767,0x70b)+_0x3b07e9(0x219,0x309,0x214,0x26d)+_0x403b9d(0x5c0,0x57d,0x600,0x633)+_0x2ad54b+'\x22');}if(!_0x1d25f2[_0x403b9d(0x546,0x5d7,0x580,0x599)])return null;return console[_0x403b9d(0x654,0x644,0x6fe,0x63b)](_0x19a22f[_0x3b07e9(0x1a5,0x250,0x28d,0x244)],_0x1d25f2),_0x1d25f2;}function extractCharacterAndOutfitTags(_0x1bac2e){const _0x4dd285={'xlRlE':function(_0x41ba4c,_0x59c243){return _0x41ba4c!==_0x59c243;},'rNGrx':function(_0x1bcd99,_0x484ea5){return _0x1bcd99===_0x484ea5;},'GMjkC':_0x183450(0x12a,0x1bf,0x67,0x80),'HnZpD':function(_0x4fa834,_0x53f9fa){return _0x4fa834===_0x53f9fa;},'pAEnA':function(_0x17d7e9,_0x32c6f8){return _0x17d7e9(_0x32c6f8);},'suirh':'fczmr','VFLRf':_0x183450(0x120,0xc3,0x84,0x1cb),'FiaSf':_0x183450(0xc0,0x159,0x51,0x126),'vcRyd':_0x183450(0xbd,0x160,0xec,0xa3)},_0x54daf1=[];_0x1bac2e=_0x1bac2e['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x183450(0xcb,0x115,0xb2,0xae)]();function _0x183450(_0x281b11,_0xc63ca4,_0x41131b,_0x81bec){return _0x3b86(_0x281b11- -0x228,_0x41131b);}const _0x16cb99=/<(人物|服装)>([\s\S]*?)<\/\1>/g;let _0x15f953;while(_0x4dd285[_0x4cec17(0x6a0,0x76e,0x6c1,0x66d)](_0x15f953=_0x16cb99[_0x4cec17(0x6dd,0x640,0x773,0x71c)](_0x1bac2e),null)){if(_0x4dd285[_0x4cec17(0x6b0,0x785,0x620,0x673)](_0x4dd285[_0x183450(0xd1,0x17b,0x20,0x62)],_0x4dd285[_0x183450(0xd1,0xc8,0x18,0x62)])){const _0x42c3e3=_0x15f953[-0x63f+-0x15*-0x1cd+-0x1f91],_0x1fd785=preprocessTagContent(_0x15f953[0xdf*0x29+-0x3*-0x3b7+-0x2eda]),_0x7e8935=_0x15f953[_0x4cec17(0x5ee,0x5a7,0x6c6,0x6ac)];if(_0x4dd285[_0x4cec17(0x73e,0x7ec,0x7a3,0x77b)](_0x42c3e3,'人物')){const _0x3fb7ff=_0x4dd285[_0x4cec17(0x725,0x704,0x74b,0x69a)](parseCharacterData,_0x1fd785);if(_0x3fb7ff){if(_0x4dd285[_0x183450(0xa3,0x168,0x64,0x119)](_0x4cec17(0x641,0x657,0x623,0x5c3),_0x4dd285[_0x183450(-0x54,-0xc9,-0xeb,-0x1a)]))return null;else{const _0x383b8e={};_0x383b8e[_0x183450(-0x67,-0x56,0x13,0x3a)]=_0x4dd285[_0x183450(0xad,0x18,0xb1,0x147)],_0x383b8e[_0x183450(0x6c,0xf8,-0x29,0x16)]=_0x3fb7ff,_0x383b8e[_0x4cec17(0x6da,0x74e,0x718,0x696)]=_0x7e8935,_0x383b8e[_0x183450(0x86,0xbc,0x25,-0x1d)+_0x4cec17(0x597,0x5c1,0x529,0x5c4)]=[],_0x54daf1[_0x183450(0x44,0xb2,0x2d,-0x35)](_0x383b8e);}}}else{if(_0x42c3e3==='服装'){const _0x71aa36=_0x4dd285['pAEnA'](parseOutfitData,_0x1fd785);if(_0x71aa36){const _0x5b4dd6={};_0x5b4dd6[_0x4cec17(0x5a6,0x4d1,0x5b0,0x539)]=_0x4dd285[_0x183450(-0x17,-0xd2,-0xa1,-0xd6)],_0x5b4dd6[_0x183450(0x6c,0x6b,0xc7,-0xe)]=_0x71aa36,_0x5b4dd6[_0x4cec17(0x6da,0x696,0x642,0x744)]=_0x7e8935,_0x54daf1[_0x4cec17(0x651,0x70a,0x6ad,0x587)](_0x5b4dd6);}}}}else _0x507dad[_0xcf90a3[_0x87cd5f]]=_0x244931;}_0x54daf1['sort']((_0x19824f,_0x3ae13a)=>_0x19824f[_0x183450(0xcd,0x9d,0xc1,0xfa)]-_0x3ae13a[_0x183450(0xcd,0xa4,0xf8,0xd2)]);let _0xd127ac=null;const _0x11617d=[],_0x32a116=[];for(const _0xe32628 of _0x54daf1){if(_0x4dd285['HnZpD'](_0xe32628[_0x4cec17(0x5a6,0x5c4,0x600,0x59b)],_0x4dd285['VFLRf']))_0xd127ac=_0xe32628,_0x11617d[_0x4cec17(0x651,0x5fc,0x70d,0x6b0)](_0xe32628);else _0x4dd285[_0x183450(0x131,0x15c,0x72,0x16f)](_0xe32628[_0x4cec17(0x5a6,0x668,0x590,0x63b)],_0x4dd285[_0x183450(-0x17,-0x48,0x39,-0xa5)])&&(_0xd127ac?_0xd127ac['matchedOut'+'fits'][_0x4cec17(0x651,0x5fb,0x6a1,0x67e)](_0xe32628['data']):_0x4dd285['rNGrx'](_0x4dd285[_0x4cec17(0x5c2,0x646,0x52e,0x54b)],'DsQue')?_0x179c8a=_0x183450(0x83,0x21,0x39,0x11f)+_0x4cec17(0x688,0x673,0x6d5,0x723)+[..._0x49b0eb][_0x183450(-0x9,0x94,-0x2e,0x94)]('、')+'\x0a':_0x32a116[_0x4cec17(0x651,0x60a,0x63d,0x697)](_0xe32628[_0x183450(0x6c,0x13f,0xac,-0xc)]));}function _0x4cec17(_0x494b5b,_0xc44a19,_0x212f5a,_0xafe843){return _0x3b86(_0x494b5b-0x3e5,_0xafe843);}return{'characters':_0x11617d[_0x4cec17(0x5ef,0x51a,0x659,0x698)](_0x43a66d=>({..._0x43a66d[_0x183450(0x6c,-0x44,0xde,0x45)],'matchedOutfits':_0x43a66d[_0x4cec17(0x693,0x5be,0x6d0,0x656)+_0x4cec17(0x597,0x63f,0x509,0x5f9)]})),'outfits':_0x32a116};}function getCurrentCharacterPreset(){function _0x10c2ac(_0x2ff463,_0x1f14ac,_0x380b35,_0x3656ec){return _0x3b86(_0x1f14ac- -0x2f7,_0x380b35);}const _0x3fac90={};_0x3fac90['ByCzI']=function(_0x4ce099,_0x11ee2e){return _0x4ce099===_0x11ee2e;},_0x3fac90[_0x10c2ac(-0x3f,0x4c,-0x86,0x8f)]=_0x333944(0x33d,0x3aa,0x38b,0x45f);const _0x33537e=_0x3fac90,_0x213b0=extension_settings[extensionName],_0x2bd556=_0x213b0['characterP'+_0x333944(0x2b6,0x354,0x41b,0x36f)];if(!_0x2bd556||!_0x213b0[_0x10c2ac(0x4,-0x20,-0xea,-0x41)+_0x333944(0x34a,0x3e8,0x33d,0x3f6)][_0x2bd556]){if(_0x33537e['ByCzI'](_0x33537e[_0x10c2ac(0x32,0x4c,-0x2e,0x28)],_0x10c2ac(-0x111,-0xdf,-0xd1,-0x129)))_0xc7126f[_0x10c2ac(-0x87,-0x70,-0x7d,-0x3f)]('[character'+'PromptModi'+_0x333944(0x48b,0x4a0,0x528,0x53d)+_0x333944(0x4c5,0x413,0x381,0x470)+_0x20f429+'\x22');else return null;}const _0x12aee9={};_0x12aee9['id']=_0x2bd556,_0x12aee9[_0x10c2ac(-0x5a,-0x63,0x6,0x24)]=_0x213b0['characterP'+_0x333944(0x469,0x3e8,0x427,0x49f)][_0x2bd556];function _0x333944(_0x46d8ae,_0x3e1646,_0x393c67,_0x5324de){return _0x3b86(_0x3e1646-0x194,_0x5324de);}return _0x12aee9;}function buildCharacterText(_0x1b9a30){const _0x128fa9={};_0x128fa9[_0x3fabde(0x13e,0x7e,0x1f,0xd3)]=_0x3f14ca(0x72a,0x670,0x653,0x5d2);function _0x3fabde(_0x3b6381,_0x319ddb,_0x645ca3,_0x1d246a){return _0x3b86(_0x1d246a- -0x209,_0x3b6381);}_0x128fa9[_0x3fabde(0xf3,0xc6,-0x54,0x2a)]='</人物>';const _0xe3184=_0x128fa9,_0x576913=_0x1b9a30['data'];let _0x3aeb24=_0xe3184[_0x3fabde(0x159,0x10e,0x34,0xd3)];_0x3aeb24+='中文名称:\x20'+(_0x576913[_0x3f14ca(0x56d,0x58d,0x5ac,0x542)]||'')+'\x0a',_0x3aeb24+=_0x3f14ca(0x70b,0x710,0x68e,0x5c4)+(_0x576913[_0x3fabde(0x1ed,0x102,0x1dc,0x154)]||'')+'\x0a',_0x3aeb24+='角色特征:\x20'+(_0x576913[_0x3fabde(0x139,0x9e,0x10,0xa6)+_0x3f14ca(0x635,0x658,0x5e4,0x58a)]||'')+'\x0a',_0x3aeb24+=_0x3fabde(-0xa,0x132,0xa6,0xb7)+(_0x576913[_0x3fabde(-0x40,0x6e,0x9f,0xc)+_0x3f14ca(0x5f8,0x59b,0x5b7,0x53d)]||'')+'\x0a',_0x3aeb24+='五官外貌背面:\x20'+(_0x576913[_0x3f14ca(0x5bc,0x67c,0x5dc,0x577)+_0x3fabde(0xb1,0xbe,0x1c,0x55)]||'')+'\x0a',_0x3aeb24+=_0x3fabde(0x190,0xdc,0xb1,0x125)+(_0x576913[_0x3f14ca(0x793,0x64e,0x6c5,0x735)+'FW']||'')+'\x0a',_0x3aeb24+=_0x3fabde(0x32,0x54,0x7a,0x61)+(_0x576913[_0x3f14ca(0x6b7,0x61a,0x6c5,0x692)+_0x3fabde(0x121,0xe3,0x16c,0x122)]||'')+'\x0a',_0x3aeb24+='下半身SFW:\x20'+(_0x576913[_0x3f14ca(0x751,0x68f,0x70d,0x7c0)+'W']||'')+'\x0a';function _0x3f14ca(_0x307353,_0x3248bb,_0x5df538,_0x50d83a){return _0x3b86(_0x5df538-0x3c7,_0x50d83a);}return _0x3aeb24+=_0x3f14ca(0x562,0x536,0x5b4,0x59d)+(_0x576913[_0x3fabde(0xeb,0x6e,0x137,0x13d)+'WBack']||'')+'\x0a',_0x3aeb24+=_0x3f14ca(0x4c6,0x62d,0x578,0x587)+(_0x576913[_0x3fabde(0x2,0x2c,0x173,0xd7)+'SFW']||'')+'\x0a',_0x3aeb24+='上半身NSFW背面:'+'\x20'+(_0x576913[_0x3f14ca(0x6af,0x6b8,0x6a7,0x5e1)+'SFWBack']||'')+'\x0a',_0x3aeb24+=_0x3fabde(-0xf0,-0xc5,-0x31,-0x18)+(_0x576913[_0x3f14ca(0x653,0x52f,0x58e,0x574)+'FW']||'')+'\x0a',_0x3aeb24+=_0x3fabde(-0x1c,-0x20,0xf8,0x74)+'\x20'+(_0x576913[_0x3f14ca(0x64d,0x52f,0x58e,0x4eb)+_0x3f14ca(0x6c5,0x727,0x6f2,0x64b)]||'')+'\x0a',_0x3aeb24+=_0xe3184[_0x3fabde(0x7b,-0x60,-0x9f,0x2a)],_0x3aeb24;}export async function handleCharacterPromptModify(_0x187968,_0x497c76=[]){const _0x98a22e={'QOPDK':function(_0x3573da,_0x5c4c36){return _0x3573da(_0x5c4c36);},'tPegs':_0x2cf55e(0x55,-0x61,0xd9,0x37),'tAbYi':function(_0x3bd855,_0x1959e2){return _0x3bd855(_0x1959e2);},'pMAgd':_0x2cf55e(0x9,0x45,0xa4,-0x9c),'feUWO':_0x30f50e(0x4a3,0x528,0x507,0x578)+'+$','boOpn':function(_0x388917,_0x1734fb){return _0x388917(_0x1734fb);},'VXDwD':function(_0x1387cf,_0x4ef741){return _0x1387cf>_0x4ef741;},'iKDBh':'spnOI','VoIoJ':_0x30f50e(0x517,0x51e,0x48d,0x50d),'dgrux':function(_0x2a4f8b){return _0x2a4f8b();},'itPQU':_0x2cf55e(0x1f,0x3a,0x9a,0xdd),'MPFBV':_0x2cf55e(0x162,0x113,0x16f,0x1a6)+_0x30f50e(0x5a2,0x62e,0x58b,0x5b1)+_0x2cf55e(-0x7,-0x7,0x9e,-0x10)+'context:','bVNgU':_0x30f50e(0x58d,0x5d5,0x4d1,0x523)+'PromptModi'+'fy]\x20Saved\x20'+_0x30f50e(0x52e,0x50e,0x4bc,0x4b2)+':','tSURV':function(_0x25e4b6,_0x528f2c){return _0x25e4b6||_0x528f2c;},'GJnId':function(_0x3be7ab,_0x267002){return _0x3be7ab===_0x267002;},'YfkJA':_0x30f50e(0x503,0x555,0x53b,0x54b),'vodML':function(_0x1badba,_0x5a8ec2){return _0x1badba!==_0x5a8ec2;},'qfaGA':_0x2cf55e(0x114,0x93,0x1b6,0x12b),'hPwXQ':_0x30f50e(0x417,0x42a,0x429,0x3b0),'FuRch':'char_modif'+'y','ncvkm':function(_0x387fc9){return _0x387fc9();},'lOion':'[character'+_0x30f50e(0x5a2,0x55c,0x521,0x5ac)+_0x2cf55e(0xa8,0x124,0x154,0xfa)+'ter\x20list\x20t'+_0x30f50e(0x48f,0x46d,0x430,0x3ba)+_0x30f50e(0x43e,0x509,0x45c,0x3bb),'APxrH':_0x30f50e(0x58d,0x585,0x661,0x5c3)+_0x2cf55e(0x177,0x201,0xdd,0x145)+'fy]\x20合并相邻消息'+'后:','kkMGh':function(_0xa328e0,_0x1bd5f6,_0x370c85){return _0xa328e0(_0x1bd5f6,_0x370c85);},'SQZPc':'{{用户需求}}','VQuXs':_0x30f50e(0x58d,0x5a4,0x57a,0x53d)+_0x30f50e(0x5a2,0x59d,0x538,0x525)+_0x30f50e(0x56d,0x62a,0x5de,0x643)+'equirement'+_0x30f50e(0x4eb,0x5c3,0x508,0x566)+'ndex:','SQFzX':function(_0x2e9379,_0x376639){return _0x2e9379||_0x376639;},'PjrkK':function(_0x5da3f0,_0x30d3b4,_0x17a691,_0x10c7ca,_0x41ccfa){return _0x5da3f0(_0x30d3b4,_0x17a691,_0x10c7ca,_0x41ccfa);},'wcQbj':_0x30f50e(0x58d,0x4ed,0x655,0x55f)+_0x2cf55e(0x177,0x23a,0xab,0x22b)+_0x30f50e(0x54d,0x5e8,0x47b,0x5e7)+_0x2cf55e(-0x27,0xf,0x58,0x51),'VVAIF':function(_0x4c7e53,_0x1f8c46){return _0x4c7e53>_0x1f8c46;},'yQWWT':function(_0x4bf37a,_0x4b1a7a){return _0x4bf37a>=_0x4b1a7a;},'fLFna':'jTUUe','MUXWF':_0x30f50e(0x4ad,0x4fa,0x3f9,0x431),'fYnzw':'[character'+'PromptModi'+'fy]\x20Attach'+'ed','Avsxl':_0x2cf55e(0x79,-0x3c,0x103,0xc2)+_0x30f50e(0x452,0x529,0x48c,0x4cf)+_0x30f50e(0x47d,0x4c0,0x48b,0x3de),'ztRZx':function(_0x421eaf,_0x61d81f,_0x11fd5e){return _0x421eaf(_0x61d81f,_0x11fd5e);},'LuhTg':_0x2cf55e(0x162,0x10e,0xe6,0xdc)+_0x2cf55e(0x177,0x149,0x1a1,0x10a)+'fy]\x20LLM\x20ou'+_0x2cf55e(0x56,0x11,0x10b,0x125),'CFIlI':function(_0x471833,_0x52c88c){return _0x471833===_0x52c88c;},'ySPNL':_0x2cf55e(0x24,0x6a,0xf9,-0xb),'HHFOO':function(_0x11200f,_0x5560ab){return _0x11200f(_0x5560ab);},'aTXHD':_0x30f50e(0x46b,0x4b1,0x440,0x489)+_0x2cf55e(-0x10,0xa,-0x25,-0xc8),'fIQyb':_0x2cf55e(0x162,0x8a,0x13d,0x1a7)+_0x30f50e(0x5a2,0x657,0x59a,0x547)+_0x2cf55e(0x57,0xe4,0x32,0xaf)+_0x2cf55e(0x89,0x47,0x2b,-0xf)+_0x30f50e(0x4bf,0x44a,0x499,0x48f)+_0x30f50e(0x4f3,0x4a5,0x5a9,0x518)+'tput','qzywP':_0x2cf55e(0x162,0x157,0x222,0x199)+_0x2cf55e(0x177,0x1af,0x1b2,0xfc)+'fy]\x20Extrac'+_0x30f50e(0x59a,0x50c,0x590,0x587),'gNbgy':function(_0x53f0de,_0x270000,_0xdb91eb){return _0x53f0de(_0x270000,_0xdb91eb);},'nDwJu':function(_0x54cd9b,_0x3fd6a1){return _0x54cd9b>_0x3fd6a1;},'etAZc':_0x30f50e(0x42e,0x502,0x374,0x364),'FJgOE':_0x2cf55e(0xd5,0x6,0xb5,0x100),'kZUgs':function(_0x2d92ab,_0x4bb5db){return _0x2d92ab>_0x4bb5db;},'gpSDC':_0x30f50e(0x589,0x4e0,0x656,0x527),'Yibdf':_0x30f50e(0x446,0x494,0x458,0x4ac)+'完成！','KPcIJ':'[character'+_0x2cf55e(0x177,0x214,0x18d,0x1eb)+'fy]\x20Error:'};function _0x30f50e(_0x168520,_0x33fa35,_0x3b0c86,_0xe13c0){return _0x3b86(_0x168520-0x24b,_0xe13c0);}console['log'](_0x30f50e(0x58d,0x5e7,0x4da,0x5f3)+_0x30f50e(0x5a2,0x5a9,0x581,0x658)+_0x2cf55e(0x165,0xe1,0xe7,0x160)+'ng\x20charact'+_0x30f50e(0x57e,0x518,0x62c,0x5c6)+_0x2cf55e(0xba,0x4,0x2e,-0x10)+_0x30f50e(0x4fb,0x4d0,0x4ee,0x4be));function _0x2cf55e(_0x215171,_0x2950b1,_0x3997ca,_0x19303f){return _0x3b86(_0x215171- -0x1e0,_0x19303f);}toastr[_0x2cf55e(0x171,0x1a0,0x9d,0x189)](_0x30f50e(0x58d,0x4ef,0x59b,0x517)+_0x2cf55e(0x177,0x1de,0x245,0x144)+_0x30f50e(0x4c3,0x4db,0x482,0x4d7)+_0x30f50e(0x4ae,0x47a,0x430,0x4fd));try{if(_0x98a22e[_0x2cf55e(0xc9,0x61,0x9e,0x157)]!==_0x98a22e[_0x30f50e(0x40d,0x463,0x3f7,0x369)]){const _0x2307dc=_0x98a22e[_0x2cf55e(0xcc,0x6,0x2f,0xcf)](getContext),_0x2f6a16=extension_settings[extensionName],_0xe06bdc=getCurrentCharacterPreset();if(!_0xe06bdc){toastr[_0x30f50e(0x42b,0x463,0x489,0x478)](_0x98a22e[_0x30f50e(0x46f,0x538,0x47e,0x4e6)]);return;}console[_0x2cf55e(0xa7,0x17a,0xe7,0x87)](_0x2cf55e(0x162,0xfb,0x138,0x12c)+_0x2cf55e(0x177,0xd6,0x237,0x1a6)+_0x2cf55e(0x12a,0x158,0x1bd,0x6d)+_0x2cf55e(0x5f,0x25,-0x1e,0xfb),_0xe06bdc['id']);const _0x28ceaf=_0xe06bdc[_0x2cf55e(0xb4,0x85,0x4f,0x73)]['generation'+'Context']||'',_0x5602df=_0xe06bdc[_0x2cf55e(0xb4,0x158,0x5e,-0x14)][_0x30f50e(0x431,0x36e,0x4b2,0x445)+_0x30f50e(0x4bc,0x416,0x417,0x494)]||'',_0x343ab8=_0xe06bdc[_0x30f50e(0x4df,0x444,0x514,0x41f)]['generation'+'Variables']||{};console[_0x2cf55e(0xa7,0xcf,0xd7,0x138)](_0x98a22e[_0x2cf55e(-0x1,-0x15,-0x44,-0x4f)],_0x28ceaf),console['log'](_0x98a22e[_0x2cf55e(0xd2,0xf3,0xc5,0x3e)],_0x5602df),console[_0x30f50e(0x4d2,0x459,0x46f,0x4f1)](_0x30f50e(0x58d,0x58a,0x5f5,0x511)+_0x30f50e(0x5a2,0x4d6,0x669,0x4e1)+_0x30f50e(0x424,0x47a,0x350,0x39c)+_0x2cf55e(0x147,0x140,0x13f,0x134),_0x343ab8);const _0x1fbe5e=_0x98a22e['tSURV'](_0x187968,''),_0x5eec8b=[];_0x187968&&(_0x98a22e[_0x2cf55e(0x4c,0xf7,0xe6,0xe2)](_0x98a22e[_0x30f50e(0x48c,0x4a7,0x3f3,0x401)],_0x2cf55e(0xf1,0x1b5,0x142,0x17c))?(_0x98a22e[_0x2cf55e(-0xd,-0x7e,0x7a,-0x61)](_0x3f6c74,_0x5b1a57),_0x4a300e=null):_0x5eec8b[_0x2cf55e(0x8c,-0x35,0x149,0x1b)](_0x187968));if(_0x28ceaf){if(_0x98a22e['vodML'](_0x2cf55e(0x126,0x126,0x1da,0x10d),_0x98a22e[_0x2cf55e(0xfd,0x1be,0x6a,0x1ad)]))_0x5eec8b[_0x2cf55e(0x8c,-0xe,0x161,0x12a)](_0x28ceaf);else{const _0x299243={};_0x299243[_0x2cf55e(-0x1f,-0xac,0xa7,0x10)]=_0x98a22e[_0x2cf55e(0x159,0x1e5,0x17b,0x162)],_0x299243[_0x2cf55e(0x55,0x12,0x104,0x8f)]=_0x30f50e(0x45a,0x3cb,0x43d,0x52e)+_0x1fa750[_0x30f50e(0x556,0x55e,0x5d1,0x586)]+'张'+_0x3d0009+']',_0x446aa3[_0x30f50e(0x4b7,0x569,0x51b,0x40b)](_0x299243);}}_0x5602df&&(_0x98a22e[_0x2cf55e(0x4c,0x2f,0xed,0x9)](_0x2cf55e(-0x14,-0xb8,0xf,-0x5a),_0x98a22e['hPwXQ'])?_0x5eec8b[_0x30f50e(0x4b7,0x405,0x3ee,0x491)](_0x5602df):_0x98a22e['tAbYi'](_0x174fe4,new _0x1becce(_0x1ca42d['result']||_0x98a22e['pMAgd'])));const _0x29dca7=_0x5eec8b[_0x2cf55e(0x3f,0x2e,0xdd,0x110)]('\x0a');console[_0x30f50e(0x4d2,0x4f4,0x456,0x45b)](_0x2cf55e(0x162,0x18e,0x19b,0x232)+'PromptModi'+'fy]\x20Charac'+_0x30f50e(0x5a7,0x5ab,0x5c4,0x4e4)+_0x2cf55e(0xe8,0x1f,0x110,0xbe),_0x29dca7);let _0x141da8=buildPromptForRequestType(_0x98a22e[_0x30f50e(0x501,0x449,0x552,0x4fd)],_0x1fbe5e);const _0x3f7c77=generateCharacterListText(_0x29dca7),_0x4a21f0=_0x98a22e['ncvkm'](generateOutfitEnableListText),_0x15867e=_0x98a22e['dgrux'](generateCommonCharacterListText);console[_0x30f50e(0x4d2,0x489,0x532,0x57e)](_0x98a22e[_0x30f50e(0x561,0x572,0x5e0,0x497)],_0x3f7c77);const _0x11ef12=_0x2307dc['chatMetada'+'ta']?.[_0x30f50e(0x402,0x4c6,0x469,0x4c7)]||{},_0x581c76=_0x98a22e['tAbYi'](buildCharacterText,_0xe06bdc);_0x141da8=_0x98a22e[_0x30f50e(0x41e,0x4ea,0x48b,0x348)](mergeAdjacentMessages,_0x141da8),console[_0x2cf55e(0xa7,0x115,0x7f,0x38)](_0x98a22e[_0x2cf55e(0xa5,-0x2c,0xad,0x178)],_0x141da8);const _0x3dce68=_0x98a22e[_0x2cf55e(0x23,-0xa,-0xa6,0x3e)](findMessageIndexWithPlaceholder,_0x141da8,_0x98a22e[_0x2cf55e(0xdf,0x63,0x19,0xd3)]);console[_0x30f50e(0x4d2,0x48a,0x4ef,0x49a)](_0x98a22e[_0x30f50e(0x582,0x4ae,0x606,0x583)],_0x3dce68);const _0x2b61df={..._0x343ab8,..._0x11ef12},_0xe3aef1={'context':_0x28ceaf,'worldBookContent':_0x5602df,'variables':_0x2b61df,'userDemand':_0x98a22e[_0x2cf55e(0xa4,0x2,0x59,0x15b)](_0x187968,''),'characterListText':_0x3f7c77,'outfitEnableListText':_0x4a21f0,'commonCharacterListText':_0x15867e},{messages:_0x26e75e,replacedVariables:_0x2c49d8}=_0x98a22e[_0x2cf55e(0x23,0xce,-0x50,0xeb)](replaceAllPlaceholders,_0x141da8,_0xe3aef1);_0x141da8=_0x26e75e,_0x141da8=_0x98a22e['PjrkK'](_0x4cddff,_0x141da8,_0x2cf55e(0x111,0x1a6,0x105,0xea),_0x581c76,_0x2c49d8),console[_0x30f50e(0x4d2,0x443,0x59e,0x475)](_0x98a22e[_0x30f50e(0x444,0x3e0,0x43d,0x394)],_0x141da8);let _0x3972d2='';_0x98a22e[_0x2cf55e(0x5e,0xe,0x89,-0x32)](_0x2c49d8[_0x2cf55e(0x14f,0x148,0x183,0x1ca)],-0xd*-0x11d+-0x1*-0x2701+-0x1*0x357a)&&(_0x3972d2=_0x2cf55e(0xcb,0x9c,0x14f,0x17c)+'被使用：'+[..._0x2c49d8][_0x30f50e(0x46a,0x47e,0x517,0x487)]('、')+'\x0a');if(_0x497c76&&_0x497c76['length']>-0x1b7*0xf+0x1*0x1390+-0x13*-0x53&&_0x98a22e[_0x2cf55e(-0x2c,-0x99,-0x21,-0xfe)](_0x3dce68,-0x3*0x367+0x170e+-0xb*0x12b)){if(_0x98a22e[_0x2cf55e(0x13c,0x160,0x151,0x15c)](_0x98a22e[_0x2cf55e(0xa6,0xa7,0x32,0x136)],_0x98a22e['fLFna']))return _0x1cbd8d['toString']()[_0x30f50e(0x449,0x421,0x3e6,0x506)](rnKKRV[_0x2cf55e(0xda,0x40,0xc9,0x102)])[_0x2cf55e(0xe3,0x126,0x69,0x192)]()[_0x2cf55e(0x17f,0x160,0x11c,0x22f)+'r'](_0x3115eb)[_0x30f50e(0x449,0x3fa,0x475,0x3f3)](rnKKRV[_0x30f50e(0x505,0x58c,0x4d6,0x4b2)]);else _0x141da8=_0x98a22e[_0x30f50e(0x49a,0x547,0x438,0x531)](attachImagesToMessage,_0x141da8,_0x3dce68,_0x497c76,_0x98a22e[_0x2cf55e(0x102,0xbe,0xfe,0xa1)]),console['log'](_0x98a22e[_0x30f50e(0x4f1,0x454,0x50e,0x444)],_0x497c76[_0x30f50e(0x556,0x4fa,0x62e,0x505)],_0x98a22e[_0x30f50e(0x421,0x413,0x4ec,0x47e)],_0x3dce68);}_0x98a22e[_0x2cf55e(0x23,0xa8,-0x5f,-0x67)](updateCombinedPrompt,_0x141da8,_0x3972d2);const _0x54cbff={};_0x54cbff[_0x30f50e(0x50c,0x555,0x456,0x503)]=0x493e0;const _0x264315=await _0x98a22e[_0x30f50e(0x4e2,0x419,0x598,0x40d)](LLM_CHAR_MODIFY,_0x141da8,_0x54cbff);console[_0x30f50e(0x4d2,0x435,0x46b,0x449)](_0x98a22e[_0x2cf55e(0xf2,0x60,0x77,0x1b3)],_0x264315);if(!_0x264315){if(_0x98a22e['CFIlI'](_0x30f50e(0x44f,0x3c9,0x3d8,0x4af),_0x98a22e['ySPNL'])){toastr['error']('LLM\x20返回结果为空');return;}else _0x5362b6[_0x2cf55e(0x8c,0xd8,0xb0,0x146)](..._0x40f8d7[_0x2cf55e(0xce,0x1a3,0x35,0x43)+_0x2cf55e(-0x2e,-0x7b,-0x77,-0x59)]);}const _0x393b56=_0x98a22e['HHFOO'](extractCharacterAndOutfitTags,_0x264315);if(_0x393b56[_0x2cf55e(0x17,-0x93,0x8e,-0x87)]['length']===0x1*0x94d+-0x102e+0x6e1&&_0x98a22e['CFIlI'](_0x393b56[_0x2cf55e(0xbb,0xcd,0x12d,0x95)][_0x30f50e(0x556,0x4fc,0x549,0x4f2)],-0x1f5+0x8f8+-0x703)){toastr[_0x2cf55e(0xe5,0x113,0x16b,0x115)](_0x98a22e[_0x30f50e(0x59e,0x641,0x64d,0x60e)]),console[_0x30f50e(0x4d2,0x58d,0x403,0x577)](_0x98a22e[_0x30f50e(0x5a6,0x5ff,0x531,0x590)]),console[_0x30f50e(0x4d2,0x572,0x52c,0x4c5)]('[character'+_0x2cf55e(0x177,0x1ea,0x18b,0x19f)+'fy]\x20Raw\x20LL'+_0x30f50e(0x55e,0x602,0x5e9,0x622)+_0x30f50e(0x47b,0x54d,0x511,0x3ff)+'ng:',_0x264315);return;}console[_0x2cf55e(0xa7,0x60,0x10a,-0x1b)](_0x98a22e[_0x2cf55e(0x3a,0x2a,-0xe,0x4d)],_0x393b56);if(_0x98a22e['VXDwD'](_0x393b56['characters'][_0x2cf55e(0x12b,0x1e7,0x124,0x1aa)],0xd56+-0xe55+-0xff*-0x1)){const _0x5c1f4f=_0x393b56[_0x2cf55e(0x17,-0x3e,0xab,-0x6e)][-0x2594+-0xaf4+0x3088];await _0x98a22e[_0x30f50e(0x596,0x5e0,0x5ab,0x5f4)](updateCharacterPresetFromLLM,_0xe06bdc['id'],_0x5c1f4f);}const _0x23d127=[..._0x393b56[_0x2cf55e(0xbb,0xf2,0x33,0x152)]];for(const _0x56ab8a of _0x393b56[_0x30f50e(0x442,0x4da,0x3b5,0x3f2)]){_0x56ab8a[_0x30f50e(0x4f9,0x46a,0x4bd,0x42a)+_0x2cf55e(-0x2e,0xf,0x4a,-0x2b)]&&_0x98a22e['nDwJu'](_0x56ab8a[_0x2cf55e(0xce,0x13b,0xcf,0x26)+_0x30f50e(0x3fd,0x41a,0x461,0x366)][_0x30f50e(0x556,0x507,0x4f3,0x52b)],-0x2105+0x347*0x5+-0x2*-0x851)&&(_0x98a22e[_0x2cf55e(0x13c,0x141,0x14e,0x184)](_0x98a22e[_0x2cf55e(0x2c,-0x8f,0x100,0xcc)],_0x98a22e['FJgOE'])?_0x23d127['push'](..._0x56ab8a[_0x30f50e(0x4f9,0x50e,0x4c6,0x4ab)+'fits']):_0x98a22e['boOpn'](_0x37e830,_0x4ef018));}_0x98a22e['kZUgs'](_0x23d127['length'],-0x1f*0x4+-0x9b1*0x1+0xa2d)&&(_0x98a22e[_0x2cf55e(-0x18,0x50,-0x4a,-0xa7)]===_0x98a22e[_0x2cf55e(-0x18,0x7b,-0x44,-0x3)]?await updateOutfitPresetsFromLLM(_0x23d127):_0x32996f[_0x30f50e(0x4f9,0x5ad,0x596,0x597)+_0x2cf55e(-0x2e,0x3d,0x7b,-0x34)]&&_0x98a22e[_0x30f50e(0x451,0x470,0x37b,0x3cd)](_0x302fe3[_0x30f50e(0x4f9,0x443,0x4f8,0x47a)+_0x2cf55e(-0x2e,0xa8,0x56,0x1f)][_0x2cf55e(0x12b,0xbf,0x8a,0x152)],-0xfb*-0x25+0xb*-0x277+-0x33*0x2e)&&_0x30560e['push'](..._0x1a76c0[_0x2cf55e(0xce,0x45,0xe2,0x194)+_0x2cf55e(-0x2e,0x56,0x73,0x23)])),toastr[_0x2cf55e(0x10f,0x66,0x1d5,0x162)](_0x98a22e[_0x2cf55e(0x12e,0x201,0x1c0,0xbc)]);}else _0x149677[_0x1d56ed]&&(_0x3150a9[_0x22cfdd]=_0x52479d[_0x57bca9]);}catch(_0x2e436a){console[_0x30f50e(0x42b,0x46c,0x4d0,0x364)](_0x98a22e[_0x2cf55e(0x97,-0x2e,0x11a,0x8a)],_0x2e436a),toastr[_0x30f50e(0x42b,0x4e4,0x466,0x42f)]('角色提示词修改失败:'+'\x20'+_0x2e436a[_0x2cf55e(0x14,-0x10,0x44,-0x76)]);}}async function updateCharacterPresetFromLLM(_0x5d89ba,_0x585130){const _0x5bc8ab={'aCcos':'找不到指定的角色预设','kILTp':_0x4c9263(0x124,0x1d1,0x14d,0xda),'aRZzY':_0x4a118f(0x205,0x20d,0x131,0x26f),'VEeLq':_0x4c9263(0x194,0x24f,0x206,0x20e),'tdkCJ':_0x4a118f(0x2f4,0x24c,0x228,0x3bd),'AMfLT':_0x4a118f(0x315,0x2bd,0x2da,0x357),'rOEZT':_0x4c9263(0x1c8,0x155,0x130,0x186),'vXrZj':'下半身NSFW','gufKp':_0x4a118f(0x210,0x2a6,0x1c1,0x2ab),'JgmSh':function(_0x4e9da9,_0x4feb50){return _0x4e9da9===_0x4feb50;},'VWmwA':_0x4a118f(0x1ac,0x148,0x107,0x272),'Omdek':function(_0xb055dc,_0x3c84bb){return _0xb055dc!==_0x3c84bb;},'dgAhe':_0x4a118f(0x18a,0x19f,0x186,0x12d)+'内容','NmJQk':function(_0x25e56d,_0x5cb123){return _0x25e56d(_0x5cb123);},'cqtwb':function(_0x5701bc,_0x1f609e){return _0x5701bc===_0x1f609e;},'lnlKa':_0x4a118f(0x17b,0x215,0xa4,0x14b),'PMpdZ':'DmrHr','BedTM':_0x4c9263(0x196,0x19d,0x139,0xd7),'MnsCq':function(_0x3b9b70,_0x472e71){return _0x3b9b70===_0x472e71;},'qwPjp':function(_0x5bb974,_0x32e4de){return _0x5bb974(_0x32e4de);}},_0x53e683=extension_settings[extensionName],_0xf4d7b9=_0x53e683[_0x4c9263(0x240,0x2c9,0x1c9,0x19d)+'resets'][_0x5d89ba];if(!_0xf4d7b9){toastr[_0x4a118f(0x1ab,0x12f,0x207,0x1e8)](_0x5bc8ab['aCcos']);return;}const _0x172caf={};_0x172caf['nameCN']=_0x4c9263(0x2b7,0x388,0x339,0x273),_0x172caf['nameEN']=_0x5bc8ab['kILTp'],_0x172caf[_0x4c9263(0x218,0x1db,0x229,0x1f8)+_0x4a118f(0x1e8,0x159,0x27b,0x130)]=_0x4a118f(0x272,0x207,0x349,0x1b8),_0x172caf[_0x4c9263(0x17e,0x20c,0x239,0x1ec)+_0x4a118f(0x1bb,0x1ba,0x245,0x1f3)]=_0x5bc8ab[_0x4a118f(0x2f1,0x283,0x399,0x240)],_0x172caf[_0x4a118f(0x1e0,0x20e,0x1ab,0x1b6)+_0x4c9263(0x1c7,0x167,0x172,0x133)]=_0x5bc8ab['VEeLq'],_0x172caf[_0x4a118f(0x2c9,0x336,0x261,0x377)+'FW']=_0x4a118f(0x249,0x1e9,0x2ae,0x305),_0x172caf['upperBodyS'+_0x4c9263(0x294,0x224,0x295,0x21a)]=_0x4a118f(0x230,0x28d,0x271,0x25e),_0x172caf[_0x4a118f(0x311,0x3c3,0x37e,0x388)+'W']=_0x4a118f(0x189,0x1b7,0x1da,0xcc),_0x172caf[_0x4a118f(0x311,0x2e2,0x3c1,0x317)+_0x4c9263(0x201,0x2bd,0x254,0x24f)]=_0x5bc8ab[_0x4c9263(0x26e,0x270,0x312,0x1f7)],_0x172caf[_0x4c9263(0x249,0x22a,0x2a0,0x1a5)+_0x4a118f(0x1f5,0x221,0x1ee,0x181)]=_0x5bc8ab['AMfLT'],_0x172caf[_0x4c9263(0x249,0x1b1,0x233,0x230)+_0x4a118f(0x1e2,0x1fc,0x22e,0x1c8)]=_0x5bc8ab['rOEZT'],_0x172caf[_0x4a118f(0x192,0x139,0x1d2,0x1a7)+'FW']=_0x5bc8ab['vXrZj'],_0x172caf[_0x4c9263(0x130,0x17d,0x163,0xa0)+_0x4a118f(0x2f6,0x34c,0x2b4,0x2ff)]=_0x5bc8ab[_0x4c9263(0x28e,0x238,0x22b,0x2e8)];const _0x3eb5e5=_0x172caf;let _0x3c9992=0x2374+0x21ac+-0x4520;for(const _0x5c5195 in _0x3eb5e5){if(_0x5bc8ab['JgmSh']('lffkX',_0x5bc8ab['VWmwA']))_0x585130[_0x5c5195]&&_0x5bc8ab[_0x4a118f(0x21c,0x1ad,0x2ce,0x19f)](_0x585130[_0x5c5195],_0xf4d7b9[_0x5c5195])&&_0x3c9992++;else{const _0x51864e={};for(const _0x4dcd33 in _0x52f59e){_0x51864e[_0x4dcd33]=_0x53a47d(_0x2d7b4f[_0x4dcd33],_0x10aa68,_0x2e634b,_0x46b37f);}return _0x51864e;}}if(_0x3c9992===0x101*0xf+-0xb99+0x2*-0x1bb){toastr[_0x4c9263(0x2ba,0x2be,0x2fd,0x27a)](_0x5bc8ab[_0x4a118f(0x20b,0x190,0x1c4,0x248)]);return;}const _0x544513=_0x4a118f(0x24d,0x300,0x314,0x2cc)+_0x5d89ba+_0x4c9263(0x284,0x1f5,0x215,0x2bc)+_0x3c9992+'\x20项更改,是否应用?',_0x4494e4=await _0x5bc8ab['NmJQk'](stylishConfirm,_0x544513);if(!_0x4494e4){if(_0x5bc8ab[_0x4c9263(0x1a2,0x138,0xdc,0x142)](_0x5bc8ab[_0x4a118f(0x312,0x2b5,0x395,0x387)],_0x5bc8ab['PMpdZ']))return null;else{toastr[_0x4c9263(0x2ba,0x2a3,0x23e,0x26f)](_0x5bc8ab[_0x4a118f(0x314,0x32b,0x26f,0x25d)]);return;}}for(const _0x37fa86 in _0x3eb5e5){_0x585130[_0x37fa86]&&(_0xf4d7b9[_0x37fa86]=_0x585130[_0x37fa86]);}saveSettingsDebounced();const _0x44a2db=_0x5bc8ab[_0x4c9263(0x1dc,0x19a,0x1ef,0x283)]($,'#st-chatu8'+_0x4a118f(0x2b5,0x37b,0x2bd,0x25e)+_0x4c9263(0x27e,0x283,0x352,0x294));function _0x4a118f(_0x50d9a6,_0x3cfaf3,_0x7a3a12,_0x167ec6){return _0x3b86(_0x50d9a6- -0x35,_0x3cfaf3);}if(_0x44a2db[_0x4a118f(0x2d6,0x223,0x25b,0x2ea)]){if(_0x5bc8ab[_0x4a118f(0x2b4,0x349,0x340,0x342)](_0x4a118f(0x188,0x241,0x18a,0x1f0),_0x4a118f(0x21b,0x1cb,0x211,0x2f0))){_0x3c8bdc[_0x4c9263(0x2ba,0x251,0x1eb,0x37b)](_0x4c9263(0x196,0x17e,0x135,0x22f));return;}else _0x5bc8ab[_0x4c9263(0x12d,0x109,0x108,0xc3)](refreshCharacterSettings,_0x44a2db);}function _0x4c9263(_0x66faa0,_0x1306d9,_0x448e6d,_0x41cf31){return _0x3b86(_0x66faa0- -0x97,_0x1306d9);}updateFormFields(_0x585130),console[_0x4c9263(0x1f0,0x1ee,0x1d2,0x13c)](_0x4a118f(0x30d,0x2e7,0x235,0x2e1)+'PromptModi'+_0x4c9263(0x138,0x157,0x11a,0x1ea)+_0x4c9263(0x260,0x2fe,0x1af,0x1f6)+_0x5d89ba+'\x22');}async function updateOutfitPresetsFromLLM(_0x280089){const _0x58fbe6={'RdArM':function(_0x732c05,_0x7f4227){return _0x732c05===_0x7f4227;},'HCftI':_0x1277ee(0x1c0,0x1f1,0x1e8,0x150),'QUmhg':function(_0x41dc34,_0x34f83f){return _0x41dc34(_0x34f83f);},'fNOHg':_0x532ec4(-0x94,-0x136,0x2d,-0x65),'xnVfI':_0x1277ee(0x146,0x14f,0xd9,0x6f),'OzmdK':_0x532ec4(-0x19a,-0x118,-0xb0,-0x16a),'aYQVZ':_0x532ec4(-0x116,-0x76,-0x150,-0x11a),'huDbm':function(_0x343301,_0x2efb1a){return _0x343301!==_0x2efb1a;},'HrBzM':_0x532ec4(-0x165,-0x10e,-0x140,-0x100),'jxmvA':'Ahhyr','rzonr':function(_0x28c64b,_0x4eeacf){return _0x28c64b===_0x4eeacf;},'UtOyT':_0x532ec4(-0x2b4,-0x173,-0x24a,-0x200),'eteSf':function(_0xc837b9,_0x221303){return _0xc837b9(_0x221303);},'ponBG':function(_0x387a42,_0xda93d4){return _0x387a42!==_0xda93d4;},'BOnFb':_0x1277ee(0x1f8,0x209,0x274,0x1e5),'VLRkg':_0x532ec4(-0xd2,-0x15e,-0x66,-0xc3),'gwXrw':_0x1277ee(0x1e5,0x1f7,0x1ae,0x228),'dUxnP':function(_0x26fd0a,_0x508239){return _0x26fd0a(_0x508239);},'vrYHq':function(_0x1389bb,_0x5c3b38){return _0x1389bb!==_0x5c3b38;},'eeWfV':_0x1277ee(0x1c3,0x1d1,0x15c,0x123),'beGVV':function(_0x303d6d,_0x430ef9){return _0x303d6d===_0x430ef9;},'FLnBB':function(_0x5a7888){return _0x5a7888();},'OlxkA':function(_0x4fb0a9,_0x5c04ab){return _0x4fb0a9(_0x5c04ab);},'ruOVb':_0x1277ee(0x2ca,0x289,0x2e3,0x2c6)+_0x1277ee(0x275,0x19d,0x32f,0x29c)+_0x1277ee(0x2a0,0x288,0x316,0x21e)},_0x331b82=extension_settings[extensionName],_0x13c821={};_0x13c821[_0x532ec4(-0x1cc,-0x1d1,-0x165,-0x1ce)]=_0x58fbe6['fNOHg'],_0x13c821[_0x1277ee(0x2e8,0x333,0x2a3,0x28d)]=_0x58fbe6[_0x1277ee(0x285,0x29a,0x303,0x348)],_0x13c821[_0x1277ee(0x181,0x1bb,0x18c,0x1c8)]=_0x58fbe6[_0x1277ee(0x199,0x232,0x1a1,0x11b)],_0x13c821[_0x532ec4(-0x2e,-0x5c,-0x138,-0x96)]=_0x532ec4(-0x156,-0xd8,-0xa3,-0x9a),_0x13c821[_0x1277ee(0x2c3,0x349,0x2cd,0x353)+_0x1277ee(0x1a9,0x17a,0xf9,0x25b)]=_0x1277ee(0x2bc,0x241,0x32b,0x35e),_0x13c821[_0x532ec4(-0x3d,-0xb6,-0x5e,-0x93)]=_0x532ec4(-0xf5,-0x8d,-0x1c2,-0x137),_0x13c821['fullBodyBa'+'ck']=_0x58fbe6['aYQVZ'];const _0x114d18=_0x13c821;for(const _0x34b6bf of _0x280089){const _0xafb2ef=_0x34b6bf['nameCN'];if(!_0xafb2ef)continue;const _0x2c6174=_0x331b82[_0x1277ee(0x1d1,0x225,0x20f,0x1c6)+_0x1277ee(0x18d,0xff,0x224,0x157)]?.[_0xafb2ef];if(_0x2c6174){let _0x5a845e=0x1823+0x1960+-0x34d*0xf;for(const _0xa7236f in _0x114d18){_0x34b6bf[_0xa7236f]&&_0x58fbe6[_0x532ec4(-0x226,-0x28c,-0x15f,-0x1cf)](_0x34b6bf[_0xa7236f],_0x2c6174[_0xa7236f])&&(_0x58fbe6[_0x532ec4(-0x149,-0x5e,-0x155,-0x112)]===_0x58fbe6[_0x532ec4(0x13,0x2f,-0x10e,-0x78)]?_0x4bbb45&&_0x28b309[_0x1277ee(0x216,0x1f7,0x21b,0x2bc)](_0x19c9ed):_0x5a845e++);}if(_0x58fbe6[_0x532ec4(-0xbc,-0xeb,-0x8f,-0xe3)](_0x5a845e,0xb1b*0x2+0x1e52*0x1+-0x3488)){if(_0x58fbe6[_0x1277ee(0x185,0xcc,0x12d,0x157)](_0x532ec4(-0x21a,-0x278,-0x14b,-0x200),_0x58fbe6[_0x1277ee(0x235,0x218,0x242,0x291)])){console[_0x1277ee(0x212,0x2bf,0x1dd,0x184)](_0x532ec4(-0x10f,-0x53,-0x140,-0x71)+'PromptModi'+'fy]\x20服装\x20\x22'+_0xafb2ef+_0x532ec4(-0x15f,-0x241,-0xf7,-0x197));continue;}else _0x19b409=_0x532ec4(-0x5b,-0x1d,-0x93,-0x5f)+'/png;base6'+'4,'+_0x51a0f8;}const _0x432e86=_0x532ec4(-0xdf,-0x17b,-0x21d,-0x1b3)+_0xafb2ef+'\x22\x20有\x20'+_0x5a845e+'\x20项更改,是否应用?',_0x556224=await _0x58fbe6['eteSf'](stylishConfirm,_0x432e86);if(!_0x556224){if(_0x58fbe6[_0x1277ee(0x155,0xed,0x1de,0x14f)](_0x58fbe6[_0x532ec4(-0x171,-0x1a9,-0xef,-0x15d)],_0x58fbe6['VLRkg']))continue;else for(const _0x13089d of _0xc8ece5[_0x532ec4(-0xe4,-0xff,-0x120,-0x166)]){if(_0x58fbe6[_0x1277ee(0x185,0x1c2,0x11e,0xd4)](_0x13089d['type'],_0x58fbe6[_0x532ec4(-0x121,-0x89,-0x1a0,-0xdb)])&&_0x13089d[_0x1277ee(0x1c0,0x24b,0x1e8,0x155)][_0x1277ee(0x141,0x156,0x207,0x79)](_0x3b23e1))return _0x2dd2c8;}}for(const _0x5a9427 in _0x114d18){_0x58fbe6['ponBG'](_0x1277ee(0x1e5,0x23e,0x1b5,0x160),_0x58fbe6[_0x532ec4(-0x18b,-0x1c4,-0xe9,-0x156)])?(_0x58d9ec[_0x532ec4(0x11,-0x148,-0x63,-0xb7)+_0x1277ee(0x1bf,0x232,0x1cb,0x27c)](_0x56666e['LLM_CHAR_M'+'ODIFY_RESP'+'ONSE'],_0x31b356),_0xc24b06&&(_0x58fbe6['QUmhg'](_0x2f32fe,_0x484111),_0x4ccccf=null)):_0x34b6bf[_0x5a9427]&&(_0x2c6174[_0x5a9427]=_0x34b6bf[_0x5a9427]);}console['log'](_0x1277ee(0x2cd,0x219,0x202,0x37c)+_0x1277ee(0x2e2,0x348,0x39e,0x22f)+'fy]\x20已更新服装预'+'设\x20\x22'+_0xafb2ef+'\x22');}else{const _0x66b9dc=_0x1277ee(0x26f,0x227,0x25e,0x1f7)+_0xafb2ef+'\x22,是否录入?',_0x22fa41=await _0x58fbe6['dUxnP'](stylishConfirm,_0x66b9dc);if(!_0x22fa41)continue;!_0x331b82[_0x532ec4(-0xaa,-0x14d,-0x148,-0x16d)+_0x532ec4(-0x157,-0xe4,-0xe3,-0x1b1)]&&(_0x58fbe6[_0x532ec4(-0x166,-0xe3,-0x184,-0x16b)](_0x532ec4(-0x65,-0x136,-0x1d3,-0x132),_0x58fbe6[_0x1277ee(0x1b0,0x219,0x194,0xdb)])?_0x331b82[_0x532ec4(-0x182,-0x1da,-0xd6,-0x16d)+_0x1277ee(0x18d,0x1e4,0x231,0x1e2)]={}:(_0x5b55c9[_0x532ec4(-0x78,-0x1e0,-0xf5,-0x118)]['push'](_0x11d19d),_0x4a1de2['log'](_0x532ec4(0x2c,-0xb2,-0x2,-0x71)+_0x532ec4(-0x108,-0x129,0x27,-0x5c)+'fy]\x20服装\x20\x22'+_0x3631ff+_0x1277ee(0x21a,0x18c,0x291,0x247)+_0x450772+'\x22')));const _0x19b683={};_0x19b683[_0x1277ee(0x170,0xf3,0xf3,0x181)]=_0x34b6bf[_0x1277ee(0x170,0x174,0x14b,0x15f)],_0x19b683[_0x1277ee(0x2e8,0x369,0x3a2,0x240)]=_0x34b6bf[_0x532ec4(0x1a,0x64,-0xf7,-0x56)]||'',_0x19b683[_0x1277ee(0x181,0xc0,0x1b4,0x222)]=_0x34b6bf[_0x1277ee(0x181,0xe2,0x1c3,0x21b)]||'',_0x19b683[_0x532ec4(-0xec,-0x100,-0x4f,-0x96)]=_0x34b6bf[_0x532ec4(-0x9e,-0x4,-0x37,-0x96)]||'',_0x19b683[_0x1277ee(0x2c3,0x353,0x35c,0x204)+'ack']=_0x34b6bf[_0x1277ee(0x2c3,0x365,0x2bc,0x2c4)+_0x532ec4(-0x22f,-0x1a7,-0x1c2,-0x195)]||'',_0x19b683['fullBody']=_0x34b6bf['fullBody']||'',_0x19b683[_0x532ec4(-0x14e,-0x10d,-0x107,-0x125)+'ck']=_0x34b6bf[_0x1277ee(0x219,0x219,0x267,0x151)+'ck']||'',_0x331b82['outfitPres'+'ets'][_0xafb2ef]=_0x19b683,console[_0x1277ee(0x212,0x14b,0x1f2,0x2e1)](_0x532ec4(-0xf8,-0x27,-0xb,-0x71)+'PromptModi'+'fy]\x20已创建服装预'+_0x1277ee(0x282,0x1ff,0x2b2,0x2d1)+_0xafb2ef+'\x22');if(_0x34b6bf['owner']&&_0x34b6bf[_0x532ec4(-0x18c,-0x148,-0x27c,-0x1bd)][_0x1277ee(0x27e,0x2a1,0x2fe,0x2df)]()){const _0x1999ac=_0x34b6bf['owner'][_0x532ec4(-0x93,-0x90,-0xf2,-0xc0)]()['toLowerCas'+'e']()[_0x1277ee(0x1f1,0x1f0,0x1b0,0x1f1)](/\s+/g,'');for(const [_0x44575f,_0x31e626]of Object[_0x532ec4(-0x19d,-0x1af,-0x105,-0x122)](_0x331b82[_0x1277ee(0x262,0x1c9,0x263,0x2d5)+'resets']||{})){if(_0x31e626['nameEN']&&_0x58fbe6[_0x1277ee(0x28f,0x1c7,0x339,0x1ca)](_0x31e626[_0x532ec4(-0x36,0x2c,-0xa2,-0x56)][_0x532ec4(-0x80,-0xe1,-0x80,-0x13e)+'e']()['replace'](/\s+/g,''),_0x1999ac)){!_0x31e626[_0x532ec4(-0x12e,-0x10e,-0x17a,-0x118)]&&(_0x31e626[_0x1277ee(0x226,0x2ae,0x2e9,0x1e6)]=[]);!_0x31e626[_0x532ec4(-0x16f,-0x1da,-0xff,-0x118)][_0x1277ee(0x141,0x207,0x20d,0x161)](_0xafb2ef)&&(_0x31e626[_0x532ec4(-0x71,-0x1d8,-0x46,-0x118)]['push'](_0xafb2ef),console[_0x532ec4(-0x196,-0x84,-0x158,-0x12c)](_0x1277ee(0x2cd,0x273,0x354,0x324)+_0x532ec4(-0x11e,-0xe9,-0x7a,-0x5c)+_0x1277ee(0x29b,0x202,0x295,0x2dc)+_0xafb2ef+'\x22\x20已归属到角色\x20\x22'+_0x44575f+'\x22'));break;}}}}}_0x58fbe6[_0x532ec4(-0x9c,-0xfa,0x4,-0xac)](saveSettingsDebounced);function _0x1277ee(_0x172fcb,_0x308927,_0x2a3a9d,_0x636baa){return _0x3b86(_0x172fcb- -0x75,_0x308927);}function _0x532ec4(_0x244da8,_0x40cfb4,_0x4c1b5a,_0x3527a6){return _0x3b86(_0x3527a6- -0x3b3,_0x40cfb4);}const _0x43891c=_0x58fbe6[_0x1277ee(0x1f6,0x19b,0x280,0x270)]($,_0x58fbe6[_0x532ec4(-0xc0,0x6d,-0x4a,-0x59)]);_0x43891c['length']&&refreshCharacterSettings(_0x43891c);}function updateFormFields(_0x2692fb){const _0x57b271={'qQpZo':'TjLZX','LYZSp':function(_0x5c9a0f,_0x50e34b){return _0x5c9a0f(_0x50e34b);},'WaMfs':_0x2d0952(0xb7,0x15a,0x1bc,0x19f),'eOKoq':'characterT'+'raits','CRqOD':_0x4d9253(0x4c3,0x427,0x3ee,0x47b)+_0x2d0952(0xcf,0x13a,0xec,0x128),'EVJqI':_0x4d9253(0x47a,0x4d4,0x4d7,0x429)+_0x4d9253(0x4c7,0x46d,0x504,0x54e),'cVEXr':'fullBodySF'+'W','vOsVB':'fullBodySF'+'WBack','rpGze':_0x4d9253(0x4d6,0x408,0x4b9,0x4f5)+'SFW','tEmMh':_0x2d0952(0x28c,0x22a,0x25f,0x287)+'SFWBack','eNaip':'fullBodyNS'+'FW'};function _0x2d0952(_0x319db7,_0x5c1e33,_0x2496a8,_0x17c48d){return _0x3b86(_0x5c1e33- -0xb6,_0x2496a8);}const _0xfc7166=[_0x2d0952(0x77,0x12f,0x145,0x85),_0x2d0952(0x28d,0x2a7,0x25e,0x221),_0x57b271[_0x2d0952(0x22f,0x179,0x10f,0x1cf)],_0x57b271[_0x4d9253(0x4e3,0x3d5,0x42e,0x3f4)],_0x4d9253(0x411,0x348,0x3ee,0x3ed)+_0x4d9253(0x3e6,0x398,0x437,0x45a),_0x4d9253(0x59a,0x539,0x4d7,0x427)+'FW',_0x57b271['EVJqI'],_0x57b271[_0x2d0952(0x158,0x218,0x269,0x19c)],_0x57b271['vOsVB'],_0x57b271[_0x4d9253(0x435,0x54b,0x49d,0x4d8)],_0x57b271[_0x2d0952(0x191,0x1b1,0xe9,0x270)],_0x57b271[_0x2d0952(0x144,0x139,0x17f,0x176)],'fullBodyNS'+_0x4d9253(0x5b0,0x519,0x504,0x482)];function _0x4d9253(_0x24c46d,_0x130890,_0x123529,_0x3a2506){return _0x3b86(_0x123529-0x1d9,_0x24c46d);}_0xfc7166[_0x2d0952(0x1e7,0x155,0xb4,0x10a)](_0x125b4c=>{function _0x557385(_0x25ed50,_0x4be635,_0x366208,_0x1e6078){return _0x2d0952(_0x25ed50-0x31,_0x1e6078- -0x62,_0x25ed50,_0x1e6078-0x11d);}function _0x11ba50(_0x38a5e1,_0x284589,_0x2d9a53,_0x2cf3ec){return _0x2d0952(_0x38a5e1-0x14c,_0x2cf3ec-0xba,_0x2d9a53,_0x2cf3ec-0x187);}if(_0x57b271[_0x11ba50(0x140,0x29b,0x2eb,0x218)]===_0x57b271[_0x557385(0x67,0x194,0x1c4,0xfc)]){if(_0x2692fb[_0x125b4c]){const _0x1f182a=document['getElement'+_0x557385(0x110,0x214,0x1ca,0x1c2)](_0x557385(0x1fc,0x156,0x1f9,0x225)+_0x125b4c);_0x1f182a&&(_0x1f182a[_0x557385(0xe1,0x168,-0x14,0xa4)]=_0x2692fb[_0x125b4c],_0x57b271[_0x11ba50(0x242,0x296,0x2a7,0x1e6)]($,_0x1f182a)[_0x11ba50(0x1b4,0x1f7,0x231,0x1ec)](_0x57b271[_0x557385(0x5c,0x6e,0x187,0xbf)]));}}else _0x2a3238=_0x3f4a5f,_0x272fa0['push'](_0x26ef52);});}