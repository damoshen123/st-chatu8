(function(_0x2c122a,_0x21eb88){function _0x3b819b(_0x54cc06,_0x59b056,_0x516665,_0x2e973d){return _0x105e(_0x59b056-0x120,_0x54cc06);}function _0x3cfd9d(_0x3fd3df,_0x49ec62,_0x184f21,_0x289d77){return _0x105e(_0x49ec62- -0x31f,_0x184f21);}const _0xa42e4e=_0x2c122a();while(!![]){try{const _0x58bf6e=parseInt(_0x3cfd9d(-0x166,-0xcb,-0x10e,-0x158))/(0xd0a+0x858+-0x1561)*(-parseInt(_0x3b819b(0x2f7,0x2c0,0x380,0x2c7))/(0x1909*0x1+0xa98+0x33d*-0xb))+parseInt(_0x3b819b(0x4b5,0x3d5,0x3ea,0x47f))/(0x910+-0x2261+0x1954)*(-parseInt(_0x3cfd9d(-0x1cb,-0xfe,-0xb9,-0x1a6))/(0x1779+0x7c+-0x17f1))+-parseInt(_0x3b819b(0x23c,0x2fb,0x37b,0x32b))/(-0x677+0x932*0x4+-0x2*0xf26)*(-parseInt(_0x3cfd9d(-0xc9,-0x15a,-0x207,-0x17b))/(0x803+0x2593+0x2d90*-0x1))+-parseInt(_0x3cfd9d(-0xd4,-0xa1,-0x110,-0x17d))/(0x36*-0xb7+0x1*0x1878+-0xe29*-0x1)+-parseInt(_0x3b819b(0x315,0x33e,0x2b0,0x33f))/(-0x10*0x11e+-0x10d7+0xb95*0x3)*(-parseInt(_0x3cfd9d(-0xbd,-0x19b,-0x19a,-0x144))/(-0x1*0x269f+-0xac7+0x5*0x9e3))+-parseInt(_0x3cfd9d(-0xb5,-0xdc,-0x15a,-0x171))/(-0x338*0x4+-0xd93+0x1a7d)+-parseInt(_0x3b819b(0x3a1,0x3f1,0x3fb,0x43f))/(0xdbb+-0xd82+0x2*-0x17)*(-parseInt(_0x3cfd9d(-0x1cf,-0x11e,-0x156,-0x1c0))/(-0x7f*-0x37+0x1*-0x937+0x6*-0x301));if(_0x58bf6e===_0x21eb88)break;else _0xa42e4e['push'](_0xa42e4e['shift']());}catch(_0x1fba20){_0xa42e4e['push'](_0xa42e4e['shift']());}}}(_0x383b,0x26978*0x2+0x19609*0x1+0x12816*-0x3));const _0xc7eebd=(function(){function _0x41c045(_0x465db8,_0x3f5dc0,_0x5aba17,_0x24f34f){return _0x105e(_0x24f34f- -0x8e,_0x465db8);}const _0x431c53={'TSUlA':function(_0x4214b9){return _0x4214b9();},'yPsrl':function(_0x13ddd9,_0x328cde){return _0x13ddd9===_0x328cde;},'NteUN':_0x17bc8b(0x142,0x17a,0x1ec,0xc7),'wImEJ':_0x17bc8b(0x252,0x266,0x183,0x1ad)};function _0x17bc8b(_0x542e7f,_0xc7f5f1,_0xc29a3c,_0x5b5a39){return _0x105e(_0xc7f5f1- -0x2b,_0xc29a3c);}let _0x1dd3dd=!![];return function(_0x47fe17,_0x4f5c7c){const _0x16844b={'ykiRW':function(_0x3e7dfd){return _0x431c53['TSUlA'](_0x3e7dfd);},'wkKNY':function(_0x57bb90,_0x3a328b,_0x273105){return _0x57bb90(_0x3a328b,_0x273105);},'eLCBH':function(_0xff19d7,_0x5bb52f){return _0x431c53['yPsrl'](_0xff19d7,_0x5bb52f);},'OfzqM':_0x431c53['NteUN'],'rWqbZ':_0x431c53[_0x49a0e3(0xc8,0x90,0x2,0x165)],'LLzWF':_0x49a0e3(-0x124,-0x4a,0x3a,0x4d),'efjnv':_0x24c1dd(0x312,0x293,0x288,0x314)},_0x18d854=_0x1dd3dd?function(){const _0x3a4c9e={'YwyPJ':function(_0x12a445){function _0x116e60(_0x55b076,_0x2196cc,_0x4578ba,_0x4a0d23){return _0x105e(_0x55b076-0x371,_0x4a0d23);}return _0x16844b[_0x116e60(0x638,0x6de,0x588,0x5ab)](_0x12a445);},'OGsTV':function(_0x24a098,_0x1f8dbf,_0x58559a){function _0x6edc(_0x5c147c,_0x510096,_0x3c1d3d,_0x55c173){return _0x105e(_0x3c1d3d- -0x2b1,_0x510096);}return _0x16844b[_0x6edc(-0xec,-0x147,-0x17e,-0x125)](_0x24a098,_0x1f8dbf,_0x58559a);},'chBJX':function(_0xa68b06,_0xa259d1){return _0xa68b06(_0xa259d1);}};function _0x4e0e95(_0x1f49ce,_0x424eb0,_0x4865c6,_0x24f1b7){return _0x24c1dd(_0x1f49ce-0xe6,_0x4865c6,_0x424eb0-0x4,_0x24f1b7-0x1c1);}function _0x4a7137(_0x2a3c4c,_0x1736a2,_0x291847,_0x2a1c43){return _0x49a0e3(_0x2a3c4c-0x11b,_0x2a3c4c-0x14e,_0x291847-0x92,_0x291847);}if(_0x16844b[_0x4a7137(0x13e,0x21b,0x1bf,0x121)](_0x16844b[_0x4a7137(0x14a,0x1d9,0x216,0x101)],_0x16844b[_0x4e0e95(0x478,0x39f,0x407,0x2cf)]))_0x9dfaa0['log'](_0x4e0e95(0x3ec,0x3f1,0x36e,0x44b)+_0x4a7137(0x1fa,0x12b,0x1c9,0x2ac)+_0x4a7137(0x16f,0xa9,0xfa,0x135)+'字段\x20\x22'+_0x4bf77d+'\x22');else{if(_0x4f5c7c){if(_0x16844b[_0x4a7137(0x13e,0x20c,0x14a,0xef)](_0x16844b['LLzWF'],_0x16844b[_0x4a7137(0x240,0x174,0x2b9,0x26c)])){const _0x1569f5={'lxjeE':function(_0x4feacd,_0x294472){function _0x1a72fd(_0x4313a5,_0x39bc11,_0x528071,_0x3fa294){return _0x4a7137(_0x4313a5- -0x2b5,_0x39bc11-0x43,_0x3fa294,_0x3fa294-0x57);}return _0x3a4c9e[_0x1a72fd(-0x1a5,-0x1cd,-0x132,-0x278)](_0x4feacd,_0x294472);}};return new _0x377700((_0x8be8a5,_0x153d32)=>{const _0x4bf9cc={'SVPGw':function(_0x46b6fc,_0x346407){return _0x46b6fc(_0x346407);},'UwVtE':_0xc0dea7(0x414,0x4bd,0x48e,0x4c4)+'时'},_0x27f722=_0x3a4c9e[_0xc0dea7(0x433,0x43a,0x38d,0x430)](_0x4fccc2);function _0x28065f(_0x204731,_0x1d4850,_0x2e169d,_0x17c72c){return _0x4a7137(_0x204731-0x21f,_0x1d4850-0xc5,_0x17c72c,_0x17c72c-0x59);}_0x4c328a[_0x28065f(0x436,0x47b,0x4b9,0x370)](_0xc0dea7(0x54c,0x4ea,0x4ca,0x4ef)+_0x28065f(0x419,0x3e8,0x4c8,0x44b)+_0xc0dea7(0x412,0x572,0x40d,0x4d6)+_0xc0dea7(0x3b5,0x3ff,0x38d,0x387)+_0x28065f(0x3c0,0x348,0x44a,0x3cc)+_0x28065f(0x359,0x35b,0x39f,0x37b)+_0x27f722+')');function _0xc0dea7(_0x5b825f,_0x391b20,_0x2b71e7,_0x1ca4e5){return _0x4e0e95(_0x5b825f-0x132,_0x1ca4e5-0xfe,_0x391b20,_0x1ca4e5-0xf5);}const _0x5e25e3=_0x3896e6=>{if(_0x3896e6['id']!==_0x27f722)return;function _0x476f4e(_0x55bb74,_0x4ea474,_0x19d9a9,_0x969d9c){return _0x28065f(_0x19d9a9- -0x443,_0x4ea474-0xf6,_0x19d9a9-0x174,_0x969d9c);}_0x5cf1d4[_0x476f4e(-0xe0,-0x14b,-0x7c,0xe)+'ener'](_0x446159[_0x476f4e(-0x20b,-0x12d,-0x131,-0x105)+'ODIFY_GET_'+_0xb48225(0x3f4,0x3de,0x3e0,0x385)+_0xb48225(0x2cb,0x29b,0x242,0x257)],_0x5e25e3);function _0xb48225(_0x1c9e72,_0x3ef188,_0xdf65f0,_0x29eaa3){return _0xc0dea7(_0x1c9e72-0x1b5,_0x29eaa3,_0xdf65f0-0x35,_0x1c9e72- -0xa4);}_0x1569f5['lxjeE'](_0x8be8a5,_0x3896e6[_0x476f4e(-0x143,0x11,-0x92,-0x140)]);};_0x9e1fe['on'](_0x3414c3[_0x28065f(0x312,0x252,0x247,0x302)+_0x28065f(0x308,0x3c1,0x3c9,0x367)+_0x28065f(0x437,0x3e8,0x4a6,0x3d6)+_0xc0dea7(0x37b,0x3a2,0x3b3,0x36f)],_0x5e25e3);const _0x17d50f={};_0x17d50f['id']=_0x27f722,_0x2d8f29['emit'](_0xe786a9[_0x28065f(0x312,0x259,0x337,0x381)+_0xc0dea7(0x411,0x3da,0x351,0x369)+_0xc0dea7(0x51c,0x408,0x491,0x46e)+_0x28065f(0x4c1,0x435,0x59c,0x461)],_0x17d50f),_0x3a4c9e[_0x28065f(0x4b9,0x513,0x483,0x538)](_0x5e9f98,()=>{function _0x17ea8c(_0x1e8953,_0x222ca9,_0x3fbce5,_0x44d0f5){return _0xc0dea7(_0x1e8953-0x93,_0x3fbce5,_0x3fbce5-0x25,_0x222ca9- -0x35);}_0x1eb95f['removeList'+'ener'](_0x50ccff[_0x8e12a9(-0x6e,0xb2,0x76,0x23)+_0x17ea8c(0x277,0x334,0x36f,0x3d0)+_0x17ea8c(0x45b,0x463,0x3d6,0x474)+_0x17ea8c(0x3ba,0x33a,0x3e2,0x416)],_0x5e25e3);function _0x8e12a9(_0x2e2ec3,_0x3789e5,_0x3bf6ae,_0x31f097){return _0xc0dea7(_0x2e2ec3-0x170,_0x31f097,_0x3bf6ae-0x138,_0x3bf6ae- -0x2fd);}_0x4bf9cc[_0x17ea8c(0x410,0x333,0x2cf,0x3c2)](_0x153d32,new _0x3ef25b(_0x4bf9cc['UwVtE']));},0x21d*-0x3+-0x182d+0x4594);});}else{const _0x52dcdc=_0x4f5c7c[_0x4e0e95(0x311,0x34d,0x359,0x3a4)](_0x47fe17,arguments);return _0x4f5c7c=null,_0x52dcdc;}}}}:function(){};function _0x49a0e3(_0x47aab6,_0x11c4a3,_0x23b0d2,_0x4d8e56){return _0x17bc8b(_0x47aab6-0xde,_0x11c4a3- -0x172,_0x4d8e56,_0x4d8e56-0x15c);}_0x1dd3dd=![];function _0x24c1dd(_0x423bb7,_0x100455,_0x43f2f7,_0x1f63dc){return _0x17bc8b(_0x423bb7-0x14,_0x43f2f7-0x15a,_0x100455,_0x1f63dc-0x1f3);}return _0x18d854;};}()),_0x28c48c=_0xc7eebd(this,function(){const _0x4257f7={};_0x4257f7['HWqwJ']=_0xa78372(0x294,0x1cc,0x263,0x1e0)+'+$';function _0xa78372(_0x5abf92,_0x259bc3,_0x240e96,_0x28551e){return _0x105e(_0x259bc3-0x58,_0x5abf92);}function _0x4ffaa4(_0x57623c,_0xd2db3a,_0x526c9e,_0x264da1){return _0x105e(_0x526c9e- -0x342,_0x57623c);}const _0x39f6ce=_0x4257f7;return _0x28c48c[_0x4ffaa4(-0x1b7,-0xca,-0x12e,-0x144)]()[_0x4ffaa4(-0x168,-0x1cc,-0x202,-0x289)](_0x39f6ce[_0xa78372(0x11a,0x184,0x195,0x1f8)])[_0x4ffaa4(-0x206,-0x20d,-0x12e,-0x20d)]()['constructo'+'r'](_0x28c48c)[_0x4ffaa4(-0x22d,-0x283,-0x202,-0x12d)](_0x39f6ce[_0x4ffaa4(-0x193,-0x2ef,-0x216,-0x133)]);});_0x28c48c();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';function _0x105e(_0x547046,_0x25d2d5){_0x547046=_0x547046-(-0x1dda+-0x23a6+0x42ac);const _0x55fc79=_0x383b();let _0x3929d7=_0x55fc79[_0x547046];if(_0x105e['SJvzRs']===undefined){var _0xa00226=function(_0x42e47e){const _0x19733a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1ba9bd='',_0x423c00='',_0x72063a=_0x1ba9bd+_0xa00226;for(let _0x3764dd=0x700+-0x19a9+0x12a9,_0x1c1f32,_0x3f58e6,_0x432028=-0x1aef+-0x77*-0x1+0x1a78;_0x3f58e6=_0x42e47e['charAt'](_0x432028++);~_0x3f58e6&&(_0x1c1f32=_0x3764dd%(-0x7e8+-0x1830+0x201c)?_0x1c1f32*(-0x1ed7+0x323*-0x2+0x779*0x5)+_0x3f58e6:_0x3f58e6,_0x3764dd++%(-0x95e+-0x83c+0x1c3*0xa))?_0x1ba9bd+=_0x72063a['charCodeAt'](_0x432028+(0x176a+0x5f8+-0x1d58))-(0x2f*0x53+-0x209a+0x1167)!==-0x1e1c+0x4f*0x3+0x1d2f*0x1?String['fromCharCode'](0xa46+-0x1902+0xfbb&_0x1c1f32>>(-(0x5a3*0x1+-0x825+0x17*0x1c)*_0x3764dd&-0x1f16+-0x8b8+0x27d4)):_0x3764dd:-0x14b8+0x7*0x166+0xaee*0x1){_0x3f58e6=_0x19733a['indexOf'](_0x3f58e6);}for(let _0x3308f4=0xc*-0x7b+-0x1f38+-0x315*-0xc,_0x3db2b7=_0x1ba9bd['length'];_0x3308f4<_0x3db2b7;_0x3308f4++){_0x423c00+='%'+('00'+_0x1ba9bd['charCodeAt'](_0x3308f4)['toString'](-0x12e+0x3e6+-0x2a8))['slice'](-(0x271*0x2+0xd7f+-0x125f));}return decodeURIComponent(_0x423c00);};_0x105e['vLbluy']=_0xa00226,_0x105e['lZXdPH']={},_0x105e['SJvzRs']=!![];}const _0x1938dc=_0x55fc79[0x1*0xa79+-0x1bdb+0x1162],_0x278780=_0x547046+_0x1938dc,_0x4083c1=_0x105e['lZXdPH'][_0x278780];if(!_0x4083c1){const _0x28d542=function(_0x31750c){this['HGOXvH']=_0x31750c,this['LIQjcn']=[-0x911+-0x1a5b+0x236d,0x6f0+-0x2553+0xa21*0x3,0x2*0xbea+0x161*-0x13+0x25f*0x1],this['XcjcAF']=function(){return'newState';},this['YPNtUf']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['iIIugR']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x28d542['prototype']['przQlN']=function(){const _0x2a93b4=new RegExp(this['YPNtUf']+this['iIIugR']),_0x3af619=_0x2a93b4['test'](this['XcjcAF']['toString']())?--this['LIQjcn'][-0x161+0x1*-0x1452+0x15b4]:--this['LIQjcn'][0x1fb*0x3+0x1*-0x2051+-0x1*-0x1a60];return this['CHxXib'](_0x3af619);},_0x28d542['prototype']['CHxXib']=function(_0x5373c0){if(!Boolean(~_0x5373c0))return _0x5373c0;return this['qwFbWq'](this['HGOXvH']);},_0x28d542['prototype']['qwFbWq']=function(_0x4d0fa3){for(let _0x2cec48=-0x26a*-0x1+-0x26e1+-0x5*-0x74b,_0x4c4373=this['LIQjcn']['length'];_0x2cec48<_0x4c4373;_0x2cec48++){this['LIQjcn']['push'](Math['round'](Math['random']())),_0x4c4373=this['LIQjcn']['length'];}return _0x4d0fa3(this['LIQjcn'][-0xf+-0x1*-0x13e1+-0x13d2]);},new _0x28d542(_0x105e)['przQlN'](),_0x3929d7=_0x105e['vLbluy'](_0x3929d7),_0x105e['lZXdPH'][_0x278780]=_0x3929d7;}else _0x3929d7=_0x4083c1;return _0x3929d7;}import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x2106d3}from'./promptProcessor.js';function replacePlaceholder(_0x1c9226,_0x135c5a,_0x29a53a,_0x52f1fe){function _0x3e8d1b(_0x561db8,_0x2f58e9,_0xfc9ddf,_0x59de7b){return _0x105e(_0x59de7b-0x375,_0xfc9ddf);}const _0x74bb2d={'zdqYu':function(_0x10bca8,_0x49ad27){return _0x10bca8(_0x49ad27);},'QYEwX':_0x3e8d1b(0x5d3,0x47d,0x623,0x543),'PPijJ':function(_0x5459f1,_0x42c6cb){return _0x5459f1===_0x42c6cb;},'tpQZn':function(_0x23c2e6,_0x34e51c){return _0x23c2e6!==_0x34e51c;},'isJvO':_0x3e8d1b(0x68b,0x734,0x5c0,0x655),'ZXoEa':_0x20e8cf(0x489,0x559,0x576,0x582),'YxvSS':_0x3e8d1b(0x642,0x57c,0x657,0x624),'hfPbN':_0x3e8d1b(0x4ee,0x5af,0x540,0x528)};if(_0x74bb2d[_0x20e8cf(0x490,0x514,0x5e3,0x542)](typeof _0x1c9226,_0x3e8d1b(0x6c6,0x618,0x6d6,0x659))){if(_0x74bb2d[_0x20e8cf(0x358,0x3a3,0x2e4,0x329)](_0x74bb2d[_0x20e8cf(0x4aa,0x462,0x44b,0x4a9)],_0x74bb2d[_0x3e8d1b(0x50b,0x4d9,0x634,0x5b0)]))return _0x29a53a&&_0x1c9226[_0x3e8d1b(0x57c,0x61a,0x516,0x5a0)](_0x135c5a)&&(_0x52f1fe&&_0x52f1fe[_0x20e8cf(0x4a0,0x3ef,0x471,0x31c)](_0x135c5a)),_0x1c9226['replaceAll'](_0x135c5a,_0x29a53a);else{if(_0x41e065[_0xce1679]){const _0x4082c2=_0x3b3566['getElement'+'ById'](_0x20e8cf(0x4f7,0x478,0x4c9,0x54d)+_0x2bca15);_0x4082c2&&(_0x4082c2[_0x3e8d1b(0x628,0x6ab,0x6cc,0x639)]=_0x47b2e5[_0x51ac8c],_0x74bb2d[_0x3e8d1b(0x5f5,0x56b,0x689,0x638)](_0x112839,_0x4082c2)[_0x20e8cf(0x2d8,0x39b,0x2e1,0x42d)](_0x74bb2d[_0x20e8cf(0x392,0x3ae,0x3f4,0x2e6)]));}}}if(Array['isArray'](_0x1c9226))return _0x1c9226[_0x20e8cf(0x38b,0x41e,0x4e5,0x33f)](_0x3c18ef=>replacePlaceholder(_0x3c18ef,_0x135c5a,_0x29a53a,_0x52f1fe));function _0x20e8cf(_0x420490,_0x4a3bfb,_0x1e44cf,_0x2d220c){return _0x105e(_0x4a3bfb-0x269,_0x420490);}if(_0x1c9226&&_0x74bb2d[_0x20e8cf(0x431,0x514,0x552,0x45b)](typeof _0x1c9226,_0x3e8d1b(0x603,0x5fb,0x568,0x566))){const _0x6e91bb={};for(const _0x46172b in _0x1c9226){_0x74bb2d['PPijJ'](_0x74bb2d[_0x20e8cf(0x524,0x4ff,0x552,0x57b)],_0x74bb2d[_0x20e8cf(0x554,0x53c,0x5f2,0x4ff)])?_0x2fcb33['push'](_0x9def65):_0x6e91bb[_0x46172b]=replacePlaceholder(_0x1c9226[_0x46172b],_0x135c5a,_0x29a53a,_0x52f1fe);}return _0x6e91bb;}return _0x1c9226;}function attachImagesToMessage(_0x522b37,_0x330ad2,_0x19e0b1,_0x4469af='参考图片'){const _0x563232={};_0x563232[_0x332156(-0x108,-0x117,-0xda,-0xab)]=function(_0x196350,_0x4ddbfb){return _0x196350!==_0x4ddbfb;},_0x563232[_0x4683f3(-0xbf,-0x13a,-0xeb,-0x150)]=function(_0x447a8c,_0x104024){return _0x447a8c===_0x104024;},_0x563232[_0x4683f3(-0x40,-0x51,-0x37,0x29)]=_0x332156(-0x1ca,-0x161,-0x25b,-0x257),_0x563232[_0x4683f3(-0xfc,-0x191,-0x12b,-0x1a9)]='string';function _0x332156(_0x2c4787,_0x2ead41,_0x250507,_0x438aac){return _0x105e(_0x2c4787- -0x33a,_0x250507);}_0x563232[_0x4683f3(0xc3,0x43,-0x1b,0x73)]=function(_0x4d315f,_0x2c4091){return _0x4d315f===_0x2c4091;},_0x563232[_0x4683f3(-0x162,-0xd3,-0xd0,0x10)]=_0x4683f3(-0x135,-0x161,-0xdd,-0x5f),_0x563232[_0x332156(-0x1f6,-0x2ce,-0x1db,-0x2a3)]=function(_0x3fd688,_0xed8e5e){return _0x3fd688+_0xed8e5e;},_0x563232[_0x4683f3(-0x56,-0x1,-0x6b,-0x58)]='text',_0x563232[_0x4683f3(-0x215,-0x20f,-0x193,-0x21b)]=_0x4683f3(-0x1c1,-0xa7,-0x172,-0x228),_0x563232['bnMrW']=_0x332156(-0x166,-0xcf,-0xaa,-0x1ee),_0x563232[_0x4683f3(0xaf,-0xf4,-0x1e,0x57)]=_0x332156(-0xa5,0x2b,-0x183,-0xac),_0x563232[_0x332156(-0x8e,-0x83,-0x72,-0x95)]=_0x332156(-0x1b8,-0xec,-0x27e,-0x245),_0x563232[_0x4683f3(-0xe5,-0x1ea,-0x10f,-0xe5)]=function(_0x8050d4,_0x1d2daa){return _0x8050d4===_0x1d2daa;},_0x563232[_0x332156(-0x6c,-0xd5,-0x11e,0x2c)]=function(_0x2bfe73,_0x314eba){return _0x2bfe73>=_0x314eba;},_0x563232[_0x4683f3(-0x185,-0x126,-0x121,-0x1ba)]=function(_0x206b58,_0x57734c){return _0x206b58===_0x57734c;},_0x563232[_0x332156(-0x103,-0x71,-0xd4,-0x19f)]=_0x332156(-0x146,-0xb2,-0x179,-0x97),_0x563232[_0x4683f3(0x74,-0x74,0x20,-0x68)]=_0x4683f3(-0x11d,-0x84,-0x7e,0x4c);const _0x5943e1=_0x563232;if(!_0x19e0b1||_0x5943e1[_0x332156(-0x17b,-0x193,-0x20e,-0x159)](_0x19e0b1[_0x4683f3(-0xfa,-0x3,-0xe7,-0x59)],0x5dd+0x26da+-0x2cb7)||_0x330ad2<0x1*-0x7ae+0xd6*-0x1+-0x5*-0x1b4||_0x5943e1[_0x332156(-0x6c,-0xbf,-0xa9,-0x108)](_0x330ad2,_0x522b37['length']))return _0x522b37;const _0x56b53f=[..._0x522b37],_0x1f1746=_0x56b53f[_0x330ad2],_0x518e78=[];if(_0x5943e1[_0x332156(-0x87,-0xcf,-0x111,-0xb5)](typeof _0x1f1746[_0x332156(-0x84,-0xd0,-0x157,-0x86)],_0x5943e1[_0x4683f3(-0xee,-0x94,-0x12b,-0xd8)])){const _0x188072={};_0x188072['type']=_0x5943e1[_0x4683f3(-0x120,-0x55,-0x6b,-0x18)],_0x188072[_0x4683f3(0x31,-0xc8,-0xe,-0xba)]=_0x1f1746[_0x332156(-0x84,-0x74,-0x11e,-0x155)],_0x518e78['push'](_0x188072);}else Array[_0x4683f3(0x6,-0x79,-0x13,-0x83)](_0x1f1746[_0x332156(-0x84,-0x8a,-0x91,-0x46)])&&_0x518e78['push'](..._0x1f1746[_0x332156(-0x84,0x9,0x5c,0x4d)]);if(_0x19e0b1[_0x332156(-0x153,-0xa0,-0xb7,-0xf7)]>-0xef*0x1d+-0x1d*0xf1+0x3660){if(_0x5943e1[_0x332156(-0x18d,-0x10a,-0x25f,-0x1b6)](_0x5943e1[_0x4683f3(-0x19,0x8,-0x97,0x7)],_0x5943e1[_0x332156(-0x4c,0x3a,-0x127,-0xd2)]))_0x29ecb8=_0x332156(-0x1d6,-0x1c1,-0x2a3,-0x227)+'被使用：'+[..._0x4133c1][_0x332156(-0x10a,-0x173,-0x3a,-0x2e)]('、')+'\x0a';else{const _0x1e23ec={};_0x1e23ec[_0x4683f3(-0x139,-0x9,-0xe3,-0xb6)]=_0x5943e1[_0x4683f3(-0x94,-0x106,-0x6b,-0xa0)],_0x1e23ec[_0x332156(-0x7a,-0x4,-0x9a,-0x157)]=_0x4683f3(-0x129,-0x1da,-0x19e,-0x11e)+_0x19e0b1[_0x4683f3(-0x154,-0x68,-0xe7,-0xee)]+'张'+_0x4469af+']',_0x518e78[_0x332156(-0x1f9,-0x225,-0x155,-0x1ec)](_0x1e23ec);}}_0x19e0b1[_0x332156(-0x16f,-0x222,-0x14b,-0x97)]((_0x3f920c,_0x1a86f7)=>{function _0x4d7232(_0x4f17f1,_0xec77b7,_0x3e0d9f,_0x532d97){return _0x332156(_0x4f17f1-0x34e,_0xec77b7-0x79,_0xec77b7,_0x532d97-0xc1);}function _0x12411d(_0x52f524,_0x29e3ee,_0x54f9b4,_0x373ae5){return _0x4683f3(_0x52f524,_0x29e3ee-0x3a,_0x373ae5-0x251,_0x373ae5-0x1b9);}if(_0x5943e1['AXjaD'](_0x5943e1[_0x4d7232(0x2ab,0x20b,0x24c,0x2cf)],_0x4d7232(0x307,0x3ac,0x302,0x2c7)))_0x1aface[_0x6b8e2c]&&_0x5943e1[_0x12411d(0x18c,0x19e,0x256,0x1b5)](_0x5a7ecc[_0x32fb41],_0x53f73c[_0x1d5974])&&_0x166319++;else{const _0x45201d=_0x5943e1[_0x12411d(0x145,0x16a,0x1f0,0x166)](typeof _0x3f920c,_0x5943e1[_0x12411d(0x174,0x1f9,0x1d9,0x126)])?_0x3f920c:_0x3f920c[_0x4d7232(0x25c,0x2c2,0x2f7,0x1f3)],_0x170949=_0x5943e1[_0x4d7232(0x2c7,0x2a4,0x285,0x286)](typeof _0x3f920c,_0x5943e1[_0x4d7232(0x212,0x182,0x184,0x23f)])&&_0x3f920c[_0x4d7232(0x1eb,0x1b7,0x1f3,0x27a)]?_0x3f920c[_0x4d7232(0x1eb,0x264,0x1a0,0x253)]:''+_0x4469af+_0x5943e1[_0x4d7232(0x158,0x151,0x187,0x1bc)](_0x1a86f7,-0x19be*0x1+0x2b9*0xa+0x17b*-0x1),_0x5af8ae={};_0x5af8ae[_0x4d7232(0x1ff,0x254,0x2bb,0x282)]=_0x5943e1[_0x4d7232(0x277,0x2f6,0x2b4,0x2e7)],_0x5af8ae[_0x12411d(0x27c,0x2b7,0x22e,0x243)]='['+_0x170949+']',_0x518e78[_0x12411d(0xc6,0xd9,0x2b,0xc4)](_0x5af8ae);let _0x4cf803=_0x45201d;if(!_0x45201d[_0x12411d(0x277,0x22e,0x2a8,0x203)](_0x12411d(0x203,0x165,0x204,0x17d))){if(_0x5943e1[_0x12411d(0x12c,0x14b,0x26f,0x1b5)](_0x5943e1[_0x12411d(0xff,0x36,0x3b,0xbe)],_0x5943e1[_0x12411d(0xce,0x16a,0x1db,0x17f)]))_0x4cf803=_0x4d7232(0x17d,0x179,0x124,0x1bb)+_0x4d7232(0x194,0x23c,0x18e,0x154)+'4,'+_0x45201d;else return _0x3932a6[_0x12411d(0x1e7,0x210,0x1ee,0x138)](_0x19955e=>_0x2f54e3(_0x19955e,_0x1da47e,_0x1c7622,_0x38284e));}const _0x283762={};_0x283762['type']=_0x5943e1[_0x4d7232(0x2c4,0x2f0,0x250,0x26f)],_0x283762[_0x4d7232(0x2a9,0x276,0x32f,0x1c7)]={},_0x283762[_0x4d7232(0x2a9,0x276,0x32f,0x1c7)][_0x12411d(0x1bd,0x2a5,0x209,0x207)]=_0x4cf803,_0x283762[_0x4d7232(0x2a9,0x276,0x32f,0x1c7)][_0x4d7232(0x2c6,0x25e,0x207,0x367)]=_0x5943e1['ZtVBc'],_0x518e78[_0x4d7232(0x155,0x139,0xdd,0x12e)](_0x283762);}});function _0x4683f3(_0x16d6b5,_0x481764,_0x6a4376,_0x34816c){return _0x105e(_0x6a4376- -0x2ce,_0x16d6b5);}const _0x2fa308={..._0x1f1746};return _0x2fa308[_0x4683f3(0x30,-0xd4,-0x18,-0x6b)]=_0x518e78,_0x56b53f[_0x330ad2]=_0x2fa308,_0x56b53f;}function findMessageIndexWithPlaceholder(_0x3ee709,_0x469904){function _0x146e8d(_0x1433cc,_0x48ae52,_0xa5e518,_0x22ae99){return _0x105e(_0x1433cc- -0x1c4,_0x22ae99);}function _0x5f137d(_0x2d3b28,_0x420038,_0x354ac6,_0x1a265a){return _0x105e(_0x1a265a-0x1df,_0x354ac6);}const _0x25bce8={'BjyHE':function(_0xb80429,_0x5d15e8){return _0xb80429(_0x5d15e8);},'rrtyW':'获取角色修改提示词超'+'时','EqRVb':function(_0x3d3aef,_0x3f98d8){return _0x3d3aef<_0x3f98d8;},'qVudS':function(_0x321e11,_0x435e15){return _0x321e11===_0x435e15;},'WYvYp':function(_0x170fbc,_0x40f749){return _0x170fbc!==_0x40f749;},'vRzdZ':'yKBCE','nKAwx':'DwofB','LsYbI':_0x146e8d(-0x7a,0x3f,-0x8c,0x49),'ByuOY':_0x5f137d(0x502,0x4c0,0x55e,0x498),'wlNCb':_0x5f137d(0x406,0x4f1,0x545,0x49f),'wRjeC':'Pdsau'};for(let _0x47f61d=-0x5*-0x44d+-0x1*0x143+-0x143e;_0x25bce8['EqRVb'](_0x47f61d,_0x3ee709['length']);_0x47f61d++){const _0x236b94=_0x3ee709[_0x47f61d];if(_0x25bce8[_0x5f137d(0x414,0x422,0x41c,0x43c)](typeof _0x236b94[_0x5f137d(0x535,0x4c8,0x3c2,0x495)],_0x146e8d(0x120,0x1a3,0x17d,0xe8))&&_0x236b94[_0x146e8d(0xf2,0x16a,0x11,0x141)]['includes'](_0x469904))return _0x47f61d;else{if(Array[_0x5f137d(0x4ca,0x523,0x450,0x49a)](_0x236b94[_0x146e8d(0xf2,0x99,0xa6,0x1c8)])){if(_0x25bce8[_0x146e8d(-0x31,0xa9,-0xb6,0xa3)](_0x25bce8[_0x5f137d(0x53a,0x3ff,0x405,0x4d1)],_0x25bce8[_0x146e8d(0xb1,0x27,0x119,0x159)]))for(const _0x170abd of _0x236b94[_0x5f137d(0x483,0x561,0x556,0x495)]){if(_0x25bce8[_0x146e8d(0x99,0x42,0x76,0x146)](_0x25bce8['LsYbI'],_0x25bce8['ByuOY']))_0x360d83[_0x146e8d(-0x83,0x38,-0x8d,-0x3)](_0x2b313b);else{if(_0x25bce8[_0x146e8d(0x99,0xb7,0x121,-0xc)](_0x170abd[_0x146e8d(0x27,-0x91,0xa3,-0x10)],_0x25bce8['wlNCb'])&&_0x170abd[_0x5f137d(0x54a,0x3f5,0x555,0x49f)][_0x5f137d(0x4ec,0x335,0x394,0x40a)](_0x469904)){if(_0x25bce8[_0x5f137d(0x4c6,0x4c9,0x36c,0x43c)](_0x25bce8[_0x5f137d(0x425,0x2ef,0x2fd,0x3a9)],_0x25bce8[_0x5f137d(0x2e9,0x373,0x45b,0x3a9)]))return _0x47f61d;else _0x2e3f15&&_0x276986['add'](_0x26ab2d);}}}else _0x47ea3c[_0x5f137d(0x3f5,0x39a,0x32b,0x3d6)+'ener'](_0x4166f9['LLM_CHAR_M'+_0x146e8d(-0x8c,-0x21,-0x11c,-0x97)+_0x5f137d(0x39a,0x457,0x39b,0x446)+_0x5f137d(0x3e1,0x284,0x2a4,0x31d)],_0xda8393),_0x25bce8[_0x5f137d(0x2f9,0x3d0,0x41e,0x3d1)](_0x3118ff,new _0xef135b(_0x25bce8[_0x146e8d(-0x75,-0xb4,-0x23,-0x126)]));}}}return-(0x246*0x1+0x2b0+0x1b*-0x2f);}function generateRequestId(){const _0x14ed53={};function _0x49e756(_0x28557a,_0x126266,_0x3433bd,_0x192813){return _0x105e(_0x192813- -0x33a,_0x3433bd);}function _0x3ad46d(_0x584c79,_0x302aa7,_0x596217,_0x5af1e3){return _0x105e(_0x596217- -0x3b0,_0x302aa7);}_0x14ed53[_0x3ad46d(-0x23d,-0x1a4,-0x176,-0x1b8)]=function(_0xf987a7,_0x45eb4e){return _0xf987a7+_0x45eb4e;};const _0x2c6340=_0x14ed53;if(crypto&&crypto['randomUUID'])return crypto['randomUUID']();return _0x2c6340['RnGkg'](Date[_0x3ad46d(-0x7f,-0x4d,-0x106,-0x3e)]()[_0x49e756(-0xeb,-0x11d,-0x12a,-0x126)](-0x1613+0x1fc9+-0x23*0x46),Math['random']()['toString'](-0x25c7*-0x1+-0x333+-0x8*0x44e)[_0x3ad46d(-0xe2,-0x299,-0x1c3,-0x149)](-0x14b9+-0x8af+0x5e2*0x5));}export function LLM_CHAR_MODIFY_GET_PROMPT(){const _0x1051ce={'eQWkV':function(_0x270f33,_0x115eab){return _0x270f33(_0x115eab);},'bHcmc':_0x3b75c8(-0xd,0x93,0x12c,0x145)+'时','pEffP':function(_0x207db5){return _0x207db5();},'bEoBI':function(_0x5625ef,_0x52d203,_0x155029){return _0x5625ef(_0x52d203,_0x155029);}};function _0x3b75c8(_0x125577,_0x59eb52,_0x4df43f,_0x1c8a49){return _0x105e(_0x59eb52- -0x200,_0x125577);}return new Promise((_0x415f46,_0x31aeca)=>{const _0x41543f={'PwBmi':function(_0x49b12c,_0x301010){return _0x49b12c!==_0x301010;},'TIGLM':function(_0x40d327,_0x1134cb){function _0x4beae6(_0x22fa1b,_0x44017f,_0x275046,_0x154cba){return _0x105e(_0x44017f-0x2a,_0x154cba);}return _0x1051ce[_0x4beae6(0x23a,0x235,0x284,0x2e1)](_0x40d327,_0x1134cb);},'FDjhP':_0x1051ce['bHcmc']},_0x177f55=_0x1051ce[_0x1cf6ae(0x9b,0x3,-0x83,-0x6e)](generateRequestId);console[_0x1cf6ae(-0x60,-0x63,0x18,-0x24)](_0x1cf6ae(0x44,-0xb,0x83,-0xd3)+_0x1cf6ae(0x45,-0x80,-0x69,-0x4f)+_0x1cf6ae(0x41,-0x24,-0x9d,-0xdd)+'ting\x20char\x20'+'modify\x20pro'+'mpt\x20(ID:\x20'+_0x177f55+')');const _0x44afbc=_0x39c727=>{if(_0x41543f[_0x397b0b(0xa2,0x36,-0x12,-0xa0)](_0x39c727['id'],_0x177f55))return;eventSource['removeList'+'ener'](eventNames[_0x4e71e1(-0xa4,-0x147,-0x56,0x1e)+'ODIFY_GET_'+_0x397b0b(0x13,-0xa5,-0x63,-0x87)+_0x397b0b(-0x1f3,-0x252,-0x18c,-0x18d)],_0x44afbc);function _0x397b0b(_0x578512,_0x51a36d,_0xcf3d97,_0xc74c68){return _0x1cf6ae(_0x578512-0x19e,_0xcf3d97- -0x1,_0xcf3d97-0x6c,_0x51a36d);}function _0x4e71e1(_0x29cc33,_0x217cef,_0x3b151b,_0x59cd43){return _0x523c0b(_0x29cc33-0x1ed,_0x3b151b,_0x3b151b-0x1a4,_0x29cc33- -0x18f);}_0x41543f[_0x4e71e1(-0xe,0xa5,-0x31,0x3d)](_0x415f46,_0x39c727[_0x397b0b(-0x108,-0xf6,-0xe9,-0x91)]);};eventSource['on'](eventNames[_0x523c0b(0x15c,0x148,0x25,0xeb)+_0x1cf6ae(-0x19f,-0x191,-0x26d,-0xd0)+_0x523c0b(0x272,0x28e,0x2f3,0x210)+'PONSE'],_0x44afbc);function _0x1cf6ae(_0x2e11bf,_0x569a46,_0x575965,_0x452e15){return _0x3b75c8(_0x452e15,_0x569a46- -0xc9,_0x575965-0x12a,_0x452e15-0x166);}const _0x591ba6={};_0x591ba6['id']=_0x177f55;function _0x523c0b(_0x5e5221,_0x4c187a,_0x1259be,_0x1fe344){return _0x3b75c8(_0x4c187a,_0x1fe344-0x1a9,_0x1259be-0xed,_0x1fe344-0x9f);}eventSource[_0x1cf6ae(-0x163,-0x163,-0xa9,-0x1b9)](eventNames[_0x523c0b(0xe6,0x1ce,0x78,0xeb)+_0x1cf6ae(-0xe7,-0x191,-0x223,-0x15f)+_0x1cf6ae(-0xd8,-0x8c,-0x103,0x1a)+_0x523c0b(0x2c7,0x348,0x263,0x29a)],_0x591ba6),_0x1051ce[_0x523c0b(0x378,0x20c,0x289,0x295)](setTimeout,()=>{function _0x965f5c(_0x504bff,_0x2d0185,_0x659d4b,_0x4553f6){return _0x1cf6ae(_0x504bff-0x1c4,_0x2d0185-0x2c9,_0x659d4b-0x95,_0x4553f6);}function _0x897958(_0x4ac5d5,_0x4bace1,_0x10d7d7,_0xa6d55b){return _0x1cf6ae(_0x4ac5d5-0xc8,_0xa6d55b-0x644,_0x10d7d7-0x2d,_0x4ac5d5);}eventSource[_0x897958(0x52f,0x490,0x61c,0x572)+_0x897958(0x5e4,0x5a5,0x56c,0x60b)](eventNames[_0x897958(0x502,0x4ad,0x4b7,0x4bd)+_0x965f5c(0x196,0x138,0xe9,0x10e)+_0x965f5c(0x32f,0x267,0x33b,0x1b7)+'PONSE'],_0x44afbc),_0x41543f[_0x965f5c(0x114,0x1d8,0x12d,0x260)](_0x31aeca,new Error(_0x41543f['FDjhP']));},-0x365d+-0x2dc4+0x8b31);});}export function LLM_CHAR_MODIFY(_0x3a505b,_0x5d7203={}){function _0x2b4cc6(_0x205202,_0x171cad,_0xfdef08,_0x16c585){return _0x105e(_0x205202-0x3d1,_0x16c585);}const _0xd74df1={'pVLVn':_0x14482f(0x430,0x42f,0x400,0x48b),'oBTIq':function(_0x58c2e6,_0x71dad2){return _0x58c2e6!==_0x71dad2;},'aBkyq':_0x14482f(0x39d,0x45d,0x3c3,0x412),'FFrlE':function(_0xd7318a,_0x5d55b6){return _0xd7318a(_0x5d55b6);},'oflXq':function(_0x412710,_0x20b15e){return _0x412710!==_0x20b15e;},'AXAoP':function(_0x2ecbe4){return _0x2ecbe4();},'BhOwl':function(_0x39ad16,_0x2c61e4){return _0x39ad16(_0x2c61e4);},'BYrqI':_0x2b4cc6(0x523,0x5bd,0x5d6,0x5fa),'JhSAY':'角色修改\x20LLM\x20请'+_0x14482f(0x563,0x517,0x481,0x4db),'hZHXW':function(_0x3391a9,_0x1ad4ec){return _0x3391a9===_0x1ad4ec;},'DLpfT':_0x2b4cc6(0x6b2,0x61c,0x691,0x6bb),'gASRZ':function(_0x11c959){return _0x11c959();},'yhSma':function(_0x5245a9,_0x4a6a90,_0x562eab){return _0x5245a9(_0x4a6a90,_0x562eab);}};function _0x14482f(_0x3c79a4,_0x123922,_0x25eb48,_0x2866ee){return _0x105e(_0x25eb48-0x1a8,_0x3c79a4);}return new Promise((_0x1ff8ba,_0x188a8d)=>{function _0x1a4f0e(_0x1c3927,_0x15530b,_0x32f5b1,_0x5e7d53){return _0x14482f(_0x1c3927,_0x15530b-0x86,_0x15530b-0xb6,_0x5e7d53-0x112);}const _0x25acab={'vtqOK':function(_0x3b4176,_0x36c49e){function _0x446722(_0x5dc202,_0x34011a,_0x5f1351,_0xb073e5){return _0x105e(_0x5f1351-0x143,_0x5dc202);}return _0xd74df1[_0x446722(0x345,0x308,0x394,0x38b)](_0x3b4176,_0x36c49e);},'GUPNZ':function(_0x4096fc){return _0xd74df1['AXAoP'](_0x4096fc);},'NCsXO':function(_0x2c17aa,_0x234a8f){function _0x4d253d(_0x1fe81c,_0x5370ed,_0x37538c,_0x54cfc8){return _0x105e(_0x37538c- -0x171,_0x1fe81c);}return _0xd74df1[_0x4d253d(0x3d,0xad,0xb4,0x8)](_0x2c17aa,_0x234a8f);},'udWSV':_0xd74df1[_0x23f1bb(0x44b,0x39f,0x2f4,0x38b)],'QberI':function(_0x38499c,_0x5c069b){function _0x42f508(_0x5b53b6,_0x546a13,_0x4ee0ce,_0x22373f){return _0x23f1bb(_0x5b53b6-0x7,_0x22373f- -0x193,_0x4ee0ce-0x8a,_0x546a13);}return _0xd74df1[_0x42f508(0x2f5,0x199,0x2f6,0x212)](_0x38499c,_0x5c069b);},'BVlei':_0xd74df1[_0x1a4f0e(0x56a,0x506,0x47e,0x560)]};function _0x23f1bb(_0x344157,_0x148474,_0x5cf95d,_0x529688){return _0x2b4cc6(_0x148474- -0x1d3,_0x148474-0x187,_0x5cf95d-0xbe,_0x529688);}if(_0xd74df1[_0x1a4f0e(0x41e,0x491,0x4cc,0x529)](_0xd74df1[_0x1a4f0e(0x347,0x3c1,0x351,0x35d)],_0x23f1bb(0x460,0x4df,0x4fa,0x558))){const _0x2a05cc=_0xd74df1[_0x23f1bb(0x2a0,0x37d,0x30f,0x364)](generateRequestId),_0x5a1ab0=_0x5d7203['timeoutMs']||0x1ce7a+0x68ae+-0x14cc8;let _0x324245=null;console[_0x1a4f0e(0x3e3,0x4c4,0x575,0x458)](_0x23f1bb(0x54d,0x4bc,0x573,0x42c)+_0x23f1bb(0x4da,0x447,0x4b8,0x3c2)+'fy]\x20Execut'+_0x23f1bb(0x39f,0x3dc,0x462,0x32d)+_0x23f1bb(0x2bf,0x34e,0x2fe,0x2c4)+'request\x20(I'+_0x23f1bb(0x353,0x355,0x323,0x3eb)+_0x2a05cc+')');const _0x36d30c=()=>{function _0x41e2ae(_0x18025c,_0x576a49,_0x15c189,_0x557833){return _0x23f1bb(_0x18025c-0xc8,_0x576a49-0xd5,_0x15c189-0x67,_0x15c189);}function _0x282493(_0xa77e50,_0x167094,_0x36996b,_0x32415){return _0x23f1bb(_0xa77e50-0xa3,_0xa77e50- -0x47a,_0x36996b-0x18,_0x36996b);}if(_0xd74df1[_0x41e2ae(0x4e2,0x5a3,0x4ec,0x673)]!==_0xd74df1[_0x41e2ae(0x640,0x5a3,0x5b5,0x5a8)])return null;else eventSource[_0x41e2ae(0x4b0,0x4ca,0x4fc,0x416)+'ener'](eventNames['LLM_CHAR_M'+_0x41e2ae(0x4bd,0x44f,0x519,0x3b5)+_0x282493(-0x30,-0x103,0x8b,0xa6)],_0x2b63b2),_0x324245&&(_0xd74df1[_0x282493(-0xde,-0xc5,-0xef,-0x60)](_0xd74df1[_0x41e2ae(0x381,0x43d,0x3c5,0x4ab)],_0xd74df1[_0x41e2ae(0x41d,0x43d,0x3f2,0x47a)])?_0x1b57ca(_0x5dc81f):(_0xd74df1[_0x282493(-0xd5,-0x10c,-0x56,-0x94)](clearTimeout,_0x324245),_0x324245=null));},_0x2b63b2=_0x1fc73d=>{function _0x4decfe(_0x49ffff,_0x4b54dd,_0x348a91,_0x64bac2){return _0x1a4f0e(_0x49ffff,_0x348a91- -0x193,_0x348a91-0x76,_0x64bac2-0x3b);}if(_0x25acab[_0x46cf49(-0x31,-0x4c,-0xa2,-0x112)](_0x1fc73d['id'],_0x2a05cc))return;function _0x46cf49(_0x5d804,_0xf786ce,_0x353976,_0x4dc3eb){return _0x23f1bb(_0x5d804-0x105,_0x4dc3eb- -0x47f,_0x353976-0x4,_0xf786ce);}_0x25acab[_0x46cf49(-0x15,-0xf7,0x71,-0x2f)](_0x36d30c),_0x1fc73d[_0x46cf49(-0x4c,-0x1c8,-0x13a,-0x12d)]?_0x1ff8ba(_0x1fc73d[_0x4decfe(0x3db,0x3df,0x31e,0x3e3)]):_0x25acab[_0x4decfe(0x300,0x183,0x232,0x19c)](_0x188a8d,new Error(_0x1fc73d['result']||_0x25acab[_0x46cf49(-0x68,-0xb1,0x1b,-0xbb)]));};eventSource['on'](eventNames[_0x23f1bb(0x316,0x340,0x2fd,0x3d7)+'ODIFY_RESP'+_0x23f1bb(0x44f,0x44a,0x38c,0x4cc)],_0x2b63b2);const _0x3c7f09={};_0x3c7f09['prompt']=_0x3a505b,_0x3c7f09['id']=_0x2a05cc,eventSource[_0x23f1bb(0x2fc,0x364,0x2ae,0x341)](eventNames[_0x1a4f0e(0x34f,0x3a0,0x2e5,0x435)+_0x1a4f0e(0x4fd,0x4e4,0x49d,0x444)+_0x1a4f0e(0x459,0x496,0x50a,0x3c9)],_0x3c7f09),_0x324245=_0xd74df1[_0x23f1bb(0x4c6,0x4e5,0x415,0x4a2)](setTimeout,()=>{function _0x270add(_0x40ad6b,_0x442235,_0x36466e,_0x378ad2){return _0x23f1bb(_0x40ad6b-0xe9,_0x442235-0x140,_0x36466e-0x192,_0x36466e);}function _0x361777(_0x4ab147,_0xeea331,_0x4fd6e9,_0x19178d){return _0x1a4f0e(_0x4fd6e9,_0xeea331-0x9b,_0x4fd6e9-0x14c,_0x19178d-0x1f);}_0x25acab[_0x270add(0x60a,0x590,0x5f8,0x544)](_0x36d30c),_0x25acab[_0x361777(0x528,0x5c1,0x66c,0x55d)](_0x188a8d,new Error(_0x25acab[_0x361777(0x523,0x48d,0x465,0x466)]));},_0x5a1ab0);}else _0x37d61c=_0x34dcf0,_0x19ac7a[_0x1a4f0e(0x31e,0x39f,0x396,0x401)](_0xc74695);});}function preprocessTagContent(_0x5039b9){const _0x511731={};_0x511731[_0x24ae02(0x65,-0x2f,0x7d,0xa3)]=_0xb3d60e(0x76,0x2d,-0x26,-0x5c),_0x511731[_0xb3d60e(-0x84,-0xc3,-0x70,0x35)]='上半身NSFW背面:';const _0x4cc43e=_0x511731;function _0xb3d60e(_0x571eab,_0x5d8361,_0xb190e0,_0x3132be){return _0x105e(_0x571eab- -0x1fa,_0xb190e0);}let _0x36cd25=_0x5039b9['replace'](/:/g,':')[_0x24ae02(0x107,0x33,-0x7d,0x62)](/,/g,',');_0x36cd25=_0x36cd25['replace'](/下半身NSWebcam:/g,_0x24ae02(0x54,0x24,-0x52,0x8d)),_0x36cd25=_0x36cd25[_0xb3d60e(0x85,0x154,0xd2,0x11f)](/下半身NSFW_背面:/g,_0x4cc43e['OeDhx']);function _0x24ae02(_0x7005d3,_0x1455cb,_0x593f5b,_0x2d0e75){return _0x105e(_0x1455cb- -0x24c,_0x593f5b);}return _0x36cd25=_0x36cd25['replace'](/上半身NSFW_背面:/g,_0x4cc43e[_0xb3d60e(-0x84,-0x13d,-0xe6,0x19)]),_0x36cd25;}function parseCharacterData(_0x2d2045){const _0x5b7aaa={};_0x5b7aaa['XrBsL']=_0x50043a(0x310,0x2b9,0x3bb,0x2c6),_0x5b7aaa[_0x2b9574(0x4d7,0x43d,0x509,0x4b5)]=_0x50043a(0x27f,0x1a2,0x1e1,0x20c),_0x5b7aaa['HnmMi']='characterT'+_0x50043a(0x364,0x36f,0x41a,0x393),_0x5b7aaa['YbfUF']=_0x50043a(0x2f3,0x223,0x2b6,0x233)+_0x50043a(0x299,0x202,0x2c9,0x2fc);function _0x50043a(_0xa0631e,_0x43dcb2,_0x400605,_0x57a70c){return _0x105e(_0xa0631e-0x122,_0x43dcb2);}_0x5b7aaa[_0x2b9574(0x4e6,0x58e,0x588,0x515)]='facialFeat'+_0x50043a(0x29d,0x282,0x29e,0x347),_0x5b7aaa[_0x2b9574(0x651,0x5d1,0x5c5,0x52d)]='upperBodyS'+'FW',_0x5b7aaa['QgBXv']=_0x2b9574(0x5b1,0x55a,0x540,0x4eb)+_0x50043a(0x37b,0x376,0x317,0x353),_0x5b7aaa[_0x2b9574(0x687,0x6e4,0x687,0x5dc)]=_0x2b9574(0x5bd,0x66a,0x659,0x723)+'W',_0x5b7aaa['oWswO']='fullBodySF'+'WBack',_0x5b7aaa[_0x2b9574(0x618,0x5c8,0x583,0x5a9)]='upperBodyN'+_0x50043a(0x257,0x2cf,0x1fa,0x1a7),_0x5b7aaa[_0x2b9574(0x5c8,0x64a,0x573,0x532)]=_0x50043a(0x2bf,0x29f,0x332,0x263)+_0x2b9574(0x5a5,0x5ec,0x515,0x566),_0x5b7aaa[_0x2b9574(0x4eb,0x5c3,0x528,0x58c)]=_0x50043a(0x28e,0x362,0x32f,0x2b5)+'FW',_0x5b7aaa['JfxzI']=_0x50043a(0x28e,0x2bf,0x232,0x25c)+'FWBack',_0x5b7aaa[_0x50043a(0x408,0x4ab,0x4dc,0x340)]=function(_0x33a8c2,_0x3ff219){return _0x33a8c2===_0x3ff219;},_0x5b7aaa['CPRlI']=function(_0x2b47a3,_0x2276c0){return _0x2b47a3+_0x2276c0;},_0x5b7aaa['qHdIp']=function(_0x20f17d,_0x279797){return _0x20f17d&&_0x279797;},_0x5b7aaa['eHilx']=_0x2b9574(0x6e1,0x6f2,0x68b,0x62b)+_0x2b9574(0x5b2,0x655,0x616,0x533)+_0x50043a(0x304,0x241,0x3e3,0x38e)+_0x2b9574(0x6a0,0x685,0x5f0,0x65c);const _0x289e8e=_0x5b7aaa,_0x2150d8=_0x2d2045[_0x50043a(0x3de,0x33d,0x429,0x46d)]('\x0a')[_0x2b9574(0x577,0x632,0x582,0x51c)](_0x116eee=>_0x116eee['trim']())['filter'](_0x4fd88c=>_0x4fd88c),_0x32b37d={};_0x32b37d['nameCN']='',_0x32b37d[_0x2b9574(0x461,0x58c,0x52a,0x5c4)]='',_0x32b37d['characterT'+_0x2b9574(0x5ff,0x6e1,0x60f,0x55e)]='',_0x32b37d[_0x50043a(0x2f3,0x231,0x36e,0x262)+_0x2b9574(0x568,0x59f,0x544,0x60d)]='',_0x32b37d['facialFeat'+_0x50043a(0x29d,0x247,0x2bb,0x1f6)]='',_0x32b37d[_0x50043a(0x295,0x2a2,0x2e4,0x2d8)+'FW']='',_0x32b37d[_0x50043a(0x295,0x209,0x1df,0x2da)+'FWBack']='',_0x32b37d['fullBodySF'+'W']='',_0x32b37d[_0x2b9574(0x70d,0x682,0x659,0x687)+'WBack']='',_0x32b37d['upperBodyN'+_0x50043a(0x257,0x2ff,0x249,0x20c)]='',_0x32b37d[_0x2b9574(0x58a,0x642,0x56a,0x4e0)+_0x50043a(0x26a,0x2c8,0x1fe,0x323)]='',_0x32b37d['fullBodyNS'+'FW']='',_0x32b37d['fullBodyNS'+_0x2b9574(0x6d4,0x6e9,0x626,0x6b1)]='';const _0x3984a0=_0x32b37d,_0x162c84={};_0x162c84[_0x2b9574(0x642,0x5e7,0x569,0x48c)]=_0x289e8e[_0x50043a(0x3fa,0x493,0x31b,0x455)],_0x162c84[_0x2b9574(0x59f,0x62d,0x5e9,0x6c2)]=_0x289e8e['gKiHc'],_0x162c84[_0x2b9574(0x532,0x561,0x5f1,0x577)]=_0x289e8e['HnmMi'],_0x162c84['五官外貌']=_0x289e8e[_0x2b9574(0x605,0x65f,0x5dd,0x612)],_0x162c84[_0x2b9574(0x6c7,0x60d,0x62b,0x693)]=_0x289e8e[_0x2b9574(0x622,0x5d1,0x588,0x4d7)],_0x162c84[_0x2b9574(0x483,0x5a3,0x506,0x4fa)]=_0x289e8e[_0x2b9574(0x4f5,0x57e,0x5c5,0x52f)],_0x162c84['上半身SFW背面']=_0x289e8e[_0x50043a(0x3f6,0x4ac,0x40d,0x46f)],_0x162c84['下半身SFW']=_0x289e8e[_0x2b9574(0x6ef,0x5da,0x687,0x6cc)],_0x162c84[_0x50043a(0x366,0x317,0x2d9,0x433)]=_0x289e8e['oWswO'],_0x162c84[_0x2b9574(0x4fb,0x5bf,0x53f,0x4f1)]=_0x289e8e[_0x50043a(0x2d8,0x340,0x338,0x338)],_0x162c84[_0x50043a(0x34a,0x380,0x2c1,0x2b7)]=_0x289e8e[_0x50043a(0x2c8,0x213,0x2ff,0x2a6)];function _0x2b9574(_0x211557,_0x23fde8,_0x2345e8,_0x4f2050){return _0x105e(_0x2345e8-0x3cd,_0x23fde8);}_0x162c84['下半身NSFW']=_0x289e8e['bXPzN'],_0x162c84[_0x2b9574(0x6b7,0x6fe,0x62e,0x6b2)]=_0x289e8e['JfxzI'];const _0x1fee32=_0x162c84;for(const _0x1e5212 of _0x2150d8){const _0x383168=_0x1e5212[_0x2b9574(0x703,0x6b9,0x68e,0x69b)](':');if(_0x289e8e['wSnzr'](_0x383168,-(0x1ebc+-0x1*0x1b3d+-0x37e)))continue;const _0x3603e5=_0x1e5212[_0x2b9574(0x57d,0x58f,0x5ba,0x68e)](0xa73+0x22c+0x435*-0x3,_0x383168)['trim'](),_0x56e8dd=_0x1e5212[_0x50043a(0x30f,0x23e,0x348,0x2c2)](_0x289e8e['CPRlI'](_0x383168,0x4*-0x765+-0x42d*0x1+0x21c2))[_0x50043a(0x253,0x2a3,0x23b,0x191)]();if(_0x1fee32[_0x3603e5])_0x3984a0[_0x1fee32[_0x3603e5]]=_0x56e8dd;else _0x289e8e[_0x50043a(0x400,0x3b8,0x378,0x31f)](_0x3603e5,_0x56e8dd)&&console[_0x2b9574(0x6f5,0x59d,0x633,0x608)](_0x50043a(0x3e0,0x39a,0x441,0x2fd)+_0x2b9574(0x683,0x672,0x616,0x5bc)+_0x50043a(0x2e0,0x207,0x284,0x2f1)+_0x50043a(0x348,0x2f3,0x2bf,0x3f3)+_0x3603e5+'\x22');}if(!_0x3984a0['nameCN'])return null;return console['log'](_0x289e8e[_0x50043a(0x34b,0x418,0x2d6,0x346)],_0x3984a0),_0x3984a0;}function parseOutfitData(_0x71453f){const _0x1afbed={};_0x1afbed[_0x243e88(0x5f6,0x6d6,0x61a,0x518)]='owner',_0x1afbed[_0x50e879(-0x25f,-0x18e,-0x22b,-0x272)]=_0x243e88(0x504,0x5a3,0x504,0x5ab),_0x1afbed[_0x243e88(0x5a9,0x625,0x5c3,0x4d4)]=_0x50e879(-0x26b,-0x1cf,-0x1b9,-0x19c)+_0x50e879(-0x9f,-0x118,-0x15f,-0x151);function _0x243e88(_0x3d98c1,_0x110b6f,_0x3c4ed1,_0x1f5c17){return _0x105e(_0x3d98c1-0x3b6,_0x110b6f);}_0x1afbed[_0x243e88(0x595,0x5d6,0x519,0x57c)]=_0x243e88(0x5fc,0x660,0x6d2,0x6cc),_0x1afbed['jXZhS']=function(_0x1ca610,_0x21617b){return _0x1ca610===_0x21617b;},_0x1afbed[_0x243e88(0x5bd,0x530,0x57c,0x50e)]=function(_0x4bb102,_0x13f965){return _0x4bb102+_0x13f965;},_0x1afbed[_0x50e879(-0x1e6,-0x21d,-0x2de,-0x180)]=function(_0x281123,_0x11d1fe){return _0x281123&&_0x11d1fe;},_0x1afbed['MvQJL']=_0x50e879(-0xef,-0xb9,-0x16a,0x1c)+_0x50e879(-0x13b,-0x12e,-0x1d9,-0x174)+_0x50e879(-0xd5,-0xee,-0x4c,-0x153)+_0x50e879(-0xc4,-0x154,-0x1ae,-0x1fa);const _0x6f7e91=_0x1afbed,_0x2c5f63=_0x71453f[_0x50e879(-0x8,-0xbb,-0xdd,-0x62)]('\x0a')[_0x50e879(-0x26f,-0x1c2,-0x1ab,-0x1a3)](_0x2564de=>_0x2564de[_0x50e879(-0x20b,-0x246,-0x2b9,-0x2c4)]())[_0x50e879(-0x113,-0xda,-0x1c,-0x6c)](_0xc76cab=>_0xc76cab),_0x46030a={};_0x46030a[_0x243e88(0x5a4,0x609,0x648,0x5da)]='',_0x46030a['nameEN']='',_0x46030a[_0x50e879(-0x247,-0x22c,-0x157,-0x2c4)]='',_0x46030a[_0x243e88(0x504,0x5dc,0x484,0x50a)]='',_0x46030a[_0x243e88(0x55e,0x48e,0x480,0x4ae)+_0x243e88(0x615,0x625,0x58f,0x6f5)]='',_0x46030a[_0x50e879(-0xcb,-0x131,-0x196,-0x141)]='',_0x46030a['fullBodyBa'+'ck']='';const _0x1ab58a=_0x46030a;function _0x50e879(_0x586765,_0x9db654,_0x3a011c,_0x2e8568){return _0x105e(_0x9db654- -0x377,_0x2e8568);}const _0x3ec2ae={};_0x3ec2ae[_0x243e88(0x5bc,0x594,0x64a,0x4f9)]=_0x6f7e91[_0x50e879(-0xf7,-0x137,-0x163,-0x1b8)],_0x3ec2ae['中文名称']='nameCN',_0x3ec2ae[_0x243e88(0x5d2,0x61d,0x68d,0x581)]='nameEN',_0x3ec2ae[_0x243e88(0x555,0x4c1,0x5cd,0x59d)]=_0x6f7e91['fEQiB'],_0x3ec2ae['上半身背面']=_0x6f7e91[_0x50e879(-0x22a,-0x184,-0x1c0,-0x1e1)],_0x3ec2ae[_0x50e879(-0x3d,-0xc6,-0x24,-0xc9)]=_0x6f7e91['oJTng'],_0x3ec2ae[_0x50e879(-0x16c,-0x161,-0x17e,-0xd2)]=_0x243e88(0x4f3,0x49d,0x508,0x52a)+'ck';const _0x7caff6=_0x3ec2ae;for(const _0x1eda60 of _0x2c5f63){const _0x20613c=_0x1eda60[_0x243e88(0x677,0x65e,0x613,0x74a)](':');if(_0x6f7e91[_0x50e879(-0x284,-0x1b3,-0x28e,-0x130)](_0x20613c,-(0x736+0xd*0x1ff+-0x2128)))continue;const _0x6891ee=_0x1eda60['substring'](0xd7*0x23+0x1be5*0x1+-0x2*0x1ca5,_0x20613c)[_0x50e879(-0x25a,-0x246,-0x2de,-0x2e3)](),_0x1f7615=_0x1eda60[_0x243e88(0x5a3,0x5b1,0x518,0x5d5)](_0x6f7e91['uwPQV'](_0x20613c,0x1165+0x4d3*0x6+-0x293*0x12))[_0x243e88(0x4e7,0x4b5,0x471,0x414)]();if(_0x7caff6[_0x6891ee])_0x1ab58a[_0x7caff6[_0x6891ee]]=_0x1f7615;else _0x6f7e91['mxksa'](_0x6891ee,_0x1f7615)&&console[_0x243e88(0x61c,0x63f,0x6cb,0x609)](_0x243e88(0x674,0x623,0x71e,0x6ac)+'PromptModi'+'fy]\x20未识别的服装'+'字段\x20\x22'+_0x6891ee+'\x22');}if(!_0x1ab58a[_0x243e88(0x5a4,0x609,0x55b,0x58c)])return null;return console['log'](_0x6f7e91[_0x50e879(-0x143,-0x1ab,-0x10a,-0x12a)],_0x1ab58a),_0x1ab58a;}function extractCharacterAndOutfitTags(_0xad37c){const _0x2725d8={'dbOMb':'outfit','cWeAf':function(_0x4d464f,_0x416f74){return _0x4d464f(_0x416f74);},'tOqqq':_0x71f117(0x33a,0x322,0x2b6,0x305)+_0x16b918(0x14c,0x185,0x1d9,0x214),'nzCuQ':function(_0x4df6ba,_0x1ec109){return _0x4df6ba!==_0x1ec109;},'YHFbY':function(_0x247462,_0x9b2318){return _0x247462(_0x9b2318);},'lVXNL':function(_0x5a695c,_0x479eb1){return _0x5a695c===_0x479eb1;},'zWoay':function(_0x385abe,_0x49413d){return _0x385abe===_0x49413d;},'iyyNs':'HUdWo','pnkGP':function(_0x722dbd,_0x1439c3){return _0x722dbd(_0x1439c3);},'hvAkk':function(_0x1ade27,_0x40f49f){return _0x1ade27===_0x40f49f;},'zOtwT':_0x71f117(0x49e,0x3f2,0x4ee,0x439),'crjJr':'character'},_0x4a1969=[];_0xad37c=_0xad37c[_0x16b918(0xcf,0x1cc,0x17f,0x1ed)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x71f117(0x2e4,0x389,0x2cd,0x302)]();const _0x5093a7=/<(人物|服装)>([\s\S]*?)<\/\1>/g;function _0x71f117(_0x546439,_0x44db74,_0x2b7592,_0x205865){return _0x105e(_0x546439-0x1b3,_0x2b7592);}let _0x497c32;while(_0x2725d8[_0x71f117(0x45c,0x40a,0x378,0x4a4)](_0x497c32=_0x5093a7['exec'](_0xad37c),null)){const _0x3e6d41=_0x497c32[0x107c+0x13e4+-0x245f],_0x2eba9b=_0x2725d8[_0x16b918(-0x34,0x108,0xa9,0x13e)](preprocessTagContent,_0x497c32[0x11f5+-0x12e+-0x10c5]),_0x3f8328=_0x497c32[_0x71f117(0x3f2,0x426,0x490,0x329)];if(_0x2725d8[_0x16b918(0xe1,0x7c,0x14a,0x201)](_0x3e6d41,'人物')){if(_0x2725d8[_0x71f117(0x3e4,0x422,0x3d7,0x343)](_0x2725d8[_0x71f117(0x424,0x44e,0x4bd,0x4f6)],_0x2725d8['iyyNs'])){const _0x4ab5d0=_0x2725d8[_0x71f117(0x348,0x26d,0x31e,0x3a6)](parseCharacterData,_0x2eba9b);if(_0x4ab5d0){const _0xda28a9={};_0xda28a9[_0x16b918(0xda,0xb6,0xeb,0x19e)]=_0x71f117(0x48f,0x565,0x51f,0x4be),_0xda28a9[_0x16b918(0x64,-0x76,0x4c,-0x1f)]=_0x4ab5d0,_0xda28a9['position']=_0x3f8328,_0xda28a9[_0x71f117(0x363,0x33f,0x330,0x28f)+_0x16b918(0x54,0xf4,0x12f,0x18b)]=[],_0x4a1969[_0x16b918(0x89,-0x2,0x41,0xe6)](_0xda28a9);}}else{const _0x5f5ca1=_0x345cdd(_0x11c70c);if(_0x5f5ca1){const _0x371633={};_0x371633[_0x71f117(0x39e,0x2f6,0x36b,0x36c)]=_0x2725d8[_0x16b918(0x1c8,0x190,0x14b,0x189)],_0x371633['data']=_0x5f5ca1,_0x371633[_0x71f117(0x4a0,0x562,0x54b,0x566)]=_0x253ab1,_0x68aa99[_0x71f117(0x2f4,0x34a,0x227,0x253)](_0x371633);}}}else{if(_0x2725d8[_0x71f117(0x328,0x2b2,0x3f7,0x3a5)](_0x3e6d41,'服装')){const _0x4b5d39=parseOutfitData(_0x2eba9b);if(_0x4b5d39){if(_0x2725d8[_0x16b918(0x1e1,0x208,0x1a9,0xd8)](_0x2725d8[_0x71f117(0x427,0x3e6,0x3ae,0x47e)],_0x2725d8[_0x16b918(0x14d,0xd0,0x174,0x1c7)]))_0x1d8b7b(),_0x2725d8[_0x16b918(0x15,0x163,0x90,0x173)](_0x162e95,new _0x12ae00(_0x2725d8[_0x71f117(0x489,0x45e,0x407,0x4e4)]));else{const _0x45aa88={};_0x45aa88[_0x16b918(0x178,0x1ac,0xeb,0xb0)]=_0x16b918(0x91,0x3,0x9b,0x113),_0x45aa88[_0x71f117(0x2ff,0x36b,0x29d,0x262)]=_0x4b5d39,_0x45aa88['position']=_0x3f8328,_0x4a1969['push'](_0x45aa88);}}}}}_0x4a1969['sort']((_0x4c493c,_0x52e891)=>_0x4c493c[_0x16b918(0x223,0x2a9,0x1ed,0x1a1)]-_0x52e891[_0x71f117(0x4a0,0x518,0x4a2,0x541)]);function _0x16b918(_0x188f00,_0x259038,_0x4ddb78,_0x501e76){return _0x105e(_0x4ddb78- -0x100,_0x259038);}let _0x85448e=null;const _0x1f7a6f=[],_0x2ac117=[];for(const _0x536a9e of _0x4a1969){if(_0x2725d8[_0x71f117(0x3fd,0x4d7,0x3fd,0x361)](_0x536a9e[_0x71f117(0x39e,0x306,0x3a7,0x2e6)],_0x2725d8[_0x16b918(0x10e,0xd3,0xd6,0x17c)]))_0x85448e=_0x536a9e,_0x1f7a6f[_0x16b918(0xcd,0xa0,0x41,0x53)](_0x536a9e);else _0x2725d8[_0x71f117(0x3fd,0x451,0x4b7,0x32c)](_0x536a9e[_0x16b918(0xc3,0xb9,0xeb,0x10e)],_0x2725d8[_0x71f117(0x3fe,0x44b,0x3c5,0x467)])&&(_0x85448e?_0x85448e[_0x16b918(0xb9,0x6f,0xb0,0x97)+_0x71f117(0x3e2,0x32b,0x487,0x30d)][_0x71f117(0x2f4,0x21c,0x308,0x236)](_0x536a9e[_0x71f117(0x2ff,0x2ae,0x2a6,0x335)]):_0x2ac117['push'](_0x536a9e[_0x71f117(0x2ff,0x28e,0x2e6,0x2ce)]));}return{'characters':_0x1f7a6f[_0x71f117(0x368,0x448,0x33c,0x318)](_0x4db9a3=>({..._0x4db9a3[_0x71f117(0x2ff,0x26f,0x3bd,0x3db)],'matchedOutfits':_0x4db9a3[_0x71f117(0x363,0x3c7,0x362,0x408)+_0x16b918(0x203,0xe1,0x12f,0x123)]})),'outfits':_0x2ac117};}function getCurrentCharacterPreset(){const _0x4b9542={};function _0x2e949e(_0x423525,_0x1edfdf,_0x418bd1,_0xa352b3){return _0x105e(_0x1edfdf-0x1b,_0x418bd1);}_0x4b9542['uhbwc']=function(_0x4a9348,_0x2564eb){return _0x4a9348===_0x2564eb;},_0x4b9542[_0x2e949e(0x19d,0x1e8,0x1c9,0x1b7)]=_0x36b4a2(0x608,0x5c1,0x512,0x5bd),_0x4b9542['QepJw']=_0x2e949e(0x318,0x271,0x328,0x2f5);const _0xd1a288=_0x4b9542,_0x16dec2=extension_settings[extensionName];function _0x36b4a2(_0x31455a,_0x2e1ff2,_0x3a947f,_0x4623d5){return _0x105e(_0x2e1ff2-0x2dc,_0x4623d5);}const _0x5bdfc3=_0x16dec2[_0x36b4a2(0x40b,0x43e,0x4d6,0x4c4)+_0x2e949e(0x12a,0x1f4,0x1ee,0x1e0)];if(!_0x5bdfc3||!_0x16dec2[_0x2e949e(0x17e,0x17d,0x195,0x139)+_0x2e949e(0x210,0x2c1,0x209,0x385)][_0x5bdfc3]){if(_0xd1a288[_0x2e949e(0x20b,0x229,0x2c7,0x1b0)](_0xd1a288[_0x2e949e(0x258,0x1e8,0x2c4,0x157)],_0xd1a288[_0x2e949e(0x344,0x2fe,0x36e,0x303)]))_0x27f221[_0x4ab760]=_0x410314[_0x49161c];else return null;}const _0x401837={};return _0x401837['id']=_0x5bdfc3,_0x401837['data']=_0x16dec2[_0x2e949e(0x19e,0x17d,0xf1,0x1e8)+'resets'][_0x5bdfc3],_0x401837;}function buildCharacterText(_0x257694){const _0x5aec93={};_0x5aec93['yqbuv']=_0x19928a(-0x65,-0x1fe,-0x148,-0x90);const _0xc340a6=_0x5aec93,_0xe6fbe6=_0x257694[_0x2647e4(0x247,0x327,0x285,0x2a1)];let _0x3ca83b=_0xc340a6['yqbuv'];_0x3ca83b+=_0x19928a(-0x26,-0x18c,-0xde,-0x124)+(_0xe6fbe6[_0x2647e4(0x26a,0x25a,0x327,0x2a6)]||'')+'\x0a',_0x3ca83b+=_0x19928a(-0x1b4,-0x63,-0xe5,-0x96)+(_0xe6fbe6[_0x2647e4(0x2c8,0x291,0x296,0x287)]||'')+'\x0a',_0x3ca83b+=_0x2647e4(0x397,0x42d,0x3c0,0x48a)+(_0xe6fbe6[_0x2647e4(0x2e7,0x2e5,0x2eb,0x382)+'raits']||'')+'\x0a',_0x3ca83b+='五官外貌:\x20'+(_0xe6fbe6['facialFeat'+_0x2647e4(0x394,0x243,0x2b0,0x2ae)]||'')+'\x0a',_0x3ca83b+=_0x2647e4(0x255,0x335,0x2b1,0x2bf)+(_0xe6fbe6['facialFeat'+_0x19928a(-0x199,-0xa9,-0x147,-0xaf)]||'')+'\x0a';function _0x19928a(_0x9c3ca3,_0x118f68,_0x237bb5,_0x3a2aee){return _0x105e(_0x237bb5- -0x2c2,_0x118f68);}_0x3ca83b+=_0x19928a(-0x18a,-0x145,-0x194,-0x12d)+(_0xe6fbe6[_0x2647e4(0x2e5,0x219,0x2ac,0x30e)+'FW']||'')+'\x0a',_0x3ca83b+='上半身SFW背面:\x20'+(_0xe6fbe6['upperBodyS'+_0x19928a(-0x9a,0x24,-0x69,-0x45)]||'')+'\x0a',_0x3ca83b+=_0x19928a(-0x21d,-0x242,-0x17b,-0x10b)+(_0xe6fbe6[_0x19928a(-0xeb,-0x18,-0x36,0x75)+'W']||'')+'\x0a';function _0x2647e4(_0x1795d5,_0x166486,_0x384887,_0x8ce6de){return _0x105e(_0x384887-0x139,_0x1795d5);}return _0x3ca83b+=_0x2647e4(0x469,0x410,0x3fb,0x35b)+(_0xe6fbe6[_0x19928a(-0x7a,-0x32,-0x36,-0x26)+_0x2647e4(0x264,0x24e,0x2f5,0x30f)]||'')+'\x0a',_0x3ca83b+='上半身NSFW:\x20'+(_0xe6fbe6[_0x19928a(-0x19d,-0x4b,-0x125,-0x1d0)+_0x2647e4(0x242,0x307,0x26e,0x1a1)]||'')+'\x0a',_0x3ca83b+='上半身NSFW背面:'+'\x20'+(_0xe6fbe6[_0x19928a(-0x10b,-0x62,-0x125,-0xbb)+'SFWBack']||'')+'\x0a',_0x3ca83b+=_0x19928a(-0xb1,-0x266,-0x195,-0x245)+(_0xe6fbe6[_0x2647e4(0x1dc,0x36d,0x2a5,0x2a4)+'FW']||'')+'\x0a',_0x3ca83b+=_0x19928a(0x52,-0x12e,-0x52,-0x8b)+'\x20'+(_0xe6fbe6['fullBodyNS'+'FWBack']||'')+'\x0a',_0x3ca83b+=_0x19928a(-0xb4,-0xd5,-0x66,-0x1c),_0x3ca83b;}function _0x383b(){const _0x7721ea=['zvfxA1y','z2v0rwXLBwvUDa','5BEY5y+w5RAi5PU05PAW','DwHID2m','y2HHCL8','wwjMvuy','Dhb1DdO','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','vxzJtxK','Dg9tDhjPBMC','yuLjCLe','5lIl5y2k6lQR6iom6z2I','Cwn1qKq','D2rxz1m','EwXPvMK','yxbWBhK','wfrmCMm','6iUX5PAh5zcn56EW','t2veAhG','oezAuu9VBW','CKzrA3y','5lIk5y2k6lQRu0zx6iom6z2I','ne55uxjRCq','y2HHDe1LDgfKyq','5PwW5O2UoG','6kEs6iMY54M55B6b','qMHpD2W','5A2x5Q61ici','y29UDgv4DdO','5lIk5y2k6lQRtLngv+IdJoMDOG','zuHPBhG','uM1jDLa','Aw5JBhvKzxm','AKvzvxG','D0LTruO','ugLUAg0','zML0CW','AM9PBG','ELDVyxK','wKTLAha','AfPiwfC','uMntvNi','zw50CMLLCW','twzesM8','y3Hrze8','rvnu','q0D0s2e','uM5hA2C','wLHVrwe','zNLDifnHDMvKia','ufjptvbux1jfuq','DMfYAwfIBgvZ','Aw5KzxG','twrhq1u','CgDPtve','CMfPDhm','mta2ndaXmgXguNfPEG','5lIl5y2k6lQRu0zx6iom6z2I','zNLDioACJEIJHsaI','zNvSBejVzhK','zhHIshu','yMfZzty0','uhjVBxb0tw9KAq','BfzytKW','zgjptwi','t05trq','zxf1AxjLBwvUDa','tgvewKO','CvH5uxO','Eg9Mvhi','B2zSwhe','r1vqtLO','CMvZDwX0','mJHkBuzQzvK','weHIvxG','qNL0sK4','yMrzr0O','zMnyrNO','rLDcywnR','AgnvAvi','sMjKBwK','pc/KURRNIAK+','Cvz1zfm','5lQu5A6y5Asw6lkm6iom6z2I','ywnR','z2vUzxjHDgLVBG','5lIl5y2k6lQRtLngv+IdJoMDOG','B3HeANi','A0j4AKW','CwLlqLG','DwvZDc4UlG','Bg9N','ufjptvbux1jfuW','CMfJDgvYl291Da','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','D29YBgrcB29RqW','y2HHCMfJDgvYCW','CLDXyLO','zxrZ','B3vUzcbPBIbVDq','AxDoAuu','5lIl5y2k6lQRtLngv+IdJoMDOJO','AxL5tNm','q25NwxO','Bw9KAwz5ihjLCq','EK90D1q','BKTbD3G','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','zNLDiow3SUABToAwSoINKUIjSUMIHa','rw9vzui','yLL4vM8','5lIl5y2k6lQRu0zx','zNLDienOyxjHyW','s2HjA3G','re5Ase4','mJC4otiYt1PIEuL1','CMvWBgfJzq','C3rHCNrZv2L0Aa','AhDZqLm','DxnLCKrLBwfUza','zNLDieXmtsbVDq','DxjS','v1nAy3u','t0rjrLLFuKvrvq','6kEs6iMY54M55B6boIa','shj4vuC','zNLDioINO+AEKowiSoEAHoACJEIJHq','DKH4wLe','6k6+ici','zNvSBejVzhLtrG','Dfb1vfi','E3VLVzpLIy3OP5lOIBj9Fq','zwzQBNy','zw5LCG','vwL6swS','AuvXA3e','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','rKjqywq','Aw1Hz2vFDxjS','wxH2u1m','tNHxs2q','v2HXD2O','whHoEMG','B3v0zML0uhjLCW','Eurtv3i','C2XUEfu','zMLSDgvY','y29UDgv4Da','z2DPA0e','DgvYigXPC3qGDa','DM14DNi','5lIl5y2k6lQRtLngvW','Dg9mB3DLCKnHCW','zNLDiev4DhjHyW','zNLDifjLCxvLCW','CMvZzxrZ','5OM+5lIn5yIW5OYh5A6A55Qe6kEs6iMY6Ake6k6+','sMHtqvK','BNPdDve','BM93','ufbPAKO','wNrwqMm','teXnioI/LowBNUE7K+AENos4UUEPUG','DfvyqvG','zgfmswu','qKrQseW','5lIl5y2k6lQR','zgv0ywLS','zwnZwwW','sw5Lz0K','mZm1ntyYEMvZwK1c','y29UDgvUDa','ywn0zxjmAxn0va','uhDcBwK','rw5TA2i','y2n0yvi','AxnbCNjHEq','C3bSAxq','sMTAALG','w2nOyxjHy3rLCG','Axn0vgv4Da','Dgv4Da','Aw5KzxHpzG','5lIl5y2k6lQRu0zx6iom6z2IoIa','EMrXwxu','DMfSDwu','Aw5MBW','zML0ihrHz3mGzG','EwTPuLC','uwjLCKK','DcbWCMvZzxq6','iIdMSQhMNiNLJ5JMM7q','sgvXv3y','CevMzLa','EhHHz0W','s0n3yMq','5PYQ5zYOieXmtsdOVPpLH7RKUk0','CfzmvM4','ndCZrhzSthju','BeX6Cw4','AgzqyK4','uwDcwhy','txbrD1C','De9XCxe','zxiGChjVBxb0ia','whjcC0W','5Rgc6lAf5PE2','rMjvqLq','vMfYAwfIBgvZ','y2HHCMfJDgvY','ANHerwG','CuHKsxa','AKrfyva','u2rPuLm','zgH5uLa','q3jAv0G','uwvWsNC','C3rYAw5N','D0Hhufi','D1nUENi','EwHtBwe','A1buzKO','t0DZvfy','vxbhCfq','vNHXEva','yKvVqKK','Cg9ZAxrPB24','EfvvChK','5y+c6icd5zU+54Mh','s1vTq3G','vuvtva','DLj6zfO','EvDZr00','sfDXD0O','5lIl5y2k6lQRtLngvZOG','5lIk5y2k6lQRu0zxoIa','DgvKigrHDge6','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','DhjPBq','DhjPz2DLCG','D2TltLK','Bw5Mv20','u0zx','AvrNBfi','u1zqr3C','t0rjrLLFr0vuxW','5lIk5y2k6lQRu0zx','DhbrwM4','y0PvA3m','z0TPsgm','zNvSBejVzhLcyq','ue9ou0u','zxjYB3i','C2vHCMnO','ChvZAa','teXnx0niqvjFtq','ruDPrfi','BxPWuMK','uvLfD1G','y3rLCG','5lIl5y2k6lQRu0zxoIa','u0zxqMfJAW','BwvZC2fNzsbHDa','qLPqt3q','B3DUzxi','zgf0yq','ANf1AxK','DxbWzxjcB2r5','CNj0EvC','B2rPzNKGteXnia','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','teXnioIVT+AXGUwKSEI0Pq','txbcwMm','C3vJy2vZCW','zuzjzuW','DgLUzYbJAgfYia','rdOG','AxLPExi','weDHrMW','BxHRC2e','yLHqEK4','tNfVBwG','BMfTzuvo','E3VNLkJMIlFPNidMSyj9Fq','y2HcsLG','wKH2wNO','5lQu5A6y5Asw6lkm','y2HHCMfJDgvYua','reXWzLq','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','zgPYv2S','zw1PDa','tKnZwe8','txfNq0u','zgf0ytPPBwfNzq','yujRExe','i3n0lwnOyxr1oa','zNvSBejVzhLouW','zNLDiow3SUABToAwSoACJEIJHEMIHa','A2Pcuvm','DNrXt0S','D01XCgm','BMrLEdO','5lIk5y2k6lQRtLngvW','DxbWzxjcB2r5uW','kcGOlISPkYKRkq','AhzbA2S','DKD5Du0','DxjLCW','5lQu5A6y5Asw6lkm6iom6z2IoIa','v29YBgrcB29R','pos6UUEjQt4k','DxjLC0jHy2S','t0rjrLLFuKvtua','DfrUwg4','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','z0ftuLO','l3bUzZTIyxnLnG','B3iGzgvIDwDNAq','yxv0BW','zxjLzcK6','mtuWntu4m3vMtvfJuW','C2L6zq','ywrK','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','zNLDifjHDYbmta','Bxb0icHjrdOG','y2HHCMfJDgvYta','Dhb1Da','sgfyB2W','zuXdqKG','CNj0vvC','DMLdz04','y1DLqwy','wLLct08','B3v0zML0CW','v1L2wxa','qLzSzwK','Cg5Rr1a','sMfpv2y','D2fYBMLUzW','DMfYAwfIBgvZoG','t2z6Cu0','zNLDief0DgfJAa','B3v0zML0','5lIT5PAh5zcn56EW','DxbWzxjcB2r5tG','B0jusxe','5lIk5y2k6lQR','mtyWuMf5B0X1','qLLYCuK','uxHNCgu','uxD0BKe','CKfOsuK','sKzzyvC','AfzzDMS','rKzYBeu','DxbWzxjcB2r5qG','wuHgyLK','tLDOy2i','ig1LC3nHz2uGAq','wxHiBvy','AM54uei','zxH0icH0CMLNzW','zNLDievYCM9YoG','Bwf0y2HLze91Da','zNLDifvZzxiGCG','y2HHCMfJDgvYva','zLbIrhq','BNDSrKm','BwfW','v3Htsuq','zNLDiezPBMfSia','y29TBw9Uq2HHCG','tujhCNO','5Qoa5Rwl5yIW6kEs6iMYici','vLzpB3u','v0jHy2S','DgLTzw91De1Z','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','CwrMELq','B3v0zML0rw5HyG','s3PSyxi','DNPhtxq','iIZMMk/LKkBLVzxLHAu/','ALHAAfm','nda2mKPRswfdqG','Dwrxu1y','qxjHENq','D0H5txa','EM5LBg8','D1jQzum','zM9YrwfJAa','txzrsKW','weTuq3e','Aw5WDxq','rwnNBhq','zM9RyNe','zMfJAwfSrMvHDa','qNPwCeq','wgT6yMi','EMXVA1C','wgDAs28','y3jQsNi','BMfTzq','veLhte0','CMvZzxrjza','B250zw50','mtG3mg1Ov1nlrG','rgXICgq','6iUX5PAh5zcn56EWoIa','Aw5NignOyxiGBq','B0PuBMC','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','ChjVBxb0','zNLDioINO+AEKowiSoEAHos6UUEjQq','qvHQyuq','5lIT5PAh5zcn56EWoIa','DMjsBwS','q1Dkvhe','BgvUz3rO','Aw1Hz2vZihrVia','zKvrAui','rKLqwLu','DhLWzq','Bg12C1a','C3vIC3rYAw5N','BMfTzuno','CxP4t2u','Bw9KAwz5ihbYBW','B2jQzwn0','qMP5seu','ENjku1a','uxrhvKG','uerzrha','CIb0zxH0oG','CMvTB3zLtgLZDa','qMjKD3G','AxnkDK8','zgf0ytO','vuXcz0K','yM5nCLC','tvvNwhy','B3z3BNG','wxD5ueO','5A6m5OIq77Yb','ota4nffkq0LHBa','yxvqB2m','wgHcrfa','igLUzgv4','DhPiwg8','5B2s5BgE5lQ6','DxDquvy','uLzlqva','iIdMNiKG','BMCGy2HHCMfJDa'];_0x383b=function(){return _0x7721ea;};return _0x383b();}export async function handleCharacterPromptModify(_0x12a6ca,_0x327638=[]){function _0x4c17bb(_0x592c20,_0x1fcab4,_0x124fe1,_0xd8b985){return _0x105e(_0x1fcab4- -0x39b,_0x124fe1);}const _0x42da22={'djrWk':function(_0x4b44cb,_0x1e5a3c){return _0x4b44cb>_0x1e5a3c;},'RVKAP':_0x4c17bb(-0x135,-0xdd,-0x1ac,-0x1b4)+_0x1465d0(0x3d,-0x7a,-0xe5,-0x14c)+'fy]\x20正在处理角色'+_0x4c17bb(-0xbb,-0x125,-0xc4,-0x1c1),'XhBDP':function(_0x2f03f5){return _0x2f03f5();},'iwNiE':function(_0x5c5a80){return _0x5c5a80();},'ZHvZz':function(_0xacd33f,_0x5dcb5a){return _0xacd33f!==_0x5dcb5a;},'nbhYR':'signi','eFIeL':_0x1465d0(-0x250,-0x172,-0xee,-0xb8),'auPoc':_0x4c17bb(-0xa9,-0xdd,-0x122,-0x19)+_0x1465d0(-0x33,-0x7a,-0x12d,0x2)+'fy]\x20Curren'+_0x1465d0(0xb,0x6,0x71,0x67),'OKHMx':_0x4c17bb(-0x98,-0xdd,-0xe3,-0x1bd)+'PromptModi'+_0x1465d0(-0xc0,-0x87,0x2c,-0x15)+_0x1465d0(0x1,-0x9c,-0xc4,-0x138),'GUDuK':'[character'+_0x4c17bb(-0x1ad,-0x152,-0x227,-0x1bf)+'fy]\x20Saved\x20'+_0x4c17bb(-0x1c7,-0x203,-0x124,-0x18c),'hwsBS':_0x1465d0(-0x1,-0x74,-0xf4,-0x100),'eLxdo':_0x1465d0(-0x1ee,-0x176,-0xe4,-0x203),'znelo':'eqLBE','jDEaP':_0x4c17bb(-0x17a,-0xdd,-0x34,-0x4d)+'PromptModi'+_0x4c17bb(-0x4f,-0x120,-0x8c,-0x52)+'ter\x20trigge'+_0x4c17bb(-0xf8,-0x1a5,-0x101,-0x1e9),'OmQGi':function(_0x1bbb2d,_0x5cc06b,_0x26079c){return _0x1bbb2d(_0x5cc06b,_0x26079c);},'tPuTR':'char_modif'+'y','XxNzh':function(_0x1e27db,_0x5ab462){return _0x1e27db(_0x5ab462);},'qzxOe':function(_0x2a59a6){return _0x2a59a6();},'PDYDp':_0x4c17bb(-0x1a0,-0xdd,-0x8a,-0x11a)+_0x1465d0(-0x3f,-0x7a,-0x108,-0x32)+_0x1465d0(0x1,-0x48,0x3f,-0x10f)+_0x4c17bb(-0x53,-0xfb,-0x111,-0x177)+_0x1465d0(-0x19f,-0x115,-0x109,-0x10c)+_0x4c17bb(-0x176,-0x218,-0x181,-0x18d),'vzGMt':function(_0x5d9d7e,_0x1de855){return _0x5d9d7e(_0x1de855);},'lLzqn':function(_0x45a6fc,_0x445dfd,_0x5752b1){return _0x45a6fc(_0x445dfd,_0x5752b1);},'FBPad':_0x4c17bb(-0xaf,-0xdd,-0x9b,-0x127)+'PromptModi'+_0x1465d0(-0x127,-0x112,-0x11b,-0xda)+_0x4c17bb(-0xfe,-0x14e,-0x162,-0x10c)+_0x4c17bb(-0x205,-0x1f0,-0x284,-0x231)+_0x4c17bb(-0x1f9,-0x22a,-0x22c,-0x2b0),'HeqWv':function(_0x2c7b32,_0x325fc7,_0x389c23,_0x4ee81c,_0xd3d86){return _0x2c7b32(_0x325fc7,_0x389c23,_0x4ee81c,_0xd3d86);},'tPwma':_0x4c17bb(-0x1ea,-0x10d,-0x13b,-0x17c),'aRrHM':_0x1465d0(-0xe,-0x5,-0x2d,0x9c)+_0x4c17bb(-0x20a,-0x152,-0x152,-0x85)+_0x4c17bb(-0x1c9,-0x1e4,-0x2ae,-0x225)+'prompt:','FIPZU':function(_0x2e04b4,_0x4e5616){return _0x2e04b4>=_0x4e5616;},'wHyMp':_0x4c17bb(-0x180,-0xac,0x1f,-0x30),'HaXol':_0x4c17bb(-0xe9,-0x1b3,-0x147,-0x120)+_0x4c17bb(-0x318,-0x252,-0x2f9,-0x262)+_0x1465d0(-0x8b,-0xbf,-0x8,-0x1a),'aDdMI':function(_0x281746,_0x28a888,_0x455f83){return _0x281746(_0x28a888,_0x455f83);},'iwnel':_0x4c17bb(-0x190,-0xdd,-0x15a,-0x164)+_0x4c17bb(-0x222,-0x152,-0x8a,-0x193)+_0x1465d0(0x44,-0x40,-0x82,0x8e)+_0x1465d0(-0x6e,-0xb2,-0x175,-0x18c),'aIIrQ':_0x4c17bb(-0xa3,-0x162,-0x222,-0x243),'tzHXo':_0x1465d0(-0x11,-0x16,0x9a,-0xbf),'mnfWm':function(_0xb34af9,_0x4af72b){return _0xb34af9===_0x4af72b;},'dxbHu':_0x1465d0(0x3,0xc,-0xbb,0xc5)+_0x1465d0(-0xca,-0xe3,-0xf7,-0xb8),'JkZjX':_0x4c17bb(-0x11e,-0xdd,-0x7a,-0x186)+_0x4c17bb(-0x152,-0x152,-0x89,-0xab)+'fy]\x20No\x20cha'+_0x4c17bb(-0x18c,-0x133,-0x174,-0x68)+_0x1465d0(0x34,0x3,0x43,-0xa4)+_0x4c17bb(-0x1ca,-0x12d,-0x14f,-0x1c0)+_0x4c17bb(-0x146,-0x210,-0x232,-0x2dd),'Pinhm':_0x1465d0(0x25,-0x5,-0xb1,-0x25)+'PromptModi'+_0x4c17bb(-0x1e5,-0x213,-0x218,-0x2e6)+'M\x20output\x20f'+_0x4c17bb(-0x2b9,-0x21a,-0x281,-0x218)+'ng:','Whqwj':'[character'+'PromptModi'+_0x1465d0(-0x69,-0x1f,-0x73,-0x42)+_0x1465d0(-0x1f4,-0x194,-0x208,-0x1ad),'iyiyr':function(_0x5e6bf4,_0x1079b9){return _0x5e6bf4>_0x1079b9;},'YxHmV':_0x1465d0(-0x4c,-0x6c,-0x104,-0x42),'bBBDb':function(_0x463af0,_0xfde201){return _0x463af0>_0xfde201;},'InegI':'角色/服装提示词修改'+_0x1465d0(-0xf0,-0xc3,-0xd1,-0x55),'qcuBD':function(_0x5cedb7,_0x35bbc8){return _0x5cedb7!==_0x35bbc8;},'KhIkx':_0x1465d0(-0x130,-0xb0,-0xfd,-0x144),'FbUBT':_0x4c17bb(-0x169,-0xdd,-0x110,-0xd1)+_0x4c17bb(-0x14e,-0x152,-0x1c2,-0x1de)+_0x1465d0(-0x138,-0x114,-0x159,-0x88)};console['log']('[character'+_0x4c17bb(-0x1cb,-0x152,-0x116,-0x19d)+'fy]\x20Starti'+_0x4c17bb(-0x22f,-0x191,-0x17e,-0x270)+_0x4c17bb(-0xbb,-0xc4,0x8,-0x18c)+_0x1465d0(-0x35,-0x50,-0xb,0x8a)+_0x4c17bb(-0xdd,-0x136,-0x175,-0xed)),toastr[_0x4c17bb(-0x68,-0xd6,-0xb9,-0x108)](_0x42da22[_0x1465d0(-0x7f,-0xbb,-0x64,-0x6e)]);function _0x1465d0(_0x33e97d,_0x2f3489,_0x2faba4,_0x53aa0a){return _0x105e(_0x2f3489- -0x2c3,_0x53aa0a);}try{const _0x8622fd=_0x42da22[_0x4c17bb(-0x137,-0x198,-0x12d,-0x25b)](getContext),_0x4b9c4a=extension_settings[extensionName],_0x2326fc=_0x42da22[_0x4c17bb(-0x151,-0x12c,-0xb3,-0x202)](getCurrentCharacterPreset);if(!_0x2326fc){if(_0x42da22[_0x4c17bb(-0x287,-0x23b,-0x2dc,-0x2a6)](_0x42da22['nbhYR'],_0x42da22['nbhYR']))_0x52aa34(_0x23f112[_0x4c17bb(-0xaf,-0x148,-0xd4,-0xa5)]);else{toastr[_0x1465d0(-0x13a,-0x184,-0x13e,-0x106)](_0x42da22[_0x4c17bb(-0x2f6,-0x246,-0x2a8,-0x178)]);return;}}console[_0x4c17bb(-0x103,-0x135,-0x17c,-0x154)](_0x42da22[_0x4c17bb(-0x1af,-0x199,-0x1ba,-0x1fb)],_0x2326fc['id']);const _0x5a5eab=_0x2326fc['data'][_0x1465d0(-0x7b,-0x63,-0x85,-0x39)+'Context']||'',_0x4db32f=_0x2326fc[_0x4c17bb(-0x1f6,-0x24f,-0x185,-0x224)][_0x1465d0(-0xf4,-0x63,-0x7d,0x57)+_0x4c17bb(-0x281,-0x222,-0x1f0,-0x183)]||'',_0x3e06a0=_0x2326fc[_0x1465d0(-0xaf,-0x177,-0x245,-0x165)][_0x1465d0(-0x6f,-0x63,-0xe4,0x69)+_0x4c17bb(-0xbd,-0xc0,-0x73,-0x113)]||{};console[_0x1465d0(-0x2a,-0x5d,-0x39,-0x80)](_0x42da22['OKHMx'],_0x5a5eab),console[_0x1465d0(-0x99,-0x5d,-0x75,0x70)](_0x4c17bb(-0x10f,-0xdd,-0xa8,-0xf)+_0x1465d0(-0xdd,-0x7a,-0xaf,-0x72)+'fy]\x20Saved\x20'+'world\x20book'+':',_0x4db32f),console[_0x4c17bb(-0x121,-0x135,-0x8f,-0x5e)](_0x42da22['GUDuK'],_0x3e06a0);const _0x45693f=_0x12a6ca||'',_0x4142e1=[];_0x12a6ca&&_0x4142e1['push'](_0x12a6ca);_0x5a5eab&&(_0x42da22[_0x1465d0(0x0,-0x42,-0x100,-0x48)]!==_0x42da22[_0x1465d0(-0x8f,-0x42,0x9,-0xd3)]?_0x3795f2[_0x4c17bb(-0x1cd,-0x1eb,-0x13b,-0x11f)+_0x4c17bb(-0xe5,-0x16c,-0x21c,-0x1b1)]&&_0x42da22[_0x1465d0(-0x135,-0x15e,-0xad,-0x205)](_0x253a22['matchedOut'+_0x1465d0(0x4d,-0x94,0x1,0x23)][_0x4c17bb(-0x17c,-0x1b4,-0x244,-0x1c9)],-0x7b3+0x16e9+-0xf36)&&_0x4c4122[_0x4c17bb(-0x248,-0x25a,-0x200,-0x22a)](..._0x170e7f[_0x1465d0(-0x11e,-0x113,-0x19d,-0x2f)+_0x4c17bb(-0x1d7,-0x16c,-0x1f6,-0x15f)]):_0x4142e1[_0x4c17bb(-0x2f5,-0x25a,-0x25b,-0x284)](_0x5a5eab));_0x4db32f&&(_0x42da22['eLxdo']===_0x42da22[_0x1465d0(-0x80,-0xfa,-0xc6,-0x42)]?_0x2f9d8e[_0x47f3ff]=_0x2401cb(_0x3a8083[_0x24d3d8],_0x16e409,_0x547046,_0x25d2d5):_0x4142e1[_0x1465d0(-0x1a1,-0x182,-0xab,-0x17b)](_0x4db32f));const _0x240496=_0x4142e1[_0x1465d0(0x35,-0x93,-0x151,-0x15)]('\x0a');console[_0x1465d0(0x6f,-0x5d,-0xb3,-0x3c)](_0x42da22[_0x1465d0(0x10,0x1c,0x40,0x5c)],_0x240496);let _0x387484=_0x42da22['OmQGi'](buildPromptForRequestType,_0x42da22[_0x4c17bb(-0x188,-0x10e,-0x1ed,-0x158)],_0x45693f);const _0x3d9634=_0x42da22[_0x1465d0(0xab,-0x2a,0x9e,0xa)](generateCharacterListText,_0x240496),_0x4a5d18=_0x42da22['XhBDP'](generateOutfitEnableListText),_0x3c3fbd=_0x42da22[_0x4c17bb(-0x257,-0x1ac,-0x1b4,-0x22e)](generateCommonCharacterListText);console[_0x4c17bb(-0xa7,-0x135,-0x11f,-0x117)](_0x42da22[_0x4c17bb(-0xf1,-0x1a6,-0x1c0,-0x1bd)],_0x3d9634);const _0x2d0f76=_0x8622fd[_0x1465d0(-0x9b,-0xa1,-0x94,-0xc8)+'ta']?.['variables']||{},_0x4c37d1=_0x42da22[_0x4c17bb(-0x1b3,-0x1d9,-0x144,-0x26d)](buildCharacterText,_0x2326fc);_0x387484=_0x42da22[_0x1465d0(0x96,-0x2a,0x15,-0x103)](mergeAdjacentMessages,_0x387484),console['log'](_0x1465d0(0x73,-0x5,0x1d,-0x33)+_0x4c17bb(-0xb6,-0x152,-0x114,-0x117)+_0x1465d0(-0x1b,-0x5a,-0xbb,0x2c)+'后:',_0x387484);const _0x5235c1=_0x42da22['lLzqn'](findMessageIndexWithPlaceholder,_0x387484,_0x4c17bb(-0x249,-0x23d,-0x16d,-0x1e2));console['log'](_0x42da22[_0x4c17bb(-0x188,-0x107,-0xf7,-0x65)],_0x5235c1);const _0x1aa8e7={..._0x3e06a0,..._0x2d0f76},_0x4fd101={};_0x4fd101[_0x1465d0(-0x8f,-0x25,0x22,-0xb4)]=_0x5a5eab,_0x4fd101[_0x4c17bb(-0xea,-0x131,-0x1a5,-0x121)+_0x1465d0(-0x146,-0xe9,-0x158,-0x92)]=_0x4db32f,_0x4fd101[_0x4c17bb(-0xc6,-0x15d,-0x97,-0x20a)]=_0x1aa8e7,_0x4fd101[_0x4c17bb(-0x5c,-0x119,-0x110,-0x1a9)]=_0x12a6ca||'',_0x4fd101[_0x1465d0(-0x1ef,-0x139,-0x18c,-0x10b)+_0x1465d0(0xcb,-0x4,-0x58,-0xb9)]=_0x3d9634,_0x4fd101[_0x4c17bb(-0x131,-0x1db,-0x10c,-0x260)+'leListText']=_0x4a5d18,_0x4fd101[_0x4c17bb(-0x259,-0x1e3,-0x104,-0x2aa)+_0x4c17bb(-0x122,-0xe4,-0x2f,-0x12a)+'ext']=_0x3c3fbd;const _0x83376f=_0x4fd101,{messages:_0x39dee9,replacedVariables:_0x35d961}=_0x42da22['lLzqn'](replaceAllPlaceholders,_0x387484,_0x83376f);_0x387484=_0x39dee9,_0x387484=_0x42da22[_0x4c17bb(-0xa7,-0xd0,0x12,-0x198)](_0x2106d3,_0x387484,_0x42da22['tPwma'],_0x4c37d1,_0x35d961),console[_0x1465d0(-0x6,-0x5d,-0x10c,-0x12)](_0x42da22['aRrHM'],_0x387484);let _0x3e987f='';_0x42da22['djrWk'](_0x35d961[_0x4c17bb(-0x269,-0x216,-0x29c,-0x1e2)],0x214e+-0x1b8b+-0x5c3)&&(_0x3e987f='诊断：检测到以下变量'+'被使用：'+[..._0x35d961]['join']('、')+'\x0a');_0x327638&&_0x327638[_0x1465d0(-0x126,-0xdc,-0xad,-0x1b9)]>0x1c47*-0x1+-0x23f5+0x403c&&_0x42da22[_0x4c17bb(-0x1de,-0x1b1,-0x172,-0xe6)](_0x5235c1,-0xd52+0x9*0x19+0xc71)&&(_0x387484=_0x42da22[_0x4c17bb(-0xd,-0xd0,-0xc0,-0x92)](attachImagesToMessage,_0x387484,_0x5235c1,_0x327638,_0x42da22[_0x4c17bb(-0x212,-0x1d3,-0x1d6,-0x28e)]),console[_0x4c17bb(-0x1ef,-0x135,-0x8d,-0x1db)]('[character'+_0x1465d0(-0x102,-0x7a,-0xf4,-0xbf)+_0x4c17bb(-0x14c,-0x201,-0x130,-0x29b)+'ed',_0x327638['length'],_0x42da22[_0x1465d0(-0x1f1,-0x137,-0x21b,-0x10c)],_0x5235c1));_0x42da22[_0x1465d0(0xb8,0xf,0x7c,-0xa7)](updateCombinedPrompt,_0x387484,_0x3e987f);const _0x5788b9={};_0x5788b9[_0x1465d0(-0x2a,-0x106,-0x1c3,-0x42)]=0x493e0;const _0x2bb3bb=await _0x42da22['aDdMI'](LLM_CHAR_MODIFY,_0x387484,_0x5788b9);console[_0x4c17bb(-0xf3,-0x135,-0x16b,-0x16e)](_0x42da22['iwnel'],_0x2bb3bb);if(!_0x2bb3bb){if(_0x42da22[_0x1465d0(-0xf1,-0x163,-0xfe,-0xca)](_0x42da22[_0x4c17bb(-0x147,-0x186,-0x205,-0xa2)],_0x1465d0(-0x1e5,-0x135,-0x1a6,-0x193))){toastr[_0x4c17bb(-0x309,-0x25c,-0x1a7,-0x1bf)](_0x42da22[_0x4c17bb(-0xb7,-0x196,-0x1dc,-0x203)]);return;}else return _0x9aa3b9;}const _0x1c7c58=extractCharacterAndOutfitTags(_0x2bb3bb);if(_0x42da22[_0x4c17bb(-0x33b,-0x267,-0x30c,-0x206)](_0x1c7c58[_0x1465d0(0x6f,-0x58,-0xa2,-0x55)]['length'],-0xfe6*-0x2+-0x1639+0x1*-0x993)&&_0x42da22['mnfWm'](_0x1c7c58['outfits'][_0x1465d0(-0x53,-0xdc,-0x70,-0x1a4)],-0x1876+-0x21d8+0x3a4e)){toastr[_0x1465d0(-0xf4,-0x12c,-0x1d1,-0xb9)](_0x42da22[_0x1465d0(0xa,-0x7c,0x9,-0x35)]),console[_0x1465d0(-0x58,-0x5d,0x5,-0x3a)](_0x42da22[_0x1465d0(-0xde,-0x6,0x3f,-0xbe)]),console[_0x4c17bb(-0x117,-0x135,-0xe7,-0x116)](_0x42da22[_0x1465d0(-0xe5,-0x95,-0x77,0x17)],_0x2bb3bb);return;}console[_0x4c17bb(-0xa1,-0x135,-0x1b9,-0x10a)](_0x42da22[_0x1465d0(-0x57,-0x2b,0x3f,0x1e)],_0x1c7c58);if(_0x1c7c58[_0x1465d0(0x58,-0x58,-0xa5,0x23)][_0x1465d0(-0x9e,-0xdc,-0xeb,-0xec)]>-0x111b+-0xf6e+0x2089){const _0x3a8751=_0x1c7c58[_0x4c17bb(-0x1b3,-0x130,-0x1da,-0xe7)][0x65f+0x8*-0x4c4+-0x2e3*-0xb];await updateCharacterPresetFromLLM(_0x2326fc['id'],_0x3a8751);}const _0x2fb009=[..._0x1c7c58['outfits']];for(const _0x1657da of _0x1c7c58[_0x4c17bb(-0x1f9,-0x130,-0x117,-0x1b1)]){_0x1657da[_0x4c17bb(-0x22b,-0x1eb,-0x110,-0x28f)+'fits']&&_0x42da22[_0x1465d0(-0xd2,-0x16b,-0x19c,-0x11a)](_0x1657da[_0x1465d0(-0x1a7,-0x113,-0xca,-0x3f)+_0x4c17bb(-0x23e,-0x16c,-0x11a,-0xbe)][_0x4c17bb(-0x15b,-0x1b4,-0x1ce,-0x1df)],-0xe69+-0x1405+0x226e)&&(_0x42da22[_0x1465d0(-0x1c7,-0x163,-0x7f,-0x134)](_0x42da22[_0x4c17bb(-0x26c,-0x1ef,-0x20a,-0x2ae)],_0x42da22['YxHmV'])?_0x6f5209[_0x1465d0(-0x90,-0x131,-0x1d1,-0x1ad)]=[]:_0x2fb009[_0x1465d0(-0xd1,-0x182,-0x12d,-0x250)](..._0x1657da['matchedOut'+_0x1465d0(0x4c,-0x94,0x36,-0x53)]));}_0x42da22['bBBDb'](_0x2fb009[_0x1465d0(-0x102,-0xdc,-0x156,-0x1bf)],0x2261+0x1e2a+-0x408b)&&await updateOutfitPresetsFromLLM(_0x2fb009),toastr[_0x1465d0(-0x104,-0x16f,-0x100,-0x9d)](_0x42da22[_0x4c17bb(-0x61,-0xe7,-0x95,-0xbb)]);}catch(_0x4af854){if(_0x42da22[_0x4c17bb(-0x123,-0x184,-0xcd,-0x1f5)](_0x42da22[_0x4c17bb(-0x52,-0x11f,-0xad,-0xde)],_0x42da22[_0x1465d0(-0x94,-0x47,-0x64,-0x72)])){_0x4f2530[_0x1465d0(0x26,0x2,0xa8,0x0)]('没有检测到需要更新的'+'内容');return;}else console[_0x4c17bb(-0x187,-0x25c,-0x19b,-0x2b7)](_0x42da22[_0x1465d0(0xb4,0x17,-0x46,0x32)],_0x4af854),toastr[_0x1465d0(-0x1a4,-0x184,-0x144,-0x156)](_0x4c17bb(-0x11a,-0x189,-0x249,-0xd1)+'\x20'+_0x4af854['message']);}}async function updateCharacterPresetFromLLM(_0x8c2b52,_0x4e6bf6){const _0x4d21e1={'nwlFC':_0x34f278(0x125,0x1eb,0x168,0xf4),'MqgCE':_0x3dca35(0x10e,0x176,0x5,0xe2),'wdWgS':_0x34f278(0xa2,0x149,0xe,0xcc),'xxagL':_0x34f278(0xdc,0x182,0xc9,0x17f),'MfDJo':_0x3dca35(0x194,0x141,0x125,0xe6),'lmvsP':_0x3dca35(0x149,0xac,0x138,0x140),'dRlGs':_0x3dca35(0xd3,0x105,0x32,0x38),'vHxZQ':_0x34f278(0xa6,0x92,0x160,0x3d),'rAhII':'下半身NSFW背面','slnxU':function(_0x1da684,_0x57ec7f){return _0x1da684!==_0x57ec7f;},'qiKBX':_0x34f278(0x106,0x43,0x34,0xb9),'Kzlar':'没有检测到需要更新的'+'内容','vbRmk':function(_0x2fefea,_0x454f40){return _0x2fefea(_0x454f40);},'ebuel':function(_0x4c6d9f,_0x29d129){return _0x4c6d9f===_0x29d129;},'ZYBOO':'cDgrS','UpGpT':'DYNAL','FTgQo':_0x3dca35(0xee,0xac,0x7d,0xd3),'LeDZJ':function(_0x58c530){return _0x58c530();},'eTdRs':_0x3dca35(0xc8,0xd3,0x0,0x31)+'-tab-chara'+_0x34f278(-0x3c,0x2f,0x10,-0xef),'fokbq':function(_0x3df91e,_0x3eb712){return _0x3df91e(_0x3eb712);}},_0x4a42f8=extension_settings[extensionName],_0x436e25=_0x4a42f8[_0x34f278(-0x20,-0xe8,-0x102,-0x7f)+_0x3dca35(0x232,0xac,0x1bf,0x16c)][_0x8c2b52];if(!_0x436e25){toastr[_0x3dca35(-0xb,-0x20,-0xae,0x5)](_0x4d21e1[_0x34f278(0x32,-0x40,-0x74,0xe1)]);return;}const _0xf3175={};_0xf3175[_0x3dca35(0x52,0x100,0x191,0xb4)]=_0x34f278(0x1a,-0x98,-0x7a,-0x39),_0xf3175['nameEN']=_0x4d21e1[_0x34f278(-0x1a,-0x68,0x9b,-0xe5)],_0xf3175[_0x34f278(0x30,-0x97,-0x79,0x10c)+_0x3dca35(0x136,0x92,0x195,0x108)]=_0x4d21e1[_0x3dca35(0x136,0x5,0x15e,0xde)],_0xf3175['facialFeat'+_0x3dca35(-0x66,0x43,0xe1,0x3d)]=_0x3dca35(-0x9d,0x6c,-0x25,0x27);function _0x34f278(_0x3c4402,_0x2b8787,_0x49a8a4,_0x15a7f2){return _0x105e(_0x3c4402- -0x182,_0x15a7f2);}_0xf3175[_0x3dca35(0x16,0x14,0x94,0x97)+_0x3dca35(-0x67,0xf6,-0x2d,0x41)]=_0x4d21e1[_0x34f278(0x14b,0x157,0x1a3,0x11a)],_0xf3175[_0x3dca35(0x103,-0x31,0xc4,0x39)+'FW']=_0x34f278(-0x49,0x90,-0x108,0x74),_0xf3175[_0x3dca35(0xdd,0x34,-0x1a,0x39)+_0x3dca35(0x157,0x50,0xec,0x11f)]=_0x4d21e1[_0x34f278(0xb4,0x9e,0x118,-0x22)],_0xf3175[_0x34f278(0x10a,0x1cf,0xbe,0x1ca)+'W']=_0x4d21e1[_0x34f278(0x6a,0x106,0xca,0xdc)],_0xf3175[_0x3dca35(0x13d,0xb5,0x1fd,0x152)+_0x3dca35(0xef,0x9e,0x56,0x82)]=_0x34f278(0xc2,0x1a,-0x11,0x142),_0xf3175['upperBodyN'+_0x3dca35(0x62,-0x81,0x7,-0x5)]=_0x4d21e1['dRlGs'],_0xf3175[_0x3dca35(0xea,0x64,-0x41,0x63)+_0x3dca35(0x2f,-0xbc,0x94,0xe)]=_0x4d21e1[_0x3dca35(0x18d,0x188,0xf4,0x150)],_0xf3175[_0x34f278(-0x16,0x3f,-0x4,0x0)+'FW']=_0x34f278(0x120,0x1e7,0x1a0,0x17c),_0xf3175[_0x34f278(-0x16,0x46,-0x8d,-0xc5)+_0x3dca35(0x9f,0x1ca,0xbd,0x11f)]=_0x4d21e1[_0x34f278(0x22,-0xf,0xb,0x42)];const _0x1690aa=_0xf3175;let _0x38f21e=0x87d+-0x457*0x4+0x8df;for(const _0x32703a in _0x1690aa){if(_0x4e6bf6[_0x32703a]&&_0x4d21e1[_0x3dca35(0x8b,0x110,0xa1,0x162)](_0x4e6bf6[_0x32703a],_0x436e25[_0x32703a])){if(_0x4d21e1[_0x3dca35(0x9c,0x148,0x23d,0x162)](_0x3dca35(0x181,0xa8,0x1d1,0x14e),_0x4d21e1[_0x34f278(0xe2,0x1aa,0x20,0x1a4)]))return null;else _0x38f21e++;}}if(_0x38f21e===-0x110b*0x1+0x17e*-0x13+0x2d65){toastr[_0x3dca35(0x23d,0x149,0x19a,0x18b)](_0x4d21e1[_0x3dca35(0x14f,0xa8,0xfc,0x87)]);return;}const _0x422acb=_0x34f278(0x38,-0x15,-0x81,0x8d)+_0x8c2b52+_0x3dca35(0x95,0x161,0xd,0xcf)+_0x38f21e+_0x3dca35(0x48,0x4a,-0x71,0x44),_0x2f9062=await _0x4d21e1['vbRmk'](stylishConfirm,_0x422acb);if(!_0x2f9062){if(_0x4d21e1['ebuel'](_0x4d21e1[_0x3dca35(0xc4,0x57,-0x7a,0x57)],_0x4d21e1[_0x34f278(0x168,0x225,0x1e0,0x1e3)])){const _0x43b4c8=_0xe17b87?function(){function _0x4bd5af(_0x2dc456,_0x2b6f18,_0x288421,_0x57eb2d){return _0x3dca35(_0x2dc456-0x1b7,_0x2b6f18-0xbb,_0x2dc456,_0x57eb2d-0x50e);}if(_0x5616ec){const _0x467ca4=_0x25a34b[_0x4bd5af(0x577,0x660,0x562,0x5ee)](_0x1ad472,arguments);return _0x1b5d3e=null,_0x467ca4;}}:function(){};return _0x3d0998=![],_0x43b4c8;}else{toastr[_0x3dca35(0x13c,0xe9,0x175,0x18b)](_0x4d21e1['FTgQo']);return;}}for(const _0x139d9c in _0x1690aa){_0x4e6bf6[_0x139d9c]&&(_0x436e25[_0x139d9c]=_0x4e6bf6[_0x139d9c]);}_0x4d21e1[_0x34f278(0xcc,0x15e,0x60,0x122)](saveSettingsDebounced);function _0x3dca35(_0x54233b,_0x4b104e,_0x4c36e6,_0x15d8da){return _0x105e(_0x15d8da- -0x13a,_0x4c36e6);}const _0x27fd6a=_0x4d21e1[_0x34f278(0x63,-0x59,-0x30,0xb4)]($,_0x4d21e1['eTdRs']);_0x27fd6a[_0x3dca35(0xf1,0xdd,0x147,0xad)]&&refreshCharacterSettings(_0x27fd6a),_0x4d21e1[_0x34f278(0x4e,-0x1d,0xd,-0x5c)](updateFormFields,_0x4e6bf6),console['log']('[character'+_0x3dca35(0x160,0xde,0xd5,0x10f)+_0x3dca35(0xc0,0x1e7,0x150,0x13d)+_0x3dca35(0x87,0x20c,0x189,0x151)+_0x8c2b52+'\x22');}async function updateOutfitPresetsFromLLM(_0x466d42){const _0x4367b4={'CrZWH':function(_0xf4f529,_0x2fb53e){return _0xf4f529(_0x2fb53e);},'vmxvr':function(_0x60aafe,_0x5578d7){return _0x60aafe(_0x5578d7);},'RmIvP':_0x369d9b(-0xc9,-0x11a,-0x5a,-0x8),'yytJy':_0x4ff051(0x47f,0x447,0x547,0x3b4),'pgiMQ':'归属人','Arazt':_0x4ff051(0x482,0x3a5,0x49d,0x565),'EGiDR':'上半身背面','kjBQS':_0x4ff051(0x4f9,0x495,0x55f,0x4ec),'Xkzbb':function(_0x1b5bf8,_0x4126b7){return _0x1b5bf8===_0x4126b7;},'hcUiR':'TKpSm','OPRNK':function(_0x21f1f5,_0x52861a){return _0x21f1f5!==_0x52861a;},'kPTfJ':function(_0x5a720f,_0x2e4412){return _0x5a720f===_0x2e4412;},'iaonS':_0x4ff051(0x4bf,0x402,0x59c,0x4a2),'WSZcu':function(_0x18f80c,_0x40764d){return _0x18f80c(_0x40764d);},'MBGrz':function(_0x14bfee,_0x12b237){return _0x14bfee(_0x12b237);},'tTnXn':'aIRWh','MpQwW':function(_0x397deb,_0x25b21b){return _0x397deb===_0x25b21b;},'RcSVr':_0x369d9b(-0xc5,-0x9a,-0x185,-0x18),'oxDjr':_0x4ff051(0x502,0x468,0x55b,0x4c2),'biOjX':function(_0x3bfb6e){return _0x3bfb6e();},'viCgN':function(_0x4a7c4d,_0x4e43ce){return _0x4a7c4d(_0x4e43ce);}},_0x4686d5=extension_settings[extensionName],_0x4a0129={};_0x4a0129[_0x369d9b(-0xa9,-0x112,0x29,0x21)]=_0x4367b4['yytJy'],_0x4a0129['nameEN']=_0x369d9b(-0x7b,-0xde,0x4d,-0x139),_0x4a0129[_0x4ff051(0x42e,0x503,0x43b,0x3ca)]=_0x4367b4[_0x369d9b(-0x56,0x3f,-0xdb,-0x7f)];function _0x4ff051(_0x2c991a,_0x18fc0d,_0x5a2b21,_0x124b75){return _0x105e(_0x2c991a-0x2e3,_0x124b75);}function _0x369d9b(_0x55a2a5,_0x2b3893,_0x170b7f,_0x5132a2){return _0x105e(_0x55a2a5- -0x297,_0x5132a2);}_0x4a0129[_0x369d9b(-0x149,-0x91,-0x1ed,-0xc3)]=_0x4367b4[_0x4ff051(0x4aa,0x52d,0x522,0x4e2)],_0x4a0129['upperBodyB'+_0x369d9b(-0x38,-0xca,-0x11,-0xa9)]=_0x4367b4[_0x4ff051(0x426,0x387,0x48d,0x46d)],_0x4a0129[_0x4ff051(0x529,0x540,0x445,0x57b)]=_0x369d9b(0x1a,-0xc0,0x35,-0x7),_0x4a0129[_0x369d9b(-0x15a,-0x23e,-0x230,-0xcf)+'ck']=_0x4367b4[_0x369d9b(-0x129,-0x183,-0x121,-0x203)];const _0x3a2af5=_0x4a0129;for(const _0x4b35d9 of _0x466d42){const _0x3113da=_0x4b35d9[_0x369d9b(-0xa9,-0xf3,-0x14b,0x3)];if(!_0x3113da)continue;const _0x34d5c2=_0x4686d5['outfitPres'+_0x369d9b(-0x2a,-0xae,-0xa,0x31)]?.[_0x3113da];if(_0x34d5c2){let _0x48611e=-0x23*0x107+-0x1*0x1271+-0x1222*-0x3;for(const _0x5a33fa in _0x3a2af5){_0x4367b4[_0x4ff051(0x4b6,0x4ed,0x56d,0x4c6)](_0x4367b4[_0x4ff051(0x53d,0x4e4,0x55f,0x501)],_0x4367b4[_0x4ff051(0x53d,0x51b,0x520,0x57a)])?_0x4b35d9[_0x5a33fa]&&_0x4367b4['OPRNK'](_0x4b35d9[_0x5a33fa],_0x34d5c2[_0x5a33fa])&&_0x48611e++:_0x377340[_0x369d9b(-0xe7,-0xb9,-0x1a9,-0x169)+_0x369d9b(-0x68,-0x13c,-0x149,-0x100)][_0x369d9b(-0x156,-0x9c,-0x238,-0x214)](_0x56fb7f['data']);}if(_0x4367b4[_0x4ff051(0x4b6,0x555,0x4f1,0x457)](_0x48611e,-0x22ed+0x55*-0x3d+0x7*0x7e2)){if(_0x4367b4[_0x4ff051(0x5cb,0x562,0x550,0x58f)](_0x4367b4['iaonS'],_0x4367b4['iaonS'])){console[_0x369d9b(-0x31,-0xf8,0x58,-0xb6)](_0x4ff051(0x5a1,0x63b,0x66d,0x610)+_0x369d9b(-0x4e,-0xbe,0x61,-0xad)+_0x4ff051(0x528,0x4a2,0x477,0x5a4)+_0x3113da+_0x4ff051(0x5ad,0x67a,0x649,0x5dc));continue;}else _0x3209bf=_0x4ff051(0x44c,0x3fb,0x50e,0x508)+_0x369d9b(-0x117,-0x158,-0x18d,-0x5b)+'4,'+_0xbf3e05;}const _0x42dd7b='检测到服装\x20\x22'+_0x3113da+'\x22\x20有\x20'+_0x48611e+_0x4ff051(0x461,0x540,0x433,0x3a4),_0x338506=await _0x4367b4[_0x4ff051(0x568,0x566,0x4ba,0x553)](stylishConfirm,_0x42dd7b);if(!_0x338506){if(_0x4367b4[_0x4ff051(0x5cb,0x695,0x67f,0x5f5)](_0x369d9b(-0x9a,-0xa,-0x100,-0x14f),_0x4ff051(0x575,0x5ec,0x526,0x537)))_0x29fe0f[_0xfa99ce[_0x292801]]=_0x762918;else continue;}for(const _0x30499f in _0x3a2af5){_0x4b35d9[_0x30499f]&&(_0x34d5c2[_0x30499f]=_0x4b35d9[_0x30499f]);}console[_0x369d9b(-0x31,0x48,-0xb0,0x31)]('[character'+_0x369d9b(-0x4e,-0x122,-0xe9,-0x58)+_0x369d9b(-0x12a,-0xde,-0x172,-0x5d)+_0x4ff051(0x56e,0x614,0x599,0x5ef)+_0x3113da+'\x22');}else{const _0x44f859='检测到新服装\x20\x22'+_0x3113da+_0x369d9b(-0xd4,-0x13c,-0x75,-0x57),_0x4be62b=await _0x4367b4[_0x4ff051(0x49c,0x4a7,0x564,0x576)](stylishConfirm,_0x44f859);if(!_0x4be62b){if(_0x4367b4[_0x4ff051(0x5cb,0x699,0x526,0x63c)](_0x4367b4[_0x369d9b(-0x11a,-0x191,-0x61,-0x1f9)],_0x369d9b(-0x3c,-0xe8,-0x43,-0x100)))_0x4367b4[_0x369d9b(0x4b,0x2b,0x8,-0x1f)](_0x9cb58f,_0x3e23af),_0x3ae58c=null;else continue;}!_0x4686d5['outfitPres'+_0x4ff051(0x550,0x4ab,0x4c4,0x4f5)]&&(_0x4367b4['kPTfJ'](_0x4ff051(0x538,0x5a6,0x5b3,0x5a9),_0x4ff051(0x538,0x464,0x53e,0x576))?_0x4686d5[_0x369d9b(0x3,0x51,0xe5,0x80)+_0x369d9b(-0x2a,-0x18,-0x3a,0x38)]={}:_0x4367b4[_0x369d9b(0xa,0x37,0xa4,-0x1d)](_0xff4b3c,_0x1fc96a));const _0x55c140={};_0x55c140[_0x369d9b(-0xa9,0x25,-0x98,-0x7f)]=_0x4b35d9[_0x4ff051(0x4d1,0x5a0,0x482,0x466)],_0x55c140[_0x4ff051(0x440,0x4b9,0x48d,0x3ea)]=_0x4b35d9['nameEN']||'',_0x55c140[_0x4ff051(0x42e,0x3e8,0x463,0x470)]=_0x4b35d9[_0x369d9b(-0x14c,-0x21e,-0xbd,-0x22c)]||'',_0x55c140['upperBody']=_0x4b35d9[_0x4ff051(0x431,0x4ee,0x414,0x36c)]||'',_0x55c140['upperBodyB'+_0x4ff051(0x542,0x480,0x58c,0x5b2)]=_0x4b35d9[_0x4ff051(0x48b,0x40b,0x521,0x4e9)+_0x369d9b(-0x38,-0x97,-0x7b,-0x61)]||'',_0x55c140[_0x4ff051(0x529,0x60b,0x4c3,0x551)]=_0x4b35d9[_0x4ff051(0x529,0x586,0x5db,0x539)]||'',_0x55c140[_0x369d9b(-0x15a,-0xf7,-0xe2,-0x1d6)+'ck']=_0x4b35d9[_0x4ff051(0x420,0x4bf,0x4f2,0x44e)+'ck']||'',_0x4686d5[_0x369d9b(0x3,-0x66,0x49,0x3d)+'ets'][_0x3113da]=_0x55c140,console['log'](_0x4ff051(0x5a1,0x60e,0x4d7,0x5d3)+_0x369d9b(-0x4e,0x4,-0x107,0x50)+'fy]\x20已创建服装预'+'设\x20\x22'+_0x3113da+'\x22');if(_0x4b35d9[_0x4ff051(0x42e,0x454,0x47c,0x4e8)]&&_0x4b35d9[_0x4ff051(0x42e,0x4b1,0x47e,0x3f2)]['trim']()){const _0x4e111=_0x4b35d9[_0x369d9b(-0x14c,-0xfc,-0x176,-0x179)][_0x369d9b(-0x166,-0x9f,-0x9e,-0xe5)]()[_0x369d9b(0xc,0x8f,-0x8a,-0x29)+'e']()[_0x4ff051(0x562,0x4b6,0x643,0x4ca)](/\s+/g,'');for(const [_0x4121e0,_0x44fbb5]of Object[_0x369d9b(-0x62,-0x2e,0x5f,0x53)](_0x4686d5[_0x4ff051(0x445,0x3de,0x48a,0x49a)+'resets']||{})){if(_0x44fbb5[_0x4ff051(0x440,0x41e,0x501,0x3f4)]&&_0x4367b4[_0x4ff051(0x5b8,0x590,0x5e2,0x59e)](_0x44fbb5[_0x369d9b(-0x13a,-0x126,-0x92,-0x1e8)]['toLowerCas'+'e']()[_0x369d9b(-0x18,-0x5e,-0x3,-0x60)](/\s+/g,''),_0x4e111)){if(_0x4367b4[_0x4ff051(0x5b8,0x568,0x63b,0x578)](_0x4367b4[_0x369d9b(-0x63,-0xa4,-0x9b,-0x122)],_0x4367b4[_0x4ff051(0x545,0x588,0x54f,0x628)]))_0x13fc5d['value']=_0x1f5f96[_0x19ccd4],_0x4367b4[_0x4ff051(0x5c5,0x55b,0x656,0x5aa)](_0x19416f,_0x40e6fa)[_0x369d9b(-0x165,-0x19b,-0xd2,-0x181)](_0x4367b4[_0x369d9b(-0x6d,-0x91,-0xe5,-0x89)]);else{!_0x44fbb5[_0x369d9b(-0x105,-0x1bb,-0xcf,-0xac)]&&(_0x44fbb5[_0x4ff051(0x475,0x3c6,0x559,0x515)]=[]);!_0x44fbb5['outfits'][_0x369d9b(-0x6c,-0x3d,-0x13d,-0xd8)](_0x3113da)&&(_0x44fbb5[_0x369d9b(-0x105,-0x167,-0x106,-0x167)][_0x369d9b(-0x156,-0xea,-0x116,-0x1b4)](_0x3113da),console[_0x4ff051(0x549,0x613,0x4bd,0x542)]('[character'+_0x369d9b(-0x4e,0x78,0x95,-0xed)+_0x4ff051(0x528,0x47c,0x53c,0x53a)+_0x3113da+'\x22\x20已归属到角色\x20\x22'+_0x4121e0+'\x22'));break;}}}}}}_0x4367b4['biOjX'](saveSettingsDebounced);const _0x42cc54=_0x4367b4[_0x4ff051(0x472,0x481,0x47d,0x39a)]($,_0x369d9b(-0x12c,-0x16c,-0x1d6,-0x7b)+'-tab-chara'+_0x369d9b(-0x151,-0x202,-0x11e,-0x8c));_0x42cc54['length']&&_0x4367b4[_0x369d9b(-0x12,0x61,0x48,0x37)](refreshCharacterSettings,_0x42cc54);}function updateFormFields(_0xbccd48){const _0x483dcb={};_0x483dcb['ENqSm']=_0x536df6(0x54f,0x520,0x5c7,0x5a4),_0x483dcb[_0x536df6(0x5ae,0x492,0x47f,0x51a)]=function(_0x26a902,_0x5a8d7a){return _0x26a902!==_0x5a8d7a;},_0x483dcb[_0x2d1fe3(0x6,0xd8,0xdd,0x31)]=_0x2d1fe3(-0x65,-0x6b,0x74,-0x9f);function _0x2d1fe3(_0xeb067b,_0x4244d,_0x5705ec,_0x448b76){return _0x105e(_0xeb067b- -0x2d7,_0x5705ec);}_0x483dcb[_0x536df6(0x5d7,0x543,0x628,0x5f5)]=_0x536df6(0x625,0x5b3,0x55c,0x547),_0x483dcb[_0x2d1fe3(-0x141,-0x1b4,-0x8e,-0x67)]='input',_0x483dcb[_0x536df6(0x59c,0x522,0x62a,0x573)]=_0x536df6(0x627,0x631,0x502,0x566),_0x483dcb[_0x536df6(0x5bf,0x4ba,0x5ef,0x54d)]='nameEN',_0x483dcb[_0x536df6(0x6e6,0x61e,0x63d,0x617)]='characterT'+_0x536df6(0x566,0x59c,0x4e7,0x5ba);function _0x536df6(_0x2f3feb,_0x3f536a,_0x20b62b,_0x240153){return _0x105e(_0x240153-0x378,_0x3f536a);}_0x483dcb[_0x2d1fe3(-0xf1,-0x2d,-0x12a,-0xca)]=_0x2d1fe3(-0x106,-0x85,-0x75,-0x14e)+_0x2d1fe3(-0x160,-0x1d9,-0x8b,-0x99),_0x483dcb['yliVi']='facialFeat'+_0x2d1fe3(-0x15c,-0x115,-0x1d7,-0x20b),_0x483dcb[_0x536df6(0x6b3,0x5c9,0x562,0x626)]='upperBodyS'+'FW',_0x483dcb[_0x2d1fe3(-0x1a1,-0x228,-0x1e0,-0x14b)]='upperBodyS'+_0x2d1fe3(-0x7e,-0x82,-0x89,-0x47),_0x483dcb['yDSWr']='fullBodySF'+'W',_0x483dcb[_0x536df6(0x606,0x680,0x5fa,0x5f0)]=_0x536df6(0x591,0x5d2,0x639,0x604)+_0x2d1fe3(-0x11b,-0x8e,-0x17d,-0xad),_0x483dcb[_0x2d1fe3(-0x5e,0x39,0x6e,-0x81)]=_0x2d1fe3(-0x16b,-0x145,-0x8c,-0xaa)+'FW',_0x483dcb[_0x2d1fe3(-0x12d,-0x4f,-0x20e,-0xac)]=_0x536df6(0x429,0x4cf,0x4c7,0x4e4)+_0x2d1fe3(-0x7e,-0x8b,-0x107,-0xe2);const _0x3a98dc=_0x483dcb,_0x43a6cc=[_0x3a98dc[_0x536df6(0x541,0x54e,0x634,0x573)],_0x3a98dc[_0x2d1fe3(-0x102,-0x192,-0xca,-0x165)],_0x3a98dc['ggikA'],_0x3a98dc[_0x536df6(0x5e5,0x5dd,0x54f,0x55e)],_0x3a98dc[_0x536df6(0x669,0x4bb,0x5ec,0x591)],_0x3a98dc[_0x2d1fe3(-0x29,0x64,-0x86,0x67)],_0x3a98dc['iTglR'],_0x3a98dc[_0x536df6(0x5d9,0x679,0x54e,0x613)],_0x3a98dc[_0x2d1fe3(-0x5f,0x42,-0x118,-0x104)],_0x536df6(0x51f,0x5a4,0x474,0x515)+_0x536df6(0x43b,0x42d,0x4a6,0x4ad),_0x536df6(0x4b4,0x542,0x56b,0x515)+'SFWBack',_0x3a98dc['bYxVo'],_0x3a98dc['NWhcb']];_0x43a6cc[_0x536df6(0x612,0x5d1,0x4e4,0x543)](_0x1b8cb3=>{function _0x5d3a70(_0x3ed35d,_0x3721b6,_0x1f656a,_0x51af5b){return _0x536df6(_0x3ed35d-0x5d,_0x51af5b,_0x1f656a-0x1b,_0x3721b6- -0x30a);}function _0x17a233(_0x587c6e,_0x434628,_0x2bc6ac,_0x1b634b){return _0x536df6(_0x587c6e-0xb1,_0x587c6e,_0x2bc6ac-0x15e,_0x1b634b- -0x466);}if(_0x5d3a70(0x1c0,0x29a,0x263,0x260)!==_0x3a98dc['ENqSm'])_0xf90bd4[_0x5d3a70(0x219,0x1af,0x1c2,0x1f0)](..._0x4be493[_0x17a233(0x4d,0x155,0xa0,0xc2)+'fits']);else{if(_0xbccd48[_0x1b8cb3]){const _0x25517f=document[_0x17a233(0xd0,0x1f1,0x109,0x11e)+'ById'](_0x17a233(0x180,0x104,0x137,0x121)+_0x1b8cb3);_0x25517f&&(_0x3a98dc['Qxgpe'](_0x3a98dc[_0x5d3a70(0x365,0x34b,0x3f2,0x3aa)],_0x3a98dc[_0x5d3a70(0x277,0x2eb,0x269,0x30e)])?(_0x25517f[_0x17a233(0x216,0x199,0x277,0x1d6)]=_0xbccd48[_0x1b8cb3],$(_0x25517f)[_0x17a233(-0x81,0x79,0x9c,0x44)](_0x3a98dc['JaOWf'])):_0x8dc9b6[_0x5d3a70(0x33b,0x308,0x241,0x35b)+_0x5d3a70(0x3ad,0x2db,0x396,0x251)]={});}}});}