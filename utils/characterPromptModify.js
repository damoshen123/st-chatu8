(function(_0x546654,_0x56722){function _0x343444(_0x10ce39,_0x4323ab,_0x10fb96,_0x7b00c7){return _0x147c(_0x10fb96- -0x1b1,_0x10ce39);}const _0x31f9b6=_0x546654();function _0x55558d(_0xe3c6f8,_0x5c3480,_0x108309,_0x3f4d3d){return _0x147c(_0x108309- -0x35,_0x5c3480);}while(!![]){try{const _0x39ed2f=parseInt(_0x55558d(0x1b8,0x159,0x1a0,0x1bf))/(-0x1cd4+-0xe12+0x2ae7)+-parseInt(_0x343444(-0x41,0x6,-0x9,-0x69))/(0x25f1+0x3b9*0x1+0xf8*-0x2b)+-parseInt(_0x55558d(0x17d,0x256,0x203,0x1b5))/(-0x1*0x3dd+0x612+0x232*-0x1)+-parseInt(_0x55558d(0x1b9,0x237,0x224,0x182))/(-0x1*-0x509+-0xd1+0x10d*-0x4)+-parseInt(_0x55558d(0x131,0x1d2,0x147,0x1e4))/(-0x13d2*0x1+0x263d+-0x1266)+-parseInt(_0x343444(0x93,0xf2,0x84,0x33))/(-0x49*-0x5b+0x5fe+0x1*-0x1feb)*(parseInt(_0x55558d(0x272,0x1fd,0x1d4,0x161))/(0x4c7*0x1+-0x1207+0xd47))+parseInt(_0x343444(0x76,0x7c,-0x1c,-0x9c))/(-0xc6a+-0x239f*-0x1+-0x11*0x15d)*(parseInt(_0x343444(0xc,0x72,0x8b,-0x1d))/(-0x213e+0x2582+-0x169*0x3));if(_0x39ed2f===_0x56722)break;else _0x31f9b6['push'](_0x31f9b6['shift']());}catch(_0x7a8caf){_0x31f9b6['push'](_0x31f9b6['shift']());}}}(_0x2888,0x56e0d*0x2+-0x67c49+-0x2dd*-0x15d));function _0x147c(_0x4f8483,_0x588241){_0x4f8483=_0x4f8483-(-0x17f2+0x135*0x1d+-0x9a5);const _0x5897f0=_0x2888();let _0x52ead3=_0x5897f0[_0x4f8483];if(_0x147c['QZlVND']===undefined){var _0x39a66f=function(_0x55d01d){const _0x3363bf='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x56977a='',_0x124e4b='',_0x610fa0=_0x56977a+_0x39a66f;for(let _0x1d7c5b=-0x76e*0x3+0x1267+0x3e3,_0x363282,_0x3aa7c5,_0x49e738=0x3ae*0x1+-0x1*0x1231+-0x5*-0x2e7;_0x3aa7c5=_0x55d01d['charAt'](_0x49e738++);~_0x3aa7c5&&(_0x363282=_0x1d7c5b%(-0x105+-0xce6+0x1d*0x7b)?_0x363282*(-0x1363*-0x2+-0x211d+0x1*-0x569)+_0x3aa7c5:_0x3aa7c5,_0x1d7c5b++%(0xda8*0x2+-0x1f84+0x438))?_0x56977a+=_0x610fa0['charCodeAt'](_0x49e738+(0xc3*0x2f+0x137+0x1*-0x24fa))-(-0x1740*0x1+-0x18e2+0x302c)!==-0x5cf*-0x5+0x49c*0x1+-0x21a7?String['fromCharCode'](0x4f0+0x53c+-0x30f*0x3&_0x363282>>(-(0x84*0x39+-0x1f5e+0xfe*0x2)*_0x1d7c5b&0x2351+0x1ea*0x7+-0x3*0x103b)):_0x1d7c5b:0xf*-0x13f+-0x10f3*0x1+0x23a4){_0x3aa7c5=_0x3363bf['indexOf'](_0x3aa7c5);}for(let _0x434729=0xc6*-0x1e+-0x22c*0x11+0x3c20,_0x2e7a9a=_0x56977a['length'];_0x434729<_0x2e7a9a;_0x434729++){_0x124e4b+='%'+('00'+_0x56977a['charCodeAt'](_0x434729)['toString'](0x1c4d+-0x3dd+-0x1860))['slice'](-(0x20b0+0xa9d+-0x2b4b));}return decodeURIComponent(_0x124e4b);};_0x147c['pfSPln']=_0x39a66f,_0x147c['xwvpoI']={},_0x147c['QZlVND']=!![];}const _0x35d1ca=_0x5897f0[0x5c8+-0x1*0x81b+0x253],_0x4c16f8=_0x4f8483+_0x35d1ca,_0x4345d5=_0x147c['xwvpoI'][_0x4c16f8];if(!_0x4345d5){const _0x102477=function(_0x2a00c0){this['eywbMK']=_0x2a00c0,this['qBOqQh']=[-0x16be+-0x14ef+0x2bae,-0x1*0x17ae+0x4cd*0x1+0x12e1,-0x1bf*0x16+-0x1702+-0x3d6c*-0x1],this['mnTCHP']=function(){return'newState';},this['gbVWFZ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['FYIhxy']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x102477['prototype']['ZUrATO']=function(){const _0x36c59e=new RegExp(this['gbVWFZ']+this['FYIhxy']),_0x3b4d57=_0x36c59e['test'](this['mnTCHP']['toString']())?--this['qBOqQh'][-0x5a6*-0x3+0x22ec+-0x33dd]:--this['qBOqQh'][-0x18cf+0x728+0x11a7*0x1];return this['JAQmdw'](_0x3b4d57);},_0x102477['prototype']['JAQmdw']=function(_0x640003){if(!Boolean(~_0x640003))return _0x640003;return this['ogtCDo'](this['eywbMK']);},_0x102477['prototype']['ogtCDo']=function(_0x4c985d){for(let _0x48e017=-0x179+0xfe0+-0xe67,_0xa53781=this['qBOqQh']['length'];_0x48e017<_0xa53781;_0x48e017++){this['qBOqQh']['push'](Math['round'](Math['random']())),_0xa53781=this['qBOqQh']['length'];}return _0x4c985d(this['qBOqQh'][0x3b*0xa7+0x1bfa+0xd4b*-0x5]);},new _0x102477(_0x147c)['ZUrATO'](),_0x52ead3=_0x147c['pfSPln'](_0x52ead3),_0x147c['xwvpoI'][_0x4c16f8]=_0x52ead3;}else _0x52ead3=_0x4345d5;return _0x52ead3;}const _0x513cc7=(function(){const _0x471bbb={};_0x471bbb[_0x116729(0x491,0x48d,0x470,0x535)]=function(_0xb2923e,_0x32f4dc){return _0xb2923e===_0x32f4dc;},_0x471bbb[_0xe85293(0x482,0x460,0x486,0x4d2)]=_0xe85293(0x4fc,0x3bc,0x455,0x428),_0x471bbb['wXliV']=_0x116729(0x48b,0x491,0x534,0x3f1);const _0x1d2b3f=_0x471bbb;function _0xe85293(_0x3b842d,_0xc30bcb,_0x42d000,_0x10923a){return _0x147c(_0x42d000-0x20a,_0xc30bcb);}function _0x116729(_0xca6e34,_0x44cc03,_0x163533,_0x517301){return _0x147c(_0xca6e34-0x2dd,_0x163533);}let _0x1d2b5d=!![];return function(_0x256e77,_0x26ced5){const _0x1624cd={};_0x1624cd[_0x25d24c(0x6ae,0x678,0x5f8,0x634)]=_0x1d2b3f[_0x25d24c(0x57a,0x649,0x5a7,0x60c)];const _0x128a4a=_0x1624cd;function _0x1c251e(_0x4b9ee1,_0x24ade2,_0x5e5a43,_0x5ddf46){return _0xe85293(_0x4b9ee1-0x157,_0x24ade2,_0x4b9ee1- -0x379,_0x5ddf46-0xe0);}function _0x25d24c(_0x52a211,_0x5349e8,_0x1c9fd4,_0x17a62e){return _0x116729(_0x17a62e-0xb3,_0x5349e8-0xb7,_0x1c9fd4,_0x17a62e-0xe3);}if(_0x1d2b3f[_0x25d24c(0x5c7,0x578,0x4b5,0x544)](_0x1d2b3f['wXliV'],_0x1d2b3f[_0x1c251e(0xaf,0x150,0x86,0x6b)])){const _0xb946f=_0x1d2b5d?function(){function _0x1e5eaa(_0x516519,_0x34bca9,_0x147d52,_0x16d5d1){return _0x1c251e(_0x16d5d1-0x2bd,_0x34bca9,_0x147d52-0xc5,_0x16d5d1-0x25);}function _0xad22a4(_0x2e1857,_0x488236,_0x462efc,_0x3ac66c){return _0x25d24c(_0x2e1857-0x169,_0x488236-0xf4,_0x3ac66c,_0x462efc- -0x589);}if(_0x26ced5){if(_0x1d2b3f['TLxoy'](_0x1e5eaa(0x3e9,0x3f8,0x42a,0x3c4),_0xad22a4(0xcd,0xbc,0x7d,0x68))){const _0x10a5b4=_0x26ced5[_0xad22a4(0xb3,0x7b,0xb9,0x3e)](_0x256e77,arguments);return _0x26ced5=null,_0x10a5b4;}else{_0x4847a7[_0x1e5eaa(0x341,0x299,0x2b7,0x311)](_0x128a4a[_0xad22a4(0xcb,0x4,0xab,0x10f)]);return;}}}:function(){};return _0x1d2b5d=![],_0xb946f;}else{_0x8a2f01['info']('已取消更新');return;}};}()),_0x3bb11c=_0x513cc7(this,function(){const _0x6206a6={};_0x6206a6[_0x4fe324(0x23,-0x1f,0x124,0x7f)]=_0x4fe324(0x3f,0x11,0x77,0x8c)+'+$';function _0x306131(_0x218f3f,_0xb522a,_0x2edb18,_0x545ea2){return _0x147c(_0x2edb18- -0x20c,_0xb522a);}const _0x368e4c=_0x6206a6;function _0x4fe324(_0x6d5112,_0x118fa6,_0x4d835d,_0x2546e0){return _0x147c(_0x2546e0- -0x117,_0x118fa6);}return _0x3bb11c[_0x4fe324(0x116,0xc7,0x1ea,0x16c)]()[_0x306131(0x2a,-0x82,0x3,-0x8d)](_0x368e4c[_0x4fe324(0x30,0x2,0x76,0x7f)])[_0x4fe324(0x166,0x1a5,0xcc,0x16c)]()[_0x306131(-0x7,0x1e,0x43,0x43)+'r'](_0x3bb11c)[_0x4fe324(0x16e,0xc7,0x194,0xf8)](_0x368e4c[_0x4fe324(0x70,0xa6,-0x2a,0x7f)]);});_0x3bb11c();function _0x2888(){const _0x593383=['BM93','5PYQ5zYOieXmtsdOVPpLH7RKUk0','C2vHCMnO','EvPtrvi','B3vNq1y','Bxb0icHjrdOG','BhHQy04','BwvZC2fNzsbHDa','6k6+ici','AKjYtK8','tMLND2C','DhjPz2DLCG','5lIk5y2k6lQRtLngvZOG','uxjNuvi','q1bWBMG','B0f1t2e','Ahnbyva','D1HSAvy','yK5XzMO','DLzZDxO','CIb0zxH0oG','ywrK','zvfjueG','zNLDifnHDMvKia','zgf0yq','y2HHCMfJDgvYCW','ALbOs2e','Dwn0Dgq','5PwW5O2UoG','koEPUIK','zNLDiowqIow5TUEBUoMcU+A2IoAbRW','rvjXwvC','pos6UUEjQt4k','zuH5qxy','zNLDifn0yxj0Aq','BfrbuMC','zNLDifjHDYbmta','zNLDievYCM9YoG','5lIk5y2k6lQRtLngvW','tsbVDxrWDxqGzG','mJm4mZe0uvjYAezm','twHjAfK','AeTkvxK','nZKZnZe5EK11BLLm','ChjVBxb0oG','C2vft1y','tfrrqLu','mZa2ndq5nJr1wLzWtKe','ChjVBxb0','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','zNvSBejVzhLouW','EwTPANC','qu93vfy','yMfZzty0','zNLDien1CNjLBG','5lIl5y2k6lQRu0zx6iom6z2I','DxjLC0jHy2S','Ew5XDKS','wuLpuuy','5y+c6icd5zU+54Mh','zfLXDuW','6iUX5PAh5zcn56EW','teXnioI/LowBNUE7K+AENos4UUEPUG','y29UDgv4DdO','sKvdqxu','zM9ZAvO','y29UC3rYDwn0BW','5lQu5A6y5Asw6lkmoIa','tMXwC1e','AxnbCNjHEq','AuLbreC','zNvSBejVzhLtrG','B1zZuKO','t3fUwMm','v1D4CeC','rdOG','mZCWmZiWngjiqLvQrW','u0zxqMfJAW','C2nYAgS','Aw1Hz2vFDxjS','zNLDiow3SUABToAwSoINKUIjSUMIHa','BwfW','tLDkrgC','BMfTzq','zfvtr28','y2HHCL9TB2rPzG','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','DgLTzw91De1Z','lI4U','icdMLRa6ia','BwLrvxG','zgf0ytPPBwfNzq','CMvTB3zLtgLZDa','Aw5MBW','5lIl5y2k6lQRtLngv+IdJoMDOJO','Ewz1yNC','ChvZAa','uufOyvy','vMfYAwfIBgvZ','zxDky08','CMfUzg9Tvvvjra','DMfYAwfIBgvZoG','BMfTzuvo','BgznDuu','tu55q28','CMvWBgfJzq','z1LHENi','tNfPAxG','zMfJAwfSrMvHDa','BKzls0i','tKzmvLy','teXnioIVT+AXGUwKSEI0Pq','Dhb1DdO','wgzksfu','q2Pmv1q','5A2x5Q61ici','5lIl5y2k6lQRtLngv+IdJoMDOG','Dg9tDhjPBMC','DfnSCLi','sg5nCxi','uffJu1e','5yEg5Ash5PU05PAW6kEs6iMYici','CvngChC','CMDOrvu','qMDRDNm','y2HHCMfJDgvYua','qu93u1m','ue9ou0u','qMPjBNe','tvvTswe','zNLDifjLCxvLCW','BMrLEdO','5lIk5y2k6lQRtLngv+IdJoMDOJO','DKvmu04','vu91re4','y2HHDe1LDgfKyq','t0rjrLLFr0vuxW','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','Aw5KzxHpzG','rLHpDM0','zePcDgm','uxvmyMe','BMCGy2HHCMfJDa','uhjVBxb0tw9KAq','uxDHuwW','vLHjBgy','DMfYAwfIBgvZ','v29YBgrcB29R','t0rjrLLFuKvrvq','yNndDg8','EMvesvy','zgTRvvu','6iUX5PAh5zcn56EWoIa','vwPPrfm','AeTJv2m','B21YqMW','BerLyMG','zgf0ytO','u0zx','CMvWBgfJzufSBa','zxfQz0i','Avr0t20','B0vdwfi','BgvUz3rO','yxbWBhK','CuLnChu','BMC6','wNrVBfq','wfnYv3C','BeHXvfO','5lIk5y2k6lQRu0zxoIa','C3PwrKW','5lIl5y2k6lQRtLngvW','icdML6C6ia','weLez20','zNLDiezPBMfSia','5lIk5y2k6lQRtLngv+IdJoMDOG','zxf1AxjLBwvUDa','E3VNLkJMIlFPNidMSyj9Fq','zw1pzu4','zNLDioINO+AEKowiSoEAHos6UUEjQq','wwnMEeK','ywPHD04','z1zUD0i','A1fWq3e','C3rHCNrZv2L0Aa','C3vIC3rYAw5N','AM9PBG','6k+35ywi6ycj5OUP5lIa5lIQ6kEs6iMY6Ake6k6+','EKHpB3G','ufjptvbux1jfuW','Dgv4Da','mZm0ntCWnvLAu1jJua','z2v0rwXLBwvUDa','wMHQDKK','C2L6zq','B2rPzNKGteXnia','BwvZC2fNzq','ALzLs1O','6kkR5l2/55sO77YA','teXnx0niqvjFtq','DcbWCMvZzxq6','5lIl5y2k6lQRu0zx','sxPjshu','DxjS','CfDMr2i','DxbWzxjcB2r5uW','sLf1s2q','B2jQzwn0','z3j1yMq','Avrvzhm','B1jPCLC','5BEY5y+w5RAi5PU05PAW','C0XnwKS','uM5fuKe','zeT6DfK','qLnVy0u','ofrsrMLvra','t1LnwMO','z2vUzxjHDgLVBG','CMvZzxrZ','zM9YrwfJAa','B3iGzgvIDwDNAq','5lQu5A6y5Asw6lkm','D29YBgqGyM9VAW','Bg9N','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','CMvZDwX0','ExDZqNi','zNLDie5VignOyq','zNLDiev4zwn1Da','kcGOlISPkYKRkq','zxiGChjVBxb0ia','zMLHsMi','zNLDioATO+wCQowKHoEqHUINKUIjSG','D0jPBeC','mtK4ody5mfPxuKfRBa','qKH3Cxi','DMfSDwu','5lQu5A6y5Asw6lkm6iom6z2I','5lIT5PAh5zcn56EW','suXTzwe','CNDZs0G','Aw1Hz2vZihrVia','EgTAANC','q0fmtvC','Aw5JBhvKzxm','CMvZzxrjza','veX4B3K','y29UDgvUDa','DK5Suei','zw5LCG','sKLzwha','Avr6Ew4','zMLSDgvY','BNvXuwq','zw1PDa','Avv6qxq','ze93qNC','AM5iy0q','rLDcywnR','DgvYihrYAwDNzq','Cfzxq2u','zxjYB3i','r2vXqwC','DgLUzYbJAgfYia','t3f6zM0','q29UDgv4Da','DhLWzq','Dhz3seu','E3VLVzpLIy3OP5lOIBj9Fq','tvfkDNy','Egriufq','v3H4D0W','Eurzrge','t0rjrLLFuKvtua','v0jHy2S','ig91Dhb1Da','y2HHCL8','r2TdEuu','EwHxu0S','odi1nduZqNLurNvP','zuDtwMu','CYbMB3vUzcbPBG','r3nZwhG','Bw9KAwz5ihbYBW','iIdNMOtKU6xKUiVMLBdMJA46cGO','v1nwwfC','D1bfrhe','DwL5v3C','Aw5NignOyxiGBq','C1jrCuW','DxbWzxjcB2r5tG','Aw5WDxq','vMHsreG','quPHsMu','5lIl5y2k6lQRu0zxoIa','sfbJBva','zgv0ywLS','yxv0BW','6kEs6iMY5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','5Rgc6lAf5PE2','C3vJy2vZCW','BKTXCfO','BMfTzuno','DxjLCW','C3rYAw5N','DhjPBq','5lIk5y2k6lQRu0zx6iom6z2I','l3bUzZTIyxnLnG','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','EuLPu3q','lxrHyI1JAgfYyq','CMfUzg9T','CeHwsM0','zNLDienOyxjHyW','A2n0txa','C1nirLG','s3DpBgO','A1fbqNO','v0DZv0G','tg1xsgS','5lIk5y2k6lQRu0zx','y3rLCG','pc/KURRNIAK+','tKzrqK0','tNzMvMS','t05trq','DfHNAuK','Ag5ACMq','sNzuDuS','CxPTAvC','w2nOyxjHy3rLCG','mtq3v2TsvwXh','DvbLuge','shrqBNq','re1pwLu'];_0x2888=function(){return _0x593383;};return _0x2888();}import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x58b1e1}from'./promptProcessor.js';function replacePlaceholder(_0x39caac,_0x5536fb,_0x566e75,_0x34f26b){const _0x5b3bc3={'zHOox':function(_0x196bf2,_0x42d0c7){return _0x196bf2!==_0x42d0c7;},'NFQBM':_0x420239(0x58e,0x564,0x60c,0x634),'hKcWc':function(_0x437967,_0x5f4f60){return _0x437967>_0x5f4f60;},'eqjgB':'...','TYiHE':function(_0x1f533a,_0x1bdd19){return _0x1f533a===_0x1bdd19;},'uiyWw':_0x5e130f(0x4c9,0x4ed,0x461,0x498),'jVeKZ':function(_0x430798,_0x5017b7){return _0x430798===_0x5017b7;},'tvwHE':_0x420239(0x4f0,0x558,0x528,0x52a),'hHiZI':'wocxA','DztHX':'aYbui','RTSLD':function(_0x52b163,_0x1a92ee){return _0x52b163!==_0x1a92ee;},'Nqiix':_0x5e130f(0x4ee,0x4a2,0x588,0x538),'XSrWw':_0x5e130f(0x4eb,0x4ef,0x4c8,0x468),'awoKh':function(_0x7765c4,_0x2967a2,_0x3d27d3,_0xc781ed,_0x3e8320){return _0x7765c4(_0x2967a2,_0x3d27d3,_0xc781ed,_0x3e8320);}};function _0x420239(_0x3704b9,_0x56543a,_0x5ca439,_0xabae35){return _0x147c(_0x3704b9-0x364,_0x56543a);}if(_0x5b3bc3['TYiHE'](typeof _0x39caac,_0x5b3bc3[_0x5e130f(0x4b8,0x53e,0x512,0x528)]))return _0x566e75&&_0x39caac[_0x5e130f(0x48d,0x451,0x4a4,0x466)](_0x5536fb)&&(_0x34f26b&&_0x34f26b[_0x5e130f(0x4fd,0x4e1,0x48b,0x59d)](_0x5536fb)),_0x39caac['replaceAll'](_0x5536fb,_0x566e75);if(Array[_0x420239(0x5b6,0x518,0x61b,0x632)](_0x39caac))return _0x39caac[_0x420239(0x5c2,0x541,0x564,0x583)](_0x354076=>replacePlaceholder(_0x354076,_0x5536fb,_0x566e75,_0x34f26b));if(_0x39caac&&_0x5b3bc3[_0x420239(0x4e6,0x464,0x50d,0x555)](typeof _0x39caac,_0x5b3bc3[_0x420239(0x52d,0x543,0x55c,0x590)])){if(_0x5b3bc3['hHiZI']!==_0x5b3bc3['DztHX']){const _0x7c9969={};for(const _0x5627ce in _0x39caac){_0x5b3bc3['RTSLD'](_0x5b3bc3[_0x5e130f(0x554,0x4db,0x559,0x52c)],_0x5b3bc3[_0x5e130f(0x591,0x5e9,0x5cb,0x625)])?_0x7c9969[_0x5627ce]=_0x5b3bc3['awoKh'](replacePlaceholder,_0x39caac[_0x5627ce],_0x5536fb,_0x566e75,_0x34f26b):_0x44495d(_0x1cc3b4);}return _0x7c9969;}else{if(_0x2bed8a[_0x1a0b04]&&_0x5b3bc3[_0x5e130f(0x454,0x44a,0x402,0x471)](_0x120c71[_0x48c76a],_0x1bb39b[_0x421ad8])){const _0x1ad480=_0x570814[_0x2d6970]||_0x5b3bc3[_0x5e130f(0x4dc,0x569,0x51c,0x447)],_0x5078c5=_0x51b025[_0x39df31];_0x2ef6ec+='•\x20'+_0x13a9e5[_0x7ee2dd]+':\x0a',_0x562265+=_0x5e130f(0x596,0x5f7,0x507,0x576)+_0x1ad480[_0x5e130f(0x451,0x497,0x3d9,0x449)](0x1549+0x29d*-0x1+-0x12ac,-0x7b3+0x7e4+-0x1*-0x1)+(_0x5b3bc3[_0x5e130f(0x583,0x512,0x591,0x5a6)](_0x1ad480[_0x5e130f(0x58c,0x535,0x612,0x60e)],0x8*-0x389+0x1*0x12f7+0x983)?_0x5b3bc3[_0x5e130f(0x589,0x5db,0x515,0x5d7)]:'')+'\x0a',_0xf3be4b+=_0x5e130f(0x542,0x5a1,0x55f,0x52c)+_0x5078c5[_0x420239(0x4da,0x515,0x4c3,0x553)](-0x2*-0xad9+-0x94f+-0x421*0x3,0x1*-0x24fb+-0x21f0+0x471d)+(_0x5078c5[_0x420239(0x615,0x581,0x599,0x6b8)]>-0x1057*0x2+-0x1522+0x1be*0x1f?_0x5b3bc3['eqjgB']:'')+'\x0a\x0a',_0x59f498++;}}}function _0x5e130f(_0x518a96,_0x410b0e,_0x29f916,_0x4ffd60){return _0x147c(_0x518a96-0x2db,_0x29f916);}return _0x39caac;}function attachImagesToMessage(_0xe84467,_0x34d24,_0x5cfeeb,_0x34701e=_0x9decc7(0x551,0x504,0x4eb,0x56f)){const _0xacffa9={};_0xacffa9[_0x3b203e(-0x75,0x50,-0x49,0x3)]=function(_0x3f57cf,_0x521278){return _0x3f57cf===_0x521278;},_0xacffa9[_0xda3dd5(0x353,0x3e4,0x38c,0x427)]=function(_0x30ada0,_0x32a662){return _0x30ada0===_0x32a662;};function _0xda3dd5(_0x2f424e,_0x30db49,_0x11cc0d,_0x4a97a3){return _0x9decc7(_0x30db49- -0x104,_0x30db49-0xd4,_0x4a97a3,_0x4a97a3-0x1ce);}_0xacffa9[_0x3b203e(-0x78,-0x81,-0xab,-0x37)]=_0xda3dd5(0x3c6,0x391,0x30f,0x373),_0xacffa9[_0xda3dd5(0x481,0x424,0x3e7,0x3a3)]=function(_0x2da5f1,_0x59d3a3){return _0x2da5f1+_0x59d3a3;},_0xacffa9['IzIHu']=_0xda3dd5(0x3c0,0x380,0x30d,0x3ff),_0xacffa9['scrhk']=_0x3b203e(0x79,0x21,0x32,-0x73),_0xacffa9[_0x3b203e(-0x131,-0x48,-0xec,-0x106)]=_0xda3dd5(0x45d,0x461,0x4ee,0x3c4),_0xacffa9[_0xda3dd5(0x3be,0x456,0x443,0x3b9)]=_0x3b203e(-0xfb,0xe,-0x92,-0x6a),_0xacffa9['WSVXW']=function(_0x24c14b,_0x1d14a7){return _0x24c14b===_0x1d14a7;},_0xacffa9['iUzAt']=function(_0x193acf,_0x1b70e5){return _0x193acf+_0x1b70e5;},_0xacffa9[_0xda3dd5(0x4b4,0x499,0x3ff,0x426)]=function(_0x1eb78d,_0x3bdbb4){return _0x1eb78d<_0x3bdbb4;},_0xacffa9['dkACK']=function(_0x1536e3,_0x12a0b8){return _0x1536e3>=_0x12a0b8;},_0xacffa9[_0x3b203e(-0x54,-0x3c,0x3c,-0x32)]='cDNsR',_0xacffa9[_0xda3dd5(0x492,0x410,0x430,0x390)]=function(_0x41ca0c,_0x114aab){return _0x41ca0c!==_0x114aab;},_0xacffa9[_0x3b203e(-0xf6,-0x16e,-0xee,-0x111)]=_0x3b203e(-0x115,-0x85,-0xba,-0x31);const _0x539c7c=_0xacffa9;if(!_0x5cfeeb||_0x539c7c[_0x3b203e(-0x6b,0x5,-0x9e,-0x1d)](_0x5cfeeb[_0xda3dd5(0x425,0x4b6,0x4a6,0x40e)],0x2da+0x25*0x14+-0x5be)||_0x539c7c['UOuDN'](_0x34d24,0x1003+0x1f*0x12a+-0x3419*0x1)||_0x539c7c['dkACK'](_0x34d24,_0xe84467[_0xda3dd5(0x52c,0x4b6,0x55d,0x4d3)])){if(_0x539c7c['lTARg'](_0x539c7c['ZtolT'],'Mkljk')){const _0x47e58e=_0x539c7c[_0x3b203e(-0x6c,-0xac,-0x49,-0x9f)](typeof _0x3b4d57,_0x3b203e(-0xeb,-0x29,-0x8b,-0xb2))?_0x640003:_0x4c985d[_0x3b203e(-0xdd,-0x98,-0x37,0x51)],_0x583cab=_0x539c7c[_0xda3dd5(0x44c,0x3e4,0x3c1,0x395)](typeof _0x48e017,_0x539c7c[_0xda3dd5(0x473,0x3d3,0x3f3,0x475)])&&_0xa53781[_0xda3dd5(0x412,0x465,0x436,0x3cd)]?_0x58e524[_0xda3dd5(0x509,0x465,0x4c6,0x456)]:''+_0x1d61f1+_0x539c7c['bNqfj'](_0x2343f3,-0x17e6+0x1*-0xb54+0x233b),_0x50eadc={};_0x50eadc['type']=_0x539c7c[_0xda3dd5(0x350,0x38c,0x3ba,0x363)],_0x50eadc[_0x3b203e(-0x132,-0x9b,-0xfe,-0xc4)]='['+_0x583cab+']',_0x58f286[_0xda3dd5(0x41a,0x473,0x490,0x50a)](_0x50eadc);let _0x5e4846=_0x47e58e;!_0x47e58e[_0xda3dd5(0x3ff,0x37a,0x313,0x41f)](_0x539c7c[_0xda3dd5(0x3e6,0x460,0x4bc,0x433)])&&(_0x5e4846=_0x3b203e(-0x50,0x1c,-0x10,-0x6a)+_0x3b203e(-0xc3,-0xf0,-0x88,-0xf5)+'4,'+_0x47e58e);const _0x597f86={};_0x597f86[_0x3b203e(-0x135,-0x4f,-0xb1,-0xbe)]=_0x539c7c[_0x3b203e(-0x125,-0x152,-0xec,-0x186)],_0x597f86[_0x3b203e(-0xb4,0x26,-0x1d,0x86)]={},_0x597f86[_0x3b203e(-0xb4,0x26,-0x1d,0x86)][_0x3b203e(-0x13b,-0x79,-0xf1,-0x196)]=_0x5e4846,_0x597f86[_0x3b203e(-0xb4,0x26,-0x1d,0x86)][_0x3b203e(-0xe7,-0x12,-0x93,-0x60)]=_0x539c7c[_0xda3dd5(0x4b4,0x456,0x4de,0x44b)],_0x1bd82f['push'](_0x597f86);}else return _0xe84467;}const _0x4f6ec7=[..._0xe84467],_0x2a34de=_0x4f6ec7[_0x34d24],_0x2f1832=[];function _0x3b203e(_0x59c349,_0x264b75,_0xbba8ef,_0x4559c8){return _0x9decc7(_0xbba8ef- -0x582,_0x264b75-0x148,_0x264b75,_0x4559c8-0x1e9);}if(typeof _0x2a34de[_0xda3dd5(0x348,0x3ba,0x381,0x33d)]===_0xda3dd5(0x3fd,0x3f3,0x364,0x375)){const _0x56ac5a={};_0x56ac5a[_0x3b203e(-0x43,-0x107,-0xb1,-0x12c)]=_0x539c7c[_0x3b203e(-0xe4,-0x142,-0xf2,-0xfe)],_0x56ac5a[_0xda3dd5(0x3e1,0x380,0x35e,0x3ec)]=_0x2a34de[_0x3b203e(-0x82,-0x110,-0xc4,-0x5a)],_0x2f1832['push'](_0x56ac5a);}else Array[_0xda3dd5(0x453,0x457,0x422,0x40b)](_0x2a34de[_0xda3dd5(0x327,0x3ba,0x38f,0x3a8)])&&(_0x539c7c[_0xda3dd5(0x45a,0x410,0x3b3,0x37d)](_0xda3dd5(0x456,0x3c4,0x325,0x3b1),_0x539c7c[_0xda3dd5(0x3bd,0x390,0x3b2,0x3b5)])?(_0x318bd0[_0xda3dd5(0x3a4,0x3af,0x390,0x3ea)]=_0x2a2550[_0x3cedbd],_0x25623d(_0x36bc5f)[_0x3b203e(-0x95,-0x20,-0x61,-0x7f)](_0xda3dd5(0x3c8,0x3e6,0x365,0x480))):_0x2f1832[_0xda3dd5(0x51b,0x473,0x51a,0x40c)](..._0x2a34de['content']));if(_0x5cfeeb[_0x3b203e(-0x2f,0xce,0x38,0x6b)]>-0x3d5*-0x1+0x23ac+-0x2781){const _0x5e4aea={};_0x5e4aea[_0x3b203e(-0xc1,-0x123,-0xb1,-0x130)]=_0x539c7c[_0xda3dd5(0x33b,0x38c,0x347,0x335)],_0x5e4aea[_0xda3dd5(0x3ee,0x380,0x2e9,0x38b)]='\x0a[以下是用户上传的'+_0x5cfeeb['length']+'张'+_0x34701e+']',_0x2f1832['push'](_0x5e4aea);}_0x5cfeeb[_0x3b203e(-0xaa,-0xe9,-0xe0,-0xb4)]((_0x270f3f,_0x58e340)=>{const _0xc2b82e=_0x539c7c[_0x2c1cb8(0x47c,0x41b,0x4d1,0x448)](typeof _0x270f3f,_0x47a86d(0x36,0xb8,0xb9,0x117))?_0x270f3f:_0x270f3f['base64'],_0x3ebbdb=_0x539c7c['WSVXW'](typeof _0x270f3f,_0x539c7c[_0x2c1cb8(0x3a8,0x3aa,0x3a6,0x437)])&&_0x270f3f[_0x47a86d(0x199,0x18a,0x12b,0x14d)]?_0x270f3f[_0x2c1cb8(0x53c,0x522,0x53f,0x4c9)]:''+_0x34701e+_0x539c7c[_0x2c1cb8(0x388,0x3ee,0x3fc,0x426)](_0x58e340,-0x1*0x706+-0x14e0+0x1be7),_0x39c7ae={};_0x39c7ae['type']=_0x539c7c['IzIHu'],_0x39c7ae[_0x47a86d(-0x20,-0x27,0x46,0xd2)]='['+_0x3ebbdb+']',_0x2f1832[_0x47a86d(0x134,0x105,0x139,0x115)](_0x39c7ae);let _0x3d9de1=_0xc2b82e;!_0xc2b82e[_0x2c1cb8(0x42b,0x38f,0x3ed,0x3de)](_0x539c7c[_0x47a86d(0xd1,0x1c8,0x126,0x169)])&&(_0x3d9de1=_0x47a86d(0x10a,0x18c,0x134,0x1d7)+_0x2c1cb8(0x3e7,0x3bb,0x4af,0x45a)+'4,'+_0xc2b82e);const _0x5d2120={};_0x5d2120['url']=_0x3d9de1,_0x5d2120[_0x47a86d(0xab,0x44,0xb1,0x119)]=_0x2c1cb8(0x475,0x3c7,0x42f,0x450);const _0x4a9f0f={};_0x4a9f0f[_0x47a86d(0xb3,0x32,0x93,0xc7)]=_0x539c7c[_0x2c1cb8(0x41e,0x409,0x381,0x3f6)];function _0x2c1cb8(_0x5c648a,_0x375f80,_0x1cfabb,_0x2c93e5){return _0x3b203e(_0x5c648a-0x1f3,_0x1cfabb,_0x2c93e5-0x4e2,_0x2c93e5-0x72);}function _0x47a86d(_0x53ba50,_0x5e05f5,_0x383d47,_0x3ba55d){return _0x3b203e(_0x53ba50-0x1b8,_0x53ba50,_0x383d47-0x144,_0x3ba55d-0x9b);}_0x4a9f0f['image_url']=_0x5d2120,_0x2f1832[_0x2c1cb8(0x53e,0x4d7,0x529,0x4d7)](_0x4a9f0f);});const _0x4a64d8={..._0x2a34de};return _0x4a64d8['content']=_0x2f1832,_0x4f6ec7[_0x34d24]=_0x4a64d8,_0x4f6ec7;}function findMessageIndexWithPlaceholder(_0x38c988,_0x1530d7){const _0x30b86d={};_0x30b86d[_0x20b03a(0xc2,0x4d,0x115,0xbb)]='[character'+'PromptModi'+_0x1eaed8(-0xfb,-0x16d,-0x12e,-0x193),_0x30b86d[_0x1eaed8(-0xb6,-0x12e,-0x17b,-0xe3)]=function(_0xce1a15,_0x26a3f6){return _0xce1a15<_0x26a3f6;},_0x30b86d[_0x20b03a(0x138,0x24a,0x1f3,0x1a9)]=function(_0x5eaadc,_0x34cc7b){return _0x5eaadc!==_0x34cc7b;},_0x30b86d['wZUtW']='gVnwB',_0x30b86d[_0x20b03a(0xe1,0xe0,0x159,0x153)]=function(_0x156244,_0x3dee56){return _0x156244===_0x3dee56;};function _0x1eaed8(_0x3dcb33,_0x15e34d,_0x9b16c1,_0x147e93){return _0x9decc7(_0x15e34d- -0x6a8,_0x15e34d-0xf7,_0x3dcb33,_0x147e93-0x19f);}_0x30b86d[_0x1eaed8(-0xaf,-0x106,-0x1a5,-0x1ac)]='string';function _0x20b03a(_0x1498ff,_0x43e036,_0x2c1315,_0x26f95f){return _0x9decc7(_0x26f95f- -0x409,_0x43e036-0xbb,_0x43e036,_0x26f95f-0x6);}_0x30b86d[_0x1eaed8(-0x181,-0x1f6,-0x258,-0x1ec)]=function(_0x418c72,_0xae191c){return _0x418c72===_0xae191c;},_0x30b86d[_0x1eaed8(-0x229,-0x1bd,-0x1e6,-0x136)]='text';const _0x43f67c=_0x30b86d;for(let _0x5d53ee=-0x16c8+-0x1d13+0x3b*0xe1;_0x43f67c[_0x1eaed8(-0xf1,-0x12e,-0x199,-0x8c)](_0x5d53ee,_0x38c988[_0x20b03a(0x1eb,0x14a,0x1c8,0x1b1)]);_0x5d53ee++){if(_0x43f67c['omrBl'](_0x43f67c['wZUtW'],_0x20b03a(0x9,0x114,0xa0,0x73)))_0x33d327[_0x1eaed8(-0x156,-0x1dc,-0x1f9,-0x264)](_0x43f67c[_0x1eaed8(-0x215,-0x1e4,-0x233,-0x1ce)],_0x33ca22),_0x5adfb3[_0x1eaed8(-0x25a,-0x1dc,-0x1a0,-0x226)](_0x1eaed8(-0x195,-0x108,-0x187,-0xce)+'\x20'+_0x1f503d[_0x20b03a(0x7e,0xd5,0x5a,0x81)]);else{const _0x1b7a78=_0x38c988[_0x5d53ee];if(_0x43f67c[_0x20b03a(0xd0,0xcc,0xf4,0x153)](typeof _0x1b7a78[_0x1eaed8(-0x1a9,-0x1ea,-0x184,-0x228)],_0x43f67c[_0x1eaed8(-0x159,-0x106,-0x80,-0x141)])&&_0x1b7a78[_0x20b03a(0x3e,0x46,0x1a,0xb5)][_0x20b03a(0x13f,0xc8,0x47,0xb2)](_0x1530d7))return _0x5d53ee;else{if(Array[_0x20b03a(0x1bf,0x196,0x10d,0x152)](_0x1b7a78['content']))for(const _0x4d69b9 of _0x1b7a78[_0x20b03a(0x97,0x11b,0x153,0xb5)]){if(_0x43f67c[_0x1eaed8(-0x18d,-0x1f6,-0x26f,-0x29e)](_0x4d69b9[_0x1eaed8(-0x13a,-0x1d7,-0x226,-0x212)],_0x43f67c[_0x20b03a(0x123,0x10b,0xf6,0xe2)])&&_0x4d69b9[_0x1eaed8(-0x1b8,-0x224,-0x20f,-0x2a0)][_0x20b03a(0x14d,0x110,0x144,0xb2)](_0x1530d7))return _0x5d53ee;}}}}return-(-0x10c8+0x1fef+-0xf26);}function generateRequestId(){const _0x1e1624={};_0x1e1624[_0x2cff37(0x1d4,0xe3,0x142,0x1ad)]=function(_0xa48a54,_0x54595b){return _0xa48a54+_0x54595b;};const _0x5beb08=_0x1e1624;function _0x2cff37(_0x5e8e67,_0x47b199,_0x2670f2,_0x543bbb){return _0x9decc7(_0x2670f2- -0x3ee,_0x47b199-0x6,_0x543bbb,_0x543bbb-0xbb);}function _0x21c8bf(_0x2ad588,_0x5233ee,_0x2e2088,_0x10bdb5){return _0x9decc7(_0x10bdb5- -0x1a3,_0x5233ee-0xfe,_0x2e2088,_0x10bdb5-0x1cf);}if(crypto&&crypto[_0x21c8bf(0x3a8,0x44d,0x346,0x3d8)])return crypto['randomUUID']();return _0x5beb08['jPhKa'](Date[_0x2cff37(0xc7,0xab,0x128,0x16c)]()[_0x2cff37(0x1ad,0x1d6,0x19e,0x1f9)](0x1fdf+-0x1aee+-0x4cd*0x1),Math[_0x2cff37(0x77,0x1a5,0x110,0x125)]()[_0x21c8bf(0x351,0x42b,0x356,0x3e9)](-0x1c27+0xe87+0xdc4)[_0x2cff37(0x96,0x12e,0x91,0x5e)](-0xb90+0x2*-0x3e+0xc0e));}function _0x9decc7(_0x3836fa,_0xed177a,_0x556488,_0x1fb4f0){return _0x147c(_0x3836fa-0x309,_0x556488);}export function LLM_CHAR_MODIFY_GET_PROMPT(){const _0x7a8c1f={'YcfxI':function(_0x359b07,_0x7169c5){return _0x359b07!==_0x7169c5;},'LmWHk':function(_0x404873){return _0x404873();}};return new Promise((_0x1deae2,_0x338127)=>{function _0x4d5e72(_0x5e3d6f,_0x160f98,_0x20c57d,_0x3cd95c){return _0x147c(_0x20c57d-0x2bc,_0x5e3d6f);}const _0x53bcf3={'TgJLo':function(_0xefab16,_0x2d5c80){function _0x5a9663(_0x2cb6a0,_0x44ca2c,_0x2297ba,_0x3a4cc3){return _0x147c(_0x44ca2c- -0x209,_0x2cb6a0);}return _0x7a8c1f[_0x5a9663(-0x8c,-0x98,-0xe1,-0x2d)](_0xefab16,_0x2d5c80);},'ynqvK':function(_0x10bf83,_0x1656b5){return _0x10bf83(_0x1656b5);}},_0x405054=_0x7a8c1f[_0x4d5e72(0x47a,0x485,0x4b9,0x49c)](generateRequestId);console['log'](_0x2a792e(0x290,0x1ed,0x212,0x16c)+_0x2a792e(0x332,0x34d,0x2a7,0x279)+_0x2a792e(0x316,0x29c,0x29a,0x27d)+_0x2a792e(0x1fc,0x20b,0x1cf,0x22c)+_0x4d5e72(0x518,0x4a6,0x495,0x3ec)+_0x2a792e(0x25c,0x1fd,0x21c,0x293)+_0x405054+')');const _0x1aa50b=_0x476abb=>{if(_0x53bcf3['TgJLo'](_0x476abb['id'],_0x405054))return;function _0x3cb21(_0x355b4a,_0x493dcd,_0x2b4197,_0x1fa1c2){return _0x2a792e(_0x2b4197,_0x493dcd-0x1f2,_0x355b4a-0x1c6,_0x1fa1c2-0x163);}eventSource['removeList'+_0x29d7c6(0x256,0x368,0x2c5,0x303)](eventNames[_0x29d7c6(0x2da,0x298,0x292,0x2de)+_0x3cb21(0x466,0x3ef,0x47d,0x485)+'PROMPT_RES'+'PONSE'],_0x1aa50b);function _0x29d7c6(_0xdb541f,_0x1c7b6c,_0x3edf28,_0x550b8e){return _0x2a792e(_0x1c7b6c,_0x1c7b6c-0x19a,_0x3edf28-0x104,_0x550b8e-0x104);}_0x53bcf3[_0x3cb21(0x416,0x4b2,0x427,0x49c)](_0x1deae2,_0x476abb[_0x29d7c6(0x2c7,0x3d2,0x34b,0x39b)]);};eventSource['on'](eventNames['LLM_CHAR_M'+_0x2a792e(0x2b6,0x243,0x2a0,0x254)+'PROMPT_RES'+_0x2a792e(0x31d,0x22d,0x297,0x261)],_0x1aa50b);const _0x1df718={};_0x1df718['id']=_0x405054;function _0x2a792e(_0x40919c,_0x1b4dfe,_0x30928e,_0x196701){return _0x147c(_0x30928e-0xa,_0x40919c);}eventSource[_0x4d5e72(0x4c0,0x429,0x478,0x3fe)](eventNames[_0x2a792e(0x15e,0x126,0x18e,0x167)+_0x2a792e(0x22d,0x254,0x2a0,0x2b7)+'PROMPT_REQ'+'UEST'],_0x1df718),setTimeout(()=>{function _0x193e88(_0x3652a7,_0x3f6dad,_0x552fa6,_0x421e5f){return _0x4d5e72(_0x3f6dad,_0x3f6dad-0xe5,_0x421e5f- -0x197,_0x421e5f-0x12e);}eventSource[_0x193e88(0x370,0x422,0x414,0x38f)+_0x2caf46(0x4e6,0x587,0x51a,0x53e)](eventNames['LLM_CHAR_M'+_0x193e88(0x425,0x40c,0x38a,0x3bb)+_0x193e88(0x339,0x282,0x296,0x29f)+'PONSE'],_0x1aa50b);function _0x2caf46(_0x3227ee,_0x441c02,_0x3dc994,_0x3994c1){return _0x4d5e72(_0x3dc994,_0x441c02-0x1be,_0x3994c1-0xcb,_0x3994c1-0x1a6);}_0x53bcf3['ynqvK'](_0x338127,new Error(_0x193e88(0x35e,0x381,0x3fc,0x363)+'时'));},-0x49c+-0x270e+0x295d*0x2);});}export function LLM_CHAR_MODIFY(_0x231bf2,_0x3e02be={}){function _0x66738(_0x375308,_0x42bb5f,_0x1cabd5,_0x2df684){return _0x9decc7(_0x42bb5f- -0x1f4,_0x42bb5f-0x1d7,_0x2df684,_0x2df684-0x1c0);}const _0x3f980e={'yhWSK':function(_0x5bb2c4,_0x15fc69){return _0x5bb2c4!==_0x15fc69;},'Bgkvs':_0x66738(0x40e,0x3bf,0x3b9,0x3cb),'hKJUy':function(_0x726092){return _0x726092();},'kWvBm':function(_0x25f9b7,_0x13f256){return _0x25f9b7(_0x13f256);},'JvTuK':_0x3d9f6a(0xbf,0x16,-0xc,0x7e),'XfJHU':_0x3d9f6a(-0x3d,-0x4,0x54,-0x50)+_0x3d9f6a(-0x11f,-0x7e,-0x41,-0xa2),'seEOV':function(_0x231305,_0x4d2095){return _0x231305(_0x4d2095);}};function _0x3d9f6a(_0x5c0cba,_0x40642f,_0x55d635,_0x214f3c){return _0x9decc7(_0x40642f- -0x570,_0x40642f-0xa4,_0x55d635,_0x214f3c-0x1e8);}return new Promise((_0x3c6de1,_0x45c479)=>{const _0x3f72e1={'eQIPH':function(_0x101263,_0xf62f51){function _0x3fde6b(_0x4981d4,_0x415c90,_0x261199,_0x55adc8){return _0x147c(_0x415c90-0x308,_0x55adc8);}return _0x3f980e[_0x3fde6b(0x5c4,0x542,0x552,0x5ae)](_0x101263,_0xf62f51);},'NvfVk':_0x3f980e[_0x2c5267(0x349,0x2ef,0x2bb,0x2e5)]},_0x517f92=generateRequestId(),_0x3553ed=_0x3e02be[_0x442300(0x2bf,0x244,0x1b2,0x228)]||-0x9623+-0x19ac0*-0x1+-0x1a3d*0x1;let _0x480cd0=null;function _0x2c5267(_0x130bf2,_0x269927,_0x3e44b3,_0x18342c){return _0x66738(_0x130bf2-0x12a,_0x18342c- -0x36,_0x3e44b3-0x144,_0x130bf2);}console[_0x442300(0xf7,0x17c,0xea,0xfb)](_0x442300(0x18e,0x1e7,0x252,0x260)+_0x442300(0x316,0x27c,0x248,0x1d7)+_0x442300(0x1c4,0x181,0x160,0x185)+_0x442300(0x13b,0x1bd,0x114,0x12a)+_0x442300(0x155,0x15f,0x114,0x196)+'request\x20(I'+_0x2c5267(0x34d,0x34f,0x2a6,0x337)+_0x517f92+')');const _0x50ca1a=()=>{function _0x29ca55(_0x7dba36,_0x1cdad3,_0x2252f3,_0x13a86d){return _0x2c5267(_0x13a86d,_0x1cdad3-0xd5,_0x2252f3-0xfd,_0x2252f3- -0x49c);}eventSource[_0x29ca55(-0x1be,-0x181,-0x153,-0xcd)+_0x29ca55(-0x165,-0x208,-0x206,-0x198)](eventNames['LLM_CHAR_M'+_0x15475f(0x4d,0xa2,0x90,0x74)+_0x15475f(0x94,0x158,0xc4,0x146)],_0x1d80e9);function _0x15475f(_0x15f191,_0x227db5,_0x35b1d0,_0x3be364){return _0x2c5267(_0x15f191,_0x227db5-0x26,_0x35b1d0-0x89,_0x35b1d0- -0x21e);}_0x480cd0&&(_0x3f72e1[_0x15475f(0x11a,0x47,0xe4,0x72)](clearTimeout,_0x480cd0),_0x480cd0=null);},_0x1d80e9=_0xacf674=>{function _0x34f20b(_0x4cb962,_0x54207d,_0x45adca,_0x2d5930){return _0x442300(_0x4cb962-0xa6,_0x54207d- -0x9,_0x45adca-0x1d3,_0x45adca);}function _0x3d9243(_0x8a583d,_0x4ff888,_0x16c627,_0x137b6f){return _0x442300(_0x8a583d-0xc5,_0x4ff888- -0x240,_0x16c627-0xb,_0x8a583d);}if(_0x3f980e[_0x34f20b(0x1b6,0x1aa,0x1c0,0x192)](_0x3f980e[_0x34f20b(0x29e,0x260,0x2dc,0x1c3)],'lDebh'))return _0x1e3f4e;else{if(_0x3f980e[_0x3d9243(-0xd7,-0x8d,-0xdf,-0x10b)](_0xacf674['id'],_0x517f92))return;_0x3f980e[_0x3d9243(-0x7f,-0x2a,0x9,0x14)](_0x50ca1a),_0xacf674['success']?_0x3c6de1(_0xacf674['result']):_0x3f980e['kWvBm'](_0x45c479,new Error(_0xacf674['result']||_0x3f980e[_0x34f20b(0x17e,0x1dc,0x258,0x20f)]));}};function _0x442300(_0x363c27,_0x101dad,_0x32d6a4,_0x47b296){return _0x3d9f6a(_0x363c27-0x16d,_0x101dad-0x246,_0x47b296,_0x47b296-0x1ba);}eventSource['on'](eventNames['LLM_CHAR_M'+_0x442300(0x1a6,0x1ae,0x111,0x257)+_0x2c5267(0x32a,0x2bc,0x28c,0x2e2)],_0x1d80e9);const _0x2973cd={};_0x2973cd['prompt']=_0x231bf2,_0x2973cd['id']=_0x517f92,eventSource[_0x442300(0x175,0x19b,0x164,0x1f6)](eventNames[_0x2c5267(0x2e0,0x2be,0x240,0x263)+_0x442300(0x274,0x281,0x250,0x268)+'EST'],_0x2973cd),_0x480cd0=setTimeout(()=>{function _0x126354(_0x4f8db5,_0x204bd1,_0x40bba0,_0x408686){return _0x2c5267(_0x204bd1,_0x204bd1-0x177,_0x40bba0-0x95,_0x40bba0-0x283);}function _0x30a87e(_0x25259d,_0x271c0a,_0x342df0,_0x2c2a1c){return _0x2c5267(_0x2c2a1c,_0x271c0a-0xe1,_0x342df0-0x81,_0x25259d- -0x25d);}_0x3f980e[_0x126354(0x4ce,0x547,0x536,0x49c)](_0x126354(0x550,0x5a9,0x55a,0x53d),'HfJBt')?(_0x50ca1a(),_0x45c479(new Error(_0x3f980e[_0x126354(0x592,0x62e,0x5e1,0x5b8)]))):_0x3f72e1[_0x30a87e(0xa5,0x135,0x10c,0x49)](_0x66adee,new _0x59dc78(_0x4065e4['result']||_0x3f72e1[_0x30a87e(0x84,0x12b,0x52,0xc3)]));},_0x3553ed);});}function preprocessTagContent(_0x3c4bb5){const _0xb8926f={};_0xb8926f[_0x90bc8d(0x453,0x426,0x41c,0x4a1)]=_0x3445ba(0x540,0x4e1,0x4df,0x541);const _0x5d1fed=_0xb8926f;let _0x3dcdd7=_0x3c4bb5[_0x3445ba(0x4f3,0x4ec,0x51a,0x579)](/:/g,':')[_0x90bc8d(0x48f,0x4da,0x535,0x4c2)](/\(/g,'（')[_0x90bc8d(0x48f,0x535,0x4cf,0x4c1)](/\)/g,'）')[_0x90bc8d(0x48f,0x451,0x408,0x4cd)](/,/g,',');_0x3dcdd7=_0x3dcdd7[_0x90bc8d(0x48f,0x50f,0x3fa,0x3fa)](/下半身NSWebcam:/g,_0x5d1fed[_0x90bc8d(0x453,0x419,0x3c5,0x496)]),_0x3dcdd7=_0x3dcdd7[_0x3445ba(0x574,0x4ec,0x56a,0x550)](/下半身NSFW_背面:/g,_0x5d1fed[_0x3445ba(0x468,0x4b0,0x4df,0x47d)]);function _0x90bc8d(_0x289826,_0xac12bd,_0x4a49c6,_0x5d83d5){return _0x9decc7(_0x289826- -0xf1,_0xac12bd-0x4f,_0xac12bd,_0x5d83d5-0x1a1);}function _0x3445ba(_0x52f3ee,_0x257185,_0xf057de,_0x1ec1cf){return _0x9decc7(_0x257185- -0x94,_0x257185-0x1db,_0xf057de,_0x1ec1cf-0xba);}return _0x3dcdd7=_0x3dcdd7['replace'](/上半身NSFW_背面:/g,'上半身NSFW背面:'),_0x3dcdd7;}function parseCharacterData(_0x3e3578){const _0x11ed10={};_0x11ed10[_0x4e39f9(0x55a,0x510,0x4a9,0x48f)]=_0x183f89(0x4f2,0x4fd,0x574,0x603),_0x11ed10[_0x4e39f9(0x574,0x574,0x4f3,0x52f)]=_0x4e39f9(0x53b,0x5d4,0x56e,0x657)+_0x4e39f9(0x5d2,0x547,0x518,0x53e),_0x11ed10[_0x183f89(0x52e,0x4d8,0x560,0x5fd)]=_0x4e39f9(0x45f,0x4e4,0x4ef,0x451)+'FW',_0x11ed10['ucttd']=_0x4e39f9(0x4cd,0x4e4,0x442,0x447)+'FWBack',_0x11ed10['oRirW']=_0x183f89(0x543,0x5e1,0x5dc,0x547)+'W',_0x11ed10[_0x4e39f9(0x4cb,0x507,0x4b9,0x5a1)]='fullBodySF'+_0x4e39f9(0x5ba,0x52a,0x536,0x57f),_0x11ed10[_0x183f89(0x5f2,0x62a,0x5df,0x5a9)]=_0x4e39f9(0x52f,0x53a,0x52c,0x52e)+_0x4e39f9(0x698,0x606,0x5ab,0x63d),_0x11ed10[_0x4e39f9(0x508,0x536,0x548,0x51d)]=_0x183f89(0x5b8,0x4f7,0x568,0x536)+_0x4e39f9(0x510,0x5b4,0x5e5,0x5e7),_0x11ed10['KOPYc']='fullBodyNS'+'FW',_0x11ed10[_0x4e39f9(0x55c,0x570,0x5ba,0x536)]=_0x4e39f9(0x607,0x599,0x5d5,0x559)+_0x183f89(0x5e5,0x50c,0x548,0x49f),_0x11ed10[_0x183f89(0x679,0x66d,0x623,0x694)]=function(_0x29c2e3,_0x5274c1){return _0x29c2e3!==_0x5274c1;},_0x11ed10['eHyAv']=_0x183f89(0x633,0x5ca,0x5d1,0x63a),_0x11ed10['GkCyE']=_0x183f89(0x53d,0x59b,0x4fc,0x4f7),_0x11ed10['JIYXp']=function(_0x476bf4,_0x2ea219){return _0x476bf4+_0x2ea219;},_0x11ed10['hqZwC']='GFRGR',_0x11ed10['sLMZK']=function(_0x31ee5c,_0x3a9af2){return _0x31ee5c&&_0x3a9af2;},_0x11ed10['QwaQl']=_0x183f89(0x621,0x4e4,0x581,0x503),_0x11ed10[_0x183f89(0x502,0x60e,0x599,0x62d)]=_0x183f89(0x64c,0x66c,0x5d5,0x581);const _0x16799e=_0x11ed10,_0x3b6b0f=_0x3e3578['split']('\x0a')[_0x183f89(0x65a,0x5a5,0x5e6,0x5ad)](_0x2ff912=>_0x2ff912['trim']())[_0x183f89(0x53d,0x5b0,0x542,0x578)](_0x34aef6=>_0x34aef6),_0x4ee5db={};_0x4ee5db[_0x183f89(0x583,0x58e,0x574,0x5f2)]='',_0x4ee5db['nameEN']='',_0x4ee5db['facialFeat'+_0x4e39f9(0x586,0x547,0x5da,0x5c8)]='',_0x4ee5db[_0x4e39f9(0x57d,0x5d4,0x5be,0x557)+_0x4e39f9(0x59c,0x59f,0x559,0x592)]='';function _0x183f89(_0x13038e,_0x89e56b,_0x6ebe9f,_0x15b783){return _0x9decc7(_0x6ebe9f-0x7f,_0x89e56b-0x1a4,_0x15b783,_0x15b783-0xee);}_0x4ee5db[_0x183f89(0x4eb,0x528,0x512,0x469)+'FW']='',_0x4ee5db['upperBodyS'+_0x4e39f9(0x4bd,0x51a,0x59a,0x57f)]='',_0x4ee5db[_0x183f89(0x65c,0x5eb,0x5dc,0x53a)+'W']='',_0x4ee5db[_0x4e39f9(0x518,0x5ae,0x569,0x509)+_0x183f89(0x572,0x579,0x558,0x4ce)]='',_0x4ee5db[_0x4e39f9(0x4f6,0x53a,0x524,0x56d)+_0x183f89(0x65b,0x631,0x634,0x5f9)]='',_0x4ee5db['upperBodyN'+_0x183f89(0x545,0x5c6,0x5e2,0x596)]='',_0x4ee5db[_0x183f89(0x576,0x51e,0x5c7,0x640)+'FW']='',_0x4ee5db[_0x183f89(0x5cb,0x532,0x5c7,0x531)+_0x4e39f9(0x597,0x51a,0x502,0x55b)]='';const _0x4ee200=_0x4ee5db,_0x582301={};_0x582301[_0x4e39f9(0x514,0x506,0x581,0x4de)]=_0x16799e[_0x4e39f9(0x57e,0x510,0x4c0,0x48c)],_0x582301[_0x183f89(0x5c2,0x60c,0x5d2,0x53b)]=_0x183f89(0x605,0x69b,0x5fc,0x5e2),_0x582301['五官外貌']=_0x16799e[_0x4e39f9(0x547,0x574,0x60b,0x58e)],_0x582301[_0x183f89(0x52a,0x556,0x533,0x59b)]='facialFeat'+'uresBack',_0x582301[_0x4e39f9(0x5ad,0x558,0x5dd,0x51a)]=_0x16799e['GssXx'],_0x582301[_0x183f89(0x509,0x4e0,0x578,0x4ee)]=_0x16799e[_0x4e39f9(0x5b9,0x582,0x610,0x5ca)],_0x582301[_0x183f89(0x579,0x57c,0x50e,0x56e)]=_0x16799e[_0x183f89(0x4d4,0x4b1,0x517,0x4ce)],_0x582301['下半身SFW背面']=_0x16799e[_0x4e39f9(0x515,0x507,0x48a,0x54b)],_0x582301['上半身NSFW']=_0x16799e[_0x183f89(0x5dc,0x538,0x5df,0x5c2)],_0x582301[_0x183f89(0x481,0x4b9,0x4f4,0x4f3)]=_0x16799e[_0x4e39f9(0x558,0x536,0x5b9,0x502)];function _0x4e39f9(_0x383c5b,_0x4095e3,_0x701815,_0x5d658c){return _0x9decc7(_0x4095e3-0x51,_0x4095e3-0x6b,_0x5d658c,_0x5d658c-0x1f2);}_0x582301[_0x4e39f9(0x587,0x614,0x696,0x5f6)]=_0x16799e['KOPYc'],_0x582301[_0x183f89(0x637,0x56e,0x60a,0x69b)]=_0x16799e[_0x183f89(0x525,0x5ce,0x59e,0x516)];const _0x268002=_0x582301;for(const _0x5e36e2 of _0x3b6b0f){if(_0x16799e[_0x183f89(0x6bd,0x631,0x623,0x62a)](_0x16799e[_0x183f89(0x5ee,0x59a,0x5b6,0x59a)],_0x16799e[_0x4e39f9(0x4d9,0x52d,0x506,0x5a4)])){const _0x78f771=_0x5e36e2[_0x4e39f9(0x554,0x5f2,0x606,0x624)](':');if(_0x78f771===-(0x1520+-0x1e1*0x1+0x3*-0x66a))continue;const _0x535f61=_0x5e36e2['substring'](-0x1ac8+0x878+0x1250,_0x78f771)['trim'](),_0x4bb8ac=_0x5e36e2[_0x4e39f9(0x530,0x4d0,0x448,0x441)](_0x16799e[_0x183f89(0x5af,0x4f7,0x540,0x4ff)](_0x78f771,-0x26f8*0x1+0x20c5+-0x2*-0x31a))[_0x183f89(0x573,0x594,0x577,0x59f)]();if(_0x268002[_0x535f61]){if('GFRGR'===_0x16799e['hqZwC'])_0x4ee200[_0x268002[_0x535f61]]=_0x4bb8ac;else{if(_0xe2a29e){const _0x37be5e=_0x4aecf8[_0x183f89(0x609,0x5c9,0x63a,0x696)](_0x143ba9,arguments);return _0x4bcbeb=null,_0x37be5e;}}}else _0x16799e[_0x4e39f9(0x4f9,0x4eb,0x4d5,0x503)](_0x535f61,_0x4bb8ac)&&console[_0x183f89(0x4cf,0x482,0x525,0x523)](_0x183f89(0x4ee,0x5dc,0x590,0x562)+'PromptModi'+_0x183f89(0x4e2,0x60c,0x57a,0x5cc)+_0x183f89(0x6a8,0x643,0x609,0x65c)+_0x535f61+'\x22');}else _0x39a66f[_0x183f89(0x666,0x5b0,0x5f6,0x62b)](..._0x35d1ca['content']);}if(!_0x4ee200[_0x183f89(0x4f6,0x5e7,0x574,0x508)]){if(_0x16799e[_0x4e39f9(0x575,0x5f5,0x567,0x5d1)](_0x16799e[_0x183f89(0x604,0x697,0x626,0x599)],_0x16799e['ougCV']))return null;else _0x3970b1[_0x4e39f9(0x5ec,0x5c8,0x5bd,0x620)](_0x50cfe6);}return console[_0x183f89(0x47d,0x50f,0x525,0x4ce)](_0x183f89(0x590,0x56f,0x590,0x50c)+_0x4e39f9(0x630,0x5f7,0x643,0x552)+_0x183f89(0x580,0x489,0x4f8,0x4f6)+_0x4e39f9(0x523,0x583,0x601,0x5de),_0x4ee200),_0x4ee200;}function extractCharacterTags(_0x3c0dc0){const _0x4a5719={'DRPSX':function(_0x14768a,_0x355120){return _0x14768a!==_0x355120;},'miQUx':function(_0x48bd66,_0x513c78){return _0x48bd66(_0x513c78);}},_0x507406={};function _0x19a46e(_0x17188e,_0x1e2b1f,_0x29e843,_0x1998a6){return _0x9decc7(_0x29e843- -0x429,_0x1e2b1f-0x1ae,_0x1e2b1f,_0x1998a6-0x114);}_0x507406[_0x19a46e(0x18f,0x87,0x106,0x71)]=[];const _0x318b30=_0x507406;_0x3c0dc0=_0x3c0dc0['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x19a46e(0x2a,0x10a,0xcf,0x150)]();const _0x43f041=/<人物>([\s\S]*?)<\/人物>/g;let _0x3d03f1;function _0x5ab434(_0x495734,_0x445b95,_0x224ae7,_0x5b1478){return _0x9decc7(_0x5b1478- -0x610,_0x445b95-0x56,_0x224ae7,_0x5b1478-0x50);}while(_0x4a5719['DRPSX'](_0x3d03f1=_0x43f041['exec'](_0x3c0dc0),null)){const _0x13355c=_0x4a5719[_0x19a46e(0xef,0xfb,0x148,0x10f)](preprocessTagContent,_0x3d03f1[0x1e64+0x162b+-0x1*0x348e]),_0x42ce39=_0x4a5719[_0x5ab434(-0xcb,-0x112,-0x96,-0x9f)](parseCharacterData,_0x13355c);_0x42ce39&&_0x318b30[_0x5ab434(-0xb2,-0xe3,-0xaa,-0xe1)][_0x19a46e(0x18d,0x19e,0x14e,0x1ca)](_0x42ce39);}return _0x318b30;}function getCurrentCharacterPreset(){const _0x52a4db=extension_settings[extensionName],_0xb28a88=_0x52a4db[_0x2db879(-0x1a0,-0x115,-0x157,-0x125)+_0x1dbbd2(0x487,0x3aa,0x44d,0x442)];if(!_0xb28a88||!_0x52a4db[_0x1dbbd2(0x56c,0x509,0x474,0x51a)+_0x1dbbd2(0x406,0x435,0x3e1,0x427)][_0xb28a88])return null;const _0x236074={};_0x236074['id']=_0xb28a88;function _0x2db879(_0x556421,_0xff1216,_0x314738,_0x35ac97){return _0x9decc7(_0x314738- -0x6eb,_0xff1216-0xf2,_0xff1216,_0x35ac97-0x23);}_0x236074[_0x1dbbd2(0x497,0x4f3,0x446,0x4b4)]=_0x52a4db[_0x1dbbd2(0x4fc,0x4e7,0x5b6,0x51a)+_0x1dbbd2(0x462,0x410,0x3b2,0x427)][_0xb28a88];function _0x1dbbd2(_0x32bc19,_0x50cc4a,_0x4584fb,_0xab49c1){return _0x9decc7(_0xab49c1- -0x7a,_0x50cc4a-0x1a1,_0x32bc19,_0xab49c1-0x25);}return _0x236074;}function buildCharacterText(_0x1449d6){const _0x2074f7={};_0x2074f7[_0x228dfe(0x423,0x388,0x49b,0x406)]=_0x49dbd0(-0xc5,-0xb8,-0x7e,-0x17);function _0x228dfe(_0x3dba81,_0x4752b8,_0x1f621f,_0x381b54){return _0x9decc7(_0x3dba81- -0x189,_0x4752b8-0xd4,_0x1f621f,_0x381b54-0x39);}_0x2074f7[_0x49dbd0(-0x61,-0xbb,-0xdf,-0x173)]=_0x228dfe(0x380,0x37e,0x365,0x3fe);const _0x2ac732=_0x2074f7,_0x4dcdea=_0x1449d6[_0x228dfe(0x3a5,0x41c,0x3b5,0x3fe)];let _0xe79b8=_0x2ac732[_0x49dbd0(0x1d,-0xa5,-0x8,0x6e)];_0xe79b8+='中文名称:\x20'+(_0x4dcdea[_0x49dbd0(-0x21,-0x168,-0xbf,-0x13c)]||'')+'\x0a',_0xe79b8+=_0x228dfe(0x426,0x46f,0x3be,0x455)+(_0x4dcdea[_0x228dfe(0x3f4,0x3f2,0x428,0x470)]||'')+'\x0a',_0xe79b8+=_0x49dbd0(0x4a,-0x68,-0x5b,0x7)+(_0x4dcdea[_0x228dfe(0x3fa,0x3fe,0x3e5,0x3ca)+'ures']||'')+'\x0a',_0xe79b8+='五官外貌背面:\x20'+(_0x4dcdea[_0x49dbd0(0x17,0x4b,-0x31,0x32)+_0x49dbd0(0x15,-0xf1,-0x66,0x30)]||'')+'\x0a',_0xe79b8+=_0x228dfe(0x438,0x46b,0x4b9,0x45d)+(_0x4dcdea[_0x228dfe(0x30a,0x372,0x2ed,0x27a)+'FW']||'')+'\x0a',_0xe79b8+='上半身SFW背面:\x20'+(_0x4dcdea['upperBodyS'+_0x228dfe(0x340,0x30f,0x3a2,0x2ea)]||'')+'\x0a',_0xe79b8+=_0x228dfe(0x364,0x35a,0x37e,0x34f)+(_0x4dcdea[_0x49dbd0(0x26,-0xd6,-0x57,-0x2d)+'W']||'')+'\x0a',_0xe79b8+='下半身SFW背面:\x20'+(_0x4dcdea[_0x228dfe(0x3d4,0x3ac,0x409,0x474)+_0x49dbd0(-0xa2,-0x85,-0xdb,-0x58)]||'')+'\x0a',_0xe79b8+=_0x49dbd0(-0x16,-0x123,-0x92,-0x9d)+(_0x4dcdea['upperBodyN'+'SFW']||'')+'\x0a',_0xe79b8+=_0x228dfe(0x412,0x3ee,0x484,0x41a)+'\x20'+(_0x4dcdea[_0x228dfe(0x360,0x2d1,0x336,0x3a4)+'SFWBack']||'')+'\x0a',_0xe79b8+='下半身NSFW:\x20'+(_0x4dcdea[_0x228dfe(0x3bf,0x31d,0x3b9,0x3ff)+'FW']||'')+'\x0a',_0xe79b8+=_0x228dfe(0x3ec,0x476,0x3ef,0x44f)+'\x20'+(_0x4dcdea[_0x49dbd0(-0xac,-0xb0,-0x6c,-0xa5)+_0x228dfe(0x340,0x386,0x2e1,0x318)]||'')+'\x0a';function _0x49dbd0(_0x428236,_0x1eb5f9,_0x188ae5,_0x27cc77){return _0x9decc7(_0x188ae5- -0x5b4,_0x1eb5f9-0xee,_0x27cc77,_0x27cc77-0x2a);}return _0xe79b8+=_0x2ac732[_0x49dbd0(-0x46,-0x6a,-0xdf,-0x6b)],_0xe79b8;}export async function handleCharacterPromptModify(_0x4378b2,_0x22f85e=[]){const _0x106e0e={'uPePa':function(_0x224350,_0x5cb0da){return _0x224350!==_0x5cb0da;},'MUmIa':function(_0x356359,_0x54c300){return _0x356359(_0x54c300);},'fiaJb':_0x5cc340(-0x13d,-0x1e3,-0x1d7,-0x1fb),'PQcSQ':_0x1a0951(0x132,0xd3,0x9b,0x14d)+_0x1a0951(0xca,0x168,0xf0,0x190)+_0x5cc340(-0x21e,-0x203,-0x1ac,-0x205)+_0x5cc340(-0x1b0,-0x1b5,-0x1b4,-0x13f),'Nigwg':'zqxUu','ZhjvI':'MRtvE','qzmiW':function(_0x436171){return _0x436171();},'WxxwL':_0x1a0951(0x12,0x43,-0x7,0x24),'pHVJm':'[character'+_0x1a0951(0xee,0x168,0x16f,0x19d)+_0x1a0951(0x188,0x10e,0x15a,0x183)+_0x1a0951(0xa9,0x50,-0x59,0xb9),'oECXR':_0x5cc340(-0x160,-0x10b,-0x14a,-0x1ed)+_0x1a0951(0x1be,0x168,0x174,0x1ea)+_0x1a0951(0x135,0xef,0xda,0x54)+_0x5cc340(-0x122,-0x202,-0x1b6,-0x228)+':','emOeN':function(_0xca10a9,_0x5b63cd){return _0xca10a9||_0x5b63cd;},'ERqYW':function(_0x5b0250,_0x57912f){return _0x5b0250===_0x57912f;},'eGSZe':_0x5cc340(-0x13c,-0x5b,-0xd2,-0x69),'VXIlf':_0x5cc340(-0x1d6,-0x159,-0x1b2,-0x1f0),'Qosrp':_0x5cc340(-0x192,-0x193,-0x199,-0x1e3),'jrxma':_0x1a0951(0x5f,0xd3,0x13a,0x152)+_0x5cc340(-0x1b,-0x141,-0xb5,-0xd6)+'fy]\x20Charac'+_0x5cc340(-0x225,-0x194,-0x191,-0x105)+_0x1a0951(0x82,0xec,0x139,0x55),'aUsvw':function(_0x48362f,_0x1e7f11,_0x4fe8cd){return _0x48362f(_0x1e7f11,_0x4fe8cd);},'vELSN':function(_0x3a075e){return _0x3a075e();},'xkZjw':_0x1a0951(0x95,0xd3,0x142,0x6f)+_0x5cc340(-0x1e,-0xd5,-0xb5,-0x12f)+_0x5cc340(-0x1b9,-0x1ee,-0x15b,-0xd8)+'ter\x20list\x20t'+'ext\x20(trigg'+'ered):','dOwBw':function(_0x2a1e0c,_0x2ad309){return _0x2a1e0c(_0x2ad309);},'rghEU':function(_0x520b95,_0x4d6738){return _0x520b95(_0x4d6738);},'OqnZc':_0x1a0951(0x6c,0xd3,0x145,0x30)+'PromptModi'+_0x5cc340(-0xea,-0x108,-0x127,-0x15b)+'后:','nFKKB':function(_0xbe4a70,_0x53142c,_0x3938dd){return _0xbe4a70(_0x53142c,_0x3938dd);},'NXGhB':_0x1a0951(0xd9,0x39,0x6,0xd9),'Oqzfm':_0x5cc340(-0x163,-0xbf,-0x14a,-0x119)+'PromptModi'+'fy]\x20User\x20r'+_0x1a0951(0xe1,0x38,-0x58,-0x31)+'\x20message\x20i'+_0x1a0951(0xde,0x15c,0x1c9,0x12c),'BSocE':function(_0x404963,_0x53f670){return _0x404963||_0x53f670;},'AOwSS':function(_0x2f7f77,_0x4bb668,_0x3dfe5a,_0x48b4ba,_0x530001){return _0x2f7f77(_0x4bb668,_0x3dfe5a,_0x48b4ba,_0x530001);},'MQJvv':'[character'+_0x1a0951(0xf0,0x168,0x1af,0x1c4)+_0x1a0951(0xd5,0x36,0xbd,0x50)+_0x5cc340(-0x110,-0x186,-0x119,-0x125),'QAhaV':function(_0x208069,_0x47ce40){return _0x208069>_0x47ce40;},'hnZrd':function(_0x339e7d,_0x586e92){return _0x339e7d>=_0x586e92;},'dUSGo':function(_0x325bac,_0x37dfe4,_0x39a4ab,_0x745fb5,_0x1189b4){return _0x325bac(_0x37dfe4,_0x39a4ab,_0x745fb5,_0x1189b4);},'dKztY':'参考图片','ajawN':function(_0x5e1d11,_0x428f25,_0x44d7c5){return _0x5e1d11(_0x428f25,_0x44d7c5);},'HPcmP':function(_0x141ac5,_0x19fa64,_0x1307e2){return _0x141ac5(_0x19fa64,_0x1307e2);},'nKqpZ':_0x1a0951(0x14a,0xd3,0x147,0x7f)+_0x5cc340(-0x4c,-0x15d,-0xb5,-0x72)+'fy]\x20LLM\x20ou'+_0x5cc340(-0xac,-0xcc,-0xd4,-0x93),'YIOQF':'uWXjN','RnERA':'CvieU','dkkUU':_0x1a0951(0x100,0x116,0x1bb,0xd2),'KwOlj':function(_0x506733,_0x515656){return _0x506733(_0x515656);},'MhIhY':_0x1a0951(0x112,0xd9,0x9d,0x135)+'检测到角色标签','ZUvgI':_0x5cc340(-0x128,-0x139,-0x14a,-0x17b)+_0x5cc340(-0x140,-0x15e,-0xb5,-0x103)+_0x1a0951(0xab,0x6c,0xbd,-0xf)+'racter\x20tag'+_0x5cc340(-0x138,-0x180,-0x17b,-0x18f)+_0x1a0951(0x22,0x9c,0x5c,0x84),'CALMW':_0x1a0951(0xb6,0xd3,0x4a,0xb7)+_0x5cc340(-0x153,-0xa5,-0xb5,-0x102)+'fy]\x20Extrac'+'ted\x20data:'};function _0x5cc340(_0x1c8a25,_0x509983,_0x1f7930,_0x3ca199){return _0x9decc7(_0x1f7930- -0x65b,_0x509983-0x10b,_0x509983,_0x3ca199-0x195);}function _0x1a0951(_0x2a04cb,_0x527fdf,_0x4ec719,_0x50f440){return _0x9decc7(_0x527fdf- -0x43e,_0x527fdf-0xc5,_0x50f440,_0x50f440-0x19d);}console[_0x5cc340(-0x1e1,-0x252,-0x1b5,-0x15f)](_0x1a0951(0x98,0xd3,0xfa,0xcc)+_0x5cc340(-0xac,-0x4a,-0xb5,-0x138)+_0x1a0951(0x55,0xfa,0x14f,0xe4)+_0x1a0951(0xe4,0x167,0xfb,0x1cf)+_0x1a0951(0x54,0x6f,-0x2d,0x0)+'modify\x20req'+'uest...'),toastr['info'](_0x106e0e[_0x1a0951(0x168,0x151,0x196,0xdb)]);try{if(_0x106e0e[_0x5cc340(-0x127,-0x1b9,-0x148,-0xe9)](_0x106e0e[_0x1a0951(0x134,0xe2,0x123,0xa6)],_0x106e0e[_0x1a0951(0x28,0x49,0xb7,0x6c)])){const _0x343e9b=_0x106e0e['qzmiW'](getContext),_0x52f2c8=extension_settings[extensionName],_0x2b6a01=_0x106e0e[_0x5cc340(-0x17a,-0xe1,-0x14b,-0x185)](getCurrentCharacterPreset);if(!_0x2b6a01){toastr[_0x5cc340(-0x206,-0x13e,-0x18f,-0x136)](_0x106e0e[_0x5cc340(-0x17b,-0x119,-0x185,-0x19a)]);return;}console[_0x5cc340(-0x12e,-0x18e,-0x1b5,-0x115)](_0x106e0e[_0x1a0951(0xb5,0xc1,0xbb,0xb0)],_0x2b6a01['id']);const _0x387458=_0x2b6a01[_0x5cc340(-0x1c6,-0xa4,-0x12d,-0x1d5)][_0x5cc340(-0x116,-0x112,-0x1bb,-0x19b)+_0x5cc340(-0x208,-0x229,-0x18b,-0x130)]||'',_0x5466b9=_0x2b6a01[_0x1a0951(0x63,0xf0,0x11b,0x86)]['generation'+_0x1a0951(0x171,0x16c,0xf7,0x154)]||'',_0x1e5020=_0x2b6a01[_0x1a0951(0x5e,0xf0,0x52,0x69)][_0x5cc340(-0x256,-0x204,-0x1bb,-0x169)+_0x5cc340(-0x39,-0x45,-0xe2,-0xb2)]||{};console[_0x1a0951(0x75,0x68,-0x27,0xd6)](_0x5cc340(-0x124,-0x18b,-0x14a,-0x17f)+'PromptModi'+_0x5cc340(-0xcc,-0x11e,-0x12e,-0xc0)+_0x5cc340(-0xa7,-0xb8,-0x106,-0x123),_0x387458),console[_0x5cc340(-0x161,-0x210,-0x1b5,-0x184)](_0x106e0e[_0x1a0951(0x1b6,0x17b,0x1bc,0xff)],_0x5466b9),console[_0x1a0951(0x1,0x68,0x82,0xbe)](_0x1a0951(0x154,0xd3,0x6c,0xdc)+'PromptModi'+'fy]\x20Saved\x20'+_0x1a0951(0x15c,0x13e,0x18f,0x1a9),_0x1e5020);const _0xdb66ab=_0x106e0e[_0x5cc340(-0x1a8,-0x27d,-0x1e3,-0x1e3)](_0x4378b2,''),_0x5e8163=[];if(_0x4378b2){if(_0x106e0e[_0x1a0951(0x5e,0xf7,0x5f,0x73)](_0x106e0e[_0x5cc340(-0x13b,-0x18c,-0x17c,-0xe8)],_0x106e0e[_0x1a0951(0xc0,0xa1,0x2f,0x148)]))_0x5e8163[_0x5cc340(-0x9e,-0x58,-0xe4,-0x139)](_0x4378b2);else{const _0x3f5bc1={};_0x3f5bc1[_0x1a0951(0x149,0xf1,0x82,0xc6)]=[];const _0x4bfacf=_0x3f5bc1;_0x2e93e7=_0x42cb50['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x5cc340(-0xe4,-0x207,-0x163,-0xe6)]();const _0x1a1c3c=/<人物>([\s\S]*?)<\/人物>/g;let _0x207ea3;while(_0x106e0e['uPePa'](_0x207ea3=_0x1a1c3c['exec'](_0x456b80),null)){const _0x3ad0dd=_0x106e0e['MUmIa'](_0x305851,_0x207ea3[-0x2706+-0x19ae+0x40b5]),_0x4ca21c=_0x17bbfd(_0x3ad0dd);_0x4ca21c&&_0x4bfacf[_0x5cc340(-0x11c,-0x156,-0x12c,-0x17b)][_0x1a0951(0x100,0x139,0x130,0x16d)](_0x4ca21c);}return _0x4bfacf;}}_0x387458&&_0x5e8163[_0x1a0951(0x14b,0x139,0x101,0x16c)](_0x387458);_0x5466b9&&(_0x106e0e[_0x1a0951(0xa6,0xf7,0x8a,0x130)](_0x106e0e[_0x1a0951(0x1c3,0x16a,0x1d4,0x13d)],_0x106e0e['Qosrp'])?(_0x38a5a3[_0x1a0951(0x98,0x135,0x16a,0x1c1)+'ener'](_0x2d7a7a[_0x1a0951(0x51,0x4f,-0x3e,-0x37)+'ODIFY_RESP'+_0x5cc340(-0x128,-0x1ed,-0x14f,-0xfb)],_0x1ac044),_0xade9ba&&(_0x106e0e[_0x5cc340(-0x85,-0x73,-0xc3,-0x3b)](_0x2b9f8b,_0x41e4a4),_0x5dfacc=null)):_0x5e8163[_0x1a0951(0x17d,0x139,0x171,0x181)](_0x5466b9));const _0x387e8=_0x5e8163[_0x1a0951(-0x49,0x42,-0x64,-0x5d)]('\x0a');console[_0x1a0951(0x103,0x68,0x87,0x5c)](_0x106e0e['jrxma'],_0x387e8);let _0x146e5d=_0x106e0e['aUsvw'](buildPromptForRequestType,_0x1a0951(0x118,0x12d,0x95,0xc0)+'y',_0xdb66ab);const _0x4066eb=generateCharacterListText(_0x387e8),_0x476d9d=_0x106e0e['vELSN'](generateOutfitEnableListText),_0x1fb902=_0x106e0e[_0x5cc340(-0x158,-0x127,-0xbf,-0x42)](generateCommonCharacterListText);console[_0x5cc340(-0x21c,-0x21b,-0x1b5,-0x195)](_0x106e0e[_0x1a0951(0xe5,0x7b,0xe5,0xcf)],_0x4066eb);const _0x2c8ad4=_0x343e9b[_0x5cc340(-0x4a,-0x91,-0xbd,-0x90)+'ta']?.[_0x1a0951(0x1a1,0x16b,0x1c3,0x19a)]||{},_0x548f9c=_0x106e0e[_0x1a0951(-0x1d,0x89,0x124,0x7b)](buildCharacterText,_0x2b6a01);_0x146e5d=_0x106e0e[_0x1a0951(0xb5,0x154,0x125,0xda)](mergeAdjacentMessages,_0x146e5d),console[_0x5cc340(-0x1ad,-0x23f,-0x1b5,-0x25a)](_0x106e0e[_0x1a0951(0x84,0x121,0x10b,0x182)],_0x146e5d);const _0x25d22c=_0x106e0e[_0x1a0951(0xf2,0x146,0x177,0x122)](findMessageIndexWithPlaceholder,_0x146e5d,_0x106e0e['NXGhB']);console[_0x1a0951(0xac,0x68,0x45,-0x1f)](_0x106e0e[_0x1a0951(0xcb,0x91,0xac,0x114)],_0x25d22c);const _0x1d90a5={..._0x1e5020,..._0x2c8ad4},_0x42a2bf={'context':_0x387458,'worldBookContent':_0x5466b9,'variables':_0x1d90a5,'userDemand':_0x106e0e[_0x1a0951(-0x13,0x5f,-0x3,-0x46)](_0x4378b2,''),'characterListText':_0x4066eb,'outfitEnableListText':_0x476d9d,'commonCharacterListText':_0x1fb902},{messages:_0x105a42,replacedVariables:_0x217cfe}=_0x106e0e[_0x1a0951(0x159,0x146,0x1aa,0x1a8)](replaceAllPlaceholders,_0x146e5d,_0x42a2bf);_0x146e5d=_0x105a42,_0x146e5d=_0x106e0e[_0x5cc340(-0x14f,-0x76,-0xc6,-0xed)](_0x58b1e1,_0x146e5d,_0x5cc340(-0x15c,-0x1e2,-0x188,-0x1bd),_0x548f9c,_0x217cfe),console[_0x5cc340(-0x188,-0x246,-0x1b5,-0x198)](_0x106e0e[_0x5cc340(-0x1d7,-0x13a,-0x187,-0x1cf)],_0x146e5d);let _0x3ef8c4='';_0x106e0e[_0x1a0951(0x123,0x13a,0x1d9,0x168)](_0x217cfe[_0x1a0951(0xdf,0x4a,0xb3,0x1e)],0x232e+0x1524+-0x3852)&&(_0x3ef8c4='诊断：检测到以下变量'+_0x1a0951(0x90,0x4e,-0x3b,0x2f)+[..._0x217cfe][_0x1a0951(0x63,0x42,-0x4,-0x3a)]('、')+'\x0a');_0x22f85e&&_0x106e0e[_0x5cc340(-0x138,-0x6a,-0xe3,-0x5c)](_0x22f85e[_0x1a0951(0x1ee,0x17c,0xe2,0x114)],-0x1*0x61e+-0x5*-0x1ab+0x1*-0x239)&&_0x106e0e[_0x5cc340(-0x138,-0xb3,-0x14d,-0x189)](_0x25d22c,-0x1014+-0x96+0x2*0x855)&&(_0x146e5d=_0x106e0e[_0x1a0951(0x1a5,0x12c,0x19c,0x13a)](attachImagesToMessage,_0x146e5d,_0x25d22c,_0x22f85e,_0x106e0e[_0x1a0951(0x1e,0x5e,-0x38,-0x5)]),console[_0x5cc340(-0x1bc,-0x230,-0x1b5,-0x112)](_0x5cc340(-0xc3,-0xa1,-0x14a,-0x122)+'PromptModi'+'fy]\x20Attach'+'ed',_0x22f85e[_0x1a0951(0x1ee,0x17c,0x1ee,0x16e)],_0x5cc340(-0x181,-0x102,-0x1a3,-0xfc)+_0x5cc340(-0xc9,-0x1c5,-0x13e,-0x19e)+'\x20index',_0x25d22c));_0x106e0e[_0x5cc340(-0x188,-0x15c,-0x1e0,-0x1c2)](updateCombinedPrompt,_0x146e5d,_0x3ef8c4);const _0x312b0a={};_0x312b0a['timeoutMs']=0x493e0;const _0x31a444=await _0x106e0e[_0x1a0951(0x73,0xb0,0xdf,0x138)](LLM_CHAR_MODIFY,_0x146e5d,_0x312b0a);console['log'](_0x106e0e[_0x1a0951(0x15b,0xb6,0x23,0x146)],_0x31a444);if(!_0x31a444){if(_0x106e0e['ERqYW'](_0x106e0e[_0x5cc340(-0x7f,-0x156,-0x10b,-0x19c)],_0x106e0e[_0x1a0951(-0x2f,0x5d,-0x2,0x103)]))return _0x967958&&_0x5d9ae0['includes'](_0x4ab62b)&&(_0x5484ef&&_0x2814ac[_0x5cc340(-0xd1,-0x13d,-0x130,-0xe1)](_0x18e082)),_0x5acaf0[_0x1a0951(0x1ed,0x178,0x1ac,0x144)](_0x400aca,_0x192425);else{toastr['error'](_0x106e0e[_0x1a0951(0x17f,0x170,0x168,0x110)]);return;}}const _0x5529c1=_0x106e0e[_0x5cc340(-0xb2,-0x17c,-0x158,-0xce)](extractCharacterTags,_0x31a444);if(_0x5529c1['characters']['length']===-0x25d6+0x47*0x4d+0x107b){toastr['warning'](_0x106e0e[_0x1a0951(0xc4,0x101,0xba,0x5c)]),console[_0x1a0951(0x77,0x68,0x71,0x57)](_0x106e0e['ZUvgI']),console[_0x5cc340(-0x1c5,-0x233,-0x1b5,-0x1a7)](_0x1a0951(0x145,0xd3,0x98,0x8a)+_0x5cc340(-0xe0,-0xe0,-0xb5,-0x111)+_0x5cc340(-0x143,-0x146,-0x121,-0x89)+_0x5cc340(-0x132,-0x166,-0x11e,-0xc0)+_0x5cc340(-0x1c3,-0x171,-0x1b8,-0x202)+_0x5cc340(-0x84,-0x11d,-0x9e,-0x6e),_0x31a444);return;}console[_0x1a0951(0x50,0x68,0x42,0xcc)](_0x106e0e[_0x1a0951(0xc4,0x7c,0x8b,0xb9)],_0x5529c1);const _0x3b11a4=_0x5529c1['characters'][-0x1*0x26c2+0x40*-0x7b+0x4582];await updateCharacterPresetFromLLM(_0x2b6a01['id'],_0x3b11a4),toastr[_0x1a0951(0x6e,0xb5,0x6d,0xa5)](_0x1a0951(0xe7,0xb3,0x149,0x119));}else _0x2bea8c[_0x257946]&&(_0x564cfb[_0x20f94f]=_0x3bcb5c[_0x271460]);}catch(_0x4ef8ca){if(_0x106e0e['ERqYW']('oVsRJ',_0x1a0951(0x1c9,0x120,0x144,0x84)))console['error'](_0x1a0951(0x105,0xd3,0x134,0x49)+_0x1a0951(0x1ce,0x168,0x1ae,0xca)+_0x1a0951(0xb4,0xfd,0x16b,0xc2),_0x4ef8ca),toastr[_0x1a0951(0xad,0x8e,-0x6,0xcf)](_0x1a0951(0x149,0x162,0x17e,0x14b)+'\x20'+_0x4ef8ca['message']);else{const _0x360797={};_0x360797['type']=_0x106e0e[_0x1a0951(0xd8,0x70,0x10d,0xa0)],_0x360797['text']=_0x588241[_0x5cc340(-0x15e,-0x223,-0x19d,-0x20c)],_0x4f8483['push'](_0x360797);}}}async function updateCharacterPresetFromLLM(_0x4da227,_0x304399){const _0x1438ac={'iTtOm':function(_0x5e3b51){return _0x5e3b51();},'bHIbh':function(_0x354eaf,_0x28ed22){return _0x354eaf(_0x28ed22);},'fosiZ':function(_0x51fc05,_0x45ade1){return _0x51fc05(_0x45ade1);},'yIiSt':function(_0xc6c943,_0x97fe5b){return _0xc6c943+_0x97fe5b;},'pWfGb':function(_0x46065e,_0x109884,_0x423b2d,_0x1946d1,_0x1d4188){return _0x46065e(_0x109884,_0x423b2d,_0x1946d1,_0x1d4188);},'IwIIc':'找不到指定的角色预设','pVWCe':_0x1b65fc(-0x258,-0x1d5,-0x1e5,-0x265),'WGsWH':'英文名称','XIDgm':_0x43fc8e(-0x8e,-0x97,-0x5e,-0x78),'NkyTW':'五官外貌背面','yIuPR':_0x1b65fc(-0x14b,-0x191,-0x167,-0x195),'CZEpZ':_0x43fc8e(-0xde,-0x9b,-0xcd,-0x8d),'GeqAg':_0x1b65fc(-0xae,-0x14e,-0x103,-0x14c),'HnMqr':'上半身NSFW背面','akaXg':'下半身NSFW','qSFpw':_0x1b65fc(-0x191,-0xff,-0x197,-0xbe),'AJaJe':function(_0x4ff0b3,_0xbd7802){return _0x4ff0b3!==_0xbd7802;},'HXZjM':'yfubw','CPpnh':function(_0x599a8f,_0x35a6b1){return _0x599a8f!==_0x35a6b1;},'ZpXDr':'wqWTM','tgzRZ':_0x43fc8e(0x8f,-0x2a,0xbc,0x17),'NWJDg':function(_0x1bbe15,_0x37fc4a){return _0x1bbe15>_0x37fc4a;},'oAuOa':_0x43fc8e(0x80,-0x36,0x47,0x53),'SlSwL':function(_0x767c15,_0xb84d75){return _0x767c15(_0xb84d75);},'UjiDS':function(_0x158092,_0x270b50){return _0x158092!==_0x270b50;},'ykijw':_0x43fc8e(0x121,0x14b,0x3d,0xa4),'ssDJN':_0x43fc8e(-0x76,-0xd,-0x1d,-0x83),'DMOZU':function(_0x4e2858,_0x52c48e){return _0x4e2858!==_0x52c48e;},'lfMuE':_0x1b65fc(-0x19f,-0x164,-0x20c,-0x10e),'tXgiI':'#st-chatu8'+_0x1b65fc(-0x1c3,-0x18d,-0x21a,-0x200)+_0x43fc8e(0x0,0x64,-0x5a,-0x14),'qIMpu':function(_0x325176,_0x345c4b){return _0x325176(_0x345c4b);}},_0x586c5b=extension_settings[extensionName],_0x4ebc2c=_0x586c5b[_0x43fc8e(0x2,0x57,0x85,0x78)+_0x1b65fc(-0x19c,-0x1e9,-0x16a,-0x1c7)][_0x4da227];if(!_0x4ebc2c){toastr[_0x1b65fc(-0x257,-0x1be,-0x253,-0x16b)](_0x1438ac['IwIIc']);return;}let _0x428537=_0x1b65fc(-0x18c,-0xfa,-0x11d,-0xea)+_0x4da227+_0x1b65fc(-0x1ad,-0x1a7,-0x11a,-0x12a);function _0x43fc8e(_0x433262,_0x51a621,_0x4373f2,_0x53f875){return _0x9decc7(_0x53f875- -0x51c,_0x51a621-0x1,_0x4373f2,_0x53f875-0x1d3);}const _0x13cd94={};_0x13cd94[_0x43fc8e(-0x77,-0x13,-0xa5,-0x27)]=_0x1438ac[_0x43fc8e(-0xf3,-0x6b,-0x43,-0x51)],_0x13cd94[_0x43fc8e(0x1e,0x6,0x4d,0x61)]=_0x1438ac[_0x43fc8e(0x7e,-0x4e,0x31,-0x17)],_0x13cd94[_0x1b65fc(-0x1a4,-0x107,-0x125,-0xad)+_0x1b65fc(-0x192,-0x194,-0x10b,-0x20d)]=_0x1438ac[_0x1b65fc(-0x1cc,-0x217,-0x20e,-0x1e2)],_0x13cd94[_0x1b65fc(-0x172,-0x107,-0x1a8,-0x12d)+'uresBack']=_0x1438ac['NkyTW'],_0x13cd94[_0x43fc8e(-0x108,-0xec,-0x30,-0x89)+'FW']=_0x43fc8e(-0x51,-0x77,-0xc,-0x15),_0x13cd94[_0x43fc8e(-0x11d,-0x2a,-0x5f,-0x89)+_0x43fc8e(-0x21,-0x32,-0xe,-0x53)]=_0x1438ac['yIuPR'],_0x13cd94[_0x43fc8e(0xce,-0x4d,0x43,0x41)+'W']=_0x1438ac['CZEpZ'],_0x13cd94['fullBodySF'+_0x43fc8e(-0x17,0x2a,0x26,-0x43)]=_0x43fc8e(-0x60,0x75,0x8,0x31),_0x13cd94['upperBodyN'+_0x1b65fc(-0xed,-0xd5,-0x61,-0x13a)]=_0x1438ac[_0x43fc8e(-0xb9,-0x99,-0x89,-0x4f)],_0x13cd94[_0x43fc8e(-0x40,0x26,0x53,-0x33)+'SFWBack']=_0x1438ac[_0x43fc8e(0xcc,0x2d,0x83,0x72)],_0x13cd94[_0x1b65fc(-0x11c,-0x142,-0x179,-0xac)+'FW']=_0x1438ac['akaXg'],_0x13cd94['fullBodyNS'+_0x1b65fc(-0x23d,-0x1c1,-0x1cf,-0x24b)]=_0x1438ac[_0x1b65fc(-0xd2,-0xf9,-0x130,-0x182)];const _0x314055=_0x13cd94;let _0x341e26=0x19*-0x16d+0x120d*0x1+0x1198;for(const _0x5a98a8 in _0x314055){if(_0x1438ac[_0x43fc8e(0x34,0x76,-0xe,-0x30)](_0x1438ac['HXZjM'],_0x43fc8e(-0x33,-0x27,0x6f,0x5a))){if(_0x12858c['id']!==_0xb7b9b8)return;_0x1438ac[_0x1b65fc(-0x134,-0xd2,-0xce,-0xae)](_0x267c33),_0x273dfd[_0x1b65fc(-0x1b5,-0x197,-0x185,-0x1a9)]?_0x1438ac['bHIbh'](_0x515cf0,_0x1e1c73[_0x1b65fc(-0x187,-0x1e2,-0x253,-0x211)]):_0x1438ac[_0x43fc8e(0xd0,0xaa,0x51,0x3b)](_0x279a3d,new _0x170af6(_0xd1be3c[_0x43fc8e(-0x28,-0x45,-0xd1,-0x74)]||_0x1b65fc(-0x104,-0x104,-0x181,-0x17a)));}else{if(_0x304399[_0x5a98a8]&&_0x1438ac[_0x43fc8e(-0x53,0x63,0x95,0x8)](_0x304399[_0x5a98a8],_0x4ebc2c[_0x5a98a8])){if(_0x1438ac[_0x1b65fc(-0x219,-0x19e,-0xfe,-0x128)](_0x1438ac['ZpXDr'],_0x1438ac['ZpXDr']))_0x474650&&_0x135df8['add'](_0x2a06f7);else{const _0x1e4ee1=_0x4ebc2c[_0x5a98a8]||_0x1438ac['tgzRZ'],_0x56f4fc=_0x304399[_0x5a98a8];_0x428537+='•\x20'+_0x314055[_0x5a98a8]+':\x0a',_0x428537+=_0x43fc8e(0x11e,0x12f,0x9a,0xa8)+_0x1e4ee1[_0x1b65fc(-0x1ec,-0x20b,-0x2ac,-0x1f1)](-0x1*0x1b56+0x2101+-0x5ab,-0x94*-0x13+0x69a+-0xc*0x173)+(_0x1438ac['NWJDg'](_0x1e4ee1[_0x43fc8e(0x1c,0xcd,0x79,0x9e)],0x1ad+0x1776+-0x4fd*0x5)?_0x1438ac[_0x1b65fc(-0x19d,-0x165,-0x138,-0x1df)]:'')+'\x0a',_0x428537+='\x20\x20新:\x20'+_0x56f4fc[_0x43fc8e(-0xf,-0x114,-0xc9,-0x9d)](0xa54+0x1*0x1565+0x1fb9*-0x1,-0x2152+-0x1*0xc12+-0xf32*-0x3)+(_0x1438ac[_0x1b65fc(-0x179,-0x122,-0x94,-0xf7)](_0x56f4fc[_0x1b65fc(-0x88,-0xd0,-0x117,-0x53)],-0xdd7+0xb5*-0xd+-0x2*-0xb9d)?'...':'')+'\x0a\x0a',_0x341e26++;}}}}if(_0x341e26===0x1e99+0x165e+-0x95*0x5b){toastr[_0x43fc8e(-0x23,0x1c,0x56,0x58)](_0x1b65fc(-0x12e,-0x11d,-0x176,-0x79)+'内容');return;}_0x428537+='共\x20'+_0x341e26+'\x20项更改,是否应用?';const _0x5c5df8=await _0x1438ac['SlSwL'](stylishConfirm,_0x428537);if(!_0x5c5df8){if(_0x1438ac[_0x43fc8e(0x100,-0x7,0xf5,0x94)](_0x1438ac[_0x1b65fc(-0x119,-0x141,-0x19f,-0xcc)],_0x1438ac[_0x1b65fc(-0x13a,-0x141,-0x16e,-0x122)])){if(_0x2c4887&&_0x28ed3c['randomUUID'])return _0x4ac2be[_0x1b65fc(-0x143,-0x10f,-0x1b5,-0xeb)]();return _0x1438ac[_0x1b65fc(-0x158,-0x18e,-0x191,-0x181)](_0x291b3e['now']()[_0x1b65fc(-0x64,-0xfe,-0x19f,-0xe3)](-0x52*0x32+0x5b0*0x2+0x4c8),_0x5031de[_0x43fc8e(0x6,-0x2e,-0x5d,-0x1e)]()['toString'](0x2*0x7da+-0xd96+0xfd*-0x2)[_0x1b65fc(-0x1f4,-0x20b,-0x20f,-0x25a)](-0x2*-0x12a4+0x1527+-0x3a6d));}else{toastr[_0x1b65fc(-0xd0,-0x116,-0x170,-0x17c)](_0x1438ac['ssDJN']);return;}}for(const _0x2aba9e in _0x314055){_0x304399[_0x2aba9e]&&(_0x1438ac[_0x1b65fc(-0x212,-0x175,-0x20c,-0x165)](_0x43fc8e(-0x48,-0x62,-0x7a,0xa),_0x1438ac[_0x43fc8e(0x2d,-0x43,-0x34,0x62)])?_0x2de38f[_0x4310b4]=_0x1438ac[_0x1b65fc(-0x1ae,-0x1f8,-0x216,-0x1b9)](_0x32826,_0x1a9110[_0x2b9002],_0x5eaa0b,_0x51d59a,_0x5949df):_0x4ebc2c[_0x2aba9e]=_0x304399[_0x2aba9e]);}saveSettingsDebounced();const _0x134bb7=_0x1438ac[_0x1b65fc(-0xa0,-0x133,-0xf0,-0x1d9)]($,_0x1438ac[_0x1b65fc(-0xf8,-0x17d,-0x1fd,-0x1d8)]);function _0x1b65fc(_0x33370b,_0x3d00aa,_0x2f551a,_0x43d8aa){return _0x9decc7(_0x3d00aa- -0x68a,_0x3d00aa-0x15c,_0x2f551a,_0x43d8aa-0x1bc);}_0x134bb7[_0x43fc8e(0x1,0xbe,0xac,0x9e)]&&_0x1438ac[_0x43fc8e(0x0,0x6c,-0x55,0x3b)](refreshCharacterSettings,_0x134bb7),_0x1438ac[_0x43fc8e(0x106,0x47,0x81,0xa0)](updateFormFields,_0x304399),console[_0x43fc8e(-0x38,-0x93,0x1a,-0x76)]('[character'+_0x1b65fc(-0x4b,-0xe4,-0x187,-0xe8)+_0x1b65fc(-0x89,-0x124,-0xbf,-0x1c0)+_0x43fc8e(0x97,0x4e,-0x18,0x2)+_0x4da227+'\x22');}function updateFormFields(_0x2d79c1){const _0x49e2f0={};function _0x28d396(_0x4040f5,_0x14ff3d,_0x84ed48,_0xb82408){return _0x9decc7(_0x84ed48- -0x3a,_0x14ff3d-0x1b5,_0x14ff3d,_0xb82408-0x10e);}_0x49e2f0[_0x28d396(0x4c2,0x4c8,0x55d,0x5e0)]='durUn',_0x49e2f0['HcfQX']='nameCN',_0x49e2f0['kQABz']='nameEN',_0x49e2f0['oGWBf']=_0x28d396(0x4bc,0x582,0x549,0x4d5)+_0x4aeec0(0x3b3,0x338,0x352,0x422),_0x49e2f0[_0x4aeec0(0x354,0x391,0x2c9,0x2fa)]=_0x28d396(0x574,0x502,0x549,0x5ce)+_0x4aeec0(0x40b,0x3a0,0x497,0x3c3),_0x49e2f0['gYazr']=_0x28d396(0x4d8,0x3f9,0x459,0x49f)+'FW',_0x49e2f0[_0x4aeec0(0x44a,0x48b,0x467,0x3c1)]='upperBodyS'+'FWBack',_0x49e2f0['QTTPq']='fullBodySF'+'W',_0x49e2f0[_0x28d396(0x526,0x62c,0x588,0x4ec)]='fullBodySF'+'WBack',_0x49e2f0[_0x28d396(0x51c,0x585,0x569,0x5f1)]=_0x28d396(0x479,0x43a,0x4af,0x526)+_0x4aeec0(0x472,0x49e,0x4d7,0x465),_0x49e2f0[_0x28d396(0x423,0x412,0x476,0x51d)]='upperBodyN'+_0x4aeec0(0x420,0x4ab,0x3d5,0x422);function _0x4aeec0(_0x1e4426,_0x2d02f6,_0x32ef0d,_0x40b992){return _0x9decc7(_0x1e4426- -0x143,_0x2d02f6-0x1b1,_0x40b992,_0x40b992-0x1a9);}_0x49e2f0[_0x28d396(0x51f,0x509,0x510,0x49e)]=_0x28d396(0x50d,0x552,0x50e,0x525)+'FW',_0x49e2f0[_0x28d396(0x44e,0x468,0x4ef,0x466)]='fullBodyNS'+'FWBack';const _0x1125f5=_0x49e2f0,_0x4c159e=[_0x1125f5['HcfQX'],_0x1125f5[_0x28d396(0x511,0x4ef,0x4ca,0x44a)],_0x1125f5['oGWBf'],_0x1125f5[_0x4aeec0(0x354,0x3bd,0x38f,0x301)],_0x1125f5[_0x28d396(0x5ac,0x540,0x547,0x5cb)],_0x1125f5[_0x28d396(0x4d1,0x5e4,0x553,0x58d)],_0x1125f5['QTTPq'],_0x1125f5[_0x28d396(0x608,0x4fc,0x588,0x59e)],_0x1125f5[_0x4aeec0(0x460,0x4ec,0x426,0x449)],_0x1125f5[_0x4aeec0(0x36d,0x3b8,0x37e,0x34e)],_0x1125f5[_0x28d396(0x51c,0x511,0x510,0x50b)],_0x1125f5[_0x28d396(0x461,0x53c,0x4ef,0x505)]];_0x4c159e['forEach'](_0x1c19d1=>{function _0x954aa3(_0x5bdefd,_0x50cdbe,_0x3e2697,_0x61c5de){return _0x28d396(_0x5bdefd-0x78,_0x50cdbe,_0x61c5de- -0x2cd,_0x61c5de-0x65);}function _0x5623c6(_0x18c3ff,_0x2cab35,_0x473c2f,_0x590c4e){return _0x4aeec0(_0x473c2f- -0xa2,_0x2cab35-0x1b4,_0x473c2f-0x1ae,_0x590c4e);}if(_0x1125f5[_0x5623c6(0x3e3,0x382,0x3b2,0x39e)]!==_0x1125f5['BjInq']){_0x128035[_0x5623c6(0x35b,0x357,0x38f,0x3cd)](_0x5623c6(0x2ea,0x331,0x388,0x319)+'内容');return;}else{if(_0x2d79c1[_0x1c19d1]){const _0x2ac04c=document[_0x5623c6(0x326,0x20a,0x2a1,0x301)+'ById'](_0x5623c6(0x308,0x316,0x2f6,0x287)+_0x1c19d1);_0x2ac04c&&(_0x2ac04c[_0x5623c6(0x309,0x273,0x2ce,0x24e)]=_0x2d79c1[_0x1c19d1],$(_0x2ac04c)['trigger'](_0x5623c6(0x320,0x33e,0x305,0x3ae)));}}});}