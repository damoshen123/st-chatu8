(function(_0x27d05c,_0x3a9a07){function _0xbea53f(_0x464058,_0x39b3be,_0x380bf5,_0x42c418){return _0x2174(_0x464058- -0x214,_0x42c418);}const _0x34d62a=_0x27d05c();function _0xb6db5b(_0x135085,_0x1fc782,_0x54b57a,_0x23dbdf){return _0x2174(_0x1fc782- -0xda,_0x54b57a);}while(!![]){try{const _0x51527f=parseInt(_0xb6db5b(0x88,0x91,0x10c,0x22))/(0xa94+-0x1*-0x258b+-0x805*0x6)+-parseInt(_0xbea53f(-0x114,-0x93,-0x1a8,-0x162))/(-0xa66+0x1b*-0x3a+0x1086)+-parseInt(_0xb6db5b(0x19c,0x106,0xb8,0x75))/(0x7c9+-0x1dda*0x1+0x585*0x4)+parseInt(_0xb6db5b(-0x59,0x40,0x84,-0x46))/(-0x6*0x4b3+-0xeaf+0x2ae5)*(parseInt(_0xbea53f(-0xe0,-0x13b,-0x5b,-0x8a))/(-0xbfd+0xbcb+0x37*0x1))+-parseInt(_0xb6db5b(0x7a,0xa3,0x140,0x13))/(0x970+0xa34+0x345*-0x6)*(-parseInt(_0xbea53f(-0x90,0x1f,-0xb8,-0x13))/(-0x1*0xa82+-0x37*-0x4f+-0x670))+-parseInt(_0xb6db5b(-0x58,0x3c,0xcb,0x69))/(-0x822+-0x42b*-0x6+0x21b*-0x8)*(parseInt(_0xb6db5b(-0x44,0x32,0xcd,0x89))/(-0xcd4*-0x1+-0x577*0x5+0x5*0x2e8))+parseInt(_0xbea53f(-0x172,-0x1fc,-0x1c4,-0x17f))/(0x2278+-0x2315*0x1+-0xa7*-0x1)*(parseInt(_0xb6db5b(-0x1e,0x95,0x32,0x131))/(-0x2668+-0x165d+0x3cd0));if(_0x51527f===_0x3a9a07)break;else _0x34d62a['push'](_0x34d62a['shift']());}catch(_0x5b2de0){_0x34d62a['push'](_0x34d62a['shift']());}}}(_0x3bc4,0x1*0x1f96f+0x1cf*0x268+-0x2*0x21f7));function _0x2174(_0x3ce1a9,_0x4f4976){const _0x395fb1=_0x3bc4();return _0x2174=function(_0x21da2e,_0x3f35dc){_0x21da2e=_0x21da2e-(-0x371*-0x1+0x9*0x271+-0x18ea);let _0xf73e15=_0x395fb1[_0x21da2e];if(_0x2174['ElAuLk']===undefined){var _0x3b5133=function(_0x3205b6){const _0xa5b743='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2fd12f='',_0xf07a45='',_0x24af97=_0x2fd12f+_0x3b5133;for(let _0x3fd8d5=-0x1f8b+-0xa*0x293+-0xb75*-0x5,_0x1f7d10,_0x55be07,_0x85066f=-0x5*0x1a5+0x1221*-0x2+-0xc1*-0x3b;_0x55be07=_0x3205b6['charAt'](_0x85066f++);~_0x55be07&&(_0x1f7d10=_0x3fd8d5%(0x241c+-0x7b0+-0x1c68)?_0x1f7d10*(-0x2378+0xa0d+0x19ab)+_0x55be07:_0x55be07,_0x3fd8d5++%(0x1c5f+0x129a+-0x3*0xfa7))?_0x2fd12f+=_0x24af97['charCodeAt'](_0x85066f+(0x1*-0x312+-0xaa*-0x11+-0x2*0x417))-(-0x826+0x50b*-0x7+0x2b7d)!==0x22dd+-0x1*-0x210d+0x43ea*-0x1?String['fromCharCode'](-0x959+-0x1cb8*-0x1+0x126*-0x10&_0x1f7d10>>(-(-0x2*-0x330+0x1d*-0x68+0x56a)*_0x3fd8d5&-0x1141*-0x1+0x5d2+0x34b*-0x7)):_0x3fd8d5:-0xecc+-0x21d*0x1+0x5a3*0x3){_0x55be07=_0xa5b743['indexOf'](_0x55be07);}for(let _0x4a2989=-0x268d+0x15d4+0x10b9,_0x1447cb=_0x2fd12f['length'];_0x4a2989<_0x1447cb;_0x4a2989++){_0xf07a45+='%'+('00'+_0x2fd12f['charCodeAt'](_0x4a2989)['toString'](0x227e+0x1*0xb7+-0x1*0x2325))['slice'](-(0x248a*-0x1+-0x24ab+0x4937));}return decodeURIComponent(_0xf07a45);};_0x2174['gxDIYw']=_0x3b5133,_0x3ce1a9=arguments,_0x2174['ElAuLk']=!![];}const _0x130377=_0x395fb1[-0xda1*-0x1+0x23b6*0x1+-0x3157],_0x460e92=_0x21da2e+_0x130377,_0x5c351d=_0x3ce1a9[_0x460e92];if(!_0x5c351d){const _0x36b0b5=function(_0x348924){this['Qhdxpo']=_0x348924,this['ClfioK']=[-0xaef*-0x3+-0x1538+-0xb94,0xcdd*0x2+-0x1703+-0x2b7,-0x1425+0xf47*0x1+0x59*0xe],this['RmneKA']=function(){return'newState';},this['gBkGtJ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['qgSqwV']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x36b0b5['prototype']['lCnoOZ']=function(){const _0x516c78=new RegExp(this['gBkGtJ']+this['qgSqwV']),_0x2a48c6=_0x516c78['test'](this['RmneKA']['toString']())?--this['ClfioK'][0x3af+-0x116f+0xdc1]:--this['ClfioK'][-0xd31+-0x2*-0xdcc+-0xe67];return this['eGuaBx'](_0x2a48c6);},_0x36b0b5['prototype']['eGuaBx']=function(_0x36d04c){if(!Boolean(~_0x36d04c))return _0x36d04c;return this['DeGXZB'](this['Qhdxpo']);},_0x36b0b5['prototype']['DeGXZB']=function(_0x5ce323){for(let _0x2070a2=0x1a44+0x25a3+-0x3fe7,_0x39745a=this['ClfioK']['length'];_0x2070a2<_0x39745a;_0x2070a2++){this['ClfioK']['push'](Math['round'](Math['random']())),_0x39745a=this['ClfioK']['length'];}return _0x5ce323(this['ClfioK'][0x1e00+0x1aa6+-0x38a6]);},new _0x36b0b5(_0x2174)['lCnoOZ'](),_0xf73e15=_0x2174['gxDIYw'](_0xf73e15),_0x3ce1a9[_0x460e92]=_0xf73e15;}else _0xf73e15=_0x5c351d;return _0xf73e15;},_0x2174(_0x3ce1a9,_0x4f4976);}function _0x3bc4(){const _0x2850cf=['sKDPq3y','iIvZzwvKjsi','BMvNyxrPDMvqCG','BwvZC2fNzq','Cw9LtLG','6l2U6k+I5y6g5y+Y6k6W5B2v5PE25yE66zszoG','sLnptIdOP6pMNPdLPlhOTkxVViW','tufhrv9srvnqtW','6l+E5O6L5zco6ycj5OUP','sffVDfm','5zU+54Mh55sF5OIq5OIq5yQFicHKAq','wevXque','q3bPq0S','y29TzNL1AsdNLj/LM74','kcGOlISPkYKRkq','phDSCJO','v2XYq3C','ruDnqKe','AwqGBM90ihjLDa','terjrfG','l3bYB21WDa','Cg5N','BuzZCLa','u2nLBMuGq29TCa','sgLZDg9YEsbYzq','cLnJAgvKDwXLCG','CMvTB3zLtgLZDa','A2fVDhvWAwfU','qvbjiowtJEw6Los4REAYOEACIEwBVG','rw5KCg9PBNqGza','rxjYB3iGz2vUzq','mJmZmtmWtfzQywDi','qKngBxy','Fdf8mNWXoxW3Fa','5y+r6ycb55sF5zU+5AsX6lsL5zon5BQuicG','mta5mZe4sMLwteTk','t1vsA0G','vK1quKS','zxjYB3i','Cfb0Due','sgnrthO','vgX5qxO','DhjPBq','ChjVBxb0','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','iIvZDgvWCYuI','5zU+54Mh55sF5OIq5OIq5yQFicHQAq','y19XDwfUEMHVBG','yNfnEK0','nJa1odG2t2PgAezM','z0nXuKi','y19Pzhf1yw56Aa','vvjm','iIvnt0rftf9oqq','D2v0ww8','qNbOtvm','ndj4tLjOywq','zM9hANi','D3v6z0O','zgf0ytPPBwfNzq','zgLYzwn0ignVBq','C3rYAw5NAwz5','zw5LCG','rLL4CKe','l3zPzxC/zMLSzq','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','5y+r6ycb5yIWienVBwz5vq','Dvvqzfm','zxj0Eq','ELP0D1m','r3nbs08','sKHlvNu','zwq6ia','Aw1Hz2vZ','sMforMu','6lsF6z2I5O+q56s66k+noIa','y2fJAgu','EMHVBMCLiG','6k+noIa','C2nOzwr1BgvY','AgfZt3DUuhjVCa','CMrJs1K','5BcD6k+v5l2C5lI65y6F5AEliejHCW','z1nTChu','DgvUzxi','AML1z3vHBG','twrNtvy','oxWXnhWWFde4','C2vHCMnO','ls0Tls0Tls0Tlq','C3rLChm','pgXVCMe6','q1Lcsfy','AgfNBui','Aw5PDgLHBgL6zq','B25N','BLPhvLO','y2zNx3nJywXL','wxrpyvC','B25Njsi','qKrlDNq','cUMhH+AGT+wzQdOG','EgLHBMnOzw5N','refjz3G','ExvZAgu','cUwWUUwVUdOG','sNnizxG','5lIT55QeihbYB21WDooaGG','AxbH','iIvPCgeLiG','5BYa5AElienVBwz5vuK','6l2U6k+I6lAf5PE277Ym5PYn5yQH5zMO5y+V6io9','zMLSzw5HBwu','y2vKltm3zdi5ma','keLeoIa','o2jHC2u2ncW','B3nPDgLVBG','A1jhCui','zvHuB1G','CLfgtuy','EfbXvLq','y29TzNL1Av93Aq','BMvNyxrPDMvFCa','DwD1yw4Gy2XPzq','nNWXmNW1Fde1Fa','qNrNwwm','Eu12tgi','tMDtCK0','CgXLCK5HBwu','B1fdqMW','5lQl5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','uuvfu3C','Aw5JBhvKzxm','CM9TChq','zM9YBwf0','C3vJy2vZCW','cKngrYbty2fSzq','z2zVAfi','wvPlzfe','iIvJx3f1yw56Aa','zgf0ys4','qvL0CNm','y29TzNL1Av92yq','zMLss0O','iIWGiNbYB21WDa','qvPkv2y','CMvWBgfJzufSBa','CIuI','mJGZmJGXB1jJr0Ty','r29ZANe','DxjUigLTywDLia','x3bYB21WDcuI','6k+35AgR5yAzq29TzNLvsq','iIvJx3HPAMLLjq','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','zxbZ','y29TzNL1Av9Zzq','5QIH5z6l44cc','Bg9N','D2vArMe','vgDPre4','AgvKDwXLCG','6k+35Rgc5BEL5l2C5RwbAwqGlsa','vfz5y0m','s1DMvMy','suq6ia','rxjlsei','Be5oD0u','D2LKDgG','EYjJBgLLBNrFAq','owmWltrLmZKToq','lNnHzMv0zw5ZBW','r1fQrgq','EgLzzwe','u1DXALC','iIvUzwDHDgL2zq','u3nSC1i','55sO5lQo55sF5OIq55QevgfNoIa','iIvJx2LKCxvHBG','ifbYB21WDa','ksaTifbYB21WDa','DMfL','6l2U6k+I5PE25y+r55sF5BYc5BI4oIa','z2nJv2m','zw9dv2i','Cgf5Bg9HzdiYmG','5zgkic0TlqRMRApPNAlMJ5dNPlO','A0fXANm','vhH1ufG','5PYQ6io95lUoqvbj5zon5BQu5lIT5OM+','rhPsy3G','tu9eruXFtKfnrq','ExvZAgvPzf9JBW','CeLAtxa','mtbxswDAv28','s3PZq3C','sfvtrM4','AwnqsxK','D1boqMe','5yYw5lI6igrHDgeGvvi','AuDYq28','ANnVBG','weHdyMS','wLz5tMe','D29YA2vY','vxHtwvi','uxP2uge','vgf2vKm','suzjt1O','BgvZktOG','CMj3Aw4','tLnf','B25SB2fKzw5K','C3bSAxq','y29UC3rYDwn0BW','uwn4swO','5zU+54Mh55sF5OIq6l+h56Il5lIT5y+r55sF6zsz','iIv2ywuLiG','reXstwu','zw1PDa','oJe+','yxbWBhK','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','tKvjv3K','CMf0Aw5NigLTyq','zfbyzgi','wuLiBgy','y2XPzw50','CxvLC3qGzMfPBa','z2u6','v1PlBKy','BM1VBNm','wvjiwLi','vLHWzMS','uxLzDLy','r0vorvjbvevFsq','sMPRCLi','u0zQzwy','y2HHBMDL','zNL1AsK6ia','B2fKoIa','iIvZy2HLzhvSzq','uNfeBu0','5y+r6ycb55sF5zU+5OIq5yQF5zon5BQuicG','s0jnCwm','BKXLv0O','EuHXs3i','zgf0yq','q2HHCMfJDgvYia','zty0ioAvSoAnRUwKHoEqHUoaGG','cUATPEAvSdOG','B25LCNjVCG','cUI0N+MDOUApKoEKUUIVJtOG','q01Vq24','BMfTzt0','yMXVyG','lcdOR6BMG4u6ia','l2HPC3rVCNKV','swniCNu','y29TzNL1AwnHBG','Aw1Hz2veyxrH','B3v0Chv0CW','DeLkBKK','q21ktuS','BIuI','AhHWv1O','Bu9wy1a','rvLsz3G','zML4zwrqCM9TCa','CgfYC2u','5Ps25yIW55sF5zU+6k+35RgcicHjra','zLLUwfq','C3rHDhvZ','wfPjzgC','CejKA08','qK1use8','rNvsDgq','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','BwfIvgq','z1f4r28','B1bwDxC','6i635y+w5zU+54Mh5AsX6lsLloEkTUAaGEEGGq','cI0Tls0Tls0Tlq','yxbWBgLJyxrPBW','iIvOzwLNAhqLiG','rLbVEem','5yIW5PAh5lU25zcn44cc','5ywO6io95O+q56s66k+n57Yw6l6r5zMO','ntaZnZGWvff1Eefs','yxDcAvq','CMvWBgfJzq','yw4Gy2XPzw50kq','tuPtvgm','seDTrMu','iIvZyw1WBgvYxW','lcdPQ5JLUQyGlsa','ioEuN+wBVUA1GEEOI+oaGUwUOUAiT+ERR+s4UG','DxjS','Dg9tDhjPBMC','uLHyzKu','odC3ndq2qNnhtNLK','AML1z3vHBIbJBa','cUENJEwTKdOG','q29TzNL1AuXPCW','Bwz5DwK','Fdr8mtD8m3WXmq','vNPSBMu','55sF5zU+5Rwb56Il5O2v6i635yIW5BYc5BI4ia','yMzqq0y','tuuLiG','mtzLvvPYrvK','tufhrv9srvfvrq','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','uwvzrLG','ndbSBxzzCNq','5Q2J6z2I5O+q56s66k+noIa','CMvHzefZrgf0yq','s0Dxvxq','y19Mzw53zwK','Dgv4Da','y29TzNL1Av9ZyW','ic0Gq2HHBMDLoG','ChjVBxb0x2LK','6k+VoIa','vgPLDfi','rxDrzfK','Afb2uuW','C2fTCgXLCL9Uyq','AwDODa','BgvUz3rO','CuDmsgW','AgvPz2H0','jNr5Cgu9B3v0Ca','iIv3Awr0AcuI','s0Lqsgm','Der0zLm','D0fRyu0','A09dA0G','zhrO','iIvJB21MExvPyW','ndq3odbjEKXhv0u','5BEY5PAT5BYa6l+E5O6L44cc','yuvLBe8','B3iGChjVBxb0oG','ihWG','sNvVEeS','Df9LBMq','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','t29jue8','y29TzNL1Av9Ozq','cI0TlsdNLj/LM77LJ4lMLBdMIQu','BeDqrgu','quPjwLG','CMvZDwX0','CNm6','C2vLza','qvbjioIVT+AXGUwKSEI0PsaO','v0jwA2i','z0TSEuK','AwvUDcK6ia','BNqP44cc','BMrUDxK','mtz8ohWXm3WXma','rffvsfK'];_0x3bc4=function(){return _0x2850cf;};return _0x3bc4();}const _0x52ce9f=(function(){function _0x1e8626(_0x5ee7f7,_0x10fa5f,_0x5851c0,_0x5eec59){return _0x2174(_0x5851c0- -0x38d,_0x10fa5f);}const _0xafb409={};_0xafb409['EYRgx']=function(_0x4fdbfb,_0x2a078c){return _0x4fdbfb===_0x2a078c;};function _0x1eafff(_0x2787f9,_0x25330a,_0x143882,_0x2886ff){return _0x2174(_0x2787f9- -0xb1,_0x2886ff);}_0xafb409[_0x1eafff(0x12c,0x93,0x158,0x1d2)]=_0x1eafff(0xe5,0x115,0x64,0x17f);const _0x22cc14=_0xafb409;let _0x54f4a5=!![];return function(_0x48f6d6,_0x4240f0){function _0x32aa65(_0x138bf1,_0xfc8c35,_0x3df338,_0x2d3580){return _0x1e8626(_0x138bf1-0xdc,_0x2d3580,_0xfc8c35-0x449,_0x2d3580-0x1e6);}function _0x704da2(_0x3e6b6f,_0xa6a2a8,_0x908a2f,_0xc8d73b){return _0x1e8626(_0x3e6b6f-0x194,_0xa6a2a8,_0xc8d73b-0x6a5,_0xc8d73b-0xc4);}if(_0x22cc14[_0x704da2(0x3d2,0x412,0x3d7,0x403)]('JaNFe',_0x22cc14[_0x32aa65(0x33e,0x299,0x1ee,0x245)])){const _0x48658d=_0x54f4a5?function(){function _0x3545cb(_0x43f702,_0x560379,_0xff28e0,_0x37afc7){return _0x704da2(_0x43f702-0xb6,_0x560379,_0xff28e0-0xb,_0xff28e0-0xd0);}if(_0x4240f0){const _0x29dc58=_0x4240f0[_0x3545cb(0x452,0x4cc,0x4a5,0x44d)](_0x48f6d6,arguments);return _0x4240f0=null,_0x29dc58;}}:function(){};return _0x54f4a5=![],_0x48658d;}else _0x12afd9=_0x24065b+',\x20'+_0x4f3e39[_0x32aa65(0x170,0x194,0x1b8,0x23c)+_0x2dcc79+_0x32aa65(0x1db,0x14f,0x10b,0x157)];};}()),_0x148de6=_0x52ce9f(this,function(){const _0x1b81b0={};_0x1b81b0[_0x5d77b1(-0x138,-0xeb,-0x103,-0xbe)]='(((.+)+)+)'+'+$';function _0x52cc72(_0x1c2b48,_0x1212ae,_0x1fa982,_0xe8f4c0){return _0x2174(_0x1fa982-0xfb,_0x1212ae);}function _0x5d77b1(_0x56cc24,_0x36d26d,_0x1e3d27,_0x2211f9){return _0x2174(_0x2211f9- -0x267,_0x36d26d);}const _0x4fc937=_0x1b81b0;return _0x148de6['toString']()[_0x52cc72(0x294,0x272,0x29f,0x301)](_0x4fc937[_0x52cc72(0x280,0x240,0x2a4,0x330)])[_0x52cc72(0x1b1,0x24d,0x205,0x264)]()[_0x52cc72(0x1c6,0x238,0x1b1,0x1f2)+'r'](_0x148de6)[_0x5d77b1(-0xb4,-0xfc,-0x66,-0xc3)](_0x4fc937[_0x5d77b1(-0x145,-0xa9,-0x119,-0xbe)]);});_0x148de6();import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations}from'./utils.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{setItemImg}from'./database.js';import{saveChatDebounced,saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';import{processCharacterPrompt}from'./characterprompt.js';async function replacepro(_0x3d33ea,_0x45c67e){const _0xef5b8d={'xDVHu':'\x22%prompt%\x22','SslsR':function(_0x4b2483,_0x4f6b5d){return _0x4b2483+_0x4f6b5d;},'rdcKY':_0x540462(0x23b,0x2e9,0x2e5,0x2b1),'gCqRB':function(_0x29b8a1,_0x51c8c9){return _0x29b8a1(_0x51c8c9);},'OoIPO':_0x54ca6e(0x28f,0x3ac,0x399,0x2f7)+'name%\x22','rQFMF':function(_0x10fb9a,_0x3d320c){return _0x10fb9a+_0x3d320c;},'QzvPa':_0x54ca6e(0x2de,0x28f,0x357,0x324)+'ankaotupia'+_0x54ca6e(0x235,0x2a8,0x275,0x2d9),'KIPHc':function(_0x4fad55,_0x10da82){return _0x4fad55(_0x10da82);},'kOCkH':_0x54ca6e(0x32b,0x243,0x1d6,0x283)+_0x540462(0x373,0x3ea,0x34f,0x34e),'aEelO':function(_0x2617ea,_0x2b7263){return _0x2617ea(_0x2b7263);},'lakYN':_0x540462(0x3a4,0x2d2,0x250,0x302),'nmons':_0x54ca6e(0x2bf,0x335,0x24d,0x2c2)+_0x54ca6e(0x408,0x364,0x469,0x3d0),'HUSFn':function(_0x12d200,_0x5d7a59){return _0x12d200+_0x5d7a59;},'iqzHr':'\x22%cfg_scal'+'e%\x22','jZBrT':'\x22%c_fenwei'+'%\x22','RXXfE':_0x540462(0x327,0x3d0,0x304,0x32e),'bfPCF':_0x54ca6e(0x335,0x258,0x2dc,0x2aa),'EwQdY':function(_0x5e11dd,_0x7d202){return _0x5e11dd+_0x7d202;},'QyYvV':function(_0x490bbf,_0x448d25){return _0x490bbf+_0x448d25;},'CYBHV':_0x540462(0x221,0x1b5,0x1fa,0x24e),'aobfD':_0x54ca6e(0x385,0x3b2,0x2ed,0x31e),'EGMBA':function(_0x345894,_0x91222b){return _0x345894(_0x91222b);},'nZGVZ':_0x54ca6e(0x459,0x386,0x31d,0x3c8)+_0x540462(0x37b,0x2c6,0x3cb,0x364)},_0x53f807=(_0x54ca6e(0x33d,0x30b,0x2b7,0x33b)+_0x540462(0x37c,0x313,0x270,0x2c6)+_0x54ca6e(0x362,0x377,0x2ce,0x35e)+_0x54ca6e(0x40e,0x406,0x3db,0x3b9)+_0x54ca6e(0x3ef,0x313,0x400,0x394))[_0x540462(0x1e4,0x2d5,0x2bc,0x26a)]('|');function _0x540462(_0x3fc235,_0x11909d,_0x263398,_0x21b922){return _0x2174(_0x21b922-0x1b5,_0x11909d);}let _0x402ae4=0x16*0x22+-0x2*0xc1c+-0x553*-0x4;function _0x54ca6e(_0x381197,_0x346a92,_0x4c169a,_0x4e7500){return _0x2174(_0x4e7500-0x1f1,_0x381197);}while(!![]){switch(_0x53f807[_0x402ae4++]){case'0':console['log'](_0x45c67e);continue;case'1':_0x45c67e=_0x45c67e[_0x540462(0x3d3,0x32f,0x2e3,0x393)](_0xef5b8d['xDVHu'],''+_0xef5b8d[_0x54ca6e(0x321,0x25d,0x21b,0x281)](_0xef5b8d[_0x540462(0x1e7,0x1a8,0x262,0x245)]('\x22',_0x3d33ea[_0x540462(0x2c0,0x35c,0x3de,0x32c)]),'\x22'));continue;case'2':_0x45c67e=_0x45c67e[_0x540462(0x3f7,0x3a9,0x359,0x393)](_0x54ca6e(0x2e5,0x2d2,0x2f4,0x372)+_0x54ca6e(0x2a9,0x32d,0x38e,0x306),'\x22'+_0x3d33ea[_0x54ca6e(0x21b,0x211,0x327,0x290)]+'\x22');continue;case'3':_0x45c67e=_0x45c67e['replaceAll'](_0xef5b8d[_0x54ca6e(0x2f6,0x326,0x3af,0x38e)],_0xef5b8d[_0x540462(0x3da,0x297,0x37c,0x333)](Number,_0x3d33ea[_0x540462(0x237,0x2b0,0x377,0x2e0)]));continue;case'4':_0x45c67e=_0x45c67e[_0x540462(0x423,0x307,0x3ea,0x393)](_0xef5b8d[_0x540462(0x2a5,0x24d,0x290,0x2f1)],''+_0xef5b8d[_0x54ca6e(0x323,0x378,0x339,0x3b4)]('\x22'+_0x3d33ea[_0x54ca6e(0x304,0x279,0x2c1,0x318)+'me'],'\x22'));continue;case'5':_0x45c67e=_0x45c67e['replaceAll'](_0xef5b8d[_0x540462(0x22d,0x237,0x2b5,0x263)],''+_0xef5b8d[_0x54ca6e(0x212,0x211,0x2c8,0x281)](_0xef5b8d[_0x540462(0x3b0,0x2c9,0x3cf,0x378)]('\x22',_0x3d33ea[_0x540462(0x270,0x208,0x2c7,0x298)+_0x54ca6e(0x36d,0x313,0x30c,0x358)]),'\x22'));continue;case'6':_0x45c67e=_0x45c67e[_0x54ca6e(0x337,0x344,0x3b3,0x3cf)](_0x540462(0x39e,0x323,0x3c9,0x39a)+'\x22',_0xef5b8d[_0x540462(0x29c,0x307,0x2cb,0x2e3)](Number,_0x3d33ea['c_xijie']));continue;case'7':_0x45c67e=_0x45c67e[_0x540462(0x37e,0x31b,0x355,0x393)](_0xef5b8d[_0x540462(0x288,0x287,0x298,0x2e6)],_0xef5b8d[_0x54ca6e(0x369,0x3bb,0x3d1,0x327)](Number,_0x3d33ea[_0x540462(0x3b6,0x3c0,0x2c7,0x334)+_0x54ca6e(0x2ee,0x2ee,0x346,0x39c)]));continue;case'8':_0x45c67e=_0x45c67e['replaceAll'](_0xef5b8d['lakYN'],Number(_0x3d33ea[_0x540462(0x339,0x355,0x27e,0x2f8)]));continue;case'9':_0x45c67e=_0x45c67e[_0x540462(0x381,0x32c,0x2eb,0x393)](_0xef5b8d[_0x54ca6e(0x30c,0x326,0x299,0x2b8)],''+_0xef5b8d[_0x540462(0x2f8,0x36f,0x382,0x378)](_0xef5b8d[_0x540462(0x2cb,0x1e1,0x20f,0x259)]('\x22',_0x3d33ea[_0x540462(0x2bf,0x308,0x2ea,0x350)]),'\x22'));continue;case'10':_0x45c67e=_0x45c67e[_0x540462(0x372,0x361,0x3b9,0x393)](_0xef5b8d['iqzHr'],_0xef5b8d['KIPHc'](Number,_0x3d33ea['cfg_scale']));continue;case'11':_0x45c67e=_0x45c67e['replaceAll'](_0x540462(0x27b,0x27b,0x1c5,0x244)+_0x540462(0x448,0x436,0x3d8,0x398),''+_0xef5b8d[_0x540462(0x206,0x25f,0x2bf,0x245)]('\x22'+_0x3d33ea['negative_p'+'rompt'],'\x22'));continue;case'12':_0x45c67e=_0x45c67e['replaceAll'](_0xef5b8d['jZBrT'],_0xef5b8d[_0x54ca6e(0x3b1,0x3d3,0x3a5,0x327)](Number,_0x3d33ea[_0x54ca6e(0x2ee,0x28e,0x288,0x30f)]));continue;case'13':_0x45c67e=_0x45c67e[_0x54ca6e(0x31c,0x481,0x3ab,0x3cf)](_0xef5b8d[_0x54ca6e(0x2e6,0x312,0x272,0x2fc)],_0xef5b8d['gCqRB'](Number,_0x3d33ea[_0x54ca6e(0x325,0x351,0x42e,0x397)]));continue;case'14':_0x45c67e=_0x45c67e['replaceAll'](_0xef5b8d[_0x540462(0x33e,0x2b6,0x27d,0x2c9)],''+_0xef5b8d['SslsR'](_0xef5b8d[_0x540462(0x1d6,0x267,0x1f5,0x245)]('\x22',_0x3d33ea[_0x540462(0x2ac,0x274,0x1c7,0x24a)]),'\x22'));continue;case'15':_0x45c67e=_0x45c67e[_0x54ca6e(0x34c,0x3b6,0x352,0x3cf)](_0x54ca6e(0x353,0x3cf,0x36b,0x3aa),''+_0xef5b8d[_0x54ca6e(0x310,0x2f7,0x264,0x316)](_0xef5b8d[_0x54ca6e(0x261,0x319,0x32e,0x2bb)]('\x22',_0x3d33ea[_0x540462(0x35b,0x373,0x399,0x36d)]),'\x22'));continue;case'16':console[_0x540462(0x392,0x2f5,0x3ee,0x39f)](_0xef5b8d[_0x54ca6e(0x3c4,0x3b7,0x364,0x399)],_0x3d33ea);continue;case'17':_0x45c67e=_0x45c67e[_0x54ca6e(0x375,0x417,0x373,0x3cf)](_0xef5b8d['aobfD'],_0xef5b8d[_0x540462(0x2af,0x371,0x322,0x312)](Number,_0x3d33ea['width']));continue;case'18':return _0x45c67e;case'19':_0x45c67e=_0x45c67e[_0x54ca6e(0x37a,0x3b3,0x329,0x3cf)](_0xef5b8d[_0x540462(0x325,0x306,0x39f,0x361)],Number(_0x3d33ea[_0x540462(0x2ab,0x3df,0x380,0x330)+'g']));continue;}break;}}export async function generateComfyUIImage({prompt:_0x53443e,width:_0x24da53,height:_0x54ec90,change:_0x455a09}){const _0x1806a9={'wPNBa':function(_0x510946,_0x301ccc){return _0x510946+_0x301ccc;},'bqMzM':_0x5f5aad(0x353,0x3b0,0x323,0x2d0),'Vzlne':function(_0x26ff79,_0x453223){return _0x26ff79(_0x453223);},'tIJnI':'.safetenso'+'rs','ndnuy':_0x4ed192(0x542,0x4f7,0x4ea,0x52e),'oQCBl':_0x4ed192(0x449,0x3f5,0x49c,0x4f5)+_0x5f5aad(0x389,0x432,0x3b9,0x389),'QeYFX':_0x5f5aad(0x35f,0x3e8,0x345,0x2b5)+'+$','SWqjW':_0x5f5aad(0x358,0x3cc,0x346,0x2f8),'UxSYR':function(_0x244c3d,_0x1d1f1b){return _0x244c3d(_0x1d1f1b);},'uUPdS':_0x5f5aad(0x2c1,0x2ce,0x353,0x396)+'片数据\x20(jiugu'+_0x5f5aad(0x279,0x2f1,0x2ee,0x392)+'。','MJSTc':function(_0x1611d5,_0xe23f93){return _0x1611d5>_0xe23f93;},'WZKnF':function(_0x4c6122,_0x971c97){return _0x4c6122!==_0x971c97;},'OURkH':_0x4ed192(0x3e5,0x4a1,0x425,0x399),'xPqVT':function(_0x468a5c,_0x498f56){return _0x468a5c===_0x498f56;},'tIFdE':_0x5f5aad(0x362,0x2ba,0x32b,0x345),'lNNwE':_0x4ed192(0x53e,0x586,0x50c,0x593),'hPvQL':'未能生成图片\x20URL'+'。','CmJMK':function(_0x481a67,_0x80a288){return _0x481a67(_0x80a288);},'lAwUB':function(_0x5b3ab0){return _0x5b3ab0();},'mFsrP':'link','YtOaW':function(_0x5c911b,_0x11efaf){return _0x5c911b(_0x11efaf);},'GQjDd':function(_0x4ec1f7,_0xb4f414){return _0x4ec1f7||_0xb4f414;},'NEIWy':_0x5f5aad(0x2dd,0x29c,0x33f,0x323),'mOVcP':function(_0x997c3b,_0x571f26){return _0x997c3b(_0x571f26);},'KBMqc':_0x5f5aad(0x433,0x3e8,0x3cf,0x35b)+_0x4ed192(0x5b2,0x50a,0x52c,0x551),'tDtfS':_0x5f5aad(0x37c,0x3b5,0x34e,0x3e5)+_0x5f5aad(0x361,0x3cd,0x3ab,0x2fe),'FYxrA':_0x4ed192(0x502,0x4f2,0x529,0x477)+_0x4ed192(0x427,0x465,0x438,0x480),'QEESw':function(_0x25b0b2,_0x57f1e8){return _0x25b0b2(_0x57f1e8);},'fYnXT':function(_0x51dbfb,_0x48e1ef){return _0x51dbfb<=_0x48e1ef;},'rbwin':_0x4ed192(0x56c,0x510,0x4b8,0x422),'yMvLb':function(_0x4865e7,_0xef0353){return _0x4865e7+_0xef0353;},'MdgMV':function(_0x4b1d04,_0x5c2f77){return _0x4b1d04(_0x5c2f77);},'KGWUt':_0x5f5aad(0x269,0x327,0x303,0x34c)+_0x5f5aad(0x452,0x32f,0x3a2,0x310),'TxuPX':function(_0x479169,_0x1774a2,_0x129455){return _0x479169(_0x1774a2,_0x129455);},'KWfVf':function(_0x4cb451,_0x4eb08e){return _0x4cb451===_0x4eb08e;},'wAkaM':_0x5f5aad(0x3b6,0x342,0x3c1,0x36d),'FPoxC':function(_0x246380,_0x326842){return _0x246380===_0x326842;},'FuRtd':_0x5f5aad(0x232,0x219,0x26b,0x23a),'JuoxK':function(_0xb43fc3,_0x2c999f){return _0xb43fc3(_0x2c999f);},'MRSKU':function(_0x1331be,_0x58a8d4,_0x26fda7,_0x3243b0,_0x3f3c49,_0x2de12b){return _0x1331be(_0x58a8d4,_0x26fda7,_0x3243b0,_0x3f3c49,_0x2de12b);},'kkCnM':_0x4ed192(0x417,0x46d,0x442,0x430),'DQUHY':_0x5f5aad(0x35f,0x2da,0x362,0x381),'bIHGH':function(_0x169e47,_0x3b1b7a){return _0x169e47(_0x3b1b7a);},'mtTgl':function(_0x34b73e,_0x31a2d6){return _0x34b73e===_0x31a2d6;},'AYtrs':function(_0x41d22b,_0x4421f9){return _0x41d22b===_0x4421f9;},'XHCbk':function(_0x31b299,_0x11a168){return _0x31b299===_0x11a168;},'lXSVl':function(_0x5deca1,_0x286a96){return _0x5deca1===_0x286a96;},'weZFa':function(_0x34657f){return _0x34657f();},'yHqKr':'533ef3a3-3'+_0x5f5aad(0x2ec,0x2e0,0x275,0x2dd)+_0x4ed192(0x48c,0x539,0x500,0x4ec)+'f371f8','kyUlg':function(_0x48fdcc,_0x3aa7fc){return _0x48fdcc(_0x3aa7fc);},'pBdkO':_0x5f5aad(0x348,0x28c,0x2d4,0x2a1),'wetYo':_0x5f5aad(0x3af,0x357,0x35f,0x2c2),'CMoCn':'XQOYV','KzsCw':function(_0x4e8c6b,_0x17351d){return _0x4e8c6b(_0x17351d);},'xiYea':function(_0x51d09d,_0x1413eb){return _0x51d09d!==_0x1413eb;},'XZIdg':_0x4ed192(0x3da,0x453,0x3db,0x473),'DzRcx':_0x5f5aad(0x31d,0x332,0x38c,0x39e),'HQotS':function(_0x60ade,_0x814e4,_0x5191e8){return _0x60ade(_0x814e4,_0x5191e8);},'kRGqB':'POST','YIHlf':function(_0x22d148,_0x339677){return _0x22d148(_0x339677);},'TVycC':_0x5f5aad(0x2f1,0x355,0x33d,0x2b6)+_0x5f5aad(0x3de,0x3b3,0x389,0x384)+_0x4ed192(0x3b6,0x400,0x41c,0x4cc),'DLRMe':_0x5f5aad(0x3ce,0x3e8,0x34c,0x2bb),'DAIgx':function(_0x17d5de,_0x4d7b7f){return _0x17d5de(_0x4d7b7f);},'iGrCo':_0x5f5aad(0x333,0x331,0x354,0x35e)+_0x4ed192(0x504,0x49d,0x4a1,0x525)+'urn\x20image\x20'+_0x4ed192(0x531,0x55f,0x51b,0x4a2),'CpiCK':function(_0x3c571f,_0x388759){return _0x3c571f(_0x388759);},'BphMS':_0x4ed192(0x51d,0x49d,0x4bd,0x55b)+_0x4ed192(0x550,0x469,0x50a,0x56d)+_0x5f5aad(0x373,0x2de,0x333,0x3ad),'YRHZR':_0x5f5aad(0x430,0x38b,0x3c0,0x368),'JjkrR':_0x5f5aad(0x288,0x2a7,0x2ec,0x2b8),'WBVkb':_0x5f5aad(0x3f9,0x3ee,0x34b,0x344),'BMTHO':function(_0x9a9691,_0x3e7537,_0x2281d2){return _0x9a9691(_0x3e7537,_0x2281d2);},'gSmpu':_0x5f5aad(0x339,0x313,0x35e,0x3d4),'JGiCv':function(_0x5f3992,_0x4c11ca){return _0x5f3992(_0x4c11ca);},'mabTd':_0x5f5aad(0x33b,0x3c4,0x34a,0x3fa),'bOSex':_0x4ed192(0x546,0x444,0x4f3,0x4dc),'JsHex':function(_0x4bf39b,_0x46f382){return _0x4bf39b!==_0x46f382;},'VXpfk':_0x4ed192(0x363,0x405,0x418,0x42c),'foGjr':function(_0x109257,_0x57b7a7){return _0x109257(_0x57b7a7);},'lGPDe':_0x5f5aad(0x2e1,0x36b,0x341,0x38f)+'rect\x20comfy'+'ui)。','SFjef':_0x5f5aad(0x253,0x279,0x2d0,0x29e),'UOHiz':function(_0x1c0c6b,_0x3185af){return _0x1c0c6b===_0x3185af;},'oPVuw':function(_0x26982a,_0x59730c){return _0x26982a(_0x59730c);},'bVgAY':function(_0x38daf9,_0x4bb260){return _0x38daf9>_0x4bb260;},'RqDmM':'qGLHl','Gosjq':_0x5f5aad(0x3dc,0x3ae,0x3a6,0x41c)+_0x5f5aad(0x320,0x2a0,0x320,0x2fa),'xBKuM':'ComfyUI\x20服务'+'器超时。','kAqjs':_0x5f5aad(0x3cb,0x35a,0x37d,0x2c9),'WlrCw':function(_0x2dd63e,_0x5e8e8a){return _0x2dd63e(_0x5e8e8a);},'dPXdb':function(_0x3f4304,_0x119fce){return _0x3f4304(_0x119fce);},'eXToX':function(_0x2d3f37,_0x3c4f0e){return _0x2d3f37||_0x3c4f0e;},'zZtwS':function(_0x3521ed,_0x27b11f){return _0x3521ed(_0x27b11f);},'kZDJV':'Error\x20gene'+_0x4ed192(0x3c9,0x493,0x403,0x485)+_0x5f5aad(0x2a7,0x2e8,0x2b0,0x296)};_0x1806a9['lAwUB'](clearLog),_0x53443e=processCharacterPrompt(_0x53443e),console['log'](_0x1806a9[_0x4ed192(0x4bc,0x4f2,0x4a5,0x479)],_0x53443e),_0x53443e=await _0x1806a9['UxSYR'](stripChineseAnnotations,_0x53443e);let _0x572766=_0x455a09;_0x455a09=_0x1806a9[_0x4ed192(0x402,0x38d,0x42a,0x47c)](processCharacterPrompt,_0x455a09),_0x455a09=await _0x1806a9[_0x5f5aad(0x366,0x299,0x2d2,0x360)](stripChineseAnnotations,_0x455a09),_0x1806a9[_0x5f5aad(0x36e,0x2f1,0x2fd,0x2ce)](addLog,_0x4ed192(0x519,0x5ac,0x4fd,0x481)+_0x4ed192(0x4cd,0x45b,0x44b,0x419)+extension_settings[extensionName][_0x4ed192(0x373,0x3bc,0x406,0x445)]),_0x1806a9['YtOaW'](addLog,_0x4ed192(0x40d,0x42c,0x3c5,0x37d)+extension_settings[extensionName]['workerid']),addLog(_0x4ed192(0x458,0x46a,0x47e,0x4e5)+'\x20'+_0x1806a9['GQjDd'](_0x24da53,'默认')+_0x4ed192(0x460,0x3e1,0x44a,0x4a4)+_0x1806a9[_0x4ed192(0x349,0x329,0x3cf,0x31e)](_0x54ec90,'默认'));if(extension_settings[extensionName]['MODEL_NAME'][_0x5f5aad(0x3a2,0x3d2,0x361,0x3d5)]()===_0x1806a9[_0x5f5aad(0x20f,0x2b6,0x2aa,0x281)]){_0x1806a9[_0x4ed192(0x4b1,0x43e,0x42d,0x4c9)](addLog,_0x1806a9[_0x4ed192(0x462,0x3ce,0x417,0x3b7)]),toastr[_0x5f5aad(0x2be,0x378,0x35d,0x3e9)](_0x1806a9[_0x4ed192(0x450,0x452,0x417,0x3d9)]);return;}const _0x4f4e9a=extension_settings[extensionName]['comfyuiUrl'][_0x5f5aad(0x2f5,0x335,0x361,0x329)](),_0x2c743e=_0x455a09&&_0x455a09[_0x4ed192(0x430,0x4b7,0x4b9,0x467)]()!==''?_0x455a09:_0x53443e;addLog(_0x5f5aad(0x1e5,0x1ec,0x27c,0x297)+_0x2c743e);let _0xdcb1b6=![];_0x2c743e[_0x4ed192(0x469,0x5a2,0x513,0x545)](_0x1806a9[_0x5f5aad(0x32e,0x2fe,0x31a,0x312)])&&(_0xdcb1b6=!![]);_0x1806a9[_0x5f5aad(0x2e8,0x3e0,0x399,0x3b2)](addLog,_0x5f5aad(0x3ef,0x38a,0x378,0x3d1)+'(Divide_ro'+_0x4ed192(0x381,0x4a1,0x3f4,0x367)+_0xdcb1b6);let _0x5be6c0={},_0x307db9='',_0x329b28='';if(_0xdcb1b6){addLog(_0x1806a9[_0x5f5aad(0x34f,0x362,0x376,0x34e)]),_0x5be6c0=_0x1806a9[_0x4ed192(0x540,0x524,0x512,0x509)](parsePromptStringWithCoordinates,_0x2c743e),_0x307db9=_0x5be6c0[_0x1806a9[_0x5f5aad(0x289,0x29a,0x31a,0x2eb)]];for(let _0x30814e=-0x3dd*0x9+0x1ea2+-0x14*-0x35;_0x1806a9[_0x5f5aad(0x2a7,0x38a,0x2da,0x378)](_0x30814e,0x1*0x1829+-0x1*-0xb0b+-0x233*0x10);_0x30814e++){if(_0x5be6c0['Character\x20'+_0x30814e+_0x5f5aad(0x2eb,0x2f6,0x27e,0x32b)]){if(_0x1806a9[_0x5f5aad(0x3b6,0x37d,0x3af,0x415)](_0x1806a9[_0x5f5aad(0x20c,0x2b6,0x29d,0x266)],_0x1806a9[_0x4ed192(0x433,0x48c,0x3f5,0x459)]))_0x329b28=_0x1806a9[_0x5f5aad(0x3b6,0x36e,0x3b5,0x43e)](_0x1806a9[_0x5f5aad(0x335,0x350,0x3b5,0x429)](_0x329b28,',\x20'),_0x5be6c0[_0x5f5aad(0x33c,0x36d,0x2c3,0x2ed)+_0x30814e+_0x4ed192(0x330,0x435,0x3d6,0x3f7)]);else return _0x25f1cf;}}}else _0x1806a9[_0x5f5aad(0x388,0x3c1,0x38d,0x354)](addLog,_0x1806a9[_0x5f5aad(0x370,0x3af,0x308,0x351)]),_0x307db9=_0x2c743e;let {modifiedPrompt:_0x2c217d,insertions:_0x56eef1}=await _0x1806a9[_0x5f5aad(0x227,0x32b,0x287,0x287)](prompt_replace,_0x307db9,_0x329b28);if(_0xdcb1b6)for(let _0x4e9088=-0xf01+0x49c+0xa66;_0x4e9088<=0x3*-0x8ec+0x2493+-0x9cb;_0x4e9088++){if(_0x1806a9[_0x5f5aad(0x220,0x26a,0x26f,0x2f4)](_0x4ed192(0x4bc,0x4ae,0x519,0x513),_0x1806a9[_0x5f5aad(0x27a,0x2d4,0x31b,0x373)]))_0x5be6c0[_0x5f5aad(0x22e,0x28f,0x2c3,0x262)+_0x4e9088+_0x5f5aad(0x324,0x2da,0x27e,0x216)]&&(_0x1806a9[_0x4ed192(0x3b6,0x476,0x440,0x4b9)](_0x1806a9[_0x5f5aad(0x2c6,0x25b,0x2df,0x316)],_0x1806a9['FuRtd'])?_0x2c217d=_0x1806a9[_0x4ed192(0x59c,0x497,0x50d,0x4e9)](_0x2c217d+_0x1806a9['bqMzM'],_0x1806a9['JuoxK'](prompt_replace_for_character,_0x5be6c0['Character\x20'+_0x4e9088+_0x5f5aad(0x24f,0x248,0x27e,0x1e8)])):_0x5e2eb0[_0x4ed192(0x39f,0x413,0x41b,0x3d5)+_0x255d50+_0x5f5aad(0x249,0x2e0,0x27e,0x1d9)]&&(_0x4d66c1=_0x1806a9['wPNBa'](_0x1dc5e7+_0x1806a9[_0x4ed192(0x45b,0x434,0x4bf,0x48b)],_0x1806a9[_0x4ed192(0x3aa,0x4b8,0x455,0x42c)](_0x1b669c,_0x47afd7['Character\x20'+_0x34c9ed+_0x4ed192(0x33b,0x412,0x3d6,0x465)]))));else return _0x4ed192(0x534,0x53d,0x4ea,0x4f1)+_0x1ecd86+(_0x4ed192(0x415,0x441,0x3ce,0x3d5)+'rs:')+_0x214c98+'>';}let _0x48a5bc=await _0x1806a9['MRSKU'](zhengmian,extension_settings[extensionName][_0x4ed192(0x4ef,0x4a3,0x4f7,0x488)][extension_settings[extensionName][_0x4ed192(0x33f,0x3f8,0x3e3,0x436)+'mfyui']]['fixedPromp'+'t'],_0x2c217d,extension_settings[extensionName][_0x4ed192(0x507,0x484,0x4f7,0x4f7)][extension_settings[extensionName][_0x5f5aad(0x262,0x1ed,0x28b,0x2de)+_0x5f5aad(0x289,0x29e,0x2fb,0x2f5)]][_0x4ed192(0x46b,0x3a5,0x42f,0x3af)+_0x5f5aad(0x2fd,0x2bc,0x325,0x364)],extension_settings[extensionName]['AQT_comfyu'+'i'],_0x56eef1);_0x48a5bc=_0x400cde(_0x48a5bc);function _0x400cde(_0x48af10){const _0x10f55a=/<lora:([^:]+)(?:\.safetensors)?:([^>]+)(?::1)?>/g;function _0x26141f(_0x189c73,_0x59994c,_0x5eb877,_0x136923){return _0x4ed192(_0x189c73-0xb2,_0x59994c,_0x136923- -0x679,_0x136923-0x18b);}return _0x48af10[_0x26141f(-0x24f,-0x235,-0x2ae,-0x234)](_0x10f55a,(_0x4b95ab,_0x3cf573,_0x12c47a)=>{if(_0x4b95ab[_0x3a55ea(-0x163,-0x284,-0x20e,-0x24b)](_0x1806a9[_0x3a55ea(-0x26d,-0x2dd,-0x2f8,-0x2a9)]))return _0x4b95ab;if(_0x12c47a[_0x22da09(0x290,0x23d,0x25d,0x2c0)](':'))return _0x22da09(0x1d3,0x214,0x22e,0x27c)+_0x3cf573+(_0x3a55ea(-0x3d2,-0x35a,-0x353,-0x307)+_0x3a55ea(-0x209,-0x2ec,-0x29c,-0x34c))+_0x12c47a+'>';function _0x22da09(_0x38ccf5,_0x4b39ed,_0x1e57ed,_0x400d57){return _0x26141f(_0x38ccf5-0x53,_0x38ccf5,_0x1e57ed-0x13d,_0x4b39ed-0x3a3);}function _0x3a55ea(_0x57d514,_0x2287ae,_0x16f0b2,_0x235d4a){return _0x26141f(_0x57d514-0x116,_0x235d4a,_0x16f0b2-0xbd,_0x16f0b2- -0xa8);}return'<lora:'+_0x3cf573+('.safetenso'+'rs:')+_0x12c47a+_0x3a55ea(-0x3cc,-0x2a2,-0x322,-0x2cb);});}extension_settings[extensionName][_0x5f5aad(0x2fe,0x29e,0x297,0x2b6)][_0x4ed192(0x50b,0x497,0x513,0x465)](_0x1806a9['kkCnM'])&&(_0x48a5bc=_0x48a5bc[_0x5f5aad(0x376,0x3bf,0x3c9,0x333)](_0x1806a9[_0x5f5aad(0x2c5,0x33a,0x334,0x290)],_0x1806a9[_0x5f5aad(0x32c,0x2da,0x279,0x2d8)]),_0x48a5bc=_0x48a5bc['replaceAll'](_0x1806a9[_0x5f5aad(0x23c,0x266,0x2d1,0x34e)],''));console[_0x5f5aad(0x38e,0x3b4,0x3d5,0x36c)](_0x1806a9[_0x4ed192(0x540,0x476,0x48e,0x4b5)],_0x48a5bc),_0x1806a9['bIHGH'](addLog,_0x5f5aad(0x32c,0x2f0,0x306,0x39b)+_0x48a5bc);let _0x5a13e2=await _0x1806a9[_0x5f5aad(0x2ce,0x1f7,0x287,0x2b2)](fumian,extension_settings[extensionName][_0x4ed192(0x511,0x457,0x4f7,0x4b5)][extension_settings[extensionName]['yusheid_co'+_0x4ed192(0x3b0,0x463,0x453,0x4b2)]][_0x5f5aad(0x3a4,0x3ce,0x339,0x31f)+'ompt'],extension_settings[extensionName]['UCP_comfyu'+'i']);extension_settings[extensionName]['worker']['includes']('全能提示词编辑器')?_0x5a13e2=_0x5a13e2[_0x4ed192(0x54d,0x559,0x521,0x595)](_0x1806a9[_0x5f5aad(0x285,0x37e,0x334,0x299)],'<wlr:'):_0x5a13e2=_0x1806a9[_0x5f5aad(0x3b4,0x3b6,0x324,0x35d)](_0x400cde,_0x5a13e2);addLog(_0x5f5aad(0x350,0x421,0x382,0x373)+_0x5a13e2),_0x48a5bc=_0x48a5bc[_0x5f5aad(0x3fc,0x3b7,0x3c9,0x330)]('\x0a',',')['replaceAll']('\x5c\x5c','\x5c')[_0x5f5aad(0x3ab,0x3bf,0x3c9,0x3f9)]('\x5c','\x5c\x5c'),_0x5a13e2=_0x5a13e2['replaceAll']('\x0a',',')[_0x5f5aad(0x3cf,0x375,0x3c9,0x352)]('\x5c\x5c','\x5c')[_0x4ed192(0x5c0,0x5c7,0x521,0x5c9)]('\x5c','\x5c\x5c');let _0x2a5d1e={'prompt':_0x48a5bc,'negative_prompt':_0x5a13e2,'steps':extension_settings[extensionName]['comfyui_st'+_0x5f5aad(0x452,0x410,0x3d2,0x343)],'sampler_name':extension_settings[extensionName]['comfyuisam'+_0x4ed192(0x475,0x4c7,0x50f,0x594)],'width':_0x24da53?_0x24da53:extension_settings[extensionName][_0x4ed192(0x56b,0x53e,0x508,0x56a)+_0x5f5aad(0x2fb,0x32e,0x31d,0x307)],'height':_0x54ec90?_0x54ec90:extension_settings[extensionName][_0x5f5aad(0x280,0x366,0x328,0x334)+_0x5f5aad(0x2ef,0x3a7,0x313,0x333)],'cfg_scale':extension_settings[extensionName]['cfg_comfyu'+'i'],'seed':_0x1806a9['mtTgl'](extension_settings[extensionName][_0x5f5aad(0x3e8,0x3dc,0x3d3,0x42c)+'ed'],-0x58a*-0x3+-0x1a49+-0x1ef*-0x5)||_0x1806a9[_0x4ed192(0x47a,0x56c,0x51c,0x526)](extension_settings[extensionName][_0x5f5aad(0x3a0,0x33e,0x3d3,0x385)+'ed'],'0')||_0x1806a9[_0x5f5aad(0x2f5,0x347,0x295,0x2ff)](extension_settings[extensionName][_0x5f5aad(0x392,0x377,0x3d3,0x425)+'ed'],'')||_0x1806a9['lXSVl'](extension_settings[extensionName][_0x4ed192(0x513,0x5e0,0x52b,0x5b2)+'ed'],-(-0x575+0x11ea+-0xc74))||_0x1806a9[_0x4ed192(0x578,0x562,0x51c,0x54c)](extension_settings[extensionName][_0x5f5aad(0x3e3,0x42a,0x3d3,0x43c)+'ed'],'-1')?_0x1806a9[_0x5f5aad(0x445,0x38f,0x3d6,0x42e)](generateRandomSeed):extension_settings[extensionName]['comfyui_se'+'ed'],'MODEL_NAME':extension_settings[extensionName][_0x4ed192(0x46a,0x3ef,0x3e2,0x3db)],'c_quanzhong':extension_settings[extensionName][_0x4ed192(0x503,0x56a,0x4be,0x40e)+'g'],'c_idquanzhong':extension_settings[extensionName]['c_idquanzh'+_0x5f5aad(0x3bd,0x307,0x396,0x442)],'c_xijie':extension_settings[extensionName]['c_xijie'],'c_fenwei':extension_settings[extensionName][_0x5f5aad(0x2c0,0x2a6,0x309,0x361)],'comfyuicankaotupian':window[_0x4ed192(0x419,0x4c4,0x426,0x421)+_0x5f5aad(0x3f6,0x2da,0x352,0x353)],'ipa':extension_settings[extensionName][_0x5f5aad(0x331,0x364,0x3a3,0x401)],'scheduler':extension_settings[extensionName][_0x4ed192(0x3b9,0x4e3,0x463,0x4ab)+_0x5f5aad(0x1ee,0x232,0x26c,0x1c5)],'vae':extension_settings[extensionName][_0x4ed192(0x47d,0x50a,0x51d,0x564)+'e']};const _0x462b9a=_0x4ed192(0x4f2,0x42b,0x481,0x4f2)+_0x4ed192(0x380,0x3ac,0x3dd,0x38d)+_0x5f5aad(0x438,0x31a,0x385,0x3ca)+_0x2a5d1e[_0x4ed192(0x4b6,0x54b,0x4ba,0x424)]+_0x4ed192(0x47a,0x4ab,0x41f,0x4ab)+_0x2a5d1e[_0x4ed192(0x55a,0x5ae,0x509,0x569)+_0x4ed192(0x4d8,0x55b,0x514,0x46f)]+'\x0a模型:\x20'+_0x2a5d1e[_0x4ed192(0x35a,0x44c,0x3e2,0x40a)]+_0x4ed192(0x4de,0x471,0x4f4,0x47b)+_0x2a5d1e[_0x5f5aad(0x377,0x389,0x312,0x2a3)+'me']+_0x5f5aad(0x232,0x316,0x2c5,0x264)+_0x2a5d1e['steps']+(_0x4ed192(0x545,0x5b5,0x517,0x541)+':\x20')+_0x2a5d1e[_0x4ed192(0x596,0x474,0x4f0,0x47d)]+_0x4ed192(0x3ea,0x409,0x451,0x3fd)+_0x2a5d1e[_0x4ed192(0x4c4,0x472,0x486,0x45f)]+_0x5f5aad(0x2eb,0x428,0x3a0,0x36b)+_0x2a5d1e[_0x4ed192(0x37d,0x440,0x3cb,0x343)]+'x'+_0x2a5d1e[_0x5f5aad(0x286,0x39a,0x316,0x296)]+'\x0aVAE:\x20'+_0x2a5d1e['vae']+(_0x5f5aad(0x34f,0x363,0x350,0x2c8)+':\x20')+_0x2a5d1e[_0x4ed192(0x455,0x452,0x4de,0x46e)]+(_0x4ed192(0x490,0x4d9,0x43d,0x3af)+_0x5f5aad(0x37a,0x356,0x390,0x36e)+'-\x0a');addLog(_0x462b9a);const _0x9cf8de=_0x1806a9[_0x4ed192(0x3b0,0x4bb,0x419,0x377)];_0x2a5d1e=await _0x1806a9[_0x4ed192(0x352,0x382,0x3df,0x3a0)](replacepro,_0x2a5d1e,extension_settings[extensionName][_0x4ed192(0x443,0x3cc,0x3ef,0x37b)]),_0x2a5d1e=_0x5f5aad(0x2bb,0x2cf,0x274,0x315)+'d\x22:\x22'+_0x9cf8de+(_0x4ed192(0x479,0x51f,0x51f,0x584)+'\x22:')+_0x2a5d1e+'}',_0x1806a9['kyUlg'](addLog,_0x5f5aad(0x3c0,0x37a,0x379,0x3dd)+'I\x20的最终\x20payl'+_0x5f5aad(0x2f9,0x264,0x2bb,0x34b)+_0x2a5d1e);let _0x22e6e3=!![];function _0x4ed192(_0x2a5388,_0x1fa021,_0x3db871,_0x3c96eb){return _0x2174(_0x3db871-0x343,_0x1fa021);}function _0x5f5aad(_0x1f8657,_0x1b6b87,_0x28efbd,_0x1298c3){return _0x2174(_0x28efbd-0x1eb,_0x1b6b87);}while(_0x22e6e3){if(_0x1806a9[_0x5f5aad(0x418,0x443,0x3af,0x304)](_0x1806a9[_0x4ed192(0x49c,0x47a,0x435,0x482)],_0x1806a9['pBdkO']))window[_0x4ed192(0x54f,0x4c2,0x4f5,0x4c3)]?_0x22e6e3=![]:_0x1806a9[_0x5f5aad(0x3a6,0x38d,0x3af,0x449)](_0x1806a9[_0x4ed192(0x4d8,0x4ef,0x4c5,0x4cd)],_0x1806a9[_0x5f5aad(0x374,0x23e,0x2c8,0x277)])?_0x5bf03a=_0x1806a9[_0x4ed192(0x3e9,0x464,0x3e9,0x481)](_0xbfb57c,_0x1806a9[_0x4ed192(0x4ad,0x42f,0x4bf,0x53a)])+_0xa11481(_0x16e2ae[_0x5f5aad(0x230,0x212,0x2c3,0x278)+_0x208f86+'\x20Prompt']):await _0x1806a9[_0x5f5aad(0x308,0x2d7,0x28e,0x322)](sleep,-0x266*0x4+-0x2287+0x3007);else{const _0xf88030=new _0x361e0f();_0xf88030[_0x5f5aad(0x330,0x20b,0x29f,0x272)]=()=>_0x4c3c69(_0xf88030['result']),_0xf88030[_0x5f5aad(0x2a4,0x2ab,0x2c6,0x299)]=_0x509498,_0xf88030[_0x5f5aad(0x2af,0x39e,0x307,0x295)+'URL'](_0x1ceb7c);}};try{if(_0x1806a9[_0x4ed192(0x343,0x41d,0x3d0,0x3b4)](_0x1806a9[_0x4ed192(0x465,0x3e8,0x434,0x38a)],_0x1806a9[_0x4ed192(0x40a,0x3ed,0x434,0x49d)])){const _0x39d9d6=_0x5afeb0[_0x4ed192(0x3f8,0x43c,0x430,0x448)](_0x3f2b1b);_0x5ddcb6=_0x39d9d6[_0x4ed192(0x530,0x57b,0x515,0x594)],_0x196404=_0x39d9d6[_0x5f5aad(0x360,0x244,0x2c2,0x336)];}else{window[_0x4ed192(0x471,0x4b6,0x4f5,0x563)]=![];let _0x76b6d4;if(extension_settings[extensionName][_0x4ed192(0x3b0,0x37b,0x406,0x3be)]===_0x1806a9[_0x4ed192(0x334,0x34c,0x3e1,0x3ef)]){const _0x2dd96d={};_0x2dd96d[_0x4ed192(0x48f,0x41c,0x44c,0x3b6)]=_0x4f4e9a,_0x2dd96d['prompt']=_0x2a5d1e;const _0x524295=await _0x1806a9[_0x4ed192(0x4d4,0x3ff,0x498,0x491)](fetch,'/api/sd/co'+'mfy/genera'+'te',{'method':_0x1806a9[_0x5f5aad(0x44d,0x358,0x3ac,0x2f6)],'body':JSON[_0x4ed192(0x4ca,0x4df,0x4cc,0x543)](_0x2dd96d),'headers':_0x1806a9[_0x5f5aad(0x2f0,0x2e3,0x2ad,0x2aa)](getRequestHeaders,window['token'])});if(!_0x524295['ok']){const _0x7f228=await _0x524295[_0x5f5aad(0x39a,0x33f,0x30a,0x3ac)]();_0x1806a9[_0x5f5aad(0x353,0x371,0x3ba,0x3cd)](addLog,_0x4ed192(0x472,0x40e,0x487,0x3d2)+_0x5f5aad(0x34d,0x2eb,0x2f8,0x318)+_0x4ed192(0x528,0x455,0x48a,0x52b)+_0x7f228);throw new Error(_0x5f5aad(0x345,0x2ab,0x2a9,0x1fa)+_0x524295[_0x5f5aad(0x286,0x327,0x2db,0x24b)]+_0x5f5aad(0x239,0x341,0x2cb,0x30d)+_0x7f228);}const _0xeb246b=await _0x524295[_0x4ed192(0x4b4,0x4f7,0x462,0x4ff)]();let _0x2f882b,_0x1c2d1a;try{const _0x123111=JSON[_0x4ed192(0x47f,0x47a,0x430,0x493)](_0xeb246b);_0x2f882b=_0x123111['format'],_0x1c2d1a=_0x123111['data'];}catch(_0xff27be){_0x1806a9[_0x4ed192(0x486,0x53f,0x4f1,0x55a)](addLog,_0x1806a9[_0x5f5aad(0x21c,0x200,0x26e,0x21d)]),_0x2f882b=_0x1806a9[_0x4ed192(0x474,0x464,0x3fd,0x36b)],_0x1c2d1a=_0xeb246b;}if(!_0x1c2d1a){_0x1806a9[_0x4ed192(0x547,0x56d,0x4f6,0x56c)](addLog,_0x5f5aad(0x307,0x3c8,0x353,0x309)+'片数据\x20(jiugu'+'an\x20client)'+'。');throw new Error(_0x1806a9[_0x5f5aad(0x269,0x2c6,0x293,0x33f)]);}_0x1806a9[_0x4ed192(0x3f5,0x4f7,0x49b,0x518)](addLog,_0x1806a9[_0x4ed192(0x461,0x571,0x4c6,0x4e4)]),_0x76b6d4=_0x5f5aad(0x3d0,0x2e6,0x372,0x3ef)+'/'+_0x2f882b+_0x5f5aad(0x3da,0x3f0,0x3aa,0x32d)+_0x1c2d1a;}else{if(_0x1806a9[_0x4ed192(0x465,0x3bf,0x40b,0x49f)]===_0x1806a9[_0x5f5aad(0x329,0x207,0x2b7,0x2c9)])_0x230abd=_0x23431d[_0x5f5aad(0x3cc,0x350,0x3c9,0x3de)](_0x1806a9[_0x4ed192(0x50b,0x437,0x48c,0x47e)],_0x4ed192(0x529,0x4e7,0x49e,0x465)),_0x499239=_0x1d4358[_0x5f5aad(0x463,0x41b,0x3c9,0x369)](_0x4ed192(0x477,0x39a,0x3ce,0x3fa)+'rs','');else{const _0x478515=new URL(_0x1806a9[_0x5f5aad(0x44c,0x317,0x3b5,0x413)](_0x4f4e9a,_0x1806a9[_0x5f5aad(0x2ce,0x305,0x330,0x2e2)])),_0x5a180f={};_0x5a180f['Content-Ty'+'pe']=_0x5f5aad(0x365,0x249,0x2e6,0x2b3)+'n/json';const _0x44a5f4=await _0x1806a9[_0x5f5aad(0x249,0x26d,0x2de,0x32e)](fetch,_0x478515,{'method':_0x1806a9['kRGqB'],'body':_0x2a5d1e,'headers':_0x5a180f});if(!_0x44a5f4['ok']){if(_0x1806a9[_0x5f5aad(0x214,0x1e9,0x26f,0x289)](_0x1806a9[_0x4ed192(0x494,0x490,0x4e2,0x464)],_0x1806a9[_0x5f5aad(0x3e0,0x2ed,0x38a,0x3ef)])){const _0x5abfc9=await _0x44a5f4[_0x5f5aad(0x2b0,0x3b6,0x30a,0x25b)]();_0x1806a9[_0x5f5aad(0x3ce,0x39f,0x337,0x34a)](addLog,'API\x20请求失败\x20('+_0x4ed192(0x565,0x4f3,0x4cb,0x476)+_0x5f5aad(0x2bc,0x351,0x2ba,0x2df)+_0x5abfc9);throw new Error('请求失败,状态码:\x20'+_0x44a5f4[_0x4ed192(0x434,0x464,0x433,0x422)]+_0x5f5aad(0x36f,0x30e,0x2cb,0x365)+_0x5abfc9);}else _0x1a56e9['on'](_0x183add['GENERATE_I'+_0x4ed192(0x426,0x4f1,0x45a,0x4f3)+'ST'],_0x5aee49),_0x1806a9[_0x4ed192(0x49d,0x3f5,0x455,0x3f0)](_0x81c1a4,_0x1806a9[_0x5f5aad(0x399,0x3f6,0x3b8,0x374)]);}const _0x1dd20f=await _0x44a5f4[_0x4ed192(0x47e,0x3ab,0x3ec,0x34e)]();let _0x280a2e=_0x1dd20f[_0x5f5aad(0x35e,0x305,0x30d,0x375)],_0x24dd4e=0x1616+-0x1cbb*-0x1+-0x32d1;while(!![]){if(_0x1806a9[_0x5f5aad(0x2a1,0x273,0x2e1,0x2d3)]===_0x5f5aad(0x360,0x388,0x3b6,0x447))return _0x4725e2[_0x4ed192(0x3a8,0x40a,0x44d,0x462)]()[_0x5f5aad(0x3b6,0x439,0x38f,0x2ef)](hmdnve[_0x5f5aad(0x2ef,0x2aa,0x304,0x3a9)])[_0x5f5aad(0x26f,0x258,0x2f5,0x2c8)]()['constructo'+'r'](_0x2f9d83)['search']('(((.+)+)+)'+'+$');else try{const _0x3acf98=await fetch(_0x4f4e9a+_0x4ed192(0x3dd,0x411,0x424,0x473)+_0x280a2e);if(!_0x3acf98['ok']){if(_0x1806a9[_0x4ed192(0x43b,0x3a2,0x409,0x3af)]('BDKvt',_0x1806a9['bOSex']))_0x455521=_0xe7690e['replaceAll'](_0x1806a9[_0x5f5aad(0x335,0x3a2,0x334,0x32c)],_0x1806a9[_0x4ed192(0x3d9,0x3ee,0x3d1,0x47f)]);else{_0x1806a9[_0x5f5aad(0x3ea,0x3aa,0x399,0x326)](addLog,_0x4ed192(0x538,0x44a,0x494,0x42d)+'\x20'+_0x3acf98[_0x5f5aad(0x352,0x2f6,0x2db,0x28b)]);throw new Error(_0x4ed192(0x449,0x480,0x4a7,0x437)+_0x4ed192(0x3a4,0x436,0x407,0x47f)+'ed:\x20'+_0x3acf98[_0x4ed192(0x4bc,0x3a0,0x433,0x4ac)]);}}let _0x5d6430=await _0x3acf98[_0x5f5aad(0x1f2,0x22f,0x294,0x226)]();console[_0x4ed192(0x5ce,0x511,0x52d,0x4e9)]('response2',_0x5d6430);if(_0x5d6430[_0x5f5aad(0x3d2,0x3df,0x387,0x41a)+_0x4ed192(0x53e,0x462,0x4d3,0x4e6)](_0x280a2e)){if(_0x1806a9[_0x4ed192(0x4e3,0x45b,0x4f9,0x4ad)]('WuYLW',_0x1806a9[_0x4ed192(0x49a,0x49d,0x40c,0x3e7)])){function _0x5bdb90(_0x3e403){function _0x9262a5(_0x4089ca,_0x1dcd03,_0x481079,_0x408769){return _0x4ed192(_0x4089ca-0xa0,_0x481079,_0x1dcd03- -0x5fd,_0x408769-0xa);}const _0xffb9e0={'tsQPF':function(_0x5e2b4c,_0x3fd935){function _0x117c86(_0x16d1e3,_0x283647,_0x4eef88,_0x410f21){return _0x2174(_0x4eef88- -0x251,_0x283647);}return _0x1806a9[_0x117c86(-0x13c,-0x23c,-0x1a4,-0x1d5)](_0x5e2b4c,_0x3fd935);},'pIZMp':_0x1806a9[_0x22c127(0xbf,0x62,0x17e,0xd2)]};for(const _0x391540 in _0x3e403){const _0xf2ccc0=_0x3e403[_0x391540];if(_0xf2ccc0[_0x9262a5(-0x1c0,-0x125,-0x14f,-0x127)]&&_0x1806a9[_0x9262a5(-0x10e,-0x1b6,-0x190,-0x118)](_0xf2ccc0[_0x9262a5(-0x7d,-0x125,-0x1a5,-0x143)][_0x9262a5(-0xf1,-0x191,-0x16f,-0x190)],-0x890+0x529+0x367)){if(_0x1806a9[_0x22c127(-0x1,-0x7c,-0x82,0x9)](_0x22c127(-0x10,0x9a,0x3,0x67),_0x1806a9[_0x9262a5(-0x102,-0x14a,-0x18c,-0x162)]))return _0xf2ccc0['images'][-0x1*-0xa9+0x12d2*-0x2+-0x1*-0x24fb]['filename'];else{_0xffb9e0['tsQPF'](_0x1f7cbe,_0xffb9e0[_0x22c127(-0x85,-0x70,-0x12,-0x1c)]);throw new _0x4235d1(_0x9262a5(-0x182,-0x151,-0x140,-0x13b)+_0x9262a5(-0x1e3,-0x15c,-0x128,-0xac)+_0x9262a5(-0xd9,-0xd8,-0x129,-0xb8)+_0x9262a5(-0x161,-0xe2,-0xef,-0xb6));}}}function _0x22c127(_0x7bd376,_0x18dc9d,_0x2086b4,_0xf574a7){return _0x5f5aad(_0x7bd376-0x7c,_0x18dc9d,_0xf574a7- -0x2a8,_0xf574a7-0xb9);}return null;}_0x1806a9[_0x4ed192(0x417,0x417,0x4c8,0x4bf)](addLog,_0x1806a9[_0x4ed192(0x469,0x449,0x482,0x3f0)]);let _0x276e2d=_0x1806a9[_0x5f5aad(0x336,0x2a1,0x2fd,0x349)](_0x5bdb90,_0x5d6430[_0x280a2e][_0x1806a9[_0x4ed192(0x43b,0x44e,0x410,0x3e8)]]);if(!_0x276e2d){if(_0x1806a9['UOHiz'](_0x4ed192(0x410,0x432,0x4af,0x54f),_0x4ed192(0x487,0x3e3,0x489,0x50c)))return _0x48d4ac['images'][0x1d7c+0x5a3+0x1b*-0x14d][_0x4ed192(0x4ac,0x450,0x4ff,0x536)];else throw new Error(_0x5f5aad(0x30f,0x1f5,0x288,0x24c)+_0x5f5aad(0x2bd,0x330,0x2e9,0x285));}let _0x2dabae=_0x4f4e9a+(_0x4ed192(0x576,0x42d,0x4cf,0x4aa)+_0x4ed192(0x44e,0x411,0x421,0x3b0))+_0x276e2d+(_0x4ed192(0x3f6,0x46e,0x46f,0x4c1)+'ut');const _0x26ddde=await fetch(_0x2dabae);if(!_0x26ddde['ok'])throw new Error(_0x5f5aad(0x393,0x335,0x2e4,0x37a)+':\x20'+_0x26ddde[_0x4ed192(0x38a,0x3c7,0x433,0x420)]);const _0x409a59=await _0x26ddde[_0x5f5aad(0x2b7,0x2be,0x2ca,0x219)]();_0x76b6d4=await new Promise((_0x3d83ec,_0x4935f1)=>{const _0x336dd0={};_0x336dd0[_0x26f8f1(0xb0,0x122,0x140,0xc2)]=_0x1806a9[_0x5a8001(-0x29d,-0x1f2,-0x203,-0x281)];const _0x3dd748=_0x336dd0;function _0x5a8001(_0x3bc0dd,_0x24d6b3,_0x3d4205,_0x3c2085){return _0x5f5aad(_0x3bc0dd-0x95,_0x3c2085,_0x3d4205- -0x4d4,_0x3c2085-0x133);}function _0x26f8f1(_0x4b00aa,_0x5c1977,_0x1b7acc,_0x5ab8b4){return _0x4ed192(_0x4b00aa-0x17c,_0x5ab8b4,_0x5c1977- -0x2c6,_0x5ab8b4-0x14c);}if(_0x1806a9[_0x26f8f1(0x2f2,0x241,0x2bb,0x2ae)](_0x1806a9['tIFdE'],_0x1806a9[_0x26f8f1(0xf7,0x104,0x124,0x5f)])){const _0x5851a9={};_0x5851a9['JYDfK']=_0x3dd748[_0x5a8001(-0x29f,-0x2dd,-0x244,-0x1c3)];const _0x41153a=_0x5851a9,_0x578708=/<lora:([^:]+)(?:\.safetensors)?:([^>]+)(?::1)?>/g;return _0x162357[_0x5a8001(-0x166,-0x131,-0x1e7,-0x16b)](_0x578708,(_0x49180f,_0x4405ef,_0x20d720)=>{if(_0x49180f[_0x33cdbc(0x3fa,0x502,0x3f8,0x45f)](_0x41153a['JYDfK']))return _0x49180f;function _0x6460d7(_0x47ae9b,_0x2b8cc3,_0x50a5e7,_0x51bbca){return _0x26f8f1(_0x47ae9b-0x115,_0x47ae9b- -0x40a,_0x50a5e7-0xbd,_0x2b8cc3);}if(_0x20d720[_0x33cdbc(0x3e8,0x4a6,0x430,0x45f)](':'))return _0x33cdbc(0x38d,0x3bd,0x4d5,0x436)+_0x4405ef+('.safetenso'+_0x6460d7(-0x24b,-0x204,-0x2d8,-0x285))+_0x20d720+'>';function _0x33cdbc(_0x42b8fc,_0x5be8b1,_0x4d207b,_0x5f2b6f){return _0x5a8001(_0x42b8fc-0x96,_0x5be8b1-0x1ef,_0x5f2b6f-0x578,_0x5be8b1);}return _0x6460d7(-0x1e6,-0x1f3,-0x200,-0x243)+_0x4405ef+(_0x33cdbc(0x27e,0x34c,0x28f,0x31a)+_0x6460d7(-0x24b,-0x1d2,-0x27c,-0x208))+_0x20d720+_0x33cdbc(0x2a4,0x2c9,0x3aa,0x34b);});}else{const _0x3b12aa=new FileReader();_0x3b12aa[_0x26f8f1(0x179,0x131,0x1b3,0x101)]=()=>_0x3d83ec(_0x3b12aa[_0x26f8f1(0x170,0x1be,0x263,0x1f9)]),_0x3b12aa[_0x26f8f1(0x19a,0x158,0x159,0x1b7)]=_0x4935f1,_0x3b12aa['readAsData'+_0x26f8f1(0x23c,0x1fd,0x20d,0x27a)](_0x409a59);}});break;}else{const _0x692c5e=_0x5d609d?function(){function _0x3b2a41(_0x373777,_0xd80dff,_0x8a71f3,_0x337b47){return _0x4ed192(_0x373777-0xe7,_0x8a71f3,_0x373777- -0x2e0,_0x337b47-0xbe);}if(_0xd1654b){const _0x53313e=_0x2ab02c[_0x3b2a41(0x120,0xb9,0x71,0xea)](_0x2f0e73,arguments);return _0xefaec1=null,_0x53313e;}}:function(){};return _0x139b25=![],_0x692c5e;}}await _0x1806a9[_0x4ed192(0x4c2,0x4d1,0x43b,0x3bf)](sleep,-0x1455+-0x24*0xd3+0x35e9),_0x24dd4e++;if(_0x1806a9['bVgAY'](_0x24dd4e,0x5*-0x157+-0x126d+-0x19e8*-0x1)){if(_0x1806a9[_0x4ed192(0x33d,0x355,0x3ed,0x45a)](_0x1806a9[_0x5f5aad(0x2a9,0x347,0x2bd,0x33c)],_0x4ed192(0x41c,0x441,0x46d,0x4d7))){_0x1806a9[_0x5f5aad(0x41d,0x3ea,0x370,0x407)](addLog,_0x1806a9[_0x5f5aad(0x451,0x355,0x3cc,0x478)]);throw new Error(_0x1806a9['xBKuM']);}else throw new _0x2de8f4(_0x1806a9[_0x5f5aad(0x2af,0x283,0x311,0x3b3)]);}}catch(_0x516d01){if(_0x1806a9[_0x4ed192(0x563,0x518,0x4f9,0x57e)](_0x1806a9[_0x5f5aad(0x1d1,0x313,0x286,0x2ca)],_0x5f5aad(0x2d9,0x1ff,0x29b,0x247))){_0x1806a9[_0x4ed192(0x4b6,0x45b,0x49f,0x433)](addLog,_0x5f5aad(0x249,0x208,0x281,0x307)+_0x516d01);throw _0x516d01;}else{_0x1806a9[_0x5f5aad(0x25c,0x306,0x2d2,0x307)](_0x2c7cf3,_0x4ed192(0x4ce,0x415,0x494,0x514)+'\x20'+_0x5418d1[_0x4ed192(0x4de,0x384,0x433,0x47e)]);throw new _0x349d37(_0x5f5aad(0x2fc,0x36e,0x34f,0x3dc)+_0x5f5aad(0x285,0x246,0x2af,0x24f)+_0x5f5aad(0x32d,0x335,0x37f,0x2f3)+_0x192b49[_0x5f5aad(0x2e3,0x246,0x2db,0x251)]);}}}}}window['xiancheng']=!![];if(!_0x76b6d4)throw new Error(_0x1806a9[_0x5f5aad(0x37d,0x26f,0x311,0x34f)]);return _0x1806a9[_0x4ed192(0x4b5,0x3e4,0x404,0x466)](addLog,'图像已成功获取并格式'+_0x5f5aad(0x329,0x28c,0x292,0x1df)+'L。'),{'image':_0x76b6d4,'change':_0x1806a9[_0x5f5aad(0x353,0x42c,0x3ad,0x39f)](_0x572766,'')};}}catch(_0x468778){window[_0x4ed192(0x4bf,0x591,0x4f5,0x497)]=!![],_0x1806a9[_0x4ed192(0x525,0x517,0x4d4,0x521)](addLog,_0x5f5aad(0x2af,0x340,0x2a3,0x24d)+_0x5f5aad(0x283,0x371,0x30e,0x302)+_0x468778[_0x4ed192(0x548,0x502,0x492,0x4a8)]),console['error'](_0x1806a9['kZDJV'],_0x468778);throw _0x468778;}}async function comfyuigenerate(_0x3dcab6){const _0x15ffca={'XEqAA':function(_0x50c1ab,_0x18cc4a){return _0x50c1ab(_0x18cc4a);},'YCyPY':function(_0xe4f2b9,_0x53e1bb,_0x3c0def,_0x586669){return _0xe4f2b9(_0x53e1bb,_0x3c0def,_0x586669);},'wuzgJ':function(_0x35b7a3,_0x1ce55b){return _0x35b7a3(_0x1ce55b);},'fiRKJ':_0x4123a5(-0x86,-0x90,-0x7a,-0xb5)+_0x4123a5(-0xac,-0x13a,-0x117,-0x12b)+'ge:','yoIPu':function(_0x3449ea,_0x32e888){return _0x3449ea(_0x32e888);}};let {id:_0x5249ce,prompt:_0x1dbe25,width:_0x275a5c,height:_0x72da66,change:_0x1affc2}=_0x3dcab6;_0x15ffca[_0x23f77e(-0x209,-0x271,-0x21b,-0x25f)](addLog,_0x4123a5(-0xe3,-0x10c,-0x175,-0x153)+':\x20'+_0x5249ce+(_0x4123a5(-0x17b,-0x166,-0x121,-0x1af)+':\x20')+_0x1dbe25+(_0x1affc2?_0x4123a5(-0x141,-0xd9,-0x25,-0xf8)+'\x20'+_0x1affc2:''));function _0x23f77e(_0x469ee8,_0x1d94be,_0x27f2be,_0x4ca026){return _0x2174(_0x469ee8- -0x360,_0x1d94be);}function _0x4123a5(_0x5c79dd,_0x5ed061,_0x469d3d,_0x1b52fa){return _0x2174(_0x5ed061- -0x1fa,_0x469d3d);}try{const {image:_0x4d0586,change:_0x4e2311}=await _0x15ffca['XEqAA'](generateComfyUIImage,{'prompt':_0x1dbe25,'width':_0x275a5c,'height':_0x72da66,'change':_0x1affc2});if(extension_settings[extensionName][_0x4123a5(-0xfc,-0x62,-0xde,-0x2e)]!='0'){const _0xa35660={};_0xa35660[_0x4123a5(-0x1bd,-0x12c,-0x1cc,-0x152)]=_0x4e2311,await _0x15ffca['YCyPY'](setItemImg,_0x1dbe25,_0x4d0586,_0xa35660),addLog(_0x4123a5(-0xf6,-0x82,-0xa8,-0xe7)+_0x23f77e(-0x229,-0x24c,-0x260,-0x180)+'\x20'+_0x1dbe25);}else _0x15ffca[_0x23f77e(-0x1da,-0x1c0,-0x28f,-0x232)](addLog,'缓存设置为不存入数据'+'库');const _0x4d4d4e={};_0x4d4d4e['id']=_0x5249ce,_0x4d4d4e['success']=!![],_0x4d4d4e[_0x23f77e(-0x27c,-0x256,-0x293,-0x2c8)]=_0x4d0586,_0x4d4d4e['prompt']=_0x1dbe25,_0x4d4d4e['change']=_0x4e2311,eventSource[_0x23f77e(-0x2a5,-0x2b0,-0x322,-0x266)](EventType[_0x4123a5(-0xdf,-0x12f,-0xbc,-0x8c)+_0x4123a5(-0xba,-0xa7,-0x15b,-0x144)+_0x23f77e(-0x2ad,-0x25f,-0x20d,-0x2ee)],_0x4d4d4e),_0x15ffca[_0x4123a5(0xb,-0x74,0x25,-0xf2)](addLog,_0x4123a5(-0xdc,-0x127,-0xd7,-0xf5)+_0x23f77e(-0x2db,-0x243,-0x36a,-0x297)+_0x5249ce+')');}catch(_0xb73e9a){const _0x1d25a0=_0x4123a5(-0xfc,-0xe7,-0x137,-0x7a)+_0x4123a5(-0xce,-0x3c,0x7a,0xb)+_0x5249ce+'):\x20'+_0xb73e9a[_0x4123a5(-0xb1,-0xab,-0x76,-0xa7)];_0x15ffca[_0x23f77e(-0x1da,-0x247,-0x1dd,-0x1ea)](addLog,'错误:\x20'+_0x1d25a0),console[_0x4123a5(-0x8a,-0x88,-0x20,-0x49)](_0x15ffca[_0x23f77e(-0x185,-0x226,-0xd0,-0x106)],_0xb73e9a);const _0x502f40={};_0x502f40['id']=_0x5249ce,_0x502f40[_0x4123a5(-0x7b,-0x27,-0x26,-0x74)]=![],_0x502f40['error']=_0xb73e9a[_0x4123a5(0x0,-0xab,-0x37,-0x144)],_0x502f40[_0x23f77e(-0x1e9,-0x282,-0x201,-0x270)]=_0x1dbe25,eventSource['emit'](EventType[_0x23f77e(-0x295,-0x250,-0x25d,-0x228)+'MAGE_RESPO'+_0x23f77e(-0x2ad,-0x346,-0x2dc,-0x2ea)],_0x502f40),_0x15ffca['yoIPu'](addLog,_0x4123a5(-0xd,-0x8c,-0x8,-0x19)+_0x23f77e(-0x2db,-0x27a,-0x290,-0x2b4)+_0x5249ce+')');}}function initializeComfyuiListener(){const _0x3db555={'JHKVu':function(_0x4fd2da,_0x341c72){return _0x4fd2da(_0x341c72);},'bzHyr':_0x17c3f5(-0x215,-0x25c,-0x1ea,-0x203)+_0x17c3f5(-0x1d8,-0x1e7,-0x1df,-0x1c9)};function _0x32e9b8(_0x117f49,_0x592dbe,_0x517b9e,_0x16cc41){return _0x2174(_0x117f49-0xb8,_0x592dbe);}function _0x17c3f5(_0x5b31ef,_0x3eb9f0,_0x4717dd,_0xc8634a){return _0x2174(_0x3eb9f0- -0x3b5,_0x5b31ef);}eventSource['on'](EventType[_0x32e9b8(0x183,0xe0,0xf4,0x1ed)+'MAGE_REQUE'+'ST'],comfyuigenerate),_0x3db555[_0x32e9b8(0x24b,0x2e3,0x24a,0x1ff)](addLog,_0x3db555['bzHyr']);}export async function replaceWithcomfyui(){function _0x2e903e(_0x35d609,_0x229559,_0x442b0e,_0x287bf4){return _0x2174(_0x442b0e- -0x1a5,_0x35d609);}const _0x4ade33={'gccWc':_0x1a76fc(0x7c,0x68,0x45,0x7d)+_0x2e903e(-0xad,-0x17a,-0xe5,-0x168)+_0x1a76fc(-0xa0,-0x106,-0x60,-0x4b),'QcxIj':_0x2e903e(-0x3d,-0x1a,-0x53,-0xc0)+'尝试作为原始\x20Bas'+_0x2e903e(-0x2c,-0x7e,-0xcc,-0xe7),'lesod':_0x1a76fc(0x7e,0xd9,0x3c,0xd5),'gQxGo':function(_0x237498,_0x5a7580){return _0x237498==_0x5a7580;},'HGmFe':'comfyui','Znlui':function(_0x3bc5ed){return _0x3bc5ed();},'ZVyNa':_0x1a76fc(-0x7d,-0x1e,0x2b,-0x6b),'ErKHB':'Ceabz','VMPRK':function(_0x2ce3a0,_0x1e4eee){return _0x2ce3a0===_0x1e4eee;},'VhFVB':_0x1a76fc(-0xc3,0x2c,-0x76,-0x76),'SxZcc':function(_0x27cf2e,_0x12ecca){return _0x27cf2e(_0x12ecca);}};function _0x1a76fc(_0x36f98d,_0x19cb2,_0x440ab1,_0x5b8a56){return _0x2174(_0x440ab1- -0x125,_0x36f98d);}if(_0x4ade33[_0x1a76fc(0x2c,-0x4c,-0x2e,0x46)](extension_settings[extensionName]['mode'],_0x4ade33[_0x1a76fc(-0x66,0x5,-0x20,-0xb6)]))!window[_0x2e903e(0xaa,0xa3,0x5,0x7)+_0x1a76fc(-0x72,0x34,-0x16,0x14)+'tener']&&(window[_0x2e903e(0x2c,0x78,0x5,-0x7b)+_0x1a76fc(0x9,-0x83,-0x16,0x59)+_0x2e903e(0x87,-0xb0,-0x5,-0x26)]=!![],_0x4ade33['Znlui'](initializeComfyuiListener)),_0x4ade33['Znlui'](initializeImageProcessing);else{if(_0x4ade33[_0x2e903e(-0x16c,-0x5d,-0xfa,-0x13a)]!==_0x4ade33[_0x1a76fc(-0x13a,-0x145,-0x9f,-0x119)]){if(window[_0x2e903e(0xa7,0xa0,0x5,-0xe)+'ComfyuiLis'+_0x1a76fc(0x129,0x50,0x7b,0x101)]){if(_0x4ade33[_0x1a76fc(-0x3e,0xe1,0x4c,0x68)]('TavVC',_0x4ade33['VhFVB']))eventSource[_0x2e903e(-0x49,-0xb2,-0x3f,-0xd6)+_0x2e903e(0x29,0x72,-0x1b,-0xb9)](EventType[_0x2e903e(-0xd8,-0x10b,-0xda,-0x116)+_0x1a76fc(0x2,-0x98,-0xe,0x57)+'ST'],comfyuigenerate),window['initialize'+'ComfyuiLis'+_0x1a76fc(0xb,0x35,0x7b,0x121)]=![],_0x4ade33['SxZcc'](addLog,_0x1a76fc(-0x11,0xb7,0x34,-0x53)+'事件监听器已关闭。');else{_0x249dd0['xiancheng']=!![],_0x1b2529(_0x1a76fc(-0x1f,0x23,-0x6d,-0x29)+_0x2e903e(-0xfe,-0x12c,-0x82,0xd)+_0x42ed03[_0x1a76fc(0x99,-0x35,0x2a,0x26)]),_0x568c1d[_0x2e903e(-0xb8,0x4d,-0x33,-0xaf)](_0x4ade33[_0x2e903e(-0x136,-0x163,-0x10e,-0x7c)],_0x51cd4c);throw _0x59e828;}}}else _0x34ae6d(_0x4ade33[_0x1a76fc(-0x92,-0x83,-0x6e,-0x5a)]),_0x36380e=_0x4ade33['lesod'],_0x291ae3=_0x1fb1e3;}}
//# sourceMappingURL=http://localhost:8000/comfyui.js.map