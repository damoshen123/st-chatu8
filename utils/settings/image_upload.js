function _0x2947d5(_0x18cfa8,_0x29a651,_0x15d858,_0xf42a6e){return _0x4c64(_0xf42a6e-0x3e7,_0x15d858);}(function(_0x5ef1c3,_0x293a26){const _0x539d81=_0x5ef1c3();function _0x2de6f0(_0x46594a,_0x3cb1d2,_0x2418f1,_0x49a3f3){return _0x4c64(_0x3cb1d2-0xcf,_0x2418f1);}function _0x3a4566(_0x28a1ff,_0x555203,_0x39b266,_0x1ce885){return _0x4c64(_0x28a1ff- -0x35f,_0x39b266);}while(!![]){try{const _0x536cda=-parseInt(_0x3a4566(-0x1d9,-0x22a,-0x1b5,-0x1c1))/(0x1e1+-0x1c32+0x1a52)+-parseInt(_0x3a4566(-0x1cf,-0x250,-0x25c,-0x246))/(0x1*0x1cea+-0x1755+-0x593)*(parseInt(_0x3a4566(-0x1c2,-0x1b6,-0x178,-0x197))/(-0x3*0xce1+-0x2f7+0x299d))+parseInt(_0x2de6f0(0x287,0x276,0x2b1,0x2e0))/(-0x17*0x18a+-0x31*-0x53+-0x1387*-0x1)+-parseInt(_0x2de6f0(0x1a2,0x202,0x1e8,0x176))/(0x2242+-0x27*-0x2a+-0x28a3)*(parseInt(_0x2de6f0(0x296,0x297,0x2d3,0x292))/(0x7*-0x96+0xf36+0xb*-0x102))+-parseInt(_0x2de6f0(0x256,0x24f,0x2c7,0x2d5))/(-0x7b5*-0x1+0x104+-0x8b2)*(parseInt(_0x3a4566(-0x262,-0x2cd,-0x284,-0x213))/(-0x245+0xb6*0x2+0xe1))+parseInt(_0x2de6f0(0x167,0x1ee,0x26a,0x25c))/(0xf9a+0x15c4+-0x2555)+parseInt(_0x2de6f0(0x25e,0x1f5,0x264,0x182))/(-0xe40+-0x108*-0x1b+0xd8e*-0x1);if(_0x536cda===_0x293a26)break;else _0x539d81['push'](_0x539d81['shift']());}catch(_0x336db2){_0x539d81['push'](_0x539d81['shift']());}}}(_0x8621,-0x3cd6f+-0x2128*0x14+-0x3743*-0x2f));const _0x44c51d=(function(){const _0x396bef={'cXgDx':function(_0x18a34b,_0x1bc4cf){return _0x18a34b(_0x1bc4cf);},'SGpRm':function(_0x410845){return _0x410845();},'NwiFn':'LRyGc','Vyukz':_0x51c1cb(0x472,0x467,0x497,0x4ee),'wZCIq':function(_0x46dc9f,_0xd308b0){return _0x46dc9f===_0xd308b0;},'UbXDw':'iekIE','YLHFp':'UlYHo'};function _0x51c1cb(_0x3dbd7a,_0x248fd0,_0xbeef08,_0x25b76e){return _0x4c64(_0xbeef08-0x30a,_0x3dbd7a);}let _0xe3b943=!![];return function(_0xef4b93,_0x520323){const _0xf288ba={'xPzYq':function(_0x5e69b1){function _0x59b1d7(_0x246630,_0x9f6883,_0x50ca8d,_0x1c4fc8){return _0x4c64(_0x1c4fc8-0x280,_0x50ca8d);}return _0x396bef[_0x59b1d7(0x423,0x460,0x415,0x461)](_0x5e69b1);},'cHsjz':_0x396bef['NwiFn'],'QMNmO':_0x396bef[_0x4d29d9(0x551,0x4f0,0x576,0x555)]};function _0x4969e5(_0x2459ca,_0x57443e,_0x3e271f,_0x2c6926){return _0x51c1cb(_0x2459ca,_0x57443e-0x12c,_0x2c6926- -0x30f,_0x2c6926-0x77);}function _0x4d29d9(_0x4c8977,_0x5bfb53,_0x5a60e3,_0xae2af5){return _0x51c1cb(_0x5bfb53,_0x5bfb53-0x62,_0x4c8977-0xb9,_0xae2af5-0x1be);}if(_0x396bef[_0x4d29d9(0x4b6,0x44e,0x537,0x48c)](_0x396bef[_0x4d29d9(0x4ab,0x487,0x4e5,0x468)],_0x396bef[_0x4969e5(0xaf,0xad,0x12a,0x11e)]))_0x396bef[_0x4969e5(0x203,0x1ae,0x181,0x1e2)](_0x27678b,null),_0x149fec[_0x4969e5(0x1b9,0x17a,0x230,0x1c4)+'e'](_0x571fbd);else{const _0x40833c=_0xe3b943?function(){function _0x3244d4(_0x595936,_0x1a1da9,_0x2bf815,_0x395d81){return _0x4d29d9(_0x395d81- -0x1c,_0x595936,_0x2bf815-0x103,_0x395d81-0x35);}function _0x275ebe(_0x26c361,_0x4bf714,_0x22f75e,_0x20e561){return _0x4969e5(_0x22f75e,_0x4bf714-0x5,_0x22f75e-0x15e,_0x26c361- -0x12a);}if(_0x520323){if(_0xf288ba[_0x3244d4(0x4a6,0x4e0,0x4c5,0x490)]!==_0xf288ba[_0x275ebe(0x5,-0x39,-0x4f,0x76)]){const _0x27a81a=_0x520323[_0x275ebe(0x0,-0x7a,-0x28,0x80)](_0xef4b93,arguments);return _0x520323=null,_0x27a81a;}else _0xf288ba[_0x3244d4(0x568,0x5db,0x5aa,0x563)](_0x138322);}}:function(){};return _0xe3b943=![],_0x40833c;}};}()),_0x303bb1=_0x44c51d(this,function(){const _0x1ed280={};function _0x8b490d(_0x1ec7be,_0x4ecf83,_0x36d175,_0xd34340){return _0x4c64(_0x4ecf83- -0x37d,_0x1ec7be);}_0x1ed280[_0x4f91a2(0x498,0x525,0x4ba,0x4d0)]=_0x8b490d(-0x2cd,-0x246,-0x1f1,-0x23a)+'+$';const _0x4a2767=_0x1ed280;function _0x4f91a2(_0x1655d2,_0x1b767e,_0x45f80e,_0xe58ec3){return _0x4c64(_0x1b767e-0x3e6,_0x45f80e);}return _0x303bb1[_0x8b490d(-0x1f9,-0x22a,-0x26a,-0x2a1)]()[_0x4f91a2(0x640,0x5b5,0x586,0x57a)](_0x4a2767[_0x4f91a2(0x5a3,0x525,0x51b,0x5b1)])[_0x4f91a2(0x4eb,0x539,0x56a,0x5ab)]()[_0x8b490d(-0x1e0,-0x217,-0x1ab,-0x26f)+'r'](_0x303bb1)[_0x4f91a2(0x5ac,0x5b5,0x554,0x61d)](_0x4f91a2(0x531,0x51d,0x4ca,0x49b)+'+$');});_0x303bb1();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x42b03f(-0x14d,-0x1a2,-0x21b,-0x19c)+_0x2947d5(0x55d,0x5df,0x56e,0x555)+_0x42b03f(-0xe8,-0xe4,-0x71,-0xf6)+_0x2947d5(0x516,0x4ad,0x580,0x528),NAI_CHAR_REF_CACHE_KEY=_0x2947d5(0x53a,0x4ca,0x598,0x52a)+_0x2947d5(0x52d,0x50d,0x5b0,0x531)+_0x42b03f(-0x207,-0x184,-0x17b,-0x1a5);function _0x42b03f(_0x543919,_0x1c5613,_0x1ae092,_0xdbf885){return _0x4c64(_0xdbf885- -0x2df,_0x1ae092);}const COMFYUI_REF_CACHE_KEY=_0x42b03f(-0x1b1,-0x1d6,-0x1ef,-0x1a3)+'yui_ref_im'+_0x2947d5(0x4f9,0x4f1,0x4d7,0x528);function _0x4c64(_0x10d656,_0x116c3b){const _0x2e8b9f=_0x8621();return _0x4c64=function(_0x4c5200,_0x4f5ea7){_0x4c5200=_0x4c5200-(-0x1bba+0x4*-0x151+0x21d4);let _0x500c13=_0x2e8b9f[_0x4c5200];if(_0x4c64['VlZGSd']===undefined){var _0x289097=function(_0x29f7f5){const _0x1f7f90='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x369871='',_0x30f4f7='',_0x95eeef=_0x369871+_0x289097;for(let _0x2ad296=0x1785+-0x1*-0x1ba6+-0x332b,_0x2f5523,_0x30468e,_0x3a1905=-0xb*-0x2e0+-0x1ce4*-0x1+-0x1e42*0x2;_0x30468e=_0x29f7f5['charAt'](_0x3a1905++);~_0x30468e&&(_0x2f5523=_0x2ad296%(0xf96+0xba*0xe+-0x293*0xa)?_0x2f5523*(-0x3*0xb15+-0x1*0x1010+0x1*0x318f)+_0x30468e:_0x30468e,_0x2ad296++%(-0x1c70+-0x208c+0xf4*0x40))?_0x369871+=_0x95eeef['charCodeAt'](_0x3a1905+(-0x1c6b+0x24d7+-0x431*0x2))-(0x46*-0x8b+-0x15d*-0x1+0x24af)!==0xec2+-0x1380+0x4be?String['fromCharCode'](0x1*-0xae1+-0x3b2*-0x9+-0x1562&_0x2f5523>>(-(-0xf3d*-0x2+0x1*0xd97+-0x2c0f)*_0x2ad296&-0x5*-0xc0+-0x1b9d+-0x5*-0x4c7)):_0x2ad296:0x3a5*0x1+0x10b6+0x3*-0x6c9){_0x30468e=_0x1f7f90['indexOf'](_0x30468e);}for(let _0x27fd10=-0x1*-0x10bd+-0x1*-0x607+-0x16c4,_0x3d381a=_0x369871['length'];_0x27fd10<_0x3d381a;_0x27fd10++){_0x30f4f7+='%'+('00'+_0x369871['charCodeAt'](_0x27fd10)['toString'](-0x3*-0x815+0x5*-0x6d3+0x9f0))['slice'](-(0x124+-0x15a2+0x1480));}return decodeURIComponent(_0x30f4f7);};_0x4c64['czFaOq']=_0x289097,_0x10d656=arguments,_0x4c64['VlZGSd']=!![];}const _0x37fa5a=_0x2e8b9f[0x295*0x5+-0x1c*-0x9d+-0x1e15],_0x11d414=_0x4c5200+_0x37fa5a,_0x406083=_0x10d656[_0x11d414];if(!_0x406083){const _0x481a32=function(_0x116933){this['dlXTRH']=_0x116933,this['xVoXvd']=[0x8f6+0xb3c+0x1431*-0x1,-0x1*0x1165+0x18df+-0x77a,-0x16e0+0x3*-0x584+0xd24*0x3],this['SwxzfE']=function(){return'newState';},this['CjGAxy']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['BafCdX']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x481a32['prototype']['ynmMvE']=function(){const _0x53a866=new RegExp(this['CjGAxy']+this['BafCdX']),_0xa73e73=_0x53a866['test'](this['SwxzfE']['toString']())?--this['xVoXvd'][0xf16+-0x1*0x6ca+-0x84b]:--this['xVoXvd'][0x11cf*-0x2+-0x8f5+0x2c93];return this['Sckevu'](_0xa73e73);},_0x481a32['prototype']['Sckevu']=function(_0x108da4){if(!Boolean(~_0x108da4))return _0x108da4;return this['zMOYMj'](this['dlXTRH']);},_0x481a32['prototype']['zMOYMj']=function(_0x42efee){for(let _0x4bf17a=-0x1c1d+-0x1*0x14fe+0x311b,_0x478b94=this['xVoXvd']['length'];_0x4bf17a<_0x478b94;_0x4bf17a++){this['xVoXvd']['push'](Math['round'](Math['random']())),_0x478b94=this['xVoXvd']['length'];}return _0x42efee(this['xVoXvd'][0x35e*0x1+-0x1*-0xa5d+-0xdbb]);},new _0x481a32(_0x4c64)['ynmMvE'](),_0x500c13=_0x4c64['czFaOq'](_0x500c13),_0x10d656[_0x11d414]=_0x500c13;}else _0x500c13=_0x406083;return _0x500c13;},_0x4c64(_0x10d656,_0x116c3b);}let nai3VibeTransferImageMimeType=_0x42b03f(-0x1ac,-0x1bc,-0x132,-0x17a),nai3CharRefImageMimeType=_0x2947d5(0x55a,0x562,0x5b7,0x54c),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x2a67e2){const _0x2beb27={};function _0x35ec37(_0x3bf9b2,_0x2283e5,_0x15197b,_0x1927d3){return _0x2947d5(_0x3bf9b2-0xeb,_0x2283e5-0x1db,_0x1927d3,_0x3bf9b2- -0x5f5);}_0x2beb27[_0x35ec37(-0x7c,-0xb,-0x41,-0x30)]=_0x2de8cf(-0x17d,-0x15c,-0x12e,-0x1b8)+_0x2de8cf(-0xe5,-0x10f,-0xeb,-0x150)+_0x35ec37(-0x9e,-0x5e,-0xdd,-0x11a),_0x2beb27[_0x35ec37(-0x62,-0x10,-0x6d,-0x52)]=_0x2de8cf(-0x1a5,-0x1b3,-0x28e,-0x206),_0x2beb27['XxSTx']=_0x2de8cf(-0x1b5,-0x14d,-0x200,-0x19a),_0x2beb27[_0x2de8cf(-0x1d4,-0x2ca,-0x23f,-0x241)]=_0x35ec37(-0x43,-0x7c,-0xb2,-0xc8)+'x';function _0x2de8cf(_0x33dc6d,_0x367f8c,_0x3ca2c8,_0x55edff){return _0x42b03f(_0x33dc6d-0x102,_0x367f8c-0x176,_0x367f8c,_0x55edff- -0x38);}_0x2beb27['wTfya']='previewIma'+'ge_novelai',_0x2beb27['rFgkb']=_0x2de8cf(-0x1f3,-0x227,-0x1b5,-0x200)+_0x2de8cf(-0x226,-0x246,-0x245,-0x231)+'ew-contain'+_0x2de8cf(-0x22b,-0x1d1,-0x1e0,-0x21b)+_0x2de8cf(-0x137,-0x189,-0x128,-0x174)+'placeholde'+'r',_0x2beb27['SKUVN']='novelai-re'+_0x2de8cf(-0x166,-0x23f,-0x141,-0x1bc)+_0x35ec37(-0x12f,-0xf4,-0x16a,-0x17a),_0x2beb27[_0x2de8cf(-0x261,-0x289,-0x1a7,-0x21c)]=_0x2de8cf(-0x292,-0x21b,-0x2b4,-0x230),_0x2beb27[_0x35ec37(-0x2b,0x18,0x59,-0xb2)]='iKpww',_0x2beb27[_0x35ec37(-0x132,-0x1af,-0xf8,-0xd2)]=function(_0x709d23,_0x5cc780){return _0x709d23===_0x5cc780;},_0x2beb27[_0x35ec37(-0xe9,-0xed,-0x142,-0x128)]=_0x35ec37(-0x22,-0x84,-0x7e,-0x6c),_0x2beb27['TwsbO']=_0x2de8cf(-0x27e,-0x1fb,-0x1fd,-0x23d);const _0x36408e=_0x2beb27,_0x49be21=document[_0x2de8cf(-0x11c,-0x1fc,-0x18c,-0x180)+'ById'](_0x36408e['wTfya']),_0x58bffa=document[_0x35ec37(-0xe1,-0x5c,-0xad,-0x146)+_0x35ec37(-0x107,-0x162,-0xe7,-0xba)](_0x36408e[_0x2de8cf(-0x181,-0x15f,-0xc9,-0x13b)]),_0x2103be=document['getElement'+_0x35ec37(-0xc5,-0x97,-0xb4,-0x143)](_0x36408e[_0x35ec37(-0x11c,-0xe6,-0x14a,-0xea)]);if(_0x2a67e2&&_0x2a67e2['startsWith'](_0x36408e[_0x35ec37(-0x113,-0x151,-0xf0,-0x161)])){if(_0x36408e[_0x35ec37(-0x2b,-0x17,0x4e,-0xa8)]===_0x36408e['tXzke']){_0x49be21[_0x35ec37(-0x70,-0x7a,-0x59,-0xb)]=_0x2a67e2,_0x49be21[_0x2de8cf(-0x282,-0x24e,-0x1a6,-0x22b)][_0x2de8cf(-0x19b,-0x19e,-0x17d,-0x17b)]=_0x36408e[_0x2de8cf(-0x1e7,-0x128,-0x1e6,-0x16b)],_0x58bffa[_0x35ec37(-0x122,-0x162,-0xf3,-0x186)][_0x35ec37(-0x72,-0xde,-0xd8,-0xbf)]=_0x36408e[_0x2de8cf(-0x26f,-0x196,-0x1b8,-0x222)],_0x2103be[_0x35ec37(-0x122,-0x156,-0x164,-0x196)][_0x35ec37(-0x72,-0xb5,-0xab,-0x2e)]='inline-fle'+'x';const _0x24a1c5=_0x2a67e2['split'](','),_0xf834f1=_0x24a1c5[0x1c14+-0x1e67+-0x1*-0x253][_0x2de8cf(-0xde,-0x16b,-0x168,-0x14d)](':')[0x22*-0x4a+0x251b+-0x1b46]['split'](';')[-0xc8a+-0xd1f*0x1+0x19a9];nai3VibeTransferImageMimeType=_0xf834f1,window['nai3VibeTr'+'ansferImag'+'e']=_0x24a1c5[0x2667+0x12a4+-0x390a];const _0x5cdbf9={};_0x5cdbf9['id']=NAI_VIBE_CACHE_KEY,_0x5cdbf9[_0x2de8cf(-0x22a,-0x1b8,-0x18c,-0x20b)]=_0x2a67e2,dbs[_0x35ec37(-0xc1,-0x6a,-0x13b,-0xb9)+_0x35ec37(-0x9a,-0x10d,-0xac,-0xff)](_0x5cdbf9);}else _0x53dfb6[_0x35ec37(-0x77,-0xb6,-0x8a,-0xe7)+_0x2de8cf(-0x1e7,-0x1b7,-0x1c9,-0x1ce)](_0x36408e[_0x2de8cf(-0x1f1,-0x177,-0x14c,-0x185)])['click']();}else{if(_0x36408e['bIRhe'](_0x2de8cf(-0x132,-0x13b,-0x1e4,-0x18e),_0x36408e['JzNSe']))_0x166425[_0x35ec37(-0x70,-0x8b,-0x8,-0x1e)]=_0x3ed079,_0x2a75dd[_0x35ec37(-0x122,-0xae,-0xca,-0x14d)][_0x35ec37(-0x72,-0x3b,-0x34,-0x86)]=_0x36408e[_0x2de8cf(-0x1c9,-0x15e,-0x16b,-0x16b)],_0x2e3482['style'][_0x2de8cf(-0x12c,-0x1b2,-0x17f,-0x17b)]=_0x36408e[_0x35ec37(-0x119,-0x12f,-0xc4,-0x151)],_0x4463e1[_0x2de8cf(-0x1d4,-0x19e,-0x2a3,-0x22b)][_0x2de8cf(-0x1d8,-0x116,-0x122,-0x17b)]=_0x36408e[_0x35ec37(-0x138,-0x10d,-0x19e,-0x163)];else{const _0x1948a6=_0x36408e[_0x35ec37(-0xba,-0x57,-0x115,-0xb6)]['split']('|');let _0x2e2e31=-0x1*0x1c33+0x442+-0x7fb*-0x3;while(!![]){switch(_0x1948a6[_0x2e2e31++]){case'0':_0x58bffa[_0x2de8cf(-0x280,-0x2a9,-0x26c,-0x22b)][_0x35ec37(-0x72,0xd,-0xf,0x15)]=_0x35ec37(-0xce,-0x50,-0x142,-0x63);continue;case'1':_0x49be21['src']='';continue;case'2':_0x2103be[_0x2de8cf(-0x23b,-0x288,-0x1a0,-0x22b)][_0x35ec37(-0x72,-0x2e,-0x9f,-0xbe)]=_0x36408e[_0x2de8cf(-0x23b,-0x227,-0x29a,-0x222)];continue;case'3':window[_0x2de8cf(-0x1c2,-0x242,-0x13f,-0x1bf)+_0x2de8cf(-0x17d,-0xe5,-0x151,-0x155)+'e']=null;continue;case'4':_0x49be21[_0x35ec37(-0x122,-0xed,-0x192,-0xd8)][_0x35ec37(-0x72,-0x33,-0xb3,-0x41)]=_0x36408e[_0x35ec37(-0x119,-0x179,-0x14d,-0xb0)];continue;}break;}}}}function removeNovelaiImage(){const _0x3d043b={'gKGuT':function(_0xff9e33,_0x2bf6ce){return _0xff9e33(_0x2bf6ce);}};_0x3d043b[_0xf57147(0x42d,0x453,0x448,0x426)](updateNovelaiImagePreview,null);function _0x1c1fe7(_0x24bf97,_0x561b49,_0x1e1dbb,_0x1f1864){return _0x42b03f(_0x24bf97-0x177,_0x561b49-0x182,_0x1f1864,_0x561b49-0x4b5);}function _0xf57147(_0x1ae882,_0x4a005b,_0x5ebebb,_0x4d35d7){return _0x42b03f(_0x1ae882-0xc7,_0x4a005b-0x11a,_0x5ebebb,_0x1ae882-0x5ba);}dbs[_0xf57147(0x4a4,0x47b,0x51c,0x448)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x3dc730){function _0x3e83b1(_0x28f322,_0x4fdb46,_0x2d1819,_0x1086bc){return _0x2947d5(_0x28f322-0x1f,_0x4fdb46-0x1ec,_0x28f322,_0x4fdb46- -0x41d);}function _0x140390(_0x383231,_0x477634,_0x21634e,_0x4dfa25){return _0x42b03f(_0x383231-0x103,_0x477634-0xca,_0x21634e,_0x383231-0x89);}const _0x2f832d={'pEWtG':function(_0x55a6f2,_0x40575e){return _0x55a6f2===_0x40575e;},'PMECf':_0x3e83b1(0x136,0x15e,0x14e,0x1c7),'wvDNt':function(_0x31a1d3,_0x183c24,_0x53d0d5){return _0x31a1d3(_0x183c24,_0x53d0d5);},'KjJxs':function(_0x18fd02,_0xd55369){return _0x18fd02(_0xd55369);},'qjWfM':function(_0x37e51e,_0x47a398){return _0x37e51e(_0x47a398);}},_0xe3d842=_0x3dc730[_0x3e83b1(0x152,0x123,0x10d,0xfc)][_0x140390(-0x92,-0x2b,-0x29,-0x30)][0x2445+-0x114f+0x3*-0x652];if(!_0xe3d842)return;try{if(_0x2f832d['pEWtG'](_0x2f832d[_0x140390(-0x144,-0x121,-0x156,-0x197)],_0x2f832d[_0x140390(-0x144,-0x19e,-0x12c,-0x19a)])){const _0x51bef0=await _0x2f832d[_0x3e83b1(0x7f,0xff,0x189,0x7e)](processUploadedImage,_0xe3d842,!![]);_0x2f832d[_0x140390(-0x16b,-0x127,-0x142,-0x1d7)](updateNovelaiImagePreview,_0x51bef0);}else _0x20a4f4(null),_0x47b38c[_0x140390(-0x8d,-0x2,-0x29,-0x46)+'e'](_0x2b1e93);}catch(_0x375030){console[_0x140390(-0x13a,-0xb5,-0xd5,-0xad)]('Error\x20proc'+_0x3e83b1(0x146,0x12a,0xb6,0x195)+_0x3e83b1(0xdd,0xd8,0xb9,0xbe)+':',_0x375030),_0x2f832d[_0x140390(-0xbb,-0xc6,-0x124,-0xd7)](alert,_0x140390(-0x7e,-0xa7,-0x2e,-0x77)+_0x375030[_0x140390(-0x78,-0xe0,-0x9e,0x0)]);}}function _0x8621(){const _0x4edfaf=['CLzhtfe','CL9Yzwy','x25HAv9JAgfYxW','otuXmeDOtvDVsW','C3rVCMvezwXLDa','C3bSAxq','Aw5SAw5LlwzSzq','BMfPm0nOyxjszq','z2uY','tg9HzgvKienVBq','C2vHCMnO','ihjLlxvWBg9Hza','igzYB20GB2XKia','uvD3vhy','tKDQDw8','vNvoCeG','AwjLigLTywDLoG','sLDjz1O','C3rHCNrZv2L0Aa','5zU+54Mh5Ase55cg5AsX6lsLoIa','CIaUC3qTy2HHDa','uvz0CMO','zw5MvNK','CKzNA2i','BM92zwXHAs1Yzq','BwvZC2fNzq','qw5Pthm','i25VDMvSywKTCW','u0DWuM0','BKv5ANi','DfH6A2u','BKDsq3G','t1LLExi','z2vFBMfPx2nOyq','y1HNrhG','i2nVBwz5DwKTAq','CMfUC2zLCL9PBq','ANnVBG','B3bqww0','sMnct0u','AgfYlxjLzI1PBq','5lIk5lYG5AsX6lsLoIa','Df9UywLFy2HHCG','Dg1OuKe','y2HHBMDL','DKfgtgi','ELLbuvu','mxW0Fdb8mNWZ','D3jrBxa','yKLsAgu','yLDeDu8','tuzhuw8','lwj0BG','x3jLzG','D1nSDgC','6k+35ywi6k6+572Uq29TzNLv','Efb6ywm','EuTwC2W','CMvHzefZrgf0yq','BwfNzs1WCMv2Aq','zgf0ytPPBwfNzq','vwjyrhC','y0HZANO','tu9ZD2q','s2PkEhm','C3r5Bgu','zw1VDMuTy2HHCG','i2LTywDLsw5WDq','sxr2wNe','rKDirgm','zw1VDMuTAw1HzW','u0TvvK4','D1Pdsxe','CK13qLy','whHtvhG','CMvMigLTywDLoG','DhjPBq','rhrVy1e','i25VDMvSywKTCG','C3rVCMvszwfKtW','ELfvwhe','zxiGlNn0lwnOyq','odG5ndmYqKjls2z0','yM9KEq','u3nbBxe','yNDIrxy','ENzJwMO','AgfYifjLzIbPBq','yKThExq','yLD3yLm','CgXHy2vOB2XKzq','s3P0Afy','Dg9Y','x25VDMvSywK','Ae1lzvu','BMfTzq','DNLNDuG','zgf0yq','r0XOr3m','zwXbssbPBwfNzq','D1bQAgG','wwT4rMK','yMXVy2S','ue1fq2y','vuNLM77NIyC6ia','BxrgwKS','y3jLyxrLt2jQzq','wKTWthq','i25VDMvSywKTAq','uND5yLC','CMv2B2TLt2jQzq','qwfzBu0','y29TzNL1AwnHBG','zxjYB3i','C2vYDMvYrMLSzq','u3fNB3G','mtiXmZu3oermANzxDW','uuryrNC','Bg9N','rwzYCva','wuXirNa','uMLJseS','sNPou2u','nJC2nZu0me5JtefhqG','sgz2sw0','AfPeuuG','B25SB2fKzw5K','q1fPz3m','6zsz6k+V6k+M5OofoG','vNvWC2K','CxvLCNLtzwXLyW','ywDLlxbYzxzPzq','yxbWBhK','BKf5zwW','D2fYBG','y2Hrwva','odK1Bgzjs0XL','uu1oBu8','D3zetNq','BgfJzwHVBgrLCG','kcGOlISPkYKRkq','ignHy2HLihrVia','Aw5NignHy2HLza','zwzFAw1Hz2u','ienVBwz5vuKGAq','y2fJAgvFy29TzG','C1Hozum','DY1JB250ywLUzq','BwPOv1u','zMXLEa','ywDL','AxjruLq','y2fJAgvFBM92zq','twPmrfe','ve5ky2S','Dgv4Da','zNLsu2K','sgnjuxC','qNLjza','BgfPx2nOyxjFCG','A1H5AwS','DMfgr1K','C3rVCMvszwfKvW','Cu5wwMu','vM9pBw8','s1ztENa','mNWWFdr8mxWZ','z0ThDvq','Dg9tDhjPBMC','vhDZyK8','quXTr3y','Bw92zs1JAgfYlq','we90C2m','BMfPm1zPyMvuCG','DgfYz2v0','C3rYAw5N','Bw92zs1PBwfNzq','ie5VDMvSquKGqW','CMvMlwLTywDLlq','tMfTzq','Aw1Hz2vjBNb1Da','zxnZAw5Nie5VDG','C0npAwK','zwrZtMq','DtGTAw1Hz2uTCa','wfLXDwC','Aw1Hz2uVCg5N','y29UC3rYDwn0BW','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','zxCTy29UDgfPBG','zwXbssbJAgfYia','yMXVyJO','z05Yz3q','u3bNtwK','D0H2D1m','BgfPx3zPyMvFDa','i2nVBwz5DwKTCG','CMvM','zNjcBNG','tKjvtxq','wuHvue8','CML0zq','zMLbzeG','uK1iEKG','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','CMvZDwX0','igzYB20Gy2fJAa','wLzfy00','ufvTuMm','sezQq1e','BM9Uzq','s3nfBMi','rLzduuu','mtrsBefSA00','wNneEvG','ue9tva','zfHgC1a','qKnyrhK','BMLKuu0','mtGWnJi5thzYqxj6','ie5VDMvSquKGvG','rxjYB3iGChjVyW','Bw5PAeG','lxjLzI1PBwfNzq','s1fftNq','y3rvuKW','vg9SEw0','vNL1A3O','sujotue','mtuYntuYzePkCfL6','s1LeqK8','sMLiy3a','zKLTywDL','EMDfDMK','sePesMW','EhPgDNG','z2v0rwXLBwvUDa','q1HdyMG','zs1IDg4','wNzKwgO','CwPxzK0','zgLZCgXHEq','m3zdD2z4vW','C3jJ','tenPuuu','uLz0u0K','tgrdvw8','Du93zLe','Dhu4lwLTywDLlq','ChjLDMLLD0LTyq','Aw1Hz2u','rufTrNq','nZG5mZi4twrIwgTt','C3rYAw5NAwz5','l3vWBg9Hzc9PBq','y2XPy2S','wfbdrvu','rhvXB1G','z0XAreO','y0TXvKq','rxjYB3iGBg9Hza','BwfNztO','zwXLy3qTy2HHCG','sw5frgG','zMLUza','A2fVDhvWAwfU','zLbQuLu','A0LkB24','ssbbueNLNldLNydJGii','svblrgW','DgHLig5LDYbMBW','6k+M5OofoIa','ihrVihvWzgf0zq','Efb6wxe','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','ywDLoG','yMnNvxu','BMX5','qxrAqNK','yw5ZzMvYsw1HzW','vgPqyMy','zMLSzxm'];_0x8621=function(){return _0x4edfaf;};return _0x8621();}function updateNovelaiCharRefImagePreview(_0x319a2e){const _0x1a5135={};_0x1a5135['hSZdu']=_0x14d353(-0x17,0x1f,0x1e,0x7a)+_0x533daa(0x49a,0x4fd,0x41c,0x461)+'r_ref',_0x1a5135[_0x533daa(0x3ac,0x398,0x36a,0x3cb)]='#novelai-c'+_0x14d353(0xd7,0x68,-0x23,0x93)+_0x533daa(0x3e2,0x3ba,0x3d9,0x3a4)+_0x533daa(0x3f2,0x393,0x36f,0x46f)+_0x533daa(0x48d,0x43d,0x4d1,0x4da)+'u8-image-p'+_0x533daa(0x3ea,0x41e,0x3d7,0x372),_0x1a5135[_0x14d353(0x13,-0x35,0x50,-0x6f)]=_0x14d353(-0xf,0x58,0xb7,0xb1)+_0x533daa(0x40a,0x44d,0x3a1,0x3a2)+_0x14d353(-0x3a,-0x28,0x5e,-0x23)+'btn',_0x1a5135[_0x14d353(-0x29,-0x6b,-0x48,-0x2d)]=_0x14d353(-0xb3,-0x74,-0x61,-0x1e),_0x1a5135['InEDh']='inline-fle'+'x',_0x1a5135[_0x14d353(-0xf5,-0x82,-0xc9,-0x53)]=_0x533daa(0x405,0x389,0x436,0x381);function _0x14d353(_0x13cb92,_0x453ecc,_0x1e7ad9,_0x599c1d){return _0x2947d5(_0x13cb92-0x1dc,_0x453ecc-0x5c,_0x1e7ad9,_0x453ecc- -0x56c);}_0x1a5135['hZDQH']=_0x533daa(0x431,0x413,0x3c8,0x480),_0x1a5135['mvQxQ']='flex';const _0x505b28=_0x1a5135,_0x5c733e=document[_0x533daa(0x44b,0x4c0,0x42c,0x45e)+_0x533daa(0x3fd,0x409,0x3f7,0x442)](_0x505b28['hSZdu']),_0x11327d=document['querySelec'+'tor'](_0x505b28[_0x14d353(-0xef,-0x8d,-0x4a,-0xcd)]),_0x4b8a6e=document['getElement'+_0x14d353(-0x42,-0x3c,0x4d,0x38)](_0x505b28['KVSzp']);function _0x533daa(_0x3d13f5,_0x475563,_0x59842b,_0x49a882){return _0x2947d5(_0x3d13f5-0xa3,_0x475563-0x1f0,_0x49a882,_0x3d13f5- -0x133);}if(_0x319a2e&&_0x319a2e[_0x14d353(0xc7,0x52,0x4c,0x99)](_0x14d353(-0x101,-0x9e,-0xea,-0xbb))){_0x5c733e[_0x533daa(0x452,0x3c8,0x4c9,0x48e)]=_0x319a2e,_0x5c733e[_0x533daa(0x3a0,0x360,0x327,0x3fb)][_0x14d353(-0x67,0x17,-0x3e,-0x54)]=_0x505b28[_0x533daa(0x3ce,0x409,0x41e,0x351)],_0x11327d['style'][_0x14d353(0xa2,0x17,0x91,-0x37)]=_0x14d353(0x51,-0x8,0xc,0x73),_0x4b8a6e[_0x533daa(0x3a0,0x3ac,0x38e,0x3d1)][_0x14d353(0x82,0x17,0x16,0x4a)]=_0x505b28[_0x14d353(0x48,0x2d,-0x1e,0x83)];const _0x1e5734=_0x319a2e[_0x533daa(0x47e,0x4b7,0x4f7,0x484)](','),_0x30fc40=_0x1e5734[-0x73+0x7*-0x251+0x10aa][_0x533daa(0x47e,0x4de,0x4c6,0x4f0)](':')[0x6*-0x448+-0x3*0xbb+0x1be2][_0x533daa(0x47e,0x432,0x438,0x4aa)](';')[-0x59c+-0x35*-0xe+0x1*0x2b6];nai3CharRefImageMimeType=_0x30fc40,window[_0x533daa(0x480,0x3f8,0x504,0x44c)+_0x533daa(0x447,0x45e,0x4a7,0x43e)]=_0x1e5734[0xd9*-0x1+-0x634+0x70e];const _0x3cc597={};_0x3cc597['id']=NAI_CHAR_REF_CACHE_KEY,_0x3cc597[_0x14d353(-0xe0,-0x79,-0xc3,-0x7e)]=_0x319a2e,dbs['storeReadW'+_0x533daa(0x428,0x46c,0x3e1,0x41d)](_0x3cc597);}else{const _0x17542d=_0x505b28[_0x14d353(-0x49,-0x82,-0xdd,-0x63)][_0x533daa(0x47e,0x3fd,0x462,0x481)]('|');let _0x347979=0x2*0xaa4+0x2024+-0x356c;while(!![]){switch(_0x17542d[_0x347979++]){case'0':_0x5c733e[_0x14d353(-0x29,-0x99,-0x38,-0xbc)][_0x533daa(0x450,0x45b,0x3db,0x3f0)]=_0x505b28['hZDQH'];continue;case'1':_0x4b8a6e[_0x14d353(-0x44,-0x99,-0xa7,-0xe7)][_0x533daa(0x450,0x47c,0x48a,0x48d)]=_0x505b28[_0x14d353(-0x3,-0x5d,-0x5a,-0x85)];continue;case'2':_0x5c733e[_0x533daa(0x452,0x46f,0x492,0x4cb)]='';continue;case'3':window[_0x14d353(0x76,0x47,-0x1d,0x5a)+'fImage']=null;continue;case'4':_0x11327d[_0x14d353(-0x10,-0x99,-0x7c,-0x117)]['display']=_0x505b28['mvQxQ'];continue;}break;}}}function removeNovelaiCharRefImage(){const _0x39cbfc={'AWBcu':function(_0x47735e,_0x50d631){return _0x47735e(_0x50d631);}};function _0x527c9a(_0x396f61,_0x4357e8,_0x50136e,_0x45914b){return _0x42b03f(_0x396f61-0xf9,_0x4357e8-0x17,_0x4357e8,_0x396f61- -0x1e);}_0x39cbfc['AWBcu'](updateNovelaiCharRefImagePreview,null),dbs[_0x527c9a(-0x134,-0x14f,-0xbe,-0x102)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x12ac77){const _0xe726bf={'FVCQE':_0x426aed(-0x2b,0x32,-0x49,-0x1d)+'ge_nai_cha'+_0x221b9b(0x279,0x2b2,0x2f7,0x302),'rVGLQ':'#novelai-c'+_0x221b9b(0x29f,0x2d9,0x327,0x287)+_0x426aed(-0xfa,-0x11f,-0xbf,-0x4e)+_0x426aed(-0x33,-0xf5,-0xaf,-0x12a)+_0x221b9b(0x2e5,0x2c5,0x2b1,0x29d)+_0x221b9b(0x299,0x24f,0x1f4,0x28d)+_0x221b9b(0x1b9,0x222,0x290,0x1cc),'merAj':_0x426aed(-0xe,0x79,-0x10,-0x29)+_0x221b9b(0x288,0x242,0x283,0x2a5)+'ref-image-'+'btn','Sqgox':_0x426aed(-0x8d,-0xe0,-0x106,-0x112),'KdwAx':_0x221b9b(0x1c2,0x1fd,0x180,0x234),'nAyel':_0x221b9b(0x22d,0x269,0x250,0x2f0),'VoOmo':_0x426aed(-0x87,0x28,-0x22,-0x8f)+'x','qXuBQ':'flex','RwybW':'(((.+)+)+)'+'+$','ZsDyX':function(_0x50e5d7,_0x9e218b){return _0x50e5d7===_0x9e218b;},'EOGsx':_0x221b9b(0x22c,0x26f,0x2e4,0x2ea),'HfvIm':_0x221b9b(0x235,0x243,0x227,0x1c5),'HcIQw':function(_0x5dc8dd,_0x2921c5){return _0x5dc8dd(_0x2921c5);},'sCOii':_0x221b9b(0x1a5,0x1cf,0x237,0x1a2),'bwbEv':_0x221b9b(0x1f4,0x274,0x207,0x2ff)+_0x426aed(-0xa6,-0x1a,-0x8d,-0x27)+_0x426aed(0x5,-0x9d,-0x84,0x4)+_0x426aed(-0xf1,-0xc3,-0xf7,-0xb6),'eOyCj':'图片处理失败:\x20'},_0x30d3e9=_0x12ac77[_0x221b9b(0x29c,0x245,0x295,0x216)][_0x426aed(-0x3f,-0x3,-0x29,-0x15)][0x1507+0xadc+0x1fe3*-0x1];function _0x221b9b(_0x2031a0,_0x559cc6,_0x3242c3,_0x5b31a9){return _0x42b03f(_0x2031a0-0x1a3,_0x559cc6-0xb6,_0x5b31a9,_0x559cc6-0x3cb);}if(!_0x30d3e9)return;function _0x426aed(_0xa485bd,_0x37d793,_0x16460f,_0x5de3ca){return _0x2947d5(_0xa485bd-0xaa,_0x37d793-0x1e4,_0x5de3ca,_0x16460f- -0x5d4);}try{if(_0xe726bf[_0x426aed(-0xf,-0x6b,-0x6c,-0x6c)](_0xe726bf['EOGsx'],_0xe726bf[_0x221b9b(0x246,0x213,0x1cd,0x22a)])){const _0x456568=_0x10d656['getElement'+'ById'](_0xe726bf[_0x426aed(-0x62,0x7,-0x6e,-0x3)]),_0x28f030=_0x116c3b[_0x426aed(-0x5d,-0x8f,-0xc0,-0xf8)+_0x426aed(-0x124,-0xc1,-0xe6,-0x99)](_0xe726bf[_0x221b9b(0x2cc,0x2b1,0x27e,0x256)]),_0x3cca91=_0x2e8b9f['getElement'+'ById'](_0xe726bf['merAj']);if(_0x4c5200&&_0x4f5ea7['startsWith'](_0xe726bf[_0x426aed(-0xf5,-0x72,-0xcf,-0x14d)])){_0x456568[_0x426aed(-0xa9,-0x36,-0x4f,-0x87)]=_0x30f4f7,_0x456568[_0x426aed(-0x91,-0x84,-0x101,-0xed)]['display']=_0xe726bf['KdwAx'],_0x28f030[_0x426aed(-0xb3,-0xe3,-0x101,-0x77)]['display']=_0xe726bf[_0x426aed(-0x9a,-0xba,-0xbd,-0xb3)],_0x3cca91[_0x221b9b(0x224,0x1d8,0x1e2,0x1dc)][_0x221b9b(0x258,0x288,0x2bb,0x2a1)]=_0xe726bf[_0x221b9b(0x29e,0x23b,0x22a,0x2b0)];const _0x3d3dc0=_0x95eeef[_0x221b9b(0x2d2,0x2b6,0x2fa,0x2e7)](','),_0x2d3884=_0x3d3dc0[-0x1*0x2341+0x19b*0x15+0x2*0xc5][_0x426aed(-0x4b,0x39,-0x23,-0x29)](':')[0xccf+0x2f*-0x5b+0x3e7]['split'](';')[-0x3c5*0xa+-0xd01*0x2+0x36*0x12e];_0x2ad296=_0x2d3884,_0x2f5523[_0x221b9b(0x334,0x2b8,0x2f0,0x2d0)+_0x221b9b(0x21c,0x27f,0x2a7,0x2a0)]=_0x3d3dc0[0x7*0x53+0x1510+-0x5d5*0x4];const _0x5298ef={};_0x5298ef['id']=_0x3a1905,_0x5298ef[_0x221b9b(0x247,0x1f8,0x219,0x27d)]=_0x27fd10,_0x30468e[_0x426aed(-0x9e,-0x12a,-0xa0,-0xe8)+_0x221b9b(0x2bc,0x260,0x2af,0x29a)](_0x5298ef);}else _0x456568[_0x426aed(-0x45,-0x7b,-0x4f,0x3d)]='',_0x456568[_0x221b9b(0x1e2,0x1d8,0x1b9,0x161)][_0x221b9b(0x27c,0x288,0x27e,0x300)]=_0xe726bf[_0x221b9b(0x257,0x21c,0x204,0x217)],_0x28f030['style'][_0x426aed(-0xa1,0x20,-0x51,-0x67)]=_0xe726bf['qXuBQ'],_0x3cca91[_0x221b9b(0x1ed,0x1d8,0x25f,0x21d)][_0x221b9b(0x264,0x288,0x276,0x235)]=_0xe726bf[_0x221b9b(0x236,0x21c,0x26c,0x29e)],_0x3d381a[_0x426aed(-0x9a,0x38,-0x21,-0x3e)+_0x426aed(-0x98,-0x69,-0x5a,-0xc2)]=null;}else{const _0x477eb3=await _0xe726bf[_0x426aed(-0x76,-0xf3,-0xa5,-0x84)](processUploadedImage,_0x30d3e9);_0xe726bf[_0x221b9b(0x1ea,0x234,0x1ef,0x26b)](updateNovelaiCharRefImagePreview,_0x477eb3);}}catch(_0x5d4979){if(_0xe726bf['sCOii']===_0xe726bf[_0x221b9b(0x26a,0x24d,0x203,0x1c6)])console['error'](_0xe726bf[_0x426aed(-0x77,-0xbe,-0xed,-0x16c)],_0x5d4979),_0xe726bf['HcIQw'](alert,_0xe726bf['eOyCj']+_0x5d4979[_0x426aed(0x44,0x8,-0xf,0x22)]);else return _0x17e344[_0x221b9b(0x20f,0x23f,0x22f,0x2ab)]()['search'](qbqbBN[_0x221b9b(0x18a,0x204,0x272,0x252)])[_0x221b9b(0x22f,0x23f,0x207,0x1dd)]()[_0x426aed(-0xe4,-0xfe,-0x87,-0x65)+'r'](_0xbce755)[_0x426aed(-0x46,-0x6a,-0x1e,-0x69)](qbqbBN['RwybW']);}}function updateComfyUIImagePreview(_0x56502d){const _0x14c678={};_0x14c678[_0xfb780(0x33e,0x357,0x393,0x36c)]=_0xfb780(0x3b8,0x306,0x353,0x3c1)+_0x3606d7(0x302,0x330,0x332,0x31f),_0x14c678[_0xfb780(0x2c2,0x30a,0x2d8,0x348)]=_0xfb780(0x423,0x405,0x398,0x384)+_0x3606d7(0x3ca,0x3f5,0x3bc,0x413),_0x14c678[_0x3606d7(0x37a,0x36f,0x386,0x3ee)]=_0x3606d7(0x3f6,0x410,0x46f,0x483)+_0xfb780(0x296,0x301,0x2da,0x2ec)+_0xfb780(0x329,0x338,0x35c,0x2e6)+'er\x20.st-cha'+_0x3606d7(0x381,0x3cb,0x427,0x3ef)+_0xfb780(0x30f,0x296,0x2f9,0x357)+'r',_0x14c678[_0xfb780(0x34e,0x359,0x396,0x37d)]='comfyui-re'+_0x3606d7(0x334,0x383,0x3ae,0x3fe)+'-btn',_0x14c678['vaFGY']=_0x3606d7(0x41f,0x392,0x40d,0x388),_0x14c678[_0xfb780(0x3ae,0x2e4,0x36e,0x381)]=_0x3606d7(0x3fc,0x3fa,0x450,0x438),_0x14c678['HFjCQ']=_0xfb780(0x34f,0x2f1,0x371,0x3ae),_0x14c678[_0xfb780(0x39a,0x315,0x314,0x2d5)]=function(_0x3d8ab9,_0x55564f){return _0x3d8ab9!==_0x55564f;};function _0xfb780(_0x452f94,_0x43a62e,_0x1f6c6b,_0x18172d){return _0x42b03f(_0x452f94-0x9,_0x43a62e-0x168,_0x18172d,_0x1f6c6b-0x4d3);}_0x14c678[_0x3606d7(0x2eb,0x32c,0x361,0x377)]=_0x3606d7(0x3dc,0x3ac,0x3eb,0x352),_0x14c678[_0xfb780(0x393,0x34e,0x31e,0x31a)]=_0x3606d7(0x38f,0x331,0x2bb,0x300),_0x14c678[_0xfb780(0x355,0x336,0x30a,0x298)]='3|5|1|2|4|'+'0',_0x14c678['chQYP']='flex';const _0x296acf=_0x14c678;function _0x3606d7(_0x2fb345,_0x36e06c,_0xd1a99f,_0x44be4e){return _0x2947d5(_0x2fb345-0x1e5,_0x36e06c-0x1aa,_0x2fb345,_0x36e06c- -0x1bf);}const _0x3a25e4=document['getElement'+_0x3606d7(0x339,0x371,0x34c,0x348)](_0x296acf['yKVsl']),_0x56588d=document[_0xfb780(0x3a7,0x2ac,0x321,0x2d8)+_0x3606d7(0x2e6,0x32f,0x2ca,0x31f)](_0x296acf[_0xfb780(0x356,0x3b8,0x33b,0x382)]),_0x18089b=document[_0x3606d7(0x439,0x3bf,0x438,0x353)+_0xfb780(0x2b8,0x35f,0x33d,0x2e0)](_0x296acf[_0x3606d7(0x351,0x3ca,0x35f,0x3f2)]);_0x3a25e4[_0xfb780(0x3e5,0x34d,0x392,0x350)]&&_0x3a25e4[_0x3606d7(0x420,0x3c6,0x442,0x445)][_0xfb780(0x3d2,0x39d,0x3cb,0x3e3)](_0x296acf[_0x3606d7(0x359,0x374,0x36e,0x3f9)])&&_0x3a25e4[_0xfb780(0x336,0x31b,0x392,0x3dc)]!==_0x56502d&&URL[_0xfb780(0x30e,0x2c9,0x30d,0x398)+_0x3606d7(0x3f0,0x3b4,0x3b5,0x348)](_0x3a25e4[_0x3606d7(0x352,0x3c6,0x39a,0x41b)]);if(_0x56502d)_0xfb780(0x35e,0x269,0x2f5,0x37a)!==_0x296acf[_0x3606d7(0x3fa,0x3a2,0x413,0x38a)]?(_0x3a25e4[_0x3606d7(0x3f2,0x3c6,0x439,0x446)]=_0x56502d,_0x3a25e4['style']['display']=_0xfb780(0x343,0x30a,0x305,0x2cd),_0x56588d['style'][_0x3606d7(0x3db,0x3c4,0x39f,0x35b)]=_0x296acf[_0x3606d7(0x3cc,0x3a4,0x3a4,0x3f9)],_0x18089b['style'][_0x3606d7(0x34d,0x3c4,0x404,0x373)]=_0xfb780(0x3a8,0x39e,0x3bf,0x397)+'x'):_0x2d9e2a[_0x3606d7(0x2f3,0x344,0x2e8,0x3c1)]('Error\x20load'+_0x3606d7(0x3eb,0x361,0x35d,0x3e0)+_0xfb780(0x333,0x380,0x350,0x3a8)+_0xfb780(0x376,0x338,0x2f6,0x380)+_0x3606d7(0x46a,0x3e6,0x35e,0x3c5),_0x4b42ec);else{if(_0x296acf[_0xfb780(0x2b6,0x33f,0x314,0x2f9)](_0x296acf['bWwbS'],_0x296acf[_0x3606d7(0x3ae,0x352,0x341,0x3a6)])){const _0x1c8f78=_0x296acf[_0x3606d7(0x366,0x33e,0x2ca,0x3a6)]['split']('|');let _0x2bb569=-0x38+0x266f+0x2637*-0x1;while(!![]){switch(_0x1c8f78[_0x2bb569++]){case'0':comfyuiImageObjectURL=null;continue;case'1':_0x56588d[_0xfb780(0x2e2,0x285,0x2e0,0x2f3)][_0xfb780(0x404,0x30d,0x390,0x3ca)]=_0x296acf[_0xfb780(0x3aa,0x390,0x326,0x385)];continue;case'2':_0x18089b['style'][_0xfb780(0x377,0x30a,0x390,0x36c)]=_0x296acf[_0x3606d7(0x3ff,0x3a4,0x3a3,0x3d2)];continue;case'3':_0x3a25e4[_0x3606d7(0x421,0x3c6,0x40b,0x38d)]='';continue;case'4':window[_0x3606d7(0x2ee,0x343,0x380,0x3c6)+_0x3606d7(0x393,0x3dc,0x424,0x39f)]=null;continue;case'5':_0x3a25e4['style']['display']=_0x296acf['HFjCQ'];continue;}break;}}else _0x18782c['getElement'+_0xfb780(0x35c,0x3b7,0x33d,0x3ba)](_0x296acf['LCiQE'])['click']();}}function removeComfyUIImage(){const _0x2864a2={'xzFvx':function(_0x1daa80,_0x5444fd){return _0x1daa80(_0x5444fd);}};function _0x4b99fc(_0x1f2e4b,_0x3f9c94,_0x2a6eb9,_0xcf67bf){return _0x42b03f(_0x1f2e4b-0x112,_0x3f9c94-0x61,_0x2a6eb9,_0x3f9c94-0x63a);}_0x2864a2[_0x4b99fc(0x50a,0x4f1,0x4c7,0x4d4)](updateComfyUIImagePreview,null),dbs['storeDelet'+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x4e7afd){const _0xf5c323={'zYAQU':function(_0x42c667,_0x39a047){return _0x42c667!==_0x39a047;},'edsNd':_0x276075(0x4ad,0x400,0x47b,0x45c),'MOswd':_0x3bd9a1(0xce,0xa7,0x1e,0x8e),'RMHzH':_0x276075(0x3e1,0x461,0x476,0x3fa)+'2','KYDBO':_0x3bd9a1(-0xc2,-0xaf,-0x44,-0x54),'irQRT':function(_0x3eb86c,_0x224a1b){return _0x3eb86c(_0x224a1b);},'nidQM':_0x276075(0x3e7,0x3c4,0x417,0x440),'AniLs':function(_0x27c124,_0x330bf9){return _0x27c124(_0x330bf9);},'kIJon':_0x276075(0x405,0x38d,0x369,0x37d)+_0x3bd9a1(0x9,0x23,0x86,0x6f),'EfrqP':function(_0x24641d){return _0x24641d();},'KQENt':function(_0x412b96,_0x597e5a,_0x2ddb3e){return _0x412b96(_0x597e5a,_0x2ddb3e);},'cCpSH':'上传成功,\x20服务器返'+'回数据:','NVdbi':_0x276075(0x3d4,0x3e5,0x386,0x3c6),'enfVy':function(_0x597aec,_0x182d1c){return _0x597aec+_0x182d1c;},'vyguH':'图片处理或上传时出错'+':\x20','LdCUo':_0x276075(0x39e,0x479,0x43d,0x402)+':','sLnvf':function(_0xe6607d){return _0xe6607d();}},_0x3e5d8d=extension_settings[extensionName];function _0x3bd9a1(_0x34eca0,_0x4546a7,_0x59f75d,_0x3a4dfb){return _0x2947d5(_0x34eca0-0xe6,_0x4546a7-0x36,_0x59f75d,_0x3a4dfb- -0x52f);}const _0x24fc43=_0x4e7afd[_0x3bd9a1(-0x37,0x43,0xb,0x11)][_0x3bd9a1(0x2,0x2c,0xa6,0x7c)][0x690+-0xa7b*-0x1+-0x110b*0x1];if(!_0x24fc43)return;function _0x276075(_0x16a385,_0x3d7a52,_0x2a4687,_0x156a10){return _0x42b03f(_0x16a385-0x39,_0x3d7a52-0x168,_0x2a4687,_0x156a10-0x57a);}try{if(_0xf5c323[_0x276075(0x383,0x315,0x361,0x374)](_0xf5c323[_0x276075(0x3de,0x41c,0x3e4,0x42c)],_0x3bd9a1(0xb5,0x9c,0x4c,0x33))){const _0x13dd0f=await _0xf5c323['irQRT'](processUploadedImageToBlob,_0x24fc43),_0x12cb1c=URL['createObje'+_0x276075(0x411,0x42c,0x48f,0x427)](_0x13dd0f);comfyuiImageObjectURL=_0x12cb1c,_0xf5c323[_0x3bd9a1(0x6a,0x2d,-0x87,-0x6)](updateComfyUIImagePreview,_0x12cb1c);const _0x96d9cd=new FormData();_0x96d9cd['append'](_0xf5c323[_0x276075(0x49e,0x3b4,0x3e5,0x420)],_0x13dd0f,_0x24fc43['name']);let _0x7f6a44=_0x3e5d8d['comfyuiUrl'][_0x3bd9a1(-0x82,-0xd0,0x10,-0x51)]();if(!_0x7f6a44){_0xf5c323['AniLs'](alert,_0xf5c323[_0x3bd9a1(0xe5,0x71,0x42,0x6e)]),_0xf5c323[_0x3bd9a1(0x0,-0x83,-0x2c,-0x26)](removeComfyUIImage);return;}const _0x20a882={};_0x20a882['method']=_0x276075(0x3b6,0x40a,0x414,0x41d),_0x20a882[_0x3bd9a1(-0xa1,-0x3b,-0x14,-0x4a)]=_0x96d9cd;const _0x428392=await _0xf5c323[_0x276075(0x3db,0x49a,0x3f3,0x426)](fetch,_0x7f6a44+(_0x276075(0x450,0x472,0x4ca,0x444)+_0x3bd9a1(0x13,-0x3e,0x68,-0x7)),_0x20a882);if(_0x428392['ok']){const _0x386265=await _0x428392[_0x276075(0x400,0x47b,0x46c,0x485)]();window[_0x3bd9a1(0x59,-0xb8,-0x35,-0x2d)+_0x276075(0x3fe,0x4cb,0x3dc,0x44f)]=_0x386265[_0x3bd9a1(0x1a,-0xa4,-0x9d,-0x3e)],addLog(_0x276075(0x3d0,0x3e0,0x3df,0x458)+'器返回数据:\x20'+JSON[_0x276075(0x41f,0x490,0x483,0x443)](_0x386265)),console[_0x3bd9a1(0x66,-0xc,-0x41,-0x27)](_0xf5c323['cCpSH'],_0x386265);const _0x57236a=new FileReader();_0x57236a[_0x3bd9a1(-0x6f,0x15,0x64,-0x1f)]=()=>{function _0x5c5412(_0x17bf67,_0x3c28e4,_0x21a231,_0x72066d){return _0x3bd9a1(_0x17bf67-0x117,_0x3c28e4-0x111,_0x3c28e4,_0x17bf67-0x25e);}function _0x19f896(_0x3c25c5,_0x23eea7,_0x58d703,_0x5e2495){return _0x276075(_0x3c25c5-0x1db,_0x23eea7-0x10d,_0x5e2495,_0x58d703- -0xfa);}if(_0xf5c323[_0x19f896(0x2f2,0x219,0x27a,0x2c5)](_0xf5c323[_0x5c5412(0x278,0x2c3,0x26a,0x294)],_0xf5c323[_0x19f896(0x2b9,0x2a7,0x28b,0x2dd)])){const _0x1c7a38=_0x57236a[_0x19f896(0x38c,0x30c,0x319,0x292)],_0x9cf03b={};_0x9cf03b[_0x5c5412(0x222,0x263,0x1f8,0x1b2)]=_0x1c7a38,_0x9cf03b[_0x19f896(0x242,0x335,0x2be,0x234)+_0x19f896(0x35e,0x370,0x2ff,0x385)]=_0x386265[_0x5c5412(0x220,0x29b,0x1bd,0x273)];const _0x16049d=_0x9cf03b,_0x8f3cf1={};_0x8f3cf1['id']=COMFYUI_REF_CACHE_KEY,_0x8f3cf1[_0x19f896(0x243,0x2a0,0x2ad,0x26e)]=_0x16049d,dbs['storeReadW'+'rite'](_0x8f3cf1);}else _0x58220d[_0x5c5412(0x22f,0x249,0x2af,0x257)+_0x19f896(0x388,0x387,0x32d,0x337)](_0x1c53da[_0x5c5412(0x2b4,0x284,0x2f9,0x31f)]);},_0x57236a[_0x3bd9a1(-0x15,0x2a,-0x77,-0x63)+'URL'](_0x13dd0f);}else{if(_0xf5c323[_0x276075(0x3b0,0x37f,0x2ff,0x374)]('zBKpL','vaJjm')){const _0xd002b8=await _0x428392[_0x276075(0x38c,0x3b0,0x3d9,0x3e1)]();_0xf5c323[_0x3bd9a1(-0x87,-0x80,0x19,-0x6)](alert,_0x276075(0x452,0x49d,0x489,0x489)+_0xd002b8),_0xf5c323[_0x276075(0x3f5,0x407,0x4bb,0x47a)](addLog,_0x3bd9a1(-0x47,-0x1a,0x1c,0x2f)+'详情:\x20'+_0xd002b8),console[_0x3bd9a1(-0x6a,-0x98,-0xac,-0x2c)](_0xf5c323['NVdbi'],_0xd002b8),removeComfyUIImage();}else _0x2e420c(null),_0x374562[_0x3bd9a1(0x47,0xca,0x71,0x81)+'e'](_0x23a6b9);}}else _0x3ae53e[_0x276075(0x3fd,0x4af,0x417,0x432)+_0x3bd9a1(-0x5a,-0x32,-0x3a,0x1)](_0xf5c323[_0x3bd9a1(-0x2a,-0x4a,0x1,0x2e)])[_0x276075(0x4c2,0x437,0x3f9,0x445)]();}catch(_0x119b7d){alert(_0xf5c323[_0x276075(0x4f2,0x422,0x426,0x476)](_0xf5c323[_0x3bd9a1(-0x25,0x36,0xd,-0x3d)],_0x119b7d[_0x3bd9a1(0x43,0x1b,0x57,0x96)])),console[_0x276075(0x404,0x391,0x366,0x3b7)](_0xf5c323[_0x3bd9a1(0x59,0x61,0xa0,0x59)],_0x119b7d),addLog(_0x3bd9a1(0x7e,-0x2f,0x5b,0x2f)+_0x3bd9a1(0xf7,0x6b,0xad,0x72)+JSON[_0x3bd9a1(0x41,0xd5,-0xe,0x60)](_0x119b7d)),_0xf5c323['sLnvf'](removeComfyUIImage);}}async function loadCachedImages(){function _0x22d1e1(_0x20ddfd,_0x3a494e,_0x4f2414,_0x456de2){return _0x2947d5(_0x20ddfd-0xec,_0x3a494e-0xba,_0x4f2414,_0x20ddfd- -0x30b);}function _0x29c428(_0x4e132b,_0x4dfb0f,_0xd9e92a,_0x440f81){return _0x42b03f(_0x4e132b-0x1f3,_0x4dfb0f-0x90,_0x4dfb0f,_0xd9e92a-0x200);}const _0x1f1101={'KzthV':function(_0x2fbdc0){return _0x2fbdc0();},'XYqug':_0x29c428(0x122,0xbd,0xa9,0x128)+'essing\x20Nov'+_0x29c428(0x9a,-0x2d,0x2f,0x1d)+':','frBnx':function(_0x7b90d9,_0x468c15){return _0x7b90d9(_0x468c15);},'SpgMi':'图片处理失败:\x20','BIxhZ':function(_0x1689d8,_0x4f5fae){return _0x1689d8(_0x4f5fae);},'GhMXd':function(_0x4e4432,_0x221e01){return _0x4e4432!==_0x221e01;},'opPYm':_0x22d1e1(0x28b,0x201,0x296,0x2df)+_0x22d1e1(0x215,0x1ea,0x28f,0x198)+_0x29c428(0x71,0x61,0xa8,0xfa)+_0x22d1e1(0x2b1,0x2f4,0x301,0x2d4),'NBUMt':function(_0x253f12,_0x42e3c9){return _0x253f12(_0x42e3c9);},'YkxFi':'Error\x20load'+_0x29c428(0xd5,0xae,0x5a,0x91)+_0x22d1e1(0x238,0x1b9,0x1dc,0x207)+_0x22d1e1(0x1de,0x219,0x1ff,0x198)+_0x22d1e1(0x29a,0x283,0x278,0x28e),'OzIVw':function(_0x2f6c86,_0x41929b){return _0x2f6c86!==_0x41929b;},'SpSRq':_0x29c428(0x4b,0xd4,0x8e,0xb),'bWDuO':_0x22d1e1(0x200,0x261,0x27d,0x1fa),'qNVZe':_0x29c428(0x40,0xf7,0x96,0x7f),'KsEnb':function(_0x14db2d,_0x31606b){return _0x14db2d(_0x31606b);},'ZvdXj':function(_0x57f62c,_0x44110d){return _0x57f62c===_0x44110d;},'GLhGs':function(_0x268347,_0x576f07){return _0x268347(_0x576f07);},'EBbnK':_0x22d1e1(0x2aa,0x2cd,0x30f,0x2f5)+'fyUI\x20image'+_0x22d1e1(0x2ad,0x263,0x26b,0x318)+'cache\x20form'+'at.\x20Please'+_0x29c428(0x8a,0x7a,0xf1,0x96)+_0x22d1e1(0x297,0x20c,0x244,0x259)+_0x29c428(0xe1,0x40,0x59,0xa8)+_0x29c428(0xd7,0xd0,0xda,0x15d)+'rmat.','nEyjr':_0x29c428(0xdb,0xa2,0xcc,0x14b),'wrQmp':_0x22d1e1(0x28b,0x27a,0x240,0x2a2)+'ing\x20cached'+_0x29c428(0x91,-0x27,0x5c,0xc4)+_0x29c428(0xfa,0xea,0xd1,0xcb)};await dbs['openDB']();try{const _0x46ea31=await dbs[_0x29c428(-0x39,0xb,0x1b,0x5f)+_0x29c428(0x128,0xa5,0xe1,0x64)](NAI_VIBE_CACHE_KEY);_0x46ea31&&_0x46ea31['data']&&_0x1f1101['BIxhZ'](updateNovelaiImagePreview,_0x46ea31['data']);}catch(_0x15b28d){_0x1f1101['GhMXd'](_0x29c428(0x2,-0xa,0x20,-0x6a),'QVdQB')?console[_0x29c428(0x7c,-0xf,0x3d,0xc4)](_0x1f1101[_0x29c428(0xe1,0x16f,0x10c,0xd7)],_0x15b28d):_0x355068();}try{const _0x34963b=await dbs['storeReadO'+_0x29c428(0x133,0x167,0xe1,0x12c)](NAI_CHAR_REF_CACHE_KEY);_0x34963b&&_0x34963b[_0x22d1e1(0x1e8,0x193,0x1ea,0x23d)]&&_0x1f1101[_0x22d1e1(0x24e,0x2b4,0x2a4,0x24e)](updateNovelaiCharRefImagePreview,_0x34963b[_0x22d1e1(0x1e8,0x25e,0x187,0x250)]);}catch(_0x1392ad){console[_0x22d1e1(0x1f8,0x1e9,0x23b,0x18e)](_0x1f1101[_0x29c428(0x8f,0xa6,0x31,0x44)],_0x1392ad);}try{if(_0x1f1101['OzIVw']('NyinE',_0x1f1101['SpSRq'])){const _0x4c5375=await dbs['storeReadO'+_0x29c428(0x5e,0x9b,0xe1,0x6e)](COMFYUI_REF_CACHE_KEY);if(_0x4c5375&&_0x4c5375[_0x29c428(0x55,0x2,0x2d,0xb5)]&&_0x4c5375[_0x29c428(-0x25,0xa,0x2d,0x1f)][_0x22d1e1(0x1e8,0x1a2,0x1ce,0x215)]&&_0x4c5375['data'][_0x22d1e1(0x1f9,0x171,0x1ce,0x25e)+_0x29c428(0x108,0x31,0x7f,0xc9)]){if(_0x1f1101['OzIVw'](_0x1f1101[_0x22d1e1(0x1b9,0x218,0x17c,0x213)],_0x1f1101[_0x29c428(-0x12,0xf4,0x6f,0xd2)])){const _0x4672bc=_0x4c5375[_0x29c428(-0x35,0x5f,0x2d,0x7b)],_0x4cfbcf=await fetch(_0x4672bc[_0x29c428(-0x60,-0xc,0x2d,0x5f)]),_0x123a36=await _0x4cfbcf['blob'](),_0x439a97=URL['createObje'+_0x29c428(0xde,0xbd,0xad,0x136)](_0x123a36);updateComfyUIImagePreview(_0x439a97),comfyuiImageObjectURL=_0x439a97,window[_0x22d1e1(0x1f7,0x227,0x1d8,0x281)+_0x22d1e1(0x290,0x27e,0x2b1,0x314)]=_0x4672bc[_0x22d1e1(0x1f9,0x1c2,0x1ce,0x271)+'Name'],_0x1f1101['KsEnb'](addLog,'从缓存加载Comfy'+_0x22d1e1(0x1ef,0x177,0x1dc,0x1ea)+_0x4672bc[_0x29c428(0x65,0x67,0x3e,0xf)+_0x22d1e1(0x23a,0x272,0x25d,0x24c)]),console[_0x29c428(0x4f,0x17,0x42,-0x41)](_0x22d1e1(0x2aa,0x268,0x2be,0x292)+'fyUI\x20image'+_0x29c428(0x106,0xbd,0x9a,0x28)+'e:\x20'+_0x4672bc[_0x29c428(0xa8,-0x19,0x3e,0x8f)+_0x22d1e1(0x23a,0x1e3,0x29b,0x249)]);}else _0x1f1101[_0x29c428(-0x4f,0x6e,0x27,-0x34)](_0x1c4f1e);}else{if(_0x4c5375&&_0x1f1101[_0x29c428(0x119,0x126,0xbb,0x75)](typeof _0x4c5375['data'],_0x29c428(0xb6,0xbe,0x7b,0x7b))){const _0x591857=await _0x1f1101[_0x29c428(0x4c,-0x20,0x2e,-0x3)](fetch,_0x4c5375[_0x22d1e1(0x1e8,0x181,0x214,0x199)]),_0x19eb5a=await _0x591857['blob'](),_0x109a32=URL[_0x22d1e1(0x1f1,0x252,0x1a9,0x1bb)+_0x22d1e1(0x268,0x214,0x28d,0x271)](_0x19eb5a);_0x1f1101[_0x29c428(0x96,0x65,0x9f,0xa9)](updateComfyUIImagePreview,_0x109a32),comfyuiImageObjectURL=_0x109a32,console[_0x22d1e1(0x20d,0x18e,0x221,0x1e6)](_0x1f1101['EBbnK']);}}}else{const _0x2ea20d=_0x6489a8?function(){if(_0x48d915){const _0x1c92b1=_0x4bcc61['apply'](_0x22a39e,arguments);return _0x519c01=null,_0x1c92b1;}}:function(){};return _0x50d5d3=![],_0x2ea20d;}}catch(_0x15fe66){_0x1f1101[_0x29c428(0x134,0x120,0xbb,0x42)](_0x1f1101[_0x29c428(0x83,0xfb,0x103,0x10a)],_0x1f1101[_0x22d1e1(0x2be,0x2b3,0x280,0x23d)])?console['error'](_0x1f1101[_0x29c428(-0x2b,-0x80,-0x4,-0x72)],_0x15fe66):(_0x51bc38['error'](_0x1f1101[_0x22d1e1(0x240,0x295,0x28c,0x234)],_0x5524e6),_0x1f1101[_0x22d1e1(0x24d,0x2d7,0x216,0x219)](_0xfd36d1,_0x1f1101[_0x29c428(0xca,0x55,0x8d,0x8b)]+_0x13ad25[_0x29c428(0xa0,0xf3,0xff,0x14d)]));}}export function initImageUpload(_0x2ea011){const _0x4817cd={'HJDJl':function(_0x34840b,_0xe18343){return _0x34840b+_0xe18343;},'NGjuo':_0x1836e5(-0x17a,-0x16c,-0x163,-0x17e)+':\x20','bcgUu':_0xf8ea9(0x7,-0x6a,-0xb5,-0x5f)+':','VnCxR':function(_0xd11656,_0x22f413){return _0xd11656!==_0x22f413;},'TjPbf':_0x1836e5(-0x1ff,-0x1a0,-0x1f6,-0x190),'MFGQo':_0x1836e5(-0x14f,-0x16f,-0x17f,-0x186)+_0xf8ea9(-0x48,-0xc9,-0xd1,-0x79),'ItvZq':function(_0x28b8ef,_0x32d0bf){return _0x28b8ef(_0x32d0bf);},'EAmFt':_0xf8ea9(0x26,0x7,-0x6e,0x62),'OYeyr':function(_0x2a71ef,_0x4237cb){return _0x2a71ef!==_0x4237cb;},'Vupsi':_0x1836e5(-0x138,-0x1a4,-0x1fb,-0x1a0),'ayOcP':_0x1836e5(-0x1f3,-0x27b,-0x197,-0x20d),'IBNMA':function(_0x361a23){return _0x361a23();},'YHUPO':_0x1836e5(-0x1ba,-0x14c,-0x126,-0x186)+_0xf8ea9(0x2b,-0xa,0x30,0x45)+_0x1836e5(-0x1bd,-0x117,-0xed,-0x175),'lHviz':_0x1836e5(-0x172,-0x22f,-0x17c,-0x1a8),'QPjId':_0xf8ea9(-0x10,0xf,0x9b,0x66)+'elect-imag'+_0xf8ea9(-0x69,-0x38,-0x6b,-0x90),'gLZDJ':_0x1836e5(-0x1d3,-0x1ca,-0x1a7,-0x1f7)+'t_novelai','kXyik':_0xf8ea9(-0xe7,-0xfa,-0xa2,-0x13c),'gNrgt':_0xf8ea9(-0x6a,-0xd8,-0x53,-0xe6)+'emove-imag'+_0xf8ea9(-0x56,-0x38,0x3a,-0x1b),'CXCbh':_0x1836e5(-0x11b,-0x10e,-0x184,-0x13b),'QVtrj':_0x1836e5(-0x17e,-0x114,-0x141,-0x105)+_0xf8ea9(-0x9d,-0x20,-0x48,-0x3c)+_0xf8ea9(-0xc,-0x47,-0x4d,-0xb2)+'-btn','RVtSI':_0x1836e5(-0x202,-0x220,-0x24f,-0x1f7)+_0xf8ea9(0x7d,0x1e,-0x5,0x74)+_0xf8ea9(-0x13e,-0xf1,-0xf0,-0x99),'mtFZK':_0x1836e5(-0x276,-0x213,-0x1c9,-0x1ec)+_0xf8ea9(-0x139,-0xe4,-0x15b,-0x7f)+_0xf8ea9(-0x7e,-0x47,0x44,-0xce)+'-btn','nGRCx':'#comfyui-s'+'elect-imag'+_0x1836e5(-0x165,-0x168,-0x1c0,-0x14c),'vlMYx':_0xf8ea9(-0x61,-0xe3,-0x9d,-0x97)+'t2'};_0x4817cd[_0x1836e5(-0xdd,-0xf2,-0x146,-0x156)](loadCachedImages);function _0xf8ea9(_0x2bac7c,_0x5e1e39,_0x28d569,_0x554fa4){return _0x2947d5(_0x2bac7c-0x1da,_0x5e1e39-0x182,_0x554fa4,_0x5e1e39- -0x5b8);}_0x2ea011[_0xf8ea9(-0x1e,-0x1e,0x6f,-0x3a)](_0x4817cd['QPjId'])['on'](_0xf8ea9(0x3c,-0x27,-0xb3,0x12),()=>{function _0x4e8fed(_0x55f45b,_0x234e7a,_0x1c138a,_0x48b149){return _0xf8ea9(_0x55f45b-0xf8,_0x1c138a-0x5f,_0x1c138a-0xad,_0x234e7a);}const _0x55ea15={'MjLDQ':function(_0x25ed7f,_0x48076f){return _0x25ed7f(_0x48076f);},'IPKDl':function(_0x4bebc9,_0x215fe8){function _0x303f5b(_0x896ed9,_0x44e403,_0x1b1435,_0x2849f6){return _0x4c64(_0x44e403-0xd7,_0x896ed9);}return _0x4817cd[_0x303f5b(0x28a,0x26c,0x1ef,0x2ec)](_0x4bebc9,_0x215fe8);},'cKqVD':_0x4817cd[_0x4e8fed(0x96,0x9f,0x61,0x91)],'FGHDc':_0x4817cd[_0x4e8fed(0x8,0xc3,0x4d,0xd2)]};function _0x678870(_0x11e7cb,_0x7977d3,_0x49580f,_0x260b10){return _0xf8ea9(_0x11e7cb-0x52,_0x260b10-0x46e,_0x49580f-0x4b,_0x49580f);}_0x4817cd['VnCxR'](_0x678870(0x404,0x493,0x4e8,0x471),_0x4817cd[_0x678870(0x46b,0x481,0x43f,0x460)])?document[_0x678870(0x47c,0x3d9,0x42d,0x434)+'ById'](_0x4817cd[_0x4e8fed(-0xa4,-0xd0,-0x94,-0x4b)])[_0x4e8fed(0x20,0x4e,0x38,0xb7)]():(_0x55ea15[_0x4e8fed(0x51,-0xae,-0x2e,-0x44)](_0x5bf078,_0x55ea15[_0x678870(0x3cb,0x48a,0x47e,0x455)](_0x55ea15[_0x4e8fed(-0x10,0x6c,0x3c,-0x4c)],_0x4f5a8c[_0x678870(0x41b,0x508,0x42a,0x47b)])),_0x2c2205[_0x678870(0x3fa,0x330,0x39d,0x3b9)](_0x55ea15[_0x678870(0x34d,0x3d1,0x389,0x38d)],_0x48a3f3),_0x1adf10(_0x678870(0x3b4,0x388,0x3d3,0x414)+_0x4e8fed(0x38,0x9b,0x48,0x2b)+_0x2ca5f0[_0x678870(0x463,0x46f,0x3c5,0x445)](_0xa040d3)),_0x458b18());}),_0x2ea011[_0xf8ea9(-0x9b,-0x1e,-0x7c,-0x85)](_0x4817cd[_0x1836e5(-0xd8,-0xd8,-0x152,-0x138)])['on'](_0x4817cd[_0x1836e5(-0x144,-0x1d6,-0x20d,-0x19a)],handleNovelaiImageUpload),_0x2ea011[_0xf8ea9(-0x5c,-0x1e,0x2b,0x66)](_0x4817cd[_0x1836e5(-0x1b8,-0x12a,-0x106,-0x17a)])['on'](_0x4817cd[_0xf8ea9(-0x1,-0x39,-0x47,0x32)],()=>{const _0x118df5={'WMoyI':function(_0x30f9e7,_0x4d96a2){function _0x5550da(_0x194baf,_0x38b6f0,_0x431cb6,_0x59c394){return _0x4c64(_0x194baf-0x2e1,_0x431cb6);}return _0x4817cd[_0x5550da(0x3d0,0x375,0x3c4,0x3d9)](_0x30f9e7,_0x4d96a2);},'fPjRU':function(_0x596b2f,_0x50344b){function _0x59c44c(_0x418208,_0x375f6c,_0x41cb7d,_0x35fe3a){return _0x4c64(_0x35fe3a- -0x1f6,_0x418208);}return _0x4817cd[_0x59c44c(-0x87,-0xd9,-0xa4,-0x61)](_0x596b2f,_0x50344b);},'wPjhh':_0x4817cd[_0x331085(0x37,-0x23,0xc,-0x1b)]};function _0x5c7214(_0x577215,_0x2ce0a3,_0x463aad,_0x400d9c){return _0xf8ea9(_0x577215-0x197,_0x2ce0a3-0x463,_0x463aad-0x17b,_0x400d9c);}function _0x331085(_0x253e81,_0x41d046,_0x1bc3e1,_0x4daaee){return _0xf8ea9(_0x253e81-0x1aa,_0x253e81-0x62,_0x1bc3e1-0x143,_0x41d046);}_0x4817cd[_0x331085(0x76,0xed,0xbe,0x6e)](_0x4817cd[_0x331085(-0x43,-0x25,0x3f,0x38)],_0x4817cd['ayOcP'])?_0x4817cd[_0x331085(0x20,0x47,0x46,0x89)](removeNovelaiImage):(_0x28956e[_0x331085(-0x53,-0xb6,-0x4a,-0x98)](_0x5c7214(0x3c9,0x41a,0x45b,0x42c)+_0x5c7214(0x369,0x3f2,0x420,0x3fe)+'elAI\x20char\x20'+_0x331085(-0x79,-0x6a,-0xdf,-0x101),_0x2b5d4e),_0x118df5['WMoyI'](_0x34abbc,_0x118df5[_0x331085(0x46,-0x31,0x77,0x5e)](_0x118df5[_0x331085(-0x60,-0xbf,-0xdf,-0xa2)],_0x4012e5[_0x331085(0x6f,0xa6,0x11,0x23)])));}),_0x2ea011['find'](_0x4817cd[_0xf8ea9(-0x4d,0x9,0x5f,0x11)])['on'](_0x4817cd[_0xf8ea9(-0x4e,-0x39,0x35,-0x6c)],()=>{function _0x2a7b57(_0x21b2aa,_0x142c02,_0x1cb657,_0x41b8b5){return _0xf8ea9(_0x21b2aa-0x1a5,_0x1cb657- -0x147,_0x1cb657-0x2c,_0x41b8b5);}function _0x593df5(_0x4e9d99,_0x98eb80,_0x530920,_0x4816d8){return _0x1836e5(_0x4e9d99-0x16,_0x4e9d99,_0x530920-0x66,_0x98eb80-0x537);}document['getElement'+_0x2a7b57(-0x14f,-0x17b,-0x1cf,-0x223)](_0x4817cd[_0x593df5(0x3ac,0x3c5,0x419,0x39d)])[_0x593df5(0x36f,0x3fc,0x415,0x482)]();}),_0x2ea011[_0x1836e5(-0x150,-0xc7,-0x133,-0x132)](_0x4817cd[_0x1836e5(-0x167,-0x111,-0x109,-0x145)])['on'](_0x4817cd[_0xf8ea9(-0x8b,-0x86,-0x96,-0x91)],handleNovelaiCharRefImageUpload),_0x2ea011[_0x1836e5(-0x16c,-0x148,-0xf6,-0x132)](_0x4817cd[_0x1836e5(-0x1c7,-0x207,-0x22f,-0x1d1)])['on'](_0x4817cd[_0xf8ea9(-0xa3,-0x39,-0x31,-0xb5)],()=>{function _0x37a50a(_0x319818,_0x54d2d4,_0x23775a,_0x51d75a){return _0x1836e5(_0x319818-0x108,_0x319818,_0x23775a-0x8a,_0x23775a-0x32a);}const _0x12297e={'wSltg':function(_0x5f043f,_0x852cc4){return _0x5f043f(_0x852cc4);}};function _0xc85850(_0x4ec294,_0x445fe4,_0x33fb26,_0x1bcf99){return _0xf8ea9(_0x4ec294-0x53,_0x445fe4- -0x16a,_0x33fb26-0x42,_0x33fb26);}_0x4817cd['lHviz']===_0x37a50a(0x171,0x1ac,0x182,0x1d9)?removeNovelaiCharRefImage():_0x12297e[_0x37a50a(0x181,0x17b,0x126,0xf9)](_0x16edc3,_0x1c3e04['data']);}),_0x2ea011[_0x1836e5(-0x134,-0x14a,-0x12f,-0x132)](_0x4817cd[_0xf8ea9(0x96,0x13,-0x2c,-0x26)])['on'](_0x4817cd[_0x1836e5(-0xc3,-0xef,-0x11b,-0x14d)],()=>{function _0x53fdf4(_0x7cfd78,_0x4f8d7b,_0x43d277,_0x462145){return _0x1836e5(_0x7cfd78-0x121,_0x462145,_0x43d277-0x1c5,_0x43d277-0x2d2);}document[_0x53fdf4(0x1fc,0x1e2,0x184,0x1f8)+'ById']('imageInput'+'2')['click']();}),_0x2ea011[_0xf8ea9(0x45,-0x1e,-0x45,-0xa2)](_0x4817cd['vlMYx'])['on'](_0x4817cd[_0x1836e5(-0x18d,-0x1cf,-0x1ef,-0x19a)],handleImageUpload2);function _0x1836e5(_0x4855dd,_0x4425af,_0x121d1e,_0x43c0b3){return _0x42b03f(_0x4855dd-0x16e,_0x4425af-0x6e,_0x4425af,_0x43c0b3- -0x6);}_0x2ea011[_0x1836e5(-0xb4,-0xe9,-0x143,-0x132)](_0xf8ea9(-0xb4,-0x62,-0x43,-0x91)+_0x1836e5(-0x280,-0x272,-0x20d,-0x1f4)+'e-btn')['on'](_0xf8ea9(-0x91,-0x27,-0x31,-0xa9),()=>{function _0x327977(_0x350a7a,_0x491412,_0x43fd4f,_0x2a4d6e){return _0x1836e5(_0x350a7a-0x1ce,_0x491412,_0x43fd4f-0x1f,_0x43fd4f-0x4b4);}_0x4817cd[_0x327977(0x2fe,0x2d2,0x35e,0x3bc)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};
//# sourceMappingURL=http://localhost:8000/image_upload.js.map