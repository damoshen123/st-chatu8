(function(_0x9eaea8,_0x1589ee){function _0x2a8b73(_0x4c0d90,_0x1fe746,_0x1c947c,_0xe04c63){return _0x5976(_0x4c0d90-0x132,_0xe04c63);}function _0x517497(_0x5246fb,_0x577e5d,_0xf23bfd,_0x3047b4){return _0x5976(_0x3047b4-0x5b,_0xf23bfd);}const _0x1ce291=_0x9eaea8();while(!![]){try{const _0x3c0a53=-parseInt(_0x517497(0x167,0x198,0x21e,0x1bd))/(-0x159f+0x1ab2+-0x512*0x1)*(parseInt(_0x517497(0x22d,0x240,0x23b,0x1df))/(-0x235c+-0x3*0x5d9+0xa95*0x5))+parseInt(_0x2a8b73(0x370,0x39e,0x3e1,0x30d))/(-0x2689+0x1375+0x1317)+parseInt(_0x2a8b73(0x36b,0x373,0x34b,0x2ee))/(-0x40d*-0x2+0x75a+-0xf70)*(parseInt(_0x517497(0x26a,0x30c,0x2af,0x297))/(-0x1*0x1c4e+0x10e+0x1b45))+parseInt(_0x2a8b73(0x347,0x3c2,0x31f,0x386))/(-0x4e1*0x7+-0xcd+0x32e*0xb)+parseInt(_0x2a8b73(0x297,0x230,0x252,0x2c8))/(-0x22d4+0x1eeb+0x3f0)+parseInt(_0x517497(0x19d,0x24a,0x261,0x218))/(-0x1ff2+0x2*0x1bb+0xe42*0x2)+-parseInt(_0x2a8b73(0x2eb,0x2f9,0x28a,0x336))/(0x2256+-0x4*0x2b9+-0x1*0x1769)*(parseInt(_0x517497(0x2c5,0x241,0x292,0x24a))/(-0x11f*0x7+0x31e*-0x3+0x113d));if(_0x3c0a53===_0x1589ee)break;else _0x1ce291['push'](_0x1ce291['shift']());}catch(_0x3c3900){_0x1ce291['push'](_0x1ce291['shift']());}}}(_0x13b9,0x1*0x203bc+-0x2ba77*-0x1+-0x1*-0xc3bf));const _0x3af9a1=(function(){let _0x216f09=!![];return function(_0x502ba2,_0x4ccbec){const _0x3ce61b=_0x216f09?function(){function _0x3e1201(_0x3433cb,_0x51d033,_0x1d7100,_0x36e192){return _0x5976(_0x3433cb-0x18,_0x51d033);}if(_0x4ccbec){const _0x457650=_0x4ccbec[_0x3e1201(0x1f7,0x198,0x20a,0x185)](_0x502ba2,arguments);return _0x4ccbec=null,_0x457650;}}:function(){};return _0x216f09=![],_0x3ce61b;};}()),_0x255309=_0x3af9a1(this,function(){function _0x5e8b52(_0x602d96,_0x1c5a02,_0xa4767f,_0x50a694){return _0x5976(_0x50a694-0xf1,_0xa4767f);}const _0x44562d={};_0x44562d[_0x5e8b52(0x2ff,0x2a7,0x253,0x283)]=_0x5392b7(0x322,0x38c,0x323,0x2e1)+'+$';function _0x5392b7(_0x1ec9da,_0x3e43b5,_0x189c96,_0x5c9aa3){return _0x5976(_0x189c96-0x15b,_0x5c9aa3);}const _0x395a20=_0x44562d;return _0x255309['toString']()[_0x5392b7(0x2d3,0x369,0x2ef,0x287)]('(((.+)+)+)'+'+$')[_0x5e8b52(0x361,0x2be,0x35a,0x2ef)]()[_0x5e8b52(0x2bd,0x2f3,0x319,0x32c)+'r'](_0x255309)[_0x5e8b52(0x214,0x20f,0x236,0x285)](_0x395a20[_0x5392b7(0x2fa,0x344,0x2ed,0x2a6)]);});_0x255309();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';function _0x13b9(){const _0x59f4ef=['Aw5SAw5LlwzSzq','uNzKC0m','x25VDMvSywK','y2XPy2S','twPoENO','qvfIyNq','ug5yzeq','i2nVBwz5DwKTAq','DMDTs24','y2HHBMDL','ELf5Axm','zM91BMqGlsb1CW','A1LUEuq','ExvPx3jLzL9PBq','tKrQDgK','mJaWzMjuy3Dd','uNb1t0W','z2vFBM92zwXHAq','AejXsha','CgXHy2vOB2XKzq','zwXwr1i','zwXbssbJAgfYia','rLn3DLO','rvPrEgy','BwvZC2fNzq','yxbWzw5K','ihrVihvWzgf0zq','s1Lgr2e','zgf0yq','D3nlCeS','Dg9tDhjPBMC','ue9tva','zMfwB0C','tvP3ELG','wurVEwy','C3rVCMvszwfKvW','CLnHsMe','rxjYB3iGBg9Hza','Aw1Hz2u','ihjLlxvWBg9Hza','C2vYDMvYrMLSzq','CKrPAhO','CMvMigLTywDLoG','CNvdEhK','zKLTywDL','CNDny1G','i25VDMvSywKTCW','D2HnruO','vu1mugG','C3rHCNrZv2L0Aa','rvrhB3y','B3bLBKrc','yMXVyG','mZq0nde1mef5rNzpyq','zw1VDMuTy2HHCG','A2LUsK0','Df9UB3zLBgfP','tLrAwhG','AKnqCha','zxCTy29UDgfPBG','ywDL','Bg9N','AgfYifjLzIbPBq','ENvir3m','6k+35ywi6k6+572Uq29TzNLv','5zMO6l+u5zUE5PwW5O2UoIa','BMX5','zgf0ytPPBwfNzq','vxjNtMS','z2v0rwXLBwvUDa','A2fVDhvWAwfU','Bfzbr1K','qwDnqxm','tvnxzxu','CgHTz1O','yxqUifbSzwfZzq','B0zlD1u','w0nOyxjszwzDia','zxjYB3i','twLPBKO','vxP6v20','thDSqMi','y29TzNL1AwnHBG','AgfYlxjLzI1PBq','z2vFBMfPx2nOyq','t2XKignOyxjHyW','ywrgwwu','y2fJAgvFBM92zq','y3rvuKW','ntGXmNbvzgTRBa','AhDOrxm','y29UC3rYDwn0BW','mJe5nwniwg5hwG','5zU+54Mh5Ase55cg5AsX6lsLoIa','odGXmJq3yK1dtgPm','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','zLf2Beq','t014txG','rxjYB3iGChjVyW','i2nVBwz5DwKTCW','Bg5pDMm','AM5Vq2m','zw1VDMuTAw1HzW','zMLUza','C3rYAw5N','y3jLyxrLt2jQzq','zgLZCgXHEq','yMXVy2S','ywfXCxi','q0PgvvG','zMHJDg4','ELrkruC','BM9Uzq','C3jJ','txPfEeG','uKrRAxq','qNLjza','q0TNAKK','yNLuqMi','AwjLigLTywDLoG','AxnvqKC','DgvYihjLzMvYzq','zxiGlNn0lwnOyq','vvLqtgW','EffuDKu','ufH6rxy','Bw92zs1PBwfNzq','i25VDMvSywKTCG','vLfhEKG','zwXLy3qTy2HHCG','Aw1Hz2uVCg5N','BwfNzs1WCMv2Aq','ywv0q20','DfzvwLG','zwzFAw1Hz2u','mZG1mNHirwDLvW','DhjPBq','BfHmAKC','mJm5ndyWovLvyKrpvq','BMfPm1zPyMvuCG','zwXbssbPBwfNzq','t09KshO','ChjLDMLLD0LTyq','weXNBfK','sNvttfq','zMLSzxm','zezrALy','CMv2B2TLt2jQzq','B2HoCMq','Aw5NignHy2HLza','C3rVCMvszwfKtW','ELLsuKy','ie5VDMvSquKGqW','zxnZAw5Nie5VDG','Bw92zs1JAgfYlq','z3L4wLK','zLzUywu','tg9HzgvKienVBq','zhvfzNC','tMfTzq','lxjLzI1PBwfNzq','CL9Yzwy','qM5xvvm','C3rLBq','uxbRAeK','C3rVCMvezwXLDa','y2fJAgvFy29TzG','Aw5Nig5LDYbZEq','CMvZDwX0','mti4D0jQwhby','yMXVyJO','CMvM','6zsz6k+V6k+M5OofoG','ywDLlxbYzxzPzq','uNHTt1a','igzYB20GB2XKia','AfrtyKK','ufjzze0','DLPLy0W','BM92zwXHAs1Yzq','v3jHtxq','lwj0BG','z2uY','ywHpwM4','DefbquO','C2vHCMnO','ienVBwz5vuKGAq','Aw1Hz2vjBNb1Da','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','zM9nC2m','zu9nwhK','Dgv4Da','t2TiD0K','zwXLy3qTAw1HzW','zNLvssbPBwfNzq','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','C3bSAxq','x3jLzG','l3vWBg9Hzc9PBq','yvrmve0','BMfPm0nOyxjszq','BwvUDhmGBM90ia','ugfXzxG','DgfYz2v0','rwvKs3O','CIaUC3qTy2HHDa','B25SB2fKzw5K','zMXLEa','CMfUC2zLCL9PBq','AKnWB0y','Dg9Y','BMnLifvjigvSzq','Dhu4lwLTywDLlq','A3LXD3y','yw5ZzMvYsw1HzW','CMvHzefZrgf0yq','uuPoDvG','EgDVDhG','tNzlD0i','EMn5AKm','C3rYAw5NAwz5','sKjHsey','nJqXodK4vKveBwXw','DensrwK','y29TzNL1AvvYBa','y29TzNL1As1Yzq','mtq4otq4ogjjsvjcuW','tLDNCKC','x25HAv9JAgfYxW','BgfJzwHVBgrLCG','Df9UywLFy2HHCG','reDSuwy','Be5mDNi','y3DHwgG','ie5VDMvSquKGvG','tM9Itwe','CML0zq','kcGOlISPkYKRkq','CM1HDc4','5lUo57Yt5A2y5yQG6l29q29TzNK','BMfTzq','zs1IDg4','DwPOtMK','i2LTywDLsw5WDq','ztOG','CxvLCNLtzwXLyW','t2Hvzuu','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','qMrPEu0','C3r5Bgu','ywDLoG','Dxftu1a','BgfPx3zPyMvFDa','wu5cwhi','BwfNztO','tMX6wKe','ANnVBG','B213CuW','sKTJvg0','5zUE5PwW5O2UoG','yxbWBhK'];_0x13b9=function(){return _0x59f4ef;};return _0x13b9();}function _0x5edf83(_0x2000e0,_0x297d0d,_0x232937,_0x3148d6){return _0x5976(_0x232937- -0xdd,_0x297d0d);}function _0x18eb15(_0x4236c8,_0x2c646c,_0x184759,_0x13158a){return _0x5976(_0x184759- -0x139,_0x13158a);}import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x18eb15(0x94,0x150,0xfe,0x101)+_0x5edf83(0x97,0x9f,0xfa,0x7b)+_0x5edf83(0xce,0x8e,0xce,0x72)+_0x5edf83(0x1ae,0xd9,0x13f,0x1bf),NAI_CHAR_REF_CACHE_KEY=_0x18eb15(0x179,0xf9,0xfe,0x9b)+'lai_char_r'+_0x18eb15(0x66,-0x41,0x28,-0x2b),COMFYUI_REF_CACHE_KEY=_0x18eb15(-0x6,0x44,0x48,0xb)+_0x5edf83(0x13a,0xd9,0x110,0xa1)+_0x5edf83(0x13f,0xf5,0x13f,0x166);let nai3VibeTransferImageMimeType='image/png',nai3CharRefImageMimeType=_0x5edf83(0x190,0x1c4,0x185,0x1fc),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x29fe0c){const _0x1e03dd={};_0x1e03dd[_0x15fef6(-0xf9,-0x179,-0x133,-0xd8)]=_0x15fef6(-0x1c4,-0x10a,-0x149,-0x1ab)+_0x53d67c(-0x1f3,-0x255,-0x184,-0x181),_0x1e03dd[_0x53d67c(-0x1fa,-0x215,-0x255,-0x1c5)]=_0x53d67c(-0x256,-0x29d,-0x236,-0x2d6)+_0x53d67c(-0x186,-0x1f9,-0x1a9,-0x159)+_0x15fef6(-0x184,-0x184,-0x122,-0xb4),_0x1e03dd['KYFGa']='data:image',_0x1e03dd[_0x53d67c(-0x1b8,-0x195,-0x1cd,-0x231)]=function(_0x3af532,_0xb6abe9){return _0x3af532!==_0xb6abe9;},_0x1e03dd[_0x15fef6(-0x6d,-0x7a,-0x55,-0x97)]=_0x53d67c(-0x251,-0x244,-0x2c6,-0x24f),_0x1e03dd['byTBb']=_0x15fef6(-0xde,-0xd9,-0xdc,-0x14a),_0x1e03dd[_0x15fef6(-0xbc,-0xb2,-0xfc,-0xb2)]=_0x15fef6(-0x5b,-0x57,-0x67,-0xcf),_0x1e03dd[_0x53d67c(-0x200,-0x1ee,-0x23d,-0x272)]=_0x53d67c(-0x194,-0x16e,-0x14c,-0x1ae),_0x1e03dd[_0x15fef6(-0x24,-0xa5,-0x56,-0x85)]=_0x53d67c(-0x204,-0x1ab,-0x267,-0x279)+'x',_0x1e03dd['MSWeu']=_0x53d67c(-0x23a,-0x1bb,-0x285,-0x242);const _0x139fff=_0x1e03dd;function _0x53d67c(_0x371ee6,_0x267e9f,_0x4eb1df,_0x381f5e){return _0x5edf83(_0x371ee6-0xa5,_0x4eb1df,_0x371ee6- -0x307,_0x381f5e-0x1a5);}const _0x23c7aa=document[_0x53d67c(-0x1bf,-0x1be,-0x153,-0x1c0)+_0x53d67c(-0x190,-0x1b7,-0x19d,-0x144)](_0x139fff[_0x15fef6(-0xdc,-0x177,-0x133,-0x15f)]),_0xfe1154=document['querySelec'+_0x53d67c(-0x237,-0x289,-0x245,-0x238)]('#novelai-i'+_0x15fef6(0x2c,-0x8,-0x4f,0x17)+_0x53d67c(-0x1c9,-0x1ae,-0x179,-0x1a7)+_0x53d67c(-0x18a,-0x193,-0x146,-0x204)+'tu8-image-'+_0x15fef6(-0x136,-0x8e,-0xbf,-0x61)+'r');function _0x15fef6(_0x10e900,_0xc90a7e,_0x8b5921,_0x4b3d40){return _0x18eb15(_0x10e900-0x1d8,_0xc90a7e-0x16b,_0x8b5921- -0x179,_0xc90a7e);}const _0x475723=document[_0x15fef6(-0xb,-0xc2,-0x8d,-0x38)+'ById'](_0x139fff[_0x15fef6(-0x4d,-0x54,-0xc8,-0xc4)]);if(_0x29fe0c&&_0x29fe0c[_0x53d67c(-0x1d3,-0x217,-0x181,-0x1d8)](_0x139fff[_0x15fef6(-0xbb,-0xd2,-0xb7,-0x119)])){if(_0x139fff[_0x15fef6(-0x44,-0x9,-0x86,-0x8e)](_0x139fff[_0x15fef6(-0x97,-0x56,-0x55,-0xf)],_0x139fff[_0x53d67c(-0x18e,-0x1ad,-0x11c,-0x11f)])){_0x23c7aa[_0x53d67c(-0x193,-0x1b1,-0x180,-0x1c1)]=_0x29fe0c,_0x23c7aa['style']['display']=_0x139fff[_0x15fef6(-0x138,-0x114,-0xfc,-0xaa)],_0xfe1154[_0x53d67c(-0x210,-0x1a7,-0x285,-0x219)][_0x15fef6(-0xaf,-0x40,-0x68,-0x6b)]=_0x139fff[_0x53d67c(-0x200,-0x263,-0x1f8,-0x195)],_0x475723[_0x15fef6(-0x10c,-0x141,-0xde,-0x6a)]['display']=_0x139fff[_0x53d67c(-0x188,-0x179,-0x1cf,-0x1a3)];const _0x3edb2a=_0x29fe0c[_0x15fef6(-0xb1,-0xa7,-0x113,-0x159)](','),_0x3d44e4=_0x3edb2a[-0x3*-0x4ef+-0x1414+0x1*0x547]['split'](':')[0x1462+-0x1177*0x1+-0x2*0x175][_0x53d67c(-0x245,-0x269,-0x2c0,-0x238)](';')[-0xbd+-0x220b+-0xb98*-0x3];nai3VibeTransferImageMimeType=_0x3d44e4,window[_0x53d67c(-0x27e,-0x21c,-0x2e7,-0x261)+_0x53d67c(-0x233,-0x1b0,-0x26b,-0x1c9)+'e']=_0x3edb2a[0x23e3+0x248a+-0xe7c*0x5];const _0x6d0607={};_0x6d0607['id']=NAI_VIBE_CACHE_KEY,_0x6d0607['data']=_0x29fe0c,dbs[_0x53d67c(-0x1e1,-0x1e5,-0x208,-0x22a)+_0x15fef6(-0x145,-0xac,-0xeb,-0x77)](_0x6d0607);}else{const _0x2ab900=_0xbc7d54[_0x53d67c(-0x205,-0x241,-0x24c,-0x1c4)](_0x52f999,arguments);return _0x243842=null,_0x2ab900;}}else _0x23c7aa[_0x15fef6(-0x5,-0x6a,-0x61,-0x8a)]='',_0x23c7aa[_0x15fef6(-0x90,-0xdb,-0xde,-0x10e)][_0x15fef6(-0x89,0x9,-0x68,-0x40)]='none',_0xfe1154[_0x15fef6(-0x9a,-0xdd,-0xde,-0x116)][_0x15fef6(-0x2f,-0x46,-0x68,-0x6e)]=_0x139fff[_0x15fef6(-0x20,-0x81,-0x89,-0xb6)],_0x475723[_0x53d67c(-0x210,-0x1c8,-0x192,-0x1dc)][_0x15fef6(0x1,-0x75,-0x68,-0xa6)]=_0x139fff['MjNzz'],window[_0x53d67c(-0x27e,-0x24d,-0x2e3,-0x297)+_0x15fef6(-0xf3,-0x98,-0x101,-0x13e)+'e']=null;}function removeNovelaiImage(){const _0x1b592b={'wsKpK':function(_0x17aadc,_0x15f6c2){return _0x17aadc(_0x15f6c2);}};function _0xe6b75f(_0x88ba66,_0x3b49a5,_0x57861a,_0x4b5aa0){return _0x18eb15(_0x88ba66-0x5c,_0x3b49a5-0x1aa,_0x4b5aa0- -0x1c1,_0x88ba66);}_0x1b592b[_0xe6b75f(-0xf2,-0xb0,-0x92,-0xfd)](updateNovelaiImagePreview,null);function _0x4af126(_0x160c8a,_0x2cbf3e,_0x2ec727,_0xa9beea){return _0x18eb15(_0x160c8a-0x15,_0x2cbf3e-0x90,_0x2cbf3e-0x2e8,_0xa9beea);}dbs[_0xe6b75f(-0x1ce,-0x142,-0x184,-0x17a)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x486cd6){function _0x1cd603(_0x2f3e77,_0x16a51f,_0x1be4c6,_0x28211c){return _0x5edf83(_0x2f3e77-0x31,_0x16a51f,_0x2f3e77- -0x176,_0x28211c-0x98);}function _0x1da6c2(_0x3dcd1e,_0x369910,_0x475513,_0x142baf){return _0x5edf83(_0x3dcd1e-0x1aa,_0x475513,_0x369910-0x24c,_0x142baf-0x14b);}const _0x250c41={'haFnB':function(_0x203e81,_0x32c7af,_0x4d8582){return _0x203e81(_0x32c7af,_0x4d8582);},'jCPpp':_0x1cd603(-0x11,0x52,-0x82,0x40)+_0x1da6c2(0x2bb,0x2e3,0x2d2,0x31d)+_0x1da6c2(0x2da,0x2d6,0x2e9,0x288)+':','RxmOP':function(_0x33fa33,_0x5f38c7){return _0x33fa33(_0x5f38c7);},'zTJEG':function(_0x2d2291,_0x238bf0){return _0x2d2291+_0x238bf0;},'UrgNk':_0x1da6c2(0x3d9,0x3ac,0x334,0x348)},_0x96675c=_0x486cd6['target'][_0x1cd603(-0xe7,-0x15c,-0x169,-0xa2)][-0x5*0x3f7+0x2534*0x1+0x1*-0x1161];if(!_0x96675c)return;try{const _0x5b8dcf=await _0x250c41['haFnB'](processUploadedImage,_0x96675c,!![]);updateNovelaiImagePreview(_0x5b8dcf);}catch(_0x369b45){console['error'](_0x250c41[_0x1da6c2(0x35c,0x389,0x337,0x34e)],_0x369b45),_0x250c41[_0x1cd603(-0xca,-0xe1,-0xe3,-0x8b)](alert,_0x250c41[_0x1cd603(-0x4,-0x1c,0x2b,0x1b)](_0x250c41[_0x1da6c2(0x40e,0x393,0x317,0x34f)],_0x369b45[_0x1da6c2(0x2f0,0x367,0x379,0x3d1)]));}}function updateNovelaiCharRefImagePreview(_0x10013f){const _0x321209={};_0x321209[_0x5416e5(0x367,0x350,0x341,0x375)]=_0x194aa8(0x45d,0x47a,0x4e4,0x4c0)+_0x194aa8(0x394,0x3e5,0x3fb,0x37a)+_0x5416e5(0x34a,0x3a1,0x353,0x2e2)+_0x194aa8(0x4ce,0x4cc,0x533,0x516),_0x321209[_0x194aa8(0x3a7,0x3e4,0x3af,0x407)]=_0x5416e5(0x27a,0x363,0x2f7,0x280)+_0x194aa8(0x4b6,0x4a9,0x49a,0x47f)+_0x194aa8(0x3b1,0x3f1,0x39a,0x450),_0x321209[_0x194aa8(0x51b,0x4c7,0x4de,0x446)]='#novelai-c'+_0x5416e5(0x428,0x428,0x3c1,0x43d)+_0x194aa8(0x3ac,0x3fd,0x432,0x3f6)+'w-containe'+_0x194aa8(0x407,0x41d,0x3cf,0x49e)+'u8-image-p'+_0x5416e5(0x3a1,0x3c4,0x34e,0x343),_0x321209[_0x5416e5(0x31e,0x327,0x361,0x376)]=_0x194aa8(0x3c9,0x403,0x46b,0x42b)+_0x5416e5(0x379,0x2b2,0x303,0x30c)+'ref-image-'+'btn',_0x321209[_0x5416e5(0x305,0x38f,0x37e,0x3b5)]=function(_0x533a8f,_0x1279e6){return _0x533a8f||_0x1279e6;};function _0x194aa8(_0xfc2e9f,_0x1d69d5,_0x1fa2f6,_0x3df665){return _0x18eb15(_0xfc2e9f-0x6a,_0x1d69d5-0x7d,_0x1d69d5-0x3ae,_0x1fa2f6);}_0x321209[_0x5416e5(0x319,0x316,0x330,0x31a)]=_0x5416e5(0x3ea,0x367,0x3bb,0x394)+_0x194aa8(0x4ab,0x4aa,0x431,0x474)+_0x5416e5(0x36b,0x41b,0x3e7,0x3ba)+_0x194aa8(0x467,0x423,0x3b3,0x3dc)+_0x5416e5(0x35f,0x373,0x332,0x307)+_0x194aa8(0x408,0x460,0x4a1,0x3df)+_0x5416e5(0x374,0x360,0x310,0x2fc)+_0x194aa8(0x3e9,0x3f3,0x455,0x3cb),_0x321209[_0x5416e5(0x3db,0x41c,0x3e6,0x443)]=_0x194aa8(0x461,0x498,0x4f9,0x503),_0x321209[_0x194aa8(0x491,0x437,0x492,0x3c0)]=function(_0x23d827,_0xf4c25d){return _0x23d827===_0xf4c25d;},_0x321209[_0x5416e5(0x448,0x3aa,0x3db,0x398)]=_0x5416e5(0x2bf,0x307,0x329,0x313),_0x321209[_0x5416e5(0x36b,0x36f,0x390,0x311)]='block',_0x321209[_0x194aa8(0x4fc,0x4a6,0x500,0x4bd)]=_0x5416e5(0x369,0x44d,0x3de,0x453),_0x321209[_0x5416e5(0x35b,0x313,0x304,0x2ec)]=_0x194aa8(0x3fb,0x455,0x4d0,0x4b0)+'x',_0x321209['lnOvc']=function(_0x5950f6,_0x5adfb6){return _0x5950f6===_0x5adfb6;},_0x321209['PRYdM']='yPVkM',_0x321209[_0x5416e5(0x379,0x365,0x35f,0x32c)]='0|3|1|4|2',_0x321209[_0x5416e5(0x379,0x3b6,0x382,0x33f)]=_0x5416e5(0x3a1,0x2f0,0x338,0x37c);const _0x15b519=_0x321209;function _0x5416e5(_0x3b7107,_0x3954b4,_0x1d5512,_0xa6a77d){return _0x18eb15(_0x3b7107-0xe,_0x3954b4-0x70,_0x1d5512-0x2c7,_0x3954b4);}const _0x4ed72f=document[_0x5416e5(0x3e1,0x36d,0x3b3,0x33f)+_0x194aa8(0x4cb,0x4c9,0x46b,0x4d4)](_0x15b519[_0x194aa8(0x3bc,0x3e4,0x455,0x466)]),_0x54f8dc=document[_0x194aa8(0x3f8,0x445,0x44d,0x449)+'tor'](_0x15b519[_0x5416e5(0x3f9,0x438,0x3e0,0x366)]),_0x42c531=document['getElement'+_0x5416e5(0x3a4,0x369,0x3e2,0x372)](_0x15b519[_0x194aa8(0x439,0x448,0x3e4,0x457)]);if(_0x15b519[_0x5416e5(0x375,0x3fd,0x37e,0x3d8)](!_0x4ed72f,!_0x54f8dc)||!_0x42c531){console[_0x5416e5(0x376,0x405,0x3ab,0x367)](_0x15b519[_0x194aa8(0x3ec,0x417,0x3c5,0x3c7)]);return;}if(_0x10013f&&_0x10013f[_0x194aa8(0x40e,0x486,0x503,0x421)](_0x15b519[_0x194aa8(0x4e1,0x4cd,0x54d,0x478)])){if(_0x15b519[_0x194aa8(0x3d2,0x437,0x43f,0x447)](_0x15b519[_0x194aa8(0x4be,0x4c2,0x4b4,0x4e0)],_0x5416e5(0x433,0x3c6,0x3b5,0x42d)))_0x1745a2[_0x194aa8(0x4ff,0x4a3,0x4bd,0x459)](_0x15b519[_0x194aa8(0x446,0x428,0x457,0x42d)],_0x243433);else{_0x4ed72f['src']=_0x10013f,_0x4ed72f[_0x194aa8(0x4c8,0x449,0x3ff,0x3e6)]['display']=_0x15b519[_0x5416e5(0x3b0,0x30e,0x390,0x3d8)],_0x54f8dc[_0x5416e5(0x351,0x3a9,0x362,0x3b4)]['display']=_0x15b519[_0x194aa8(0x470,0x4a6,0x524,0x523)],_0x42c531[_0x5416e5(0x322,0x2e1,0x362,0x3ab)][_0x194aa8(0x50c,0x4bf,0x506,0x515)]=_0x15b519[_0x194aa8(0x3a7,0x3eb,0x385,0x407)];const _0x4ae56d=_0x10013f[_0x194aa8(0x401,0x414,0x418,0x480)](','),_0x56aa8a=_0x4ae56d[-0x2*0x65f+0x38a+0x934][_0x5416e5(0x369,0x2af,0x32d,0x34d)](':')[-0xca*0x15+0x1403+0x1b8*-0x2][_0x194aa8(0x3b4,0x414,0x3e2,0x469)](';')[0x3e9*-0x9+-0xf*0x1be+0x3d53];nai3CharRefImageMimeType=_0x56aa8a,window[_0x194aa8(0x41f,0x418,0x414,0x3a9)+_0x5416e5(0x3d2,0x412,0x39a,0x3c8)]=_0x4ae56d[0x30f*-0x2+0x20c5+0x2*-0xd53];const _0x2d6628={};_0x2d6628['id']=NAI_CHAR_REF_CACHE_KEY,_0x2d6628['data']=_0x10013f,dbs['storeReadW'+_0x5416e5(0x3ca,0x310,0x355,0x3b3)](_0x2d6628);}}else{if(_0x15b519[_0x194aa8(0x4f6,0x4b9,0x535,0x485)](_0x15b519['PRYdM'],_0x15b519[_0x5416e5(0x328,0x2cb,0x31a,0x366)])){const _0x14e980=_0x15b519[_0x5416e5(0x3d7,0x349,0x35f,0x32b)]['split']('|');let _0x99d47=-0xee8+-0xffc+0x3*0xa4c;while(!![]){switch(_0x14e980[_0x99d47++]){case'0':_0x4ed72f['src']='';continue;case'1':_0x54f8dc[_0x5416e5(0x315,0x30d,0x362,0x385)][_0x194aa8(0x50c,0x4bf,0x4e4,0x4c6)]=_0x15b519[_0x5416e5(0x3f4,0x32f,0x382,0x3ff)];continue;case'2':window[_0x194aa8(0x430,0x418,0x477,0x46f)+'fImage']=null;continue;case'3':_0x4ed72f[_0x194aa8(0x497,0x449,0x409,0x430)][_0x194aa8(0x4af,0x4bf,0x4c1,0x4da)]='none';continue;case'4':_0x42c531['style'][_0x194aa8(0x536,0x4bf,0x4c7,0x477)]=_0x15b519['LwlBb'];continue;}break;}}else{if(_0x2c1873){const _0x28a245=_0x59fda9[_0x194aa8(0x44b,0x454,0x4ba,0x4d0)](_0x55d90f,arguments);return _0x32fafa=null,_0x28a245;}}}}function _0x5976(_0x4fbaf6,_0x17920e){_0x4fbaf6=_0x4fbaf6-(-0x4*-0x28f+-0x1c13*0x1+0x29*0x78);const _0x341fd1=_0x13b9();let _0x558837=_0x341fd1[_0x4fbaf6];if(_0x5976['NhbIuH']===undefined){var _0x212bdc=function(_0x1334e1){const _0x562044='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4a39c7='',_0x5eae7a='',_0x22d866=_0x4a39c7+_0x212bdc;for(let _0xa45d0d=-0x9*0x61+0xe22+-0x2d*0x3d,_0xbe0c46,_0x4091ab,_0x5de532=0x2508+0x17*0x8+0x97*-0x40;_0x4091ab=_0x1334e1['charAt'](_0x5de532++);~_0x4091ab&&(_0xbe0c46=_0xa45d0d%(0x192f+-0xc03*-0x2+-0x3131)?_0xbe0c46*(-0x1139*0x1+-0x17d9*0x1+-0x6e3*-0x6)+_0x4091ab:_0x4091ab,_0xa45d0d++%(-0x236a+0x1ab0+-0x1*-0x8be))?_0x4a39c7+=_0x22d866['charCodeAt'](_0x5de532+(0x1d3*0x13+0xc*0x29b+-0x41e3*0x1))-(0x1ce9+-0x966+-0x1379)!==-0xde9+0x146b+-0x682?String['fromCharCode'](-0x202b+0x1b5b+-0x5cf*-0x1&_0xbe0c46>>(-(0x1902+-0x11d3+-0xb*0xa7)*_0xa45d0d&0x20a4+0x9*0x3fd+-0x1*0x4483)):_0xa45d0d:-0x26e*-0x3+-0x23b+-0x50f){_0x4091ab=_0x562044['indexOf'](_0x4091ab);}for(let _0x31cb91=0xe1d*-0x1+-0x2285*0x1+-0x4dd*-0xa,_0x2fc94a=_0x4a39c7['length'];_0x31cb91<_0x2fc94a;_0x31cb91++){_0x5eae7a+='%'+('00'+_0x4a39c7['charCodeAt'](_0x31cb91)['toString'](-0xf06+-0xa6*0x10+0x1*0x1976))['slice'](-(0x116*0x19+-0x1b1d+-0x1*0x7));}return decodeURIComponent(_0x5eae7a);};_0x5976['JOsMrA']=_0x212bdc,_0x5976['LSyIGu']={},_0x5976['NhbIuH']=!![];}const _0x2081a8=_0x341fd1[-0x1c07+-0x2*-0x153+-0x49*-0x59],_0x41c765=_0x4fbaf6+_0x2081a8,_0x468587=_0x5976['LSyIGu'][_0x41c765];if(!_0x468587){const _0x56d8ab=function(_0x27a581){this['FfETAi']=_0x27a581,this['iGnvKa']=[0xfea+0x1*-0x1dc7+-0x2*-0x6ef,-0xcd9+0xa3b+0x29e,-0x1ab7+0x49*-0x7c+0x3*0x14b1],this['KQWJfn']=function(){return'newState';},this['SCtXbR']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['gxfvdi']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x56d8ab['prototype']['hAMVCY']=function(){const _0x13782a=new RegExp(this['SCtXbR']+this['gxfvdi']),_0x1c0076=_0x13782a['test'](this['KQWJfn']['toString']())?--this['iGnvKa'][-0x73*-0x17+-0xe3b*-0x1+-0x188f]:--this['iGnvKa'][-0x35f*-0x2+0xae8+0x11a6*-0x1];return this['pLIJfD'](_0x1c0076);},_0x56d8ab['prototype']['pLIJfD']=function(_0x227b55){if(!Boolean(~_0x227b55))return _0x227b55;return this['UUljKi'](this['FfETAi']);},_0x56d8ab['prototype']['UUljKi']=function(_0x3f45e3){for(let _0x5e7c85=-0x1c20+-0x2*0x1381+0xd*0x52a,_0x127381=this['iGnvKa']['length'];_0x5e7c85<_0x127381;_0x5e7c85++){this['iGnvKa']['push'](Math['round'](Math['random']())),_0x127381=this['iGnvKa']['length'];}return _0x3f45e3(this['iGnvKa'][0xe*-0x2e+0x1*-0x869+0xaed]);},new _0x56d8ab(_0x5976)['hAMVCY'](),_0x558837=_0x5976['JOsMrA'](_0x558837),_0x5976['LSyIGu'][_0x41c765]=_0x558837;}else _0x558837=_0x468587;return _0x558837;}function removeNovelaiCharRefImage(){const _0x591564={'aaqqr':function(_0x12149c,_0x1736dc){return _0x12149c(_0x1736dc);}};function _0x5d8f0a(_0x2939ef,_0x45ab98,_0x2b893d,_0x16d014){return _0x18eb15(_0x2939ef-0x163,_0x45ab98-0x99,_0x2939ef- -0x26e,_0x2b893d);}_0x591564[_0x5d8f0a(-0x15b,-0x167,-0x1dd,-0x19f)](updateNovelaiCharRefImagePreview,null);function _0x208158(_0x3594b1,_0x2a50f9,_0x1bcc8d,_0x30d45d){return _0x18eb15(_0x3594b1-0xdc,_0x2a50f9-0x84,_0x3594b1-0x357,_0x30d45d);}dbs[_0x208158(0x39e,0x31f,0x3c4,0x3be)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0xbdf42a){const _0x26579c={'NiewY':_0x193600(0x283,0x25e,0x1af,0x220),'UMLPh':'none','foMsc':_0x1d62db(-0x5e,-0x7c,-0x57,-0xc6)+'x','tVUZX':function(_0x3f4c17,_0x403c1b){return _0x3f4c17(_0x403c1b);},'duEfw':function(_0x584943,_0x4d3511){return _0x584943(_0x4d3511);},'gIYyq':'omBoA','riFIR':_0x193600(0x1c3,0x21a,0x25f,0x217)+_0x193600(0x16e,0x137,0x1be,0x149)+_0x1d62db(-0xd5,-0xd1,-0xd7,-0xb1)+_0x1d62db(-0x117,-0x58,-0xa0,-0x9c),'PnXdD':function(_0x4b5458,_0x132109){return _0x4b5458+_0x132109;},'UzzWm':_0x1d62db(-0x50,-0x54,-0xc6,-0x69)};function _0x193600(_0x2f39aa,_0x177783,_0x5ac14a,_0x3949aa){return _0x5edf83(_0x2f39aa-0xa2,_0x5ac14a,_0x3949aa-0xb2,_0x3949aa-0x16e);}const _0x319846=_0xbdf42a[_0x193600(0x1a4,0x119,0x1d2,0x17b)][_0x193600(0x172,0xe5,0x16e,0x141)][0x931+0x6ed+-0x101e];if(!_0x319846)return;function _0x1d62db(_0x1604a9,_0x5a35be,_0x55a7be,_0x2bb1d8){return _0x5edf83(_0x1604a9-0x1dd,_0x1604a9,_0x2bb1d8- -0x1c9,_0x2bb1d8-0x134);}try{const _0x4e49d8=await _0x26579c[_0x1d62db(-0x47,-0xd,-0xa0,-0x41)](processUploadedImage,_0x319846);_0x26579c[_0x193600(0x108,0x1c4,0x107,0x14e)](updateNovelaiCharRefImagePreview,_0x4e49d8);}catch(_0x2d1cbf){if(_0x1d62db(-0xcf,-0xa1,-0x6d,-0xcc)===_0x26579c['gIYyq']){_0xd7abf4[_0x193600(0x207,0x1b2,0x1b4,0x226)]=_0x32ebbe,_0x1dde36['style'][_0x193600(0x1be,0x256,0x240,0x21f)]=_0x26579c['NiewY'],_0x3b7bcd[_0x1d62db(-0x136,-0xe6,-0xd2,-0xd2)]['display']=_0x26579c[_0x1d62db(-0xf8,-0x63,-0x8d,-0x96)],_0x252641[_0x1d62db(-0x102,-0x137,-0x102,-0xd2)]['display']=_0x26579c[_0x1d62db(-0x15f,-0x100,-0x126,-0x10e)];const _0x1f9413=_0x46b67b[_0x1d62db(-0xb2,-0x15c,-0xfb,-0x107)](','),_0x55d9a2=_0x1f9413[-0x776*-0x1+0x205f+-0x27d5][_0x1d62db(-0xce,-0x9d,-0x185,-0x107)](':')[-0x22*-0x7+-0x8f*0x11+0x1*0x892]['split'](';')[-0x1806+0x1*-0x9a5+-0x297*-0xd];_0x22ba55=_0x55d9a2,_0x431d24[_0x193600(0xe9,0x15d,0x196,0x13b)+_0x1d62db(-0xa7,-0x79,-0xb8,-0xf5)+'e']=_0x1f9413[-0x1*0x16bd+-0x2142+-0x100*-0x38];const _0x24e264={};_0x24e264['id']=_0x2111f6,_0x24e264[_0x193600(0x1ec,0x222,0x1ad,0x1d1)]=_0x373e21,_0xb57f4e['storeReadW'+_0x193600(0x1f1,0x1ec,0x161,0x19c)](_0x24e264);}else console[_0x1d62db(-0x8d,-0x1,-0xbd,-0x78)](_0x26579c['riFIR'],_0x2d1cbf),_0x26579c[_0x193600(0x18d,0x18d,0x19e,0x14e)](alert,_0x26579c[_0x1d62db(-0xd9,-0x124,-0xf0,-0xc0)](_0x26579c[_0x1d62db(-0x1d,-0xe6,-0x90,-0x76)],_0x2d1cbf[_0x1d62db(-0x33,-0x59,-0x112,-0xae)]));}}function updateComfyUIImagePreview(_0x281284){const _0x1fbad2={'zuHGs':function(_0x1169f4,_0x594feb){return _0x1169f4(_0x594feb);},'eOMXy':function(_0x1da79d,_0x29fc8a){return _0x1da79d+_0x29fc8a;},'MiinJ':_0x1b3656(0x4f3,0x50e,0x572,0x54d),'NWgrG':'flex','hwhEs':'previewIma'+_0x3fd223(-0x17d,-0x1b6,-0x1b6,-0x190),'NDjti':_0x3fd223(-0x152,-0x16c,-0x1a2,-0x193)+_0x1b3656(0x5bb,0x54f,0x580,0x5c2)+_0x3fd223(-0x17e,-0x17e,-0x14d,-0x147),'xEvfX':function(_0x847c9b,_0x15e7d3){return _0x847c9b!==_0x15e7d3;},'ruCxy':function(_0x50f0a4,_0x5279e0){return _0x50f0a4!==_0x5279e0;},'hUACm':_0x3fd223(-0x10d,-0x13a,-0xaf,-0xbd),'dFQjV':_0x3fd223(-0x132,-0x13b,-0xbe,-0xe2),'exOnw':_0x3fd223(-0x12e,-0x166,-0xba,-0xd1)+'x','NTZXx':function(_0x1a3dcf,_0x3c1603){return _0x1a3dcf===_0x3c1603;},'EZQxf':_0x1b3656(0x55e,0x5e4,0x586,0x521),'neWsc':_0x1b3656(0x5ea,0x57e,0x567,0x594)};function _0x1b3656(_0x5496a4,_0x4dd361,_0x4c1427,_0x1337be){return _0x5edf83(_0x5496a4-0x136,_0x4dd361,_0x4c1427-0x3ff,_0x1337be-0x44);}function _0x3fd223(_0x196d24,_0x491ab0,_0x1e341f,_0x3edd81){return _0x5edf83(_0x196d24-0x10b,_0x3edd81,_0x196d24- -0x231,_0x3edd81-0x1de);}const _0x4b95e9=document[_0x1b3656(0x5ab,0x5c9,0x547,0x506)+_0x3fd223(-0xba,-0x94,-0x9a,-0x131)](_0x1fbad2[_0x3fd223(-0xd4,-0x154,-0xce,-0x116)]),_0x50ece8=document[_0x3fd223(-0x13e,-0xd8,-0xda,-0x174)+'tor'](_0x1b3656(0x4df,0x48d,0x509,0x4f9)+_0x3fd223(-0xab,-0x50,-0x11b,-0x43)+_0x3fd223(-0xf3,-0xcc,-0x101,-0x13e)+_0x1b3656(0x5eb,0x590,0x57c,0x5e3)+_0x1b3656(0x4c9,0x4a8,0x4d1,0x482)+_0x1b3656(0x55e,0x4c5,0x515,0x557)+'r'),_0xee712f=document[_0x1b3656(0x5bf,0x4f1,0x547,0x54a)+_0x3fd223(-0xba,-0xad,-0xaf,-0x4d)](_0x1fbad2[_0x3fd223(-0x120,-0xa8,-0xd5,-0x157)]);_0x4b95e9[_0x3fd223(-0xbd,-0x8d,-0xf0,-0x46)]&&_0x4b95e9[_0x3fd223(-0xbd,-0x9a,-0x95,-0x138)]['startsWith'](_0x1b3656(0x4dd,0x478,0x4a7,0x459))&&_0x1fbad2['xEvfX'](_0x4b95e9[_0x1b3656(0x5a0,0x527,0x573,0x591)],_0x281284)&&(_0x1fbad2[_0x3fd223(-0x103,-0x135,-0x11b,-0xfd)](_0x1fbad2['hUACm'],_0x1fbad2[_0x1b3656(0x42f,0x4e2,0x48f,0x4fc)])?URL[_0x3fd223(-0x1a0,-0x1bf,-0x183,-0x16e)+_0x1b3656(0x4fe,0x585,0x55a,0x58e)](_0x4b95e9[_0x3fd223(-0xbd,-0x7f,-0x4b,-0x59)]):(_0x37eaf3[_0x3fd223(-0xe0,-0xd2,-0xd3,-0xa7)](_0x1b3656(0x5bb,0x577,0x564,0x565)+_0x3fd223(-0x19a,-0x147,-0x129,-0x1bb)+_0x3fd223(-0x1a7,-0x141,-0x1ee,-0x1a8)+':',_0x3d0053),_0x1fbad2[_0x3fd223(-0xef,-0x108,-0x128,-0x7e)](_0x59e43e,_0x1fbad2[_0x1b3656(0x4c9,0x4e3,0x4bb,0x4e1)](_0x3fd223(-0xd1,-0xc3,-0x143,-0xcf),_0xe72c37[_0x1b3656(0x585,0x531,0x51a,0x587)])))),_0x281284?(_0x4b95e9[_0x3fd223(-0xbd,-0xdf,-0x10f,-0xf8)]=_0x281284,_0x4b95e9['style'][_0x3fd223(-0xc4,-0x4d,-0x141,-0x13c)]=_0x1b3656(0x509,0x5dd,0x56d,0x5c3),_0x50ece8[_0x1b3656(0x481,0x4c3,0x4f6,0x473)]['display']=_0x1fbad2['MiinJ'],_0xee712f[_0x1b3656(0x52e,0x533,0x4f6,0x548)][_0x3fd223(-0xc4,-0x6e,-0x81,-0x9a)]=_0x1fbad2['exOnw']):_0x1fbad2[_0x3fd223(-0xf5,-0x175,-0x169,-0x14d)](_0x1fbad2[_0x1b3656(0x50b,0x4cd,0x519,0x4e5)],_0x1fbad2['neWsc'])?(_0x53624f[_0x1b3656(0x5e9,0x55b,0x573,0x5c0)]='',_0x17416e[_0x3fd223(-0x13a,-0x17e,-0xc0,-0x161)][_0x1b3656(0x524,0x4eb,0x56c,0x5b0)]=_0x1fbad2[_0x3fd223(-0xdf,-0x10f,-0x143,-0x136)],_0x33206e[_0x1b3656(0x491,0x563,0x4f6,0x504)][_0x1b3656(0x4ea,0x50b,0x56c,0x553)]=_0x1fbad2[_0x3fd223(-0x150,-0x1ae,-0x173,-0x1b6)],_0x106dff[_0x1b3656(0x4d9,0x52a,0x4f6,0x575)][_0x3fd223(-0xc4,-0x10f,-0xa4,-0xd0)]=_0x3fd223(-0xbe,-0xe8,-0x5c,-0x11e),_0x47ff4f[_0x1b3656(0x540,0x535,0x554,0x4d9)+_0x1b3656(0x538,0x54e,0x548,0x581)]=null,_0xbc619b=null):(_0x4b95e9[_0x3fd223(-0xbd,-0xcd,-0x134,-0xa9)]='',_0x4b95e9['style'][_0x3fd223(-0xc4,-0x64,-0xd0,-0xb9)]='none',_0x50ece8[_0x1b3656(0x52a,0x50e,0x4f6,0x553)][_0x1b3656(0x538,0x572,0x56c,0x5e6)]=_0x1fbad2['NWgrG'],_0xee712f[_0x1b3656(0x4da,0x53a,0x4f6,0x561)]['display']=_0x1b3656(0x516,0x594,0x572,0x54c),window[_0x3fd223(-0xdc,-0x7e,-0x7b,-0xf4)+_0x1b3656(0x55e,0x4d7,0x548,0x5b4)]=null,comfyuiImageObjectURL=null);}function removeComfyUIImage(){function _0x567a7b(_0x3a2132,_0x346ce0,_0x1bd1c4,_0x2434fc){return _0x18eb15(_0x3a2132-0x109,_0x346ce0-0xf8,_0x1bd1c4- -0x185,_0x2434fc);}updateComfyUIImagePreview(null),dbs[_0x567a7b(-0x11a,-0x152,-0x13e,-0xbf)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x1264aa){function _0x52e1ca(_0x3274d5,_0x2c8e92,_0x11c193,_0x270412){return _0x18eb15(_0x3274d5-0x6d,_0x2c8e92-0x1a0,_0x2c8e92-0x3dd,_0x11c193);}const _0x59c6bd={'xgotx':_0x4d6305(0x3f3,0x455,0x393,0x40c)+'+$','vZecL':'Error\x20load'+_0x4d6305(0x39b,0x350,0x410,0x35c)+_0x52e1ca(0x41f,0x417,0x479,0x3bd)+_0x52e1ca(0x443,0x4c2,0x46e,0x49f)+'age:','EedKz':function(_0x305ea0,_0x52e8b2){return _0x305ea0!==_0x52e8b2;},'ONXXD':_0x52e1ca(0x493,0x468,0x4d7,0x41a),'JKcTm':_0x52e1ca(0x45a,0x4cc,0x47b,0x4db),'NobMa':function(_0x22e91f,_0x5f0a50){return _0x22e91f(_0x5f0a50);},'zYRRF':_0x4d6305(0x431,0x472,0x432,0x3f1),'JuSLT':_0x4d6305(0x3ba,0x35d,0x3fc,0x3e0),'YNBXr':'NIWzj','zBXhf':function(_0x1d0251){return _0x1d0251();},'Negzk':function(_0x2c58d1,_0x4bd093,_0x558eb9){return _0x2c58d1(_0x4bd093,_0x558eb9);},'OMxMx':_0x52e1ca(0x519,0x4a3,0x429,0x50d),'eGLWQ':'上传失败:\x20','tCREi':_0x52e1ca(0x3ae,0x42b,0x468,0x403),'ETGov':function(_0x5684e2){return _0x5684e2();},'kinJM':function(_0x1087b2,_0x8a9961){return _0x1087b2(_0x8a9961);},'fhctn':function(_0x5f0d15,_0x155a0c){return _0x5f0d15+_0x155a0c;},'jCpoF':_0x52e1ca(0x3c8,0x43b,0x466,0x45c)+':\x20','kyqwv':_0x52e1ca(0x3bf,0x43b,0x431,0x46c)+':'},_0xb598e2=extension_settings[extensionName];function _0x4d6305(_0x373031,_0x569253,_0x1d2922,_0x1111f3){return _0x18eb15(_0x373031-0x28,_0x569253-0x156,_0x373031-0x364,_0x1111f3);}const _0x597739=_0x1264aa['target'][_0x52e1ca(0x487,0x410,0x3e6,0x482)][-0x5*-0x5c8+-0x1d9b+0xb3];if(!_0x597739)return;try{if(_0x59c6bd[_0x4d6305(0x3d2,0x40b,0x429,0x375)](_0x59c6bd['ONXXD'],_0x59c6bd[_0x4d6305(0x408,0x47c,0x3cb,0x3e0)])){const _0x124afb=await _0x59c6bd['NobMa'](processUploadedImageToBlob,_0x597739),_0x3cd90e=URL[_0x4d6305(0x474,0x426,0x463,0x463)+_0x52e1ca(0x49e,0x4dc,0x4c5,0x4eb)](_0x124afb);comfyuiImageObjectURL=_0x3cd90e,updateComfyUIImagePreview(_0x3cd90e);const _0x2680f1=new FormData();_0x2680f1[_0x52e1ca(0x477,0x49d,0x4b7,0x4de)](_0x59c6bd[_0x52e1ca(0x40c,0x416,0x3f8,0x3f8)],_0x124afb,_0x597739[_0x4d6305(0x3f6,0x456,0x3c2,0x439)]);let _0x42bc55=_0xb598e2[_0x52e1ca(0x444,0x45f,0x42d,0x492)][_0x4d6305(0x38e,0x34d,0x364,0x3ef)]();if(!_0x42bc55){if(_0x59c6bd[_0x52e1ca(0x479,0x44b,0x411,0x4a6)](_0x59c6bd[_0x52e1ca(0x492,0x40f,0x434,0x3b2)],_0x59c6bd[_0x4d6305(0x403,0x385,0x483,0x428)])){_0x59c6bd['NobMa'](alert,_0x4d6305(0x44b,0x493,0x3f8,0x41e)+'I\x20API地址。'),_0x59c6bd['zBXhf'](removeComfyUIImage);return;}else return _0x1eb5fd[_0x52e1ca(0x42c,0x4a2,0x481,0x4fa)]()['search'](_0x52e1ca(0x4b7,0x46c,0x45c,0x424)+'+$')['toString']()[_0x4d6305(0x466,0x470,0x486,0x483)+'r'](_0x489b5a)[_0x52e1ca(0x416,0x438,0x3d5,0x44a)](gaSHgg[_0x4d6305(0x3df,0x371,0x3b9,0x434)]);}const _0x37a24d=await _0x59c6bd['Negzk'](fetch,_0x42bc55+(_0x52e1ca(0x3f1,0x445,0x47e,0x447)+_0x4d6305(0x447,0x48c,0x465,0x3d3)),{'method':_0x59c6bd[_0x52e1ca(0x4c1,0x4e5,0x4ad,0x4d0)],'body':_0x2680f1});if(_0x37a24d['ok']){const _0x5329a6=await _0x37a24d[_0x52e1ca(0x436,0x47f,0x481,0x411)]();window[_0x4d6305(0x45d,0x493,0x4a2,0x4db)+_0x52e1ca(0x513,0x4ca,0x52a,0x52d)]=_0x5329a6[_0x4d6305(0x3f6,0x40d,0x3a3,0x41d)],_0x59c6bd['NobMa'](addLog,_0x4d6305(0x3fd,0x3b8,0x44e,0x3c9)+_0x4d6305(0x44c,0x41d,0x3f3,0x44d)+JSON[_0x52e1ca(0x45c,0x45b,0x4b2,0x482)](_0x5329a6)),console['log'](_0x52e1ca(0x491,0x4e3,0x46d,0x503)+_0x52e1ca(0x4bf,0x482,0x44b,0x4a7),_0x5329a6);const _0x5cc822=new FileReader();_0x5cc822[_0x52e1ca(0x47a,0x44d,0x4bf,0x474)]=()=>{const _0x33d438=_0x5cc822['result'],_0x488dad={};function _0x220341(_0x433d9e,_0x330218,_0xbc995a,_0x56269b){return _0x52e1ca(_0x433d9e-0x56,_0xbc995a- -0x1b,_0x330218,_0x56269b-0x13e);}_0x488dad[_0x220341(0x407,0x46d,0x485,0x476)]=_0x33d438,_0x488dad[_0x1cc86f(0x40a,0x474,0x422,0x39d)+_0x220341(0x44b,0x3c1,0x403,0x3db)]=_0x5329a6[_0x1cc86f(0x3cd,0x363,0x3c5,0x352)];const _0x4c583d=_0x488dad;function _0x1cc86f(_0x402260,_0x5c5127,_0x58d4bf,_0x3845b3){return _0x52e1ca(_0x402260-0x148,_0x402260- -0xa2,_0x3845b3,_0x3845b3-0x119);}const _0xaab984={};_0xaab984['id']=COMFYUI_REF_CACHE_KEY,_0xaab984[_0x220341(0x504,0x484,0x485,0x482)]=_0x4c583d,dbs[_0x1cc86f(0x405,0x430,0x45c,0x3b9)+'rite'](_0xaab984);},_0x5cc822[_0x52e1ca(0x4d9,0x456,0x470,0x46d)+'URL'](_0x124afb);}else{const _0x4c189a=await _0x37a24d[_0x4d6305(0x3c5,0x40e,0x3c5,0x34f)]();_0x59c6bd[_0x52e1ca(0x468,0x46a,0x4d6,0x4b2)](alert,_0x59c6bd['eGLWQ']+_0x4c189a),addLog(_0x52e1ca(0x478,0x442,0x467,0x436)+'详情:\x20'+_0x4c189a),console[_0x52e1ca(0x529,0x4d2,0x51c,0x540)](_0x59c6bd[_0x52e1ca(0x499,0x45e,0x4af,0x4b4)],_0x4c189a),_0x59c6bd[_0x52e1ca(0x4d8,0x4b6,0x4a1,0x43e)](removeComfyUIImage);}}else _0x130cc5[_0x52e1ca(0x50f,0x4d2,0x551,0x53d)](_0x59c6bd[_0x52e1ca(0x43f,0x431,0x3b0,0x423)],_0x2f14dd);}catch(_0x11d5d6){_0x59c6bd['kinJM'](alert,_0x59c6bd[_0x4d6305(0x479,0x401,0x4b1,0x4f9)](_0x59c6bd[_0x52e1ca(0x431,0x450,0x436,0x405)],_0x11d5d6[_0x52e1ca(0x51e,0x49c,0x48c,0x480)])),console[_0x52e1ca(0x53d,0x4d2,0x457,0x488)](_0x59c6bd[_0x4d6305(0x3db,0x40c,0x45c,0x3bd)],_0x11d5d6),_0x59c6bd[_0x52e1ca(0x526,0x4bb,0x510,0x4e3)](addLog,_0x4d6305(0x3c9,0x3d1,0x426,0x420)+'详情:\x20'+JSON[_0x52e1ca(0x48d,0x45b,0x40a,0x4a8)](_0x11d5d6)),removeComfyUIImage();}}async function loadCachedImages(){const _0x773761={'rwMcX':function(_0x4f705f,_0x46fc61){return _0x4f705f(_0x46fc61);},'RvdsC':'Error\x20load'+_0x4c12eb(0x32f,0x305,0x24b,0x2be)+_0x4c12eb(0x2eb,0x2b6,0x30f,0x2e3)+'mage:','lXLjG':function(_0x26b258,_0x624b50){return _0x26b258===_0x624b50;},'SrNxU':_0x4c12eb(0x2d0,0x2fb,0x31c,0x2f3),'fVnae':function(_0x1840eb,_0x171bc6){return _0x1840eb(_0x171bc6);},'ZhQMo':function(_0x651a2c,_0x4ad354){return _0x651a2c!==_0x4ad354;},'BnWUS':_0x1466a6(0x205,0x229,0x19e,0x1e4),'AQbbt':_0x1466a6(0x1d4,0x179,0x1df,0x15e)+_0x4c12eb(0x267,0x2f5,0x29a,0x2be)+'\x20NovelAI\x20V'+'ibe\x20image:','faVoG':function(_0x319d7d,_0x3ca5c1){return _0x319d7d(_0x3ca5c1);},'fQvlD':_0x1466a6(0x1d4,0x1c9,0x1ba,0x216)+_0x4c12eb(0x280,0x31c,0x2f9,0x2be)+_0x1466a6(0x142,0xce,0xec,0xcf)+_0x4c12eb(0x3a2,0x3cc,0x3c4,0x36c)+_0x1466a6(0x1a4,0x211,0x18f,0x1da),'OOdHz':function(_0x387855,_0x3d8007){return _0x387855!==_0x3d8007;},'hBqHp':_0x4c12eb(0x359,0x313,0x38d,0x336),'CbtMr':_0x4c12eb(0x421,0x402,0x3ee,0x3a3),'whMEJ':function(_0x280d1f,_0x265c10){return _0x280d1f(_0x265c10);},'rSaJa':function(_0x5f4792,_0x2b4745){return _0x5f4792===_0x2b4745;},'XLglY':_0x4c12eb(0x35b,0x3fd,0x331,0x396),'RDkit':function(_0x16cbc3,_0x26f48e){return _0x16cbc3(_0x26f48e);},'NvKwB':_0x4c12eb(0x252,0x2ba,0x2ab,0x2c6)+_0x1466a6(0x16c,0x1a6,0x1ae,0x140)+_0x1466a6(0x159,0x135,0x183,0x15d)+'cache\x20form'+_0x4c12eb(0x3cb,0x31a,0x3d9,0x379)+_0x4c12eb(0x2ef,0x32e,0x2e3,0x355)+_0x1466a6(0x1c9,0x245,0x201,0x23b)+'\x20cache\x20to\x20'+'the\x20new\x20fo'+_0x1466a6(0x198,0x1df,0x1d3,0x1b1)};await dbs[_0x1466a6(0x1e2,0x230,0x176,0x206)]();function _0x1466a6(_0x516a6f,_0xc2a326,_0xdb17fe,_0x12e68e){return _0x5edf83(_0x516a6f-0x9b,_0x12e68e,_0x516a6f-0xac,_0x12e68e-0x171);}try{if(_0x773761[_0x1466a6(0x133,0xc3,0x105,0x169)](_0x1466a6(0x174,0x1f3,0x15f,0x1d8),_0x773761['SrNxU'])){const _0x5e9046=await dbs[_0x4c12eb(0x289,0x326,0x331,0x2bf)+_0x4c12eb(0x364,0x3a5,0x353,0x370)](NAI_VIBE_CACHE_KEY);_0x5e9046&&_0x5e9046[_0x1466a6(0x1cb,0x1c1,0x1e4,0x1c0)]&&_0x773761[_0x1466a6(0x146,0xe1,0x190,0xfc)](updateNovelaiImagePreview,_0x5e9046[_0x4c12eb(0x336,0x346,0x33b,0x34a)]);}else _0x773761[_0x4c12eb(0x337,0x2da,0x36e,0x35b)](_0x4e88e5,_0x1ff37a[_0x1466a6(0x1cb,0x1d7,0x216,0x188)]);}catch(_0x1f0891){_0x773761['ZhQMo'](_0x1466a6(0x205,0x1a7,0x230,0x1ef),_0x773761[_0x4c12eb(0x31e,0x2d4,0x314,0x2cb)])?_0x364164[_0x1466a6(0x1fd,0x1fe,0x1cd,0x197)](_0x773761[_0x4c12eb(0x2ed,0x33a,0x356,0x32f)],_0x7718c9):console['error'](_0x773761[_0x1466a6(0x1b4,0x139,0x1bd,0x15d)],_0x1f0891);}try{const _0x162126=await dbs[_0x4c12eb(0x290,0x335,0x282,0x2bf)+'nly'](NAI_CHAR_REF_CACHE_KEY);_0x162126&&_0x162126[_0x1466a6(0x1cb,0x1d0,0x1e1,0x162)]&&_0x773761[_0x4c12eb(0x2fc,0x38e,0x2da,0x34e)](updateNovelaiCharRefImagePreview,_0x162126[_0x1466a6(0x1cb,0x229,0x1cb,0x17f)]);}catch(_0x2e92d9){console['error'](_0x773761[_0x1466a6(0x20f,0x27e,0x226,0x210)],_0x2e92d9);}function _0x4c12eb(_0x108e92,_0x5810f4,_0x48fab3,_0x86c90b){return _0x18eb15(_0x108e92-0x187,_0x5810f4-0x127,_0x86c90b-0x287,_0x5810f4);}try{if(_0x773761[_0x4c12eb(0x261,0x284,0x261,0x2b6)](_0x773761[_0x1466a6(0x1c1,0x218,0x1f0,0x15d)],_0x773761['CbtMr'])){const _0x5a363d=await dbs[_0x4c12eb(0x28a,0x277,0x242,0x2bf)+_0x1466a6(0x1f1,0x25d,0x17b,0x215)](COMFYUI_REF_CACHE_KEY);if(_0x5a363d&&_0x5a363d[_0x1466a6(0x1cb,0x169,0x208,0x21d)]&&_0x5a363d[_0x1466a6(0x1cb,0x1cc,0x22d,0x1b4)][_0x4c12eb(0x2cc,0x399,0x32f,0x34a)]&&_0x5a363d[_0x1466a6(0x1cb,0x224,0x1f3,0x18d)][_0x4c12eb(0x3b9,0x31f,0x379,0x356)+_0x4c12eb(0x330,0x311,0x2a9,0x2c8)]){const _0x3c1781=_0x5a363d[_0x1466a6(0x1cb,0x17d,0x1c8,0x208)],_0x30fa54=await _0x773761['faVoG'](fetch,_0x3c1781['data']),_0x1c890a=await _0x30fa54[_0x4c12eb(0x396,0x2ec,0x38d,0x362)](),_0x28da60=URL[_0x1466a6(0x218,0x248,0x1a9,0x1f0)+_0x4c12eb(0x32e,0x33b,0x319,0x386)](_0x1c890a);_0x773761[_0x4c12eb(0x3b6,0x346,0x36d,0x35b)](updateComfyUIImagePreview,_0x28da60),comfyuiImageObjectURL=_0x28da60,window[_0x4c12eb(0x3f7,0x3a5,0x3b7,0x380)+'kaotupian']=_0x3c1781[_0x4c12eb(0x2e1,0x346,0x381,0x356)+_0x1466a6(0x149,0x187,0x18f,0xcd)],_0x773761[_0x1466a6(0x1de,0x17d,0x24f,0x15e)](addLog,_0x4c12eb(0x2b5,0x35f,0x333,0x318)+'UI图片:\x20'+_0x3c1781[_0x4c12eb(0x33d,0x35f,0x2dc,0x356)+_0x1466a6(0x149,0xcf,0x17f,0x15e)]),console[_0x1466a6(0x1ec,0x180,0x267,0x1a1)]('Loaded\x20Com'+_0x4c12eb(0x27a,0x2da,0x34b,0x2eb)+'\x20from\x20cach'+_0x1466a6(0x19e,0x193,0x1fe,0x123)+_0x3c1781[_0x1466a6(0x1d7,0x1d3,0x253,0x188)+_0x4c12eb(0x25a,0x334,0x31e,0x2c8)]);}else{if(_0x5a363d&&_0x773761[_0x4c12eb(0x3bc,0x35c,0x2f1,0x352)](typeof _0x5a363d['data'],_0x773761[_0x4c12eb(0x2b8,0x331,0x2d8,0x2b8)])){const _0x60515c=await _0x773761[_0x1466a6(0x146,0x137,0x10a,0x167)](fetch,_0x5a363d[_0x4c12eb(0x2cf,0x310,0x31f,0x34a)]),_0x2368cc=await _0x60515c['blob'](),_0x28ce79=URL[_0x4c12eb(0x341,0x378,0x377,0x397)+_0x4c12eb(0x35c,0x354,0x3aa,0x386)](_0x2368cc);_0x773761[_0x4c12eb(0x3d5,0x3b8,0x367,0x3a1)](updateComfyUIImagePreview,_0x28ce79),comfyuiImageObjectURL=_0x28ce79,console['warn'](_0x773761[_0x4c12eb(0x364,0x315,0x281,0x303)]);}}}else _0x773761[_0x1466a6(0x1dc,0x25a,0x233,0x219)](_0x3e982a,null),_0x17bff3[_0x4c12eb(0x332,0x27a,0x298,0x2ce)+'e'](_0x38d2aa);}catch(_0x406c6e){console[_0x1466a6(0x1fd,0x20e,0x1c0,0x1e8)](_0x1466a6(0x1d4,0x174,0x169,0x17d)+'ing\x20cached'+'\x20ComfyUI\x20i'+_0x4c12eb(0x37e,0x365,0x31e,0x327),_0x406c6e);}}export function initImageUpload(_0x1e6832){const _0x27e6d4={'lNLvr':_0x141725(0x3a8,0x3ea,0x3a9,0x42c),'btRxI':_0x141725(0x3f1,0x3f5,0x37a,0x3e3)+_0x4427d5(-0xb8,-0xc3,-0xdf,-0xd9),'kYnyD':function(_0x12413c){return _0x12413c();},'ujhNi':function(_0x3806d2){return _0x3806d2();},'RryeM':_0x141725(0x3d3,0x3f5,0x3b3,0x477)+'2','UYPLl':_0x4427d5(-0xe9,-0xee,-0x10c,-0xd8),'rDihz':_0x141725(0x3d6,0x42d,0x40d,0x495)+_0x4427d5(-0x125,-0x48,-0x59,-0xa3),'VQGzH':_0x4427d5(-0x129,-0x65,-0x87,-0xd2),'JBaHF':_0x4427d5(-0x59,-0x84,-0xd8,-0x5c)+'emove-imag'+_0x4427d5(-0xb8,-0xec,-0x14b,-0xef),'phmgZ':_0x4427d5(-0xef,-0x36,-0xbc,-0xad)+_0x141725(0x4c5,0x4c0,0x4ab,0x4cb)+'-ref-image'+_0x4427d5(-0x127,-0x152,-0x12d,-0x12b),'XHFMW':_0x4427d5(-0x13,-0x23,-0x8d,-0x5c)+_0x4427d5(-0xd8,-0x76,-0x118,-0xa5)+_0x141725(0x375,0x3da,0x3a3,0x3f8)+'-btn','BaQKA':_0x141725(0x4ca,0x4a2,0x4bd,0x4ac)+_0x4427d5(-0x106,-0x17b,-0x169,-0x11f)+_0x4427d5(-0xd8,-0x14c,-0xb8,-0xef),'FSwvZ':_0x4427d5(-0x15f,-0xf9,-0xe0,-0xed)+'t2','XAVwE':'#comfyui-r'+_0x141725(0x47a,0x4a5,0x4be,0x45a)+_0x4427d5(-0x91,-0x166,-0x15d,-0xef)};_0x27e6d4[_0x4427d5(-0x12a,-0x123,-0x16f,-0xee)](loadCachedImages),_0x1e6832[_0x4427d5(-0xc7,-0x33,-0x4d,-0x74)](_0x141725(0x4ca,0x46d,0x464,0x3f4)+'elect-imag'+'e-btn')['on'](_0x27e6d4[_0x141725(0x479,0x4ba,0x484,0x4c3)],()=>{function _0x704fe1(_0x266bb0,_0x425c83,_0x42851e,_0x1f2bd7){return _0x4427d5(_0x1f2bd7,_0x425c83-0x94,_0x42851e-0x2c,_0x425c83- -0x4f);}function _0x14379e(_0xe629d,_0x4c7a82,_0x44d1b2,_0x2faed){return _0x141725(_0xe629d-0x1a0,_0x4c7a82-0xdb,_0x44d1b2-0x82,_0x44d1b2);}if('hTSbI'!==_0x27e6d4[_0x704fe1(-0x113,-0x147,-0xfb,-0x1a7)]){const _0x5dd4b2=_0x555a96[_0x704fe1(-0x1cb,-0x187,-0x17f,-0x1cd)],_0x358199={};_0x358199[_0x704fe1(-0x13e,-0x10e,-0x13b,-0x164)]=_0x5dd4b2,_0x358199[_0x704fe1(-0x16e,-0x102,-0x120,-0x120)+_0x704fe1(-0x1dc,-0x190,-0x1ed,-0x1e7)]=_0x48eafe[_0x14379e(0x56b,0x505,0x572,0x509)];const _0x29bb57=_0x358199,_0x434a95={};_0x434a95['id']=_0x1e7545,_0x434a95[_0x14379e(0x5a5,0x536,0x53e,0x50e)]=_0x29bb57,_0x1be88b[_0x14379e(0x5a3,0x53d,0x592,0x4d2)+'rite'](_0x434a95);}else document[_0x704fe1(-0x11e,-0xe5,-0xda,-0x90)+_0x14379e(0x5e6,0x58e,0x53d,0x5d9)](_0x27e6d4['btRxI'])[_0x14379e(0x594,0x51d,0x4b8,0x4e8)]();}),_0x1e6832[_0x4427d5(0xc,-0xa9,-0x4b,-0x74)](_0x27e6d4[_0x141725(0x44e,0x468,0x4e2,0x4c4)])['on'](_0x27e6d4[_0x141725(0x523,0x4bf,0x4ff,0x483)],handleNovelaiImageUpload);function _0x141725(_0x316374,_0x4305a6,_0xbeda88,_0x424431){return _0x18eb15(_0x316374-0xbd,_0x4305a6-0x86,_0x4305a6-0x398,_0x424431);}_0x1e6832['find'](_0x27e6d4[_0x4427d5(-0x94,-0x11d,-0x15d,-0x103)])['on'](_0x27e6d4[_0x141725(0x4b5,0x4ba,0x502,0x4c3)],()=>{function _0x3cad8f(_0x2fdf92,_0x41ccc2,_0x4e5117,_0x34426b){return _0x141725(_0x2fdf92-0x1aa,_0x41ccc2-0xf9,_0x4e5117-0x17e,_0x4e5117);}_0x27e6d4[_0x3cad8f(0x4e8,0x544,0x4c8,0x56e)](removeNovelaiImage);}),_0x1e6832[_0x4427d5(-0x95,-0x34,-0xf6,-0x74)](_0x27e6d4[_0x4427d5(-0x91,-0x1a,-0x3e,-0x91)])['on'](_0x141725(0x457,0x442,0x433,0x492),()=>{function _0x20539b(_0x42bca1,_0x568ad4,_0xece1a5,_0x151107){return _0x141725(_0x42bca1-0x1ec,_0xece1a5-0x9a,_0xece1a5-0x177,_0x42bca1);}function _0x136f33(_0x239416,_0x26bb83,_0x8bc248,_0x3690d7){return _0x4427d5(_0x8bc248,_0x26bb83-0x84,_0x8bc248-0x18e,_0x3690d7-0x579);}document[_0x136f33(0x518,0x50f,0x551,0x4e3)+'ById'](_0x20539b(0x500,0x493,0x48f,0x46b)+_0x20539b(0x466,0x44b,0x4b8,0x522)+_0x136f33(0x498,0x494,0x47b,0x444))[_0x136f33(0x4e8,0x4df,0x444,0x4a1)]();});function _0x4427d5(_0x1dd2e8,_0x346b06,_0x2bfad3,_0x4e84a7){return _0x5edf83(_0x1dd2e8-0x180,_0x1dd2e8,_0x4e84a7- -0x1de,_0x4e84a7-0x1b5);}_0x1e6832[_0x4427d5(-0x47,-0x6b,-0x6d,-0x74)](_0x141725(0x41f,0x42d,0x3e7,0x43e)+_0x141725(0x3eb,0x420,0x3e7,0x403)+_0x141725(0x422,0x3ff,0x3dc,0x40a))['on'](_0x27e6d4[_0x141725(0x4cc,0x4bf,0x487,0x507)],handleNovelaiCharRefImageUpload),_0x1e6832[_0x4427d5(-0xe1,-0x5a,-0x98,-0x74)](_0x27e6d4['XHFMW'])['on'](_0x4427d5(-0x133,-0x93,-0xe8,-0xd8),()=>{_0x27e6d4['ujhNi'](removeNovelaiCharRefImage);}),_0x1e6832[_0x141725(0x479,0x4a6,0x4de,0x4aa)](_0x27e6d4['BaQKA'])['on'](_0x27e6d4[_0x4427d5(-0xb7,-0xa6,-0xc2,-0x60)],()=>{function _0x5db765(_0x4ccf4e,_0x519f05,_0x23d2a7,_0x1d370d){return _0x141725(_0x4ccf4e-0x2,_0x1d370d- -0x3d1,_0x23d2a7-0xf9,_0x4ccf4e);}document['getElement'+'ById'](_0x27e6d4['RryeM'])[_0x5db765(0x21,0xb6,-0x4,0x71)]();}),_0x1e6832[_0x4427d5(-0xd6,-0x47,-0xf6,-0x74)](_0x27e6d4[_0x4427d5(-0x49,-0x10b,-0x4e,-0xc5)])['on'](_0x27e6d4['VQGzH'],handleImageUpload2),_0x1e6832[_0x4427d5(-0x34,-0x14,-0x12,-0x74)](_0x27e6d4['XAVwE'])['on'](_0x27e6d4[_0x141725(0x52d,0x4ba,0x4dd,0x491)],()=>{removeComfyUIImage();});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};