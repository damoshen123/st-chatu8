(function(_0x1bc78d,_0x593d8d){const _0x1167f2=_0x1bc78d();function _0x239f43(_0x5ea2c9,_0x33414a,_0x5003fd,_0x2038b7){return _0x65f3(_0x2038b7- -0x3cb,_0x5ea2c9);}function _0x4e3519(_0x2616d8,_0x2b42a6,_0x1c0a0c,_0x1ea07a){return _0x65f3(_0x1ea07a-0x155,_0x1c0a0c);}while(!![]){try{const _0x22db5e=parseInt(_0x239f43(-0x198,-0x141,-0x1b2,-0x15b))/(-0x313*0x6+-0x502*-0x1+0x1*0xd71)*(-parseInt(_0x239f43(-0x1ba,-0x145,-0x18d,-0x1ac))/(0x4b6*-0x4+0x1*-0x332+0x160c))+-parseInt(_0x4e3519(0x322,0x2df,0x2ab,0x307))/(-0x1*-0x2009+0x155d+-0x3563)*(parseInt(_0x4e3519(0x2e4,0x2db,0x308,0x33b))/(0x8f*0x2b+-0x9f7*0x2+-0x7*0x95))+-parseInt(_0x4e3519(0x402,0x38a,0x3cc,0x3c4))/(0x9*0x13a+0x3af+-0xeb4*0x1)+parseInt(_0x239f43(-0x1ad,-0x181,-0x1cd,-0x18b))/(-0x1f96+0xcf2+0x12aa)*(-parseInt(_0x239f43(-0x1db,-0x1cc,-0x1b4,-0x1e1))/(-0x15e7+0x10e8+0x506))+-parseInt(_0x4e3519(0x396,0x2f9,0x3ac,0x35b))/(0x17e4+0x1359+-0x2b35)+-parseInt(_0x239f43(-0x11f,-0x133,-0x15d,-0x178))/(-0x8a2+-0xbc*0x6+0x1*0xd13)+parseInt(_0x4e3519(0x2f9,0x37d,0x31a,0x356))/(-0x5d*-0x1+-0xa63+0xa10);if(_0x22db5e===_0x593d8d)break;else _0x1167f2['push'](_0x1167f2['shift']());}catch(_0x35bf52){_0x1167f2['push'](_0x1167f2['shift']());}}}(_0xe489,-0xe145f+-0x1812d1+0x8a1c9*0x6));const _0x10bfe8=(function(){const _0x2fea42={};_0x2fea42[_0x156697(0x330,0x34f,0x2e0,0x2d9)]=_0x156697(0x28a,0x2ec,0x22b,0x2e4),_0x2fea42[_0x156697(0x2c0,0x2d3,0x317,0x2f6)]=_0x1fd849(-0x10f,-0xd2,-0xd7,-0x11c);function _0x1fd849(_0x4fc371,_0x2035ba,_0x36fa6c,_0x53d788){return _0x65f3(_0x2035ba- -0x2da,_0x4fc371);}_0x2fea42['isXAJ']=function(_0x2d281f,_0x276a10){return _0x2d281f+_0x276a10;},_0x2fea42[_0x156697(0x326,0x2f3,0x2bc,0x380)]=_0x156697(0x299,0x257,0x2a1,0x2f8)+':',_0x2fea42[_0x1fd849(-0x84,-0xe3,-0x107,-0xef)]='oAecM';const _0x3d4f9e=_0x2fea42;function _0x156697(_0x28653d,_0x5b45cd,_0x4dd7ce,_0x1cebc7){return _0x65f3(_0x28653d-0xdb,_0x4dd7ce);}let _0x42d56f=!![];return function(_0x52e9c6,_0x1c987c){function _0x52dbff(_0x552995,_0x51dd25,_0x4c44d7,_0x5670f2){return _0x156697(_0x552995- -0x39b,_0x51dd25-0x3,_0x5670f2,_0x5670f2-0x44);}function _0x4dda90(_0x458383,_0x4472ef,_0x536ffc,_0x223cb7){return _0x1fd849(_0x4472ef,_0x458383-0x690,_0x536ffc-0x179,_0x223cb7-0x14e);}const _0x4045ea={'ASyho':function(_0x18f4ef,_0x460b39){return _0x18f4ef(_0x460b39);},'UUaKG':function(_0x7fd73,_0x201b09){return _0x3d4f9e['isXAJ'](_0x7fd73,_0x201b09);},'mNdOt':'图片处理或上传时出错'+':\x20','MMetS':_0x3d4f9e[_0x4dda90(0x601,0x63f,0x632,0x624)],'HDkZB':_0x52dbff(-0x115,-0xe2,-0xea,-0x114)};if(_0x3d4f9e[_0x4dda90(0x5ad,0x588,0x599,0x5fd)]!==_0x4dda90(0x5c9,0x5f6,0x5e3,0x5fe)){const _0x3697ee=_0x3d4f9e[_0x52dbff(-0x6b,-0xa2,-0x9a,-0x1e)][_0x4dda90(0x616,0x66e,0x612,0x5c5)]('|');let _0x310a2a=0x17*0x12d+-0x19e6+-0x125;while(!![]){switch(_0x3697ee[_0x310a2a++]){case'0':_0x49c438[_0x52dbff(-0x7c,-0xd8,-0x34,-0x45)+_0x4dda90(0x5c6,0x55c,0x5b5,0x61a)]=null;continue;case'1':_0x266565[_0x4dda90(0x60d,0x5b6,0x5a5,0x668)][_0x4dda90(0x621,0x629,0x5e6,0x656)]='flex';continue;case'2':_0x133735[_0x4dda90(0x60d,0x673,0x5c7,0x673)][_0x52dbff(-0x55,-0xae,-0x36,-0x6)]=_0x3d4f9e[_0x4dda90(0x59b,0x548,0x58c,0x5ee)];continue;case'3':_0x374a97[_0x4dda90(0x60a,0x642,0x60d,0x5ad)]='';continue;case'4':_0x469342[_0x4dda90(0x60d,0x5de,0x5ca,0x614)][_0x52dbff(-0x55,0x12,-0xa8,-0x36)]='none';continue;}break;}}else{const _0x121676=_0x42d56f?function(){function _0x597de4(_0x56697a,_0x38b40c,_0x30eb55,_0x139914){return _0x4dda90(_0x30eb55- -0xb5,_0x56697a,_0x30eb55-0xba,_0x139914-0xba);}const _0x2d88e6={'PCqjm':function(_0xe2cf47,_0x85ba13){return _0x4045ea['ASyho'](_0xe2cf47,_0x85ba13);},'KXhaP':function(_0xa4f481,_0x6c99da){function _0x181e27(_0x3ebb0c,_0x38d199,_0x238899,_0x50efb0){return _0x65f3(_0x238899- -0x66,_0x38d199);}return _0x4045ea[_0x181e27(0x225,0x1c3,0x20e,0x1da)](_0xa4f481,_0x6c99da);},'LXJNV':_0x4045ea[_0x2f39cc(0x63b,0x67b,0x5e3,0x627)],'atKfT':_0x4045ea[_0x597de4(0x5bc,0x568,0x56b,0x597)],'rUJMB':function(_0x49e79d,_0x3d5624){return _0x49e79d(_0x3d5624);}};function _0x2f39cc(_0x368784,_0x8e78ea,_0x955fdc,_0x21d61c){return _0x4dda90(_0x21d61c-0x30,_0x368784,_0x955fdc-0x5e,_0x21d61c-0x15c);}if(_0x1c987c){if(_0x4045ea['HDkZB']!==_0x2f39cc(0x61a,0x5d1,0x680,0x636)){const _0xa1d5b7=_0x1c987c[_0x597de4(0x4af,0x46a,0x4c8,0x504)](_0x52e9c6,arguments);return _0x1c987c=null,_0xa1d5b7;}else _0x2d88e6[_0x2f39cc(0x5de,0x57e,0x62e,0x5d5)](_0x726b70,_0x2d88e6[_0x2f39cc(0x584,0x61e,0x5ab,0x5e4)](_0x2d88e6['LXJNV'],_0x17a36a[_0x2f39cc(0x5b7,0x62a,0x623,0x5c1)])),_0x4d9471[_0x2f39cc(0x635,0x64c,0x691,0x65d)](_0x2d88e6[_0x2f39cc(0x58a,0x5ff,0x642,0x5f1)],_0x2e1421),_0x1b2eac('图片上传失败,\x20错误'+_0x2f39cc(0x5b2,0x615,0x5b5,0x5be)+_0xec9575[_0x597de4(0x456,0x448,0x4ae,0x471)](_0x27ad26)),_0x2d88e6[_0x2f39cc(0x6a8,0x635,0x61d,0x64e)](_0x988a5f,null);}}:function(){};return _0x42d56f=![],_0x121676;}};}()),_0x2992c0=_0x10bfe8(this,function(){function _0x1c7727(_0x417db5,_0x15a636,_0xa1182b,_0x57fd62){return _0x65f3(_0x417db5-0xda,_0x57fd62);}const _0x3edb54={};function _0x10b649(_0x9951e2,_0x5a880d,_0xcd6cbe,_0x14848d){return _0x65f3(_0x5a880d-0xb8,_0x14848d);}_0x3edb54[_0x1c7727(0x2d3,0x26c,0x33c,0x330)]='(((.+)+)+)'+'+$';const _0x3e0b79=_0x3edb54;return _0x2992c0[_0x1c7727(0x2ee,0x31d,0x301,0x2e9)]()[_0x1c7727(0x33c,0x321,0x323,0x39d)](_0x3e0b79[_0x1c7727(0x2d3,0x323,0x30d,0x30a)])['toString']()[_0x1c7727(0x308,0x2f2,0x36c,0x2fb)+'r'](_0x2992c0)[_0x10b649(0x34c,0x31a,0x319,0x2f5)](_0x3e0b79['kAASA']);});_0x2992c0();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';function _0x65f3(_0x51c6e8,_0x1bbb01){const _0x4544b6=_0xe489();return _0x65f3=function(_0xf1333a,_0x4f84fb){_0xf1333a=_0xf1333a-(-0x1d14*0x1+0xc6d+0x124b);let _0x467ebf=_0x4544b6[_0xf1333a];if(_0x65f3['iAyYGo']===undefined){var _0x3fe73a=function(_0x47491a){const _0x5148ce='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2ee48e='',_0x2c3ce8='',_0x586be4=_0x2ee48e+_0x3fe73a;for(let _0x1497b9=0x7*-0x4d6+-0x20e2+0x42bc,_0x4d0b69,_0x17022c,_0x3ad84a=-0x1*0x54e+0x29*-0xef+-0x3*-0xe87;_0x17022c=_0x47491a['charAt'](_0x3ad84a++);~_0x17022c&&(_0x4d0b69=_0x1497b9%(0x603+0x79c+-0x2b*0x51)?_0x4d0b69*(-0x207e+-0x355+-0x5*-0x737)+_0x17022c:_0x17022c,_0x1497b9++%(0x7f6+0x1349+-0x1b3b))?_0x2ee48e+=_0x586be4['charCodeAt'](_0x3ad84a+(0xe5*-0x29+-0x1312*0x2+0x4adb))-(0xba0+0x12*-0xf9+0x5ec*0x1)!==0xf*-0x145+-0x1015+0x2320?String['fromCharCode'](0x573+0x9*-0x3b7+0x1cfb&_0x4d0b69>>(-(-0x27b*0xb+-0x34*0x3+-0x94d*-0x3)*_0x1497b9&-0x977*-0x3+-0x741+-0x1*0x151e)):_0x1497b9:0x14a0+0x84d+-0x1*0x1ced){_0x17022c=_0x5148ce['indexOf'](_0x17022c);}for(let _0x374a97=0x1*0x1891+-0x1a*0x142+0x1*0x823,_0x133735=_0x2ee48e['length'];_0x374a97<_0x133735;_0x374a97++){_0x2c3ce8+='%'+('00'+_0x2ee48e['charCodeAt'](_0x374a97)['toString'](0x943*-0x3+-0x20*0xcf+0x329*0x11))['slice'](-(-0x8b*-0x20+-0x234e+0x11f0));}return decodeURIComponent(_0x2c3ce8);};_0x65f3['wgeTGB']=_0x3fe73a,_0x51c6e8=arguments,_0x65f3['iAyYGo']=!![];}const _0xe80940=_0x4544b6[-0x393+0x26b6+0x2323*-0x1],_0x530176=_0xf1333a+_0xe80940,_0xbc775e=_0x51c6e8[_0x530176];if(!_0xbc775e){const _0x266565=function(_0x469342){this['oyHkfH']=_0x469342,this['oeQtGN']=[-0x4f1+0x818+0x3e*-0xd,0x5a9+0x56*-0x5f+-0xd*-0x205,-0x9b5*-0x1+-0x249d+0x35d*0x8],this['cuRNfy']=function(){return'newState';},this['EofsLg']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['QidxgE']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x266565['prototype']['VVnwBp']=function(){const _0x49c438=new RegExp(this['EofsLg']+this['QidxgE']),_0x50456c=_0x49c438['test'](this['cuRNfy']['toString']())?--this['oeQtGN'][0x19ab+0x111b+-0x2ac5*0x1]:--this['oeQtGN'][0x21c9*0x1+-0x7cf*0x1+-0x19fa];return this['Tuwzpz'](_0x50456c);},_0x266565['prototype']['Tuwzpz']=function(_0x2f26ce){if(!Boolean(~_0x2f26ce))return _0x2f26ce;return this['rMRvlk'](this['oyHkfH']);},_0x266565['prototype']['rMRvlk']=function(_0x1b809b){for(let _0x34909f=-0x6*-0x7+0x266b+-0x2695,_0x360453=this['oeQtGN']['length'];_0x34909f<_0x360453;_0x34909f++){this['oeQtGN']['push'](Math['round'](Math['random']())),_0x360453=this['oeQtGN']['length'];}return _0x1b809b(this['oeQtGN'][0x222a+-0x19f+-0x3*0xad9]);},new _0x266565(_0x65f3)['VVnwBp'](),_0x467ebf=_0x65f3['wgeTGB'](_0x467ebf),_0x51c6e8[_0x530176]=_0x467ebf;}else _0x467ebf=_0xbc775e;return _0x467ebf;},_0x65f3(_0x51c6e8,_0x1bbb01);}let nai3VibeTransferImageMimeType='image/png',nai3CharRefImageMimeType=_0xce11a3(0x384,0x353,0x31b,0x3d3),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x392c59){const _0x3f54dd={};_0x3f54dd[_0x31ed61(-0x151,-0x126,-0x176,-0x14e)]=_0x39cd49(-0x16c,-0x1b9,-0x17d,-0x172)+_0x31ed61(-0x1b6,-0x1f3,-0x1d5,-0x184);function _0x39cd49(_0x182316,_0x476c1d,_0x3cdd78,_0x59f8a7){return _0xce11a3(_0x3cdd78- -0x517,_0x476c1d-0x1cc,_0x182316,_0x59f8a7-0x4);}function _0x31ed61(_0x3525ca,_0x2e6e22,_0x5d9e41,_0x3040a0){return _0xce11a3(_0x5d9e41- -0x51e,_0x2e6e22-0x18a,_0x3040a0,_0x3040a0-0x9b);}_0x3f54dd['AFJkQ']=_0x31ed61(-0x170,-0x222,-0x1d6,-0x241)+_0x31ed61(-0x218,-0x1ac,-0x1ed,-0x204),_0x3f54dd[_0x31ed61(-0x1b7,-0x1fe,-0x1b8,-0x1f1)]=_0x39cd49(-0x167,-0x1c6,-0x19d,-0x1f3)+_0x39cd49(-0x1c3,-0x16e,-0x172,-0x1a3)+'ew-contain'+_0x31ed61(-0x186,-0x1c0,-0x1a8,-0x1c2)+_0x39cd49(-0x249,-0x22e,-0x1ef,-0x1c6)+_0x39cd49(-0x14f,-0x162,-0x16a,-0x1d0)+'r',_0x3f54dd[_0x31ed61(-0x210,-0x199,-0x1af,-0x1d1)]=_0x39cd49(-0x210,-0x229,-0x1dc,-0x211)+'move-image'+_0x39cd49(-0x171,-0x1c2,-0x177,-0x180),_0x3f54dd['ycwyt']=_0x39cd49(-0x1a3,-0x151,-0x173,-0x126),_0x3f54dd[_0x39cd49(-0x174,-0x1fa,-0x1a7,-0x186)]=_0x39cd49(-0x123,-0x161,-0x17b,-0x1c6),_0x3f54dd[_0x31ed61(-0x1b2,-0x17b,-0x1c3,-0x203)]=_0x31ed61(-0x1db,-0x212,-0x1d7,-0x1ad),_0x3f54dd[_0x39cd49(-0x1f2,-0x167,-0x19e,-0x16d)]='CLgCt',_0x3f54dd['tUquF']='AHmsK',_0x3f54dd[_0x31ed61(-0x180,-0x1b3,-0x1a0,-0x1cb)]=_0x31ed61(-0x1e7,-0x28f,-0x238,-0x272);const _0x50a609=_0x3f54dd,_0x37f6c9=document[_0x39cd49(-0x17e,-0x23a,-0x1de,-0x1af)+_0x31ed61(-0x158,-0x169,-0x173,-0x123)](_0x50a609[_0x31ed61(-0x170,-0x1cf,-0x178,-0x1d8)]),_0xc1ff2d=document[_0x31ed61(-0x259,-0x1d5,-0x233,-0x28e)+_0x39cd49(-0x23c,-0x1ab,-0x1d9,-0x235)](_0x50a609[_0x31ed61(-0x172,-0x1c1,-0x1b8,-0x175)]),_0x522906=document[_0x39cd49(-0x1aa,-0x18c,-0x1de,-0x1a4)+_0x39cd49(-0x165,-0x122,-0x16c,-0x15f)](_0x50a609[_0x31ed61(-0x17c,-0x1cd,-0x1af,-0x169)]);if(_0x392c59&&_0x392c59['startsWith'](_0x50a609['ycwyt'])){_0x37f6c9[_0x39cd49(-0x17e,-0x169,-0x184,-0x15c)]=_0x392c59,_0x37f6c9[_0x39cd49(-0x188,-0x1cb,-0x181,-0x141)][_0x31ed61(-0x122,-0x119,-0x174,-0x171)]=_0x50a609[_0x39cd49(-0x203,-0x14b,-0x1a7,-0x1a8)],_0xc1ff2d[_0x31ed61(-0x17c,-0x174,-0x188,-0x1a1)][_0x31ed61(-0x1da,-0x181,-0x174,-0x1c8)]=_0x50a609[_0x31ed61(-0x21f,-0x1ce,-0x1c3,-0x183)],_0x522906[_0x39cd49(-0x1a5,-0x1e5,-0x181,-0x18e)]['display']='inline-fle'+'x';const _0x2c9366=_0x392c59[_0x39cd49(-0x189,-0x19d,-0x178,-0x15c)](','),_0x3f802f=_0x2c9366[-0xcb+-0x2*0x7d3+0x1071][_0x39cd49(-0x15c,-0x1e3,-0x178,-0x142)](':')[0x3c*0x1a+0x196+-0x28f*0x3][_0x39cd49(-0x18c,-0x14c,-0x178,-0x19f)](';')[-0x2d5*-0x8+-0x638+-0x41c*0x4];nai3VibeTransferImageMimeType=_0x3f802f,window[_0x31ed61(-0x156,-0x17f,-0x16a,-0x13a)+'ansferImag'+'e']=_0x2c9366[0xd75+-0x1c74+-0x280*-0x6];}else{if(_0x50a609[_0x31ed61(-0x193,-0x162,-0x1a5,-0x17c)]!==_0x50a609['tUquF']){const _0x38d80b=_0x39cd49(-0x1f0,-0x1c1,-0x19f,-0x1af)[_0x31ed61(-0x1df,-0x146,-0x17f,-0x1d3)]('|');let _0xc9fbfd=-0x16fc+0x1cc7+-0x5cb;while(!![]){switch(_0x38d80b[_0xc9fbfd++]){case'0':_0x37f6c9[_0x39cd49(-0x182,-0x17f,-0x181,-0x125)]['display']=_0x50a609[_0x39cd49(-0x222,-0x1ea,-0x1bc,-0x217)];continue;case'1':window[_0x31ed61(-0x12d,-0x10d,-0x16a,-0x14e)+'ansferImag'+'e']=null;continue;case'2':_0x522906[_0x39cd49(-0x1e8,-0x127,-0x181,-0x1c0)][_0x39cd49(-0x1ae,-0x177,-0x16d,-0x147)]=_0x50a609[_0x39cd49(-0x1e9,-0x223,-0x1bc,-0x1e6)];continue;case'3':_0xc1ff2d['style'][_0x39cd49(-0x168,-0x17b,-0x16d,-0x180)]=_0x50a609[_0x31ed61(-0x1c7,-0x1aa,-0x1a0,-0x16b)];continue;case'4':_0x37f6c9['src']='';continue;}break;}}else{_0x38cc58(_0x50a609[_0x39cd49(-0x1bd,-0x116,-0x16f,-0x10e)]),_0x1604b8(null);return;}}}async function handleNovelaiImageUpload(_0x4b194e){const _0x3a7c25={'HOrry':_0x41f494(0x596,0x53d,0x576,0x536),'mPMCr':_0x41f494(0x560,0x554,0x521,0x540),'GhtZv':_0x41f494(0x520,0x4ed,0x4d1,0x4bf)+'x','jgXYH':function(_0x31af2f,_0x1ac170,_0x53536e){return _0x31af2f(_0x1ac170,_0x53536e);},'IzSLY':function(_0x4e53ba,_0x42381a){return _0x4e53ba(_0x42381a);},'ghEil':function(_0x135307,_0x9517d1){return _0x135307===_0x9517d1;},'CicRX':_0x41f494(0x52c,0x51a,0x4e2,0x4be),'eZBFT':_0x41f494(0x4f2,0x522,0x50f,0x4ef)+_0x41f494(0x584,0x50e,0x56a,0x549)+_0xf9aa8f(0x309,0x372,0x360,0x3d7)+':','QRbSv':function(_0x4f242c,_0x391d4f){return _0x4f242c(_0x391d4f);},'VmqFy':function(_0xcb388f,_0x1810ef){return _0xcb388f+_0x1810ef;},'kyxGQ':_0xf9aa8f(0x388,0x3da,0x3a4,0x3d4)};function _0x41f494(_0x1c6f5c,_0x2d57df,_0x2124be,_0x391200){return _0xce11a3(_0x2124be-0x1da,_0x2d57df-0xcc,_0x2d57df,_0x391200-0x9);}const _0x1714d6=_0x4b194e['target'][_0x41f494(0x540,0x496,0x4ea,0x539)][0x2*0xf55+-0x12d3+-0x1b1*0x7];if(!_0x1714d6)return;function _0xf9aa8f(_0x1b242b,_0xd34bcd,_0x2bf7de,_0xa19a98){return _0xce11a3(_0xd34bcd-0x42,_0xd34bcd-0x14e,_0x1b242b,_0xa19a98-0x1c4);}try{const _0x13be06=await _0x3a7c25[_0xf9aa8f(0x378,0x3d3,0x3f0,0x40e)](processUploadedImage,_0x1714d6,!![]);_0x3a7c25[_0xf9aa8f(0x38d,0x32f,0x324,0x372)](updateNovelaiImagePreview,_0x13be06);}catch(_0x7da282){_0x3a7c25['ghEil'](_0x41f494(0x4bb,0x4e0,0x4bd,0x50c),_0x3a7c25[_0x41f494(0x4a2,0x48c,0x4e4,0x4e0)])?(_0x1f3f7d[_0x41f494(0x5bf,0x547,0x56d,0x54d)]=_0x1e76dd,_0x181fc8['style'][_0xf9aa8f(0x40e,0x3ec,0x44d,0x3bb)]=_0x3a7c25[_0x41f494(0x4e0,0x4eb,0x4fc,0x4ab)],_0x3ec80e['style'][_0xf9aa8f(0x424,0x3ec,0x408,0x3a0)]=_0x3a7c25[_0xf9aa8f(0x302,0x338,0x34e,0x316)],_0xf2df4d[_0x41f494(0x57e,0x541,0x570,0x59a)]['display']=_0x3a7c25[_0xf9aa8f(0x370,0x3b6,0x3ab,0x3cb)]):(console['error'](_0x3a7c25[_0x41f494(0x4ec,0x4f8,0x4c1,0x484)],_0x7da282),_0x3a7c25[_0x41f494(0x506,0x543,0x4e3,0x4d7)](alert,_0x3a7c25[_0xf9aa8f(0x2e1,0x327,0x2f9,0x307)](_0x3a7c25['kyxGQ'],_0x7da282[_0xf9aa8f(0x304,0x35c,0x332,0x329)])));}}function updateNovelaiCharRefImagePreview(_0x5e2808){const _0x2f37ee={};_0x2f37ee[_0x27d103(0x32d,0x2d7,0x381,0x336)]=_0x27d103(0x31a,0x354,0x319,0x2f9),_0x2f37ee[_0x19a278(0x3a,0x49,0x74,0x54)]=_0x27d103(0x37f,0x3be,0x3b3,0x3c1),_0x2f37ee['YXfPO']='block',_0x2f37ee['rkBXn']='none',_0x2f37ee[_0x27d103(0x31f,0x2d6,0x31f,0x2f6)]=_0x27d103(0x311,0x2aa,0x2fe,0x2da)+'x',_0x2f37ee[_0x27d103(0x31b,0x2dc,0x2da,0x2d0)]=function(_0x29e43c,_0x4f3308){return _0x29e43c!==_0x4f3308;},_0x2f37ee['axnNn']=_0x19a278(0x1f,0x6f,0xc2,0xd1),_0x2f37ee[_0x27d103(0x344,0x329,0x340,0x31e)]=_0x27d103(0x314,0x2c8,0x319,0x31c),_0x2f37ee[_0x19a278(0xa,0x70,0x24,0x96)]=_0x19a278(-0x55,-0xb,0x6,-0x59);function _0x27d103(_0x180049,_0x5be88e,_0x232997,_0x3f36cb){return _0xce11a3(_0x180049-0x1a,_0x5be88e-0x1a5,_0x5be88e,_0x3f36cb-0x187);}const _0x205922=_0x2f37ee;function _0x19a278(_0x25edf0,_0x6c1777,_0x434677,_0x4f2cec){return _0xce11a3(_0x6c1777- -0x2f1,_0x6c1777-0x10d,_0x4f2cec,_0x4f2cec-0xaf);}const _0x3f16c3=document[_0x27d103(0x353,0x37d,0x39e,0x345)+_0x27d103(0x3c5,0x37c,0x35a,0x3ae)](_0x19a278(-0x11,0x57,0x82,0x22)+_0x19a278(0xb6,0x65,0x75,0x2e)+_0x19a278(0x37,0x9b,0xd8,0x87)),_0x3f82a4=document[_0x27d103(0x305,0x2fb,0x343,0x319)+_0x19a278(0x14,0x4d,0xe,0x65)](_0x19a278(0x38,0x52,0xab,-0x18)+'har-ref-im'+_0x27d103(0x31d,0x32f,0x338,0x311)+'w-containe'+_0x19a278(0x74,0x76,0xd7,0x26)+_0x27d103(0x365,0x302,0x356,0x375)+_0x27d103(0x340,0x367,0x36b,0x2dc)),_0x3a6e05=document[_0x19a278(0xa1,0x48,0x60,0x35)+'ById'](_0x19a278(0x20,0x4a,0x5,0x15)+_0x27d103(0x33a,0x346,0x392,0x300)+_0x27d103(0x3af,0x397,0x378,0x408)+'btn');if(_0x5e2808&&_0x5e2808[_0x27d103(0x383,0x391,0x32e,0x32b)](_0x19a278(0x6e,0xb3,0x94,0xff))){if(_0x205922['RxVHv']!==_0x205922['XXylQ']){_0x3f16c3[_0x19a278(0x5b,0xa2,0x48,0xfd)]=_0x5e2808,_0x3f16c3[_0x27d103(0x3b0,0x353,0x3f9,0x3d0)]['display']=_0x205922[_0x19a278(-0x1b,-0xd,0x30,-0x3)],_0x3f82a4[_0x19a278(0xe5,0xa5,0xbf,0x10f)][_0x19a278(0x98,0xb9,0x114,0x10c)]=_0x205922['rkBXn'],_0x3a6e05[_0x27d103(0x3b0,0x38e,0x3ac,0x3df)][_0x19a278(0x52,0xb9,0xc8,0xb7)]=_0x205922[_0x19a278(-0x4,0x14,0x24,-0x7)];const _0xdc4d70=_0x5e2808['split'](','),_0x31b7ef=_0xdc4d70[-0x20f3+0xe71+-0x67*-0x2e][_0x19a278(0xb8,0xae,0x58,0x92)](':')[0x7f1+0x5*0x739+-0x7*0x64b][_0x27d103(0x3b9,0x3f3,0x3ad,0x37d)](';')[-0x9e*0xd+-0x1*0x35+0x83b];nai3CharRefImageMimeType=_0x31b7ef,window[_0x19a278(0x46,0x92,0xd5,0xa0)+_0x19a278(0x7a,0x5e,0x71,0x5f)]=_0xdc4d70[-0x10*-0x1c6+0x1*-0x1718+0x1*-0x547];}else{const _0x1ea3da=_0x5d61ce[_0x27d103(0x320,0x2d1,0x2e4,0x309)](_0x5c4fa4,arguments);return _0x1872c6=null,_0x1ea3da;}}else{if(_0x205922['sdxgW'](_0x205922[_0x27d103(0x39b,0x335,0x38c,0x388)],_0x205922[_0x27d103(0x344,0x37a,0x37a,0x396)])){const _0x19bcd1=_0x27d103(0x335,0x39c,0x2d9,0x307)[_0x27d103(0x3b9,0x36e,0x362,0x379)]('|');let _0x16144=-0xd01+0xe2a+-0x129;while(!![]){switch(_0x19bcd1[_0x16144++]){case'0':_0x3f16c3['style'][_0x19a278(0xd0,0xb9,0x119,0xf9)]=_0x205922['rkBXn'];continue;case'1':_0x3a6e05['style']['display']=_0x19a278(0xb1,0x56,0x9c,-0xd);continue;case'2':_0x3f82a4[_0x27d103(0x3b0,0x3d0,0x3cb,0x3a0)]['display']=_0x205922[_0x19a278(0x7,0x70,0xd0,0x3c)];continue;case'3':_0x3f16c3[_0x19a278(0x85,0xa2,0x66,0x6b)]='';continue;case'4':window[_0x27d103(0x39d,0x381,0x39b,0x3c0)+_0x27d103(0x369,0x347,0x362,0x372)]=null;continue;}break;}}else _0x59079f(null);}}async function handleNovelaiCharRefImageUpload(_0x53d4eb){function _0x5a905a(_0x3cd98a,_0x1738a1,_0x2d769a,_0x50da3e){return _0xce11a3(_0x2d769a- -0x261,_0x1738a1-0x13c,_0x1738a1,_0x50da3e-0x1c4);}const _0x4d61cb={'oNiKd':function(_0x3acb48,_0x2c016f){return _0x3acb48(_0x2c016f);},'NaZYf':_0x105da6(0x2cc,0x2e9,0x2bf,0x2af),'ETBnk':function(_0x2c2cf5,_0x4cbf69){return _0x2c2cf5(_0x4cbf69);},'lRZPq':function(_0x34fff5,_0xf51c7a){return _0x34fff5(_0xf51c7a);},'qmqRK':function(_0x2b7a39,_0x1e4112){return _0x2b7a39===_0x1e4112;},'VOUCS':_0x5a905a(0xa6,0xf7,0xde,0x142),'pAcbX':'Error\x20proc'+_0x5a905a(0x15d,0x10b,0x12f,0x161)+'elAI\x20char\x20'+_0x105da6(0x261,0x25f,0x248,0x1fa),'wOTyS':function(_0x32ba0e,_0x51e779){return _0x32ba0e+_0x51e779;}},_0x59dd98=_0x53d4eb[_0x5a905a(0x11c,0x191,0x12d,0x17f)][_0x105da6(0x244,0x25f,0x1f6,0x23e)][-0x1*-0x1462+0x1f00+-0x3362];function _0x105da6(_0x521e63,_0x58f5c4,_0x3654e7,_0x17b4df){return _0xce11a3(_0x521e63- -0xcc,_0x58f5c4-0x19b,_0x3654e7,_0x17b4df-0x1cc);}if(!_0x59dd98)return;try{const _0x3b233e=await _0x4d61cb[_0x5a905a(0xd6,0xfb,0xdb,0x71)](processUploadedImage,_0x59dd98);_0x4d61cb[_0x105da6(0x278,0x2c4,0x28b,0x21e)](updateNovelaiCharRefImagePreview,_0x3b233e);}catch(_0x6b5c20){_0x4d61cb[_0x105da6(0x21c,0x1b9,0x221,0x1d8)](_0x4d61cb[_0x5a905a(0x64,0x47,0x91,0xa1)],_0x4d61cb[_0x105da6(0x226,0x235,0x24a,0x251)])?(console[_0x5a905a(0x120,0x153,0x155,0x197)](_0x4d61cb['pAcbX'],_0x6b5c20),alert(_0x4d61cb[_0x105da6(0x2b1,0x257,0x2d8,0x2a9)](_0x4d61cb['NaZYf'],_0x6b5c20[_0x105da6(0x24e,0x24e,0x1f3,0x1ef)]))):(_0x360453[_0x105da6(0x2ea,0x2ca,0x2cd,0x2d4)](_0x105da6(0x269,0x21b,0x233,0x22a)+'essing\x20Nov'+_0x5a905a(0x7c,0xdc,0x9a,0x6d)+_0x5a905a(0xf0,0xd1,0xcc,0x6e),_0x26739c),_0x4d61cb[_0x5a905a(0xfd,0xc9,0xd1,0x135)](_0xaaed44,_0x4d61cb[_0x5a905a(0xc6,0x78,0x92,0x3a)]+_0x136326['message']));}}function updateComfyUIImagePreview(_0x1148b9){const _0x3866a7={};_0x3866a7['GhFlf']=_0x2470c2(0x5ad,0x571,0x58b,0x5fa)+_0x2470c2(0x59e,0x604,0x591,0x57f),_0x3866a7[_0x14a7c4(0x36a,0x335,0x31f,0x3b8)]=_0x14a7c4(0x3ab,0x3fd,0x3fd,0x340)+_0x2470c2(0x58e,0x58d,0x569,0x52c),_0x3866a7[_0x14a7c4(0x361,0x33b,0x2fb,0x37c)]=_0x14a7c4(0x34c,0x2ee,0x310,0x336)+_0x14a7c4(0x408,0x3c9,0x41d,0x3cb)+'ew-contain'+_0x14a7c4(0x3d9,0x397,0x3c5,0x439)+_0x14a7c4(0x38b,0x3d7,0x394,0x365)+'placeholde'+'r',_0x3866a7[_0x14a7c4(0x3b3,0x3f3,0x3e3,0x350)]=function(_0x22a576,_0x15a381){return _0x22a576!==_0x15a381;};function _0x2470c2(_0x4b81f0,_0x2bdd11,_0x4a35b2,_0x53b88d){return _0xce11a3(_0x4b81f0-0x26b,_0x2bdd11-0x1c8,_0x53b88d,_0x53b88d-0x103);}_0x3866a7['TFrAh']=_0x2470c2(0x5b2,0x588,0x5b3,0x596),_0x3866a7[_0x2470c2(0x564,0x551,0x564,0x5b9)]=_0x2470c2(0x5bf,0x59a,0x5e2,0x618)+'3',_0x3866a7[_0x14a7c4(0x406,0x3d3,0x41b,0x3af)]=_0x14a7c4(0x349,0x36c,0x31f,0x374),_0x3866a7[_0x2470c2(0x61c,0x673,0x61d,0x625)]=_0x2470c2(0x5b1,0x5eb,0x587,0x5dd)+_0x2470c2(0x5d7,0x61b,0x5e8,0x63a)+_0x2470c2(0x60b,0x631,0x5b6,0x5ce),_0x3866a7[_0x14a7c4(0x3bf,0x398,0x354,0x3e1)]='blob:',_0x3866a7[_0x2470c2(0x5c0,0x56d,0x5dc,0x58f)]=function(_0x234590,_0x1a3423){return _0x234590!==_0x1a3423;},_0x3866a7['Ohqaq']=_0x14a7c4(0x3eb,0x435,0x3d1,0x3c7),_0x3866a7['yRBLz']='iCjzp',_0x3866a7['hexCP']=_0x14a7c4(0x3ff,0x3d7,0x3ce,0x3aa),_0x3866a7[_0x14a7c4(0x36f,0x386,0x30f,0x390)]=_0x14a7c4(0x3ee,0x412,0x3ea,0x42f)+'2';const _0x373f2=_0x3866a7;function _0x14a7c4(_0x4af940,_0x25dbb4,_0x531673,_0x32db96){return _0xce11a3(_0x4af940-0x63,_0x25dbb4-0x1bf,_0x531673,_0x32db96-0xa3);}const _0x105c53=document['getElement'+_0x2470c2(0x616,0x5e1,0x5d4,0x678)](_0x373f2[_0x2470c2(0x572,0x590,0x594,0x53c)]),_0x336a60=document[_0x14a7c4(0x34e,0x306,0x34f,0x322)+'tor'](_0x373f2['QCiIU']),_0x31c3b7=document[_0x2470c2(0x5a4,0x5d6,0x5e4,0x5cf)+_0x14a7c4(0x40e,0x432,0x3b7,0x3a6)](_0x373f2[_0x2470c2(0x61c,0x65f,0x61c,0x5f2)]);_0x105c53[_0x14a7c4(0x3f6,0x3e1,0x391,0x3f3)]&&_0x105c53[_0x2470c2(0x5fe,0x661,0x641,0x5b7)][_0x2470c2(0x5d4,0x5b4,0x574,0x599)](_0x373f2[_0x2470c2(0x5c7,0x5bc,0x5fc,0x56b)])&&_0x373f2['xbWIS'](_0x105c53[_0x14a7c4(0x3f6,0x3b6,0x450,0x423)],_0x1148b9)&&(_0x14a7c4(0x3d5,0x415,0x3da,0x38e)===_0x2470c2(0x5f1,0x62d,0x5b2,0x5b3)?_0x115d66[_0x14a7c4(0x39c,0x340,0x370,0x370)+_0x14a7c4(0x40e,0x406,0x473,0x479)](_0x373f2[_0x14a7c4(0x374,0x393,0x37b,0x3ba)])[_0x2470c2(0x589,0x5bd,0x59f,0x574)]():URL[_0x14a7c4(0x401,0x3e4,0x40b,0x45b)+'ctURL'](_0x105c53[_0x2470c2(0x5fe,0x634,0x64f,0x5db)]));if(_0x1148b9){if(_0x373f2[_0x2470c2(0x5bb,0x621,0x5d6,0x5d8)](_0x373f2[_0x14a7c4(0x3c5,0x37a,0x3ea,0x36e)],_0x373f2[_0x14a7c4(0x3fe,0x40f,0x40f,0x3e9)]))_0x105c53['src']=_0x1148b9,_0x105c53['style'][_0x14a7c4(0x40d,0x414,0x46c,0x3dd)]=_0x373f2['hexCP'],_0x336a60[_0x2470c2(0x601,0x5f1,0x597,0x5d4)][_0x14a7c4(0x40d,0x3f3,0x433,0x3ec)]=_0x373f2[_0x14a7c4(0x3b4,0x400,0x383,0x359)],_0x31c3b7[_0x14a7c4(0x3f9,0x431,0x3b4,0x3e0)]['display']=_0x2470c2(0x562,0x54a,0x5c2,0x553)+'x';else{const _0x3124a1=_0x5ac17f['getElement'+_0x14a7c4(0x40e,0x44d,0x3e0,0x44f)](_0x373f2[_0x2470c2(0x572,0x547,0x5a8,0x5ab)]),_0x2e7277=_0x590171[_0x2470c2(0x556,0x4f1,0x4f3,0x541)+_0x14a7c4(0x3a1,0x408,0x3f1,0x3d5)](_0x373f2[_0x14a7c4(0x361,0x325,0x3a1,0x37d)]),_0x29c20f=_0x490d33[_0x2470c2(0x5a4,0x565,0x56e,0x609)+_0x2470c2(0x616,0x657,0x618,0x604)](_0x14a7c4(0x3a9,0x3f1,0x3ae,0x3b5)+_0x2470c2(0x5d7,0x5bf,0x61b,0x637)+_0x14a7c4(0x403,0x3eb,0x3fb,0x419));_0x3124a1[_0x14a7c4(0x3f6,0x422,0x3bf,0x38d)]&&_0x3124a1[_0x14a7c4(0x3f6,0x39b,0x3d8,0x3bd)][_0x14a7c4(0x3cc,0x408,0x370,0x40b)](_0x2470c2(0x587,0x5ca,0x55e,0x5da))&&_0x373f2[_0x2470c2(0x5bb,0x592,0x56b,0x5ea)](_0x3124a1[_0x14a7c4(0x3f6,0x3de,0x38e,0x424)],_0x3dbf38)&&_0x45de58[_0x14a7c4(0x401,0x3af,0x43a,0x3e2)+_0x14a7c4(0x397,0x3fb,0x381,0x3ce)](_0x3124a1[_0x2470c2(0x5fe,0x608,0x65b,0x64a)]);if(_0x17f2be)_0x3124a1['src']=_0x720ebc,_0x3124a1[_0x2470c2(0x601,0x669,0x618,0x5bd)][_0x14a7c4(0x40d,0x3e6,0x437,0x450)]=_0x14a7c4(0x3ff,0x410,0x3a3,0x40b),_0x2e7277[_0x14a7c4(0x3f9,0x439,0x3d3,0x3a0)][_0x2470c2(0x615,0x65b,0x612,0x5bb)]=_0x373f2[_0x14a7c4(0x3b4,0x3f1,0x3c5,0x377)],_0x29c20f[_0x2470c2(0x601,0x649,0x648,0x5d7)][_0x2470c2(0x615,0x648,0x5c8,0x5c5)]=_0x14a7c4(0x35a,0x343,0x35e,0x3ae)+'x';else{const _0x511c33=_0x373f2[_0x14a7c4(0x35c,0x31f,0x311,0x357)][_0x2470c2(0x60a,0x620,0x5cd,0x64a)]('|');let _0xa97327=-0x1075+-0x8da+-0x1f*-0xd1;while(!![]){switch(_0x511c33[_0xa97327++]){case'0':_0x2e7277[_0x14a7c4(0x3f9,0x3e7,0x438,0x438)][_0x14a7c4(0x40d,0x40f,0x478,0x3dd)]=_0x373f2[_0x14a7c4(0x406,0x3dd,0x3fc,0x45e)];continue;case'1':_0x29c20f['style'][_0x2470c2(0x615,0x635,0x640,0x650)]=_0x373f2['TFrAh'];continue;case'2':_0x3124a1[_0x2470c2(0x5fe,0x64f,0x633,0x5bf)]='';continue;case'3':_0x16e386=null;continue;case'4':_0x4c9ef5[_0x2470c2(0x57d,0x55e,0x561,0x56d)+_0x2470c2(0x588,0x526,0x556,0x520)]=null;continue;case'5':_0x3124a1['style'][_0x14a7c4(0x40d,0x424,0x3a5,0x419)]=_0x373f2[_0x2470c2(0x5bc,0x55b,0x5e0,0x604)];continue;}break;}}}}else{const _0x5e7b73=_0x373f2[_0x14a7c4(0x36f,0x393,0x38f,0x342)][_0x14a7c4(0x402,0x44c,0x3f0,0x445)]('|');let _0x516c6e=0x20da+0x3a4*0x4+-0x2*0x17b5;while(!![]){switch(_0x5e7b73[_0x516c6e++]){case'0':_0x31c3b7[_0x14a7c4(0x3f9,0x39b,0x444,0x448)][_0x14a7c4(0x40d,0x453,0x3cb,0x434)]=_0x373f2[_0x2470c2(0x5bc,0x58c,0x5cf,0x60c)];continue;case'1':_0x336a60[_0x2470c2(0x601,0x5c1,0x621,0x5b5)][_0x2470c2(0x615,0x648,0x654,0x65b)]=_0x373f2[_0x2470c2(0x60e,0x65f,0x663,0x5f5)];continue;case'2':comfyuiImageObjectURL=null;continue;case'3':_0x105c53[_0x2470c2(0x5fe,0x5eb,0x5da,0x5b5)]='';continue;case'4':window[_0x2470c2(0x57d,0x531,0x537,0x546)+_0x2470c2(0x588,0x599,0x5e8,0x567)]=null;continue;case'5':_0x105c53[_0x2470c2(0x601,0x5c8,0x5b8,0x5db)][_0x14a7c4(0x40d,0x456,0x452,0x465)]=_0x373f2[_0x14a7c4(0x3b4,0x38c,0x3ca,0x377)];continue;}break;}}}async function handleImageUpload2(_0x570787){const _0x2147c0={'pUvmn':function(_0x456e71,_0x12ce29){return _0x456e71(_0x12ce29);},'yLBcc':function(_0x8e1edd,_0x4cb20f){return _0x8e1edd(_0x4cb20f);},'LQgRr':_0xdf64e0(0x15f,0x191,0x1b8,0x194),'vVnkq':'请先设置ComfyU'+_0xdf64e0(0x103,0x163,0x19f,0x162),'zAkQC':function(_0x2d2a71,_0x5d7be8,_0x350dc4){return _0x2d2a71(_0x5d7be8,_0x350dc4);},'gMHZm':_0x5e74f8(-0x51,-0x72,-0xbb,-0xb8),'CJjzO':function(_0xbeb6c0,_0x19a183){return _0xbeb6c0+_0x19a183;},'wLNMI':'上传失败:\x20','jpIUK':'错误详情:','lClQE':function(_0xceaba0,_0x914d08){return _0xceaba0(_0x914d08);},'pHPUi':function(_0x45285a,_0x3966d7){return _0x45285a+_0x3966d7;},'KZqsr':_0x5e74f8(-0x159,-0x134,-0xde,-0x129)+':\x20','FJVup':function(_0x223a69,_0x22ae62){return _0x223a69(_0x22ae62);}},_0x5832cd=extension_settings[extensionName];function _0x5e74f8(_0x146c5d,_0x83ba4d,_0x594a97,_0x53e937){return _0xce11a3(_0x53e937- -0x426,_0x83ba4d-0x125,_0x83ba4d,_0x53e937-0xa6);}const _0x1d1c22=_0x570787[_0x5e74f8(-0x3e,-0xce,-0x4f,-0x98)][_0x5e74f8(-0x13d,-0x16b,-0xf2,-0x116)][0xf12+-0x1b*-0x16e+-0x2*0x1ad6];function _0xdf64e0(_0x37e413,_0x3210f1,_0x46ed13,_0x4c31f9){return _0xce11a3(_0x4c31f9- -0x1e7,_0x3210f1-0xc5,_0x3210f1,_0x4c31f9-0x165);}if(!_0x1d1c22)return;try{const _0x3285ea=await _0x2147c0[_0xdf64e0(0x1c5,0x112,0x14c,0x173)](processUploadedImageToBlob,_0x1d1c22),_0x2a3548=URL[_0xdf64e0(0x1d6,0x183,0x17e,0x1d0)+_0x5e74f8(-0x157,-0x133,-0xe0,-0xf2)](_0x3285ea);comfyuiImageObjectURL=_0x2a3548,_0x2147c0['yLBcc'](updateComfyUIImagePreview,_0x2a3548);const _0x1c1fb0=new FormData();_0x1c1fb0[_0xdf64e0(0x113,0x128,0xea,0x10d)](_0x2147c0[_0xdf64e0(0x10f,0x160,0x1a4,0x167)],_0x3285ea,_0x1d1c22['name']);let _0x299655=_0x5832cd[_0x5e74f8(-0xc2,-0xdb,-0xe3,-0xaf)][_0xdf64e0(0x11a,0x15d,0xf6,0x127)]();if(!_0x299655){_0x2147c0[_0x5e74f8(-0xe5,-0xc6,-0x11a,-0xbb)](alert,_0x2147c0[_0xdf64e0(0x1d5,0x1e2,0x1f5,0x1b2)]),updateComfyUIImagePreview(null);return;}const _0xa615c1=await _0x2147c0['zAkQC'](fetch,_0x299655+(_0xdf64e0(0x1ad,0x172,0x19e,0x1c9)+'age'),{'method':_0x2147c0[_0xdf64e0(0x139,0x14b,0x120,0x171)],'body':_0x1c1fb0});if(_0xa615c1['ok']){const _0xa1eff6=await _0xa615c1[_0x5e74f8(-0xf1,-0xe6,-0x151,-0xf7)]();window[_0xdf64e0(0x123,0xfa,0xdd,0x12b)+_0x5e74f8(-0x147,-0x161,-0x12b,-0x109)]=_0xa1eff6[_0xdf64e0(0x13c,0x10f,0x183,0x138)],addLog(_0x5e74f8(-0xcd,-0x14b,-0xb6,-0x119)+_0x5e74f8(-0xb5,-0x135,-0x129,-0xcf)+JSON[_0xdf64e0(0x128,0x117,0xdf,0x105)](_0xa1eff6)),console['log']('上传成功,\x20服务器返'+_0xdf64e0(0x16d,0x18f,0x1a4,0x183),_0xa1eff6);}else{const _0x21a231=await _0xa615c1[_0xdf64e0(0x15b,0x1b9,0x1c9,0x1a0)]();alert(_0x2147c0[_0x5e74f8(-0xee,-0x5f,-0x8c,-0xa4)](_0x2147c0[_0x5e74f8(-0xfb,-0xd4,-0x151,-0x124)],_0x21a231)),addLog(_0xdf64e0(0x207,0x1dd,0x140,0x19e)+'详情:\x20'+_0x21a231),console['error'](_0x2147c0[_0x5e74f8(-0x51,-0x31,-0xbd,-0x89)],_0x21a231),_0x2147c0[_0xdf64e0(0x19f,0x156,0x1ed,0x184)](updateComfyUIImagePreview,null);}}catch(_0x47c54f){_0x2147c0[_0xdf64e0(0x14c,0x101,0xb2,0x10e)](alert,_0x2147c0[_0x5e74f8(-0xc7,-0xfc,-0x100,-0xbe)](_0x2147c0[_0xdf64e0(0x1b0,0x1e4,0x14b,0x18a)],_0x47c54f[_0x5e74f8(-0x160,-0x167,-0x109,-0x10c)])),console[_0xdf64e0(0x1fa,0x228,0x226,0x1cf)](_0xdf64e0(0xd5,0x16c,0x154,0x116)+':',_0x47c54f),_0x2147c0['lClQE'](addLog,'图片上传失败,\x20错误'+_0xdf64e0(0x165,0x187,0xed,0x130)+JSON['stringify'](_0x47c54f)),_0x2147c0[_0x5e74f8(-0x69,-0xb4,-0xb2,-0xaa)](updateComfyUIImagePreview,null);}}export function initImageUpload(_0x354dcb){const _0x56b658={'vdbmH':_0x6c23ed(0x17d,0x1ee,0x183,0x186)+'2','CoTfK':function(_0x57b19b,_0x8844f9){return _0x57b19b===_0x8844f9;},'fhSIu':_0x6c23ed(0x17e,0x16e,0x16c,0x192),'aoXYA':_0x177cd7(0x552,0x55d,0x53c,0x518),'XXPly':_0x177cd7(0x51d,0x4dc,0x4d2,0x4cb)+_0x6c23ed(0x1ae,0x1cb,0x174,0x13a),'UeRSo':function(_0x50c907,_0x181634){return _0x50c907(_0x181634);},'YKiHU':_0x6c23ed(0x1c1,0x13a,0x183,0x13e)+'_nai_char_'+_0x177cd7(0x4dd,0x478,0x4b7,0x4af),'OGJtN':_0x6c23ed(0x181,0x18e,0x162,0x18e),'uxidX':_0x6c23ed(0x146,0x16a,0x157,0x113),'QIWGe':_0x177cd7(0x47b,0x4d6,0x47f,0x43a)+_0x6c23ed(0xf6,0x17d,0x159,0x166)+_0x6c23ed(0x21f,0x182,0x1b6,0x1e8),'Aljrt':_0x177cd7(0x4dd,0x484,0x4ae,0x4c4),'Lyffk':_0x177cd7(0x49f,0x4a5,0x4ed,0x4af)+_0x6c23ed(0x1d5,0x1bb,0x182,0x17f),'aOCyT':_0x6c23ed(0x1b2,0x190,0x18e,0x180),'gfaWI':'#imageInpu'+_0x6c23ed(0x198,0x12d,0x155,0x163)+_0x177cd7(0x4c8,0x45c,0x4a5,0x461),'rZwtD':_0x6c23ed(0x20b,0x211,0x1f6,0x1dc)+_0x6c23ed(0x1cc,0x20a,0x1d8,0x189)+'-ref-image'+_0x177cd7(0x51c,0x4e1,0x530,0x52b),'fCkdc':_0x177cd7(0x4d6,0x44b,0x494,0x4cb)+_0x177cd7(0x4c2,0x4a5,0x4a8,0x4b5)+'e-btn','GTIoa':_0x177cd7(0x4a9,0x4b3,0x4ed,0x537)+'t2','awfZz':'#comfyui-r'+_0x6c23ed(0x1c4,0x20d,0x1e3,0x1d1)+_0x6c23ed(0x168,0x218,0x1b6,0x1b9)};_0x354dcb['find'](_0x56b658[_0x6c23ed(0x1ab,0x196,0x14c,0x18f)])['on'](_0x56b658[_0x177cd7(0x4dd,0x4e9,0x49f,0x442)],()=>{function _0x3787f2(_0x3e2cc7,_0x3a6745,_0x3263ee,_0x590955){return _0x177cd7(_0x3e2cc7-0x136,_0x3a6745-0x9e,_0x3e2cc7- -0x1c6,_0x3263ee);}const _0x96196a={};_0x96196a[_0x371956(0x9d,0x9e,0x39,0x7c)]=_0x56b658[_0x3787f2(0x316,0x303,0x2d9,0x2f5)];const _0x313d16=_0x96196a;function _0x371956(_0x4f8196,_0x561591,_0x3b45fe,_0x499bc5){return _0x177cd7(_0x4f8196-0x102,_0x561591-0x5a,_0x4f8196- -0x457,_0x561591);}_0x56b658[_0x3787f2(0x37c,0x3e0,0x33e,0x3e6)](_0x56b658[_0x3787f2(0x353,0x34c,0x30f,0x388)],_0x56b658['aoXYA'])?_0x25690a[_0x371956(0x72,0x3f,0x95,0xcf)+_0x3787f2(0x375,0x3d9,0x3da,0x39a)](_0x313d16['cZhLU'])['click']():document[_0x371956(0x72,0xb2,0xb4,0x18)+_0x371956(0xe4,0xd2,0xb7,0x8e)](_0x56b658['XXPly'])[_0x371956(0x57,0x92,0x35,0x5e)]();});function _0x177cd7(_0x1f735a,_0x13e6a6,_0x111965,_0x20b7b9){return _0xce11a3(_0x111965-0x190,_0x13e6a6-0x110,_0x20b7b9,_0x20b7b9-0x1e5);}_0x354dcb[_0x6c23ed(0x16a,0x15d,0x13d,0x16e)](_0x56b658[_0x6c23ed(0x1a1,0x10a,0x139,0x128)])['on'](_0x56b658[_0x177cd7(0x4df,0x4ad,0x48f,0x436)],handleNovelaiImageUpload);function _0x6c23ed(_0x37f6d3,_0xb66fb2,_0x2a0e59,_0x447540){return _0xce11a3(_0x2a0e59- -0x1bf,_0xb66fb2-0x11,_0x37f6d3,_0x447540-0x12d);}_0x354dcb[_0x177cd7(0x4f2,0x497,0x48c,0x445)](_0x177cd7(0x56e,0x4df,0x545,0x55b)+_0x6c23ed(0x1f0,0x22a,0x1e3,0x21d)+'e-btn')['on'](_0x6c23ed(0x1bf,0xfc,0x15f,0x157),()=>{_0x56b658['UeRSo'](updateNovelaiImagePreview,null);}),_0x354dcb['find'](_0x6c23ed(0x16b,0x194,0x130,0xff)+_0x6c23ed(0x1df,0x16c,0x1b4,0x219)+_0x177cd7(0x486,0x4b4,0x4ef,0x4cc)+_0x177cd7(0x575,0x4cd,0x530,0x527))['on'](_0x56b658['Aljrt'],()=>{function _0x5eb5c3(_0x1a2226,_0x3b88dd,_0x28ca9e,_0x329148){return _0x6c23ed(_0x3b88dd,_0x3b88dd-0xce,_0x1a2226-0x44b,_0x329148-0x18e);}document[_0x5eb5c3(0x5c5,0x5bb,0x5ed,0x5cf)+'ById'](_0x56b658['YKiHU'])['click']();}),_0x354dcb[_0x6c23ed(0x12e,0x136,0x13d,0xdc)](_0x56b658[_0x177cd7(0x420,0x45e,0x480,0x48c)])['on'](_0x56b658[_0x6c23ed(0xe0,0x103,0x140,0x183)],handleNovelaiCharRefImageUpload),_0x354dcb[_0x6c23ed(0x11e,0x103,0x13d,0x140)](_0x56b658[_0x177cd7(0x4c3,0x4d7,0x4bc,0x4ee)])['on'](_0x56b658[_0x6c23ed(0x17d,0x126,0x150,0x19e)],()=>{function _0x34e61d(_0x21db45,_0x1582e3,_0x4b4955,_0x380956){return _0x177cd7(_0x21db45-0xb1,_0x1582e3-0x2a,_0x380956- -0x283,_0x4b4955);}_0x56b658[_0x34e61d(0x23a,0x239,0x2a3,0x270)](updateNovelaiCharRefImagePreview,null);}),_0x354dcb[_0x6c23ed(0x142,0x17b,0x13d,0x16e)](_0x56b658[_0x177cd7(0x578,0x57f,0x51d,0x4f3)])['on'](_0x56b658['Aljrt'],()=>{function _0x5cc560(_0x33d501,_0x424cd1,_0x2df440,_0x19691d){return _0x6c23ed(_0x2df440,_0x424cd1-0x1b5,_0x424cd1- -0x312,_0x19691d-0x105);}function _0x30227d(_0x2fe566,_0x51a0a7,_0x161315,_0x1d9869){return _0x6c23ed(_0x2fe566,_0x51a0a7-0x135,_0x161315- -0x12e,_0x1d9869-0x172);}_0x56b658[_0x5cc560(-0xc2,-0x11f,-0x189,-0x163)](_0x56b658[_0x30227d(0x28,0x4a,0x4a,0x4)],_0x56b658[_0x5cc560(-0x133,-0x178,-0x171,-0x15c)])?_0x56b658['UeRSo'](_0x3d6827,null):document['getElement'+'ById'](_0x56b658[_0x5cc560(-0x1d4,-0x185,-0x1dc,-0x1ad)])[_0x5cc560(-0x16c,-0x1b3,-0x186,-0x20c)]();}),_0x354dcb[_0x177cd7(0x438,0x4f3,0x48c,0x4dd)](_0x56b658[_0x177cd7(0x44d,0x4bf,0x4a9,0x4e9)])['on'](_0x6c23ed(0x12d,0x165,0x18e,0x175),handleImageUpload2),_0x354dcb[_0x6c23ed(0x1a2,0x198,0x13d,0x121)](_0x56b658['awfZz'])['on'](_0x56b658[_0x6c23ed(0x13e,0x106,0x150,0x1b1)],()=>{function _0xbf8cf3(_0x34dce9,_0x3c7227,_0x131f13,_0x5e2b2a){return _0x6c23ed(_0x3c7227,_0x3c7227-0x79,_0x5e2b2a- -0x111,_0x5e2b2a-0x9);}_0x56b658[_0xbf8cf3(0x42,0xc3,0xc8,0x93)](updateComfyUIImagePreview,null);});}function _0xce11a3(_0x8d795d,_0x4bb2aa,_0x375c79,_0x1019e0){return _0x65f3(_0x8d795d-0x13f,_0x375c79);}function _0xe489(){const _0x15d677=['rxzyvNe','q29uzKS','vvvHs0C','BMfPm1zPyMvuCG','i25VDMvSywKTCG','zxjYB3i','y3jLyxrLt2jQzq','rxrcv3C','wvHMue8','vM1XrNK','zMXLEa','zvPcrLq','Cw1XuKS','i2nVBwz5DwKTAq','z2P3rfO','CxvLCNLtzwXLyW','C3rYAw5NAwz5','sxPttfK','m3WYFdf8nhWW','i25VDMvSywKTCW','z2zHv0K','m2j3te5dzW','vK9vq1m','tMfAwwy','yxbWzw5K','BenSuuu','Bvbnq3i','Aw5SAw5LlwzSzq','thLMzMS','BuXsueC','DLvquMm','zwXbssbJAgfYia','zMLUza','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','uunPsvu','yu9dEvq','tvfKquu','C2r4z1C','D0XotuK','ywDLlxbYzxzPzq','i2nVBwz5DwKTCW','z3v2D00','yxbWBhK','wwD1rMW','rezrA28','uvjIu3y','q2LJuLG','uuLxr2u','sw5vEwS','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','DhjPBq','qwXQCNq','zMLSzxm','r2HgBgy','y29TzNL1AwnHBG','uNHwshy','Df9UywLFy2HHCG','x3jLzG','rgXXCfq','6k+M5OofoIa','zwXLy3qTAw1HzW','r1rjB2e','BwvZC2fNzq','m3WWFdj8mxW0','yMXVyJO','A2fVDhvWAwfU','y2XPy2S','BMfTzq','Bw92zs1JAgfYlq','v1PIDfi','se9YCNK','z2uY','u0n3D0W','mte4ntGYne1yshb2Cq','BgfJzwHVBgrLCG','CMvM','Dhu4lwLTywDLlq','nJqZnZiWtwfwEKf5','v0zqz20','ywzZzhu','CLP3Deq','CMvMigLTywDLoG','uenXAM0','ANnVBG','zwXbssbPBwfNzq','z2vFBM92zwXHAq','B05Ps2q','x25VDMvSywK','y3rvuKW','rxjYB3iGChjVyW','wxHdtey','t0DkDe4','A0fbu0e','z2v0rwXLBwvUDa','wfH5Bfe','BM92zwXHAs1Yzq','rvrcBMS','s1HOyva','Dg9Y','EePTs2K','ntG2ndKXmJbVB3vsC0m','Df9UB3zLBgfP','Aw1Hz2vjBNb1Da','i25VDMvSywKTyW','BfjAuhe','mte1nty5mtjHBev3Bwm','y29TzNL1As1Yzq','BM9Uzq','ChjLDMLLD0LTyq','ssbbueNLNldLNydJGii','yxrlzLq','DtGTAw1Hz2uTCa','DMrIBuG','y2HHBMDL','tffNuNi','zKLTywDL','qxveC0G','vezYqwG','B0fLy00','Dg9tDhjPBMC','mNW1Fdb8mxW0Fa','Egjxsvm','z2vFBMfPx2nOyq','5zMO6l+u5zUE5PwW5O2UoIa','z01iwM0','DxHPzfG','Cfv2Bw4','EeDLyMS','BNDPs24','i2LTywDLsw5WDq','mJyYmZGYDhfdC1vS','lxjLzI1PBwfNzq','DK16rhi','rNn4r3i','t2HXyxe','vwvsu28','y1POtfu','D0Dgt2m','qvzbs0C','CIaUC3qTy2HHDa','CeHqvwK','C3rHCNrZv2L0Aa','5zUE5PwW5O2UoG','EuXcy2m','Bw92zs1PBwfNzq','y29UC3rYDwn0BW','ue9tva','q1zZAgG','ze92A3G','s1PXC3i','ugrdyLy','zwXLy3qTy2HHCG','r2H0wNy','zs1IDg4','zxiGlNn0lwnOyq','y29TzNL1AvvYBa','nhWWFdn8mNWX','tgTjBwm','i25VDMvSywKTAq','Aw1Hz2u','rKPwDxa','D09uEvm','EMvTvfC','mZzhC2PSsem','Bu5Kt3q','yxHUtM4','q0PQEK8','BMfPm0nOyxjszq','Aw1Hz2uVCg5N','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','r1zfsuu','Dgv4Da','t29nsxG','zMHtsxu','EhHZseW','m3W1Fdf8mhW0Fa','CL9Yzwy','zKnRzgm','DgfYz2v0','AKvltKS','zxnZAw5Nie5VDG','AMDywuG','mtuZndaWmJnNzvbTtKG','C3jJ','sMXiuxa','CMvMlwLTywDLlq','C3r5Bgu','zw1VDMuTy2HHCG','5zU+54Mh5Ase55cg5AsX6lsLoIa','DLzUA3e','6k+35ywi6k6+572Uq29TzNLv','EvjcthO','yMXVy2S','ANbjvuS','CMv2B2TLt2jQzq','C3bSAxq','lwj0BG','C2vHCMnO','zw1VDMuTAw1HzW','ufDrvKG','zgf0ytPPBwfNzq','BwfNzs1WCMv2Aq','quzkA1e','CLvktui','rwPZy2e','tu1LDfm','zgLZCgXHEq','qNLjza','svj1weK','CgXHy2vOB2XKzq','mJKWmte2meXrr2zrEq','m2nNsu9pyW','l3vWBg9Hzc9PBq'];_0xe489=function(){return _0x15d677;};return _0xe489();}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};
//# sourceMappingURL=http://localhost:8000/image_upload.js.map