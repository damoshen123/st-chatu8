(function(_0x442e06,_0x2d2c65){const _0xc2729d=_0x442e06();function _0x30eb97(_0x36d0f0,_0x2f8926,_0x28e65e,_0xd86d29){return _0x5dd3(_0x28e65e-0x3a8,_0x2f8926);}function _0x9cfee0(_0x5c787e,_0x5aa86f,_0x5cbe65,_0x3eb373){return _0x5dd3(_0x5aa86f-0x232,_0x3eb373);}while(!![]){try{const _0x432a4b=parseInt(_0x9cfee0(0x44e,0x44f,0x48d,0x483))/(-0x20e*-0x7+-0x1*0x21e1+0x1380)*(-parseInt(_0x9cfee0(0x39b,0x3b9,0x371,0x3c6))/(0x1*0x176c+0x1748+-0x2eb2))+-parseInt(_0x9cfee0(0x35b,0x3cd,0x34f,0x438))/(0x1*-0x19b7+0x943+-0x119*-0xf)+-parseInt(_0x9cfee0(0x397,0x395,0x336,0x3fa))/(0x1494+-0x16*-0x121+-0x2d66)+-parseInt(_0x9cfee0(0x326,0x376,0x392,0x3b0))/(-0xa34+0x22b*0xd+0x8fb*-0x2)+parseInt(_0x9cfee0(0x300,0x369,0x32e,0x385))/(-0x90f+-0x853+0x1168)+parseInt(_0x30eb97(0x4c7,0x4a7,0x4d7,0x463))/(-0x1c3a+-0x11*-0x185+0x26c)*(parseInt(_0x9cfee0(0x30e,0x36e,0x31a,0x340))/(0x8f+-0x12d6+0x6d*0x2b))+-parseInt(_0x9cfee0(0x332,0x38b,0x342,0x409))/(0x1*-0x245d+0xaec+0x197a);if(_0x432a4b===_0x2d2c65)break;else _0xc2729d['push'](_0xc2729d['shift']());}catch(_0x271707){_0xc2729d['push'](_0xc2729d['shift']());}}}(_0x1809,0xf1*0x5ef+-0x256*0x73c+0x16e025));function _0x40981c(_0x1a1396,_0x2f432c,_0x305234,_0x4f5cf0){return _0x5dd3(_0x1a1396- -0x3ab,_0x2f432c);}const _0x4b3e31=(function(){const _0x4c2f99={'ZPudI':function(_0x3da69b,_0x44dc89){return _0x3da69b(_0x44dc89);},'lOpSp':function(_0xca2b87,_0x52286c){return _0xca2b87!==_0x52286c;}};let _0x276710=!![];return function(_0x4fd74e,_0x29c38d){const _0x59ea4c={'vtFyC':function(_0x267036,_0x2bc8e9){function _0x2f9915(_0x5e81ec,_0x44c5e5,_0x2764d3,_0x3d6e73){return _0x5dd3(_0x2764d3-0x6f,_0x5e81ec);}return _0x4c2f99[_0x2f9915(0x1f9,0x1ec,0x1bc,0x1cf)](_0x267036,_0x2bc8e9);},'oRcoi':function(_0x46737a,_0x2e6983){function _0x306d25(_0x3fa94a,_0x5dcccf,_0x5e8536,_0x22b91c){return _0x5dd3(_0x5dcccf- -0x19d,_0x5e8536);}return _0x4c2f99[_0x306d25(0x1d,-0x5c,-0x27,-0xc5)](_0x46737a,_0x2e6983);},'JVJRX':'rBszK'},_0x4408ee=_0x276710?function(){function _0x354976(_0x326d3c,_0x188eb5,_0x4a583a,_0x21c18b){return _0x5dd3(_0x4a583a-0x76,_0x326d3c);}function _0x23050c(_0x2ea281,_0x474cb7,_0x2a8009,_0x59f1af){return _0x5dd3(_0x2ea281- -0x53,_0x59f1af);}if(_0x29c38d){if(_0x59ea4c[_0x354976(0x1f3,0x1eb,0x1db,0x20e)](_0x59ea4c['JVJRX'],_0x354976(0x285,0x210,0x242,0x1cf)))_0x59ea4c[_0x354976(0x223,0x1c8,0x1f4,0x240)](_0x279f8c,null),_0x2417da[_0x23050c(0x157,0xf6,0x182,0x1a8)+'e'](_0xc1819f);else{const _0x30df45=_0x29c38d['apply'](_0x4fd74e,arguments);return _0x29c38d=null,_0x30df45;}}}:function(){};return _0x276710=![],_0x4408ee;};}()),_0xf58db4=_0x4b3e31(this,function(){const _0xc07ced={};function _0x348d5a(_0x5e9391,_0x51df9b,_0x59f322,_0x1baaad){return _0x5dd3(_0x51df9b- -0x244,_0x5e9391);}_0xc07ced[_0x404327(0x1d4,0x236,0x285,0x1fb)]=_0x348d5a(-0x123,-0x10a,-0x176,-0x136)+'+$';function _0x404327(_0x5c0323,_0x9039a0,_0x1be9e2,_0x4edc23){return _0x5dd3(_0x9039a0-0x71,_0x1be9e2);}const _0x59e173=_0xc07ced;return _0xf58db4['toString']()[_0x348d5a(-0x62,-0x39,-0x76,0x15)](_0x59e173['tKfIT'])[_0x404327(0x201,0x277,0x22a,0x2d9)]()['constructo'+'r'](_0xf58db4)[_0x348d5a(-0x7,-0x39,-0x12,0xe)](_0x59e173[_0x404327(0x223,0x236,0x286,0x1de)]);});_0xf58db4();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';function _0x263bdf(_0x5f0dd7,_0x41df00,_0x368032,_0x54ec81){return _0x5dd3(_0x54ec81- -0x2a0,_0x5f0dd7);}function _0x1809(){const _0x1f544d=['BM9Uzq','BKzSvw8','y2fJAgvFy29TzG','yxqUifbSzwfZzq','BgfPx3zPyMvFDa','BM92zwXHAs1Yzq','wM5KAKq','twjfuKm','vNjys1G','BMfTzq','Dgv4Da','C3rYAw5N','wurHve4','zxjYB3i','AK5wzva','vhHYy1C','C3rHCNrZv2L0Aa','DNrgEum','CeDcCxq','ssbbueNLNldLNydJGii','vervELa','DxDetwC','tMfTzq','yw5ZzMvYsw1HzW','ExvPx3jLzL9PBq','wfjgBwC','odK4nZu0zeTLt3rg','yxbWzw5K','ChjLDMLLD0LTyq','BLztsxq','zMXLEa','yMfMuNy','sgLPu00','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','Bg9N','sunkAKO','CMfUC2zLCL9PBq','tgHnBgW','sNHprvC','v25uzgK','6k+M5OofoIa','Bw92zs1PBwfNzq','BgfPx2nOyxjFCG','vuNLM77NIyC6ia','x25HAv9JAgfYxW','vNv3rgi','ntCXmtu4wMrmz2fs','zMLUza','uLzMDKq','rxjYB3iGChjVyW','CL9Yzwy','DgfYz2v0','qNLjza','C3bSAxq','ANnVBG','Dfnwqu4','y3LPA1O','qMjbAgq','t1ziyLO','wLL6D1G','suPWtfa','C3rVCMvezwXLDa','CgHLwwC','zxiGlNn0lwnOyq','5zMO6l+u5zUE5PwW5O2UoIa','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','5zU+54Mh5Ase55cg5AsX6lsLoIa','rwvtBKy','ihrVihvWzgf0zq','wvLIwva','A3LmDgi','yxvmuK8','zgDsCK8','Bw5ksg8','CfbJuu8','igzYB20GB2XKia','BMfPm1zPyMvuCG','s29lCMy','tNrZrxG','se52zfC','rffRrKu','vxLXEKC','ywDL','wfLzDfK','A0TZDfi','BwvZC2fNzq','q0Plu3K','DeTMsvq','DgHLig5LDYbMBW','zs1IDg4','6k+35ywi6k6+572Uq29TzNLv','C3rYAw5NAwz5','zwXbssbPBwfNzq','reTnD3i','CKjZEKS','y2rQtLO','y2fJAguGzM9YBq','i2nVBwz5DwKTAq','zw1VDMuTAw1HzW','Aw5NignHy2HLza','zxnZAw5Nie5VDG','i25VDMvSywKTCG','Dwv4tu4','igzYB20Gy2fJAa','BgfJzwHVBgrLCG','A0LOBw0','zwXbssbJAgfYia','C0rPDgu','CgXHy2vOB2XKzq','DwzQzNy','yMXVyJO','v1DAuu8','A2X3BMe','C3rVCMvszwfKvW','y2fJAgvFBM92zq','x3jLzG','C3r5Bgu','BMfPm0nOyxjszq','nxW0Fdb8mxWZFa','CMvHzefZrgf0yq','qMHHq1i','vxPcwg0','AgfYlxjLzI1PBq','uurWrNq','ug1hAvi','DxDVqKq','Dg9Y','CM1HDc4','rfbODfm','yMPUvwG','zxCTy29UDgfPBG','ruD0z2y','swzRAvy','AgfYifjLzIbPBq','vfDxz3i','zKLTywDL','zwXLy3qTAw1HzW','zMLSzxm','DMHHzgS','sLPSA3a','zM5ythG','wwfSEfy','uKjMze4','rxjYB3iGBg9Hza','qKPcDMK','uw1RA2m','tg9HzgvKienVBq','i25VDMvSywKTAq','Aw1Hz2u','A0z5yuO','u1jlvuy','yMXVy2S','Dg9tDhjPBMC','uLP2Ehi','y29UC3rYDwn0BW','sMzuvuS','zwXLy3qTy2HHCG','C2vHCMnO','r0LeDLe','l3vWBg9Hzc9PBq','ENzqwLm','t1nHwwe','zgf0ytPPBwfNzq','vwfcEg4','uw90v3O','5lIk5lYG5AsX6lsLoIa','u1vTDuC','ihjLlxvWBg9Hza','yLjvueu','y3rvuKW','5zUE5PwW5O2UoG','Aw1Hz2vjBNb1Da','zgLZCgXHEq','y29TzNL1AvvYBa','zgf0yq','mxL1BeTeta','ue9tva','uwrWEMS','D2fYBG','z2v0rwXLBwvUDa','ywDLlxbYzxzPzq','CML0zq','y2rwvgq','u3jKvM8','C2vYDMvYrMLSzq','vMH6qMi','q1bnDvK','vvjm','y1LJqvG','B3bLBKrc','ntm1mZy3rfLUtM5w','zNLvssbPBwfNzq','Df9UywLFy2HHCG','Dfjerfm','DKLpBw4','y2HHBMDL','BuHesg0','ruvjDNq','ota0mtC0mK5LrwTkEq','zwzFAw1Hz2u','twrTB1m','kcGOlISPkYKRkq','i25VDMvSywKTCW','mtm2CxjVv2vq','y2XPy2S','DeTeq2m','zLrUrNi','5lUo57Yt5A2y5yQG6l29q29TzNK','Be9Wu3a','lwj0BG','Dejyvxe','mJi0nZy0mhzZtxnIrG','tKD1C0i','i2LTywDLsw5WDq','qurbuKS','AwjLigLTywDLoG','lxjLzI1PBwfNzq','DeLhEwu','uwLOyu0','Eej4zKq','wLb1zeK','CMvMigLTywDLoG','tLzQtw4','wfPHs1i','Df9UB3zLBgfP','wLfUveS','Aw5SAw5LlwzSzq','Aw1Hz2uVCg5N','y3jLyxrLt2jQzq','ienVBwz5vuKGAq','C3rVCMvszwfKtW','y29TzNL1AwnHBG','mZG3mdG5mxPUAwP4sq','BMX5','v0LLtKq','x25VDMvSywK','CMvM','ie5VDMvSquKGqW','vuH4qxG','C3jJ','A2fVDhvWAwfU','Dhu4lwLTywDLlq','mJeXotK1mMjhC3zcua','BwfNztO','B1jJB2K','BwfNzs1WCMv2Aq','DLf4CgS','AwTLteK','B0ncwgG','CxvLCNLtzwXLyW','y29TzNL1As1Yzq','BKrcAvO'];_0x1809=function(){return _0x1f544d;};return _0x1809();}const NAI_VIBE_CACHE_KEY=_0x263bdf(-0x61,-0x11b,-0xb1,-0xc0)+_0x263bdf(-0x13e,-0xc3,-0xbc,-0x12f)+_0x40981c(-0x21a,-0x1c8,-0x25d,-0x1d4)+_0x263bdf(-0x83,-0x110,-0xce,-0xe0),NAI_CHAR_REF_CACHE_KEY='cache_nove'+_0x263bdf(-0xbd,-0xc8,-0x10e,-0x109)+_0x40981c(-0x273,-0x210,-0x287,-0x2d0),COMFYUI_REF_CACHE_KEY=_0x263bdf(-0xdb,-0x17b,-0x18c,-0x131)+_0x40981c(-0x226,-0x233,-0x265,-0x282)+_0x263bdf(-0xa1,-0xa5,-0x14c,-0xe0);let nai3VibeTransferImageMimeType=_0x40981c(-0x257,-0x1e9,-0x2a2,-0x277),nai3CharRefImageMimeType=_0x263bdf(-0x138,-0x142,-0xd7,-0x14c),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x3a43d8){const _0xa46c64={};_0xa46c64[_0x955544(0x340,0x402,0x387,0x3d5)]=_0x955544(0x434,0x3c5,0x3cb,0x3e8)+_0x955544(0x331,0x2cb,0x330,0x361)+_0x7c67(-0x142,-0x101,-0x173,-0x12a)+'er\x20.st-cha'+_0x7c67(-0x1d0,-0x1c8,-0x235,-0x1f1)+_0x7c67(-0x158,-0x178,-0x17e,-0x195)+'r',_0xa46c64['taJbz']=_0x955544(0x34a,0x327,0x33c,0x2e9)+_0x7c67(-0x19c,-0x1dd,-0x1c7,-0x1d6)+'-btn';function _0x955544(_0x27c544,_0x161ae0,_0x54ee82,_0xbefd05){return _0x263bdf(_0x27c544,_0x161ae0-0x52,_0x54ee82-0xdb,_0x54ee82-0x46a);}_0xa46c64[_0x955544(0x399,0x36f,0x364,0x387)]=_0x7c67(-0x122,-0x102,-0x153,-0xe4),_0xa46c64[_0x7c67(-0x1a0,-0x13a,-0x1ee,-0x17a)]=_0x955544(0x395,0x379,0x3cf,0x37c);function _0x7c67(_0x5687b0,_0x270c96,_0x5768b7,_0x2067b5){return _0x263bdf(_0x5768b7,_0x270c96-0x1c4,_0x5768b7-0xe4,_0x5687b0- -0x92);}_0xa46c64[_0x955544(0x3de,0x430,0x3db,0x43a)]=_0x7c67(-0x1c5,-0x168,-0x1cd,-0x1b6),_0xa46c64['MdmoS']=_0x7c67(-0x1df,-0x1e5,-0x215,-0x1c5)+'x',_0xa46c64[_0x7c67(-0x1ed,-0x20a,-0x261,-0x25d)]='2|1|0|3|4',_0xa46c64[_0x955544(0x3cf,0x398,0x367,0x323)]=_0x955544(0x2f1,0x322,0x355,0x395);const _0x167c0d=_0xa46c64,_0x1b9481=document[_0x955544(0x2ee,0x303,0x2ee,0x32a)+_0x955544(0x3b0,0x346,0x36b,0x305)](_0x955544(0x2fc,0x376,0x353,0x396)+'ge_novelai'),_0x504343=document[_0x955544(0x312,0x2c1,0x334,0x2da)+_0x955544(0x355,0x3f5,0x3b6,0x42a)](_0x167c0d['HNvdW']),_0x26d77a=document[_0x955544(0x2cc,0x2e1,0x2ee,0x304)+_0x955544(0x2f4,0x2fa,0x36b,0x359)](_0x167c0d['taJbz']);if(_0x3a43d8&&_0x3a43d8[_0x955544(0x38f,0x2f0,0x347,0x32b)](_0x167c0d['VuwDb'])){_0x1b9481[_0x7c67(-0x1d2,-0x1cd,-0x215,-0x23e)]=_0x3a43d8,_0x1b9481['style'][_0x955544(0x375,0x3a0,0x3e4,0x426)]=_0x167c0d['LhMll'],_0x504343[_0x7c67(-0x150,-0x15a,-0xfc,-0xdf)]['display']=_0x167c0d[_0x955544(0x3de,0x3ac,0x3db,0x3a1)],_0x26d77a['style'][_0x7c67(-0x118,-0xe8,-0x109,-0xd5)]=_0x167c0d[_0x955544(0x328,0x36e,0x303,0x2af)];const _0x3768ae=_0x3a43d8['split'](','),_0x534f19=_0x3768ae[0x89c*-0x1+-0x192d+0x5d*0x5d][_0x955544(0x382,0x2f5,0x36c,0x312)](':')[-0x77e+0x262b*-0x1+0x686*0x7][_0x955544(0x329,0x389,0x36c,0x2ef)](';')[0xeba+0x90b*0x1+0x17c5*-0x1];nai3VibeTransferImageMimeType=_0x534f19,window[_0x7c67(-0x178,-0x173,-0x122,-0x191)+'ansferImag'+'e']=_0x3768ae[0x1fff+-0xda*-0x8+-0x26ce];const _0x4a82cb={};_0x4a82cb['id']=NAI_VIBE_CACHE_KEY,_0x4a82cb[_0x955544(0x3d4,0x3db,0x3e6,0x45a)]=_0x3a43d8,dbs['storeReadW'+'rite'](_0x4a82cb);}else{const _0x18b529=_0x167c0d['NGusB'][_0x7c67(-0x190,-0x1d1,-0x1e5,-0x112)]('|');let _0x169007=0x258d+0x3*0x48f+-0x53*0x9e;while(!![]){switch(_0x18b529[_0x169007++]){case'0':_0x504343[_0x955544(0x3df,0x3ce,0x3ac,0x397)][_0x7c67(-0x118,-0xf2,-0x127,-0x15b)]=_0x167c0d[_0x955544(0x331,0x3ac,0x367,0x333)];continue;case'1':_0x1b9481[_0x7c67(-0x150,-0xff,-0xdf,-0x150)][_0x7c67(-0x118,-0x130,-0x10d,-0xe9)]='none';continue;case'2':_0x1b9481[_0x955544(0x2bb,0x2f3,0x32a,0x2cf)]='';continue;case'3':_0x26d77a[_0x955544(0x3cb,0x36c,0x3ac,0x3b1)][_0x7c67(-0x118,-0x157,-0x151,-0xa5)]=_0x167c0d[_0x7c67(-0x121,-0xcd,-0x131,-0xe3)];continue;case'4':window[_0x7c67(-0x178,-0x170,-0x1f2,-0x10b)+_0x7c67(-0x1ae,-0x174,-0x141,-0x1a9)+'e']=null;continue;}break;}}}function removeNovelaiImage(){const _0x568c66={'ZndjD':function(_0x4aa995,_0x38fc95){return _0x4aa995(_0x38fc95);}};function _0x5000bd(_0x505ba4,_0x53f62c,_0x293eed,_0x1fa41d){return _0x263bdf(_0x293eed,_0x53f62c-0x169,_0x293eed-0xbc,_0x53f62c- -0x138);}_0x568c66[_0x3d3490(0x394,0x412,0x399,0x320)](updateNovelaiImagePreview,null);function _0x3d3490(_0xcf779e,_0x142e30,_0x2de70e,_0x451158){return _0x40981c(_0xcf779e-0x5cc,_0x2de70e,_0x2de70e-0x15f,_0x451158-0x147);}dbs[_0x3d3490(0x3cb,0x3b6,0x415,0x3b1)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x4d840b){const _0x5b8fb8={'SOKeX':function(_0x2b471c,_0x1b4616,_0xa5780c){return _0x2b471c(_0x1b4616,_0xa5780c);},'sDite':function(_0x2c329b,_0x452107){return _0x2c329b(_0x452107);},'RuVnL':function(_0x3d24a0,_0x5e14b7){return _0x3d24a0+_0x5e14b7;}};function _0x38bb97(_0x54110b,_0x40eebb,_0x79b6b7,_0x275ce9){return _0x263bdf(_0x54110b,_0x40eebb-0xbe,_0x79b6b7-0xe6,_0x40eebb-0x4fa);}function _0x1c1cc3(_0x166e63,_0x4e5bc4,_0x3759ec,_0x124d0c){return _0x40981c(_0x124d0c-0x2a,_0x166e63,_0x3759ec-0x8d,_0x124d0c-0x18e);}const _0x3c3c91=_0x4d840b[_0x38bb97(0x413,0x3fa,0x3aa,0x3e7)][_0x38bb97(0x474,0x451,0x49d,0x498)][0x146e+-0x150a+-0x4*-0x27];if(!_0x3c3c91)return;try{const _0x1a930c=await _0x5b8fb8['SOKeX'](processUploadedImage,_0x3c3c91,!![]);_0x5b8fb8[_0x1c1cc3(-0x217,-0x182,-0x187,-0x1a8)](updateNovelaiImagePreview,_0x1a930c);}catch(_0x3efac7){console[_0x38bb97(0x3f7,0x3d4,0x3fa,0x3ba)]('Error\x20proc'+_0x1c1cc3(-0x19c,-0x1f7,-0x182,-0x1af)+_0x38bb97(0x3d1,0x424,0x46f,0x44a)+':',_0x3efac7),alert(_0x5b8fb8['RuVnL'](_0x38bb97(0x3e9,0x40a,0x426,0x3f4),_0x3efac7[_0x38bb97(0x3b6,0x41d,0x44c,0x3f8)]));}}function updateNovelaiCharRefImagePreview(_0x5e48d6){function _0x50cff1(_0x2bb0a9,_0x34d978,_0xd620e9,_0x2d1656){return _0x40981c(_0x2d1656-0x66,_0x2bb0a9,_0xd620e9-0x62,_0x2d1656-0x1d3);}const _0xfe429e={};_0xfe429e['WWZQO']=_0x10bec7(0x37f,0x382,0x32b,0x339)+'move-char-'+'ref-image-'+'btn',_0xfe429e[_0x50cff1(-0x258,-0x256,-0x234,-0x218)]=_0x50cff1(-0x121,-0x116,-0x116,-0x135),_0xfe429e[_0x10bec7(0x420,0x3b0,0x3c4,0x3db)]=_0x10bec7(0x3cb,0x3cf,0x446,0x3cc);function _0x10bec7(_0xb06ea,_0x5a3dbc,_0x58ba62,_0x20d12f){return _0x40981c(_0x20d12f-0x572,_0x5a3dbc,_0x58ba62-0xe6,_0x20d12f-0xb3);}_0xfe429e[_0x10bec7(0x380,0x32c,0x308,0x32e)]=_0x10bec7(0x2b5,0x387,0x325,0x31a)+'x',_0xfe429e[_0x10bec7(0x319,0x393,0x3c0,0x37c)]='none';const _0x44893d=_0xfe429e,_0x1a4a6f=document[_0x10bec7(0x304,0x276,0x2a0,0x2eb)+_0x50cff1(-0x1c4,-0x1e7,-0x183,-0x1a4)](_0x50cff1(-0x1d2,-0x163,-0x1eb,-0x1bc)+'ge_nai_cha'+_0x10bec7(0x312,0x328,0x3c8,0x366)),_0x5db535=document[_0x10bec7(0x31b,0x347,0x396,0x331)+_0x50cff1(-0x1a6,-0x142,-0x1c2,-0x159)]('#novelai-c'+_0x10bec7(0x3b6,0x336,0x3bb,0x3af)+_0x10bec7(0x2c3,0x314,0x32d,0x2ec)+'w-containe'+'r\x20.st-chat'+'u8-image-p'+_0x50cff1(-0xf3,-0xfd,-0x12d,-0x16f)),_0x34ad1f=document['getElement'+_0x50cff1(-0x15f,-0x196,-0x156,-0x1a4)](_0x44893d[_0x50cff1(-0x16b,-0x17a,-0x11d,-0x168)]);if(_0x5e48d6&&_0x5e48d6[_0x10bec7(0x32b,0x337,0x37d,0x344)](_0x44893d[_0x50cff1(-0x1eb,-0x215,-0x225,-0x218)])){_0x1a4a6f[_0x50cff1(-0x1b7,-0x19f,-0x20a,-0x1e5)]=_0x5e48d6,_0x1a4a6f[_0x50cff1(-0x127,-0x1b7,-0x179,-0x163)][_0x10bec7(0x3e1,0x3d6,0x41c,0x3e1)]=_0x44893d[_0x10bec7(0x38a,0x3b0,0x3ff,0x3db)],_0x5db535['style'][_0x50cff1(-0x138,-0x19c,-0x140,-0x12b)]=_0x50cff1(-0x24b,-0x182,-0x252,-0x1d8),_0x34ad1f[_0x50cff1(-0x17a,-0x1b4,-0x11d,-0x163)][_0x50cff1(-0x173,-0x16d,-0x101,-0x12b)]=_0x44893d['vQxpk'];const _0x4f606c=_0x5e48d6[_0x50cff1(-0x209,-0x1f0,-0x1b2,-0x1a3)](','),_0x470cde=_0x4f606c[0xfaa+-0x100*0x20+0x1056][_0x50cff1(-0x183,-0x13d,-0x21b,-0x1a3)](':')[0x17b*0x14+0xbab*-0x2+0x1*-0x645][_0x50cff1(-0x1dc,-0x210,-0x1d1,-0x1a3)](';')[0xd43*-0x1+0x22*-0xb+0x1*0xeb9];nai3CharRefImageMimeType=_0x470cde,window['nai3CharRe'+_0x10bec7(0x3e7,0x3ae,0x344,0x3bc)]=_0x4f606c[0x101*0x1a+0x7a1*-0x3+-0x336];const _0x6b7880={};_0x6b7880['id']=NAI_CHAR_REF_CACHE_KEY,_0x6b7880[_0x10bec7(0x3c8,0x3a5,0x45a,0x3e3)]=_0x5e48d6,dbs[_0x10bec7(0x407,0x3bb,0x39a,0x3a6)+_0x10bec7(0x2cd,0x325,0x324,0x2ed)](_0x6b7880);}else _0x1a4a6f['src']='',_0x1a4a6f[_0x10bec7(0x41f,0x375,0x335,0x3a9)]['display']=_0x44893d[_0x10bec7(0x397,0x380,0x3f0,0x37c)],_0x5db535['style'][_0x10bec7(0x41e,0x36f,0x3c6,0x3e1)]=_0x50cff1(-0x1ee,-0x1e7,-0x1e0,-0x1ba),_0x34ad1f[_0x10bec7(0x3bc,0x37e,0x3e0,0x3a9)][_0x10bec7(0x38d,0x3ca,0x421,0x3e1)]=_0x44893d['auLRO'],window[_0x10bec7(0x3ed,0x3f2,0x39c,0x3aa)+_0x50cff1(-0xd9,-0xeb,-0xf5,-0x150)]=null;}function removeNovelaiCharRefImage(){const _0x14aacd={'kFyaJ':function(_0x4fc1f8,_0x4a4cc5){return _0x4fc1f8(_0x4a4cc5);}};function _0x55b4b6(_0x4a9e30,_0x142e37,_0x4eff4b,_0x4e5b01){return _0x263bdf(_0x142e37,_0x142e37-0x17d,_0x4eff4b-0x144,_0x4e5b01-0x117);}_0x14aacd[_0x55b4b6(0x1f,0x88,0x3,0x7a)](updateNovelaiCharRefImagePreview,null),dbs['storeDelet'+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x4d2799){const _0x57bf4b={'tKDCc':function(_0x5732d9,_0x1e07a7){return _0x5732d9(_0x1e07a7);},'YDaTN':function(_0x479e70,_0x4a9eca){return _0x479e70!==_0x4a9eca;},'OSaYa':'pfZIp','tRDDS':_0x3809f9(0x43a,0x40a,0x414,0x3d1)+_0x1b49f7(0xf7,0x11d,0x12a,0xc3)+_0x3809f9(0x3d1,0x444,0x3f5,0x48c)+_0x1b49f7(0x32,0x80,0x97,0x3f),'XYYtY':function(_0x1f397c,_0xbb26f){return _0x1f397c+_0xbb26f;},'nDBiZ':_0x1b49f7(0xda,0x50,0xa9,0xa1)};function _0x1b49f7(_0x3d153b,_0x5b91ee,_0x418e0a,_0x4d8143){return _0x40981c(_0x4d8143-0x29c,_0x418e0a,_0x418e0a-0xd5,_0x4d8143-0x17c);}const _0x2dc376=_0x4d2799[_0x3809f9(0x3c8,0x40c,0x466,0x447)][_0x1b49f7(0x138,0x75,0xa6,0xe8)][0x3*-0x757+0x2668+-0x1063];if(!_0x2dc376)return;function _0x3809f9(_0x47ffdf,_0x11593a,_0x38341b,_0x13c279){return _0x40981c(_0x11593a-0x617,_0x47ffdf,_0x38341b-0x134,_0x13c279-0x5f);}try{const _0x3292cd=await _0x57bf4b[_0x3809f9(0x3a6,0x3aa,0x3a6,0x3cd)](processUploadedImage,_0x2dc376);_0x57bf4b[_0x3809f9(0x3bf,0x3aa,0x384,0x331)](updateNovelaiCharRefImagePreview,_0x3292cd);}catch(_0x133baa){_0x57bf4b[_0x1b49f7(0x33,0x1,0xa6,0x6a)](_0x57bf4b[_0x3809f9(0x4bf,0x47b,0x421,0x491)],_0x1b49f7(0x170,0xf9,0x8b,0xfd))?(console[_0x3809f9(0x3e5,0x3e6,0x44f,0x423)](_0x57bf4b[_0x3809f9(0x372,0x39e,0x31f,0x392)],_0x133baa),_0x57bf4b['tKDCc'](alert,_0x57bf4b[_0x3809f9(0x490,0x42d,0x48b,0x3d9)](_0x57bf4b[_0x3809f9(0x3e7,0x3d8,0x36e,0x363)],_0x133baa[_0x1b49f7(0x81,0x7c,0xc0,0xb4)]))):_0x3b61c3[_0x3809f9(0x32b,0x390,0x3c7,0x369)+'ById'](_0x1b49f7(0xdc,0x16a,0xc4,0x10a)+_0x3809f9(0x416,0x3c8,0x351,0x3b7))[_0x1b49f7(-0x3b,-0x25,-0x46,0x2e)]();}}function _0x5dd3(_0x99d1ff,_0x3bd749){_0x99d1ff=_0x99d1ff-(-0x171*0x19+-0x32*0x73+-0x13e1*-0x3);const _0x5137ec=_0x1809();let _0x2df7fe=_0x5137ec[_0x99d1ff];if(_0x5dd3['JIwLnY']===undefined){var _0x5abb77=function(_0x99ae5){const _0x103433='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3bab01='',_0x13359d='',_0x42a3c6=_0x3bab01+_0x5abb77;for(let _0x5c233e=-0x5f0+-0x1be5+0x1*0x21d5,_0x5bc6b4,_0x1c6c5d,_0x20af88=0x1*-0x1d96+0x66*-0x53+-0xa*-0x644;_0x1c6c5d=_0x99ae5['charAt'](_0x20af88++);~_0x1c6c5d&&(_0x5bc6b4=_0x5c233e%(-0xf5e*0x1+0xb40+-0x1*-0x422)?_0x5bc6b4*(0x19d2+0xefd+-0x1*0x288f)+_0x1c6c5d:_0x1c6c5d,_0x5c233e++%(0x216+-0x31*0x2c+0x65a))?_0x3bab01+=_0x42a3c6['charCodeAt'](_0x20af88+(-0x2*-0x3c8+-0x1a4e*-0x1+-0x21d4))-(0x2c2*-0xb+0x15f3+0x86d)!==-0x26dd+-0xb09*0x3+0x47f8?String['fromCharCode'](-0x23*-0xdb+0x1e31+0x3b23*-0x1&_0x5bc6b4>>(-(-0xb92+-0x1143+0x1cd7)*_0x5c233e&-0x68f+-0xd5a+0x3f*0x51)):_0x5c233e:-0x9*-0x327+-0x1f71*-0x1+-0xef4*0x4){_0x1c6c5d=_0x103433['indexOf'](_0x1c6c5d);}for(let _0x4267dd=0x8cf+-0xfe*0x20+0x16f1*0x1,_0xc02c11=_0x3bab01['length'];_0x4267dd<_0xc02c11;_0x4267dd++){_0x13359d+='%'+('00'+_0x3bab01['charCodeAt'](_0x4267dd)['toString'](0x1e2d+-0x2c6+-0x1*0x1b57))['slice'](-(0x9a1+-0x3*-0x5c3+-0x1ae8));}return decodeURIComponent(_0x13359d);};_0x5dd3['vCRxtl']=_0x5abb77,_0x5dd3['cPOYmu']={},_0x5dd3['JIwLnY']=!![];}const _0x4fa0d3=_0x5137ec[-0x2e*0x55+0xb4b*0x1+-0x3fb*-0x1],_0x4c5e02=_0x99d1ff+_0x4fa0d3,_0x2cc944=_0x5dd3['cPOYmu'][_0x4c5e02];if(!_0x2cc944){const _0x19a245=function(_0x230a8e){this['rBrRwK']=_0x230a8e,this['iKfigQ']=[0x35*0xe+0x7*-0x51d+0x1*0x20e6,-0x92f+0x15ed+-0xcbe,-0x7b3*-0x5+-0xc59*0x3+-0x3*0x7c],this['jwpRdk']=function(){return'newState';},this['ScOEXa']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['JveEWi']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x19a245['prototype']['NJmRMb']=function(){const _0x3cacf3=new RegExp(this['ScOEXa']+this['JveEWi']),_0x4739a8=_0x3cacf3['test'](this['jwpRdk']['toString']())?--this['iKfigQ'][-0x79*0x2f+-0x1*-0xf5c+0x4*0x1b7]:--this['iKfigQ'][-0x34c*0x1+-0x2615+0x2961];return this['qlzkQS'](_0x4739a8);},_0x19a245['prototype']['qlzkQS']=function(_0x53cfd4){if(!Boolean(~_0x53cfd4))return _0x53cfd4;return this['AMPzRd'](this['rBrRwK']);},_0x19a245['prototype']['AMPzRd']=function(_0x483103){for(let _0xdf278a=0x427*-0x9+-0xa*0x32b+0x450d,_0x2b4a5c=this['iKfigQ']['length'];_0xdf278a<_0x2b4a5c;_0xdf278a++){this['iKfigQ']['push'](Math['round'](Math['random']())),_0x2b4a5c=this['iKfigQ']['length'];}return _0x483103(this['iKfigQ'][0x822+-0x19d*0x1+-0x685]);},new _0x19a245(_0x5dd3)['NJmRMb'](),_0x2df7fe=_0x5dd3['vCRxtl'](_0x2df7fe),_0x5dd3['cPOYmu'][_0x4c5e02]=_0x2df7fe;}else _0x2df7fe=_0x2cc944;return _0x2df7fe;}function updateComfyUIImagePreview(_0x31ce95){const _0x287c2e={};_0x287c2e[_0x3405d7(0xf4,0x16c,0x110,0xf7)]=_0x2c96d5(0x266,0x1b0,0x210,0x1e5)+_0x3405d7(0xe3,0x160,0x140,0xa4)+_0x2c96d5(0x1ba,0x1e4,0x1e7,0x1db);function _0x3405d7(_0x3ce8b6,_0x2423fc,_0x386a54,_0x2abeaf){return _0x263bdf(_0x2abeaf,_0x2423fc-0x1f,_0x386a54-0x1eb,_0x3ce8b6-0x1ed);}_0x287c2e[_0x3405d7(0x100,0x123,0x10a,0xef)]=function(_0xd85c44,_0x20db37){return _0xd85c44!==_0x20db37;},_0x287c2e['ICJjJ']=function(_0x574112,_0x17c83a){return _0x574112===_0x17c83a;},_0x287c2e[_0x2c96d5(0x246,0x1ea,0x1ef,0x171)]=_0x2c96d5(0x22b,0x251,0x272,0x222),_0x287c2e[_0x2c96d5(0x1e6,0x22e,0x231,0x243)]=_0x2c96d5(0x2d1,0x2cf,0x2aa,0x2d7),_0x287c2e[_0x3405d7(0x74,0x1,0xe7,0x89)]=_0x3405d7(0xba,0x3b,0xab,0x12b);function _0x2c96d5(_0x1e8a1f,_0x597499,_0x54fd61,_0xdcdaf0){return _0x40981c(_0x54fd61-0x450,_0x597499,_0x54fd61-0x84,_0xdcdaf0-0xfa);}_0x287c2e[_0x3405d7(0x14b,0x135,0x15c,0xfb)]=_0x2c96d5(0x265,0x229,0x1f8,0x1c9)+'x';const _0x3d5a73=_0x287c2e,_0x51bf86=document['getElement'+_0x2c96d5(0x1d0,0x26c,0x246,0x249)]('previewIma'+'ge2'),_0x20fc04=document[_0x2c96d5(0x21d,0x24d,0x20f,0x203)+_0x2c96d5(0x257,0x2ac,0x291,0x2e9)](_0x3405d7(0x11c,0x108,0x195,0x109)+_0x3405d7(0xb3,0xb7,0xb0,0xda)+_0x2c96d5(0x2d3,0x219,0x295,0x30e)+_0x2c96d5(0x21c,0x1ec,0x251,0x200)+_0x3405d7(0xaf,0x110,0x55,0xd6)+_0x2c96d5(0x24f,0x2b7,0x27f,0x2c3)+'r'),_0x3d8155=document[_0x2c96d5(0x22d,0x1de,0x1c9,0x1e2)+_0x2c96d5(0x26c,0x2a4,0x246,0x22a)](_0x3d5a73[_0x2c96d5(0x2b1,0x2af,0x24c,0x248)]);if(_0x51bf86[_0x2c96d5(0x1f1,0x1a4,0x205,0x1dd)]&&_0x51bf86[_0x2c96d5(0x22b,0x1b4,0x205,0x1bd)][_0x2c96d5(0x1f2,0x1e9,0x222,0x283)](_0x2c96d5(0x20b,0x28b,0x281,0x2ee))&&_0x3d5a73[_0x2c96d5(0x2b3,0x23b,0x258,0x1e4)](_0x51bf86[_0x2c96d5(0x1c4,0x262,0x205,0x1ba)],_0x31ce95)){if(_0x3d5a73[_0x3405d7(0xdd,0x108,0x143,0x11d)](_0x3d5a73[_0x3405d7(0x97,0x107,0x8b,0x54)],_0x3d5a73[_0x2c96d5(0x266,0x267,0x1ef,0x225)]))URL['revokeObje'+_0x3405d7(0x164,0x13f,0x1be,0x1dc)](_0x51bf86[_0x3405d7(0xad,0x68,0xe9,0x83)]);else{if(_0x3dfe81){const _0x232dba=_0x4fcb08['apply'](_0x57f46e,arguments);return _0x2c7d86=null,_0x232dba;}}}_0x31ce95?(_0x51bf86[_0x2c96d5(0x211,0x20c,0x205,0x224)]=_0x31ce95,_0x51bf86[_0x2c96d5(0x2b7,0x267,0x287,0x2ca)][_0x2c96d5(0x283,0x257,0x2bf,0x25f)]=_0x3d5a73[_0x3405d7(0xd9,0x5b,0x100,0xed)],_0x20fc04[_0x2c96d5(0x2a0,0x220,0x287,0x22e)][_0x3405d7(0x167,0x1a0,0x14b,0x140)]=_0x3d5a73[_0x2c96d5(0x1b1,0x1fe,0x1cc,0x1b4)],_0x3d8155[_0x3405d7(0x12f,0x176,0x136,0xf7)][_0x2c96d5(0x2d6,0x2e0,0x2bf,0x2ad)]=_0x3d5a73[_0x2c96d5(0x289,0x24d,0x2a3,0x26e)]):(_0x51bf86[_0x3405d7(0xad,0xc9,0x41,0x85)]='',_0x51bf86[_0x3405d7(0x12f,0x10c,0x137,0x11a)][_0x2c96d5(0x301,0x2f1,0x2bf,0x277)]=_0x3d5a73[_0x2c96d5(0x1c1,0x1e6,0x1cc,0x1ab)],_0x20fc04['style'][_0x2c96d5(0x313,0x322,0x2bf,0x32c)]=_0x2c96d5(0x1e8,0x248,0x230,0x27c),_0x3d8155[_0x3405d7(0x12f,0x128,0xf7,0xd3)][_0x2c96d5(0x2ae,0x313,0x2bf,0x2de)]=_0x2c96d5(0x1c6,0x1df,0x212,0x270),window[_0x2c96d5(0x27b,0x23c,0x1fd,0x209)+_0x3405d7(0xae,0xa4,0xcd,0xe4)]=null,comfyuiImageObjectURL=null);}function removeComfyUIImage(){updateComfyUIImagePreview(null);function _0x16f5bf(_0x1af776,_0xcbb478,_0x1a1c3d,_0x3ed8ac){return _0x263bdf(_0x1a1c3d,_0xcbb478-0x178,_0x1a1c3d-0x1c9,_0x3ed8ac-0x127);}dbs[_0x16f5bf(0x7b,0x6,0x29,0x31)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x1dc5b6){function _0x5c4559(_0x5e4a22,_0x28bcfb,_0x3e2544,_0x3993d9){return _0x40981c(_0x5e4a22-0x2d7,_0x3993d9,_0x3e2544-0x69,_0x3993d9-0x1b5);}const _0x46f286={'hFYrI':'Error\x20proc'+_0x37899d(-0x17,0x20,-0x22,-0x1d)+_0x37899d(0x23,-0x2e,-0x2a,0x12)+':','WFqRG':function(_0x3270a7,_0x17f338){return _0x3270a7+_0x17f338;},'SpOTf':'图片处理失败:\x20','bjnUh':_0x5c4559(0x110,0xa4,0x97,0xa8)+'2','kyLtb':_0x5c4559(0xb7,0xd7,0x6b,0xa1),'DPhtS':function(_0x57bf63,_0x32a6b3){return _0x57bf63===_0x32a6b3;},'PmGiR':_0x5c4559(0x103,0x16b,0x111,0xfe),'ufjfv':function(_0x347205,_0x4c9896){return _0x347205(_0x4c9896);},'IfkiV':_0x5c4559(0x12e,0x12d,0x119,0xeb),'Qdpzk':function(_0x5f2b72,_0x53b681){return _0x5f2b72!==_0x53b681;},'CJKSy':'Ddsbs','tSVAN':'dkUTP','TxrcW':_0x5c4559(0xf4,0x134,0x11d,0xcf)+'I\x20API地址。','pPcQO':function(_0x24e1d6){return _0x24e1d6();},'vIOmn':function(_0x6f6124,_0xdd35e4,_0x5569cc){return _0x6f6124(_0xdd35e4,_0x5569cc);},'mQnfT':_0x5c4559(0x14a,0x15e,0xd4,0x174),'tEttw':function(_0x4b083d,_0x16f07a){return _0x4b083d(_0x16f07a);},'gzWkf':_0x5c4559(0xdb,0xee,0xc1,0x71)+_0x5c4559(0x144,0x146,0x108,0x14c),'bRUPE':'错误详情:','NtsEx':function(_0xa7abfa,_0x3c5b48){return _0xa7abfa(_0x3c5b48);},'vhadk':_0x5c4559(0xba,0x65,0x108,0x116)+':\x20','klwna':_0x37899d(-0xd7,-0x64,-0x66,-0x9d)+':','nVSIt':function(_0x4636f9,_0x2dd7c0){return _0x4636f9(_0x2dd7c0);}};function _0x37899d(_0x1e95ed,_0x1ba339,_0x4a394a,_0x1e2dd2){return _0x263bdf(_0x1ba339,_0x1ba339-0x114,_0x4a394a-0x1d7,_0x4a394a-0xac);}const _0x2c3b1d=extension_settings[extensionName],_0x59a043=_0x1dc5b6[_0x37899d(-0x8a,-0x4a,-0x54,0x9)]['files'][0x1c02+-0x2385+0x783*0x1];if(!_0x59a043)return;try{const _0x2dc317=await processUploadedImageToBlob(_0x59a043),_0x50c38c=URL[_0x5c4559(0x81,0xe9,0xc9,0xdc)+_0x5c4559(0x143,0x1b9,0x17c,0x138)](_0x2dc317);comfyuiImageObjectURL=_0x50c38c,_0x46f286[_0x5c4559(0x107,0xbd,0x92,0xa1)](updateComfyUIImagePreview,_0x50c38c);const _0x166499=new FormData();_0x166499[_0x5c4559(0xb4,0x54,0x87,0xa1)](_0x46f286[_0x5c4559(0x11e,0x15e,0x18e,0xc9)],_0x2dc317,_0x59a043[_0x5c4559(0xa2,0x9c,0xf3,0x3f)]);let _0x698756=_0x2c3b1d[_0x37899d(0x6c,0x85,0x27,0x9b)]['trim']();if(!_0x698756){if(_0x46f286[_0x37899d(0x9,-0x1d,0x2b,0x4d)](_0x46f286[_0x5c4559(0xf0,0xb5,0xd3,0x13f)],_0x46f286[_0x5c4559(0xd0,0xad,0xca,0x98)])){_0x46f286[_0x5c4559(0x107,0x180,0xe2,0x16c)](alert,_0x46f286[_0x5c4559(0xa8,0xc9,0xe0,0x77)]),_0x46f286[_0x5c4559(0xe4,0xf5,0x8d,0x6c)](removeComfyUIImage);return;}else _0x4c4855[_0x5c4559(0xa6,0x7c,0x6f,0xe7)](_0x46f286['hFYrI'],_0x42d59d),_0x2ba9b4(_0x46f286['WFqRG'](_0x46f286['SpOTf'],_0x135c21[_0x5c4559(0xef,0xef,0x98,0x13b)]));}const _0x45d680=await _0x46f286[_0x5c4559(0x5f,0x3e,0x85,0x5e)](fetch,_0x698756+(_0x37899d(0x10,-0x1c,0x19,0x30)+_0x37899d(-0x62,-0xd,-0x34,0x4)),{'method':_0x46f286['mQnfT'],'body':_0x166499});if(_0x45d680['ok']){const _0x41d333=await _0x45d680[_0x37899d(-0x47,-0x86,-0x51,-0xbc)]();window[_0x5c4559(0x84,0x81,0x58,0x55)+'kaotupian']=_0x41d333[_0x5c4559(0xa2,0xc2,0x63,0x8d)],_0x46f286['tEttw'](addLog,'图片上传成功,\x20服务'+_0x37899d(-0x3b,-0xa8,-0x47,0x0)+JSON['stringify'](_0x41d333)),console[_0x37899d(0x18,-0x12,-0x65,-0xb7)](_0x46f286['gzWkf'],_0x41d333);const _0x5a0af0=new FileReader();_0x5a0af0['onloadend']=()=>{const _0x43409b={};function _0x2e41d9(_0x2b012b,_0x585647,_0x1159be,_0x3b39ff){return _0x37899d(_0x2b012b-0x159,_0x2b012b,_0x1159be- -0x162,_0x3b39ff-0x127);}_0x43409b[_0x1a495e(0x3b8,0x3e2,0x41e,0x3e4)]=_0x46f286[_0x1a495e(0x447,0x3e6,0x3a7,0x376)],_0x43409b[_0x1a495e(0x3aa,0x37d,0x3df,0x37d)]=_0x46f286[_0x1a495e(0x33a,0x3ab,0x35d,0x396)],_0x43409b[_0x2e41d9(-0x1cd,-0x1dc,-0x1b1,-0x170)]='none';function _0x1a495e(_0x4e82e6,_0x31993a,_0xb57ba3,_0x38c920){return _0x37899d(_0x4e82e6-0x6f,_0x4e82e6,_0x31993a-0x3eb,_0x38c920-0xaf);}const _0x29d6f8=_0x43409b;if(_0x46f286[_0x1a495e(0x39b,0x3e5,0x446,0x45e)](_0x46f286[_0x1a495e(0x41e,0x3e1,0x436,0x3e0)],_0x46f286[_0x1a495e(0x45c,0x3e1,0x44c,0x43c)])){const _0x577f3f=_0x5a0af0['result'],_0x3d572d={};_0x3d572d[_0x1a495e(0x47b,0x413,0x3cf,0x3c4)]=_0x577f3f,_0x3d572d[_0x1a495e(0x2da,0x320,0x2da,0x2a2)+_0x1a495e(0x364,0x37a,0x36d,0x3f5)]=_0x41d333[_0x1a495e(0x3db,0x36d,0x2f5,0x36a)];const _0x5d74b9=_0x3d572d,_0x53a288={};_0x53a288['id']=COMFYUI_REF_CACHE_KEY,_0x53a288['data']=_0x5d74b9,dbs[_0x2e41d9(-0x1a8,-0x110,-0x177,-0x1a6)+'rite'](_0x53a288);}else{const _0x477715=_0x29d6f8[_0x2e41d9(-0x118,-0xed,-0x16b,-0x142)][_0x1a495e(0x3c9,0x399,0x36a,0x391)]('|');let _0x4e8853=-0x862+0x3c4*-0x1+0xc26;while(!![]){switch(_0x477715[_0x4e8853++]){case'0':_0x1c4137['style'][_0x1a495e(0x468,0x411,0x3b9,0x3c8)]=_0x29d6f8[_0x1a495e(0x330,0x37d,0x331,0x32b)];continue;case'1':_0x16fe55['style'][_0x2e41d9(-0xd1,-0x138,-0x13c,-0x18d)]='none';continue;case'2':_0x53acc7=null;continue;case'3':_0x2fb693[_0x1a495e(0x3bf,0x34f,0x3a0,0x2d7)+_0x1a495e(0x31d,0x358,0x3ca,0x376)]=null;continue;case'4':_0x40f572[_0x2e41d9(-0x1c7,-0x16a,-0x174,-0x154)]['display']=_0x29d6f8[_0x1a495e(0x411,0x39c,0x359,0x3b8)];continue;case'5':_0x4aef1a[_0x1a495e(0x354,0x357,0x37c,0x313)]='';continue;}break;}}},_0x5a0af0[_0x37899d(0x14,-0x8c,-0xf,-0x42)+_0x37899d(-0x93,-0x85,-0xc8,-0x101)](_0x2dc317);}else{const _0x27bda0=await _0x45d680[_0x5c4559(0xa3,0xe8,0x25,0x4d)]();_0x46f286[_0x37899d(-0x52,-0x79,-0x19,0xb)](alert,_0x5c4559(0x13f,0x1a7,0x195,0xe0)+_0x27bda0),_0x46f286['tEttw'](addLog,_0x5c4559(0xda,0x158,0x141,0xaf)+_0x37899d(0x16,-0xad,-0x5f,-0x5d)+_0x27bda0),console[_0x37899d(-0x7,-0xb5,-0x7a,-0x63)](_0x46f286[_0x5c4559(0x142,0x161,0xed,0xc7)],_0x27bda0),_0x46f286[_0x5c4559(0xe4,0x105,0x79,0x10e)](removeComfyUIImage);}}catch(_0x2f1e13){_0x46f286[_0x37899d(-0x17,-0xb2,-0x38,-0x6f)](alert,_0x46f286[_0x37899d(-0x3e,0x23,0x4,-0x38)]+_0x2f1e13[_0x5c4559(0xef,0xa6,0x16c,0x129)]),console['error'](_0x46f286[_0x37899d(0x4a,0x2e,-0x16,-0x90)],_0x2f1e13),_0x46f286[_0x5c4559(0xb6,0xb1,0xba,0xbb)](addLog,_0x37899d(-0x54,-0x69,-0x46,-0x66)+_0x5c4559(0xc1,0x7f,0x100,0xba)+JSON['stringify'](_0x2f1e13)),removeComfyUIImage();}}async function loadCachedImages(){const _0xf9a05={'dgRrO':function(_0x2f4e70,_0x582a2b){return _0x2f4e70(_0x582a2b);},'tBXUq':function(_0x2707bf,_0x269e18){return _0x2707bf+_0x269e18;},'fnXLx':_0x9e4647(0x562,0x551,0x5d8,0x52c)+':','ADARK':function(_0x500d04){return _0x500d04();},'ZYzwX':'Error\x20load'+'ing\x20cached'+_0x46d316(-0x1a0,-0x1ce,-0x12c,-0x150)+_0x46d316(-0x192,-0x176,-0x1fa,-0x14a),'UHxAx':_0x46d316(-0xf1,-0xd0,-0x109,-0x7b),'EEIvt':'none','kKstR':_0x9e4647(0x527,0x4f1,0x4b3,0x518)+'x','pGBqt':function(_0x15bfa0,_0x1fc379){return _0x15bfa0(_0x1fc379);},'UyqzG':function(_0x3cbb09){return _0x3cbb09();},'DQkFE':function(_0xab42aa,_0x3bdc91){return _0xab42aa===_0x3bdc91;},'DKMwr':_0x46d316(-0x1a4,-0x202,-0x1f9,-0x1cc),'mnJHo':_0x46d316(-0xf9,-0x12b,-0xa3,-0xe0)+_0x46d316(-0x125,-0x161,-0x16e,-0x10f)+'\x20NovelAI\x20V'+_0x9e4647(0x51c,0x4cb,0x53e,0x54d),'KoKrf':function(_0x515769,_0x1e3ed2){return _0x515769!==_0x1e3ed2;},'VrXKX':'NnRje','BhaCR':_0x46d316(-0x122,-0x15d,-0x146,-0xe0),'RZvxr':_0x46d316(-0x1ce,-0x16a,-0x1ce,-0x166),'icyuO':_0x9e4647(0x5d1,0x61d,0x576,0x5b7)+_0x46d316(-0x125,-0xe2,-0x108,-0xd7)+_0x46d316(-0x198,-0x1bc,-0x176,-0x188)+_0x9e4647(0x5c7,0x61c,0x54d,0x557)+'age:','RBfdN':_0x9e4647(0x5bd,0x591,0x62c,0x5a4),'AflJU':function(_0xb9bc5b,_0x721878){return _0xb9bc5b(_0x721878);},'CPMuY':function(_0x3c003c,_0x4eb2be){return _0x3c003c(_0x4eb2be);},'QihaM':function(_0x387e20,_0x5a38e8){return _0x387e20===_0x5a38e8;},'JxOEW':function(_0x56e541,_0x4608d6){return _0x56e541(_0x4608d6);}};function _0x46d316(_0x82c0f8,_0x43ba35,_0x1e3d90,_0x305b9e){return _0x40981c(_0x82c0f8-0xb5,_0x305b9e,_0x1e3d90-0x9c,_0x305b9e-0x1ac);}await dbs[_0x46d316(-0x1c8,-0x1ed,-0x151,-0x1a5)]();try{const _0x712c4f=await dbs[_0x9e4647(0x52b,0x51a,0x556,0x4c5)+_0x46d316(-0x19c,-0x13f,-0x1c2,-0x123)](NAI_VIBE_CACHE_KEY);_0x712c4f&&_0x712c4f[_0x46d316(-0xda,-0xbe,-0x132,-0xd5)]&&_0xf9a05[_0x46d316(-0x140,-0x1ae,-0x1bb,-0x155)](updateNovelaiImagePreview,_0x712c4f[_0x46d316(-0xda,-0xe7,-0x90,-0x127)]);}catch(_0x11cfa4){_0xf9a05['DQkFE'](_0xf9a05['DKMwr'],_0xf9a05[_0x46d316(-0x12b,-0x13f,-0x14d,-0x110)])?console[_0x46d316(-0x17c,-0x1bc,-0x114,-0x1c1)](_0xf9a05[_0x9e4647(0x58b,0x52b,0x5dc,0x5bf)],_0x11cfa4):(_0xf9a05[_0x46d316(-0x140,-0x194,-0x1b4,-0x1a1)](_0x547c4b,_0xf9a05[_0x46d316(-0x1b3,-0x208,-0x14e,-0x16a)](_0x9e4647(0x562,0x56a,0x5af,0x5c6)+':\x20',_0x20fe4c[_0x9e4647(0x597,0x56d,0x5dd,0x5f6)])),_0x5e7844['error'](_0xf9a05[_0x46d316(-0xfc,-0xfb,-0xc5,-0x143)],_0x1d5c4e),_0x5d42b3('图片上传失败,\x20错误'+'详情:\x20'+_0x5cfd28[_0x46d316(-0x12d,-0x145,-0x135,-0xb9)](_0x49ce07)),_0xf9a05[_0x9e4647(0x51b,0x50b,0x4f4,0x592)](_0x34d037));}try{const _0x3ffb5a=await dbs[_0x9e4647(0x52b,0x4c1,0x52a,0x597)+_0x46d316(-0x19c,-0x1dc,-0x121,-0x176)](NAI_CHAR_REF_CACHE_KEY);_0x3ffb5a&&_0x3ffb5a[_0x9e4647(0x5f0,0x57e,0x5db,0x5f0)]&&(_0xf9a05[_0x46d316(-0x13b,-0x124,-0x166,-0x187)](_0xf9a05[_0x9e4647(0x549,0x4dc,0x4fa,0x56a)],_0xf9a05[_0x9e4647(0x5ba,0x59a,0x604,0x625)])?updateNovelaiCharRefImagePreview(_0x3ffb5a['data']):_0x246229[_0x9e4647(0x54e,0x515,0x575,0x555)](_0xf9a05[_0x9e4647(0x57c,0x559,0x553,0x52b)],_0x15a4f7));}catch(_0x5b388a){_0xf9a05[_0x9e4647(0x592,0x560,0x5fc,0x5e2)](_0xf9a05['RZvxr'],_0xf9a05[_0x46d316(-0xef,-0x12a,-0x11b,-0x90)])?console[_0x46d316(-0x17c,-0x180,-0x1d9,-0x187)](_0xf9a05['icyuO'],_0x5b388a):(_0x2025b9[_0x46d316(-0x196,-0x1e4,-0x1c1,-0x1e1)]=_0x2c1dba,_0x592b6d[_0x46d316(-0x114,-0xc3,-0xcb,-0xb2)][_0x9e4647(0x5ee,0x5a1,0x612,0x61b)]=_0xf9a05[_0x46d316(-0x197,-0x185,-0x189,-0x1b3)],_0x599c64[_0x9e4647(0x5b6,0x541,0x5cc,0x5d7)][_0x9e4647(0x5ee,0x59d,0x571,0x622)]=_0xf9a05[_0x9e4647(0x50a,0x516,0x4ba,0x56e)],_0x4a44b0[_0x46d316(-0x114,-0xe6,-0x9c,-0xd3)][_0x9e4647(0x5ee,0x64e,0x644,0x609)]=_0xf9a05[_0x46d316(-0x134,-0x185,-0xfa,-0xc1)]);}function _0x9e4647(_0x202d18,_0x5987b9,_0x4377c5,_0x52830a){return _0x263bdf(_0x4377c5,_0x5987b9-0xbf,_0x4377c5-0x97,_0x202d18-0x674);}try{if(_0xf9a05[_0x9e4647(0x58f,0x5d1,0x5aa,0x51c)](_0x46d316(-0x10d,-0xb6,-0x132,-0x99),_0xf9a05[_0x9e4647(0x5d0,0x5ab,0x587,0x649)])){_0xf9a05[_0x9e4647(0x553,0x5ad,0x53f,0x4e7)](_0x159655,_0x9e4647(0x59c,0x59d,0x520,0x538)+_0x9e4647(0x554,0x54d,0x5c6,0x537)),_0xf9a05[_0x9e4647(0x593,0x5ae,0x57b,0x5b2)](_0xafc7a);return;}else{const _0x4a3ca1=await dbs[_0x9e4647(0x52b,0x59d,0x4ee,0x4b9)+_0x9e4647(0x52e,0x528,0x4d1,0x545)](COMFYUI_REF_CACHE_KEY);if(_0x4a3ca1&&_0x4a3ca1[_0x9e4647(0x5f0,0x5c6,0x580,0x5dd)]&&_0x4a3ca1[_0x9e4647(0x5f0,0x5a2,0x589,0x59e)][_0x9e4647(0x5f0,0x63f,0x611,0x5b7)]&&_0x4a3ca1[_0x9e4647(0x5f0,0x625,0x58b,0x5e4)]['serverFile'+_0x46d316(-0x173,-0xf7,-0x10b,-0x14d)]){const _0x144210=_0x4a3ca1['data'],_0x209452=await _0xf9a05['AflJU'](fetch,_0x144210[_0x46d316(-0xda,-0xd9,-0x79,-0xf0)]),_0x6999ac=await _0x209452['blob'](),_0x22bbda=URL[_0x46d316(-0x1a1,-0x12f,-0x172,-0x1e7)+_0x9e4647(0x5eb,0x5e0,0x5ca,0x5ba)](_0x6999ac);_0xf9a05[_0x9e4647(0x4ff,0x532,0x569,0x50a)](updateComfyUIImagePreview,_0x22bbda),comfyuiImageObjectURL=_0x22bbda,window[_0x9e4647(0x52c,0x57c,0x4dc,0x4b8)+_0x9e4647(0x535,0x528,0x557,0x4fb)]=_0x144210[_0x46d316(-0x1cd,-0x22c,-0x23d,-0x20f)+_0x46d316(-0x173,-0x136,-0x190,-0x1da)],_0xf9a05['pGBqt'](addLog,_0x46d316(-0x1b6,-0x165,-0x154,-0x1ef)+_0x46d316(-0x15e,-0x10f,-0x104,-0xf3)+_0x144210[_0x9e4647(0x4fd,0x4ee,0x51a,0x555)+'Name']),console[_0x9e4647(0x563,0x567,0x4f0,0x564)](_0x9e4647(0x5d4,0x5fd,0x558,0x56d)+_0x9e4647(0x504,0x543,0x52e,0x4fe)+_0x9e4647(0x5a9,0x57a,0x624,0x55c)+'e:\x20'+_0x144210[_0x9e4647(0x4fd,0x531,0x515,0x579)+_0x9e4647(0x557,0x56d,0x4eb,0x4f5)]);}else{if(_0x4a3ca1&&_0xf9a05[_0x46d316(-0x1ab,-0x212,-0x1f2,-0x1cb)](typeof _0x4a3ca1[_0x46d316(-0xda,-0xbd,-0x13a,-0xf2)],_0x46d316(-0x17e,-0x14c,-0x1a7,-0x184))){const _0x5067ef=await _0xf9a05[_0x9e4647(0x58a,0x5c5,0x576,0x5d4)](fetch,_0x4a3ca1[_0x9e4647(0x5f0,0x5b8,0x642,0x611)]),_0x197f99=await _0x5067ef['blob'](),_0x5f1761=URL[_0x46d316(-0x1a1,-0x1f3,-0x1b1,-0x159)+_0x9e4647(0x5eb,0x586,0x595,0x5f0)](_0x197f99);_0xf9a05[_0x9e4647(0x567,0x5e4,0x54e,0x51c)](updateComfyUIImagePreview,_0x5f1761),comfyuiImageObjectURL=_0x5f1761,console[_0x46d316(-0xd6,-0x6d,-0x11d,-0xff)](_0x46d316(-0xf6,-0xb0,-0xd3,-0xc1)+_0x46d316(-0x1c6,-0x21a,-0x229,-0x14c)+_0x9e4647(0x58d,0x5e0,0x5fd,0x59c)+_0x9e4647(0x5a2,0x5cf,0x5d4,0x5dd)+_0x46d316(-0x186,-0x168,-0x1e9,-0x174)+_0x9e4647(0x5e9,0x598,0x649,0x5e8)+_0x46d316(-0x144,-0x1a6,-0x11e,-0xf8)+'\x20cache\x20to\x20'+_0x9e4647(0x59a,0x577,0x599,0x5cc)+_0x9e4647(0x5c1,0x611,0x639,0x585));}}}}catch(_0x45a98f){console['error'](_0xf9a05[_0x9e4647(0x57c,0x59b,0x5fa,0x598)],_0x45a98f);}}export function initImageUpload(_0x53d4d5){function _0x183212(_0x16a069,_0x12098e,_0x2258bd,_0x5dcb34){return _0x263bdf(_0x16a069,_0x12098e-0xf5,_0x2258bd-0x176,_0x5dcb34-0x51d);}const _0x573ba0={'xBxfD':_0x183212(0x4bd,0x423,0x4f2,0x496)+_0x558220(0x3df,0x40e,0x431,0x3d3),'VhzBb':_0x183212(0x3af,0x46e,0x433,0x41b)+'essing\x20Nov'+'elAI\x20char\x20'+_0x183212(0x36e,0x358,0x3c6,0x3cb),'NZfAt':function(_0x22e558,_0x3dcb5b){return _0x22e558+_0x3dcb5b;},'XZaKR':'图片处理失败:\x20','sqQpA':function(_0x213865,_0x5cd16b){return _0x213865===_0x5cd16b;},'NVjMn':'FmmSE','TSSCm':_0x183212(0x41b,0x3b2,0x3fa,0x411),'MbERC':function(_0x11698c,_0x29c97f){return _0x11698c(_0x29c97f);},'jNVeP':function(_0x479e4a,_0x578d65){return _0x479e4a===_0x578d65;},'QotWz':_0x183212(0x402,0x417,0x434,0x3bc),'Qmkkc':'imageInput'+_0x558220(0x44c,0x44e,0x46e,0x43b)+_0x183212(0x3af,0x3f8,0x369,0x3da),'TWWgr':'(((.+)+)+)'+'+$','pheYg':function(_0x55e9b1,_0x467480){return _0x55e9b1!==_0x467480;},'WIeND':_0x183212(0x457,0x424,0x449,0x42e),'TDUzP':_0x183212(0x47a,0x3ec,0x43a,0x40a),'iAMUm':function(_0x3ae954){return _0x3ae954();},'ikeLI':_0x558220(0x54f,0x54f,0x4ee,0x4ce)+'2','EGtgf':function(_0x13675a,_0x3a4770){return _0x13675a(_0x3a4770);},'uwDMg':'nFlUo','BbAhd':_0x183212(0x428,0x41f,0x343,0x3b8)+'elect-imag'+_0x558220(0x4fc,0x457,0x49c,0x43d),'zvPZS':_0x183212(0x410,0x372,0x406,0x3c3)+_0x183212(0x3fc,0x35b,0x3c4,0x3ce),'UzBXm':_0x558220(0x39c,0x43f,0x409,0x45a),'SRKUF':_0x183212(0x3e1,0x46a,0x4b4,0x450)+'emove-imag'+'e-btn','JfTUK':'click','mHDHm':'#novelai-s'+_0x558220(0x48b,0x519,0x4df,0x4eb)+_0x183212(0x405,0x3b6,0x41f,0x3c6)+'-btn','oCBXh':'#imageInpu'+_0x558220(0x474,0x3a4,0x406,0x3f8)+_0x558220(0x43a,0x4a9,0x4b6,0x442),'BHOUv':_0x558220(0x4b6,0x489,0x4a8,0x506)+'emove-char'+'-ref-image'+_0x558220(0x3e5,0x3f0,0x417,0x3c4),'PUfXp':'#comfyui-s'+_0x558220(0x51d,0x505,0x4cb,0x470)+_0x183212(0x3ce,0x3cf,0x453,0x444),'YalxV':'#comfyui-r'+_0x558220(0x495,0x4fc,0x4a5,0x4cf)+'e-btn'};loadCachedImages(),_0x53d4d5[_0x183212(0x3bc,0x47e,0x43d,0x419)](_0x573ba0[_0x183212(0x411,0x459,0x3b4,0x423)])['on']('click',()=>{function _0x28f857(_0x462cf6,_0x58d914,_0x1bf40e,_0x2fd9a3){return _0x183212(_0x1bf40e,_0x58d914-0x15c,_0x1bf40e-0x153,_0x58d914- -0x326);}function _0x4d2641(_0x1ab323,_0x5b2631,_0x18815e,_0xa4a386){return _0x558220(_0x1ab323,_0x5b2631-0x12e,_0xa4a386- -0x50f,_0xa4a386-0xba);}document['getElement'+_0x28f857(0x124,0xf8,0xc2,0x143)](_0x573ba0[_0x4d2641(-0x116,-0x13c,-0x11c,-0xee)])[_0x28f857(0xc0,0x94,0x49,0xd2)]();}),_0x53d4d5[_0x558220(0x472,0x4bc,0x471,0x404)](_0x573ba0[_0x183212(0x4c1,0x4c6,0x4a2,0x48b)])['on'](_0x573ba0[_0x183212(0x484,0x4de,0x46a,0x464)],handleNovelaiImageUpload),_0x53d4d5[_0x558220(0x452,0x4a8,0x471,0x441)](_0x573ba0[_0x183212(0x4a0,0x467,0x431,0x481)])['on'](_0x573ba0['JfTUK'],()=>{function _0xa32a41(_0x2df43a,_0x55b834,_0x389d30,_0x1b463a){return _0x183212(_0x389d30,_0x55b834-0x2f,_0x389d30-0x188,_0x1b463a-0x68);}const _0xfaba90={'IJpLP':_0x573ba0[_0x1c4baa(-0x102,-0x17b,-0x114,-0x188)],'ILoKw':function(_0x3ea8bc,_0x201074){return _0x573ba0['NZfAt'](_0x3ea8bc,_0x201074);},'JZlkp':_0x573ba0[_0xa32a41(0x3c7,0x422,0x414,0x435)]};function _0x1c4baa(_0x58f481,_0x431b21,_0x2f9964,_0x3fabb7){return _0x558220(_0x58f481,_0x431b21-0x19c,_0x2f9964- -0x513,_0x3fabb7-0xe3);}_0x573ba0['sqQpA'](_0x573ba0[_0xa32a41(0x452,0x494,0x3f5,0x434)],_0x573ba0['TSSCm'])?(_0x4b23fc['error'](_0xfaba90[_0x1c4baa(-0x7d,-0x3b,-0x95,-0x100)],_0x1e5b7b),_0x17b443(_0xfaba90['ILoKw'](_0xfaba90[_0xa32a41(0x4ce,0x484,0x4fc,0x4de)],_0x3840c6['message']))):removeNovelaiImage();});function _0x558220(_0x4616de,_0x1a746f,_0x5e3d45,_0x5a54d7){return _0x263bdf(_0x4616de,_0x1a746f-0x30,_0x5e3d45-0xd4,_0x5e3d45-0x575);}_0x53d4d5[_0x183212(0x40f,0x43b,0x41b,0x419)](_0x573ba0[_0x558220(0x46b,0x402,0x40a,0x40d)])['on'](_0x573ba0[_0x183212(0x41f,0x4c1,0x417,0x486)],()=>{function _0xc8204e(_0x45f088,_0x5171a5,_0x3848be,_0x5c3d0c){return _0x183212(_0x45f088,_0x5171a5-0xe9,_0x3848be-0x7b,_0x3848be-0x34);}function _0x47f7e8(_0x3f8fa0,_0x38f7d7,_0x2ed888,_0x462d1a){return _0x183212(_0x38f7d7,_0x38f7d7-0x105,_0x2ed888-0x1af,_0x2ed888- -0x652);}_0x573ba0[_0xc8204e(0x458,0x4a8,0x42c,0x480)](_0x573ba0['QotWz'],_0x573ba0[_0xc8204e(0x494,0x4e4,0x4c3,0x449)])?document[_0x47f7e8(-0x27b,-0x251,-0x2b1,-0x261)+'ById'](_0x573ba0[_0x47f7e8(-0x237,-0x1dd,-0x1d6,-0x16e)])[_0x47f7e8(-0x224,-0x2d3,-0x298,-0x21d)]():(_0x573ba0[_0x47f7e8(-0x281,-0x211,-0x261,-0x24c)](_0x5a0479,null),_0x4268d2[_0x47f7e8(-0x20a,-0x28f,-0x22b,-0x1d0)+'e'](_0x2d3063));}),_0x53d4d5[_0x183212(0x465,0x483,0x3b4,0x419)](_0x573ba0[_0x183212(0x3d5,0x38c,0x3cd,0x3e6)])['on'](_0x183212(0x358,0x34d,0x3fe,0x3b1),handleNovelaiCharRefImageUpload),_0x53d4d5[_0x558220(0x488,0x467,0x471,0x4b9)](_0x573ba0['BHOUv'])['on'](_0x573ba0['JfTUK'],()=>{function _0x340d47(_0x1579eb,_0x296ecf,_0xd68014,_0x2b1251){return _0x183212(_0x1579eb,_0x296ecf-0x1e0,_0xd68014-0x66,_0xd68014- -0x16);}function _0x3f4877(_0x320c75,_0x23413e,_0x28dbd3,_0x20699f){return _0x558220(_0x20699f,_0x23413e-0xf4,_0x28dbd3- -0x697,_0x20699f-0x17c);}if(_0x573ba0[_0x3f4877(-0x286,-0x264,-0x217,-0x288)](_0x573ba0[_0x3f4877(-0x21e,-0x2ca,-0x267,-0x1f9)],_0x573ba0[_0x340d47(0x3e3,0x401,0x3e8,0x3ea)]))_0x573ba0['iAMUm'](removeNovelaiCharRefImage);else return _0x7486e7['toString']()[_0x340d47(0x4e9,0x410,0x472,0x448)](IjUbiA['TWWgr'])['toString']()[_0x340d47(0x4d6,0x462,0x46f,0x4e8)+'r'](_0x1f7ce6)[_0x340d47(0x4bb,0x48f,0x472,0x462)](IjUbiA[_0x3f4877(-0x23e,-0x1e2,-0x1ce,-0x171)]);}),_0x53d4d5[_0x558220(0x45a,0x4ce,0x471,0x43a)](_0x573ba0['PUfXp'])['on'](_0x573ba0[_0x183212(0x458,0x4f8,0x46c,0x486)],()=>{function _0x5cebc7(_0x124fab,_0x5ad4e6,_0x5dadb1,_0x235420){return _0x558220(_0x5ad4e6,_0x5ad4e6-0x7b,_0x5dadb1-0x89,_0x235420-0x1c9);}function _0x1e2d52(_0x1c0fba,_0x4d760f,_0x30d88d,_0x1e105f){return _0x183212(_0x4d760f,_0x4d760f-0x15c,_0x30d88d-0x117,_0x30d88d- -0x5b4);}document[_0x5cebc7(0x46a,0x49f,0x482,0x43d)+_0x5cebc7(0x4f8,0x523,0x4ff,0x4b2)](_0x573ba0[_0x5cebc7(0x4dc,0x4dc,0x4c6,0x4c0)])[_0x1e2d52(-0x228,-0x17b,-0x1fa,-0x1fe)]();}),_0x53d4d5[_0x183212(0x442,0x494,0x463,0x419)](_0x183212(0x3af,0x3ae,0x3b5,0x3c3)+'t2')['on'](_0x573ba0[_0x558220(0x538,0x466,0x4bc,0x51a)],handleImageUpload2),_0x53d4d5['find'](_0x573ba0[_0x183212(0x463,0x453,0x44a,0x478)])['on'](_0x573ba0[_0x558220(0x551,0x4ba,0x4de,0x4d9)],()=>{function _0x332c21(_0x3b6599,_0x2ddd76,_0x5d7246,_0x46a0ba){return _0x183212(_0x3b6599,_0x2ddd76-0x185,_0x5d7246-0x119,_0x5d7246- -0x1c5);}function _0x49a843(_0x1fc53a,_0x33b48d,_0x323f5c,_0x4173a1){return _0x183212(_0x1fc53a,_0x33b48d-0x1e9,_0x323f5c-0x2d,_0x323f5c-0xbe);}_0x573ba0['pheYg'](_0x332c21(0x1ca,0x219,0x226,0x1bc),_0x573ba0[_0x49a843(0x4a3,0x492,0x4bd,0x4f4)])?(_0x573ba0[_0x332c21(0x2c1,0x2e9,0x2a9,0x2bc)](_0x2420ee,null),_0x149290[_0x332c21(0x2bc,0x27e,0x262,0x227)+'e'](_0x426fa3)):_0x573ba0['iAMUm'](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};