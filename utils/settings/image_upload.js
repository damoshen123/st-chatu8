(function(_0x4b4630,_0x5d1cba){function _0x3cbfd0(_0x5117bf,_0x4e9306,_0x34b895,_0x5f149b){return _0x3b96(_0x5f149b- -0x24c,_0x34b895);}function _0x703e61(_0x464d2c,_0x256f2d,_0x90ed5c,_0x4c8a7a){return _0x3b96(_0x90ed5c-0x136,_0x4c8a7a);}const _0x206b35=_0x4b4630();while(!![]){try{const _0x4ab946=parseInt(_0x703e61(0x1c8,0x1d9,0x248,0x1ce))/(0x21b3*0x1+-0xd*0x2ec+-0xb7*-0x6)+parseInt(_0x3cbfd0(-0xb7,-0x71,-0x121,-0xbc))/(-0x1582+-0x6*0x119+0x1c1a)*(-parseInt(_0x3cbfd0(-0x1b5,-0x18a,-0x215,-0x19d))/(0x23a1*-0x1+0x907*-0x3+-0x3eb9*-0x1))+parseInt(_0x703e61(0x35b,0x2d9,0x2e2,0x368))/(-0x1*0x893+-0x5c9*0x1+0x5*0x2e0)+parseInt(_0x703e61(0x18c,0x274,0x203,0x1b2))/(-0x10e4+0x933+0x7b6)*(-parseInt(_0x703e61(0x2fc,0x2c4,0x2a0,0x24c))/(-0x2*0x1288+0x82a+0xc*0x269))+parseInt(_0x703e61(0x29c,0x25b,0x28e,0x227))/(-0x2b9+-0xd5d+0xa5*0x19)+-parseInt(_0x703e61(0x263,0x31f,0x2da,0x2fb))/(0xa7e+-0x65*-0x3e+-0x14*0x1bf)+-parseInt(_0x3cbfd0(-0x18b,-0x173,-0x117,-0x16a))/(0x20fe+-0x1b58+-0x59d)*(parseInt(_0x703e61(0x248,0x1d3,0x1f8,0x22b))/(0x617*-0x1+0x1963+0x2*-0x9a1));if(_0x4ab946===_0x5d1cba)break;else _0x206b35['push'](_0x206b35['shift']());}catch(_0x583d10){_0x206b35['push'](_0x206b35['shift']());}}}(_0x3384,0x28dea+-0x1b51+0x5fb9));const _0x2c3ee1=(function(){const _0x3d26fb={};_0x3d26fb['Liiao']=_0x5153ee(0x558,0x494,0x4f6,0x54a),_0x3d26fb[_0x5153ee(0x47b,0x46c,0x456,0x4d7)]=_0x5153ee(0x3e6,0x4b1,0x458,0x442);function _0x382769(_0xd57f75,_0x47d67c,_0x4aab1f,_0x192f05){return _0x3b96(_0xd57f75-0x361,_0x47d67c);}_0x3d26fb[_0x382769(0x4e9,0x4f3,0x50a,0x53e)]=_0x5153ee(0x4cb,0x508,0x4da,0x55d),_0x3d26fb[_0x382769(0x484,0x484,0x438,0x4d5)]=_0x5153ee(0x538,0x4e9,0x51a,0x577)+'+$',_0x3d26fb[_0x5153ee(0x407,0x4a9,0x455,0x436)]=function(_0x21711e,_0x5d1203){return _0x21711e===_0x5d1203;},_0x3d26fb[_0x382769(0x4b8,0x4ea,0x50d,0x4ea)]=_0x382769(0x4e7,0x55c,0x564,0x4d2),_0x3d26fb['acJaE']='zQFQf';function _0x5153ee(_0xcc6d8c,_0x51a3e5,_0x5ae9b7,_0x5ce9b3){return _0x3b96(_0x5ae9b7-0x36d,_0x51a3e5);}const _0x1d05f3=_0x3d26fb;let _0x597c7b=!![];return function(_0xd9c0e6,_0x296130){function _0x54774d(_0x1d4685,_0xe75bc9,_0xfe0a09,_0x53e092){return _0x382769(_0xfe0a09- -0x598,_0x53e092,_0xfe0a09-0x67,_0x53e092-0x190);}const _0x1e21e5={};_0x1e21e5[_0x547510(-0xf2,-0x10d,-0x73,-0xb6)]=_0x1d05f3[_0x547510(-0x77,0x63,-0x5a,0xc)],_0x1e21e5[_0x54774d(-0xa6,-0xdc,-0xaa,-0x10e)]='inline-fle'+'x';function _0x547510(_0xecec5a,_0x510e89,_0x65ac6f,_0x18bf75){return _0x382769(_0x18bf75- -0x4dd,_0xecec5a,_0x65ac6f-0x55,_0x18bf75-0xf8);}_0x1e21e5['CyKov']=_0x1d05f3['PjQnI'];const _0x45d37a=_0x1e21e5;if(_0x1d05f3[_0x547510(-0x90,-0xff,-0x64,-0x94)](_0x1d05f3[_0x547510(-0x8d,-0x47,-0x26,-0x25)],_0x1d05f3[_0x547510(-0x6b,-0xb4,-0xe7,-0x65)]))_0x5a4d4b[_0x547510(-0xb3,-0x9d,-0xc2,-0x80)]=_0x495f63,_0x3a4ff6['style']['display']=_0x45d37a[_0x54774d(-0x135,-0x15c,-0x171,-0x120)],_0x174489[_0x547510(0x3a,0x7f,-0x10,0x26)][_0x54774d(-0x3e,-0x11b,-0xc0,-0x125)]='none',_0x4b624e[_0x547510(0x3a,0x2c,-0xc,0x26)][_0x54774d(-0xe8,-0x82,-0xc0,-0x50)]=_0x45d37a[_0x547510(-0x6f,0xf,-0x3b,0x11)];else{const _0x3926b8=_0x597c7b?function(){function _0x4e37a7(_0x4804f4,_0x6b98be,_0x316af4,_0x2f2f6e){return _0x547510(_0x2f2f6e,_0x6b98be-0x1bd,_0x316af4-0x163,_0x4804f4-0x17f);}function _0x2ca7a0(_0x5efc60,_0x10c9f6,_0x39a571,_0x56d62f){return _0x54774d(_0x5efc60-0x1f0,_0x10c9f6-0x162,_0x39a571-0x2c7,_0x10c9f6);}if(_0x1d05f3[_0x2ca7a0(0x1b7,0x195,0x14a,0x17e)]!==_0x1d05f3['WJWEn']){if(_0x296130){const _0x5351d9=_0x296130[_0x4e37a7(0xe0,0x69,0xf8,0x104)](_0xd9c0e6,arguments);return _0x296130=null,_0x5351d9;}}else return _0x4aaf93[_0x2ca7a0(0x1fe,0x170,0x1f7,0x20e)]()['search'](_0x45d37a[_0x2ca7a0(0x270,0x1e9,0x240,0x260)])[_0x4e37a7(0x16a,0x148,0x146,0x1b0)]()[_0x4e37a7(0x12b,0x16c,0x17d,0xe0)+'r'](_0x42d970)['search'](_0x45d37a[_0x2ca7a0(0x27d,0x1fb,0x240,0x1f5)]);}:function(){};return _0x597c7b=![],_0x3926b8;}};}()),_0x496206=_0x2c3ee1(this,function(){const _0x1d853e={};function _0xc698c4(_0x2f9773,_0x428c73,_0x51608b,_0xcfef45){return _0x3b96(_0x51608b-0x90,_0x428c73);}function _0x1d5652(_0x409bde,_0x447747,_0x2affc7,_0x13da33){return _0x3b96(_0x447747- -0x34e,_0x409bde);}_0x1d853e[_0xc698c4(0x155,0x184,0x159,0x172)]=_0xc698c4(0x1c1,0x267,0x23d,0x2c0)+'+$';const _0x320b8b=_0x1d853e;return _0x496206[_0xc698c4(0x22f,0x249,0x1f7,0x1fe)]()[_0xc698c4(0x168,0x1b5,0x174,0x102)](_0xc698c4(0x1e3,0x282,0x23d,0x1e1)+'+$')['toString']()[_0x1d5652(-0x21b,-0x226,-0x2a0,-0x1ec)+'r'](_0x496206)[_0xc698c4(0x198,0x198,0x174,0x1a5)](_0x320b8b[_0xc698c4(0x10c,0x1b1,0x159,0x17d)]);});function _0x3384(){const _0x57921b=['y29UC3rYDwn0BW','zMLSzxm','rxjYB3iGChjVyW','ELfrz0m','qNLjza','vfDcEgO','CL9Yzwy','wuPWq20','DhjdDNe','vNL2Du0','CfPKD1u','y2XPy2S','C3bSAxq','CLHrAxq','r1zOEgG','ENP2q3q','AhbQtuW','CMvZDwX0','y29TzNL1As1Yzq','BgfJzwHVBgrLCG','ufz2rxy','zs1IDg4','ignHy2HLihrVia','AgfYlxjLzI1PBq','B2j1we4','i25VDMvSywKTAq','tenKvgS','Dgv4Da','ssbbueNLNldLNydJGii','wg93uMm','y2fJAgvFy29TzG','C3rVCMvszwfKtW','zhfsBey','yw5ZzMvYsw1HzW','DtGTAw1Hz2uTCa','DgfYz2v0','BwvZC2fNzq','BwP0D1u','Aw1Hz2vjBNb1Da','ueTyzhC','6k+M5OofoIa','AgfYifjLzIbPBq','AfjezMW','5lIk5lYG5AsX6lsLoIa','CKfYAKW','q1vuqui','z2v0rwXLBwvUDa','uvPLvLy','mJi3ndq0mgjTAM1JyG','ELrzB00','vLHOweW','mxWZFdj8nxW0Fa','yNrU','CfPfBve','tvfkELu','Bg9N','y3zSwNG','BM9Uzq','zMXLEa','zNLvssbPBwfNzq','z2uY','v2TXDuu','ywLgtgu','Dg9tDhjPBMC','nhWZFdf8mNWW','nhWZFdb8mNWX','ndC4nJjfD0XJD1K','z1DzCNG','AwrTB1a','yMXVy2S','zxCTy29UDgfPBG','igzYB20Gy2fJAa','BMX5','sfbwtKS','DujwDuK','zw1VDMuTy2HHCG','y2HHBMDL','Df9UB3zLBgfP','qvjZu0y','zgLZCgXHEq','zwzFAw1Hz2u','zxiGlNn0lwnOyq','vMPwwMe','BMfPm0nOyxjszq','C3jrsK4','A3fhBuK','vhLRExa','B25SB2fKzw5K','vwn4DgW','wKj0AwG','tg9HzgvKienVBq','u09qyuq','y1DQBMu','lxjLzI1PBwfNzq','EM9jEwK','sNrZD28','t0vACLu','zLnuDxi','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','yM9KEq','EgrezxO','qNHgz2K','BNb2DMO','vvvwB0O','mNHOy1fWta','ie5VDMvSquKGqW','Egv5veq','igzYB20GB2XKia','A2fVDhvWAwfU','zgf0yq','vu93uuC','u2ndELG','ztOG','BwfNztO','BM92zwXHAs1Yzq','zxjYB3i','Bw92zs1PBwfNzq','rLrVDem','rxjYB3iGBg9Hza','BuPbDuW','r3fnz0W','BwP1svy','C3r5Bgu','BLjiDgG','nZqZmteYAen5zvLL','q1bxAfO','zwXbssbJAgfYia','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','AKXhrwC','yMXVyG','BMfPm1zPyMvuCG','EKLizuq','ndyWntaWBvfiz3zm','kcGOlISPkYKRkq','ihjLlxvWBg9Hza','CM1HDc4','q3LlB3y','C3rHCNrZv2L0Aa','zw9Hzeq','y3jLyxrLt2jQzq','sLrxzha','Dhu4lwLTywDLlq','r3DlB20','t2LWyu4','DY1JB250ywLUzq','C3rVCMvszwfKvW','ywDL','qxrqyw4','yKjjtuC','Dg9Y','D3zzB2m','txjOEve','ota4mdmXC2zntuzi','wLPfs0S','y29TzNL1AwnHBG','CgXHy2vOB2XKzq','zfjxDgG','yxbWzw5K','Aw5NignHy2HLza','sxHmEKm','i2LTywDLsw5WDq','sLLtwwC','ExjmA24','tgLPyw8','u1HTD2m','s0verxe','yLfjy2e','CMv2B2TLt2jQzq','z2vuvhO','Aw1Hz2uVCg5N','tNbTyxu','ntbduvPLBgG','ywDLoG','6k+35ywi6k6+572Uq29TzNLv','i25VDMvSywKTCG','EwjWtMG','rvD6AgK','tvn4Bxa','D2DezM0','Aw5SAw5LlwzSzq','zwXbssbPBwfNzq','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','mti1AxfrA0Pc','CMvM','zxnZAw5Nie5VDG','CMvMigLTywDLoG','l3vWBg9Hzc9PBq','zMXUy04','lwj0BG','5lUo57Yt5A2y5yQG6l29q29TzNK','rfj6sva','ywDLlxbYzxzPzq','BgfPx3zPyMvFDa','mxWYFdb8m3W0','C2vYDMvYrMLSzq','CMfUC2zLCL9PBq','AwvIrhm','yNfkuLu','yxbWBhK','tLvpqNu','CMvHzefZrgf0yq','uMvcBwO','BMfTzq','mJy2nJDTCwn3te0','yMXVyJO','C2vHCMnO','A2XLBuu','z2vFBM92zwXHAq','v0DADwK','uvvzz00','v0Pxrw4','qKz5zKi','qMrVDeu','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','z2vFBMfPx2nOyq','CMvMlwLTywDLlq','zgf0ytPPBwfNzq','Ehfcthe','BgfPx2nOyxjFCG','5zMO6l+u5zUE5PwW5O2UoIa','tLr6q28','vwDrrNa','sffRrM8','Bgjfs2u','yxqUifbSzwfZzq','C3rYAw5N','D2fYBG','i2nVBwz5DwKTAq','DgHLig5LDYbMBW','C3jJ','zwXLy3qTy2HHCG','ihrVihvWzgf0zq','i25VDMvSywKTCW','CMrKt2i','A1Lou0K','qLDwz0W','Df9UywLFy2HHCG','tMfTzq','CeHHBuK','zKLTywDL','y2fJAgvFBM92zq','ChjLDMLLD0LTyq','vuNLM77NIyC6ia','t01Yzxq','ExvPx3jLzL9PBq','Bw92zs1JAgfYlq','zw1VDMuTAw1HzW','vLL5EwC','DKrSv2C','CxvLCNLtzwXLyW','CML0zq','mZu0nJC1sNHVz1LV','i25VDMvSywKTyW','suv6Efq','yuDKvKK','C3rVCMvezwXLDa','ywnkyuu','ienVBwz5vuKGAq','DKzPA0e','BursquS','wvn2Ew4','i2nVBwz5DwKTCG','y29TzNL1AvvYBa','y3rvuKW','twPlB0S','zwXLy3qTAw1HzW','zMLUza','x25HAv9JAgfYxW','ugPrBKK','tLDhqLi','BwfNzs1WCMv2Aq','Dhj2zKO','x25VDMvSywK'];_0x3384=function(){return _0x57921b;};return _0x3384();}_0x496206();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0xdc39c5(0x32,0x66,-0x46,-0x15)+_0x8a4e9d(-0x209,-0x281,-0x22e,-0x21b)+_0xdc39c5(0x5,0x57,-0x49,0x77)+'age',NAI_CHAR_REF_CACHE_KEY=_0xdc39c5(0x32,-0x2a,0x68,0x78)+_0x8a4e9d(-0x1cd,-0x178,-0x24d,-0x201)+_0x8a4e9d(-0x182,-0x1c3,-0x1a9,-0x17a),COMFYUI_REF_CACHE_KEY=_0x8a4e9d(-0x151,-0x15e,-0x13b,-0x1ac)+_0x8a4e9d(-0x21e,-0x1f7,-0x17c,-0x1e7)+'age';let nai3VibeTransferImageMimeType=_0x8a4e9d(-0x257,-0x24c,-0x285,-0x232),nai3CharRefImageMimeType='image/png',comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0xb596b9){function _0x235593(_0x50344d,_0x3431f5,_0x82bc25,_0x5a703c){return _0xdc39c5(_0x50344d- -0xcf,_0x5a703c,_0x82bc25-0x168,_0x5a703c-0xa5);}const _0x524bf1={'gWYrx':function(_0x4e7c08){return _0x4e7c08();},'UUVoJ':_0x235593(-0x63,-0xe9,-0x60,-0x28)+_0x3899cd(-0x18c,-0x147,-0x1a5,-0x1bb)+_0x3899cd(-0x175,-0xdb,-0x15c,-0x130)+_0x235593(-0x2b,-0x22,-0xa4,-0x73)+_0x235593(0x11,0x0,0x3b,-0x31)+_0x3899cd(-0x252,-0x200,-0x218,-0x1ba)+'r','bqJRU':'novelai-re'+_0x3899cd(-0x171,-0xad,-0x12e,-0xc9)+'-btn','ecbfi':'data:image','mjtwU':_0x235593(-0x43,-0x46,-0x38,0x2f),'UgQFp':_0x3899cd(-0x1e2,-0x1bc,-0x200,-0x1b2)+'x','rArjL':_0x235593(-0xd,-0x75,-0x24,-0x21),'uBVuI':'4|2|3|0|1'},_0x3ebff0=document[_0x3899cd(-0x1ac,-0x1c0,-0x174,-0x145)+_0x235593(-0x78,-0x8f,0xc,-0xba)]('previewIma'+_0x235593(-0xbe,-0x4a,-0xa4,-0x11d)),_0x53eee5=document[_0x3899cd(-0x226,-0x1a0,-0x1ba,-0x136)+'tor'](_0x524bf1[_0x3899cd(-0xe0,-0x161,-0x13b,-0xf0)]);function _0x3899cd(_0x1f575b,_0x220207,_0x365b14,_0x1b9095){return _0xdc39c5(_0x365b14- -0x1f5,_0x220207,_0x365b14-0x6e,_0x1b9095-0xf3);}const _0x6e4b41=document['getElement'+'ById'](_0x524bf1[_0x3899cd(-0x25f,-0x26d,-0x1ee,-0x1ff)]);if(_0xb596b9&&_0xb596b9['startsWith'](_0x524bf1['ecbfi'])){_0x3ebff0[_0x3899cd(-0x14d,-0x20f,-0x1ce,-0x151)]=_0xb596b9,_0x3ebff0[_0x3899cd(-0xc3,-0x13e,-0x128,-0xae)][_0x3899cd(-0x122,-0x1d2,-0x153,-0x1d5)]='block',_0x53eee5['style'][_0x235593(-0x2d,0x18,-0x6c,0x36)]=_0x524bf1[_0x235593(-0x57,0x23,0x15,-0x35)],_0x6e4b41[_0x3899cd(-0xb9,-0x158,-0x128,-0xa8)][_0x3899cd(-0x135,-0xe2,-0x153,-0xe7)]=_0x524bf1[_0x3899cd(-0x16e,-0x18c,-0x1d6,-0x1fb)];const _0x5c0cb2=_0xb596b9[_0x3899cd(-0x206,-0x147,-0x196,-0x130)](','),_0x2c4aa7=_0x5c0cb2[0x1*0x89e+-0x1adc*-0x1+-0x2*0x11bd][_0x235593(-0x70,-0x30,-0xae,-0xba)](':')[0x1267+0x13c0*-0x1+0x15a][_0x235593(-0x70,0x4,-0x7a,-0x5)](';')[-0x8b*0x13+0x17eb+0x2*-0x6cd];nai3VibeTransferImageMimeType=_0x2c4aa7,window[_0x3899cd(-0x116,-0x186,-0x120,-0x191)+_0x235593(-0x5b,-0x9,-0xac,-0x8b)+'e']=_0x5c0cb2[-0x7e7*0x3+0x11d4*-0x1+0x14c5*0x2];const _0x5a7cbe={};_0x5a7cbe['id']=NAI_VIBE_CACHE_KEY,_0x5a7cbe[_0x235593(-0xf,-0xd,-0x57,-0x1b)]=_0xb596b9,dbs[_0x3899cd(-0x192,-0x152,-0x111,-0xb5)+_0x3899cd(-0x13e,-0x163,-0x1b9,-0x1ef)](_0x5a7cbe);}else{if(_0x524bf1[_0x3899cd(-0x1c6,-0x103,-0x176,-0x115)]!==_0x235593(-0xc6,-0xe3,-0xbb,-0x77)){const _0x529d0f=_0x524bf1[_0x3899cd(-0x174,-0x181,-0x158,-0x1c5)][_0x235593(-0x70,0xf,-0x54,-0x61)]('|');let _0x38bcdb=0xd*-0x139+-0x44*0x6e+0x2d1d;while(!![]){switch(_0x529d0f[_0x38bcdb++]){case'0':_0x6e4b41[_0x3899cd(-0xe6,-0xa4,-0x128,-0x14e)][_0x3899cd(-0x111,-0x131,-0x153,-0x129)]='none';continue;case'1':window[_0x3899cd(-0x15a,-0x15f,-0x120,-0xcc)+_0x235593(-0x5b,0x2d,-0x8a,-0x88)+'e']=null;continue;case'2':_0x3ebff0[_0x3899cd(-0x121,-0x13e,-0x128,-0x124)][_0x235593(-0x2d,-0x46,0x59,-0xa7)]=_0x524bf1['mjtwU'];continue;case'3':_0x53eee5['style'][_0x3899cd(-0xfd,-0x195,-0x153,-0x181)]='flex';continue;case'4':_0x3ebff0[_0x235593(-0xa8,-0x1f,-0x11b,-0x2d)]='';continue;}break;}}else _0x524bf1[_0x3899cd(-0x1a0,-0x15e,-0x15f,-0x183)](_0x2bf887);}}function removeNovelaiImage(){function _0x9d1650(_0x274163,_0x134e26,_0x5ed2cc,_0x17058c){return _0x8a4e9d(_0x5ed2cc,_0x134e26-0x108,_0x5ed2cc-0x17d,_0x17058c-0x4d4);}const _0x161ca4={'Npmau':function(_0x365dcf,_0x43daea){return _0x365dcf(_0x43daea);}};_0x161ca4[_0x9d1650(0x2c6,0x2e7,0x317,0x2a3)](updateNovelaiImagePreview,null),dbs['storeDelet'+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x28e43d){const _0x596b8c={'DRzIP':function(_0x3e7a83,_0x32e78c,_0x558c58){return _0x3e7a83(_0x32e78c,_0x558c58);},'FTotC':function(_0x301986,_0x377369){return _0x301986(_0x377369);},'SOPaD':'Error\x20proc'+_0xe06a07(-0x7d,-0xc8,-0x15b,-0xe1)+_0x34c203(0x79,0x40,0xbc,0x12b)+':','hpjML':'图片处理失败:\x20'};function _0x34c203(_0x39917f,_0x9cb88,_0x2e48db,_0x5c6d78){return _0xdc39c5(_0x2e48db-0xc6,_0x39917f,_0x2e48db-0x6c,_0x5c6d78-0x198);}function _0xe06a07(_0xa53dfa,_0x5182eb,_0x3335e5,_0x19e415){return _0xdc39c5(_0x19e415- -0xdb,_0x3335e5,_0x3335e5-0x3,_0x19e415-0x117);}const _0xf86098=_0x28e43d['target']['files'][0x11c*0x17+-0x1b*-0x33+0x1ee5*-0x1];if(!_0xf86098)return;try{const _0x100ea7=await _0x596b8c[_0x34c203(0x56,0x120,0xc6,0x9d)](processUploadedImage,_0xf86098,!![]);_0x596b8c['FTotC'](updateNovelaiImagePreview,_0x100ea7);}catch(_0x137b45){console[_0x34c203(0x13a,0x1b7,0x18c,0x16e)](_0x596b8c[_0x34c203(0x116,0x1df,0x174,0x181)],_0x137b45),_0x596b8c[_0xe06a07(-0x93,-0x3c,0x53,-0x13)](alert,_0x596b8c[_0xe06a07(-0xc5,0x0,-0x20,-0x78)]+_0x137b45['message']);}}function updateNovelaiCharRefImagePreview(_0x233a27){const _0x21e0ab={};_0x21e0ab['ZBtih']=_0x29ce30(0x3de,0x425,0x3f6,0x3e8)+_0x29ce30(0x43a,0x45a,0x40b,0x3e4),_0x21e0ab['nRHth']=_0x1c8402(0x18a,0x22f,0x206,0x1b2)+_0x1c8402(0x1f2,0x1d3,0x260,0x1dd)+_0x29ce30(0x444,0x4a5,0x476,0x493)+_0x29ce30(0x44f,0x424,0x4b9,0x44f)+_0x29ce30(0x48b,0x45b,0x41e,0x44d)+'placeholde'+'r';function _0x1c8402(_0x10aa22,_0x57017d,_0x36d947,_0x4c28c3){return _0xdc39c5(_0x4c28c3-0x18d,_0x57017d,_0x36d947-0x191,_0x4c28c3-0x164);}_0x21e0ab['yrLkn']=_0x1c8402(0x1b7,0x132,0x1ff,0x19b),_0x21e0ab['NTzCo']=function(_0xbf852d,_0x4425e6){return _0xbf852d!==_0x4425e6;},_0x21e0ab[_0x1c8402(0x1ac,0x132,0x128,0x1a8)]=_0x29ce30(0x443,0x4b1,0x488,0x4b2),_0x21e0ab['GwKom']=_0x1c8402(0x1fb,0x246,0x21c,0x219),_0x21e0ab[_0x1c8402(0x196,0x232,0x1b3,0x21d)]=_0x1c8402(0x1a0,0x120,0x125,0x182)+'x',_0x21e0ab[_0x29ce30(0x48d,0x4ae,0x45e,0x48b)]='flex',_0x21e0ab['mjuIV']=_0x1c8402(0x170,0x16c,0x150,0x1c0)+_0x1c8402(0x152,0x228,0x16e,0x1a5)+_0x29ce30(0x404,0x431,0x42b,0x3ec),_0x21e0ab[_0x1c8402(0x165,0x175,0x187,0x1c6)]='#novelai-c'+_0x1c8402(0x268,0x1f3,0x1fe,0x1f7)+_0x29ce30(0x3ac,0x357,0x32a,0x363)+'w-containe'+'r\x20.st-chat'+_0x1c8402(0x19f,0x250,0x238,0x202)+'laceholder',_0x21e0ab['pZdwU']=_0x29ce30(0x3c5,0x3b7,0x370,0x417),_0x21e0ab[_0x29ce30(0x3e0,0x3ca,0x468,0x3e5)]=_0x29ce30(0x3b1,0x3ed,0x364,0x42c),_0x21e0ab[_0x29ce30(0x40b,0x494,0x384,0x47d)]=_0x1c8402(0x281,0x248,0x27b,0x221);const _0x1b4571=_0x21e0ab,_0x4a4849=document[_0x1c8402(0x240,0x279,0x209,0x20e)+'ById'](_0x1b4571[_0x1c8402(0x2e0,0x2d7,0x1e5,0x259)]);function _0x29ce30(_0x419d97,_0x1a8997,_0x11c270,_0x4dffff){return _0x8a4e9d(_0x11c270,_0x1a8997-0xf0,_0x11c270-0xe1,_0x419d97-0x5c8);}const _0xd129e7=document['querySelec'+'tor'](_0x1b4571[_0x29ce30(0x3e4,0x426,0x36f,0x365)]),_0x42fda9=document[_0x29ce30(0x42c,0x3c3,0x3b2,0x44f)+_0x1c8402(0x15e,0x25e,0x1c0,0x1e4)](_0x29ce30(0x470,0x4a2,0x404,0x415)+_0x1c8402(0x1a4,0x1a2,0x21f,0x1c4)+_0x1c8402(0x17b,0x143,0x14f,0x1a6)+_0x1c8402(0x19e,0x284,0x1bd,0x214));if(_0x233a27&&_0x233a27['startsWith'](_0x1b4571[_0x29ce30(0x408,0x48e,0x41f,0x409)])){_0x4a4849[_0x1c8402(0x1dc,0x15e,0x12d,0x1b4)]=_0x233a27,_0x4a4849['style'][_0x29ce30(0x44d,0x3ef,0x451,0x4cf)]=_0x1b4571[_0x1c8402(0x156,0x18d,0x228,0x1a8)],_0xd129e7[_0x29ce30(0x478,0x496,0x490,0x430)][_0x29ce30(0x44d,0x435,0x449,0x481)]=_0x29ce30(0x437,0x425,0x3ce,0x450),_0x42fda9['style']['display']=_0x1b4571[_0x1c8402(0x233,0x1c2,0x20a,0x21d)];const _0x256145=_0x233a27[_0x1c8402(0x22e,0x188,0x1ec,0x1ec)](','),_0x583e0d=_0x256145[0xb5*-0x2b+0x148c+0x9db][_0x1c8402(0x1e7,0x239,0x166,0x1ec)](':')[-0x2*0x58c+-0x7b4+-0x12cd*-0x1][_0x1c8402(0x203,0x1d0,0x21a,0x1ec)](';')[0x1879*-0x1+0x22d+0x2*0xb26];nai3CharRefImageMimeType=_0x583e0d,window[_0x1c8402(0x2a9,0x1f0,0x297,0x233)+_0x1c8402(0x167,0x207,0x1dc,0x1be)]=_0x256145[-0xea*0x1+-0x249e+-0xc83*-0x3];const _0x3a8161={};_0x3a8161['id']=NAI_CHAR_REF_CACHE_KEY,_0x3a8161[_0x1c8402(0x1d1,0x2b5,0x2c6,0x24d)]=_0x233a27,dbs[_0x1c8402(0x206,0x20d,0x284,0x271)+_0x29ce30(0x3e7,0x432,0x451,0x3ab)](_0x3a8161);}else{if(_0x1b4571[_0x1c8402(0x1b5,0x1ad,0x15d,0x1c2)]===_0x1b4571[_0x29ce30(0x3e0,0x3c1,0x41a,0x3bc)]){const _0x1a231e=_0x1b4571[_0x1c8402(0x167,0x251,0x249,0x1ed)][_0x29ce30(0x40a,0x42e,0x451,0x3fb)]('|');let _0x5a500d=-0x1*-0x7c7+-0x2*-0x1e+0x7*-0x125;while(!![]){switch(_0x1a231e[_0x5a500d++]){case'0':_0xd129e7[_0x29ce30(0x478,0x4da,0x45d,0x4d3)][_0x29ce30(0x44d,0x410,0x483,0x3f0)]=_0x1c8402(0x27a,0x216,0x224,0x21a);continue;case'1':window['nai3CharRe'+'fImage']=null;continue;case'2':_0x42fda9[_0x29ce30(0x478,0x47a,0x41c,0x454)]['display']=_0x1b4571[_0x1c8402(0x26d,0x207,0x271,0x26e)];continue;case'3':_0x4a4849[_0x29ce30(0x478,0x41f,0x437,0x4ce)][_0x1c8402(0x22b,0x22e,0x29c,0x22f)]=_0x1b4571[_0x29ce30(0x48c,0x452,0x4c3,0x4dc)];continue;case'4':_0x4a4849[_0x1c8402(0x1ac,0x188,0x1fc,0x1b4)]='';continue;}break;}}else{const _0x24925d=_0x3cf5bb[_0x29ce30(0x42c,0x436,0x427,0x478)+_0x29ce30(0x402,0x46b,0x37f,0x3cb)](_0x1b4571[_0x1c8402(0x1bd,0x273,0x298,0x239)]),_0x4c74ca=_0x144d20[_0x1c8402(0x20c,0x143,0x20a,0x1c8)+_0x29ce30(0x493,0x49b,0x4c1,0x4c4)](_0x1b4571[_0x1c8402(0x200,0x2d8,0x212,0x25b)]),_0x55dda8=_0x47655a['getElement'+_0x1c8402(0x269,0x22b,0x1e7,0x1e4)](_0x29ce30(0x410,0x448,0x40d,0x3c5)+'move-image'+_0x29ce30(0x3a9,0x36f,0x359,0x360));_0x24925d[_0x29ce30(0x3d2,0x415,0x403,0x416)]&&_0x24925d[_0x29ce30(0x3d2,0x3b9,0x371,0x3d2)]['startsWith'](_0x1b4571[_0x29ce30(0x38f,0x337,0x367,0x34a)])&&_0x1b4571[_0x29ce30(0x3c9,0x3a2,0x401,0x451)](_0x24925d[_0x29ce30(0x3d2,0x444,0x43d,0x42f)],_0x44d574)&&_0x105d03[_0x1c8402(0x1f5,0x11c,0x1fd,0x176)+_0x29ce30(0x3f4,0x475,0x3a0,0x3cb)](_0x24925d[_0x29ce30(0x3d2,0x452,0x3d9,0x398)]),_0x3d1b9f?(_0x24925d[_0x1c8402(0x1eb,0x173,0x1c2,0x1b4)]=_0x2d9dfa,_0x24925d['style'][_0x29ce30(0x44d,0x422,0x46d,0x448)]=_0x1b4571[_0x1c8402(0x208,0x140,0x175,0x1a8)],_0x4c74ca['style'][_0x29ce30(0x44d,0x4c2,0x3db,0x427)]=_0x1b4571[_0x1c8402(0x284,0x2ac,0x23f,0x26e)],_0x55dda8[_0x1c8402(0x2d5,0x253,0x275,0x25a)][_0x29ce30(0x44d,0x4d0,0x449,0x4d4)]=_0x1b4571[_0x1c8402(0x1fe,0x26a,0x1af,0x21d)]):(_0x24925d[_0x1c8402(0x12e,0x205,0x13d,0x1b4)]='',_0x24925d[_0x1c8402(0x20a,0x258,0x245,0x25a)][_0x1c8402(0x25c,0x289,0x1c6,0x22f)]=_0x1b4571[_0x29ce30(0x48c,0x500,0x44b,0x452)],_0x4c74ca[_0x29ce30(0x478,0x449,0x467,0x43b)]['display']=_0x1b4571[_0x1c8402(0x241,0x23d,0x22a,0x26f)],_0x55dda8[_0x29ce30(0x478,0x4e6,0x455,0x439)][_0x1c8402(0x24c,0x200,0x27e,0x22f)]=_0x1b4571[_0x1c8402(0x202,0x25c,0x29a,0x26e)],_0x145f64[_0x1c8402(0x12a,0x131,0x173,0x169)+_0x1c8402(0x224,0x1c7,0x2b2,0x24c)]=null,_0x19a231=null);}}}function removeNovelaiCharRefImage(){const _0x118cbd={'aGdVI':function(_0x3238bc,_0x5b775f){return _0x3238bc(_0x5b775f);}};function _0xf052f2(_0xf40df3,_0x22ca86,_0xf755cd,_0x25a4dd){return _0xdc39c5(_0x25a4dd- -0x2a8,_0x22ca86,_0xf755cd-0x21,_0x25a4dd-0x3d);}function _0x506833(_0x45f0f7,_0x272529,_0x7d751a,_0x5eff93){return _0xdc39c5(_0x5eff93-0x479,_0x45f0f7,_0x7d751a-0x188,_0x5eff93-0x154);}_0x118cbd[_0xf052f2(-0x205,-0x24e,-0x26d,-0x268)](updateNovelaiCharRefImagePreview,null),dbs[_0xf052f2(-0x229,-0x1f7,-0x22a,-0x267)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x38593c){function _0x11b55a(_0x715895,_0x29c296,_0x151e69,_0xa54187){return _0xdc39c5(_0x715895-0x2b4,_0x151e69,_0x151e69-0x67,_0xa54187-0x18f);}const _0x57cf86={'zIHeD':function(_0x3dfc2a,_0x5d3e61){return _0x3dfc2a(_0x5d3e61);},'dqRlF':function(_0x237e63,_0x4c30b5){return _0x237e63(_0x4c30b5);},'eXgna':_0x44a3eb(0x312,0x32c,0x2ac,0x2ee)+_0x44a3eb(0x2f0,0x22b,0x21a,0x293)+_0x11b55a(0x385,0x32c,0x34f,0x326)+'ref\x20image:','qmYlR':function(_0x544817,_0x3dc33c){return _0x544817+_0x3dc33c;},'zTYoM':'图片处理失败:\x20'};function _0x44a3eb(_0x168621,_0x8e5dfe,_0x2d4854,_0x4ac234){return _0x8a4e9d(_0x168621,_0x8e5dfe-0x84,_0x2d4854-0x1c1,_0x4ac234-0x4b6);}const _0x4a88d9=_0x38593c['target'][_0x11b55a(0x308,0x353,0x329,0x299)][-0xc8c+-0x7*0x1b7+0x188d];if(!_0x4a88d9)return;try{const _0x28edcc=await _0x57cf86['zIHeD'](processUploadedImage,_0x4a88d9);_0x57cf86[_0x44a3eb(0x2ce,0x2e0,0x321,0x30c)](updateNovelaiCharRefImagePreview,_0x28edcc);}catch(_0x1fc640){console['error'](_0x57cf86['eXgna'],_0x1fc640),_0x57cf86[_0x11b55a(0x38a,0x3da,0x321,0x355)](alert,_0x57cf86['qmYlR'](_0x57cf86[_0x44a3eb(0x30e,0x2d2,0x39b,0x31d)],_0x1fc640['message']));}}function updateComfyUIImagePreview(_0x2afaf7){const _0x466201={};_0x466201['IEzxT']=_0x381140(-0x25,-0x65,-0x22,-0x5e)+_0x5d7b5a(-0x19e,-0x20d,-0x21b,-0x1d3)+_0x5d7b5a(-0x188,-0x1c4,-0x1bc,-0x24a)+_0x5d7b5a(-0x187,-0x1b9,-0x22e,-0x159)+_0x5d7b5a(-0x1f6,-0x17d,-0x201,-0x106)+_0x381140(-0x6d,-0xd7,-0x69,-0xc3)+'r',_0x466201[_0x381140(-0x1a,-0x6c,0x22,-0x69)]=_0x5d7b5a(-0x194,-0x1f8,-0x1e4,-0x272)+'move-image'+_0x5d7b5a(-0x221,-0x25f,-0x250,-0x29d);function _0x5d7b5a(_0xcf37ec,_0x233ca2,_0xadcca2,_0x5c53ee){return _0xdc39c5(_0x233ca2- -0x25d,_0xadcca2,_0xadcca2-0x6d,_0x5c53ee-0x7b);}_0x466201[_0x5d7b5a(-0x1bf,-0x1a0,-0x1da,-0x1a0)]=_0x5d7b5a(-0x2c3,-0x24f,-0x2bd,-0x263),_0x466201[_0x381140(0x68,0xc1,0xeb,0xb5)]=function(_0x34a738,_0x1decba){return _0x34a738!==_0x1decba;};function _0x381140(_0x50eab5,_0x434262,_0x92cf2a,_0x114cb6){return _0x8a4e9d(_0x92cf2a,_0x434262-0x61,_0x92cf2a-0x143,_0x50eab5-0x1d3);}_0x466201['Ucfvd']=_0x5d7b5a(-0x1fd,-0x1c5,-0x18a,-0x145),_0x466201['flncN']=_0x381140(-0x55,-0x85,-0x37,0x33)+'x',_0x466201[_0x5d7b5a(-0x16f,-0x18d,-0x172,-0x110)]=_0x5d7b5a(-0x14e,-0x1d1,-0x15e,-0x1c2);const _0x23893f=_0x466201,_0xb465c8=document[_0x5d7b5a(-0x23d,-0x1dc,-0x1b2,-0x261)+_0x381140(0xd,-0x56,0xf,-0x77)](_0x5d7b5a(-0x223,-0x22a,-0x227,-0x253)+_0x381140(0x45,0x3a,0x85,0x1d)),_0x3f7e6e=document['querySelec'+_0x381140(0x9e,0xf7,0xa2,0x3c)](_0x23893f[_0x5d7b5a(-0x20d,-0x21e,-0x21d,-0x2a0)]),_0x487181=document[_0x381140(0x37,0xb2,0x5,0x3d)+_0x5d7b5a(-0x1ba,-0x206,-0x1dd,-0x210)](_0x23893f[_0x5d7b5a(-0x254,-0x22d,-0x238,-0x202)]);_0xb465c8[_0x5d7b5a(-0x24c,-0x236,-0x1ed,-0x27c)]&&_0xb465c8[_0x381140(-0x23,-0x30,0x34,-0x75)][_0x381140(0x92,0xf5,0xa3,0xb2)](_0x23893f[_0x381140(0x73,0xc8,0x5c,0x6c)])&&_0x23893f[_0x5d7b5a(-0x1b1,-0x1ab,-0x1c1,-0x19d)](_0xb465c8[_0x5d7b5a(-0x276,-0x236,-0x2ab,-0x1f5)],_0x2afaf7)&&URL[_0x5d7b5a(-0x25f,-0x274,-0x2f4,-0x204)+_0x381140(-0x1,-0xf,0x2c,-0x1c)](_0xb465c8[_0x381140(-0x23,-0x21,0x0,0x4b)]),_0x2afaf7?(_0xb465c8[_0x381140(-0x23,-0x50,-0x5a,0x15)]=_0x2afaf7,_0xb465c8[_0x5d7b5a(-0x215,-0x190,-0x188,-0x1fb)][_0x5d7b5a(-0x1c9,-0x1bb,-0x1f3,-0x174)]=_0x23893f['Ucfvd'],_0x3f7e6e[_0x381140(0x83,0xdc,0x57,0x41)][_0x381140(0x58,0xba,-0xc,0x21)]=_0x381140(0x42,-0x24,0x72,0x61),_0x487181[_0x381140(0x83,0x4b,0x6a,0x60)]['display']=_0x23893f[_0x5d7b5a(-0x243,-0x260,-0x2d8,-0x2a5)]):(_0xb465c8[_0x5d7b5a(-0x263,-0x236,-0x26d,-0x28c)]='',_0xb465c8[_0x381140(0x83,0x13,0x51,0xca)]['display']=_0x381140(0x42,0x10,0xd,0x19),_0x3f7e6e[_0x381140(0x83,0x9,0xf6,0xfc)][_0x5d7b5a(-0x1ec,-0x1bb,-0x1b8,-0x201)]='flex',_0x487181['style'][_0x381140(0x58,0x4f,0x16,0xb0)]=_0x23893f[_0x5d7b5a(-0x171,-0x18d,-0x123,-0x1df)],window[_0x5d7b5a(-0x257,-0x281,-0x250,-0x250)+_0x381140(0x75,0xa0,0xca,0x91)]=null,comfyuiImageObjectURL=null);}function _0xdc39c5(_0x1d72a4,_0x5ccd05,_0x238799,_0x5694ac){return _0x3b96(_0x1d72a4- -0xd5,_0x5ccd05);}function _0x8a4e9d(_0x109937,_0x260ab5,_0x54d830,_0x52c298){return _0x3b96(_0x52c298- -0x2f2,_0x109937);}function _0x3b96(_0x5380fe,_0x3b001e){_0x5380fe=_0x5380fe-(-0x22a9+-0x1*0x1a74+0x3dcb);const _0x487dad=_0x3384();let _0x487e18=_0x487dad[_0x5380fe];if(_0x3b96['kkHkmM']===undefined){var _0x95d007=function(_0x381487){const _0x466314='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1b57a7='',_0x59c400='',_0x450545=_0x1b57a7+_0x95d007;for(let _0x956019=0x9c0+0x59a+-0x3*0x51e,_0x9beb5b,_0x3e9cd7,_0x2fe80f=0x61f+-0x23a7*-0x1+0x29c6*-0x1;_0x3e9cd7=_0x381487['charAt'](_0x2fe80f++);~_0x3e9cd7&&(_0x9beb5b=_0x956019%(0x1897+0x2279+-0x3b0c)?_0x9beb5b*(-0x270b+-0x1f2b+0x4676)+_0x3e9cd7:_0x3e9cd7,_0x956019++%(0x239*-0xa+-0x305*-0x3+0x87*0x19))?_0x1b57a7+=_0x450545['charCodeAt'](_0x2fe80f+(0x12e6+0x572*-0x1+0xd6a*-0x1))-(-0x1*-0x4dc+0x1579+-0x1a4b)!==0x2c*0x89+0x18d6+0x16*-0x233?String['fromCharCode'](0x8b*-0x30+0x19ba+0x155&_0x9beb5b>>(-(-0x5*-0x239+-0x4*0x224+-0x3*0xd9)*_0x956019&-0x419+0x1*-0x183a+0x1c59)):_0x956019:0x7fc+0x1*-0x141b+0xc1f){_0x3e9cd7=_0x466314['indexOf'](_0x3e9cd7);}for(let _0x56b314=0x5*-0x1f2+-0x13d4*-0x1+0x2*-0x50d,_0x3de6e1=_0x1b57a7['length'];_0x56b314<_0x3de6e1;_0x56b314++){_0x59c400+='%'+('00'+_0x1b57a7['charCodeAt'](_0x56b314)['toString'](0x9df+0x158c*-0x1+0xbbd))['slice'](-(0x245a+-0x6d*-0x16+-0x2db6));}return decodeURIComponent(_0x59c400);};_0x3b96['lZzdTp']=_0x95d007,_0x3b96['crciJc']={},_0x3b96['kkHkmM']=!![];}const _0x510126=_0x487dad[0x1de5+0xd*0x1be+-0x348b],_0x3e1bde=_0x5380fe+_0x510126,_0x3d2002=_0x3b96['crciJc'][_0x3e1bde];if(!_0x3d2002){const _0x40d059=function(_0x1db798){this['RlMVjk']=_0x1db798,this['qVDOqk']=[0x1*0x12e+-0x2*-0xb1b+-0x1763,-0x1ad5+-0xba0+-0x2675*-0x1,0x40c+-0x19b4+0x15a8],this['DuJYve']=function(){return'newState';},this['XaTnPs']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['tasdpn']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x40d059['prototype']['eYJjQJ']=function(){const _0x31d336=new RegExp(this['XaTnPs']+this['tasdpn']),_0x2978e2=_0x31d336['test'](this['DuJYve']['toString']())?--this['qVDOqk'][0x7*0x29+0x267d+0x279b*-0x1]:--this['qVDOqk'][-0x1093+-0xf93+-0x2026*-0x1];return this['uaIJNz'](_0x2978e2);},_0x40d059['prototype']['uaIJNz']=function(_0x277a4a){if(!Boolean(~_0x277a4a))return _0x277a4a;return this['CdVwJZ'](this['RlMVjk']);},_0x40d059['prototype']['CdVwJZ']=function(_0x5cd487){for(let _0x1a747f=-0x268c+0x1b98*-0x1+0x4224,_0x15f91d=this['qVDOqk']['length'];_0x1a747f<_0x15f91d;_0x1a747f++){this['qVDOqk']['push'](Math['round'](Math['random']())),_0x15f91d=this['qVDOqk']['length'];}return _0x5cd487(this['qVDOqk'][-0x4b*0x49+-0xa2d+0x1f90]);},new _0x40d059(_0x3b96)['eYJjQJ'](),_0x487e18=_0x3b96['lZzdTp'](_0x487e18),_0x3b96['crciJc'][_0x3e1bde]=_0x487e18;}else _0x487e18=_0x3d2002;return _0x487e18;}function removeComfyUIImage(){const _0x2fed8f={'ZVKxY':function(_0x20a9cd,_0x5c1ff8){return _0x20a9cd(_0x5c1ff8);}};_0x2fed8f['ZVKxY'](updateComfyUIImagePreview,null),dbs['storeDelet'+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x31275d){const _0x4e7928={'MQJzU':function(_0x4397bc,_0x8afecd){return _0x4397bc(_0x8afecd);},'JTWdp':'byHAY','mJAuL':_0x62909(0x3ed,0x367,0x39d,0x3d3),'aqvQg':function(_0x5b2ff3,_0x57e817){return _0x5b2ff3(_0x57e817);},'hRDfl':function(_0x4dfffe,_0x4e4cf1){return _0x4dfffe(_0x4e4cf1);},'PYzli':'image','wvYoc':function(_0xe2ca60){return _0xe2ca60();},'YJpCm':'POST','bQIca':function(_0x3b459f,_0xc18bac){return _0x3b459f(_0xc18bac);},'bKkrM':function(_0x459fb9,_0x2833f9){return _0x459fb9+_0x2833f9;},'EWzhi':_0x62909(0x427,0x462,0x431,0x443),'geTTz':'错误详情:','GVhxh':function(_0x53897d,_0x2440b5){return _0x53897d+_0x2440b5;},'srQJN':_0x38d962(0x2aa,0x349,0x2e8,0x2fc)+':\x20'};function _0x62909(_0x37b86f,_0x5a93b6,_0x18623a,_0xd5f290){return _0xdc39c5(_0x37b86f-0x3a9,_0x18623a,_0x18623a-0x6a,_0xd5f290-0x133);}const _0x4b79e9=extension_settings[extensionName],_0x2958bd=_0x31275d[_0x62909(0x41f,0x428,0x495,0x427)][_0x38d962(0x25e,0x28a,0x255,0x29b)][-0x1*0x129d+-0x905*-0x1+0x998*0x1];function _0x38d962(_0x2eccdf,_0x353586,_0x2f1a19,_0x5a087c){return _0x8a4e9d(_0x353586,_0x353586-0xc,_0x2f1a19-0x1be,_0x5a087c-0x464);}if(!_0x2958bd)return;try{if(_0x4e7928[_0x62909(0x488,0x422,0x49e,0x495)]===_0x4e7928[_0x38d962(0x292,0x2b3,0x35f,0x311)])_0x4e7928[_0x38d962(0x25e,0x299,0x250,0x2d0)](_0x15d7f1,null),_0x87a185['storeDelet'+'e'](_0x3cdf5b);else{const _0x898277=await _0x4e7928['aqvQg'](processUploadedImageToBlob,_0x2958bd),_0xbc4f0e=URL[_0x38d962(0x388,0x345,0x32c,0x325)+_0x62909(0x3f2,0x36e,0x406,0x47a)](_0x898277);comfyuiImageObjectURL=_0xbc4f0e,_0x4e7928[_0x62909(0x426,0x49a,0x494,0x48d)](updateComfyUIImagePreview,_0xbc4f0e);const _0x1d078a=new FormData();_0x1d078a[_0x62909(0x388,0x3e1,0x37f,0x3eb)](_0x4e7928['PYzli'],_0x898277,_0x2958bd['name']);let _0x273326=_0x4b79e9[_0x38d962(0x237,0x243,0x280,0x28f)]['trim']();if(!_0x273326){_0x4e7928[_0x38d962(0x2d5,0x32b,0x2d5,0x2d0)](alert,_0x62909(0x398,0x37f,0x3cb,0x377)+'I\x20API地址。'),_0x4e7928[_0x38d962(0x30c,0x345,0x361,0x330)](removeComfyUIImage);return;}const _0x3a92bf={};_0x3a92bf['method']=_0x4e7928[_0x62909(0x403,0x3f1,0x40b,0x470)],_0x3a92bf[_0x38d962(0x33c,0x2bd,0x2e6,0x2fd)]=_0x1d078a;const _0x1494dd=await fetch(_0x273326+(_0x38d962(0x235,0x256,0x204,0x243)+_0x38d962(0x311,0x31b,0x37d,0x32c)),_0x3a92bf);if(_0x1494dd['ok']){const _0x373123=await _0x1494dd['json']();window[_0x38d962(0x1fe,0x22a,0x26e,0x223)+_0x38d962(0x2e8,0x345,0x32e,0x306)]=_0x373123[_0x62909(0x3b5,0x333,0x336,0x342)],_0x4e7928[_0x62909(0x391,0x32f,0x356,0x3b6)](addLog,_0x38d962(0x23e,0x1ed,0x1e7,0x23e)+_0x38d962(0x2c0,0x210,0x248,0x264)+JSON['stringify'](_0x373123)),console['log'](_0x38d962(0x230,0x204,0x2c6,0x25e)+'回数据:',_0x373123);const _0x2d290e=new FileReader();_0x2d290e[_0x38d962(0x2b0,0x299,0x2e4,0x2f1)]=()=>{const _0x55069a=_0x2d290e[_0x531850(-0x18e,-0x212,-0x1c0,-0x18c)],_0x4e7e44={};_0x4e7e44['data']=_0x55069a,_0x4e7e44[_0x4b1717(-0x2f9,-0x2a4,-0x2c2,-0x326)+_0x531850(-0x1c8,-0x247,-0x1fc,-0x208)]=_0x373123[_0x531850(-0x2f0,-0x26a,-0x2d4,-0x28f)];const _0x87637e=_0x4e7e44;function _0x4b1717(_0x22ce99,_0x5226df,_0x4e94d0,_0x334bdd){return _0x38d962(_0x22ce99-0x45,_0x334bdd,_0x4e94d0-0x7a,_0x5226df- -0x4ef);}const _0x164a02={};_0x164a02['id']=COMFYUI_REF_CACHE_KEY;function _0x531850(_0x529710,_0x4a8043,_0x50e928,_0x159915){return _0x38d962(_0x529710-0x14a,_0x529710,_0x50e928-0x1d3,_0x4a8043- -0x4bd);}_0x164a02['data']=_0x87637e,dbs[_0x4b1717(-0x200,-0x1c4,-0x1ba,-0x19e)+_0x531850(-0x209,-0x23a,-0x1de,-0x23f)](_0x164a02);},_0x2d290e[_0x38d962(0x2d7,0x268,0x24e,0x251)+'URL'](_0x898277);}else{const _0x284870=await _0x1494dd[_0x62909(0x417,0x480,0x498,0x441)]();_0x4e7928[_0x38d962(0x354,0x29c,0x2a1,0x2d0)](alert,_0x4e7928['bKkrM'](_0x4e7928[_0x38d962(0x28e,0x21f,0x2aa,0x239)],_0x284870)),_0x4e7928['hRDfl'](addLog,'图片上传失败,\x20错误'+_0x38d962(0x2e5,0x285,0x338,0x2c2)+_0x284870),console['error'](_0x4e7928[_0x38d962(0x25b,0x286,0x2a6,0x231)],_0x284870),removeComfyUIImage();}}}catch(_0x1d2b46){_0x4e7928['aqvQg'](alert,_0x4e7928[_0x38d962(0x2e9,0x2a9,0x318,0x2a8)](_0x4e7928[_0x62909(0x450,0x423,0x3de,0x4d0)],_0x1d2b46[_0x62909(0x420,0x455,0x47b,0x487)])),console[_0x62909(0x46f,0x4e3,0x40f,0x471)](_0x62909(0x45e,0x4d3,0x3eb,0x458)+':',_0x1d2b46),_0x4e7928['hRDfl'](addLog,_0x62909(0x47b,0x4a4,0x4e8,0x49f)+_0x62909(0x424,0x3d1,0x463,0x3e3)+JSON['stringify'](_0x1d2b46)),_0x4e7928[_0x38d962(0x385,0x30c,0x354,0x330)](removeComfyUIImage);}}async function loadCachedImages(){function _0x173282(_0xec3b22,_0x5a34c9,_0x32e0c6,_0x495229){return _0x8a4e9d(_0x495229,_0x5a34c9-0x52,_0x32e0c6-0x1c5,_0xec3b22-0x636);}const _0x53726e={'aiFLe':_0x23b7d9(-0xdc,-0x7c,-0x5a,-0x57)+_0x173282(0x431,0x4a7,0x412,0x48c)+'r_ref','BWVgL':_0x173282(0x457,0x465,0x466,0x437)+_0x173282(0x483,0x4f3,0x415,0x47d)+_0x173282(0x41a,0x431,0x3f4,0x3d5)+_0x23b7d9(-0x2c,-0xa5,-0xa,-0x7f)+'r\x20.st-chat'+_0x173282(0x48e,0x50e,0x473,0x4c2)+_0x173282(0x47f,0x4e6,0x449,0x419),'BFyfB':_0x23b7d9(-0x4a,-0xb6,-0x91,-0x31)+_0x23b7d9(-0xd8,-0x59,-0x70,-0x9e)+_0x23b7d9(-0xf6,-0x92,-0x15e,-0x175)+_0x173282(0x4a0,0x46e,0x460,0x51b),'kYNSI':_0x23b7d9(-0xf5,-0x89,-0xd8,-0x115),'CwPrE':'block','WGZui':_0x173282(0x40e,0x44b,0x3e8,0x3de)+'x','kqGmI':_0x23b7d9(-0x7c,-0xe8,-0x59,-0x8),'tNDHU':_0x173282(0x4a6,0x513,0x45c,0x50b),'Ucxtl':'none','TWBxj':_0x23b7d9(-0xba,-0x53,-0x5a,-0x9e)+_0x23b7d9(-0x115,-0x99,-0xcd,-0x16f)+_0x173282(0x4ea,0x51a,0x4f4,0x489)+_0x173282(0x414,0x390,0x3bf,0x412),'rwOCo':'图片处理失败:\x20','UOwQG':function(_0x5c7925,_0x8ab2ed){return _0x5c7925!==_0x8ab2ed;},'klemE':_0x23b7d9(-0x12e,-0x141,-0x147,-0x122),'mDRAK':_0x23b7d9(-0xad,-0xf2,-0xd6,-0x9d),'dRWth':function(_0x2c73ff,_0x23b8c3){return _0x2c73ff(_0x23b8c3);},'mhqSo':function(_0xdcc7a0,_0x261c00){return _0xdcc7a0===_0x261c00;},'KEDEq':function(_0x1f5fe1,_0x2d46ae){return _0x1f5fe1===_0x2d46ae;},'NGZDK':'TvPTp','SXmwc':_0x173282(0x4d2,0x49e,0x543,0x4d6),'cWjne':function(_0x17cc9c,_0x5e80dc){return _0x17cc9c(_0x5e80dc);},'XowRc':_0x173282(0x4e2,0x51e,0x514,0x53b)+_0x173282(0x3f9,0x3ff,0x3aa,0x439)+_0x173282(0x4d5,0x539,0x45e,0x551)+_0x23b7d9(-0x93,-0xce,-0xf9,-0xb8)+_0x173282(0x407,0x3d7,0x38b,0x3de),'PKXdw':function(_0x38027e,_0x37fa21){return _0x38027e(_0x37fa21);},'trCvq':_0x23b7d9(-0x62,-0x24,0x9,-0x73)+'fyUI\x20image'+_0x173282(0x4d7,0x4aa,0x507,0x4c3)+'cache\x20form'+_0x23b7d9(-0xed,-0x163,-0x128,-0xa4)+_0x23b7d9(-0x36,0x42,-0x18,-0x3)+_0x23b7d9(-0xe6,-0x14f,-0xfd,-0x14a)+_0x173282(0x482,0x43f,0x426,0x4dd)+_0x23b7d9(-0xe9,-0xde,-0x10f,-0xb8)+_0x23b7d9(-0x35,-0xb8,-0x96,-0x96),'CUTAB':'Error\x20load'+_0x23b7d9(-0x12f,-0xd7,-0xed,-0xbe)+_0x23b7d9(-0xcc,-0x98,-0x81,-0x46)+_0x173282(0x4dd,0x495,0x4d4,0x4c3)};await dbs['openDB']();try{if(_0x53726e[_0x23b7d9(-0x4e,0x34,-0x5f,-0xc8)](_0x53726e[_0x23b7d9(-0xff,-0x124,-0xe5,-0xf5)],'IxLzC')){const _0x17ba39=_0x510126['getElement'+_0x23b7d9(-0xb8,-0x94,-0x112,-0x5f)](_0x53726e[_0x23b7d9(-0x7e,-0x7e,-0xda,-0x1b)]),_0x87e277=_0x3e1bde['querySelec'+'tor'](_0x53726e[_0x23b7d9(-0xe2,-0x143,-0x62,-0xf8)]),_0x5a1829=_0x3d2002[_0x23b7d9(-0x8e,-0xca,-0x9d,-0x5d)+'ById'](_0x53726e[_0x173282(0x42e,0x3bf,0x461,0x4b2)]);if(_0x381487&&_0x466314[_0x23b7d9(-0x33,0x45,-0x78,-0x40)](_0x53726e[_0x173282(0x445,0x484,0x40f,0x463)])){_0x17ba39[_0x23b7d9(-0xe8,-0x155,-0x8a,-0x16f)]=_0x3de6e1,_0x17ba39['style'][_0x23b7d9(-0x6d,-0xe5,-0xd,-0x28)]=_0x53726e['CwPrE'],_0x87e277[_0x23b7d9(-0x42,-0xb8,-0x49,-0x8a)][_0x23b7d9(-0x6d,0x1a,0x1,-0x9f)]=_0x173282(0x4a5,0x513,0x519,0x4c0),_0x5a1829['style']['display']=_0x53726e[_0x173282(0x42b,0x42a,0x477,0x46b)];const _0x486546=_0x40d059[_0x23b7d9(-0xb0,-0x130,-0xe2,-0xd3)](','),_0x6f2010=_0x486546[-0x75b+-0x1918+-0x2073*-0x1][_0x173282(0x478,0x4d4,0x48b,0x4f3)](':')[-0x16d0+0x1fc*0xd+-0x1*0x2fb][_0x173282(0x478,0x4b8,0x416,0x472)](';')[0x2*0xb8f+0x1e04+-0x1*0x3522];_0x1db798=_0x6f2010,_0x31d336[_0x173282(0x4bf,0x50b,0x4a3,0x4e4)+_0x23b7d9(-0xde,-0x153,-0x15a,-0x12d)]=_0x486546[0x529*-0x7+0x109f+0x1381];const _0x559d7c={};_0x559d7c['id']=_0x277a4a,_0x559d7c[_0x173282(0x4d9,0x547,0x4b6,0x4ba)]=_0x5cd487,_0x2978e2[_0x173282(0x4fd,0x576,0x4ad,0x567)+'rite'](_0x559d7c);}else{const _0x1e8096=_0x53726e[_0x23b7d9(-0x67,-0x87,-0xa4,-0x65)][_0x173282(0x478,0x500,0x469,0x432)]('|');let _0x160b17=-0x1ee9*0x1+0x26f7+-0x407*0x2;while(!![]){switch(_0x1e8096[_0x160b17++]){case'0':_0x1a747f['nai3CharRe'+'fImage']=null;continue;case'1':_0x87e277[_0x23b7d9(-0x42,-0xc0,0x2a,-0x3b)][_0x173282(0x4bb,0x432,0x491,0x484)]=_0x53726e['tNDHU'];continue;case'2':_0x5a1829[_0x173282(0x4e6,0x52e,0x51c,0x496)][_0x23b7d9(-0x6d,-0x3f,-0x46,-0x50)]=_0x53726e[_0x173282(0x4c4,0x45c,0x453,0x4ba)];continue;case'3':_0x17ba39[_0x23b7d9(-0x42,0x36,0x36,0x4)][_0x173282(0x4bb,0x45f,0x524,0x4f4)]=_0x53726e[_0x23b7d9(-0x64,-0x61,-0x5c,-0x67)];continue;case'4':_0x17ba39[_0x23b7d9(-0xe8,-0xe2,-0x13a,-0x11c)]='';continue;}break;}}}else{const _0x15ee14=await dbs[_0x23b7d9(-0x9d,-0x75,-0x90,-0xb1)+_0x173282(0x4b4,0x4e6,0x50e,0x4e4)](NAI_VIBE_CACHE_KEY);_0x15ee14&&_0x15ee14[_0x23b7d9(-0x4f,-0x3f,-0x13,0x5)]&&(_0x53726e[_0x173282(0x4da,0x520,0x4b0,0x4b9)]('jfdzW',_0x53726e[_0x173282(0x45e,0x430,0x460,0x444)])?_0x53726e[_0x23b7d9(-0x131,-0xb4,-0x1b5,-0x1ab)](updateNovelaiImagePreview,_0x15ee14[_0x23b7d9(-0x4f,-0x5e,-0x35,-0x17)]):_0x48e029['revokeObje'+'ctURL'](_0x4597b1[_0x23b7d9(-0xe8,-0x109,-0x143,-0x5f)]));}}catch(_0x489b8f){if(_0x53726e['mhqSo'](_0x23b7d9(-0xa4,-0x127,-0x32,-0xe1),'fEgqO')){const _0x5575c1=_0x1cc82c[_0x173282(0x421,0x3fe,0x452,0x437)](_0x4c6e03,arguments);return _0x4e00d9=null,_0x5575c1;}else console[_0x23b7d9(-0x49,-0x37,-0xe,-0x87)](_0x23b7d9(-0x46,-0x92,-0xcc,-0xc4)+_0x173282(0x3f9,0x455,0x43d,0x39a)+'\x20NovelAI\x20V'+'ibe\x20image:',_0x489b8f);}try{if(_0x53726e[_0x173282(0x400,0x3dc,0x3a3,0x479)](_0x53726e['NGZDK'],_0x23b7d9(-0xef,-0xfc,-0x133,-0x105))){if(_0x290b25){const _0x464df8=_0x301571[_0x23b7d9(-0x107,-0x142,-0x8f,-0x114)](_0x5eb269,arguments);return _0x359e9d=null,_0x464df8;}}else{const _0x31a8c6=await dbs[_0x173282(0x48b,0x4e4,0x4aa,0x4b7)+_0x23b7d9(-0x74,-0xe4,-0x8c,-0x64)](NAI_CHAR_REF_CACHE_KEY);_0x31a8c6&&_0x31a8c6[_0x173282(0x4d9,0x492,0x4ab,0x516)]&&(_0x53726e['mhqSo'](_0x53726e[_0x173282(0x3ff,0x39a,0x3bf,0x3ba)],_0x53726e[_0x23b7d9(-0x129,-0xb4,-0x11a,-0x166)])?_0x53726e[_0x173282(0x4c8,0x445,0x4c2,0x4ea)](updateNovelaiCharRefImagePreview,_0x31a8c6[_0x23b7d9(-0x4f,-0x8e,0x1f,-0x80)]):(_0x59a268['error'](_0x53726e[_0x23b7d9(-0xb7,-0x86,-0x13e,-0xf8)],_0x160b81),_0x104e2f(_0x53726e['rwOCo']+_0x7e53[_0x173282(0x490,0x50f,0x4c1,0x407)])));}}catch(_0x4d78b2){console['error'](_0x53726e[_0x173282(0x489,0x44d,0x407,0x412)],_0x4d78b2);}function _0x23b7d9(_0x307313,_0x3dcd01,_0x2d6f51,_0x481b52){return _0x8a4e9d(_0x3dcd01,_0x3dcd01-0xd4,_0x2d6f51-0x16b,_0x307313-0x10e);}try{const _0x27cac3=await dbs['storeReadO'+_0x173282(0x4b4,0x462,0x4e3,0x50b)](COMFYUI_REF_CACHE_KEY);if(_0x27cac3&&_0x27cac3[_0x23b7d9(-0x4f,0x18,-0xa6,0x3)]&&_0x27cac3[_0x23b7d9(-0x4f,-0x96,-0x63,-0x1)][_0x23b7d9(-0x4f,-0x73,-0x6c,-0x9e)]&&_0x27cac3[_0x23b7d9(-0x4f,0x1c,-0xa8,-0x2c)][_0x173282(0x41d,0x4a1,0x403,0x40c)+_0x23b7d9(-0xe0,-0xcf,-0xf7,-0x9b)]){const _0x1df53c=_0x27cac3[_0x23b7d9(-0x4f,0xf,0x34,-0x89)],_0x4bfe84=await fetch(_0x1df53c[_0x173282(0x4d9,0x535,0x552,0x499)]),_0x5b72d6=await _0x4bfe84[_0x173282(0x4ed,0x4af,0x4e4,0x4f3)](),_0x4fd35d=URL[_0x173282(0x4f7,0x4d8,0x488,0x4c7)+'ctURL'](_0x5b72d6);_0x53726e[_0x173282(0x493,0x50f,0x45b,0x40b)](updateComfyUIImagePreview,_0x4fd35d),comfyuiImageObjectURL=_0x4fd35d,window[_0x173282(0x3f5,0x3d5,0x441,0x383)+_0x23b7d9(-0x50,-0x54,-0x3,-0xa7)]=_0x1df53c[_0x173282(0x41d,0x449,0x454,0x3fe)+_0x23b7d9(-0xe0,-0x7f,-0x124,-0x91)],_0x53726e[_0x23b7d9(-0x131,-0x167,-0x110,-0x17d)](addLog,_0x23b7d9(-0x110,-0x16a,-0x190,-0xd7)+_0x173282(0x44d,0x429,0x4b0,0x406)+_0x1df53c[_0x173282(0x41d,0x3e6,0x444,0x458)+_0x23b7d9(-0xe0,-0x89,-0x138,-0x12c)]),console[_0x173282(0x4a3,0x423,0x4db,0x495)](_0x23b7d9(-0x62,-0x56,-0x4,-0xa)+_0x173282(0x4a7,0x46b,0x47b,0x45a)+_0x23b7d9(-0x75,-0x34,0xa,-0xa6)+_0x173282(0x4dc,0x530,0x4ac,0x554)+_0x1df53c['serverFile'+_0x23b7d9(-0xe0,-0xf7,-0xe3,-0xaa)]);}else{if(_0x27cac3&&_0x53726e[_0x173282(0x400,0x385,0x3d4,0x3ae)](typeof _0x27cac3[_0x23b7d9(-0x4f,-0x1c,0x5,-0x25)],_0x23b7d9(-0xec,-0xca,-0x9e,-0xcf))){const _0x4b1f82=await _0x53726e['cWjne'](fetch,_0x27cac3[_0x173282(0x4d9,0x487,0x459,0x545)]),_0x820aa9=await _0x4b1f82[_0x173282(0x4ed,0x4b8,0x56b,0x496)](),_0x334fa6=URL[_0x23b7d9(-0x31,0x1b,-0x3,0x4f)+_0x173282(0x462,0x4cc,0x403,0x465)](_0x820aa9);_0x53726e[_0x23b7d9(-0x60,-0x7e,-0x96,0x25)](updateComfyUIImagePreview,_0x334fa6),comfyuiImageObjectURL=_0x334fa6,console[_0x23b7d9(-0xeb,-0x123,-0xfa,-0x10b)](_0x53726e[_0x173282(0x474,0x4ad,0x487,0x4b5)]);}}}catch(_0x41d0bd){console[_0x173282(0x4df,0x503,0x54e,0x4a3)](_0x53726e[_0x173282(0x499,0x451,0x469,0x476)],_0x41d0bd);}}export function initImageUpload(_0x49dd47){const _0x5bb69a={'rddOb':_0x40c9a2(-0x173,-0x127,-0x12d,-0x158)+'0','AtPan':_0x1acb2c(-0x79,-0x2b,-0x32,-0xb3),'VjVZa':_0x40c9a2(-0x16d,-0x1b4,-0x16d,-0x11f),'LhmXc':function(_0x540513,_0x331bdc){return _0x540513===_0x331bdc;},'WdzSX':_0x1acb2c(-0x81,-0x8,-0xca,-0xe1),'MSxmp':_0x1acb2c(-0x8d,-0xf,-0xfc,-0xf9)+_0x40c9a2(-0x1a7,-0x191,-0x1b4,-0x226),'pZEmQ':_0x40c9a2(-0x1f6,-0x194,-0x217,-0x1af),'MjKoK':_0x40c9a2(-0x15d,-0x19b,-0xfd,-0x161),'ReBmj':function(_0xd2f4fa){return _0xd2f4fa();},'gUpyp':function(_0x4f4b53,_0x149bc6){return _0x4f4b53(_0x149bc6);},'ZZEKK':_0x40c9a2(-0x20a,-0x1cf,-0x214,-0x1ab)+_0x1acb2c(-0x97,-0xe0,-0x28,-0x81),'lbEKe':function(_0x4dc371){return _0x4dc371();},'ARsSF':function(_0x8c0056,_0x4226a4){return _0x8c0056!==_0x4226a4;},'jLGEg':_0x40c9a2(-0x162,-0x1da,-0x18f,-0x145),'vDlWg':_0x1acb2c(-0x8d,-0x64,-0xd3,-0x9b)+_0x40c9a2(-0x1ac,-0x1f2,-0x17c,-0x158)+_0x40c9a2(-0x200,-0x1a8,-0x274,-0x1f1),'GqMgL':_0x1acb2c(-0x99,-0x15,-0x43,-0xb9),'cWuKJ':'Error\x20load'+'ing\x20cached'+'\x20ComfyUI\x20i'+_0x40c9a2(-0x135,-0x122,-0x1bb,-0xf4),'zQQgC':'iorqV','MgnDA':_0x40c9a2(-0x1cf,-0x1c3,-0x23d,-0x181)+'elect-imag'+'e-btn','MrhyQ':_0x40c9a2(-0x19b,-0x210,-0x162,-0x13f),'trvfJ':_0x1acb2c(-0x124,-0x168,-0x149,-0xb2)+_0x1acb2c(-0x66,0xb,-0xc6,-0x3e),'JYSYg':_0x1acb2c(-0x67,-0x82,-0xa,-0x67),'jLqyT':_0x40c9a2(-0x209,-0x232,-0x1be,-0x181)+_0x1acb2c(-0xce,-0x63,-0x6f,-0x76)+_0x40c9a2(-0x191,-0x139,-0x14f,-0x11a),'bBIMG':_0x1acb2c(-0xdc,-0x61,-0x7d,-0x129)+_0x1acb2c(-0xde,-0x13a,-0x96,-0x151)+_0x1acb2c(-0x56,-0xd6,-0xd7,0x23)+_0x40c9a2(-0x1fb,-0x223,-0x1fd,-0x1be),'PVvEv':'#novelai-r'+_0x1acb2c(-0x68,-0x8c,-0xed,-0xda)+_0x1acb2c(-0x56,-0x21,-0x7b,-0xb8)+_0x1acb2c(-0x108,-0x166,-0x103,-0x190),'eoadD':'#comfyui-s'+_0x40c9a2(-0x1ae,-0x14d,-0x206,-0x12f)+_0x40c9a2(-0x191,-0x146,-0x199,-0x166),'VyvuM':_0x1acb2c(-0x124,-0x12f,-0x123,-0x12d)+'t2','NWGBR':_0x40c9a2(-0x1b2,-0x214,-0x1ae,-0x163)+'emove-imag'+'e-btn'};function _0x40c9a2(_0x1d3dcb,_0x333abd,_0x332457,_0x59d71f){return _0xdc39c5(_0x1d3dcb- -0x1f9,_0x59d71f,_0x332457-0x7,_0x59d71f-0x1e3);}_0x5bb69a[_0x1acb2c(-0xe5,-0x140,-0xcb,-0xed)](loadCachedImages),_0x49dd47[_0x1acb2c(-0xba,-0xf6,-0xb3,-0x11a)](_0x5bb69a['MgnDA'])['on'](_0x5bb69a[_0x1acb2c(-0x12d,-0xd3,-0x183,-0x123)],()=>{const _0x44e7eb={};_0x44e7eb[_0x158371(0x493,0x438,0x4d3,0x452)]=_0x5bb69a[_0x158371(0x432,0x441,0x3db,0x3d4)],_0x44e7eb['YSvyn']=_0x5bb69a[_0x158371(0x512,0x4f2,0x44e,0x48f)],_0x44e7eb[_0x158371(0x40d,0x4cd,0x3fb,0x460)]=_0x5bb69a[_0x20e987(0x4cd,0x45e,0x44e,0x499)];function _0x20e987(_0x22b578,_0xeeee37,_0x50be17,_0x77e763){return _0x40c9a2(_0x50be17-0x5a2,_0xeeee37-0x29,_0x50be17-0x16c,_0xeeee37);}const _0x186ff3=_0x44e7eb;function _0x158371(_0x5d91a2,_0x514c3f,_0x5a2e67,_0x188a3f){return _0x1acb2c(_0x188a3f-0x4af,_0x514c3f-0x18f,_0x5a2e67-0x3a,_0x5a2e67);}if(_0x5bb69a['LhmXc'](_0x158371(0x422,0x47f,0x44b,0x42e),_0x5bb69a['WdzSX']))document[_0x158371(0x3cf,0x498,0x4a7,0x42a)+'ById'](_0x5bb69a[_0x20e987(0x35d,0x3dc,0x39c,0x3f0)])[_0x158371(0x403,0x44d,0x428,0x407)]();else{const _0xd1fd77=_0x186ff3[_0x158371(0x491,0x3fb,0x4a7,0x452)][_0x20e987(0x3fa,0x407,0x408,0x398)]('|');let _0x1ef8e0=0x378+0x24a7*-0x1+0x6a3*0x5;while(!![]){switch(_0xd1fd77[_0x1ef8e0++]){case'0':_0x28de63=null;continue;case'1':_0x336fa9[_0x20e987(0x412,0x418,0x3d0,0x366)]='';continue;case'2':_0x464ed2[_0x20e987(0x402,0x479,0x476,0x48a)][_0x158371(0x4a3,0x49a,0x483,0x44b)]=_0x186ff3[_0x20e987(0x3a5,0x470,0x3ef,0x389)];continue;case'3':_0x524e93[_0x20e987(0x4c6,0x4e8,0x476,0x4ed)][_0x20e987(0x45b,0x433,0x44b,0x40c)]=_0x186ff3['xdDez'];continue;case'4':_0x2b8e3b[_0x20e987(0x378,0x407,0x385,0x3f2)+_0x20e987(0x43a,0x4e5,0x468,0x3e5)]=null;continue;case'5':_0xa49981[_0x158371(0x43c,0x4cd,0x43d,0x476)][_0x20e987(0x3ed,0x4b8,0x44b,0x481)]=_0x186ff3[_0x20e987(0x41f,0x44a,0x460,0x411)];continue;}break;}}}),_0x49dd47['find'](_0x5bb69a[_0x40c9a2(-0x1a8,-0x22a,-0x1e1,-0x14d)])['on'](_0x5bb69a['JYSYg'],handleNovelaiImageUpload),_0x49dd47['find'](_0x5bb69a['jLqyT'])['on'](_0x5bb69a[_0x1acb2c(-0x12d,-0x174,-0x135,-0xd3)],()=>{function _0x5c3c6c(_0xebb7e6,_0x5a042f,_0x3b29f5,_0x2cbca7){return _0x40c9a2(_0xebb7e6-0x3a6,_0x5a042f-0xe8,_0x3b29f5-0xa3,_0x3b29f5);}function _0x2bec50(_0x215bb3,_0x474d58,_0x36f524,_0x1efc87){return _0x40c9a2(_0x1efc87-0x33f,_0x474d58-0x1b0,_0x36f524-0x105,_0x474d58);}if(_0x5bb69a[_0x5c3c6c(0x1f7,0x1c6,0x26f,0x255)]!==_0x5bb69a[_0x2bec50(0x13a,0x213,0x142,0x190)]){const _0xafd54=_0x5bb69a[_0x5c3c6c(0x235,0x1bf,0x2a2,0x25c)][_0x2bec50(0x229,0x125,0x1d4,0x1a5)]('|');let _0x57955c=-0x4*0x16d+0x83*0x48+-0x1f24;while(!![]){switch(_0xafd54[_0x57955c++]){case'0':_0x310e04['style'][_0x5c3c6c(0x24f,0x229,0x217,0x279)]=_0x5bb69a['AtPan'];continue;case'1':_0x1e78ee[_0x5c3c6c(0x1d4,0x256,0x1f4,0x24a)]='';continue;case'2':_0x178b9b['style']['display']=_0x5bb69a[_0x2bec50(0x24b,0x242,0x250,0x1eb)];continue;case'3':_0x5eaa7b[_0x2bec50(0x250,0x273,0x1be,0x213)][_0x5c3c6c(0x24f,0x2bb,0x298,0x2c9)]=_0x5c3c6c(0x239,0x1cc,0x1fd,0x28f);continue;case'4':_0x485990[_0x5c3c6c(0x282,0x21a,0x2f8,0x2a7)+'ansferImag'+'e']=null;continue;}break;}}else _0x5bb69a[_0x2bec50(0x11c,0x1b9,0xdd,0x151)](removeNovelaiImage);}),_0x49dd47['find'](_0x5bb69a[_0x1acb2c(-0x1f,-0x60,-0x6,0x3b)])['on'](_0x40c9a2(-0x19b,-0x1ab,-0x175,-0x20d),()=>{function _0x47583e(_0x432baf,_0xa5bb4,_0x488d94,_0x36e043){return _0x40c9a2(_0x36e043-0xce,_0xa5bb4-0x1a4,_0x488d94-0x1df,_0x488d94);}function _0x4e460f(_0x4a30c5,_0x3ebc35,_0x62cd1d,_0x58891f){return _0x40c9a2(_0x58891f-0x285,_0x3ebc35-0x4f,_0x62cd1d-0x94,_0x4a30c5);}if(_0x5bb69a[_0x4e460f(0x1a4,0xda,0xca,0x12d)](_0x5bb69a[_0x47583e(-0x11,-0x9c,0xb,-0x58)],'NThgW'))document[_0x47583e(-0x24,-0x4c,-0xc6,-0xaa)+_0x47583e(-0xe3,-0xea,-0x150,-0xd4)](_0x5bb69a[_0x47583e(-0xa1,-0x143,-0xef,-0xf1)])[_0x47583e(-0xef,-0x5e,-0x4e,-0xcd)]();else{_0x5bb69a['gUpyp'](_0x1000c3,_0x5bb69a[_0x47583e(-0x1c3,-0x193,-0x1be,-0x150)]),_0x5bb69a[_0x4e460f(0x4a,0x119,0x73,0xad)](_0x3bbf76);return;}}),_0x49dd47[_0x40c9a2(-0x1ad,-0x1dc,-0x1c4,-0x149)](_0x1acb2c(-0x124,-0x186,-0x9e,-0xdb)+_0x40c9a2(-0x1cb,-0x202,-0x231,-0x199)+'_ref')['on'](_0x1acb2c(-0x67,0x9,-0xa6,0x1),handleNovelaiCharRefImageUpload),_0x49dd47[_0x40c9a2(-0x1ad,-0x1bb,-0x236,-0x12c)](_0x5bb69a[_0x1acb2c(-0x9f,-0x10a,-0x103,-0x106)])['on'](_0x5bb69a[_0x40c9a2(-0x220,-0x2a4,-0x216,-0x268)],()=>{function _0x3ed979(_0x2a79f0,_0x463bad,_0x1cfac7,_0x5d16e4){return _0x1acb2c(_0x1cfac7- -0x1b4,_0x463bad-0x11d,_0x1cfac7-0x111,_0x5d16e4);}_0x5bb69a[_0x3ed979(-0x291,-0x2d7,-0x299,-0x25f)](removeNovelaiCharRefImage);}),_0x49dd47[_0x1acb2c(-0xba,-0x4b,-0x5a,-0x138)](_0x5bb69a[_0x1acb2c(-0x29,-0xa4,-0x74,0x19)])['on'](_0x5bb69a[_0x40c9a2(-0x220,-0x1c7,-0x1d5,-0x1f0)],()=>{const _0x370729={};function _0x542ce3(_0x3619c5,_0x8da18a,_0x290bb7,_0x1d8f1a){return _0x1acb2c(_0x3619c5- -0x1b8,_0x8da18a-0x1be,_0x290bb7-0x1d1,_0x290bb7);}_0x370729[_0x542ce3(-0x233,-0x1da,-0x1e6,-0x1cb)]=_0x542ce3(-0x1f5,-0x1b5,-0x1cc,-0x1bd)+_0x1e0381(-0x83,-0xa9,-0x4e,-0x26)+'\x20NovelAI\x20C'+_0x1e0381(0xa8,0xe,0x4e,0x32)+'age:';const _0x373e94=_0x370729;function _0x1e0381(_0x21ead2,_0x25e302,_0x4b7fd3,_0x1dcede){return _0x1acb2c(_0x4b7fd3-0xd8,_0x25e302-0xec,_0x4b7fd3-0xee,_0x1dcede);}_0x5bb69a['GqMgL']===_0x5bb69a[_0x542ce3(-0x1f3,-0x200,-0x242,-0x23e)]?document[_0x1e0381(0x13,0x89,0x53,0x37)+_0x542ce3(-0x267,-0x2ca,-0x26b,-0x25b)]('imageInput'+'2')['click']():_0x5a8f96['error'](_0x373e94[_0x542ce3(-0x233,-0x2ba,-0x1ae,-0x217)],_0x44a884);}),_0x49dd47[_0x1acb2c(-0xba,-0x9b,-0x48,-0x126)](_0x5bb69a[_0x40c9a2(-0x19d,-0x1b6,-0x1cc,-0x16b)])['on'](_0x5bb69a[_0x40c9a2(-0x216,-0x231,-0x1c6,-0x247)],handleImageUpload2);function _0x1acb2c(_0x2b09af,_0x4573bc,_0x26c3c8,_0x336e07){return _0x8a4e9d(_0x336e07,_0x4573bc-0x14b,_0x26c3c8-0x7c,_0x2b09af-0x117);}_0x49dd47['find'](_0x5bb69a[_0x1acb2c(-0xb7,-0xde,-0x9c,-0x71)])['on'](_0x5bb69a[_0x1acb2c(-0x12d,-0x139,-0xe3,-0x147)],()=>{function _0x2e6193(_0x386e47,_0x369048,_0x2697e0,_0x26a130){return _0x1acb2c(_0x386e47-0x577,_0x369048-0x1a7,_0x2697e0-0x1ee,_0x26a130);}function _0x431afe(_0x6639a6,_0x3ef82e,_0x26ba0f,_0xecd247){return _0x1acb2c(_0xecd247-0x4ab,_0x3ef82e-0x113,_0x26ba0f-0xe,_0x6639a6);}_0x5bb69a[_0x2e6193(0x512,0x4c4,0x533,0x535)](_0x5bb69a[_0x2e6193(0x4c7,0x483,0x482,0x4b5)],_0x5bb69a[_0x2e6193(0x4c7,0x45f,0x492,0x547)])?_0x3c3cb4[_0x431afe(0x458,0x4a3,0x40e,0x46b)](_0x5bb69a['cWuKJ'],_0x2fb252):_0x5bb69a[_0x431afe(0x43e,0x401,0x384,0x3c6)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};