(function(_0x2a2bb7,_0x510009){function _0x705bf6(_0x9d9684,_0x381b64,_0x175164,_0x111cc9){return _0x229f(_0x9d9684-0x21e,_0x111cc9);}const _0x397fc6=_0x2a2bb7();function _0x3ac795(_0x384ba2,_0x192b98,_0xd672b2,_0xfcd6d7){return _0x229f(_0x192b98- -0x33d,_0xd672b2);}while(!![]){try{const _0x533c0e=-parseInt(_0x3ac795(-0xee,-0x165,-0x111,-0x175))/(0x584+0x7da+-0x137*0xb)+-parseInt(_0x705bf6(0x3ef,0x45d,0x3ac,0x3fe))/(-0x9f*0x25+0xd24+0x9d9)+-parseInt(_0x705bf6(0x47b,0x428,0x46a,0x444))/(0xadb+0xa9*-0x2e+0x1386)*(parseInt(_0x705bf6(0x4b2,0x48b,0x520,0x4ae))/(-0xbce+-0x3*0x394+0x1*0x168e))+parseInt(_0x3ac795(-0x7d,-0xc6,-0x95,-0x135))/(0x90*-0x3e+-0x2ad+-0x2a*-0xe5)+parseInt(_0x3ac795(-0x100,-0xb5,-0x7b,-0x101))/(0x13c0+-0x1*0x1bff+0x845)*(-parseInt(_0x705bf6(0x3ea,0x3a1,0x3cb,0x454))/(0x7d3*-0x3+-0x1d*0xd7+0x2fdb))+parseInt(_0x3ac795(-0xb9,-0x95,-0x1e,-0x35))/(-0x1*0x2011+-0x3*-0x977+0x3b4)+-parseInt(_0x3ac795(-0x141,-0x15c,-0xe4,-0x154))/(-0x1250+-0x1*-0x323+-0x2*-0x79b)*(-parseInt(_0x3ac795(-0x111,-0x170,-0x1e2,-0xf2))/(0x4*-0x4ae+0x2468+-0x11a6));if(_0x533c0e===_0x510009)break;else _0x397fc6['push'](_0x397fc6['shift']());}catch(_0x486567){_0x397fc6['push'](_0x397fc6['shift']());}}}(_0x71cc,-0x6de*-0x15f+0x7edd8+0x1*-0xafdf8));const _0x4ad145=(function(){let _0x5a1388=!![];return function(_0x15dcee,_0xa888ba){const _0x16e5eb=_0x5a1388?function(){function _0x22de82(_0x56f2e2,_0x2ac448,_0x26206a,_0x614d82){return _0x229f(_0x614d82- -0x381,_0x26206a);}if(_0xa888ba){const _0x571d65=_0xa888ba[_0x22de82(-0x1cb,-0x1b7,-0x14c,-0x195)](_0x15dcee,arguments);return _0xa888ba=null,_0x571d65;}}:function(){};return _0x5a1388=![],_0x16e5eb;};}()),_0x113104=_0x4ad145(this,function(){function _0x25a9f6(_0x57fcd7,_0x1465da,_0x9a56f8,_0xcf367c){return _0x229f(_0x57fcd7- -0x22a,_0xcf367c);}function _0x254dac(_0x1479d9,_0x1907d2,_0x5bde36,_0x9f8713){return _0x229f(_0x1907d2-0x3cf,_0x5bde36);}return _0x113104[_0x254dac(0x5d3,0x5fc,0x5fa,0x62b)]()[_0x254dac(0x672,0x63b,0x6a0,0x669)]('(((.+)+)+)'+'+$')[_0x254dac(0x5d2,0x5fc,0x649,0x648)]()['constructo'+'r'](_0x113104)[_0x25a9f6(0x42,0x21,0x92,0x6)](_0x254dac(0x601,0x5b5,0x612,0x537)+'+$');});function _0x5ef6f8(_0x429207,_0x47ade1,_0x44d938,_0x344f3b){return _0x229f(_0x344f3b-0x261,_0x429207);}_0x113104();import{extension_settings}from'../../../../../extensions.js';function _0x229f(_0x41e3e2,_0x5b7deb){_0x41e3e2=_0x41e3e2-(0x1fbc+0xea8+-0x8ee*0x5);const _0x159bae=_0x71cc();let _0x5a530b=_0x159bae[_0x41e3e2];if(_0x229f['MVXkYf']===undefined){var _0x2c4acb=function(_0x4e153d){const _0x4ba04a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x493ffe='',_0x8e1484='',_0x29dbd1=_0x493ffe+_0x2c4acb;for(let _0x56393a=0xab5*-0x1+-0x21f5*-0x1+0x4*-0x5d0,_0x2e2323,_0x1808e6,_0x5805f9=-0x1*0x1f71+0x847+0x172a;_0x1808e6=_0x4e153d['charAt'](_0x5805f9++);~_0x1808e6&&(_0x2e2323=_0x56393a%(-0x134b+-0xc3f+0x1f8e)?_0x2e2323*(0x11e6+-0x8d*0x2b+0x609)+_0x1808e6:_0x1808e6,_0x56393a++%(0x25b3*-0x1+-0x17e1+0x3d98))?_0x493ffe+=_0x29dbd1['charCodeAt'](_0x5805f9+(0x5*0x177+0x601+-0x12*0xbd))-(0x54c+0x2*-0x622+-0x702*-0x1)!==0xc*0x320+-0x14db+0x1*-0x10a5?String['fromCharCode'](-0x1*0x64+-0x1a3f*-0x1+-0x2*0xc6e&_0x2e2323>>(-(0x254b+-0x1ae5+-0xa64)*_0x56393a&-0x3*0x35f+0xa38+-0x15)):_0x56393a:-0x16cd+0x1*0x77b+0xf52){_0x1808e6=_0x4ba04a['indexOf'](_0x1808e6);}for(let _0x55d571=-0xa97*-0x2+-0x2318+0xdea,_0x40faa2=_0x493ffe['length'];_0x55d571<_0x40faa2;_0x55d571++){_0x8e1484+='%'+('00'+_0x493ffe['charCodeAt'](_0x55d571)['toString'](-0x1ddf+0x8ac+0x1543))['slice'](-(0x15c5*0x1+-0x1524+-0x3*0x35));}return decodeURIComponent(_0x8e1484);};_0x229f['pDrraY']=_0x2c4acb,_0x229f['bCVRHA']={},_0x229f['MVXkYf']=!![];}const _0x453bab=_0x159bae[-0x1*-0x26d2+-0x27d+-0x1*0x2455],_0x3ff1db=_0x41e3e2+_0x453bab,_0x449796=_0x229f['bCVRHA'][_0x3ff1db];if(!_0x449796){const _0x295bb2=function(_0x1bcb21){this['IXWTAl']=_0x1bcb21,this['xuUUya']=[0x1a3e*0x1+0x18c4+-0x4a3*0xb,0x5*-0x67+-0x1c91+0x1e94,-0x32*0x76+-0x10*-0x53+0x11dc],this['HnJhHx']=function(){return'newState';},this['EdSTVB']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['IZzPVj']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x295bb2['prototype']['ZDHdhh']=function(){const _0x125456=new RegExp(this['EdSTVB']+this['IZzPVj']),_0x1737fb=_0x125456['test'](this['HnJhHx']['toString']())?--this['xuUUya'][0x1*0x159c+0x51e*0x1+-0x1ab9*0x1]:--this['xuUUya'][-0x35b+-0x173*-0xa+-0xb23];return this['NzjWeR'](_0x1737fb);},_0x295bb2['prototype']['NzjWeR']=function(_0x2ec01b){if(!Boolean(~_0x2ec01b))return _0x2ec01b;return this['hokpyX'](this['IXWTAl']);},_0x295bb2['prototype']['hokpyX']=function(_0x2a5e02){for(let _0x2d7df5=-0x22a*0xd+0x125*-0x12+0x30bc,_0x290e16=this['xuUUya']['length'];_0x2d7df5<_0x290e16;_0x2d7df5++){this['xuUUya']['push'](Math['round'](Math['random']())),_0x290e16=this['xuUUya']['length'];}return _0x2a5e02(this['xuUUya'][0x252e*0x1+-0x1e89*0x1+-0x9*0xbd]);},new _0x295bb2(_0x229f)['ZDHdhh'](),_0x5a530b=_0x229f['pDrraY'](_0x5a530b),_0x229f['bCVRHA'][_0x3ff1db]=_0x5a530b;}else _0x5a530b=_0x449796;return _0x5a530b;}import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';function _0x71cc(){const _0x3939b0=['zMLSzxm','z2v0rwXLBwvUDa','t2DAt3q','DLjLu3u','Aw1Hz2uVCg5N','tMfTzq','z3fZD2C','CgXHy2vOB2XKzq','vwDrvKq','BwfNztO','vuNLM77NIyC6ia','C3rVCMvszwfKvW','vLzJs24','lwj0BG','i25VDMvSywKTCG','zNLvssbPBwfNzq','i2LTywDLsw5WDq','ug1hB28','zwXbssbPBwfNzq','CKrrqwm','C3bSAxq','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','t3nWB0K','qNbVt3a','ANnVBG','zKLTywDL','uufKuwG','Dg9tDhjPBMC','C2r4y3m','i25VDMvSywKTAq','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','CMfUC2zLCL9PBq','Bwv0Ag9K','AgfYlxjLzI1PBq','rgThCNu','u3DXwgG','Df9UB3zLBgfP','A2fVDhvWAwfU','Aw5SAw5LlwzSzq','igzYB20Gy2fJAa','Dg9XBgq','BMX5','zxCTy29UDgfPBG','y29TzNL1AwnHBG','i2nVBwz5DwKTCW','z3LPywG','y29TzNL1As1Yzq','r3n4txq','y2HHBMDL','txfpyMK','uuDmEw4','z1bJyve','u09IDvq','DNjYDxG','DgHLig5LDYbMBW','zwDxD2u','yMXVyG','yw5ZzMvYsw1HzW','rvzTDxO','yuPVtgG','x25VDMvSywK','Bw92zs1JAgfYlq','BM92zwXHAs1Yzq','CML0zq','zw1VDMuTAw1HzW','zMXLEa','DMXer2u','u3fPs04','nhWXFdb8nxWZFa','Dhu4lwLTywDLlq','CxvLCNLtzwXLyW','AuHbzeu','lxjLzI1PBwfNzq','Aw1Hz2vjBNb1Da','vfPTExm','oda3tK9jBffO','D2fYBG','BwvZC2fNzq','yMLqBhC','DY1JB250ywLUzq','venoCMC','BvLftwe','zgf0yq','ruPMtw0','EKnVqui','tejmrei','ywDLlxbYzxzPzq','yvzVuey','swrLvKG','yMXVyJO','C2vHCMnO','t1nhtLm','5zU+54Mh5Ase55cg5AsX6lsLoIa','vKvSA2y','qwHhCge','EenqAu0','rfL6wMu','C3rYAw5NAwz5','Df9UywLFy2HHCG','igzYB20GB2XKia','5zUE5PwW5O2UoG','mJGXnduXmhPKreTmzq','5zMO6l+u5zUE5PwW5O2UoIa','BwfNzs1WCMv2Aq','yMXVy2S','tK9kv0K','DgfYz2v0','EKjzEuG','rwT1shO','rMHlvgG','twzLsMK','ue9tva','EgTWr3q','C2vYDMvYrMLSzq','BerLs3u','zwzFAw1Hz2u','y2fJAgvFy29TzG','mhWYFdr8m3W1Fa','mtuWvKTvyNfm','BxDuAMu','zw1VDMuTy2HHCG','BxfLzhy','mxWWFdr8mNWZ','CL9Yzwy','zwXLy3qTAw1HzW','ie5VDMvSquKGqW','ALjurwu','r21kBLm','zwXbssbJAgfYia','ienVBwz5vuKGAq','mta5nJrfyM1cA2m','rwvMuxG','CMv2B2TLt2jQzq','Dg9Y','y29TzNL1AvvYBa','uhbrBwe','y2fJAguGzM9YBq','u1jMue8','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','rLbgAe8','C1zrCKO','zNDXCe0','AuH3z2q','y0vduKS','AwjLigLTywDLoG','AgfYifjLzIbPBq','DLPcrwm','sNvotMi','i25VDMvSywKTyW','u1PIC2i','mta5mti4mhzurLfqAq','y3rvuKW','zxiGlNn0lwnOyq','ChjLDMLLD0LTyq','Bw92zs1PBwfNzq','BxbKsK4','zxnZAw5Nie5VDG','x25HAv9JAgfYxW','y2XPy2S','BgfJzwHVBgrLCG','yxbWzw5K','BM9Uzq','y3jLyxrLt2jQzq','zgLZCgXHEq','CM1HDc4','z2vFBM92zwXHAq','BfP6uMW','BgfPx3zPyMvFDa','i25VDMvSywKTCW','qNLjza','ywDL','zxjYB3i','C3jJ','6k+M5OofoIa','zwXLy3qTy2HHCG','vwnfC04','6k+35ywi6k6+572Uq29TzNLv','B3PUqMq','vKTxqxu','uNfgD3C','vvPxwNG','BMfTzq','z1Dbwvy','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','mtqXnZG1C3bvB1zx','mtbwwNPNqKu','zgPfvxm','r1DuDvK','yM9KEq','otC4ntC2y29nAe9Q','zMLUza','Dgv4Da','DwLIseq','5lUo57Yt5A2y5yQG6l29q29TzNK','A3vXAuy','rhzRCuW','nZm1mdKYqu1jB0Xg','C3rVCMvezwXLDa','sfDcvgC','txHQvuS','yNrU','C3rVCMvszwfKtW','ywDLoG','whzfreW','Evf4CuG','mtK2nJu4ndzMzuXfDvC','sMT0D2O','Aw5NignHy2HLza','zgf0ytPPBwfNzq','uvLKBgy','kcGOlISPkYKRkq','uxPjDvu','CMvZDwX0','CMvMigLTywDLoG','DKfprMS','z2vFBMfPx2nOyq','yxbWBhK','C3rHCNrZv2L0Aa','i2nVBwz5DwKTCG','zxrJA24','zNvTuNa','qvjVvuS','v3fPDgC','ie5VDMvSquKGvG','vvjm','C1rWA1m','y2fJAgvFBM92zq','C0TrugC','ignHy2HLihrVia','DtGTAw1Hz2uTCa','Afjus2m','ExvPx3jLzL9PBq','ihjLlxvWBg9Hza','shPfvvm','C3r5Bgu','rxjYB3iGBg9Hza','AKvuy2m','DhjPBq','Bu9rzK0','Eg5ouM4','zs1IDg4','wLPXBvi','BMfPm0nOyxjszq','x3jLzG','ufHoCfi','CMvMlwLTywDLlq','ugrlru0','rxjYB3iGChjVyW','i2nVBwz5DwKTAq','v0Psu0O','yxqUifbSzwfZzq','CIaUC3qTy2HHDa','r2vmCxa','rLnAqNC'];_0x71cc=function(){return _0x3939b0;};return _0x71cc();}import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY='cache_nove'+_0x5ef6f8(0x500,0x541,0x599,0x51a)+_0x20b3ca(0x199,0x198,0x125,0xcf)+_0x5ef6f8(0x459,0x3a8,0x3b5,0x41f),NAI_CHAR_REF_CACHE_KEY=_0x20b3ca(0x9b,0x99,0xea,0x71)+'lai_char_r'+_0x5ef6f8(0x540,0x472,0x4a4,0x4e6),COMFYUI_REF_CACHE_KEY=_0x20b3ca(0x149,0x1a5,0x17a,0x1ce)+_0x20b3ca(0x90,0xc7,0xef,0x10c)+_0x5ef6f8(0x476,0x467,0x458,0x41f);let nai3VibeTransferImageMimeType='image/png',nai3CharRefImageMimeType=_0x20b3ca(0xf9,0xf4,0x10a,0x157),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x3ddf86){function _0x1cffc9(_0x5ece79,_0x578808,_0x23ceab,_0x40a8b3){return _0x5ef6f8(_0x578808,_0x578808-0xd3,_0x23ceab-0xfe,_0x40a8b3- -0x185);}const _0x24db56={};function _0x1acc87(_0x1759ec,_0x3fbddd,_0x48264f,_0xc16275){return _0x5ef6f8(_0x3fbddd,_0x3fbddd-0x105,_0x48264f-0x1bb,_0xc16275- -0x5bf);}_0x24db56[_0x1cffc9(0x2c7,0x33f,0x2ff,0x2d1)]=_0x1acc87(-0x8d,-0x10f,-0xc9,-0xb3)+_0x1cffc9(0x3f6,0x372,0x3dc,0x393),_0x24db56['SRfPO']=_0x1acc87(-0x16e,-0x1f9,-0x11a,-0x17a),_0x24db56[_0x1cffc9(0x28b,0x316,0x2ed,0x2f4)]=_0x1acc87(-0xc8,-0x106,-0x104,-0x126)+'x',_0x24db56['DYzZe']='none',_0x24db56[_0x1acc87(-0x100,-0x69,-0x3b,-0xb7)]='flex';const _0x1b065a=_0x24db56,_0x5d9f5b=document['getElement'+_0x1acc87(-0x6e,-0x10d,-0xc0,-0xa3)](_0x1b065a[_0x1acc87(-0x102,-0x1df,-0x198,-0x169)]),_0x184a06=document[_0x1cffc9(0x371,0x2f9,0x2d6,0x334)+'tor'](_0x1cffc9(0x2db,0x376,0x343,0x30b)+_0x1cffc9(0x2eb,0x32e,0x30e,0x355)+_0x1cffc9(0x37a,0x387,0x306,0x318)+'er\x20.st-cha'+_0x1cffc9(0x329,0x2f8,0x36a,0x333)+_0x1acc87(-0x148,-0x155,-0x137,-0x145)+'r'),_0x402395=document[_0x1cffc9(0x34e,0x335,0x2af,0x2ef)+_0x1acc87(-0x5a,-0xc6,-0xd8,-0xa3)]('novelai-re'+_0x1acc87(-0xc3,-0x99,-0x106,-0xb2)+_0x1acc87(-0x19c,-0x179,-0xcf,-0x13f));if(_0x3ddf86&&_0x3ddf86[_0x1acc87(-0x12d,-0x1d0,-0x19e,-0x171)](_0x1b065a[_0x1cffc9(0x2ff,0x3bb,0x33d,0x377)])){_0x5d9f5b[_0x1acc87(-0x1af,-0x1fa,-0x144,-0x19e)]=_0x3ddf86,_0x5d9f5b[_0x1acc87(-0x1a2,-0x16f,-0x1c8,-0x160)][_0x1cffc9(0x354,0x3f1,0x40a,0x391)]=_0x1acc87(-0x117,-0x154,-0x137,-0xe4),_0x184a06['style'][_0x1acc87(-0x79,-0xbf,-0x4a,-0xa9)]=_0x1cffc9(0x39a,0x404,0x33e,0x38f),_0x402395['style'][_0x1acc87(-0x4a,-0xe2,-0x59,-0xa9)]=_0x1b065a['gqswg'];const _0x380667=_0x3ddf86[_0x1cffc9(0x372,0x374,0x33a,0x302)](','),_0x4b7b87=_0x380667[-0x3bd+0x1d28+-0x196b][_0x1cffc9(0x2d4,0x2f6,0x2a2,0x302)](':')[0x151*-0x11+-0x8b2+0x1d4*0x11]['split'](';')[0x98e+0xd*-0x107+0x3cd];nai3VibeTransferImageMimeType=_0x4b7b87,window['nai3VibeTr'+_0x1acc87(-0x14e,-0xd1,-0x113,-0x113)+'e']=_0x380667[0x211c+0x26*-0x3+0x9*-0x3a1];const _0x1eaff9={};_0x1eaff9['id']=NAI_VIBE_CACHE_KEY,_0x1eaff9['data']=_0x3ddf86,dbs[_0x1acc87(-0x137,-0x174,-0x132,-0x141)+'rite'](_0x1eaff9);}else _0x5d9f5b[_0x1cffc9(0x284,0x2f7,0x2ee,0x29c)]='',_0x5d9f5b['style'][_0x1cffc9(0x34d,0x34c,0x3de,0x391)]=_0x1b065a[_0x1cffc9(0x2ec,0x313,0x30b,0x34e)],_0x184a06[_0x1acc87(-0x102,-0x197,-0xf4,-0x160)][_0x1cffc9(0x389,0x3a6,0x33a,0x391)]=_0x1b065a[_0x1acc87(-0x117,-0xe5,-0x10c,-0xb7)],_0x402395[_0x1acc87(-0xf3,-0x169,-0x1b8,-0x160)]['display']=_0x1b065a[_0x1cffc9(0x37f,0x304,0x350,0x34e)],window['nai3VibeTr'+_0x1acc87(-0x187,-0x167,-0xca,-0x113)+'e']=null;}function removeNovelaiImage(){function _0x1e2ce8(_0x4ebfd9,_0x356615,_0xa6faaf,_0x38c116){return _0x5ef6f8(_0x4ebfd9,_0x356615-0x19c,_0xa6faaf-0x133,_0x38c116- -0x453);}const _0x577b9b={'EJfMm':function(_0x156250,_0x49cad3){return _0x156250(_0x49cad3);}};_0x577b9b[_0x1e2ce8(0x79,0xeb,0xc1,0x73)](updateNovelaiImagePreview,null),dbs['storeDelet'+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x42fa69){function _0x4715f8(_0x12f401,_0x5655c6,_0x9c7b74,_0x5cbce5){return _0x20b3ca(_0x12f401-0x4,_0x12f401,_0x9c7b74-0x292,_0x5cbce5-0x13e);}const _0x420ce1={'lDeKu':function(_0x3f146e,_0x43993b,_0x5cdd96){return _0x3f146e(_0x43993b,_0x5cdd96);},'NIXta':function(_0x388bbe,_0x116e73){return _0x388bbe(_0x116e73);},'SObuT':function(_0x3a4cdc,_0x3b12a4){return _0x3a4cdc!==_0x3b12a4;},'GeLqp':'ZZqmR','GmJnS':_0x546862(0x52d,0x4b6,0x49f,0x4bb)+'essing\x20Nov'+_0x4715f8(0x3ca,0x3e8,0x3aa,0x39a)+':'};function _0x546862(_0x10ecd8,_0x32facc,_0x466434,_0x366925){return _0x5ef6f8(_0x466434,_0x32facc-0x1f0,_0x466434-0xfe,_0x366925-0x4f);}const _0x568ce7=_0x42fa69['target'][_0x4715f8(0x3ed,0x377,0x398,0x37a)][-0x2f*0x88+0x12b4+0x644];if(!_0x568ce7)return;try{const _0x4b9f5a=await _0x420ce1[_0x4715f8(0x3b6,0x43e,0x40a,0x447)](processUploadedImage,_0x568ce7,!![]);_0x420ce1['NIXta'](updateNovelaiImagePreview,_0x4b9f5a);}catch(_0x4497f9){if(_0x420ce1[_0x546862(0x533,0x49e,0x4d4,0x4f6)](_0x4715f8(0x406,0x386,0x38b,0x3fa),_0x420ce1[_0x546862(0x525,0x46b,0x4a7,0x4c0)])){if(_0x370438){const _0x3d6001=_0x366d6e[_0x546862(0x4ca,0x43f,0x4ac,0x49c)](_0x21b896,arguments);return _0x3626ec=null,_0x3d6001;}}else console['error'](_0x420ce1[_0x4715f8(0x3f0,0x47e,0x417,0x409)],_0x4497f9),alert(_0x546862(0x57a,0x4b6,0x514,0x51e)+_0x4497f9[_0x4715f8(0x460,0x378,0x3e5,0x395)]);}}function updateNovelaiCharRefImagePreview(_0x43216f){const _0x1242c7={};_0x1242c7['wpSPU']=_0x411d5c(0x287,0x292,0x2cb,0x2ef)+_0x411d5c(0x214,0x227,0x1a4,0x22f)+'age-previe'+_0x23d325(0x4d3,0x501,0x485,0x526)+_0x411d5c(0x1f0,0x1ee,0x1ab,0x1e7)+_0x23d325(0x46b,0x42c,0x4b6,0x486)+_0x411d5c(0x292,0x301,0x289,0x247),_0x1242c7['lZzRl']='block',_0x1242c7['OSGNS']=_0x411d5c(0x219,0x1f3,0x28a,0x214)+'x',_0x1242c7[_0x23d325(0x46f,0x46a,0x49f,0x420)]=_0x23d325(0x4ac,0x4a3,0x45a,0x50c),_0x1242c7[_0x411d5c(0x204,0x185,0x1fb,0x261)]='LrhSb';function _0x411d5c(_0xdb1523,_0x402cc9,_0x2546d7,_0x434ddd){return _0x5ef6f8(_0x434ddd,_0x402cc9-0x110,_0x2546d7-0x1e3,_0xdb1523- -0x280);}_0x1242c7['ZYJXj']='none',_0x1242c7[_0x23d325(0x4d5,0x537,0x4a4,0x48b)]=_0x23d325(0x4c5,0x500,0x48e,0x51e);const _0x158b1d=_0x1242c7;function _0x23d325(_0x1623d2,_0x1e7534,_0x594bca,_0x4a0c77){return _0x20b3ca(_0x1623d2-0xac,_0x594bca,_0x1623d2-0x37e,_0x4a0c77-0xc1);}const _0x36ac46=document[_0x411d5c(0x1f4,0x214,0x1b2,0x1b5)+_0x23d325(0x52d,0x4d8,0x56b,0x53f)](_0x23d325(0x51d,0x59c,0x574,0x54e)+_0x23d325(0x45d,0x4d2,0x471,0x437)+'r_ref'),_0x46d71a=document['querySelec'+_0x411d5c(0x278,0x269,0x286,0x20d)](_0x158b1d['wpSPU']),_0x38bc25=document[_0x23d325(0x485,0x473,0x4e1,0x466)+_0x23d325(0x52d,0x4cf,0x579,0x4f2)](_0x411d5c(0x231,0x22e,0x2a9,0x1f3)+_0x23d325(0x4c1,0x49a,0x518,0x4a2)+_0x411d5c(0x1ea,0x1fc,0x258,0x17d)+_0x23d325(0x44e,0x4b2,0x3d2,0x491));if(_0x43216f&&_0x43216f[_0x23d325(0x45f,0x403,0x431,0x3e8)](_0x23d325(0x456,0x478,0x4bb,0x46a))){_0x36ac46['src']=_0x43216f,_0x36ac46[_0x23d325(0x470,0x434,0x46a,0x42c)]['display']=_0x158b1d[_0x23d325(0x52a,0x510,0x4ec,0x4b8)],_0x46d71a[_0x411d5c(0x1df,0x189,0x252,0x1d6)][_0x411d5c(0x296,0x291,0x2d1,0x2da)]=_0x411d5c(0x294,0x241,0x2e7,0x256),_0x38bc25[_0x23d325(0x470,0x4dd,0x4df,0x4e2)][_0x23d325(0x527,0x541,0x4a9,0x55c)]=_0x158b1d[_0x411d5c(0x24e,0x235,0x1fd,0x295)];const _0x237b62=_0x43216f[_0x411d5c(0x207,0x242,0x198,0x27a)](','),_0x4361b1=_0x237b62[0x23be+-0x1cf8+-0x6c6][_0x23d325(0x498,0x4ef,0x425,0x513)](':')[-0x412+-0x253d*-0x1+-0x1095*0x2][_0x411d5c(0x207,0x1be,0x1da,0x1eb)](';')[-0x49d+-0x2*0xa40+0x191d];nai3CharRefImageMimeType=_0x4361b1,window[_0x23d325(0x478,0x46a,0x434,0x440)+_0x23d325(0x49d,0x504,0x4b3,0x4a8)]=_0x237b62[-0x2f*-0x2+-0x6b*-0x2b+0x1256*-0x1];const _0x10e372={};_0x10e372['id']=NAI_CHAR_REF_CACHE_KEY,_0x10e372[_0x411d5c(0x245,0x257,0x292,0x286)]=_0x43216f,dbs[_0x411d5c(0x1fe,0x19e,0x190,0x180)+'rite'](_0x10e372);}else{if(_0x158b1d[_0x411d5c(0x1de,0x1a0,0x1bb,0x1a2)]!==_0x158b1d['PmGoo']){const _0x143b5d=_0x411d5c(0x26d,0x234,0x237,0x2b6)[_0x23d325(0x498,0x45d,0x514,0x41b)]('|');let _0x1d2bae=-0xb*0x25f+0x176d*-0x1+0x3182;while(!![]){switch(_0x143b5d[_0x1d2bae++]){case'0':_0x36ac46['style']['display']=_0x23d325(0x525,0x559,0x4f6,0x526);continue;case'1':_0x36ac46['src']='';continue;case'2':_0x38bc25[_0x23d325(0x470,0x491,0x4c5,0x474)]['display']=_0x158b1d['ZYJXj'];continue;case'3':window[_0x23d325(0x478,0x4f0,0x485,0x402)+'fImage']=null;continue;case'4':_0x46d71a[_0x23d325(0x470,0x4c1,0x411,0x435)]['display']=_0x158b1d[_0x411d5c(0x244,0x270,0x1c9,0x266)];continue;}break;}}else _0x5c21a0(null),_0x3470cc['storeDelet'+'e'](_0x10408d);}}function removeNovelaiCharRefImage(){function _0x160247(_0x6597b6,_0x487e7d,_0xe4640e,_0x387397){return _0x20b3ca(_0x6597b6-0x18e,_0xe4640e,_0x387397-0x51,_0x387397-0x5d);}const _0x49a585={'VKWAu':function(_0x3ff684,_0x14d324){return _0x3ff684(_0x14d324);}};_0x49a585[_0x160247(0x142,0xa8,0x14a,0x10b)](updateNovelaiCharRefImagePreview,null),dbs['storeDelet'+'e'](NAI_CHAR_REF_CACHE_KEY);}function _0x20b3ca(_0x4b8efc,_0x129f12,_0x45f54e,_0x41d8f2){return _0x229f(_0x45f54e- -0x10c,_0x129f12);}async function handleNovelaiCharRefImageUpload(_0x5d261f){const _0x18e527={'EkuHz':_0x4032b6(0x5d0,0x5ed,0x62c,0x5c7),'LBLDB':function(_0x136e24,_0x13f7c3){return _0x136e24(_0x13f7c3);},'uvgSZ':_0x1b537b(0x2cb,0x354,0x337,0x342)+_0x1b537b(0x3df,0x390,0x381,0x3e5)+_0x1b537b(0x3e3,0x3b6,0x383,0x3c9)+_0x4032b6(0x613,0x5a2,0x5c0,0x5fc)};function _0x4032b6(_0x128c61,_0x4990a3,_0x58612d,_0x5550ea){return _0x20b3ca(_0x128c61-0x133,_0x4990a3,_0x58612d-0x4e3,_0x5550ea-0x146);}const _0x2eec7e=_0x5d261f['target'][_0x1b537b(0x38c,0x388,0x2f5,0x349)][-0x1*0xae5+-0x2630+0x3115];function _0x1b537b(_0x25bd25,_0x3cd7ee,_0x7ea75b,_0x5ccf4c){return _0x20b3ca(_0x25bd25-0x34,_0x7ea75b,_0x5ccf4c-0x243,_0x5ccf4c-0x1e1);}if(!_0x2eec7e)return;try{if(_0x4032b6(0x665,0x626,0x659,0x678)!==_0x18e527[_0x4032b6(0x60f,0x5d9,0x655,0x607)]){const _0x160ade=await _0x18e527[_0x4032b6(0x611,0x62e,0x63e,0x69d)](processUploadedImage,_0x2eec7e);updateNovelaiCharRefImagePreview(_0x160ade);}else _0x2b89d2[_0x4032b6(0x5db,0x5c8,0x596,0x60a)](_0x4032b6(0x64e,0x5b1,0x5d6,0x57a)+_0x1b537b(0x378,0x2fa,0x344,0x31a)+_0x4032b6(0x6be,0x66e,0x666,0x619)+_0x4032b6(0x6c1,0x6cd,0x67a,0x6d0)+_0x4032b6(0x5a7,0x5cd,0x5b5,0x5a2),_0x41fff0);}catch(_0x303949){console[_0x4032b6(0x60b,0x5a0,0x596,0x5ee)](_0x18e527['uvgSZ'],_0x303949),_0x18e527['LBLDB'](alert,_0x4032b6(0x641,0x5ef,0x645,0x650)+_0x303949['message']);}}function updateComfyUIImagePreview(_0xdab411){function _0x51b72e(_0x733109,_0x3cbdda,_0x2a5ebf,_0x58b4ea){return _0x20b3ca(_0x733109-0xa8,_0x2a5ebf,_0x733109- -0x240,_0x58b4ea-0x1ba);}const _0x28e9e1={};_0x28e9e1['oznBd']='previewIma'+'ge2',_0x28e9e1[_0x482625(0xe1,0x152,0x177,0xeb)]=_0x482625(0x130,0x149,0x181,0x132)+'mage-previ'+'ew-contain'+_0x482625(0x25f,0x1e7,0x242,0x22f)+_0x482625(0x16e,0x194,0x125,0x138)+_0x51b72e(-0x133,-0x162,-0x102,-0x147)+'r',_0x28e9e1[_0x482625(0x1eb,0x17e,0x152,0x178)]=_0x482625(0x18b,0x17d,0x1d9,0x105)+_0x482625(0x229,0x1e9,0x206,0x198)+_0x51b72e(-0x12d,-0x14f,-0xfd,-0x14b),_0x28e9e1[_0x482625(0x196,0x182,0x167,0x15d)]=_0x51b72e(-0xe1,-0xf8,-0xe0,-0x109),_0x28e9e1[_0x482625(0x126,0x189,0x1fe,0x190)]=function(_0x9900e5,_0x381839){return _0x9900e5!==_0x381839;};function _0x482625(_0x112a97,_0x23193a,_0x110e82,_0x442410){return _0x20b3ca(_0x112a97-0x1d9,_0x110e82,_0x23193a-0x49,_0x442410-0x128);}_0x28e9e1[_0x482625(0x1cf,0x169,0x144,0xf4)]=_0x482625(0x257,0x1f0,0x25d,0x1f3),_0x28e9e1['PdKEM']=_0x51b72e(-0x114,-0x171,-0x15a,-0xac)+'x',_0x28e9e1['hRTKc']=function(_0x5c769c,_0xfa5872){return _0x5c769c!==_0xfa5872;},_0x28e9e1['jRTEe']=function(_0x19a43c,_0x2a9294){return _0x19a43c===_0x2a9294;},_0x28e9e1['QYdlf']='hZXDr',_0x28e9e1[_0x482625(0x1e1,0x1e2,0x1d4,0x16e)]='JPwyz',_0x28e9e1[_0x482625(0x186,0x127,0x131,0xce)]=_0x482625(0x1ec,0x190,0x1b5,0x183);const _0x3a3278=_0x28e9e1,_0x4d6825=document[_0x51b72e(-0x139,-0xc0,-0xe8,-0x16a)+_0x482625(0x195,0x1f8,0x18b,0x236)](_0x3a3278[_0x482625(0xe0,0x102,0xa1,0x121)]),_0x17f281=document[_0x51b72e(-0xf4,-0x145,-0xae,-0x95)+_0x482625(0x1f5,0x1d4,0x19e,0x245)](_0x3a3278[_0x482625(0x125,0x152,0x137,0x14d)]),_0x209b81=document[_0x51b72e(-0x139,-0x185,-0xba,-0x1b4)+_0x482625(0x21c,0x1f8,0x193,0x23c)](_0x3a3278[_0x482625(0x1a3,0x17e,0x1b8,0x134)]);_0x4d6825[_0x482625(0x175,0xfd,0xd0,0xb3)]&&_0x4d6825[_0x482625(0xcc,0xfd,0xe7,0x14f)][_0x482625(0x13e,0x12a,0xc7,0x14d)](_0x3a3278['gPcaQ'])&&_0x3a3278[_0x482625(0x136,0x137,0xf8,0xff)](_0x4d6825[_0x482625(0x151,0xfd,0x90,0x16c)],_0xdab411)&&URL['revokeObje'+_0x51b72e(-0xa3,-0xc2,-0x76,-0x82)](_0x4d6825['src']);if(_0xdab411)_0x4d6825[_0x482625(0x100,0xfd,0xe9,0xb2)]=_0xdab411,_0x4d6825[_0x482625(0x196,0x13b,0x19b,0xc7)][_0x51b72e(-0x97,-0xdb,-0xeb,-0x60)]=_0x482625(0x177,0x1b7,0x18e,0x13c),_0x17f281[_0x482625(0xdc,0x13b,0x1ad,0xe8)][_0x482625(0x18e,0x1f2,0x195,0x1d4)]=_0x3a3278[_0x482625(0x10a,0x169,0x197,0x15f)],_0x209b81[_0x482625(0x193,0x13b,0x18c,0x1a5)][_0x482625(0x242,0x1f2,0x1a0,0x24b)]=_0x3a3278[_0x482625(0x18c,0x147,0xd4,0x166)];else{if(_0x3a3278[_0x51b72e(-0xbc,-0x5c,-0xe9,-0x47)](_0x3a3278[_0x51b72e(-0x167,-0x142,-0x1ae,-0x13e)],_0x3a3278[_0x51b72e(-0xa7,-0x8b,-0x76,-0x4e)])){const _0x22f457=_0x5103a6[_0x482625(0x155,0x150,0x180,0x15f)+'ById'](_0x3a3278[_0x51b72e(-0x187,-0x13e,-0x110,-0x19c)]),_0x4a2d2e=_0x38966b[_0x51b72e(-0xf4,-0x16e,-0x7c,-0xff)+'tor'](_0x3a3278[_0x482625(0x17e,0x152,0x1a1,0x103)]),_0x143fe5=_0x2f185a['getElement'+'ById'](_0x3a3278['GsxMt']);_0x22f457[_0x51b72e(-0x18c,-0x14d,-0x122,-0x1e9)]&&_0x22f457[_0x482625(0xff,0xfd,0x8d,0x147)][_0x482625(0xc7,0x12a,0xb9,0xca)](_0x3a3278[_0x51b72e(-0x107,-0x151,-0xcb,-0x143)])&&_0x3a3278[_0x51b72e(-0x100,-0xf2,-0x95,-0x123)](_0x22f457['src'],_0x379020)&&_0x12d5cd[_0x482625(0x199,0x1d3,0x1fc,0x181)+_0x482625(0x181,0x1e6,0x230,0x1ae)](_0x22f457[_0x482625(0xbc,0xfd,0xa6,0x10d)]);if(_0x5a015a)_0x22f457[_0x482625(0x134,0xfd,0xf2,0xc9)]=_0x28770a,_0x22f457['style'][_0x482625(0x181,0x1f2,0x1f3,0x218)]=_0x51b72e(-0xd2,-0x7e,-0x12d,-0x122),_0x4a2d2e['style'][_0x51b72e(-0x97,-0xa6,-0x88,-0x8c)]=_0x3a3278[_0x51b72e(-0x120,-0xde,-0x117,-0x18b)],_0x143fe5['style'][_0x51b72e(-0x97,-0x3f,-0xc4,-0xd2)]=_0x3a3278['PdKEM'];else{const _0x37c81a=(_0x51b72e(-0xf6,-0x8e,-0x7e,-0x100)+'2')['split']('|');let _0x13093e=0x1d12+0x1c7c*0x1+-0x8b*0x6a;while(!![]){switch(_0x37c81a[_0x13093e++]){case'0':_0x4a2d2e['style'][_0x51b72e(-0x97,-0x50,-0xeb,-0x36)]='flex';continue;case'1':_0x22f457['style'][_0x482625(0x235,0x1f2,0x19e,0x1f8)]=_0x3a3278[_0x482625(0x1b7,0x169,0x129,0x16b)];continue;case'2':_0x17cec6=null;continue;case'3':_0x5e5c1e[_0x51b72e(-0x10f,-0x12c,-0x121,-0xca)+_0x51b72e(-0x115,-0x127,-0xb6,-0xa5)]=null;continue;case'4':_0x22f457['src']='';continue;case'5':_0x143fe5['style']['display']=_0x3a3278[_0x51b72e(-0x120,-0xde,-0x125,-0x185)];continue;}break;}}}else{const _0x2e1c8a=(_0x482625(0x169,0x1c4,0x17b,0x1b7)+'1')[_0x51b72e(-0x126,-0x10a,-0x186,-0xc0)]('|');let _0x4b4ad0=0x6*-0x3b+0x6ee+-0x58c;while(!![]){switch(_0x2e1c8a[_0x4b4ad0++]){case'0':_0x4d6825[_0x482625(0x8c,0xfd,0x16d,0xb4)]='';continue;case'1':comfyuiImageObjectURL=null;continue;case'2':_0x4d6825[_0x51b72e(-0x14e,-0x1ad,-0x109,-0x18d)]['display']=_0x51b72e(-0x99,-0x1f,-0x44,-0x7a);continue;case'3':_0x209b81[_0x51b72e(-0x14e,-0x185,-0xfb,-0x17c)]['display']=_0x482625(0x24d,0x1f0,0x1a4,0x20c);continue;case'4':_0x17f281['style'][_0x482625(0x267,0x1f2,0x23c,0x263)]=_0x3a3278[_0x482625(0x130,0x127,0xce,0xcd)];continue;case'5':window[_0x51b72e(-0x10f,-0xfc,-0xde,-0x90)+_0x51b72e(-0x115,-0xa8,-0x160,-0xa8)]=null;continue;}break;}}}}function removeComfyUIImage(){const _0x218714={'uibHD':function(_0x35fd43,_0x229c5a){return _0x35fd43(_0x229c5a);}};function _0x1b9d34(_0x772ef0,_0x4d0b7a,_0x8279e2,_0x351d98){return _0x5ef6f8(_0x8279e2,_0x4d0b7a-0x11b,_0x8279e2-0xc0,_0x351d98-0x46);}function _0x1a755a(_0x45f39e,_0x79419d,_0x3c623c,_0x391ad1){return _0x20b3ca(_0x45f39e-0x11,_0x79419d,_0x45f39e- -0x298,_0x391ad1-0x100);}_0x218714[_0x1b9d34(0x451,0x45a,0x4f9,0x47b)](updateComfyUIImagePreview,null),dbs[_0x1a755a(-0x1cb,-0x175,-0x179,-0x205)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x2267e8){const _0x544737={'TCNrg':function(_0x537a94){return _0x537a94();},'sVQrJ':'2|1|3|4|0','kuqiF':_0x721025(0x51b,0x50c,0x528,0x563),'rDQAc':function(_0x240123,_0x518a97){return _0x240123(_0x518a97);},'LiYiw':'image','PXNpR':function(_0x47957d,_0x1b4421){return _0x47957d!==_0x1b4421;},'UZWZx':'oyymn','RqFww':_0x1cc162(-0x139,-0xc0,-0xf3,-0x70)+'I\x20API地址。','fumRp':function(_0x3c2e7c,_0x471d02,_0x34938d){return _0x3c2e7c(_0x471d02,_0x34938d);},'QGLyn':function(_0x5eef9e,_0x5cd3d2){return _0x5eef9e===_0x5cd3d2;},'GWTuY':_0x1cc162(-0x1b,0x15,-0x10,0x73),'MfeJi':function(_0x594ccd,_0x40f075){return _0x594ccd(_0x40f075);},'luczp':_0x1cc162(-0xb6,-0xb9,-0xaa,-0xf9)+_0x1cc162(0x5f,-0xe,-0x2f,-0x6c),'gWAYV':_0x1cc162(-0xac,-0x3b,-0x38,-0x8d),'IdeVH':function(_0x37008f,_0x389f0a){return _0x37008f+_0x389f0a;},'QzIuU':function(_0x243764,_0x85d93a){return _0x243764(_0x85d93a);},'cECRK':'错误详情:','AhGpa':function(_0x2f7c6b){return _0x2f7c6b();},'YuyKz':function(_0x7c65a1,_0x2eb71e){return _0x7c65a1===_0x2eb71e;},'SwqXh':_0x721025(0x405,0x44a,0x426,0x473),'fwqpM':'mTKxd','VVcKn':function(_0x195f8a,_0x534eb2){return _0x195f8a(_0x534eb2);},'iHwgd':function(_0x4291f1,_0x2b0ab3){return _0x4291f1+_0x2b0ab3;},'NOJWI':_0x721025(0x483,0x480,0x4ab,0x4a2)+':\x20','djEUs':_0x721025(0x4ce,0x480,0x44e,0x48d)+':'},_0x9fb487=extension_settings[extensionName];function _0x721025(_0x2081aa,_0xc4465b,_0x3b7e3c,_0x172306){return _0x20b3ca(_0x2081aa-0x1c5,_0x172306,_0xc4465b-0x365,_0x172306-0x1cd);}const _0x1ec649=_0x2267e8[_0x721025(0x52d,0x4d5,0x539,0x46a)][_0x1cc162(-0xe4,-0x72,0x0,-0xd0)][-0x4b*-0x8+0x21ad+-0x2405];if(!_0x1ec649)return;function _0x1cc162(_0x5e9905,_0x4c1cca,_0x5c2e26,_0x4f2bfd){return _0x20b3ca(_0x5e9905-0x56,_0x5e9905,_0x4c1cca- -0x178,_0x4f2bfd-0x178);}try{const _0xca3933=await processUploadedImageToBlob(_0x1ec649),_0x211255=URL['createObje'+_0x721025(0x484,0x502,0x51b,0x534)](_0xca3933);comfyuiImageObjectURL=_0x211255,_0x544737[_0x721025(0x3ff,0x47e,0x482,0x4a9)](updateComfyUIImagePreview,_0x211255);const _0x46087a=new FormData();_0x46087a[_0x721025(0x4ad,0x50b,0x571,0x56f)](_0x544737['LiYiw'],_0xca3933,_0x1ec649[_0x721025(0x441,0x422,0x403,0x3e1)]);let _0x58bc10=_0x9fb487[_0x1cc162(0x18,0x14,-0x24,0x38)][_0x721025(0x4af,0x45a,0x46a,0x4bd)]();if(!_0x58bc10){if(_0x544737['PXNpR'](_0x544737[_0x721025(0x444,0x421,0x49f,0x48c)],'QTVRf')){alert(_0x544737[_0x1cc162(-0x56,-0xbd,-0xbd,-0x96)]),removeComfyUIImage();return;}else _0x544737[_0x721025(0x4a7,0x4bb,0x483,0x520)](_0x18865a);}const _0x8cf7e9={};_0x8cf7e9[_0x721025(0x438,0x48b,0x503,0x50a)]=_0x1cc162(0x9,-0x3,0x3b,0x5f),_0x8cf7e9[_0x1cc162(-0xbc,-0xb4,-0xee,-0xef)]=_0x46087a;const _0x1fa2da=await _0x544737[_0x721025(0x460,0x449,0x3cc,0x41a)](fetch,_0x58bc10+('/upload/im'+'age'),_0x8cf7e9);if(_0x1fa2da['ok']){if(_0x544737[_0x1cc162(-0xa7,-0x40,-0xb8,-0x3f)](_0x544737[_0x721025(0x41b,0x428,0x3f1,0x406)],'PpQma')){const _0x5d8f7a=await _0x1fa2da[_0x721025(0x49a,0x483,0x463,0x46f)]();window[_0x721025(0x4d4,0x496,0x442,0x4c6)+'kaotupian']=_0x5d8f7a[_0x1cc162(-0x50,-0xbb,-0x6a,-0x111)],_0x544737[_0x1cc162(0x7a,-0x4,-0x3e,0x71)](addLog,_0x1cc162(-0x8a,-0x54,-0x4b,-0x8c)+_0x1cc162(0xf,-0xc,-0x51,-0x85)+JSON[_0x1cc162(0x3b,-0x11,0x6,0x2)](_0x5d8f7a)),console['log'](_0x544737['luczp'],_0x5d8f7a);const _0x36d70f=new FileReader();_0x36d70f['onloadend']=()=>{const _0x115bef=_0x36d70f[_0x3963ee(0x42,0x5e,-0x48,0x12)],_0x27fd80={};_0x27fd80['data']=_0x115bef,_0x27fd80[_0x3963ee(0x95,0x8d,0x9c,0xad)+_0x3963ee(0x2c,0x4a,0xb,0x41)]=_0x5d8f7a['name'];const _0x1c9028=_0x27fd80,_0x3925ff={};_0x3925ff['id']=COMFYUI_REF_CACHE_KEY,_0x3925ff[_0x14652e(0x46f,0x487,0x45f,0x458)]=_0x1c9028;function _0x14652e(_0x5ca916,_0x261814,_0x2e74ea,_0x1295c0){return _0x721025(_0x5ca916-0xde,_0x261814- -0x36,_0x2e74ea-0x1d2,_0x5ca916);}function _0x3963ee(_0x4a37d3,_0x2be011,_0x390422,_0x1e0286){return _0x1cc162(_0x4a37d3,_0x1e0286-0xae,_0x390422-0x6d,_0x1e0286-0xa0);}dbs[_0x3963ee(-0x2c,-0x1c,0x24,0x47)+_0x3963ee(0xe0,0x5a,0x80,0x7b)](_0x3925ff);},_0x36d70f['readAsData'+_0x721025(0x4a5,0x44d,0x417,0x4bc)](_0xca3933);}else{const _0xf8d9b6=_0x544737[_0x721025(0x533,0x4f7,0x4a5,0x4b4)]['split']('|');let _0x1c8011=-0x8fb+-0x19e+-0xa99*-0x1;while(!![]){switch(_0xf8d9b6[_0x1c8011++]){case'0':_0x427be2[_0x721025(0x40c,0x45f,0x493,0x44f)+_0x1cc162(-0x7e,-0x59,-0x45,-0x60)]=null;continue;case'1':_0x25de84[_0x1cc162(-0x90,-0x86,-0xc8,-0x72)]['display']=_0x544737['kuqiF'];continue;case'2':_0x20f2ec[_0x721025(0x3bb,0x419,0x457,0x45b)]='';continue;case'3':_0x36c070[_0x1cc162(-0xd7,-0x86,-0x104,-0xaf)]['display']=_0x1cc162(-0x80,-0x31,0x33,0x11);continue;case'4':_0x358683[_0x721025(0x4c4,0x457,0x464,0x406)][_0x1cc162(-0x2e,0x31,0x7b,-0x26)]=_0x544737[_0x1cc162(-0xed,-0xae,-0xf5,-0x99)];continue;}break;}}}else{if(_0x544737[_0x1cc162(-0x17,-0x7c,-0x3a,-0xf5)](_0x721025(0x40f,0x41c,0x3c2,0x3c1),_0x544737[_0x1cc162(-0x57,-0xba,-0xbb,-0x98)])){const _0x3a7170=await _0x1fa2da[_0x1cc162(-0x93,-0xb1,-0xbd,-0x5b)]();_0x544737[_0x721025(0x45d,0x4d9,0x4a8,0x48e)](alert,_0x544737[_0x1cc162(0xf,-0x1a,-0x77,-0x66)]('上传失败:\x20',_0x3a7170)),_0x544737[_0x1cc162(-0x2b,-0x9d,-0xb8,-0xc6)](addLog,'图片上传失败,\x20错误'+_0x1cc162(-0xcb,-0xc3,-0xe2,-0x105)+_0x3a7170),console[_0x721025(0x3c8,0x418,0x3eb,0x40e)](_0x544737[_0x721025(0x4b7,0x4fa,0x558,0x504)],_0x3a7170),_0x544737[_0x1cc162(0x54,-0x14,0x5,-0x48)](removeComfyUIImage);}else{const _0x251df4=_0x4a66ef[_0x1cc162(-0x117,-0x98,-0x105,-0xfe)](_0x1c8d93,arguments);return _0x5d74cc=null,_0x251df4;}}}catch(_0x243c7b){_0x544737['YuyKz'](_0x544737[_0x721025(0x4ed,0x48e,0x451,0x4b5)],_0x544737[_0x721025(0x551,0x4f8,0x4a7,0x523)])?(_0x544737[_0x1cc162(-0x90,-0x5f,0x7,-0xa1)](_0x2f6e03,null),_0x46d3ba[_0x1cc162(-0xa6,-0xab,-0xb6,-0x90)+'e'](_0x1be9e2)):(_0x544737[_0x1cc162(0x9,-0x66,-0x9d,-0x48)](alert,_0x544737[_0x721025(0x50d,0x4f9,0x4ed,0x538)](_0x544737[_0x1cc162(-0x22,-0x9,-0x61,-0x20)],_0x243c7b[_0x721025(0x4b1,0x4b8,0x49c,0x527)])),console[_0x721025(0x404,0x418,0x460,0x411)](_0x544737[_0x1cc162(-0x9a,-0xb6,-0xd0,-0x93)],_0x243c7b),addLog(_0x1cc162(0x12,0x18,0x1a,-0x43)+_0x721025(0x472,0x41a,0x401,0x39e)+JSON[_0x721025(0x4bf,0x4cc,0x479,0x464)](_0x243c7b)),_0x544737[_0x721025(0x4b6,0x4c9,0x545,0x466)](removeComfyUIImage));}}async function loadCachedImages(){function _0x479045(_0xbdcbd1,_0x46cd35,_0x1c3d43,_0x57d786){return _0x5ef6f8(_0xbdcbd1,_0x46cd35-0xd6,_0x1c3d43-0x184,_0x46cd35- -0x35f);}const _0x23840b={'sdxcs':_0x479045(0x14d,0x1ad,0x1c4,0x191)+_0x22cbb5(0x22b,0x28c,0x229,0x2a1)+_0x22cbb5(0x36b,0x39f,0x38c,0x343),'sKQPg':'novelai-re'+_0x22cbb5(0x37d,0x2eb,0x32c,0x305)+_0x479045(0x8c,0x10b,0xbd,0xaa)+_0x22cbb5(0x22e,0x294,0x2d4,0x292),'xnNRn':_0x22cbb5(0x26b,0x220,0x312,0x29a),'GpPWU':'inline-fle'+'x','biPlw':'4|3|2|1|0','xCPiM':_0x22cbb5(0x330,0x318,0x2fd,0x369),'DvkqL':_0x22cbb5(0x36b,0x2de,0x2fe,0x309),'WJRSJ':'Error\x20proc'+_0x22cbb5(0x366,0x37f,0x2fe,0x364)+_0x22cbb5(0x362,0x357,0x378,0x348)+_0x22cbb5(0x2d4,0x2e3,0x2ba,0x29f),'aJoLh':function(_0x1741f8,_0x9826f6){return _0x1741f8(_0x9826f6);},'MxjUK':function(_0x1afd67,_0x21beab){return _0x1afd67+_0x21beab;},'EefQx':'图片处理失败:\x20','aVoPF':function(_0x1a0197,_0x5e6653){return _0x1a0197!==_0x5e6653;},'gyiah':_0x22cbb5(0x2ef,0x35b,0x304,0x2de),'mpdJN':_0x22cbb5(0x2a3,0x2b0,0x297,0x2f9),'jETcc':_0x479045(0x11f,0x101,0x15d,0xdc)+_0x479045(0x85,0xe5,0xa0,0x111)+_0x22cbb5(0x316,0x246,0x2a1,0x2a9)+_0x479045(0x159,0x1a4,0x17a,0x200),'zBYyH':'xMWJo','Wqitg':function(_0x5c9ed5,_0x883d34){return _0x5c9ed5(_0x883d34);},'FPFhO':function(_0x4dbbdc,_0x400aed){return _0x4dbbdc(_0x400aed);},'FSZBw':function(_0x12f8d9,_0x3ed842){return _0x12f8d9(_0x3ed842);},'FhKTh':function(_0x43ac36,_0x367646){return _0x43ac36===_0x367646;},'Suwuu':'string','uUeZN':function(_0x4fa30b,_0x3a1fdc){return _0x4fa30b(_0x3a1fdc);},'mqedv':function(_0x189cd6,_0x8940f4){return _0x189cd6(_0x8940f4);},'yifCw':'Loaded\x20Com'+_0x22cbb5(0x2a0,0x2dd,0x29e,0x2d7)+_0x479045(0x131,0x177,0x131,0x19a)+_0x22cbb5(0x2ef,0x2ec,0x375,0x350)+_0x479045(0x91,0x110,0x95,0x104)+_0x479045(0xd0,0xfe,0x14c,0x105)+'\x20to\x20update'+_0x22cbb5(0x315,0x31e,0x24c,0x2ae)+_0x479045(0x10e,0x14a,0x141,0x177)+_0x22cbb5(0x377,0x37c,0x36b,0x36c),'UgQVD':_0x479045(0x118,0x101,0xfe,0x13f)+'ing\x20cached'+_0x479045(0x1b4,0x195,0x1f6,0x168)+'mage:'};await dbs['openDB']();try{const _0xaea57=await dbs[_0x22cbb5(0x2b8,0x2ee,0x2dd,0x293)+'nly'](NAI_VIBE_CACHE_KEY);_0xaea57&&_0xaea57['data']&&_0x23840b[_0x22cbb5(0x36e,0x2d2,0x319,0x303)](updateNovelaiImagePreview,_0xaea57['data']);}catch(_0x5ba532){if(_0x23840b['aVoPF'](_0x23840b[_0x479045(0x18a,0x141,0x197,0x19a)],_0x23840b[_0x479045(0x1b3,0x1af,0x1e6,0x178)]))console[_0x479045(0xe9,0xc1,0x140,0xdb)](_0x23840b[_0x22cbb5(0x266,0x27a,0x274,0x2b6)],_0x5ba532);else{const _0x378db1=_0x41e3e2[_0x479045(0x152,0x115,0xd2,0x13f)+_0x479045(0x164,0x1bd,0x169,0x1ad)](_0x23840b[_0x22cbb5(0x353,0x2d2,0x314,0x2e4)]),_0x32d26f=_0x5b7deb[_0x479045(0x14a,0x15a,0x1b8,0x1b8)+_0x22cbb5(0x348,0x31d,0x361,0x34d)](_0x22cbb5(0x380,0x360,0x3ae,0x35c)+_0x479045(0x1a1,0x135,0x185,0x180)+_0x479045(0x119,0x16a,0xf3,0x14f)+_0x479045(0x17c,0x163,0xf7,0x174)+'r\x20.st-chat'+_0x22cbb5(0x2a7,0x314,0x2ea,0x2af)+_0x479045(0x165,0x1b3,0x1f7,0x174)),_0x2664fd=_0x159bae[_0x479045(0xa6,0x115,0xef,0x156)+_0x22cbb5(0x31a,0x385,0x3c0,0x371)](_0x23840b[_0x479045(0xe6,0xf9,0x10f,0x11b)]);if(_0x5a530b&&_0x2c4acb[_0x22cbb5(0x262,0x22d,0x303,0x2a3)](_0x23840b[_0x22cbb5(0x2aa,0x23f,0x2b9,0x2b9)])){_0x378db1[_0x479045(0x7e,0xc2,0xd3,0x120)]=_0x56393a,_0x378db1[_0x22cbb5(0x2fb,0x32b,0x322,0x2b4)]['display']=_0x22cbb5(0x307,0x2ca,0x2bf,0x330),_0x32d26f[_0x479045(0xde,0x100,0x10d,0x110)]['display']='none',_0x2664fd[_0x22cbb5(0x237,0x24d,0x295,0x2b4)][_0x479045(0x1bc,0x1b7,0x1b3,0x206)]=_0x23840b['GpPWU'];const _0x2131a0=_0x2e2323[_0x479045(0x18a,0x128,0xeb,0x19f)](','),_0xb2f301=_0x2131a0[-0xb82*-0x3+0x1*-0xbf3+0x1*-0x1693][_0x22cbb5(0x2f8,0x327,0x2a9,0x2dc)](':')[-0x6f*-0x2b+0x2a1+-0x1545][_0x22cbb5(0x272,0x31d,0x2de,0x2dc)](';')[-0x13f3+-0x1aac+-0x1*-0x2e9f];_0x1808e6=_0xb2f301,_0x5805f9[_0x22cbb5(0x24c,0x27f,0x325,0x2bc)+_0x479045(0xe6,0x12d,0xf9,0x155)]=_0x2131a0[0x43+0x1a1e+-0x1a60];const _0x340ae3={};_0x340ae3['id']=_0x40faa2,_0x340ae3[_0x22cbb5(0x2a2,0x30a,0x381,0x31a)]=_0x295bb2,_0x55d571[_0x22cbb5(0x291,0x33a,0x308,0x2d3)+'rite'](_0x340ae3);}else{const _0x4e3aba=_0x23840b[_0x22cbb5(0x391,0x2a4,0x2aa,0x316)][_0x479045(0x119,0x128,0x190,0x138)]('|');let _0x2e6ee4=-0x1*-0x1d23+-0x1f6e+-0x1*-0x24b;while(!![]){switch(_0x4e3aba[_0x2e6ee4++]){case'0':_0x1bcb21[_0x22cbb5(0x30a,0x317,0x298,0x2bc)+_0x479045(0x156,0x12d,0xb3,0x14f)]=null;continue;case'1':_0x2664fd['style']['display']=_0x23840b[_0x479045(0x184,0x173,0xfa,0x1d5)];continue;case'2':_0x32d26f['style'][_0x22cbb5(0x33d,0x335,0x333,0x36b)]=_0x23840b[_0x22cbb5(0x2ab,0x286,0x248,0x28d)];continue;case'3':_0x378db1[_0x22cbb5(0x280,0x25e,0x287,0x2b4)][_0x479045(0x220,0x1b7,0x1c1,0x153)]=_0x479045(0x1b7,0x1b5,0x17f,0x14b);continue;case'4':_0x378db1[_0x22cbb5(0x2ca,0x223,0x23c,0x276)]='';continue;}break;}}}}function _0x22cbb5(_0x60f14,_0x3667b9,_0x3d77c6,_0xf6ca7c){return _0x20b3ca(_0x60f14-0x1c2,_0x60f14,_0xf6ca7c-0x1c2,_0xf6ca7c-0xe6);}try{if(_0x23840b[_0x479045(0x1d5,0x16b,0x103,0x13a)](_0x23840b[_0x22cbb5(0x2c4,0x341,0x390,0x333)],_0x23840b[_0x22cbb5(0x34e,0x3a9,0x2fb,0x333)]))_0x525649[_0x479045(0x110,0xc1,0x5d,0x73)](_0x23840b[_0x22cbb5(0x2c0,0x2f6,0x2a8,0x2c3)],_0x1e390d),_0x23840b[_0x22cbb5(0x362,0x359,0x345,0x303)](_0x24cc8c,_0x23840b[_0x479045(0x60,0xdd,0x124,0x142)](_0x23840b[_0x479045(0x189,0x197,0x13e,0x1b8)],_0x5d43b2['message']));else{const _0x2f0626=await dbs[_0x22cbb5(0x282,0x24b,0x263,0x293)+_0x22cbb5(0x316,0x295,0x340,0x2f1)](NAI_CHAR_REF_CACHE_KEY);_0x2f0626&&_0x2f0626[_0x479045(0x1df,0x166,0x1c4,0x147)]&&_0x23840b[_0x22cbb5(0x2e1,0x2c3,0x2b8,0x2a8)](updateNovelaiCharRefImagePreview,_0x2f0626[_0x22cbb5(0x2e2,0x398,0x38e,0x31a)]);}}catch(_0xcd9471){console[_0x479045(0x84,0xc1,0xb1,0x100)](_0x22cbb5(0x2d1,0x28e,0x2e5,0x2b5)+_0x479045(0x15f,0xe5,0xad,0xbe)+_0x22cbb5(0x31d,0x2d4,0x36a,0x345)+'har\x20Ref\x20im'+'age:',_0xcd9471);}try{const _0x5037fe=await dbs['storeReadO'+_0x479045(0x15c,0x13d,0x16b,0xfe)](COMFYUI_REF_CACHE_KEY);if(_0x5037fe&&_0x5037fe[_0x22cbb5(0x380,0x373,0x2a5,0x31a)]&&_0x5037fe[_0x22cbb5(0x31a,0x338,0x2ea,0x31a)][_0x479045(0x15f,0x166,0x167,0x127)]&&_0x5037fe[_0x479045(0xee,0x166,0x1af,0x180)]['serverFile'+'Name']){const _0x461898=_0x5037fe[_0x479045(0x16c,0x166,0x107,0x1c9)],_0x2a97fe=await _0x23840b[_0x479045(0x1b0,0x19f,0x17d,0x15a)](fetch,_0x461898[_0x22cbb5(0x33c,0x2af,0x30d,0x31a)]),_0x150452=await _0x2a97fe[_0x479045(0xd5,0x14c,0x1cb,0x1bc)](),_0x2a5699=URL['createObje'+'ctURL'](_0x150452);_0x23840b[_0x479045(0x12a,0xf4,0x9f,0xb0)](updateComfyUIImagePreview,_0x2a5699),comfyuiImageObjectURL=_0x2a5699,window[_0x22cbb5(0x36a,0x32e,0x32d,0x2f3)+_0x479045(0x1a4,0x139,0xc6,0xfd)]=_0x461898[_0x479045(0x1d1,0x185,0x142,0x1c0)+_0x479045(0xe2,0x119,0xcc,0x165)],_0x23840b[_0x22cbb5(0x2f8,0x2a5,0x29c,0x2c7)](addLog,_0x479045(0x151,0xd7,0x9b,0x14d)+_0x479045(0x17f,0x11e,0x116,0x18c)+_0x461898[_0x22cbb5(0x2e3,0x35d,0x3b5,0x339)+_0x479045(0x149,0x119,0x16e,0xfd)]),console['log']('Loaded\x20Com'+_0x22cbb5(0x2d3,0x2a1,0x2f7,0x2d7)+_0x479045(0xec,0x13b,0xe1,0x1a3)+'e:\x20'+_0x461898[_0x22cbb5(0x308,0x2ec,0x397,0x339)+_0x479045(0xa6,0x119,0x18f,0x134)]);}else{if(_0x5037fe&&_0x23840b[_0x479045(0x1c4,0x181,0x1d8,0x12e)](typeof _0x5037fe['data'],_0x23840b['Suwuu'])){const _0xea1e8b=await _0x23840b['uUeZN'](fetch,_0x5037fe[_0x22cbb5(0x2c3,0x388,0x31a,0x31a)]),_0x386fa1=await _0xea1e8b[_0x479045(0xf7,0x14c,0x167,0x1ac)](),_0x2bf054=URL[_0x479045(0x193,0x1b6,0x1b0,0x16b)+_0x22cbb5(0x2ef,0x2f7,0x2e9,0x35f)](_0x386fa1);_0x23840b[_0x22cbb5(0x355,0x37a,0x3a3,0x341)](updateComfyUIImagePreview,_0x2bf054),comfyuiImageObjectURL=_0x2bf054,console[_0x479045(0x193,0x160,0x15d,0x148)](_0x23840b['yifCw']);}}}catch(_0x550ff7){console[_0x22cbb5(0x208,0x296,0x25b,0x275)](_0x23840b[_0x22cbb5(0x319,0x2e9,0x2ab,0x2d0)],_0x550ff7);}}export function initImageUpload(_0x4b48f3){function _0x3087da(_0x174c51,_0x550d38,_0x27d8a9,_0xb51360){return _0x5ef6f8(_0x174c51,_0x550d38-0x7c,_0x27d8a9-0xd,_0xb51360- -0x5ff);}const _0x274c73={'etckn':_0x3087da(-0x18d,-0x146,-0x1b6,-0x19f)+'ing\x20cached'+'\x20ComfyUI\x20i'+_0x3087da(-0x1e8,-0x1eb,-0x178,-0x183),'msCZA':'ehZzC','zCoAB':_0x5ded5c(0x28d,0x2fe,0x34f,0x350),'TZmys':'imageInput'+_0x3087da(-0xcc,-0x130,-0xc3,-0xef)+'ref','DkGru':function(_0x4c732d,_0x57a83a){return _0x4c732d(_0x57a83a);},'OgZOt':function(_0x2cff02,_0x505e07){return _0x2cff02===_0x505e07;},'mwTje':'vZBEc','gwRGW':_0x5ded5c(0x2ed,0x2ea,0x2e8,0x31f)+'2','vrrux':function(_0x3b3d36){return _0x3b3d36();},'yQxqH':_0x5ded5c(0x2d0,0x33f,0x3bb,0x3ba),'mOQfM':'#imageInpu'+_0x3087da(-0x1e3,-0x1e3,-0x134,-0x168),'iHAdE':_0x5ded5c(0x2e4,0x2d1,0x2c8,0x325),'XvEDL':_0x5ded5c(0x2ef,0x349,0x35a,0x2ee)+_0x5ded5c(0x27a,0x251,0x2c2,0x270)+_0x5ded5c(0x29a,0x2e9,0x28a,0x367)+_0x3087da(-0x129,-0x198,-0x171,-0x17f),'Jktwj':_0x5ded5c(0x232,0x2b1,0x2d1,0x321)+_0x3087da(-0xe5,-0x154,-0xb4,-0x12a)+_0x5ded5c(0x258,0x296,0x2ad,0x217),'vlDGe':_0x5ded5c(0x2e6,0x2cd,0x2e1,0x2a6)+_0x3087da(-0xe5,-0x10a,-0xd7,-0x110)+_0x3087da(-0x14c,-0x11f,-0x1b7,-0x19a)};function _0x5ded5c(_0x2b261e,_0x55bdb9,_0x1d6550,_0x458e0d){return _0x5ef6f8(_0x2b261e,_0x55bdb9-0x1e4,_0x1d6550-0x6b,_0x55bdb9- -0x1d2);}loadCachedImages(),_0x4b48f3[_0x5ded5c(0x1e9,0x261,0x26a,0x281)]('#novelai-s'+_0x3087da(-0x143,-0x151,-0x171,-0x110)+_0x5ded5c(0x310,0x293,0x24b,0x298))['on'](_0x274c73[_0x3087da(-0x20a,-0x141,-0x22f,-0x1be)],()=>{const _0x3c5a73={};function _0x107884(_0x33a263,_0x2050df,_0x2ad632,_0x43b6bf){return _0x5ded5c(_0x43b6bf,_0x2050df- -0x3af,_0x2ad632-0x66,_0x43b6bf-0xc3);}_0x3c5a73[_0x116cb0(0x151,0xbc,0xfe,0xf2)]=_0x274c73[_0x107884(-0xe9,-0x131,-0xd8,-0xf5)];function _0x116cb0(_0xa72475,_0x25e0f7,_0x384cbd,_0x51f478){return _0x5ded5c(_0xa72475,_0x51f478- -0x177,_0x384cbd-0x16c,_0x51f478-0x122);}const _0x34b9ff=_0x3c5a73;_0x274c73['msCZA']===_0x274c73[_0x107884(-0x139,-0xba,-0x10c,-0xf3)]?_0x103cef[_0x116cb0(0x14a,0xe5,0x124,0xd7)](_0x34b9ff[_0x116cb0(0x10a,0xd7,0x129,0xf2)],_0x13a6fd):document[_0x107884(-0x126,-0x10d,-0xdf,-0xaf)+_0x116cb0(0x215,0x23e,0x211,0x1d3)]('imageInput'+_0x116cb0(0x137,0x16a,0x1ac,0x166))[_0x107884(-0x8a,-0x70,-0xc1,-0xd5)]();}),_0x4b48f3[_0x5ded5c(0x217,0x261,0x1e7,0x277)](_0x274c73[_0x5ded5c(0x2e6,0x291,0x2d4,0x308)])['on'](_0x274c73[_0x5ded5c(0x27b,0x2e8,0x348,0x2c6)],handleNovelaiImageUpload),_0x4b48f3[_0x5ded5c(0x253,0x261,0x22f,0x226)](_0x3087da(-0x178,-0x105,-0x198,-0x17e)+_0x3087da(-0x147,-0x169,-0xd5,-0x14c)+_0x5ded5c(0x2e8,0x293,0x2f6,0x2dd))['on'](_0x274c73[_0x3087da(-0x21e,-0x1f1,-0x1bf,-0x1be)],()=>{removeNovelaiImage();}),_0x4b48f3[_0x5ded5c(0x1e8,0x261,0x259,0x273)](_0x274c73[_0x5ded5c(0x2d2,0x26e,0x1f4,0x2d9)])['on'](_0x3087da(-0x157,-0x9b,-0x100,-0xee),()=>{function _0x575c21(_0x5dab9e,_0x421e6a,_0x5851ff,_0x1b21c8){return _0x5ded5c(_0x5851ff,_0x5dab9e- -0x45b,_0x5851ff-0x15c,_0x1b21c8-0x118);}function _0x3895d3(_0x2694b0,_0x36a95a,_0x5dcb0a,_0x1d0f86){return _0x3087da(_0x1d0f86,_0x36a95a-0xc9,_0x5dcb0a-0x180,_0x5dcb0a-0x298);}document[_0x3895d3(0x180,0xbd,0x10d,0x141)+'ById'](_0x274c73[_0x575c21(-0x170,-0x196,-0x137,-0x1a0)])[_0x575c21(-0x11c,-0x11c,-0x170,-0x128)]();}),_0x4b48f3['find'](_0x274c73[_0x5ded5c(0x239,0x271,0x223,0x24c)])['on'](_0x274c73[_0x5ded5c(0x356,0x2e8,0x2d6,0x294)],handleNovelaiCharRefImageUpload),_0x4b48f3[_0x5ded5c(0x260,0x261,0x28e,0x2b5)](_0x5ded5c(0x29e,0x2af,0x2e3,0x2d3)+_0x3087da(-0xec,-0x154,-0xa9,-0x114)+'-ref-image'+'-btn')['on'](_0x274c73[_0x3087da(-0x140,-0x1a1,-0x197,-0x1be)],()=>{function _0x48feaa(_0x58b059,_0x250ead,_0x389f7c,_0x217944){return _0x5ded5c(_0x58b059,_0x389f7c- -0x43e,_0x389f7c-0x145,_0x217944-0xf2);}const _0x594b67={'BpoOp':function(_0x5189d5,_0x12d455){function _0x3c952c(_0x17e994,_0x21b421,_0x583d35,_0x20fe92){return _0x229f(_0x20fe92-0x318,_0x17e994);}return _0x274c73[_0x3c952c(0x52f,0x540,0x573,0x54c)](_0x5189d5,_0x12d455);}};function _0x15cf85(_0x486259,_0x5f0fac,_0x3875bb,_0x184b9e){return _0x5ded5c(_0x5f0fac,_0x3875bb- -0x7f,_0x3875bb-0x1ab,_0x184b9e-0x81);}_0x274c73[_0x15cf85(0x20a,0x269,0x224,0x29d)](_0x274c73[_0x48feaa(-0x138,-0xbc,-0x126,-0x185)],_0x15cf85(0x269,0x293,0x2b4,0x263))?removeNovelaiCharRefImage():_0x594b67[_0x48feaa(-0x12b,-0x156,-0x186,-0x118)](_0x59df95,_0x1b87eb[_0x48feaa(-0x194,-0x12c,-0x14b,-0xe5)]);}),_0x4b48f3[_0x3087da(-0x193,-0x1d6,-0x158,-0x1cc)](_0x274c73[_0x3087da(-0x1af,-0x140,-0x1af,-0x14a)])['on'](_0x274c73[_0x3087da(-0x1ae,-0x147,-0x1c9,-0x1be)],()=>{function _0x449e6d(_0xa5b7e9,_0x508383,_0x4bd26a,_0x102c8d){return _0x3087da(_0x4bd26a,_0x508383-0x141,_0x4bd26a-0xd3,_0xa5b7e9-0x6d1);}function _0x10e97c(_0x2457be,_0x523928,_0x43e18b,_0x72af4a){return _0x3087da(_0x523928,_0x523928-0x5,_0x43e18b-0x4a,_0x2457be-0xf8);}document[_0x10e97c(-0x93,-0x6b,-0x10a,-0x53)+_0x449e6d(0x5ee,0x65e,0x5e6,0x5e6)](_0x274c73['gwRGW'])['click']();}),_0x4b48f3[_0x5ded5c(0x236,0x261,0x1e3,0x224)](_0x5ded5c(0x27c,0x2b1,0x2e1,0x2d7)+'t2')['on'](_0x5ded5c(0x312,0x2d1,0x2e8,0x2ff),handleImageUpload2),_0x4b48f3['find'](_0x5ded5c(0x2cb,0x27d,0x2f1,0x243)+_0x3087da(-0x15f,-0xd4,-0xd5,-0x14c)+'e-btn')['on'](_0x274c73[_0x5ded5c(0x2cf,0x26f,0x27f,0x2d2)],()=>{function _0x54cfaf(_0xc1d8ca,_0x1d1e59,_0x5545d4,_0x370ca0){return _0x5ded5c(_0x370ca0,_0x1d1e59- -0x115,_0x5545d4-0x1a2,_0x370ca0-0x1e1);}_0x274c73[_0x54cfaf(0x1c8,0x1c1,0x20d,0x21a)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};