(function(_0x5af1a7,_0x41f3bc){const _0x453a97=_0x5af1a7();function _0x56dc3a(_0x343ad3,_0x2a86e8,_0x42a4ce,_0x543f7e){return _0x3826(_0x42a4ce- -0x192,_0x2a86e8);}function _0x197f57(_0x24052a,_0x34a0e6,_0x1ac79e,_0xa9d926){return _0x3826(_0x24052a-0x21b,_0x34a0e6);}while(!![]){try{const _0x31b24b=-parseInt(_0x197f57(0x42d,0x493,0x3f8,0x403))/(0xcf*-0x1+-0x1*-0x24bf+0x1*-0x23ef)+-parseInt(_0x197f57(0x451,0x3f2,0x413,0x497))/(-0x1405+0x1*0x7f7+-0xc10*-0x1)+-parseInt(_0x197f57(0x3e7,0x3f3,0x428,0x3dc))/(-0x1123+-0xb*0x33b+0x1*0x34af)*(parseInt(_0x56dc3a(0x86,0xdc,0xdc,0x10a))/(0x1797+0xa83+-0x1*0x2216))+-parseInt(_0x197f57(0x3d0,0x3a5,0x3d4,0x441))/(-0xd1a+0xad7+0x2*0x124)*(parseInt(_0x56dc3a(0x123,0xaa,0xb3,0x61))/(0x1a3e+-0x1f9f*-0x1+-0x39d7))+-parseInt(_0x197f57(0x432,0x3c5,0x428,0x409))/(-0x1*0xe63+-0x1*0x1c1d+0x2a87)*(parseInt(_0x197f57(0x470,0x4ed,0x466,0x425))/(0x3f1*0x6+0x8*-0x326+0x3*0x86))+-parseInt(_0x56dc3a(0xad,-0x26,0x4d,0x4d))/(-0xc92*0x2+0xfe7*-0x1+0x2914)*(-parseInt(_0x56dc3a(-0xc,0x9e,0x71,0x2b))/(0x5*0x5f3+-0xc52*-0x1+0x7*-0x601))+-parseInt(_0x197f57(0x492,0x436,0x46b,0x48f))/(-0x2*0x1355+0x212b+-0x2c5*-0x2)*(-parseInt(_0x197f57(0x3f9,0x3d7,0x399,0x43d))/(0xc96+0x11fc*0x1+0xf43*-0x2));if(_0x31b24b===_0x41f3bc)break;else _0x453a97['push'](_0x453a97['shift']());}catch(_0x41e238){_0x453a97['push'](_0x453a97['shift']());}}}(_0x4004,-0x40ec+0x7d*0x10c9+-0x16*0x2b4f));function _0x196923(_0x10474e,_0xffa04e,_0x182fff,_0x5c5024){return _0x3826(_0xffa04e-0xbf,_0x5c5024);}const _0x534100=(function(){const _0x5371da={};_0x5371da[_0x5c6a74(-0x17b,-0x1a0,-0x166,-0x13c)]=function(_0x544533,_0x508135){return _0x544533===_0x508135;},_0x5371da[_0x401384(0x58f,0x579,0x57e,0x51d)]='Lszjl';function _0x401384(_0x406948,_0x122e57,_0x94e354,_0x5334de){return _0x3826(_0x122e57-0x3a2,_0x406948);}const _0x30f383=_0x5371da;function _0x5c6a74(_0x51fb15,_0x2079bd,_0x1afc60,_0xd47130){return _0x3826(_0x2079bd- -0x3df,_0x51fb15);}let _0x3f4f35=!![];return function(_0x3f4e2e,_0x553974){const _0x432aa7=_0x3f4f35?function(){function _0x1630df(_0xdb569e,_0x333de0,_0x4a7763,_0x4bcdbb){return _0x3826(_0x4bcdbb-0x22a,_0xdb569e);}function _0x2fe047(_0x26af78,_0x188c12,_0xeb2bc1,_0x273fc3){return _0x3826(_0xeb2bc1-0x1be,_0x273fc3);}if(_0x553974){if(_0x30f383['qxnkG'](_0x30f383[_0x1630df(0x41e,0x408,0x3b5,0x401)],_0x30f383['CJYzP'])){const _0x57fc1b=_0x553974[_0x1630df(0x513,0x427,0x4a5,0x496)](_0x3f4e2e,arguments);return _0x553974=null,_0x57fc1b;}else _0x50ffd0[_0x1630df(0x430,0x428,0x516,0x4a8)+_0x2fe047(0x411,0x37c,0x3af,0x353)](_0x1630df(0x48f,0x4ba,0x47a,0x459)+'_novelai')['click']();}}:function(){};return _0x3f4f35=![],_0x432aa7;};}()),_0x47ce7c=_0x534100(this,function(){const _0x1027e6={};_0x1027e6[_0x903b1d(0x1b,-0x53,-0x4e,0x93)]=_0x8ea61f(-0xd2,-0x64,-0x9b,-0x3a)+'+$';function _0x903b1d(_0x593f1b,_0x146777,_0x1f153d,_0x110f96){return _0x3826(_0x593f1b- -0x196,_0x1f153d);}const _0x47e369=_0x1027e6;function _0x8ea61f(_0xaa68fa,_0xc8744c,_0x2567e3,_0x5e776c){return _0x3826(_0xc8744c- -0x265,_0x2567e3);}return _0x47ce7c['toString']()[_0x8ea61f(-0x13,-0x93,-0x85,-0x62)](_0x47e369[_0x8ea61f(-0x76,-0xb4,-0x115,-0x67)])['toString']()[_0x8ea61f(-0x79,-0x48,-0x67,0xe)+'r'](_0x47ce7c)[_0x903b1d(0x3c,0x4b,0xbc,0xb1)](_0x47e369[_0x8ea61f(-0x12b,-0xb4,-0x8b,-0x100)]);});_0x47ce7c();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x196923(0x375,0x2f7,0x357,0x372)+_0x2524ad(-0x211,-0x1f6,-0x274,-0x1c2)+'ransfer_im'+_0x2524ad(-0x220,-0x1dc,-0x24a,-0x1ab),NAI_CHAR_REF_CACHE_KEY=_0x196923(0x31e,0x2f7,0x2ac,0x2a1)+_0x196923(0x2d5,0x2d8,0x2b8,0x27a)+_0x196923(0x25b,0x27a,0x2b1,0x2a3),COMFYUI_REF_CACHE_KEY=_0x196923(0x28e,0x26f,0x251,0x2e1)+_0x2524ad(-0x212,-0x1f5,-0x285,-0x28e)+_0x196923(0x29d,0x25e,0x208,0x2bb);function _0x4004(){const _0x3018cb=['zw1VDMuTAw1HzW','lxjLzI1PBwfNzq','zxiGlNn0lwnOyq','ntm0mJi2q2DYENvX','zw9eEgm','rxjYB3iGChjVyW','ssbbueNLNldLNydJGii','6k+35ywi6k6+572Uq29TzNLv','y29TzNL1AvvYBa','z2uY','z2v0rwXLBwvUDa','ignHy2HLihrVia','BM9Uzq','5lUo57Yt5A2y5yQG6l29q29TzNK','tKPks1u','C2Xctha','BMHAwge','BgfJzwHVBgrLCG','EvrpzLG','Aw1Hz2uVCg5N','zgLPq3m','ue9tva','sKDAAwm','Df9UywLFy2HHCG','vuNLM77NIyC6ia','C3rYAw5NAwz5','C3bSAxq','zNLvssbPBwfNzq','q092s20','y2HHBMDL','ChjLDMLLD0LTyq','wvnbtNO','CMvZDwX0','i2nVBwz5DwKTCG','ELbPrfG','t0XNt28','vNjTs0q','AwjLigLTywDLoG','z2Xpqum','CMfnCxm','wgr6Bha','CMvMigLTywDLoG','uvDVzM8','nhWYFdf8mhWZ','C3jJ','ywDL','zgf0ytPPBwfNzq','Efnzz1q','Du5qyLq','i25VDMvSywKTAq','sKLtEwy','veHYAha','ugTSDgS','sLrnsK0','yw5ZzMvYsw1HzW','C3rVCMvszwfKtW','i25VDMvSywKTCW','Dg9Y','qLDPuKq','ExvPx3jLzL9PBq','BgfPx3zPyMvFDa','DhjPBq','y2fJAgvFy29TzG','C09MCfm','BwfNzs1WCMv2Aq','nxWWFdr8mxWYFa','igzYB20Gy2fJAa','mZG1mdvkqMXTC2q','zfzPsKC','Bg9N','i2nVBwz5DwKTAq','CIaUC3qTy2HHDa','C3rHCNrZv2L0Aa','zwzFAw1Hz2u','yxbgyNK','DtGTAw1Hz2uTCa','Aw5NignHy2HLza','Avjwsxy','x25HAv9JAgfYxW','C2vYDMvYrMLSzq','y2fJAguGzM9YBq','u01gCNa','tNrQwLq','i2LTywDLsw5WDq','sK9kz2K','lwj0BG','CL9Yzwy','swrluxe','zMXLEa','BMfPm0nOyxjszq','m2ThCMH1va','BMfTzq','zenLww8','Df9UB3zLBgfP','tvfzt3e','z0fvENq','C2vHCMnO','y3jLyxrLt2jQzq','ihrVihvWzgf0zq','6zsz6k+V6k+M5OofoG','ANnVBG','q0PzELa','Bvriy2e','tuHsEey','yxbWzw5K','zMLSzxm','ENzqCKK','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','mZK2DMLoz3jS','nte5nZiZEKXtu2PA','y2zUsuq','ie5VDMvSquKGqW','y29TzNL1AwnHBG','y3rvuKW','B3bLBKrc','DffSuKi','yM9KEq','vePJEhm','rNDnq2m','C3rqqKG','Aw5SAw5LlwzSzq','sKrcuu0','ywDLoG','ChjTsNK','veXOANm','DY1JB250ywLUzq','CMvM','qNLjza','zMLUza','rfnwtxi','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','y29TzNL1As1Yzq','Dgv4Da','r01ZsLe','zxjYB3i','A2r6wKi','DwH0tM0','teT5Bva','yNjZzMW','zxCTy29UDgfPBG','zw1VDMuTy2HHCG','ExDUANe','DgHLig5LDYbMBW','kcGOlISPkYKRkq','DffPDui','mZbICfrgwwu','AKD3ENG','ihjLlxvWBg9Hza','tezRz3O','z2vFBMfPx2nOyq','yMXVyG','zwXbssbPBwfNzq','C3rYAw5N','zgLZCgXHEq','sNzrD28','5zUE5PwW5O2UoG','txnhr0i','AgfYlxjLzI1PBq','tuTPuxO','tMfTzq','mJqZmdu3yLj4wePY','zLH3sei','yMXVy2S','ztOG','AgfYifjLzIbPBq','mJHmwhzoBM0','qNPureu','BgfPx2nOyxjFCG','z2vFBM92zwXHAq','Dhu4lwLTywDLlq','t2vnuLq','y29UC3rYDwn0BW','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','igzYB20GB2XKia','zxDpEvK','5zU+54Mh5Ase55cg5AsX6lsLoIa','wLDKBxq','vNPHEhe','CgXHy2vOB2XKzq','DgfYz2v0','Bw92zs1JAgfYlq','A3nhDvO','y2jssMS','BMX5','s09drMO','CfHsDNq','BwvZC2fNzq','Bwv0Ag9K','zgf0yq','Aw1Hz2vjBNb1Da','6k+M5OofoIa','tg9HzgvKienVBq','zxnZAw5Nie5VDG','zKLTywDL','CvLWCKK','Aw1Hz2u','nZq0mJy2AvbpD25p','vxHczwq','y2fJAgvFBM92zq','uxPoy20','s0Xbv3K','EM1hBwC','wMPKuKq','Cw1Qv0m','zwXLy3qTy2HHCG','CxHUA0C','y2XPy2S','z1zhzgy','EvPsA0e','vgj3rfq','C1DhzwK','mtC0zgXwC0vk','EMnKBwe','5zMO6l+u5zUE5PwW5O2UoIa','CwLmBwm','Bw92zs1PBwfNzq','BM92zwXHAs1Yzq','ENDzsfi','BMfPm1zPyMvuCG','rxjYB3iGBg9Hza','yMvbwwG','y0jPsxa','zwvHyKW','BgzzCwO','5lIk5lYG5AsX6lsLoIa','AuDcENy','Cvv2yMO','nty2ndu2uunQvxfc','CMvMlwLTywDLlq','uKfyzNu','m3WXFdb8mNW0','AgLKs1K','Dg5yzuC','C3rVCMvszwfKvW','zwXbssbJAgfYia','uvfmDwG','DgHqEfO','zs1IDg4','q2n3Cg4','CMv2B2TLt2jQzq','CM1HDc4','zwXLy3qTAw1HzW','C3rVCMvezwXLDa','wLDLu0W','qw9xtMW','A2fVDhvWAwfU','y1jjsfq','uhLiwhu','CxvLCNLtzwXLyW','Ew1Hvw4','yxbWBhK','vMvNu0i','mtuXmdmYnhvbuMfyCq','zejqzui','svfMA2S','C3r5Bgu','CML0zq','i25VDMvSywKTCG'];_0x4004=function(){return _0x3018cb;};return _0x4004();}let nai3VibeTransferImageMimeType=_0x196923(0x350,0x346,0x361,0x343),nai3CharRefImageMimeType=_0x2524ad(-0x138,-0x124,-0x181,-0x185),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x5bf92f){const _0x5a4a70={};_0x5a4a70[_0x4cd0f6(0x82,0xf,-0x57,0x31)]='imageInput'+_0x4cd0f6(0x1c,0x33,0x94,0x5)+'ref',_0x5a4a70['brsfl']=_0x27900d(-0x8c,-0x4,-0x49,-0x5a)+_0x4cd0f6(0xe,0x8d,0x93,0xfb),_0x5a4a70['THrhp']=_0x27900d(-0x124,-0x132,-0x171,-0x149)+'mage-previ'+_0x27900d(-0x11c,-0x9d,-0x160,-0xef)+'er\x20.st-cha'+_0x27900d(-0xd0,-0x9c,-0x14e,-0xd1)+_0x4cd0f6(0x111,0x97,0xe9,0xc1)+'r';function _0x4cd0f6(_0x51f7aa,_0x28673d,_0x3199ff,_0x107a59){return _0x196923(_0x51f7aa-0x133,_0x28673d- -0x24c,_0x3199ff-0x19a,_0x51f7aa);}_0x5a4a70[_0x27900d(-0xdf,-0xa3,-0xe7,-0x84)]=_0x4cd0f6(-0x1a,0x13,-0x37,0x45);function _0x27900d(_0x442bbd,_0x4da033,_0x3062d9,_0x4eaf85){return _0x196923(_0x442bbd-0x10e,_0x4eaf85- -0x3ab,_0x3062d9-0x158,_0x442bbd);}_0x5a4a70[_0x27900d(-0x156,-0x105,-0x130,-0x153)]=_0x4cd0f6(0xfb,0xf3,0x116,0x124),_0x5a4a70[_0x4cd0f6(0x29,0x14,-0x6,0x45)]=function(_0x104288,_0x148902){return _0x104288===_0x148902;},_0x5a4a70['Danop']='UfXuS',_0x5a4a70[_0x4cd0f6(0x8b,0xb6,0x99,0xef)]=_0x27900d(-0x183,-0xfc,-0xa7,-0x122);const _0x37ad02=_0x5a4a70,_0x4cc265=document[_0x4cd0f6(0x14a,0xf1,0x110,0x132)+_0x4cd0f6(0x9c,0x64,0x6e,0x1f)](_0x37ad02[_0x4cd0f6(0x37,0x6f,0x6f,0xa)]),_0x4029ad=document['querySelec'+_0x27900d(-0x16d,-0x140,-0xc5,-0x141)](_0x37ad02[_0x27900d(-0x1af,-0x19b,-0xcc,-0x147)]),_0x248a4b=document['getElement'+_0x27900d(-0x83,-0xad,-0x12b,-0xfb)]('novelai-re'+_0x4cd0f6(0xed,0xbc,0x4e,0x119)+'-btn');if(_0x5bf92f&&_0x5bf92f[_0x27900d(-0x13f,-0x114,-0xd3,-0x132)](_0x37ad02[_0x4cd0f6(0xcf,0xdb,0xdf,0x87)])){_0x4cc265['src']=_0x5bf92f,_0x4cc265[_0x27900d(-0xce,-0xae,-0x7b,-0x7b)][_0x27900d(-0x161,-0xfe,-0x161,-0xe1)]=_0x4cd0f6(0xaf,0x87,0xe3,0xc2),_0x4029ad[_0x27900d(-0xad,-0x3,-0x8d,-0x7b)]['display']=_0x37ad02['raMqs'],_0x248a4b[_0x27900d(-0x1d,-0xd,-0x4c,-0x7b)][_0x4cd0f6(0x43,0x7e,0x0,0x8)]=_0x4cd0f6(0xb7,0x5d,0x2,0x1c)+'x';const _0xb96349=_0x5bf92f[_0x27900d(-0x2d,-0xc2,-0x4,-0x5e)](','),_0x34e795=_0xb96349[-0x3bb*0x5+0x137d+-0xd6][_0x4cd0f6(0x163,0x101,0x12a,0xa6)](':')[0xc2d+0x3*-0x79d+0xaab*0x1][_0x4cd0f6(0x105,0x101,0x130,0x156)](';')[0xf5c+0x89*0xd+0x1651*-0x1];nai3VibeTransferImageMimeType=_0x34e795,window[_0x27900d(-0x2d,-0x44,-0x90,-0xa0)+'ansferImag'+'e']=_0xb96349[0x22e6*-0x1+-0x3cf+0x26b6];const _0x4e39b9={};_0x4e39b9['id']=NAI_VIBE_CACHE_KEY,_0x4e39b9['data']=_0x5bf92f,dbs['storeReadW'+_0x27900d(-0xa0,-0x78,-0xa3,-0x7a)](_0x4e39b9);}else _0x37ad02['xSYgT'](_0x4cd0f6(0x8,0x7f,0x33,0xaf),_0x37ad02['Danop'])?_0x2e6e49[_0x4cd0f6(0xf5,0xf1,0xca,0xb9)+_0x27900d(-0x97,-0xa3,-0xff,-0xfb)](_0x37ad02[_0x4cd0f6(0x80,0xf,-0x36,0x41)])['click']():(_0x4cc265[_0x4cd0f6(0x66,0x11,-0x28,-0x16)]='',_0x4cc265[_0x27900d(-0xc,-0xed,-0x9b,-0x7b)][_0x4cd0f6(0x50,0x7e,0xf6,0xc3)]=_0x37ad02[_0x4cd0f6(-0x7,0xc,-0x4f,-0x45)],_0x4029ad['style'][_0x27900d(-0x10e,-0xb2,-0x84,-0xe1)]=_0x37ad02['TbwDT'],_0x248a4b[_0x27900d(-0xba,-0x53,-0x11,-0x7b)]['display']=_0x37ad02['raMqs'],window[_0x27900d(-0x34,-0x27,-0xb6,-0xa0)+'ansferImag'+'e']=null);}function removeNovelaiImage(){function _0x5759fe(_0x2290e5,_0x3fcd18,_0x288276,_0x344f79){return _0x2524ad(_0x344f79-0x237,_0x3fcd18-0x3c,_0x3fcd18,_0x344f79-0x1a0);}const _0x1302dd={'thPxZ':function(_0x2d0e20,_0x49246b){return _0x2d0e20(_0x49246b);}};_0x1302dd[_0x5759fe(0xe2,0xd2,0x8f,0xd6)](updateNovelaiImagePreview,null);function _0x5be225(_0x4a8115,_0x3e9b03,_0x5f387f,_0x3c2cba){return _0x196923(_0x4a8115-0x1e6,_0x4a8115- -0x1df,_0x5f387f-0x1c2,_0x3c2cba);}dbs[_0x5be225(0x144,0x12c,0x175,0x1ae)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x301bc0){function _0x311447(_0x3529fa,_0x5c526a,_0x28f060,_0x1074c5){return _0x196923(_0x3529fa-0x121,_0x1074c5-0xa1,_0x28f060-0x1e6,_0x3529fa);}const _0x4dda64={'JyhET':function(_0x18f294){return _0x18f294();},'uNPbT':function(_0x53fd2b,_0x152f92){return _0x53fd2b(_0x152f92);},'XZZHq':function(_0x57e06b,_0x1ee183){return _0x57e06b===_0x1ee183;},'NJJKU':_0x311447(0x442,0x390,0x3eb,0x3ea),'eeabL':_0x311447(0x2ec,0x303,0x2d9,0x347),'MKiQz':function(_0x44cc3c,_0x54982d){return _0x44cc3c+_0x54982d;},'ewOyY':_0x4e715c(0xfa,0x188,0x13a,0x111)};function _0x4e715c(_0x1dac21,_0x326f84,_0x1c8c8,_0x5b546c){return _0x196923(_0x1dac21-0x1c0,_0x5b546c- -0x1cf,_0x1c8c8-0x190,_0x1dac21);}const _0x217f36=_0x301bc0[_0x311447(0x3ea,0x3c2,0x3b9,0x385)][_0x311447(0x31b,0x316,0x2d8,0x33b)][0x7e7+-0x167e+0xe97];if(!_0x217f36)return;try{const _0x408202=await processUploadedImage(_0x217f36,!![]);_0x4dda64[_0x311447(0x2d0,0x37e,0x2c0,0x302)](updateNovelaiImagePreview,_0x408202);}catch(_0x104807){_0x4dda64['XZZHq'](_0x4dda64[_0x4e715c(0x11b,0x1ae,0x12b,0x172)],_0x4dda64[_0x4e715c(0x138,0xf9,0xc7,0x140)])?_0x4dda64['JyhET'](_0xd8e195):(console['error'](_0x4e715c(0x14d,0x1dd,0x154,0x169)+_0x4e715c(0x12b,0xa2,0x189,0x122)+_0x311447(0x31c,0x325,0x2fd,0x369)+':',_0x104807),_0x4dda64['uNPbT'](alert,_0x4dda64[_0x4e715c(0x13d,0x141,0x171,0x100)](_0x4dda64[_0x311447(0x339,0x36f,0x302,0x380)],_0x104807[_0x4e715c(0x13b,0x107,0x195,0x11c)])));}}function _0x2524ad(_0x4da326,_0x338092,_0x3efd8a,_0x549504){return _0x3826(_0x4da326- -0x3bf,_0x3efd8a);}function _0x3826(_0x412bbe,_0x56aabd){_0x412bbe=_0x412bbe-(0x1a2f+0xb9*0x6+0x4*-0x73d);const _0x14a80b=_0x4004();let _0x2fe10c=_0x14a80b[_0x412bbe];if(_0x3826['HCMIbs']===undefined){var _0x214112=function(_0x3cde77){const _0x253317='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xd5b11f='',_0x3099ac='',_0x363593=_0xd5b11f+_0x214112;for(let _0x5ceac4=-0x3d*-0xd+0x4ef+-0x808,_0x3be442,_0x7c8891,_0x12f2fa=0x4d3*0x5+0xdeb+-0x260a;_0x7c8891=_0x3cde77['charAt'](_0x12f2fa++);~_0x7c8891&&(_0x3be442=_0x5ceac4%(0x19d5+0x1*0x985+-0x11ab*0x2)?_0x3be442*(-0x1*-0x18e8+-0x82f+-0x1079)+_0x7c8891:_0x7c8891,_0x5ceac4++%(0x175f+0xd6c+-0x24c7))?_0xd5b11f+=_0x363593['charCodeAt'](_0x12f2fa+(0x6d6+0x18*-0x131+0x117*0x14))-(0x1*0x2220+0x19a6+-0x2*0x1dde)!==-0x26ff*-0x1+0x1b7b+0x213d*-0x2?String['fromCharCode'](-0xa*0x85+-0xa42+-0x1073*-0x1&_0x3be442>>(-(-0x3a7*-0x9+0x1417+-0x34f4)*_0x5ceac4&0x212a+-0xce*-0x7+-0x26c6*0x1)):_0x5ceac4:-0x27*0x3+0x33*0x56+-0x10ad){_0x7c8891=_0x253317['indexOf'](_0x7c8891);}for(let _0x3a2bb1=-0x5c4+-0x1386+0x194a,_0x332888=_0xd5b11f['length'];_0x3a2bb1<_0x332888;_0x3a2bb1++){_0x3099ac+='%'+('00'+_0xd5b11f['charCodeAt'](_0x3a2bb1)['toString'](0x1a3*0x9+-0x181a+0x1e3*0x5))['slice'](-(0x1*-0x25ed+-0x1*-0x1b81+0xa6e));}return decodeURIComponent(_0x3099ac);};_0x3826['oowXwi']=_0x214112,_0x3826['sSFkVG']={},_0x3826['HCMIbs']=!![];}const _0x26c4a5=_0x14a80b[-0x24c9+0x835+0x1c94],_0x437b97=_0x412bbe+_0x26c4a5,_0xa22c39=_0x3826['sSFkVG'][_0x437b97];if(!_0xa22c39){const _0x4e8e36=function(_0x5b1723){this['lbZkTp']=_0x5b1723,this['dtSkuv']=[-0x26*-0x3b+-0x140b+0x55*0x22,0x1*0xe29+-0x1*-0x36e+-0x1197,-0x1e2f*-0x1+-0x189+0xc1*-0x26],this['NsSeDY']=function(){return'newState';},this['gTsieP']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['QzaUBI']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4e8e36['prototype']['jRPoDh']=function(){const _0x37b2e0=new RegExp(this['gTsieP']+this['QzaUBI']),_0x44733f=_0x37b2e0['test'](this['NsSeDY']['toString']())?--this['dtSkuv'][0x26f5+0x1e26+0x122*-0x3d]:--this['dtSkuv'][0x1*-0x82e+0x11dc*0x2+-0x2c1*0xa];return this['fWJurl'](_0x44733f);},_0x4e8e36['prototype']['fWJurl']=function(_0x2fab8f){if(!Boolean(~_0x2fab8f))return _0x2fab8f;return this['wQnJdA'](this['lbZkTp']);},_0x4e8e36['prototype']['wQnJdA']=function(_0x55fad7){for(let _0x5180e6=-0x7b4+-0x1*-0x1327+-0xb73,_0x4ad553=this['dtSkuv']['length'];_0x5180e6<_0x4ad553;_0x5180e6++){this['dtSkuv']['push'](Math['round'](Math['random']())),_0x4ad553=this['dtSkuv']['length'];}return _0x55fad7(this['dtSkuv'][0x1*0x8d3+-0x127*-0x4+-0xb5*0x13]);},new _0x4e8e36(_0x3826)['jRPoDh'](),_0x2fe10c=_0x3826['oowXwi'](_0x2fe10c),_0x3826['sSFkVG'][_0x437b97]=_0x2fe10c;}else _0x2fe10c=_0xa22c39;return _0x2fe10c;}function updateNovelaiCharRefImagePreview(_0x6b986c){const _0x1350fc={'zPiDX':function(_0x222d4f,_0x4a306e){return _0x222d4f(_0x4a306e);},'NPGQE':'previewIma'+_0x75e19a(0x2da,0x357,0x304,0x354)+_0x75e19a(0x29b,0x27a,0x29d,0x26e),'Vzaxq':'#novelai-c'+_0x75e19a(0x2e2,0x2c4,0x31e,0x313)+'age-previe'+_0x463270(0x20b,0x274,0x205,0x1ef)+_0x463270(0x1d5,0x193,0x164,0x23d)+_0x75e19a(0x290,0x2ab,0x282,0x214)+_0x75e19a(0x358,0x322,0x3cc,0x354),'mTHca':_0x463270(0x266,0x235,0x28c,0x201)+_0x75e19a(0x2f9,0x2f4,0x291,0x2d5)+_0x463270(0x272,0x2cf,0x267,0x2ae)+'btn','tQiuB':_0x75e19a(0x273,0x22d,0x2ae,0x277),'OLgOo':_0x463270(0x230,0x1de,0x264,0x1c7),'MQYOq':_0x463270(0x29c,0x283,0x2b1,0x24d),'lfYqj':function(_0x389914,_0x54d383){return _0x389914!==_0x54d383;},'IdKQq':_0x463270(0x256,0x2c2,0x26d,0x21a),'MmNvt':_0x463270(0x1e6,0x1c7,0x223,0x194)},_0x4a59a5=document['getElement'+_0x75e19a(0x2c4,0x289,0x2e5,0x29f)](_0x1350fc['NPGQE']),_0x422379=document['querySelec'+_0x463270(0x1c7,0x151,0x20e,0x151)](_0x1350fc[_0x75e19a(0x2f6,0x36f,0x318,0x364)]),_0x27d0ab=document[_0x463270(0x29a,0x2a7,0x29d,0x2b3)+_0x463270(0x20d,0x1bb,0x1d3,0x1f4)](_0x1350fc[_0x75e19a(0x2ab,0x230,0x2d5,0x2b0)]);function _0x463270(_0x2d0a0a,_0x19d772,_0x2c633d,_0x101f3d){return _0x2524ad(_0x2d0a0a-0x3db,_0x19d772-0x86,_0x101f3d,_0x101f3d-0x13a);}function _0x75e19a(_0x5b81df,_0x1d03a5,_0x4ec6f2,_0x4fe0ed){return _0x196923(_0x5b81df-0x29,_0x5b81df-0x14,_0x4ec6f2-0x122,_0x1d03a5);}if(_0x6b986c&&_0x6b986c[_0x463270(0x1d6,0x1b0,0x1fe,0x1c8)](_0x1350fc[_0x75e19a(0x2d5,0x304,0x31f,0x277)])){_0x4a59a5[_0x75e19a(0x271,0x2ea,0x2e5,0x231)]=_0x6b986c,_0x4a59a5['style'][_0x463270(0x227,0x21e,0x2a6,0x201)]=_0x1350fc[_0x463270(0x1b1,0x147,0x1ed,0x1fe)],_0x422379[_0x75e19a(0x344,0x3c3,0x366,0x344)][_0x463270(0x227,0x1f0,0x251,0x1bd)]=_0x1350fc[_0x75e19a(0x2a3,0x2fb,0x2fc,0x2e6)],_0x27d0ab[_0x75e19a(0x344,0x322,0x31f,0x322)][_0x75e19a(0x2de,0x2ba,0x2bd,0x2d2)]=_0x463270(0x206,0x20d,0x261,0x1c7)+'x';const _0x147dce=_0x6b986c[_0x463270(0x2aa,0x324,0x31d,0x2cf)](','),_0x108303=_0x147dce[0x114c+-0x1bef+0xaa3][_0x75e19a(0x361,0x35e,0x3e2,0x3be)](':')[-0x1*-0xeb6+0x4b*-0x45+0x582]['split'](';')[-0x141*-0x18+-0xe38+0xfe*-0x10];nai3CharRefImageMimeType=_0x108303,window['nai3CharRe'+_0x463270(0x24f,0x2ac,0x287,0x27c)]=_0x147dce[0x1de9+-0x7c3*-0x5+-0x1*0x44b7];const _0x5c9ac7={};_0x5c9ac7['id']=NAI_CHAR_REF_CACHE_KEY,_0x5c9ac7[_0x463270(0x24a,0x29b,0x292,0x257)]=_0x6b986c,dbs[_0x75e19a(0x32e,0x2ea,0x2d9,0x309)+_0x463270(0x28e,0x227,0x25a,0x242)](_0x5c9ac7);}else{if(_0x1350fc[_0x463270(0x26d,0x200,0x2ac,0x229)](_0x1350fc[_0x463270(0x1e5,0x1d7,0x1c3,0x195)],_0x1350fc['IdKQq']))_0x1350fc[_0x75e19a(0x267,0x1ff,0x22d,0x2b2)](_0x2b9eb1,null),_0x311f34[_0x75e19a(0x337,0x398,0x2fe,0x2d2)+'e'](_0x4d5851);else{const _0x2ff251=_0x463270(0x1b9,0x13a,0x22b,0x173)[_0x75e19a(0x361,0x3a2,0x3bf,0x307)]('|');let _0xcad609=0x3b*0xf+-0xd6*-0x2+0x1*-0x521;while(!![]){switch(_0x2ff251[_0xcad609++]){case'0':_0x27d0ab[_0x75e19a(0x344,0x371,0x33c,0x343)][_0x463270(0x227,0x1f2,0x1de,0x21a)]=_0x1350fc[_0x463270(0x1ec,0x235,0x23b,0x25a)];continue;case'1':_0x422379[_0x75e19a(0x344,0x3a3,0x2f6,0x35a)][_0x75e19a(0x2de,0x2f4,0x2b7,0x305)]=_0x1350fc['MmNvt'];continue;case'2':_0x4a59a5[_0x463270(0x28d,0x21d,0x248,0x2fc)]['display']=_0x1350fc[_0x75e19a(0x2a3,0x2cb,0x315,0x2e4)];continue;case'3':window[_0x75e19a(0x29e,0x28b,0x2c4,0x30e)+_0x75e19a(0x306,0x36e,0x329,0x28f)]=null;continue;case'4':_0x4a59a5[_0x463270(0x1ba,0x1ca,0x176,0x1d9)]='';continue;}break;}}}}function removeNovelaiCharRefImage(){updateNovelaiCharRefImagePreview(null);function _0x348cf7(_0x4021ed,_0x35ce5f,_0x1c8a7a,_0x383620){return _0x2524ad(_0x1c8a7a-0x40c,_0x35ce5f-0x1c9,_0x4021ed,_0x383620-0xe7);}dbs[_0x348cf7(0x2ab,0x31b,0x2b1,0x2ab)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x1c41f8){const _0x55edb2={'tnXeG':function(_0xeb4d11){return _0xeb4d11();},'KOCFj':_0x5cd024(-0x1b5,-0x1d3,-0x159,-0x1ba),'vdnyv':_0x5cd024(-0xef,-0x14b,-0x139,-0x156),'GMsJQ':function(_0x495085,_0x1fa935){return _0x495085(_0x1fa935);},'beAYh':_0x5cd024(-0x18d,-0x1aa,-0x12b,-0x143)+'essing\x20Nov'+_0x5624a9(0x542,0x57f,0x568,0x538)+_0x5cd024(-0x1ec,-0x1ee,-0x209,-0x189),'apFby':function(_0x3dfd97,_0x563b76){return _0x3dfd97(_0x563b76);},'dViJG':function(_0x134fe1,_0x544eb5){return _0x134fe1+_0x544eb5;}},_0x147eed=_0x1c41f8[_0x5624a9(0x4e8,0x539,0x4b9,0x501)][_0x5624a9(0x472,0x464,0x493,0x4b7)][0x295*0x5+-0x4*-0x2f1+-0x18ad*0x1];if(!_0x147eed)return;function _0x5cd024(_0x3f478c,_0x35a719,_0xa3ab3,_0x188953){return _0x196923(_0x3f478c-0x6f,_0xa3ab3- -0x463,_0xa3ab3-0x57,_0x3f478c);}function _0x5624a9(_0x584d78,_0x5f1323,_0x437397,_0x211805){return _0x196923(_0x584d78-0x10b,_0x211805-0x21d,_0x437397-0x6f,_0x437397);}try{if(_0x55edb2[_0x5cd024(-0x1c5,-0x179,-0x17a,-0x1b0)]===_0x55edb2['vdnyv']){_0x36db00('请先设置ComfyU'+_0x5624a9(0x519,0x54f,0x56a,0x556)),_0x55edb2[_0x5624a9(0x4d6,0x54c,0x5ad,0x536)](_0x40a1af);return;}else{const _0x43c15c=await processUploadedImage(_0x147eed);_0x55edb2[_0x5624a9(0x464,0x526,0x4b5,0x4d3)](updateNovelaiCharRefImagePreview,_0x43c15c);}}catch(_0x36e354){console[_0x5cd024(-0x1cc,-0x21c,-0x1ac,-0x15d)](_0x55edb2[_0x5cd024(-0x1c1,-0x18f,-0x156,-0x165)],_0x36e354),_0x55edb2[_0x5cd024(-0x213,-0x200,-0x1e8,-0x1fc)](alert,_0x55edb2[_0x5cd024(-0x1c2,-0x1d1,-0x1ee,-0x220)]('图片处理失败:\x20',_0x36e354['message']));}}function updateComfyUIImagePreview(_0x219aab){function _0x1fdd7d(_0x2b9745,_0x225a80,_0x44432b,_0x2ed839){return _0x2524ad(_0x44432b-0x471,_0x225a80-0x6f,_0x2b9745,_0x2ed839-0x26);}const _0x3fd08f={'dBQtF':function(_0xda4f65){return _0xda4f65();},'BWiRD':_0x35ec9e(0x359,0x3b5,0x3fd,0x3b2)+_0x35ec9e(0x35d,0x32d,0x3a8,0x39d),'kdzZB':'#comfyui-i'+_0x35ec9e(0x316,0x2fb,0x302,0x2d2)+_0x1fdd7d(0x2d5,0x30a,0x2af,0x2c6)+'er\x20.st-cha'+_0x35ec9e(0x2fc,0x386,0x358,0x33b)+_0x35ec9e(0x347,0x2fd,0x2c5,0x344)+'r','aWfoK':_0x1fdd7d(0x326,0x2bd,0x2a7,0x2ca)+_0x35ec9e(0x38c,0x36b,0x2f9,0x369)+_0x35ec9e(0x2c2,0x33c,0x294,0x2e7),'sWGei':function(_0x550f89,_0x25ff88){return _0x550f89!==_0x25ff88;},'PuaoC':_0x35ec9e(0x2e8,0x36d,0x359,0x334),'slBLp':_0x1fdd7d(0x385,0x2e5,0x332,0x375),'RAXfu':_0x1fdd7d(0x221,0x2d4,0x29c,0x230)+'x','zvPrI':function(_0x11facb,_0x4ffe39){return _0x11facb===_0x4ffe39;},'diiCs':_0x35ec9e(0x2d3,0x2d0,0x28c,0x2c7),'zmGmg':_0x35ec9e(0x358,0x42a,0x410,0x3b0),'ksGuZ':_0x1fdd7d(0x28f,0x2dc,0x27c,0x24f)},_0x2d021d=document[_0x35ec9e(0x3e5,0x34d,0x384,0x39e)+_0x35ec9e(0x31d,0x386,0x391,0x311)](_0x3fd08f[_0x1fdd7d(0x1e3,0x2af,0x25e,0x2ac)]),_0x1f9182=document[_0x1fdd7d(0x328,0x2b9,0x31c,0x373)+_0x35ec9e(0x262,0x260,0x306,0x2cb)](_0x3fd08f[_0x35ec9e(0x392,0x312,0x30c,0x319)]),_0x290ef7=document[_0x35ec9e(0x35d,0x39b,0x3f8,0x39e)+_0x35ec9e(0x38d,0x328,0x374,0x311)](_0x3fd08f['aWfoK']);function _0x35ec9e(_0x3f0311,_0x489065,_0x3ffbf4,_0x5f0b79){return _0x2524ad(_0x5f0b79-0x4df,_0x489065-0x62,_0x3f0311,_0x5f0b79-0x126);}_0x2d021d[_0x35ec9e(0x2fc,0x2b4,0x260,0x2be)]&&_0x2d021d[_0x1fdd7d(0x2b4,0x26e,0x250,0x287)][_0x35ec9e(0x29c,0x2a9,0x31e,0x2da)]('blob:')&&_0x3fd08f[_0x1fdd7d(0x376,0x2ac,0x2f6,0x2fd)](_0x2d021d[_0x1fdd7d(0x2c4,0x2b4,0x250,0x236)],_0x219aab)&&URL[_0x35ec9e(0x325,0x356,0x357,0x381)+_0x35ec9e(0x379,0x321,0x330,0x303)](_0x2d021d[_0x35ec9e(0x268,0x2c3,0x2d5,0x2be)]);if(_0x219aab)_0x2d021d[_0x35ec9e(0x2ad,0x338,0x333,0x2be)]=_0x219aab,_0x2d021d[_0x35ec9e(0x38c,0x378,0x388,0x391)][_0x1fdd7d(0x326,0x2ff,0x2bd,0x2ca)]=_0x3fd08f['PuaoC'],_0x1f9182['style']['display']=_0x3fd08f[_0x1fdd7d(0x3a6,0x363,0x335,0x2f4)],_0x290ef7[_0x35ec9e(0x3a5,0x393,0x3a1,0x391)][_0x35ec9e(0x34b,0x33c,0x33e,0x32b)]=_0x3fd08f[_0x35ec9e(0x3bc,0x3a9,0x36e,0x377)];else{if(_0x3fd08f[_0x1fdd7d(0x309,0x26d,0x28e,0x254)](_0x3fd08f[_0x35ec9e(0x3b9,0x41b,0x3ad,0x3a8)],_0x3fd08f[_0x1fdd7d(0x2b9,0x340,0x2ed,0x2f8)]))_0x3fd08f['dBQtF'](_0x33e49d);else{const _0x24e027=(_0x1fdd7d(0x2d1,0x20e,0x265,0x265)+'3')[_0x1fdd7d(0x2dc,0x363,0x340,0x30b)]('|');let _0x16f9a2=-0xa78+-0x2227+0x2c9f;while(!![]){switch(_0x24e027[_0x16f9a2++]){case'0':_0x2d021d[_0x1fdd7d(0x35f,0x338,0x323,0x2a2)][_0x1fdd7d(0x318,0x329,0x2bd,0x2c2)]=_0x1fdd7d(0x2d3,0x34a,0x332,0x34f);continue;case'1':_0x290ef7[_0x1fdd7d(0x2ef,0x372,0x323,0x386)][_0x35ec9e(0x3a4,0x321,0x399,0x32b)]=_0x35ec9e(0x371,0x32b,0x326,0x3a0);continue;case'2':window[_0x35ec9e(0x2e1,0x2e9,0x341,0x302)+_0x35ec9e(0x404,0x3e1,0x3f0,0x387)]=null;continue;case'3':comfyuiImageObjectURL=null;continue;case'4':_0x1f9182[_0x1fdd7d(0x319,0x2f6,0x323,0x319)]['display']=_0x3fd08f[_0x1fdd7d(0x2df,0x284,0x2d9,0x358)];continue;case'5':_0x2d021d[_0x35ec9e(0x245,0x261,0x31a,0x2be)]='';continue;}break;}}}}function removeComfyUIImage(){function _0x56184e(_0xf7af3a,_0x576374,_0x973cf2,_0x2c570c){return _0x196923(_0xf7af3a-0x1c0,_0x2c570c- -0x3b7,_0x973cf2-0x1cf,_0xf7af3a);}const _0x965dd={'cbRJk':function(_0x345d85,_0x460f92){return _0x345d85(_0x460f92);}};_0x965dd[_0x595f8d(0x4bd,0x490,0x447,0x4c8)](updateComfyUIImagePreview,null);function _0x595f8d(_0x1a3092,_0x4572d5,_0x5f1814,_0x25717f){return _0x196923(_0x1a3092-0xb1,_0x1a3092-0x1d6,_0x5f1814-0x12f,_0x25717f);}dbs[_0x595f8d(0x4f9,0x49b,0x521,0x4b3)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x5df967){const _0x2b608b={'iGBzv':function(_0x5d5005,_0x2ae71b){return _0x5d5005===_0x2ae71b;},'cfnID':'vlpNj','AoWNl':function(_0x4f497a,_0x383234){return _0x4f497a(_0x383234);},'mfLuw':_0x1cf0da(-0xb9,-0xa6,-0xaf,-0xd9),'IQfkk':function(_0x634600,_0x249567){return _0x634600(_0x249567);},'pXRvt':_0x1cf0da(-0x67,-0xe,-0x69,-0xab)+_0x1cf0da(-0xb3,-0x80,-0x6a,-0xe3),'QQLuh':function(_0xf86a68){return _0xf86a68();},'SMFrp':_0x54618a(0x3b8,0x3d5,0x3a1,0x405),'JISyf':_0x54618a(0x326,0x368,0x2f5,0x2f6)+_0x54618a(0x35a,0x2b7,0x325,0x349),'YAoKB':_0x1cf0da(-0xf5,-0x23,-0x92,-0x3f),'FwMCc':_0x54618a(0x2e8,0x352,0x2ed,0x2ec),'yZRkA':function(_0x5a924a,_0x50260d){return _0x5a924a+_0x50260d;},'prmJy':function(_0x4bc0b8,_0x37e2e6){return _0x4bc0b8(_0x37e2e6);},'qUvbj':function(_0x1e7135){return _0x1e7135();}},_0x371d3a=extension_settings[extensionName],_0x546c54=_0x5df967[_0x54618a(0x301,0x2f6,0x33d,0x3a7)][_0x54618a(0x277,0x275,0x2f3,0x2d2)][-0x1271*0x1+-0xd33+0x1fa4];function _0x1cf0da(_0xb7a2a1,_0x577432,_0xc8459,_0x3f6ac1){return _0x2524ad(_0xc8459-0xdb,_0x577432-0x5e,_0xb7a2a1,_0x3f6ac1-0x8a);}if(!_0x546c54)return;function _0x54618a(_0x37dd9b,_0x1b4a56,_0x3456ca,_0x5567e3){return _0x196923(_0x37dd9b-0x137,_0x3456ca-0x59,_0x3456ca-0x1ad,_0x37dd9b);}try{const _0x2657e9=await _0x2b608b[_0x54618a(0x31e,0x314,0x37e,0x324)](processUploadedImageToBlob,_0x546c54),_0x275558=URL['createObje'+_0x54618a(0x2e2,0x2ef,0x2fb,0x290)](_0x2657e9);comfyuiImageObjectURL=_0x275558,_0x2b608b[_0x54618a(0x3cb,0x3e3,0x37e,0x363)](updateComfyUIImagePreview,_0x275558);const _0x512a19=new FormData();_0x512a19[_0x54618a(0x2cd,0x311,0x2f2,0x326)](_0x2b608b['mfLuw'],_0x2657e9,_0x546c54[_0x54618a(0x296,0x2f0,0x2e5,0x2a0)]);let _0xec71de=_0x371d3a[_0x54618a(0x345,0x385,0x394,0x375)][_0x54618a(0x2ef,0x2c5,0x2c7,0x265)]();if(!_0xec71de){_0x2b608b[_0x54618a(0x34a,0x3f0,0x388,0x38c)](alert,_0x2b608b[_0x1cf0da(-0x48,-0xdd,-0xb9,-0xf1)]),_0x2b608b[_0x1cf0da(-0x8b,-0x6e,-0x87,-0xe5)](removeComfyUIImage);return;}const _0x2939a4={};_0x2939a4[_0x1cf0da(-0xd6,-0x120,-0xb7,-0x6f)]=_0x2b608b[_0x54618a(0x29f,0x2d7,0x2db,0x352)],_0x2939a4[_0x1cf0da(-0xfb,-0x176,-0xfe,-0x178)]=_0x512a19;const _0x3df039=await fetch(_0xec71de+('/upload/im'+_0x54618a(0x2c1,0x24f,0x2b7,0x313)),_0x2939a4);if(_0x3df039['ok']){const _0x3d3ef4=await _0x3df039[_0x1cf0da(-0xb5,-0x9e,-0x10e,-0xc7)]();window['comfyuican'+_0x1cf0da(-0x14,-0x99,-0x7d,-0xe5)]=_0x3d3ef4[_0x1cf0da(-0x136,-0xd7,-0x117,-0x9f)],_0x2b608b['IQfkk'](addLog,_0x1cf0da(-0x7e,-0xe7,-0xf0,-0x95)+_0x1cf0da(-0x81,-0x95,-0x9d,-0x1e)+JSON[_0x1cf0da(-0x19,-0x81,-0x57,0xa)](_0x3d3ef4)),console[_0x1cf0da(-0x148,-0xb3,-0x12d,-0xb0)](_0x2b608b[_0x54618a(0x254,0x30c,0x2bc,0x254)],_0x3d3ef4);const _0x27bde7=new FileReader();_0x27bde7['onloadend']=()=>{function _0x486627(_0x34b4bd,_0x1e257f,_0x253136,_0x18603c){return _0x54618a(_0x18603c,_0x1e257f-0xb7,_0x253136- -0x15,_0x18603c-0x1a7);}const _0x9e15a7={'Ccwpn':function(_0x48ef04,_0x54c282){return _0x48ef04(_0x54c282);}};function _0x496a18(_0x5b5fe5,_0xb9d71e,_0x94a35b,_0x1ecc83){return _0x1cf0da(_0xb9d71e,_0xb9d71e-0x160,_0x5b5fe5-0x5ee,_0x1ecc83-0xc0);}if(_0x2b608b[_0x486627(0x36c,0x304,0x356,0x302)](_0x2b608b[_0x486627(0x2a2,0x355,0x2e3,0x2e0)],_0x2b608b[_0x486627(0x27c,0x28b,0x2e3,0x273)])){const _0xfc07a5=_0x27bde7[_0x486627(0x23a,0x281,0x295,0x275)],_0x4be1b3={};_0x4be1b3[_0x486627(0x3ad,0x38f,0x331,0x363)]=_0xfc07a5,_0x4be1b3[_0x486627(0x2b8,0x32c,0x2c4,0x2a2)+_0x486627(0x34d,0x2eb,0x314,0x2d4)]=_0x3d3ef4['name'];const _0x2b3f4c=_0x4be1b3,_0xbc09d6={};_0xbc09d6['id']=COMFYUI_REF_CACHE_KEY,_0xbc09d6[_0x486627(0x39f,0x375,0x331,0x313)]=_0x2b3f4c,dbs['storeReadW'+'rite'](_0xbc09d6);}else _0x9e15a7[_0x496a18(0x56a,0x58c,0x5c0,0x5d5)](_0x4b5728,null),_0x3cf625[_0x486627(0x348,0x314,0x367,0x390)+'e'](_0xca6e8a);},_0x27bde7['readAsData'+'URL'](_0x2657e9);}else{const _0x139c44=await _0x3df039[_0x1cf0da(-0x9c,-0x157,-0xee,-0xbd)]();_0x2b608b[_0x54618a(0x3e5,0x345,0x388,0x31d)](alert,_0x2b608b['YAoKB']+_0x139c44),addLog('图片上传失败,\x20错误'+_0x1cf0da(-0x103,-0x69,-0xb4,-0x6e)+_0x139c44),console[_0x1cf0da(-0x72,-0x123,-0xec,-0x110)](_0x2b608b[_0x54618a(0x348,0x30d,0x300,0x36a)],_0x139c44),_0x2b608b[_0x1cf0da(-0x6f,-0x61,-0x87,-0xc7)](removeComfyUIImage);}}catch(_0x317c62){_0x2b608b[_0x1cf0da(-0xb5,-0x37,-0x74,-0x41)](alert,_0x2b608b[_0x1cf0da(-0xbf,-0xe5,-0xa2,-0xa9)](_0x54618a(0x379,0x2f8,0x336,0x2f8)+':\x20',_0x317c62['message'])),console[_0x54618a(0x363,0x33d,0x310,0x376)](_0x1cf0da(-0x47,-0xb6,-0xc6,-0xda)+':',_0x317c62),_0x2b608b[_0x1cf0da(-0xa0,-0x14b,-0xf7,-0x143)](addLog,'图片上传失败,\x20错误'+'详情:\x20'+JSON[_0x1cf0da(0x3,-0x9d,-0x57,-0x3)](_0x317c62)),_0x2b608b[_0x54618a(0x376,0x394,0x36c,0x314)](removeComfyUIImage);}}async function loadCachedImages(){function _0x3c5187(_0x482179,_0x41b7f5,_0x121529,_0x5bb714){return _0x196923(_0x482179-0x9e,_0x5bb714- -0x215,_0x121529-0x63,_0x482179);}function _0x5af9a1(_0x1ddc24,_0x4507a6,_0x6c194,_0x13a4c9){return _0x2524ad(_0x1ddc24-0xd9,_0x4507a6-0x193,_0x13a4c9,_0x13a4c9-0x1c8);}const _0x4ffe6c={'YSANz':_0x3c5187(0x107,0xa7,0x14e,0xd9)+'2','bJKrW':'previewIma'+'ge2','eoDxc':_0x5af9a1(-0x12e,-0xea,-0xd1,-0x199)+'mage-previ'+_0x3c5187(0xff,0xef,0x35,0xa7)+_0x3c5187(0x180,0x11d,0x109,0x120)+_0x5af9a1(-0xcb,-0x117,-0xb2,-0x138)+_0x5af9a1(-0xc2,-0x8c,-0x10f,-0x9a)+'r','TLhjs':_0x5af9a1(-0xf1,-0x169,-0x93,-0x130)+_0x5af9a1(-0x9d,-0xdb,-0xc4,-0x103)+_0x3c5187(0xd8,0x4,0x40,0x71),'LFkgz':'blob:','ZWeSL':function(_0x43d55d,_0x24bda3){return _0x43d55d!==_0x24bda3;},'qiLmc':_0x3c5187(0xee,0xd8,0x78,0xbe),'gVGdf':_0x3c5187(0x1a6,0xbc,0xd5,0x12a),'IzqQC':_0x5af9a1(-0xfc,-0xfa,-0x122,-0x84)+'x','zcdma':_0x5af9a1(-0x11c,-0x124,-0x165,-0x172),'JOJgi':'PVfBi','dBPeB':_0x5af9a1(-0x99,-0x117,-0x119,-0x92)+_0x5af9a1(-0x128,-0x181,-0xe8,-0x157)+'\x20NovelAI\x20V'+_0x5af9a1(-0x14f,-0x181,-0xe0,-0x1cd),'iRVIv':_0x5af9a1(-0xa9,-0x114,-0x35,-0x116),'LKymP':_0x5af9a1(-0xaf,-0x36,-0x12f,-0x5c),'nhZXa':function(_0x3e9702,_0x555090){return _0x3e9702(_0x555090);},'gAUzt':function(_0x269b92,_0x2f69b3){return _0x269b92===_0x2f69b3;},'PyHXu':_0x3c5187(0xaa,0x15b,0xd3,0xdb)+_0x3c5187(0x18f,0xd9,0x136,0x139)+_0x5af9a1(-0xc7,-0xa0,-0xca,-0xe9)+_0x3c5187(0xdf,0x6f,0x92,0x6c)+'at.\x20Please'+_0x5af9a1(-0xe1,-0xf7,-0x138,-0x8d)+_0x3c5187(0x25,0x4,0xb4,0x7e)+_0x5af9a1(-0x67,-0x17,-0x11,-0x7f)+_0x3c5187(0xbb,0x43,0xeb,0xaa)+_0x3c5187(0x126,0xf1,0x160,0x10c),'cBiIp':_0x3c5187(0x114,0x104,0x143,0xf7)+_0x3c5187(-0x18,0xd7,0x33,0x68)+'\x20ComfyUI\x20i'+'mage:'};await dbs[_0x3c5187(0x56,0x8f,0xe7,0x8e)]();try{const _0x17d5e9=await dbs[_0x5af9a1(-0x13d,-0x13a,-0x144,-0xe6)+_0x5af9a1(-0xbd,-0x6c,-0xde,-0xb2)](NAI_VIBE_CACHE_KEY);_0x17d5e9&&_0x17d5e9[_0x3c5187(0xb4,0x7e,0x158,0xd8)]&&(_0x4ffe6c[_0x3c5187(0x122,0x104,0xd5,0x10f)](_0x3c5187(0xcf,0xc9,0xbb,0x50),_0x4ffe6c[_0x5af9a1(-0x120,-0x188,-0xec,-0x194)])?updateNovelaiImagePreview(_0x17d5e9[_0x5af9a1(-0xb8,-0x100,-0x9a,-0x43)]):_0x5a732f['getElement'+_0x5af9a1(-0xf5,-0x145,-0x78,-0x131)](_0x4ffe6c[_0x5af9a1(-0x155,-0x15b,-0x197,-0x17f)])[_0x5af9a1(-0xa6,-0xcf,-0x64,-0xc3)]());}catch(_0x45f5db){console['error'](_0x4ffe6c[_0x3c5187(0xd9,0x120,0x172,0x119)],_0x45f5db);}try{if(_0x4ffe6c[_0x5af9a1(-0x127,-0xd5,-0x15b,-0xf9)]!==_0x4ffe6c[_0x5af9a1(-0xeb,-0x9a,-0xcf,-0xae)]){const _0xbf5b55=await dbs['storeReadO'+_0x3c5187(0x152,0x8a,0x66,0xd3)](NAI_CHAR_REF_CACHE_KEY);_0xbf5b55&&_0xbf5b55[_0x3c5187(0x7e,0xd3,0x7f,0xd8)]&&_0x4ffe6c[_0x3c5187(0xc1,0x170,0xf3,0x12e)](updateNovelaiCharRefImagePreview,_0xbf5b55['data']);}else{const _0x345729=_0x26d777['getElement'+_0x5af9a1(-0xf5,-0x81,-0x110,-0xe9)](_0x4ffe6c['bJKrW']),_0xfe5633=_0x56422b[_0x5af9a1(-0x7c,-0x2c,-0x3,-0x54)+_0x3c5187(0x15,0x56,0x65,0x55)](_0x4ffe6c[_0x5af9a1(-0x6e,-0x48,-0x12,-0xc9)]),_0x44a2bb=_0x1a9f32[_0x5af9a1(-0x68,-0xa9,-0x90,-0xae)+_0x3c5187(0x6c,0x27,0xab,0x9b)](_0x4ffe6c[_0x5af9a1(-0xf8,-0x16a,-0x97,-0x157)]);_0x345729['src']&&_0x345729['src'][_0x3c5187(0x64,0x65,0xa7,0x64)](_0x4ffe6c[_0x3c5187(0x30,0x124,0xe0,0xb0)])&&_0x4ffe6c[_0x3c5187(0x18f,0x105,0x13c,0x10f)](_0x345729['src'],_0x297a95)&&_0x59edf7[_0x5af9a1(-0x85,-0xbe,-0xc1,-0xb)+_0x5af9a1(-0x103,-0xc0,-0x147,-0xf6)](_0x345729[_0x5af9a1(-0x148,-0x136,-0x18c,-0x10b)]),_0x4dabe0?(_0x345729[_0x3c5187(0x71,0x69,0x1f,0x48)]=_0x538709,_0x345729[_0x5af9a1(-0x75,-0x19,-0x7d,-0xb6)]['display']=_0x4ffe6c[_0x3c5187(0x165,0x155,0xd6,0xf2)],_0xfe5633[_0x5af9a1(-0x75,-0x29,-0x71,-0xe)][_0x5af9a1(-0xdb,-0x12a,-0x106,-0xdf)]=_0x4ffe6c[_0x3c5187(0x147,0x105,0x103,0xeb)],_0x44a2bb[_0x3c5187(0xd2,0xfa,0x10b,0x11b)][_0x5af9a1(-0xdb,-0xf9,-0xf5,-0x136)]=_0x4ffe6c['IzqQC']):(_0x345729[_0x5af9a1(-0x148,-0xc7,-0x166,-0x137)]='',_0x345729[_0x3c5187(0xc0,0xb9,0x188,0x11b)][_0x5af9a1(-0xdb,-0x11c,-0x113,-0xda)]=_0x4ffe6c[_0x3c5187(0xcf,0x157,0x125,0xeb)],_0xfe5633[_0x5af9a1(-0x75,-0x92,-0xd1,-0x26)]['display']=_0x4ffe6c[_0x3c5187(0x7a,0x10e,0x151,0xf0)],_0x44a2bb[_0x5af9a1(-0x75,-0x23,-0xa0,-0x6c)]['display']=_0x4ffe6c[_0x5af9a1(-0xa5,-0xac,-0xc5,-0x34)],_0x4e910c[_0x3c5187(0x46,0x11,0x79,0x8c)+_0x3c5187(0xcb,0x91,0xa6,0x111)]=null,_0x296903=null);}}catch(_0x39388e){console['error']('Error\x20load'+_0x3c5187(0x2d,0xf,0xbd,0x68)+_0x5af9a1(-0x105,-0x12b,-0x177,-0x17a)+_0x5af9a1(-0xd0,-0x4f,-0xf7,-0xd8)+_0x5af9a1(-0xfa,-0x88,-0xc0,-0x114),_0x39388e);}try{const _0x27684b=await dbs['storeReadO'+_0x3c5187(0x118,0xf4,0x5a,0xd3)](COMFYUI_REF_CACHE_KEY);if(_0x27684b&&_0x27684b['data']&&_0x27684b[_0x3c5187(0xbe,0xf7,0x65,0xd8)]['data']&&_0x27684b[_0x3c5187(0x112,0xcb,0x13c,0xd8)][_0x5af9a1(-0x125,-0x148,-0xc9,-0xf5)+_0x5af9a1(-0xd5,-0xe7,-0xa3,-0xe2)]){const _0x4c2ff0=_0x27684b[_0x5af9a1(-0xb8,-0xf9,-0x4e,-0x123)],_0x2e92e0=await _0x4ffe6c[_0x5af9a1(-0x62,-0xa7,-0x59,-0x61)](fetch,_0x4c2ff0[_0x3c5187(0x68,0xe0,0xac,0xd8)]),_0x29590d=await _0x2e92e0[_0x5af9a1(-0xde,-0xa4,-0x11d,-0x100)](),_0x57281d=URL[_0x3c5187(0xf6,0x85,0x85,0x7d)+_0x3c5187(0x47,0x94,0x32,0x8d)](_0x29590d);_0x4ffe6c[_0x5af9a1(-0x62,-0x79,0x5,0x1)](updateComfyUIImagePreview,_0x57281d),comfyuiImageObjectURL=_0x57281d,window[_0x5af9a1(-0x104,-0x8b,-0x105,-0xd8)+_0x3c5187(0xa7,0xe9,0xd7,0x111)]=_0x4c2ff0[_0x3c5187(0xd0,0x2e,0xb,0x6b)+_0x5af9a1(-0xd5,-0x5e,-0xe2,-0xda)],_0x4ffe6c[_0x5af9a1(-0x62,-0x82,-0xda,0x14)](addLog,_0x3c5187(0x142,0xdc,0xf8,0x12b)+_0x5af9a1(-0x5a,-0xd4,-0x60,-0x55)+_0x4c2ff0[_0x5af9a1(-0x125,-0xcd,-0x198,-0xea)+'Name']),console[_0x3c5187(0x4a,-0xb,0xd3,0x61)]('Loaded\x20Com'+_0x5af9a1(-0x57,-0xe,-0x1e,-0x34)+_0x3c5187(0x3a,0x25,0x36,0x5e)+_0x5af9a1(-0xd1,-0x142,-0x149,-0x10c)+_0x4c2ff0[_0x3c5187(0x3a,0x20,0x42,0x6b)+_0x3c5187(0xf5,0x61,0x65,0xbb)]);}else{if(_0x27684b&&_0x4ffe6c[_0x5af9a1(-0x115,-0xf9,-0x11e,-0x100)](typeof _0x27684b[_0x3c5187(0x133,0x13a,0x64,0xd8)],_0x3c5187(0x131,0x10d,0xe8,0xb4))){const _0x205870=await _0x4ffe6c[_0x3c5187(0x143,0x116,0x10c,0x12e)](fetch,_0x27684b[_0x5af9a1(-0xb8,-0x89,-0x9e,-0x4f)]),_0xe29e=await _0x205870[_0x3c5187(0x82,0x60,0xf9,0xb2)](),_0x4e9783=URL['createObje'+_0x3c5187(0x3f,0xf1,0x50,0x8d)](_0xe29e);updateComfyUIImagePreview(_0x4e9783),comfyuiImageObjectURL=_0x4e9783,console['warn'](_0x4ffe6c[_0x5af9a1(-0x7d,-0x39,-0xe1,-0xcd)]);}}}catch(_0xdb9afb){console[_0x3c5187(0xd3,0x36,0x53,0xa2)](_0x4ffe6c[_0x3c5187(0x8f,0x14d,0x10a,0xf9)],_0xdb9afb);}}export function initImageUpload(_0x22751c){const _0x43d657={'WbOMK':_0x4de23e(-0x5e,-0x97,-0xc6,-0x2f)+_0x22dbb9(-0x13f,-0x13e,-0xf5,-0xcd),'DSVMr':_0x22dbb9(-0xe0,-0xe1,-0xfc,-0x144)+'mage-previ'+'ew-contain'+_0x4de23e(-0x7a,-0x52,-0x2a,-0x48)+'tu8-image-'+_0x4de23e(-0xcc,-0x97,-0xc9,-0x14c)+'r','dCeYo':_0x4de23e(-0xa6,-0xcc,-0x125,-0x7a)+_0x4de23e(-0xa7,-0x39,-0x111,-0xf8)+_0x22dbb9(-0x177,-0xb3,-0x191,-0x120),'tQlRB':_0x4de23e(-0x150,-0xd1,-0xec,-0x134),'qYprI':'block','uhtNm':_0x4de23e(-0x70,-0xc5,-0x90,-0x9e),'VegSB':_0x22dbb9(-0xa3,-0x114,-0xb3,-0xfd)+'x','ywnjq':_0x22dbb9(-0x124,-0x197,-0xde,-0x11d),'BzTDE':function(_0x234192,_0x5c02a0){return _0x234192!==_0x5c02a0;},'QzNcm':_0x22dbb9(-0x137,-0x160,-0xfd,-0x123),'MsGGB':_0x22dbb9(-0x161,-0x162,-0x105,-0x14d),'OeMRT':_0x4de23e(-0xc1,-0xcf,-0x9e,-0x11c)+_0x4de23e(-0x130,-0x179,-0x11a,-0xf5)+_0x4de23e(-0x100,-0x117,-0x179,-0x14e),'VrmKD':'LVdJg','WYEeY':_0x4de23e(-0xc1,-0x7c,-0x8b,-0x65)+'2','hidKY':function(_0x52a5e){return _0x52a5e();},'mqmqP':_0x4de23e(-0x146,-0x147,-0xfe,-0x10f)+_0x22dbb9(-0x25,-0x47,-0x91,-0x84)+_0x4de23e(-0x91,-0x45,-0x28,-0x109),'stPBH':_0x4de23e(-0xb0,-0xae,-0x5b,-0xbb),'JDBQM':'#imageInpu'+_0x22dbb9(-0xd6,-0xde,-0x198,-0x118),'jGwzx':_0x22dbb9(0x12,-0x40,-0x77,-0x56),'glOAC':'#novelai-r'+_0x4de23e(-0x7c,-0x30,-0x31,-0xe7)+_0x4de23e(-0x91,-0x5d,-0x38,-0x7c),'ZjdRD':_0x22dbb9(-0x18c,-0xb5,-0x14c,-0x122)+_0x22dbb9(-0xb,-0x15,-0x63,-0x5c)+'_ref','ZWdmt':_0x4de23e(-0x7d,-0xae,-0x1,-0x86)+_0x22dbb9(-0x137,-0x144,-0x99,-0xe9)+_0x4de23e(-0x7b,-0xe1,-0x6d,-0xc5)+_0x4de23e(-0x129,-0x19d,-0x1a6,-0x18b),'yTOfX':'#comfyui-s'+_0x4de23e(-0x8d,-0xc4,-0xfe,-0x13)+_0x4de23e(-0x91,-0xb8,-0xbf,-0x39),'fXwHB':'#imageInpu'+'t2','MHRxF':_0x4de23e(-0x15d,-0x107,-0x1c8,-0x10a)+_0x4de23e(-0x7c,0x4,-0x9f,-0x63)+_0x22dbb9(-0x55,-0x7f,-0x72,-0x88)};_0x43d657[_0x22dbb9(-0x63,-0x108,-0xd9,-0x8e)](loadCachedImages),_0x22751c['find'](_0x43d657['mqmqP'])['on'](_0x43d657['stPBH'],()=>{function _0x3d40eb(_0x1640e9,_0x4dd1bc,_0x570b8d,_0x3a0247){return _0x22dbb9(_0x1640e9-0x1a,_0x4dd1bc-0x111,_0x570b8d,_0x3a0247-0x5c9);}function _0x2bfc8a(_0x43877c,_0x46b4ae,_0x2641d7,_0x12518c){return _0x22dbb9(_0x43877c-0xa3,_0x46b4ae-0x1e1,_0x12518c,_0x46b4ae- -0xc3);}document[_0x2bfc8a(-0xf3,-0x12c,-0xf5,-0x193)+_0x2bfc8a(-0x1e1,-0x1b9,-0x169,-0x1a5)](_0x3d40eb(0x496,0x58c,0x4f6,0x511)+'_novelai')[_0x2bfc8a(-0x1d3,-0x16a,-0x123,-0x1a6)]();}),_0x22751c['find'](_0x43d657[_0x22dbb9(-0xc4,-0xe8,-0xfa,-0xfc)])['on'](_0x43d657[_0x4de23e(-0xec,-0x150,-0x15d,-0xee)],handleNovelaiImageUpload),_0x22751c[_0x22dbb9(-0xf4,-0x11e,-0x76,-0xf5)](_0x43d657[_0x4de23e(-0x158,-0x132,-0x1a1,-0x140)])['on']('click',()=>{function _0x2c938b(_0x2e0b9e,_0x3cf896,_0x1386f3,_0x5913ca){return _0x22dbb9(_0x2e0b9e-0x174,_0x3cf896-0x136,_0x1386f3,_0x5913ca- -0xb6);}function _0x350219(_0x18bae2,_0x189cf2,_0x330fbd,_0x1d60f2){return _0x4de23e(_0x18bae2-0x44f,_0x189cf2-0x16e,_0x189cf2,_0x1d60f2-0x108);}if(_0x43d657[_0x350219(0x377,0x350,0x35a,0x3e1)](_0x43d657[_0x350219(0x398,0x400,0x401,0x37b)],_0x43d657[_0x350219(0x36d,0x363,0x3b3,0x347)]))removeNovelaiImage();else{const _0xdeefe0=_0x210bf5[_0x2c938b(-0x160,-0x177,-0x165,-0x11f)+'ById'](_0x43d657['WbOMK']),_0x47128e=_0x582a18[_0x350219(0x3c9,0x35a,0x423,0x3be)+_0x2c938b(-0x1b5,-0x254,-0x1a1,-0x1f2)](_0x43d657[_0x350219(0x352,0x3c0,0x2fc,0x343)]),_0x6c9daa=_0x368fd2[_0x350219(0x3dd,0x3c5,0x42a,0x385)+_0x2c938b(-0x140,-0x17a,-0x206,-0x1ac)](_0x43d657[_0x2c938b(-0x152,-0x186,-0x1c7,-0x1cf)]);if(_0x161056&&_0x44d585[_0x350219(0x319,0x393,0x2be,0x353)](_0x43d657[_0x350219(0x344,0x380,0x32d,0x39c)])){_0xdeefe0[_0x2c938b(-0x18c,-0x247,-0x1f9,-0x1ff)]=_0x46bce0,_0xdeefe0[_0x350219(0x3d0,0x42a,0x397,0x3f9)][_0x350219(0x36a,0x3de,0x383,0x374)]=_0x43d657[_0x2c938b(-0x1e9,-0x188,-0x1ab,-0x169)],_0x47128e[_0x350219(0x3d0,0x385,0x40f,0x3a7)]['display']=_0x43d657[_0x2c938b(-0x20d,-0x1f0,-0x1aa,-0x1a3)],_0x6c9daa[_0x350219(0x3d0,0x3b7,0x3cb,0x405)][_0x350219(0x36a,0x2f9,0x316,0x308)]=_0x43d657[_0x350219(0x3cc,0x39e,0x41c,0x441)];const _0x1f6e6d=_0x11748f[_0x2c938b(-0x97,-0x10f,-0x90,-0x10f)](','),_0xb762cc=_0x1f6e6d[0x2*0x24b+-0xd49+-0x1*-0x8b3][_0x350219(0x3ed,0x36e,0x3c4,0x46c)](':')[-0xf*0x225+-0x81a+0x2846][_0x350219(0x3ed,0x43b,0x405,0x444)](';')[0x1b84+0xd3*0x19+-0x301f];_0x28a70f=_0xb762cc,_0x17dc64[_0x350219(0x3ab,0x382,0x3ff,0x389)+_0x350219(0x307,0x2c9,0x31f,0x288)+'e']=_0x1f6e6d[0x1*0x114b+0x1fac+-0x6*0x829];const _0x53e9ec={};_0x53e9ec['id']=_0x2ed6c0,_0x53e9ec[_0x2c938b(-0x13a,-0x180,-0x14c,-0x16f)]=_0x16923d,_0x27bcca[_0x350219(0x3ba,0x427,0x3ba,0x34b)+_0x2c938b(-0xb9,-0x143,-0x165,-0x12b)](_0x53e9ec);}else{const _0x358cba=_0x2c938b(-0x10b,-0x166,-0x18d,-0x145)[_0x2c938b(-0xe7,-0xc9,-0x129,-0x10f)]('|');let _0x37c13e=0x112d+-0xac*0x1f+0x3a7;while(!![]){switch(_0x358cba[_0x37c13e++]){case'0':_0x47128e['style']['display']=_0x43d657[_0x350219(0x35e,0x2e2,0x3aa,0x3a6)];continue;case'1':_0xdeefe0[_0x350219(0x3d0,0x3c9,0x3c6,0x442)][_0x2c938b(-0x14a,-0x16c,-0x1ef,-0x192)]=_0x350219(0x3df,0x3c9,0x3c1,0x3d6);continue;case'2':_0x6c9daa[_0x350219(0x3d0,0x3a5,0x398,0x393)][_0x350219(0x36a,0x32e,0x367,0x3ad)]=_0x43d657[_0x2c938b(-0x12d,-0x193,-0x154,-0x1a3)];continue;case'3':_0xdeefe0[_0x2c938b(-0x1a0,-0x183,-0x1cd,-0x1ff)]='';continue;case'4':_0x41aa85[_0x350219(0x3ab,0x3e5,0x3ee,0x416)+_0x350219(0x307,0x31e,0x2d1,0x33e)+'e']=null;continue;}break;}}}});function _0x4de23e(_0x4d0a44,_0xd52daf,_0x3d3c21,_0xd44469){return _0x2524ad(_0x4d0a44-0xcf,_0xd52daf-0x1e1,_0x3d3c21,_0xd44469-0x148);}_0x22751c['find'](_0x22dbb9(-0xd5,-0x122,-0x123,-0x13d)+_0x4de23e(-0xb2,-0xb9,-0x8c,-0x5e)+_0x4de23e(-0x7b,-0xc0,0x6,-0xd7)+_0x22dbb9(-0x169,-0x168,-0x183,-0x120))['on'](_0x43d657[_0x22dbb9(-0x156,-0xa8,-0x147,-0xfe)],()=>{function _0x4e4f5b(_0x17e104,_0x142abe,_0x7c8743,_0x1ad1da){return _0x22dbb9(_0x17e104-0x30,_0x142abe-0xc7,_0x7c8743,_0x17e104-0xd9);}function _0x1e5475(_0x4a820e,_0x309d38,_0x29f1b5,_0x337c90){return _0x4de23e(_0x29f1b5-0x30,_0x309d38-0x19,_0x4a820e,_0x337c90-0x184);}document[_0x1e5475(0x32,-0x9b,-0x42,0x1e)+'ById'](_0x43d657[_0x1e5475(-0x83,-0xca,-0xa4,-0x61)])['click']();}),_0x22751c[_0x22dbb9(-0xef,-0x162,-0x125,-0xf5)](_0x43d657[_0x4de23e(-0xb4,-0xdb,-0xc8,-0x71)])['on'](_0x43d657['jGwzx'],handleNovelaiCharRefImageUpload);function _0x22dbb9(_0x5eed6a,_0x3903c3,_0x473668,_0x2eb7ff){return _0x196923(_0x5eed6a-0xc6,_0x2eb7ff- -0x3a6,_0x473668-0x146,_0x473668);}_0x22751c[_0x22dbb9(-0x15c,-0x176,-0x13f,-0xf5)](_0x43d657[_0x4de23e(-0xce,-0x81,-0x80,-0xb5)])['on'](_0x43d657['stPBH'],()=>{function _0x365de4(_0x37e2de,_0x5dd645,_0x1646d9,_0x4c8faf){return _0x22dbb9(_0x37e2de-0x1b7,_0x5dd645-0xe4,_0x1646d9,_0x4c8faf-0x23f);}function _0x33cb07(_0x272179,_0x52cc64,_0x3d9b18,_0x3d98ed){return _0x22dbb9(_0x272179-0x129,_0x52cc64-0x4f,_0x52cc64,_0x3d98ed-0x38f);}_0x43d657[_0x365de4(0x118,0x6d,0x105,0xee)]!==_0x43d657[_0x33cb07(0x262,0x23a,0x209,0x23e)]?_0x258584[_0x33cb07(0x33e,0x350,0x2ba,0x309)+_0x33cb07(0x275,0x306,0x25d,0x28b)](_0x2a2cd3[_0x33cb07(0x27e,0x1f7,0x29a,0x246)]):removeNovelaiCharRefImage();}),_0x22751c[_0x22dbb9(-0xe3,-0x74,-0x123,-0xf5)](_0x43d657[_0x4de23e(-0x6a,-0xa6,-0x74,-0x83)])['on'](_0x43d657['stPBH'],()=>{function _0x4a9ade(_0x37c3be,_0xf394bb,_0x584398,_0x4c6600){return _0x4de23e(_0xf394bb-0x3d5,_0xf394bb-0xc3,_0x584398,_0x4c6600-0x22);}function _0x3f8c6c(_0x16c700,_0x1cdd67,_0x41e31c,_0x413552){return _0x22dbb9(_0x16c700-0x1ba,_0x1cdd67-0x54,_0x41e31c,_0x1cdd67-0x5);}document['getElement'+_0x3f8c6c(-0x121,-0xf1,-0xf6,-0xe6)](_0x43d657['WYEeY'])[_0x4a9ade(0x2e6,0x325,0x2e3,0x2e8)]();}),_0x22751c[_0x22dbb9(-0x105,-0xb6,-0xe9,-0xf5)](_0x43d657[_0x22dbb9(-0xe8,-0xc1,-0x142,-0xd4)])['on'](_0x43d657[_0x22dbb9(-0xed,-0x11b,-0xc9,-0xe3)],handleImageUpload2),_0x22751c[_0x22dbb9(-0x129,-0x16c,-0x105,-0xf5)](_0x43d657[_0x4de23e(-0x117,-0xa5,-0xd7,-0x14d)])['on']('click',()=>{removeComfyUIImage();});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};