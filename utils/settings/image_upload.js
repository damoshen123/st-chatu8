function _0x16fd(){const _0x352366=['z2nVD2C','swfUD2G','i2nVBwz5DwKTCG','CwTiq2e','CMv2B2TLt2jQzq','y0LYthq','yxqUifbSzwfZzq','Aw5NignHy2HLza','Bwv0Ag9K','y01hq0S','yMXVyG','tNDst1a','swDRvK8','BhnTtwq','z0Drswm','ignHy2HLihrVia','AMvlsuq','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','mJaWntDlyLfpDuS','DgvpChO','z1vuy3G','zwzFAw1Hz2u','z2vFBMfPx2nOyq','zgfJu0y','CxzvDva','6k+35ywi6k6+572Uq29TzNLv','C3jJ','AgfYlxjLzI1PBq','mtmWody0zgTYuffZ','Aw1Hz2uVCg5N','Cfz1wuO','tfrsshO','i2nVBwz5DwKTAq','yMXVyJO','DNPUtLK','BMfTzq','i2LTywDLsw5WDq','A2fVDhvWAwfU','wwPVC0q','CMvuBhm','zwXbssbPBwfNzq','C2vHCMnO','y1DdrfK','C2joufC','C3HwALy','yxbWBhK','wM1dsNC','CgrrrMG','r0jzBfK','x3jLzG','AvPQtfi','qvvlqxm','zwXOy1y','BM9Uzq','vufUDw0','CgXHy2vOB2XKzq','C3rYAw5N','DgPIDfG','tLHksg8','CMvMlwLTywDLlq','su10ELa','rKDcCgO','sNrpENO','mJqWntq2nLHJBwnXyW','AfbRBLK','zxiGlNn0lwnOyq','ExvuD0y','i25VDMvSywKTCW','BgfJzwHVBgrLCG','ywDL','Ag5rELu','DgfYz2v0','tMfTzq','y3jLyxrLt2jQzq','wMDUyMS','tvnXD2i','ndK4otG5n0riEhz5uq','zMLPu1q','DeTRwvm','Df9UB3zLBgfP','zMLSzxm','y29TzNL1AvvYBa','DgvYihjLzMvYzq','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','5zMO6l+u5zUE5PwW5O2UoIa','BMnLifvjigvSzq','C3rVCMvszwfKvW','ihrVihvWzgf0zq','i25VDMvSywKTCG','zMjWCuq','y29TzNL1AwnHBG','igzYB20Gy2fJAa','nhWZFdf8mNW1Fa','v09Vs3u','C3bSAxq','ie5VDMvSquKGqW','yw5ZzMvYsw1HzW','C3rYAw5NAwz5','zxCTy29UDgfPBG','ndy0mJKYzhvozejO','ueDnDwS','zwXbssbJAgfYia','qNLjza','mta0odC3ugfUD1bV','swXpEwm','wwndv1G','lwj0BG','A1fszMm','y2fJAgvFBM92zq','yNrU','yxHJCNe','zxjYB3i','ihjLlxvWBg9Hza','qwL0zLG','CMvZDwX0','CMvM','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','C3D1vKy','s3nrzLe','z2uY','Df9UywLFy2HHCG','r3DMzue','igzYB20GB2XKia','qwHjt3y','ywDLlxbYzxzPzq','zM9wtxK','kcGOlISPkYKRkq','zgf0yq','m29jC3zorG','B3HSANG','y2XPy2S','DgHLig5LDYbMBW','5lIk5lYG5AsX6lsLoIa','zxnZAw5Nie5VDG','CKHRu2W','ChjLDMLLD0LTyq','wwPqDxe','ywDLoG','BgfPx3zPyMvFDa','ie5VDMvSquKGvG','re9OrwO','mtyXswnltMzr','lxjLzI1PBwfNzq','mNWXFdr8nxWZFa','6k+M5OofoIa','sK9rENa','C3rHCNrZv2L0Aa','EwrOvKe','AhfAuwC','vfzXtK4','Dg9Y','Aw5Nig5LDYbZEq','CML0zq','zfzrz3m','zw1VDMuTAw1HzW','ExntALK','Aw1Hz2vjBNb1Da','yvzxr2W','ue9tva','BwfNztO','m3WWFdj8nxWXFa','wKLpt3m','EhzIBwq','yM9KEq','CgPZzKC','5zU+54Mh5Ase55cg5AsX6lsLoIa','DhjPBq','y29UC3rYDwn0BW','zMDyzgO','C2vYDMvYrMLSzq','ssbbueNLNldLNydJGii','s1LsEeu','B3bLBKrc','BwvUDhmGBM90ia','C1rtBw8','tgTREgG','vwHVv2y','vxvNBge','s2T0t1a','zKLTywDL','tg9HzgvKienVBq','yMXVy2S','zMfrz0O','vgfmBhK','z2v0rwXLBwvUDa','zs1IDg4','AwjLigLTywDLoG','w0nOyxjszwzDia','EfnQz1u','r1zjBe8','zMXLEa','v01juhm','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','Aw5SAw5LlwzSzq','zwXLy3qTy2HHCG','zgLZCgXHEq','zw1VDMuTy2HHCG','C3rVCMvszwfKtW','y2fJAguGzM9YBq','BeLzu20','y3rvuKW','CIaUC3qTy2HHDa','C3rLBq','Bw92zs1PBwfNzq','zwXLy3qTAw1HzW','nhWYFdn8mxWW','Aw1Hz2u','BgHVyNK','BwfNzs1WCMv2Aq','tvvvCLG','rxjYB3iGChjVyW','BMfPm1zPyMvuCG','BgLMALe','C3rVCMvezwXLDa','x25VDMvSywK','Bw92zs1JAgfYlq','i25VDMvSywKTAq','CMvHzefZrgf0yq','ztOG','ELLfzuS','tuLSCKe','qxznte0','B25SB2fKzw5K','zgf0ytPPBwfNzq','Dgv4Da','Bg9N','CeX2wfO','BM92zwXHAs1Yzq','rxjYB3iGBg9Hza','Dg9tDhjPBMC','vMn6rvC','mti5mZCYmgD1sxjWqq','quHOzLO','te1VB0m','BwvZC2fNzq','weHpDeW','CwTdy3y','ywTlrMS','z2vFBM92zwXHAq','CwPvCMK','C3r5Bgu','y3PIEK0','BMX5','qwTfDvi','BMfPm0nOyxjszq','t2XKignOyxjHyW','CM1HDc4','y29TzNL1As1Yzq','z2Xrwg8','EKHIDhK','vuNLM77NIyC6ia','CxvLCNLtzwXLyW','yNPlDKy','Dhu4lwLTywDLlq','mtCWwNfLAwr4','mZH1wvDsuxC','zMLUza','DY1JB250ywLUzq'];_0x16fd=function(){return _0x352366;};return _0x16fd();}(function(_0x13dcbb,_0x43c89a){const _0x5b0295=_0x13dcbb();function _0x4fee50(_0x2c3b0c,_0xf1cc04,_0x400041,_0x20a0fe){return _0x3380(_0xf1cc04-0x18f,_0x400041);}function _0x2b0710(_0x310e42,_0x11096e,_0x4e718b,_0x38225c){return _0x3380(_0x11096e- -0x81,_0x310e42);}while(!![]){try{const _0x411fbf=parseInt(_0x4fee50(0x35c,0x320,0x2eb,0x31a))/(-0x174e+0x2030+-0x1*0x8e1)*(parseInt(_0x4fee50(0x296,0x30b,0x355,0x32c))/(0xb*0x255+0xe79+0x806*-0x5))+-parseInt(_0x4fee50(0x401,0x38e,0x396,0x356))/(0x1c3a*0x1+0x2*-0x1186+-0x1*-0x6d5)*(parseInt(_0x4fee50(0x348,0x371,0x3dc,0x36b))/(-0x1a9c+-0x4*-0x404+0xa90))+parseInt(_0x2b0710(0xc9,0xe3,0x76,0x140))/(-0x1b1*-0x13+-0x155*-0x1+-0x2173)+-parseInt(_0x4fee50(0x318,0x34d,0x33f,0x344))/(0xca5+0x1*0xaa5+-0x2*0xba2)+parseInt(_0x4fee50(0x32d,0x39b,0x3fa,0x360))/(0x2303*0x1+0xcba+-0x2fb6)*(parseInt(_0x2b0710(0x16e,0x11a,0xaa,0x11e))/(0x1a19+0x2298+-0x125*0x35))+parseInt(_0x2b0710(0x1cd,0x165,0x149,0x15e))/(-0x19f*0x5+-0x14b5+-0x41f*-0x7)*(-parseInt(_0x4fee50(0x327,0x30a,0x2ba,0x355))/(-0x26a2+0x2dd+-0x67*-0x59))+parseInt(_0x4fee50(0x3b6,0x35a,0x31d,0x392))/(-0xd59+-0x1cbb+-0x1*-0x2a1f);if(_0x411fbf===_0x43c89a)break;else _0x5b0295['push'](_0x5b0295['shift']());}catch(_0x218f1a){_0x5b0295['push'](_0x5b0295['shift']());}}}(_0x16fd,0x33423+-0x15a7e9+0x1df771));const _0x4c4d64=(function(){let _0x1e3356=!![];return function(_0x467ffe,_0x450c7e){const _0x2cf9d4=_0x1e3356?function(){function _0x8d17e9(_0x2e8379,_0x28490e,_0x480452,_0x164b29){return _0x3380(_0x164b29- -0xcb,_0x2e8379);}if(_0x450c7e){const _0x295640=_0x450c7e[_0x8d17e9(0xdc,0xb2,0x138,0xe1)](_0x467ffe,arguments);return _0x450c7e=null,_0x295640;}}:function(){};return _0x1e3356=![],_0x2cf9d4;};}()),_0x46412d=_0x4c4d64(this,function(){function _0xbf0007(_0x42dcca,_0x50710c,_0x407490,_0x94bfd7){return _0x3380(_0x42dcca- -0xb3,_0x407490);}const _0x5e7c0e={};_0x5e7c0e[_0xbf0007(0x79,0x6,0x5d,0xb)]=_0xbf0007(0x14a,0x155,0x103,0x1be)+'+$';const _0x208781=_0x5e7c0e;function _0x32d2f7(_0x4d33f5,_0x114a4d,_0x459d31,_0x575ad0){return _0x3380(_0x114a4d-0x2aa,_0x4d33f5);}return _0x46412d[_0xbf0007(0xaf,0xc1,0xb9,0x7e)]()[_0x32d2f7(0x42c,0x452,0x4a2,0x43e)](_0x208781['Lkkxh'])[_0xbf0007(0xaf,0x10b,0x3a,0x62)]()[_0x32d2f7(0x386,0x3ce,0x442,0x434)+'r'](_0x46412d)['search'](_0x32d2f7(0x43c,0x4a7,0x496,0x509)+'+$');});_0x46412d();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';function _0x3380(_0xbbbf91,_0x35e12b){_0xbbbf91=_0xbbbf91-(0x29+0x9e*0x10+-0x8ea);const _0x3b7ac3=_0x16fd();let _0x532e9e=_0x3b7ac3[_0xbbbf91];if(_0x3380['ROOvAX']===undefined){var _0x2a7407=function(_0x236cbe){const _0x469beb='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2f8a2d='',_0x1b637c='',_0x27dd79=_0x2f8a2d+_0x2a7407;for(let _0x3a2ee2=0x320+-0x11e*0xb+-0x2e*-0x33,_0x26e811,_0x58533b,_0x48a50f=-0x2*-0x72f+0x3b*-0x74+0xc5e;_0x58533b=_0x236cbe['charAt'](_0x48a50f++);~_0x58533b&&(_0x26e811=_0x3a2ee2%(0xc9d*0x2+-0x379+-0x15bd)?_0x26e811*(-0x15ce+0x14*0x155+0x24b*-0x2)+_0x58533b:_0x58533b,_0x3a2ee2++%(-0x19*-0xf8+0x2*0x1d+0x2*-0xc37))?_0x2f8a2d+=_0x27dd79['charCodeAt'](_0x48a50f+(0x19de+-0x757+0x127d*-0x1))-(0x11f2+-0x189e+0x6b6)!==0x25be*0x1+-0x18f4+-0xcca?String['fromCharCode'](0x4af+-0x140b*0x1+0x105b&_0x26e811>>(-(0x9d1+-0x3a9*0x9+-0x7b6*-0x3)*_0x3a2ee2&0x2301+0x1704+0x849*-0x7)):_0x3a2ee2:-0x5f3+-0xe*0x6c+-0xbdb*-0x1){_0x58533b=_0x469beb['indexOf'](_0x58533b);}for(let _0x5823d9=-0x6e5*0x5+-0xf36+0x31af,_0x405fb7=_0x2f8a2d['length'];_0x5823d9<_0x405fb7;_0x5823d9++){_0x1b637c+='%'+('00'+_0x2f8a2d['charCodeAt'](_0x5823d9)['toString'](-0x1*0x2299+0x1a*-0x2c+-0x9*-0x459))['slice'](-(-0x5a*0x2a+0xdf5+0xb*0x13));}return decodeURIComponent(_0x1b637c);};_0x3380['CfJrgo']=_0x2a7407,_0x3380['yuYPBf']={},_0x3380['ROOvAX']=!![];}const _0x4c50a2=_0x3b7ac3[0x9a6+-0x26be+0x1d18],_0x1c2c2c=_0xbbbf91+_0x4c50a2,_0x5ab463=_0x3380['yuYPBf'][_0x1c2c2c];if(!_0x5ab463){const _0x1daa83=function(_0x32c796){this['KgCNWU']=_0x32c796,this['YGyzUm']=[0x2291+-0x1a74*-0x1+-0x1e82*0x2,-0x49*0x2b+0x1*-0x128f+0x1ed2,0x15b9*-0x1+0x3*-0x370+-0x8b*-0x3b],this['ckpVxg']=function(){return'newState';},this['uGDxeh']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['mmxUNT']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1daa83['prototype']['esfvko']=function(){const _0x53c2e5=new RegExp(this['uGDxeh']+this['mmxUNT']),_0x166e27=_0x53c2e5['test'](this['ckpVxg']['toString']())?--this['YGyzUm'][0x478+0x138a*-0x1+-0x1*-0xf13]:--this['YGyzUm'][-0x497+0x3*0xb2b+-0x1cea];return this['XUPvnf'](_0x166e27);},_0x1daa83['prototype']['XUPvnf']=function(_0x2dc7fd){if(!Boolean(~_0x2dc7fd))return _0x2dc7fd;return this['YAzTSw'](this['KgCNWU']);},_0x1daa83['prototype']['YAzTSw']=function(_0x1a66fa){for(let _0x3b0db6=-0xcc5+-0x1d68+-0x3*-0xe0f,_0x5273a5=this['YGyzUm']['length'];_0x3b0db6<_0x5273a5;_0x3b0db6++){this['YGyzUm']['push'](Math['round'](Math['random']())),_0x5273a5=this['YGyzUm']['length'];}return _0x1a66fa(this['YGyzUm'][-0x4*-0x146+0x1*-0x34b+-0x1cd]);},new _0x1daa83(_0x3380)['esfvko'](),_0x532e9e=_0x3380['CfJrgo'](_0x532e9e),_0x3380['yuYPBf'][_0x1c2c2c]=_0x532e9e;}else _0x532e9e=_0x5ab463;return _0x532e9e;}import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';function _0x1270fc(_0x2505e4,_0x61007b,_0x5965f8,_0x40e38a){return _0x3380(_0x5965f8-0x390,_0x2505e4);}import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x1af737(0x50f,0x582,0x527,0x58d)+_0x1270fc(0x54f,0x571,0x599,0x592)+'ransfer_im'+_0x1270fc(0x4d7,0x5d1,0x554,0x58d),NAI_CHAR_REF_CACHE_KEY=_0x1270fc(0x58e,0x5a8,0x57b,0x547)+'lai_char_r'+_0x1270fc(0x4fe,0x4b7,0x524,0x50b),COMFYUI_REF_CACHE_KEY='cache_comf'+'yui_ref_im'+_0x1270fc(0x5c7,0x50e,0x554,0x5c5);let nai3VibeTransferImageMimeType=_0x1270fc(0x54a,0x533,0x52c,0x4d2),nai3CharRefImageMimeType=_0x1af737(0x4c0,0x522,0x488,0x490),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x4f7adb){function _0x1a8a31(_0x48d457,_0x3688bc,_0x8a6124,_0x508392){return _0x1af737(_0x508392- -0x20b,_0x3688bc-0x102,_0x8a6124-0x39,_0x48d457);}const _0x282db2={};_0x282db2[_0x1a8a31(0x2df,0x26e,0x2bf,0x267)]=_0x227713(0x434,0x3ad,0x3b7,0x346),_0x282db2[_0x227713(0x427,0x36f,0x3a8,0x386)]=_0x227713(0x3bd,0x2fb,0x33e,0x3b4),_0x282db2['pLvXZ']=_0x227713(0x3e1,0x482,0x409,0x414)+_0x1a8a31(0x224,0x2cc,0x293,0x284),_0x282db2[_0x1a8a31(0x364,0x29c,0x31e,0x30e)]=_0x1a8a31(0x2b0,0x220,0x2ce,0x279)+'move-image'+_0x1a8a31(0x2a9,0x332,0x310,0x302),_0x282db2[_0x227713(0x401,0x3fa,0x3b4,0x424)]=_0x1a8a31(0x216,0x2f4,0x279,0x275),_0x282db2[_0x227713(0x3dd,0x32f,0x366,0x351)]=function(_0x331c3b,_0x34d371){return _0x331c3b===_0x34d371;},_0x282db2['JOQzp']=_0x227713(0x336,0x393,0x36b,0x398),_0x282db2[_0x1a8a31(0x2e4,0x349,0x2a2,0x2cc)]=_0x1a8a31(0x250,0x247,0x219,0x24b),_0x282db2[_0x227713(0x2c8,0x2c1,0x331,0x312)]=function(_0x32e747,_0x219b77){return _0x32e747===_0x219b77;};function _0x227713(_0x18a121,_0x1d72c7,_0x229bcd,_0x42d8a8){return _0x1270fc(_0x42d8a8,_0x1d72c7-0x5b,_0x229bcd- -0x18d,_0x42d8a8-0x1ba);}_0x282db2[_0x227713(0x34e,0x333,0x324,0x336)]=_0x1a8a31(0x263,0x1bc,0x203,0x238),_0x282db2[_0x227713(0x3ec,0x3bc,0x3a9,0x3e9)]=_0x1a8a31(0x210,0x1ec,0x22e,0x263);const _0x39c5b2=_0x282db2,_0x5e5027=document['getElement'+'ById'](_0x39c5b2[_0x1a8a31(0x200,0x2ca,0x29e,0x278)]),_0x3a1598=document[_0x227713(0x3ee,0x3f9,0x37b,0x393)+_0x227713(0x48a,0x43f,0x418,0x3b9)](_0x1a8a31(0x23d,0x2c2,0x209,0x26e)+'mage-previ'+'ew-contain'+_0x1a8a31(0x27b,0x28f,0x2a9,0x2d9)+_0x1a8a31(0x29c,0x2f4,0x236,0x293)+_0x227713(0x399,0x353,0x3b9,0x3ae)+'r'),_0x1bee10=document['getElement'+_0x1a8a31(0x2c2,0x31b,0x2f5,0x2fe)](_0x39c5b2['KsQfQ']);if(_0x4f7adb&&_0x4f7adb['startsWith'](_0x39c5b2['iZjLR'])){if(_0x39c5b2['VczEW'](_0x39c5b2['JOQzp'],_0x39c5b2[_0x1a8a31(0x3a2,0x3a8,0x307,0x329)])){_0x5e5027[_0x1a8a31(0x330,0x28e,0x256,0x2b2)]=_0x4f7adb,_0x5e5027[_0x1a8a31(0x297,0x20c,0x221,0x286)][_0x1a8a31(0x2da,0x257,0x257,0x259)]=_0x39c5b2['elhcV'],_0x3a1598['style'][_0x1a8a31(0x25a,0x1fe,0x289,0x259)]=_0x1a8a31(0x34e,0x2dc,0x2a5,0x2cd),_0x1bee10[_0x227713(0x379,0x311,0x370,0x337)][_0x1a8a31(0x238,0x2ce,0x222,0x259)]=_0x1a8a31(0x20f,0x203,0x2d1,0x257)+'x';const _0x22b95c=_0x4f7adb['split'](','),_0x569a39=_0x22b95c[-0xc74*0x1+0x9d*-0x1d+0x1e3d][_0x1a8a31(0x29f,0x319,0x34d,0x2f6)](':')[-0x13*-0x7+0x20ec+-0x2170][_0x1a8a31(0x31f,0x2bc,0x2d7,0x2f6)](';')[0x1ca9+-0x1*0x12cd+-0x1*0x9dc];nai3VibeTransferImageMimeType=_0x569a39,window[_0x1a8a31(0x2be,0x27f,0x224,0x269)+_0x1a8a31(0x356,0x27e,0x31d,0x2f8)+'e']=_0x22b95c[0x2*-0x76b+0x344*0x2+-0x84f*-0x1];const _0xe51b9c={};_0xe51b9c['id']=NAI_VIBE_CACHE_KEY,_0xe51b9c[_0x1a8a31(0x30f,0x2e7,0x313,0x317)]=_0x4f7adb,dbs[_0x1a8a31(0x2ca,0x293,0x270,0x2ee)+'rite'](_0xe51b9c);}else{const _0x237cd6=(_0x1a8a31(0x304,0x354,0x3ae,0x338)+'4')[_0x1a8a31(0x33b,0x2fd,0x2f9,0x2f6)]('|');let _0x588fe6=-0x4*0x7e0+0x25d+-0x1d23*-0x1;while(!![]){switch(_0x237cd6[_0x588fe6++]){case'0':_0x2d112a['style'][_0x227713(0x2e5,0x2cd,0x343,0x2ff)]=_0x39c5b2[_0x1a8a31(0x2e1,0x2a7,0x2c4,0x267)];continue;case'1':_0x557dde['comfyuican'+_0x227713(0x3c9,0x417,0x3a7,0x368)]=null;continue;case'2':_0x27d3d1[_0x227713(0x35c,0x3d0,0x370,0x3ce)]['display']=_0x39c5b2['YjosD'];continue;case'3':_0x3f4b3a['src']='';continue;case'4':_0x57b783=null;continue;case'5':_0xd5939c[_0x1a8a31(0x231,0x261,0x216,0x286)][_0x1a8a31(0x20a,0x27b,0x2af,0x259)]=_0x39c5b2['MUUrX'];continue;}break;}}}else{if(_0x39c5b2[_0x1a8a31(0x26d,0x23a,0x2c5,0x247)](_0x39c5b2[_0x1a8a31(0x23d,0x234,0x1d9,0x23a)],_0x39c5b2[_0x1a8a31(0x284,0x2b7,0x223,0x23a)])){const _0x5bfba4=_0x39c5b2[_0x1a8a31(0x2c9,0x28c,0x302,0x2bf)]['split']('|');let _0x4bf10d=0xaf2*-0x1+0x16cb+-0x1*0xbd9;while(!![]){switch(_0x5bfba4[_0x4bf10d++]){case'0':window[_0x1a8a31(0x235,0x1f8,0x1f5,0x269)+_0x1a8a31(0x313,0x27d,0x279,0x2f8)+'e']=null;continue;case'1':_0x1bee10[_0x1a8a31(0x2bf,0x2e9,0x2e6,0x286)][_0x227713(0x337,0x344,0x343,0x2fb)]=_0x39c5b2[_0x1a8a31(0x216,0x21f,0x266,0x267)];continue;case'2':_0x5e5027[_0x227713(0x33f,0x377,0x370,0x3af)][_0x1a8a31(0x27c,0x242,0x2c4,0x259)]=_0x1a8a31(0x252,0x343,0x253,0x2cd);continue;case'3':_0x3a1598[_0x1a8a31(0x23a,0x275,0x2ae,0x286)][_0x1a8a31(0x291,0x27a,0x262,0x259)]=_0x39c5b2[_0x1a8a31(0x2b4,0x2bc,0x312,0x2be)];continue;case'4':_0x5e5027[_0x227713(0x3a2,0x3af,0x39c,0x34a)]='';continue;}break;}}else{const _0x367019=_0x2c4734[_0x1a8a31(0x2c3,0x328,0x378,0x30a)],_0x1d7a11={};_0x1d7a11[_0x227713(0x40a,0x3ea,0x401,0x43d)]=_0x367019,_0x1d7a11[_0x1a8a31(0x23c,0x270,0x276,0x23f)+_0x227713(0x3a3,0x35d,0x3ca,0x433)]=_0x17eda1[_0x1a8a31(0x2fa,0x2cd,0x261,0x2bb)];const _0x5468a9=_0x1d7a11,_0x1f0beb={};_0x1f0beb['id']=_0x56bbde,_0x1f0beb['data']=_0x5468a9,_0x490b4c[_0x1a8a31(0x2fd,0x363,0x294,0x2ee)+_0x1a8a31(0x2fc,0x311,0x35d,0x330)](_0x1f0beb);}}}function removeNovelaiImage(){function _0x4e3ed4(_0x34ec2e,_0x413fba,_0x46bdd9,_0x269d3a){return _0x1270fc(_0x34ec2e,_0x413fba-0x123,_0x413fba- -0x27c,_0x269d3a-0xdf);}const _0x21fb91={'GwfeA':function(_0x4eb523,_0x2a7f26){return _0x4eb523(_0x2a7f26);}};_0x21fb91[_0x4e3ed4(0x374,0x30c,0x2f3,0x2e0)](updateNovelaiImagePreview,null);function _0x42abe2(_0x3638f4,_0x208509,_0x5b0fff,_0xef25c){return _0x1270fc(_0x5b0fff,_0x208509-0x177,_0xef25c- -0x361,_0xef25c-0xec);}dbs[_0x4e3ed4(0x277,0x266,0x264,0x254)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x3d426c){function _0x193bfd(_0x23bae0,_0x39a3fe,_0x1480f1,_0x53ed19){return _0x1270fc(_0x23bae0,_0x39a3fe-0x176,_0x1480f1- -0x288,_0x53ed19-0x1ca);}const _0x20a4b9={'KktOP':function(_0x5749b4,_0x1493e8,_0x47c709){return _0x5749b4(_0x1493e8,_0x47c709);},'YpCnN':function(_0x516836,_0x839823){return _0x516836===_0x839823;},'cWCDY':_0x193bfd(0x300,0x35d,0x328,0x367),'vznNY':_0x193bfd(0x235,0x2af,0x257,0x1ef)+'essing\x20Nov'+_0x193bfd(0x230,0x314,0x2af,0x2b6)+':','kQRfc':function(_0x5b81ab,_0x23ac28){return _0x5b81ab+_0x23ac28;},'yuTwF':_0x509219(-0x1ec,-0x1bd,-0x211,-0x1d2)},_0x15d08c=_0x3d426c[_0x509219(-0x1b0,-0x1ba,-0x16d,-0x1e8)][_0x509219(-0x120,-0x184,-0x164,-0x135)][0x1*0x1330+-0x13d4+0x4*0x29];function _0x509219(_0x10ab89,_0x1c3b53,_0x2b5960,_0x54a8f5){return _0x1af737(_0x2b5960- -0x657,_0x1c3b53-0x118,_0x2b5960-0x84,_0x10ab89);}if(!_0x15d08c)return;try{const _0xd289d3=await _0x20a4b9[_0x193bfd(0x1d8,0x1b6,0x237,0x1fa)](processUploadedImage,_0x15d08c,!![]);updateNovelaiImagePreview(_0xd289d3);}catch(_0x254736){if(_0x20a4b9['YpCnN'](_0x509219(-0x223,-0x1b9,-0x1b1,-0x1d0),_0x20a4b9[_0x193bfd(0x298,0x255,0x2b1,0x327)])){const _0x262810=_0x182144[_0x509219(-0x14f,-0x171,-0x187,-0x1c2)](_0x62011b,arguments);return _0xcba517=null,_0x262810;}else console[_0x193bfd(0x34a,0x2f5,0x2f6,0x31c)](_0x20a4b9[_0x509219(-0x141,-0x1e6,-0x192,-0x132)],_0x254736),alert(_0x20a4b9[_0x509219(-0xce,-0x139,-0x149,-0xd8)](_0x20a4b9[_0x193bfd(0x2de,0x2cf,0x2c9,0x2bd)],_0x254736['message']));}}function updateNovelaiCharRefImagePreview(_0x4ffd84){const _0xcd9870={};_0xcd9870['hPknY']='#novelai-c'+_0x3049ea(0x8f,0x142,0x112,0xfa)+_0x3049ea(0x16c,0x1c2,0x120,0x15b)+_0x189d44(0x28b,0x2bd,0x28d,0x2be)+_0x189d44(0x22c,0x26e,0x267,0x286)+'u8-image-p'+_0x3049ea(0x191,0x173,0x18b,0x123),_0xcd9870[_0x189d44(0x330,0x2cf,0x337,0x32d)]=_0x3049ea(0x72,0xdc,0x53,0xc0)+_0x189d44(0x285,0x2e0,0x30d,0x294)+_0x189d44(0x36f,0x28e,0x346,0x2fa)+_0x189d44(0x38b,0x34a,0x37b,0x32c),_0xcd9870[_0x3049ea(0x122,0x17f,0x19f,0x148)]=function(_0x286f17,_0x2dd96c){return _0x286f17||_0x2dd96c;},_0xcd9870[_0x189d44(0x35c,0x33c,0x301,0x2fb)]=_0x3049ea(0xa8,0xc4,0x99,0x98)+'Old\x20charac'+_0x189d44(0x299,0x2d5,0x386,0x311)+_0x189d44(0x2e2,0x356,0x2fa,0x314)+'ments\x20not\x20'+'found\x20-\x20us'+_0x3049ea(0x1b9,0x14c,0x150,0x176)+_0x189d44(0x2f2,0x306,0x2ff,0x287),_0xcd9870['swuVF']='data:image';function _0x3049ea(_0x3f787d,_0x49312f,_0x3f6baf,_0x2d5b81){return _0x1270fc(_0x3f6baf,_0x49312f-0x1c2,_0x2d5b81- -0x430,_0x2d5b81-0x122);}_0xcd9870[_0x3049ea(0x9f,0x185,0x17d,0x10d)]=_0x189d44(0x2b6,0x29c,0x360,0x2f4),_0xcd9870[_0x3049ea(0x102,0x42,0x4a,0xba)]='inline-fle'+'x';const _0xd36071=_0xcd9870,_0x23e863=document[_0x189d44(0x2b6,0x25b,0x2ec,0x275)+_0x3049ea(0xfe,0x12c,0x1b1,0x145)](_0x189d44(0x3bc,0x360,0x338,0x346)+_0x3049ea(0x13c,0xe2,0xe5,0xf5)+'r_ref'),_0x27c2cf=document[_0x189d44(0x265,0x2bd,0x2f6,0x2b8)+_0x189d44(0x3ba,0x3b6,0x317,0x355)](_0xd36071[_0x189d44(0x309,0x2f7,0x29d,0x2ff)]),_0x16e7f4=document[_0x189d44(0x216,0x268,0x2a7,0x275)+'ById'](_0xd36071['axcrq']);function _0x189d44(_0x1b5b69,_0x2da4bd,_0x47d50,_0x3b46a4){return _0x1270fc(_0x2da4bd,_0x2da4bd-0x1c,_0x3b46a4- -0x250,_0x3b46a4-0x135);}if(_0xd36071[_0x3049ea(0xe1,0x14c,0x1af,0x148)](!_0x23e863,!_0x27c2cf)||!_0x16e7f4){console[_0x3049ea(0xf3,0x13a,0xe3,0xbe)](_0xd36071[_0x189d44(0x2e2,0x363,0x27d,0x2fb)]);return;}if(_0x4ffd84&&_0x4ffd84[_0x189d44(0x2f3,0x369,0x37d,0x351)](_0xd36071[_0x189d44(0x325,0x3b5,0x2c2,0x334)])){_0x23e863[_0x3049ea(0x90,0x111,0x123,0xf9)]=_0x4ffd84,_0x23e863['style'][_0x3049ea(0x40,0xa3,0xca,0xa0)]=_0x3049ea(0xb3,0x55,0x99,0x92),_0x27c2cf[_0x189d44(0x311,0x2fa,0x24e,0x2ad)][_0x189d44(0x24c,0x29b,0x2b4,0x280)]=_0xd36071[_0x3049ea(0x12d,0x180,0xbe,0x10d)],_0x16e7f4[_0x3049ea(0xb5,0x12c,0x114,0xcd)]['display']=_0xd36071[_0x3049ea(0x8a,0x6d,0xbe,0xba)];const _0x8c8c91=_0x4ffd84[_0x189d44(0x309,0x35b,0x2f0,0x31d)](','),_0x2163fa=_0x8c8c91[0x206b*-0x1+-0x19*0xef+0x37c2][_0x3049ea(0x155,0x12e,0x164,0x13d)](':')[0x1102+0x1505+0x2*-0x1303][_0x3049ea(0x1a0,0x17b,0x153,0x13d)](';')[0x251b*-0x1+0x25*-0x46+-0x9d*-0x4d];nai3CharRefImageMimeType=_0x2163fa,window[_0x3049ea(0x7a,0x89,0x8f,0xd1)+_0x3049ea(0x5e,0x5d,0x10c,0x90)]=_0x8c8c91[-0x1132+0x1*-0xd9+0x120c];const _0x410708={};_0x410708['id']=NAI_CHAR_REF_CACHE_KEY,_0x410708[_0x189d44(0x374,0x2d9,0x2c7,0x33e)]=_0x4ffd84,dbs[_0x3049ea(0xf5,0x1b2,0x185,0x135)+_0x189d44(0x3d4,0x370,0x331,0x357)](_0x410708);}else _0x23e863[_0x189d44(0x279,0x348,0x2ae,0x2d9)]='',_0x23e863[_0x189d44(0x2e6,0x29a,0x2d0,0x2ad)][_0x189d44(0x248,0x204,0x270,0x280)]=_0xd36071[_0x3049ea(0x18b,0xfa,0x104,0x10d)],_0x27c2cf[_0x3049ea(0x113,0xb8,0xbf,0xcd)][_0x3049ea(0x6a,0xb1,0x5f,0xa0)]='flex',_0x16e7f4['style'][_0x189d44(0x21e,0x2bb,0x205,0x280)]='none',window[_0x189d44(0x316,0x238,0x2a6,0x2b1)+_0x189d44(0x248,0x227,0x239,0x270)]=null;}function _0x1af737(_0x57519e,_0x30718b,_0x16b655,_0x19b159){return _0x3380(_0x57519e-0x324,_0x19b159);}function removeNovelaiCharRefImage(){function _0x9c720d(_0xa31cb7,_0x23e3a4,_0x246221,_0x52a4c2){return _0x1af737(_0xa31cb7- -0x24,_0x23e3a4-0x1e5,_0x246221-0x77,_0x52a4c2);}function _0x2ffd01(_0xe03f7b,_0x56a28d,_0x4c66fa,_0x17df3c){return _0x1270fc(_0xe03f7b,_0x56a28d-0xad,_0x4c66fa- -0x406,_0x17df3c-0x1e7);}const _0x383d6c={'PGMuk':function(_0x1f62e7,_0x3fbc9b){return _0x1f62e7(_0x3fbc9b);}};_0x383d6c[_0x9c720d(0x4e3,0x537,0x4a8,0x528)](updateNovelaiCharRefImagePreview,null),dbs[_0x2ffd01(0xee,0xc0,0xdc,0x114)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x3a389e){function _0x226c62(_0x28827b,_0x34cbb9,_0x1b4e62,_0x21caa4){return _0x1af737(_0x28827b- -0x1d1,_0x34cbb9-0x5c,_0x1b4e62-0x153,_0x34cbb9);}const _0x20719d={'MSqwb':function(_0x5da606,_0x3bd8f4){return _0x5da606(_0x3bd8f4);},'TaLly':function(_0x2b9034,_0x1e8b93){return _0x2b9034(_0x1e8b93);},'fgXdj':_0x5eebf2(0x2ca,0x2e0,0x259,0x262)+_0x226c62(0x357,0x34d,0x35d,0x318)+_0x5eebf2(0x35e,0x2b4,0x339,0x2f7)+'ref\x20image:','IlOyc':function(_0x391cd3,_0x4c4421){return _0x391cd3(_0x4c4421);},'IwurL':function(_0x50a916,_0x397e45){return _0x50a916+_0x397e45;},'AkEuR':_0x5eebf2(0x218,0x252,0x1c9,0x235)};function _0x5eebf2(_0x4967e2,_0x6d4251,_0x12cc8b,_0x1d9ca8){return _0x1270fc(_0x4967e2,_0x6d4251-0x6c,_0x1d9ca8- -0x27d,_0x1d9ca8-0xba);}const _0xc60ccb=_0x3a389e[_0x226c62(0x319,0x2ed,0x29c,0x362)][_0x5eebf2(0x32b,0x269,0x273,0x2e2)][0x2ab+-0x4d6+0x5*0x6f];if(!_0xc60ccb)return;try{const _0x1272a1=await _0x20719d[_0x5eebf2(0x30c,0x2a4,0x320,0x2dd)](processUploadedImage,_0xc60ccb);_0x20719d[_0x5eebf2(0x1fb,0x27e,0x2b7,0x247)](updateNovelaiCharRefImagePreview,_0x1272a1);}catch(_0x4de011){console[_0x226c62(0x341,0x2f7,0x39b,0x2c7)](_0x20719d[_0x226c62(0x278,0x20a,0x2ae,0x2d2)],_0x4de011),_0x20719d[_0x226c62(0x33a,0x35a,0x379,0x34b)](alert,_0x20719d['IwurL'](_0x20719d[_0x5eebf2(0x266,0x2f4,0x28f,0x283)],_0x4de011[_0x226c62(0x2ba,0x261,0x2c4,0x2e7)]));}}function updateComfyUIImagePreview(_0x21f90e){const _0xe9b24b={};function _0x45ea16(_0x2cc1fd,_0x14cad8,_0x593660,_0xd55bfd){return _0x1af737(_0x14cad8- -0x49f,_0x14cad8-0x90,_0x593660-0x10f,_0x593660);}_0xe9b24b[_0xe02577(0x423,0x3e0,0x3da,0x44e)]=_0x45ea16(0x77,0x8b,0x87,0x6d)+_0xe02577(0x4dd,0x526,0x52d,0x493),_0xe9b24b['TVqNN']=_0xe02577(0x45b,0x421,0x3fe,0x465)+_0xe02577(0x42f,0x472,0x434,0x3d7)+_0x45ea16(0x7c,0x6e,0x1e,0xee),_0xe9b24b['foVMy']=_0x45ea16(0x54,0x25,0x44,0x3b),_0xe9b24b[_0x45ea16(-0xb,-0x41,-0xc,-0x4c)]=function(_0x5e265d,_0x420129){return _0x5e265d!==_0x420129;},_0xe9b24b[_0x45ea16(-0x4f,0x9,0x84,-0x6a)]=_0xe02577(0x419,0x47c,0x398,0x3e5);function _0xe02577(_0x5ec781,_0x5417ef,_0xf2bfbb,_0x780a88){return _0x1af737(_0x5ec781- -0x3d,_0x5417ef-0x61,_0xf2bfbb-0xef,_0x5417ef);}_0xe9b24b[_0x45ea16(-0x2c,0x41,-0x2f,-0x8)]=_0xe02577(0x49b,0x455,0x421,0x434),_0xe9b24b[_0xe02577(0x438,0x438,0x441,0x4b0)]=_0xe02577(0x425,0x479,0x3e2,0x459)+'x',_0xe9b24b['Zgnbk']=_0xe02577(0x4f5,0x52b,0x4b9,0x517)+'0',_0xe9b24b['DOhEj']=_0x45ea16(0x1e,-0x40,-0x2f,-0x4b);const _0x4dceb6=_0xe9b24b,_0xfbbd82=document[_0x45ea16(-0x5,-0x46,-0x20,-0x32)+_0xe02577(0x4cc,0x4dc,0x4c4,0x51b)](_0x4dceb6['WMIPs']),_0x180cd1=document[_0xe02577(0x45f,0x461,0x4b1,0x3e9)+'tor'](_0xe02577(0x486,0x47b,0x4ce,0x47a)+_0xe02577(0x434,0x462,0x462,0x45d)+'ew-contain'+_0x45ea16(0x4b,0x45,0xbe,-0x1f)+'tu8-image-'+_0xe02577(0x49d,0x466,0x427,0x443)+'r'),_0xa22248=document['getElement'+_0x45ea16(0x5,0x6a,-0x16,0x66)](_0x4dceb6[_0xe02577(0x4fb,0x4a9,0x572,0x49e)]);_0xfbbd82[_0x45ea16(0x58,0x1e,0x63,0x8e)]&&_0xfbbd82[_0x45ea16(0x4a,0x1e,-0x25,-0x4d)]['startsWith'](_0x4dceb6[_0xe02577(0x4e3,0x4db,0x4e5,0x4ac)])&&_0x4dceb6[_0xe02577(0x421,0x3c2,0x408,0x474)](_0xfbbd82[_0x45ea16(-0x4b,0x1e,-0x3d,0x8e)],_0x21f90e)&&URL[_0x45ea16(-0x13,0x8,0x3c,-0x76)+_0x45ea16(-0x1b,-0x36,-0x7f,-0x37)](_0xfbbd82['src']);if(_0x21f90e)_0xfbbd82[_0x45ea16(0x9b,0x1e,0x5b,-0x44)]=_0x21f90e,_0xfbbd82[_0xe02577(0x454,0x404,0x499,0x4ae)][_0x45ea16(-0xba,-0x3b,0x36,-0xb8)]=_0x4dceb6['cIrLt'],_0x180cd1[_0x45ea16(0x50,-0xe,-0x75,0x66)][_0x45ea16(-0xad,-0x3b,0x23,0x6)]=_0x4dceb6[_0xe02577(0x4a3,0x49b,0x4a1,0x4d1)],_0xa22248[_0x45ea16(-0x80,-0xe,-0x78,0x5d)][_0x45ea16(0x2a,-0x3b,-0x1,-0x5c)]=_0x4dceb6[_0x45ea16(-0x34,-0x2a,-0x58,-0x9b)];else{const _0x4bb865=_0x4dceb6[_0xe02577(0x4b0,0x4e3,0x4fe,0x4de)][_0x45ea16(0x7f,0x62,0xa1,0x40)]('|');let _0x44a898=-0x1c7+0x63*-0x35+0x1646;while(!![]){switch(_0x4bb865[_0x44a898++]){case'0':comfyuiImageObjectURL=null;continue;case'1':_0xfbbd82[_0xe02577(0x454,0x45e,0x421,0x3f9)][_0xe02577(0x427,0x3ff,0x3d4,0x44a)]=_0xe02577(0x49b,0x470,0x4c3,0x47a);continue;case'2':_0xfbbd82[_0xe02577(0x480,0x416,0x4ce,0x463)]='';continue;case'3':window['comfyuican'+_0xe02577(0x48b,0x47e,0x496,0x48f)]=null;continue;case'4':_0x180cd1[_0xe02577(0x454,0x3d6,0x4a3,0x428)][_0x45ea16(-0x6c,-0x3b,-0x3d,-0x95)]=_0x4dceb6[_0xe02577(0x4f2,0x4c3,0x4e8,0x487)];continue;case'5':_0xa22248[_0xe02577(0x454,0x461,0x4a4,0x4b9)][_0x45ea16(-0x5a,-0x3b,-0xb2,-0x28)]=_0xe02577(0x49b,0x464,0x510,0x4d1);continue;}break;}}}function removeComfyUIImage(){function _0x5ec9a5(_0x17b658,_0x550f32,_0x37fa6a,_0x51968c){return _0x1270fc(_0x550f32,_0x550f32-0x66,_0x51968c- -0x678,_0x51968c-0x5b);}const _0x2640f5={'sTSmo':function(_0x36e977,_0x59fbef){return _0x36e977(_0x59fbef);}};_0x2640f5[_0x5ec9a5(-0x1f2,-0x161,-0x218,-0x1bd)](updateComfyUIImagePreview,null);function _0x123b4c(_0x3174ab,_0x3b93bc,_0x1f2685,_0x36173a){return _0x1af737(_0x1f2685-0x73,_0x3b93bc-0x12f,_0x1f2685-0x1cf,_0x3b93bc);}dbs[_0x5ec9a5(-0x1d7,-0x18e,-0x1b9,-0x196)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x2d782e){const _0x29beff={'WVpcl':_0x367cac(-0x153,-0x1d4,-0x230,-0x176)+_0x36797a(-0xdc,-0x74,-0xf,-0xeb),'fiiST':_0x36797a(-0x111,-0xcb,-0xc0,-0x6b)+_0x36797a(-0xeb,-0x11d,-0x196,-0xb2)+_0x367cac(-0x1b3,-0x1f9,-0x26e,-0x1a4)+_0x367cac(-0x248,-0x21a,-0x1dd,-0x1b8)+_0x367cac(-0x28e,-0x260,-0x23b,-0x1f8)+_0x36797a(-0x5a,-0xb4,-0x98,-0x52)+'r','WOoKu':function(_0x22ac3e,_0x41b236){return _0x22ac3e!==_0x41b236;},'ysSjY':_0x36797a(-0x101,-0x138,-0x100,-0x15e),'lsmMd':_0x36797a(-0x11f,-0xb6,-0x104,-0xbb),'gcowg':_0x36797a(-0x150,-0x12f,-0x1a2,-0x14a),'MIlrA':function(_0x1ad341,_0x49705d){return _0x1ad341===_0x49705d;},'xsjsq':'oaoDt','akKFk':function(_0xe9c5bc,_0x2fc6e9){return _0xe9c5bc(_0x2fc6e9);},'lIYSm':_0x36797a(-0x192,-0x11f,-0xce,-0x155),'qvUuP':function(_0x371308,_0x91102b){return _0x371308(_0x91102b);},'hnQzU':'请先设置ComfyU'+_0x367cac(-0x29e,-0x2b3,-0x2b5,-0x32e),'fbpqD':function(_0x529f79){return _0x529f79();},'dacSF':_0x367cac(-0x190,-0x1bd,-0x164,-0x20e),'glQXo':_0x367cac(-0x1b2,-0x1e7,-0x237,-0x1eb)+'回数据:','Ianwh':function(_0x26508e,_0x2aeba9){return _0x26508e(_0x2aeba9);},'gpyEM':'错误详情:','gUTcx':function(_0x5039cc){return _0x5039cc();},'AHhfZ':_0x36797a(-0xc4,-0xda,-0xbe,-0xc5)+':\x20','tKkYS':function(_0x420880,_0x3d3fb4){return _0x420880(_0x3d3fb4);}},_0xa189e=extension_settings[extensionName];function _0x36797a(_0x5be04a,_0x3181a9,_0x10f807,_0x483af0){return _0x1270fc(_0x483af0,_0x3181a9-0x69,_0x3181a9- -0x5fa,_0x483af0-0x2c);}const _0x387f0a=_0x2d782e['target'][_0x367cac(-0x237,-0x20b,-0x1e4,-0x227)][0x2c9*0xb+-0x11*-0xd+-0x3f0*0x8];if(!_0x387f0a)return;function _0x367cac(_0x2dea86,_0x14f43a,_0x353861,_0x3ec330){return _0x1af737(_0x14f43a- -0x6fe,_0x14f43a-0xf1,_0x353861-0x119,_0x353861);}try{const _0x51a55f=await _0x29beff[_0x36797a(-0xcd,-0x100,-0xb9,-0x124)](processUploadedImageToBlob,_0x387f0a),_0xe24d31=URL[_0x367cac(-0x1a6,-0x212,-0x28c,-0x1db)+_0x36797a(-0xe6,-0x125,-0x196,-0xfa)](_0x51a55f);comfyuiImageObjectURL=_0xe24d31,_0x29beff['akKFk'](updateComfyUIImagePreview,_0xe24d31);const _0x3cdb64=new FormData();_0x3cdb64['append'](_0x29beff[_0x36797a(-0x124,-0x126,-0x11a,-0x1a1)],_0x51a55f,_0x387f0a['name']);let _0x1bd604=_0xa189e[_0x36797a(-0xe9,-0x9a,-0x8b,-0x37)][_0x36797a(-0xee,-0x147,-0x15e,-0x1ab)]();if(!_0x1bd604){_0x29beff[_0x36797a(-0xc3,-0xd3,-0x11b,-0xdb)](alert,_0x29beff[_0x36797a(-0x3f,-0xa5,-0x10f,-0x38)]),_0x29beff[_0x36797a(-0x1b,-0x92,-0xf7,-0xf9)](removeComfyUIImage);return;}const _0x492ef0={};_0x492ef0[_0x367cac(-0x282,-0x253,-0x2ad,-0x1f8)]=_0x29beff[_0x36797a(-0x137,-0xd4,-0xdf,-0x111)],_0x492ef0[_0x36797a(-0xe7,-0x14a,-0x165,-0x13b)]=_0x3cdb64;const _0x5abc8c=await fetch(_0x1bd604+('/upload/im'+_0x36797a(-0xd8,-0xa6,-0xef,-0xe6)),_0x492ef0);if(_0x5abc8c['ok']){const _0x225094=await _0x5abc8c['json']();window[_0x367cac(-0x22b,-0x201,-0x1a1,-0x18e)+_0x367cac(-0x211,-0x236,-0x1c1,-0x290)]=_0x225094[_0x367cac(-0x1f8,-0x238,-0x261,-0x1cf)],addLog(_0x367cac(-0x27d,-0x29d,-0x2b3,-0x252)+_0x36797a(-0x4a,-0x97,-0x9e,-0xbe)+JSON[_0x367cac(-0x216,-0x1fa,-0x17e,-0x17e)](_0x225094)),console[_0x367cac(-0x255,-0x27c,-0x23f,-0x29b)](_0x29beff[_0x36797a(-0x10a,-0xf5,-0x171,-0x13e)],_0x225094);const _0x81ea39=new FileReader();_0x81ea39[_0x367cac(-0x26a,-0x27f,-0x20c,-0x2fa)]=()=>{function _0x5535ae(_0x2fe79d,_0x1fb3e9,_0x508fda,_0x5ac197){return _0x367cac(_0x2fe79d-0xdf,_0x1fb3e9-0x62f,_0x508fda,_0x5ac197-0x10b);}function _0x3d900d(_0x3b3b15,_0x41d49e,_0xfb3d53,_0x483d5a){return _0x367cac(_0x3b3b15-0x129,_0x3b3b15-0x24c,_0xfb3d53,_0x483d5a-0x1ec);}if(_0x29beff[_0x3d900d(-0x35,-0x13,-0x9b,-0x17)](_0x29beff['xsjsq'],_0x3d900d(0x1c,0x59,0x98,0x5d))){const _0x4270fb=_0x35641[_0x3d900d(-0x59,-0x99,0x28,-0x2c)+_0x3d900d(0x57,-0x17,0x76,0xd)](_0x29beff['WVpcl']),_0x3aa4a1=_0x5a4101[_0x5535ae(0x372,0x3cd,0x3e9,0x39f)+_0x5535ae(0x42d,0x46a,0x428,0x455)](_0x29beff[_0x5535ae(0x48c,0x421,0x3ac,0x440)]),_0x241055=_0xf88313[_0x5535ae(0x3c9,0x38a,0x3d0,0x3d5)+_0x5535ae(0x421,0x43a,0x41f,0x46b)](_0x3d900d(-0x1a,-0x7b,0x34,-0x27)+'move-image'+_0x3d900d(0x5b,0x3b,-0x23,0x98));_0x4270fb['src']&&_0x4270fb[_0x3d900d(0xb,-0x11,0x7a,0x15)][_0x5535ae(0x442,0x466,0x430,0x45c)]('blob:')&&_0x29beff[_0x5535ae(0x472,0x431,0x4a4,0x498)](_0x4270fb[_0x3d900d(0xb,0x78,0x1,0x5c)],_0x5ec162)&&_0x8ce6f9['revokeObje'+_0x5535ae(0x350,0x39a,0x33a,0x352)](_0x4270fb['src']);if(_0x197df7)_0x4270fb[_0x3d900d(0xb,-0x6a,0x4c,-0x6)]=_0x3ad1e9,_0x4270fb['style'][_0x3d900d(-0x4e,0x2c,-0x4d,0x12)]=_0x29beff[_0x3d900d(0x8c,0x5f,0x5e,0x72)],_0x3aa4a1['style'][_0x3d900d(-0x4e,0x18,-0x5c,0x16)]=_0x29beff[_0x5535ae(0x41a,0x3e1,0x454,0x380)],_0x241055[_0x3d900d(-0x21,-0x7,0x6,-0x5d)][_0x3d900d(-0x4e,-0xb3,-0x1c,-0x6d)]=_0x5535ae(0x31a,0x393,0x35f,0x356)+'x';else{const _0x414f11=(_0x3d900d(0x4d,0x27,-0x26,0xb)+'0')[_0x5535ae(0x4a2,0x432,0x46b,0x4a0)]('|');let _0x2b82eb=-0x13cf+-0x1d33+-0x2b9*-0x12;while(!![]){switch(_0x414f11[_0x2b82eb++]){case'0':_0x163f1c=null;continue;case'1':_0x3aa4a1[_0x3d900d(-0x21,-0x5b,0x2c,0x5e)][_0x5535ae(0x32a,0x395,0x34f,0x3bf)]=_0x29beff[_0x3d900d(-0xf,-0x41,-0x50,-0xc)];continue;case'2':_0x241055[_0x3d900d(-0x21,-0x15,-0x26,-0x3e)][_0x3d900d(-0x4e,0x30,0x5,-0x11)]='none';continue;case'3':_0x4270fb[_0x3d900d(-0x21,0xd,-0x43,-0x1c)][_0x5535ae(0x3d0,0x395,0x3dd,0x39d)]=_0x29beff[_0x5535ae(0x3f0,0x3e1,0x45a,0x447)];continue;case'4':_0x4270fb['src']='';continue;case'5':_0x2d49ce[_0x3d900d(0x4b,0x42,0x7f,-0x1e)+_0x5535ae(0x411,0x3f9,0x45a,0x428)]=null;continue;}break;}}}else{const _0x53bc01=_0x81ea39[_0x3d900d(0x63,0xca,0x3d,-0x10)],_0x468cb9={};_0x468cb9[_0x5535ae(0x44f,0x453,0x4ae,0x4a3)]=_0x53bc01,_0x468cb9[_0x3d900d(-0x68,-0xbd,-0x1c,0x9)+_0x5535ae(0x463,0x41c,0x3f2,0x3a6)]=_0x225094['name'];const _0x106fa3=_0x468cb9,_0x5bf0cf={};_0x5bf0cf['id']=COMFYUI_REF_CACHE_KEY,_0x5bf0cf[_0x5535ae(0x4ca,0x453,0x4c8,0x48b)]=_0x106fa3,dbs[_0x3d900d(0x47,-0x26,-0x22,0xa7)+_0x3d900d(0x89,0x59,0x10,0x3f)](_0x5bf0cf);}},_0x81ea39[_0x36797a(-0xc9,-0x114,-0xce,-0x120)+'URL'](_0x51a55f);}else{const _0x48af21=await _0x5abc8c[_0x367cac(-0x28d,-0x27d,-0x288,-0x21a)]();_0x29beff[_0x36797a(-0xca,-0xea,-0xeb,-0x103)](alert,_0x367cac(-0x235,-0x1d7,-0x1d3,-0x1af)+_0x48af21),_0x29beff['akKFk'](addLog,_0x367cac(-0x198,-0x208,-0x238,-0x187)+_0x36797a(-0x2d,-0x5b,-0xc8,0x9)+_0x48af21),console[_0x36797a(-0x34,-0x7c,-0xd9,-0xc8)](_0x29beff['gpyEM'],_0x48af21),_0x29beff[_0x367cac(-0x2a2,-0x247,-0x1ed,-0x249)](removeComfyUIImage);}}catch(_0x39bf65){alert(_0x29beff[_0x367cac(-0x23e,-0x275,-0x2de,-0x1f8)]+_0x39bf65[_0x367cac(-0x2e9,-0x273,-0x260,-0x216)]),console[_0x367cac(-0x181,-0x1ec,-0x1f0,-0x224)](_0x36797a(-0xd4,-0xda,-0x7c,-0xf0)+':',_0x39bf65),_0x29beff[_0x367cac(-0x288,-0x20d,-0x202,-0x22c)](addLog,_0x367cac(-0x284,-0x208,-0x264,-0x1f9)+'详情:\x20'+JSON[_0x36797a(-0xea,-0x8a,-0xea,-0x5d)](_0x39bf65)),_0x29beff[_0x36797a(-0x9f,-0xd7,-0x7e,-0x95)](removeComfyUIImage);}}async function loadCachedImages(){const _0x3ae875={'rHkSl':_0x14c407(-0x1a6,-0x135,-0x167,-0x109),'GBYlY':'inline-fle'+'x','KYRxE':function(_0x4fd0b9,_0x1a0955){return _0x4fd0b9(_0x1a0955);},'gGQIc':function(_0x1c30eb,_0x4a2bdb){return _0x1c30eb===_0x4a2bdb;},'bzKvF':_0x5f173b(0x44,0x7c,0x1a,0x61),'tjbtX':_0x14c407(-0x13d,-0x10e,-0x138,-0x155)+_0x14c407(-0x161,-0x122,-0x113,-0x10f)+_0x14c407(-0x5c,-0x75,-0x8f,-0xf5)+_0x14c407(-0x173,-0x17d,-0x162,-0xee),'qjUri':function(_0xecf74a,_0x46263b){return _0xecf74a(_0x46263b);},'cgzlD':_0x14c407(-0xf1,-0x7d,-0xe2,-0xf6),'zHbty':function(_0x5b2644,_0x584273){return _0x5b2644(_0x584273);}};function _0x14c407(_0x48a235,_0xdde478,_0x36075f,_0xd4a7ee){return _0x1270fc(_0xd4a7ee,_0xdde478-0x1c3,_0x36075f- -0x629,_0xd4a7ee-0xc3);}await dbs[_0x14c407(-0x12f,-0x1df,-0x170,-0x10b)]();function _0x5f173b(_0x3a7b26,_0x56fcdf,_0x373c9e,_0x265162){return _0x1270fc(_0x56fcdf,_0x56fcdf-0x12c,_0x373c9e- -0x500,_0x265162-0x122);}try{const _0x34243e=await dbs[_0x5f173b(0x1,0x52,-0x2e,0x48)+_0x5f173b(-0x4a,0x24,-0x1,0x36)](NAI_VIBE_CACHE_KEY);_0x34243e&&_0x34243e[_0x14c407(-0xc7,-0x6b,-0x9b,-0x75)]&&_0x3ae875[_0x14c407(-0x1e3,-0x18c,-0x171,-0x196)](updateNovelaiImagePreview,_0x34243e[_0x14c407(-0xd5,-0xcc,-0x9b,-0x8e)]);}catch(_0x2ce0f4){_0x3ae875[_0x5f173b(0x4e,0x6e,0x1d,0x1b)](_0x3ae875[_0x14c407(-0xcd,-0x16c,-0x120,-0xd2)],_0x3ae875[_0x14c407(-0xa9,-0xec,-0x120,-0x117)])?console[_0x14c407(-0x9a,-0x34,-0xab,-0xd0)](_0x3ae875[_0x14c407(-0xc1,-0x100,-0xe1,-0x12e)],_0x2ce0f4):(_0x2fa335[_0x14c407(-0xea,-0xb4,-0x100,-0x172)]=_0x35d4f2,_0x179e70[_0x14c407(-0x12a,-0x18f,-0x12c,-0x19e)]['display']=_0x3ae875[_0x14c407(-0x6f,-0xea,-0x94,-0x2b)],_0xce2baa['style'][_0x14c407(-0x1d5,-0x1a3,-0x159,-0x110)]=_0x14c407(-0xed,-0x15c,-0xe5,-0xe9),_0x3798c0[_0x5f173b(-0x69,0x3d,-0x3,0x2e)][_0x14c407(-0x156,-0x133,-0x159,-0xdf)]=_0x3ae875[_0x14c407(-0x124,-0xe7,-0xea,-0xa9)]);}try{const _0x58a021=await dbs[_0x5f173b(-0x5a,-0x1b,-0x2e,-0x5d)+_0x14c407(-0xb1,-0x13a,-0x12a,-0xc7)](NAI_CHAR_REF_CACHE_KEY);_0x58a021&&_0x58a021[_0x14c407(-0x7a,-0x10f,-0x9b,-0x82)]&&_0x3ae875[_0x5f173b(-0xae,-0x2f,-0x48,-0x17)](updateNovelaiCharRefImagePreview,_0x58a021['data']);}catch(_0x532ae6){console[_0x14c407(-0x91,-0x87,-0xab,-0x35)](_0x14c407(-0x141,-0x140,-0x138,-0xf3)+_0x5f173b(-0xa,0x5e,0x16,-0x8)+_0x5f173b(0x5d,0x6,0x6e,0xef)+'har\x20Ref\x20im'+_0x5f173b(0xef,0x91,0x98,0x90),_0x532ae6);}try{const _0x512e63=await dbs[_0x5f173b(-0x77,-0x4b,-0x2e,-0x37)+_0x5f173b(0x1e,0x36,-0x1,-0x7c)](COMFYUI_REF_CACHE_KEY);if(_0x512e63&&_0x512e63[_0x5f173b(0x18,0x6a,0x8e,0x80)]&&_0x512e63[_0x14c407(-0xe3,-0x9f,-0x9b,-0x45)][_0x5f173b(0x103,0x6b,0x8e,0xd4)]&&_0x512e63[_0x5f173b(0xae,0x44,0x8e,0x102)]['serverFile'+_0x14c407(-0x13c,-0xf4,-0xd2,-0x11b)]){const _0x1eb2d1=_0x512e63[_0x5f173b(0xbe,0x53,0x8e,0x27)],_0x5eca56=await fetch(_0x1eb2d1[_0x14c407(-0x94,-0x83,-0x9b,-0xb8)]),_0x37164b=await _0x5eca56['blob'](),_0xcef02c=URL[_0x14c407(-0x56,-0xac,-0xd1,-0x10c)+_0x5f173b(0x36,-0xa,-0x2b,0x50)](_0x37164b);updateComfyUIImagePreview(_0xcef02c),comfyuiImageObjectURL=_0xcef02c,window[_0x5f173b(0x69,0x54,0x69,0xb2)+_0x14c407(-0xdf,-0x10d,-0xf5,-0xbe)]=_0x1eb2d1[_0x14c407(-0x15e,-0x166,-0x173,-0x16c)+_0x5f173b(0xd0,-0x21,0x57,-0x8)],_0x3ae875[_0x14c407(-0xfa,-0x196,-0x12d,-0x11d)](addLog,'从缓存加载Comfy'+_0x14c407(-0x12d,-0x100,-0x122,-0x195)+_0x1eb2d1['serverFile'+_0x5f173b(0xae,0x1c,0x57,0x30)]),console[_0x5f173b(-0x36,0x27,-0x12,0x6a)](_0x14c407(-0x15a,-0x1d7,-0x168,-0x150)+'fyUI\x20image'+_0x14c407(-0x124,-0x108,-0xbf,-0xa3)+_0x14c407(-0x1aa,-0x133,-0x142,-0xdb)+_0x1eb2d1['serverFile'+'Name']);}else{if(_0x512e63&&typeof _0x512e63['data']===_0x3ae875['cgzlD']){const _0x190ac5=await _0x3ae875[_0x5f173b(-0x6b,0x81,0x6,-0x4b)](fetch,_0x512e63[_0x5f173b(0xff,0x3c,0x8e,0x4a)]),_0x42ed36=await _0x190ac5[_0x14c407(-0xe5,-0x16f,-0x110,-0xca)](),_0xc28a08=URL[_0x14c407(-0x61,-0xfc,-0xd1,-0x12b)+_0x14c407(-0x16d,-0xe9,-0x154,-0x17a)](_0x42ed36);updateComfyUIImagePreview(_0xc28a08),comfyuiImageObjectURL=_0xc28a08,console['warn'](_0x5f173b(-0x4e,-0x3e,-0x3f,-0x15)+'fyUI\x20image'+_0x14c407(-0x6f,-0x2d,-0xa0,-0x120)+_0x5f173b(0x1f,0x48,-0x2d,0x2b)+_0x5f173b(0x83,0x76,0x15,0x39)+_0x14c407(-0x67,-0x69,-0xaa,-0x8f)+_0x14c407(-0x52,-0xbd,-0xc3,-0xa7)+_0x14c407(-0x145,-0x8c,-0x10b,-0xa1)+_0x14c407(-0x70,-0x3e,-0x97,-0x22)+_0x5f173b(-0x7c,0x35,0x3,0x3));}}}catch(_0x4a6c50){console[_0x14c407(-0x66,-0x122,-0xab,-0x5a)](_0x5f173b(-0x8c,0x33,-0xf,0x61)+'ing\x20cached'+'\x20ComfyUI\x20i'+_0x5f173b(0x57,0x44,0xae,0x3f),_0x4a6c50);}}export function initImageUpload(_0x25e90a){const _0x2069d7={'pdQFh':function(_0x5ec951,_0x24561f){return _0x5ec951(_0x24561f);},'YjPuq':_0x1c1f30(0x36b,0x36f,0x3ea,0x389)+_0x1c1f30(0x366,0x373,0x379,0x341),'DsbEU':function(_0x44e2d5,_0x453c55){return _0x44e2d5!==_0x453c55;},'AUKAs':_0x1aca38(-0x218,-0x20d,-0x1ef,-0x24a),'LMooC':function(_0x246f14){return _0x246f14();},'JtOzz':_0x1aca38(-0x20a,-0x12e,-0x19c,-0x198)+'_novelai','LTRHz':function(_0x5a2d64,_0x16f598){return _0x5a2d64===_0x16f598;},'ydhVA':_0x1c1f30(0x3f8,0x403,0x3ef,0x3ea),'czbzM':'uwIEY','MuLZw':'imageInput'+'_nai_char_'+_0x1aca38(-0x170,-0x194,-0x184,-0x1c1),'dVQgs':_0x1aca38(-0x2be,-0x2c9,-0x2e3,-0x267),'aVWGl':'LchaP','NXJHo':function(_0x3ca419){return _0x3ca419();},'jeKID':_0x1aca38(-0x206,-0x226,-0x1f3,-0x221),'zYEeK':_0x1c1f30(0x37a,0x337,0x38a,0x405)+_0x1c1f30(0x351,0x351,0x3c4,0x3ad)+_0x1c1f30(0x441,0x418,0x423,0x40a)+_0x1aca38(-0x211,-0x1b6,-0x226,-0x1df)+_0x1c1f30(0x38e,0x36b,0x37c,0x360)+'found\x20-\x20us'+_0x1c1f30(0x3f1,0x4c3,0x468,0x4c8)+'stem','sxVjV':_0x1aca38(-0x23d,-0x212,-0x269,-0x27a),'IgkVO':_0x1c1f30(0x395,0x3a1,0x414,0x45f)+_0x1c1f30(0x407,0x3a1,0x39b,0x395)+_0x1aca38(-0x20c,-0x235,-0x2a4,-0x27d),'UAnum':'click','oxljx':'#imageInpu'+_0x1aca38(-0x23b,-0x17a,-0x1a1,-0x1e5),'AitfX':'change','hqZQg':'#novelai-s'+_0x1aca38(-0x269,-0x2bc,-0x2a1,-0x274)+_0x1c1f30(0x45f,0x417,0x45f,0x4ac)+_0x1aca38(-0x189,-0x151,-0x1de,-0x1ca),'cLhdk':'#novelai-r'+_0x1c1f30(0x343,0x3c4,0x393,0x3d6)+_0x1aca38(-0x16c,-0x1a5,-0x133,-0x1a6)+_0x1c1f30(0x478,0x41b,0x43b,0x406)};loadCachedImages(),_0x25e90a[_0x1c1f30(0x377,0x365,0x3cf,0x3e3)](_0x2069d7[_0x1aca38(-0x286,-0x292,-0x1eb,-0x228)])['on'](_0x2069d7[_0x1aca38(-0x1fd,-0x18f,-0x1ae,-0x1fe)],()=>{function _0x335ad0(_0x151907,_0x2a7c37,_0x441555,_0x4fd16d){return _0x1aca38(_0x151907-0x15e,_0x2a7c37-0x148,_0x2a7c37,_0x4fd16d-0x581);}const _0x2a2500={'cMGCK':function(_0x1b999b,_0x3c7ec4){function _0x519279(_0x2cdab2,_0x58c3a6,_0x353399,_0x5cce21){return _0x3380(_0x58c3a6-0x22f,_0x353399);}return _0x2069d7[_0x519279(0x36c,0x3dd,0x374,0x44a)](_0x1b999b,_0x3c7ec4);},'AhIOv':_0x2069d7[_0x335ad0(0x3aa,0x41c,0x35f,0x3d5)],'UhoWf':function(_0x592764){return _0x592764();}};function _0x847b3c(_0x391ae4,_0x212b9f,_0x2f5a95,_0x4fad00){return _0x1aca38(_0x391ae4-0x9d,_0x212b9f-0x142,_0x212b9f,_0x2f5a95-0x325);}if(_0x2069d7['DsbEU'](_0x2069d7[_0x847b3c(0x107,0x170,0x124,0xa6)],_0x2069d7[_0x847b3c(0x153,0x134,0x124,0x191)])){_0x2a2500[_0x335ad0(0x36f,0x355,0x331,0x356)](_0x3f9cd4,_0x2a2500[_0x335ad0(0x426,0x3ec,0x3df,0x3c8)]),_0x2a2500[_0x847b3c(0x75,0xbc,0x9f,0xa2)](_0x13689a);return;}else document['getElement'+_0x335ad0(0x3dd,0x408,0x420,0x3b3)](_0x847b3c(0x1b4,0x1e9,0x18d,0x182)+_0x847b3c(0x123,0xa9,0xc5,0x125))[_0x335ad0(0x3c5,0x39d,0x357,0x3cf)]();}),_0x25e90a[_0x1c1f30(0x414,0x361,0x3cf,0x3ca)](_0x2069d7[_0x1aca38(-0x210,-0x16a,-0x1cb,-0x1b3)])['on'](_0x2069d7[_0x1aca38(-0x165,-0x17a,-0x17e,-0x1c3)],handleNovelaiImageUpload);function _0x1aca38(_0x30396c,_0x465e04,_0x402ef9,_0x28a0d9){return _0x1270fc(_0x402ef9,_0x465e04-0x16c,_0x28a0d9- -0x743,_0x28a0d9-0x24);}_0x25e90a[_0x1aca38(-0x208,-0x1df,-0x26f,-0x236)](_0x1c1f30(0x44c,0x452,0x429,0x3dd)+_0x1c1f30(0x4d2,0x4e1,0x46b,0x440)+'e-btn')['on'](_0x2069d7['UAnum'],()=>{_0x2069d7['LMooC'](removeNovelaiImage);}),_0x25e90a[_0x1c1f30(0x404,0x40d,0x3cf,0x3a2)](_0x2069d7[_0x1c1f30(0x466,0x49d,0x465,0x411)])['on'](_0x2069d7[_0x1aca38(-0x21e,-0x20f,-0x1f4,-0x1fe)],()=>{function _0x280040(_0x527b01,_0x38c242,_0x125aca,_0x5b8017){return _0x1c1f30(_0x527b01,_0x38c242-0xc0,_0x5b8017- -0x4e4,_0x5b8017-0x127);}function _0x2d69b8(_0x1bb663,_0x4c5b80,_0x190a1c,_0xf6fb4b){return _0x1c1f30(_0x4c5b80,_0x4c5b80-0xc2,_0x1bb663- -0x358,_0xf6fb4b-0x3b);}_0x2069d7[_0x2d69b8(0x98,0x110,0xd4,0x10c)](_0x2069d7[_0x2d69b8(0x10c,0x189,0xd2,0xa7)],_0x2069d7[_0x280040(-0xde,-0xf1,-0x16a,-0x124)])?_0x2967db[_0x280040(-0x199,-0x1da,-0x18c,-0x15d)+_0x2d69b8(0xdf,0x104,0x6f,0xf1)](_0x2069d7[_0x2d69b8(0xb7,0x37,0x39,0x125)])[_0x280040(-0xa2,-0x78,-0xdc,-0x91)]():document[_0x2d69b8(0x2f,-0x15,0x9e,0xa0)+_0x2d69b8(0xdf,0x15d,0x60,0xac)](_0x2069d7['MuLZw'])[_0x280040(-0xf3,-0xe4,-0xc3,-0x91)]();});function _0x1c1f30(_0x38dd4c,_0x1dd8d7,_0x3717c4,_0x324e1a){return _0x1270fc(_0x38dd4c,_0x1dd8d7-0x1e0,_0x3717c4- -0x13e,_0x324e1a-0x78);}_0x25e90a[_0x1c1f30(0x38d,0x368,0x3cf,0x3e8)](_0x1c1f30(0x3bd,0x438,0x3f5,0x387)+_0x1aca38(-0x1b6,-0x1c4,-0x201,-0x1bc)+_0x1c1f30(0x402,0x3c1,0x402,0x438))['on']('change',handleNovelaiCharRefImageUpload),_0x25e90a[_0x1aca38(-0x238,-0x244,-0x264,-0x236)](_0x2069d7['cLhdk'])['on'](_0x2069d7[_0x1c1f30(0x3b0,0x3ab,0x407,0x45d)],()=>{function _0x5de145(_0x5602f8,_0x571b6c,_0xbdf33,_0x2d3af5){return _0x1aca38(_0x5602f8-0x137,_0x571b6c-0x25,_0xbdf33,_0x2d3af5-0x2c2);}function _0x4fe6ad(_0x4d5c78,_0x2622aa,_0x1fa7d7,_0x4fdb51){return _0x1aca38(_0x4d5c78-0xc6,_0x2622aa-0x114,_0x2622aa,_0x4fdb51-0x549);}if(_0x2069d7[_0x5de145(0xa1,0xe6,0x5e,0xad)](_0x2069d7[_0x5de145(0x10a,0x1a4,0xb5,0x127)],_0x2069d7[_0x5de145(0x11d,0xf3,0x170,0x12b)])){if(_0x3cecd8){const _0x314231=_0x26bb0e['apply'](_0xd8fc69,arguments);return _0x1a9c40=null,_0x314231;}}else _0x2069d7[_0x4fe6ad(0x2ac,0x294,0x313,0x2fc)](removeNovelaiCharRefImage);}),_0x25e90a['find']('#comfyui-s'+_0x1aca38(-0x265,-0x20a,-0x219,-0x26a)+_0x1aca38(-0x243,-0x2dd,-0x299,-0x27d))['on'](_0x2069d7[_0x1aca38(-0x257,-0x23f,-0x19a,-0x1fe)],()=>{function _0x2b3000(_0x375f74,_0x571845,_0x7c908b,_0x4b9965){return _0x1c1f30(_0x375f74,_0x571845-0x10d,_0x4b9965- -0x550,_0x4b9965-0x1b);}const _0x16e71b={'faQgJ':function(_0x22ebc6){function _0x2d95d9(_0x115073,_0x2c0eda,_0x18ca75,_0x1b2567){return _0x3380(_0x115073- -0x34e,_0x2c0eda);}return _0x2069d7[_0x2d95d9(-0x195,-0x1ee,-0x1dc,-0x16c)](_0x22ebc6);}};function _0x2cc87d(_0x2e6a4d,_0x1cdda5,_0x7972ea,_0x582af5){return _0x1aca38(_0x2e6a4d-0x4,_0x1cdda5-0x12c,_0x582af5,_0x1cdda5-0x15b);}_0x2069d7[_0x2cc87d(-0x7a,-0xba,-0x69,-0x53)](_0x2069d7['jeKID'],_0x2069d7[_0x2b3000(-0x1b2,-0x107,-0x179,-0x16f)])?document[_0x2cc87d(-0x17b,-0x123,-0x16b,-0x113)+_0x2cc87d(-0xc8,-0x73,-0xca,0x0)](_0x2b3000(-0x12f,-0x71,-0x130,-0xe3)+'2')[_0x2b3000(-0x157,-0x149,-0x9b,-0xfd)]():_0x16e71b[_0x2cc87d(-0x11e,-0x125,-0xc5,-0x11a)](_0xb12f78);}),_0x25e90a[_0x1c1f30(0x450,0x38c,0x3cf,0x3fd)](_0x1c1f30(0x42b,0x3d8,0x3f5,0x3a4)+'t2')['on'](_0x2069d7['AitfX'],handleImageUpload2),_0x25e90a[_0x1c1f30(0x421,0x36a,0x3cf,0x355)](_0x1c1f30(0x3a5,0x43f,0x3d3,0x413)+_0x1aca38(-0x1b2,-0x11d,-0x164,-0x19a)+_0x1aca38(-0x282,-0x2af,-0x2cd,-0x27d))['on'](_0x2069d7[_0x1aca38(-0x1fa,-0x1a8,-0x25d,-0x1fe)],()=>{function _0x277fc4(_0x499e09,_0x587d1f,_0x5ec630,_0x161d83){return _0x1c1f30(_0x5ec630,_0x587d1f-0x7f,_0x587d1f- -0x41b,_0x161d83-0x11f);}function _0x34ff25(_0xa3c437,_0x4138ea,_0x495d5b,_0x412d2e){return _0x1c1f30(_0x4138ea,_0x4138ea-0xe9,_0xa3c437- -0x20e,_0x412d2e-0x173);}if(_0x2069d7['DsbEU'](_0x2069d7[_0x277fc4(-0x71,-0x1e,-0x78,0xc)],_0x2069d7[_0x34ff25(0x1ef,0x19f,0x245,0x217)])){_0x444073[_0x277fc4(-0x77,-0x6b,-0x3f,-0x47)](_0x2069d7[_0x277fc4(-0x1a,-0x71,-0x27,-0x2d)]);return;}else removeComfyUIImage();});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};