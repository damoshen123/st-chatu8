(function(_0x22df91,_0x423a89){function _0x366014(_0xdbec1a,_0xa8f39f,_0x4e3589,_0x4fc331){return _0x2a45(_0xdbec1a- -0x373,_0xa8f39f);}const _0x4661c7=_0x22df91();function _0x1120a3(_0x204a1c,_0x2c9ce1,_0x30b87c,_0x1b55f7){return _0x2a45(_0x2c9ce1- -0x324,_0x204a1c);}while(!![]){try{const _0x3461b9=-parseInt(_0x366014(-0x27f,-0x2d9,-0x27d,-0x25a))/(-0x1700+0x70e+0xff3)*(-parseInt(_0x1120a3(-0x1f4,-0x201,-0x1e8,-0x1b9))/(-0x260d+0x1075+0xe*0x18b))+parseInt(_0x1120a3(-0x1f9,-0x240,-0x254,-0x23f))/(0x1fb9*-0x1+-0x1ba0+-0xed7*-0x4)*(-parseInt(_0x1120a3(-0x222,-0x22d,-0x232,-0x22d))/(0x7a9+-0x233d+-0x373*-0x8))+-parseInt(_0x366014(-0x233,-0x275,-0x1e3,-0x230))/(-0x3fd*-0x1+-0x18bd*0x1+0x199*0xd)*(-parseInt(_0x1120a3(-0x1dd,-0x1dd,-0x18e,-0x1b4))/(-0x1895+-0x1*-0x1931+-0x2*0x4b))+-parseInt(_0x366014(-0x20f,-0x258,-0x253,-0x24f))/(0x16*-0xf3+0x10a2*0x2+-0xc5b)+parseInt(_0x1120a3(-0x269,-0x232,-0x239,-0x1e6))/(-0x20ca*-0x1+-0xabb+-0x1607)+parseInt(_0x1120a3(-0x192,-0x1a1,-0x181,-0x1f1))/(0xc8e+-0x1bd*0x14+0x163f)+-parseInt(_0x366014(-0x28e,-0x293,-0x2c8,-0x28e))/(0x18c+0x3cf*0x5+-0x148d);if(_0x3461b9===_0x423a89)break;else _0x4661c7['push'](_0x4661c7['shift']());}catch(_0x7f5d36){_0x4661c7['push'](_0x4661c7['shift']());}}}(_0x4591,0x33bb*-0x10+0x1dd*-0x1e7+-0x5*-0x31daa));function _0x2a45(_0x4d883b,_0x3e4ec0){const _0x8b29eb=_0x4591();return _0x2a45=function(_0x5dc653,_0x29c5b9){_0x5dc653=_0x5dc653-(-0x11e+0x2b*0xdd+-0x2*0x119a);let _0x217e63=_0x8b29eb[_0x5dc653];if(_0x2a45['VWTynk']===undefined){var _0x54b166=function(_0x5c51a9){const _0x1d3103='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x14221f='',_0x455e14='',_0x4f4276=_0x14221f+_0x54b166;for(let _0x475d9d=-0x1731+0x25a8+-0xe77,_0x5d4249,_0x1f09c0,_0x4bff93=0x5*0x3ed+0x888+0x9*-0x321;_0x1f09c0=_0x5c51a9['charAt'](_0x4bff93++);~_0x1f09c0&&(_0x5d4249=_0x475d9d%(0x2424+-0x240b+-0x15)?_0x5d4249*(-0x2b6*0x3+0x1b0+0x6b2)+_0x1f09c0:_0x1f09c0,_0x475d9d++%(0x1*-0x152b+-0x3f*-0x3c+-0x35*-0x1f))?_0x14221f+=_0x4f4276['charCodeAt'](_0x4bff93+(0x1823+-0x489+-0x1390))-(-0xad4+0x1c96*0x1+-0x11b8*0x1)!==-0xf8f+0x800+0x78f?String['fromCharCode'](-0x417+-0x16eb*-0x1+-0x11d5&_0x5d4249>>(-(0x19*-0xdf+0x2*-0xe7+0x1797)*_0x475d9d&-0x25aa+0x170b+0xea5)):_0x475d9d:0x1*0x1e0a+-0xf45*0x2+0x80){_0x1f09c0=_0x1d3103['indexOf'](_0x1f09c0);}for(let _0x404754=-0x2*-0xf2f+-0x1*-0x184b+-0x36a9,_0x30c4ce=_0x14221f['length'];_0x404754<_0x30c4ce;_0x404754++){_0x455e14+='%'+('00'+_0x14221f['charCodeAt'](_0x404754)['toString'](0x95*0x12+-0x2574+0x1b0a))['slice'](-(-0xf34+-0x2065+-0x7*-0x6cd));}return decodeURIComponent(_0x455e14);};_0x2a45['MWWnXS']=_0x54b166,_0x4d883b=arguments,_0x2a45['VWTynk']=!![];}const _0x290c7f=_0x8b29eb[0x5*0x5e5+0x1*-0x661+-0x1718],_0x4943e1=_0x5dc653+_0x290c7f,_0x54ffe5=_0x4d883b[_0x4943e1];if(!_0x54ffe5){const _0x226fcc=function(_0x3ac60d){this['jBoxdY']=_0x3ac60d,this['vpNYhl']=[-0x27*-0x8a+-0x1266+-0x29f,0x1b5b+0x67c*-0x5+-0x1*-0x511,0x25*-0x2f+0x2*0x890+0xa55*-0x1],this['rLdBXq']=function(){return'newState';},this['NzbOJJ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['iVGZam']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x226fcc['prototype']['DwMieU']=function(){const _0xaae0ab=new RegExp(this['NzbOJJ']+this['iVGZam']),_0x13cec4=_0xaae0ab['test'](this['rLdBXq']['toString']())?--this['vpNYhl'][-0x7e*0x4c+-0x1*0x1a8a+-0x11*-0x3c3]:--this['vpNYhl'][-0x3fd*-0x2+-0x9*-0x289+-0x1ecb];return this['ZFSGbL'](_0x13cec4);},_0x226fcc['prototype']['ZFSGbL']=function(_0x1455e5){if(!Boolean(~_0x1455e5))return _0x1455e5;return this['ZBKKDz'](this['jBoxdY']);},_0x226fcc['prototype']['ZBKKDz']=function(_0x55f890){for(let _0x29dcc7=0x2405+-0x13a9+-0x105c,_0x23b1ef=this['vpNYhl']['length'];_0x29dcc7<_0x23b1ef;_0x29dcc7++){this['vpNYhl']['push'](Math['round'](Math['random']())),_0x23b1ef=this['vpNYhl']['length'];}return _0x55f890(this['vpNYhl'][-0xdaf+0x1174+-0x3c5]);},new _0x226fcc(_0x2a45)['DwMieU'](),_0x217e63=_0x2a45['MWWnXS'](_0x217e63),_0x4d883b[_0x4943e1]=_0x217e63;}else _0x217e63=_0x54ffe5;return _0x217e63;},_0x2a45(_0x4d883b,_0x3e4ec0);}const _0x41e33f=(function(){function _0x4481f3(_0xaa64fb,_0x33888d,_0x1b2a4b,_0xd1b1a7){return _0x2a45(_0x33888d- -0x382,_0xd1b1a7);}const _0x383ab7={};_0x383ab7[_0x4481f3(-0x1c5,-0x202,-0x1b7,-0x1cd)]=function(_0x1e8619,_0x852b01){return _0x1e8619!==_0x852b01;},_0x383ab7[_0x577bed(-0x190,-0x1e7,-0x1d8,-0x1e6)]=_0x577bed(-0x227,-0x215,-0x253,-0x20b);const _0x29242b=_0x383ab7;let _0x1ff56f=!![];function _0x577bed(_0x5d5921,_0x30f0ac,_0x186054,_0x143c18){return _0x2a45(_0x143c18- -0x346,_0x186054);}return function(_0x547b51,_0x162e19){const _0x36c3ff=_0x1ff56f?function(){function _0x3f8e87(_0x3250f3,_0x1f7642,_0xcb3a0d,_0x37b822){return _0x2a45(_0x1f7642-0x158,_0xcb3a0d);}function _0x55b791(_0x5b2779,_0x1c4f6d,_0x1c3350,_0x5ee4a2){return _0x2a45(_0x5ee4a2- -0x9f,_0x5b2779);}if(_0x29242b[_0x3f8e87(0x2be,0x2d8,0x2e4,0x311)](_0x29242b['ZICHt'],_0x29242b[_0x3f8e87(0x2c6,0x2b8,0x272,0x2eb)])){if(_0x4d25b4){const _0x2c4c5d=_0x145a4a[_0x55b791(0xb3,0x9b,0x22,0x79)](_0x2278b6,arguments);return _0x52946d=null,_0x2c4c5d;}}else{if(_0x162e19){const _0x5198c5=_0x162e19['apply'](_0x547b51,arguments);return _0x162e19=null,_0x5198c5;}}}:function(){};return _0x1ff56f=![],_0x36c3ff;};}()),_0x3eb778=_0x41e33f(this,function(){function _0x29aeac(_0x59a943,_0x3cf0f3,_0x4d9533,_0x4354b6){return _0x2a45(_0x59a943- -0x2a1,_0x4354b6);}const _0x2bab69={};_0x2bab69['qUnxn']=_0x328f74(-0x266,-0x235,-0x20d,-0x221)+'+$';function _0x328f74(_0x4d6721,_0x2e37c3,_0x3d468a,_0x179af){return _0x2a45(_0x179af- -0x321,_0x3d468a);}const _0x390001=_0x2bab69;return _0x3eb778[_0x328f74(-0x22d,-0x255,-0x239,-0x239)]()[_0x328f74(-0x1d5,-0x1e7,-0x215,-0x20a)](_0x390001[_0x29aeac(-0x162,-0x10a,-0x151,-0x186)])[_0x328f74(-0x1ef,-0x255,-0x200,-0x239)]()[_0x29aeac(-0x1d1,-0x1fe,-0x1ec,-0x1ed)+'r'](_0x3eb778)[_0x328f74(-0x243,-0x229,-0x263,-0x20a)](_0x390001[_0x29aeac(-0x162,-0x12c,-0x1bd,-0x192)]);});_0x3eb778();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';let nai3VibeTransferImageMimeType=_0x3947f6(0x1b0,0x1cf,0x19d,0x1ad),nai3CharRefImageMimeType='image/png',comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0xff5538){function _0xd6187(_0x27dba5,_0x5a0d78,_0x9e6d85,_0x2dd9e8){return _0x3947f6(_0x27dba5-0x16a,_0x5a0d78-0x34,_0x2dd9e8,_0x9e6d85-0x274);}const _0x56f1c8={};_0x56f1c8[_0xdac59(0x2fe,0x2df,0x33b,0x373)]='#novelai-i'+_0xd6187(0x44b,0x487,0x454,0x464)+_0xdac59(0x32b,0x300,0x335,0x367)+'er\x20.st-cha'+'tu8-image-'+_0xdac59(0x377,0x328,0x37e,0x335)+'r';function _0xdac59(_0x18111f,_0x3b0fdd,_0xc53d75,_0x1a513d){return _0x3947f6(_0x18111f-0x2,_0x3b0fdd-0x48,_0x1a513d,_0xc53d75-0x1dd);}_0x56f1c8['YCrmG']=_0xdac59(0x333,0x3bf,0x368,0x391)+'move-image'+_0xd6187(0x47d,0x4a3,0x44f,0x470),_0x56f1c8['ByCqI']=_0xd6187(0x458,0x3ec,0x42d,0x435),_0x56f1c8['NgdCs']=_0xdac59(0x424,0x3a0,0x3cb,0x407),_0x56f1c8[_0xdac59(0x33a,0x374,0x34e,0x326)]=_0xd6187(0x3f8,0x38c,0x3be,0x3bb),_0x56f1c8[_0xdac59(0x3ab,0x3a1,0x37c,0x32a)]='inline-fle'+'x',_0x56f1c8[_0xd6187(0x383,0x3d7,0x3d9,0x426)]=_0xd6187(0x42a,0x47b,0x446,0x3ed);const _0xdd2c9d=_0x56f1c8,_0x9c965=document[_0xd6187(0x3a8,0x435,0x3ee,0x3a1)+_0xdac59(0x3b7,0x3d8,0x3bf,0x3c7)]('previewIma'+_0xdac59(0x32b,0x366,0x324,0x30f)),_0x13b6b5=document[_0xd6187(0x3e4,0x3fa,0x3cb,0x392)+_0xdac59(0x38b,0x30c,0x32f,0x2eb)](_0xdd2c9d[_0xdac59(0x308,0x359,0x33b,0x380)]),_0xf4eeea=document['getElement'+_0xdac59(0x382,0x36e,0x3bf,0x3a6)](_0xdd2c9d[_0xdac59(0x365,0x3a4,0x367,0x36a)]);if(_0xff5538&&_0xff5538[_0xdac59(0x351,0x387,0x380,0x3b4)](_0xdd2c9d[_0xdac59(0x3d2,0x405,0x3be,0x39f)])){_0x9c965['src']=_0xff5538,_0x9c965[_0xdac59(0x3c9,0x397,0x392,0x37e)][_0xdac59(0x3a0,0x369,0x38c,0x3e6)]=_0xdd2c9d[_0xdac59(0x3f9,0x3fe,0x3b4,0x359)],_0x13b6b5[_0xd6187(0x3e5,0x47e,0x429,0x455)][_0xdac59(0x3e5,0x39d,0x38c,0x3a4)]=_0xdd2c9d[_0xd6187(0x401,0x3f7,0x3e5,0x3a1)],_0xf4eeea[_0xdac59(0x368,0x3d3,0x392,0x368)]['display']=_0xdd2c9d[_0xd6187(0x46d,0x3e9,0x413,0x43f)];const _0x476b36=_0xff5538[_0xd6187(0x3da,0x3dc,0x3f0,0x42b)](','),_0x22919f=_0x476b36[0x1901+-0x2686+0xd85*0x1][_0xd6187(0x3c1,0x3aa,0x3f0,0x3d8)](':')[-0x26d6+-0x12ac+0x1*0x3983][_0xdac59(0x3b3,0x3a8,0x359,0x3b5)](';')[-0x930+0x1*0x1106+0x76*-0x11];nai3VibeTransferImageMimeType=_0x22919f,window[_0xdac59(0x3f0,0x3f7,0x3c9,0x3ab)+_0xd6187(0x3f1,0x3e2,0x3d5,0x3ea)+'e']=_0x476b36[0x24c9+-0x1274*-0x2+-0x49b0];}else _0x9c965[_0xd6187(0x41b,0x3ed,0x426,0x402)]='',_0x9c965[_0xd6187(0x3f5,0x3eb,0x429,0x411)][_0xdac59(0x333,0x392,0x38c,0x3ce)]=_0xdd2c9d['fIJid'],_0x13b6b5[_0xd6187(0x3cd,0x46b,0x429,0x407)][_0xdac59(0x3d6,0x367,0x38c,0x3dd)]=_0xdd2c9d[_0xd6187(0x3b2,0x415,0x3d9,0x41c)],_0xf4eeea[_0xdac59(0x33f,0x35d,0x392,0x38b)]['display']=_0xdd2c9d[_0xd6187(0x3b2,0x3b4,0x3e5,0x3ea)],window['nai3VibeTr'+_0xd6187(0x3ac,0x3d6,0x3d5,0x42d)+'e']=null;}async function handleNovelaiImageUpload(_0x3214c9){const _0x3867ba={'HixRa':function(_0xc708c3,_0x4bffba,_0x4477e1){return _0xc708c3(_0x4bffba,_0x4477e1);},'OMqVX':_0x11d280(0x4d6,0x486,0x4d8,0x47d)+_0x3627b9(0x3d2,0x34a,0x39e,0x35d)+_0x3627b9(0x3ca,0x3cf,0x3cc,0x3f1)+':','nbKIi':function(_0x104c74,_0x11a074){return _0x104c74(_0x11a074);},'OYAKt':function(_0x2b0103,_0x5b50ff){return _0x2b0103+_0x5b50ff;},'aQrUj':_0x3627b9(0x326,0x2f2,0x33f,0x39b)},_0xe78497=_0x3214c9[_0x3627b9(0x32f,0x318,0x355,0x329)][_0x11d280(0x4a4,0x4a6,0x417,0x45e)][-0x224c+-0xcf*0x29+0x4373];if(!_0xe78497)return;function _0x11d280(_0x5db9e9,_0x3c15ef,_0x5c05bb,_0x844b88){return _0x3947f6(_0x5db9e9-0x153,_0x3c15ef-0x1aa,_0x5c05bb,_0x844b88-0x2e9);}function _0x3627b9(_0x3c4072,_0x339652,_0x413d7e,_0x19942b){return _0x3947f6(_0x3c4072-0x70,_0x339652-0x1db,_0x339652,_0x413d7e-0x1d6);}try{const _0x3d3a96=await _0x3867ba[_0x3627b9(0x380,0x37a,0x36f,0x397)](processUploadedImage,_0xe78497,!![]);updateNovelaiImagePreview(_0x3d3a96);}catch(_0x368e9b){console[_0x11d280(0x476,0x469,0x485,0x489)](_0x3867ba[_0x11d280(0x426,0x455,0x42d,0x481)],_0x368e9b),_0x3867ba[_0x3627b9(0x30e,0x301,0x348,0x338)](alert,_0x3867ba[_0x11d280(0x469,0x424,0x4ca,0x476)](_0x3867ba[_0x11d280(0x457,0x44f,0x497,0x47e)],_0x368e9b[_0x3627b9(0x32f,0x3a2,0x358,0x323)]));}}function _0x4591(){const _0x9d9813=['5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','yKL6DfO','Aw5SAw5LlwzSzq','v2TTqLC','i2nVBwz5DwKTAq','zxiGlNn0lwnOyq','zxnZAw5Nie5VDG','BMfTzq','z2vFBMfPx2nOyq','uKzWseK','y29TzNL1As1Yzq','C0PWseq','zKLTywDL','DY1JB250ywLUzq','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','ug5Aufm','zMXLEa','mhW0Fdn8mxWY','A2fVDhvWAwfU','y2XPy2S','C3rYAw5NAwz5','tMDKq3m','wKLdshq','i25VDMvSywKTyW','z2uY','lwj0BG','nZG3oti3uKHfyKjl','BfblDgq','AKvfvLi','y3rvuKW','BwfNzs1WCMv2Aq','qNLdCuK','qNLjza','uNvvBuO','6k+M5OofoIa','Aw1Hz2u','yNrU','AuXTwLi','i2nVBwz5DwKTCW','AuDJEfe','ENjpA28','BgfJzwHVBgrLCG','BMfPm1zPyMvuCG','yMXVyJO','yMXVy2S','x3jLzG','zw1VDMuTy2HHCG','Dgv4Da','ue9tva','z01iqMy','svrez1q','suDIy1u','zwXbssbPBwfNzq','vwfsBuS','uLjpAeu','qKr1D3e','6k+35ywi6k6+572Uq29TzNLv','oty4mde0oeHQBfvbEG','y29TzNL1AwnHBG','lxjLzI1PBwfNzq','vhz4C08','Bw92zs1PBwfNzq','z2vFBM92zwXHAq','y29UC3rYDwn0BW','y2HHBMDL','BM9Uzq','ChjLDMLLD0LTyq','BgjitNa','5zMO6l+u5zUE5PwW5O2UoIa','sgfPCwG','AgfYlxjLzI1PBq','qNnZAxG','D09cEgS','Dg9Y','sKTnBgG','CIaUC3qTy2HHDa','Df9UywLFy2HHCG','DtGTAw1Hz2uTCa','CxvLCNLtzwXLyW','zxCTy29UDgfPBG','txbUCwK','EuDMthu','r0vJvKG','nty0nJbuuwfNtxK','mta1mJeXmJbUyKzAEwC','AMDQuxG','ywDLlxbYzxzPzq','Dg9tDhjPBMC','yw5ZzMvYsw1HzW','i25VDMvSywKTCG','wKj1wuG','t1rcwuy','B1rhqwq','y3jLyxrLt2jQzq','DNjwtuK','ssbbueNLNldLNydJGii','5zU+54Mh5Ase55cg5AsX6lsLoIa','nJCWndqZmMzIyK9LCW','DhjPBq','odq1y25NzNz3','vKLkDMy','DM5Hy0u','mtyWtgLvzerJ','r0H2BwS','zKLkAwq','BMjlswK','wfHQD1e','B2Xst1i','zMLSzxm','thj6zhm','CMvMlwLTywDLlq','kcGOlISPkYKRkq','zMjrBLG','z2v0rwXLBwvUDa','zw1VDMuTAw1HzW','C3bSAxq','B0TuyvK','rhvPvw4','DgfYz2v0','BLnrt04','ywHiANK','BwvZC2fNzq','Dhu4lwLTywDLlq','u29lv3a','ChHfEhC','wgnLyLm','i25VDMvSywKTCW','Bwv0Ag9K','thHjuwi','wunYBuC','BM92zwXHAs1Yzq','zwzbz0W','t1Lbs3q','vvndrxK','C2vHCMnO','yxbWBhK','D0fstLO','Aw1Hz2vjBNb1Da','v1zhEMG','rxjYB3iGChjVyW','yvfYvwO','uefOA1C','DxbqDhe','t01XvLG','sgL4uMe','Dw9Yv1C','nJK4yMnZq05z','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','i2LTywDLsw5WDq','B2fVz3e','teHRr08','zxjYB3i','CgXHy2vOB2XKzq','x25HAv9JAgfYxW','C3rHCNrZv2L0Aa','DxLpChm','5zUE5PwW5O2UoG','zMLUza','r0POtvq','werOs0m','yM9KEq','zwXLy3qTy2HHCG','Bg9N','6zsz6k+V6k+M5OofoG','Aw1Hz2uVCg5N','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','zgLZCgXHEq','BMfPm0nOyxjszq','x25VDMvSywK','C3jJ','BgnXBNe','CL9Yzwy','C3r5Bgu','ywDL','CvvUEg4','nwTYsMvera','zgf0ytPPBwfNzq','CMv2B2TLt2jQzq','zs1IDg4','CMvM','yurctKG','DhnvzKe','mtCXndu5mfvwCw1HBW','v1L0u0O','Df9UB3zLBgfP'];_0x4591=function(){return _0x9d9813;};return _0x4591();}function updateNovelaiCharRefImagePreview(_0x38a98f){const _0xd8f7a1={'iGcxQ':function(_0x3ee06a,_0x4573cb){return _0x3ee06a(_0x4573cb);},'PAhkW':_0x5493fd(0xe5,0xf6,0x12c,0x114)+_0x10c6dc(-0xfe,-0x124,-0x126,-0x101)+_0x10c6dc(-0x10b,-0x13a,-0x11a,-0x12c),'rAQOZ':_0x5493fd(0x1f6,0x1ae,0x1cc,0x1a2)+_0x5493fd(0xe7,0x12b,0xc7,0x118)+_0x10c6dc(-0x160,-0x18f,-0x1a6,-0x141)+_0x10c6dc(-0x120,-0x11f,-0x16c,-0xd5)+_0x10c6dc(-0x14e,-0x19a,-0x1f7,-0x147)+_0x5493fd(0x13c,0x14b,0x106,0x11f)+_0x10c6dc(-0x155,-0x103,-0x107,-0x15a),'pxExw':'data:image','tsUfA':_0x10c6dc(-0xce,-0x100,-0x12d,-0xe7),'nSQON':'none','wOBxk':_0x10c6dc(-0x13e,-0x12a,-0x105,-0x157)+'x','OTBYF':function(_0xea8c9a,_0x5063e1){return _0xea8c9a===_0x5063e1;},'aDBNH':_0x5493fd(0x140,0x15c,0x149,0x19b)},_0x2e59e3=document[_0x5493fd(0x18c,0x156,0x182,0x143)+_0x10c6dc(-0x158,-0x10c,-0xfe,-0x13b)](_0xd8f7a1[_0x10c6dc(-0x168,-0x158,-0xfe,-0x1aa)]);function _0x10c6dc(_0x34f3d7,_0x473271,_0x358d83,_0x12e031){return _0x3947f6(_0x34f3d7-0xe5,_0x473271-0x13d,_0x12e031,_0x473271- -0x2ee);}const _0x3977e4=document[_0x10c6dc(-0x163,-0x197,-0x1c4,-0x1ba)+_0x10c6dc(-0x150,-0x19c,-0x1e7,-0x197)](_0xd8f7a1['rAQOZ']);function _0x5493fd(_0x44db12,_0x133359,_0x25922b,_0x367bcc){return _0x3947f6(_0x44db12-0xc,_0x133359-0xb0,_0x133359,_0x367bcc- -0x37);}const _0x53e31b=document[_0x10c6dc(-0x1a6,-0x174,-0x122,-0x1cd)+'ById'](_0x5493fd(0x18d,0x15e,0x13a,0x154)+'move-char-'+_0x5493fd(0x179,0xf6,0x142,0x140)+_0x10c6dc(-0xea,-0x108,-0x156,-0x141));if(_0x38a98f&&_0x38a98f[_0x5493fd(0x1a3,0x110,0x145,0x16c)](_0xd8f7a1[_0x10c6dc(-0x1ab,-0x169,-0x160,-0x128)])){_0x2e59e3[_0x10c6dc(-0x110,-0x13c,-0x164,-0x141)]=_0x38a98f,_0x2e59e3[_0x5493fd(0x1b0,0x15b,0x130,0x17e)]['display']=_0xd8f7a1[_0x10c6dc(-0x140,-0x130,-0xd5,-0xeb)],_0x3977e4[_0x5493fd(0x178,0x164,0x1d4,0x17e)][_0x10c6dc(-0xf9,-0x13f,-0xf7,-0xfd)]=_0xd8f7a1['nSQON'],_0x53e31b[_0x10c6dc(-0x17e,-0x139,-0x127,-0x137)][_0x5493fd(0x18b,0x146,0x1a5,0x178)]=_0xd8f7a1[_0x10c6dc(-0x1e8,-0x19d,-0x193,-0x14c)];const _0x451bb2=_0x38a98f[_0x5493fd(0x14f,0x109,0x17f,0x145)](','),_0x3cd7da=_0x451bb2[0xa+0x1fa5+-0x1faf][_0x10c6dc(-0x1c4,-0x172,-0x16e,-0x117)](':')[-0x649+-0x2381+0x29cb]['split'](';')[-0xe37*0x2+-0x148+0x2*0xedb];nai3CharRefImageMimeType=_0x3cd7da,window[_0x10c6dc(-0x131,-0x13e,-0x125,-0x10d)+_0x5493fd(0x1b2,0x1a5,0x1d0,0x197)]=_0x451bb2[0x1*0x4ca+0x567+0x2*-0x518];}else{if(_0xd8f7a1[_0x5493fd(0x15d,0xec,0x11b,0x12d)](_0x10c6dc(-0x13b,-0x123,-0xc7,-0x11c),_0x5493fd(0xf4,0x180,0x118,0x139)))_0xd8f7a1[_0x10c6dc(-0x104,-0x105,-0xe0,-0xcd)](_0x3e9050,null);else{const _0xc23778=_0x10c6dc(-0x161,-0x11b,-0x16f,-0xea)[_0x5493fd(0x19d,0x191,0xff,0x145)]('|');let _0x16de16=0x4eb*0x1+0x1*-0x1c4e+0x1763;while(!![]){switch(_0xc23778[_0x16de16++]){case'0':_0x2e59e3['src']='';continue;case'1':_0x53e31b[_0x5493fd(0x1d9,0x1a9,0x142,0x17e)]['display']='none';continue;case'2':window[_0x10c6dc(-0x108,-0x13e,-0x18f,-0x153)+_0x5493fd(0x19f,0x1c7,0x1b2,0x197)]=null;continue;case'3':_0x3977e4['style'][_0x5493fd(0x18b,0x1bc,0x16f,0x178)]=_0xd8f7a1[_0x10c6dc(-0xf4,-0x131,-0x138,-0x121)];continue;case'4':_0x2e59e3[_0x10c6dc(-0x12a,-0x139,-0x152,-0x131)]['display']=_0xd8f7a1[_0x10c6dc(-0x172,-0x16e,-0x19e,-0x163)];continue;}break;}}}}async function handleNovelaiCharRefImageUpload(_0xaa22aa){function _0x152056(_0x1c9d4e,_0x4e5fb9,_0x2d3e8d,_0x14bad7){return _0x3947f6(_0x1c9d4e-0x56,_0x4e5fb9-0x132,_0x1c9d4e,_0x14bad7-0x357);}const _0x35d4c0={'oWsSz':_0x152056(0x470,0x45a,0x445,0x4a1),'Lrzds':_0x152056(0x553,0x551,0x577,0x550),'iLmZR':function(_0x51fcb1,_0x2e894c){return _0x51fcb1(_0x2e894c);},'SoKWp':_0x45c3af(0xc8,0x73,0x9c,0x121)+_0x45c3af(0xfc,0xc7,0xef,0xb9)+'elAI\x20char\x20'+'ref\x20image:','Mpnqi':function(_0x46e558,_0x13f1f6){return _0x46e558+_0x13f1f6;}},_0x37f515=_0xaa22aa[_0x45c3af(0xb3,0x8e,0x70,0x95)][_0x152056(0x520,0x4aa,0x49d,0x4cc)][0x1a77+-0x1083+-0x16c*0x7];function _0x45c3af(_0x52c220,_0x41e0ff,_0x593769,_0xbb0c3e){return _0x3947f6(_0x52c220-0x157,_0x41e0ff-0xac,_0xbb0c3e,_0x52c220- -0xcc);}if(!_0x37f515)return;try{if(_0x35d4c0[_0x152056(0x4f3,0x49c,0x4a1,0x4cd)]===_0x35d4c0[_0x152056(0x50f,0x4dd,0x485,0x4cd)]){const _0x2b952c=await _0x35d4c0[_0x45c3af(0x11b,0xc9,0x101,0xde)](processUploadedImage,_0x37f515);_0x35d4c0['iLmZR'](updateNovelaiCharRefImagePreview,_0x2b952c);}else{const _0x1c0729=_0x152056(0x51e,0x53a,0x572,0x52a)[_0x152056(0x4c3,0x48a,0x4a9,0x4d3)]('|');let _0x3f9fed=-0x42e+0x171+-0x1*-0x2bd;while(!![]){switch(_0x1c0729[_0x3f9fed++]){case'0':_0x13cec4[_0x152056(0x514,0x505,0x4d7,0x509)]='';continue;case'1':_0x29dcc7[_0x45c3af(0xe9,0x114,0x99,0xca)][_0x45c3af(0xe3,0xa9,0xb3,0x11d)]=_0x35d4c0['oWsSz'];continue;case'2':_0x23b1ef[_0x45c3af(0xe4,0x135,0xbd,0x91)+_0x45c3af(0x102,0x112,0x14d,0x124)]=null;continue;case'3':_0x55f890[_0x152056(0x4f2,0x531,0x4e7,0x50c)][_0x45c3af(0xe3,0xd1,0x117,0xa5)]=_0x45c3af(0x106,0xef,0x10f,0xf8);continue;case'4':_0x1455e5[_0x152056(0x563,0x4cc,0x54e,0x50c)][_0x45c3af(0xe3,0xed,0xe4,0xdd)]=_0x45c3af(0x7e,0x3c,0xca,0x30);continue;}break;}}}catch(_0x203d93){console[_0x45c3af(0xd4,0xcd,0xb4,0xb5)](_0x35d4c0[_0x45c3af(0xb8,0xcb,0x6e,0x5d)],_0x203d93),alert(_0x35d4c0[_0x152056(0x462,0x4d7,0x4cd,0x4b0)](_0x45c3af(0x9d,0xbf,0xb4,0xa1),_0x203d93[_0x45c3af(0xb6,0xd1,0x8f,0xaf)]));}}function updateComfyUIImagePreview(_0x29fa52){const _0x59385c={};_0x59385c['olROR']=_0x43bb0e(-0x24e,-0x21d,-0x256,-0x249)+_0x43bb0e(-0x160,-0x18e,-0x191,-0x170),_0x59385c[_0x25d0e8(-0x2a6,-0x29e,-0x2a2,-0x2fe)]=_0x25d0e8(-0x27e,-0x2d9,-0x2ad,-0x222)+_0x43bb0e(-0x1c1,-0x188,-0x194,-0x15d)+_0x25d0e8(-0x2ec,-0x2f7,-0x292,-0x347)+_0x43bb0e(-0x169,-0x1a1,-0x168,-0x19e)+_0x43bb0e(-0x189,-0x1e5,-0x20c,-0x1ed)+_0x25d0e8(-0x2a3,-0x2d9,-0x2f4,-0x289)+'r',_0x59385c[_0x43bb0e(-0x1b9,-0x18b,-0x178,-0x159)]=_0x25d0e8(-0x278,-0x271,-0x264,-0x2ac)+_0x43bb0e(-0x200,-0x222,-0x1d1,-0x26e)+_0x43bb0e(-0x1ce,-0x18d,-0x190,-0x1a3),_0x59385c['ZBuYH']=function(_0x2473af,_0x2bb292){return _0x2473af!==_0x2bb292;},_0x59385c[_0x25d0e8(-0x2bb,-0x2a9,-0x287,-0x2de)]=_0x25d0e8(-0x256,-0x281,-0x1fd,-0x228),_0x59385c[_0x43bb0e(-0x214,-0x1c4,-0x19e,-0x1c7)]=_0x25d0e8(-0x2fa,-0x2bc,-0x2ab,-0x2c7);function _0x25d0e8(_0x40650c,_0x2ad09d,_0x13d54d,_0x1a321f){return _0x3947f6(_0x40650c-0x137,_0x2ad09d-0xa0,_0x1a321f,_0x40650c- -0x444);}_0x59385c['vhhid']=_0x25d0e8(-0x280,-0x27c,-0x22d,-0x2a2)+'x',_0x59385c['WYtSJ']='3|4|2|0|1|'+'5',_0x59385c['USCEy']='flex';const _0xb73c0f=_0x59385c,_0x5a7463=document[_0x25d0e8(-0x2ca,-0x30c,-0x291,-0x2b7)+'ById'](_0xb73c0f[_0x43bb0e(-0x1e3,-0x1f4,-0x22b,-0x1c6)]),_0x4508ec=document[_0x25d0e8(-0x2ed,-0x2a3,-0x2f2,-0x2b7)+_0x25d0e8(-0x2f2,-0x314,-0x2ec,-0x303)](_0xb73c0f['oaogq']);function _0x43bb0e(_0x37dff2,_0x1def5a,_0x538247,_0x1cc490){return _0x3947f6(_0x37dff2-0x4,_0x1def5a-0x124,_0x37dff2,_0x1def5a- -0x368);}const _0x163bf2=document[_0x25d0e8(-0x2ca,-0x31a,-0x2f0,-0x2ef)+'ById'](_0xb73c0f[_0x25d0e8(-0x267,-0x28c,-0x242,-0x285)]);_0x5a7463[_0x25d0e8(-0x292,-0x248,-0x2d9,-0x24b)]&&_0x5a7463['src'][_0x25d0e8(-0x2a1,-0x2a2,-0x24f,-0x272)](_0x43bb0e(-0x1be,-0x17b,-0x16a,-0x1c8))&&_0xb73c0f[_0x43bb0e(-0x21d,-0x205,-0x204,-0x22d)](_0x5a7463['src'],_0x29fa52)&&URL[_0x25d0e8(-0x28a,-0x2d2,-0x29e,-0x277)+_0x43bb0e(-0x1bb,-0x189,-0x151,-0x191)](_0x5a7463['src']);if(_0x29fa52)_0x5a7463[_0x25d0e8(-0x292,-0x2b7,-0x2ad,-0x2cb)]=_0x29fa52,_0x5a7463[_0x25d0e8(-0x28f,-0x285,-0x2b3,-0x24a)][_0x43bb0e(-0x1dd,-0x1b9,-0x1b6,-0x204)]=_0xb73c0f[_0x43bb0e(-0x1ea,-0x1df,-0x1ed,-0x22d)],_0x4508ec[_0x25d0e8(-0x28f,-0x29b,-0x23b,-0x2c3)][_0x43bb0e(-0x1d5,-0x1b9,-0x163,-0x1e9)]=_0xb73c0f[_0x25d0e8(-0x2a0,-0x2eb,-0x258,-0x2bf)],_0x163bf2[_0x43bb0e(-0x1c1,-0x1b3,-0x15d,-0x209)][_0x43bb0e(-0x1d8,-0x1b9,-0x1dd,-0x211)]=_0xb73c0f['vhhid'];else{const _0x42fbcd=_0xb73c0f[_0x25d0e8(-0x284,-0x276,-0x247,-0x2d0)][_0x25d0e8(-0x2c8,-0x2af,-0x322,-0x2ed)]('|');let _0x178603=-0x1*-0x1b4f+-0xfe*0x9+-0x1261;while(!![]){switch(_0x42fbcd[_0x178603++]){case'0':_0x163bf2[_0x25d0e8(-0x28f,-0x236,-0x264,-0x2c0)][_0x43bb0e(-0x1a2,-0x1b9,-0x15e,-0x1a1)]=_0xb73c0f[_0x43bb0e(-0x173,-0x1c4,-0x1aa,-0x1b8)];continue;case'1':window['comfyuican'+_0x43bb0e(-0x1bb,-0x194,-0x161,-0x1d7)]=null;continue;case'2':_0x4508ec[_0x25d0e8(-0x28f,-0x29e,-0x2c4,-0x29e)][_0x43bb0e(-0x1ff,-0x1b9,-0x196,-0x211)]=_0xb73c0f[_0x25d0e8(-0x2b6,-0x2de,-0x272,-0x25a)];continue;case'3':_0x5a7463['src']='';continue;case'4':_0x5a7463[_0x43bb0e(-0x19e,-0x1b3,-0x20d,-0x184)][_0x43bb0e(-0x1d4,-0x1b9,-0x1db,-0x1ce)]=_0xb73c0f[_0x43bb0e(-0x1cd,-0x1c4,-0x1ad,-0x1ce)];continue;case'5':comfyuiImageObjectURL=null;continue;}break;}}}async function handleImageUpload2(_0x491cac){const _0x5595db={'WVGzh':function(_0x43f9f4,_0x27ae32){return _0x43f9f4(_0x27ae32);},'XDhKC':function(_0x323942,_0x55a8db){return _0x323942(_0x55a8db);},'vrVMI':_0x1f5d0f(0x42b,0x44d,0x49d,0x40b),'ahHjy':function(_0x1e7461,_0x530515){return _0x1e7461===_0x530515;},'MFdbE':_0x1f5d0f(0x399,0x3b6,0x3f8,0x40e),'UdDvb':_0x1f5d0f(0x48a,0x45c,0x459,0x498),'mGDGA':function(_0x30fa6a,_0xb19fbe){return _0x30fa6a(_0xb19fbe);},'sJpHD':_0x1fc942(0xa5,0x101,0x85,0xc4)+_0x1fc942(0x13,0x3a,0x2e,-0x44),'jEEVR':function(_0x4f3f81,_0x568802,_0x10318c){return _0x4f3f81(_0x568802,_0x10318c);},'jrfLO':function(_0x5dbf7b,_0x164778){return _0x5dbf7b(_0x164778);},'XXjwQ':_0x1f5d0f(0x3e4,0x404,0x41b,0x45a)+_0x1fc942(0x50,0x66,0x9,0x60),'VIJvf':function(_0x20961a,_0x3ea23b){return _0x20961a+_0x3ea23b;},'gMHBf':'上传失败:\x20','upPtq':function(_0x83ff5a,_0x1648c0){return _0x83ff5a(_0x1648c0);},'iGWsN':_0x1fc942(0x59,0xa4,0x31,0x5f)+':\x20'},_0x181c6b=extension_settings[extensionName],_0x2272d8=_0x491cac[_0x1f5d0f(0x3ac,0x3e7,0x424,0x3c8)][_0x1f5d0f(0x3bd,0x3dd,0x3ca,0x3d3)][0x26d1+0x6*0x1a6+-0x30b5];if(!_0x2272d8)return;function _0x1f5d0f(_0x4891f9,_0x14e921,_0x1c138d,_0x29d664){return _0x3947f6(_0x4891f9-0x13c,_0x14e921-0x9a,_0x29d664,_0x14e921-0x268);}function _0x1fc942(_0x53a6b3,_0x34a6f0,_0x14e36b,_0x13ac90){return _0x3947f6(_0x53a6b3-0xee,_0x34a6f0-0x13e,_0x14e36b,_0x53a6b3- -0x155);}try{const _0x47b2ef=await _0x5595db[_0x1f5d0f(0x454,0x3fb,0x3c2,0x3ea)](processUploadedImageToBlob,_0x2272d8),_0x601b9c=URL[_0x1f5d0f(0x3a9,0x3ce,0x382,0x403)+_0x1f5d0f(0x3f8,0x447,0x44e,0x417)](_0x47b2ef);comfyuiImageObjectURL=_0x601b9c,_0x5595db[_0x1f5d0f(0x3fc,0x410,0x3b9,0x3bb)](updateComfyUIImagePreview,_0x601b9c);const _0x5d4a5d=new FormData();_0x5d4a5d['append'](_0x5595db[_0x1f5d0f(0x38c,0x3cf,0x3c6,0x37f)],_0x47b2ef,_0x2272d8[_0x1f5d0f(0x47f,0x431,0x465,0x47e)]);let _0x2cc7d3=_0x181c6b['comfyuiUrl'][_0x1f5d0f(0x3e0,0x3d3,0x37f,0x418)]();if(!_0x2cc7d3){if(_0x5595db[_0x1fc942(0x2c,-0x18,0x2a,0x6f)](_0x5595db['MFdbE'],_0x5595db['UdDvb']))_0x25811c[_0x1fc942(0x65,0xad,0x2d,0x60)+_0x1fc942(0x8a,0xe1,0xa8,0xdf)](_0x49a012['src']);else{_0x5595db['mGDGA'](alert,_0x5595db[_0x1fc942(0x78,0xa4,0xbc,0x2a)]),updateComfyUIImagePreview(null);return;}}const _0x390a7e={};_0x390a7e[_0x1fc942(0x33,0x5a,0x26,0x85)]=_0x1f5d0f(0x428,0x45a,0x40a,0x480),_0x390a7e[_0x1fc942(0x54,0x72,0x81,0x37)]=_0x5d4a5d;const _0x42f6da=await _0x5595db[_0x1fc942(0x89,0x65,0xc0,0x87)](fetch,_0x2cc7d3+('/upload/im'+_0x1f5d0f(0x43f,0x41e,0x420,0x464)),_0x390a7e);if(_0x42f6da['ok']){const _0x389c38=await _0x42f6da['json']();window[_0x1f5d0f(0x44b,0x464,0x42e,0x4be)+'kaotupian']=_0x389c38[_0x1fc942(0x74,0x79,0x2b,0x97)],_0x5595db['jrfLO'](addLog,_0x1f5d0f(0x3dc,0x438,0x470,0x463)+_0x1f5d0f(0x36d,0x3b5,0x3b5,0x3af)+JSON['stringify'](_0x389c38)),console[_0x1f5d0f(0x3e9,0x413,0x40d,0x3e4)](_0x5595db[_0x1fc942(0x1e,0x25,0x26,0x5a)],_0x389c38);}else{const _0x31861c=await _0x42f6da[_0x1f5d0f(0x441,0x459,0x44b,0x485)]();_0x5595db[_0x1f5d0f(0x3f5,0x410,0x40a,0x453)](alert,_0x5595db[_0x1f5d0f(0x3a4,0x3d5,0x3d9,0x3bd)](_0x5595db[_0x1f5d0f(0x4b0,0x45b,0x444,0x484)],_0x31861c)),_0x5595db[_0x1fc942(0x53,0xa6,0x95,0x92)](addLog,_0x1fc942(0x6d,0x7b,0xaf,0x6a)+'详情:\x20'+_0x31861c),console[_0x1fc942(0x4b,0x6c,0x3f,0x76)](_0x1f5d0f(0x3d7,0x414,0x41a,0x432),_0x31861c),updateComfyUIImagePreview(null);}}catch(_0x1ccf44){_0x5595db[_0x1fc942(0x42,0x9b,0x6f,0x82)](alert,_0x5595db['VIJvf'](_0x5595db['iGWsN'],_0x1ccf44[_0x1f5d0f(0x3f4,0x3ea,0x3fb,0x39a)])),console[_0x1fc942(0x4b,0x52,0x6f,0x80)]('图片处理或上传时出错'+':',_0x1ccf44),_0x5595db[_0x1fc942(0x3e,-0xc,0x1b,0x51)](addLog,_0x1fc942(0x6d,0x9e,0x52,0xb3)+_0x1fc942(0x8f,0x41,0xbb,0x8a)+JSON[_0x1f5d0f(0x459,0x43e,0x460,0x3e6)](_0x1ccf44)),updateComfyUIImagePreview(null);}}export function initImageUpload(_0x53c8ca){const _0x33eb77={'WkmBW':_0x4e3d3b(0x340,0x315,0x394,0x359)+'2','RuUmJ':_0x56cc78(0xc6,0xe8,0xaa,0x80),'uorWW':_0x56cc78(0x6d,0x63,0x47,0x64)+_0x4e3d3b(0x35f,0x317,0x31e,0x31f),'JKMlh':_0x4e3d3b(0x2f8,0x2c0,0x31b,0x2b2),'XcebS':_0x4e3d3b(0x372,0x368,0x3be,0x360)+'x','efAgL':function(_0x326364,_0x5f3b8c){return _0x326364===_0x5f3b8c;},'GJhMT':_0x56cc78(-0x1b,0x1d,0xf,0x4a),'gCeXH':_0x56cc78(-0x47,0x4a,0x1,0x7),'TwTLl':function(_0xf8dfc,_0x799056){return _0xf8dfc(_0x799056);},'PnZPS':function(_0x28a46d,_0x26998d){return _0x28a46d(_0x26998d);},'vnacE':function(_0x1c2c2b,_0x3a5d11){return _0x1c2c2b(_0x3a5d11);},'zrOko':_0x4e3d3b(0x335,0x369,0x2dd,0x35b)+'elect-imag'+'e-btn','GEcVH':_0x4e3d3b(0x383,0x398,0x385,0x3ce),'UaRmK':_0x4e3d3b(0x34b,0x301,0x34a,0x3a7)+_0x56cc78(0xb7,0x6d,0x76,0x8a),'wARNZ':_0x4e3d3b(0x310,0x368,0x2be,0x34f)+_0x56cc78(0x61,-0x28,0x30,0x64)+_0x56cc78(0xa8,0x25,0x70,0x8f),'EVxHH':'#imageInpu'+_0x4e3d3b(0x303,0x2f3,0x2c0,0x2f8)+_0x4e3d3b(0x39d,0x37c,0x36a,0x3be),'TvxsO':_0x4e3d3b(0x2f7,0x326,0x2d4,0x2ad),'Bssix':_0x56cc78(-0x1b,0x31,0x17,0x58)+_0x4e3d3b(0x39e,0x3a1,0x3f0,0x385)+_0x4e3d3b(0x3ab,0x3ff,0x3cf,0x384)+'-btn','PADzk':_0x4e3d3b(0x396,0x365,0x3de,0x3d9)+'elect-imag'+_0x4e3d3b(0x369,0x317,0x38d,0x326),'oKTaY':'#imageInpu'+'t2','PXxiG':'#comfyui-r'+'emove-imag'+_0x56cc78(0x51,0x50,0x70,0xc5)};_0x53c8ca[_0x56cc78(0x4,0x31,0x5b,0xaf)](_0x33eb77[_0x56cc78(0xa3,0x91,0x9f,0xa6)])['on'](_0x33eb77[_0x56cc78(-0x1a,0x4b,0x10,-0x22)],()=>{const _0x33ca43={};_0x33ca43[_0xf9a258(-0x26f,-0x2a0,-0x288,-0x26c)]=_0x33eb77[_0x41b9cb(0x48c,0x45e,0x4a5,0x468)];function _0x41b9cb(_0x1dd133,_0x41f41d,_0x4ea9f3,_0x3de947){return _0x4e3d3b(_0x1dd133-0x119,_0x41f41d,_0x4ea9f3-0x106,_0x3de947-0x39);}const _0x4456af=_0x33ca43;function _0xf9a258(_0x2f33c7,_0x2d944d,_0x5548d5,_0x6708ab){return _0x56cc78(_0x2f33c7-0x62,_0x2f33c7,_0x5548d5- -0x2b6,_0x6708ab-0x10f);}_0x33eb77[_0x41b9cb(0x4aa,0x49f,0x4eb,0x4af)]!==_0x41b9cb(0x4bc,0x505,0x4f5,0x501)?_0xb13fa6[_0xf9a258(-0x280,-0x28c,-0x287,-0x2c9)+_0x41b9cb(0x4a9,0x4d5,0x4b1,0x467)](_0x4456af[_0xf9a258(-0x25b,-0x23b,-0x288,-0x2a7)])[_0x41b9cb(0x49c,0x4bd,0x4d5,0x493)]():document[_0xf9a258(-0x25a,-0x2c1,-0x287,-0x25c)+_0xf9a258(-0x251,-0x25b,-0x21f,-0x208)](_0x33eb77[_0x41b9cb(0x461,0x407,0x40a,0x469)])['click']();}),_0x53c8ca[_0x4e3d3b(0x354,0x3ac,0x37c,0x30a)](_0x33eb77[_0x4e3d3b(0x3a5,0x3a1,0x3eb,0x3ab)])['on'](_0x56cc78(-0xc,0x1e,-0x2,0x14),handleNovelaiImageUpload);function _0x4e3d3b(_0x3202f4,_0x17f5b2,_0x281799,_0x5a019a){return _0x3947f6(_0x3202f4-0xe2,_0x17f5b2-0x72,_0x17f5b2,_0x3202f4-0x1ae);}_0x53c8ca[_0x56cc78(0x4a,0x86,0x5b,0xa9)](_0x33eb77[_0x4e3d3b(0x33f,0x33f,0x340,0x326)])['on'](_0x33eb77[_0x56cc78(-0x41,-0x10,0x10,0x40)],()=>{function _0x4b7176(_0x2de874,_0x2c422d,_0x5c16a7,_0x25b3ae){return _0x56cc78(_0x2de874-0x144,_0x25b3ae,_0x2de874- -0x1e4,_0x25b3ae-0x4b);}const _0xaa1106={};function _0x56dd3b(_0x4942ce,_0x419e12,_0x3da2df,_0x20623a){return _0x56cc78(_0x4942ce-0x1b9,_0x3da2df,_0x419e12-0x2ca,_0x20623a-0xdf);}_0xaa1106['DuiUn']=_0x4b7176(-0x141,-0x141,-0xf2,-0x140),_0xaa1106[_0x4b7176(-0x16c,-0x1b5,-0x147,-0x178)]=_0x33eb77[_0x4b7176(-0x1dc,-0x1e9,-0x1bf,-0x1b9)],_0xaa1106['FpaFM']=_0x33eb77[_0x4b7176(-0x1a9,-0x185,-0x1d8,-0x1c1)];const _0x5e72c3=_0xaa1106;if(_0x33eb77[_0x4b7176(-0x1a3,-0x1a0,-0x1e0,-0x16b)](_0x33eb77[_0x56dd3b(0x368,0x326,0x35e,0x35d)],_0x33eb77['gCeXH'])){_0x54ffe5[_0x4b7176(-0x17d,-0x1b1,-0x192,-0x142)]=_0x5c51a9,_0x1d3103[_0x4b7176(-0x17a,-0x148,-0x14e,-0x1c2)][_0x4b7176(-0x180,-0x172,-0x136,-0x1d3)]=_0x5e72c3[_0x4b7176(-0x1b1,-0x194,-0x1bd,-0x1cd)],_0x14221f[_0x56dd3b(0x38e,0x334,0x36b,0x38d)][_0x4b7176(-0x180,-0x19b,-0x1d5,-0x132)]=_0x5e72c3[_0x4b7176(-0x16c,-0x1bf,-0x121,-0x1b0)],_0x455e14[_0x4b7176(-0x17a,-0x1be,-0x13d,-0x13b)][_0x56dd3b(0x384,0x32e,0x31d,0x2fc)]=_0x5e72c3['FpaFM'];const _0x3a504f=_0x4f4276[_0x56dd3b(0x2e1,0x2fb,0x2a8,0x2fd)](','),_0x5cf387=_0x3a504f[0x4*-0x7e+-0x22e5+0x1*0x24dd][_0x56dd3b(0x30f,0x2fb,0x2e2,0x349)](':')[-0xe8c+0x57*-0x2e+-0x1*-0x1e2f][_0x56dd3b(0x2d1,0x2fb,0x2ae,0x2b8)](';')[0x1*0xf07+-0x20e8+0x11e1];_0x475d9d=_0x5cf387,_0x5d4249[_0x56dd3b(0x2e7,0x32f,0x348,0x35e)+_0x4b7176(-0x161,-0x145,-0x15b,-0x122)]=_0x3a504f[-0x1ed3+0x1*0x209+0x1ccb];}else _0x33eb77['TwTLl'](updateNovelaiImagePreview,null);}),_0x53c8ca[_0x56cc78(0x91,0x2d,0x5b,0x5c)](_0x4e3d3b(0x335,0x362,0x31f,0x2f1)+_0x4e3d3b(0x358,0x35c,0x32b,0x314)+'-ref-image'+'-btn')['on'](_0x33eb77[_0x56cc78(0x37,0x52,0x10,0x33)],()=>{function _0x51b28d(_0x44f369,_0x19a9cb,_0xe1c238,_0x3aa8c7){return _0x4e3d3b(_0x3aa8c7- -0x4cd,_0xe1c238,_0xe1c238-0x17a,_0x3aa8c7-0x1a0);}function _0x4a1b6c(_0x238479,_0x247622,_0x1993ea,_0x4e16b8){return _0x4e3d3b(_0x1993ea- -0x86,_0x4e16b8,_0x1993ea-0x16,_0x4e16b8-0x194);}document[_0x4a1b6c(0x2e1,0x2e8,0x2a2,0x27a)+_0x4a1b6c(0x311,0x320,0x30a,0x314)]('imageInput'+_0x4a1b6c(0x2f8,0x27c,0x2ca,0x31c)+_0x51b28d(-0x10d,-0x1ba,-0x121,-0x163))[_0x4a1b6c(0x2e2,0x2b6,0x2fd,0x355)]();});function _0x56cc78(_0x191bfd,_0xd0f28d,_0x42bbd9,_0x40e042){return _0x3947f6(_0x191bfd-0x1b0,_0xd0f28d-0x68,_0xd0f28d,_0x42bbd9- -0x14b);}_0x53c8ca[_0x4e3d3b(0x354,0x379,0x34a,0x36e)](_0x33eb77['EVxHH'])['on'](_0x33eb77[_0x56cc78(-0x1a,-0x4c,-0x6,0x17)],handleNovelaiCharRefImageUpload),_0x53c8ca[_0x56cc78(0xa4,0x7b,0x5b,0x39)](_0x33eb77[_0x4e3d3b(0x2fe,0x2db,0x2cd,0x302)])['on'](_0x33eb77[_0x56cc78(0x2c,-0x44,0x10,-0x1a)],()=>{function _0x1d7192(_0x2ffe32,_0x5e2960,_0x357926,_0x32522c){return _0x56cc78(_0x2ffe32-0x183,_0x357926,_0x5e2960-0x269,_0x32522c-0x139);}_0x33eb77[_0x1d7192(0x2f8,0x2ef,0x34a,0x344)](updateNovelaiCharRefImagePreview,null);}),_0x53c8ca['find'](_0x33eb77['PADzk'])['on'](_0x33eb77['GEcVH'],()=>{function _0x25ad4e(_0x41d4ea,_0x55a01a,_0x4348a8,_0x51d4f9){return _0x56cc78(_0x41d4ea-0x15b,_0x55a01a,_0x4348a8-0x93,_0x51d4f9-0x1e6);}function _0x58d462(_0x18f32d,_0x26e708,_0x5787dd,_0x14be90){return _0x4e3d3b(_0x18f32d- -0x1c3,_0x26e708,_0x5787dd-0xa,_0x14be90-0x8c);}document['getElement'+_0x25ad4e(0x160,0x104,0x12a,0xd8)](_0x33eb77[_0x25ad4e(0x147,0xc4,0x10d,0xf3)])[_0x25ad4e(0x174,0x11b,0x11d,0x158)]();}),_0x53c8ca['find'](_0x33eb77[_0x56cc78(0x6,0x88,0x32,0x3c)])['on'](_0x33eb77[_0x4e3d3b(0x2f3,0x322,0x319,0x2da)],handleImageUpload2),_0x53c8ca['find'](_0x33eb77['PXxiG'])['on'](_0x33eb77[_0x4e3d3b(0x309,0x319,0x327,0x360)],()=>{function _0xf36ae6(_0x1ea3dc,_0x2c2fa1,_0x1e4ca1,_0x521ef0){return _0x4e3d3b(_0x2c2fa1-0x10b,_0x1e4ca1,_0x1e4ca1-0xef,_0x521ef0-0x83);}_0x33eb77[_0xf36ae6(0x3f1,0x427,0x46a,0x47c)](updateComfyUIImagePreview,null);});}function _0x3947f6(_0x2342c6,_0x4fb3a7,_0x257e54,_0x47cf44){return _0x2a45(_0x47cf44-0x78,_0x257e54);}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};
//# sourceMappingURL=http://localhost:8000/image_upload.js.map