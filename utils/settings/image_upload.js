(function(_0x2ecc23,_0x4d300b){const _0x177c0f=_0x2ecc23();function _0x2c22d0(_0xb8201b,_0x5cc4ee,_0x42c003,_0x34f23f){return _0x4511(_0x34f23f- -0x84,_0x42c003);}function _0x203d7e(_0x598a3a,_0x3ff240,_0x849af6,_0x51e09d){return _0x4511(_0x3ff240- -0x38d,_0x51e09d);}while(!![]){try{const _0x55bfe8=parseInt(_0x203d7e(-0x229,-0x22e,-0x1fb,-0x2b8))/(-0x1*-0x44+-0x749+-0x2*-0x383)+-parseInt(_0x203d7e(-0x2a1,-0x226,-0x1e9,-0x2a2))/(0x17c+0x4*0x6e5+-0x1*0x1d0e)+-parseInt(_0x203d7e(-0x20e,-0x206,-0x28f,-0x197))/(-0x1*0xcc9+0x326*0x5+0x3a*-0xd)+parseInt(_0x203d7e(-0x197,-0x157,-0xe6,-0x1c3))/(-0x140d+0x4d*-0x65+0x3272)*(-parseInt(_0x203d7e(-0x1e6,-0x1fe,-0x26d,-0x224))/(0x76+0x96f+0x8*-0x13c))+-parseInt(_0x2c22d0(0x173,0x131,0x1a9,0x1a1))/(-0x1b09+-0x19e+-0x98f*-0x3)+parseInt(_0x203d7e(-0x1e4,-0x204,-0x277,-0x1bc))/(-0x1*0x22dc+-0xfc9*-0x1+0x3d2*0x5)+-parseInt(_0x203d7e(-0x1ed,-0x1d8,-0x1c8,-0x260))/(0x15*-0xc6+0x1e29+0x3*-0x4a1)*(-parseInt(_0x203d7e(-0x154,-0x18b,-0x1f7,-0x1de))/(0x14e5+0x15c*-0x5+0x50*-0x2d));if(_0x55bfe8===_0x4d300b)break;else _0x177c0f['push'](_0x177c0f['shift']());}catch(_0x5be9b5){_0x177c0f['push'](_0x177c0f['shift']());}}}(_0x505e,0x2*0x138de+-0xf2ba2+-0x5732*-0x3d));const _0x1908ab=(function(){const _0x5eee47={'Uobqx':function(_0x168683,_0x5eefd9){return _0x168683(_0x5eefd9);},'FPoHV':_0xf39a90(0xcb,0x115,0x114,0x8d),'ouQML':'TKOWi'};function _0xf39a90(_0xf80121,_0x31ab98,_0x43c136,_0x2c0b32){return _0x4511(_0x31ab98- -0x3b,_0xf80121);}let _0x5f310d=!![];return function(_0x4c719d,_0xb1d922){const _0x3a2897={'tnSTk':function(_0x27e801,_0x331e9b){function _0xfd6604(_0x44a274,_0x15c3b7,_0x514257,_0x14fe23){return _0x4511(_0x15c3b7- -0x3a7,_0x44a274);}return _0x5eee47[_0xfd6604(-0x254,-0x1de,-0x172,-0x200)](_0x27e801,_0x331e9b);},'FRdED':function(_0x2b8ce6){return _0x2b8ce6();},'bTBRc':function(_0x2b444c,_0x2296be){return _0x2b444c!==_0x2296be;},'CEBPw':_0x1c56a6(0x662,0x664,0x675,0x61f),'tnexD':_0x5eee47['FPoHV'],'LxrYN':_0x5eee47[_0x3bce1e(0x39c,0x2f3,0x333,0x387)]},_0x5ed27a=_0x5f310d?function(){function _0x54f574(_0x58cde0,_0x199c95,_0x20d174,_0x5bd828){return _0x1c56a6(_0x58cde0-0x139,_0x20d174,_0x20d174-0x4d,_0x199c95- -0x54e);}function _0x50b46e(_0x53d475,_0xc4d53b,_0x2050a1,_0x31f5f8){return _0x3bce1e(_0x53d475-0xb2,_0xc4d53b,_0x2050a1- -0x2e6,_0x31f5f8-0x18);}if(_0x3a2897[_0x54f574(0x12e,0xd2,0x110,0x6a)](_0x3a2897[_0x54f574(-0x6e,-0x3,0x63,0x5)],_0x3a2897[_0x50b46e(-0x75,-0x25,-0x1b,-0x39)])){if(_0xb1d922){if(_0x3a2897[_0x54f574(0x8e,0xd2,0x5d,0x134)](_0x3a2897['LxrYN'],_0x3a2897[_0x54f574(0x0,0x38,-0x1c,0xc)]))_0x3a2897[_0x50b46e(-0x10,0xd,0x5d,0xd2)](_0x486700,null),_0x14af7d[_0x50b46e(0x55,0x27,0x4,0x67)+'e'](_0x2c6cf0);else{const _0x11666e=_0xb1d922[_0x50b46e(-0x7,0x17,0x33,0x89)](_0x4c719d,arguments);return _0xb1d922=null,_0x11666e;}}}else _0x3a2897['FRdED'](_0x492d74);}:function(){};function _0x3bce1e(_0xb660c7,_0xbd413a,_0x424d5b,_0x188dcb){return _0xf39a90(_0xbd413a,_0x424d5b-0x15d,_0x424d5b-0x163,_0x188dcb-0x65);}function _0x1c56a6(_0xa59d1f,_0x40ff6a,_0x7ebaa5,_0x489e80){return _0xf39a90(_0x40ff6a,_0x489e80-0x408,_0x7ebaa5-0x5d,_0x489e80-0x134);}return _0x5f310d=![],_0x5ed27a;};}()),_0x229b7b=_0x1908ab(this,function(){function _0x3ec52e(_0x402a66,_0x2199d8,_0x52e9e6,_0x2594de){return _0x4511(_0x52e9e6-0x19e,_0x2594de);}const _0x115f08={};function _0x8cbb28(_0x5c4db4,_0x6e6f34,_0x576d0e,_0x4fa3d5){return _0x4511(_0x576d0e-0xfb,_0x6e6f34);}_0x115f08[_0x8cbb28(0x2e3,0x2e1,0x311,0x2c2)]=_0x3ec52e(0x3ea,0x39e,0x362,0x321)+'+$';const _0xda25dc=_0x115f08;return _0x229b7b[_0x8cbb28(0x2f2,0x2dd,0x298,0x2c0)]()['search'](_0xda25dc[_0x3ec52e(0x367,0x35c,0x3b4,0x3c3)])['toString']()[_0x3ec52e(0x3db,0x45c,0x3de,0x3ce)+'r'](_0x229b7b)[_0x3ec52e(0x36f,0x2ec,0x33f,0x304)](_0xda25dc[_0x3ec52e(0x3f1,0x3ac,0x3b4,0x38b)]);});_0x229b7b();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x524245(0x65,0x31,0x72,0xb1)+_0x3b8d2e(0x239,0x15b,0x1e4,0x1c7)+_0x3b8d2e(0x1c2,0x1c4,0x263,0x211)+'age',NAI_CHAR_REF_CACHE_KEY=_0x524245(0x23,0x3b,0x72,0x10)+'lai_char_r'+_0x3b8d2e(0x213,0x232,0x176,0x1e9),COMFYUI_REF_CACHE_KEY=_0x3b8d2e(0x249,0x1f4,0x1de,0x22c)+_0x3b8d2e(0x1f0,0x180,0x1e7,0x1ae)+'age';let nai3VibeTransferImageMimeType='image/png',nai3CharRefImageMimeType=_0x524245(0x36,0x35,0xb,-0x5f),comfyuiImageObjectURL=null;function _0x505e(){const _0x1706da=['DeXsuK4','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','C3rYAw5NAwz5','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','zxjYB3i','i25VDMvSywKTCG','ztOG','BgfPx3zPyMvFDa','lxjLzI1PBwfNzq','C3rVCMvszwfKvW','zKLTywDL','ie5VDMvSquKGvG','C3bSAxq','rK1LBwy','yMXVyG','C3rYAw5N','6k+35ywi6k6+572Uq29TzNLv','ue9tva','BM92zwXHAs1Yzq','q0vcuhC','ywDL','y29TzNL1AwnHBG','AuDWCNm','zwXLy3qTy2HHCG','wvfbzfe','wgrIDK4','DeLgrhy','5zU+54Mh5Ase55cg5AsX6lsLoIa','odi3nta4A0nkt1Hi','qvL5EMG','ndu4otm3nuzzvgjQrq','swTTCKi','zw1VDMuTy2HHCG','zwXLy3qTAw1HzW','BKnsuNy','D0vcyKq','otC4mde1Dev4vMvm','zxnZAw5Nie5VDG','wgjdANi','i25VDMvSywKTCW','rxjYB3iGBg9Hza','zwzFAw1Hz2u','zxiGlNn0lwnOyq','DMHkDey','DNLWExa','wfjZwgO','Bg9N','rufYAeK','BMX5','CMXjv0y','Dg9tDhjPBMC','r0nIyve','lwj0BG','5lIk5lYG5AsX6lsLoIa','C2vHCMnO','i2LTywDLsw5WDq','ie5VDMvSquKGqW','EfbWEg8','Aw5SAw5LlwzSzq','Dxf3zLO','D2fYBG','ignHy2HLihrVia','Dg5LEeq','A2fVDhvWAwfU','yMXVyJO','Bgnqsum','wK5lCNC','rM9xt0i','CMvM','u3f4Chu','wwPIuxe','B25SB2fKzw5K','i2nVBwz5DwKTAq','BMfTzq','nJqXnJK2ANH2s1fP','igzYB20Gy2fJAa','Dxf4AuW','r0nwyLm','thHYwu4','zwHbt1m','Eg9HCuG','CMfUC2zLCL9PBq','y216uLu','seHXug4','EfnVv0y','r3LVDfG','tg9HzgvKienVBq','q3PuDhu','C3jntxe','kcGOlISPkYKRkq','ExLerKK','CML0zq','i25VDMvSywKTyW','C3rVCMvezwXLDa','vw9ICxG','uezODfa','t3bYDuu','EeDPuhi','AunOyLq','BfbQyNy','CMv2B2TLt2jQzq','CgXHy2vOB2XKzq','y2XPy2S','Aw5NignHy2HLza','CL9Yzwy','BxjMvve','BwvZC2fNzq','yxbWzw5K','y2fJAgvFy29TzG','wMHVCwS','vvPeru0','t3fZEKK','DtGTAw1Hz2uTCa','C2vYDMvYrMLSzq','AxbOCfK','EhjLyuO','rLHfDvO','uvrKuMu','wvrnvNa','Bw92zs1PBwfNzq','x25HAv9JAgfYxW','ug1kvgi','vwj2tgW','ANvxDhC','zNLvssbPBwfNzq','qMHXwK8','ANnJr3y','x3jLzG','r3Plswy','ienVBwz5vuKGAq','C3rVCMvszwfKtW','EeP6y0G','rwTRthi','s25nvg8','ihjLlxvWBg9Hza','Aw1Hz2uVCg5N','CMvMlwLTywDLlq','BM9Uzq','zgLZCgXHEq','z2vFBM92zwXHAq','yxbWBhK','wuDKyNK','vvv1DKO','ruvzvuC','q2TvtxG','6zsz6k+V6k+M5OofoG','CvfLve0','yLj2C08','EwfICem','C05Ove8','AuPiswS','mtuZyvfkDK9Z','ExjPtK0','u0jiy1K','zs1IDg4','Aw1Hz2vjBNb1Da','BgfJzwHVBgrLCG','ywDLlxbYzxzPzq','nxWWFdr8mNWZFa','ihrVihvWzgf0zq','5zMO6l+u5zUE5PwW5O2UoIa','Cg1QBMm','ENzQCNC','rLz2rhm','veTTte4','Egzpv0S','B3vrtuW','rereqMi','AgfYlxjLzI1PBq','z0vMrfK','6k+M5OofoIa','vfffrM8','DuXNsfa','DNrHtuu','AwjLigLTywDLoG','l3vWBg9Hzc9PBq','uKjtAxa','yLrmwMG','Dxvqu0e','CMvMigLTywDLoG','yw5ZzMvYsw1HzW','r1rzBKy','Dg5tvgS','y3jLyxrLt2jQzq','vg1Lrum','yMXVy2S','nde1mJa3mLLXCePLsq','z1jWBe0','EvzosMC','Dg9Y','CMvZDwX0','ywDLoG','CxvLCNLtzwXLyW','DgHLig5LDYbMBW','zw1VDMuTAw1HzW','zhnKC2i','qLjXBwy','rLjUu3q','zgf0yq','zxCTy29UDgfPBG','Df9UywLFy2HHCG','t1DYzK8','z2v0rwXLBwvUDa','mtjnDwfSC1y','yu1syuC','zMLUza','i25VDMvSywKTAq','CfHvvLK','zwXbssbPBwfNzq','BMfPm0nOyxjszq','CM1HDc4','ENziz1a','BwfNzs1WCMv2Aq','y29UC3rYDwn0BW','rwPXBwS','DgfYz2v0','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','uvPxwfu','yMD5Bgq','z2uY','B0zZvgS','B3bLBKrc','CLPYzuC','BMfPm1zPyMvuCG','sLrnuwm','uvfXy2q','whrMzgK','DY1JB250ywLUzq','zgf0ytPPBwfNzq','zMXLEa','Dhu4lwLTywDLlq','sxzAA2m','yLrcuMm','Chr2uhm','zwXbssbJAgfYia','v3rxzuK','C3r5Bgu','AwHYu0e','y2fJAgvFBM92zq','tezmAvG','ANPltuO','C3rHCNrZv2L0Aa','qNLjza','rM9NyLK','i2nVBwz5DwKTCW','s09ivwS','ChjLDMLLD0LTyq','D1fwshq','y29TzNL1AvvYBa','uw9NEfq','ufD2vhu','tMfTzq','ALrjt0y','m3W0Fdf8mhWY','rxjYB3iGChjVyW','txzRCKq','qLzyC2O','vvjm','ExvPx3jLzL9PBq','yxqUifbSzwfZzq','Bw92zs1JAgfYlq','zMLSzxm','y2HHBMDL','x25VDMvSywK','mtm1nZm0q21rAM5O','ssbbueNLNldLNydJGii','CIaUC3qTy2HHDa','ANDPy2K','nhWXFdj8m3WW','yNrU','vuNLM77NIyC6ia','y3rvuKW','mtq1mZCYqMr4t3Dv','z1fRu1q','D2LtAKm','C3jJ'];_0x505e=function(){return _0x1706da;};return _0x505e();}function updateNovelaiImagePreview(_0xc35219){const _0x3652b9={};function _0x2b274e(_0xcf71ed,_0x33055f,_0x48583d,_0xb57516){return _0x3b8d2e(_0xb57516,_0x33055f-0x1d4,_0x48583d-0x1d2,_0x33055f-0x107);}_0x3652b9[_0x2b274e(0x2c2,0x2f3,0x2fe,0x273)]=_0x2b274e(0x3cd,0x395,0x39c,0x3d2)+'mage-previ'+_0x2b6367(0x87,0xa7,0xa9,0x50)+_0x2b274e(0x28e,0x2f1,0x2f7,0x2fe)+_0x2b274e(0x3d3,0x3ad,0x349,0x391)+_0x2b6367(0x49,0x95,0x47,-0x43)+'r',_0x3652b9[_0x2b6367(-0x45,0x50,0x39,0x33)]=_0x2b274e(0x321,0x2d9,0x25e,0x319)+_0x2b6367(0xba,0x95,0x59,-0x12)+_0x2b274e(0x367,0x2fb,0x2cf,0x337),_0x3652b9[_0x2b6367(0x6a,0x4d,0xb1,0x11d)]='data:image',_0x3652b9[_0x2b6367(-0x21,0x9f,0x45,0x7f)]=_0x2b6367(0x47,0x7e,0x9b,0x7e),_0x3652b9[_0x2b274e(0x3cd,0x379,0x38f,0x33a)]=_0x2b6367(0x4f,0xb0,0x6b,-0x4),_0x3652b9[_0x2b6367(0x1e,-0xd,-0x5,-0x4)]=_0x2b274e(0x30c,0x301,0x356,0x314)+'x';const _0x490a9b=_0x3652b9,_0x50a5e4=document['getElement'+_0x2b274e(0x3bf,0x3b9,0x3b8,0x380)]('previewIma'+_0x2b274e(0x2ca,0x352,0x2da,0x2e1)),_0x5968ba=document[_0x2b6367(0x1b,0x23,0xa2,0x97)+_0x2b6367(0x7c,0x101,0x9f,0x22)](_0x490a9b['vypyp']);function _0x2b6367(_0x21858e,_0x5b850c,_0x1e52e9,_0x2489fd){return _0x3b8d2e(_0x2489fd,_0x5b850c-0x1d8,_0x1e52e9-0x24,_0x1e52e9- -0x1de);}const _0x1e7a4a=document[_0x2b274e(0x3d3,0x391,0x39b,0x33b)+_0x2b274e(0x390,0x3b9,0x426,0x422)](_0x490a9b[_0x2b6367(-0x22,0x19,0x39,0x46)]);if(_0xc35219&&_0xc35219[_0x2b274e(0x3c2,0x3b8,0x3cc,0x356)](_0x490a9b[_0x2b274e(0x3a2,0x396,0x3a4,0x3a1)])){_0x50a5e4[_0x2b274e(0x2f1,0x2c6,0x275,0x263)]=_0xc35219,_0x50a5e4[_0x2b6367(0x117,0xae,0xce,0xdc)][_0x2b6367(0xa,0x1d,0x6c,0x43)]=_0x490a9b[_0x2b274e(0x3b3,0x32a,0x335,0x354)],_0x5968ba[_0x2b274e(0x3e5,0x3b3,0x397,0x40a)]['display']=_0x490a9b[_0x2b274e(0x3ac,0x379,0x300,0x2fa)],_0x1e7a4a[_0x2b274e(0x411,0x3b3,0x3a4,0x3e8)][_0x2b6367(0x4e,0x6a,0x6c,0x7a)]=_0x490a9b['XdbvN'];const _0x2f275e=_0xc35219[_0x2b6367(0x70,0x28,-0x12,0x4c)](','),_0x28832c=_0x2f275e[-0x8f9*-0x1+0x100d+-0x2*0xc83][_0x2b274e(0x2a8,0x2d3,0x261,0x2a4)](':')[0xe95+-0x1*-0x77e+-0x1612][_0x2b6367(0x18,-0x6f,-0x12,-0x56)](';')[0x6d3*-0x2+0x242b+-0x1*0x1685];nai3VibeTransferImageMimeType=_0x28832c,window[_0x2b6367(0xec,0x146,0xc1,0xe5)+_0x2b274e(0x2f5,0x37b,0x310,0x3ed)+'e']=_0x2f275e[-0x21e6*-0x1+0x2553+0xd4*-0x56];const _0x26901c={};_0x26901c['id']=NAI_VIBE_CACHE_KEY,_0x26901c['data']=_0xc35219,dbs['storeReadW'+_0x2b274e(0x3ac,0x322,0x2a0,0x3ab)](_0x26901c);}else _0x50a5e4[_0x2b274e(0x2e8,0x2c6,0x31d,0x29c)]='',_0x50a5e4[_0x2b274e(0x3ed,0x3b3,0x3e1,0x3b8)]['display']=_0x2b274e(0x3b8,0x350,0x310,0x2cd),_0x5968ba[_0x2b6367(0x79,0x47,0xce,0x10b)][_0x2b6367(0xb0,0xec,0x6c,0x32)]=_0x2b6367(0xe3,0x9a,0xc7,0x119),_0x1e7a4a[_0x2b274e(0x344,0x3b3,0x344,0x38d)]['display']=_0x490a9b['uuPSA'],window[_0x2b6367(0x61,0x3a,0xc1,0x3a)+'ansferImag'+'e']=null;}function removeNovelaiImage(){const _0x52030f={'IkmrB':function(_0x5647bc,_0x8ed723){return _0x5647bc(_0x8ed723);}};_0x52030f[_0x300dc7(0x57,0xd4,0xd3,0x78)](updateNovelaiImagePreview,null);function _0x300dc7(_0x274cb6,_0x14d6b6,_0x5852e4,_0xa75c3f){return _0x524245(_0x274cb6-0x194,_0x14d6b6-0x11f,_0xa75c3f-0xd5,_0x14d6b6);}function _0x14be46(_0x820d04,_0x424800,_0x3dc280,_0x2e4120){return _0x524245(_0x820d04-0x1a2,_0x424800-0xee,_0x424800-0xb5,_0x820d04);}dbs[_0x14be46(0x33,0x96,0x8b,0xf3)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x401235){const _0x4eacc4={'jzKMJ':function(_0x1eda85,_0x3abd86,_0x21ea08){return _0x1eda85(_0x3abd86,_0x21ea08);},'iphpY':function(_0x3bb092,_0xc06a4c){return _0x3bb092(_0xc06a4c);},'qoTeE':_0x222546(0xff,0x83,0x60,0x50)+_0x357559(-0x6d,-0xdc,-0x8d,-0xe8)+'elAI\x20image'+':','gEfDY':function(_0x113340,_0x3e83c6){return _0x113340+_0x3e83c6;},'ZBLWF':_0x222546(0x37,0xb4,0x12b,0xf9)},_0xa20a60=_0x401235[_0x222546(0x1b6,0x170,0x18d,0x129)][_0x222546(0x7d,0x8a,0x8b,0x77)][0x2323+-0x1d5+-0x4c2*0x7];function _0x357559(_0x4561c4,_0x13883d,_0x5a370f,_0x18a003){return _0x524245(_0x4561c4-0x17,_0x13883d-0x8e,_0x5a370f- -0x36,_0x4561c4);}function _0x222546(_0x2ce832,_0x342044,_0xe78377,_0x2495f6){return _0x524245(_0x2ce832-0x4d,_0x342044-0x10,_0x342044-0x115,_0xe78377);}if(!_0xa20a60)return;try{const _0x3e4e14=await _0x4eacc4[_0x357559(0x11,0x75,0x3e,0x60)](processUploadedImage,_0xa20a60,!![]);_0x4eacc4[_0x357559(0x37,-0x9e,-0x40,-0x1)](updateNovelaiImagePreview,_0x3e4e14);}catch(_0x300e0b){console[_0x357559(-0xb8,-0xa1,-0xae,-0x93)](_0x4eacc4['qoTeE'],_0x300e0b),_0x4eacc4['iphpY'](alert,_0x4eacc4[_0x357559(-0x67,-0x86,-0x9,-0x33)](_0x4eacc4['ZBLWF'],_0x300e0b[_0x222546(0xe1,0x103,0x15e,0x84)]));}}function _0x524245(_0x46ac45,_0x1aa1be,_0x2ef949,_0x6885e1){return _0x4511(_0x2ef949- -0x1e7,_0x6885e1);}function updateNovelaiCharRefImagePreview(_0x527658){const _0x536620={};_0x536620[_0x522b11(0x2a7,0x233,0x2ad,0x321)]='imageInput'+_0x522b11(0x274,0x280,0x2ce,0x287),_0x536620['YTMVp']=_0x207328(-0x1ab,-0x172,-0x12f,-0xee)+_0x207328(-0x12e,-0x126,-0xe3,-0x104)+_0x522b11(0x31e,0x33d,0x326,0x2f2)+_0x207328(-0xe9,-0xeb,-0x81,-0x144)+_0x522b11(0x277,0x240,0x2e7,0x21d)+_0x522b11(0x2f1,0x294,0x2bc,0x36c)+_0x207328(-0x127,-0x132,-0x18c,-0x124),_0x536620['cLeYb']=_0x207328(-0x142,-0xea,-0x10c,-0x142),_0x536620[_0x207328(-0x59,-0xe1,-0xcd,-0x12d)]=function(_0x27f0a6,_0x5bfe5a){return _0x27f0a6===_0x5bfe5a;};function _0x522b11(_0x123f78,_0x4f9569,_0x49656f,_0x3a8ae2){return _0x524245(_0x123f78-0xd5,_0x4f9569-0x1b7,_0x123f78-0x2fd,_0x49656f);}_0x536620['UUuvJ']='DGWPL';function _0x207328(_0x12dfdc,_0x51c985,_0x1f7e70,_0x44f70b){return _0x3b8d2e(_0x12dfdc,_0x51c985-0xd4,_0x1f7e70-0x116,_0x51c985- -0x38e);}_0x536620['wiSjC']='block',_0x536620[_0x207328(-0x1e1,-0x16d,-0x1db,-0xea)]=_0x207328(-0x116,-0x145,-0x101,-0x17f),_0x536620['xreaJ']='JAcrI',_0x536620['sNhTO']=_0x522b11(0x26a,0x21f,0x288,0x1e3),_0x536620['cfAcp']=_0x207328(-0x156,-0xe9,-0x67,-0x15f);const _0x523957=_0x536620,_0x132754=document[_0x522b11(0x34b,0x3d0,0x3c0,0x376)+_0x522b11(0x373,0x37a,0x2ef,0x3a6)](_0x207328(-0x10f,-0xd8,-0x6a,-0xbd)+'ge_nai_cha'+_0x522b11(0x2e9,0x2f7,0x2d2,0x2e0)),_0x48235d=document[_0x207328(-0x189,-0x10e,-0x16b,-0xc3)+'tor'](_0x523957[_0x207328(-0x19a,-0x158,-0x198,-0x167)]),_0x4e45b6=document[_0x522b11(0x34b,0x39a,0x305,0x354)+'ById'](_0x522b11(0x293,0x21d,0x278,0x2a1)+_0x522b11(0x271,0x21e,0x26a,0x224)+_0x207328(-0x163,-0x146,-0x12b,-0x1bc)+_0x207328(-0x241,-0x1d5,-0x243,-0x1c9));if(_0x527658&&_0x527658[_0x207328(-0xfb,-0xdd,-0x8c,-0xe5)](_0x523957['cLeYb'])){if(_0x523957[_0x207328(-0x91,-0xe1,-0x150,-0xd0)]('DGWPL',_0x523957[_0x207328(-0xc3,-0x140,-0x15d,-0xe3)])){_0x132754[_0x207328(-0x155,-0x1cf,-0x159,-0x16d)]=_0x527658,_0x132754[_0x522b11(0x36d,0x2fe,0x327,0x3e7)]['display']=_0x523957[_0x522b11(0x27f,0x262,0x1f6,0x2f9)],_0x48235d[_0x207328(-0x138,-0xe2,-0x11a,-0x113)][_0x522b11(0x30b,0x365,0x394,0x2aa)]=_0x523957[_0x522b11(0x2e2,0x2a9,0x2f1,0x321)],_0x4e45b6[_0x207328(-0x113,-0xe2,-0x91,-0xa0)][_0x522b11(0x30b,0x347,0x32f,0x2a4)]=_0x522b11(0x2bb,0x252,0x2fb,0x332)+'x';const _0xc419e9=_0x527658[_0x522b11(0x28d,0x314,0x26a,0x22d)](','),_0x3d264d=_0xc419e9[-0x1*-0x30a+0x22c0+-0x25ca][_0x522b11(0x28d,0x2fb,0x20f,0x2df)](':')[-0x157c+-0x2066+0x35e3][_0x207328(-0x168,-0x1c2,-0x186,-0x1da)](';')[-0xbb*0x35+0x1a07+-0x38*-0x3a];nai3CharRefImageMimeType=_0x3d264d,window['nai3CharRe'+_0x207328(-0x1b5,-0x1c4,-0x19c,-0x1f6)]=_0xc419e9[-0x5e*-0x31+0x1591+-0x13c7*0x2];const _0x3d5451={};_0x3d5451['id']=NAI_CHAR_REF_CACHE_KEY,_0x3d5451[_0x207328(-0x99,-0x108,-0x102,-0x14e)]=_0x527658,dbs['storeReadW'+_0x522b11(0x2dc,0x264,0x343,0x352)](_0x3d5451);}else _0x3e38f8();}else{if(_0x523957['xreaJ']!==_0x523957[_0x207328(-0x1e4,-0x15b,-0xe4,-0x10a)])_0x339d53[_0x207328(-0x126,-0x104,-0xeb,-0x131)+_0x522b11(0x373,0x39c,0x370,0x377)](_0x523957['XbCjr'])[_0x522b11(0x2e7,0x335,0x2fd,0x32c)]();else{const _0x1e3d6d=_0x523957[_0x522b11(0x316,0x2dd,0x29c,0x330)][_0x207328(-0x23c,-0x1c2,-0x147,-0x21b)]('|');let _0x29df57=0x3c1+0x6ad*-0x3+-0x823*-0x2;while(!![]){switch(_0x1e3d6d[_0x29df57++]){case'0':_0x4e45b6[_0x522b11(0x36d,0x3a5,0x39f,0x3cd)][_0x207328(-0x16b,-0x144,-0xcd,-0x18e)]=_0x523957['xGiPr'];continue;case'1':_0x48235d[_0x207328(-0x157,-0xe2,-0x120,-0x8f)]['display']=_0x523957['cfAcp'];continue;case'2':window[_0x207328(-0x8e,-0xfd,-0x148,-0x132)+'fImage']=null;continue;case'3':_0x132754[_0x207328(-0x1f1,-0x1cf,-0x21d,-0x193)]='';continue;case'4':_0x132754[_0x207328(-0x99,-0xe2,-0x12b,-0xc1)]['display']=_0x523957[_0x522b11(0x2e2,0x2ce,0x2cf,0x34d)];continue;}break;}}}}function removeNovelaiCharRefImage(){const _0xd497b1={'jqeEJ':function(_0x3731eb,_0x2a7223){return _0x3731eb(_0x2a7223);}};_0xd497b1['jqeEJ'](updateNovelaiCharRefImagePreview,null);function _0x1eb286(_0x219398,_0x52f446,_0x1648b0,_0x521b86){return _0x3b8d2e(_0x521b86,_0x52f446-0x61,_0x1648b0-0x195,_0x219398-0x2f9);}dbs[_0x1eb286(0x516,0x590,0x4c4,0x501)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0xf01bef){const _0x1519fa={'RBSip':function(_0x2e7b70,_0x4e6f51){return _0x2e7b70(_0x4e6f51);},'qQeTM':_0x20dc42(0x2bd,0x33c,0x2d8,0x32c)+_0x2a05d3(0x1e,0x62,0x7f,0x54)+_0x20dc42(0x394,0x460,0x3d8,0x458)+_0x2a05d3(0x16e,0xee,0x10d,0x171),'FJzrB':function(_0x486db2,_0x106393){return _0x486db2+_0x106393;}};function _0x20dc42(_0x4d5b4a,_0x2125e7,_0x14adff,_0x1e1d89){return _0x524245(_0x4d5b4a-0x1a,_0x2125e7-0x190,_0x14adff-0x36a,_0x2125e7);}const _0x153e51=_0xf01bef['target']['files'][-0x5aa+0xc8c+-0x6e2];if(!_0x153e51)return;function _0x2a05d3(_0x1c9815,_0x237fed,_0x4a2dc1,_0x111722){return _0x524245(_0x1c9815-0x1cb,_0x237fed-0x181,_0x4a2dc1-0xd6,_0x1c9815);}try{const _0xc2334b=await _0x1519fa[_0x2a05d3(0xef,0x188,0x10a,0x12e)](processUploadedImage,_0x153e51);updateNovelaiCharRefImagePreview(_0xc2334b);}catch(_0x393406){console[_0x2a05d3(0x31,0xab,0x5e,0xb1)](_0x1519fa[_0x2a05d3(0x169,0xfb,0xec,0x16e)],_0x393406),_0x1519fa['RBSip'](alert,_0x1519fa['FJzrB'](_0x20dc42(0x2e7,0x280,0x309,0x392),_0x393406['message']));}}function _0x4511(_0x2c26cd,_0x349818){_0x2c26cd=_0x2c26cd-(-0x217c+0x70d+0x1bbe);const _0x5a9ad2=_0x505e();let _0x17cdb9=_0x5a9ad2[_0x2c26cd];if(_0x4511['eHINsk']===undefined){var _0x5ad6f4=function(_0x38de6e){const _0x136f95='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2ed466='',_0x2a4e0c='',_0x56a065=_0x2ed466+_0x5ad6f4;for(let _0x57d8d9=0x3*0x8ed+0x1185+-0x2c4c,_0x19318a,_0x5937c6,_0x50a836=-0xf21+-0x155b+0x247c;_0x5937c6=_0x38de6e['charAt'](_0x50a836++);~_0x5937c6&&(_0x19318a=_0x57d8d9%(-0x8*-0x107+0x23c7+-0x2bfb)?_0x19318a*(0x2*-0x1107+0x19eb+0x863)+_0x5937c6:_0x5937c6,_0x57d8d9++%(0x508+-0x198d+0x1489))?_0x2ed466+=_0x56a065['charCodeAt'](_0x50a836+(-0x5*0x4b7+-0x2573+0x3d10))-(0x194a+-0x44f*0x5+-0x3b5)!==0x5ef*-0x5+0x1337+0xa74?String['fromCharCode'](0x211c+-0x137*0x5+-0x42*0x65&_0x19318a>>(-(0x2178+0x207d+-0x41f3)*_0x57d8d9&0x64f*-0x2+-0x89*-0xa+0x74a)):_0x57d8d9:-0xa3+0x2580+0x24dd*-0x1){_0x5937c6=_0x136f95['indexOf'](_0x5937c6);}for(let _0x5b359e=0x1c28+-0x482+-0x17a6,_0x265e9d=_0x2ed466['length'];_0x5b359e<_0x265e9d;_0x5b359e++){_0x2a4e0c+='%'+('00'+_0x2ed466['charCodeAt'](_0x5b359e)['toString'](-0x5*-0x23+-0x1*-0xe57+-0xef6))['slice'](-(-0x306*-0x9+0xed4+-0x5*0x868));}return decodeURIComponent(_0x2a4e0c);};_0x4511['hcLnlr']=_0x5ad6f4,_0x4511['FAufLR']={},_0x4511['eHINsk']=!![];}const _0x5214b6=_0x5a9ad2[0x1d*-0x91+-0x219d+0x320a],_0x5050a5=_0x2c26cd+_0x5214b6,_0x41085b=_0x4511['FAufLR'][_0x5050a5];if(!_0x41085b){const _0x1c6e06=function(_0x311819){this['HQfrjh']=_0x311819,this['hrQHCd']=[-0xfc3+-0x4*-0x731+-0x4*0x340,0xbe6+0x2040+-0x2c26,-0x29*0xef+0x62b*-0x1+0x2c72*0x1],this['iYnHZF']=function(){return'newState';},this['kdDMYL']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['yepurL']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1c6e06['prototype']['IKLhpq']=function(){const _0xf1e21c=new RegExp(this['kdDMYL']+this['yepurL']),_0x5497e9=_0xf1e21c['test'](this['iYnHZF']['toString']())?--this['hrQHCd'][-0x1394+-0x22+-0x31*-0x67]:--this['hrQHCd'][-0x36+-0x2*-0x1097+-0x34c*0xa];return this['SNiVzs'](_0x5497e9);},_0x1c6e06['prototype']['SNiVzs']=function(_0x5bb0f6){if(!Boolean(~_0x5bb0f6))return _0x5bb0f6;return this['TlcLbU'](this['HQfrjh']);},_0x1c6e06['prototype']['TlcLbU']=function(_0x5621b3){for(let _0x550ef9=-0x63a+0x566+0xd4,_0x4e3b34=this['hrQHCd']['length'];_0x550ef9<_0x4e3b34;_0x550ef9++){this['hrQHCd']['push'](Math['round'](Math['random']())),_0x4e3b34=this['hrQHCd']['length'];}return _0x5621b3(this['hrQHCd'][-0x19c9+-0x1f9a*-0x1+-0x5d1]);},new _0x1c6e06(_0x4511)['IKLhpq'](),_0x17cdb9=_0x4511['hcLnlr'](_0x17cdb9),_0x4511['FAufLR'][_0x5050a5]=_0x17cdb9;}else _0x17cdb9=_0x41085b;return _0x17cdb9;}function _0x3b8d2e(_0x3ec067,_0x326800,_0x31c8f0,_0x569f74){return _0x4511(_0x569f74-0x55,_0x3ec067);}function updateComfyUIImagePreview(_0x1d4bac){const _0x2f4289={'EArhI':function(_0x18d578,_0x5ce8fb){return _0x18d578(_0x5ce8fb);},'dsdsb':_0x7e834f(0x49d,0x453,0x497,0x4d1)+_0x7e834f(0x400,0x477,0x47c,0x419),'qKuWR':_0x1e4d1c(0x14d,0x1a4,0x178,0x1b6)+_0x7e834f(0x465,0x4fc,0x475,0x45f)+_0x7e834f(0x4e7,0x460,0x468,0x418)+'er\x20.st-cha'+'tu8-image-'+_0x1e4d1c(0x1e1,0x1bc,0x215,0x1d3)+'r','QZWXU':'comfyui-re'+_0x7e834f(0x40a,0x492,0x418,0x399)+'-btn','zvHgP':_0x1e4d1c(0x14b,0x1d4,0x230,0x1ae),'lcPIC':function(_0x4138e1,_0x2ee836){return _0x4138e1!==_0x2ee836;},'TKmLN':function(_0x3d9fb,_0xac2e53){return _0x3d9fb!==_0xac2e53;},'LxknI':_0x7e834f(0x4a2,0x3c9,0x434,0x463),'tIFDv':_0x1e4d1c(0x1b5,0x1d3,0x1ac,0x1be),'YQAdQ':_0x7e834f(0x3f7,0x45e,0x45a,0x41b),'vtaME':_0x7e834f(0x3d4,0x488,0x42a,0x3e9),'ZNKrw':_0x1e4d1c(0x1b2,0x15c,0x1e0,0x1a8)+'x','PFhtP':_0x1e4d1c(0x2c8,0x1fa,0x218,0x253)},_0xfab76e=document['getElement'+_0x7e834f(0x4cd,0x4d7,0x493,0x455)](_0x2f4289[_0x1e4d1c(0x261,0x22b,0x2af,0x231)]),_0x1c22db=document[_0x1e4d1c(0x2a9,0x260,0x1e3,0x22e)+_0x1e4d1c(0x224,0x22d,0x1c4,0x22b)](_0x2f4289['qKuWR']),_0x4c1d92=document[_0x1e4d1c(0x204,0x244,0x1e0,0x238)+_0x7e834f(0x414,0x4ec,0x493,0x46d)](_0x2f4289[_0x7e834f(0x462,0x499,0x47a,0x40a)]);function _0x7e834f(_0x2907f6,_0x25bddf,_0x23b5b7,_0xcdc274){return _0x3b8d2e(_0x25bddf,_0x25bddf-0xd3,_0x23b5b7-0x1c5,_0x23b5b7-0x1e1);}function _0x1e4d1c(_0x5032a1,_0x272334,_0x53911b,_0x14b79b){return _0x524245(_0x5032a1-0x1e,_0x272334-0x27,_0x14b79b-0x1ea,_0x272334);}_0xfab76e[_0x7e834f(0x389,0x394,0x3a0,0x34b)]&&_0xfab76e[_0x7e834f(0x35d,0x316,0x3a0,0x3d8)][_0x1e4d1c(0x2a1,0x2a3,0x1d8,0x25f)](_0x2f4289[_0x1e4d1c(0x268,0x231,0x28a,0x241)])&&_0x2f4289[_0x1e4d1c(0x16d,0x12c,0x139,0x1af)](_0xfab76e[_0x1e4d1c(0x1b8,0x1b6,0x11f,0x16d)],_0x1d4bac)&&(_0x2f4289[_0x7e834f(0x4b0,0x45b,0x445,0x4ad)](_0x2f4289['LxknI'],_0x2f4289[_0x7e834f(0x3ec,0x3dd,0x3bb,0x36c)])?URL['revokeObje'+_0x7e834f(0x33d,0x384,0x39c,0x415)](_0xfab76e[_0x1e4d1c(0xe4,0x111,0x10e,0x16d)]):(_0x2f4289[_0x7e834f(0x42f,0x393,0x3d0,0x36a)](_0x114142,null),_0x28173f[_0x1e4d1c(0x174,0x182,0x158,0x1cb)+'e'](_0x3646ee))),_0x1d4bac?(_0xfab76e[_0x1e4d1c(0xf0,0x192,0x103,0x16d)]=_0x1d4bac,_0xfab76e['style'][_0x7e834f(0x41c,0x405,0x42b,0x3f4)]=_0x2f4289[_0x1e4d1c(0x201,0x120,0x1bd,0x186)],_0x1c22db[_0x1e4d1c(0x2c6,0x2b3,0x2d6,0x25a)][_0x1e4d1c(0x180,0x195,0x264,0x1f8)]=_0x2f4289[_0x7e834f(0x42e,0x457,0x44e,0x415)],_0x4c1d92['style'][_0x1e4d1c(0x21a,0x252,0x1b9,0x1f8)]=_0x2f4289[_0x1e4d1c(0x179,0x18b,0x1fc,0x1b0)]):(_0xfab76e['src']='',_0xfab76e[_0x1e4d1c(0x1db,0x248,0x1ea,0x25a)]['display']=_0x1e4d1c(0x18f,0x174,0x226,0x1f7),_0x1c22db[_0x7e834f(0x425,0x488,0x48d,0x4c6)]['display']=_0x2f4289[_0x1e4d1c(0x1f6,0x1ca,0x228,0x1cd)],_0x4c1d92[_0x1e4d1c(0x213,0x23e,0x292,0x25a)][_0x1e4d1c(0x260,0x196,0x1ac,0x1f8)]=_0x2f4289[_0x7e834f(0x4c5,0x495,0x44e,0x485)],window[_0x1e4d1c(0x13e,0x195,0x158,0x183)+_0x1e4d1c(0x1ec,0x213,0x22a,0x1ad)]=null,comfyuiImageObjectURL=null);}function removeComfyUIImage(){function _0x38985b(_0x3a9e0e,_0x589304,_0x1990a4,_0x1cd1de){return _0x524245(_0x3a9e0e-0x1a8,_0x589304-0x1e1,_0x1cd1de-0x387,_0x1990a4);}const _0x18f6c0={'GCVbS':function(_0x2fa085,_0x3665db){return _0x2fa085(_0x3665db);}};_0x18f6c0[_0x38985b(0x36f,0x2ce,0x3a0,0x358)](updateComfyUIImagePreview,null);function _0x3f78dc(_0x263721,_0x4deb54,_0x42dcd9,_0x183862){return _0x524245(_0x263721-0x1d9,_0x4deb54-0x13a,_0x4deb54-0x4f1,_0x263721);}dbs[_0x38985b(0x3ab,0x33c,0x2fd,0x368)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x2cd83a){const _0x3e80df={'YGdby':'block','yriNM':_0x476baf(-0x179,-0x1a1,-0x152,-0x10b)+'x','mrfUQ':_0x2ef73c(0xd,0x75,0x3,-0x2d),'EkkLr':'flex','bTLZh':_0x2ef73c(0x9e,0xb4,0xff,0xe4),'FMemf':_0x476baf(-0x173,-0x13f,-0x11c,-0x1e7),'iMwmX':function(_0x3417ce,_0x20f0e7){return _0x3417ce!==_0x20f0e7;},'UbvLl':function(_0x4e8268,_0x235c5b){return _0x4e8268===_0x235c5b;},'ptvPs':_0x476baf(-0x18b,-0x19a,-0x1f5,-0x1f9)+'ing\x20cached'+_0x476baf(-0x1a8,-0x211,-0x1dc,-0x160)+'ibe\x20image:','GzKIf':function(_0x89cb2f,_0x516740){return _0x89cb2f(_0x516740);},'OpruE':function(_0x53e219,_0x8b4917){return _0x53e219(_0x8b4917);},'aMRaG':'image','FVvDs':'ObXyk','pmjnc':_0x2ef73c(0x0,0x75,-0x71,-0x33),'GCbaQ':function(_0x512d28){return _0x512d28();},'jTIOF':function(_0x52bca0,_0x315cf6,_0x1ceb08){return _0x52bca0(_0x315cf6,_0x1ceb08);},'iGprs':_0x2ef73c(0x26,-0x13,0x7c,0x45),'GyotX':_0x476baf(-0xd1,-0x14c,-0xf9,-0x108),'srMMq':_0x476baf(-0xc0,-0x143,-0x5b,-0xf2),'HsjMW':_0x476baf(-0x1b0,-0x1a9,-0x13b,-0x1eb)+'回数据:','QTdRe':_0x476baf(-0x190,-0x1d3,-0x15d,-0x1e4),'CkUMx':function(_0x2db3d4,_0x22dc30){return _0x2db3d4+_0x22dc30;},'FoWOB':function(_0x5e0705,_0x284f7c){return _0x5e0705(_0x284f7c);},'xfOWK':_0x2ef73c(0xa6,0x8e,0x72,0xb3),'uqwfZ':function(_0x183b48){return _0x183b48();},'iMAJC':function(_0x35d20b,_0x3ba6f0){return _0x35d20b+_0x3ba6f0;},'rZreG':_0x476baf(-0x1b2,-0x1e9,-0x22b,-0x12d)+':\x20','lvCcE':_0x476baf(-0x1b2,-0x1d0,-0x185,-0x223)+':'},_0x5c5f2c=extension_settings[extensionName],_0x3a4f7e=_0x2cd83a['target'][_0x2ef73c(0x6,-0x3a,-0x51,-0x7a)][-0x15e3+-0xeec+-0x24cf*-0x1];if(!_0x3a4f7e)return;function _0x476baf(_0x309c2f,_0x52c195,_0x300538,_0x362f5d){return _0x524245(_0x309c2f-0x3d,_0x52c195-0x8f,_0x309c2f- -0x137,_0x52c195);}function _0x2ef73c(_0x4eaff9,_0x10597f,_0x3bf64a,_0x2a49dd){return _0x3b8d2e(_0x2a49dd,_0x10597f-0x119,_0x3bf64a-0x2c,_0x4eaff9- -0x1ab);}try{const _0x5885a0=await _0x3e80df[_0x476baf(-0x133,-0x15e,-0x18b,-0x1a6)](processUploadedImageToBlob,_0x3a4f7e),_0x44a4dc=URL[_0x476baf(-0xfc,-0xc8,-0x128,-0xdf)+'ctURL'](_0x5885a0);comfyuiImageObjectURL=_0x44a4dc,_0x3e80df[_0x476baf(-0x153,-0x144,-0xee,-0x105)](updateComfyUIImagePreview,_0x44a4dc);const _0x376747=new FormData();_0x376747[_0x2ef73c(0x80,0xce,0x2d,0xa8)](_0x3e80df[_0x2ef73c(0xe1,0xdb,0xd9,0x121)],_0x5885a0,_0x3a4f7e[_0x476baf(-0x16a,-0x19d,-0x1d9,-0x1d0)]);let _0x5832ff=_0x5c5f2c[_0x476baf(-0x1cf,-0x1b0,-0x215,-0x1c9)]['trim']();if(!_0x5832ff){if(_0x3e80df['UbvLl'](_0x3e80df[_0x476baf(-0x110,-0x10b,-0x158,-0x131)],_0x3e80df[_0x476baf(-0x112,-0xbe,-0xa5,-0xa4)])){_0x1570ef['src']=_0x2d937b,_0x2a9116['style'][_0x476baf(-0x129,-0x1a5,-0xbe,-0xb8)]=_0x3e80df[_0x2ef73c(0xa2,0x39,0xdf,0x2e)],_0x474158[_0x476baf(-0xc7,-0x94,-0x5f,-0x13b)][_0x2ef73c(0x9f,0x31,0x108,0x83)]=_0x2ef73c(0x9e,0xc7,0x4e,0x4b),_0x411172['style'][_0x476baf(-0x129,-0xab,-0x14f,-0xfd)]=_0x3e80df[_0x476baf(-0x11b,-0x1a2,-0xe8,-0x186)];const _0x4396b0=_0x434437[_0x2ef73c(0x21,0x7a,0x38,0x8e)](','),_0x38e59c=_0x4396b0[0x1*0x25a2+0x1*-0x167e+0x50c*-0x3]['split'](':')[0x1*0x1646+-0x2169*0x1+0x7c*0x17][_0x476baf(-0x1a7,-0x20d,-0x175,-0x1a7)](';')[-0xb*-0x185+0x1*0x1b7d+-0x2c34];_0x5e175d=_0x38e59c,_0x242a41[_0x476baf(-0xe2,-0xff,-0xea,-0x10b)+_0x2ef73c(0x1f,-0x39,-0x23,-0x69)]=_0x4396b0[-0xa0c+-0x83b*-0x3+-0xea4];const _0x4a99e0={};_0x4a99e0['id']=_0x5256c2,_0x4a99e0[_0x2ef73c(0xdb,0x13a,0x6f,0x6e)]=_0x286f76,_0x388828[_0x2ef73c(0x1e,0x83,-0xc,-0x4a)+_0x2ef73c(0x70,0xaa,0x7e,0x16)](_0x4a99e0);}else{_0x3e80df[_0x2ef73c(0x75,0xe0,0x86,-0x11)](alert,_0x2ef73c(0x25,0x82,0x8e,0x7c)+_0x476baf(-0x1be,-0x1b6,-0x208,-0x1cd)),_0x3e80df[_0x476baf(-0x180,-0x158,-0x17c,-0x105)](removeComfyUIImage);return;}}const _0x4348ba=await _0x3e80df[_0x476baf(-0x1cb,-0x238,-0x1e1,-0x1ee)](fetch,_0x5832ff+(_0x2ef73c(0xc4,0x12b,0x78,0x90)+_0x2ef73c(0x29,0x9d,0x88,0x70)),{'method':_0x3e80df[_0x2ef73c(0x2b,0xac,-0x33,0x80)],'body':_0x376747});if(_0x4348ba['ok']){if(_0x3e80df[_0x2ef73c(0x8f,0xef,0x1f,0x10a)](_0x3e80df[_0x2ef73c(0x6a,0x88,0x5e,0xf4)],_0x3e80df[_0x476baf(-0x15b,-0x16f,-0x1d3,-0x190)])){const _0xbc02e6=_0x3e80df[_0x476baf(-0x14a,-0x1a6,-0x1a3,-0x1ae)]['split']('|');let _0x34534a=0xe44+0x9d7+-0x181b;while(!![]){switch(_0xbc02e6[_0x34534a++]){case'0':_0x14111d[_0x476baf(-0xd4,-0x12f,-0x60,-0x52)+_0x2ef73c(0xc9,0xe9,0x72,0xb7)+'e']=null;continue;case'1':_0x18ca2e['style'][_0x476baf(-0x129,-0x160,-0x19a,-0x10f)]='none';continue;case'2':_0x2f6e1e['style'][_0x476baf(-0x129,-0x112,-0x10b,-0x130)]=_0x3e80df[_0x2ef73c(0x99,0x99,0xf5,0xf0)];continue;case'3':_0x582f2b[_0x476baf(-0xc7,-0xc6,-0x11c,-0x4d)]['display']=_0x3e80df[_0x2ef73c(0xc6,0xb5,0x121,0x136)];continue;case'4':_0x5c4f6a[_0x476baf(-0x1b4,-0x234,-0x136,-0x16c)]='';continue;}break;}}else{const _0x156780=await _0x4348ba['json']();window[_0x2ef73c(0x2a,0x26,0x22,0x71)+_0x476baf(-0x174,-0x164,-0x18a,-0x10f)]=_0x156780[_0x476baf(-0x16a,-0x19d,-0x12f,-0x19a)],addLog('图片上传成功,\x20服务'+_0x476baf(-0x113,-0x139,-0xcb,-0x94)+JSON['stringify'](_0x156780)),console['log'](_0x3e80df['HsjMW'],_0x156780);const _0x2ad497=new FileReader();_0x2ad497[_0x476baf(-0x16c,-0x1a8,-0x1b1,-0x17a)]=()=>{function _0x51f34e(_0x3ac535,_0x2e5e1d,_0x378f9d,_0x190ed1){return _0x476baf(_0x378f9d-0x618,_0x190ed1,_0x378f9d-0xf2,_0x190ed1-0x13d);}function _0x35f684(_0x100e54,_0xc104d1,_0x338a17,_0x540703){return _0x476baf(_0x100e54-0x5fb,_0x540703,_0x338a17-0x56,_0x540703-0x18d);}const _0x5d1b1b={'BRqmf':_0x51f34e(0x565,0x4ff,0x55b,0x562)+_0x35f684(0x523,0x530,0x582,0x594),'HHqPn':'comfyui-re'+_0x35f684(0x4bf,0x4bc,0x43a,0x4c6)+'-btn','uqxiL':_0x3e80df[_0x35f684(0x455,0x484,0x4d8,0x463)],'QwvIt':function(_0x4a55db,_0x31c178){return _0x3e80df['iMwmX'](_0x4a55db,_0x31c178);},'jwici':_0x3e80df[_0x51f34e(0x4c0,0x4de,0x4f2,0x4d8)],'xPpxo':_0x3e80df[_0x51f34e(0x59e,0x4d6,0x516,0x4fb)],'fPOiG':_0x3e80df[_0x35f684(0x4e0,0x472,0x542,0x4d1)],'FRnSt':_0x35f684(0x4e6,0x4d1,0x536,0x569)+'1','GTYnF':_0x3e80df[_0x35f684(0x4cc,0x4b0,0x500,0x460)]};if(_0x3e80df[_0x51f34e(0x4c2,0x4a1,0x4df,0x546)]('HrrVq','HrrVq')){const _0x397d73=_0x2ad497[_0x35f684(0x506,0x4f8,0x518,0x539)],_0x4f8c0d={};_0x4f8c0d[_0x51f34e(0x58c,0x50d,0x52b,0x558)]=_0x397d73,_0x4f8c0d[_0x51f34e(0x53f,0x4bd,0x4d6,0x48d)+'Name']=_0x156780['name'];const _0x3b7194=_0x4f8c0d,_0xbb7167={};_0xbb7167['id']=COMFYUI_REF_CACHE_KEY,_0xbb7167[_0x35f684(0x50e,0x4e9,0x563,0x533)]=_0x3b7194,dbs[_0x35f684(0x451,0x3f0,0x495,0x49c)+_0x51f34e(0x468,0x51c,0x4c0,0x4cd)](_0xbb7167);}else{const _0x54ac04=_0x965778[_0x35f684(0x512,0x492,0x566,0x4ec)+_0x35f684(0x53a,0x51a,0x4ba,0x5a5)](_0x5d1b1b[_0x35f684(0x50c,0x50b,0x57c,0x4e6)]),_0x4e0102=_0x54ab50[_0x51f34e(0x4de,0x4e2,0x525,0x54f)+_0x35f684(0x505,0x4a0,0x4ed,0x513)](_0x35f684(0x490,0x489,0x44e,0x4e7)+_0x51f34e(0x518,0x4c8,0x539,0x579)+_0x35f684(0x50f,0x520,0x54f,0x542)+'er\x20.st-cha'+_0x51f34e(0x510,0x5cf,0x54b,0x550)+'placeholde'+'r'),_0x2cbd97=_0x5543cf[_0x51f34e(0x4dc,0x5b2,0x52f,0x5af)+'ById'](_0x5d1b1b[_0x35f684(0x49b,0x4a0,0x4c0,0x4af)]);_0x54ac04[_0x51f34e(0x4a2,0x3ea,0x464,0x4a6)]&&_0x54ac04[_0x35f684(0x447,0x44d,0x3de,0x4c5)][_0x35f684(0x539,0x4d5,0x534,0x4d3)](_0x5d1b1b[_0x35f684(0x494,0x4b2,0x455,0x4c4)])&&_0x5d1b1b['QwvIt'](_0x54ac04[_0x51f34e(0x40e,0x462,0x464,0x4b4)],_0x3c7301)&&_0x5b5e1[_0x35f684(0x4ac,0x4c5,0x4a0,0x4c3)+'ctURL'](_0x54ac04['src']);if(_0x34b108)_0x54ac04[_0x51f34e(0x475,0x458,0x464,0x4dd)]=_0x581f82,_0x54ac04['style']['display']=_0x5d1b1b[_0x51f34e(0x4c6,0x4c9,0x45c,0x4c2)],_0x4e0102['style']['display']=_0x5d1b1b[_0x35f684(0x481,0x468,0x4cf,0x42e)],_0x2cbd97[_0x35f684(0x534,0x565,0x5aa,0x520)]['display']=_0x5d1b1b['fPOiG'];else{const _0x1ead0e=_0x5d1b1b[_0x51f34e(0x4f0,0x551,0x52a,0x4b6)][_0x51f34e(0x417,0x42d,0x471,0x4b1)]('|');let _0x57994e=0x2263*-0x1+-0xca7+0x9*0x53a;while(!![]){switch(_0x1ead0e[_0x57994e++]){case'0':_0x54ac04['style'][_0x51f34e(0x4a9,0x467,0x4ef,0x56b)]=_0x5d1b1b['xPpxo'];continue;case'1':_0x1c106f=null;continue;case'2':_0x2cbd97[_0x51f34e(0x4d1,0x5d8,0x551,0x4f5)][_0x35f684(0x4d2,0x49e,0x455,0x48e)]=_0x5d1b1b[_0x35f684(0x481,0x506,0x4ca,0x482)];continue;case'3':_0x37a3f7[_0x51f34e(0x495,0x4e7,0x47a,0x503)+_0x51f34e(0x4fb,0x460,0x4a4,0x4ac)]=null;continue;case'4':_0x4e0102[_0x51f34e(0x509,0x4d8,0x551,0x4fa)][_0x35f684(0x4d2,0x52b,0x4d3,0x53a)]=_0x5d1b1b[_0x51f34e(0x4a9,0x598,0x51a,0x596)];continue;case'5':_0x54ac04[_0x51f34e(0x435,0x435,0x464,0x40a)]='';continue;}break;}}}},_0x2ad497['readAsData'+_0x2ef73c(0x2,-0x7c,-0x6d,0xa)](_0x5885a0);}}else{if(_0x3e80df[_0x2ef73c(0x8f,0x55,0x3a,0x59)](_0x3e80df[_0x2ef73c(0x8a,0xf0,0xf6,0x1c)],_0x3e80df['QTdRe'])){const _0x18ea2e=await _0x4348ba['text']();alert(_0x3e80df[_0x476baf(-0x123,-0x138,-0xfc,-0xe0)](_0x2ef73c(0x4a,0x51,-0x31,0x85),_0x18ea2e)),_0x3e80df[_0x476baf(-0x170,-0x14a,-0x13b,-0x165)](addLog,_0x476baf(-0xdb,-0x119,-0x63,-0xcd)+_0x476baf(-0x109,-0x14e,-0x12d,-0x15b)+_0x18ea2e),console[_0x476baf(-0x1af,-0x1a6,-0x1be,-0x1a2)](_0x3e80df[_0x476baf(-0x10e,-0x14f,-0x10f,-0xd6)],_0x18ea2e),_0x3e80df[_0x476baf(-0x178,-0x184,-0x1f4,-0x1bc)](removeComfyUIImage);}else _0x5bbbbb[_0x476baf(-0x1af,-0x12d,-0x224,-0x1ec)](_0x3e80df[_0x476baf(-0xca,-0xa7,-0x8f,-0x91)],_0x13d0cb);}}catch(_0x4306cb){_0x3e80df[_0x476baf(-0x153,-0x1a6,-0x14f,-0x14c)](alert,_0x3e80df['iMAJC'](_0x3e80df[_0x476baf(-0xd5,-0x82,-0x106,-0xee)],_0x4306cb[_0x476baf(-0x149,-0xea,-0x196,-0x130)])),console['error'](_0x3e80df['lvCcE'],_0x4306cb),_0x3e80df[_0x476baf(-0x170,-0x149,-0x1eb,-0x113)](addLog,_0x476baf(-0xdb,-0x56,-0x97,-0x86)+_0x2ef73c(0xbf,0xda,0xbf,0xaa)+JSON[_0x476baf(-0x1b1,-0x1ba,-0x19f,-0x1ba)](_0x4306cb)),_0x3e80df[_0x476baf(-0x178,-0x154,-0x17d,-0x187)](removeComfyUIImage);}}async function loadCachedImages(){const _0x2ad0d3={'bgyld':function(_0x2a6359,_0x1c4f63){return _0x2a6359(_0x1c4f63);},'vhJtF':'请先设置ComfyU'+'I\x20API地址。','OWrfO':_0x132b96(0x3fe,0x42a,0x33c,0x3b1),'EUdSk':_0x485cad(0x41d,0x402,0x3b4,0x444),'WtWeI':'imageInput'+'2','QQqcd':function(_0xc6d9c2,_0x1d74de){return _0xc6d9c2===_0x1d74de;},'tLRRN':_0x132b96(0x3dd,0x472,0x441,0x3fe),'mTlZd':_0x132b96(0x324,0x386,0x369,0x3a6),'gRplM':function(_0x2109aa,_0x17b5a0){return _0x2109aa(_0x17b5a0);},'SBHcY':function(_0x463d8f,_0x273b0d){return _0x463d8f!==_0x273b0d;},'DDDBb':_0x132b96(0x3a9,0x361,0x38c,0x3bc),'gQkST':function(_0x2aaf16,_0x399af4){return _0x2aaf16!==_0x399af4;},'PmJTb':_0x485cad(0x404,0x3fd,0x3e6,0x41e),'ZofwS':_0x132b96(0x3b1,0x2f3,0x3a9,0x350)+_0x485cad(0x40c,0x384,0x3d2,0x367)+_0x485cad(0x31b,0x355,0x2e3,0x2e4)+'har\x20Ref\x20im'+_0x485cad(0x3a1,0x3dc,0x44e,0x41c),'KOHUk':'elsaf','XRsXj':_0x485cad(0x330,0x38a,0x356,0x3f7),'yyDFI':function(_0x2995e7,_0x387f3c){return _0x2995e7(_0x387f3c);},'AHTrd':_0x485cad(0x332,0x373,0x3ac,0x3a2)+_0x485cad(0x315,0x399,0x383,0x3ac)+'\x20from\x20old\x20'+'cache\x20form'+_0x132b96(0x333,0x347,0x30a,0x317)+_0x132b96(0x343,0x34e,0x3f9,0x3ae)+_0x485cad(0x3f5,0x3bc,0x3f2,0x36e)+_0x132b96(0x3d0,0x3df,0x361,0x365)+_0x132b96(0x44f,0x3c1,0x391,0x3e9)+_0x485cad(0x3ae,0x3ef,0x432,0x406),'ibODP':_0x132b96(0x37a,0x3c8,0x456,0x3d4),'xSoWF':_0x485cad(0x2c0,0x345,0x3b1,0x341)+'ing\x20cached'+_0x132b96(0x3e4,0x3dc,0x3f5,0x3a9)+'mage:'};await dbs[_0x132b96(0x45b,0x382,0x48e,0x405)]();function _0x132b96(_0x49e5eb,_0x28e81a,_0x2e2126,_0x463928){return _0x524245(_0x49e5eb-0x3e,_0x28e81a-0x1ae,_0x463928-0x3a4,_0x49e5eb);}function _0x485cad(_0x3b613a,_0x1f0ce9,_0x7fe805,_0x458b22){return _0x524245(_0x3b613a-0x1b9,_0x1f0ce9-0x12f,_0x1f0ce9-0x399,_0x458b22);}try{if(_0x2ad0d3[_0x132b96(0x3bc,0x3f7,0x3cf,0x409)](_0x2ad0d3[_0x485cad(0x297,0x31d,0x2e9,0x385)],_0x2ad0d3['mTlZd']))_0x26c097[_0x132b96(0x3fa,0x3de,0x314,0x38c)+_0x132b96(0x2d3,0x326,0x2e5,0x323)](_0x5d4d31[_0x485cad(0x2e9,0x31c,0x3a0,0x306)]);else{const _0x4f2034=await dbs[_0x485cad(0x31f,0x39f,0x35a,0x3c5)+_0x132b96(0x318,0x33a,0x34f,0x358)](NAI_VIBE_CACHE_KEY);_0x4f2034&&_0x4f2034[_0x132b96(0x3bc,0x397,0x428,0x3ee)]&&_0x2ad0d3[_0x132b96(0x41c,0x464,0x464,0x3e3)](updateNovelaiImagePreview,_0x4f2034[_0x132b96(0x397,0x36e,0x39a,0x3ee)]);}}catch(_0x20d714){if(_0x2ad0d3[_0x132b96(0x408,0x360,0x390,0x3c1)](_0x2ad0d3[_0x132b96(0x37f,0x34d,0x3e3,0x3cf)],_0x2ad0d3['DDDBb'])){_0x2ad0d3[_0x485cad(0x3f9,0x3f7,0x45c,0x372)](_0x3d0e70,_0x2ad0d3[_0x485cad(0x32f,0x348,0x30f,0x363)]),_0x1dbaec();return;}else console[_0x485cad(0x29e,0x321,0x315,0x37d)](_0x132b96(0x318,0x300,0x365,0x350)+_0x132b96(0x3d8,0x374,0x362,0x38f)+_0x132b96(0x34b,0x3ad,0x2d9,0x333)+_0x132b96(0x3d0,0x381,0x410,0x3d6),_0x20d714);}try{const _0x18a659=await dbs[_0x485cad(0x32d,0x39f,0x3a1,0x32e)+_0x485cad(0x37d,0x34d,0x38d,0x397)](NAI_CHAR_REF_CACHE_KEY);if(_0x18a659&&_0x18a659[_0x485cad(0x3ed,0x3e3,0x36e,0x448)]){if(_0x2ad0d3[_0x132b96(0x37a,0x316,0x347,0x325)](_0x2ad0d3[_0x485cad(0x3aa,0x396,0x404,0x341)],_0x485cad(0x3e6,0x398,0x336,0x380)))_0x2ad0d3[_0x132b96(0x3ba,0x430,0x3a0,0x3e3)](updateNovelaiCharRefImagePreview,_0x18a659['data']);else{const _0x16ebd1=_0x1134f5['result'],_0x1e64c0={};_0x1e64c0[_0x485cad(0x407,0x3e3,0x411,0x458)]=_0x16ebd1,_0x1e64c0[_0x485cad(0x337,0x38e,0x3be,0x3fe)+_0x132b96(0x38b,0x2cb,0x321,0x30f)]=_0x810bdb[_0x132b96(0x3a4,0x376,0x358,0x371)];const _0xc76669=_0x1e64c0,_0x774749={};_0x774749['id']=_0x42342f,_0x774749[_0x132b96(0x3e6,0x44a,0x444,0x3ee)]=_0xc76669,_0x11ec17[_0x132b96(0x35c,0x32e,0x32e,0x331)+'rite'](_0x774749);}}}catch(_0x27adfd){console[_0x485cad(0x31b,0x321,0x37f,0x341)](_0x2ad0d3['ZofwS'],_0x27adfd);}try{if(_0x2ad0d3[_0x485cad(0x447,0x412,0x491,0x44d)]!==_0x2ad0d3[_0x485cad(0x493,0x412,0x479,0x434)])_0x5ec710[_0x485cad(0x325,0x31c,0x2c8,0x2ec)]='',_0x45be7b[_0x485cad(0x3ac,0x409,0x44b,0x42d)]['display']=_0x2ad0d3[_0x485cad(0x363,0x3e6,0x423,0x3e4)],_0x4ccb6e[_0x132b96(0x40d,0x3ee,0x446,0x414)][_0x132b96(0x32b,0x35f,0x3ff,0x3b2)]=_0x2ad0d3['EUdSk'],_0x3b2834[_0x132b96(0x457,0x3af,0x429,0x414)][_0x485cad(0x3fc,0x3a7,0x372,0x42f)]=_0x485cad(0x372,0x3a6,0x41a,0x3cc),_0x1a6a16['comfyuican'+_0x132b96(0x322,0x3c2,0x3de,0x367)]=null,_0x300ed0=null;else{const _0x3bff80=await dbs[_0x132b96(0x3a7,0x3bf,0x399,0x3aa)+_0x132b96(0x37e,0x2fa,0x34b,0x358)](COMFYUI_REF_CACHE_KEY);if(_0x3bff80&&_0x3bff80['data']&&_0x3bff80[_0x132b96(0x439,0x45d,0x37a,0x3ee)]['data']&&_0x3bff80[_0x132b96(0x378,0x424,0x478,0x3ee)]['serverFile'+_0x132b96(0x2e1,0x297,0x376,0x30f)]){const _0x3179fc=_0x3bff80[_0x132b96(0x41b,0x3bc,0x458,0x3ee)],_0x54492c=await _0x2ad0d3[_0x132b96(0x41f,0x3e8,0x35c,0x3e3)](fetch,_0x3179fc[_0x132b96(0x3cf,0x40f,0x44f,0x3ee)]),_0x2a80e8=await _0x54492c[_0x132b96(0x2e3,0x362,0x39c,0x336)](),_0x2f2f5a=URL['createObje'+_0x485cad(0x2a5,0x318,0x36d,0x299)](_0x2a80e8);updateComfyUIImagePreview(_0x2f2f5a),comfyuiImageObjectURL=_0x2f2f5a,window[_0x485cad(0x2bb,0x332,0x2b6,0x336)+_0x485cad(0x31b,0x35c,0x388,0x3ad)]=_0x3179fc[_0x132b96(0x3f0,0x383,0x32a,0x399)+'Name'],addLog('从缓存加载Comfy'+_0x132b96(0x385,0x37c,0x34c,0x322)+_0x3179fc[_0x132b96(0x409,0x3b5,0x370,0x399)+_0x132b96(0x2c3,0x399,0x2ad,0x30f)]),console[_0x132b96(0x39d,0x323,0x2da,0x356)]('Loaded\x20Com'+_0x485cad(0x3bc,0x399,0x408,0x36d)+_0x132b96(0x372,0x3da,0x33b,0x373)+_0x485cad(0x2f7,0x323,0x2f7,0x2d1)+_0x3179fc['serverFile'+_0x485cad(0x286,0x304,0x284,0x385)]);}else{if(_0x3bff80&&_0x2ad0d3['QQqcd'](typeof _0x3bff80[_0x132b96(0x39a,0x477,0x3b1,0x3ee)],_0x485cad(0x2de,0x32c,0x34f,0x39f))){if(_0x2ad0d3[_0x132b96(0x476,0x3dc,0x433,0x409)](_0x132b96(0x3b4,0x35a,0x386,0x3e4),_0x2ad0d3[_0x132b96(0x386,0x3cf,0x37c,0x355)]))_0x13525a[_0x485cad(0x365,0x3e7,0x38b,0x3ee)+_0x132b96(0x421,0x3c9,0x426,0x41a)](_0x2ad0d3[_0x132b96(0x471,0x440,0x3e7,0x413)])[_0x132b96(0x384,0x324,0x413,0x38e)]();else{const _0x39e6d5=await fetch(_0x3bff80[_0x485cad(0x403,0x3e3,0x373,0x3aa)]),_0x749cbc=await _0x39e6d5['blob'](),_0xec5aa8=URL[_0x132b96(0x432,0x420,0x410,0x3df)+_0x132b96(0x2a5,0x2f1,0x30b,0x323)](_0x749cbc);_0x2ad0d3[_0x485cad(0x3c6,0x377,0x3ec,0x357)](updateComfyUIImagePreview,_0xec5aa8),comfyuiImageObjectURL=_0xec5aa8,console[_0x132b96(0x3de,0x300,0x31d,0x364)](_0x2ad0d3['AHTrd']);}}}}}catch(_0x3ce730){if(_0x2ad0d3[_0x485cad(0x379,0x3fe,0x451,0x440)](_0x2ad0d3['ibODP'],_0x132b96(0x432,0x38b,0x3c7,0x3d4)))console[_0x485cad(0x2e3,0x321,0x2f4,0x2c1)](_0x2ad0d3[_0x132b96(0x2fb,0x320,0x3d2,0x37c)],_0x3ce730);else{const _0x275fc3=_0x100a1e[_0x485cad(0x33e,0x3a9,0x3e1,0x364)](_0x6dc1c7,arguments);return _0x58199d=null,_0x275fc3;}}}export function initImageUpload(_0x27b8c6){function _0x3d497a(_0x1d792d,_0x1f6f0b,_0x1a3c6c,_0x292929){return _0x524245(_0x1d792d-0x13c,_0x1f6f0b-0x131,_0x1d792d-0x249,_0x1a3c6c);}const _0x1d38f5={'QJINL':'block','UZDEM':'none','rlIWF':'inline-fle'+'x','VIfyD':function(_0x85054e,_0x74b689){return _0x85054e===_0x74b689;},'TmeEC':_0x361484(0x40e,0x40a,0x410,0x427),'jqJmR':_0x361484(0x4be,0x488,0x4be,0x507)+_0x3d497a(0x1c0,0x1bf,0x241,0x1c8),'BVXsj':_0x361484(0x3d3,0x3d7,0x369,0x404)+_0x3d497a(0x1f2,0x1a2,0x262,0x1b7)+_0x3d497a(0x29d,0x26b,0x22c,0x2c6)+':','wQVHt':_0x361484(0x407,0x408,0x458,0x38d),'EEYUG':function(_0x4c4b1d,_0x14e799){return _0x4c4b1d===_0x14e799;},'YjbQq':_0x3d497a(0x2a9,0x2a6,0x2f4,0x2b4),'KAzXv':function(_0x347235){return _0x347235();},'ehAOS':_0x3d497a(0x268,0x2b6,0x2b2,0x256)+_0x3d497a(0x245,0x208,0x26b,0x1f8)+_0x361484(0x4b1,0x431,0x47f,0x450),'Sqxpu':function(_0x1497e7){return _0x1497e7();},'BhqZO':function(_0xc47e3a,_0x2e92f3){return _0xc47e3a!==_0x2e92f3;},'LLfEG':_0x3d497a(0x21f,0x228,0x20a,0x254),'mXFCu':_0x3d497a(0x263,0x24c,0x2d1,0x297),'LFLiX':_0x361484(0x3e4,0x44f,0x3d9,0x41f),'xJzcH':function(_0x5969e4){return _0x5969e4();},'hfbLc':_0x361484(0x40f,0x414,0x395,0x3e9)+'elect-imag'+_0x361484(0x50e,0x487,0x43e,0x493),'nCRRv':'click','OqszI':_0x361484(0x41e,0x3df,0x3eb,0x45f),'FXEuZ':_0x3d497a(0x1d2,0x1d1,0x1da,0x1c9)+'emove-imag'+'e-btn','aAhwY':_0x361484(0x47f,0x414,0x3d7,0x421)+_0x361484(0x42e,0x404,0x3b5,0x412)+_0x3d497a(0x1d5,0x16a,0x20b,0x244)+_0x361484(0x3e1,0x421,0x3c7,0x415),'PWvTu':'#comfyui-r'+_0x3d497a(0x28f,0x2c3,0x286,0x256)+_0x3d497a(0x267,0x264,0x254,0x2a6)};_0x1d38f5['xJzcH'](loadCachedImages),_0x27b8c6[_0x3d497a(0x29a,0x2d8,0x21a,0x246)](_0x1d38f5['hfbLc'])['on'](_0x1d38f5['nCRRv'],()=>{function _0x3110ba(_0x4e7cb5,_0x5e9b23,_0x32ea1d,_0x22a2c2){return _0x361484(_0x32ea1d,_0x22a2c2- -0x22c,_0x32ea1d-0x3a,_0x22a2c2-0x159);}function _0x55b8bd(_0x34792c,_0x3ffaca,_0x46a745,_0x2b56e8){return _0x361484(_0x3ffaca,_0x2b56e8-0x52,_0x46a745-0xb0,_0x2b56e8-0x166);}if(_0x1d38f5['VIfyD'](_0x1d38f5[_0x3110ba(0x280,0x252,0x1f4,0x279)],_0x1d38f5[_0x3110ba(0x2a3,0x20f,0x28e,0x279)]))document[_0x55b8bd(0x4c9,0x516,0x566,0x509)+_0x3110ba(0x2cc,0x27a,0x295,0x2b3)](_0x1d38f5['jqJmR'])['click']();else{_0x29f198[_0x55b8bd(0x452,0x3f2,0x476,0x43e)]=_0x3e35ac,_0x570d0a[_0x3110ba(0x2dc,0x2df,0x2e3,0x2ad)][_0x3110ba(0x2b2,0x296,0x268,0x24b)]=_0x1d38f5['QJINL'],_0x1a2801[_0x3110ba(0x256,0x24c,0x2a8,0x2ad)]['display']=_0x1d38f5[_0x3110ba(0x1e7,0x242,0x207,0x22f)],_0x1e8b30[_0x3110ba(0x277,0x240,0x2e1,0x2ad)][_0x3110ba(0x216,0x2ac,0x1f2,0x24b)]=_0x1d38f5[_0x55b8bd(0x421,0x473,0x420,0x470)];const _0xeb49a3=_0x37e53e[_0x55b8bd(0x3e0,0x3ed,0x3c7,0x44b)](','),_0x2d50b7=_0xeb49a3[-0xb3*-0x3+-0x24f*-0x1+-0x468][_0x3110ba(0x1e0,0x20e,0x19b,0x1cd)](':')[-0x24e5*0x1+-0x1*-0xc67+0x187f]['split'](';')[-0x1b3a+0x9fc*-0x2+0x2f32];_0xf8d57=_0x2d50b7,_0x28289a[_0x3110ba(0x241,0x2db,0x217,0x2a0)+_0x3110ba(0x2e5,0x2c7,0x21a,0x275)+'e']=_0xeb49a3[-0x1754+0x116d*-0x2+0x3a2f];const _0x702408={};_0x702408['id']=_0x23585d,_0x702408[_0x3110ba(0x242,0x292,0x29a,0x287)]=_0x5b72f2,_0x51062b['storeReadW'+_0x3110ba(0x1fc,0x1d6,0x25a,0x21c)](_0x702408);}}),_0x27b8c6[_0x361484(0x496,0x4ba,0x51d,0x480)](_0x361484(0x3a6,0x424,0x44d,0x3f2)+'t_novelai')['on'](_0x1d38f5[_0x361484(0x3d7,0x45c,0x3f5,0x499)],handleNovelaiImageUpload),_0x27b8c6[_0x361484(0x47d,0x4ba,0x463,0x4ac)](_0x1d38f5[_0x361484(0x405,0x461,0x47b,0x490)])['on'](_0x1d38f5[_0x3d497a(0x1ef,0x22a,0x195,0x1e2)],()=>{function _0x1d9039(_0x2edde7,_0xd0aba1,_0x2e7bd5,_0x138623){return _0x361484(_0x2e7bd5,_0x2edde7-0x121,_0x2e7bd5-0x12e,_0x138623-0x13a);}function _0x4d30ac(_0x1c748a,_0x43a690,_0x2f2a46,_0x29d5af){return _0x3d497a(_0x1c748a-0x8a,_0x43a690-0x1d4,_0x43a690,_0x29d5af-0x184);}const _0x209ad5={'ewmfG':_0x1d38f5[_0x1d9039(0x4fa,0x477,0x505,0x48c)],'zvjrw':function(_0x1fb4e2,_0x31bbf1){return _0x1fb4e2(_0x31bbf1);},'KnMTo':_0x1d38f5[_0x1d9039(0x605,0x600,0x65f,0x616)]};_0x1d38f5[_0x4d30ac(0x2e6,0x33e,0x2be,0x27d)](_0x1d38f5[_0x4d30ac(0x29d,0x292,0x235,0x2fd)],_0x1d38f5[_0x4d30ac(0x29d,0x257,0x22b,0x2cf)])?_0x1d38f5['KAzXv'](removeNovelaiImage):(_0x564264[_0x4d30ac(0x25b,0x1f3,0x2e3,0x2a8)](_0x209ad5['ewmfG'],_0x14d82a),_0x209ad5[_0x4d30ac(0x2f9,0x307,0x2c0,0x33e)](_0x4b0236,_0x209ad5[_0x4d30ac(0x2dc,0x34d,0x2e7,0x362)]+_0x5532d0[_0x1d9039(0x578,0x5ef,0x509,0x552)]));}),_0x27b8c6[_0x3d497a(0x29a,0x280,0x30f,0x2f4)](_0x1d38f5['aAhwY'])['on'](_0x361484(0x44d,0x453,0x412,0x48b),()=>{function _0x19f27f(_0x1bf3aa,_0x24a444,_0x1bf5bb,_0x289208){return _0x361484(_0x289208,_0x1bf5bb- -0x5cd,_0x1bf5bb-0xa1,_0x289208-0x18f);}function _0x5dfdc4(_0x10e3e0,_0x10fe46,_0x268a0f,_0x279fa8){return _0x361484(_0x10e3e0,_0x279fa8- -0x581,_0x268a0f-0x49,_0x279fa8-0xaa);}document['getElement'+_0x5dfdc4(-0x29,-0x60,-0x123,-0xa2)](_0x1d38f5[_0x19f27f(-0x144,-0x14d,-0x191,-0x1eb)])[_0x19f27f(-0x1f7,-0x13f,-0x17a,-0x10e)]();}),_0x27b8c6[_0x361484(0x458,0x4ba,0x44c,0x525)](_0x361484(0x474,0x424,0x400,0x417)+_0x3d497a(0x295,0x250,0x306,0x22d)+_0x3d497a(0x24c,0x1df,0x270,0x274))['on'](_0x1d38f5[_0x361484(0x3f6,0x45c,0x40e,0x484)],handleNovelaiCharRefImageUpload);function _0x361484(_0x2dc939,_0x310560,_0x107335,_0x37dff8){return _0x524245(_0x2dc939-0xea,_0x310560-0x99,_0x310560-0x469,_0x2dc939);}_0x27b8c6['find'](_0x361484(0x3cb,0x3f2,0x3d9,0x387)+_0x3d497a(0x1ed,0x241,0x19a,0x199)+_0x361484(0x3a1,0x3f5,0x3d2,0x3c9)+_0x3d497a(0x201,0x17d,0x1b0,0x20c))['on'](_0x1d38f5[_0x3d497a(0x1ef,0x176,0x242,0x228)],()=>{function _0x998121(_0xf8998d,_0x176c2d,_0x4845ac,_0x35d31b){return _0x361484(_0x35d31b,_0x4845ac- -0x5b0,_0x4845ac-0x1ec,_0x35d31b-0x79);}_0x1d38f5[_0x998121(-0x15c,-0x1e6,-0x17e,-0x198)](removeNovelaiCharRefImage);}),_0x27b8c6[_0x361484(0x457,0x4ba,0x4ce,0x4b8)](_0x361484(0x4d5,0x4e1,0x556,0x546)+_0x3d497a(0x1ee,0x211,0x21e,0x267)+_0x3d497a(0x267,0x212,0x214,0x202))['on'](_0x1d38f5[_0x3d497a(0x1ef,0x197,0x20d,0x1f3)],()=>{function _0x597fc7(_0x3d5eb5,_0x2613f3,_0x21a2e3,_0x8bd81b){return _0x361484(_0x21a2e3,_0x2613f3- -0x4ac,_0x21a2e3-0x11a,_0x8bd81b-0x5c);}function _0x3fedc1(_0x38025c,_0x343e4d,_0xd6b300,_0x26757a){return _0x361484(_0x38025c,_0xd6b300- -0x42f,_0xd6b300-0x55,_0x26757a-0xb2);}_0x1d38f5[_0x3fedc1(0x7f,0x4d,0x3b,0x4a)](_0x1d38f5['LLfEG'],_0x1d38f5['mXFCu'])?document[_0x597fc7(0x75,0xb,-0x28,-0x27)+_0x3fedc1(0x40,0x77,0xb0,0xea)](_0x597fc7(-0x7,-0x24,-0x8e,0x7)+'2')[_0x597fc7(-0x32,-0x59,-0x75,0x27)]():(_0x438b2e(null),_0x100d08[_0x597fc7(0x1a,-0x62,-0xb5,-0x4a)+'e'](_0xaf7da2));}),_0x27b8c6['find'](_0x361484(0x42c,0x424,0x4ac,0x4a4)+'t2')['on'](_0x361484(0x3f9,0x3df,0x3aa,0x430),handleImageUpload2),_0x27b8c6[_0x3d497a(0x29a,0x2cf,0x2c6,0x283)](_0x1d38f5[_0x361484(0x3cb,0x3d3,0x3a8,0x437)])['on'](_0x1d38f5['nCRRv'],()=>{function _0xecf114(_0x167c83,_0x445203,_0x236c6a,_0x582c5a){return _0x3d497a(_0x236c6a- -0x219,_0x445203-0xd0,_0x167c83,_0x582c5a-0xb2);}function _0x5e074d(_0x154e7d,_0x2243dc,_0x9630d6,_0x4c8c53){return _0x361484(_0x9630d6,_0x4c8c53- -0x449,_0x9630d6-0x3d,_0x4c8c53-0xaf);}if(_0x1d38f5['BhqZO'](_0x1d38f5[_0xecf114(0xfd,0xfd,0xa3,0x70)],_0x1d38f5['LFLiX'])){if(_0x188343){const _0x22d1b8=_0x4680be[_0x5e074d(0x5b,-0x56,0x5c,0x30)](_0x11d38c,arguments);return _0x1de017=null,_0x22d1b8;}}else _0x1d38f5[_0xecf114(0x94,0x78,0x37,0x12)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};
//# sourceMappingURL=http://localhost:8000/image_upload.js.map