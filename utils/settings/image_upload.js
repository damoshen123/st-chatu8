(function(_0xe7f776,_0x172def){const _0x1055f0=_0xe7f776();function _0x25680d(_0x7546e,_0x301eb8,_0x27175c,_0x59618e){return _0x591f(_0x27175c-0x185,_0x7546e);}function _0x594097(_0x287c86,_0x56553b,_0x10e340,_0x2a54e5){return _0x591f(_0x56553b-0x296,_0x10e340);}while(!![]){try{const _0x2a9255=-parseInt(_0x25680d(0x371,0x2b9,0x2e5,0x360))/(0x12a6+0x1104+0xbe3*-0x3)+-parseInt(_0x25680d(0x3a8,0x39e,0x3b0,0x34d))/(-0x20a5+-0x10*0x2+0x20c7)+-parseInt(_0x594097(0x464,0x4e9,0x535,0x4fe))/(-0xb2+0x109+-0x54)*(-parseInt(_0x594097(0x4d0,0x4da,0x514,0x4f3))/(-0xba1+-0xfc6*0x1+0x1b6b))+parseInt(_0x594097(0x502,0x4e1,0x4af,0x4ad))/(-0x7ca+-0x1558+0x1d27)+parseInt(_0x25680d(0x367,0x38b,0x3ba,0x3a6))/(0xa*-0xd5+0x1*0x8b5+0x1f*-0x3)*(parseInt(_0x594097(0x482,0x466,0x412,0x4d3))/(-0x6ec+0x1*0x124+0x5cf))+parseInt(_0x594097(0x53c,0x4bd,0x534,0x542))/(0xdc0+-0x215d+0x2f*0x6b)+-parseInt(_0x25680d(0x2e4,0x2e6,0x36e,0x35b))/(0x1*-0x13e7+0xdc3+-0x11*-0x5d);if(_0x2a9255===_0x172def)break;else _0x1055f0['push'](_0x1055f0['shift']());}catch(_0x516083){_0x1055f0['push'](_0x1055f0['shift']());}}}(_0x420c,0x1b590a+0x1189d2+-0x1f0928));const _0x4aa044=(function(){const _0x584fbe={};_0x584fbe['gyrCk']=_0x1e06d2(0x5a7,0x590,0x5c9,0x53d)+_0x3bb301(0x270,0x27e,0x2c5,0x2bb)+_0x1e06d2(0x584,0x4d2,0x48f,0x4f6);function _0x3bb301(_0x22c5f2,_0x4b7a04,_0xbfd628,_0x52821a){return _0x591f(_0x4b7a04-0xf7,_0xbfd628);}_0x584fbe[_0x3bb301(0x339,0x2ed,0x290,0x2dd)]=_0x3bb301(0x1fe,0x250,0x25d,0x251)+_0x1e06d2(0x420,0x4df,0x4a8,0x489)+_0x3bb301(0x312,0x2ba,0x243,0x278)+'w-containe'+_0x3bb301(0x2de,0x2b1,0x2e4,0x32d)+_0x3bb301(0x369,0x2f6,0x322,0x287)+_0x1e06d2(0x4c4,0x4bf,0x4d8,0x52d),_0x584fbe['DGZDt']=_0x1e06d2(0x58e,0x584,0x53f,0x524)+_0x3bb301(0x242,0x272,0x205,0x203)+'ref-image-'+'btn',_0x584fbe[_0x3bb301(0x342,0x2bc,0x249,0x341)]=_0x3bb301(0x2a6,0x2b5,0x23a,0x226);function _0x1e06d2(_0x302d28,_0x850e1c,_0x38aab6,_0x55c7c7){return _0x591f(_0x55c7c7-0x2fb,_0x38aab6);}_0x584fbe[_0x3bb301(0x2c2,0x2a8,0x220,0x257)]='block',_0x584fbe[_0x1e06d2(0x4d4,0x47a,0x45c,0x4b1)]=_0x3bb301(0x339,0x2eb,0x28c,0x268)+'x',_0x584fbe['mRYcm']=_0x1e06d2(0x57f,0x5c9,0x58f,0x54a),_0x584fbe['iwKAp']=_0x1e06d2(0x4e6,0x47c,0x43b,0x47a),_0x584fbe[_0x1e06d2(0x464,0x3f1,0x440,0x464)]=_0x3bb301(0x2b3,0x2f1,0x30c,0x34e),_0x584fbe[_0x1e06d2(0x3e1,0x4a0,0x457,0x45a)]=_0x1e06d2(0x4c5,0x513,0x58a,0x527)+_0x1e06d2(0x5c1,0x55c,0x4d7,0x547),_0x584fbe[_0x3bb301(0x2b5,0x25e,0x2a8,0x26a)]=function(_0x12b528,_0x526465){return _0x12b528!==_0x526465;},_0x584fbe['SvKhQ']=_0x3bb301(0x2ee,0x2b2,0x237,0x289),_0x584fbe[_0x1e06d2(0x4d2,0x422,0x4ed,0x4ab)]=function(_0x5c4423,_0x18897a){return _0x5c4423===_0x18897a;},_0x584fbe['uPjtw']=_0x1e06d2(0x517,0x577,0x4b8,0x52c),_0x584fbe[_0x1e06d2(0x4e3,0x468,0x4b7,0x499)]='sgxEw';const _0x4dcefd=_0x584fbe;let _0x232af0=!![];return function(_0x1246b3,_0x18bb62){function _0x3e1cb6(_0x216716,_0x33411f,_0x611fac,_0x2b2270){return _0x1e06d2(_0x216716-0x14d,_0x33411f-0x189,_0x611fac,_0x33411f- -0x2cc);}const _0x257b54={'KHhNu':_0x4dcefd[_0x3e1cb6(0x1c2,0x18e,0x14a,0x100)],'UzrCG':function(_0x3306a6,_0x2effad){function _0x157ce3(_0x378e3d,_0x5468d0,_0xf93e7b,_0x4bee4e){return _0x3e1cb6(_0x378e3d-0x15b,_0xf93e7b- -0x1ef,_0x378e3d,_0x4bee4e-0x5e);}return _0x4dcefd[_0x157ce3(-0xb4,-0x78,-0x59,0xd)](_0x3306a6,_0x2effad);},'XJdTf':_0x3e1cb6(0x22c,0x1a0,0x1a2,0x1fb),'FlhnE':_0x4dcefd[_0x8654af(-0x21c,-0x17a,-0x195,-0x1c3)],'CyCNh':function(_0x7c738b,_0x50f5a9){function _0xc863fe(_0x5d008c,_0x217494,_0x50484f,_0x265717){return _0x8654af(_0x5d008c-0x122,_0x217494-0x3e,_0x50484f-0x11b,_0x217494);}return _0x4dcefd[_0xc863fe(0x13,0x1e,-0x21,-0x3e)](_0x7c738b,_0x50f5a9);},'EnIPS':_0x4dcefd[_0x3e1cb6(0x1d4,0x22d,0x27f,0x296)]};function _0x8654af(_0x3c69a,_0x45cd72,_0x36b2c0,_0x3c122e){return _0x3bb301(_0x3c69a-0x1bd,_0x36b2c0- -0x3e3,_0x3c122e,_0x3c122e-0x5a);}if(_0x4dcefd[_0x8654af(-0x12e,-0x106,-0x185,-0x14e)](_0x4dcefd[_0x3e1cb6(0x19d,0x1cd,0x14d,0x1e5)],_0x4dcefd[_0x3e1cb6(0x151,0x1cd,0x186,0x1bd)])){const _0x3685cd=_0x38efa5[_0x3e1cb6(0x231,0x265,0x26d,0x1fb)+_0x3e1cb6(0x244,0x1cc,0x1a4,0x205)](_0x4dcefd[_0x8654af(-0x1c3,-0x1dd,-0x18e,-0x12a)]),_0x199aa2=_0x1e284f[_0x3e1cb6(0x287,0x202,0x1ff,0x233)+_0x3e1cb6(0x19b,0x20e,0x200,0x19c)](_0x4dcefd[_0x8654af(-0x120,-0x10f,-0xf6,-0x11e)]),_0x244813=_0x3d5061[_0x8654af(-0x129,-0x3b,-0xb6,-0x56)+'ById'](_0x4dcefd[_0x3e1cb6(0x2f2,0x295,0x293,0x24f)]);if(_0x1df297&&_0x3fa89d['startsWith'](_0x4dcefd[_0x8654af(-0x19e,-0xcd,-0x127,-0x12d)])){_0x3685cd[_0x3e1cb6(0x1c0,0x1de,0x171,0x1ba)]=_0x4b9e13,_0x3685cd[_0x8654af(-0x1d2,-0x1e1,-0x16c,-0x1a0)][_0x3e1cb6(0x173,0x1fa,0x1fd,0x1e9)]=_0x4dcefd[_0x3e1cb6(0x1ba,0x1e0,0x192,0x1ac)],_0x199aa2['style'][_0x3e1cb6(0x25b,0x1fa,0x235,0x246)]=_0x3e1cb6(0x1c1,0x1ae,0x133,0x125),_0x244813[_0x3e1cb6(0x1b5,0x1af,0x1b9,0x1fe)][_0x8654af(-0x107,-0x12d,-0x121,-0x10b)]=_0x4dcefd['bbWGq'];const _0x2d79df=_0x2de344[_0x3e1cb6(0x1b3,0x1ec,0x271,0x1f5)](','),_0x2aa879=_0x2d79df[-0x16d*-0x6+0x138*-0x1+-0x756][_0x3e1cb6(0x1ac,0x1ec,0x203,0x1a8)](':')[-0x2511+0x21d*0xb+-0x1*-0xdd3][_0x3e1cb6(0x22b,0x1ec,0x1b2,0x1f9)](';')[0x2419+0x186d+0x7a*-0x7f];_0x382122=_0x2aa879,_0x4212e7[_0x3e1cb6(0x266,0x276,0x259,0x205)+_0x8654af(-0x158,-0xa4,-0x120,-0x184)]=_0x2d79df[0x27f+0x226+-0x4a4];const _0x7c2656={};_0x7c2656['id']=_0x1bfabf,_0x7c2656[_0x3e1cb6(0x23f,0x212,0x1a0,0x24c)]=_0xbd3afa,_0x568abc[_0x3e1cb6(0x1f6,0x1bb,0x14a,0x1f5)+_0x8654af(-0x180,-0x158,-0x135,-0x13d)](_0x7c2656);}else{const _0x4f29f6=_0x4dcefd['mRYcm']['split']('|');let _0x3bf046=-0x156e+-0x2296+0x3804;while(!![]){switch(_0x4f29f6[_0x3bf046++]){case'0':_0x244813[_0x3e1cb6(0x15b,0x1af,0x1fd,0x1a7)]['display']=_0x4dcefd[_0x3e1cb6(0x207,0x1b1,0x1ff,0x209)];continue;case'1':_0x3685cd[_0x3e1cb6(0x23a,0x1de,0x1d8,0x14f)]='';continue;case'2':_0x199aa2['style']['display']=_0x4dcefd[_0x8654af(-0x1ca,-0x1f3,-0x183,-0x1f3)];continue;case'3':_0x344463[_0x3e1cb6(0x222,0x276,0x234,0x2d3)+_0x3e1cb6(0x27c,0x1fb,0x17a,0x1f0)]=null;continue;case'4':_0x3685cd[_0x3e1cb6(0x1cf,0x1af,0x1e0,0x17a)]['display']=_0x3e1cb6(0x17f,0x1ae,0x162,0x1de);continue;}break;}}}else{const _0x1e9a0b=_0x232af0?function(){const _0x52575={};_0x52575['Uxzmq']=_0x1c1793(0x1f9,0x282,0x2b9,0x2e9)+_0x431d22(-0x1b5,-0x182,-0x1f6,-0x163)+_0x431d22(-0x5f,-0xb9,-0xbf,-0x129)+'ibe\x20image:';function _0x1c1793(_0x5e8eb9,_0x320dd3,_0x561a6d,_0x573965){return _0x8654af(_0x5e8eb9-0xf6,_0x320dd3-0x79,_0x320dd3-0x388,_0x5e8eb9);}const _0x443032=_0x52575;function _0x431d22(_0x4aaf23,_0x38754c,_0x3215f3,_0x2e968f){return _0x8654af(_0x4aaf23-0x105,_0x38754c-0x1e5,_0x38754c- -0x3c,_0x2e968f);}if(_0x257b54['UzrCG'](_0x257b54[_0x431d22(-0x19a,-0x113,-0x11c,-0x142)],_0x257b54[_0x1c1793(0x1a3,0x211,0x206,0x27e)])){if(_0x18bb62){if(_0x257b54[_0x1c1793(0x338,0x2f0,0x26a,0x295)](_0x431d22(-0x118,-0xc9,-0x123,-0x55),_0x257b54['EnIPS']))_0x1d57d8[_0x431d22(-0xa4,-0xf2,-0x8f,-0xb6)+_0x1c1793(0x2a7,0x239,0x21f,0x1e1)](_0x257b54[_0x431d22(-0x1b7,-0x174,-0x174,-0x1ca)])['click']();else{const _0x44e29b=_0x18bb62[_0x1c1793(0x1f4,0x266,0x1e0,0x248)](_0x1246b3,arguments);return _0x18bb62=null,_0x44e29b;}}}else _0x2c1950['error'](_0x443032[_0x431d22(-0x162,-0x109,-0x98,-0x178)],_0x277d43);}:function(){};return _0x232af0=![],_0x1e9a0b;}};}()),_0x4cd099=_0x4aa044(this,function(){function _0x1207a9(_0x4c025d,_0x1bfa36,_0x305624,_0x169422){return _0x591f(_0x305624- -0x211,_0x4c025d);}const _0x2c47aa={};_0x2c47aa[_0x1207a9(-0x108,-0xad,-0xbe,-0x85)]=_0x52a383(-0x26c,-0x225,-0x2a5,-0x2b9)+'+$';const _0x5d79a3=_0x2c47aa;function _0x52a383(_0x43a135,_0x2e1f7f,_0x3fa903,_0x347909){return _0x591f(_0x43a135- -0x3d9,_0x3fa903);}return _0x4cd099[_0x1207a9(0x2c,-0x89,-0x35,-0xae)]()[_0x1207a9(-0x95,0x6,-0xc,-0x9)](_0x5d79a3[_0x52a383(-0x286,-0x300,-0x25b,-0x241)])[_0x1207a9(-0x4f,0x51,-0x35,-0x9a)]()['constructo'+'r'](_0x4cd099)[_0x52a383(-0x1d4,-0x1fa,-0x1a4,-0x22b)](_0x5d79a3[_0x1207a9(-0x33,-0xba,-0xbe,-0x7d)]);});_0x4cd099();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY='cache_nove'+_0xb3a1e5(0x4e2,0x518,0x53f,0x4d9)+_0xb3a1e5(0x5f8,0x56e,0x583,0x5dd)+_0xb3a1e5(0x5f3,0x5cc,0x5fe,0x5d1);function _0x1837a1(_0x11f794,_0x2cd431,_0x5b5e70,_0x540a8a){return _0x591f(_0x540a8a- -0x44,_0x11f794);}const NAI_CHAR_REF_CACHE_KEY=_0x1837a1(0x180,0xbf,0x97,0x112)+'lai_char_r'+_0xb3a1e5(0x67c,0x5f2,0x56d,0x62a),COMFYUI_REF_CACHE_KEY=_0xb3a1e5(0x60e,0x5e1,0x569,0x5d3)+_0xb3a1e5(0x602,0x628,0x65b,0x654)+_0xb3a1e5(0x60b,0x5cc,0x60d,0x5bd);function _0xb3a1e5(_0x39423f,_0x18d5a0,_0x12dae2,_0x2e1c36){return _0x591f(_0x18d5a0-0x3bb,_0x2e1c36);}let nai3VibeTransferImageMimeType=_0xb3a1e5(0x568,0x53c,0x4eb,0x563),nai3CharRefImageMimeType='image/png',comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x11aeee){const _0x3ff954={};_0x3ff954[_0x3b459d(-0x12b,-0x11a,-0x181,-0x11e)]=_0x3b459d(-0x61,-0x2b,-0x75,-0xae)+_0x430386(0x32,-0x81,-0x3d,0x2d),_0x3ff954[_0x430386(-0x5d,-0x6,0x2b,-0x42)]='#novelai-i'+_0x3b459d(-0x4b,-0x5f,0x18,0xd)+_0x430386(0x33,0x47,0x18,0x8f)+_0x3b459d(-0x63,-0x69,0x29,-0x7a)+'tu8-image-'+_0x3b459d(-0x64,-0x79,-0x19,-0xe4)+'r',_0x3ff954[_0x3b459d(-0x8c,-0x6a,-0xd,-0x7f)]=_0x430386(0x82,-0x2b,0x44,0x85)+_0x430386(-0x67,-0x52,-0x5a,0x16)+_0x430386(0x0,-0x17,-0x84,-0xb0),_0x3ff954['Bqngc']=_0x3b459d(-0xe5,-0x12a,-0x12a,-0x11f),_0x3ff954[_0x430386(0x68,0x7c,-0xa,-0xb)]=_0x430386(-0x3d,-0xb9,-0x67,-0x4c),_0x3ff954[_0x430386(0x9a,0xa1,0x38,0x47)]=_0x3b459d(-0x124,-0xd9,-0x159,-0xff),_0x3ff954['HrQae']=_0x430386(-0x30,0x19,0xf,0x6f)+'x';function _0x3b459d(_0x10a8e0,_0xf1621e,_0x160f9a,_0x4afae5){return _0xb3a1e5(_0x10a8e0-0x1ec,_0x10a8e0- -0x65e,_0x160f9a-0x97,_0x4afae5);}function _0x430386(_0x46c1c3,_0x30f3ae,_0x5adfc4,_0x57dd98){return _0xb3a1e5(_0x46c1c3-0xcf,_0x5adfc4- -0x5a0,_0x5adfc4-0x113,_0x57dd98);}_0x3ff954[_0x3b459d(-0xcd,-0x145,-0x8e,-0x43)]=_0x3b459d(-0x10e,-0x12e,-0x18d,-0x114),_0x3ff954['rvMZe']=_0x3b459d(-0xa9,-0xac,-0x46,-0xb8);const _0x38878d=_0x3ff954,_0x360df7=document[_0x430386(0x6a,0x8,0x51,0x98)+_0x3b459d(-0x106,-0x15f,-0x127,-0xeb)](_0x38878d['KOXwA']),_0x32c3e3=document[_0x3b459d(-0xd0,-0xa7,-0xdd,-0xea)+_0x3b459d(-0xc4,-0xde,-0x122,-0xe4)](_0x38878d[_0x430386(-0x5f,0x92,0x2b,0x15)]),_0x1a99cd=document[_0x430386(0xb9,0x35,0x51,0x1b)+_0x430386(-0x8a,-0x27,-0x48,-0xc)](_0x38878d[_0x3b459d(-0x8c,-0x103,-0xe4,-0x7)]);if(_0x11aeee&&_0x11aeee[_0x3b459d(-0x8a,-0x3e,-0xd6,-0x105)](_0x38878d[_0x3b459d(-0xea,-0x11e,-0x60,-0x129)])){_0x360df7['src']=_0x11aeee,_0x360df7['style'][_0x3b459d(-0xd8,-0x105,-0xe8,-0x4b)]=_0x38878d[_0x430386(0x5a,-0x8f,-0xa,-0x53)],_0x32c3e3['style'][_0x430386(0x16,0x67,-0x1a,-0x4)]=_0x38878d[_0x430386(-0x30,0x1d,0x38,-0x44)],_0x1a99cd[_0x3b459d(-0x123,-0xa5,-0x1a8,-0x109)][_0x3b459d(-0xd8,-0x11a,-0x4b,-0xe1)]=_0x38878d['HrQae'];const _0xf5d785=_0x11aeee[_0x430386(0x43,0x20,-0x28,-0x71)](','),_0x484bc1=_0xf5d785[-0x2298+-0x15f*-0x1+0x2139]['split'](':')[-0x245c+-0x2c*-0x77+0xfe9][_0x3b459d(-0xe6,-0xc5,-0x167,-0x104)](';')[0x2d1*-0xb+0x1*-0x1ddb+0x3cd6];nai3VibeTransferImageMimeType=_0x484bc1,window[_0x430386(-0x30,-0x1,0x36,0x40)+_0x3b459d(-0x51,-0x7e,-0x8c,-0xcb)+'e']=_0xf5d785[0x3*-0x153+-0x7db+0xbd5*0x1];const _0xd61acd={};_0xd61acd['id']=NAI_VIBE_CACHE_KEY,_0xd61acd[_0x430386(-0x12,-0x56,-0x2,-0x2c)]=_0x11aeee,dbs[_0x3b459d(-0x117,-0x109,-0xcc,-0x109)+_0x3b459d(-0xec,-0xd7,-0x6d,-0x122)](_0xd61acd);}else{const _0xcae2bc=_0x38878d[_0x3b459d(-0xcd,-0xf2,-0xf8,-0x148)]['split']('|');let _0x47b429=0x13*0x191+-0x127*-0x13+-0x33a8;while(!![]){switch(_0xcae2bc[_0x47b429++]){case'0':_0x360df7['style']['display']=_0x38878d[_0x3b459d(-0x86,-0xb5,-0x78,-0xe8)];continue;case'1':_0x32c3e3[_0x430386(0x1a,0x28,-0x65,-0x25)][_0x430386(0x3c,-0x5d,-0x1a,0x37)]=_0x38878d['rvMZe'];continue;case'2':_0x1a99cd[_0x3b459d(-0x123,-0x109,-0x9c,-0xb8)]['display']=_0x38878d[_0x3b459d(-0x86,-0x49,-0xeb,-0xb5)];continue;case'3':window['nai3VibeTr'+_0x430386(0xac,0xb4,0x6d,0xb3)+'e']=null;continue;case'4':_0x360df7[_0x3b459d(-0xf4,-0xb7,-0x74,-0x160)]='';continue;}break;}}}function removeNovelaiImage(){function _0x35c421(_0x2f13f4,_0x2aa7f6,_0x57ff22,_0x3168c0){return _0x1837a1(_0x2aa7f6,_0x2aa7f6-0x1ed,_0x57ff22-0xaf,_0x2f13f4-0x405);}const _0x116581={'hcVoQ':function(_0x4313a6,_0xba309e){return _0x4313a6(_0xba309e);}};_0x116581[_0x35c421(0x5e1,0x5b7,0x665,0x563)](updateNovelaiImagePreview,null);function _0x33807d(_0x18a89a,_0x5b605b,_0x29101d,_0x3ddd0a){return _0x1837a1(_0x5b605b,_0x5b605b-0x9d,_0x29101d-0x1d4,_0x18a89a-0x22c);}dbs[_0x35c421(0x523,0x5b0,0x4ea,0x500)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x283d56){const _0x3c2742={'PRHBP':function(_0x158dd0,_0x52cc61){return _0x158dd0(_0x52cc61);},'yGXGX':'图片处理失败:\x20','qBdOo':function(_0x3f72e4,_0x194abb){return _0x3f72e4===_0x194abb;},'GldhH':_0x3733e9(0x222,0x238,0x202,0x198),'JfBID':_0x3733e9(0x18a,0x181,0x101,0x1c2),'HnLoG':function(_0x4790df,_0x41ea75){return _0x4790df(_0x41ea75);},'wbYyg':function(_0x136bd9,_0x114592){return _0x136bd9(_0x114592);}},_0xf71f99=_0x283d56[_0x250b57(0x15d,0xf3,0x17e,0x1fc)][_0x250b57(0x1a1,0x193,0x1dd,0x1a4)][-0x1202*-0x1+0x13f7+-0x1*0x25f9];if(!_0xf71f99)return;function _0x250b57(_0x25251b,_0x2edf0f,_0x3d46ce,_0x2b0e5d){return _0xb3a1e5(_0x25251b-0x8d,_0x3d46ce- -0x3df,_0x3d46ce-0x18,_0x25251b);}function _0x3733e9(_0x43e1fb,_0x48292f,_0x58f625,_0x2260c4){return _0x1837a1(_0x2260c4,_0x48292f-0x116,_0x58f625-0x9d,_0x43e1fb-0x5);}try{if(_0x3c2742[_0x250b57(0x1a2,0x151,0x1d1,0x228)](_0x3c2742[_0x250b57(0x151,0x124,0x14a,0x1a5)],_0x3c2742[_0x3733e9(0x1e3,0x219,0x190,0x1db)]))_0xcf1257['error'](_0x250b57(0x1c8,0x242,0x245,0x278)+'essing\x20Nov'+'elAI\x20char\x20'+'ref\x20image:',_0x26f82),_0x3c2742[_0x250b57(0x15a,0x1db,0x1a2,0x185)](_0x2d95b6,_0x3c2742['yGXGX']+_0x4abfc2[_0x250b57(0x13c,0x168,0x158,0x121)]);else{const _0x22d08e=await processUploadedImage(_0xf71f99,!![]);_0x3c2742[_0x250b57(0x131,0x1ad,0x144,0x1a8)](updateNovelaiImagePreview,_0x22d08e);}}catch(_0x2a194a){console[_0x3733e9(0x1cc,0x170,0x1d3,0x1f1)](_0x250b57(0x284,0x2ba,0x245,0x2c3)+_0x3733e9(0x1c7,0x230,0x1e9,0x1d4)+'elAI\x20image'+':',_0x2a194a),_0x3c2742['wbYyg'](alert,_0x3c2742[_0x250b57(0x178,0x150,0x170,0x15c)]+_0x2a194a[_0x250b57(0xfa,0xfa,0x158,0xe5)]);}}function updateNovelaiCharRefImagePreview(_0x3b84c1){const _0x3549d5={};_0x3549d5['fvCOy']=_0x3d94da(0x617,0x5e7,0x615,0x59a)+_0x3d94da(0x55e,0x4c2,0x527,0x4df)+_0x2b66ad(-0xa0,-0x16,-0xca,-0x7e),_0x3549d5[_0x3d94da(0x5a8,0x52b,0x611,0x5b8)]='#novelai-c'+_0x3d94da(0x559,0x4bf,0x4c5,0x4e6)+_0x3d94da(0x505,0x4d7,0x53c,0x51b)+'w-containe'+_0x2b66ad(-0x14b,-0x4c,-0x57,-0xbf)+_0x3d94da(0x544,0x5d9,0x5c8,0x557)+_0x2b66ad(0x2a,-0x43,-0x7b,-0x47),_0x3549d5[_0x2b66ad(-0x100,-0x6b,-0xba,-0xe8)]=_0x2b66ad(-0x34,0x2e,0x5,-0x50)+'move-char-'+_0x2b66ad(-0x67,-0xba,-0xe3,-0x9f)+_0x3d94da(0x5ab,0x555,0x4df,0x549),_0x3549d5['YiSEe']=_0x2b66ad(-0x32,-0x133,-0xd3,-0xbb),_0x3549d5['vlwRi']=_0x3d94da(0x4e1,0x553,0x53f,0x4d6),_0x3549d5[_0x3d94da(0x4c7,0x4d5,0x46d,0x4c4)]='inline-fle'+'x',_0x3549d5[_0x3d94da(0x537,0x626,0x597,0x59d)]=_0x3d94da(0x518,0x4cd,0x4c1,0x519);function _0x3d94da(_0x4b6af0,_0x29ea73,_0x20700b,_0x15c80d){return _0xb3a1e5(_0x4b6af0-0xba,_0x15c80d- -0x63,_0x20700b-0x1b4,_0x4b6af0);}_0x3549d5['gyBGm']='flex',_0x3549d5[_0x3d94da(0x4ce,0x46a,0x4a3,0x4ea)]=_0x3d94da(0x4cf,0x543,0x47d,0x4d7);const _0x1d5c36=_0x3549d5,_0x493f0e=document[_0x3d94da(0x60b,0x55c,0x61b,0x58e)+_0x2b66ad(-0xee,-0x107,-0x116,-0xdc)](_0x1d5c36['fvCOy']),_0x5841ff=document[_0x2b66ad(-0xba,-0x5e,-0x10f,-0xa6)+_0x2b66ad(-0x26,-0x3c,-0x27,-0x9a)](_0x1d5c36['baEku']);function _0x2b66ad(_0xef7141,_0x121d74,_0x509a9c,_0x3e2cb9){return _0x1837a1(_0xef7141,_0x121d74-0x2c,_0x509a9c-0x9,_0x3e2cb9- -0x235);}const _0x1bdaa0=document[_0x2b66ad(-0xc2,-0x5f,-0xb8,-0x43)+_0x3d94da(0x4b0,0x480,0x495,0x4f5)](_0x1d5c36[_0x2b66ad(-0x13f,-0x111,-0xd4,-0xe8)]);if(_0x3b84c1&&_0x3b84c1[_0x3d94da(0x55c,0x4f9,0x5d4,0x571)](_0x1d5c36['YiSEe'])){_0x493f0e['src']=_0x3b84c1,_0x493f0e[_0x3d94da(0x4d1,0x4e2,0x4f4,0x4d8)][_0x2b66ad(-0x56,-0xc6,-0xc7,-0xae)]=_0x1d5c36[_0x3d94da(0x55a,0x5b5,0x566,0x58b)],_0x5841ff[_0x3d94da(0x49f,0x4a6,0x4be,0x4d8)]['display']=_0x3d94da(0x456,0x51d,0x472,0x4d7),_0x1bdaa0[_0x2b66ad(-0x9c,-0x183,-0x85,-0xf9)][_0x2b66ad(-0x84,-0xdd,-0x4d,-0xae)]=_0x1d5c36[_0x2b66ad(-0x137,-0x107,-0xd4,-0x10d)];const _0x169614=_0x3b84c1[_0x3d94da(0x56f,0x55a,0x51f,0x515)](','),_0xd08d57=_0x169614[-0x1e01*-0x1+-0x24b+-0x2*0xddb][_0x3d94da(0x4c7,0x518,0x574,0x515)](':')[0x1*0x1231+-0x21*-0xc3+-0x3*0xe71]['split'](';')[0x23e6+-0xe07*-0x1+-0x31ed];nai3CharRefImageMimeType=_0xd08d57,window[_0x3d94da(0x62c,0x601,0x581,0x59f)+_0x2b66ad(-0xba,-0x126,-0x83,-0xad)]=_0x169614[0x2606+-0x25cd+-0x38];const _0xd9a3f={};_0xd9a3f['id']=NAI_CHAR_REF_CACHE_KEY,_0xd9a3f[_0x3d94da(0x534,0x550,0x4eb,0x53b)]=_0x3b84c1,dbs['storeReadW'+_0x2b66ad(-0xad,-0x44,-0x6c,-0xc2)](_0xd9a3f);}else{const _0x5282d1=_0x1d5c36[_0x3d94da(0x595,0x58a,0x5ab,0x59d)][_0x3d94da(0x4fd,0x57d,0x551,0x515)]('|');let _0x1f3883=0x1a13+-0x224a+0x3*0x2bd;while(!![]){switch(_0x5282d1[_0x1f3883++]){case'0':_0x5841ff[_0x3d94da(0x54c,0x564,0x4f5,0x4d8)][_0x3d94da(0x49f,0x577,0x503,0x523)]=_0x1d5c36[_0x3d94da(0x636,0x5a7,0x544,0x5b3)];continue;case'1':_0x493f0e[_0x3d94da(0x552,0x514,0x49d,0x507)]='';continue;case'2':_0x493f0e['style'][_0x2b66ad(-0x82,-0x8e,-0x5b,-0xae)]=_0x1d5c36['kyudS'];continue;case'3':_0x1bdaa0['style'][_0x2b66ad(-0x134,-0x12b,-0x42,-0xae)]=_0x1d5c36['kyudS'];continue;case'4':window[_0x2b66ad(0x42,0x46,-0x68,-0x32)+'fImage']=null;continue;}break;}}}function removeNovelaiCharRefImage(){const _0x5a2944={'lwYus':function(_0x594c9b,_0x3b1a32){return _0x594c9b(_0x3b1a32);}};_0x5a2944[_0xac8a75(-0x172,-0x107,-0x8b,-0x196)](updateNovelaiCharRefImagePreview,null);function _0x34e896(_0x741080,_0x2e05be,_0x59fc1e,_0x1e2c39){return _0xb3a1e5(_0x741080-0x149,_0x741080- -0x1f2,_0x59fc1e-0x1b2,_0x59fc1e);}function _0xac8a75(_0x31ae95,_0x2224a2,_0x196566,_0x12f0c8){return _0xb3a1e5(_0x31ae95-0x1ef,_0x2224a2- -0x639,_0x196566-0x1d6,_0x31ae95);}dbs[_0x34e896(0x32b,0x3a9,0x38b,0x29e)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x510f96){const _0x2b8cc4={'nVoUk':function(_0x2fc6d4,_0x40985d){return _0x2fc6d4===_0x40985d;},'dnBvP':_0x5a815d(0x4e,0xb7,0x62,0x29),'GjNvd':function(_0x38253d,_0x5c2f1){return _0x38253d(_0x5c2f1);},'PYQYz':function(_0x52105c,_0x41add6){return _0x52105c(_0x41add6);},'ObSMG':_0x5a815d(0x15b,0x11e,0x181,0xed)+_0x5a815d(0xa4,0xbb,0xae,0x7a)+'elAI\x20char\x20'+_0x76706b(0x27,0x64,0xa7,0x9e),'xZNZt':function(_0x7b854b,_0x47f47f){return _0x7b854b(_0x47f47f);},'YhXeV':function(_0x55164c,_0x23105d){return _0x55164c+_0x23105d;},'YWgZd':_0x5a815d(0x166,0xff,0xe1,0xfc)},_0x1bc68c=_0x510f96['target'][_0x76706b(0x73,0x69,0x84,0xe0)][-0x26ab*-0x1+-0x2*0x24b+-0x2215];function _0x5a815d(_0x4bf413,_0x32685d,_0xb40e09,_0x5f43e6){return _0xb3a1e5(_0x4bf413-0x4b,_0x32685d- -0x506,_0xb40e09-0xb4,_0x5f43e6);}function _0x76706b(_0x2ded48,_0x9eae1,_0x3acfe7,_0x353d0b){return _0x1837a1(_0x353d0b,_0x9eae1-0x6a,_0x3acfe7-0x20,_0x2ded48- -0x14a);}if(!_0x1bc68c)return;try{if(_0x2b8cc4[_0x76706b(-0xa,-0x5f,0x61,-0x2d)](_0x76706b(0x74,0x80,0xe0,0xb7),_0x2b8cc4[_0x76706b(0x64,0xdf,0x96,0xc8)])){const _0x5684d6=await _0x2b8cc4[_0x5a815d(-0xa,0x32,0xc,-0x54)](processUploadedImage,_0x1bc68c);_0x2b8cc4[_0x5a815d(-0xe,0x2e,0x8b,-0x28)](updateNovelaiCharRefImagePreview,_0x5684d6);}else{const _0x32432d=_0x2fcc99?function(){function _0x5cb289(_0x396596,_0x2c9653,_0x4a47f8,_0x181601){return _0x5a815d(_0x396596-0xe,_0x2c9653-0xf3,_0x4a47f8-0x47,_0x4a47f8);}if(_0x6a0b25){const _0x199adf=_0x344d03[_0x5cb289(0x1e5,0x172,0x1eb,0x13b)](_0x1b8b15,arguments);return _0x5117b3=null,_0x199adf;}}:function(){};return _0x2f7d88=![],_0x32432d;}}catch(_0x1b0e12){console[_0x5a815d(0x13b,0xc0,0xe8,0xa9)](_0x2b8cc4[_0x76706b(0x65,0x88,0x86,0x51)],_0x1b0e12),_0x2b8cc4[_0x5a815d(0xb8,0xc2,0xd5,0xd6)](alert,_0x2b8cc4['YhXeV'](_0x2b8cc4['YWgZd'],_0x1b0e12[_0x76706b(-0x12,0x25,0x2e,-0x6e)]));}}function updateComfyUIImagePreview(_0x5ae0dc){const _0x5afe10={};_0x5afe10[_0x59f6f0(0x224,0x2c1,0x23a,0x2a1)]=_0x18362f(0xa,-0x10,0x40,0x86),_0x5afe10[_0x18362f(0x30,-0x48,-0xb,-0x16)]='flex',_0x5afe10[_0x59f6f0(0x25e,0x296,0x24a,0x24d)]='comfyui-re'+_0x18362f(0x16,0x4,0x71,-0x46)+'-btn';function _0x59f6f0(_0x164226,_0x1bd091,_0x332cf0,_0x3f3447){return _0x1837a1(_0x1bd091,_0x1bd091-0x1b3,_0x332cf0-0x160,_0x332cf0-0x12a);}_0x5afe10[_0x59f6f0(0x326,0x233,0x2b7,0x28f)]=function(_0x4c4467,_0x27aa07){return _0x4c4467!==_0x27aa07;},_0x5afe10[_0x18362f(0xe,0x73,-0x1d,-0x2)]=_0x18362f(0x9,-0x23,-0x6,0x3e),_0x5afe10['Sjhgi']=_0x59f6f0(0x2ea,0x31b,0x2da,0x29a)+'x',_0x5afe10['aIUwc']=function(_0x10ee80,_0x5a716f){return _0x10ee80!==_0x5a716f;};function _0x18362f(_0x31f712,_0x2bbb40,_0x426f0e,_0x3881a5){return _0xb3a1e5(_0x31f712-0x1f2,_0x31f712- -0x530,_0x426f0e-0x1ac,_0x426f0e);}_0x5afe10[_0x18362f(0x18,0x86,0x65,0x5)]=_0x59f6f0(0x2be,0x22f,0x256,0x271),_0x5afe10[_0x18362f(0xd8,0xcc,0x6a,0xd2)]=_0x59f6f0(0x2ff,0x21a,0x2a8,0x249);const _0x40d4ba=_0x5afe10,_0x34b8e8=document[_0x18362f(0xc1,0x9a,0xa6,0x4f)+_0x18362f(0x28,-0x39,0x49,0xa4)](_0x59f6f0(0x3af,0x2a9,0x328,0x2bd)+'ge2'),_0x327806=document[_0x59f6f0(0x2e4,0x23a,0x2b9,0x2e7)+_0x18362f(0x6a,0xd4,0x23,0x24)](_0x59f6f0(0x3bc,0x2f6,0x348,0x394)+_0x59f6f0(0x31a,0x335,0x33e,0x2f1)+_0x59f6f0(0x336,0x2a7,0x2e3,0x2d8)+'er\x20.st-cha'+_0x18362f(0x6d,0x40,0x55,0x7f)+_0x59f6f0(0x394,0x3a1,0x325,0x2c9)+'r'),_0x3f38c0=document[_0x18362f(0xc1,0x6a,0x90,0x147)+_0x59f6f0(0x304,0x286,0x283,0x24a)](_0x40d4ba[_0x59f6f0(0x1dc,0x236,0x24a,0x261)]);_0x34b8e8[_0x18362f(0x3a,0xae,-0x33,0x31)]&&_0x34b8e8[_0x18362f(0x3a,0x2a,0x39,0x70)][_0x18362f(0xa4,0xdf,0xab,0x12d)](_0x59f6f0(0x2aa,0x344,0x334,0x358))&&_0x40d4ba[_0x59f6f0(0x2fd,0x334,0x2b7,0x23c)](_0x34b8e8[_0x18362f(0x3a,0x3,0x72,0x94)],_0x5ae0dc)&&URL[_0x18362f(0x7a,-0x9,0x3c,0xb3)+'ctURL'](_0x34b8e8['src']);if(_0x5ae0dc)_0x34b8e8[_0x18362f(0x3a,0xae,-0x2f,0x41)]=_0x5ae0dc,_0x34b8e8[_0x18362f(0xb,-0x7f,0x36,-0x2)][_0x18362f(0x56,0xe3,0x7a,0x4e)]=_0x40d4ba[_0x59f6f0(0x285,0x243,0x269,0x243)],_0x327806['style']['display']=_0x40d4ba[_0x18362f(-0x21,-0x8f,0x1d,0x22)],_0x3f38c0['style']['display']=_0x40d4ba[_0x59f6f0(0x276,0x2f1,0x2d4,0x2b1)];else{if(_0x40d4ba[_0x59f6f0(0x2bb,0x30e,0x2f9,0x32e)](_0x40d4ba['meOWL'],_0x40d4ba[_0x59f6f0(0x2ff,0x31d,0x333,0x326)]))_0x34b8e8['src']='',_0x34b8e8[_0x59f6f0(0x2b0,0x2ce,0x266,0x1ff)][_0x59f6f0(0x25a,0x308,0x2b1,0x2d0)]=_0x40d4ba[_0x59f6f0(0x286,0x210,0x23a,0x2ac)],_0x327806[_0x18362f(0xb,-0x49,0x6f,0x0)][_0x59f6f0(0x2d9,0x280,0x2b1,0x260)]=_0x40d4ba[_0x59f6f0(0x20e,0x219,0x28b,0x2f5)],_0x3f38c0[_0x18362f(0xb,0x59,-0x50,0x22)]['display']=_0x40d4ba[_0x18362f(-0x21,0x41,0x64,-0x1f)],window[_0x18362f(0xaf,0x6d,0x32,0x5d)+_0x18362f(0x1a,0x10,-0x63,0x3d)]=null,comfyuiImageObjectURL=null;else{const _0x41354a=_0x18362f(0x64,-0x7,0x3f,0xa6)[_0x59f6f0(0x2ce,0x2ca,0x2a3,0x248)]('|');let _0x28cd1b=-0x61a*0x2+-0xeff+0x1b33;while(!![]){switch(_0x41354a[_0x28cd1b++]){case'0':_0x4cf98c[_0x18362f(0xd2,0x128,0x111,0x152)+'fImage']=null;continue;case'1':_0x130c20[_0x18362f(0xb,0x31,-0x3a,0x6d)]['display']=_0x40d4ba[_0x59f6f0(0x200,0x252,0x23a,0x1b1)];continue;case'2':_0x54d8b3[_0x59f6f0(0x2aa,0x304,0x295,0x20c)]='';continue;case'3':_0x32a7b6[_0x59f6f0(0x226,0x22f,0x266,0x271)]['display']=_0x40d4ba['QsEtQ'];continue;case'4':_0x4272ee['style']['display']=_0x40d4ba['jFhDu'];continue;}break;}}}}function _0x420c(){const _0x49940b=['reDArhq','sNr6uK8','l3vWBg9Hzc9PBq','rxjYB3iGChjVyW','zwXLy3qTy2HHCG','vNzxreW','ienVBwz5vuKGAq','ExvPx3jLzL9PBq','D2DYvfa','ie5VDMvSquKGvG','surdre0','AKzOrhu','ywDLoG','y2fJAgvFBM92zq','u3zlAfe','uMrKtMq','i25VDMvSywKTyW','reL2uhm','wxLJAw8','wer3wva','BgfPx3zPyMvFDa','z3LYq2S','zhrgteS','mti0mtC4mLf5yMf1CW','lwj0BG','C3rVCMvezwXLDa','ANnVBG','u2fAvw0','5lIk5lYG5AsX6lsLoIa','i25VDMvSywKTCG','y2Dztfu','sg5mB0C','Be16sgm','ssbbueNLNldLNydJGii','yxbWzw5K','vhPdBwO','kcGOlISPkYKRkq','r2XKAeG','sNncA1i','EKHyCKu','z3nnsgO','yMrlwe4','vfjOzK8','ANrzsKy','rMXOBKu','BwfNztO','BhDzDxm','s09yD0e','ufLrwxO','suDty2O','Bw92zs1JAgfYlq','BwvZC2fNzq','r2PoDMq','yMXVy2S','BM9Uzq','C3r5Bgu','Aw1Hz2uVCg5N','AxDlqxa','zuXKs0e','BLzVvwS','zs1IDg4','BMX5','z2vFBMfPx2nOyq','rwHJy2u','swHisfi','zMLUza','Bw92zs1PBwfNzq','C3rVCMvszwfKvW','Bwvpv0W','AgfYlxjLzI1PBq','A2fVDhvWAwfU','ignHy2HLihrVia','vwnerg0','A3L1zfm','y29TzNL1As1Yzq','EuDyr1G','nhWWFdf8mNWZ','wuP3tNO','BvHwufC','zwXLy3qTAw1HzW','sKXcBxa','vvjm','ALDuuu4','s21UEuO','qNLjza','zuzmzu8','y3jLyxrLt2jQzq','uvLWC0u','EgT1AwG','DgfYz2v0','AwjLigLTywDLoG','AfnWwe8','uxnfDfe','Aw5NignHy2HLza','AgzmC0i','z2vFBM92zwXHAq','zw1VDMuTy2HHCG','v092whe','EuLcA1a','Bgn5zuO','i2nVBwz5DwKTCW','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','C3jJ','rKDdq1O','Auvjuhu','ihrVihvWzgf0zq','CMfUC2zLCL9PBq','s0HOtNu','CMvMigLTywDLoG','yMjxr3e','CML0zq','mhW0Fdf8mNWZ','qNfUz2m','CIaUC3qTy2HHDa','u2Dyyxm','ENb4Dwu','C3bSAxq','zgf0ytPPBwfNzq','BLfcqwK','BMfTzq','mxWYFdb8m3W0','zLjlrw8','ywDLlxbYzxzPzq','vuNLM77NIyC6ia','ywTdsgu','ufjiqLa','ruXeyum','igzYB20GB2XKia','BK51zKK','yxbWBhK','zgLZCgXHEq','zKLTywDL','ihjLlxvWBg9Hza','tMfTzq','ChLdzhe','nZq5rKrUtwP2','EgPqsKi','Aw1Hz2u','CxvLCNLtzwXLyW','y2fJAguGzM9YBq','y29TzNL1AvvYBa','txvftgy','r2frB0O','CMvHzefZrgf0yq','mNWXFdn8nhWW','CMvMlwLTywDLlq','y2feAK4','Dg9tDhjPBMC','tLfRs0C','CMP4uuq','Dg9Y','vhfus0e','DLL0wNG','Dhu4lwLTywDLlq','zgf0yq','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','C2vYDMvYrMLSzq','rxjYB3iGBg9Hza','5zUE5PwW5O2UoG','C3rVCMvszwfKtW','mZe5mZG3nwP2CuXvrq','vgPWq2q','tNLWBKW','B3fzsxO','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','u2POz2K','CMv2B2TLt2jQzq','shLRDKG','yNrU','zg5cDLa','t2jttuC','Aw5SAw5LlwzSzq','CujKt28','C2zNzNO','ugfUDwq','DNvHEwq','v2DywuK','zMXLEa','CL9Yzwy','CMvZDwX0','zxCTy29UDgfPBG','DvbQDhC','DtGTAw1Hz2uTCa','6k+35ywi6k6+572Uq29TzNLv','zMLSzxm','rujuq2S','yxqUifbSzwfZzq','i25VDMvSywKTCW','C2vHCMnO','zxnZAw5Nie5VDG','D2fYBG','DgHLig5LDYbMBW','Ehv3rMC','EwfQDLq','zxjYB3i','5zMO6l+u5zUE5PwW5O2UoIa','EfPowNq','yw9MyuO','5lUo57Yt5A2y5yQG6l29q29TzNK','uhvTquS','ywDL','C3rYAw5NAwz5','yuLvD2m','AvHsqMC','wePKvgy','Df9UB3zLBgfP','vNb6uNG','6zsz6k+V6k+M5OofoG','C3rHCNrZv2L0Aa','i2nVBwz5DwKTCG','BMfPm1zPyMvuCG','vgHHqwK','t1Lwtu4','lxjLzI1PBwfNzq','vxH6Bxe','AgnwB1e','Bg9N','sMzcsuq','y2HHBMDL','y29TzNL1AwnHBG','CNvhzeu','y2fJAgvFy29TzG','nZC4ndm2meTfD1fRBa','6k+M5OofoIa','BM92zwXHAs1Yzq','ueHVuKO','mtK5ntGYnezMq0TZBa','Aw1Hz2vjBNb1Da','rg90zKi','z2uY','sg5JwNm','mNWXFdn8nhWWFa','rLHHEwu','BgfJzwHVBgrLCG','DMX3uMK','ue9tva','odCZnJzXB2LPqMG','z2v0rwXLBwvUDa','zwzFAw1Hz2u','y3rvuKW','i2LTywDLsw5WDq','Dhb3wKS','x25HAv9JAgfYxW','svzuC1u','sM9hDeq','yxvcz0K','CgXHy2vOB2XKzq','zxiGlNn0lwnOyq','rhHzuvu','ChjLDMLLD0LTyq','zNLvssbPBwfNzq','mty2nJa1mNbnqKTTyG','vxHhugW','CMvM','BMfPm0nOyxjszq','vfzZugO','EgnYzLO','5zU+54Mh5Ase55cg5AsX6lsLoIa','mJC3mZqYmhbeEfDrtq','x25VDMvSywK','zuLUDuC','yMXVyJO','mxW0Fdj8mhWZ','y2XPy2S','yMXVyG','yw5ZzMvYsw1HzW','m0nYzwrVCa','q3LdtMG','wePQvu4','Dgv4Da','uevnq28','BwfNzs1WCMv2Aq','sxrYqwC','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','z3Lcr20','CLzyDNq','x3jLzG','CM1HDc4','B2LnrMi','yMffA3u','u2nXrNa','i2nVBwz5DwKTAq','igzYB20Gy2fJAa','r29mEK0','Ahbnrhu'];_0x420c=function(){return _0x49940b;};return _0x420c();}function _0x591f(_0x3fa89d,_0x1e5002){_0x3fa89d=_0x3fa89d-(-0x31d+0x751*0x1+0x2e1*-0x1);const _0x37aea3=_0x420c();let _0x1060e0=_0x37aea3[_0x3fa89d];if(_0x591f['NbNwUA']===undefined){var _0x368861=function(_0x4f3df0){const _0x4b9e13='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2de344='',_0x382122='',_0x4212e7=_0x2de344+_0x368861;for(let _0x568abc=-0x15bb*-0x1+-0x886+-0x467*0x3,_0x1bfabf,_0xbd3afa,_0x344463=-0x19a*0x8+0x1b7d+-0x1*0xead;_0xbd3afa=_0x4f3df0['charAt'](_0x344463++);~_0xbd3afa&&(_0x1bfabf=_0x568abc%(-0x1*0x1e66+0x124b+0xc1f)?_0x1bfabf*(0x23b9+-0x5d1+-0x49*0x68)+_0xbd3afa:_0xbd3afa,_0x568abc++%(0x1b9e*0x1+-0x2659+0x3*0x395))?_0x2de344+=_0x4212e7['charCodeAt'](_0x344463+(0x186f+-0x153*-0x1+-0x19b8))-(-0x1af2+0x2f5*0x5+0xc33)!==0x10d*-0x13+0x40d*0x1+0xfea?String['fromCharCode'](-0x10c9+-0x31*-0x7e+-0x656*0x1&_0x1bfabf>>(-(0xfdf*0x2+0x6c5+0x1*-0x2681)*_0x568abc&-0x35a+0x110c+-0x2*0x6d6)):_0x568abc:-0x1271+-0x1db+0x144c){_0xbd3afa=_0x4b9e13['indexOf'](_0xbd3afa);}for(let _0x54a48a=-0xb55+-0x1ea+-0xd3f*-0x1,_0x2bb7ff=_0x2de344['length'];_0x54a48a<_0x2bb7ff;_0x54a48a++){_0x382122+='%'+('00'+_0x2de344['charCodeAt'](_0x54a48a)['toString'](-0x1*-0x7ed+-0x1817*-0x1+0x14*-0x199))['slice'](-(0xb*0x256+-0x1cf*-0x8+-0x1414*0x2));}return decodeURIComponent(_0x382122);};_0x591f['ZbkVvi']=_0x368861,_0x591f['iqYcil']={},_0x591f['NbNwUA']=!![];}const _0x222c39=_0x37aea3[-0x1*-0x1355+0x22ef+-0xd91*0x4],_0x1ec2d1=_0x3fa89d+_0x222c39,_0x533a9=_0x591f['iqYcil'][_0x1ec2d1];if(!_0x533a9){const _0x6fdc2=function(_0x6823ea){this['DVviGN']=_0x6823ea,this['peVggX']=[0x2*0x214+0x1*0x2b4+-0x6db,0xeef+0xf6b+0x25*-0xd2,-0x2*-0x3f5+0x1f04*-0x1+0x1*0x171a],this['qqHfGH']=function(){return'newState';},this['yEOdyB']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['xwNkox']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x6fdc2['prototype']['xWIWam']=function(){const _0x56ac3b=new RegExp(this['yEOdyB']+this['xwNkox']),_0x33e96b=_0x56ac3b['test'](this['qqHfGH']['toString']())?--this['peVggX'][0x10*0x79+-0xa*0x2bd+-0x23*-0x91]:--this['peVggX'][-0x322+-0xc02+0xf24];return this['FQZMoF'](_0x33e96b);},_0x6fdc2['prototype']['FQZMoF']=function(_0x5d6a4d){if(!Boolean(~_0x5d6a4d))return _0x5d6a4d;return this['HUVcwi'](this['DVviGN']);},_0x6fdc2['prototype']['HUVcwi']=function(_0x1095c7){for(let _0x5448f7=-0x4d*-0x5+-0xe5*0x3+0x12e,_0x26d9e6=this['peVggX']['length'];_0x5448f7<_0x26d9e6;_0x5448f7++){this['peVggX']['push'](Math['round'](Math['random']())),_0x26d9e6=this['peVggX']['length'];}return _0x1095c7(this['peVggX'][0x1*0x1b15+-0x25b4+-0x1*-0xa9f]);},new _0x6fdc2(_0x591f)['xWIWam'](),_0x1060e0=_0x591f['ZbkVvi'](_0x1060e0),_0x591f['iqYcil'][_0x1ec2d1]=_0x1060e0;}else _0x1060e0=_0x533a9;return _0x1060e0;}function removeComfyUIImage(){function _0x1ec7a8(_0x381bf8,_0x16e621,_0x48bc14,_0x4595ee){return _0x1837a1(_0x48bc14,_0x16e621-0x172,_0x48bc14-0x122,_0x16e621- -0x56);}const _0x12954a={'lcyeJ':function(_0x381f6d,_0x595000){return _0x381f6d(_0x595000);}};_0x12954a[_0x1ec7a8(0x160,0x112,0xb0,0xf4)](updateComfyUIImagePreview,null),dbs['storeDelet'+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x6e9683){const _0x4ef691={'DxYQU':_0xcee431(-0xd4,-0xca,-0x25,-0x8c),'Yycio':_0x1c4a58(0x541,0x563,0x5b4,0x5c4),'Ehcce':function(_0x2955a2,_0x354976){return _0x2955a2(_0x354976);},'JtzRO':function(_0x49d47a,_0x1242ea){return _0x49d47a+_0x1242ea;},'xkuih':_0xcee431(-0x3,0x47,0x50,-0x1d)+':\x20','hSpXO':_0x1c4a58(0x62f,0x5d1,0x5a4,0x564)+':','NQkKG':function(_0x4777a1){return _0x4777a1();},'HncZs':_0xcee431(0xc7,0x19,-0x37,0x38)+_0x1c4a58(0x606,0x612,0x5cc,0x659),'RddNd':_0xcee431(-0xff,-0x93,0xe,-0x77)+'move-image'+_0x1c4a58(0x584,0x545,0x567,0x4f8),'rVXvt':_0xcee431(-0x4a,0x1b,0x90,0x44),'aofaJ':function(_0x57218f,_0x1f0c40){return _0x57218f!==_0x1f0c40;},'ruGdE':_0xcee431(0x15,-0x77,0x6e,-0x16)+'x','pyCdq':_0xcee431(-0x4a,-0x38,0x5a,0x26)+'5','PHoRJ':'flex','vuayd':_0xcee431(0x3e,-0x60,0x8a,-0x1),'vYtZx':_0xcee431(-0x2b,0x47,0x8d,0x30),'KmnyJ':function(_0x205ace,_0x55a52c){return _0x205ace(_0x55a52c);},'TqTKA':function(_0xee04af,_0x59ec84){return _0xee04af===_0x59ec84;},'ssXAo':_0xcee431(-0x67,-0xc4,-0xb6,-0x81),'TVsPj':_0xcee431(-0x19,0x1f,0x2c,-0x1f),'WOvXq':_0xcee431(-0xf,-0x54,-0x90,-0xa)+_0xcee431(-0x26,-0x34,-0x2e,-0xa0),'PEMCo':function(_0x5c551f,_0x1057ee,_0x996ff0){return _0x5c551f(_0x1057ee,_0x996ff0);},'JLBmp':_0xcee431(-0xb,0x25,-0x64,0x2a),'yajvT':function(_0x50738d,_0x18c150){return _0x50738d!==_0x18c150;},'GaQoJ':_0xcee431(0x39,0xed,0x1b,0x64),'YJwNz':'cAjGG','nQBAi':function(_0x7faf68,_0x2a366c){return _0x7faf68(_0x2a366c);},'TjpCd':_0xcee431(0xc,0x66,-0x15,-0x26)+_0xcee431(0x50,-0x6b,0x2d,-0x23),'oqYIz':_0xcee431(0x33,0x38,-0x1d,0xa),'DiLyG':_0x1c4a58(0x5fa,0x5d4,0x565,0x585),'UwaBT':function(_0x2daa68,_0xa8a6cf){return _0x2daa68(_0xa8a6cf);},'TRhfO':function(_0x2d79f8,_0x234026){return _0x2d79f8+_0x234026;},'JsBkR':_0xcee431(0x42,-0x69,-0x72,0xe),'ELDaC':_0xcee431(-0x22,0x1c,-0xce,-0x63),'jWTQN':_0xcee431(-0x8a,-0x2b,-0xf6,-0xae),'mXVPW':function(_0x3cee02){return _0x3cee02();}};function _0xcee431(_0x43f49e,_0x36c526,_0x5be738,_0x3f67d8){return _0x1837a1(_0x43f49e,_0x36c526-0x1f2,_0x5be738-0x4e,_0x3f67d8- -0x1c6);}const _0x4f0d15=extension_settings[extensionName],_0x50bb76=_0x6e9683['target']['files'][-0x1*-0x25b3+0xeab*0x1+-0x345e];if(!_0x50bb76)return;function _0x1c4a58(_0x7a402b,_0x39209c,_0x2b3517,_0x1f1126){return _0xb3a1e5(_0x7a402b-0x75,_0x39209c-0x29,_0x2b3517-0x1a9,_0x1f1126);}try{if(_0x4ef691[_0x1c4a58(0x58d,0x5dc,0x660,0x650)]===_0x4ef691[_0xcee431(-0x61,-0x18,-0x1a,-0x29)])_0x5c1a55[_0x1c4a58(0x5bd,0x593,0x5e9,0x576)]=_0x3cf822,_0x52e49b['style'][_0xcee431(-0xb1,0x1d,-0x42,-0x3f)]=_0x4ef691['DxYQU'],_0x11cb88['style'][_0xcee431(-0x7d,-0x9f,-0xa0,-0x3f)]=_0x4ef691[_0xcee431(-0xe6,-0x108,-0x3b,-0xaf)],_0x5d49dc[_0xcee431(-0xab,0x0,-0xd,-0x8a)][_0x1c4a58(0x5e8,0x5af,0x520,0x5f6)]=_0x1c4a58(0x626,0x5d8,0x5da,0x62f)+'x';else{const _0x36551a=await processUploadedImageToBlob(_0x50bb76),_0x3ffacc=URL[_0x1c4a58(0x54c,0x583,0x59f,0x529)+_0xcee431(0x38,0xa6,-0x48,0x2e)](_0x36551a);comfyuiImageObjectURL=_0x3ffacc,_0x4ef691['KmnyJ'](updateComfyUIImagePreview,_0x3ffacc);const _0x4a2acd=new FormData();_0x4a2acd[_0x1c4a58(0x585,0x54f,0x58d,0x5ce)](_0xcee431(0x2,-0x52,-0x2e,-0x38),_0x36551a,_0x50bb76[_0xcee431(0xa,-0x51,0x25,-0x4a)]);let _0x40d75e=_0x4f0d15[_0x1c4a58(0x550,0x5b9,0x5b4,0x531)]['trim']();if(!_0x40d75e){if(_0x4ef691[_0xcee431(-0x87,-0x55,-0xb5,-0x2a)](_0x4ef691['ssXAo'],_0x4ef691[_0xcee431(0x8d,0xa6,0xb3,0x3e)])){const _0x391b5e=_0x5d994a[_0xcee431(-0xb5,-0xb,-0x58,-0x40)](_0x4e58d6,arguments);return _0x22f72f=null,_0x391b5e;}else{_0x4ef691[_0xcee431(-0xcd,-0xbb,-0xd2,-0x82)](alert,_0x4ef691[_0xcee431(-0xbe,-0x81,-0x51,-0x60)]),_0x4ef691[_0x1c4a58(0x54c,0x5c1,0x560,0x5a1)](removeComfyUIImage);return;}}const _0x4f2ed2=await _0x4ef691[_0xcee431(0x73,0x6a,0xab,0x4d)](fetch,_0x40d75e+(_0xcee431(0xc5,0xde,-0x11,0x5e)+'age'),{'method':_0x4ef691[_0xcee431(-0x70,0x8,-0x75,-0x71)],'body':_0x4a2acd});if(_0x4f2ed2['ok']){if(_0x4ef691[_0x1c4a58(0x55f,0x5ee,0x5f7,0x665)](_0x4ef691[_0x1c4a58(0x56f,0x5bb,0x58a,0x542)],_0x4ef691[_0xcee431(-0xc1,-0x91,-0x9c,-0x74)])){const _0x1b7db8=await _0x4f2ed2[_0xcee431(-0xf7,-0x29,-0xd7,-0xa7)]();window[_0x1c4a58(0x5d0,0x608,0x5a1,0x585)+_0x1c4a58(0x55b,0x573,0x57e,0x5f6)]=_0x1b7db8[_0x1c4a58(0x566,0x5a4,0x581,0x55b)],_0x4ef691[_0xcee431(-0x7b,-0x61,0x3c,-0x4b)](addLog,_0x1c4a58(0x61c,0x592,0x537,0x5c8)+_0xcee431(0x42,0x36,0x4c,0x2)+JSON[_0x1c4a58(0x5f3,0x5f6,0x67f,0x671)](_0x1b7db8)),console['log'](_0x4ef691[_0x1c4a58(0x63d,0x5ce,0x5bc,0x587)],_0x1b7db8);const _0x3599ac=new FileReader();_0x3599ac['onloadend']=()=>{const _0x189958=_0x3599ac[_0x5c28a6(0x3b,0xc9,0xa5,0xab)],_0x1e49f9={};_0x1e49f9['data']=_0x189958,_0x1e49f9[_0x5c28a6(0x43,0x60,0x112,0x94)+_0x5c28a6(-0xc,0xb5,0x7d,0x7d)]=_0x1b7db8[_0x4a423c(-0xf5,-0x8a,-0x6e,-0x47)];const _0x25ac36=_0x1e49f9,_0xf844ce={};function _0x5c28a6(_0x3b696f,_0x590962,_0xc04f31,_0x105547){return _0x1c4a58(_0x3b696f-0x146,_0x105547- -0x535,_0xc04f31-0x3,_0x590962);}_0xf844ce['id']=COMFYUI_REF_CACHE_KEY;function _0x4a423c(_0x5d27be,_0x2eba40,_0x2b34ae,_0xebd954){return _0xcee431(_0x5d27be,_0x2eba40-0xa,_0x2b34ae-0x16b,_0x2eba40- -0x40);}_0xf844ce[_0x5c28a6(0xc,0xa7,0x87,0x92)]=_0x25ac36,dbs[_0x4a423c(-0xd7,-0xbe,-0x84,-0x68)+_0x5c28a6(-0xd,0x8a,-0x1d,0x66)](_0xf844ce);},_0x3599ac[_0x1c4a58(0x5d4,0x5bc,0x5bd,0x609)+_0x1c4a58(0x58f,0x57e,0x52f,0x571)](_0x36551a);}else _0x4ef691[_0x1c4a58(0x543,0x56c,0x53f,0x4de)](_0x39f93c,_0x4ef691[_0xcee431(0x2e,0xb6,0xd,0x5d)](_0x4ef691[_0xcee431(-0x36,-0x29,-0x88,-0x69)],_0x5f330f[_0xcee431(-0x9b,-0x101,-0xbc,-0x8e)])),_0x1303e6[_0x1c4a58(0x5d3,0x5ef,0x5d2,0x5e5)](_0x4ef691[_0x1c4a58(0x4ff,0x588,0x5fd,0x5c6)],_0x91e1e1),_0x4ef691[_0xcee431(-0x4d,-0xf4,0xb,-0x82)](_0xd47c1b,'图片上传失败,\x20错误'+_0x1c4a58(0x598,0x60c,0x5ad,0x60b)+_0xf7f4e7[_0xcee431(0x7e,-0x19,-0x2a,0x8)](_0x5a3ef3)),_0x4ef691[_0x1c4a58(0x57b,0x5c1,0x54a,0x54f)](_0x2b3a39);}else{if(_0x4ef691[_0x1c4a58(0x677,0x5ee,0x638,0x5bd)](_0x4ef691[_0xcee431(-0xac,0x2e,-0x1c,-0x1e)],_0x4ef691['DiLyG'])){const _0x13ccd4=await _0x4f2ed2[_0x1c4a58(0x5d7,0x63a,0x694,0x5f5)]();_0x4ef691['UwaBT'](alert,_0x4ef691[_0xcee431(-0x11d,-0x67,-0xef,-0x97)](_0xcee431(-0x21,-0xba,-0x83,-0xa5),_0x13ccd4)),_0x4ef691[_0xcee431(-0x8f,0xd,-0xae,-0x6e)](addLog,'图片上传失败,\x20错误'+_0xcee431(0xa4,0x9d,0x53,0x1e)+_0x13ccd4),console['error'](_0x4ef691[_0x1c4a58(0x55e,0x553,0x565,0x52d)],_0x13ccd4),_0x4ef691['NQkKG'](removeComfyUIImage);}else{const _0x395f4c=_0x68a943['getElement'+_0x1c4a58(0x5cb,0x581,0x525,0x597)](_0x4ef691[_0xcee431(0x50,0x37,-0x37,0x25)]),_0x36726b=_0x594611[_0xcee431(-0x65,0x24,-0xa,-0x37)+_0x1c4a58(0x579,0x5c3,0x599,0x5af)](_0x1c4a58(0x67e,0x646,0x61d,0x614)+_0x1c4a58(0x654,0x63c,0x632,0x6a3)+'ew-contain'+'er\x20.st-cha'+_0xcee431(0x3b,0x0,0xc,-0x28)+'placeholde'+'r'),_0x4adeef=_0x19ffc7[_0x1c4a58(0x59b,0x61a,0x683,0x60e)+_0x1c4a58(0x5d4,0x581,0x60e,0x5a2)](_0x4ef691[_0x1c4a58(0x554,0x53c,0x5ad,0x524)]);_0x395f4c[_0x1c4a58(0x606,0x593,0x55e,0x5f0)]&&_0x395f4c[_0x1c4a58(0x59a,0x593,0x524,0x5a5)][_0x1c4a58(0x5d2,0x5fd,0x58a,0x58f)](_0x4ef691[_0x1c4a58(0x627,0x640,0x69d,0x653)])&&_0x4ef691[_0xcee431(0x8e,-0x76,-0x7c,0x4)](_0x395f4c[_0xcee431(-0xd0,-0x50,-0xb1,-0x5b)],_0xed30e9)&&_0xcc5ca4['revokeObje'+'ctURL'](_0x395f4c[_0x1c4a58(0x5b4,0x593,0x585,0x57b)]);if(_0x7246d1)_0x395f4c['src']=_0x3f6810,_0x395f4c[_0xcee431(-0xb1,-0x7c,-0x78,-0x8a)][_0x1c4a58(0x63c,0x5af,0x60c,0x566)]=_0x4ef691[_0xcee431(0x47,0x26,0x6c,0x37)],_0x36726b['style']['display']=_0x4ef691['Yycio'],_0x4adeef[_0xcee431(-0xf8,-0x1a,-0x25,-0x8a)][_0xcee431(-0x26,-0x72,-0x52,-0x3f)]=_0x4ef691[_0x1c4a58(0x589,0x609,0x58d,0x680)];else{const _0x4b6927=_0x4ef691[_0x1c4a58(0x5e2,0x5b3,0x57d,0x5a0)][_0x1c4a58(0x5f4,0x5a1,0x5b3,0x545)]('|');let _0x6bda8e=0x9db+0x2*-0xa60+-0x1*-0xae5;while(!![]){switch(_0x4b6927[_0x6bda8e++]){case'0':_0x1b4ba6[_0x1c4a58(0x5ea,0x608,0x622,0x606)+'kaotupian']=null;continue;case'1':_0x395f4c[_0x1c4a58(0x51d,0x564,0x4df,0x55f)][_0xcee431(-0x1c,-0x67,-0x73,-0x3f)]=_0x1c4a58(0x4f8,0x563,0x551,0x57b);continue;case'2':_0x395f4c[_0xcee431(-0xa5,-0xb4,0x0,-0x5b)]='';continue;case'3':_0x36726b[_0xcee431(-0xcb,-0xb4,-0xb2,-0x8a)]['display']=_0x4ef691[_0x1c4a58(0x5d8,0x60e,0x642,0x5eb)];continue;case'4':_0x4adeef[_0xcee431(-0x93,-0x4,-0x7,-0x8a)][_0xcee431(-0x2c,0x30,0x3b,-0x3f)]=_0x1c4a58(0x57b,0x563,0x4d7,0x5c8);continue;case'5':_0x4e135f=null;continue;}break;}}}}}}catch(_0x5f3d5a){_0x4ef691[_0xcee431(0x35,-0x8e,-0x28,-0x2a)](_0x4ef691[_0xcee431(-0x2d,0x1b,-0x8f,-0x43)],_0x4ef691[_0xcee431(-0x56,-0x5b,-0x25,-0x6f)])?_0x4ef691[_0x1c4a58(0x546,0x5c1,0x622,0x60e)](_0x160a1a):(alert(_0x4ef691[_0x1c4a58(0x52e,0x557,0x5bb,0x549)](_0x4ef691[_0xcee431(-0x82,-0x5f,-0x46,-0x69)],_0x5f3d5a[_0x1c4a58(0x500,0x560,0x5ab,0x5b6)])),console[_0xcee431(-0x52,-0x88,-0x2a,0x1)](_0x4ef691['hSpXO'],_0x5f3d5a),_0x4ef691['UwaBT'](addLog,_0x1c4a58(0x67f,0x63e,0x679,0x63c)+'详情:\x20'+JSON[_0x1c4a58(0x5ae,0x5f6,0x5f2,0x673)](_0x5f3d5a)),_0x4ef691[_0xcee431(-0xb,-0x80,-0x6d,-0x73)](removeComfyUIImage));}}async function loadCachedImages(){const _0x3b122b={'Panud':_0x41d8d2(0x572,0x4ec,0x471,0x4fe),'xbbSL':'flex','ItrAg':'none','XJjUN':function(_0x3cb0ea,_0x507bab){return _0x3cb0ea(_0x507bab);},'mhMRI':'Error\x20load'+_0x165798(-0xb8,-0x12d,-0x10a,-0xad)+_0x41d8d2(0x5ce,0x5ce,0x5d8,0x5b5)+_0x41d8d2(0x4a8,0x4c0,0x54e,0x4e9),'VvWDL':function(_0x18e74e,_0x54b777){return _0x18e74e!==_0x54b777;},'xcrfZ':_0x41d8d2(0x57d,0x545,0x4fd,0x53f),'QYpsE':function(_0x3e195a,_0x5da84c){return _0x3e195a===_0x5da84c;},'IXwKb':_0x41d8d2(0x538,0x603,0x5e0,0x584),'qRjyD':'string','zpxue':function(_0x40f136,_0x47c564){return _0x40f136(_0x47c564);},'hpMDu':'Loaded\x20Com'+_0x165798(-0x95,-0x90,-0xeb,-0x75)+_0x165798(-0x17f,-0x10b,-0x162,-0x182)+_0x41d8d2(0x4d1,0x53e,0x5a9,0x51a)+_0x41d8d2(0x4bf,0x541,0x53a,0x549)+_0x41d8d2(0x4e7,0x55a,0x54b,0x513)+_0x165798(-0x94,-0x121,-0x109,-0x196)+_0x41d8d2(0x478,0x4f1,0x4e5,0x4d6)+_0x165798(-0xf9,-0xcb,-0x7a,-0xec)+_0x165798(0x1a,-0x75,-0x65,-0xd0)};await dbs['openDB']();function _0x41d8d2(_0x8ba992,_0x9149e3,_0x4c2cc0,_0x9a2e7b){return _0x1837a1(_0x8ba992,_0x9149e3-0x1e1,_0x4c2cc0-0x15a,_0x9a2e7b-0x38a);}try{const _0x1fbb05=await dbs[_0x165798(-0x8a,-0xeb,-0x7f,-0x76)+_0x165798(-0x175,-0x14d,-0x1ac,-0x1b8)](NAI_VIBE_CACHE_KEY);_0x1fbb05&&_0x1fbb05['data']&&_0x3b122b[_0x165798(-0x88,-0x7e,-0x10b,-0xb)](updateNovelaiImagePreview,_0x1fbb05[_0x165798(-0x16c,-0xf0,-0xc3,-0x6b)]);}catch(_0x51ef96){console['error'](_0x3b122b['mhMRI'],_0x51ef96);}try{if(_0x3b122b[_0x165798(-0x84,-0x68,-0x80,-0x4f)](_0x3b122b['xcrfZ'],_0x3b122b[_0x41d8d2(0x5ba,0x56e,0x614,0x58f)])){const _0x173412=_0x3b122b[_0x41d8d2(0x511,0x530,0x4ba,0x53d)]['split']('|');let _0x252c56=0x1*-0x13d+-0x74d*-0x5+-0x2344;while(!![]){switch(_0x173412[_0x252c56++]){case'0':_0x42c38b['src']='';continue;case'1':_0x9d5ad7[_0x165798(-0x195,-0x153,-0xea,-0x1c7)][_0x165798(-0x106,-0x108,-0x7b,-0x152)]=_0x3b122b['xbbSL'];continue;case'2':_0x3c5356[_0x165798(-0x156,-0x153,-0x1bf,-0x165)][_0x165798(-0x141,-0x108,-0x15e,-0x151)]=_0x3b122b[_0x41d8d2(0x52f,0x60a,0x53d,0x59f)];continue;case'3':_0x1ded80[_0x41d8d2(0x5da,0x596,0x5b5,0x561)+_0x41d8d2(0x585,0x58d,0x53b,0x598)+'e']=null;continue;case'4':_0x3958db[_0x41d8d2(0x555,0x4f4,0x4b3,0x4c6)][_0x41d8d2(0x4de,0x4c7,0x529,0x511)]=_0x3b122b[_0x41d8d2(0x5d7,0x582,0x5a1,0x59f)];continue;}break;}}else{const _0x1d549e=await dbs[_0x41d8d2(0x537,0x531,0x502,0x52e)+_0x165798(-0xed,-0x14d,-0x181,-0xe3)](NAI_CHAR_REF_CACHE_KEY);_0x1d549e&&_0x1d549e['data']&&updateNovelaiCharRefImagePreview(_0x1d549e[_0x41d8d2(0x522,0x4ca,0x537,0x529)]);}}catch(_0x356cb8){if(_0x3b122b[_0x165798(-0xac,-0x133,-0x142,-0x170)](_0x41d8d2(0x51f,0x610,0x598,0x584),_0x3b122b['IXwKb']))console[_0x41d8d2(0x4fd,0x550,0x58c,0x551)]('Error\x20load'+_0x165798(-0xec,-0x12d,-0x1bb,-0xad)+'\x20NovelAI\x20C'+'har\x20Ref\x20im'+_0x41d8d2(0x50f,0x45a,0x4f9,0x49b),_0x356cb8);else{if(_0x3a375a){const _0x237bbe=_0x100b21[_0x41d8d2(0x4e6,0x48f,0x538,0x510)](_0x31ed2c,arguments);return _0x644469=null,_0x237bbe;}}}function _0x165798(_0x2a81ba,_0x34de8b,_0x43bc1e,_0x48b114){return _0xb3a1e5(_0x2a81ba-0x3e,_0x34de8b- -0x68e,_0x43bc1e-0x88,_0x2a81ba);}try{const _0x1d5387=await dbs[_0x41d8d2(0x565,0x540,0x5b7,0x52e)+_0x165798(-0x1b9,-0x14d,-0x168,-0xd3)](COMFYUI_REF_CACHE_KEY);if(_0x1d5387&&_0x1d5387[_0x165798(-0x141,-0xf0,-0x126,-0x169)]&&_0x1d5387['data']['data']&&_0x1d5387[_0x41d8d2(0x50f,0x5a6,0x54b,0x529)][_0x41d8d2(0x59e,0x538,0x53c,0x52b)+_0x41d8d2(0x4b8,0x571,0x51d,0x514)]){const _0x4e64aa=_0x1d5387['data'],_0x2440a1=await _0x3b122b[_0x165798(-0xfb,-0x7e,-0x96,-0xe9)](fetch,_0x4e64aa[_0x165798(-0xe8,-0xf0,-0x149,-0x99)]),_0x78577f=await _0x2440a1[_0x165798(-0xf3,-0x82,-0x79,-0x20)](),_0x181c82=URL[_0x41d8d2(0x516,0x508,0x569,0x4e5)+_0x165798(-0xef,-0x9b,-0xb0,-0x100)](_0x78577f);updateComfyUIImagePreview(_0x181c82),comfyuiImageObjectURL=_0x181c82,window['comfyuican'+_0x165798(-0x1b0,-0x144,-0xec,-0xe8)]=_0x4e64aa[_0x41d8d2(0x4a7,0x4dc,0x52f,0x52b)+_0x165798(-0xa9,-0x105,-0x18b,-0x166)],addLog(_0x165798(-0x66,-0xc4,-0xde,-0x129)+_0x165798(-0xcc,-0x10f,-0x142,-0x19c)+_0x4e64aa[_0x41d8d2(0x4a7,0x4d8,0x535,0x52b)+_0x41d8d2(0x509,0x4a7,0x56b,0x514)]),console[_0x165798(-0xb7,-0xb2,-0x9d,-0x91)]('Loaded\x20Com'+'fyUI\x20image'+_0x165798(-0xdc,-0x70,-0x83,-0xe8)+'e:\x20'+_0x4e64aa['serverFile'+'Name']);}else{if(_0x1d5387&&_0x3b122b[_0x165798(-0x173,-0x133,-0x114,-0x1ba)](typeof _0x1d5387['data'],_0x3b122b['qRjyD'])){const _0x41df07=await fetch(_0x1d5387['data']),_0x1e0fb6=await _0x41df07[_0x41d8d2(0x55e,0x5b6,0x51b,0x597)](),_0x70204b=URL[_0x165798(-0x110,-0x134,-0x122,-0xe3)+'ctURL'](_0x1e0fb6);_0x3b122b[_0x41d8d2(0x58f,0x56d,0x590,0x502)](updateComfyUIImagePreview,_0x70204b),comfyuiImageObjectURL=_0x70204b,console[_0x41d8d2(0x565,0x50e,0x4d1,0x54d)](_0x3b122b[_0x41d8d2(0x587,0x631,0x60a,0x5ab)]);}}}catch(_0x2aa305){console[_0x41d8d2(0x5d4,0x4ec,0x5de,0x551)]('Error\x20load'+'ing\x20cached'+_0x41d8d2(0x524,0x53c,0x537,0x5b2)+_0x41d8d2(0x547,0x478,0x4b7,0x4bc),_0x2aa305);}}export function initImageUpload(_0x1ba668){function _0x322a8f(_0x351f9e,_0x193128,_0x2f07ac,_0x2ffd1c){return _0xb3a1e5(_0x351f9e-0xf4,_0x351f9e- -0x44a,_0x2f07ac-0x0,_0x193128);}const _0x34e0ec={'DotfB':_0x3c4c3d(-0x1e2,-0x17d,-0x192,-0x147)+'_novelai','rjxQD':function(_0x445721){return _0x445721();},'GoLzM':_0x3c4c3d(-0x165,-0x115,-0x192,-0x12a)+_0x3c4c3d(-0x204,-0x1da,-0x183,-0x185)+_0x322a8f(0x1b7,0x20f,0x133,0x237),'mRUhi':_0x3c4c3d(-0x2c0,-0x203,-0x240,-0x29c),'nTYsr':function(_0x8b1b4e,_0x181714){return _0x8b1b4e===_0x181714;},'bdKXN':_0x3c4c3d(-0x1c8,-0x27b,-0x213,-0x29f),'DIvPs':function(_0x3da284){return _0x3da284();},'ThaAi':_0x322a8f(0x19d,0x14d,0x15a,0x182)+'2','anLmV':_0x3c4c3d(-0x16f,-0x1db,-0x1ba,-0x178)+_0x322a8f(0x109,0xfe,0xda,0x147)+_0x3c4c3d(-0x202,-0x218,-0x239,-0x25f),'IGScj':_0x322a8f(0x1c1,0x17b,0x241,0x226),'jtYJF':_0x322a8f(0x1aa,0x14c,0x1a6,0x154)+_0x322a8f(0x187,0x1ae,0x1ee,0x1e0),'JoGtD':_0x3c4c3d(-0x19a,-0x13f,-0x19b,-0x159),'jCgIK':_0x322a8f(0xd7,0xbd,0xac,0x101)+'emove-imag'+_0x3c4c3d(-0x27d,-0x259,-0x239,-0x237),'tbvWH':_0x3c4c3d(-0x25d,-0x2da,-0x258,-0x273)+_0x322a8f(0x11a,0x163,0x8d,0xf8)+_0x322a8f(0x18f,0x21d,0x1dc,0x14e)+_0x322a8f(0xd2,0x9b,0xc4,0xb6),'CwEsh':_0x3c4c3d(-0x1fb,-0x260,-0x211,-0x250)+'elect-imag'+_0x3c4c3d(-0x235,-0x20b,-0x239,-0x275),'IVTsU':_0x322a8f(0x18b,0x156,0x182,0x210)+'emove-imag'+_0x322a8f(0xf6,0x6c,0xa9,0x97)};_0x34e0ec[_0x3c4c3d(-0x22d,-0x2d6,-0x264,-0x2a4)](loadCachedImages),_0x1ba668[_0x3c4c3d(-0x234,-0x2b3,-0x234,-0x242)](_0x34e0ec['anLmV'])['on'](_0x34e0ec[_0x3c4c3d(-0x1b8,-0x298,-0x244,-0x2a3)],()=>{function _0x2e23b6(_0x37c727,_0x5b7025,_0x462a93,_0x7d7c6a){return _0x322a8f(_0x462a93- -0xec,_0x37c727,_0x462a93-0x165,_0x7d7c6a-0x1d5);}function _0x1fffc2(_0x82c741,_0x4af4fd,_0x1f388f,_0x40cca6){return _0x322a8f(_0x1f388f- -0x5d,_0x40cca6,_0x1f388f-0x1ef,_0x40cca6-0x25);}document['getElement'+_0x2e23b6(0x2f,-0x30,0x22,0x5f)](_0x34e0ec[_0x1fffc2(0x102,0x1d0,0x141,0x177)])[_0x1fffc2(0x120,0x1cf,0x164,0x1db)]();}),_0x1ba668[_0x322a8f(0xfb,0x89,0x11e,0x88)](_0x34e0ec[_0x3c4c3d(-0x2b6,-0x221,-0x24a,-0x1ce)])['on'](_0x34e0ec[_0x322a8f(0x1ae,0x1f4,0x191,0x217)],handleNovelaiImageUpload),_0x1ba668['find'](_0x34e0ec['jCgIK'])['on'](_0x34e0ec[_0x3c4c3d(-0x208,-0x251,-0x244,-0x220)],()=>{function _0x4e022b(_0x31e8db,_0x2f89a1,_0x317b87,_0x150e17){return _0x3c4c3d(_0x31e8db-0x19e,_0x2f89a1-0x130,_0x2f89a1-0x3fa,_0x150e17);}_0x34e0ec[_0x4e022b(0x28a,0x21a,0x1e9,0x23a)](removeNovelaiImage);});function _0x3c4c3d(_0x30b218,_0x2bdb10,_0xe371f3,_0x27c07c){return _0xb3a1e5(_0x30b218-0xb6,_0xe371f3- -0x779,_0xe371f3-0x4a,_0x27c07c);}_0x1ba668[_0x3c4c3d(-0x20e,-0x1c6,-0x234,-0x277)](_0x3c4c3d(-0x18a,-0x20b,-0x1ba,-0x1cb)+_0x322a8f(0x1db,0x1dd,0x1cf,0x214)+'-ref-image'+_0x322a8f(0xd2,0xa8,0xd9,0x7b))['on'](_0x34e0ec[_0x3c4c3d(-0x200,-0x1c3,-0x244,-0x2b0)],()=>{function _0x21d339(_0xaae79a,_0x36670d,_0x30e5cd,_0x171102){return _0x3c4c3d(_0xaae79a-0xe6,_0x36670d-0x168,_0xaae79a-0x2a4,_0x30e5cd);}function _0x454ad2(_0x54788b,_0x47a9f0,_0x304632,_0xf234b5){return _0x322a8f(_0xf234b5- -0x63,_0x47a9f0,_0x304632-0x129,_0xf234b5-0xd6);}document['getElement'+_0x21d339(0x83,0x90,0x4f,-0x7)](_0x34e0ec[_0x454ad2(0xf6,0x1af,0x130,0x172)])[_0x21d339(0x136,0x10e,0xa8,0x17a)]();}),_0x1ba668[_0x3c4c3d(-0x2b4,-0x289,-0x234,-0x24a)]('#imageInpu'+'t_nai_char'+_0x322a8f(0x1ce,0x1cd,0x16f,0x1df))['on'](_0x34e0ec[_0x3c4c3d(-0x1d0,-0x14e,-0x181,-0x16f)],handleNovelaiCharRefImageUpload),_0x1ba668[_0x3c4c3d(-0x1a6,-0x28d,-0x234,-0x278)](_0x34e0ec['tbvWH'])['on'](_0x3c4c3d(-0x121,-0x1e2,-0x16e,-0x13d),()=>{function _0x7be9d4(_0x15792f,_0x2d8f48,_0x348fcd,_0x476000){return _0x322a8f(_0x15792f- -0x14f,_0x348fcd,_0x348fcd-0x1a,_0x476000-0x14d);}function _0x51ed09(_0x1885c6,_0x188840,_0x101110,_0x15793f){return _0x322a8f(_0x15793f-0x100,_0x1885c6,_0x101110-0x11d,_0x15793f-0x167);}if(_0x34e0ec['nTYsr'](_0x34e0ec['bdKXN'],_0x34e0ec[_0x7be9d4(-0x6c,-0x62,0x10,-0x1)]))_0x34e0ec[_0x7be9d4(-0x84,-0x8b,0x7,-0x71)](removeNovelaiCharRefImage);else{_0x5a52e5[_0x7be9d4(-0x2f,-0x3f,-0x55,-0x7e)]=_0x3a14cd,_0x2b7b86[_0x7be9d4(-0x5e,0x2,0x2a,-0x98)]['display']=_0x34e0ec['mRUhi'],_0x2ed979[_0x7be9d4(-0x5e,-0x31,-0x2,-0x3b)]['display']=_0x51ed09(0x1a5,0x237,0x190,0x1f0),_0x5d7811['style']['display']=_0x7be9d4(0x16,0x58,0x78,0x4c)+'x';const _0xc17426=_0x8949ab[_0x7be9d4(-0x21,-0x38,-0x44,0x4b)](','),_0x3aad43=_0xc17426[0x1*-0x22e1+-0x1*-0xf5b+0x1386]['split'](':')[0x178d+0x4c8+-0x1c54]['split'](';')[-0xcf5+0x1e*-0xd3+0x25af];_0x34c358=_0x3aad43,_0x32fd37[_0x7be9d4(0x3d,0x34,0x6b,0x9e)+_0x7be9d4(0x74,0xa2,0x71,0xab)+'e']=_0xc17426[-0x1331+0x16+0x2*0x98e];const _0x9ba62c={};_0x9ba62c['id']=_0x33292e,_0x9ba62c[_0x7be9d4(0x5,0x63,-0x4c,0x6b)]=_0x479dfa,_0x3d8d1e[_0x51ed09(0x1da,0x1ca,0x1b4,0x1fd)+_0x51ed09(0x1c3,0x266,0x1ac,0x228)](_0x9ba62c);}}),_0x1ba668['find'](_0x34e0ec['CwEsh'])['on'](_0x322a8f(0x1c1,0x1cc,0x21a,0x1c6),()=>{function _0x4c85eb(_0x15229b,_0x3c9395,_0x3dc175,_0x4e2587){return _0x322a8f(_0x3dc175- -0x1f8,_0x15229b,_0x3dc175-0x130,_0x4e2587-0x10a);}function _0x15bb40(_0x96ba7,_0x42dd6e,_0x59141f,_0x23680e){return _0x3c4c3d(_0x96ba7-0xa4,_0x42dd6e-0x159,_0x96ba7-0x8c,_0x59141f);}document[_0x15bb40(-0xfc,-0xa6,-0x91,-0x78)+'ById'](_0x34e0ec[_0x4c85eb(-0x4f,-0x75,-0x6b,-0xda)])[_0x15bb40(-0xe2,-0xd1,-0x112,-0x12a)]();}),_0x1ba668[_0x3c4c3d(-0x28d,-0x27f,-0x234,-0x1f0)](_0x3c4c3d(-0x204,-0x111,-0x185,-0x136)+'t2')['on'](_0x34e0ec[_0x3c4c3d(-0x18c,-0x18f,-0x181,-0x1ae)],handleImageUpload2),_0x1ba668[_0x322a8f(0xfb,0xa2,0x85,0xd8)](_0x34e0ec[_0x322a8f(0x1ad,0x172,0x16e,0x1f0)])['on'](_0x322a8f(0x1c1,0x1f8,0x1dd,0x204),()=>{removeComfyUIImage();});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};