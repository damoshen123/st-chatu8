(function(_0x5b5856,_0x207556){const _0x626bf7=_0x5b5856();function _0x1f3153(_0x2621e4,_0x257e43,_0x48ace8,_0x31ed6b){return _0x4679(_0x2621e4-0x280,_0x31ed6b);}function _0x228944(_0x4ffae5,_0x7dd7ef,_0x4c1ebf,_0x3c6b84){return _0x4679(_0x7dd7ef- -0x3b7,_0x3c6b84);}while(!![]){try{const _0x2812db=-parseInt(_0x228944(-0x2d5,-0x2cc,-0x333,-0x2e8))/(-0xb6*0x1b+-0x6*0x56f+0x33cd)+parseInt(_0x228944(-0x21e,-0x225,-0x262,-0x288))/(0x17a2+-0x1693+-0x10d)+parseInt(_0x228944(-0x347,-0x304,-0x2f6,-0x360))/(0x6a1*-0x3+-0x1c8e+-0x7*-0x6ec)+parseInt(_0x228944(-0x2b1,-0x251,-0x1d2,-0x20c))/(0x21d*-0x4+0x1*-0x1f31+0x8f*0x47)*(parseInt(_0x228944(-0x2be,-0x26b,-0x241,-0x21d))/(-0x1b1+-0x23a7+0x1*0x255d))+-parseInt(_0x228944(-0x343,-0x305,-0x287,-0x2d2))/(0xd*-0x101+-0x97*-0xd+0x2*0x2b4)+parseInt(_0x228944(-0x252,-0x271,-0x27b,-0x201))/(-0x1a8f+0x1*-0xd93+0x2829)*(parseInt(_0x228944(-0x20d,-0x250,-0x2d0,-0x2be))/(-0x264+-0xec3+-0x53*-0x35))+-parseInt(_0x228944(-0x226,-0x25c,-0x21b,-0x269))/(-0x12e+-0x218*-0x5+0x17*-0x67)*(parseInt(_0x228944(-0x273,-0x281,-0x257,-0x2d1))/(0x223*-0x5+0x11*0x13a+-0xa21));if(_0x2812db===_0x207556)break;else _0x626bf7['push'](_0x626bf7['shift']());}catch(_0x1360aa){_0x626bf7['push'](_0x626bf7['shift']());}}}(_0x4a47,-0xf9952+0x127898+0xf*0x7ada));const _0xe45c7a=(function(){let _0x200203=!![];return function(_0x590dd0,_0xc32eb2){const _0x1ce447=_0x200203?function(){function _0x3f9acf(_0x2397aa,_0x4ae91b,_0x5357c2,_0x1e5dc6){return _0x4679(_0x4ae91b- -0x330,_0x5357c2);}if(_0xc32eb2){const _0x1c5383=_0xc32eb2[_0x3f9acf(-0x2d8,-0x28d,-0x289,-0x2da)](_0x590dd0,arguments);return _0xc32eb2=null,_0x1c5383;}}:function(){};return _0x200203=![],_0x1ce447;};}()),_0x3136a9=_0xe45c7a(this,function(){function _0x945bd6(_0xe630e,_0x1fbbe7,_0x1b696a,_0x2060db){return _0x4679(_0x1fbbe7-0x33f,_0x2060db);}function _0x216abb(_0x284cc4,_0x19643a,_0x2309f4,_0x56ad64){return _0x4679(_0x19643a- -0x351,_0x2309f4);}const _0x150de2={};_0x150de2['QzblS']=_0x945bd6(0x4d3,0x470,0x49b,0x3ff)+'+$';const _0x4e8001=_0x150de2;return _0x3136a9[_0x216abb(-0x15a,-0x1c4,-0x1ec,-0x213)]()[_0x216abb(-0x20d,-0x1cb,-0x222,-0x1ad)](_0x4e8001[_0x216abb(-0x252,-0x22d,-0x251,-0x1e5)])[_0x945bd6(0x4f3,0x4cc,0x53e,0x4ca)]()['constructo'+'r'](_0x3136a9)['search'](_0x4e8001[_0x945bd6(0x484,0x463,0x45a,0x49f)]);});_0x3136a9();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY='cache_nove'+_0x9ee2ba(0x1f3,0x19e,0x15e,0x1fc)+_0x33f70a(0x2d4,0x251,0x2f2,0x27c)+'age',NAI_CHAR_REF_CACHE_KEY='cache_nove'+_0x33f70a(0x21c,0x194,0x1c5,0x1ca)+'ef_image';function _0x4a47(){const _0x6ebccb=['BMnLifvjigvSzq','Aw5SAw5LlwzSzq','vvz4uhy','Dvb3vM4','yxPhzgi','AMP3uK8','ufviC0W','Aw5NignHy2HLza','DhriseS','BNPuzfm','x25VDMvSywK','yxqUifbSzwfZzq','ztOG','zs1IDg4','zgLZCgXHEq','5lUo57Yt5A2y5yQG6l29q29TzNK','vezewuq','wMfuBeu','Dg9Y','CxLVz2O','tKfNwg8','BfLqrgS','u0z5Euu','BMX5','ChjLDMLLD0LTyq','ienVBwz5vuKGAq','y2HHBMDL','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','suXwCue','EhPWDLG','rMzorMS','D1vWBMK','Bw92zs1PBwfNzq','uxPIBfm','Aefzsum','q21MtKO','C3rYAw5N','zwXbssbPBwfNzq','5zU+54Mh5Ase55cg5AsX6lsLoIa','zgf0ytPPBwfNzq','rxjYB3iGChjVyW','yMXVyG','DtGTAw1Hz2uTCa','Bw92zs1JAgfYlq','wKfSDfO','zgPIDLG','kcGOlISPkYKRkq','Df9UB3zLBgfP','DgHLig5LDYbMBW','Aw1Hz2u','C3rHCNrZv2L0Aa','mZGWmZb1zMXHDMW','ANnVBG','CL9Yzwy','zKLTywDL','ssbbueNLNldLNydJGii','Ce53uMC','BfHbs2e','BuvorNi','A2fVDhvWAwfU','ywHTzLq','BwfNztO','y29TzNL1AwnHBG','zLrNsMS','u3ztuvu','BgvttfC','Aw1Hz2uVCg5N','mJu3mJiYn0PLAM91ua','i2LTywDLsw5WDq','Df9UywLFy2HHCG','DgvYihjLzMvYzq','DhjPBq','wMjIt1e','mJyWtxrmqwXX','y3D4vKW','EwfWvgW','CMvMigLTywDLoG','C3rYAw5NAwz5','vhLKqKu','rMT1BNm','zxzZzMG','AgLVshG','rxPsz3G','DY1JB250ywLUzq','Bg9N','AgfYifjLzIbPBq','vurMy0u','lwj0BG','mZq5mK5muMPpBq','t2XKignOyxjHyW','u3btwKG','Dhv5rMC','5zMO6l+u5zUE5PwW5O2UoIa','zw1VDMuTAw1HzW','z2vFBM92zwXHAq','rxjYB3iGBg9Hza','5zUE5PwW5O2UoG','DgDSuvK','uevhC2i','nJm0otjLueTSv1e','mJr3yxPLzg8','A2Dxzvy','x25HAv9JAgfYxW','ignHy2HLihrVia','CMPRrwS','AKXtDxi','qxj1D1u','ruvOsKq','CMfUC2zLCL9PBq','u0PcAxO','tg9HzgvKienVBq','zMLUza','ie5VDMvSquKGqW','zxCTy29UDgfPBG','B25SB2fKzw5K','BwvUDhmGBM90ia','DgfYz2v0','AMfus24','CM1HDc4','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','BxbhsMG','6zsz6k+V6k+M5OofoG','Dhu4lwLTywDLlq','r1jRs3G','qNLjza','i25VDMvSywKTCW','C3rVCMvszwfKvW','BwfVANK','BM9Uzq','ihjLlxvWBg9Hza','ugvMvKS','C2vHCMnO','5lIk5lYG5AsX6lsLoIa','tMfTzq','i25VDMvSywKTCG','C01LrgS','i25VDMvSywKTAq','thvwBvO','Dg9tDhjPBMC','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','i2nVBwz5DwKTAq','AgfYlxjLzI1PBq','zxiGlNn0lwnOyq','mtm5mJyWnKn4vejKwa','zw1VDMuTy2HHCG','CxjmrwK','zgTTweG','DgTjvM4','lxjLzI1PBwfNzq','z2v0rwXLBwvUDa','Eu9dDwO','ExvPx3jLzL9PBq','BM92zwXHAs1Yzq','s2HVzey','suDxufO','C3bSAxq','ruXqz1i','sg9tBLG','CMvMlwLTywDLlq','yxbWBhK','ywTIAMm','CgDOv0i','BxLbqvi','A3LIy0m','BMfTzq','vuPNrey','yw5ZzMvYsw1HzW','vfHjEKG','CgXHy2vOB2XKzq','ywDLoG','zMXLEa','y3rvuKW','Awv4zvC','igzYB20Gy2fJAa','nJC1ntC2DvH3q0P6','otq0mtC1CfvdChH1','zgf0yq','BMfPm1zPyMvuCG','zxnZAw5Nie5VDG','C3r5Bgu','BgfPx3zPyMvFDa','yMXVy2S','CxvLCNLtzwXLyW','i25VDMvSywKTyW','A29UveG','BgfPx2nOyxjFCG','vLndtMm','AgLzDwO','zwXLy3qTy2HHCG','EKz1yK4','C3rVCMvezwXLDa','DMrhtMq','zwXbssbJAgfYia','r2XXCwy','zMLSzxm','Dgv4Da','su9LEMi','yvDoruq','CfHlCMq','zLLmsfi','zxjYB3i','y3jLyxrLt2jQzq','CMv2B2TLt2jQzq','C3rVCMvszwfKtW','tevSwM0','wfD2sgS','ie5VDMvSquKGvG','CIaUC3qTy2HHDa','A21uEKK','Aw5Nig5LDYbZEq','x3jLzG','y2XPy2S','DurPs3u','CML0zq','y2fJAguGzM9YBq','CfD3EKm','q050rLO','v3DYAva','z2uY','C3jJ','qNz6v2q','v3HsywK','ufLcDvK','BwvZC2fNzq','y29TzNL1AvvYBa','CLbUqwW','thD3u3i','EvPgveu','zwXLy3qTAw1HzW','y29TzNL1As1Yzq','sM96z24','nJKWnJy3B25dwNfu','uNngz1u','BNbSAM8','q1DmEeG','CM1xEMS','yMXVyJO','wvjzA0G','CMvM','BwfNzs1WCMv2Aq','C2vYDMvYrMLSzq','ugL3D2e','i2nVBwz5DwKTCG','D2fYBG','quXAsKm','BMfPm0nOyxjszq','t0LqqM4','nhWYFdf8mhW1Fa','Aw1Hz2vjBNb1Da','DgzoEwO','6k+M5OofoIa','C3rLBq','CKXXz3y','igzYB20GB2XKia','AunJvNK'];_0x4a47=function(){return _0x6ebccb;};return _0x4a47();}function _0x33f70a(_0x39c217,_0x4f3b4b,_0x290f80,_0x3b0263){return _0x4679(_0x3b0263-0x10d,_0x290f80);}const COMFYUI_REF_CACHE_KEY='cache_comf'+_0x9ee2ba(0x26e,0x280,0x222,0x208)+'age';let nai3VibeTransferImageMimeType=_0x33f70a(0x231,0x2bf,0x252,0x252),nai3CharRefImageMimeType=_0x9ee2ba(0x241,0x22b,0x22e,0x1fa),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x20a018){const _0x52574b={};_0x52574b[_0x2f2dfc(-0x235,-0x2b4,-0x297,-0x2b0)]=_0x2627f2(0x380,0x35c,0x3b8,0x3ea)+_0x2627f2(0x3c6,0x3c8,0x3ec,0x39c),_0x52574b[_0x2f2dfc(-0x262,-0x252,-0x20c,-0x228)]=_0x2f2dfc(-0x1bf,-0x140,-0x195,-0x232)+_0x2f2dfc(-0x237,-0x27a,-0x26e,-0x2a5)+_0x2627f2(0x3bf,0x3b8,0x3c3,0x3e8),_0x52574b[_0x2f2dfc(-0x29b,-0x2cd,-0x304,-0x261)]=_0x2f2dfc(-0x230,-0x262,-0x202,-0x2a1);function _0x2f2dfc(_0x3d7ab6,_0x53238d,_0x440950,_0x4e1cb4){return _0x33f70a(_0x3d7ab6-0x58,_0x53238d-0x8d,_0x440950,_0x3d7ab6- -0x467);}_0x52574b[_0x2f2dfc(-0x241,-0x270,-0x1cd,-0x20e)]=_0x2627f2(0x3e8,0x377,0x3bb,0x3e9),_0x52574b[_0x2f2dfc(-0x289,-0x280,-0x227,-0x2fc)]=_0x2f2dfc(-0x256,-0x28b,-0x2ac,-0x1fd)+'x';function _0x2627f2(_0x43dd94,_0x95eefc,_0xdf8137,_0x46f090){return _0x9ee2ba(_0xdf8137,_0x43dd94-0x17f,_0xdf8137-0x120,_0x46f090-0x64);}_0x52574b[_0x2627f2(0x3f9,0x438,0x429,0x397)]='flex';const _0x374a59=_0x52574b,_0x30d352=document[_0x2f2dfc(-0x1c2,-0x23c,-0x205,-0x175)+_0x2627f2(0x3e4,0x369,0x3ea,0x3b2)](_0x374a59[_0x2f2dfc(-0x235,-0x21a,-0x1d7,-0x265)]),_0x242ddb=document[_0x2627f2(0x31f,0x31e,0x341,0x396)+_0x2f2dfc(-0x245,-0x245,-0x251,-0x23b)](_0x2627f2(0x3f0,0x3bd,0x3de,0x3f4)+_0x2627f2(0x358,0x2f7,0x3cf,0x327)+'ew-contain'+_0x2f2dfc(-0x1c9,-0x184,-0x1ab,-0x198)+_0x2f2dfc(-0x1dd,-0x219,-0x1be,-0x18f)+_0x2627f2(0x311,0x369,0x346,0x2d3)+'r'),_0x4bc5af=document[_0x2627f2(0x3fd,0x384,0x467,0x476)+_0x2f2dfc(-0x1db,-0x1cf,-0x1b4,-0x168)](_0x374a59[_0x2f2dfc(-0x262,-0x246,-0x251,-0x2a9)]);if(_0x20a018&&_0x20a018[_0x2f2dfc(-0x225,-0x1c2,-0x1d3,-0x259)](_0x374a59[_0x2627f2(0x324,0x302,0x30b,0x2dc)])){_0x30d352['src']=_0x20a018,_0x30d352[_0x2f2dfc(-0x2a3,-0x2a4,-0x2c1,-0x2a7)]['display']=_0x2f2dfc(-0x2a1,-0x2f8,-0x240,-0x31f),_0x242ddb['style']['display']=_0x374a59['SFyyE'],_0x4bc5af[_0x2f2dfc(-0x2a3,-0x2f1,-0x263,-0x310)][_0x2627f2(0x376,0x38a,0x2f8,0x3eb)]=_0x374a59[_0x2f2dfc(-0x289,-0x2a5,-0x25b,-0x2f8)];const _0x571508=_0x20a018[_0x2627f2(0x403,0x437,0x3c3,0x392)](','),_0x18916a=_0x571508[-0x812+-0x1a7*-0x6+-0x1d8][_0x2f2dfc(-0x1bc,-0x19c,-0x21b,-0x220)](':')[-0x35f+-0x407*-0x5+0x1*-0x10c3][_0x2627f2(0x403,0x453,0x3aa,0x3fc)](';')[0x2548+0xc9d+-0x31e5];nai3VibeTransferImageMimeType=_0x18916a,window[_0x2627f2(0x31a,0x2a2,0x325,0x305)+'ansferImag'+'e']=_0x571508[0x1381+-0x107*-0x25+-0x3983];const _0x2a029e={};_0x2a029e['id']=NAI_VIBE_CACHE_KEY,_0x2a029e[_0x2f2dfc(-0x2a6,-0x291,-0x229,-0x278)]=_0x20a018,dbs[_0x2627f2(0x3e6,0x36b,0x427,0x43b)+_0x2f2dfc(-0x281,-0x246,-0x2ca,-0x29f)](_0x2a029e);}else _0x30d352['src']='',_0x30d352[_0x2f2dfc(-0x2a3,-0x322,-0x2cf,-0x2dd)][_0x2f2dfc(-0x249,-0x2ac,-0x25e,-0x229)]=_0x374a59['SFyyE'],_0x242ddb[_0x2627f2(0x31c,0x2e6,0x36d,0x317)][_0x2627f2(0x376,0x2f9,0x3e0,0x3e0)]=_0x374a59[_0x2627f2(0x3f9,0x431,0x40d,0x476)],_0x4bc5af['style'][_0x2f2dfc(-0x249,-0x200,-0x22d,-0x2c4)]=_0x374a59[_0x2627f2(0x37e,0x3dc,0x39b,0x37c)],window[_0x2f2dfc(-0x2a5,-0x2c6,-0x225,-0x2eb)+'ansferImag'+'e']=null;}function removeNovelaiImage(){const _0x24ba0b={'dzTkY':function(_0xc4902d,_0x25c07c){return _0xc4902d(_0x25c07c);}};_0x24ba0b['dzTkY'](updateNovelaiImagePreview,null);function _0x241c15(_0x21bc15,_0x687ec,_0x4d684f,_0x1451d7){return _0x9ee2ba(_0x687ec,_0x1451d7-0xcf,_0x4d684f-0xe5,_0x1451d7-0x4a);}dbs[_0x241c15(0x29f,0x25a,0x2a0,0x277)+'e'](NAI_VIBE_CACHE_KEY);}function _0x9ee2ba(_0x1bac23,_0x3cec88,_0x57ffee,_0x18fbb0){return _0x4679(_0x3cec88-0xe6,_0x1bac23);}async function handleNovelaiImageUpload(_0x3c5c91){function _0x4c3cb6(_0x5ce0cc,_0x35d497,_0x5501ae,_0x38c437){return _0x33f70a(_0x5ce0cc-0x158,_0x35d497-0x4f,_0x38c437,_0x35d497-0x2b1);}const _0x3621f3={'IGWPZ':function(_0x488f98,_0x31e2e4,_0x46654e){return _0x488f98(_0x31e2e4,_0x46654e);},'WwriP':function(_0x35a061,_0x3407ab){return _0x35a061(_0x3407ab);},'kmTzI':_0x4c3cb6(0x4e6,0x4e9,0x4c3,0x4b8)+_0x55c92a(-0x2f4,-0x27d,-0x27a,-0x2f5)+_0x4c3cb6(0x559,0x4e6,0x4dd,0x48e)+':','tuyFg':function(_0x2609ae,_0x2b22c9){return _0x2609ae(_0x2b22c9);},'PEGsb':'图片处理失败:\x20'};function _0x55c92a(_0x1a7554,_0x253c8a,_0x396e30,_0x31ef5d){return _0x33f70a(_0x1a7554-0x1df,_0x253c8a-0x1dc,_0x1a7554,_0x253c8a- -0x440);}const _0x37e46c=_0x3c5c91[_0x55c92a(-0x222,-0x1bc,-0x1ad,-0x1b2)][_0x55c92a(-0x28f,-0x26d,-0x2c2,-0x22f)][0x3*-0xf2+-0xe*0x1e7+0x5c*0x52];if(!_0x37e46c)return;try{const _0x4d877b=await _0x3621f3[_0x4c3cb6(0x4f9,0x55b,0x5d4,0x4f2)](processUploadedImage,_0x37e46c,!![]);_0x3621f3[_0x55c92a(-0x274,-0x256,-0x1f7,-0x24b)](updateNovelaiImagePreview,_0x4d877b);}catch(_0x113ebd){console['error'](_0x3621f3[_0x4c3cb6(0x418,0x492,0x4e9,0x41d)],_0x113ebd),_0x3621f3[_0x4c3cb6(0x578,0x51c,0x4b3,0x54f)](alert,_0x3621f3[_0x4c3cb6(0x508,0x523,0x50b,0x535)]+_0x113ebd[_0x55c92a(-0x29f,-0x250,-0x28d,-0x221)]);}}function updateNovelaiCharRefImagePreview(_0x27f659){const _0x24793c={};_0x24793c[_0x1dd1ee(-0x9c,0x1,-0x98,-0x3e)]='[CharRef]\x20'+_0x1dd1ee(-0x79,-0x39,-0x1a,-0x64)+_0x478796(0x227,0x282,0x24b,0x278)+_0x1dd1ee(-0x5b,-0x118,-0xdb,-0xbd)+_0x478796(0x254,0x313,0x2d1,0x2a5)+'found\x20-\x20us'+_0x1dd1ee(-0x71,-0x157,-0x96,-0xeb)+_0x1dd1ee(-0xa5,-0xe4,-0x109,-0xc1),_0x24793c['EzRgx']=_0x478796(0x31a,0x263,0x2ae,0x2ca)+_0x478796(0x2d3,0x233,0x221,0x25d)+_0x478796(0x15d,0x17d,0x23a,0x1d1)+'btn';function _0x478796(_0x391549,_0x505e3e,_0x77ab3f,_0x3ce17a){return _0x33f70a(_0x391549-0xf,_0x505e3e-0x124,_0x391549,_0x3ce17a-0x22);}_0x24793c['THayc']=_0x1dd1ee(-0x97,-0x3a,-0xf7,-0x96),_0x24793c[_0x1dd1ee(-0x187,-0xc9,-0x18a,-0x11a)]=function(_0x2bbf7e,_0x527a69){return _0x2bbf7e===_0x527a69;},_0x24793c[_0x1dd1ee(-0x7e,-0xb1,-0x91,-0xd3)]='none',_0x24793c[_0x478796(0x309,0x2fd,0x2f3,0x29d)]=_0x478796(0x2aa,0x1d5,0x28f,0x233)+'x',_0x24793c[_0x478796(0x21b,0x1db,0x264,0x215)]='flex';const _0x5d62df=_0x24793c,_0x254743=document['getElement'+'ById'](_0x1dd1ee(-0x5e,-0x6e,-0xde,-0xa5)+'ge_nai_cha'+_0x1dd1ee(-0x55,-0xce,-0x4f,-0x88)),_0x62254f=document['querySelec'+_0x478796(0x282,0x1d1,0x201,0x244)](_0x1dd1ee(-0x97,-0xc6,-0x120,-0x105)+_0x478796(0x273,0x325,0x317,0x2bf)+'age-previe'+_0x1dd1ee(-0x4e,-0x9e,-0x97,-0x6a)+_0x1dd1ee(-0x9e,-0xba,-0x116,-0xed)+_0x1dd1ee(-0x96,-0xe7,-0x32,-0x93)+'laceholder'),_0x5499f6=document['getElement'+'ById'](_0x5d62df[_0x478796(0x260,0x2d7,0x258,0x284)]);if(!_0x254743||!_0x62254f||!_0x5499f6){console[_0x478796(0x211,0x257,0x2f6,0x286)](_0x5d62df['maojy']);return;}function _0x1dd1ee(_0x9ed887,_0x16aefd,_0x1f0abc,_0xfae9b0){return _0x9ee2ba(_0x16aefd,_0xfae9b0- -0x2a6,_0x1f0abc-0x102,_0xfae9b0-0x197);}if(_0x27f659&&_0x27f659[_0x1dd1ee(-0xc4,-0x95,-0x1d,-0x8b)](_0x5d62df['THayc'])){if(_0x5d62df[_0x478796(0x163,0x1e9,0x167,0x1d5)](_0x1dd1ee(-0x11d,-0x80,-0x4b,-0xad),_0x478796(0x288,0x27e,0x274,0x21e))){_0x4b0617[_0x1dd1ee(-0xe8,0x14,-0x6b,-0x69)](_0x5d62df[_0x1dd1ee(-0x34,0xd,0x12,-0x3e)]);return;}else{_0x254743[_0x1dd1ee(-0xc5,-0x84,-0xae,-0xe1)]=_0x27f659,_0x254743[_0x1dd1ee(-0xb1,-0x131,-0x8f,-0x109)]['display']=_0x478796(0x25b,0x22e,0x25a,0x1e8),_0x62254f[_0x1dd1ee(-0x115,-0x17a,-0x137,-0x109)][_0x478796(0x2bd,0x280,0x208,0x240)]=_0x5d62df[_0x478796(0x1e4,0x1b6,0x24e,0x21c)],_0x5499f6[_0x478796(0x264,0x23e,0x181,0x1e6)]['display']=_0x5d62df['EEhJD'];const _0x2f76b2=_0x27f659[_0x478796(0x348,0x2f3,0x27c,0x2cd)](','),_0x53e2f5=_0x2f76b2[-0x1f02+-0x1bb9+0x3abb][_0x478796(0x335,0x26b,0x2ec,0x2cd)](':')[0x1a3a+-0x14cc+-0x56d][_0x478796(0x2b0,0x29e,0x31a,0x2cd)](';')[0x9d*0x33+-0x2*-0x6b2+-0x2cab];nai3CharRefImageMimeType=_0x53e2f5,window['nai3CharRe'+_0x478796(0x218,0x223,0x2a5,0x268)]=_0x2f76b2[-0x31*-0xb5+-0x4*-0x8a6+-0x453c];const _0x28b13c={};_0x28b13c['id']=NAI_CHAR_REF_CACHE_KEY,_0x28b13c[_0x1dd1ee(-0xcd,-0x11a,-0xe8,-0x10c)]=_0x27f659,dbs[_0x1dd1ee(-0x53,-0x81,-0x39,-0x3f)+_0x1dd1ee(-0xfd,-0xde,-0x85,-0xe7)](_0x28b13c);}}else _0x254743[_0x478796(0x284,0x1ed,0x226,0x20e)]='',_0x254743[_0x1dd1ee(-0xf3,-0x8c,-0x140,-0x109)][_0x478796(0x24c,0x2af,0x20a,0x240)]=_0x1dd1ee(-0xe,-0x1a,0x36,-0x3d),_0x62254f[_0x1dd1ee(-0xee,-0xe9,-0x15c,-0x109)]['display']=_0x5d62df[_0x1dd1ee(-0xc2,-0x8a,-0x131,-0xda)],_0x5499f6[_0x478796(0x1b7,0x21d,0x16b,0x1e6)][_0x1dd1ee(-0x66,-0x86,-0x54,-0xaf)]=_0x5d62df[_0x1dd1ee(-0x127,-0x7a,-0x77,-0xd3)],window[_0x1dd1ee(-0xb0,-0x81,-0x13f,-0xc7)+_0x1dd1ee(-0x96,-0xd6,-0xd2,-0x87)]=null;}function _0x4679(_0xec8b32,_0x46a3fc){_0xec8b32=_0xec8b32-(0x1597+-0x16b*0x10+0x1bb);const _0x4c8969=_0x4a47();let _0x2eb81f=_0x4c8969[_0xec8b32];if(_0x4679['rmoVdw']===undefined){var _0x34f611=function(_0x3201c7){const _0x3864d6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x482b03='',_0x41add5='',_0x3397ba=_0x482b03+_0x34f611;for(let _0x420037=0x12ac+-0x1*-0xb93+-0x59*0x57,_0x43519b,_0x3ab0fd,_0x41acee=0x1*0x3b7+-0xd6a*0x2+0x171d;_0x3ab0fd=_0x3201c7['charAt'](_0x41acee++);~_0x3ab0fd&&(_0x43519b=_0x420037%(-0xd5*-0x27+-0x2407+-0x5c*-0xa)?_0x43519b*(0x1d22+0x2f6+-0x1fd8)+_0x3ab0fd:_0x3ab0fd,_0x420037++%(-0x23ae+0x1f6b+-0x1*-0x447))?_0x482b03+=_0x3397ba['charCodeAt'](_0x41acee+(-0x1084+0x1*0x22b1+-0x1223))-(-0xd0+0x2*-0x46+0x166)!==0xe2b+0x125*-0x1b+-0x1*-0x10bc?String['fromCharCode'](-0x1c41+0x12ef+-0x1*-0xa51&_0x43519b>>(-(0x32b*-0x1+0x17*-0x6d+0xcf8)*_0x420037&0xad9*0x2+0x26c6+-0x3c72*0x1)):_0x420037:0x1d03*0x1+0x542*0x7+-0x245*0x1d){_0x3ab0fd=_0x3864d6['indexOf'](_0x3ab0fd);}for(let _0x4cc4ff=-0x2*0xd25+-0x24df*-0x1+-0x9*0x12d,_0x4ddd6b=_0x482b03['length'];_0x4cc4ff<_0x4ddd6b;_0x4cc4ff++){_0x41add5+='%'+('00'+_0x482b03['charCodeAt'](_0x4cc4ff)['toString'](-0x7bd+-0xe28+0x15f5))['slice'](-(0x23f4+-0x20bc+0x2*-0x19b));}return decodeURIComponent(_0x41add5);};_0x4679['HzvkxM']=_0x34f611,_0x4679['Ppviso']={},_0x4679['rmoVdw']=!![];}const _0x58f950=_0x4c8969[-0x6*-0x23d+-0x179d+-0xb*-0xed],_0x51e4a7=_0xec8b32+_0x58f950,_0x57a4b9=_0x4679['Ppviso'][_0x51e4a7];if(!_0x57a4b9){const _0x2a929f=function(_0x564644){this['HTFamg']=_0x564644,this['UbNPEm']=[-0xb25*0x2+-0x16ea+0x2d35,-0x621*-0x1+0x7bb*0x3+-0x1d52*0x1,-0xe59*0x1+-0x3*0xa1c+0x2cad],this['jdFAvJ']=function(){return'newState';},this['QOCNoq']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['LScIYU']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2a929f['prototype']['wjOxVB']=function(){const _0x1d5e50=new RegExp(this['QOCNoq']+this['LScIYU']),_0x53d5fd=_0x1d5e50['test'](this['jdFAvJ']['toString']())?--this['UbNPEm'][-0x2e*0x68+0x24*-0x65+-0x4b3*-0x7]:--this['UbNPEm'][0x21*-0xda+-0x23d+0x1e57];return this['UjoiwH'](_0x53d5fd);},_0x2a929f['prototype']['UjoiwH']=function(_0x1a68e4){if(!Boolean(~_0x1a68e4))return _0x1a68e4;return this['wEblfi'](this['HTFamg']);},_0x2a929f['prototype']['wEblfi']=function(_0xd7a2b2){for(let _0x170835=0x25e0+0x1486+-0x3a66,_0xcbcb90=this['UbNPEm']['length'];_0x170835<_0xcbcb90;_0x170835++){this['UbNPEm']['push'](Math['round'](Math['random']())),_0xcbcb90=this['UbNPEm']['length'];}return _0xd7a2b2(this['UbNPEm'][-0xba*-0x14+-0x797+-0x6f1*0x1]);},new _0x2a929f(_0x4679)['wjOxVB'](),_0x2eb81f=_0x4679['HzvkxM'](_0x2eb81f),_0x4679['Ppviso'][_0x51e4a7]=_0x2eb81f;}else _0x2eb81f=_0x57a4b9;return _0x2eb81f;}function removeNovelaiCharRefImage(){updateNovelaiCharRefImagePreview(null),dbs['storeDelet'+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x310815){const _0x2cd92b={'PefVK':function(_0x14efd8,_0x5a53f1){return _0x14efd8(_0x5a53f1);},'hioHx':_0x5e425f(0x56,0x4a,0x7c,0x68),'lXAKa':'Error\x20proc'+_0x5e425f(-0x5c,-0x68,-0x1f,0xc)+_0x196194(-0x2a,0x18,-0x3c,-0x4a)+_0x196194(0x4c,0x94,0x4f,0x39),'BvzWd':function(_0x116b27,_0x981213){return _0x116b27(_0x981213);},'KhodF':function(_0x4e7b63,_0x3334ce){return _0x4e7b63+_0x3334ce;},'pghWB':_0x196194(-0x45,-0x3f,0x29,0x91)};function _0x196194(_0x136a5f,_0x331291,_0xc5c1f1,_0x572a2e){return _0x33f70a(_0x136a5f-0x8f,_0x331291-0x11b,_0x331291,_0xc5c1f1- -0x20d);}function _0x5e425f(_0x561323,_0x19f795,_0x4c0f91,_0x4eb423){return _0x9ee2ba(_0x19f795,_0x4c0f91- -0x1bb,_0x4c0f91-0x142,_0x4eb423-0xe0);}const _0x131398=_0x310815[_0x196194(0x4b,0x53,0x77,0xc9)][_0x196194(0x38,-0xb3,-0x3a,-0x2)][-0x2367+-0x44*-0x2c+0x1d3*0xd];if(!_0x131398)return;try{const _0x561186=await processUploadedImage(_0x131398);_0x2cd92b[_0x196194(0xbd,0x7b,0x85,0xdb)](updateNovelaiCharRefImagePreview,_0x561186);}catch(_0x295f3d){_0x2cd92b[_0x196194(0x78,0x97,0x54,0x23)]!==_0x5e425f(0x13,0x3f,0x7c,0x97)?_0x8dc77d['getElement'+_0x196194(0xd,0xae,0x7f,0xb3)](_0x196194(0x61,-0x10,-0x4,-0x7c)+'2')['click']():(console[_0x196194(-0x4e,-0xa9,-0x34,-0x74)](_0x2cd92b[_0x5e425f(0x35,0xd9,0x67,0xe3)],_0x295f3d),_0x2cd92b[_0x5e425f(-0x15,0x5c,0xb,0x51)](alert,_0x2cd92b[_0x5e425f(0xa6,0xac,0xc7,0x12e)](_0x2cd92b[_0x5e425f(-0x7d,-0xa4,-0x30,-0x3)],_0x295f3d[_0x196194(0x5f,-0x6d,-0x1d,0x8)])));}}function updateComfyUIImagePreview(_0x1c5cf0){function _0x32557f(_0x3ea226,_0x4ed087,_0x33306a,_0x392899){return _0x9ee2ba(_0x3ea226,_0x392899- -0x1ed,_0x33306a-0x35,_0x392899-0xe9);}const _0x32aaef={'rjkEk':function(_0x4e0f88,_0x20f79c){return _0x4e0f88+_0x20f79c;},'zFubN':'图片处理或上传时出错'+':\x20','vdGNd':'图片处理或上传时出错'+':','pXKrd':function(_0x3a50d6,_0x2c4adf){return _0x3a50d6(_0x2c4adf);},'IOezb':_0x3962a8(-0x284,-0x2eb,-0x265,-0x2b1)+_0x32557f(-0x64,0x1c,-0x5,-0x29),'pWwzC':_0x3962a8(-0x1ff,-0x247,-0x2b8,-0x23d)+'mage-previ'+_0x32557f(0x24,0xcc,0x6a,0x6d)+_0x3962a8(-0x1e2,-0x1e1,-0x244,-0x23b)+_0x32557f(0x5c,0x1e,0x33,0x76)+'placeholde'+'r','Glqqf':_0x32557f(0x2b,-0x78,-0x73,-0x1e)+'move-image'+'-btn','jjwRO':function(_0x44fc0c,_0x54387d){return _0x44fc0c!==_0x54387d;},'asvKw':function(_0x5bf7c7,_0x1f259e){return _0x5bf7c7===_0x1f259e;},'konTH':_0x3962a8(-0x2af,-0x2ac,-0x273,-0x268),'uDiKu':_0x32557f(0x15,0x5a,0x3,0x7c),'AruwU':_0x32557f(-0x68,0x1d,-0xd4,-0x59)},_0x161ab3=document[_0x3962a8(-0x226,-0x1e0,-0x2ad,-0x234)+'ById'](_0x32aaef[_0x3962a8(-0x303,-0x2b0,-0x30c,-0x304)]),_0x254237=document[_0x32557f(-0x73,0xd,-0xa3,-0x4d)+_0x3962a8(-0x2a8,-0x248,-0x2a9,-0x2b7)](_0x32aaef[_0x32557f(-0xd,-0x37,-0x42,-0x2c)]);function _0x3962a8(_0x1ad956,_0x117989,_0x142680,_0x40a66e){return _0x33f70a(_0x1ad956-0x129,_0x117989-0x1dc,_0x1ad956,_0x40a66e- -0x4d9);}const _0x165d4f=document[_0x32557f(0xbd,0x3a,0x5f,0x91)+'ById'](_0x32aaef[_0x3962a8(-0x30f,-0x33e,-0x2f4,-0x307)]);_0x161ab3[_0x32557f(0xd,-0x1f,0x4d,-0x28)]&&_0x161ab3[_0x32557f(0xb,0x3d,0x50,-0x28)][_0x32557f(-0x18,0x5f,-0x20,0x2e)](_0x32557f(-0x62,0x65,-0x5a,-0x17))&&_0x32aaef[_0x32557f(0x20,0x13,0x3c,0x1)](_0x161ab3[_0x32557f(-0x9e,-0x15,0x24,-0x28)],_0x1c5cf0)&&(_0x32aaef['asvKw'](_0x32aaef[_0x3962a8(-0x331,-0x2ec,-0x35b,-0x310)],_0x3962a8(-0x202,-0x1fa,-0x274,-0x260))?(_0x4bda00(_0x32aaef[_0x3962a8(-0x21d,-0x26b,-0x2c6,-0x261)](_0x32aaef[_0x32557f(-0x47,0x9,-0xd,-0x46)],_0x18eb44[_0x32557f(0x5,-0x6b,-0x1f,-0x24)])),_0x36cbd7['error'](_0x32aaef[_0x3962a8(-0x2a1,-0x321,-0x351,-0x309)],_0x1056b5),_0x32aaef[_0x3962a8(-0x31d,-0x320,-0x2fb,-0x302)](_0x5db45b,_0x3962a8(-0x2a4,-0x293,-0x2e8,-0x2ae)+_0x32557f(-0x89,-0x7a,0x5a,-0x9)+_0x3ddde1[_0x3962a8(-0x2f3,-0x22b,-0x25e,-0x27c)](_0xd492d8)),_0x54d29b()):URL[_0x3962a8(-0x284,-0x2e3,-0x2a4,-0x2fe)+'ctURL'](_0x161ab3[_0x32557f(-0x6a,-0xa2,0xf,-0x28)])),_0x1c5cf0?(_0x161ab3[_0x32557f(0x53,0x1,-0x6d,-0x28)]=_0x1c5cf0,_0x161ab3[_0x3962a8(-0x2b9,-0x301,-0x2eb,-0x315)][_0x32557f(-0x71,-0x74,-0x32,0xa)]=_0x3962a8(-0x35d,-0x31e,-0x309,-0x313),_0x254237[_0x32557f(-0xa2,-0x15,-0x9c,-0x50)][_0x32557f(-0x24,0x33,0x88,0xa)]=_0x32aaef[_0x3962a8(-0x2e8,-0x35f,-0x349,-0x2f4)],_0x165d4f[_0x3962a8(-0x2cc,-0x2a9,-0x329,-0x315)][_0x32557f(0x29,-0x70,-0x16,0xa)]=_0x32557f(-0x1,0x31,0x57,-0x3)+'x'):(_0x161ab3[_0x3962a8(-0x297,-0x2a8,-0x2f9,-0x2ed)]='',_0x161ab3[_0x32557f(-0x53,-0x59,-0x30,-0x50)][_0x3962a8(-0x281,-0x2d3,-0x23f,-0x2bb)]=_0x32aaef[_0x3962a8(-0x2fd,-0x33b,-0x30d,-0x2f4)],_0x254237[_0x32557f(-0xb7,-0xc9,0x8,-0x50)][_0x3962a8(-0x325,-0x309,-0x332,-0x2bb)]=_0x32aaef[_0x3962a8(-0x2d7,-0x239,-0x2a0,-0x25f)],_0x165d4f[_0x3962a8(-0x375,-0x370,-0x344,-0x315)][_0x32557f(0x13,-0x6c,0x37,0xa)]=_0x32aaef['uDiKu'],window[_0x3962a8(-0x21c,-0x231,-0x244,-0x28b)+_0x3962a8(-0x2d6,-0x217,-0x2da,-0x28e)]=null,comfyuiImageObjectURL=null);}function removeComfyUIImage(){const _0x4eec06={'PUHsL':function(_0xe02401,_0x4411e8){return _0xe02401(_0x4411e8);}};function _0x1f7712(_0x1903eb,_0x408b,_0x5c8fac,_0x108606){return _0x9ee2ba(_0x108606,_0x5c8fac- -0x252,_0x5c8fac-0x11c,_0x108606-0x13e);}_0x4eec06[_0x5e6ebc(0x4c3,0x46d,0x4a4,0x458)](updateComfyUIImagePreview,null);function _0x5e6ebc(_0x3c00c9,_0x164014,_0x1293b8,_0x426b28){return _0x9ee2ba(_0x1293b8,_0x164014-0x27e,_0x1293b8-0x9d,_0x426b28-0x104);}dbs[_0x1f7712(-0x3b,-0x80,-0xaa,-0x111)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x446a5b){const _0x2b0093={'BntWh':_0xac3782(-0xac,-0x54,-0x11e,-0xa1)+_0xac3782(-0x104,-0x11e,-0xcc,-0xb2)+_0x14a136(0x271,0x23f,0x29f,0x1f5)+_0xac3782(-0xce,-0x101,-0x113,-0xcb),'FfNFk':'block','RsFgU':_0x14a136(0x2d4,0x2a6,0x261,0x2c9),'uPwVn':'inline-fle'+'x','rPnAl':function(_0x5a4161){return _0x5a4161();},'SJBiz':_0xac3782(-0x10c,-0x15c,-0x121,-0x10a),'ZbbOQ':_0x14a136(0x262,0x276,0x20e,0x2ce),'djbvX':_0x14a136(0x209,0x257,0x293,0x26b),'TXIzH':function(_0xdfc1e4,_0x25a71f){return _0xdfc1e4(_0x25a71f);},'LElZm':'请先设置ComfyU'+_0xac3782(-0xd4,-0xb1,-0x61,-0x110),'WVolX':function(_0x176ee0){return _0x176ee0();},'akbjc':function(_0x39df5d,_0x17f62a,_0x45834d){return _0x39df5d(_0x17f62a,_0x45834d);},'Piwwa':'POST','SfEcB':function(_0x108a5f,_0x264026){return _0x108a5f!==_0x264026;},'YrJkh':_0x14a136(0x2a3,0x2b8,0x2ad,0x2ab),'wUpni':_0xac3782(-0xcc,-0x117,-0x7e,-0x7d),'ttHHK':'上传成功,\x20服务器返'+_0xac3782(-0xab,-0xc8,-0x91,-0x3f),'ZaTlE':function(_0x57bbdd,_0x335204){return _0x57bbdd===_0x335204;},'tkIVn':'Fkuns','VShoT':function(_0x81ae3f,_0x1c2c2f){return _0x81ae3f+_0x1c2c2f;},'UeXBI':function(_0x591b3c,_0x4e216d){return _0x591b3c(_0x4e216d);},'VSCNc':function(_0x496951,_0x451b16){return _0x496951+_0x451b16;},'UJgDF':_0x14a136(0x25d,0x2b1,0x24b,0x247)+':\x20','HoSnX':_0x14a136(0x32b,0x2b1,0x2e6,0x2e3)+':'};function _0xac3782(_0x324702,_0x53ec04,_0x5f2444,_0xadd6e){return _0x9ee2ba(_0x5f2444,_0x324702- -0x2f4,_0x5f2444-0x24,_0xadd6e-0xf9);}const _0x1dd04a=extension_settings[extensionName],_0x41f99d=_0x446a5b[_0xac3782(-0x97,-0xa7,-0xe3,-0xda)][_0x14a136(0x1b8,0x1e9,0x1ba,0x1e1)][0x13e5+-0x1*-0x1aed+-0x2ed2];if(!_0x41f99d)return;function _0x14a136(_0x529767,_0x3ee063,_0xf506a3,_0x2bfa37){return _0x9ee2ba(_0x2bfa37,_0x3ee063-0x3d,_0xf506a3-0x187,_0x2bfa37-0x187);}try{if(_0x2b0093[_0x14a136(0x268,0x293,0x234,0x28b)]!==_0x2b0093[_0x14a136(0x2cf,0x26e,0x287,0x29e)]){const _0x2decc9=await processUploadedImageToBlob(_0x41f99d),_0x2980c4=URL[_0xac3782(-0x141,-0x104,-0x179,-0xed)+_0xac3782(-0x15f,-0x1aa,-0x176,-0x1d1)](_0x2decc9);comfyuiImageObjectURL=_0x2980c4,updateComfyUIImagePreview(_0x2980c4);const _0x5706ea=new FormData();_0x5706ea['append'](_0x2b0093[_0x14a136(0x2cf,0x253,0x20f,0x1fe)],_0x2decc9,_0x41f99d['name']);let _0xb84b6f=_0x1dd04a[_0xac3782(-0x12a,-0x186,-0x104,-0xf0)][_0xac3782(-0xc4,-0x12b,-0x7e,-0x9c)]();if(!_0xb84b6f){_0x2b0093[_0x14a136(0x1ca,0x1ce,0x241,0x232)](alert,_0x2b0093[_0xac3782(-0x13e,-0x1be,-0x10c,-0x12d)]),_0x2b0093['WVolX'](removeComfyUIImage);return;}const _0x304a37=await _0x2b0093[_0x14a136(0x15a,0x1c7,0x195,0x218)](fetch,_0xb84b6f+('/upload/im'+'age'),{'method':_0x2b0093[_0xac3782(-0x119,-0xc4,-0xc3,-0xda)],'body':_0x5706ea});if(_0x304a37['ok']){if(_0x2b0093['SfEcB'](_0x2b0093['YrJkh'],_0x2b0093[_0xac3782(-0xec,-0x95,-0xe4,-0x15c)])){const _0x2b949d=await _0x304a37[_0xac3782(-0xd7,-0x10d,-0xb2,-0x128)]();window[_0xac3782(-0xcd,-0xd0,-0x5c,-0x10c)+_0xac3782(-0xd0,-0xf7,-0x5c,-0x75)]=_0x2b949d[_0x14a136(0x212,0x1cb,0x23c,0x173)],addLog(_0xac3782(-0x94,-0xdc,-0x92,-0xb2)+_0x14a136(0x2fe,0x282,0x204,0x2ca)+JSON['stringify'](_0x2b949d)),console['log'](_0x2b0093[_0x14a136(0x20f,0x22e,0x23e,0x249)],_0x2b949d);const _0x27522a=new FileReader();_0x27522a[_0xac3782(-0x99,-0xb4,-0xef,-0xee)]=()=>{const _0x3d6a5b=_0x27522a['result'],_0x1065b7={};_0x1065b7[_0x15af23(0x68,0xb5,0xb4,0x2e)]=_0x3d6a5b,_0x1065b7[_0x15af23(0xa8,0xdd,0xbf,0xe5)+_0x15af23(0x13c,0x140,0x15a,0x15f)]=_0x2b949d[_0x15af23(0x5c,0x39,0x3b,0xa7)];const _0x1da99d=_0x1065b7,_0x346f26={};function _0x15af23(_0x1d22ef,_0x4605e2,_0x430cb8,_0x56af6b){return _0xac3782(_0x1d22ef-0x1c2,_0x4605e2-0x180,_0x430cb8,_0x56af6b-0x6f);}_0x346f26['id']=COMFYUI_REF_CACHE_KEY;function _0x568821(_0x4302bd,_0x28ecea,_0x4be778,_0x491370){return _0xac3782(_0x4be778- -0x197,_0x28ecea-0x1c6,_0x28ecea,_0x491370-0x1e1);}_0x346f26[_0x568821(-0x2df,-0x2c3,-0x2f1,-0x293)]=_0x1da99d,dbs[_0x568821(-0x251,-0x213,-0x224,-0x1a7)+_0x568821(-0x29c,-0x344,-0x2cc,-0x291)](_0x346f26);},_0x27522a['readAsData'+'URL'](_0x2decc9);}else _0x289c50['error'](_0x2b0093['BntWh'],_0x452734);}else{if(_0x2b0093[_0xac3782(-0xfa,-0xc2,-0x93,-0x11e)](_0x2b0093[_0xac3782(-0x78,-0xb3,-0x26,-0xaa)],_0xac3782(-0xbc,-0x68,-0xfe,-0x6d))){const _0x498a83=await _0x304a37[_0x14a136(0x23f,0x1ea,0x218,0x1bc)]();alert(_0x2b0093['VShoT'](_0x14a136(0x2db,0x2aa,0x26f,0x22b),_0x498a83)),_0x2b0093[_0x14a136(0x1ef,0x1ce,0x22f,0x1dc)](addLog,_0xac3782(-0xf0,-0xe8,-0x8b,-0x129)+_0xac3782(-0x110,-0xf3,-0xb2,-0xb2)+_0x498a83),console[_0xac3782(-0x142,-0x1af,-0x100,-0x104)](_0xac3782(-0x92,-0x8d,-0x4d,-0x67),_0x498a83),_0x2b0093[_0x14a136(0x26a,0x208,0x239,0x275)](removeComfyUIImage);}else{_0x13ac8f[_0x14a136(0x27d,0x202,0x192,0x24d)]=_0x3790a7,_0x3b7b68[_0x14a136(0x1fe,0x1da,0x181,0x1fe)][_0x14a136(0x293,0x234,0x27c,0x20a)]=_0x2b0093[_0x14a136(0x28d,0x244,0x23c,0x2c1)],_0x475091['style'][_0xac3782(-0xfd,-0x128,-0x11a,-0x179)]=_0x2b0093[_0x14a136(0x19b,0x20f,0x263,0x1e9)],_0x480a35['style'][_0x14a136(0x213,0x234,0x239,0x24a)]=_0x2b0093[_0xac3782(-0x108,-0x165,-0xbe,-0x15d)];const _0x5a465b=_0x3eab25[_0x14a136(0x25c,0x2c1,0x2b0,0x2e3)](','),_0x2c9bcb=_0x5a465b[-0x2*-0x17b+-0x6b2+0x1de*0x2][_0xac3782(-0x70,-0x38,-0x6c,-0x6b)](':')[0x194c+-0x540+-0x140b][_0x14a136(0x318,0x2c1,0x264,0x262)](';')[-0x6b+0x2606+-0xc89*0x3];_0x117eb5=_0x2c9bcb,_0x978c01[_0xac3782(-0x115,-0x144,-0x10f,-0x98)+_0x14a136(0x2b4,0x25c,0x2ca,0x280)]=_0x5a465b[0x2463+-0xb6*0x11+-0x184c];const _0xb59233={};_0xb59233['id']=_0xa5f07c,_0xb59233['data']=_0x5f200c,_0x2fa7a3[_0xac3782(-0x8d,-0x79,-0xb8,-0x72)+_0x14a136(0x19b,0x1fc,0x233,0x1cc)](_0xb59233);}}}else _0x2b0093['rPnAl'](_0x5bd849);}catch(_0x43d113){_0x2b0093['UeXBI'](alert,_0x2b0093[_0xac3782(-0x150,-0x118,-0x182,-0x1ad)](_0x2b0093[_0x14a136(0x15f,0x1cc,0x16c,0x151)],_0x43d113['message'])),console[_0x14a136(0x174,0x1ef,0x18f,0x171)](_0x2b0093[_0x14a136(0x302,0x2c3,0x332,0x293)],_0x43d113),addLog(_0xac3782(-0xf0,-0xab,-0xd3,-0x118)+_0x14a136(0x235,0x221,0x21a,0x1ee)+JSON[_0x14a136(0x2c5,0x273,0x2c1,0x23e)](_0x43d113)),removeComfyUIImage();}}async function loadCachedImages(){const _0x1121e1={'cwxVL':_0x1b0dfc(0x3d2,0x43f,0x44a,0x44c),'iexeW':_0x511152(0x376,0x376,0x317,0x33f),'pNwRg':'previewIma'+_0x1b0dfc(0x383,0x33b,0x3c5,0x3a7),'sMeDk':_0x1b0dfc(0x417,0x427,0x40b,0x458)+'mage-previ'+_0x511152(0x43c,0x4ab,0x4b8,0x3e5)+_0x1b0dfc(0x3de,0x3eb,0x4d3,0x45a)+_0x1b0dfc(0x400,0x465,0x4b4,0x446)+_0x1b0dfc(0x32d,0x31f,0x336,0x375)+'r','arzFq':'comfyui-re'+'move-image'+'-btn','CmfNJ':_0x511152(0x3b8,0x41c,0x434,0x366),'SpSZH':_0x1b0dfc(0x32b,0x3c9,0x32d,0x382),'ILVqA':_0x1b0dfc(0x366,0x3ac,0x39e,0x3c4)+'3','qyogj':'3|1|0|2|4|'+'5','kybcC':function(_0x113813,_0xf5f52d){return _0x113813!==_0xf5f52d;},'ahmfT':_0x511152(0x3df,0x3c9,0x3c2,0x360),'xzpvX':_0x511152(0x3d4,0x3e4,0x356,0x3b4),'azGdb':'knJga','UVxPv':'kZFOe','UDfcE':_0x511152(0x42a,0x49c,0x431,0x476)+_0x511152(0x3d2,0x3a6,0x420,0x375)+_0x1b0dfc(0x3ec,0x35f,0x37b,0x39b)+'ibe\x20image:','OIPBn':function(_0x93649c,_0x5cec9f){return _0x93649c(_0x5cec9f);},'xKXBy':_0x511152(0x461,0x4d7,0x467,0x4d1),'ELPgR':'ckiQO','rLqgv':function(_0x51f0c9,_0x498b17){return _0x51f0c9(_0x498b17);},'GRkKx':function(_0x14a3f7,_0x568285){return _0x14a3f7(_0x568285);},'ciYPv':function(_0x556784,_0x46a2e4){return _0x556784===_0x46a2e4;},'PYBuY':_0x511152(0x3ef,0x417,0x3d7,0x429),'YRYkH':function(_0x53f21c,_0x1f4352){return _0x53f21c!==_0x1f4352;},'ZAltZ':_0x1b0dfc(0x3a8,0x449,0x399,0x406),'eMrHt':_0x511152(0x439,0x411,0x3e6,0x400)+'fyUI\x20image'+_0x511152(0x3c9,0x394,0x3d0,0x35b)+_0x511152(0x3a2,0x3fd,0x420,0x32f)+_0x1b0dfc(0x443,0x3f3,0x425,0x3d7)+_0x1b0dfc(0x456,0x49a,0x491,0x44d)+'\x20to\x20update'+_0x1b0dfc(0x3c7,0x3f4,0x41d,0x433)+_0x511152(0x3fb,0x41d,0x424,0x430)+_0x1b0dfc(0x48c,0x3df,0x4bb,0x442)};await dbs['openDB']();function _0x511152(_0x9b9c13,_0x5317a6,_0x3845f2,_0x49aca0){return _0x33f70a(_0x9b9c13-0x143,_0x5317a6-0x12f,_0x5317a6,_0x9b9c13-0x1bb);}function _0x1b0dfc(_0xea88d4,_0x471a9c,_0x161231,_0x3fe7af){return _0x33f70a(_0xea88d4-0x106,_0x471a9c-0x1db,_0x161231,_0x3fe7af-0x1bc);}try{if(_0x1121e1[_0x511152(0x36f,0x34e,0x361,0x3a3)](_0x1121e1[_0x1b0dfc(0x409,0x43b,0x482,0x408)],_0x1121e1[_0x511152(0x3e8,0x39f,0x443,0x3d6)])){const _0x1b5e59=await dbs['storeReadO'+'nly'](NAI_VIBE_CACHE_KEY);_0x1b5e59&&_0x1b5e59[_0x1b0dfc(0x357,0x33a,0x3bb,0x37d)]&&(_0x1121e1['kybcC'](_0x1121e1[_0x511152(0x3cf,0x36e,0x39b,0x3ac)],_0x1121e1[_0x511152(0x3cd,0x3f8,0x3f1,0x3c2)])?updateNovelaiImagePreview(_0x1b5e59[_0x1b0dfc(0x3b5,0x32a,0x3b6,0x37d)]):_0x28f1aa(_0x2ea8c9[_0x1b0dfc(0x3bc,0x395,0x305,0x37d)]));}else _0x1e2cd4['src']='',_0xaab9ec[_0x1b0dfc(0x3e6,0x3f6,0x3a1,0x380)][_0x1b0dfc(0x3ee,0x35e,0x3de,0x3da)]=_0x1121e1[_0x1b0dfc(0x3b3,0x3d8,0x442,0x416)],_0x32aa20[_0x1b0dfc(0x33e,0x313,0x3d8,0x380)][_0x1b0dfc(0x413,0x3db,0x3da,0x3da)]=_0x1121e1[_0x511152(0x378,0x3a9,0x386,0x3b6)],_0x93124a[_0x1b0dfc(0x3ba,0x3fb,0x3c2,0x380)][_0x1b0dfc(0x3d2,0x37c,0x39b,0x3da)]=_0x511152(0x44b,0x449,0x4c4,0x403),_0x5b067c[_0x1b0dfc(0x3fd,0x306,0x322,0x37e)+_0x1b0dfc(0x3d4,0x347,0x32d,0x373)+'e']=null;}catch(_0x407c25){console[_0x511152(0x394,0x3d2,0x330,0x36e)](_0x1121e1[_0x511152(0x421,0x3c5,0x420,0x468)],_0x407c25);}try{const _0x16aecd=await dbs[_0x1b0dfc(0x418,0x409,0x38f,0x398)+'nly'](NAI_CHAR_REF_CACHE_KEY);_0x16aecd&&_0x16aecd[_0x1b0dfc(0x2fd,0x3e8,0x370,0x37d)]&&_0x1121e1[_0x511152(0x3c2,0x416,0x3c2,0x41c)](updateNovelaiCharRefImagePreview,_0x16aecd[_0x511152(0x37c,0x341,0x3cc,0x31d)]);}catch(_0x31d09d){console[_0x1b0dfc(0x3f8,0x40a,0x36f,0x395)](_0x511152(0x42a,0x44f,0x47e,0x3b3)+_0x1b0dfc(0x35d,0x3a4,0x41a,0x3d3)+_0x511152(0x43b,0x425,0x460,0x429)+_0x1b0dfc(0x3dc,0x42e,0x3f4,0x421)+_0x511152(0x375,0x3d8,0x3b1,0x2fe),_0x31d09d);}try{const _0x4ee1d1=await dbs[_0x511152(0x397,0x318,0x376,0x413)+_0x511152(0x3e2,0x3f8,0x3a4,0x371)](COMFYUI_REF_CACHE_KEY);if(_0x4ee1d1&&_0x4ee1d1[_0x1b0dfc(0x3e4,0x3e1,0x30d,0x37d)]&&_0x4ee1d1[_0x511152(0x37c,0x336,0x3ae,0x37a)][_0x511152(0x37c,0x35d,0x3a1,0x306)]&&_0x4ee1d1['data'][_0x511152(0x3bc,0x3d2,0x41b,0x3c6)+_0x1b0dfc(0x40b,0x41f,0x45e,0x451)]){if(_0x1121e1[_0x1b0dfc(0x374,0x341,0x39c,0x370)](_0x1121e1['xKXBy'],_0x1121e1[_0x511152(0x467,0x42e,0x4dc,0x409)])){const _0x13a89b=_0x4ee1d1['data'],_0x585102=await _0x1121e1[_0x1b0dfc(0x38a,0x3ca,0x41a,0x3c9)](fetch,_0x13a89b['data']),_0x585194=await _0x585102[_0x511152(0x3f4,0x3e0,0x3f5,0x38f)](),_0x2c1010=URL[_0x1b0dfc(0x36e,0x382,0x3fd,0x396)+_0x511152(0x377,0x3c5,0x3bb,0x341)](_0x585194);_0x1121e1[_0x1b0dfc(0x3a4,0x3ff,0x3a1,0x3c9)](updateComfyUIImagePreview,_0x2c1010),comfyuiImageObjectURL=_0x2c1010,window[_0x1b0dfc(0x452,0x39f,0x3da,0x40a)+'kaotupian']=_0x13a89b[_0x1b0dfc(0x3a5,0x409,0x431,0x3bd)+_0x511152(0x450,0x4b3,0x410,0x443)],_0x1121e1[_0x511152(0x446,0x460,0x46e,0x478)](addLog,_0x511152(0x3da,0x366,0x427,0x386)+'UI图片:\x20'+_0x13a89b[_0x1b0dfc(0x3cf,0x365,0x42c,0x3bd)+'Name']),console['log'](_0x511152(0x439,0x466,0x4ad,0x3d5)+'fyUI\x20image'+_0x1b0dfc(0x3a5,0x380,0x3da,0x37a)+_0x1b0dfc(0x38b,0x420,0x43c,0x3d8)+_0x13a89b[_0x511152(0x3bc,0x426,0x406,0x350)+_0x511152(0x450,0x437,0x410,0x4ac)]);}else{const _0x106069=_0x27ce4d['getElement'+_0x511152(0x447,0x44f,0x46d,0x48a)](_0x1121e1[_0x511152(0x403,0x3c6,0x3a0,0x444)]),_0xbe94c9=_0x4fd679['querySelec'+_0x511152(0x3dd,0x3f3,0x42c,0x3e2)](_0x1121e1[_0x511152(0x452,0x42f,0x3e3,0x45d)]),_0x1ae169=_0xaa13a7[_0x511152(0x460,0x4c7,0x3e0,0x46c)+'ById'](_0x1121e1['arzFq']);_0x106069[_0x1b0dfc(0x345,0x3b4,0x3c7,0x3a8)]&&_0x106069[_0x511152(0x3a7,0x406,0x3f6,0x39a)][_0x511152(0x3fd,0x387,0x3b6,0x402)](_0x1121e1[_0x511152(0x3ee,0x461,0x3b0,0x37e)])&&_0x106069[_0x511152(0x3a7,0x3f6,0x41b,0x3ad)]!==_0x1c5a91&&_0x1bb098[_0x511152(0x396,0x31f,0x3a7,0x3c2)+'ctURL'](_0x106069[_0x1b0dfc(0x3c3,0x3c8,0x386,0x3a8)]);if(_0x17446b)_0x106069[_0x1b0dfc(0x32d,0x38f,0x3d4,0x3a8)]=_0x1b2452,_0x106069['style'][_0x1b0dfc(0x398,0x3ba,0x363,0x3da)]=_0x1121e1[_0x1b0dfc(0x405,0x439,0x3ff,0x426)],_0xbe94c9[_0x511152(0x37f,0x324,0x363,0x3c0)]['display']=_0x511152(0x44b,0x490,0x479,0x3f2),_0x1ae169[_0x1b0dfc(0x312,0x37c,0x35b,0x380)][_0x511152(0x3d9,0x3f6,0x444,0x35a)]=_0x1b0dfc(0x42d,0x36c,0x3fc,0x3cd)+'x';else{const _0x5ac898=_0x1121e1[_0x1b0dfc(0x423,0x42d,0x39f,0x3e8)][_0x1b0dfc(0x3f3,0x46d,0x47d,0x467)]('|');let _0x5891a9=0x35*-0x30+-0x32*0x13+0xda6;while(!![]){switch(_0x5ac898[_0x5891a9++]){case'0':_0x1ae169[_0x1b0dfc(0x34e,0x364,0x35b,0x380)][_0x1b0dfc(0x382,0x390,0x43d,0x3da)]=_0x511152(0x44b,0x4bd,0x4af,0x4c5);continue;case'1':_0xbe94c9['style'][_0x511152(0x3d9,0x441,0x39e,0x421)]=_0x1121e1[_0x511152(0x378,0x325,0x37c,0x3b8)];continue;case'2':_0x106069[_0x1b0dfc(0x368,0x307,0x3f8,0x380)]['display']=_0x1121e1[_0x1b0dfc(0x3ef,0x3bb,0x476,0x416)];continue;case'3':_0x3daf62=null;continue;case'4':_0x106069[_0x1b0dfc(0x3bb,0x40f,0x420,0x3a8)]='';continue;case'5':_0x2582b7[_0x511152(0x409,0x459,0x3ae,0x3ae)+_0x511152(0x406,0x3a3,0x452,0x47a)]=null;continue;}break;}}}}else{if(_0x4ee1d1&&_0x1121e1['ciYPv'](typeof _0x4ee1d1[_0x511152(0x37c,0x3e9,0x34a,0x311)],_0x1121e1[_0x1b0dfc(0x385,0x3e9,0x40a,0x3ab)])){if(_0x1121e1[_0x1b0dfc(0x399,0x39a,0x3d0,0x3ba)](_0x1121e1[_0x511152(0x3f7,0x441,0x3c0,0x41e)],_0x1121e1[_0x511152(0x3f7,0x441,0x403,0x43b)])){const _0x23bb0d=_0x1121e1[_0x1b0dfc(0x459,0x3b8,0x3ec,0x3df)]['split']('|');let _0x420e93=-0x2*0xa39+-0x25f8+0x3a6a;while(!![]){switch(_0x23bb0d[_0x420e93++]){case'0':_0x315b50[_0x1b0dfc(0x358,0x3a8,0x32a,0x380)][_0x511152(0x3d9,0x392,0x416,0x396)]=_0x1121e1['iexeW'];continue;case'1':_0x2d74c8['style'][_0x1b0dfc(0x446,0x3ca,0x394,0x3da)]=_0x1121e1[_0x1b0dfc(0x3b8,0x449,0x48f,0x416)];continue;case'2':_0x410690[_0x1b0dfc(0x3ec,0x33a,0x304,0x380)]['display']=_0x511152(0x44b,0x3dc,0x3d3,0x3f8);continue;case'3':_0x4d7833['src']='';continue;case'4':_0x170ad0[_0x511152(0x409,0x395,0x471,0x418)+_0x511152(0x406,0x42b,0x43f,0x3b0)]=null;continue;case'5':_0x31e1bd=null;continue;}break;}}else{const _0x31ef1a=await _0x1121e1['OIPBn'](fetch,_0x4ee1d1['data']),_0x5f54ad=await _0x31ef1a[_0x1b0dfc(0x424,0x3b7,0x467,0x3f5)](),_0x3cd37f=URL[_0x1b0dfc(0x37a,0x3bf,0x32e,0x396)+_0x511152(0x377,0x347,0x3f1,0x30b)](_0x5f54ad);_0x1121e1['rLqgv'](updateComfyUIImagePreview,_0x3cd37f),comfyuiImageObjectURL=_0x3cd37f,console[_0x511152(0x3bf,0x37c,0x425,0x37b)](_0x1121e1['eMrHt']);}}}}catch(_0x21c90f){console[_0x511152(0x394,0x316,0x3de,0x40b)](_0x511152(0x42a,0x3b3,0x43a,0x3d4)+_0x1b0dfc(0x3ad,0x3fe,0x3fe,0x3d3)+'\x20ComfyUI\x20i'+_0x1b0dfc(0x44a,0x481,0x3c9,0x409),_0x21c90f);}}export function initImageUpload(_0x29ef18){const _0x719ef8={'kgWeV':_0x46c108(0xdb,0x12a,0xd8,0x172)+_0x55897b(0x3cc,0x35b,0x35c,0x389),'aWNED':_0x55897b(0x3a4,0x33f,0x34b,0x31d)+_0x55897b(0x437,0x353,0x3b8,0x340)+_0x46c108(0x185,0x120,0x148,0xfa),'yapTl':function(_0x2e53a4,_0x2d96eb){return _0x2e53a4!==_0x2d96eb;},'leSLW':_0x46c108(0x99,0x10f,0x12a,0x16a),'LuVmZ':function(_0x5cf502){return _0x5cf502();},'tfNyj':function(_0x283a60){return _0x283a60();},'lYPDk':function(_0x32765f,_0x89c98a){return _0x32765f(_0x89c98a);},'SvSQU':function(_0x89db4c,_0x2d87a4){return _0x89db4c===_0x2d87a4;},'fYLHR':'uKHlr','EcOyp':_0x55897b(0x306,0x372,0x34b,0x2e5)+'2','ZhRyf':_0x46c108(0x134,0x1ae,0x18d,0x17c)+_0x46c108(0xda,0x116,0xd1,0x156)+_0x55897b(0x3b7,0x2e2,0x35f,0x325),'jaTKn':'click','Jozgn':_0x55897b(0x3b5,0x37c,0x36c,0x3ce),'Syyht':'#novelai-s'+_0x55897b(0x2cd,0x2e3,0x30f,0x29d)+_0x46c108(0x23f,0x1c5,0x154,0x1ea)+_0x55897b(0x351,0x38b,0x3a9,0x385),'juJeY':_0x55897b(0x350,0x369,0x396,0x32a)+_0x55897b(0x3ad,0x3fb,0x397,0x3e6)+_0x46c108(0x95,0x104,0xed,0x169),'mpGJh':'#novelai-r'+_0x55897b(0x36b,0x384,0x3e2,0x37d)+_0x55897b(0x3c3,0x399,0x3e6,0x445)+'-btn','CNtFZ':'#comfyui-s'+_0x55897b(0x358,0x345,0x337,0x385)+_0x46c108(0xcc,0x13e,0xc1,0x11e),'NdoPw':'#imageInpu'+'t2','CWLxH':_0x55897b(0x31f,0x2cd,0x345,0x34e)+_0x46c108(0x124,0x18e,0x1bc,0x1c5)+'e-btn'};_0x719ef8[_0x46c108(0x15a,0x12b,0xde,0xb0)](loadCachedImages),_0x29ef18[_0x46c108(0x185,0x1a0,0x132,0x1f0)](_0x719ef8['ZhRyf'])['on'](_0x719ef8[_0x55897b(0x365,0x3d6,0x3c7,0x420)],()=>{function _0xf34f56(_0x5117e7,_0x349a81,_0x37f9cc,_0x211d63){return _0x46c108(_0x5117e7-0xa2,_0x37f9cc-0x334,_0x37f9cc-0x131,_0x211d63);}function _0x2bb18e(_0xdc7d28,_0xc78dba,_0x3ed39d,_0x320a71){return _0x46c108(_0xdc7d28-0x1bb,_0x320a71-0x174,_0x3ed39d-0x1a2,_0xdc7d28);}document[_0x2bb18e(0x365,0x31e,0x326,0x33a)+'ById'](_0x719ef8[_0x2bb18e(0x2c3,0x34b,0x2f8,0x30a)])[_0x2bb18e(0x232,0x2ab,0x298,0x279)]();}),_0x29ef18[_0x46c108(0x130,0x1a0,0x18c,0x1b7)](_0x55897b(0x3c1,0x3ca,0x396,0x33a)+_0x46c108(0x1c5,0x160,0x149,0x17f))['on'](_0x719ef8[_0x55897b(0x2c5,0x2e7,0x339,0x383)],handleNovelaiImageUpload),_0x29ef18[_0x46c108(0x128,0x1a0,0x16c,0x157)](_0x46c108(0x198,0x1b7,0x1a5,0x221)+_0x55897b(0x37e,0x3ce,0x3af,0x421)+_0x46c108(0x17a,0x13e,0xf2,0xde))['on'](_0x719ef8[_0x55897b(0x3d4,0x40d,0x3c7,0x404)],()=>{function _0x554846(_0x201409,_0x431701,_0x4afb42,_0x1fdb47){return _0x46c108(_0x201409-0x10e,_0x201409- -0x10a,_0x4afb42-0x14d,_0x431701);}function _0x548288(_0x199d55,_0x1aeada,_0x18416c,_0x29d0d3){return _0x46c108(_0x199d55-0x1e2,_0x199d55-0x3a7,_0x18416c-0xfc,_0x1aeada);}_0x719ef8[_0x554846(0x72,0xe6,0xe5,0x40)](_0x548288(0x4bc,0x53b,0x505,0x52f),_0x719ef8[_0x548288(0x519,0x4c0,0x57e,0x524)])?_0x719ef8[_0x548288(0x561,0x5b7,0x5ca,0x51b)](removeNovelaiImage):_0x44d034[_0x548288(0x56d,0x5b6,0x58e,0x516)+_0x554846(0xa3,0xdb,0x7c,0xa8)](_0x719ef8[_0x554846(-0x13,-0x7c,-0x93,-0xa)])[_0x554846(-0x5,0x31,0x61,0x48)]();});function _0x46c108(_0x2ba5b5,_0x1b5f5c,_0x5ef97e,_0x258097){return _0x33f70a(_0x2ba5b5-0x18,_0x1b5f5c-0xf3,_0x258097,_0x1b5f5c- -0xdf);}function _0x55897b(_0x1b50cc,_0x443e5a,_0x36c025,_0x13af82){return _0x33f70a(_0x1b50cc-0x7,_0x443e5a-0x13e,_0x1b50cc,_0x36c025-0x142);}_0x29ef18[_0x55897b(0x433,0x422,0x3c1,0x36e)](_0x719ef8['Syyht'])['on'](_0x46c108(0x118,0x105,0xb3,0x97),()=>{function _0x1ed5cb(_0x4fdd2c,_0x5bd0c3,_0x21215d,_0x3715ad){return _0x46c108(_0x4fdd2c-0x150,_0x21215d- -0x1d2,_0x21215d-0xf2,_0x4fdd2c);}function _0x269446(_0x24b4eb,_0x39b72f,_0x586b21,_0xeb8cf4){return _0x46c108(_0x24b4eb-0xe2,_0x24b4eb- -0xa0,_0x586b21-0x1c,_0x586b21);}document[_0x1ed5cb(-0x6b,-0x8a,-0xc,-0x6b)+'ById'](_0x269446(0x8a,0xee,0x65,0xda)+'_nai_char_'+_0x1ed5cb(-0xe9,-0xb0,-0xb2,-0x50))['click']();}),_0x29ef18[_0x55897b(0x353,0x386,0x3c1,0x36a)](_0x719ef8['juJeY'])['on'](_0x55897b(0x3a0,0x39e,0x36c,0x3a8),handleNovelaiCharRefImageUpload),_0x29ef18[_0x55897b(0x38e,0x3e0,0x3c1,0x434)](_0x719ef8[_0x46c108(0x227,0x1a9,0x1cf,0x21e)])['on'](_0x719ef8[_0x55897b(0x368,0x39a,0x3c7,0x37c)],()=>{function _0x170d2b(_0x582928,_0x47d183,_0x20fa63,_0x37b42c){return _0x46c108(_0x582928-0xd9,_0x47d183- -0x1bb,_0x20fa63-0x14b,_0x582928);}_0x719ef8[_0x170d2b(-0x75,-0x90,-0xd6,-0xae)](removeNovelaiCharRefImage);}),_0x29ef18[_0x55897b(0x410,0x354,0x3c1,0x425)](_0x719ef8[_0x46c108(0x13a,0x10a,0x154,0xbe)])['on'](_0x719ef8[_0x46c108(0x18d,0x1a6,0x226,0x190)],()=>{function _0xa311c5(_0x3cea93,_0x1e4d66,_0x295c76,_0x2c2594){return _0x55897b(_0x3cea93,_0x1e4d66-0xef,_0x2c2594- -0x451,_0x2c2594-0x158);}function _0x3b26f9(_0xea8d33,_0x388ac8,_0x46b0a9,_0x3de6cc){return _0x46c108(_0xea8d33-0x15a,_0x388ac8- -0x1f,_0x46b0a9-0x86,_0xea8d33);}_0x719ef8[_0x3b26f9(0x172,0x152,0xec,0x1c0)]('uKHlr',_0x719ef8[_0x3b26f9(0x89,0xda,0xca,0x94)])?document[_0xa311c5(-0x3c,-0xb8,-0x65,-0x6a)+_0x3b26f9(0x1c2,0x18e,0x193,0x137)](_0x719ef8['EcOyp'])[_0xa311c5(-0xc2,-0x170,-0x181,-0x12b)]():_0x719ef8[_0xa311c5(-0x77,-0xd4,-0x130,-0xea)](_0x28d81a,_0x3c5a36[_0x3b26f9(0x8f,0xc3,0x12b,0xca)]);}),_0x29ef18['find'](_0x719ef8['NdoPw'])['on'](_0x719ef8[_0x46c108(0x139,0x118,0xa0,0xdc)],handleImageUpload2),_0x29ef18['find'](_0x719ef8[_0x46c108(0x168,0x11c,0x152,0x162)])['on'](_0x719ef8[_0x46c108(0x1b0,0x1a6,0x1eb,0x181)],()=>{removeComfyUIImage();});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};