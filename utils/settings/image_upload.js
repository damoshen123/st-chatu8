(function(_0x5ac2e8,_0x1f26cb){function _0x3955f1(_0x116231,_0x4d8794,_0x1e3b4a,_0x49def6){return _0x95c4(_0x4d8794- -0x3e4,_0x49def6);}function _0x5b169a(_0x3a7c7c,_0x5ce4e9,_0x441850,_0x51ccbd){return _0x95c4(_0x3a7c7c- -0x287,_0x51ccbd);}const _0x5b87d7=_0x5ac2e8();while(!![]){try{const _0x4e9628=-parseInt(_0x3955f1(-0x370,-0x2f2,-0x316,-0x330))/(0xa93*0x2+0x701*-0x4+-0x1*-0x6df)+parseInt(_0x3955f1(-0x2cf,-0x28c,-0x2ef,-0x286))/(0x405+0x2aa+-0x6ad)+-parseInt(_0x5b169a(-0xe8,-0x126,-0x166,-0x162))/(-0x1651*0x1+-0x3ba*0x2+0x1dc8)*(parseInt(_0x3955f1(-0x26e,-0x294,-0x312,-0x30f))/(0x133*-0x1+0x7*-0x232+0x1095))+-parseInt(_0x5b169a(-0x129,-0xcb,-0x121,-0xe8))/(0x11*-0x24b+-0x16ca*0x1+0x3dca)+parseInt(_0x5b169a(-0x145,-0xd1,-0xf6,-0x133))/(0x1169+-0x1*0x13f+-0x1024)*(-parseInt(_0x5b169a(-0x140,-0xff,-0xd9,-0x1ab))/(0x20ae+-0xee9*-0x1+-0x2f90))+parseInt(_0x3955f1(-0x345,-0x2d7,-0x2d4,-0x2c8))/(-0x38b*0x5+-0x20cc+-0xe3*-0x39)*(-parseInt(_0x3955f1(-0x23b,-0x22b,-0x216,-0x29b))/(-0x1d3a+0xd*0xb5+0x1*0x1412))+parseInt(_0x3955f1(-0x2d0,-0x293,-0x266,-0x2af))/(-0xe3f+-0x1*0x10a6+0x1eef);if(_0x4e9628===_0x1f26cb)break;else _0x5b87d7['push'](_0x5b87d7['shift']());}catch(_0x1ffd86){_0x5b87d7['push'](_0x5b87d7['shift']());}}}(_0x2fc3,-0x14e606+-0x2*-0x2c8c9+0x1ba6e1));const _0x40d5b4=(function(){const _0x1a948b={};function _0x1531d7(_0x3ffea3,_0x46193d,_0x3a5989,_0x1d2ce3){return _0x95c4(_0x3ffea3-0x34c,_0x1d2ce3);}_0x1a948b[_0x4343a4(-0x102,-0x10d,-0x109,-0xbb)]=function(_0x4ab978,_0x2091be){return _0x4ab978===_0x2091be;},_0x1a948b['yqfZR']=_0x4343a4(-0x1e,-0xbf,-0x26,-0x5f);const _0x4cd4ef=_0x1a948b;function _0x4343a4(_0x575357,_0x167283,_0xc00ff6,_0x40111d){return _0x95c4(_0x40111d- -0x227,_0x167283);}let _0x56fe71=!![];return function(_0x5c1799,_0x1b9880){const _0x57dc7a={};function _0x429e4e(_0x15a017,_0x5773a7,_0x5d0e46,_0x1d34cd){return _0x4343a4(_0x15a017-0x20,_0x5773a7,_0x5d0e46-0x6c,_0x15a017- -0x14e);}_0x57dc7a[_0x429e4e(-0x244,-0x23b,-0x2ba,-0x1ea)]=_0x429e4e(-0x1b2,-0x166,-0x1c1,-0x1b7)+_0x429e4e(-0x1ac,-0x15c,-0x14f,-0x199)+_0x429e4e(-0x1e8,-0x228,-0x1cd,-0x1d8)+'har\x20Ref\x20im'+'age:';const _0x27d1c3=_0x57dc7a,_0x36ee6a=_0x56fe71?function(){function _0x381190(_0x427499,_0x41b507,_0x27ee6f,_0x508b09){return _0x429e4e(_0x508b09-0x1c2,_0x27ee6f,_0x27ee6f-0xfb,_0x508b09-0x1d7);}function _0x119362(_0x17d7b7,_0x5ecd10,_0xa3ad46,_0x16bc8b){return _0x11a98d(_0x5ecd10,_0x17d7b7- -0x1d6,_0xa3ad46-0x1e5,_0x16bc8b-0x139);}if(_0x4cd4ef[_0x119362(0x30e,0x352,0x2b9,0x379)](_0x4cd4ef[_0x381190(-0x68,-0xb0,-0x26,-0x7c)],_0x4cd4ef[_0x119362(0x2d9,0x336,0x2ed,0x345)])){if(_0x1b9880){const _0xd63de6=_0x1b9880[_0x119362(0x374,0x34e,0x370,0x334)](_0x5c1799,arguments);return _0x1b9880=null,_0xd63de6;}}else _0x348590[_0x381190(-0xd4,-0xda,-0x10d,-0xc4)](_0x27d1c3[_0x381190(-0x73,-0xaf,-0xf0,-0x82)],_0x1af920);}:function(){};function _0x11a98d(_0x33aa49,_0x1f899f,_0x411dc5,_0x1d8994){return _0x1531d7(_0x1f899f-0x2c,_0x1f899f-0x174,_0x411dc5-0x13b,_0x33aa49);}return _0x56fe71=![],_0x36ee6a;};}()),_0x453bc5=_0x40d5b4(this,function(){const _0x91938d={};function _0x269dbd(_0xb300c3,_0x219a4f,_0x436dee,_0x2afc12){return _0x95c4(_0xb300c3- -0x2d9,_0x2afc12);}_0x91938d[_0x11144c(0x45e,0x51a,0x4be,0x4b1)]=_0x269dbd(-0x1ac,-0x1e3,-0x225,-0x185)+'+$';function _0x11144c(_0x45701d,_0x5c08dc,_0x4d8e66,_0x779805){return _0x95c4(_0x779805-0x318,_0x4d8e66);}const _0x2e889d=_0x91938d;return _0x453bc5[_0x11144c(0x3fc,0x40a,0x42a,0x420)]()['search'](_0x2e889d[_0x11144c(0x47a,0x4ba,0x465,0x4b1)])[_0x269dbd(-0x1d1,-0x207,-0x1bf,-0x19f)]()[_0x11144c(0x479,0x50f,0x46f,0x4f0)+'r'](_0x453bc5)[_0x11144c(0x44a,0x419,0x4a7,0x45b)](_0x2e889d[_0x269dbd(-0x140,-0x163,-0x198,-0xcf)]);});function _0x95c4(_0xbecef5,_0x760df4){_0xbecef5=_0xbecef5-(0x7*0x241+0x1*-0x2035+0x1151);const _0x419113=_0x2fc3();let _0x3ed0c2=_0x419113[_0xbecef5];if(_0x95c4['uacaAQ']===undefined){var _0x8d9a01=function(_0x1dc9c3){const _0x10244f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2c0121='',_0x51bbbe='',_0x479ca0=_0x2c0121+_0x8d9a01;for(let _0x37300d=0x6f4*0x5+0x3fb*0x8+0x1*-0x429c,_0x543320,_0x469e74,_0x130d7f=-0x1*0x20f8+0x11*-0x228+0x45a0;_0x469e74=_0x1dc9c3['charAt'](_0x130d7f++);~_0x469e74&&(_0x543320=_0x37300d%(-0x1085+-0x240d+0x3496)?_0x543320*(-0x1426+0x1e1b+-0x9b5)+_0x469e74:_0x469e74,_0x37300d++%(0x164a+0x1*-0x2391+0xd4b))?_0x2c0121+=_0x479ca0['charCodeAt'](_0x130d7f+(-0x802+0x1*0x12b3+-0xaa7))-(0x2405+-0xdc8+0x1*-0x1633)!==0x9ac+-0x148f+0xae3?String['fromCharCode'](-0x1*0xea9+0x21da+-0x1232&_0x543320>>(-(0x8e*-0x11+-0x1f7f+0x28ef)*_0x37300d&0x38b*0x4+0xf40+-0x1d66)):_0x37300d:-0x5*-0x703+0x51*-0x71+0xb2){_0x469e74=_0x10244f['indexOf'](_0x469e74);}for(let _0x45b251=-0x1892*-0x1+-0x407*0x1+-0x148b,_0xd76088=_0x2c0121['length'];_0x45b251<_0xd76088;_0x45b251++){_0x51bbbe+='%'+('00'+_0x2c0121['charCodeAt'](_0x45b251)['toString'](0x182c+-0xbb*-0x2b+-0x3785))['slice'](-(0x101b+-0x212e+0x1*0x1115));}return decodeURIComponent(_0x51bbbe);};_0x95c4['AArMjN']=_0x8d9a01,_0x95c4['WLpHow']={},_0x95c4['uacaAQ']=!![];}const _0x4b1869=_0x419113[-0x5d7+-0x106*0x10+0x1637],_0x49d70c=_0xbecef5+_0x4b1869,_0x3eb573=_0x95c4['WLpHow'][_0x49d70c];if(!_0x3eb573){const _0x259942=function(_0x5c8397){this['Umbqyj']=_0x5c8397,this['EqoKVD']=[-0x12e1+0x1de+0x1104,0x1*0x103f+-0xcf1*0x3+0x1694,0x823*0x1+0x1d70+-0x2593],this['BkrzqZ']=function(){return'newState';},this['OjhjGm']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ELtWfJ']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x259942['prototype']['uHIoNR']=function(){const _0x3fb6c2=new RegExp(this['OjhjGm']+this['ELtWfJ']),_0x3f5345=_0x3fb6c2['test'](this['BkrzqZ']['toString']())?--this['EqoKVD'][0x1ae4*-0x1+-0xfa*0x13+0x41*0xb3]:--this['EqoKVD'][0x11a6+-0x1ebe+0x4*0x346];return this['wTCHLx'](_0x3f5345);},_0x259942['prototype']['wTCHLx']=function(_0x1a6963){if(!Boolean(~_0x1a6963))return _0x1a6963;return this['UAEBqv'](this['Umbqyj']);},_0x259942['prototype']['UAEBqv']=function(_0x4d09be){for(let _0x4bbc77=0x1165+-0x20ce+-0x1*-0xf69,_0x34b130=this['EqoKVD']['length'];_0x4bbc77<_0x34b130;_0x4bbc77++){this['EqoKVD']['push'](Math['round'](Math['random']())),_0x34b130=this['EqoKVD']['length'];}return _0x4d09be(this['EqoKVD'][-0x1e11+0xb07+0x130a]);},new _0x259942(_0x95c4)['uHIoNR'](),_0x3ed0c2=_0x95c4['AArMjN'](_0x3ed0c2),_0x95c4['WLpHow'][_0x49d70c]=_0x3ed0c2;}else _0x3ed0c2=_0x3eb573;return _0x3ed0c2;}_0x453bc5();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x2486a5(0x4d8,0x47f,0x4a8,0x4f3)+_0x462b30(0x15a,0x1b8,0x1c3,0x1c3)+_0x2486a5(0x428,0x4a2,0x501,0x4d8)+'age',NAI_CHAR_REF_CACHE_KEY=_0x462b30(0x168,0x141,0x176,0x11e)+_0x462b30(0x1bd,0x10d,0x154,0x15b)+'ef_image',COMFYUI_REF_CACHE_KEY='cache_comf'+'yui_ref_im'+'age';let nai3VibeTransferImageMimeType='image/png',nai3CharRefImageMimeType=_0x2486a5(0x4b7,0x4fc,0x50c,0x4cb),comfyuiImageObjectURL=null;function _0x2486a5(_0x2cbcff,_0x4d7f41,_0x94c71a,_0x15512d){return _0x95c4(_0x4d7f41-0x33a,_0x15512d);}function updateNovelaiImagePreview(_0x1bb3b0){const _0xb11b13={};_0xb11b13[_0x483786(-0x14f,-0x188,-0x159,-0x1c6)]=_0x41b33e(0x3a6,0x39c,0x36b,0x418),_0xb11b13[_0x41b33e(0x366,0x368,0x397,0x34d)]=_0x483786(-0xc7,-0x110,-0x112,-0x11f),_0xb11b13['mAncU']='inline-fle'+'x',_0xb11b13[_0x483786(-0x15c,-0x103,-0x1cb,-0x172)]='#novelai-i'+_0x41b33e(0x31e,0x326,0x311,0x36f)+_0x483786(-0x156,-0xe1,-0x155,-0x156)+'er\x20.st-cha'+_0x483786(-0xbc,-0x9a,-0x79,-0xcb)+_0x483786(-0x5a,-0x5c,-0xf6,-0xd3)+'r',_0xb11b13[_0x483786(-0x11c,-0x18b,-0x15a,-0x165)]=_0x41b33e(0x3f7,0x37c,0x3eb,0x3d8)+_0x483786(-0x145,-0x100,-0xba,-0xd8)+_0x483786(-0x14a,-0x163,-0xd4,-0x107);function _0x483786(_0x325858,_0xc017f3,_0x21254a,_0x4256c3){return _0x462b30(_0x325858-0x13a,_0x325858,_0x4256c3- -0x2de,_0x4256c3-0xdd);}_0xb11b13[_0x483786(-0xe3,-0x119,-0xcf,-0xe9)]='data:image',_0xb11b13[_0x41b33e(0x3a5,0x367,0x3a1,0x391)]='ASgYu',_0xb11b13[_0x483786(-0xfb,-0xde,-0x151,-0xf8)]=function(_0x2cd496,_0x5edaf9){return _0x2cd496!==_0x5edaf9;},_0xb11b13[_0x41b33e(0x3de,0x365,0x3a2,0x35a)]=_0x41b33e(0x2de,0x30b,0x31c,0x2fa);const _0x18545b=_0xb11b13,_0x3eba90=document[_0x41b33e(0x2b0,0x2de,0x2a9,0x30f)+_0x41b33e(0x286,0x2f3,0x302,0x312)](_0x41b33e(0x2b2,0x2d4,0x27d,0x32a)+_0x483786(-0x54,-0x127,-0x94,-0xcc)),_0x64aa53=document[_0x483786(-0x151,-0x15f,-0x72,-0xf0)+'tor'](_0x18545b['NRRwb']);function _0x41b33e(_0x33b0bf,_0x35b442,_0x2d8f32,_0x4a6e31){return _0x462b30(_0x33b0bf-0xb6,_0x33b0bf,_0x35b442-0x18f,_0x4a6e31-0x110);}const _0x31cfaa=document['getElement'+'ById'](_0x18545b[_0x483786(-0x12e,-0x1b6,-0x194,-0x165)]);if(_0x1bb3b0&&_0x1bb3b0[_0x41b33e(0x2bb,0x2ac,0x26b,0x29f)](_0x18545b[_0x483786(-0xec,-0xbe,-0x104,-0xe9)])){if(_0x18545b[_0x41b33e(0x3c1,0x367,0x336,0x3a6)]===_0x18545b[_0x483786(-0xed,-0x168,-0xfb,-0x106)]){_0x3eba90[_0x483786(-0x1ba,-0x1d7,-0x1ad,-0x15a)]=_0x1bb3b0,_0x3eba90[_0x483786(-0x11a,-0x123,-0x103,-0x130)][_0x483786(-0x1b8,-0x15a,-0x147,-0x18d)]='block',_0x64aa53['style']['display']=_0x18545b[_0x483786(-0xe2,-0x125,-0xf8,-0x105)],_0x31cfaa[_0x483786(-0x104,-0x173,-0x1b0,-0x130)][_0x41b33e(0x35a,0x2e0,0x2e2,0x305)]='inline-fle'+'x';const _0x280438=_0x1bb3b0[_0x483786(-0x1fa,-0x20d,-0x1cb,-0x18c)](','),_0xc85a07=_0x280438[-0x261a+0x4c4*-0x1+-0x6*-0x725][_0x41b33e(0x2b9,0x2e1,0x28f,0x292)](':')[-0x4*0x290+0x1b6f+-0x112e*0x1][_0x41b33e(0x316,0x2e1,0x28b,0x268)](';')[0x1*0x1cce+0xcbf+-0x298d];nai3VibeTransferImageMimeType=_0xc85a07,window[_0x41b33e(0x3a8,0x374,0x3be,0x39a)+_0x41b33e(0x2d8,0x2ae,0x29b,0x319)+'e']=_0x280438[0x1f42+-0x1992+-0x5af];const _0xd37de1={};_0xd37de1['id']=NAI_VIBE_CACHE_KEY,_0xd37de1['data']=_0x1bb3b0,dbs['storeReadW'+_0x483786(-0x10c,-0x149,-0xef,-0x11e)](_0xd37de1);}else{_0x2547e2[_0x41b33e(0x2d4,0x313,0x347,0x29c)]=_0x232787,_0x387476[_0x41b33e(0x2f3,0x33d,0x310,0x2f7)][_0x483786(-0x150,-0x110,-0x1a7,-0x18d)]=_0x18545b[_0x483786(-0x16c,-0x201,-0x18a,-0x1c6)],_0xfb6dcb[_0x483786(-0xb2,-0xba,-0x149,-0x130)][_0x483786(-0x1b8,-0x1a7,-0x14c,-0x18d)]=_0x18545b[_0x41b33e(0x3c0,0x368,0x3e8,0x3c2)],_0x87ca81[_0x483786(-0x16b,-0x1a7,-0x194,-0x130)][_0x483786(-0x178,-0x11e,-0x1b3,-0x18d)]=_0x18545b[_0x41b33e(0x326,0x380,0x35d,0x3eb)];const _0xcc96f6=_0xf7ebf3[_0x483786(-0x158,-0x15e,-0x1da,-0x18c)](','),_0x5eb2f8=_0xcc96f6[0x1*-0x1750+0xa7*0x35+-0xb43][_0x41b33e(0x318,0x2e1,0x302,0x2db)](':')[-0xf21+-0x1b1d+-0x3*-0xe15][_0x483786(-0x1d5,-0x1cc,-0x18e,-0x18c)](';')[0x100d+-0xf9d+-0x70];_0x207fb8=_0x5eb2f8,_0x1fe38e['nai3CharRe'+_0x483786(-0xd8,-0xf9,-0x13e,-0x124)]=_0xcc96f6[0x4*0x32b+0x1*-0xd8c+-0xe1*-0x1];const _0x3ae41a={};_0x3ae41a['id']=_0x4cd263,_0x3ae41a[_0x483786(-0x1d6,-0x182,-0x16c,-0x161)]=_0x19dd5a,_0x41eefc[_0x41b33e(0x37b,0x301,0x309,0x34f)+_0x41b33e(0x30a,0x34f,0x31f,0x35d)](_0x3ae41a);}}else{if(_0x18545b[_0x41b33e(0x32f,0x375,0x3e4,0x31d)](_0x483786(-0x7c,-0x12f,-0x140,-0xcf),'eVOCp')){const _0x2d88be=_0x18545b[_0x483786(-0x153,-0xe3,-0x12a,-0x108)][_0x41b33e(0x305,0x2e1,0x286,0x2d5)]('|');let _0x2b2a94=0x2047*-0x1+-0x26dd+0x274*0x1d;while(!![]){switch(_0x2d88be[_0x2b2a94++]){case'0':_0x64aa53[_0x41b33e(0x2fb,0x33d,0x2ec,0x365)][_0x483786(-0x17b,-0x155,-0x1ef,-0x18d)]='flex';continue;case'1':_0x3eba90[_0x41b33e(0x2d7,0x313,0x2e5,0x308)]='';continue;case'2':_0x3eba90[_0x41b33e(0x359,0x33d,0x351,0x2d0)]['display']=_0x18545b[_0x483786(-0xe0,-0x12e,-0x155,-0x105)];continue;case'3':_0x31cfaa[_0x41b33e(0x352,0x33d,0x2be,0x339)][_0x483786(-0x160,-0x10c,-0x14e,-0x18d)]=_0x18545b['layvE'];continue;case'4':window['nai3VibeTr'+_0x41b33e(0x2e1,0x2ae,0x30b,0x2d9)+'e']=null;continue;}break;}}else _0x3ddee8[_0x483786(-0x192,-0x163,-0x234,-0x1be)]('Error\x20load'+'ing\x20cached'+_0x41b33e(0x267,0x2b3,0x321,0x31a)+_0x483786(-0x142,-0xa7,-0xfd,-0x10c),_0x37ec29);}}function removeNovelaiImage(){const _0x4c949c={'JmmAG':function(_0x371639,_0x3817a1){return _0x371639(_0x3817a1);}};function _0x358e4f(_0x43377e,_0x8386f8,_0xa676fd,_0x40f16f){return _0x2486a5(_0x43377e-0x1de,_0x40f16f- -0x5e9,_0xa676fd-0x39,_0x8386f8);}_0x4c949c[_0xbca330(-0x2e8,-0x1ec,-0x269,-0x20a)](updateNovelaiImagePreview,null);function _0xbca330(_0x6dee5f,_0x10a5f0,_0x9d36f0,_0x1ade32){return _0x2486a5(_0x6dee5f-0xc0,_0x9d36f0- -0x71f,_0x9d36f0-0x14a,_0x6dee5f);}dbs[_0x358e4f(-0x120,-0x18d,-0x139,-0x137)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x1d03a3){function _0x83b193(_0x50c947,_0x19d5a2,_0x2ed099,_0x33c0ba){return _0x462b30(_0x50c947-0x1df,_0x33c0ba,_0x50c947-0x224,_0x33c0ba-0xc7);}const _0x3dac28={'OuEPQ':function(_0x4bf45e,_0x218d38){return _0x4bf45e===_0x218d38;},'WRRef':_0x115345(-0x37,-0xa5,-0xf7,-0x74),'zrxHF':function(_0x503c80,_0x195f40,_0x58eb04){return _0x503c80(_0x195f40,_0x58eb04);},'LuJOh':function(_0x34a1b7,_0x2a789a){return _0x34a1b7(_0x2a789a);},'fMBdK':'Error\x20proc'+_0x83b193(0x3b8,0x421,0x41b,0x369)+_0x115345(-0x126,-0x10c,-0xbc,-0x183)+':','kIhkY':_0x115345(-0x8d,-0x6f,-0xd2,0x11)},_0x143475=_0x1d03a3[_0x115345(-0x141,-0x11e,-0x110,-0x137)][_0x83b193(0x3b4,0x3af,0x41c,0x3a5)][0xc2*0x2f+0xd98+0x3136*-0x1];function _0x115345(_0x25ab91,_0x2e3c7b,_0x48fc0c,_0x52bf74){return _0x2486a5(_0x25ab91-0x4b,_0x2e3c7b- -0x552,_0x48fc0c-0x16f,_0x48fc0c);}if(!_0x143475)return;try{if(_0x3dac28[_0x83b193(0x410,0x486,0x47b,0x42c)](_0x3dac28[_0x115345(-0xc5,-0x103,-0x143,-0x9f)],_0x83b193(0x3c8,0x36e,0x405,0x3be))){const _0x104bb2=await _0x3dac28[_0x115345(-0x120,-0xa7,-0x32,-0xfe)](processUploadedImage,_0x143475,!![]);_0x3dac28[_0x83b193(0x407,0x46a,0x42a,0x39e)](updateNovelaiImagePreview,_0x104bb2);}else _0xdf7f0d(_0x16faf9['data']);}catch(_0x59066c){console[_0x83b193(0x344,0x364,0x3c3,0x36a)](_0x3dac28[_0x115345(-0x17c,-0x112,-0xb1,-0x133)],_0x59066c),_0x3dac28[_0x83b193(0x407,0x39c,0x41b,0x3f0)](alert,_0x3dac28[_0x83b193(0x377,0x3b5,0x36f,0x3e2)]+_0x59066c[_0x115345(-0xfc,-0xad,-0xf4,-0xbd)]);}}function updateNovelaiCharRefImagePreview(_0x43df52){const _0x5e9627={};_0x5e9627[_0x53530b(0x15d,0x1ba,0x121,0x1a2)]=_0x542739(0x231,0x1c1,0x1ab,0x193)+_0x542739(0x277,0x274,0x26e,0x212)+_0x53530b(0x1cd,0x145,0x149,0x1b3),_0x5e9627[_0x542739(0x222,0x1e1,0x173,0x189)]=_0x542739(0x2dc,0x269,0x279,0x243)+_0x542739(0x218,0x1d2,0x17c,0x207)+_0x542739(0x266,0x27c,0x2d2,0x274)+_0x53530b(0x165,0xf4,0xd9,0x128),_0x5e9627[_0x53530b(0x271,0x1d0,0x253,0x20e)]=_0x542739(0x1b5,0x1ab,0x21b,0x130),_0x5e9627['NlyAA']=function(_0x826664,_0x3c9ea5){return _0x826664!==_0x3c9ea5;},_0x5e9627[_0x53530b(0x229,0x25b,0x22a,0x1dc)]=_0x53530b(0x238,0x1f8,0x28d,0x218),_0x5e9627[_0x542739(0x12a,0x1aa,0x1b3,0x186)]=_0x542739(0x26a,0x289,0x23a,0x20e);function _0x542739(_0xbd14d7,_0x11d783,_0x8c80fd,_0x5b2665){return _0x2486a5(_0xbd14d7-0x14c,_0x11d783- -0x28d,_0x8c80fd-0x5f,_0x8c80fd);}_0x5e9627[_0x53530b(0x1f1,0x16a,0x191,0x1ba)]=_0x542739(0x1e5,0x23b,0x2b3,0x22b),_0x5e9627[_0x53530b(0x192,0xee,0xeb,0x151)]=_0x542739(0x2d9,0x288,0x2db,0x268);function _0x53530b(_0x1e21eb,_0x50f01f,_0x917d47,_0x17c752){return _0x462b30(_0x1e21eb-0x14,_0x1e21eb,_0x17c752-0x7,_0x17c752-0x75);}_0x5e9627[_0x542739(0x1ad,0x1b1,0x19e,0x14b)]='flex';const _0x2b992a=_0x5e9627,_0x28e021=document[_0x53530b(0x10b,0x1c8,0x12f,0x156)+_0x53530b(0x19c,0x16e,0x1bc,0x16b)](_0x2b992a[_0x53530b(0x159,0x1e3,0x216,0x1a2)]),_0x1ae529=document['querySelec'+_0x542739(0x29f,0x24b,0x2a4,0x259)](_0x542739(0x165,0x1c3,0x16d,0x1be)+'har-ref-im'+'age-previe'+_0x53530b(0x1f7,0x177,0x1ac,0x18e)+_0x53530b(0x1b1,0x1e0,0x1d9,0x1cd)+_0x53530b(0x14e,0x21f,0x182,0x1c8)+_0x53530b(0x115,0x10c,0x162,0x121)),_0x439228=document[_0x542739(0x1e2,0x1cb,0x18a,0x166)+_0x542739(0x22e,0x1e0,0x1c7,0x1e5)](_0x2b992a[_0x53530b(0x1e9,0x12b,0x1dc,0x16c)]);if(_0x43df52&&_0x43df52[_0x542739(0x1d6,0x199,0x1e4,0x165)](_0x2b992a[_0x542739(0x277,0x283,0x29e,0x226)])){if(_0x2b992a[_0x542739(0x1cd,0x198,0x13a,0x1d6)](_0x2b992a[_0x542739(0x1e8,0x251,0x1fd,0x205)],_0x2b992a[_0x542739(0x229,0x251,0x212,0x2c0)]))_0x2dad98[_0x542739(0x172,0x1cb,0x164,0x240)+_0x53530b(0x14c,0x1a8,0x164,0x16b)](_0x542739(0x17f,0x1d6,0x1c6,0x195)+'2')[_0x542739(0x1d8,0x224,0x29e,0x200)]();else{_0x28e021[_0x53530b(0x209,0x136,0x128,0x18b)]=_0x43df52,_0x28e021['style'][_0x53530b(0x194,0x1ad,0xe5,0x158)]=_0x2b992a[_0x53530b(0x183,0x157,0xe1,0x135)],_0x1ae529[_0x542739(0x29c,0x22a,0x1df,0x23f)][_0x542739(0x1fc,0x1cd,0x1e7,0x166)]=_0x2b992a[_0x53530b(0x175,0x205,0x1d5,0x1ba)],_0x439228[_0x53530b(0x1b9,0x193,0x134,0x1b5)][_0x542739(0x1a0,0x1cd,0x1bd,0x1f2)]='inline-fle'+'x';const _0x27a542=_0x43df52[_0x542739(0x246,0x1ce,0x155,0x242)](','),_0xb41b2a=_0x27a542[0x12d5*0x1+0x2*-0x12c2+0x12af]['split'](':')[-0x98e+-0x1023+0x19b2][_0x542739(0x16a,0x1ce,0x1a8,0x199)](';')[-0x2028+0x109d*0x2+-0x112];nai3CharRefImageMimeType=_0xb41b2a,window[_0x542739(0x151,0x197,0x12c,0x13f)+_0x53530b(0x221,0x1c4,0x205,0x1c1)]=_0x27a542[-0x8cc*0x1+0x5*0x20c+0x16f*-0x1];const _0x26aaae={};_0x26aaae['id']=NAI_CHAR_REF_CACHE_KEY,_0x26aaae[_0x542739(0x26b,0x1f9,0x24c,0x1a7)]=_0x43df52,dbs[_0x542739(0x180,0x1ee,0x1a8,0x186)+_0x53530b(0x1d6,0x19b,0x217,0x1c7)](_0x26aaae);}}else{const _0x5eda90=_0x2b992a[_0x542739(0x187,0x1c6,0x1c6,0x1cc)][_0x53530b(0x162,0x1c5,0x15c,0x159)]('|');let _0x8f0020=0x571+-0x1c01+0x10*0x169;while(!![]){switch(_0x5eda90[_0x8f0020++]){case'0':window[_0x53530b(0x156,0x183,0xac,0x122)+_0x53530b(0x156,0x1ac,0x20b,0x1c1)]=null;continue;case'1':_0x28e021['style'][_0x542739(0x181,0x1cd,0x16a,0x1e5)]=_0x2b992a[_0x542739(0x1f8,0x22f,0x27a,0x2af)];continue;case'2':_0x1ae529['style'][_0x542739(0x1c9,0x1cd,0x1d0,0x1ce)]=_0x2b992a[_0x53530b(0x163,0xfc,0x190,0x13c)];continue;case'3':_0x28e021[_0x53530b(0x14a,0x1b7,0x16e,0x18b)]='';continue;case'4':_0x439228['style']['display']=_0x2b992a[_0x53530b(0x155,0x20b,0x163,0x1ba)];continue;}break;}}}function _0x462b30(_0x50059f,_0x58974a,_0x12acd1,_0x239d9b){return _0x95c4(_0x12acd1-0x31,_0x58974a);}function removeNovelaiCharRefImage(){function _0x297314(_0x28a76d,_0x5cea32,_0x17daa3,_0x37ff46){return _0x2486a5(_0x28a76d-0x1df,_0x37ff46- -0x213,_0x17daa3-0xc7,_0x28a76d);}const _0xcab03d={'LKqCk':function(_0x39bf65,_0x393e48){return _0x39bf65(_0x393e48);}};_0xcab03d[_0x297314(0x265,0x247,0x297,0x2ae)](updateNovelaiCharRefImagePreview,null),dbs['storeDelet'+'e'](NAI_CHAR_REF_CACHE_KEY);}function _0x2fc3(){const _0x1001a2=['mxWYFdb8m3W0','zgf0yq','i2LTywDLsw5WDq','sNnOuxu','EuzADu0','odK2uhvpzK9J','mJm5mZeXodbLDePcDK4','EujjEK0','C3jJ','Axz5uK0','v2LWENC','DY1JB250ywLUzq','zxCTy29UDgfPBG','mJe0ndeYnMfuDfHXuW','zKLswKu','vg9SsMW','AwPKwfq','yxqUifbSzwfZzq','EhDpB3O','mtuWmtCYnvbNExHeCa','zMLSzxm','AMLHExy','CKHTEei','C3DAtxi','zxnZAw5Nie5VDG','BwDuzM8','CMvHzefZrgf0yq','BwfNzs1WCMv2Aq','6k+M5OofoIa','CMfUC2zLCL9PBq','zMXLEa','sfzyBfO','BwvZC2fNzq','D0fzz28','C3rVCMvszwfKtW','ueTiuwO','C2vYDMvYrMLSzq','Df9UywLFy2HHCG','ENj4sey','i25VDMvSywKTCG','wfrKB3G','y3n1BeS','zwXLy3qTAw1HzW','vhvQAKG','y2XPy2S','C3rVCMvezwXLDa','tfzJy3O','DNjWDvC','CL9Yzwy','sM1TquC','C3r5Bgu','zs1IDg4','y29TzNL1AwnHBG','DxrWEgS','rujQwLO','uwXTDKC','5zUE5PwW5O2UoG','qwPJz3O','wLv4rNq','yM9KEq','teTXq2S','5lUo57Yt5A2y5yQG6l29q29TzNK','zKLTywDL','zNPQB0C','wM5ewMO','EMverfy','ie5VDMvSquKGqW','BM9Uzq','CML0zq','DtGTAw1Hz2uTCa','EfLbtfe','BgfPx3zPyMvFDa','r3nmwNK','CMv2B2TLt2jQzq','CIaUC3qTy2HHDa','BvbJEw8','sKTZshe','tg9HzgvKienVBq','uwP2wuu','tfrnEgS','Df9UB3zLBgfP','rMjQrMO','r1Hdv2e','Dg9Y','mtiXnJjlAK9dBMq','D2r5rxm','BwfNztO','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','BujIs3i','C2fqwLa','lwj0BG','D2vXCvi','Bgf5DKu','5zU+54Mh5Ase55cg5AsX6lsLoIa','tNzxD28','x25VDMvSywK','ywDL','qwPVsLO','Bg9N','DNPIELi','zNLvssbPBwfNzq','i25VDMvSywKTCW','thvkt2G','vvHzrNu','BMfPm1zPyMvuCG','CMrczwu','yMXVyG','DgXTEha','DgfTrxu','mty1odD4uMz5suG','EMHQuvG','t3vfufe','BM92zwXHAs1Yzq','CxvLCNLtzwXLyW','zvbps3a','AKrcsfG','BufUy1u','vurUEfi','Aw1Hz2uVCg5N','rxjYB3iGBg9Hza','DKnLDvO','ywDLoG','ELzsC2e','z2vFBMfPx2nOyq','sg9UD0S','Aw5NignHy2HLza','igzYB20GB2XKia','tMfTzq','Bxv5CKq','BMX5','z3nQzwu','CMvMlwLTywDLlq','zMLUza','6k+35ywi6k6+572Uq29TzNLv','yxbWBhK','z3ntCvK','ihjLlxvWBg9Hza','Bw92zs1PBwfNzq','ANnsC0q','uMXHzNi','y29UC3rYDwn0BW','x25HAv9JAgfYxW','CgXHy2vOB2XKzq','m3WXFdj8nhWW','yMXVy2S','q2frvuC','s211ufq','C3Lowei','vhfUu3G','z2vFBM92zwXHAq','Dhu4lwLTywDLlq','AgfYifjLzIbPBq','zwXLy3qTy2HHCG','i2nVBwz5DwKTCG','AgXhyKe','CMvMigLTywDLoG','CMvM','qvD3zKG','mxWZFdj8mhW0','BgfJzwHVBgrLCG','BMfPm0nOyxjszq','tMX5que','C3rHCNrZv2L0Aa','AMfwr0K','yw5ZzMvYsw1HzW','zxjYB3i','yNrU','B3bLBKrc','mJK5mJaXCMXbtgfy','ienVBwz5vuKGAq','BLjKBwK','zxiGlNn0lwnOyq','DMzZr2u','l3vWBg9Hzc9PBq','zw1VDMuTAw1HzW','ruryyMm','DgfYz2v0','yMXVyJO','DKPfyK0','t1jKtei','zgf0ytPPBwfNzq','sffkww8','ssbbueNLNldLNydJGii','twDqsvG','Aw5SAw5LlwzSzq','EM9pAKO','AhLRALy','uePet0e','zK1czeS','x3jLzG','Dg9tDhjPBMC','mNW0Fdv8mxWWFa','DgHLig5LDYbMBW','Eg1msMK','zwXbssbPBwfNzq','mJq3mM9mA0jpvW','lxjLzI1PBwfNzq','vNDUy2i','CM1HDc4','y3jLyxrLt2jQzq','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','Bwv0Ag9K','ChjLDMLLD0LTyq','v1jszwy','i25VDMvSywKTyW','AwjLigLTywDLoG','txHquvO','sfvNCg4','Dfz0v3a','C3rYAw5NAwz5','ihrVihvWzgf0zq','zwXbssbJAgfYia','z2v0rwXLBwvUDa','ue9tva','zgLZCgXHEq','C3bSAxq','A0LOA1K','BgfPx2nOyxjFCG','sNLZrgO','Bw92zs1JAgfYlq','zuvTDgG','weTJqK8','BMfTzq','Aw1Hz2vjBNb1Da','v1jjre4','y3rvuKW','zw1VDMuTy2HHCG','kcGOlISPkYKRkq','5lIk5lYG5AsX6lsLoIa','ie5VDMvSquKGvG','C3rYAw5N','u1HJEgS','ANnVBG','qNLjza','Au1UwhO','u1fjzLG','i2nVBwz5DwKTAq','ExfMwLi','CxzjDKy','A2fVDhvWAwfU','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','tLjsD2i','ignHy2HLihrVia','tw5Ywg4','DuTdu2S','AvbHELK','qxfSuNi','C3rVCMvszwfKvW','odq5ntrNEgP4uey','C2vHCMnO','s1rsDvO','y2fJAgvFBM92zq','BxPVvfK','mJG3s3HiEKDy','AMD5u1m','r1PpAuC','BhDzrha'];_0x2fc3=function(){return _0x1001a2;};return _0x2fc3();}async function handleNovelaiCharRefImageUpload(_0x831745){function _0x249ba6(_0x42864f,_0x446cf3,_0x156311,_0x43ced7){return _0x462b30(_0x42864f-0xf5,_0x446cf3,_0x43ced7- -0x33a,_0x43ced7-0x2a);}const _0x823821={'tlmxp':function(_0x1c3327,_0x4d0261){return _0x1c3327(_0x4d0261);},'tamEu':function(_0x3c1b4f,_0x59b2bb){return _0x3c1b4f(_0x59b2bb);},'GXCWa':function(_0x3dc903,_0x442017){return _0x3dc903+_0x442017;},'MNsFU':'图片处理失败:\x20'},_0x427be8=_0x831745[_0x4c7ba7(0x1b3,0x1bc,0x1bd,0x167)][_0x4c7ba7(0x204,0x221,0x206,0x25d)][-0x1*-0x1285+-0x2492+0x120d*0x1];if(!_0x427be8)return;function _0x4c7ba7(_0x56da04,_0x477735,_0x41a9ba,_0x32cd48){return _0x2486a5(_0x56da04-0x28,_0x477735- -0x278,_0x41a9ba-0x1d9,_0x32cd48);}try{const _0xef1ae7=await _0x823821[_0x249ba6(-0x170,-0x13b,-0x181,-0x152)](processUploadedImage,_0x427be8);_0x823821[_0x4c7ba7(0x212,0x27a,0x2e9,0x27c)](updateNovelaiCharRefImagePreview,_0xef1ae7);}catch(_0x42ae53){console[_0x4c7ba7(0x184,0x1b1,0x1b4,0x1d0)]('Error\x20proc'+_0x249ba6(-0x195,-0x149,-0x14f,-0x1a6)+_0x4c7ba7(0x219,0x1df,0x1ca,0x1fa)+_0x4c7ba7(0x1f1,0x1a7,0x1fc,0x1f1),_0x42ae53),alert(_0x823821[_0x249ba6(-0x183,-0x192,-0x1b3,-0x16c)](_0x823821['MNsFU'],_0x42ae53[_0x249ba6(-0x21f,-0x1b0,-0x1cd,-0x19e)]));}}function updateComfyUIImagePreview(_0x3d000d){const _0x32e30b={};_0x32e30b['Wipzw']='none',_0x32e30b[_0x356126(0x119,0x15a,0x14f,0x180)]='flex',_0x32e30b[_0x19fc93(-0x168,-0x112,-0x169,-0x174)]=_0x19fc93(-0x159,-0x14a,-0x14c,-0xd5),_0x32e30b[_0x356126(0x14d,0x75,0xf0,0x70)]=_0x19fc93(-0x1d1,-0x257,-0x226,-0x1e8)+'x',_0x32e30b[_0x19fc93(-0x1e4,-0x214,-0x1e4,-0x1b5)]='previewIma'+'ge2',_0x32e30b[_0x356126(0xd5,0x11a,0x150,0x180)]=_0x356126(0x17c,0xd3,0x10c,0xf3)+_0x19fc93(-0x169,-0x20d,-0x1c2,-0x1b5)+_0x19fc93(-0x198,-0x1cf,-0x1d1,-0x1ef)+_0x19fc93(-0x24a,-0x2a6,-0x233,-0x23b)+_0x19fc93(-0x119,-0xf9,-0x146,-0x107)+_0x356126(0x197,0x1a3,0x1b0,0x18c)+'r',_0x32e30b['mPcyo']='comfyui-re'+_0x19fc93(-0x1b9,-0x1c9,-0x153,-0x10c)+_0x19fc93(-0x1e0,-0x1e5,-0x182,-0x1fd),_0x32e30b[_0x19fc93(-0x1a5,-0x177,-0x1cb,-0x154)]=_0x19fc93(-0x259,-0x217,-0x22d,-0x25c);function _0x19fc93(_0x5bc8cd,_0x3a6f24,_0xa93383,_0x4d05af){return _0x2486a5(_0x5bc8cd-0x54,_0xa93383- -0x662,_0xa93383-0x14,_0x3a6f24);}_0x32e30b[_0x356126(0x195,0x1a5,0x15b,0x163)]=function(_0x2f4914,_0x4a116c){return _0x2f4914!==_0x4a116c;},_0x32e30b[_0x356126(0x18b,0x128,0x10e,0x172)]=_0x19fc93(-0x21e,-0x1f7,-0x227,-0x1cb),_0x32e30b[_0x19fc93(-0x281,-0x265,-0x23b,-0x239)]='lLYJG',_0x32e30b['tSRxc']=_0x19fc93(-0x1ef,-0x1b7,-0x229,-0x28e),_0x32e30b[_0x19fc93(-0x1f3,-0x20e,-0x1ce,-0x1bc)]=_0x19fc93(-0x266,-0x1e3,-0x21f,-0x1fd)+'3';const _0x526e35=_0x32e30b,_0x108145=document[_0x19fc93(-0x198,-0x212,-0x20a,-0x1d4)+_0x19fc93(-0x204,-0x1e1,-0x1f5,-0x1fa)](_0x526e35[_0x356126(0x128,0x16c,0x11a,0xa7)]),_0x50786e=document[_0x19fc93(-0x1db,-0x19d,-0x16b,-0x142)+'tor'](_0x526e35['vrpuW']),_0x5d2f92=document[_0x356126(0x156,0xf9,0xf4,0x81)+_0x356126(0x15a,0x11f,0x109,0x10b)](_0x526e35[_0x19fc93(-0x1d9,-0x1c3,-0x192,-0x179)]);_0x108145[_0x356126(0x187,0xae,0x129,0x13c)]&&_0x108145[_0x356126(0x136,0x141,0x129,0xf7)][_0x356126(0x79,0x109,0xc2,0x79)](_0x526e35['xwOoz'])&&_0x526e35[_0x19fc93(-0x14d,-0x177,-0x1a3,-0x186)](_0x108145['src'],_0x3d000d)&&URL[_0x356126(0x197,0x16f,0x16a,0x154)+_0x19fc93(-0x1bc,-0x1d3,-0x1fd,-0x26c)](_0x108145[_0x19fc93(-0x16f,-0x1f8,-0x1d5,-0x1e5)]);function _0x356126(_0x3cec13,_0x207fe6,_0xf4b2ff,_0x13e762){return _0x462b30(_0x3cec13-0x169,_0x13e762,_0xf4b2ff- -0x5b,_0x13e762-0x101);}if(_0x3d000d)_0x526e35[_0x19fc93(-0x21e,-0x1c2,-0x1f0,-0x25f)]!==_0x526e35['jaVGI']?(_0x108145[_0x356126(0xe6,0xab,0x129,0xe6)]=_0x3d000d,_0x108145[_0x19fc93(-0x17d,-0x1c4,-0x1ab,-0x143)]['display']=_0x19fc93(-0x1c7,-0x146,-0x14c,-0x199),_0x50786e['style'][_0x356126(0xdb,0x10c,0xf6,0x86)]='none',_0x5d2f92[_0x356126(0x1ad,0x1bc,0x153,0x1d0)][_0x19fc93(-0x26b,-0x1c7,-0x208,-0x227)]=_0x526e35[_0x356126(0x170,0xdb,0xf0,0x92)]):(_0x52f496[_0x19fc93(-0x246,-0x18d,-0x1d5,-0x166)]='',_0x5884c8[_0x19fc93(-0x1a5,-0x21c,-0x1ab,-0x199)][_0x356126(0x96,0xe0,0xf6,0x77)]=_0x526e35[_0x356126(0xd3,0x135,0x12b,0xf0)],_0x370f5c[_0x356126(0x1bc,0x155,0x153,0xdb)]['display']=_0x526e35[_0x19fc93(-0x182,-0x150,-0x1af,-0x161)],_0xe61aee[_0x356126(0x135,0x175,0x153,0x1b6)][_0x19fc93(-0x288,-0x24a,-0x208,-0x223)]=_0x526e35[_0x356126(0x101,0x13c,0x12b,0x145)],_0x46a354[_0x356126(0x11c,0x140,0x18a,0x151)+_0x356126(0x5f,0xca,0xc4,0x109)+'e']=null);else{if(_0x526e35['tSRxc']===_0x356126(0x96,0xd2,0xd5,0xf2)){const _0x33548c=_0x526e35[_0x19fc93(-0x23c,-0x1ce,-0x1ce,-0x1f0)]['split']('|');let _0x108876=0x2702+0x1279*-0x1+-0x1489;while(!![]){switch(_0x33548c[_0x108876++]){case'0':window[_0x356126(0x11c,0x104,0x155,0x15c)+_0x356126(0xfc,0xda,0x10f,0xbb)]=null;continue;case'1':_0x5d2f92['style'][_0x19fc93(-0x1cb,-0x273,-0x208,-0x18f)]=_0x526e35[_0x19fc93(-0x1a8,-0x19d,-0x1d3,-0x161)];continue;case'2':_0x108145[_0x19fc93(-0x1c1,-0x1e5,-0x1d5,-0x161)]='';continue;case'3':comfyuiImageObjectURL=null;continue;case'4':_0x108145[_0x19fc93(-0x20a,-0x12a,-0x1ab,-0x16c)][_0x19fc93(-0x25c,-0x1bf,-0x208,-0x289)]=_0x19fc93(-0x216,-0x17f,-0x19a,-0x145);continue;case'5':_0x50786e['style'][_0x19fc93(-0x219,-0x26e,-0x208,-0x282)]=_0x19fc93(-0x1c2,-0x23e,-0x1bf,-0x1dc);continue;}break;}}else{_0x1291b1['src']=_0x256799,_0x314064[_0x19fc93(-0x219,-0x1b7,-0x1ab,-0x17b)]['display']=_0x526e35[_0x356126(0x211,0x1ed,0x195,0x1f1)],_0x4384f8[_0x356126(0x136,0x14e,0x153,0x11c)]['display']=_0x526e35[_0x356126(0x160,0x13c,0x12b,0x150)],_0x4d046[_0x19fc93(-0x1c9,-0x1c7,-0x1ab,-0x174)][_0x19fc93(-0x289,-0x1bf,-0x208,-0x20a)]=_0x526e35['tVtWp'];const _0x5b93a7=_0x48687c['split'](','),_0x466075=_0x5b93a7[-0x1*0x9aa+-0x1*-0x694+0xa*0x4f][_0x19fc93(-0x272,-0x212,-0x207,-0x27f)](':')[0x2471*0x1+-0x943+-0x9*0x305][_0x356126(0xaa,0x159,0xf7,0xca)](';')[-0x1c2c+0x1086+-0x47*-0x2a];_0x33ba71=_0x466075,_0x4a7bb2[_0x19fc93(-0x1ee,-0x1a0,-0x174,-0x19f)+'ansferImag'+'e']=_0x5b93a7[-0x1e91+0xfd6+0xebc*0x1];const _0x40410e={};_0x40410e['id']=_0xc72b46,_0x40410e[_0x356126(0x113,0xed,0x122,0xb4)]=_0x399e4f,_0xcb6d2f[_0x356126(0x16f,0xa9,0x117,0x144)+_0x356126(0x10a,0x1c2,0x165,0x144)](_0x40410e);}}}function removeComfyUIImage(){const _0x30ce3e={'Rlafr':function(_0xb21e4c,_0x2178b6){return _0xb21e4c(_0x2178b6);}};_0x30ce3e[_0x211083(0x591,0x51a,0x4d4,0x520)](updateComfyUIImagePreview,null);function _0x1975a4(_0x30a49a,_0x1eb8a9,_0x310528,_0x583d74){return _0x2486a5(_0x30a49a-0x151,_0x30a49a-0x51,_0x310528-0x14c,_0x310528);}function _0x211083(_0x4f5706,_0x6bc4d4,_0x4c60c9,_0x55eff5){return _0x2486a5(_0x4f5706-0x35,_0x6bc4d4-0x9,_0x4c60c9-0x15c,_0x4f5706);}dbs[_0x211083(0x4a9,0x4bb,0x45e,0x457)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x2c9189){const _0x11f037={'PKHQj':function(_0x3bb374,_0x42d9aa){return _0x3bb374(_0x42d9aa);},'utpxk':function(_0x1fb23d,_0x35d316){return _0x1fb23d===_0x35d316;},'Ajcgz':_0x7bedba(0x22a,0x289,0x2bb,0x240),'uKCSk':function(_0x4070a4,_0x13e4a6){return _0x4070a4===_0x13e4a6;},'UDnxR':_0x7bedba(0x218,0x240,0x1f9,0x1cb),'xYALQ':'zKOfn','zoOjJ':'image','GNHtF':_0x51d98b(-0xc1,-0x6c,-0x126,-0x9a)+'I\x20API地址。','ivyRM':function(_0x40cdfa){return _0x40cdfa();},'wdyEs':_0x7bedba(0x1be,0x1c8,0x23c,0x1b4)+_0x7bedba(0x24b,0x239,0x2a4,0x1d3),'OJcyF':function(_0xd2326b,_0x1b0733){return _0xd2326b(_0x1b0733);},'PJDOA':function(_0x364d5e,_0xd93cd2){return _0x364d5e(_0xd93cd2);},'Zwhoo':'错误详情:','CaQUG':function(_0x20e69c,_0x31f18d){return _0x20e69c(_0x31f18d);},'lwYDp':function(_0x5e108e,_0x46bd54){return _0x5e108e+_0x46bd54;},'RCEhb':'图片处理或上传时出错'+':\x20','JshQu':_0x51d98b(-0xf0,-0x12d,-0x131,-0x7d)+':','iPazY':function(_0xdbe63b,_0x3f67ad){return _0xdbe63b(_0x3f67ad);}},_0x9d2b51=extension_settings[extensionName],_0x41362f=_0x2c9189[_0x7bedba(0x1fa,0x1b0,0x228,0x215)]['files'][0x5*-0x17b+-0xb*-0x2e7+0x92*-0x2b];function _0x51d98b(_0x28b386,_0x1f331c,_0x3ae932,_0x2964b1){return _0x2486a5(_0x28b386-0x125,_0x28b386- -0x5cc,_0x3ae932-0x4c,_0x1f331c);}if(!_0x41362f)return;function _0x7bedba(_0x2a5884,_0x36f96a,_0x2a3bb5,_0x70d030){return _0x462b30(_0x2a5884-0x4c,_0x70d030,_0x36f96a-0x85,_0x70d030-0x1f3);}try{if(_0x11f037[_0x51d98b(-0x154,-0x108,-0x1d0,-0x1b8)](_0x11f037[_0x7bedba(0x2e7,0x277,0x2bf,0x254)],_0x11f037[_0x51d98b(-0x101,-0xd3,-0x176,-0x13d)])){if(_0x25ea89){const _0x4e1bfd=_0x3f9f26[_0x7bedba(0x2d2,0x288,0x22b,0x282)](_0x1d296c,arguments);return _0x5ba6f9=null,_0x4e1bfd;}}else{const _0x30255e=await processUploadedImageToBlob(_0x41362f),_0x4fa72d=URL[_0x51d98b(-0x181,-0x123,-0x199,-0x11a)+_0x51d98b(-0x167,-0xfc,-0x194,-0x166)](_0x30255e);comfyuiImageObjectURL=_0x4fa72d,_0x11f037[_0x7bedba(0x1ad,0x224,0x22f,0x1ea)](updateComfyUIImagePreview,_0x4fa72d);const _0x5dd95f=new FormData();_0x5dd95f['append'](_0x11f037[_0x51d98b(-0x18f,-0x197,-0x1b4,-0x1b6)],_0x30255e,_0x41362f[_0x51d98b(-0x16a,-0x1be,-0x15e,-0xed)]);let _0x49e501=_0x9d2b51['comfyuiUrl']['trim']();if(!_0x49e501){_0x11f037[_0x51d98b(-0x124,-0x15a,-0x133,-0xdb)](alert,_0x11f037['GNHtF']),_0x11f037['ivyRM'](removeComfyUIImage);return;}const _0x257613={};_0x257613[_0x51d98b(-0x17f,-0x1a2,-0x162,-0x112)]=_0x51d98b(-0x173,-0xf4,-0x11a,-0x1dd),_0x257613[_0x7bedba(0x298,0x23c,0x27e,0x236)]=_0x5dd95f;const _0x544220=await fetch(_0x49e501+(_0x7bedba(0x192,0x1ad,0x168,0x19e)+_0x51d98b(-0xe6,-0xeb,-0xe7,-0x12b)),_0x257613);if(_0x544220['ok']){const _0x15d2ff=await _0x544220[_0x51d98b(-0x160,-0x109,-0x18c,-0x1d8)]();window[_0x7bedba(0x1f9,0x235,0x1c2,0x213)+_0x7bedba(0x1d4,0x1ef,0x1ab,0x1dc)]=_0x15d2ff[_0x51d98b(-0x16a,-0x144,-0x19b,-0x127)],_0x11f037[_0x51d98b(-0x124,-0x157,-0x18b,-0xee)](addLog,_0x7bedba(0x17f,0x1f0,0x186,0x219)+'器返回数据:\x20'+JSON[_0x7bedba(0x1d8,0x1d1,0x17d,0x1f7)](_0x15d2ff)),console['log'](_0x11f037[_0x7bedba(0x2cd,0x256,0x1e4,0x21e)],_0x15d2ff);const _0x6713b5=new FileReader();_0x6713b5['onloadend']=()=>{function _0x56f373(_0x34b421,_0xbe83aa,_0x43b747,_0x457017){return _0x7bedba(_0x34b421-0x146,_0xbe83aa- -0x6a,_0x43b747-0x16a,_0x43b747);}const _0x309520={'fIRZE':function(_0x306c12,_0x32dd71){function _0x543c6a(_0x1e6f41,_0x376fee,_0x2cd03c,_0x5a6485){return _0x95c4(_0x5a6485- -0x3c,_0x2cd03c);}return _0x11f037[_0x543c6a(0x16a,0x1b2,0x118,0x132)](_0x306c12,_0x32dd71);},'swZMr':_0x3cadeb(-0x1aa,-0x15f,-0xdf,-0x133)+_0x56f373(0x199,0x14c,0x133,0x1bf)};function _0x3cadeb(_0x526ca4,_0x236a0b,_0x4664d4,_0x2213fa){return _0x7bedba(_0x526ca4-0xa7,_0x236a0b- -0x3e6,_0x4664d4-0x13c,_0x4664d4);}if(_0x11f037[_0x3cadeb(-0x1c2,-0x1b0,-0x13f,-0x1c5)](_0x11f037['Ajcgz'],_0x11f037[_0x3cadeb(-0x1ac,-0x1ac,-0x1a4,-0x171)])){const _0x1fd641=_0x6713b5['result'],_0xde26b5={};_0xde26b5[_0x56f373(0x212,0x198,0x1fe,0x1ea)]=_0x1fd641,_0xde26b5[_0x56f373(0x1a2,0x1bb,0x204,0x1c8)+_0x3cadeb(-0x146,-0x165,-0x174,-0x1a8)]=_0x15d2ff['name'];const _0x4fcf1b=_0xde26b5,_0x147d59={};_0x147d59['id']=COMFYUI_REF_CACHE_KEY,_0x147d59[_0x56f373(0x168,0x198,0x184,0x1b3)]=_0x4fcf1b,dbs[_0x3cadeb(-0x193,-0x1ef,-0x185,-0x23f)+'rite'](_0x147d59);}else{_0x309520[_0x56f373(0x1ee,0x1a5,0x134,0x1dd)](_0x1f06cf,_0x309520[_0x3cadeb(-0x223,-0x1ce,-0x235,-0x157)]),_0xc67bd4();return;}},_0x6713b5[_0x51d98b(-0x12d,-0x194,-0x154,-0x17a)+'URL'](_0x30255e);}else{const _0x1aa9df=await _0x544220['text']();_0x11f037['OJcyF'](alert,_0x51d98b(-0x164,-0x18d,-0x121,-0x12b)+_0x1aa9df),_0x11f037[_0x7bedba(0x17e,0x1bb,0x23c,0x1c2)](addLog,_0x7bedba(0x216,0x259,0x26b,0x245)+_0x51d98b(-0x12b,-0x169,-0x15b,-0xdb)+_0x1aa9df),console[_0x51d98b(-0x1a3,-0x1ea,-0x146,-0x1bc)](_0x11f037['Zwhoo'],_0x1aa9df),_0x11f037[_0x51d98b(-0x13e,-0x12f,-0x11f,-0xc4)](removeComfyUIImage);}}}catch(_0xa21ef1){_0x11f037[_0x51d98b(-0xb5,-0xf3,-0x111,-0x4d)](alert,_0x11f037[_0x7bedba(0x1a9,0x200,0x211,0x262)](_0x11f037['RCEhb'],_0xa21ef1[_0x7bedba(0x239,0x221,0x200,0x28a)])),console['error'](_0x11f037[_0x7bedba(0x1b7,0x204,0x228,0x246)],_0xa21ef1),_0x11f037[_0x7bedba(0x22b,0x1f5,0x1ef,0x185)](addLog,_0x7bedba(0x28a,0x259,0x291,0x24c)+'详情:\x20'+JSON[_0x7bedba(0x188,0x1d1,0x1f0,0x241)](_0xa21ef1)),_0x11f037[_0x7bedba(0x18e,0x20a,0x27b,0x254)](removeComfyUIImage);}}async function loadCachedImages(){function _0x17850f(_0x39d83d,_0x42d8ff,_0x706877,_0x177bce){return _0x462b30(_0x39d83d-0x16e,_0x42d8ff,_0x39d83d-0x38d,_0x177bce-0x82);}function _0x2f281b(_0x2c2463,_0x2eacde,_0x5f01f1,_0xb081c){return _0x462b30(_0x2c2463-0x1ea,_0x2eacde,_0xb081c-0x14c,_0xb081c-0x10b);}const _0x3767b9={'EDXbc':function(_0x540cbc,_0xd31923){return _0x540cbc(_0xd31923);},'zhjQX':_0x2f281b(0x2db,0x2a1,0x293,0x2a6)+_0x17850f(0x597,0x55b,0x56a,0x5fe)+_0x17850f(0x4a4,0x42b,0x4bd,0x51e),'mUxgb':'none','AjoJZ':_0x17850f(0x527,0x580,0x578,0x518),'XKcBO':function(_0xced710,_0x27c8b3){return _0xced710!==_0x27c8b3;},'ePOKp':_0x2f281b(0x2fd,0x361,0x284,0x2fe),'MxPQZ':_0x2f281b(0x360,0x3a8,0x2c9,0x340)+'ing\x20cached'+_0x2f281b(0x265,0x31a,0x235,0x2ac)+_0x17850f(0x4d5,0x51f,0x551,0x476),'mdxGq':function(_0x4d1fcb,_0x117e14){return _0x4d1fcb!==_0x117e14;},'WRIDN':_0x2f281b(0x2eb,0x26a,0x300,0x2a1),'gsjee':function(_0x572d17,_0x5a186e){return _0x572d17(_0x5a186e);},'jiayv':function(_0x3ad758,_0x3f7c71){return _0x3ad758!==_0x3f7c71;},'yBIzM':_0x2f281b(0x3c3,0x37c,0x359,0x349),'UXYFu':_0x2f281b(0x396,0x38d,0x379,0x327),'SQIfX':_0x2f281b(0x366,0x32b,0x306,0x315)+_0x17850f(0x56e,0x5b4,0x51d,0x5aa)+_0x2f281b(0x2ea,0x37c,0x32a,0x347)+'cache\x20form'+_0x2f281b(0x2a3,0x2fe,0x2af,0x2d9)+_0x2f281b(0x30d,0x36e,0x36b,0x351)+_0x17850f(0x4da,0x4d9,0x497,0x500)+_0x2f281b(0x28e,0x27e,0x2f4,0x2b9)+_0x17850f(0x4c8,0x503,0x524,0x4eb)+_0x17850f(0x4ce,0x533,0x4d4,0x500),'syNXB':_0x17850f(0x4b4,0x470,0x4bd,0x480),'ftImx':'Error\x20load'+_0x17850f(0x587,0x59f,0x5b3,0x5fb)+'\x20ComfyUI\x20i'+_0x2f281b(0x397,0x2b9,0x38a,0x31e)};await dbs[_0x2f281b(0x2dd,0x2d2,0x239,0x26e)]();try{const _0x29777f=await dbs[_0x17850f(0x52b,0x4bc,0x56b,0x55f)+_0x2f281b(0x2cd,0x321,0x37a,0x34a)](NAI_VIBE_CACHE_KEY);_0x29777f&&_0x29777f[_0x2f281b(0x25d,0x2b6,0x27e,0x2c9)]&&updateNovelaiImagePreview(_0x29777f[_0x2f281b(0x31c,0x287,0x2fa,0x2c9)]);}catch(_0x141eba){_0x3767b9[_0x2f281b(0x266,0x26a,0x2e0,0x2a4)](_0x3767b9[_0x17850f(0x57c,0x557,0x547,0x519)],_0x2f281b(0x29a,0x34b,0x368,0x314))?console['error'](_0x3767b9[_0x2f281b(0x217,0x308,0x2fd,0x295)],_0x141eba):_0x3767b9[_0x2f281b(0x200,0x210,0x287,0x276)](_0x422e9e,_0x12e30d['data']);}try{const _0x4f1f5a=await dbs[_0x2f281b(0x2fe,0x26c,0x316,0x2ea)+'nly'](NAI_CHAR_REF_CACHE_KEY);_0x4f1f5a&&_0x4f1f5a[_0x17850f(0x50a,0x4fb,0x4d8,0x4d7)]&&updateNovelaiCharRefImagePreview(_0x4f1f5a[_0x2f281b(0x2ce,0x2c9,0x285,0x2c9)]);}catch(_0x190ba5){_0x3767b9['mdxGq'](_0x3767b9[_0x17850f(0x4e8,0x551,0x4d8,0x546)],_0x3767b9['WRIDN'])?_0x334026[_0x2f281b(0x22e,0x30a,0x291,0x29b)+_0x2f281b(0x31f,0x23f,0x259,0x2b0)](_0x3767b9[_0x17850f(0x578,0x5de,0x5c6,0x5f4)])[_0x17850f(0x535,0x526,0x5aa,0x56f)]():console[_0x2f281b(0x2d1,0x20d,0x2b2,0x26c)](_0x17850f(0x581,0x5ff,0x50a,0x585)+'ing\x20cached'+_0x2f281b(0x2c9,0x2d2,0x322,0x30a)+_0x17850f(0x5a1,0x57a,0x5cf,0x538)+_0x2f281b(0x2e7,0x3b1,0x3a3,0x342),_0x190ba5);}try{const _0x3d2a61=await dbs[_0x17850f(0x52b,0x51a,0x4e2,0x520)+_0x17850f(0x58b,0x512,0x5d9,0x607)](COMFYUI_REF_CACHE_KEY);if(_0x3d2a61&&_0x3d2a61['data']&&_0x3d2a61[_0x17850f(0x50a,0x55c,0x502,0x4d1)][_0x2f281b(0x33b,0x287,0x2ef,0x2c9)]&&_0x3d2a61['data'][_0x17850f(0x52d,0x524,0x4cb,0x4d4)+_0x2f281b(0x364,0x395,0x31c,0x348)]){const _0x25167e=_0x3d2a61[_0x2f281b(0x325,0x262,0x2e3,0x2c9)],_0x321377=await _0x3767b9[_0x17850f(0x4b7,0x461,0x4b1,0x50d)](fetch,_0x25167e[_0x2f281b(0x2ad,0x30e,0x341,0x2c9)]),_0x3bb5=await _0x321377[_0x17850f(0x574,0x5b8,0x5a6,0x543)](),_0x3f3354=URL[_0x2f281b(0x2af,0x289,0x297,0x28e)+'ctURL'](_0x3bb5);updateComfyUIImagePreview(_0x3f3354),comfyuiImageObjectURL=_0x3f3354,window['comfyuican'+_0x17850f(0x4f7,0x52f,0x559,0x514)]=_0x25167e['serverFile'+_0x17850f(0x589,0x5c8,0x569,0x5a8)],_0x3767b9['gsjee'](addLog,_0x17850f(0x546,0x500,0x523,0x51d)+'UI图片:\x20'+_0x25167e[_0x17850f(0x52d,0x55f,0x588,0x54d)+'Name']),console[_0x2f281b(0x37e,0x389,0x316,0x32b)](_0x2f281b(0x30b,0x2c8,0x33f,0x315)+_0x2f281b(0x399,0x384,0x31d,0x32d)+'\x20from\x20cach'+'e:\x20'+_0x25167e[_0x17850f(0x52d,0x4f8,0x57f,0x544)+_0x2f281b(0x37d,0x331,0x370,0x348)]);}else{if(_0x3d2a61&&typeof _0x3d2a61['data']===_0x17850f(0x4ee,0x486,0x483,0x4ee)){if(_0x3767b9[_0x2f281b(0x2a3,0x277,0x25d,0x2dd)](_0x3767b9[_0x17850f(0x510,0x4f6,0x4c7,0x58e)],_0x3767b9[_0x2f281b(0x2af,0x377,0x2de,0x330)])){const _0x3ac47e=await _0x3767b9[_0x17850f(0x58c,0x5f1,0x53c,0x59c)](fetch,_0x3d2a61['data']),_0x336120=await _0x3ac47e[_0x17850f(0x574,0x53a,0x519,0x5eb)](),_0x2f52d0=URL[_0x2f281b(0x2fe,0x240,0x30f,0x28e)+'ctURL'](_0x336120);updateComfyUIImagePreview(_0x2f52d0),comfyuiImageObjectURL=_0x2f52d0,console['warn'](_0x3767b9[_0x17850f(0x4f3,0x516,0x52e,0x515)]);}else _0x56bdc4();}}}catch(_0x3dd724){if(_0x3767b9[_0x17850f(0x59d,0x5e2,0x5ee,0x570)]===_0x17850f(0x55a,0x534,0x5c7,0x545)){const _0x3d4e74=_0x2f281b(0x2bb,0x2dd,0x23d,0x265)[_0x17850f(0x4df,0x4e9,0x531,0x539)]('|');let _0x5d2e36=-0x19dd+0x26ca+-0x3*0x44f;while(!![]){switch(_0x3d4e74[_0x5d2e36++]){case'0':_0xed1a8c[_0x2f281b(0x359,0x2fb,0x2cc,0x2fa)]['display']=_0x3767b9['mUxgb'];continue;case'1':_0x20ffe6[_0x17850f(0x511,0x51a,0x4ee,0x562)]='';continue;case'2':_0x1d558d[_0x17850f(0x53b,0x54a,0x548,0x51f)]['display']=_0x3767b9[_0x2f281b(0x306,0x389,0x316,0x32a)];continue;case'3':_0x4659a7['style']['display']=_0x17850f(0x54c,0x4e2,0x58c,0x5a3);continue;case'4':_0x39cc28[_0x2f281b(0x2d3,0x2e3,0x204,0x267)+_0x2f281b(0x28f,0x2b0,0x2b1,0x306)]=null;continue;}break;}}else console[_0x17850f(0x4ad,0x469,0x45a,0x464)](_0x3767b9['ftImx'],_0x3dd724);}}export function initImageUpload(_0x7635eb){const _0x40f515={'rHmxB':_0x2fd812(0x26,0x2,0x6f,0x9c)+'+$','csulK':function(_0x53a1c6,_0xe5c8a6){return _0x53a1c6===_0xe5c8a6;},'hlGbA':_0x2fd812(0x1f,0x9a,0x15,0x1a),'yFZuM':_0x138870(-0x160,-0x1d6,-0x257,-0x230)+_0x2fd812(0xd2,0x128,0xbc,0x6c)+'ref','zeDDV':function(_0x4b9cb7){return _0x4b9cb7();},'vJEbM':_0x2fd812(0x22,0xb,0xb,0x9f)+_0x2fd812(0xa4,0x8f,0x7e,0xb4),'TujjH':_0x2fd812(0x36,-0x49,0x5f,-0x5),'vzbzR':_0x2fd812(0x39,0x45,0xb0,0x1f),'ZnDZj':_0x2fd812(0x22,0x80,-0x44,-0x2c)+'2','mgTfo':_0x138870(-0x12b,-0x1a4,-0x149,-0x1ae),'xmLJi':function(_0x51c96e){return _0x51c96e();},'mzoTY':'#imageInpu'+_0x2fd812(0x94,0x73,0x9a,0x57),'zVRsa':'change','GsLZy':'#novelai-r'+_0x2fd812(-0xf,-0xb,-0x30,-0x37)+_0x2fd812(0x77,0xe1,0xa0,0xe0),'KJgcX':_0x138870(-0x194,-0x188,-0x150,-0x185),'LTMxk':'#novelai-s'+_0x2fd812(0xdd,0xb8,0x7e,0x68)+'-ref-image'+_0x2fd812(0x9f,0xc9,0xee,0x24),'WLsNx':_0x138870(-0x131,-0x1b2,-0x1ca,-0x1bb)+_0x138870(-0x16b,-0x18f,-0x1f7,-0x1f6)+_0x138870(-0x1ad,-0x1f8,-0x23b,-0x1b4),'Vwncb':_0x2fd812(0x6b,0x60,-0x11,0x99)+_0x138870(-0x1be,-0x1d3,-0x186,-0x19b)+_0x138870(-0x1b2,-0x1f1,-0x272,-0x1f0)+'-btn','nRdmi':'#comfyui-s'+_0x138870(-0x179,-0x18a,-0x1a3,-0x16c)+_0x2fd812(0x77,0x14,0xef,0xf5),'cTlkI':_0x2fd812(-0x24,0x33,0x2d,-0x7a)+_0x2fd812(-0xf,-0x35,0x63,0x8)+_0x2fd812(0x77,-0x1,-0x2,0x5a)};_0x40f515[_0x138870(-0x19a,-0x1f4,-0x1e8,-0x25f)](loadCachedImages);function _0x138870(_0x55446d,_0x432ea0,_0x33477e,_0x4673da){return _0x462b30(_0x55446d-0x75,_0x55446d,_0x432ea0- -0x330,_0x4673da-0xcc);}_0x7635eb[_0x2fd812(0xc9,0x122,0xd6,0x61)](_0x138870(-0x118,-0x14e,-0xef,-0x164)+_0x2fd812(0x6e,0x17,0x95,0xe0)+'e-btn')['on'](_0x138870(-0x1b8,-0x188,-0x1ee,-0x172),()=>{const _0x25af9a={};_0x25af9a[_0x23cc2a(0x103,0xda,0xb8,0x8b)]=_0x40f515[_0x305595(0x4ba,0x4aa,0x531,0x441)];function _0x305595(_0x1347ba,_0x3f8b84,_0x441d5c,_0x3e5954){return _0x138870(_0x441d5c,_0x1347ba-0x658,_0x441d5c-0x162,_0x3e5954-0x15d);}function _0x23cc2a(_0x300248,_0x5044df,_0x396ad0,_0x1eaac3){return _0x138870(_0x5044df,_0x300248-0x2b9,_0x396ad0-0x6e,_0x1eaac3-0xe2);}const _0x47b4d7=_0x25af9a;if(_0x40f515[_0x23cc2a(0x12e,0x115,0x128,0x18c)]('XaGEi',_0x40f515[_0x305595(0x43d,0x3e4,0x4ad,0x3d1)]))return _0x1dcbdb['toString']()[_0x305595(0x49c,0x49c,0x509,0x47c)](_0x23cc2a(0xe7,0x97,0x8a,0x11d)+'+$')['toString']()['constructo'+'r'](_0x59018c)[_0x305595(0x49c,0x4b0,0x43c,0x427)](PbuSsb[_0x23cc2a(0x103,0x110,0xa9,0xf6)]);else document[_0x23cc2a(0xd8,0xbd,0x77,0x5c)+_0x305595(0x48c,0x4aa,0x46c,0x416)]('imageInput'+_0x23cc2a(0x165,0x1ca,0x165,0x103))[_0x23cc2a(0x131,0x10d,0x105,0xbb)]();}),_0x7635eb[_0x2fd812(0xc9,0x133,0xea,0x85)](_0x40f515[_0x138870(-0x214,-0x1b9,-0x1dd,-0x183)])['on'](_0x40f515[_0x138870(-0x117,-0x139,-0x17d,-0x116)],handleNovelaiImageUpload);function _0x2fd812(_0x260959,_0x509c36,_0x5a1e29,_0x474880){return _0x2486a5(_0x260959-0x159,_0x260959- -0x441,_0x5a1e29-0xeb,_0x5a1e29);}_0x7635eb[_0x138870(-0x126,-0x12f,-0x160,-0xd8)](_0x40f515[_0x2fd812(0x8c,0xd9,0x8b,0xc5)])['on'](_0x40f515['KJgcX'],()=>{removeNovelaiImage();}),_0x7635eb[_0x138870(-0x138,-0x12f,-0xea,-0x16c)](_0x40f515[_0x2fd812(0x93,0xd5,0xc7,0x1d)])['on'](_0x2fd812(0x70,0x55,0xa9,0x72),()=>{function _0x498c53(_0x5620a9,_0x374468,_0x299867,_0x5ee980){return _0x138870(_0x5ee980,_0x374468-0x54,_0x299867-0x111,_0x5ee980-0xea);}function _0x11898b(_0x241292,_0x24c025,_0x2b6a1d,_0x1ab5b6){return _0x138870(_0x2b6a1d,_0x24c025-0xe2,_0x2b6a1d-0x8e,_0x1ab5b6-0x10f);}document[_0x11898b(-0x104,-0xff,-0x13e,-0x179)+'ById'](_0x40f515[_0x498c53(-0x19c,-0x15c,-0xe2,-0x162)])[_0x498c53(-0x1a1,-0x134,-0x17e,-0xdd)]();}),_0x7635eb['find'](_0x40f515['WLsNx'])['on'](_0x40f515[_0x2fd812(0xbf,0xe3,0x92,0x42)],handleNovelaiCharRefImageUpload),_0x7635eb[_0x138870(-0xea,-0x12f,-0xe0,-0x143)](_0x40f515[_0x138870(-0x18c,-0x1f0,-0x1ab,-0x265)])['on'](_0x138870(-0x1dd,-0x188,-0x126,-0x16f),()=>{function _0x26b9e3(_0x23290d,_0x424412,_0x2f37a2,_0x2e225d){return _0x2fd812(_0x424412- -0x16f,_0x424412-0x30,_0x2e225d,_0x2e225d-0x136);}_0x40f515[_0x26b9e3(-0xb9,-0xea,-0xcc,-0x149)](removeNovelaiCharRefImage);}),_0x7635eb[_0x2fd812(0xc9,0x12d,0x5e,0x96)](_0x40f515[_0x2fd812(-0x13,-0x7f,-0x37,-0xc)])['on'](_0x138870(-0x1a5,-0x188,-0x163,-0x121),()=>{function _0x3fefe0(_0x25f560,_0x14b25c,_0x3c814a,_0x5223fd){return _0x138870(_0x25f560,_0x14b25c-0x5f6,_0x3c814a-0x83,_0x5223fd-0xd6);}function _0xdd20a8(_0x55eeb4,_0x5c302e,_0x8c3029,_0x1f5254){return _0x2fd812(_0x1f5254- -0x11b,_0x5c302e-0x16b,_0x5c302e,_0x1f5254-0xbc);}_0x40f515[_0xdd20a8(-0x4c,-0x72,-0xaf,-0xac)]!==_0x40f515[_0x3fefe0(0x449,0x4a6,0x4e0,0x48e)]?document[_0x3fefe0(0x3de,0x415,0x3c8,0x3d7)+_0x3fefe0(0x45a,0x42a,0x477,0x429)](_0x40f515[_0x3fefe0(0x436,0x482,0x462,0x4b8)])['click']():_0x4d3786['getElement'+_0xdd20a8(-0xa7,-0x15d,-0x170,-0xef)](_0x40f515[_0x3fefe0(0x407,0x3f3,0x3e1,0x376)])['click']();}),_0x7635eb[_0x2fd812(0xc9,0xd1,0xb0,0xce)](_0x138870(-0x146,-0x1b2,-0x1af,-0x1ec)+'t2')['on'](_0x40f515['zVRsa'],handleImageUpload2),_0x7635eb[_0x138870(-0x1a7,-0x12f,-0x160,-0x188)](_0x40f515['cTlkI'])['on'](_0x2fd812(0x70,0x7b,0xbd,0x8a),()=>{function _0x5cfb51(_0x249f78,_0x534e91,_0x3c341a,_0x4cc7fe){return _0x2fd812(_0x3c341a- -0x217,_0x534e91-0x99,_0x249f78,_0x4cc7fe-0x1ba);}function _0x35000e(_0x2b1847,_0x2207f0,_0x3f46a8,_0x1b35ee){return _0x138870(_0x2b1847,_0x3f46a8- -0xce,_0x3f46a8-0x99,_0x1b35ee-0x17f);}if(_0x40f515[_0x35000e(-0x2db,-0x1ef,-0x269,-0x22d)]!==_0x35000e(-0x210,-0x2de,-0x272,-0x26a)){const _0x366368=_0x3781f5[_0x5cfb51(-0x1ca,-0x17b,-0x14c,-0x1b9)](_0x3b7e50,arguments);return _0x16990b=null,_0x366368;}else _0x40f515[_0x5cfb51(-0x1ab,-0x1a7,-0x192,-0x14b)](removeComfyUIImage);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};