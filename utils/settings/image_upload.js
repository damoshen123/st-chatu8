(function(_0x4fd1d6,_0x10adf6){function _0x91f6aa(_0x5ba55a,_0x4162c3,_0x3e848f,_0x33432d){return _0x2b06(_0x3e848f- -0x2cb,_0x4162c3);}const _0x2fc4b2=_0x4fd1d6();function _0x32b213(_0x2e22ae,_0x415ee8,_0x2cd6f2,_0x4f9afb){return _0x2b06(_0x2cd6f2-0x76,_0x2e22ae);}while(!![]){try{const _0x2e6066=parseInt(_0x32b213(0x374,0x31b,0x34c,0x371))/(-0x1*-0x5+0x84+0x8*-0x11)+parseInt(_0x32b213(0x210,0x2b3,0x290,0x214))/(0x812+-0xeb3+-0x1*-0x6a3)+parseInt(_0x91f6aa(0x35,-0x58,-0x4c,0x11))/(-0x1fdb*0x1+-0x2c8+0x22a6)*(-parseInt(_0x91f6aa(-0x3a,-0x68,-0x8b,-0x4b))/(-0xf80+0x44a*0x7+-0xe82))+parseInt(_0x32b213(0x2dc,0x2cf,0x2ed,0x309))/(0x2*0xd18+-0x3f1*0x5+0x2*-0x33b)+-parseInt(_0x32b213(0x37e,0x3b0,0x356,0x335))/(-0xba8+0x21e0+-0x1632)+parseInt(_0x32b213(0x2b9,0x2ef,0x2cf,0x2ce))/(-0x2077+-0x15a6+0x3624)*(-parseInt(_0x91f6aa(-0x9b,-0xce,-0x5d,0x5))/(-0xca7*-0x1+-0x67*0x1+0x61c*-0x2))+-parseInt(_0x32b213(0x2bf,0x29d,0x302,0x327))/(-0x954+-0x1c1f+0x2*0x12be)*(-parseInt(_0x32b213(0x20f,0x2db,0x270,0x1fc))/(0x141b+0x1033+-0x1*0x2444));if(_0x2e6066===_0x10adf6)break;else _0x2fc4b2['push'](_0x2fc4b2['shift']());}catch(_0x47b1e2){_0x2fc4b2['push'](_0x2fc4b2['shift']());}}}(_0x4c11,-0x9934d*-0x1+-0x251*-0x3fd+-0x2b*0x39a3));const _0x13249c=(function(){const _0x344f7d={};function _0x89bbac(_0x49cd6d,_0x3009ce,_0x32dcbe,_0x367115){return _0x2b06(_0x3009ce- -0x2a7,_0x32dcbe);}_0x344f7d[_0x89bbac(-0x23,0x29,0x96,0xc)]=function(_0xc142f4,_0x2be3af){return _0xc142f4!==_0x2be3af;},_0x344f7d['THSff']='YFBuJ';function _0x4bec26(_0x5afb2a,_0x58d5d8,_0xca2cc5,_0x5ed92a){return _0x2b06(_0xca2cc5- -0x141,_0x5ed92a);}_0x344f7d[_0x89bbac(-0xa7,-0x57,-0x97,-0x45)]=function(_0x3215a8,_0xa2b1c8){return _0x3215a8===_0xa2b1c8;},_0x344f7d['ZBZJL']='ndWjL',_0x344f7d['bYpcE']=_0x4bec26(0x95,0x117,0x11b,0x181)+'x',_0x344f7d[_0x4bec26(0x17,0x102,0x9c,0x2d)]=_0x89bbac(-0x9b,-0x6b,-0xb5,-0xde)+_0x4bec26(0xec,0xb5,0xf0,0x12e)+_0x89bbac(0xb7,0x34,0xa7,0xb3)+'w-containe'+_0x4bec26(0x1cb,0x14e,0x145,0x13d)+'u8-image-p'+'laceholder',_0x344f7d['DuEUp']='novelai-re'+_0x4bec26(0x10a,0x57,0xb8,0x130)+_0x89bbac(-0x5a,-0x8b,-0xf8,-0x101)+'btn',_0x344f7d['ArfKR']='data:image',_0x344f7d[_0x89bbac(-0xa5,-0x96,-0x107,-0x8a)]='none',_0x344f7d['wVZzi']=_0x89bbac(-0x6f,-0x65,-0x18,-0x56);const _0x285b40=_0x344f7d;let _0x52012c=!![];return function(_0xff8925,_0x265f10){const _0x4321c6={};_0x4321c6[_0x1436d7(0x76,0x1d,0xc3,0xb1)]=_0x285b40['bYpcE'],_0x4321c6['uQPgm']=_0x285b40[_0x368531(0x1ad,0x1af,0x184,0x1b6)],_0x4321c6['vuIjd']=_0x285b40[_0x1436d7(0x62,0x4e,-0x1b,0x80)],_0x4321c6['StBth']=_0x285b40['ArfKR'],_0x4321c6[_0x1436d7(-0x1e,-0x9,-0x30,-0x61)]=_0x285b40[_0x368531(0x1a4,0x22c,0x250,0x1ea)],_0x4321c6[_0x1436d7(0x8d,0x4d,0x36,0xd0)]=_0x285b40['wVZzi'];function _0x1436d7(_0x104dbe,_0x3b37f2,_0x5b10fb,_0x4c9582){return _0x89bbac(_0x104dbe-0xba,_0x104dbe-0x95,_0x3b37f2,_0x4c9582-0x1a9);}const _0x2914b7=_0x4321c6,_0x1f0072=_0x52012c?function(){function _0x58553a(_0x367de8,_0x8aa2f9,_0x40b1bc,_0x1c12d9){return _0x368531(_0x367de8-0x18c,_0x8aa2f9-0xf2,_0x1c12d9,_0x8aa2f9- -0x29f);}function _0x224a4b(_0x501704,_0x4d883d,_0x2e472d,_0x474fb8){return _0x1436d7(_0x501704-0x1a3,_0x4d883d,_0x2e472d-0x137,_0x474fb8-0x6b);}if(_0x285b40[_0x224a4b(0x261,0x2d4,0x280,0x276)](_0x285b40[_0x58553a(-0x144,-0xe1,-0x98,-0xee)],_0x285b40[_0x224a4b(0x176,0x1f5,0x1d6,0x12f)])){_0x3f35d5[_0x224a4b(0x202,0x19f,0x254,0x1b7)]=_0x2a8307,_0x1c2304[_0x224a4b(0x174,0x118,0x1cf,0x15b)]['display']='block',_0x577a76['style'][_0x224a4b(0x1fb,0x214,0x17a,0x245)]=_0x224a4b(0x240,0x272,0x1f5,0x297),_0x4e66bc[_0x58553a(-0x114,-0xe3,-0x156,-0x14d)][_0x224a4b(0x1fb,0x178,0x21d,0x1c5)]=_0x2914b7[_0x224a4b(0x219,0x270,0x254,0x230)];const _0x4cc0e2=_0x3a9b02['split'](','),_0x43a901=_0x4cc0e2[0x170f+0x1c22+-0x3331][_0x58553a(-0x58,-0xbe,-0xe2,-0xed)](':')[0x3bc+-0x18be+-0x1503*-0x1][_0x58553a(-0xfd,-0xbe,-0x69,-0x78)](';')[-0x1328*-0x2+0x4*0x908+-0x4a70];_0x50e6a8=_0x43a901,_0x255fb8[_0x58553a(-0xec,-0x65,-0x9d,0x19)+_0x224a4b(0x19e,0x217,0x148,0x1ac)]=_0x4cc0e2[-0x14f2+0x28*0x32+0xd23];const _0x5e501d={};_0x5e501d['id']=_0x592eac,_0x5e501d[_0x224a4b(0x254,0x262,0x23f,0x20c)]=_0x4b6715,_0x2524d4[_0x58553a(-0x8f,-0xce,-0x14c,-0x4b)+_0x58553a(-0x141,-0xc2,-0xca,-0x83)](_0x5e501d);}else{if(_0x265f10){if(_0x285b40[_0x58553a(-0xf5,-0x76,-0x38,-0xbc)](_0x285b40[_0x58553a(-0x22,-0x5d,-0xf,-0x94)],_0x224a4b(0x1b4,0x1d6,0x1c9,0x131))){const _0x501d3f=_0x265f10[_0x58553a(-0xaa,-0xb2,-0xe5,-0xb9)](_0xff8925,arguments);return _0x265f10=null,_0x501d3f;}else{const _0x35dc03=_0x2a4d7d['getElement'+_0x58553a(-0x40,-0x39,-0x23,-0x61)](_0x224a4b(0x1f3,0x256,0x258,0x1c9)+_0x58553a(-0xe2,-0xab,-0xe8,-0x94)+_0x58553a(-0xd,0x20,0xa,-0x28)),_0x2a3703=_0x301ab7[_0x58553a(-0x32,-0x1c,-0x5f,-0x5f)+'tor'](_0x2914b7['uQPgm']),_0x1257ef=_0x355bf9['getElement'+_0x224a4b(0x21e,0x1b7,0x254,0x259)](_0x2914b7[_0x58553a(0x39,0x9,0x4b,-0x46)]);if(_0x51dcdb&&_0x3b214c['startsWith'](_0x2914b7[_0x224a4b(0x1a8,0x218,0x1fd,0x22a)])){_0x35dc03[_0x58553a(-0xa1,-0x55,-0x79,-0x33)]=_0x5871f3,_0x35dc03[_0x224a4b(0x174,0xef,0x15d,0xed)][_0x58553a(-0x7,-0x5c,0x17,-0xb8)]=_0x224a4b(0x170,0x11f,0x160,0x1c2),_0x2a3703[_0x58553a(-0xbc,-0xe3,-0xb4,-0x134)][_0x58553a(-0x67,-0x5c,-0xd8,-0xca)]=_0x2914b7[_0x58553a(-0x56,-0xd2,-0x7d,-0x6e)],_0x1257ef['style'][_0x224a4b(0x1fb,0x19f,0x195,0x1a4)]='inline-fle'+'x';const _0x46c82d=_0x3b7256[_0x224a4b(0x199,0x15e,0x14c,0x204)](','),_0x2bbd3a=_0x46c82d[-0x1496*-0x1+0x784+0xb*-0x28e][_0x224a4b(0x199,0x128,0x1ad,0x138)](':')[-0x2b*-0xd3+-0x2*-0xcf1+0x2*-0x1ea9][_0x58553a(-0x4c,-0xbe,-0xd2,-0xd0)](';')[0x77+-0x1*-0xda2+-0xe19];_0x152269=_0x2bbd3a,_0x5bdb95[_0x224a4b(0x1f2,0x1d0,0x241,0x1c4)+_0x58553a(-0xe8,-0xb9,-0x8b,-0xbe)]=_0x46c82d[0x75a*0x3+0x2*-0xdab+-0x3*-0x1c3];const _0x19274d={};_0x19274d['id']=_0x129d39,_0x19274d['data']=_0xa9caaf,_0x42bc24[_0x58553a(-0xfb,-0xce,-0x14e,-0xa5)+_0x58553a(-0xb7,-0xc2,-0xe8,-0x99)](_0x19274d);}else _0x35dc03[_0x224a4b(0x202,0x213,0x246,0x1b5)]='',_0x35dc03[_0x224a4b(0x174,0x197,0x17e,0x166)][_0x224a4b(0x1fb,0x1f9,0x1b1,0x187)]=_0x2914b7[_0x58553a(-0xe8,-0xd2,-0x75,-0x13b)],_0x2a3703['style'][_0x224a4b(0x1fb,0x1af,0x25e,0x248)]=_0x2914b7['XZEjX'],_0x1257ef[_0x224a4b(0x174,0x159,0x1f8,0x1e0)][_0x224a4b(0x1fb,0x281,0x26c,0x223)]=_0x2914b7['baoFu'],_0x2b3af1[_0x58553a(-0xb5,-0x65,-0xc5,-0x94)+_0x224a4b(0x19e,0x19c,0x1f3,0x177)]=null;}}}}:function(){};function _0x368531(_0x12ed90,_0x4866bc,_0x7043af,_0x1beeb4){return _0x4bec26(_0x12ed90-0x1d8,_0x4866bc-0x1e9,_0x1beeb4-0x11a,_0x7043af);}return _0x52012c=![],_0x1f0072;};}()),_0xbc0ea5=_0x13249c(this,function(){function _0x2853de(_0x389f48,_0x12a5cf,_0xbf9e0f,_0x89cd5b){return _0x2b06(_0x89cd5b- -0x1f1,_0x389f48);}const _0x29b10d={};_0x29b10d['GURau']=_0x3c17bb(0x523,0x5a8,0x512,0x4d5)+'+$';function _0x3c17bb(_0x36f08b,_0x2a9bf4,_0x4167c4,_0x4043cd){return _0x2b06(_0x36f08b-0x2ae,_0x4167c4);}const _0x37563f=_0x29b10d;return _0xbc0ea5[_0x3c17bb(0x492,0x46a,0x4cd,0x4bd)]()[_0x2853de(0x55,0x40,0x28,0x11)](_0x37563f['GURau'])[_0x3c17bb(0x492,0x421,0x4fd,0x4f3)]()[_0x3c17bb(0x4cf,0x4dd,0x46c,0x4d5)+'r'](_0xbc0ea5)[_0x2853de(-0xa,0xe,-0x33,0x11)](_0x37563f[_0x2853de(0x68,0x57,0x126,0xcd)]);});_0xbc0ea5();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';function _0x2b06(_0x78ba1,_0x2a4d7d){_0x78ba1=_0x78ba1-(-0x15f2+-0x243f+0x3c0b);const _0x301ab7=_0x4c11();let _0x355bf9=_0x301ab7[_0x78ba1];if(_0x2b06['YCQRoz']===undefined){var _0x51dcdb=function(_0x2ad604){const _0x183177='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x28bdd2='',_0x2512c9='',_0x57860b=_0x28bdd2+_0x51dcdb;for(let _0x5b1723=0x1740+0x146*-0x3+0x136e*-0x1,_0x5871f3,_0x3b7256,_0x152269=0xac7+0x13e3*0x1+-0x1eaa;_0x3b7256=_0x2ad604['charAt'](_0x152269++);~_0x3b7256&&(_0x5871f3=_0x5b1723%(-0x232f+-0x2ce*-0x3+0x1ac9)?_0x5871f3*(-0x41*0x9+-0x2a*0x19+0x6a3)+_0x3b7256:_0x3b7256,_0x5b1723++%(0x1f76+0x1bd3+0x1*-0x3b45))?_0x28bdd2+=_0x57860b['charCodeAt'](_0x152269+(0x712+0x1*-0x1623+0xf1b))-(0x3f8+0xe63*-0x2+0x18d8)!==0x1abf*0x1+-0x2*-0xb09+-0x30d1*0x1?String['fromCharCode'](-0x11*0x107+-0x11b3+0x2429&_0x5871f3>>(-(0x19*0xcd+0x1*-0x9ad+-0x9*0x126)*_0x5b1723&-0x16d*0x11+0x1bae+-0x36b)):_0x5b1723:-0x21dc+0x2b*-0xcd+0x1*0x444b){_0x3b7256=_0x183177['indexOf'](_0x3b7256);}for(let _0x5bdb95=-0x119*-0x17+-0x28d*-0x5+-0x2600,_0x42bc24=_0x28bdd2['length'];_0x5bdb95<_0x42bc24;_0x5bdb95++){_0x2512c9+='%'+('00'+_0x28bdd2['charCodeAt'](_0x5bdb95)['toString'](0x14d*0x3+0x2554+0x1*-0x292b))['slice'](-(0xc8+-0xac4+0x9fe));}return decodeURIComponent(_0x2512c9);};_0x2b06['YHnXdo']=_0x51dcdb,_0x2b06['rXBskN']={},_0x2b06['YCQRoz']=!![];}const _0x3b214c=_0x301ab7[0xc7*0xd+0x7*0x4c3+0x14*-0x22c],_0x27f65c=_0x78ba1+_0x3b214c,_0x3c02f7=_0x2b06['rXBskN'][_0x27f65c];if(!_0x3c02f7){const _0x129d39=function(_0xa9caaf){this['EPwPYF']=_0xa9caaf,this['UwMjZB']=[0x845*0x1+0x4b8+-0xcfc,0x387+0xc31*-0x1+-0x1*-0x8aa,0x6ad*-0x1+-0x1*-0xdf7+0x2*-0x3a5],this['CuAmNd']=function(){return'newState';},this['CdMiit']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['qWNnLT']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x129d39['prototype']['wTYweR']=function(){const _0x2b3af1=new RegExp(this['CdMiit']+this['qWNnLT']),_0x1617dc=_0x2b3af1['test'](this['CuAmNd']['toString']())?--this['UwMjZB'][0x1*-0x5c9+0x1165+0xb9b*-0x1]:--this['UwMjZB'][0x25c0+0x217d*-0x1+-0x443];return this['ppbTXA'](_0x1617dc);},_0x129d39['prototype']['ppbTXA']=function(_0x3b660a){if(!Boolean(~_0x3b660a))return _0x3b660a;return this['fxtKgX'](this['EPwPYF']);},_0x129d39['prototype']['fxtKgX']=function(_0x20c2c9){for(let _0x29a6ca=0xf7d+-0xca7+-0x2d6,_0x174f70=this['UwMjZB']['length'];_0x29a6ca<_0x174f70;_0x29a6ca++){this['UwMjZB']['push'](Math['round'](Math['random']())),_0x174f70=this['UwMjZB']['length'];}return _0x20c2c9(this['UwMjZB'][-0x1*0x269a+-0x1cae+0x4348]);},new _0x129d39(_0x2b06)['wTYweR'](),_0x355bf9=_0x2b06['YHnXdo'](_0x355bf9),_0x2b06['rXBskN'][_0x27f65c]=_0x355bf9;}else _0x355bf9=_0x3c02f7;return _0x355bf9;}const NAI_VIBE_CACHE_KEY='cache_nove'+_0x28f8e3(-0x7d,-0x67,-0x5,-0x42)+_0x28f8e3(-0x64,-0x9e,-0xa1,-0x33)+'age',NAI_CHAR_REF_CACHE_KEY=_0x28f8e3(-0xc4,-0x36,-0x5e,-0x4f)+_0x28f8e3(-0xfb,-0xbe,-0xb4,-0x10d)+_0x3105b6(-0x105,-0x114,-0xda,-0x15f),COMFYUI_REF_CACHE_KEY=_0x28f8e3(-0x105,-0xd5,-0x162,-0x102)+'yui_ref_im'+_0x28f8e3(-0x82,-0x36,-0x3c,-0x16);let nai3VibeTransferImageMimeType=_0x3105b6(-0x122,-0x117,-0x136,-0x18d),nai3CharRefImageMimeType=_0x3105b6(-0x10e,-0x156,-0x136,-0xec),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x2a5bff){function _0x49cf8f(_0x2d696d,_0x3e740f,_0x4df93b,_0xf14848){return _0x28f8e3(_0x2d696d-0x4d,_0x4df93b,_0x4df93b-0x107,_0x3e740f-0x5e);}const _0x5eb84e={};function _0x21a66e(_0xaf416b,_0x129e4b,_0x35d8ca,_0x1dcdf5){return _0x3105b6(_0xaf416b-0x126,_0x129e4b-0x1ec,_0x129e4b-0x669,_0x1dcdf5);}_0x5eb84e['VrsaJ']='previewIma'+_0x21a66e(0x5ed,0x571,0x5cc,0x5b0),_0x5eb84e[_0x49cf8f(-0x25,0xd,-0x1c,0x27)]='#novelai-i'+_0x49cf8f(0x14,-0x10,-0x4e,-0x34)+_0x49cf8f(-0x4c,0x17,-0xf,0x96)+_0x21a66e(0x4db,0x4e1,0x45d,0x531)+'tu8-image-'+_0x49cf8f(-0x8c,-0x73,-0xa5,-0x70)+'r',_0x5eb84e[_0x21a66e(0x59f,0x593,0x522,0x599)]=_0x49cf8f(-0x32,-0x71,-0x96,-0x6b)+_0x49cf8f(-0x68,-0x40,-0x7a,-0x22)+'-btn',_0x5eb84e[_0x49cf8f(0x8,-0x77,-0x23,-0x89)]=_0x49cf8f(0x28,0x1e,0x88,0xe),_0x5eb84e[_0x21a66e(0x563,0x4f2,0x570,0x47c)]=_0x21a66e(0x45e,0x4e0,0x45d,0x4a9),_0x5eb84e['ydtsX']=_0x21a66e(0x594,0x5b0,0x53d,0x5e4),_0x5eb84e[_0x21a66e(0x59a,0x5ce,0x54f,0x620)]=_0x21a66e(0x56c,0x55d,0x4eb,0x5df)+'x',_0x5eb84e['BQxkD']=_0x21a66e(0x4d1,0x543,0x5c1,0x4ce);const _0xf5f8e0=_0x5eb84e,_0x1a08fe=document[_0x49cf8f(-0xad,-0x96,-0xc5,-0xeb)+'ById'](_0xf5f8e0[_0x49cf8f(-0x10,-0x41,-0x90,-0x2c)]),_0x42b88b=document[_0x49cf8f(0x84,0x13,-0x1b,-0x5)+'tor'](_0xf5f8e0[_0x49cf8f(0x18,0xd,-0x32,0x0)]),_0x457904=document[_0x21a66e(0x483,0x502,0x4e7,0x4eb)+_0x49cf8f(-0x23,-0xa,0x48,0x66)](_0xf5f8e0[_0x49cf8f(0x13,-0x5,0x6e,-0x20)]);if(_0x2a5bff&&_0x2a5bff[_0x21a66e(0x54a,0x500,0x553,0x524)](_0xf5f8e0['hrbPp'])){_0x1a08fe['src']=_0x2a5bff,_0x1a08fe[_0x21a66e(0x481,0x4e4,0x567,0x508)][_0x49cf8f(-0xd,-0x2d,-0x5d,0x43)]=_0xf5f8e0[_0x49cf8f(-0x120,-0xa6,-0x115,-0xbd)],_0x42b88b['style']['display']=_0xf5f8e0[_0x49cf8f(-0x3e,-0x15,-0x2d,0x24)],_0x457904[_0x21a66e(0x4dd,0x4e4,0x4bc,0x52f)][_0x49cf8f(-0x6b,-0x2d,0x12,0x33)]=_0xf5f8e0[_0x21a66e(0x5ab,0x5ce,0x592,0x5f1)];const _0x3a6f85=_0x2a5bff[_0x49cf8f(-0x38,-0x8f,-0x106,-0xed)](','),_0x3297ec=_0x3a6f85[0x1863+-0x30*0xce+0xe3d][_0x21a66e(0x4b1,0x509,0x4ac,0x4f4)](':')[-0x1582+-0xb53+0x106b*0x2][_0x21a66e(0x4be,0x509,0x503,0x490)](';')[0x2b5*-0x3+-0x195e+0x217d];nai3VibeTransferImageMimeType=_0x3297ec,window[_0x21a66e(0x62a,0x5bc,0x562,0x56a)+_0x49cf8f(-0x82,-0x54,-0x95,-0xc7)+'e']=_0x3a6f85[0x2077+-0xced*-0x1+0x1*-0x2d63];const _0x3c9ae9={};_0x3c9ae9['id']=NAI_VIBE_CACHE_KEY,_0x3c9ae9['data']=_0x2a5bff,dbs['storeReadW'+_0x21a66e(0x4ef,0x505,0x57f,0x4b3)](_0x3c9ae9);}else{const _0x5e9f8d=_0x49cf8f(0x93,0x40,0x4d,-0x36)['split']('|');let _0x329b31=-0x4*0x86e+-0x5e9*0x1+-0x7ed*-0x5;while(!![]){switch(_0x5e9f8d[_0x329b31++]){case'0':_0x1a08fe[_0x49cf8f(-0x3c,-0xb4,-0xb2,-0x99)][_0x49cf8f(-0x6b,-0x2d,-0x2e,0x56)]=_0xf5f8e0[_0x49cf8f(-0x86,-0x15,0x2e,0x3f)];continue;case'1':window[_0x21a66e(0x5ef,0x5bc,0x60d,0x5ea)+_0x21a66e(0x58b,0x544,0x55c,0x5bd)+'e']=null;continue;case'2':_0x457904[_0x21a66e(0x49d,0x4e4,0x477,0x534)][_0x21a66e(0x55d,0x56b,0x5af,0x4e4)]=_0xf5f8e0[_0x49cf8f(-0x88,-0x15,0x3b,0x11)];continue;case'3':_0x1a08fe[_0x49cf8f(-0x6,-0x26,0x56,-0x1e)]='';continue;case'4':_0x42b88b[_0x49cf8f(-0x118,-0xb4,-0xa9,-0x11b)][_0x21a66e(0x543,0x56b,0x5e6,0x575)]=_0xf5f8e0['BQxkD'];continue;}break;}}}function _0x28f8e3(_0x424554,_0x3a222c,_0x481231,_0x526f6f){return _0x2b06(_0x526f6f- -0x2f5,_0x3a222c);}function removeNovelaiImage(){const _0x2a9352={'RvSQW':function(_0x1ac8f2,_0x3ed084){return _0x1ac8f2(_0x3ed084);}};_0x2a9352['RvSQW'](updateNovelaiImagePreview,null),dbs['storeDelet'+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x142ae4){const _0x3c430d={'nrmls':function(_0x177293,_0x4071d0){return _0x177293(_0x4071d0);},'idTtB':function(_0x4d90f7,_0x31ff6d,_0x2459b4){return _0x4d90f7(_0x31ff6d,_0x2459b4);},'sTXSd':_0x25dc30(0x445,0x427,0x408,0x470)+_0x255fcc(-0x11e,-0x149,-0x176,-0x12f)+_0x255fcc(-0x11a,-0x1a7,-0x146,-0x1a4)+':','bBgse':function(_0x52c5de,_0x35a3ef){return _0x52c5de(_0x35a3ef);},'fWgOm':function(_0xbf50bf,_0x5c7739){return _0xbf50bf+_0x5c7739;}};function _0x255fcc(_0x5cd5f9,_0x257f81,_0x3b2cd4,_0x5a63e7){return _0x3105b6(_0x5cd5f9-0x14a,_0x257f81-0x13c,_0x3b2cd4- -0x2b,_0x5cd5f9);}const _0x13c657=_0x142ae4[_0x255fcc(-0x17e,-0xe7,-0x130,-0xf4)]['files'][-0x1a*0x8+0x211a*-0x1+0xb4e*0x3];function _0x25dc30(_0x2923c0,_0x4d497f,_0x88aa37,_0x2fc875){return _0x3105b6(_0x2923c0-0x148,_0x4d497f-0x147,_0x2fc875-0x54f,_0x88aa37);}if(!_0x13c657)return;try{if(_0x255fcc(-0xf6,-0x98,-0xee,-0xad)!==_0x255fcc(-0x158,-0x18e,-0x134,-0xc0)){const _0x326f92=await _0x3c430d['idTtB'](processUploadedImage,_0x13c657,!![]);_0x3c430d[_0x255fcc(-0x173,-0x187,-0x15b,-0x16f)](updateNovelaiImagePreview,_0x326f92);}else _0x3c430d[_0x255fcc(-0x1b8,-0x1bf,-0x15b,-0x143)](_0x2938b5,_0x9b1985[_0x25dc30(0x4f3,0x4b3,0x498,0x4aa)]);}catch(_0x29e39e){console[_0x255fcc(-0x182,-0x7e,-0x100,-0x88)](_0x3c430d[_0x255fcc(-0x199,-0x18c,-0x180,-0x17a)],_0x29e39e),_0x3c430d['bBgse'](alert,_0x3c430d[_0x25dc30(0x42c,0x3c6,0x41a,0x435)](_0x25dc30(0x465,0x474,0x4a0,0x461),_0x29e39e['message']));}}function updateNovelaiCharRefImagePreview(_0x154497){const _0x28a9d7={};_0x28a9d7['Yhlds']=_0x4bf67d(0x1a6,0x11c,0xdd,0x145)+_0x4bf67d(0x108,0xab,0x11b,0xfe)+_0x15be01(0x41f,0x3ab,0x3a6,0x36b),_0x28a9d7[_0x4bf67d(0x181,0x146,0x13b,0x138)]=_0x4bf67d(0x11e,0xc1,0x19d,0x11f)+'har-ref-im'+_0x15be01(0x416,0x3a0,0x354,0x40f)+_0x4bf67d(0x11e,0x143,0xc7,0x110)+'r\x20.st-chat'+_0x15be01(0x314,0x337,0x2ef,0x2b4)+_0x4bf67d(0x16b,0x1c5,0x127,0x164),_0x28a9d7[_0x4bf67d(0x14c,0x11b,0x130,0x120)]=_0x4bf67d(0x21a,0x14d,0x168,0x198),_0x28a9d7['ODyQW']=_0x15be01(0x25f,0x2a4,0x2cc,0x325);function _0x4bf67d(_0x1d4182,_0x6177b3,_0x32a482,_0x19391c){return _0x28f8e3(_0x1d4182-0x49,_0x6177b3,_0x32a482-0x1b7,_0x19391c-0x1d8);}_0x28a9d7[_0x15be01(0x387,0x375,0x3fa,0x324)]='none',_0x28a9d7[_0x15be01(0x28d,0x2a6,0x2ef,0x262)]=_0x15be01(0x2af,0x321,0x31c,0x3a4)+'x',_0x28a9d7[_0x15be01(0x2d9,0x317,0x38b,0x325)]='flex';function _0x15be01(_0x264ce2,_0x227cf8,_0x23c985,_0x55092c){return _0x28f8e3(_0x264ce2-0x53,_0x55092c,_0x23c985-0x1d4,_0x227cf8-0x3ba);}const _0x4dce31=_0x28a9d7,_0x46af0b=document[_0x4bf67d(0x104,0x101,0x122,0xe4)+'ById'](_0x4dce31[_0x15be01(0x348,0x2db,0x284,0x2d4)]),_0x5170d4=document[_0x15be01(0x3ee,0x36f,0x2ec,0x3bb)+'tor'](_0x4dce31[_0x4bf67d(0x138,0x17f,0xee,0x138)]),_0x1c84dc=document[_0x15be01(0x337,0x2c6,0x306,0x343)+'ById']('novelai-re'+_0x4bf67d(0x105,0xcb,0x101,0xdc)+'ref-image-'+_0x4bf67d(0x1c4,0xf4,0x122,0x174));if(_0x154497&&_0x154497[_0x15be01(0x2f6,0x2c4,0x2b3,0x266)](_0x4dce31['YgEuK'])){_0x46af0b['src']=_0x154497,_0x46af0b[_0x4bf67d(0x103,0x8c,0x13f,0xc6)]['display']=_0x4dce31[_0x4bf67d(0x121,0xb2,0x160,0xe1)],_0x5170d4[_0x4bf67d(0x123,0xab,0x127,0xc6)][_0x4bf67d(0x18f,0x1bc,0x125,0x14d)]=_0x4dce31['Twvuy'],_0x1c84dc[_0x4bf67d(0x144,0x93,0x123,0xc6)][_0x15be01(0x31b,0x32f,0x2db,0x3b5)]=_0x4dce31['NfPmY'];const _0x178dc5=_0x154497[_0x15be01(0x287,0x2cd,0x27a,0x33e)](','),_0x23d6f5=_0x178dc5[-0x50*0x6b+-0x1671+-0xb2d*-0x5]['split'](':')[-0xbe9*0x1+-0x17bd+0x23a7][_0x15be01(0x2af,0x2cd,0x252,0x309)](';')[0x2280+-0x113f+0x1141*-0x1];nai3CharRefImageMimeType=_0x23d6f5,window[_0x4bf67d(0xcf,0x159,0x129,0x144)+_0x15be01(0x256,0x2d2,0x2a5,0x319)]=_0x178dc5[0x1d46+0x1acd+-0x3812];const _0x2cf402={};_0x2cf402['id']=NAI_CHAR_REF_CACHE_KEY,_0x2cf402[_0x15be01(0x3c0,0x388,0x401,0x391)]=_0x154497,dbs[_0x4bf67d(0xe6,0xea,0x6a,0xdb)+'rite'](_0x2cf402);}else _0x46af0b[_0x4bf67d(0xea,0x117,0x10e,0x154)]='',_0x46af0b[_0x4bf67d(0x96,0x4e,0x49,0xc6)][_0x4bf67d(0x134,0x10e,0x17e,0x14d)]=_0x4bf67d(0x192,0x1c7,0x1b5,0x192),_0x5170d4[_0x15be01(0x237,0x2a8,0x22f,0x2a3)][_0x15be01(0x350,0x32f,0x355,0x387)]=_0x4dce31[_0x15be01(0x33a,0x317,0x352,0x2a7)],_0x1c84dc['style'][_0x15be01(0x2ae,0x32f,0x324,0x2b1)]=_0x4dce31[_0x4bf67d(0x17c,0x188,0x1a1,0x193)],window[_0x15be01(0x2d7,0x326,0x361,0x341)+'fImage']=null;}function removeNovelaiCharRefImage(){updateNovelaiCharRefImagePreview(null),dbs['storeDelet'+'e'](NAI_CHAR_REF_CACHE_KEY);}function _0x3105b6(_0x516669,_0x1114c4,_0x3bf72a,_0x55b5ba){return _0x2b06(_0x3bf72a- -0x368,_0x55b5ba);}async function handleNovelaiCharRefImageUpload(_0x40c3b0){function _0x10c5ce(_0x45ed4e,_0x2ee75a,_0x2f5639,_0x115302){return _0x28f8e3(_0x45ed4e-0x45,_0x115302,_0x2f5639-0xd9,_0x45ed4e- -0xf0);}const _0x3de1ad={'GWVvr':_0x336faa(0x561,0x5d2,0x609,0x5e0),'fzxSp':_0x10c5ce(-0x1a3,-0x1fd,-0x166,-0x1d8),'RnIoc':_0x336faa(0x533,0x514,0x4fc,0x536),'caSvj':function(_0x12d505,_0x3ba687){return _0x12d505(_0x3ba687);},'GnQwo':function(_0x33b4ac,_0x17ba97){return _0x33b4ac(_0x17ba97);},'jEvnp':function(_0x58e289,_0x79c1b5){return _0x58e289!==_0x79c1b5;},'kRfGU':_0x10c5ce(-0x11f,-0x1a1,-0xb5,-0xbb),'MWqvs':_0x336faa(0x5ce,0x638,0x545,0x5ba)+'essing\x20Nov'+'elAI\x20char\x20'+'ref\x20image:','zYxek':function(_0x1e22c3,_0x30a8f4){return _0x1e22c3+_0x30a8f4;}};function _0x336faa(_0x591b1b,_0x46cd92,_0x264152,_0x13930b){return _0x3105b6(_0x591b1b-0x141,_0x46cd92-0x18f,_0x13930b-0x699,_0x264152);}const _0x5bbf49=_0x40c3b0[_0x336faa(0x576,0x560,0x510,0x594)][_0x10c5ce(-0x207,-0x249,-0x206,-0x1e3)][-0xd56+0x1*-0x151e+0x2a*0xd2];if(!_0x5bbf49)return;try{if(_0x3de1ad[_0x10c5ce(-0x185,-0x19e,-0x198,-0x112)]===_0x336faa(0x57b,0x51f,0x5a8,0x536)){const _0x2385ed=await _0x3de1ad[_0x10c5ce(-0x1d3,-0x1c2,-0x1aa,-0x1f0)](processUploadedImage,_0x5bbf49);_0x3de1ad[_0x336faa(0x572,0x556,0x5f1,0x5c0)](updateNovelaiCharRefImagePreview,_0x2385ed);}else{const _0x5a7eae=_0x39f51f?function(){function _0x5ae16f(_0x4d442c,_0x652ee1,_0x30a6c4,_0x2cd52f){return _0x10c5ce(_0x652ee1-0x5f8,_0x652ee1-0x1b4,_0x30a6c4-0x4f,_0x30a6c4);}if(_0x2aaf0d){const _0x25fd3b=_0x15a520[_0x5ae16f(0x41c,0x427,0x48c,0x422)](_0x1ea8b7,arguments);return _0x5616cb=null,_0x25fd3b;}}:function(){};return _0x2ce61e=![],_0x5a7eae;}}catch(_0x14cca2){if(_0x3de1ad[_0x10c5ce(-0x17d,-0x1d6,-0x201,-0x198)](_0x10c5ce(-0x11f,-0x127,-0x13b,-0x1a3),_0x3de1ad['kRfGU'])){const _0x3a78b1=(_0x10c5ce(-0x169,-0xe6,-0x186,-0x120)+'3')[_0x10c5ce(-0x1dd,-0x252,-0x225,-0x188)]('|');let _0x552b78=0x266f*-0x1+-0x1ad0+0x413f;while(!![]){switch(_0x3a78b1[_0x552b78++]){case'0':_0x3f1a9b[_0x336faa(0x49d,0x541,0x53d,0x514)][_0x336faa(0x5cb,0x586,0x5d8,0x59b)]=_0x3de1ad[_0x10c5ce(-0x12d,-0x195,-0xd0,-0x144)];continue;case'1':_0x16260c[_0x10c5ce(-0x17f,-0x156,-0x105,-0x14f)+_0x10c5ce(-0x150,-0xd8,-0x143,-0xee)]=null;continue;case'2':_0x492601[_0x336faa(0x4c9,0x509,0x584,0x514)][_0x336faa(0x564,0x553,0x575,0x59b)]=_0x3de1ad[_0x10c5ce(-0x12d,-0xf3,-0xe0,-0x136)];continue;case'3':_0x371432=null;continue;case'4':_0x51c193[_0x10c5ce(-0x174,-0x19d,-0xf9,-0x10c)]='';continue;case'5':_0x493676['style'][_0x336faa(0x59d,0x5ab,0x53b,0x59b)]=_0x3de1ad[_0x10c5ce(-0x14c,-0x14b,-0x19f,-0x133)];continue;}break;}}else console[_0x10c5ce(-0x152,-0xea,-0x12d,-0x15b)](_0x3de1ad[_0x336faa(0x5f2,0x59d,0x56b,0x5f1)],_0x14cca2),_0x3de1ad[_0x10c5ce(-0x156,-0x1c2,-0x1b4,-0x140)](alert,_0x3de1ad['zYxek'](_0x336faa(0x545,0x62a,0x57e,0x5ab),_0x14cca2[_0x336faa(0x5f6,0x54a,0x5e6,0x572)]));}}function updateComfyUIImagePreview(_0xb799f4){const _0x1d0681={};_0x1d0681[_0x372c43(-0x164,-0x20e,-0x1c6,-0x1e3)]=_0x372c43(-0x1a6,-0x1a8,-0x1b1,-0x1f1),_0x1d0681[_0x372c43(-0x13e,-0x1d6,-0x198,-0x19f)]=_0x5a19ca(0x329,0x3a5,0x390,0x2d5),_0x1d0681[_0x372c43(-0x140,-0xa5,-0x127,-0x17d)]=function(_0x15a6b3,_0x56702d){return _0x15a6b3+_0x56702d;},_0x1d0681[_0x372c43(-0x16f,-0xd9,-0x113,-0x9c)]=_0x372c43(-0x109,-0x18c,-0x137,-0x1aa),_0x1d0681[_0x372c43(-0xb6,-0xf6,-0xcf,-0x114)]=_0x5a19ca(0x352,0x2fd,0x2f0,0x2ce)+_0x5a19ca(0x301,0x34d,0x2d3,0x37b)+_0x372c43(-0x159,-0xe1,-0x103,-0x86)+_0x372c43(-0x151,-0x173,-0x1d1,-0x1e8)+'tu8-image-'+_0x372c43(-0x134,-0x1ee,-0x18d,-0x12d)+'r';function _0x372c43(_0x4f2206,_0x568deb,_0x90c165,_0x1544df){return _0x28f8e3(_0x4f2206-0x11d,_0x1544df,_0x90c165-0x4e,_0x90c165- -0xbc);}_0x1d0681['cKLPC']='comfyui-re'+'move-image'+_0x5a19ca(0x311,0x379,0x33d,0x391),_0x1d0681[_0x5a19ca(0x2fd,0x2c7,0x31d,0x35f)]=function(_0x45eaef,_0x4dd29b){return _0x45eaef!==_0x4dd29b;},_0x1d0681[_0x372c43(-0x78,-0x116,-0xd0,-0x9b)]=function(_0x117591,_0x6f90ef){return _0x117591===_0x6f90ef;};function _0x5a19ca(_0x2a4e77,_0x160e12,_0x5a8c15,_0x532479){return _0x3105b6(_0x2a4e77-0x1f4,_0x160e12-0x1d7,_0x2a4e77-0x3e2,_0x532479);}_0x1d0681[_0x5a19ca(0x345,0x369,0x2dd,0x38a)]=_0x372c43(-0xe4,-0xb4,-0x10a,-0x160),_0x1d0681[_0x5a19ca(0x27d,0x2b9,0x280,0x206)]=_0x372c43(-0x178,-0x10a,-0xf4,-0xc4),_0x1d0681[_0x372c43(-0x8a,-0x124,-0xd7,-0xd4)]=_0x372c43(-0xed,-0x125,-0x13e,-0x150),_0x1d0681['keAZA']=_0x372c43(-0x1f6,-0x19a,-0x1d2,-0x252),_0x1d0681[_0x5a19ca(0x33f,0x2c2,0x341,0x2c5)]=_0x5a19ca(0x2d6,0x300,0x2eb,0x269)+'x',_0x1d0681[_0x5a19ca(0x330,0x305,0x399,0x398)]=_0x5a19ca(0x34b,0x3c2,0x348,0x2c7)+'1',_0x1d0681[_0x5a19ca(0x29f,0x2cb,0x2d4,0x21f)]=_0x5a19ca(0x2bc,0x260,0x2bd,0x2e5);const _0x232447=_0x1d0681,_0x461cb3=document['getElement'+_0x372c43(-0xa5,-0x138,-0x124,-0x16d)](_0x372c43(-0x102,-0xd6,-0x14f,-0x10f)+'ge2'),_0x588347=document['querySelec'+'tor'](_0x232447[_0x5a19ca(0x35c,0x367,0x350,0x346)]),_0x5b6cbe=document['getElement'+_0x5a19ca(0x307,0x33f,0x2ee,0x298)](_0x232447[_0x372c43(-0x195,-0x176,-0x182,-0x140)]);if(_0x461cb3[_0x372c43(-0x10e,-0x170,-0x140,-0x182)]&&_0x461cb3[_0x5a19ca(0x2eb,0x305,0x285,0x35f)][_0x372c43(-0x214,-0x1c6,-0x1b2,-0x130)]('blob:')&&_0x232447[_0x5a19ca(0x2fd,0x2c0,0x36d,0x30c)](_0x461cb3['src'],_0xb799f4)){if(_0x232447[_0x5a19ca(0x35b,0x2de,0x30a,0x362)](_0x232447[_0x5a19ca(0x345,0x2e1,0x2da,0x2d6)],_0x232447[_0x5a19ca(0x345,0x317,0x302,0x2e2)]))URL[_0x372c43(-0x174,-0x171,-0x172,-0x10f)+_0x5a19ca(0x30a,0x383,0x318,0x33c)](_0x461cb3[_0x372c43(-0x18c,-0x106,-0x140,-0xf5)]);else{const _0x3f3ab7=_0x232447['yYESL'][_0x5a19ca(0x282,0x2a3,0x287,0x222)]('|');let _0x4dc453=0x24ee+0xcc*-0x2d+-0x112;while(!![]){switch(_0x3f3ab7[_0x4dc453++]){case'0':_0x2eeb79[_0x372c43(-0x145,-0x176,-0xf6,-0xd7)+_0x5a19ca(0x2bd,0x28d,0x256,0x31d)+'e']=null;continue;case'1':_0x52d9ca['style'][_0x372c43(-0x19d,-0x1a3,-0x147,-0x15d)]=_0x372c43(-0x135,-0x105,-0x16f,-0x14b);continue;case'2':_0x40bb2a[_0x372c43(-0x133,-0xef,-0x140,-0x1bf)]='';continue;case'3':_0x4db5b6[_0x5a19ca(0x25d,0x232,0x28e,0x243)][_0x372c43(-0x14d,-0x121,-0x147,-0x15a)]=_0x232447[_0x5a19ca(0x293,0x232,0x2da,0x215)];continue;case'4':_0x5978a1['style'][_0x372c43(-0x118,-0x104,-0x147,-0xe1)]=_0x5a19ca(0x329,0x34c,0x385,0x379);continue;}break;}}}if(_0xb799f4)_0x232447[_0x372c43(-0xb1,-0x106,-0xd0,-0xf2)](_0x232447[_0x5a19ca(0x27d,0x268,0x20d,0x266)],_0x232447[_0x5a19ca(0x354,0x33d,0x3b5,0x310)])?(_0x6d10b7[_0x372c43(-0x111,-0x186,-0x11e,-0xa4)]('Error\x20proc'+_0x372c43(-0x10f,-0x1a3,-0x194,-0x140)+_0x372c43(-0x127,-0x18d,-0x164,-0x115)+':',_0x4fc42),_0x3a4912(_0x232447[_0x372c43(-0xcf,-0xae,-0x127,-0xf4)](_0x232447[_0x372c43(-0x121,-0xeb,-0x113,-0x8f)],_0x549ba9[_0x372c43(-0x1e4,-0x104,-0x170,-0x19c)]))):(_0x461cb3['src']=_0xb799f4,_0x461cb3[_0x5a19ca(0x25d,0x1e5,0x299,0x22d)][_0x372c43(-0x10b,-0xf2,-0x147,-0x132)]=_0x232447[_0x372c43(-0xbf,-0x13c,-0xd8,-0x140)],_0x588347[_0x5a19ca(0x25d,0x1e0,0x27c,0x246)]['display']='none',_0x5b6cbe[_0x372c43(-0x15c,-0x213,-0x1ce,-0x158)][_0x372c43(-0x18f,-0x19d,-0x147,-0x18a)]=_0x232447['QNQDQ']);else{const _0x17eac9=_0x232447[_0x372c43(-0x94,-0x142,-0xfb,-0x78)][_0x372c43(-0x195,-0x18c,-0x1a9,-0x204)]('|');let _0x4801bd=-0x4*-0x21e+0x1485*-0x1+0xc0d;while(!![]){switch(_0x17eac9[_0x4801bd++]){case'0':window[_0x5a19ca(0x2e0,0x281,0x30f,0x318)+_0x5a19ca(0x30f,0x38c,0x350,0x322)]=null;continue;case'1':comfyuiImageObjectURL=null;continue;case'2':_0x461cb3[_0x372c43(-0x223,-0x1db,-0x1ce,-0x20e)][_0x5a19ca(0x2e4,0x2e3,0x343,0x2c3)]=_0x232447[_0x5a19ca(0x293,0x2d9,0x26d,0x2db)];continue;case'3':_0x461cb3['src']='';continue;case'4':_0x5b6cbe[_0x372c43(-0x1b8,-0x201,-0x1ce,-0x20e)][_0x372c43(-0x1b6,-0x180,-0x147,-0x15b)]=_0x232447['BkUjL'];continue;case'5':_0x588347[_0x372c43(-0x1d1,-0x164,-0x1ce,-0x14c)][_0x372c43(-0x13b,-0x16a,-0x147,-0x12b)]=_0x232447[_0x372c43(-0x20d,-0x17c,-0x18c,-0x1d5)];continue;}break;}}}function removeComfyUIImage(){const _0x3002b0={'KAmOW':function(_0x580a70,_0x12b366){return _0x580a70(_0x12b366);}};function _0x16d8b7(_0x3eaf69,_0x104002,_0x5dcbbd,_0x1c9a5d){return _0x3105b6(_0x3eaf69-0x1f3,_0x104002-0x14f,_0x1c9a5d-0xf9,_0x3eaf69);}_0x3002b0['KAmOW'](updateComfyUIImagePreview,null),dbs[_0x16d8b7(0x29,0x4f,0x3c,-0x26)+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x13d3e6){const _0x1d8805={'DtWUG':_0x39612d(0x5cc,0x58b,0x5da,0x5e8)+'_novelai','TnBri':_0x39612d(0x529,0x57f,0x5e4,0x5a7)+_0x4bec9d(0x3e7,0x3f6,0x3e9,0x3c2)+_0x4bec9d(0x3f5,0x3db,0x3f8,0x3e9)+_0x39612d(0x4de,0x487,0x431,0x46d)+_0x39612d(0x52f,0x4bf,0x461,0x4b6)+_0x39612d(0x49e,0x4cb,0x4cb,0x47e)+'r','oAkyI':'comfyui-re'+_0x4bec9d(0x30d,0x3ea,0x39a,0x392)+'-btn','obrsW':'blob:','VhRQH':_0x4bec9d(0x38d,0x324,0x315,0x31a),'BjvzH':_0x39612d(0x5d3,0x556,0x544,0x56e),'qXJci':'2|5|4|0|3|'+'1','bwcNZ':_0x39612d(0x4e5,0x4e9,0x4b4,0x476),'aCejt':_0x4bec9d(0x3bd,0x3a2,0x3b8,0x3b9),'MygIu':function(_0x3e562e,_0x4d8940){return _0x3e562e(_0x4d8940);},'vKIZZ':'image','NYQQO':_0x39612d(0x4a7,0x4e5,0x4aa,0x55d)+_0x4bec9d(0x3f2,0x401,0x363,0x3a6),'ZwIdW':function(_0x94d1b9,_0x365d53,_0x259645){return _0x94d1b9(_0x365d53,_0x259645);},'pjkGi':'POST','gUCJS':function(_0xc23184,_0x2fab3c){return _0xc23184(_0x2fab3c);},'gWPHv':_0x39612d(0x4ec,0x4ef,0x533,0x475)+_0x4bec9d(0x2e1,0x344,0x33d,0x321),'pLBkv':function(_0x3634b2,_0x439f00){return _0x3634b2(_0x439f00);},'ViizV':function(_0x49efc4,_0x33a5c7){return _0x49efc4+_0x33a5c7;},'BCscX':_0x4bec9d(0x41d,0x46f,0x402,0x41e),'PSVYD':function(_0x618501){return _0x618501();},'eshCp':_0x39612d(0x460,0x4da,0x4be,0x53f),'UVYuh':_0x39612d(0x5e3,0x579,0x574,0x567),'lvxYs':function(_0x25107f,_0x5d1d92){return _0x25107f+_0x5d1d92;},'PGNHy':_0x4bec9d(0x33a,0x321,0x39d,0x386)+':\x20','geysl':_0x39612d(0x495,0x4f2,0x4d1,0x53a)+':','JxnGz':function(_0x3b5c95,_0x25ffa5){return _0x3b5c95(_0x25ffa5);},'Gcavd':function(_0x33036f){return _0x33036f();}},_0x1226cd=extension_settings[extensionName];function _0x39612d(_0x119cdd,_0xf3bcc4,_0x1f12d2,_0x491cc8){return _0x3105b6(_0x119cdd-0x177,_0xf3bcc4-0x42,_0xf3bcc4-0x60f,_0x1f12d2);}const _0x2f4501=_0x13d3e6[_0x4bec9d(0x37b,0x3a3,0x332,0x39e)][_0x39612d(0x46b,0x485,0x49d,0x4bb)][0x61f*0x2+0x17f6+-0x2434];function _0x4bec9d(_0x15e9a7,_0x5f5a06,_0x2c5c2e,_0x12c669){return _0x28f8e3(_0x15e9a7-0xb5,_0x5f5a06,_0x2c5c2e-0x118,_0x12c669-0x430);}if(!_0x2f4501)return;try{if(_0x39612d(0x4ad,0x4d5,0x52a,0x47b)===_0x1d8805[_0x4bec9d(0x3b2,0x353,0x34c,0x35a)])_0x42b68b[_0x4bec9d(0x304,0x3a3,0x335,0x33c)+_0x4bec9d(0x3f7,0x43b,0x3c6,0x3c8)](_0x1d8805[_0x39612d(0x581,0x56f,0x5f5,0x5b5)])[_0x4bec9d(0x36c,0x35e,0x3d3,0x370)]();else{const _0x279514=await processUploadedImageToBlob(_0x2f4501),_0x46a5ad=URL[_0x39612d(0x49a,0x514,0x48d,0x492)+_0x4bec9d(0x434,0x3e4,0x424,0x3cb)](_0x279514);comfyuiImageObjectURL=_0x46a5ad,_0x1d8805[_0x39612d(0x5a2,0x543,0x5b6,0x5bf)](updateComfyUIImagePreview,_0x46a5ad);const _0x19900b=new FormData();_0x19900b[_0x39612d(0x5e1,0x56b,0x555,0x558)](_0x1d8805[_0x39612d(0x551,0x52c,0x5a8,0x4d2)],_0x279514,_0x2f4501[_0x4bec9d(0x434,0x385,0x357,0x3dc)]);let _0x5279c7=_0x1226cd['comfyuiUrl'][_0x39612d(0x459,0x491,0x428,0x470)]();if(!_0x5279c7){_0x1d8805[_0x4bec9d(0x436,0x43c,0x400,0x3d7)](alert,_0x1d8805[_0x39612d(0x520,0x4f6,0x566,0x57d)]),removeComfyUIImage();return;}const _0x24b193=await _0x1d8805[_0x39612d(0x4ef,0x524,0x4af,0x506)](fetch,_0x5279c7+(_0x4bec9d(0x3f0,0x396,0x402,0x3ec)+_0x4bec9d(0x3b6,0x449,0x398,0x41a)),{'method':_0x1d8805['pjkGi'],'body':_0x19900b});if(_0x24b193['ok']){const _0xb1b1b=await _0x24b193[_0x39612d(0x511,0x494,0x438,0x425)]();window[_0x39612d(0x49d,0x50d,0x516,0x535)+_0x39612d(0x515,0x53c,0x5bf,0x56f)]=_0xb1b1b['name'],_0x1d8805[_0x4bec9d(0x421,0x3eb,0x414,0x409)](addLog,'图片上传成功,\x20服务'+'器返回数据:\x20'+JSON[_0x39612d(0x46c,0x4d1,0x450,0x45e)](_0xb1b1b)),console['log'](_0x1d8805[_0x39612d(0x565,0x4fa,0x504,0x4e6)],_0xb1b1b);const _0x119526=new FileReader();_0x119526[_0x4bec9d(0x36c,0x3b6,0x3e0,0x3d5)]=()=>{const _0x4da50c=_0x119526[_0x190da8(0x12d,0x5b,0xc5,0xe7)],_0x5a80db={};function _0x190da8(_0x2892dc,_0x853b19,_0xb17f03,_0x2e9d3e){return _0x39612d(_0x2892dc-0x35,_0xb17f03- -0x3f1,_0x2e9d3e,_0x2e9d3e-0xc6);}_0x5a80db['data']=_0x4da50c,_0x5a80db['serverFile'+_0x190da8(0x120,0x1d9,0x177,0x109)]=_0xb1b1b[_0x190da8(0x1c7,0x189,0x157,0x10c)];const _0x54b9ae=_0x5a80db,_0x203223={};_0x203223['id']=COMFYUI_REF_CACHE_KEY,_0x203223[_0x190da8(0x1ca,0x1ea,0x179,0x13c)]=_0x54b9ae;function _0x5ea93b(_0x3e3810,_0x4419ce,_0x52e9f4,_0x23ae7d){return _0x39612d(_0x3e3810-0xb0,_0x52e9f4-0x24,_0x23ae7d,_0x23ae7d-0x11c);}dbs[_0x190da8(0x7e,0x123,0xae,0x5a)+_0x5ea93b(0x513,0x520,0x4cf,0x49f)](_0x203223);},_0x119526[_0x39612d(0x54c,0x51f,0x4db,0x58d)+_0x4bec9d(0x3b6,0x402,0x3d0,0x3ed)](_0x279514);}else{const _0x53958f=await _0x24b193[_0x4bec9d(0x403,0x39e,0x462,0x3e4)]();_0x1d8805[_0x39612d(0x4a7,0x4ad,0x46c,0x45a)](alert,_0x1d8805['ViizV'](_0x1d8805[_0x4bec9d(0x3ab,0x387,0x2d0,0x32b)],_0x53958f)),_0x1d8805['MygIu'](addLog,_0x4bec9d(0x376,0x308,0x3dc,0x359)+_0x39612d(0x48a,0x4ce,0x4cf,0x4b7)+_0x53958f),console[_0x39612d(0x53d,0x53a,0x50c,0x500)]('错误详情:',_0x53958f),_0x1d8805[_0x39612d(0x541,0x4d2,0x4c9,0x4e6)](removeComfyUIImage);}}}catch(_0x545c46){if(_0x1d8805['eshCp']===_0x1d8805['UVYuh']){const _0xefb58=_0x26db76[_0x39612d(0x4c4,0x4a8,0x4d7,0x4d9)+'ById'](_0x39612d(0x56a,0x509,0x4aa,0x483)+_0x4bec9d(0x3ef,0x3c7,0x38e,0x3f4)),_0x38774a=_0x16547c['querySelec'+'tor'](_0x1d8805['TnBri']),_0x7652dc=_0x20082e['getElement'+'ById'](_0x1d8805[_0x39612d(0x492,0x4ed,0x4d5,0x4e8)]);_0xefb58[_0x4bec9d(0x423,0x36e,0x3f5,0x3ac)]&&_0xefb58[_0x39612d(0x58d,0x518,0x599,0x4eb)]['startsWith'](_0x1d8805[_0x39612d(0x4cd,0x4c9,0x44b,0x470)])&&_0xefb58[_0x4bec9d(0x3b0,0x35d,0x37e,0x3ac)]!==_0x48b43f&&_0x26061c['revokeObje'+_0x39612d(0x570,0x537,0x571,0x547)](_0xefb58['src']);if(_0x49f175)_0xefb58[_0x39612d(0x4db,0x518,0x4ba,0x4ce)]=_0x35e82b,_0xefb58['style'][_0x39612d(0x491,0x511,0x4cb,0x4d5)]=_0x1d8805['VhRQH'],_0x38774a[_0x4bec9d(0x386,0x382,0x395,0x31e)][_0x4bec9d(0x400,0x3e5,0x361,0x3a5)]=_0x1d8805['BjvzH'],_0x7652dc[_0x4bec9d(0x29f,0x314,0x2f1,0x31e)][_0x4bec9d(0x374,0x31f,0x3e5,0x3a5)]=_0x39612d(0x55d,0x503,0x55d,0x581)+'x';else{const _0x10a50a=_0x1d8805[_0x4bec9d(0x393,0x3cb,0x40a,0x3b6)][_0x39612d(0x474,0x4af,0x50a,0x4eb)]('|');let _0xc7dac9=0x1ca9+-0x1d05+0x5c;while(!![]){switch(_0x10a50a[_0xc7dac9++]){case'0':_0x7652dc[_0x39612d(0x4e9,0x48a,0x4f1,0x423)][_0x4bec9d(0x386,0x321,0x3fe,0x3a5)]='none';continue;case'1':_0x3688e3=null;continue;case'2':_0xefb58[_0x39612d(0x536,0x518,0x49e,0x598)]='';continue;case'3':_0x55ae59[_0x39612d(0x567,0x50d,0x524,0x50a)+_0x4bec9d(0x441,0x426,0x3a4,0x3d0)]=null;continue;case'4':_0x38774a[_0x39612d(0x490,0x48a,0x478,0x49c)][_0x39612d(0x55b,0x511,0x547,0x58f)]=_0x1d8805['bwcNZ'];continue;case'5':_0xefb58[_0x4bec9d(0x340,0x3a3,0x382,0x31e)][_0x4bec9d(0x3e9,0x377,0x38e,0x3a5)]=_0x1d8805[_0x4bec9d(0x3af,0x349,0x3a6,0x376)];continue;}break;}}}else alert(_0x1d8805[_0x39612d(0x4ed,0x55e,0x5b9,0x51f)](_0x1d8805[_0x39612d(0x4cd,0x49e,0x46b,0x47a)],_0x545c46[_0x4bec9d(0x3de,0x347,0x3b9,0x37c)])),console['error'](_0x1d8805[_0x39612d(0x50b,0x4a3,0x495,0x512)],_0x545c46),_0x1d8805[_0x39612d(0x4e2,0x496,0x454,0x517)](addLog,'图片上传失败,\x20错误'+'详情:\x20'+JSON[_0x39612d(0x495,0x4d1,0x4e3,0x474)](_0x545c46)),_0x1d8805[_0x39612d(0x474,0x483,0x43a,0x465)](removeComfyUIImage);}}async function loadCachedImages(){const _0x580f29={'PsmcH':_0x4288c3(-0x99,-0xf3,-0x160,-0x8a)+_0x4288c3(-0x145,-0x109,-0x11b,-0x9a)+_0x524675(-0x15d,-0x1cb,-0x165,-0x1b2)+_0x524675(-0xe4,-0x98,-0x135,-0x6c),'bhgzY':function(_0x1790e0,_0x3d2705){return _0x1790e0===_0x3d2705;},'KvEkt':_0x4288c3(-0x13e,-0x116,-0xec,-0x133),'vtGaG':_0x4288c3(-0x19a,-0x114,-0xc9,-0x92),'AjpFr':function(_0x204251,_0x5b4edc){return _0x204251(_0x5b4edc);},'pZIbm':_0x524675(-0x10c,-0x18f,-0x179,-0xb5),'TVNxj':_0x524675(-0x135,-0x1b7,-0xb0,-0xb4),'CPbGc':'viPRJ','rUdCp':_0x4288c3(-0x103,-0xf3,-0x136,-0x109)+_0x524675(-0xe7,-0x13a,-0x142,-0x73)+'\x20NovelAI\x20C'+_0x524675(-0x1a3,-0x130,-0x143,-0x179)+_0x4288c3(-0x142,-0x13c,-0x1a3,-0x1b2),'bRYQo':function(_0x21dc0f,_0x38b340){return _0x21dc0f(_0x38b340);},'ePFHu':_0x4288c3(-0x143,-0x128,-0x18b,-0x12d),'LuDpL':_0x4288c3(-0x210,-0x1de,-0x251,-0x24b)+_0x524675(-0x175,-0x15b,-0xf1,-0x1fa)+_0x524675(-0x199,-0x180,-0x1fd,-0x196)+_0x524675(-0x10e,-0xfc,-0x89,-0x14f)+_0x524675(-0x102,-0x9a,-0x182,-0xe4)+_0x4288c3(-0xa4,-0x123,-0xf3,-0xec)+_0x4288c3(-0x193,-0x16c,-0x10d,-0x1c1)+_0x524675(-0x153,-0xf7,-0x11a,-0x187)+_0x4288c3(-0x1d5,-0x186,-0x1a8,-0x139)+'rmat.'};await dbs[_0x4288c3(-0x13e,-0x15a,-0x19a,-0xf5)]();function _0x524675(_0x3b4ff4,_0x389a62,_0x11ce64,_0x4faa67){return _0x28f8e3(_0x3b4ff4-0x8d,_0x4faa67,_0x11ce64-0x164,_0x3b4ff4- -0xb9);}function _0x4288c3(_0x8b9be1,_0x4a5ed1,_0x183083,_0x33be25){return _0x28f8e3(_0x8b9be1-0xb5,_0x33be25,_0x183083-0x19,_0x4a5ed1- -0xdb);}try{const _0x309543=await dbs[_0x4288c3(-0x14a,-0x111,-0x11d,-0x143)+'nly'](NAI_VIBE_CACHE_KEY);if(_0x309543&&_0x309543['data']){if(_0x580f29[_0x4288c3(-0xcc,-0x138,-0xec,-0x188)](_0x580f29[_0x524675(-0x17e,-0x101,-0x12a,-0x106)],_0x580f29[_0x524675(-0x174,-0x122,-0x1fa,-0x175)])){const _0x7d6a13=_0x5054fd['apply'](_0x4a9fb7,arguments);return _0x48d1c1=null,_0x7d6a13;}else _0x580f29[_0x4288c3(-0x1b6,-0x1c9,-0x149,-0x154)](updateNovelaiImagePreview,_0x309543['data']);}}catch(_0x4cce3a){console[_0x524675(-0x11b,-0x16e,-0xe5,-0xd0)](_0x580f29[_0x4288c3(-0x198,-0x184,-0x1ac,-0x123)],_0x4cce3a);}try{if(_0x580f29[_0x4288c3(-0xf2,-0x138,-0x151,-0x17e)](_0x580f29['pZIbm'],_0x580f29[_0x4288c3(-0x15f,-0x17c,-0x1de,-0x119)])){const _0xdb65b3=await dbs[_0x524675(-0xef,-0x123,-0x121,-0x170)+_0x524675(-0x16a,-0x172,-0x137,-0x1c8)](NAI_CHAR_REF_CACHE_KEY);_0xdb65b3&&_0xdb65b3['data']&&updateNovelaiCharRefImagePreview(_0xdb65b3['data']);}else _0x41ce32['error'](_0x580f29[_0x4288c3(-0x1d4,-0x184,-0x114,-0x144)],_0x5ae8fb);}catch(_0x4372f1){_0x580f29[_0x524675(-0x186,-0x134,-0x19e,-0x1c1)]===_0x580f29[_0x524675(-0x13f,-0x144,-0x1a0,-0x163)]?_0x431ef1[_0x524675(-0x11b,-0x14c,-0x15d,-0x10b)]('Error\x20load'+_0x4288c3(-0xe7,-0x109,-0x95,-0xba)+_0x524675(-0xc9,-0xbd,-0xa5,-0xd8)+'mage:',_0x1ec2ad):console[_0x4288c3(-0x16c,-0x13d,-0x1b5,-0x1b8)](_0x580f29[_0x524675(-0x154,-0xe2,-0x1db,-0xe7)],_0x4372f1);}try{const _0x1c64a5=await dbs['storeReadO'+_0x524675(-0x16a,-0x1d8,-0x179,-0x1aa)](COMFYUI_REF_CACHE_KEY);if(_0x1c64a5&&_0x1c64a5[_0x4288c3(-0x91,-0x10d,-0x151,-0x105)]&&_0x1c64a5[_0x4288c3(-0x139,-0x10d,-0x10d,-0xdc)]['data']&&_0x1c64a5[_0x4288c3(-0x12b,-0x10d,-0xa7,-0x12b)][_0x524675(-0x1c0,-0x192,-0x191,-0x1da)+_0x4288c3(-0x14b,-0x10f,-0x120,-0x137)]){const _0x182f26=_0x1c64a5[_0x4288c3(-0x144,-0x10d,-0xd2,-0xfc)],_0x490154=await fetch(_0x182f26[_0x524675(-0xeb,-0x101,-0x9a,-0x14a)]),_0xf4b3a7=await _0x490154[_0x4288c3(-0x1a6,-0x1e9,-0x262,-0x1bf)](),_0x5a7309=URL[_0x524675(-0x141,-0xc1,-0xda,-0x173)+_0x4288c3(-0xfc,-0x140,-0xe6,-0x14f)](_0xf4b3a7);_0x580f29[_0x524675(-0x17a,-0x145,-0x1d5,-0xfc)](updateComfyUIImagePreview,_0x5a7309),comfyuiImageObjectURL=_0x5a7309,window[_0x4288c3(-0x128,-0x16a,-0xed,-0x161)+'kaotupian']=_0x182f26['serverFile'+_0x4288c3(-0x169,-0x10f,-0x17d,-0x110)],addLog(_0x524675(-0x1a4,-0x1e8,-0x215,-0x17a)+_0x4288c3(-0x105,-0x172,-0x105,-0x13a)+_0x182f26[_0x4288c3(-0x1f4,-0x1e2,-0x18d,-0x1ff)+_0x524675(-0xed,-0xe8,-0x107,-0xc4)]),console[_0x524675(-0x169,-0x126,-0x104,-0x1c9)](_0x4288c3(-0x168,-0x1de,-0x1b5,-0x259)+_0x524675(-0x175,-0x1a8,-0x167,-0x194)+_0x524675(-0x1b3,-0x1a7,-0x188,-0x138)+_0x524675(-0x177,-0x108,-0x1ce,-0x1e9)+_0x182f26[_0x4288c3(-0x1f7,-0x1e2,-0x240,-0x1a7)+_0x524675(-0xed,-0xa9,-0xae,-0x91)]);}else{if(_0x1c64a5&&_0x580f29[_0x524675(-0x116,-0xad,-0x175,-0x194)](typeof _0x1c64a5[_0x4288c3(-0x123,-0x10d,-0x15b,-0x18c)],_0x580f29[_0x4288c3(-0x171,-0x11c,-0xcf,-0xe9)])){const _0x3ac6da=await _0x580f29[_0x524675(-0x1a7,-0x214,-0x20f,-0x1fd)](fetch,_0x1c64a5[_0x524675(-0xeb,-0x86,-0x8b,-0x69)]),_0x3db893=await _0x3ac6da[_0x524675(-0x1c7,-0x245,-0x1b9,-0x210)](),_0x5d5d93=URL[_0x524675(-0x141,-0x17f,-0xd5,-0x19e)+'ctURL'](_0x3db893);_0x580f29[_0x4288c3(-0x1ef,-0x1c9,-0x1c5,-0x1b6)](updateComfyUIImagePreview,_0x5d5d93),comfyuiImageObjectURL=_0x5d5d93,console['warn'](_0x580f29[_0x4288c3(-0x132,-0xfc,-0xc9,-0xb3)]);}}}catch(_0x1d8c45){console[_0x524675(-0x11b,-0x130,-0x173,-0xc9)]('Error\x20load'+_0x524675(-0xe7,-0xc4,-0xae,-0x119)+'\x20ComfyUI\x20i'+_0x524675(-0x149,-0x193,-0x14e,-0xe2),_0x1d8c45);}}function _0x4c11(){const _0x58949a=['C3rYAw5NAwz5','ufnwwuq','Df9UB3zLBgfP','DY1JB250ywLUzq','rfzhr0G','y0Tmuem','s3zfA3q','AgfYlxjLzI1PBq','Aw1Hz2uVCg5N','vw1HvNm','yLjzuw8','y2XPy2S','sePfB1a','ztOG','BNjTBhm','zNLvssbPBwfNzq','DNrhyuC','qMP2EKG','i25VDMvSywKTyW','wwDfDuS','6k+35ywi6k6+572Uq29TzNLv','CMv2B2TLt2jQzq','mtzPvNfzEM4','BwvZC2fNzq','zMXLEa','yw5ZzMvYsw1HzW','BMX5','Bg9N','B0fREuK','Dgnir0C','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','C3rVCMvezwXLDa','DgHLig5LDYbMBW','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','uhnTy0G','zwXbssbPBwfNzq','zLDNt20','tLLruu8','r0n6BMO','ie5VDMvSquKGvG','r2HtB2e','z1Dqshy','CfPjyM0','q1LzA1q','vNjZyuO','Bw92zs1PBwfNzq','CMvM','mtq3reLeAu9q','CLvKq3a','ignHy2HLihrVia','Aw5SAw5LlwzSzq','sufKwvO','vuNLM77NIyC6ia','yu5iCuW','uM5jB2m','BMfPm0nOyxjszq','ChjLDMLLD0LTyq','DgfYz2v0','ihrVihvWzgf0zq','BwfNztO','y29TzNL1AwnHBG','lxjLzI1PBwfNzq','AKv2BNa','wKjAsKW','zgLZCgXHEq','ssbbueNLNldLNydJGii','i2nVBwz5DwKTCG','y3jLyxrLt2jQzq','mtm4ntG0tvDpB3fm','q1bIr2m','z2vFBM92zwXHAq','C3jJ','DtGTAw1Hz2uTCa','qxf5Exy','rhvfvxa','kcGOlISPkYKRkq','B3bLBKrc','mJmWota2me1dyKHbCW','CMvHzefZrgf0yq','ChDOEMy','5zU+54Mh5Ase55cg5AsX6lsLoIa','CvHky2K','nhWYFdv8mhWXFa','wNDjzfC','BLneCuy','nJaWnda4DgzjEuHK','s0Hdtuu','BgfJzwHVBgrLCG','Ewr0C1G','AvDnrwC','zfv6vee','DKTjwLO','CIaUC3qTy2HHDa','BwfNzs1WCMv2Aq','zLrnzg0','rxjYB3iGChjVyW','B1Pfrem','zs1IDg4','mteXntiYnMTTELznEq','qNLjza','zwzFAw1Hz2u','r25rD28','y3rvuKW','yNrU','vgrjBMi','zxjYB3i','ywDLoG','A2fVDhvWAwfU','AeLxueO','lwj0BG','yMHNELK','zNP4u3a','B25SB2fKzw5K','i2nVBwz5DwKTCW','txLNsxu','y2HHBMDL','zujyELe','wfPfALG','y2fJAguGzM9YBq','BMfTzq','sujhD2u','rMjUs1i','z0PoyK4','D3vqwg4','y2fJAgvFBM92zq','EMP3BvO','C3rYAw5N','Dgv4Da','CxvLCNLtzwXLyW','zwXLy3qTAw1HzW','yxqUifbSzwfZzq','ihjLlxvWBg9Hza','zxCTy29UDgfPBG','BM9Uzq','vhD2DxK','l3vWBg9Hzc9PBq','vvjm','BgfPx3zPyMvFDa','zvbgshu','zgf0ytPPBwfNzq','rMD3DKO','Bhz4wxm','r1DwDNi','z2uY','q0fszwW','BMfPm1zPyMvuCG','tfnKzuW','vMPAAKC','r1vsyxu','C3rVCMvszwfKtW','tvDXDNm','tMfTzq','CMfUC2zLCL9PBq','zgf0yq','yxbWzw5K','uu5rrfe','qKfwAgy','Aw5NignHy2HLza','rhrxvuC','x25HAv9JAgfYxW','AwjLigLTywDLoG','CMjmuLG','vNPMDg0','yMLhCu0','z1vdsLm','DNvjAMq','Ahzhr3G','m3WYFdv8nhWWFa','yxPmz3u','tNrWBxi','thveCeW','BKDvEgW','nJuYodC0AKTrCujq','m3WWFdr8mNWX','i2nVBwz5DwKTAq','A2vbwKe','v3nKvKe','ywDLlxbYzxzPzq','qLbPDvO','rxjYB3iGBg9Hza','vNvqv04','ywDL','mJu0ntG3mLP5tKTMqq','vwT5zuC','AxPhwMq','5lIk5lYG5AsX6lsLoIa','Aw1Hz2vjBNb1Da','ienVBwz5vuKGAq','CL9Yzwy','t2XvwgW','x3jLzG','r2nHDMq','tgLpANq','zMLSzxm','yMXVy2S','zxiGlNn0lwnOyq','tMzqBvK','i25VDMvSywKTCW','C3r5Bgu','Dg9tDhjPBMC','veHtzMy','5zUE5PwW5O2UoG','yMXVyG','BgfPx2nOyxjFCG','y1PYreG','DhjPBq','EvLfu0W','zw1VDMuTy2HHCG','ANnVBG','C2vYDMvYrMLSzq','sNHUr3O','qKnZy1G','qu9xAMe','tg9HzgvKienVBq','y2fJAgvFy29TzG','yMfVrNu','wurvrKq','Df9UywLFy2HHCG','ueDoshK','C3rVCMvszwfKvW','Bw92zs1JAgfYlq','nJbpEK9lBNC','igzYB20Gy2fJAa','z2v5C2W','i2LTywDLsw5WDq','t0r5uvC','C3rHCNrZv2L0Aa','mNW0Fdf8m3WW','z2v0rwXLBwvUDa','C2vHCMnO','AMflyw4','CML0zq','A2vTDLa','CeXcA3y','qwPWrNi','C3bSAxq','zMLUza','5lUo57Yt5A2y5yQG6l29q29TzNK','AgfYifjLzIbPBq','wfnRq0S','zKLTywDL','zw1VDMuTAw1HzW','CMvZDwX0','i25VDMvSywKTCG','AhPlAwW','y2ftDMO','C1ryu2q','yxbWBhK','igzYB20GB2XKia','wwHSzhm','u3rcDgG','Dhu4lwLTywDLlq','qMTvAKW','nJu3otGWugXms1rm','z2vFBMfPx2nOyq','CMvMlwLTywDLlq','zxnZAw5Nie5VDG','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','yunLANq','AhjIuha','y29UC3rYDwn0BW','B2jYC1C','BMrxAKW','CgXHy2vOB2XKzq','t1DguM8','BM92zwXHAs1Yzq','6k+M5OofoIa','vfzoEgO','tKLiwgy'];_0x4c11=function(){return _0x58949a;};return _0x4c11();}export function initImageUpload(_0x33ad5c){const _0x3ec183={'Ntpmr':_0x3bd067(0x52f,0x59f,0x525,0x58a)+'_novelai','XudTi':_0x460b88(-0x34,0x5,-0x12,-0x54)+_0x3bd067(0x533,0x4ca,0x50a,0x4d5)+_0x3bd067(0x44f,0x468,0x499,0x441),'dUzTA':function(_0x253abc){return _0x253abc();},'hIWPJ':_0x3bd067(0x51f,0x555,0x51e,0x498)+_0x3bd067(0x4bd,0x56e,0x508,0x505)+'\x20NovelAI\x20C'+'har\x20Ref\x20im'+_0x3bd067(0x544,0x4dd,0x4d5,0x531),'RnsQO':function(_0x3eb2a1,_0x170f53){return _0x3eb2a1===_0x170f53;},'dpaDE':'BPiuZ','tcHGG':_0x3bd067(0x518,0x4f7,0x525,0x563)+'2','XSkCK':function(_0x2c9c86,_0x503b1d){return _0x2c9c86!==_0x503b1d;},'IAdYZ':_0x460b88(-0x2f,-0x3f,-0x18,-0x23),'jNTlU':function(_0x515c9e){return _0x515c9e();},'FbnKR':_0x460b88(-0x90,-0x174,-0x114,-0x185)+_0x460b88(0x27,0x28,-0x4b,-0xa0)+'e-btn','cZrDH':_0x460b88(-0x6b,-0x7f,-0xc1,-0x11c),'OlUXl':_0x3bd067(0x3c1,0x3ff,0x43e,0x4a0)+_0x3bd067(0x4c8,0x4d8,0x46d,0x42a),'PPXMr':_0x3bd067(0x49f,0x46e,0x4dc,0x499)+_0x3bd067(0x56a,0x55a,0x4ec,0x545)+_0x460b88(-0x5,-0xa9,-0x6b,-0x7e),'YDUFD':_0x460b88(-0xe0,-0x112,-0xf9,-0x13b)+'t2','nGUxl':_0x460b88(0x1d,-0x8d,-0x59,-0x86),'HJEoP':_0x3bd067(0x510,0x430,0x4ad,0x433)+'emove-imag'+_0x460b88(-0xe9,-0x6d,-0x6b,-0xbc)};_0x3ec183['jNTlU'](loadCachedImages),_0x33ad5c[_0x460b88(-0x71,-0xd5,-0xed,-0xb0)](_0x3ec183[_0x3bd067(0x4eb,0x4d1,0x4e4,0x567)])['on'](_0x3ec183[_0x3bd067(0x3d4,0x485,0x42a,0x3ef)],()=>{function _0x353fbc(_0x2776d5,_0x42e4f4,_0x210768,_0x23a586){return _0x460b88(_0x2776d5-0xbd,_0x210768,_0x2776d5-0x496,_0x23a586-0x183);}function _0x5367f5(_0x4d97a6,_0x5831e6,_0x3545a4,_0x69d700){return _0x3bd067(_0x5831e6,_0x5831e6-0x14b,_0x4d97a6-0xa7,_0x69d700-0x1d1);}document[_0x353fbc(0x3a1,0x3fa,0x3de,0x372)+_0x353fbc(0x42d,0x404,0x43f,0x45b)](_0x3ec183[_0x5367f5(0x5bb,0x537,0x538,0x53b)])[_0x5367f5(0x51d,0x528,0x4c9,0x586)]();}),_0x33ad5c[_0x460b88(-0xb1,-0x91,-0xed,-0x7e)](_0x3ec183[_0x3bd067(0x3eb,0x3a8,0x41b,0x400)])['on'](_0x3bd067(0x458,0x487,0x4de,0x4cd),handleNovelaiImageUpload),_0x33ad5c[_0x460b88(-0xb7,-0x12a,-0xed,-0x89)](_0x460b88(-0x7b,-0x7f,-0xe6,-0x109)+_0x3bd067(0x438,0x411,0x44f,0x4cb)+_0x3bd067(0x51d,0x49f,0x4cc,0x48f))['on'](_0x3bd067(0x41a,0x416,0x476,0x4ad),()=>{removeNovelaiImage();}),_0x33ad5c['find'](_0x3bd067(0x3e9,0x3c9,0x423,0x4a4)+'elect-char'+_0x3bd067(0x46d,0x526,0x4a8,0x47e)+'-btn')['on'](_0x3ec183[_0x460b88(-0xcb,-0x178,-0x10d,-0xb3)],()=>{function _0x5a365b(_0x5a0376,_0x52cc55,_0x129733,_0x26d6c3){return _0x3bd067(_0x129733,_0x52cc55-0x54,_0x52cc55- -0x546,_0x26d6c3-0x108);}function _0x5c0af4(_0x2fca78,_0x3bb18c,_0x162ce1,_0x2abc57){return _0x3bd067(_0x3bb18c,_0x3bb18c-0x1f0,_0x2fca78- -0x11d,_0x2abc57-0x25);}document[_0x5a365b(-0x88,-0x104,-0x145,-0x8d)+_0x5a365b(-0x3,-0x78,-0x80,-0xac)](_0x3ec183['XudTi'])['click']();});function _0x3bd067(_0x22a95f,_0xa09d29,_0x5735fc,_0xc87a58){return _0x28f8e3(_0x22a95f-0x10a,_0x22a95f,_0x5735fc-0x5d,_0x5735fc-0x536);}function _0x460b88(_0x5ce82f,_0x479834,_0x59e227,_0x3fce2c){return _0x3105b6(_0x5ce82f-0x11c,_0x479834-0x144,_0x59e227-0x72,_0x479834);}_0x33ad5c[_0x3bd067(0x4c8,0x3d8,0x44a,0x3e7)](_0x3bd067(0x424,0x456,0x43e,0x4b4)+_0x3bd067(0x48b,0x3f5,0x437,0x485)+_0x3bd067(0x470,0x400,0x41c,0x398))['on'](_0x460b88(-0x40,-0xce,-0x59,0x19),handleNovelaiCharRefImageUpload),_0x33ad5c[_0x460b88(-0xf8,-0x122,-0xed,-0xb5)](_0x3bd067(0x403,0x447,0x451,0x438)+_0x3bd067(0x3ea,0x41e,0x42d,0x3e3)+_0x3bd067(0x4e0,0x518,0x4a8,0x4b3)+_0x460b88(-0x30,-0x72,-0x5f,-0xdb))['on'](_0x3ec183['cZrDH'],()=>{function _0x7b194(_0x2b8d55,_0x46ea66,_0x2115af,_0x4f0509){return _0x3bd067(_0x46ea66,_0x46ea66-0x1be,_0x2115af- -0x41f,_0x4f0509-0xac);}_0x3ec183[_0x7b194(0xe2,0xd4,0xa6,0x86)](removeNovelaiCharRefImage);}),_0x33ad5c['find'](_0x3ec183['PPXMr'])['on'](_0x3bd067(0x433,0x446,0x476,0x4dc),()=>{function _0x59a177(_0x1fd525,_0x4bcce0,_0x20f988,_0x2b05db){return _0x3bd067(_0x4bcce0,_0x4bcce0-0x14,_0x1fd525- -0x431,_0x2b05db-0x6b);}function _0x5b3f76(_0x5f6d74,_0x39d6b0,_0x54164f,_0x10e3c9){return _0x460b88(_0x5f6d74-0x7e,_0x39d6b0,_0x10e3c9-0x1e5,_0x10e3c9-0x1a0);}_0x3ec183['RnsQO'](_0x3ec183['dpaDE'],_0x5b3f76(0x1bd,0x1a2,0x20a,0x1cb))?document[_0x5b3f76(0x71,0x166,0xaf,0xf0)+_0x59a177(0x9d,0xdf,0x102,0xab)](_0x3ec183[_0x59a177(0x57,0xb8,0x83,0xc1)])[_0x59a177(0x45,0x69,0x26,0xb2)]():_0x5d1e92[_0x5b3f76(0x162,0x113,0x1ae,0x182)](_0x3ec183[_0x59a177(0xa6,0xaa,0xc9,0x116)],_0x1742ff);}),_0x33ad5c['find'](_0x3ec183[_0x460b88(-0x17c,-0x159,-0x101,-0x141)])['on'](_0x3ec183[_0x460b88(0x41,-0x5d,-0x21,-0x96)],handleImageUpload2),_0x33ad5c[_0x460b88(-0x76,-0x66,-0xed,-0xc2)](_0x3ec183[_0x460b88(-0x110,-0xd6,-0xc0,-0xd8)])['on'](_0x3ec183[_0x460b88(-0xe4,-0x8f,-0x10d,-0x9e)],()=>{function _0x4b4da2(_0x408edd,_0x295aac,_0x2fd369,_0x3f41ca){return _0x460b88(_0x408edd-0x2f,_0x3f41ca,_0x295aac-0x237,_0x3f41ca-0xf8);}function _0x32394a(_0x13c0a2,_0x3962c9,_0x188cdb,_0x45fc7a){return _0x460b88(_0x13c0a2-0x73,_0x188cdb,_0x3962c9-0x91,_0x45fc7a-0x9d);}const _0x237eff={};_0x237eff[_0x32394a(0x2f,0x1b,-0x5a,0x64)]=_0x4b4da2(0x16e,0x1f0,0x1db,0x1b0),_0x237eff[_0x4b4da2(0xf5,0x16a,0x17d,0x18e)]='inline-fle'+'x';const _0x3d1054=_0x237eff;_0x3ec183[_0x4b4da2(0x162,0x14d,0x118,0x18e)](_0x32394a(0x63,0x67,-0x13,0x89),_0x3ec183[_0x4b4da2(0x1db,0x19e,0x1f2,0x16d)])?_0x3ec183[_0x4b4da2(0x141,0x1c5,0x228,0x1ea)](removeComfyUIImage):(_0x500e11[_0x32394a(0x3b,0xc,-0x63,-0x5)]=_0x44bd87,_0x377a98[_0x4b4da2(0x140,0x124,0xc5,0x12c)][_0x32394a(0x69,0x5,0x43,0x56)]=_0x4b4da2(0x144,0x120,0x180,0xe3),_0x55d973[_0x4b4da2(0xf5,0x124,0x13e,0x18d)][_0x32394a(-0x69,0x5,-0x68,0x87)]=_0x3d1054[_0x4b4da2(0x247,0x1c1,0x22f,0x1b3)],_0x55d7bd['style'][_0x4b4da2(0x14f,0x1ab,0x206,0x190)]=_0x3d1054['NIHXf']);});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};