function _0x360a(){const _0x44ef43=['mxW0Fdn8mNWW','zfHyBNy','mtiYng1vrfPTwa','zwXLy3qTAw1HzW','tMfTzq','A2fVDhvWAwfU','DgHLig5LDYbMBW','twXWAxG','i25VDMvSywKTAq','r1LiC1C','C2TYugq','i2nVBwz5DwKTAq','zgf0yq','uxb5DKS','AwjLigLTywDLoG','zgf0ytPPBwfNzq','Dg9Y','zwXbssbJAgfYia','Aw5NignHy2HLza','y3r4yM8','z1vQvfa','tvPSBvC','q25VAuu','Dhjzt3u','C3jJ','i2nVBwz5DwKTCG','A0vwAvK','nxW0Fdb8m3WXFa','zwP4BLm','ztOG','zMLUza','zMPVAwy','txnUDu0','B2rhqxq','yM9KEq','v0DYyNK','ChjLDMLLD0LTyq','rMrJrLm','zxnZAw5Nie5VDG','ANnVBG','B3rbD3a','rvj2A20','CIaUC3qTy2HHDa','ie5VDMvSquKGqW','i25VDMvSywKTCG','C3rVCMvszwfKvW','C2L5DMe','s1bOEfy','DgfYz2v0','BgfPx2nOyxjFCG','CMvM','AgfYifjLzIbPBq','Bg9N','y2HHBMDL','tg1Or2S','ndjMEePbvxy','B0XIuxq','ihjLlxvWBg9Hza','y2fJAguGzM9YBq','rNLqC1G','B3brB0m','vwDZD3q','C3bSAxq','nxW0Fdn8mxWYFa','ANHhs0O','shL4svC','BMnODKC','C3r5Bgu','y09uyuq','DLvuzee','C2vYDMvYrMLSzq','DhP3yvu','BfrSv1e','tg9HzgvKienVBq','lxjLzI1PBwfNzq','BvvYte8','rgP5wxC','Aw5SAw5LlwzSzq','A1vuEMq','C3rYAw5N','z2nYuNa','DY1JB250ywLUzq','q0zhDNG','r1vgrg8','BMfPm1zPyMvuCG','mxWWFdn8nhWY','CMvZDwX0','yxqUifbSzwfZzq','CM1HDc4','sLvfzwG','Cer5Cfe','i25VDMvSywKTCW','tvPUqNO','v1zbvvy','BMX5','C3rVCMvezwXLDa','CMvHzefZrgf0yq','mte0mtqZn2Xwy01Vsa','s3HfyNy','zwXbssbPBwfNzq','rxjYB3iGBg9Hza','5zU+54Mh5Ase55cg5AsX6lsLoIa','Eg1Iuu0','zK51Cge','C3rVCMvszwfKtW','6zsz6k+V6k+M5OofoG','ExvPx3jLzL9PBq','qxzKuhO','vKfkzgK','AeHjEM8','zMLSzxm','yMXVyG','CML0zq','r2DICve','C3rHCNrZv2L0Aa','sfLlA0e','Df9UB3zLBgfP','zxiGlNn0lwnOyq','qxvIANy','x25HAv9JAgfYxW','vwf0v1i','CNDuu1K','zuL0C0W','qwnzBxy','vvjm','5lUo57Yt5A2y5yQG6l29q29TzNK','BM92zwXHAs1Yzq','mZq2nfz4CxfOrq','CMvMigLTywDLoG','t0fSu0q','Aw1Hz2vjBNb1Da','qNLjza','B25SB2fKzw5K','CL9Yzwy','Dg9tDhjPBMC','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','ywDLoG','y29UC3rYDwn0BW','t0Pbwui','BwvZC2fNzq','zw1VDMuTAw1HzW','wKvprgS','y2fJAgvFBM92zq','i25VDMvSywKTyW','v2nNthm','nJiXnZiWDxvOzK9v','C2vHCMnO','yMXVy2S','zMXLEa','yNrU','su1TyKq','y2DLDwy','BMfTzq','C3DqCK8','y3jLyxrLt2jQzq','5zMO6l+u5zUE5PwW5O2UoIa','zvbsAu0','rMTmyLe','wgLxvem','rePJtxO','ienVBwz5vuKGAq','yxbWBhK','wu1OueK','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','x3jLzG','mtbHD2DTshe','Dhu4lwLTywDLlq','tePdEuy','CxvLCNLtzwXLyW','s1vRshO','zs1IDg4','ELbiqMK','s1zkq0G','BwfNztO','zw1VDMuTy2HHCG','CMv2B2TLt2jQzq','yw5ZzMvYsw1HzW','s3rkqum','5zUE5PwW5O2UoG','u1btD1e','y2fJAgvFy29TzG','mtu2ntK2nuPsv3zYDG','yxbWzw5K','AfjJsfu','AwLdrNO','6k+M5OofoIa','vw9Xq0K','mta5mJzjA2fOA1K','igzYB20Gy2fJAa','y2XPy2S','Bw92zs1JAgfYlq','Aun2s2y','yMXVyJO','ywDL','q29NuMC','swjSEfq','Cxz5wwe','Dgv4Da','AuPNELm','z2vFBM92zwXHAq','BwfNzs1WCMv2Aq','vgfxz1e','yuXJv20','z2v0rwXLBwvUDa','ue9tva','zgLZCgXHEq','txjquuq','Bwv0Ag9K','5lIk5lYG5AsX6lsLoIa','rwLwq3O','v1DYqNG','AwP6zLm','ALbgEwC','Avj6CLq','q1jdsNG','yLjyBMG','DevLrM0','kcGOlISPkYKRkq','qu5HteK','lwj0BG','BMfPm0nOyxjszq','qNbRELK','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','uvnrr28','BgfPx3zPyMvFDa','Bw92zs1PBwfNzq','z2uY','nZu4nZzOwLfcAfK','mhWXFdn8nhWY','shPQwfi','ndCZmJnTuwnqtg8','y29TzNL1AwnHBG','uvflzw0','DgzcBwi','ignHy2HLihrVia','CMfUC2zLCL9PBq','qKHmy3i','rxjYB3iGChjVyW','y29TzNL1AvvYBa','Bu1RCKW','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','qwLuCgG','i2LTywDLsw5WDq','tMzLyuy','zxCTy29UDgfPBG','zxjYB3i','BM9Uzq','AuT3Axm','y3rvuKW','i2nVBwz5DwKTCW','B0znu2y','x25VDMvSywK','B3bLBKrc','EePXse8','mJeYofPXALvbqq','CgXHy2vOB2XKzq'];_0x360a=function(){return _0x44ef43;};return _0x360a();}(function(_0x50063a,_0xc739aa){const _0x12d1e1=_0x50063a();function _0x639778(_0x278e45,_0x2fba4c,_0x44db24,_0x5a7829){return _0x4c3d(_0x278e45-0x3db,_0x5a7829);}function _0xe6a03d(_0x49ef5c,_0x207251,_0x586c3a,_0x175ffa){return _0x4c3d(_0x207251-0x43,_0x586c3a);}while(!![]){try{const _0x31bb2c=-parseInt(_0xe6a03d(0x1bb,0x1ed,0x237,0x18e))/(-0xd*-0x19f+0x1c3d+-0x314f)+-parseInt(_0x639778(0x530,0x58c,0x4bc,0x4da))/(0x1e1f+0x339*0x5+-0x2e3a)+-parseInt(_0xe6a03d(0x1e5,0x23e,0x22c,0x1ed))/(0x111e*0x1+-0x4*0x488+0x105)*(-parseInt(_0x639778(0x582,0x512,0x542,0x507))/(0x2040+0x1f42+-0x3*0x152a))+-parseInt(_0xe6a03d(0x170,0x1bc,0x158,0x178))/(-0x1f44+0x2*-0xd0d+0x3*0x1321)+parseInt(_0x639778(0x5a1,0x5fc,0x5ac,0x5f7))/(0x5ba+-0x630+0x7c)*(parseInt(_0xe6a03d(0x19f,0x205,0x1e0,0x1a7))/(-0x495+0x452*-0x1+-0x17d*-0x6))+-parseInt(_0xe6a03d(0x198,0x186,0x1b4,0x1be))/(-0x469*-0x7+-0x9*-0x1dd+-0x2f9c)*(-parseInt(_0xe6a03d(0x1ed,0x1c2,0x1df,0x216))/(0x578+0x365+-0x1*0x8d4))+parseInt(_0x639778(0x544,0x5b7,0x546,0x4ca))/(-0x2623+-0x3fe+-0x86f*-0x5)*(parseInt(_0xe6a03d(0x28b,0x268,0x267,0x280))/(0x6b*-0x3+0x2607+0x1*-0x24bb));if(_0x31bb2c===_0xc739aa)break;else _0x12d1e1['push'](_0x12d1e1['shift']());}catch(_0x5142fc){_0x12d1e1['push'](_0x12d1e1['shift']());}}}(_0x360a,-0x47736+-0x1e655+0xab94e));const _0x383501=(function(){const _0x44702c={};_0x44702c[_0x8d1380(-0x20c,-0x18a,-0x1b0,-0x1af)]=_0xad6b86(-0x7a,-0x2,0x2f,0x0),_0x44702c['hHIzo']=_0xad6b86(-0x1e,-0x5f,-0xc7,0x2);function _0x8d1380(_0x4717da,_0x762587,_0x58b23f,_0x3e63d6){return _0x4c3d(_0x58b23f- -0x3d0,_0x762587);}_0x44702c[_0x8d1380(-0x194,-0x254,-0x1f8,-0x21b)]=_0xad6b86(-0xb8,-0xc1,-0xc3,-0x122),_0x44702c[_0xad6b86(-0xc3,-0xc5,-0xaf,-0x97)]=function(_0x473c60,_0x5689bc){return _0x473c60===_0x5689bc;},_0x44702c[_0xad6b86(-0x94,-0xa9,-0x99,-0x9b)]='nchvG';const _0x54aeeb=_0x44702c;let _0x3f8a94=!![];function _0xad6b86(_0xe284f6,_0x5e0413,_0x4d65cf,_0x50b6eb){return _0x4c3d(_0x5e0413- -0x219,_0xe284f6);}return function(_0xc20a87,_0x5bdcb4){const _0x2b26ec={};_0x2b26ec[_0x411ead(0x4d0,0x50f,0x511,0x490)]=_0x59b8da(0xd5,0xd8,0x152,0x66)+'0',_0x2b26ec[_0x411ead(0x4ec,0x46d,0x51e,0x53c)]=_0x54aeeb[_0x59b8da(0x3,-0x27,0x47,0x25)];function _0x59b8da(_0x167197,_0x21a888,_0x3b6f10,_0x40030c){return _0x8d1380(_0x167197-0xdc,_0x3b6f10,_0x167197-0x2a2,_0x40030c-0x60);}_0x2b26ec['UWDzY']=_0x54aeeb[_0x411ead(0x54d,0x5bc,0x4ef,0x515)];const _0x2c61b9=_0x2b26ec;function _0x411ead(_0x47214c,_0x173928,_0x3b9716,_0xb5cb39){return _0x8d1380(_0x47214c-0x18e,_0xb5cb39,_0x47214c-0x745,_0xb5cb39-0x1d);}if(_0x54aeeb[_0x411ead(0x4c9,0x536,0x53b,0x517)](_0x54aeeb[_0x59b8da(0x42,-0x22,0x18,0x5)],_0x411ead(0x57b,0x597,0x569,0x54f))){const _0x5bebba=_0x3f8a94?function(){function _0x1aa08d(_0x52216d,_0x14bb6f,_0x3955ec,_0x1f263d){return _0x411ead(_0x3955ec- -0x733,_0x14bb6f-0x12f,_0x3955ec-0xba,_0x52216d);}function _0x576938(_0x2008e7,_0x4f1fa5,_0x27e616,_0x1fc0c2){return _0x411ead(_0x4f1fa5- -0x708,_0x4f1fa5-0x8d,_0x27e616-0xa1,_0x27e616);}if(_0x54aeeb[_0x1aa08d(-0x147,-0x122,-0x19e,-0x133)]!==_0x54aeeb[_0x1aa08d(-0x11e,-0x1a9,-0x19e,-0x14d)]){const _0x5e1058=_0x2c61b9[_0x576938(-0x1db,-0x238,-0x210,-0x1ee)]['split']('|');let _0x52ed3b=-0x1855+0xfe7+0x53*0x1a;while(!![]){switch(_0x5e1058[_0x52ed3b++]){case'0':_0x343cda=null;continue;case'1':_0x42f485['style'][_0x1aa08d(-0x260,-0x270,-0x22d,-0x1d4)]=_0x2c61b9['SPSwQ'];continue;case'2':_0x3d96da[_0x1aa08d(-0x27e,-0x247,-0x213,-0x207)+_0x1aa08d(-0x1c9,-0x1e1,-0x1f5,-0x1f5)]=null;continue;case'3':_0x666c8a[_0x1aa08d(-0x1de,-0x1c9,-0x1b7,-0x1a5)][_0x576938(-0x18e,-0x202,-0x1e8,-0x205)]=_0x2c61b9['UWDzY'];continue;case'4':_0x595ed9[_0x576938(-0x114,-0x18c,-0x18c,-0x1da)][_0x1aa08d(-0x1ec,-0x28c,-0x22d,-0x25d)]=_0x576938(-0x1a7,-0x1d9,-0x22e,-0x1f9);continue;case'5':_0xf2f136[_0x576938(-0x142,-0x1b7,-0x1ad,-0x15b)]='';continue;}break;}}else{if(_0x5bdcb4){const _0x203bb7=_0x5bdcb4[_0x1aa08d(-0x1ef,-0x235,-0x259,-0x256)](_0xc20a87,arguments);return _0x5bdcb4=null,_0x203bb7;}}}:function(){};return _0x3f8a94=![],_0x5bebba;}else{const _0x2550e8=_0x1de7b0['result'],_0x476433={};_0x476433['data']=_0x2550e8,_0x476433['serverFile'+_0x411ead(0x53d,0x53d,0x4db,0x52a)]=_0x40267e[_0x411ead(0x4d1,0x452,0x4e6,0x4f4)];const _0x2329e4=_0x476433,_0x972b94={};_0x972b94['id']=_0x3a68e9,_0x972b94['data']=_0x2329e4,_0x522a17[_0x411ead(0x566,0x538,0x59e,0x596)+_0x411ead(0x4a9,0x4a2,0x464,0x4d5)](_0x972b94);}};}());function _0x869831(_0x10f975,_0x1e41dc,_0x19b354,_0x1913a2){return _0x4c3d(_0x10f975- -0x189,_0x1e41dc);}const _0x11a440=_0x383501(this,function(){function _0x48d08e(_0x1ae17d,_0x5c78a4,_0xffd1b1,_0x241f4b){return _0x4c3d(_0x1ae17d- -0x1e6,_0x241f4b);}const _0x159430={};_0x159430[_0x2c2ae3(-0x222,-0x20d,-0x1d1,-0x1eb)]='(((.+)+)+)'+'+$';const _0x24edae=_0x159430;function _0x2c2ae3(_0x1e73f6,_0x4f1f7a,_0x4b40d6,_0x4bb0bd){return _0x4c3d(_0x4bb0bd- -0x385,_0x4f1f7a);}return _0x11a440['toString']()[_0x2c2ae3(-0x1d4,-0x230,-0x270,-0x22f)](_0x24edae[_0x2c2ae3(-0x1a7,-0x24e,-0x251,-0x1eb)])[_0x2c2ae3(-0x201,-0x263,-0x20d,-0x23b)]()[_0x2c2ae3(-0x1d7,-0x1d2,-0x277,-0x238)+'r'](_0x11a440)[_0x2c2ae3(-0x1b6,-0x254,-0x28f,-0x22f)](_0x24edae['CRCJx']);});_0x11a440();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';function _0x4c3d(_0x1032f6,_0x3f3205){_0x1032f6=_0x1032f6-(-0x11a+0x19ff+0x1*-0x17b9);const _0x2463a4=_0x360a();let _0x51eefd=_0x2463a4[_0x1032f6];if(_0x4c3d['WcYGVI']===undefined){var _0xef34eb=function(_0x3e738f){const _0x340dfe='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x11f1bd='',_0x113515='',_0x1943d=_0x11f1bd+_0xef34eb;for(let _0x310e45=0x5d9*0x4+0x1*0x1cd+-0x1*0x1931,_0x4f2b9d,_0x59350d,_0x5e6b08=0x29*0x9e+0x5e7*0x1+-0x1f35;_0x59350d=_0x3e738f['charAt'](_0x5e6b08++);~_0x59350d&&(_0x4f2b9d=_0x310e45%(0x1d13*0x1+-0x12f4*-0x2+-0x42f7)?_0x4f2b9d*(-0x574+-0x1e0b+0x23bf*0x1)+_0x59350d:_0x59350d,_0x310e45++%(0x1e02*-0x1+-0x118b+0x2f91))?_0x11f1bd+=_0x1943d['charCodeAt'](_0x5e6b08+(-0x1c*0x36+-0x1*0x11af+0x17a1*0x1))-(-0xa1f*-0x1+-0x107b*-0x2+-0x2b0b)!==-0x1*0x51+0x59*-0x53+-0x4*-0x74b?String['fromCharCode'](-0xac5*0x2+0xc4*0x15+0x675&_0x4f2b9d>>(-(0x1*-0xf9c+-0x5*0x5+-0x9*-0x1bf)*_0x310e45&0x46*0x5e+-0x47e+0x6*-0x388)):_0x310e45:-0x1c89+-0x2*0xa7b+0x317f){_0x59350d=_0x340dfe['indexOf'](_0x59350d);}for(let _0x599bae=-0x1*0x1032+0x9d1+0x661,_0xc4f248=_0x11f1bd['length'];_0x599bae<_0xc4f248;_0x599bae++){_0x113515+='%'+('00'+_0x11f1bd['charCodeAt'](_0x599bae)['toString'](0x184f+0xbc6+-0x2405))['slice'](-(0x1*-0xc85+0x2*-0xb2d+-0x1*-0x22e1));}return decodeURIComponent(_0x113515);};_0x4c3d['sFghqP']=_0xef34eb,_0x4c3d['NfPBqQ']={},_0x4c3d['WcYGVI']=!![];}const _0x810fb8=_0x2463a4[-0x20f0*-0x1+0x15a+-0x224a],_0x370f5e=_0x1032f6+_0x810fb8,_0x5d314a=_0x4c3d['NfPBqQ'][_0x370f5e];if(!_0x5d314a){const _0x4132b8=function(_0x1d0bc6){this['evNJkh']=_0x1d0bc6,this['HUSUmp']=[0x324+-0x23fd+0x20da,-0x73*0x17+-0xb20+0x727*0x3,-0xbae+0x9af+0x1*0x1ff],this['RfcFsJ']=function(){return'newState';},this['ACRfPi']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['cKUOAG']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4132b8['prototype']['nimRUn']=function(){const _0x520563=new RegExp(this['ACRfPi']+this['cKUOAG']),_0x359979=_0x520563['test'](this['RfcFsJ']['toString']())?--this['HUSUmp'][0x7d0+0x4d7*-0x2+0x1df]:--this['HUSUmp'][-0x680+0x655*0x5+-0x1929];return this['HBwpPL'](_0x359979);},_0x4132b8['prototype']['HBwpPL']=function(_0x2f3cbd){if(!Boolean(~_0x2f3cbd))return _0x2f3cbd;return this['ZORYit'](this['evNJkh']);},_0x4132b8['prototype']['ZORYit']=function(_0x1f5c0c){for(let _0xe9f557=-0x1d75+0x1e84+0x10f*-0x1,_0x777526=this['HUSUmp']['length'];_0xe9f557<_0x777526;_0xe9f557++){this['HUSUmp']['push'](Math['round'](Math['random']())),_0x777526=this['HUSUmp']['length'];}return _0x1f5c0c(this['HUSUmp'][0x8e2+0x25*-0x49+-0x1ab*-0x1]);},new _0x4132b8(_0x4c3d)['nimRUn'](),_0x51eefd=_0x4c3d['sFghqP'](_0x51eefd),_0x4c3d['NfPBqQ'][_0x370f5e]=_0x51eefd;}else _0x51eefd=_0x5d314a;return _0x51eefd;}import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';function _0x5d340d(_0x14a8e5,_0x2ff7fd,_0x1fadef,_0x540761){return _0x4c3d(_0x14a8e5- -0x216,_0x540761);}import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY='cache_nove'+_0x869831(0x1b,0x2d,-0x5a,0x5f)+_0x869831(0x26,-0x37,-0x1f,0x32)+'age',NAI_CHAR_REF_CACHE_KEY=_0x5d340d(-0xc4,-0x77,-0x56,-0x6a)+_0x5d340d(-0x21,-0x13,0x3a,-0x2d)+'ef_image',COMFYUI_REF_CACHE_KEY=_0x5d340d(-0x9e,-0x103,-0x40,-0x56)+_0x869831(-0x5b,-0x16,-0x91,-0x88)+_0x5d340d(-0x91,-0x2e,-0xa5,-0x109);let nai3VibeTransferImageMimeType='image/png',nai3CharRefImageMimeType='image/png',comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0x321ee9){const _0x2a7a90={};_0x2a7a90['oFMSf']='previewIma'+_0x593048(-0xa8,-0xb7,-0xdd,-0xae);function _0x593048(_0x334704,_0xe8c39a,_0x22e371,_0x50f543){return _0x869831(_0x22e371- -0xdf,_0x50f543,_0x22e371-0xc3,_0x50f543-0x14a);}_0x2a7a90[_0x593048(-0x194,-0xbc,-0x12b,-0xd8)]=_0x593048(-0x156,-0xe9,-0x126,-0xc5)+_0x593048(-0x130,-0x79,-0xc3,-0xf5)+_0x4a999c(-0x18e,-0x19f,-0x128,-0x19a),_0x2a7a90[_0x593048(-0xe4,-0x95,-0xde,-0x116)]=_0x593048(-0x24,-0x3f,-0x95,-0x64),_0x2a7a90['Aubjv']='none',_0x2a7a90[_0x4a999c(-0x117,-0xec,-0x14d,-0x9d)]=_0x593048(-0xc8,-0x1a,-0x57,-0x53)+'x',_0x2a7a90[_0x4a999c(-0x181,-0x196,-0x191,-0x1f7)]=function(_0x4ff71b,_0x47e68c){return _0x4ff71b!==_0x47e68c;},_0x2a7a90[_0x4a999c(-0x1ca,-0x1b9,-0x22b,-0x224)]='XxIkx',_0x2a7a90[_0x4a999c(-0x12e,-0xbb,-0x113,-0xff)]=_0x4a999c(-0x169,-0x1ad,-0x1d6,-0x114),_0x2a7a90[_0x593048(-0x8f,-0xc0,-0xa3,-0x4d)]=_0x593048(-0xcb,-0x158,-0x110,-0xcd);const _0x52020f=_0x2a7a90;function _0x4a999c(_0x4155d8,_0xd0325e,_0x39c2c5,_0x3e7624){return _0x5d340d(_0x4155d8- -0x117,_0xd0325e-0x5f,_0x39c2c5-0x1ad,_0xd0325e);}const _0x13a5fe=document[_0x593048(-0x10c,-0xa4,-0xd9,-0xd1)+_0x4a999c(-0x1e6,-0x208,-0x17c,-0x19b)](_0x52020f[_0x4a999c(-0x16f,-0x135,-0x1c2,-0x1da)]),_0x5d9497=document[_0x593048(-0xca,-0x9d,-0xfc,-0x126)+_0x4a999c(-0x159,-0x10d,-0x129,-0x16a)](_0x593048(-0x116,-0x27,-0x9c,-0x80)+_0x4a999c(-0x1a1,-0x1c2,-0x1b6,-0x1a5)+_0x4a999c(-0x175,-0xf8,-0xf7,-0x1df)+_0x4a999c(-0x1f4,-0x243,-0x19e,-0x18d)+_0x4a999c(-0x1c3,-0x235,-0x1df,-0x1f4)+_0x4a999c(-0x16a,-0x176,-0x18e,-0x113)+'r'),_0x21e290=document[_0x4a999c(-0x19e,-0x12c,-0x1e3,-0x1e9)+_0x4a999c(-0x1e6,-0x224,-0x255,-0x230)](_0x52020f[_0x4a999c(-0x1f0,-0x1fd,-0x22c,-0x19f)]);if(_0x321ee9&&_0x321ee9[_0x593048(-0x122,-0x147,-0x132,-0xce)](_0x52020f['iJgzS'])){_0x13a5fe[_0x4a999c(-0x151,-0x163,-0x112,-0x15a)]=_0x321ee9,_0x13a5fe[_0x593048(-0x70,-0xd9,-0x61,-0xc2)][_0x4a999c(-0x19c,-0x170,-0x1fa,-0x184)]=_0x593048(-0xbc,-0x122,-0x111,-0x128),_0x5d9497[_0x4a999c(-0x126,-0xd8,-0x107,-0xd4)][_0x593048(-0x103,-0xa4,-0xd7,-0x98)]=_0x52020f[_0x4a999c(-0x1f3,-0x219,-0x1b7,-0x1c7)],_0x21e290[_0x593048(-0x78,-0x33,-0x61,-0xc3)][_0x593048(-0xc8,-0x145,-0xd7,-0xa5)]=_0x52020f[_0x4a999c(-0x117,-0x136,-0x17a,-0x119)];const _0x47553b=_0x321ee9[_0x593048(-0x4a,-0xbe,-0x66,0x15)](','),_0x28b6d0=_0x47553b[0x17e1*-0x1+0x213b+-0x95a][_0x593048(-0x58,-0xa5,-0x66,-0x69)](':')[0x831*-0x4+-0xa9c+0x5*0x8ad][_0x4a999c(-0x12b,-0x10c,-0xcd,-0x106)](';')[0x1af4+-0x1*0x440+-0x16b4];nai3VibeTransferImageMimeType=_0x28b6d0,window[_0x4a999c(-0x115,-0xdd,-0xf6,-0xb6)+_0x4a999c(-0x1b9,-0x140,-0x162,-0x21d)+'e']=_0x47553b[0x2421*-0x1+0x1bea+0x838];const _0x308675={};_0x308675['id']=NAI_VIBE_CACHE_KEY,_0x308675['data']=_0x321ee9,dbs['storeReadW'+'rite'](_0x308675);}else{if(_0x52020f[_0x593048(-0xcd,-0x133,-0xbc,-0xcd)](_0x52020f[_0x4a999c(-0x1ca,-0x165,-0x21b,-0x1fc)],_0x52020f[_0x4a999c(-0x1ca,-0x242,-0x214,-0x21d)]))_0x2f1a0b();else{const _0x7c947b=_0x52020f[_0x4a999c(-0x12e,-0xc1,-0xfd,-0x109)][_0x4a999c(-0x12b,-0x174,-0xe5,-0x14a)]('|');let _0xa79580=-0x2183+-0x1*-0x2498+-0x315;while(!![]){switch(_0x7c947b[_0xa79580++]){case'0':window[_0x593048(-0x4b,0x4,-0x50,-0x7b)+_0x4a999c(-0x1b9,-0x198,-0x1d5,-0x160)+'e']=null;continue;case'1':_0x13a5fe['src']='';continue;case'2':_0x21e290['style'][_0x4a999c(-0x19c,-0x216,-0x196,-0x1e4)]=_0x593048(-0x55,-0x58,-0xae,-0x49);continue;case'3':_0x5d9497[_0x4a999c(-0x126,-0x19d,-0x178,-0xdd)]['display']=_0x52020f['dXXnv'];continue;case'4':_0x13a5fe[_0x593048(-0x81,-0xa1,-0x61,-0x4)][_0x4a999c(-0x19c,-0x172,-0x1c8,-0x143)]=_0x52020f['Aubjv'];continue;}break;}}}}function removeNovelaiImage(){function _0x5b10cc(_0x5e960d,_0x3717a0,_0xb54988,_0x218145){return _0x5d340d(_0xb54988-0x34d,_0x3717a0-0x137,_0xb54988-0x86,_0x5e960d);}const _0x3caad9={'Mlpix':function(_0x201b2,_0x26503f){return _0x201b2(_0x26503f);}};function _0x5197a1(_0x26d0dc,_0x12782d,_0x149824,_0x405ac5){return _0x5d340d(_0x405ac5- -0x1b8,_0x12782d-0x186,_0x149824-0x106,_0x26d0dc);}_0x3caad9[_0x5197a1(-0x1f0,-0x19a,-0x26a,-0x203)](updateNovelaiImagePreview,null),dbs[_0x5197a1(-0x187,-0x205,-0x193,-0x1ab)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x30b0ba){const _0x1ce4c5={'GgbqQ':function(_0x28764a,_0x110e48,_0x3f2cb5){return _0x28764a(_0x110e48,_0x3f2cb5);},'zwoPC':function(_0x35d57f,_0x431dd1){return _0x35d57f(_0x431dd1);},'otAwp':function(_0x169297,_0x4a2df7){return _0x169297(_0x4a2df7);},'QSQGo':function(_0x3e69a9,_0x45756d){return _0x3e69a9+_0x45756d;},'gcrRp':_0x2d00db(0x31f,0x33d,0x342,0x2c6)};function _0x2d00db(_0x5ecdf7,_0x19ada8,_0x41f7e1,_0x2d95b3){return _0x869831(_0x19ada8-0x29d,_0x2d95b3,_0x41f7e1-0xe8,_0x2d95b3-0x78);}function _0x202d39(_0xc1ca1a,_0x21381c,_0x323a8e,_0x58d192){return _0x869831(_0x323a8e-0x35f,_0xc1ca1a,_0x323a8e-0x129,_0x58d192-0x1c6);}const _0x27d619=_0x30b0ba[_0x202d39(0x374,0x37a,0x3ca,0x41c)]['files'][0x1352*-0x2+-0x1402+0x3aa6];if(!_0x27d619)return;try{const _0x19c229=await _0x1ce4c5[_0x202d39(0x32a,0x28f,0x30b,0x2cd)](processUploadedImage,_0x27d619,!![]);_0x1ce4c5['zwoPC'](updateNovelaiImagePreview,_0x19c229);}catch(_0x3d5691){console[_0x202d39(0x409,0x341,0x38f,0x397)](_0x2d00db(0x269,0x2c5,0x2cb,0x2c0)+_0x2d00db(0x34a,0x2fe,0x298,0x2b7)+_0x2d00db(0x330,0x33b,0x2bc,0x2de)+':',_0x3d5691),_0x1ce4c5[_0x2d00db(0x365,0x300,0x349,0x2bc)](alert,_0x1ce4c5[_0x202d39(0x323,0x367,0x379,0x38d)](_0x1ce4c5[_0x202d39(0x3ff,0x389,0x3ea,0x3ca)],_0x3d5691[_0x2d00db(0x2e3,0x263,0x217,0x2dc)]));}}function updateNovelaiCharRefImagePreview(_0x4d2a20){const _0x152a82={};_0x152a82[_0x18e8a2(-0x219,-0x241,-0x236,-0x212)]=_0x3286fa(0x56c,0x4ff,0x59a,0x541)+'ge_nai_cha'+_0x18e8a2(-0x1d0,-0x1d9,-0x229,-0x23a),_0x152a82[_0x18e8a2(-0x273,-0x264,-0x211,-0x275)]=_0x18e8a2(-0x290,-0x228,-0x230,-0x1e6)+_0x3286fa(0x4a7,0x4a2,0x538,0x4db)+'ref-image-'+_0x18e8a2(-0x21d,-0x294,-0x219,-0x285);function _0x18e8a2(_0xd460a2,_0x1f2deb,_0x1d2f05,_0x5eb792){return _0x5d340d(_0x1d2f05- -0x15c,_0x1f2deb-0x19f,_0x1d2f05-0x1ee,_0x5eb792);}_0x152a82[_0x3286fa(0x516,0x564,0x5ae,0x542)]=_0x3286fa(0x4c5,0x59a,0x507,0x52c),_0x152a82['yoNwC']='block',_0x152a82[_0x18e8a2(-0x23c,-0x23a,-0x1ef,-0x243)]=_0x3286fa(0x4f4,0x563,0x582,0x56a)+'x',_0x152a82[_0x18e8a2(-0x196,-0x170,-0x197,-0x1b0)]=_0x3286fa(0x571,0x53a,0x56a,0x513),_0x152a82[_0x18e8a2(-0x245,-0x23b,-0x1d9,-0x1c1)]=_0x18e8a2(-0x20a,-0x1c6,-0x21a,-0x28f);function _0x3286fa(_0x42503a,_0x65e7a4,_0x426f32,_0x43c7bf){return _0x869831(_0x43c7bf-0x4e2,_0x426f32,_0x426f32-0x35,_0x43c7bf-0x12d);}const _0x11c56f=_0x152a82,_0xb64558=document[_0x18e8a2(-0x1f4,-0x1b6,-0x1e3,-0x25d)+_0x3286fa(0x4c9,0x466,0x420,0x4a0)](_0x11c56f[_0x18e8a2(-0x2b6,-0x1f1,-0x236,-0x1e4)]),_0x5050cb=document[_0x18e8a2(-0x214,-0x193,-0x206,-0x1c1)+_0x18e8a2(-0x12f,-0x1d1,-0x19e,-0x191)](_0x18e8a2(-0x221,-0x23c,-0x21f,-0x288)+'har-ref-im'+'age-previe'+_0x3286fa(0x57c,0x501,0x569,0x56e)+_0x18e8a2(-0x1d4,-0x12e,-0x184,-0x199)+'u8-image-p'+'laceholder'),_0x558c05=document[_0x3286fa(0x4e4,0x528,0x551,0x4e8)+_0x18e8a2(-0x240,-0x1b3,-0x22b,-0x2a5)](_0x11c56f['FkLbQ']);if(_0x4d2a20&&_0x4d2a20[_0x18e8a2(-0x257,-0x220,-0x23c,-0x23d)](_0x11c56f[_0x18e8a2(-0x19d,-0x1b5,-0x189,-0x1a5)])){_0xb64558[_0x18e8a2(-0x1eb,-0x132,-0x196,-0x148)]=_0x4d2a20,_0xb64558[_0x3286fa(0x5a4,0x5b9,0x573,0x560)][_0x3286fa(0x47c,0x54b,0x4cf,0x4ea)]=_0x11c56f['yoNwC'],_0x5050cb[_0x18e8a2(-0x184,-0x184,-0x16b,-0xf9)]['display']=_0x18e8a2(-0x144,-0x165,-0x1b8,-0x1fe),_0x558c05[_0x18e8a2(-0xec,-0x17e,-0x16b,-0x1c4)][_0x18e8a2(-0x24f,-0x178,-0x1e1,-0x25e)]=_0x11c56f[_0x3286fa(0x474,0x549,0x4f0,0x4dc)];const _0x2279a3=_0x4d2a20['split'](','),_0x379df5=_0x2279a3[0x1*-0x25aa+0x1*-0x175+-0x1*-0x271f][_0x3286fa(0x558,0x4ff,0x4f8,0x55b)](':')[-0x1*0xd1f+0x61*0x31+-0x571][_0x3286fa(0x5d7,0x58e,0x595,0x55b)](';')[0x2335+-0x1218+-0x111d];nai3CharRefImageMimeType=_0x379df5,window[_0x18e8a2(-0x1f1,-0x228,-0x1d2,-0x251)+'fImage']=_0x2279a3[0x1*0x10e+-0xbf6+0xae9];const _0xe374af={};_0xe374af['id']=NAI_CHAR_REF_CACHE_KEY,_0xe374af[_0x3286fa(0x4b6,0x4b3,0x4fa,0x529)]=_0x4d2a20,dbs[_0x18e8a2(-0x137,-0x1e7,-0x181,-0x1a1)+_0x18e8a2(-0x27c,-0x279,-0x23e,-0x278)](_0xe374af);}else _0xb64558[_0x3286fa(0x509,0x4e2,0x4ed,0x535)]='',_0xb64558[_0x18e8a2(-0x18e,-0x12a,-0x16b,-0x157)][_0x3286fa(0x493,0x562,0x48f,0x4ea)]=_0x11c56f[_0x18e8a2(-0x19a,-0x1c2,-0x197,-0x17d)],_0x5050cb[_0x18e8a2(-0x184,-0xf6,-0x16b,-0x1a4)][_0x3286fa(0x500,0x50e,0x4a7,0x4ea)]=_0x11c56f[_0x3286fa(0x54f,0x4b2,0x4d9,0x4f2)],_0x558c05[_0x3286fa(0x553,0x51e,0x592,0x560)][_0x18e8a2(-0x16f,-0x1ed,-0x1e1,-0x25b)]=_0x11c56f['trYOu'],window[_0x3286fa(0x579,0x518,0x4e1,0x4f9)+'fImage']=null;}function removeNovelaiCharRefImage(){const _0x4cde21={'PUWUr':function(_0x3c171d,_0x2bd22c){return _0x3c171d(_0x2bd22c);}};function _0x5c0686(_0x20b9b5,_0x521613,_0x178f3f,_0xbe3d79){return _0x5d340d(_0x20b9b5-0x39a,_0x521613-0x8f,_0x178f3f-0x57,_0x178f3f);}_0x4cde21['PUWUr'](updateNovelaiCharRefImagePreview,null),dbs[_0x5c0686(0x3a7,0x37b,0x3d9,0x3bd)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x47d228){const _0x3d5bc9={'ERvkm':function(_0x323462,_0x1a865d){return _0x323462(_0x1a865d);},'WWrBx':function(_0x4ebda8,_0x2684ad){return _0x4ebda8!==_0x2684ad;},'tzwaU':_0x5786c4(0x3fa,0x39a,0x40e,0x466),'WVAUV':_0x5786c4(0x40e,0x43b,0x42f,0x41d),'ctxbo':_0x5831f2(0xb7,0x90,0x7a,0x89)+_0x5786c4(0x3e1,0x461,0x448,0x417)+_0x5831f2(0x84,0xb4,0xb9,0xee)+_0x5831f2(0x5c,0x23,0x3,-0x57),'XiWTC':function(_0x2a2c08,_0x1b7a30){return _0x2a2c08+_0x1b7a30;},'UwKAT':'图片处理失败:\x20'},_0x3f6d66=_0x47d228['target'][_0x5831f2(-0x5a,0x11,0x3b,-0xe)][0x1*0xc2a+0x26a3*0x1+-0x32cd];function _0x5831f2(_0x4a45f7,_0x248981,_0x1c37de,_0x112a1f){return _0x869831(_0x248981-0x68,_0x1c37de,_0x1c37de-0x184,_0x112a1f-0x1f);}function _0x5786c4(_0x46c565,_0x518d74,_0x303572,_0x395187){return _0x869831(_0x303572-0x3e7,_0x46c565,_0x303572-0x19c,_0x395187-0x36);}if(!_0x3f6d66)return;try{const _0x249fe5=await _0x3d5bc9[_0x5831f2(0x101,0xcc,0xfb,0x64)](processUploadedImage,_0x3f6d66);updateNovelaiCharRefImagePreview(_0x249fe5);}catch(_0x4f86f0){_0x3d5bc9[_0x5831f2(0x36,0x75,0x18,0x7f)](_0x3d5bc9[_0x5786c4(0x4c9,0x410,0x469,0x46d)],_0x3d5bc9[_0x5786c4(0x498,0x4cf,0x47f,0x41f)])?(console[_0x5831f2(0xd0,0x98,0x50,0x2f)](_0x3d5bc9[_0x5786c4(0x3c1,0x42d,0x435,0x465)],_0x4f86f0),_0x3d5bc9[_0x5831f2(0x107,0xcc,0x13b,0xe8)](alert,_0x3d5bc9[_0x5831f2(0x2b,0x41,-0x1b,-0x23)](_0x3d5bc9['UwKAT'],_0x4f86f0[_0x5831f2(0x28,0x2e,0x1f,0x5)]))):_0x5f0a9a[_0x5786c4(0x3ac,0x3b0,0x3d1,0x3b0)+'ctURL'](_0x2b601e[_0x5831f2(0xaa,0xbb,0xc9,0xf1)]);}}function updateComfyUIImagePreview(_0x24d7db){const _0x3b96d4={};_0x3b96d4[_0x5c4984(-0x12a,-0x150,-0x16d,-0x12d)]=_0x982194(0x355,0x36b,0x369,0x2ed)+'mage-previ'+_0x982194(0x2d2,0x26b,0x281,0x2d9)+_0x982194(0x2a4,0x2a7,0x22c,0x25a)+_0x5c4984(-0x171,-0x18f,-0x192,-0x1da)+'placeholde'+'r',_0x3b96d4[_0x982194(0x2dd,0x2f7,0x2b5,0x32d)]=_0x5c4984(-0x1fa,-0x1a2,-0x15a,-0x209),_0x3b96d4[_0x982194(0x370,0x30c,0x37a,0x305)]=_0x5c4984(-0x133,-0x13f,-0x15e,-0x158),_0x3b96d4[_0x5c4984(-0x15b,-0x114,-0x115,-0xf5)]=_0x982194(0x2bd,0x3a4,0x38d,0x332)+'x',_0x3b96d4[_0x5c4984(-0x17a,-0x18e,-0x1ae,-0x18f)]=_0x982194(0x2dc,0x2e5,0x28f,0x279),_0x3b96d4[_0x5c4984(-0x103,-0x158,-0x1b5,-0x1d5)]=_0x982194(0x2a2,0x29d,0x2fd,0x2a5),_0x3b96d4[_0x5c4984(-0x83,-0xcf,-0xee,-0xe8)]=function(_0x250c78,_0x4d6b2b){return _0x250c78!==_0x4d6b2b;},_0x3b96d4['JUEeh']=function(_0x213948,_0x3f6c8f){return _0x213948!==_0x3f6c8f;};function _0x5c4984(_0xd30b4e,_0x2a8008,_0x51fe62,_0x1c375d){return _0x869831(_0x2a8008- -0x170,_0xd30b4e,_0x51fe62-0x14a,_0x1c375d-0x4e);}_0x3b96d4[_0x5c4984(-0x14c,-0x173,-0x185,-0x104)]=_0x5c4984(-0x13d,-0xce,-0xff,-0xf3),_0x3b96d4['JSQcY']=_0x982194(0x352,0x289,0x2ab,0x300)+'2';function _0x982194(_0x473189,_0x3c9b4a,_0x4cde30,_0xbae3e6){return _0x5d340d(_0xbae3e6-0x337,_0x3c9b4a-0xdc,_0x4cde30-0x145,_0x3c9b4a);}const _0x43d097=_0x3b96d4,_0x47d7dd=document[_0x5c4984(-0x190,-0x16a,-0x10f,-0x11f)+_0x982194(0x219,0x238,0x293,0x268)](_0x5c4984(-0x14c,-0x111,-0xba,-0xf6)+_0x982194(0x27a,0x26a,0x2d4,0x2c7)),_0x445437=document['querySelec'+_0x5c4984(-0x147,-0x125,-0x10f,-0x11b)](_0x5c4984(-0x195,-0x12a,-0x18f,-0x14a)+'mage-previ'+'ew-contain'+'er\x20.st-cha'+_0x982194(0x23e,0x27d,0x2c1,0x28b)+_0x982194(0x28f,0x2a9,0x2cf,0x2e4)+'r'),_0x1368b3=document[_0x982194(0x255,0x2e2,0x2df,0x2b0)+_0x982194(0x2ce,0x1ed,0x243,0x268)]('comfyui-re'+'move-image'+_0x5c4984(-0x190,-0x15a,-0x1d2,-0x1a2));_0x47d7dd['src']&&_0x47d7dd['src']['startsWith'](_0x43d097['BpkzY'])&&_0x43d097[_0x5c4984(-0x122,-0xcf,-0x10e,-0xbb)](_0x47d7dd[_0x982194(0x369,0x35f,0x282,0x2fd)],_0x24d7db)&&URL['revokeObje'+_0x5c4984(-0x11b,-0x13d,-0x107,-0xcc)](_0x47d7dd[_0x5c4984(-0x18b,-0x11d,-0x14f,-0x195)]);if(_0x24d7db)_0x47d7dd['src']=_0x24d7db,_0x47d7dd['style']['display']=_0x43d097[_0x982194(0x2d3,0x380,0x331,0x32d)],_0x445437[_0x982194(0x2bd,0x2c0,0x2f4,0x328)][_0x5c4984(-0x1e8,-0x168,-0x11a,-0x117)]=_0x982194(0x337,0x34c,0x27c,0x2db),_0x1368b3[_0x982194(0x31f,0x2cd,0x341,0x328)]['display']=_0x43d097[_0x5c4984(-0xf4,-0x114,-0xfa,-0x95)];else{if(_0x43d097[_0x5c4984(-0xdd,-0xdc,-0xb5,-0xa0)](_0x43d097[_0x982194(0x2a6,0x29e,0x249,0x2a7)],_0x43d097[_0x5c4984(-0xff,-0x173,-0x150,-0x16a)])){const _0x38905d=_0x1ca366[_0x5c4984(-0x1bb,-0x16a,-0x134,-0x122)+_0x5c4984(-0x1ac,-0x1b2,-0x1b1,-0x1f3)](_0x982194(0x365,0x297,0x35e,0x309)+_0x982194(0x271,0x246,0x260,0x2ac)),_0x130a73=_0x2f91cb[_0x5c4984(-0x18b,-0x18d,-0x14a,-0x190)+'tor'](_0x43d097[_0x5c4984(-0x14c,-0x150,-0x13f,-0x19f)]),_0x5cf9cb=_0x56fd77[_0x982194(0x29b,0x2cd,0x233,0x2b0)+'ById'](_0x982194(0x2cd,0x24b,0x2d7,0x263)+_0x5c4984(-0x17e,-0x154,-0xeb,-0xda)+'-btn');if(_0x31acce&&_0x4d6d9b[_0x982194(0x2d7,0x29c,0x26c,0x257)]('data:image')){_0x38905d['src']=_0x4ded61,_0x38905d[_0x982194(0x2d9,0x33f,0x37b,0x328)][_0x5c4984(-0x1d2,-0x168,-0x106,-0x12a)]=_0x43d097[_0x5c4984(-0xfd,-0xed,-0x12b,-0xf8)],_0x130a73[_0x982194(0x2ab,0x392,0x31b,0x328)]['display']=_0x43d097[_0x982194(0x2c8,0x336,0x28f,0x305)],_0x5cf9cb['style'][_0x5c4984(-0x170,-0x168,-0x14f,-0x140)]=_0x43d097[_0x982194(0x2a1,0x35d,0x33e,0x306)];const _0x56eefb=_0x3a4c7d['split'](','),_0x100f05=_0x56eefb[-0xd01*-0x1+0x99*0x3d+-0x3176][_0x5c4984(-0xf2,-0xf7,-0x15d,-0x79)](':')[-0x1a4b+-0x2305+0x3d51][_0x5c4984(-0x14b,-0xf7,-0x171,-0xcc)](';')[0x1c00+-0x1*0x1f67+0x43*0xd];_0xcdca1d=_0x100f05,_0x161af2[_0x5c4984(-0xdd,-0xe1,-0x104,-0x8c)+_0x982194(0x27f,0x2d6,0x2e0,0x295)+'e']=_0x56eefb[-0x1523+0x46*0x37+0x61a*0x1];const _0x5051a5={};_0x5051a5['id']=_0x56199f,_0x5051a5['data']=_0x184f51,_0x1fb4e1[_0x5c4984(-0xa2,-0x108,-0xd5,-0x13a)+_0x982194(0x2cf,0x28e,0x2d1,0x255)](_0x5051a5);}else{const _0x52e3ce=_0x5c4984(-0xf5,-0x151,-0x183,-0x186)[_0x5c4984(-0x117,-0xf7,-0x130,-0x116)]('|');let _0x3b46eb=0x48e*-0x2+0x5f6+-0x1f*-0x1a;while(!![]){switch(_0x52e3ce[_0x3b46eb++]){case'0':_0x38905d['src']='';continue;case'1':_0x38905d[_0x5c4984(-0x120,-0xf2,-0xd4,-0x105)][_0x982194(0x2b6,0x235,0x2e6,0x2b2)]=_0x43d097[_0x5c4984(-0x151,-0x115,-0x194,-0xa6)];continue;case'2':_0x1357fa[_0x982194(0x356,0x303,0x37f,0x339)+'ansferImag'+'e']=null;continue;case'3':_0x130a73[_0x982194(0x31b,0x35e,0x2f3,0x328)][_0x5c4984(-0x191,-0x168,-0x1b1,-0xfb)]=_0x43d097[_0x5c4984(-0x1b0,-0x18e,-0x177,-0x1be)];continue;case'4':_0x5cf9cb[_0x982194(0x2da,0x338,0x393,0x328)][_0x5c4984(-0x1e2,-0x168,-0x191,-0xfb)]=_0x43d097['MsnuM'];continue;}break;}}}else{const _0x1a4f58=_0x43d097['JSQcY'][_0x5c4984(-0xee,-0xf7,-0x15d,-0xeb)]('|');let _0x533ebf=0x2*-0x47+0x1fb*-0x11+0x2239;while(!![]){switch(_0x1a4f58[_0x533ebf++]){case'0':_0x445437[_0x5c4984(-0x11b,-0xf2,-0xd2,-0x131)]['display']=_0x43d097[_0x982194(0x296,0x242,0x24a,0x28c)];continue;case'1':window['comfyuican'+_0x982194(0x295,0x333,0x2fc,0x2ea)]=null;continue;case'2':comfyuiImageObjectURL=null;continue;case'3':_0x1368b3[_0x5c4984(-0x16e,-0xf2,-0x85,-0xdf)][_0x982194(0x2da,0x262,0x312,0x2b2)]=_0x43d097[_0x982194(0x33f,0x37b,0x363,0x305)];continue;case'4':_0x47d7dd[_0x5c4984(-0xe7,-0xf2,-0x98,-0x130)][_0x982194(0x266,0x290,0x30f,0x2b2)]=_0x43d097[_0x982194(0x380,0x2f7,0x31a,0x305)];continue;case'5':_0x47d7dd[_0x5c4984(-0x165,-0x11d,-0xdb,-0xf6)]='';continue;}break;}}}}function removeComfyUIImage(){const _0x271724={'ePRiM':function(_0x596eba,_0x3df501){return _0x596eba(_0x3df501);}};_0x271724[_0x1244ac(0x12a,0x144,0x18d,0x15c)](updateComfyUIImagePreview,null);function _0x1244ac(_0x6bde3b,_0x1482c0,_0x2e9575,_0x10878c){return _0x5d340d(_0x10878c-0x212,_0x1482c0-0xf,_0x2e9575-0x11e,_0x2e9575);}dbs['storeDelet'+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0x2b0c4c){function _0x553e3a(_0x3fa3e9,_0x37bf47,_0xb81098,_0x576974){return _0x5d340d(_0x37bf47- -0x184,_0x37bf47-0x21,_0xb81098-0xb1,_0xb81098);}function _0x505460(_0x4e458f,_0x1f4b34,_0x4314f7,_0xf56732){return _0x5d340d(_0x4314f7- -0x55,_0x1f4b34-0x5c,_0x4314f7-0x11,_0x1f4b34);}const _0x1d7530={'VAJdi':function(_0x236cd9,_0x426fec){return _0x236cd9(_0x426fec);},'kUTzd':'(((.+)+)+)'+'+$','oLbQt':function(_0x3b399f,_0x44188a){return _0x3b399f===_0x44188a;},'Brjuh':'YNWOB','jLcnh':'Error\x20proc'+_0x505460(-0x6,-0x6c,-0x81,-0xd6)+'elAI\x20char\x20'+_0x505460(-0x11a,-0x12b,-0x127,-0xe8),'Ugswt':function(_0x355c21,_0x529fcc){return _0x355c21(_0x529fcc);},'TaWgQ':function(_0x553f34,_0x151a3b){return _0x553f34+_0x151a3b;},'vVZLj':_0x505460(-0x7b,0x20,-0x42,-0x84),'hRcHU':_0x505460(-0xaa,-0x9a,-0x43,-0x78)+_0x553e3a(-0x171,-0x1c4,-0x1f0,-0x15d)+_0x505460(-0x19,-0xf6,-0x7c,-0xed)+_0x553e3a(-0x1d6,-0x1a3,-0x1da,-0x1e4)+_0x553e3a(-0x282,-0x24e,-0x24c,-0x28c),'tfBmb':function(_0x2bbddf,_0x3d590c){return _0x2bbddf!==_0x3d590c;},'bRXnh':_0x505460(-0xbf,-0x4e,-0x92,-0x16),'opQoC':'image','ejxnS':_0x505460(-0xac,-0xa6,-0x78,-0x87),'WGrby':'SbDlP','HyxIW':function(_0x502a37){return _0x502a37();},'UZrYd':_0x505460(-0x9d,-0x156,-0xdb,-0x125),'RaErg':function(_0x5ecf16,_0x2c23f8){return _0x5ecf16===_0x2c23f8;},'UgxQL':_0x505460(-0xb3,-0x52,-0xb0,-0x107),'vUTdA':_0x553e3a(-0x1c0,-0x213,-0x1ca,-0x275),'ANaLI':function(_0x22c1fc,_0x4deadf){return _0x22c1fc(_0x4deadf);},'KtJAC':_0x505460(-0x103,-0x12d,-0x104,-0x122)+_0x553e3a(-0x25c,-0x224,-0x215,-0x289),'ENhpN':function(_0xe81a5a,_0x701d37){return _0xe81a5a===_0x701d37;},'DjyYw':_0x505460(-0x147,-0xde,-0xef,-0x8b),'QbpfK':_0x553e3a(-0x122,-0x17c,-0x162,-0x1cc),'MrPQD':function(_0x32a6ce,_0x556d5a){return _0x32a6ce+_0x556d5a;},'Sioag':'图片处理或上传时出错'+':'},_0x3c1b70=extension_settings[extensionName],_0x18e462=_0x2b0c4c[_0x553e3a(-0x15d,-0x1a6,-0x17e,-0x15a)]['files'][-0x11b*-0x7+-0x26e3+-0x9*-0x376];if(!_0x18e462)return;try{if(_0x1d7530[_0x505460(-0x118,-0xd0,-0xbe,-0xa4)](_0x553e3a(-0x2bb,-0x25b,-0x23b,-0x277),_0x1d7530[_0x553e3a(-0x225,-0x1ff,-0x1dd,-0x271)])){const _0x3ed040=await _0x1d7530[_0x553e3a(-0x255,-0x26a,-0x1fd,-0x20c)](processUploadedImageToBlob,_0x18e462),_0x4b8ccd=URL[_0x553e3a(-0x251,-0x23c,-0x1f6,-0x212)+_0x553e3a(-0x218,-0x1de,-0x1b1,-0x16b)](_0x3ed040);comfyuiImageObjectURL=_0x4b8ccd,_0x1d7530['VAJdi'](updateComfyUIImagePreview,_0x4b8ccd);const _0x1bb564=new FormData();_0x1bb564[_0x553e3a(-0x269,-0x220,-0x226,-0x1d6)](_0x1d7530[_0x505460(0x3,-0x2b,-0x6b,-0x28)],_0x3ed040,_0x18e462[_0x553e3a(-0x22e,-0x23e,-0x1d0,-0x1c9)]);let _0x212d92=_0x3c1b70[_0x505460(-0xac,-0x10d,-0xb9,-0x93)]['trim']();if(!_0x212d92){if(_0x1d7530[_0x505460(-0x44,-0xbb,-0x6f,-0x15)](_0x1d7530[_0x505460(-0xd1,-0x40,-0x8b,-0x4d)],_0x1d7530[_0x553e3a(-0x1d4,-0x1b3,-0x15e,-0x14a)]))_0x1d7530[_0x505460(-0x101,-0xc3,-0x13b,-0x103)](_0x4abe98,null),_0x30f045[_0x553e3a(-0x18f,-0x177,-0x110,-0x196)+'e'](_0x2726e0);else{_0x1d7530[_0x553e3a(-0x187,-0x199,-0x11a,-0x14c)](alert,'请先设置ComfyU'+'I\x20API地址。'),_0x1d7530[_0x505460(-0xd1,-0xb8,-0x66,-0x40)](removeComfyUIImage);return;}}const _0x4fb98c={};_0x4fb98c[_0x553e3a(-0x1e7,-0x207,-0x199,-0x1db)]=_0x1d7530['UZrYd'],_0x4fb98c[_0x553e3a(-0x1c7,-0x1b4,-0x14f,-0x20d)]=_0x1bb564;const _0x31c683=await fetch(_0x212d92+('/upload/im'+_0x553e3a(-0x220,-0x215,-0x268,-0x23a)),_0x4fb98c);if(_0x31c683['ok']){if(_0x1d7530['RaErg'](_0x1d7530['UgxQL'],_0x1d7530[_0x553e3a(-0x13b,-0x191,-0x12b,-0x112)]))return _0x2f4d99[_0x505460(-0x151,-0x10d,-0x121,-0x195)]()[_0x553e3a(-0x1ff,-0x244,-0x24f,-0x221)](_0x505460(-0x7f,-0x106,-0xce,-0x108)+'+$')[_0x553e3a(-0x236,-0x250,-0x29e,-0x218)]()[_0x553e3a(-0x273,-0x24d,-0x2b5,-0x26c)+'r'](_0xc77e59)['search'](VFNjRn[_0x505460(-0x39,-0x83,-0x59,-0xd9)]);else{const _0x57a50c=await _0x31c683[_0x505460(-0x54,-0x1,-0x80,-0x3f)]();window[_0x553e3a(-0x17c,-0x1ef,-0x264,-0x266)+_0x505460(-0x63,-0x39,-0xa2,-0x38)]=_0x57a50c['name'],_0x1d7530[_0x553e3a(-0x1cc,-0x1fc,-0x22a,-0x1db)](addLog,_0x553e3a(-0x23b,-0x1f8,-0x196,-0x183)+_0x505460(-0x9b,-0x8f,-0x10c,-0x17c)+JSON['stringify'](_0x57a50c)),console[_0x553e3a(-0x1b1,-0x1a2,-0x162,-0x1d9)](_0x1d7530[_0x553e3a(-0x221,-0x225,-0x211,-0x201)],_0x57a50c);const _0x4651d4=new FileReader();_0x4651d4[_0x553e3a(-0x2c3,-0x252,-0x22b,-0x2a9)]=()=>{function _0x24ca65(_0x101878,_0x3acf5a,_0x176f22,_0x324e1b){return _0x505460(_0x101878-0xdb,_0x324e1b,_0x3acf5a- -0xa0,_0x324e1b-0x13b);}function _0x1a524c(_0x458f11,_0xd4336d,_0x58af3d,_0x49571d){return _0x553e3a(_0x458f11-0x3b,_0x58af3d-0x10c,_0x458f11,_0x49571d-0x6);}if(_0x1d7530['oLbQt']('rztWe',_0x1d7530['Brjuh'])){const _0x591e82=_0x56dec6?function(){function _0x4a9500(_0x298132,_0x1c3d74,_0x26039a,_0x1bc703){return _0x4c3d(_0x26039a-0x19c,_0x1bc703);}if(_0x3c4d39){const _0x4b958c=_0xb0553f[_0x4a9500(0x380,0x292,0x301,0x2a4)](_0x23d900,arguments);return _0x169c58=null,_0x4b958c;}}:function(){};return _0x589c10=![],_0x591e82;}else{const _0x4572ba=_0x4651d4[_0x24ca65(-0x123,-0xf1,-0xe9,-0x98)],_0x12fe3e={};_0x12fe3e[_0x24ca65(-0x18a,-0x13b,-0x111,-0x185)]=_0x4572ba,_0x12fe3e[_0x24ca65(-0x107,-0x101,-0x181,-0x8f)+'Name']=_0x57a50c[_0x1a524c(-0xee,-0x174,-0x132,-0x10b)];const _0x2d4547=_0x12fe3e,_0x26bd20={};_0x26bd20['id']=COMFYUI_REF_CACHE_KEY,_0x26bd20['data']=_0x2d4547,dbs[_0x24ca65(-0x114,-0x11a,-0x140,-0x165)+_0x1a524c(-0xf9,-0x187,-0x15a,-0x123)](_0x26bd20);}},_0x4651d4[_0x505460(-0xe,-0x48,-0x47,-0x2)+_0x553e3a(-0x23f,-0x25a,-0x2c6,-0x29f)](_0x3ed040);}}else{if(_0x1d7530['ENhpN'](_0x1d7530[_0x553e3a(-0x176,-0x18a,-0x1ad,-0x117)],_0x1d7530['QbpfK']))_0x4a17ab['error'](_0x1d7530['jLcnh'],_0x316538),_0x1d7530['Ugswt'](_0x4e532e,_0x1d7530[_0x553e3a(-0x1a3,-0x20d,-0x199,-0x22e)](_0x1d7530['vVZLj'],_0x5ba5a[_0x553e3a(-0x221,-0x24b,-0x20d,-0x259)]));else{const _0x426ed4=await _0x31c683[_0x553e3a(-0x226,-0x211,-0x1e4,-0x27e)]();alert(_0x1d7530[_0x505460(-0x9d,-0x10b,-0xd9,-0xa4)](_0x505460(-0xe4,-0x84,-0xd7,-0x130),_0x426ed4)),_0x1d7530[_0x553e3a(-0x140,-0x199,-0x139,-0x158)](addLog,_0x553e3a(-0x1f9,-0x1e6,-0x216,-0x1ae)+_0x553e3a(-0x1fa,-0x21d,-0x271,-0x1d1)+_0x426ed4),console[_0x505460(-0x7d,-0x8f,-0xb2,-0xae)](_0x553e3a(-0x27a,-0x26d,-0x29d,-0x22e),_0x426ed4),_0x1d7530['HyxIW'](removeComfyUIImage);}}}else _0xf4b615['error'](_0x1d7530[_0x505460(-0xde,-0xc1,-0xf0,-0x14e)],_0x221ee4);}catch(_0xd22e27){_0x1d7530[_0x505460(-0x182,-0xdb,-0x13b,-0x14e)](alert,'图片处理或上传时出错'+':\x20'+_0xd22e27[_0x553e3a(-0x267,-0x24b,-0x231,-0x245)]),console[_0x505460(-0xb9,-0x40,-0xb2,-0xce)](_0x1d7530['Sioag'],_0xd22e27),_0x1d7530[_0x553e3a(-0x280,-0x26a,-0x23d,-0x2bb)](addLog,_0x505460(-0x12d,-0xce,-0xb7,-0x122)+_0x505460(-0x77,-0x89,-0xee,-0xe2)+JSON['stringify'](_0xd22e27)),removeComfyUIImage();}}async function loadCachedImages(){const _0x167c7c={'xJqHO':'imageInput'+'2','GYHsW':function(_0x36a5ed,_0x13ae8e){return _0x36a5ed(_0x13ae8e);},'ZEODk':function(_0x56ec17,_0x36e143){return _0x56ec17+_0x36e143;},'LmhGk':_0x44fd47(0x4bb,0x44f,0x450,0x4ec)+':\x20','eWPtl':_0x44fd47(0x4bb,0x4ac,0x4c3,0x4d8)+':','eItsL':function(_0x15707c,_0x569377){return _0x15707c(_0x569377);},'swPrO':function(_0xad9abc){return _0xad9abc();},'KxEbv':_0x701534(0xba,0x89,0x4e,0xc7),'HYKkA':'Error\x20load'+_0x701534(0xab,0x152,0x11b,0xe8)+'\x20NovelAI\x20V'+_0x44fd47(0x542,0x4f6,0x53d,0x587),'bSuxH':function(_0x345390,_0x2f45c1){return _0x345390!==_0x2f45c1;},'qCPth':_0x44fd47(0x4d6,0x519,0x548,0x537),'kQqWD':function(_0x619c32,_0x19125d){return _0x619c32(_0x19125d);},'skrPd':'Error\x20load'+_0x701534(0x15e,0xe4,0x12e,0xe8)+'\x20NovelAI\x20C'+_0x44fd47(0x567,0x526,0x539,0x597)+'age:','kEViY':function(_0xa9546c,_0x3db5ea){return _0xa9546c!==_0x3db5ea;},'UoqCI':_0x44fd47(0x562,0x59e,0x537,0x4f2),'aLcWm':function(_0x50f12c,_0x489050){return _0x50f12c(_0x489050);},'KUkHz':function(_0x4c007f,_0x3a8de6){return _0x4c007f===_0x3a8de6;},'zPHBi':_0x44fd47(0x583,0x555,0x553,0x5fd),'IMmbD':_0x701534(0x164,0xf8,0x18c,0x11f)+'fyUI\x20image'+'\x20from\x20old\x20'+_0x44fd47(0x56e,0x53a,0x5d6,0x56e)+_0x701534(0x18f,0x17b,0x12a,0x12d)+_0x44fd47(0x56d,0x562,0x588,0x552)+'\x20to\x20update'+_0x701534(0x107,0xb4,0x4d,0xc0)+_0x44fd47(0x53a,0x553,0x4f1,0x5b4)+_0x44fd47(0x58c,0x558,0x510,0x5d1)};await dbs[_0x44fd47(0x530,0x5a6,0x563,0x570)]();function _0x44fd47(_0xd00de6,_0x375a14,_0x1537f9,_0x19b5f2){return _0x5d340d(_0xd00de6-0x586,_0x375a14-0xb8,_0x1537f9-0x14c,_0x19b5f2);}try{const _0x1d8bd8=await dbs[_0x44fd47(0x49c,0x47d,0x455,0x476)+'nly'](NAI_VIBE_CACHE_KEY);_0x1d8bd8&&_0x1d8bd8[_0x701534(0x9e,0x11e,0x138,0xe2)]&&_0x167c7c[_0x701534(0x84,0x82,0x42,0x50)](updateNovelaiImagePreview,_0x1d8bd8[_0x44fd47(0x540,0x57a,0x4e9,0x53e)]);}catch(_0x39df22){_0x167c7c[_0x701534(0x170,0x12e,0xbe,0x138)]===_0x167c7c['KxEbv']?console[_0x701534(0xb0,0x84,0xdc,0xcb)](_0x167c7c[_0x44fd47(0x4a7,0x451,0x43c,0x470)],_0x39df22):_0x364156[_0x44fd47(0x4ff,0x4ba,0x499,0x4c7)+'ById'](_0x167c7c[_0x44fd47(0x531,0x5a3,0x566,0x4cd)])['click']();}try{if(_0x167c7c['bSuxH'](_0x44fd47(0x4d6,0x47e,0x4e4,0x51a),_0x167c7c['qCPth']))_0x167c7c[_0x701534(0x156,0xf8,0x72,0xdf)](_0x5b986d,_0x167c7c[_0x701534(0x86,-0x1c,0x27,0x63)](_0x167c7c[_0x701534(0x12d,0xf1,0x107,0x10c)],_0xdf25aa[_0x44fd47(0x4bf,0x4f9,0x4fa,0x463)])),_0xe8f328[_0x44fd47(0x529,0x4e6,0x4cf,0x4d5)](_0x167c7c['eWPtl'],_0x34eb4a),_0x167c7c[_0x701534(0x33,0x47,-0x27,0x50)](_0x407c83,'图片上传失败,\x20错误'+_0x44fd47(0x4ed,0x532,0x49d,0x530)+_0x6847ad['stringify'](_0xa06127)),_0x167c7c[_0x44fd47(0x4cd,0x453,0x529,0x4f8)](_0x2c5e84);else{const _0xe81524=await dbs[_0x44fd47(0x49c,0x482,0x50c,0x442)+_0x44fd47(0x592,0x547,0x536,0x606)](NAI_CHAR_REF_CACHE_KEY);_0xe81524&&_0xe81524[_0x701534(0xce,0x94,0x6b,0xe2)]&&_0x167c7c['kQqWD'](updateNovelaiCharRefImagePreview,_0xe81524['data']);}}catch(_0x20756f){console[_0x44fd47(0x529,0x544,0x554,0x582)](_0x167c7c[_0x701534(0x6a,0xa5,0xf3,0xe0)],_0x20756f);}function _0x701534(_0x5cbae4,_0x12f1e0,_0x5d0a2a,_0x27aca8){return _0x5d340d(_0x27aca8-0x128,_0x12f1e0-0x12d,_0x5d0a2a-0x18b,_0x12f1e0);}try{const _0x2e8105=await dbs[_0x701534(0x3e,0xb6,0x6d,0x3e)+_0x701534(0x143,0x135,0x194,0x134)](COMFYUI_REF_CACHE_KEY);if(_0x2e8105&&_0x2e8105[_0x701534(0x105,0x85,0x153,0xe2)]&&_0x2e8105[_0x44fd47(0x540,0x526,0x4e9,0x5b8)][_0x44fd47(0x540,0x522,0x4fb,0x5ab)]&&_0x2e8105[_0x44fd47(0x540,0x591,0x56a,0x5ab)]['serverFile'+'Name']){if(_0x167c7c[_0x701534(0x12e,0x77,0x9d,0xf0)](_0x167c7c['UoqCI'],_0x167c7c[_0x44fd47(0x4ee,0x54b,0x4c8,0x479)]))_0x167c7c[_0x44fd47(0x4ae,0x4b4,0x463,0x520)](_0x42bb23,null),_0x3867d7[_0x44fd47(0x593,0x555,0x5a3,0x5f2)+'e'](_0x204c6a);else{const _0x580e5a=_0x2e8105[_0x44fd47(0x540,0x5b7,0x573,0x5b2)],_0x554af2=await _0x167c7c[_0x44fd47(0x4fe,0x559,0x4de,0x49e)](fetch,_0x580e5a[_0x44fd47(0x540,0x584,0x502,0x4f5)]),_0x3067b9=await _0x554af2[_0x44fd47(0x4a3,0x502,0x4f1,0x4a0)](),_0x21d2d4=URL['createObje'+_0x701534(0x69,0xdc,0xe6,0xce)](_0x3067b9);updateComfyUIImagePreview(_0x21d2d4),comfyuiImageObjectURL=_0x21d2d4,window['comfyuican'+_0x701534(0x84,0xf5,0x13d,0xdb)]=_0x580e5a[_0x701534(0xb3,0xa0,0xf6,0x11c)+_0x701534(0x9e,0x6f,0x14e,0xda)],_0x167c7c['eItsL'](addLog,_0x44fd47(0x4b1,0x490,0x434,0x4f2)+'UI图片:\x20'+_0x580e5a[_0x701534(0x117,0x9e,0xbe,0x11c)+_0x701534(0x92,0x134,0x89,0xda)]),console[_0x701534(0x163,0xc8,0xe1,0x10a)](_0x701534(0x134,0xc1,0xb4,0x11f)+'fyUI\x20image'+_0x44fd47(0x4f0,0x503,0x535,0x4f3)+_0x44fd47(0x551,0x574,0x500,0x563)+_0x580e5a[_0x701534(0xb3,0x181,0xd2,0x11c)+_0x701534(0x11e,0x14c,0x129,0xda)]);}}else{if(_0x2e8105&&_0x167c7c[_0x44fd47(0x4dd,0x500,0x4fb,0x522)](typeof _0x2e8105[_0x44fd47(0x540,0x4eb,0x4ff,0x597)],_0x167c7c[_0x44fd47(0x4df,0x4c2,0x4c9,0x550)])){const _0x2e8f87=await fetch(_0x2e8105['data']),_0x48769e=await _0x2e8f87[_0x701534(-0x1d,-0x2f,0x5c,0x45)](),_0x279697=URL[_0x701534(0x7e,0xc0,0xe1,0x70)+_0x44fd47(0x52c,0x4c0,0x579,0x5a2)](_0x48769e);updateComfyUIImagePreview(_0x279697),comfyuiImageObjectURL=_0x279697,console['warn'](_0x167c7c[_0x701534(0xa6,0xc2,0x62,0x6c)]);}}}catch(_0x7677a9){console[_0x701534(0x99,0x7d,0x137,0xcb)](_0x44fd47(0x598,0x57b,0x5c8,0x604)+'ing\x20cached'+_0x701534(0x60,-0x6,0xa7,0x76)+_0x701534(0xd4,0x31,0x5f,0x83),_0x7677a9);}}export function initImageUpload(_0x23c35d){const _0x368df4={'fjoif':_0x2b19ea(0x388,0x355,0x32c,0x3a8)+_0x29bef6(-0x1ac,-0x211,-0x220,-0x21a),'NfeaF':function(_0x2addc1){return _0x2addc1();},'jxGKJ':_0x29bef6(-0x16f,-0x159,-0x214,-0x1c0),'EiVCz':_0x2b19ea(0x3fc,0x3f8,0x432,0x3a6),'enBrx':function(_0x8d5c7c,_0x2ce3e8){return _0x8d5c7c!==_0x2ce3e8;},'tEeFm':_0x29bef6(-0x17d,-0x18f,-0x168,-0x1ca),'OJAYB':_0x29bef6(-0x30d,-0x268,-0x267,-0x293)+'2','NRdhS':_0x29bef6(-0x144,-0x1c2,-0x227,-0x1ba)+'elect-imag'+_0x2b19ea(0x3b0,0x408,0x3cd,0x418),'jPFyg':'click','AvdPz':_0x2b19ea(0x3f8,0x391,0x435,0x3a5)+_0x29bef6(-0x2d3,-0x282,-0x2dd,-0x2a1),'cOTaD':_0x2b19ea(0x43b,0x414,0x43f,0x480),'GaDuq':_0x2b19ea(0x432,0x3e8,0x3be,0x3f1)+'emove-imag'+_0x29bef6(-0x204,-0x23d,-0x206,-0x26b),'qvyYa':_0x2b19ea(0x461,0x3e4,0x408,0x3e9)+'elect-char'+_0x2b19ea(0x450,0x3f6,0x4b0,0x40c)+_0x29bef6(-0x296,-0x287,-0x217,-0x23a),'ijzfS':_0x2b19ea(0x3f8,0x3b0,0x46b,0x445)+'t_nai_char'+_0x2b19ea(0x3aa,0x3eb,0x41d,0x3cc),'OAlSD':_0x2b19ea(0x432,0x46c,0x3d7,0x3b2)+_0x2b19ea(0x3b4,0x38f,0x3ee,0x3b1)+'-ref-image'+_0x29bef6(-0x298,-0x249,-0x1bf,-0x23a),'qyFfg':_0x29bef6(-0x239,-0x203,-0x24a,-0x21c)+_0x2b19ea(0x409,0x3fb,0x40d,0x45d)+_0x2b19ea(0x3b0,0x403,0x330,0x364),'laGrW':_0x29bef6(-0x256,-0x23c,-0x246,-0x223)+'t2'};loadCachedImages();function _0x2b19ea(_0x5f2cec,_0x3099a4,_0x4d1551,_0x2327e4){return _0x5d340d(_0x5f2cec-0x458,_0x3099a4-0x124,_0x4d1551-0x31,_0x3099a4);}_0x23c35d[_0x29bef6(-0x182,-0x218,-0x246,-0x1f7)](_0x368df4['NRdhS'])['on'](_0x368df4[_0x29bef6(-0x286,-0x22f,-0x259,-0x241)],()=>{function _0x13bcef(_0x1d2731,_0x5e5bff,_0x5a7ddc,_0x507f33){return _0x2b19ea(_0x5a7ddc- -0x1f8,_0x5e5bff,_0x5a7ddc-0xb,_0x507f33-0xf3);}function _0x1a1652(_0x36cbb9,_0xd79c14,_0x2d74aa,_0x23a04c){return _0x2b19ea(_0x2d74aa- -0x5d5,_0x36cbb9,_0x2d74aa-0x19e,_0x23a04c-0x196);}document[_0x1a1652(-0x26e,-0x1b1,-0x204,-0x225)+'ById'](_0x368df4[_0x1a1652(-0x1e1,-0x182,-0x1b0,-0x13b)])[_0x13bcef(0x1dd,0x219,0x1cb,0x1d8)]();}),_0x23c35d[_0x2b19ea(0x424,0x44a,0x3ee,0x464)](_0x368df4[_0x2b19ea(0x371,0x356,0x343,0x362)])['on'](_0x368df4[_0x2b19ea(0x44a,0x3e1,0x46f,0x3ce)],handleNovelaiImageUpload),_0x23c35d[_0x2b19ea(0x424,0x445,0x3ec,0x3c5)](_0x368df4['GaDuq'])['on'](_0x368df4[_0x29bef6(-0x1ee,-0x1c7,-0x28f,-0x241)],()=>{removeNovelaiImage();}),_0x23c35d['find'](_0x368df4[_0x29bef6(-0x221,-0x21f,-0x237,-0x251)])['on'](_0x368df4[_0x2b19ea(0x3da,0x3cc,0x412,0x451)],()=>{function _0x24e3ea(_0x113c30,_0x39a5c3,_0x4c4b93,_0x50bc52){return _0x2b19ea(_0x113c30- -0x37c,_0x50bc52,_0x4c4b93-0x104,_0x50bc52-0x17a);}function _0x1fdb07(_0x2e4784,_0x35ae4d,_0x20a58e,_0x11540a){return _0x2b19ea(_0x35ae4d- -0x497,_0x11540a,_0x20a58e-0xa,_0x11540a-0x19f);}document[_0x1fdb07(-0x103,-0xc6,-0x131,-0x129)+'ById'](_0x24e3ea(0xc,0x48,0x89,-0x4)+_0x24e3ea(0x1,-0x4a,-0x4a,-0x56)+_0x1fdb07(-0x7c,-0x5f,0x1,-0x81))[_0x1fdb07(-0x71,-0xd4,-0xd3,-0xcc)]();}),_0x23c35d[_0x29bef6(-0x1e7,-0x25a,-0x23c,-0x1f7)](_0x368df4[_0x29bef6(-0x1fe,-0x24c,-0x1fe,-0x242)])['on'](_0x368df4[_0x2b19ea(0x44a,0x3d6,0x4c8,0x42b)],handleNovelaiCharRefImageUpload),_0x23c35d[_0x2b19ea(0x424,0x4a1,0x46e,0x3d6)](_0x368df4[_0x29bef6(-0x242,-0x2b1,-0x313,-0x294)])['on'](_0x368df4[_0x2b19ea(0x3da,0x3f1,0x384,0x433)],()=>{function _0x5e4434(_0x42703d,_0x4e22e7,_0xbc476,_0x5e1328){return _0x2b19ea(_0x4e22e7- -0x2f9,_0x42703d,_0xbc476-0x1a2,_0x5e1328-0xf4);}_0x368df4[_0x5e4434(0xcb,0x100,0x8a,0x16c)](removeNovelaiCharRefImage);}),_0x23c35d[_0x2b19ea(0x424,0x3e5,0x3ce,0x3ca)](_0x368df4['qyFfg'])['on'](_0x368df4[_0x29bef6(-0x1d7,-0x206,-0x2bf,-0x241)],()=>{function _0x107be3(_0x476761,_0x2f7c6d,_0x2f83eb,_0x168969){return _0x2b19ea(_0x168969- -0x4fe,_0x476761,_0x2f83eb-0x13d,_0x168969-0xcd);}const _0x291270={};_0x291270[_0x107be3(-0xc7,-0xc8,-0xe6,-0x109)]=_0x368df4[_0x2ab073(0x5ac,0x592,0x59d,0x538)],_0x291270[_0x107be3(-0x153,-0xd4,-0x12c,-0xe2)]=_0x368df4[_0x2ab073(0x53d,0x4cd,0x521,0x52a)];const _0x39a42d=_0x291270;function _0x2ab073(_0x529197,_0x296a59,_0x110d3b,_0x610032){return _0x29bef6(_0x529197-0xd6,_0x610032,_0x110d3b-0xf3,_0x529197-0x781);}if(_0x368df4['enBrx'](_0x368df4[_0x107be3(-0xe2,-0xb6,-0x19d,-0x120)],_0x107be3(-0xd6,-0x47,-0x108,-0xad))){const _0x480b83=_0x39a42d[_0x2ab073(0x55b,0x560,0x542,0x52a)][_0x2ab073(0x5aa,0x5bf,0x619,0x576)]('|');let _0x111a8d=0x15db+0x11f*-0xd+-0xe9*0x8;while(!![]){switch(_0x480b83[_0x111a8d++]){case'0':_0x4f5c2e[_0x107be3(-0x124,-0xdc,-0x3c,-0xb5)][_0x2ab073(0x539,0x56d,0x5aa,0x58e)]=_0x39a42d[_0x107be3(-0xfe,-0x13f,-0xf4,-0xe2)];continue;case'1':_0x28f9f3[_0x107be3(-0x70,-0xf7,-0x136,-0xe0)]='';continue;case'2':_0x3755bc[_0x107be3(-0x184,-0x102,-0xd4,-0x11c)+'fImage']=null;continue;case'3':_0x3a186c[_0x107be3(-0xd4,-0xc7,-0x85,-0xb5)]['display']=_0x2ab073(0x500,0x57d,0x4d1,0x4ec);continue;case'4':_0x25a57d[_0x2ab073(0x5af,0x61b,0x558,0x53b)][_0x107be3(-0x138,-0x149,-0x17d,-0x12b)]=_0x39a42d[_0x107be3(-0x12d,-0xfd,-0x135,-0xe2)];continue;}break;}}else document[_0x2ab073(0x537,0x54c,0x535,0x4ef)+'ById'](_0x368df4[_0x107be3(-0x181,-0x1a2,-0x134,-0x16e)])[_0x2ab073(0x529,0x54d,0x5a3,0x4a9)]();});function _0x29bef6(_0x40e926,_0x53ebba,_0xca2805,_0x1ab653){return _0x869831(_0x1ab653- -0x250,_0x53ebba,_0xca2805-0x1b9,_0x1ab653-0xf3);}_0x23c35d[_0x29bef6(-0x1c0,-0x220,-0x186,-0x1f7)](_0x368df4['laGrW'])['on'](_0x368df4[_0x2b19ea(0x44a,0x4b2,0x3dd,0x4a7)],handleImageUpload2),_0x23c35d[_0x2b19ea(0x424,0x3b3,0x490,0x470)](_0x29bef6(-0x21c,-0x216,-0x1c4,-0x1fc)+_0x2b19ea(0x392,0x3ea,0x3da,0x38c)+_0x2b19ea(0x3b0,0x406,0x330,0x428))['on'](_0x368df4['jPFyg'],()=>{removeComfyUIImage();});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};