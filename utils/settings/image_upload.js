(function(_0x55cc38,_0x1f717e){function _0x4f9ed7(_0x5a396d,_0x33dc97,_0x51f3d8,_0x3cd993){return _0x5bc7(_0x5a396d-0x153,_0x33dc97);}function _0x4fe7ef(_0x37b576,_0xdf2037,_0x34ede3,_0x5539af){return _0x5bc7(_0xdf2037- -0x380,_0x34ede3);}const _0x3a5e0a=_0x55cc38();while(!![]){try{const _0x2ad05f=-parseInt(_0x4f9ed7(0x3bc,0x38f,0x359,0x368))/(-0xcc4+0xc82+-0x43*-0x1)*(parseInt(_0x4f9ed7(0x374,0x313,0x36d,0x3d2))/(0xfd3*0x2+-0x25c4*0x1+-0x1c*-0x38))+-parseInt(_0x4f9ed7(0x379,0x302,0x34a,0x38c))/(-0x121d+0x109d+-0x183*-0x1)+parseInt(_0x4f9ed7(0x407,0x3dd,0x469,0x389))/(0xf*0x161+-0x1*0x23e3+0xf38)+parseInt(_0x4fe7ef(-0xf7,-0x140,-0xc2,-0x10a))/(-0x148*0xc+-0x157*-0x14+-0xb67)*(parseInt(_0x4fe7ef(-0xf0,-0x169,-0xf2,-0x1cb))/(-0x1ae2+-0x1*-0x189+0x195f))+-parseInt(_0x4fe7ef(-0x1b0,-0x184,-0x1e0,-0x131))/(-0x6*-0x3fa+-0x7*0x1c8+-0x1*0xb5d)*(-parseInt(_0x4fe7ef(-0x176,-0x139,-0x195,-0x1a5))/(0x14b8+0x6b4+-0x1b64))+parseInt(_0x4f9ed7(0x3bf,0x3e7,0x35b,0x418))/(0x84a*-0x1+0x2*0xa2a+0x1*-0xc01)*(parseInt(_0x4f9ed7(0x3b0,0x36a,0x332,0x34a))/(-0x38b*-0x3+-0x2*0xfde+-0x1525*-0x1))+-parseInt(_0x4fe7ef(-0x1ea,-0x18f,-0x1ae,-0x129))/(0x409*0x1+0x1bb+-0x5b9)*(parseInt(_0x4f9ed7(0x3ec,0x3b9,0x44b,0x412))/(0x1090+-0x2264+0x478*0x4));if(_0x2ad05f===_0x1f717e)break;else _0x3a5e0a['push'](_0x3a5e0a['shift']());}catch(_0xc8fde6){_0x3a5e0a['push'](_0x3a5e0a['shift']());}}}(_0x16ac,-0x8b50+-0x62990+0xc9b0e));const _0x57e886=(function(){const _0x3e833e={};_0x3e833e[_0x1596cc(0x37,-0x93,-0x49,-0x3d)]=function(_0x441a16,_0x850349){return _0x441a16===_0x850349;};function _0x1596cc(_0x6f2cd4,_0x57e2c6,_0x556839,_0x18848a){return _0x5bc7(_0x18848a- -0x24f,_0x556839);}_0x3e833e[_0x238b0e(0xd8,0x11f,0xc7,0xad)]=_0x238b0e(0x9,0xa8,0x5f,0x28);function _0x238b0e(_0x28c3dd,_0x28184d,_0x5eb8a5,_0x32365c){return _0x5bc7(_0x5eb8a5- -0x182,_0x28c3dd);}const _0x14e169=_0x3e833e;let _0x2ff8db=!![];return function(_0xcee41b,_0x175538){function _0x380847(_0x95b9b5,_0x173f1b,_0x5b12d3,_0x3a1b62){return _0x238b0e(_0x173f1b,_0x173f1b-0x1ea,_0x95b9b5- -0x1a3,_0x3a1b62-0x18b);}function _0x33ef40(_0x8db2e6,_0xdc9829,_0x5c38b5,_0x58c0f5){return _0x238b0e(_0xdc9829,_0xdc9829-0x1ad,_0x58c0f5- -0x6a,_0x58c0f5-0xd5);}if(_0x14e169[_0x380847(-0x113,-0xf2,-0x123,-0xae)](_0x14e169['ymaWt'],_0x14e169[_0x33ef40(0x6c,-0x1,0x84,0x5d)])){const _0x1cc1c4=_0x2ff8db?function(){function _0x2aa8a9(_0x1c7ab5,_0xbbc867,_0x28ef2d,_0x4f184d){return _0x380847(_0x28ef2d-0xe1,_0x4f184d,_0x28ef2d-0x141,_0x4f184d-0x17f);}if(_0x175538){const _0x2fc079=_0x175538[_0x2aa8a9(-0x19,0x26,0x17,0x87)](_0xcee41b,arguments);return _0x175538=null,_0x2fc079;}}:function(){};return _0x2ff8db=![],_0x1cc1c4;}else _0x226979();};}()),_0x594161=_0x57e886(this,function(){const _0x216a1d={};function _0x384cb0(_0x228cb7,_0x5c2ac2,_0x3a63b0,_0x455ee0){return _0x5bc7(_0x455ee0-0x1e3,_0x3a63b0);}_0x216a1d[_0x384cb0(0x3fc,0x3ca,0x488,0x41c)]='(((.+)+)+)'+'+$';function _0x25fd1c(_0x44a8ef,_0x3389eb,_0x2fed76,_0x3dcbd7){return _0x5bc7(_0x44a8ef-0x181,_0x3dcbd7);}const _0xa19ac4=_0x216a1d;return _0x594161[_0x25fd1c(0x421,0x3d5,0x445,0x437)]()[_0x384cb0(0x45a,0x47a,0x482,0x490)](_0xa19ac4[_0x25fd1c(0x3ba,0x423,0x35e,0x3be)])[_0x384cb0(0x43f,0x4e8,0x450,0x483)]()[_0x25fd1c(0x432,0x403,0x4ad,0x450)+'r'](_0x594161)[_0x384cb0(0x4d4,0x457,0x479,0x490)](_0xa19ac4[_0x384cb0(0x475,0x44a,0x46b,0x41c)]);});_0x594161();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';function _0x5bc7(_0x175f30,_0x5c3bd0){const _0x5321ce=_0x16ac();return _0x5bc7=function(_0x172c9f,_0x3c0f2b){_0x172c9f=_0x172c9f-(0x979*0x3+-0xbf*-0x22+0x114f*-0x3);let _0x2bcaeb=_0x5321ce[_0x172c9f];if(_0x5bc7['Qmfqfz']===undefined){var _0x2fa796=function(_0x253d12){const _0x3f7324='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4ffe79='',_0x3ab062='',_0x3fe08f=_0x4ffe79+_0x2fa796;for(let _0x5d6a31=-0x12c2+0xf*-0x251+0x3581*0x1,_0x2df7ed,_0x3e0c6e,_0x105e68=-0x1c48+0x11*-0x1e5+0x3c7d;_0x3e0c6e=_0x253d12['charAt'](_0x105e68++);~_0x3e0c6e&&(_0x2df7ed=_0x5d6a31%(0x646*-0x5+-0x22a+0x2*0x10c6)?_0x2df7ed*(-0x1524+0xcb5*0x1+0x8af)+_0x3e0c6e:_0x3e0c6e,_0x5d6a31++%(0x1d1+-0x941+0x35*0x24))?_0x4ffe79+=_0x3fe08f['charCodeAt'](_0x105e68+(-0x219+0x25*-0xc5+0x1e9c))-(-0xb57+0x1*-0x577+0x10d8)!==-0x1a96+0x1f73+0xf9*-0x5?String['fromCharCode'](-0xec*-0xc+-0x1d38+-0x1327*-0x1&_0x2df7ed>>(-(-0x24a7+-0x11*-0xd3+-0xd*-0x1be)*_0x5d6a31&0xbed+0x119f+-0x2*0xec3)):_0x5d6a31:-0x24cd*0x1+-0x111f*0x1+-0x1dc*-0x1d){_0x3e0c6e=_0x3f7324['indexOf'](_0x3e0c6e);}for(let _0x40a8d3=-0x31*0x61+0x55b+0x13*0xb2,_0x4d536c=_0x4ffe79['length'];_0x40a8d3<_0x4d536c;_0x40a8d3++){_0x3ab062+='%'+('00'+_0x4ffe79['charCodeAt'](_0x40a8d3)['toString'](0x1a50+0x2*0xcab+0x8e*-0x5d))['slice'](-(-0x1*-0x299+-0x1*-0x535+0x1*-0x7cc));}return decodeURIComponent(_0x3ab062);};_0x5bc7['XJeeee']=_0x2fa796,_0x175f30=arguments,_0x5bc7['Qmfqfz']=!![];}const _0x8f7e12=_0x5321ce[0x14a1*0x1+-0x3f5*0x5+0x36*-0x4],_0x33fa15=_0x172c9f+_0x8f7e12,_0x36fea8=_0x175f30[_0x33fa15];if(!_0x36fea8){const _0x3e715f=function(_0x47d324){this['LoPMoY']=_0x47d324,this['NGYLuF']=[-0x2020+-0x109d+0x30be,0xa31+-0x1844*-0x1+-0x2275*0x1,-0x2*-0xa88+-0xaf0+-0x90*0x12],this['EVooXj']=function(){return'newState';},this['muQlVE']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['EerMae']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3e715f['prototype']['qFQpIR']=function(){const _0x38bcbf=new RegExp(this['muQlVE']+this['EerMae']),_0x2d37ae=_0x38bcbf['test'](this['EVooXj']['toString']())?--this['NGYLuF'][-0xe0b+0x230b+-0x14ff]:--this['NGYLuF'][-0x2*-0x7ac+-0x2022*0x1+-0x133*-0xe];return this['nsjyhf'](_0x2d37ae);},_0x3e715f['prototype']['nsjyhf']=function(_0x4990cb){if(!Boolean(~_0x4990cb))return _0x4990cb;return this['SbJmnp'](this['LoPMoY']);},_0x3e715f['prototype']['SbJmnp']=function(_0x5db748){for(let _0x150a49=-0x1c41+0x1665+0x5dc,_0x224623=this['NGYLuF']['length'];_0x150a49<_0x224623;_0x150a49++){this['NGYLuF']['push'](Math['round'](Math['random']())),_0x224623=this['NGYLuF']['length'];}return _0x5db748(this['NGYLuF'][0x6*-0xb2+0x1fec+-0x250*0xc]);},new _0x3e715f(_0x5bc7)['qFQpIR'](),_0x2bcaeb=_0x5bc7['XJeeee'](_0x2bcaeb),_0x175f30[_0x33fa15]=_0x2bcaeb;}else _0x2bcaeb=_0x36fea8;return _0x2bcaeb;},_0x5bc7(_0x175f30,_0x5c3bd0);}import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x25fac9(0x5d8,0x621,0x656,0x673)+_0x325787(0x1b2,0x1d1,0x187,0x1f8)+_0x325787(0x20a,0x1aa,0x1db,0x1a2)+'age',NAI_CHAR_REF_CACHE_KEY=_0x25fac9(0x664,0x662,0x656,0x675)+_0x325787(0x17a,0x154,0x1cb,0x137)+_0x325787(0x24d,0x1d5,0x228,0x257),COMFYUI_REF_CACHE_KEY='cache_comf'+_0x25fac9(0x5dd,0x66b,0x5ef,0x5ca)+_0x325787(0x217,0x22a,0x299,0x2a0);let nai3VibeTransferImageMimeType=_0x325787(0x1bd,0x142,0x1b5,0xf5),nai3CharRefImageMimeType=_0x25fac9(0x563,0x5e8,0x5cd,0x5b1),comfyuiImageObjectURL=null;function _0x16ac(){const _0x2afec2=['mtq4mJe2nxz0EvHSDG','y2HHBMDL','zxCTy29UDgfPBG','nxWYFdf8mhW0Fa','quDUwKW','Dhu4lwLTywDLlq','Dhncww0','ywDLlxbYzxzPzq','DgHLig5LDYbMBW','vKXwEfG','A2DcEKe','y2fJAgvFBM92zq','BhvrwLm','uxnsBgO','i2LTywDLsw5WDq','vermtKe','BM92zwXHAs1Yzq','BgfPx3zPyMvFDa','DhjPBq','BwfNztO','vuTxEey','zwzFAw1Hz2u','yMXVyJO','x25VDMvSywK','surevM8','s3r0Dwq','tLfAB3K','yMXVyG','BwvZC2fNzq','vxL4ELy','Aw1Hz2vjBNb1Da','DwPOvfC','BMX5','CgXHy2vOB2XKzq','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','D0jHB3e','i25VDMvSywKTAq','CuPmzeG','zMLUza','q29PuLO','Au5Hq0u','CIaUC3qTy2HHDa','vfzbCfu','A2fVDhvWAwfU','Dun3rgm','mJy0ndHhDuvSwhe','zxnZAw5Nie5VDG','ueXNsKu','qxjMtLG','zgLZCgXHEq','BwfNzs1WCMv2Aq','rxjYB3iGBg9Hza','Dg9tDhjPBMC','y29TzNL1As1Yzq','ruDrA08','Bg9N','rNnRsg8','C3r5Bgu','y0jVywC','6zsz6k+V6k+M5OofoG','zM9cDKq','vvjm','Bw92zs1PBwfNzq','u0zetMC','D3b1uNe','C2vHCMnO','ie5VDMvSquKGqW','zLHmrMK','sgXvzei','y29UC3rYDwn0BW','l3vWBg9Hzc9PBq','C3rHCNrZv2L0Aa','mJyWmdmXnNv4AfbnBq','zw1VDMuTy2HHCG','AwjLigLTywDLoG','EM5HwxC','CMvM','i2nVBwz5DwKTCW','y2XPy2S','DNr5rwu','tg9HzgvKienVBq','zKLTywDL','Ce5hwwq','ztOG','DxzbBKq','zxiGlNn0lwnOyq','6k+35ywi6k6+572Uq29TzNLv','BMfPm0nOyxjszq','C3bSAxq','q25jBxG','yK9fAKm','BMfPm1zPyMvuCG','z0Tvt0C','rhLxyKK','y3v0yu0','ienVBwz5vuKGAq','Dg9Y','5zU+54Mh5Ase55cg5AsX6lsLoIa','x25HAv9JAgfYxW','qK1KAeK','yMXVy2S','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','yNDwD3m','ufDPtuy','tvDfu2e','ihrVihvWzgf0zq','ywDL','Aw5SAw5LlwzSzq','6k+M5OofoIa','y3vMvMi','z2TbBfO','CM1HDc4','Dgv4Da','rxjYB3iGChjVyW','C3rVCMvszwfKvW','zNLvssbPBwfNzq','z1PStNa','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','ChjLDMLLD0LTyq','y29TzNL1AwnHBG','y3jLyxrLt2jQzq','t1HPC3e','ie5VDMvSquKGvG','D09bBLm','CMvZDwX0','z0fdDe4','u01ItKe','sKjYweW','A0jsDu4','i2nVBwz5DwKTCG','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','AgfYifjLzIbPBq','igzYB20GB2XKia','vufNq0i','Aw1Hz2uVCg5N','qNLjza','txbRDfG','ntq4oxbpyNjdDG','B25SB2fKzw5K','AeHqt1y','verqz2i','z2vFBMfPx2nOyq','y3rvuKW','zxjYB3i','AfrrwhC','CMvMigLTywDLoG','v2fwshK','CxvLCNLtzwXLyW','ndy2mZC4nwHXv2LRAq','ww1cuxq','y3zdwNa','AgfYlxjLzI1PBq','BgfPx2nOyxjFCG','v09wvLm','lxjLzI1PBwfNzq','C2vYDMvYrMLSzq','zwXLy3qTAw1HzW','y0nwzwG','Bxzptxq','tMfTzq','zLfwy08','y0PoEKO','DMr2qvC','tvvHweS','qNHIruG','DgfYz2v0','Exf5Cxm','tgf1sLi','ExvPx3jLzL9PBq','C3rVCMvezwXLDa','z2XVAfK','tKjlt3q','zNL4zeO','CMv2B2TLt2jQzq','zMLSzxm','mtH1v0DJA1O','r3HNDeO','s0T6Bvq','shrxtgy','ruz0ugy','C3jJ','rwjQsfK','yxLJvxu','z2DWvKq','B0zttxe','mMPQy1HUCG','svHYr0e','DgDztMi','zwXbssbJAgfYia','tKPKr0C','odi5mJmZugnWuKTk','y2LLtKq','rKfnAK8','ufbSBfe','EvLRAxi','yxqUifbSzwfZzq','wxfkCgy','v2Xvue0','s0rpB0u','qMPwBwi','C3rYAw5N','sMzcAei','uKjgqKy','y0nhAwS','CMvHzefZrgf0yq','s3rWA2e','lwj0BG','Df9UywLFy2HHCG','uxz0ww4','uMfmtxa','tvPerNe','Aw5NignHy2HLza','y29TzNL1AvvYBa','y2fJAguGzM9YBq','ssbbueNLNldLNydJGii','Bg1yvLa','mJG5nJe1EvPeExzI','C3rYAw5NAwz5','zMXLEa','zs1IDg4','yw5ZzMvYsw1HzW','zgf0ytPPBwfNzq','nhWZFdb8mNWX','oeH0rxP1uG','C25iBxm','Ew1Hv3q','ywDLoG','i25VDMvSywKTCG','rLPdzhC','BMfTzq','igzYB20Gy2fJAa','ue9tva','5lIk5lYG5AsX6lsLoIa','z2v0rwXLBwvUDa','D2fYBG','CMvMlwLTywDLlq','i25VDMvSywKTyW','ze9hruu','CMfUC2zLCL9PBq','z2uY','whfmCfy','zw1VDMuTAw1HzW','vez6zgG','yxbWBhK','z2LOq3K','ndbQAxDKt1G','zgf0yq','BLPACgi','Df9UB3zLBgfP','z2vFBM92zwXHAq','BM9Uzq','CML0zq','A0TvyMG','vu9pDNy','vuNLM77NIyC6ia','BMrxsfG','v2jdseW','mZG2mdmWz3nWvNLg','C3rVCMvszwfKtW','r1bIzMm'];_0x16ac=function(){return _0x2afec2;};return _0x16ac();}function updateNovelaiImagePreview(_0x5c677e){const _0x384512={};_0x384512[_0x4a2314(0x286,0x270,0x2e6,0x28f)]=_0x435b31(-0x142,-0x185,-0x1e1,-0x124)+_0x4a2314(0x24c,0x261,0x1d8,0x217),_0x384512[_0x435b31(-0x122,-0xb8,-0x104,-0x8c)]=_0x435b31(-0xe3,-0xd3,-0xe4,-0x8a)+'mage-previ'+_0x435b31(-0x130,-0xf5,-0xba,-0x13b)+_0x435b31(-0x24,-0xa2,-0x116,-0x43)+_0x4a2314(0x25c,0x299,0x2d0,0x1ee)+_0x4a2314(0x278,0x252,0x249,0x2e5)+'r',_0x384512[_0x435b31(-0xe5,-0xe8,-0x115,-0xa6)]='novelai-re'+_0x435b31(-0x135,-0xb9,-0x13b,-0xe8)+_0x435b31(-0x1a8,-0x12d,-0x132,-0x186),_0x384512[_0x4a2314(0x237,0x29b,0x225,0x248)]=_0x435b31(-0x91,-0x93,-0xe6,-0xdb),_0x384512[_0x4a2314(0x264,0x296,0x202,0x2e6)]=_0x4a2314(0x24d,0x24a,0x224,0x21d),_0x384512[_0x4a2314(0x1ff,0x24b,0x251,0x21a)]=_0x435b31(-0xe8,-0x8c,-0x93,-0x10b)+'x',_0x384512[_0x4a2314(0x1c7,0x17e,0x187,0x20e)]='1|3|4|2|0',_0x384512[_0x4a2314(0x223,0x22b,0x209,0x24b)]=_0x4a2314(0x22d,0x261,0x229,0x221);const _0x2fbb45=_0x384512,_0x450a01=document[_0x4a2314(0x23c,0x202,0x1da,0x1f6)+_0x435b31(-0x1bb,-0x174,-0x1b1,-0x1ac)](_0x2fbb45[_0x435b31(-0x77,-0xc8,-0xca,-0x13e)]);function _0x435b31(_0x256efb,_0x134409,_0x13479f,_0x17e0db){return _0x25fac9(_0x256efb-0x4b,_0x134409-0x1cd,_0x134409- -0x742,_0x256efb);}const _0x3ca191=document[_0x4a2314(0x1e6,0x1cb,0x259,0x1ea)+'tor'](_0x2fbb45[_0x4a2314(0x296,0x217,0x2dc,0x27a)]);function _0x4a2314(_0x103c9e,_0x191bc1,_0x2c6085,_0x3f15fd){return _0x25fac9(_0x103c9e-0x5a,_0x191bc1-0x3e,_0x103c9e- -0x3f4,_0x2c6085);}const _0xe5e754=document['getElement'+_0x4a2314(0x1da,0x246,0x1c5,0x20a)](_0x2fbb45[_0x435b31(-0x6d,-0xe8,-0x8a,-0xb3)]);if(_0x5c677e&&_0x5c677e[_0x4a2314(0x29e,0x305,0x2ee,0x248)](_0x435b31(-0x17a,-0x11e,-0xd8,-0x135))){_0x450a01[_0x435b31(-0x18b,-0x147,-0x161,-0x1c2)]=_0x5c677e,_0x450a01['style']['display']=_0x2fbb45[_0x435b31(-0x16a,-0x117,-0x15b,-0x18a)],_0x3ca191[_0x4a2314(0x290,0x2af,0x249,0x256)][_0x435b31(-0x106,-0xc6,-0x55,-0x7a)]=_0x2fbb45[_0x4a2314(0x264,0x20e,0x2e6,0x2c7)],_0xe5e754[_0x435b31(-0xc0,-0xbe,-0x8a,-0x11a)][_0x435b31(-0xbf,-0xc6,-0x6f,-0x135)]=_0x2fbb45[_0x435b31(-0x1aa,-0x14f,-0xcd,-0x179)];const _0xf0112f=_0x5c677e['split'](','),_0x1aa2db=_0xf0112f[-0x1*0x243+0xf55+-0xd12][_0x4a2314(0x2af,0x2c7,0x2c8,0x2ed)](':')[0x375+-0x1*0x1351+0xfdd][_0x4a2314(0x2af,0x264,0x244,0x2a7)](';')[-0x1af7+-0x1*-0x90d+0x11ea];nai3VibeTransferImageMimeType=_0x1aa2db,window['nai3VibeTr'+_0x4a2314(0x22f,0x20e,0x1fc,0x2ac)+'e']=_0xf0112f[0x246f+-0x110*-0x1a+-0x400e];const _0x433c30={};_0x433c30['id']=NAI_VIBE_CACHE_KEY,_0x433c30[_0x4a2314(0x249,0x2c2,0x1ec,0x214)]=_0x5c677e,dbs[_0x4a2314(0x2c9,0x255,0x28d,0x2da)+_0x435b31(-0x14a,-0x100,-0x128,-0x128)](_0x433c30);}else{const _0x16e753=_0x2fbb45['gZlNp'][_0x435b31(-0xeb,-0x9f,-0x52,-0x7a)]('|');let _0x44648d=0xdab+-0x78c+-0x61f*0x1;while(!![]){switch(_0x16e753[_0x44648d++]){case'0':window[_0x435b31(-0x81,-0x9c,-0xdd,-0xc6)+_0x435b31(-0x131,-0x11f,-0x13f,-0x134)+'e']=null;continue;case'1':_0x450a01[_0x435b31(-0xf3,-0x147,-0xd5,-0x1c8)]='';continue;case'2':_0xe5e754[_0x4a2314(0x290,0x30a,0x2ca,0x28d)][_0x4a2314(0x288,0x2c2,0x239,0x222)]=_0x2fbb45[_0x435b31(-0xcf,-0xea,-0x70,-0x148)];continue;case'3':_0x450a01[_0x4a2314(0x290,0x273,0x248,0x2cd)]['display']=_0x2fbb45[_0x4a2314(0x264,0x263,0x2a2,0x274)];continue;case'4':_0x3ca191['style'][_0x435b31(-0x7b,-0xc6,-0xa3,-0x92)]=_0x2fbb45[_0x435b31(-0xdf,-0x12b,-0xe1,-0xe8)];continue;}break;}}}function removeNovelaiImage(){function _0x52ef03(_0xff815f,_0x5cecb3,_0x25a6eb,_0x2b9940){return _0x325787(_0xff815f-0xa0,_0x5cecb3-0x1bf,_0x25a6eb-0xe1,_0xff815f);}const _0x2156f8={'MWESa':function(_0x56d282,_0x52f258){return _0x56d282(_0x52f258);}};function _0x40771c(_0x3f0a40,_0x423b20,_0x209f3c,_0x536ebc){return _0x25fac9(_0x3f0a40-0x22,_0x423b20-0x185,_0x423b20- -0x103,_0x209f3c);}_0x2156f8[_0x40771c(0x5f6,0x5b0,0x5bb,0x5c7)](updateNovelaiImagePreview,null),dbs[_0x40771c(0x523,0x4ed,0x4d8,0x544)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x3d5ae2){function _0x1bd6a7(_0x43a0fb,_0x1f4f8e,_0x300f05,_0xef488b){return _0x25fac9(_0x43a0fb-0x99,_0x1f4f8e-0x37,_0x43a0fb- -0x533,_0x300f05);}const _0x570643={'SMbNA':function(_0x6cd6e9,_0x3d4e1f){return _0x6cd6e9(_0x3d4e1f);},'BjVmb':_0x1bd6a7(0x189,0x109,0x148,0x116)+_0x3dcff9(0xb8,0xd2,0x148,0x10a)+'elAI\x20image'+':'};function _0x3dcff9(_0x1c56dd,_0x317b1d,_0x11645f,_0x54e944){return _0x325787(_0x1c56dd-0xaa,_0x317b1d- -0x11c,_0x11645f-0x1e8,_0x1c56dd);}const _0x1d2c6f=_0x3d5ae2['target'][_0x3dcff9(-0x13,0x4e,-0xd,0x64)][-0x2*0x7e3+0x345*-0x3+0x1995];if(!_0x1d2c6f)return;try{const _0x3b0fb9=await processUploadedImage(_0x1d2c6f,!![]);_0x570643['SMbNA'](updateNovelaiImagePreview,_0x3b0fb9);}catch(_0x5838ad){console['error'](_0x570643[_0x1bd6a7(0xdb,0xfd,0xb6,0x12a)],_0x5838ad),_0x570643[_0x1bd6a7(0x92,0x111,0x82,0x75)](alert,_0x1bd6a7(0x179,0xf9,0x116,0x191)+_0x5838ad['message']);}}function updateNovelaiCharRefImagePreview(_0x4d4478){const _0x346358={};_0x346358[_0x49d426(0x28c,0x272,0x2ae,0x27b)]=_0x49d426(0x1cf,0x1e1,0x1c3,0x185)+_0x49d426(0x1df,0x1fb,0x1da,0x1c2)+'r_ref';function _0x49d426(_0x20d792,_0x11d71a,_0x49c778,_0x1b5038){return _0x325787(_0x20d792-0xc6,_0x49c778-0x91,_0x49c778-0x144,_0x20d792);}_0x346358[_0x49d426(0x30c,0x321,0x2a5,0x237)]=_0x1804a7(0x526,0x4cf,0x599,0x521)+_0x1804a7(0x543,0x4f7,0x478,0x4cc)+_0x49d426(0x282,0x2c6,0x258,0x2b2)+'w-containe'+_0x1804a7(0x4fb,0x585,0x54c,0x562)+'u8-image-p'+'laceholder',_0x346358[_0x1804a7(0x48b,0x4f4,0x533,0x4fb)]='data:image',_0x346358[_0x49d426(0x1be,0x1d4,0x208,0x1bf)]=_0x1804a7(0x5fe,0x52f,0x55e,0x59d),_0x346358[_0x49d426(0x1f0,0x210,0x1f0,0x250)]='inline-fle'+'x',_0x346358[_0x1804a7(0x49e,0x4b6,0x531,0x4d9)]=_0x1804a7(0x55c,0x553,0x4d2,0x50f);const _0x3309c4=_0x346358,_0x306e32=document['getElement'+_0x1804a7(0x461,0x535,0x4ec,0x4bc)](_0x3309c4['DyWbI']),_0x5163db=document[_0x1804a7(0x46b,0x4e5,0x454,0x4c8)+'tor'](_0x3309c4[_0x49d426(0x2a1,0x2d6,0x2a5,0x26c)]),_0x869b2c=document['getElement'+_0x49d426(0x1df,0x244,0x1d4,0x1cb)](_0x49d426(0x2be,0x207,0x261,0x1ee)+'move-char-'+_0x49d426(0x2ac,0x26e,0x238,0x28d)+'btn');function _0x1804a7(_0x125bfb,_0x2cc2f1,_0x3d5ba7,_0xeecc48){return _0x25fac9(_0x125bfb-0x110,_0x2cc2f1-0x27,_0xeecc48- -0x112,_0x125bfb);}if(_0x4d4478&&_0x4d4478['startsWith'](_0x3309c4[_0x49d426(0x1d4,0x1e6,0x213,0x19a)])){_0x306e32['src']=_0x4d4478,_0x306e32['style'][_0x1804a7(0x53c,0x5bb,0x51b,0x56a)]=_0x3309c4[_0x1804a7(0x4c8,0x553,0x558,0x4f0)],_0x5163db['style']['display']=_0x1804a7(0x582,0x4b3,0x4e5,0x52f),_0x869b2c['style']['display']=_0x3309c4[_0x49d426(0x22e,0x211,0x1f0,0x214)];const _0x2a2653=_0x4d4478[_0x49d426(0x2e7,0x26c,0x2a9,0x2dd)](','),_0x3d2f88=_0x2a2653[0x1d2e+-0xc*0x128+-0xf4e]['split'](':')[0x6a1*0x1+0x246a+-0x2b0a][_0x49d426(0x253,0x28b,0x2a9,0x24d)](';')[0xcb*0x1d+0x5*0x2ef+-0x25aa];nai3CharRefImageMimeType=_0x3d2f88,window['nai3CharRe'+_0x1804a7(0x5c3,0x54c,0x52f,0x58a)]=_0x2a2653[0x1ede+0x2*0x1131+-0x413f*0x1];const _0x18635f={};_0x18635f['id']=NAI_CHAR_REF_CACHE_KEY,_0x18635f[_0x1804a7(0x4cd,0x4c0,0x577,0x52b)]=_0x4d4478,dbs[_0x1804a7(0x608,0x59a,0x591,0x5ab)+_0x1804a7(0x57e,0x4d8,0x556,0x530)](_0x18635f);}else _0x306e32[_0x49d426(0x20a,0x26c,0x201,0x19b)]='',_0x306e32[_0x1804a7(0x591,0x598,0x56b,0x572)][_0x49d426(0x302,0x226,0x282,0x250)]=_0x49d426(0x299,0x22f,0x247,0x20f),_0x5163db['style']['display']=_0x3309c4[_0x49d426(0x22d,0x233,0x1f1,0x16f)],_0x869b2c[_0x1804a7(0x58e,0x5c7,0x56d,0x572)][_0x1804a7(0x5d1,0x5da,0x557,0x56a)]=_0x49d426(0x22c,0x1f6,0x247,0x1c9),window[_0x1804a7(0x5af,0x519,0x50e,0x590)+_0x49d426(0x2a5,0x226,0x2a2,0x274)]=null;}function removeNovelaiCharRefImage(){const _0x4fcf3d={'TVApU':function(_0x5b8fd8,_0x8edc74){return _0x5b8fd8(_0x8edc74);}};function _0x3f4e07(_0x1c882a,_0x3c0861,_0x35a655,_0x5b1a4b){return _0x25fac9(_0x1c882a-0x128,_0x3c0861-0x7b,_0x5b1a4b- -0x32b,_0x1c882a);}function _0x12b240(_0x15841d,_0x38cc68,_0x55b0f7,_0x5833b0){return _0x325787(_0x15841d-0x95,_0x15841d- -0x6e,_0x55b0f7-0x1a,_0x38cc68);}_0x4fcf3d[_0x3f4e07(0x36b,0x313,0x2d5,0x34a)](updateNovelaiCharRefImagePreview,null),dbs[_0x12b240(0xf7,0xdb,0x162,0x16f)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x2d25d4){function _0x4e7f9c(_0x2004ec,_0x343b76,_0x1b951f,_0x199aa0){return _0x25fac9(_0x2004ec-0x1aa,_0x343b76-0xfa,_0x199aa0- -0x74c,_0x2004ec);}const _0x1d3a0b={'cutaM':function(_0x47d37c,_0x1b6d8f){return _0x47d37c(_0x1b6d8f);},'GPbfc':'Error\x20proc'+_0x477f64(0x419,0x43a,0x47d,0x42a)+_0x477f64(0x3d0,0x3c4,0x3a5,0x3f4)+'ref\x20image:','WbCHL':function(_0x69bf86,_0x3c7eea){return _0x69bf86(_0x3c7eea);},'SbXGi':function(_0x1fb82e,_0x5ee67f){return _0x1fb82e+_0x5ee67f;},'Kttud':_0x4e7f9c(-0x85,-0x88,-0x49,-0xa0)},_0x5d2efc=_0x2d25d4[_0x477f64(0x37c,0x3ad,0x3a5,0x36f)][_0x4e7f9c(-0x194,-0x14d,-0x145,-0x157)][-0x22d3+0x9*0x2eb+0x890];if(!_0x5d2efc)return;function _0x477f64(_0x656542,_0xeb0225,_0x428d92,_0x2d48e0){return _0x25fac9(_0x656542-0xef,_0xeb0225-0x10a,_0xeb0225- -0x23f,_0x428d92);}try{const _0x5295d1=await _0x1d3a0b[_0x477f64(0x419,0x46a,0x489,0x3ff)](processUploadedImage,_0x5d2efc);_0x1d3a0b['cutaM'](updateNovelaiCharRefImagePreview,_0x5295d1);}catch(_0x246994){console[_0x4e7f9c(-0x1e6,-0x10d,-0x102,-0x176)](_0x1d3a0b[_0x477f64(0x45f,0x40b,0x3b3,0x41b)],_0x246994),_0x1d3a0b[_0x477f64(0x467,0x408,0x406,0x46f)](alert,_0x1d3a0b['SbXGi'](_0x1d3a0b[_0x4e7f9c(-0xac,-0x14d,-0x131,-0xe8)],_0x246994['message']));}}function updateComfyUIImagePreview(_0x2f142c){const _0x204a2a={'UKWxF':function(_0x4f111f){return _0x4f111f();},'kgBzA':_0x2bb553(0x47c,0x4ea,0x450,0x4c9)+_0x2bb553(0x4f5,0x4ab,0x4cd,0x4bc),'gihCy':_0x34ebe5(0x487,0x45d,0x4a9,0x49d)+_0x2bb553(0x548,0x4da,0x4d4,0x53c)+_0x2bb553(0x4d4,0x4fb,0x45e,0x54e),'YmBQt':_0x34ebe5(0x468,0x3ee,0x48e,0x470),'LcZdu':function(_0x1e598f,_0x73e6be){return _0x1e598f!==_0x73e6be;},'Ktpka':function(_0x3f0200,_0x1fa496){return _0x3f0200===_0x1fa496;},'gKUOG':_0x2bb553(0x483,0x495,0x4e6,0x440),'uOPRi':_0x2bb553(0x49c,0x4ab,0x424,0x446),'WVkwK':'inline-fle'+'x','HlUdB':_0x2bb553(0x50d,0x4b9,0x4b3,0x544)+'3','fXLFi':_0x34ebe5(0x448,0x3cb,0x4ae,0x41e),'IXrGA':_0x34ebe5(0x428,0x405,0x3d0,0x41a)};function _0x34ebe5(_0x5900ce,_0x1b1baf,_0x230fb1,_0x13b765){return _0x25fac9(_0x5900ce-0x13c,_0x1b1baf-0xcd,_0x5900ce- -0x1f9,_0x1b1baf);}const _0x2ee533=document[_0x2bb553(0x4ef,0x4ad,0x52f,0x483)+_0x2bb553(0x48d,0x4b9,0x492,0x44a)](_0x204a2a[_0x34ebe5(0x45c,0x47b,0x486,0x4d5)]),_0x25e793=document[_0x34ebe5(0x3e1,0x430,0x3e9,0x3e6)+_0x34ebe5(0x4b2,0x4ca,0x523,0x495)]('#comfyui-i'+_0x2bb553(0x53c,0x511,0x54e,0x51c)+_0x34ebe5(0x454,0x466,0x4c7,0x437)+_0x2bb553(0x55f,0x51d,0x580,0x544)+'tu8-image-'+_0x34ebe5(0x473,0x42e,0x48b,0x446)+'r'),_0x250292=document[_0x34ebe5(0x437,0x40d,0x3e4,0x3f7)+'ById'](_0x204a2a[_0x2bb553(0x4fa,0x4eb,0x54e,0x49d)]);function _0x2bb553(_0x43dc6f,_0x33b274,_0x80a5ae,_0x20226a){return _0x25fac9(_0x43dc6f-0x198,_0x33b274-0x5c,_0x43dc6f- -0x141,_0x20226a);}_0x2ee533[_0x34ebe5(0x402,0x43c,0x425,0x3fe)]&&_0x2ee533[_0x34ebe5(0x402,0x472,0x425,0x44a)][_0x34ebe5(0x499,0x448,0x421,0x4fc)](_0x204a2a[_0x2bb553(0x49b,0x4ec,0x429,0x4c9)])&&_0x204a2a['LcZdu'](_0x2ee533['src'],_0x2f142c)&&URL[_0x34ebe5(0x3fb,0x44b,0x435,0x400)+_0x2bb553(0x494,0x492,0x50b,0x4ca)](_0x2ee533[_0x2bb553(0x4ba,0x455,0x4ba,0x4ec)]);if(_0x2f142c)_0x204a2a[_0x2bb553(0x4d3,0x4c3,0x48a,0x4b3)](_0x204a2a[_0x2bb553(0x566,0x53d,0x4e4,0x54f)],_0x204a2a['uOPRi'])?_0x204a2a[_0x34ebe5(0x466,0x492,0x4c3,0x49f)](_0x350194):(_0x2ee533[_0x2bb553(0x4ba,0x49a,0x4d1,0x44b)]=_0x2f142c,_0x2ee533['style'][_0x34ebe5(0x483,0x480,0x411,0x4bb)]=_0x2bb553(0x56e,0x5bf,0x53b,0x532),_0x25e793[_0x2bb553(0x543,0x4f2,0x4d0,0x4e2)][_0x2bb553(0x53b,0x584,0x547,0x51c)]=_0x34ebe5(0x448,0x4b5,0x3d7,0x47e),_0x250292[_0x2bb553(0x543,0x57a,0x534,0x5a8)][_0x34ebe5(0x483,0x4da,0x449,0x4a1)]=_0x204a2a['WVkwK']);else{const _0x37e5d1=_0x204a2a[_0x34ebe5(0x496,0x4f9,0x43c,0x45f)][_0x34ebe5(0x4aa,0x514,0x4ea,0x512)]('|');let _0x24310c=-0x1ba3+0xffd+0xba6;while(!![]){switch(_0x37e5d1[_0x24310c++]){case'0':_0x250292[_0x2bb553(0x543,0x4d5,0x58b,0x59d)]['display']=_0x204a2a[_0x2bb553(0x54d,0x5ad,0x53a,0x4d0)];continue;case'1':_0x25e793[_0x2bb553(0x543,0x547,0x4e5,0x4f7)][_0x2bb553(0x53b,0x579,0x521,0x4d0)]=_0x204a2a[_0x2bb553(0x4c0,0x536,0x496,0x49b)];continue;case'2':_0x2ee533[_0x2bb553(0x543,0x4f0,0x5ab,0x56e)][_0x34ebe5(0x483,0x477,0x4b8,0x4a6)]=_0x2bb553(0x500,0x4c2,0x580,0x489);continue;case'3':comfyuiImageObjectURL=null;continue;case'4':window[_0x2bb553(0x47d,0x4c6,0x4f7,0x43d)+_0x34ebe5(0x47d,0x4a4,0x439,0x481)]=null;continue;case'5':_0x2ee533[_0x34ebe5(0x402,0x3b1,0x414,0x45c)]='';continue;}break;}}}function removeComfyUIImage(){updateComfyUIImagePreview(null),dbs['storeDelet'+'e'](COMFYUI_REF_CACHE_KEY);}async function handleImageUpload2(_0xaea49){function _0x447196(_0x2d399e,_0x768ca4,_0x449f6c,_0x375a15){return _0x325787(_0x2d399e-0x3a,_0x449f6c-0xd9,_0x449f6c-0xce,_0x375a15);}function _0x130465(_0xd2127a,_0x3c8d04,_0x2ca65e,_0x5d4274){return _0x325787(_0xd2127a-0x45,_0x3c8d04-0x17e,_0x2ca65e-0x57,_0x2ca65e);}const _0x6224a7={'IDDVo':function(_0x209323,_0x468ca6){return _0x209323(_0x468ca6);},'MZDFq':_0x447196(0x2b5,0x28e,0x2ef,0x297)+_0x130465(0x320,0x310,0x28f,0x359),'gkAlZ':function(_0x374e52){return _0x374e52();},'XqLpV':_0x130465(0x30d,0x2b9,0x2a0,0x2c5),'WOVVS':function(_0x133fab){return _0x133fab();},'oFSMq':function(_0x53697b,_0x12e5bf){return _0x53697b===_0x12e5bf;},'nZZpb':_0x130465(0x29e,0x2cc,0x325,0x2bc),'GxgtJ':function(_0x560f0b,_0x46eac3){return _0x560f0b(_0x46eac3);},'TFzdh':'image','ndWHX':_0x447196(0x204,0x1da,0x23b,0x1ce),'AcaPn':function(_0x1ae0f3,_0x58510d,_0x2bbd33){return _0x1ae0f3(_0x58510d,_0x2bbd33);},'UOOvv':_0x130465(0x2bd,0x321,0x32d,0x347),'EGQkO':function(_0x424d9f,_0x439492){return _0x424d9f(_0x439492);},'bOEjC':_0x447196(0x1d6,0x1c0,0x20a,0x1d0)+'回数据:','vdvAW':function(_0x4c20d9,_0x125acb){return _0x4c20d9===_0x125acb;},'foBvD':_0x447196(0x342,0x2ba,0x306,0x2c1),'FskHo':function(_0x27bfaf,_0x50720a){return _0x27bfaf+_0x50720a;},'qQwjP':_0x130465(0x333,0x322,0x2dc,0x2b0),'UyxzV':_0x130465(0x34b,0x379,0x2fe,0x3e2),'qJLdH':function(_0x3bc55b,_0x5d8727){return _0x3bc55b(_0x5d8727);},'tOEoO':_0x130465(0x2c7,0x2bc,0x330,0x23a)+':\x20','UomqL':function(_0x173ed9){return _0x173ed9();}},_0x12848f=extension_settings[extensionName],_0x3a7590=_0xaea49[_0x447196(0x1ce,0x21a,0x23a,0x29d)]['files'][0x21a9+0x1335+-0x34de];if(!_0x3a7590)return;try{if(_0x6224a7[_0x447196(0x255,0x243,0x24d,0x2cf)](_0x6224a7[_0x130465(0x31b,0x331,0x3aa,0x38a)],_0x6224a7[_0x447196(0x248,0x2fe,0x28c,0x220)])){const _0x34c1ce=await _0x6224a7[_0x130465(0x34e,0x356,0x372,0x343)](processUploadedImageToBlob,_0x3a7590),_0x16a2eb=URL['createObje'+_0x447196(0x1bc,0x1b2,0x223,0x1cf)](_0x34c1ce);comfyuiImageObjectURL=_0x16a2eb,_0x6224a7[_0x130465(0x35a,0x2ea,0x2a6,0x2ef)](updateComfyUIImagePreview,_0x16a2eb);const _0x4be84b=new FormData();_0x4be84b['append'](_0x6224a7[_0x447196(0x297,0x23c,0x287,0x2e3)],_0x34c1ce,_0x3a7590['name']);let _0x5a1809=_0x12848f[_0x447196(0x22d,0x2d6,0x269,0x25c)][_0x447196(0x2ac,0x2bc,0x2ab,0x285)]();if(!_0x5a1809){if(_0x6224a7[_0x447196(0x2b6,0x21d,0x24d,0x273)](_0x6224a7[_0x447196(0x26c,0x2a5,0x294,0x2a2)],_0x6224a7[_0x130465(0x317,0x339,0x323,0x2de)])){alert(_0x6224a7[_0x447196(0x1fa,0x236,0x267,0x2c9)]),_0x6224a7[_0x447196(0x1af,0x29b,0x22e,0x24e)](removeComfyUIImage);return;}else{_0x6224a7[_0x130465(0x350,0x356,0x2e8,0x2e6)](_0x531484,_0x6224a7[_0x447196(0x2e9,0x2dd,0x267,0x256)]),_0x6224a7[_0x130465(0x391,0x3ac,0x381,0x3f0)](_0x4faddf);return;}}const _0x2159f0=await _0x6224a7['AcaPn'](fetch,_0x5a1809+(_0x447196(0x31b,0x342,0x2df,0x315)+_0x447196(0x2a6,0x2d2,0x303,0x2b7)),{'method':_0x6224a7[_0x447196(0x257,0x23f,0x292,0x23c)],'body':_0x4be84b});if(_0x2159f0['ok']){const _0x5acab7=await _0x2159f0['json']();window[_0x447196(0x245,0x26c,0x20c,0x23a)+_0x447196(0x24d,0x2d1,0x2c4,0x272)]=_0x5acab7[_0x447196(0x23e,0x258,0x27a,0x224)],_0x6224a7[_0x447196(0x2ee,0x252,0x2cf,0x341)](addLog,_0x447196(0x27a,0x2d9,0x2bb,0x253)+'器返回数据:\x20'+JSON['stringify'](_0x5acab7)),console[_0x130465(0x2fa,0x375,0x3e1,0x3c2)](_0x6224a7[_0x130465(0x3a0,0x398,0x40c,0x3d8)],_0x5acab7);const _0x502eac=new FileReader();_0x502eac[_0x447196(0x275,0x1f5,0x21f,0x1f8)]=()=>{function _0x57dd7d(_0x5999ad,_0x2d9a32,_0x3bfead,_0x4175f7){return _0x447196(_0x5999ad-0x64,_0x2d9a32-0xa0,_0x2d9a32- -0x1e5,_0x4175f7);}function _0x2b23db(_0x16d29a,_0x3c8ec0,_0x3c5757,_0x3de791){return _0x130465(_0x16d29a-0xcc,_0x16d29a- -0x41f,_0x3de791,_0x3de791-0xc4);}if(_0x6224a7[_0x57dd7d(0x51,0xa0,0x77,0xef)]!==_0x6224a7[_0x2b23db(-0xf5,-0x12b,-0x14c,-0xb0)])_0x2ccbf6[_0x2b23db(-0x156,-0x158,-0x181,-0x135)]('Error\x20load'+_0x57dd7d(0xb9,0x83,0x1e,0xc2)+_0x2b23db(-0x9f,-0xa3,-0x91,-0x116)+_0x57dd7d(-0x17,0x33,0x3a,0x5d)+_0x2b23db(-0x103,-0x126,-0x176,-0x153),_0x1f1c42);else{const _0x189f87=_0x502eac['result'],_0x498274={};_0x498274[_0x2b23db(-0xef,-0x105,-0xfe,-0xd1)]=_0x189f87,_0x498274['serverFile'+_0x57dd7d(0x34,0x4f,0x8f,0x32)]=_0x5acab7[_0x2b23db(-0x100,-0x14f,-0xed,-0xf5)];const _0x295a83=_0x498274,_0x211c92={};_0x211c92['id']=COMFYUI_REF_CACHE_KEY,_0x211c92[_0x57dd7d(0x50,0xa6,0x109,0x30)]=_0x295a83,dbs[_0x2b23db(-0x6f,-0x7e,-0x9a,-0x1b)+'rite'](_0x211c92);}},_0x502eac[_0x447196(0x261,0x1f1,0x261,0x295)+_0x447196(0x334,0x2e0,0x2d6,0x290)](_0x34c1ce);}else{if(_0x6224a7[_0x130465(0x2e2,0x2dc,0x28a,0x301)](_0x6224a7[_0x447196(0x2a5,0x2e6,0x2d5,0x340)],_0x6224a7['foBvD'])){const _0x3b2b04=await _0x2159f0[_0x130465(0x3b0,0x3ae,0x3d8,0x3be)]();alert(_0x6224a7[_0x130465(0x365,0x376,0x306,0x35e)](_0x6224a7['qQwjP'],_0x3b2b04)),_0x6224a7[_0x130465(0x38a,0x374,0x383,0x346)](addLog,_0x130465(0x38b,0x3a3,0x3f4,0x368)+_0x447196(0x29e,0x383,0x305,0x325)+_0x3b2b04),console[_0x447196(0x1d2,0x232,0x224,0x1ba)](_0x6224a7[_0x447196(0x249,0x24f,0x2b6,0x2f0)],_0x3b2b04),_0x6224a7[_0x447196(0x348,0x285,0x307,0x2c7)](removeComfyUIImage);}else _0x6224a7[_0x447196(0x1b8,0x277,0x22e,0x26c)](_0x4095a6);}}else{const _0x571328=_0x509204[_0x130465(0x24d,0x2b6,0x2e0,0x2f1)],_0xf934b={};_0xf934b[_0x130465(0x2ba,0x330,0x32f,0x39e)]=_0x571328,_0xf934b[_0x130465(0x28c,0x2d5,0x2a9,0x332)+'Name']=_0x12eda4[_0x130465(0x2fd,0x31f,0x37f,0x334)];const _0x5ab762=_0xf934b,_0x32b8e5={};_0x32b8e5['id']=_0x15e03c,_0x32b8e5[_0x130465(0x3a2,0x330,0x351,0x35b)]=_0x5ab762,_0x2513de[_0x447196(0x29f,0x2cf,0x30b,0x352)+_0x447196(0x2bc,0x2cf,0x290,0x239)](_0x32b8e5);}}catch(_0x3329d4){_0x6224a7[_0x130465(0x3bc,0x363,0x3d3,0x3e3)](alert,_0x6224a7['tOEoO']+_0x3329d4[_0x447196(0x27a,0x2e3,0x2b5,0x2a0)]),console[_0x130465(0x301,0x2c9,0x25b,0x302)](_0x447196(0x21e,0x26a,0x217,0x1ff)+':',_0x3329d4),_0x6224a7[_0x447196(0x2ae,0x2cb,0x2be,0x2bf)](addLog,_0x447196(0x320,0x32e,0x2fe,0x293)+_0x447196(0x319,0x31a,0x305,0x36e)+JSON[_0x447196(0x276,0x2cc,0x26e,0x205)](_0x3329d4)),_0x6224a7['UomqL'](removeComfyUIImage);}}async function loadCachedImages(){const _0x1ec14d={'bwVws':_0x336401(0xb5,0x6a,0x13,0x41)+_0x336401(0x99,0x27,0x3e,0x52)+_0x1f5643(0x482,0x492,0x508,0x446)+_0x1f5643(0x4ab,0x467,0x482,0x402),'YqJpf':function(_0x2e958a,_0x46b16a){return _0x2e958a(_0x46b16a);},'KKzmT':function(_0x31e137,_0x14b2d2){return _0x31e137+_0x14b2d2;},'cBoag':_0x336401(0x98,0x5a,0xcc,0xa0),'luQZS':'previewIma'+_0x1f5643(0x462,0x4cf,0x4f3,0x500),'mvOMt':_0x336401(-0x45,0x9,-0x30,0xa)+_0x1f5643(0x4a8,0x518,0x49c,0x54d)+'-btn','wOAnS':'block','NBKOt':_0x336401(0x2c,-0x11,-0x4a,-0x6f),'cCGik':_0x1f5643(0x51c,0x545,0x50c,0x4d6)+'x','UAgCB':_0x1f5643(0x4f5,0x4b0,0x52f,0x4a9),'pNGYd':function(_0x3034d3,_0x30886b){return _0x3034d3(_0x30886b);},'yYkir':_0x336401(-0x50,-0x64,-0x1c,-0xba),'cJNzJ':function(_0x41b565,_0x167383){return _0x41b565===_0x167383;},'CnImx':_0x336401(0x8,-0x46,-0x3f,-0x7f),'vtyEe':function(_0x418f1d,_0x4986b9){return _0x418f1d(_0x4986b9);},'cCVeh':_0x1f5643(0x4eb,0x50d,0x571,0x4bf)+_0x1f5643(0x4d5,0x4a9,0x494,0x4c2)+'\x20NovelAI\x20C'+_0x1f5643(0x3de,0x459,0x417,0x4d8)+_0x1f5643(0x4db,0x4b8,0x44d,0x506),'wpuRq':function(_0x19a7b7,_0x2898b){return _0x19a7b7(_0x2898b);},'PPllQ':function(_0x20f860,_0x73ac64){return _0x20f860===_0x73ac64;},'VLVxX':_0x1f5643(0x43e,0x49e,0x476,0x42e),'NQZoy':'TFvvi','HtWLf':function(_0x48b802,_0x459939){return _0x48b802(_0x459939);},'RBFBF':_0x1f5643(0x5a4,0x52a,0x4c9,0x59a)+_0x336401(0x2c,0x6c,0xc,0xc4)+_0x336401(-0xc7,-0x87,-0xdd,-0x25)+_0x336401(0x36,-0x36,-0x11,-0x8c)+_0x336401(-0x88,-0x48,-0x8a,0x5)+'\x20re-upload'+_0x1f5643(0x593,0x543,0x5b0,0x514)+'\x20cache\x20to\x20'+_0x336401(0x3b,0x1,-0x54,0x7e)+_0x1f5643(0x550,0x549,0x54c,0x5c3),'kwqQA':function(_0x16e88a,_0x3bc41b){return _0x16e88a===_0x3bc41b;},'ggpVD':_0x336401(-0x3e,-0x1,-0x53,0x77),'aycUu':_0x336401(-0x2c,0x2c,0x7a,0x2c)+_0x1f5643(0x473,0x4a9,0x4e5,0x4de)+_0x336401(0x76,0x58,0x57,0xca)+_0x336401(-0x38,0xc,0x2a,-0x25)};function _0x336401(_0x44141b,_0x3b547e,_0x29da5c,_0x2478a7){return _0x325787(_0x44141b-0xae,_0x3b547e- -0x1c7,_0x29da5c-0x8a,_0x44141b);}await dbs['openDB']();function _0x1f5643(_0x550631,_0x427572,_0x13af47,_0x5993e3){return _0x325787(_0x550631-0xc4,_0x427572-0x31a,_0x13af47-0x12f,_0x13af47);}try{if(_0x1ec14d[_0x336401(-0x4c,-0x49,-0x1a,-0x89)]===_0x1ec14d[_0x336401(0x7,-0x49,-0x6,-0x6e)]){const _0xfdf2e=await dbs[_0x336401(-0x6f,-0x9,-0x45,-0x67)+_0x1f5643(0x4e2,0x4fa,0x534,0x577)](NAI_VIBE_CACHE_KEY);_0xfdf2e&&_0xfdf2e[_0x336401(0x6d,-0x15,-0x4f,0x4f)]&&updateNovelaiImagePreview(_0xfdf2e['data']);}else _0x24a224['error'](_0x1ec14d[_0x336401(0x6e,0x5f,0x27,0x2b)],_0xa4c5b7),_0x1ec14d['YqJpf'](_0x5a124d,_0x1ec14d[_0x336401(-0xe,-0x5a,-0x1a,-0xa6)](_0x1ec14d[_0x336401(0x4c,0x33,-0xe,0x8c)],_0x28113f[_0x336401(-0x20,0x15,0x5,0x30)]));}catch(_0x17b8aa){console[_0x336401(-0xe4,-0x7c,-0x51,-0x78)](_0x1f5643(0x582,0x50d,0x554,0x520)+_0x336401(0x34,-0x38,-0x29,-0x2b)+_0x336401(-0x2d,-0x91,-0x55,-0xee)+_0x1f5643(0x528,0x524,0x55a,0x59f),_0x17b8aa);}try{if(_0x1ec14d[_0x336401(-0x9e,-0x6a,-0x14,-0xc8)](_0x336401(0x13,-0x46,-0xb4,-0x43),_0x1ec14d[_0x336401(-0x27,0x52,0x6b,0x63)])){const _0x136ced=await dbs[_0x336401(-0x46,-0x9,0x2a,-0x13)+_0x336401(-0x3f,0x19,0x22,0xa)](NAI_CHAR_REF_CACHE_KEY);_0x136ced&&_0x136ced['data']&&_0x1ec14d[_0x336401(0x16,0x48,-0x9,0x40)](updateNovelaiCharRefImagePreview,_0x136ced[_0x1f5643(0x518,0x4cc,0x47f,0x475)]);}else{const _0x1cc001=_0x39e16b[_0x336401(-0x1b,-0x22,-0x37,0x29)+_0x1f5643(0x41b,0x45d,0x3e7,0x41c)](_0x1ec14d[_0x336401(-0x6d,0x5,-0x22,-0x13)]),_0x42dfd5=_0x20a22f[_0x336401(-0x16,-0x78,-0xf,-0x9e)+_0x336401(0xb,0x59,-0x28,0xd9)](_0x1f5643(0x4e1,0x4fe,0x53f,0x50c)+_0x1f5643(0x58e,0x50c,0x4b6,0x51f)+_0x336401(0x49,-0x5,-0x7,0x76)+_0x1f5643(0x525,0x52f,0x581,0x4f6)+_0x336401(0x54,-0x2,-0x30,-0xd)+_0x336401(0x31,0x1a,0x14,-0x25)+'r'),_0x14b88c=_0x3e3f12['getElement'+_0x336401(-0x4,-0x84,-0x15,-0xfd)](_0x1ec14d[_0x336401(-0x6b,-0x6d,-0xa1,-0x2)]);if(_0x4531e4&&_0x148af7[_0x1f5643(0x56c,0x521,0x51f,0x510)](_0x1f5643(0x476,0x4b3,0x4eb,0x47e))){_0x1cc001[_0x1f5643(0x4e5,0x48a,0x4bd,0x4c7)]=_0x4920ba,_0x1cc001['style']['display']=_0x1ec14d[_0x1f5643(0x3d4,0x451,0x483,0x3d2)],_0x42dfd5[_0x336401(0x76,0x32,0x3b,-0x48)]['display']=_0x1ec14d['NBKOt'],_0x14b88c[_0x1f5643(0x4a5,0x513,0x4d4,0x557)][_0x1f5643(0x529,0x50b,0x534,0x4b2)]=_0x1ec14d[_0x336401(-0x6f,-0x40,-0x80,-0x4f)];const _0x37c90b=_0x47d6c5[_0x336401(0x9b,0x51,0x28,0x4b)](','),_0x5e9bdd=_0x37c90b[-0x1475+-0x8a9*-0x1+0xbcc*0x1][_0x1f5643(0x53b,0x532,0x4f4,0x539)](':')[-0x1*0x1eaf+0x1458+0xa58][_0x1f5643(0x59f,0x532,0x4e7,0x547)](';')[-0xb*0x217+-0x1*-0x5c8+0x1135];_0xfad814=_0x5e9bdd,_0x190777[_0x1f5643(0x55f,0x535,0x4d6,0x58c)+'ansferImag'+'e']=_0x37c90b[-0xe90+0x3*-0x8+0xea9];const _0x597236={};_0x597236['id']=_0x575762,_0x597236[_0x336401(-0x56,-0x15,0x1b,-0x86)]=_0x193652,_0x3639b2[_0x1f5643(0x594,0x54c,0x579,0x4ff)+_0x336401(-0x7e,-0x10,0x18,0x2d)](_0x597236);}else{const _0x1afe8e=_0x336401(0x15,-0x2d,-0x94,-0x9b)[_0x336401(0x4f,0x51,0x55,0x56)]('|');let _0x1e3469=0x95*-0x37+-0x1f4b+0x1fa7*0x2;while(!![]){switch(_0x1afe8e[_0x1e3469++]){case'0':_0x42dfd5[_0x1f5643(0x58d,0x513,0x4c2,0x578)][_0x1f5643(0x57d,0x50b,0x503,0x4ea)]=_0x1ec14d[_0x336401(-0x85,-0x86,-0x3e,-0xcf)];continue;case'1':_0xcd6964[_0x1f5643(0x565,0x535,0x5ac,0x54d)+_0x1f5643(0x4bc,0x4b2,0x4fd,0x50a)+'e']=null;continue;case'2':_0x14b88c[_0x1f5643(0x550,0x513,0x49d,0x510)]['display']=_0x1ec14d[_0x1f5643(0x437,0x481,0x4fe,0x4d8)];continue;case'3':_0x1cc001[_0x336401(-0x17,0x32,0x6e,-0x3e)][_0x1f5643(0x4f2,0x50b,0x528,0x4e8)]=_0x1ec14d['NBKOt'];continue;case'4':_0x1cc001[_0x1f5643(0x429,0x48a,0x48b,0x452)]='';continue;}break;}}}}catch(_0x4c69fe){console['error'](_0x1ec14d[_0x336401(-0xf,-0x6e,-0x50,0xc)],_0x4c69fe);}try{const _0x109d5c=await dbs['storeReadO'+_0x336401(-0x5f,0x19,-0x33,0x2b)](COMFYUI_REF_CACHE_KEY);if(_0x109d5c&&_0x109d5c['data']&&_0x109d5c[_0x336401(-0x31,-0x15,0x55,-0x60)][_0x1f5643(0x47e,0x4cc,0x4e2,0x459)]&&_0x109d5c['data'][_0x336401(-0x34,-0x70,-0x57,-0x5c)+'Name']){const _0x43bc82=_0x109d5c[_0x1f5643(0x51f,0x4cc,0x4fa,0x528)],_0x275664=await _0x1ec14d[_0x336401(-0x27,-0x47,-0xbe,-0x58)](fetch,_0x43bc82['data']),_0xa512be=await _0x275664[_0x336401(0x9,0x14,0x50,0x34)](),_0x2b29e3=URL[_0x1f5643(0x48c,0x44e,0x3e6,0x45e)+'ctURL'](_0xa512be);_0x1ec14d[_0x336401(0x65,0x39,0x9e,-0x23)](updateComfyUIImagePreview,_0x2b29e3),comfyuiImageObjectURL=_0x2b29e3,window['comfyuican'+_0x336401(0x1,0x24,0x6f,0x58)]=_0x43bc82[_0x1f5643(0x4ee,0x471,0x49d,0x413)+'Name'],_0x1ec14d[_0x1f5643(0x54d,0x51a,0x52c,0x554)](addLog,'从缓存加载Comfy'+_0x1f5643(0x519,0x4d4,0x4f7,0x49e)+_0x43bc82[_0x336401(-0x12,-0x70,-0x2b,-0xea)+'Name']),console[_0x336401(0x94,0x30,-0x13,0x5e)](_0x1f5643(0x515,0x52a,0x57a,0x520)+_0x336401(0x9b,0x6c,0xb8,0x9e)+_0x336401(-0x2d,-0x25,0xf,-0x6b)+_0x1f5643(0x51e,0x52d,0x53e,0x519)+_0x43bc82['serverFile'+_0x1f5643(0x4c3,0x475,0x492,0x4ef)]);}else{if(_0x109d5c&&_0x1ec14d[_0x1f5643(0x480,0x497,0x461,0x4e4)](typeof _0x109d5c['data'],_0x1ec14d[_0x336401(0x36,0x2,0x10,-0x74)])){if(_0x1ec14d[_0x336401(0x0,-0x6a,-0x83,-0x65)](_0x1ec14d[_0x1f5643(0x4d1,0x4f4,0x563,0x50b)],'TFvvi')){const _0xfc78c1=await _0x1ec14d[_0x336401(-0xc0,-0x59,-0xa5,-0x6c)](fetch,_0x109d5c[_0x336401(-0x4c,-0x15,0x42,-0x48)]),_0x403983=await _0xfc78c1[_0x336401(-0x6e,0x14,-0x3f,0x4)](),_0x491c92=URL[_0x336401(-0x13,-0x93,-0x74,-0x28)+_0x1f5643(0x3e3,0x464,0x431,0x48a)](_0x403983);updateComfyUIImagePreview(_0x491c92),comfyuiImageObjectURL=_0x491c92,console[_0x1f5643(0x519,0x4c0,0x495,0x46f)](_0x1ec14d[_0x1f5643(0x504,0x4a0,0x4ec,0x4d6)]);}else{_0x3389d8[_0x1f5643(0x415,0x48a,0x50a,0x4c0)]=_0x48ddd7,_0x1789cd[_0x336401(0x85,0x32,0xb2,-0x2f)]['display']=_0x1ec14d[_0x1f5643(0x438,0x451,0x3fe,0x49c)],_0x5f2a07['style'][_0x1f5643(0x497,0x50b,0x56d,0x58c)]=_0x1ec14d[_0x1f5643(0x41b,0x481,0x4d6,0x4dc)],_0x51bb3f[_0x1f5643(0x591,0x513,0x4ed,0x585)][_0x336401(0x69,0x2a,0x5d,0x16)]=_0x1ec14d[_0x1f5643(0x47f,0x4a1,0x473,0x480)];const _0x11e549=_0x53ede7[_0x1f5643(0x4de,0x532,0x595,0x5a3)](','),_0x4172bf=_0x11e549[0x18bc+-0x93b+-0xf81]['split'](':')[-0xfc6*-0x1+-0x8cf+-0x6f6][_0x336401(-0x8,0x51,0x3e,0x4b)](';')[0x1*-0x1969+0x9ee+0xf7b];_0x16cff9=_0x4172bf,_0x35bf97[_0x336401(0x39,0x54,0x8,0x9c)+'ansferImag'+'e']=_0x11e549[-0x1*-0x23b1+0x237a+-0x472a];const _0x205d55={};_0x205d55['id']=_0x87a9aa,_0x205d55[_0x336401(-0x63,-0x15,-0x27,0x30)]=_0x1b69ac,_0x563bf5[_0x336401(0x86,0x6b,0xa9,0xd0)+_0x1f5643(0x491,0x4d1,0x48a,0x4ba)](_0x205d55);}}}}catch(_0x5c43a2){_0x1ec14d['kwqQA'](_0x1f5643(0x48d,0x4ad,0x442,0x4c7),_0x1ec14d[_0x1f5643(0x475,0x48d,0x42d,0x47a)])?(_0x1ec14d[_0x1f5643(0x526,0x52c,0x558,0x5a5)](_0x1e3a0d,null),_0x1493a1['storeDelet'+'e'](_0x2eb421)):console['error'](_0x1ec14d[_0x1f5643(0x40b,0x48c,0x4e6,0x40d)],_0x5c43a2);}}export function initImageUpload(_0x48666c){const _0x292c80={'snHms':function(_0x1f7eb0,_0x47d8e3){return _0x1f7eb0(_0x47d8e3);},'JfBhB':function(_0x2f224e,_0xe65ba2){return _0x2f224e+_0xe65ba2;},'znaYw':'图片处理或上传时出错'+':\x20','CoiRZ':_0x8359dc(-0x180,-0x121,-0x13f,-0x13a)+':','uCwDc':function(_0x28c551,_0xd37275){return _0x28c551===_0xd37275;},'PWiMF':_0x8359dc(-0x17a,-0x130,-0x186,-0x140),'iNaCE':function(_0x56eeee){return _0x56eeee();},'kBRuN':'imageInput'+_0x11882b(0x5b0,0x511,0x5ce,0x56b)+_0x11882b(0x585,0x546,0x59f,0x555),'NJdGG':function(_0xd926b7,_0x31a197){return _0xd926b7!==_0x31a197;},'fQVcO':_0x11882b(0x4fe,0x501,0x515,0x4ba),'FAMjO':'imageInput'+'2','EFtPf':function(_0x14dc7e){return _0x14dc7e();},'hHPOV':function(_0x574ef2){return _0x574ef2();},'ArfNX':'#imageInpu'+_0x8359dc(-0x10a,-0x99,-0xdd,-0x13f),'kKUbh':_0x8359dc(-0xfd,-0x108,-0x84,-0x9a),'TDPgb':_0x8359dc(-0x11f,-0x15d,-0x152,-0x9f)+_0x11882b(0x4a5,0x499,0x572,0x4f6)+'e-btn','ujhTW':_0x8359dc(-0xb0,-0x6d,-0x7f,-0x115),'wBaoq':'#novelai-s'+'elect-char'+'-ref-image'+_0x8359dc(-0x134,-0x10c,-0xc4,-0x102),'cieND':_0x11882b(0x52a,0x55e,0x54d,0x517)+_0x11882b(0x49b,0x4cf,0x50d,0x4d4)+'_ref','BMdhI':_0x8359dc(-0x11f,-0x15e,-0xaf,-0xb3)+_0x8359dc(-0xb5,-0xf6,-0x134,-0x54)+_0x8359dc(-0x168,-0x15b,-0x191,-0xf7)+_0x8359dc(-0x134,-0x11a,-0xfe,-0xf5),'jWUuX':_0x8359dc(-0xb1,-0x10e,-0x5f,-0x103)+_0x8359dc(-0x166,-0x11a,-0x11f,-0x10c)+_0x11882b(0x535,0x4f5,0x522,0x4e0),'AGnZL':'#imageInpu'+'t2','hTQXw':_0x11882b(0x427,0x4b2,0x42a,0x486)+_0x8359dc(-0x111,-0x149,-0xff,-0x145)+'e-btn'};_0x292c80[_0x8359dc(-0x177,-0x174,-0x165,-0x1b7)](loadCachedImages),_0x48666c['find']('#novelai-s'+_0x8359dc(-0x166,-0x12e,-0x16a,-0x1a1)+_0x8359dc(-0x127,-0x115,-0x17d,-0x142))['on'](_0x11882b(0x57a,0x5a8,0x5d5,0x557),()=>{function _0x30e6da(_0x553f2f,_0x441886,_0x2229c8,_0x2a1234){return _0x8359dc(_0x441886-0x1f5,_0x553f2f,_0x2229c8-0xdc,_0x2a1234-0xc5);}function _0x305174(_0x5e0803,_0x4b7359,_0x5eaae7,_0x474751){return _0x8359dc(_0x4b7359-0x674,_0x5eaae7,_0x5eaae7-0x1aa,_0x474751-0x10a);}_0x292c80[_0x30e6da(0x10b,0x123,0x166,0x124)](_0x292c80[_0x30e6da(0x19d,0x15e,0x151,0x111)],_0x30e6da(0xa6,0xe0,0x15d,0x12d))?(_0x292c80[_0x305174(0x5a1,0x552,0x56c,0x503)](_0x2c5644,_0x292c80[_0x30e6da(0xab,0xbc,0xb7,0x3a)](_0x292c80[_0x30e6da(0x150,0x142,0xed,0xdb)],_0x75d601['message'])),_0x48c267[_0x30e6da(0x90,0x82,0x70,0x57)](_0x292c80[_0x30e6da(0x110,0x11e,0x166,0x138)],_0x133b18),_0x33bcd2(_0x305174(0x64f,0x5db,0x5c0,0x587)+_0x305174(0x5aa,0x5e2,0x5fc,0x5d0)+_0x232fb2[_0x30e6da(0xbc,0xcc,0x14e,0x67)](_0x32d140)),_0x27cae9()):document['getElement'+_0x30e6da(0xed,0x7a,0xac,0xbc)](_0x30e6da(0x100,0x115,0x12f,0x102)+_0x305174(0x5d3,0x58d,0x566,0x596))[_0x30e6da(0x10e,0x145,0x16f,0xda)]();}),_0x48666c['find'](_0x292c80[_0x11882b(0x4c5,0x549,0x527,0x539)])['on'](_0x292c80[_0x11882b(0x499,0x4c1,0x4a1,0x501)],handleNovelaiImageUpload),_0x48666c[_0x11882b(0x558,0x501,0x57a,0x52f)](_0x292c80[_0x11882b(0x4f7,0x49b,0x4bc,0x491)])['on'](_0x292c80[_0x11882b(0x529,0x549,0x4ea,0x528)],()=>{function _0x543a72(_0x4e8374,_0x4e2a0a,_0x36fd4e,_0x1ee96b){return _0x8359dc(_0x1ee96b-0x18f,_0x4e8374,_0x36fd4e-0x2a,_0x1ee96b-0x20);}_0x292c80[_0x543a72(0x6d,0x4a,0xa6,0xb9)](removeNovelaiImage);}),_0x48666c[_0x11882b(0x549,0x5af,0x5a9,0x52f)](_0x292c80[_0x11882b(0x58b,0x4b7,0x4d0,0x52c)])['on'](_0x292c80[_0x8359dc(-0xdf,-0x10c,-0x101,-0x102)],()=>{function _0x25a1aa(_0x2a5bd7,_0x3a3b61,_0x111510,_0xe01c86){return _0x11882b(_0x2a5bd7-0x161,_0x111510,_0x111510-0x12,_0x2a5bd7- -0x4e9);}function _0x325193(_0x4d8d29,_0x12fd68,_0x596970,_0x38877d){return _0x8359dc(_0x596970-0x120,_0x12fd68,_0x596970-0x190,_0x38877d-0x11c);}document['getElement'+_0x25a1aa(-0x5d,-0x35,-0x7c,-0x5f)](_0x292c80[_0x325193(-0xce,-0x18,-0x62,-0xb5)])[_0x325193(0xcb,0xe3,0x70,0x86)]();});function _0x11882b(_0x553a28,_0x5e86d2,_0x1ec319,_0x29839d){return _0x25fac9(_0x553a28-0x13c,_0x5e86d2-0x145,_0x29839d- -0x142,_0x5e86d2);}function _0x8359dc(_0x3ce792,_0xf67838,_0x47a0a2,_0x5c8429){return _0x325787(_0x3ce792-0x2e,_0x3ce792- -0x2be,_0x47a0a2-0xdb,_0xf67838);}_0x48666c['find'](_0x292c80[_0x8359dc(-0x143,-0x117,-0xe2,-0x15f)])['on'](_0x8359dc(-0xfd,-0xde,-0x128,-0x104),handleNovelaiCharRefImageUpload),_0x48666c[_0x11882b(0x528,0x4da,0x4e7,0x52f)](_0x292c80[_0x11882b(0x4ef,0x5b6,0x555,0x56c)])['on'](_0x292c80[_0x11882b(0x570,0x594,0x564,0x528)],()=>{function _0x47fe6a(_0x310982,_0x3841be,_0x273b55,_0x1d7a86){return _0x11882b(_0x310982-0x1c4,_0x273b55,_0x273b55-0x198,_0x310982-0x89);}function _0x592204(_0x51362e,_0x22b3d1,_0x3b3fc3,_0xa6a6fa){return _0x8359dc(_0x51362e-0x9,_0xa6a6fa,_0x3b3fc3-0x69,_0xa6a6fa-0xef);}_0x292c80[_0x47fe6a(0x54b,0x5ab,0x5b9,0x56c)](_0x292c80[_0x592204(-0x159,-0x16d,-0x1c6,-0x1b9)],_0x292c80['fQVcO'])?_0x3b8028[_0x47fe6a(0x577,0x529,0x5c7,0x505)+'ById'](_0x292c80[_0x47fe6a(0x50e,0x542,0x4f1,0x48f)])[_0x47fe6a(0x5e0,0x5c7,0x594,0x623)]():removeNovelaiCharRefImage();}),_0x48666c[_0x11882b(0x599,0x547,0x501,0x52f)](_0x292c80['jWUuX'])['on'](_0x8359dc(-0xb0,-0x88,-0x9c,-0xf2),()=>{function _0x449cac(_0x437404,_0x4f7af1,_0x4bcf10,_0x28f75e){return _0x8359dc(_0x4f7af1-0x686,_0x4bcf10,_0x4bcf10-0x44,_0x28f75e-0x90);}function _0x18b104(_0x490687,_0x37ae52,_0xd2a090,_0x598396){return _0x8359dc(_0xd2a090-0x109,_0x598396,_0xd2a090-0x34,_0x598396-0x1dd);}document[_0x18b104(-0x4f,-0x20,-0x10,-0x10)+'ById'](_0x292c80[_0x18b104(-0x12,0x29,-0x39,0x39)])[_0x449cac(0x5a4,0x5d6,0x623,0x577)]();}),_0x48666c[_0x11882b(0x575,0x55a,0x511,0x52f)](_0x292c80[_0x11882b(0x561,0x570,0x548,0x50d)])['on'](_0x11882b(0x537,0x56f,0x4e2,0x50a),handleImageUpload2),_0x48666c['find'](_0x292c80[_0x11882b(0x435,0x44d,0x4f0,0x495)])['on'](_0x292c80['ujhTW'],()=>{function _0x3c851f(_0xdb55d,_0x158a06,_0x9700b9,_0x156fe6){return _0x8359dc(_0xdb55d- -0x73,_0x158a06,_0x9700b9-0x172,_0x156fe6-0x74);}_0x292c80[_0x3c851f(-0x1c2,-0x22b,-0x170,-0x1de)](removeComfyUIImage);});}function _0x325787(_0xf1ab81,_0x15b5f6,_0x23e607,_0x1cb096){return _0x5bc7(_0x15b5f6- -0xac,_0x1cb096);}function _0x25fac9(_0x259f1f,_0x453b1c,_0x55959e,_0x16f459){return _0x5bc7(_0x55959e-0x3df,_0x16f459);}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};
//# sourceMappingURL=http://localhost:8000/image_upload.js.map