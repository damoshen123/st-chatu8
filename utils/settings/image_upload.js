(function(_0x3c7cc6,_0x18f7d2){function _0x2fd227(_0x469e3e,_0x57148c,_0x2eceb1,_0x5a9d88){return _0x5a5c(_0x5a9d88-0x142,_0x2eceb1);}const _0x37fa86=_0x3c7cc6();function _0x51ff2d(_0x4942f4,_0x3761d9,_0x2c7657,_0x2020d9){return _0x5a5c(_0x2c7657-0x120,_0x3761d9);}while(!![]){try{const _0x43c770=parseInt(_0x51ff2d(0x2bb,0x330,0x2f4,0x28b))/(0x859*0x4+0xe4c+-0x2faf)+-parseInt(_0x51ff2d(0x389,0x35d,0x327,0x2a9))/(-0x3c*-0x26+-0x1525+0xc3f)*(-parseInt(_0x51ff2d(0x29a,0x27a,0x2be,0x340))/(-0x251b+0x33b*0x3+0x3eb*0x7))+-parseInt(_0x2fd227(0x2c8,0x26b,0x343,0x2bf))/(0x1*-0xb3+0x1a6a*-0x1+-0x56d*-0x5)*(-parseInt(_0x2fd227(0x24b,0x2e0,0x27e,0x28a))/(0xfe8*0x1+0x2*0xd9c+-0x5*0x89f))+-parseInt(_0x2fd227(0x25f,0x306,0x27d,0x29a))/(-0x1f16+0x1*-0x228a+-0xaf1*-0x6)+parseInt(_0x2fd227(0x20a,0x30a,0x21d,0x28f))/(0x915*-0x1+0x1c84+0x26d*-0x8)+-parseInt(_0x51ff2d(0x2a5,0x2bf,0x30d,0x34d))/(0x5cb*-0x6+0x12*-0x2a+0x25be)*(-parseInt(_0x2fd227(0x2f0,0x32c,0x2cc,0x34a))/(-0x26f*-0x8+-0x149+-0xca*0x17))+-parseInt(_0x51ff2d(0x2cd,0x213,0x25b,0x2dc))/(-0x1a65+-0x9f6+0x2465);if(_0x43c770===_0x18f7d2)break;else _0x37fa86['push'](_0x37fa86['shift']());}catch(_0x5c4b25){_0x37fa86['push'](_0x37fa86['shift']());}}}(_0x1d5e,0x56bd5*0x3+0x34d65*-0x1+-0x4b17b));const _0x4a1a87=(function(){const _0x1b327b={'EEMrY':function(_0x591e93,_0xadbea9){return _0x591e93(_0xadbea9);}};let _0x246d15=!![];return function(_0x6e8daa,_0x140c2f){const _0x36f60c={'ozkIw':function(_0x207a32,_0x45fe36){function _0x5d2924(_0x439c4d,_0x434f56,_0x505302,_0x4316ea){return _0x5a5c(_0x434f56-0x177,_0x4316ea);}return _0x1b327b[_0x5d2924(0x2db,0x28b,0x312,0x2de)](_0x207a32,_0x45fe36);}},_0x4a28a9=_0x246d15?function(){function _0x5127ae(_0x9fe47b,_0x2d3222,_0x216f0b,_0x82bd52){return _0x5a5c(_0x82bd52-0x33f,_0x216f0b);}function _0x5b6139(_0x531b85,_0x364649,_0x18207c,_0x272ffb){return _0x5a5c(_0x364649- -0x224,_0x272ffb);}if(_0x140c2f){if(_0x5b6139(-0x112,-0x112,-0x130,-0x198)===_0x5b6139(-0xd5,-0x112,-0x194,-0xc8)){const _0x562ef3=_0x140c2f[_0x5127ae(0x457,0x44c,0x4f4,0x4d4)](_0x6e8daa,arguments);return _0x140c2f=null,_0x562ef3;}else _0x36f60c[_0x5127ae(0x4ff,0x461,0x4c8,0x4ad)](_0x4507c2,_0x4f5049[_0x5127ae(0x59b,0x4d3,0x4b9,0x520)]);}}:function(){};return _0x246d15=![],_0x4a28a9;};}()),_0x5a61b2=_0x4a1a87(this,function(){function _0x3f8df7(_0x3c98aa,_0x14c3c3,_0x5a4c39,_0x2f15fd){return _0x5a5c(_0x5a4c39- -0x11c,_0x3c98aa);}const _0x49ee60={};function _0xa0e7d(_0x21cd0a,_0x57f9f9,_0x4449db,_0x7fc7bb){return _0x5a5c(_0x57f9f9- -0x395,_0x4449db);}_0x49ee60['qOZyu']=_0xa0e7d(-0x1e9,-0x260,-0x219,-0x26a)+'+$';const _0x7ae660=_0x49ee60;return _0x5a61b2['toString']()['search'](_0x7ae660[_0xa0e7d(-0x1d9,-0x194,-0x1f2,-0x145)])[_0xa0e7d(-0x273,-0x231,-0x287,-0x272)]()[_0xa0e7d(-0x17f,-0x1a0,-0x186,-0x16d)+'r'](_0x5a61b2)['search'](_0x7ae660['qOZyu']);});_0x5a61b2();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';import{dbs}from'../database.js';const NAI_VIBE_CACHE_KEY=_0x24ae20(0x24e,0x241,0x2c0,0x2be)+'lai_vibe_t'+'ransfer_im'+_0x24ae20(0x23b,0x1e7,0x29d,0x266),NAI_CHAR_REF_CACHE_KEY=_0x24ae20(0x24e,0x1d0,0x2ce,0x276)+_0x24ae20(0x2a7,0x2a0,0x2df,0x21e)+_0x3f5e0b(-0x1d9,-0x1bc,-0x1ad,-0x15b),COMFYUI_REF_CACHE_KEY=_0x24ae20(0x261,0x1e9,0x2c2,0x289)+_0x24ae20(0x2fd,0x2e3,0x366,0x30b)+_0x24ae20(0x23b,0x278,0x29d,0x23e);let nai3VibeTransferImageMimeType=_0x24ae20(0x25c,0x1df,0x1e8,0x275);function _0x3f5e0b(_0x5c7fcc,_0xb99c62,_0xfe51ac,_0x22c510){return _0x5a5c(_0xfe51ac- -0x2cb,_0x22c510);}let nai3CharRefImageMimeType=_0x3f5e0b(-0x1bf,-0x22f,-0x1b0,-0x147),comfyuiImageObjectURL=null;function updateNovelaiImagePreview(_0xd33bc3){const _0x5840a3={};_0x5840a3[_0x58cc0f(0x3a0,0x318,0x3fc,0x392)]=_0x58cc0f(0x37c,0x34c,0x34d,0x39c)+_0x58cc0f(0x2c4,0x343,0x2f5,0x2eb),_0x5840a3['aGAfa']='previewIma'+'ge_nai_cha'+_0x242e98(0x165,0x165,0x146,0x107),_0x5840a3[_0x58cc0f(0x3c5,0x3a6,0x3f0,0x3a0)]='#novelai-c'+'har-ref-im'+'age-previe'+_0x58cc0f(0x365,0x358,0x352,0x2ee)+'r\x20.st-chat'+_0x58cc0f(0x3b6,0x392,0x349,0x362)+_0x242e98(0xe9,0x93,0x73,0x14a);function _0x242e98(_0x5e7b8a,_0x549a77,_0x339b25,_0x42d781){return _0x24ae20(_0x5e7b8a- -0x17e,_0x549a77,_0x339b25-0x179,_0x42d781-0x1ac);}function _0x58cc0f(_0x137192,_0x3f4df1,_0x12207c,_0x378cab){return _0x24ae20(_0x137192-0x8a,_0x3f4df1,_0x12207c-0x172,_0x378cab-0xd2);}_0x5840a3[_0x242e98(0x123,0x14b,0xfe,0x13c)]='novelai-re'+'move-char-'+_0x58cc0f(0x375,0x3af,0x32b,0x300)+_0x242e98(0x12d,0x10c,0x12f,0x19c),_0x5840a3[_0x242e98(0x183,0x1e1,0x1a6,0x17a)]=_0x242e98(0x171,0xf2,0x129,0x12a),_0x5840a3[_0x242e98(0xed,0xb8,0x12b,0xaf)]='inline-fle'+'x',_0x5840a3[_0x58cc0f(0x3ce,0x429,0x448,0x41d)]=_0x242e98(0x12e,0x102,0xa9,0x18b),_0x5840a3[_0x242e98(0x122,0x126,0x1a5,0xb9)]=_0x242e98(0xcc,0x142,0x6a,0xcb),_0x5840a3[_0x242e98(0xd9,0xb4,0x143,0x129)]=_0x242e98(0xda,0x89,0x54,0xd9),_0x5840a3[_0x242e98(0x104,0x150,0xea,0x15e)]=_0x58cc0f(0x2c8,0x2ca,0x2a7,0x2f8)+_0x58cc0f(0x30b,0x374,0x321,0x32b),_0x5840a3[_0x242e98(0xff,0x9e,0x158,0x118)]=_0x58cc0f(0x3bc,0x3f4,0x43e,0x34d)+_0x58cc0f(0x37e,0x352,0x35d,0x345)+_0x242e98(0x13c,0x132,0xc1,0xb9)+_0x58cc0f(0x3c7,0x3bd,0x343,0x3d0)+'tu8-image-'+_0x242e98(0x107,0xb9,0x15e,0x187)+'r',_0x5840a3[_0x58cc0f(0x3cf,0x418,0x433,0x388)]=_0x242e98(0x162,0x15a,0x128,0x142),_0x5840a3[_0x242e98(0xca,0x117,0x11f,0x112)]=function(_0x2190c2,_0x268561){return _0x2190c2!==_0x268561;},_0x5840a3['iuFRG']=_0x58cc0f(0x388,0x3f2,0x30e,0x3dd),_0x5840a3[_0x58cc0f(0x31f,0x354,0x2e3,0x2bc)]=function(_0x52638e,_0x5f4b22){return _0x52638e===_0x5f4b22;},_0x5840a3[_0x58cc0f(0x3b7,0x3e3,0x3b3,0x407)]=_0x242e98(0xe7,0x163,0x118,0xf4),_0x5840a3[_0x58cc0f(0x342,0x2dc,0x38c,0x39e)]='xoJeg',_0x5840a3[_0x58cc0f(0x3b2,0x375,0x39b,0x341)]=_0x58cc0f(0x376,0x3e8,0x332,0x374);const _0x1ec2aa=_0x5840a3,_0x367337=document['getElement'+_0x58cc0f(0x3cb,0x417,0x434,0x38d)](_0x1ec2aa[_0x242e98(0x104,0xe8,0xb3,0x113)]),_0x5837e7=document[_0x58cc0f(0x2ff,0x2e8,0x32d,0x282)+_0x58cc0f(0x333,0x359,0x2e1,0x384)](_0x1ec2aa[_0x58cc0f(0x307,0x32f,0x2d4,0x2db)]),_0x2247ed=document[_0x242e98(0xdf,0x125,0x91,0x99)+_0x58cc0f(0x3cb,0x3ca,0x38b,0x378)](_0x242e98(0x142,0x197,0xb9,0x119)+_0x58cc0f(0x38e,0x342,0x335,0x40b)+_0x58cc0f(0x391,0x33c,0x3b2,0x37f));if(_0xd33bc3&&_0xd33bc3[_0x58cc0f(0x2ce,0x2ab,0x254,0x2c9)](_0x1ec2aa[_0x242e98(0x1c7,0x1f1,0x18c,0x1af)])){if(_0x1ec2aa[_0x58cc0f(0x2d2,0x348,0x336,0x2a4)](_0x1ec2aa[_0x58cc0f(0x368,0x35a,0x30a,0x391)],_0x1ec2aa[_0x242e98(0x160,0x1a5,0x12c,0x1e1)]))_0x52dcd1['getElement'+_0x58cc0f(0x3cb,0x3a8,0x428,0x361)](_0x1ec2aa['PSXbx'])[_0x242e98(0x19f,0x149,0x174,0x155)]();else{_0x367337[_0x242e98(0x1ac,0x1ab,0x211,0x144)]=_0xd33bc3,_0x367337[_0x58cc0f(0x357,0x38a,0x388,0x356)][_0x242e98(0x1bc,0x151,0x1d1,0x1a0)]=_0x1ec2aa[_0x58cc0f(0x38b,0x312,0x39d,0x411)],_0x5837e7['style']['display']=_0x1ec2aa[_0x58cc0f(0x32a,0x336,0x326,0x2d1)],_0x2247ed[_0x58cc0f(0x357,0x35b,0x2ef,0x399)][_0x242e98(0x1bc,0x1dc,0x15e,0x163)]=_0x1ec2aa[_0x242e98(0xed,0x16c,0x11f,0x11e)];const _0x567e1f=_0xd33bc3[_0x58cc0f(0x312,0x379,0x2ff,0x319)](','),_0x342f9f=_0x567e1f[-0xb*-0x334+-0x1d50+-0x2*0x2f6][_0x242e98(0x10a,0x95,0xc4,0x9d)](':')[0x1f*-0xcf+-0x256a+0x3e*0x102]['split'](';')[0x9*0x2d2+0x25b1*0x1+0x3f13*-0x1];nai3VibeTransferImageMimeType=_0x342f9f,window[_0x58cc0f(0x39e,0x323,0x351,0x415)+_0x58cc0f(0x2e4,0x2e0,0x364,0x33c)+'e']=_0x567e1f[-0x21*0xef+-0xea5+0x2d75];const _0x24ced4={};_0x24ced4['id']=NAI_VIBE_CACHE_KEY,_0x24ced4[_0x58cc0f(0x3ac,0x342,0x3c6,0x3fb)]=_0xd33bc3,dbs[_0x58cc0f(0x34c,0x3ca,0x343,0x3d3)+_0x242e98(0x1c9,0x201,0x1e4,0x204)](_0x24ced4);}}else{if(_0x1ec2aa[_0x58cc0f(0x31f,0x335,0x2c2,0x399)](_0x1ec2aa[_0x58cc0f(0x3b7,0x385,0x384,0x410)],_0x1ec2aa[_0x242e98(0x13a,0x117,0xf1,0xb7)])){const _0x6a573f=_0x233e8a['getElement'+_0x58cc0f(0x3cb,0x410,0x40d,0x372)](_0x1ec2aa[_0x242e98(0x17e,0x1b9,0x197,0x173)]),_0xcefa45=_0x2e455c['querySelec'+_0x58cc0f(0x333,0x322,0x2e4,0x2d6)](_0x1ec2aa['ihAWM']),_0x44d3e1=_0x830141['getElement'+_0x242e98(0x1c3,0x22f,0x1b5,0x16e)](_0x1ec2aa[_0x58cc0f(0x32b,0x339,0x33d,0x2ed)]);if(_0x1d1892&&_0x2977da[_0x58cc0f(0x2ce,0x333,0x310,0x33e)](_0x242e98(0x162,0x148,0x1c5,0x111))){_0x6a573f[_0x58cc0f(0x3b4,0x360,0x340,0x357)]=_0x133d01,_0x6a573f[_0x242e98(0x14f,0x177,0x18a,0x18b)][_0x58cc0f(0x3c4,0x3eb,0x358,0x38d)]=_0x1ec2aa[_0x58cc0f(0x38b,0x399,0x3d6,0x3c8)],_0xcefa45[_0x58cc0f(0x357,0x301,0x3bd,0x381)][_0x242e98(0x1bc,0x158,0x16c,0x1d9)]=_0x242e98(0xcc,0x154,0x69,0xd5),_0x44d3e1[_0x242e98(0x14f,0x183,0x1a3,0x12d)][_0x58cc0f(0x3c4,0x3ac,0x407,0x3fd)]=_0x1ec2aa['Zzrpj'];const _0x1e67f2=_0x1174d9[_0x58cc0f(0x312,0x374,0x2f3,0x300)](','),_0x42a09d=_0x1e67f2[-0xb92+0x9e5+0x1ad][_0x58cc0f(0x312,0x376,0x31f,0x2ac)](':')[-0x19*-0x74+-0xd4b+0x2*0xfc][_0x242e98(0x10a,0x17b,0x138,0x160)](';')[0x35*0x89+0x1cf*-0x14+-0x7cf*-0x1];_0x596f24=_0x42a09d,_0x48d384[_0x58cc0f(0x3aa,0x3b3,0x40f,0x3ab)+'fImage']=_0x1e67f2[-0x3*-0x388+0x5*-0x775+0x11*0x192];const _0x5c556b={};_0x5c556b['id']=_0x39e6b1,_0x5c556b[_0x242e98(0x1a4,0x223,0x138,0x1ee)]=_0x4d82cd,_0x1fc0e7[_0x242e98(0x144,0x11a,0x1a9,0x154)+_0x58cc0f(0x3d1,0x373,0x3cd,0x3da)](_0x5c556b);}else{const _0x496388=_0x1ec2aa[_0x242e98(0x1c6,0x1bd,0x229,0x17d)][_0x242e98(0x10a,0x180,0xed,0xdd)]('|');let _0x16b960=0x2449+-0x106+-0x33*0xb1;while(!![]){switch(_0x496388[_0x16b960++]){case'0':_0x6a573f['style'][_0x242e98(0x1bc,0x221,0x1cb,0x166)]=_0x1ec2aa[_0x242e98(0x122,0x19a,0x9e,0x16d)];continue;case'1':_0xcefa45[_0x58cc0f(0x357,0x2e3,0x381,0x3aa)]['display']=_0x1ec2aa['NznyG'];continue;case'2':_0x44d3e1[_0x58cc0f(0x357,0x3b1,0x344,0x2e2)][_0x58cc0f(0x3c4,0x410,0x449,0x3d9)]=_0x1ec2aa[_0x58cc0f(0x32a,0x34c,0x304,0x2c6)];continue;case'3':_0x6a573f[_0x58cc0f(0x3b4,0x3e1,0x351,0x42e)]='';continue;case'4':_0x329dba[_0x242e98(0x1a2,0x1bc,0x189,0x19d)+_0x242e98(0x184,0x11f,0x1e3,0x114)]=null;continue;}break;}}}else{const _0x33ab1f=_0x1ec2aa[_0x58cc0f(0x3b2,0x406,0x3ff,0x435)][_0x242e98(0x10a,0x14d,0x169,0x164)]('|');let _0x588711=-0x1*-0x7d2+0xfda+0x194*-0xf;while(!![]){switch(_0x33ab1f[_0x588711++]){case'0':window[_0x242e98(0x196,0x1f2,0x1d7,0x1a4)+_0x242e98(0xdc,0xb2,0x146,0x109)+'e']=null;continue;case'1':_0x367337[_0x242e98(0x1ac,0x166,0x1d7,0x143)]='';continue;case'2':_0x5837e7['style'][_0x58cc0f(0x3c4,0x36b,0x3b3,0x361)]=_0x1ec2aa['NznyG'];continue;case'3':_0x367337[_0x242e98(0x14f,0x1a2,0x150,0x1cf)]['display']=_0x1ec2aa[_0x58cc0f(0x32a,0x2fb,0x2c3,0x2fb)];continue;case'4':_0x2247ed[_0x242e98(0x14f,0x19b,0x1b4,0x114)][_0x58cc0f(0x3c4,0x44b,0x3cb,0x355)]='none';continue;}break;}}}}function removeNovelaiImage(){function _0x40ee4a(_0x20799,_0x34c31a,_0x54ef5d,_0x1b36f3){return _0x3f5e0b(_0x20799-0x1b0,_0x34c31a-0x1c9,_0x34c31a-0x115,_0x54ef5d);}updateNovelaiImagePreview(null),dbs[_0x40ee4a(-0xa5,-0x27,-0x84,0x9)+'e'](NAI_VIBE_CACHE_KEY);}async function handleNovelaiImageUpload(_0x5d26ef){function _0x238289(_0x16c7b9,_0x3563f2,_0x510659,_0x21ee56){return _0x24ae20(_0x16c7b9- -0x32a,_0x3563f2,_0x510659-0x1ba,_0x21ee56-0xab);}const _0x11abd3={'DpoPc':function(_0x166a09){return _0x166a09();},'FBQMa':_0x8b2da1(-0xe9,-0x185,-0x107,-0x148),'ilUYJ':function(_0x5eae38,_0x5ea0a1){return _0x5eae38(_0x5ea0a1);},'yJlNk':function(_0x2b6762,_0x2686af){return _0x2b6762!==_0x2686af;},'AOTLz':_0x8b2da1(-0x170,-0xdd,-0x158,-0x111),'GDYQO':function(_0x1e8a68,_0x25e625){return _0x1e8a68+_0x25e625;},'Fpqmp':_0x8b2da1(-0x131,-0x148,-0xd8,-0x11f)},_0x353749=_0x5d26ef[_0x238289(-0x63,-0x1e,-0xad,-0x4c)][_0x8b2da1(-0xeb,-0xb3,-0x145,-0x12e)][-0x3*0x225+0x3fb*0x2+-0x187];if(!_0x353749)return;function _0x8b2da1(_0xd0470e,_0x49335e,_0x446cc8,_0x486368){return _0x24ae20(_0x486368- -0x416,_0xd0470e,_0x446cc8-0x178,_0x486368-0x3e);}try{if(_0x11abd3[_0x8b2da1(-0x14c,-0x12e,-0x8d,-0xd3)]!==_0x8b2da1(-0x1d2,-0x1c5,-0x15d,-0x170)){const _0x1f16f8=await processUploadedImage(_0x353749,!![]);_0x11abd3[_0x238289(-0xd1,-0x6d,-0x109,-0xce)](updateNovelaiImagePreview,_0x1f16f8);}else _0x11abd3['DpoPc'](_0x3ab407);}catch(_0x1b5c2a){_0x11abd3[_0x238289(-0xb2,-0x46,-0xca,-0xd3)](_0x11abd3['AOTLz'],_0x11abd3[_0x8b2da1(-0x122,-0xf1,-0xcb,-0x144)])?_0x462f69():(console[_0x8b2da1(-0x174,-0x14f,-0x89,-0xfc)](_0x8b2da1(-0x174,-0x137,-0x10a,-0xfb)+_0x8b2da1(-0xbe,-0xca,-0x9d,-0x103)+'elAI\x20image'+':',_0x1b5c2a),alert(_0x11abd3[_0x238289(-0x5e,0x14,-0x57,-0xa8)](_0x11abd3[_0x238289(-0xbc,-0x7f,-0x115,-0xbd)],_0x1b5c2a[_0x238289(-0x32,-0xa8,0x14,-0x1a)])));}}function updateNovelaiCharRefImagePreview(_0x11b73c){const _0x2bae0e={};_0x2bae0e['vatkb']=_0x130f60(0x2c5,0x29c,0x266,0x24d)+_0x2797bc(0x3d6,0x35f,0x44f,0x380)+_0x2797bc(0x476,0x43b,0x442,0x4f4)+_0x2797bc(0x440,0x411,0x404,0x3cf)+_0x130f60(0x1a4,0x1ed,0x196,0x25a)+_0x2797bc(0x491,0x417,0x46a,0x418)+_0x130f60(0x1d1,0x1e0,0x185,0x1a6);function _0x2797bc(_0x2d9140,_0x9ab374,_0xed14c1,_0x379f53){return _0x3f5e0b(_0x2d9140-0x1cb,_0x9ab374-0x1d6,_0x2d9140-0x571,_0x379f53);}_0x2bae0e[_0x130f60(0x2a7,0x251,0x27e,0x282)]=_0x130f60(0x1fd,0x239,0x249,0x1b3)+_0x130f60(0x1eb,0x1f3,0x1b2,0x23f)+'ref-image-'+_0x130f60(0x270,0x224,0x273,0x1f3),_0x2bae0e['LrKdo']=_0x130f60(0x1e6,0x259,0x256,0x20c),_0x2bae0e[_0x130f60(0x218,0x1c5,0x24b,0x232)]=_0x2797bc(0x454,0x41d,0x4a1,0x462);function _0x130f60(_0x3a91ae,_0x7c715a,_0x479e4d,_0x3c2a33){return _0x24ae20(_0x7c715a- -0x87,_0x3a91ae,_0x479e4d-0x82,_0x3c2a33-0x179);}_0x2bae0e[_0x130f60(0x1c0,0x230,0x27c,0x26f)]=_0x130f60(0x173,0x1c3,0x211,0x173),_0x2bae0e[_0x130f60(0x30f,0x2bf,0x28e,0x2a1)]=_0x130f60(0x1da,0x1b9,0x230,0x14b)+'x',_0x2bae0e[_0x130f60(0x276,0x26a,0x1f3,0x20f)]='4|0|3|2|1';const _0x20dfca=_0x2bae0e,_0x50c2b7=document[_0x2797bc(0x3c2,0x33b,0x3b0,0x3d4)+'ById'](_0x2797bc(0x3a3,0x37f,0x411,0x372)+_0x2797bc(0x4b0,0x47d,0x472,0x490)+'r_ref'),_0xe99e6d=document[_0x2797bc(0x3da,0x45d,0x3a5,0x419)+_0x2797bc(0x40e,0x388,0x483,0x3f2)](_0x20dfca['vatkb']),_0x241f5b=document[_0x2797bc(0x3c2,0x3a7,0x37e,0x3a2)+_0x2797bc(0x4a6,0x486,0x4d8,0x482)](_0x20dfca['zgcrL']);if(_0x11b73c&&_0x11b73c[_0x130f60(0x1bf,0x1bd,0x1b3,0x189)](_0x20dfca[_0x130f60(0x27a,0x297,0x2ec,0x31b)])){_0x50c2b7[_0x130f60(0x2fe,0x2a3,0x236,0x29f)]=_0x11b73c,_0x50c2b7['style'][_0x130f60(0x266,0x2b3,0x280,0x2f1)]=_0x20dfca['kgkOs'],_0xe99e6d['style'][_0x2797bc(0x49f,0x4fe,0x488,0x4c4)]=_0x20dfca[_0x2797bc(0x41c,0x474,0x3cc,0x445)],_0x241f5b['style'][_0x2797bc(0x49f,0x4d8,0x45a,0x507)]=_0x20dfca[_0x2797bc(0x4ab,0x530,0x527,0x475)];const _0x1c7adb=_0x11b73c['split'](','),_0x4f79dd=_0x1c7adb[0x1*-0x29+0xa44+-0xa1b][_0x130f60(0x1be,0x201,0x23c,0x1ae)](':')[-0xda3+0x324*0x1+0x150*0x8]['split'](';')[0xec1+-0x1e55+0x3e5*0x4];nai3CharRefImageMimeType=_0x4f79dd,window[_0x130f60(0x319,0x299,0x2ff,0x214)+_0x2797bc(0x467,0x408,0x441,0x407)]=_0x1c7adb[0x245d+0x1*0x1ac5+-0x3f21];const _0x54726d={};_0x54726d['id']=NAI_CHAR_REF_CACHE_KEY,_0x54726d['data']=_0x11b73c,dbs[_0x130f60(0x257,0x23b,0x1b2,0x26a)+_0x2797bc(0x4ac,0x4ca,0x535,0x4e3)](_0x54726d);}else{const _0x6c70bb=_0x20dfca[_0x2797bc(0x456,0x47f,0x414,0x4c7)][_0x130f60(0x19c,0x201,0x1b7,0x278)]('|');let _0x13946a=0x167f*0x1+-0xd29*0x1+-0x956;while(!![]){switch(_0x6c70bb[_0x13946a++]){case'0':_0x50c2b7[_0x2797bc(0x432,0x43a,0x40f,0x41c)][_0x2797bc(0x49f,0x4de,0x503,0x441)]=_0x20dfca[_0x2797bc(0x41c,0x482,0x45e,0x41b)];continue;case'1':window['nai3CharRe'+_0x130f60(0x303,0x27b,0x1f2,0x2c9)]=null;continue;case'2':_0x241f5b[_0x2797bc(0x432,0x411,0x427,0x3e8)]['display']=_0x20dfca[_0x2797bc(0x41c,0x3f2,0x3fe,0x400)];continue;case'3':_0xe99e6d[_0x130f60(0x1cd,0x246,0x23f,0x261)][_0x2797bc(0x49f,0x41c,0x4b4,0x452)]=_0x2797bc(0x3bd,0x36d,0x33e,0x357);continue;case'4':_0x50c2b7[_0x130f60(0x2b7,0x2a3,0x275,0x22b)]='';continue;}break;}}}function _0x5a5c(_0x96f06c,_0x19d07a){const _0x1f52e8=_0x1d5e();return _0x5a5c=function(_0x28343d,_0x233e8a){_0x28343d=_0x28343d-(-0xd86+0xa3*-0x37+0x3184);let _0x2e455c=_0x1f52e8[_0x28343d];if(_0x5a5c['abuLhz']===undefined){var _0x830141=function(_0x246439){const _0x54d8b4='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3f9a0b='',_0x391bc3='',_0x45a229=_0x3f9a0b+_0x830141;for(let _0x11f8a5=0x22f7+-0x20fb+-0xfe*0x2,_0x3e4f9c,_0x133d01,_0x1174d9=0x128f+0xb*-0x17d+-0x230;_0x133d01=_0x246439['charAt'](_0x1174d9++);~_0x133d01&&(_0x3e4f9c=_0x11f8a5%(0x17c8+0x458*-0x7+0x6a4)?_0x3e4f9c*(0x5ef+-0x384+-0x3*0xb9)+_0x133d01:_0x133d01,_0x11f8a5++%(0x3c7+0xf79+-0x133c))?_0x3f9a0b+=_0x45a229['charCodeAt'](_0x1174d9+(0x404+0xda5+-0x119f))-(0x1*0x219e+-0x4*0x1b7+0x3*-0x8e8)!==0x12c8+-0x1*0x26d7+-0x41*-0x4f?String['fromCharCode'](0x1ea+0x2a9*-0x9+0x1*0x1706&_0x3e4f9c>>(-(-0x2571+-0x138f+0x2*0x1c81)*_0x11f8a5&-0x1b2a+-0x19a7+0x34d7)):_0x11f8a5:0x1460+0x25d6+-0x3a36){_0x133d01=_0x54d8b4['indexOf'](_0x133d01);}for(let _0x596f24=-0x2e7*-0x1+0x1*0x7e1+-0xac8,_0x48d384=_0x3f9a0b['length'];_0x596f24<_0x48d384;_0x596f24++){_0x391bc3+='%'+('00'+_0x3f9a0b['charCodeAt'](_0x596f24)['toString'](-0xd8e+0x7b5*0x5+-0x18eb))['slice'](-(0x8*0xaf+-0x17*-0x13a+-0x21ac*0x1));}return decodeURIComponent(_0x391bc3);};_0x5a5c['oHMEQb']=_0x830141,_0x96f06c=arguments,_0x5a5c['abuLhz']=!![];}const _0x1d1892=_0x1f52e8[-0x1*0x1567+-0x14+0x157b],_0x2977da=_0x28343d+_0x1d1892,_0x25ea9c=_0x96f06c[_0x2977da];if(!_0x25ea9c){const _0x1fc0e7=function(_0x39e6b1){this['wWEWqU']=_0x39e6b1,this['eVgeHM']=[-0x14a+0x3*0x935+0x1*-0x1a54,-0x2*-0x400+0x15ad+-0x1*0x1dad,0x1eb9+0x26b9+-0xb93*0x6],this['jQjwpQ']=function(){return'newState';},this['OYaKNw']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['olUxmU']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1fc0e7['prototype']['kRuTpj']=function(){const _0x4d82cd=new RegExp(this['OYaKNw']+this['olUxmU']),_0x329dba=_0x4d82cd['test'](this['jQjwpQ']['toString']())?--this['eVgeHM'][-0x94a*-0x3+0x1edb*-0x1+0x1*0x2fe]:--this['eVgeHM'][-0x11db+-0x176a+0x2945];return this['CajNbU'](_0x329dba);},_0x1fc0e7['prototype']['CajNbU']=function(_0x33838d){if(!Boolean(~_0x33838d))return _0x33838d;return this['EyJKmu'](this['wWEWqU']);},_0x1fc0e7['prototype']['EyJKmu']=function(_0x106d68){for(let _0xc4cb81=-0x1*0x21eb+-0x1731+-0x2*-0x1c8e,_0x3acf4c=this['eVgeHM']['length'];_0xc4cb81<_0x3acf4c;_0xc4cb81++){this['eVgeHM']['push'](Math['round'](Math['random']())),_0x3acf4c=this['eVgeHM']['length'];}return _0x106d68(this['eVgeHM'][-0x13d*-0x11+-0x4*-0x46d+-0x3*0xceb]);},new _0x1fc0e7(_0x5a5c)['kRuTpj'](),_0x2e455c=_0x5a5c['oHMEQb'](_0x2e455c),_0x96f06c[_0x2977da]=_0x2e455c;}else _0x2e455c=_0x25ea9c;return _0x2e455c;},_0x5a5c(_0x96f06c,_0x19d07a);}function removeNovelaiCharRefImage(){const _0x2e79c9={'Sczmb':function(_0x3071a6,_0x5c1a17){return _0x3071a6(_0x5c1a17);}};function _0x44be36(_0x22116c,_0x1f23b7,_0x94908b,_0x1c31b7){return _0x3f5e0b(_0x22116c-0xbd,_0x1f23b7-0xd3,_0x1f23b7-0x4eb,_0x94908b);}_0x2e79c9['Sczmb'](updateNovelaiCharRefImagePreview,null),dbs[_0x44be36(0x419,0x3af,0x363,0x3ec)+'e'](NAI_CHAR_REF_CACHE_KEY);}async function handleNovelaiCharRefImageUpload(_0x1435fc){function _0x2f54c1(_0x2476f9,_0x121288,_0x30c991,_0x5e9e3e){return _0x3f5e0b(_0x2476f9-0x147,_0x121288-0x5a,_0x5e9e3e-0x11,_0x30c991);}const _0x2c9af2={'vOqol':function(_0x555ee2,_0x32e7f2){return _0x555ee2(_0x32e7f2);},'HzKtH':function(_0x16ba2f,_0x223add){return _0x16ba2f+_0x223add;},'uwahI':_0x2f54c1(-0xcd,-0x13a,-0x13b,-0x104),'SXmYH':function(_0x212996,_0x170433){return _0x212996(_0x170433);},'nkLbl':function(_0x456540,_0x317072){return _0x456540(_0x317072);},'nNANA':function(_0x57d3aa,_0x1f2134){return _0x57d3aa===_0x1f2134;},'nZjYH':_0x2f54c1(-0x191,-0x1fd,-0x1dc,-0x17d),'lACEV':'Error\x20proc'+_0x2f54c1(-0x108,-0xa6,-0x82,-0xe8)+_0x2f54c1(-0x1bb,-0x183,-0x1b0,-0x160)+_0x493901(-0xdf,-0xe6,-0x6e,-0xe4),'TFGyq':function(_0x3b6651,_0x2e9b04){return _0x3b6651+_0x2e9b04;}};function _0x493901(_0x4d34eb,_0x51ef50,_0x4d30ed,_0x2ffc60){return _0x3f5e0b(_0x4d34eb-0xdd,_0x51ef50-0x1a9,_0x4d30ed-0x108,_0x4d34eb);}const _0x3a5084=_0x1435fc[_0x493901(-0x5e,0x25,-0x3d,0xe)][_0x493901(-0x5c,-0xf,-0x1c,0x38)][-0x120f+0x1be1*-0x1+0x2df0];if(!_0x3a5084)return;try{const _0xc43c71=await _0x2c9af2[_0x493901(-0x84,-0x82,-0x4e,-0x36)](processUploadedImage,_0x3a5084);_0x2c9af2['nkLbl'](updateNovelaiCharRefImagePreview,_0xc43c71);}catch(_0x4dc5b9){_0x2c9af2[_0x2f54c1(-0x12d,-0x6b,-0x133,-0xd0)](_0x2c9af2[_0x493901(0x41,0x97,0x2c,-0x11)],_0x2c9af2[_0x2f54c1(-0x13e,-0x127,-0xf1,-0xcb)])?(console['error'](_0x2c9af2[_0x493901(-0x6,0x3,-0xa,0x78)],_0x4dc5b9),alert(_0x2c9af2[_0x493901(0x5f,0x58,0x38,0x27)](_0x2c9af2['uwahI'],_0x4dc5b9[_0x493901(0x3f,0x2f,-0xc,0x78)]))):(_0x232e26[_0x493901(-0x72,0x65,0x16,-0x56)]('Error\x20proc'+_0x493901(0x54,0x2c,0xf,0x48)+_0x493901(-0xa6,-0xde,-0x69,-0x36)+_0x2f54c1(-0x1a8,-0x1a6,-0x1ac,-0x165),_0x4d6437),_0x2c9af2[_0x493901(-0x124,-0x46,-0xa2,-0xa8)](_0x376288,_0x2c9af2[_0x2f54c1(-0x144,-0xee,-0xa3,-0xfb)](_0x2c9af2[_0x2f54c1(-0x12c,-0x1f0,-0x15a,-0x195)],_0x3158dc['message'])));}}function updateComfyUIImagePreview(_0x5df1b1){function _0x2b3ce8(_0x4b70d0,_0x189695,_0x2366fe,_0x573b43){return _0x24ae20(_0x4b70d0-0x18b,_0x189695,_0x2366fe-0x12,_0x573b43-0x49);}function _0x256bf2(_0x1cf100,_0x4cc76d,_0x4579fd,_0x326028){return _0x3f5e0b(_0x1cf100-0x186,_0x4cc76d-0xc1,_0x4579fd-0x45,_0x1cf100);}const _0x3293e1={'WnFXt':function(_0x48dfff){return _0x48dfff();},'UCQpT':'previewIma'+_0x256bf2(-0x92,-0xb3,-0x103,-0xe9),'IFJbB':'comfyui-re'+_0x256bf2(-0xe1,-0x11c,-0xc3,-0xbb)+_0x256bf2(-0x12c,-0x67,-0xc0,-0xc0),'UfKMM':_0x2b3ce8(0x3fd,0x3ef,0x47a,0x3ea),'YSBdW':function(_0x4f9797,_0x2e45b2){return _0x4f9797!==_0x2e45b2;},'MRrpy':function(_0xa17102,_0x486c68){return _0xa17102===_0x486c68;},'drCwi':_0x2b3ce8(0x4c0,0x4ad,0x494,0x4ae),'dbfJv':_0x256bf2(-0x1e2,-0x20c,-0x188,-0x13d),'igsLh':_0x256bf2(-0xec,-0x134,-0xd8,-0xb4),'YNwtu':_0x2b3ce8(0x3d5,0x3ef,0x454,0x424),'sQSri':_0x2b3ce8(0x3cb,0x445,0x352,0x388)+'x','OhFXR':_0x2b3ce8(0x3e3,0x410,0x3cc,0x42a)},_0x19b1cc=document[_0x2b3ce8(0x3e8,0x444,0x463,0x373)+_0x2b3ce8(0x4cc,0x526,0x519,0x53e)](_0x3293e1[_0x2b3ce8(0x4b2,0x462,0x4bc,0x4bc)]),_0x15d889=document[_0x256bf2(-0x19d,-0x14a,-0x152,-0x121)+_0x2b3ce8(0x434,0x3e8,0x478,0x3cb)](_0x256bf2(-0x7b,-0x119,-0xbf,-0xeb)+'mage-previ'+_0x2b3ce8(0x445,0x49d,0x498,0x413)+_0x256bf2(-0xae,-0x92,-0x8a,-0xcf)+_0x256bf2(-0x15f,-0xeb,-0xd9,-0x145)+_0x2b3ce8(0x410,0x40c,0x395,0x46d)+'r'),_0x21bdac=document[_0x2b3ce8(0x3e8,0x3cd,0x43d,0x449)+'ById'](_0x3293e1[_0x2b3ce8(0x417,0x48e,0x399,0x418)]);_0x19b1cc['src']&&_0x19b1cc[_0x256bf2(-0x32,-0x66,-0x9d,-0xd3)]['startsWith'](_0x3293e1[_0x2b3ce8(0x404,0x485,0x390,0x466)])&&_0x3293e1[_0x256bf2(-0xea,-0xd5,-0x13c,-0x180)](_0x19b1cc['src'],_0x5df1b1)&&URL[_0x256bf2(-0x89,-0x100,-0xbb,-0x122)+'ctURL'](_0x19b1cc[_0x2b3ce8(0x4b5,0x4ac,0x46b,0x50d)]);if(_0x5df1b1)_0x3293e1[_0x2b3ce8(0x3eb,0x3dd,0x375,0x381)](_0x3293e1[_0x256bf2(-0x214,-0x10b,-0x18b,-0x1d4)],_0x3293e1[_0x2b3ce8(0x433,0x459,0x3f2,0x3b0)])?_0x3293e1[_0x256bf2(-0xc8,-0xcb,-0x87,-0x71)](_0x286ff1):(_0x19b1cc[_0x2b3ce8(0x4b5,0x49c,0x433,0x4dc)]=_0x5df1b1,_0x19b1cc['style'][_0x256bf2(-0xd2,-0x82,-0x8d,-0xef)]=_0x3293e1['igsLh'],_0x15d889['style'][_0x256bf2(-0x4f,-0x3e,-0x8d,-0x90)]=_0x3293e1[_0x256bf2(-0x18b,-0x1bf,-0x180,-0x10b)],_0x21bdac['style'][_0x256bf2(-0x1b,-0xd,-0x8d,-0xd2)]=_0x3293e1[_0x256bf2(-0x154,-0x109,-0xeb,-0x8e)]);else{const _0x38077d=(_0x256bf2(-0xcc,-0xe3,-0x93,-0xbf)+'3')[_0x256bf2(-0xfa,-0x161,-0x13f,-0x1b6)]('|');let _0x23b895=0x155a*-0x1+0xb35+-0x31*-0x35;while(!![]){switch(_0x38077d[_0x23b895++]){case'0':_0x19b1cc[_0x2b3ce8(0x458,0x47c,0x3f1,0x4dd)][_0x2b3ce8(0x4c5,0x4bd,0x4be,0x532)]=_0x3293e1[_0x256bf2(-0x181,-0x1c0,-0x180,-0x10b)];continue;case'1':_0x21bdac[_0x2b3ce8(0x458,0x4d0,0x484,0x43d)][_0x2b3ce8(0x4c5,0x530,0x47a,0x4de)]=_0x3293e1[_0x2b3ce8(0x3d2,0x395,0x43a,0x35f)];continue;case'2':_0x15d889[_0x256bf2(-0x17f,-0x15d,-0xfa,-0x179)][_0x256bf2(-0xd2,-0x35,-0x8d,-0xa2)]=_0x3293e1[_0x256bf2(-0xfa,-0x118,-0xc4,-0x117)];continue;case'3':comfyuiImageObjectURL=null;continue;case'4':window['comfyuican'+'kaotupian']=null;continue;case'5':_0x19b1cc['src']='';continue;}break;}}}function removeComfyUIImage(){function _0x1f4cdb(_0x1fbbad,_0x21cb88,_0x290bde,_0x44b029){return _0x3f5e0b(_0x1fbbad-0x1a,_0x21cb88-0x10f,_0x21cb88-0x5da,_0x1fbbad);}const _0x2c10c6={'ZVxZd':function(_0x54ca2f,_0x2334da){return _0x54ca2f(_0x2334da);}};_0x2c10c6[_0x1f4cdb(0x444,0x4b4,0x4e9,0x457)](updateComfyUIImagePreview,null);function _0x353a97(_0x2f61e6,_0xc37d4c,_0x4447e8,_0x5314c9){return _0x3f5e0b(_0x2f61e6-0x5,_0xc37d4c-0x85,_0x4447e8-0xe5,_0x2f61e6);}dbs[_0x353a97(0x11,-0x34,-0x57,-0xb1)+'e'](COMFYUI_REF_CACHE_KEY);}function _0x24ae20(_0xf33bff,_0x503b3c,_0x3bfffb,_0x46ac76){return _0x5a5c(_0xf33bff-0x141,_0x503b3c);}async function handleImageUpload2(_0x57419f){const _0x255bd9={'qlzBe':'4|1|2|3|0','FpJxV':'none','KGmWn':_0x3c51e5(-0x106,-0x169,-0x119,-0x175),'hztCW':function(_0x2fd564,_0x4bb7cb){return _0x2fd564!==_0x4bb7cb;},'Ugkbm':_0x3e9673(-0xae,-0x69,-0x24,-0x27),'xUVvH':'CZFcv','pPVud':function(_0x56585f,_0x3cfad0){return _0x56585f(_0x3cfad0);},'xDtln':'qMofs','pExNb':function(_0x4c4641,_0x3fade9){return _0x4c4641(_0x3fade9);},'eBjnl':_0x3c51e5(-0x8b,-0xd,-0x107,-0x39)+_0x3c51e5(-0xde,-0xa0,-0xf5,-0x137),'kYZWR':function(_0x48cec7,_0x3d22bf,_0xea06b7){return _0x48cec7(_0x3d22bf,_0xea06b7);},'wMojx':'POST','KysAS':function(_0x5cb698,_0x4c71ae){return _0x5cb698!==_0x4c71ae;},'Urzqi':_0x3e9673(0x15,-0x21,-0xa2,0x16),'DwshI':function(_0x38a92f,_0x1a97fe){return _0x38a92f(_0x1a97fe);},'plcbs':'上传成功,\x20服务器返'+_0x3e9673(0x19,-0x2,-0x40,0x59),'Ipmzq':function(_0x13acf3,_0x1346d8){return _0x13acf3(_0x1346d8);},'lyrQV':_0x3c51e5(-0xa5,-0x9e,-0x8c,-0x70),'QLxyx':function(_0x587caf,_0x347391){return _0x587caf(_0x347391);},'lUHUJ':function(_0x2315c1,_0xb73c19){return _0x2315c1+_0xb73c19;},'gfBFV':'图片处理或上传时出错'+':\x20','DUbls':_0x3e9673(-0xa3,-0x6a,-0x8,-0x8d)+':','lisqg':function(_0x42cb02){return _0x42cb02();}},_0x4cb410=extension_settings[extensionName];function _0x3c51e5(_0x2596bd,_0x43fd3e,_0x2ebe66,_0x5dd554){return _0x3f5e0b(_0x2596bd-0x10b,_0x43fd3e-0x1c2,_0x2596bd-0xae,_0x43fd3e);}const _0x173a80=_0x57419f[_0x3c51e5(-0x97,-0x8f,-0xaa,-0xa3)][_0x3c51e5(-0x76,-0x5c,-0x20,0xc)][-0xcaa*0x1+-0x509+0x11b3];if(!_0x173a80)return;function _0x3e9673(_0x3506ce,_0x5292cb,_0x51a17c,_0x5ec0c8){return _0x3f5e0b(_0x3506ce-0x113,_0x5292cb-0x50,_0x5292cb-0x104,_0x5ec0c8);}try{if(_0x255bd9['hztCW'](_0x255bd9['Ugkbm'],_0x255bd9[_0x3e9673(0x65,0x42,0xe,0x29)])){const _0x2186c6=await processUploadedImageToBlob(_0x173a80),_0x75fb11=URL[_0x3e9673(-0x1f,-0x2e,-0x27,-0xb1)+_0x3c51e5(-0xf2,-0x120,-0x154,-0xe0)](_0x2186c6);comfyuiImageObjectURL=_0x75fb11,_0x255bd9[_0x3c51e5(-0x10c,-0x119,-0x105,-0x170)](updateComfyUIImagePreview,_0x75fb11);const _0x2b74b2=new FormData();_0x2b74b2['append'](_0x3c51e5(-0xa9,-0x46,-0xcd,-0xef),_0x2186c6,_0x173a80[_0x3c51e5(-0xd8,-0x72,-0xbe,-0x112)]);let _0x57e398=_0x4cb410[_0x3c51e5(-0x54,0x20,-0x2d,-0xc2)][_0x3e9673(-0xcd,-0x54,-0xd2,-0x34)]();if(!_0x57e398){if(_0x255bd9[_0x3e9673(-0x73,-0xf,0x6c,-0x3c)]===_0x3c51e5(-0xcd,-0xa7,-0x14d,-0x75))_0x2ab1d8(null),_0x165811['storeDelet'+'e'](_0x132a1c);else{_0x255bd9['pExNb'](alert,_0x255bd9['eBjnl']),removeComfyUIImage();return;}}const _0x2dc963=await _0x255bd9['kYZWR'](fetch,_0x57e398+(_0x3e9673(-0x7c,-0x79,-0xf8,-0xad)+_0x3e9673(-0x9d,-0xcd,-0x65,-0xf8)),{'method':_0x255bd9['wMojx'],'body':_0x2b74b2});if(_0x2dc963['ok']){if(_0x255bd9['KysAS'](_0x3c51e5(-0x53,-0x6f,-0xe,0x5),_0x255bd9['Urzqi'])){const _0x261680=await _0x2dc963[_0x3e9673(-0x73,-0x6c,-0xee,-0xb)]();window[_0x3c51e5(-0xd7,-0xb9,-0x145,-0x139)+'kaotupian']=_0x261680[_0x3c51e5(-0xd8,-0x6d,-0x128,-0x153)],_0x255bd9[_0x3c51e5(-0xfa,-0xf5,-0x140,-0xb3)](addLog,_0x3e9673(-0x6f,-0xb7,-0x99,-0x11c)+_0x3e9673(-0x6f,-0xb9,-0x10e,-0xf9)+JSON['stringify'](_0x261680)),console[_0x3c51e5(-0x35,-0x1c,-0x79,0x23)](_0x255bd9['plcbs'],_0x261680);const _0x29df61=new FileReader();_0x29df61[_0x3e9673(-0x4f,-0xbd,-0x60,-0x4f)]=()=>{const _0x4a2f02=_0x29df61[_0x17cb59(0x24f,0x1d0,0x2c5,0x23a)],_0x31fa2a={};_0x31fa2a[_0x17cb59(0x294,0x265,0x211,0x226)]=_0x4a2f02;function _0x47b494(_0x3a53fa,_0x587b97,_0x4c5462,_0x499dbe){return _0x3e9673(_0x3a53fa-0x1d2,_0x587b97-0xb7,_0x4c5462-0x36,_0x3a53fa);}_0x31fa2a[_0x47b494(0x8d,0xe2,0x14e,0xf9)+'Name']=_0x261680[_0x47b494(0x94,0x35,-0x2e,0x41)];const _0x25e2a0=_0x31fa2a;function _0x17cb59(_0x548390,_0x5a6f91,_0x322979,_0x3c89b2){return _0x3e9673(_0x548390-0x198,_0x548390-0x27a,_0x322979-0xb3,_0x5a6f91);}const _0x250748={};_0x250748['id']=COMFYUI_REF_CACHE_KEY,_0x250748[_0x47b494(0xfc,0xd1,0xf9,0xf6)]=_0x25e2a0,dbs[_0x47b494(0x6f,0x71,0xda,0xac)+_0x17cb59(0x2b9,0x2e8,0x23f,0x2cf)](_0x250748);},_0x29df61['readAsData'+'URL'](_0x2186c6);}else{const _0x3f793b=_0xa942ee?function(){function _0x5208fd(_0x345db9,_0xcc96c8,_0x5f5663,_0x3a91e0){return _0x3c51e5(_0x345db9-0x55,_0x5f5663,_0x5f5663-0x10f,_0x3a91e0-0x108);}if(_0x2b6656){const _0x59830f=_0x2828f5[_0x5208fd(-0x33,0x52,-0x98,-0x4b)](_0x344d0c,arguments);return _0x429330=null,_0x59830f;}}:function(){};return _0x36ee42=![],_0x3f793b;}}else{const _0x2abc4b=await _0x2dc963['text']();alert(_0x3c51e5(-0xca,-0xf4,-0xd9,-0x5e)+_0x2abc4b),_0x255bd9[_0x3c51e5(-0xcb,-0x13b,-0x58,-0x14c)](addLog,_0x3c51e5(-0x27,-0xb,0x27,-0x7d)+_0x3e9673(0x14,0x30,0x41,0x2a)+_0x2abc4b),console[_0x3c51e5(-0x44,-0x6b,-0xcc,-0x13)](_0x255bd9['lyrQV'],_0x2abc4b),removeComfyUIImage();}}else{const _0x1fe88d=_0x255bd9[_0x3e9673(0x27,-0x26,-0x66,-0xe)][_0x3c51e5(-0xd6,-0xd9,-0x14c,-0x62)]('|');let _0xce4fed=0x30a*0xb+0x4b*0x34+-0x1*0x30aa;while(!![]){switch(_0x1fe88d[_0xce4fed++]){case'0':_0x45c740[_0x3e9673(0x1e,0xc,0x4f,-0x2c)+'ansferImag'+'e']=null;continue;case'1':_0xa07b48[_0x3e9673(0x3f,-0x3b,0x46,-0x41)][_0x3c51e5(-0x24,-0x91,-0x10,0x65)]=_0x255bd9['FpJxV'];continue;case'2':_0x3d1832[_0x3c51e5(-0x91,-0x60,-0x20,-0x86)][_0x3c51e5(-0x24,0x3,0x5a,-0xa2)]=_0x255bd9[_0x3e9673(-0xb4,-0xbf,-0xe6,-0xc9)];continue;case'3':_0x7142f7[_0x3c51e5(-0x91,-0x15,-0x2b,-0x97)][_0x3c51e5(-0x24,0x19,-0x65,-0xa0)]=_0x255bd9['FpJxV'];continue;case'4':_0x51b2eb[_0x3e9673(-0x2c,0x22,0x8e,0x29)]='';continue;}break;}}}catch(_0x36eaec){_0x255bd9[_0x3e9673(0x34,0xf,0x22,0x86)](alert,_0x255bd9[_0x3e9673(-0x31,-0x7b,-0x58,-0xb2)](_0x255bd9['gfBFV'],_0x36eaec[_0x3c51e5(-0x66,-0x29,-0xc3,-0x84)])),console[_0x3e9673(0x27,0x12,0x12,0x20)](_0x255bd9[_0x3c51e5(-0x11d,-0xd1,-0xd0,-0x14f)],_0x36eaec),_0x255bd9['Ipmzq'](addLog,_0x3c51e5(-0x27,-0x20,-0x28,-0x20)+_0x3c51e5(-0x26,-0x84,-0x35,0x5c)+JSON[_0x3c51e5(-0x75,-0xa2,0x4,-0xfa)](_0x36eaec)),_0x255bd9[_0x3c51e5(-0x39,0x0,-0x2d,-0x71)](removeComfyUIImage);}}async function loadCachedImages(){const _0x21d0e8={'uurhC':_0xa4841e(0x3e0,0x3eb,0x375,0x398),'kqDtg':'none','UltJt':_0x1aba80(0x4cc,0x4ce,0x526,0x448)+'x','dmaMR':_0xa4841e(0x31e,0x33a,0x370,0x351)+_0xa4841e(0x3d6,0x37d,0x354,0x3f4),'ClmFP':_0x1aba80(0x5be,0x600,0x627,0x581)+_0x1aba80(0x580,0x52a,0x5d0,0x5b6)+'ew-contain'+_0xa4841e(0x3e4,0x439,0x3e9,0x4a2)+_0xa4841e(0x3d2,0x3ea,0x3f0,0x453)+'placeholde'+'r','GEsiM':_0x1aba80(0x54c,0x508,0x536,0x570)+_0x1aba80(0x590,0x584,0x579,0x53b)+_0x1aba80(0x593,0x5d2,0x5da,0x55c),'viVst':_0x1aba80(0x56c,0x53a,0x57c,0x521),'kwwRh':_0xa4841e(0x3a8,0x372,0x2f4,0x3ab)+'+$','CmcuG':_0x1aba80(0x524,0x4b6,0x557,0x4ab)+'4','jhyTB':function(_0x510a16,_0x1cc24f){return _0x510a16(_0x1cc24f);},'LMmaj':_0x1aba80(0x59a,0x5d9,0x51d,0x59b),'EYKHg':function(_0xdcc088,_0x54d3df){return _0xdcc088(_0x54d3df);},'gefDU':'ZKJAk','dIpPR':_0x1aba80(0x554,0x527,0x4ce,0x580)+'ing\x20cached'+_0x1aba80(0x5ca,0x542,0x61b,0x56b)+'har\x20Ref\x20im'+_0xa4841e(0x3cb,0x377,0x3ef,0x306),'qVNqm':function(_0x397b41,_0x20163e){return _0x397b41===_0x20163e;},'VPGHc':'sARBc','uTdng':function(_0x3a0ed6,_0x5f175c){return _0x3a0ed6!==_0x5f175c;},'TaTTl':_0xa4841e(0x3a7,0x3d3,0x3e8,0x452),'UnLDJ':function(_0x3f871e,_0xecdd73){return _0x3f871e(_0xecdd73);},'kEhos':function(_0x572a30,_0x49079a){return _0x572a30(_0x49079a);},'ppTUQ':_0x1aba80(0x5a5,0x56c,0x55f,0x578),'KibtP':function(_0x344e8c,_0x51640b){return _0x344e8c===_0x51640b;},'XhsMC':'hyhuX','WWFSF':function(_0x41c67a,_0x54baaf){return _0x41c67a(_0x54baaf);},'mEVbx':_0xa4841e(0x3dd,0x42d,0x3e0,0x438),'wYVnW':'LANJx'};function _0xa4841e(_0x19ee8e,_0x53e49f,_0x2d29a1,_0x3ebb22){return _0x3f5e0b(_0x19ee8e-0x9b,_0x53e49f-0x18a,_0x53e49f-0x508,_0x2d29a1);}await dbs[_0xa4841e(0x3f6,0x3cb,0x356,0x43f)]();function _0x1aba80(_0x37513d,_0x2dd004,_0x109976,_0x548a5d){return _0x3f5e0b(_0x37513d-0x1f,_0x2dd004-0x72,_0x37513d-0x698,_0x109976);}try{if(_0x1aba80(0x570,0x59a,0x57e,0x577)===_0x21d0e8[_0x1aba80(0x4ff,0x548,0x4e9,0x4d9)]){_0x856bf2[_0xa4841e(0x496,0x426,0x3de,0x448)]=_0x47fb90,_0x136272[_0xa4841e(0x35c,0x3c9,0x451,0x426)][_0xa4841e(0x3f2,0x436,0x47a,0x3f0)]=_0x21d0e8[_0xa4841e(0x3a2,0x396,0x412,0x357)],_0x4fbdc4[_0xa4841e(0x3a0,0x3c9,0x341,0x368)][_0x1aba80(0x5c6,0x5d7,0x56b,0x5ee)]=_0x21d0e8[_0xa4841e(0x3c3,0x3d1,0x3f1,0x42a)],_0x2dc024[_0x1aba80(0x559,0x564,0x51d,0x571)][_0x1aba80(0x5c6,0x571,0x596,0x616)]=_0x21d0e8['UltJt'];const _0xf9e6de=_0x484d40[_0x1aba80(0x514,0x503,0x505,0x4f1)](','),_0x9233b6=_0xf9e6de[-0x751+0x20d+0x1*0x544][_0xa4841e(0x409,0x384,0x32a,0x32f)](':')[-0x2a+-0xd51+0xd7c][_0x1aba80(0x514,0x4bd,0x58b,0x59b)](';')[0x17d0+-0x268a*0x1+-0x1d*-0x82];_0x48203f=_0x9233b6,_0x4b5319[_0x1aba80(0x5ac,0x57c,0x526,0x525)+_0x1aba80(0x58e,0x51d,0x546,0x5f7)]=_0xf9e6de[0x80*0x46+0x1413+-0x3712];const _0x25e2df={};_0x25e2df['id']=_0x58f30c,_0x25e2df[_0x1aba80(0x5ae,0x61c,0x5ea,0x5e3)]=_0x5ea430,_0x20dba2[_0xa4841e(0x373,0x3be,0x3f5,0x364)+_0xa4841e(0x3de,0x443,0x44d,0x427)](_0x25e2df);}else{const _0x39ad4a=await dbs[_0xa4841e(0x314,0x38c,0x390,0x33e)+'nly'](NAI_VIBE_CACHE_KEY);_0x39ad4a&&_0x39ad4a[_0x1aba80(0x5ae,0x5e0,0x5db,0x548)]&&_0x21d0e8[_0x1aba80(0x54b,0x5c3,0x51c,0x50e)](updateNovelaiImagePreview,_0x39ad4a[_0x1aba80(0x5ae,0x5d6,0x5d0,0x596)]);}}catch(_0x219955){if(_0x1aba80(0x571,0x56f,0x526,0x5db)===_0x21d0e8[_0x1aba80(0x4e7,0x4d8,0x504,0x4a4)])console['error'](_0x1aba80(0x554,0x5a5,0x50f,0x558)+'ing\x20cached'+'\x20NovelAI\x20V'+_0xa4841e(0x358,0x35a,0x342,0x36b),_0x219955);else{const _0x48c204=_0x4a8384[_0xa4841e(0x348,0x359,0x32d,0x2ef)+_0xa4841e(0x457,0x43d,0x4b3,0x411)](_0x21d0e8[_0xa4841e(0x4b1,0x43b,0x484,0x46b)]),_0x1ee991=_0x7761f['querySelec'+_0x1aba80(0x535,0x4d1,0x4ba,0x53f)](_0x21d0e8[_0x1aba80(0x557,0x508,0x582,0x547)]),_0x2868e8=_0x17a339[_0x1aba80(0x4e9,0x51e,0x463,0x4e6)+_0x1aba80(0x5cd,0x5af,0x5d6,0x61b)](_0x21d0e8['GEsiM']);if(_0x488e34&&_0x5dde59[_0xa4841e(0x340,0x340,0x313,0x31e)](_0x21d0e8['viVst'])){_0x48c204['src']=_0x37c737,_0x48c204[_0xa4841e(0x3b1,0x3c9,0x35b,0x41e)]['display']=_0x21d0e8[_0x1aba80(0x526,0x4f1,0x4db,0x4f9)],_0x1ee991[_0xa4841e(0x367,0x3c9,0x388,0x34e)][_0x1aba80(0x5c6,0x585,0x56c,0x5c2)]=_0x21d0e8[_0xa4841e(0x360,0x3d1,0x43c,0x3a1)],_0x2868e8[_0x1aba80(0x559,0x51f,0x58b,0x4f2)][_0x1aba80(0x5c6,0x5b2,0x5da,0x543)]=_0x1aba80(0x4cc,0x4d8,0x540,0x525)+'x';const _0x5eae96=_0x248cfb[_0xa4841e(0x350,0x384,0x318,0x3ce)](','),_0x568028=_0x5eae96[-0x1f04*-0x1+-0x223*-0x3+-0x256d][_0xa4841e(0x3fd,0x384,0x361,0x2fc)](':')[0x155c+0xa+0x1565*-0x1]['split'](';')[-0xd56+0x701*0x5+0x1ab*-0xd];_0x1f24c1=_0x568028,_0x5eb853[_0xa4841e(0x402,0x410,0x38a,0x45c)+'ansferImag'+'e']=_0x5eae96[-0x1507+0x25c4+-0x264*0x7];const _0x3fa85d={};_0x3fa85d['id']=_0x33561f,_0x3fa85d['data']=_0x4cdfde,_0x13939f[_0x1aba80(0x54e,0x5d1,0x51a,0x572)+_0x1aba80(0x5d3,0x651,0x559,0x595)](_0x3fa85d);}else{const _0x2c0da3='2|4|0|1|3'[_0x1aba80(0x514,0x49e,0x48f,0x55b)]('|');let _0x15ae91=-0x514+0x1717+-0x35*0x57;while(!![]){switch(_0x2c0da3[_0x15ae91++]){case'0':_0x1ee991[_0x1aba80(0x559,0x542,0x5c0,0x5dc)]['display']=_0x1aba80(0x4e4,0x482,0x4fc,0x542);continue;case'1':_0x2868e8['style'][_0x1aba80(0x5c6,0x5f2,0x54a,0x5ac)]=_0xa4841e(0x2fb,0x346,0x323,0x373);continue;case'2':_0x48c204[_0x1aba80(0x5b6,0x591,0x55e,0x607)]='';continue;case'3':_0x21e862[_0xa4841e(0x479,0x410,0x467,0x453)+_0xa4841e(0x2da,0x356,0x3cd,0x35b)+'e']=null;continue;case'4':_0x48c204[_0x1aba80(0x559,0x553,0x50d,0x5cd)][_0x1aba80(0x5c6,0x624,0x5b0,0x5af)]=_0x21d0e8[_0x1aba80(0x561,0x4e3,0x4db,0x52e)];continue;}break;}}}}try{const _0x1198fc=await dbs[_0xa4841e(0x3f9,0x38c,0x30b,0x3d6)+_0x1aba80(0x595,0x5b1,0x586,0x5ad)](NAI_CHAR_REF_CACHE_KEY);_0x1198fc&&_0x1198fc[_0x1aba80(0x5ae,0x5f6,0x56b,0x61e)]&&_0x21d0e8[_0xa4841e(0x371,0x39e,0x351,0x3a3)](updateNovelaiCharRefImagePreview,_0x1198fc[_0xa4841e(0x450,0x41e,0x398,0x3e5)]);}catch(_0x2853f0){console[_0x1aba80(0x5a6,0x620,0x537,0x5f2)](_0x21d0e8['dIpPR'],_0x2853f0);}try{if(_0x21d0e8[_0xa4841e(0x3d8,0x3b9,0x3a3,0x42c)](_0x21d0e8[_0xa4841e(0x3ca,0x3cd,0x36c,0x3ce)],_0xa4841e(0x417,0x3f1,0x37c,0x437)))return _0x3206cd[_0xa4841e(0x40d,0x3a1,0x42a,0x37a)]()[_0x1aba80(0x523,0x55c,0x5ab,0x52c)](YOltMJ[_0x1aba80(0x582,0x58d,0x5d0,0x582)])[_0x1aba80(0x531,0x578,0x535,0x4cf)]()[_0x1aba80(0x5c2,0x5e3,0x5b6,0x562)+'r'](_0x1277fe)['search'](YOltMJ[_0x1aba80(0x582,0x524,0x504,0x5b6)]);else{const _0x5e9961=await dbs[_0xa4841e(0x39d,0x38c,0x35f,0x325)+_0x1aba80(0x595,0x561,0x5ae,0x5e2)](COMFYUI_REF_CACHE_KEY);if(_0x5e9961&&_0x5e9961[_0xa4841e(0x3dc,0x41e,0x416,0x3c2)]&&_0x5e9961['data']['data']&&_0x5e9961['data'][_0x1aba80(0x5bf,0x603,0x593,0x56c)+_0xa4841e(0x3d7,0x3b8,0x333,0x3fb)]){if(_0x21d0e8[_0x1aba80(0x5c5,0x5dc,0x5f6,0x56f)](_0x21d0e8[_0x1aba80(0x57c,0x56e,0x5c0,0x50f)],'OFPJY')){const _0x4d776d=_0x5e9961[_0x1aba80(0x5ae,0x5f1,0x5fb,0x5c2)],_0x5ad1c4=await _0x21d0e8[_0xa4841e(0x3ef,0x3c2,0x342,0x399)](fetch,_0x4d776d[_0xa4841e(0x457,0x41e,0x49c,0x433)]),_0x4a1fe9=await _0x5ad1c4[_0xa4841e(0x42f,0x3e6,0x432,0x37d)](),_0x3799b4=URL['createObje'+_0x1aba80(0x4f8,0x4bd,0x579,0x50e)](_0x4a1fe9);updateComfyUIImagePreview(_0x3799b4),comfyuiImageObjectURL=_0x3799b4,window[_0x1aba80(0x513,0x4e7,0x500,0x58b)+'kaotupian']=_0x4d776d[_0xa4841e(0x458,0x42f,0x418,0x464)+_0xa4841e(0x3e6,0x3b8,0x426,0x410)],_0x21d0e8['kEhos'](addLog,'从缓存加载Comfy'+'UI图片:\x20'+_0x4d776d[_0x1aba80(0x5bf,0x554,0x5c6,0x58b)+_0xa4841e(0x41f,0x3b8,0x3c9,0x336)]),console[_0x1aba80(0x5b5,0x566,0x60a,0x569)](_0xa4841e(0x32d,0x342,0x39a,0x3ba)+_0xa4841e(0x32e,0x341,0x39f,0x36e)+_0x1aba80(0x539,0x513,0x534,0x559)+_0xa4841e(0x352,0x3ac,0x409,0x3e1)+_0x4d776d[_0xa4841e(0x3ad,0x42f,0x3cd,0x3c8)+_0x1aba80(0x548,0x531,0x55b,0x5c6)]);}else{const _0x5b23de=_0x21d0e8[_0xa4841e(0x318,0x380,0x3c8,0x34a)]['split']('|');let _0x19bb79=0xeaf+-0x2064+0x1*0x11b5;while(!![]){switch(_0x5b23de[_0x19bb79++]){case'0':_0x22394a[_0xa4841e(0x391,0x383,0x32a,0x31b)+_0xa4841e(0x303,0x350,0x2fe,0x2f1)]=null;continue;case'1':_0x38a1fe[_0xa4841e(0x3ee,0x3c9,0x3f7,0x442)][_0x1aba80(0x5c6,0x610,0x59b,0x5e0)]=_0x1aba80(0x4d6,0x4a1,0x457,0x4cc);continue;case'2':_0x37a567['style'][_0xa4841e(0x3b7,0x436,0x3f3,0x411)]=_0xa4841e(0x2e4,0x346,0x324,0x366);continue;case'3':_0xb35462[_0x1aba80(0x559,0x5dc,0x52a,0x5d7)]['display']=_0x1aba80(0x4e4,0x4e7,0x45e,0x4ce);continue;case'4':_0x4a3f1d=null;continue;case'5':_0xbe8e25[_0xa4841e(0x3bd,0x426,0x3f2,0x461)]='';continue;}break;}}}else{if(_0x5e9961&&typeof _0x5e9961['data']===_0x21d0e8[_0xa4841e(0x324,0x364,0x39c,0x2df)]){if(_0x21d0e8[_0xa4841e(0x3e9,0x36c,0x354,0x38f)](_0x21d0e8['XhsMC'],_0xa4841e(0x340,0x3c5,0x3c4,0x365)))_0x21d0e8[_0xa4841e(0x3b2,0x39e,0x413,0x404)](_0x1067f2,null),_0x266742[_0xa4841e(0x44c,0x3cc,0x3cc,0x37d)+'e'](_0x4e5f03);else{const _0x35f122=await _0x21d0e8['WWFSF'](fetch,_0x5e9961[_0xa4841e(0x43f,0x41e,0x408,0x3e7)]),_0x16e96e=await _0x35f122['blob'](),_0x1244f6=URL[_0x1aba80(0x566,0x50e,0x4f9,0x594)+_0x1aba80(0x4f8,0x493,0x490,0x4e5)](_0x16e96e);updateComfyUIImagePreview(_0x1244f6),comfyuiImageObjectURL=_0x1244f6,console[_0x1aba80(0x4d9,0x4d6,0x50b,0x4d3)](_0xa4841e(0x36c,0x342,0x30e,0x323)+_0xa4841e(0x33e,0x341,0x2ba,0x2dc)+_0xa4841e(0x376,0x37f,0x3ba,0x377)+_0x1aba80(0x4fb,0x488,0x49a,0x55a)+_0x1aba80(0x59c,0x5e7,0x619,0x5c3)+_0xa4841e(0x375,0x35f,0x31c,0x37b)+_0x1aba80(0x59e,0x54c,0x5c4,0x568)+_0x1aba80(0x53f,0x58f,0x543,0x518)+_0xa4841e(0x3d2,0x3fb,0x45b,0x445)+_0xa4841e(0x39f,0x3d0,0x388,0x456));}}}}}catch(_0x377e5a){_0x21d0e8[_0x1aba80(0x56d,0x517,0x591,0x538)]===_0x21d0e8[_0x1aba80(0x5b0,0x55f,0x590,0x5c3)]?_0xda0d9f[_0x1aba80(0x598,0x5f1,0x577,0x527)+_0x1aba80(0x4f8,0x46f,0x56b,0x50f)](_0x5b057c[_0xa4841e(0x3bc,0x426,0x46b,0x487)]):console['error']('Error\x20load'+'ing\x20cached'+_0xa4841e(0x33d,0x3aa,0x3f5,0x412)+'mage:',_0x377e5a);}}export function initImageUpload(_0x4f416d){const _0x1c9bff={'bxfwF':function(_0x39b96f,_0x4d88cf){return _0x39b96f!==_0x4d88cf;},'zKXLv':_0x35b09(0x455,0x466,0x4a3,0x453)+'_novelai','ZnLRh':function(_0x374beb){return _0x374beb();},'YxZxA':'imageInput'+_0x5ef94a(0x10f,0x114,0x16a,0xeb)+_0x5ef94a(0x19e,0x1f2,0x139,0x18c),'uOexc':_0x5ef94a(0x17d,0x120,0xe2,0x125),'vkXVK':'imageInput'+'2','kyemm':_0x35b09(0x457,0x48f,0x4ef,0x4d0)+_0x35b09(0x4df,0x487,0x40c,0x43c)+'elAI\x20image'+':','yuiRe':function(_0x10f367,_0x324b59){return _0x10f367+_0x324b59;},'dUnYW':_0x5ef94a(0x138,0x104,0x124,0x118),'kdDxN':function(_0x5d37a9){return _0x5d37a9();},'loGDE':_0x5ef94a(0x162,0xc7,0x12c,0xdd)+_0x35b09(0x437,0x426,0x3c4,0x42b)+'e-btn','oaMnN':_0x35b09(0x460,0x491,0x429,0x4e3),'HskPm':_0x35b09(0x44a,0x3de,0x42f,0x3b9)+_0x35b09(0x4a1,0x461,0x4c6,0x4cc),'IWZBi':_0x5ef94a(0x1ab,0x10c,0x18c,0x193),'YNvoo':_0x5ef94a(0xb5,0xe6,0xa9,0xdd)+_0x5ef94a(0x11c,0x1bd,0x10b,0x13e)+_0x5ef94a(0xdd,0x8f,0x140,0xb7)+_0x5ef94a(0x184,0x1b9,0x124,0x17b),'afHrW':'#imageInpu'+_0x5ef94a(0xfc,0x1bc,0x102,0x16f)+_0x5ef94a(0x18f,0xda,0xc2,0x137),'mpJZF':'#novelai-r'+_0x5ef94a(0x17d,0xf0,0x123,0x135)+_0x5ef94a(0xd9,0xd9,0x60,0xb7)+_0x5ef94a(0x1ce,0x183,0x162,0x17b),'eKmJU':_0x35b09(0x3ff,0x3f3,0x454,0x419)+'elect-imag'+_0x5ef94a(0x9f,0x59,0x73,0xb1),'XYypN':'#comfyui-r'+'emove-imag'+'e-btn'};_0x1c9bff['kdDxN'](loadCachedImages),_0x4f416d[_0x35b09(0x3ea,0x3e1,0x3b0,0x469)](_0x1c9bff['loGDE'])['on'](_0x1c9bff['oaMnN'],()=>{function _0x27d1e0(_0x568699,_0x36d921,_0x3f8286,_0x82a64c){return _0x5ef94a(_0x568699-0x123,_0x3f8286,_0x3f8286-0x182,_0x568699- -0x203);}function _0x196cc4(_0x2aff58,_0x285a78,_0x53c47a,_0xe052f0){return _0x35b09(_0x2aff58-0x1f4,_0x2aff58- -0x405,_0x53c47a-0xf3,_0xe052f0);}if(_0x1c9bff[_0x27d1e0(-0x69,-0xae,0x8,-0x4e)]('PBExy','PBExy')){if(_0x2b422a){const _0x32ee5c=_0x4647db[_0x27d1e0(-0xb9,-0x48,-0x116,-0x40)](_0x2fbd06,arguments);return _0x50f86b=null,_0x32ee5c;}}else document['getElement'+'ById'](_0x1c9bff[_0x196cc4(0x48,0xcf,0x45,0x48)])[_0x27d1e0(-0x72,-0xb4,-0x1b,-0x49)]();}),_0x4f416d[_0x5ef94a(0xc6,0x7c,0xc0,0xe1)](_0x1c9bff[_0x5ef94a(0xff,0x1e0,0x122,0x181)])['on'](_0x1c9bff[_0x5ef94a(0x1c6,0x13c,0x122,0x183)],handleNovelaiImageUpload),_0x4f416d[_0x35b09(0x375,0x3e1,0x433,0x377)]('#novelai-r'+_0x5ef94a(0x1e6,0x21e,0x1e8,0x1a3)+_0x35b09(0x35b,0x3b1,0x330,0x415))['on']('click',()=>{function _0x22fa25(_0x12c2a0,_0x2d8df2,_0x17d86d,_0x291306){return _0x35b09(_0x12c2a0-0x114,_0x17d86d- -0x18a,_0x17d86d-0x1b2,_0x291306);}_0x1c9bff[_0x22fa25(0x343,0x327,0x306,0x381)](removeNovelaiImage);});function _0x5ef94a(_0x56d57e,_0x8a67f1,_0x55a33e,_0xf16f2d){return _0x24ae20(_0xf16f2d- -0x18c,_0x8a67f1,_0x55a33e-0xe9,_0xf16f2d-0x113);}_0x4f416d[_0x5ef94a(0x109,0x10e,0x5b,0xe1)](_0x1c9bff['YNvoo'])['on'](_0x1c9bff[_0x35b09(0x460,0x417,0x46a,0x3de)],()=>{function _0x1d8b81(_0x3c55c3,_0x14885f,_0x213f1e,_0x319468){return _0x35b09(_0x3c55c3-0xf7,_0x14885f- -0x530,_0x213f1e-0x166,_0x213f1e);}document['getElement'+'ById'](_0x1c9bff['YxZxA'])[_0x1d8b81(-0xab,-0x9f,-0x8c,-0x48)]();});function _0x35b09(_0x593180,_0x5d8fe4,_0x1aa9be,_0x4558e2){return _0x24ae20(_0x5d8fe4-0x174,_0x4558e2,_0x1aa9be-0x1ed,_0x4558e2-0x108);}_0x4f416d[_0x35b09(0x390,0x3e1,0x39b,0x400)](_0x1c9bff[_0x35b09(0x3e7,0x467,0x4e7,0x4e3)])['on'](_0x35b09(0x41f,0x493,0x42f,0x457),handleNovelaiCharRefImageUpload),_0x4f416d[_0x35b09(0x3d1,0x3e1,0x366,0x3d5)](_0x1c9bff[_0x35b09(0x41a,0x3ca,0x41b,0x35e)])['on']('click',()=>{function _0x258684(_0x5be637,_0x4a1ced,_0x43341f,_0x45db65){return _0x35b09(_0x5be637-0x1db,_0x5be637- -0x419,_0x43341f-0xf3,_0x43341f);}function _0x3eeda6(_0x4b0bcc,_0x561d80,_0x5ead53,_0x49250a){return _0x35b09(_0x4b0bcc-0x50,_0x4b0bcc- -0x4ea,_0x5ead53-0xd1,_0x49250a);}_0x1c9bff[_0x3eeda6(-0x50,-0x52,-0xd,0x1)](_0x1c9bff[_0x3eeda6(-0xcc,-0x108,-0x111,-0x141)],_0x3eeda6(-0x134,-0xda,-0x139,-0x144))?_0x1c9bff[_0x3eeda6(-0x5a,-0xcc,-0xa8,-0x5c)](removeNovelaiCharRefImage):(_0x19e54e(null),_0x131c4b[_0x3eeda6(-0xa6,-0x63,-0x1d,-0x5e)+'e'](_0x98f816));}),_0x4f416d[_0x35b09(0x3e1,0x3e1,0x3d9,0x3fe)](_0x1c9bff[_0x35b09(0x373,0x3c4,0x3ad,0x3f7)])['on'](_0x1c9bff['oaMnN'],()=>{function _0x14d8d4(_0x1a33b6,_0x4da8b7,_0x154a99,_0x41a4d8){return _0x35b09(_0x1a33b6-0xd2,_0x4da8b7- -0x50b,_0x154a99-0x9b,_0x1a33b6);}function _0x4df2b0(_0x379528,_0x340350,_0x13bcf0,_0x411d4f){return _0x35b09(_0x379528-0x1da,_0x340350- -0x5ac,_0x13bcf0-0x84,_0x13bcf0);}document[_0x14d8d4(-0x1ad,-0x13a,-0x138,-0x121)+'ById'](_0x1c9bff['vkXVK'])[_0x14d8d4(-0x40,-0x7a,-0xab,-0x38)]();}),_0x4f416d[_0x5ef94a(0x13a,0xbf,0x10e,0xe1)]('#imageInpu'+'t2')['on'](_0x1c9bff[_0x35b09(0x4cb,0x483,0x478,0x487)],handleImageUpload2),_0x4f416d[_0x35b09(0x452,0x3e1,0x39b,0x3d2)](_0x1c9bff[_0x5ef94a(0x14a,0x129,0x153,0x106)])['on'](_0x35b09(0x42b,0x491,0x451,0x4e6),()=>{function _0xb7fa8b(_0x35395f,_0x29ad1e,_0x5b0ed4,_0x385e1a){return _0x35b09(_0x35395f-0x7d,_0x5b0ed4-0xda,_0x5b0ed4-0xdf,_0x35395f);}function _0x578878(_0xbe9ccc,_0x16a87c,_0x3abf5e,_0x59ed4d){return _0x5ef94a(_0xbe9ccc-0x83,_0x16a87c,_0x3abf5e-0x13b,_0xbe9ccc-0x180);}const _0x3be0b4={'azDst':_0x1c9bff[_0xb7fa8b(0x543,0x4fb,0x513,0x58c)],'oqAzv':function(_0x5cc660,_0x50fa46){return _0x1c9bff['yuiRe'](_0x5cc660,_0x50fa46);},'uxepq':_0xb7fa8b(0x553,0x555,0x545,0x5b6)};'wJkJn'!==_0x1c9bff[_0x578878(0x2af,0x30f,0x239,0x31f)]?(_0x3eb2cb[_0x578878(0x30e,0x2e2,0x31b,0x2d9)](_0x3be0b4['azDst'],_0x2723ef),_0xd4331c(_0x3be0b4[_0x578878(0x315,0x331,0x316,0x34f)](_0x3be0b4[_0x578878(0x27e,0x229,0x2af,0x2ef)],_0x4f9b28[_0x578878(0x2ec,0x266,0x27f,0x341)]))):_0x1c9bff[_0x578878(0x291,0x2cf,0x23a,0x2c0)](removeComfyUIImage);});}function _0x1d5e(){const _0x2d2008=['yMXVy2S','vgfuvgW','suHkAK4','Aw1Hz2vjBNb1Da','ywziCLC','BwfNzs1WCMv2Aq','yLvlt0O','A3D3uMG','5zU+54Mh5Ase55cg5AsX6lsLoIa','BwvZC2fNzq','Eer0Bg4','Befdrvy','Df9UywLFy2HHCG','yuDbzMe','ExvPx3jLzL9PBq','CwTPCLK','DgHLig5LDYbMBW','shPlDeG','EKXxDMO','zKLTywDL','t2Hgwfi','Bw92zs1PBwfNzq','r3L3v2W','5zUE5PwW5O2UoG','lwj0BG','i2nVBwz5DwKTAq','BMX5','y29TzNL1AvvYBa','AxnJyMm','CMv2B2TLt2jQzq','shnRug0','vw9Rr1u','svDAqMK','yxqUifbSzwfZzq','ywDLlxbYzxzPzq','ihrVihvWzgf0zq','zxnZAw5Nie5VDG','BMfPm1zPyMvuCG','odK1nZi4te9Uyw50','ufnyyNG','uuX4ExG','CMvM','C3rYAw5N','zxjYB3i','rxjYB3iGChjVyW','wM5muMG','y2XPy2S','thjlzg8','y2HHBMDL','BMfPm0nOyxjszq','B3fbENy','zgf0yq','i25VDMvSywKTyW','D1LwBLC','BgLZCwC','yNHMD0y','vunrCfq','CgPOu2i','Bg9N','C3jJ','BK5btKe','DtGTAw1Hz2uTCa','DNn1DMS','ofHsCunhDa','zw1VDMuTAw1HzW','BLPQwuG','wLvTDLu','i25VDMvSywKTAq','C2vYDMvYrMLSzq','nxWWFdj8mxW0Fa','u29UDhK','y29UC3rYDwn0BW','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','6k+M5OofoIa','DvrKBMC','zgLZCgXHEq','AwHbv00','vezhExe','zxiGlNn0lwnOyq','ie5VDMvSquKGqW','zg1Htvi','v25gwhq','qNLjza','Cu9AExu','rKjrtwe','tvLPwg8','s3vHrKm','v1LeB3q','CML0zq','mty1nZrewfjXsNK','otqZnJq4mNPdt2r0vG','EfvwDKG','z2vFBMfPx2nOyq','x25VDMvSywK','ywDL','zhjdD2K','zs1IDg4','ChjLDMLLD0LTyq','AfLuvuG','Aw5SAw5LlwzSzq','rfvIBhm','A013wMK','lxjLzI1PBwfNzq','C3rHCNrZv2L0Aa','zNLvssbPBwfNzq','tg9HzgvKienVBq','wu53Dhu','Ee9gvxe','s0DTv24','BM9Uzq','B25SB2fKzw5K','A2DRt3m','D2fYBG','y2fJAgvFBM92zq','5zMO6l+u5zUE5PwW5O2UoIa','zuTTsLu','5zU+54Mh5lIk5lYG5OIq5yQFlcdMNi3LIQe','CfbwDwq','ANvht1u','A2fVDhvWAwfU','ruvnCLK','BxbkwKy','tNPUEuC','zMXLEa','AwXvwuO','yw5ZzMvYsw1HzW','z2vMrfu','Aw1Hz2uVCg5N','z2v0rwXLBwvUDa','AwjLigLTywDLoG','zwzFAw1Hz2u','tvjYChK','y2fJAgvFy29TzG','DK9XB2W','ihjLlxvWBg9Hza','rhDZAeK','y21kqwy','DxDHAeK','BgfJzwHVBgrLCG','Chbuvve','i25VDMvSywKTCW','i2LTywDLsw5WDq','wNPYCgO','y3rvuKW','zMLUza','rNbXBxa','y2fJAguGzM9YBq','s2LIDfa','AgfYlxjLzI1PBq','yMXVyJO','te1TywO','CIaUC3qTy2HHDa','CxvLCNLtzwXLyW','kcGOlISPkYKRkq','x25HAv9JAgfYxW','EuPStMS','vwzltu0','Bw92zs1JAgfYlq','ywDLoG','mJG4mZeXmJbNCvz6CNG','zfnKvwy','BKXRDuG','i2nVBwz5DwKTCW','ssbbueNLNldLNydJGii','z2vFBM92zwXHAq','ELjwyxy','igzYB20GB2XKia','q21JDuC','CgXHy2vOB2XKzq','BMfTzq','y29TzNL1AwnHBG','C3bSAxq','mtGYnwzLBKLvyq','DxHLChe','wvnczfC','suzkyKi','BfvivuO','mZq2ota3ngDorw9syG','l3vWBg9Hzc9PBq','C3rVCMvszwfKtW','reTOANu','wfL5Ce4','sxbTENe','5lIk5lYG5AsX6lsLoIa','DNLuwe8','CMvMigLTywDLoG','C2vHCMnO','nxWXFdn8mNWWFa','ntuWmZjQEgHVEgu','DxvYAem','zwXbssbJAgfYia','ANnVBG','A2reEe4','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','Eff5C0u','zwXXuxm','svf6r1K','AMH5vei','B2fnBK4','D0PRsM4','Dg9tDhjPBMC','rxrxyuW','BgfPx2nOyxjFCG','zgjMsNy','Dg9Y','Du9LEgm','yNrU','m3WWFdf8mNW0','igzYB20Gy2fJAa','ienVBwz5vuKGAq','B3PRsxC','ztOG','yxn1vhq','zwXLy3qTAw1HzW','ignHy2HLihrVia','DhjPBq','Aw1Hz2u','u1HTwuG','v3bsyKu','AeDZwwy','6zsz6k+V6k+M5OofoG','zxCTy29UDgfPBG','zfvUwvC','tMfTzq','CvzoCw0','odGWogfIEfj2ua','rvLlsgC','BM92zwXHAs1Yzq','zw1VDMuTy2HHCG','C3rVCMvszwfKvW','x3jLzG','z2uY','A3LLBw0','vw5mreO','DgfYz2v0','rxjYB3iGBg9Hza','thfhCNm','zwXLy3qTy2HHCG','q2XTrLa','r0rzuu8','C3r5Bgu','qLrAvNG','B3bLBKrc','C3rVCMvezwXLDa','vLbhsgm','qu9uthO','6k+35ywi6k6+572Uq29TzNLv','CM1HDc4','A3feDgC','yxbWBhK','EK55u0K','EMDJCKW','EKTythy','y3jLyxrLt2jQzq','DY1JB250ywLUzq','C1ftCMK','CMvZDwX0','AxvguKC','nJLrB1DgA1u','zgf0ytPPBwfNzq','BuvwyNG','CwX6qMu','CL9Yzwy','r1nYugC','wKTkqwS','wLz4wMq','yNLIu2m','zMLSzxm','C3rYAw5NAwz5','yMXVyG','CMvMlwLTywDLlq','mxWZFdj8nhWW','Df9UB3zLBgfP','Dhu4lwLTywDLlq'];_0x1d5e=function(){return _0x2d2008;};return _0x1d5e();}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};
//# sourceMappingURL=http://localhost:8000/image_upload.js.map