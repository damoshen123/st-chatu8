(function(_0x340c70,_0x5b67d3){function _0x1cadf6(_0x35a52e,_0x23be9f,_0xf5b4b4,_0xe7b73e){return _0x43df(_0x23be9f-0x2d7,_0x35a52e);}function _0x293e20(_0x394a16,_0x41521b,_0x1847a1,_0x33bbca){return _0x43df(_0x1847a1-0x11c,_0x33bbca);}const _0x36b0bf=_0x340c70();while(!![]){try{const _0x34d685=parseInt(_0x293e20(0x241,0x2df,0x294,0x2ea))/(-0x85b+0x19d5+-0x3f*0x47)+parseInt(_0x293e20(0x359,0x280,0x2cc,0x35c))/(0x901+0x1a69+-0x2368)*(parseInt(_0x293e20(0x15d,0x272,0x1ea,0x1e0))/(-0x59a+0x151a+-0x131*0xd))+parseInt(_0x293e20(0x1e0,0x239,0x28a,0x2c0))/(0x1ab4+-0x178b+-0x325)+parseInt(_0x1cadf6(0x4a3,0x427,0x4a5,0x4d7))/(0x5*0x454+-0x10*-0x218+0x89*-0x67)+-parseInt(_0x1cadf6(0x456,0x428,0x4b3,0x3d1))/(-0x212c+0x1a05*0x1+0x72d)*(parseInt(_0x1cadf6(0x467,0x460,0x477,0x4fd))/(-0x232f+0x259+0x20dd))+parseInt(_0x1cadf6(0x34c,0x3c0,0x391,0x336))/(-0x166*-0x5+0x1e*-0x11c+0x6*0x463)*(parseInt(_0x1cadf6(0x404,0x3a2,0x43f,0x405))/(0x12*0xc7+0x1*0x1750+-0x1d*0x149))+-parseInt(_0x293e20(0x31b,0x2ac,0x2c1,0x32d))/(-0x251f+-0x2356+0x487f);if(_0x34d685===_0x5b67d3)break;else _0x36b0bf['push'](_0x36b0bf['shift']());}catch(_0xc4873e){_0x36b0bf['push'](_0x36b0bf['shift']());}}}(_0x3685,0x1*-0x42f6b+-0x12*-0x83eb+0x1*0x1d80b));const _0x2d95da=(function(){const _0x5f15e6={};function _0x1488f5(_0x54caab,_0x387f2d,_0x21b68f,_0x5c5441){return _0x43df(_0x54caab-0x302,_0x387f2d);}_0x5f15e6[_0x1488f5(0x47e,0x41b,0x43c,0x52a)]=function(_0x3e523e,_0x46f3ff){return _0x3e523e!==_0x46f3ff;},_0x5f15e6[_0x1488f5(0x3cf,0x35c,0x3d9,0x393)]=_0x1488f5(0x3e5,0x47c,0x42d,0x37a);const _0x4da5b0=_0x5f15e6;let _0x2bab8e=!![];function _0x26869a(_0xb2f780,_0x3e8bb7,_0x14d595,_0x190411){return _0x43df(_0x190411-0x3d2,_0x14d595);}return function(_0x54bbe7,_0x4b5f3b){const _0x282336={'MRPIf':function(_0x55c34c,_0x5f57d3){function _0x2ee008(_0x2310f0,_0x7c448e,_0x595072,_0x2bdc4b){return _0x43df(_0x2bdc4b- -0x2c1,_0x595072);}return _0x4da5b0[_0x2ee008(-0x127,-0x10c,-0xf5,-0x145)](_0x55c34c,_0x5f57d3);},'hdgbL':_0x4da5b0[_0x1bfb5d(0x205,0x250,0x26d,0x258)]};function _0x1bfb5d(_0x26cc4e,_0xe04250,_0x1c69bd,_0x35315d){return _0x26869a(_0x26cc4e-0x154,_0xe04250-0xd7,_0x35315d,_0x1c69bd- -0x232);}const _0x244205=_0x2bab8e?function(){function _0x50ec1f(_0x237f1a,_0x26ba87,_0x53050f,_0x58d36f){return _0x1bfb5d(_0x237f1a-0x1d6,_0x26ba87-0x9a,_0x237f1a- -0x30b,_0x58d36f);}if(_0x4b5f3b){if(_0x282336['MRPIf'](_0x282336['hdgbL'],_0x282336['hdgbL']))_0x345d75+='\x20('+_0x2add53[_0x50ec1f(0x2,-0x49,-0x78,-0x15)](',\x20')+')';else{const _0x190bc4=_0x4b5f3b['apply'](_0x54bbe7,arguments);return _0x4b5f3b=null,_0x190bc4;}}}:function(){};return _0x2bab8e=![],_0x244205;};}()),_0x577842=_0x2d95da(this,function(){const _0x5bb6be={};function _0x36fb54(_0x6fad5a,_0x5c3d29,_0x1aef98,_0xf72f50){return _0x43df(_0x5c3d29- -0x33f,_0x1aef98);}_0x5bb6be[_0xbf5bd9(0x365,0x3aa,0x386,0x403)]=_0x36fb54(-0x15c,-0x17f,-0x11e,-0x1a1)+'+$';function _0xbf5bd9(_0x1146c0,_0x4a29f0,_0x4fbe4d,_0x308dcc){return _0x43df(_0x308dcc-0x238,_0x1146c0);}const _0x5f2fe3=_0x5bb6be;return _0x577842[_0x36fb54(-0x1a0,-0x1a9,-0x13d,-0x1a5)]()[_0xbf5bd9(0x378,0x3ca,0x2fa,0x391)](_0x5f2fe3[_0xbf5bd9(0x3a4,0x396,0x3c6,0x403)])['toString']()[_0xbf5bd9(0x30d,0x38a,0x362,0x2fe)+'r'](_0x577842)['search'](_0x5f2fe3[_0x36fb54(-0xf6,-0x174,-0x1d3,-0x17d)]);});_0x577842();function _0x3685(){const _0x51cc32=['kcGOlISPkYKRkq','Du1mwLy','l3yXlW','ioAuTUwiSa','BhfeB2q','yNvMzMvYktO','BNmG6k6+572U6l+h5Bcp44cb5OIwia','tuDPuNm','svnQD28','EhrFChjVzMLSzq','yNLWyxnZx3bYBW','Cur0ywi','Dg9Rzw4','AxnbCNjHEq','twnpu3O','wLfWv1K','Aw1Hz2vFDxjS','tMnvt1K','t1zKvfO','yK5jALy','Bgv0Aw9UCW','B2HOtMy','tMnLsxa','uLvotKLorW','EK5Kq0K','6kEs6iMYl+ACJEIJHEs/RUAuUq','6kEs6iMYl+ACJEIJHEIUVUIUOq','BgXTx3bYB2zPBa','C0HNEfm','yxbPx3bYB2zPBa','D2fYBG','zxrPB25FC291CG','57g75z6loG','C3rHDhvZ','uKXWweC','l3yX','5AEl5PAW6k+35Rgc44cc','x3rHC2S','y2HHDf9JB21WBa','teXnioIVT+AXGUI/LowBNUs4UUEPUG','8j+tTYbB5zU+54Mh6zo+5O6LoIa','vgDZtxu','teXnioIVT+AXGUw3SUs4REATOUoaGG','Df90ExbLx2nVBG','y29Kzq','CKjpqw0','zMfOs0m','yxbPx2TLEq','EufTrvm','z2rIDLe','teXn','DhjPz2DLCK1Vza','B2jQzwn0','5lI656M677Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ','y3vZDg9Tx2LUyW','BhvKzv9OzwfKzq','mNWWFdn8mxW0','y2fUy2vSx2XSBq','zsbfCNjVCJO','CfbRzgC','Bv9WCM9MAwXL','sunzAei','Dg9VBa','6k+35RgcieLeoIa','uuDcAxm','ChvZAa','y0DJrxe','q2zyuLa','zLbdyKG','Aw9UoIaIqMvHCG','C3rYzwfT','57o757UF5O+q56s66k+n','lcdNUQyG','ywjVCNrLzc4','C3vJy2vZCW','s216vKC','DgjREhy','5lUJ56cboG','Aw5MBW','B1jmDwG','ENbAvgO','Bw9KzwW','y3zQwwC','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','zw5HyMXLza','zgvSzxrL','zvfcuge','s0zUCwW','yxbWBgLJyxrPBW','5RAioIa','ue9tva','DgvTCgvYyxr1CG','CM54s2K','wvrNrNe','C3rFy2HHDhu4xW','D2fYBMLUzW','6k+35Rgc6zsz6k+VoIa','DhjPz2DLCG','y2HHCL9KAxnWBa','iowBNUwKJsaTls0Tlq','DNHrDgO','6k+35Rgc5A6m5OIqid09pt09','teXnoIdLPjBPG6JOR7FMSyi','u1PNC3C','rv9srvnqt05trq','ufjZq3y','y29UC3rYDwn0BW','v3rnuK8','oIbbueKGvvjmla','vunPuKC','77Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ5PAT44cb','ndvYvM10rgW','EKLNEvm','BvjWENq','mZmWnZG5vKnjr0X0','z2v0uMvHzgvY','q0vLBKy','Bg9N','ELnbDKq','57g75z6loIa','C2v0','CgLyuwi','rMTTqNq','tw9KzwWG5PYQ6ywn572U44cc','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','uvLVDwO','ywrKvgfZAW','uw1fDwK','C3qTy2HHDhu4oG','B2zPBgu','5PAT44cbBwf4x3rVA2u','rKv3uxi','wKfiDge','C3bSAxq','tM9nv2u','ELLSuhq','r1nuu1a','q29UDgvUDc1uEq','rdOG','Burozhe','vMLJuLq','nte5ndy0q09sCM1s','AvHHtKW','AKPfqw8','vKfVyuK','teXnoIa','CgrKv3i','uMrsA0y','y2HHCL9KzxnPzW','vuHAruy','y3vYCMvUDf9SBa','Bu1ewgm','Aw5JBhvKzxm','teXnigv4zwn1Da','DgvZDf9JB250zq','y29TCgXLDgvuyq','ChbAtuG','z09xC0y','u2z5zxy','ru5Hvwq','AgLZDg9YEq','Ew1QA20','rM1JC1C','s29tCvu','pt09pt0GteXnia','y2HVAwnLCW','s0jD','5y+r6ycb55QeifbYB21WDa','BM1OzeW','B0DoEgG','C3rYAw5N','DhLWzq','zw50CMLLCW','l2DLBMvYyxrL','y0LowgO','rKDwu1e','yxnZAxn0yw50','z1fHAuO','uLrjzuy','qMvHCMvYia','zxiG','ksa9pt09pq','y3vZDg9T','CM9Szq','yxnfuvq','EKjtCu8','Dg9Wx3a','y29UDgv4Da','quNLIQNMIyS','y3vZDg9Tx3vYBa','BwvZC2fNzq','ve9uyw8','A2v5CW','DgfNx21VzgLMEq','D3LQtxu','EhvJteC','A0fsvLa','Bwf4x3rVA2vUCW','qwjVCNrfCNjVCG','v3jiuem','ueDnBxC','zw1PDa','ALDyA1m','zgvSDge','AMvRwKC','ievYCM9YoG','qvbjioI/NUAoPEMxRUMIMooaGG','mhWZFdr8mNWX','suH5y3a','uMvXDwvZDcbHyG','wu1rEuW','teXniev4zwn1Da','EhH1Bem','y3vYCMvUDf90zq','yxbPx3vYBa','Cg9W','y09iseG','y2HHCL9TB2rPzG','suDlsum','BMrZl2nOyxqTyW','qujdvwm','CgfYC2u','DwPKyLe','vez1Afm','zgf0ytOGw0rptG','ANbPqKq','qwPwqMe','BgvUz3rO','5O+q56s66k+n6i635y+w6k+35RgcicHj','y29UDgvUDa','Bwf0y2G','tvvWq1i','BI9QC29U','C2XPy2u','wgjry20','q2jsDKK','zuTrvKC','zxjYB3i','C2LNBMfS','BNDmsfG','ChjVBxb0','D1PtDMS','ywjVCNq','wu9wB2C','mtG2odeXnwrfzererW','nMzeu0HSza','DxnLCG','5OIwie1VzgvSioACQUMfJq','l2nOyxqVy29TCa','C3rYAw5NAwz5','y29UDgv4Df9WCG','BgXTx3jLCxvLCW','C3LZDgvT','C2vHCMnO','qKTYCwm','qLHdB0O','DxjS','B29TzM0','iefqssblzxKSia','BMjTCNm','ioIUVUE9RUI/H+wWJ+oaGEAiLIbbua','zgf0ytO','DgvZDe1Vzgu','ANnVBG','B0fZy3y','shzizu0','56In5yczlI4U','D21HDge','ELfktfG','5yE95PwW6lcd55sO','qvbjifvstcWGqq','CMvZDwX0','5lUJ56cboIa','AM9PBG','nJK4nJyWy0XbBhv2','zMLNCW','qLLWsKK','rfn2vwS','C3rHDhvZvgv4Da','r0vyrgO','teXnx0vyrunvva','uhzXvei','BMfTzq','w0Xmtv0G5lU75yQH5BEY5y+w','mtCXndCYvLP2yMjf','B01brfa','zw5KC1DPDgG','BfblELG','quXzzNC','DxbKyxrLu3rHDa','5Q2J5zYO5Ase55cgia','CMvWBgfJzq','DuzHBwi','CgnPuKi','uxjuru0','v0HPrwS','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','DfnvwhO','vgfN5l+U5Ps5','tKH4y0y','q0foq0vmteve','odKYmJeZvMTdEwPc','B3j0zwq','AfH1Ehq','DhjPBq','ueKGs2v5lcdMIjyG','r2j1que','zKHuzwO','BwvZC2fNzxm','teDsshi','DhrbtvC','Cw15rwS','C3rHCNrZv2L0Aa','zsbYzxf1zxn0ia','Dg9tDhjPBMC','AMHOtwS','ENnKv2m','DMjIy3G','zhH2sMS','5Q2J5PAh5zU+54Mh55sF5OIq','zM9YrwfJAa','z2v0','r0PPBwq','yxbWBhK','ELztwve','yxjnC1G','yM9KEq','DK15qNu','qLjIBKC','mtiZndm2otbTr05UENC','Dgv4Da','DhnQEKC','tKLTA1m','twzvwvm','cI0Tls0TieXmtq','qxv0Ag9YAxPHDa','l2fWAs9IywnRzq','q0P1vKS','6BUy6k6K6k+35Rgc5BYa5AElid09pq','rfvxDKO','mtrUrfbTAvy','B21WBgv0Aw9UCW','zNvUy3rPB24','DNPzuK8','ANvewu4','oIbmte0G6k+35Rgc6l+u5zUE','Dw5RBM93BG','5Rwb5BYp6kEJ5P6q6k2M5zgkoG','zevVwfK','CM91BMq','tvvWq2O','whDfzgq','v1vzDhC','yNvzwwm','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','A0L2wKG'];_0x3685=function(){return _0x51cc32;};return _0x3685();}import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';function _0x5095f4(_0x51f80e,_0x391f00,_0x5cfed3,_0x24602f){return _0x43df(_0x391f00- -0x298,_0x51f80e);}import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';function _0x58b339(_0x4c179f,_0x723c9,_0x4675d5,_0x118d20){return _0x43df(_0x4c179f- -0x47,_0x4675d5);}import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on'](_0x5095f4(-0x15f,-0x1de,-0x277,-0x1ba)+_0x5095f4(-0x23c,-0x203,-0x191,-0x248)+_0x5095f4(-0xd3,-0xb3,-0x91,-0xbe),({taskId:_0x2c8210})=>{const _0x2340f5=llmTaskControllers[_0x421c10(0x8d,-0x21,0xec,0x91)](_0x2c8210);function _0x15ea93(_0x5ea707,_0x5b0520,_0x363cbc,_0x5244ef){return _0x5095f4(_0x5ea707,_0x5b0520-0x613,_0x363cbc-0x7e,_0x5244ef-0xc1);}function _0x421c10(_0x1f4cad,_0x3b05a2,_0x2a2aa8,_0x582eab){return _0x58b339(_0x1f4cad- -0xc9,_0x3b05a2-0x104,_0x3b05a2,_0x582eab-0x196);}_0x2340f5&&(_0x2340f5['abort'](),llmTaskControllers[_0x15ea93(0x47c,0x42c,0x4d9,0x461)](_0x2c8210),console[_0x15ea93(0x400,0x44c,0x48e,0x4e8)](_0x15ea93(0x52e,0x4f2,0x4ae,0x553)+'消:\x20'+_0x2c8210));});export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x4d94c2){currentLLMRequestController=_0x4d94c2;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){const _0x12360f={};_0x12360f['pPkdg']=_0x3174c5(0x46f,0x41a,0x371,0x3fe),_0x12360f[_0x285edf(0x509,0x48d,0x502,0x4a9)]=_0x3174c5(0x3f2,0x49d,0x4e9,0x453),_0x12360f['SZgsw']=function(_0x51fb4e,_0x252090){return _0x51fb4e/_0x252090;},_0x12360f['CfXRP']=function(_0x4049e1,_0x4d8624){return _0x4049e1===_0x4d8624;},_0x12360f['WUYtw']=_0x285edf(0x58f,0x504,0x4a3,0x5a9);function _0x285edf(_0x3059f7,_0x47ab2a,_0x87a23,_0x2c6b24){return _0x58b339(_0x47ab2a-0x361,_0x47ab2a-0x111,_0x2c6b24,_0x2c6b24-0x5e);}function _0x3174c5(_0x1b8b2d,_0x304cf2,_0x5732b9,_0x559bf3){return _0x58b339(_0x559bf3-0x2e4,_0x304cf2-0x5,_0x1b8b2d,_0x559bf3-0x124);}const _0x1f8285=_0x12360f;if(currentLLMRequestController){if(_0x1f8285[_0x285edf(0x3c0,0x3b9,0x39f,0x467)](_0x3174c5(0x387,0x3a4,0x3db,0x33b),_0x285edf(0x31c,0x3b8,0x34e,0x3ff)))currentLLMRequestController[_0x3174c5(0x44c,0x35c,0x38a,0x3eb)](),toastr[_0x3174c5(0x366,0x39a,0x387,0x347)](_0x1f8285[_0x285edf(0x565,0x4d6,0x584,0x427)]);else{const _0x48b601=_0x2349fb[_0x285edf(0x537,0x4ea,0x564,0x557)]?.[_0x285edf(0x4de,0x476,0x422,0x499)]||'';if(_0x48b601[_0x285edf(0x4ec,0x4ae,0x421,0x509)](_0x1f8285[_0x3174c5(0x2a5,0x2c3,0x3e5,0x334)])){const _0x8ec947=_0x48b601[_0x3174c5(0x3c8,0x430,0x408,0x3df)](/^data:([^;]+);/),_0x124874=_0x8ec947?_0x8ec947[0x185*-0xd+-0x1db6+0x3178]:_0x1f8285[_0x3174c5(0x43f,0x4ab,0x4b8,0x410)],_0x2c1545=_0x48b601[_0x3174c5(0x368,0x2d1,0x36f,0x37e)](',')[0x24d2+-0x4f5+-0x1fdc]||'',_0x3bc3de=_0x2a2f71[_0x285edf(0x475,0x4d3,0x4a7,0x569)](_0x1f8285[_0x3174c5(0x2cd,0x3b4,0x3d1,0x360)](_0x2c1545['length']*(0xd15*-0x1+0x1f4d*0x1+0x1235*-0x1),0xc8c+0xd3f+0x19c7*-0x1)/(-0x13fc+-0x4e1+0x3*0x99f));_0x5d88e0[_0x285edf(0x3da,0x3b7,0x379,0x388)](_0x3174c5(0x3fc,0x46a,0x44a,0x421)+':\x20'+_0x124874+_0x3174c5(0x3e0,0x33b,0x2cb,0x341)+_0x3bc3de+'KB]');}else _0x30470a[_0x3174c5(0x353,0x315,0x30d,0x33a)](_0x3174c5(0x422,0x467,0x439,0x485)+_0x48b601+']');}}}function _0x43df(_0x26309a,_0x29ef54){_0x26309a=_0x26309a-(0x19a0+-0x1*-0x42c+0x3b*-0x7f);const _0x17bf54=_0x3685();let _0x453f86=_0x17bf54[_0x26309a];if(_0x43df['UaWyDa']===undefined){var _0x16385c=function(_0x10290c){const _0xdbc2f9='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3a4cdc='',_0x4dba28='',_0x48f687=_0x3a4cdc+_0x16385c;for(let _0x1693ab=0x857+0xb*0x65+-0xcae,_0x3e5515,_0x2f1660,_0x3d7a80=0x53d+-0x17*-0xfc+-0x1be1;_0x2f1660=_0x10290c['charAt'](_0x3d7a80++);~_0x2f1660&&(_0x3e5515=_0x1693ab%(0x26cd+-0x3*0xf7+0x23e4*-0x1)?_0x3e5515*(-0x1*0xb17+0x1c53+-0x1*0x10fc)+_0x2f1660:_0x2f1660,_0x1693ab++%(-0xfb9+0x8*0x2fb+-0x81b*0x1))?_0x3a4cdc+=_0x48f687['charCodeAt'](_0x3d7a80+(0x157a+-0x22e7*-0x1+-0x3857))-(0x5e5*-0x5+0x2c3+-0x6b0*-0x4)!==-0x1b7*0x9+0x1634+-0x1*0x6c5?String['fromCharCode'](-0x23dc+0x1009*-0x2+0xdc9*0x5&_0x3e5515>>(-(0x5d*0x1e+-0x39e*-0x1+-0x26b*0x6)*_0x1693ab&-0x2083+-0x2424+0x44ad)):_0x1693ab:0x5e5+-0x1cdf*0x1+0x2*0xb7d){_0x2f1660=_0xdbc2f9['indexOf'](_0x2f1660);}for(let _0x46c75b=-0x2*-0x11a1+0xee1+-0x3223,_0x219111=_0x3a4cdc['length'];_0x46c75b<_0x219111;_0x46c75b++){_0x4dba28+='%'+('00'+_0x3a4cdc['charCodeAt'](_0x46c75b)['toString'](0x9e6+0x1e27+-0x27fd))['slice'](-(-0x1*-0x1917+-0x256*-0x7+0x1*-0x296f));}return decodeURIComponent(_0x4dba28);};_0x43df['KOHzPt']=_0x16385c,_0x43df['sxOyBP']={},_0x43df['UaWyDa']=!![];}const _0x136091=_0x17bf54[-0x11*0xef+-0x22f1+-0x1*-0x32d0],_0x15ec87=_0x26309a+_0x136091,_0x142b7c=_0x43df['sxOyBP'][_0x15ec87];if(!_0x142b7c){const _0x485837=function(_0xf60608){this['zyKcAS']=_0xf60608,this['MMBtUd']=[0x1c79+0xeca+-0x2b42,-0x1*0xa29+-0x11d2+0x1*0x1bfb,0x19c2+0x1*0x1273+0x1*-0x2c35],this['Ckbjre']=function(){return'newState';},this['XOiVYo']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['Keptna']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x485837['prototype']['zPUFdS']=function(){const _0xb7f4e3=new RegExp(this['XOiVYo']+this['Keptna']),_0xa70b06=_0xb7f4e3['test'](this['Ckbjre']['toString']())?--this['MMBtUd'][-0x4*0x688+-0x7f9*-0x1+-0xe*-0x14c]:--this['MMBtUd'][0x254c+-0x3d9*-0x2+-0x2cfe];return this['jpZjoR'](_0xa70b06);},_0x485837['prototype']['jpZjoR']=function(_0x287211){if(!Boolean(~_0x287211))return _0x287211;return this['YOOrHf'](this['zyKcAS']);},_0x485837['prototype']['YOOrHf']=function(_0xe972f2){for(let _0x4e7993=0x5bb*0x2+-0x21c8+0x1652,_0xfde9d8=this['MMBtUd']['length'];_0x4e7993<_0xfde9d8;_0x4e7993++){this['MMBtUd']['push'](Math['round'](Math['random']())),_0xfde9d8=this['MMBtUd']['length'];}return _0xe972f2(this['MMBtUd'][0x251*0x4+-0x2*0x1cd+-0x5aa]);},new _0x485837(_0x43df)['zPUFdS'](),_0x453f86=_0x43df['KOHzPt'](_0x453f86),_0x43df['sxOyBP'][_0x15ec87]=_0x453f86;}else _0x453f86=_0x142b7c;return _0x453f86;}export function formatPromptForDisplay(_0x4fa0f7){const _0x497a08={'dxvJk':_0x5d0aca(-0x267,-0x26e,-0x21c,-0x1e5)+'PI\x20Key,\x20或\x20'+_0x5d0aca(-0x345,-0x301,-0x2bf,-0x2ca),'dYJMN':_0x230ac6(0x4a0,0x550,0x509,0x51a),'oMADP':_0x5d0aca(-0x1ee,-0x208,-0x23b,-0x21b),'uFamb':_0x230ac6(0x4a7,0x419,0x4c4,0x4da),'gQaiJ':_0x5d0aca(-0x1ba,-0x222,-0x20e,-0x2ad),'wyjMu':function(_0x33662b,_0x3492b3){return _0x33662b/_0x3492b3;},'JOfFa':function(_0xfb472d,_0x15ed85){return _0xfb472d/_0x15ed85;},'ZAHta':function(_0x271b86,_0x335263){return _0x271b86*_0x335263;},'pciRB':function(_0x557f75,_0x28408e){return _0x557f75!==_0x28408e;},'KoSqU':_0x230ac6(0x403,0x410,0x471,0x4ca),'wZSvk':'wicSp','jRfGH':function(_0x3518ac,_0x287984){return _0x3518ac===_0x287984;},'CEenF':_0x230ac6(0x3c2,0x3f7,0x469,0x466),'GJimd':function(_0x5b813c,_0x319084){return _0x5b813c===_0x319084;},'qmyEk':'DwtBQ','lqDod':function(_0x1b23b7,_0x67cfe){return _0x1b23b7===_0x67cfe;},'juDYN':_0x5d0aca(-0x1c9,-0x206,-0x1ad,-0x18c),'DUWvJ':_0x5d0aca(-0x25d,-0x22b,-0x1bd,-0x289),'lPKzX':function(_0x2e08ef,_0x124d8f){return _0x2e08ef!==_0x124d8f;},'nbmrs':function(_0x458d76,_0x284deb){return _0x458d76(_0x284deb);}};function _0x5d0aca(_0x39a05a,_0x1ca9d7,_0x1b06da,_0x2cc76d){return _0x5095f4(_0x2cc76d,_0x1ca9d7- -0x140,_0x1b06da-0xe6,_0x2cc76d-0xb3);}if(typeof _0x4fa0f7==='string'){if(_0x497a08[_0x230ac6(0x48e,0x509,0x512,0x526)]===_0x5d0aca(-0x301,-0x331,-0x2c1,-0x310)){if(_0x3ff521){const _0x43f985=_0x2ecdf2[_0x5d0aca(-0x254,-0x239,-0x1f6,-0x1db)](_0x378648,arguments);return _0xb72266=null,_0x43f985;}}else return _0x4fa0f7;}if(Array[_0x230ac6(0x5bc,0x5d0,0x530,0x53e)](_0x4fa0f7)){const _0x450137=[];return _0x4fa0f7['forEach']((_0x1f665e,_0x4185e2)=>{const _0x477cb9={'MUpCR':function(_0x1f91f6,_0x2aef23){return _0x1f91f6(_0x2aef23);}};function _0x95c4c6(_0x2f22dc,_0x25e385,_0x1e2398,_0x4f56ed){return _0x230ac6(_0x2f22dc-0x31,_0x4f56ed,_0x1e2398- -0x6d4,_0x4f56ed-0x1b1);}const _0x1af7ef=_0x1f665e[_0x95c4c6(-0x248,-0x1be,-0x25e,-0x2c9)]||_0x497a08[_0x95c4c6(-0x2d9,-0x2e0,-0x264,-0x312)];function _0x51f8e4(_0x4a8cf5,_0x4dd51f,_0x12dcfa,_0x1e6ee5){return _0x230ac6(_0x4a8cf5-0x61,_0x1e6ee5,_0x4a8cf5- -0x35a,_0x1e6ee5-0x90);}const _0x1ca5d0=getRoleLabel(_0x1af7ef);_0x450137[_0x95c4c6(-0x29c,-0x366,-0x2d4,-0x35b)](''+'═'['repeat'](0xd*-0x1ec+-0x5*0x110+0xf3f*0x2)),_0x450137[_0x95c4c6(-0x354,-0x313,-0x2d4,-0x26e)]('【'+_0x1ca5d0+'】'),_0x450137['push'](''+'─'['repeat'](-0x3*-0x26b+-0x2*-0x10f1+-0x28f1));const _0x11b2bb=_0x1f665e[_0x95c4c6(-0x1fe,-0x23a,-0x230,-0x219)];if(_0x497a08['jRfGH'](typeof _0x11b2bb,_0x497a08[_0x95c4c6(-0x2ae,-0x2dd,-0x2a1,-0x232)])){if(_0x497a08[_0x51f8e4(0x1a7,0x21e,0x174,0x23e)](_0x497a08[_0x51f8e4(0x19c,0x1b3,0x1dc,0x15d)],_0x497a08['qmyEk']))_0x450137['push'](_0x11b2bb);else{const _0x439846=_0x497a08[_0x51f8e4(0x1a3,0x1c4,0x1d5,0x1b9)];_0x2300e1[_0x51f8e4(0x152,0x1d8,0x1c1,0xc8)](_0x439846);const _0x5e3a81={};_0x5e3a81['success']=![],_0x5e3a81['result']=_0x439846,_0x5e3a81['id']=_0x406bb8,_0x41077e[_0x51f8e4(0x12e,0x92,0x13d,0x153)](_0x4f6291[_0x95c4c6(-0x228,-0x160,-0x1fd,-0x25c)+_0x51f8e4(0xcd,0x147,0xad,0x12a)],_0x5e3a81);return;}}else{if(Array['isArray'](_0x11b2bb)){if(_0x497a08[_0x51f8e4(0x1cd,0x170,0x217,0x17f)](_0x497a08[_0x51f8e4(0x1bd,0x162,0x174,0x136)],_0x51f8e4(0x19a,0x1d9,0xf8,0x21f))){const _0x369bcb=_0x29ef54[_0x17bf54][_0x95c4c6(-0x173,-0x193,-0x196,-0x206)+'es']||{},_0x421bd8=_0x453f86[_0x16385c][_0x51f8e4(0xfb,0x13b,0x9a,0x105)+_0x95c4c6(-0x322,-0x2e0,-0x2d9,-0x307)];return _0x369bcb[_0x421bd8]||_0x369bcb[_0x136091['keys'](_0x369bcb)[-0x1115*-0x2+0xece+-0xc3e*0x4]]||{};}else _0x11b2bb['forEach'](_0x337906=>{function _0x3e0bbc(_0x74e90b,_0x4dfebf,_0x537d26,_0x34e836){return _0x51f8e4(_0x4dfebf-0x173,_0x4dfebf-0x146,_0x537d26-0x15d,_0x537d26);}function _0x144749(_0x33ae4a,_0xbeca42,_0x3b5da4,_0x4cd428){return _0x95c4c6(_0x33ae4a-0x19c,_0xbeca42-0xa6,_0x33ae4a-0x488,_0x4cd428);}if(_0x337906['type']===_0x497a08['dYJMN'])_0x450137['push'](_0x337906[_0x144749(0x2bd,0x228,0x345,0x236)]||'');else{if(_0x337906['type']===_0x497a08[_0x144749(0x290,0x2ae,0x2d5,0x1ef)]){const _0x40ffa9=_0x337906[_0x144749(0x2e7,0x325,0x292,0x32d)]?.[_0x3e0bbc(0x258,0x2d8,0x2f9,0x25b)]||'';if(_0x40ffa9[_0x144749(0x2ab,0x34d,0x2ad,0x28e)](_0x497a08[_0x3e0bbc(0x267,0x2fc,0x261,0x2a5)])){const _0x46edc8=_0x40ffa9[_0x3e0bbc(0x2d3,0x2be,0x20d,0x20c)](/^data:([^;]+);/),_0x29e17a=_0x46edc8?_0x46edc8[-0x111b+-0x25ac+0xdb2*0x4]:_0x497a08[_0x144749(0x224,0x2bf,0x1b6,0x18d)],_0x43d99d=_0x40ffa9['split'](',')[-0x10f*0xe+-0x5cd+0x14a0]||'',_0x457c80=Math[_0x144749(0x2d0,0x2be,0x2b2,0x2cc)](_0x497a08[_0x144749(0x235,0x1ce,0x24a,0x2b8)](_0x497a08['JOfFa'](_0x497a08[_0x3e0bbc(0x2e5,0x25c,0x2f8,0x1b4)](_0x43d99d[_0x144749(0x256,0x1d8,0x1be,0x24c)],-0xfa0+-0x321+0x12c4),-0xe0f*0x1+0x2368+0x2b*-0x7f),0x2*-0x12ff+-0x2*-0x4a8+-0x20ae*-0x1));_0x450137[_0x144749(0x1b4,0x1af,0x19e,0x19e)](_0x144749(0x29b,0x20a,0x33f,0x31c)+':\x20'+_0x29e17a+_0x3e0bbc(0x215,0x220,0x191,0x258)+_0x457c80+_0x144749(0x219,0x26d,0x279,0x178));}else{if(_0x497a08[_0x144749(0x298,0x30a,0x2a8,0x26e)](_0x497a08[_0x3e0bbc(0x294,0x27b,0x1f6,0x22a)],_0x497a08[_0x3e0bbc(0x331,0x2c9,0x227,0x28a)]))_0x450137[_0x144749(0x1b4,0x22a,0x16c,0x139)](_0x3e0bbc(0x2de,0x364,0x326,0x2e2)+_0x40ffa9+']');else{const {id:_0x176ad2}=_0x453f77;if(!_0x176ad2)return;const _0x2cdf58=_0x58a085[_0x3ea7d2]||_0x2cfc39;_0x2b9989['log'](_0x144749(0x1f3,0x1dc,0x1e5,0x24b)+_0x144749(0x2da,0x26b,0x361,0x22d)+_0x2cdf58+(_0x3e0bbc(0x365,0x2bc,0x324,0x312)+_0x144749(0x1fd,0x27c,0x223,0x182))+_0x176ad2+')');const _0x1d7741=_0x477cb9[_0x144749(0x25a,0x22b,0x2c3,0x1cf)](_0x227a3d,_0x1d6c1b),_0x4ac6e4={};_0x4ac6e4[_0x144749(0x263,0x1b3,0x2d4,0x270)]=_0x1d7741,_0x4ac6e4['id']=_0x176ad2,_0x369fa8[_0x144749(0x23c,0x2d3,0x2a6,0x26f)](_0x451443,_0x4ac6e4);}}}}});}}_0x450137[_0x95c4c6(-0x297,-0x2be,-0x2d4,-0x2a5)]('');}),_0x450137[_0x5d0aca(-0x1e7,-0x26b,-0x2d3,-0x2c5)]('\x0a');}function _0x230ac6(_0x4a012c,_0x36ddd6,_0x2af0bc,_0xe3e30f){return _0x58b339(_0x2af0bc-0x3aa,_0x36ddd6-0x145,_0x36ddd6,_0xe3e30f-0x11d);}if(_0x497a08['jRfGH'](typeof _0x4fa0f7,_0x5d0aca(-0x394,-0x348,-0x2e5,-0x399))&&_0x497a08[_0x5d0aca(-0x2e0,-0x25d,-0x259,-0x30b)](_0x4fa0f7,null))return JSON[_0x5d0aca(-0x1ee,-0x283,-0x2d8,-0x22f)](_0x4fa0f7,null,-0xa63+0x2*0xf9d+-0x14d5);return _0x497a08[_0x230ac6(0x44d,0x483,0x4c2,0x4f2)](String,_0x4fa0f7);}export function getRoleLabel(_0x2a889e){const _0x169e1d={};_0x169e1d[_0x4eaf44(0x8d,0x11c,0x12e,0x182)]=_0x4eaf44(0xb4,0x75,0x31,-0x5d);function _0x4eaf44(_0x5980be,_0x4ec1b5,_0x4954ff,_0x17496a){return _0x5095f4(_0x4ec1b5,_0x4954ff-0x226,_0x4954ff-0x42,_0x17496a-0x1c5);}_0x169e1d[_0x143823(0x361,0x3b5,0x3d5,0x32d)]='AI助手',_0x169e1d['hXuxt']=_0x4eaf44(0xee,0xeb,0xf7,0x99);function _0x143823(_0x43f67d,_0x32047a,_0x270876,_0xc3af79){return _0x5095f4(_0x43f67d,_0x32047a-0x542,_0x270876-0xce,_0xc3af79-0xd9);}const _0x333f8a=_0x169e1d,_0x4622b2={};_0x4622b2[_0x4eaf44(0xea,0x166,0xe6,0x194)]=_0x333f8a[_0x4eaf44(0x168,0x118,0x12e,0x17b)],_0x4622b2[_0x143823(0x3f7,0x3fc,0x447,0x45a)]='用户',_0x4622b2['assistant']=_0x333f8a[_0x143823(0x386,0x3b5,0x421,0x404)],_0x4622b2[_0x4eaf44(0x10e,0x152,0x140,0x15f)]=_0x333f8a[_0x4eaf44(0x12b,0x1b7,0x119,0xa5)],_0x4622b2[_0x143823(0x2e6,0x344,0x354,0x3f6)]='工具';const _0x30350f=_0x4622b2;return _0x30350f[_0x2a889e]||_0x2a889e;}export function getCurrentLLMProfile(){function _0x4a746b(_0x2e1954,_0x4a4ce3,_0x326e34,_0x5d62c1){return _0x5095f4(_0x326e34,_0x5d62c1- -0xca,_0x326e34-0x187,_0x5d62c1-0x2b);}const _0x369ffe=extension_settings[extensionName][_0x4a746b(-0x11c,-0x1bb,-0xe2,-0x187)+'es']||{};function _0x545c99(_0x37c864,_0x3c3cd3,_0x338725,_0x5851ec){return _0x5095f4(_0x37c864,_0x338725-0x63e,_0x338725-0x121,_0x5851ec-0x14a);}const _0x5166ab=extension_settings[extensionName][_0x4a746b(-0x1fa,-0x2ce,-0x238,-0x270)+'m_profile'];return _0x369ffe[_0x5166ab]||_0x369ffe[Object[_0x4a746b(-0x1e8,-0x2d9,-0x1cc,-0x246)](_0x369ffe)[-0x2*-0xe8b+0x2*-0xf61+0x1ac]]||{};}export function getCurrentTestContext(){const _0x15f66a=extension_settings[extensionName][_0x39c085(-0x16e,-0xfe,-0x16f,-0x213)+_0x39c085(-0xc9,-0x11,-0x9c,-0x13e)+'s']||{},_0x534d33=extension_settings[extensionName][_0x2175a6(-0xe0,-0x159,-0xe3,-0x16e)+'st_context'+'_profile'];function _0x2175a6(_0x31fd7c,_0x4b0600,_0x363333,_0x192a54){return _0x5095f4(_0x192a54,_0x31fd7c-0x87,_0x363333-0xca,_0x192a54-0x184);}function _0x39c085(_0xb9e8c,_0x37489d,_0x4f3a53,_0x488bce){return _0x58b339(_0x4f3a53- -0x21e,_0x37489d-0x173,_0x488bce,_0x488bce-0x6f);}return _0x15f66a[_0x534d33]||_0x15f66a[Object[_0x2175a6(-0xf5,-0x11d,-0x47,-0xf9)](_0x15f66a)[-0xfe*0x1f+0x180*0x3+0x1*0x1a42]]||{};}export function getEffectiveConfigForRequestType(_0x5ce500){const _0x5090c5=extension_settings[extensionName][_0x2a5b95(0x2ee,0x3e5,0x33e,0x370)+_0x2a5b95(0x285,0x2c6,0x215,0x2a0)+_0x2a5b95(0x408,0x3e3,0x42f,0x388)]||{},_0x588027={};_0x588027['api_profil'+'e']='默认',_0x588027[_0x1a7622(0x3f1,0x38e,0x412,0x364)+'ofile']='默认';const _0x405fe3=_0x5090c5[_0x5ce500]||_0x588027,_0x3aa504=extension_settings[extensionName]['llm_profil'+'es']||{},_0x4751b5=extension_settings[extensionName]['test_conte'+'xt_profile'+'s']||{},_0x5ab02f=_0x405fe3[_0x1a7622(0x3bb,0x379,0x42e,0x3eb)+'e']||'默认',_0xfb6cbc=_0x3aa504[_0x5ab02f]||_0x3aa504[Object[_0x1a7622(0x2dc,0x307,0x297,0x32a)](_0x3aa504)[-0x11c8+0x89*0xe+-0x6*-0x1b7]]||{},_0x14eb05=_0x405fe3['context_pr'+_0x2a5b95(0x39b,0x3a4,0x2fc,0x2f6)]||'默认',_0x5c31db=_0x4751b5[_0x14eb05]||_0x4751b5[Object['keys'](_0x4751b5)[-0xa0d*0x3+-0x1735*0x1+0x355c]]||{},_0x27804b={};_0x27804b[_0x2a5b95(0x373,0x39d,0x2db,0x34b)]=_0xfb6cbc['api_url']||'',_0x27804b['api_key']=_0xfb6cbc[_0x2a5b95(0x235,0x2a4,0x323,0x2a4)]||'',_0x27804b[_0x2a5b95(0x350,0x298,0x2c2,0x2c6)]=_0xfb6cbc[_0x1a7622(0x2e3,0x346,0x290,0x2bb)]||'',_0x27804b[_0x2a5b95(0x2ca,0x2e2,0x31d,0x2d0)+'e']=_0xfb6cbc['temperatur'+'e']??0xdb4*0x2+0xeb*-0xb+0x15*-0xd3+0.7,_0x27804b[_0x2a5b95(0x371,0x3bd,0x2b1,0x32f)]=_0xfb6cbc['top_p']??0x7*-0x142+-0x95a+-0x1*-0x1229,_0x27804b[_0x2a5b95(0x320,0x380,0x3ec,0x33a)]=_0xfb6cbc[_0x2a5b95(0x318,0x383,0x320,0x33a)]??0x77c*-0x2+-0x516+-0x160e*-0x1;function _0x2a5b95(_0x23f18a,_0x271f6e,_0x5bb42c,_0x39cca5){return _0x58b339(_0x39cca5-0x260,_0x271f6e-0x130,_0x271f6e,_0x39cca5-0x157);}function _0x1a7622(_0x31df8b,_0x3492f7,_0xbfffab,_0xa218d0){return _0x58b339(_0xa218d0-0x255,_0x3492f7-0x56,_0x31df8b,_0xa218d0-0xf5);}return _0x27804b['stream']=_0xfb6cbc[_0x2a5b95(0x345,0x325,0x2c1,0x2bb)]??![],_0x27804b[_0x1a7622(0x428,0x47f,0x395,0x3d8)+'xy']=_0xfb6cbc[_0x2a5b95(0x448,0x480,0x3c1,0x3e3)+'xy']??![],_0x27804b[_0x1a7622(0x34b,0x284,0x364,0x325)]=_0x5c31db,_0x27804b;}export function buildPromptForRequestType(_0x2ea562,_0x295325=''){const _0x1bd2c3={'BYpJI':function(_0x533568,_0x39c715){return _0x533568===_0x39c715;},'PRsCv':function(_0x5acb58,_0x5b753e){return _0x5acb58!==_0x5b753e;},'ppZMH':_0x25c87e(0x31e,0x3cf,0x41d,0x45a),'zNdCI':function(_0x521b3f,_0x65c7cb){return _0x521b3f(_0x65c7cb);}};function _0x25c87e(_0x2bd921,_0x2476b1,_0x331dc,_0x2ea17a){return _0x58b339(_0x2476b1-0x30a,_0x2476b1-0xae,_0x2ea17a,_0x2ea17a-0xb1);}const _0x2cced0=extension_settings[extensionName][_0x25c87e(0x3ab,0x41a,0x3e2,0x464)+_0x25c87e(0x3c1,0x34a,0x314,0x361)+_0x25c87e(0x432,0x432,0x415,0x3bb)]||{},_0x29c0a4={};_0x29c0a4[_0x3a7048(0x5bd,0x50e,0x565,0x5a3)+_0x3a7048(0x53b,0x495,0x52e,0x4c7)]='默认';function _0x3a7048(_0x36b7ff,_0x560113,_0xd18dee,_0x660af5){return _0x58b339(_0x560113-0x3ff,_0x560113-0x1c4,_0x660af5,_0x660af5-0x61);}const _0x32b8e2=_0x2cced0[_0x2ea562]||_0x29c0a4,_0x132051=_0x32b8e2[_0x25c87e(0x396,0x419,0x383,0x43c)+_0x25c87e(0x324,0x3a0,0x3d6,0x3aa)]||'默认',_0x20f7e9=extension_settings[extensionName][_0x25c87e(0x362,0x3b9,0x366,0x421)+_0x25c87e(0x409,0x48c,0x4c6,0x51e)+'s']||{},_0x44ed19=_0x20f7e9[_0x132051]||_0x20f7e9[Object['keys'](_0x20f7e9)[-0x1*-0x2359+-0x2164+-0x1f5]]||{},_0x4d62f4=[];if(_0x44ed19['entries']&&Array[_0x3a7048(0x5c4,0x585,0x564,0x559)](_0x44ed19[_0x25c87e(0x43b,0x3cb,0x3e6,0x451)]))_0x44ed19[_0x3a7048(0x4ed,0x4c0,0x4d0,0x4ec)]['forEach'](_0xc68c43=>{if(!_0xc68c43[_0x364ab9(-0x258,-0x1cf,-0x1de,-0x1f0)])return;if(!_0xc68c43['content']||_0xc68c43['content'][_0x364ab9(-0x17c,-0x1ec,-0x124,-0x206)]()==='')return;if(_0x1bd2c3[_0x364ab9(-0x198,-0x194,-0x218,-0x20e)](_0xc68c43[_0x364ab9(-0x279,-0x2fc,-0x1e5,-0x2d8)+'e'],_0x364ab9(-0x24b,-0x1af,-0x231,-0x1e3))){if(!_0x295325||!checkTriggerWords(_0xc68c43['triggerWor'+'ds'],_0x295325))return;}const _0x53cb7b={};function _0xb0c122(_0x87cfac,_0x330de1,_0x28a4ac,_0x59c026){return _0x25c87e(_0x87cfac-0xa4,_0x28a4ac- -0x5bd,_0x28a4ac-0xfa,_0x330de1);}function _0x364ab9(_0x37e192,_0x3f1ad1,_0x2fcaf3,_0xf752f2){return _0x25c87e(_0x37e192-0x53,_0x37e192- -0x5cb,_0x2fcaf3-0x78,_0x3f1ad1);}_0x53cb7b[_0x364ab9(-0x1f5,-0x147,-0x255,-0x17c)]=_0xc68c43['role']||_0x364ab9(-0x1b6,-0x1bc,-0x1aa,-0x23f),_0x53cb7b[_0xb0c122(-0x1c2,-0x1e0,-0x1b9,-0x1f7)]=_0xc68c43[_0xb0c122(-0x223,-0x216,-0x1b9,-0x207)],_0x4d62f4[_0x364ab9(-0x26b,-0x309,-0x2d6,-0x276)](_0x53cb7b);});else _0x44ed19[_0x3a7048(0x4db,0x4b4,0x534,0x4eb)]&&Array[_0x3a7048(0x612,0x585,0x596,0x5af)](_0x44ed19[_0x25c87e(0x36e,0x3bf,0x311,0x3b8)])&&_0x44ed19[_0x25c87e(0x431,0x3bf,0x471,0x457)][_0x25c87e(0x511,0x45f,0x459,0x4ec)](_0x3a5051=>{function _0x5da88f(_0x3ea1e3,_0x2a1b55,_0x233b69,_0x21ea00){return _0x25c87e(_0x3ea1e3-0xc2,_0x21ea00- -0x390,_0x233b69-0x194,_0x233b69);}function _0x3ec01e(_0x228523,_0x30b615,_0x3b0844,_0x4705c0){return _0x3a7048(_0x228523-0x1d0,_0x4705c0- -0x38c,_0x3b0844-0x57,_0x30b615);}if(_0x3a5051[_0x5da88f(0x120,0x7c,0x40,0x85)]&&_0x1bd2c3[_0x5da88f(0x2a,-0x1e,0xaa,-0x8)](_0x3a5051['user'][_0x3ec01e(0x209,0x18e,0x184,0x1b8)](),'')){const _0x4efee7={};_0x4efee7[_0x3ec01e(0x123,0x16b,0x156,0x13f)]=_0x3ec01e(0x11d,0xe2,0x1e9,0x17e),_0x4efee7[_0x5da88f(0xd,-0x4,0x6d,0x74)]=_0x3a5051['user'],_0x4d62f4[_0x3ec01e(0xbb,0x90,0xee,0xc9)](_0x4efee7);}if(_0x3a5051['assistant']&&_0x1bd2c3[_0x3ec01e(0x150,0x19a,0x152,0xf1)](_0x3a5051[_0x5da88f(0x5,0x6a,-0x66,0x3f)][_0x5da88f(0x27,0x11d,0x159,0xbf)](),'')){const _0x24c110={};_0x24c110['role']=_0x1bd2c3[_0x3ec01e(0x1aa,0x13b,0x77,0x124)],_0x24c110[_0x3ec01e(0x10c,0x103,0x19e,0x16d)]=_0x3a5051['assistant'],_0x4d62f4[_0x5da88f(0xf,-0x8,-0xc3,-0x30)](_0x24c110);}});const _0x4caa56=mergeAdjacentMessages(_0x4d62f4),_0xc0ced=_0x1bd2c3[_0x3a7048(0x55d,0x590,0x5f0,0x57b)](processRollPlaceholders,_0x4caa56);return _0xc0ced;}const _0x422a31={};_0x422a31['image_gen']=_0x58b339(0x154,0x14c,0x11d,0x12e),_0x422a31[_0x58b339(0xa9,0xcd,0x6,0x19)+'n']=_0x5095f4(-0x13b,-0xbe,-0x161,-0x131),_0x422a31[_0x58b339(0x77,0x10e,-0x17,0x18)+'ay']='角色/服装展示',_0x422a31[_0x5095f4(-0xc0,-0x163,-0x177,-0x115)+'y']=_0x5095f4(-0x12b,-0xbf,-0x64,-0x163),_0x422a31['translatio'+'n']='翻译',_0x422a31[_0x5095f4(-0x1de,-0x17b,-0x12d,-0x14e)]=_0x5095f4(-0x134,-0x112,-0x18f,-0x10b);const REQUEST_TYPE_NAMES=_0x422a31;export async function executeTypedLLMRequest(_0x4b5a1c,_0x342f66,_0x34f024,_0xc92c92=null){const _0x1dd41c={'xucLG':function(_0x3cb3b8,_0x4db243){return _0x3cb3b8(_0x4db243);},'PGMmw':_0x5bec9d(0x2c8,0x2d9,0x2e6,0x21f)+_0x5bec9d(0x356,0x304,0x35d,0x399),'xxulC':'未收到有效回复。','GSTSP':function(_0x60a5a8,_0x502ea0){return _0x60a5a8===_0x502ea0;},'NcUOY':_0x5bec9d(0x312,0x2eb,0x363,0x3bb),'MedtG':_0x5bec9d(0x2e5,0x2ff,0x237,0x239)+_0x4b1e68(0x15a,0x24,0x87,0xbb)+_0x4b1e68(-0x7d,-0xc2,-0x82,-0x35),'YTgFq':_0x4b1e68(-0xb,0x6,0x82,0x53)+_0x4b1e68(0x44,0x31,0x14d,0xb0),'iNcUN':_0x5bec9d(0x293,0x215,0x1f8,0x252),'IHycp':'函数调用','jpiBD':function(_0x55d5b0,_0x81adcd){return _0x55d5b0+_0x81adcd;},'arMsX':_0x4b1e68(0xdc,0x11c,0x16c,0x109),'wmata':_0x5bec9d(0x3b0,0x3db,0x409,0x347)+'+$','eQBPa':'流式解析警告\x20(最后'+_0x5bec9d(0x3b5,0x30c,0x3a9,0x321),'NImkS':function(_0x5cbc82,_0x1827a8){return _0x5cbc82===_0x1827a8;},'ISjwo':function(_0x33388f){return _0x33388f();},'zSITM':_0x4b1e68(0x96,0xfd,0x8c,0x110),'RLJke':function(_0x561e6c,_0xd22348){return _0x561e6c+_0xd22348;},'ENaUd':_0x4b1e68(-0x49,0xd6,0x8c,0x38),'PvqTB':function(_0x311511,_0x339622){return _0x311511||_0x339622;},'NEJKA':'LLM请求已中断，开'+_0x4b1e68(0x133,0x13b,0x154,0x10a),'WHiEk':function(_0x4a2401,_0x4a968d){return _0x4a2401(_0x4a968d);},'vxQtj':function(_0x258365,_0x45d5b1){return _0x258365(_0x45d5b1);},'MGiRs':function(_0x4d2082,_0x4ca576){return _0x4d2082||_0x4ca576;},'KFnql':_0x5bec9d(0x2a4,0x2df,0x328,0x1fb)+_0x4b1e68(0xca,0xb6,0x19,0x6a),'ABCUc':function(_0x426518,_0x13ac0a){return _0x426518!==_0x13ac0a;},'zQJLX':_0x4b1e68(-0x6d,-0xb5,-0x55,-0x2c),'nWGQS':_0x4b1e68(0xca,0xe7,0xaa,0xe8),'cINXj':'EiGzG','yOITt':'zviJs','jekZG':function(_0x329ab3,_0x17a169){return _0x329ab3!==_0x17a169;},'mMDXc':_0x5bec9d(0x3d2,0x431,0x36a,0x421),'HvHeM':_0x5bec9d(0x3d0,0x355,0x394,0x460),'BRbnG':_0x5bec9d(0x299,0x31a,0x29c,0x209),'FmcsW':function(_0x378370,_0x5509a3){return _0x378370===_0x5509a3;},'TFuhS':_0x5bec9d(0x29c,0x1eb,0x29e,0x21a),'YOVog':_0x4b1e68(-0x68,0x79,-0x23,-0x2f),'uhgWS':'utf-8','kIvZH':_0x4b1e68(0xd7,0x15c,0x2f,0xad),'bNIjV':function(_0x461a02,_0x5e204e){return _0x461a02===_0x5e204e;},'HLEcL':_0x4b1e68(-0x2,-0x1d,0x62,0x62)+'E]','UImfp':'data:\x20','kARVP':'cZrud','zSAvD':_0x5bec9d(0x389,0x3ee,0x2fa,0x39a),'dEoXY':function(_0x5100d9,_0x4f5fe0){return _0x5100d9!==_0x4f5fe0;},'DSvUk':_0x4b1e68(0x68,0x8f,0x98,0xe7),'osnqM':'kNLMc','eHAig':_0x4b1e68(0xe1,0x9e,-0x35,0x54),'ttAMW':function(_0x90f9a7,_0x53ca49){return _0x90f9a7(_0x53ca49);},'TNCgW':function(_0x4a33b1,_0x1b650a){return _0x4a33b1!==_0x1b650a;},'ZItZA':'hKXrS','cOHHH':_0x5bec9d(0x397,0x345,0x2e8,0x32d),'ymjkm':function(_0x12dfa7,_0x3ed48c){return _0x12dfa7===_0x3ed48c;},'BKrqc':_0x5bec9d(0x280,0x230,0x30e,0x22e),'Sfyev':_0x4b1e68(0xbf,0xe1,0x121,0xe0),'rnxKi':'oHzQH','GbuAA':_0x4b1e68(-0x56,0x90,-0x97,0x12),'GNbKV':function(_0x124b1d,_0x2e0357){return _0x124b1d(_0x2e0357);},'buYYc':_0x5bec9d(0x2d7,0x23c,0x328,0x29e),'nwLHX':_0x4b1e68(0x8c,0x60,0x5d,0xe),'yAmES':function(_0x562c5d,_0x4899cf){return _0x562c5d===_0x4899cf;}},{prompt:_0x43f8cd,id:_0x1b0574}=_0x4b5a1c;if(_0x1dd41c[_0x5bec9d(0x365,0x3f5,0x2d4,0x3f5)](!_0x1b0574,!_0x43f8cd))return;currentLLMRequestController&&(currentLLMRequestController['abort'](),toastr['info'](_0x1dd41c['NEJKA']));currentLLMRequestController=new AbortController();const _0x34f2f4=currentLLMRequestController['signal'],_0x4d0457=currentLLMRequestController,_0x2571ca=REQUEST_TYPE_NAMES[_0x342f66]||_0x342f66,_0x539bc4={};function _0x5bec9d(_0x3d456,_0x28b23c,_0x2805a4,_0xe946c9){return _0x58b339(_0x3d456-0x237,_0x28b23c-0x83,_0x2805a4,_0xe946c9-0x7);}_0x539bc4[_0x4b1e68(0x105,0x2,0x131,0x9c)]=_0x4b1e68(0xa9,0xaa,0xb5,0x13)+_0x2571ca,_0x539bc4['type']=TaskType['LLM'],_0x539bc4[_0x4b1e68(0x59,0x12,0x11d,0x72)]=_0x1b0574;const _0x1e469b=taskQueue[_0x4b1e68(0x7f,-0x93,0x78,0x0)](_0x539bc4);llmTaskControllers[_0x5bec9d(0x2c4,0x318,0x229,0x25c)](_0x1e469b,currentLLMRequestController),taskQueue[_0x4b1e68(0x100,0x2c,0x6b,0xa3)+'us'](_0x1e469b,TaskStatus[_0x5bec9d(0x3c7,0x33f,0x3fc,0x35b)]),_0x1dd41c[_0x5bec9d(0x3b8,0x407,0x421,0x3c5)](startFabLoading);let _0x3d1f48=![];function _0x4b1e68(_0xa93a43,_0xd64de1,_0x131896,_0x1b5103){return _0x5095f4(_0x131896,_0x1b5103-0x1be,_0x131896-0x185,_0x1b5103-0xe0);}_0x1dd41c['ISjwo'](clearLog),addLog(_0x5bec9d(0x2f0,0x362,0x2da,0x30a)+'请求开始\x20('+_0x2571ca+_0x5bec9d(0x301,0x2b5,0x301,0x2b4)),addLog(_0x5bec9d(0x28b,0x237,0x20d,0x253)+_0x1b0574),_0x1dd41c[_0x4b1e68(0xa4,0x20,0x12,0xa9)](addLog,_0x5bec9d(0x2f3,0x399,0x2c3,0x338)+':'),_0x1dd41c['xucLG'](addLog,_0x1dd41c[_0x5bec9d(0x2b0,0x31d,0x2e4,0x20c)](formatPromptForDisplay,_0x43f8cd));const _0x1b0449=getEffectiveConfigForRequestType(_0x342f66),{api_url:_0x2b3f66,api_key:_0x5519f5,model:_0x32def3,temperature:_0x17ab0a,top_p:_0x28e4e3,max_tokens:_0x3b3ddd,stream:_0x8af4e9,bypass_proxy:_0x3b6792}=_0x1b0449;if(_0x1dd41c[_0x4b1e68(0x12a,0x4e,0xe7,0xed)](!_0x2b3f66,!_0x5519f5)||!_0x32def3){const _0x4ee3ef=_0x2571ca+(_0x5bec9d(0x2b8,0x2a2,0x360,0x28b)+_0x4b1e68(0xaa,0x24,0x11c,0x84)+_0x4b1e68(0xe3,0x128,0x6,0x79)+'置。');toastr[_0x5bec9d(0x339,0x338,0x3d2,0x36b)](_0x4ee3ef);const _0x45dd4a={};_0x45dd4a['success']=![],_0x45dd4a['result']=_0x4ee3ef,_0x45dd4a['id']=_0x1b0574,eventSource[_0x4b1e68(-0x28,0xef,-0x1,0x4b)](_0x34f024,_0x45dd4a);return;}const _0x492a14=_0x2b3f66[_0x5bec9d(0x36f,0x335,0x38d,0x40f)](/\/$/,'');let _0x2d0731,_0x2d3884,_0x19f9be;if(_0x3b6792){_0x2d0731=_0x492a14+(_0x4b1e68(0x5a,0xc3,0x68,0x7a)+_0x4b1e68(0x85,0x66,0x9e,0xfa));const _0x28ab12={};_0x28ab12[_0x5bec9d(0x2d5,0x33d,0x337,0x22a)+'pe']=_0x1dd41c[_0x5bec9d(0x2a3,0x262,0x248,0x2cc)],_0x28ab12[_0x4b1e68(0x106,0x12a,0x73,0xd1)+'ion']=_0x4b1e68(0x8e,0xc2,0x69,0x35)+_0x5519f5,_0x2d3884=_0x28ab12;const _0x39fd49={};_0x39fd49['model']=_0x32def3,_0x39fd49[_0x4b1e68(0x12a,0xf3,0x18,0xb6)]=_0x43f8cd,_0x39fd49[_0x4b1e68(-0x5d,-0xf,-0x3f,-0x23)+'e']=_0x17ab0a,_0x39fd49[_0x4b1e68(-0x19,-0xb,0x1,0x3c)]=_0x28e4e3,_0x39fd49[_0x4b1e68(0x22,-0x1a,0x9c,0x47)]=_0x3b3ddd,_0x39fd49[_0x5bec9d(0x292,0x1f5,0x33d,0x313)]=_0x8af4e9,_0x19f9be=_0x39fd49;}else{if(_0x1dd41c[_0x5bec9d(0x328,0x398,0x3a6,0x324)](_0x1dd41c['zQJLX'],_0x1dd41c[_0x4b1e68(0x128,0x3,0x2b,0x8e)]))_0x1dd41c['xucLG'](_0x57b196,_0x1dd41c[_0x5bec9d(0x314,0x338,0x373,0x27c)]);else{let _0x2d9c97=_0x492a14;!_0x2d9c97[_0x4b1e68(0x12c,0xae,0x14e,0xa0)](_0x1dd41c[_0x4b1e68(0x165,0x4d,0x24,0xc7)])&&!_0x2d9c97[_0x5bec9d(0x2e4,0x25a,0x283,0x35e)](_0x1dd41c['nWGQS'])&&(_0x2d9c97=_0x2d9c97+_0x4b1e68(0xc9,0x15b,0x11c,0x109));_0x2d9c97=_0x2d9c97[_0x5bec9d(0x36f,0x2cc,0x345,0x2d1)](/\/v1\/$/,_0x5bec9d(0x3d3,0x428,0x368,0x44f)),_0x2d0731=_0x5bec9d(0x39c,0x3ef,0x33f,0x32f)+_0x5bec9d(0x327,0x321,0x2ef,0x28c)+_0x4b1e68(0x155,0xbe,0x4b,0xd7)+_0x4b1e68(0x41,0xa2,-0x11,0x2f),_0x2d3884=_0x1dd41c[_0x4b1e68(-0x1c,-0x3c,-0x30,0x45)](getRequestHeaders,window[_0x5bec9d(0x3bc,0x443,0x3c1,0x3c0)]);const _0x4ca1ec={};_0x4ca1ec[_0x4b1e68(0x81,0xe3,0x91,0x10c)+'etion_sour'+'ce']=_0x1dd41c[_0x4b1e68(0xa7,-0x90,0xcf,0x21)],_0x4ca1ec[_0x4b1e68(-0x4,-0x36,0x69,0x3f)]=_0x2d9c97,_0x4ca1ec[_0x4b1e68(-0x1d,-0xf7,-0x4f,-0x48)+_0x5bec9d(0x283,0x206,0x26d,0x216)+'rs']=_0x4b1e68(0x5d,0x53,0x78,0xd1)+'ion:\x20\x22Bear'+_0x5bec9d(0x300,0x32d,0x27c,0x313)+_0x5519f5+'\x22',_0x4ca1ec[_0x4b1e68(0x16,0x60,-0x76,-0x2d)]=_0x32def3,_0x4ca1ec['messages']=_0x43f8cd,_0x4ca1ec['temperatur'+'e']=_0x17ab0a,_0x4ca1ec[_0x5bec9d(0x306,0x3b1,0x386,0x2e3)]=_0x28e4e3,_0x4ca1ec[_0x5bec9d(0x311,0x391,0x3c1,0x2dd)]=_0x3b3ddd,_0x4ca1ec[_0x5bec9d(0x292,0x2da,0x235,0x21d)]=_0x8af4e9,_0x19f9be=_0x4ca1ec;}}_0xc92c92&&_0xc92c92(_0x5bec9d(0x36e,0x3b3,0x311,0x321)+_0x2571ca+'\x20请求，请稍候...');try{if(_0x1dd41c[_0x4b1e68(0xb1,-0x1b,-0x35,0x5e)](_0x1dd41c[_0x5bec9d(0x2fa,0x289,0x374,0x2ab)],_0x1dd41c['yOITt'])){const _0x45150a=await fetch(_0x2d0731,{'method':'POST','headers':_0x2d3884,'body':JSON['stringify'](_0x19f9be),'signal':_0x34f2f4});if(!_0x45150a['ok']){try{if(_0x1dd41c[_0x4b1e68(0x84,0x64,0xa7,0x4e)](_0x1dd41c[_0x5bec9d(0x2e3,0x366,0x349,0x26a)],_0x1dd41c[_0x4b1e68(-0x1a,0x1a,-0x99,0x19)]))_0x395ec6=_0x1dd41c[_0x4b1e68(0xfb,-0x28,-0x26,0x56)],_0x11c9d7['warning'](_0x276420+(_0x5bec9d(0x3a5,0x356,0x321,0x3b5)+'为空，可能是请求被截'+_0x4b1e68(0x6e,-0x4e,0x82,0x4)+'ns\x20设置过小、或\x20'+_0x4b1e68(0x101,0x77,-0x34,0x50)));else{const _0x4512cd=await _0x45150a[_0x5bec9d(0x353,0x3fe,0x30c,0x31d)]();if(_0x4512cd[_0x5bec9d(0x339,0x2f8,0x320,0x3b2)]){let _0x2bb852;if(_0x1dd41c[_0x4b1e68(0x2d,0x109,0x79,0xce)](typeof _0x4512cd[_0x4b1e68(-0x2b,0xd2,0xd7,0x6f)],_0x5bec9d(0x280,0x20f,0x1f8,0x23c))&&_0x4512cd[_0x4b1e68(0xf3,0x81,0x51,0x6f)][_0x4b1e68(-0xc,0xc5,0xc0,0x40)]){_0x2bb852=''+_0x4512cd['error'][_0x5bec9d(0x30a,0x3b3,0x283,0x2ec)];const _0x1e2f9d=[];if(_0x4512cd['error'][_0x4b1e68(0x4d,-0x4f,-0x81,0x2d)])_0x1e2f9d[_0x4b1e68(-0x47,-0x92,-0x14,-0x3d)]('类型:\x20'+_0x4512cd[_0x4b1e68(0x66,0xa9,-0x2f,0x6f)][_0x5bec9d(0x2f7,0x2e2,0x389,0x35d)]);if(_0x4512cd[_0x5bec9d(0x339,0x331,0x2ae,0x2d5)]['code'])_0x1e2f9d['push']('代码:\x20'+_0x4512cd[_0x4b1e68(0x50,0x2e,0xa7,0x6f)][_0x5bec9d(0x278,0x266,0x22f,0x30c)]);_0x1e2f9d['length']>0x22+0xc3f*0x2+0x4*-0x628&&(_0x2bb852+='\x20('+_0x1e2f9d[_0x5bec9d(0x35d,0x3d8,0x2b5,0x3e6)](',\x20')+')');}else _0x2bb852=''+JSON[_0x5bec9d(0x345,0x339,0x29e,0x2bf)](_0x4512cd[_0x5bec9d(0x339,0x2fa,0x2d9,0x392)]);throw new Error(_0x2bb852);}}}catch(_0x3be2c8){if(_0x3be2c8['message'][_0x4b1e68(0x27,0x15,-0x74,0x1a)](_0x1dd41c[_0x5bec9d(0x355,0x3c8,0x39e,0x34b)])||_0x3be2c8[_0x5bec9d(0x30a,0x390,0x34e,0x29a)][_0x4b1e68(0x71,-0x64,0x65,0x1a)](_0x1dd41c[_0x5bec9d(0x394,0x427,0x3ce,0x3ea)])){if(_0x1dd41c[_0x5bec9d(0x2ee,0x390,0x2d5,0x286)](_0x1dd41c[_0x4b1e68(-0x51,0x21,0x7a,0x61)],_0x1dd41c[_0x4b1e68(0x115,-0x6,0x17,0x75)]))_0x2b97bc+=_0x9193d,_0x2948c3&&_0x1dd41c[_0x5bec9d(0x30f,0x32a,0x2c9,0x36b)](_0x3d8a18,_0x46526a);else throw _0x3be2c8;}}throw new Error('请求失败:\x20'+_0x45150a[_0x4b1e68(0x6c,0x167,0xed,0x107)]+'\x20'+_0x45150a['statusText']);}let _0x3fe143='';if(_0x8af4e9){const _0xaf7317=_0x45150a[_0x4b1e68(0x140,0x29,0x31,0xc8)][_0x5bec9d(0x2bf,0x2ba,0x2b7,0x2cc)](),_0x47c3b8=new TextDecoder(_0x1dd41c['uhgWS']);let _0x228bc0='';while(!![]){if(_0x1dd41c[_0x4b1e68(0x3a,0x6c,0x13e,0xe5)]===_0x1dd41c[_0x5bec9d(0x3af,0x443,0x35e,0x318)]){const {done:_0x4f596b,value:_0x21d92c}=await _0xaf7317['read']();if(_0x4f596b)break;const _0xbc64ae={};_0xbc64ae['stream']=!![],_0x228bc0+=_0x47c3b8['decode'](_0x21d92c,_0xbc64ae);const _0x47c8ce=_0x228bc0[_0x4b1e68(0xa3,0x5f,-0x7e,0x7)]('\x0a');_0x228bc0=_0x47c8ce[_0x4b1e68(0xd0,-0x4,-0x19,0x59)]()||'';for(const _0x4a8a2d of _0x47c8ce){const _0x497e7d=_0x4a8a2d[_0x5bec9d(0x37c,0x2e3,0x355,0x3ab)]();if(!_0x497e7d||_0x1dd41c[_0x4b1e68(0xb4,0x140,0x121,0xf9)](_0x497e7d,_0x1dd41c['HLEcL']))continue;if(_0x497e7d['startsWith'](_0x1dd41c['UImfp']))try{if(_0x1dd41c[_0x4b1e68(0x4,0x4c,0x23,0x5e)](_0x1dd41c[_0x4b1e68(-0x15,0x1,0x5f,0x46)],_0x1dd41c[_0x4b1e68(0xd1,0xf3,0x21,0x46)])){if(_0x1dd41c[_0x4b1e68(0xb2,-0x6d,0x8d,0xa)](_0xe23c30[_0x5bec9d(0x366,0x369,0x32e,0x301)],_0x1dd41c[_0x5bec9d(0x3c1,0x3ce,0x3a2,0x312)])){const _0x559bb1=('0|1|3|5|2|'+'4')[_0x4b1e68(0x1a,-0x7d,-0x3e,0x7)]('|');let _0x27ddc2=-0x25c*-0x2+-0xd9a+0x8e2;while(!![]){switch(_0x559bb1[_0x27ddc2++]){case'0':_0x232456=!![];continue;case'1':_0x2efae0['log'](_0x1dd41c['MedtG']);continue;case'2':const _0x46c985={};_0x46c985['name']=_0x1dd41c[_0x5bec9d(0x3c1,0x364,0x426,0x36f)],_0x46c985['message']=_0x1dd41c[_0x5bec9d(0x2a9,0x24e,0x28d,0x26f)];const _0x565cb3={};_0x565cb3[_0x5bec9d(0x296,0x2af,0x2be,0x266)]=![],_0x565cb3[_0x4b1e68(-0x17,0x6c,0x5a,0x91)]=null,_0x565cb3['id']=_0x227aac,_0x565cb3[_0x5bec9d(0x339,0x3a0,0x2d5,0x2a7)]=_0x46c985,_0x574e6b[_0x5bec9d(0x315,0x355,0x2f5,0x2f2)](_0x241ab0['LLM_EXECUT'+'E_RESPONSE'],_0x565cb3);continue;case'3':_0x1bce8a[_0x4b1e68(0x38,0xcb,0x39,0xa3)+'us'](_0x64f09b,_0x4b813e[_0x5bec9d(0x378,0x36b,0x400,0x3f1)]);continue;case'4':return;case'5':_0x1abb3e['delete'](_0x240c46);continue;}break;}}_0x3fd691[_0x5bec9d(0x339,0x292,0x3a2,0x346)](_0x5bec9d(0x31f,0x26e,0x394,0x35c)+_0x4b1e68(0x52,0x33,-0xe6,-0x44),_0x14355d);const _0x5490ea=_0x4b1e68(-0x36,0x5a,-0x76,-0x1e)+_0x41ac25['message'];_0x53c8b7&&_0x109f31(_0x5490ea);_0x5c6637[_0x5bec9d(0x339,0x3da,0x3d0,0x2da)](_0x59cfdc[_0x5bec9d(0x30a,0x2d1,0x308,0x31d)]),_0x13713f[_0x5bec9d(0x2e7,0x37d,0x23b,0x33d)+'sk'](_0x2a5fee,![]),_0x301fb2['delete'](_0x274659);const _0xd46c2d={};_0xd46c2d[_0x4b1e68(0x66,-0xcc,0x7e,-0x34)]=![],_0xd46c2d[_0x4b1e68(0x76,0x2f,0x23,0x91)]=_0x5490ea,_0xd46c2d['id']=_0x4145ae,_0x5bfb87['emit'](_0xc1bf12['LLM_EXECUT'+_0x4b1e68(-0x5c,-0x31,0x5b,-0x16)],_0xd46c2d);}else{const _0x427d07=_0x497e7d['slice'](-0x6*0x446+-0xb8b+-0x19*-0x17d),_0x221eb8=JSON['parse'](_0x427d07),_0x395ffc=_0x221eb8[_0x4b1e68(0x58,0xa3,0x46,0x27)]?.[0x261e+-0x8d+-0x1*0x2591]?.['delta']?.['content'];if(_0x395ffc){if(_0x1dd41c[_0x4b1e68(0xd8,0x55,0x30,0x5e)](_0x1dd41c[_0x5bec9d(0x2c2,0x353,0x308,0x2f0)],_0x4b1e68(0x7c,0xb8,0xae,0xbe)))_0x3fe143+=_0x395ffc,_0xc92c92&&_0x1dd41c[_0x5bec9d(0x30f,0x305,0x36d,0x277)](_0xc92c92,_0x3fe143);else{const _0x41e7d7={};_0x41e7d7[_0x4b1e68(0x111,0x6,0x26,0x7e)]=_0x1dd41c['iNcUN'],_0x41e7d7[_0x5bec9d(0x342,0x2f1,0x310,0x2c0)]='用户',_0x41e7d7[_0x4b1e68(0x47,-0x33,0xbd,0x32)]=_0x5bec9d(0x308,0x36c,0x2df,0x2b3),_0x41e7d7[_0x4b1e68(0x28,0x68,0x33,0xd8)]=_0x1dd41c[_0x5bec9d(0x31c,0x2d4,0x2b3,0x2c0)],_0x41e7d7[_0x5bec9d(0x28a,0x26b,0x333,0x31a)]='工具';const _0x504ec=_0x41e7d7;return _0x504ec[_0x3aff64]||_0x2b4aab;}}}}catch(_0xcf0119){console[_0x4b1e68(0x120,0x137,0xcc,0x104)](_0x5bec9d(0x3a7,0x349,0x418,0x425),_0xcf0119[_0x4b1e68(-0x54,0x4d,-0x64,0x40)]);}}}else _0x56ecb9=_0x1dd41c[_0x4b1e68(0x19,-0x5,0x10f,0x63)](_0xd74212,_0x1dd41c[_0x4b1e68(0x63,0x6f,0xf2,0xc7)]);}if(_0x228bc0['trim']()&&_0x1dd41c[_0x4b1e68(0x110,0x12b,0xbd,0xde)](_0x228bc0[_0x4b1e68(0xfb,0x129,0x147,0xb2)](),_0x1dd41c['HLEcL'])&&_0x228bc0[_0x4b1e68(0x14,0x67,0x89,0xb2)]()['startsWith']('data:\x20'))try{if(_0x1dd41c[_0x5bec9d(0x328,0x324,0x3b6,0x29e)](_0x1dd41c[_0x4b1e68(0x145,0x8c,0x12a,0x97)],_0x4b1e68(0x40,0x7f,0x115,0xe7)))_0x17d365+='\x20('+_0x3b9a71['join'](',\x20')+')';else{const _0xa9387f=_0x228bc0[_0x5bec9d(0x37c,0x2f1,0x41c,0x376)]()[_0x5bec9d(0x335,0x286,0x334,0x399)](0x18e0+-0x16a5+-0x235),_0x50b8e5=JSON[_0x5bec9d(0x329,0x2ec,0x37a,0x293)](_0xa9387f),_0x30fd5e=_0x50b8e5[_0x4b1e68(-0x16,0x1d,-0x4c,0x27)]?.[0x1*-0xdd7+-0x46c+0x1243]?.[_0x4b1e68(0xe,0xc1,-0x3f,0x4d)]?.['content'];_0x30fd5e&&(_0x3fe143+=_0x30fd5e,_0xc92c92&&(_0x1dd41c['osnqM']===_0x1dd41c['eHAig']?_0x2ee816['push'](_0x52700e[_0x4b1e68(0x6c,0x155,0xa1,0xcc)]||''):_0x1dd41c[_0x5bec9d(0x382,0x3b2,0x32b,0x2f4)](_0xc92c92,_0x3fe143)));}}catch(_0x13160a){if(_0x1dd41c['TNCgW'](_0x5bec9d(0x37f,0x36b,0x405,0x2d1),_0x5bec9d(0x37f,0x30e,0x2de,0x418)))return _0x3738f7[_0x4b1e68(0xb,0xf3,0x4d,0xbc)]()[_0x5bec9d(0x349,0x362,0x36f,0x2c3)](_0x5bec9d(0x3b0,0x422,0x3e8,0x433)+'+$')[_0x4b1e68(0xb1,0x30,0x7c,0xbc)]()[_0x4b1e68(-0x24,-0x89,-0x44,-0x14)+'r'](_0x166062)[_0x4b1e68(0x110,-0x12,0x8e,0x7f)](LoqRgx[_0x5bec9d(0x357,0x352,0x324,0x37b)]);else console[_0x4b1e68(0xb4,0xd9,0x145,0x104)](_0x1dd41c[_0x5bec9d(0x2a2,0x344,0x2fb,0x235)],_0x13160a[_0x5bec9d(0x30a,0x27d,0x2a0,0x27e)]);}!_0x3fe143&&(_0x1dd41c[_0x5bec9d(0x328,0x2d6,0x366,0x313)]('hKXrS',_0x1dd41c['ZItZA'])?_0x3a6d5b[_0x4b1e68(0xa2,0x10e,0x157,0x104)](_0x1dd41c[_0x4b1e68(0x48,0x61,-0x1d,-0x28)],_0x5a2974[_0x5bec9d(0x30a,0x370,0x2f5,0x328)]):(_0x3fe143=_0x1dd41c[_0x5bec9d(0x320,0x336,0x31c,0x2a7)],toastr[_0x4b1e68(0x5a,0x41,-0xd,-0x1f)](_0x2571ca+(_0x4b1e68(0xf5,0xd4,0x15d,0xdb)+_0x5bec9d(0x281,0x30d,0x217,0x2b4)+_0x4b1e68(-0x5c,-0xf,-0x88,0x4)+'ns\x20设置过小、或\x20'+'API\x20连接问题。'))));}else{if(_0x1dd41c[_0x4b1e68(0xe9,0x2d,-0x4f,0x5a)]===_0x4b1e68(0x4f,0x179,0xe2,0xe1))_0x1dd41c[_0x5bec9d(0x2d4,0x2cf,0x32d,0x2ff)](_0xe0838c,_0x2c8f6e)&&(_0x5434b8=null),(!_0xf18a7f||_0x1dd41c['NImkS'](_0x227ee2,null))&&_0x1dd41c[_0x4b1e68(0xc0,0x123,0x5e,0xee)](_0x42ee19);else{const _0x497133=await _0x45150a['json']();if(_0x497133[_0x4b1e68(0x113,0xc8,0x88,0x6f)]){let _0x20beb3;if(_0x1dd41c[_0x4b1e68(0x2b,-0x64,-0x51,0x23)](typeof _0x497133['error'],_0x1dd41c[_0x4b1e68(-0x24,0xa6,0x6,0x80)])&&_0x497133[_0x4b1e68(0x81,0x8b,0x28,0x6f)]['message']){if(_0x1dd41c['NImkS'](_0x1dd41c[_0x4b1e68(-0x8c,0x4b,0xbc,0x20)],'MUpCj')){_0x20beb3=''+_0x497133[_0x5bec9d(0x339,0x3a0,0x28d,0x3c2)][_0x4b1e68(-0x41,-0x6,0x4,0x40)];const _0x11d973=[];if(_0x497133[_0x5bec9d(0x339,0x299,0x291,0x2ee)][_0x4b1e68(-0x67,0x59,0x4d,0x2d)])_0x11d973[_0x5bec9d(0x28d,0x328,0x304,0x29a)](_0x5bec9d(0x2c3,0x2d5,0x247,0x21f)+_0x497133[_0x4b1e68(0xf,0xe6,0x23,0x6f)][_0x4b1e68(0x44,0x2f,-0x56,0x2d)]);if(_0x497133[_0x5bec9d(0x339,0x30c,0x293,0x381)]['code'])_0x11d973['push'](_0x5bec9d(0x35c,0x33a,0x329,0x3a2)+_0x497133[_0x5bec9d(0x339,0x29c,0x296,0x3da)][_0x4b1e68(-0xbe,0x33,-0x1a,-0x52)]);_0x11d973[_0x4b1e68(0xe3,0x51,0x3e,0x65)]>-0x1*0x1471+-0x1517+0x2988&&(_0x20beb3+='\x20('+_0x11d973[_0x5bec9d(0x35d,0x3d9,0x359,0x396)](',\x20')+')');}else{const _0x3be7c9=_0x48305c[_0x4b1e68(0xfd,0x68,0xa8,0xc3)](_0x54a97d);_0x3be7c9&&(_0x3be7c9[_0x5bec9d(0x33e,0x363,0x2d5,0x37f)](),_0x348dc2[_0x4b1e68(0x81,-0x33,-0x39,-0x29)](_0x4d2035),_0x3b74c9[_0x5bec9d(0x2c1,0x29b,0x243,0x252)](_0x5bec9d(0x367,0x37f,0x391,0x2f0)+_0x4b1e68(0x71,0x1,-0xb0,-0x25)+_0x21643));}}else{if(_0x1dd41c[_0x5bec9d(0x2ed,0x365,0x2ea,0x24e)](_0x5bec9d(0x27a,0x270,0x305,0x26d),'yIdxo')){const _0x28e2ba=_0x4e0ea5[_0x4b1e68(0x51,0xec,0xfc,0x6b)](-0x699+-0xf23+0x15c2),_0x533f02=_0x1ab005[_0x5bec9d(0x329,0x27f,0x284,0x2c6)](_0x28e2ba),_0x10dc00=_0x533f02['choices']?.[0x86*0x17+-0x22f1+0x16e7]?.[_0x4b1e68(0x72,-0x5a,0x52,0x4d)]?.['content'];_0x10dc00&&(_0x519fa7+=_0x10dc00,_0x107e54&&_0x1dd41c[_0x4b1e68(0x7f,0xf7,0xd2,0x45)](_0x15dc11,_0x46fd2f));}else _0x20beb3=''+JSON[_0x4b1e68(0x3c,0x83,-0x1b,0x7b)](_0x497133[_0x4b1e68(-0x23,0xf9,0xf6,0x6f)]);}throw new Error(_0x20beb3);}_0x3fe143=_0x497133['choices']?.[-0x2*-0x1af+-0x1df9+0x1a9b]?.[_0x4b1e68(0x3d,0x7d,0x4a,0x40)]?.[_0x5bec9d(0x331,0x347,0x300,0x386)]||'';if(!_0x3fe143){if(_0x1dd41c[_0x5bec9d(0x2ee,0x317,0x393,0x393)](_0x1dd41c[_0x5bec9d(0x2a8,0x1fc,0x2b0,0x1fc)],_0x1dd41c[_0x4b1e68(0x146,0x115,0x30,0xb4)])){const _0x1f8f50=_0x4b1e68(0xa,0x1b,-0x7b,-0x46)[_0x5bec9d(0x2d1,0x2ed,0x240,0x2e0)]('|');let _0x51fbb9=0x1358+-0xa16*-0x2+-0x12*0x232;while(!![]){switch(_0x1f8f50[_0x51fbb9++]){case'0':_0x386fa1['updateStat'+'us'](_0x52baa1,_0x37997f[_0x4b1e68(0xe1,0x4a,-0x3,0xae)]);continue;case'1':const _0x504a5f={};_0x504a5f[_0x5bec9d(0x366,0x3a1,0x3cc,0x3c3)]=_0x1dd41c['NcUOY'],_0x504a5f[_0x5bec9d(0x30a,0x336,0x28c,0x2c3)]=_0x1dd41c[_0x5bec9d(0x2a9,0x2e9,0x309,0x1fc)];const _0x499f40={};_0x499f40['success']=![],_0x499f40[_0x4b1e68(0x124,0x12f,0xeb,0x91)]=null,_0x499f40['id']=_0x23d963,_0x499f40[_0x4b1e68(0x115,-0x1f,0xf7,0x6f)]=_0x504a5f,_0x3206d9[_0x4b1e68(-0x1a,0xe5,-0x4d,0x4b)](_0x5b25f9,_0x499f40);continue;case'2':_0x3bf845=!![];continue;case'3':_0x4fe3c1['delete'](_0x3cec5c);continue;case'4':return;}break;}}else _0x3fe143=_0x1dd41c[_0x5bec9d(0x320,0x2d1,0x3b1,0x2f9)],toastr['warning'](_0x2571ca+(':\x20LLM\x20请求返回'+_0x5bec9d(0x281,0x25a,0x2ea,0x263)+'断、max_toke'+_0x4b1e68(0xa0,0xbc,0x97,0xec)+_0x4b1e68(0x95,0xaf,0xae,0x50)));}_0xc92c92&&_0x1dd41c[_0x4b1e68(-0x1c,0x46,0x63,0x45)](_0xc92c92,_0x3fe143);}}_0x1dd41c['GNbKV'](addLog,_0x4b1e68(0xdc,0xc3,0x11d,0xd0)+_0x5bec9d(0x2af,0x2ac,0x2b7,0x2f7)),addLog(_0x3fe143),_0x1dd41c[_0x4b1e68(0xd3,0xc4,0x135,0xb8)](addLog,_0x4b1e68(0xcb,-0x3,-0x2,0x26)+_0x5bec9d(0x2b1,0x2a2,0x33b,0x21f)),taskQueue[_0x5bec9d(0x2e7,0x2c4,0x2b0,0x368)+'sk'](_0x1e469b,!![]),llmTaskControllers['delete'](_0x1e469b);const _0x1d3260={};_0x1d3260[_0x4b1e68(-0xcd,0x64,-0xc8,-0x34)]=!![],_0x1d3260[_0x5bec9d(0x35b,0x35e,0x2da,0x2ab)]=_0x3fe143,_0x1d3260['id']=_0x1b0574,_0x1d3260[_0x5bec9d(0x352,0x3b1,0x3ec,0x35a)]=![],eventSource[_0x4b1e68(0xf2,0xd8,0xc0,0x4b)](_0x34f024,_0x1d3260);}else _0x51ab51[_0x5bec9d(0x33e,0x32f,0x3a6,0x3db)](),_0x8d759e['info'](_0x1dd41c['zSITM']);}catch(_0xfc4d6b){if(_0x1dd41c[_0x5bec9d(0x3ad,0x3a1,0x319,0x3e9)]===_0x1dd41c['buYYc']){if(_0x1dd41c[_0x5bec9d(0x398,0x352,0x3f9,0x31a)](_0xfc4d6b['name'],_0x1dd41c['NcUOY'])){const _0x12398e=_0x4b1e68(-0x51,-0x5a,0x8c,0x51)[_0x5bec9d(0x2d1,0x32f,0x253,0x2ba)]('|');let _0xa40ee6=-0x1fe4+0x173f*-0x1+0x3723;while(!![]){switch(_0x12398e[_0xa40ee6++]){case'0':_0x3d1f48=!![];continue;case'1':return;case'2':const _0x20fc88={};_0x20fc88['name']=_0x1dd41c[_0x4b1e68(0xd1,0x189,0x110,0xf7)],_0x20fc88['message']=_0x1dd41c[_0x4b1e68(-0xba,-0x3a,-0x7a,-0x21)];const _0x42c8ad={};_0x42c8ad[_0x4b1e68(0x36,-0xb2,0x30,-0x34)]=![],_0x42c8ad['result']=null,_0x42c8ad['id']=_0x1b0574,_0x42c8ad[_0x4b1e68(0xe7,0x49,0x70,0x6f)]=_0x20fc88,eventSource['emit'](_0x34f024,_0x42c8ad);continue;case'3':taskQueue['updateStat'+'us'](_0x1e469b,TaskStatus[_0x4b1e68(0x1,0x144,0x7,0xae)]);continue;case'4':llmTaskControllers[_0x4b1e68(0x5d,-0x63,0x34,-0x29)](_0x1e469b);continue;}break;}}console['error'](_0x2571ca+_0x4b1e68(0x4b,-0x54,-0xf,0x4f),_0xfc4d6b);const _0x3d0074=_0x4b1e68(-0x54,-0x45,-0x9b,-0x1e)+_0xfc4d6b[_0x4b1e68(-0x19,-0x2,-0x5b,0x40)];_0xc92c92&&_0xc92c92(_0x3d0074);toastr[_0x4b1e68(0x37,0xe8,0x13,0x6f)](_0xfc4d6b['message']),taskQueue[_0x4b1e68(-0x2a,-0x47,0x4c,0x1d)+'sk'](_0x1e469b,![]),llmTaskControllers[_0x4b1e68(-0x74,-0x13,0x37,-0x29)](_0x1e469b);const _0x5628b0={};_0x5628b0[_0x4b1e68(-0xa0,0x47,-0x6f,-0x34)]=![],_0x5628b0[_0x4b1e68(0x38,0x11a,0x78,0x91)]=_0x3d0074,_0x5628b0['id']=_0x1b0574,eventSource[_0x4b1e68(0x47,0xd5,0xa4,0x4b)](_0x34f024,_0x5628b0);}else{let _0x5f55e9=_0x2f6c9b;!_0x5f55e9[_0x4b1e68(0x44,0x41,0x14a,0xa0)](_0x1dd41c[_0x5bec9d(0x391,0x314,0x3c3,0x40c)])&&!_0x5f55e9[_0x5bec9d(0x2e4,0x2b1,0x2ea,0x248)](_0x4b1e68(0xbd,0x157,0x125,0xe8))&&(_0x5f55e9=_0x1dd41c['RLJke'](_0x5f55e9,_0x5bec9d(0x3d3,0x3c4,0x33e,0x327)));_0x5f55e9=_0x5f55e9[_0x4b1e68(0x10d,0x9f,0xb9,0xa5)](/\/v1\/$/,_0x5bec9d(0x3d3,0x42e,0x3fb,0x449)),_0xa82147='/api/backe'+_0x5bec9d(0x327,0x349,0x307,0x361)+_0x4b1e68(0xd7,0x69,0x17d,0xd7)+_0x5bec9d(0x2f9,0x2d8,0x248,0x39e),_0x263ee5=_0x1dd41c[_0x5bec9d(0x30f,0x332,0x2ef,0x36f)](_0x2a2f45,_0x2d8c82[_0x4b1e68(0x13c,0x69,0xcc,0xf2)]);const _0xab8b67={};_0xab8b67[_0x4b1e68(0xbd,0x152,0x15a,0x10c)+'etion_sour'+'ce']=_0x1dd41c[_0x5bec9d(0x2eb,0x344,0x26f,0x397)],_0xab8b67[_0x5bec9d(0x309,0x270,0x2d6,0x384)]=_0x5f55e9,_0xab8b67[_0x4b1e68(-0xc1,-0xdd,-0xd0,-0x48)+_0x5bec9d(0x283,0x1e6,0x1dd,0x23a)+'rs']=_0x5bec9d(0x39b,0x31f,0x37b,0x435)+_0x4b1e68(0x41,-0xce,0x78,-0x39)+_0x4b1e68(-0x6c,0xe1,-0x14,0x36)+_0x9e7606+'\x22',_0xab8b67['model']=_0x30a6f7,_0xab8b67[_0x4b1e68(0xb4,0x5c,0x26,0xb6)]=_0x501347,_0xab8b67[_0x4b1e68(-0x4e,-0xb0,-0xa4,-0x23)+'e']=_0x5cec90,_0xab8b67[_0x4b1e68(-0x4e,0xb1,0x4e,0x3c)]=_0x4dffdd,_0xab8b67[_0x5bec9d(0x311,0x379,0x291,0x283)]=_0x7dcb43,_0xab8b67[_0x5bec9d(0x292,0x25d,0x29c,0x1ef)]=_0x1bcb0a,_0x6e9b48=_0xab8b67;}}finally{_0x1dd41c[_0x4b1e68(0xf9,0x77,0x95,0x71)]===_0x1dd41c[_0x4b1e68(0x117,0x64,0xca,0x71)]?(_0x1dd41c[_0x4b1e68(0xe,-0x25,0x7,-0x4e)](currentLLMRequestController,_0x4d0457)&&(currentLLMRequestController=null),(!_0x3d1f48||_0x1dd41c[_0x5bec9d(0x3c3,0x364,0x45e,0x38b)](currentLLMRequestController,null))&&stopFabLoading()):_0x45e6af=''+_0x1b3aee[_0x4b1e68(0x5b,0xe3,-0x12,0x7b)](_0x322fb4[_0x5bec9d(0x339,0x30a,0x2a7,0x3bf)]);}}export async function executeDefaultLLMRequest(_0x2ab916,_0x554394,_0x215a21=null){const _0xfb3b9e={'ZQpWY':function(_0x49a967,_0x49d07f){return _0x49a967!==_0x49d07f;},'QmEui':'user','AjVBa':'assistant','ohhNf':function(_0x37f3db,_0x3df8e4){return _0x37f3db>_0x3df8e4;},'sHgxS':function(_0x15196e,_0x1f7415){return _0x15196e(_0x1f7415);},'mfGDP':function(_0x2369fb,_0x59cf39){return _0x2369fb>_0x59cf39;},'BXCoJ':_0x41f489(0x497,0x4db,0x466,0x4b9),'TOTao':function(_0x4ecff2,_0x1dc652){return _0x4ecff2(_0x1dc652);},'fPCbH':function(_0x38bb5e,_0x40e82a){return _0x38bb5e||_0x40e82a;},'pddWr':_0x41f489(0x4aa,0x42f,0x4cc,0x494),'XbQcm':function(_0x5ab449){return _0x5ab449();},'hxfrl':function(_0x31dc24,_0x417ba5){return _0x31dc24(_0x417ba5);},'tSUXz':function(_0x3e64c3,_0x422761){return _0x3e64c3(_0x422761);},'gXTiK':function(_0x48ea32,_0x4d1dca){return _0x48ea32(_0x4d1dca);},'vzYRO':function(_0x503c9d,_0x41343c){return _0x503c9d||_0x41343c;},'RdRkF':_0x52b019(0x28d,0x2d3,0x2de,0x380)+_0x52b019(0x3af,0x2fb,0x301,0x2d5)+_0x52b019(0x211,0x28f,0x24b,0x2d2),'UCiRG':_0x41f489(0x49c,0x47e,0x48e,0x509)+_0x52b019(0x28f,0x275,0x2b8,0x2a3),'SrFpB':function(_0x2e5461,_0xf625e5){return _0x2e5461??_0xf625e5;},'jWXkS':_0x52b019(0x3b2,0x2b3,0x31d,0x35e),'WrHPC':_0x41f489(0x5cb,0x54d,0x662,0x67c),'NoMWe':'/v1/','KtVLD':function(_0x233d40,_0x54ae3d){return _0x233d40+_0x54ae3d;},'FEwQr':_0x52b019(0x2fb,0x2a0,0x320,0x300)+_0x52b019(0x320,0x286,0x2ab,0x338)+'ompletions'+_0x41f489(0x4f1,0x47e,0x4b9,0x545),'iXaNL':function(_0x430d58,_0x39420c){return _0x430d58(_0x39420c);},'QybZi':_0x52b019(0x238,0x1ef,0x286,0x237),'qaiHB':function(_0x346b5d,_0x5b0c4f){return _0x346b5d(_0x5b0c4f);},'asEQT':_0x52b019(0x1f8,0x1c6,0x24c,0x236)+_0x52b019(0x2b9,0x228,0x2da,0x23c),'oAscv':function(_0x29eb8e,_0x571cb2){return _0x29eb8e!==_0x571cb2;},'WtMRO':'gOWsF','zcUbI':function(_0x2f3cf8,_0x25fa7c,_0x243d3a){return _0x2f3cf8(_0x25fa7c,_0x243d3a);},'tbkxv':_0x41f489(0x49e,0x411,0x550,0x474),'dpmux':_0x52b019(0x2b0,0x1e4,0x201,0x283),'QYouj':function(_0x201ecd,_0xd64c53){return _0x201ecd===_0xd64c53;},'ICYhB':_0x52b019(0x25c,0x230,0x204,0x28f),'oGNxh':_0x41f489(0x51e,0x5c6,0x58b,0x4b9),'jhhMk':_0x52b019(0x37d,0x326,0x35b,0x2b0)+_0x52b019(0x259,0x243,0x23e,0x288)+_0x52b019(0x28d,0x2cc,0x295,0x217)+_0x52b019(0x2de,0x28e,0x2d4,0x366)+'I\x20连接问题。','TgsMu':function(_0x596ed2,_0x4269fd){return _0x596ed2(_0x4269fd);},'QGBis':function(_0x4e026c,_0x1e8c72){return _0x4e026c(_0x1e8c72);},'CbRvI':_0x52b019(0x24d,0x2d4,0x2bc,0x290),'FkmBt':_0x52b019(0x1ee,0x285,0x296,0x2e2),'oomfm':'2|4|3|1|5|'+'0','zBSqO':_0x41f489(0x4dd,0x56a,0x4ed,0x448)+_0x41f489(0x57d,0x61c,0x55c,0x5ad)+_0x52b019(0x2a9,0x18d,0x219,0x1af),'vMyBu':_0x41f489(0x517,0x554,0x4d8,0x51c)+'e\x20Error:','bfhWc':function(_0x1c325f,_0x442976){return _0x1c325f===_0x442976;},'jJEAo':_0x52b019(0x2e4,0x28e,0x278,0x2bb),'McOSz':function(_0x5d6808,_0x106221){return _0x5d6808===_0x106221;},'fAYah':function(_0x335eee,_0x89cb93){return _0x335eee!==_0x89cb93;},'NceIp':'lLHIo','UHZEF':_0x41f489(0x56a,0x5c4,0x57a,0x533),'zIgyS':function(_0x39508e){return _0x39508e();}},{prompt:_0x4d15c1,id:_0xee34f6}=_0x2ab916;if(_0xfb3b9e[_0x52b019(0x1a4,0x2bb,0x214,0x286)](!_0xee34f6,!_0x4d15c1))return;currentLLMRequestController&&(currentLLMRequestController[_0x52b019(0x34f,0x253,0x2c2,0x310)](),toastr[_0x52b019(0x2ab,0x283,0x21e,0x28a)]('LLM请求已中断，开'+'始新请求。'));currentLLMRequestController=new AbortController();function _0x52b019(_0x1433ed,_0x1225c9,_0x5b9a8c,_0x3b74be){return _0x58b339(_0x5b9a8c-0x1bb,_0x1225c9-0xa4,_0x1225c9,_0x3b74be-0xfd);}const _0x5839a4=currentLLMRequestController[_0x41f489(0x532,0x4f0,0x515,0x4eb)],_0x2d6558=currentLLMRequestController,_0x248c52={};_0x248c52[_0x41f489(0x55e,0x5c0,0x538,0x562)]=_0xfb3b9e[_0x41f489(0x4d6,0x516,0x488,0x4c1)],_0x248c52[_0x41f489(0x4ef,0x524,0x511,0x476)]=TaskType[_0x41f489(0x476,0x430,0x3cd,0x4e1)],_0x248c52[_0x41f489(0x534,0x55f,0x557,0x58a)]=_0xee34f6;const _0x15b451=taskQueue[_0x41f489(0x4c2,0x476,0x4ca,0x4f6)](_0x248c52);llmTaskControllers[_0x41f489(0x4bc,0x559,0x48c,0x56d)](_0x15b451,currentLLMRequestController),taskQueue[_0x52b019(0x334,0x28e,0x2f1,0x28e)+'us'](_0x15b451,TaskStatus[_0x41f489(0x5bf,0x528,0x5c7,0x574)]),_0xfb3b9e[_0x52b019(0x23a,0x2bc,0x2ba,0x2da)](startFabLoading);let _0x2ed057=![];function _0x41f489(_0x568355,_0x4566bd,_0x3c171f,_0x5e3513){return _0x58b339(_0x568355-0x42f,_0x4566bd-0x106,_0x3c171f,_0x5e3513-0x22);}_0xfb3b9e[_0x41f489(0x52e,0x49a,0x5ce,0x556)](clearLog),_0xfb3b9e[_0x41f489(0x5c4,0x562,0x535,0x58f)](addLog,'=====\x20LLM\x20'+_0x41f489(0x596,0x612,0x528,0x63e)+'=='),_0xfb3b9e['TOTao'](addLog,_0x41f489(0x483,0x42f,0x3e6,0x3d7)+_0xee34f6),_0xfb3b9e['hxfrl'](addLog,_0x52b019(0x2ab,0x294,0x277,0x2c3)+':'),_0xfb3b9e[_0x41f489(0x56d,0x5cb,0x517,0x53f)](addLog,_0xfb3b9e['gXTiK'](formatPromptForDisplay,_0x4d15c1));const {api_url:_0x332e2d,api_key:_0x363b59,model:_0x4de948,temperature:_0x291393,top_p:_0x2d47ec,max_tokens:_0x4ec689,stream:_0x276bd9,bypass_proxy:_0x14935b}=_0x554394;if(_0xfb3b9e[_0x52b019(0x3ad,0x364,0x327,0x33f)](!_0x332e2d,!_0x363b59)||!_0x4de948){const _0x54ade7=_0xfb3b9e[_0x52b019(0x231,0x253,0x263,0x2a7)];toastr[_0x41f489(0x531,0x5a0,0x572,0x4ea)](_0x54ade7);const _0x481606={};_0x481606[_0x52b019(0x1b6,0x17c,0x21a,0x266)]=![],_0x481606[_0x52b019(0x2ea,0x364,0x2df,0x34e)]=_0x54ade7,_0x481606['id']=_0xee34f6,eventSource[_0x52b019(0x205,0x296,0x299,0x266)](eventNames['LLM_EXECUT'+'E_RESPONSE'],_0x481606);return;}const _0x9c53c8=_0x332e2d[_0x41f489(0x567,0x521,0x4fa,0x5eb)](/\/$/,'');let _0xf0e5e7,_0x6191e8,_0x49e168;if(_0x14935b){_0xf0e5e7=_0x9c53c8+(_0x41f489(0x53c,0x4c4,0x4e4,0x545)+_0x41f489(0x5bc,0x64b,0x552,0x596));const _0xfdfb7e={};_0xfdfb7e[_0x41f489(0x4cd,0x42a,0x4a3,0x551)+'pe']=_0xfb3b9e[_0x41f489(0x4b1,0x54c,0x502,0x426)],_0xfdfb7e[_0x52b019(0x3a7,0x379,0x31f,0x2b9)+'ion']='Bearer\x20'+_0x363b59,_0x6191e8=_0xfdfb7e,_0x49e168={'model':_0x4de948,'messages':_0x4d15c1,'temperature':_0x291393,'top_p':_0x2d47ec,'max_tokens':_0x4ec689,'stream':_0xfb3b9e['SrFpB'](_0x276bd9,![])};}else{if(_0xfb3b9e[_0x41f489(0x5b7,0x624,0x514,0x615)](_0x41f489(0x591,0x50c,0x567,0x55b),_0xfb3b9e[_0x41f489(0x50e,0x511,0x594,0x4ed)]))throw _0xcec3cf;else{let _0x2232f7=_0x9c53c8;!_0x2232f7[_0x41f489(0x562,0x4ca,0x5ff,0x5c2)](_0xfb3b9e[_0x52b019(0x2ec,0x255,0x297,0x2b4)])&&!_0x2232f7['includes'](_0xfb3b9e[_0x41f489(0x4ca,0x4c9,0x4d9,0x4e4)])&&(_0x2232f7=_0xfb3b9e['KtVLD'](_0x2232f7,_0xfb3b9e[_0x41f489(0x50b,0x4c9,0x469,0x4d3)]));_0x2232f7=_0x2232f7[_0x52b019(0x38c,0x363,0x2f3,0x2d8)](/\/v1\/$/,_0xfb3b9e['WrHPC']),_0xf0e5e7=_0xfb3b9e[_0x41f489(0x4c7,0x54a,0x53d,0x4c7)],_0x6191e8=_0xfb3b9e[_0x41f489(0x4d2,0x4f0,0x469,0x55d)](getRequestHeaders,window[_0x52b019(0x3c0,0x31e,0x340,0x36b)]);const _0x240137={};_0x240137[_0x52b019(0x2ff,0x3b1,0x35a,0x3f6)+_0x41f489(0x5c7,0x548,0x5ca,0x532)+'ce']=_0xfb3b9e['QybZi'],_0x240137[_0x41f489(0x501,0x463,0x526,0x507)]=_0x2232f7,_0x240137[_0x41f489(0x47a,0x40c,0x511,0x4f8)+'lude_heade'+'rs']=_0x52b019(0x370,0x29d,0x31f,0x385)+_0x52b019(0x241,0x1be,0x215,0x236)+'er\x20'+_0x363b59+'\x22',_0x240137[_0x41f489(0x495,0x535,0x454,0x45f)]=_0x4de948,_0x240137[_0x52b019(0x2b0,0x393,0x304,0x2c8)]=_0x4d15c1,_0x240137[_0x52b019(0x257,0x2db,0x22b,0x1e5)+'e']=_0x291393,_0x240137[_0x52b019(0x202,0x22f,0x28a,0x2ff)]=_0x2d47ec,_0x240137[_0x41f489(0x509,0x57c,0x481,0x4e2)]=_0x4ec689,_0x240137['stream']=![],_0x49e168=_0x240137;}}_0x215a21&&_0xfb3b9e['qaiHB'](_0x215a21,_0xfb3b9e[_0x41f489(0x4fc,0x49a,0x44e,0x57c)]);try{if(_0xfb3b9e['oAscv'](_0x52b019(0x302,0x1cd,0x26d,0x31c),_0xfb3b9e[_0x52b019(0x1d9,0x217,0x23b,0x26a)]))_0x1c1175['history']['forEach'](_0x45e6c2=>{if(_0x45e6c2[_0x64e00(0x4e4,0x3c0,0x412,0x432)]&&_0xfb3b9e[_0x64e00(0x426,0x4c2,0x412,0x4af)](_0x45e6c2[_0x2ac6ee(-0xd1,-0x12b,-0x130,-0x55)][_0x64e00(0x45c,0x426,0x4f3,0x46c)](),'')){const _0x8d8a29={};_0x8d8a29[_0x64e00(0x461,0x357,0x343,0x3f3)]=_0xfb3b9e[_0x2ac6ee(-0x148,-0x1e7,-0x10c,-0x1a8)],_0x8d8a29['content']=_0x45e6c2[_0x2ac6ee(-0xd1,-0xf5,-0xaa,-0x102)],_0x1892b5[_0x2ac6ee(-0x186,-0x20a,-0x12f,-0x174)](_0x8d8a29);}function _0x64e00(_0x39717c,_0x5e41cb,_0x4df3f5,_0x599658){return _0x41f489(_0x599658- -0x108,_0x5e41cb-0xed,_0x39717c,_0x599658-0xb4);}function _0x2ac6ee(_0xcb45a5,_0x280dbb,_0x13f77d,_0x158119){return _0x52b019(_0xcb45a5-0x1ae,_0x158119,_0xcb45a5- -0x397,_0x158119-0x12f);}if(_0x45e6c2[_0x2ac6ee(-0x117,-0x11b,-0x130,-0x124)]&&_0x45e6c2[_0x2ac6ee(-0x117,-0x1c3,-0x16a,-0x180)][_0x64e00(0x519,0x4e3,0x445,0x46c)]()!==''){const _0x11d139={};_0x11d139['role']=_0xfb3b9e[_0x2ac6ee(-0xe5,-0xa6,-0x197,-0xfc)],_0x11d139[_0x64e00(0x4c6,0x4b3,0x3dd,0x421)]=_0x45e6c2[_0x2ac6ee(-0x117,-0x198,-0x91,-0x9d)],_0x2216ff[_0x64e00(0x37f,0x392,0x3fc,0x37d)](_0x11d139);}});else{const _0x3f60f1=await _0xfb3b9e['zcUbI'](fetch,_0xf0e5e7,{'method':_0xfb3b9e[_0x52b019(0x21a,0x27c,0x21c,0x261)],'headers':_0x6191e8,'body':JSON[_0x41f489(0x53d,0x564,0x4e5,0x57b)](_0x49e168),'signal':_0x5839a4}),_0x49e6f3=await _0x3f60f1[_0x52b019(0x258,0x2a9,0x2d7,0x286)]();if(_0x49e6f3['error']){if(_0xfb3b9e[_0x41f489(0x54c,0x522,0x5af,0x51f)](_0x52b019(0x218,0x17d,0x201,0x15b),_0xfb3b9e['dpmux']))_0x57c079[_0x41f489(0x536,0x534,0x50b,0x4ef)](),_0x36e262['delete'](_0xc72e3d),_0x2061c9['log'](_0x52b019(0x334,0x266,0x2eb,0x25e)+_0x52b019(0x27c,0x1b6,0x229,0x1b2)+_0x4caf3d);else{let _0x157be0;if(_0xfb3b9e[_0x41f489(0x4c1,0x536,0x4e8,0x501)](typeof _0x49e6f3['error'],_0xfb3b9e[_0x41f489(0x481,0x49f,0x529,0x4aa)])&&_0x49e6f3['error'][_0x52b019(0x23d,0x30f,0x28e,0x281)]){_0x157be0=''+_0x49e6f3[_0x52b019(0x249,0x24e,0x2bd,0x230)][_0x41f489(0x502,0x4d8,0x5aa,0x55a)];const _0x21d8a1=[];if(_0x49e6f3['error']['type'])_0x21d8a1['push'](_0x41f489(0x4bb,0x542,0x517,0x567)+_0x49e6f3[_0x52b019(0x2aa,0x2c8,0x2bd,0x330)][_0x41f489(0x4ef,0x4a2,0x595,0x4f7)]);if(_0x49e6f3['error']['code'])_0x21d8a1['push'](_0x41f489(0x554,0x57b,0x5da,0x504)+_0x49e6f3[_0x41f489(0x531,0x55e,0x532,0x4c3)]['code']);if(_0xfb3b9e[_0x41f489(0x5bd,0x64c,0x57c,0x5ea)](_0x21d8a1['length'],0x935+0x15f5+-0x1f2a)){if('gSlNU'===_0x41f489(0x522,0x5b9,0x541,0x474)){_0x2292ab=''+_0x2e9384[_0x41f489(0x531,0x514,0x5b8,0x4f2)][_0x41f489(0x502,0x53f,0x4fa,0x59c)];const _0xcf8060=[];if(_0x1eded9[_0x41f489(0x531,0x516,0x4bd,0x49c)][_0x41f489(0x4ef,0x470,0x534,0x496)])_0xcf8060['push'](_0x41f489(0x4bb,0x4d8,0x4cd,0x503)+_0x2f362c[_0x41f489(0x531,0x4ec,0x58b,0x4d0)][_0x41f489(0x4ef,0x481,0x54c,0x4c6)]);if(_0x5c404c[_0x41f489(0x531,0x530,0x56a,0x49a)][_0x52b019(0x1eb,0x161,0x1fc,0x285)])_0xcf8060[_0x52b019(0x1ef,0x17f,0x211,0x22a)]('代码:\x20'+_0x2cf71b['error'][_0x52b019(0x260,0x15a,0x1fc,0x236)]);_0xfb3b9e[_0x41f489(0x5bd,0x583,0x578,0x656)](_0xcf8060['length'],0xcf4+0x3f2+-0x10e6)&&(_0x12dfbd+='\x20('+_0xcf8060[_0x52b019(0x2ae,0x299,0x2e1,0x352)](',\x20')+')');}else _0x157be0+='\x20('+_0x21d8a1[_0x52b019(0x2f8,0x2d3,0x2e1,0x327)](',\x20')+')';}}else _0x157be0=''+JSON[_0x41f489(0x53d,0x4e3,0x5b5,0x4d2)](_0x49e6f3['error']);throw new Error(_0x157be0);}}if(!_0x3f60f1['ok']){if('IGKIC'!==_0xfb3b9e[_0x52b019(0x1d0,0x2bf,0x279,0x257)])_0xfb3b9e['sHgxS'](_0x347d86,_0x52b019(0x395,0x330,0x2f2,0x257)+_0x26a01f+_0x52b019(0x3cf,0x3b7,0x332,0x28d));else throw new Error('请求失败:\x20'+_0x3f60f1['status']+'\x20'+_0x3f60f1[_0x52b019(0x36c,0x38f,0x2e6,0x337)]);}const _0x1b2e6f=_0x49e6f3['choices']?.[0xc4d*0x3+-0x2e*-0x17+-0x3bb*0xb]?.['message']?.[_0x52b019(0x314,0x2fa,0x2b5,0x2e7)]||'';!_0x1b2e6f&&toastr['warning'](_0xfb3b9e[_0x41f489(0x57f,0x58e,0x630,0x511)]);_0x215a21&&_0x215a21(_0x1b2e6f);_0xfb3b9e[_0x41f489(0x56d,0x533,0x50e,0x53c)](addLog,'\x0a-----\x20LLM'+_0x41f489(0x4a7,0x519,0x482,0x484)),_0xfb3b9e[_0x41f489(0x5d1,0x603,0x60b,0x65c)](addLog,_0x1b2e6f),_0xfb3b9e[_0x41f489(0x484,0x50b,0x52e,0x4c2)](addLog,_0x41f489(0x4e8,0x444,0x52c,0x4f9)+_0x41f489(0x4a9,0x4a9,0x4a4,0x502)),taskQueue[_0x52b019(0x1be,0x2ed,0x26b,0x2fc)+'sk'](_0x15b451,!![]),llmTaskControllers['delete'](_0x15b451);const _0x55089d={};_0x55089d[_0x41f489(0x48e,0x4b6,0x530,0x4cc)]=!![],_0x55089d['result']=_0x1b2e6f,_0x55089d['id']=_0xee34f6,eventSource['emit'](eventNames[_0x52b019(0x2d5,0x31d,0x2e8,0x32f)+_0x52b019(0x29a,0x2e5,0x238,0x1bb)],_0x55089d);}}catch(_0x199b93){if(_0xfb3b9e['QYouj'](_0xfb3b9e[_0x41f489(0x52f,0x5d9,0x4ba,0x5ca)],'eKQVG')){if(_0xfb3b9e['QYouj'](_0x199b93[_0x52b019(0x272,0x25a,0x2ea,0x261)],_0xfb3b9e['FkmBt'])){const _0x350ee8=_0xfb3b9e[_0x41f489(0x545,0x4ba,0x5bd,0x4a3)]['split']('|');let _0x51e468=0x77e+-0x13*0xfe+-0xb5c*-0x1;while(!![]){switch(_0x350ee8[_0x51e468++]){case'0':return;case'1':llmTaskControllers[_0x52b019(0x1a6,0x173,0x225,0x18f)](_0x15b451);continue;case'2':_0x2ed057=!![];continue;case'3':taskQueue[_0x52b019(0x372,0x2c8,0x2f1,0x38c)+'us'](_0x15b451,TaskStatus[_0x41f489(0x570,0x57b,0x4cf,0x4df)]);continue;case'4':console['log'](_0xfb3b9e[_0x52b019(0x262,0x303,0x289,0x2c4)]);continue;case'5':const _0x8ca0aa={};_0x8ca0aa[_0x52b019(0x311,0x357,0x2ea,0x30c)]=_0xfb3b9e[_0x52b019(0x2f6,0x23e,0x24a,0x295)],_0x8ca0aa[_0x41f489(0x502,0x54d,0x505,0x463)]=_0x52b019(0x24f,0x2c7,0x2a1,0x205)+_0x41f489(0x572,0x4fa,0x587,0x548);const _0x5af5ce={};_0x5af5ce['success']=![],_0x5af5ce[_0x52b019(0x29c,0x36c,0x2df,0x2c4)]=null,_0x5af5ce['id']=_0xee34f6,_0x5af5ce['error']=_0x8ca0aa,eventSource[_0x41f489(0x50d,0x563,0x5b8,0x47a)](eventNames[_0x52b019(0x30f,0x33e,0x2e8,0x2e0)+_0x52b019(0x20b,0x1b8,0x238,0x227)],_0x5af5ce);continue;}break;}}console[_0x52b019(0x34b,0x307,0x2bd,0x349)](_0xfb3b9e[_0x52b019(0x2d4,0x383,0x317,0x2b7)],_0x199b93);const _0x5239ee=_0x52b019(0x271,0x1a9,0x230,0x2d1)+_0x199b93[_0x41f489(0x502,0x4b4,0x54f,0x472)];_0x215a21&&_0xfb3b9e['hxfrl'](_0x215a21,_0x5239ee);toastr[_0x41f489(0x531,0x49a,0x578,0x567)](_0x199b93[_0x41f489(0x502,0x45f,0x5b3,0x4fe)]),taskQueue['completeTa'+'sk'](_0x15b451,![]),llmTaskControllers[_0x41f489(0x499,0x413,0x44d,0x4bc)](_0x15b451);const _0x328301={};_0x328301['success']=![],_0x328301[_0x41f489(0x553,0x52e,0x5ec,0x522)]=_0x5239ee,_0x328301['id']=_0xee34f6,eventSource[_0x41f489(0x50d,0x45f,0x587,0x4e3)](eventNames[_0x52b019(0x301,0x2cb,0x2e8,0x266)+_0x52b019(0x28c,0x28b,0x238,0x1e3)],_0x328301);}else{_0x30e7a6=''+_0xfbf062['error'][_0x52b019(0x1e9,0x303,0x28e,0x21a)];const _0x456bcf=[];if(_0x19c660[_0x41f489(0x531,0x51d,0x55c,0x4dd)][_0x52b019(0x2d9,0x24d,0x27b,0x1fc)])_0x456bcf['push'](_0x52b019(0x196,0x1e0,0x247,0x208)+_0xa50059[_0x41f489(0x531,0x5b4,0x518,0x4e2)][_0x41f489(0x4ef,0x59b,0x4b5,0x449)]);if(_0x480a08[_0x41f489(0x531,0x4b6,0x56a,0x56c)][_0x41f489(0x470,0x4bb,0x3fc,0x45d)])_0x456bcf[_0x52b019(0x235,0x28e,0x211,0x1ca)](_0x52b019(0x2eb,0x385,0x2e0,0x2d4)+_0x3ad85b[_0x52b019(0x30f,0x246,0x2bd,0x310)]['code']);_0xfb3b9e['mfGDP'](_0x456bcf[_0x52b019(0x263,0x2e3,0x2b3,0x2a8)],0x1335+0x1673*0x1+-0xa6a*0x4)&&(_0x150c94+='\x20('+_0x456bcf['join'](',\x20')+')');}}finally{_0xfb3b9e['bfhWc'](currentLLMRequestController,_0x2d6558)&&(_0xfb3b9e[_0x41f489(0x4c1,0x541,0x523,0x4b6)](_0xfb3b9e[_0x41f489(0x4d3,0x47b,0x440,0x545)],_0x52b019(0x2f7,0x1d2,0x249,0x293))?(_0x29ad33=_0xfb3b9e[_0x52b019(0x323,0x312,0x2cf,0x34f)],_0x116faf[_0x41f489(0x4a3,0x4ab,0x43f,0x52d)](_0x2d9cc1+(_0x41f489(0x59d,0x629,0x4f9,0x5e9)+'为空，可能是请求被截'+'断、max_toke'+'ns\x20设置过小、或\x20'+_0x52b019(0x238,0x2c0,0x29e,0x30e)))):currentLLMRequestController=null),(!_0x2ed057||_0xfb3b9e[_0x41f489(0x5b6,0x5c5,0x65a,0x5b7)](currentLLMRequestController,null))&&(_0xfb3b9e['fAYah'](_0xfb3b9e[_0x52b019(0x354,0x32f,0x34a,0x2a3)],_0xfb3b9e[_0x52b019(0x2c6,0x30f,0x265,0x25d)])?_0xfb3b9e[_0x52b019(0x1c5,0x19a,0x240,0x1aa)](stopFabLoading):_0xfb3b9e[_0x41f489(0x503,0x548,0x4c0,0x555)](_0x459e92,_0x4d770f));}}export function createGetPromptHandler(_0x3fb808,_0x4851aa){const _0x4287c4={'rBOAm':function(_0x3633c6,_0x19828b){return _0x3633c6(_0x19828b);}};return function(_0x439b43){const {id:_0x5015fc}=_0x439b43;if(!_0x5015fc)return;const _0x331524=REQUEST_TYPE_NAMES[_0x3fb808]||_0x3fb808;function _0x1ed365(_0x1800cc,_0x543b33,_0x1357cf,_0x86599e){return _0x43df(_0x1800cc- -0x26,_0x543b33);}console[_0x1ed365(0xab,0x96,0xb3,0x1)](_0x1ed365(0xb6,0x153,0x59,0x9c)+_0x1ed365(0x19d,0x242,0x138,0x224)+_0x331524+(_0x3e4015(-0x6f,0x3a,-0x25,-0x3f)+_0x1ed365(0xc0,0x22,0x150,0xff))+_0x5015fc+')');const _0x515b7d=_0x4287c4[_0x1ed365(0x63,0x26,0x9,0xb7)](buildPromptForRequestType,_0x3fb808);function _0x3e4015(_0x808020,_0xf61104,_0x47098c,_0x42a422){return _0x43df(_0xf61104- -0x106,_0x47098c);}const _0x3ed759={};_0x3ed759['prompt']=_0x515b7d,_0x3ed759['id']=_0x5015fc,eventSource[_0x1ed365(0xff,0x52,0x124,0xf8)](_0x4851aa,_0x3ed759);};}export function createExecuteHandler(_0x3f2d5a,_0x3c00fa,_0x320aca=null){const _0x1765b7={'IxIIy':function(_0x588398){return _0x588398();}};return async function(_0x1c4285){const _0x5bd6e9=_0x320aca?_0x1765b7['IxIIy'](_0x320aca):null;await executeTypedLLMRequest(_0x1c4285,_0x3f2d5a,_0x3c00fa,_0x5bd6e9);};}