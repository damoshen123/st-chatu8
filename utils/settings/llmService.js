(function(_0xb4d027,_0x4761aa){function _0x332632(_0x25da8b,_0x57da01,_0x233117,_0x407293){return _0x2d4d(_0x57da01- -0x32d,_0x25da8b);}const _0x530650=_0xb4d027();function _0xaf81f9(_0x4c92e0,_0x23eed5,_0x5e457e,_0x1c2432){return _0x2d4d(_0x5e457e-0x129,_0x4c92e0);}while(!![]){try{const _0x3e69fb=-parseInt(_0xaf81f9(0x2b9,0x29d,0x307,0x38b))/(0x16dd+0x3e6+-0x1ac2)+-parseInt(_0x332632(-0x7f,-0x11e,-0x146,-0x8f))/(0x83*0x1d+-0x2101+0x122c)*(parseInt(_0x332632(-0xf0,-0xb7,-0x15c,-0xa1))/(0x3b*0x6b+-0x3*0x229+0x122b*-0x1))+parseInt(_0xaf81f9(0x1f2,0x20f,0x25f,0x1f1))/(-0x1*-0x1735+0x12fa+-0x7f*0x55)+-parseInt(_0xaf81f9(0x32a,0x235,0x290,0x263))/(-0xc*0x293+0x18*0x6b+0x14e1)*(parseInt(_0x332632(-0xee,-0xca,-0x43,-0x169))/(0xfc1+-0x1d1c+0xd61))+parseInt(_0x332632(-0x15f,-0xd2,-0xde,-0x142))/(0x14c3*-0x1+-0x2*-0xfaf+0x2*-0x54a)*(parseInt(_0xaf81f9(0x3f4,0x3c8,0x3b3,0x478))/(-0x1*0x6e5+-0x1adb+0x21c8))+-parseInt(_0xaf81f9(0x35e,0x246,0x2b4,0x2ad))/(-0x2385+-0x14b3+-0x3841*-0x1)*(-parseInt(_0xaf81f9(0x38a,0x3c3,0x38a,0x307))/(-0xbb3+-0x9*0x11a+0x15a7*0x1))+parseInt(_0x332632(-0xc6,-0x167,-0x17d,-0x1ff))/(0x416+-0x8*-0x364+-0x1f2b)*(parseInt(_0xaf81f9(0x1fe,0x22b,0x289,0x31f))/(-0x2*0xfc2+-0x20e0+-0x2038*-0x2));if(_0x3e69fb===_0x4761aa)break;else _0x530650['push'](_0x530650['shift']());}catch(_0x2a707d){_0x530650['push'](_0x530650['shift']());}}}(_0x3558,0xc7c62+0xcce55*-0x1+-0x10*-0x71e5));const _0x51d5d9=(function(){let _0x3940ec=!![];return function(_0x259bbc,_0x342ddf){const _0x3150d0=_0x3940ec?function(){if(_0x342ddf){const _0x17add3=_0x342ddf['apply'](_0x259bbc,arguments);return _0x342ddf=null,_0x17add3;}}:function(){};return _0x3940ec=![],_0x3150d0;};}());function _0x548035(_0x4469fe,_0x305e15,_0x2cf3bc,_0x5d01d8){return _0x2d4d(_0x305e15-0x373,_0x2cf3bc);}const _0x5a82b7=_0x51d5d9(this,function(){function _0x5d5d65(_0xccf623,_0x201275,_0x15feec,_0x25187a){return _0x2d4d(_0xccf623- -0x284,_0x25187a);}const _0x1e4235={};_0x1e4235['NhtGL']=_0x163bc0(0x44a,0x46a,0x434,0x46d)+'+$';function _0x163bc0(_0x32f1d2,_0x656584,_0x4053a1,_0x15c702){return _0x2d4d(_0x4053a1-0x2aa,_0x15c702);}const _0x3875da=_0x1e4235;return _0x5a82b7[_0x163bc0(0x5da,0x4ed,0x51d,0x4b3)]()[_0x5d5d65(-0x4a,-0xef,-0xe9,-0xf6)](_0x163bc0(0x408,0x386,0x434,0x381)+'+$')[_0x5d5d65(-0x11,0x40,0x6f,0x34)]()[_0x5d5d65(-0x85,-0xeb,-0xc7,-0x45)+'r'](_0x5a82b7)['search'](_0x3875da[_0x5d5d65(-0xc0,-0x164,-0x187,-0x1)]);});_0x5a82b7();function _0x5c022e(_0x3047d4,_0x4dbedd,_0x10bb1f,_0x20e2ba){return _0x2d4d(_0x10bb1f-0x52,_0x3047d4);}import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on'](_0x5c022e(0x2a9,0x28b,0x2bf,0x301)+'cancel_llm'+'_task',({taskId:_0xf81fdb})=>{const _0x253d9c={};_0x253d9c[_0x343790(-0x174,-0x118,-0x122,-0x117)]=_0x27e288(0x130,0x11b,0x1cd,0x92)+_0x343790(-0x155,-0xf9,-0x182,-0x11b)+_0x27e288(-0x39,-0x35,-0xcd,-0xca);function _0x27e288(_0x5c1c05,_0x1e938d,_0x4bb8b5,_0x420c13){return _0x5c022e(_0x4bb8b5,_0x1e938d-0x5a,_0x1e938d- -0x1ca,_0x420c13-0x190);}_0x253d9c['yfiab']=function(_0x42c4ac,_0x51f9f5){return _0x42c4ac===_0x51f9f5;},_0x253d9c[_0x27e288(-0x73,-0x39,0x50,0x83)]=_0x343790(-0x87,-0x84,-0x127,-0x12d);const _0x200ed7=_0x253d9c,_0x3eaa4f=llmTaskControllers[_0x343790(-0x16a,-0x1bc,-0xed,-0x1f8)](_0xf81fdb);function _0x343790(_0x170ca1,_0x142b59,_0x1498d5,_0x33bdb4){return _0x5c022e(_0x142b59,_0x142b59-0x15,_0x170ca1- -0x352,_0x33bdb4-0xbe);}if(_0x3eaa4f){if(_0x200ed7['yfiab'](_0x343790(-0xd8,-0x130,-0x173,-0x182),_0x200ed7[_0x343790(-0x1c1,-0x1ee,-0x19f,-0x136)])){const _0x41170f=_0x200ed7[_0x27e288(0x56,0x14,0x86,-0x55)];_0x27cec0[_0x343790(-0x1bc,-0x25a,-0x1bd,-0x248)](_0x41170f);const _0x5157e6={};_0x5157e6['success']=![],_0x5157e6[_0x27e288(0x38,-0x64,-0x32,-0x79)]=_0x41170f,_0x5157e6['id']=_0x303ebe,_0x49ea30[_0x27e288(0x77,-0x47,-0xf,0x19)](_0x516aed[_0x27e288(-0x7b,-0x52,0x3f,-0x103)+_0x27e288(0x18f,0x11a,0x127,0x1a5)],_0x5157e6);return;}else _0x3eaa4f[_0x27e288(-0xbb,-0x50,-0xf8,-0x10d)](),llmTaskControllers[_0x27e288(0x47,0x69,0x97,0x88)](_0xf81fdb),console[_0x27e288(0x8,0x20,0x9e,0x48)](_0x343790(-0x115,-0x1d5,-0x1c3,-0x18e)+_0x27e288(-0x20,0x6a,0x91,0x73)+_0xf81fdb);}});export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x1abdc6){currentLLMRequestController=_0x1abdc6;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){const _0x406544={};_0x406544[_0x4c66d2(0x246,0x1cc,0x22d,0x168)]=_0x4c66d2(0x152,0xfa,0xee,0x12e)+'+$',_0x406544['UOnjq']=function(_0x2b0027,_0x1611a7){return _0x2b0027===_0x1611a7;},_0x406544[_0x1e1584(0x4a4,0x516,0x460,0x4a0)]=_0x1e1584(0x41c,0x4b4,0x451,0x56e);function _0x4c66d2(_0x2a039d,_0x38acab,_0x5419d7,_0x581b73){return _0x5c022e(_0x581b73,_0x38acab-0x2e,_0x38acab- -0xe2,_0x581b73-0x65);}_0x406544[_0x1e1584(0x3c1,0x47e,0x471,0x3d4)]=_0x1e1584(0x558,0x4d1,0x40a,0x55a);const _0x256ccc=_0x406544;function _0x1e1584(_0x5f2f0a,_0x752dcf,_0x53e3d2,_0x53783c){return _0x5c022e(_0x53783c,_0x752dcf-0x161,_0x752dcf-0x23f,_0x53783c-0x173);}if(currentLLMRequestController){if(_0x256ccc[_0x1e1584(0x414,0x436,0x407,0x496)](_0x256ccc[_0x1e1584(0x5d9,0x516,0x57b,0x5ad)],_0x256ccc[_0x1e1584(0x5a8,0x516,0x4cc,0x475)]))currentLLMRequestController[_0x4c66d2(0x11,0x98,0xef,0x1d)](),toastr[_0x1e1584(0x420,0x4a3,0x4c0,0x43f)](_0x256ccc['NqvYm']);else return _0x45082c[_0x4c66d2(0x215,0x1e3,0x26b,0x2a8)]()[_0x4c66d2(0x255,0x1aa,0x111,0x1cb)](XCydde[_0x4c66d2(0x16f,0x1cc,0x176,0x243)])[_0x1e1584(0x504,0x504,0x590,0x5b5)]()[_0x1e1584(0x494,0x490,0x41d,0x4f0)+'r'](_0x28c8bf)['search'](XCydde[_0x4c66d2(0x20a,0x1cc,0x1a2,0x28c)]);}}export function formatPromptForDisplay(_0x17588f){const _0x26d92c={'nIvnk':function(_0x3fae77,_0x195725){return _0x3fae77(_0x195725);},'pCKGK':function(_0x2f3a93,_0x10a6d1){return _0x2f3a93>_0x10a6d1;},'fHBNw':_0x4e50d3(-0x28f,-0x348,-0x2fa,-0x266),'fHbRR':_0x4e50d3(-0x15f,-0xf8,-0x1cd,-0x16d),'EhRBK':function(_0x377925,_0x20397d){return _0x377925===_0x20397d;},'xsdUJ':'image_url','ZpbBO':_0x4e50d3(-0x17b,-0x1a8,-0xe9,-0x23a),'xHZBS':_0x2b73fb(0x5b0,0x54b,0x5a4,0x5ca),'kcKzO':function(_0x56f25e,_0x21def8){return _0x56f25e/_0x21def8;},'hWtmA':function(_0x3eaca3,_0x1a200e){return _0x3eaca3===_0x1a200e;},'ACsuV':_0x4e50d3(-0x2a9,-0x235,-0x31e,-0x365),'RLxEg':_0x2b73fb(0x499,0x530,0x43b,0x3e3),'MsHSS':function(_0xb07b80,_0x3c35e2){return _0xb07b80===_0x3c35e2;},'rhQfU':_0x2b73fb(0x574,0x53f,0x539,0x5a2),'SorOS':function(_0x4097e3,_0x43296c){return _0x4097e3===_0x43296c;},'AjwWm':'object','bhpLK':function(_0x382eca,_0x4eef14){return _0x382eca===_0x4eef14;},'btWZw':_0x4e50d3(-0x1cc,-0x19b,-0x269,-0x16a)};function _0x4e50d3(_0x16a6e9,_0x32be59,_0x3ca9f5,_0x100f17){return _0x5c022e(_0x32be59,_0x32be59-0x13f,_0x16a6e9- -0x42b,_0x100f17-0x17d);}function _0x2b73fb(_0x1b6bbb,_0x1a8541,_0x44c6aa,_0x406ec0){return _0x5c022e(_0x1a8541,_0x1a8541-0x18a,_0x1b6bbb-0x2ef,_0x406ec0-0xc5);}if(_0x26d92c[_0x4e50d3(-0x16e,-0xcf,-0x112,-0xd6)](typeof _0x17588f,_0x26d92c['rhQfU']))return _0x17588f;if(Array[_0x2b73fb(0x5df,0x68c,0x5af,0x610)](_0x17588f)){const _0x43834c=[];return _0x17588f[_0x4e50d3(-0x1e7,-0x2ac,-0x27e,-0x290)]((_0x3423f7,_0x46bcc0)=>{const _0x154c17={'nrWPu':function(_0x5768e2,_0x883554){return _0x26d92c['nIvnk'](_0x5768e2,_0x883554);},'bJYPJ':function(_0xaff9a8,_0x559b72){return _0xaff9a8===_0x559b72;},'hJrXV':function(_0x3e4fcd,_0xd2ab09){function _0xb83100(_0x101683,_0x489a7e,_0x4c9b70,_0x98728a){return _0x2d4d(_0x489a7e- -0x3d1,_0x4c9b70);}return _0x26d92c[_0xb83100(-0x2ce,-0x213,-0x275,-0x1c4)](_0x3e4fcd,_0xd2ab09);},'qvhrV':_0x26d92c[_0x5589e9(0x39a,0x28f,0x320,0x30d)],'GwjlG':_0x26d92c[_0x5589e9(0x44f,0x482,0x3a4,0x3f3)],'Shory':'text','zrswq':function(_0x13b5ba,_0x17922f){function _0x4e8397(_0x12c08f,_0x1b6974,_0x4dae6e,_0x4eb9bc){return _0x469092(_0x4dae6e-0x528,_0x1b6974-0xec,_0x4dae6e-0xde,_0x4eb9bc);}return _0x26d92c[_0x4e8397(0x46c,0x3c1,0x41b,0x371)](_0x13b5ba,_0x17922f);},'YJFMt':_0x26d92c['xsdUJ'],'Jhqzp':_0x26d92c['ZpbBO'],'tlxDY':_0x26d92c[_0x469092(-0x121,-0x5b,-0xf2,-0x78)],'myVEh':_0x5589e9(0x3f0,0x405,0x29c,0x341),'OzNWx':function(_0x1beb73,_0x1d8dad){return _0x26d92c['kcKzO'](_0x1beb73,_0x1d8dad);},'lwePA':function(_0x177ff9,_0xc881bd){function _0x3ee75c(_0xc7477f,_0x56e23c,_0x3b2389,_0x12e36a){return _0x5589e9(_0xc7477f-0x55,_0x56e23c-0xaf,_0x56e23c,_0xc7477f- -0xc2);}return _0x26d92c[_0x3ee75c(0x324,0x3a1,0x396,0x381)](_0x177ff9,_0xc881bd);},'QxiUO':_0x5589e9(0x39c,0x4bf,0x3c3,0x422),'PBOTd':_0x26d92c[_0x469092(-0xdb,-0x55,-0x3d,-0x19e)]},_0x2586f6=_0x3423f7[_0x5589e9(0x4ad,0x41a,0x454,0x43c)]||_0x26d92c[_0x5589e9(0x37a,0x42e,0x34c,0x3c2)];function _0x469092(_0x6932c3,_0x123df0,_0x4170b8,_0x4d54ef){return _0x2b73fb(_0x6932c3- -0x6b9,_0x4d54ef,_0x4170b8-0x1bc,_0x4d54ef-0x18f);}const _0x2e876d=_0x26d92c['nIvnk'](getRoleLabel,_0x2586f6);_0x43834c[_0x5589e9(0x443,0x478,0x4b5,0x403)](''+'═'[_0x5589e9(0x325,0x330,0x2fe,0x330)](-0xa94*0x2+0x1ee3*-0x1+-0x343d*-0x1)),_0x43834c[_0x5589e9(0x48a,0x40e,0x33d,0x403)]('【'+_0x2e876d+'】');function _0x5589e9(_0x2f19ef,_0x454179,_0x3bfd11,_0x260b5f){return _0x4e50d3(_0x260b5f-0x5c2,_0x3bfd11,_0x3bfd11-0xeb,_0x260b5f-0x194);}_0x43834c[_0x469092(-0x15e,-0x1ec,-0x1c0,-0x153)](''+'─'[_0x5589e9(0x2ba,0x3e0,0x3f2,0x330)](-0x23e7+-0x1127+-0x47*-0xc0));const _0x33685e=_0x3423f7[_0x5589e9(0x341,0x2da,0x41e,0x385)];if(_0x26d92c[_0x469092(-0x124,-0xe3,-0x1d9,-0x162)](typeof _0x33685e,_0x26d92c[_0x5589e9(0x347,0x439,0x426,0x397)]))_0x43834c['push'](_0x33685e);else Array[_0x5589e9(0x3fe,0x4ec,0x4fc,0x487)](_0x33685e)&&_0x33685e[_0x469092(-0x186,-0x215,-0x1b5,-0x207)](_0x5f3ffd=>{function _0x1756b9(_0x29ebf5,_0x2da286,_0x1154c9,_0x23af80){return _0x5589e9(_0x29ebf5-0x159,_0x2da286-0x1cc,_0x1154c9,_0x2da286- -0x1ae);}function _0x1be0bc(_0x2ba3fa,_0x5d091f,_0x5e41cc,_0x53a7d8){return _0x5589e9(_0x2ba3fa-0xb6,_0x5d091f-0x95,_0x2ba3fa,_0x5d091f- -0x212);}if(_0x154c17[_0x1be0bc(0x200,0x1f8,0x2a2,0x1c1)]!==_0x154c17[_0x1be0bc(0x90,0xea,0x15c,0x121)]){if(_0x154c17[_0x1be0bc(0x1b5,0x1b1,0xfa,0x1e8)](_0x5f3ffd[_0x1756b9(0x26c,0x1c8,0x241,0x128)],_0x154c17[_0x1756b9(0x180,0x243,0x1d5,0x249)]))_0x43834c[_0x1756b9(0x1b7,0x255,0x2ca,0x2e7)](_0x5f3ffd[_0x1be0bc(0x150,0x146,0x20c,0x12a)]||'');else{if(_0x154c17[_0x1756b9(0x26b,0x27f,0x23a,0x337)](_0x5f3ffd[_0x1be0bc(0x17e,0x164,0x1e8,0x139)],_0x154c17[_0x1756b9(0x236,0x262,0x323,0x287)])){if(_0x154c17[_0x1be0bc(0x23a,0x1b1,0x13f,0x1b2)](_0x1756b9(0x1b1,0x1ca,0x10d,0x243),_0x1756b9(0x203,0x1ca,0x142,0x11d))){const _0x9be11c=_0x5f3ffd['image_url']?.['url']||'';if(_0x9be11c[_0x1756b9(0x277,0x2cf,0x2fd,0x25f)](_0x154c17[_0x1756b9(0x17d,0x15b,0x1ea,0x1e5)])){if(_0x154c17[_0x1756b9(0x12d,0x1d0,0x1af,0x116)]!==_0x154c17[_0x1be0bc(0xcd,0x16c,0xd2,0x1f4)]){const {id:_0x43e01f}=_0x19a6ae;if(!_0x43e01f)return;const _0x5b2e14=_0x33f375[_0x19e012]||_0x55b514;_0x310ef7[_0x1756b9(0x15b,0x1d3,0x13a,0x11f)](_0x1756b9(0x14c,0x162,0x163,0xa4)+_0x1be0bc(0x272,0x22d,0x25f,0x2ee)+_0x5b2e14+(_0x1be0bc(0xbe,0x14f,0x1c9,0x13c)+_0x1be0bc(0x21c,0x26c,0x1f6,0x308))+_0x43e01f+')');const _0x318054=_0x154c17[_0x1be0bc(0x9b,0x117,0x14b,0x7c)](_0xb2c3d0,_0x310ab2),_0x2a5f1c={};_0x2a5f1c[_0x1be0bc(0x16b,0x1d0,0x23a,0x21c)]=_0x318054,_0x2a5f1c['id']=_0x43e01f,_0x16a45f[_0x1be0bc(0x19c,0x108,0x43,0x146)](_0x29cc7d,_0x2a5f1c);}else{const _0x56b5ff=_0x9be11c[_0x1be0bc(0x238,0x230,0x282,0x23c)](/^data:([^;]+);/),_0x531625=_0x56b5ff?_0x56b5ff[-0xbac+-0x1800+-0x1*-0x23ad]:_0x154c17[_0x1be0bc(0x136,0x1ab,0x24e,0x19d)],_0xeeb274=_0x9be11c[_0x1756b9(0x1fd,0x247,0x1ac,0x22e)](',')[-0xe*0xb7+0x1*0x16ca+0x1*-0xcc7]||'',_0x525758=Math[_0x1be0bc(0xed,0xf4,0x106,0xf1)](_0x154c17[_0x1be0bc(0x13d,0x1ac,0x18b,0x13f)](_0x154c17[_0x1be0bc(0x197,0x1ac,0x25d,0x261)](_0xeeb274[_0x1756b9(0x24a,0x1e3,0x20e,0x1bc)]*(-0x12f7+0x275+-0x1085*-0x1),0x1*-0x244b+0x164f+0xe00),0x2f7+0x1e00+-0x1*0x1cf7));_0x43834c[_0x1be0bc(0x12b,0x1f1,0x1dd,0x199)](_0x1be0bc(0x1e4,0x171,0x161,0x100)+':\x20'+_0x531625+_0x1756b9(0x1b4,0x1e5,0x1b8,0x21a)+_0x525758+_0x1be0bc(0x237,0x1cf,0x22d,0x1b7));}}else{if(_0x154c17[_0x1be0bc(0x15d,0x158,0xda,0x10b)](_0x154c17[_0x1756b9(0x1b5,0x1fa,0x134,0x14f)],_0x154c17[_0x1756b9(0x266,0x225,0x251,0x1ea)])){let _0x38d573;if(_0x154c17[_0x1be0bc(0x24e,0x1b1,0x228,0x159)](typeof _0x5e2f49[_0x1756b9(0x1c2,0x17f,0x104,0x200)],_0x1be0bc(0x204,0x1f2,0x1f3,0x262))&&_0x276186[_0x1756b9(0x1d0,0x17f,0xf5,0x1b9)][_0x1be0bc(0x163,0x11d,0x1d6,0x87)]){_0x38d573=''+_0x490f4a[_0x1be0bc(0xb1,0x11b,0x102,0x194)][_0x1756b9(0xe6,0x181,0x236,0x225)];const _0x46fcb8=[];if(_0x2d5d28[_0x1756b9(0x20d,0x17f,0x1c7,0xfb)][_0x1756b9(0x1cb,0x1c8,0x15c,0x23a)])_0x46fcb8['push'](_0x1756b9(0x2ae,0x2bb,0x22a,0x26e)+_0x3fb1f2[_0x1be0bc(0x131,0x11b,0x196,0xb9)]['type']);if(_0x561617[_0x1756b9(0xf1,0x17f,0x238,0x21c)][_0x1be0bc(0x1e3,0x252,0x278,0x237)])_0x46fcb8[_0x1be0bc(0x18a,0x1f1,0x28e,0x1cf)]('代码:\x20'+_0x9a0f26['error'][_0x1be0bc(0x2d0,0x252,0x257,0x2be)]);_0x154c17[_0x1be0bc(0x1aa,0x245,0x226,0x1a4)](_0x46fcb8['length'],-0x758+0x3*-0x6bf+0x17*0x133)&&(_0x38d573+='\x20('+_0x46fcb8['join'](',\x20')+')');}else _0x38d573=''+_0x3acb24[_0x1756b9(0x2ac,0x2c4,0x237,0x2bd)](_0x51aa28[_0x1756b9(0x196,0x17f,0x125,0xf3)]);throw new _0x18c985(_0x38d573);}else _0x43834c[_0x1756b9(0x1ea,0x255,0x2fd,0x1b5)](_0x1be0bc(0x1ea,0x1d1,0x11c,0x262)+_0x9be11c+']');}}else return _0x4f11a9;}}}else _0x216214=''+_0x81cd6c[_0x1be0bc(0x2a4,0x260,0x226,0x2fb)](_0x1d4d1e[_0x1756b9(0x150,0x17f,0x143,0x189)]);});_0x43834c[_0x5589e9(0x4b4,0x386,0x411,0x403)]('');}),_0x43834c[_0x2b73fb(0x5d9,0x5c5,0x58c,0x624)]('\x0a');}if(_0x26d92c[_0x2b73fb(0x4c9,0x467,0x57d,0x486)](typeof _0x17588f,_0x26d92c[_0x2b73fb(0x47d,0x533,0x4a3,0x3f6)])&&_0x17588f!==null){if(_0x26d92c[_0x2b73fb(0x5a1,0x5ed,0x661,0x65f)](_0x26d92c[_0x4e50d3(-0x1e3,-0x215,-0x1ce,-0x15f)],_0x26d92c[_0x4e50d3(-0x1e3,-0x215,-0x245,-0x213)]))return JSON[_0x4e50d3(-0x150,-0xe5,-0x1d2,-0x120)](_0x17588f,null,0x1703*0x1+0x1dad+-0x34ae);else{const _0x189d2b={};_0x189d2b[_0x4e50d3(-0x186,-0xf0,-0x109,-0x166)]=_0x4e50d3(-0x226,-0x298,-0x22f,-0x285),_0x189d2b[_0x4e50d3(-0x23d,-0x1a0,-0x20f,-0x250)]=_0x1a6a64[_0x4e50d3(-0x226,-0x1b1,-0x233,-0x297)],_0x159485[_0x4e50d3(-0x1bf,-0x26f,-0x212,-0x1e0)](_0x189d2b);}}return String(_0x17588f);}export function getRoleLabel(_0x33cea7){const _0x8aa3f6={};function _0x1de714(_0x54b1c7,_0x37aca4,_0x17afd7,_0x562bcf){return _0x5c022e(_0x562bcf,_0x37aca4-0xe2,_0x37aca4- -0x2cf,_0x562bcf-0x1c7);}_0x8aa3f6[_0x1de714(0x19,-0x3a,-0xef,-0x1a)]=_0x7648a6(0x591,0x466,0x4e4,0x462),_0x8aa3f6[_0x1de714(-0x1c,-0x4d,0x2,-0x95)]=_0x7648a6(0x55a,0x431,0x4da,0x59a),_0x8aa3f6[_0x7648a6(0x5a2,0x592,0x553,0x4d9)]=_0x1de714(-0x36,-0x65,0x3a,-0x9b);const _0x363d80=_0x8aa3f6,_0x1da7ca={};_0x1da7ca[_0x7648a6(0x44a,0x4d2,0x4eb,0x568)]=_0x363d80[_0x1de714(0x61,-0x3a,-0x32,-0x77)],_0x1da7ca['user']='用户',_0x1da7ca[_0x1de714(-0xe0,-0xca,-0x16c,-0xf)]=_0x363d80[_0x7648a6(0x4e7,0x4bc,0x506,0x507)],_0x1da7ca['function']=_0x363d80[_0x7648a6(0x604,0x54d,0x553,0x58f)],_0x1da7ca[_0x1de714(-0xac,-0xfd,-0x15a,-0x92)]='工具';function _0x7648a6(_0x237bf3,_0x3865bf,_0x26e377,_0x2c7484){return _0x5c022e(_0x237bf3,_0x3865bf-0x105,_0x26e377-0x284,_0x2c7484-0x1c5);}const _0x534861=_0x1da7ca;return _0x534861[_0x33cea7]||_0x33cea7;}export function getCurrentLLMProfile(){const _0x50e012=extension_settings[extensionName][_0x1296c3(0x585,0x581,0x638,0x616)+'es']||{},_0x2a8aa5=extension_settings[extensionName][_0x1296c3(0x541,0x56d,0x4c3,0x53d)+_0x1296c3(0x524,0x5b9,0x4fc,0x4fc)];function _0x1296c3(_0x23656b,_0x576141,_0x258ee2,_0x39385c){return _0x5c022e(_0x258ee2,_0x576141-0x1b2,_0x23656b-0x354,_0x39385c-0xf6);}function _0x347f06(_0x70ce56,_0xc77f46,_0x2f85b1,_0x1b106d){return _0x5c022e(_0xc77f46,_0xc77f46-0xc5,_0x2f85b1- -0x31,_0x1b106d-0x46);}return _0x50e012[_0x2a8aa5]||_0x50e012[Object[_0x1296c3(0x4ff,0x4fc,0x4e2,0x588)](_0x50e012)[0x40*-0x8b+0xb7e*0x1+0x1742]]||{};}export function getCurrentTestContext(){function _0x194f7b(_0x3a9a68,_0x5ce28e,_0x14453a,_0x1d19bb){return _0x5c022e(_0x14453a,_0x5ce28e-0x13b,_0x3a9a68-0x1bc,_0x1d19bb-0xfa);}const _0x207c66=extension_settings[extensionName]['test_conte'+_0x2c169d(0x410,0x416,0x45d,0x3c0)+'s']||{},_0x1eb28a=extension_settings[extensionName][_0x194f7b(0x327,0x265,0x3df,0x388)+'st_context'+_0x194f7b(0x32c,0x35b,0x3b9,0x31d)];function _0x2c169d(_0x141cc3,_0x2345a2,_0x5606ec,_0x25143b){return _0x5c022e(_0x2345a2,_0x2345a2-0x3d,_0x25143b-0x148,_0x25143b-0x1ed);}return _0x207c66[_0x1eb28a]||_0x207c66[Object[_0x194f7b(0x367,0x375,0x2fb,0x316)](_0x207c66)[0x162*-0xd+0x47+0xc5*0x17]]||{};}export function getEffectiveConfigForRequestType(_0x514724){const _0x11ef9b=extension_settings[extensionName][_0x1adab5(0x491,0x3ba,0x41e,0x479)+_0x1adab5(0x3f6,0x4c4,0x424,0x4e1)+_0x1adab5(0x3d1,0x3db,0x415,0x45b)]||{};function _0x3a8c27(_0x52555f,_0x3558bf,_0x5d4ceb,_0x1282a1){return _0x5c022e(_0x1282a1,_0x3558bf-0x9d,_0x5d4ceb-0x318,_0x1282a1-0x1d9);}const _0x4b6fa5={};_0x4b6fa5['api_profil'+'e']='默认',_0x4b6fa5[_0x3a8c27(0x528,0x575,0x558,0x548)+'ofile']='默认';const _0x53611c=_0x11ef9b[_0x514724]||_0x4b6fa5;function _0x1adab5(_0x5a18e1,_0x40c4d7,_0x4dc590,_0x4a9be9){return _0x5c022e(_0x4a9be9,_0x40c4d7-0x1c7,_0x4dc590-0x275,_0x4a9be9-0x1be);}const _0x1cf5dc=extension_settings[extensionName][_0x1adab5(0x46f,0x489,0x4a6,0x46c)+'es']||{},_0x28f02e=extension_settings[extensionName]['test_conte'+_0x3a8c27(0x5bc,0x64b,0x590,0x623)+'s']||{},_0x4efb97=_0x53611c[_0x1adab5(0x484,0x4a2,0x41d,0x3b1)+'e']||'默认',_0x28c3b0=_0x1cf5dc[_0x4efb97]||_0x1cf5dc[Object['keys'](_0x1cf5dc)[-0x4*-0x7+0x1eab*-0x1+-0x1e8f*-0x1]]||{},_0xc78a0a=_0x53611c[_0x3a8c27(0x4ae,0x55c,0x558,0x56e)+'ofile']||'默认',_0xde0831=_0x28f02e[_0xc78a0a]||_0x28f02e[Object['keys'](_0x28f02e)[0x21*-0x97+0x1d47+0x8*-0x13a]]||{},_0x1e1ab1={};return _0x1e1ab1[_0x1adab5(0x418,0x386,0x433,0x3f6)]=_0x28c3b0[_0x3a8c27(0x4a6,0x561,0x4d6,0x41d)]||'',_0x1e1ab1[_0x3a8c27(0x463,0x533,0x4fd,0x547)]=_0x28c3b0['api_key']||'',_0x1e1ab1[_0x1adab5(0x472,0x54d,0x52f,0x562)]=_0x28c3b0[_0x3a8c27(0x634,0x641,0x5d2,0x50f)]||'',_0x1e1ab1[_0x1adab5(0x43e,0x438,0x479,0x4bc)+'e']=_0x28c3b0[_0x1adab5(0x3f8,0x3f5,0x479,0x42d)+'e']??-0x1e2*0x10+-0x1286*0x1+0x30a6+0.7,_0x1e1ab1[_0x3a8c27(0x458,0x4ab,0x4df,0x516)]=_0x28c3b0[_0x1adab5(0x486,0x458,0x43c,0x3b4)]??0x1*0x105b+-0x4f*0x1f+-0x6c9,_0x1e1ab1['max_tokens']=_0x28c3b0['max_tokens']??0x131a+0x213a+-0x3254*0x1,_0x1e1ab1[_0x1adab5(0x4bc,0x50c,0x4e4,0x43b)]=_0x28c3b0['stream']??![],_0x1e1ab1[_0x1adab5(0x40c,0x384,0x422,0x466)+'xy']=_0x28c3b0[_0x3a8c27(0x4c5,0x528,0x4c5,0x4c7)+'xy']??![],_0x1e1ab1[_0x3a8c27(0x571,0x5e6,0x5d0,0x64c)]=_0xde0831,_0x1e1ab1;}export function buildPromptForRequestType(_0x47e86a,_0x17e6d6=''){function _0x34b9ae(_0x12322b,_0x5135f7,_0x4e849d,_0xdb75d0){return _0x5c022e(_0x4e849d,_0x5135f7-0x5,_0x12322b- -0x100,_0xdb75d0-0x1a7);}const _0x20916c={'NpTDz':function(_0x12b77d,_0x10f640){return _0x12b77d===_0x10f640;},'OkDxR':function(_0x5223fe,_0x11c1c,_0x336d9f){return _0x5223fe(_0x11c1c,_0x336d9f);},'YGWyC':_0x34b9ae(0x6c,0x126,0xa7,0xca),'umiHx':'VrDfA','aaCEC':function(_0x4eaf45,_0x46a98b){return _0x4eaf45===_0x46a98b;},'igcIJ':function(_0xb2b68e,_0x9afc06){return _0xb2b68e!==_0x9afc06;},'jWbqg':_0x2cba2c(0x3d5,0x3b9,0x3bb,0x374),'CdMnk':_0x2cba2c(0x4b5,0x464,0x4d0,0x515),'NCisr':function(_0x4f830f,_0x44d134){return _0x4f830f!==_0x44d134;},'LQDSr':'nenFt','PrRWT':_0x2cba2c(0x464,0x3c6,0x3d0,0x4fd),'pfGAe':'dOPie','suwqh':_0x2cba2c(0x406,0x412,0x461,0x48d),'NGPYu':_0x2cba2c(0x4b0,0x52c,0x43a,0x4ed),'WmEoH':function(_0x4ba35b,_0x412f7f){return _0x4ba35b(_0x412f7f);}},_0x3475a9=extension_settings[extensionName][_0x34b9ae(0xa9,0x154,0x127,0x34)+_0x34b9ae(0xaf,0x10,0x127,0xe9)+_0x2cba2c(0x3a1,0x363,0x353,0x3cf)]||{},_0x15f345={};_0x15f345[_0x34b9ae(0x140,0x15e,0x114,0xd0)+_0x34b9ae(0x16e,0xf7,0x100,0x21d)]='默认';const _0x270db9=_0x3475a9[_0x47e86a]||_0x15f345,_0x17a5ec=_0x270db9[_0x34b9ae(0x140,0x180,0x165,0x1a3)+_0x2cba2c(0x46f,0x4a7,0x3af,0x4dd)]||'默认',_0x5d67ec=extension_settings[extensionName][_0x2cba2c(0x3ce,0x476,0x3e0,0x3fd)+'xt_profile'+'s']||{};function _0x2cba2c(_0x1c2103,_0x268248,_0x8ae722,_0x1fdd35){return _0x5c022e(_0x8ae722,_0x268248-0xa7,_0x1c2103-0x201,_0x1fdd35-0x13d);}const _0x1cdd23=_0x5d67ec[_0x17a5ec]||_0x5d67ec[Object[_0x2cba2c(0x3ac,0x3de,0x3d4,0x305)](_0x5d67ec)[-0x98b*-0x2+-0x3*-0x362+0x1d3c*-0x1]]||{},_0x15da72=[];if(_0x1cdd23[_0x2cba2c(0x378,0x3af,0x2e3,0x390)]&&Array['isArray'](_0x1cdd23['entries']))_0x1cdd23[_0x34b9ae(0x77,-0x30,0x61,0x58)]['forEach'](_0x3d6292=>{function _0x18afb0(_0x21cfb3,_0x249af2,_0x1c3436,_0x40c674){return _0x2cba2c(_0x249af2- -0x1ea,_0x249af2-0x14c,_0x21cfb3,_0x40c674-0x11f);}function _0xc364f7(_0x88cce7,_0x544b26,_0x4bb8de,_0x5ab096){return _0x34b9ae(_0x88cce7-0x358,_0x544b26-0x169,_0x4bb8de,_0x5ab096-0x127);}if(_0x20916c[_0x18afb0(0x15e,0x1ce,0x236,0x1cf)](_0x20916c[_0xc364f7(0x4e2,0x521,0x427,0x4f9)],_0x20916c['umiHx'])){const _0x202b1b={'rgkmO':function(_0x2cc4d2,_0x428572){return _0x2cc4d2===_0x428572;},'NwEqX':function(_0x3d102b,_0xd480bc){return _0x20916c['NpTDz'](_0x3d102b,_0xd480bc);},'ySduM':_0xc364f7(0x45b,0x3d6,0x3ad,0x488),'DZpnC':function(_0x53736a,_0x328fd7,_0x47f007){function _0x5bc423(_0x5e6440,_0x1db577,_0x267913,_0x525740){return _0x18afb0(_0x1db577,_0x525740- -0x41c,_0x267913-0x9e,_0x525740-0x1db);}return _0x20916c[_0x5bc423(-0x210,-0x2a9,-0x247,-0x1e8)](_0x53736a,_0x328fd7,_0x47f007);},'BrOgU':_0xc364f7(0x50c,0x54d,0x45f,0x4be)};_0x49d101[_0x18afb0(0x1dc,0x18e,0x1bc,0x232)][_0x18afb0(0x2e7,0x25b,0x31f,0x268)](_0x3ef841=>{function _0x573f27(_0x166f08,_0x3341b,_0x52a122,_0x59dfe8){return _0xc364f7(_0x166f08- -0x677,_0x3341b-0x1e3,_0x3341b,_0x59dfe8-0xc3);}if(!_0x3ef841[_0x83e56a(0x504,0x532,0x404,0x478)])return;if(!_0x3ef841[_0x573f27(-0x231,-0x2ed,-0x25b,-0x212)]||_0x202b1b[_0x83e56a(0x508,0x4db,0x4c4,0x442)](_0x3ef841[_0x83e56a(0x4ac,0x3f1,0x44d,0x46e)][_0x83e56a(0x438,0x4c6,0x520,0x49c)](),''))return;if(_0x202b1b['NwEqX'](_0x3ef841[_0x83e56a(0x379,0x3e1,0x430,0x41d)+'e'],_0x202b1b[_0x83e56a(0x511,0x4e2,0x42e,0x48d)])){if(!_0x244e2f||!_0x202b1b[_0x573f27(-0x156,-0x107,-0x125,-0xe2)](_0x3e00c6,_0x3ef841[_0x573f27(-0x1a4,-0xfe,-0x173,-0x212)+'ds'],_0x3bbfbd))return;}function _0x83e56a(_0x3094b7,_0x3308d8,_0x27d496,_0xfdf8be){return _0xc364f7(_0xfdf8be-0x28,_0x3308d8-0x148,_0x3094b7,_0xfdf8be-0x89);}const _0x12eac8={};_0x12eac8[_0x573f27(-0x17a,-0x1ee,-0x160,-0x1b7)]=_0x3ef841['role']||_0x202b1b[_0x573f27(-0x21d,-0x1a4,-0x19a,-0x22c)],_0x12eac8[_0x573f27(-0x231,-0x17d,-0x293,-0x16c)]=_0x3ef841[_0x573f27(-0x231,-0x196,-0x232,-0x1cd)],_0x5b118b[_0x83e56a(0x56a,0x450,0x495,0x4ec)](_0x12eac8);});}else{if(!_0x3d6292[_0x18afb0(0x24f,0x20f,0x270,0x1d4)])return;if(!_0x3d6292[_0x18afb0(0x28b,0x205,0x293,0x27d)]||_0x20916c[_0xc364f7(0x40f,0x38f,0x35c,0x498)](_0x3d6292['content']['trim'](),''))return;if(_0x20916c[_0x18afb0(0x338,0x2b3,0x25b,0x311)](_0x3d6292['triggerMod'+'e'],'trigger')){if(_0x20916c[_0x18afb0(0x26f,0x2a4,0x1e8,0x2a9)](_0x20916c[_0xc364f7(0x4fc,0x5a4,0x51e,0x452)],_0xc364f7(0x42c,0x3e8,0x3a2,0x393)))_0x3aa641+=_0x387399,_0x8f792a&&_0x562019(_0x17aa2a);else{if(!_0x17e6d6||!checkTriggerWords(_0x3d6292[_0xc364f7(0x4d3,0x42e,0x4d7,0x50f)+'ds'],_0x17e6d6))return;}}const _0x106f7e={};_0x106f7e['role']=_0x3d6292[_0xc364f7(0x4fd,0x599,0x4d5,0x575)]||_0x20916c[_0xc364f7(0x4e0,0x4e9,0x52c,0x52f)],_0x106f7e['content']=_0x3d6292['content'],_0x15da72['push'](_0x106f7e);}});else _0x1cdd23['history']&&Array[_0x34b9ae(0x1f0,0x287,0x1ef,0x292)](_0x1cdd23[_0x34b9ae(0x19d,0x264,0x260,0x12e)])&&(_0x20916c[_0x34b9ae(0xb7,0xc4,0xfa,0xb7)](_0x34b9ae(0x1af,0x1fa,0x1e7,0x251),_0x20916c['NGPYu'])?_0x1cdd23[_0x2cba2c(0x49e,0x416,0x43e,0x4a0)][_0x2cba2c(0x445,0x3e1,0x4e5,0x403)](_0x1bc837=>{function _0x2ffb66(_0x2f539b,_0x20400f,_0x4a5a2b,_0x469adb){return _0x2cba2c(_0x4a5a2b- -0x61c,_0x20400f-0x18b,_0x2f539b,_0x469adb-0xbc);}function _0x4209ed(_0x273210,_0x48af08,_0x17548e,_0x4d8c50){return _0x34b9ae(_0x48af08-0x16,_0x48af08-0x18,_0x273210,_0x4d8c50-0x78);}if(_0x20916c[_0x2ffb66(-0x2e4,-0x31b,-0x25c,-0x315)](_0x20916c[_0x2ffb66(-0x1f1,-0x13b,-0x1b6,-0x172)],_0x4209ed(0x128,0xf6,0xb7,0x185))){const _0x4569d2=_0x2d2740[_0x4209ed(0x109,0x137,0x1e7,0x83)](_0x58f7a0,arguments);return _0x4e68ab=null,_0x4569d2;}else{if(_0x1bc837['user']&&_0x1bc837[_0x2ffb66(-0x1c7,-0x214,-0x167,-0x112)]['trim']()!==''){if(_0x20916c['igcIJ'](_0x20916c['PrRWT'],_0x20916c[_0x2ffb66(-0x271,-0x1bf,-0x1be,-0x1ff)])){const _0x464f71={};_0x464f71['role']=_0x20916c[_0x4209ed(0x105,0x19e,0x1c1,0xf1)],_0x464f71['content']=_0x1bc837[_0x4209ed(0x198,0x1ca,0x257,0x1c8)],_0x15da72['push'](_0x464f71);}else return!!_0x12b71a;}if(_0x1bc837[_0x4209ed(0x93,0x11b,0xbc,0xb1)]&&_0x1bc837[_0x4209ed(0x128,0x11b,0xa9,0x1b4)]['trim']()!==''){const _0x2e2eef={};_0x2e2eef['role']=_0x20916c[_0x2ffb66(-0x14a,-0x1ce,-0x13a,-0x1d8)],_0x2e2eef[_0x4209ed(0x151,0x104,0x13c,0x123)]=_0x1bc837[_0x4209ed(0xad,0x11b,0x14b,0x1e1)],_0x15da72[_0x4209ed(0x168,0x182,0x194,0x105)](_0x2e2eef);}}}):_0x8749fd[_0x2cba2c(0x46d,0x3a7,0x3d7,0x400)](_0x27b660[_0x2cba2c(0x3c2,0x3ff,0x3c7,0x440)]||''));const _0x1f502c=mergeAdjacentMessages(_0x15da72),_0x354d15=_0x20916c[_0x2cba2c(0x4f3,0x584,0x4a5,0x4ec)](processRollPlaceholders,_0x1f502c);return _0x354d15;}function _0x3558(){const _0x5df9eb=['yMHWteS','ntC3odbiDur5vMG','DxnLCG','nLDZDerpuG','s2PRwMS','AxnrAuK','y29UDgv4Da','ywjVCNrLzc4','Bw9KzwW','v2DVr2e','y2TqAMW','rwHsqKS','5OIwie1VzgvSioACQUMfJq','C3rFy2HHDhu4xW','AePYwfy','vM90wMK','uev6rfy','y2HHCL9KzxnPzW','y3vZDg9Tx3vYBa','Dg9tDhjPBMC','teXnigv4zwn1Da','DwnRq3O','nZK4u0vWzePP','rfPWBKm','vuXdDw0','Bgjou2i','uefoAxG','y29Kzq','zeTtB1q','ruHmAuC','6k+35RgcieLeoIa','yxbWBgLJyxrPBW','57g75z6loIa','v1jIBuC','EMHdExi','C2LNBMfS','ywrKvgfZAW','z1jju1a','z2PVyLe','tK5Lzeq','yMDhDNC','C3rYAw5NAwz5','mta0mfrjvhrpwa','teXnoIdLPjBPG6JOR7FMSyi','B21WBgv0Aw9UCW','C2v0','zNrtEuS','C3v3CwG','DfHcywu','cI0Tls0TieXmtq','rv9srvnqt05trq','qvbjifvstcWGqq','C3rHCNrZv2L0Aa','rdOG','pt09pt0GteXnia','sK9kueS','AM9PBG','sxf4sui','CMvHza','5PAT44cbBwf4x3rVA2u','rhDcA1C','qunZDvy','AxnbCNjHEq','uLvotKLorW','v21fB0G','r3DQBeC','CMvZDwX0','wg5pvve','s0HMrLy','yM5Pww8','ALPpr0O','y3vYCMvUDf90zq','CxvmsvK','vLjtzum','Aw1Hz2vFz2vU','CM91BMq','x3bYB2zPBgu','BMfTzq','sMHXENa','y3vZDg9T','zsbYzxf1zxn0ia','rhDOse4','zKHctNC','zw50CMLLCW','teXnx0vyrunvva','C3qTy2HHDhu4oG','ywjVCNq','Euvhvgu','yM9KEq','zhHowe0','BKDLswq','D3L6quy','q29UDgvUDc1uEq','zxrPB25FC291CG','rLHcD1m','zw1PDa','rxv6u0i','t2jOzwm','nxWZFdr8mhWYFa','BNmG6k6+572U6l+h5Bcp44cb5OIwia','odu0mZmYz2XkDej6','5Rwb5BYp6kEJ5P6q6k2M5zgkoG','l2DLBMvYyxrL','DKLMyxC','Aw9UoIaIqMvHCG','BxDivuS','qwP3v20','s3DuBeG','Cwjmsuy','qLvkreu','BNjxuhu','qK1tB3O','uuLIEfi','tw9KzwWG5PYQ6ywn572U44cc','zxjYB3i','EfPjDKG','BwvZC2fNzq','CMvWzwf0','mhW0Fdj8mxWZ','BfDWD2i','wwLKDNe','DhjPz2DLCK1Vza','sKTPELu','vwHPEgi','zMLNCW','q3veExq','ue9tva','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','teXnoIa','DKDnBfy','5Q2J5zYO5Ase55cgia','qwjVCNrfCNjVCG','yxbPx3bYB2zPBa','BgXTx3jLCxvLCW','Dw5RBM93BG','A2v5CW','6BUy6k6K6k+35Rgc5BYa5AElid09pq','yNLWyxnZx3bYBW','zwHvC3q','Df90ExbLx2nVBG','iowBNUwKJsaTls0Tlq','s29wDLC','odu4odG5mKTbvg1ptq','vwTHANa','BfvctK4','vMX5qLu','q25NyMC','tNburhO','t2Hhvw0','mZyXmtaWnxn0t2jPvW','BwvZC2fNzxm','A1vQz0S','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','6kEs6iMYl+ACJEIJHEwXLEEKUG','yxbPx3vYBa','tKnPC3i','l3yXlW','Dgv4Da','CMDRBu8','DxbKyxrLu3rHDa','Aw5JBhvKzxm','sK92AM4','Dvfyr1e','Dg9Wx3a','Bwf4x3rVA2vUCW','DgfNx21VzgLMEq','5O+q56s66k+n6i635y+w6k+35RgcicHj','zgf0ytOG','CgfYC2u','DgvZDf9JB250zq','zw5KC1DPDgG','qvbjioI/NUAoPEMxRUMIMooaGG','Bv9WCM9MAwXL','z3rAuMy','Dg9VBa','BhDLuee','zwDywMu','qMvHCMvYia','wNnKCei','oIbbueKGvvjmla','yxvIBhy','Bgv0Aw9UCW','u29Yt1m','EeLNzLe','kcGOlISPkYKRkq','nZiWswjVAuPL','wM1uAve','DhLWzq','BMvUrNq','BvzSvvy','zhbwsuC','teXn','5lUJ56cboG','yxbPx2TLEq','DM1gvwC','DgX4rfK','z2v0','tezks28','Bg9N','vgfN5l+U5Ps5','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','y3vYCMvUDf9SBa','y29UDgvUDa','57g75z6loG','zNrwtgm','B3j0zwq','ioIUVUE9RUI/H+wWJ+oaGEAiLIbbua','EKTyCxG','ievYCM9YoG','6k+35Rgc5A6m5OIqid09pt09','5AEl5PAW6k+35Rgc44cc','vu9UANe','zw5HyMXLza','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','BgvUz3rO','DhjHBNnSyxrPBW','lcdNUQyG','ueKGs2v5lcdMIjyG','sNncuMW','EfLXDLm','CMHrzLu','EfviDLu','qNjpz1u','DhjPz2DLCG','DgvTCgvYyxr1CG','yxnZAxn0yw50','uKPdywO','D2zTExu','zLD1EhO','l2nOyxqVy29TCa','DhLqC1m','shLsuey','q3HsBum','EvnKDu0','5Q2J5PAh5zU+54Mh55sF5OIq','twrPDxi','Cenlr0S','uxHPvu8','u3PrDM8','BKzmveK','CvL1Evu','q0foq0vmteve','tMH0r0W','sevWtvO','mtfzwLbMsNK','ANnVBG','tgLhzfG','BhvKzv9OzwfKzq','DhjPBq','t2TeEfi','y2HHCL9KAxnWBa','5lI656M677Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ','wgTywM8','yxbWBhK','uezmqLO','B0TKDNa','qKX6wLG','CvnuC2K','BxLwrwG','t3Pov3G','z2v0uMvHzgvY','BI9QC29U','twLNyLa','uKX4rwC','yKPzueO','6kEs6iMYl+ACJEIJHEIUVUIUOq','l3yX','yNvMzMvYktO','ntC5mdzmAwvVAvu','BgXTx3bYB2zPBa','CfPtvNi','zgvSzxrL','5RAioIa','BuP6u1a','y29TCgXLDgvuyq','AKv0u1e','AvLjDu8','y2HHDf9JB21WBa','iefqssblzxKSia','whfkquG','uejpvgq','w0Xmtv0G5lU75yQH5BEY5y+w','z2PitgO','tNf2ww0','y29UDgv4Df9WCG','DgvZDe1Vzgu','zgvSDge','uMvXDwvZDcbHyG','zM9YrwfJAa','C3rHDhvZ','vNfUweK','rxPOyvi','yNrxwNC','CMvWBgfJzq','s0jD','ChjVBxb0','8j+tTYbB5zU+54Mh6zo+5O6LoIa','D2j2rNG','A2z0tMi','AfD0Bue','DKHdqMi','y29UC3rYDwn0BW','s0ThqwW','qxv0Ag9YAxPHDa','C3vJy2vZCW','y3jvEMe','quNLIQNMIyS','t2vWrNm','6k+35Rgc5BYa5AElicG','u2TQwMO','u2HVCNK','5lUJ56cboIa','zKHIuLi','Cgzhqwu','C3bSAxq','ru9xDvq','57o757UF5O+q56s66k+n','mZu2oeH0teD1ua','AhjHuum','Au9NEgS','Aw5MBW','tffeu3i','zgvJB2rL','C3LZDgvT','zMjcBLO','wNH0CwG','5yE95PwW6lcd55sO','y3vZDg9Tx2LUyW','ChvZAa','B2jQzwn0','B2zPBgu','C3rYzwfT','tKLyy2K','l2fWAs9IywnRzq','Aw9U','CxzOCLy','DxrMltG','rMjMyvG','veTHBNm','D2fYBG','EhrFChjVzMLSzq','wuPgtxq','D0Hjq3u','DhjPz2DLCLDVCG','D2fYBMLUzW','DKf0vem','rNHAEeG','77Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ5PAT44cb','Dg9Rzw4','5y+r6ycb55QeifbYB21WDa','wMHPAge','zxiG','ssdOV57MJQxPL67POPJJGii','C3rYAw5N','DNLZzvu','6k+35Rgc5AsX6lsLoIa','q2rnBMS','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','wuDxEum','A2zdBwq','C2vHCMnO','AwDJsuO','y2HVAwnLCW','wM1nAfi','uhD1yLa','C2XPy2u','teXnioIVT+AXGUw3SUs4REATOUoaGG','AuP0se0','zwPztKO','BeTdtg0','ENjZD3e','uxD4vNm','CfjLqve','BMrZl2nOyxqTyW','teXniev4zwn1Da','yu96Bwe','ywfdrum','AgLZDg9YEq','6k+35Rgc6zsz6k+VoIa','56In5yczlI4U','sNfzs0e','DwzQsee','CxbUBhy','EuzdsKu','ALDICwC','CM9Szq','txniu1m','zgf0ytOGw0rptG','ioAuTUwiSa','EeHAqLm','DvrvvNm','Bwf0y2G','uNDyELu','mty2mtHhBK9SDMy','rvLnr0W','sfjAwLu','zgf0ytO','vvzcBfe'];_0x3558=function(){return _0x5df9eb;};return _0x3558();}const _0x41e4c5={};_0x41e4c5[_0x5c022e(0x1b6,0x165,0x16e,0xe4)]=_0x548035(0x5d9,0x52f,0x46b,0x48b),_0x41e4c5[_0x5c022e(0x212,0x2c2,0x2c3,0x354)+'n']=_0x5c022e(0x2f1,0x180,0x22d,0x189),_0x41e4c5[_0x548035(0x516,0x53f,0x53f,0x597)+'ay']=_0x5c022e(0x15c,0x135,0x1bd,0x14c),_0x41e4c5['char_modif'+'y']='角色/服装修改',_0x41e4c5[_0x548035(0x4e7,0x51c,0x55a,0x5a5)+'n']='翻译',_0x41e4c5[_0x5c022e(0x249,0x290,0x1c9,0x220)]=_0x548035(0x528,0x50c,0x48b,0x57a);function _0x2d4d(_0x449fd7,_0x1241a9){_0x449fd7=_0x449fd7-(0x100*0x2+0x1*0x913+-0xa00);const _0x3fd27f=_0x3558();let _0xeafb7=_0x3fd27f[_0x449fd7];if(_0x2d4d['RpAufZ']===undefined){var _0x1749ca=function(_0x1f7c4c){const _0x5bb9fd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3a7d2d='',_0x16e750='',_0x46ef0e=_0x3a7d2d+_0x1749ca;for(let _0x52bf71=0x1f*-0x10d+-0x3*-0xa53+0x19a*0x1,_0x3e3ef3,_0x21c91e,_0x55c1eb=0x1*0x2216+-0x52e+-0xc8*0x25;_0x21c91e=_0x1f7c4c['charAt'](_0x55c1eb++);~_0x21c91e&&(_0x3e3ef3=_0x52bf71%(0x26ec*-0x1+-0x8*-0x27d+0x57*0x38)?_0x3e3ef3*(-0x9de+-0x26*-0x9d+-0xd30)+_0x21c91e:_0x21c91e,_0x52bf71++%(-0x101*0x16+-0x36+0x1650))?_0x3a7d2d+=_0x46ef0e['charCodeAt'](_0x55c1eb+(0x1d80+-0x114d+0xc29*-0x1))-(0x525*0x5+-0x214+0x179b*-0x1)!==0x117d+-0x5a8+-0xbd5?String['fromCharCode'](0x257c+-0x10bb+-0x13c2&_0x3e3ef3>>(-(-0x111c+0x1*-0x26ca+0x6fd*0x8)*_0x52bf71&0x10a8+0x1bd*-0x13+-0x1*-0x1065)):_0x52bf71:-0x329+-0x11c1+-0x1*-0x14ea){_0x21c91e=_0x5bb9fd['indexOf'](_0x21c91e);}for(let _0x1c76df=-0x6*-0x449+0x16ee+-0x30a4,_0x154554=_0x3a7d2d['length'];_0x1c76df<_0x154554;_0x1c76df++){_0x16e750+='%'+('00'+_0x3a7d2d['charCodeAt'](_0x1c76df)['toString'](-0x17bd+-0x1d3*0xf+0x332a))['slice'](-(0xb5f+0x7*0xd9+0x8a6*-0x2));}return decodeURIComponent(_0x16e750);};_0x2d4d['yLNwfW']=_0x1749ca,_0x2d4d['GorzgJ']={},_0x2d4d['RpAufZ']=!![];}const _0x123988=_0x3fd27f[-0x441+-0xc*-0x1de+0x60d*-0x3],_0x331707=_0x449fd7+_0x123988,_0x2c3692=_0x2d4d['GorzgJ'][_0x331707];if(!_0x2c3692){const _0x28ad12=function(_0x215718){this['ZUqzcJ']=_0x215718,this['vaGmPp']=[0x1107+-0x2025+0xf1f,0x1*-0x9a2+0x654+0x34e,0x1*0x511+0x1*0x92f+-0xe40],this['HCgPSQ']=function(){return'newState';},this['TieVFV']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['fmTWQy']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x28ad12['prototype']['rHjNZH']=function(){const _0x24f03c=new RegExp(this['TieVFV']+this['fmTWQy']),_0x4e7c38=_0x24f03c['test'](this['HCgPSQ']['toString']())?--this['vaGmPp'][0xd*-0x12a+-0x2*-0xe5+0x3*0x473]:--this['vaGmPp'][0xc9+0x1f28+-0x11*0x1e1];return this['gfaHmy'](_0x4e7c38);},_0x28ad12['prototype']['gfaHmy']=function(_0x4ab855){if(!Boolean(~_0x4ab855))return _0x4ab855;return this['pKunCd'](this['ZUqzcJ']);},_0x28ad12['prototype']['pKunCd']=function(_0x3de210){for(let _0xab2690=0x2*0x84f+0x92f*-0x2+-0x38*-0x8,_0x3fdd40=this['vaGmPp']['length'];_0xab2690<_0x3fdd40;_0xab2690++){this['vaGmPp']['push'](Math['round'](Math['random']())),_0x3fdd40=this['vaGmPp']['length'];}return _0x3de210(this['vaGmPp'][0x36d*-0x4+0x2*-0x1319+-0xe*-0x3b5]);},new _0x28ad12(_0x2d4d)['rHjNZH'](),_0xeafb7=_0x2d4d['yLNwfW'](_0xeafb7),_0x2d4d['GorzgJ'][_0x331707]=_0xeafb7;}else _0xeafb7=_0x2c3692;return _0xeafb7;}const REQUEST_TYPE_NAMES=_0x41e4c5;export async function executeTypedLLMRequest(_0x5465ae,_0xc44e9b,_0x54fe31,_0x1568dc=null){function _0x5ac0bf(_0x361ccc,_0x20a715,_0x4e61ef,_0x113981){return _0x5c022e(_0x4e61ef,_0x20a715-0x13e,_0x113981- -0x33,_0x113981-0x104);}const _0x2e8a37={'ZsdpB':function(_0x31c3b0){return _0x31c3b0();},'Mdiur':function(_0xd216b4,_0x53aa5b){return _0xd216b4(_0x53aa5b);},'JKizU':_0x5b3a91(0x22,-0x1,0x22,-0x17),'PEzDV':function(_0x51b405,_0x226bc4){return _0x51b405>_0x226bc4;},'VqnXI':'object','YHcoq':function(_0x537318,_0x1e83fd){return _0x537318>_0x1e83fd;},'dKSoT':_0x5b3a91(0xc5,0xe9,0x17c,0x14e)+_0x5b3a91(0x1d,-0x33,0x93,0xcd),'KKGAl':function(_0x51ce7a,_0xd82f15){return _0x51ce7a??_0xd82f15;},'tyPsS':_0x5ac0bf(0x127,0x21e,0x178,0x167),'bgGvw':_0x5ac0bf(0x20e,0x20f,0x17c,0x174),'JqYKA':_0x5b3a91(-0x13,-0x6,-0x71,0x80)+'始新请求。','btLYA':function(_0x256035,_0x16ecd7){return _0x256035||_0x16ecd7;},'bniYo':function(_0x32cbcc,_0x4c161e){return _0x32cbcc===_0x4c161e;},'uckCz':_0x5b3a91(0x8,-0xaa,-0x5e,0x50),'MigbP':function(_0x5ebade){return _0x5ebade();},'NIXci':function(_0x1bafe3,_0x2e837f){return _0x1bafe3(_0x2e837f);},'ckPjl':function(_0x272801,_0x86958b){return _0x272801(_0x86958b);},'xZIvH':function(_0x5e278f,_0x15a794){return _0x5e278f(_0x15a794);},'hraQC':function(_0xfab7f2,_0x56c9b4){return _0xfab7f2||_0x56c9b4;},'nFLTI':_0x5b3a91(-0x4c,0x1f,-0xad,0x6d),'PFLBZ':function(_0x4992f8,_0x29dc34){return _0x4992f8+_0x29dc34;},'BRxEU':function(_0x38023a,_0xf60287){return _0x38023a(_0xf60287);},'cJgND':_0x5b3a91(-0x99,-0x6e,-0x159,-0x23),'LiGdX':function(_0x4f1258,_0x36b257){return _0x4f1258===_0x36b257;},'vHCBb':function(_0x98c550,_0x4e8830){return _0x98c550!==_0x4e8830;},'bFGwr':'XTWbg','VRSeC':'NRFZr','BLzZX':function(_0x126474,_0x2206fa){return _0x126474>_0x2206fa;},'zKXqx':_0x5ac0bf(0x370,0x277,0x200,0x2ad),'HyRPF':_0x5ac0bf(0x1d8,0x242,0x195,0x1f2),'KHfFV':_0x5ac0bf(0x2c8,0x20c,0x2a7,0x2a0),'vBDLq':'tYmDG','SkjZj':_0x5b3a91(-0x1d,0x50,-0x94,0x28),'iYIuO':function(_0x2934eb,_0xc7c894){return _0x2934eb===_0xc7c894;},'yEGTe':_0x5ac0bf(0x1b3,0x1ab,0x277,0x21b),'KoVvW':_0x5ac0bf(0x23a,0x1a8,0x1ef,0x208),'ULCum':_0x5ac0bf(0x267,0x1f6,0x248,0x241),'ZmMhR':function(_0x1a65ec,_0x476222){return _0x1a65ec!==_0x476222;},'RJCaj':'xUHvU','xYqvS':_0x5b3a91(0x9b,0x109,0x77,0x119)+'E]','nGeId':_0x5b3a91(-0x41,-0x77,-0xe4,-0xde),'Obhec':_0x5b3a91(-0xe,-0x5d,0x36,-0x7b),'aOzma':_0x5b3a91(0xaa,0x25,0x1f,0xf0),'OepFs':_0x5b3a91(-0x79,-0x66,0x3b,-0xb6),'uQXGQ':_0x5b3a91(-0xa5,-0x6b,-0xba,-0x61),'fbBnZ':_0x5ac0bf(0x2eb,0x1e9,0x32b,0x2a6),'SzQvo':function(_0x189903,_0xaa6277){return _0x189903(_0xaa6277);},'xAtIG':_0x5b3a91(-0x83,-0x129,-0xb4,-0x46),'EuzSB':function(_0xb0b7db,_0x947ba5){return _0xb0b7db===_0x947ba5;},'qWHyH':_0x5ac0bf(0x291,0x2a5,0x22c,0x288),'DsOmV':_0x5ac0bf(0x1e6,0x2e6,0x239,0x284),'VlyBU':_0x5b3a91(0x7d,0x49,-0x46,0x114)+_0x5ac0bf(0x144,0x235,0x279,0x1fc),'xIgfQ':'未收到有效回复。','CxRmC':_0x5b3a91(-0x78,-0x122,-0xd0,0x2f),'LyBYM':_0x5b3a91(0x41,0x19,0xd0,-0x3e),'gjobQ':function(_0x3d4925,_0x10d917){return _0x3d4925(_0x10d917);},'CuDyt':function(_0x2cada6,_0x475537){return _0x2cada6(_0x475537);},'HEpMZ':function(_0x5aa264,_0x2dd32e){return _0x5aa264!==_0x2dd32e;},'wuhCw':'ejYNJ','yBRkB':'yqTmY','qpnlv':_0x5b3a91(-0x47,-0x26,0x7b,0x1c),'mJzSP':'4|3|1|0|2','lUBNN':_0x5b3a91(0x37,0x13,0xcb,-0xf)+'orted','DwhHN':function(_0x43561a,_0x110bcd){return _0x43561a(_0x110bcd);},'LFJKo':_0x5b3a91(-0x56,-0x111,0x41,-0x4)},{prompt:_0x4b1ac5,id:_0xd26f42}=_0x5465ae;if(_0x2e8a37['btLYA'](!_0xd26f42,!_0x4b1ac5))return;currentLLMRequestController&&(_0x2e8a37['bniYo'](_0x2e8a37['uckCz'],_0x2e8a37[_0x5b3a91(0xbb,0x139,0xf8,0x113)])?(currentLLMRequestController['abort'](),toastr[_0x5b3a91(0x58,-0x5c,0xf,0x93)](_0x2e8a37['JqYKA'])):_0x2e8a37[_0x5ac0bf(0x24a,0x1b0,0x22e,0x1a3)](_0x574443));currentLLMRequestController=new AbortController();const _0x113627=currentLLMRequestController[_0x5b3a91(0xc9,0x135,0x186,0x10e)],_0x2f65fe=currentLLMRequestController,_0x4c05f9=REQUEST_TYPE_NAMES[_0xc44e9b]||_0xc44e9b,_0x478df7={};_0x478df7[_0x5ac0bf(0x13f,0x1d3,0x203,0x13e)]=_0x5ac0bf(0x154,0xf9,0x184,0x171)+_0x4c05f9;function _0x5b3a91(_0x5cf5f8,_0x143a71,_0xb6c934,_0x298e91){return _0x548035(_0x5cf5f8-0x9,_0x5cf5f8- -0x52d,_0x143a71,_0x298e91-0x15);}_0x478df7[_0x5ac0bf(0x16d,0x1e0,0x1d5,0x1ac)]=TaskType[_0x5ac0bf(0x1f7,0x1dc,0x22c,0x1b0)],_0x478df7[_0x5ac0bf(0x159,0x20f,0x225,0x218)]=_0xd26f42;const _0x9f90c0=taskQueue[_0x5ac0bf(0x1ea,0x358,0x32a,0x2a3)](_0x478df7);llmTaskControllers[_0x5ac0bf(0x31d,0x2a9,0x1fd,0x2ac)](_0x9f90c0,currentLLMRequestController),taskQueue['updateStat'+'us'](_0x9f90c0,TaskStatus['RUNNING']),_0x2e8a37[_0x5b3a91(-0x36,-0x61,-0xf0,-0x18)](startFabLoading);let _0x4fccb3=![];_0x2e8a37[_0x5ac0bf(0x157,0x29f,0x240,0x1f7)](clearLog),_0x2e8a37[_0x5b3a91(0x64,0x7b,0x72,0xb0)](addLog,_0x5b3a91(0xdc,0xee,0x148,0x5a)+_0x5b3a91(0x4c,0x61,-0x59,0xf0)+_0x4c05f9+')\x20====='),_0x2e8a37['NIXci'](addLog,_0x5b3a91(0xc4,0x141,0x20,0xc5)+_0xd26f42),_0x2e8a37[_0x5ac0bf(0x264,0x24c,0x248,0x289)](addLog,_0x5b3a91(0x75,0x13,-0xf,0xc7)+':'),_0x2e8a37[_0x5ac0bf(0x2c3,0x33a,0x305,0x289)](addLog,_0x2e8a37[_0x5ac0bf(0x177,0x225,0x1d7,0x1dc)](formatPromptForDisplay,_0x4b1ac5));const _0x52d734=_0x2e8a37[_0x5b3a91(-0x75,-0x127,-0x63,-0x95)](getEffectiveConfigForRequestType,_0xc44e9b),{api_url:_0x3538a9,api_key:_0x539d87,model:_0x59869a,temperature:_0x4a67fa,top_p:_0x3c4a12,max_tokens:_0x338430,stream:_0x453ace,bypass_proxy:_0x6f0309}=_0x52d734;if(_0x2e8a37[_0x5b3a91(0x56,0x86,0x3a,0x91)](!_0x3538a9,!_0x539d87)||!_0x59869a){const _0x40523c=_0x4c05f9+(_0x5ac0bf(0xf5,0x1e4,0x1d2,0x1a4)+_0x5b3a91(0x2e,0x65,0x41,-0x48)+'或\x20Model\x20未配'+'置。');toastr[_0x5ac0bf(0xd3,0x17c,0x10d,0x163)](_0x40523c);const _0x5340cc={};_0x5340cc[_0x5ac0bf(0x1d5,0x194,0x295,0x221)]=![],_0x5340cc[_0x5ac0bf(0x176,0x162,0x176,0x133)]=_0x40523c,_0x5340cc['id']=_0xd26f42,eventSource[_0x5b3a91(-0x89,-0xc9,0x9,-0x8)](_0x54fe31,_0x5340cc);return;}const _0x3c0644=_0x3538a9[_0x5ac0bf(0x187,0x17b,0x157,0x216)](/\/$/,'');let _0xaad4d7,_0xf97b58,_0x26f8f5;if(_0x6f0309){_0xaad4d7=_0x3c0644+(_0x5ac0bf(0x27e,0x139,0x23a,0x1d6)+_0x5b3a91(-0x33,-0xb5,0x87,-0x35));const _0x4018cf={};_0x4018cf[_0x5ac0bf(0x14d,0x213,0x19d,0x14d)+'pe']=_0x2e8a37['dKSoT'],_0x4018cf[_0x5b3a91(0x47,0x4,0x29,-0x44)+_0x5b3a91(0x66,0x2b,0x38,0x57)]=_0x5ac0bf(0x21b,0x17e,0x141,0x1a2)+_0x539d87,_0xf97b58=_0x4018cf;const _0x374ff6={};_0x374ff6[_0x5ac0bf(0x2db,0x1f4,0x285,0x287)]=_0x59869a,_0x374ff6['messages']=_0x4b1ac5,_0x374ff6['temperatur'+'e']=_0x4a67fa,_0x374ff6[_0x5b3a91(-0x45,0x5d,-0x97,0x7c)]=_0x3c4a12,_0x374ff6['max_tokens']=_0x338430,_0x374ff6['stream']=_0x453ace,_0x26f8f5=_0x374ff6;}else{let _0x3cea9f=_0x3c0644;!_0x3cea9f['endsWith'](_0x2e8a37[_0x5b3a91(-0x6e,-0x8f,-0xe9,0x6)])&&!_0x3cea9f[_0x5ac0bf(0x127,0x1dd,0x15a,0x191)](_0x2e8a37[_0x5b3a91(0x7,0x42,0x34,0x96)])&&(_0x3cea9f=_0x2e8a37[_0x5ac0bf(0x217,0x210,0x289,0x1ef)](_0x3cea9f,_0x2e8a37[_0x5ac0bf(0x21d,0xb4,0x1c2,0x16b)]));_0x3cea9f=_0x3cea9f['replace'](/\/v1\/$/,_0x2e8a37[_0x5ac0bf(0xc5,0xfb,0x172,0x16b)]),_0xaad4d7=_0x5b3a91(0x65,0xdf,0x37,0xf4)+_0x5b3a91(0x8d,0x8a,0x5e,0x1c)+_0x5b3a91(0xd2,0x2c,0x26,0x161)+_0x5b3a91(-0x82,-0x6a,0x1,-0x36),_0xf97b58=_0x2e8a37['BRxEU'](getRequestHeaders,window[_0x5b3a91(0x74,0xfe,-0x44,0x60)]);const _0x2b7012={};_0x2b7012[_0x5b3a91(0x2d,0x92,0x35,0xb8)+_0x5b3a91(-0x8b,-0x11e,0x29,-0xa7)+'ce']=_0x2e8a37['cJgND'],_0x2b7012[_0x5b3a91(0xb8,0x88,0x13c,0xd1)]=_0x3cea9f,_0x2b7012[_0x5b3a91(0x5f,0x57,-0x3f,0x109)+_0x5b3a91(0xf,0x61,0x8e,-0xb3)+'rs']=_0x5ac0bf(0x2a8,0x194,0x2cc,0x220)+_0x5ac0bf(0x18f,0xf0,0x1a6,0x159)+_0x5ac0bf(0x2ec,0x1cb,0x25a,0x250)+_0x539d87+'\x22',_0x2b7012['model']=_0x59869a,_0x2b7012['messages']=_0x4b1ac5,_0x2b7012['temperatur'+'e']=_0x4a67fa,_0x2b7012[_0x5b3a91(-0x45,0x4,0x1e,-0xec)]=_0x3c4a12,_0x2b7012[_0x5ac0bf(0x19d,0x21f,0x1c4,0x195)]=_0x338430,_0x2b7012[_0x5b3a91(0x63,0x2e,0x41,-0x55)]=_0x453ace,_0x26f8f5=_0x2b7012;}_0x1568dc&&_0x2e8a37['xZIvH'](_0x1568dc,_0x5b3a91(-0x66,-0x6f,0x3d,0x5d)+_0x4c05f9+_0x5ac0bf(0x10f,0xf7,0x1a7,0x170));try{if(_0x2e8a37[_0x5b3a91(0xe,0x65,0x44,0x8c)](_0x5ac0bf(0x160,0x240,0x235,0x1d5),_0x5ac0bf(0x25e,0x2cb,0x1d9,0x27e))){if(_0x4a097e){const _0x1ea88d=_0x53b1b9[_0x5b3a91(0x15,-0x60,0x14,-0x37)](_0x1a92a4,arguments);return _0x120f9f=null,_0x1ea88d;}}else{const _0x526374=await fetch(_0xaad4d7,{'method':_0x5ac0bf(0x156,0x11c,0x171,0x16f),'headers':_0xf97b58,'body':JSON[_0x5b3a91(0xcf,0x76,0x129,0xef)](_0x26f8f5),'signal':_0x113627});if(!_0x526374['ok']){try{if(_0x2e8a37['vHCBb'](_0x2e8a37['bFGwr'],'qeJDM')){const _0x4bed98=await _0x526374[_0x5b3a91(0xd,0x59,-0x4f,-0x5)]();if(_0x4bed98['error']){if(_0x2e8a37[_0x5ac0bf(0x1b6,0x1db,0x1ac,0x13a)]!=='NRFZr')_0x2e8a37['Mdiur'](_0x1f21f3,_0x5ac0bf(0x204,0x235,0x1a6,0x173)+_0xc78255+_0x5b3a91(-0x69,0x5a,-0xa6,-0x2));else{let _0xe4372a;if(_0x2e8a37[_0x5ac0bf(0x74,0xa0,0x195,0x136)](typeof _0x4bed98[_0x5ac0bf(0x1fc,0x20c,0x224,0x163)],_0x2e8a37[_0x5b3a91(0x3a,0x0,0x5c,0x9)])&&_0x4bed98['error'][_0x5b3a91(-0x74,-0x63,0x11,0x3)]){_0xe4372a=''+_0x4bed98[_0x5ac0bf(0x175,0x182,0x1b0,0x163)][_0x5b3a91(-0x74,0xe,-0x41,0x40)];const _0x2a453a=[];if(_0x4bed98[_0x5b3a91(-0x76,-0x2e,-0x42,0x4c)][_0x5b3a91(-0x2d,-0xd2,-0x91,0x64)])_0x2a453a['push']('类型:\x20'+_0x4bed98[_0x5b3a91(-0x76,-0xf5,-0xab,-0xa4)][_0x5ac0bf(0x230,0x11a,0x122,0x1ac)]);if(_0x4bed98['error']['code'])_0x2a453a[_0x5b3a91(0x60,0x115,0xbf,0xdc)]('代码:\x20'+_0x4bed98[_0x5b3a91(-0x76,-0xb,-0x52,-0x7)][_0x5b3a91(0xc1,0x65,0x165,0xfc)]);_0x2e8a37[_0x5ac0bf(0x259,0x27a,0x264,0x1f1)](_0x2a453a[_0x5ac0bf(0x17e,0x1ad,0x11a,0x1c7)],-0x124a*-0x1+-0x129e+0x54)&&(_0x2e8a37[_0x5ac0bf(0x113,0x244,0x16f,0x1c0)]!==_0x2e8a37[_0x5ac0bf(0x286,0x138,0x1d9,0x1d8)]?_0xe4372a+='\x20('+_0x2a453a[_0x5b3a91(0xde,0x1a5,0x13c,0x188)](',\x20')+')':_0xb6c3aa=_0x586b55+_0x2e8a37['JKizU']);}else _0x2e8a37['vHCBb'](_0x2e8a37[_0x5b3a91(-0xa4,-0x3f,0x15,-0x11f)],_0x2e8a37[_0x5ac0bf(0xc6,0xfd,0xd9,0x135)])?(_0x2bd53c[_0x5ac0bf(0x19a,0x10f,0x138,0x147)](),_0x1a0519[_0x5ac0bf(0x249,0x26b,0x205,0x200)](_0x1817c4),_0x124475[_0x5ac0bf(0x1eb,0x208,0x120,0x1b7)](_0x5b3a91(0x31,0x2d,0xec,-0x25)+_0x5b3a91(0x28,-0x5b,0xcd,0x3c)+_0x3a3b68)):_0xe4372a=''+JSON[_0x5ac0bf(0x228,0x21f,0x21c,0x2a8)](_0x4bed98[_0x5ac0bf(0xd1,0x179,0x1a0,0x163)]);throw new Error(_0xe4372a);}}}else _0x4f47bf=null;}catch(_0x4cef27){if(_0x2e8a37[_0x5ac0bf(0x14a,0x1f2,0xdd,0x136)](_0x5ac0bf(0xf5,0x169,0x1ec,0x1af),_0x2e8a37['vBDLq']))_0x2e8a37[_0x5ac0bf(0x2a0,0x26e,0x29b,0x1dc)](_0x496777,_0x212801);else{if(_0x4cef27[_0x5ac0bf(0x128,0xd7,0x193,0x165)][_0x5ac0bf(0x206,0x119,0x1d8,0x191)](_0x2e8a37[_0x5ac0bf(0x17e,0x23b,0x177,0x226)])||_0x4cef27['message']['includes'](_0x5b3a91(-0x28,-0xe2,-0xd3,-0x65))){if(_0x2e8a37[_0x5b3a91(0x2c,0x8c,0x2f,0xa7)](_0x2e8a37[_0x5b3a91(-0x91,-0x12f,-0xcf,-0x75)],_0x2e8a37[_0x5b3a91(-0x5b,-0x5a,0x55,-0x35)]))_0x5f0477=''+_0x9be5fc['stringify'](_0x179423[_0x5b3a91(-0x76,-0xd2,-0x2c,-0xe6)]);else throw _0x4cef27;}}}throw new Error('请求失败:\x20'+_0x526374[_0x5ac0bf(0x248,0x2ac,0x2a6,0x212)]+'\x20'+_0x526374['statusText']);}let _0x32699c='';if(_0x453ace){const _0x3647a8=_0x526374[_0x5ac0bf(0x163,0x134,0x1d9,0x149)][_0x5b3a91(0x1c,0xd,0xcb,0x42)](),_0x4a1590=new TextDecoder(_0x2e8a37[_0x5ac0bf(0x24a,0x340,0x2cd,0x297)]);let _0x1757c6='';while(!![]){if(_0x2e8a37['ZmMhR'](_0x2e8a37[_0x5b3a91(-0x6,0xb1,0xf,-0x57)],_0x5b3a91(-0xb,-0xba,0x86,0x48))){const _0x1ebd96={'vGMlV':function(_0x49f1a4,_0x40f812){return _0x49f1a4(_0x40f812);}};return function(_0x54a6be){const {id:_0x34a663}=_0x54a6be;if(!_0x34a663)return;const _0x4497b0=_0x5ea4be[_0x478869]||_0x26d244;function _0x5f5c21(_0x284295,_0x53dd3a,_0x48de6c,_0xda99df){return _0x5ac0bf(_0x284295-0x66,_0x53dd3a-0x12c,_0xda99df,_0x284295- -0x12);}_0x1d19f1[_0x3066d0(-0x16a,-0xb4,-0x13c,-0xd7)]('st-chatu8:'+_0x3066d0(0x2b,0xa9,-0xa0,-0x19)+_0x4497b0+(_0x5f5c21(0x185,0x1e4,0x11d,0x237)+_0x5f5c21(0x2a2,0x310,0x2a0,0x32a))+_0x34a663+')');const _0x3db103=_0x1ebd96[_0x5f5c21(0x160,0xa2,0x145,0x173)](_0x48d0db,_0x44180c);function _0x3066d0(_0x148952,_0x3df7bb,_0x3b4028,_0x2b3155){return _0x5ac0bf(_0x148952-0x40,_0x3df7bb-0x59,_0x148952,_0x2b3155- -0x28e);}const _0x8ea0a4={};_0x8ea0a4[_0x5f5c21(0x206,0x1c5,0x233,0x2bc)]=_0x3db103,_0x8ea0a4['id']=_0x34a663,_0x5ba53a[_0x5f5c21(0x13e,0x1b3,0x1ef,0xbd)](_0x26cc42,_0x8ea0a4);};}else{const {done:_0xce85ef,value:_0x1b7f1d}=await _0x3647a8[_0x5ac0bf(0x2de,0x34d,0x24b,0x2b9)]();if(_0xce85ef)break;const _0x56831b={};_0x56831b[_0x5b3a91(0x63,-0x21,-0x34,-0x3d)]=!![],_0x1757c6+=_0x4a1590[_0x5ac0bf(0x2c7,0x25f,0x16f,0x233)](_0x1b7f1d,_0x56831b);const _0x254d8f=_0x1757c6[_0x5ac0bf(0x2de,0x1f3,0x1ab,0x22b)]('\x0a');_0x1757c6=_0x254d8f['pop']()||'';for(const _0x521437 of _0x254d8f){const _0x1cfc71=_0x521437[_0x5ac0bf(0x1b5,0x209,0x169,0x1e9)]();if(!_0x1cfc71||_0x2e8a37[_0x5b3a91(0xe,0x1e,0x45,-0x47)](_0x1cfc71,_0x2e8a37[_0x5ac0bf(0x1e1,0x169,0x234,0x1cc)]))continue;if(_0x1cfc71['startsWith'](_0x2e8a37[_0x5ac0bf(0x191,0x15b,0x1a8,0x14b)])){if(_0x2e8a37['vHCBb'](_0x2e8a37[_0x5b3a91(-0x87,-0x60,-0x89,-0x12)],_0x5b3a91(-0x8d,-0x13,-0x65,-0xcc)))try{if(_0x2e8a37[_0x5b3a91(-0xa3,-0x109,-0xc2,-0xfd)](_0x2e8a37[_0x5b3a91(0x8f,0x107,0x131,0x52)],_0x2e8a37[_0x5ac0bf(0x1fd,0x1c1,0x20c,0x224)])){_0x2e2051=''+_0x3a555b[_0x5b3a91(-0x76,0x50,-0x92,-0xd8)][_0x5b3a91(-0x74,0x3a,-0xdf,-0x8b)];const _0xa2af2e=[];if(_0x2188e8[_0x5b3a91(-0x76,-0x1c,-0xc6,-0xcf)][_0x5b3a91(-0x2d,0x6e,-0x1,-0xb0)])_0xa2af2e[_0x5b3a91(0x60,0x7c,-0x45,0x35)]('类型:\x20'+_0x3be00e[_0x5ac0bf(0xfe,0x186,0x13f,0x163)][_0x5ac0bf(0x15c,0x25e,0x16d,0x1ac)]);if(_0x2b29cb[_0x5b3a91(-0x76,-0xab,0xa,-0xef)][_0x5ac0bf(0x2e1,0x2d6,0x252,0x29a)])_0xa2af2e[_0x5ac0bf(0x22c,0x194,0x1fb,0x239)]('代码:\x20'+_0x54b285['error'][_0x5b3a91(0xc1,0x116,0xe2,0x102)]);_0x2e8a37[_0x5ac0bf(0x241,0x228,0x32a,0x28f)](_0xa2af2e['length'],0xf*-0x85+0x15ac+-0xde1)&&(_0x45a09b+='\x20('+_0xa2af2e[_0x5b3a91(0xde,0xd0,0x9d,0x137)](',\x20')+')');}else{const _0x222b75=_0x1cfc71[_0x5b3a91(0x85,0x33,-0x3,0x98)](0xb64+0x481*0x8+0x1*-0x2f66),_0x1e26c1=JSON[_0x5b3a91(-0x40,0x1d,0x17,-0x8e)](_0x222b75),_0x5badb3=_0x1e26c1[_0x5ac0bf(0x1f6,0x1a5,0x1d5,0x25b)]?.[-0x1749+0x252+0x6fd*0x3]?.['delta']?.[_0x5ac0bf(0x151,0x25c,0x129,0x1bb)];_0x5badb3&&(_0x32699c+=_0x5badb3,_0x1568dc&&(_0x2e8a37[_0x5b3a91(-0x46,-0xa,-0x35,-0x59)]===_0x2e8a37[_0x5b3a91(0x5c,0xa2,0x28,0x10d)]?_0x1942a0=_0x1754e8:_0x2e8a37[_0x5ac0bf(0x24f,0x1a2,0x14e,0x1df)](_0x1568dc,_0x32699c)));}}catch(_0x3769e2){if(_0x2e8a37[_0x5b3a91(0x83,0x95,0xd4,0x67)](_0x5ac0bf(0x2c4,0x2c7,0x1fd,0x253),'NvWqy'))console[_0x5b3a91(0x6b,0x40,0xf2,0xfd)](_0x2e8a37['xAtIG'],_0x3769e2[_0x5b3a91(-0x74,0x9,-0xfd,-0xa3)]);else{const _0x29ad62=_0x151779[_0x5ac0bf(0x19d,0x20e,0x216,0x1e9)]()[_0x5ac0bf(0x2f4,0x2cf,0x2f1,0x25e)](0x26ba+-0x357+-0x235d),_0x53c6b3=_0x456dc5[_0x5b3a91(-0x40,0x11,-0xfb,-0x3a)](_0x29ad62),_0xa80f9a=_0x53c6b3[_0x5ac0bf(0x260,0x248,0x25a,0x25b)]?.[0x1*-0x17e3+0x226a+0x23*-0x4d]?.[_0x5b3a91(0x36,-0x27,-0x67,-0x1a)]?.['content'];_0xa80f9a&&(_0x56271a+=_0xa80f9a,_0x2f3a2c&&_0x2ca0dd(_0x5ee381));}}else{const _0x32c269=_0x1f8965[_0x5b3a91(0x85,0x11d,-0x38,-0x30)](0x61a+0xe79+-0x148d),_0x26a97a=_0x5db84c['parse'](_0x32c269),_0x3622c7=_0x26a97a[_0x5ac0bf(0x30b,0x2e4,0x1fc,0x25b)]?.[0x1b90+0xbc9*0x1+-0x2759*0x1]?.[_0x5ac0bf(0x244,0x18e,0x268,0x20f)]?.[_0x5b3a91(-0x1e,-0x26,0x2,0x7f)];_0x3622c7&&(_0x4e0576+=_0x3622c7,_0x34a831&&_0x42c4bc(_0xb69da2));}}}}}if(_0x1757c6[_0x5ac0bf(0x1b8,0x267,0x222,0x1e9)]()&&_0x1757c6[_0x5b3a91(0x10,-0x45,0x5,0xa5)]()!==_0x5b3a91(0x9b,0xe4,0x97,-0x17)+'E]'&&_0x1757c6[_0x5ac0bf(0x1fc,0x243,0x14d,0x1e9)]()[_0x5ac0bf(0x2a7,0x340,0x22b,0x2b3)](_0x2e8a37['nGeId']))try{const _0x3da6bb=_0x1757c6[_0x5b3a91(0x10,-0x4e,0x13,0x1e)]()[_0x5b3a91(0x85,0xfc,0xfb,0xdd)](0x26d9+0xe50+-0x3523),_0x222ad0=JSON[_0x5b3a91(-0x40,-0xa6,-0xb7,-0x12)](_0x3da6bb),_0x188b8c=_0x222ad0[_0x5ac0bf(0x1b2,0x26f,0x207,0x25b)]?.[0x49*0x49+0x3e*0x2c+0x47f*-0x7]?.[_0x5b3a91(0x36,-0x39,-0x62,0x41)]?.[_0x5b3a91(-0x1e,-0xc,-0xc3,-0x62)];_0x188b8c&&(_0x32699c+=_0x188b8c,_0x1568dc&&_0x2e8a37['Mdiur'](_0x1568dc,_0x32699c));}catch(_0x277e7b){if(_0x2e8a37[_0x5b3a91(-0x88,-0x18,-0x13f,-0xcf)](_0x2e8a37['qWHyH'],_0x2e8a37['DsOmV'])){let _0x3afe34;if(typeof _0x4cff63[_0x5b3a91(-0x76,-0xd9,-0xf0,-0x20)]===_0x2e8a37[_0x5ac0bf(0x274,0x25c,0x1fc,0x213)]&&_0x86e6c5[_0x5b3a91(-0x76,-0x9b,-0x4c,-0x78)]['message']){_0x3afe34=''+_0x164617[_0x5b3a91(-0x76,0x4c,-0xa,0x40)]['message'];const _0x41d6e1=[];if(_0x1d7b4e[_0x5ac0bf(0x1c2,0x1f4,0x224,0x163)]['type'])_0x41d6e1['push'](_0x5ac0bf(0x1fe,0x236,0x200,0x29f)+_0x2807b8['error'][_0x5ac0bf(0x1fd,0x250,0x1e7,0x1ac)]);if(_0x1a6b75[_0x5ac0bf(0x188,0x1cd,0x137,0x163)][_0x5ac0bf(0x330,0x346,0x23c,0x29a)])_0x41d6e1['push'](_0x5ac0bf(0x1c5,0x2bb,0x16c,0x228)+_0x573555[_0x5ac0bf(0x146,0x1ac,0x1b5,0x163)][_0x5ac0bf(0x24c,0x257,0x348,0x29a)]);_0x2e8a37['YHcoq'](_0x41d6e1[_0x5ac0bf(0x225,0x13d,0x1e5,0x1c7)],0xb51+-0x2550+0x37*0x79)&&(_0x3afe34+='\x20('+_0x41d6e1[_0x5ac0bf(0x350,0x252,0x240,0x2b7)](',\x20')+')');}else _0x3afe34=''+_0x50d7b4[_0x5ac0bf(0x35b,0x2f4,0x271,0x2a8)](_0xa2528c['error']);throw new _0x597bbc(_0x3afe34);}else console[_0x5ac0bf(0x273,0x1cd,0x2bf,0x244)](_0x2e8a37[_0x5b3a91(-0x57,-0xfd,-0xf4,0x1a)],_0x277e7b['message']);}!_0x32699c&&(_0x32699c=_0x2e8a37['xIgfQ'],toastr['warning'](_0x4c05f9+(':\x20LLM\x20请求返回'+_0x5b3a91(0x13,-0x9e,-0x5d,-0x74)+_0x5b3a91(0xe1,0x84,0x65,0x75)+_0x5b3a91(-0x85,-0x1a,-0x32,-0xe3)+_0x5b3a91(-0x3d,0x7f,-0x69,0xe))));}else{const _0x109b6c=await _0x526374['json']();if(_0x109b6c[_0x5ac0bf(0xe8,0xd4,0x1f1,0x163)]){let _0x2f58ee;if(_0x2e8a37[_0x5b3a91(0x2c,0xce,-0x58,0xe2)](typeof _0x109b6c[_0x5b3a91(-0x76,-0x7b,-0x4e,-0x30)],_0x2e8a37['VqnXI'])&&_0x109b6c[_0x5b3a91(-0x76,-0x50,-0x72,-0x14)][_0x5ac0bf(0x209,0x1c8,0x209,0x165)]){_0x2f58ee=''+_0x109b6c[_0x5b3a91(-0x76,-0xef,0x23,-0x23)][_0x5ac0bf(0x134,0xed,0x182,0x165)];const _0x15a905=[];if(_0x109b6c['error'][_0x5b3a91(-0x2d,-0x43,-0x5b,-0x68)])_0x15a905[_0x5b3a91(0x60,0xe1,0x121,0xab)](_0x5b3a91(0xc6,0x12c,0x79,0x168)+_0x109b6c['error'][_0x5ac0bf(0xf4,0x271,0x26f,0x1ac)]);if(_0x109b6c[_0x5b3a91(-0x76,-0x4,-0x117,0x13)]['code'])_0x15a905[_0x5b3a91(0x60,0xb6,0x47,0x15)]('代码:\x20'+_0x109b6c[_0x5b3a91(-0x76,-0x10d,-0x11e,0x14)][_0x5b3a91(0xc1,0x59,0xf,0x152)]);if(_0x15a905[_0x5ac0bf(0x259,0x24c,0x1bc,0x1c7)]>-0x26ba*0x1+0x1acf*-0x1+0x4189){if(_0x2e8a37[_0x5ac0bf(0x145,0x12d,0x1e5,0x1d9)]!==_0x2e8a37[_0x5ac0bf(0x165,0x28d,0x17c,0x1d9)])return _0x5303f3[_0x5ac0bf(0x238,0x1f4,0x206,0x2a8)](_0x5299c4,null,-0x29a*0x6+-0x239d*0x1+0x333b);else _0x2f58ee+='\x20('+_0x15a905[_0x5b3a91(0xde,0xde,0xbd,0x174)](',\x20')+')';}}else _0x2f58ee=''+JSON[_0x5b3a91(0xcf,0x20,0x4b,0x12)](_0x109b6c[_0x5b3a91(-0x76,-0x55,-0x79,-0x123)]);throw new Error(_0x2f58ee);}_0x32699c=_0x109b6c['choices']?.[0x1d93+-0x1328+-0x1*0xa6b]?.['message']?.[_0x5ac0bf(0x1ed,0x1a6,0x1fd,0x1bb)]||'',!_0x32699c&&(_0x32699c=_0x2e8a37[_0x5ac0bf(0x106,0xe6,0x243,0x1a8)],toastr['warning'](_0x4c05f9+(':\x20LLM\x20请求返回'+_0x5b3a91(0x13,-0x15,0xb7,-0x7b)+_0x5ac0bf(0x331,0x257,0x313,0x2ba)+_0x5ac0bf(0xcc,0xfc,0x21a,0x154)+'API\x20连接问题。'))),_0x1568dc&&(_0x2e8a37[_0x5ac0bf(0x134,0xab,0x8f,0x151)](_0x2e8a37['LyBYM'],'wbvFx')?_0x1568dc(_0x32699c):_0x1de7a0+='\x20('+_0x34809e[_0x5b3a91(0xde,0x5c,0x67,0xc1)](',\x20')+')');}_0x2e8a37[_0x5b3a91(0xcc,0x154,0x9f,0x55)](addLog,_0x5b3a91(0xd7,0x12d,0xc3,0xbc)+_0x5ac0bf(0x198,0x21b,0x224,0x17d)),_0x2e8a37[_0x5b3a91(-0x6b,-0x78,-0xec,-0x77)](addLog,_0x32699c),_0x2e8a37[_0x5ac0bf(0x20d,0x180,0x21f,0x23d)](addLog,'=====\x20LLM\x20'+_0x5b3a91(-0x17,0x1a,-0xd0,0x53)),taskQueue[_0x5b3a91(0x2a,-0x4b,0x7a,0x2d)+'sk'](_0x9f90c0,!![]),llmTaskControllers['delete'](_0x9f90c0);const _0x524e4b={};_0x524e4b[_0x5b3a91(0x48,-0x46,0xae,0xb)]=!![],_0x524e4b[_0x5ac0bf(0x1ea,0xed,0x1ca,0x133)]=_0x32699c,_0x524e4b['id']=_0xd26f42,_0x524e4b[_0x5b3a91(0x35,-0x62,-0x8,-0x4e)]=![],eventSource[_0x5b3a91(-0x89,-0x33,-0x6f,-0x83)](_0x54fe31,_0x524e4b);}}catch(_0x1f8952){if(_0x2e8a37[_0x5ac0bf(0x1e9,0x26f,0x1fa,0x1e4)](_0x2e8a37['wuhCw'],_0x5b3a91(0x88,0x118,-0x32,0xe0))){_0xb9c03c=_0x4ae60e+(_0x5b3a91(-0x3,-0x90,-0x5,0xd)+'letions');const _0x1eb6fc={};_0x1eb6fc[_0x5ac0bf(0xe4,0xe9,0x133,0x14d)+'pe']=_0x2e8a37[_0x5b3a91(0xc2,0xc6,0xe6,0x6)],_0x1eb6fc[_0x5b3a91(0x47,-0x1f,-0x6e,-0x62)+_0x5b3a91(0x66,0x69,0xd5,0x89)]=_0x5b3a91(-0x37,0x4a,0x44,-0xb8)+_0x3cba3a,_0x2bc0bb=_0x1eb6fc,_0x5dfe3b={'model':_0xe21d85,'messages':_0x316d67,'temperature':_0x325053,'top_p':_0x46c725,'max_tokens':_0x44a6ed,'stream':_0x2e8a37[_0x5ac0bf(0x1a6,0x15f,0x285,0x21f)](_0xa3d54,![])};}else{if(_0x2e8a37['iYIuO'](_0x1f8952[_0x5ac0bf(0x177,0x10c,0x135,0x13e)],_0x2e8a37[_0x5b3a91(0xce,0xc1,0x106,0xf7)])){if(_0x2e8a37[_0x5ac0bf(0xd6,0x1ea,0x1b9,0x151)](_0x2e8a37['yBRkB'],_0x2e8a37[_0x5ac0bf(0x2d8,0x1f8,0x335,0x26f)])){const _0x12c2c0=_0x2e8a37[_0x5b3a91(-0x2,0x34,-0xb3,0x1)][_0x5b3a91(0x52,0x10b,0x16,0x32)]('|');let _0x2fc9cb=-0x55*0x9+0x61*-0x52+0x220f;while(!![]){switch(_0x12c2c0[_0x2fc9cb++]){case'0':_0xe3fcb9=!![];continue;case'1':const _0x1e5d77={};_0x1e5d77[_0x5ac0bf(0xb7,0xa2,0xbf,0x13e)]=_0x2e8a37[_0x5ac0bf(0x1f7,0x218,0x1e7,0x2a7)],_0x1e5d77[_0x5ac0bf(0x1f6,0x1e9,0x149,0x165)]='Request\x20ab'+'orted';const _0x2a7b5e={};_0x2a7b5e[_0x5b3a91(0x48,0x97,0x2c,-0x7e)]=![],_0x2a7b5e['result']=null,_0x2a7b5e['id']=_0x341b2a,_0x2a7b5e['error']=_0x1e5d77,_0x4a547d[_0x5ac0bf(0x1fe,0xac,0xa9,0x150)](_0x14a547,_0x2a7b5e);continue;case'2':_0x13a9a5['delete'](_0x4123b5);continue;case'3':return;case'4':_0x26cf9f['updateStat'+'us'](_0x531e0e,_0x52953d[_0x5ac0bf(0x284,0x239,0x126,0x1e2)]);continue;}break;}}else{const _0x569fec=_0x2e8a37[_0x5ac0bf(0x26f,0x23f,0x1a4,0x202)]['split']('|');let _0x203567=0x223a+-0x1244*-0x1+-0x1*0x347e;while(!![]){switch(_0x569fec[_0x203567++]){case'0':const _0x4832a6={};_0x4832a6[_0x5ac0bf(0x1ef,0x1f5,0xc7,0x13e)]=_0x2e8a37[_0x5b3a91(0xce,0x143,0x4c,0x2c)],_0x4832a6['message']=_0x2e8a37[_0x5ac0bf(0x243,0x220,0x14a,0x181)];const _0x19c008={};_0x19c008[_0x5ac0bf(0x1ca,0x1dd,0x265,0x221)]=![],_0x19c008[_0x5b3a91(-0xa6,-0xba,-0x117,-0x58)]=null,_0x19c008['id']=_0xd26f42,_0x19c008[_0x5b3a91(-0x76,-0x113,-0xba,-0x131)]=_0x4832a6,eventSource[_0x5b3a91(-0x89,-0xed,-0x130,-0x12c)](_0x54fe31,_0x19c008);continue;case'1':llmTaskControllers[_0x5b3a91(0x27,0xcd,-0x8a,-0x2d)](_0x9f90c0);continue;case'2':return;case'3':taskQueue['updateStat'+'us'](_0x9f90c0,TaskStatus['CANCELLED']);continue;case'4':_0x4fccb3=!![];continue;}break;}}}console['error'](_0x4c05f9+_0x5b3a91(-0x18,-0xb6,0x7d,-0xa1),_0x1f8952);const _0x49e4a5='请求错误:\x20'+_0x1f8952['message'];_0x1568dc&&_0x2e8a37[_0x5ac0bf(0x93,0xb3,0x146,0x142)](_0x1568dc,_0x49e4a5);toastr[_0x5ac0bf(0x167,0x101,0x161,0x163)](_0x1f8952[_0x5ac0bf(0x170,0x18e,0x160,0x165)]),taskQueue[_0x5ac0bf(0x148,0x13c,0x2a2,0x203)+'sk'](_0x9f90c0,![]),llmTaskControllers['delete'](_0x9f90c0);const _0x1d8da9={};_0x1d8da9[_0x5ac0bf(0x1b7,0x163,0x234,0x221)]=![],_0x1d8da9['result']=_0x49e4a5,_0x1d8da9['id']=_0xd26f42,eventSource[_0x5b3a91(-0x89,-0xf2,0x20,-0x70)](_0x54fe31,_0x1d8da9);}}finally{_0x2e8a37[_0x5b3a91(-0xa3,-0x4a,-0x37,-0x5e)](currentLLMRequestController,_0x2f65fe)&&(_0x2e8a37[_0x5b3a91(0x44,-0x72,-0x2c,0x1d)](_0x2e8a37[_0x5b3a91(-0x23,-0x12,0x33,-0xaa)],_0x5b3a91(0x84,0x7a,0x105,0x67))?currentLLMRequestController=null:(_0x454e3a[_0x5ac0bf(0x113,0xd4,0x1b4,0x147)](),_0x26b2ea[_0x5b3a91(0x58,0x8c,-0x14,0x9e)](_0x2e8a37[_0x5b3a91(0x94,0x3d,-0x11,-0x2)]))),(!_0x4fccb3||_0x2e8a37['iYIuO'](currentLLMRequestController,null))&&_0x2e8a37[_0x5ac0bf(0x15b,0x171,0x21c,0x1f7)](stopFabLoading);}}export async function executeDefaultLLMRequest(_0x3d83df,_0x2b8080,_0x5157a8=null){const _0x2c7940={'pReAQ':'/v1','DwBkW':_0xa65c52(0x3c5,0x456,0x3d8,0x3d0),'mwHUK':function(_0x7bede8,_0x2092a7){return _0x7bede8+_0x2092a7;},'IqxIB':'/api/backe'+'nds/chat-c'+_0xa65c52(0x494,0x4a7,0x51d,0x4ee)+'/generate','lWpwb':function(_0x535c36,_0x23ef94){return _0x535c36(_0x23ef94);},'Uhixb':'custom','KKMLf':'流式解析警告\x20(最后'+_0x4e3a6c(0x9c,0x39,-0x33,0xc8),'aublv':function(_0x10f6b8){return _0x10f6b8();},'vmFUg':function(_0x3b6ca9,_0x1a3f3c){return _0x3b6ca9||_0x1a3f3c;},'KwTlH':function(_0x56e656,_0x1fad15){return _0x56e656===_0x1fad15;},'crUza':_0xa65c52(0x491,0x3a5,0x46e,0x442),'OhGUm':'uswNV','vAtTC':function(_0x52cb8b){return _0x52cb8b();},'jEtSQ':function(_0x4b8d7e){return _0x4b8d7e();},'jZOGJ':'API\x20URL,\x20A'+'PI\x20Key,\x20或\x20'+_0xa65c52(0x3de,0x3bc,0x3ab,0x3a5),'XkXZo':_0xa65c52(0x4c2,0x49c,0x5a7,0x4e1)+_0x4e3a6c(-0x6a,0x33,0xe9,-0x90),'RwXzU':'MzGBo','tXBae':function(_0x401618,_0x2c1e15){return _0x401618+_0x2c1e15;},'maglT':function(_0x2006db,_0x339ab4){return _0x2006db(_0x339ab4);},'yFCJE':function(_0x3ef429,_0x4dfbcd){return _0x3ef429===_0x4dfbcd;},'kUjgK':_0x4e3a6c(-0x61,-0x48,-0xb4,-0x2e),'ufjHA':_0x4e3a6c(-0xb8,-0x3a,-0x84,-0x1a)+_0xa65c52(0x3f2,0x571,0x566,0x4af),'UowlC':function(_0x267525,_0x44f4b9,_0x13316c){return _0x267525(_0x44f4b9,_0x13316c);},'dxNXM':_0xa65c52(0x32c,0x38d,0x43b,0x3b2),'ftVLc':'object','hdsQA':function(_0x386fb6,_0x5b9243){return _0x386fb6>_0x5b9243;},'TKans':_0x4e3a6c(0xaf,0x48,-0x3,0xb5),'EzhaR':function(_0x1c8a65,_0x4a2fac){return _0x1c8a65!==_0x4a2fac;},'wfmyu':_0xa65c52(0x45c,0x592,0x55f,0x4f9),'FxZxH':'LLM\x20请求返回为空'+_0x4e3a6c(-0x2,0x89,0x124,0xfe)+_0x4e3a6c(-0xad,-0x2e,0x89,-0xa3)+_0xa65c52(0x4a6,0x466,0x4a3,0x402)+_0xa65c52(0x448,0x52a,0x50a,0x494),'uTUVs':function(_0x50dcff,_0x3391eb){return _0x50dcff(_0x3391eb);},'Zxtqh':function(_0x6abb72,_0x4b0d26){return _0x6abb72(_0x4b0d26);},'qbLIF':function(_0x176793,_0x1c9dc2){return _0x176793(_0x1c9dc2);},'Ukajp':_0xa65c52(0x434,0x328,0x30d,0x3b7),'iJtHM':'Request\x20ab'+_0xa65c52(0x437,0x3bd,0x3d0,0x401),'wAczr':_0x4e3a6c(0x48,0xd0,0xd6,0xf9)+_0x4e3a6c(0x3d,-0x82,-0x35,-0x18)+_0x4e3a6c(0x129,0xc3,0xda,0x164),'OLuHJ':_0x4e3a6c(0x90,0xa4,0x15f,0x134)+'e\x20Error:','gtZRf':'LnFnO','yHkBC':function(_0x16cd36,_0x415c2a){return _0x16cd36===_0x415c2a;},'vIfaw':function(_0x507f01,_0x1799d9){return _0x507f01===_0x1799d9;},'elDJg':function(_0x1d5ebb){return _0x1d5ebb();}},{prompt:_0x182c67,id:_0x4d4e20}=_0x3d83df;if(_0x2c7940['vmFUg'](!_0x4d4e20,!_0x182c67))return;if(currentLLMRequestController){if(_0x2c7940[_0x4e3a6c(-0xf6,-0x67,0x2f,0xb)](_0x2c7940[_0xa65c52(0x4a9,0x3bf,0x404,0x465)],_0x2c7940[_0x4e3a6c(-0xce,-0x3e,-0x8d,-0xfb)])){_0x376bc5=''+_0x48c522[_0x4e3a6c(-0x5c,-0x60,-0xf3,0x61)]['message'];const _0x2bc201=[];if(_0x29c949[_0xa65c52(0x2e9,0x3a9,0x39b,0x3a6)][_0xa65c52(0x42d,0x3d4,0x35a,0x3ef)])_0x2bc201[_0xa65c52(0x3fb,0x42f,0x4ce,0x47c)](_0x4e3a6c(0x118,0xdc,0x19a,0x3c)+_0x39e2de[_0x4e3a6c(-0x10a,-0x60,-0x100,-0x77)][_0xa65c52(0x3f6,0x4ad,0x479,0x3ef)]);if(_0x339c76[_0x4e3a6c(-0x17,-0x60,-0xa8,-0x79)][_0x4e3a6c(0x14e,0xd7,0x126,0x32)])_0x2bc201[_0x4e3a6c(0xcb,0x76,-0x11,0x98)](_0x4e3a6c(0xc6,0x65,-0xd,0xd8)+_0x4e4d23[_0xa65c52(0x3a5,0x423,0x3dc,0x3a6)][_0x4e3a6c(0x114,0xd7,0x50,0x58)]);_0x2bc201[_0x4e3a6c(-0x16,0x4,0x77,-0x94)]>0x841*-0x3+-0x11fc+0x1f*0x161&&(_0x44a051+='\x20('+_0x2bc201[_0x4e3a6c(0x9e,0xf4,0x100,0xb1)](',\x20')+')');}else currentLLMRequestController[_0xa65c52(0x437,0x39e,0x2e5,0x38a)](),toastr[_0x4e3a6c(0xb,0x6e,0x96,-0x52)](_0xa65c52(0x3d3,0x35b,0x451,0x409)+_0x4e3a6c(-0x7d,0x0,-0x55,0x91));}currentLLMRequestController=new AbortController();const _0x536d08=currentLLMRequestController[_0x4e3a6c(0xa3,0xdf,0x136,0xfb)],_0x43bd6f=currentLLMRequestController,_0x4a0075={};_0x4a0075['name']=_0x4e3a6c(0x79,0xe7,0xa5,0xf4),_0x4a0075['type']=TaskType[_0xa65c52(0x46f,0x3f1,0x342,0x3f3)],_0x4a0075[_0x4e3a6c(-0x3b,0x55,-0x5b,-0x4)]=_0x4d4e20;const _0x58d482=taskQueue[_0x4e3a6c(0x13f,0xe0,0x96,0x176)](_0x4a0075);llmTaskControllers[_0xa65c52(0x55b,0x56a,0x4df,0x4ef)](_0x58d482,currentLLMRequestController),taskQueue[_0x4e3a6c(-0x90,-0x33,-0xa3,0x8b)+'us'](_0x58d482,TaskStatus[_0xa65c52(0x555,0x581,0x55d,0x501)]),_0x2c7940[_0xa65c52(0x3ec,0x44f,0x4de,0x48d)](startFabLoading);let _0x390634=![];_0x2c7940[_0xa65c52(0x3b3,0x384,0x40f,0x447)](clearLog),_0x2c7940[_0x4e3a6c(0x27,-0x5b,-0x53,-0x115)](addLog,_0x4e3a6c(0x177,0xf2,0xe6,0x13d)+_0xa65c52(0x37a,0x311,0x354,0x3bc)+'==');function _0xa65c52(_0xb77a08,_0x3311c9,_0x1e2a08,_0x215e23){return _0x5c022e(_0xb77a08,_0x3311c9-0xd5,_0x215e23-0x210,_0x215e23-0x1b7);}_0x2c7940[_0x4e3a6c(-0x43,-0x5b,-0x11c,-0x2f)](addLog,'请求\x20ID:\x20'+_0x4d4e20);function _0x4e3a6c(_0x150f7b,_0x35f339,_0x364c19,_0x588eca){return _0x5c022e(_0x364c19,_0x35f339-0x13c,_0x35f339- -0x1f6,_0x588eca-0x1c3);}addLog(_0xa65c52(0x496,0x4e5,0x41c,0x491)+':'),_0x2c7940[_0xa65c52(0x393,0x380,0x38d,0x3ab)](addLog,_0x2c7940[_0x4e3a6c(-0x102,-0x5b,-0x112,0x3f)](formatPromptForDisplay,_0x182c67));const {api_url:_0x3949e6,api_key:_0x1e8c91,model:_0x59118f,temperature:_0x1b673d,top_p:_0x35042a,max_tokens:_0x1749f3,stream:_0x4550a7,bypass_proxy:_0x3c2c10}=_0x2b8080;if(_0x2c7940[_0xa65c52(0x3ae,0x3de,0x442,0x3f6)](!_0x3949e6,!_0x1e8c91)||!_0x59118f){const _0x3a1587=_0x2c7940[_0x4e3a6c(-0xa3,-0x8c,-0x76,-0x52)];toastr[_0x4e3a6c(0x46,-0x60,0x55,-0x4c)](_0x3a1587);const _0x152129={};_0x152129[_0x4e3a6c(0xfe,0x5e,0xf0,-0x22)]=![],_0x152129[_0xa65c52(0x424,0x362,0x417,0x376)]=_0x3a1587,_0x152129['id']=_0x4d4e20,eventSource[_0x4e3a6c(0x36,-0x73,-0x5f,0x13)](eventNames['LLM_EXECUT'+_0x4e3a6c(0x185,0xee,0x45,0x1b5)],_0x152129);return;}const _0x64dbda=_0x3949e6[_0xa65c52(0x50e,0x4a1,0x45a,0x459)](/\/$/,'');let _0x1fc274,_0xa9fb3a,_0x3ab703;if(_0x3c2c10){_0x1fc274=_0x64dbda+('/chat/comp'+_0x4e3a6c(-0x92,-0x1d,0x9f,-0xa));const _0x4309d3={};_0x4309d3[_0xa65c52(0x391,0x2d1,0x2d2,0x390)+'pe']=_0x2c7940[_0xa65c52(0x3fb,0x483,0x425,0x430)],_0x4309d3[_0x4e3a6c(0xef,0x5d,0x9e,0x75)+_0x4e3a6c(0xa2,0x7c,0xd2,0xb2)]=_0x4e3a6c(-0x2b,-0x21,-0x40,0x92)+_0x1e8c91,_0xa9fb3a=_0x4309d3;const _0x182e2c={};_0x182e2c[_0xa65c52(0x582,0x4a1,0x587,0x4ca)]=_0x59118f,_0x182e2c['messages']=_0x182c67,_0x182e2c[_0x4e3a6c(0x66,0xe,-0x29,-0x7)+'e']=_0x1b673d,_0x182e2c['top_p']=_0x35042a,_0x182e2c[_0xa65c52(0x41a,0x490,0x315,0x3d8)]=_0x1749f3,_0x182e2c['stream']=_0x4550a7??![],_0x3ab703=_0x182e2c;}else{if(_0x2c7940[_0x4e3a6c(0x30,0xb6,0x7e,0x123)]!==_0x2c7940[_0x4e3a6c(0x21,0xb6,0x14a,0xf)]){const _0x3f65fa=_0x4a636a+(_0xa65c52(0x3e3,0x3dd,0x3f8,0x3e7)+_0x4e3a6c(0xc,0x44,-0xc,0xa9)+_0xa65c52(0x41a,0x570,0x4d2,0x4ce)+'置。');_0x1696b4[_0xa65c52(0x2ee,0x44f,0x42d,0x3a6)](_0x3f65fa);const _0x4a299c={};_0x4a299c[_0x4e3a6c(0x105,0x5e,0xbc,0x9f)]=![],_0x4a299c['result']=_0x3f65fa,_0x4a299c['id']=_0x4c4017,_0x3ccf75[_0x4e3a6c(-0x127,-0x73,-0x123,-0xaa)](_0x11240a,_0x4a299c);return;}else{let _0x23a247=_0x64dbda;!_0x23a247[_0x4e3a6c(0x80,-0x28,0x61,-0x81)](_0xa65c52(0x39e,0x3b2,0x3f3,0x43e))&&!_0x23a247[_0x4e3a6c(0x6f,-0x32,-0x2,0x14)](_0x2c7940[_0xa65c52(0x536,0x52c,0x506,0x4fe)])&&(_0x23a247=_0x2c7940[_0xa65c52(0x512,0x468,0x56b,0x4f2)](_0x23a247,_0x2c7940[_0xa65c52(0x3f8,0x420,0x4eb,0x4a8)]));_0x23a247=_0x23a247[_0x4e3a6c(0x5c,0x53,-0x61,0xf7)](/\/v1\/$/,_0x2c7940['pReAQ']),_0x1fc274=_0x2c7940['IqxIB'],_0xa9fb3a=_0x2c7940['maglT'](getRequestHeaders,window[_0xa65c52(0x455,0x4df,0x3d9,0x490)]);const _0x4a4129={};_0x4a4129[_0xa65c52(0x50d,0x3e9,0x49e,0x449)+_0xa65c52(0x2e1,0x423,0x3b8,0x391)+'ce']=_0x4e3a6c(-0x7,-0x83,-0x64,-0x6a),_0x4a4129[_0x4e3a6c(0xa8,0xce,0x176,0xbe)]=_0x23a247,_0x4a4129[_0x4e3a6c(0x24,0x75,0x92,0x8c)+_0xa65c52(0x47d,0x492,0x3f5,0x42b)+'rs']=_0xa65c52(0x415,0x3ba,0x41c,0x463)+'ion:\x20\x22Bear'+_0xa65c52(0x4f1,0x52c,0x427,0x493)+_0x1e8c91+'\x22',_0x4a4129[_0x4e3a6c(0x72,0xc4,0xb6,0xc0)]=_0x59118f,_0x4a4129['messages']=_0x182c67,_0x4a4129[_0xa65c52(0x421,0x387,0x436,0x414)+'e']=_0x1b673d,_0x4a4129['top_p']=_0x35042a,_0x4a4129[_0x4e3a6c(0x5e,-0x2e,-0x8a,-0x85)]=_0x1749f3,_0x4a4129[_0x4e3a6c(0xfe,0x79,0xeb,0x8c)]=![],_0x3ab703=_0x4a4129;}}if(_0x5157a8){if(_0x2c7940[_0xa65c52(0x4c3,0x427,0x54b,0x4b3)](_0x2c7940[_0xa65c52(0x46a,0x3df,0x485,0x3cb)],'QhIQn')){let _0x5c022b=_0x4b3455;!_0x5c022b[_0xa65c52(0x3e7,0x3e1,0x452,0x3de)](_0x2c7940[_0xa65c52(0x40a,0x4bf,0x529,0x4a8)])&&!_0x5c022b[_0xa65c52(0x318,0x48c,0x44d,0x3d4)](_0x2c7940[_0xa65c52(0x503,0x4a1,0x496,0x4fe)])&&(_0x5c022b=_0x2c7940[_0xa65c52(0x43f,0x3ec,0x3a4,0x39d)](_0x5c022b,_0x2c7940[_0xa65c52(0x516,0x4d9,0x549,0x4a8)]));_0x5c022b=_0x5c022b[_0x4e3a6c(0x12,0x53,0x110,0x34)](/\/v1\/$/,_0x4e3a6c(-0x36,0x38,0x2c,0x1e)),_0x18057a=_0x2c7940[_0xa65c52(0x4d8,0x4ed,0x541,0x4fb)],_0x402aef=_0x2c7940[_0x4e3a6c(-0xeb,-0x5b,-0x105,-0xfe)](_0x256f61,_0x1a3f83[_0x4e3a6c(0x75,0x8a,0xc3,0x10c)]);const _0x15627e={};_0x15627e[_0x4e3a6c(0x45,0x43,0x3f,0x32)+_0xa65c52(0x3b0,0x411,0x450,0x391)+'ce']=_0x2c7940[_0x4e3a6c(-0x5b,-0x57,-0x117,-0x17)],_0x15627e['custom_url']=_0x5c022b,_0x15627e[_0xa65c52(0x536,0x3fa,0x4ea,0x47b)+'lude_heade'+'rs']=_0xa65c52(0x3a4,0x3fe,0x3a2,0x463)+'ion:\x20\x22Bear'+'er\x20'+_0x4d8afb+'\x22',_0x15627e[_0x4e3a6c(0xa0,0xc4,0x176,0x12)]=_0x41ea23,_0x15627e[_0x4e3a6c(0x6d,-0x3c,-0x26,-0x84)]=_0x1edae7,_0x15627e[_0x4e3a6c(0x3c,0xe,-0xa6,-0x20)+'e']=_0x4cfae7,_0x15627e[_0xa65c52(0x40d,0x41b,0x3e4,0x3d7)]=_0x295f64,_0x15627e[_0x4e3a6c(-0x1,-0x2e,0x4b,-0xa2)]=_0x231d2c,_0x15627e[_0x4e3a6c(0xc8,0x79,0xe2,0x135)]=_0x4345d4,_0x669298=_0x15627e;}else _0x5157a8(_0x2c7940[_0xa65c52(0x43f,0x3f7,0x4fc,0x4b1)]);}try{const _0x191102=await _0x2c7940['UowlC'](fetch,_0x1fc274,{'method':_0x2c7940[_0x4e3a6c(-0x6,-0x79,-0x135,-0xb5)],'headers':_0xa9fb3a,'body':JSON[_0xa65c52(0x500,0x482,0x4c0,0x4eb)](_0x3ab703),'signal':_0x536d08}),_0x28354d=await _0x191102['json']();if(_0x28354d[_0xa65c52(0x3e3,0x3bd,0x372,0x3a6)]){let _0x3abb7b;if(typeof _0x28354d[_0x4e3a6c(-0x9c,-0x60,-0x3,0x35)]===_0x2c7940[_0x4e3a6c(-0x9c,-0x6,-0x93,-0x4)]&&_0x28354d['error'][_0xa65c52(0x306,0x385,0x2e1,0x3a8)]){_0x3abb7b=''+_0x28354d[_0xa65c52(0x34e,0x364,0x3b3,0x3a6)][_0x4e3a6c(-0x103,-0x5e,-0xbf,-0x56)];const _0x112fad=[];if(_0x28354d['error'][_0xa65c52(0x41f,0x3eb,0x36c,0x3ef)])_0x112fad[_0x4e3a6c(0x1b,0x76,0xff,-0x14)]('类型:\x20'+_0x28354d['error'][_0xa65c52(0x46d,0x37c,0x362,0x3ef)]);if(_0x28354d[_0x4e3a6c(-0xc6,-0x60,-0x55,0x1)][_0x4e3a6c(0xf5,0xd7,0xc9,0x163)])_0x112fad[_0xa65c52(0x412,0x418,0x3e9,0x47c)](_0x4e3a6c(0x122,0x65,0x98,0x5a)+_0x28354d[_0xa65c52(0x37b,0x3f2,0x381,0x3a6)]['code']);_0x2c7940['hdsQA'](_0x112fad[_0x4e3a6c(-0x36,0x4,0xc4,0xa9)],0x159c+-0x1879+0x2dd)&&(_0x3abb7b+='\x20('+_0x112fad[_0x4e3a6c(0x9f,0xf4,0x155,0x41)](',\x20')+')');}else _0x2c7940[_0xa65c52(0x43d,0x4ec,0x56a,0x4b3)]('PRBqv',_0x2c7940[_0x4e3a6c(0xc6,0x80,-0x19,0xd6)])?_0x4fa51e[_0xa65c52(0x4d1,0x463,0x47f,0x487)](_0x2c7940['KKMLf'],_0x5cbe09[_0x4e3a6c(-0x85,-0x5e,-0x11,-0xcf)]):_0x3abb7b=''+JSON[_0x4e3a6c(0xe4,0xe5,0x82,0x117)](_0x28354d[_0x4e3a6c(-0x57,-0x60,0x65,-0x33)]);throw new Error(_0x3abb7b);}if(!_0x191102['ok']){if(_0x2c7940[_0xa65c52(0x39f,0x403,0x466,0x457)]('WNqao',_0x2c7940[_0x4e3a6c(0x7e,0x11,0x7c,-0x54)]))throw new Error(_0xa65c52(0x423,0x44d,0x442,0x497)+_0x191102['status']+'\x20'+_0x191102['statusText']);else _0x436ab7=null;}const _0x2577ee=_0x28354d[_0x4e3a6c(0x5e,0x98,0x124,0xc6)]?.[0x3*-0x4bd+0x1b*0x42+0x1*0x741]?.[_0x4e3a6c(0x1a,-0x5e,-0xc5,-0x27)]?.[_0xa65c52(0x412,0x3df,0x38a,0x3fe)]||'';!_0x2577ee&&toastr[_0x4e3a6c(0xaf,0x86,0x127,-0x3f)](_0x2c7940[_0x4e3a6c(0x147,0x88,0x55,0xb3)]);_0x5157a8&&_0x2c7940[_0xa65c52(0x4af,0x466,0x49e,0x4ba)](_0x5157a8,_0x2577ee);_0x2c7940[_0x4e3a6c(-0x6,-0x5b,-0x82,-0x7)](addLog,_0x4e3a6c(0xf1,0xed,0x3c,0x135)+_0xa65c52(0x430,0x36c,0x407,0x3c0)),_0x2c7940[_0xa65c52(0x518,0x4e7,0x519,0x479)](addLog,_0x2577ee),_0x2c7940[_0xa65c52(0x409,0x32d,0x2fb,0x3a0)](addLog,_0xa65c52(0x433,0x458,0x44f,0x4f8)+'请求完成\x20====='),taskQueue['completeTa'+'sk'](_0x58d482,!![]),llmTaskControllers[_0xa65c52(0x47f,0x38c,0x38f,0x443)](_0x58d482);const _0x145cc6={};_0x145cc6[_0xa65c52(0x3f4,0x506,0x3fc,0x464)]=!![],_0x145cc6['result']=_0x2577ee,_0x145cc6['id']=_0x4d4e20,eventSource[_0xa65c52(0x333,0x3b6,0x3d3,0x393)](eventNames[_0xa65c52(0x3b4,0x435,0x2fd,0x388)+_0xa65c52(0x4ff,0x4be,0x58b,0x4f4)],_0x145cc6);}catch(_0x449252){if(_0x2c7940[_0xa65c52(0x379,0x358,0x42f,0x39f)](_0x449252[_0xa65c52(0x31c,0x2f3,0x3fd,0x381)],_0xa65c52(0x3c3,0x402,0x36a,0x3b7))){const _0x35aba4=(_0x4e3a6c(-0x10d,-0x70,-0x97,0x4a)+'1')[_0x4e3a6c(0xbd,0x68,0x102,-0x28)]('|');let _0x44fab8=0x1*0x267d+0x118c+-0x2f3*0x13;while(!![]){switch(_0x35aba4[_0x44fab8++]){case'0':llmTaskControllers['delete'](_0x58d482);continue;case'1':return;case'2':const _0x52e24e={};_0x52e24e[_0x4e3a6c(-0x130,-0x85,-0xa8,-0x27)]=_0x2c7940[_0xa65c52(0x46e,0x427,0x46e,0x3c3)],_0x52e24e[_0x4e3a6c(0x1d,-0x5e,0x68,0x54)]=_0x2c7940[_0x4e3a6c(0x5a,0x9d,-0x2,0x14)];const _0x1f60cd={};_0x1f60cd[_0x4e3a6c(-0x1e,0x5e,0x81,0x10d)]=![],_0x1f60cd[_0x4e3a6c(-0xae,-0x90,-0x103,-0x10c)]=null,_0x1f60cd['id']=_0x4d4e20,_0x1f60cd[_0x4e3a6c(-0xf9,-0x60,-0x49,-0x108)]=_0x52e24e,eventSource['emit'](eventNames[_0x4e3a6c(-0x14,-0x7e,-0x8d,0x34)+_0x4e3a6c(0x6a,0xee,0xec,0x163)],_0x1f60cd);continue;case'3':console[_0xa65c52(0x3f7,0x3b0,0x403,0x3fa)](_0x2c7940['wAczr']);continue;case'4':taskQueue[_0x4e3a6c(-0x25,-0x33,-0x1b,-0x1e)+'us'](_0x58d482,TaskStatus[_0xa65c52(0x43a,0x3c3,0x4b0,0x425)]);continue;case'5':_0x390634=!![];continue;}break;}}console[_0xa65c52(0x3ea,0x457,0x303,0x3a6)](_0x2c7940['OLuHJ'],_0x449252);const _0x1170e1=_0xa65c52(0x437,0x4ce,0x440,0x4ae)+_0x449252['message'];_0x5157a8&&_0x2c7940[_0x4e3a6c(0x69,0xb4,-0x12,0x6c)](_0x5157a8,_0x1170e1);toastr[_0xa65c52(0x37f,0x44a,0x3c6,0x3a6)](_0x449252['message']),taskQueue[_0xa65c52(0x444,0x4d4,0x4a6,0x446)+'sk'](_0x58d482,![]),llmTaskControllers['delete'](_0x58d482);const _0x343461={};_0x343461[_0x4e3a6c(-0x51,0x5e,-0x3a,0x26)]=![],_0x343461[_0xa65c52(0x408,0x3da,0x2eb,0x376)]=_0x1170e1,_0x343461['id']=_0x4d4e20,eventSource['emit'](eventNames[_0xa65c52(0x2fb,0x3fc,0x3bc,0x388)+_0xa65c52(0x51a,0x493,0x521,0x4f4)],_0x343461);}finally{_0x2c7940[_0xa65c52(0x416,0x3ad,0x480,0x457)](_0x2c7940['gtZRf'],_0x2c7940[_0x4e3a6c(0x5b,-0x25,0x7d,0x99)])?_0x2c7940[_0xa65c52(0x43e,0x3a8,0x411,0x3e8)](_0x1d428f):(_0x2c7940['yHkBC'](currentLLMRequestController,_0x43bd6f)&&(currentLLMRequestController=null),(!_0x390634||_0x2c7940[_0x4e3a6c(-0xa3,-0x6b,-0xed,-0xbf)](currentLLMRequestController,null))&&_0x2c7940['elDJg'](stopFabLoading));}}export function createGetPromptHandler(_0x4d19ff,_0x2b0f1a){const _0x407bcb={'zhCyr':function(_0xafac08,_0x433da9){return _0xafac08(_0x433da9);}};return function(_0x4bdbc9){function _0x3949e3(_0x3323df,_0x4ab808,_0x2d9cc8,_0x13fe50){return _0x2d4d(_0x4ab808-0x327,_0x2d9cc8);}const {id:_0x52b44a}=_0x4bdbc9;if(!_0x52b44a)return;const _0xd9403b=REQUEST_TYPE_NAMES[_0x4d19ff]||_0x4d19ff;console[_0x326b57(0x59,0xfb,0x5,-0x14)](_0x326b57(-0x18,-0x56,-0xcb,0x6c)+_0x3949e3(0x4e8,0x57d,0x52f,0x518)+_0xd9403b+(_0x326b57(0x39,0x58,0x8b,0x9)+'D:\x20')+_0x52b44a+')');const _0x115b37=_0x407bcb[_0x326b57(0x143,0xd4,0x1a0,0x123)](buildPromptForRequestType,_0x4d19ff),_0x59c029={};function _0x326b57(_0x35a0b0,_0x573814,_0xe81740,_0x521ead){return _0x2d4d(_0x35a0b0- -0x13f,_0xe81740);}_0x59c029[_0x3949e3(0x58c,0x520,0x529,0x54f)]=_0x115b37,_0x59c029['id']=_0x52b44a,eventSource[_0x3949e3(0x4f0,0x458,0x4ad,0x439)](_0x2b0f1a,_0x59c029);};}export function createExecuteHandler(_0x57826a,_0x348652,_0x53d801=null){const _0x4b689e={'oKdvp':function(_0x1f3d60){return _0x1f3d60();},'QwxVs':function(_0x1f92d0,_0x1358ab,_0x38fe01,_0x3253e4,_0x1570f8){return _0x1f92d0(_0x1358ab,_0x38fe01,_0x3253e4,_0x1570f8);}};return async function(_0x145b32){function _0x45b517(_0x318c0f,_0x86b38a,_0x9afc6a,_0xf37c87){return _0x2d4d(_0x9afc6a-0x394,_0x86b38a);}function _0x530e1a(_0x46abcc,_0x578d5d,_0x32097a,_0x3b934b){return _0x2d4d(_0x3b934b-0x2b2,_0x578d5d);}const _0xd28f6a=_0x53d801?_0x4b689e[_0x45b517(0x52e,0x584,0x565,0x566)](_0x53d801):null;await _0x4b689e[_0x45b517(0x664,0x5dd,0x5d9,0x5ce)](executeTypedLLMRequest,_0x145b32,_0x57826a,_0x348652,_0xd28f6a);};}