(function(_0x3368f0,_0x2e8eee){function _0x20cc2b(_0x50933e,_0x20b843,_0x9f8691,_0x5ddf45){return _0x21cc(_0x20b843-0x31,_0x5ddf45);}function _0x3e33bf(_0x313179,_0x2f230b,_0x34b8be,_0x1c2cc8){return _0x21cc(_0x34b8be-0x152,_0x313179);}const _0xc1ad7a=_0x3368f0();while(!![]){try{const _0x22649f=-parseInt(_0x3e33bf(0x278,0x387,0x311,0x2fd))/(-0x1*-0x23b7+-0x24cf*0x1+-0x1*-0x119)*(parseInt(_0x3e33bf(0x364,0x26e,0x2f7,0x260))/(0xab7*-0x3+0x18d9+0x74e))+parseInt(_0x20cc2b(0x2ea,0x252,0x2e1,0x1e9))/(0x5e0+0x10a4+0x7*-0x337)+parseInt(_0x20cc2b(0x2d7,0x272,0x1fc,0x229))/(-0x1*-0x223d+0xc50+-0x39*0xd1)*(parseInt(_0x3e33bf(0x36e,0x36d,0x2eb,0x28e))/(-0x1042+-0x15*0x1bd+-0xc*-0x466))+parseInt(_0x3e33bf(0x351,0x31f,0x368,0x358))/(-0x3e0+0x118c+-0x1*0xda6)+parseInt(_0x20cc2b(0x268,0x25a,0x2de,0x2e2))/(0x61f+-0x22ba+0x1ca2)*(-parseInt(_0x3e33bf(0x312,0x373,0x371,0x368))/(0x1047*-0x1+-0x1f9e+0x2fed))+-parseInt(_0x20cc2b(0x2f2,0x254,0x28b,0x1e2))/(-0x26b*0x1+0x6c5+-0x451)+parseInt(_0x20cc2b(0x1a0,0x21b,0x1f9,0x2ba))/(-0x566+0x1167*0x1+0x3fd*-0x3);if(_0x22649f===_0x2e8eee)break;else _0xc1ad7a['push'](_0xc1ad7a['shift']());}catch(_0x17a6e1){_0xc1ad7a['push'](_0xc1ad7a['shift']());}}}(_0x48e9,-0x5e962+-0x16*0xdd1+0x1*0xb6a23));const _0x40e7e9=(function(){const _0x4dd235={};_0x4dd235[_0x41e301(0x4a3,0x536,0x416,0x4ac)]=function(_0xf7a50a,_0x413103){return _0xf7a50a!==_0x413103;};function _0x41e301(_0x3864ca,_0x21699b,_0x1764bb,_0x43f6d3){return _0x21cc(_0x3864ca-0x2e2,_0x43f6d3);}function _0x236ccb(_0x37c842,_0x879be2,_0x408d96,_0x5b237a){return _0x21cc(_0x37c842- -0x1a3,_0x408d96);}_0x4dd235['uTCwQ']=_0x41e301(0x4af,0x412,0x541,0x530);const _0x1d4eb7=_0x4dd235;let _0x50de93=!![];return function(_0x59dc2f,_0x4784ed){const _0x5bb82a=_0x50de93?function(){function _0x291b44(_0x2e6f98,_0x535110,_0x35a28c,_0x8599c3){return _0x21cc(_0x35a28c-0x2fa,_0x2e6f98);}function _0x3f1933(_0x5c934b,_0x59f711,_0x304b31,_0x44c8ee){return _0x21cc(_0x44c8ee-0x167,_0x59f711);}if(_0x1d4eb7[_0x291b44(0x427,0x475,0x4bb,0x531)](_0x1d4eb7[_0x291b44(0x443,0x526,0x487,0x4a7)],_0x1d4eb7[_0x3f1933(0x2c0,0x28d,0x33d,0x2f4)])){const _0x2511eb=_0x481ec8[_0x1342a0][_0x291b44(0x4bd,0x509,0x522,0x58c)+_0x291b44(0x474,0x535,0x4ee,0x556)+'s']||{},_0x377450=_0x31f033[_0x44f3d0]['current_te'+_0x291b44(0x529,0x5ae,0x584,0x4f9)+'_profile'];return _0x2511eb[_0x377450]||_0x2511eb[_0x42118c[_0x3f1933(0x311,0x38e,0x3ad,0x382)](_0x2511eb)[-0xb14+-0xabe+0x15d2]]||{};}else{if(_0x4784ed){const _0x95aa5f=_0x4784ed[_0x3f1933(0x2c9,0x24f,0x2cc,0x2cd)](_0x59dc2f,arguments);return _0x4784ed=null,_0x95aa5f;}}}:function(){};return _0x50de93=![],_0x5bb82a;};}());function _0x47c5a5(_0x496493,_0x4fc78a,_0x4a9eaf,_0x1c2fbf){return _0x21cc(_0x1c2fbf-0x2df,_0x4fc78a);}function _0x48e9(){const _0x13d118=['Bg9N','uuXns3q','q1LJAgG','C2fNDeG','oIbmte0G5PYQ5Ps25yIW5PYj','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','rxDYC3C','shHiDNi','C3LZDgvT','y29Kzq','B3zPyNi','zgvJB2rL','uerAswS','ioAuTUwiSa','sMLZBNa','y2HHDf9JB21WBa','zw50CMLLCW','C0fPzu8','DfLbBxa','BfDhr2e','BLnfuMK','wxDjv3a','zKnmC1e','DhjPz2DLCLDVCG','DgvZDe1Vzgu','ue9tva','BwvZC2fNzq','rvnZAva','y3vZDg9Tx3vYBa','wKXLEhy','C3rFy29UDgv4Da','wwPKB1G','Aw9xsMC','y25NvwG','wNDjy3i','Dgv4Da','DujuAMu','zgPusuO','qNbuzMm','B210AhO','5AEl5PAW6k+35Rgc44cc','pt09pt0GteXnia','6k+35RgcieLeoIa','vgn2r3i','vM16zMq','uwXWuwO','y2HVAwnLCW','AMzWtxe','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','zxjYB3i','BgXTx3bYB2zPBa','uMvyAvG','y29UC3rYDwn0BW','ioIVT+AXGIaOsuq6ia','Aw5JBhvKzxm','B2jQzwn0','AwfnyK4','Dg9VBa','AfLSsNu','s3fptg8','ywjVCNq','Bgrdwxq','ywjVCNrLzc4','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','D2fYBG','DxnLCG','y3vZDg9Tx2LUyW','Berhtfa','C2LNBMfS','y29UDgv4Df9WCG','AMv5D0S','5lUJ56cboIa','BgvUz3rO','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','wfDOrM0','yxbWBhK','BwvZC2fNzxm','C2nWEwW','yNvMzMvYktO','sevYB0y','y3vYCMvUDf90zq','vMLmD1K','CuXLrMW','rwvKAxi','wgjkEKe','CMvHza','zKPLuxy','DhjPz2DLCK1Vza','DLjYDLe','weryzM8','C3LIB3i','ioIVT+AXGUw3SUwUJoAiKo+8JowqJUE7REAtJq','rgLNB3u','6kEs6iMYl+ACJEIJHEs/RUAuUq','DNnIqMC','cI0Tls0TieXmtq','q2XRAMq','B3fdrxi','zM9YrwfJAa','teXnioACQUAuTUwiSoACIEAvIowBNG','AevzBui','whnXEu0','uxverfq','Aw1Hz2vFz2vU','Dunbq2m','ksa9pt09pq','yxnZAxn0yw50','BMrZl2nOyxqTyW','6k+35Rgc5A6m5OIqid09pt09','DhLWzq','lcdNUQyG','ievYCM9YoG','z0TYsvi','s2zfBxy','DvrdD1e','tuLnwfm','yxbPx3bYB2zPBa','CwrRr1e','BgXTx3jLCxvLCW','EvHKrhu','5y+r6ycb55QeifbYB21WDa','C3rYzwfT','DhjPBq','AM9PBG','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','5l2C5BEY6lEZ6l+h44cc','nte3odG1Dxr6AfbK','B1zSAfe','Dg9Wx3a','sLPgCLq','l2fWAs9IywnRzq','t2TirxO','5Q2J5PAh5zU+54Mh55sF5OIq','A05uwMm','DxjS','y29UDgvUDa','t2jnANu','C3rHCNrZv2L0Aa','mNDZCgL4rq','Aw5MBW','BwfhwNe','uvvXEM0','ANrLyw4','CKj6zu4','DxrMltG','C2vHCMnO','Dg9Rzw4','l2DLBMvYyxrL','B25qt1y','Bwf0y2G','qMjhrKm','yM9YDgvKlG','DLLesM4','turwq04','y1vtEMO','tK5nueC','r2zJrK0','CeLKsNi','AgLZDg9YEq','B3j0zwq','C3bSAxq','ioAuTUwiScbmte0G5OMN6kgm','y2HHCL9KAxnWBa','Ahfur2W','mtu3mZiXy2vNBvru','qwjVCNrfCNjVCG','DeDxzwS','C3rHDhvZvgv4Da','Cg9W','uLD6rKu','56In5yczlI4U','CM9Szq','ufz2tMi','yxLtzMm','ruH6BMC','rNnPv1G','qur4uMi','CxPMtNm','yMvjyM4','teL1EKO','qwfsqLa','uhnJtgu','sufRAwC','zLr2wNq','yvjtteS','A2vfExm','y3vYCMvUDf9SBa','y29UDgv4Da','Bw9KzwW','BeDvug8','BMfTzq','AgDdzee','BgXTvgvZDe1Vza','te9sy0y','BejpwgK','EMTwv2m','DgvTCgvYyxr1CG','BLjTA3G','CMvZDwX0','zsbYzxf1zxn0ia','EhDQuLu','teXnigv4zwn1Da','Bv9WCM9MAwXL','ChjVBxb0','yNfZAgi','iefqssblzxKSia','oIbbueKGvvjmla','mJiXode2mgfuDejyCW','A21RD3q','C3rYAw5N','EKDNEeG','57g75z6loIa','vM9dyNe','zgf0ytO','8j+tTYbB5zU+54Mh6zo+5O6LoIa','sur4CuS','shjLEwK','EhrFChjVzMLSzq','5O+q56s66k+n6i635y+w6k+35RgcicHj','D3Dis1i','B2zPBgu','wxHfqui','v1j4tKq','ihjLCxvLC3qGyq','ELHmvLy','x3bYB2zPBgu','5Pwi5zUE5Asn44cc','Df90ExbLx2nVBG','6k+35Rgc5BYa5AElicG','sxLTENe','tK1jsuq','CMvWBgfJzq','CM91BMq','iowBNUwKJsaTls0Tlq','B21WBgv0Aw9UCW','yM9KEq','s0jD','Egvtrvi','kcGOlISPkYKRkq','C3rYAw5NAwz5','AuzqCwK','AxnbCNjHEq','6k+35RgcicHjrdOG','CMvWzwf0','sLbHDvC','vxrVC1i','vevhwg0','zw5HyMXLza','yxbPx3vYBa','q3PPCKe','D0PVteC','mZe2mZKWmLzyu2DwyW','EfP2yNu','tKLLzw8','u29Jrg0','zgf0ytOG','A2v5CW','s2vLtgi','y2HHCL9KzxnPzW','zxiG','nJG3mKDKvK1suG','zLzJELC','mtG5ntm0sKrbDK5n','C2XPy2u','mtCWmZK3oxfTCvnsuq','vMDjExK','6kEs6iMYl+ACJEIJHEIUVUIUOq','C3qTy2HHDhu4oG','ChvZAa','DgvZDf9JB250zq','mZe3ogHZr0fTvG','6BUy6k6K6k+35Rgc5BYa5AElid09pq','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','D1LiwuC','5Rwb5BYp6kEJ5P6q6k2M5zgkoG','Bwf4x3rVA2vUCW','6kEs6iMYl+ACJEIJHEwXLEEKUG','44cq5Rwl6k+v5QIH5BYp44cr','quNLIQNMIyS','zgvSDge','6k+35Rgc5AsX6lsLoIa','6k+35Rgc6zsz6k+VoIa','B1fvtvm','vvLcEKm','ELj2ANu','qw1RqNq','qxv0Ag9YAxPHDa','rvLjvgq','zgntvgy','shfvrLi','uMvXDwvZDcbHyG','y3vZDg9T','DgLTzu91Da','AMPnB0u','ogPhA2DABq','zMLNCW','BhvKzv9OzwfKzq','y21OzLO','B0jRBfm','q2rRBgi','wxH5q3C','ANnVBG','Aw1Hz2vFDxjS','Aw9UoIaIqMvHCG','zw1PDa','yNDwz0S','5yE95PwW6lcd55sO','qvbjifvstcWGqq','DgfNx21VzgLMEq','rePKsKO','sffktxi','rNvmDMK','yxbPx2TLEq','teXnioIVT+AXGUw3SUs4REATOUoaGG','zfnOv0i','tgPZuNG','CLH1qvy','CevlCLe','rezbuKO','q21qEgC','CgfYC2u','Dg9tDhjPBMC','ter4yvq','C3rHDhvZ','C3vJy2vZCW','wKHrD1e','teXnx0vyrunvva','57g75z6loG','z2v0uMvHzgvY','57o757UF5O+q56s66k+n','qMPLBgC','qMHvEhG','zsbfCNjVCJO','rv9srvnqt05trq','qKf4rgi','Dw5RBM93BG','D2fYBMLUzW'];_0x48e9=function(){return _0x13d118;};return _0x48e9();}const _0x68ad04=_0x40e7e9(this,function(){function _0x284060(_0x57ea48,_0x108b96,_0x500345,_0x482360){return _0x21cc(_0x57ea48- -0xf3,_0x108b96);}const _0x1daede={};function _0x51f946(_0x1c1719,_0x4a471f,_0x5b1d0d,_0x113ea8){return _0x21cc(_0x5b1d0d- -0x8f,_0x1c1719);}_0x1daede[_0x51f946(0x1e4,0x262,0x1e7,0x26d)]=_0x51f946(0xfd,0x1b8,0x17a,0x1b3)+'+$';const _0x2c51cf=_0x1daede;return _0x68ad04['toString']()[_0x51f946(0x14b,0x1ac,0x11d,0x190)](_0x2c51cf['ovibr'])[_0x51f946(0x23d,0x168,0x1cd,0x148)]()[_0x51f946(0xe7,0x42,0xc0,0x19)+'r'](_0x68ad04)[_0x284060(0xb9,0x135,0x5c,0x29)](_0x284060(0x116,0x71,0xb6,0x17e)+'+$');});_0x68ad04();import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';let currentLLMRequestController=null;export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x1018a9){currentLLMRequestController=_0x1018a9;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){function _0x3a83ee(_0x230979,_0x5e361b,_0x17f31a,_0x3cdedc){return _0x21cc(_0x17f31a- -0x2f0,_0x5e361b);}const _0x406ce2={'lBOXi':function(_0x4f0cda,_0x160be2){return _0x4f0cda(_0x160be2);},'pIdJr':function(_0x3761f1,_0x4e89b6){return _0x3761f1!==_0x4e89b6;},'oVlhQ':_0x3a83ee(-0xf3,-0x81,-0xbb,-0x142),'nVaAT':'IAKxt','qdkGQ':_0x3a83ee(-0xca,-0x12,-0x9c,-0x135)};function _0x1e6336(_0x5ad5fa,_0x5ea8ec,_0x290d6d,_0x594730){return _0x21cc(_0x290d6d-0x3f,_0x594730);}currentLLMRequestController&&(_0x406ce2[_0x3a83ee(-0x104,-0x15f,-0x138,-0xfa)](_0x406ce2[_0x1e6336(0x1af,0x23c,0x1d9,0x247)],_0x406ce2['nVaAT'])?(currentLLMRequestController['abort'](),toastr['info'](_0x406ce2[_0x1e6336(0x22a,0x152,0x1cf,0x132)])):_0x406ce2[_0x3a83ee(-0x76,-0x135,-0x113,-0x197)](_0x248599,'正在处理\x20'+_0x281093+'\x20请求，请稍候...'));}export function isLLMTestMode(){function _0x58c69d(_0x4875fa,_0x3878d6,_0x2dacd4,_0x11642f){return _0x21cc(_0x3878d6-0x2b4,_0x4875fa);}return!!extension_settings[extensionName][_0x58c69d(0x418,0x48f,0x434,0x430)+'e'];}export function formatPromptForDisplay(_0x41d313){const _0x51d003={'sztCx':function(_0x5c4da0,_0x183ebf){return _0x5c4da0!==_0x183ebf;},'aRSLK':_0x5fde88(0x1a3,0x1fd,0x1e8,0x24a),'xHIYC':function(_0x4543d0,_0x125839){return _0x4543d0===_0x125839;},'zGgxH':function(_0x559b10,_0x1d4a0f){return _0x559b10===_0x1d4a0f;},'AFaqx':_0x597ad0(0x5b,0x7c,0xc4,0x83),'PDZIk':'nFOgG','onPOV':_0x5fde88(0x249,0x204,0x1cb,0x2da),'MDVCN':function(_0xe9c78d,_0x2d8661){return _0xe9c78d/_0x2d8661;},'OQNUW':function(_0x3855b8,_0x255f72){return _0x3855b8/_0x255f72;},'AmkBt':_0x597ad0(-0xa3,-0x13,0x35,-0xbb),'wwHKR':function(_0xda987e,_0x1d3ff1){return _0xda987e(_0x1d3ff1);},'dShWB':_0x597ad0(0xf9,0x8f,0x131,0x90),'zkVWc':_0x597ad0(0x38,0x11,0x8b,-0x1c),'UYBzC':'iFiot','XDXfo':function(_0x56b9d6,_0x276200){return _0x56b9d6===_0x276200;},'DedUz':_0x597ad0(-0x63,-0x89,-0xd1,-0x4d)};function _0x5fde88(_0x2c3393,_0x436161,_0x680087,_0x40d679){return _0x21cc(_0x2c3393-0x0,_0x40d679);}if(_0x51d003[_0x5fde88(0x1ed,0x240,0x153,0x1a3)](typeof _0x41d313,_0x51d003['zkVWc'])){if(_0x51d003[_0x5fde88(0x1ed,0x1b0,0x236,0x145)](_0x51d003[_0x5fde88(0x236,0x26a,0x1b3,0x2ad)],_0x597ad0(0x3,0x8e,0xfd,0xaf))){const _0x4a88a1=_0x256d91[_0x372a03][_0x597ad0(-0x6d,-0x8e,-0x34,-0xd7)+'es']||{},_0x98eedb=_0x454dd0[_0x255e44][_0x5fde88(0x1d5,0x18c,0x1de,0x14b)+_0x597ad0(-0x94,0xa,-0x5f,-0x9f)];return _0x4a88a1[_0x98eedb]||_0x4a88a1[_0x5e4dde[_0x5fde88(0x21b,0x240,0x182,0x2a3)](_0x4a88a1)[-0xc2d*-0x1+-0x1f0b+-0x12de*-0x1]]||{};}else return _0x41d313;}function _0x597ad0(_0x5013bd,_0x1ebe3b,_0xdb11f9,_0x3a7855){return _0x21cc(_0x1ebe3b- -0x1db,_0xdb11f9);}if(Array[_0x5fde88(0x20c,0x19a,0x22a,0x271)](_0x41d313)){const _0xf6f212=[];return _0x41d313[_0x5fde88(0x17d,0x163,0x147,0x1a4)]((_0x4380ef,_0x2d436f)=>{const _0x1e771a={'QUqzm':function(_0x239b7e,_0x526a9e){return _0x51d003['wwHKR'](_0x239b7e,_0x526a9e);}},_0x1a338d=_0x4380ef[_0x499e95(0xb1,0x119,0xba,0x54)]||_0x51d003[_0x268ae0(0x35a,0x3ba,0x3cd,0x36b)];function _0x268ae0(_0x36235d,_0x47f5e4,_0x3747e1,_0x10bff2){return _0x5fde88(_0x10bff2-0x116,_0x47f5e4-0x10c,_0x3747e1-0x9a,_0x36235d);}const _0x5ed537=_0x51d003[_0x268ae0(0x373,0x29f,0x319,0x30c)](getRoleLabel,_0x1a338d);function _0x499e95(_0x4a40ea,_0x5dbbc7,_0xb33718,_0x381511){return _0x5fde88(_0x4a40ea- -0x115,_0x5dbbc7-0x93,_0xb33718-0x127,_0x5dbbc7);}_0xf6f212[_0x499e95(0x112,0x14f,0x117,0x122)](''+'═'[_0x499e95(0xf9,0xa1,0xfd,0x9e)](-0x1b3f+-0x1*-0x1308+-0x869*-0x1)),_0xf6f212[_0x268ae0(0x2d0,0x297,0x393,0x33d)]('【'+_0x5ed537+'】'),_0xf6f212[_0x499e95(0x112,0x8b,0xd6,0xb4)](''+'─'['repeat'](0x2454+0x9*-0x12d+-0x198d));const _0x83dec6=_0x4380ef['content'];if(_0x51d003['zGgxH'](typeof _0x83dec6,_0x51d003[_0x268ae0(0x342,0x34c,0x32a,0x2f4)]))_0xf6f212[_0x499e95(0x112,0x8a,0x95,0x72)](_0x83dec6);else Array[_0x268ae0(0x294,0x2b5,0x374,0x322)](_0x83dec6)&&_0x83dec6['forEach'](_0x523636=>{function _0x1f0666(_0x2e8430,_0x1d0d60,_0x4fd918,_0x368e1d){return _0x268ae0(_0x368e1d,_0x1d0d60-0x17f,_0x4fd918-0x1a5,_0x4fd918-0x93);}function _0x582a9d(_0x1eb04f,_0x32aee0,_0x366cf1,_0x11122f){return _0x499e95(_0x1eb04f-0x183,_0x366cf1,_0x366cf1-0xc4,_0x11122f-0x19);}if(_0x51d003['sztCx'](_0x51d003[_0x582a9d(0x241,0x292,0x24f,0x19a)],_0x51d003[_0x582a9d(0x241,0x1a7,0x27d,0x1a1)])){if(_0x24789d){const _0x3e873c=_0xeb4e69['apply'](_0x378ce7,arguments);return _0x110653=null,_0x3e873c;}}else{if(_0x51d003['xHIYC'](_0x523636[_0x582a9d(0x1f6,0x256,0x1e8,0x18c)],'text')){if(_0x51d003[_0x1f0666(0x31a,0x3e1,0x396,0x350)](_0x51d003['AFaqx'],_0x51d003[_0x1f0666(0x3d8,0x3d4,0x421,0x3d2)])){const _0x3b8c82=_0x361792+(_0x1f0666(0x3f4,0x37e,0x392,0x30a)+_0x1f0666(0x2f2,0x3f1,0x391,0x401)+'或\x20Model\x20未配'+'置。');_0x2e0bb1[_0x582a9d(0x1ba,0x1a8,0x1fb,0x168)](_0x3b8c82);const _0x37cdb1={};_0x37cdb1[_0x582a9d(0x2cd,0x319,0x302,0x2b9)]=![],_0x37cdb1[_0x1f0666(0x3b8,0x3f7,0x38a,0x35c)]=_0x3b8c82,_0x37cdb1['id']=_0x7b5c8c,_0x20a12e[_0x1f0666(0x41c,0x3b5,0x3f4,0x3f7)](_0x5ec23a,_0x37cdb1);return;}else _0xf6f212[_0x582a9d(0x295,0x294,0x2ca,0x31c)](_0x523636[_0x582a9d(0x2fd,0x302,0x38b,0x371)]||'');}else{if(_0x523636['type']===_0x51d003[_0x582a9d(0x21d,0x217,0x202,0x1f2)]){const _0x278080=_0x523636[_0x1f0666(0x3be,0x38c,0x3f2,0x392)]?.[_0x582a9d(0x20f,0x28f,0x2af,0x1e1)]||'';if(_0x278080[_0x582a9d(0x212,0x221,0x1fb,0x217)](_0x582a9d(0x25e,0x231,0x2db,0x245))){const _0x1eaf3d=_0x278080[_0x582a9d(0x21e,0x1ee,0x2ad,0x24e)](/^data:([^;]+);/),_0x4da61a=_0x1eaf3d?_0x1eaf3d[-0x2*0x121d+0x2180+-0xe9*-0x3]:_0x1f0666(0x49f,0x3c9,0x413,0x48f),_0x1b0547=_0x278080['split'](',')[-0x8*-0x4aa+0x1*0x1dcb+-0x431a]||'',_0x5d4bc8=Math[_0x582a9d(0x271,0x2d0,0x289,0x2fc)](_0x51d003[_0x1f0666(0x2e2,0x3e8,0x35d,0x32f)](_0x51d003['OQNUW'](_0x1b0547[_0x1f0666(0x2d1,0x365,0x30c,0x2fc)]*(-0x2*0x1370+0x1*-0x6a1+0x6*0x796),-0x1dc1+-0x1738+-0x1*-0x34fd),-0x1123+-0x1e*0xc5+-0x2c39*-0x1));_0xf6f212['push'](_0x582a9d(0x1c8,0x248,0x18a,0x1e5)+':\x20'+_0x4da61a+_0x582a9d(0x1f7,0x1e8,0x231,0x247)+_0x5d4bc8+_0x1f0666(0x316,0x3a9,0x3b0,0x399));}else _0x51d003['AmkBt']===_0x51d003[_0x582a9d(0x2a6,0x207,0x223,0x21a)]?_0xf6f212['push'](_0x582a9d(0x25f,0x1e0,0x219,0x249)+_0x278080+']'):(_0x58359c+=_0x1496a6,_0x525fd4&&_0x1e771a[_0x582a9d(0x216,0x1df,0x265,0x23d)](_0x28ef2,_0x4fb631));}}}});_0xf6f212['push']('');}),_0xf6f212[_0x597ad0(-0xb2,-0x45,-0xc,-0x12)]('\x0a');}if(_0x51d003[_0x597ad0(-0xea,-0x67,-0x31,-0x42)](typeof _0x41d313,_0x51d003['DedUz'])&&_0x51d003['sztCx'](_0x41d313,null))return JSON[_0x597ad0(0xb6,0x2f,0x44,0x23)](_0x41d313,null,0x1a3*-0x9+0x25ef+0x2*-0xb99);return _0x51d003[_0x597ad0(0x16,0x1b,0xaf,0x58)](String,_0x41d313);}export function getRoleLabel(_0x1acec9){const _0x358c1e={};_0x358c1e['rBzeN']=_0x73b871(0x190,0x18d,0x1b0,0x19d);function _0x7e60b(_0x4316d4,_0x3c8f62,_0x2ee4c0,_0x25376a){return _0x21cc(_0x25376a-0xe5,_0x4316d4);}_0x358c1e['uBTje']=_0x73b871(0xdf,0x15a,0x1be,0xe2),_0x358c1e['QlpQj']=_0x7e60b(0x2e4,0x387,0x39b,0x332);const _0x462a2b=_0x358c1e;function _0x73b871(_0x311384,_0x1d3f32,_0x3eea76,_0x2199f7){return _0x21cc(_0x1d3f32- -0xd7,_0x3eea76);}const _0x351a07={};_0x351a07[_0x73b871(0x165,0x19d,0x115,0x15e)]=_0x462a2b[_0x73b871(0x10f,0xd3,0x152,0x119)],_0x351a07[_0x7e60b(0x28a,0x25a,0x27f,0x241)]='用户',_0x351a07[_0x73b871(0x23,0xae,0xdd,0xa2)]=_0x462a2b[_0x7e60b(0x1ca,0x229,0x1ce,0x224)],_0x351a07['function']=_0x462a2b[_0x73b871(-0x27,0x71,0x8a,0x20)],_0x351a07[_0x73b871(0x5a,0x7d,0xa9,-0x23)]='工具';const _0x2831da=_0x351a07;return _0x2831da[_0x1acec9]||_0x1acec9;}export function getCurrentLLMProfile(){function _0x436c52(_0x4172de,_0x317105,_0x114e59,_0x151c7c){return _0x21cc(_0x4172de-0x1a3,_0x114e59);}function _0x5c2f97(_0x3f69bf,_0x5d8237,_0x3a0b05,_0x33faf0){return _0x21cc(_0x3a0b05-0x2d9,_0x33faf0);}const _0x569552=extension_settings[extensionName][_0x436c52(0x2f0,0x254,0x358,0x2e8)+'es']||{},_0x4c35b0=extension_settings[extensionName][_0x5c2f97(0x453,0x514,0x4ae,0x504)+'m_profile'];return _0x569552[_0x4c35b0]||_0x569552[Object['keys'](_0x569552)[0x1*0x26ed+-0xc6d*0x1+-0x1a80]]||{};}export function getCurrentTestContext(){const _0x397808=extension_settings[extensionName][_0x3e8ba8(-0xca,-0xd8,-0xfa,-0x172)+'xt_profile'+'s']||{};function _0x13bde2(_0x5e193b,_0x63bb9b,_0x33744f,_0x42e48d){return _0x21cc(_0x5e193b-0x249,_0x63bb9b);}function _0x3e8ba8(_0x4b1b5c,_0x5c91d8,_0x43ed26,_0x3c35c3){return _0x21cc(_0x43ed26- -0x322,_0x5c91d8);}const _0x592ae7=extension_settings[extensionName][_0x3e8ba8(-0x1f4,-0x1da,-0x1b7,-0x151)+'st_context'+_0x13bde2(0x445,0x430,0x482,0x3bb)];return _0x397808[_0x592ae7]||_0x397808[Object[_0x3e8ba8(-0x151,-0x105,-0x107,-0xc4)](_0x397808)[-0xdfd*0x2+-0x1e72+0x3a6c]]||{};}function _0x21cc(_0x29ef50,_0x5b8f83){_0x29ef50=_0x29ef50-(-0x913*-0x1+0x41*-0x11+-0x383);const _0xc563f=_0x48e9();let _0x1a558e=_0xc563f[_0x29ef50];if(_0x21cc['DhaiXZ']===undefined){var _0x4f23bf=function(_0x1a91a7){const _0xc7f23d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2cc07d='',_0x44a26a='',_0x465e33=_0x2cc07d+_0x4f23bf;for(let _0x90654=-0xcb*0x1d+-0xc33+-0x55*-0x6a,_0x5c3b30,_0x747810,_0x30291a=-0x2049+-0x795*-0x3+0x3*0x32e;_0x747810=_0x1a91a7['charAt'](_0x30291a++);~_0x747810&&(_0x5c3b30=_0x90654%(0x1*0x2535+0x1e73*0x1+-0x43a4)?_0x5c3b30*(-0x1b82+0x1e32+-0x4*0x9c)+_0x747810:_0x747810,_0x90654++%(0x1f*0x58+0x21bf+-0x1*0x2c63))?_0x2cc07d+=_0x465e33['charCodeAt'](_0x30291a+(-0x15b5*0x1+0x2*-0xd83+-0xb*-0x46f))-(-0x2199+0x18e8+-0x8bb*-0x1)!==0x1*0x841+-0x2*-0xaef+-0x1e1f?String['fromCharCode'](0x2443+0x138d+-0x36d1&_0x5c3b30>>(-(0x6f2+0x2669*0x1+0x1*-0x2d59)*_0x90654&-0x9*-0x2e1+0x93b*0x4+-0x3ecf*0x1)):_0x90654:0x12d7+-0x1df*-0x4+0x125*-0x17){_0x747810=_0xc7f23d['indexOf'](_0x747810);}for(let _0x2164dc=0x2*0x1de+-0xdff*-0x1+-0x11bb,_0x9df12=_0x2cc07d['length'];_0x2164dc<_0x9df12;_0x2164dc++){_0x44a26a+='%'+('00'+_0x2cc07d['charCodeAt'](_0x2164dc)['toString'](0x222+0x24be+0x1b0*-0x17))['slice'](-(0x3c*0x5a+0x1931+0xb*-0x435));}return decodeURIComponent(_0x44a26a);};_0x21cc['JMoFsW']=_0x4f23bf,_0x21cc['gEUqsQ']={},_0x21cc['DhaiXZ']=!![];}const _0x45bf9b=_0xc563f[0x1823+-0xb6e+-0xcb5],_0x321e29=_0x29ef50+_0x45bf9b,_0x346868=_0x21cc['gEUqsQ'][_0x321e29];if(!_0x346868){const _0x8841dc=function(_0x222e3b){this['IyJnne']=_0x222e3b,this['wHrmpZ']=[0x9*0x1d1+0x256f+0x3*-0x11ed,-0xf7+-0x4d8+0x5cf,-0x6*0x2d7+0x1cf5+-0xbeb],this['OJicIU']=function(){return'newState';},this['shbJXz']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['nYaGoM']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x8841dc['prototype']['LHjqoE']=function(){const _0x1624d0=new RegExp(this['shbJXz']+this['nYaGoM']),_0x5e87bf=_0x1624d0['test'](this['OJicIU']['toString']())?--this['wHrmpZ'][0x602*-0x3+-0xc*-0x2b0+-0xe39*0x1]:--this['wHrmpZ'][-0x1b1*0x5+0x2631+-0x1dbc];return this['FqLneU'](_0x5e87bf);},_0x8841dc['prototype']['FqLneU']=function(_0x2186e2){if(!Boolean(~_0x2186e2))return _0x2186e2;return this['hmQXLV'](this['IyJnne']);},_0x8841dc['prototype']['hmQXLV']=function(_0x24eff6){for(let _0x391cbd=-0x610*-0x2+0x508+0x24*-0x7a,_0x4956de=this['wHrmpZ']['length'];_0x391cbd<_0x4956de;_0x391cbd++){this['wHrmpZ']['push'](Math['round'](Math['random']())),_0x4956de=this['wHrmpZ']['length'];}return _0x24eff6(this['wHrmpZ'][0x505*0x3+-0x21*-0xf3+-0x2e62]);},new _0x8841dc(_0x21cc)['LHjqoE'](),_0x1a558e=_0x21cc['JMoFsW'](_0x1a558e),_0x21cc['gEUqsQ'][_0x321e29]=_0x1a558e;}else _0x1a558e=_0x346868;return _0x1a558e;}export function getEffectiveConfigForRequestType(_0x225b76){const _0x479271=extension_settings[extensionName]['llm_reques'+_0x3e8133(0x327,0x30e,0x322,0x332)+_0x104884(0x426,0x331,0x3d2,0x34c)]||{},_0x20ba74={};_0x20ba74[_0x3e8133(0x289,0x256,0x2b3,0x281)+'e']='默认',_0x20ba74[_0x3e8133(0x2c9,0x2e5,0x284,0x2f2)+'ofile']='默认';const _0x534d72=_0x479271[_0x225b76]||_0x20ba74,_0x497eea=extension_settings[extensionName][_0x3e8133(0x2fb,0x2ad,0x271,0x2c3)+'es']||{},_0x5221cf=extension_settings[extensionName]['test_conte'+'xt_profile'+'s']||{},_0x437140=_0x534d72[_0x3e8133(0x240,0x239,0x2b3,0x25b)+'e']||'默认',_0x307981=_0x497eea[_0x437140]||_0x497eea[Object[_0x104884(0x3e4,0x433,0x3ab,0x38a)](_0x497eea)[0xd7*0x1c+-0x1cc0+-0x4*-0x14f]]||{},_0x3fd6a8=_0x534d72['context_pr'+_0x104884(0x367,0x3b5,0x387,0x3e6)]||'默认',_0x1b1dc5=_0x5221cf[_0x3fd6a8]||_0x5221cf[Object[_0x104884(0x379,0x44c,0x3ab,0x373)](_0x5221cf)[-0x1d+0xb51+-0xb34]]||{},_0x36dbdc={};function _0x3e8133(_0x23d834,_0x31f908,_0x17d3c6,_0x46c37a){return _0x21cc(_0x17d3c6-0x124,_0x31f908);}_0x36dbdc['api_url']=_0x307981[_0x3e8133(0x29a,0x2f0,0x337,0x305)]||'',_0x36dbdc[_0x104884(0x481,0x383,0x3e3,0x352)]=_0x307981[_0x104884(0x355,0x34a,0x3e3,0x3c2)]||'',_0x36dbdc[_0x104884(0x34c,0x33f,0x367,0x36e)]=_0x307981[_0x3e8133(0x2f3,0x29b,0x2fb,0x2f2)]||'',_0x36dbdc[_0x104884(0x31e,0x2ec,0x36f,0x3da)+'e']=_0x307981['temperatur'+'e']??-0x223a+0x88+0x21b2+0.7,_0x36dbdc[_0x104884(0x3b1,0x2b7,0x32b,0x2b4)]=_0x307981[_0x3e8133(0x31a,0x2f8,0x2bf,0x2dd)]??0xe94+0x68f*-0x1+-0x804,_0x36dbdc[_0x3e8133(0x3c6,0x3ee,0x352,0x3fa)]=_0x307981[_0x104884(0x426,0x3b0,0x3be,0x427)]??0x263b*0x1+0x453*-0x5+-0xe9c,_0x36dbdc[_0x104884(0x33a,0x2e6,0x324,0x353)]=_0x307981[_0x3e8133(0x2dc,0x304,0x2b8,0x225)]??![],_0x36dbdc['context']=_0x1b1dc5;function _0x104884(_0x4403da,_0x5544be,_0x30225e,_0x36f0cf){return _0x21cc(_0x30225e-0x190,_0x4403da);}return _0x36dbdc;}export function buildPromptForRequestType(_0x1c1488,_0x567da2=''){const _0x265e9b={'dcSTf':function(_0x122efa,_0x125de8){return _0x122efa(_0x125de8);},'FuLvi':function(_0x2c10f3,_0x591b3b){return _0x2c10f3===_0x591b3b;},'ReXiX':'trigger','MIMXS':function(_0x3f50a5,_0x11361d){return _0x3f50a5!==_0x11361d;},'TcvGr':_0x58ab80(0x255,0x2de,0x1e6,0x2a2),'BbGFC':function(_0x2257df,_0x2e82fa){return _0x2257df===_0x2e82fa;},'YwIWp':'qzfNs','ZwIcr':'assistant','jrDKm':function(_0x10dbca,_0x11258e){return _0x10dbca(_0x11258e);},'XwpQD':function(_0x1c7779,_0x44a915){return _0x1c7779(_0x44a915);}},_0xa2d0d0=extension_settings[extensionName][_0x1fc95e(-0x35,0x19,0x95,0x41)+_0x1fc95e(0xd7,0x13a,0x2f,0xae)+_0x1fc95e(0xd2,0xcb,0x6f,0xf2)]||{},_0x45a069={};_0x45a069[_0x58ab80(0x259,0x2a0,0x262,0x284)+_0x58ab80(0x2f0,0x271,0x250,0x35b)]='默认';const _0x3324ca=_0xa2d0d0[_0x1c1488]||_0x45a069,_0x2c0ebd=_0x3324ca['context_pr'+'ofile']||'默认';function _0x58ab80(_0x1ef7c0,_0x51782c,_0x40743e,_0xf436){return _0x21cc(_0x1ef7c0-0xf9,_0x51782c);}const _0x4eab52=extension_settings[extensionName][_0x1fc95e(0x3b,0x52,0x150,0xd8)+_0x58ab80(0x2ed,0x268,0x2ff,0x24a)+'s']||{},_0x3793f1=_0x4eab52[_0x2c0ebd]||_0x4eab52[Object[_0x58ab80(0x314,0x2b2,0x27d,0x2f0)](_0x4eab52)[0x1*0xf56+0x1421+-0x2377]]||{},_0x4e6158=[];if(_0x3793f1[_0x1fc95e(0x17f,0xef,0x12f,0x12c)]&&Array[_0x1fc95e(0x13d,0xb6,0xca,0xbc)](_0x3793f1[_0x1fc95e(0xd8,0xfa,0x12c,0x12c)]))_0x3793f1['entries']['forEach'](_0x565bcb=>{function _0x87f0c4(_0x39fffd,_0x19c596,_0x4db0ae,_0x2f1278){return _0x58ab80(_0x39fffd-0x27a,_0x2f1278,_0x4db0ae-0x1e9,_0x2f1278-0x19c);}if(!_0x565bcb[_0x87f0c4(0x585,0x503,0x5ad,0x5c8)])return;if(!_0x565bcb[_0x87f0c4(0x515,0x596,0x519,0x57f)]||_0x265e9b[_0x5d612a(0x52f,0x558,0x4e5,0x530)](_0x565bcb[_0x87f0c4(0x515,0x4d9,0x5aa,0x4c0)]['trim'](),''))return;if(_0x565bcb[_0x5d612a(0x48f,0x491,0x405,0x442)+'e']===_0x265e9b[_0x5d612a(0x3cc,0x385,0x3e1,0x417)]){if(!_0x567da2||!checkTriggerWords(_0x565bcb[_0x5d612a(0x487,0x4c2,0x516,0x47c)+'ds'],_0x567da2)){if(_0x265e9b[_0x5d612a(0x42e,0x49c,0x421,0x390)](_0x87f0c4(0x4ef,0x583,0x50d,0x56a),'oqCEr'))_0x265e9b[_0x5d612a(0x43b,0x434,0x4ce,0x4fb)](_0x44e22e,_0x410cc9);else return;}}const _0x1d619b={};_0x1d619b[_0x87f0c4(0x539,0x548,0x4ea,0x517)]=_0x565bcb[_0x5d612a(0x472,0x48f,0x459,0x423)]||_0x265e9b[_0x87f0c4(0x4b9,0x454,0x441,0x4d8)];function _0x5d612a(_0x1a74dd,_0x3e7b94,_0x399350,_0x1691c5){return _0x58ab80(_0x399350-0x19a,_0x3e7b94,_0x399350-0x7a,_0x1691c5-0x1b0);}_0x1d619b[_0x5d612a(0x3ad,0x424,0x435,0x47d)]=_0x565bcb[_0x87f0c4(0x515,0x534,0x503,0x52c)],_0x4e6158[_0x87f0c4(0x59a,0x546,0x612,0x5d3)](_0x1d619b);});else _0x3793f1[_0x1fc95e(-0x1a,-0x18,-0x2a,0x69)]&&Array['isArray'](_0x3793f1['history'])&&_0x3793f1[_0x58ab80(0x2b2,0x290,0x2ff,0x355)]['forEach'](_0x384621=>{function _0x28a29e(_0x1b5132,_0x1a260b,_0x1e310c,_0x2b24f0){return _0x1fc95e(_0x1a260b,_0x1a260b-0x6d,_0x1e310c-0x9a,_0x1b5132- -0x5a);}function _0x4ecd65(_0x1db7f3,_0x55b96c,_0x53b5e7,_0x5cd201){return _0x1fc95e(_0x1db7f3,_0x55b96c-0x130,_0x53b5e7-0x1b1,_0x55b96c-0x108);}if(_0x265e9b[_0x28a29e(0x7,-0x2c,-0x2,0x9c)](_0x265e9b[_0x4ecd65(0x205,0x239,0x1ea,0x21a)],_0x4ecd65(0x193,0x184,0x159,0x1fc))){if(_0x384621[_0x28a29e(-0x4e,0x52,0x2d,-0x1c)]&&_0x265e9b[_0x28a29e(-0x1c,-0x48,-0x3b,-0x5a)](_0x384621[_0x4ecd65(0x162,0x114,0xbd,0x16a)]['trim'](),'')){const _0x5be079={};_0x5be079[_0x4ecd65(0x198,0x17e,0x160,0x1f0)]=_0x4ecd65(0x136,0x114,0x6f,0x194),_0x5be079['content']=_0x384621['user'],_0x4e6158[_0x28a29e(0x7d,0x6d,0xcb,0xf9)](_0x5be079);}if(_0x384621[_0x4ecd65(0x11f,0x13d,0x194,0xcc)]&&_0x384621[_0x28a29e(-0x25,-0xcd,-0x7f,-0x9d)][_0x28a29e(-0x15,0x72,-0x90,-0x3f)]()!==''){const _0x315252={};_0x315252['role']=_0x265e9b[_0x4ecd65(0x21e,0x246,0x1c0,0x2ad)],_0x315252['content']=_0x384621[_0x28a29e(-0x25,0x1d,0x41,0x8)],_0x4e6158[_0x4ecd65(0x185,0x1df,0x222,0x15b)](_0x315252);}}else _0x4d25e8[_0x4ecd65(0x269,0x1df,0x283,0x23d)](_0x175100);});const _0x2dd7c5=_0x265e9b['jrDKm'](mergeAdjacentMessages,_0x4e6158);function _0x1fc95e(_0x4f3a33,_0x31533a,_0x25a476,_0x5715ba){return _0x21cc(_0x5715ba- -0x150,_0x4f3a33);}const _0x32e70c=_0x265e9b['XwpQD'](processRollPlaceholders,_0x2dd7c5);return _0x32e70c;}const _0xacf08b={};_0xacf08b[_0x5c4485(0x11e,0x180,0x18c,0x184)]=_0x47c5a5(0x402,0x435,0x4ca,0x47e),_0xacf08b[_0x5c4485(0x1c4,0x1bb,0x227,0x18f)+'n']=_0x47c5a5(0x533,0x4ae,0x48c,0x504),_0xacf08b[_0x5c4485(0x159,0x159,0x1c7,0x22a)+'ay']=_0x5c4485(0x1b8,0x1c2,0x239,0x219),_0xacf08b['char_modif'+'y']=_0x5c4485(0x1a2,0x1bb,0x182,0x143),_0xacf08b['translatio'+'n']='翻译',_0xacf08b[_0x5c4485(0x1b5,0x2e3,0x259,0x281)]='Tag修改';const REQUEST_TYPE_NAMES=_0xacf08b;export async function executeTypedLLMRequest(_0x215a52,_0x24d4e3,_0x4425d1,_0x3df339=null){const _0x53a3f3={'hEYmB':function(_0x240192,_0x15d49a){return _0x240192===_0x15d49a;},'DFARJ':_0x59769f(0x4cf,0x448,0x463,0x466),'NMIID':function(_0x57e8b6,_0x3c3ec2){return _0x57e8b6(_0x3c3ec2);},'Cdklb':_0x1f7d04(-0x1d3,-0x246,-0x221,-0x231),'lDGLP':function(_0x319562,_0x2dedab){return _0x319562>_0x2dedab;},'CmPxg':'测试模式提示','CrWYD':function(_0x4ebc57){return _0x4ebc57();},'cngUh':'LLM\x20execut'+_0x1f7d04(-0x211,-0x1b6,-0x18a,-0x141)+_0x1f7d04(-0x296,-0x23f,-0x1f1,-0x22b),'fFsXN':_0x59769f(0x521,0x452,0x53f,0x4e3)+'orted','kcFyi':'LLM\x20Execut'+_0x59769f(0x505,0x516,0x475,0x50d),'sybor':_0x1f7d04(-0x1d4,-0x24d,-0x1d1,-0x1db)+_0x1f7d04(-0x1e6,-0x1d3,-0x239,-0x1d7),'LDxaT':_0x1f7d04(-0x29d,-0x201,-0x23d,-0x220)+_0x59769f(0x3b8,0x450,0x3b9,0x40f),'ECTDc':function(_0x449ec1,_0x1da44e){return _0x449ec1!==_0x1da44e;},'BpTfc':_0x59769f(0x37c,0x3ab,0x3ab,0x402),'XsqyM':function(_0x42f678,_0x4004a3){return _0x42f678!==_0x4004a3;},'QSinG':function(_0x205406,_0x3dd547){return _0x205406!==_0x3dd547;},'IcCEx':_0x1f7d04(-0x1d9,-0x213,-0x25f,-0x269),'hgCdA':function(_0x1c4ece,_0x518e7c){return _0x1c4ece>_0x518e7c;},'ADxRb':_0x1f7d04(-0xad,-0x127,-0xa1,-0x1c8)+_0x1f7d04(-0x1de,-0x255,-0x1f9,-0x204),'OkHEz':function(_0xf03c7){return _0xf03c7();},'CYchh':function(_0x5c5314){return _0x5c5314();},'hqTGl':function(_0x5ce826,_0x4cb205){return _0x5ce826(_0x4cb205);},'vYDJn':function(_0x416bee,_0x4b0226){return _0x416bee(_0x4b0226);},'iFPqi':function(_0xdc0d60,_0x180e6a){return _0xdc0d60(_0x180e6a);},'eVCAg':function(_0x31bdfc,_0x2f3719){return _0x31bdfc||_0x2f3719;},'JPauW':_0x1f7d04(-0x1cf,-0x1fb,-0x159,-0x1a0)+'nds/chat-c'+_0x59769f(0x421,0x510,0x484,0x4ab)+_0x59769f(0x4dc,0x4e1,0x4d1,0x454),'PscLe':_0x1f7d04(-0x14b,-0x148,-0xc3,-0x185),'Jisnp':_0x1f7d04(-0x14e,-0x14c,-0xd9,-0x106),'XWhFm':_0x1f7d04(-0x14f,-0x15a,-0x19a,-0x1f4),'lGUPo':_0x1f7d04(-0xad,-0x113,-0x15d,-0x114),'HxHvr':function(_0x1eded2,_0x369286){return _0x1eded2(_0x369286);},'djTIJ':function(_0x1a1801,_0x299158){return _0x1a1801!==_0x299158;},'NSPye':_0x1f7d04(-0x223,-0x1c6,-0x12a,-0x163),'WIDRK':_0x1f7d04(-0x16f,-0x1d4,-0x1f9,-0x1b2),'Digou':_0x59769f(0x55c,0x55b,0x54b,0x4fe),'oBklS':_0x59769f(0x4b4,0x415,0x516,0x474),'RJTtA':function(_0xe34600,_0x554836){return _0xe34600===_0x554836;},'kNTZc':function(_0x37a9e4,_0x1f138d){return _0x37a9e4>_0x1f138d;},'wJoLG':_0x59769f(0x44e,0x47b,0x463,0x415),'Eedir':_0x59769f(0x4ff,0x483,0x4d8,0x508),'xwjRU':'代码:','zRvju':_0x1f7d04(-0x20f,-0x1ed,-0x1a9,-0x162),'vsbBg':_0x59769f(0x56b,0x519,0x4ee,0x50c),'HQJMr':_0x59769f(0x517,0x536,0x57e,0x532),'lWGGa':function(_0x548255,_0x2b5508){return _0x548255===_0x2b5508;},'PVvNb':'data:\x20[DON'+'E]','YxyCw':_0x1f7d04(-0x189,-0x17e,-0x146,-0x1ea),'VgIyy':_0x59769f(0x3f6,0x36a,0x453,0x3ed),'EHzng':_0x1f7d04(-0x264,-0x240,-0x255,-0x21f),'SGRIH':function(_0x29d7d3,_0x43bec7){return _0x29d7d3(_0x43bec7);},'JZFrT':_0x1f7d04(-0x1bb,-0x187,-0x11e,-0x171),'CzirA':_0x1f7d04(-0x1b0,-0x16b,-0x1c8,-0x18b),'wYHYG':'MZpnJ','VoCbq':'未收到有效回复。','Hreyi':function(_0x5208d0,_0x812aa0){return _0x5208d0===_0x812aa0;},'Bjelg':_0x1f7d04(-0x233,-0x1bc,-0x247,-0x1ba),'sagtH':'aqUiJ','pWfld':_0x1f7d04(-0x169,-0x19f,-0x118,-0x1c7),'keEys':function(_0x255482,_0x51f194){return _0x255482(_0x51f194);},'ThazR':function(_0x5d3480,_0x58cda5){return _0x5d3480(_0x58cda5);},'cmhfZ':_0x59769f(0x4be,0x45f,0x446,0x4c6),'AaRBP':function(_0x3aa171,_0x27fcc4){return _0x3aa171===_0x27fcc4;},'GfcFM':function(_0x3f57d4,_0x13c085){return _0x3f57d4===_0x13c085;},'KeeLb':_0x59769f(0x42a,0x3c4,0x455,0x419),'IAkig':_0x1f7d04(-0x1b4,-0x1ad,-0x178,-0x21c),'xeSER':_0x1f7d04(-0x2e4,-0x242,-0x1ca,-0x203),'QuDDT':function(_0x1d2c97,_0x2b3063){return _0x1d2c97(_0x2b3063);}},{prompt:_0x425ae8,id:_0x839315}=_0x215a52;if(!_0x839315||!_0x425ae8)return;currentLLMRequestController&&(currentLLMRequestController[_0x59769f(0x3e2,0x476,0x367,0x3fd)](),toastr[_0x59769f(0x4c5,0x420,0x49d,0x44c)](_0x53a3f3[_0x1f7d04(-0x14a,-0x1cd,-0x15e,-0x164)]));currentLLMRequestController=new AbortController();const _0x207154=currentLLMRequestController[_0x59769f(0x3b9,0x3d3,0x45b,0x405)];function _0x59769f(_0x5a6a5c,_0x17ba49,_0x24d3d8,_0x2ad57f){return _0x5c4485(_0x17ba49,_0x17ba49-0x19,_0x2ad57f-0x29c,_0x2ad57f-0x1bd);}_0x53a3f3[_0x1f7d04(-0x1dd,-0x1fa,-0x1cf,-0x1bd)](startFabLoading);const _0x280306=REQUEST_TYPE_NAMES[_0x24d4e3]||_0x24d4e3;function _0x1f7d04(_0x25801e,_0x42f8af,_0x152e61,_0x51fd2f){return _0x5c4485(_0x25801e,_0x42f8af-0x1eb,_0x42f8af- -0x3a2,_0x51fd2f-0x4f);}console[_0x1f7d04(-0x1aa,-0x12c,-0xa6,-0xc7)]('st-chatu8:'+'\x20收到\x20'+_0x280306+_0x1f7d04(-0x2c5,-0x248,-0x1a1,-0x221)+_0x839315+')',_0x425ae8),_0x53a3f3[_0x1f7d04(-0xba,-0x12a,-0x1a3,-0x13d)](clearLog),_0x53a3f3[_0x1f7d04(-0x22e,-0x1da,-0x1a1,-0x1ff)](addLog,_0x59769f(0x343,0x3d2,0x3c0,0x3ea)+_0x1f7d04(-0x170,-0x199,-0x1dc,-0xf1)+_0x280306+_0x1f7d04(-0x17a,-0x214,-0x1a1,-0x2a7)),_0x53a3f3[_0x59769f(0x4e0,0x3cd,0x42e,0x459)](addLog,_0x1f7d04(-0x1b1,-0x253,-0x29f,-0x2e6)+_0x839315),addLog(_0x59769f(0x39e,0x395,0x41d,0x439)+':'),addLog(_0x53a3f3[_0x59769f(0x4dc,0x4df,0x49d,0x4b1)](formatPromptForDisplay,_0x425ae8));const _0x23cca4=getEffectiveConfigForRequestType(_0x24d4e3),{api_url:_0x4befe1,api_key:_0x4b8561,model:_0x1888f6,temperature:_0x536ee6,top_p:_0x576c40,max_tokens:_0x202db1,stream:_0x30cf62}=_0x23cca4;if(_0x53a3f3['eVCAg'](!_0x4befe1,!_0x4b8561)||!_0x1888f6){const _0x32ca22=_0x280306+(_0x59769f(0x4a8,0x456,0x445,0x48f)+_0x1f7d04(-0x199,-0x1b0,-0x113,-0x1e1)+'或\x20Model\x20未配'+'置。');toastr[_0x1f7d04(-0x284,-0x24c,-0x23b,-0x2d0)](_0x32ca22);const _0x4865d7={};_0x4865d7['success']=![],_0x4865d7['result']=_0x32ca22,_0x4865d7['id']=_0x839315,eventSource['emit'](_0x4425d1,_0x4865d7);return;}const _0x2d9ac7=_0x53a3f3[_0x1f7d04(-0x205,-0x189,-0x124,-0x20b)],_0x1572aa=_0x4befe1[_0x59769f(0x414,0x535,0x46f,0x4a8)](/\/$/,'');_0x3df339&&(_0x1f7d04(-0x1bf,-0x181,-0x18a,-0x1ab)!==_0x53a3f3[_0x59769f(0x4d9,0x4e6,0x40c,0x476)]?_0x53a3f3['NMIID'](_0x3df339,'正在处理\x20'+_0x280306+_0x59769f(0x396,0x3ea,0x3ca,0x40a)):_0x26660e+='\x20('+_0x147ff1[_0x59769f(0x44e,0x400,0x3b0,0x43c)](',\x20')+')');try{if(_0x53a3f3['hEYmB'](_0x53a3f3[_0x59769f(0x56f,0x5a1,0x4df,0x520)],_0x1f7d04(-0x154,-0x14c,-0xce,-0x1ac))){const _0x26e88a={};_0x26e88a[_0x1f7d04(-0x13c,-0x11d,-0x18e,-0x18e)+'etion_sour'+'ce']=_0x53a3f3[_0x1f7d04(-0x279,-0x233,-0x1a0,-0x2ce)],_0x26e88a[_0x1f7d04(-0x158,-0x110,-0x15f,-0xdf)]=_0x1572aa,_0x26e88a['custom_inc'+_0x1f7d04(-0x1c8,-0x155,-0xc2,-0xbe)+'rs']=_0x1f7d04(-0x171,-0x15f,-0x138,-0x1eb)+_0x59769f(0x547,0x52e,0x46b,0x4f0)+_0x1f7d04(-0x1c8,-0x17a,-0x1f8,-0x20b)+_0x4b8561+'\x22',_0x26e88a[_0x1f7d04(-0x201,-0x1c1,-0x16b,-0x182)]=_0x1888f6,_0x26e88a['messages']=_0x425ae8,_0x26e88a[_0x1f7d04(-0x244,-0x1b9,-0x25c,-0x155)+'e']=_0x536ee6,_0x26e88a['top_p']=_0x576c40,_0x26e88a[_0x59769f(0x4cc,0x472,0x4f2,0x4d4)]=_0x202db1,_0x26e88a[_0x59769f(0x4ae,0x41c,0x3c8,0x43a)]=_0x30cf62;const _0xa12027=_0x26e88a,_0xf1eb79=await fetch(_0x2d9ac7,{'method':_0x53a3f3[_0x59769f(0x465,0x427,0x464,0x47e)],'headers':_0x53a3f3[_0x1f7d04(-0x125,-0x125,-0x1a2,-0xcd)](getRequestHeaders,window[_0x59769f(0x3fc,0x3dc,0x403,0x453)]),'body':JSON[_0x1f7d04(-0x155,-0x18e,-0x125,-0x1e1)](_0xa12027),'signal':_0x207154});if(!_0xf1eb79['ok']){if(_0x53a3f3['djTIJ'](_0x59769f(0x4a9,0x48d,0x4a3,0x52d),_0x53a3f3['NSPye'])){try{if(_0x53a3f3['djTIJ'](_0x53a3f3['WIDRK'],_0x53a3f3[_0x59769f(0x463,0x499,0x422,0x41d)])){const _0x2871d9=await _0xf1eb79[_0x59769f(0x57a,0x547,0x4e1,0x4ee)]();if(_0x2871d9[_0x59769f(0x41c,0x402,0x3f9,0x3f2)]){if(_0x53a3f3[_0x1f7d04(-0x12a,-0x153,-0x119,-0x137)]!==_0x53a3f3[_0x59769f(0x46f,0x55a,0x45a,0x4eb)]){if(_0x53a3f3[_0x1f7d04(-0x1c9,-0x219,-0x25e,-0x1c7)](_0x8679a5['name'],_0x53a3f3[_0x59769f(0x59b,0x494,0x52f,0x4ff)])){_0x3232ba[_0x59769f(0x551,0x490,0x48d,0x512)](_0x5240a6+('\x20request\x20a'+_0x1f7d04(-0x17c,-0x1e6,-0x13e,-0x18a)));const _0x1dba4c={};_0x1dba4c[_0x59769f(0x45e,0x42e,0x3e0,0x47f)]=_0x53a3f3[_0x59769f(0x465,0x55d,0x552,0x4ff)],_0x1dba4c[_0x1f7d04(-0x15f,-0x112,-0x11d,-0x194)]=_0x1f7d04(-0x12a,-0x15b,-0x114,-0x16a)+_0x59769f(0x45b,0x4d7,0x42f,0x460);const _0x35c7a1={};_0x35c7a1[_0x1f7d04(-0x9e,-0x139,-0x199,-0xcd)]=![],_0x35c7a1[_0x59769f(0x40b,0x466,0x445,0x487)]=null,_0x35c7a1['id']=_0x256eae,_0x35c7a1[_0x59769f(0x412,0x3e9,0x3c5,0x3f2)]=_0x1dba4c,_0x4a2e21['emit'](_0x74c050,_0x35c7a1);return;}_0x27b989[_0x59769f(0x42b,0x401,0x443,0x3f2)](_0x5e0905+_0x59769f(0x39e,0x41a,0x43b,0x430),_0x5f3e4d);const _0x1cb365='请求错误:\x20'+_0x5c821d[_0x1f7d04(-0xe2,-0x112,-0x187,-0x77)];_0x5678f5&&_0x53a3f3[_0x1f7d04(-0xf3,-0x197,-0x229,-0x121)](_0x1831c3,_0x1cb365);_0x27c994[_0x1f7d04(-0x1e7,-0x24c,-0x265,-0x288)](_0x2f543e[_0x1f7d04(-0x19f,-0x112,-0x12a,-0x179)]);const _0x328d8a={};_0x328d8a['success']=![],_0x328d8a[_0x59769f(0x475,0x4a2,0x408,0x487)]=_0x1cb365,_0x328d8a['id']=_0x35c887,_0x134156[_0x59769f(0x559,0x523,0x488,0x4f1)](_0x22bff3,_0x328d8a);}else{let _0x41e034;if(_0x53a3f3['RJTtA'](typeof _0x2871d9[_0x1f7d04(-0x293,-0x24c,-0x271,-0x295)],_0x53a3f3['Cdklb'])&&_0x2871d9['error'][_0x1f7d04(-0x13f,-0x112,-0x13b,-0x164)]){_0x41e034=''+_0x2871d9[_0x1f7d04(-0x285,-0x24c,-0x1c9,-0x1aa)][_0x1f7d04(-0xf5,-0x112,-0xcf,-0xaa)];const _0x2a8046=[];if(_0x2871d9[_0x1f7d04(-0x22b,-0x24c,-0x269,-0x262)]['type'])_0x2a8046[_0x59769f(0x43e,0x564,0x505,0x4cd)](_0x59769f(0x3f3,0x533,0x4d0,0x494)+_0x2871d9['error'][_0x1f7d04(-0x1e8,-0x210,-0x203,-0x198)]);if(_0x2871d9[_0x59769f(0x3b2,0x450,0x42c,0x3f2)][_0x59769f(0x59b,0x4ee,0x586,0x51b)])_0x2a8046[_0x1f7d04(-0x19e,-0x171,-0x120,-0x1b2)]('代码:\x20'+_0x2871d9[_0x59769f(0x46a,0x38e,0x3ef,0x3f2)]['code']);_0x53a3f3[_0x1f7d04(-0x1f1,-0x1f8,-0x28d,-0x1e5)](_0x2a8046[_0x59769f(0x37f,0x44b,0x43d,0x409)],0x1b6b+0x12a5+-0x5c2*0x8)&&(_0x41e034+='\x20('+_0x2a8046['join'](',\x20')+')');}else _0x41e034=''+JSON[_0x59769f(0x451,0x4c5,0x53b,0x4b0)](_0x2871d9[_0x59769f(0x378,0x417,0x42a,0x3f2)]);throw new Error(_0x41e034);}}}else return!!_0x1daab7;}catch(_0xf1b6f4){if(_0x53a3f3['wJoLG']===_0x53a3f3[_0x59769f(0x522,0x457,0x4bb,0x4bb)]){if(_0xf1b6f4[_0x1f7d04(-0x10c,-0x112,-0x14d,-0x196)][_0x59769f(0x38d,0x461,0x3c1,0x3f7)](_0x53a3f3[_0x59769f(0x3f2,0x3ad,0x449,0x414)])||_0xf1b6f4[_0x59769f(0x4bb,0x526,0x5d4,0x52c)][_0x1f7d04(-0x271,-0x247,-0x20f,-0x285)](_0x53a3f3[_0x59769f(0x4de,0x51d,0x4cf,0x489)]))throw _0xf1b6f4;}else{let _0xb5349b;if(_0x53a3f3[_0x59769f(0x4ac,0x398,0x475,0x425)](typeof _0x2855eb['error'],_0x53a3f3[_0x59769f(0x554,0x55e,0x509,0x4ec)])&&_0x217fe2[_0x1f7d04(-0x241,-0x24c,-0x2f3,-0x20e)][_0x59769f(0x4d8,0x5a6,0x587,0x52c)]){_0xb5349b=''+_0x474883[_0x59769f(0x3ce,0x3ce,0x487,0x3f2)][_0x1f7d04(-0xf8,-0x112,-0x17e,-0xc3)];const _0x2176be=[];if(_0x1bd837[_0x59769f(0x448,0x3fb,0x417,0x3f2)]['type'])_0x2176be['push']('类型:\x20'+_0x266eca[_0x59769f(0x41b,0x3d6,0x3eb,0x3f2)][_0x1f7d04(-0x17b,-0x210,-0x2ad,-0x2af)]);if(_0x162b77[_0x59769f(0x404,0x42f,0x48c,0x3f2)]['code'])_0x2176be[_0x59769f(0x52d,0x534,0x4de,0x4cd)]('代码:\x20'+_0x3a9a32[_0x1f7d04(-0x2ec,-0x24c,-0x1e0,-0x2ed)][_0x1f7d04(-0x159,-0x123,-0xab,-0xe6)]);_0x53a3f3[_0x1f7d04(-0x1e8,-0x23a,-0x2be,-0x236)](_0x2176be['length'],0x5*-0x554+-0x69*-0x19+0x1*0x1063)&&(_0xb5349b+='\x20('+_0x2176be[_0x1f7d04(-0x1f5,-0x202,-0x171,-0x2a4)](',\x20')+')');}else _0xb5349b=''+_0x57e4fd[_0x1f7d04(-0x16a,-0x18e,-0x206,-0x223)](_0x29e887[_0x1f7d04(-0x1e6,-0x24c,-0x2e2,-0x209)]);throw new _0x58afe3(_0xb5349b);}}throw new Error('请求失败:\x20'+_0xf1eb79[_0x1f7d04(-0xb8,-0x13a,-0xb8,-0x116)]+'\x20'+_0xf1eb79[_0x59769f(0x44c,0x453,0x49c,0x468)]);}else{const _0x22319c={};_0x22319c[_0x1f7d04(-0x1d7,-0x159,-0xc8,-0x1fd)]=0x1388,_0x4fd82f[_0x1f7d04(-0x1d5,-0x1f2,-0x1e1,-0x272)]('【测试模式】'+_0x21ca27+(_0x59769f(0x419,0x41c,0x3e0,0x41c)+_0x59769f(0x3a5,0x411,0x3c6,0x43e)),_0x53a3f3[_0x1f7d04(-0x1b0,-0x13e,-0x174,-0x17c)],_0x22319c);}}let _0x2b7a43='';if(_0x30cf62){const _0x24cdcb=_0xf1eb79[_0x59769f(0x425,0x530,0x536,0x4ac)][_0x59769f(0x4f4,0x56e,0x4ae,0x509)](),_0x5c9b17=new TextDecoder(_0x53a3f3[_0x1f7d04(-0x1de,-0x161,-0x11a,-0x169)]);let _0x54a529='';while(!![]){if(_0x53a3f3['djTIJ'](_0x53a3f3[_0x1f7d04(-0x277,-0x21f,-0x29c,-0x19b)],_0x53a3f3[_0x1f7d04(-0x191,-0x21f,-0x211,-0x2c1)]))_0x2d6e35=null,_0x53a3f3['CrWYD'](_0xa3bf2b);else{const {done:_0x3eba7c,value:_0x38231a}=await _0x24cdcb[_0x59769f(0x427,0x49c,0x464,0x416)]();if(_0x3eba7c)break;const _0x25559a={};_0x25559a[_0x1f7d04(-0x15e,-0x204,-0x19d,-0x236)]=!![],_0x54a529+=_0x5c9b17[_0x1f7d04(-0x124,-0x121,-0x114,-0x114)](_0x38231a,_0x25559a);const _0x18f560=_0x54a529[_0x59769f(0x3dd,0x4b8,0x4bf,0x461)]('\x0a');_0x54a529=_0x18f560[_0x59769f(0x4c1,0x4ac,0x4de,0x469)]()||'';for(const _0x328ff6 of _0x18f560){if(_0x53a3f3[_0x59769f(0x589,0x522,0x45e,0x4f7)]!==_0x1f7d04(-0xde,-0x17f,-0x1e1,-0xdb)){const _0x2d6fff=_0x328ff6['trim']();if(!_0x2d6fff||_0x53a3f3['lWGGa'](_0x2d6fff,_0x53a3f3[_0x59769f(0x3d0,0x515,0x464,0x46d)]))continue;if(_0x2d6fff[_0x1f7d04(-0x16e,-0x1f4,-0x1b1,-0x1a1)](_0x53a3f3[_0x1f7d04(-0x132,-0x151,-0x149,-0x162)]))try{const _0x142d0f=_0x2d6fff['slice'](-0xcb*0x22+0x43a+0x16c2),_0x4c26cd=JSON[_0x59769f(0x4f3,0x4a0,0x493,0x501)](_0x142d0f),_0x5b76a3=_0x4c26cd[_0x1f7d04(-0x289,-0x24f,-0x2d5,-0x20d)]?.[-0x494+-0x3*0x971+0x20e7]?.[_0x1f7d04(-0x1a1,-0x166,-0x1c0,-0x1b6)]?.['content'];if(_0x5b76a3){_0x2b7a43+=_0x5b76a3;if(_0x3df339){if(_0x53a3f3[_0x59769f(0x50a,0x501,0x4a4,0x4ca)]!==_0x53a3f3[_0x59769f(0x46f,0x40c,0x4bc,0x46f)])_0x53a3f3['SGRIH'](_0x3df339,_0x2b7a43);else{if(_0x53a3f3['hEYmB'](_0x1b8592['name'],_0x1f7d04(-0x215,-0x1d8,-0x19a,-0x246))){_0x11256e['log'](_0x53a3f3[_0x1f7d04(-0xb4,-0x10b,-0x76,-0xac)]);const _0x325154={};_0x325154[_0x1f7d04(-0x23b,-0x1bf,-0x233,-0x131)]=_0x53a3f3[_0x59769f(0x505,0x528,0x563,0x4ff)],_0x325154[_0x59769f(0x4c6,0x5b9,0x489,0x52c)]=_0x53a3f3['fFsXN'];const _0x9d59d8={};_0x9d59d8[_0x1f7d04(-0xa2,-0x139,-0x15c,-0xcf)]=![],_0x9d59d8[_0x59769f(0x45f,0x49d,0x482,0x487)]=null,_0x9d59d8['id']=_0x5c50bf,_0x9d59d8[_0x1f7d04(-0x259,-0x24c,-0x1ba,-0x26a)]=_0x325154,_0x31b4b9[_0x59769f(0x4c1,0x51d,0x467,0x4f1)](_0x5db90e[_0x59769f(0x5ab,0x477,0x543,0x507)+_0x59769f(0x53a,0x501,0x51b,0x50e)],_0x9d59d8);return;}_0x47d50f[_0x1f7d04(-0x1b3,-0x24c,-0x28d,-0x218)](_0x53a3f3['kcFyi'],_0x3d1fb1);const _0x37c7ac=_0x59769f(0x4e3,0x4a2,0x471,0x4da)+_0x1d1f41['message'];_0x3b3e97&&_0x4783dc(_0x37c7ac);_0x1f9970[_0x1f7d04(-0x220,-0x24c,-0x291,-0x23e)](_0x16b23a[_0x1f7d04(-0xa6,-0x112,-0x1a3,-0xa7)]);const _0x4e548a={};_0x4e548a[_0x1f7d04(-0xa4,-0x139,-0xef,-0x93)]=![],_0x4e548a['result']=_0x37c7ac,_0x4e548a['id']=_0x1dad0a,_0x23712d[_0x1f7d04(-0x130,-0x14d,-0xc1,-0x1b6)](_0x10031b[_0x59769f(0x536,0x55a,0x471,0x507)+_0x1f7d04(-0x1a8,-0x130,-0x182,-0xc5)],_0x4e548a);}}}}catch(_0x4119a3){if(_0x53a3f3[_0x59769f(0x45e,0x470,0x46d,0x3e6)](_0x53a3f3[_0x1f7d04(-0x16d,-0x1fc,-0x25f,-0x1fd)],_0x53a3f3[_0x1f7d04(-0x233,-0x1fc,-0x173,-0x199)]))throw new _0x273e37('请求失败:\x20'+_0x3f7742[_0x1f7d04(-0x12e,-0x13a,-0xd3,-0x97)]+'\x20'+_0xc817c6[_0x1f7d04(-0x26e,-0x1d6,-0x1e1,-0x19c)]);else console[_0x1f7d04(-0x2d0,-0x23d,-0x1fe,-0x1dc)](_0x53a3f3[_0x1f7d04(-0x1ee,-0x184,-0x1d1,-0x1f0)],_0x4119a3[_0x59769f(0x56c,0x59b,0x556,0x52c)]);}}else _0x150160=''+_0x35662e[_0x59769f(0x4a4,0x40e,0x486,0x4b0)](_0x170698['error']);}}}if(_0x54a529[_0x59769f(0x3a5,0x445,0x449,0x43b)]()&&_0x53a3f3[_0x59769f(0x4b7,0x41f,0x41f,0x426)](_0x54a529[_0x59769f(0x432,0x3e1,0x47a,0x43b)](),_0x53a3f3['PVvNb'])&&_0x54a529[_0x1f7d04(-0x19f,-0x203,-0x1ac,-0x1d2)]()['startsWith'](_0x53a3f3[_0x59769f(0x4e3,0x445,0x54b,0x4ed)]))try{const _0x3f49ab=_0x54a529['trim']()[_0x59769f(0x47f,0x552,0x459,0x4c8)](-0x14e3+0x2*-0xb7f+0x2be7),_0x4e329d=JSON[_0x59769f(0x4e8,0x57c,0x532,0x501)](_0x3f49ab),_0x191483=_0x4e329d['choices']?.[0x1f*0xa5+0x26f1+0x9d2*-0x6]?.[_0x59769f(0x4ff,0x55e,0x558,0x4d8)]?.['content'];_0x191483&&(_0x53a3f3[_0x59769f(0x3df,0x3a4,0x3e6,0x425)]('jVVea',_0x53a3f3[_0x1f7d04(-0x103,-0x16c,-0xf7,-0x10b)])?_0x283b6b(_0x53a3f3[_0x59769f(0x494,0x414,0x424,0x41b)]):(_0x2b7a43+=_0x191483,_0x3df339&&_0x3df339(_0x2b7a43)));}catch(_0x53bb01){console[_0x59769f(0x428,0x489,0x35c,0x401)](_0x53a3f3[_0x1f7d04(-0x15a,-0x13b,-0x1e2,-0x177)],_0x53bb01['message']);}!_0x2b7a43&&(_0x2b7a43=_0x53a3f3[_0x59769f(0x4ec,0x533,0x403,0x495)],toastr['warning'](_0x280306+(_0x59769f(0x484,0x587,0x482,0x516)+'效回复。')));}else{const _0x21a629=await _0xf1eb79[_0x1f7d04(-0x11b,-0x150,-0xaa,-0x1e0)]();if(_0x21a629[_0x59769f(0x41e,0x3f4,0x34d,0x3f2)]){let _0xa110cb;if(_0x53a3f3[_0x59769f(0x54d,0x48d,0x59d,0x525)](typeof _0x21a629[_0x59769f(0x478,0x379,0x34f,0x3f2)],_0x53a3f3['Cdklb'])&&_0x21a629[_0x1f7d04(-0x1db,-0x24c,-0x279,-0x2dd)][_0x1f7d04(-0xc5,-0x112,-0x80,-0x168)]){_0xa110cb=''+_0x21a629[_0x1f7d04(-0x299,-0x24c,-0x27e,-0x2ce)]['message'];const _0x3e1792=[];if(_0x21a629[_0x59769f(0x380,0x34b,0x48c,0x3f2)][_0x59769f(0x4ce,0x3d3,0x403,0x42e)])_0x3e1792['push'](_0x1f7d04(-0x22c,-0x1aa,-0x1c5,-0x13a)+_0x21a629[_0x1f7d04(-0x2f0,-0x24c,-0x1dd,-0x1ab)][_0x59769f(0x428,0x4c2,0x3a7,0x42e)]);if(_0x21a629[_0x1f7d04(-0x2b1,-0x24c,-0x1e1,-0x2ee)]['code'])_0x3e1792[_0x1f7d04(-0x112,-0x171,-0x191,-0x106)](_0x59769f(0x37f,0x363,0x3b9,0x408)+_0x21a629['error'][_0x1f7d04(-0x10f,-0x123,-0x160,-0x1be)]);_0x53a3f3[_0x59769f(0x47d,0x419,0x3d4,0x446)](_0x3e1792[_0x1f7d04(-0x195,-0x235,-0x27c,-0x23d)],0x1709*0x1+0x1*0x11e1+0x28ea*-0x1)&&(_0xa110cb+='\x20('+_0x3e1792[_0x59769f(0x3a6,0x451,0x425,0x43c)](',\x20')+')');}else _0x53a3f3[_0x59769f(0x43d,0x526,0x3fd,0x499)](_0x53a3f3[_0x1f7d04(-0x11a,-0x133,-0x1d1,-0xfb)],_0x53a3f3[_0x59769f(0x520,0x4dc,0x542,0x50b)])?_0xa110cb=''+JSON[_0x59769f(0x443,0x433,0x50f,0x4b0)](_0x21a629[_0x59769f(0x408,0x3fd,0x3a6,0x3f2)]):_0x1d8309['warn'](_0x53a3f3[_0x1f7d04(-0x184,-0x13b,-0x145,-0x9c)],_0x5de39e[_0x1f7d04(-0x10b,-0x112,-0xf1,-0xf9)]);throw new Error(_0xa110cb);}_0x2b7a43=_0x21a629[_0x1f7d04(-0x2c4,-0x24f,-0x231,-0x2eb)]?.[0x8cf+0x48e*-0x5+0xb*0x145]?.[_0x59769f(0x4a3,0x541,0x599,0x52c)]?.[_0x59769f(0x457,0x3b5,0x486,0x448)]||'',!_0x2b7a43&&(_0x53a3f3[_0x59769f(0x4f2,0x491,0x441,0x499)](_0x53a3f3[_0x59769f(0x589,0x56a,0x4b3,0x515)],_0x53a3f3['pWfld'])?_0x45d774[_0x59769f(0x439,0x45e,0x3c8,0x45f)][_0x1f7d04(-0x293,-0x21b,-0x23f,-0x242)](_0x52d585=>{function _0x3c60d7(_0x52e61b,_0x18feee,_0x4e255e,_0x4507ec){return _0x59769f(_0x52e61b-0x6a,_0x4507ec,_0x4e255e-0xcf,_0x52e61b- -0x2a8);}if(_0x52d585[_0x3c60d7(0x15a,0x158,0xd0,0xb9)]&&_0x53a3f3['ECTDc'](_0x52d585[_0x3c60d7(0x15a,0x1c1,0x152,0x1c6)][_0x3c60d7(0x193,0x22c,0x186,0x146)](),'')){const _0x507efc={};_0x507efc[_0x576b45(0x4b5,0x432,0x4da,0x493)]=_0x53a3f3[_0x576b45(0x42b,0x3ad,0x33f,0x3cb)],_0x507efc[_0x576b45(0x3d1,0x40e,0x3bb,0x3b0)]=_0x52d585[_0x3c60d7(0x15a,0x1d6,0x19a,0x1f8)],_0x1c6f37[_0x3c60d7(0x225,0x26f,0x27e,0x1d0)](_0x507efc);}function _0x576b45(_0x5e984b,_0x119985,_0x19d57f,_0x29c1e5){return _0x59769f(_0x5e984b-0x153,_0x5e984b,_0x19d57f-0x92,_0x119985- -0x3a);}if(_0x52d585[_0x3c60d7(0x183,0x153,0x22a,0x183)]&&_0x53a3f3[_0x576b45(0x349,0x3ec,0x3a8,0x472)](_0x52d585[_0x3c60d7(0x183,0x1dd,0x1e4,0xf1)][_0x576b45(0x453,0x401,0x3d7,0x3b6)](),'')){const _0x4f1e13={};_0x4f1e13[_0x576b45(0x3c4,0x432,0x38b,0x441)]=_0x3c60d7(0x183,0xf1,0x1ba,0x14c),_0x4f1e13[_0x576b45(0x48e,0x40e,0x3ee,0x447)]=_0x52d585[_0x3c60d7(0x183,0x1e8,0x216,0x1d6)],_0x59c365[_0x576b45(0x4b2,0x493,0x500,0x44e)](_0x4f1e13);}}):(_0x2b7a43=_0x53a3f3[_0x1f7d04(-0x1ea,-0x1a9,-0x12e,-0x152)],toastr[_0x59769f(0x4e7,0x4c2,0x4bb,0x511)](_0x280306+(_0x1f7d04(-0xa4,-0x128,-0x157,-0x1b9)+'效回复。')))),_0x3df339&&_0x53a3f3[_0x1f7d04(-0x22a,-0x1c4,-0x254,-0x1bd)](_0x3df339,_0x2b7a43);}addLog(_0x59769f(0x45c,0x384,0x3fc,0x420)+_0x59769f(0x42f,0x52e,0x486,0x4aa)),_0x53a3f3['ThazR'](addLog,_0x2b7a43),addLog(_0x1f7d04(-0x2b1,-0x254,-0x229,-0x1dc)+_0x1f7d04(-0x1f1,-0x211,-0x2b1,-0x22a));const _0x116c46=extension_settings[extensionName][_0x1f7d04(-0x12e,-0x1bd,-0x11a,-0x167)+'e'];if(_0x116c46){if(_0x53a3f3[_0x1f7d04(-0x256,-0x218,-0x218,-0x20f)](_0x1f7d04(-0x28d,-0x20d,-0x1c2,-0x246),'CsRCQ')){const _0x569aed={};_0x569aed[_0x1f7d04(-0x172,-0x159,-0x149,-0x13b)]=0x1388,toastr['info'](_0x59769f(0x522,0x4dc,0x440,0x4d6)+_0x280306+(_0x59769f(0x485,0x41e,0x49a,0x41c)+_0x1f7d04(-0x196,-0x200,-0x28c,-0x259)),_0x53a3f3['CmPxg'],_0x569aed);}else{if(_0x328cb5['user']&&_0x40d569[_0x59769f(0x3ae,0x446,0x457,0x402)][_0x1f7d04(-0x211,-0x203,-0x194,-0x170)]()!==''){const _0x2d6038={};_0x2d6038[_0x59769f(0x450,0x429,0x513,0x46c)]=_0x53a3f3[_0x1f7d04(-0x298,-0x257,-0x1f3,-0x29d)],_0x2d6038[_0x1f7d04(-0x17c,-0x1f6,-0x1db,-0x15d)]=_0x4f0e81[_0x59769f(0x3a6,0x432,0x36e,0x402)],_0x307d27[_0x59769f(0x4ed,0x4be,0x460,0x4cd)](_0x2d6038);}if(_0x5abb9a[_0x1f7d04(-0x1d1,-0x213,-0x23d,-0x266)]&&_0x53a3f3['QSinG'](_0x1523ee[_0x1f7d04(-0x20c,-0x213,-0x292,-0x1fa)][_0x1f7d04(-0x26a,-0x203,-0x277,-0x1bb)](),'')){const _0x76f3a8={};_0x76f3a8['role']=_0x53a3f3['IcCEx'],_0x76f3a8[_0x59769f(0x4ad,0x4e2,0x46d,0x448)]=_0x55607e[_0x1f7d04(-0x217,-0x213,-0x242,-0x289)],_0x1a883f[_0x59769f(0x55e,0x4b0,0x53b,0x4cd)](_0x76f3a8);}}}const _0x1df185={};_0x1df185[_0x1f7d04(-0x1de,-0x139,-0x10d,-0xd1)]=!![],_0x1df185['result']=_0x2b7a43,_0x1df185['id']=_0x839315,_0x1df185[_0x59769f(0x56b,0x48b,0x4cb,0x52a)]=_0x116c46,eventSource[_0x59769f(0x55a,0x4cf,0x498,0x4f1)](_0x4425d1,_0x1df185);}else{const _0x2c09c9=_0x1f2207[_0x1f7d04(-0x190,-0x176,-0x13f,-0x126)](0x171*0x16+-0xf35*0x1+0x107b*-0x1),_0x15ec14=_0x560954['parse'](_0x2c09c9),_0x4614a6=_0x15ec14[_0x59769f(0x3ce,0x427,0x40d,0x3ef)]?.[-0x235*0x11+0x70*-0x50+0x4885]?.[_0x1f7d04(-0x10b,-0x166,-0x1d2,-0xed)]?.[_0x1f7d04(-0x154,-0x1f6,-0x156,-0x1c4)];_0x4614a6&&(_0x1d204c+=_0x4614a6,_0x279ac2&&_0x53a3f3[_0x1f7d04(-0x15a,-0x197,-0x18e,-0x1e8)](_0x3f027e,_0x46f063));}}catch(_0x2dd495){if(_0x53a3f3[_0x1f7d04(-0x107,-0x154,-0x15e,-0x1a8)]!==_0x53a3f3[_0x59769f(0x471,0x4d0,0x442,0x4ea)]){let _0x3a1a1c;if(_0x53a3f3[_0x1f7d04(-0x1f9,-0x219,-0x209,-0x1a7)](typeof _0x1e4082[_0x59769f(0x454,0x419,0x395,0x3f2)],_0x53a3f3[_0x1f7d04(-0x1dc,-0x152,-0x190,-0x180)])&&_0x5f4d5d[_0x1f7d04(-0x23d,-0x24c,-0x26c,-0x2e8)][_0x59769f(0x559,0x579,0x538,0x52c)]){_0x3a1a1c=''+_0x74839a[_0x59769f(0x3c8,0x49a,0x3c2,0x3f2)][_0x1f7d04(-0x6c,-0x112,-0x187,-0x9d)];const _0x1cef16=[];if(_0xbe8c31[_0x1f7d04(-0x208,-0x24c,-0x2e0,-0x1c0)]['type'])_0x1cef16[_0x1f7d04(-0x15c,-0x171,-0x12f,-0x202)](_0x1f7d04(-0x1f8,-0x1aa,-0x19c,-0x129)+_0x255f34[_0x1f7d04(-0x252,-0x24c,-0x252,-0x2b4)][_0x1f7d04(-0x2ad,-0x210,-0x194,-0x18f)]);if(_0x577b68[_0x59769f(0x492,0x386,0x428,0x3f2)][_0x1f7d04(-0x185,-0x123,-0x184,-0xda)])_0x1cef16[_0x59769f(0x548,0x4e9,0x47f,0x4cd)](_0x1f7d04(-0x2b6,-0x236,-0x2b2,-0x224)+_0x31a527['error']['code']);_0x53a3f3[_0x59769f(0x514,0x485,0x461,0x480)](_0x1cef16[_0x59769f(0x3a9,0x3ea,0x42d,0x409)],-0x1578*0x1+-0x2425+0x399d)&&(_0x3a1a1c+='\x20('+_0x1cef16[_0x1f7d04(-0x1b9,-0x202,-0x1b6,-0x1e4)](',\x20')+')');}else _0x3a1a1c=''+_0x399161['stringify'](_0x3fce86[_0x59769f(0x3e1,0x42d,0x3a1,0x3f2)]);throw new _0x316d13(_0x3a1a1c);}else{if(_0x53a3f3[_0x59769f(0x502,0x47d,0x3e2,0x475)](_0x2dd495['name'],_0x53a3f3[_0x1f7d04(-0x13e,-0x13f,-0x102,-0x144)])){if(_0x53a3f3[_0x59769f(0x3c4,0x45a,0x4d5,0x45d)](_0x53a3f3[_0x59769f(0x43c,0x53d,0x4f8,0x4c2)],_0x1f7d04(-0xeb,-0x118,-0x7f,-0x11f)))_0x1c82a1=null,_0x53a3f3['CrWYD'](_0x1d2b30);else{console[_0x59769f(0x4fd,0x573,0x4ac,0x512)](_0x280306+(_0x1f7d04(-0x146,-0x19e,-0x16c,-0x1f4)+_0x1f7d04(-0x1f8,-0x1e6,-0x245,-0x1c3)));const _0x4e338f={};_0x4e338f[_0x1f7d04(-0x1e7,-0x1bf,-0x118,-0x153)]=_0x59769f(0x452,0x410,0x455,0x466),_0x4e338f['message']=_0x1f7d04(-0x1a1,-0x15b,-0x1b7,-0x1f6)+_0x59769f(0x4c0,0x3fe,0x41e,0x460);const _0x86f352={};_0x86f352[_0x59769f(0x4be,0x4ca,0x4dd,0x505)]=![],_0x86f352[_0x59769f(0x3f6,0x449,0x497,0x487)]=null,_0x86f352['id']=_0x839315,_0x86f352['error']=_0x4e338f,eventSource[_0x59769f(0x4d4,0x45f,0x48a,0x4f1)](_0x4425d1,_0x86f352);return;}}console[_0x1f7d04(-0x2c5,-0x24c,-0x216,-0x1bf)](_0x280306+_0x59769f(0x4bd,0x4ac,0x4bd,0x430),_0x2dd495);const _0x36108f=_0x59769f(0x488,0x492,0x4a9,0x4da)+_0x2dd495['message'];_0x3df339&&(_0x53a3f3['djTIJ'](_0x53a3f3[_0x1f7d04(-0x259,-0x1c7,-0x1e8,-0x26e)],_0x53a3f3[_0x59769f(0x40a,0x476,0x518,0x4ae)])?_0x53a3f3[_0x1f7d04(-0x1c7,-0x217,-0x27d,-0x2a2)](_0x3df339,_0x36108f):_0x1bd032(_0x1c7a3f));toastr[_0x59769f(0x395,0x41a,0x402,0x3f2)](_0x2dd495[_0x1f7d04(-0xa9,-0x112,-0x108,-0x19a)]);const _0x992e2={};_0x992e2[_0x59769f(0x520,0x471,0x46f,0x505)]=![],_0x992e2['result']=_0x36108f,_0x992e2['id']=_0x839315,eventSource[_0x59769f(0x54b,0x470,0x580,0x4f1)](_0x4425d1,_0x992e2);}}finally{currentLLMRequestController=null,_0x53a3f3[_0x1f7d04(-0x29f,-0x1fa,-0x200,-0x235)](stopFabLoading);}}export async function executeDefaultLLMRequest(_0x33b871,_0x56d0f8,_0x3c4c34=null){const _0x5bfa9e={'fCLsQ':_0x29826c(0x99,0x161,0x128,0xd6)+_0x29826c(0x74,0xd6,0x40,0xd4)+_0x29826c(-0x5c,0xde,0x92,0x4b),'Ewrsw':_0x29826c(0x133,0xee,0xe9,0xb2),'uCACc':_0x394f51(0x1e3,0x1a8,0x260,0x199)+_0x394f51(0x160,0x121,0x119,0x182),'maGZq':_0x394f51(0x1d1,0x198,0x214,0x13a),'ViLwY':_0x29826c(0x202,0x1c8,0xc6,0x163)+_0x29826c(0x7e,0x39,0xa6,0x35),'NIeeo':function(_0x22e5de){return _0x22e5de();},'Clkjd':function(_0x2cba7a,_0x52cb7b){return _0x2cba7a(_0x52cb7b);},'scpyl':function(_0x43460f,_0x382d15){return _0x43460f(_0x382d15);},'zXLVV':_0x394f51(0x1f4,0x26c,0x192,0x274)+'PI\x20Key,\x20或\x20'+'Model\x20未配置。','FsiWX':_0x394f51(0x143,0xaa,0x129,0x1b0)+_0x29826c(0x77,0x88,0x90,0x78)+'ompletions'+'/generate','jfpMq':_0x394f51(0x138,0xeb,0x98,0xec),'jjMoE':function(_0x5c6c91,_0x327d95){return _0x5c6c91(_0x327d95);},'UtosR':_0x394f51(0xf1,0x132,0xa5,0x85)+_0x29826c(0xc6,0x100,0x55,0xb7),'tYAmp':_0x394f51(0x113,0x18b,0x7e,0x84),'jtean':function(_0x3839ae,_0x73983b,_0x2af82b){return _0x3839ae(_0x73983b,_0x2af82b);},'bqshb':_0x29826c(0x171,0x11e,0x191,0x177),'Iymzq':function(_0x212c2a,_0x16389d){return _0x212c2a===_0x16389d;},'fJeQv':'BRRKb','HqUFR':function(_0x39d10b,_0x4b51a9){return _0x39d10b===_0x4b51a9;},'ZLexv':'object','YxEAB':_0x394f51(0x124,0xe3,0x151,0x14a)+'复。','NNMPG':function(_0x3987d6,_0x20d655){return _0x3987d6!==_0x20d655;},'geFVT':_0x29826c(0x89,0x87,0xea,0xe4),'hYlJu':_0x29826c(0xbc,0x1e2,0x177,0x152),'YjdoX':function(_0x29fce5,_0x3f1f02){return _0x29fce5(_0x3f1f02);},'KfEmv':function(_0x4758c1,_0x5cca1d){return _0x4758c1(_0x5cca1d);},'csOMP':function(_0x3ba379,_0x30fdbc){return _0x3ba379===_0x30fdbc;},'omthz':_0x29826c(0x34,0x38,0x45,0xa7),'sAieO':function(_0x405ec9){return _0x405ec9();}},{prompt:_0x3c019b,id:_0x56c9ac}=_0x33b871;if(!_0x56c9ac||!_0x3c019b)return;function _0x29826c(_0x121e7c,_0x9a103e,_0x1faea3,_0x325aff){return _0x5c4485(_0x1faea3,_0x9a103e-0x19a,_0x325aff- -0x118,_0x325aff-0x4);}currentLLMRequestController&&(currentLLMRequestController['abort'](),toastr[_0x394f51(0x14c,0x13a,0x151,0x1de)](_0x5bfa9e[_0x394f51(0x112,0x111,0x8c,0x9e)]));currentLLMRequestController=new AbortController();const _0x616530=currentLLMRequestController['signal'];function _0x394f51(_0x3521b1,_0x4510b8,_0x4f3650,_0x24d3bc){return _0x47c5a5(_0x3521b1-0x5e,_0x24d3bc,_0x4f3650-0x1d7,_0x3521b1- -0x339);}_0x5bfa9e[_0x394f51(0x1be,0x157,0x262,0x23c)](startFabLoading),console[_0x29826c(0xbc,0x13c,0x140,0x15e)](_0x394f51(0x1cc,0x17f,0x211,0x256)+_0x394f51(0x162,0xdc,0x165,0x1d8)+_0x394f51(0x1b3,0x229,0x238,0x158)+_0x56c9ac+')',_0x3c019b),_0x5bfa9e[_0x394f51(0x1be,0x165,0x17f,0x1f9)](clearLog),_0x5bfa9e['Clkjd'](addLog,_0x29826c(0xd9,0xc0,-0x37,0x36)+_0x394f51(0x1d0,0x174,0x249,0x1b8)+'=='),_0x5bfa9e['Clkjd'](addLog,_0x394f51(0xeb,0x66,0x7e,0x17f)+_0x56c9ac),_0x5bfa9e[_0x394f51(0x121,0xf6,0xd4,0x1a8)](addLog,_0x29826c(-0xc,0x97,0x4e,0x85)+':'),_0x5bfa9e[_0x394f51(0x10e,0x14b,0x121,0x193)](addLog,formatPromptForDisplay(_0x3c019b));const {api_url:_0x43ba90,api_key:_0x6bfa62,model:_0x364d37,temperature:_0x281aa1,top_p:_0x5c9b83,max_tokens:_0x40a8cf}=_0x56d0f8;if(!_0x43ba90||!_0x6bfa62||!_0x364d37){const _0x597273=_0x5bfa9e[_0x29826c(0x168,0x169,0x79,0xed)];toastr['error'](_0x597273);const _0x357ba9={};_0x357ba9[_0x29826c(0x1ca,0x182,0x192,0x151)]=![],_0x357ba9[_0x29826c(0x66,0x65,0x134,0xd3)]=_0x597273,_0x357ba9['id']=_0x56c9ac,eventSource[_0x394f51(0x1f1,0x198,0x27f,0x1f2)](eventNames['LLM_EXECUT'+'E_RESPONSE'],_0x357ba9);return;}const _0x288edd=_0x5bfa9e[_0x394f51(0x170,0x1c2,0x15b,0x1f1)],_0x46a213=_0x43ba90[_0x29826c(0xc3,0xa2,0x14f,0xf4)](/\/$/,'');if(_0x3c4c34){if(_0x5bfa9e[_0x29826c(0x9,-0x59,0x66,0x3c)]===_0x5bfa9e['jfpMq'])_0x5bfa9e[_0x394f51(0x1e6,0x258,0x24a,0x1c7)](_0x3c4c34,_0x5bfa9e[_0x394f51(0x1b6,0x169,0x1c1,0x161)]);else{_0x565a05[_0x29826c(0x1a4,0x178,0x101,0x15e)](_0x5bfa9e['fCLsQ']);const _0x5dfc24={};_0x5dfc24[_0x29826c(0xac,0xf6,0x29,0xcb)]=_0x5bfa9e[_0x394f51(0x218,0x26f,0x183,0x2aa)],_0x5dfc24[_0x394f51(0x22c,0x21d,0x2a6,0x206)]=_0x5bfa9e[_0x29826c(0x83,0x101,0x2c,0x75)];const _0x345715={};_0x345715[_0x394f51(0x205,0x1de,0x1cf,0x282)]=![],_0x345715[_0x29826c(0x87,0x30,0x126,0xd3)]=null,_0x345715['id']=_0x39be1f,_0x345715[_0x394f51(0xf2,0x19a,0x101,0x91)]=_0x5dfc24,_0x5ab16f[_0x394f51(0x1f1,0x1af,0x1f8,0x14c)](_0x25060e['LLM_EXECUT'+_0x29826c(0x1ab,0xdb,0x181,0x15a)],_0x345715);return;}}try{if(_0x29826c(0x5c,0xf6,0x5,0x5c)!==_0x5bfa9e[_0x29826c(0x11c,0x20e,0x19d,0x170)]){const _0x3c8426={};_0x3c8426[_0x394f51(0x221,0x185,0x2c2,0x2aa)+'etion_sour'+'ce']=_0x394f51(0x1e4,0x285,0x20b,0x146),_0x3c8426[_0x394f51(0x22e,0x220,0x2be,0x20e)]=_0x46a213,_0x3c8426[_0x29826c(-0x44,0x6d,0xd1,0x4f)+_0x29826c(0x1d8,0x129,0x98,0x135)+'rs']=_0x394f51(0x1df,0x25e,0x26c,0x255)+_0x394f51(0x1f0,0x204,0x23b,0x171)+_0x29826c(0x159,0x89,0x184,0x110)+_0x6bfa62+'\x22',_0x3c8426[_0x394f51(0x17d,0x10e,0xf0,0x114)]=_0x364d37,_0x3c8426[_0x29826c(0xed,0x4f,0xd3,0x59)]=_0x3c019b,_0x3c8426[_0x29826c(0x125,0x37,0xf3,0xd1)+'e']=_0x281aa1,_0x3c8426['top_p']=_0x5c9b83,_0x3c8426['max_tokens']=_0x40a8cf,_0x3c8426['stream']=![];const _0x501a60=_0x3c8426,_0x29cf1c=await _0x5bfa9e[_0x394f51(0x14f,0x1bc,0x1eb,0x155)](fetch,_0x288edd,{'method':_0x5bfa9e[_0x29826c(0x100,0x123,0x3d,0xd9)],'headers':_0x5bfa9e[_0x29826c(0x162,0xee,0x13c,0x132)](getRequestHeaders,window[_0x29826c(0xe0,0x3f,0x38,0x9f)]),'body':JSON[_0x29826c(0x12a,0x13c,0x18b,0xfc)](_0x501a60),'signal':_0x616530}),_0x52b1bf=await _0x29cf1c['json']();if(_0x52b1bf[_0x394f51(0xf2,0xd2,0x5d,0x166)]){if(_0x5bfa9e[_0x394f51(0x1a6,0x1bd,0x146,0x1be)](_0x5bfa9e['fJeQv'],_0x5bfa9e[_0x29826c(0x101,0xb,0xf3,0x63)])){let _0x5ac07b;if(_0x5bfa9e[_0x29826c(0x1a2,0xfd,0x193,0x12e)](typeof _0x52b1bf['error'],_0x5bfa9e[_0x394f51(0x22f,0x24d,0x2b7,0x1be)])&&_0x52b1bf[_0x29826c(0xf,0x48,-0x61,0x3e)][_0x29826c(0x193,0x1aa,0x163,0x178)]){_0x5ac07b=''+_0x52b1bf[_0x394f51(0xf2,0xad,0x90,0x18f)][_0x29826c(0x100,0x1cb,0x15d,0x178)];const _0x676b23=[];if(_0x52b1bf['error'][_0x29826c(0x46,0xaf,0x6d,0x7a)])_0x676b23[_0x29826c(0x17d,0xa8,0xf1,0x119)](_0x394f51(0x194,0x23b,0x1a6,0x1af)+_0x52b1bf[_0x394f51(0xf2,0xf6,0x125,0x64)][_0x29826c(0x11e,0x48,0x64,0x7a)]);if(_0x52b1bf[_0x29826c(0x89,-0x2b,-0x1a,0x3e)][_0x29826c(0x1b0,0x1e2,0x204,0x167)])_0x676b23[_0x29826c(0x1ae,0x168,0x9d,0x119)](_0x29826c(0x6b,0x9c,0x23,0x54)+_0x52b1bf['error'][_0x394f51(0x21b,0x262,0x185,0x290)]);_0x676b23[_0x29826c(-0x3,-0x44,0x38,0x55)]>0xa*0x3d2+0x262f+-0x1*0x4c63&&(_0x5ac07b+='\x20('+_0x676b23[_0x394f51(0x13c,0x12f,0xe7,0x1ca)](',\x20')+')');}else _0x5ac07b=''+JSON[_0x394f51(0x1b0,0x108,0x165,0x14f)](_0x52b1bf['error']);throw new Error(_0x5ac07b);}else return;}if(!_0x29cf1c['ok'])throw new Error(_0x29826c(0x194,0x198,0x7e,0x125)+_0x29cf1c[_0x394f51(0x204,0x243,0x2a8,0x19e)]+'\x20'+_0x29cf1c[_0x394f51(0x168,0x18c,0x1a0,0x133)]);const _0x1bb70c=_0x52b1bf[_0x394f51(0xef,0xcb,0x6f,0xec)]?.[-0x1*0x1a7d+0x5*-0x339+-0x2*-0x154d]?.['message']?.[_0x394f51(0x148,0x1ac,0x1e9,0x116)]||'';!_0x1bb70c&&toastr[_0x394f51(0x211,0x243,0x234,0x258)](_0x5bfa9e[_0x29826c(0x114,0x10e,0x8b,0xea)]);_0x3c4c34&&(_0x5bfa9e[_0x29826c(0x46,0xdd,0x12d,0xa8)](_0x5bfa9e['geFVT'],_0x5bfa9e[_0x29826c(-0x2e,0xe7,-0x2b,0x47)])?_0x5bfa9e[_0x29826c(0x146,0x161,0x1ee,0x17d)](_0x3c4c34,_0x1bb70c):(_0x21d0fb=_0x5bfa9e[_0x29826c(0x4f,0x132,0x9a,0x99)],_0x234793['warning'](_0x563215+(_0x29826c(0x1a0,0x194,0x1ad,0x162)+_0x29826c(0x46,0x176,0x73,0xef)))));_0x5bfa9e[_0x394f51(0x132,0x1bd,0x19d,0xc8)](addLog,_0x29826c(0x1c,0x74,-0x36,0x6c)+_0x29826c(0x56,0x113,0x16e,0xf6)),_0x5bfa9e[_0x29826c(0xf0,0x98,0x191,0x132)](addLog,_0x1bb70c),addLog(_0x394f51(0xea,0x13d,0xd0,0x17a)+_0x29826c(0x16,0x7a,0xe8,0x79));const _0x2763a2={};_0x2763a2[_0x394f51(0x205,0x16b,0x191,0x22a)]=!![],_0x2763a2[_0x29826c(0x147,0x36,0x95,0xd3)]=_0x1bb70c,_0x2763a2['id']=_0x56c9ac,eventSource[_0x29826c(0x1d2,0x14a,0xca,0x13d)](eventNames[_0x394f51(0x207,0x292,0x1ec,0x258)+'E_RESPONSE'],_0x2763a2);}else{const _0x194095=_0x45bf9b[_0x321e29][_0x394f51(0x137,0xb3,0xd3,0xaf)+_0x394f51(0x1a4,0x15d,0x1c9,0x11c)+_0x394f51(0x1e8,0x27a,0x14a,0x1b1)]||{},_0x5c2594={};_0x5c2594[_0x394f51(0x135,0xda,0xef,0x109)+'e']='默认',_0x5c2594['context_pr'+_0x394f51(0x19d,0x1d2,0x22f,0x242)]='默认';const _0x1a4e80=_0x194095[_0x346868]||_0x5c2594,_0x2ffa7b=_0x1a91a7[_0xc7f23d]['llm_profil'+'es']||{},_0x19fd7c=_0x2cc07d[_0x44a26a][_0x29826c(0x9e,0x158,0x12b,0x11a)+'xt_profile'+'s']||{},_0xb67a4a=_0x1a4e80[_0x29826c(0x35,0x54,0x100,0x81)+'e']||'默认',_0x116d21=_0x2ffa7b[_0xb67a4a]||_0x2ffa7b[_0x465e33[_0x29826c(0x137,0xee,0x139,0x10d)](_0x2ffa7b)[-0xc1d+0x143*0x9+0x2*0x61]]||{},_0x105227=_0x1a4e80[_0x394f51(0x106,0x79,0x157,0x65)+_0x29826c(0x178,0x11d,0x164,0xe9)]||'默认',_0x3c2f62=_0x19fd7c[_0x105227]||_0x19fd7c[_0x90654['keys'](_0x19fd7c)[-0x1a17+-0x71*0x1+-0x3*-0x8d8]]||{},_0x5cff59={};return _0x5cff59[_0x29826c(0xe5,0x124,0x135,0x105)]=_0x116d21['api_url']||'',_0x5cff59[_0x394f51(0x1f9,0x287,0x168,0x282)]=_0x116d21[_0x29826c(0x192,0x10b,0x142,0x145)]||'',_0x5cff59[_0x29826c(0xf3,0x84,0x110,0xc9)]=_0x116d21[_0x394f51(0x17d,0x18f,0x207,0x12d)]||'',_0x5cff59['temperatur'+'e']=_0x116d21[_0x394f51(0x185,0xff,0x1ef,0x164)+'e']??0xe2*0x2b+-0x2*0xeff+-0x7f8+0.7,_0x5cff59['top_p']=_0x116d21['top_p']??0xa44+-0x1532*-0x1+-0x1f75,_0x5cff59[_0x394f51(0x1d4,0x15f,0x1e1,0x22e)]=_0x116d21[_0x394f51(0x1d4,0x22d,0x26e,0x234)]??-0x24f+-0x14f2+-0x1941*-0x1,_0x5cff59[_0x394f51(0x13a,0xf0,0x137,0x161)]=_0x116d21[_0x394f51(0x13a,0xdd,0x160,0x138)]??![],_0x5cff59[_0x29826c(0x23,0xe3,0x136,0xc8)]=_0x3c2f62,_0x5cff59;}}catch(_0x59ed69){if(_0x59ed69[_0x29826c(0xfa,0xc2,0x102,0xcb)]===_0x5bfa9e[_0x394f51(0x218,0x1df,0x1d7,0x250)]){if(_0x5bfa9e['csOMP'](_0x5bfa9e['omthz'],_0x5bfa9e[_0x394f51(0xe8,0x186,0x148,0x123)])){console[_0x394f51(0x212,0x1ca,0x189,0x1c6)](_0x5bfa9e[_0x394f51(0x228,0x247,0x289,0x190)]);const _0x9cf30e={};_0x9cf30e[_0x29826c(0x71,0x171,0xcf,0xcb)]=_0x5bfa9e[_0x394f51(0x218,0x22b,0x1d7,0x2b5)],_0x9cf30e[_0x394f51(0x22c,0x269,0x263,0x1f2)]=_0x5bfa9e[_0x394f51(0x129,0x1b1,0x89,0x18c)];const _0x2240e0={};_0x2240e0[_0x394f51(0x205,0x2a1,0x280,0x1ca)]=![],_0x2240e0['result']=null,_0x2240e0['id']=_0x56c9ac,_0x2240e0[_0x29826c(0x6b,-0x10,0x1b,0x3e)]=_0x9cf30e,eventSource['emit'](eventNames['LLM_EXECUT'+_0x394f51(0x20e,0x1e9,0x236,0x175)],_0x2240e0);return;}else{_0x400d56[_0x29826c(0xfd,0x19d,0x167,0x15e)](_0x2724c1+(_0x394f51(0x1a0,0x1ac,0x1d0,0x1b4)+_0x394f51(0x158,0x19f,0x1af,0xbd)));const _0x548930={};_0x548930[_0x394f51(0x17f,0x227,0x1fc,0x204)]=_0x5bfa9e[_0x29826c(0xfd,0x1fa,0xdf,0x164)],_0x548930['message']=_0x5bfa9e[_0x29826c(0x2c,0x6e,0x33,0x75)];const _0x363079={};_0x363079[_0x394f51(0x205,0x1b6,0x271,0x199)]=![],_0x363079[_0x29826c(0x148,0x8b,0x11a,0xd3)]=null,_0x363079['id']=_0x247df1,_0x363079[_0x29826c(-0x37,0x28,0xcb,0x3e)]=_0x548930,_0xd4efd1[_0x29826c(0x1a6,0x193,0xe5,0x13d)](_0x4e4559,_0x363079);return;}}console[_0x394f51(0xf2,0x190,0x188,0x150)]('LLM\x20Execut'+_0x394f51(0x20d,0x180,0x23c,0x202),_0x59ed69);const _0x512ccf=_0x29826c(0x16f,0x138,0x9e,0x126)+_0x59ed69['message'];_0x3c4c34&&_0x5bfa9e['scpyl'](_0x3c4c34,_0x512ccf);toastr['error'](_0x59ed69['message']);const _0x534fe2={};_0x534fe2['success']=![],_0x534fe2[_0x394f51(0x187,0x16e,0x1a4,0x1f2)]=_0x512ccf,_0x534fe2['id']=_0x56c9ac,eventSource[_0x29826c(0x112,0xfc,0xcf,0x13d)](eventNames[_0x394f51(0x207,0x185,0x288,0x2a7)+_0x394f51(0x20e,0x17b,0x17a,0x1e3)],_0x534fe2);}finally{currentLLMRequestController=null,_0x5bfa9e[_0x394f51(0x223,0x249,0x1b0,0x1ed)](stopFabLoading);}}export function createGetPromptHandler(_0x4cacb2,_0x46788a){function _0x198910(_0x5bbba1,_0x369ddb,_0x57ad35,_0x2f7a49){return _0x47c5a5(_0x5bbba1-0x1eb,_0x2f7a49,_0x57ad35-0x1c7,_0x5bbba1- -0x591);}const _0x4d32e1={'iaMbN':'SdwkQ','jeywK':_0x198910(-0x5c,-0x24,-0x6a,0x0),'EYITd':function(_0x5cfa53,_0x485cac){return _0x5cfa53(_0x485cac);}};return function(_0x4d7e32){const _0x10b1d7={};function _0x236031(_0x4fd981,_0x3b661b,_0x5b1c93,_0x36553e){return _0x198910(_0x3b661b-0x12c,_0x3b661b-0xda,_0x5b1c93-0x159,_0x4fd981);}_0x10b1d7[_0x19f7dd(0x298,0x2ca,0x320,0x283)]='LLM\x20请求已中止。';function _0x19f7dd(_0x25a4bf,_0x48ad67,_0x23d877,_0x457dc6){return _0x198910(_0x48ad67-0x30f,_0x48ad67-0x2b,_0x23d877-0xe9,_0x457dc6);}const _0x6aa9c2=_0x10b1d7;if(_0x4d32e1[_0x19f7dd(0x234,0x1b0,0x12c,0x15a)]===_0x4d32e1[_0x236031(-0x85,-0x25,-0x26,-0x2a)])_0x5cc04a[_0x19f7dd(0x1c8,0x1b4,0x221,0x15c)](),_0x54afd3[_0x236031(0xad,0x20,-0x4f,0x71)](_0x6aa9c2[_0x19f7dd(0x332,0x2ca,0x2cc,0x248)]);else{const {id:_0x314742}=_0x4d7e32;if(!_0x314742)return;const _0x4e4860=REQUEST_TYPE_NAMES[_0x4cacb2]||_0x4cacb2;console['log']('st-chatu8:'+_0x236031(0xc2,0xf3,0x15e,0xeb)+_0x4e4860+(_0x236031(0xb9,0x6f,0x2b,0xce)+'D:\x20')+_0x314742+')');const _0x598705=_0x4d32e1[_0x236031(0x3c,0xb4,0x43,0xee)](buildPromptForRequestType,_0x4cacb2),_0x3bb405={};_0x3bb405[_0x19f7dd(0x1a0,0x243,0x243,0x249)]=_0x598705,_0x3bb405['id']=_0x314742,eventSource[_0x236031(0x158,0xc5,0x14e,0x99)](_0x46788a,_0x3bb405);}};}function _0x5c4485(_0x3b0887,_0x5bbb0f,_0x5383a7,_0x145d94){return _0x21cc(_0x5383a7-0xa,_0x3b0887);}export function createExecuteHandler(_0x4366cd,_0x1758ef,_0x21aa8b=null){const _0x3bc66e={'nRmkx':function(_0x3c092e){return _0x3c092e();}};return async function(_0x52db01){function _0xe83fb1(_0x29206d,_0x300958,_0x28c8ac,_0x49776c){return _0x21cc(_0x300958- -0x2d4,_0x29206d);}const _0x38114b=_0x21aa8b?_0x3bc66e[_0xe83fb1(-0x19c,-0xf4,-0x10f,-0xd6)](_0x21aa8b):null;await executeTypedLLMRequest(_0x52db01,_0x4366cd,_0x1758ef,_0x38114b);};}