(function(_0x1c251e,_0x29341f){function _0x5b45fe(_0x5bea8d,_0x360fb4,_0x53a534,_0x223ef6){return _0x3897(_0x5bea8d- -0x34,_0x360fb4);}const _0x305fb7=_0x1c251e();function _0x30723f(_0x4bc6b1,_0x290b82,_0x3634a3,_0x584830){return _0x3897(_0x290b82- -0x1ee,_0x584830);}while(!![]){try{const _0x5e2d47=parseInt(_0x30723f(-0xe1,-0x48,-0x9f,-0xc4))/(-0x2699+-0x4d3+0x2b6d)+-parseInt(_0x5b45fe(0xca,0xe2,0x152,0xfb))/(0x2231*-0x1+0x15*-0x193+0x4342)+-parseInt(_0x5b45fe(0x19a,0x1db,0x21e,0x205))/(-0xf6*0x25+0xd*0x1af+0x1*0xdae)+-parseInt(_0x5b45fe(0xdb,0xb4,0x71,0xb6))/(-0x121*-0xa+-0xba7+0x1*0x61)*(-parseInt(_0x30723f(-0x19e,-0x10b,-0x1af,-0x6f))/(-0x1cbe+-0x1*0x10d3+0x2d96))+-parseInt(_0x30723f(-0xd8,-0x46,0x3d,-0xdf))/(-0x1f48+0x222e+-0x2e0)+parseInt(_0x5b45fe(0x1ae,0x165,0x19e,0x1b4))/(0x2*-0xada+-0x250a+0xbc1*0x5)*(parseInt(_0x30723f(-0x8e,-0xf5,-0xee,-0x167))/(-0xd32+0x1063*0x1+-0x329))+parseInt(_0x5b45fe(0x1e3,0x181,0x183,0x14f))/(-0x3*-0x6d3+0x1a62+-0x2ed2)*(-parseInt(_0x30723f(-0x182,-0xe4,-0xb8,-0x147))/(0xa5*0x9+0xa*-0x2b9+-0x1577*-0x1));if(_0x5e2d47===_0x29341f)break;else _0x305fb7['push'](_0x305fb7['shift']());}catch(_0xc01331){_0x305fb7['push'](_0x305fb7['shift']());}}}(_0x2d9f,0x22dbe+-0x2c449+-0x54c5*-0x19));const _0x2eed72=(function(){function _0x551360(_0x2d625d,_0x4277a3,_0x434fe2,_0x2a33d0){return _0x3897(_0x434fe2- -0xa4,_0x4277a3);}const _0x2b9824={};_0x2b9824[_0x2cc80b(0x79,-0x6,0x5e,0x5a)]=function(_0xb4ddd9,_0x51c370){return _0xb4ddd9/_0x51c370;};function _0x2cc80b(_0x557c51,_0x2907f1,_0x14cc0b,_0x3fe712){return _0x3897(_0x2907f1- -0x100,_0x3fe712);}_0x2b9824[_0x551360(0xf8,0x106,0x119,0x12e)]=function(_0x1b2f19,_0x37cdf1){return _0x1b2f19/_0x37cdf1;},_0x2b9824[_0x2cc80b(-0x31,0x56,0x25,0x8f)]=_0x551360(0x3b,0xad,0x4e,0xc),_0x2b9824[_0x551360(0x36,0x12,0xa8,0x142)]=function(_0x44757e,_0x1d2435){return _0x44757e===_0x1d2435;},_0x2b9824['jCIXj']='dyGJC';const _0x1abe00=_0x2b9824;let _0x3f2e00=!![];return function(_0x1e3fd9,_0xa93200){const _0x5a6414={};_0x5a6414[_0x54a445(-0x1c5,-0x16b,-0x158,-0x167)]=_0x3b3b7c(-0x49,-0x3e,0x49,0xf2),_0x5a6414[_0x54a445(-0x118,-0x1b1,-0xc9,-0x13b)]=_0x1abe00[_0x54a445(-0x1d6,-0x1b0,-0x1ce,-0x152)];const _0x5118f3=_0x5a6414;function _0x3b3b7c(_0x5e10f7,_0xb69567,_0x4fd501,_0x4fac79){return _0x551360(_0x5e10f7-0x1e5,_0x4fac79,_0x4fd501- -0x2,_0x4fac79-0x111);}function _0x54a445(_0x3deef8,_0x4ca645,_0x5d736f,_0x4f8341){return _0x551360(_0x3deef8-0x13f,_0x5d736f,_0x4f8341- -0x204,_0x4f8341-0xe0);}if(_0x1abe00[_0x54a445(-0x150,-0x1ed,-0x1d1,-0x15c)](_0x1abe00[_0x3b3b7c(-0x61,0xd6,0x3b,0xb9)],_0x1abe00[_0x54a445(-0x120,-0x193,-0x11d,-0x1c7)])){const _0x5143cb=_0x3f2e00?function(){function _0x191720(_0x32331d,_0x3f4978,_0x2e6a0a,_0x12e3b8){return _0x3b3b7c(_0x32331d-0x2c,_0x3f4978-0xa0,_0x12e3b8-0x38b,_0x32331d);}function _0x431082(_0x25c080,_0x18a1d9,_0x1190b5,_0x207a7a){return _0x3b3b7c(_0x25c080-0x16a,_0x18a1d9-0xae,_0x25c080-0x475,_0x1190b5);}if(_0x5118f3[_0x191720(0x470,0x3f4,0x457,0x426)]===_0x5118f3[_0x431082(0x53c,0x5e4,0x56d,0x4ec)])_0x30b64c+='\x20('+_0x4936df[_0x191720(0x4d8,0x428,0x498,0x462)](',\x20')+')';else{if(_0xa93200){const _0x4d4bae=_0xa93200[_0x431082(0x4ed,0x4f3,0x53f,0x48e)](_0x1e3fd9,arguments);return _0xa93200=null,_0x4d4bae;}}}:function(){};return _0x3f2e00=![],_0x5143cb;}else{const _0x482a45=_0x347a87[_0x54a445(0x16,-0x57,-0xe3,-0x8b)](/^data:([^;]+);/),_0x115864=_0x482a45?_0x482a45[0x11ad+-0x43c+-0x158*0xa]:_0x3b3b7c(0xb4,0x188,0xee,0x68),_0x4f3079=_0x2cda7a[_0x3b3b7c(-0xb,0xb6,0x8d,0x48)](',')[0xe*-0x58+0x110a+-0xc39]||'',_0x3e7a26=_0x48ac66[_0x3b3b7c(0x105,0xec,0x157,0x189)](_0x1abe00['cTUAC'](_0x1abe00['MwgNB'](_0x4f3079[_0x54a445(-0x5e,-0x1a6,-0x19d,-0xfb)]*(-0x1c81+0x546*-0x6+0x3c28),0x1e53*-0x1+-0x22da+-0x1*-0x4131),-0x1cf8+-0xda0+0x2e98));_0x190149[_0x54a445(-0x19a,-0x1c8,-0x1fb,-0x186)](_0x54a445(-0x120,-0x7a,-0x1ac,-0x125)+':\x20'+_0x115864+',\x20约\x20'+_0x3e7a26+'KB]');}};}()),_0x395c4a=_0x2eed72(this,function(){function _0x42f226(_0x5b90e1,_0x3efabc,_0x2335fe,_0x47e498){return _0x3897(_0x2335fe-0x393,_0x3efabc);}const _0x296ecb={};_0x296ecb[_0x54f45d(-0xf6,-0x187,-0x140,-0x1e4)]=_0x54f45d(-0x64,-0xca,-0x3c,-0x2a)+'+$';const _0x19c736=_0x296ecb;function _0x54f45d(_0x30a35c,_0x50ce31,_0x46a553,_0x3a0798){return _0x3897(_0x46a553- -0x217,_0x50ce31);}return _0x395c4a['toString']()['search'](_0x19c736[_0x42f226(0x3cc,0x4d9,0x46a,0x43c)])[_0x42f226(0x5af,0x5c9,0x57a,0x613)]()[_0x54f45d(-0x5b,-0x55,-0x99,-0xb1)+'r'](_0x395c4a)[_0x54f45d(-0x162,-0x107,-0xd1,-0x165)](_0x19c736['AIHPd']);});_0x395c4a();function _0x445fe2(_0x2d150e,_0x471828,_0x3b209c,_0x304c19){return _0x3897(_0x2d150e-0x1c8,_0x471828);}import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';function _0x3897(_0x5ce549,_0x3a9831){_0x5ce549=_0x5ce549-(0x886+-0x1*-0x33d+-0xaf1);const _0xfe9590=_0x2d9f();let _0x5b8924=_0xfe9590[_0x5ce549];if(_0x3897['HhCrDt']===undefined){var _0x846140=function(_0x387a59){const _0x2bc6e1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x61295e='',_0x43c909='',_0x3aaa9d=_0x61295e+_0x846140;for(let _0x200b74=0x74b*0x1+-0x65*-0x21+-0x1450,_0x15cdaf,_0x406293,_0x42482d=0x12ff+-0x1f94+0xc95;_0x406293=_0x387a59['charAt'](_0x42482d++);~_0x406293&&(_0x15cdaf=_0x200b74%(0x198d+-0xe*0x138+-0x879)?_0x15cdaf*(-0x146*0x14+-0xf43+-0xda9*-0x3)+_0x406293:_0x406293,_0x200b74++%(0x1*0x215e+-0x24fa+-0x1*-0x3a0))?_0x61295e+=_0x3aaa9d['charCodeAt'](_0x42482d+(0x1af9+-0x11*0x12f+-0x6d0))-(-0x225*-0x7+-0x1424+0x7*0xbd)!==-0x765*-0x3+-0x812*0x2+-0x60b?String['fromCharCode'](-0x1b*-0x160+0xca*0x26+-0x19*0x2a5&_0x15cdaf>>(-(-0x2176+-0x173d*-0x1+-0x61*-0x1b)*_0x200b74&-0x1361+0x1a*0x56+0xaab)):_0x200b74:0x26c8+0x51b*-0x2+0x2e*-0x9f){_0x406293=_0x2bc6e1['indexOf'](_0x406293);}for(let _0xe00d1d=0x29*0xd7+0x44*-0x76+-0x317,_0xff2ab8=_0x61295e['length'];_0xe00d1d<_0xff2ab8;_0xe00d1d++){_0x43c909+='%'+('00'+_0x61295e['charCodeAt'](_0xe00d1d)['toString'](0x1*0x1e9+0x6b2+-0x88b*0x1))['slice'](-(0x1*-0x20fd+-0x61*0x53+0x4072));}return decodeURIComponent(_0x43c909);};_0x3897['jUcwlU']=_0x846140,_0x3897['GYRzpE']={},_0x3897['HhCrDt']=!![];}const _0x3c48d7=_0xfe9590[0xe2*-0x15+-0x1*0x655+-0x1*-0x18df],_0x47873f=_0x5ce549+_0x3c48d7,_0x2bbe52=_0x3897['GYRzpE'][_0x47873f];if(!_0x2bbe52){const _0x3a5dc5=function(_0x3fdf0b){this['cBtrXi']=_0x3fdf0b,this['KcpLtL']=[0x1*-0x762+0x5de*0x2+0x7*-0x9f,-0x2433+-0xe01+0x3234,0xcab+-0x1d74+0x10c9],this['FfREmT']=function(){return'newState';},this['MhPNie']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ZKqmXl']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3a5dc5['prototype']['MepsOG']=function(){const _0x433a1c=new RegExp(this['MhPNie']+this['ZKqmXl']),_0x69a3db=_0x433a1c['test'](this['FfREmT']['toString']())?--this['KcpLtL'][0x1222+-0x4b*-0x3b+-0x236a]:--this['KcpLtL'][-0x1a20+0x2e+-0xcf9*-0x2];return this['JSrfmS'](_0x69a3db);},_0x3a5dc5['prototype']['JSrfmS']=function(_0x4ccba5){if(!Boolean(~_0x4ccba5))return _0x4ccba5;return this['JDoldD'](this['cBtrXi']);},_0x3a5dc5['prototype']['JDoldD']=function(_0x4e9a33){for(let _0x39c5b5=0x1345+-0x483+-0xec2,_0xc7d03f=this['KcpLtL']['length'];_0x39c5b5<_0xc7d03f;_0x39c5b5++){this['KcpLtL']['push'](Math['round'](Math['random']())),_0xc7d03f=this['KcpLtL']['length'];}return _0x4e9a33(this['KcpLtL'][-0xe08+0x2135+-0x132d]);},new _0x3a5dc5(_0x3897)['MepsOG'](),_0x5b8924=_0x3897['jUcwlU'](_0x5b8924),_0x3897['GYRzpE'][_0x47873f]=_0x5b8924;}else _0x5b8924=_0x2bbe52;return _0x5b8924;}import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';let currentLLMRequestController=null;export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x2d0da7){currentLLMRequestController=_0x2d0da7;}export function isLLMRequestActive(){return!!currentLLMRequestController;}function _0x2d9f(){const _0x3794ef=['zxjYB3i','C3bSAxq','vNHgzNO','y2HHCL9KzxnPzW','5y+r6ycb55QeifbYB21WDa','teXnioIVT+AXGUw3SUs4REATOUoaGG','ufLhq2W','quNLIQNMIyS','Aw5JBhvKzxm','C3rHDhvZ','Bg9LqMm','Cg9W','5lUJ56cboG','qwjVCNrfCNjVCG','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','vLzWB3O','DhLWzq','ANzwCKq','5l2C5BEY6lEZ6l+h44cc','yxbPx3vYBa','C2vHCMnO','Bg9N','y2HVAwnLCW','C3PmDMS','Avn0sxm','57o757UF5O+q56s66k+n','shbXB2m','B2XbEgW','8j+tTYbB5zU+54Mh6zo+5O6LoIa','ihjLCxvLC3qGyq','qxfQsKm','y1HKEvm','57g75z6loG','DhHRuvq','sxjJvxO','zNvUy3rPB24','DKLHsem','veHmr2q','CNnWueO','Aw9UoIaIqMvHCG','Cw5PDvO','veL3EuW','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','sNLcEKm','y1LWBwu','sfb1vMS','Dg9VBa','qNHKsxC','ioAuTUwiSa','ievYCM9YoG','tfbQs3i','B3j0zwq','uhz1qu4','Dg9Wx3a','BhvKzv9OzwfKzq','BwvZC2fNzxm','rezKr28','5lUJ56cboIa','wfHWzM4','BenJAe4','C3rYAw5NAwz5','rv9srvnqt05trq','D2vmCMm','6kEs6iMYl+ACJEIJHEIUVUIUOq','A1DlCMi','vhrqvvG','qu1YAKO','qxnrt2S','EefzzMS','iefqssblzxKSia','vLDdt28','u1vnzfe','rKrUsxi','B2zmwxG','sgXksKi','AM9PBG','y29UC3rYDwn0BW','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','DxrMltG','Cg1oALG','EKDdzuy','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','ueTxwwi','qNbYANa','B2vwC2C','Eu9quMW','u1btBuq','yxnZAxn0yw50','AK9wt00','lcdNUQyG','EM5LCw4','zgf0ytOG','ywjVCNq','qxv0Ag9YAxPHDa','y3vZDg9Tx3vYBa','CKrcsfG','rfHZthK','Aw1Hz2vFDxjS','Dw5RBM93BG','5Pwi5zUE5Asn44cc','iowBNUwKJsaTls0Tlq','wuLTwey','BMfTzq','zw1PDa','vgfN5l+U5Ps5','ue9tva','teXnigv4zwn1Da','sKnKqNu','qvbjifvstcWGqq','z3nhrxq','teXnx0vyrunvva','44cq5Rwl6k+v5QIH5BYp44cr','DMPNyxa','C2TQyvu','BenUy3i','A1HXvum','otC3mdG0BxbXyw5V','zNrkr2K','odKXmZyWzw13ruHr','l2fWAs9IywnRzq','Df90ExbLx2nVBG','CgfYC2u','uwHMrxO','BgvUz3rO','Dgv4Da','y3vZDg9Tx2LUyW','zgf0ytOGw0rptG','qufsvuC','tMzNC2K','zgvSDge','teXniev4zwn1Da','DeLft3G','CLjtCwO','zuDUs2u','surcAw0','BwvZC2fNzq','y29UDgvUDa','ANnVBG','5AEl5PAW6k+35Rgc44cc','txDNtKi','oIbbueKGvvjmla','AgnOsue','yvfPBMu','BMrZl2nOyxqTyW','uMvXDwvZDcbHyG','y2HHCL9KAxnWBa','yMfnse0','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','vffcweK','yNvMzMvYktO','6k+35RgcieLeoIa','Bwf4x3rVA2vUCW','EhrFChjVzMLSzq','DhjHBNnSyxrPBW','oIbmte0G5PYQ5Ps25yIW5PYj','C2LNBMfS','mJqYnti2owncveHvuW','t3v1vK4','BgXTx3bYB2zPBa','zsbfCNjVCJO','DNbUEwK','vKDOAwe','zM9YrwfJAa','uuv2qxC','ioAuTUwiScbmte0G5OMN6kgm','twHnC1O','y3vZDg9T','ruTxwvy','qwjjqu8','kcGOlISPkYKRkq','zLLKqMG','CLvtwwq','DhjPz2DLCG','A2v5CW','Dg9Rzw4','wK5iAhu','mtu0CgvLsK1h','5yE95PwW6lcd55sO','reTrv1i','C3rFy29UDgv4Da','EgnJB2K','Dg9tDhjPBMC','D2fYBG','zxD3DuW','Aw1yELC','C2XPy2u','y21AALG','q0XsCg4','y29UDgv4Df9WCG','BgXTvgvZDe1Vza','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','C09Otvy','yM9YDgvKlG','DgvZDe1Vzgu','6k+35Rgc5BYa5AElicG','vu9YBxm','uhPpsgW','CMvZDwX0','5Q2J5zYO5Ase55cgia','B3Lgve0','Aw5MBW','CLniDxC','zhP3ELa','CM91BMq','C3vJy2vZCW','5Rwb5BYp6kEJ5P6q6k2M5zgkoG','y29Kzq','z3PjC28','we9ntxq','yujvEhi','uM9MANe','AgLZDg9YEq','seTtBhy','Dxvrr1y','rfvbC0G','zKLPB00','AxnbCNjHEq','ioAuTUwiSca','ALv5zeS','6k+35Rgc6zsz6k+VoIa','sLjKB2K','5Rwl6k+v5QIH5BYp5O+q56s6','5O+q56s66k+n6i635y+w6k+35RgcicHj','6BUy6k6K6k+35Rgc5BYa5AElid09pq','AhjOuhm','DgvTCgvYyxr1CG','DxnLCG','DwHRExi','yMPlreu','mtyYzgDqzK9r','CM9Szq','DNLLA1C','56In5yczlI4U','DhjPBq','teXnioACQUAuTUwiSoACIEAvIowBNG','Bwf0y2G','zxrPB25FC291CG','yxbPx2TLEq','5OIwie1VzgvSioACQUMfJq','C3rHCNrZv2L0Aa','txLsCe0','BgXTx3jLCxvLCW','AuT5z3G','Bw9KzwW','v1r3v2O','tgLfwha','z0fIDeW','zML3Bgu','DfrdB3q','D2fYBMLUzW','A0LxseO','quLiugq','sxvgs0G','6k+35Rgc5A6m5OIqid09pt09','C3rYzwfT','CxDfCge','A1jwrhq','vKvYAMe','tu1wzwm','6kEs6iMYl+ACJEIJHEs/RUAuUq','v1bmt1C','AKnjwgO','yM9KEq','nxzTAhzSvW','ENHjyLi','B2jQzwn0','wLHct0m','quXVBKS','x3bYB2zPBgu','ywjVCNrLzc4','5Q2J5PAh5zU+54Mh55sF5OIq','q3bez3u','y3vYCMvUDf9SBa','C1viwhm','y29UDgv4Da','t3nTDMq','57g75z6loIa','yxbPx3bYB2zPBa','uhvgzhO','CeH2Cuq','y2HHCL9TB2rPzG','ueKGs2v5lcdMIjyG','t2TPrvy','DgLTzu91Da','rwTXvgO','mJa0ndi0z1vyrLDN','y1rvqum','Bv9WCM9MAwXL','CMvHza','y3vYCMvUDf90zq','ntaYnZy4uKXXuezd','vvvqv3C','C3qTy2HHDhu4oG','sNnss2O','y2HHDf9JB21WBa','s0jD','thPAr1m','uu5Zzha','zMXtr3C','wwvnzue','su5VBva','D2DMz0q','mJC4otmWr25hANnh','zvHPrhK','DeLwCMm','DxjS','z0f0rw4','mJCWmdCWoezjywzlAG','tw9KzwWG5PYQ6ywn572U44cc','B21WBgv0Aw9UCW','r05KwgS','Aufwv0S','zMLNCW','ioIVT+AXGUw3SUwUJoAiKo+8JowqJUE7REAtJq','CMH4Awu','C3LZDgvT','ANjuENq','Chn6rLa','u1nwAgy','ueH5s1a','C2r4Ewy','C3rHDhvZvgv4Da','yxbWBhK','Avzhu2W','vNDuwxK','zgvJB2rL','ChvZAa','CMvWBgfJzq','Aw1Hz2vFz2vU','BKvHBxO','DgvZDf9JB250zq','BgL4thq','zw50CMLLCW','CMvWzwf0','DKLkrey','uMLrreq','C3rYAw5N','zsbYzxf1zxn0ia','Eu5crfG','pt09pt0GteXnia','B2zPBgu','BwXNtgC'];_0x2d9f=function(){return _0x3794ef;};return _0x2d9f();}export function abortLLMRequest(){const _0x2fab44={};_0x2fab44['LatbN']=function(_0x313cc7,_0x326add){return _0x313cc7===_0x326add;};function _0x185b7c(_0x2bfefa,_0x551130,_0x2abf96,_0x1f0c24){return _0x3897(_0x2abf96- -0x2a1,_0x551130);}_0x2fab44['XXpfn']='MyRpM',_0x2fab44[_0x25ab41(0xda,0x29,0x4d,0x6e)]=_0x185b7c(-0x132,-0xcb,-0x16a,-0x1d1);const _0x36a7ca=_0x2fab44;function _0x25ab41(_0x33706d,_0xd39b89,_0x3fe2ae,_0x253bef){return _0x3897(_0x3fe2ae- -0x139,_0x33706d);}currentLLMRequestController&&(_0x36a7ca['LatbN'](_0x36a7ca[_0x185b7c(-0x105,-0x19c,-0x135,-0x11e)],_0x25ab41(0x109,0x54,0xe9,0x59))?(currentLLMRequestController[_0x185b7c(-0xb0,-0xa0,-0x113,-0xe3)](),toastr[_0x25ab41(0x121,0x12b,0xc1,0xa0)](_0x36a7ca[_0x25ab41(0xf4,0xe8,0x4d,-0x42)])):_0x54f11d['push'](_0x25ab41(0x7e,-0x1,0x15,0x3a)+_0x3fe069+']'));}export function isLLMTestMode(){return!!extension_settings[extensionName]['llmTestMod'+'e'];}export function formatPromptForDisplay(_0xe7ae28){function _0x8c5425(_0xa82878,_0x39c6dc,_0x29446e,_0x8c2dec){return _0x3897(_0x29446e- -0x75,_0x8c2dec);}const _0x2ae10a={'NEfRf':_0x272bde(0x34c,0x35d,0x3f7,0x302),'ZNHhu':_0x8c5425(0x143,0x132,0xcb,0x166),'mlgLg':function(_0x2a5a5d,_0x352744){return _0x2a5a5d>_0x352744;},'dzwzP':_0x8c5425(0x1c4,0xb4,0x139,0xb2),'UOrms':function(_0xf18619,_0x50a87b){return _0xf18619===_0x50a87b;},'DFdGo':_0x8c5425(0x109,0xd5,0x11e,0x126),'yOPRl':_0x8c5425(-0x9,0xe3,0x68,-0x7),'rRSqj':'data:','eXiDy':function(_0x58ae82,_0x28e905){return _0x58ae82!==_0x28e905;},'kIWHJ':_0x8c5425(0x19b,0x150,0x11f,0x179),'DXsLy':function(_0x58361b,_0x4163a6){return _0x58361b/_0x4163a6;},'uuQGV':function(_0x5693b4,_0x42f0f1){return _0x5693b4*_0x42f0f1;},'tTCot':function(_0x38c2ef,_0x46c570){return _0x38c2ef===_0x46c570;},'VWCOo':'gxyYK','nEamz':_0x272bde(0x3e4,0x3ba,0x46d,0x405),'Bprjp':function(_0x10dd1f,_0x42e2f5){return _0x10dd1f(_0x42e2f5);},'JCdBu':_0x272bde(0x341,0x3e2,0x389,0x3af),'IuFKH':'uqBdB','iVGSl':_0x272bde(0x373,0x3ff,0x3ce,0x3a7),'tIVrc':function(_0x32d7b4,_0x305f00){return _0x32d7b4===_0x305f00;},'tIEOx':_0x272bde(0x3ff,0x447,0x3d5,0x393),'QqZfV':function(_0x32ea5e,_0x48a0a0){return _0x32ea5e===_0x48a0a0;},'gAbtL':function(_0x30c914,_0x1a8d08){return _0x30c914!==_0x1a8d08;}};if(_0x2ae10a[_0x272bde(0x321,0x375,0x32e,0x2e3)](typeof _0xe7ae28,_0x8c5425(0x6e,0x149,0xb7,0xf6))){if(_0x2ae10a[_0x272bde(0x2e9,0x257,0x36b,0x2ad)](_0x2ae10a[_0x8c5425(0xc8,0x1cd,0x140,0x19e)],_0x2ae10a['tIEOx']))return _0xe7ae28;else _0x2194df['abort'](),_0x56f6fe[_0x272bde(0x40f,0x405,0x36c,0x3af)](_0x2ae10a['NEfRf']);}function _0x272bde(_0x2688fd,_0x129bf3,_0x388354,_0x419532){return _0x3897(_0x2688fd-0x215,_0x129bf3);}if(Array[_0x272bde(0x41f,0x4a4,0x3a6,0x3dc)](_0xe7ae28)){const _0x25073c=[];return _0xe7ae28['forEach']((_0x20dfb6,_0x192bf8)=>{function _0x2fc3cb(_0x36eb4b,_0x5709cd,_0x331073,_0x500d75){return _0x272bde(_0x36eb4b- -0x348,_0x331073,_0x331073-0x85,_0x500d75-0x11b);}function _0x55877e(_0xd2de9c,_0x28a700,_0x8596ca,_0x44c6a9){return _0x8c5425(_0xd2de9c-0x111,_0x28a700-0x180,_0x8596ca- -0x189,_0xd2de9c);}const _0x574dc8={'gsGEt':function(_0x467891,_0x123109){function _0x4a91d3(_0x58ba1a,_0x2fc96f,_0x33f540,_0x3d1fa3){return _0x3897(_0x33f540- -0x173,_0x58ba1a);}return _0x2ae10a[_0x4a91d3(-0x85,-0xb1,-0x42,-0xc1)](_0x467891,_0x123109);},'YImXF':_0x2ae10a[_0x2fc3cb(0xc9,0x13d,0x27,0x15a)],'ewwuL':function(_0x4c4dba,_0x1955f0){function _0x4057ff(_0x22a204,_0x2e29e6,_0x3806b0,_0x483716){return _0x2fc3cb(_0x3806b0-0xfa,_0x2e29e6-0x5f,_0x483716,_0x483716-0xda);}return _0x2ae10a[_0x4057ff(0x217,0x18c,0x1bc,0x257)](_0x4c4dba,_0x1955f0);},'rhxie':_0x2ae10a[_0x55877e(-0x9e,-0xee,-0x94,-0x1e)],'DAvLY':_0x55877e(0x42,-0x34,0x14,-0x48),'ftJGi':_0x2ae10a[_0x55877e(-0xdb,-0x9c,-0x77,-0x89)],'QEvAw':_0x2ae10a[_0x2fc3cb(0x83,0xaf,0x5e,0xbd)],'cmZjX':function(_0x23bc84,_0x36d867){function _0xe40e69(_0x5d2d23,_0x52a46e,_0x10d08a,_0x3cdcf2){return _0x55877e(_0x52a46e,_0x52a46e-0x1c5,_0x5d2d23- -0x64,_0x3cdcf2-0x148);}return _0x2ae10a[_0xe40e69(-0x157,-0x1f1,-0x12e,-0x187)](_0x23bc84,_0x36d867);},'pHCWJ':_0x55877e(-0x55,-0x54,0xa,0x8c),'baMHM':_0x2fc3cb(-0x18,0x60,0x91,-0x7),'vIJDF':_0x2ae10a[_0x2fc3cb(-0x5d,0x17,0x3c,-0x43)],'aBUxr':function(_0x7a144a,_0x20d2fc){function _0x3e33b1(_0x23f495,_0x19f33f,_0x7afe7a,_0x4140b5){return _0x55877e(_0x4140b5,_0x19f33f-0x19d,_0x23f495-0x23,_0x4140b5-0x1b9);}return _0x2ae10a[_0x3e33b1(-0x49,0x49,0x4c,-0xd)](_0x7a144a,_0x20d2fc);},'CpDgu':function(_0x2ba10b,_0x44127a){function _0x3b0340(_0x1e0e7c,_0x5e39d6,_0x498df7,_0x5e53d4){return _0x55877e(_0x5e53d4,_0x5e39d6-0xbe,_0x5e39d6- -0x3c,_0x5e53d4-0x1dc);}return _0x2ae10a[_0x3b0340(-0x100,-0xa8,-0x72,-0x6a)](_0x2ba10b,_0x44127a);},'EkqTj':function(_0x273ce0,_0x397787){function _0x5465e0(_0x57f0c,_0x1365af,_0x1e6d75,_0xcfc9a7){return _0x2fc3cb(_0x1e6d75- -0x15,_0x1365af-0x9b,_0x1365af,_0xcfc9a7-0x11b);}return _0x2ae10a[_0x5465e0(0xa4,0xe2,0xbf,0xcb)](_0x273ce0,_0x397787);}};if(_0x2ae10a[_0x2fc3cb(-0x5f,-0x2f,-0x9,0x16)](_0x2ae10a[_0x2fc3cb(0x45,0x6c,0x8,0x51)],_0x2ae10a[_0x55877e(-0x160,-0x60,-0xd9,-0x104)])){_0x35d258=''+_0xc62eaa['error'][_0x55877e(-0x17,-0x76,-0x45,-0x6b)];const _0x2934d7=[];if(_0x553632[_0x55877e(-0x9a,-0xeb,-0xcc,-0xc0)][_0x2fc3cb(0xf,0xaf,-0x11,0x5)])_0x2934d7[_0x55877e(-0x14e,-0x114,-0xdc,-0xd0)](_0x2fc3cb(-0x43,0x58,0x4a,-0x9a)+_0x2dcd30[_0x2fc3cb(-0x1,-0x1a,-0x16,0x5)][_0x2fc3cb(0xf,0xa6,-0x7c,0x4d)]);if(_0x24679a[_0x55877e(-0x2c,-0xc7,-0xcc,-0x5c)][_0x2fc3cb(0xcd,0x112,0xa4,0x70)])_0x2934d7['push'](_0x2fc3cb(0x38,-0x13,-0x28,0x2e)+_0x5d3e5f[_0x2fc3cb(-0x1,0x5,-0x1d,0x48)]['code']);_0x574dc8[_0x55877e(-0x61,-0xc2,-0x5f,-0x92)](_0x2934d7['length'],-0x2588+0x1c3*-0x6+0x301a)&&(_0x190044+='\x20('+_0x2934d7['join'](',\x20')+')');}else{const _0x2236b4=_0x20dfb6[_0x2fc3cb(0xe5,0x97,0xc6,0x9d)]||_0x55877e(-0x8,0x19,-0x6a,-0x12),_0x4d1e98=_0x2ae10a[_0x2fc3cb(0x52,0x7,0x67,0xd)](getRoleLabel,_0x2236b4);_0x25073c['push'](''+'═'[_0x55877e(-0xcf,-0x108,-0xd5,-0xe3)](0xac+-0x9*0x2c5+0x1873)),_0x25073c['push']('【'+_0x4d1e98+'】'),_0x25073c['push'](''+'─'[_0x55877e(-0xf9,-0x2e,-0xd5,-0x55)](0x1*-0x58d+0x1b7b+-0x4*0x56f));const _0x39b1f6=_0x20dfb6[_0x55877e(0x1f,-0x6c,-0x44,0x2f)];if(typeof _0x39b1f6===_0x2ae10a[_0x2fc3cb(0x6a,0xaa,0xbe,-0x1)])_0x25073c[_0x55877e(-0xc5,-0x6c,-0xdc,-0xb0)](_0x39b1f6);else Array[_0x55877e(-0x3f,-0x44,0xc,0x44)](_0x39b1f6)&&(_0x2ae10a[_0x55877e(-0xc9,-0x1a1,-0x126,-0xb2)]===_0x2ae10a[_0x2fc3cb(-0x14,-0x39,0x1b,0x96)]?(_0x2aec66=_0x2ae10a[_0x2fc3cb(0xae,0x35,0x4d,0x27)],_0x99f511['warning'](_0x128394+(_0x2fc3cb(0x99,0xd0,0x35,0x4c)+'效回复。'))):_0x39b1f6[_0x2fc3cb(0xa1,0x58,0xb7,0xed)](_0x3e013b=>{function _0x4aa9d5(_0x30a931,_0x376137,_0x5ecb9e,_0x2449b3){return _0x55877e(_0x30a931,_0x376137-0x15f,_0x5ecb9e- -0x199,_0x2449b3-0x160);}function _0xe1d01e(_0x319f84,_0x4191c8,_0xdf9a7,_0x291623){return _0x55877e(_0xdf9a7,_0x4191c8-0x13e,_0x319f84-0x47f,_0x291623-0x33);}if(_0x3e013b[_0x4aa9d5(-0x1f6,-0x1bd,-0x255,-0x285)]===_0x574dc8[_0xe1d01e(0x418,0x3b4,0x39b,0x4c2)])_0x25073c['push'](_0x3e013b[_0xe1d01e(0x42f,0x4b1,0x436,0x424)]||'');else{if(_0x574dc8['ewwuL'](_0x3e013b[_0xe1d01e(0x3c3,0x3be,0x427,0x3ee)],_0x574dc8[_0x4aa9d5(-0x1f7,-0x27f,-0x281,-0x1f3)])){if(_0x574dc8[_0xe1d01e(0x46a,0x49a,0x45d,0x442)](_0x574dc8['DAvLY'],_0x574dc8[_0xe1d01e(0x428,0x3b7,0x3cc,0x491)]))_0x252c62=''+_0x469ab4[_0xe1d01e(0x3ef,0x496,0x46a,0x436)](_0x1a5e08[_0xe1d01e(0x3b3,0x35c,0x427,0x30a)]);else{const _0x1bd7f6=_0x3e013b[_0xe1d01e(0x414,0x3e5,0x3a0,0x45b)]?.[_0x4aa9d5(-0x2c9,-0x2fe,-0x28a,-0x222)]||'';if(_0x1bd7f6[_0xe1d01e(0x4a2,0x499,0x45d,0x53c)](_0x574dc8[_0xe1d01e(0x456,0x4b8,0x4eb,0x4bc)])){if(_0x574dc8[_0x4aa9d5(-0x11f,-0x1a4,-0x1ab,-0x204)](_0x574dc8['pHCWJ'],_0x574dc8[_0xe1d01e(0x445,0x4ec,0x48c,0x451)])){const _0x441c47=_0x1bd7f6[_0xe1d01e(0x49e,0x547,0x4f6,0x46b)](/^data:([^;]+);/),_0x2756e3=_0x441c47?_0x441c47[0xd6e+0x5dc+0x1*-0x1349]:_0x574dc8[_0xe1d01e(0x3ab,0x440,0x3f6,0x3f6)],_0x53429a=_0x1bd7f6[_0xe1d01e(0x3b4,0x3c6,0x402,0x440)](',')[-0x7fa+0x1*0x1267+0x29b*-0x4]||'',_0x36efc1=Math['round'](_0x574dc8[_0x4aa9d5(-0x123,-0x222,-0x194,-0x1de)](_0x574dc8[_0xe1d01e(0x36c,0x2f3,0x3a1,0x369)](_0x574dc8[_0x4aa9d5(-0x247,-0x2d3,-0x29f,-0x2c0)](_0x53429a[_0xe1d01e(0x42e,0x489,0x483,0x414)],-0x3f*0x43+-0x17e0+-0x4*-0xa18),0x266*0x10+-0x4df+-0x217d*0x1),-0x1c76+-0x26c3*0x1+0x4739*0x1));_0x25073c[_0x4aa9d5(-0x2d4,-0x1dc,-0x275,-0x275)](_0xe1d01e(0x404,0x42e,0x3fd,0x48e)+':\x20'+_0x2756e3+_0x4aa9d5(-0x29a,-0x1db,-0x20c,-0x1d1)+_0x36efc1+_0xe1d01e(0x384,0x3cc,0x3d9,0x3ef));}else _0x3ae9f1['abort'](),_0x70b290[_0x4aa9d5(-0x105,-0x10f,-0x19d,-0x241)](_0x4aa9d5(-0x13e,-0x1b4,-0x1a7,-0x17c)+_0x4aa9d5(-0x247,-0x1e2,-0x1db,-0x13b));}else _0x25073c[_0xe1d01e(0x3a3,0x41b,0x409,0x36a)](_0x4aa9d5(-0x28a,-0x1d6,-0x249,-0x27e)+_0x1bd7f6+']');}}}}));_0x25073c[_0x2fc3cb(-0x11,-0x41,-0x14,-0xa6)]('');}}),_0x25073c['join']('\x0a');}if(_0x2ae10a['QqZfV'](typeof _0xe7ae28,_0x272bde(0x2fa,0x380,0x363,0x309))&&_0x2ae10a[_0x8c5425(-0x17,0x7b,0x5d,0xa7)](_0xe7ae28,null))return JSON[_0x272bde(0x383,0x3c5,0x3cb,0x34d)](_0xe7ae28,null,0x240c+-0x525*0x5+-0x13*0x8b);return String(_0xe7ae28);}export function getRoleLabel(_0x341e43){const _0x5dd411={};_0x5dd411[_0x4e9b6f(-0x158,-0x130,-0x1ba,-0x155)]=_0x5bffee(-0x2bd,-0x29d,-0x2b6,-0x22f),_0x5dd411[_0x5bffee(-0x268,-0x278,-0x1ec,-0x1e7)]=_0x4e9b6f(-0x143,-0x1d3,-0x242,-0x264),_0x5dd411[_0x5bffee(-0x259,-0x290,-0x2c1,-0x2c9)]=_0x4e9b6f(-0xc5,-0x129,-0xda,-0x17c);const _0x24a37a=_0x5dd411,_0x208439={};_0x208439[_0x5bffee(-0x244,-0x2d1,-0x34c,-0x35b)]=_0x24a37a['fYdBh'],_0x208439[_0x5bffee(-0x247,-0x1d4,-0x23a,-0x131)]='用户',_0x208439['assistant']=_0x24a37a['weLrc'],_0x208439[_0x5bffee(-0x2bc,-0x293,-0x2f1,-0x2d4)]=_0x24a37a[_0x4e9b6f(-0x1ba,-0x1b4,-0x1fa,-0x231)];function _0x5bffee(_0x3e9e6b,_0x5dcb4b,_0x4de484,_0x4d6858){return _0x3897(_0x5dcb4b- -0x3e8,_0x4de484);}_0x208439[_0x5bffee(-0x237,-0x288,-0x1ff,-0x281)]='工具';const _0x940a47=_0x208439;function _0x4e9b6f(_0x576598,_0x24e9f5,_0x3491bd,_0xbbab2f){return _0x3897(_0x24e9f5- -0x30c,_0x576598);}return _0x940a47[_0x341e43]||_0x341e43;}export function getCurrentLLMProfile(){function _0x5282d3(_0x20d72e,_0x3928f4,_0x479de2,_0x2724a7){return _0x3897(_0x3928f4-0x319,_0x479de2);}function _0x2426a4(_0x3896c2,_0x5bede1,_0xb9a98e,_0x4adbb2){return _0x3897(_0xb9a98e-0x32a,_0x5bede1);}const _0x2f1d65=extension_settings[extensionName][_0x2426a4(0x4fb,0x4fa,0x4fa,0x4f3)+'es']||{},_0x510ccb=extension_settings[extensionName]['current_ll'+_0x5282d3(0x487,0x414,0x46d,0x47a)];return _0x2f1d65[_0x510ccb]||_0x2f1d65[Object[_0x2426a4(0x5a7,0x473,0x509,0x5ac)](_0x2f1d65)[0x20a1+-0x1*0x1613+-0xa8e]]||{};}function _0x56e28e(_0x5c0f61,_0x36fd45,_0x16e152,_0x2cce9d){return _0x3897(_0x36fd45- -0x18d,_0x16e152);}export function getCurrentTestContext(){function _0x27c719(_0x4c36a5,_0x175b46,_0xe925da,_0xca2aa2){return _0x3897(_0xe925da- -0x52,_0x175b46);}const _0x362dc5=extension_settings[extensionName]['test_conte'+_0x27c719(0xe2,0x1f9,0x178,0x20c)+'s']||{},_0x32bbc6=extension_settings[extensionName]['current_te'+_0x242213(0x49a,0x426,0x3a9,0x380)+_0x27c719(0xab,0x1a,0x96,0xc3)];function _0x242213(_0x11da7c,_0x116fa4,_0xc95515,_0x49b04c){return _0x3897(_0x116fa4-0x241,_0xc95515);}return _0x362dc5[_0x32bbc6]||_0x362dc5[Object[_0x242213(0x3d6,0x420,0x42d,0x46d)](_0x362dc5)[0x126b+0x47d+0x8*-0x2dd]]||{};}export function getEffectiveConfigForRequestType(_0x160976){const _0x3a7b55=extension_settings[extensionName]['llm_reques'+_0x3ed1e3(0x5d,-0x65,0x16,0x2d)+_0x3ed1e3(-0xf8,0x1e,-0x80,-0x2c)]||{},_0x5e7f50={};_0x5e7f50['api_profil'+'e']='默认',_0x5e7f50[_0x2b68c0(0x107,0xc7,0x28,0x80)+_0x3ed1e3(0x27,-0x5d,-0x64,-0xe1)]='默认';const _0x277943=_0x3a7b55[_0x160976]||_0x5e7f50,_0x41ba7b=extension_settings[extensionName][_0x3ed1e3(0x38,-0x2e,0x3c,0x5c)+'es']||{},_0x3f716b=extension_settings[extensionName][_0x3ed1e3(-0x17,-0x8f,-0x6e,-0x80)+_0x2b68c0(0x100,0xa3,0xde,0x112)+'s']||{},_0x57dfcd=_0x277943[_0x2b68c0(-0x93,-0x36,-0x29,0x3a)+'e']||'默认',_0x3365b4=_0x41ba7b[_0x57dfcd]||_0x41ba7b[Object[_0x3ed1e3(0xed,0x19,0x4b,0x7d)](_0x41ba7b)[-0x1*-0x1af3+0x10f2+0x295*-0x11]]||{},_0x25d85d=_0x277943['context_pr'+_0x3ed1e3(-0xe1,0x31,-0x64,-0x2c)]||'默认',_0x157712=_0x3f716b[_0x25d85d]||_0x3f716b[Object['keys'](_0x3f716b)[-0x161e+-0x5d9*-0x1+0x1045]]||{},_0x534533={};_0x534533[_0x3ed1e3(0x1e,-0xe4,-0x4f,-0xb8)]=_0x3365b4[_0x3ed1e3(-0xd3,-0xab,-0x4f,0x32)]||'',_0x534533['api_key']=_0x3365b4[_0x2b68c0(0x170,0xf8,0x174,0x199)]||'',_0x534533[_0x2b68c0(0xd1,0xfe,0x190,0x132)]=_0x3365b4[_0x3ed1e3(0xc7,0x76,0x91,0xfd)]||'',_0x534533['temperatur'+'e']=_0x3365b4['temperatur'+'e']??-0x6*-0x1c7+-0x5c8*0x1+-0x4e2+0.7;function _0x3ed1e3(_0x4ae90a,_0x408f8a,_0x5b1b4d,_0x387d5c){return _0x3897(_0x5b1b4d- -0x194,_0x408f8a);}_0x534533['top_p']=_0x3365b4['top_p']??0x158c+0x9dd+-0xfb4*0x2,_0x534533['max_tokens']=_0x3365b4[_0x2b68c0(0x54,0xa2,-0x2,0x15)]??0x1eb*0x7+0x352*0x1+-0xebf;function _0x2b68c0(_0x341bfa,_0x1fb11a,_0x15b42e,_0x475f69){return _0x3897(_0x1fb11a- -0x127,_0x341bfa);}return _0x534533['stream']=_0x3365b4[_0x3ed1e3(-0x56,-0x8e,-0xba,-0xa4)]??![],_0x534533[_0x3ed1e3(-0x73,-0x5f,-0xa6,-0x99)]=_0x157712,_0x534533;}export function buildPromptForRequestType(_0x3a36be,_0x3c3655=''){const _0x1f15b0={'qniuZ':function(_0xf95871,_0x46a640){return _0xf95871===_0x46a640;},'vpnyi':function(_0x513c89,_0xadc482){return _0x513c89!==_0xadc482;},'JsRKj':_0x25f83e(0x3c7,0x36d,0x3a6,0x3cc),'iAVWK':function(_0x339bab,_0xf4ffba,_0x47075d){return _0x339bab(_0xf4ffba,_0x47075d);},'WVTIT':function(_0x47eb43,_0x4f4575){return _0x47eb43!==_0x4f4575;},'PzOHl':_0x178520(0x477,0x3f2,0x4a6,0x414),'HpARi':'pBqxV','HKSlv':_0x178520(0x49b,0x4e9,0x4fd,0x4af),'vjgap':_0x25f83e(0x4e4,0x4ac,0x448,0x4d0)+_0x25f83e(0x48c,0x445,0x3eb,0x490),'JRdoi':_0x178520(0x40b,0x481,0x393,0x424),'OkiEV':_0x25f83e(0x3e3,0x3ec,0x408,0x3cd),'RcEuu':function(_0x54edea,_0x145c86){return _0x54edea===_0x145c86;},'txkQT':_0x178520(0x3ae,0x42d,0x459,0x3fc),'loeBc':function(_0x5f6d68,_0x12cec0){return _0x5f6d68(_0x12cec0);}},_0xc68728=extension_settings[extensionName][_0x178520(0x55e,0x42b,0x439,0x4be)+_0x25f83e(0x39e,0x420,0x430,0x3fd)+_0x25f83e(0x394,0x41b,0x39a,0x2fb)]||{},_0x1acec1={};_0x1acec1[_0x25f83e(0x43d,0x491,0x474,0x3fd)+_0x25f83e(0x387,0x406,0x3b6,0x348)]='默认';const _0x573c11=_0xc68728[_0x3a36be]||_0x1acec1,_0x16428f=_0x573c11[_0x178520(0x51e,0x49c,0x467,0x489)+_0x25f83e(0x43f,0x437,0x3b6,0x40c)]||'默认',_0x4529b4=extension_settings[extensionName]['test_conte'+_0x25f83e(0x4b4,0x4b9,0x450,0x472)+'s']||{},_0x4c40e2=_0x4529b4[_0x16428f]||_0x4529b4[Object['keys'](_0x4529b4)[-0x17b2+0x19*-0x121+0x33eb]]||{};function _0x178520(_0x4c30cd,_0xc5186a,_0xa3552e,_0x3fe255){return _0x3897(_0x3fe255-0x29b,_0x4c30cd);}const _0x40ce4d=[];function _0x25f83e(_0x47a742,_0x32b3f8,_0x817f45,_0x5ae911){return _0x3897(_0x817f45-0x286,_0x32b3f8);}if(_0x4c40e2[_0x178520(0x3b9,0x324,0x3fb,0x3c3)]&&Array['isArray'](_0x4c40e2['entries'])){if(_0x1f15b0[_0x25f83e(0x395,0x3f6,0x37c,0x36e)]===_0x178520(0x46b,0x427,0x495,0x41d))_0x4c40e2[_0x178520(0x3e4,0x3ad,0x3bd,0x3c3)]['forEach'](_0x1e4f1f=>{if(!_0x1e4f1f['enabled'])return;if(!_0x1e4f1f[_0x402095(-0x23e,-0x230,-0x1c5,-0x20a)]||_0x1f15b0[_0x402095(-0x2d8,-0x2b5,-0x2aa,-0x26a)](_0x1e4f1f['content']['trim'](),''))return;function _0x30d66e(_0x44d4b9,_0x401be9,_0x1f6c31,_0x2ce999){return _0x25f83e(_0x44d4b9-0xe2,_0x1f6c31,_0x401be9-0x70,_0x2ce999-0x1b4);}if(_0x1f15b0['qniuZ'](_0x1e4f1f['triggerMod'+'e'],_0x30d66e(0x4eb,0x4d4,0x4f4,0x508))){if(_0x1f15b0[_0x402095(-0x1df,-0x1a4,-0x1e3,-0x1f2)](_0x1f15b0[_0x30d66e(0x35f,0x3f7,0x3a3,0x37a)],_0x1f15b0['JsRKj']))_0x2abdd5&&(_0x41dc05['abort'](),_0x1383a8[_0x30d66e(0x451,0x4f0,0x553,0x55c)](_0x30d66e(0x48d,0x42d,0x4be,0x4c3)));else{if(!_0x3c3655||!_0x1f15b0[_0x30d66e(0x43c,0x409,0x3ba,0x3bd)](checkTriggerWords,_0x1e4f1f['triggerWor'+'ds'],_0x3c3655)){if(_0x1f15b0['WVTIT'](_0x1f15b0[_0x402095(-0x1e6,-0x1f8,-0x13f,-0x1ce)],_0x1f15b0['HpARi']))return;else{const _0x28586d=_0x20df2b[_0x1e9050]['test_conte'+_0x402095(-0x17d,-0x1ec,-0x1e5,-0x1fa)+'s']||{},_0x165dba=_0x5837cc[_0x1cc901][_0x30d66e(0x393,0x3f3,0x3fd,0x431)+'st_context'+_0x30d66e(0x46e,0x3de,0x37b,0x46b)];return _0x28586d[_0x165dba]||_0x28586d[_0xfccb5f[_0x402095(-0x24b,-0x142,-0x165,-0x1e5)](_0x28586d)[0xa6*-0x1d+-0x129d*-0x1+0x1*0x31]]||{};}}}}const _0x121006={};_0x121006['role']=_0x1e4f1f['role']||_0x1f15b0[_0x30d66e(0x53c,0x4fc,0x481,0x49c)];function _0x402095(_0x5c8e71,_0x4aa87a,_0x97c4fa,_0x380218){return _0x178520(_0x97c4fa,_0x4aa87a-0x17a,_0x97c4fa-0xa5,_0x380218- -0x65f);}_0x121006[_0x402095(-0x1ba,-0x19a,-0x1e6,-0x20a)]=_0x1e4f1f[_0x30d66e(0x4c3,0x4b0,0x456,0x494)],_0x40ce4d['push'](_0x121006);});else{const _0x252e7c={};_0x252e7c[_0x25f83e(0x2e5,0x384,0x37d,0x2f0)]=0x1388,_0x194076['info']('【测试模式】'+_0x20197b+(_0x25f83e(0x3ca,0x3d2,0x39b,0x3f0)+'作已跳过。'),_0x178520(0x42d,0x45b,0x4d3,0x4aa),_0x252e7c);}}else{if(_0x4c40e2[_0x178520(0x536,0x498,0x489,0x4a0)]&&Array[_0x178520(0x465,0x423,0x51d,0x4a5)](_0x4c40e2[_0x25f83e(0x463,0x3fc,0x48b,0x519)])){if(_0x1f15b0['RcEuu'](_0x1f15b0[_0x25f83e(0x3e8,0x35c,0x3d9,0x44f)],_0x178520(0x470,0x3cf,0x41c,0x3e4))){_0x25eac2['log'](_0xb07545+('\x20request\x20a'+_0x25f83e(0x3fc,0x3f2,0x478,0x3fa)));const _0x44657f={};_0x44657f[_0x25f83e(0x49a,0x374,0x41e,0x4b4)]='AbortError',_0x44657f['message']=_0x1f15b0[_0x25f83e(0x399,0x49b,0x428,0x4cf)];const _0x454365={};_0x454365['success']=![],_0x454365['result']=null,_0x454365['id']=_0x4acd09,_0x454365[_0x178520(0x39b,0x3ee,0x356,0x3cd)]=_0x44657f,_0x12d123['emit'](_0x489282,_0x454365);return;}else _0x4c40e2[_0x25f83e(0x487,0x41c,0x48b,0x3f3)][_0x178520(0x4d4,0x456,0x4ed,0x46f)](_0x4e4b21=>{function _0x478ee9(_0x3c70ad,_0x2c05bd,_0x165b6b,_0x3afad1){return _0x25f83e(_0x3c70ad-0x176,_0x3c70ad,_0x3afad1- -0x31d,_0x3afad1-0x57);}function _0x2ae0f1(_0x1debcc,_0x343009,_0x558b71,_0x10df5c){return _0x178520(_0x1debcc,_0x343009-0xa8,_0x558b71-0x16c,_0x10df5c- -0x303);}if(_0x4e4b21[_0x2ae0f1(0x241,0x24f,0x14c,0x1ac)]&&_0x1f15b0[_0x478ee9(0x18c,0x1ba,0x14d,0x13b)](_0x4e4b21[_0x2ae0f1(0x1ea,0x24a,0x231,0x1ac)][_0x478ee9(0x1c1,0x120,0x1e6,0x184)](),'')){const _0xbe0632={};_0xbe0632[_0x478ee9(0xdc,0x16c,0x125,0x181)]=_0x1f15b0[_0x478ee9(0x1b6,0x218,0x1dd,0x16f)],_0xbe0632['content']=_0x4e4b21[_0x478ee9(0x11a,0x11f,0x106,0x17d)],_0x40ce4d[_0x478ee9(0xb1,0x92,0xb6,0x8b)](_0xbe0632);}if(_0x4e4b21[_0x478ee9(0xed,0x9c,0x129,0xf2)]&&_0x4e4b21[_0x478ee9(0xef,0xaa,0x12c,0xf2)][_0x478ee9(0x110,0x144,0xdf,0x184)]()!==''){const _0x5ccbbd={};_0x5ccbbd[_0x478ee9(0x110,0x13b,0x1a9,0x181)]=_0x1f15b0[_0x2ae0f1(0x14a,0x182,0x1d2,0x1a6)],_0x5ccbbd[_0x478ee9(0x1c3,0x13f,0xe3,0x123)]=_0x4e4b21[_0x478ee9(0x15f,0x10e,0x13b,0xf2)],_0x40ce4d[_0x478ee9(0x117,0x3e,0x107,0x8b)](_0x5ccbbd);}});}}const _0x30aadf=_0x1f15b0[_0x25f83e(0x341,0x389,0x3c2,0x464)](mergeAdjacentMessages,_0x40ce4d),_0x2fbce2=processRollPlaceholders(_0x30aadf);return _0x2fbce2;}const _0x18aec4={};_0x18aec4[_0x445fe2(0x2ec,0x2ff,0x298,0x335)]=_0x445fe2(0x2b2,0x2c5,0x228,0x2c4),_0x18aec4[_0x445fe2(0x2fd,0x31b,0x301,0x296)+'n']=_0x56e28e(0x6,-0x1c,-0xa6,-0x1d),_0x18aec4[_0x445fe2(0x38b,0x3b6,0x351,0x317)+'ay']='角色/服装展示',_0x18aec4[_0x56e28e(-0x116,-0x99,-0x55,-0x8c)+'y']=_0x445fe2(0x2a7,0x280,0x34a,0x33e),_0x18aec4[_0x56e28e(0x94,0x3e,0xe3,0x57)+'n']='翻译',_0x18aec4['tag_modify']=_0x56e28e(-0x1b,0xd,0x1e,0xa4);const REQUEST_TYPE_NAMES=_0x18aec4;export async function executeTypedLLMRequest(_0x3436a7,_0x5f5784,_0x4cca1a,_0x55c33d=null){const _0x1c4f66={'jvVrD':_0x15bbb5(-0xe1,-0xf6,-0x121,-0xf2),'kRVDt':_0x4826b0(0x38c,0x368,0x2d0,0x2d8),'Plvuw':_0x15bbb5(-0xab,-0x6d,-0x4c,-0x7a)+'+$','rDBHX':function(_0xaca458){return _0xaca458();},'MMVec':function(_0x57a68a,_0x398c21){return _0x57a68a===_0x398c21;},'VGhia':'AbortError','PKWYb':function(_0x53684f){return _0x53684f();},'kXqUC':function(_0x5e4852,_0x54dab0){return _0x5e4852(_0x54dab0);},'GNdXk':function(_0xdedf43,_0x1e6592){return _0xdedf43(_0x1e6592);},'THLGd':function(_0x2a9d0b,_0x5cca18){return _0x2a9d0b||_0x5cca18;},'gAtEn':_0x4826b0(0x3c7,0x3d3,0x420,0x3f9)+_0x4826b0(0x3f8,0x3eb,0x495,0x430)+_0x15bbb5(-0x1a3,-0x137,-0x131,-0x18f)+'/generate','jOVOM':function(_0x2b1c6b,_0x1ed735){return _0x2b1c6b(_0x1ed735);},'FnJlT':_0x15bbb5(-0xf5,-0x70,0x1c,-0xf2),'XOMMt':'POST','WTwWj':function(_0xaed3fd,_0x2a8175){return _0xaed3fd(_0x2a8175);},'xccoi':_0x15bbb5(-0xe2,-0x163,-0x17e,-0x15b),'WPLOW':_0x15bbb5(-0x83,-0xbc,-0x14,-0x114),'INomP':function(_0x4f1056,_0x22eecb){return _0x4f1056!==_0x22eecb;},'YeMeA':_0x4826b0(0x43d,0x42e,0x3ff,0x44e),'AqjJC':_0x15bbb5(-0x10b,-0x110,-0xe2,-0x1a9),'sOhMV':_0x15bbb5(-0x132,-0x130,-0x121,-0x173),'olAxl':function(_0x1d3ead,_0x5aa281){return _0x1d3ead===_0x5aa281;},'VxFfz':_0x15bbb5(-0x184,-0xfe,-0xbf,-0x12e),'oyFTM':_0x4826b0(0x342,0x3da,0x3c5,0x379)+'E]','qsLop':_0x4826b0(0x30d,0x3b7,0x39c,0x332),'QNsdp':function(_0x2f6bfb,_0xff8464){return _0x2f6bfb===_0xff8464;},'fiwle':'MojvK','PhqtZ':function(_0x26531f,_0x126382){return _0x26531f!==_0x126382;},'FDnIr':_0x15bbb5(-0x64,-0xd2,-0x167,-0x55),'kKXSZ':_0x4826b0(0x424,0x3f0,0x410,0x424),'pHvqD':function(_0xc50210,_0x46d373){return _0xc50210===_0x46d373;},'TIwyL':_0x4826b0(0x3ba,0x44e,0x447,0x3e0),'skjaU':_0x15bbb5(-0x28,-0x49,0x59,-0x79),'UUPWw':function(_0x3a877b,_0x5162a5){return _0x3a877b(_0x5162a5);},'MhMsZ':function(_0x16631d,_0x2248b3){return _0x16631d!==_0x2248b3;},'lixLt':'LGwbY','IDBim':function(_0x207ce3,_0x482fa0){return _0x207ce3===_0x482fa0;},'AMrjJ':_0x15bbb5(-0x1a7,-0x16d,-0xf8,-0x13e),'ofLYx':'ExzAn','zLMnh':'未收到有效回复。','DrECY':function(_0x45bfe2,_0x3b41f1){return _0x45bfe2(_0x3b41f1);},'TtPUX':function(_0x50dbce,_0xf32474){return _0x50dbce(_0xf32474);},'rDMlN':function(_0x1dcd51,_0x20a309){return _0x1dcd51(_0x20a309);},'kWKrb':_0x4826b0(0x34c,0x3e9,0x370,0x44e),'HlJJB':function(_0x11c514,_0x252d34){return _0x11c514===_0x252d34;},'pszFP':_0x15bbb5(0x3,-0x3f,-0x3e,-0x75),'Nfgsi':_0x15bbb5(-0x12,-0x21,0x71,0x11),'PEieg':_0x4826b0(0x3f7,0x3ec,0x383,0x395)+_0x4826b0(0x399,0x38f,0x3d7,0x3a9),'wcvNw':_0x4826b0(0x3ef,0x38e,0x40a,0x3ba),'gzIso':_0x4826b0(0x33d,0x355,0x2d7,0x2ef),'rHYND':function(_0x4b4a2c,_0x4e4057){return _0x4b4a2c(_0x4e4057);}},{prompt:_0x22efb0,id:_0x1527b0}=_0x3436a7;function _0x15bbb5(_0x197e61,_0x124c0b,_0x5e6f99,_0x2e210c){return _0x445fe2(_0x124c0b- -0x410,_0x2e210c,_0x5e6f99-0x111,_0x2e210c-0x107);}if(!_0x1527b0||!_0x22efb0)return;currentLLMRequestController&&(currentLLMRequestController[_0x4826b0(0x419,0x3b8,0x368,0x3cf)](),toastr[_0x4826b0(0x3e6,0x424,0x392,0x3f2)](_0x15bbb5(-0xfa,-0x58,-0x3,0x20)+_0x4826b0(0x357,0x3e6,0x44d,0x343)));currentLLMRequestController=new AbortController();const _0xffac68=currentLLMRequestController[_0x15bbb5(-0x17,-0x7b,0x28,-0xa5)];_0x1c4f66[_0x4826b0(0x3d6,0x3ae,0x452,0x3e3)](startFabLoading);const _0x2db58a=REQUEST_TYPE_NAMES[_0x5f5784]||_0x5f5784;console['log'](_0x4826b0(0x318,0x32a,0x2b8,0x2de)+_0x4826b0(0x3c7,0x435,0x46e,0x416)+_0x2db58a+'\x20请求\x20(ID:\x20'+_0x1527b0+')',_0x22efb0);function _0x4826b0(_0x49afdc,_0x44d470,_0x1d236f,_0x4a06c6){return _0x56e28e(_0x49afdc-0x1b5,_0x44d470-0x3b7,_0x4a06c6,_0x4a06c6-0x142);}_0x1c4f66[_0x4826b0(0x448,0x3bb,0x42c,0x3ae)](clearLog),_0x1c4f66[_0x15bbb5(-0x67,-0xa3,-0xc2,-0xce)](addLog,'=====\x20LLM\x20'+_0x15bbb5(-0x93,-0x54,-0xfd,0x31)+_0x2db58a+')\x20====='),_0x1c4f66['kXqUC'](addLog,'请求\x20ID:\x20'+_0x1527b0),_0x1c4f66[_0x4826b0(0x3b3,0x33c,0x329,0x35e)](addLog,_0x4826b0(0x3df,0x360,0x3fa,0x352)+':'),_0x1c4f66[_0x15bbb5(-0xf5,-0xa3,-0xe3,-0xed)](addLog,_0x1c4f66[_0x15bbb5(-0x121,-0x136,-0x14c,-0x182)](formatPromptForDisplay,_0x22efb0));const _0x28f309=getEffectiveConfigForRequestType(_0x5f5784),{api_url:_0x181b3e,api_key:_0x70085d,model:_0x5beca8,temperature:_0x47064f,top_p:_0x38a417,max_tokens:_0x46275e,stream:_0xaa5dc5}=_0x28f309;if(_0x1c4f66[_0x15bbb5(-0x6f,-0xf1,-0x14c,-0xa4)](!_0x181b3e,!_0x70085d)||!_0x5beca8){const _0x327581=_0x2db58a+(_0x4826b0(0x3ab,0x3e8,0x3dd,0x451)+_0x15bbb5(-0x31,-0xd1,-0x17a,-0x6c)+_0x4826b0(0x3e2,0x44a,0x453,0x45f)+'置。');toastr[_0x15bbb5(-0x170,-0x116,-0x155,-0xf5)](_0x327581);const _0x54aa61={};_0x54aa61[_0x15bbb5(-0x98,-0x4a,0x4b,-0xca)]=![],_0x54aa61[_0x4826b0(0x43a,0x421,0x3b4,0x39f)]=_0x327581,_0x54aa61['id']=_0x1527b0,eventSource[_0x4826b0(0x42f,0x3c3,0x393,0x3de)](_0x4cca1a,_0x54aa61);return;}const _0x2f9491=_0x1c4f66[_0x4826b0(0x348,0x338,0x33d,0x2c8)],_0x17eff8=_0x181b3e[_0x4826b0(0x2d7,0x34d,0x3d8,0x3da)](/\/$/,'');_0x55c33d&&_0x1c4f66[_0x4826b0(0x44d,0x3b4,0x3c7,0x346)](_0x55c33d,_0x4826b0(0x3c5,0x422,0x406,0x3fc)+_0x2db58a+_0x15bbb5(-0x59,-0xec,-0x179,-0x130));try{const _0xf218ac={};_0xf218ac[_0x15bbb5(-0x1de,-0x146,-0x1bb,-0x1ee)+_0x4826b0(0x438,0x448,0x497,0x462)+'ce']=_0x1c4f66['FnJlT'],_0xf218ac[_0x4826b0(0x448,0x3ba,0x3be,0x328)]=_0x17eff8,_0xf218ac[_0x15bbb5(-0x4d,-0x99,-0xe0,-0xdb)+_0x15bbb5(-0x3e,-0xe0,-0x4a,-0x103)+'rs']=_0x15bbb5(-0x9f,-0xb9,-0x26,-0x148)+_0x4826b0(0x3df,0x383,0x2fd,0x2ec)+'er\x20'+_0x70085d+'\x22',_0xf218ac['model']=_0x5beca8,_0xf218ac[_0x4826b0(0x3b1,0x393,0x3a6,0x41c)]=_0x22efb0,_0xf218ac[_0x15bbb5(0xf,-0x35,0x73,-0x79)+'e']=_0x47064f,_0xf218ac[_0x4826b0(0x332,0x391,0x41e,0x390)]=_0x38a417,_0xf218ac[_0x4826b0(0x34a,0x3f3,0x3e0,0x48e)]=_0x46275e,_0xf218ac[_0x15bbb5(-0x1bc,-0x16e,-0xe6,-0x1a5)]=_0xaa5dc5;const _0x159bb0=_0xf218ac,_0x3c7ae8=await fetch(_0x2f9491,{'method':_0x1c4f66[_0x4826b0(0x49b,0x42c,0x4b1,0x482)],'headers':_0x1c4f66[_0x4826b0(0x3cb,0x450,0x3ef,0x485)](getRequestHeaders,window['token']),'body':JSON[_0x15bbb5(-0xe5,-0xda,-0x35,-0x148)](_0x159bb0),'signal':_0xffac68});if(!_0x3c7ae8['ok']){try{const _0x324b82=await _0x3c7ae8[_0x4826b0(0x42f,0x3e5,0x478,0x433)]();if(_0x324b82['error']){let _0x3b7743;if(_0x1c4f66[_0x15bbb5(-0x1fc,-0x16a,-0x15e,-0x113)](typeof _0x324b82[_0x15bbb5(-0x18e,-0x116,-0x83,-0xdc)],_0x1c4f66[_0x15bbb5(-0x5b,-0x62,0x2,-0x37)])&&_0x324b82['error'][_0x15bbb5(0x9,-0x8f,-0xa8,-0x70)]){if(_0x1c4f66[_0x4826b0(0x28a,0x30a,0x393,0x2bd)]===_0x4826b0(0x3aa,0x3b6,0x44a,0x3c3)){_0x3b7743=''+_0x324b82[_0x4826b0(0x319,0x35c,0x351,0x2e0)][_0x4826b0(0x3b9,0x3e3,0x455,0x369)];const _0x3ee069=[];if(_0x324b82[_0x4826b0(0x2c3,0x35c,0x3e2,0x341)][_0x15bbb5(-0xea,-0x106,-0x154,-0x60)])_0x3ee069[_0x4826b0(0x3d4,0x34c,0x3c2,0x39f)]('类型:\x20'+_0x324b82[_0x4826b0(0x3e8,0x35c,0x305,0x346)]['type']);if(_0x324b82[_0x15bbb5(-0x79,-0x116,-0xf8,-0x15d)][_0x15bbb5(0x51,-0x48,-0x9f,-0x6b)])_0x3ee069[_0x15bbb5(-0xc8,-0x126,-0x15d,-0xee)](_0x4826b0(0x43a,0x395,0x31f,0x3e4)+_0x324b82[_0x15bbb5(-0xf3,-0x116,-0x105,-0x17a)]['code']);_0x3ee069[_0x4826b0(0x449,0x3d7,0x42e,0x3ce)]>-0x2681+-0x1ba2+-0x1*-0x4223&&(_0x3b7743+='\x20('+_0x3ee069[_0x15bbb5(-0x37,-0xcb,-0x119,-0x37)](',\x20')+')');}else throw _0x3c91c4;}else _0x3b7743=''+JSON['stringify'](_0x324b82[_0x15bbb5(-0xbf,-0x116,-0xd0,-0x9d)]);throw new Error(_0x3b7743);}}catch(_0x15d6e4){if(_0x1c4f66[_0x4826b0(0x31b,0x332,0x38e,0x3c7)](_0x1c4f66[_0x4826b0(0x380,0x331,0x293,0x384)],_0x1c4f66[_0x15bbb5(-0x160,-0xf8,-0x170,-0x106)])){if(_0x15d6e4[_0x4826b0(0x3a4,0x3e3,0x3c3,0x39f)][_0x15bbb5(-0x1ac,-0x10e,-0x174,-0x122)](_0x1c4f66[_0x4826b0(0x360,0x36d,0x327,0x3d6)])||_0x15d6e4[_0x4826b0(0x479,0x3e3,0x478,0x33f)][_0x15bbb5(-0x18e,-0x10e,-0x1a1,-0x149)](_0x1c4f66[_0x4826b0(0x33c,0x306,0x269,0x27e)]))throw _0x15d6e4;}else{if(_0x245e94[_0x4826b0(0x394,0x3e3,0x361,0x3aa)]['includes'](_0x1c4f66[_0x4826b0(0x2da,0x36d,0x357,0x417)])||_0x7dce08[_0x4826b0(0x437,0x3e3,0x434,0x3b4)][_0x15bbb5(-0x8d,-0x10e,-0x140,-0x150)](_0x1c4f66[_0x4826b0(0x381,0x306,0x3a6,0x316)]))throw _0x2a11c0;}}throw new Error('请求失败:\x20'+_0x3c7ae8['status']+'\x20'+_0x3c7ae8['statusText']);}let _0x1db042='';if(_0xaa5dc5){if(_0x1c4f66[_0x4826b0(0x331,0x332,0x2e5,0x2ae)](_0x4826b0(0x2b6,0x342,0x3c1,0x33f),_0x1c4f66[_0x4826b0(0x3e0,0x41b,0x483,0x424)]))return _0x4fae81[_0x4826b0(0x388,0x411,0x386,0x3b7)]()[_0x15bbb5(-0x146,-0x102,-0x78,-0x14c)](_0x15bbb5(-0xe6,-0x6d,-0x118,-0x5e)+'+$')[_0x4826b0(0x37c,0x411,0x3cc,0x4b4)]()[_0x15bbb5(-0xa6,-0xca,-0x10b,-0xc5)+'r'](_0x9bbb63)[_0x15bbb5(-0x114,-0x102,-0x168,-0x185)](eYzNHh['Plvuw']);else{const _0x42b7b9=_0x3c7ae8[_0x15bbb5(-0x1d0,-0x166,-0x127,-0x1fc)]['getReader'](),_0x86b03c=new TextDecoder(_0x4826b0(0x394,0x3aa,0x36f,0x420));let _0x149c97='';while(!![]){if(_0x1c4f66[_0x15bbb5(-0xaa,-0xfb,-0x14d,-0x84)](_0x1c4f66[_0x4826b0(0x39a,0x35e,0x3dd,0x30c)],_0x4826b0(0x3ba,0x417,0x484,0x377)))_0x42512f=null,_0x1c4f66[_0x4826b0(0x333,0x3bb,0x3de,0x3ae)](_0x4dc3a2);else{const {done:_0x1c959e,value:_0x97a48a}=await _0x42b7b9[_0x4826b0(0x39c,0x326,0x3c9,0x368)]();if(_0x1c959e)break;const _0x2822e2={};_0x2822e2[_0x15bbb5(-0x10b,-0x16e,-0x1ac,-0x15c)]=!![],_0x149c97+=_0x86b03c[_0x4826b0(0x385,0x34b,0x3cc,0x352)](_0x97a48a,_0x2822e2);const _0xb221c0=_0x149c97[_0x4826b0(0x32a,0x35d,0x3ce,0x319)]('\x0a');_0x149c97=_0xb221c0[_0x4826b0(0x3c9,0x367,0x390,0x2ee)]()||'';for(const _0x13839d of _0xb221c0){const _0x512c6d=_0x13839d['trim']();if(!_0x512c6d||_0x512c6d===_0x1c4f66[_0x4826b0(0x49d,0x423,0x465,0x40d)])continue;if(_0x512c6d[_0x15bbb5(-0x59,-0x27,0x7a,-0x76)](_0x1c4f66['qsLop'])){if(_0x1c4f66[_0x15bbb5(-0xfe,-0x143,-0x1ca,-0x1c6)](_0x1c4f66[_0x15bbb5(-0x176,-0x175,-0x1bb,-0x1a9)],'WwcWy'))return!!_0x5f0607[_0x2339dd]['llmTestMod'+'e'];else try{if(_0x1c4f66['PhqtZ']('gqezg','gqezg'))_0x313685+='\x20('+_0x44180c[_0x15bbb5(-0x159,-0xcb,-0x54,-0x125)](',\x20')+')';else{const _0x162559=_0x512c6d[_0x4826b0(0x47d,0x415,0x468,0x409)](0xd9e+-0x6*-0x179+-0x166e),_0x4592a0=JSON[_0x4826b0(0x430,0x3d5,0x472,0x3fb)](_0x162559),_0x2bb618=_0x4592a0[_0x4826b0(0x366,0x372,0x30d,0x334)]?.[-0x43*0x5+0xd*-0x2bd+0x24e8]?.[_0x15bbb5(-0xbd,-0x95,0x6,-0x8b)]?.[_0x4826b0(0x371,0x3e4,0x38e,0x3ca)];_0x2bb618&&(_0x1c4f66[_0x4826b0(0x3ad,0x308,0x372,0x32e)](_0x15bbb5(-0x48,-0xd2,-0xe8,-0x77),_0x1c4f66[_0x4826b0(0x32d,0x3a4,0x445,0x396)])?(_0x1db042+=_0x2bb618,_0x55c33d&&(_0x1c4f66[_0x15bbb5(-0x160,-0x143,-0x1d4,-0x1c8)](_0x1c4f66['kKXSZ'],_0x4826b0(0x391,0x390,0x430,0x3b8))?(_0x4c96c4=null,_0x1c4f66[_0x15bbb5(-0x5b,-0xb7,-0x1c,-0x5b)](_0x424676)):_0x55c33d(_0x1db042))):_0x45cb63=''+_0x2c4e69['stringify'](_0x40d4d4[_0x15bbb5(-0x17b,-0x116,-0x124,-0x70)]));}}catch(_0x2b681a){_0x1c4f66[_0x4826b0(0x2ab,0x31d,0x2cf,0x319)](_0x15bbb5(-0xc7,-0x24,-0x7a,0x54),_0x1c4f66[_0x4826b0(0x30e,0x385,0x40a,0x338)])?console[_0x15bbb5(0x1b,-0x60,-0x5d,-0xff)](_0x1c4f66[_0x15bbb5(-0x96,-0xa5,-0xc7,-0x8a)],_0x2b681a['message']):_0x3dfd76['push'](_0x53e6c8['text']||'');}}}}}if(_0x149c97[_0x4826b0(0x4a9,0x445,0x4b0,0x485)]()&&_0x149c97[_0x15bbb5(-0x4b,-0x2d,-0x20,-0x1d)]()!==_0x1c4f66['oyFTM']&&_0x149c97[_0x15bbb5(-0x44,-0x2d,-0x5d,-0x1e)]()['startsWith'](_0x15bbb5(-0x65,-0xbb,-0x90,-0x105)))try{const _0x2fbb94=_0x149c97[_0x15bbb5(-0x1b,-0x2d,-0x44,-0x23)]()[_0x15bbb5(-0xce,-0x5d,-0x107,-0xb7)](0x785*0x1+0x1*-0xa31+0x2b2),_0x2ede42=JSON[_0x4826b0(0x444,0x3d5,0x416,0x454)](_0x2fbb94),_0x2bc391=_0x2ede42[_0x4826b0(0x390,0x372,0x380,0x320)]?.[-0x101e+0x4d6+0xb48*0x1]?.[_0x15bbb5(-0x21,-0x95,-0x102,-0xaf)]?.[_0x4826b0(0x402,0x3e4,0x3e2,0x42d)];_0x2bc391&&(_0x1db042+=_0x2bc391,_0x55c33d&&_0x1c4f66[_0x4826b0(0x34e,0x329,0x2a7,0x2d5)](_0x55c33d,_0x1db042));}catch(_0x10cf16){console[_0x4826b0(0x3cf,0x412,0x3a5,0x44d)](_0x4826b0(0x3a9,0x3a9,0x3ce,0x43e)+_0x15bbb5(-0xcf,-0x81,-0xe,-0xf7),_0x10cf16[_0x4826b0(0x3e5,0x3e3,0x3ef,0x48b)]);}!_0x1db042&&(_0x1db042=_0x15bbb5(-0xbb,-0x108,-0x17f,-0xb4),toastr[_0x4826b0(0x324,0x2ff,0x2de,0x396)](_0x2db58a+(_0x15bbb5(-0x87,-0x7c,-0x2b,-0xc7)+'效回复。')));}}else{const _0x2b311a=await _0x3c7ae8['json']();if(_0x2b311a[_0x15bbb5(-0x6f,-0x116,-0x6d,-0x172)]){if(_0x1c4f66[_0x15bbb5(-0x6c,-0x71,-0xd4,-0xbf)](_0x1c4f66['lixLt'],_0x1c4f66[_0x4826b0(0x2c6,0x351,0x2d5,0x347)]))return _0x321ef8;else{let _0x55bb32;if(_0x1c4f66['IDBim'](typeof _0x2b311a[_0x15bbb5(-0x81,-0x116,-0x1be,-0x19e)],_0x1c4f66['xccoi'])&&_0x2b311a[_0x4826b0(0x3a5,0x35c,0x358,0x36a)][_0x15bbb5(-0x105,-0x8f,-0x87,-0x79)]){_0x55bb32=''+_0x2b311a['error'][_0x15bbb5(-0x72,-0x8f,-0x34,-0x40)];const _0x2a291d=[];if(_0x2b311a['error']['type'])_0x2a291d[_0x15bbb5(-0xa9,-0x126,-0x10c,-0xb9)]('类型:\x20'+_0x2b311a[_0x15bbb5(-0xef,-0x116,-0x104,-0x19c)][_0x15bbb5(-0xa6,-0x106,-0x7c,-0x88)]);if(_0x2b311a[_0x4826b0(0x319,0x35c,0x34c,0x332)][_0x15bbb5(-0x10,-0x48,0x4a,-0x3a)])_0x2a291d[_0x15bbb5(-0x14e,-0x126,-0x1b1,-0xcb)](_0x15bbb5(-0xf3,-0xdd,-0xe1,-0xf6)+_0x2b311a[_0x15bbb5(-0x157,-0x116,-0xa3,-0xbe)][_0x4826b0(0x4d4,0x42a,0x399,0x430)]);_0x2a291d[_0x4826b0(0x32e,0x3d7,0x32e,0x3c1)]>-0x8bd+-0xd67+0x1b4*0xd&&(_0x55bb32+='\x20('+_0x2a291d[_0x15bbb5(-0xa4,-0xcb,-0x12e,-0x10d)](',\x20')+')');}else _0x55bb32=''+JSON[_0x15bbb5(-0x107,-0xda,-0xa4,-0xa2)](_0x2b311a['error']);throw new Error(_0x55bb32);}}_0x1db042=_0x2b311a['choices']?.[0xdc+0x2160+-0x223c]?.['message']?.['content']||'';if(!_0x1db042){if(_0x1c4f66[_0x4826b0(0x3b9,0x401,0x43e,0x35a)](_0x1c4f66[_0x4826b0(0x428,0x39e,0x3e8,0x315)],_0x1c4f66[_0x15bbb5(-0x9d,-0xcd,-0x154,-0x169)]))_0x1db042=_0x1c4f66['zLMnh'],toastr[_0x4826b0(0x2a5,0x2ff,0x2ac,0x2a6)](_0x2db58a+(_0x4826b0(0x442,0x3f6,0x3f0,0x3d2)+_0x15bbb5(-0xe5,-0xb3,-0xd2,-0x2a)));else{if(_0x1c4f66[_0x4826b0(0x32a,0x308,0x2c3,0x29b)](_0x166844['name'],_0x1c4f66[_0x4826b0(0x3ee,0x3fd,0x3f9,0x410)])){_0x1e3236[_0x15bbb5(-0x147,-0x101,-0x123,-0x10c)](_0x1f27a6+(_0x4826b0(0x3bb,0x379,0x373,0x371)+_0x4826b0(0x491,0x41c,0x3b8,0x4a8)));const _0x3b991d={};_0x3b991d[_0x4826b0(0x436,0x3c2,0x394,0x375)]=_0x15bbb5(-0x19d,-0x109,-0x7c,-0x173),_0x3b991d['message']=_0x15bbb5(-0x3c,-0x86,-0x8d,-0x47)+_0x4826b0(0x3e7,0x38f,0x41c,0x3f8);const _0x2df730={};_0x2df730[_0x15bbb5(0x26,-0x4a,-0xea,-0xa1)]=![],_0x2df730[_0x4826b0(0x3a8,0x421,0x4ca,0x428)]=null,_0x2df730['id']=_0x1d2425,_0x2df730['error']=_0x3b991d,_0x1bbef6[_0x15bbb5(-0xe7,-0xaf,-0x143,-0x5e)](_0x3ba7d2,_0x2df730);return;}_0x195f64[_0x4826b0(0x2bd,0x35c,0x323,0x3fa)](_0xed8adc+_0x4826b0(0x3f4,0x38d,0x428,0x434),_0x40b321);const _0xfd0c8=_0x15bbb5(-0x90,-0x3b,-0x37,-0x78)+_0x1631e6[_0x4826b0(0x413,0x3e3,0x3c8,0x360)];_0x5c9be1&&_0x1a0843(_0xfd0c8);_0x63a39a[_0x15bbb5(-0x8d,-0x116,-0x161,-0x7b)](_0x3ef7d4['message']);const _0x32a718={};_0x32a718[_0x4826b0(0x3c4,0x428,0x3be,0x43e)]=![],_0x32a718[_0x4826b0(0x43f,0x421,0x43d,0x437)]=_0xfd0c8,_0x32a718['id']=_0x50e991,_0x55c662[_0x15bbb5(-0xcb,-0xaf,-0xc3,-0x12d)](_0x2ad55c,_0x32a718);}}_0x55c33d&&_0x1c4f66['DrECY'](_0x55c33d,_0x1db042);}_0x1c4f66[_0x4826b0(0x358,0x39d,0x3b3,0x406)](addLog,'\x0a-----\x20LLM'+_0x4826b0(0x335,0x3c0,0x3e2,0x350)),addLog(_0x1db042),_0x1c4f66['rDMlN'](addLog,_0x4826b0(0x2ec,0x359,0x383,0x2ae)+_0x4826b0(0x3a4,0x303,0x2ef,0x337));const _0x4935cd=extension_settings[extensionName][_0x4826b0(0x478,0x419,0x3fe,0x425)+'e'];if(_0x4935cd){if(_0x1c4f66[_0x4826b0(0x2e6,0x31d,0x2fe,0x35a)]('FmpZO','FmpZO')){const _0x10b5fb={};_0x10b5fb['timeOut']=0x1388,toastr[_0x4826b0(0x3b7,0x424,0x3c0,0x49e)](_0x15bbb5(-0x148,-0xa7,-0x40,-0xef)+_0x2db58a+(_0x4826b0(0x2ee,0x33f,0x380,0x3da)+_0x15bbb5(-0xe8,-0x104,-0x95,-0x101)),_0x15bbb5(-0x41,-0x39,-0x7b,-0xcf),_0x10b5fb);}else{_0x505d69[_0x15bbb5(-0x148,-0x101,-0x7a,-0x192)](_0x15bbb5(-0x32,-0xac,-0x117,-0x6e)+_0x15bbb5(-0xdd,-0x11b,-0x84,-0x141)+_0x15bbb5(-0x177,-0x15f,-0x1a3,-0xe5));const _0x31d44f={};_0x31d44f['name']='AbortError',_0x31d44f[_0x15bbb5(-0xb8,-0x8f,-0x71,-0x2e)]=_0x4826b0(0x433,0x3ec,0x380,0x428)+'orted';const _0x4e2f69={};_0x4e2f69[_0x4826b0(0x3f8,0x428,0x39d,0x460)]=![],_0x4e2f69['result']=null,_0x4e2f69['id']=_0x4414b2,_0x4e2f69[_0x4826b0(0x2b7,0x35c,0x2c6,0x2b3)]=_0x31d44f,_0x44f534[_0x4826b0(0x37c,0x3c3,0x365,0x42c)](_0x2c146d[_0x15bbb5(-0x111,-0xa8,-0x8f,-0xfb)+_0x15bbb5(-0x30,-0xd9,-0x11b,-0xfa)],_0x4e2f69);return;}}const _0x48e301={};_0x48e301[_0x4826b0(0x383,0x428,0x3b8,0x47e)]=!![],_0x48e301[_0x15bbb5(-0x1,-0x51,-0x2e,-0x19)]=_0x1db042,_0x48e301['id']=_0x1527b0,_0x48e301[_0x4826b0(0x492,0x41d,0x39d,0x43b)]=_0x4935cd,eventSource[_0x15bbb5(-0x13,-0xaf,-0x78,-0xc8)](_0x4cca1a,_0x48e301);}catch(_0x18d407){if(_0x1c4f66[_0x15bbb5(-0xa8,-0x143,-0xd1,-0x1d3)](_0x1c4f66[_0x4826b0(0x3eb,0x39c,0x326,0x311)],_0x15bbb5(-0x125,-0x89,0x3,-0x1c))){if(_0x1c4f66[_0x4826b0(0x3d4,0x3e2,0x461,0x3bb)](_0x18d407['name'],_0x1c4f66[_0x15bbb5(-0xca,-0x75,-0xc2,-0x78)])){if(_0x1c4f66[_0x15bbb5(-0xd1,-0xcc,-0x4a,-0x16c)](_0x1c4f66[_0x15bbb5(-0xc6,-0x12f,-0xeb,-0xcd)],_0x1c4f66[_0x4826b0(0x395,0x3dc,0x385,0x381)]))_0x3fd69f['push'](_0x59b7a2);else{console[_0x15bbb5(-0x145,-0x101,-0x132,-0x183)](_0x2db58a+(_0x15bbb5(-0x100,-0xf9,-0xa8,-0x73)+_0x15bbb5(-0xa,-0x56,-0x27,-0x8a)));const _0x3e48ce={};_0x3e48ce[_0x4826b0(0x383,0x3c2,0x379,0x3b5)]=_0x1c4f66['VGhia'],_0x3e48ce[_0x4826b0(0x3c5,0x3e3,0x3c9,0x454)]=_0x1c4f66['PEieg'];const _0x298a28={};_0x298a28[_0x4826b0(0x4cd,0x428,0x3b9,0x447)]=![],_0x298a28[_0x4826b0(0x424,0x421,0x3a9,0x429)]=null,_0x298a28['id']=_0x1527b0,_0x298a28[_0x4826b0(0x351,0x35c,0x310,0x2dc)]=_0x3e48ce,eventSource[_0x15bbb5(-0x143,-0xaf,-0xa6,-0xa0)](_0x4cca1a,_0x298a28);return;}}console['error'](_0x2db58a+_0x4826b0(0x33d,0x38d,0x391,0x2e3),_0x18d407);const _0x223738='请求错误:\x20'+_0x18d407['message'];if(_0x55c33d){if(_0x1c4f66['wcvNw']===_0x1c4f66[_0x4826b0(0x462,0x42b,0x46d,0x41c)]){const _0x331474=_0x48a1db[_0x4826b0(0x393,0x348,0x3e1,0x361)](_0x3ace53,arguments);return _0x4ac3e7=null,_0x331474;}else _0x1c4f66['rHYND'](_0x55c33d,_0x223738);}toastr[_0x15bbb5(-0x74,-0x116,-0x1ad,-0xa5)](_0x18d407['message']);const _0x2f2a19={};_0x2f2a19[_0x4826b0(0x42d,0x428,0x450,0x3a9)]=![],_0x2f2a19[_0x4826b0(0x402,0x421,0x44c,0x4b8)]=_0x223738,_0x2f2a19['id']=_0x1527b0,eventSource['emit'](_0x4cca1a,_0x2f2a19);}else return;}finally{currentLLMRequestController=null,stopFabLoading();}}export async function executeDefaultLLMRequest(_0x195355,_0x9f2c41,_0x74af7e=null){const _0x4e04e1={'LzZGS':function(_0x50b06e,_0x564fec){return _0x50b06e(_0x564fec);},'BBkpz':function(_0x33341d,_0x1306df){return _0x33341d!==_0x1306df;},'sUHXs':'user','AsQOk':_0x5cc886(0x46d,0x469,0x4b2,0x49a),'DUuKa':_0x46f80b(0x62,-0x11,-0x1,-0x49),'AARUG':_0x46f80b(0x8b,-0x63,-0x8,-0x80),'SSVhf':function(_0x17d826,_0x46f2af){return _0x17d826||_0x46f2af;},'lCncr':function(_0x5237d1,_0x55557b){return _0x5237d1===_0x55557b;},'pmNjX':'CDATz','cXdyS':_0x46f80b(0x7,0x66,0xaf,0x33)+_0x46f80b(0x112,0xc6,0x7b,-0x29),'sdxyf':function(_0x27af3e){return _0x27af3e();},'AbIAO':function(_0x3d4a81,_0x177799){return _0x3d4a81(_0x177799);},'wgfgD':_0x46f80b(0xe1,0x77,0x5d,0x9d)+_0x46f80b(-0x7a,0x5a,-0x4c,-0x1b)+_0x46f80b(-0xb2,0x65,-0x31,0x2),'HPuVk':'/api/backe'+_0x46f80b(0x4b,0xab,0x80,-0x19)+_0x46f80b(0x1,-0x42,-0x30,0x5b)+'/generate','SPSmD':_0x46f80b(0x5f,0x9a,0x84,0x10e)+_0x46f80b(0x32,0x84,0xd9,0x167),'vyekW':'custom','uhkyr':function(_0x23159f,_0x4b1f0f,_0x59b6a5){return _0x23159f(_0x4b1f0f,_0x59b6a5);},'jUydK':_0x46f80b(0xbe,0x68,0x5a,0xeb),'PPueM':_0x5cc886(0x3f8,0x3c5,0x35f,0x42a),'DKQWR':function(_0x300810,_0x1208f5){return _0x300810>_0x1208f5;},'aQine':function(_0x594e31,_0x5f1d65){return _0x594e31===_0x5f1d65;},'jrmGV':_0x5cc886(0x421,0x3c6,0x44b,0x36c),'ALonK':_0x46f80b(0xab,0x35,0x98,0x60),'JyBzC':function(_0x3e5cf5,_0x401d86){return _0x3e5cf5===_0x401d86;},'RAXjT':_0x5cc886(0x41d,0x497,0x48c,0x53d),'rUSYd':function(_0x550c95,_0x1199d0){return _0x550c95(_0x1199d0);},'zxIbR':function(_0x204fe8,_0x5ec71c){return _0x204fe8(_0x5ec71c);},'yNBDX':function(_0x1f9e7b,_0x2dce8b){return _0x1f9e7b!==_0x2dce8b;},'bjKDE':_0x46f80b(0x94,0x52,0x6b,0x9c),'rSHuw':_0x5cc886(0x3d5,0x41f,0x3be,0x3e9),'flSGw':_0x46f80b(0x43,0x7e,0x5b,0x4d)+_0x5cc886(0x4b0,0x40d,0x496,0x3a4)+_0x46f80b(0x4d,-0x4b,-0x58,-0x78),'ERAda':_0x46f80b(0xf9,0xde,0x73,0x87)+_0x5cc886(0x4a6,0x4b1,0x4d7,0x4b8)},{prompt:_0x2edb7f,id:_0x1cea50}=_0x195355;if(_0x4e04e1[_0x5cc886(0x404,0x3fa,0x49a,0x485)](!_0x1cea50,!_0x2edb7f))return;currentLLMRequestController&&(_0x4e04e1[_0x46f80b(-0x2a,0xf2,0x63,0xb)]('giEit',_0x4e04e1[_0x5cc886(0x3e1,0x461,0x409,0x40e)])?(_0xdea72e+=_0x2c7b44,_0x27a104&&_0x4e04e1[_0x5cc886(0x3d6,0x3e4,0x388,0x475)](_0x2b6370,_0xa34d55)):(currentLLMRequestController[_0x5cc886(0x461,0x46e,0x3ce,0x464)](),toastr[_0x5cc886(0x513,0x4da,0x580,0x549)](_0x4e04e1[_0x5cc886(0x4c6,0x431,0x3e3,0x48b)])));currentLLMRequestController=new AbortController();const _0x214382=currentLLMRequestController[_0x46f80b(0xb6,0x136,0x8c,0x98)];_0x4e04e1[_0x46f80b(-0x50,0x83,-0x25,-0xcd)](startFabLoading),console[_0x5cc886(0x3f3,0x427,0x3c0,0x495)]('st-chatu8:'+_0x46f80b(0xb3,0x11d,0x95,0xd6)+'请求\x20(ID:\x20'+_0x1cea50+')',_0x2edb7f);function _0x46f80b(_0x6642df,_0x43da8b,_0x8f2c31,_0x79f48a){return _0x56e28e(_0x6642df-0x3,_0x8f2c31-0x4c,_0x79f48a,_0x79f48a-0x24);}_0x4e04e1[_0x46f80b(-0x12,-0x9e,-0x25,-0xa)](clearLog),_0x4e04e1[_0x46f80b(-0x91,-0x35,-0x3d,-0x1e)](addLog,_0x5cc886(0x417,0x40f,0x4b1,0x3f7)+_0x5cc886(0x500,0x4f1,0x457,0x4d4)+'=='),_0x4e04e1['AbIAO'](addLog,_0x46f80b(-0x16,0xca,0x87,0x27)+_0x1cea50),addLog(_0x46f80b(0x3d,-0x2a,-0xb,-0x72)+':'),_0x4e04e1[_0x46f80b(0x99,0x8c,0x99,0xa1)](addLog,_0x4e04e1[_0x5cc886(0x3fb,0x3e4,0x470,0x3cb)](formatPromptForDisplay,_0x2edb7f));const {api_url:_0x112bc2,api_key:_0x246671,model:_0x2ff3b7,temperature:_0x25deff,top_p:_0x5a1ec9,max_tokens:_0x286b31}=_0x9f2c41;if(_0x4e04e1[_0x46f80b(0x7,-0x39,-0x27,0x67)](!_0x112bc2,!_0x246671)||!_0x2ff3b7){const _0x42bb05=_0x4e04e1[_0x5cc886(0x357,0x3e9,0x3f2,0x3a4)];toastr[_0x5cc886(0x3af,0x412,0x3e6,0x3ed)](_0x42bb05);const _0x55ffe9={};_0x55ffe9['success']=![],_0x55ffe9[_0x46f80b(0x6c,0x10c,0xb6,0xb4)]=_0x42bb05,_0x55ffe9['id']=_0x1cea50,eventSource[_0x5cc886(0x41b,0x479,0x520,0x4a1)](eventNames[_0x46f80b(0x27,-0xf,0x5f,0x4f)+_0x5cc886(0x484,0x44f,0x454,0x4a2)],_0x55ffe9);return;}const _0x4bbd10=_0x4e04e1[_0x46f80b(0x88,-0x7d,0x1e,0x1f)],_0x51c22b=_0x112bc2['replace'](/\/$/,'');function _0x5cc886(_0x434989,_0x5912cb,_0x480231,_0x334e61){return _0x445fe2(_0x5912cb-0x118,_0x434989,_0x480231-0x6f,_0x334e61-0xd0);}_0x74af7e&&_0x4e04e1[_0x5cc886(0x496,0x4ba,0x54d,0x4bc)](_0x74af7e,_0x4e04e1[_0x46f80b(-0x47,0x77,0x47,0x67)]);try{const _0x40780f={};_0x40780f[_0x5cc886(0x35b,0x3e2,0x460,0x467)+_0x5cc886(0x4e6,0x4fe,0x519,0x4f8)+'ce']=_0x4e04e1[_0x46f80b(0x127,0x59,0xd8,0x16a)],_0x40780f[_0x5cc886(0x3f2,0x470,0x4c9,0x414)]=_0x51c22b,_0x40780f[_0x5cc886(0x434,0x48f,0x50d,0x479)+'lude_heade'+'rs']='Authorizat'+'ion:\x20\x22Bear'+'er\x20'+_0x246671+'\x22',_0x40780f[_0x5cc886(0x45b,0x505,0x476,0x488)]=_0x2ff3b7,_0x40780f[_0x46f80b(0x62,0x87,0x28,0x29)]=_0x2edb7f,_0x40780f[_0x46f80b(0x125,0xe3,0xd2,0x17b)+'e']=_0x25deff,_0x40780f[_0x46f80b(-0x2,0xd0,0x26,0x9b)]=_0x5a1ec9,_0x40780f['max_tokens']=_0x286b31,_0x40780f[_0x5cc886(0x344,0x3ba,0x388,0x422)]=![];const _0x2b4350=_0x40780f,_0x929117=await _0x4e04e1[_0x5cc886(0x49c,0x4f5,0x502,0x59d)](fetch,_0x4bbd10,{'method':_0x4e04e1[_0x46f80b(0x116,0x9a,0xcb,0xbf)],'headers':_0x4e04e1[_0x5cc886(0x40d,0x3e4,0x396,0x396)](getRequestHeaders,window[_0x46f80b(0x6a,0x10b,0x9f,0x13d)]),'body':JSON['stringify'](_0x2b4350),'signal':_0x214382}),_0x5c6d23=await _0x929117['json']();if(_0x5c6d23['error']){let _0x2913e2;if(_0x4e04e1[_0x46f80b(0x60,0x7f,0x63,0xf4)](typeof _0x5c6d23[_0x46f80b(-0xb7,-0x41,-0xf,-0x33)],_0x4e04e1['PPueM'])&&_0x5c6d23[_0x5cc886(0x3e0,0x412,0x42e,0x4b7)][_0x46f80b(0x6d,0x1d,0x78,0xf7)]){_0x2913e2=''+_0x5c6d23[_0x5cc886(0x472,0x412,0x40d,0x446)][_0x46f80b(-0x9,0x9a,0x78,0x10a)];const _0x38206a=[];if(_0x5c6d23['error'][_0x5cc886(0x418,0x422,0x41b,0x472)])_0x38206a[_0x46f80b(-0xb2,0x17,-0x1f,-0x3e)](_0x5cc886(0x3db,0x3d0,0x403,0x412)+_0x5c6d23[_0x5cc886(0x383,0x412,0x3f3,0x3e6)]['type']);if(_0x5c6d23[_0x46f80b(0x7e,0x51,-0xf,-0x1f)]['code'])_0x38206a['push'](_0x46f80b(0xb8,0x8e,0x2a,0x77)+_0x5c6d23[_0x46f80b(-0x1e,0x4b,-0xf,-0x50)][_0x46f80b(0xed,0x10d,0xbf,0x48)]);_0x4e04e1[_0x5cc886(0x41d,0x4c4,0x42f,0x462)](_0x38206a[_0x5cc886(0x453,0x48d,0x4ac,0x436)],-0xdcc+-0xf2+0xebe)&&(_0x2913e2+='\x20('+_0x38206a[_0x46f80b(0xa8,0xbd,0x3c,0x51)](',\x20')+')');}else{if(_0x4e04e1[_0x46f80b(0x104,0x116,0x7f,0xe9)](_0x4e04e1['jrmGV'],_0x4e04e1['jrmGV']))_0x2913e2=''+JSON[_0x46f80b(-0x61,0xaf,0x2d,0x17)](_0x5c6d23[_0x5cc886(0x45a,0x412,0x460,0x418)]);else{const _0x4d9920=_0x157339[_0x61854b][_0x5cc886(0x500,0x4b0,0x43f,0x4a9)+'es']||{},_0x21bbad=_0xfcd500[_0x2fe800][_0x5cc886(0x40a,0x3cc,0x42b,0x3ff)+_0x5cc886(0x40d,0x3db,0x3ae,0x434)];return _0x4d9920[_0x21bbad]||_0x4d9920[_0x190d6a[_0x46f80b(0x83,0x147,0x9e,0xa4)](_0x4d9920)[-0x3a1*0x7+-0x1152+0x2ab9]]||{};}}throw new Error(_0x2913e2);}if(!_0x929117['ok']){if(_0x5cc886(0x47c,0x4b9,0x4dc,0x547)!==_0x4e04e1[_0x46f80b(-0x7b,-0xc8,-0x5a,0x23)])_0x3164bf[_0x5cc886(0x567,0x4e5,0x495,0x54c)][_0x46f80b(0xf3,0xc7,0x93,0x50)](_0x3d04b0=>{if(_0x3d04b0['user']&&_0x4e04e1['BBkpz'](_0x3d04b0['user'][_0xf37b86(0x500,0x56f,0x5bd,0x5ec)](),'')){const _0x228dac={};_0x228dac[_0xf37b86(0x5d4,0x56c,0x60e,0x547)]=_0x4e04e1[_0xf37b86(0x43c,0x441,0x48a,0x417)],_0x228dac[_0xf37b86(0x552,0x50e,0x467,0x483)]=_0x3d04b0['user'],_0x26b22a[_0x176f29(0x233,0x250,0x2b0,0x246)](_0x228dac);}function _0xf37b86(_0x4904b8,_0x47d8d1,_0x9161a9,_0x544e25){return _0x5cc886(_0x9161a9,_0x47d8d1-0x74,_0x9161a9-0x22,_0x544e25-0x13f);}function _0x176f29(_0x2bd025,_0x378b3b,_0x907d2a,_0x920129){return _0x5cc886(_0x378b3b,_0x2bd025- -0x1cf,_0x907d2a-0x6f,_0x920129-0x15f);}if(_0x3d04b0[_0xf37b86(0x57c,0x4dd,0x48d,0x505)]&&_0x3d04b0['assistant'][_0xf37b86(0x4d0,0x56f,0x552,0x543)]()!==''){const _0x475de9={};_0x475de9[_0xf37b86(0x5e9,0x56c,0x56d,0x5b1)]=_0x4e04e1[_0xf37b86(0x53d,0x4c9,0x4aa,0x48a)],_0x475de9['content']=_0x3d04b0['assistant'],_0x508d65[_0x176f29(0x233,0x252,0x243,0x279)](_0x475de9);}});else throw new Error('请求失败:\x20'+_0x929117[_0x5cc886(0x476,0x41b,0x48d,0x3ec)]+'\x20'+_0x929117[_0x5cc886(0x36c,0x3fd,0x380,0x3ae)]);}const _0x41cff5=_0x5c6d23[_0x5cc886(0x4d1,0x428,0x421,0x4ce)]?.[0x17c*0xc+0x45b*-0x5+-0x7*-0x91]?.['message']?.[_0x46f80b(0x2,0x51,0x79,0xf2)]||'';!_0x41cff5&&(_0x4e04e1[_0x46f80b(0x5f,0x3f,0x1c,0x8b)](_0x4e04e1['RAXjT'],_0x5cc886(0x4de,0x497,0x4c3,0x468))?toastr['warning'](_0x5cc886(0x454,0x4fc,0x4aa,0x4bf)+'复。'):(_0x51ef87=_0x4e04e1['DUuKa'],_0x193053[_0x5cc886(0x311,0x3b5,0x408,0x342)](_0x1857d2+(_0x5cc886(0x4d8,0x4ac,0x444,0x423)+_0x46f80b(0xd1,-0x3c,0x54,0xd3)))));_0x74af7e&&_0x4e04e1[_0x5cc886(0x522,0x4bd,0x41a,0x42d)](_0x74af7e,_0x41cff5);_0x4e04e1[_0x46f80b(-0x2,-0x4c,-0x3d,-0xde)](addLog,'\x0a-----\x20LLM'+_0x46f80b(0xae,0xdb,0x55,0x5f)),_0x4e04e1[_0x46f80b(-0xdb,-0x37,-0x5d,-0x56)](addLog,_0x41cff5),_0x4e04e1[_0x46f80b(0xd6,0x20,0x9c,0x7f)](addLog,_0x5cc886(0x40a,0x40f,0x42e,0x3f7)+'请求完成\x20=====');const _0x4676b2={};_0x4676b2[_0x5cc886(0x55f,0x4de,0x505,0x502)]=!![],_0x4676b2[_0x5cc886(0x57b,0x4d7,0x4c5,0x538)]=_0x41cff5,_0x4676b2['id']=_0x1cea50,eventSource['emit'](eventNames[_0x46f80b(-0x33,0xc6,0x5f,0x79)+_0x5cc886(0x4c9,0x44f,0x467,0x439)],_0x4676b2);}catch(_0x34d106){if(_0x4e04e1[_0x46f80b(0x8b,0x8,-0x13,-0xb8)](_0x4e04e1[_0x46f80b(0x111,0x61,0xd5,0x101)],_0x4e04e1[_0x46f80b(0xf2,0x5e,0xd5,0x48)])){const _0x1812cf={};_0x1812cf['system']=_0x46f80b(0xa5,-0x25,0xa,-0x23),_0x1812cf[_0x46f80b(0x16c,0xfb,0xd3,0x115)]='用户',_0x1812cf[_0x46f80b(-0x36,0x6e,0x48,0xf2)]=_0x4e04e1[_0x46f80b(0x40,0x1b,0x70,0x39)],_0x1812cf[_0x5cc886(0x3e9,0x435,0x4d9,0x46b)]='函数调用',_0x1812cf[_0x5cc886(0x411,0x440,0x442,0x496)]='工具';const _0x49a199=_0x1812cf;return _0x49a199[_0xbbde52]||_0x2daac6;}else{if(_0x4e04e1[_0x46f80b(0x73,-0x68,0x1c,0x5d)](_0x34d106[_0x5cc886(0x49e,0x478,0x4be,0x513)],_0x4e04e1[_0x5cc886(0x4b0,0x4db,0x4a6,0x46f)])){console['log'](_0x4e04e1[_0x46f80b(-0x71,-0xb8,-0x3b,0x30)]);const _0x136e04={};_0x136e04['name']=_0x5cc886(0x421,0x41f,0x3ea,0x376),_0x136e04[_0x46f80b(0x12,0xd8,0x78,0x2e)]=_0x46f80b(0x10d,-0x14,0x81,0x32)+'orted';const _0x144fa7={};_0x144fa7[_0x46f80b(0x11e,0x15,0xbd,0x84)]=![],_0x144fa7[_0x46f80b(0x114,0x45,0xb6,0x8c)]=null,_0x144fa7['id']=_0x1cea50,_0x144fa7[_0x46f80b(0x5d,0x6,-0xf,0x67)]=_0x136e04,eventSource[_0x46f80b(0x63,-0x45,0x58,0x14)](eventNames[_0x5cc886(0x4ae,0x480,0x41c,0x447)+_0x46f80b(-0x5f,0x96,0x2e,-0x13)],_0x144fa7);return;}console[_0x46f80b(-0x99,0x7a,-0xf,0x85)](_0x4e04e1['ERAda'],_0x34d106);const _0x5b60f6=_0x46f80b(0x124,0x57,0xcc,0x78)+_0x34d106[_0x5cc886(0x50e,0x499,0x4bb,0x4f5)];_0x74af7e&&_0x74af7e(_0x5b60f6);toastr[_0x5cc886(0x40d,0x412,0x48d,0x43e)](_0x34d106[_0x5cc886(0x44d,0x499,0x466,0x4d0)]);const _0x2de777={};_0x2de777['success']=![],_0x2de777[_0x46f80b(0x14f,0xb6,0xb6,0x108)]=_0x5b60f6,_0x2de777['id']=_0x1cea50,eventSource[_0x5cc886(0x4a9,0x479,0x3d7,0x517)](eventNames['LLM_EXECUT'+'E_RESPONSE'],_0x2de777);}}finally{currentLLMRequestController=null,_0x4e04e1[_0x46f80b(-0x69,-0x31,-0x25,-0xab)](stopFabLoading);}}export function createGetPromptHandler(_0x5bbf3d,_0x30b574){return function(_0x39f69e){const {id:_0x580ea5}=_0x39f69e;if(!_0x580ea5)return;const _0x335a7e=REQUEST_TYPE_NAMES[_0x5bbf3d]||_0x5bbf3d;function _0x53ced5(_0x5024e0,_0x194869,_0x5b41e7,_0x282289){return _0x3897(_0x5b41e7- -0x22a,_0x194869);}console[_0x40adbd(-0x189,-0x1a7,-0x27d,-0x1e2)](_0x40adbd(-0x29e,-0x1ca,-0x2cd,-0x229)+_0x40adbd(-0x128,-0x22e,-0x223,-0x1c7)+_0x335a7e+(_0x40adbd(-0x1ab,-0xe3,-0xf4,-0x119)+'D:\x20')+_0x580ea5+')');const _0x22ed02=buildPromptForRequestType(_0x5bbf3d);function _0x40adbd(_0x783eef,_0x52efca,_0x22e33b,_0x3cf6cb){return _0x3897(_0x3cf6cb- -0x329,_0x52efca);}const _0x5d966c={};_0x5d966c['prompt']=_0x22ed02,_0x5d966c['id']=_0x580ea5,eventSource[_0x53ced5(-0xa8,-0x31,-0x91,-0x134)](_0x30b574,_0x5d966c);};}export function createExecuteHandler(_0x1885bb,_0x5a5e6c,_0x3664e9=null){const _0x231bdd={'IrcUz':function(_0x340c7f,_0x43718a,_0x3af643,_0x8df5f2,_0x52b257){return _0x340c7f(_0x43718a,_0x3af643,_0x8df5f2,_0x52b257);}};return async function(_0x1af248){function _0x2fee5f(_0x17bd0c,_0x339c09,_0x12e254,_0x444e7f){return _0x3897(_0x17bd0c-0x155,_0x444e7f);}const _0x3e7f83=_0x3664e9?_0x3664e9():null;await _0x231bdd[_0x2fee5f(0x2a9,0x30e,0x2ba,0x24a)](executeTypedLLMRequest,_0x1af248,_0x1885bb,_0x5a5e6c,_0x3e7f83);};}
//# sourceMappingURL=http://localhost:8000/llmService.js.map