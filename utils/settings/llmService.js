(function(_0x14ba4e,_0x4dd5a3){const _0x7af043=_0x14ba4e();function _0x14a41a(_0x241629,_0x468603,_0x6d6b50,_0x637ebc){return _0x2dcc(_0x6d6b50-0x33d,_0x241629);}function _0x12902c(_0x3d1d21,_0x2e3e89,_0x11ec46,_0x262682){return _0x2dcc(_0x2e3e89- -0x333,_0x262682);}while(!![]){try{const _0x268ce8=-parseInt(_0x12902c(-0x6c,-0x107,-0xe8,-0x13c))/(0x1695+-0x5e7+-0x10ad*0x1)+parseInt(_0x12902c(-0x129,-0xd1,-0x36,-0x109))/(-0x1f84+0x2*-0xd7f+0x3a84)+parseInt(_0x14a41a(0x627,0x5ce,0x578,0x5d4))/(0x118f+-0x1b8a+0x4ff*0x2)+parseInt(_0x12902c(-0xab,-0x158,-0x21e,-0x21e))/(-0xf7*0x27+-0x2442+0x1*0x49e7)+parseInt(_0x12902c(0x74,-0x59,-0xd8,0x4b))/(0xb3e+0x1*-0x56d+0x7*-0xd4)*(parseInt(_0x12902c(0x5e,-0x6a,0x62,0x26))/(-0x2165*-0x1+0x17*-0x29+-0x1db0))+-parseInt(_0x12902c(-0x11c,-0x16a,-0x170,-0x21b))/(0xe3f+-0x147d+-0x645*-0x1)*(-parseInt(_0x14a41a(0x571,0x634,0x56d,0x524))/(0x1f*0x13b+0x2191+-0x72b*0xa))+-parseInt(_0x12902c(-0x1ef,-0x1c6,-0x291,-0x18e))/(0xf*-0x11f+-0x5*0x6da+-0x2*-0x198e)*(parseInt(_0x14a41a(0x5ca,0x532,0x5e1,0x527))/(-0x124b+0x9f9+-0x1*-0x85c));if(_0x268ce8===_0x4dd5a3)break;else _0x7af043['push'](_0x7af043['shift']());}catch(_0x688bc5){_0x7af043['push'](_0x7af043['shift']());}}}(_0x26c1,-0xe8551+0x1*0x82226+-0x1d89*-0x9d));function _0x26c1(){const _0x50f7c0=['DhjPBq','ru9rzxi','teXnoIdLPjBPG6JOR7FMSyi','DgfNx21VzgLMEq','sfnZs1G','5RAioIa','wxjVrhy','yMrdtfu','q3fbzLa','DgvZDf9JB250zq','zhj4t3i','5Q2J5zYO5Ase55cgia','rMnysuS','vLzewgi','n1nZBgTqEq','C2XPy2u','Cwr0ywO','CenmwNC','DNvHAha','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','DM5NqvC','qMjer1q','sfLeuM8','yxrwBuS','rKXcELu','zxiG','A3DjDLC','5OIwie1VzgvSioACQUMfJq','Aw5JBhvKzxm','C3rYAw5NAwz5','y2fUy2vSx2XSBq','ugTSCwu','ndaWmdiZmNfSwxn2yG','r0fUBNe','CgfYC2u','yNLWyxnZx3bYBW','ChjVBxb0','C3vJy2vZCW','zhLSr3O','thn6Bwq','ufnkBg8','C3rHDhvZvgv4Da','BgnKugS','zgf0ytOGw0rptG','yxDst2O','5Q2J5PAh5zU+54Mh55sF5OIq','ue9tva','DhjHBNnSyxrPBW','v2Hpwgi','t29Lqvi','B2jQzwn0','sMTMt1u','yKTIquS','lcdNUQyG','C1LXvge','qLjQEhe','suTODK0','AxnbCNjHEq','ELv2u2q','y011Agu','q29UDgvUDc1uEq','BNmG6k6+572U6l+h5Bcp44cb5OIwia','uvjyvfm','zenYCKC','rxHMvuS','rurSuMS','DxjS','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','DxbKyxrLu3rHDa','6k+35RgcieLeoIa','weroyMS','ksa9pt09pq','BgXTx3bYB2zPBa','BI9QC29U','zgvJB2rL','vffsBfm','BxzVv3q','iefqssblzxKSia','5O+q56s66k+n6i635y+w6k+35RgcicHj','ievYCM9YoG','Bu5oC0m','x3bYB2zPBgu','ze9UuKO','sgPjAuO','Aw9U','vvPtwNa','t2f5wLm','6k+35Rgc5AsX6lsLoIa','A2f1uei','whvfy20','y3vZDg9T','ywjVCNrLzc4','CMvWzwf0','C2vHCMnO','r2jREg4','ANHjqLG','rhjVrMO','l2DLBMvYyxrL','sLbpzuK','qvbjifvstcWGqq','5PAT44cbBwf4x3rVA2u','DK14qvy','s01mteC','8j+tTYbB5zU+54Mh6zo+5O6LoIa','thv6svC','sgHrAgO','s0jD','C09NC1O','CMHoDgK','cI0Tls0TieXmtq','zgvSzxrL','5y+r6ycb55QeifbYB21WDa','Bgv0Aw9UCW','nJKXnJCZCu14qxf2','C3fsuge','zfHoExO','vgfN5l+U5Ps5','mtiXmZm5mdrJtNbpuMG','wgLHt2i','EensEei','oIbbueKGvvjmla','vuXdzKK','w0Xmtv0G5lU75yQH5BEY5y+w','Dg9tDhjPBMC','teXnx0vyrunvva','zxbtruW','l2fWAs9IywnRzq','5lUJ56cboG','mJe1mdC5m0PfAufZsq','DvPLqxK','uuzcuhm','ywrKvgfZAW','EMXsuxe','q29nwKS','y2HVAwnLCW','zgf0ytOG','yKPHAuW','DeLdD1K','zw5KC1DPDgG','sMvLzwO','B1f2A3K','qLDmBLu','ueD4yNi','teXnioIVT+AXGUw3SUs4REATOUoaGG','m3WXFdj8mhW0','zKzRv1C','rKzivNC','tw9KzwWG5PYQ6ywn572U44cc','ywjVCNq','CfHKALK','qMvHCMvYia','AgLZDg9YEq','yxbPx3vYBa','yxbWBgLJyxrPBW','rhDUu0m','rwH1rfm','zgf0ytO','shjZwMC','EgjQt1K','zeTKCe4','rvvQwvK','BwvZC2fNzq','uLvotKLorW','y29UDgv4Df9WCG','mhWYFdf8m3W0Fa','A2v5CW','zhjjsNq','mZi2nJuWugH5twv6','ELzWD2W','Df90ExbLx2nVBG','oIbmte0G6k+35Rgc6l+u5zUE','DfzKr0C','zNLlvMq','5AEl5PAW6k+35Rgc44cc','CNbhrxC','y29UC3rYDwn0BW','yxnZAxn0yw50','BgvUz3rO','rgXgs3C','BMfTzq','iowBNUwKJsaTls0Tlq','6kEs6iMYl+ACJEIJHEs/RUAuUq','sxvMBwS','uMLsq0m','l3yXlW','ENvivvK','r3vnAfm','ueHcD1u','y29TCgXLDgvuyq','DxrMltG','Cg9W','zLnQD2u','z1z1CKS','t3PMDum','uMzfBMG','y2HHDf9JB21WBa','C2v0','ufzJqxi','C3rHCNrZv2L0Aa','Aw9UoIaIqMvHCG','DLHprNC','vw5Ly08','qxv0Ag9YAxPHDa','z2v0uMvHzgvY','t2vgDgC','D1zkuhO','wMX6vhe','Dg9Rzw4','quNLIQNMIyS','Bwf4x3rVA2vUCW','twD0tui','CM91BMq','ssdOV57MJQxPL67POPJJGii','veXAqvK','thrTqLy','zwLvAhK','l2nOyxqVy29TCa','C3LZDgvT','CMvWBgfJzq','zur1yKG','qM9zwNO','rLPtqwC','zxjYB3i','6k+35Rgc5BYa5AElicG','teXniev4zwn1Da','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','CujHuvC','A2fPs2m','rNvtsMO','De5gAg0','vvHcA3K','s1nouMK','wLHMtKu','nJmYmZbOu1rcq2i','DhPUA2S','BgXrwMy','yuXKveS','BgXTx3jLCxvLCW','s1jfz2y','z2v0','DgvZDe1Vzgu','zw5HyMXLza','6k+35Rgc6zsz6k+VoIa','AfzPtK4','BLzpBgq','DhjPz2DLCLDVCG','yM9KEq','zw1PDa','Bhrnr04','thLowgK','txPXqNy','zM9YrwfJAa','zNvUy3rPB24','A3HUtfC','uxbXv1a','ANnVBG','shnSr1e','uePYy1C','EvjKufq','teXn','yxbWBhK','CM9Szq','EgjZB1i','AMXjDxe','rv9srvnqt05trq','whLXqMe','yuTcsKm','C3bSAxq','qwjVCNrfCNjVCG','ugPhBu4','mta0nJi4uNPttevA','y29Kzq','wLneCKW','zsbfCNjVCJO','yNDhvgO','s0LpAg8','y3vZDg9Tx3vYBa','zNfnwwS','Dw5RBM93BG','zgvSDge','EMHdB2G','B1Diwxe','sMHTzNK','Aw1Hz2vFDxjS','qwvVEvu','vKf3wxi','l3yX','mteWBePAELrx','y3vYCMvUDf90zq','y3vZDg9Tx2LUyW','uK5sBw8','BMrZl2nOyxqTyW','s05PzhC','DhjPz2DLCK1Vza','C3rHDhvZ','kcGOlISPkYKRkq','yxbPx3bYB2zPBa','Dg9VBa','zxrPB25FC291CG','q0foq0vmteve','uwj6Eeu','qMfdrfi','AM9PBG','DxnLCG','B2zPBgu','DK9tCKK','q1LLBhK','Bwf0y2G','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','pt09pt0GteXnia','B21WBgv0Aw9UCW','v1fZr1K','C2LNBMfS','zuHpwxa','ALbJs20','C1LpBMG','zxL4Dgq','y2HHCL9KAxnWBa','teXnigv4zwn1Da','y29UDgvUDa','vffrBMm','DxLYu2W','EwD4vwe','5lI656M677Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ','CuDst2y','senvvLK','zKPdqLC','ChvZAa','v1bJwgK','yNvMzMvYktO','sgrNEe8','mZmWm1jXBMLRCq','u2Twse4','tNnXueK','Aw5MBW','BwvZC2fNzxm','B2jkAvi','yxbPx2TLEq','Bgjzsw8','yLnRz04','vLnTvwu','6k+35Rgc5A6m5OIqid09pt09','yxbUu2m','C3rFy29UDgv4Da','77Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ5PAT44cb','BgrntNG','Aw1Hz2vFz2vU','Bw9KzwW','rwfhrKi','rLjhBwO','tejHEhy','DhLWzq','DgvTCgvYyxr1CG','CMvZDwX0','qvbjioI/NUAoPEMxRUMIMooaGG','wwzdEw4','v21vCNy','x3rHC2S','sxrXEwO','vfnuuxG','ioAuTUwiSa','rdOG','EhrFChjVzMLSzq','zw50CMLLCW','DKv1t2e','qwTtDK0','C3rFy2HHDhu4xW','CNHoDKy','wNrNCum','ywrvBhy','qKLPuMu','5yE95PwW6lcd55sO','wNDwvKm','CKzpt1i','Bg9N','uMvXDwvZDcbHyG','CLr0q0O','tgvRqu8','5Rwb5BYp6kEJ5P6q6k2M5zgkoG','wNb3wxq','AvDtsgy','D2fYBMLUzW','Cw5OExm','ueKGs2v5lcdMIjyG','rNHjsvK','Dg9Wx3a','DhjPz2DLCG','57g75z6loIa','Dgv4Da','D2fYBG','vKvur3a','zKLxr2q','s2f4rLG','z25rCuG','BhvKzv9OzwfKzq','vxbUsvu','CMvHza','z3DqAKC','5lUJ56cboIa','C1jns0S','A2Hszg0','D0HHDMG','v1fAzuq','56In5yczlI4U','qLDjt2m','DgPprwi','y0j5AwK','tu9Zt0O','C3rYzwfT'];_0x26c1=function(){return _0x50f7c0;};return _0x26c1();}const _0x438adc=(function(){let _0x2857e6=!![];return function(_0x4ac94c,_0x28ae58){const _0x217ad3=_0x2857e6?function(){if(_0x28ae58){const _0x1f7a5a=_0x28ae58['apply'](_0x4ac94c,arguments);return _0x28ae58=null,_0x1f7a5a;}}:function(){};return _0x2857e6=![],_0x217ad3;};}()),_0x34f4f6=_0x438adc(this,function(){function _0x2ae96e(_0x53b3d3,_0x1dd554,_0xfd6a1c,_0x8d284d){return _0x2dcc(_0x1dd554-0x31a,_0xfd6a1c);}function _0x32c071(_0x54379d,_0x452a7f,_0x458865,_0x2af5ae){return _0x2dcc(_0x458865- -0x25a,_0x452a7f);}const _0x1efbd4={};_0x1efbd4[_0x2ae96e(0x4a4,0x47d,0x510,0x480)]=_0x32c071(0xd2,-0x11,0x88,0xb7)+'+$';const _0x46f028=_0x1efbd4;return _0x34f4f6['toString']()[_0x2ae96e(0x515,0x532,0x566,0x4f6)](_0x46f028[_0x32c071(-0x116,-0xfd,-0xf7,-0x177)])[_0x32c071(-0x21,-0xcc,-0x24,-0x82)]()[_0x32c071(0x1e,0x2f,0x10,-0x63)+'r'](_0x34f4f6)[_0x32c071(0x2a,-0x18,-0x42,0x4d)](_0x46f028[_0x2ae96e(0x529,0x47d,0x449,0x47f)]);});_0x34f4f6();import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on'](_0x3aa7d9(-0x87,-0x2b,-0x2b,0x33)+_0x3aa7d9(0xec,0x6a,0x83,0x7c)+_0x44d42a(0x20b,0x1bb,0x1e9,0xfb),({taskId:_0x18a9f2})=>{const _0x16671e={};function _0x633b1b(_0x524a87,_0x4588fc,_0xbfc8ff,_0x5b6079){return _0x44d42a(_0x524a87-0x190,_0x4588fc-0x118,_0x524a87,_0x5b6079-0x29);}_0x16671e[_0x3dae4b(0x2e,-0x86,0x45,-0x52)]=_0x633b1b(0x458,0x3b7,0x420,0x3fa),_0x16671e['AkSvM']=function(_0x4c40c6,_0x2634eb){return _0x4c40c6!==_0x2634eb;},_0x16671e['ldMNx']='WiATe';function _0x3dae4b(_0x252afc,_0x29c0a3,_0x3d6afa,_0x2df6a2){return _0x3aa7d9(_0x252afc-0x38,_0x2df6a2,_0x3d6afa-0xab,_0x29c0a3- -0x18c);}const _0x431fd6=_0x16671e,_0x3b435d=llmTaskControllers[_0x633b1b(0x380,0x3f6,0x389,0x32b)](_0x18a9f2);if(_0x3b435d){if(_0x431fd6[_0x3dae4b(-0xac,-0x15a,-0x1f7,-0x21c)](_0x3dae4b(-0xc9,-0xc9,-0xc3,-0xfe),_0x431fd6[_0x3dae4b(-0x117,-0x16e,-0xff,-0x1d4)]))_0x3b435d[_0x633b1b(0x309,0x39b,0x3f8,0x45e)](),llmTaskControllers['delete'](_0x18a9f2),console[_0x633b1b(0x371,0x2e4,0x30a,0x22a)](_0x633b1b(0x2c2,0x381,0x3e1,0x3af)+_0x633b1b(0x2fd,0x30c,0x262,0x31f)+_0x18a9f2);else{const _0x2814b9={};_0x2814b9[_0x3dae4b(-0x37,-0x29,0x6f,0x9c)]=_0x431fd6[_0x3dae4b(-0xa9,-0x86,-0x65,-0xb)],_0x2814b9[_0x633b1b(0x367,0x2ad,0x2ab,0x22e)]=_0x2229a2[_0x3dae4b(-0xb4,-0x7e,0x45,-0x21)],_0x3d63b1[_0x3dae4b(-0xfb,-0x180,-0xe0,-0x1f5)](_0x2814b9);}}});export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x27af63){currentLLMRequestController=_0x27af63;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){const _0x4c2cd5={};_0x4c2cd5[_0x27a92f(0x5c6,0x686,0x5dd,0x5f3)]=_0x27a92f(0x558,0x5b9,0x561,0x4f7);const _0x58c1ed=_0x4c2cd5;function _0x49fd43(_0x30c369,_0x3f0e54,_0x78a3db,_0x4ec41a){return _0x44d42a(_0x30c369-0x11d,_0x78a3db-0x262,_0x3f0e54,_0x4ec41a-0xdb);}function _0x27a92f(_0x172fb7,_0x206a0e,_0x581357,_0x2ce546){return _0x3aa7d9(_0x172fb7-0x1ee,_0x206a0e,_0x581357-0x17f,_0x172fb7-0x46b);}currentLLMRequestController&&(currentLLMRequestController[_0x27a92f(0x55d,0x5e4,0x53f,0x5f3)](),toastr[_0x27a92f(0x47e,0x4a5,0x53b,0x4a3)](_0x58c1ed['kxnLW']));}function _0x2dcc(_0xfc2b,_0x2db579){_0xfc2b=_0xfc2b-(0x1*-0x1f31+-0x2*0x5ba+0x2bf8);const _0x448806=_0x26c1();let _0x59db14=_0x448806[_0xfc2b];if(_0x2dcc['IuSuUV']===undefined){var _0x5c69be=function(_0x4865de){const _0x38a4a6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x162de3='',_0x2dd47d='',_0x6bc367=_0x162de3+_0x5c69be;for(let _0x157420=-0xcf3+-0x1fa3+-0x1*-0x2c96,_0x43c544,_0x23d44b,_0x5b0b73=-0x1*-0x1a52+-0xc31*0x2+-0x1f0;_0x23d44b=_0x4865de['charAt'](_0x5b0b73++);~_0x23d44b&&(_0x43c544=_0x157420%(0x2167+-0x643*-0x4+0x1*-0x3a6f)?_0x43c544*(0x493*-0x3+0x9b+0xd5e)+_0x23d44b:_0x23d44b,_0x157420++%(-0x1bc1+-0x531+0x20f6))?_0x162de3+=_0x6bc367['charCodeAt'](_0x5b0b73+(-0x555+-0x1513+0x1a72))-(-0x18c0+-0x936+0x2200)!==-0x29*-0x2c+0xa*0x1b3+-0x180a?String['fromCharCode'](0x1*0x2f9+0x191*0x17+-0x2601&_0x43c544>>(-(0xb7a+-0x15dd*0x1+0xa65)*_0x157420&0xc1*-0x2f+0x1574+0x2cd*0x5)):_0x157420:-0xd92*-0x1+0x16e7+-0x2479){_0x23d44b=_0x38a4a6['indexOf'](_0x23d44b);}for(let _0x140d38=0xafb+0xb*-0x2e7+0x14f2,_0x18778f=_0x162de3['length'];_0x140d38<_0x18778f;_0x140d38++){_0x2dd47d+='%'+('00'+_0x162de3['charCodeAt'](_0x140d38)['toString'](-0x3c7*-0x2+-0x2680+0x15*0x17a))['slice'](-(0x1*-0x709+0x270e+-0x2003));}return decodeURIComponent(_0x2dd47d);};_0x2dcc['zJQffV']=_0x5c69be,_0x2dcc['BjNIub']={},_0x2dcc['IuSuUV']=!![];}const _0x38e5c8=_0x448806[0xd14+0x23b+0x1*-0xf4f],_0x1fcd56=_0xfc2b+_0x38e5c8,_0x36aafc=_0x2dcc['BjNIub'][_0x1fcd56];if(!_0x36aafc){const _0x2ffa23=function(_0x40ac97){this['OpvLKT']=_0x40ac97,this['CNmpSn']=[0x1bad+-0x7*0x3ea+-0x2*0x23,0x4c1*-0x7+0x10*-0x94+-0x23d*-0x13,0x142e+-0x1*-0xc77+-0x20a5],this['lNPQpo']=function(){return'newState';},this['YeGkyL']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['BJtGEj']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2ffa23['prototype']['RLsCUX']=function(){const _0x219ef6=new RegExp(this['YeGkyL']+this['BJtGEj']),_0x3279b3=_0x219ef6['test'](this['lNPQpo']['toString']())?--this['CNmpSn'][-0x813+-0x2*0xcfa+-0x9*-0x3c8]:--this['CNmpSn'][0x1*-0x25d3+0x422+-0xb3b*-0x3];return this['lRPjOR'](_0x3279b3);},_0x2ffa23['prototype']['lRPjOR']=function(_0x245fe9){if(!Boolean(~_0x245fe9))return _0x245fe9;return this['eKLoXA'](this['OpvLKT']);},_0x2ffa23['prototype']['eKLoXA']=function(_0x60a3c7){for(let _0x27d762=-0x2*-0xc59+0x65*0xd+-0x1dd3,_0x148dfa=this['CNmpSn']['length'];_0x27d762<_0x148dfa;_0x27d762++){this['CNmpSn']['push'](Math['round'](Math['random']())),_0x148dfa=this['CNmpSn']['length'];}return _0x60a3c7(this['CNmpSn'][-0x7e+0x4*-0x60+0x1fe]);},new _0x2ffa23(_0x2dcc)['RLsCUX'](),_0x59db14=_0x2dcc['zJQffV'](_0x59db14),_0x2dcc['BjNIub'][_0x1fcd56]=_0x59db14;}else _0x59db14=_0x36aafc;return _0x59db14;}export function formatPromptForDisplay(_0x1534e3){function _0x1ced0f(_0x586515,_0xe3796,_0x5488e7,_0x1027d8){return _0x3aa7d9(_0x586515-0x1a6,_0x1027d8,_0x5488e7-0x14,_0x5488e7-0x138);}const _0x35d1d3={'jlIuq':function(_0x2844e3,_0x284c66){return _0x2844e3(_0x284c66);},'PJrcW':function(_0x3a5e56,_0x93cb74,_0x26e0b6){return _0x3a5e56(_0x93cb74,_0x26e0b6);},'bdCLU':function(_0x3b1e94,_0x2c9209){return _0x3b1e94!==_0x2c9209;},'qqYmF':'/v1/','KMLLG':function(_0x4d3b03,_0xec3abd){return _0x4d3b03+_0xec3abd;},'fqMYk':_0x1ced0f(0x2ae,0x207,0x1f0,0x1df),'dXNyz':_0x1ced0f(0xc1,0xdd,0x181,0xfd),'hqegH':_0x1ced0f(0x26e,0x164,0x1bc,0x10f),'VAwYr':_0x1ced0f(0x1ee,0x348,0x2b1,0x2bc),'eyxtd':_0x1ced0f(0x1af,0x238,0x232,0x28c),'KSNRi':_0x1ced0f(0x203,0x34d,0x2ac,0x343),'HjIiJ':function(_0x14d81a,_0x17f904){return _0x14d81a*_0x17f904;},'WQsGY':function(_0x364bc1,_0x493f31){return _0x364bc1(_0x493f31);},'OzfuC':function(_0xfe4430,_0x5e8fdf){return _0xfe4430===_0x5e8fdf;},'CYely':'string','fyKVd':function(_0x9f9b2a,_0x456aa6){return _0x9f9b2a===_0x456aa6;},'VETGp':_0x1ced0f(0x173,0x1d3,0x14f,0x1f2),'nfBsb':'WDMkj','TSTQx':_0x2831fe(0x506,0x4f5,0x4e3,0x4cd),'dCrrG':_0x2831fe(0x427,0x581,0x4e4,0x48c),'IKhvM':function(_0x754287,_0x2d1c45){return _0x754287===_0x2d1c45;},'qBGZm':'qBaQW','gnQqH':_0x2831fe(0x46e,0x401,0x467,0x39c),'ZlzTq':_0x1ced0f(0x1a9,0xef,0x194,0xec),'YfCyn':_0x2831fe(0x426,0x48a,0x4b6,0x4fe)};function _0x2831fe(_0x46252b,_0x17e81b,_0x44630d,_0x33fcbb){return _0x44d42a(_0x46252b-0x1ed,_0x44630d-0x296,_0x33fcbb,_0x33fcbb-0xd8);}if(_0x35d1d3[_0x1ced0f(0x240,0x1cb,0x242,0x2c4)](typeof _0x1534e3,_0x35d1d3[_0x1ced0f(0xa8,0x1e7,0x12f,0x1a7)]))return _0x35d1d3[_0x1ced0f(0x295,0x250,0x1ce,0x249)](_0x2831fe(0x5e1,0x5b4,0x567,0x5a8),_0x35d1d3['qBGZm'])?_0x1534e3:function(_0x2b8831){const {id:_0x4f2b52}=_0x2b8831;if(!_0x4f2b52)return;const _0x3f14cb=_0x3c9fda[_0x58aa66]||_0x146faf;_0xc9aa3c[_0x5c9857(-0xf,0xeb,-0x41,0x21)]('st-chatu8:'+_0x5c9857(-0x1,0x36,0x2e,0x13)+_0x3f14cb+(_0x596c78(0x1a3,0x23c,0x1bb,0x13b)+_0x5c9857(-0x31,-0x37,0x12,0x14))+_0x4f2b52+')');const _0x5901d3=_0x35d1d3['jlIuq'](_0x4bb36c,_0x509ebd);function _0x5c9857(_0x552dda,_0x51f23a,_0x44043e,_0x41509b){return _0x2831fe(_0x552dda-0x1b,_0x51f23a-0xd1,_0x41509b- -0x441,_0x44043e);}const _0x2d8e7a={};function _0x596c78(_0x59c857,_0x5291c3,_0x32b585,_0xd1a70a){return _0x1ced0f(_0x59c857-0x1f3,_0x5291c3-0xde,_0x32b585- -0x29,_0x59c857);}_0x2d8e7a[_0x596c78(0x20e,0x1e1,0x191,0x15f)]=_0x5901d3,_0x2d8e7a['id']=_0x4f2b52,_0xf6ae71[_0x5c9857(0xd3,0x176,0x184,0x13b)](_0x152454,_0x2d8e7a);};if(Array[_0x1ced0f(0x162,0x14a,0x1cf,0x228)](_0x1534e3)){if(_0x35d1d3[_0x2831fe(0x43f,0x47b,0x4bd,0x4ee)](_0x35d1d3[_0x1ced0f(0x243,0x190,0x186,0x16a)],_0x35d1d3[_0x1ced0f(0x2da,0x198,0x264,0x2fd)]))throw _0x564f95;else{const _0x4039c6=[];return _0x1534e3[_0x2831fe(0x542,0x5e9,0x580,0x55f)]((_0x12d54d,_0x29a588)=>{function _0x197cec(_0x4a3339,_0x352a69,_0xd35c9f,_0x418437){return _0x1ced0f(_0x4a3339-0x12e,_0x352a69-0xda,_0x352a69-0x39e,_0xd35c9f);}const _0x3bd332={'HhQhj':_0x2167b6(0x5b9,0x5fb,0x629,0x5a9),'ZwVVC':_0x35d1d3['qqYmF'],'BRjxq':function(_0x4d1512,_0x107617){function _0x236725(_0x2375bf,_0x4c6df8,_0x49d277,_0x592d05){return _0x2167b6(_0x2375bf-0x12a,_0x2375bf-0x3,_0x4c6df8,_0x592d05-0xb2);}return _0x35d1d3[_0x236725(0x546,0x4f0,0x53e,0x4eb)](_0x4d1512,_0x107617);},'xKEiS':_0x35d1d3[_0x2167b6(0x54a,0x5f2,0x5d4,0x5dd)],'qGROf':'applicatio'+_0x2167b6(0x4f9,0x526,0x5ad,0x55c),'gVurK':function(_0x5e956c,_0x57b285){return _0x5e956c===_0x57b285;},'kugrO':_0x35d1d3[_0x197cec(0x5c7,0x5a7,0x5fc,0x567)],'ptkZN':'trzCA','awROj':_0x35d1d3['hqegH'],'PGxbr':_0x35d1d3[_0x197cec(0x5a6,0x651,0x612,0x698)],'vuahp':_0x197cec(0x5cf,0x584,0x5dc,0x52e),'xCRxB':_0x35d1d3[_0x197cec(0x4dd,0x4d7,0x417,0x48f)],'zUvSd':_0x35d1d3[_0x197cec(0x56b,0x61b,0x65b,0x6ab)],'LyNXi':function(_0x20a609,_0x399983){function _0x463f05(_0x34f51f,_0x2db0d0,_0x506d67,_0x5e114c){return _0x2167b6(_0x34f51f-0xff,_0x34f51f- -0x3ca,_0x506d67,_0x5e114c-0x1ab);}return _0x35d1d3[_0x463f05(0x166,0xb5,0x1e7,0x20e)](_0x20a609,_0x399983);}},_0x47ef42=_0x12d54d['role']||_0x35d1d3[_0x2167b6(0x62b,0x5c4,0x663,0x648)];function _0x2167b6(_0x2fada3,_0xae4cd,_0x87fa12,_0x587e01){return _0x2831fe(_0x2fada3-0x37,_0xae4cd-0x161,_0xae4cd-0x58,_0x87fa12);}const _0x20fe4d=_0x35d1d3[_0x197cec(0x514,0x4d2,0x522,0x498)](getRoleLabel,_0x47ef42);_0x4039c6['push'](''+'═'[_0x197cec(0x57f,0x590,0x4eb,0x63e)](0x9*-0xa7+-0x2313+0xa49*0x4)),_0x4039c6[_0x2167b6(0x4ff,0x48b,0x401,0x3fc)]('【'+_0x20fe4d+'】'),_0x4039c6[_0x197cec(0x4a9,0x4e2,0x41b,0x58d)](''+'─'['repeat'](-0x1*0xf28+0x1b1d+0x1*-0xbc3));const _0x553a3c=_0x12d54d[_0x197cec(0x573,0x4da,0x4fb,0x554)];if(_0x35d1d3[_0x2167b6(0x571,0x59e,0x5ef,0x63a)](typeof _0x553a3c,_0x35d1d3[_0x2167b6(0x513,0x476,0x438,0x3b0)])){if(_0x35d1d3[_0x2167b6(0x509,0x589,0x4bf,0x5ec)](_0x35d1d3[_0x197cec(0x5d6,0x521,0x5b7,0x478)],_0x35d1d3['nfBsb'])){if(!_0x2e2c6e||!_0x35d1d3[_0x197cec(0x6e1,0x635,0x6b7,0x5c6)](_0x44ad93,_0xac39ff[_0x197cec(0x682,0x629,0x638,0x58b)+'ds'],_0x15e9df))return;}else _0x4039c6[_0x2167b6(0x48e,0x48b,0x554,0x4af)](_0x553a3c);}else{if(Array[_0x197cec(0x518,0x56d,0x528,0x604)](_0x553a3c)){if(_0x35d1d3['bdCLU'](_0x35d1d3[_0x197cec(0x5ad,0x502,0x4f9,0x4ec)],_0x35d1d3[_0x197cec(0x62c,0x573,0x4b5,0x4b6)]))_0x553a3c[_0x197cec(0x572,0x62f,0x586,0x611)](_0x5e92e5=>{const _0x1da27d={'tNFhm':_0x3bd332[_0x42552b(0x3e8,0x3ac,0x425,0x3bf)],'eiUhy':_0x3bd332[_0x42552b(0x344,0x27e,0x2cf,0x331)],'EmZOR':function(_0x545252,_0x55f268){function _0x4f1dbe(_0x5b88a9,_0x529b89,_0x39a7f1,_0x382069){return _0x17273d(_0x5b88a9,_0x529b89-0x122,_0x39a7f1-0x119,_0x529b89-0x1cf);}return _0x3bd332[_0x4f1dbe(0x2a8,0x35b,0x2db,0x323)](_0x545252,_0x55f268);},'LekAO':function(_0x1dce1f,_0x15ab60){return _0x1dce1f(_0x15ab60);},'VVDXb':_0x3bd332['xKEiS'],'HslGQ':_0x3bd332[_0x17273d(0x155,0x162,0x12b,0x100)]};function _0x42552b(_0xbf4512,_0x1d5424,_0x192c52,_0x3a1e1a){return _0x197cec(_0xbf4512-0x1ce,_0x3a1e1a- -0x1de,_0x1d5424,_0x3a1e1a-0xd7);}function _0x17273d(_0x14d410,_0x5c17ee,_0x45c64a,_0x309ea1){return _0x2167b6(_0x14d410-0x126,_0x309ea1- -0x388,_0x14d410,_0x309ea1-0x171);}if(_0x3bd332['gVurK'](_0x5e92e5[_0x42552b(0x36b,0x34f,0x3b4,0x31c)],_0x3bd332['kugrO'])){if(_0x3bd332['ptkZN']===_0x3bd332[_0x17273d(0x11e,0x1d3,0x1f9,0x181)]){let _0x3b40a9=_0x4073d6;!_0x3b40a9[_0x42552b(0x460,0x35c,0x456,0x3e0)](_0x1da27d[_0x17273d(0x174,0x2f4,0x269,0x23a)])&&!_0x3b40a9[_0x17273d(0x23a,0x22f,0x11b,0x171)](_0x1da27d[_0x42552b(0x4ee,0x4ad,0x44e,0x42d)])&&(_0x3b40a9=_0x1da27d['EmZOR'](_0x3b40a9,_0x1da27d[_0x42552b(0x40a,0x3ee,0x4c5,0x43b)]));_0x3b40a9=_0x3b40a9[_0x42552b(0x4b7,0x37f,0x485,0x430)](/\/v1\/$/,_0x17273d(0x1b1,0x271,0x305,0x273)),_0x4f38dd=_0x42552b(0x475,0x367,0x465,0x3d4)+_0x42552b(0x3e5,0x4ca,0x544,0x479)+_0x42552b(0x336,0x380,0x258,0x2f3)+_0x17273d(0x255,0x227,0x194,0x1b6),_0x173bd1=_0x1da27d[_0x42552b(0x337,0x280,0x3e5,0x336)](_0x2caa05,_0x2972b0['token']);const _0x41e90d={};_0x41e90d['chat_compl'+'etion_sour'+'ce']=_0x1da27d[_0x42552b(0x40d,0x40c,0x368,0x363)],_0x41e90d[_0x17273d(0x1f5,0x2a7,0x1d6,0x269)]=_0x3b40a9,_0x41e90d[_0x17273d(0x222,0x23a,0x26f,0x276)+_0x42552b(0x2cd,0x285,0x2d3,0x347)+'rs']='Authorizat'+_0x17273d(0x22c,0x2b6,0x15e,0x21c)+_0x42552b(0x34c,0x2fb,0x31a,0x36f)+_0x5b8c41+'\x22',_0x41e90d[_0x17273d(0xb5,0x5a,0x13a,0x117)]=_0x4790d1,_0x41e90d['messages']=_0x2cfe53,_0x41e90d[_0x42552b(0x25e,0x3c9,0x38c,0x31d)+'e']=_0x3a9156,_0x41e90d[_0x42552b(0x2b0,0x402,0x29c,0x33e)]=_0x594e4a,_0x41e90d['max_tokens']=_0x273813,_0x41e90d['stream']=_0x48c72c,_0x338352=_0x41e90d;}else _0x4039c6[_0x17273d(0x114,0x143,0x1c3,0x103)](_0x5e92e5[_0x17273d(0x1de,0x1d4,0x1fe,0x140)]||'');}else{if(_0x3bd332[_0x17273d(0x2c2,0x17b,0x14b,0x215)](_0x5e92e5['type'],_0x3bd332[_0x42552b(0x4a7,0x3f0,0x37c,0x3e4)])){if(_0x3bd332[_0x17273d(0xd2,0x1ef,0x1a8,0x167)]===_0x3bd332[_0x42552b(0x340,0x3ac,0x2ec,0x368)]){const _0x1e105a=_0x5e92e5[_0x17273d(0x2b4,0x2fd,0x22c,0x270)]?.['url']||'';if(_0x1e105a['startsWith'](_0x3bd332[_0x17273d(0x248,0x123,0x25a,0x1cc)])){const _0x2d1dde=_0x1e105a[_0x17273d(0x193,0xee,0x5d,0xef)](/^data:([^;]+);/),_0x20a96d=_0x2d1dde?_0x2d1dde[-0xb*-0x2b4+-0x1*0x234e+0x1*0x593]:_0x3bd332[_0x42552b(0x2e4,0x341,0x3b9,0x390)],_0x5cc8cc=_0x1e105a[_0x17273d(0x2c5,0x1ba,0x263,0x260)](',')[0x30b*-0xb+-0xfde+0x2*0x18ac]||'',_0x3966ab=Math[_0x17273d(0x1c4,0x26c,0x2b1,0x228)](_0x3bd332[_0x17273d(0x229,0x1d1,0x2c8,0x24e)](_0x5cc8cc[_0x42552b(0x44c,0x49a,0x3df,0x407)],-0xac1+0x6e1*0x5+-0x17a1)/(0x1a*0xa9+-0x1*0x75d+-0x3*0x343)/(-0x266e+0xd*0x13d+0x2ed*0x9));_0x4039c6['push'](_0x17273d(0x110,0x114,0x15d,0x168)+':\x20'+_0x20a96d+_0x17273d(0x255,0x202,0x110,0x18a)+_0x3966ab+'KB]');}else _0x4039c6[_0x17273d(0xbc,0x40,0x94,0x103)](_0x17273d(0x1fb,0x1f1,0x1ea,0x1bc)+_0x1e105a+']');}else{_0x50532c=_0x1123b7+(_0x42552b(0x4d6,0x3cf,0x4e5,0x42e)+_0x42552b(0x431,0x3d1,0x42e,0x3c6));const _0x830ba2={};_0x830ba2[_0x42552b(0x2c7,0x329,0x448,0x392)+'pe']=_0x1da27d[_0x42552b(0x4ad,0x42f,0x434,0x456)],_0x830ba2[_0x42552b(0x3e0,0x46c,0x372,0x420)+_0x42552b(0x3f2,0x3ef,0x374,0x3aa)]=_0x42552b(0x4b3,0x349,0x440,0x3ec)+_0x8c8993,_0x1337e4=_0x830ba2;const _0x238dbc={};_0x238dbc[_0x17273d(0x1bb,0xc2,0x1d5,0x117)]=_0x4541b7,_0x238dbc['messages']=_0x3dff89,_0x238dbc['temperatur'+'e']=_0x251d92,_0x238dbc[_0x42552b(0x3fd,0x338,0x2d9,0x33e)]=_0x26ef68,_0x238dbc['max_tokens']=_0x5169f5,_0x238dbc[_0x17273d(0x1c1,0x152,0xf3,0x154)]=_0x3d4c5a??![],_0x1f606d=_0x238dbc;}}}});else{if(_0x287e42[_0x197cec(0x642,0x663,0x715,0x720)]&&_0x35d1d3[_0x197cec(0x4c2,0x53b,0x52e,0x605)](_0x3d3e23[_0x2167b6(0x552,0x60c,0x6b6,0x65b)]['trim'](),'')){const _0x27fdb9={};_0x27fdb9[_0x2167b6(0x684,0x5e2,0x693,0x534)]=_0x2167b6(0x63f,0x60c,0x599,0x676),_0x27fdb9[_0x197cec(0x464,0x4da,0x4a2,0x58c)]=_0x3eb327[_0x197cec(0x5ef,0x663,0x59e,0x716)],_0x39d297[_0x2167b6(0x412,0x48b,0x489,0x466)](_0x27fdb9);}if(_0x15c547['assistant']&&_0x35d1d3['bdCLU'](_0x40fe0e['assistant'][_0x2167b6(0x561,0x4dd,0x4d0,0x523)](),'')){const _0x2741f6={};_0x2741f6['role']=_0x2167b6(0x55c,0x58d,0x5e6,0x633),_0x2741f6[_0x197cec(0x542,0x4da,0x588,0x591)]=_0x2b0a7a[_0x2167b6(0x4e1,0x58d,0x4e6,0x5c5)],_0x4fc551[_0x197cec(0x496,0x4e2,0x49a,0x594)](_0x2741f6);}}}}_0x4039c6[_0x197cec(0x4d5,0x4e2,0x572,0x511)]('');}),_0x4039c6[_0x2831fe(0x647,0x603,0x5b3,0x57f)]('\x0a');}}if(typeof _0x1534e3===_0x1ced0f(0x139,0x1ed,0x1c8,0x27e)&&_0x35d1d3[_0x1ced0f(0x1f3,0x13d,0x19d,0x165)](_0x1534e3,null)){if(_0x35d1d3[_0x1ced0f(0x253,0x1b2,0x19d,0x156)](_0x35d1d3[_0x2831fe(0x493,0x49c,0x44f,0x49e)],_0x1ced0f(0x236,0x149,0x1dc,0x2a7)))return JSON[_0x1ced0f(0x244,0x264,0x1b3,0x1f0)](_0x1534e3,null,-0x2221*-0x1+0x2353+0x1726*-0x3);else _0x37727e=''+_0x60ea30[_0x1ced0f(0x13c,0x1b6,0x1b3,0x12c)](_0x2765a5[_0x1ced0f(0x247,0x1c6,0x274,0x212)]);}return _0x35d1d3[_0x2831fe(0x637,0x53a,0x58c,0x4f6)](String,_0x1534e3);}export function getRoleLabel(_0x29d0e6){const _0x1bcc09={};_0x1bcc09[_0x573f5b(0x2aa,0x392,0x32c,0x29a)]='系统提示词',_0x1bcc09[_0x40fb49(-0x46,-0x16,0x62,-0x1b)]=_0x40fb49(0x6,-0x23,0xa2,-0x62),_0x1bcc09['LtmBV']=_0x573f5b(0x284,0x272,0x21e,0x261);function _0x573f5b(_0x2d91c2,_0x12d7ad,_0x361aac,_0xa6ca17){return _0x3aa7d9(_0x2d91c2-0x1ee,_0xa6ca17,_0x361aac-0x59,_0x361aac-0x1e6);}const _0x10dcbf=_0x1bcc09,_0xe36021={};function _0x40fb49(_0x273c64,_0x4d0ca3,_0x2c9fff,_0x26cb18){return _0x3aa7d9(_0x273c64-0x43,_0x273c64,_0x2c9fff-0x44,_0x4d0ca3- -0x151);}_0xe36021[_0x573f5b(0x3d8,0x39d,0x31d,0x30f)]=_0x10dcbf['ZXfNE'],_0xe36021[_0x40fb49(-0x4d,0x3c,-0x5e,-0x7b)]='用户',_0xe36021[_0x573f5b(0x256,0x38c,0x2f4,0x3b4)]=_0x10dcbf[_0x40fb49(0x99,-0x16,0x1c,-0x61)],_0xe36021[_0x40fb49(0xb9,0x9,0x41,0x37)]=_0x10dcbf[_0x573f5b(0x378,0x3be,0x31a,0x3b1)],_0xe36021[_0x573f5b(0x36f,0x418,0x36d,0x31b)]='工具';const _0x1bc64f=_0xe36021;return _0x1bc64f[_0x29d0e6]||_0x29d0e6;}export function getCurrentLLMProfile(){function _0xcdc997(_0x3628bd,_0xa219f3,_0x163eff,_0xc9f1b9){return _0x44d42a(_0x3628bd-0xa7,_0x163eff- -0xa0,_0xc9f1b9,_0xc9f1b9-0xfb);}const _0x49c8a3=extension_settings[extensionName][_0xcdc997(0x259,0x193,0x197,0x15d)+'es']||{},_0xb3decb=extension_settings[extensionName]['current_ll'+'m_profile'];return _0x49c8a3[_0xb3decb]||_0x49c8a3[Object['keys'](_0x49c8a3)[0x1eaf+0x34*0x13+-0x228b]]||{};}export function getCurrentTestContext(){const _0x30d73d=extension_settings[extensionName][_0x8b5552(0x3fd,0x40d,0x473,0x4a5)+'xt_profile'+'s']||{};function _0x8b5552(_0x75ed78,_0x4ab32a,_0xbf0132,_0x5d61b2){return _0x3aa7d9(_0x75ed78-0x10d,_0x5d61b2,_0xbf0132-0x61,_0x75ed78-0x396);}const _0x451f7c=extension_settings[extensionName]['current_te'+_0x8b5552(0x3b2,0x45c,0x3a8,0x310)+_0x4731fc(0x97,0x78,0x21,0xd5)];function _0x4731fc(_0x2edf40,_0x5c8c5f,_0x561014,_0x1a3b27){return _0x44d42a(_0x2edf40-0xda,_0x561014- -0x21f,_0x2edf40,_0x1a3b27-0xe9);}return _0x30d73d[_0x451f7c]||_0x30d73d[Object[_0x4731fc(0xa2,0xf1,0x75,0x85)](_0x30d73d)[-0x7a7+-0x8*-0x382+-0x1469]]||{};}export function getEffectiveConfigForRequestType(_0x1209b5){const _0x43b0d0=extension_settings[extensionName][_0x57bec8(0x235,0x2e5,0x2e7,0x36f)+'t_type_con'+'figs']||{},_0x5996d9={};_0x5996d9['api_profil'+'e']='默认',_0x5996d9[_0x57bec8(0x2c1,0x29b,0x1fa,0x28f)+_0x57bec8(0x3e6,0x328,0x3dd,0x336)]='默认';const _0x2d1578=_0x43b0d0[_0x1209b5]||_0x5996d9,_0x5007c7=extension_settings[extensionName][_0x57bec8(0x2e9,0x240,0x20a,0x181)+'es']||{},_0x2c40ad=extension_settings[extensionName][_0x433bd5(-0x20e,-0x132,-0x137,-0x1c7)+_0x433bd5(-0x1e0,-0x25d,-0x2c5,-0x1ff)+'s']||{},_0x3764ef=_0x2d1578[_0x433bd5(-0x16c,-0xaf,-0x6d,-0xa8)+'e']||'默认',_0x4d890a=_0x5007c7[_0x3764ef]||_0x5007c7[Object['keys'](_0x5007c7)[0xcd2+0x653+-0x1325]]||{},_0x206b10=_0x2d1578[_0x57bec8(0x221,0x29b,0x229,0x29b)+_0x57bec8(0x34d,0x328,0x2f2,0x395)]||'默认',_0x3b7846=_0x2c40ad[_0x206b10]||_0x2c40ad[Object[_0x57bec8(0x277,0x29d,0x243,0x364)](_0x2c40ad)[0x2*0x368+0x47*0x39+-0x169f]]||{},_0x279f16={};_0x279f16['api_url']=_0x4d890a[_0x433bd5(-0xb6,-0x96,-0xcb,-0x138)]||'',_0x279f16[_0x57bec8(0x27b,0x1b0,0x10b,0x17d)]=_0x4d890a[_0x433bd5(-0x2da,-0x275,-0x2bc,-0x218)]||'',_0x279f16['model']=_0x4d890a[_0x57bec8(0x1e9,0x1ba,0x20a,0x1c4)]||'',_0x279f16[_0x433bd5(-0x1bc,-0x2d5,-0x190,-0x209)+'e']=_0x4d890a['temperatur'+'e']??-0x1*-0xe5+0x1*-0xf17+-0x719*-0x2+0.7,_0x279f16[_0x433bd5(-0x1f7,-0x12b,-0x219,-0x1e8)]=_0x4d890a[_0x57bec8(0x24e,0x1e0,0x131,0x195)]??-0x24f6+-0x4f*-0x28+-0x835*-0x3,_0x279f16[_0x433bd5(-0x57,-0xc1,-0x197,-0xff)]=_0x4d890a['max_tokens']??0x5e1+0x17f*0x8+0x1*-0xfd9,_0x279f16[_0x433bd5(-0x158,-0x12f,-0x1c2,-0x1d1)]=_0x4d890a[_0x433bd5(-0x23a,-0x174,-0x110,-0x1d1)]??![],_0x279f16[_0x57bec8(0x226,0x21b,0x195,0x2cb)+'xy']=_0x4d890a[_0x433bd5(-0xfe,-0x11b,-0x1bd,-0x1ad)+'xy']??![];function _0x433bd5(_0xff66eb,_0xab9d58,_0x25f77d,_0x5cb3ad){return _0x44d42a(_0xff66eb-0x18,_0x5cb3ad- -0x3bf,_0xff66eb,_0x5cb3ad-0x169);}_0x279f16['context']=_0x3b7846;function _0x57bec8(_0x440d83,_0x8431ec,_0x273512,_0x1e69f1){return _0x44d42a(_0x440d83-0x65,_0x8431ec-0x9,_0x1e69f1,_0x1e69f1-0x4f);}return _0x279f16;}export function buildPromptForRequestType(_0x24a458,_0x52a5af=''){const _0x193455={'tjOEb':function(_0x21e3a9,_0x2e35da){return _0x21e3a9(_0x2e35da);},'epSEL':function(_0x3a48c6,_0x341462){return _0x3a48c6!==_0x341462;},'VSmUe':_0x3d1667(0x280,0x1bb,0x279,0x182),'FRGmj':function(_0x13c19e,_0x2f03db){return _0x13c19e===_0x2f03db;},'QpqWP':function(_0x1ceabb,_0x129147){return _0x1ceabb===_0x129147;},'VOurK':_0x3d1667(0x62,0xc0,0x2b,0x8b),'aKBJC':function(_0x3bfdad,_0x149c6e,_0x49cd63){return _0x3bfdad(_0x149c6e,_0x49cd63);},'EaGFB':_0x3d1667(0x11c,0x167,0x13b,0x148),'FxIIY':_0x14a705(0x360,0x256,0x2e9,0x342),'mvoWt':_0x3d1667(0xe4,0xb5,0x47,0x14a)+'orted','vEuOa':_0x3d1667(0x13a,0x15c,0x176,0x130),'ygxUa':function(_0x5c0eef,_0x275cdb){return _0x5c0eef!==_0x275cdb;},'BoYZz':_0x3d1667(0xaf,0x14d,0x19a,0x1c4),'sOgsZ':'user','ltMGN':_0x14a705(0x2d3,0x1ca,0x28d,0x271),'hcwMe':_0x3d1667(0x122,0x150,0x215,0xf2),'obJiR':_0x3d1667(0xdf,0x91,0x99,-0x2b),'JkfOU':function(_0x593feb,_0x2feed0){return _0x593feb(_0x2feed0);},'cMuhe':function(_0x3dd327,_0xb29ecb){return _0x3dd327(_0xb29ecb);}},_0x1af404=extension_settings[extensionName]['llm_reques'+_0x14a705(0x26d,0x1e2,0x286,0x2cf)+'figs']||{},_0x5dd90d={};_0x5dd90d['context_pr'+_0x3d1667(0x1a7,0x207,0x2c7,0x2cb)]='默认';const _0x443804=_0x1af404[_0x24a458]||_0x5dd90d,_0x537129=_0x443804[_0x3d1667(0xea,0x17a,0x137,0xda)+_0x14a705(0x34a,0x37b,0x30d,0x306)]||'默认',_0x3393e4=extension_settings[extensionName][_0x3d1667(0x3a,0xe0,0x69,0x37)+_0x14a705(0x195,0x20e,0x1ae,0x1df)+'s']||{},_0x76a9ce=_0x3393e4[_0x537129]||_0x3393e4[Object[_0x3d1667(0x111,0x17c,0x113,0x121)](_0x3393e4)[-0x65*0x3b+-0x8*-0x34+0x15a7]]||{},_0x58df53=[];if(_0x76a9ce[_0x3d1667(0x12e,0xa9,0x171,0x64)]&&Array[_0x3d1667(0x4c,0x110,0xa6,0x8b)](_0x76a9ce[_0x14a705(0x16b,0x1b9,0x1af,0x25e)]))_0x193455['epSEL'](_0x193455['hcwMe'],_0x3d1667(0x9f,0x150,0x149,0xeb))?_0x193455[_0x14a705(0x1e3,0x269,0x1d9,0x194)](_0x1bea71,_0x3d1667(0x81,0xe2,0x19a,0xbd)+_0x4f20b6+_0x3d1667(0x127,0x11a,0x142,0x12b)):_0x76a9ce[_0x14a705(0x230,0xfe,0x1af,0x147)][_0x3d1667(0x218,0x1d2,0x173,0x21c)](_0x1943e1=>{function _0xdba8f0(_0xca9cd5,_0x52e89b,_0x477ac4,_0x2ecb26){return _0x14a705(_0x477ac4,_0x52e89b-0xb1,_0x2ecb26-0x1c1,_0x2ecb26-0x1ae);}function _0x3eeb61(_0x5cf6ee,_0x10088c,_0x127859,_0x51c919){return _0x14a705(_0x51c919,_0x10088c-0x6,_0x10088c- -0x16d,_0x51c919-0x1a3);}if(_0x193455[_0x3eeb61(0x1a9,0xed,0x94,0x1ae)](_0x193455[_0xdba8f0(0x290,0x413,0x2d3,0x359)],_0x193455['VSmUe']))_0x1a8bc8();else{if(!_0x1943e1[_0x3eeb61(0x1a1,0x161,0x1c0,0x1e6)])return;if(!_0x1943e1[_0xdba8f0(0x31a,0x369,0x3a2,0x344)]||_0x193455[_0xdba8f0(0x2d6,0x417,0x3d2,0x362)](_0x1943e1[_0x3eeb61(-0x6e,0x16,0xda,-0xb4)][_0x3eeb61(0x3a,0x70,0xfb,0x5)](),''))return;if(_0x193455[_0xdba8f0(0x3fe,0x48b,0x555,0x49c)](_0x1943e1[_0xdba8f0(0x540,0x441,0x558,0x4c3)+'e'],_0x193455['VOurK'])){if(!_0x52a5af||!_0x193455[_0xdba8f0(0x54b,0x45c,0x574,0x4a8)](checkTriggerWords,_0x1943e1[_0x3eeb61(0x15f,0x165,0xe0,0x1fb)+'ds'],_0x52a5af))return;}const _0x54c983={};_0x54c983[_0xdba8f0(0x4fa,0x411,0x4e2,0x4a3)]=_0x1943e1[_0xdba8f0(0x564,0x527,0x4b5,0x4a3)]||_0x3eeb61(0x1f3,0x19f,0x160,0x119),_0x54c983[_0x3eeb61(-0x6c,0x16,0x44,-0x7c)]=_0x1943e1['content'],_0x58df53[_0xdba8f0(0x32f,0x3f4,0x365,0x34c)](_0x54c983);}});else _0x76a9ce[_0x3d1667(0x12b,0x16e,0x12c,0x214)]&&Array['isArray'](_0x76a9ce[_0x3d1667(0x12d,0x16e,0xc4,0xd8)])&&(_0x193455[_0x14a705(0x1f0,0x119,0x1a1,0x128)](_0x14a705(0x276,0x2da,0x2c9,0x2fa),_0x193455[_0x14a705(0xd5,0x146,0x194,0x212)])?_0x10d740+='\x20('+_0x1a8106['join'](',\x20')+')':_0x76a9ce[_0x14a705(0x337,0x31a,0x274,0x288)]['forEach'](_0x2d34e9=>{function _0x5c6079(_0x23360b,_0x4e9233,_0x345c17,_0x469746){return _0x3d1667(_0x469746,_0x4e9233-0x2f2,_0x345c17-0x1,_0x469746-0xb0);}function _0x12a3b8(_0x773e18,_0xfe8b3d,_0x31924d,_0x522d6e){return _0x3d1667(_0x773e18,_0x522d6e- -0x10,_0x31924d-0xa9,_0x522d6e-0x47);}if(_0x193455[_0x12a3b8(0x9a,0x52,-0xd,0x9a)]===_0x12a3b8(0x69,0x155,0xfa,0xde)){const _0x233f6f=_0x193455[_0x5c6079(0x401,0x38c,0x365,0x41c)][_0x12a3b8(0x1a4,0x269,0x1f3,0x1d2)]('|');let _0x26481c=0x97*-0x2b+-0x243f+0x3d9c;while(!![]){switch(_0x233f6f[_0x26481c++]){case'0':const _0x54f536={};_0x54f536[_0x5c6079(0x43f,0x47c,0x4a3,0x4b1)]=_0x193455[_0x5c6079(0x40b,0x3b0,0x31f,0x40e)],_0x54f536[_0x5c6079(0x49a,0x46a,0x3a1,0x512)]=_0x193455[_0x12a3b8(0x102,0x65,0x18c,0x113)];const _0x3c02b9={};_0x3c02b9[_0x12a3b8(0x3b,0x133,0x19b,0xec)]=![],_0x3c02b9[_0x5c6079(0x2ef,0x391,0x433,0x379)]=null,_0x3c02b9['id']=_0x45b29b,_0x3c02b9[_0x12a3b8(0x1a4,0x123,0x158,0x1a5)]=_0x54f536,_0x560709[_0x12a3b8(0x19a,0x148,0x116,0x1be)](_0x2f3c98,_0x3c02b9);continue;case'1':_0x2fca4c[_0x12a3b8(0x155,0x102,0x16d,0x10b)+'us'](_0xda80d,_0x5ef377[_0x5c6079(0x438,0x4f4,0x566,0x484)]);continue;case'2':_0xb1fb01[_0x5c6079(0x4f9,0x437,0x3d9,0x37d)](_0x275dd3);continue;case'3':_0x304390=!![];continue;case'4':return;}break;}}else{if(_0x2d34e9[_0x12a3b8(0x265,0x20e,0x149,0x1f6)]&&_0x193455[_0x12a3b8(0x113,0xcb,-0x1f,0x70)](_0x2d34e9[_0x12a3b8(0x13b,0x14f,0x212,0x1f6)][_0x12a3b8(0x12d,0x161,0x81,0xc7)](),'')){if(_0x193455[_0x12a3b8(0x1ee,0x18d,0x1d7,0x144)](_0x12a3b8(0x5a,0x3e,0x40,0xee),_0x193455[_0x5c6079(0x480,0x4a5,0x4f2,0x515)])){const _0x51225e={};_0x51225e[_0x12a3b8(0x164,0x21b,0x117,0x1cc)]=_0x193455[_0x12a3b8(0xea,0x18e,0x9b,0x132)],_0x51225e[_0x5c6079(0x409,0x36f,0x366,0x3ef)]=_0x2d34e9[_0x5c6079(0x49c,0x4f8,0x52a,0x59c)],_0x58df53[_0x5c6079(0x410,0x377,0x362,0x3e6)](_0x51225e);}else _0x8b17d5[_0x5c6079(0x49c,0x45d,0x513,0x4d5)](),_0x24589e['info'](_0x5c6079(0x4c5,0x458,0x3e0,0x3e6));}if(_0x2d34e9[_0x12a3b8(0x13d,0x186,0xf8,0x177)]&&_0x2d34e9['assistant']['trim']()!==''){const _0xe3006f={};_0xe3006f[_0x5c6079(0x49d,0x4ce,0x4e6,0x584)]=_0x193455[_0x5c6079(0x522,0x4c1,0x4cc,0x3f6)],_0xe3006f[_0x12a3b8(-0x47,0x70,0x112,0x6d)]=_0x2d34e9[_0x5c6079(0x515,0x479,0x4c3,0x3e3)],_0x58df53[_0x12a3b8(-0xa,0x114,-0x36,0x75)](_0xe3006f);}}}));function _0x3d1667(_0x267be7,_0xbae381,_0x4c2e1b,_0x6e4927){return _0x44d42a(_0x267be7-0xbe,_0xbae381- -0x118,_0x267be7,_0x6e4927-0x6b);}const _0x56aa50=_0x193455[_0x14a705(0x2a2,0x175,0x210,0x2d7)](mergeAdjacentMessages,_0x58df53),_0x135b70=_0x193455[_0x14a705(0x217,0x1c6,0x218,0x16d)](processRollPlaceholders,_0x56aa50);function _0x14a705(_0x163413,_0x5e251d,_0x5be7df,_0x564c69){return _0x3aa7d9(_0x163413-0x62,_0x163413,_0x5be7df-0xb8,_0x5be7df-0x17f);}return _0x135b70;}const _0x40a52f={};_0x40a52f[_0x3aa7d9(-0x8b,-0x25,0x4c,0x1f)]=_0x44d42a(0x1be,0x21c,0x240,0x206),_0x40a52f['char_desig'+'n']='角色/服装设计',_0x40a52f[_0x44d42a(0x250,0x193,0xef,0x15f)+'ay']='角色/服装展示',_0x40a52f['char_modif'+'y']=_0x44d42a(0x227,0x2a4,0x33f,0x1e9),_0x40a52f[_0x44d42a(0x188,0x21e,0x2ab,0x172)+'n']='翻译',_0x40a52f[_0x3aa7d9(0x96,0x4f,-0x17,0x61)]=_0x3aa7d9(0x105,0xba,0xff,0xd2);const REQUEST_TYPE_NAMES=_0x40a52f;export async function executeTypedLLMRequest(_0x2b6253,_0x5380c7,_0x5527c7,_0x30ef18=null){const _0x2f4a9d={'Iufmk':function(_0xcda5e5,_0x5262f0){return _0xcda5e5===_0x5262f0;},'zuHUY':function(_0x23f491){return _0x23f491();},'drxOr':_0x91f34f(-0x13c,-0x120,-0x1f6,-0x153)+'PI\x20Key,\x20或\x20'+'Model\x20未配置。','LuzIW':_0x91f34f(-0x136,-0x132,-0x12f,-0x8f)+'+$','oQvky':function(_0x361d88,_0x2e9489){return _0x361d88(_0x2e9489);},'IaPph':function(_0x4c015a,_0x120483){return _0x4c015a===_0x120483;},'BaCDR':function(_0x252393){return _0x252393();},'MzqBv':function(_0x42c473,_0x37c501){return _0x42c473(_0x37c501);},'rTtCJ':function(_0x5b1c8d,_0x3e9eab){return _0x5b1c8d(_0x3e9eab);},'khRdm':function(_0x4379f3,_0x35576f){return _0x4379f3!==_0x35576f;},'HVayj':_0x91f34f(-0x173,-0x8c,-0xb2,-0x106),'sYOnh':_0x91f34f(-0xab,-0x1b,-0xc2,-0x98),'PHBwU':function(_0x545179,_0x50a8dc){return _0x545179||_0x50a8dc;},'FcXIK':function(_0x3b4cbe,_0x466b75){return _0x3b4cbe===_0x466b75;},'rxNvF':_0x3c6abf(0x4c3,0x4a3,0x4a5,0x56f),'XyqBa':'ibHdi','HzVdp':_0x3c6abf(0x5ce,0x5bf,0x5f6,0x56a)+_0x91f34f(-0x13e,-0xea,-0x47,-0x109),'RfEnh':function(_0x275956,_0x16c2a8){return _0x275956(_0x16c2a8);},'HdgxO':function(_0x239232,_0x646108){return _0x239232(_0x646108);},'vOSrI':function(_0x43883c,_0x4ca7d3){return _0x43883c(_0x4ca7d3);},'oWHYq':_0x3c6abf(0x533,0x53d,0x5bc,0x522)+_0x3c6abf(0x500,0x592,0x543,0x4d2),'PjGmN':_0x3c6abf(0x4a0,0x51f,0x54f,0x541),'adUlv':function(_0x4061b0,_0x165612){return _0x4061b0+_0x165612;},'MaXpY':_0x3c6abf(0x441,0x446,0x504,0x507)+_0x3c6abf(0x540,0x53d,0x635,0x5ac)+_0x3c6abf(0x411,0x3d8,0x439,0x426)+_0x91f34f(-0x1af,-0x104,-0x1d2,-0x155),'WJtNl':'custom','Pklqe':_0x91f34f(-0x22f,-0x1b0,-0xfd,-0x195),'qnhys':_0x91f34f(-0x19a,-0x24a,-0xf2,-0x184),'KREgf':_0x3c6abf(0x53d,0x505,0x59a,0x516),'tkgBP':'WQZeD','sYqTa':_0x3c6abf(0x4ad,0x474,0x489,0x508),'sNAZU':_0x91f34f(-0x1d2,-0xe3,-0x176,-0x119),'EhuDS':function(_0xc419db,_0x1746c0){return _0xc419db===_0x1746c0;},'jPcKm':_0x91f34f(-0x23d,-0x197,-0x1ad,-0x182),'EDlRk':_0x91f34f(-0x185,-0x74,-0x1af,-0xf9),'DroFj':_0x91f34f(0xd,0x23,-0xc2,-0x9e),'TLZAY':function(_0xd3a57a,_0x54aaca){return _0xd3a57a===_0x54aaca;},'CqAfP':'HsIQD','qdtaj':'PZDWi','pYhSz':_0x3c6abf(0x427,0x525,0x48e,0x48f),'rhNti':function(_0x5914d5,_0x2ee724){return _0x5914d5===_0x2ee724;},'kwIvW':'EhVUl','WPcXi':_0x91f34f(-0x1fe,-0x14e,-0x176,-0x1e9),'drIJt':function(_0x5a86e1,_0x274216){return _0x5a86e1!==_0x274216;},'OQGwp':_0x3c6abf(0x507,0x42f,0x550,0x4b4)+'E]','Jhmfy':_0x91f34f(-0x1cd,-0x96,-0x113,-0x12f),'ExfUK':_0x3c6abf(0x42d,0x3b0,0x3c5,0x460),'fJCBW':function(_0x31b8d6,_0x115a23){return _0x31b8d6!==_0x115a23;},'xbsoR':_0x91f34f(-0x1b9,-0x1bb,-0x1ca,-0x1bb),'DwnSC':'流式解析警告\x20(最后'+_0x91f34f(-0x262,-0x264,-0x22e,-0x206),'HYDRo':_0x3c6abf(0x4f4,0x57c,0x4ee,0x4c7),'WAGaY':'未收到有效回复。','bwGTj':function(_0x34bd96,_0xc7e2bb){return _0x34bd96===_0xc7e2bb;},'zlRQq':'SkVHN','xbjOY':function(_0x32fcb7,_0xb2669c){return _0x32fcb7===_0xb2669c;},'rpGEw':function(_0x2304ea,_0x33cacb){return _0x2304ea!==_0x33cacb;},'eDubH':_0x91f34f(-0x91,-0x53,-0x172,-0x116),'dxGFa':_0x91f34f(-0x14e,-0x55,-0x8c,-0xe9),'pCLZw':function(_0x4602db,_0x3a44e7){return _0x4602db!==_0x3a44e7;},'UZSZp':_0x3c6abf(0x559,0x584,0x47e,0x512),'TQQnc':_0x3c6abf(0x5cd,0x5c3,0x5fb,0x56c),'rFOOR':function(_0x7960db,_0x41e170){return _0x7960db(_0x41e170);},'FFHVw':'AbortError','AoraY':_0x3c6abf(0x581,0x49b,0x4c0,0x54e),'ztuAl':function(_0x17b101,_0x23910f){return _0x17b101===_0x23910f;},'FLBzU':function(_0x256d35,_0x1f8a8c){return _0x256d35===_0x1f8a8c;}},{prompt:_0x70ea2d,id:_0x512cd3}=_0x2b6253;if(_0x2f4a9d[_0x3c6abf(0x5bf,0x5e9,0x4e1,0x544)](!_0x512cd3,!_0x70ea2d))return;currentLLMRequestController&&(_0x2f4a9d[_0x91f34f(-0x18f,-0x19a,-0x135,-0x1aa)](_0x2f4a9d[_0x91f34f(-0x1b1,-0x2aa,-0x1f0,-0x1e0)],_0x2f4a9d[_0x3c6abf(0x519,0x5e7,0x588,0x592)])?(_0x2f4a9d['Iufmk'](_0x516213,_0x2a42c5)&&(_0x1d70cd=null),(!_0x2829d8||_0x2f4a9d['Iufmk'](_0x16941d,null))&&_0x2f4a9d[_0x91f34f(-0xa7,-0x126,-0x94,-0xfd)](_0xa4feb1)):(currentLLMRequestController[_0x91f34f(-0x14d,-0x18a,-0xee,-0x122)](),toastr[_0x3c6abf(0x4f0,0x4a9,0x4c9,0x43e)](_0x2f4a9d['HzVdp'])));currentLLMRequestController=new AbortController();const _0x5c6e3c=currentLLMRequestController[_0x91f34f(-0x17e,-0x1c4,-0x2d4,-0x217)],_0x27f42e=currentLLMRequestController,_0x44f187=REQUEST_TYPE_NAMES[_0x5380c7]||_0x5380c7,_0xc1647f={};function _0x3c6abf(_0x1b0fec,_0x49f86a,_0x48acfb,_0x52bc97){return _0x3aa7d9(_0x1b0fec-0x127,_0x1b0fec,_0x48acfb-0xf5,_0x52bc97-0x42b);}_0xc1647f['name']='LLM:\x20'+_0x44f187,_0xc1647f[_0x3c6abf(0x412,0x3cc,0x508,0x44f)]=TaskType[_0x3c6abf(0x5be,0x505,0x4fb,0x58c)];function _0x91f34f(_0x5801a7,_0x31de8b,_0x2e9b81,_0xb68e4b){return _0x3aa7d9(_0x5801a7-0xb9,_0x31de8b,_0x2e9b81-0x64,_0xb68e4b- -0x214);}_0xc1647f[_0x3c6abf(0x494,0x463,0x48c,0x4ad)]=_0x512cd3;const _0x4b04fd=taskQueue[_0x91f34f(-0xe4,-0xf6,-0x68,-0x133)](_0xc1647f);llmTaskControllers[_0x3c6abf(0x50c,0x4df,0x4b8,0x54d)](_0x4b04fd,currentLLMRequestController),taskQueue[_0x91f34f(-0xe4,-0x229,-0x15e,-0x172)+'us'](_0x4b04fd,TaskStatus[_0x3c6abf(0x570,0x480,0x5b4,0x52b)]),_0x2f4a9d[_0x3c6abf(0x4f0,0x479,0x4ec,0x542)](startFabLoading);let _0x5772e4=![];clearLog(),_0x2f4a9d[_0x3c6abf(0x49b,0x4b0,0x482,0x468)](addLog,_0x91f34f(-0x254,-0x246,-0x22c,-0x21a)+_0x3c6abf(0x4a2,0x555,0x603,0x568)+_0x44f187+_0x3c6abf(0x4d2,0x568,0x517,0x4d0)),addLog('请求\x20ID:\x20'+_0x512cd3),addLog(_0x3c6abf(0x4b7,0x4a3,0x520,0x4f8)+':'),_0x2f4a9d[_0x3c6abf(0x574,0x573,0x533,0x54b)](addLog,_0x2f4a9d[_0x3c6abf(0x489,0x3af,0x4d7,0x43a)](formatPromptForDisplay,_0x70ea2d));const _0x4ecbb0=_0x2f4a9d[_0x91f34f(-0x20d,-0x1ca,-0x241,-0x21e)](getEffectiveConfigForRequestType,_0x5380c7),{api_url:_0x2a3edc,api_key:_0x2e3c7b,model:_0x42e6b2,temperature:_0x40d3b8,top_p:_0x3eb662,max_tokens:_0x26a4a4,stream:_0xa22839,bypass_proxy:_0x4f866b}=_0x4ecbb0;if(_0x2f4a9d[_0x3c6abf(0x5ee,0x607,0x4d1,0x544)](!_0x2a3edc,!_0x2e3c7b)||!_0x42e6b2){const _0x4c8dd9=_0x44f187+(_0x3c6abf(0x53f,0x58f,0x508,0x501)+'\x20API\x20Key,\x20'+_0x91f34f(-0x223,-0xda,-0xe1,-0x19b)+'置。');toastr[_0x91f34f(-0x2a,-0x113,-0xd,-0xd8)](_0x4c8dd9);const _0x555bbf={};_0x555bbf[_0x3c6abf(0x499,0x476,0x56d,0x4ae)]=![],_0x555bbf[_0x3c6abf(0x40c,0x4d6,0x396,0x451)]=_0x4c8dd9,_0x555bbf['id']=_0x512cd3,eventSource[_0x3c6abf(0x4f1,0x624,0x5d1,0x580)](_0x5527c7,_0x555bbf);return;}const _0x502bc2=_0x2a3edc['replace'](/\/$/,'');let _0x987ef,_0x22dc07,_0x3b1316;if(_0x4f866b){_0x987ef=_0x502bc2+(_0x3c6abf(0x607,0x5c6,0x4b5,0x561)+_0x3c6abf(0x504,0x5be,0x4a7,0x4f9));const _0x4d5f5e={};_0x4d5f5e[_0x3c6abf(0x403,0x456,0x426,0x4c5)+'pe']=_0x2f4a9d[_0x3c6abf(0x56c,0x664,0x600,0x5a2)],_0x4d5f5e[_0x3c6abf(0x4a0,0x581,0x5aa,0x553)+_0x3c6abf(0x58d,0x500,0x4fc,0x4dd)]='Bearer\x20'+_0x2e3c7b,_0x22dc07=_0x4d5f5e;const _0x316cf6={};_0x316cf6['model']=_0x42e6b2,_0x316cf6[_0x3c6abf(0x3e9,0x3f9,0x3a6,0x43f)]=_0x70ea2d,_0x316cf6[_0x3c6abf(0x49e,0x4aa,0x39f,0x450)+'e']=_0x40d3b8,_0x316cf6[_0x3c6abf(0x3f7,0x4f0,0x411,0x471)]=_0x3eb662,_0x316cf6[_0x3c6abf(0x4de,0x617,0x4a4,0x55a)]=_0x26a4a4,_0x316cf6[_0x91f34f(-0x282,-0x12f,-0x1e4,-0x1b7)]=_0xa22839,_0x3b1316=_0x316cf6;}else{let _0x4a88a0=_0x502bc2;!_0x4a88a0[_0x3c6abf(0x4d1,0x4c6,0x49d,0x513)](_0x2f4a9d['sYOnh'])&&!_0x4a88a0[_0x3c6abf(0x567,0x51e,0x56f,0x4a5)](_0x2f4a9d[_0x91f34f(0x1b,-0xe5,-0xcf,-0xa9)])&&(_0x4a88a0=_0x2f4a9d[_0x3c6abf(0x48e,0x444,0x3ef,0x461)](_0x4a88a0,'/v1'));_0x4a88a0=_0x4a88a0[_0x3c6abf(0x5ff,0x4cc,0x50e,0x563)](/\/v1\/$/,'/v1'),_0x987ef=_0x2f4a9d['MaXpY'],_0x22dc07=_0x2f4a9d[_0x91f34f(-0x30,-0x96,-0x157,-0xf4)](getRequestHeaders,window[_0x91f34f(-0x102,-0xbf,-0x179,-0xe7)]);const _0x454d9b={};_0x454d9b[_0x3c6abf(0x614,0x60e,0x481,0x54c)+'etion_sour'+'ce']=_0x2f4a9d['WJtNl'],_0x454d9b[_0x91f34f(-0x57,-0x43,-0x8c,-0xa2)]=_0x4a88a0,_0x454d9b['custom_inc'+_0x3c6abf(0x4e8,0x4f2,0x445,0x47a)+'rs']=_0x91f34f(-0x145,-0x154,-0x10e,-0xec)+_0x91f34f(-0xa9,-0x12d,-0x183,-0xef)+_0x3c6abf(0x52d,0x50b,0x3e9,0x4a2)+_0x2e3c7b+'\x22',_0x454d9b[_0x3c6abf(0x4d9,0x49c,0x3c1,0x44b)]=_0x42e6b2,_0x454d9b['messages']=_0x70ea2d,_0x454d9b[_0x91f34f(-0x178,-0x1c7,-0x1b0,-0x1ef)+'e']=_0x40d3b8,_0x454d9b[_0x91f34f(-0x23c,-0x1f7,-0x290,-0x1ce)]=_0x3eb662,_0x454d9b[_0x3c6abf(0x542,0x622,0x4f8,0x55a)]=_0x26a4a4,_0x454d9b['stream']=_0xa22839,_0x3b1316=_0x454d9b;}_0x30ef18&&_0x30ef18(_0x91f34f(-0x1b9,-0x185,-0x17e,-0x1ab)+_0x44f187+_0x91f34f(-0x112,-0xe0,-0xc1,-0x173));try{const _0x5f1360=await fetch(_0x987ef,{'method':_0x91f34f(-0xd0,-0x247,-0x176,-0x188),'headers':_0x22dc07,'body':JSON[_0x3c6abf(0x404,0x426,0x40d,0x4a6)](_0x3b1316),'signal':_0x5c6e3c});if(!_0x5f1360['ok']){if(_0x2f4a9d[_0x3c6abf(0x452,0x485,0x51b,0x4a8)]===_0x2f4a9d[_0x91f34f(-0x1b7,-0x24d,-0x112,-0x197)]){try{const _0x241082=await _0x5f1360['json']();if(_0x241082[_0x3c6abf(0x5ee,0x5e1,0x614,0x567)]){let _0x3aa320;if(_0x2f4a9d[_0x91f34f(-0x1db,-0x245,-0x179,-0x1aa)](typeof _0x241082[_0x91f34f(-0x48,-0x18e,-0x56,-0xd8)],_0x2f4a9d[_0x3c6abf(0x4ad,0x3be,0x3c1,0x46e)])&&_0x241082[_0x91f34f(-0x106,-0x78,-0xf4,-0xd8)][_0x91f34f(-0xf1,-0x16c,-0x18a,-0x115)]){_0x3aa320=''+_0x241082[_0x3c6abf(0x50d,0x58e,0x4b9,0x567)][_0x91f34f(-0x124,-0x144,-0xe5,-0x115)];const _0x257526=[];if(_0x241082[_0x3c6abf(0x5af,0x50f,0x59e,0x567)]['type'])_0x257526[_0x3c6abf(0x3cf,0x3f5,0x3c6,0x437)]('类型:\x20'+_0x241082[_0x3c6abf(0x4d0,0x55c,0x5e1,0x567)]['type']);if(_0x241082[_0x91f34f(-0x42,-0xf6,-0x126,-0xd8)]['code'])_0x257526[_0x3c6abf(0x487,0x3a5,0x439,0x437)](_0x91f34f(-0x149,-0x250,-0x243,-0x1c1)+_0x241082[_0x91f34f(-0x18e,-0x47,-0xef,-0xd8)][_0x3c6abf(0x59c,0x62b,0x639,0x598)]);_0x257526[_0x3c6abf(0x475,0x55a,0x48d,0x53a)]>0x55*-0x3+-0xe83+-0x1*-0xf82&&(_0x3aa320+='\x20('+_0x257526['join'](',\x20')+')');}else{if(_0x2f4a9d[_0x91f34f(-0x197,-0x13b,-0xc2,-0x100)](_0x2f4a9d['KREgf'],_0x2f4a9d[_0x3c6abf(0x59a,0x557,0x608,0x577)]))_0x3aa320=''+JSON[_0x91f34f(-0x244,-0x15e,-0x186,-0x199)](_0x241082['error']);else{const _0x20319b=_0x2f4a9d[_0x3c6abf(0x50e,0x3c8,0x3fd,0x493)];_0x26d9f2[_0x3c6abf(0x4c1,0x523,0x4fd,0x567)](_0x20319b);const _0x496f7d={};_0x496f7d['success']=![],_0x496f7d[_0x91f34f(-0x247,-0x1df,-0x1fa,-0x1ee)]=_0x20319b,_0x496f7d['id']=_0x428c22,_0x160c6a['emit'](_0x49eb75[_0x3c6abf(0x5bd,0x5c0,0x5b7,0x505)+_0x91f34f(-0x135,-0x135,-0x169,-0xae)],_0x496f7d);return;}}throw new Error(_0x3aa320);}}catch(_0x377b55){if(_0x91f34f(-0x1f5,-0x1e8,-0x256,-0x1bd)===_0x2f4a9d['tkgBP']){if(_0x377b55[_0x91f34f(-0x9f,-0x1d5,-0x51,-0x115)][_0x3c6abf(0x4a1,0x46b,0x476,0x4a5)]('类型:')||_0x377b55[_0x3c6abf(0x47e,0x4c1,0x530,0x52a)][_0x3c6abf(0x46f,0x53b,0x4b3,0x4a5)](_0x2f4a9d[_0x91f34f(-0x210,-0x1f9,-0x1e2,-0x180)])){if(_0x2f4a9d['sNAZU']===_0x2f4a9d['sNAZU'])throw _0x377b55;else{const _0x111c7d=_0x15017a['get'](_0x15a38b);_0x111c7d&&(_0x111c7d['abort'](),_0x49df61[_0x91f34f(-0x137,-0x18a,-0x9d,-0x148)](_0x3b8e8c),_0x50cee8[_0x3c6abf(0x466,0x4e1,0x3f3,0x466)](_0x91f34f(-0xcb,-0x202,-0x1e7,-0x13c)+_0x91f34f(-0x10b,-0x137,-0x263,-0x1b1)+_0x2c2ef9));}}}else{if(_0x292dab){const _0x112d55=_0x10d4c9[_0x91f34f(0xa,-0x8f,-0x15b,-0xb2)](_0x117abb,arguments);return _0x24720e=null,_0x112d55;}}}throw new Error(_0x3c6abf(0x596,0x472,0x4d0,0x4e0)+_0x5f1360[_0x3c6abf(0x52b,0x502,0x50f,0x5af)]+'\x20'+_0x5f1360[_0x3c6abf(0x44a,0x4f6,0x4d9,0x4b2)]);}else _0x439c47=''+_0x43bbfd[_0x3c6abf(0x572,0x553,0x413,0x4a6)](_0x4c64ee['error']);}let _0x43b693='';if(_0xa22839){if(_0x2f4a9d[_0x91f34f(-0x1a9,-0x1c9,-0x13d,-0x11b)](_0x2f4a9d[_0x91f34f(-0x289,-0x14e,-0x2a5,-0x215)],_0x2f4a9d[_0x3c6abf(0x4bc,0x4b6,0x458,0x42a)])){const _0x2bc1ec=_0x5f1360[_0x91f34f(-0xb5,-0x12f,-0x174,-0xc0)][_0x91f34f(-0x157,-0x27,-0xb2,-0xeb)](),_0x418021=new TextDecoder(_0x2f4a9d[_0x91f34f(-0xb2,-0xd4,-0x13d,-0x175)]);let _0x5b61b9='';while(!![]){if(_0x2f4a9d[_0x91f34f(-0x186,-0x199,-0x167,-0x11b)](_0x3c6abf(0x5c6,0x4b7,0x582,0x50b),_0x2f4a9d[_0x91f34f(-0x97,-0x163,-0xc9,-0x156)]))return _0x335188['toString']()[_0x3c6abf(0x537,0x4fd,0x5a1,0x4e6)](TtpZpp[_0x3c6abf(0x540,0x495,0x4f4,0x4f1)])[_0x3c6abf(0x582,0x55f,0x585,0x504)]()[_0x91f34f(-0x9f,-0x19f,-0x182,-0x107)+'r'](_0x5ba9a0)[_0x91f34f(-0xaf,-0x168,-0xf3,-0x159)](TtpZpp[_0x3c6abf(0x4e2,0x495,0x4c7,0x4f1)]);else{const {done:_0x3065c6,value:_0x28e886}=await _0x2bc1ec[_0x91f34f(-0x207,-0x1da,-0x229,-0x1c3)]();if(_0x3065c6)break;const _0x5a52c6={};_0x5a52c6[_0x91f34f(-0x25f,-0x270,-0x17a,-0x1b7)]=!![],_0x5b61b9+=_0x418021[_0x91f34f(-0x21b,-0x160,-0x168,-0x16c)](_0x28e886,_0x5a52c6);const _0x41af7c=_0x5b61b9[_0x3c6abf(0x618,0x552,0x652,0x594)]('\x0a');_0x5b61b9=_0x41af7c[_0x91f34f(-0xbc,-0x144,-0x78,-0xf8)]()||'';for(const _0x1e8600 of _0x41af7c){const _0x6492be=_0x1e8600[_0x3c6abf(0x4b1,0x4fa,0x41f,0x489)]();if(!_0x6492be||_0x6492be==='data:\x20[DON'+'E]')continue;if(_0x6492be[_0x91f34f(-0x152,-0x189,-0xf2,-0xf0)](_0x91f34f(-0xad,-0xf0,-0x1b7,-0x12f)))try{const _0x1c3a84=_0x6492be[_0x3c6abf(0x42d,0x461,0x4aa,0x498)](-0x823+-0xcd9+0xa81*0x2),_0x8eeac4=JSON[_0x3c6abf(0x562,0x4a8,0x509,0x4ab)](_0x1c3a84),_0x53a99d=_0x8eeac4[_0x3c6abf(0x4f8,0x5a1,0x548,0x50f)]?.[-0x1be*0x4+-0xb23+0x203*0x9]?.['delta']?.[_0x3c6abf(0x40e,0x3c5,0x42e,0x42f)];_0x53a99d&&(_0x2f4a9d[_0x91f34f(-0xf8,-0x2d,-0x185,-0xe1)](_0x2f4a9d['CqAfP'],_0x2f4a9d[_0x3c6abf(0x518,0x493,0x502,0x491)])?(_0x43b693+=_0x53a99d,_0x30ef18&&(_0x2f4a9d[_0x3c6abf(0x46c,0x469,0x453,0x499)]===_0x2f4a9d['pYhSz']?_0x2f4a9d[_0x3c6abf(0x5b6,0x5ca,0x4b4,0x515)](_0x32a222,_0x3fc56f):_0x2f4a9d['vOSrI'](_0x30ef18,_0x43b693))):(_0x2f4a9d['Iufmk'](_0x1bb4fc,_0x1654a0)&&(_0x23eb41=null),(!_0x10dde8||_0x2f4a9d['IaPph'](_0x1506da,null))&&_0x2f4a9d[_0x91f34f(-0xf4,-0x5d,-0xe7,-0x89)](_0x4d828d)));}catch(_0x20d4f2){_0x2f4a9d[_0x91f34f(-0x99,-0xdc,-0x10b,-0x14a)](_0x2f4a9d[_0x3c6abf(0x46d,0x547,0x456,0x4a3)],_0x2f4a9d[_0x3c6abf(0x3ca,0x44a,0x4d8,0x438)])?(_0x2c9446+=_0x466c96,_0x16c16d&&_0x2f4a9d[_0x3c6abf(0x57a,0x64c,0x64b,0x583)](_0xc0ed28,_0x4d6c27)):console['warn'](_0x91f34f(-0x1b2,-0x27f,-0x14e,-0x1d5),_0x20d4f2[_0x91f34f(-0xf6,-0xcd,-0xfe,-0x115)]);}}}}if(_0x5b61b9[_0x91f34f(-0x1e9,-0x1d9,-0x17e,-0x1b6)]()&&_0x2f4a9d[_0x91f34f(-0x1a1,-0x8e,-0x56,-0x110)](_0x5b61b9['trim'](),_0x2f4a9d['OQGwp'])&&_0x5b61b9['trim']()[_0x3c6abf(0x58f,0x4de,0x52e,0x54f)](_0x2f4a9d[_0x3c6abf(0x602,0x61c,0x637,0x5a3)])){if(_0x2f4a9d['IaPph'](_0x3c6abf(0x482,0x3e5,0x433,0x460),_0x2f4a9d[_0x3c6abf(0x415,0x414,0x544,0x4c9)]))try{const _0x395449=_0x5b61b9[_0x91f34f(-0x166,-0x21a,-0x234,-0x1b6)]()[_0x91f34f(-0x1e8,-0x125,-0x1ec,-0x1a7)](-0x17a4+-0x2521+0x3ccb),_0x4e178d=JSON[_0x3c6abf(0x4e5,0x557,0x49c,0x4ab)](_0x395449),_0x15f7eb=_0x4e178d[_0x91f34f(-0x160,-0xd5,-0x141,-0x130)]?.[-0x1f9b+-0xd*-0x15f+-0x7*-0x1f8]?.[_0x91f34f(-0x20,-0xd2,-0x10,-0x9f)]?.[_0x3c6abf(0x3a4,0x40c,0x4f2,0x42f)];_0x15f7eb&&(_0x43b693+=_0x15f7eb,_0x30ef18&&_0x2f4a9d[_0x91f34f(-0x193,-0x16c,-0x15d,-0x12a)](_0x30ef18,_0x43b693));}catch(_0x3b9f41){_0x2f4a9d[_0x91f34f(-0x2a6,-0x237,-0x248,-0x209)](_0x2f4a9d[_0x3c6abf(0x51a,0x4dc,0x553,0x58f)],_0x91f34f(-0x183,-0x1c0,-0x10f,-0x1bb))?_0x5ad96c=''+_0x1ac14f['stringify'](_0x5a86e3[_0x91f34f(-0x185,-0x15a,-0x196,-0xd8)]):console[_0x3c6abf(0x425,0x534,0x4f0,0x475)](_0x2f4a9d[_0x3c6abf(0x4bc,0x52e,0x462,0x523)],_0x3b9f41[_0x3c6abf(0x5eb,0x583,0x52d,0x52a)]);}else _0x2f4a9d[_0x91f34f(-0x6e,-0xc3,-0x1da,-0x12a)](_0x344ec7,_0x2dfc45);}!_0x43b693&&(_0x2f4a9d[_0x3c6abf(0x48c,0x512,0x448,0x495)]('QRXTS',_0x2f4a9d[_0x91f34f(-0x26c,-0x173,-0x1d8,-0x1a0)])?(_0x43b693=_0x2f4a9d['WAGaY'],toastr['warning'](_0x44f187+(_0x91f34f(-0x16c,-0x1be,-0xc3,-0x10c)+_0x3c6abf(0x4d4,0x43e,0x452,0x433)+_0x91f34f(-0x13b,-0xf3,-0x21c,-0x152)+_0x3c6abf(0x499,0x56e,0x451,0x4c6)+_0x3c6abf(0x3f1,0x49c,0x3db,0x452)))):_0x2f4a9d['rTtCJ'](_0xcaa96a,_0x5dc540));}else return _0x3d4756;}else{const _0x359fb0=await _0x5f1360['json']();if(_0x359fb0[_0x3c6abf(0x5ad,0x520,0x500,0x567)]){if(_0x2f4a9d[_0x3c6abf(0x599,0x514,0x590,0x59b)](_0x3c6abf(0x41f,0x3eb,0x4f6,0x43c),_0x2f4a9d[_0x91f34f(-0x1eb,-0xd5,-0x120,-0x132)])){let _0x24b6e0;if(_0x2f4a9d[_0x91f34f(-0x1bc,-0x1d3,-0xeb,-0x118)](typeof _0x359fb0['error'],_0x3c6abf(0x539,0x475,0x54c,0x4bb))&&_0x359fb0['error'][_0x3c6abf(0x4f5,0x482,0x5d2,0x52a)]){if(_0x2f4a9d[_0x91f34f(-0x10a,-0x1a7,-0x61,-0x108)](_0x2f4a9d[_0x91f34f(-0x155,-0x9c,-0x68,-0xdb)],_0x2f4a9d['dxGFa'])){_0x24b6e0=''+_0x359fb0['error'][_0x3c6abf(0x508,0x5be,0x560,0x52a)];const _0x2380b0=[];if(_0x359fb0[_0x3c6abf(0x57e,0x5f8,0x5ba,0x567)][_0x91f34f(-0x186,-0x217,-0x269,-0x1f0)])_0x2380b0[_0x91f34f(-0x1e6,-0x18e,-0x14e,-0x208)](_0x91f34f(-0x110,-0x134,-0x175,-0x1cc)+_0x359fb0[_0x91f34f(-0x72,-0x190,-0x159,-0xd8)][_0x3c6abf(0x443,0x3bf,0x4b9,0x44f)]);if(_0x359fb0[_0x91f34f(-0x46,-0x90,-0x39,-0xd8)][_0x91f34f(-0x109,-0x7f,-0x7c,-0xa7)])_0x2380b0[_0x3c6abf(0x432,0x391,0x425,0x437)]('代码:\x20'+_0x359fb0[_0x3c6abf(0x4b0,0x5f0,0x4f2,0x567)][_0x91f34f(-0xcd,-0xe2,-0xc0,-0xa7)]);_0x2380b0[_0x91f34f(-0x150,-0xaa,-0x178,-0x105)]>-0x17f3+0xde*-0x5+0x1c49&&(_0x24b6e0+='\x20('+_0x2380b0[_0x91f34f(0x37,-0xf3,0x2a,-0x88)](',\x20')+')');}else{const _0x5935df={'cByii':function(_0x329414,_0x524363){function _0xa4581b(_0xf574f4,_0x5b8d27,_0x29626b,_0x5c0b75){return _0x91f34f(_0xf574f4-0x1df,_0x5b8d27,_0x29626b-0x3f,_0xf574f4-0x2d);}return _0x2f4a9d[_0xa4581b(-0x192,-0x1de,-0x1d3,-0x1aa)](_0x329414,_0x524363);},'GuMhS':_0x3c6abf(0x512,0x5d2,0x5cc,0x5b8),'HCUVY':_0x2f4a9d['HVayj']};_0x4c70d7[_0x91f34f(-0x77,-0x159,-0xb2,-0x11f)][_0x91f34f(-0xdd,-0x71,-0xb7,-0xbb)](_0x7b7110=>{if(_0x7b7110[_0x545729(0x757,0x68f,0x717,0x719)]&&_0x5935df[_0x5eaa81(0x1c5,0x1e3,0x17a,0x1e1)](_0x7b7110[_0x545729(0x729,0x68f,0x5f6,0x639)][_0x545729(0x57c,0x560,0x55a,0x56f)](),'')){const _0x28eb60={};_0x28eb60['role']=_0x5935df[_0x545729(0x609,0x61a,0x6cc,0x699)],_0x28eb60[_0x5eaa81(0x16e,0x194,0xdf,0x201)]=_0x7b7110[_0x5eaa81(0x2f7,0x3b9,0x26e,0x330)],_0x3f8564[_0x5eaa81(0x176,0x12d,0xcd,0x1eb)](_0x28eb60);}function _0x545729(_0x48ac5a,_0x1f9429,_0x327be9,_0x1eb6e6){return _0x3c6abf(_0x1eb6e6,_0x1f9429-0x1c3,_0x327be9-0x107,_0x1f9429-0xd7);}function _0x5eaa81(_0x1eb2ff,_0x5dd7f6,_0x1b90a,_0x31df69){return _0x91f34f(_0x1eb2ff-0x104,_0x5dd7f6,_0x1b90a-0x115,_0x1eb2ff-0x37e);}if(_0x7b7110[_0x545729(0x637,0x610,0x630,0x65a)]&&_0x5935df[_0x545729(0x4bb,0x55d,0x51e,0x507)](_0x7b7110[_0x5eaa81(0x278,0x235,0x23f,0x2ad)][_0x545729(0x5ad,0x560,0x5ef,0x5f0)](),'')){const _0x1b233b={};_0x1b233b[_0x5eaa81(0x2cd,0x239,0x2ad,0x34a)]=_0x5935df[_0x5eaa81(0x174,0xeb,0x1b3,0x165)],_0x1b233b[_0x5eaa81(0x16e,0x105,0xd1,0x17e)]=_0x7b7110[_0x545729(0x646,0x610,0x586,0x5bc)],_0x36cd33[_0x545729(0x474,0x50e,0x56d,0x53a)](_0x1b233b);}});}}else _0x24b6e0=''+JSON[_0x3c6abf(0x461,0x44f,0x4eb,0x4a6)](_0x359fb0['error']);throw new Error(_0x24b6e0);}else _0xb314c=_0x371203;}_0x43b693=_0x359fb0[_0x3c6abf(0x566,0x44d,0x575,0x50f)]?.[-0x5e5+-0xb*-0x309+-0x1b7e]?.['message']?.[_0x3c6abf(0x3bd,0x485,0x3e1,0x42f)]||'',!_0x43b693&&(_0x2f4a9d[_0x3c6abf(0x3f6,0x54e,0x44f,0x49a)](_0x2f4a9d[_0x3c6abf(0x57a,0x469,0x522,0x4de)],_0x2f4a9d[_0x3c6abf(0x3c1,0x3a4,0x380,0x430)])?(_0x43b693=_0x2f4a9d['WAGaY'],toastr['warning'](_0x44f187+(_0x3c6abf(0x57e,0x4d7,0x562,0x533)+_0x3c6abf(0x47d,0x474,0x4d7,0x433)+'断、max_toke'+_0x3c6abf(0x456,0x404,0x503,0x4c6)+_0x3c6abf(0x3c8,0x483,0x4ed,0x452)))):(_0x36ad91[_0x3c6abf(0x576,0x451,0x551,0x51d)](),_0x1cc55f[_0x91f34f(-0x18b,-0x1dd,-0x1ff,-0x148)](_0x3d175b),_0x8b93e7[_0x91f34f(-0x200,-0x210,-0x24d,-0x1d9)](_0x91f34f(-0x11a,-0x170,-0x12f,-0x13c)+_0x3c6abf(0x536,0x47e,0x43d,0x48e)+_0x2b3de7))),_0x30ef18&&_0x2f4a9d[_0x3c6abf(0x4db,0x4dd,0x46c,0x515)](_0x30ef18,_0x43b693);}_0x2f4a9d[_0x91f34f(-0x29b,-0x2ce,-0x16d,-0x205)](addLog,_0x3c6abf(0x45e,0x496,0x4e2,0x4f6)+_0x3c6abf(0x504,0x5eb,0x5d3,0x53d)),addLog(_0x43b693),_0x2f4a9d[_0x91f34f(-0x27c,-0x176,-0x274,-0x1da)](addLog,'=====\x20LLM\x20'+_0x3c6abf(0x4a5,0x4ed,0x391,0x445)),taskQueue[_0x91f34f(-0xef,-0x51,-0x125,-0xfa)+'sk'](_0x4b04fd,!![]),llmTaskControllers[_0x3c6abf(0x432,0x5af,0x4b7,0x4f7)](_0x4b04fd);const _0x20646b={};_0x20646b['success']=!![],_0x20646b[_0x3c6abf(0x489,0x4d7,0x3d9,0x451)]=_0x43b693,_0x20646b['id']=_0x512cd3,_0x20646b[_0x91f34f(-0x4b,-0x54,-0x53,-0xc6)]=![],eventSource[_0x3c6abf(0x5a8,0x4cf,0x5b8,0x580)](_0x5527c7,_0x20646b);}catch(_0x19b021){if(_0x2f4a9d[_0x91f34f(-0x121,-0x124,-0x237,-0x1aa)](_0x19b021['name'],'AbortError')){_0x5772e4=!![],taskQueue[_0x3c6abf(0x4f3,0x44b,0x4af,0x4cd)+'us'](_0x4b04fd,TaskStatus['CANCELLED']),llmTaskControllers[_0x91f34f(-0x11d,-0x212,-0x1a3,-0x148)](_0x4b04fd);const _0x448b44={};_0x448b44[_0x91f34f(-0x81,-0xfe,-0x152,-0x103)]=_0x2f4a9d[_0x3c6abf(0x498,0x5be,0x509,0x51b)],_0x448b44['message']='Request\x20ab'+'orted';const _0x3050be={};_0x3050be[_0x3c6abf(0x55b,0x49d,0x420,0x4ae)]=![],_0x3050be[_0x91f34f(-0x1ab,-0x1bb,-0x266,-0x1ee)]=null,_0x3050be['id']=_0x512cd3,_0x3050be[_0x3c6abf(0x522,0x4dd,0x578,0x567)]=_0x448b44,eventSource[_0x91f34f(-0x116,-0x17,-0x4b,-0xbf)](_0x5527c7,_0x3050be);return;}console[_0x91f34f(-0x194,-0x38,-0x17f,-0xd8)](_0x44f187+_0x91f34f(-0x218,-0x1a4,-0xd8,-0x167),_0x19b021);const _0x8709a1='请求错误:\x20'+_0x19b021['message'];_0x30ef18&&(_0x2f4a9d[_0x91f34f(-0x1fb,-0x1b7,-0x282,-0x209)](_0x2f4a9d['AoraY'],_0x2f4a9d['AoraY'])?_0x45077f=_0x49a945+_0x2f4a9d[_0x91f34f(-0x297,-0x285,-0x289,-0x214)]:_0x30ef18(_0x8709a1));toastr['error'](_0x19b021[_0x91f34f(-0x1a7,-0x1b5,-0x8f,-0x115)]),taskQueue[_0x91f34f(-0x105,-0x1a5,-0x11e,-0xfa)+'sk'](_0x4b04fd,![]),llmTaskControllers[_0x3c6abf(0x4e2,0x42c,0x546,0x4f7)](_0x4b04fd);const _0x5b768b={};_0x5b768b[_0x3c6abf(0x45a,0x564,0x4dd,0x4ae)]=![],_0x5b768b[_0x3c6abf(0x432,0x4d9,0x439,0x451)]=_0x8709a1,_0x5b768b['id']=_0x512cd3,eventSource[_0x91f34f(-0x69,-0x13d,-0xac,-0xbf)](_0x5527c7,_0x5b768b);}finally{_0x2f4a9d['ztuAl'](currentLLMRequestController,_0x27f42e)&&(currentLLMRequestController=null),(!_0x5772e4||_0x2f4a9d[_0x3c6abf(0x487,0x48e,0x4a5,0x4a1)](currentLLMRequestController,null))&&stopFabLoading();}}function _0x3aa7d9(_0x1372a7,_0x565b85,_0x567fbd,_0x1bb58d){return _0x2dcc(_0x1bb58d- -0x15d,_0x565b85);}export async function executeDefaultLLMRequest(_0x1b0bdf,_0x50c488,_0x2e9bcf=null){const _0x12ed53={'XuEcm':_0x469efc(0x28,0x13,0x9b,0x105),'FFEgZ':function(_0xe6c16,_0x263519){return _0xe6c16/_0x263519;},'vXOFw':function(_0x4c3775,_0x39347a){return _0x4c3775/_0x39347a;},'fIWGd':function(_0x17d017,_0x4aa9e7){return _0x17d017>_0x4aa9e7;},'BIiRe':function(_0x5863b1,_0x124704){return _0x5863b1||_0x124704;},'RiRCC':_0x59063f(0x4fa,0x4d3,0x566,0x581)+_0x469efc(-0x66,0xdf,0x32,0xe1),'fSjwe':_0x469efc(0x18,-0x11b,-0x79,-0x11f),'EOQer':function(_0x3899a0){return _0x3899a0();},'wHavh':function(_0x44c81a,_0x1db21b){return _0x44c81a(_0x1db21b);},'dKdpN':_0x59063f(0x49a,0x40e,0x44e,0x3f0),'CsPvI':_0x469efc(0xdd,-0x83,0x1e,-0x89)+_0x469efc(-0x25,-0x56,-0x32,-0xf2),'uwSjy':function(_0x28508c,_0x32b38b){return _0x28508c??_0x32b38b;},'yRdPT':'/v1','JPOeI':_0x59063f(0x4d1,0x455,0x4d9,0x409),'JZkLr':_0x469efc(-0x9e,0xa6,0x3,0xc3)+_0x469efc(0x13d,0xda,0xa8,0x46)+_0x59063f(0x3b6,0x342,0x37e,0x41d)+_0x59063f(0x47a,0x40d,0x3dd,0x435),'AeoyU':'custom','DlFKw':function(_0x449d8a,_0x3fb192){return _0x449d8a===_0x3fb192;},'KNidw':_0x59063f(0x441,0x455,0x3ed,0x4e4),'gwPjG':function(_0x261627,_0x2cfed1){return _0x261627(_0x2cfed1);},'pPbHv':_0x59063f(0x3b4,0x44b,0x33c,0x302)+_0x59063f(0x413,0x456,0x4c3,0x434),'GfDVv':function(_0x32bca5,_0x2e26ef){return _0x32bca5!==_0x2e26ef;},'MgtMB':_0x59063f(0x529,0x562,0x572,0x485),'sqRPa':_0x469efc(-0x117,-0x94,-0x4d,-0x68),'OeFtg':_0x59063f(0x504,0x4fe,0x4a1,0x52e),'WmUrv':'bZrIJ','sRMKK':function(_0x4b0d6e,_0x885c41){return _0x4b0d6e===_0x885c41;},'Jeeej':_0x59063f(0x42e,0x3b0,0x4e4,0x4f4),'bJaiL':_0x469efc(-0xe0,0x89,-0x23,0x3b),'NsqPI':function(_0x2a44a4,_0x42883e){return _0x2a44a4>_0x42883e;},'UnecO':_0x59063f(0x545,0x4ec,0x4d4,0x5b9),'iWSHf':'vRQjM','WhOXb':function(_0x4e19ed,_0x531cd2){return _0x4e19ed(_0x531cd2);},'fFkWW':function(_0x48e512,_0x494938){return _0x48e512(_0x494938);},'KaxFX':function(_0x2e2895,_0x8099ae){return _0x2e2895(_0x8099ae);},'TQRlS':_0x469efc(-0x3c,0xc,-0xb6,-0x120),'pXdjY':'JBNsU','RNRmo':_0x59063f(0x525,0x5f2,0x492,0x5de),'cvltO':_0x59063f(0x3be,0x481,0x469,0x3c7)+'e\x20request\x20'+_0x59063f(0x474,0x4df,0x4d8,0x475),'tznkk':_0x469efc(-0x3c,-0x14f,-0x9d,-0x141)+'orted','KIOho':function(_0x5c1b32,_0xdadbed){return _0x5c1b32(_0xdadbed);},'OayZS':function(_0x3f0f22,_0x132ceb){return _0x3f0f22===_0x132ceb;},'hViNN':function(_0x3b88e9,_0x410700){return _0x3b88e9===_0x410700;},'vngAW':'hOINY'},{prompt:_0x543d54,id:_0x2b1bd4}=_0x1b0bdf;if(_0x12ed53[_0x59063f(0x3f2,0x3af,0x364,0x3f8)](!_0x2b1bd4,!_0x543d54))return;currentLLMRequestController&&(currentLLMRequestController['abort'](),toastr[_0x59063f(0x3ce,0x377,0x33d,0x32f)](_0x12ed53[_0x59063f(0x4d0,0x58c,0x4f3,0x4b5)]));currentLLMRequestController=new AbortController();const _0xf93d76=currentLLMRequestController[_0x469efc(-0x14,-0x12a,-0xdc,-0x18e)],_0x29df44=currentLLMRequestController,_0x585324={};_0x585324[_0x469efc(0x6f,0x24,0x38,0xf4)]=_0x12ed53[_0x59063f(0x4d8,0x509,0x42c,0x432)],_0x585324[_0x469efc(-0x142,-0x135,-0xb5,-0xa4)]=TaskType[_0x59063f(0x51c,0x51d,0x4aa,0x495)],_0x585324[_0x469efc(-0x2a,-0x7e,-0x57,0x3a)]=_0x2b1bd4;const _0xbf9dee=taskQueue[_0x59063f(0x49c,0x426,0x4ba,0x418)](_0x585324);llmTaskControllers[_0x469efc(0xcd,0xd4,0x49,-0x1)](_0xbf9dee,currentLLMRequestController),taskQueue[_0x59063f(0x45d,0x3d3,0x41c,0x523)+'us'](_0xbf9dee,TaskStatus[_0x469efc(-0x9b,0x54,0x27,0x5)]),_0x12ed53[_0x469efc(0x5,-0x15,-0x7a,-0xa3)](startFabLoading);function _0x469efc(_0x2c43fb,_0x325025,_0x1fbf9b,_0x1fef17){return _0x3aa7d9(_0x2c43fb-0x70,_0x1fef17,_0x1fbf9b-0x67,_0x1fbf9b- -0xd9);}let _0x10a152=![];_0x12ed53[_0x469efc(-0xcb,-0x112,-0x7a,-0x143)](clearLog),_0x12ed53[_0x469efc(-0xe5,-0x121,-0x83,-0x72)](addLog,'=====\x20LLM\x20'+'默认请求开始\x20==='+'=='),addLog(_0x469efc(0x68,0x8c,-0x36,-0x4)+_0x2b1bd4),addLog(_0x59063f(0x488,0x436,0x40e,0x402)+':'),_0x12ed53['wHavh'](addLog,_0x12ed53['wHavh'](formatPromptForDisplay,_0x543d54));const {api_url:_0x18ce64,api_key:_0x24ffa0,model:_0x304e08,temperature:_0x2595d2,top_p:_0x49406c,max_tokens:_0x19db22,stream:_0x1559ff,bypass_proxy:_0x4db172}=_0x50c488;function _0x59063f(_0x1e5960,_0x233300,_0x1121ba,_0x287dff){return _0x44d42a(_0x1e5960-0x28,_0x1e5960-0x22a,_0x233300,_0x287dff-0x26);}if(!_0x18ce64||!_0x24ffa0||!_0x304e08){const _0xb1cd91='API\x20URL,\x20A'+_0x469efc(0x25,-0x5d,-0x95,-0x63)+_0x59063f(0x4ac,0x469,0x55d,0x4fb);toastr[_0x59063f(0x4f7,0x4d6,0x54e,0x4b5)](_0xb1cd91);const _0x355c4f={};_0x355c4f[_0x59063f(0x43e,0x50b,0x430,0x4ab)]=![],_0x355c4f[_0x469efc(-0xe1,-0x7,-0xb3,-0x15b)]=_0xb1cd91,_0x355c4f['id']=_0x2b1bd4,eventSource[_0x59063f(0x510,0x5a1,0x50d,0x4a9)](eventNames[_0x59063f(0x495,0x440,0x49b,0x4e6)+'E_RESPONSE'],_0x355c4f);return;}const _0x4c6e1d=_0x18ce64['replace'](/\/$/,'');let _0x4a9a30,_0x522004,_0x4bdfac;if(_0x4db172){if(_0x12ed53[_0x469efc(0x8a,0xd0,0x24,0xe6)]===_0x12ed53[_0x59063f(0x4b8,0x55a,0x55d,0x56d)]){_0x4a9a30=_0x4c6e1d+('/chat/comp'+_0x59063f(0x489,0x4b5,0x4a9,0x3e5));const _0x2d7086={};_0x2d7086[_0x59063f(0x455,0x3a8,0x468,0x421)+'pe']=_0x12ed53['CsPvI'],_0x2d7086['Authorizat'+_0x59063f(0x46d,0x4fd,0x50b,0x489)]=_0x59063f(0x4af,0x3e7,0x466,0x438)+_0x24ffa0,_0x522004=_0x2d7086,_0x4bdfac={'model':_0x304e08,'messages':_0x543d54,'temperature':_0x2595d2,'top_p':_0x49406c,'max_tokens':_0x19db22,'stream':_0x12ed53['uwSjy'](_0x1559ff,![])};}else{const _0x3c79c4=_0x5bcbf5+(_0x469efc(0x9,-0x87,-0x3,0x80)+_0x59063f(0x466,0x40f,0x47a,0x505)+_0x469efc(-0xf2,-0x14,-0x60,0x27)+'置。');_0x50d7f5[_0x59063f(0x4f7,0x581,0x4ac,0x4ec)](_0x3c79c4);const _0x41e0e2={};_0x41e0e2[_0x59063f(0x43e,0x4c5,0x505,0x4d8)]=![],_0x41e0e2['result']=_0x3c79c4,_0x41e0e2['id']=_0x218712,_0x1b7ed1['emit'](_0x33b3aa,_0x41e0e2);return;}}else{let _0x488f53=_0x4c6e1d;!_0x488f53['endsWith'](_0x12ed53['yRdPT'])&&!_0x488f53[_0x59063f(0x435,0x3ec,0x414,0x3ca)](_0x12ed53[_0x469efc(-0xa8,0x39,-0x19,0x48)])&&(_0x488f53=_0x488f53+_0x12ed53[_0x59063f(0x51b,0x53b,0x544,0x471)]);_0x488f53=_0x488f53[_0x469efc(0x74,-0x19,0x5f,0x8c)](/\/v1\/$/,_0x12ed53['yRdPT']),_0x4a9a30=_0x12ed53['JZkLr'],_0x522004=_0x12ed53[_0x469efc(-0xab,-0xed,-0x83,-0x78)](getRequestHeaders,window[_0x59063f(0x4e8,0x551,0x4be,0x526)]);const _0x19560a={};_0x19560a[_0x469efc(-0x83,-0x84,0x48,0xd)+_0x59063f(0x543,0x53e,0x4d1,0x5c2)+'ce']=_0x12ed53[_0x59063f(0x535,0x5f4,0x4dc,0x4ed)],_0x19560a[_0x469efc(0xf9,0x10e,0x99,0x68)]=_0x488f53,_0x19560a[_0x59063f(0x53a,0x523,0x5d7,0x546)+_0x469efc(-0x1,-0x139,-0x8a,-0x1b)+'rs']=_0x469efc(-0x48,-0x4b,0x4f,0x115)+_0x469efc(0x8b,0x6a,0x4c,0x111)+_0x469efc(-0xb4,0x16,-0x62,-0x10c)+_0x24ffa0+'\x22',_0x19560a[_0x59063f(0x3db,0x357,0x48b,0x35a)]=_0x304e08,_0x19560a[_0x59063f(0x3cf,0x32d,0x38c,0x470)]=_0x543d54,_0x19560a['temperatur'+'e']=_0x2595d2,_0x19560a[_0x469efc(-0x32,-0x78,-0x93,-0xee)]=_0x49406c,_0x19560a['max_tokens']=_0x19db22,_0x19560a[_0x59063f(0x418,0x3e1,0x393,0x3b2)]=![],_0x4bdfac=_0x19560a;}_0x2e9bcf&&(_0x12ed53[_0x59063f(0x4cb,0x58f,0x437,0x452)](_0x12ed53[_0x469efc(0x100,0x6d,0xa9,0x8d)],_0x12ed53[_0x59063f(0x53d,0x606,0x5bc,0x53b)])?_0x12ed53[_0x469efc(-0x11d,-0x4b,-0x87,0x0)](_0x2e9bcf,_0x12ed53['pPbHv']):_0x263395[_0x469efc(-0x15d,-0xf1,-0xcd,-0x82)](_0x71291e[_0x59063f(0x404,0x400,0x405,0x3e8)]||''));try{if(_0x12ed53['GfDVv'](_0x469efc(0x12a,-0x9,0x95,0xb8),_0x12ed53[_0x59063f(0x4eb,0x4ad,0x4e1,0x4ad)])){const _0x5d2c27=_0x185edb[_0x59063f(0x3b3,0x318,0x39e,0x384)](/^data:([^;]+);/),_0x1a80e5=_0x5d2c27?_0x5d2c27[-0x1*-0x125+0x2028+-0x214c]:_0x12ed53['XuEcm'],_0x594eb9=_0x34bbe8[_0x59063f(0x524,0x5ee,0x5ea,0x51b)](',')[0x7*-0xc+0x1be*0x16+-0x47*0x89]||'',_0x428809=_0x5b7f15['round'](_0x12ed53['FFEgZ'](_0x12ed53['FFEgZ'](_0x594eb9[_0x469efc(-0x74,-0xd,0x36,0xa)]*(0xd*-0x61+0xaf7*-0x1+0x54d*0x3),-0x51*0x5d+-0xe55+-0xd*-0x35e),-0x187*0x17+-0x2*-0x81+0x261f));_0x391a65[_0x59063f(0x3c7,0x469,0x381,0x3a8)](_0x469efc(-0xb5,-0x76,-0x68,0x2b)+':\x20'+_0x1a80e5+_0x59063f(0x44e,0x4c3,0x3a5,0x3e2)+_0x428809+_0x469efc(-0x67,-0x4e,-0x11,-0x3));}else{const _0x4c4305=await fetch(_0x4a9a30,{'method':_0x12ed53[_0x59063f(0x48b,0x45c,0x4bc,0x3e3)],'headers':_0x522004,'body':JSON[_0x469efc(-0x7c,-0x4f,-0x5e,0x4)](_0x4bdfac),'signal':_0xf93d76}),_0x4693af=await _0x4c4305[_0x469efc(0x39,0xcd,0x84,0x78)]();if(_0x4693af[_0x469efc(0x3e,0x50,0x63,0x73)]){if(_0x12ed53[_0x59063f(0x4cb,0x524,0x404,0x532)](_0x12ed53[_0x469efc(0x5f,0xb9,0x51,-0x8)],_0x12ed53[_0x469efc(-0x15b,0x14,-0xb0,-0x4a)])){const _0x2818c8=_0x3d4a75[_0x469efc(-0x76,0x12,-0x7b,-0x90)]()['slice'](-0x1*-0x1085+0x16c4+-0x2743),_0x2108a8=_0x23543c['parse'](_0x2818c8),_0x2b5502=_0x2108a8[_0x59063f(0x49f,0x4d4,0x530,0x50f)]?.[-0x208+0x17af+0xf1*-0x17]?.['delta']?.[_0x469efc(-0x142,-0x161,-0xd5,-0x193)];_0x2b5502&&(_0x54e73c+=_0x2b5502,_0x52b19f&&_0x3e7a7f(_0x49fa91));}else{let _0x5bf39e;if(_0x12ed53[_0x59063f(0x40f,0x35d,0x3e0,0x3a3)](typeof _0x4693af[_0x469efc(0x4,0x4b,0x63,0x7e)],_0x59063f(0x44b,0x3c0,0x47d,0x484))&&_0x4693af['error'][_0x469efc(0x69,-0x31,0x26,0x57)]){if(_0x12ed53['GfDVv'](_0x12ed53[_0x469efc(-0xa4,0x4,0x10,-0x9a)],_0x12ed53[_0x59063f(0x4a1,0x536,0x49f,0x531)])){_0x5bf39e=''+_0x4693af['error'][_0x59063f(0x4ba,0x40e,0x46e,0x44d)];const _0x4f4d0a=[];if(_0x4693af[_0x59063f(0x4f7,0x4a6,0x5b1,0x56d)]['type'])_0x4f4d0a[_0x469efc(-0xcf,-0x152,-0xcd,-0x8f)](_0x469efc(-0x144,-0x69,-0x91,-0xf2)+_0x4693af[_0x469efc(0x32,0x14,0x63,-0x19)][_0x469efc(-0xfd,-0xe9,-0xb5,-0x4b)]);if(_0x4693af[_0x469efc(0xd5,0xf2,0x63,0x29)][_0x59063f(0x528,0x507,0x523,0x4d7)])_0x4f4d0a[_0x469efc(-0x11c,-0x133,-0xcd,-0x7)](_0x59063f(0x40e,0x3ee,0x4bb,0x3cb)+_0x4693af['error'][_0x469efc(0x96,0x131,0x94,0x13c)]);if(_0x12ed53[_0x469efc(-0xef,-0xf5,-0xc7,-0x183)](_0x4f4d0a[_0x59063f(0x4ca,0x47f,0x43c,0x4d3)],-0x7b4+-0x1*-0x1459+0x437*-0x3)){if(_0x12ed53[_0x59063f(0x4e2,0x54a,0x471,0x4c5)]!==_0x12ed53[_0x469efc(-0xf1,-0x12b,-0x98,0x2d)])_0x5bf39e+='\x20('+_0x4f4d0a[_0x469efc(0xe8,0xfa,0xb3,0x8c)](',\x20')+')';else{const _0x309dcf=_0x3f515d['image_url']?.[_0x469efc(0x29,-0x55,-0x39,-0x19)]||'';if(_0x309dcf[_0x59063f(0x4df,0x4b4,0x49b,0x44b)](_0x469efc(0xb8,-0x5,0x21,-0x3a))){const _0x18c5e7=_0x309dcf['match'](/^data:([^;]+);/),_0x3a6271=_0x18c5e7?_0x18c5e7[0x26e9*0x1+0x1ecf+-0x45b7]:_0x12ed53[_0x59063f(0x472,0x53e,0x529,0x4ee)],_0xb9bb31=_0x309dcf['split'](',')[0x9d*0xd+0x105b+-0x1853]||'',_0x58bd46=_0x3ee708[_0x469efc(0x5a,0x66,0x58,0x116)](_0x12ed53[_0x469efc(0x115,0x9f,0x4d,0xf2)](_0xb9bb31[_0x469efc(0x78,0x97,0x36,-0x4e)]*(0x2327+-0xdd7+-0x154d),-0x19aa*0x1+-0x725+-0x3*-0xaf1)/(-0x1*-0xc31+0x1ff0+0x2821*-0x1));_0x2b0b53[_0x469efc(-0xf2,-0x13f,-0xcd,-0x17b)](_0x59063f(0x42c,0x393,0x3a8,0x46a)+':\x20'+_0x3a6271+_0x469efc(-0x1e,-0x6d,-0x46,-0x33)+_0x58bd46+_0x59063f(0x483,0x532,0x4ca,0x459));}else _0x5dec10['push'](_0x469efc(-0x27,-0x48,-0x14,0x3b)+_0x309dcf+']');}}}else{_0x43e116=''+_0x2251b5[_0x469efc(0x11f,0xf4,0x63,0x30)][_0x469efc(-0x35,-0x4a,0x26,0xda)];const _0x371714=[];if(_0x271594[_0x59063f(0x4f7,0x469,0x44a,0x54e)][_0x59063f(0x3df,0x39f,0x405,0x39b)])_0x371714[_0x469efc(-0x133,-0x6e,-0xcd,-0x17e)](_0x59063f(0x403,0x3fe,0x392,0x4c1)+_0x2cda2f['error'][_0x59063f(0x3df,0x44e,0x384,0x362)]);if(_0x3d89ef[_0x59063f(0x4f7,0x471,0x467,0x4ea)][_0x469efc(0xab,0x2f,0x94,-0x1f)])_0x371714[_0x59063f(0x3c7,0x43b,0x451,0x377)](_0x469efc(-0x24,-0xc9,-0x86,-0xa0)+_0x3af777[_0x59063f(0x4f7,0x47b,0x581,0x4bf)][_0x469efc(0xea,0x121,0x94,0x67)]);_0x12ed53[_0x469efc(-0xa8,-0xcc,-0x8d,-0x46)](_0x371714['length'],0x4d8*-0x1+-0x1*0x20ab+0x2583)&&(_0x49cd85+='\x20('+_0x371714[_0x59063f(0x547,0x568,0x587,0x4ad)](',\x20')+')');}}else _0x5bf39e=''+JSON[_0x59063f(0x436,0x40d,0x4ad,0x433)](_0x4693af[_0x469efc(0x6f,-0x10,0x63,-0x41)]);throw new Error(_0x5bf39e);}}if(!_0x4c4305['ok'])throw new Error(_0x59063f(0x470,0x3de,0x433,0x4e7)+_0x4c4305['status']+'\x20'+_0x4c4305['statusText']);const _0x1bd513=_0x4693af[_0x469efc(0x93,0xc9,0xb,-0xa2)]?.[0x16ae*0x1+-0x2019+0x96b]?.[_0x59063f(0x4ba,0x585,0x53f,0x413)]?.[_0x469efc(-0x142,-0x174,-0xd5,-0x15c)]||'';!_0x1bd513&&toastr[_0x59063f(0x3fd,0x3fc,0x42d,0x349)]('LLM\x20请求返回为空'+_0x59063f(0x3d8,0x486,0x465,0x337)+_0x469efc(0x10,0x7f,0x56,0xb0)+'\x20设置过小、或\x20AP'+_0x469efc(-0x26,-0x5d,0x59,0x44));_0x2e9bcf&&_0x12ed53[_0x469efc(0x49,0x66,-0x4b,-0xe4)](_0x2e9bcf,_0x1bd513);_0x12ed53[_0x469efc(-0x5c,0x73,0x16,0x8b)](addLog,_0x469efc(-0xc6,-0xa8,-0xe,0xbc)+'\x20回复\x20-----'),_0x12ed53[_0x59063f(0x40d,0x3b8,0x48f,0x4c5)](addLog,_0x1bd513),_0x12ed53[_0x59063f(0x408,0x453,0x387,0x40f)](addLog,_0x469efc(-0xa6,-0xb3,-0xdf,-0x1a)+'请求完成\x20====='),taskQueue[_0x469efc(-0x13,0xdc,0x41,-0x2b)+'sk'](_0xbf9dee,!![]),llmTaskControllers[_0x59063f(0x487,0x48a,0x530,0x3d2)](_0xbf9dee);const _0x9714dc={};_0x9714dc[_0x469efc(-0x75,0x50,-0x56,-0xe8)]=!![],_0x9714dc[_0x469efc(-0x44,-0x15b,-0xb3,-0x38)]=_0x1bd513,_0x9714dc['id']=_0x2b1bd4,eventSource[_0x59063f(0x510,0x490,0x58a,0x5a7)](eventNames[_0x469efc(0x50,-0x98,0x1,0xc8)+'E_RESPONSE'],_0x9714dc);}}catch(_0x533c3a){if(_0x12ed53[_0x59063f(0x464,0x417,0x517,0x4e9)]!==_0x12ed53[_0x469efc(-0xa9,0xbb,0x1a,-0xa3)]){if(_0x533c3a[_0x59063f(0x4cc,0x42b,0x537,0x437)]===_0x12ed53[_0x469efc(0x63,0xb7,0xa7,0x15c)]){const _0x2994a8=(_0x469efc(-0x7a,0x32,0x29,0xc0)+'5')['split']('|');let _0x176cc5=0x19d2+0x720*0x5+-0x3d72;while(!![]){switch(_0x2994a8[_0x176cc5++]){case'0':_0x10a152=!![];continue;case'1':taskQueue[_0x59063f(0x45d,0x3b7,0x3e8,0x441)+'us'](_0xbf9dee,TaskStatus[_0x469efc(0x66,0x4a,0xb0,0xd)]);continue;case'2':console[_0x469efc(-0x68,-0x10f,-0x9e,-0x9a)](_0x12ed53['cvltO']);continue;case'3':llmTaskControllers[_0x469efc(-0x99,-0x1,-0xd,-0x70)](_0xbf9dee);continue;case'4':const _0x293d82={};_0x293d82['name']=_0x469efc(0x1,0x147,0x91,0x48),_0x293d82['message']=_0x12ed53[_0x59063f(0x503,0x5a2,0x54a,0x46d)];const _0x4d7886={};_0x4d7886[_0x59063f(0x43e,0x417,0x498,0x39e)]=![],_0x4d7886[_0x59063f(0x3e1,0x391,0x329,0x457)]=null,_0x4d7886['id']=_0x2b1bd4,_0x4d7886[_0x59063f(0x4f7,0x54f,0x4a9,0x442)]=_0x293d82,eventSource['emit'](eventNames[_0x59063f(0x495,0x41a,0x4d5,0x4ac)+_0x469efc(0xbe,-0x1d,0x8d,0x4a)],_0x4d7886);continue;case'5':return;}break;}}console[_0x469efc(0x35,0xa4,0x63,0xcc)](_0x469efc(0x16,0xce,0x65,0x128)+_0x469efc(0x10b,0xab,0x96,0x2a),_0x533c3a);const _0x58d0fb=_0x59063f(0x50b,0x59f,0x4aa,0x47f)+_0x533c3a[_0x469efc(0x26,0xd9,0x26,-0x2b)];_0x2e9bcf&&_0x12ed53[_0x469efc(0x65,0x121,0x98,0x138)](_0x2e9bcf,_0x58d0fb);toastr[_0x59063f(0x4f7,0x5b9,0x5b9,0x564)](_0x533c3a[_0x469efc(-0x39,-0x38,0x26,0x66)]),taskQueue[_0x469efc(0xe2,0xc5,0x41,-0x7a)+'sk'](_0xbf9dee,![]),llmTaskControllers[_0x469efc(-0xc9,0x3,-0xd,-0x1f)](_0xbf9dee);const _0x129b41={};_0x129b41[_0x469efc(-0x19,-0x2b,-0x56,-0xc0)]=![],_0x129b41[_0x59063f(0x3e1,0x426,0x35e,0x37d)]=_0x58d0fb,_0x129b41['id']=_0x2b1bd4,eventSource[_0x59063f(0x510,0x506,0x57d,0x5cd)](eventNames[_0x469efc(-0x4,-0x63,0x1,0xcb)+_0x469efc(0x11e,0x70,0x8d,0x8c)],_0x129b41);}else{_0x55076b=''+_0x47057f[_0x469efc(0xf1,0x62,0x63,0x7c)]['message'];const _0x52b97a=[];if(_0x5013ef[_0x469efc(0xcb,0x65,0x63,0x31)]['type'])_0x52b97a[_0x469efc(-0xa4,-0x188,-0xcd,-0x121)](_0x469efc(0x2,-0x105,-0x91,-0x100)+_0x433668[_0x469efc(0x50,0x10b,0x63,0x99)][_0x59063f(0x3df,0x3cc,0x371,0x466)]);if(_0xc15b47[_0x59063f(0x4f7,0x48d,0x4fe,0x548)][_0x59063f(0x528,0x4de,0x56a,0x4ad)])_0x52b97a[_0x59063f(0x3c7,0x42a,0x386,0x36b)](_0x469efc(-0xe0,-0xe0,-0x86,-0xf9)+_0x129d95[_0x59063f(0x4f7,0x55c,0x4f8,0x517)]['code']);_0x12ed53[_0x59063f(0x407,0x434,0x4a5,0x44c)](_0x52b97a[_0x59063f(0x4ca,0x588,0x48d,0x4ac)],-0xb*0x35f+-0x23c3+0xfc*0x4a)&&(_0x545f62+='\x20('+_0x52b97a[_0x469efc(0x32,0x3f,0xb3,0x1d)](',\x20')+')');}}finally{if(_0x12ed53[_0x59063f(0x40f,0x3aa,0x494,0x4d5)]('hxtVS',_0x59063f(0x50d,0x572,0x5be,0x55a))){const _0x37c67d=_0x18778f[_0x2ffa23][_0x59063f(0x422,0x36f,0x3f5,0x3ca)+_0x469efc(-0x168,-0x3f,-0xaa,-0xfc)+'s']||{},_0x779ee8=_0x40ac97[_0x219ef6][_0x59063f(0x539,0x4e4,0x46d,0x5a5)+_0x59063f(0x3d7,0x3d4,0x326,0x407)+'_profile'];return _0x37c67d[_0x779ee8]||_0x37c67d[_0x3279b3[_0x469efc(-0x2d,-0xa2,0x2a,-0x47)](_0x37c67d)[0x2*0x127+-0x2072*0x1+0x1e24]]||{};}else _0x12ed53[_0x469efc(-0xad,0x2c,-0x85,-0x140)](currentLLMRequestController,_0x29df44)&&(currentLLMRequestController=null),(!_0x10a152||_0x12ed53[_0x469efc(-0xda,-0x83,-0x25,-0x67)](currentLLMRequestController,null))&&(_0x12ed53[_0x469efc(0x82,0x56,0x78,0x6a)](_0x12ed53['vngAW'],_0x12ed53[_0x59063f(0x42d,0x457,0x433,0x45a)])?_0x12ed53[_0x469efc(-0xb5,-0x11b,-0x7a,-0x68)](stopFabLoading):_0x31b407+='\x20('+_0x21d182[_0x59063f(0x547,0x4e3,0x4cc,0x5dc)](',\x20')+')');}}function _0x44d42a(_0x41319c,_0x505ef5,_0x267948,_0x5a7800){return _0x2dcc(_0x505ef5-0x34,_0x267948);}export function createGetPromptHandler(_0x1d1fc1,_0x1b09f0){function _0x3a4776(_0x490855,_0x30346a,_0x458838,_0x5966c3){return _0x3aa7d9(_0x490855-0x190,_0x458838,_0x458838-0x31,_0x5966c3- -0x1e3);}const _0x1e7852={'tVdGG':function(_0x689d82,_0xb2bd45){return _0x689d82===_0xb2bd45;},'eHOYp':_0x3a4776(-0x116,-0x14b,-0x260,-0x1c8),'HSsKX':function(_0x132537,_0x4f1a3a){return _0x132537(_0x4f1a3a);}};return function(_0x43e8db){function _0x23a76b(_0x2477e9,_0x255548,_0x1d01bc,_0x2c4880){return _0x3a4776(_0x2477e9-0x169,_0x255548-0xc7,_0x2c4880,_0x2477e9-0x3b1);}function _0x166cea(_0x57d217,_0x197ece,_0xfddf85,_0x3fd0b7){return _0x3a4776(_0x57d217-0x1cf,_0x197ece-0x114,_0xfddf85,_0x197ece-0x2c8);}if(_0x1e7852[_0x166cea(0x1b3,0x1ee,0x265,0x1ea)](_0x1e7852['eHOYp'],_0x1e7852[_0x23a76b(0x1cc,0x128,0x1ee,0x281)])){const {id:_0x403ba7}=_0x43e8db;if(!_0x403ba7)return;const _0x2e237f=REQUEST_TYPE_NAMES[_0x1d1fc1]||_0x1d1fc1;console['log']('st-chatu8:'+'\x20收到'+_0x2e237f+(_0x23a76b(0x27a,0x245,0x259,0x282)+_0x166cea(0x11d,0x113,0x17e,0x53))+_0x403ba7+')');const _0x43ef58=_0x1e7852[_0x23a76b(0x230,0x2fc,0x233,0x299)](buildPromptForRequestType,_0x1d1fc1),_0xf7a7c2={};_0xf7a7c2[_0x166cea(0x129,0x167,0x1b6,0x226)]=_0x43ef58,_0xf7a7c2['id']=_0x403ba7,eventSource[_0x166cea(0x194,0x23a,0x20e,0x1f0)](_0x1b09f0,_0xf7a7c2);}else{const _0x14ce84=_0x446d7c[_0x23a76b(0x330,0x2d2,0x2de,0x39a)](_0x542a11,arguments);return _0x19d014=null,_0x14ce84;}};}export function createExecuteHandler(_0x2bec4f,_0xe71c98,_0x2d6aaf=null){function _0x335337(_0x4d9085,_0x4b4281,_0x26038e,_0x3b3b43){return _0x44d42a(_0x4d9085-0x194,_0x4b4281-0x1fc,_0x3b3b43,_0x3b3b43-0x8c);}const _0x1104c5={'Pvdqe':function(_0x7da50c,_0x4a8407){return _0x7da50c(_0x4a8407);},'lcdPk':function(_0x2de7ef,_0x40c1e3){return _0x2de7ef!==_0x40c1e3;},'UpnIU':_0x335337(0x3a4,0x43d,0x3b3,0x3cd)};return async function(_0x3eac23){function _0x4cacc2(_0x33e4ca,_0x3e343c,_0x186142,_0x317494){return _0x335337(_0x33e4ca-0x18a,_0x3e343c- -0x15e,_0x186142-0x106,_0x317494);}function _0x2a2039(_0xb60672,_0x495a3b,_0x89cc55,_0x5553d5){return _0x335337(_0xb60672-0x5d,_0xb60672- -0x125,_0x89cc55-0x4f,_0x89cc55);}if(_0x1104c5[_0x2a2039(0x2f0,0x355,0x27f,0x232)](_0x1104c5[_0x2a2039(0x2b8,0x2e1,0x278,0x371)],_0x1104c5[_0x4cacc2(0x26f,0x27f,0x1c3,0x270)]))_0x1104c5['Pvdqe'](_0x1e024f,_0x4f0a73);else{const _0x3488cc=_0x2d6aaf?_0x2d6aaf():null;await executeTypedLLMRequest(_0x3eac23,_0x2bec4f,_0xe71c98,_0x3488cc);}};}