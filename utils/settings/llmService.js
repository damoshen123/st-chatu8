(function(_0x46e1ff,_0x1f635){function _0x4492b6(_0x1dc37b,_0x1133e1,_0x88f1f7,_0x4eaf93){return _0x5a77(_0x1dc37b- -0x265,_0x1133e1);}function _0x271c38(_0xe517d8,_0x46107d,_0x589c76,_0x120ecb){return _0x5a77(_0xe517d8- -0x1d2,_0x46107d);}const _0x5bc0b8=_0x46e1ff();while(!![]){try{const _0x10c090=-parseInt(_0x4492b6(0xaa,0x162,0xca,0xf9))/(-0x713+0x6f5+0x1f)+parseInt(_0x4492b6(0x1c,0x5b,0x45,-0x1d))/(-0x1057*-0x1+0x1cd3+-0x2d28)*(parseInt(_0x271c38(-0x8,0x27,0x88,0x2e))/(-0x2f2+-0x6f1*0x2+0x10d7))+-parseInt(_0x271c38(0xb1,0x10e,0x123,0xa5))/(-0x12ab+0x6d9+0xa*0x12f)+-parseInt(_0x4492b6(-0x29,-0x92,0x7b,0x63))/(0x2e7*0x7+0x1*-0x2513+-0x1*-0x10c7)*(-parseInt(_0x4492b6(0xa8,0x11,0x13b,-0xf))/(-0x1b63+0xc6b+0x77f*0x2))+parseInt(_0x4492b6(-0xc8,-0x8c,-0x9b,-0x17e))/(0xe46+0x5*-0x640+0x1*0x1101)+parseInt(_0x271c38(0xe2,0xd1,0x10b,0x101))/(0x25c7+0x1016*0x1+-0x35d5)+-parseInt(_0x4492b6(-0x95,-0x10f,0x15,-0x11b))/(-0x11ab+-0x15*0x1c6+0x36f2)*(parseInt(_0x4492b6(0x4d,0xb0,0x55,0xcb))/(0x64d+0x4*0x8ee+-0x29fb));if(_0x10c090===_0x1f635)break;else _0x5bc0b8['push'](_0x5bc0b8['shift']());}catch(_0x12041f){_0x5bc0b8['push'](_0x5bc0b8['shift']());}}}(_0x124a,-0x490*-0x1f3+-0x555b*0xb+-0x51297*-0x1));const _0x532835=(function(){const _0x307e5f={};function _0x3e0900(_0x2a6794,_0x307810,_0x59a100,_0x6f4e4c){return _0x5a77(_0x6f4e4c- -0x11,_0x307810);}_0x307e5f[_0x3f62ba(0x1d4,0xea,0x165,0x16c)]=_0x3e0900(0x112,0x21b,0x221,0x194);const _0x30a20a=_0x307e5f;function _0x3f62ba(_0x5cbcb5,_0x3accb2,_0x3f1cbb,_0x1114ee){return _0x5a77(_0x1114ee- -0x83,_0x3accb2);}let _0x4df30=!![];return function(_0x59b28b,_0x11e20c){function _0x26fde7(_0x24ab6d,_0x2d7a2a,_0x2ccfd5,_0x4606b4){return _0x3e0900(_0x24ab6d-0xff,_0x2d7a2a,_0x2ccfd5-0x19c,_0x4606b4- -0x2d2);}const _0x5e10af={};_0x5e10af['eaUeS']=_0x3f396a(-0x2f,0x9b,0x70,0x12d);function _0x3f396a(_0x1de1b5,_0x565ece,_0x17553b,_0xaf3f04){return _0x3e0900(_0x1de1b5-0x1a4,_0x565ece,_0x17553b-0x127,_0x17553b- -0x1c7);}_0x5e10af['nVqnz']=_0x26fde7(-0x12e,-0x72,-0x8c,-0x114);const _0x1ffeeb=_0x5e10af;if(_0x30a20a['zMLxK']===_0x3f396a(0x4a,-0x1c,-0x33,-0x1)){const _0x540104=_0x4df30?function(){function _0x4bdfaf(_0x5c61a9,_0x20ca67,_0x2ac157,_0x5e10cc){return _0x3f396a(_0x5c61a9-0x4c,_0x2ac157,_0x5e10cc-0xfb,_0x5e10cc-0x10a);}function _0x303725(_0x4b6ca7,_0x5df643,_0x3257b7,_0x3ef11e){return _0x26fde7(_0x4b6ca7-0x144,_0x5df643,_0x3257b7-0x5e,_0x4b6ca7-0xaa);}if(_0x11e20c){if(_0x1ffeeb[_0x4bdfaf(0x139,0x199,0x1f8,0x1ea)]===_0x1ffeeb[_0x303725(0xbe,0x114,0x14b,0xb1)]){const _0xb27b41=_0x5e4455[_0x2802bb][_0x303725(-0x43,-0x9a,-0xf,-0x8a)+'es']||{},_0x3ce005=_0x18fc26[_0x3e0498][_0x303725(-0x75,-0x3d,-0x18,-0x103)+_0x4bdfaf(0x161,0x231,0x1f3,0x1ce)];return _0xb27b41[_0x3ce005]||_0xb27b41[_0x470385[_0x303725(0x56,0x72,-0x18,0x17)](_0xb27b41)[0x246a+-0xe4d+-0x161d]]||{};}else{const _0x3e41d9=_0x11e20c['apply'](_0x59b28b,arguments);return _0x11e20c=null,_0x3e41d9;}}}:function(){};return _0x4df30=![],_0x540104;}else _0x1246ae['warn']('流式解析警告\x20(最后'+_0x26fde7(-0xec,-0x58,-0xd7,-0x50),_0x1cba4d[_0x26fde7(-0x8d,-0x1f9,-0x106,-0x13c)]);};}()),_0x48f9aa=_0x532835(this,function(){function _0x5569ef(_0x3fd723,_0x112d14,_0x44a24e,_0x503641){return _0x5a77(_0x112d14-0x24,_0x3fd723);}function _0x251ac8(_0x18ca4d,_0x7c1872,_0x496e5e,_0x45033f){return _0x5a77(_0x496e5e- -0x2f8,_0x7c1872);}const _0x2cb8b5={};_0x2cb8b5[_0x5569ef(0x2a2,0x291,0x1d8,0x1e9)]=_0x5569ef(0x215,0x220,0x1c6,0x2aa)+'+$';const _0x4567de=_0x2cb8b5;return _0x48f9aa[_0x5569ef(0x161,0x1f1,0x250,0x1a1)]()[_0x251ac8(-0xed,-0x25,-0x6f,-0x116)](_0x4567de[_0x5569ef(0x2d8,0x291,0x2e8,0x225)])[_0x251ac8(-0x1d5,-0xa8,-0x12b,-0x1ab)]()[_0x251ac8(0xe,-0x69,-0x74,-0xd0)+'r'](_0x48f9aa)[_0x251ac8(0x4a,-0x9c,-0x6f,-0xfd)](_0x5569ef(0x233,0x220,0x29b,0x1d7)+'+$');});_0x48f9aa();import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';function _0x5785bf(_0x27abaa,_0x74632e,_0x530911,_0x2de2c6){return _0x5a77(_0x530911-0x3a6,_0x74632e);}import{extensionName,eventNames,LLMRequestTypes}from'../config.js';function _0x5a77(_0x433ee4,_0x457d94){_0x433ee4=_0x433ee4-(0x335*0x1+-0x1f6*-0xc+-0x2*0xc91);const _0x4f2707=_0x124a();let _0x481e74=_0x4f2707[_0x433ee4];if(_0x5a77['MwfJew']===undefined){var _0x3f0589=function(_0x2802bb){const _0x18fc26='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3e0498='',_0x470385='',_0x474886=_0x3e0498+_0x3f0589;for(let _0x4ccb4b=-0x1d8b+-0x94d+0xe2*0x2c,_0x239712,_0x392b00,_0x2a4658=0x206e+0x10d8+-0x2*0x18a3;_0x392b00=_0x2802bb['charAt'](_0x2a4658++);~_0x392b00&&(_0x239712=_0x4ccb4b%(-0x1b53+-0x11eb+0x2d42)?_0x239712*(0x13fc*-0x1+0x1130+0x41*0xc)+_0x392b00:_0x392b00,_0x4ccb4b++%(0x1*0x565+-0xe79+0x246*0x4))?_0x3e0498+=_0x474886['charCodeAt'](_0x2a4658+(0x1bbf*0x1+-0x2517*0x1+0x962))-(-0x122b+-0x1416+-0x264b*-0x1)!==-0x8ff+-0x320+0xc1f?String['fromCharCode'](0xdc1+-0xc6d*-0x1+-0x192f&_0x239712>>(-(-0x26e0+-0x14fe+0x3be0)*_0x4ccb4b&-0xbc1+-0x1a7a+-0x7*-0x577)):_0x4ccb4b:-0x1*0x1cde+0x18c7*0x1+-0x417*-0x1){_0x392b00=_0x18fc26['indexOf'](_0x392b00);}for(let _0x41ae0a=0xc01+0x1e98+-0x2a99,_0x293201=_0x3e0498['length'];_0x41ae0a<_0x293201;_0x41ae0a++){_0x470385+='%'+('00'+_0x3e0498['charCodeAt'](_0x41ae0a)['toString'](0xc95*0x3+0x225a*0x1+-0x3*0x1803))['slice'](-(0x4*0x3d7+0xca5+-0x1*0x1bff));}return decodeURIComponent(_0x470385);};_0x5a77['eMJnBY']=_0x3f0589,_0x5a77['dfRpTh']={},_0x5a77['MwfJew']=!![];}const _0x1674e8=_0x4f2707[0x2632+0x61*0x1f+-0x31f1],_0x1ba44f=_0x433ee4+_0x1674e8,_0x5e4455=_0x5a77['dfRpTh'][_0x1ba44f];if(!_0x5e4455){const _0x15c493=function(_0x16980f){this['orLphB']=_0x16980f,this['NckEhR']=[-0x667+0x2*-0xcc7+-0x1ff6*-0x1,-0x9d*0x9+0x1*-0x1614+-0x933*-0x3,0x14e9+0x269a+-0x3b83],this['gsTpWO']=function(){return'newState';},this['eidZee']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['XcxYOs']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x15c493['prototype']['xIsJgX']=function(){const _0x3229a4=new RegExp(this['eidZee']+this['XcxYOs']),_0x815fb0=_0x3229a4['test'](this['gsTpWO']['toString']())?--this['NckEhR'][0x1*0x2381+0x1942+0x7*-0x8ae]:--this['NckEhR'][-0x99e+-0x4*0x5b3+0x206a];return this['khpOfc'](_0x815fb0);},_0x15c493['prototype']['khpOfc']=function(_0x54f557){if(!Boolean(~_0x54f557))return _0x54f557;return this['bybrYs'](this['orLphB']);},_0x15c493['prototype']['bybrYs']=function(_0x169834){for(let _0x1c5def=0xd2+-0x4a+-0x1*0x88,_0x29f7ab=this['NckEhR']['length'];_0x1c5def<_0x29f7ab;_0x1c5def++){this['NckEhR']['push'](Math['round'](Math['random']())),_0x29f7ab=this['NckEhR']['length'];}return _0x169834(this['NckEhR'][0x242d+-0x8fb*-0x2+-0x3623]);},new _0x15c493(_0x5a77)['xIsJgX'](),_0x481e74=_0x5a77['eMJnBY'](_0x481e74),_0x5a77['dfRpTh'][_0x1ba44f]=_0x481e74;}else _0x481e74=_0x5e4455;return _0x481e74;}function _0x124a(){const _0x399fb1=['DhzOExe','zgLJuLK','6k+35RgcieLeoIa','yxbPx2TLEq','zgf0ytOG','DNzSBee','uezlsMy','zNH2uuS','uMvXDwvZDcbHyG','zhjKEgC','D1nTsLe','q0LRzMG','vhvfrfm','DxnLCG','CgfYC2u','yxbPx3vYBa','D2fYBMLUzW','5PAT44cbBwf4x3rVA2u','BefgEwS','EwvUtNy','BLzXBNO','zgvSDge','DhjPz2DLCG','BMrZl2nOyxqTyW','wvfYsei','vvnJDwO','swDZAxa','teXnioIVT+AXGUI/LowBNUs4UUEPUG','77Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ5PAT44cb','zxrPB25FC291CG','zgf0ytOGw0rptG','y3vZDg9Tx2LUyW','Bgv0Aw9UCW','D25NEwS','5OIwie1VzgvSioACQUMfJq','y2HVAwnLCW','r0HWCeC','teXnoIa','wKTYquq','s3DStKi','Eg11uvO','B2zPBgu','nZyYqvHhEwre','z2v0uMvHzgvY','ndmWnJi0rhLoBKno','teXnigv4zwn1Da','tMf5tw4','t0PUBei','z2fJtKq','DgvZDe1Vzgu','Dg9Rzw4','C3rHDhvZ','q0foq0vmteve','zMLNCW','zNvUy3rPB24','mJyXodmZnM1HqLHpEq','zxrjrhe','DxjS','z0H1shK','zKHqCw0','CNPdsKe','B21WBgv0Aw9UCW','ALLPy3y','vKfqCwi','AgLZDg9YEq','BwvZC2fNzq','tw9KzwWG5PYQ6ywn572U44cc','6kEs6iMYl+ACJEIJHEs/RUAuUq','5Rwb5BYp6kEJ5P6q6k2M5zgkoG','CKzlEKG','AxnbCNjHEq','z3PXtwi','t2PpALa','DufZEve','DvjVtg0','A1z3z1K','DhjHBNnSyxrPBW','r0rxz0S','zw1PDa','C2PQAKG','5lI656M677Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ','DxbKyxrLu3rHDa','uNLrBMS','zxiG','DgvTCgvYyxr1CG','tfLRA0u','sxrmvKG','sMDoseG','yxvhDKO','yxbWBgLJyxrPBW','ywrKvgfZAW','ugvdthe','C3rFy2HHDhu4xW','zM9YrwfJAa','y3vYCMvUDf9SBa','qwjVCNrfCNjVCG','Aw1Hz2vFDxjS','CMvZDwX0','wfjyq1q','t1ngC3i','mJq4n2v2DMfWsa','y29UDgv4Df9WCG','Aw5JBhvKzxm','Dg9tDhjPBMC','C3rHCNrZv2L0Aa','CwjRvLm','mtGYmZeZovnrwfbttW','rLjUsve','D3LcvgC','BhvKzv9OzwfKzq','z2v0','CuPXzKy','vLfWqKS','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','CenoAMW','Aw9U','zgf0ytO','BfDiqKi','BgTovgW','ioIUVUE9RUI/H+wWJ+oaGEAiLIbbua','oIbmte0G6k+35Rgc6l+u5zUE','5RAioIa','BvrNq0K','C2v0','AxbKCw0','BfvdENa','Aw5MBW','teXnioIVT+AXGUw3SUs4REATOUoaGG','DK1yDNK','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','uhDAzhu','C3rYAw5N','ALr1y0W','AfrHENC','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','57g75z6loIa','BKnzsNu','EK1mEeS','l2fWAs9IywnRzq','yxPqBgi','C3vIEeC','sxLYsuO','BNmG6k6+572U6l+h5Bcp44cb5OIwia','BgvUz3rO','BgXTx3bYB2zPBa','ksa9pt09pq','Dgv4Da','Auf3yuS','6kEs6iMYl+ACJEIJHEIUVUIUOq','AM9PBG','kcGOlISPkYKRkq','qMPUvNa','DxfXv20','zKrosxm','s3P2r1C','uKPfCvK','quNLIQNMIyS','teXniev4zwn1Da','uNzQqKi','teXnx0vyrunvva','rdOG','Dg9Wx3a','DxrMltG','C3rHDhvZvgv4Da','q29UDgvUDc1uEq','teXn','Ahf2ywS','B3j0zwq','wM9xANO','l3yXlW','DhjPBq','y3vZDg9Tx3vYBa','A0TPBwW','rKX0vvy','ywjVCNrLzc4','5AEl5PAW6k+35Rgc44cc','uLvotKLorW','yxnZAxn0yw50','DxHbCui','zxjYB3i','rv9srvnqt05trq','y2HHCL9TB2rPzG','vLDAEMS','y2fUy2vSx2XSBq','x3rHC2S','v2j2yMy','57o757UF5O+q56s66k+n','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','rLnXBMO','6BUy6k6K6k+35Rgc5BYa5AElid09pq','6k+35Rgc5AsX6lsLoIa','De5fvhi','Cg9W','w0Xmtv0G5lU75yQH5BEY5y+w','qw9mtfO','BwvZC2fNzxm','ywLNrvG','zvfksee','rgjushO','l3yX','ANDjD24','5lUJ56cboIa','A2PwDKC','r09KBeK','C3qTy2HHDhu4oG','sLPYruS','iowBNUwKJsaTls0Tlq','zfbRr0C','l2nOyxqVy29TCa','Bwf0y2G','mxWZFdj8mhW0','DhjPz2DLCLDVCG','6k+35Rgc6zsz6k+VoIa','uKjHDKW','oti0mhrlDNb2Cq','5O+q56s66k+n6i635y+w6k+35RgcicHj','tev4sLa','tuXntxq','vM1trgO','BKDsyKu','vufvsNK','z3nlyvC','t0LMwvG','CKPLv0e','8j+tTYbB5zU+54Mh6zo+5O6LoIa','Bg5bt2G','z2Xhq1G','yNLWyxnZx3bYBW','r0zstxi','zhrOvNO','l2DLBMvYyxrL','DgfNx21VzgLMEq','y3vYCMvUDf90zq','ievYCM9YoG','tfbMr1m','uwzNu1u','Bg9N','ANnVBG','C3LZDgvT','z2HcBLi','qvbjioI/NUAoPEMxRUMIMooaGG','tg9IDK8','vgfN5l+U5Ps5','rxPmuhm','C3rFy29UDgv4Da','C3vJy2vZCW','C2LztK0','Cw5hBLO','AeLQuKK','rgT4thu','BfjVy0S','x3bYB2zPBgu','y2HHDf9JB21WBa','teXnoIdLPjBPG6JOR7FMSyi','qMDdz2i','uuXhufa','Dg9VBa','ssdOV57MJQxPL67POPJJGii','EMHnswC','zsbfCNjVCJO','y29UDgv4Da','CfLNBvi','C3rYAw5NAwz5','uvjprg4','BMfTzq','m3WYFdr8mxWW','oIbbueKGvvjmla','t01isuu','CK5Zv1m','y2HHCL9KAxnWBa','uvjJsuO','5Q2J5zYO5Ase55cgia','zw5KC1DPDgG','B2jQzwn0','vNnYAgG','6k+35Rgc5BYa5AElicG','zw5HyMXLza','B21Xsgq','DwLhruO','yxbPx3bYB2zPBa','wKHNtfq','s0T0DhK','sKT5EhK','mZeZmhfyAwLkAW','v2Xpy1a','mJG1mdq3mNrZDxLgzW','y29UC3rYDwn0BW','vffyBfC','BevZv0W','D1jnt0C','rLzkEwW','C2vHCMnO','C3bSAxq','cI0Tls0TieXmtq','y29TCgXLDgvuyq','rgXOtfi','D2zRqM0','A2v5CW','iefqssblzxKSia','z1DnB2C','lcdNUQyG','yNvMzMvYktO','ioAuTUwiSa','DuHmsvC','uvvTz24','Ag5hDKq','venQrgi','rKLMwwK','CMvWBgfJzq','ywjVCNq','qwf2wvy','qw5Jq24','ruXlEg4','5y+r6ycb55QeifbYB21WDa','C3rYzwfT','6kEs6iMYl+ACJEIJHEwXLEEKUG','s0jD','Bwf4x3rVA2vUCW','57g75z6loG','uNnNtMG','B3zitgq','CMvuEwu','uNHSsvm','vhjzuee','zgvSzxrL','Bv9WCM9MAwXL','y29Kzq','tMDrBfm','pt09pt0GteXnia','D3PbELG','ueKGs2v5lcdMIjyG','6k+35Rgc5A6m5OIqid09pt09','mtbNswrdzxO','5lUJ56cboG','ote2nZuYtuDPA0f3','C2XPy2u','r096tuW','BLPYvfi','z0P3vLu','v0zPDgq','ChvZAa','BI9QC29U','BgXTx3jLCxvLCW','t0rWtvK','Dw5RBM93BG','DhLWzq','D2fYBG','5yE95PwW6lcd55sO','yNPOwMS','y29UDgvUDa','qungvKC','thjXBxm','DhjPz2DLCK1Vza','zwfvzvm','qM1Lrxa','yKXnv0S','BerODeO','q0jrtwi','qxv0Ag9YAxPHDa','CM9Szq','CMvWzwf0','zw50CMLLCW','Bw9KzwW','sKzyr2y','t1DmA1q','Df90ExbLx2nVBG','Aw9UoIaIqMvHCG','yM5bt1C','5Q2J5PAh5zU+54Mh55sF5OIq','DgvZDf9JB250zq','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','qMvHCMvYia','y3vZDg9T','BxPoqwK','q2f5rw8','CMvHza','rKjxuMm','EhrFChjVzMLSzq','uujIr1G','ChjVBxb0','yM9KEq'];_0x124a=function(){return _0x399fb1;};return _0x124a();}import{getRequestHeaders,clearLog,addLog}from'../utils.js';import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on'](_0x5785bf(0x4ed,0x5fb,0x568,0x5cb)+_0x5785bf(0x599,0x5b8,0x5c3,0x594)+_0x5785bf(0x52d,0x576,0x5c4,0x582),({taskId:_0x4f54df})=>{const _0x2f5f07={};_0x2f5f07['Vprps']='(((.+)+)+)'+'+$',_0x2f5f07[_0x4a2c05(-0x1b0,-0x206,-0x1d3,-0x217)]=function(_0x532539,_0x1ecd4d){return _0x532539!==_0x1ecd4d;},_0x2f5f07[_0x4a2c05(-0x131,-0xdd,-0xb2,-0x151)]=_0x4a2c05(-0x174,-0x213,-0x18d,-0x19c);function _0x50da63(_0x40c743,_0x8f30f9,_0x44fd8f,_0xe9d825){return _0x5785bf(_0x40c743-0x32,_0x40c743,_0xe9d825- -0x5e5,_0xe9d825-0x3d);}function _0x4a2c05(_0x314716,_0x48e230,_0x1f292f,_0xab32ab){return _0x41b3e0(_0x314716-0x141,_0x1f292f- -0x71b,_0x1f292f-0x1e8,_0x48e230);}_0x2f5f07[_0x50da63(0xcf,0xbf,0x95,0x70)]='AFPvd';const _0x2433d8=_0x2f5f07,_0x593e00=llmTaskControllers[_0x50da63(-0x5f,-0x4b,-0xe3,-0x6b)](_0x4f54df);if(_0x593e00){if(_0x2433d8[_0x50da63(-0x65,0x3e,0x3b,-0x59)](_0x2433d8[_0x50da63(0x2b,0xce,0xa7,0xc8)],_0x2433d8[_0x4a2c05(-0x10f,-0x177,-0x10a,-0x17c)]))_0x593e00[_0x4a2c05(-0x86,-0x1da,-0x11e,-0x125)](),llmTaskControllers[_0x50da63(-0x2f,-0x1a,0x108,0x6b)](_0x4f54df),console['log'](_0x50da63(-0xad,0x5,-0xbe,-0x18)+_0x4a2c05(-0x274,-0x1dc,-0x1da,-0x1af)+_0x4f54df);else return _0x1f06ad[_0x4a2c05(-0x1ce,-0x23e,-0x1ec,-0x168)]()['search'](NaRMHJ['Vprps'])['toString']()[_0x50da63(-0x6f,0xd0,-0x20,0x45)+'r'](_0x70bf60)[_0x4a2c05(-0x137,-0x1ea,-0x130,-0x120)](NaRMHJ['Vprps']);}});export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x528ec1){currentLLMRequestController=_0x528ec1;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){const _0x138104={};function _0x490fa3(_0x55c35d,_0x2b5733,_0x29f6e7,_0x2e7fbd){return _0x5785bf(_0x55c35d-0x1df,_0x2e7fbd,_0x2b5733- -0x672,_0x2e7fbd-0x7);}_0x138104['nZrTR']='LLM\x20请求已中止。';const _0x1b85a3=_0x138104;function _0x4ffe33(_0x4c0319,_0x597c53,_0x5b351d,_0x150036){return _0x41b3e0(_0x4c0319-0x16,_0x150036- -0x381,_0x5b351d-0x192,_0x4c0319);}currentLLMRequestController&&(currentLLMRequestController[_0x490fa3(0xc,-0x31,-0xb,0x86)](),toastr[_0x4ffe33(0x22e,0x245,0x249,0x1c5)](_0x1b85a3[_0x4ffe33(0x265,0x26d,0x25a,0x298)]));}export function formatPromptForDisplay(_0xfa67f5){const _0x462fad={'UyhEj':_0xb9d143(-0x2a6,-0x17d,-0x204,-0x29b)+_0xb9d143(-0x142,-0xf4,-0x108,-0x1a2),'drdxg':function(_0x493fee,_0x1b3289){return _0x493fee===_0x1b3289;},'BgCgb':function(_0x434143,_0x493c5b){return _0x434143===_0x493c5b;},'JZrEK':_0x2cc6a4(0x229,0x2c0,0x263,0x2e4),'TcLHI':function(_0x53b554,_0x43420d){return _0x53b554!==_0x43420d;},'subxG':_0xb9d143(-0x240,-0x172,-0x183,-0x10c),'PvhwU':_0xb9d143(-0x12f,-0x18c,-0x1e9,-0x190),'FSqnj':_0xb9d143(-0xea,-0x146,-0x105,-0x1a4),'yyONR':function(_0x45b5d8,_0xc58a72){return _0x45b5d8/_0xc58a72;},'rJeWA':function(_0xdabb38,_0x20adac){return _0xdabb38*_0x20adac;},'gJwVU':'ELKxn','ipdqm':function(_0x4172f0,_0x394d91){return _0x4172f0(_0x394d91);},'jYicv':function(_0x46731a,_0x180b9d){return _0x46731a===_0x180b9d;},'LExJP':_0xb9d143(-0x20e,-0x27f,-0x1da,-0x1be),'fDNIs':_0xb9d143(-0x1bf,-0x1aa,-0x135,-0xce),'pCNjl':_0x2cc6a4(0x288,0x28f,0x291,0x332),'nGRbE':_0xb9d143(-0x1a6,-0x1e7,-0x14c,-0xfd),'JFXGf':function(_0x6b4904,_0x53bd6a){return _0x6b4904!==_0x53bd6a;}};function _0xb9d143(_0x3716ae,_0xc9823d,_0x52077d,_0x16945b){return _0x5785bf(_0x3716ae-0x1b6,_0x3716ae,_0x52077d- -0x769,_0x16945b-0xb9);}if(_0x462fad['drdxg'](typeof _0xfa67f5,_0x462fad['LExJP']))return _0xfa67f5;function _0x2cc6a4(_0x267602,_0x58c4f0,_0x53607a,_0x232145){return _0x41b3e0(_0x267602-0xe8,_0x267602- -0x2ff,_0x53607a-0x8,_0x232145);}if(Array[_0xb9d143(-0x23e,-0x1c6,-0x217,-0x2bf)](_0xfa67f5)){const _0x3e0223=[];return _0xfa67f5[_0x2cc6a4(0x226,0x276,0x23e,0x231)]((_0x2bfbce,_0x3dd822)=>{function _0x51ee28(_0x269f6b,_0x1832b9,_0x27bd79,_0x7115e){return _0x2cc6a4(_0x7115e- -0x20e,_0x1832b9-0x180,_0x27bd79-0x52,_0x1832b9);}const _0x1ae312=_0x2bfbce[_0x3450a5(0x633,0x5b0,0x5bb,0x613)]||_0x462fad[_0x51ee28(0x6a,0xee,0x131,0x77)],_0x286f54=_0x462fad[_0x51ee28(0xb,-0x3e,-0x65,0x37)](getRoleLabel,_0x1ae312);_0x3e0223['push'](''+'═'[_0x3450a5(0x526,0x5b1,0x628,0x610)](0x19df*0x1+0x1371*-0x1+-0x7*0xe4)),_0x3e0223[_0x51ee28(0x183,0x87,0x56,0x10f)]('【'+_0x286f54+'】');function _0x3450a5(_0x54f510,_0x3e1d15,_0x43b9ec,_0x3b6fc2){return _0xb9d143(_0x43b9ec,_0x3e1d15-0x183,_0x3e1d15-0x6a6,_0x3b6fc2-0x14d);}_0x3e0223[_0x3450a5(0x4e5,0x59d,0x616,0x5f3)](''+'─'['repeat'](-0xd*0x2d1+0x2*0x7f+0x23d1*0x1));const _0x17d735=_0x2bfbce['content'];if(_0x462fad[_0x51ee28(-0x51,-0x88,0xa5,-0x7)](typeof _0x17d735,_0x462fad[_0x51ee28(0x146,0x43,0x150,0x93)]))_0x462fad[_0x3450a5(0x51e,0x4e2,0x4d5,0x4de)]===_0x462fad[_0x3450a5(0x423,0x4bb,0x46b,0x558)]?_0x230ed1+='\x20('+_0x3e29d4[_0x51ee28(0x46,0xfc,0xf5,0x50)](',\x20')+')':_0x3e0223[_0x3450a5(0x585,0x59d,0x632,0x622)](_0x17d735);else Array['isArray'](_0x17d735)&&_0x17d735[_0x3450a5(0x483,0x4a6,0x45d,0x550)](_0x14811d=>{const _0x599bc0={};function _0x38a67e(_0x38fe4d,_0x5aa75d,_0x3106d6,_0xf52423){return _0x51ee28(_0x38fe4d-0x1bd,_0xf52423,_0x3106d6-0x16a,_0x5aa75d-0x1d5);}_0x599bc0[_0x38a67e(0x38e,0x31f,0x2df,0x375)]=_0x462fad['UyhEj'],_0x599bc0['QUmgn']=function(_0x37673a,_0x91ddee){return _0x37673a??_0x91ddee;};function _0x5afb6b(_0x1be06a,_0x5da373,_0x55abdb,_0x105d70){return _0x51ee28(_0x1be06a-0x6d,_0x105d70,_0x55abdb-0x1a2,_0x55abdb-0x362);}const _0x131c8f=_0x599bc0;if(_0x462fad[_0x5afb6b(0x51b,0x3fc,0x4a3,0x44e)](_0x14811d[_0x38a67e(0x369,0x2e9,0x259,0x2c7)],_0x5afb6b(0x465,0x40e,0x3af,0x3b7)))_0x3e0223[_0x38a67e(0x36e,0x2e4,0x232,0x38d)](_0x14811d[_0x5afb6b(0x33b,0x3ea,0x3af,0x3e1)]||'');else{if(_0x462fad[_0x38a67e(0x33a,0x28e,0x1f3,0x21f)](_0x14811d[_0x38a67e(0x2f2,0x2e9,0x2b9,0x2e2)],_0x462fad[_0x5afb6b(0x407,0x3b0,0x3ea,0x34e)])){if(_0x462fad['TcLHI'](_0x462fad[_0x5afb6b(0x396,0x460,0x3a9,0x3aa)],_0x5afb6b(0x485,0x42a,0x43f,0x45c))){const _0x3c2d4d=_0x14811d['image_url']?.[_0x38a67e(0x1e6,0x1c9,0x225,0x242)]||'';if(_0x3c2d4d['startsWith'](_0x462fad['PvhwU'])){const _0x427e8d=_0x3c2d4d[_0x5afb6b(0x39b,0x458,0x3ee,0x33e)](/^data:([^;]+);/),_0x5e552c=_0x427e8d?_0x427e8d[-0x3*-0x7cf+0x1*0x1b95+-0x3301*0x1]:_0x462fad['FSqnj'],_0x50cf1b=_0x3c2d4d['split'](',')[-0x320+-0x1fe6*0x1+-0x7*-0x501]||'',_0x27ecc0=Math['round'](_0x462fad['yyONR'](_0x462fad[_0x38a67e(0x206,0x26f,0x1cc,0x2b9)](_0x50cf1b[_0x5afb6b(0x33d,0x42c,0x3ac,0x3c0)],0x1*0xbf+-0x1*-0x1379+-0x1435),0x12e1+0x1cbe+-0x2f9b)/(0x23ed+-0x737*-0x1+-0x2724));_0x3e0223[_0x5afb6b(0x43a,0x4bd,0x471,0x461)](_0x38a67e(0x26d,0x211,0x18d,0x164)+':\x20'+_0x5e552c+_0x5afb6b(0x4e3,0x3af,0x449,0x488)+_0x27ecc0+_0x38a67e(0x37b,0x2cc,0x28a,0x23f));}else{if(_0x462fad[_0x38a67e(0x396,0x2e2,0x368,0x330)]!==_0x5afb6b(0x4ea,0x4b3,0x455,0x4fc)){_0xcad533=_0x8eec55+(_0x38a67e(0x28b,0x260,0x1d6,0x217)+'letions');const _0x20fac1={};_0x20fac1[_0x5afb6b(0x454,0x357,0x3c1,0x41a)+'pe']=_0x131c8f[_0x38a67e(0x38d,0x31f,0x290,0x2d9)],_0x20fac1[_0x38a67e(0x248,0x2f6,0x3a4,0x247)+_0x5afb6b(0x3ce,0x3c5,0x390,0x44b)]=_0x38a67e(0x350,0x303,0x25a,0x2dd)+_0x4560dc,_0x5baa3a=_0x20fac1,_0x7175e6={'model':_0x2e42e5,'messages':_0x2fe268,'temperature':_0x10d6e5,'top_p':_0x5db0eb,'max_tokens':_0x492336,'stream':_0x131c8f[_0x5afb6b(0x46c,0x4ad,0x44d,0x3a0)](_0x3681ba,![])};}else _0x3e0223['push'](_0x5afb6b(0x408,0x426,0x3fd,0x39c)+_0x3c2d4d+']');}}else _0x426fa7&&(_0x45e276[_0x5afb6b(0x3cc,0x3bf,0x452,0x3a4)](),_0x1b1f68[_0x5afb6b(0x3dc,0x336,0x39b,0x347)](_0x5afb6b(0x327,0x432,0x39c,0x339)));}}});_0x3e0223[_0x51ee28(0xa2,0x1b2,0x1c3,0x10f)]('');}),_0x3e0223[_0xb9d143(-0x1d6,-0x22d,-0x1c8,-0x1e3)]('\x0a');}if(_0x462fad[_0xb9d143(-0x266,-0x19a,-0x21f,-0x244)](typeof _0xfa67f5,_0x462fad[_0xb9d143(-0x1b7,-0x1ad,-0x182,-0x19d)])&&_0x462fad[_0xb9d143(-0x189,-0x194,-0xf2,-0x79)](_0xfa67f5,null))return JSON[_0x2cc6a4(0x2cf,0x2d1,0x228,0x355)](_0xfa67f5,null,-0x18*0xc9+-0x1d18+0x2ff2);return String(_0xfa67f5);}export function getRoleLabel(_0x23bd50){const _0x27829a={};_0x27829a[_0x3a28c6(0x455,0x49b,0x3ea,0x49a)]='函数调用';const _0x38a9f0=_0x27829a,_0x451699={};_0x451699[_0x26b013(0x3e2,0x3fb,0x39f,0x41a)]='系统提示词';function _0x3a28c6(_0x56186d,_0x4f201c,_0x3fa3a2,_0x181fb4){return _0x5785bf(_0x56186d-0x1,_0x181fb4,_0x4f201c- -0x11d,_0x181fb4-0x1b9);}_0x451699[_0x26b013(0x47e,0x484,0x3de,0x4d5)]='用户',_0x451699[_0x3a28c6(0x4e2,0x4a0,0x47e,0x4fc)]=_0x26b013(0x390,0x3bd,0x414,0x36c);function _0x26b013(_0x271dfe,_0x1d96d7,_0x58fe60,_0x4b0f03){return _0x41b3e0(_0x271dfe-0x153,_0x271dfe- -0x1d4,_0x58fe60-0x1a1,_0x1d96d7);}_0x451699[_0x26b013(0x32a,0x3ce,0x342,0x3df)]=_0x38a9f0[_0x26b013(0x3a0,0x3d1,0x45b,0x335)],_0x451699[_0x26b013(0x3f4,0x410,0x442,0x47a)]='工具';const _0x2e4cf6=_0x451699;return _0x2e4cf6[_0x23bd50]||_0x23bd50;}function _0x41b3e0(_0x258645,_0x5462d5,_0x5dfb0e,_0x1985ec){return _0x5a77(_0x5462d5-0x362,_0x1985ec);}export function getCurrentLLMProfile(){function _0x16e5d0(_0x42904c,_0xee14b2,_0x29a73a,_0x311b42){return _0x41b3e0(_0x42904c-0x194,_0xee14b2- -0x2c,_0x29a73a-0x13d,_0x311b42);}const _0x3e03e1=extension_settings[extensionName][_0x36f520(0x43f,0x488,0x3e2,0x3b2)+'es']||{};function _0x36f520(_0x3edbc9,_0x3960af,_0x109cf5,_0x49be36){return _0x41b3e0(_0x3edbc9-0xd1,_0x109cf5- -0x176,_0x109cf5-0x98,_0x3960af);}const _0x49567a=extension_settings[extensionName]['current_ll'+_0x16e5d0(0x554,0x5e1,0x5b8,0x61c)];return _0x3e03e1[_0x49567a]||_0x3e03e1[Object[_0x16e5d0(0x5b7,0x5c5,0x589,0x675)](_0x3e03e1)[-0xd73+0x3*0xd+0xd4c]]||{};}export function getCurrentTestContext(){function _0x52a359(_0x353580,_0x4ac7fc,_0xf7c3fa,_0x4ffbc6){return _0x5785bf(_0x353580-0x102,_0x353580,_0xf7c3fa- -0x200,_0x4ffbc6-0x62);}const _0x8ccfda=extension_settings[extensionName][_0x52a359(0x4f0,0x420,0x47d,0x44a)+_0x25d071(0x541,0x4ee,0x48c,0x5a7)+'s']||{};function _0x25d071(_0x883038,_0x5451ca,_0xc0dbdb,_0x4e92cb){return _0x41b3e0(_0x883038-0x197,_0x5451ca- -0x153,_0xc0dbdb-0x4b,_0xc0dbdb);}const _0x1fc8d8=extension_settings[extensionName][_0x52a359(0x3be,0x461,0x3f4,0x362)+_0x52a359(0x3a6,0x3ae,0x400,0x440)+_0x52a359(0x497,0x3fd,0x407,0x46d)];return _0x8ccfda[_0x1fc8d8]||_0x8ccfda[Object[_0x52a359(0x418,0x410,0x435,0x39e)](_0x8ccfda)[0x26ee+-0x169b+-0x1053]]||{};}export function getEffectiveConfigForRequestType(_0x1c9a5b){const _0x456205=extension_settings[extensionName][_0xdabba8(0x5a6,0x481,0x50a,0x51f)+_0xdabba8(0x496,0x4ee,0x521,0x4d5)+'figs']||{},_0x2c6f91={};_0x2c6f91[_0x361d05(0x2df,0x3d9,0x37a,0x30c)+'e']='默认',_0x2c6f91[_0xdabba8(0x496,0x453,0x419,0x461)+_0xdabba8(0x5f7,0x4cc,0x55a,0x603)]='默认';const _0x15c4c3=_0x456205[_0x1c9a5b]||_0x2c6f91;function _0xdabba8(_0x33539f,_0x201b5b,_0x15bae6,_0x41ae2f){return _0x41b3e0(_0x33539f-0x111,_0x15bae6- -0x114,_0x15bae6-0x44,_0x41ae2f);}const _0x1e1d1e=extension_settings[extensionName][_0x361d05(0x246,0x388,0x2f3,0x2d5)+'es']||{},_0x5e1a2e=extension_settings[extensionName]['test_conte'+_0x361d05(0x3d7,0x346,0x3dc,0x3fd)+'s']||{},_0x16a5f5=_0x15c4c3[_0x361d05(0x3fc,0x348,0x37a,0x335)+'e']||'默认',_0x13ab57=_0x1e1d1e[_0x16a5f5]||_0x1e1d1e[Object[_0x361d05(0x372,0x3ee,0x38c,0x36b)](_0x1e1d1e)[0xd45*0x1+0x3ab+-0x4*0x43c]]||{},_0x49568b=_0x15c4c3[_0x361d05(0x23b,0x237,0x2c8,0x25c)+'ofile']||'默认',_0xbcc61a=_0x5e1a2e[_0x49568b]||_0x5e1a2e[Object[_0xdabba8(0x51a,0x4c9,0x4dd,0x510)](_0x5e1a2e)[-0x70*0x3f+-0x1*0x1d0b+0x389b]]||{},_0x3fed97={};_0x3fed97[_0x361d05(0x382,0x43d,0x3ef,0x405)]=_0x13ab57[_0x361d05(0x40c,0x395,0x3ef,0x340)]||'',_0x3fed97[_0xdabba8(0x563,0x515,0x534,0x55a)]=_0x13ab57[_0x361d05(0x49d,0x43e,0x3e3,0x33f)]||'',_0x3fed97[_0xdabba8(0x5be,0x535,0x51e,0x4a1)]=_0x13ab57[_0xdabba8(0x553,0x5ad,0x51e,0x4c0)]||'';function _0x361d05(_0x2717c6,_0x39dda2,_0x225039,_0x529a07){return _0x5785bf(_0x2717c6-0x78,_0x529a07,_0x225039- -0x2a9,_0x529a07-0xb7);}return _0x3fed97[_0xdabba8(0x3a3,0x46d,0x408,0x388)+'e']=_0x13ab57[_0x361d05(0x251,0x1fa,0x2b7,0x219)+'e']??-0x1*0xa1+0x647*-0x1+0x1a*0x44+0.7,_0x3fed97[_0xdabba8(0x4d0,0x3c5,0x455,0x487)]=_0x13ab57[_0xdabba8(0x465,0x470,0x455,0x4d3)]??0x21ea+0x1802+-0x39eb,_0x3fed97[_0x361d05(0x333,0x430,0x3a0,0x368)]=_0x13ab57[_0x361d05(0x40c,0x420,0x3a0,0x363)]??0x182f+0xd*-0xd2+0x3d7*-0x3,_0x3fed97['stream']=_0x13ab57[_0x361d05(0x336,0x330,0x39d,0x3a9)]??![],_0x3fed97[_0x361d05(0x3b6,0x293,0x346,0x3c5)+'xy']=_0x13ab57[_0x361d05(0x301,0x2c2,0x346,0x3db)+'xy']??![],_0x3fed97[_0xdabba8(0x4d4,0x530,0x4b8,0x47b)]=_0xbcc61a,_0x3fed97;}export function buildPromptForRequestType(_0x4ebef9,_0x489bbe=''){const _0x1275a8={'siYNM':function(_0x2530f6,_0x4bc7cf){return _0x2530f6!==_0x4bc7cf;},'TuEDS':_0x5adb9d(0x134,0xf8,0x93,0x62),'dicRY':function(_0x4d407e,_0x42501f){return _0x4d407e===_0x42501f;},'ZKrAD':_0x141f6e(0x4c8,0x589,0x548,0x4d0),'gacND':_0x141f6e(0x479,0x479,0x466,0x4cb),'LLSnp':function(_0x471499,_0x4a8d6e){return _0x471499!==_0x4a8d6e;},'NgQlS':'user','KwlNB':function(_0x399301,_0x2c6c64){return _0x399301!==_0x2c6c64;},'qJqfF':'GBVSL','JKyxy':function(_0x70aa2,_0x24bb10){return _0x70aa2(_0x24bb10);},'wyBTg':function(_0x343165,_0xd4ba29){return _0x343165(_0xd4ba29);}};function _0x5adb9d(_0x364b62,_0x6c164b,_0xdeb223,_0x1c6ba0){return _0x5785bf(_0x364b62-0x1ed,_0x1c6ba0,_0xdeb223- -0x53e,_0x1c6ba0-0xcb);}const _0x2e618f=extension_settings[extensionName][_0x141f6e(0x4a1,0x4d6,0x50b,0x4c9)+_0x5adb9d(0x190,0x157,0x13b,0x8c)+_0x5adb9d(0xc,-0xd,0x3,-0x3)]||{},_0x53784e={};_0x53784e[_0x141f6e(0x42c,0x48f,0x41a,0x40e)+_0x141f6e(0x54d,0x4ce,0x55b,0x613)]='默认';const _0x56735d=_0x2e618f[_0x4ebef9]||_0x53784e,_0x45abe1=_0x56735d[_0x5adb9d(0x35,-0x34,0x33,0xd0)+'ofile']||'默认',_0x15b27a=extension_settings[extensionName]['test_conte'+_0x141f6e(0x510,0x599,0x52e,0x590)+'s']||{};function _0x141f6e(_0x30dcaa,_0xe1e9ae,_0x5ef11f,_0x75a296){return _0x41b3e0(_0x30dcaa-0x139,_0x5ef11f- -0x113,_0x5ef11f-0x175,_0xe1e9ae);}const _0x2e3ae8=_0x15b27a[_0x45abe1]||_0x15b27a[Object[_0x5adb9d(0x18e,0x104,0xf7,0x19e)](_0x15b27a)[0x35*-0xa0+-0x114c+-0x326c*-0x1]]||{},_0x517499=[];if(_0x2e3ae8['entries']&&Array[_0x141f6e(0x3e7,0x416,0x3fb,0x39c)](_0x2e3ae8[_0x141f6e(0x581,0x5b8,0x51e,0x54a)]))_0x2e3ae8['entries'][_0x141f6e(0x4b9,0x3b5,0x412,0x45b)](_0x4dc732=>{function _0x58827b(_0x5c0fc5,_0x90923a,_0x465bfb,_0x387ee3){return _0x141f6e(_0x5c0fc5-0x117,_0x387ee3,_0x465bfb-0x14d,_0x387ee3-0x6a);}function _0x11b410(_0x34f2a4,_0x507473,_0x3f16f6,_0x5ed3bb){return _0x5adb9d(_0x34f2a4-0x1bd,_0x507473-0xf7,_0x507473-0x265,_0x5ed3bb);}if(_0x1275a8[_0x11b410(0x2f9,0x329,0x27f,0x2c8)]('HtgaH',_0x1275a8[_0x58827b(0x5e0,0x670,0x68b,0x605)])){if(!_0x4dc732[_0x58827b(0x5d5,0x658,0x616,0x675)])return;if(!_0x4dc732[_0x11b410(0x42a,0x390,0x34b,0x2d9)]||_0x1275a8['dicRY'](_0x4dc732[_0x58827b(0x637,0x680,0x65f,0x634)][_0x11b410(0x2bd,0x2dd,0x2eb,0x2da)](),''))return;if(_0x1275a8[_0x58827b(0x6ad,0x710,0x680,0x647)](_0x4dc732[_0x58827b(0x6a4,0x5be,0x662,0x688)+'e'],_0x1275a8[_0x11b410(0x3b7,0x3d6,0x477,0x3f8)])){if(!_0x489bbe||!checkTriggerWords(_0x4dc732[_0x58827b(0x67a,0x534,0x5d5,0x5c8)+'ds'],_0x489bbe))return;}const _0x5cf18e={};_0x5cf18e[_0x58827b(0x6c6,0x5fe,0x669,0x5c7)]=_0x4dc732['role']||_0x11b410(0x356,0x3bd,0x2ff,0x323),_0x5cf18e[_0x11b410(0x3b4,0x390,0x36e,0x406)]=_0x4dc732[_0x11b410(0x3c7,0x390,0x365,0x44a)],_0x517499[_0x58827b(0x5f8,0x6ff,0x656,0x6b0)](_0x5cf18e);}else _0x23d590(_0x528494);});else _0x2e3ae8[_0x141f6e(0x3f7,0x437,0x3f5,0x385)]&&Array[_0x141f6e(0x3c6,0x364,0x3fb,0x480)](_0x2e3ae8['history'])&&(_0x1275a8['dicRY'](_0x1275a8['qJqfF'],_0x1275a8[_0x141f6e(0x432,0x411,0x424,0x445)])?_0x2e3ae8['history'][_0x141f6e(0x4b2,0x418,0x412,0x461)](_0x28cfe8=>{function _0x3b162f(_0x51db44,_0x4848ce,_0x48903d,_0x4e64fd){return _0x141f6e(_0x51db44-0x8a,_0x51db44,_0x4e64fd- -0xb1,_0x4e64fd-0x2e);}function _0x3f510a(_0x487a0f,_0x5c4ea0,_0x381dbe,_0x79a74e){return _0x141f6e(_0x487a0f-0x115,_0x381dbe,_0x487a0f- -0x418,_0x79a74e-0x102);}if(_0x1275a8[_0x3b162f(0x3dc,0x4aa,0x498,0x482)]('VAyAG',_0x3b162f(0x333,0x39a,0x3e3,0x3ba))){const _0x58a879={'UAUJy':function(_0x32a053,_0x52ab09){return _0x1275a8['siYNM'](_0x32a053,_0x52ab09);},'gHuHy':_0x1275a8[_0x3b162f(0x482,0x420,0x4ba,0x4b1)]};_0x4bd9ac[_0x3b162f(0x349,0x2d2,0x370,0x344)][_0x3f510a(-0x6,-0x43,0x42,0x8)](_0x34a9d9=>{function _0x336795(_0x119dab,_0x4f2e3b,_0x896489,_0x565f21){return _0x3f510a(_0x4f2e3b-0x5a2,_0x4f2e3b-0x16d,_0x119dab,_0x565f21-0xb9);}function _0x4e62f2(_0x29a42e,_0x365dbb,_0xd93dca,_0x44284c){return _0x3b162f(_0x44284c,_0x365dbb-0xe4,_0xd93dca-0x82,_0xd93dca-0x13);}if(_0x34a9d9[_0x4e62f2(0x3ec,0x44a,0x4a1,0x44d)]&&_0x58a879[_0x336795(0x584,0x61b,0x654,0x585)](_0x34a9d9[_0x4e62f2(0x465,0x407,0x4a1,0x494)]['trim'](),'')){const _0x2cc31a={};_0x2cc31a[_0x336795(0x757,0x6a6,0x66b,0x67d)]=_0x4e62f2(0x400,0x422,0x4a1,0x4cf),_0x2cc31a[_0x4e62f2(0x4cf,0x491,0x474,0x3e4)]=_0x34a9d9['user'],_0x29db0a[_0x336795(0x627,0x693,0x672,0x5dd)](_0x2cc31a);}if(_0x34a9d9[_0x4e62f2(0x341,0x47c,0x3c8,0x332)]&&_0x58a879[_0x4e62f2(0x3b1,0x3c2,0x3f3,0x3d8)](_0x34a9d9[_0x336795(0x5a9,0x5f0,0x5fb,0x62d)][_0x336795(0x545,0x5e9,0x556,0x54a)](),'')){const _0x46ad50={};_0x46ad50[_0x4e62f2(0x531,0x508,0x47e,0x44b)]=_0x58a879[_0x336795(0x528,0x579,0x58c,0x5d6)],_0x46ad50['content']=_0x34a9d9[_0x336795(0x66b,0x5f0,0x584,0x626)],_0xa0dd9[_0x4e62f2(0x4e9,0x3fe,0x46b,0x465)](_0x46ad50);}});}else{if(_0x28cfe8['user']&&_0x1275a8['LLSnp'](_0x28cfe8[_0x3b162f(0x3e0,0x41a,0x3ea,0x48e)][_0x3b162f(0x39e,0x3e8,0x33a,0x3ae)](),'')){const _0x587ebc={};_0x587ebc[_0x3f510a(0x104,0x179,0x10b,0x13c)]=_0x1275a8[_0x3f510a(0xe4,0x122,0x13e,0x124)],_0x587ebc[_0x3b162f(0x447,0x43c,0x430,0x461)]=_0x28cfe8[_0x3f510a(0x127,0x102,0x8f,0x19c)],_0x517499[_0x3f510a(0xf1,0x66,0xcc,0x74)](_0x587ebc);}if(_0x28cfe8[_0x3b162f(0x40d,0x3ad,0x462,0x3b5)]&&_0x1275a8[_0x3f510a(0x141,0x1ac,0xcb,0x1d9)](_0x28cfe8[_0x3b162f(0x3fa,0x447,0x3a4,0x3b5)]['trim'](),'')){const _0x345f3b={};_0x345f3b[_0x3f510a(0x104,0x9f,0x17e,0x6a)]=_0x3b162f(0x42f,0x361,0x36b,0x3b5),_0x345f3b['content']=_0x28cfe8[_0x3b162f(0x408,0x32f,0x462,0x3b5)],_0x517499[_0x3f510a(0xf1,0x166,0x7f,0xeb)](_0x345f3b);}}}):_0x4db485=''+_0x1312fd[_0x5adb9d(0x9e,0xf3,0xd4,0x66)](_0xa3e0d9[_0x141f6e(0x457,0x48c,0x468,0x3d1)]));const _0x416e42=_0x1275a8[_0x5adb9d(0x125,0xda,0xe8,0x19c)](mergeAdjacentMessages,_0x517499),_0x5abeba=_0x1275a8[_0x141f6e(0x3d6,0x399,0x421,0x4c8)](processRollPlaceholders,_0x416e42);return _0x5abeba;}const _0x2f9101={};_0x2f9101['image_gen']=_0x5785bf(0x5ef,0x69d,0x67c,0x6cf),_0x2f9101['char_desig'+'n']=_0x41b3e0(0x4e4,0x55c,0x519,0x4c5),_0x2f9101[_0x5785bf(0x56f,0x6b9,0x619,0x648)+'ay']=_0x41b3e0(0x5bd,0x603,0x5f4,0x5bf),_0x2f9101[_0x41b3e0(0x509,0x57d,0x501,0x62d)+'y']=_0x5785bf(0x499,0x5b8,0x54f,0x5ee),_0x2f9101[_0x41b3e0(0x52a,0x514,0x4f8,0x4ae)+'n']='翻译',_0x2f9101[_0x5785bf(0x5f4,0x5a4,0x5f3,0x5bb)]=_0x41b3e0(0x656,0x5ba,0x556,0x66c);const REQUEST_TYPE_NAMES=_0x2f9101;export async function executeTypedLLMRequest(_0x41c9ca,_0x8257fb,_0x371ad5,_0x200cc5=null){const _0x2368ba={'WFitd':function(_0x21ba74){return _0x21ba74();},'KzvGW':'流式解析警告:','bzhZk':_0x146c8b(-0x271,-0x267,-0x1ba,-0x13b),'vvllA':function(_0x43302d,_0x8ff7b0){return _0x43302d(_0x8ff7b0);},'RvjBB':_0xed9347(0x264,0x2a5,0x201,0x17a),'RyQnk':_0xed9347(0x229,0x20e,0x1e3,0x192),'hqvak':function(_0x49bf5f,_0x3657f2){return _0x49bf5f+_0x3657f2;},'CIkfh':_0xed9347(0x2e5,0x246,0x287,0x2b6),'GFRMr':_0xed9347(0x2cd,0x329,0x2d2,0x2f6)+_0xed9347(0x312,0x2a0,0x2d3,0x2e7)+_0xed9347(0x20e,0x307,0x277,0x21b)+_0x146c8b(-0x172,-0x235,-0x1fe,-0x1ef)+_0x146c8b(-0x208,-0x109,-0x174,-0x146),'WlOcP':_0x146c8b(-0x277,-0x1e6,-0x1d9,-0x179),'OIfYX':_0x146c8b(-0x273,-0x176,-0x21c,-0x2cd)+_0x146c8b(-0xea,-0xbb,-0x120,-0x18e),'OjOjP':function(_0x135686,_0xee74cf){return _0x135686||_0xee74cf;},'bLMWK':_0x146c8b(-0x1e6,-0x180,-0x1ef,-0x182)+_0x146c8b(-0x206,-0x273,-0x1c6,-0x1bc),'uAsyQ':function(_0x425212,_0x7e1b42){return _0x425212(_0x7e1b42);},'yenNv':function(_0x44ae56,_0x15084){return _0x44ae56(_0x15084);},'QLGPP':function(_0x1d05a4,_0x2a379e){return _0x1d05a4(_0x2a379e);},'mzNAi':function(_0x18bc8f,_0x7b88f9){return _0x18bc8f||_0x7b88f9;},'EzLPs':'EsBNX','aEcDt':_0x146c8b(-0x222,-0x211,-0x1eb,-0x23c)+'nds/chat-c'+_0xed9347(0x1f8,0x1c9,0x177,0x13f)+_0xed9347(0x248,0x1b7,0x220,0x16f),'rFKzH':_0x146c8b(-0x11d,-0x8f,-0x101,-0x151),'dPkGG':function(_0xab8464,_0x36fc28){return _0xab8464!==_0x36fc28;},'PRQUe':_0x146c8b(-0xae,-0x146,-0x146,-0xdc),'wngyk':function(_0x3553bc,_0x447ccf,_0x13a8f8){return _0x3553bc(_0x447ccf,_0x13a8f8);},'FBWRc':'POST','rtvgi':_0xed9347(0x2a7,0x24c,0x2e6,0x37f),'gWMog':_0x146c8b(-0x129,-0x1ac,-0x17c,-0x113),'reTye':function(_0xcb88,_0x5ce627){return _0xcb88===_0x5ce627;},'lkNTl':_0xed9347(0x1c7,0x2f2,0x24b,0x267),'QRcIJ':function(_0x52755d,_0x49fbc0){return _0x52755d>_0x49fbc0;},'RBavL':function(_0x48093c,_0x34e8b6){return _0x48093c!==_0x34e8b6;},'xmuQZ':_0x146c8b(-0x143,-0xc8,-0x15d,-0x1e3),'XRXCT':_0x146c8b(-0x218,-0x25e,-0x1e8,-0x1dd),'FIzcG':_0xed9347(0x17d,0x21a,0x1dc,0x217),'LYkkE':_0x146c8b(-0x1a6,-0x18d,-0x17d,-0xc5),'kJZQy':_0xed9347(0x26b,0x2a7,0x2d5,0x2cd)+'E]','jTucL':_0x146c8b(-0x133,-0x12f,-0xf4,-0x4e),'OSFsr':function(_0x2fe3ab,_0x5abc13){return _0x2fe3ab===_0x5abc13;},'sjjjH':_0xed9347(0x27b,0x2a1,0x23f,0x2ef),'Igsip':_0x146c8b(-0x95,-0x1ac,-0x111,-0xcc),'lWHBB':_0xed9347(0x10b,0x193,0x192,0x185),'qnGnZ':_0x146c8b(-0x19c,-0x21a,-0x1ea,-0x1b8),'PCEwX':'OuPHy','UScuj':'ovHLd','bnAOW':_0xed9347(0x190,0x112,0x1b7,0x13a),'hnGvD':'YEeQf','kVwgY':function(_0xffcc6e,_0x2814dc){return _0xffcc6e===_0x2814dc;},'ItLVH':function(_0x522515,_0x5329f6){return _0x522515!==_0x5329f6;},'YQrHB':'UVbvE','FIfYi':_0xed9347(0x253,0x238,0x299,0x2a4),'fWSPj':'lKDEE','cZgeP':function(_0x1c41ca,_0x4afdd2){return _0x1c41ca(_0x4afdd2);},'etIDq':function(_0x1450dc,_0x3cd0bf){return _0x1450dc(_0x3cd0bf);},'rzCJA':function(_0x8dde04,_0x57f757){return _0x8dde04!==_0x57f757;},'gzqMb':_0xed9347(0x2cd,0x19c,0x22b,0x263),'LPfGS':_0xed9347(0x229,0x205,0x199,0x233),'zhMIg':_0xed9347(0x375,0x375,0x2bf,0x243)+'orted','kjVvG':function(_0x3f3912,_0x40ed14){return _0x3f3912!==_0x40ed14;},'AoLLZ':'iAHaf','PeCLq':function(_0x1028bd,_0x60d7b2){return _0x1028bd(_0x60d7b2);}},{prompt:_0x321a79,id:_0x11ce9f}=_0x41c9ca;function _0x146c8b(_0x1dd5c1,_0x2af70c,_0x1d4287,_0x15f7a2){return _0x41b3e0(_0x1dd5c1-0xcf,_0x1d4287- -0x73d,_0x1d4287-0x1ae,_0x15f7a2);}if(_0x2368ba[_0x146c8b(-0x173,-0x18b,-0x22d,-0x1ac)](!_0x11ce9f,!_0x321a79))return;currentLLMRequestController&&(currentLLMRequestController[_0x146c8b(-0x1b2,-0x8f,-0x140,-0xc2)](),toastr[_0xed9347(0x153,0x167,0x1b8,0x162)](_0x2368ba[_0x146c8b(-0x101,-0x15e,-0x112,-0x167)]));currentLLMRequestController=new AbortController();const _0x5b2290=currentLLMRequestController['signal'],_0x43b822=currentLLMRequestController,_0x42db89=REQUEST_TYPE_NAMES[_0x8257fb]||_0x8257fb,_0x57bf40={};_0x57bf40[_0x146c8b(-0x121,-0x143,-0x16d,-0x166)]=_0xed9347(0x2a4,0x384,0x2dc,0x302)+_0x42db89,_0x57bf40[_0xed9347(0x1e9,0x2de,0x293,0x2bf)]=TaskType[_0x146c8b(-0x19c,-0x217,-0x1d0,-0x242)],_0x57bf40[_0x146c8b(-0xc4,-0x103,-0xfa,-0x1ab)]=_0x11ce9f;const _0x24fdf1=taskQueue[_0x146c8b(-0x2bb,-0x213,-0x21b,-0x1f1)](_0x57bf40);llmTaskControllers[_0xed9347(0x264,0x14b,0x1b5,0x100)](_0x24fdf1,currentLLMRequestController),taskQueue['updateStat'+'us'](_0x24fdf1,TaskStatus[_0x146c8b(-0x18d,-0x19a,-0x1c5,-0x16f)]),_0x2368ba['WFitd'](startFabLoading);let _0x48555b=![];_0x2368ba[_0xed9347(0x2ac,0x2a4,0x28d,0x342)](clearLog),_0x2368ba[_0x146c8b(-0x1a1,-0x1cb,-0x22c,-0x1b3)](addLog,_0xed9347(0x1ce,0x33e,0x282,0x32d)+_0xed9347(0x27d,0x281,0x24d,0x2dd)+_0x42db89+_0xed9347(0x15c,0x256,0x1cb,0x23f)),_0x2368ba[_0x146c8b(-0x162,-0x88,-0xe5,-0x11e)](addLog,_0xed9347(0x303,0x259,0x2b9,0x25b)+_0x11ce9f),_0x2368ba['yenNv'](addLog,_0x146c8b(-0x94,-0x12b,-0x13c,-0xa8)+':'),addLog(formatPromptForDisplay(_0x321a79));const _0x17e27f=_0x2368ba[_0xed9347(0x210,0x186,0x239,0x2f4)](getEffectiveConfigForRequestType,_0x8257fb),{api_url:_0x440acf,api_key:_0xe9cfc8,model:_0x41148e,temperature:_0x477f28,top_p:_0x3af60b,max_tokens:_0x55fdb5,stream:_0x347c2e,bypass_proxy:_0x17f97c}=_0x17e27f;if(_0x2368ba[_0xed9347(0x23e,0x319,0x2af,0x22a)](!_0x440acf,!_0xe9cfc8)||!_0x41148e){const _0x1ac413=_0x42db89+(_0xed9347(0x1a5,0x234,0x244,0x277)+_0xed9347(0x236,0x235,0x264,0x1a6)+_0x146c8b(-0x124,-0x17e,-0xd6,-0x11f)+'置。');toastr[_0x146c8b(-0x215,-0x1ef,-0x1c2,-0x14a)](_0x1ac413);const _0x2058ff={};_0x2058ff['success']=![],_0x2058ff['result']=_0x1ac413,_0x2058ff['id']=_0x11ce9f,eventSource['emit'](_0x371ad5,_0x2058ff);return;}const _0x5e0aaa=_0x440acf['replace'](/\/$/,'');let _0x5e87c6,_0x565c81,_0x325b3c;function _0xed9347(_0x4e3fbf,_0x1cc4a8,_0x272bee,_0x168481){return _0x41b3e0(_0x4e3fbf-0x17c,_0x272bee- -0x38e,_0x272bee-0x194,_0x168481);}if(_0x17f97c){if(_0xed9347(0x17d,0x181,0x234,0x279)!==_0x2368ba[_0x146c8b(-0x149,-0x22c,-0x182,-0x15f)]){_0x5e87c6=_0x5e0aaa+(_0x146c8b(-0x1f9,-0x1fc,-0x1a5,-0x222)+_0x146c8b(-0xa3,-0x14f,-0xd8,-0x10b));const _0x4765b6={};_0x4765b6[_0x146c8b(-0x28c,-0x1f3,-0x1d1,-0x273)+'pe']=_0x2368ba[_0xed9347(0x240,0x1fd,0x218,0x234)],_0x4765b6[_0x146c8b(-0xad,-0x7b,-0x10f,-0xbb)+_0xed9347(0x260,0xf6,0x1ad,0x1c0)]=_0x146c8b(-0xcd,-0x14b,-0x102,-0x1b1)+_0xe9cfc8,_0x565c81=_0x4765b6;const _0x534ecd={};_0x534ecd[_0xed9347(0x230,0x28e,0x2a4,0x22e)]=_0x41148e,_0x534ecd[_0x146c8b(-0x1c9,-0x1be,-0x1b2,-0x148)]=_0x321a79,_0x534ecd['temperatur'+'e']=_0x477f28,_0x534ecd['top_p']=_0x3af60b,_0x534ecd[_0x146c8b(-0x16c,-0x18b,-0x138,-0x194)]=_0x55fdb5,_0x534ecd[_0x146c8b(-0x112,-0xdb,-0x13b,-0x164)]=_0x347c2e,_0x325b3c=_0x534ecd;}else _0x10ea07===_0x3d505c&&(_0x4a55d5=null),(!_0x463bee||_0x122588===null)&&_0x2368ba[_0xed9347(0x2b9,0x209,0x28d,0x1f3)](_0x18166e);}else{let _0x59b72e=_0x5e0aaa;!_0x59b72e[_0xed9347(0x248,0x2fc,0x24a,0x1a6)](_0x146c8b(-0x184,-0x25a,-0x1ae,-0x13c))&&!_0x59b72e[_0xed9347(0x1fa,0x137,0x1a0,0x1a3)]('/v1/')&&(_0x59b72e=_0x2368ba[_0xed9347(0x17a,0x251,0x1e0,0x188)](_0x59b72e,_0x2368ba[_0x146c8b(-0x12e,-0x208,-0x1d7,-0x14d)]));_0x59b72e=_0x59b72e[_0x146c8b(-0x17c,-0x158,-0x141,-0x1fc)](/\/v1\/$/,_0x146c8b(-0x257,-0x248,-0x1ae,-0x192)),_0x5e87c6=_0x2368ba['aEcDt'],_0x565c81=_0x2368ba[_0xed9347(0x270,0x2a0,0x2bc,0x379)](getRequestHeaders,window[_0x146c8b(-0x17a,-0x12d,-0xc6,-0x176)]);const _0x4198d8={};_0x4198d8['chat_compl'+'etion_sour'+'ce']=_0x2368ba[_0xed9347(0x19f,0x21b,0x17f,0x20a)],_0x4198d8[_0xed9347(0x253,0x1bc,0x1e5,0x1dd)]=_0x59b72e,_0x4198d8['custom_inc'+_0x146c8b(-0x19f,-0x227,-0x208,-0x251)+'rs']='Authorizat'+'ion:\x20\x22Bear'+_0x146c8b(-0x1e9,-0x21a,-0x222,-0x28d)+_0xe9cfc8+'\x22',_0x4198d8['model']=_0x41148e,_0x4198d8[_0xed9347(0x1a9,0x19b,0x1fd,0x1a3)]=_0x321a79,_0x4198d8[_0x146c8b(-0x2a6,-0x1da,-0x221,-0x182)+'e']=_0x477f28,_0x4198d8[_0xed9347(0x17a,0x1a0,0x1db,0x23a)]=_0x3af60b,_0x4198d8[_0xed9347(0x214,0x27a,0x277,0x1cf)]=_0x55fdb5,_0x4198d8[_0xed9347(0x262,0x1d6,0x274,0x313)]=_0x347c2e,_0x325b3c=_0x4198d8;}if(_0x200cc5){if(_0x2368ba['dPkGG'](_0x2368ba['PRQUe'],_0x2368ba['PRQUe'])){_0x139e58=''+_0x17d371[_0xed9347(0x1b5,0x1e1,0x1ed,0x15a)][_0x146c8b(-0x21c,-0x240,-0x234,-0x184)];const _0x1bd6a0=[];if(_0x3234d1[_0xed9347(0x13c,0x12f,0x1ed,0x1b2)][_0xed9347(0x2e5,0x215,0x293,0x1e9)])_0x1bd6a0['push'](_0x146c8b(-0x294,-0x295,-0x1ee,-0x1ba)+_0xed005[_0xed9347(0x1cd,0x200,0x1ed,0x16a)][_0xed9347(0x2a9,0x25e,0x293,0x32b)]);if(_0x368b8f[_0x146c8b(-0x25a,-0x1ae,-0x1c2,-0x174)][_0xed9347(0x1d4,0x1e1,0x280,0x2a4)])_0x1bd6a0['push']('代码:\x20'+_0x2ed917['error'][_0x146c8b(-0x12f,-0x74,-0x12f,-0x90)]);_0x1bd6a0[_0x146c8b(-0x181,-0x14d,-0x1e6,-0x14e)]>0x6f4*-0x3+-0x1*-0x1632+-0x156&&(_0x595364+='\x20('+_0x1bd6a0[_0x146c8b(-0x1f5,-0x1f6,-0x1e0,-0x28c)](',\x20')+')');}else _0x2368ba[_0x146c8b(-0x1ae,-0x151,-0xf3,-0x54)](_0x200cc5,_0xed9347(0x1cc,0x274,0x249,0x248)+_0x42db89+_0xed9347(0x125,0x178,0x1ab,0x266));}try{const _0x453d68=await _0x2368ba[_0x146c8b(-0x7f,-0x126,-0xd7,-0x16f)](fetch,_0x5e87c6,{'method':_0x2368ba[_0x146c8b(-0x163,-0x198,-0xfd,-0x56)],'headers':_0x565c81,'body':JSON['stringify'](_0x325b3c),'signal':_0x5b2290});if(!_0x453d68['ok']){if(_0x2368ba[_0xed9347(0x162,0x161,0x209,0x229)](_0x2368ba['rtvgi'],_0x2368ba[_0xed9347(0x1a9,0x218,0x265,0x2e0)])){try{const _0x36e643=await _0x453d68[_0x146c8b(-0x1d1,-0x1ca,-0x188,-0xd3)]();if(_0x36e643[_0x146c8b(-0x238,-0x14d,-0x1c2,-0x1ee)]){let _0x40120e;if(_0x2368ba[_0x146c8b(-0xb0,-0x1e1,-0x134,-0x18a)](typeof _0x36e643[_0x146c8b(-0x159,-0x223,-0x1c2,-0x115)],_0x2368ba[_0xed9347(0x16d,0x179,0x1b0,0x24c)])&&_0x36e643[_0x146c8b(-0x12a,-0x10e,-0x1c2,-0x112)]['message']){_0x40120e=''+_0x36e643['error'][_0xed9347(0x227,0x233,0x17b,0x19c)];const _0x30d68c=[];if(_0x36e643[_0xed9347(0x1b1,0x173,0x1ed,0x221)][_0xed9347(0x2f9,0x29b,0x293,0x2c1)])_0x30d68c[_0x146c8b(-0x1c6,-0x117,-0x121,-0x177)](_0xed9347(0x10d,0x186,0x1c1,0x1ed)+_0x36e643[_0xed9347(0x299,0x217,0x1ed,0x26b)][_0xed9347(0x239,0x23e,0x293,0x26c)]);if(_0x36e643['error'][_0xed9347(0x30b,0x2c5,0x280,0x1d9)])_0x30d68c[_0xed9347(0x1fb,0x1d7,0x28e,0x284)]('代码:\x20'+_0x36e643[_0x146c8b(-0x133,-0x1a8,-0x1c2,-0x16b)][_0xed9347(0x2dc,0x264,0x280,0x2f1)]);_0x2368ba[_0xed9347(0x20e,0x21f,0x248,0x1d1)](_0x30d68c[_0x146c8b(-0x1ae,-0x140,-0x1e6,-0x280)],-0x367+0xc98+-0xd*0xb5)&&(_0x40120e+='\x20('+_0x30d68c['join'](',\x20')+')');}else _0x40120e=''+JSON['stringify'](_0x36e643['error']);throw new Error(_0x40120e);}}catch(_0x8b6f9c){if(_0x8b6f9c[_0xed9347(0x100,0x239,0x17b,0xcf)][_0xed9347(0x212,0x10f,0x1a0,0x1d0)](_0xed9347(0x1e0,0x336,0x278,0x2a9))||_0x8b6f9c[_0xed9347(0x12d,0x198,0x17b,0x212)][_0x146c8b(-0x1a1,-0x1e1,-0x20f,-0x280)](_0x2368ba[_0xed9347(0x23e,0x283,0x2c2,0x29c)])){if(_0x2368ba[_0xed9347(0x221,0x242,0x20f,0x1e1)](_0x2368ba[_0xed9347(0x37d,0x348,0x2df,0x319)],_0x2368ba[_0xed9347(0x1f3,0x1d0,0x19c,0x189)]))throw _0x8b6f9c;else _0x268d80['warn'](_0x2368ba[_0xed9347(0x211,0x143,0x1d4,0x137)],_0x5a69cd[_0xed9347(0x157,0x127,0x17b,0x1bb)]);}}throw new Error(_0x146c8b(-0x150,-0x122,-0x1b7,-0x1ae)+_0x453d68[_0x146c8b(-0xe7,-0xfc,-0xc5,-0xaf)]+'\x20'+_0x453d68[_0x146c8b(-0x1df,-0x1bb,-0x1d2,-0x234)]);}else _0x318d17=_0x2368ba[_0xed9347(0x24f,0x209,0x296,0x1fb)],_0x6cc6f7[_0xed9347(0x31c,0x222,0x2c7,0x2f3)](_0x50514c+(':\x20LLM\x20请求返回'+_0xed9347(0xdb,0x1c4,0x18a,0x183)+_0x146c8b(-0x19f,-0x11c,-0xe7,-0xea)+_0x146c8b(-0x1f6,-0x1ec,-0x1e7,-0x1e9)+_0xed9347(0x1e5,0x2cd,0x22a,0x2db)));}let _0x1423f1='';if(_0x347c2e){const _0x25a6a5=_0x453d68[_0x146c8b(-0xb6,-0x17b,-0xf9,-0x1a8)][_0xed9347(0x272,0x24d,0x2e2,0x2ab)](),_0x4884aa=new TextDecoder(_0x2368ba['FIzcG']);let _0x33eace='';while(!![]){if(_0x146c8b(-0x1a6,-0x198,-0x17d,-0x181)!==_0x2368ba[_0xed9347(0x173,0x21c,0x18f,0x243)]){const _0x12efd9=_0x3e295[_0x146c8b(-0x1e4,-0x21b,-0x207,-0x186)](_0x16113b);_0x12efd9&&(_0x12efd9[_0x146c8b(-0xd9,-0x129,-0x140,-0xce)](),_0xf5f5c3[_0xed9347(0x1fd,0x2b9,0x27e,0x210)](_0xbddca2),_0x22f2fc[_0xed9347(0x22e,0x197,0x226,0x2ac)](_0x146c8b(-0x1a7,-0x13c,-0x1b4,-0x11e)+_0xed9347(0x118,0x1b7,0x1b3,0xf6)+_0x346af5));}else{const {done:_0x52d485,value:_0x1362bf}=await _0x25a6a5[_0xed9347(0x21a,0x368,0x2b1,0x238)]();if(_0x52d485)break;const _0x5b8e5b={};_0x5b8e5b[_0xed9347(0x27c,0x27f,0x274,0x278)]=!![],_0x33eace+=_0x4884aa['decode'](_0x1362bf,_0x5b8e5b);const _0x369fec=_0x33eace[_0xed9347(0x30d,0x2a8,0x25e,0x224)]('\x0a');_0x33eace=_0x369fec[_0xed9347(0x1c8,0x28c,0x1fa,0x1f4)]()||'';for(const _0x5c2a72 of _0x369fec){if(_0x2368ba[_0x146c8b(-0x23e,-0x1f7,-0x1a0,-0x155)]('OWLkT',_0xed9347(0x291,0x2f9,0x2a6,0x256))){const {id:_0x13618a}=_0x9235e6;if(!_0x13618a)return;const _0x41e7c6=_0x4828a4[_0x9ef487]||_0x3956a6;_0x5d0bf6[_0x146c8b(-0xf7,-0x1fe,-0x189,-0x23f)]('st-chatu8:'+'\x20收到'+_0x41e7c6+(_0x146c8b(-0x13d,-0x238,-0x19e,-0x241)+_0x146c8b(-0x210,-0x16c,-0x1d5,-0x146))+_0x13618a+')');const _0x198849=_0x2368ba[_0x146c8b(-0x10e,-0x10c,-0xf3,-0x178)](_0x1a2b67,_0x352bef),_0x2d26c4={};_0x2d26c4['prompt']=_0x198849,_0x2d26c4['id']=_0x13618a,_0x425ab5[_0xed9347(0x106,0xd3,0x188,0x1a7)](_0x4cebff,_0x2d26c4);}else{const _0x1cc27b=_0x5c2a72[_0xed9347(0x1f8,0x136,0x1e4,0x1fe)]();if(!_0x1cc27b||_0x2368ba[_0xed9347(0x21e,0x2a2,0x27b,0x32d)](_0x1cc27b,_0x2368ba['kJZQy']))continue;if(_0x1cc27b[_0x146c8b(-0x155,-0x2c9,-0x20d,-0x27e)](_0x2368ba[_0x146c8b(-0x1d4,-0x293,-0x1f1,-0x26f)])){if(_0x2368ba[_0xed9347(0x252,0x1b4,0x19d,0x14e)](_0x2368ba[_0xed9347(0x223,0x197,0x189,0x19d)],_0x146c8b(-0x1e9,-0x11f,-0x170,-0xbc)))try{if(_0x2368ba[_0xed9347(0x26b,0x2cc,0x20f,0x29b)](_0x2368ba[_0xed9347(0x2b2,0x296,0x2d1,0x25b)],_0x2368ba[_0x146c8b(-0x22,-0x24,-0xde,-0x77)]))return;else{const _0x1a8d56=_0x1cc27b['slice'](-0x5*0x376+0x1*-0x1abf+0xeb1*0x3),_0x1d1437=JSON[_0xed9347(0x2ef,0x311,0x2c5,0x2b5)](_0x1a8d56),_0x1f8305=_0x1d1437[_0xed9347(0x2cc,0x305,0x2da,0x390)]?.[-0x2e3*-0x1+-0x27*0xa5+0x1640]?.[_0xed9347(0x2a2,0x238,0x2cc,0x37c)]?.[_0xed9347(0x31c,0x330,0x297,0x257)];if(_0x1f8305){_0x1423f1+=_0x1f8305;if(_0x200cc5){if(_0x2368ba['reTye'](_0x146c8b(-0x49,-0x166,-0xca,-0x168),_0x2368ba[_0xed9347(0x10b,0x112,0x1af,0x126)])){let _0x5e6190=_0x352c1a;!_0x5e6190[_0x146c8b(-0x1aa,-0x123,-0x165,-0xb7)](_0x2368ba[_0xed9347(0x28c,0x165,0x1d8,0x122)])&&!_0x5e6190[_0x146c8b(-0x1c0,-0x284,-0x20f,-0x197)](_0x2368ba[_0xed9347(0x14c,0x20d,0x18c,0x22b)])&&(_0x5e6190=_0x2368ba[_0x146c8b(-0x1ea,-0x149,-0x1cf,-0x1f1)](_0x5e6190,_0x2368ba[_0xed9347(0x1b6,0x12c,0x1d8,0x220)]));_0x5e6190=_0x5e6190[_0x146c8b(-0xe8,-0x1ef,-0x141,-0x1a1)](/\/v1\/$/,_0x2368ba['RvjBB']),_0x23eef8=_0xed9347(0x154,0x17f,0x1c4,0x13a)+'nds/chat-c'+_0x146c8b(-0x262,-0x291,-0x238,-0x199)+_0x146c8b(-0xe0,-0x185,-0x18f,-0x19f),_0x14051a=_0xce72ef(_0x4eda8e[_0xed9347(0x263,0x265,0x2e9,0x2c1)]);const _0x296579={};_0x296579[_0x146c8b(-0x14d,-0x1af,-0x179,-0x17f)+_0x146c8b(-0xad,-0xdf,-0xdb,-0x175)+'ce']=_0xed9347(0x20b,0x232,0x2ae,0x2bf),_0x296579[_0x146c8b(-0x176,-0x1f6,-0x1ca,-0x286)]=_0x5e6190,_0x296579[_0xed9347(0x31a,0x30e,0x2d6,0x240)+'lude_heade'+'rs']='Authorizat'+_0x146c8b(-0x6c,-0x182,-0x107,-0x1c6)+_0x146c8b(-0x197,-0x1b1,-0x222,-0x2b4)+_0x30596c+'\x22',_0x296579[_0x146c8b(-0x1ac,-0x5a,-0x10b,-0x7b)]=_0x4ff710,_0x296579[_0xed9347(0x21a,0x1b5,0x1fd,0x257)]=_0x562ece,_0x296579[_0xed9347(0x1e4,0x11b,0x18e,0x21a)+'e']=_0x4c83e9,_0x296579['top_p']=_0x3a3116,_0x296579['max_tokens']=_0x308008,_0x296579[_0x146c8b(-0x117,-0xfc,-0x13b,-0x1d4)]=![],_0x562d21=_0x296579;}else _0x2368ba[_0xed9347(0x21e,0x2ce,0x2ca,0x315)](_0x200cc5,_0x1423f1);}}}}catch(_0x5a3454){console['warn'](_0x146c8b(-0x2d2,-0x2da,-0x231,-0x27d),_0x5a3454[_0x146c8b(-0x2b3,-0x1a0,-0x234,-0x20f)]);}else{if(_0x1d327b[_0x146c8b(-0x196,-0x1c0,-0x234,-0x1bb)][_0x146c8b(-0x22b,-0x1ef,-0x20f,-0x19c)](_0x146c8b(-0xd2,-0xe1,-0x137,-0x14d))||_0x4baa8c[_0xed9347(0x184,0x17d,0x17b,0x235)][_0x146c8b(-0x231,-0x284,-0x20f,-0x20d)](_0x2368ba[_0xed9347(0x34e,0x334,0x2c2,0x316)]))throw _0x2079bd;}}}}}}if(_0x33eace['trim']()&&_0x2368ba[_0xed9347(0x177,0x2bf,0x209,0x2b3)](_0x33eace[_0xed9347(0x28c,0x191,0x1e4,0x203)](),_0xed9347(0x234,0x35d,0x2d5,0x221)+'E]')&&_0x33eace['trim']()[_0x146c8b(-0x1c4,-0x19d,-0x20d,-0x177)](_0x2368ba[_0xed9347(0x186,0x1d2,0x1be,0x148)])){if(_0x2368ba[_0xed9347(0x1a3,0x103,0x19d,0x12e)](_0x2368ba[_0xed9347(0x242,0x2ca,0x231,0x2af)],_0x2368ba['PCEwX']))_0x3aee33[_0xed9347(0x24c,0x356,0x2c7,0x273)](_0x2368ba[_0xed9347(0x175,0x212,0x21e,0x249)]);else try{if(_0x2368ba[_0x146c8b(-0x203,-0x18e,-0x212,-0x2cc)](_0x2368ba[_0xed9347(0x2c2,0x2e1,0x2d0,0x2bd)],_0x146c8b(-0x130,-0x101,-0x135,-0x180))){const _0x1fc6db=_0x33eace[_0x146c8b(-0x193,-0x1e8,-0x1cb,-0x11e)]()[_0xed9347(0x1d6,0x2a6,0x289,0x28f)](-0x215+-0x3*0xb45+0x2*0x11f5),_0xcc8f7d=JSON[_0x146c8b(-0xdc,-0x13c,-0xea,-0x2e)](_0x1fc6db),_0x174fbc=_0xcc8f7d[_0x146c8b(-0x134,-0x48,-0xd5,-0x78)]?.[-0x198c+0x165f+0x10f*0x3]?.['delta']?.[_0xed9347(0x2f6,0x23f,0x297,0x22e)];if(_0x174fbc){_0x1423f1+=_0x174fbc;if(_0x200cc5){if(_0x2368ba[_0x146c8b(-0xd5,-0xa1,-0x134,-0x16e)](_0x2368ba[_0x146c8b(-0xeb,-0xbb,-0x106,-0x108)],_0x2368ba[_0x146c8b(-0x1d7,-0x16b,-0x144,-0xaf)]))return _0x3feac0;else _0x200cc5(_0x1423f1);}}}else _0x4d7a3d=_0x53467d+_0x2368ba[_0xed9347(0x1c3,0x135,0x1d8,0x28c)];}catch(_0x3b5a2f){console[_0x146c8b(-0x102,-0x13a,-0x11b,-0x131)](_0xed9347(0x35f,0x219,0x2ac,0x283)+_0xed9347(0x259,0x2a5,0x267,0x1ac),_0x3b5a2f[_0xed9347(0x148,0x126,0x17b,0xf8)]);}}!_0x1423f1&&(_0x1423f1='未收到有效回复。',toastr[_0xed9347(0x26b,0x30a,0x2c7,0x26e)](_0x42db89+(_0xed9347(0x13b,0x17e,0x1b2,0x1fc)+_0xed9347(0x183,0xcd,0x18a,0x156)+'断、max_toke'+_0x146c8b(-0x242,-0x261,-0x1e7,-0x1bd)+_0x146c8b(-0xd9,-0x20c,-0x185,-0x232))));}else{if(_0x2368ba[_0x146c8b(-0x1d6,-0x1b8,-0x22a,-0x26b)]('HlzFE',_0xed9347(0x283,0x2cb,0x25a,0x2d9)))return _0x20ea76;else{const _0x3668ce=await _0x453d68['json']();if(_0x3668ce[_0x146c8b(-0x24a,-0x212,-0x1c2,-0x119)]){let _0x3ba377;if(_0x2368ba[_0x146c8b(-0xe7,-0x191,-0x134,-0xd2)](typeof _0x3668ce['error'],_0x2368ba['lkNTl'])&&_0x3668ce['error'][_0x146c8b(-0x2a1,-0x27c,-0x234,-0x290)]){_0x3ba377=''+_0x3668ce[_0x146c8b(-0x110,-0x22b,-0x1c2,-0x255)]['message'];const _0x259dca=[];if(_0x3668ce[_0xed9347(0x1a7,0x290,0x1ed,0x1e0)][_0x146c8b(-0x17a,-0x91,-0x11c,-0x10c)])_0x259dca[_0xed9347(0x2d1,0x1d8,0x28e,0x316)](_0x146c8b(-0x296,-0x233,-0x1ee,-0x140)+_0x3668ce[_0x146c8b(-0x180,-0x20b,-0x1c2,-0x1d6)]['type']);if(_0x3668ce['error'][_0x146c8b(-0x155,-0xa4,-0x12f,-0x155)])_0x259dca[_0xed9347(0x1df,0x1d2,0x28e,0x2cf)](_0x146c8b(-0x15a,-0x1ea,-0x1ac,-0x1b3)+_0x3668ce['error'][_0x146c8b(-0x156,-0xb0,-0x12f,-0xbd)]);if(_0x2368ba[_0xed9347(0x1e6,0x2e9,0x248,0x208)](_0x259dca[_0xed9347(0x135,0x1eb,0x1c9,0x164)],-0xef0+0x3*-0x15b+0x1301)){if(_0x2368ba[_0x146c8b(-0x224,-0x1e7,-0x21f,-0x23b)](_0x2368ba[_0xed9347(0x26f,0x276,0x2cf,0x310)],_0x2368ba[_0xed9347(0x25d,0x2d6,0x26d,0x28a)]))_0x3ba377+='\x20('+_0x259dca[_0xed9347(0x11c,0x231,0x1cf,0x1e8)](',\x20')+')';else{const _0x1a076e=_0x5400a1[_0x5960d6][_0xed9347(0x34c,0x2b0,0x290,0x2d5)+_0x146c8b(-0x1b2,-0xef,-0x108,-0x111)+_0x146c8b(-0x1ed,-0x2c4,-0x240,-0x2b0)]||{},_0x176127={};_0x176127['api_profil'+'e']='默认',_0x176127[_0x146c8b(-0x2c4,-0x1af,-0x210,-0x2cb)+_0x146c8b(-0x87,-0x1b,-0xcf,-0x7a)]='默认';const _0x2bde39=_0x1a076e[_0x248c37]||_0x176127,_0x51c412=_0x2006db[_0x321044]['llm_profil'+'es']||{},_0x3afedc=_0x115b09[_0x48bada][_0xed9347(0x237,0x2c6,0x2ab,0x263)+'xt_profile'+'s']||{},_0x1c5413=_0x2bde39['api_profil'+'e']||'默认',_0x2f5b82=_0x51c412[_0x1c5413]||_0x51c412[_0x588f2a[_0xed9347(0x213,0x1d4,0x263,0x2d5)](_0x51c412)[-0x31*0x34+-0x1f4e+0x2*0x14a1]]||{},_0x517101=_0x2bde39['context_pr'+'ofile']||'默认',_0x591d2b=_0x3afedc[_0x517101]||_0x3afedc[_0x1c9aa6['keys'](_0x3afedc)[0x6e+-0x216b+0x20fd]]||{},_0x2d355d={};return _0x2d355d[_0xed9347(0x2ed,0x262,0x2c6,0x36a)]=_0x2f5b82['api_url']||'',_0x2d355d['api_key']=_0x2f5b82[_0x146c8b(-0x11a,-0x11e,-0xf5,-0x18d)]||'',_0x2d355d['model']=_0x2f5b82[_0x146c8b(-0x128,-0x19b,-0x10b,-0x1b4)]||'',_0x2d355d[_0x146c8b(-0x2e0,-0x1af,-0x221,-0x193)+'e']=_0x2f5b82[_0x146c8b(-0x192,-0x283,-0x221,-0x1f4)+'e']??-0x9b4+0x77*0xe+-0x2*-0x199+0.7,_0x2d355d[_0x146c8b(-0x1f3,-0x223,-0x1d4,-0x24c)]=_0x2f5b82[_0xed9347(0x198,0x18d,0x1db,0x297)]??0x110e*-0x1+-0x8c+0x119b,_0x2d355d['max_tokens']=_0x2f5b82[_0x146c8b(-0x13f,-0x1cf,-0x138,-0x106)]??-0xc55+0x73a+-0x71b*-0x1,_0x2d355d[_0xed9347(0x1e2,0x2ff,0x274,0x1f1)]=_0x2f5b82[_0xed9347(0x1fe,0x1c5,0x274,0x25d)]??![],_0x2d355d[_0xed9347(0x1ce,0x26c,0x21d,0x1ba)+'xy']=_0x2f5b82[_0x146c8b(-0x1a0,-0xea,-0x192,-0x19b)+'xy']??![],_0x2d355d['context']=_0x591d2b,_0x2d355d;}}}else _0x3ba377=''+JSON['stringify'](_0x3668ce[_0x146c8b(-0x1a6,-0x16e,-0x1c2,-0x1f3)]);throw new Error(_0x3ba377);}_0x1423f1=_0x3668ce['choices']?.[0x7b2+-0x1*0x246b+-0x331*-0x9]?.['message']?.['content']||'';!_0x1423f1&&(_0x1423f1=_0x2368ba[_0xed9347(0x2d7,0x2c0,0x296,0x311)],toastr['warning'](_0x42db89+(_0x146c8b(-0x15d,-0x1b0,-0x1fd,-0x24e)+_0xed9347(0xe1,0x1e8,0x18a,0x113)+_0xed9347(0x25c,0x250,0x2c8,0x220)+'ns\x20设置过小、或\x20'+_0x146c8b(-0x1e4,-0x1f2,-0x185,-0x151))));if(_0x200cc5){if(_0x2368ba[_0xed9347(0x1b7,0xe8,0x185,0x115)]('MSjGP',_0x2368ba['fWSPj'])){const _0x5e2a29={};_0x5e2a29[_0xed9347(0x19a,0x2c7,0x228,0x243)]=_0x146c8b(-0x1d3,-0x25b,-0x1bb,-0x1d6),_0x5e2a29[_0x146c8b(-0xec,-0xbc,-0xeb,-0x2e)]='用户',_0x5e2a29[_0x146c8b(-0x168,-0x24b,-0x1c4,-0x1ad)]=_0x2368ba[_0xed9347(0x1ba,0x1ba,0x256,0x1e7)],_0x5e2a29[_0x146c8b(-0x1e0,-0x210,-0x23f,-0x273)]=_0x146c8b(-0x12e,-0x1c5,-0x11a,-0x1d4),_0x5e2a29[_0x146c8b(-0x169,-0xd4,-0x175,-0x144)]='工具';const _0x9d5e6c=_0x5e2a29;return _0x9d5e6c[_0x18a864]||_0x433ee4;}else _0x2368ba['cZgeP'](_0x200cc5,_0x1423f1);}}}_0x2368ba[_0xed9347(0x11f,0x108,0x172,0x157)](addLog,_0x146c8b(-0x177,-0xf8,-0x150,-0xcb)+_0x146c8b(-0x1f1,-0x1d7,-0x1a7,-0x140)),addLog(_0x1423f1),_0x2368ba[_0xed9347(0x30c,0x23e,0x2ca,0x280)](addLog,_0xed9347(0x289,0x1f9,0x282,0x333)+_0xed9347(0x1fe,0x253,0x285,0x249)),taskQueue[_0xed9347(0x254,0x251,0x260,0x1f6)+'sk'](_0x24fdf1,!![]),llmTaskControllers[_0x146c8b(-0x175,-0xc6,-0x131,-0x89)](_0x24fdf1);const _0x5552f4={};_0x5552f4[_0x146c8b(-0x115,-0x114,-0x180,-0x195)]=!![],_0x5552f4[_0xed9347(0x1ca,0x123,0x19b,0x1f9)]=_0x1423f1,_0x5552f4['id']=_0x11ce9f,_0x5552f4[_0x146c8b(-0x148,-0x148,-0xc7,-0x95)]=![],eventSource[_0x146c8b(-0x2c1,-0x18f,-0x227,-0x2e2)](_0x371ad5,_0x5552f4);}catch(_0x1b7b31){if(_0x2368ba[_0x146c8b(-0x239,-0x28c,-0x239,-0x1a1)](_0x2368ba[_0x146c8b(-0x2b7,-0x1bd,-0x22e,-0x22a)],_0x2368ba[_0xed9347(0x11c,0x232,0x181,0x15d)])){_0xe16ed2=_0xa21733+(_0x146c8b(-0x25c,-0x23e,-0x1a5,-0x106)+_0x146c8b(-0x2d,-0x5b,-0xd8,-0x14b));const _0x59ff00={};_0x59ff00[_0xed9347(0x184,0x1b1,0x1de,0x243)+'pe']=_0x2368ba['OIfYX'],_0x59ff00['Authorizat'+_0xed9347(0x268,0x1a3,0x1ad,0x1d3)]='Bearer\x20'+_0x5985a6,_0x3e8dfb=_0x59ff00;const _0x4079d3={};_0x4079d3['model']=_0x39930b,_0x4079d3[_0x146c8b(-0x1bf,-0x232,-0x1b2,-0x13a)]=_0x367db0,_0x4079d3[_0xed9347(0x15c,0x1ad,0x18e,0xdd)+'e']=_0x1ca49f,_0x4079d3[_0x146c8b(-0x1d3,-0x23e,-0x1d4,-0x205)]=_0x2a1f56,_0x4079d3[_0xed9347(0x2e8,0x24e,0x277,0x327)]=_0x285d97,_0x4079d3[_0xed9347(0x224,0x30c,0x274,0x209)]=_0x1cec33,_0x1c1969=_0x4079d3;}else{if(_0x2368ba[_0xed9347(0x1dd,0xf5,0x19d,0x1dc)](_0x1b7b31[_0x146c8b(-0x21f,-0x21b,-0x16d,-0x1ba)],'AbortError')){const _0x28110e=_0xed9347(0x17f,0x21c,0x20c,0x1b6)[_0x146c8b(-0x164,-0x108,-0x151,-0xf0)]('|');let _0x6ee037=-0x1f09*0x1+0x14a9+0xa60;while(!![]){switch(_0x28110e[_0x6ee037++]){case'0':const _0x2d4f82={};_0x2d4f82['name']=_0x2368ba[_0xed9347(0x21e,0x29b,0x224,0x258)],_0x2d4f82[_0x146c8b(-0x284,-0x1a7,-0x234,-0x27b)]=_0x2368ba[_0xed9347(0x2ac,0x2de,0x23c,0x2f8)];const _0x59107b={};_0x59107b[_0xed9347(0x2b1,0x1eb,0x22f,0x241)]=![],_0x59107b[_0xed9347(0x1ed,0x1da,0x19b,0x143)]=null,_0x59107b['id']=_0x11ce9f,_0x59107b[_0xed9347(0x1da,0x215,0x1ed,0x174)]=_0x2d4f82,eventSource[_0xed9347(0x10b,0x10a,0x188,0x212)](_0x371ad5,_0x59107b);continue;case'1':_0x48555b=!![];continue;case'2':llmTaskControllers[_0xed9347(0x2a6,0x263,0x27e,0x1d2)](_0x24fdf1);continue;case'3':taskQueue['updateStat'+'us'](_0x24fdf1,TaskStatus[_0x146c8b(-0x54,-0xe3,-0xc4,-0x81)]);continue;case'4':return;}break;}}console[_0xed9347(0x136,0x131,0x1ed,0x240)](_0x42db89+_0xed9347(0x1f2,0x298,0x223,0x22f),_0x1b7b31);const _0x4b5c6f='请求错误:\x20'+_0x1b7b31[_0x146c8b(-0x1fb,-0x19b,-0x234,-0x22f)];if(_0x200cc5){if(_0x2368ba[_0x146c8b(-0x10d,-0x14c,-0x1ab,-0x192)](_0x2368ba[_0xed9347(0x231,0x221,0x1fc,0x17b)],_0x2368ba['AoLLZ'])){const _0xb799e=_0x1cce9a['slice'](0x15e4*0x1+0x258c+0x1fb*-0x1e),_0x251613=_0x14c4ab[_0xed9347(0x2db,0x268,0x2c5,0x295)](_0xb799e),_0x1d6f86=_0x251613[_0x146c8b(-0x21,-0x141,-0xd5,-0x79)]?.[0x1711+0x1be5+-0x1*0x32f6]?.['delta']?.[_0xed9347(0x255,0x2c7,0x297,0x21e)];_0x1d6f86&&(_0x42db3d+=_0x1d6f86,_0x518351&&_0x53c49e(_0x97f9b6));}else _0x2368ba[_0x146c8b(-0x263,-0x190,-0x21a,-0x295)](_0x200cc5,_0x4b5c6f);}toastr[_0x146c8b(-0x19d,-0x15e,-0x1c2,-0x12a)](_0x1b7b31[_0xed9347(0x15c,0x103,0x17b,0x1ce)]),taskQueue['completeTa'+'sk'](_0x24fdf1,![]),llmTaskControllers['delete'](_0x24fdf1);const _0x272abe={};_0x272abe['success']=![],_0x272abe[_0x146c8b(-0x165,-0x25b,-0x214,-0x1c7)]=_0x4b5c6f,_0x272abe['id']=_0x11ce9f,eventSource[_0xed9347(0xca,0x1b0,0x188,0x176)](_0x371ad5,_0x272abe);}}finally{_0x2368ba['reTye'](currentLLMRequestController,_0x43b822)&&(currentLLMRequestController=null),(!_0x48555b||_0x2368ba['OSFsr'](currentLLMRequestController,null))&&stopFabLoading();}}export async function executeDefaultLLMRequest(_0x4acf77,_0x85c1de,_0x7c40c2=null){const _0x3010c4={'dthVz':function(_0xbd9831,_0x2a250e){return _0xbd9831===_0x2a250e;},'Vsrhh':_0x4c832c(-0x2c,0x5c,0xea,0x86),'GOdlI':function(_0x81a2de,_0x2a11fc){return _0x81a2de(_0x2a11fc);},'TCjDb':function(_0x3eec1f,_0x518e10,_0x142a04){return _0x3eec1f(_0x518e10,_0x142a04);},'Wbvbf':_0x4c832c(0x6d,0xd7,0x162,0xee),'rNsWS':'/api/backe'+_0x4c832c(0x270,0x26e,0x136,0x1bb)+_0x4c832c(-0x3d,0x4f,0x2d,0x64)+'/generate','GDWgK':function(_0x396912,_0x4fe579){return _0x396912(_0x4fe579);},'uiGEJ':_0x3e6795(0x244,0x2e2,0x2c2,0x23c),'JgNHH':function(_0x27eec8,_0x4c3d88){return _0x27eec8||_0x4c3d88;},'AncCn':function(_0x48c21e,_0x1ec2f1){return _0x48c21e!==_0x1ec2f1;},'QBbGX':_0x4c832c(0x245,0x1d5,0x229,0x18c),'byRWP':_0x3e6795(0x111,0xf1,0x10d,0x14e)+_0x4c832c(0x167,0xad,0xbc,0xd6),'BmeEp':function(_0x5121fe){return _0x5121fe();},'ghBnR':function(_0x1504dd,_0x428c52){return _0x1504dd(_0x428c52);},'lnAOh':function(_0x448da5,_0x3f7d45){return _0x448da5(_0x3f7d45);},'aigEX':'HDKRN','PwZdu':_0x4c832c(0x198,0x134,0xc2,0x112),'RsgNh':'API\x20URL,\x20A'+_0x4c832c(0x19e,0x1c9,0x1e7,0x171)+_0x3e6795(0x162,0x63,0x15c,0x10a),'VQpBK':_0x4c832c(0xd1,0x113,0xb5,0x80)+_0x4c832c(0x184,0x1e6,0x1db,0x17c),'OMHIE':function(_0x442534,_0x375d3d){return _0x442534??_0x375d3d;},'RJEqY':_0x3e6795(0x221,0x1fa,0x1d4,0x171),'tQtYk':_0x4c832c(0x120,0xd,-0x44,0x62),'BZVMu':function(_0x13e4b4,_0x3f1c9e){return _0x13e4b4+_0x3f1c9e;},'TQXlW':function(_0x3ce169,_0x340f96){return _0x3ce169(_0x340f96);},'fxvQK':function(_0x47d58c,_0x5e4837,_0x33a38a){return _0x47d58c(_0x5e4837,_0x33a38a);},'mUzEy':'POST','ACFVG':function(_0x25b3d9,_0xccb19b){return _0x25b3d9!==_0xccb19b;},'GOzML':_0x3e6795(0x1a5,0x193,0x143,0x1a5),'omqHd':_0x3e6795(0x1c0,0x12a,0x214,0x15f),'KKtty':function(_0x163931,_0x26b509){return _0x163931>_0x26b509;},'mTgCI':_0x4c832c(0xe1,0x111,0x1fd,0x19d),'uxAqB':function(_0x3dcc87,_0x342392){return _0x3dcc87!==_0x342392;},'yWiPE':_0x3e6795(0x17c,0x10f,0x1c0,0x160),'NvDCQ':_0x3e6795(0x186,0x13a,0x23b,0x1ef),'elSrH':_0x4c832c(0x19c,0x115,0x1d9,0x1bf)+_0x3e6795(0x21e,0x1d2,0x1a9,0x261)+'max_tokens'+_0x4c832c(0x156,0x115,0x11f,0x9e)+_0x4c832c(0x81,0xd6,0xb9,0x128),'ZoWjz':function(_0x207044,_0x563d36){return _0x207044===_0x563d36;},'PFKJf':_0x4c832c(0x1bd,0x8b,0x1bb,0x100),'avuqd':function(_0x54e661,_0x2bbde2){return _0x54e661===_0x2bbde2;},'wRMOG':_0x4c832c(0x257,0x127,0x256,0x1d1)+'e\x20request\x20'+_0x3e6795(0x132,0x175,0xc9,0x176),'AavYV':_0x3e6795(0x2af,0x25a,0x18e,0x24d)+_0x3e6795(0x16a,0xd0,0x192,0x16f),'fxMSB':_0x4c832c(0x30,0x140,0x11d,0xc4)+_0x3e6795(0x207,0x23d,0x27e,0x1cb),'nCYJu':_0x3e6795(0x14e,0x6e,0x1c0,0x112),'TrYPA':function(_0x28edef,_0x10d038){return _0x28edef(_0x10d038);},'wSmJQ':function(_0x250c58,_0x5e1fd3){return _0x250c58===_0x5e1fd3;},'hTazw':function(_0x15500b,_0x264a51){return _0x15500b!==_0x264a51;},'FLtUV':_0x4c832c(0x1b3,0x1ca,0x1fc,0x169)},{prompt:_0x5a8417,id:_0x569898}=_0x4acf77;if(_0x3010c4[_0x3e6795(0x1bd,0xfe,0x1a8,0x11f)](!_0x569898,!_0x5a8417))return;currentLLMRequestController&&(_0x3010c4[_0x3e6795(0x170,0x17f,0x2a4,0x1ff)](_0x3010c4[_0x4c832c(0x1d6,0x1ea,0x148,0x1a1)],_0x3010c4[_0x3e6795(0x29d,0x2c3,0x1a4,0x242)])?_0x5b2d24=null:(currentLLMRequestController['abort'](),toastr['info'](_0x3010c4['byRWP'])));currentLLMRequestController=new AbortController();const _0x410da1=currentLLMRequestController['signal'],_0x613a7e=currentLLMRequestController,_0x307536={};_0x307536[_0x3e6795(0x1e9,0x154,0x22b,0x1d0)]=_0x3e6795(0x197,0x241,0x247,0x1c5),_0x307536[_0x3e6795(0x189,0x2be,0x29e,0x221)]=TaskType[_0x4c832c(0x7f,0x15b,0xcc,0xcc)],_0x307536['prompt']=_0x569898;const _0x4ca4e7=taskQueue[_0x4c832c(-0x3c,-0xb,0xd,0x81)](_0x307536);llmTaskControllers[_0x4c832c(0xd6,0x5a,0x143,0xa2)](_0x4ca4e7,currentLLMRequestController),taskQueue[_0x3e6795(0xd5,0x11b,0x1ce,0x119)+'us'](_0x4ca4e7,TaskStatus['RUNNING']),startFabLoading();let _0x9bfac5=![];_0x3010c4[_0x3e6795(0x1f7,0x2a1,0x2be,0x22a)](clearLog),_0x3010c4[_0x4c832c(0x108,-0x29,0x115,0x74)](addLog,_0x4c832c(0x168,0x1aa,0x21e,0x16f)+_0x3e6795(0x1bf,0x150,0x1e2,0x185)+'=='),_0x3010c4[_0x3e6795(0x223,0x1a5,0x26b,0x1b7)](addLog,_0x3e6795(0x304,0x1b1,0x261,0x247)+_0x569898),_0x3010c4[_0x4c832c(-0x38,0x127,0xf4,0x74)](addLog,_0x3e6795(0x279,0x287,0x164,0x201)+':');function _0x4c832c(_0x45996f,_0x3a3f74,_0x5e58f2,_0x2f75ad){return _0x41b3e0(_0x45996f-0xbf,_0x2f75ad- -0x4a1,_0x5e58f2-0x141,_0x3a3f74);}_0x3010c4[_0x4c832c(0x178,0xb5,0x152,0x108)](addLog,formatPromptForDisplay(_0x5a8417));const {api_url:_0x27603f,api_key:_0x1ec70b,model:_0x2a11d9,temperature:_0x3919a7,top_p:_0x6b167d,max_tokens:_0x398b4d,stream:_0xe034a1,bypass_proxy:_0x2d77cb}=_0x85c1de;if(_0x3010c4[_0x4c832c(0xbe,0x4f,0x96,0x7e)](!_0x27603f,!_0x1ec70b)||!_0x2a11d9){if(_0x3010c4[_0x4c832c(0x1bc,0x15d,0x17d,0x15e)](_0x3010c4[_0x3e6795(0x118,0x220,0x14f,0x18c)],_0x3010c4[_0x4c832c(0x11e,-0x16,0x25,0xa9)])){const _0x106cb6=_0x3010c4[_0x4c832c(0x183,0x1f0,0x143,0x166)];toastr[_0x4c832c(0x17a,0xee,0x21,0xda)](_0x106cb6);const _0x4adf1d={};_0x4adf1d[_0x3e6795(0x247,0x11b,0x1dd,0x1bd)]=![],_0x4adf1d[_0x4c832c(0x61,0x5c,-0x15,0x88)]=_0x106cb6,_0x4adf1d['id']=_0x569898,eventSource['emit'](eventNames[_0x3e6795(0x101,0xe6,0x1e2,0x167)+_0x3e6795(0x17e,0xff,0x1d5,0x17c)],_0x4adf1d);return;}else{_0x47ab9e=''+_0x514e80[_0x4c832c(0xd9,0x83,0x136,0xda)][_0x4c832c(-0x2b,-0x1b,0x1a,0x68)];const _0xbf3e25=[];if(_0x2c93b9[_0x3e6795(0x1f5,0x190,0x1fc,0x17b)][_0x3e6795(0x1ff,0x263,0x205,0x221)])_0xbf3e25[_0x4c832c(0x17a,0x135,0xc5,0x17b)]('类型:\x20'+_0x529554[_0x4c832c(0xbd,0x60,0x74,0xda)][_0x3e6795(0x1fe,0x208,0x22e,0x221)]);if(_0x30d2ef['error']['code'])_0xbf3e25[_0x3e6795(0x15e,0x2d2,0x2a8,0x21c)](_0x3e6795(0x179,0x173,0x1c0,0x191)+_0x57d9e0['error'][_0x4c832c(0x11e,0xd2,0x1f9,0x16d)]);_0xbf3e25[_0x3e6795(0xe0,0xaf,0x179,0x157)]>-0x625+0x1*0x1305+-0xce0&&(_0x268d5c+='\x20('+_0xbf3e25[_0x4c832c(0xd3,0x1b,0xda,0xbc)](',\x20')+')');}}function _0x3e6795(_0x37b64b,_0x34f9a0,_0x3e3bc5,_0x3304c0){return _0x5785bf(_0x37b64b-0x105,_0x34f9a0,_0x3304c0- -0x444,_0x3304c0-0xe0);}const _0x211be8=_0x27603f[_0x3e6795(0x1b7,0x2a2,0x157,0x1fc)](/\/$/,'');let _0x49517a,_0x3dfae8,_0x32c1a9;if(_0x2d77cb){_0x49517a=_0x211be8+('/chat/comp'+_0x4c832c(0x1cd,0x1a4,0x278,0x1c4));const _0x2210dd={};_0x2210dd[_0x3e6795(0xce,0x20d,0x161,0x16c)+'pe']=_0x3010c4[_0x3e6795(0x1a9,0x10a,0xc8,0x138)],_0x2210dd[_0x3e6795(0x193,0x1a3,0x1f8,0x22e)+'ion']=_0x4c832c(0x251,0xfa,0x181,0x19a)+_0x1ec70b,_0x3dfae8=_0x2210dd,_0x32c1a9={'model':_0x2a11d9,'messages':_0x5a8417,'temperature':_0x3919a7,'top_p':_0x6b167d,'max_tokens':_0x398b4d,'stream':_0x3010c4[_0x3e6795(0x208,0x183,0x157,0x1d3)](_0xe034a1,![])};}else{let _0x514db2=_0x211be8;!_0x514db2[_0x3e6795(0x130,0x1c4,0x26d,0x1d8)]('/v1')&&!_0x514db2[_0x3e6795(0x7a,0x7c,0xb0,0x12e)](_0x3010c4[_0x3e6795(0x17c,0x1e3,0x176,0x163)])&&(_0x3010c4['AncCn'](_0x4c832c(0xfb,0xe8,0x14a,0x92),_0x3010c4['tQtYk'])?_0x514db2=_0x3010c4['BZVMu'](_0x514db2,_0x3010c4[_0x3e6795(0x1c8,0x16a,0xfc,0x181)]):_0x27df94[_0x4c832c(0x18a,0x1f8,0xbe,0x17b)](_0x107f48));_0x514db2=_0x514db2[_0x3e6795(0x246,0x189,0x17b,0x1fc)](/\/v1\/$/,_0x3010c4[_0x3e6795(0x1d9,0x1eb,0x18e,0x181)]),_0x49517a=_0x4c832c(0x18,0x41,0xd9,0xb1)+_0x3e6795(0x23b,0x244,0x27a,0x25c)+'ompletions'+'/generate',_0x3dfae8=getRequestHeaders(window['token']);const _0x38ec6b={};_0x38ec6b[_0x4c832c(0x189,0x1df,0x156,0x123)+_0x3e6795(0x2d0,0x250,0x1ee,0x262)+'ce']=_0x3010c4['uiGEJ'],_0x38ec6b[_0x4c832c(0xbe,0x9b,0x1e,0xd2)]=_0x514db2,_0x38ec6b['custom_inc'+'lude_heade'+'rs']=_0x3e6795(0x2a6,0x22f,0x2ab,0x22e)+_0x3e6795(0x1bf,0x182,0x187,0x236)+_0x4c832c(-0x2a,0xc2,0x9b,0x7a)+_0x1ec70b+'\x22',_0x38ec6b['model']=_0x2a11d9,_0x38ec6b[_0x3e6795(0xf7,0x1f5,0x120,0x18b)]=_0x5a8417,_0x38ec6b[_0x4c832c(0xa4,0xd6,0x139,0x7b)+'e']=_0x3919a7,_0x38ec6b[_0x4c832c(0xee,0x99,0xc5,0xc8)]=_0x6b167d,_0x38ec6b[_0x4c832c(0x201,0xd6,0x211,0x164)]=_0x398b4d,_0x38ec6b['stream']=![],_0x32c1a9=_0x38ec6b;}_0x7c40c2&&_0x3010c4[_0x4c832c(0xff,0x98,0x111,0x146)](_0x7c40c2,'正在处理外部请求，请'+'稍候...');try{const _0x45c846=await _0x3010c4[_0x4c832c(0x1b2,0x181,0x231,0x1ab)](fetch,_0x49517a,{'method':_0x3010c4['mUzEy'],'headers':_0x3dfae8,'body':JSON[_0x4c832c(0x1a0,0x1ce,0x1ac,0x12d)](_0x32c1a9),'signal':_0x410da1}),_0xff4e38=await _0x45c846[_0x4c832c(0x76,0x98,0x6e,0x114)]();if(_0xff4e38['error']){if(_0x3010c4[_0x4c832c(0x1db,0x218,0x100,0x185)](_0x3010c4[_0x3e6795(0x25a,0x207,0x192,0x218)],_0x3e6795(0xd0,0x128,0x1e9,0x15b))){let _0x35d938;if(_0x3010c4['dthVz'](typeof _0xff4e38[_0x4c832c(0x70,0x22,0x49,0xda)],_0x4c832c(0xdd,0x161,0xc1,0x138))&&_0xff4e38[_0x4c832c(0xa2,0xdd,0x5c,0xda)]['message']){if(_0x3010c4[_0x3e6795(0x1b7,0x1bd,0x168,0x1dd)]===_0x3010c4[_0x4c832c(0x114,0x125,0xc5,0x13c)]){_0x35d938=''+_0xff4e38[_0x4c832c(0x2b,0x85,0xae,0xda)][_0x4c832c(0x8f,0x41,0x4e,0x68)];const _0x2874a4=[];if(_0xff4e38[_0x3e6795(0xe9,0x11e,0x1b2,0x17b)][_0x4c832c(0x141,0x1f9,0x1ac,0x180)])_0x2874a4[_0x4c832c(0x237,0x19b,0x1d7,0x17b)](_0x4c832c(0x94,0x119,0x140,0xae)+_0xff4e38[_0x4c832c(0x17c,0xc9,0x111,0xda)]['type']);if(_0xff4e38[_0x4c832c(0x29,0xf2,0x10f,0xda)][_0x4c832c(0x16b,0x1cf,0x15a,0x16d)])_0x2874a4[_0x4c832c(0xd8,0x207,0x189,0x17b)](_0x3e6795(0x175,0x164,0x113,0x191)+_0xff4e38[_0x4c832c(0x10a,0x20,0x15e,0xda)]['code']);if(_0x3010c4[_0x4c832c(0x15a,0x155,0x12a,0x140)](_0x2874a4[_0x4c832c(0x3c,0x91,0xc1,0xb6)],-0x2346+0x804+0x1b42)){if(_0x4c832c(0x108,0x160,0x132,0xef)===_0x3010c4[_0x3e6795(0x19a,0x178,0x1f3,0x142)]){if(_0x3010c4[_0x3e6795(0x23a,0x130,0x23d,0x1ad)](_0x49db95[_0x4c832c(0x151,0xb5,0xa2,0x12f)],_0x3010c4[_0x4c832c(0x10a,0x1e1,0x96,0x139)])){const _0x29a6f9=_0x4c832c(0x152,0x10c,0x14a,0x130)['split']('|');let _0x5dbcd9=0x2*-0x2d5+-0x457*0x1+0xa01;while(!![]){switch(_0x29a6f9[_0x5dbcd9++]){case'0':return;case'1':const _0xf6eea4={};_0xf6eea4[_0x4c832c(0xa0,0xd4,0x14c,0x12f)]=_0x3010c4[_0x3e6795(0x149,0x21d,0x205,0x1da)],_0xf6eea4[_0x4c832c(0x85,0xea,0xc1,0x68)]=_0x3e6795(0x24a,0x2a3,0x2f0,0x24d)+_0x4c832c(0xf8,0xf8,0x17e,0xce);const _0x456501={};_0x456501[_0x3e6795(0x229,0x204,0x158,0x1bd)]=![],_0x456501[_0x4c832c(0xa7,0x2d,0x4b,0x88)]=null,_0x456501['id']=_0x55bd82,_0x456501[_0x4c832c(0xd6,0xd5,0x154,0xda)]=_0xf6eea4,_0x6811d1[_0x3e6795(0x6b,0x7d,0x1a1,0x116)](_0x2f077d,_0x456501);continue;case'2':_0x4cfb99['updateStat'+'us'](_0x595b92,_0x55caa8[_0x3e6795(0x1bf,0x30e,0x2f9,0x279)]);continue;case'3':_0x453956=!![];continue;case'4':_0x5aa00a[_0x3e6795(0x217,0x1f0,0x254,0x20c)](_0x2e2f10);continue;}break;}}_0x160bb9[_0x3e6795(0x189,0x182,0x14b,0x17b)](_0x4f4f83+_0x3e6795(0x214,0x26e,0x23d,0x1b1),_0x9f903);const _0x43a3d9=_0x4c832c(0x102,0x15a,0x176,0xfb)+_0x2bbf59[_0x4c832c(0x89,0x6e,0x62,0x68)];_0x381bad&&_0x3010c4[_0x4c832c(0x38,0xfa,0x15b,0xf2)](_0x24362f,_0x43a3d9);_0xea3449['error'](_0x39c291['message']),_0x3be71d[_0x4c832c(0x9d,0x11d,0x12e,0x14d)+'sk'](_0x5081b9,![]),_0xab5856[_0x3e6795(0x228,0x1cc,0x25f,0x20c)](_0x595a61);const _0x4053e0={};_0x4053e0['success']=![],_0x4053e0[_0x4c832c(0xc6,0x106,0xe7,0x88)]=_0x43a3d9,_0x4053e0['id']=_0x292f20,_0x2dd906[_0x4c832c(0x9e,0x8e,0x5d,0x75)](_0x434ef7,_0x4053e0);}else _0x35d938+='\x20('+_0x2874a4[_0x4c832c(0x15d,0xbf,0x11,0xbc)](',\x20')+')';}}else{if(!_0x492f9e||!_0x3010c4[_0x4c832c(0x1a6,0xe6,0x1b1,0x159)](_0xe1c72b,_0x2ca0a0[_0x4c832c(0x156,0x9a,0xbf,0xfa)+'ds'],_0x1cf494))return;}}else _0x35d938=''+JSON['stringify'](_0xff4e38[_0x3e6795(0x14e,0x18f,0x1c1,0x17b)]);throw new Error(_0x35d938);}else{let _0x541f72=_0x184f8d;!_0x541f72[_0x4c832c(0x1df,0xca,0x143,0x137)](_0x3010c4[_0x3e6795(0xc4,0x181,0xe9,0x181)])&&!_0x541f72[_0x4c832c(0x29,-0x2d,0x17,0x8d)]('/v1/')&&(_0x541f72=_0x541f72+_0x3010c4[_0x4c832c(0x11a,0x14d,0x5a,0xe0)]);_0x541f72=_0x541f72['replace'](/\/v1\/$/,_0x4c832c(0x112,0x81,0xe2,0xee)),_0x588089=_0x3010c4[_0x4c832c(0x149,0xa4,0x13a,0x133)],_0xeb7021=_0x3010c4[_0x3e6795(0x155,0x195,0x199,0x115)](_0x45aa40,_0x44bc65[_0x4c832c(0x1cb,0x264,0x128,0x1d6)]);const _0x223cd5={};_0x223cd5[_0x4c832c(0x191,0x1a6,0xec,0x123)+_0x4c832c(0x1fa,0x19a,0x134,0x1c1)+'ce']=_0x3010c4[_0x4c832c(0x189,0x1c7,0x149,0x13d)],_0x223cd5['custom_url']=_0x541f72,_0x223cd5[_0x4c832c(0x149,0x20c,0x1a9,0x1c3)+_0x3e6795(0xc8,0x120,0x189,0x135)+'rs']=_0x4c832c(0x1de,0x10a,0x103,0x18d)+_0x3e6795(0x271,0x279,0x1b1,0x236)+_0x4c832c(0x2a,0xb2,0xfb,0x7a)+_0x1979a1+'\x22',_0x223cd5['model']=_0x19e94c,_0x223cd5[_0x4c832c(0x129,0x132,0x39,0xea)]=_0x5d4af8,_0x223cd5['temperatur'+'e']=_0x3ca93d,_0x223cd5[_0x4c832c(0xfd,0xbd,0x18,0xc8)]=_0x1d8ebd,_0x223cd5[_0x3e6795(0x1f1,0x257,0x18b,0x205)]=_0x30066a,_0x223cd5[_0x4c832c(0x173,0xfb,0x1fa,0x161)]=_0x5f4c4d,_0x2439b0=_0x223cd5;}}if(!_0x45c846['ok'])throw new Error(_0x4c832c(0xeb,0x41,0x15a,0xe5)+_0x45c846['status']+'\x20'+_0x45c846['statusText']);const _0x1fe91e=_0xff4e38[_0x3e6795(0x262,0x20b,0x2c7,0x268)]?.[-0x3*0x9ad+0xb*-0x9+0x1f6*0xf]?.['message']?.[_0x3e6795(0x20b,0x294,0x2bf,0x225)]||'';if(!_0x1fe91e){if(_0x3010c4[_0x3e6795(0x215,0x20a,0x105,0x17a)](_0x3010c4['yWiPE'],_0x3010c4['NvDCQ']))toastr[_0x3e6795(0x2b8,0x1af,0x235,0x255)](_0x3010c4['elSrH']);else throw _0x3dc7a6;}_0x7c40c2&&(_0x3010c4[_0x3e6795(0xeb,0x155,0x135,0x170)](_0x3010c4[_0x4c832c(0x182,0xf5,0x176,0x1aa)],_0x3010c4[_0x4c832c(0x11c,0x24e,0x1ca,0x1aa)])?_0x3010c4[_0x3e6795(0x26d,0x1c3,0x1e4,0x1b7)](_0x7c40c2,_0x1fe91e):_0x4521a1['push'](_0x4cdf8f[_0x4c832c(0x5d,0x81,0x2f,0xb9)]||''));_0x3010c4[_0x3e6795(0x180,0x222,0x173,0x1e7)](addLog,'\x0a-----\x20LLM'+_0x3e6795(0x244,0x21f,0x125,0x196)),_0x3010c4['lnAOh'](addLog,_0x1fe91e),addLog(_0x3e6795(0x22c,0x171,0x21c,0x210)+_0x4c832c(0x1fe,0x1f1,0x145,0x172)),taskQueue['completeTa'+'sk'](_0x4ca4e7,!![]),llmTaskControllers['delete'](_0x4ca4e7);const _0x16ed77={};_0x16ed77[_0x4c832c(0x1b5,0x71,0x1a3,0x11c)]=!![],_0x16ed77[_0x4c832c(-0x29,0x13a,0xc,0x88)]=_0x1fe91e,_0x16ed77['id']=_0x569898,eventSource[_0x3e6795(0x11e,0x1cf,0x7c,0x116)](eventNames['LLM_EXECUT'+_0x4c832c(0x17c,0xac,0x5e,0xdb)],_0x16ed77);}catch(_0x2fdcb8){if(_0x3010c4['avuqd'](_0x2fdcb8[_0x3e6795(0x146,0x119,0x1ef,0x1d0)],_0x3010c4[_0x4c832c(0xdc,0xbe,0x12f,0x139)])){_0x9bfac5=!![],console['log'](_0x3010c4[_0x4c832c(0xa6,0xd3,0x163,0x148)]),taskQueue[_0x3e6795(0xeb,0x15d,0x6b,0x119)+'us'](_0x4ca4e7,TaskStatus['CANCELLED']),llmTaskControllers[_0x3e6795(0x19a,0x2a2,0x1ad,0x20c)](_0x4ca4e7);const _0x5f0b53={};_0x5f0b53[_0x3e6795(0x1db,0x246,0x257,0x1d0)]=_0x3010c4['Vsrhh'],_0x5f0b53[_0x4c832c(0x2d,0xe,0xd5,0x68)]=_0x3010c4[_0x3e6795(0x2aa,0x1da,0x24e,0x1fe)];const _0x4bc47d={};_0x4bc47d['success']=![],_0x4bc47d[_0x4c832c(0x46,0xf9,0xfb,0x88)]=null,_0x4bc47d['id']=_0x569898,_0x4bc47d[_0x4c832c(0x35,0x14d,0xbc,0xda)]=_0x5f0b53,eventSource[_0x4c832c(-0x2e,0x133,0x118,0x75)](eventNames[_0x3e6795(0x1ac,0x1d0,0x1c9,0x167)+_0x3e6795(0x223,0x180,0xbe,0x17c)],_0x4bc47d);return;}console[_0x4c832c(0x16a,0x4d,0x2b,0xda)](_0x3010c4['fxMSB'],_0x2fdcb8);const _0x100b65=_0x4c832c(0x151,0x119,0xc1,0xfb)+_0x2fdcb8[_0x3e6795(0x10c,0xf1,0x12f,0x109)];if(_0x7c40c2){if(_0x3010c4[_0x3e6795(0x166,0x13b,0x1e9,0x1ad)](_0x3010c4[_0x3e6795(0x1aa,0x140,0x162,0x150)],_0x3010c4[_0x4c832c(0x74,0x2,0xf5,0xaf)]))_0x3010c4[_0x3e6795(0x25d,0x1e6,0x280,0x20b)](_0x7c40c2,_0x100b65);else{_0x17279e=''+_0x217157[_0x3e6795(0x153,0x15b,0x237,0x17b)][_0x3e6795(0x1a1,0x13c,0x90,0x109)];const _0x587fa1=[];if(_0xa43f5[_0x3e6795(0x120,0x154,0x145,0x17b)]['type'])_0x587fa1[_0x3e6795(0x279,0x262,0x17d,0x21c)](_0x4c832c(0x146,0x10c,0xb6,0xae)+_0x12431f['error'][_0x3e6795(0x16b,0x1af,0x175,0x221)]);if(_0x35f2f8[_0x4c832c(0x38,0x27,0x161,0xda)][_0x4c832c(0x106,0x20e,0xf4,0x16d)])_0x587fa1[_0x3e6795(0x21c,0x2b9,0x26b,0x21c)](_0x3e6795(0xf6,0x1d0,0x14d,0x191)+_0x367431[_0x4c832c(0x17c,0xb4,0x23,0xda)][_0x3e6795(0x1e7,0x258,0x276,0x20e)]);_0x587fa1[_0x4c832c(0xb2,0x14a,0x103,0xb6)]>0x26c+-0x19e5+0x1779&&(_0x104b7b+='\x20('+_0x587fa1['join'](',\x20')+')');}}toastr[_0x3e6795(0x1b1,0x228,0xc5,0x17b)](_0x2fdcb8[_0x3e6795(0x112,0x53,0x16a,0x109)]),taskQueue[_0x3e6795(0x233,0x199,0x1fe,0x1ee)+'sk'](_0x4ca4e7,![]),llmTaskControllers[_0x4c832c(0xb2,0x1ab,0x158,0x16b)](_0x4ca4e7);const _0x513bd5={};_0x513bd5[_0x3e6795(0x233,0x1dc,0x1ae,0x1bd)]=![],_0x513bd5[_0x3e6795(0xf7,0xfc,0xfd,0x129)]=_0x100b65,_0x513bd5['id']=_0x569898,eventSource[_0x3e6795(0xf4,0x114,0x74,0x116)](eventNames[_0x3e6795(0x1d6,0x111,0xe1,0x167)+_0x4c832c(0x16c,0x4d,0xbf,0xdb)],_0x513bd5);}finally{_0x3010c4[_0x4c832c(0x216,0x154,0x122,0x1ae)](currentLLMRequestController,_0x613a7e)&&(currentLLMRequestController=null),(!_0x9bfac5||_0x3010c4[_0x4c832c(0xbd,0x159,0x3a,0xcf)](currentLLMRequestController,null))&&(_0x3010c4[_0x3e6795(0x198,0x1e8,0x156,0x14d)](_0x3010c4['FLtUV'],_0x3010c4[_0x3e6795(0xf6,0xb6,0x215,0x175)])?_0x599d9a=_0x4b744d:stopFabLoading());}}export function createGetPromptHandler(_0x19464b,_0x44a98a){return function(_0x45dc6){const {id:_0x1ade38}=_0x45dc6;if(!_0x1ade38)return;const _0xfd7e77=REQUEST_TYPE_NAMES[_0x19464b]||_0x19464b;function _0x3951aa(_0xc593fe,_0x3c42c8,_0x5d8ddb,_0x32067a){return _0x5a77(_0x32067a-0x55,_0x5d8ddb);}console['log'](_0x18b700(0x354,0x403,0x455,0x45a)+_0x3951aa(0x32e,0x339,0x2b4,0x2e9)+_0xfd7e77+(_0x3951aa(0x247,0x1de,0x1e6,0x292)+_0x18b700(0x35d,0x3d7,0x3ed,0x324))+_0x1ade38+')');function _0x18b700(_0x3d4cc4,_0x2251c1,_0xc8700a,_0x2885e3){return _0x5a77(_0x2251c1-0x1d1,_0x3d4cc4);}const _0x402a39=buildPromptForRequestType(_0x19464b),_0x537914={};_0x537914['prompt']=_0x402a39,_0x537914['id']=_0x1ade38,eventSource['emit'](_0x44a98a,_0x537914);};}export function createExecuteHandler(_0x4f7edc,_0xec54b8,_0x5ed6f6=null){const _0x2f2745={'tvhyq':function(_0x11b20f){return _0x11b20f();},'ODpMY':function(_0x7f2717,_0x4dbe7d,_0x54de68,_0x42c8ce,_0x2634ed){return _0x7f2717(_0x4dbe7d,_0x54de68,_0x42c8ce,_0x2634ed);}};return async function(_0x2237b9){function _0x1dad49(_0x1fc108,_0x49c9a7,_0x1a1da0,_0x48f8c2){return _0x5a77(_0x1fc108-0x20,_0x1a1da0);}function _0x5c719e(_0x28f901,_0x443291,_0x44f992,_0x156398){return _0x5a77(_0x28f901-0x301,_0x156398);}const _0xd9f686=_0x5ed6f6?_0x2f2745[_0x1dad49(0x303,0x258,0x388,0x352)](_0x5ed6f6):null;await _0x2f2745[_0x1dad49(0x2dd,0x275,0x2d7,0x2c0)](executeTypedLLMRequest,_0x2237b9,_0x4f7edc,_0xec54b8,_0xd9f686);};}