(function(_0xe76340,_0xa4b157){function _0x5582cd(_0xcb3fd5,_0x2d3c4d,_0x1dea41,_0x5e5a77){return _0x342e(_0x1dea41- -0xe7,_0x2d3c4d);}const _0x2424aa=_0xe76340();function _0x202927(_0x1ee922,_0x37aa77,_0x5d00ed,_0x3df52d){return _0x342e(_0x3df52d-0x222,_0x5d00ed);}while(!![]){try{const _0x2be7b4=-parseInt(_0x202927(0x39e,0x3fa,0x2f2,0x39a))/(0x1b7e+0x271*-0xf+-0x922*-0x1)*(parseInt(_0x202927(0x34c,0x308,0x30f,0x2a0))/(0x1298+-0x7f4+-0xaa2))+parseInt(_0x202927(0x2de,0x300,0x3b0,0x39b))/(-0x20e+-0x4ba+-0x6cb*-0x1)*(-parseInt(_0x202927(0x238,0x284,0x22a,0x2c9))/(-0xce+-0x1cfb+0x1dcd*0x1))+-parseInt(_0x5582cd(0x39,-0x30,-0x72,-0x106))/(0x3*-0x2ef+0x51d*-0x1+-0x1d*-0x7b)+-parseInt(_0x202927(0x299,0x26d,0x36d,0x2f3))/(-0xd11+0xca9+0x6e)*(-parseInt(_0x202927(0x46b,0x3bb,0x346,0x3f0))/(0x2f9*-0x7+0x2380+-0xeaa))+-parseInt(_0x202927(0x33e,0x378,0x40d,0x3f8))/(-0x8*0x1b6+-0xc1b*0x2+0x25ee)+parseInt(_0x202927(0x2b2,0x31d,0x288,0x2f2))/(-0x842+-0x6*0x305+0x1a69)+parseInt(_0x202927(0x3d7,0x414,0x369,0x413))/(0x2d1*0xd+-0x14b9+0xfda*-0x1)*(parseInt(_0x202927(0x2d5,0x393,0x2c3,0x308))/(-0x1*-0x1136+0x1ba5+-0x2cd0));if(_0x2be7b4===_0xa4b157)break;else _0x2424aa['push'](_0x2424aa['shift']());}catch(_0x4ad99c){_0x2424aa['push'](_0x2424aa['shift']());}}}(_0x4866,0x1b5126+-0xab049+0x1d648*-0x1));const _0x3b9d66=(function(){let _0x489756=!![];return function(_0x1a4cf7,_0xd61140){const _0x5882d7=_0x489756?function(){function _0x3681c2(_0x3c5c0a,_0x393e6c,_0x562378,_0x466313){return _0x342e(_0x393e6c- -0x178,_0x466313);}if(_0xd61140){const _0x2f80e2=_0xd61140[_0x3681c2(-0x126,-0x71,0x1d,-0x103)](_0x1a4cf7,arguments);return _0xd61140=null,_0x2f80e2;}}:function(){};return _0x489756=![],_0x5882d7;};}()),_0x2420ee=_0x3b9d66(this,function(){function _0x52acd6(_0x53bf48,_0x4eca22,_0x44fbd9,_0x3da305){return _0x342e(_0x3da305-0x1df,_0x53bf48);}const _0x312bd0={};_0x312bd0[_0x52acd6(0x366,0x278,0x2bc,0x2f4)]='(((.+)+)+)'+'+$';function _0x30d7e2(_0x2028b6,_0xfdbb22,_0xbe2908,_0x31c3db){return _0x342e(_0x31c3db- -0x17d,_0xbe2908);}const _0x243ed5=_0x312bd0;return _0x2420ee[_0x52acd6(0x3bb,0x452,0x415,0x39a)]()[_0x52acd6(0x205,0x2ac,0x217,0x285)](_0x52acd6(0x43e,0x325,0x33a,0x384)+'+$')[_0x52acd6(0x312,0x450,0x318,0x39a)]()[_0x30d7e2(-0xef,-0x49,-0x83,-0xe6)+'r'](_0x2420ee)[_0x30d7e2(-0x19,-0x15a,-0xe4,-0xd7)](_0x243ed5[_0x30d7e2(0x1,-0xd4,-0xcf,-0x68)]);});_0x2420ee();import{extension_settings}from'../../../../../extensions.js';function _0x527796(_0x12710c,_0x191599,_0x5af08b,_0xdbb7e){return _0x342e(_0xdbb7e-0x29a,_0x12710c);}import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on'](_0x527796(0x418,0x34a,0x436,0x378)+_0x384c88(0x160,0x1c2,0x1ce,0x1e8)+_0x527796(0x4c9,0x48a,0x3af,0x425),({taskId:_0xa1165c})=>{function _0x14f91e(_0x41bf13,_0x474058,_0x56d1be,_0x27d8f8){return _0x384c88(_0x41bf13-0x40,_0x41bf13,_0x27d8f8- -0x127,_0x27d8f8-0x127);}const _0x102d6a={};_0x102d6a[_0x4d7ba4(-0xe1,-0x70,-0x99,-0x11a)]=function(_0x4d0f39,_0x513698){return _0x4d0f39===_0x513698;};function _0x4d7ba4(_0x5793ea,_0x72fed5,_0x2b9979,_0x32ed8c){return _0x384c88(_0x5793ea-0x196,_0x2b9979,_0x5793ea- -0x310,_0x32ed8c-0x135);}_0x102d6a[_0x4d7ba4(-0x19f,-0x130,-0x11e,-0x194)]='FVmcU';const _0x42bc53=_0x102d6a,_0x195869=llmTaskControllers[_0x14f91e(-0xb5,0xb2,0x67,-0x8)](_0xa1165c);if(_0x195869){if(_0x42bc53['OifHk'](_0x42bc53[_0x14f91e(0x14,0x99,-0x19,0x4a)],_0x42bc53['UrAWf']))_0x195869[_0x14f91e(-0x6d,0xe7,0xd0,0x47)](),llmTaskControllers[_0x4d7ba4(-0xf6,-0xff,-0xc3,-0xf0)](_0xa1165c),console[_0x4d7ba4(-0x17e,-0x202,-0x22c,-0x18a)](_0x14f91e(0x19f,0xe6,0xd3,0x124)+_0x14f91e(0x118,0xe4,0x11c,0x132)+_0xa1165c);else{const _0x21efbf=_0x50a6e4+(_0x14f91e(0x177,0xe6,0x1e4,0x12b)+_0x4d7ba4(-0x16b,-0x1c8,-0xb4,-0x101)+_0x14f91e(0xf8,0x168,0x152,0xf9)+'置。');_0x105218['error'](_0x21efbf);const _0x2ebe90={};_0x2ebe90[_0x14f91e(0x90,0x1c3,0x15e,0x130)]=![],_0x2ebe90[_0x14f91e(0xc6,0x1aa,0x60,0xf8)]=_0x21efbf,_0x2ebe90['id']=_0x24e536,_0x35ef43[_0x14f91e(0x111,0xb0,0xc0,0x120)](_0x4908e0,_0x2ebe90);return;}}});export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x16ed5a){currentLLMRequestController=_0x16ed5a;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){function _0x334f87(_0x16b75e,_0x44db58,_0x373efe,_0x105584){return _0x527796(_0x373efe,_0x44db58-0xec,_0x373efe-0x16a,_0x16b75e-0xc9);}const _0xc5d693={};_0xc5d693[_0x334f87(0x540,0x54e,0x4b5,0x4c0)]='LLM\x20请求已中止。';function _0x17acac(_0x32706a,_0xab2fad,_0x56b168,_0x3a6309){return _0x527796(_0x3a6309,_0xab2fad-0x156,_0x56b168-0x135,_0x32706a- -0x44a);}const _0x529d99=_0xc5d693;currentLLMRequestController&&(currentLLMRequestController['abort'](),toastr[_0x334f87(0x47c,0x4b3,0x41e,0x50f)](_0x529d99[_0x17acac(0x2d,-0x54,-0x5b,-0x59)]));}export function formatPromptForDisplay(_0x101d28){function _0x3c2780(_0x1b0693,_0x2c69a9,_0x6f01be,_0xac2947){return _0x384c88(_0x1b0693-0x72,_0xac2947,_0x6f01be-0x1f2,_0xac2947-0x15f);}const _0x13b1d1={'xmRyU':function(_0x4ad125,_0x1c98fe){return _0x4ad125(_0x1c98fe);},'RhhEp':_0x577db3(0x359,0x3ca,0x33b,0x331),'HNZSa':function(_0x3a9478,_0x456b30){return _0x3a9478(_0x456b30);},'pAFHr':function(_0x4329f6,_0x563fc9){return _0x4329f6===_0x563fc9;},'lvhdW':_0x577db3(0x481,0x45f,0x464,0x428),'eoXbZ':_0x3c2780(0x423,0x3ed,0x407,0x3ed),'pvQwe':function(_0x346cf8,_0x5a3b2e){return _0x346cf8===_0x5a3b2e;},'HgsjL':'data:','bxuaU':function(_0x51a393,_0x4c87c3){return _0x51a393/_0x4c87c3;},'vIgPx':function(_0x25843c,_0x5013f2){return _0x25843c!==_0x5013f2;},'CQDQJ':_0x577db3(0x44b,0x4d8,0x3b1,0x429),'iJwRS':_0x577db3(0x360,0x3a8,0x3c2,0x39f),'ATIfg':'unknown','oIMxs':function(_0x4b8ca4,_0x4dd9e9){return _0x4b8ca4===_0x4dd9e9;},'GucnD':_0x577db3(0x4b9,0x451,0x450,0x43c),'WfHTb':'HytQs','vWWFb':function(_0x1211a0,_0x40dd4a){return _0x1211a0!==_0x40dd4a;},'stMJH':_0x3c2780(0x387,0x324,0x326,0x3bf),'CbqwZ':_0x577db3(0x504,0x403,0x491,0x47d),'nYQiV':function(_0xe6ec49,_0x420ece){return _0xe6ec49(_0x420ece);}};if(_0x13b1d1[_0x577db3(0x304,0x3dd,0x2f9,0x3b5)](typeof _0x101d28,_0x13b1d1['GucnD'])){if(_0x13b1d1[_0x577db3(0x2d7,0x3e7,0x39a,0x35d)](_0x13b1d1[_0x577db3(0x4c5,0x484,0x3f0,0x46a)],_0x13b1d1[_0x577db3(0x451,0x485,0x458,0x46a)]))return _0x101d28;else _0x13b1d1[_0x577db3(0x2c7,0x383,0x2d3,0x37f)](_0x11ed93,_0x577db3(0x2d4,0x381,0x36f,0x34c)+_0x3e7dfb+_0x577db3(0x33a,0x3e6,0x461,0x3d5));}function _0x577db3(_0xd48436,_0x599b79,_0xf42e48,_0xdfb2fb){return _0x527796(_0xf42e48,_0x599b79-0x58,_0xf42e48-0x1f,_0xdfb2fb-0x25);}if(Array[_0x3c2780(0x365,0x395,0x333,0x398)](_0x101d28)){if(_0x13b1d1[_0x3c2780(0x3a8,0x3f2,0x33f,0x37c)](_0x13b1d1[_0x3c2780(0x32b,0x33b,0x2ec,0x347)],'JtSEm'))_0xfeb859['abort'](),_0x53eb80[_0x577db3(0x3f0,0x414,0x359,0x3d8)](_0x13b1d1[_0x577db3(0x43f,0x2fa,0x3b7,0x392)]);else{const _0x37b7d8=[];return _0x101d28[_0x577db3(0x4db,0x3e0,0x4ab,0x490)]((_0x567d90,_0x30f99e)=>{const _0x3c3806={'enPsg':function(_0x408c38,_0x29b95f){function _0xc7bc62(_0x1d2406,_0x5145b4,_0x17cb85,_0x298ec4){return _0x342e(_0x17cb85- -0x2a5,_0x5145b4);}return _0x13b1d1[_0xc7bc62(-0x22d,-0x1e9,-0x21c,-0x175)](_0x408c38,_0x29b95f);},'ERWHT':_0x13b1d1['lvhdW'],'lMtBm':_0x13b1d1['eoXbZ'],'MWKob':function(_0x1bf102,_0x139294){return _0x13b1d1['pvQwe'](_0x1bf102,_0x139294);},'Bdbwt':_0x13b1d1[_0x390b04(-0x143,-0x1ed,-0x154,-0x20b)],'WjAiN':function(_0x3bc663,_0x452edc){function _0x28c26e(_0x4a780e,_0x1bcb82,_0x612548,_0x5cbfb5){return _0x390b04(_0x4a780e-0x8c,_0x1bcb82-0x37,_0x612548-0x290,_0x4a780e);}return _0x13b1d1[_0x28c26e(0x70,0x13b,0xb5,-0x5)](_0x3bc663,_0x452edc);},'oSYhM':function(_0x12cacc,_0xf6a00a){return _0x12cacc/_0xf6a00a;},'vbOEo':function(_0x31b604,_0x225b1b){return _0x31b604*_0x225b1b;}};function _0x390b04(_0x58bb87,_0x237de7,_0x58a38d,_0x2ffc75){return _0x3c2780(_0x58bb87-0x1ef,_0x237de7-0xf2,_0x58a38d- -0x551,_0x2ffc75);}function _0x2c0fee(_0x49d804,_0x2a1a25,_0x44dccb,_0x3b2f65){return _0x3c2780(_0x49d804-0x124,_0x2a1a25-0x102,_0x3b2f65- -0x4cf,_0x44dccb);}if(_0x13b1d1[_0x2c0fee(-0x83,-0xd2,-0x9f,-0xdb)](_0x13b1d1[_0x2c0fee(-0xc4,-0x14b,-0xaf,-0x15b)],_0x13b1d1[_0x2c0fee(-0x19b,-0x77,-0x142,-0x131)])){const _0x51c53b=_0x567d90[_0x390b04(-0x17d,-0x157,-0x1d8,-0x164)]||_0x13b1d1[_0x390b04(-0xa3,-0xf2,-0x11d,-0x61)],_0x49d719=_0x13b1d1['HNZSa'](getRoleLabel,_0x51c53b);_0x37b7d8[_0x390b04(-0x148,-0x75,-0x134,-0x1e9)](''+'═'[_0x2c0fee(-0x157,-0x94,-0x50,-0x9a)](0xe2*-0x26+0x267+-0x1*-0x1f57)),_0x37b7d8[_0x390b04(-0xdd,-0x1d9,-0x134,-0x152)]('【'+_0x49d719+'】'),_0x37b7d8['push'](''+'─'[_0x390b04(-0xbc,-0x1bf,-0x11c,-0xbb)](0x1cf*-0xe+-0x2061+0x1*0x39e5));const _0xd84168=_0x567d90[_0x2c0fee(-0x122,-0x1a5,-0x176,-0xfe)];if(_0x13b1d1[_0x2c0fee(-0x1f8,-0x25e,-0x15e,-0x1bd)](typeof _0xd84168,_0x13b1d1[_0x2c0fee(-0x7f,-0x35,-0x106,-0xa1)]))_0x37b7d8[_0x2c0fee(-0x125,-0x164,-0x5c,-0xb2)](_0xd84168);else Array['isArray'](_0xd84168)&&_0xd84168['forEach'](_0x17dcc4=>{function _0x364903(_0x3bfcb6,_0x3f173f,_0x26cedf,_0x1df2fb){return _0x390b04(_0x3bfcb6-0x62,_0x3f173f-0x1a5,_0x3bfcb6- -0xd3,_0x3f173f);}function _0x2ecda5(_0x343561,_0x50aa4e,_0x529af6,_0x19185c){return _0x390b04(_0x343561-0x12d,_0x50aa4e-0x1b3,_0x19185c-0x61c,_0x343561);}if(_0x3c3806['enPsg'](_0x17dcc4[_0x364903(-0x318,-0x309,-0x2ac,-0x25b)],_0x3c3806[_0x364903(-0x241,-0x1bb,-0x182,-0x226)])){if(_0x3c3806[_0x364903(-0x2ed,-0x2d3,-0x292,-0x383)]===_0x3c3806[_0x2ecda5(0x493,0x40d,0x353,0x402)])_0x37b7d8[_0x364903(-0x207,-0x175,-0x159,-0x27f)](_0x17dcc4[_0x364903(-0x247,-0x2b2,-0x2f1,-0x1e3)]||'');else return _0x1de477;}else{if(_0x3c3806[_0x364903(-0x2cd,-0x317,-0x2de,-0x2c6)](_0x17dcc4[_0x2ecda5(0x3e6,0x403,0x415,0x3d7)],_0x2ecda5(0x437,0x44b,0x504,0x492))){const _0x3ec3af=_0x17dcc4['image_url']?.[_0x364903(-0x259,-0x1bd,-0x2d6,-0x1ad)]||'';if(_0x3ec3af['startsWith'](_0x3c3806['Bdbwt'])){const _0x222335=_0x3ec3af['match'](/^data:([^;]+);/),_0x41268a=_0x222335?_0x222335[0x3*-0x1e3+0x182c+0x2*-0x941]:'unknown',_0x2489ed=_0x3ec3af['split'](',')[-0xd09+-0x10c9+-0x1dd3*-0x1]||'',_0x2b281e=Math[_0x364903(-0x266,-0x1b8,-0x1fb,-0x314)](_0x3c3806[_0x2ecda5(0x48b,0x584,0x4a8,0x4cd)](_0x3c3806['oSYhM'](_0x3c3806[_0x2ecda5(0x556,0x4a4,0x49e,0x50a)](_0x2489ed[_0x364903(-0x2fc,-0x263,-0x259,-0x300)],0x1de8+-0x4ca+-0x191b),-0x1824+-0xe2+0x190a),-0x900*-0x2+-0x1425*0x1+0x625));_0x37b7d8[_0x364903(-0x207,-0x2c2,-0x156,-0x276)](_0x2ecda5(0x472,0x451,0x430,0x420)+':\x20'+_0x41268a+',\x20约\x20'+_0x2b281e+_0x364903(-0x290,-0x25d,-0x207,-0x309));}else _0x37b7d8['push'](_0x364903(-0x1c4,-0x113,-0x175,-0x131)+_0x3ec3af+']');}}});_0x37b7d8[_0x390b04(-0x1f6,-0x89,-0x134,-0x74)]('');}else _0x22f6c7+=_0x3d7d8c,_0x23e0bc&&_0x13b1d1['HNZSa'](_0x59ee49,_0x4bfb01);}),_0x37b7d8['join']('\x0a');}}if(_0x13b1d1['oIMxs'](typeof _0x101d28,_0x13b1d1['CbqwZ'])&&_0x101d28!==null)return JSON['stringify'](_0x101d28,null,0x25a*-0x4+0x1*-0x12aa+0x1c14);return _0x13b1d1[_0x577db3(0x453,0x44f,0x324,0x3a3)](String,_0x101d28);}export function getRoleLabel(_0x29bbf1){function _0x4392b9(_0x2c1137,_0x258209,_0x48fd21,_0x5f5acc){return _0x384c88(_0x2c1137-0x14b,_0x2c1137,_0x48fd21-0x179,_0x5f5acc-0x44);}const _0x32e6b1={};_0x32e6b1[_0xad61b8(0xe2,0xb6,0xe2,0x19b)]=_0x4392b9(0x2a2,0x30b,0x327,0x330),_0x32e6b1[_0x4392b9(0x2ea,0x26c,0x2f2,0x289)]='AI助手';const _0x120d94=_0x32e6b1,_0x5e88d1={};_0x5e88d1[_0xad61b8(0x1be,0x29d,0x1e6,0x15b)]=_0x120d94['fKQMg'],_0x5e88d1[_0xad61b8(0x26b,0x226,0x1ab,0xfb)]='用户',_0x5e88d1[_0xad61b8(0x1fc,0x28b,0x1d3,0x19c)]=_0x120d94[_0xad61b8(0x145,0x173,0xe9,0x152)],_0x5e88d1['function']=_0xad61b8(0xe9,0x10c,0xc0,0x163),_0x5e88d1[_0x4392b9(0x25c,0x353,0x2d2,0x362)]='工具';const _0x2cebb1=_0x5e88d1;function _0xad61b8(_0x127902,_0x2890c5,_0x3e574f,_0x2a00c4){return _0x527796(_0x127902,_0x2890c5-0x110,_0x3e574f-0x124,_0x3e574f- -0x2a8);}return _0x2cebb1[_0x29bbf1]||_0x29bbf1;}function _0x384c88(_0x2b54c0,_0x223120,_0x2c9058,_0x495591){return _0x342e(_0x2c9058-0x82,_0x223120);}export function getCurrentLLMProfile(){function _0x150779(_0x1f581a,_0xc713e6,_0x1df924,_0x5d28b7){return _0x384c88(_0x1f581a-0x8a,_0x1f581a,_0xc713e6-0x32a,_0x5d28b7-0x31);}const _0x1c5186=extension_settings[extensionName]['llm_profil'+'es']||{};function _0x5ec808(_0x27e7a1,_0x2c142b,_0x36b7f5,_0x42fbdc){return _0x527796(_0x2c142b,_0x2c142b-0x196,_0x36b7f5-0xdb,_0x36b7f5- -0x62c);}const _0x4f02de=extension_settings[extensionName][_0x5ec808(-0x1f9,-0x132,-0x1dc,-0x217)+_0x150779(0x618,0x556,0x563,0x4f0)];return _0x1c5186[_0x4f02de]||_0x1c5186[Object['keys'](_0x1c5186)[0x1f4b+0x1551+-0x7*0x784]]||{};}export function getCurrentTestContext(){const _0x4b8afe=extension_settings[extensionName][_0x19d401(-0xe4,-0x26,-0xf4,-0xb5)+'xt_profile'+'s']||{};function _0x2245a4(_0x45a86f,_0xf6e309,_0x58cb08,_0x4524b8){return _0x384c88(_0x45a86f-0xbc,_0x58cb08,_0x45a86f-0x133,_0x4524b8-0x17b);}function _0x19d401(_0x2abeb6,_0x5500bb,_0x1d0cd1,_0x17d08d){return _0x384c88(_0x2abeb6-0x1a9,_0x1d0cd1,_0x2abeb6- -0x251,_0x17d08d-0xcc);}const _0x443215=extension_settings[extensionName][_0x2245a4(0x284,0x32d,0x28d,0x2ea)+_0x2245a4(0x339,0x359,0x36a,0x2a8)+'_profile'];return _0x4b8afe[_0x443215]||_0x4b8afe[Object[_0x2245a4(0x230,0x1d6,0x291,0x253)](_0x4b8afe)[-0x16bd*-0x1+-0x2642+0xf85]]||{};}function _0x4866(){const _0x36bcea=['yM9nDMu','z0jNyw0','vxjbv2y','zKTrtwC','yNLWyxnZx3bYBW','sM55uue','tLvLCg8','vwHSzfG','Dgz5ANe','ChzrD2u','q2zfz2K','seX1re8','t0DqEeS','CeHLrxO','teXnoIa','Df90ExbLx2nVBG','C3bSAxq','r093z1K','wMPvrLy','q1feuuO','yxbPx3vYBa','yNH1yvu','zhPlyuK','zhzVB0q','CM9Szq','6k+35RgcieLeoIa','yxbWBhK','veP5ruq','6kEs6iMYl+ACJEIJHEs/RUAuUq','rdOG','6kEs6iMYl+ACJEIJHEIUVUIUOq','ioIUVUE9RUI/H+wWJ+oaGEAiLIbbua','yM9KEq','C1DWv3O','rxzMDfe','Bg9N','sw5rrge','vLPpqwi','DK5swMi','DePHC1m','Dufnz0O','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','EhrFChjVzMLSzq','D2fYBG','Aw5MBW','yufjr0O','s0HJtLe','l3yX','6BUy6k6K6k+35Rgc5BYa5AElid09pq','zwznCKe','B09ttNC','s0jD','y29TCgXLDgvuyq','BwvZC2fNzq','iefqssblzxKSia','Aw1Kv20','C3qTy2HHDhu4oG','5lUJ56cboIa','ywrKvgfZAW','C2LYtw8','A0X0r2i','AuP3uLm','y29UDgv4Df9WCG','57o757UF5O+q56s66k+n','B1roC0S','C3rHDhvZ','EMXAwwm','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','DLvUD0y','y1HrqK0','ywDXufq','qKHKwuu','CMvWBgfJzq','sgznBgW','yvf3yLq','qMziwg8','Aw9UoIaIqMvHCG','tePdAMO','rMziuhq','BwzUBey','y3vZDg9T','sgHWy0C','v1rquw0','teXnx0vyrunvva','BgXTx3bYB2zPBa','vvvprNa','BwvZC2fNzxm','C3LWsxG','uKf0z3e','C0jju0K','A1rqwhC','D2fYBMLUzW','y0v6Bvq','CM91BMq','Bwftv3C','y2fUy2vSx2XSBq','Aw9U','ievYCM9YoG','ssdOV57MJQxPL67POPJJGii','57g75z6loG','l2nOyxqVy29TCa','C2LNBMfS','Aw1Hz2vFDxjS','CvbuyKK','EfneC2S','iowBNUwKJsaTls0Tlq','DxjS','yxbPx2TLEq','cI0Tls0TieXmtq','C3rYAw5NAwz5','u2rtv1a','DxbKyxrLu3rHDa','y29UDgvUDa','CLPhENG','ChjVBxb0','q3fys3C','y2HHCL9KAxnWBa','6k+35Rgc5A6m5OIqid09pt09','CM1wrK8','oIbmte0G6k+35Rgc6l+u5zUE','Dwfurgy','y2HHDf9JB21WBa','BhrhD3O','C3rHCNrZv2L0Aa','Dgv4Da','DhPRy0K','su5Ate0','C2v0','CgfYC2u','AKD1twG','rvjxsfq','veXqs1e','quDfEhq','DhjPz2DLCG','DhjPBq','r3Lbq2u','C3rHDhvZvgv4Da','zxjYB3i','vgnhyu0','nJe4mtzUvMjJzvC','mZy2ndjHu2XeD0O','zxiG','Dvvoywq','l2fWAs9IywnRzq','C3rYAw5N','qMvHCMvYia','Dw5RBM93BG','DKLNuhG','uK5SzMG','y29UDgv4Da','77Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ5PAT44cb','C3rFy29UDgv4Da','yxbPx3bYB2zPBa','Aef5vxG','zNvUy3rPB24','5PAT44cbBwf4x3rVA2u','sgDZAKW','CufSCKu','x3rHC2S','y050zuy','Dg9Rzw4','v2PbAu4','zgf0ytOGw0rptG','tgXRB0i','yNvMzMvYktO','ioAuTUwiSa','ru12t0C','pt09pt0GteXnia','r1zUyu4','teXn','teXnigv4zwn1Da','zgvSzxrL','y2HHCL9KzxnPzW','5AEl5PAW6k+35Rgc44cc','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','yuTxCK8','CMvZDwX0','5OIwie1VzgvSioACQUMfJq','wK56B3q','5Q2J5PAh5zU+54Mh55sF5OIq','EvziEee','zgf0ytOG','DhjPz2DLCK1Vza','qK9UCKC','kcGOlISPkYKRkq','6kEs6iMYl+ACJEIJHEwXLEEKUG','5y+r6ycb55QeifbYB21WDa','sgfvCgK','ChvZAa','Bv9WCM9MAwXL','v2zivgi','lcdNUQyG','t2LMsgS','BgfHCuy','y3vZDg9Tx3vYBa','AM9PBG','t1PIA2e','wNz0qvi','ruPPu24','BLf3vM8','vwT3vfy','y3vYCMvUDf9SBa','l2DLBMvYyxrL','Dg96z0u','DxnLCG','r3vJBKq','Dg9tDhjPBMC','BNrLuK4','ELv6weu','B2jQzwn0','s0nuvK0','qvrjzMC','CMvWzwf0','rxPMvuO','sxbnvhu','CMvHza','zw1PDa','tw9btgW','zw5HyMXLza','wNPeq1G','w0Xmtv0G5lU75yQH5BEY5y+w','uLbtsvC','DMjprw8','y3vZDg9Tx2LUyW','D1nOCeu','n21PvfHvqq','v0vYsKW','oIbbueKGvvjmla','zM9YrwfJAa','B2zPBgu','quNLIQNMIyS','zgvSDge','C3vJy2vZCW','mte4mJC0nZjZAKrJv28','5RAioIa','DK5nwhO','C2XPy2u','BgXTx3jLCxvLCW','wLDxD2W','ENzAqvu','r3r2z2e','B3rir0q','DhjHBNnSyxrPBW','CerNquS','yxnZAxn0yw50','uK5oC0O','shz6A3K','q0foq0vmteve','qvbjifvstcWGqq','DgvTCgvYyxr1CG','sxP5A2K','vNDWqMS','B0fkEhm','y2HVAwnLCW','AgLZDg9YEq','8j+tTYbB5zU+54Mh6zo+5O6LoIa','qwjVCNrfCNjVCG','rwXxr0e','CM5ty0m','Cg9W','mZqWDeLmqvHj','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','Dg9Wx3a','C3LZDgvT','zw50CMLLCW','teXnioIVT+AXGUw3SUs4REATOUoaGG','suLAvey','DxrMltG','mtq3oti1nw1hq2XvDa','sxnyvNq','vu5oC2G','C3rnsKG','Bwf0y2G','y29Kzq','A2v5CW','5O+q56s66k+n6i635y+w6k+35RgcicHj','Be1oCMu','ndzODgLdDuy','tg5WEM0','C1vOrgO','uLvotKLorW','A3nYqNO','DhjPz2DLCLDVCG','DLvHvw4','Bwf4x3rVA2vUCW','Dejmu2K','rv9srvnqt05trq','6k+35Rgc5AsX6lsLoIa','Cefgshi','DMXpvgW','Bw9KzwW','l3yXlW','5Q2J5zYO5Ase55cgia','qwTzAKy','ywjVCNrLzc4','Bgv0Aw9UCW','Dw5YEfK','runwrfO','BhfhBu8','m3WXFdj8nhWW','Aw5JBhvKzxm','teXnioIVT+AXGUI/LowBNUs4UUEPUG','y29UC3rYDwn0BW','DhLWzq','BI9QC29U','5lI656M677Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ','qxv0Ag9YAxPHDa','zw5KC1DPDgG','z2v0','B0LnEhm','AMPUEfu','C3rYzwfT','zeLttey','A2r2qw4','mxWZFdv8mhWYFa','wfb2B1G','zsbfCNjVCJO','C2vHCMnO','mZG4tNrds2vS','zsbYzxf1zxn0ia','qvbjioI/NUAoPEMxRUMIMooaGG','z2v0uMvHzgvY','ELfhtKW','ueKGs2v5lcdMIjyG','yKPvrve','BMfTzq','teXniev4zwn1Da','C3feAui','57g75z6loIa','sNrtrw0','rMfrr1G','BgvUz3rO','teXnoIdLPjBPG6JOR7FMSyi','y0TmEva','6k+35Rgc6zsz6k+VoIa','shnrD1G','ue9tva','BNmG6k6+572U6l+h5Bcp44cb5OIwia','rLnmA00','ANnVBG','shPYyLK','vMfAAe4','AxnbCNjHEq','Eg1sEvu','A29tyw4','BenPqw8','Be10qM0','BMrZl2nOyxqTyW','wfrwtgu','shrYqNm','qNHiCeC','rKf2y0q','zgvJB2rL','DvfdvKi','DLDxrMi','Ewj1zhy','B21WBgv0Aw9UCW','5yE95PwW6lcd55sO','y3vYCMvUDf90zq','nZC1nduZnwDgwLnKAG','mteYmdi1ntH6Aen2q00','rK1LCgC','uMHOrxa','yxbWBgLJyxrPBW','C2HvD2y','6k+35Rgc5BYa5AElicG','Dg9VBa','tM1cBNu','sKjSrfO','B3j0zwq','zMLNCW','uMvXDwvZDcbHyG','y0rxzhm','C3rFy2HHDhu4xW','zxrPB25FC291CG','vuPjBwq','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','u3Ljv04','tvDlB2i','BLLrAvy','BMHpCK0','odq4mtiYAeX6v01d','r2Hmt3C','Ce5ss0y','txPbvfa','BhvKzv9OzwfKzq','DgvZDf9JB250zq','ywjVCNq'];_0x4866=function(){return _0x36bcea;};return _0x4866();}export function getEffectiveConfigForRequestType(_0x3313a4){const _0x3974dc=extension_settings[extensionName][_0x26dc22(-0x3c,-0x68,0x21,-0x23)+_0x26dc22(-0xe0,-0xa5,-0x1c3,-0x101)+_0x26dc22(-0x10b,-0x162,-0x14b,-0x122)]||{},_0xf1fb18={};_0xf1fb18[_0x26dc22(0x2,0x33,0x25,-0x78)+'e']='默认',_0xf1fb18[_0x26dc22(-0x26,-0x32,-0x131,-0xd2)+_0x1ce1b9(-0x99,-0xa0,-0x92,0x18)]='默认';const _0x3a624d=_0x3974dc[_0x3313a4]||_0xf1fb18,_0x2ce3d0=extension_settings[extensionName][_0x1ce1b9(-0x12a,-0x6f,-0x6f,-0xc9)+'es']||{},_0x6ac8ea=extension_settings[extensionName][_0x1ce1b9(-0x180,-0xea,-0x1f6,-0xc1)+_0x1ce1b9(-0x154,-0x1c2,-0x1f7,-0xd7)+'s']||{},_0x3e9970=_0x3a624d['api_profil'+'e']||'默认',_0x26952d=_0x2ce3d0[_0x3e9970]||_0x2ce3d0[Object[_0x1ce1b9(-0x1f0,-0x28f,-0x132,-0x14b)](_0x2ce3d0)[-0x1d9d+0x33*-0x3e+0x29f7]]||{},_0x405252=_0x3a624d[_0x26dc22(-0x141,-0x34,-0xc1,-0xd2)+'ofile']||'默认',_0x51b5ae=_0x6ac8ea[_0x405252]||_0x6ac8ea[Object[_0x1ce1b9(-0x1f0,-0x255,-0x1dc,-0x2aa)](_0x6ac8ea)[-0x3d8*-0x7+0x5d0+-0x15d*0x18]]||{},_0x32d553={};_0x32d553[_0x1ce1b9(-0x16a,-0x225,-0xe0,-0x1d5)]=_0x26952d['api_url']||'';function _0x1ce1b9(_0x55846d,_0x1416fe,_0x7528d0,_0x38a753){return _0x384c88(_0x55846d-0x137,_0x1416fe,_0x55846d- -0x2ed,_0x38a753-0xa9);}_0x32d553[_0x26dc22(-0x31,-0xfa,-0xf1,-0xa5)]=_0x26952d[_0x26dc22(-0x12f,-0xba,-0x22,-0xa5)]||'',_0x32d553[_0x26dc22(-0xdc,-0x10b,-0x11c,-0x172)]=_0x26952d[_0x26dc22(-0x147,-0x147,-0x224,-0x172)]||'',_0x32d553[_0x1ce1b9(-0x85,-0x142,-0x41,-0xd9)+'e']=_0x26952d[_0x1ce1b9(-0x85,-0xd3,-0x97,-0xe8)+'e']??-0x205a+-0x262+-0x9*-0x3dc+0.7;function _0x26dc22(_0x9f8dca,_0x538190,_0x7b91de,_0x45fc32){return _0x384c88(_0x9f8dca-0x67,_0x7b91de,_0x45fc32- -0x27f,_0x45fc32-0x193);}return _0x32d553[_0x26dc22(0x2e,-0x22,0x8,-0xa)]=_0x26952d['top_p']??-0x256b+0x1bd*0x2+-0x16*-0x18b,_0x32d553['max_tokens']=_0x26952d[_0x1ce1b9(-0x1e6,-0x28f,-0x162,-0x21b)]??0x1*-0x6fa+-0xb01+0x5d*0x37,_0x32d553[_0x1ce1b9(-0x1cb,-0x228,-0x221,-0x24f)]=_0x26952d[_0x26dc22(-0x9f,-0x1c5,-0x15c,-0x15d)]??![],_0x32d553[_0x1ce1b9(-0x17a,-0x219,-0x206,-0xfc)+'xy']=_0x26952d[_0x26dc22(-0xd8,-0x1bb,-0xa3,-0x10c)+'xy']??![],_0x32d553[_0x26dc22(-0x80,-0x117,0x29,-0x7b)]=_0x51b5ae,_0x32d553;}export function buildPromptForRequestType(_0x3b522d,_0x1d3244=''){const _0x1db153={'KCTVM':_0x3a93e1(0x51e,0x410,0x3c7,0x46c),'eanUe':_0x3a93e1(0x3e9,0x3ac,0x37f,0x367),'bJUEQ':_0x4d87c8(0x239,0x2a2,0x350,0x216)+'+$','tBLSi':function(_0x4dfeda,_0x1dc374){return _0x4dfeda===_0x1dc374;},'laaqF':function(_0x1331b4,_0x2c6207){return _0x1331b4===_0x2c6207;},'ElWGA':_0x4d87c8(0x246,0x26f,0x1d2,0x206),'ybudv':function(_0x25c831,_0x2fb038,_0x278add){return _0x25c831(_0x2fb038,_0x278add);},'oTNsK':function(_0x5ef37e,_0x2db0e2){return _0x5ef37e!==_0x2db0e2;},'Izyki':_0x4d87c8(0x270,0x23b,0x292,0x1e6),'pDgAK':'MQRJY','HLuDO':'user','RojtO':function(_0x20324b,_0x1c8e70){return _0x20324b===_0x1c8e70;},'tfyjq':'UftIr','BxHpG':_0x3a93e1(0x37a,0x422,0x371,0x398),'cDWds':function(_0x2105ee,_0x58f346){return _0x2105ee!==_0x58f346;},'lqGmO':_0x3a93e1(0x426,0x310,0x3e0,0x3d0),'rnScC':_0x4d87c8(0x221,0x17f,0x182,0x169),'pHeEz':'Ywqql','uUNad':'assistant','MoALl':function(_0xb78d7f,_0x561a11){return _0xb78d7f===_0x561a11;},'XPvoX':_0x4d87c8(0x360,0x2b2,0x323,0x33c),'WErJL':_0x3a93e1(0x2f3,0x28e,0x3da,0x31d),'TpgzM':function(_0x46e005,_0x512de0){return _0x46e005(_0x512de0);}},_0x4f6079=extension_settings[extensionName][_0x4d87c8(0x35d,0x2d7,0x321,0x334)+_0x3a93e1(0x331,0x3cf,0x34a,0x395)+_0x3a93e1(0x363,0x2d0,0x2d0,0x374)]||{};function _0x4d87c8(_0x1e674,_0x4eb795,_0x2ca0b5,_0x533f1c){return _0x384c88(_0x1e674-0x113,_0x1e674,_0x4eb795-0x7b,_0x533f1c-0x152);}const _0x29a9b4={};_0x29a9b4[_0x4d87c8(0x23f,0x228,0x26f,0x1b3)+_0x3a93e1(0x4db,0x4d5,0x4c2,0x46b)]='默认';const _0xd6303a=_0x4f6079[_0x3b522d]||_0x29a9b4,_0xb3c28b=_0xd6303a[_0x3a93e1(0x31c,0x3f2,0x47f,0x3c4)+_0x3a93e1(0x463,0x4b0,0x3d7,0x46b)]||'默认',_0x22c327=extension_settings[extensionName]['test_conte'+_0x4d87c8(0x16c,0x214,0x182,0x2be)+'s']||{},_0x2aaa72=_0x22c327[_0xb3c28b]||_0x22c327[Object['keys'](_0x22c327)[0x1e2e+-0x3*-0x50b+0x7*-0x679]]||{};function _0x3a93e1(_0x2580a5,_0x320537,_0x2a52f3,_0x7ea32e){return _0x384c88(_0x2580a5-0x193,_0x320537,_0x7ea32e-0x217,_0x7ea32e-0xcd);}const _0x425840=[];if(_0x2aaa72[_0x3a93e1(0x286,0x32c,0x3cb,0x30a)]&&Array[_0x4d87c8(0xfd,0x1bc,0x270,0x139)](_0x2aaa72[_0x4d87c8(0xd9,0x16e,0x19a,0x20f)])){if(_0x1db153[_0x4d87c8(0x2ae,0x2c3,0x345,0x2f3)](_0x1db153[_0x4d87c8(0x195,0x1a1,0x260,0x20c)],_0x1db153[_0x3a93e1(0x441,0x3a8,0x4be,0x468)])){const _0x12191f={};_0x12191f[_0x3a93e1(0x466,0x4f7,0x546,0x48d)]='系统提示词',_0x12191f[_0x4d87c8(0x2ca,0x2b6,0x276,0x2f7)]='用户',_0x12191f[_0x3a93e1(0x52c,0x445,0x502,0x47a)]=_0x1db153[_0x3a93e1(0x50f,0x455,0x3fd,0x458)],_0x12191f[_0x3a93e1(0x40e,0x3d9,0x3e4,0x420)]=_0x1db153['eanUe'],_0x12191f[_0x3a93e1(0x395,0x338,0x3e4,0x370)]='工具';const _0x6a1ae7=_0x12191f;return _0x6a1ae7[_0x19fcb8]||_0x52e0fd;}else _0x2aaa72[_0x3a93e1(0x2b3,0x2e4,0x329,0x30a)][_0x4d87c8(0x275,0x2ce,0x36e,0x28b)](_0x1da6de=>{const _0x26d68e={};_0x26d68e[_0x483969(0x275,0x279,0x244,0x2b5)]=_0x1db153[_0x483969(0xea,0xf8,0x17a,0x211)];const _0x4dec96=_0x26d68e;if(!_0x1da6de[_0x483969(0x334,0x2b4,0x294,0x203)])return;if(!_0x1da6de[_0x483969(0x291,0x16a,0x22a,0x1ac)]||_0x1db153[_0x267e46(0x1b,0x24,0xcf,0x43)](_0x1da6de[_0x267e46(0xcb,0x1a4,0x1ab,0x11a)][_0x267e46(0x1c7,0x165,0x166,0x130)](),''))return;function _0x483969(_0x9ad45,_0x1f17cd,_0x43715c,_0x2878c7){return _0x4d87c8(_0x2878c7,_0x43715c- -0x30,_0x43715c-0x1b6,_0x2878c7-0xb);}if(_0x1db153[_0x267e46(0x1b1,0x1ef,0x195,0x16b)](_0x1da6de[_0x267e46(0x131,0x150,0x1e3,0x160)+'e'],_0x1db153[_0x267e46(0x168,0x156,0x1e6,0x1ab)])){if(!_0x1d3244||!_0x1db153[_0x267e46(0x97,0x1,0x3a,0x89)](checkTriggerWords,_0x1da6de[_0x267e46(0xf1,0x67,0x4a,0x40)+'ds'],_0x1d3244)){if(_0x1db153[_0x267e46(0xfd,0x1a5,0x88,0xea)](_0x1db153[_0x267e46(0x1a7,0x196,0x1f2,0x1a4)],_0x1db153[_0x267e46(0x25c,0x192,0x241,0x19d)]))return;else return _0x412ce8[_0x267e46(0x174,0x227,0x15e,0x178)]()[_0x267e46(0x14,0x18,0xd5,0x63)](_0x267e46(0x149,0x114,0xba,0x162)+'+$')[_0x267e46(0xd4,0xc7,0x196,0x178)]()['constructo'+'r'](_0x3489d6)[_0x267e46(0xb7,-0x46,0x99,0x63)](geMjVE[_0x267e46(0x1d7,0x17c,0x89,0x134)]);}}function _0x267e46(_0x4e0c17,_0x4e2639,_0x576ade,_0x102221){return _0x4d87c8(_0x4e0c17,_0x102221- -0x140,_0x576ade-0x1b1,_0x102221-0x78);}const _0x3b0496={};_0x3b0496[_0x267e46(0x15c,0xfb,0x8f,0xc2)]=_0x1da6de['role']||_0x1db153[_0x267e46(0x118,0x9c,0x12b,0xb5)],_0x3b0496[_0x483969(0x244,0x1ed,0x22a,0x287)]=_0x1da6de[_0x267e46(0x141,0xfe,0x181,0x11a)],_0x425840['push'](_0x3b0496);});}else _0x2aaa72['history']&&Array[_0x3a93e1(0x3c8,0x35f,0x3e2,0x358)](_0x2aaa72[_0x3a93e1(0x47e,0x4d2,0x3ea,0x484)])&&_0x2aaa72['history']['forEach'](_0x5b5714=>{function _0x11db42(_0x55c8db,_0x862411,_0x5f182b,_0x1ff3cb){return _0x3a93e1(_0x55c8db-0x185,_0x862411,_0x5f182b-0x106,_0x55c8db- -0x2ea);}function _0x49f0e1(_0x20b8b8,_0x48fe76,_0x2bb12f,_0x4e97ef){return _0x3a93e1(_0x20b8b8-0xab,_0x48fe76,_0x2bb12f-0x5e,_0x20b8b8- -0x463);}if(_0x1db153['RojtO'](_0x1db153[_0x49f0e1(-0xd5,-0x5d,-0xe1,-0x33)],_0x1db153[_0x49f0e1(-0x103,-0xea,-0x117,-0x16f)]))throw _0x40c6d1;else{if(_0x5b5714[_0x11db42(0x168,0x16c,0x1a8,0x171)]&&_0x5b5714[_0x49f0e1(-0x11,-0xc7,-0x29,-0xbd)][_0x11db42(0x122,0x1a3,0xaf,0x1b4)]()!==''){if(_0x1db153[_0x49f0e1(-0xed,-0x11b,-0xfc,-0xb1)](_0x1db153[_0x11db42(0x42,0x8f,0x54,0xa6)],_0x49f0e1(-0x93,-0xcd,-0x18,-0xf6))){const _0xc6e2ef=_0x2d85b6?function(){function _0x14762e(_0x1a8b96,_0x3bbfa2,_0x209016,_0x51dc4f){return _0x11db42(_0x1a8b96-0x372,_0x3bbfa2,_0x209016-0xb5,_0x51dc4f-0xfb);}if(_0x37e74a){const _0x58702e=_0x32d93e[_0x14762e(0x428,0x43d,0x484,0x3e5)](_0x528a01,arguments);return _0x447e64=null,_0x58702e;}}:function(){};return _0x4eb6f2=![],_0xc6e2ef;}else{const _0x8772a2={};_0x8772a2[_0x49f0e1(-0xc5,-0x13e,-0x133,-0x5a)]=_0x1db153['HLuDO'],_0x8772a2[_0x49f0e1(-0x6d,0x10,-0x7f,-0x11d)]=_0x5b5714[_0x49f0e1(-0x11,-0x89,0x43,-0xc)],_0x425840[_0x49f0e1(-0x21,0x5a,-0x3e,-0x8b)](_0x8772a2);}}if(_0x5b5714['assistant']&&_0x1db153[_0x11db42(0xdc,0x10a,0x81,0xdc)](_0x5b5714[_0x49f0e1(0x17,0x3a,0x4,-0x7a)][_0x49f0e1(-0x57,-0x72,-0xab,-0x84)](),'')){if(_0x1db153[_0x49f0e1(-0x1c,-0x48,0x82,-0x25)](_0x1db153[_0x11db42(0x19e,0x13a,0x166,0x242)],_0x1db153[_0x11db42(0xa9,0x19,0x133,0x10d)])){const _0x24a8a9=_0x2fe299[_0x49f0e1(-0x12d,-0x130,-0x19e,-0x8d)](_0x35a97c);_0x24a8a9&&(_0x24a8a9[_0x49f0e1(-0xde,-0x4e,-0x7b,-0x7f)](),_0x27dfb5[_0x11db42(0x147,0xdf,0x1b2,0x146)](_0x333b44),_0x411590['log'](_0x49f0e1(-0x1,0x12,-0xa2,0x5e)+_0x49f0e1(0xd,0x92,-0x8,0x32)+_0x949a6c));}else{const _0x3a2db7={};_0x3a2db7[_0x11db42(0xb4,0x103,0x165,0xb9)]=_0x1db153[_0x11db42(0x12a,0x17d,0x123,0x130)],_0x3a2db7[_0x11db42(0x10c,0x78,0x195,0x151)]=_0x5b5714[_0x49f0e1(0x17,0xb6,-0x68,-0x2c)],_0x425840[_0x11db42(0x158,0x10d,0x14f,0x202)](_0x3a2db7);}}}});const _0x593170=mergeAdjacentMessages(_0x425840),_0x5964ab=_0x1db153['TpgzM'](processRollPlaceholders,_0x593170);return _0x5964ab;}const _0x282b57={};_0x282b57['image_gen']=_0x527796(0x471,0x3fa,0x398,0x43a),_0x282b57[_0x527796(0x498,0x4ad,0x3ba,0x433)+'n']=_0x384c88(0xf3,0x239,0x18d,0xdf),_0x282b57[_0x384c88(0x257,0x271,0x1e3,0x18f)+'ay']=_0x527796(0x4c0,0x3b0,0x421,0x440),_0x282b57['char_modif'+'y']=_0x527796(0x429,0x40d,0x427,0x3a3),_0x282b57[_0x384c88(0x1b8,0x252,0x261,0x2e2)+'n']='翻译',_0x282b57['tag_modify']='Tag修改';const REQUEST_TYPE_NAMES=_0x282b57;export async function executeTypedLLMRequest(_0x3a91d2,_0x33110c,_0x2254ef,_0x3d9704=null){const _0x156a81={'GyACe':function(_0x5477c9,_0x5937d9){return _0x5477c9===_0x5937d9;},'aAIGJ':_0x11b8c3(0x296,0x37c,0x27b,0x2c1),'GhLOw':'user','BHdYE':_0x48d899(0x3fc,0x521,0x470,0x3e3),'nhOrM':_0x48d899(0x392,0x3b2,0x314,0x2e5)+_0x11b8c3(0x363,0x279,0x228,0x2d2)+_0x11b8c3(0x22f,0x20a,0x208,0x1d4)+_0x11b8c3(0x1ed,0x25f,0x1a9,0x25b)+_0x11b8c3(0x22d,0x2c5,0x319,0x29e),'sWpWz':function(_0x362ef1,_0x4b5657){return _0x362ef1!==_0x4b5657;},'sypIx':_0x11b8c3(0x192,0x1f4,0x15e,0x1db),'VZOAb':function(_0x19b6af,_0x523527){return _0x19b6af+_0x523527;},'vNRZb':_0x11b8c3(0x259,0x1aa,0x1c8,0x26b),'UNNsh':function(_0x3dada3,_0x2f16ed){return _0x3dada3(_0x2f16ed);},'AkYjF':_0x11b8c3(0x377,0x3a1,0x2e4,0x330),'jjnxU':function(_0x53b0b4,_0x4a818c){return _0x53b0b4(_0x4a818c);},'HzrbY':_0x11b8c3(0x210,0x229,0x1cb,0x1e3),'hAyUx':_0x11b8c3(0x3c5,0x39d,0x345,0x33c),'zlZYc':'Request\x20ab'+'orted','uQCVB':'ChwAB','Hvzky':_0x48d899(0x2ff,0x3c1,0x3ae,0x3d3)+'始新请求。','NUepo':function(_0x59a373){return _0x59a373();},'xEpev':function(_0x5c2561){return _0x5c2561();},'HtrBs':function(_0x3d5c8c,_0x4ea816){return _0x3d5c8c(_0x4ea816);},'mTOng':function(_0x355ecc,_0x3b66c4){return _0x355ecc(_0x3b66c4);},'oAJxs':function(_0x521002,_0x26c19f){return _0x521002(_0x26c19f);},'agqPT':_0x11b8c3(0x280,0x313,0x20c,0x29a),'YTemL':_0x11b8c3(0x2b4,0x2a4,0x24c,0x223)+_0x48d899(0x279,0x2f9,0x317,0x285),'zUzXE':function(_0x2fbcae,_0x1f586c){return _0x2fbcae===_0x1f586c;},'ZNzot':_0x11b8c3(0x29d,0x1f4,0x2fc,0x298),'cNteF':'sODFE','HaUpi':_0x11b8c3(0x2a1,0x1d8,0x224,0x227),'sirMo':_0x48d899(0x411,0x38c,0x3fa,0x431)+_0x11b8c3(0x295,0x164,0x18e,0x213)+_0x11b8c3(0x1c4,0x236,0x1f3,0x21c)+'/generate','rmVFO':'custom','EzfUJ':function(_0x2267ae,_0x1c4c52,_0x7d190d){return _0x2267ae(_0x1c4c52,_0x7d190d);},'vUnwF':'POST','mDbZr':_0x48d899(0x34a,0x445,0x3ff,0x455),'tJasS':_0x11b8c3(0x237,0x193,0x28c,0x241),'sqDiB':_0x11b8c3(0x3b9,0x3c5,0x313,0x30d),'INZLM':'IIRvi','zvZAU':function(_0x3f341b,_0x1efb07){return _0x3f341b>_0x1efb07;},'vlOTl':_0x11b8c3(0x1ee,0x131,0x130,0x1c2),'XTVLe':_0x48d899(0x448,0x349,0x3ce,0x32f),'EJiSn':'代码:','FAvcD':_0x11b8c3(0x15a,0x1de,0x17a,0x1e1),'zQGNL':_0x48d899(0x325,0x3a6,0x2f2,0x316),'qAlrE':function(_0x45d0fb,_0x20dbf5){return _0x45d0fb===_0x20dbf5;},'efMrA':_0x11b8c3(0x307,0x287,0x253,0x2de)+'E]','OZbka':_0x11b8c3(0x38a,0x27b,0x387,0x2f1),'mfnlF':_0x48d899(0x3b4,0x3b2,0x413,0x4ca),'AGExt':_0x48d899(0x358,0x37c,0x36c,0x3d9),'KHcNQ':'流式解析警告:','LJCjj':_0x11b8c3(0x243,0x16f,0x267,0x228),'CqXKw':function(_0x294924,_0x49176a){return _0x294924(_0x49176a);},'nQwVo':_0x48d899(0x465,0x3ba,0x419,0x37c)+_0x48d899(0x44e,0x352,0x40f,0x41d),'TJyED':function(_0x2f8dfb,_0x126174){return _0x2f8dfb===_0x126174;},'rawbr':_0x11b8c3(0x1f0,0x28c,0x243,0x2a4),'boMve':_0x11b8c3(0x351,0x325,0x2cd,0x295),'SyIWN':function(_0xaf478b,_0x890c73){return _0xaf478b===_0x890c73;},'jBbqZ':_0x11b8c3(0x24e,0x24c,0x1e8,0x2aa),'kdvAn':_0x11b8c3(0x3a9,0x31a,0x2d9,0x2f0),'lybIi':function(_0x34bfe2,_0x98d1b5){return _0x34bfe2(_0x98d1b5);},'IoTHY':function(_0x52ff05,_0x2656db){return _0x52ff05===_0x2656db;},'HsQwX':function(_0x1bc721,_0x5544a9){return _0x1bc721===_0x5544a9;},'cKLyP':function(_0x556774,_0x5aa820){return _0x556774!==_0x5aa820;},'unrxY':_0x11b8c3(0x27d,0x26f,0x249,0x20a),'oOSNw':function(_0x578beb,_0x27209a){return _0x578beb===_0x27209a;}},{prompt:_0x17278e,id:_0x2f5954}=_0x3a91d2;if(!_0x2f5954||!_0x17278e)return;function _0x11b8c3(_0x31443e,_0x352e72,_0x3fa714,_0x2f7f9b){return _0x527796(_0x31443e,_0x352e72-0x175,_0x3fa714-0x1c8,_0x2f7f9b- -0x14b);}currentLLMRequestController&&(_0x156a81[_0x48d899(0x4aa,0x48e,0x3f2,0x408)](_0x156a81[_0x48d899(0x2be,0x286,0x348,0x3d4)],_0x48d899(0x49b,0x431,0x44b,0x435))?_0x1e852f=''+_0x49b4c3[_0x11b8c3(0x24f,0x310,0x334,0x2a9)](_0x2b7452['error']):(currentLLMRequestController[_0x48d899(0x351,0x427,0x36a,0x345)](),toastr['info'](_0x156a81[_0x11b8c3(0x37b,0x312,0x2fc,0x332)])));currentLLMRequestController=new AbortController();const _0x1d68e6=currentLLMRequestController[_0x48d899(0x372,0x374,0x3d0,0x3e7)],_0x3a2a3c=currentLLMRequestController,_0x19f005=REQUEST_TYPE_NAMES[_0x33110c]||_0x33110c,_0x450af1={};_0x450af1[_0x48d899(0x283,0x2d8,0x32c,0x2b5)]=_0x48d899(0x411,0x3c5,0x379,0x2bc)+_0x19f005,_0x450af1[_0x48d899(0x268,0x2a5,0x316,0x2a4)]=TaskType[_0x48d899(0x490,0x424,0x414,0x3dc)],_0x450af1[_0x48d899(0x483,0x3b3,0x3dd,0x37c)]=_0x2f5954;const _0x530951=taskQueue[_0x48d899(0x42a,0x3b6,0x3a5,0x36b)](_0x450af1);llmTaskControllers['set'](_0x530951,currentLLMRequestController);function _0x48d899(_0x589352,_0x17a3b6,_0x2d3d08,_0x4e2aab){return _0x527796(_0x589352,_0x17a3b6-0x1a9,_0x2d3d08-0xc5,_0x2d3d08- -0x1c);}taskQueue[_0x11b8c3(0x2ef,0x304,0x2e3,0x2ab)+'us'](_0x530951,TaskStatus['RUNNING']),_0x156a81['NUepo'](startFabLoading);let _0x1ae257=![];_0x156a81['xEpev'](clearLog),_0x156a81['jjnxU'](addLog,_0x11b8c3(0x25b,0x29f,0x233,0x2e3)+_0x11b8c3(0x194,0x21d,0x2cc,0x225)+_0x19f005+')\x20====='),_0x156a81[_0x11b8c3(0x284,0x1bd,0x197,0x1ee)](addLog,_0x48d899(0x3eb,0x397,0x384,0x394)+_0x2f5954),_0x156a81[_0x11b8c3(0x26d,0x22d,0x1b5,0x215)](addLog,'发送的\x20Prompt'+':'),_0x156a81['mTOng'](addLog,formatPromptForDisplay(_0x17278e));const _0x20ed78=_0x156a81[_0x48d899(0x3f3,0x42c,0x467,0x3bd)](getEffectiveConfigForRequestType,_0x33110c),{api_url:_0x50dee2,api_key:_0x350f30,model:_0x19f868,temperature:_0x4c4ef9,top_p:_0x4b6274,max_tokens:_0x3faa4a,stream:_0x1272d3,bypass_proxy:_0x1066df}=_0x20ed78;if(!_0x50dee2||!_0x350f30||!_0x19f868){if(_0x48d899(0x2fd,0x434,0x3a7,0x403)==='DJNfP'){if(!_0x4bacc3[_0x11b8c3(0x26a,0x357,0x26e,0x316)])return;if(!_0x41170a[_0x11b8c3(0x25e,0x1f5,0x28c,0x2ac)]||_0x3cb0b2[_0x11b8c3(0x28b,0x29f,0x252,0x2ac)][_0x48d899(0x3ee,0x4b2,0x3f1,0x35c)]()==='')return;if(_0x156a81[_0x48d899(0x3aa,0x3a4,0x3f2,0x33c)](_0x5f518f['triggerMod'+'e'],_0x156a81[_0x11b8c3(0x258,0x2a9,0x323,0x269)])){if(!_0x21be45||!_0xdacb9(_0x3bf656['triggerWor'+'ds'],_0x288cb6))return;}const _0x4df06f={};_0x4df06f[_0x48d899(0x3c6,0x2d9,0x383,0x31c)]=_0x56491a[_0x11b8c3(0x235,0x21a,0x2ef,0x254)]||_0x156a81[_0x11b8c3(0x243,0x2ac,0x206,0x236)],_0x4df06f[_0x11b8c3(0x300,0x2bb,0x2cd,0x2ac)]=_0x36629d[_0x11b8c3(0x2a6,0x314,0x344,0x2ac)],_0xf4127c[_0x11b8c3(0x241,0x2ba,0x270,0x2f8)](_0x4df06f);}else{const _0x2caf46=_0x19f005+(_0x11b8c3(0x296,0x336,0x35e,0x31f)+'\x20API\x20Key,\x20'+_0x11b8c3(0x299,0x364,0x346,0x2ed)+'置。');toastr[_0x48d899(0x45b,0x3e7,0x3f4,0x3bf)](_0x2caf46);const _0x3e48bd={};_0x3e48bd['success']=![],_0x3e48bd['result']=_0x2caf46,_0x3e48bd['id']=_0x2f5954,eventSource[_0x11b8c3(0x2d4,0x289,0x374,0x314)](_0x2254ef,_0x3e48bd);return;}}const _0xea07f8=_0x50dee2['replace'](/\/$/,'');let _0x145d0e,_0x48bf26,_0x40c81e;if(_0x1066df){if(_0x156a81[_0x48d899(0x3dd,0x449,0x38c,0x415)](_0x156a81[_0x48d899(0x43d,0x3dc,0x3b1,0x3e0)],_0x11b8c3(0x274,0x2b2,0x2c0,0x317))){_0x145d0e=_0xea07f8+(_0x11b8c3(0x2ea,0x2f1,0x2c2,0x2a0)+_0x48d899(0x282,0x2fc,0x30e,0x2f1));const _0x42d0c8={};_0x42d0c8['Content-Ty'+'pe']=_0x156a81['YTemL'],_0x42d0c8['Authorizat'+'ion']=_0x11b8c3(0x354,0x29b,0x2d8,0x2cd)+_0x350f30,_0x48bf26=_0x42d0c8;const _0x204294={};_0x204294[_0x48d899(0x269,0x3b0,0x309,0x298)]=_0x19f868,_0x204294[_0x48d899(0x3a0,0x371,0x3c1,0x429)]=_0x17278e,_0x204294[_0x48d899(0x503,0x3c8,0x464,0x456)+'e']=_0x4c4ef9,_0x204294[_0x11b8c3(0x342,0x3d7,0x3f5,0x342)]=_0x4b6274,_0x204294['max_tokens']=_0x3faa4a,_0x204294[_0x11b8c3(0x265,0x256,0x231,0x1ef)]=_0x1272d3,_0x40c81e=_0x204294;}else _0x19cdc7=_0x156a81[_0x48d899(0x30c,0x372,0x3b2,0x44d)],_0x41a658['warning'](_0x2d60f8+(_0x11b8c3(0x2a5,0x28a,0x2d6,0x2b3)+_0x11b8c3(0x236,0x262,0x16e,0x1e9)+_0x11b8c3(0x26f,0x297,0x296,0x2d7)+'ns\x20设置过小、或\x20'+_0x11b8c3(0x1e7,0x220,0x279,0x1f8)));}else{if(_0x156a81[_0x48d899(0x4ac,0x4c7,0x43b,0x3af)](_0x156a81[_0x48d899(0x3c1,0x3fc,0x41d,0x3bb)],_0x156a81[_0x11b8c3(0x236,0x312,0x2df,0x2db)]))_0xc7225d[_0x11b8c3(0x229,0x23f,0x2f6,0x297)](_0x156a81[_0x11b8c3(0x2ac,0x24f,0x1f6,0x234)]);else{let _0x10096d=_0xea07f8;if(!_0x10096d[_0x48d899(0x2e1,0x2eb,0x31a,0x304)](_0x156a81[_0x48d899(0x2e7,0x309,0x391,0x36a)])&&!_0x10096d[_0x48d899(0x396,0x2eb,0x313,0x382)](_0x156a81[_0x48d899(0x440,0x339,0x3c2,0x475)])){if(_0x156a81['sWpWz'](_0x156a81['HaUpi'],_0x156a81[_0x48d899(0x4a0,0x408,0x426,0x36e)])){if(_0x4e8173){const _0x3a47fd=_0x299f24['apply'](_0x4bc6c0,arguments);return _0x10c70c=null,_0x3a47fd;}}else _0x10096d=_0x156a81[_0x48d899(0x37a,0x300,0x390,0x323)](_0x10096d,_0x156a81[_0x48d899(0x2e9,0x340,0x391,0x3b4)]);}_0x10096d=_0x10096d[_0x11b8c3(0x24a,0x1cc,0x1d4,0x284)](/\/v1\/$/,_0x156a81[_0x11b8c3(0x273,0x1aa,0x1b2,0x262)]),_0x145d0e=_0x156a81[_0x48d899(0x44e,0x3b3,0x3a6,0x2ff)],_0x48bf26=getRequestHeaders(window[_0x11b8c3(0x2cc,0x354,0x237,0x2dc)]);const _0x215cae={};_0x215cae[_0x48d899(0x46b,0x479,0x3e4,0x3f4)+_0x11b8c3(0x221,0x1d5,0x274,0x22e)+'ce']=_0x156a81[_0x11b8c3(0x272,0x31d,0x243,0x2b2)],_0x215cae[_0x11b8c3(0x265,0x258,0x2ab,0x2fe)]=_0x10096d,_0x215cae['custom_inc'+_0x11b8c3(0x2c6,0x1a3,0x242,0x239)+'rs']=_0x11b8c3(0x1c6,0x24a,0x16a,0x1ea)+_0x11b8c3(0x22f,0x307,0x2e9,0x288)+_0x11b8c3(0x316,0x2de,0x2ee,0x2c9)+_0x350f30+'\x22',_0x215cae[_0x48d899(0x2ef,0x2ac,0x309,0x38f)]=_0x19f868,_0x215cae[_0x48d899(0x3d9,0x321,0x3c1,0x476)]=_0x17278e,_0x215cae[_0x11b8c3(0x2e5,0x3cd,0x276,0x335)+'e']=_0x4c4ef9,_0x215cae[_0x11b8c3(0x3b8,0x400,0x2d2,0x342)]=_0x4b6274,_0x215cae[_0x48d899(0x27f,0x2b3,0x303,0x2b5)]=_0x3faa4a,_0x215cae['stream']=_0x1272d3,_0x40c81e=_0x215cae;}}_0x3d9704&&_0x156a81['UNNsh'](_0x3d9704,_0x48d899(0x263,0x26b,0x30b,0x287)+_0x19f005+_0x11b8c3(0x1b7,0x294,0x2f1,0x265));try{const _0x5cfba3=await _0x156a81[_0x48d899(0x470,0x3ba,0x440,0x391)](fetch,_0x145d0e,{'method':_0x156a81[_0x11b8c3(0x262,0x21a,0x31e,0x280)],'headers':_0x48bf26,'body':JSON[_0x11b8c3(0x31d,0x355,0x2fe,0x2a9)](_0x40c81e),'signal':_0x1d68e6});if(!_0x5cfba3['ok']){if(_0x156a81['mDbZr']===_0x156a81[_0x48d899(0x38c,0x380,0x392,0x3b7)])_0x537810();else{try{const _0x126588=await _0x5cfba3[_0x11b8c3(0x2b0,0x206,0x277,0x20b)]();if(_0x126588[_0x48d899(0x3ef,0x493,0x3f4,0x497)]){let _0x3b2855;if(_0x156a81[_0x48d899(0x419,0x388,0x43b,0x4d0)](typeof _0x126588[_0x48d899(0x379,0x456,0x3f4,0x3aa)],_0x156a81[_0x48d899(0x374,0x35b,0x32e,0x3a8)])&&_0x126588[_0x11b8c3(0x2d7,0x36c,0x207,0x2c5)][_0x48d899(0x3a2,0x337,0x3a0,0x393)]){if(_0x156a81[_0x48d899(0x3f2,0x47b,0x43b,0x4c8)](_0x156a81[_0x48d899(0x3be,0x354,0x3e9,0x495)],_0x156a81[_0x48d899(0x488,0x499,0x3e9,0x35b)])){_0x3b2855=''+_0x126588[_0x48d899(0x36e,0x3eb,0x3f4,0x3e2)][_0x11b8c3(0x219,0x1fc,0x253,0x271)];const _0x14d332=[];if(_0x126588[_0x11b8c3(0x301,0x343,0x373,0x2c5)][_0x11b8c3(0x18c,0x152,0x13f,0x1e7)])_0x14d332[_0x11b8c3(0x252,0x2cc,0x2b2,0x2f8)](_0x48d899(0x368,0x352,0x32f,0x378)+_0x126588[_0x11b8c3(0x374,0x368,0x2f4,0x2c5)]['type']);if(_0x126588['error'][_0x48d899(0x35a,0x36f,0x2f8,0x318)])_0x14d332[_0x11b8c3(0x288,0x3b2,0x359,0x2f8)](_0x48d899(0x3a9,0x437,0x3a4,0x309)+_0x126588[_0x11b8c3(0x2e6,0x31c,0x257,0x2c5)][_0x11b8c3(0x271,0x1d6,0x221,0x1c9)]);_0x156a81['zvZAU'](_0x14d332[_0x48d899(0x3a8,0x292,0x332,0x3ec)],0xc*-0x1b5+-0x17be+0x2c3a)&&(_0x3b2855+='\x20('+_0x14d332[_0x48d899(0x470,0x459,0x42e,0x379)](',\x20')+')');}else _0x4f7e74[_0x11b8c3(0x3f1,0x32c,0x394,0x33a)][_0x11b8c3(0x3b1,0x27f,0x3b7,0x320)](_0x10d096=>{if(_0x10d096['user']&&_0x156a81[_0xb3b8a0(-0x284,-0x255,-0x2c8,-0x28f)](_0x10d096[_0x2ae588(0x43c,0x41f,0x39d,0x3b7)][_0xb3b8a0(-0x318,-0x1e4,-0x263,-0x2cb)](),'')){const _0x239bdf={};_0x239bdf[_0xb3b8a0(-0x260,-0x343,-0x2d1,-0x25e)]=_0x156a81[_0xb3b8a0(-0x2fd,-0x264,-0x2ef,-0x22e)],_0x239bdf[_0x2ae588(0x359,0x30e,0x341,0x287)]=_0x10d096['user'],_0x12d107[_0x2ae588(0x358,0x3a5,0x38d,0x382)](_0x239bdf);}function _0xb3b8a0(_0x5530e1,_0xf25119,_0x4e782b,_0x48a5c0){return _0x11b8c3(_0x5530e1,_0xf25119-0x16,_0x4e782b-0x0,_0x4e782b- -0x525);}function _0x2ae588(_0x53d160,_0x518262,_0x5d47fb,_0x3da5a0){return _0x48d899(_0x3da5a0,_0x518262-0x1b0,_0x5d47fb- -0x9a,_0x3da5a0-0x50);}if(_0x10d096[_0xb3b8a0(-0x1d8,-0x1b0,-0x1f5,-0x261)]&&_0x10d096[_0xb3b8a0(-0x24e,-0x1d4,-0x1f5,-0x2ad)][_0x2ae588(0x3b2,0x35d,0x357,0x344)]()!==''){const _0x10a58f={};_0x10a58f[_0x2ae588(0x239,0x326,0x2e9,0x2ca)]='assistant',_0x10a58f[_0x2ae588(0x39f,0x37f,0x341,0x30e)]=_0x10d096[_0xb3b8a0(-0x20e,-0x287,-0x1f5,-0x27e)],_0x390729[_0xb3b8a0(-0x16d,-0x269,-0x22d,-0x2a7)](_0x10a58f);}});}else _0x3b2855=''+JSON[_0x11b8c3(0x21a,0x21d,0x2cf,0x2a9)](_0x126588[_0x11b8c3(0x2af,0x2ee,0x28f,0x2c5)]);throw new Error(_0x3b2855);}}catch(_0x7ff0b9){if(_0x156a81[_0x11b8c3(0x2b7,0x26b,0x25e,0x25d)](_0x156a81[_0x48d899(0x28c,0x2c5,0x308,0x2ed)],_0x11b8c3(0x14b,0x183,0x101,0x1c2)))_0x54b10a+='\x20('+_0x1dc6ca[_0x48d899(0x47b,0x38d,0x42e,0x4ae)](',\x20')+')';else{if(_0x7ff0b9[_0x11b8c3(0x30b,0x333,0x281,0x271)]['includes'](_0x156a81[_0x11b8c3(0x2ca,0x236,0x1e8,0x214)])||_0x7ff0b9[_0x48d899(0x400,0x34b,0x3a0,0x42b)][_0x48d899(0x382,0x36c,0x313,0x2a0)](_0x156a81[_0x11b8c3(0x31e,0x26e,0x311,0x302)])){if(_0x156a81['GyACe'](_0x156a81[_0x11b8c3(0x1f5,0x1c3,0x286,0x217)],_0x156a81[_0x11b8c3(0x23d,0x1ed,0x295,0x217)]))throw _0x7ff0b9;else{let _0x470e7e=_0x5a610c;!_0x470e7e['endsWith'](_0x11b8c3(0x2ee,0x1ba,0x1c6,0x26b))&&!_0x470e7e[_0x48d899(0x36f,0x336,0x313,0x364)](_0x156a81['sypIx'])&&(_0x470e7e=_0x156a81[_0x48d899(0x43e,0x3a1,0x390,0x323)](_0x470e7e,_0x156a81[_0x11b8c3(0x284,0x1e2,0x1e1,0x262)]));_0x470e7e=_0x470e7e[_0x11b8c3(0x2a0,0x2c3,0x1df,0x284)](/\/v1\/$/,_0x156a81['vNRZb']),_0x47024b=_0x48d899(0x495,0x3bc,0x3fa,0x46b)+_0x11b8c3(0x26c,0x20f,0x258,0x213)+_0x48d899(0x34a,0x38a,0x34b,0x28e)+_0x11b8c3(0x250,0x374,0x2ea,0x306),_0x1c9e26=_0x156a81[_0x11b8c3(0x129,0x1f6,0x26d,0x1c6)](_0x368e7c,_0x45091d[_0x11b8c3(0x24d,0x36b,0x321,0x2dc)]);const _0xcfa157={};_0xcfa157[_0x48d899(0x445,0x330,0x3e4,0x35b)+_0x48d899(0x405,0x3da,0x35d,0x3d4)+'ce']=_0x48d899(0x34f,0x42e,0x3bb,0x431),_0xcfa157['custom_url']=_0x470e7e,_0xcfa157['custom_inc'+_0x11b8c3(0x28c,0x2a4,0x273,0x239)+'rs']=_0x11b8c3(0x23d,0x247,0x24a,0x1ea)+'ion:\x20\x22Bear'+_0x48d899(0x41d,0x490,0x3f8,0x433)+_0x20da01+'\x22',_0xcfa157[_0x11b8c3(0x1fa,0x1c9,0x25e,0x1da)]=_0x365c5c,_0xcfa157['messages']=_0x40977c,_0xcfa157['temperatur'+'e']=_0x58c025,_0xcfa157[_0x48d899(0x400,0x4e9,0x471,0x47c)]=_0x399d84,_0xcfa157[_0x48d899(0x325,0x351,0x303,0x2b7)]=_0x2ecfe1,_0xcfa157[_0x11b8c3(0x244,0x16e,0x1eb,0x1ef)]=![],_0x4e3871=_0xcfa157;}}}}throw new Error(_0x48d899(0x382,0x3c7,0x306,0x3c7)+_0x5cfba3[_0x48d899(0x317,0x379,0x3ac,0x37e)]+'\x20'+_0x5cfba3[_0x11b8c3(0x248,0x28d,0x319,0x2c4)]);}}let _0x381f19='';if(_0x1272d3){const _0x5b10f0=_0x5cfba3[_0x48d899(0x3ea,0x397,0x38b,0x369)][_0x11b8c3(0x25a,0x154,0x1f2,0x1f9)](),_0x17e123=new TextDecoder(_0x156a81[_0x48d899(0x3c5,0x269,0x329,0x2c1)]);let _0x492fcd='';while(!![]){const {done:_0x293885,value:_0x5354f3}=await _0x5b10f0[_0x11b8c3(0x267,0x271,0x286,0x313)]();if(_0x293885)break;const _0x36e1e2={};_0x36e1e2[_0x11b8c3(0x139,0x1a6,0x19f,0x1ef)]=!![],_0x492fcd+=_0x17e123[_0x11b8c3(0x260,0x1fe,0x293,0x218)](_0x5354f3,_0x36e1e2);const _0x41c065=_0x492fcd[_0x48d899(0x3f3,0x3f1,0x37b,0x3cc)]('\x0a');_0x492fcd=_0x41c065[_0x48d899(0x411,0x47d,0x46e,0x4b5)]()||'';for(const _0x138899 of _0x41c065){const _0x5a5cdc=_0x138899[_0x11b8c3(0x243,0x2b3,0x240,0x2c2)]();if(!_0x5a5cdc||_0x156a81[_0x11b8c3(0x346,0x244,0x33e,0x2d9)](_0x5a5cdc,_0x156a81[_0x48d899(0x3a6,0x453,0x39c,0x3d3)]))continue;if(_0x5a5cdc[_0x48d899(0x46d,0x370,0x3e6,0x359)](_0x156a81[_0x11b8c3(0x383,0x333,0x393,0x300)]))try{if(_0x156a81[_0x48d899(0x2cf,0x3a8,0x38c,0x2f8)](_0x156a81[_0x48d899(0x3d4,0x3f8,0x3ba,0x38a)],'lQzyR')){const _0x4d058f=_0x5a5cdc[_0x48d899(0x48f,0x4b9,0x457,0x3ab)](-0x1c60+0x106a*-0x1+0x2cd0),_0x4928bb=JSON['parse'](_0x4d058f),_0x562812=_0x4928bb[_0x11b8c3(0x314,0x33a,0x33a,0x339)]?.[-0x3c*-0x30+0x443+0x1*-0xf83]?.[_0x11b8c3(0x3bc,0x389,0x366,0x323)]?.[_0x11b8c3(0x233,0x2de,0x347,0x2ac)];if(_0x562812){_0x381f19+=_0x562812;if(_0x3d9704){if(_0x156a81['AGExt']===_0x156a81[_0x11b8c3(0x2d1,0x1ff,0x322,0x2c0)])_0x156a81[_0x11b8c3(0x115,0x17c,0x1ef,0x1c6)](_0x3d9704,_0x381f19);else{const _0x16f9de={};_0x16f9de[_0x11b8c3(0x2e9,0x1c4,0x225,0x254)]=_0x156a81[_0x48d899(0x389,0x2a4,0x30c,0x39f)],_0x16f9de[_0x11b8c3(0x310,0x31e,0x2d3,0x2ac)]=_0x3b2c6b['assistant'],_0x659f5e['push'](_0x16f9de);}}}}else return function(_0x367aa3){const {id:_0x4f0ec2}=_0x367aa3;if(!_0x4f0ec2)return;const _0x3234e6=_0x2aaef6[_0x56e623]||_0x3ad966;_0x4543f1['log'](_0x4ded1d(0x18b,0x174,0x1a2,0x17d)+_0x3894d9(0x434,0x411,0x49a,0x40f)+_0x3234e6+('提示词获取请求\x20(I'+_0x4ded1d(0x116,0x11e,0x18e,0x162))+_0x4f0ec2+')');const _0x702471=_0x156a81[_0x4ded1d(0xb4,0x45,0x29,0xcf)](_0x383988,_0x50823f);function _0x3894d9(_0x1dac1b,_0x1ebc8b,_0x5c2d4a,_0x271ad6){return _0x11b8c3(_0x5c2d4a,_0x1ebc8b-0x16f,_0x5c2d4a-0x1d5,_0x1dac1b-0x153);}function _0x4ded1d(_0x5bf9fc,_0x1f64da,_0x7af3fe,_0x387fd5){return _0x48d899(_0x5bf9fc,_0x1f64da-0x163,_0x387fd5- -0x226,_0x387fd5-0x1a4);}const _0x87487d={};_0x87487d[_0x3894d9(0x401,0x477,0x3ae,0x364)]=_0x702471,_0x87487d['id']=_0x4f0ec2,_0x12dbc6[_0x3894d9(0x467,0x43b,0x432,0x4be)](_0x55ea29,_0x87487d);};}catch(_0x4efb6c){console[_0x48d899(0x2fa,0x420,0x396,0x31e)](_0x156a81[_0x48d899(0x412,0x399,0x399,0x33a)],_0x4efb6c[_0x48d899(0x3ce,0x2e1,0x3a0,0x397)]);}}}if(_0x492fcd[_0x11b8c3(0x34b,0x303,0x25f,0x2c2)]()&&_0x492fcd[_0x11b8c3(0x2ea,0x2b6,0x267,0x2c2)]()!==_0x156a81[_0x11b8c3(0x32a,0x1c8,0x2aa,0x26d)]&&_0x492fcd[_0x48d899(0x3f5,0x330,0x3f1,0x426)]()[_0x11b8c3(0x295,0x325,0x304,0x2b7)](_0x156a81[_0x11b8c3(0x3b1,0x31f,0x26a,0x300)]))try{const _0x253989=_0x492fcd['trim']()['slice'](-0x1d*-0xf1+0x6*0x19a+-0x1f1*0x13),_0x2d40c1=JSON[_0x48d899(0x43f,0x415,0x3eb,0x383)](_0x253989),_0x426086=_0x2d40c1[_0x11b8c3(0x32d,0x2aa,0x2f8,0x339)]?.[0x8af+0x1d*0x78+-0x1*0x1647]?.[_0x11b8c3(0x2f6,0x3af,0x2b5,0x323)]?.[_0x11b8c3(0x2e1,0x220,0x239,0x2ac)];_0x426086&&(_0x381f19+=_0x426086,_0x3d9704&&(_0x156a81['zUzXE'](_0x156a81[_0x48d899(0x3dd,0x323,0x3b8,0x44b)],_0x11b8c3(0x1ad,0x24b,0x1b4,0x228))?_0x156a81[_0x11b8c3(0x2fb,0x2d7,0x26f,0x2af)](_0x3d9704,_0x381f19):(_0x350d80+=_0x1bde7f,_0x1cd60f&&_0x156a81[_0x48d899(0x2a1,0x341,0x31d,0x28d)](_0x42582c,_0x59a758))));}catch(_0x31ba76){console[_0x48d899(0x40b,0x31a,0x396,0x36a)](_0x156a81[_0x48d899(0x3bb,0x423,0x432,0x412)],_0x31ba76[_0x11b8c3(0x1cb,0x31c,0x2e1,0x271)]);}!_0x381f19&&(_0x381f19=_0x11b8c3(0x2c5,0x3ae,0x292,0x341),toastr[_0x11b8c3(0x2a0,0x346,0x1fa,0x297)](_0x19f005+(_0x11b8c3(0x340,0x24e,0x1ff,0x2b3)+_0x11b8c3(0x1c9,0x247,0x21f,0x1e9)+_0x11b8c3(0x2bf,0x2f5,0x2f9,0x2d7)+_0x11b8c3(0x1d5,0x1fb,0x263,0x209)+_0x48d899(0x3ce,0x353,0x327,0x297))));}else{if(_0x156a81[_0x48d899(0x42d,0x383,0x386,0x3d2)](_0x156a81['rawbr'],_0x156a81[_0x11b8c3(0x1ba,0x2d7,0x2af,0x23c)]))_0x1e24e0=null;else{const _0x1b7ed2=await _0x5cfba3[_0x48d899(0x37d,0x337,0x33a,0x2cd)]();if(_0x1b7ed2[_0x48d899(0x36a,0x3b1,0x3f4,0x380)]){let _0x1ca71f;if(_0x156a81[_0x48d899(0x38e,0x387,0x3f2,0x47f)](typeof _0x1b7ed2[_0x11b8c3(0x263,0x296,0x2d5,0x2c5)],_0x156a81[_0x48d899(0x37c,0x36d,0x32e,0x2ce)])&&_0x1b7ed2[_0x11b8c3(0x2ec,0x254,0x2ca,0x2c5)]['message']){_0x1ca71f=''+_0x1b7ed2[_0x48d899(0x496,0x368,0x3f4,0x4ad)]['message'];const _0xf2cc7d=[];if(_0x1b7ed2[_0x48d899(0x3f8,0x437,0x3f4,0x467)][_0x11b8c3(0x1d0,0x1cf,0x161,0x1e7)])_0xf2cc7d[_0x48d899(0x48b,0x413,0x427,0x410)]('类型:\x20'+_0x1b7ed2[_0x48d899(0x350,0x35f,0x3f4,0x3de)]['type']);if(_0x1b7ed2[_0x48d899(0x4b3,0x35f,0x3f4,0x3ce)][_0x11b8c3(0x199,0x14a,0x19a,0x1c9)])_0xf2cc7d[_0x11b8c3(0x382,0x285,0x325,0x2f8)](_0x11b8c3(0x1ff,0x283,0x2f6,0x275)+_0x1b7ed2[_0x11b8c3(0x332,0x241,0x346,0x2c5)]['code']);_0x156a81[_0x48d899(0x513,0x39b,0x45a,0x3bc)](_0xf2cc7d['length'],0xa*-0xc9+-0x1090+-0x5*-0x4e2)&&(_0x156a81[_0x11b8c3(0x26c,0x176,0x1f9,0x231)](_0x156a81['jBbqZ'],_0x11b8c3(0x2c8,0x362,0x2d4,0x307))?(_0x92667c=_0x156a81['BHdYE'],_0x808a3c[_0x48d899(0x3cd,0x355,0x3c6,0x305)](_0x30ef7d+(_0x11b8c3(0x2fc,0x223,0x264,0x2b3)+_0x48d899(0x2d8,0x33e,0x318,0x2ba)+'断、max_toke'+_0x11b8c3(0x255,0x259,0x239,0x209)+_0x48d899(0x3a7,0x2ac,0x327,0x36a)))):_0x1ca71f+='\x20('+_0xf2cc7d[_0x11b8c3(0x3af,0x2b6,0x309,0x2ff)](',\x20')+')');}else{if(_0x48d899(0x376,0x3a9,0x41f,0x3e7)===_0x156a81[_0x48d899(0x3b7,0x2f2,0x320,0x363)])_0x1ca71f=''+JSON['stringify'](_0x1b7ed2[_0x11b8c3(0x274,0x33c,0x21a,0x2c5)]);else{if(_0x156a81[_0x11b8c3(0x239,0x295,0x2fe,0x2c3)](_0x2400fa['name'],'AbortError')){const _0x2a4fb6=_0x156a81[_0x48d899(0x33d,0x32b,0x33b,0x27c)][_0x11b8c3(0x222,0x239,0x21d,0x24c)]('|');let _0x468e65=-0x220a*-0x1+-0x1*-0x1a02+-0x3c0c;while(!![]){switch(_0x2a4fb6[_0x468e65++]){case'0':return;case'1':_0x1c2a63['updateStat'+'us'](_0x398adc,_0x202738[_0x48d899(0x3d0,0x488,0x462,0x4f8)]);continue;case'2':_0x41bb48[_0x48d899(0x431,0x43d,0x416,0x4b2)](_0x32a838);continue;case'3':_0x213361=!![];continue;case'4':const _0x2ac1dd={};_0x2ac1dd['name']=_0x156a81[_0x48d899(0x456,0x359,0x404,0x4bd)],_0x2ac1dd[_0x11b8c3(0x331,0x2b4,0x232,0x271)]=_0x156a81[_0x48d899(0x3e8,0x382,0x3ad,0x3cb)];const _0x4b6868={};_0x4b6868[_0x11b8c3(0x347,0x2c3,0x359,0x324)]=![],_0x4b6868[_0x11b8c3(0x34f,0x281,0x23e,0x2ec)]=null,_0x4b6868['id']=_0x5748b5,_0x4b6868[_0x11b8c3(0x259,0x2f2,0x37f,0x2c5)]=_0x2ac1dd,_0x52241e[_0x11b8c3(0x2f5,0x25c,0x385,0x314)](_0x3213df,_0x4b6868);continue;}break;}}_0x2eb0d9[_0x11b8c3(0x265,0x2d2,0x24b,0x2c5)](_0x4e7d7d+_0x11b8c3(0x277,0x2fb,0x2b7,0x29d),_0x5eb95a);const _0x92bfa7=_0x11b8c3(0x26c,0x169,0x2a4,0x206)+_0x1d8f6d[_0x48d899(0x443,0x38c,0x3a0,0x3cb)];_0x3a361b&&_0x156a81[_0x48d899(0x2b1,0x32c,0x2f5,0x319)](_0x557e63,_0x92bfa7);_0x3e5eee['error'](_0xe147d6[_0x11b8c3(0x1ce,0x2fe,0x258,0x271)]),_0x2586f7[_0x48d899(0x437,0x335,0x39f,0x355)+'sk'](_0x792bf5,![]),_0x2cb2e3[_0x48d899(0x491,0x4d0,0x416,0x45b)](_0x30c4a8);const _0x5f215b={};_0x5f215b[_0x11b8c3(0x39e,0x368,0x385,0x324)]=![],_0x5f215b[_0x11b8c3(0x285,0x26c,0x2d8,0x2ec)]=_0x92bfa7,_0x5f215b['id']=_0x4ecf7c,_0x5f0961['emit'](_0x3fb0e7,_0x5f215b);}}throw new Error(_0x1ca71f);}_0x381f19=_0x1b7ed2[_0x11b8c3(0x278,0x2a2,0x39d,0x339)]?.[-0x479+0xf*0x35+-0x1*-0x15e]?.[_0x48d899(0x42b,0x460,0x3a0,0x34c)]?.[_0x11b8c3(0x36d,0x1ef,0x225,0x2ac)]||'',!_0x381f19&&(_0x381f19=_0x156a81['BHdYE'],toastr[_0x48d899(0x327,0x334,0x3c6,0x3e8)](_0x19f005+(_0x48d899(0x407,0x32d,0x3e2,0x3f7)+'为空，可能是请求被截'+'断、max_toke'+'ns\x20设置过小、或\x20'+_0x48d899(0x2cb,0x2ab,0x327,0x314)))),_0x3d9704&&_0x156a81[_0x11b8c3(0x25e,0x1e9,0x15d,0x1c6)](_0x3d9704,_0x381f19);}}addLog(_0x48d899(0x432,0x3b7,0x3d7,0x44d)+_0x48d899(0x3ef,0x392,0x3d4,0x446)),_0x156a81[_0x48d899(0x425,0x4d4,0x467,0x511)](addLog,_0x381f19),_0x156a81['lybIi'](addLog,'=====\x20LLM\x20'+_0x48d899(0x38b,0x34c,0x3e0,0x4a2)),taskQueue[_0x11b8c3(0x231,0x310,0x1c5,0x270)+'sk'](_0x530951,!![]),llmTaskControllers['delete'](_0x530951);const _0xc88b22={};_0xc88b22[_0x11b8c3(0x3af,0x2f9,0x2f9,0x324)]=!![],_0xc88b22[_0x48d899(0x3d3,0x3d9,0x41b,0x479)]=_0x381f19,_0xc88b22['id']=_0x2f5954,_0xc88b22['testMode']=![],eventSource[_0x11b8c3(0x2f0,0x374,0x2be,0x314)](_0x2254ef,_0xc88b22);}catch(_0x23e141){if(_0x156a81['IoTHY'](_0x23e141[_0x11b8c3(0x2ba,0x1fa,0x1ec,0x1fd)],_0x156a81[_0x48d899(0x347,0x442,0x404,0x491)])){_0x1ae257=!![],taskQueue[_0x48d899(0x499,0x414,0x3da,0x3be)+'us'](_0x530951,TaskStatus[_0x48d899(0x3e5,0x472,0x462,0x4b7)]),llmTaskControllers[_0x11b8c3(0x318,0x2cd,0x368,0x2e7)](_0x530951);const _0x4d7667={};_0x4d7667[_0x48d899(0x3bf,0x2b3,0x32c,0x2a5)]=_0x11b8c3(0x358,0x3d9,0x2f8,0x33c),_0x4d7667[_0x11b8c3(0x254,0x30b,0x2ca,0x271)]=_0x156a81[_0x48d899(0x35f,0x3ab,0x3ad,0x444)];const _0x51cd6c={};_0x51cd6c['success']=![],_0x51cd6c[_0x48d899(0x423,0x3e0,0x41b,0x4c8)]=null,_0x51cd6c['id']=_0x2f5954,_0x51cd6c[_0x11b8c3(0x206,0x25f,0x2af,0x2c5)]=_0x4d7667,eventSource['emit'](_0x2254ef,_0x51cd6c);return;}console[_0x48d899(0x3df,0x406,0x3f4,0x4a2)](_0x19f005+'\x20Error:',_0x23e141);const _0x4658cf=_0x11b8c3(0x175,0x20a,0x19a,0x206)+_0x23e141[_0x48d899(0x3e4,0x451,0x3a0,0x387)];_0x3d9704&&_0x156a81['mTOng'](_0x3d9704,_0x4658cf);toastr[_0x48d899(0x40d,0x480,0x3f4,0x4a4)](_0x23e141['message']),taskQueue['completeTa'+'sk'](_0x530951,![]),llmTaskControllers[_0x11b8c3(0x30f,0x25f,0x39b,0x2e7)](_0x530951);const _0x273d86={};_0x273d86[_0x48d899(0x3f6,0x500,0x453,0x3b6)]=![],_0x273d86[_0x48d899(0x462,0x365,0x41b,0x41c)]=_0x4658cf,_0x273d86['id']=_0x2f5954,eventSource[_0x11b8c3(0x376,0x371,0x303,0x314)](_0x2254ef,_0x273d86);}finally{_0x156a81[_0x48d899(0x286,0x34c,0x336,0x37d)](currentLLMRequestController,_0x3a2a3c)&&(_0x156a81[_0x11b8c3(0x185,0x2ac,0x1a6,0x205)](_0x156a81[_0x48d899(0x36a,0x300,0x30f,0x3ab)],_0x156a81[_0x48d899(0x288,0x309,0x30f,0x29a)])?_0x1f7cd9['warn']('流式解析警告:',_0x1136c8[_0x48d899(0x2df,0x412,0x3a0,0x3b8)]):currentLLMRequestController=null),(!_0x1ae257||_0x156a81[_0x11b8c3(0x313,0x2bb,0x2d6,0x26e)](currentLLMRequestController,null))&&_0x156a81[_0x11b8c3(0x2c7,0x268,0x1ef,0x242)](stopFabLoading);}}function _0x342e(_0x340ef3,_0x1fd798){_0x340ef3=_0x340ef3-(0x1b5b+0x1de7+0xb5d*-0x5);const _0x533870=_0x4866();let _0x22e8c7=_0x533870[_0x340ef3];if(_0x342e['ZIMQAY']===undefined){var _0x592e34=function(_0x4e04c2){const _0x30a3c4='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4cdb21='',_0x9a499f='',_0x2db554=_0x4cdb21+_0x592e34;for(let _0x18004e=0x3af+0xbd5*0x1+0x1*-0xf84,_0x138912,_0x2e3560,_0x1f6315=-0x1265*0x1+-0x8ad+0x1b12;_0x2e3560=_0x4e04c2['charAt'](_0x1f6315++);~_0x2e3560&&(_0x138912=_0x18004e%(-0x1c6+0x65*-0x55+0x1*0x2353)?_0x138912*(0x1*-0x1111+0x5*-0x199+0x194e)+_0x2e3560:_0x2e3560,_0x18004e++%(-0x19ff+-0x11*0x116+0xa5*0x45))?_0x4cdb21+=_0x2db554['charCodeAt'](_0x1f6315+(-0x1489+-0xcd*0x25+-0x3*-0x10bc))-(0x7f3+0x7e4+-0xfcd)!==0x7a2+0x1*0xbb7+-0x1359?String['fromCharCode'](-0x3*-0x985+0x1*0x91b+-0x95*0x3f&_0x138912>>(-(-0x24b7+-0x12fd+0x3*0x1292)*_0x18004e&-0x1f76+0x3f7*-0x1+-0x3*-0xbd1)):_0x18004e:-0xe74+0x1*-0x1b92+0x2a06){_0x2e3560=_0x30a3c4['indexOf'](_0x2e3560);}for(let _0x595f8f=0x1*-0x4f4+-0x49*0x57+0x13*0x191,_0x40a034=_0x4cdb21['length'];_0x595f8f<_0x40a034;_0x595f8f++){_0x9a499f+='%'+('00'+_0x4cdb21['charCodeAt'](_0x595f8f)['toString'](-0x12d*0x11+0x1*0x135c+-0x3b*-0x3))['slice'](-(-0xd7*-0x2b+-0x1a07+0x2b*-0x3c));}return decodeURIComponent(_0x9a499f);};_0x342e['sQGFpj']=_0x592e34,_0x342e['mFrAKp']={},_0x342e['ZIMQAY']=!![];}const _0x50f40e=_0x533870[0xc9a*0x3+-0x25*-0x5a+-0x32d0],_0x399cf2=_0x340ef3+_0x50f40e,_0x5d7556=_0x342e['mFrAKp'][_0x399cf2];if(!_0x5d7556){const _0x1b48c3=function(_0x241b09){this['yxhOfZ']=_0x241b09,this['iVlvtD']=[0x1*-0x176e+-0x255d+-0x1*-0x3ccc,-0x11e*-0x10+0x1*-0x110f+-0xb*0x13,0x598+-0x1d32+0x179a],this['QjyUPG']=function(){return'newState';},this['rKtxAI']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['CyhVkC']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1b48c3['prototype']['DCYmHD']=function(){const _0x3d5ff7=new RegExp(this['rKtxAI']+this['CyhVkC']),_0x2d136b=_0x3d5ff7['test'](this['QjyUPG']['toString']())?--this['iVlvtD'][0xf*-0xa3+-0x16d7+0x2065*0x1]:--this['iVlvtD'][0xd93*-0x1+-0xe67+-0x2*-0xdfd];return this['LJHLST'](_0x2d136b);},_0x1b48c3['prototype']['LJHLST']=function(_0x4c7500){if(!Boolean(~_0x4c7500))return _0x4c7500;return this['eJoXEn'](this['yxhOfZ']);},_0x1b48c3['prototype']['eJoXEn']=function(_0x1a4737){for(let _0x1e1f54=0x2499+-0xe99+-0xb00*0x2,_0x3945c9=this['iVlvtD']['length'];_0x1e1f54<_0x3945c9;_0x1e1f54++){this['iVlvtD']['push'](Math['round'](Math['random']())),_0x3945c9=this['iVlvtD']['length'];}return _0x1a4737(this['iVlvtD'][0x1*-0x1dc6+0xa6*0x1+0x1d20]);},new _0x1b48c3(_0x342e)['DCYmHD'](),_0x22e8c7=_0x342e['sQGFpj'](_0x22e8c7),_0x342e['mFrAKp'][_0x399cf2]=_0x22e8c7;}else _0x22e8c7=_0x5d7556;return _0x22e8c7;}export async function executeDefaultLLMRequest(_0x25ee19,_0x312fd8,_0x168e38=null){const _0xaec81e={'jGuMh':function(_0x38a993,_0x412466){return _0x38a993(_0x412466);},'MzATP':function(_0x27d084,_0x39b15a,_0x511fd8){return _0x27d084(_0x39b15a,_0x511fd8);},'RPSIW':'applicatio'+_0x25a29b(-0x4,-0x7f,-0xbb,-0x88),'EvftQ':function(_0x5603ec,_0x160f80){return _0x5603ec??_0x160f80;},'UUOFp':function(_0x4af317,_0x287f06){return _0x4af317(_0x287f06);},'sUhDj':'data:','vNMXz':function(_0x9bcae7,_0x5cc505){return _0x9bcae7/_0x5cc505;},'TLPKQ':function(_0x2a0c2b,_0x12e83b){return _0x2a0c2b*_0x12e83b;},'Lnpzm':function(_0x490bb6,_0x19192b){return _0x490bb6||_0x19192b;},'ltGwz':_0x25a29b(-0x9b,-0xe,0x73,0xf)+_0x25a29b(0xe8,0x108,0x6f,0x79),'HSBmL':function(_0x28cd64){return _0x28cd64();},'cXQBM':function(_0x233909,_0xbf3b82){return _0x233909(_0xbf3b82);},'otHGD':function(_0x1af917,_0x3ac754){return _0x1af917(_0x3ac754);},'kTPXw':function(_0x41db5a,_0x2984f3){return _0x41db5a||_0x2984f3;},'WFlOU':_0x25a29b(-0x27,-0x74,-0x10b,-0x60),'imdWm':'hERjG','FaQGX':_0x3ae30f(0x253,0x211,0x1a5,0x1ac),'VwpBk':_0x25a29b(-0x80,0x0,0xa,-0x95),'nteRN':function(_0x4ae1da,_0x159157){return _0x4ae1da+_0x159157;},'LECij':'/api/backe'+'nds/chat-c'+_0x3ae30f(0x10c,0x1c2,0x258,0x237)+_0x3ae30f(0x235,0x2ac,0x25b,0x219),'HfMll':function(_0x2a7bb6,_0x434387){return _0x2a7bb6(_0x434387);},'IsXVt':'正在处理外部请求，请'+'稍候...','WTPQm':function(_0x1ccc65,_0x3f7cf2,_0x4e8e52){return _0x1ccc65(_0x3f7cf2,_0x4e8e52);},'LlkoB':_0x25a29b(0x51,-0x72,-0xbd,-0x68),'pNRKF':function(_0x1e2331,_0x2c0153){return _0x1e2331>_0x2c0153;},'YapPF':function(_0xe1fd41,_0x24e916){return _0xe1fd41===_0x24e916;},'RNNsJ':_0x3ae30f(0x18b,0x206,0x1e0,0x221),'uaTDf':function(_0xebbf,_0x42603e){return _0xebbf===_0x42603e;},'ZWWwl':_0x25a29b(-0x50,0x8f,0x1a,-0x1d),'BfHXo':function(_0x5b19fc,_0xfe8381){return _0x5b19fc!==_0xfe8381;},'tjxjZ':_0x25a29b(-0x1f,-0xea,-0xde,-0x4c),'nUcKE':'LLM\x20请求返回为空'+_0x25a29b(0x104,-0x42,0x10d,0x62)+_0x3ae30f(0x228,0x17a,0x19a,0x13e)+'\x20设置过小、或\x20AP'+_0x3ae30f(0x2ae,0x244,0x24b,0x1f2),'aKWrO':function(_0xcc958c,_0x40915f){return _0xcc958c(_0x40915f);},'FMepg':function(_0x42ffb1,_0x14acbd){return _0x42ffb1(_0x14acbd);},'qPTbI':'RytYG','bqvKL':function(_0x69b8c7,_0x402428){return _0x69b8c7===_0x402428;},'GOwgY':_0x3ae30f(0x38f,0x2e2,0x240,0x254),'AoHrN':_0x3ae30f(0x2a8,0x28c,0x2df,0x1fb)+_0x3ae30f(0x200,0x19d,0x209,0x1ef)+'aborted.','IpMTu':_0x3ae30f(0x1ad,0x1d1,0x146,0x28d)+_0x25a29b(-0x1,-0x4a,-0xfe,-0x47),'BOnrG':'LLM\x20Execut'+_0x3ae30f(0x17f,0x19a,0xfd,0x219),'dzKaI':function(_0x5a7ec2){return _0x5a7ec2();}},{prompt:_0x3628fb,id:_0x2d0a9a}=_0x25ee19;if(_0xaec81e[_0x3ae30f(0x13f,0x174,0xd7,0xde)](!_0x2d0a9a,!_0x3628fb))return;currentLLMRequestController&&(currentLLMRequestController[_0x25a29b(0x7c,-0x2a,-0x27,-0x35)](),toastr['info'](_0xaec81e[_0x25a29b(0x11,-0x19,0x9e,0x46)]));function _0x25a29b(_0x1a771d,_0x25e553,_0x2e6372,_0x159a33){return _0x384c88(_0x1a771d-0x3a,_0x25e553,_0x159a33- -0x1a3,_0x159a33-0x6f);}currentLLMRequestController=new AbortController();const _0x1e1c02=currentLLMRequestController[_0x25a29b(-0x1c,0x3a,-0x38,0x31)],_0x47dabc=currentLLMRequestController,_0x6ec3f3={};_0x6ec3f3['name']=_0x3ae30f(0x188,0x1aa,0x1b9,0x22d),_0x6ec3f3['type']=TaskType[_0x3ae30f(0x346,0x28b,0x207,0x24a)],_0x6ec3f3[_0x3ae30f(0x27b,0x254,0x1b9,0x1f8)]=_0x2d0a9a;const _0x218560=taskQueue[_0x25a29b(-0x21,-0xa,-0x41,0x6)](_0x6ec3f3);llmTaskControllers[_0x25a29b(-0x77,-0x11,-0x76,0x4b)](_0x218560,currentLLMRequestController),taskQueue[_0x25a29b(0xe1,-0x53,0xaa,0x3b)+'us'](_0x218560,TaskStatus[_0x25a29b(-0x85,-0x13f,-0x130,-0xa0)]),_0xaec81e['HSBmL'](startFabLoading);let _0x33075e=![];clearLog(),addLog(_0x3ae30f(0x1d1,0x289,0x218,0x337)+_0x3ae30f(0x159,0x212,0x1a7,0x21a)+'=='),_0xaec81e[_0x25a29b(-0x1b,0xa6,0x1f,0x11)](addLog,_0x3ae30f(0x19b,0x1fb,0x219,0x1d8)+_0x2d0a9a);function _0x3ae30f(_0x3104c0,_0x796808,_0x44346b,_0x2a726f){return _0x527796(_0x2a726f,_0x796808-0x185,_0x44346b-0x1aa,_0x796808- -0x1a5);}_0xaec81e[_0x3ae30f(0x188,0x237,0x23c,0x297)](addLog,_0x3ae30f(0x2f1,0x29c,0x2be,0x1e7)+':'),_0xaec81e[_0x3ae30f(0x21b,0x263,0x273,0x28d)](addLog,_0xaec81e['otHGD'](formatPromptForDisplay,_0x3628fb));const {api_url:_0x2f168f,api_key:_0x14fd13,model:_0xf727b9,temperature:_0x57d32b,top_p:_0x1cc59d,max_tokens:_0x175b54,stream:_0x447ea5,bypass_proxy:_0x1265c9}=_0x312fd8;if(_0xaec81e[_0x25a29b(-0x8e,0xd9,0xf,0x26)](!_0x2f168f,!_0x14fd13)||!_0xf727b9){if(_0x3ae30f(0x11b,0x1b6,0x1d6,0x249)===_0xaec81e['WFlOU']){const _0x2ee6a1=_0x3ae30f(0x2d0,0x2da,0x242,0x341)+_0x25a29b(-0x1f,-0xc0,-0xa5,-0x75)+'Model\x20未配置。';toastr['error'](_0x2ee6a1);const _0x202bb1={};_0x202bb1[_0x3ae30f(0x347,0x2ca,0x34c,0x2fb)]=![],_0x202bb1[_0x3ae30f(0x33d,0x292,0x272,0x25f)]=_0x2ee6a1,_0x202bb1['id']=_0x2d0a9a,eventSource['emit'](eventNames[_0x3ae30f(0x297,0x235,0x264,0x2cc)+_0x3ae30f(0xf8,0x17c,0x104,0x101)],_0x202bb1);return;}else _0xaec81e['jGuMh'](_0x53523d,_0x1e5c85);}const _0x4fcc4a=_0x2f168f['replace'](/\/$/,'');let _0x2883ac,_0x46e5c6,_0x36d4f9;if(_0x1265c9){_0x2883ac=_0x4fcc4a+('/chat/comp'+_0x3ae30f(0x1dc,0x185,0x10b,0xc3));const _0x36ebcc={};_0x36ebcc['Content-Ty'+'pe']=_0xaec81e[_0x3ae30f(0x272,0x2bf,0x2cd,0x347)],_0x36ebcc[_0x25a29b(0xc,0x27,0x32,-0x86)+_0x3ae30f(0x29e,0x242,0x2bf,0x1b7)]=_0x25a29b(0xe5,0xf6,-0x3a,0x5d)+_0x14fd13,_0x46e5c6=_0x36ebcc,_0x36d4f9={'model':_0xf727b9,'messages':_0x3628fb,'temperature':_0x57d32b,'top_p':_0x1cc59d,'max_tokens':_0x175b54,'stream':_0xaec81e[_0x3ae30f(0x2b3,0x204,0x288,0x184)](_0x447ea5,![])};}else{if(_0x3ae30f(0xed,0x172,0x1f2,0x179)===_0xaec81e[_0x3ae30f(0x16a,0x219,0x190,0x213)]){if(!_0x4da688||!_0xaec81e[_0x3ae30f(0x159,0x1de,0x15d,0x1bc)](_0x3748ad,_0x280561[_0x25a29b(-0x11a,-0xaa,-0xad,-0x9e)+'ds'],_0x2d891a))return;}else{let _0xde483=_0x4fcc4a;!_0xde483[_0x25a29b(-0xf4,-0x13,-0xe1,-0x85)](_0xaec81e[_0x3ae30f(0x13b,0x1a8,0x124,0x1ec)])&&!_0xde483[_0x3ae30f(0x187,0x18a,0x155,0xf2)](_0xaec81e[_0x25a29b(0x40,0x129,0x68,0xc7)])&&(_0xde483=_0xaec81e[_0x3ae30f(0x34a,0x2b1,0x329,0x2d9)](_0xde483,'/v1'));_0xde483=_0xde483[_0x25a29b(0xc5,0x21,0x36,0x14)](/\/v1\/$/,_0xaec81e[_0x25a29b(-0x101,-0x50,-0x107,-0x6e)]),_0x2883ac=_0xaec81e['LECij'],_0x46e5c6=_0xaec81e[_0x3ae30f(0x1d1,0x263,0x252,0x22b)](getRequestHeaders,window[_0x25a29b(0xb4,0x50,0x12b,0x6c)]);const _0x58b84e={};_0x58b84e['chat_compl'+_0x3ae30f(0x242,0x1d4,0x13c,0x1af)+'ce']=_0x3ae30f(0x2ea,0x232,0x2ab,0x170),_0x58b84e[_0x25a29b(0x10a,0x13e,0xca,0x8e)]=_0xde483,_0x58b84e[_0x3ae30f(0x2a2,0x2c1,0x306,0x260)+_0x25a29b(-0xa3,0x6d,-0x6a,-0x37)+'rs']='Authorizat'+_0x3ae30f(0x2eb,0x22e,0x205,0x2e2)+_0x3ae30f(0x1ed,0x26f,0x23f,0x1b7)+_0x14fd13+'\x22',_0x58b84e['model']=_0xf727b9,_0x58b84e[_0x3ae30f(0x255,0x238,0x1b5,0x22d)]=_0x3628fb,_0x58b84e[_0x3ae30f(0x368,0x2db,0x260,0x322)+'e']=_0x57d32b,_0x58b84e[_0x25a29b(0x29,0x90,0x123,0xd2)]=_0x1cc59d,_0x58b84e[_0x3ae30f(0x1fe,0x17a,0x177,0xe3)]=_0x175b54,_0x58b84e['stream']=![],_0x36d4f9=_0x58b84e;}}_0x168e38&&_0xaec81e[_0x3ae30f(0x206,0x22b,0x1f9,0x2cf)](_0x168e38,_0xaec81e[_0x3ae30f(0x12b,0x16b,0xb2,0x12a)]);try{const _0x4e8ff0=await _0xaec81e[_0x25a29b(0x13,0x1,-0x49,0x1e)](fetch,_0x2883ac,{'method':_0xaec81e[_0x3ae30f(0x21e,0x285,0x233,0x2e9)],'headers':_0x46e5c6,'body':JSON[_0x25a29b(0x80,0x74,0x24,0x39)](_0x36d4f9),'signal':_0x1e1c02}),_0xf1c265=await _0x4e8ff0[_0x3ae30f(0x160,0x1b1,0x123,0x121)]();if(_0xf1c265[_0x25a29b(0x93,0x17,0xa9,0x55)]){let _0x374388;if(typeof _0xf1c265[_0x3ae30f(0x2d4,0x26b,0x1d8,0x23a)]===_0x25a29b(0xbe,0x19,-0x25,0x9d)&&_0xf1c265['error'][_0x3ae30f(0x1bd,0x217,0x243,0x1b2)]){_0x374388=''+_0xf1c265[_0x25a29b(0xd3,0x93,0x1,0x55)][_0x25a29b(0x93,0x65,-0x6e,0x1)];const _0x5c212e=[];if(_0xf1c265[_0x25a29b(0xa8,0x30,0x10e,0x55)][_0x3ae30f(0x16b,0x18d,0x14a,0x136)])_0x5c212e[_0x25a29b(0x5f,0x10e,0x96,0x88)](_0x3ae30f(0x21f,0x1a6,0x203,0x1e5)+_0xf1c265[_0x25a29b(-0x24,0x61,0x89,0x55)][_0x3ae30f(0x149,0x18d,0x18e,0x23c)]);if(_0xf1c265[_0x25a29b(-0x3f,0xbf,-0x1d,0x55)][_0x3ae30f(0x159,0x16f,0x1e6,0x209)])_0x5c212e[_0x25a29b(0xa7,-0x2,-0x10,0x88)](_0x3ae30f(0x1d2,0x21b,0x1b3,0x2c6)+_0xf1c265[_0x25a29b(0x1,0x35,0x50,0x55)][_0x3ae30f(0x1cf,0x16f,0x206,0x138)]);if(_0xaec81e[_0x3ae30f(0x26a,0x1dd,0x249,0x1fb)](_0x5c212e[_0x3ae30f(0x1aa,0x1a9,0x188,0xea)],0x2f2+-0xcc*-0xc+-0xc82)){if(_0xaec81e['YapPF'](_0xaec81e[_0x3ae30f(0x288,0x2d7,0x2fe,0x361)],_0xaec81e['RNNsJ']))_0x374388+='\x20('+_0x5c212e[_0x25a29b(0x4e,0x129,0x66,0x8f)](',\x20')+')';else{_0x44c815=_0x292444+('/chat/comp'+_0x25a29b(-0xb4,-0x138,-0x135,-0x91));const _0x1e5134={};_0x1e5134['Content-Ty'+'pe']=_0xaec81e[_0x3ae30f(0x33f,0x2bf,0x22e,0x2d8)],_0x1e5134[_0x3ae30f(0x16c,0x190,0x15e,0x16d)+_0x25a29b(-0x69,0x22,0xae,0x2c)]=_0x25a29b(-0x32,0x2b,0xde,0x5d)+_0x1293b8,_0x30b14b=_0x1e5134,_0x6a935e={'model':_0x3e6992,'messages':_0x3d25ea,'temperature':_0x37a351,'top_p':_0x5daccc,'max_tokens':_0x136f0d,'stream':_0xaec81e['EvftQ'](_0x4bcc46,![])};}}}else _0xaec81e[_0x3ae30f(0x2a9,0x25a,0x26b,0x1ba)](_0xaec81e[_0x3ae30f(0x28f,0x2d0,0x2cc,0x35d)],_0xaec81e['ZWWwl'])?_0x374388=''+JSON[_0x3ae30f(0x2cd,0x24f,0x29b,0x1fa)](_0xf1c265[_0x3ae30f(0x216,0x26b,0x23e,0x257)]):_0xaec81e[_0x25a29b(-0x41,0x5f,0xa9,0x21)](_0x56b1b8,_0x3d0256);throw new Error(_0x374388);}if(!_0x4e8ff0['ok']){if(_0xaec81e[_0x25a29b(0xb9,0x3d,0x45,0x17)]('zSKTq',_0xaec81e['tjxjZ']))throw new Error('请求失败:\x20'+_0x4e8ff0[_0x25a29b(-0x44,-0x4c,-0x75,0xd)]+'\x20'+_0x4e8ff0[_0x25a29b(-0x33,0xe3,0xb6,0x54)]);else{const _0xad116a=_0x37a3c2[_0x3ae30f(0x2d1,0x248,0x275,0x271)]?.[_0x3ae30f(0x1d9,0x24c,0x195,0x20f)]||'';if(_0xad116a[_0x25a29b(0xa7,-0x3f,-0x12,0x47)](_0xaec81e[_0x25a29b(-0x63,-0x117,0x1b,-0xa1)])){const _0x5e7b78=_0xad116a[_0x3ae30f(0xed,0x16e,0x1ea,0xef)](/^data:([^;]+);/),_0x2a935e=_0x5e7b78?_0x5e7b78[-0x1*0x354+-0x3*0x14b+0x736]:_0x25a29b(0xf2,0x8,0x42,0x5e),_0x6682f=_0xad116a[_0x3ae30f(0x27f,0x1f2,0x1a0,0x249)](',')[-0x3+-0x1958+0x195c]||'',_0x5dbba5=_0x4581ea[_0x3ae30f(0x29b,0x23f,0x2c6,0x1fb)](_0xaec81e[_0x25a29b(0x110,0x77,0xe5,0xb7)](_0xaec81e[_0x3ae30f(0x21c,0x265,0x1a8,0x22a)](_0x6682f[_0x3ae30f(0x184,0x1a9,0x21c,0x256)],-0x21b*-0xb+-0x4a3*0x1+0x7*-0x2a5),-0xa18+-0x472*-0x2+0x1a*0xc)/(0xd03+0x1032+-0x1935));_0x1ade4d['push']('📷\x20[用户上传的图片'+':\x20'+_0x2a935e+_0x3ae30f(0x2d4,0x2a1,0x2c8,0x2a0)+_0x5dbba5+_0x25a29b(0xa7,0xb5,0xc1,-0x1));}else _0x422eb2[_0x3ae30f(0x227,0x29e,0x331,0x306)](_0x3ae30f(0x294,0x2e1,0x285,0x2a2)+_0xad116a+']');}}const _0x2a1713=_0xf1c265[_0x3ae30f(0x258,0x2df,0x2ca,0x272)]?.[-0x397*0x7+0x23a0+-0xa7f*0x1]?.[_0x25a29b(-0x22,-0x1b,0x53,0x1)]?.[_0x3ae30f(0x1e9,0x252,0x208,0x2ee)]||'';!_0x2a1713&&toastr[_0x25a29b(-0x2d,-0x96,0xc1,0x27)](_0xaec81e['nUcKE']);_0x168e38&&_0xaec81e[_0x3ae30f(0x276,0x291,0x310,0x23d)](_0x168e38,_0x2a1713);_0xaec81e[_0x3ae30f(0x246,0x2d3,0x2f3,0x2e6)](addLog,_0x25a29b(0x87,0xc7,0x76,0x38)+'\x20回复\x20-----'),_0xaec81e[_0x25a29b(0xb5,-0x3a,0x0,0x7b)](addLog,_0x2a1713),_0xaec81e[_0x25a29b(-0x35,0x15,0x5f,-0x4f)](addLog,_0x3ae30f(0x2ae,0x289,0x1e9,0x255)+_0x25a29b(0x71,0xb6,0xb5,0x41)),taskQueue['completeTa'+'sk'](_0x218560,!![]),llmTaskControllers[_0x3ae30f(0x32f,0x28d,0x1da,0x23a)](_0x218560);const _0x55a6fa={};_0x55a6fa[_0x3ae30f(0x2ac,0x2ca,0x37c,0x300)]=!![],_0x55a6fa[_0x25a29b(0x99,-0x2,0x132,0x7c)]=_0x2a1713,_0x55a6fa['id']=_0x2d0a9a,eventSource[_0x25a29b(0xbc,0xf6,0xd8,0xa4)](eventNames[_0x25a29b(0x34,0xdd,0xd5,0x1f)+'E_RESPONSE'],_0x55a6fa);}catch(_0x89c9da){if(_0xaec81e[_0x25a29b(-0x61,-0x50,-0x53,0x33)]!==_0xaec81e[_0x25a29b(0xcd,0x3d,0xd6,0x33)]){const {id:_0x2021ee}=_0x26bd72;if(!_0x2021ee)return;const _0x2ae01d=_0x3abecc[_0x36eccc]||_0x17fcf7;_0x376d9f['log']('st-chatu8:'+_0x3ae30f(0x24b,0x287,0x231,0x212)+_0x2ae01d+(_0x25a29b(0x6,-0xa4,-0x110,-0xa5)+'D:\x20')+_0x2021ee+')');const _0x480b57=_0x39fbf6(_0x41e76a),_0x56900f={};_0x56900f[_0x25a29b(0x4f,0x7f,0x68,0x3e)]=_0x480b57,_0x56900f['id']=_0x2021ee,_0x3a44b5['emit'](_0x4352db,_0x56900f);}else{if(_0xaec81e['bqvKL'](_0x89c9da[_0x3ae30f(0x262,0x1a3,0x1e0,0x1fb)],_0xaec81e[_0x25a29b(-0x20,0x9d,0x57,-0x23)])){_0x33075e=!![],console[_0x3ae30f(0x264,0x205,0x29c,0x182)](_0xaec81e['AoHrN']),taskQueue[_0x25a29b(-0x65,-0xf,-0x44,0x3b)+'us'](_0x218560,TaskStatus[_0x3ae30f(0x368,0x2d9,0x232,0x2bd)]),llmTaskControllers['delete'](_0x218560);const _0x2c3c78={};_0x2c3c78[_0x3ae30f(0x1e2,0x1a3,0x105,0x257)]=_0xaec81e[_0x3ae30f(0x1a8,0x1f3,0x2ac,0x1c7)],_0x2c3c78[_0x25a29b(0x3f,0x21,-0xa2,0x1)]=_0xaec81e[_0x3ae30f(0x280,0x2b8,0x35d,0x214)];const _0x3b65ce={};_0x3b65ce[_0x25a29b(0x6d,0x9e,0x14d,0xb4)]=![],_0x3b65ce[_0x25a29b(0xa,-0x26,0x8d,0x7c)]=null,_0x3b65ce['id']=_0x2d0a9a,_0x3b65ce[_0x3ae30f(0x1f7,0x26b,0x20e,0x290)]=_0x2c3c78,eventSource[_0x25a29b(0x6c,-0x10,0x10,0xa4)](eventNames[_0x25a29b(0x3e,-0x2a,0x46,0x1f)+_0x25a29b(-0xd3,-0xe,-0xe8,-0x9a)],_0x3b65ce);return;}console['error'](_0xaec81e[_0x25a29b(0x7a,0x35,0x7d,0x83)],_0x89c9da);const _0x53d1f4='请求错误:\x20'+_0x89c9da[_0x3ae30f(0x2c4,0x217,0x158,0x2bc)];_0x168e38&&_0xaec81e[_0x25a29b(0x3d,0x30,-0xae,0x11)](_0x168e38,_0x53d1f4);toastr[_0x3ae30f(0x22e,0x26b,0x2cc,0x21e)](_0x89c9da[_0x3ae30f(0x25c,0x217,0x2d0,0x1df)]),taskQueue[_0x3ae30f(0x159,0x216,0x250,0x1a7)+'sk'](_0x218560,![]),llmTaskControllers['delete'](_0x218560);const _0x5c5144={};_0x5c5144['success']=![],_0x5c5144[_0x3ae30f(0x25e,0x292,0x22c,0x296)]=_0x53d1f4,_0x5c5144['id']=_0x2d0a9a,eventSource[_0x25a29b(0xd8,0xc,0x73,0xa4)](eventNames[_0x25a29b(-0xa3,0xb6,0x73,0x1f)+_0x3ae30f(0x1bf,0x17c,0x23a,0x11b)],_0x5c5144);}}finally{currentLLMRequestController===_0x47dabc&&(currentLLMRequestController=null),(!_0x33075e||currentLLMRequestController===null)&&_0xaec81e[_0x25a29b(0x50,-0xc8,-0x92,-0x1e)](stopFabLoading);}}export function createGetPromptHandler(_0x54f390,_0x24cc7c){const _0x51f1d0={'rZGzx':function(_0x411a2f,_0x50c2e8){return _0x411a2f(_0x50c2e8);}};return function(_0x12ed8f){const {id:_0x474b0e}=_0x12ed8f;if(!_0x474b0e)return;const _0xe3259b=REQUEST_TYPE_NAMES[_0x54f390]||_0x54f390;function _0x37e2b8(_0x4bb986,_0xd93f63,_0x2b5dc8,_0x19c097){return _0x342e(_0x19c097- -0xa3,_0xd93f63);}console['log'](_0x37e2b8(0x30,0x3,-0x34,0x82)+_0x37e2b8(0xdc,0xb7,0x50,0xef)+_0xe3259b+(_0x218e37(0x445,0x47e,0x3d5,0x412)+_0x218e37(0x495,0x412,0x463,0x3e8))+_0x474b0e+')');const _0x10fc5e=_0x51f1d0[_0x37e2b8(0x118,0xb8,0x66,0xbb)](buildPromptForRequestType,_0x54f390);function _0x218e37(_0x51a6d1,_0x3bf22a,_0x3b0b34,_0x576fde){return _0x342e(_0x3b0b34-0x359,_0x51a6d1);}const _0x589081={};_0x589081[_0x37e2b8(0xfc,0x6e,0x10e,0xbc)]=_0x10fc5e,_0x589081['id']=_0x474b0e,eventSource[_0x37e2b8(0x1b5,0x1cb,0x104,0x122)](_0x24cc7c,_0x589081);};}export function createExecuteHandler(_0x45c11b,_0x6a42b,_0x2ea34b=null){const _0x29f447={'RAtgq':function(_0x222e7b,_0xfc42d5){return _0x222e7b===_0xfc42d5;},'FfHPt':_0x249415(-0x143,-0x185,-0x173,-0x1ff)+'4','dISLF':_0x34087a(0x3c,-0x3,-0x55,-0x5f),'lCiAo':'LLM\x20execut'+_0x249415(-0x13e,-0x1a1,-0xf7,-0x1fb)+_0x249415(-0x157,-0xab,-0x14c,-0xa0),'UhldX':_0x34087a(-0x106,-0x232,-0x193,-0x252)+_0x34087a(-0x195,-0xf8,-0x19d,-0x177),'VaZhN':function(_0x184d94,_0x33c9cc){return _0x184d94(_0x33c9cc);},'ZvtAR':function(_0x3220b2,_0x4ac5de){return _0x3220b2!==_0x4ac5de;},'OGPxK':function(_0x4398ef){return _0x4398ef();},'vHiRv':function(_0x163ee9,_0x4fe71c,_0x1e59df,_0x5bd07e,_0xb38ca7){return _0x163ee9(_0x4fe71c,_0x1e59df,_0x5bd07e,_0xb38ca7);}};function _0x34087a(_0x4b365a,_0x11b2c,_0x25d8f9,_0x307fc9){return _0x527796(_0x4b365a,_0x11b2c-0x93,_0x25d8f9-0xa3,_0x25d8f9- -0x4dc);}function _0x249415(_0x245199,_0x5ca4a7,_0x5bf384,_0x327d38){return _0x384c88(_0x245199-0x4e,_0x327d38,_0x245199- -0x268,_0x327d38-0x180);}return async function(_0x56544b){function _0x2f0b61(_0x18a1f7,_0x189ee6,_0x18f1e6,_0x218e75){return _0x34087a(_0x18a1f7,_0x189ee6-0x88,_0x218e75-0x2fa,_0x218e75-0x109);}function _0x4fd532(_0x53579f,_0x49d56b,_0x95a210,_0x10d77d){return _0x249415(_0x95a210-0x20f,_0x49d56b-0x17c,_0x95a210-0x167,_0x53579f);}if(_0x29f447[_0x2f0b61(0x2bf,0x297,0x2ee,0x26a)]('uzUny','uzUny')){if(_0x29f447[_0x2f0b61(0x237,0x17e,0x14a,0x1fd)](_0x444a31['name'],_0x2f0b61(0x25c,0x315,0x2f1,0x2a5))){const _0x23b588=_0x29f447[_0x4fd532(0x221,0x149,0x164,0x155)][_0x2f0b61(0x20f,0x242,0x1fc,0x1b5)]('|');let _0x40d673=0x2114+-0x18d2+-0x2*0x421;while(!![]){switch(_0x23b588[_0x40d673++]){case'0':_0x59b92f[_0x4fd532(0x166,0x14b,0x1c1,0x1e8)](_0x4cfa83);continue;case'1':_0x57d38f=!![];continue;case'2':const _0x4e084f={};_0x4e084f['name']=_0x29f447[_0x2f0b61(0x193,0x219,0x1fb,0x159)],_0x4e084f[_0x4fd532(0x20d,0x1ab,0x14b,0x13b)]=_0x2f0b61(0x23e,0x146,0x1bb,0x194)+_0x4fd532(0xde,0x161,0x103,0xb1);const _0x3122fb={};_0x3122fb['success']=![],_0x3122fb[_0x4fd532(0x16c,0x1dc,0x1c6,0x12d)]=null,_0x3122fb['id']=_0x1a0018,_0x3122fb[_0x4fd532(0x12b,0x232,0x19f,0x112)]=_0x4e084f,_0x1f6f22[_0x2f0b61(0x33e,0x24a,0x1e3,0x27d)](_0x18ee44[_0x2f0b61(0x22c,0x224,0x297,0x1f8)+_0x4fd532(-0x11,0x10c,0xb0,0x149)],_0x3122fb);continue;case'3':_0x144ffe[_0x4fd532(0x151,0x82,0x139,0x14a)](_0x29f447[_0x4fd532(0x2f,0x82,0xeb,0x14a)]);continue;case'4':return;case'5':_0x12b41a['updateStat'+'us'](_0x21c88b,_0x3daf5a[_0x2f0b61(0x285,0x2e5,0x219,0x29c)]);continue;}break;}}_0x37af34[_0x2f0b61(0x2ca,0x25f,0x16c,0x22e)](_0x29f447[_0x2f0b61(0x1f9,0x236,0x12c,0x1ac)],_0xa9a575);const _0x3945c6=_0x2f0b61(0x1fa,0xe7,0x1c8,0x16f)+_0x518bf1['message'];_0x1f64ed&&_0x29f447[_0x4fd532(0x106,0xe0,0xe7,0x118)](_0x5599b6,_0x3945c6);_0xc2cbf0[_0x4fd532(0x236,0x123,0x19f,0x24f)](_0x3d0426['message']),_0x28247e[_0x2f0b61(0x1dc,0x1c8,0x193,0x1d9)+'sk'](_0x3640dd,![]),_0x15848e['delete'](_0x397865);const _0x64d2e8={};_0x64d2e8['success']=![],_0x64d2e8[_0x4fd532(0x1ee,0x1dd,0x1c6,0x285)]=_0x3945c6,_0x64d2e8['id']=_0xbc41af,_0x4eac41['emit'](_0x20e96d[_0x4fd532(0x1dc,0x1cb,0x169,0x1d6)+'E_RESPONSE'],_0x64d2e8);}else{const _0xdc3d5f=_0x2ea34b?_0x29f447[_0x4fd532(0x1c4,0x1dd,0x122,0x198)](_0x2ea34b):null;await _0x29f447['vHiRv'](executeTypedLLMRequest,_0x56544b,_0x45c11b,_0x6a42b,_0xdc3d5f);}};}