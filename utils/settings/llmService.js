(function(_0x5c888c,_0x45a85f){function _0x34224c(_0x30df52,_0x4e765f,_0x640833,_0x2ab029){return _0x7cd0(_0x4e765f-0x161,_0x640833);}function _0x3fedd8(_0x4f40b9,_0x831b0c,_0x342667,_0x37619a){return _0x7cd0(_0x831b0c-0x38a,_0x342667);}const _0x3ecd04=_0x5c888c();while(!![]){try{const _0x4b960a=-parseInt(_0x3fedd8(0x65c,0x607,0x5b7,0x67e))/(0x4d*0x3+0x2427+-0x250d)*(parseInt(_0x34224c(0x313,0x3cb,0x386,0x37c))/(0x70*0x52+-0x71e+-0x1cc0))+parseInt(_0x34224c(0x3ea,0x34b,0x405,0x2e8))/(-0x1d88+-0x12bb+0xa7*0x4a)+parseInt(_0x34224c(0x392,0x329,0x2b4,0x292))/(-0x6f1+-0xde5+0x14da)+parseInt(_0x34224c(0x373,0x317,0x2e7,0x25d))/(-0x191*0x6+0x157e*0x1+0xc13*-0x1)*(parseInt(_0x34224c(0x39c,0x41c,0x43c,0x4c1))/(0xd31+0xbd6*0x1+-0x1901))+parseInt(_0x34224c(0x347,0x3d4,0x358,0x444))/(0xf0b+-0x1d57+0xe53)+-parseInt(_0x3fedd8(0x4aa,0x554,0x5f5,0x589))/(0x1072*0x2+-0x6bb*-0x5+-0x1*0x4283)*(parseInt(_0x3fedd8(0x5c3,0x67a,0x67a,0x6a5))/(0x5*0x4d5+0x250d+-0x1*0x3d2d))+parseInt(_0x3fedd8(0x71c,0x666,0x694,0x699))/(0x327+0x1a0f*0x1+0x1*-0x1d2c);if(_0x4b960a===_0x45a85f)break;else _0x3ecd04['push'](_0x3ecd04['shift']());}catch(_0x153a92){_0x3ecd04['push'](_0x3ecd04['shift']());}}}(_0x246e,0x120296+0x9a46d+-0x37da*0x46));const _0x5ba85d=(function(){const _0x29d164={};_0x29d164['xtILy']=function(_0x3cc703,_0xf1c7f6){return _0x3cc703===_0xf1c7f6;};function _0x10e457(_0x12c827,_0x31a5ae,_0x5ddd07,_0x5515d5){return _0x7cd0(_0x5515d5-0x223,_0x31a5ae);}_0x29d164[_0x10e457(0x455,0x3db,0x4bc,0x403)]='cHjXR';const _0x268198=_0x29d164;let _0x220044=!![];return function(_0x4ef00a,_0x3da0b5){const _0x33e9af={'rXJau':function(_0x63d950,_0x22f7be){return _0x63d950(_0x22f7be);}};function _0x5d6898(_0x5619c3,_0x231118,_0x474f80,_0x5b095f){return _0x10e457(_0x5619c3-0x182,_0x231118,_0x474f80-0x132,_0x5619c3-0x7c);}function _0x47bf1b(_0x326511,_0x1fa545,_0x514d13,_0x5697de){return _0x10e457(_0x326511-0x46,_0x1fa545,_0x514d13-0x6d,_0x5697de-0x84);}if(_0x268198[_0x47bf1b(0x469,0x463,0x49c,0x4c3)](_0x268198[_0x47bf1b(0x52e,0x4ec,0x486,0x487)],_0x47bf1b(0x50c,0x461,0x40f,0x463))){const _0x3f535a=_0x220044?function(){if(_0x3da0b5){const _0x2d125e=_0x3da0b5['apply'](_0x4ef00a,arguments);return _0x3da0b5=null,_0x2d125e;}}:function(){};return _0x220044=![],_0x3f535a;}else _0x381a9b+=_0x3d38fd,_0x2aa74f&&_0x33e9af[_0x47bf1b(0x4e8,0x43b,0x4f8,0x4a0)](_0x57d51d,_0x76bd60);};}()),_0x56674c=_0x5ba85d(this,function(){const _0x1e43d8={};function _0x293046(_0x117279,_0x11a3fd,_0x49f2e2,_0x3312f6){return _0x7cd0(_0x3312f6-0x344,_0x49f2e2);}function _0x30a5f3(_0x5d20b9,_0x365f69,_0x135e87,_0x5f2df5){return _0x7cd0(_0x365f69- -0x22a,_0x5f2df5);}_0x1e43d8[_0x30a5f3(0x53,0x1a,0x39,-0x14)]=_0x293046(0x503,0x55e,0x4c2,0x515)+'+$';const _0x180fdd=_0x1e43d8;return _0x56674c['toString']()[_0x30a5f3(0x77,0x12,0x93,-0x78)](_0x180fdd['FWeZJ'])[_0x293046(0x577,0x66a,0x62c,0x5dc)]()['constructo'+'r'](_0x56674c)[_0x30a5f3(-0xa0,0x12,-0x7e,0x8)](_0x180fdd['FWeZJ']);});_0x56674c();function _0x246e(){const _0x2b3b68=['Dw5RBM93BG','svLkC1K','ywjVCNq','r05YCva','A09OvMy','EgDdqu8','DvfLtMe','Ew9OrwW','ywrKvgfZAW','Df90ExbLx2nVBG','twTWtxm','vgfN5l+U5Ps5','lcdNUQyG','D2jcEhK','BMrZl2nOyxqTyW','wwDAD1O','ANnVBG','ioAuTUwiSa','DxnLCG','DuXhu04','quzOD3y','B0ndqxC','DgvZDf9JB250zq','C3rYAw5NAwz5','y2HHCL9KzxnPzW','C2vHCMnO','uvruExa','q3P4wKW','tufZzu4','C3rFy29UDgv4Da','ren6tMK','C2HtsKm','CMvWBgfJzq','rLDLwKO','teXnoIa','y2fUy2vSx2XSBq','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','DKTHvKe','DgfNx21VzgLMEq','C3rHDhvZ','5yE95PwW6lcd55sO','vffKD0S','Aurcv3K','CMvZDwX0','vvvwEuO','teXnioIVT+AXGUI/LowBNUs4UUEPUG','y3vZDg9T','tePhq1i','CMvHza','teXn','57g75z6loIa','s09ttuS','Avrgufa','ANbLAfi','EvHttM4','C2vju0q','l2DLBMvYyxrL','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','5y+r6ycb55QeifbYB21WDa','vMnlAeG','tMDlwfu','BLjuDK8','rwT1rMu','5Q2J5zYO5Ase55cgia','Dgv4Da','77Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ5PAT44cb','rw1UyNu','DhjPBq','s0jD','quNLIQNMIyS','6k+35Rgc6zsz6k+VoIa','mtyYmZHZqvjmueu','BwvZC2fNzq','CLnruNO','BgDIs1C','C0TNAMm','veTAALu','Bgv0Aw9UCW','t1LVs3C','5PAT44cbBwf4x3rVA2u','ntaZnte0mMHmz09Iua','C3HizxK','zM9YrwfJAa','oIbmte0G6k+35Rgc6l+u5zUE','zxiG','BhfTyM8','Aw9U','A0L2vMi','w0Xmtv0G5lU75yQH5BEY5y+w','rhDXy04','mtuWt3bjv3PP','tufhCLu','y3vZDg9Tx2LUyW','DwPgzvK','CM9Szq','sLvKBei','reHTzwO','sw14tgq','qvbjioI/NUAoPEMxRUMIMooaGG','DhjPz2DLCG','BNnVqKS','C3rYzwfT','DxrMltG','y2HVAwnLCW','Bur6ExK','vvjrBuG','zujot0y','6k+35Rgc5AsX6lsLoIa','DxjS','ksa9pt09pq','C3DYCfG','yxbWBhK','A2PvEhC','DwXUDxq','B2HPyxe','y29UDgv4Df9WCG','t0DTq0y','Dg9tDhjPBMC','q21RyNm','z3bLvem','r2jMufm','ENzPBu4','57o757UF5O+q56s66k+n','qwjVCNrfCNjVCG','zML2swG','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','v210z0y','DKD6DKK','8j+tTYbB5zU+54Mh6zo+5O6LoIa','6k+35Rgc5A6m5OIqid09pt09','yNPcCeC','iowBNUwKJsaTls0Tlq','CvHdyu4','DgvTCgvYyxr1CG','y29Kzq','6k+35RgcieLeoIa','DhjPz2DLCLDVCG','iefqssblzxKSia','zgvJB2rL','zsbYzxf1zxn0ia','y2HHDf9JB21WBa','z3Dgu0q','z2v0','vuvNv08','wMTjz1K','zgf0ytO','C3rHCNrZv2L0Aa','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','BgXTx3jLCxvLCW','v0nQtg4','5lUJ56cboIa','Aw5MBW','nZjgt1nwDKi','AgLZDg9YEq','uxjLz0u','zxDPuu4','BeDMq08','zw50CMLLCW','shDvvuO','teXnoIdLPjBPG6JOR7FMSyi','Cg9W','ievYCM9YoG','CMvWzwf0','EhrisxO','oIbbueKGvvjmla','vLbLvvy','zeD6BwC','zef5rKO','C2LNBMfS','vvvnDwi','Bwf4x3rVA2vUCW','ue9tva','ENnyzhu','y29UDgvUDa','B1zVuum','r0zWALq','B21WBgv0Aw9UCW','uhDKB0S','A2v5CW','A2vMEwC','z1DeExi','5OIwie1VzgvSioACQUMfJq','Dg9VBa','pt09pt0GteXnia','y29UDgv4Da','nJCYndKWAufnDw5r','B3j0zwq','BNr2y2q','v3LpwLu','Bwf0y2G','y29TCgXLDgvuyq','Bg9N','C2v0','EhrFChjVzMLSzq','rM1htei','zhfVugW','Bw9KzwW','qvzVDNq','zgfAswK','l2nOyxqVy29TCa','veTSuNy','zxfmAxi','C3bSAxq','y3vYCMvUDf90zq','DK5frhy','mJyXowDbBuTisq','DhjHBNnSyxrPBW','B0HzCKy','CNr5Dg4','5Q2J5PAh5zU+54Mh55sF5OIq','EhDlsMq','DhjPz2DLCK1Vza','ssdOV57MJQxPL67POPJJGii','rhDYCLm','ELDSzhi','y0HAugq','5lUJ56cboG','yMjNtNa','ChvZAa','z2v0uMvHzgvY','DhLWzq','uMvXDwvZDcbHyG','Aw9UoIaIqMvHCG','6k+35Rgc5BYa5AElicG','zgf0ytOG','l2fWAs9IywnRzq','D0Lptxi','y2HHCL9KAxnWBa','EM5tEgy','q1vjAvO','BNPPq3e','DxbKyxrLu3rHDa','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','6kEs6iMYl+ACJEIJHEIUVUIUOq','C3qTy2HHDhu4oG','Aw1Hz2vFz2vU','5AEl5PAW6k+35Rgc44cc','DKniENG','D2fYBG','teXnx0vyrunvva','tvvwvKG','yxnZAxn0yw50','yxbPx3vYBa','l3yXlW','AMjuy2K','AhrTEKq','57g75z6loG','B2jQzwn0','CfbMvKy','uLvotKLorW','zgvSzxrL','BwvZC2fNzxm','yxbPx2TLEq','u3vkwuu','tuTvrxq','wMXptgS','zxrPB25FC291CG','zuHdvNO','zgf0ytOGw0rptG','zw1PDa','tLHpAe8','teXniev4zwn1Da','56In5yczlI4U','B2zPBgu','mJq1nJK1CKXnyNfK','teXnioIVT+AXGUw3SUs4REATOUoaGG','CMTPvgq','yKTkr24','u0Xyvuy','Aw1Hz2vFDxjS','y0HQwfi','zKrdEeG','Bg1yEKS','rfbxtvC','v01tsLq','ywTnsMK','C3rHDhvZvgv4Da','Ag9fBNu','zxjYB3i','rv9srvnqt05trq','tw9lCxa','uuHXsvC','mte5oty5mMDksvjXBq','DuDNt1e','mJe4mZjcwe96vg8','C3vJy2vZCW','BI9QC29U','sgHcvxa','Egvdz3C','sfbVtwm','q2XHAuu','kcGOlISPkYKRkq','vKP3Eue','yNvMzMvYktO','zMLNCW','DfHLzvK','zsbfCNjVCJO','ioIUVUE9RUI/H+wWJ+oaGEAiLIbbua','yxbWBgLJyxrPBW','tLbHvwK','AxnbCNjHEq','l3yX','z2veB0e','CfPNrvK','ywjVCNrLzc4','C0f1D0q','s2vWDgG','uKP4rxq','wvbTuKm','rdOG','u1HWsLi','BMfTzq','rfHYD0m','wKDcBxq','DMnrtLe','s1Phuu4','mZq0mtyZmhHuBxDnsq','wLjAsM8','BgXTx3bYB2zPBa','q0foq0vmteve','q29UDgvUDc1uEq','y3vYCMvUDf9SBa','BM5YDfa','EgvNqMW','qxv0Ag9YAxPHDa','CM91BMq','Dg9Rzw4','cI0Tls0TieXmtq','qK5pu2C','5lI656M677Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ','qMvHCMvYia','CLHkyxu','DuLuB1m','BhvKzv9OzwfKzq','Aw5JBhvKzxm','AM9PBG','BujHte8','Cunptu4','CgfYC2u','teXnigv4zwn1Da','BuHhz1G','yLHnvhG','Bw93Du4','yNLNqu0','BgvUz3rO','ChjVBxb0','Dg9Wx3a','D2fYBMLUzW','C3rFy2HHDhu4xW','B1P6whO','z0T0q3a','Cvnmrwu','x3rHC2S','BNmG6k6+572U6l+h5Bcp44cb5OIwia','zxjPwK8','B3nur0y','zw5KC1DPDgG','sfPyBg4','CKfyCwG','yNPzCgm','C2XPy2u','5O+q56s66k+n6i635y+w6k+35RgcicHj','tKrqqMG','5RAioIa','EKLRA08','B2jHqwO','EhrjthK','z0vPvge','zgvSDge','y3vZDg9Tx3vYBa','zxrkq2q','qvLMrKG','ruTqs3a'];_0x246e=function(){return _0x2b3b68;};return _0x246e();}import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on'](_0x5a25ee(0x1e6,0x19e,0x204,0x1f4)+_0x3e315b(-0x28,0x54,-0x60,-0x84)+_0x3e315b(-0x60,0x5a,-0x15,-0x2e),({taskId:_0x5a1d7d})=>{const _0x255c51=llmTaskControllers[_0xb5a95(-0x18b,-0x14d,-0xd5,-0x119)](_0x5a1d7d);function _0xb5a95(_0x300aa3,_0x2b8b48,_0x41aa25,_0x5f3f14){return _0x5a25ee(_0x41aa25- -0x362,_0x2b8b48-0x158,_0x5f3f14,_0x5f3f14-0x6d);}function _0x326c22(_0x38af21,_0x3034ec,_0x3cdbd8,_0x13f773){return _0x5a25ee(_0x38af21- -0x74,_0x3034ec-0x1e5,_0x3034ec,_0x13f773-0x1d3);}_0x255c51&&(_0x255c51[_0x326c22(0x18d,0x148,0x119,0x22c)](),llmTaskControllers[_0x326c22(0x110,0x154,0xec,0x1a9)](_0x5a1d7d),console[_0xb5a95(-0x126,-0xd2,-0xa4,-0x1a)](_0x326c22(0x1e3,0x19e,0x138,0x239)+_0xb5a95(-0x13c,-0x172,-0x16d,-0xbf)+_0x5a1d7d));});export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0xc29074){currentLLMRequestController=_0xc29074;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){const _0x265607={};function _0x12d7bb(_0x7a56eb,_0x48fcf3,_0x3f258f,_0x3f1c9c){return _0x5a25ee(_0x7a56eb- -0x1e5,_0x48fcf3-0x1e4,_0x3f258f,_0x3f1c9c-0x3c);}_0x265607['bCKmz']=_0x12d7bb(-0x52,-0x8a,-0x59,-0x93);function _0x3c375a(_0x5bff50,_0x2c61fd,_0x3719be,_0x16a76e){return _0x5a25ee(_0x3719be-0x1fa,_0x2c61fd-0x13,_0x16a76e,_0x16a76e-0x14b);}const _0x4e4f36=_0x265607;currentLLMRequestController&&(currentLLMRequestController[_0x12d7bb(0x1c,0x87,0x64,-0x15)](),toastr['info'](_0x4e4f36['bCKmz']));}export function formatPromptForDisplay(_0x90f4d7){const _0x17293c={'HKPHQ':_0x441bdb(0x304,0x3ae,0x352,0x37f),'gaArs':_0x3a692c(0xef,0x97,0x40,0x8b),'htmzD':function(_0x14f154,_0x2af38f){return _0x14f154===_0x2af38f;},'MoKqp':'image_url','ImxLd':_0x441bdb(0x32b,0x327,0x388,0x362),'RXjsl':_0x3a692c(0x53,0xd6,0x91,-0x17),'xegBl':'unknown','uLGSN':function(_0x2f9240,_0x4a135){return _0x2f9240/_0x4a135;},'uIToS':function(_0x21dfb4,_0xa07ec2){return _0x21dfb4*_0xa07ec2;},'zvimN':_0x3a692c(-0x21,-0x4c,0x63,0x48),'qSLEe':'user','eHCVz':function(_0xdb720d,_0x13f12b){return _0xdb720d(_0x13f12b);},'URQmH':function(_0x587e73,_0x2a26db){return _0x587e73(_0x2a26db);},'uGgOQ':'string','YDeKc':_0x3a692c(0x3,-0x29,0x7e,0x38),'QregE':function(_0x20c128,_0x391d48){return _0x20c128!==_0x391d48;},'seISD':_0x441bdb(0x205,0x281,0x2b7,0x224),'zIkkO':'FqAZN','Cmkbs':_0x441bdb(0x34b,0x33a,0x3b4,0x31f)+_0x441bdb(0x440,0x3a9,0x307,0x3fe),'apZed':'hrKoM','tDaMq':_0x441bdb(0x35e,0x2e2,0x28b,0x263),'kHVmJ':_0x441bdb(0x1ce,0x23f,0x1bd,0x1b2),'EKPKp':_0x3a692c(0x76,-0x25,0x1a,-0x67)};function _0x3a692c(_0x1a53dc,_0x27d870,_0x492975,_0xfa63e){return _0x3e315b(_0x492975-0x4b,_0xfa63e,_0x492975-0x13f,_0xfa63e-0xd);}if(typeof _0x90f4d7===_0x17293c['uGgOQ']){if(_0x17293c['apZed']===_0x17293c['tDaMq'])_0x18df52&&(_0x366889[_0x441bdb(0x23e,0x2bf,0x340,0x2a9)](),_0x1d9374[_0x441bdb(0x315,0x354,0x2ce,0x29c)](_0x441bdb(0x28a,0x251,0x281,0x246)));else return _0x90f4d7;}if(Array['isArray'](_0x90f4d7)){const _0x327bf2=[];return _0x90f4d7[_0x3a692c(0x39,-0x1e,0x52,0xb7)]((_0x3fbf0d,_0x161d33)=>{const _0x1555b3={'UUMub':function(_0x50a7e0,_0x2fffab){function _0x212221(_0xbc0c67,_0xff626c,_0x2c9df4,_0x52d147){return _0x7cd0(_0x52d147- -0xdf,_0xbc0c67);}return _0x17293c[_0x212221(0x153,0x155,0xa5,0xd0)](_0x50a7e0,_0x2fffab);}};function _0x5eb1b4(_0xde60e4,_0x2d31d1,_0x6a7f88,_0x40065c){return _0x3a692c(_0xde60e4-0x1bc,_0x2d31d1-0x1b5,_0x40065c- -0xd7,_0x2d31d1);}const _0x2cf3e8=_0x3fbf0d[_0xa3e3f2(0x60e,0x5dc,0x4f3,0x5ac)]||_0xa3e3f2(0x5a8,0x4ee,0x53b,0x54e),_0x1a1e6a=_0x17293c[_0x5eb1b4(0x33,-0x7b,0xd,-0x6e)](getRoleLabel,_0x2cf3e8);_0x327bf2['push'](''+'═'['repeat'](0x15+0x2182+-0x67*0x53));function _0xa3e3f2(_0x710004,_0x10165e,_0x42d947,_0x2401ca){return _0x441bdb(_0x710004,_0x2401ca-0x291,_0x42d947-0xf6,_0x2401ca-0x10a);}_0x327bf2[_0xa3e3f2(0x5ed,0x63e,0x624,0x628)]('【'+_0x1a1e6a+'】'),_0x327bf2[_0xa3e3f2(0x697,0x61b,0x643,0x628)](''+'─'[_0x5eb1b4(-0x39,0xb,-0xde,-0x35)](0x421*0x9+-0x3f5*-0x6+-0x3cb5));const _0x2e80e9=_0x3fbf0d[_0x5eb1b4(0x31,0x19,-0x5f,-0x2a)];if(typeof _0x2e80e9===_0x17293c[_0xa3e3f2(0x43c,0x589,0x4a0,0x4f4)])_0x17293c[_0xa3e3f2(0x51b,0x4e8,0x57f,0x4ce)](_0x17293c['YDeKc'],_0x5eb1b4(-0x6f,0x1,0x5e,-0x59))?_0x327bf2[_0xa3e3f2(0x5c9,0x6bb,0x5f9,0x628)](_0x2e80e9):_0x17ba3e=''+_0x15f7d5['stringify'](_0xcc35ea['error']);else{if(Array[_0xa3e3f2(0x451,0x5a7,0x44e,0x505)](_0x2e80e9)){if(_0x17293c[_0xa3e3f2(0x60e,0x68b,0x5e7,0x5e8)](_0x17293c[_0x5eb1b4(-0x34,0x14,-0xf5,-0xa0)],_0x17293c[_0x5eb1b4(-0x99,-0x84,-0x193,-0xe0)]))_0x2e80e9[_0xa3e3f2(0x60e,0x528,0x60f,0x5a0)](_0x5aab47=>{const _0xcc975f={};function _0x23d8d8(_0x107d45,_0x58f0a6,_0x3c2e46,_0x17ad13){return _0xa3e3f2(_0x58f0a6,_0x58f0a6-0x61,_0x3c2e46-0x36,_0x107d45- -0x5ad);}_0xcc975f[_0x217790(0x173,0x240,0x19c,0x131)]=function(_0x462fa5,_0x52671d){return _0x462fa5!==_0x52671d;};function _0x217790(_0xb6fc3a,_0x5938fb,_0x6c1619,_0x338a07){return _0x5eb1b4(_0xb6fc3a-0x1e1,_0x338a07,_0x6c1619-0x7,_0x6c1619-0x22a);}_0xcc975f['kefyg']=function(_0x552f60,_0x3a4c9f){return _0x552f60!==_0x3a4c9f;},_0xcc975f['kIvVb']=_0x17293c['HKPHQ'];const _0x2d3da6=_0xcc975f;if(_0x5aab47[_0x217790(0x2dc,0x24d,0x22f,0x267)]===_0x17293c['gaArs'])_0x17293c[_0x217790(0x12a,0x5d,0xd3,0xad)](_0x217790(0x83,0xae,0xfd,0x12a),_0x23d8d8(-0xb5,-0xca,-0x15d,-0x90))?_0x327bf2['push'](_0x5aab47[_0x217790(0x20b,0x118,0x193,0x193)]||''):_0x1555b3[_0x23d8d8(0x4a,-0x37,0x81,-0x38)](_0x225af6,_0x26bab4);else{if(_0x17293c[_0x23d8d8(-0xdf,-0x18e,-0x4b,-0x139)](_0x5aab47['type'],_0x17293c[_0x217790(0x124,0xe3,0xf6,0x8d)])){if(_0x23d8d8(-0x55,-0x18,-0x8c,-0xb2)===_0x17293c[_0x217790(0x185,0x20f,0x1b4,0x1e3)]){if(_0x38d98b['user']&&_0x2d3da6['rSQRz'](_0x26434c[_0x23d8d8(-0x4d,0x9,0xe,0x3c)][_0x217790(0x20e,0xf3,0x196,0x103)](),'')){const _0x32fbd4={};_0x32fbd4['role']=_0x217790(0xb7,0xac,0x165,0x153),_0x32fbd4['content']=_0x206cca[_0x217790(0x16c,0x158,0x165,0x1bf)],_0x5a72e9['push'](_0x32fbd4);}if(_0x55019f[_0x217790(0x225,0x2ea,0x244,0x280)]&&_0x2d3da6[_0x23d8d8(0x54,0x33,0x3f,-0x62)](_0x35e389['assistant'][_0x23d8d8(-0x1c,-0x72,0x74,-0x5f)](),'')){const _0x302e82={};_0x302e82['role']=_0x2d3da6[_0x217790(0x108,0x209,0x1aa,0x14c)],_0x302e82[_0x217790(0x247,0x1b8,0x200,0x169)]=_0x17be6f[_0x217790(0x2ea,0x1e8,0x244,0x1ad)],_0x3c54b9[_0x23d8d8(0x7b,0xdf,0xfe,0x11c)](_0x302e82);}}else{const _0x420504=_0x5aab47[_0x23d8d8(-0xc7,-0x50,-0x4c,-0x132)]?.['url']||'';if(_0x420504[_0x23d8d8(0x33,-0x73,0x7c,0x4a)](_0x17293c['RXjsl'])){const _0x2b1940=_0x420504[_0x217790(0x1ed,0x1e9,0x210,0x275)](/^data:([^;]+);/),_0x5add94=_0x2b1940?_0x2b1940[-0x2ba*-0x2+0x1d8f+-0x2*0x1181]:_0x17293c[_0x217790(0x157,0xf5,0x121,0x147)],_0x26f1ff=_0x420504['split'](',')[-0x277*-0x3+-0x1205*-0x1+-0x1969]||'',_0x1e4e00=Math['round'](_0x17293c[_0x23d8d8(-0x4c,0x18,-0x18,-0x9a)](_0x17293c[_0x217790(0x11c,0x1cd,0x166,0x130)](_0x17293c[_0x23d8d8(-0x88,-0xe8,-0x19,-0xa6)](_0x26f1ff['length'],-0x10da+-0x33*-0xa6+-0x1035),0x3*-0x89b+0x1*0xbe7+0xdee),-0xdb4+0x108d+0x127*0x1));_0x327bf2[_0x217790(0x251,0x2a1,0x22d,0x195)](_0x217790(0x17e,0xe5,0x18c,0x1fc)+':\x20'+_0x5add94+_0x23d8d8(-0x53,-0x101,-0xa,-0xfc)+_0x1e4e00+_0x23d8d8(-0x1b,-0xd6,0x73,-0xcb));}else _0x327bf2['push'](_0x217790(0x209,0x1d8,0x1d3,0x1bc)+_0x420504+']');}}}});else{const _0x232ded={'xRvZi':_0x17293c[_0xa3e3f2(0x62c,0x615,0x5c6,0x5c7)],'pPfVF':function(_0x452612,_0x507acf,_0x2c09c8){return _0x452612(_0x507acf,_0x2c09c8);},'vCHzx':_0x17293c[_0xa3e3f2(0x5a8,0x559,0x5e1,0x538)]};_0xee830a[_0xa3e3f2(0x681,0x602,0x5bb,0x5eb)][_0xa3e3f2(0x50f,0x644,0x624,0x5a0)](_0x35da21=>{if(!_0x35da21['enabled'])return;if(!_0x35da21[_0xd95c7d(0x303,0x37b,0x253,0x315)]||_0x35da21[_0xd95c7d(0x303,0x379,0x2ad,0x31e)]['trim']()==='')return;if(_0x35da21[_0x5ec250(-0x6a,-0x98,-0x19,-0xce)+'e']===_0x232ded['xRvZi']){if(!_0x10fbf7||!_0x232ded[_0x5ec250(-0x1d4,-0x270,-0x18e,-0x21e)](_0x38e86e,_0x35da21[_0x5ec250(-0x19b,-0x17b,-0x67,-0x119)+'ds'],_0x2aa57d))return;}const _0x5e10d8={};_0x5e10d8['role']=_0x35da21['role']||_0x232ded[_0x5ec250(-0x96,-0x90,-0x66,-0xb4)];function _0xd95c7d(_0x16f0bf,_0x3d6e63,_0x288997,_0x1d1797){return _0x5eb1b4(_0x16f0bf-0x1b1,_0x1d1797,_0x288997-0x1b2,_0x16f0bf-0x32d);}function _0x5ec250(_0x433ba0,_0x5aaefc,_0x50421b,_0x9f5e52){return _0xa3e3f2(_0x50421b,_0x5aaefc-0x1b1,_0x50421b-0x129,_0x9f5e52- -0x6ef);}_0x5e10d8['content']=_0x35da21[_0x5ec250(-0x64,-0x84,-0xf3,-0xf4)],_0x14e752[_0x5ec250(-0x27,-0x105,-0x72,-0xc7)](_0x5e10d8);});}}}_0x327bf2['push']('');}),_0x327bf2[_0x441bdb(0x301,0x297,0x328,0x345)]('\x0a');}if(typeof _0x90f4d7===_0x17293c['kHVmJ']&&_0x17293c['QregE'](_0x90f4d7,null)){if(_0x17293c[_0x3a692c(-0x1a,-0x19,-0x1,0x61)]===_0x17293c[_0x441bdb(0x246,0x2bc,0x2aa,0x279)])return JSON[_0x441bdb(0x267,0x2d4,0x353,0x2ca)](_0x90f4d7,null,-0x1502+-0x2090+0x3594);else _0x22f05d['abort'](),_0xc94400['info'](_0x17293c[_0x441bdb(0x2e2,0x333,0x29c,0x393)]);}function _0x441bdb(_0x2d5ade,_0x2db2bd,_0x34f0cb,_0x2a4b14){return _0x5a25ee(_0x2db2bd-0xbe,_0x2db2bd-0xb2,_0x2d5ade,_0x2a4b14-0x16c);}return String(_0x90f4d7);}export function getRoleLabel(_0x4a1f76){const _0x17025c={};_0x17025c['eRaSo']=_0x36f3d0(0x1ce,0x209,0x129,0x188),_0x17025c['CEfIX']=_0x2c722b(-0x126,-0x12a,-0x7,-0xae);const _0x2a051d=_0x17025c,_0x23e347={};function _0x2c722b(_0xc47306,_0x12bbe9,_0x4a4fcc,_0x4f9a33){return _0x3e315b(_0x4f9a33- -0x8b,_0xc47306,_0x4a4fcc-0xb0,_0x4f9a33-0x1b9);}_0x23e347['system']=_0x2c722b(-0xf5,-0xc1,-0x10,-0x5c),_0x23e347[_0x36f3d0(0xf5,0xbe,0x205,0x155)]='用户',_0x23e347['assistant']=_0x2a051d['eRaSo'];function _0x36f3d0(_0x4527d6,_0x4b9814,_0x3730b3,_0x2bd025){return _0x3e315b(_0x2bd025-0x18e,_0x3730b3,_0x3730b3-0x181,_0x2bd025-0x149);}_0x23e347['function']=_0x2a051d['CEfIX'],_0x23e347[_0x36f3d0(0x24e,0x157,0x1ac,0x1f9)]='工具';const _0x2fae77=_0x23e347;return _0x2fae77[_0x4a1f76]||_0x4a1f76;}export function getCurrentLLMProfile(){const _0x54bb00=extension_settings[extensionName][_0x16f54c(0x323,0x3eb,0x3b9,0x352)+'es']||{},_0x5e5dd8=extension_settings[extensionName][_0x21d777(0x112,0x116,0x12b,0xf1)+'m_profile'];function _0x21d777(_0x401944,_0x1b6980,_0x5979c2,_0x3226a2){return _0x5a25ee(_0x3226a2- -0xda,_0x1b6980-0xb5,_0x401944,_0x3226a2-0x4e);}function _0x16f54c(_0x118bee,_0xbf6ef5,_0x5bdda9,_0x42cbdd){return _0x3e315b(_0x5bdda9-0x43b,_0x42cbdd,_0x5bdda9-0xc5,_0x42cbdd-0x46);}return _0x54bb00[_0x5e5dd8]||_0x54bb00[Object['keys'](_0x54bb00)[-0x5f*0x68+0x13fe+0x2*0x94d]]||{};}export function getCurrentTestContext(){function _0x6f2986(_0x1c57f1,_0x40342a,_0x327eac,_0x395911){return _0x5a25ee(_0x327eac-0x32a,_0x40342a-0x6c,_0x395911,_0x395911-0xf5);}const _0x3a562b=extension_settings[extensionName]['test_conte'+_0x3679da(0x35c,0x320,0x2a3,0x2eb)+'s']||{};function _0x3679da(_0x32bc1d,_0xf5ae78,_0x2c51f1,_0x3d3b0c){return _0x3e315b(_0x3d3b0c-0x275,_0x2c51f1,_0x2c51f1-0x6f,_0x3d3b0c-0x80);}const _0x10b02b=extension_settings[extensionName][_0x3679da(0x2ff,0x282,0x33d,0x2f5)+_0x3679da(0x2f6,0x24e,0x2e4,0x247)+'_profile'];return _0x3a562b[_0x10b02b]||_0x3a562b[Object[_0x6f2986(0x5da,0x652,0x5db,0x542)](_0x3a562b)[0x1*0xad+-0xf24*0x1+0xe77]]||{};}function _0x3e315b(_0x23afaf,_0x40ea8e,_0x27a285,_0x1c5038){return _0x7cd0(_0x23afaf- -0x26e,_0x40ea8e);}export function getEffectiveConfigForRequestType(_0x2db56a){const _0x5ee197=extension_settings[extensionName][_0x3bcae7(0xdb,0x15d,0x19b,0x169)+_0x483419(0x1b5,0x176,0x16d,0x134)+'figs']||{},_0x143498={};_0x143498['api_profil'+'e']='默认',_0x143498[_0x483419(0x21f,0x2bc,0x20c,0x2a4)+_0x483419(0x13e,0x170,0xf2,0x14a)]='默认';const _0xf7ba39=_0x5ee197[_0x2db56a]||_0x143498,_0x201203=extension_settings[extensionName][_0x3bcae7(0xcc,0xe2,0x93,0x9e)+'es']||{},_0x30775c=extension_settings[extensionName]['test_conte'+_0x3bcae7(0x215,0x170,0x228,0x196)+'s']||{},_0x5b7784=_0xf7ba39['api_profil'+'e']||'默认',_0x1d8394=_0x201203[_0x5b7784]||_0x201203[Object['keys'](_0x201203)[0x14e*0x1c+0x21ab+-0x4633]]||{},_0x4a14c9=_0xf7ba39[_0x483419(0x21f,0x18c,0x2c6,0x175)+'ofile']||'默认',_0x2db402=_0x30775c[_0x4a14c9]||_0x30775c[Object['keys'](_0x30775c)[0x3ee*-0x8+0x1cb+0x1da5]]||{},_0x5c66f1={};function _0x483419(_0x4cf850,_0x5b65e5,_0x2165fb,_0x53e288){return _0x3e315b(_0x4cf850-0x1f7,_0x2165fb,_0x2165fb-0x1e8,_0x53e288-0x54);}_0x5c66f1[_0x3bcae7(0x224,0x1e5,0x124,0x1c7)]=_0x1d8394[_0x3bcae7(0x1ab,0x135,0x171,0x1c7)]||'',_0x5c66f1[_0x483419(0x133,0x199,0x1b1,0x18d)]=_0x1d8394['api_key']||'',_0x5c66f1[_0x483419(0x270,0x29b,0x20a,0x237)]=_0x1d8394[_0x3bcae7(0xf8,0x183,0x10c,0x199)]||'',_0x5c66f1[_0x3bcae7(0x14b,0x19a,0x18e,0x15a)+'e']=_0x1d8394[_0x483419(0x231,0x257,0x209,0x1cf)+'e']??0x26b3*0x1+-0x18a8+-0xe0b+0.7,_0x5c66f1['top_p']=_0x1d8394[_0x3bcae7(0x102,0x109,0x36,0xba)]??-0x145d+-0x796*-0x2+0x532,_0x5c66f1[_0x3bcae7(0x153,0x215,0x21c,0x17f)]=_0x1d8394[_0x3bcae7(0x117,0xd7,0x10b,0x17f)]??-0x2e*0xad+0x929+0x17ed,_0x5c66f1[_0x3bcae7(0xf4,0x125,0x160,0x13a)]=_0x1d8394[_0x483419(0x211,0x19c,0x28c,0x262)]??![],_0x5c66f1['bypass_pro'+'xy']=_0x1d8394['bypass_pro'+'xy']??![];function _0x3bcae7(_0x3febf9,_0x4b0695,_0x4f30af,_0x5e7b6f){return _0x3e315b(_0x5e7b6f-0x120,_0x4f30af,_0x4f30af-0xb2,_0x5e7b6f-0x6c);}return _0x5c66f1[_0x483419(0x264,0x299,0x2a9,0x2b8)]=_0x2db402,_0x5c66f1;}function _0x7cd0(_0x571fac,_0x325958){_0x571fac=_0x571fac-(0x138*-0x8+-0x8*-0x128+0x222);const _0x2a4980=_0x246e();let _0x3ccd5e=_0x2a4980[_0x571fac];if(_0x7cd0['RabCJG']===undefined){var _0x277f66=function(_0x322d6f){const _0x329dfd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1a3ce5='',_0x4cea0b='',_0x1bb3b8=_0x1a3ce5+_0x277f66;for(let _0x43b25c=0xf1*0xe+0x197e+0xa*-0x3de,_0x4c84ab,_0x2b5679,_0x130a42=0x70+-0x472*-0x8+0x3*-0xc00;_0x2b5679=_0x322d6f['charAt'](_0x130a42++);~_0x2b5679&&(_0x4c84ab=_0x43b25c%(-0x9*-0x3ef+0x247d+0x8*-0x8fc)?_0x4c84ab*(-0x258f+-0x1*0x102+0x26d1)+_0x2b5679:_0x2b5679,_0x43b25c++%(-0x2406+-0x2592+0x499c*0x1))?_0x1a3ce5+=_0x1bb3b8['charCodeAt'](_0x130a42+(0x16c5+-0xb8+-0x1603))-(0x1f16+-0x10ab*0x2+0x24a)!==-0x1fc8+-0x17f8+0x1be*0x20?String['fromCharCode'](-0x4d6*0x3+0x168d+-0x70c&_0x4c84ab>>(-(0x1970+0x881+-0x21ef)*_0x43b25c&0xad5+0x563+0x6*-0x2b3)):_0x43b25c:0x1*-0x1e93+-0xd*0x27e+0x8ff*0x7){_0x2b5679=_0x329dfd['indexOf'](_0x2b5679);}for(let _0x2c6aa7=0x5*-0x2aa+0x109a*0x1+0x1e*-0x1c,_0x136ca1=_0x1a3ce5['length'];_0x2c6aa7<_0x136ca1;_0x2c6aa7++){_0x4cea0b+='%'+('00'+_0x1a3ce5['charCodeAt'](_0x2c6aa7)['toString'](-0x213*0x8+-0xb*-0x101+-0x59d*-0x1))['slice'](-(0x1*0x581+0x1*-0xed7+0x5c*0x1a));}return decodeURIComponent(_0x4cea0b);};_0x7cd0['YBLNHF']=_0x277f66,_0x7cd0['lcwkIV']={},_0x7cd0['RabCJG']=!![];}const _0x374d14=_0x2a4980[0x21fa+-0x139f*-0x1+-0x3599],_0x579896=_0x571fac+_0x374d14,_0x1895ca=_0x7cd0['lcwkIV'][_0x579896];if(!_0x1895ca){const _0x2c3ed7=function(_0x44c4f1){this['NFOtMA']=_0x44c4f1,this['sojLtN']=[0x643+-0x271*-0x1+-0x11*0x83,-0x1*0xb27+0x90b+0x21c,-0x1*-0x1567+-0x8f1*0x2+-0x385],this['OauXdi']=function(){return'newState';},this['kkeemj']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['VQieHi']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2c3ed7['prototype']['BCrXXL']=function(){const _0x2f39fb=new RegExp(this['kkeemj']+this['VQieHi']),_0x3a2ba7=_0x2f39fb['test'](this['OauXdi']['toString']())?--this['sojLtN'][0x1fe6+0x469*-0x8+-0x33*-0x11]:--this['sojLtN'][-0x1576+-0x1*0x10e2+-0x1*-0x2658];return this['tmbEnk'](_0x3a2ba7);},_0x2c3ed7['prototype']['tmbEnk']=function(_0x500fda){if(!Boolean(~_0x500fda))return _0x500fda;return this['wSYSHh'](this['NFOtMA']);},_0x2c3ed7['prototype']['wSYSHh']=function(_0x357553){for(let _0x265399=0x2054+0x1*-0x1d39+-0x31b,_0x581cba=this['sojLtN']['length'];_0x265399<_0x581cba;_0x265399++){this['sojLtN']['push'](Math['round'](Math['random']())),_0x581cba=this['sojLtN']['length'];}return _0x357553(this['sojLtN'][-0x1*-0x2473+-0xa99*0x2+-0xf41]);},new _0x2c3ed7(_0x7cd0)['BCrXXL'](),_0x3ccd5e=_0x7cd0['YBLNHF'](_0x3ccd5e),_0x7cd0['lcwkIV'][_0x579896]=_0x3ccd5e;}else _0x3ccd5e=_0x1895ca;return _0x3ccd5e;}export function buildPromptForRequestType(_0x547383,_0xbbd670=''){const _0x104c6f={'bNsHq':_0x273a8e(0x26a,0x2e8,0x2ab,0x255),'swrpX':function(_0x4f82ea){return _0x4f82ea();},'ujFeY':function(_0x38658d,_0x8e20e2){return _0x38658d===_0x8e20e2;},'VRWiS':_0x3f4135(0x3c3,0x3cd,0x342,0x45b),'EjRgc':_0x3f4135(0x3ff,0x48c,0x39a,0x3bd),'PphTN':function(_0x2d36ec,_0x10dc40){return _0x2d36ec===_0x10dc40;},'KOSMK':function(_0x37b20d,_0x48f1f1,_0x2ec19d){return _0x37b20d(_0x48f1f1,_0x2ec19d);},'vkBjF':'HPjjz','MAseN':_0x273a8e(0x3df,0x342,0x360,0x337),'rvRoC':function(_0x2782dc,_0x92018b){return _0x2782dc!==_0x92018b;},'CUIiZ':'assistant','jpehR':function(_0x526ded,_0x3fd2b8){return _0x526ded(_0x3fd2b8);}},_0x585f7f=extension_settings[extensionName][_0x3f4135(0x4a5,0x48b,0x523,0x42f)+_0x3f4135(0x41a,0x475,0x3da,0x4cc)+_0x273a8e(0x24e,0x2e1,0x399,0x2c5)]||{},_0x449ca9={};_0x449ca9[_0x273a8e(0x3e0,0x3a3,0x2f4,0x367)+_0x3f4135(0x3a3,0x3aa,0x43c,0x373)]='默认';const _0x57be28=_0x585f7f[_0x547383]||_0x449ca9,_0x2695af=_0x57be28[_0x273a8e(0x41c,0x3a3,0x313,0x31c)+'ofile']||'默认',_0x3437ae=extension_settings[extensionName][_0x273a8e(0x2f0,0x346,0x37c,0x2a3)+'xt_profile'+'s']||{},_0x29798f=_0x3437ae[_0x2695af]||_0x3437ae[Object['keys'](_0x3437ae)[0x247e+0x8*0x358+-0x3f3e]]||{};function _0x3f4135(_0x4cc492,_0x5332ee,_0x1c87e8,_0x1488da){return _0x3e315b(_0x4cc492-0x45c,_0x1488da,_0x1c87e8-0x2d,_0x1488da-0x16b);}const _0x1d4cbe=[];if(_0x29798f[_0x273a8e(0x46e,0x3cd,0x32d,0x3cc)]&&Array[_0x273a8e(0x251,0x2e7,0x33a,0x322)](_0x29798f['entries']))_0x29798f[_0x273a8e(0x3a8,0x3cd,0x383,0x359)][_0x273a8e(0x30b,0x382,0x34c,0x3e4)](_0x1d1445=>{function _0x4aa771(_0x4666b1,_0x706af0,_0x4206d9,_0x140652){return _0x273a8e(_0x4666b1-0xc6,_0x4206d9-0x200,_0x4206d9-0x27,_0x140652);}function _0x8054d9(_0x88b984,_0x28008d,_0xab5eb3,_0x49d42b){return _0x3f4135(_0xab5eb3- -0x552,_0x28008d-0x146,_0xab5eb3-0x1a9,_0x49d42b);}const _0x181493={'roShe':function(_0x3b739e){function _0x106ae5(_0x568c79,_0x36ccb5,_0x3a7ffd,_0x33eb4b){return _0x7cd0(_0x36ccb5-0x2f0,_0x3a7ffd);}return _0x104c6f[_0x106ae5(0x5e2,0x581,0x616,0x546)](_0x3b739e);}};if(_0x104c6f[_0x8054d9(-0x6d,-0x196,-0xe4,-0xc0)](_0x104c6f['VRWiS'],_0x104c6f['EjRgc']))_0x2cff28=_0x360e8e+_0x104c6f['bNsHq'];else{if(!_0x1d1445['enabled'])return;if(!_0x1d1445[_0x8054d9(-0x106,-0xb1,-0x94,-0xb4)]||_0x1d1445[_0x8054d9(-0xd9,-0x57,-0x94,-0x106)][_0x8054d9(-0xe0,-0xa8,-0xfe,-0x9c)]()==='')return;if(_0x104c6f['PphTN'](_0x1d1445[_0x8054d9(-0xb2,-0x16,-0x6e,-0xb3)+'e'],_0x4aa771(0x53f,0x5de,0x593,0x583))){if(!_0xbbd670||!_0x104c6f[_0x4aa771(0x609,0x4ab,0x563,0x602)](checkTriggerWords,_0x1d1445['triggerWor'+'ds'],_0xbbd670)){if(_0x104c6f['vkBjF']!==_0x8054d9(-0x1e0,-0x9f,-0x132,-0x81))return;else _0x181493['roShe'](_0x8e28f8);}}const _0x33b525={};_0x33b525[_0x4aa771(0x555,0x529,0x58e,0x59c)]=_0x1d1445[_0x8054d9(-0x60,-0x9d,-0xe3,-0x57)]||_0x104c6f[_0x8054d9(-0x149,-0xde,-0x125,-0x9c)],_0x33b525['content']=_0x1d1445['content'],_0x1d4cbe['push'](_0x33b525);}});else _0x29798f[_0x3f4135(0x4aa,0x523,0x473,0x4bd)]&&Array[_0x273a8e(0x276,0x2e7,0x22e,0x26d)](_0x29798f[_0x3f4135(0x4aa,0x430,0x44f,0x540)])&&_0x29798f[_0x3f4135(0x4aa,0x4be,0x450,0x40f)][_0x3f4135(0x463,0x4bb,0x430,0x4f4)](_0x4dbc79=>{function _0x26a33b(_0x5672c9,_0x4ab5d3,_0x4d6024,_0x3c5507){return _0x273a8e(_0x5672c9-0xdb,_0x5672c9- -0x4ce,_0x4d6024-0x1a1,_0x4ab5d3);}function _0x370940(_0xffe242,_0x3ad8fa,_0xfd52de,_0x18381e){return _0x3f4135(_0xffe242- -0x152,_0x3ad8fa-0xf9,_0xfd52de-0x10f,_0xfd52de);}if(_0x4dbc79[_0x370940(0x2d1,0x2b7,0x369,0x355)]&&_0x104c6f['rvRoC'](_0x4dbc79[_0x26a33b(-0x18c,-0x150,-0x199,-0x211)][_0x26a33b(-0x15b,-0xba,-0xb5,-0x211)](),'')){const _0x4331ac={};_0x4331ac['role']=_0x104c6f[_0x26a33b(-0x182,-0x111,-0x113,-0xd5)],_0x4331ac[_0x370940(0x36c,0x350,0x37e,0x315)]=_0x4dbc79['user'],_0x1d4cbe[_0x370940(0x399,0x335,0x30e,0x361)](_0x4331ac);}if(_0x4dbc79[_0x370940(0x3b0,0x2fe,0x3d6,0x36e)]&&_0x4dbc79[_0x370940(0x3b0,0x391,0x35c,0x2fa)][_0x26a33b(-0x15b,-0x120,-0x190,-0x1dc)]()!==''){const _0x11086f={};_0x11086f[_0x26a33b(-0x140,-0x19d,-0x1d6,-0xa6)]=_0x104c6f[_0x370940(0x3a4,0x2f6,0x3bc,0x403)],_0x11086f[_0x26a33b(-0xf1,-0xb3,-0x137,-0x122)]=_0x4dbc79[_0x370940(0x3b0,0x3d5,0x3b2,0x31f)],_0x1d4cbe[_0x26a33b(-0xc4,-0xd4,-0xfe,-0xd7)](_0x11086f);}});const _0x2372d1=_0x104c6f['jpehR'](mergeAdjacentMessages,_0x1d4cbe),_0xc10be1=_0x104c6f[_0x3f4135(0x446,0x3fa,0x4f6,0x4e4)](processRollPlaceholders,_0x2372d1);function _0x273a8e(_0x7fa608,_0x1343b4,_0x30c012,_0x960115){return _0x5a25ee(_0x1343b4-0x131,_0x1343b4-0x1a,_0x960115,_0x960115-0x51);}return _0xc10be1;}const _0x4e9bbd={};_0x4e9bbd[_0x5a25ee(0x2ea,0x31e,0x2db,0x33e)]=_0x3e315b(0x86,0x13a,0x116,0xe9),_0x4e9bbd[_0x3e315b(-0x33,-0x3,-0x30,0x27)+'n']=_0x3e315b(0x9e,0x10b,0xc8,0x11),_0x4e9bbd[_0x5a25ee(0x2e2,0x36a,0x397,0x2df)+'ay']='角色/服装展示',_0x4e9bbd['char_modif'+'y']='角色/服装修改',_0x4e9bbd[_0x3e315b(0x83,0xd2,0x120,-0x32)+'n']='翻译',_0x4e9bbd[_0x5a25ee(0x225,0x24b,0x1ff,0x211)]=_0x3e315b(-0x40,-0x38,-0x3d,-0x85);const REQUEST_TYPE_NAMES=_0x4e9bbd;export async function executeTypedLLMRequest(_0x5bfb63,_0x42990e,_0x57ffe9,_0x481dc0=null){const _0x5b03e0={'qXCaN':_0x3dc2ff(-0x7a,-0xa0,-0x130,-0x6d)+_0x3dc2ff(-0x86,-0xa1,-0x5e,-0x115),'sxHey':function(_0x275009,_0x413b4f){return _0x275009(_0x413b4f);},'BNOSg':_0x3dc2ff(-0xae,-0x166,-0x77,-0x5),'lTpho':_0x484b98(0xde,0xc2,0x10a,0x139),'Skyih':_0x3dc2ff(-0x2,-0x5d,0x1c,-0xb3)+_0x3dc2ff(0x12,-0x18,-0x6,-0x7e)+_0x3dc2ff(0x7b,0x129,-0x3e,-0x2)+_0x3dc2ff(-0x7b,-0x135,-0x106,-0x26)+'I\x20连接问题。','FmGLB':function(_0xfa51c2,_0xbb60fd){return _0xfa51c2===_0xbb60fd;},'ntvcd':_0x484b98(0x14d,0x105,0x170,0xdc),'KZGQN':'Request\x20ab'+_0x3dc2ff(0x8b,0xce,0x57,0x138),'OYoKw':function(_0x144b49,_0x5baf03){return _0x144b49(_0x5baf03);},'ulnut':_0x484b98(0x165,0x70,0xc9,0xf2),'cHZPd':function(_0x22d6b8,_0x922dd6){return _0x22d6b8/_0x922dd6;},'lbxRl':function(_0x3a699e,_0x58c4c5){return _0x3a699e*_0x58c4c5;},'DwrrS':'流式解析警告:','ImvAv':function(_0x31c997,_0x23dc68){return _0x31c997===_0x23dc68;},'uQeNa':function(_0x1ff94b,_0x5d8808){return _0x1ff94b||_0x5d8808;},'bzBpG':function(_0x1b191c,_0x173ad6){return _0x1b191c===_0x173ad6;},'bKJGn':'qNGOj','UEgWO':function(_0x1405b1){return _0x1405b1();},'WyOZU':function(_0x58d219,_0x427e56){return _0x58d219(_0x427e56);},'VcKhH':function(_0x1cf619,_0x1eb37d){return _0x1cf619(_0x1eb37d);},'znSxf':function(_0x44e968,_0x503866){return _0x44e968(_0x503866);},'daZIi':_0x3dc2ff(0x13,0xc4,0x95,0xa3),'homwA':'JLfjq','nnrtP':'/v1','sKgjc':_0x484b98(0x12d,0x194,0xd4,0x154),'hoEnu':_0x484b98(0x1dd,0x117,0x1dc,0x142)+'nds/chat-c'+'ompletions'+_0x3dc2ff(0x9,-0x46,0x8e,0x16),'IYJsY':_0x3dc2ff(0x45,-0x6b,0x14,0xb7),'jbTci':function(_0x1760f9,_0x31831f){return _0x1760f9(_0x31831f);},'qCOMN':function(_0x15d5b7,_0x235aa6){return _0x15d5b7!==_0x235aa6;},'SZpiR':_0x3dc2ff(-0x9a,-0x57,-0x5,-0x6e),'NBSIC':function(_0x51d121,_0x52e466,_0x5d9711){return _0x51d121(_0x52e466,_0x5d9711);},'HPoMc':_0x3dc2ff(0x7c,0xb0,0xc6,0x43),'xtHIz':function(_0x39a2c3,_0x355cda){return _0x39a2c3===_0x355cda;},'vGzvI':_0x3dc2ff(0x2a,-0x8,-0x4d,0x9d),'bygAM':_0x484b98(0x12a,0xc9,0x6b,0xd3),'ONaqI':function(_0x3bcc6e,_0x244fd0){return _0x3bcc6e===_0x244fd0;},'WCjLn':_0x3dc2ff(0x31,-0x30,-0x23,0xc1),'wbBxy':_0x3dc2ff(-0xad,-0x4b,-0x162,-0x62),'akMJi':function(_0x376962,_0x474de0){return _0x376962===_0x474de0;},'etJCd':_0x484b98(-0x3,0xb,-0xa7,-0x16),'GNrqP':_0x484b98(-0x7,0x44,0x36,0x1d),'HwUUJ':function(_0x12bd45,_0x147a6d){return _0x12bd45>_0x147a6d;},'vcQNQ':_0x484b98(0x149,0x135,0x2b,0x90),'gEiTa':_0x3dc2ff(0x37,0xe,0xbc,0xdb),'AFhwv':_0x484b98(0x6b,-0x8f,-0x43,-0x2),'VPeUV':function(_0x2f242d,_0x3ff892){return _0x2f242d===_0x3ff892;},'eqLir':_0x3dc2ff(-0xa2,-0x132,-0x9d,-0xe2)+'E]','gKtCp':_0x484b98(0x1a3,0x126,0x19d,0x141),'yXSNn':_0x484b98(0x6d,0x78,0x5e,0xc5),'vscrm':function(_0x245829,_0x244af1){return _0x245829===_0x244af1;},'rmlRl':_0x484b98(0x156,0x194,0x7c,0x107),'fivIh':_0x3dc2ff(-0x50,0x40,-0x58,-0x32),'lmXzK':_0x3dc2ff(-0x47,-0xe1,-0xf1,-0x24),'fDCxH':_0x484b98(0x5b,0x18c,0x1a3,0xfd),'kOhVf':function(_0x6e6d53,_0x3e65d1){return _0x6e6d53===_0x3e65d1;},'GbfPS':_0x3dc2ff(-0x93,-0xf8,-0x6c,-0x84),'ZkIgY':function(_0x56bb61,_0x3f1884){return _0x56bb61===_0x3f1884;},'nRTvO':_0x484b98(0x107,0x30,0x7b,0x95),'bzYpc':function(_0x1cdb22,_0x3fe082){return _0x1cdb22!==_0x3fe082;},'xwKJd':'KDLKD','jQqSY':_0x3dc2ff(-0x42,-0x89,0x51,-0x78),'dAyFJ':_0x484b98(-0xf,0x25,0x108,0x85),'DXrwC':_0x484b98(0xbb,0xeb,0xbe,0x131),'pZgEY':'UtkIY','mBaLO':function(_0x341883,_0x2c3ae0){return _0x341883===_0x2c3ae0;},'NXOhO':function(_0x2862ca,_0x31836b){return _0x2862ca>_0x31836b;},'nziCq':function(_0x1f5988,_0xb1da92){return _0x1f5988(_0xb1da92);},'gwFSD':'tscYP','tMaAj':'xqDud','KOCRY':_0x3dc2ff(0x99,0x126,0xcc,0x48),'rdeUX':function(_0xfac1be,_0x364769){return _0xfac1be===_0x364769;}},{prompt:_0x56da5f,id:_0x49e38d}=_0x5bfb63;if(_0x5b03e0[_0x484b98(0xf2,0xe,0x59,0x67)](!_0x49e38d,!_0x56da5f))return;if(currentLLMRequestController){if(_0x5b03e0[_0x3dc2ff(0x53,0x9c,-0x36,0x2)](_0x5b03e0[_0x3dc2ff(-0x99,-0x136,-0x29,-0x11a)],_0x5b03e0[_0x484b98(0x2c,0x32,-0x8c,-0x9)]))currentLLMRequestController['abort'](),toastr['info'](_0x484b98(0x63,0xb9,0x117,0xde)+_0x3dc2ff(0xbd,0x25,0x135,0xca));else{_0x24e314=_0x1568d9+(_0x3dc2ff(0x98,0xaf,0xcd,0x2a)+_0x3dc2ff(0x1e,-0x96,0x39,0xd2));const _0x190740={};_0x190740[_0x484b98(0x7a,-0x37,0x31,0x2c)+'pe']=_0x5b03e0[_0x3dc2ff(0x55,0x5d,0xb9,0xd4)],_0x190740[_0x484b98(0x17,-0x36,0x8e,0x30)+_0x3dc2ff(0x27,-0x1,0x70,-0x32)]=_0x484b98(0xd3,0x39,0x58,0x36)+_0x1e3289,_0x3b496d=_0x190740;const _0x4dd19c={};_0x4dd19c['model']=_0x3e9424,_0x4dd19c[_0x3dc2ff(-0xa9,-0x2c,-0x83,-0x155)]=_0x1c3a93,_0x4dd19c[_0x3dc2ff(0x56,0xa7,-0x1d,-0x26)+'e']=_0x2c3084,_0x4dd19c['top_p']=_0x4a3cf,_0x4dd19c[_0x484b98(0x112,0x6d,0xe2,0x10b)]=_0x1463d9,_0x4dd19c['stream']=_0x41ec7b,_0x3b1218=_0x4dd19c;}}currentLLMRequestController=new AbortController();const _0x3e033e=currentLLMRequestController['signal'],_0x3cef9e=currentLLMRequestController,_0x91e8fe=REQUEST_TYPE_NAMES[_0x42990e]||_0x42990e,_0x149a04={};_0x149a04['name']=_0x3dc2ff(-0xd,0x2a,0x0,0x1c)+_0x91e8fe,_0x149a04[_0x484b98(0x8d,0x120,0x1af,0x13d)]=TaskType[_0x484b98(0x2b,0xa8,0xcb,0x92)];function _0x484b98(_0x47d796,_0x165ce8,_0xbc4323,_0x3a18d1){return _0x5a25ee(_0x3a18d1- -0x19e,_0x165ce8-0x4c,_0x47d796,_0x3a18d1-0x93);}_0x149a04[_0x3dc2ff(-0x4b,-0xed,-0x7c,0x25)]=_0x49e38d;const _0x4137c2=taskQueue['addTask'](_0x149a04);llmTaskControllers[_0x484b98(0xa4,0x123,0x80,0x121)](_0x4137c2,currentLLMRequestController),taskQueue[_0x484b98(0xfc,0x172,0x164,0x148)+'us'](_0x4137c2,TaskStatus[_0x3dc2ff(-0xab,-0x7d,-0xd5,0xa)]),_0x5b03e0['UEgWO'](startFabLoading);function _0x3dc2ff(_0x512eb7,_0x326da3,_0x32aacf,_0x27c36c){return _0x3e315b(_0x512eb7-0x1c,_0x27c36c,_0x32aacf-0x19,_0x27c36c-0x80);}let _0x1b2225=![];clearLog(),_0x5b03e0[_0x484b98(0x6b,0xe7,0xd,0xb2)](addLog,_0x484b98(0x19e,0x19b,0x134,0x118)+_0x3dc2ff(0xb0,0x26,0xbd,0x11e)+_0x91e8fe+_0x3dc2ff(0x3e,0x41,0x94,0x8c)),addLog(_0x484b98(0x119,0x74,0x19d,0xe8)+_0x49e38d),_0x5b03e0[_0x484b98(0xfe,0xe6,0x1c6,0x11d)](addLog,_0x3dc2ff(0xb,-0x2f,-0x2e,-0xa3)+':'),_0x5b03e0['VcKhH'](addLog,_0x5b03e0[_0x3dc2ff(0xc,-0x52,-0xa,-0x1)](formatPromptForDisplay,_0x56da5f));const _0x19b17d=_0x5b03e0[_0x484b98(0x1e0,0x152,0x100,0x145)](getEffectiveConfigForRequestType,_0x42990e),{api_url:_0xf857b4,api_key:_0x1ff4cf,model:_0x5ee2c,temperature:_0x53c6ff,top_p:_0x23ec4a,max_tokens:_0x48c613,stream:_0x488811,bypass_proxy:_0x1e8b75}=_0x19b17d;if(_0x5b03e0['uQeNa'](!_0xf857b4,!_0x1ff4cf)||!_0x5ee2c){if(_0x484b98(-0x9,0xe7,0xb2,0xa3)!==_0x5b03e0[_0x484b98(0x101,0x107,0x111,0x127)]){const _0x121242={};_0x121242[_0x484b98(0x31,0x127,0xb9,0xbf)]=_0x3dc2ff(-0x1d,-0x7,-0x55,0x9),_0x121242['content']=_0x23c324[_0x484b98(0x48,0x18,-0x35,0x73)],_0x47afcc[_0x3dc2ff(0xab,0x66,0x36,0xfa)](_0x121242);}else{const _0x101cab=_0x91e8fe+(_0x484b98(0xea,0xed,0x15e,0x105)+_0x3dc2ff(0x5a,0x95,0x1,0xa9)+_0x484b98(0x16c,0x6d,0xf0,0x116)+'置。');toastr[_0x484b98(0xbb,0x62,-0xad,0x2)](_0x101cab);const _0x17eb9c={};_0x17eb9c['success']=![],_0x17eb9c[_0x484b98(0x42,0xc0,0x114,0x8c)]=_0x101cab,_0x17eb9c['id']=_0x49e38d,eventSource[_0x3dc2ff(-0xa1,-0x74,-0x10,-0x4c)](_0x57ffe9,_0x17eb9c);return;}}const _0x564a19=_0xf857b4[_0x3dc2ff(-0xf,-0x48,-0x55,-0x1a)](/\/$/,'');let _0xfc2d59,_0xdff3f9,_0x5f0770;if(_0x1e8b75){if(_0x5b03e0[_0x484b98(0x9e,0x109,0x12b,0xe3)](_0x5b03e0['homwA'],'IeSEQ'))_0x4eb61f['abort'](),_0x307ac4[_0x3dc2ff(0x68,0xc0,0x6c,0xa5)](_0x484b98(-0x29,0x3,0xaf,-0xb));else{_0xfc2d59=_0x564a19+('/chat/comp'+_0x484b98(0x78,0x15,0x10f,0xae));const _0x138ca8={};_0x138ca8[_0x3dc2ff(-0x64,-0x1f,-0x59,-0x44)+'pe']=_0x5b03e0['qXCaN'],_0x138ca8[_0x3dc2ff(-0x60,-0x87,-0xa6,-0x51)+'ion']=_0x3dc2ff(-0x5a,-0x9,-0x1,-0xed)+_0x1ff4cf,_0xdff3f9=_0x138ca8;const _0x1cb648={};_0x1cb648[_0x484b98(0xc3,0x130,0x1c0,0x125)]=_0x5ee2c,_0x1cb648['messages']=_0x56da5f,_0x1cb648['temperatur'+'e']=_0x53c6ff,_0x1cb648['top_p']=_0x23ec4a,_0x1cb648['max_tokens']=_0x48c613,_0x1cb648[_0x484b98(0x64,0xa0,0x139,0xc6)]=_0x488811,_0x5f0770=_0x1cb648;}}else{let _0x5a2c59=_0x564a19;!_0x5a2c59[_0x484b98(0x56,0xc9,0x1a,0x50)](_0x5b03e0[_0x484b98(0xc4,0xb5,0xbd,0x2e)])&&!_0x5a2c59[_0x3dc2ff(-0x56,-0xa7,-0x16,-0x1a)](_0x5b03e0[_0x484b98(0x9b,0x140,0x39,0xac)])&&(_0x5a2c59=_0x5a2c59+_0x5b03e0[_0x3dc2ff(-0x62,0x0,-0x104,-0x118)]);_0x5a2c59=_0x5a2c59[_0x3dc2ff(-0xf,0x82,0x40,-0x33)](/\/v1\/$/,_0x5b03e0[_0x484b98(-0x88,0x55,0x75,0x2e)]),_0xfc2d59=_0x5b03e0[_0x3dc2ff(-0x8f,0x11,-0x4e,-0xbb)],_0xdff3f9=getRequestHeaders(window[_0x484b98(-0x7b,0xe0,0x81,0x32)]);const _0x57791d={};_0x57791d[_0x3dc2ff(0x5d,0xf5,0x82,-0x43)+_0x484b98(0x6,-0xc5,-0x14,-0x14)+'ce']=_0x484b98(-0x15,0xc4,0xdd,0x8f),_0x57791d[_0x3dc2ff(-0x33,-0xc9,-0x5a,-0xcd)]=_0x5a2c59,_0x57791d[_0x3dc2ff(0x2d,-0x3a,-0x12,0x53)+'lude_heade'+'rs']=_0x3dc2ff(-0x60,-0xf3,-0x10a,-0x24)+'ion:\x20\x22Bear'+'er\x20'+_0x1ff4cf+'\x22',_0x57791d[_0x484b98(0xe8,0xff,0xbe,0x125)]=_0x5ee2c,_0x57791d[_0x484b98(-0x65,-0x36,0x40,-0x19)]=_0x56da5f,_0x57791d[_0x3dc2ff(0x56,-0x53,0xc0,0x32)+'e']=_0x53c6ff,_0x57791d[_0x484b98(-0x1a,0x8d,0x4b,0x46)]=_0x23ec4a,_0x57791d['max_tokens']=_0x48c613,_0x57791d[_0x484b98(0x103,0x34,0x27,0xc6)]=_0x488811,_0x5f0770=_0x57791d;}if(_0x481dc0){if(_0x5b03e0[_0x484b98(0x8f,0x70,0x21,0x62)]!==_0x5b03e0['IYJsY'])return _0xfb0e1a[_0x484b98(-0x19,0x82,0xe1,0x78)](_0x497d20,null,-0x10*-0x7b+0x1a7d+-0x222b);else _0x5b03e0[_0x3dc2ff(-0xb0,-0x4d,-0xc7,-0x69)](_0x481dc0,_0x484b98(-0x1a,-0xa,0x11e,0xa0)+_0x91e8fe+'\x20请求，请稍候...');}try{if(_0x5b03e0[_0x3dc2ff(-0x53,-0xc6,0x5,-0xd)](_0x5b03e0['SZpiR'],_0x5b03e0['SZpiR'])){const _0x5a5a55=_0x1d0705[_0x3dc2ff(-0x3c,-0x98,0x2b,-0xc1)](-0x998*0x1+0x26e5+-0x1d47),_0x3b996b=_0x42d63f[_0x3dc2ff(-0x52,-0x4b,-0x5b,0x5f)](_0x5a5a55),_0x348155=_0x3b996b[_0x484b98(0x12a,0x111,0x130,0xc8)]?.[0x772*0x2+0xe62*-0x1+-0x82]?.[_0x484b98(0xf6,0xdd,0xac,0x5c)]?.[_0x3dc2ff(0x7e,-0xc,0x80,-0x7)];_0x348155&&(_0x93bd0+=_0x348155,_0x493b73&&_0x5b03e0[_0x3dc2ff(0x22,-0x3f,0xb7,0x7)](_0x47d658,_0x55342c));}else{const _0x4ce0fe=await _0x5b03e0['NBSIC'](fetch,_0xfc2d59,{'method':_0x5b03e0[_0x3dc2ff(-0x83,-0x78,-0xde,-0x2d)],'headers':_0xdff3f9,'body':JSON['stringify'](_0x5f0770),'signal':_0x3e033e});if(!_0x4ce0fe['ok']){if(_0x5b03e0[_0x3dc2ff(0x74,-0x45,-0x27,0x27)](_0x5b03e0[_0x3dc2ff(0x50,0x6,0xea,-0x3e)],_0x5b03e0[_0x484b98(0x3a,0x71,0x15d,0xe0)])){try{if(_0x5b03e0[_0x484b98(0x5a,-0x35,-0x6a,0x3d)](_0x5b03e0['bygAM'],_0x5b03e0[_0x484b98(0xd1,0x80,-0x58,0x43)])){if(_0x1007a1[_0x3dc2ff(0x19,-0x72,0x33,0xa8)][_0x484b98(0xc7,0xa9,0x27,0x3a)](_0x5b03e0[_0x484b98(0x60,-0x31,-0xf,0x34)])||_0x135210[_0x3dc2ff(0x19,0x6b,0xc8,0x2a)]['includes'](_0x5b03e0['lTpho']))throw _0x9d3ff3;}else{const _0x1b2285=await _0x4ce0fe[_0x484b98(0xbe,0x70,0xb,0x71)]();if(_0x1b2285[_0x484b98(0x31,0x24,-0x15,0x2)]){if(_0x5b03e0['ONaqI'](_0x5b03e0[_0x484b98(0x187,0x16a,0x190,0xf6)],_0x5b03e0[_0x3dc2ff(0x66,0x102,0xc4,0x1b)])){let _0x44bc8d;if(typeof _0x1b2285[_0x484b98(-0x2a,-0x90,-0x5e,0x2)]===_0x5b03e0['wbBxy']&&_0x1b2285[_0x3dc2ff(-0x8e,-0x56,-0x139,-0x6b)][_0x484b98(0x26,0x20,0xeb,0xa9)]){if(_0x5b03e0['akMJi'](_0x5b03e0[_0x484b98(0x89,-0x38,-0x28,0x5e)],_0x5b03e0[_0x3dc2ff(-0x2c,0x78,-0x88,0x77)]))_0x5b03e0[_0x3dc2ff(0x22,-0x80,-0xb,-0x12)](_0x5b3b63,_0x3dc2ff(0x10,-0x57,0x32,0x5d)+_0x5a2b3f+'\x20请求，请稍候...');else{_0x44bc8d=''+_0x1b2285[_0x484b98(0x9,-0xb3,-0x3b,0x2)][_0x484b98(0xb4,0x52,0x139,0xa9)];const _0x226c1f=[];if(_0x1b2285['error'][_0x3dc2ff(0xad,0x6e,0x140,0x156)])_0x226c1f['push'](_0x484b98(0x6c,0x9,0x13a,0x93)+_0x1b2285[_0x484b98(-0x50,0x39,0x59,0x2)][_0x484b98(0x191,0x147,0x11d,0x13d)]);if(_0x1b2285[_0x484b98(0xb6,0x3a,-0x31,0x2)][_0x484b98(0x18f,0xf6,0x13d,0xe7)])_0x226c1f['push']('代码:\x20'+_0x1b2285[_0x484b98(0x3b,0x2c,0x5a,0x2)][_0x3dc2ff(0x57,0xd7,0xb8,0x1a)]);_0x5b03e0[_0x3dc2ff(0x6f,0xb4,0x8f,0x1)](_0x226c1f[_0x3dc2ff(-0x4c,-0x23,-0x8b,-0x47)],0x4*-0x27c+0x331+0xb*0x9d)&&(_0x44bc8d+='\x20('+_0x226c1f['join'](',\x20')+')');}}else _0x44bc8d=''+JSON['stringify'](_0x1b2285[_0x3dc2ff(-0x8e,-0x83,-0x31,-0xa)]);throw new Error(_0x44bc8d);}else return function(_0x2dbd16){const {id:_0x18dae4}=_0x2dbd16;function _0x7f9ecc(_0x3334dd,_0x5a39ad,_0x5dd158,_0x1c31bd){return _0x484b98(_0x5a39ad,_0x5a39ad-0x180,_0x5dd158-0x1d,_0x5dd158-0x357);}if(!_0x18dae4)return;function _0x16e9e9(_0x1dac5d,_0x20b576,_0x670b2c,_0x4f6317){return _0x484b98(_0x4f6317,_0x20b576-0x62,_0x670b2c-0x156,_0x670b2c-0x4a5);}const _0x324bd2=_0x22fc27[_0x308eef]||_0x4ecc86;_0x425475[_0x16e9e9(0x547,0x5aa,0x5c5,0x676)](_0x7f9ecc(0x3ec,0x47e,0x4a2,0x422)+_0x16e9e9(0x5aa,0x53c,0x517,0x51b)+_0x324bd2+(_0x7f9ecc(0x43d,0x358,0x3ac,0x3a5)+_0x7f9ecc(0x3f0,0x310,0x378,0x2ff))+_0x18dae4+')');const _0x2833be=_0x332ff0(_0x4d1222),_0x4d68f9={};_0x4d68f9[_0x16e9e9(0x43f,0x500,0x4ea,0x586)]=_0x2833be,_0x4d68f9['id']=_0x18dae4,_0x5b6518['emit'](_0x47bef6,_0x4d68f9);};}}}catch(_0x408e6e){if(_0x5b03e0[_0x3dc2ff(-0x91,-0xbd,-0x55,0x16)](_0x5b03e0[_0x3dc2ff(-0x6a,0x4b,-0x85,-0xd4)],_0x5b03e0[_0x484b98(0xb7,0xc2,-0x8,0x26)])){if(_0x408e6e['message'][_0x3dc2ff(-0x56,-0xa0,0x31,0x4d)](_0x5b03e0['BNOSg'])||_0x408e6e[_0x3dc2ff(0x19,-0x2d,0x3a,0x5a)][_0x484b98(0x9d,-0x62,0xd4,0x3a)](_0x484b98(0x93,0xee,0xdb,0x139)))throw _0x408e6e;}else _0x1ac5ec[_0x3dc2ff(-0x49,-0xca,-0x80,0x6a)](_0x5b03e0['Skyih']);}throw new Error(_0x3dc2ff(0x3c,0x3a,0x3,0x66)+_0x4ce0fe[_0x3dc2ff(-0x8,0x69,-0xc0,0x26)]+'\x20'+_0x4ce0fe[_0x484b98(-0x16,0xa2,-0x19,0x0)]);}else{const _0x52bf00=_0x68e0ef[_0x3dc2ff(0x40,-0x4c,0x72,-0x44)](_0x579980,arguments);return _0x8e62db=null,_0x52bf00;}}let _0x170234='';if(_0x488811){const _0x4f7705=_0x4ce0fe['body'][_0x3dc2ff(0xac,0x15c,0x67,0x19)](),_0xb9e691=new TextDecoder(_0x5b03e0[_0x3dc2ff(-0x35,-0x81,0x63,-0x1e)]);let _0x2898b5='';while(!![]){if(_0x484b98(-0xbb,0x2c,-0x2e,-0x2)===_0x5b03e0[_0x3dc2ff(-0x1b,0x89,-0xc2,0x6e)]){const {done:_0x44a657,value:_0xf11f45}=await _0x4f7705[_0x484b98(0x96,0x8f,0xe8,0x91)]();if(_0x44a657)break;const _0x122aeb={};_0x122aeb[_0x3dc2ff(0x36,0x3d,0x97,-0x46)]=!![],_0x2898b5+=_0xb9e691[_0x484b98(0x180,0xd8,0x167,0xeb)](_0xf11f45,_0x122aeb);const _0x427fe3=_0x2898b5[_0x484b98(0x13a,0x17d,0x121,0x12b)]('\x0a');_0x2898b5=_0x427fe3[_0x3dc2ff(0x71,0x8b,0x119,0x7b)]()||'';for(const _0x3b3c5c of _0x427fe3){const _0x53d17f=_0x3b3c5c['trim']();if(!_0x53d17f||_0x5b03e0[_0x3dc2ff(0x76,-0x1a,-0x2d,0x109)](_0x53d17f,_0x5b03e0['eqLir']))continue;if(_0x53d17f[_0x484b98(0x198,0x6e,0x187,0xf3)](_0x5b03e0[_0x3dc2ff(-0x46,0x4d,-0x86,0x3a)]))try{if(_0x3dc2ff(0x35,-0x3c,0x1c,-0x78)!==_0x5b03e0[_0x3dc2ff(0x7,-0x8f,-0x72,-0xa5)]){if(_0x5b03e0[_0x3dc2ff(0x93,0xab,0x8d,0x4f)](_0x2e9974[_0x484b98(-0x3,0x69,0xc0,0x23)],_0x5b03e0['ntvcd'])){const _0x1936fb=('2|1|0|5|4|'+'3')['split']('|');let _0x40aa26=0xe*0x27a+0x1*-0x851+0xad*-0x27;while(!![]){switch(_0x1936fb[_0x40aa26++]){case'0':_0x3374e8[_0x3dc2ff(0xb8,0xe0,0x114,0x138)+'us'](_0x587ff2,_0x495121[_0x484b98(0x39,0x98,-0x33,0x2b)]);continue;case'1':_0x380587[_0x484b98(0xc8,0x162,0x19d,0x120)](_0x3dc2ff(-0x51,-0x68,-0xd6,0x4a)+_0x484b98(0x167,0xff,0x150,0xec)+_0x484b98(-0x41,0x15,-0x8c,0x1c));continue;case'2':_0x3689f8=!![];continue;case'3':return;case'4':const _0x2ae73e={};_0x2ae73e[_0x3dc2ff(-0x6d,-0xa2,-0xe4,-0xe2)]=_0x5b03e0[_0x3dc2ff(0x8c,0xd0,0x12e,0x6f)],_0x2ae73e[_0x484b98(0x128,0xb8,0x128,0xa9)]=_0x5b03e0[_0x484b98(-0x4b,-0x8f,-0x40,0x27)];const _0x151657={};_0x151657[_0x484b98(-0x19,0x50,-0x22,0x9)]=![],_0x151657[_0x3dc2ff(-0x4,0x70,-0x13,-0x70)]=null,_0x151657['id']=_0x12d6a5,_0x151657[_0x484b98(-0x69,-0xb1,-0x23,0x2)]=_0x2ae73e,_0x2e219b['emit'](_0x1ae99c[_0x484b98(0xa7,0xe3,0xe7,0x150)+'E_RESPONSE'],_0x151657);continue;case'5':_0x5420c8[_0x3dc2ff(-0xaa,-0x4c,-0x106,-0xcb)](_0x51b418);continue;}break;}}_0x518fad[_0x3dc2ff(-0x8e,-0x13c,-0x93,-0x1d)](_0x3dc2ff(-0x9f,-0xf5,-0x137,-0xa3)+_0x3dc2ff(-0x7c,-0xfa,0x8,-0xd7),_0x50055f);const _0x34df78='请求错误:\x20'+_0xab5661[_0x484b98(0x111,0x42,0x12b,0xa9)];_0x3557de&&_0x42b6f9(_0x34df78);_0x144705[_0x3dc2ff(-0x8e,-0x76,-0xd8,-0xa)](_0x11a71e[_0x484b98(0x14e,0x25,0x12,0xa9)]),_0x174737[_0x484b98(0xa7,0x17b,0x1bd,0x11f)+'sk'](_0x58b767,![]),_0x152044[_0x3dc2ff(-0xaa,-0x79,-0x59,-0x15d)](_0x5f1862);const _0x297557={};_0x297557[_0x484b98(0xb7,-0x18,0x52,0x9)]=![],_0x297557[_0x484b98(-0x24,0x83,-0x28,0x8c)]=_0x34df78,_0x297557['id']=_0x54a061,_0x58ff1d[_0x3dc2ff(-0xa1,-0x22,-0x22,0x16)](_0x9809d5['LLM_EXECUT'+_0x3dc2ff(-0x8d,-0x42,-0x1,-0x11f)],_0x297557);}else{const _0x3b05d6=_0x53d17f[_0x484b98(0x9f,0x4a,0xdd,0x54)](-0x1*0x14de+0x51e+0xfc6),_0x2a7d1f=JSON[_0x3dc2ff(-0x52,-0xd5,-0x91,0x37)](_0x3b05d6),_0x3e69fb=_0x2a7d1f[_0x3dc2ff(0x38,0xd3,0x16,0xe4)]?.[-0x114b+-0x1343+0x248e*0x1]?.[_0x3dc2ff(-0x34,-0x87,0x85,0x64)]?.[_0x484b98(0x68,0x153,0xe1,0x10e)];_0x3e69fb&&(_0x5b03e0['vscrm'](_0x5b03e0['rmlRl'],_0x5b03e0[_0x484b98(0x14d,0xd0,0x15f,0xdd)])?_0x5b03e0[_0x3dc2ff(0x1f,0xa4,-0x5,-0x77)](_0x5db08e,_0xe00826):(_0x170234+=_0x3e69fb,_0x481dc0&&_0x5b03e0[_0x484b98(-0x42,-0xd3,0x13,-0x20)](_0x481dc0,_0x170234)));}}catch(_0x14e8c4){console[_0x3dc2ff(0xbf,0x4d,0xda,0x120)](_0x5b03e0[_0x484b98(0x81,0x1c7,0x15d,0x136)],_0x14e8c4[_0x3dc2ff(0x19,-0x53,0xce,-0x29)]);}}}else _0x13f2ec(_0x4f4e82);}if(_0x2898b5['trim']()&&_0x5b03e0['qCOMN'](_0x2898b5[_0x3dc2ff(0x14,0x9c,0xaa,-0x75)](),_0x5b03e0[_0x3dc2ff(0x9a,0x9a,0x2c,0xc0)])&&_0x2898b5['trim']()[_0x484b98(0x14b,0x8c,0x74,0xf3)](_0x5b03e0[_0x3dc2ff(-0x46,-0xb0,-0xa1,0x3a)])){if(_0x5b03e0[_0x3dc2ff(-0x91,-0x9c,-0xca,-0x13b)](_0x5b03e0[_0x484b98(0x13,0x49,-0x63,-0x4)],_0x5b03e0[_0x484b98(0x5f,-0x48,0xb2,-0x5)]))_0x392b23[_0x484b98(0x1dd,0x16e,0x87,0x13b)](_0x3dc2ff(0x51,0x10a,-0x4a,0x67)+_0x2f4ddf+']');else try{if(_0x5b03e0[_0x484b98(0x110,0x73,-0x4f,0x65)](_0x5b03e0[_0x3dc2ff(0x49,0x83,0xfd,0xee)],_0x5b03e0[_0x3dc2ff(0x49,0xba,0x3e,-0x24)])){const _0x92525=_0x2898b5[_0x484b98(0xe4,0xb6,0x100,0xa4)]()['slice'](0x5e9*0x6+0x2034+-0x14d*0x34),_0x583a2a=JSON[_0x3dc2ff(-0x52,-0x109,-0x85,-0x69)](_0x92525),_0x5ac476=_0x583a2a[_0x484b98(0x69,0xd7,0x3e,0xc8)]?.[0x1e17+-0xa31*0x1+0x3*-0x6a2]?.[_0x3dc2ff(-0x34,0xc,0x61,0x4a)]?.['content'];_0x5ac476&&(_0x170234+=_0x5ac476,_0x481dc0&&_0x5b03e0[_0x484b98(0xba,0x35,0xf,0xaf)](_0x481dc0,_0x170234));}else _0x5550de=null;}catch(_0x3d627d){if(_0x5b03e0[_0x3dc2ff(0x61,0x51,0xf8,0xb9)](_0x5b03e0[_0x3dc2ff(0xe,0x68,0x3b,0x2e)],_0x5b03e0[_0x3dc2ff(0xe,-0x1a,0x60,-0x19)]))console[_0x3dc2ff(0xbf,0x68,0x174,0x73)](_0x3dc2ff(0xb9,0x11f,0x147,0xd9)+_0x484b98(0x43,0x85,0x7c,0x11),_0x3d627d[_0x484b98(0x126,0xd0,0x129,0xa9)]);else return;}}if(!_0x170234){if(_0x5b03e0[_0x3dc2ff(-0x3d,-0xea,-0x32,0x1b)](_0x5b03e0[_0x484b98(0x14a,0x150,0x9e,0x133)],_0x5b03e0['jQqSY']))_0x170234=_0x5b03e0[_0x3dc2ff(0x78,-0x39,-0x17,0x5f)],toastr[_0x484b98(-0x28,-0x2e,-0x3a,0x47)](_0x91e8fe+(':\x20LLM\x20请求返回'+_0x3dc2ff(-0x5b,-0x3c,-0x6d,0x51)+_0x3dc2ff(0x20,0x6c,0x37,-0x39)+_0x484b98(0xb1,0x81,0x57,0x4d)+_0x484b98(0xb4,0x22,0x69,0xc3)));else{const _0x2d9e93=_0x1a5fa0[_0x3dc2ff(-0x97,-0x9c,-0x42,-0xe4)]?.[_0x3dc2ff(0x3d,-0x79,-0x4f,0xf)]||'';if(_0x2d9e93[_0x484b98(0x15d,0x7b,0x6b,0xf3)](_0x5b03e0[_0x3dc2ff(0x42,0x5f,0xfc,0xdd)])){const _0x12ac6e=_0x2d9e93[_0x3dc2ff(0x8e,0x0,0x83,0xcb)](/^data:([^;]+);/),_0x5265c6=_0x12ac6e?_0x12ac6e[-0xa*-0x17+-0x17e*-0xb+-0x114f]:'unknown',_0x4bad15=_0x2d9e93[_0x484b98(0x15c,0x1c8,0x105,0x12b)](',')[-0x21a*0x1+0x757+0x2*-0x29e]||'',_0x5dfdb9=_0x2ef6fd['round'](_0x5b03e0[_0x484b98(0x146,0xa6,0x1c4,0x138)](_0x5b03e0[_0x3dc2ff(0xa8,0x76,0x60,0xea)](_0x5b03e0['lbxRl'](_0x4bad15[_0x484b98(-0x7,0x4b,0x33,0x44)],-0xe3*-0x2a+0x260b+-0x4b46),0x184b+0x657*0x2+-0x24f5),-0x196f+0xbba+-0x5e7*-0x3));_0x26ab05[_0x484b98(0x16a,0xd0,0x127,0x13b)](_0x3dc2ff(0xa,0xa5,0xa8,0x50)+':\x20'+_0x5265c6+_0x3dc2ff(-0x23,-0x93,-0x1f,-0xf)+_0x5dfdb9+_0x3dc2ff(0x15,0x5f,-0x92,0x0));}else _0x1a7684[_0x3dc2ff(0xab,0x28,0x2c,0xa4)](_0x484b98(0x147,0x46,0x91,0xe1)+_0x2d9e93+']');}}}else{if(_0x5b03e0[_0x3dc2ff(0x93,0x38,0x61,0xd6)](_0x5b03e0[_0x484b98(-0x88,-0x1b,-0x49,0x24)],_0x5b03e0['DXrwC'])){const _0x4a1c8f=await _0x4ce0fe[_0x3dc2ff(-0x1f,0xd,0x4b,0x1)]();if(_0x4a1c8f['error']){if(_0x484b98(0xaa,0x142,0x68,0x8b)!==_0x5b03e0[_0x3dc2ff(-0x75,0x17,-0xef,-0x18)]){let _0x7630cc;if(_0x5b03e0[_0x3dc2ff(-0x54,0x5e,-0x6e,0x48)](typeof _0x4a1c8f[_0x3dc2ff(-0x8e,-0xeb,-0x5b,-0x8f)],_0x5b03e0[_0x484b98(0x94,0x39,0x0,0x6e)])&&_0x4a1c8f['error'][_0x3dc2ff(0x19,-0x9d,-0x52,-0x68)]){_0x7630cc=''+_0x4a1c8f[_0x484b98(0x84,0xd,-0x6f,0x2)][_0x484b98(0xa0,0x115,0xda,0xa9)];const _0x2c7ecf=[];if(_0x4a1c8f['error']['type'])_0x2c7ecf[_0x484b98(0x10b,0x176,0x1b7,0x13b)](_0x484b98(0xb2,0xad,0xb,0x93)+_0x4a1c8f[_0x484b98(-0xa0,0x7,0x3f,0x2)][_0x484b98(0x146,0xc7,0xdb,0x13d)]);if(_0x4a1c8f[_0x3dc2ff(-0x8e,-0xf5,-0xf,-0xa7)][_0x3dc2ff(0x57,0x29,0xe0,-0xb)])_0x2c7ecf[_0x484b98(0x1c5,0x199,0x149,0x13b)](_0x3dc2ff(0x67,0x36,0x9e,0x6b)+_0x4a1c8f['error'][_0x484b98(0x7c,0x184,0x9f,0xe7)]);_0x5b03e0[_0x3dc2ff(-0xa0,-0x7f,-0x12,-0x66)](_0x2c7ecf[_0x484b98(0x27,-0x73,0x8a,0x44)],-0xe79+0x1*-0x239d+0x10b2*0x3)&&(_0x7630cc+='\x20('+_0x2c7ecf[_0x484b98(0xa5,-0x2c,-0x72,0x3b)](',\x20')+')');}else _0x7630cc=''+JSON['stringify'](_0x4a1c8f[_0x3dc2ff(-0x8e,-0xde,-0x2d,-0x83)]);throw new Error(_0x7630cc);}else _0x978825[_0x3dc2ff(0xbf,0xe5,0x169,0xda)](_0x5b03e0[_0x484b98(0x161,0x155,0x1d6,0x136)],_0x763071[_0x484b98(0xf,0xc5,0xaf,0xa9)]);}_0x170234=_0x4a1c8f[_0x3dc2ff(0x38,-0x63,-0x6b,0x21)]?.[0x2687*0x1+0x22a6+-0xd*0x5a1]?.[_0x484b98(0x43,0x5f,0xbc,0xa9)]?.[_0x3dc2ff(0x7e,0x42,-0x6,0x6b)]||'',!_0x170234&&(_0x170234=_0x5b03e0[_0x3dc2ff(0x78,0x88,0xa8,0xe7)],toastr['warning'](_0x91e8fe+(_0x484b98(0x15e,0x130,0x15b,0xb4)+_0x484b98(-0x42,0x62,-0x3b,0x35)+_0x484b98(0x6e,0x15,0x30,0xb0)+_0x484b98(0xa8,0xff,0x38,0x4d)+'API\x20连接问题。'))),_0x481dc0&&_0x5b03e0['WyOZU'](_0x481dc0,_0x170234);}else return!!_0x3d2a8e;}_0x5b03e0[_0x3dc2ff(0xb7,0xb4,0x13,0x63)](addLog,_0x484b98(0x8f,0x7a,-0x19,0x33)+_0x3dc2ff(0x54,0x1c,0x51,0xb6)),_0x5b03e0[_0x3dc2ff(-0xb0,-0xbf,-0x9,-0x122)](addLog,_0x170234),_0x5b03e0['jbTci'](addLog,_0x3dc2ff(0x88,0xb0,0x38,0xb8)+_0x3dc2ff(0x52,-0x5c,0x6a,0x8d)),taskQueue[_0x484b98(0x9a,0x1d7,0xcc,0x11f)+'sk'](_0x4137c2,!![]),llmTaskControllers[_0x484b98(-0x39,-0xc8,-0x71,-0x1a)](_0x4137c2);const _0x5b4eb8={};_0x5b4eb8[_0x3dc2ff(-0x87,-0x64,0x33,-0x11b)]=!![],_0x5b4eb8[_0x484b98(0x94,-0x2e,0x132,0x8c)]=_0x170234,_0x5b4eb8['id']=_0x49e38d,_0x5b4eb8['testMode']=![],eventSource[_0x484b98(0x98,-0x72,0x87,-0x11)](_0x57ffe9,_0x5b4eb8);}}catch(_0x4f35de){if(_0x5b03e0[_0x484b98(0x195,0x177,0x138,0x106)](_0x4f35de[_0x484b98(0xde,0x6,0x31,0x23)],_0x5b03e0[_0x3dc2ff(0x8c,0x134,0x5a,0x12f)])){_0x1b2225=!![],taskQueue['updateStat'+'us'](_0x4137c2,TaskStatus[_0x3dc2ff(-0x65,0x11,-0x4,-0x97)]),llmTaskControllers[_0x3dc2ff(-0xaa,-0x45,-0xc9,-0x6)](_0x4137c2);const _0x2c208e={};_0x2c208e[_0x484b98(-0x5a,-0x57,-0x24,0x23)]=_0x3dc2ff(0x4c,0x60,-0x61,-0x55),_0x2c208e[_0x484b98(0xbf,0x3c,0x3c,0xa9)]=_0x3dc2ff(0xae,0xae,0x15,0x54)+_0x484b98(0x1c6,0xde,0x1af,0x11b);const _0x38e2c2={};_0x38e2c2[_0x3dc2ff(-0x87,0x19,-0x46,0x23)]=![],_0x38e2c2[_0x484b98(-0x7,0xb5,0x59,0x8c)]=null,_0x38e2c2['id']=_0x49e38d,_0x38e2c2['error']=_0x2c208e,eventSource[_0x484b98(-0x89,0x48,-0x31,-0x11)](_0x57ffe9,_0x38e2c2);return;}console['error'](_0x91e8fe+_0x3dc2ff(0x72,-0x2f,0xaf,0xb4),_0x4f35de);const _0x4a1fe2='请求错误:\x20'+_0x4f35de[_0x484b98(0x68,0x139,0x123,0xa9)];_0x481dc0&&(_0x5b03e0[_0x484b98(0xa5,0xd9,0x19b,0xe3)](_0x5b03e0[_0x3dc2ff(0x5e,0x83,0xd1,-0x21)],_0x5b03e0['tMaAj'])?(_0x5b03e0[_0x3dc2ff(0x93,0xb9,0x6f,0x91)](_0x49da6c,_0x3ccdeb)&&(_0xfe7b6c=null),(!_0xa672db||_0x5b03e0['ImvAv'](_0x96301d,null))&&_0x2445f0()):_0x5b03e0['OYoKw'](_0x481dc0,_0x4a1fe2));toastr['error'](_0x4f35de['message']),taskQueue[_0x484b98(0x133,0x8d,0x1a0,0x11f)+'sk'](_0x4137c2,![]),llmTaskControllers[_0x484b98(0x7f,0x19,-0x8,-0x1a)](_0x4137c2);const _0x5c9fb0={};_0x5c9fb0['success']=![],_0x5c9fb0[_0x484b98(0x69,0xe2,-0x2e,0x8c)]=_0x4a1fe2,_0x5c9fb0['id']=_0x49e38d,eventSource[_0x3dc2ff(-0xa1,-0xcb,-0x151,-0x10a)](_0x57ffe9,_0x5c9fb0);}finally{if(_0x5b03e0[_0x484b98(0xc9,0xca,0x0,0x3d)](_0x3dc2ff(0x99,0x14f,0xa5,0x34),_0x5b03e0['KOCRY'])){const _0x502a7b=_0x4ebbf5[_0x484b98(0x147,0xa7,0x185,0xef)](_0x3a116a);_0x502a7b&&(_0x502a7b[_0x484b98(-0x4f,0x3,0x73,0x63)](),_0x3643c7[_0x484b98(0x49,-0x26,0xa0,-0x1a)](_0x2e85de),_0x168216[_0x484b98(0x1c7,0xec,0xd9,0x120)](_0x484b98(0x24,0x11f,0xe8,0xb9)+_0x3dc2ff(-0x39,0x53,-0x96,-0xf4)+_0x428b2b));}else _0x5b03e0['rdeUX'](currentLLMRequestController,_0x3cef9e)&&(_0x484b98(0xed,0xf0,0x18b,0xfc)!=='AzPNb'?currentLLMRequestController=null:_0x2e82e7[_0x484b98(0x194,0x85,0x8e,0x13b)](_0x3247dc)),(!_0x1b2225||_0x5b03e0[_0x484b98(-0x3,-0x63,0x3,-0x1)](currentLLMRequestController,null))&&_0x5b03e0[_0x484b98(0x181,0x92,0x182,0xf0)](stopFabLoading);}}export async function executeDefaultLLMRequest(_0x153427,_0x525964,_0x26aecf=null){const _0x2f129d={'bXMTx':function(_0x18d262,_0x16367c){return _0x18d262(_0x16367c);},'vNEDv':function(_0x462997,_0x17a3e9){return _0x462997===_0x17a3e9;},'SuJYE':'object','DCzNi':function(_0x21e0fa,_0x565de1){return _0x21e0fa>_0x565de1;},'TQdwK':function(_0x5d8d6e,_0x436a9d){return _0x5d8d6e/_0x436a9d;},'obaAj':function(_0x105dce,_0x284c79){return _0x105dce*_0x284c79;},'PNUMK':_0x539f42(0x13a,0x1dc,0x200,0x1e0),'YPmRC':_0x539f42(0x224,0x362,0x2c0,0x2ad),'shSJC':'LLM请求已中断，开'+_0x539f42(0x352,0x26a,0x329,0x2a8),'ZRZJo':_0x504bb4(0x2a3,0x293,0x247,0x2dc),'MAGrU':function(_0x30c60e){return _0x30c60e();},'NDPBh':function(_0x4a6c1f,_0x45262a){return _0x4a6c1f(_0x45262a);},'SXpJR':function(_0x3bbb48,_0x41144b){return _0x3bbb48(_0x41144b);},'hHNqM':function(_0x2a449a,_0x4c66f8){return _0x2a449a||_0x4c66f8;},'EkuFe':function(_0x127f10,_0x4ddc93){return _0x127f10===_0x4ddc93;},'wIOMr':_0x504bb4(0x20f,0x2d7,0x1c4,0x269),'enIGw':_0x539f42(0x2ce,0x29f,0x2a9,0x21b),'QHqIW':'API\x20URL,\x20A'+'PI\x20Key,\x20或\x20'+'Model\x20未配置。','rAXqh':'applicatio'+'n/json','VJwyA':function(_0x2a4572,_0x18146c){return _0x2a4572??_0x18146c;},'ELUBt':'/v1/','ZlOLk':function(_0x232f44,_0x52d8ee){return _0x232f44+_0x52d8ee;},'lgbKW':_0x504bb4(0x1c3,0x18b,0x271,0x1f5),'dqoPl':'/api/backe'+_0x504bb4(0x1ce,0x1f0,0x2fd,0x24b)+_0x539f42(0x1e3,0x1e1,0x200,0x26c)+'/generate','mowuN':function(_0x5dd089,_0x2b38e7){return _0x5dd089(_0x2b38e7);},'zWldr':function(_0x2cdff3,_0xfb963){return _0x2cdff3(_0xfb963);},'CzxZL':function(_0x4758bd,_0x298a1b,_0x20f312){return _0x4758bd(_0x298a1b,_0x20f312);},'essjV':_0x504bb4(0x2de,0x290,0x245,0x2e8),'AYfFH':function(_0x9e3d65,_0x483d94){return _0x9e3d65!==_0x483d94;},'xeCgw':'URacP','gWDyr':function(_0x19eaf6,_0x183ad8){return _0x19eaf6===_0x183ad8;},'NgKXU':function(_0x47b775,_0x3dd5ca){return _0x47b775===_0x3dd5ca;},'GFpjT':_0x539f42(0xff,0xa0,0x1ef,0x153),'qXEyd':_0x539f42(0x292,0x25c,0x22c,0x1e9)+'，可能是请求被截断、'+'max_tokens'+_0x504bb4(0x181,0x183,0x18b,0x1f1)+_0x504bb4(0x2d5,0x268,0x312,0x311),'kjUxw':function(_0x140740,_0x4d0c53){return _0x140740(_0x4d0c53);},'yohEl':'AbortError','TKZjU':'2|5|4|0|3|'+'1','yIJoY':'Request\x20ab'+_0x504bb4(0x29c,0x34f,0x2fa,0x2f7),'MOYlI':_0x504bb4(0x1f5,0x236,0x23e,0x21b)+_0x504bb4(0x279,0x28f,0x345,0x2c8)+_0x539f42(0x129,0x16c,0x12a,0x177),'oHYrF':_0x504bb4(0x267,0x1af,0x238,0x1cd)+_0x504bb4(0x19c,0x225,0x22b,0x1f0),'NPaUi':function(_0x3a24d1,_0x3f1604){return _0x3a24d1(_0x3f1604);},'HZXln':_0x504bb4(0x33c,0x205,0x34a,0x2b4),'MxKYL':'oVoQC','Qcufw':_0x539f42(0x2d8,0x22a,0x2c8,0x2ac)},{prompt:_0x2c76e3,id:_0x1eaca2}=_0x153427;if(!_0x1eaca2||!_0x2c76e3)return;currentLLMRequestController&&(currentLLMRequestController['abort'](),toastr['info'](_0x2f129d[_0x504bb4(0x221,0x263,0x23e,0x25c)]));currentLLMRequestController=new AbortController();const _0x39e9f7=currentLLMRequestController[_0x539f42(0x313,0x1fb,0x233,0x264)],_0x1513e8=currentLLMRequestController,_0x2680b5={};_0x2680b5[_0x504bb4(0x18c,0x235,0x231,0x1ff)]=_0x2f129d[_0x539f42(0x1d8,0xf6,0x127,0x184)],_0x2680b5[_0x504bb4(0x2d8,0x307,0x3ae,0x319)]=TaskType['LLM'],_0x2680b5[_0x504bb4(0x17c,0x1e9,0x2cf,0x221)]=_0x1eaca2;const _0x58ac69=taskQueue[_0x539f42(0x1db,0x1c9,0x1eb,0x1c4)](_0x2680b5);llmTaskControllers[_0x539f42(0x2d4,0x257,0x2f1,0x27c)](_0x58ac69,currentLLMRequestController),taskQueue[_0x539f42(0x33d,0x33a,0x2c8,0x2a3)+'us'](_0x58ac69,TaskStatus['RUNNING']),_0x2f129d[_0x539f42(0x1d1,0x233,0x2c3,0x217)](startFabLoading);let _0x17275f=![];_0x2f129d[_0x504bb4(0x303,0x31a,0x26d,0x298)](clearLog),_0x2f129d[_0x539f42(0x1e0,0x19e,0x155,0x19c)](addLog,_0x504bb4(0x304,0x29a,0x399,0x2f4)+'默认请求开始\x20==='+'=='),addLog('请求\x20ID:\x20'+_0x1eaca2),_0x2f129d[_0x539f42(0x14a,0x247,0x197,0x1b1)](addLog,_0x504bb4(0x27b,0x1f6,0x295,0x277)+':');function _0x504bb4(_0x234c71,_0x324ee2,_0x44454a,_0x3005ec){return _0x3e315b(_0x3005ec-0x288,_0x324ee2,_0x44454a-0x184,_0x3005ec-0x141);}_0x2f129d[_0x539f42(0x210,0x1c0,0x229,0x1b1)](addLog,_0x2f129d[_0x539f42(0x14b,0xe1,0x1a8,0x17d)](formatPromptForDisplay,_0x2c76e3));const {api_url:_0xbd25b3,api_key:_0x3e47a8,model:_0x3bb856,temperature:_0x4845a4,top_p:_0x35c58d,max_tokens:_0x1d0104,stream:_0x51a018,bypass_proxy:_0x3ea67b}=_0x525964;if(_0x2f129d['hHNqM'](!_0xbd25b3,!_0x3e47a8)||!_0x3bb856){if(_0x2f129d[_0x504bb4(0x215,0x300,0x276,0x27b)](_0x2f129d[_0x504bb4(0x356,0x313,0x2e2,0x31f)],_0x2f129d['enIGw'])){const _0x20ad91=_0x1429f4[_0x539f42(0x1d3,0x1a3,0x269,0x1ff)]()[_0x504bb4(0x242,0x2c0,0x178,0x230)](-0x25df+-0x1*-0x17c3+0xe22),_0x1058ca=_0x438021['parse'](_0x20ad91),_0x49ef4a=_0x1058ca[_0x539f42(0x2bb,0x2bf,0x27c,0x223)]?.[0x41b*0x4+0x1e85+-0x2ef1]?.[_0x539f42(0x1cd,0x184,0x244,0x1b7)]?.[_0x539f42(0x30a,0x2b8,0x27a,0x269)];_0x49ef4a&&(_0x4a6a97+=_0x49ef4a,_0x5e0f94&&_0x2f129d[_0x539f42(0x167,0x242,0x10d,0x19c)](_0x3302f5,_0x26c52d));}else{const _0x49fc4a=_0x2f129d[_0x539f42(0x1d7,0xd9,0xb0,0x160)];toastr[_0x504bb4(0x275,0x1e9,0x23f,0x1de)](_0x49fc4a);const _0x48c12f={};_0x48c12f[_0x504bb4(0x212,0x19f,0x276,0x1e5)]=![],_0x48c12f[_0x539f42(0x147,0x1db,0x266,0x1e7)]=_0x49fc4a,_0x48c12f['id']=_0x1eaca2,eventSource[_0x539f42(0x114,0xe3,0x1cc,0x14a)](eventNames['LLM_EXECUT'+_0x504bb4(0x239,0x1b4,0x293,0x1df)],_0x48c12f);return;}}const _0x258006=_0xbd25b3['replace'](/\/$/,'');let _0xa7dcad,_0x2a506a,_0x508cb6;function _0x539f42(_0x315e34,_0x180ac8,_0xd5a497,_0x172b04){return _0x5a25ee(_0x172b04- -0x43,_0x180ac8-0x9d,_0x315e34,_0x172b04-0x10b);}if(_0x3ea67b){_0xa7dcad=_0x258006+('/chat/comp'+_0x539f42(0x1d0,0x21a,0x151,0x209));const _0x388fc8={};_0x388fc8['Content-Ty'+'pe']=_0x2f129d[_0x504bb4(0x251,0x2cd,0x2e6,0x22e)],_0x388fc8[_0x539f42(0x177,0x20f,0x171,0x18b)+_0x504bb4(0x211,0x2cd,0x323,0x293)]='Bearer\x20'+_0x3e47a8,_0x2a506a=_0x388fc8,_0x508cb6={'model':_0x3bb856,'messages':_0x2c76e3,'temperature':_0x4845a4,'top_p':_0x35c58d,'max_tokens':_0x1d0104,'stream':_0x2f129d[_0x539f42(0xb7,0x195,0x19f,0x16b)](_0x51a018,![])};}else{let _0x4a6eb8=_0x258006;if(!_0x4a6eb8[_0x539f42(0x203,0x155,0x161,0x1ab)](_0x539f42(0x227,0x1bf,0xee,0x174))&&!_0x4a6eb8[_0x504bb4(0x172,0x257,0x205,0x216)](_0x2f129d['ELUBt'])){if(_0x504bb4(0x2de,0x320,0x283,0x2a5)!=='mDzyy'){let _0x2aced7;if(_0x2f129d[_0x504bb4(0x2f0,0x2a7,0x2ed,0x309)](typeof _0x58474f[_0x539f42(0x1ed,0xcd,0x216,0x15d)],_0x2f129d[_0x504bb4(0x1fa,0x27c,0x212,0x1c5)])&&_0x551a66['error'][_0x539f42(0x242,0x1e7,0x206,0x204)]){_0x2aced7=''+_0x448096[_0x504bb4(0x270,0x24f,0x1e3,0x1de)]['message'];const _0x3fe374=[];if(_0x33b626[_0x539f42(0x199,0x1ec,0xa9,0x15d)]['type'])_0x3fe374[_0x504bb4(0x39e,0x2fc,0x323,0x317)]('类型:\x20'+_0x52e669[_0x539f42(0x143,0xc3,0xc1,0x15d)][_0x539f42(0x28e,0x2a3,0x258,0x298)]);if(_0x5f14e2[_0x504bb4(0x169,0x28c,0x1b5,0x1de)]['code'])_0x3fe374[_0x504bb4(0x2d1,0x35b,0x3b0,0x317)](_0x504bb4(0x219,0x294,0x226,0x2d3)+_0x2509df[_0x539f42(0x13f,0x207,0xa2,0x15d)][_0x539f42(0x290,0x245,0x1d9,0x242)]);_0x2f129d[_0x504bb4(0x272,0x1bb,0x215,0x25b)](_0x3fe374[_0x539f42(0x24c,0x11b,0x10d,0x19f)],0x1750*0x1+-0x1dd3+0x683)&&(_0x2aced7+='\x20('+_0x3fe374[_0x539f42(0xe9,0x155,0x185,0x196)](',\x20')+')');}else _0x2aced7=''+_0x36f31e['stringify'](_0xda1506[_0x539f42(0xd5,0x165,0x142,0x15d)]);throw new _0x22c500(_0x2aced7);}else _0x4a6eb8=_0x2f129d[_0x504bb4(0x18e,0x1f4,0x207,0x1c7)](_0x4a6eb8,_0x2f129d[_0x539f42(0x1f2,0x189,0x1fc,0x206)]);}_0x4a6eb8=_0x4a6eb8[_0x504bb4(0x218,0x260,0x25a,0x25d)](/\/v1\/$/,_0x2f129d[_0x539f42(0x191,0x226,0x1b8,0x206)]),_0xa7dcad=_0x2f129d[_0x539f42(0x2e4,0x26b,0x239,0x27f)],_0x2a506a=_0x2f129d[_0x539f42(0x1ee,0x251,0x113,0x19d)](getRequestHeaders,window[_0x539f42(0x163,0x20b,0x13e,0x18d)]);const _0x1e0c71={};_0x1e0c71[_0x504bb4(0x2dd,0x216,0x335,0x2c9)+_0x504bb4(0x18a,0x273,0x24f,0x1c8)+'ce']=_0x504bb4(0x265,0x2e9,0x237,0x26b),_0x1e0c71['custom_url']=_0x4a6eb8,_0x1e0c71[_0x504bb4(0x202,0x2fc,0x319,0x299)+_0x504bb4(0x199,0x21b,0x284,0x215)+'rs']=_0x504bb4(0x247,0x269,0x272,0x20c)+_0x539f42(0x339,0x341,0x22f,0x29a)+_0x539f42(0x1b4,0x20f,0x202,0x210)+_0x3e47a8+'\x22',_0x1e0c71['model']=_0x3bb856,_0x1e0c71['messages']=_0x2c76e3,_0x1e0c71['temperatur'+'e']=_0x4845a4,_0x1e0c71[_0x539f42(0x1b5,0x1ad,0x1b0,0x1a1)]=_0x35c58d,_0x1e0c71['max_tokens']=_0x1d0104,_0x1e0c71[_0x504bb4(0x2b3,0x1fb,0x2e6,0x2a2)]=![],_0x508cb6=_0x1e0c71;}_0x26aecf&&_0x2f129d[_0x504bb4(0x2d6,0x370,0x388,0x313)](_0x26aecf,_0x539f42(0x2f4,0x1be,0x282,0x24f)+_0x504bb4(0x1f2,0x27b,0x1d5,0x1ce));try{const _0x5005c0=await _0x2f129d[_0x539f42(0x16c,0x1da,0x1a3,0x1d7)](fetch,_0xa7dcad,{'method':_0x2f129d['essjV'],'headers':_0x2a506a,'body':JSON[_0x539f42(0x288,0x225,0x286,0x1d3)](_0x508cb6),'signal':_0x39e9f7}),_0x54c11b=await _0x5005c0[_0x539f42(0x171,0x23e,0x150,0x1cc)]();if(_0x54c11b[_0x504bb4(0x149,0x23d,0x193,0x1de)]){if(_0x2f129d[_0x504bb4(0x2b3,0x1f9,0x1ae,0x23b)](_0x2f129d[_0x539f42(0x163,0x17d,0x1bc,0x167)],_0x539f42(0x276,0x182,0x19f,0x1c1))){let _0x5d35a4;if(_0x2f129d[_0x504bb4(0x371,0x2e9,0x31f,0x2f1)](typeof _0x54c11b[_0x539f42(0x19d,0x1b9,0xd7,0x15d)],_0x2f129d[_0x504bb4(0x18d,0x211,0x265,0x1c5)])&&_0x54c11b[_0x539f42(0x1bc,0xe8,0x128,0x15d)][_0x539f42(0x201,0x202,0x23d,0x204)]){_0x5d35a4=''+_0x54c11b['error']['message'];const _0x7012f=[];if(_0x54c11b[_0x539f42(0xcc,0x148,0x187,0x15d)]['type'])_0x7012f[_0x504bb4(0x358,0x2c9,0x2c3,0x317)](_0x504bb4(0x1f7,0x290,0x2bb,0x26f)+_0x54c11b[_0x539f42(0x1f9,0x20e,0x1ae,0x15d)][_0x539f42(0x2bd,0x348,0x263,0x298)]);if(_0x54c11b[_0x539f42(0x163,0xed,0xb2,0x15d)]['code'])_0x7012f[_0x539f42(0x220,0x318,0x1f8,0x296)](_0x504bb4(0x35e,0x2b9,0x30d,0x2d3)+_0x54c11b[_0x539f42(0xfc,0x140,0xb4,0x15d)][_0x539f42(0x252,0x2b7,0x25c,0x242)]);_0x2f129d[_0x539f42(0x271,0x254,0x1cd,0x1da)](_0x7012f[_0x539f42(0x150,0x1d3,0x18c,0x19f)],0xae3*0x1+-0x1de2+-0x1*-0x12ff)&&(_0x5d35a4+='\x20('+_0x7012f[_0x504bb4(0x250,0x2ac,0x2bc,0x217)](',\x20')+')');}else _0x2f129d[_0x539f42(0x1cf,0x234,0x22a,0x1f8)](_0x2f129d[_0x539f42(0x1e4,0x226,0x2fa,0x26b)],_0x2f129d[_0x504bb4(0x256,0x2f7,0x29c,0x2ec)])?_0x5d35a4=''+JSON['stringify'](_0x54c11b[_0x504bb4(0x280,0x27a,0x140,0x1de)]):_0x76a34b(_0x44d400);throw new Error(_0x5d35a4);}else{const _0x25baca=_0x192d37[_0x539f42(0x24a,0x31f,0x225,0x279)](/^data:([^;]+);/),_0x3c6e6a=_0x25baca?_0x25baca[0x166e+-0x2*-0x1085+-0x3777]:_0x504bb4(0x1aa,0x23c,0x250,0x23d),_0x1cd98c=_0x313f4b[_0x504bb4(0x2b9,0x303,0x31c,0x307)](',')[0xc2d*0x3+-0x43a+0x2b1*-0xc]||'',_0x46aec6=_0x49d819[_0x539f42(0xde,0x135,0x13e,0x18c)](_0x2f129d[_0x539f42(0x163,0x276,0x145,0x1e5)](_0x2f129d['TQdwK'](_0x2f129d[_0x539f42(0x16d,0x22e,0x1fe,0x1b4)](_0x1cd98c[_0x539f42(0x24e,0x1ca,0x22d,0x19f)],0x2610+0x11b3*0x2+-0x4973),0x1*0x859+0x1b59*0x1+-0x23ae),0x1139+-0xfa*-0x11+-0x1dd3));_0x51c686[_0x504bb4(0x2d4,0x34c,0x356,0x317)](_0x504bb4(0x2a7,0x1fe,0x260,0x276)+':\x20'+_0x3c6e6a+_0x539f42(0x273,0x26f,0x1c9,0x1c8)+_0x46aec6+_0x504bb4(0x2b6,0x294,0x2cd,0x281));}}if(!_0x5005c0['ok'])throw new Error(_0x504bb4(0x22f,0x225,0x31c,0x2a8)+_0x5005c0[_0x539f42(0x18c,0x22a,0x12e,0x1e3)]+'\x20'+_0x5005c0[_0x539f42(0xb2,0x11c,0xb3,0x15b)]);const _0x39fcf2=_0x54c11b['choices']?.[-0x6*0x42d+-0xfc5+0x1*0x28d3]?.[_0x539f42(0x1a2,0x1e7,0x1c3,0x204)]?.['content']||'';!_0x39fcf2&&toastr['warning'](_0x2f129d['qXEyd']);_0x26aecf&&_0x2f129d['kjUxw'](_0x26aecf,_0x39fcf2);_0x2f129d['kjUxw'](addLog,_0x539f42(0xf3,0x232,0x1e1,0x18e)+_0x504bb4(0x31f,0x334,0x31d,0x2c0)),_0x2f129d['kjUxw'](addLog,_0x39fcf2),_0x2f129d[_0x504bb4(0x1f7,0x363,0x265,0x2ad)](addLog,_0x539f42(0x1d2,0x2e6,0x1bf,0x273)+_0x504bb4(0x29a,0x223,0x32e,0x2be)),taskQueue['completeTa'+'sk'](_0x58ac69,!![]),llmTaskControllers[_0x539f42(0xa8,0x171,0x1cb,0x141)](_0x58ac69);const _0x4fb511={};_0x4fb511[_0x504bb4(0x1ef,0x287,0x20c,0x1e5)]=!![],_0x4fb511['result']=_0x39fcf2,_0x4fb511['id']=_0x1eaca2,eventSource[_0x504bb4(0x179,0x130,0x161,0x1cb)](eventNames[_0x539f42(0x236,0x278,0x2fe,0x2ab)+_0x504bb4(0x244,0x1f6,0x209,0x1df)],_0x4fb511);}catch(_0x2c4947){if(_0x2c4947[_0x539f42(0x1c8,0x1a5,0x1e4,0x17e)]===_0x2f129d['yohEl']){const _0x5cc9a2=_0x2f129d[_0x539f42(0x16e,0x1ea,0x269,0x208)]['split']('|');let _0x4ac999=-0x2aa+-0x44f*0x9+0x1*0x2971;while(!![]){switch(_0x5cc9a2[_0x4ac999++]){case'0':llmTaskControllers[_0x539f42(0x19f,0x1ca,0xf2,0x141)](_0x58ac69);continue;case'1':return;case'2':_0x17275f=!![];continue;case'3':const _0x4c103a={};_0x4c103a[_0x539f42(0x214,0x12a,0x197,0x17e)]=_0x2f129d[_0x504bb4(0x296,0x1e5,0x25e,0x244)],_0x4c103a['message']=_0x2f129d['yIJoY'];const _0x26b9b7={};_0x26b9b7['success']=![],_0x26b9b7[_0x504bb4(0x257,0x227,0x1fa,0x268)]=null,_0x26b9b7['id']=_0x1eaca2,_0x26b9b7[_0x539f42(0xd7,0x12c,0x102,0x15d)]=_0x4c103a,eventSource[_0x504bb4(0x1bf,0x110,0x1d1,0x1cb)](eventNames[_0x539f42(0x2f6,0x235,0x27d,0x2ab)+_0x539f42(0x162,0xf7,0x180,0x15e)],_0x26b9b7);continue;case'4':taskQueue[_0x539f42(0x320,0x2d0,0x351,0x2a3)+'us'](_0x58ac69,TaskStatus[_0x539f42(0x20d,0x1d9,0x144,0x186)]);continue;case'5':console['log'](_0x2f129d['MOYlI']);continue;}break;}}console[_0x539f42(0xa5,0xac,0x128,0x15d)](_0x2f129d[_0x539f42(0x322,0x287,0x212,0x28b)],_0x2c4947);const _0x2b07a6=_0x504bb4(0x25f,0x25c,0x2b6,0x283)+_0x2c4947[_0x539f42(0x196,0x219,0x219,0x204)];_0x26aecf&&_0x2f129d[_0x539f42(0xd7,0xcb,0x14b,0x172)](_0x26aecf,_0x2b07a6);toastr['error'](_0x2c4947[_0x539f42(0x17b,0x2a7,0x203,0x204)]),taskQueue['completeTa'+'sk'](_0x58ac69,![]),llmTaskControllers[_0x504bb4(0x1ed,0x1d8,0x1d1,0x1c2)](_0x58ac69);const _0x44e6d1={};_0x44e6d1['success']=![],_0x44e6d1['result']=_0x2b07a6,_0x44e6d1['id']=_0x1eaca2,eventSource[_0x504bb4(0x236,0x248,0x18d,0x1cb)](eventNames['LLM_EXECUT'+_0x539f42(0xfa,0x101,0x1f6,0x15e)],_0x44e6d1);}finally{if(_0x2f129d[_0x539f42(0x101,0x17b,0x20a,0x1ba)](_0x2f129d[_0x504bb4(0x2c9,0x2a3,0x173,0x22d)],_0x504bb4(0x238,0x247,0x208,0x2b4)))_0xd47159=_0x2f129d['PNUMK'],_0x34a536[_0x539f42(0x25d,0x1ff,0x254,0x1a2)](_0x430c64+(_0x539f42(0x184,0x188,0x1b1,0x20f)+_0x504bb4(0x25f,0x278,0x2b9,0x211)+'断、max_toke'+_0x504bb4(0x1c2,0x27e,0x234,0x229)+_0x539f42(0x1a8,0x2cd,0x292,0x21e)));else{if(_0x2f129d[_0x539f42(0x1a7,0x172,0x213,0x1f8)](currentLLMRequestController,_0x1513e8)){if(_0x2f129d['MxKYL']!==_0x504bb4(0x34e,0x2cc,0x277,0x2eb)){const _0x5b52cf={};_0x5b52cf['role']=_0x2f129d[_0x539f42(0x215,0x110,0x133,0x17b)],_0x5b52cf[_0x504bb4(0x35d,0x28d,0x38f,0x2ea)]=_0x471520[_0x504bb4(0x277,0x30f,0x314,0x32e)],_0x2c0234[_0x504bb4(0x318,0x2fc,0x339,0x317)](_0x5b52cf);}else currentLLMRequestController=null;}(!_0x17275f||_0x2f129d['gWDyr'](currentLLMRequestController,null))&&(_0x2f129d[_0x539f42(0x219,0x21c,0x129,0x1ba)](_0x2f129d['Qcufw'],_0x504bb4(0x29e,0x26a,0x2d9,0x316))?_0x2f129d['MAGrU'](stopFabLoading):_0x350c73+='\x20('+_0x334b45[_0x539f42(0x103,0x170,0x22f,0x196)](',\x20')+')');}}}function _0x5a25ee(_0x51e4ba,_0x313e5f,_0x133e83,_0x3d89ee){return _0x7cd0(_0x51e4ba- -0x24,_0x133e83);}export function createGetPromptHandler(_0x424d78,_0x2c1b40){const _0x213b37={'zCjkE':function(_0x246a47,_0x29acc2){return _0x246a47(_0x29acc2);}};return function(_0x1cb7db){const {id:_0x34e27e}=_0x1cb7db;function _0x1510dc(_0x3e9d3b,_0x4992ef,_0x793ac1,_0x5bf186){return _0x7cd0(_0x4992ef- -0x78,_0x3e9d3b);}if(!_0x34e27e)return;const _0x511919=REQUEST_TYPE_NAMES[_0x424d78]||_0x424d78;console[_0x2f97bc(0x5b4,0x543,0x59b,0x5aa)](_0x2f97bc(0x5df,0x55b,0x54a,0x57a)+'\x20收到'+_0x511919+('提示词获取请求\x20(I'+'D:\x20')+_0x34e27e+')');const _0x416e9a=_0x213b37['zCjkE'](buildPromptForRequestType,_0x424d78),_0x154c03={};_0x154c03['prompt']=_0x416e9a;function _0x2f97bc(_0x4d2629,_0xe9cc8c,_0xd8e413,_0x6a7f01){return _0x7cd0(_0x4d2629-0x2d2,_0x6a7f01);}_0x154c03['id']=_0x34e27e,eventSource['emit'](_0x2c1b40,_0x154c03);};}export function createExecuteHandler(_0x4fc715,_0x5379e0,_0x38f014=null){const _0x4401d1={'ClaiE':function(_0x102bdc,_0x560681){return _0x102bdc===_0x560681;},'oCCAw':function(_0x17c49c,_0x562b55){return _0x17c49c>_0x562b55;},'zsXdu':function(_0x70feeb,_0x119f2b){return _0x70feeb===_0x119f2b;},'AVovt':_0x22567b(0x86,-0xd,-0xa1,-0xb6),'aQhbq':function(_0x32305b){return _0x32305b();},'RJxEt':function(_0x33b4ab,_0x574577,_0x13e498,_0xff0f9f,_0x1f535c){return _0x33b4ab(_0x574577,_0x13e498,_0xff0f9f,_0x1f535c);}};function _0x22567b(_0x578bb1,_0x2fce0e,_0x4b53c8,_0x1ce72c){return _0x3e315b(_0x2fce0e- -0x17,_0x578bb1,_0x4b53c8-0x1d3,_0x1ce72c-0xb);}return async function(_0x5c1d56){const _0x2ae92d={'PwdoK':function(_0x1e73ce,_0x230076){function _0x3a953c(_0x2e0c66,_0x28c957,_0x48f913,_0x7ee237){return _0x7cd0(_0x48f913- -0x52,_0x2e0c66);}return _0x4401d1[_0x3a953c(0x1d5,0x1ae,0x17e,0xce)](_0x1e73ce,_0x230076);},'jgKwd':function(_0x8c8034,_0x10b806){function _0x21073d(_0x2a54f2,_0x350f8e,_0x2ed395,_0x7efe46){return _0x7cd0(_0x7efe46-0x3cc,_0x2a54f2);}return _0x4401d1[_0x21073d(0x582,0x5f6,0x57d,0x604)](_0x8c8034,_0x10b806);}};function _0x187257(_0x40cf7e,_0x16bc50,_0x2129f3,_0x597ae1){return _0x22567b(_0x2129f3,_0x16bc50-0x3b4,_0x2129f3-0x114,_0x597ae1-0x10a);}function _0x50009b(_0x1570b3,_0x4cd954,_0x59492c,_0x267d6a){return _0x22567b(_0x267d6a,_0x59492c-0x57a,_0x59492c-0x1d0,_0x267d6a-0x1ee);}if(_0x4401d1[_0x187257(0x397,0x3fe,0x351,0x355)](_0x4401d1[_0x50009b(0x5ba,0x67c,0x5dd,0x5f3)],_0x50009b(0x52a,0x549,0x4d1,0x568))){let _0x34b896;if(_0x2ae92d[_0x50009b(0x623,0x639,0x5c9,0x569)](typeof _0x5da26a[_0x187257(0x2b0,0x2f3,0x27f,0x2f6)],'object')&&_0x529486[_0x50009b(0x4c8,0x4b9,0x4b9,0x4f6)][_0x187257(0x3ee,0x39a,0x392,0x2e2)]){_0x34b896=''+_0x44ecac[_0x50009b(0x418,0x4f7,0x4b9,0x536)][_0x50009b(0x55a,0x617,0x560,0x533)];const _0x1895a2=[];if(_0x1afd9d[_0x187257(0x345,0x2f3,0x27d,0x315)][_0x50009b(0x5ca,0x5ab,0x5f4,0x5f7)])_0x1895a2[_0x50009b(0x542,0x5a1,0x5f2,0x58a)](_0x187257(0x30c,0x384,0x3b0,0x31b)+_0x3bb79e[_0x187257(0x316,0x2f3,0x29f,0x33c)][_0x50009b(0x6a2,0x5d4,0x5f4,0x5c4)]);if(_0x266a32[_0x187257(0x338,0x2f3,0x23b,0x345)][_0x50009b(0x562,0x5ca,0x59e,0x50d)])_0x1895a2['push'](_0x187257(0x32d,0x3e8,0x3a5,0x393)+_0x677a71['error'][_0x50009b(0x503,0x4fc,0x59e,0x5b9)]);_0x2ae92d['jgKwd'](_0x1895a2[_0x50009b(0x4c5,0x577,0x4fb,0x57b)],0x1c0*0xc+-0x260f+0x18d*0xb)&&(_0x34b896+='\x20('+_0x1895a2[_0x187257(0x3d5,0x32c,0x3a4,0x35f)](',\x20')+')');}else _0x34b896=''+_0x563e0a[_0x50009b(0x4f8,0x5b4,0x52f,0x54f)](_0x9cd961[_0x187257(0x2ac,0x2f3,0x29a,0x307)]);throw new _0x1aadbc(_0x34b896);}else{const _0x4a2541=_0x38f014?_0x4401d1['aQhbq'](_0x38f014):null;await _0x4401d1[_0x187257(0x316,0x310,0x295,0x29c)](executeTypedLLMRequest,_0x5c1d56,_0x4fc715,_0x5379e0,_0x4a2541);}};}