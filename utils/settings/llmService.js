(function(_0x2c2762,_0x59e448){function _0x46f462(_0x26681d,_0x11cafc,_0x3b93db,_0x325437){return _0x11f9(_0x325437- -0x1f0,_0x11cafc);}function _0x43a63e(_0x44c5b7,_0x2d8db6,_0x4a8431,_0x4f9028){return _0x11f9(_0x2d8db6- -0x27b,_0x44c5b7);}const _0x44bd12=_0x2c2762();while(!![]){try{const _0x1c598d=-parseInt(_0x43a63e(0x21,-0x2f,-0xc2,-0x5e))/(-0x127*0x8+0x1*0x84b+0xee)*(-parseInt(_0x43a63e(-0x11e,-0x54,0xe,-0xfd))/(0x2*0x641+0xaae+-0x172e))+parseInt(_0x46f462(0x19a,0x78,0x14f,0x140))/(0x3e1+-0x25ce+0x21f0)+parseInt(_0x46f462(0x5a,0x9e,0xb5,0x0))/(-0x27b*-0xb+0x8d+-0x1bd2)*(parseInt(_0x43a63e(-0x128,-0x77,-0x121,0xf))/(0x1834+0xd87+-0x25b6))+parseInt(_0x46f462(0x85,0xd7,0x75,0x11c))/(0x118*0xb+0x18d0+0x623*-0x6)+parseInt(_0x46f462(0x60,0x7,0x85,0x20))/(0xf*-0x68+0x563+0x5e*0x2)*(parseInt(_0x43a63e(0x133,0xa1,0x115,0x24))/(-0x2*0x1042+-0x4*0x20f+0x28c8))+parseInt(_0x46f462(0x88,0x4f,0x31,0xc))/(-0x115b+0x6dd+0xa87)*(parseInt(_0x43a63e(0x3f,0xc9,0x155,0x16))/(-0x53b*0x7+0x97*-0x31+0x418e))+-parseInt(_0x46f462(0x1c5,0x71,0x8b,0x113))/(0x3*-0x713+-0x4*-0x9b+0x3*0x648);if(_0x1c598d===_0x59e448)break;else _0x44bd12['push'](_0x44bd12['shift']());}catch(_0x1582e7){_0x44bd12['push'](_0x44bd12['shift']());}}}(_0x1f4b,0x14612*0x7+0x121f9*0x5+-0x76bd3*0x1));const _0x4d6ab7=(function(){const _0x405d4c={};function _0x5d64bf(_0x269ffa,_0x12ce0e,_0x223b9a,_0x2dc04c){return _0x11f9(_0x223b9a-0x149,_0x2dc04c);}function _0x3c97d5(_0x25aad0,_0x1297d2,_0x3f8818,_0x62cca8){return _0x11f9(_0x1297d2- -0x288,_0x3f8818);}_0x405d4c[_0x5d64bf(0x4a5,0x3cd,0x439,0x495)]=function(_0x279811,_0x5189f9){return _0x279811===_0x5189f9;},_0x405d4c[_0x5d64bf(0x3e3,0x44d,0x3d2,0x3ef)]=_0x5d64bf(0x36d,0x36a,0x3f6,0x474);const _0x2886fc=_0x405d4c;let _0x4ebd29=!![];return function(_0xf799ba,_0x15e5aa){function _0x5b17f0(_0x534a43,_0x1f2ad3,_0x14d538,_0x5de647){return _0x3c97d5(_0x534a43-0x14e,_0x5de647-0x5fd,_0x1f2ad3,_0x5de647-0xd4);}function _0x219ede(_0x5dc3a5,_0x5e37c7,_0x723fdb,_0x3fc18d){return _0x3c97d5(_0x5dc3a5-0x86,_0x723fdb-0x396,_0x3fc18d,_0x3fc18d-0x176);}if(_0x2886fc[_0x219ede(0x352,0x413,0x3fe,0x47b)](_0x2886fc[_0x5b17f0(0x69d,0x5ce,0x6a1,0x5fe)],_0x2886fc[_0x219ede(0x372,0x303,0x397,0x3b4)])){const _0x141048=_0x4ebd29?function(){function _0x31c91c(_0x129902,_0x530163,_0x265e64,_0x184dfa){return _0x5b17f0(_0x129902-0x75,_0x129902,_0x265e64-0x23,_0x265e64- -0x7e);}if(_0x15e5aa){const _0xc98ab6=_0x15e5aa[_0x31c91c(0x6b2,0x565,0x623,0x693)](_0xf799ba,arguments);return _0x15e5aa=null,_0xc98ab6;}}:function(){};return _0x4ebd29=![],_0x141048;}else _0x28a50f=_0x5e7bae+_0x5b17f0(0x521,0x632,0x6a5,0x5ed);};}());function _0x21c117(_0xc4ce68,_0x3c1fec,_0xf1c6df,_0x24451c){return _0x11f9(_0x3c1fec- -0x273,_0xf1c6df);}const _0x595d1f=_0x4d6ab7(this,function(){const _0x1b4343={};function _0x32d7f1(_0x2d450e,_0x4f828e,_0x392418,_0x35b186){return _0x11f9(_0x35b186- -0x25e,_0x2d450e);}_0x1b4343[_0x5eb700(-0x8d,0x7,-0x44,0x3c)]=_0x5eb700(-0x6,-0x71,0x2d,-0x17)+'+$';const _0x2c223=_0x1b4343;function _0x5eb700(_0x1d6d89,_0x5cc688,_0x496c99,_0xd2b5bc){return _0x11f9(_0x496c99- -0x2be,_0xd2b5bc);}return _0x595d1f[_0x5eb700(0x7,-0xbe,-0x64,0x5d)]()[_0x5eb700(-0x17c,-0x1b6,-0xf6,-0xaa)](_0x2c223['PzXlK'])[_0x32d7f1(0xa5,-0xb7,-0xa4,-0x4)]()[_0x32d7f1(0xb1,0xc1,-0x62,0x11)+'r'](_0x595d1f)[_0x5eb700(-0xea,-0x96,-0xf6,-0x123)](_0x2c223[_0x32d7f1(0x50,-0x8,0x75,0x1c)]);});_0x595d1f();import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';function _0x564343(_0x1f25d0,_0x374880,_0x498890,_0x18b70a){return _0x11f9(_0x18b70a- -0x3aa,_0x498890);}import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();function _0x11f9(_0x29024a,_0x2d4c12){_0x29024a=_0x29024a-(0x3c9*0x5+-0x1a*-0x10b+-0x2c4a);const _0x170abd=_0x1f4b();let _0x2ba642=_0x170abd[_0x29024a];if(_0x11f9['ccWRKs']===undefined){var _0xbccef6=function(_0x450c8d){const _0x316aaf='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x453109='',_0xb19e77='',_0x24cf54=_0x453109+_0xbccef6;for(let _0x479821=0xaae*-0x1+0x4*0x6b2+-0x1ca*0x9,_0x48dcee,_0x408d7c,_0x5ca734=0x352+-0x13a*0x13+0x13fc;_0x408d7c=_0x450c8d['charAt'](_0x5ca734++);~_0x408d7c&&(_0x48dcee=_0x479821%(0x179+0x100a*0x2+0x65*-0x55)?_0x48dcee*(0x1d*-0x5e+-0x2*0xec3+-0x2*-0x1436)+_0x408d7c:_0x408d7c,_0x479821++%(0x1*0x82f+0x2*-0xb+-0x815*0x1))?_0x453109+=_0x24cf54['charCodeAt'](_0x5ca734+(-0x1592+0x17*-0xc5+0x1d*0x15b))-(-0x1948+-0x71*-0x53+-0xb51)!==-0x2*-0xe2c+0xa98+-0x1c*0x164?String['fromCharCode'](0x43f*-0x1+-0x7*-0x85+0x19b&_0x48dcee>>(-(-0x20*-0xa1+0x42e*-0x1+-0xff0)*_0x479821&-0x37*-0x2d+-0x2663+-0xd*-0x236)):_0x479821:0x2585+0x259e+-0x4b23){_0x408d7c=_0x316aaf['indexOf'](_0x408d7c);}for(let _0x27b43c=0x1*0x1a7d+0x21d8+-0x3c55*0x1,_0x1ffc27=_0x453109['length'];_0x27b43c<_0x1ffc27;_0x27b43c++){_0xb19e77+='%'+('00'+_0x453109['charCodeAt'](_0x27b43c)['toString'](-0x2*-0xcf4+0x49*0x5b+-0x33cb))['slice'](-(0x1b19+-0x7*0x216+0xc7d*-0x1));}return decodeURIComponent(_0xb19e77);};_0x11f9['bvxQdY']=_0xbccef6,_0x11f9['IAfEKY']={},_0x11f9['ccWRKs']=!![];}const _0x358d9e=_0x170abd[-0x1fc+0xc7*-0x2c+0x2430],_0x3b2453=_0x29024a+_0x358d9e,_0x19a0ea=_0x11f9['IAfEKY'][_0x3b2453];if(!_0x19a0ea){const _0x474c2e=function(_0x520e59){this['uTgduu']=_0x520e59,this['mlQieb']=[-0x15be+0x9a7+0x24*0x56,-0x11d2+-0x1b6b*-0x1+0x15*-0x75,0x69*0x3f+0x2f*0x51+-0x486*0x9],this['nXcgxY']=function(){return'newState';},this['LUmMCo']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['lcxtbJ']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x474c2e['prototype']['NzdTUq']=function(){const _0xdaf6f5=new RegExp(this['LUmMCo']+this['lcxtbJ']),_0x8fa9e5=_0xdaf6f5['test'](this['nXcgxY']['toString']())?--this['mlQieb'][0x129+-0x1829+0x1701]:--this['mlQieb'][0x1b97+0x174e+-0x32e5];return this['YIyDML'](_0x8fa9e5);},_0x474c2e['prototype']['YIyDML']=function(_0x5a1a34){if(!Boolean(~_0x5a1a34))return _0x5a1a34;return this['oDdELy'](this['uTgduu']);},_0x474c2e['prototype']['oDdELy']=function(_0x4766ab){for(let _0x4c0bb5=-0x1e89+0x2659+0x7d0*-0x1,_0x259d85=this['mlQieb']['length'];_0x4c0bb5<_0x259d85;_0x4c0bb5++){this['mlQieb']['push'](Math['round'](Math['random']())),_0x259d85=this['mlQieb']['length'];}return _0x4766ab(this['mlQieb'][0x5*-0x211+-0x1fe0+0x2a35]);},new _0x474c2e(_0x11f9)['NzdTUq'](),_0x2ba642=_0x11f9['bvxQdY'](_0x2ba642),_0x11f9['IAfEKY'][_0x3b2453]=_0x2ba642;}else _0x2ba642=_0x19a0ea;return _0x2ba642;}eventSource['on'](_0x564343(-0x10d,-0x178,-0x1c5,-0x181)+_0x21c117(0x108,0xa0,-0x22,0x1)+_0x21c117(0x38,0x27,0xd2,-0x3f),({taskId:_0x262440})=>{const _0x2f0094=llmTaskControllers['get'](_0x262440);function _0x44d3d0(_0x2ad367,_0x56cab1,_0x37e026,_0x366736){return _0x564343(_0x2ad367-0x48,_0x56cab1-0xd2,_0x37e026,_0x56cab1-0x545);}function _0x425d20(_0x295311,_0x552f5f,_0x52ed27,_0x443073){return _0x564343(_0x295311-0x3d,_0x552f5f-0xf9,_0x52ed27,_0x443073-0x780);}_0x2f0094&&(_0x2f0094[_0x44d3d0(0x382,0x412,0x47b,0x40e)](),llmTaskControllers[_0x44d3d0(0x3bf,0x37d,0x349,0x30e)](_0x262440),console[_0x44d3d0(0x4b1,0x4cf,0x4c3,0x417)](_0x44d3d0(0x456,0x4a4,0x416,0x458)+_0x425d20(0x61c,0x690,0x63d,0x6a1)+_0x262440));});function _0x1f4b(){const _0x30ac0c=['vKPYyLq','AgLZDg9YEq','zw5HyMXLza','AMjnvwe','mZeZnZq5mMX6r3DXEa','tLfkqwS','6kEs6iMYl+ACJEIJHEs/RUAuUq','qvfitM4','v0LhwfK','EM9yufu','rvj3zwu','rhDsDfu','z3jwvKG','rNbUCNm','rv9srvnqt05trq','Aw9UoIaIqMvHCG','ntK4ntLXvKPHuMq','rxDZAuW','r3zLt28','u3vNs1m','wwfwBvK','yxbbAM8','rg9wz1u','C3bSAxq','nuPnsgXQDq','6kEs6iMYl+ACJEIJHEwXLEEKUG','tLzPuNO','D2LgB3i','C3rHDhvZvgv4Da','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','uhbOvLi','vgfN5l+U5Ps5','u1nVA20','Bwf4x3rVA2vUCW','y3vZDg9Tx2LUyW','uw95t1y','odm2nwTYvwrTvW','thLwzei','refPy24','DgvZDf9JB250zq','vwfVtMq','y29TCgXLDgvuyq','DxnLCG','DMHMveW','teXnoIdLPjBPG6JOR7FMSyi','ruPvu0K','ANHezKq','Bv9WCM9MAwXL','Ehf6ALK','D2nHwgm','zuPvzMS','A1z5vMm','BgLzC3y','zxiG','sfnXBuG','ievYCM9YoG','sevmv24','tM16r2e','zxrPB25FC291CG','ndq5nJzcq2vWA0m','DhLWzq','C3rFy2HHDhu4xW','qvbjifvstcWGqq','57g75z6loIa','wwrgwLu','z3D0sem','yLr6r1y','DLjtrK8','C3LZDgvT','C3rHCNrZv2L0Aa','y0DyEge','CM9Szq','DgvZDe1Vzgu','Df90ExbLx2nVBG','uuPgDxm','r0PsDMq','oIbmte0G6k+35Rgc6l+u5zUE','zgf0ytOGw0rptG','quNLIQNMIyS','uhDcq3a','rxPmyxi','DxfKELC','CMvWzwf0','DgfNx21VzgLMEq','y1rHtLK','DuXUBhG','5OIwie1VzgvSioACQUMfJq','shPLB1m','s3j1q2e','q3jwAuW','BhvKzv9OzwfKzq','BgXTx3bYB2zPBa','C1LOAve','z2v0','wwrUtLG','rMnWAei','mJfQEMD3v3a','vNviuxK','y29UDgvUDa','ru5ss3y','AvHcsLy','t2TUCMe','BMfTzq','qMvHCMvYia','mNWXFdn8mhW0','wuPUq0m','zxLrBxi','u2vIvfe','y29UDgv4Da','q0foq0vmteve','Dg9tDhjPBMC','57g75z6loG','z0zsCge','ue1rqNC','BMrZl2nOyxqTyW','suLJBuK','ChjVBxb0','B2zPBgu','yM9KEq','CvfcuM4','vvDZvhK','wwPYtgC','AxnbCNjHEq','yNfYyve','5lI656M677Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ','Bgv0Aw9UCW','y3fbu20','swn4vfe','t01OtMq','uKnqCvu','y29UDgv4Df9WCG','y29UC3rYDwn0BW','Dg9VBa','CgfYC2u','l2nOyxqVy29TCa','Dw5RBM93BG','Bg9bAMC','oIbbueKGvvjmla','r2jLtLG','ywjVCNq','l3yX','CuP2CgO','uhPyBeS','ioIUVUE9RUI/H+wWJ+oaGEAiLIbbua','Aw9U','y29Kzq','BLjZyKu','BgXhtMC','Dg9Wx3a','5yE95PwW6lcd55sO','Cg5TsNi','qxv0Ag9YAxPHDa','C2LNBMfS','A3rhq3q','Aw5JBhvKzxm','zgf0ytOG','DhjPz2DLCLDVCG','Aff1Bwu','yvnOAha','z0fvzwu','te9Nu3K','D2L1vfC','ve9YtLK','zw5KC1DPDgG','teXnioIVT+AXGUw3SUs4REATOUoaGG','Dgzqrwm','qKHlAhC','tK9ItNC','qwjVCNrfCNjVCG','BKDNwfu','t0jJBva','zMLNCW','uerMuw0','uMvLrMO','x3rHC2S','CezVtey','Eu5HDwq','teXnx0vyrunvva','qNHVyKq','B0Hcu3e','yNzfqM4','vvbOweS','BLf4wMi','CejUBvG','m3WYFdr8mhW1Fa','DxbKyxrLu3rHDa','yxnZAxn0yw50','BLbjqwm','DxjS','BNrKuwq','u1DxyNa','Dgvwsvi','C3rYAw5N','A3jsqLG','tg9XsLK','lcdNUQyG','teXniev4zwn1Da','ug5eDuW','zhbTwvC','8j+tTYbB5zU+54Mh6zo+5O6LoIa','BxHsBfy','5PAT44cbBwf4x3rVA2u','u2v3EMm','yxbPx3bYB2zPBa','tKHiD3C','y2HHCL9TB2rPzG','y2HHDf9JB21WBa','s0jD','ksa9pt09pq','thntwvK','q0PMDKG','r2rWteq','rxb6sfi','sxjpsM4','D3fbvwm','tLbkyLy','CMvZDwX0','CvbeD1a','tfztDfq','rgXIBeq','Aw1Hz2vFDxjS','D2fYBG','quTgCu8','5RAioIa','pt09pt0GteXnia','5lUJ56cboG','v3nsB3q','vK9MuLq','qvbjioI/NUAoPEMxRUMIMooaGG','qNfPquO','DhjPz2DLCG','Dgv4Da','6k+35Rgc5A6m5OIqid09pt09','C1HmAuC','Aun2EuS','t0LqvKS','6BUy6k6K6k+35Rgc5BYa5AElid09pq','C2rUu2i','DuvZqMy','Aw5MBW','yxbPx3vYBa','DhjHBNnSyxrPBW','vvzov1O','vgnpzgi','sgPUAuG','D0Dkqwu','mxWZFdb8mNW0Fa','zxjYB3i','EMz4wKu','A2TUqNu','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','vLbosM0','BwrXD2K','zLLuDwy','yu5Ozuu','kcGOlISPkYKRkq','ChjlA1q','C3rYzwfT','Ew1IyNy','zurArKW','twP0thO','yxbPx2TLEq','quPkB3O','rKzqwgm','EKTRtLa','Bwf0y2G','B2PiEMq','ioAuTUwiSa','BwvZC2fNzxm','sM5Yyw8','Bw9KzwW','q3zez1m','DhjPBq','y3vZDg9Tx3vYBa','6k+35Rgc6zsz6k+VoIa','nhWYFdf8m3WW','tMHuEgy','BgXTx3jLCxvLCW','5y+r6ycb55QeifbYB21WDa','mJy0otmZnZLAzNbrruS','uKz2zKi','C3rYAw5NAwz5','uLvotKLorW','sMvothK','zgHhEeC','w0Xmtv0G5lU75yQH5BEY5y+w','teXnigv4zwn1Da','DejoCvq','mty1mZK2me1sBxjRCG','DhjPz2DLCK1Vza','ANnVBG','wfznAeO','shPlt1m','DNrfvwu','ywrKvgfZAW','y2fUy2vSx2XSBq','zNvUy3rPB24','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','B3j0zwq','wwvkAeC','Bw5YvgG','77Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ5PAT44cb','ue9tva','Dwvfzvi','mJe1mLjXvLr6vG','l3yXlW','qvDXv3m','A1fQr3q','A2v5CW','DwXIELa','u3vbD0K','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','runTDNO','BNr5D2C','yNLWyxnZx3bYBW','rfDOwuS','z2v0uMvHzgvY','wwXywKO','D2fYBMLUzW','twvYEgW','yxbWBhK','sgHHqva','B3vqqu0','EgjJAfO','mJCZmJC1n0jptwLHvW','q29UDgvUDc1uEq','y3vyy24','sMvJr0G','Bg9N','y3vZDg9T','BNmG6k6+572U6l+h5Bcp44cb5OIwia','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','EefyB0q','BKjlsLO','tK1NB2O','rfjor3i','Dg9Rzw4','DvHLAwO','r21PC2m','zM9YrwfJAa','Bgvluwu','zgvJB2rL','ssdOV57MJQxPL67POPJJGii','mtCWzvD5sfHJ','BgvUz3rO','6k+35Rgc5AsX6lsLoIa','rLzqyMe','vKfKz28','rfnWyKG','wNP0CwK','5Q2J5zYO5Ase55cgia','CMvWBgfJzq','sM1Pv2G','wNLVwhy','CM91BMq','5Q2J5PAh5zU+54Mh55sF5OIq','5lUJ56cboIa','sw9Tv2i','BI9QC29U','C3vJy2vZCW','s1r1tee','wxPHuwW','mhWXFdn8mNW0','rMncz1m','s1boy1e','B2jQzwn0','yK9hwui','y3vYCMvUDf90zq','EhrFChjVzMLSzq','C2v0','DxrMltG','ChvZAa','C2vHCMnO','BKznDfO','BxfyweK','BwvZC2fNzq','5Rwb5BYp6kEJ5P6q6k2M5zgkoG','rKvfu0K','AxLeu3u','zw1PDa','B012wNm','zw50CMLLCW','BKTPt0W','Cff3vvu','C0DZyxG','iowBNUwKJsaTls0Tlq','6k+35RgcieLeoIa','zsbYzxf1zxn0ia','teXn','tw9KzwWG5PYQ6ywn572U44cc','57o757UF5O+q56s66k+n','se5VwNi','l2fWAs9IywnRzq','zgvSDge','B0PfqLe','AwDKv1a','DgvTCgvYyxr1CG','Aw1Hz2vFz2vU','zgvSzxrL','y3vYCMvUDf9SBa','cI0Tls0TieXmtq','y2HVAwnLCW','zu5yyuy','AM9PBG','C2XPy2u','56In5yczlI4U','qu9dAKC','x3bYB2zPBgu'];_0x1f4b=function(){return _0x30ac0c;};return _0x1f4b();}export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x137da6){currentLLMRequestController=_0x137da6;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){function _0x107b1e(_0x512a92,_0x3cedf9,_0xf80f46,_0x471fd7){return _0x564343(_0x512a92-0x189,_0x3cedf9-0x19c,_0x3cedf9,_0xf80f46-0x75e);}function _0x1b01d9(_0x524e1c,_0x255f52,_0x3ff972,_0xf1d019){return _0x564343(_0x524e1c-0x1b2,_0x255f52-0xe8,_0x255f52,_0x3ff972-0x655);}const _0x564a05={};_0x564a05[_0x107b1e(0x6ac,0x75c,0x6d2,0x6fc)]=_0x1b01d9(0x509,0x5c1,0x53b,0x540);const _0x40bdfe=_0x564a05;currentLLMRequestController&&(currentLLMRequestController[_0x1b01d9(0x521,0x569,0x522,0x579)](),toastr[_0x107b1e(0x72c,0x690,0x68f,0x5ed)](_0x40bdfe[_0x1b01d9(0x5f0,0x5f2,0x5c9,0x600)]));}export function formatPromptForDisplay(_0x18eb8e){function _0x55644a(_0x1b557f,_0x97c465,_0x1ce313,_0x5674ac){return _0x21c117(_0x1b557f-0x11c,_0x5674ac- -0x9c,_0x1ce313,_0x5674ac-0x46);}const _0x24d2be={'igdWP':function(_0x1893e3,_0x3e7da3){return _0x1893e3===_0x3e7da3;},'UaoNd':function(_0x3b25d2,_0x4be007,_0xd43266){return _0x3b25d2(_0x4be007,_0xd43266);},'tBNqT':_0x55644a(-0x196,-0xce,-0x131,-0xf9),'oJEBQ':function(_0x181829,_0x56ca84){return _0x181829(_0x56ca84);},'sYhiQ':function(_0x248b92,_0x5cc66e){return _0x248b92(_0x5cc66e);},'AJJoz':_0x55644a(-0xfc,-0xf0,-0x131,-0x7b),'yNaud':_0x55644a(-0xc0,0x4b,0xe,-0x5)+'e\x20request\x20'+'aborted.','folwW':'Request\x20ab'+'orted','TOrNY':function(_0x10fd51,_0x387ad0){return _0x10fd51!==_0x387ad0;},'qJvpj':_0x55644a(-0x7,-0x25,-0x33,-0x3c),'YeJhG':_0x55644a(-0x110,0x4f,-0xda,-0x47),'iaUNx':_0x154f49(-0x100,-0xef,-0x120,-0xa5),'cqASm':'data:','ZyoXv':_0x55644a(-0x9b,-0x12,-0x101,-0x9c),'OIPVK':function(_0x6079c,_0x3fea5a){return _0x6079c/_0x3fea5a;},'jxDfD':_0x154f49(-0x6c,-0x36,-0x71,0x8d),'BxobD':function(_0x1fba36,_0x3c4807){return _0x1fba36===_0x3c4807;},'fYTuf':'yNStL','NhTxf':_0x55644a(-0xd,-0x7f,-0x6e,-0x4c),'ojHzd':'WRHnP','LyVdB':'aEeGK','grVVH':function(_0x1715e7,_0x41d814){return _0x1715e7===_0x41d814;},'qQBRn':'object'};if(_0x24d2be[_0x154f49(-0x9e,-0x44,-0x103,0x52)](typeof _0x18eb8e,_0x24d2be[_0x154f49(-0x56,-0xc8,-0xe2,-0x49)])){if(_0x24d2be[_0x55644a(-0x45,-0x73,-0x142,-0x81)](_0x55644a(0xf,0x0,-0x55,-0x27),_0x24d2be[_0x55644a(0x4c,-0x4f,-0x2f,-0x19)]))return _0x18eb8e;else{if(!_0x50ba55[_0x55644a(-0x140,-0xc8,-0x199,-0x121)])return;if(!_0x20e20e[_0x154f49(-0x4b,-0x94,0x2f,-0x14e)]||_0x24d2be[_0x55644a(-0xa1,-0x161,-0x1f8,-0x130)](_0x1a42f3[_0x55644a(-0x77,-0x12,-0x2d,-0xc1)][_0x55644a(-0x74,-0xc8,0x9b,-0x13)](),''))return;if(_0x24d2be[_0x55644a(-0xd2,-0xa1,-0x17f,-0x130)](_0x2a03a9[_0x154f49(0x7,0x2b,-0x50,0x25)+'e'],'trigger')){if(!_0x448812||!_0x24d2be[_0x55644a(-0x13a,-0x14d,-0x106,-0xfb)](_0x551d0f,_0x36737c['triggerWor'+'ds'],_0x17989c))return;}const _0xf50b02={};_0xf50b02[_0x55644a(-0x60,-0x114,-0xe1,-0xdc)]=_0x1b7ee4[_0x55644a(-0x165,-0x176,-0xca,-0xdc)]||_0x24d2be[_0x55644a(-0x6d,-0x93,-0xca,-0x4)],_0xf50b02[_0x55644a(-0xc3,-0x7d,-0x140,-0xc1)]=_0x154095[_0x55644a(0x8,-0xae,-0x144,-0xc1)],_0x3fb01a['push'](_0xf50b02);}}if(Array['isArray'](_0x18eb8e)){if(_0x24d2be['TOrNY'](_0x24d2be[_0x154f49(-0x126,-0xd1,-0x15c,-0x111)],'aEeGK'))_0x24d2be[_0x154f49(-0x14e,-0x104,-0x161,-0x173)](_0x558a94,_0x5810f4);else{const _0x246346=[];return _0x18eb8e[_0x55644a(0xca,-0x76,0x6,0x31)]((_0x5b8833,_0x4e95a8)=>{const _0x2b1c9a={'uqdzW':function(_0x1b23af,_0x3b959f){function _0x45a181(_0x17ee88,_0x444557,_0x156264,_0x13c0a7){return _0x11f9(_0x13c0a7- -0x3c3,_0x156264);}return _0x24d2be[_0x45a181(-0xb7,-0x1bd,-0x16a,-0x17b)](_0x1b23af,_0x3b959f);},'SWWbp':function(_0x37deef,_0x7b2431){return _0x37deef===_0x7b2431;},'Sewzc':_0x24d2be[_0x656d24(0x3a2,0x2ea,0x2e7,0x349)],'eyQmr':_0x24d2be[_0x656d24(0x2b0,0x260,0x291,0x25f)],'TNjmP':_0x24d2be['folwW'],'ulbzP':_0x656d24(0x2e1,0x1e8,0x2a5,0x289)+'e\x20Error:','ktGCt':function(_0x3336e5,_0x1a716b){function _0x34e08a(_0x362723,_0x204293,_0x7fd7fc,_0x23c308){return _0x1aae8d(_0x362723-0xd1,_0x23c308-0x2ad,_0x7fd7fc,_0x23c308-0xe0);}return _0x24d2be[_0x34e08a(0x2c3,0x2e9,0x2e0,0x293)](_0x3336e5,_0x1a716b);},'nQxZb':_0x656d24(0x200,0x1da,0x223,0x198),'VOfRT':function(_0x149f3b,_0x317a1e){return _0x149f3b===_0x317a1e;},'Jnrao':_0x24d2be[_0x1aae8d(-0x63,-0x2f,-0xc4,-0xd4)],'bvEBn':_0x24d2be[_0x1aae8d(0x4f,0x6f,-0x16,0x106)],'DRNGr':function(_0x327fb9,_0x508e90){return _0x327fb9===_0x508e90;},'ATpTy':_0x24d2be['iaUNx'],'LBInW':_0x24d2be[_0x1aae8d(0x2b,-0x3e,0x1e,-0x82)],'ymbbv':_0x24d2be[_0x1aae8d(0x148,0xa6,0xf4,-0x18)],'qyoNK':function(_0xfba645,_0x4368a1){return _0x24d2be['OIPVK'](_0xfba645,_0x4368a1);},'liYsv':function(_0x3cbf5e,_0x26ce24){function _0x13125e(_0x5ea5f8,_0x2b4bea,_0x18e39d,_0xf61f6b){return _0x1aae8d(_0x5ea5f8-0xcc,_0x2b4bea-0x541,_0x18e39d,_0xf61f6b-0x17);}return _0x24d2be[_0x13125e(0x5e7,0x570,0x597,0x57f)](_0x3cbf5e,_0x26ce24);},'nXrLQ':function(_0x303e60,_0x3a8bd8){return _0x303e60*_0x3a8bd8;}},_0x72edff=_0x5b8833[_0x1aae8d(0x41,-0x75,-0x14,-0xce)]||_0x24d2be['ZyoXv'],_0x7fea71=getRoleLabel(_0x72edff);_0x246346[_0x656d24(0x1e1,0x21c,0x1bc,0xfd)](''+'═'[_0x1aae8d(-0xf5,-0x6a,-0x12c,-0x61)](-0x190f+0x2*-0x843+0x29c7)),_0x246346['push']('【'+_0x7fea71+'】'),_0x246346[_0x1aae8d(-0x165,-0xe1,-0x1a6,-0x178)](''+'─'['repeat'](0xaf*-0x25+0xaa6*0x1+-0x83*-0x1d));function _0x1aae8d(_0x55c712,_0x5a9c77,_0x39e92c,_0x414b57){return _0x55644a(_0x55c712-0x147,_0x5a9c77-0x44,_0x39e92c,_0x5a9c77-0x67);}const _0x201c57=_0x5b8833[_0x656d24(0x255,0x2fe,0x243,0x2d3)];function _0x656d24(_0x117b6f,_0x588f1f,_0x2e2eed,_0xffe768){return _0x154f49(_0x117b6f-0x1a5,_0x2e2eed-0x2d7,_0x2e2eed-0x8,_0x588f1f);}if(typeof _0x201c57===_0x24d2be[_0x656d24(0x190,0x1a9,0x20f,0x15a)])_0x246346['push'](_0x201c57);else{if(Array[_0x1aae8d(-0x6c,-0x42,-0x43,-0x8)](_0x201c57)){if(_0x24d2be[_0x1aae8d(0x95,-0xa,-0xc4,0x81)](_0x24d2be[_0x656d24(0x39d,0x350,0x2de,0x265)],_0x24d2be[_0x1aae8d(0xd,0x58,-0x4f,0x68)])){const _0x57e2a8=_0x92873c+(_0x656d24(0x321,0x2fa,0x26a,0x1c3)+'\x20API\x20Key,\x20'+_0x656d24(0x225,0x283,0x237,0x2d8)+'置。');_0x1ff337[_0x1aae8d(0x17,0x3b,-0x15,-0x23)](_0x57e2a8);const _0x5e206e={};_0x5e206e[_0x1aae8d(0x6e,0xac,0x98,0x84)]=![],_0x5e206e[_0x1aae8d(0x4,0x1c,0x2d,-0x30)]=_0x57e2a8,_0x5e206e['id']=_0x546b6e,_0x3a1e5f[_0x656d24(0x15c,0x1cb,0x1c4,0x16b)](_0x471a55,_0x5e206e);return;}else _0x201c57[_0x1aae8d(0xf9,0x98,0x15a,0x136)](_0x7f9666=>{const _0x3bc503={'LoqJY':function(_0x16030c,_0x15ea64){function _0x24e9f2(_0x105459,_0x5bed3b,_0x4e5273,_0x58ce4c){return _0x11f9(_0x5bed3b- -0x3f,_0x58ce4c);}return _0x2b1c9a[_0x24e9f2(0x2d5,0x26b,0x23c,0x30a)](_0x16030c,_0x15ea64);},'LOgSy':_0x2b1c9a[_0x2f9a0c(-0x6f,-0x35,-0x61,-0x41)],'IomWb':_0x2b1c9a[_0x226144(0x46f,0x41a,0x4e5,0x58c)],'ouPAM':_0x2b1c9a['TNjmP'],'eJUfk':_0x2b1c9a[_0x2f9a0c(-0x97,0x36,0x103,0x77)],'vFbSf':function(_0x6ccf63,_0x33af67){return _0x6ccf63(_0x33af67);}};function _0x2f9a0c(_0x386eeb,_0x40d70f,_0x3c89ef,_0x986a89){return _0x1aae8d(_0x386eeb-0x49,_0x40d70f- -0x43,_0x986a89,_0x986a89-0x8f);}function _0x226144(_0x124aec,_0x36f00d,_0x20e58e,_0x52ce8a){return _0x656d24(_0x124aec-0x177,_0x36f00d,_0x20e58e-0x29a,_0x52ce8a-0x9e);}if(_0x2b1c9a[_0x2f9a0c(-0x23,-0x66,0x2b,0x2e)](_0x2b1c9a[_0x2f9a0c(-0x6,-0x49,-0x56,0x10)],_0x2b1c9a[_0x226144(0x5fc,0x579,0x531,0x5bd)])){const _0x415193=_0x1c2047[_0x2f9a0c(0xac,0x11,-0x56,-0x15)]()[_0x2f9a0c(-0xb2,-0x103,-0x1c8,-0xda)](-0xb*0x30e+0x18*-0xdf+-0x14*-0x2ba),_0x41ad1e=_0x277d85[_0x226144(0x573,0x568,0x500,0x5bc)](_0x415193),_0x50b0c9=_0x41ad1e['choices']?.[-0x960+0xd42*0x1+-0x3e2]?.[_0x226144(0x456,0x4f3,0x46c,0x513)]?.[_0x226144(0x4f0,0x56e,0x4dd,0x500)];_0x50b0c9&&(_0x158c76+=_0x50b0c9,_0x4686fa&&_0x2b1c9a[_0x2f9a0c(-0x162,-0xae,-0x46,-0x149)](_0xca194,_0x1e4363));}else{if(_0x2b1c9a[_0x226144(0x5b3,0x61a,0x55e,0x574)](_0x7f9666[_0x226144(0x4f8,0x4d2,0x4b7,0x4e9)],_0x2b1c9a[_0x2f9a0c(0x8a,0xe,-0x53,0xa0)]))_0x246346['push'](_0x7f9666[_0x226144(0x507,0x5d3,0x562,0x57f)]||'');else{if(_0x7f9666[_0x2f9a0c(-0x1b,-0xc3,-0x30,-0x4b)]===_0x2b1c9a[_0x2f9a0c(-0x116,-0x4b,-0xac,0x2f)]){if(_0x2b1c9a[_0x226144(0x626,0x593,0x5cb,0x5fc)](_0x226144(0x689,0x594,0x5d9,0x588),_0x2b1c9a['ATpTy'])){if(_0x3bc503[_0x2f9a0c(-0x1c,-0x3d,0x6e,-0x41)](_0xde64c7[_0x2f9a0c(-0xa0,-0x99,-0xbf,-0x109)],_0x3bc503[_0x2f9a0c(0x3e,-0x5f,0x43,-0xf8)])){const _0x6fc75a=(_0x226144(0x553,0x490,0x533,0x583)+'1')[_0x226144(0x55f,0x487,0x492,0x533)]('|');let _0x2658f3=0x7a*0x8+0x1*-0x313+-0xbd;while(!![]){switch(_0x6fc75a[_0x2658f3++]){case'0':_0x2be7db[_0x226144(0x416,0x3af,0x471,0x4e5)](_0x54f44b);continue;case'1':return;case'2':_0x116a80['log'](_0x3bc503[_0x226144(0x64c,0x5f6,0x5e1,0x655)]);continue;case'3':_0x4ff37e=!![];continue;case'4':_0x55867c[_0x2f9a0c(-0xb,-0x46,-0x96,0x4c)+'us'](_0x3f788e,_0x2615f8['CANCELLED']);continue;case'5':const _0xfd3769={};_0xfd3769['name']=_0x2f9a0c(0x36,-0x57,-0xf9,0x53),_0xfd3769[_0x226144(0x505,0x465,0x45a,0x3a9)]=_0x3bc503[_0x2f9a0c(0xbd,0x43,0x83,0x38)];const _0x4bde3c={};_0x4bde3c[_0x2f9a0c(0x18,0x69,0xb6,0xf2)]=![],_0x4bde3c[_0x2f9a0c(-0xa1,-0x27,-0x54,0x64)]=null,_0x4bde3c['id']=_0x1093fc,_0x4bde3c[_0x226144(0x4f3,0x534,0x572,0x55c)]=_0xfd3769,_0x312ce9[_0x226144(0x495,0x4a3,0x45e,0x3f2)](_0x5a9446['LLM_EXECUT'+_0x226144(0x4c6,0x3be,0x489,0x514)],_0x4bde3c);continue;}break;}}_0x12a689['error'](_0x3bc503[_0x2f9a0c(-0x3,-0xcd,-0x5a,-0x1e)],_0x493137);const _0x4aeece='请求错误:\x20'+_0x3a95a9[_0x226144(0x39d,0x514,0x45a,0x4b8)];_0x33575f&&_0x3bc503['vFbSf'](_0x1f7953,_0x4aeece);_0x497452[_0x226144(0x609,0x600,0x572,0x4ff)](_0x4f92b1[_0x2f9a0c(-0x1e7,-0x120,-0x5a,-0x1e8)]),_0x1e1b56['completeTa'+'sk'](_0x203cfa,![]),_0x59b2a9[_0x2f9a0c(-0x4a,-0x109,-0x111,-0x61)](_0x34ce40);const _0x583f3a={};_0x583f3a[_0x226144(0x5f7,0x5a1,0x5e3,0x649)]=![],_0x583f3a[_0x226144(0x582,0x580,0x553,0x5cf)]=_0x4aeece,_0x583f3a['id']=_0x5199ae,_0x1ef90d[_0x226144(0x4be,0x408,0x45e,0x4df)](_0x16f5e5['LLM_EXECUT'+_0x2f9a0c(-0x87,-0xf1,-0x185,-0x90)],_0x583f3a);}else{const _0x4a2ebe=_0x7f9666['image_url']?.[_0x2f9a0c(-0x4c,-0x43,-0x7a,-0x9f)]||'';if(_0x4a2ebe[_0x2f9a0c(0x7,-0xba,-0x162,-0x139)](_0x2b1c9a['LBInW'])){const _0x5bf4f9=_0x4a2ebe[_0x226144(0x540,0x582,0x584,0x545)](/^data:([^;]+);/),_0x3620a8=_0x5bf4f9?_0x5bf4f9[0x145f+-0x1c30+0xd*0x9a]:_0x2b1c9a[_0x226144(0x4d1,0x508,0x57d,0x530)],_0x35a70f=_0x4a2ebe['split'](',')[0x9c7*0x1+-0x265c+0x1c96*0x1]||'',_0x2eb3ca=Math[_0x2f9a0c(0xa5,0x64,0x21,0xfe)](_0x2b1c9a['qyoNK'](_0x2b1c9a[_0x226144(0x494,0x54b,0x4af,0x53b)](_0x2b1c9a['nXrLQ'](_0x35a70f[_0x2f9a0c(0xd6,0x5a,0x98,0xa8)],-0x100f+-0x1313+0x2325),-0x321+-0xfb*0x1f+0x218a),-0x1d4a*0x1+-0x931*0x1+0x4b*0x91));_0x246346[_0x226144(0x3a4,0x4bc,0x456,0x507)](_0x2f9a0c(-0x14,0x38,-0x92,0xc2)+':\x20'+_0x3620a8+_0x226144(0x5a6,0x5a5,0x53e,0x4ac)+_0x2eb3ca+_0x226144(0x557,0x48e,0x54a,0x47e));}else _0x246346[_0x2f9a0c(-0x1a0,-0x124,-0x19f,-0x1d3)](_0x226144(0x4a4,0x4dc,0x542,0x513)+_0x4a2ebe+']');}}}}});}}_0x246346[_0x656d24(0xfc,0x241,0x1bc,0x263)]('');}),_0x246346['join']('\x0a');}}if(_0x24d2be[_0x154f49(-0x184,-0xea,-0x145,-0x24)](typeof _0x18eb8e,_0x24d2be[_0x154f49(-0x15,-0x7f,-0x124,-0xa5)])&&_0x18eb8e!==null)return JSON[_0x154f49(0x54,0x23,-0x6c,0x6d)](_0x18eb8e,null,-0x191*-0xd+0x46b+-0x1c5*0xe);function _0x154f49(_0x27b10f,_0x34ab84,_0x1e2dda,_0x2d3d6d){return _0x21c117(_0x27b10f-0x166,_0x34ab84- -0x6f,_0x2d3d6d,_0x2d3d6d-0x82);}return String(_0x18eb8e);}export function getRoleLabel(_0x49aedf){const _0x3e708d={};_0x3e708d[_0x523c63(0x159,0x201,0x29f,0x2b1)]=_0x523c63(0x50,0xd3,0x14f,0x185);function _0x17b35d(_0x5b3e0a,_0x4c1dbc,_0x37d96c,_0x56f588){return _0x21c117(_0x5b3e0a-0xfc,_0x56f588-0x153,_0x5b3e0a,_0x56f588-0x12);}_0x3e708d[_0x17b35d(0x1e0,0x20c,0x107,0x183)]='AI助手',_0x3e708d[_0x17b35d(0x2e4,0x255,0x158,0x21f)]=_0x17b35d(0x16c,0x213,0x1f2,0x161);function _0x523c63(_0x9290bb,_0x2371de,_0x26c790,_0x39e819){return _0x564343(_0x9290bb-0xee,_0x2371de-0x16,_0x26c790,_0x2371de-0x2a3);}const _0x1ee920=_0x3e708d,_0x5cce99={};_0x5cce99[_0x17b35d(0x168,0x15f,0x82,0x110)]=_0x1ee920[_0x17b35d(0x129,0x1c2,0x2ab,0x1e8)],_0x5cce99['user']='用户',_0x5cce99['assistant']=_0x1ee920[_0x17b35d(0xd3,0x1cc,0x189,0x183)],_0x5cce99[_0x17b35d(0x1df,0x1b5,0x1cf,0x1f4)]=_0x1ee920[_0x523c63(0x255,0x238,0x2dd,0x299)],_0x5cce99[_0x17b35d(0x118,0x93,0xe8,0x150)]='工具';const _0xa0a643=_0x5cce99;return _0xa0a643[_0x49aedf]||_0x49aedf;}export function getCurrentLLMProfile(){const _0x5ec8a7=extension_settings[extensionName][_0x3cb859(-0xa7,-0xca,-0xd1,-0x14a)+'es']||{};function _0x1bfa69(_0x3c28e4,_0x39191,_0x42275e,_0x10f35a){return _0x564343(_0x3c28e4-0x10,_0x39191-0x25,_0x39191,_0x3c28e4-0x31c);}const _0x2ee78d=extension_settings[extensionName][_0x3cb859(-0x152,-0x1db,-0x1bb,-0x1ae)+_0x1bfa69(0x18d,0xf4,0xe8,0x17d)];function _0x3cb859(_0x4cd6bf,_0x2c605f,_0x4b2c25,_0x2b19f6){return _0x564343(_0x4cd6bf-0x1de,_0x2c605f-0xf6,_0x4b2c25,_0x2b19f6-0x19);}return _0x5ec8a7[_0x2ee78d]||_0x5ec8a7[Object[_0x1bfa69(0x292,0x31b,0x328,0x2b4)](_0x5ec8a7)[-0x218b+0x4*0x3ab+0x1*0x12df]]||{};}export function getCurrentTestContext(){const _0x34dfc1=extension_settings[extensionName][_0x366d9e(0x107,0x88,0x9d,0x106)+'xt_profile'+'s']||{};function _0x52cd35(_0x4b12f2,_0x3468b3,_0x3de7fc,_0x1dbc18){return _0x564343(_0x4b12f2-0x12a,_0x3468b3-0x43,_0x3de7fc,_0x3468b3-0x4e8);}const _0xb4cc7d=extension_settings[extensionName][_0x52cd35(0x3a9,0x301,0x36f,0x2ee)+'st_context'+_0x366d9e(0xdf,0x13d,0x111,0xa6)];function _0x366d9e(_0x2d3308,_0xc2bde9,_0x47d25a,_0x22ee37){return _0x564343(_0x2d3308-0xf6,_0xc2bde9-0x12c,_0x22ee37,_0x2d3308-0x29e);}return _0x34dfc1[_0xb4cc7d]||_0x34dfc1[Object[_0x52cd35(0x46c,0x45e,0x3a7,0x3e8)](_0x34dfc1)[0x3df*-0x7+-0x253*0xa+0x107*0x31]]||{};}export function getEffectiveConfigForRequestType(_0xd64cd5){function _0x4990d4(_0x58324d,_0x510ac7,_0x8bcf82,_0x3ffe6a){return _0x21c117(_0x58324d-0x128,_0x8bcf82-0x1a9,_0x510ac7,_0x3ffe6a-0x101);}const _0x2d74ca=extension_settings[extensionName]['llm_reques'+_0x247f7f(0x48b,0x3e9,0x426,0x3f9)+_0x247f7f(0x418,0x3ab,0x3ae,0x45b)]||{},_0x36d55f={};_0x36d55f[_0x247f7f(0x405,0x4c1,0x4a5,0x47b)+'e']='默认',_0x36d55f[_0x4990d4(0x177,0x118,0x1a4,0x270)+'ofile']='默认';const _0x1ae93a=_0x2d74ca[_0xd64cd5]||_0x36d55f,_0x3a86e2=extension_settings[extensionName]['llm_profil'+'es']||{},_0x342912=extension_settings[extensionName][_0x4990d4(0x1c3,0x13f,0x149,0x13f)+'xt_profile'+'s']||{};function _0x247f7f(_0x58bb3e,_0x2b0504,_0x12a0a5,_0x500d3b){return _0x21c117(_0x58bb3e-0xe3,_0x500d3b-0x437,_0x12a0a5,_0x500d3b-0x1ee);}const _0x1eba67=_0x1ae93a[_0x4990d4(0x16e,0x1c4,0x1ed,0x268)+'e']||'默认',_0x53bfd9=_0x3a86e2[_0x1eba67]||_0x3a86e2[Object[_0x247f7f(0x4fd,0x479,0x496,0x4e4)](_0x3a86e2)[0x19af+-0x453+0x1*-0x155c]]||{},_0x167888=_0x1ae93a[_0x4990d4(0x180,0x137,0x1a4,0x236)+_0x247f7f(0x394,0x475,0x358,0x425)]||'默认',_0x4d4ec7=_0x342912[_0x167888]||_0x342912[Object[_0x247f7f(0x535,0x456,0x50e,0x4e4)](_0x342912)[0x1a31+-0x153e+0xb5*-0x7]]||{},_0x4bf7f0={};return _0x4bf7f0['api_url']=_0x53bfd9[_0x4990d4(0x161,0x1b1,0x212,0x16c)]||'',_0x4bf7f0[_0x247f7f(0x4b7,0x42b,0x563,0x4b5)]=_0x53bfd9[_0x247f7f(0x4a2,0x55b,0x52f,0x4b5)]||'',_0x4bf7f0[_0x247f7f(0x442,0x589,0x488,0x4be)]=_0x53bfd9[_0x247f7f(0x410,0x436,0x4d9,0x4be)]||'',_0x4bf7f0[_0x247f7f(0x35c,0x3fe,0x38b,0x3a4)+'e']=_0x53bfd9[_0x4990d4(0x118,0x19b,0x116,0xce)+'e']??-0x3*-0x130+0x29*-0xf1+-0x2309*-0x1+0.7,_0x4bf7f0[_0x4990d4(0x235,0x1d8,0x1b6,0x17e)]=_0x53bfd9[_0x4990d4(0x27b,0x1d3,0x1b6,0x21b)]??-0x1d25+-0x1d*0xd3+0x350d,_0x4bf7f0[_0x4990d4(0x207,0x1d3,0x143,0x13f)]=_0x53bfd9['max_tokens']??-0x175a+0x160*-0x3+0x4d*0x62,_0x4bf7f0[_0x4990d4(0x241,0x1e0,0x223,0x1c3)]=_0x53bfd9['stream']??![],_0x4bf7f0['bypass_pro'+'xy']=_0x53bfd9[_0x4990d4(0x29c,0x243,0x25c,0x19d)+'xy']??![],_0x4bf7f0[_0x247f7f(0x485,0x387,0x49d,0x41c)]=_0x4d4ec7,_0x4bf7f0;}export function buildPromptForRequestType(_0x4283d3,_0x42be56=''){const _0x9d8abd={'RCPqU':_0x4433e6(0x108,0x1ce,0x16d,0xf8),'PDfQm':_0x78b98c(0x5d4,0x5b7,0x5e1,0x5cc),'DSpbH':function(_0x3fd64a,_0x20cf48){return _0x3fd64a(_0x20cf48);},'HzeoS':_0x78b98c(0x504,0x4fa,0x4bf,0x56a),'AassG':function(_0xef5e6,_0x58eace){return _0xef5e6===_0x58eace;},'ntywg':function(_0x41f61c,_0x4687aa){return _0x41f61c!==_0x4687aa;},'PnDuL':_0x78b98c(0x5ab,0x516,0x4aa,0x542),'QjoNo':function(_0x212cf0,_0x1a3c80,_0xc6f392){return _0x212cf0(_0x1a3c80,_0xc6f392);},'ERwee':function(_0x41dd55,_0x1707fc){return _0x41dd55===_0x1707fc;},'HjniH':_0x4433e6(0x243,0x173,0x1c4,0x152),'wrTgM':_0x78b98c(0x616,0x4b1,0x4ef,0x56e),'UMPQn':function(_0x43574a,_0x1bf916){return _0x43574a!==_0x1bf916;},'eDZFL':'user','BqiAJ':_0x4433e6(0x116,0x1e7,0x1bf,0x1aa),'KruCa':function(_0x1ee52a,_0x17a5e8){return _0x1ee52a(_0x17a5e8);},'UVNWZ':_0x78b98c(0x6ee,0x702,0x58a,0x64d)+_0x4433e6(0x8a,0x153,0x102,0x1b9),'gAAZg':function(_0x16274b,_0x672a15){return _0x16274b!==_0x672a15;},'pQwUU':'laeug','SebTQ':_0x78b98c(0x53b,0x5fe,0x57c,0x535),'VJrbT':function(_0x40fd84,_0x3f8fbb){return _0x40fd84(_0x3f8fbb);}},_0x13a68e=extension_settings[extensionName][_0x4433e6(0x2c2,0x23f,0x21a,0x27c)+'t_type_con'+_0x4433e6(0x110,0x169,0x1b0,0x11b)]||{},_0x46bf12={};function _0x78b98c(_0x3eafef,_0x323e05,_0x49eceb,_0xa72f0c){return _0x21c117(_0x3eafef-0x153,_0xa72f0c-0x5ab,_0x49eceb,_0xa72f0c-0xfb);}_0x46bf12[_0x78b98c(0x549,0x5f2,0x541,0x5a6)+_0x78b98c(0x5bd,0x5d1,0x4ee,0x599)]='默认';const _0x1ddf6a=_0x13a68e[_0x4283d3]||_0x46bf12,_0x12577d=_0x1ddf6a[_0x78b98c(0x668,0x573,0x652,0x5a6)+'ofile']||'默认',_0x2657e1=extension_settings[extensionName][_0x78b98c(0x5c9,0x5f6,0x4b9,0x54b)+_0x78b98c(0x494,0x557,0x4ab,0x4fc)+'s']||{},_0x27d42f=_0x2657e1[_0x12577d]||_0x2657e1[Object['keys'](_0x2657e1)[-0x1*0xeb2+0xa94*-0x3+-0x6*-0x7bd]]||{},_0x260937=[];if(_0x27d42f['entries']&&Array[_0x4433e6(0x11a,0x179,0x17f,0xb2)](_0x27d42f[_0x78b98c(0x5aa,0x495,0x55b,0x509)]))_0x27d42f[_0x78b98c(0x5a8,0x457,0x4ba,0x509)]['forEach'](_0x477860=>{const _0x12d328={'KTuLA':_0x9d8abd[_0x356c8c(0x550,0x53c,0x480,0x4c4)],'PwBCp':_0x9d8abd[_0x1069c6(-0x7,-0xb,-0x9b,0x19)],'AKFqO':function(_0x678eb1,_0x41ae26){function _0xd490c6(_0x5bf4c2,_0x191b56,_0xf51ac,_0x5388da){return _0x1069c6(_0x5388da-0x640,_0x191b56-0xc2,_0x5bf4c2,_0x5388da-0xa8);}return _0x9d8abd[_0xd490c6(0x753,0x6a9,0x68c,0x6ea)](_0x678eb1,_0x41ae26);}};function _0x1069c6(_0x58b08b,_0x2703b1,_0x19b512,_0x5ab5e6){return _0x78b98c(_0x58b08b-0x133,_0x2703b1-0x176,_0x19b512,_0x58b08b- -0x5d7);}function _0x356c8c(_0x895c84,_0x20fa80,_0x454df9,_0x5e62d2){return _0x78b98c(_0x895c84-0x63,_0x20fa80-0x13,_0x5e62d2,_0x20fa80- -0x69);}if(_0x9d8abd[_0x356c8c(0x512,0x512,0x5d8,0x4a5)]!==_0x356c8c(0x5aa,0x578,0x592,0x4de)){if(!_0x477860[_0x356c8c(0x43a,0x4bd,0x4d8,0x473)])return;if(!_0x477860[_0x1069c6(-0x51,0x19,-0x4c,-0x16)]||_0x477860[_0x356c8c(0x4c1,0x51d,0x5e0,0x5b5)]['trim']()==='')return;if(_0x9d8abd['AassG'](_0x477860['triggerMod'+'e'],_0x356c8c(0x4da,0x5a1,0x62a,0x4fe))){if(_0x9d8abd[_0x1069c6(0x86,0xd9,0x34,0x13b)](_0x356c8c(0x508,0x4d9,0x446,0x56e),_0x9d8abd[_0x1069c6(0x12,-0x58,-0x5d,0x67)]))_0x579ce2+=_0x28f7b3,_0x47f65b&&_0x125b68(_0x8c5664);else{if(!_0x42be56||!_0x9d8abd['QjoNo'](checkTriggerWords,_0x477860['triggerWor'+'ds'],_0x42be56)){if(_0x9d8abd[_0x356c8c(0x4da,0x4c5,0x501,0x4d0)](_0x9d8abd[_0x1069c6(0x41,0x5f,0xa7,-0x31)],_0x9d8abd['wrTgM'])){const _0x1ae629=_0x12d328[_0x1069c6(0xb6,0x86,0x112,0x12d)]['split']('|');let _0x1db474=-0xa9*0x17+0x1ba+0xd75;while(!![]){switch(_0x1ae629[_0x1db474++]){case'0':const _0x3f3e5f={};_0x3f3e5f['name']=_0x12d328[_0x1069c6(-0x64,-0xa1,-0x76,0xa)],_0x3f3e5f['message']='Request\x20ab'+_0x356c8c(0x537,0x5e5,0x5d9,0x670);const _0x41b506={};_0x41b506[_0x356c8c(0x5d7,0x623,0x6dc,0x59a)]=![],_0x41b506['result']=null,_0x41b506['id']=_0x531086,_0x41b506['error']=_0x3f3e5f,_0x31ecae['emit'](_0x2b34ea,_0x41b506);continue;case'1':_0x4a80ab[_0x1069c6(0x6,0x41,0x3c,-0x22)+'us'](_0x262031,_0x3cc3e1[_0x1069c6(-0x46,0x62,-0x2f,-0xa2)]);continue;case'2':_0x2b1ec1=!![];continue;case'3':_0x78777b[_0x1069c6(-0xbd,-0x70,-0x45,-0xd4)](_0x4855b3);continue;case'4':return;}break;}}else return;}}}const _0x545c61={};_0x545c61[_0x1069c6(-0x6c,-0x11e,-0xab,0x4c)]=_0x477860[_0x1069c6(-0x6c,-0xbd,-0x5a,-0x78)]||'user',_0x545c61[_0x1069c6(-0x51,-0x84,-0x58,-0x25)]=_0x477860[_0x356c8c(0x4f1,0x51d,0x490,0x5e0)],_0x260937[_0x356c8c(0x4dd,0x496,0x55c,0x3d4)](_0x545c61);}else _0x248151+=_0x1e257d,_0x39e4f3&&_0x12d328[_0x1069c6(0x2b,0x91,0x3,0x22)](_0x4a21b5,_0x349fb1);});else _0x27d42f[_0x78b98c(0x4cf,0x5a1,0x50c,0x525)]&&Array[_0x4433e6(0x231,0xb5,0x17f,0x13b)](_0x27d42f[_0x78b98c(0x512,0x4eb,0x577,0x525)])&&(_0x9d8abd['gAAZg'](_0x9d8abd[_0x4433e6(0x140,0x105,0xec,0x140)],_0x9d8abd[_0x4433e6(0x145,0x10b,0x170,0x18a)])?_0x27d42f['history'][_0x78b98c(0x62d,0x5e2,0x5c4,0x678)](_0x2abe9a=>{function _0x43bfca(_0x5774f1,_0x280bfe,_0x5f4411,_0x246b6a){return _0x78b98c(_0x5774f1-0x129,_0x280bfe-0x139,_0x246b6a,_0x5774f1- -0x176);}function _0x29ab76(_0x148ca5,_0x4fda36,_0x41ea74,_0x508793){return _0x4433e6(_0x508793,_0x4fda36-0x106,_0x41ea74-0x27c,_0x508793-0x1a7);}if(_0x9d8abd['UMPQn'](_0x43bfca(0x3b3,0x466,0x3b1,0x331),'CGxZx')){if(_0x2abe9a[_0x43bfca(0x3d8,0x394,0x33f,0x455)]&&_0x2abe9a[_0x43bfca(0x3d8,0x345,0x3da,0x3d8)]['trim']()!==''){const _0x17147a={};_0x17147a[_0x29ab76(0x357,0x442,0x3c8,0x3b5)]=_0x9d8abd[_0x29ab76(0x53c,0x505,0x484,0x4b2)],_0x17147a[_0x43bfca(0x410,0x492,0x455,0x41a)]=_0x2abe9a['user'],_0x260937[_0x43bfca(0x389,0x2f9,0x441,0x38a)](_0x17147a);}if(_0x2abe9a[_0x43bfca(0x468,0x435,0x4bf,0x450)]&&_0x2abe9a[_0x29ab76(0x458,0x4b9,0x43b,0x432)]['trim']()!==''){const _0xf52471={};_0xf52471[_0x29ab76(0x376,0x35f,0x3c8,0x3ae)]=_0x9d8abd[_0x43bfca(0x493,0x3cc,0x4f0,0x517)],_0xf52471[_0x43bfca(0x410,0x385,0x470,0x391)]=_0x2abe9a[_0x43bfca(0x468,0x51a,0x4a0,0x528)],_0x260937[_0x29ab76(0x2d1,0x346,0x35c,0x3e0)](_0xf52471);}}else return _0x1dde8b;}):_0x9d8abd[_0x78b98c(0x55a,0x4e6,0x621,0x57c)](_0xbe93ae,_0x9d8abd[_0x4433e6(0x13b,0x230,0x1f7,0x280)]));function _0x4433e6(_0x276806,_0x3a5bb2,_0x3b9845,_0x3811da){return _0x21c117(_0x276806-0x1ec,_0x3b9845-0x18c,_0x276806,_0x3811da-0xe3);}const _0x191b33=_0x9d8abd[_0x78b98c(0x510,0x5a3,0x580,0x57c)](mergeAdjacentMessages,_0x260937),_0x5a3b76=_0x9d8abd[_0x78b98c(0x482,0x57a,0x59d,0x524)](processRollPlaceholders,_0x191b33);return _0x5a3b76;}const _0x3e30ca={};_0x3e30ca[_0x21c117(-0xfe,-0x92,-0x14a,-0x152)]=_0x564343(-0x30,0x37,-0x30,-0x5a),_0x3e30ca['char_desig'+'n']='角色/服装设计',_0x3e30ca['char_displ'+'ay']=_0x21c117(-0xa2,-0x6e,0x1f,0x2e),_0x3e30ca[_0x564343(-0xf2,-0x6d,-0x195,-0xf1)+'y']=_0x21c117(0x34,-0x81,0xc,-0x5f),_0x3e30ca[_0x21c117(0x8f,0x6a,0x121,0x12e)+'n']='翻译',_0x3e30ca[_0x564343(-0x194,-0x10a,-0x199,-0x16b)]=_0x564343(-0x24d,-0x200,-0x173,-0x19f);const REQUEST_TYPE_NAMES=_0x3e30ca;export async function executeTypedLLMRequest(_0x25153e,_0x4aa0e4,_0x28d754,_0xae93f9=null){const _0x37203b={'HhaAP':function(_0x24d6c5,_0x59d80d){return _0x24d6c5===_0x59d80d;},'aLdzM':_0x1a1a0e(0x1c4,0x1c9,0x21c,0x26e),'YJnCC':'Request\x20ab'+_0x16db26(0x451,0x49c,0x53a,0x4de),'JeNLy':_0x1a1a0e(0x197,0x136,0x237,0x1a7),'JecGH':function(_0x53f51d){return _0x53f51d();},'zKkNP':function(_0x1739f7,_0x43bb6c){return _0x1739f7!==_0x43bb6c;},'kzWmW':_0x16db26(0x3b8,0x3ac,0x41e,0x3de),'pFoLF':function(_0x4336c5,_0x48aeee){return _0x4336c5!==_0x48aeee;},'WsRot':'assistant','llGNg':_0x1a1a0e(0xf3,0xa1,0x9f,0x120)+'始新请求。','wcaXc':_0x16db26(0x34c,0x412,0x3c7,0x402),'iXBJV':'函数调用','GveOo':function(_0xcbe60f,_0x2c2ec3){return _0xcbe60f===_0x2c2ec3;},'YdnNX':function(_0x3f5431){return _0x3f5431();},'NHHww':function(_0x2217a0){return _0x2217a0();},'NObNw':function(_0x18f6ba,_0x53dedc){return _0x18f6ba(_0x53dedc);},'KPNcQ':function(_0x2579c7,_0x2bb435){return _0x2579c7(_0x2bb435);},'DoVgU':function(_0x41c869,_0x1fcf9d){return _0x41c869||_0x1fcf9d;},'eNXaF':_0x16db26(0x464,0x3d1,0x3c2,0x413),'BHKhw':'applicatio'+_0x16db26(0x49d,0x5e0,0x542,0x51b),'apAjo':function(_0x96e8c6,_0x1d6661){return _0x96e8c6===_0x1d6661;},'AOCjG':_0x16db26(0x485,0x46e,0x4a9,0x409),'oOCpq':_0x16db26(0x479,0x508,0x4ad,0x4e5),'IhHNW':function(_0xe70833,_0x3aecf5){return _0xe70833+_0x3aecf5;},'EJUSI':_0x16db26(0x46b,0x385,0x472,0x440),'OPOgg':function(_0x51731c,_0x5cc6fd,_0x58f688){return _0x51731c(_0x5cc6fd,_0x58f688);},'bqraQ':_0x16db26(0x3ed,0x36b,0x43a,0x389),'nBKJZ':function(_0x390fa7,_0x1e329a){return _0x390fa7===_0x1e329a;},'amMRE':'GOMpI','wdBwE':'ksRqh','CrViL':function(_0x1946a9,_0x318dc8){return _0x1946a9>_0x318dc8;},'NViRz':function(_0x305af6,_0x4ab5d9){return _0x305af6!==_0x4ab5d9;},'PMQBw':_0x1a1a0e(0xdc,0x191,0x114,0x10c),'Merxl':'ijbLw','sXLiG':'zfXlS','cuXcn':_0x16db26(0x50a,0x3f4,0x472,0x4ad),'mnrTh':_0x16db26(0x522,0x436,0x4f0,0x495),'wiuTW':function(_0x2c33fb,_0x3003bd){return _0x2c33fb===_0x3003bd;},'NmzGa':_0x16db26(0x3ac,0x367,0x3ba,0x3cf),'CJfvH':_0x1a1a0e(0x5f,0x19c,0x69,0xdd),'YaVmY':function(_0xbf1f7d,_0x48df9f){return _0xbf1f7d===_0x48df9f;},'nRsbE':_0x1a1a0e(0x152,0x5c,0x1b6,0x129),'SAeyU':_0x16db26(0x522,0x4c5,0x4c4,0x469),'tyPNe':_0x1a1a0e(0x1df,0xd4,0xac,0x173),'uEsBf':'DpAOm','sGsax':_0x16db26(0x4dc,0x396,0x4d8,0x42c),'FcBgS':_0x16db26(0x47d,0x330,0x465,0x3d4),'VYRCK':_0x16db26(0x53e,0x4ca,0x4fb,0x4b4),'VPNJm':_0x16db26(0x36d,0x404,0x345,0x394),'xbchZ':function(_0x1436da,_0x5e3808){return _0x1436da!==_0x5e3808;},'GJRvd':'data:\x20','leKQe':function(_0x14cb27,_0x34fe14){return _0x14cb27===_0x34fe14;},'OJcVK':'qPDwP','YzaQl':function(_0x4654a9,_0x59d1cc){return _0x4654a9(_0x59d1cc);},'IrOJn':_0x16db26(0x4d1,0x51f,0x484,0x500),'kNxbV':function(_0x516d85,_0x404496){return _0x516d85===_0x404496;},'RFvfB':'FGgyS','VLMUv':function(_0x5e6bd6,_0x263493){return _0x5e6bd6>_0x263493;},'uXeij':_0x1a1a0e(0x10d,0x13b,0xd6,0x18d),'SugKS':function(_0x474f6b,_0x4eb8e2){return _0x474f6b!==_0x4eb8e2;},'ENRKv':'WwlNO','Oknra':'FGCve','XEvJr':function(_0x436e93,_0x29f760){return _0x436e93!==_0x29f760;},'OMhNd':'ooqAT','HELWn':_0x1a1a0e(0x11d,0x199,0x11d,0x1a8),'iCvyK':_0x16db26(0x404,0x500,0x408,0x4c7),'NMgoj':_0x16db26(0x4a7,0x515,0x4e2,0x45c),'iyDSu':function(_0x1866f5,_0x54862e){return _0x1866f5===_0x54862e;},'bOGYB':_0x16db26(0x4ec,0x4c4,0x46f,0x4a1),'pcByO':function(_0x5bc3c0,_0x4f2d97){return _0x5bc3c0===_0x4f2d97;}},{prompt:_0x15a476,id:_0x4a8cb8}=_0x25153e;if(!_0x4a8cb8||!_0x15a476)return;currentLLMRequestController&&(currentLLMRequestController['abort'](),toastr[_0x16db26(0x55e,0x529,0x475,0x4a3)](_0x37203b[_0x1a1a0e(0x122,0x189,0x218,0x196)]));currentLLMRequestController=new AbortController();const _0x1ef29f=currentLLMRequestController[_0x16db26(0x4d2,0x483,0x3de,0x44c)],_0x334cc7=currentLLMRequestController;function _0x1a1a0e(_0x306965,_0x5139d6,_0x103424,_0x35ab4e){return _0x21c117(_0x306965-0xc7,_0x35ab4e-0x18a,_0x103424,_0x35ab4e-0xbf);}const _0xe51068=REQUEST_TYPE_NAMES[_0x4aa0e4]||_0x4aa0e4,_0x4162fc={};_0x4162fc[_0x1a1a0e(0x1e0,0x1a2,0x121,0x169)]='LLM:\x20'+_0xe51068,_0x4162fc[_0x1a1a0e(0x193,0xe7,0x17e,0x13f)]=TaskType[_0x1a1a0e(0x14c,0x84,0x173,0xef)],_0x4162fc[_0x1a1a0e(0x139,0x1c3,0xff,0x177)]=_0x4a8cb8;const _0x472942=taskQueue[_0x1a1a0e(0x2f0,0x2dc,0x247,0x229)](_0x4162fc);llmTaskControllers['set'](_0x472942,currentLLMRequestController),taskQueue[_0x16db26(0x4d6,0x45e,0x4f5,0x46d)+'us'](_0x472942,TaskStatus[_0x1a1a0e(0x226,0x23a,0x156,0x21d)]),_0x37203b[_0x16db26(0x595,0x4c9,0x4a3,0x4fb)](startFabLoading);let _0x494533=![];function _0x16db26(_0x1182f2,_0x2f23aa,_0x105dc2,_0x3b81b1){return _0x21c117(_0x1182f2-0x52,_0x3b81b1-0x43b,_0x1182f2,_0x3b81b1-0x4);}_0x37203b[_0x16db26(0x4d7,0x533,0x45f,0x480)](clearLog),_0x37203b['NObNw'](addLog,_0x16db26(0x498,0x3d9,0x473,0x494)+'请求开始\x20('+_0xe51068+_0x1a1a0e(0x11f,0x19b,0x1b6,0x1d3)),addLog(_0x1a1a0e(0x42,0x98,0x5d,0xed)+_0x4a8cb8),_0x37203b[_0x16db26(0x56f,0x596,0x4da,0x521)](addLog,'发送的\x20Prompt'+':'),_0x37203b[_0x16db26(0x50d,0x543,0x467,0x521)](addLog,formatPromptForDisplay(_0x15a476));const _0x2963c7=_0x37203b[_0x16db26(0x4d9,0x459,0x5a9,0x521)](getEffectiveConfigForRequestType,_0x4aa0e4),{api_url:_0x23806a,api_key:_0x1e41d7,model:_0x592916,temperature:_0x557542,top_p:_0x174370,max_tokens:_0x174aca,stream:_0x48684f,bypass_proxy:_0x160695}=_0x2963c7;if(_0x37203b[_0x16db26(0x3bc,0x359,0x479,0x3ca)](!_0x23806a,!_0x1e41d7)||!_0x592916){if(_0x37203b['zKkNP'](_0x37203b[_0x16db26(0x44b,0x466,0x327,0x3ae)],_0x37203b['eNXaF'])){if(_0x37203b[_0x16db26(0x4c6,0x56f,0x539,0x4f5)](_0x30b824[_0x16db26(0x4de,0x4cf,0x3d8,0x41a)],'AbortError')){const _0x4a86a7=_0x37203b['aLdzM'][_0x16db26(0x3e9,0x487,0x481,0x3cb)]('|');let _0x3896b5=0x1531+-0x3*-0x75c+-0x2b45;while(!![]){switch(_0x4a86a7[_0x3896b5++]){case'0':_0x14075c=!![];continue;case'1':_0x222491['updateStat'+'us'](_0x1edc41,_0x228256[_0x1a1a0e(0xb5,0x179,0x21d,0x170)]);continue;case'2':const _0x514282={};_0x514282[_0x1a1a0e(0x210,0x11b,0x15c,0x169)]=_0x16db26(0x3ef,0x4fb,0x517,0x45c),_0x514282[_0x1a1a0e(0xff,0x4a,0x114,0xe2)]=_0x37203b[_0x1a1a0e(0x16e,0x1db,0x210,0x16c)];const _0x1a3b96={};_0x1a3b96[_0x16db26(0x5b0,0x4f2,0x5e1,0x51c)]=![],_0x1a3b96[_0x1a1a0e(0x1fe,0x15f,0x14e,0x1db)]=null,_0x1a3b96['id']=_0x51440c,_0x1a3b96[_0x1a1a0e(0x248,0x1fb,0x230,0x1fa)]=_0x514282,_0x114134[_0x16db26(0x37a,0x446,0x30f,0x397)](_0x471da1,_0x1a3b96);continue;case'3':_0x55dbc4['delete'](_0x1ddb71);continue;case'4':return;}break;}}_0x18851d['error'](_0x4c8180+_0x16db26(0x3c4,0x336,0x391,0x3eb),_0x2777dc);const _0x57e4f5=_0x1a1a0e(0x220,0x281,0x2ce,0x215)+_0x26d3b5[_0x1a1a0e(0xdf,0x3c,0x192,0xe2)];_0x492687&&_0x324a81(_0x57e4f5);_0x2c36bf[_0x1a1a0e(0x196,0x14e,0x22f,0x1fa)](_0x29877f[_0x1a1a0e(0x66,0xce,0xd6,0xe2)]),_0x58e84a['completeTa'+'sk'](_0x23cd35,![]),_0x439e9d['delete'](_0x49e939);const _0x15a2fe={};_0x15a2fe[_0x1a1a0e(0x1f0,0x2aa,0x23f,0x26b)]=![],_0x15a2fe[_0x16db26(0x46c,0x432,0x519,0x48c)]=_0x57e4f5,_0x15a2fe['id']=_0x1b89e2,_0x3a76ee[_0x1a1a0e(0x79,0x18c,0x53,0xe6)](_0x560952,_0x15a2fe);}else{const _0x21d31e=_0xe51068+(_0x1a1a0e(0x13e,0x118,0x238,0x18c)+'\x20API\x20Key,\x20'+_0x1a1a0e(0x185,0x1fb,0x131,0x159)+'置。');toastr['error'](_0x21d31e);const _0x25f90f={};_0x25f90f[_0x16db26(0x53f,0x515,0x561,0x51c)]=![],_0x25f90f[_0x1a1a0e(0x24c,0x24d,0x21d,0x1db)]=_0x21d31e,_0x25f90f['id']=_0x4a8cb8,eventSource[_0x16db26(0x327,0x334,0x424,0x397)](_0x28d754,_0x25f90f);return;}}const _0x3a52c7=_0x23806a[_0x16db26(0x4f3,0x589,0x448,0x514)](/\/$/,'');let _0x2abf26,_0x2a58a7,_0x150ac0;if(_0x160695){_0x2abf26=_0x3a52c7+(_0x16db26(0x4a5,0x4c9,0x3ae,0x43a)+_0x1a1a0e(0x197,0x188,0x149,0x180));const _0x53107f={};_0x53107f[_0x16db26(0x555,0x54e,0x558,0x4f9)+'pe']=_0x37203b[_0x16db26(0x4fc,0x4e6,0x401,0x45a)],_0x53107f[_0x16db26(0x3dc,0x4fb,0x48d,0x44b)+'ion']=_0x16db26(0x3a6,0x398,0x451,0x41b)+_0x1e41d7,_0x2a58a7=_0x53107f;const _0xbd12bb={};_0xbd12bb[_0x16db26(0x458,0x4f3,0x511,0x4c2)]=_0x592916,_0xbd12bb[_0x1a1a0e(0x267,0x2d7,0x2a0,0x20f)]=_0x15a476,_0xbd12bb[_0x16db26(0x33d,0x2ff,0x3f4,0x3a8)+'e']=_0x557542,_0xbd12bb[_0x16db26(0x49e,0x42e,0x495,0x448)]=_0x174370,_0xbd12bb['max_tokens']=_0x174aca,_0xbd12bb['stream']=_0x48684f,_0x150ac0=_0xbd12bb;}else{if(_0x37203b['apAjo'](_0x37203b[_0x16db26(0x473,0x423,0x41e,0x3b2)],_0x37203b[_0x1a1a0e(0x5d,0x16e,0x1c6,0x101)])){let _0x3db148=_0x3a52c7;!_0x3db148['endsWith'](_0x1a1a0e(0x21e,0x168,0x24d,0x18f))&&!_0x3db148[_0x16db26(0x455,0x4a2,0x4d6,0x44e)](_0x37203b['oOCpq'])&&(_0x3db148=_0x37203b['IhHNW'](_0x3db148,_0x37203b[_0x16db26(0x471,0x489,0x47b,0x3e1)]));_0x3db148=_0x3db148[_0x16db26(0x4d4,0x493,0x59b,0x514)](/\/v1\/$/,_0x37203b[_0x16db26(0x3e4,0x416,0x359,0x3e1)]),_0x2abf26='/api/backe'+_0x1a1a0e(0xaf,0x15a,0x1f5,0x175)+'ompletions'+'/generate',_0x2a58a7=getRequestHeaders(window['token']);const _0x3af412={};_0x3af412[_0x1a1a0e(0x28c,0x107,0x20b,0x1d1)+_0x1a1a0e(0x177,0x144,0x144,0x13d)+'ce']=_0x16db26(0x508,0x46b,0x4a2,0x4fd),_0x3af412['custom_url']=_0x3db148,_0x3af412[_0x16db26(0x38f,0x431,0x45a,0x3d6)+_0x16db26(0x383,0x480,0x3be,0x40e)+'rs']=_0x1a1a0e(0x235,0x1bd,0x148,0x19a)+'ion:\x20\x22Bear'+_0x16db26(0x46b,0x3f9,0x342,0x3e9)+_0x1e41d7+'\x22',_0x3af412[_0x1a1a0e(0x264,0x231,0x296,0x211)]=_0x592916,_0x3af412[_0x1a1a0e(0x239,0x279,0x264,0x20f)]=_0x15a476,_0x3af412['temperatur'+'e']=_0x557542,_0x3af412[_0x16db26(0x458,0x455,0x3fb,0x448)]=_0x174370,_0x3af412[_0x1a1a0e(0x90,0x10e,0x15c,0x124)]=_0x174aca,_0x3af412[_0x1a1a0e(0x165,0x20c,0x164,0x204)]=_0x48684f,_0x150ac0=_0x3af412;}else _0x4547e2[_0x16db26(0x4c2,0x401,0x3d9,0x43f)](),_0x1e7a55[_0x1a1a0e(0x171,0x1aa,0x21d,0x1f2)](_0x37203b[_0x16db26(0x43d,0x4e3,0x49a,0x4cf)]);}_0xae93f9&&_0x37203b[_0x1a1a0e(0x268,0x1c5,0x1a9,0x270)](_0xae93f9,_0x1a1a0e(0x195,0x1ad,0x1f1,0x262)+_0xe51068+_0x1a1a0e(0x2df,0x19b,0x2a9,0x24e));try{const _0x6472f9=await _0x37203b['OPOgg'](fetch,_0x2abf26,{'method':_0x1a1a0e(0x18b,0x273,0x1b1,0x231),'headers':_0x2a58a7,'body':JSON[_0x16db26(0x429,0x510,0x4b6,0x4cd)](_0x150ac0),'signal':_0x1ef29f});if(!_0x6472f9['ok']){try{const _0x3fcf4b=await _0x6472f9[_0x16db26(0x41b,0x565,0x4bb,0x4d6)]();if(_0x3fcf4b[_0x1a1a0e(0x1f9,0x2a5,0x27a,0x1fa)]){let _0x2b39d6;if(typeof _0x3fcf4b[_0x1a1a0e(0x1f2,0x14f,0x1b1,0x1fa)]===_0x37203b[_0x1a1a0e(0x249,0x1ae,0xb7,0x17e)]&&_0x3fcf4b[_0x1a1a0e(0x22d,0x187,0x29c,0x1fa)][_0x1a1a0e(0x12d,0xbe,0xd4,0xe2)]){if(_0x37203b[_0x1a1a0e(0x2dd,0x311,0x2d7,0x251)](_0x37203b['amMRE'],_0x37203b['wdBwE']))_0x37203b[_0x16db26(0x52b,0x46b,0x550,0x4fb)](_0x1bfe23);else{_0x2b39d6=''+_0x3fcf4b[_0x1a1a0e(0x249,0x148,0x1ad,0x1fa)][_0x1a1a0e(0xde,0xe0,0x63,0xe2)];const _0x569a70=[];if(_0x3fcf4b[_0x16db26(0x514,0x4c4,0x49e,0x4ab)][_0x16db26(0x353,0x336,0x437,0x3f0)])_0x569a70[_0x16db26(0x3b3,0x404,0x38d,0x38f)](_0x1a1a0e(0x17a,0xb5,0xf1,0x142)+_0x3fcf4b[_0x16db26(0x42d,0x41c,0x4b1,0x4ab)][_0x1a1a0e(0x108,0xeb,0x206,0x13f)]);if(_0x3fcf4b[_0x16db26(0x429,0x455,0x49f,0x4ab)]['code'])_0x569a70[_0x16db26(0x30f,0x3b4,0x41c,0x38f)](_0x1a1a0e(0x23f,0x1ad,0x333,0x268)+_0x3fcf4b[_0x1a1a0e(0x161,0x16c,0x1ec,0x1fa)][_0x1a1a0e(0x151,0x163,0x1ca,0x194)]);if(_0x37203b[_0x1a1a0e(0x95,0x13e,0x176,0x15c)](_0x569a70[_0x16db26(0x447,0x56e,0x504,0x50d)],-0x662*-0x2+0x2419+-0x30dd)){if(_0x37203b[_0x16db26(0x30a,0x417,0x374,0x3ce)](_0x37203b[_0x1a1a0e(0xd7,0xed,0x1dc,0x174)],_0x37203b[_0x1a1a0e(0x180,0x1c6,0x218,0x242)]))_0x2b39d6+='\x20('+_0x569a70[_0x1a1a0e(0x105,0x14b,0x137,0xfe)](',\x20')+')';else{if(_0x54502b[_0x16db26(0x424,0x49c,0x454,0x3de)]&&_0x37203b[_0x16db26(0x46b,0x50a,0x429,0x4bc)](_0x144d79[_0x16db26(0x3cf,0x3e2,0x42d,0x3de)][_0x16db26(0x457,0x52d,0x47f,0x4c4)](),'')){const _0x25dd24={};_0x25dd24['role']=_0x37203b['kzWmW'],_0x25dd24[_0x1a1a0e(0x1c5,0x207,0x133,0x165)]=_0x4771f9[_0x1a1a0e(0x1f3,0x167,0xb8,0x12d)],_0x24db68[_0x1a1a0e(0x159,0xaa,0x6f,0xde)](_0x25dd24);}if(_0x451876[_0x16db26(0x3c2,0x538,0x4dc,0x46e)]&&_0x37203b['pFoLF'](_0x122158[_0x16db26(0x498,0x48c,0x4c1,0x46e)][_0x1a1a0e(0x199,0x23d,0x202,0x213)](),'')){const _0x4ca8a3={};_0x4ca8a3[_0x16db26(0x37e,0x378,0x35e,0x3fb)]=_0x37203b['WsRot'],_0x4ca8a3[_0x1a1a0e(0x15a,0xc4,0x9a,0x165)]=_0x8b1d62['assistant'],_0x2ea773[_0x16db26(0x452,0x336,0x363,0x38f)](_0x4ca8a3);}}}}}else _0x2b39d6=''+JSON['stringify'](_0x3fcf4b[_0x16db26(0x4f4,0x552,0x528,0x4ab)]);throw new Error(_0x2b39d6);}}catch(_0x544090){if(_0x37203b[_0x16db26(0x493,0x4b6,0x463,0x463)](_0x37203b[_0x16db26(0x427,0x4f3,0x40f,0x49d)],_0x37203b[_0x16db26(0x43d,0x534,0x47d,0x4fa)])){if(_0x544090[_0x16db26(0x3c1,0x430,0x3a3,0x393)]['includes'](_0x16db26(0x4cc,0x427,0x435,0x423))||_0x544090[_0x16db26(0x33d,0x400,0x381,0x393)][_0x1a1a0e(0x1bf,0x1e1,0x1e9,0x19d)](_0x37203b[_0x16db26(0x583,0x54a,0x54d,0x4e0)])){if(_0x37203b[_0x16db26(0x3af,0x4d7,0x464,0x455)](_0x37203b[_0x16db26(0x471,0x324,0x436,0x3ed)],_0x37203b[_0x1a1a0e(0xac,0xe2,0x1fe,0x13c)]))throw _0x544090;else return _0x5d7b15;}}else return _0xa6affa[_0x1a1a0e(0x2e6,0x16c,0x173,0x21c)](_0x5e7e3a,null,-0x22*0x10d+0x1927*0x1+0xa95);}throw new Error(_0x16db26(0x58d,0x561,0x44e,0x50e)+_0x6472f9['status']+'\x20'+_0x6472f9[_0x16db26(0x352,0x3e3,0x467,0x3d0)]);}let _0xeebad3='';if(_0x48684f){const _0xf09f47=_0x6472f9[_0x16db26(0x381,0x46e,0x365,0x42a)][_0x1a1a0e(0x287,0x174,0x1ac,0x23f)](),_0x2983ac=new TextDecoder(_0x37203b[_0x1a1a0e(0x214,0x25b,0x1d4,0x1d5)]);let _0x1a2fa5='';while(!![]){if(_0x16db26(0x4ba,0x48c,0x539,0x4bb)!=='FFPXc')_0x34dd41[_0x1a1a0e(0x168,0x18d,0x19f,0x18e)](),_0x205c93[_0x16db26(0x4ad,0x54b,0x46d,0x4a3)](_0x37203b[_0x1a1a0e(0x1b4,0x246,0x18c,0x196)]);else{const {done:_0x7e5034,value:_0x283701}=await _0xf09f47['read']();if(_0x7e5034)break;const _0x3eae60={};_0x3eae60[_0x1a1a0e(0x197,0x1fe,0x220,0x204)]=!![],_0x1a2fa5+=_0x2983ac[_0x1a1a0e(0x1e7,0x253,0x1b3,0x259)](_0x283701,_0x3eae60);const _0x18d57c=_0x1a2fa5[_0x16db26(0x3da,0x48d,0x396,0x3cb)]('\x0a');_0x1a2fa5=_0x18d57c['pop']()||'';for(const _0x12131a of _0x18d57c){if(_0x37203b[_0x1a1a0e(0x13d,0x6f,0xe8,0x117)](_0x37203b[_0x1a1a0e(0x19c,0x1bd,0x1a9,0x195)],_0x37203b[_0x16db26(0x437,0x44f,0x50c,0x446)])){const _0x2c3cef=_0x12131a[_0x16db26(0x4d0,0x507,0x406,0x4c4)]();if(!_0x2c3cef||_0x37203b['HhaAP'](_0x2c3cef,_0x1a1a0e(0x17f,0x10a,0x198,0x150)+'E]'))continue;if(_0x2c3cef['startsWith'](_0x16db26(0x395,0x4e2,0x49a,0x44f))){if(_0x37203b[_0x16db26(0x3f0,0x402,0x486,0x463)]('UPhXK',_0x37203b['SAeyU'])){const _0x276da1={};_0x276da1['role']=_0x37203b[_0x1a1a0e(0x274,0x247,0x267,0x1e5)],_0x276da1['content']=_0x42c5ce[_0x16db26(0x43c,0x4d6,0x4c8,0x46e)],_0x30a59a[_0x1a1a0e(0xf4,0xa8,0x13d,0xde)](_0x276da1);}else try{if(_0x37203b['tyPNe']===_0x37203b[_0x1a1a0e(0x2bb,0x248,0x2a4,0x1f1)]){const _0x3d3cb1={};_0x3d3cb1[_0x16db26(0x361,0x47a,0x43d,0x3f8)]=_0x16db26(0x2ed,0x388,0x3f4,0x3a2),_0x3d3cb1['user']='用户',_0x3d3cb1['assistant']=_0x37203b[_0x1a1a0e(0xaa,0x1fc,0x179,0x134)],_0x3d3cb1['function']=_0x37203b[_0x16db26(0x377,0x381,0x475,0x418)],_0x3d3cb1[_0x16db26(0x3e1,0x385,0x498,0x438)]='工具';const _0x1bcbb4=_0x3d3cb1;return _0x1bcbb4[_0x51ab44]||_0x5db1c4;}else{const _0x2f7afe=_0x2c3cef[_0x16db26(0x3cd,0x357,0x3c2,0x3b0)](-0xb*0xa7+0xd97+-0x664),_0x5f48cb=JSON[_0x1a1a0e(0xbd,0x173,0x230,0x188)](_0x2f7afe),_0x5128e5=_0x5f48cb[_0x1a1a0e(0xfd,0x1b0,0xe8,0xfc)]?.[0x1c6e+0x3*0x19b+-0x213f]?.[_0x1a1a0e(0x155,0x145,0xd8,0xf4)]?.[_0x1a1a0e(0x139,0x107,0x182,0x165)];if(_0x5128e5){if(_0x37203b['pFoLF'](_0x1a1a0e(0x194,0x7c,0x11a,0x12e),_0x37203b[_0x16db26(0x32a,0x365,0x41a,0x39c)]))_0xeebad3+=_0x5128e5,_0xae93f9&&_0x37203b[_0x1a1a0e(0x1e4,0x1d3,0x1b1,0x1aa)](_0xae93f9,_0xeebad3);else{let _0x28b5df;if(_0x37203b[_0x16db26(0x32b,0x39c,0x37d,0x3c6)](typeof _0xede24a[_0x1a1a0e(0x19e,0x174,0x2b2,0x1fa)],_0x1a1a0e(0x114,0x16,0x87,0xd8))&&_0x381e13[_0x1a1a0e(0x1d7,0x1aa,0x22c,0x1fa)]['message']){_0x28b5df=''+_0x31fde0[_0x1a1a0e(0x2c4,0x242,0x1d4,0x1fa)][_0x16db26(0x35e,0x2d4,0x38b,0x393)];const _0x2b2272=[];if(_0x165b1b[_0x1a1a0e(0x1d2,0x2bb,0x1eb,0x1fa)][_0x1a1a0e(0x1ca,0xfd,0x93,0x13f)])_0x2b2272[_0x1a1a0e(0x146,0x18c,0x199,0xde)](_0x1a1a0e(0xcc,0x1fa,0x129,0x142)+_0x3eecc5[_0x1a1a0e(0x146,0x1ed,0x1ac,0x1fa)][_0x16db26(0x4b5,0x3af,0x44b,0x3f0)]);if(_0x4f635a['error']['code'])_0x2b2272['push'](_0x16db26(0x5e1,0x4e2,0x590,0x519)+_0x32598a[_0x16db26(0x43f,0x3fc,0x428,0x4ab)][_0x16db26(0x4a3,0x3e9,0x491,0x445)]);_0x2b2272[_0x16db26(0x5b9,0x588,0x598,0x50d)]>0x1*-0xabd+0x18cf+-0x1*0xe12&&(_0x28b5df+='\x20('+_0x2b2272[_0x1a1a0e(0x124,0x117,0xad,0xfe)](',\x20')+')');}else _0x28b5df=''+_0x412e93['stringify'](_0x2263f8[_0x1a1a0e(0x1fc,0x1f0,0x152,0x1fa)]);throw new _0x2183c9(_0x28b5df);}}}}catch(_0x3d7561){_0x37203b[_0x1a1a0e(0x31e,0x2c1,0x2be,0x26f)]===_0x37203b['VYRCK']?_0x21eb10=''+_0x573ad0[_0x1a1a0e(0x276,0x2e2,0x268,0x21c)](_0x30d083[_0x16db26(0x536,0x3f7,0x472,0x4ab)]):console[_0x16db26(0x4da,0x4c4,0x4e3,0x491)](_0x37203b[_0x1a1a0e(0x2bf,0x185,0x270,0x1fe)],_0x3d7561[_0x1a1a0e(0x7e,0x155,0x92,0xe2)]);}}}else _0x5f1a96['push'](_0xca0151['text']||'');}}}if(_0x1a2fa5[_0x1a1a0e(0x2d9,0x268,0x253,0x213)]()&&_0x37203b[_0x1a1a0e(0x2c6,0x1ac,0x2be,0x246)](_0x1a2fa5[_0x16db26(0x4b2,0x4e7,0x506,0x4c4)](),_0x16db26(0x4c9,0x3cc,0x36f,0x401)+'E]')&&_0x1a2fa5[_0x1a1a0e(0x2ad,0x178,0x27c,0x213)]()[_0x1a1a0e(0x198,0xd7,0xf3,0x148)](_0x37203b[_0x1a1a0e(0x1a6,0x191,0x1b9,0x14e)]))try{const _0x83dd2d=_0x1a2fa5[_0x1a1a0e(0x205,0x1a0,0x279,0x213)]()[_0x1a1a0e(0x1af,0x78,0x167,0xff)](0x15c1*0x1+-0x52e+0xdf*-0x13),_0x59f7d9=JSON['parse'](_0x83dd2d),_0x24b262=_0x59f7d9[_0x16db26(0x428,0x39b,0x2fa,0x3ad)]?.[0xfd9*-0x1+-0xb42+0x3*0x909]?.[_0x16db26(0x432,0x336,0x39c,0x3a5)]?.[_0x16db26(0x418,0x498,0x4b1,0x416)];_0x24b262&&(_0x37203b[_0x1a1a0e(0x266,0x267,0x2e4,0x258)](_0x16db26(0x44d,0x4ec,0x482,0x48d),_0x37203b['OJcVK'])?(_0xeebad3+=_0x24b262,_0xae93f9&&_0x37203b[_0x16db26(0x5d3,0x5a0,0x59e,0x51e)](_0xae93f9,_0xeebad3)):_0xf84ee9(_0x357656));}catch(_0x183d22){console['warn'](_0x16db26(0x4b7,0x4e2,0x42b,0x4ae)+'buffer):',_0x183d22['message']);}!_0xeebad3&&(_0xeebad3=_0x37203b['IrOJn'],toastr['warning'](_0xe51068+(_0x1a1a0e(0x1ee,0x1d3,0x8f,0x14f)+_0x1a1a0e(0x209,0x136,0x20c,0x17f)+'断、max_toke'+_0x1a1a0e(0x2a6,0x249,0x199,0x24d)+_0x1a1a0e(0x18b,0x251,0x233,0x1e7))));}else{const _0x2a408c=await _0x6472f9[_0x1a1a0e(0x2c3,0x179,0x2b0,0x225)]();if(_0x2a408c[_0x16db26(0x439,0x578,0x438,0x4ab)]){if(_0x37203b['kNxbV'](_0x37203b[_0x1a1a0e(0x1a9,0x159,0x1e8,0x21b)],_0x37203b['RFvfB'])){let _0x5237ee;if(_0x37203b['apAjo'](typeof _0x2a408c[_0x16db26(0x4f1,0x477,0x52b,0x4ab)],_0x16db26(0x401,0x3af,0x3d3,0x389))&&_0x2a408c['error'][_0x1a1a0e(0x1a5,0xee,0x116,0xe2)]){_0x5237ee=''+_0x2a408c[_0x16db26(0x4f5,0x529,0x524,0x4ab)][_0x1a1a0e(0xe2,0x96,0x50,0xe2)];const _0x1d854e=[];if(_0x2a408c[_0x1a1a0e(0x2b9,0x13c,0x14e,0x1fa)][_0x1a1a0e(0x1cc,0x143,0x108,0x13f)])_0x1d854e[_0x16db26(0x457,0x310,0x458,0x38f)](_0x16db26(0x4ad,0x3c7,0x457,0x3f3)+_0x2a408c[_0x16db26(0x54d,0x4ff,0x478,0x4ab)][_0x16db26(0x3e5,0x32e,0x408,0x3f0)]);if(_0x2a408c[_0x1a1a0e(0x21e,0x1aa,0x1bd,0x1fa)][_0x1a1a0e(0xf1,0x242,0x20c,0x194)])_0x1d854e[_0x16db26(0x3f7,0x3bb,0x341,0x38f)](_0x16db26(0x472,0x583,0x560,0x519)+_0x2a408c[_0x16db26(0x46c,0x493,0x444,0x4ab)][_0x1a1a0e(0x22b,0x1d1,0x181,0x194)]);_0x37203b['VLMUv'](_0x1d854e['length'],-0x972+-0xc4f*-0x2+0x1*-0xf2c)&&('GbeNX'!==_0x37203b[_0x16db26(0x4ad,0x581,0x4c0,0x506)]?_0x255fe5=_0x3243b8:_0x5237ee+='\x20('+_0x1d854e[_0x1a1a0e(0xb3,0x60,0x181,0xfe)](',\x20')+')');}else _0x37203b[_0x1a1a0e(0x157,0x8d,0x18e,0x116)](_0x37203b[_0x16db26(0x352,0x416,0x487,0x417)],_0x37203b[_0x16db26(0x3cf,0x4d5,0x4b2,0x419)])?_0x5237ee=''+JSON['stringify'](_0x2a408c['error']):(_0x37203b['HhaAP'](_0x2f78e9,_0x377515)&&(_0x3b7308=null),(!_0x3cb090||_0x37203b[_0x16db26(0x5b8,0x4cb,0x598,0x4f5)](_0x3fb115,null))&&_0x27f257());throw new Error(_0x5237ee);}else _0xd59ed[_0x16db26(0x489,0x3c3,0x4a6,0x43f)](),_0x400df5[_0x1a1a0e(0x124,0x148,0xc1,0xf9)](_0x154073),_0xd4cfa5[_0x16db26(0x527,0x59c,0x4a3,0x4fc)](_0x16db26(0x47f,0x422,0x4c0,0x4d1)+_0x1a1a0e(0x256,0x139,0x12e,0x1e2)+_0x4240eb);}_0xeebad3=_0x2a408c['choices']?.[-0xd1d+0x1*-0x499+0x11b6]?.['message']?.['content']||'',!_0xeebad3&&(_0xeebad3=_0x37203b[_0x16db26(0x410,0x447,0x4d5,0x489)],toastr[_0x16db26(0x528,0x589,0x532,0x4f2)](_0xe51068+(_0x1a1a0e(0xd3,0xb2,0x1fa,0x14f)+_0x16db26(0x45b,0x383,0x4da,0x430)+_0x16db26(0x434,0x404,0x431,0x47d)+_0x16db26(0x441,0x486,0x4a0,0x4fe)+_0x16db26(0x47a,0x50e,0x4c4,0x498)))),_0xae93f9&&_0xae93f9(_0xeebad3);}_0x37203b[_0x1a1a0e(0x105,0x199,0xf7,0x1aa)](addLog,_0x16db26(0x3bf,0x3ae,0x444,0x3ac)+_0x1a1a0e(0xe1,0x129,0x132,0xec)),_0x37203b[_0x16db26(0x5a7,0x53b,0x468,0x521)](addLog,_0xeebad3),_0x37203b['NObNw'](addLog,_0x16db26(0x420,0x4c8,0x414,0x494)+_0x1a1a0e(0x207,0x2a1,0x270,0x1eb)),taskQueue[_0x1a1a0e(0x1ea,0x1aa,0x1c6,0x12c)+'sk'](_0x472942,!![]),llmTaskControllers['delete'](_0x472942);const _0x185614={};_0x185614[_0x1a1a0e(0x2bf,0x26b,0x232,0x26b)]=!![],_0x185614['result']=_0xeebad3,_0x185614['id']=_0x4a8cb8,_0x185614[_0x16db26(0x419,0x41e,0x49d,0x3fc)]=![],eventSource[_0x16db26(0x335,0x345,0x411,0x397)](_0x28d754,_0x185614);}catch(_0x89d8f0){if(_0x37203b['XEvJr'](_0x37203b[_0x16db26(0x3cb,0x43e,0x4c0,0x434)],_0x37203b[_0x1a1a0e(0x1b7,0x110,0x137,0x13b)])){if(_0x37203b[_0x16db26(0x5d6,0x52e,0x5b8,0x509)](_0x89d8f0[_0x1a1a0e(0xf7,0x17e,0x1f0,0x169)],_0x1a1a0e(0x172,0x16e,0x20e,0x1ab))){const _0x4efa31=_0x37203b[_0x16db26(0x543,0x4cf,0x518,0x49e)][_0x1a1a0e(0x149,0x193,0x83,0x11a)]('|');let _0x602435=0x2085+0x83d*-0x2+0x100b*-0x1;while(!![]){switch(_0x4efa31[_0x602435++]){case'0':return;case'1':llmTaskControllers[_0x16db26(0x323,0x3ab,0x2e0,0x3aa)](_0x472942);continue;case'2':taskQueue['updateStat'+'us'](_0x472942,TaskStatus[_0x1a1a0e(0x19b,0x21b,0xc0,0x170)]);continue;case'3':const _0x2ba47c={};_0x2ba47c[_0x16db26(0x3f8,0x381,0x49f,0x41a)]=_0x37203b[_0x1a1a0e(0x1db,0x1b6,0x207,0x252)],_0x2ba47c[_0x1a1a0e(0x115,0x90,0x15d,0xe2)]=_0x37203b['YJnCC'];const _0x1a49c8={};_0x1a49c8[_0x16db26(0x495,0x5c1,0x5b8,0x51c)]=![],_0x1a49c8['result']=null,_0x1a49c8['id']=_0x4a8cb8,_0x1a49c8[_0x1a1a0e(0x163,0x1b4,0x1ef,0x1fa)]=_0x2ba47c,eventSource['emit'](_0x28d754,_0x1a49c8);continue;case'4':_0x494533=!![];continue;}break;}}console[_0x16db26(0x43b,0x577,0x472,0x4ab)](_0xe51068+_0x16db26(0x326,0x460,0x42f,0x3eb),_0x89d8f0);const _0x2d5145=_0x1a1a0e(0x240,0x1f0,0x28c,0x215)+_0x89d8f0[_0x1a1a0e(0x91,0x146,0xb6,0xe2)];_0xae93f9&&(_0x37203b[_0x1a1a0e(0x69,0x22,0x15d,0xe5)](_0x37203b[_0x1a1a0e(0xa1,0x1a2,0x5b,0xd9)],_0x37203b[_0x1a1a0e(0x11e,0x36,0x16a,0xd9)])?_0xae93f9(_0x2d5145):_0x37203b['YdnNX'](_0x28281a));toastr[_0x1a1a0e(0x1eb,0x1ae,0x1f6,0x1fa)](_0x89d8f0[_0x16db26(0x3b4,0x37b,0x300,0x393)]),taskQueue[_0x1a1a0e(0xea,0x110,0x198,0x12c)+'sk'](_0x472942,![]),llmTaskControllers['delete'](_0x472942);const _0x3316ff={};_0x3316ff['success']=![],_0x3316ff[_0x16db26(0x54f,0x50e,0x455,0x48c)]=_0x2d5145,_0x3316ff['id']=_0x4a8cb8,eventSource[_0x1a1a0e(0x1b,0xe4,0x108,0xe6)](_0x28d754,_0x3316ff);}else{const _0x2ce9f7=_0x1b72fe[_0x197b85][_0x1a1a0e(0x1bd,0x22e,0x27b,0x218)+_0x16db26(0x3f3,0x46d,0x429,0x3fd)+_0x1a1a0e(0x211,0x175,0x144,0x1ae)]||{},_0x598745={};_0x598745[_0x1a1a0e(0x159,0x1a0,0x25c,0x1ce)+'e']='默认',_0x598745[_0x1a1a0e(0x14c,0x13b,0xfb,0x185)+_0x1a1a0e(0x1ee,0x100,0xdd,0x178)]='默认';const _0x4a3428=_0x2ce9f7[_0x11df03]||_0x598745,_0x5039c3=_0x208d04[_0x59eb0f][_0x1a1a0e(0x115,0x17c,0x127,0x15e)+'es']||{},_0x7accd1=_0x3a8883[_0x48873b]['test_conte'+_0x1a1a0e(0x40,0xec,0xc3,0xdb)+'s']||{},_0x12fc22=_0x4a3428['api_profil'+'e']||'默认',_0xc35905=_0x5039c3[_0x12fc22]||_0x5039c3[_0xdb6f9[_0x1a1a0e(0x2bd,0x2aa,0x2b6,0x237)](_0x5039c3)[-0x477+0x5ea*0x5+0x191b*-0x1]]||{},_0x35626a=_0x4a3428[_0x1a1a0e(0xde,0x1a4,0x24b,0x185)+_0x1a1a0e(0xcf,0x19c,0x1ae,0x178)]||'默认',_0x15cec8=_0x7accd1[_0x35626a]||_0x7accd1[_0x3f3cd6[_0x16db26(0x531,0x449,0x45d,0x4e8)](_0x7accd1)[0x1d7+0x2*-0xa68+-0x12f9*-0x1]]||{},_0x449504={};return _0x449504['api_url']=_0xc35905[_0x16db26(0x3dc,0x550,0x4b8,0x4a4)]||'',_0x449504[_0x16db26(0x4bd,0x4e5,0x48e,0x4b9)]=_0xc35905['api_key']||'',_0x449504[_0x16db26(0x4ca,0x4fa,0x437,0x4c2)]=_0xc35905[_0x16db26(0x48a,0x4e8,0x53a,0x4c2)]||'',_0x449504[_0x1a1a0e(0x10c,0xbb,0x5d,0xf7)+'e']=_0xc35905['temperatur'+'e']??0x14ce+-0x36*0x29+-0x2*0x614+0.7,_0x449504[_0x1a1a0e(0x21b,0x1c0,0x126,0x197)]=_0xc35905[_0x16db26(0x3bc,0x39f,0x3f7,0x448)]??0x1c81*0x1+0x20db+-0x3d5b,_0x449504['max_tokens']=_0xc35905[_0x1a1a0e(0x119,0xcf,0x1d2,0x124)]??-0x2*0xe30+0x7ce+-0x36*-0x6b,_0x449504['stream']=_0xc35905[_0x1a1a0e(0x22f,0x1aa,0x1a5,0x204)]??![],_0x449504[_0x1a1a0e(0x25c,0x2d8,0x256,0x23d)+'xy']=_0xc35905[_0x1a1a0e(0x24e,0x221,0x2f6,0x23d)+'xy']??![],_0x449504[_0x16db26(0x377,0x364,0x4ea,0x420)]=_0x15cec8,_0x449504;}}finally{_0x37203b[_0x1a1a0e(0xf2,0x84,0x54,0x118)](currentLLMRequestController,_0x334cc7)&&(currentLLMRequestController=null),(!_0x494533||_0x37203b['pcByO'](currentLLMRequestController,null))&&_0x37203b[_0x1a1a0e(0x119,0x219,0xf9,0x161)](stopFabLoading);}}export async function executeDefaultLLMRequest(_0x1068dd,_0x4a5459,_0x256dfc=null){const _0x10e2c1={'nKiOL':_0x3e3862(0x19f,0x1b1,0x1d9,0x1dd),'cTaNY':'LLM\x20请求返回为空'+_0x229564(0x34d,0x352,0x35c,0x37c)+_0x3e3862(0x51,0x1f,0x7b,0xb2)+_0x3e3862(0xc5,0xdd,0x173,0x120)+_0x3e3862(0x22d,0x15d,0x2ab,0x1e8),'xAXoD':function(_0x419ddc,_0x59c748){return _0x419ddc!==_0x59c748;},'kVyVc':_0x229564(0x29d,0x30e,0x259,0x2b5),'SuAwI':function(_0x469c89,_0x5cd104){return _0x469c89!==_0x5cd104;},'pnmJr':'assistant','lKYVM':_0x229564(0x222,0x170,0x20f,0x24f),'YjrLg':function(_0xb9c1aa,_0x446d05){return _0xb9c1aa>_0x446d05;},'wqAUc':function(_0x4ba1dd,_0x381ea2){return _0x4ba1dd===_0x381ea2;},'uTIJa':function(_0x171131,_0x509844,_0x565d9d){return _0x171131(_0x509844,_0x565d9d);},'DlblD':'applicatio'+_0x229564(0x391,0x30c,0x396,0x364),'ECmvz':function(_0x6d71fd,_0x50e306){return _0x6d71fd||_0x50e306;},'CvDgS':_0x3e3862(0xa2,0x60,0x87,0xd4),'nPIAc':_0x229564(0x1fb,0x1ad,0x24c,0x215)+'始新请求。','XVMhJ':_0x229564(0x1e9,0x26d,0x25b,0x19e),'oHBSq':function(_0x1dbaf4){return _0x1dbaf4();},'YdFZU':function(_0x280ff5){return _0x280ff5();},'gwtHC':function(_0xe5bde0,_0x534810){return _0xe5bde0(_0x534810);},'loAjg':function(_0x1284c1,_0x231307){return _0x1284c1(_0x231307);},'EnzLF':function(_0x520961,_0x3342cd){return _0x520961||_0x3342cd;},'FVPba':_0x3e3862(0x42,0x27,0x144,0xcf)+'PI\x20Key,\x20或\x20'+_0x229564(0x21c,0x243,0x21c,0x23a),'zfxZE':'THCJv','qooLR':'QwFDO','NNdeS':function(_0x1fb491,_0x4edf22){return _0x1fb491??_0x4edf22;},'VuHQy':function(_0x22107f,_0x26511c){return _0x22107f!==_0x26511c;},'irZId':_0x229564(0x244,0x35f,0x2ce,0x2f3),'wGJAe':_0x3e3862(0x14e,0x53,0x104,0x11d),'pfxNt':_0x3e3862(0x219,0x266,0x20e,0x1c2),'vtEUe':function(_0x311d00,_0x52fcbf){return _0x311d00+_0x52fcbf;},'HNoZr':_0x229564(0x26b,0x296,0x21f,0x238)+_0x3e3862(0x117,0xf5,0x165,0x103)+'ompletions'+'/generate','qxLwb':_0x229564(0x311,0x30b,0x378,0x43f),'OBcmP':function(_0x39bf5c,_0x1398df){return _0x39bf5c===_0x1398df;},'DWhYK':_0x3e3862(0x1b2,0x25b,0x193,0x1ce),'EpzHR':_0x3e3862(0x210,0x27d,0x1c2,0x1ba)+_0x3e3862(0x120,0x2a,-0x6,0x8e),'mxRlV':_0x229564(0x2e7,0x3b8,0x35e,0x353),'oMvZs':_0x229564(0x300,0x1d3,0x25f,0x289),'kQjGt':function(_0x2b5466,_0x472543,_0x49b9bb){return _0x2b5466(_0x472543,_0x49b9bb);},'ReeFj':'POST','WIGXY':'object','aNheE':_0x3e3862(0x45,0x3f,0x2a,0x9c),'mqXXI':function(_0x2470af,_0x5aef60){return _0x2470af!==_0x5aef60;},'LsSYY':'FmIpV','DNhqd':function(_0x2122a0,_0xd201e4){return _0x2122a0(_0xd201e4);},'HSqmH':function(_0x141877,_0x468a0c){return _0x141877(_0x468a0c);},'QoyOV':function(_0x7153d,_0x96ec37){return _0x7153d(_0x96ec37);},'nFMtZ':function(_0x2557ad,_0x529cb4){return _0x2557ad(_0x529cb4);},'jrBOp':function(_0x47ddce,_0x1eeec2){return _0x47ddce===_0x1eeec2;},'Fpnrs':_0x3e3862(0xa7,0xc0,0x11b,0x104),'IcxTQ':_0x229564(0x322,0x2e2,0x2d7,0x2dc),'EPASM':function(_0x43440e,_0x1bed05){return _0x43440e(_0x1bed05);},'bFocu':function(_0xe83698,_0x42ae4c){return _0xe83698!==_0x42ae4c;},'ZllQa':'yPsaU','jbMUa':function(_0x1b3190){return _0x1b3190();}},{prompt:_0x279b05,id:_0x4e0b0b}=_0x1068dd;if(_0x10e2c1[_0x3e3862(0x289,0x125,0x23a,0x1c9)](!_0x4e0b0b,!_0x279b05))return;currentLLMRequestController&&(_0x10e2c1[_0x3e3862(0x223,0x201,0x110,0x167)](_0x10e2c1[_0x3e3862(0x1e8,0xfd,0x22b,0x1a0)],_0x3e3862(0x26,0x152,0x73,0xd4))?(currentLLMRequestController[_0x229564(0x2c5,0x2f1,0x2ba,0x24d)](),toastr['info'](_0x10e2c1[_0x229564(0x29f,0x275,0x2ea,0x2f4)])):(_0x5f8ed7=_0x10e2c1[_0x3e3862(0xbb,0xcb,0x138,0x77)],_0x2442d7[_0x229564(0x301,0x3d4,0x36d,0x32d)](_0x4d0c8a+(_0x3e3862(0x166,0x20,0x36,0xdd)+_0x229564(0x1e0,0x273,0x2ab,0x2e3)+_0x3e3862(0x8f,0xc8,0x207,0x15a)+_0x3e3862(0x227,0x219,0x1ed,0x1db)+'API\x20连接问题。'))));currentLLMRequestController=new AbortController();const _0x55d7b8=currentLLMRequestController['signal'],_0x37325f=currentLLMRequestController;function _0x3e3862(_0x593f15,_0x489a44,_0x199fab,_0x2ab9a0){return _0x564343(_0x593f15-0x1a1,_0x489a44-0xb6,_0x593f15,_0x2ab9a0-0x24f);}const _0x43d910={};_0x43d910[_0x229564(0x324,0x21e,0x295,0x241)]=_0x10e2c1[_0x3e3862(0x114,0x243,0x25a,0x1b4)],_0x43d910[_0x229564(0x2ac,0x274,0x26b,0x1ae)]=TaskType[_0x3e3862(0x5e,0x85,0x11a,0x7d)],_0x43d910[_0x3e3862(0x128,0x76,0x52,0x105)]=_0x4e0b0b;const _0x12ff0c=taskQueue[_0x229564(0x2a6,0x296,0x355,0x3a9)](_0x43d910);function _0x229564(_0x2e3946,_0x45be91,_0x3c2c15,_0x4c36d1){return _0x21c117(_0x2e3946-0x1d3,_0x3c2c15-0x2b6,_0x4c36d1,_0x4c36d1-0xcb);}llmTaskControllers[_0x229564(0x155,0x2ac,0x208,0x2b6)](_0x12ff0c,currentLLMRequestController),taskQueue[_0x229564(0x2b5,0x266,0x2e8,0x22e)+'us'](_0x12ff0c,TaskStatus['RUNNING']),_0x10e2c1[_0x229564(0x2d2,0x25b,0x2e2,0x341)](startFabLoading);let _0x353d7a=![];_0x10e2c1[_0x3e3862(0x188,0xc1,0x7e,0xd1)](clearLog),_0x10e2c1[_0x3e3862(0x17a,0x7,0x16b,0xd2)](addLog,_0x229564(0x299,0x3d2,0x30f,0x26c)+_0x3e3862(0x234,0x237,0xd4,0x17d)+'=='),_0x10e2c1['gwtHC'](addLog,_0x229564(0x224,0x22c,0x219,0x21e)+_0x4e0b0b),_0x10e2c1[_0x3e3862(0xe9,0x15b,0x38,0xd2)](addLog,_0x3e3862(0x211,0x103,0xdc,0x1a7)+':'),_0x10e2c1['loAjg'](addLog,_0x10e2c1['loAjg'](formatPromptForDisplay,_0x279b05));const {api_url:_0x45b68a,api_key:_0x2651b5,model:_0x3a8abc,temperature:_0x364629,top_p:_0x183cf9,max_tokens:_0x43cf71,stream:_0x5eb78f,bypass_proxy:_0x561e4a}=_0x4a5459;if(_0x10e2c1['EnzLF'](!_0x45b68a,!_0x2651b5)||!_0x3a8abc){const _0x2372aa=_0x10e2c1[_0x3e3862(0x269,0x238,0x184,0x1ec)];toastr[_0x3e3862(0x250,0x13f,0xbe,0x188)](_0x2372aa);const _0x32b63b={};_0x32b63b[_0x229564(0x370,0x36d,0x397,0x45e)]=![],_0x32b63b['result']=_0x2372aa,_0x32b63b['id']=_0x4e0b0b,eventSource[_0x229564(0x26f,0x18d,0x212,0x22f)](eventNames[_0x3e3862(0xeb,0x164,0x208,0x142)+_0x229564(0x2f3,0x1b8,0x23d,0x1d8)],_0x32b63b);return;}const _0x19e2e8=_0x45b68a[_0x229564(0x39e,0x3e1,0x38f,0x2cb)](/\/$/,'');let _0x35816d,_0x1c2362,_0x5e0607;if(_0x561e4a){if(_0x10e2c1[_0x229564(0x3a2,0x3c1,0x365,0x35e)](_0x10e2c1[_0x3e3862(0x22e,0x1c3,0x218,0x189)],_0x10e2c1['qooLR'])){_0x35816d=_0x19e2e8+(_0x229564(0x2f8,0x26d,0x2b5,0x31e)+'letions');const _0x3ac419={};_0x3ac419[_0x3e3862(0x288,0x217,0x28e,0x1d6)+'pe']=_0x10e2c1[_0x229564(0x326,0x375,0x30a,0x36f)],_0x3ac419[_0x229564(0x355,0x304,0x2c6,0x281)+_0x229564(0x267,0x332,0x2bf,0x271)]='Bearer\x20'+_0x2651b5,_0x1c2362=_0x3ac419,_0x5e0607={'model':_0x3a8abc,'messages':_0x279b05,'temperature':_0x364629,'top_p':_0x183cf9,'max_tokens':_0x43cf71,'stream':_0x10e2c1['NNdeS'](_0x5eb78f,![])};}else return!!_0x58ff41;}else{if(_0x10e2c1[_0x229564(0x2c6,0x334,0x290,0x269)](_0x229564(0x20e,0x198,0x210,0x291),_0x10e2c1['irZId'])){let _0x36e326=_0x19e2e8;!_0x36e326[_0x3e3862(0xb6,0xc3,0x1bc,0x134)](_0x10e2c1[_0x3e3862(0x12d,0x19b,0x14e,0x186)])&&!_0x36e326['includes'](_0x10e2c1['pfxNt'])&&(_0x36e326=_0x10e2c1[_0x229564(0x323,0x395,0x354,0x330)](_0x36e326,_0x10e2c1[_0x229564(0x2a6,0x327,0x324,0x2ef)]));_0x36e326=_0x36e326['replace'](/\/v1\/$/,_0x10e2c1[_0x3e3862(0x218,0x232,0x189,0x186)]),_0x35816d=_0x10e2c1[_0x229564(0x243,0x2ac,0x21e,0x222)],_0x1c2362=_0x10e2c1[_0x3e3862(0x10a,0xc2,0x18a,0x119)](getRequestHeaders,window[_0x229564(0x3d4,0x363,0x380,0x309)]);const _0x9da303={};_0x9da303[_0x3e3862(0x12d,0x1bc,0x1a0,0x15f)+'etion_sour'+'ce']=_0x10e2c1['qxLwb'],_0x9da303[_0x3e3862(0x19e,0x209,0x19e,0x1a2)]=_0x36e326,_0x9da303[_0x3e3862(0x8d,0x169,0x57,0xb3)+_0x3e3862(0x53,0x153,0x51,0xeb)+'rs']=_0x3e3862(0x14a,0xba,0xd3,0x128)+_0x3e3862(0x8b,0x117,0x19,0xa0)+_0x229564(0x214,0x1bc,0x264,0x289)+_0x2651b5+'\x22',_0x9da303[_0x3e3862(0x245,0x162,0x1d7,0x19f)]=_0x3a8abc,_0x9da303[_0x229564(0x365,0x2a2,0x33b,0x2db)]=_0x279b05,_0x9da303[_0x3e3862(0x53,0x31,0x87,0x85)+'e']=_0x364629,_0x9da303[_0x3e3862(0xd1,0xda,0x1e1,0x125)]=_0x183cf9,_0x9da303[_0x229564(0x197,0x1e2,0x250,0x2ac)]=_0x43cf71,_0x9da303[_0x3e3862(0xec,0x183,0xea,0x192)]=![],_0x5e0607=_0x9da303;}else _0x203c3f+='\x20('+_0xb7ad5f['join'](',\x20')+')';}if(_0x256dfc){if(_0x10e2c1[_0x3e3862(0x1ce,0x173,0x92,0x13b)](_0x229564(0x3e5,0x36e,0x38b,0x43c),_0x10e2c1[_0x229564(0x340,0x2c5,0x36a,0x3b5)])){const _0x1c01be=_0x1cc80a[_0x3e3862(0x8a,0x24,0x110,0xee)](_0x2a8142);_0x1c01be&&(_0x1c01be[_0x229564(0x2de,0x359,0x2ba,0x1ee)](),_0x240d1c['delete'](_0x1a5b65),_0x484001[_0x229564(0x2ed,0x2ff,0x377,0x3a7)](_0x229564(0x28f,0x3a4,0x34c,0x296)+_0x3e3862(0x1a6,0x1e3,0x19a,0x170)+_0x2a96ac));}else _0x10e2c1[_0x229564(0x337,0x2ff,0x2b7,0x29d)](_0x256dfc,_0x10e2c1[_0x3e3862(0x146,0x22d,0x1fb,0x165)]);}try{if(_0x10e2c1[_0x229564(0x2e4,0x2cd,0x365,0x378)](_0x10e2c1[_0x3e3862(0x9a,0x16a,0xa4,0x159)],_0x10e2c1[_0x229564(0x290,0x1a3,0x213,0x226)])){const _0x11005b=await _0x10e2c1[_0x3e3862(0x185,0x23b,0x1a2,0x1c4)](fetch,_0x35816d,{'method':_0x10e2c1[_0x3e3862(0x19a,0x1d9,0x133,0x13e)],'headers':_0x1c2362,'body':JSON[_0x229564(0x2ef,0x3a3,0x348,0x400)](_0x5e0607),'signal':_0x55d7b8}),_0x53b230=await _0x11005b[_0x3e3862(0x1ef,0x255,0x161,0x1b3)]();if(_0x53b230[_0x229564(0x372,0x39b,0x326,0x2b3)]){let _0x1029f6;if(typeof _0x53b230[_0x3e3862(0x1be,0x150,0xe7,0x188)]===_0x10e2c1[_0x3e3862(0xc8,-0x2d,0x115,0x99)]&&_0x53b230[_0x229564(0x2e4,0x38f,0x326,0x35d)][_0x229564(0x26f,0x1d7,0x20e,0x221)]){if(_0x10e2c1[_0x229564(0x3f7,0x317,0x365,0x406)](_0x10e2c1[_0x229564(0x272,0x282,0x32d,0x31f)],_0x3e3862(0x9f,0x12b,0xf8,0x12f))){_0x1029f6=''+_0x53b230[_0x3e3862(0xf5,0x101,0x199,0x188)][_0x3e3862(-0x2e,0x70,0xb1,0x70)];const _0x1d5cf0=[];if(_0x53b230[_0x3e3862(0x21c,0x1de,0x23c,0x188)][_0x229564(0x204,0x1d6,0x26b,0x1b2)])_0x1d5cf0[_0x3e3862(0x94,0x8c,0xde,0x6c)](_0x3e3862(0xae,0xe1,0x6a,0xd0)+_0x53b230[_0x3e3862(0x168,0x159,0x230,0x188)][_0x229564(0x2b4,0x1f8,0x26b,0x1af)]);if(_0x53b230[_0x229564(0x34f,0x2d8,0x326,0x298)]['code'])_0x1d5cf0[_0x229564(0x1f5,0x170,0x20a,0x1fd)](_0x229564(0x420,0x342,0x394,0x35e)+_0x53b230[_0x229564(0x26b,0x3ac,0x326,0x37e)][_0x229564(0x36c,0x351,0x2c0,0x254)]);_0x10e2c1[_0x3e3862(0x167,0x7f,0x80,0x10a)](_0x1d5cf0[_0x229564(0x2d3,0x358,0x388,0x39f)],-0x856*-0x1+0x1252+-0x1aa8)&&(_0x1029f6+='\x20('+_0x1d5cf0[_0x3e3862(0x11d,0x8f,0x149,0x8c)](',\x20')+')');}else _0x418156[_0x3e3862(0x197,0x247,0x18c,0x1cf)](_0x10e2c1[_0x229564(0x331,0x204,0x283,0x29f)]);}else _0x1029f6=''+JSON['stringify'](_0x53b230[_0x229564(0x3da,0x26d,0x326,0x2cb)]);throw new Error(_0x1029f6);}if(!_0x11005b['ok'])throw new Error(_0x3e3862(0x156,0x270,0x28e,0x1eb)+_0x11005b['status']+'\x20'+_0x11005b[_0x3e3862(0x154,0xaf,0x7b,0xad)]);const _0x596d69=_0x53b230[_0x3e3862(0x2c,0xe9,-0x30,0x8a)]?.[-0x20d3*0x1+-0x16c+0x31d*0xb]?.[_0x3e3862(0x11c,0xc,0x139,0x70)]?.['content']||'';!_0x596d69&&toastr[_0x3e3862(0x1d0,0x1ee,0x26d,0x1cf)](_0x10e2c1[_0x229564(0x255,0x1cb,0x283,0x27f)]);_0x256dfc&&(_0x10e2c1[_0x3e3862(0x37,0x5f,0x110,0x6f)](_0x10e2c1[_0x229564(0x317,0x2b7,0x300,0x3a0)],_0x10e2c1[_0x3e3862(0x1ee,0x14d,0x1d5,0x162)])?_0x1b2c41[_0x229564(0x1b9,0x16a,0x230,0x2f9)][_0x229564(0x3ee,0x3e2,0x383,0x371)](_0x37c705=>{function _0xe538d8(_0x511020,_0x41e907,_0x381d00,_0x3f8dfc){return _0x3e3862(_0x381d00,_0x41e907-0x39,_0x381d00-0x134,_0x41e907- -0x33);}if(_0x37c705[_0x4c1014(0xcd,0x83,0x1d,0x10)]&&_0x10e2c1[_0x4c1014(0x15d,0x144,0x1a5,0x133)](_0x37c705['user'][_0x4c1014(0x85,0x124,0x12f,0xf6)](),'')){const _0x4ce16d={};_0x4ce16d['role']=_0x10e2c1[_0x4c1014(-0x62,-0x20,0xd3,0x19)],_0x4ce16d[_0xe538d8(0xdd,0xc0,0xf5,0xb6)]=_0x37c705[_0x4c1014(-0xd,-0x85,0x64,0x10)],_0x3a84e2[_0xe538d8(-0x3a,0x39,-0x80,0x89)](_0x4ce16d);}function _0x4c1014(_0x48f37d,_0x4c4acc,_0x2eba90,_0x1587b0){return _0x229564(_0x48f37d-0x60,_0x4c4acc-0x185,_0x1587b0- -0x249,_0x4c4acc);}if(_0x37c705[_0x4c1014(0xe4,0x15e,-0x1b,0xa0)]&&_0x10e2c1[_0x4c1014(0x198,0x199,0x14e,0x11c)](_0x37c705[_0xe538d8(0x190,0x118,0x13f,0x8b)][_0x4c1014(0x45,0x96,0x11c,0xf6)](),'')){const _0x1f20d9={};_0x1f20d9[_0x4c1014(0xa,-0x4e,0x9a,0x2d)]=_0x10e2c1[_0xe538d8(0x161,0xf4,0x1ac,0x35)],_0x1f20d9[_0xe538d8(0x17e,0xc0,0x77,0x4e)]=_0x37c705[_0x4c1014(0x167,0x14d,0x29,0xa0)],_0x11ed68[_0xe538d8(0x71,0x39,-0x40,0xe8)](_0x1f20d9);}}):_0x10e2c1['DNhqd'](_0x256dfc,_0x596d69));_0x10e2c1[_0x3e3862(0xb8,0x11,0xc7,0xc7)](addLog,_0x229564(0x234,0x1dc,0x227,0x214)+_0x229564(0x1c2,0x27e,0x218,0x2d9)),_0x10e2c1[_0x3e3862(0x43,0x4e,0xd9,0xb4)](addLog,_0x596d69),_0x10e2c1[_0x229564(0x1b2,0x235,0x20c,0x1cc)](addLog,_0x229564(0x2fe,0x358,0x30f,0x282)+_0x229564(0x37e,0x34e,0x317,0x34a)),taskQueue[_0x3e3862(0x176,0x165,0xfe,0xba)+'sk'](_0x12ff0c,!![]),llmTaskControllers[_0x3e3862(0x82,0xfe,0x141,0x87)](_0x12ff0c);const _0xe4f7a8={};_0xe4f7a8[_0x229564(0x412,0x328,0x397,0x310)]=!![],_0xe4f7a8[_0x3e3862(0x16a,0xdd,0xc7,0x169)]=_0x596d69,_0xe4f7a8['id']=_0x4e0b0b,eventSource['emit'](eventNames['LLM_EXECUT'+_0x3e3862(0x3a,0x141,0x107,0x9f)],_0xe4f7a8);}else _0x182053[_0x3e3862(0xb4,0xc5,0x220,0x16e)](_0x10e2c1['lKYVM'],_0x3c48db[_0x3e3862(-0x29,-0x29,0xd7,0x70)]);}catch(_0x34015b){if(_0x10e2c1['jrBOp'](_0x3e3862(0x82,0x155,0xdb,0x104),_0x10e2c1[_0x3e3862(0x58,0x117,-0x25,0x9e)])){if(_0x34015b['name']===_0x10e2c1[_0x3e3862(0xb8,0x64,0x1cb,0x110)]){const _0x5a6f96=(_0x229564(0x261,0x2ff,0x325,0x3c8)+'5')['split']('|');let _0x4bd558=-0x195a+-0x2146+0x3aa0;while(!![]){switch(_0x5a6f96[_0x4bd558++]){case'0':taskQueue[_0x229564(0x3b4,0x2bb,0x2e8,0x39a)+'us'](_0x12ff0c,TaskStatus['CANCELLED']);continue;case'1':_0x353d7a=!![];continue;case'2':llmTaskControllers['delete'](_0x12ff0c);continue;case'3':console['log'](_0x229564(0x2e6,0x37c,0x34d,0x356)+_0x229564(0x275,0x1e9,0x21a,0x1cd)+'aborted.');continue;case'4':const _0x478db0={};_0x478db0['name']=_0x10e2c1[_0x3e3862(0x122,0x192,0x18b,0x110)],_0x478db0['message']='Request\x20ab'+_0x3e3862(0x1f6,0x1b3,0x167,0x1bb);const _0x23f6b3={};_0x23f6b3[_0x3e3862(0x1c4,0x21e,0x1bb,0x1f9)]=![],_0x23f6b3[_0x3e3862(0x14a,0x10d,0xf3,0x169)]=null,_0x23f6b3['id']=_0x4e0b0b,_0x23f6b3[_0x229564(0x277,0x26d,0x326,0x25d)]=_0x478db0,eventSource['emit'](eventNames[_0x3e3862(0x150,0xbc,0x11c,0x142)+'E_RESPONSE'],_0x23f6b3);continue;case'5':return;}break;}}console[_0x3e3862(0x199,0x227,0x121,0x188)](_0x229564(0x243,0x39d,0x2f3,0x316)+'e\x20Error:',_0x34015b);const _0x2763e9=_0x3e3862(0x1d8,0x222,0x1e8,0x1a3)+_0x34015b[_0x3e3862(0x109,-0x1b,-0x53,0x70)];_0x256dfc&&_0x10e2c1['EPASM'](_0x256dfc,_0x2763e9);toastr['error'](_0x34015b[_0x3e3862(-0x12,0x62,0x9b,0x70)]),taskQueue[_0x3e3862(0x72,0x86,0x13a,0xba)+'sk'](_0x12ff0c,![]),llmTaskControllers[_0x3e3862(0x98,0x66,0x77,0x87)](_0x12ff0c);const _0x4dc701={};_0x4dc701[_0x229564(0x2f5,0x443,0x397,0x369)]=![],_0x4dc701[_0x229564(0x36f,0x24f,0x307,0x30d)]=_0x2763e9,_0x4dc701['id']=_0x4e0b0b,eventSource['emit'](eventNames[_0x229564(0x396,0x31c,0x2e0,0x28a)+_0x3e3862(0x162,0xd8,0x133,0x9f)],_0x4dc701);}else{_0x5848ff=''+_0x29b515[_0x3e3862(0x17d,0x202,0x211,0x188)][_0x229564(0x29e,0x25c,0x20e,0x1d1)];const _0x1c556e=[];if(_0x29f2eb[_0x3e3862(0x196,0x113,0x22b,0x188)][_0x3e3862(0x88,0x107,0x16,0xcd)])_0x1c556e[_0x229564(0x218,0x17b,0x20a,0x2ab)](_0x229564(0x21e,0x321,0x26e,0x316)+_0x53f660[_0x3e3862(0x174,0x1af,0x22d,0x188)][_0x3e3862(0x73,0xb6,0x182,0xcd)]);if(_0x392983[_0x229564(0x33f,0x290,0x326,0x37b)][_0x3e3862(0x104,0x160,0x17e,0x122)])_0x1c556e[_0x3e3862(-0x5f,0x131,0x138,0x6c)](_0x3e3862(0x1c4,0x216,0x1f8,0x1f6)+_0x39e219[_0x3e3862(0x193,0x1c1,0x107,0x188)][_0x3e3862(0x7e,0x138,0xbb,0x122)]);_0x10e2c1[_0x229564(0x1e5,0x1ed,0x2a8,0x247)](_0x1c556e[_0x229564(0x360,0x3e9,0x388,0x3e5)],-0x214c+-0x5*-0x28f+0x1481)&&(_0x179cb2+='\x20('+_0x1c556e['join'](',\x20')+')');}}finally{if(_0x10e2c1[_0x3e3862(0x8c,0xcf,0x154,0xf2)]('pFXiT',_0x229564(0x3a6,0x36d,0x302,0x257))){if(_0x10e2c1[_0x3e3862(0x7f,0x185,0x11d,0x13b)](currentLLMRequestController,_0x37325f)){if(_0x10e2c1['jrBOp'](_0x229564(0x3ad,0x36d,0x2f5,0x2a9),_0x229564(0x25f,0x286,0x2f5,0x348)))currentLLMRequestController=null;else{const _0x81e6d6={'LVStT':function(_0x3cd5c4,_0x46a8c1){return _0x10e2c1['wqAUc'](_0x3cd5c4,_0x46a8c1);},'JmiWh':function(_0x5902ff,_0x5f19ef,_0x4cad4c){return _0x10e2c1['uTIJa'](_0x5902ff,_0x5f19ef,_0x4cad4c);},'TcOdb':_0x10e2c1[_0x3e3862(0x178,0x173,0x10f,0xc4)]};_0x2bfe4e[_0x3e3862(0x1b,0xb4,0xa5,0x76)][_0x3e3862(0x271,0x221,0x12a,0x1e5)](_0x3d6cae=>{if(!_0x3d6cae[_0x1bd3ac(0x189,0x16e,0x1fc,0x185)])return;if(!_0x3d6cae[_0x5571d0(0x394,0x321,0x2fb,0x33c)]||_0x81e6d6[_0x5571d0(0x32b,0x399,0x378,0x2e2)](_0x3d6cae[_0x5571d0(0x2e8,0x321,0x280,0x3db)]['trim'](),''))return;if(_0x3d6cae[_0x5571d0(0x418,0x3e0,0x445,0x326)+'e']===_0x5571d0(0x383,0x3a5,0x3a0,0x43d)){if(!_0x15a8bb||!_0x81e6d6[_0x5571d0(0x3f2,0x420,0x4ac,0x393)](_0x53965e,_0x3d6cae[_0x1bd3ac(0x228,0x208,0x292,0x2b8)+'ds'],_0x1db3ec))return;}function _0x5571d0(_0x487387,_0x214c61,_0x10d426,_0x45930c){return _0x229564(_0x487387-0x12,_0x214c61-0x190,_0x214c61-0x90,_0x10d426);}const _0x56526c={};function _0x1bd3ac(_0x5caced,_0x35f561,_0x4cebb6,_0x88a1c4){return _0x3e3862(_0x4cebb6,_0x35f561-0x19f,_0x4cebb6-0x154,_0x35f561-0xdb);}_0x56526c[_0x5571d0(0x27f,0x306,0x383,0x3cd)]=_0x3d6cae[_0x5571d0(0x281,0x306,0x360,0x39f)]||_0x81e6d6[_0x1bd3ac(0x211,0x25f,0x1d9,0x22f)],_0x56526c[_0x1bd3ac(0x178,0x1ce,0x1c1,0x236)]=_0x3d6cae[_0x5571d0(0x257,0x321,0x2da,0x37b)],_0x462e28[_0x5571d0(0x1e4,0x29a,0x333,0x1d1)](_0x56526c);});}}if(!_0x353d7a||_0x10e2c1[_0x3e3862(0x18a,0x135,0x175,0x167)](currentLLMRequestController,null)){if(_0x10e2c1['bFocu'](_0x10e2c1['ZllQa'],_0x10e2c1['ZllQa'])){_0x13d682=_0x4c100c+('/chat/comp'+_0x3e3862(0x145,0x152,0xda,0x10e));const _0x2e6dcf={};_0x2e6dcf[_0x229564(0x310,0x2d0,0x374,0x42a)+'pe']=_0x10e2c1[_0x229564(0x36b,0x35e,0x30a,0x3ca)],_0x2e6dcf[_0x3e3862(0x121,0x1a6,0x195,0x128)+_0x229564(0x266,0x261,0x2bf,0x286)]=_0x229564(0x26d,0x1eb,0x296,0x358)+_0x2ba8f8,_0x1cf4f8=_0x2e6dcf;const _0x1c5e72={};_0x1c5e72['model']=_0x47bd22,_0x1c5e72[_0x229564(0x3a6,0x34e,0x33b,0x316)]=_0x3ba96a,_0x1c5e72[_0x229564(0x267,0x1c5,0x223,0x203)+'e']=_0x194476,_0x1c5e72['top_p']=_0x1184ef,_0x1c5e72[_0x229564(0x18e,0x202,0x250,0x1b1)]=_0x1e5557,_0x1c5e72[_0x3e3862(0xdc,0x209,0x1ca,0x192)]=_0x116b49,_0x3a17d1=_0x1c5e72;}else _0x10e2c1[_0x3e3862(0x14f,0xcd,0x55,0x94)](stopFabLoading);}}else{const _0x3e7317={};_0x3e7317[_0x3e3862(0x12d,0x20,0x182,0xd8)]=_0x10e2c1['kVyVc'],_0x3e7317[_0x3e3862(0x26,0x118,0x110,0xf3)]=_0x33de75[_0x229564(0x2ef,0x2cd,0x259,0x290)],_0x38bc32[_0x3e3862(0x31,0x53,0x8f,0x6c)](_0x3e7317);}}}export function createGetPromptHandler(_0x4c0902,_0x295409){const _0x25a6de={'nGgXU':function(_0x40fc96,_0x4c7817){return _0x40fc96(_0x4c7817);}};return function(_0x29b609){const {id:_0x2f4e6e}=_0x29b609;if(!_0x2f4e6e)return;const _0x3f339b=REQUEST_TYPE_NAMES[_0x4c0902]||_0x4c0902;console['log']('st-chatu8:'+_0x25d018(0x265,0x28f,0x20a,0x20c)+_0x3f339b+('提示词获取请求\x20(I'+'D:\x20')+_0x2f4e6e+')');const _0x18e86c=_0x25a6de[_0x3e080a(0x65d,0x65c,0x635,0x660)](buildPromptForRequestType,_0x4c0902),_0x32e812={};_0x32e812[_0x3e080a(0x5df,0x55d,0x600,0x547)]=_0x18e86c,_0x32e812['id']=_0x2f4e6e;function _0x3e080a(_0x2fe5b3,_0x304ed6,_0x32a6cd,_0x2fbea9){return _0x11f9(_0x32a6cd-0x3a0,_0x2fbea9);}function _0x25d018(_0x103887,_0x44abfe,_0x44e370,_0x293acf){return _0x11f9(_0x103887- -0x92,_0x44abfe);}eventSource[_0x25d018(0x13d,0x1e9,0x1e9,0x141)](_0x295409,_0x32e812);};}export function createExecuteHandler(_0x3a52cc,_0x509baa,_0x3bee48=null){const _0x34ecfe={'HzKOS':function(_0x59f322){return _0x59f322();},'EzLar':function(_0x141868,_0x5e689f,_0x14fe2e,_0x2ed68d,_0x382a6f){return _0x141868(_0x5e689f,_0x14fe2e,_0x2ed68d,_0x382a6f);}};return async function(_0x4da598){function _0x3bdd4c(_0x464627,_0x11d7a9,_0x3854ae,_0x5abbf2){return _0x11f9(_0x3854ae-0xca,_0x5abbf2);}function _0x2951b8(_0xf76dc9,_0x2e53c8,_0x2f7eba,_0x5542f8){return _0x11f9(_0x2e53c8- -0x220,_0x5542f8);}const _0x2b298a=_0x3bee48?_0x34ecfe[_0x2951b8(0x104,0xf0,0x13b,0x1a8)](_0x3bee48):null;await _0x34ecfe[_0x3bdd4c(0x3a9,0x3ca,0x306,0x255)](executeTypedLLMRequest,_0x4da598,_0x3a52cc,_0x509baa,_0x2b298a);};}