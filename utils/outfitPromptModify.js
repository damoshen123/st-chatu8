(function(_0x2b0879,_0x343add){const _0x35e5e5=_0x2b0879();function _0x47464d(_0x218ddc,_0x4c94b5,_0x224e24,_0x43a21d){return _0x14e3(_0x218ddc-0xf1,_0x4c94b5);}function _0x372e19(_0x39273c,_0x497a9e,_0x4629ab,_0x1c2d10){return _0x14e3(_0x39273c- -0x5e,_0x4629ab);}while(!![]){try{const _0x59fdfb=parseInt(_0x47464d(0x2f5,0x2c6,0x330,0x2ac))/(0x8ed*0x1+-0xd0*0x1e+0xf74)*(-parseInt(_0x372e19(0x134,0xc0,0xf6,0x18f))/(-0x13*-0x123+0x4*-0x7ac+-0x11*-0x89))+parseInt(_0x372e19(0x1da,0x20b,0x266,0x149))/(-0x1*-0x13ad+-0x4*-0x7e3+-0x23a*0x17)+-parseInt(_0x372e19(0x198,0x1aa,0x16e,0x168))/(-0x393+-0x1aba*0x1+-0xd*-0x255)+parseInt(_0x372e19(0x105,0xc0,0x165,0x18e))/(-0x34*-0x47+-0x139c+0x2b*0x1f)+-parseInt(_0x47464d(0x248,0x265,0x292,0x263))/(0x4c*-0x66+-0xf28+0x2d76)*(-parseInt(_0x372e19(0x174,0x139,0x119,0xea))/(-0xfc1+0x5*0x28c+0x104*0x3))+parseInt(_0x372e19(0x11b,0x148,0x15d,0xc0))/(0x6*-0x17f+-0x1*0x765+0xdd*0x13)*(-parseInt(_0x47464d(0x20e,0x1fd,0x229,0x250))/(-0x10ff+0xe57+0x2b1))+-parseInt(_0x372e19(0x1bb,0x202,0x229,0x219))/(-0x2502+0x11c9+0x1343);if(_0x59fdfb===_0x343add)break;else _0x35e5e5['push'](_0x35e5e5['shift']());}catch(_0x3d8a9e){_0x35e5e5['push'](_0x35e5e5['shift']());}}}(_0x4987,-0x97db+-0x3*0x20ad3+0xb4cd0));const _0x132beb=(function(){const _0x3f84d6={};_0x3f84d6['FYnYV']='(空)',_0x3f84d6[_0x5227c6(0x479,0x3e6,0x407,0x437)]=function(_0x573422,_0x57e6be){return _0x573422>_0x57e6be;},_0x3f84d6['ykOMK']=function(_0x347806,_0x396153){return _0x347806>_0x396153;},_0x3f84d6[_0x10d236(0x6e,0x8c,0xe7,0xe4)]=_0x5227c6(0x33f,0x398,0x37d,0x3c7),_0x3f84d6['wxKoV']=function(_0x235b58,_0x4b638f){return _0x235b58===_0x4b638f;};function _0x5227c6(_0x20e5e4,_0x5155ab,_0x1131e6,_0x142eaa){return _0x14e3(_0x5155ab-0x1ea,_0x1131e6);}_0x3f84d6[_0x10d236(0xe2,0x143,0x11c,0xad)]=_0x5227c6(0x364,0x3bb,0x437,0x3ba);const _0x226fa7=_0x3f84d6;let _0x302bc2=!![];function _0x10d236(_0x365ee5,_0x2e6bdd,_0x2c47df,_0x2256e7){return _0x14e3(_0x2c47df- -0x105,_0x2e6bdd);}return function(_0x3687cf,_0x384fe4){function _0x2e6ace(_0x2beeb7,_0x4301cf,_0x13432a,_0x117d4c){return _0x10d236(_0x2beeb7-0xfd,_0x4301cf,_0x2beeb7-0x1c4,_0x117d4c-0xa2);}function _0x45c385(_0x465e6b,_0x43b8d8,_0x5894d5,_0x38cb90){return _0x5227c6(_0x465e6b-0x16c,_0x38cb90-0x9c,_0x465e6b,_0x38cb90-0x18d);}if(_0x226fa7[_0x45c385(0x3b7,0x3d7,0x3b7,0x42a)](_0x226fa7[_0x2e6ace(0x2e0,0x26a,0x2a7,0x2d3)],_0x226fa7[_0x2e6ace(0x2e0,0x33c,0x2cd,0x2a7)])){const _0xff7d59=_0x302bc2?function(){function _0x177901(_0x389b39,_0x101c21,_0x460caa,_0x4069d1){return _0x45c385(_0x460caa,_0x101c21-0x63,_0x460caa-0x1da,_0x101c21- -0x230);}if(_0x384fe4){const _0x5d7364=_0x384fe4[_0x177901(0x25e,0x1f6,0x233,0x259)](_0x3687cf,arguments);return _0x384fe4=null,_0x5d7364;}}:function(){};return _0x302bc2=![],_0xff7d59;}else{if(_0x4d5bb3[_0x526cf0]&&_0xfa91a1[_0x254e22]!==_0x5ebd51[_0x5526ac]){const _0x1758c8=_0x4b82a8[_0x52de44]||_0x226fa7[_0x45c385(0x3e8,0x43c,0x3ff,0x415)],_0x2cf2f8=_0x6c2ea4[_0x235b42];_0x50d584+='•\x20'+_0x59973d[_0x15dcf1]+':\x0a',_0x524300+='\x20\x20旧:\x20'+_0x1758c8[_0x45c385(0x400,0x3fb,0x43a,0x40b)](-0xe40+0x819*-0x1+0x1*0x1659,0xc8+-0x8bc*-0x4+0x11c3*-0x2)+(_0x226fa7['ciggr'](_0x1758c8[_0x45c385(0x48c,0x4a8,0x418,0x497)],-0x646*-0x2+0xc63*-0x3+-0x3*-0x845)?_0x45c385(0x3c7,0x3b0,0x44f,0x434):'')+'\x0a',_0x3974ee+='\x20\x20新:\x20'+_0x2cf2f8[_0x2e6ace(0x244,0x1af,0x2c2,0x2ab)](-0x149+0x1*-0x5ea+0x13*0x61,-0x640+-0x9*-0x419+-0x35*0x93)+(_0x226fa7[_0x45c385(0x49f,0x4a0,0x4b9,0x487)](_0x2cf2f8['length'],-0x25f7*-0x1+0x45a*-0x8+-0x2f5)?_0x226fa7['yJYLH']:'')+'\x0a\x0a',_0x43e570++;}}};}()),_0x2bbba4=_0x132beb(this,function(){const _0x53662d={};_0x53662d[_0x3e3344(0x5f9,0x57e,0x5b5,0x538)]=_0x3e3344(0x554,0x597,0x590,0x5eb)+'+$';function _0x3e3344(_0x963e7,_0x2e56cd,_0x4bc1bf,_0x32c335){return _0x14e3(_0x4bc1bf-0x396,_0x963e7);}const _0x5c11f5=_0x53662d;function _0xfa9580(_0xe02577,_0x542165,_0x33fe6f,_0x374ed3){return _0x14e3(_0xe02577- -0x162,_0x542165);}return _0x2bbba4[_0xfa9580(0x8c,0x4a,0xfd,0x1)]()['search'](_0x5c11f5[_0x3e3344(0x5a4,0x55e,0x5b5,0x60e)])[_0xfa9580(0x8c,0xc6,0x110,0x15)]()['constructo'+'r'](_0x2bbba4)[_0x3e3344(0x566,0x4d0,0x4de,0x4bb)](_0x3e3344(0x536,0x572,0x590,0x5ef)+'+$');});_0x2bbba4();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';function _0x408ba4(_0x5ca7a6,_0x5ef142,_0x4ee95b,_0x5e767e){return _0x14e3(_0x5e767e- -0x108,_0x4ee95b);}import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../script.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{loadOutfitPreset}from'./settings/character/index.js';function _0x4987(){const _0x1abee9=['lxrHyI1JAgfYyq','vxPOvwC','5Rgc6lAf5PE2','uuvVu20','ieXmtsbVDxrWDq','DufzD3O','rLLUwvy','yvjXseC','zxf1zxn0icHjra','nZCYs25Jsunx','uwvit2W','sLLcvKe','ENLxuNO','zw1PDa','EfvNuvi','5lIT5PAh5zcn56EWoIa','DLjnBvO','zxjYB3i','B2LZufC','BMfTzuvo','shr0vge','uw1vD2W','yuPPDK8','yxbWBhK','t05trq','teXnx0niqvjFtq','ue9ou0u','D3HlB1y','B25kuw4','5y+c6icd5zU+54Mh','vfvuqve','thbdr04','BMf1zeG','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','s1jMwK0','D0rZDeS','6i635y+w5PYn6kof5l+U5Ps55O+q56s66k+n6lAf','lI4U','whvjAuy','rhz5v3K','vuzls20','AgrPqxC','DhvUyMi','u3jor3i','5PYn6kof5l+U5Ps5ieXmtsdOR7C','D2rdzuS','r2LmuKu','5lIk5y2k6lQR','yMjkEfO','Aw1Hz2vFDxjS','z3nhwwm','5lIl5y2k6lQR','z2v0rwXLBwvUDa','q2XOCw8','Aw5MBW','B3nRC00','ievYCM9YoG','sKzODM8','AM9PBG','zNvSBejVzhLcyq','ufjptvbux1jfuq','Euf0qMm','t0rjrLLFuKvrvq','sePgsgm','rfv5su8','wNrcvwi','zxfgywC','DhjPz2DLCG','C1jcCKG','CMvWBgfJzq','DNzqrxK','DhjPBq','teX5DLu','n25qD2Lerq','qMnKv20','v21ysve','BwfW','vKvkA2e','iev4zwn1DgLUzW','zgf0ytO','yw1jCvK','CMfUzg9T','A0Tnwu8','BgDXrgm','v1rTvw8','5Q2J5zYO5Ase55cg5PYn6kof5O+q56s66k+n5l+U','CgnMAK4','EwfSBhG','yLnOyxC','koEPUIK','zgf0ytPPBwfNzq','sen0Exq','zfDXAxO','AgTUCLi','iev4DhjHy3rLza','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','C3nHz2uGAw5Kzq','u2vLtLq','5Qoa5Rwl5yIW5PYn6kof5Qch562+','EuPzteG','D1nrrKq','Dg9tDhjPBMC','icdMLRa6ia','tLPotMG','5lIk5y2k6lQRoIa','CxvXvNe','yNnhtM0','rLHwqLe','ugHiA1a','mtq2mJqZmKzkELnTAG','Aw5JBhvKzxm','ig91DgzPDcbTBW','CgrVqxi','kcGOlISPkYKRkq','y2HHCL9TB2rPzG','y2LNz3i','5lIT5PAh5zcn56EW','ELDvCvu','uwPKzLO','zgLMEsbmte0GCG','EwTptuS','zNvSBejVzhK','sxblrwi','nZfiuLPXq1i','DgLTzw91De1Z','vuvtva','ifn0yxj0Aw5Nia','zMLSDgvY','tuPeBfK','C3rHCNrZv2L0Aa','C3bSAxq','zxrZ','DxjS','DxL2B0e','Ae5nA3q','E3VMNi3OO4xLIjFOOAH9Fq','BgvUz3rO','rLzAufe','z1fxu2y','5lIl5y2k6lQRoIa','zgv0ywLS','5PYn6kof5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','6k+35ywi6ycj5OUP5lIa5lIQ5PYn6kof6Ake6k6+','5lIl5y2k6lQR6iom6z2IoIa','mZC4ntuWA2PfDw1n','i3n0lwnOyxr1oa','B2jQzwn0','BwvZC2fNzq','v0nHqM8','y2fxyKq','DvLJs1e','ihjLCxvLC3qUlG','q0rxrLC','t0rjrLLFuKvtua','v1biENq','CxDJEgK','BMfTzuno','EejRDuC','CMvZzxq6','q29PDwe','BMfTzq','EwDpr3G','u2HxEe0','Bxb0tw9KAwz5xq','vLznBLG','sNPrC3C','qNLjza','vvfnr1m','ChqGkeLeoIa','uKTczfe','DMPSwwe','w291DgzPDfbYBW','wvHJzNe','B1bAwgG','ufrxA0y','mtGWmdmXnu1ytNHSvq','y2TKCei','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','yxPnBwy','C3rYAw5N','DMfSDwu','AxnbCNjHEq','zxHLyW','CLfrDxm','Bg9N','C3vJy2vZCW','BwvZC2fNzsbHDa','teXnioIVT+AXGUwKSEI0Pq','6kkR5l2/55sO77YA','E3VNLkJMIlFPNidMSyj9Fq','Bxb0oG','ntyXmtv0C0PeEvC','r3vwq1u','CMvZDwX0','DhLWzq','sfLfsuu','wxvzCe0','wg1Lq3e','ww5lwui','wu9tq08','DNvkzLe','r3jTDM0','ChvZAa','C2L6zq','AxjLBwvUDcbTzq','AhLkvxO','ifjLCxvLC3rPBG','zxrjza','vMXHtey','Aw5WDxq','t2Tms2W','Dgv4Da','DxrWDxqGzM9Yia','CLnYvKq','6iUX5PAh5zcn56EW','CMfUzg9Tvvvjra','ifjHDYbmte0GBW','yxv0BW','DNbzr1y','q3Lnvvm','5OM+5lIn5yIW5OYh5A6A55Qe5PYn6kof6Ake6k6+','DxbWzxjcB2r5','ywnR','uvbrs3C','tejztNm','DuD6rNm','qwjUswC','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','DhfRALe','z2TKBvG','zgf0yq','Exz6y1O','sfDOBwO','vwHryK0','C2vHCMnO','B2ffqvm','CNrpvfy','Exvltg8','t0rjrLLFr0vuxW','ioINO+AEKowiSoEAHoACJEIJHEAvSoAnRJO','yxb1De0','y3zfqvK','zYbVDxrMAxqGBq','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','EhDOz0O','y29UDgvUDa','ywrK','ze5duKm','l3bUzZTIyxnLnG','mJK3ndCYogXxu3veBW','DuXIzeW','E3VKUjBNLyZKUABOP6BLJ5f9Fq','5lIl5y2k6lQR6iom6z2I','y3rLCG','iezPBMfSihbYBW','BKPXuwG','B3v0zML0uhjLCW','CxnuAeq','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','iow3SUABToAwSoACJEIJHEMIHoIUVIaI','z2DzuLO','nZCZmZvRBwTRweC','vfPYqK0','yxbwsvu','zM9YrwfJAa','EK5JBeO','5PYQ5zYOieXmtsdOVPpLH7RKUk0','5BEY5y+w5RAi5PU05PAW','rvnu','E3VLVzpLIy3MNi3OO4v9Fq','tuLmuhq','CMvWBgfJzufSBa','5lIk5y2k6lQR6iom6z2IoIa','z1Lrq04','B3v0zML0xW','ChjVBxb0','5PYn6kof5O+q56s66k+n5l+U5Ps55AsX6lsLoG','poACJEIJHt4k','ufjptvbux1jfuW','svreqLK','B3v0zML0CW','wgjKC3y','ioACQUIVHUwiQ+EAHoACJEIJHEwTL+AUTsa','ndG4C3HQCLrh','t29yDui','DxbWzxjcB2r5qG','zw5LCG','uhjrre8','rhfqy3G','quTdveq','ALrWuMe','qKnxu2K','CMvTB3zLtgLZDa','BM93','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','C3vIC3rYAw5N','qwTbC0m','B2rPzNKGChjVBq','uKH6sfu'];_0x4987=function(){return _0x1abee9;};return _0x4987();}import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0x2d7f90,_0x4d0fcc,_0x207473,_0x56e6bb){const _0x3d0b6f={'AKCTD':function(_0x296adf,_0x3530b7){return _0x296adf===_0x3530b7;},'bShaw':'string','RKBdQ':_0x16f890(0x2b1,0x25c,0x2c1,0x28d),'QPQKw':function(_0x2e1f1b,_0x14235b){return _0x2e1f1b!==_0x14235b;},'kxVYB':_0x590168(0x1b9,0x239,0x200,0x1c3),'QjdfZ':_0x16f890(0x290,0x2e5,0x2c6,0x29a),'ZGYvw':function(_0x5c67b0,_0x53c2){return _0x5c67b0===_0x53c2;},'PrQDO':_0x590168(0x1a2,0x1eb,0x212,0x1a7),'zWUqU':function(_0x3aa7c6,_0x45ddc2){return _0x3aa7c6===_0x45ddc2;},'yAtBc':function(_0xbc188f,_0x31a0f2){return _0xbc188f===_0x31a0f2;},'HttTa':_0x16f890(0x2c3,0x38f,0x2fd,0x2b8),'tqkjQ':function(_0x495b43,_0x520153,_0x4ef56e,_0x2f58a2,_0xa767a8){return _0x495b43(_0x520153,_0x4ef56e,_0x2f58a2,_0xa767a8);}};function _0x590168(_0x44fd54,_0x19ac6c,_0x4d06a7,_0x91b7c){return _0x14e3(_0x44fd54-0x3,_0x4d06a7);}if(_0x3d0b6f[_0x16f890(0x2a4,0x2bb,0x28c,0x25c)](typeof _0x2d7f90,_0x3d0b6f[_0x590168(0x1e4,0x266,0x176,0x19a)])){if(_0x590168(0x1b7,0x15a,0x1c8,0x1e5)===_0x3d0b6f[_0x590168(0x235,0x297,0x1c4,0x1e0)]){if(_0x207473&&_0x2d7f90[_0x590168(0x1fa,0x20d,0x1fa,0x18b)](_0x4d0fcc)){if(_0x3d0b6f[_0x590168(0x140,0x1ba,0x193,0x14f)](_0x3d0b6f['kxVYB'],_0x3d0b6f[_0x16f890(0x326,0x310,0x30c,0x34c)]))_0x56e6bb&&_0x56e6bb[_0x590168(0x157,0x1b4,0x14a,0x1e8)](_0x4d0fcc);else{const _0x16b07b=_0x36e7ef['apply'](_0x2040ef,arguments);return _0x4df295=null,_0x16b07b;}}return _0x2d7f90[_0x16f890(0x219,0x2f1,0x27a,0x26e)](_0x4d0fcc,_0x207473);}else _0x2cd324['push'](..._0x16c5c8[_0x590168(0x156,0x1bc,0x1b5,0x178)]);}if(Array[_0x16f890(0x274,0x19a,0x220,0x1d9)](_0x2d7f90)){if(_0x3d0b6f['ZGYvw'](_0x3d0b6f[_0x16f890(0x249,0x236,0x28a,0x2b0)],'aJivO'))return _0x2d7f90[_0x16f890(0x2b2,0x353,0x2e2,0x2f9)](_0x5c3c54=>replacePlaceholder(_0x5c3c54,_0x4d0fcc,_0x207473,_0x56e6bb));else _0x19bb02[_0x51db99]=_0x40f5b8[_0x18fe79];}function _0x16f890(_0x316aaa,_0x595b8c,_0xe2854,_0x2462f5){return _0x14e3(_0xe2854-0x10d,_0x2462f5);}if(_0x2d7f90&&_0x3d0b6f[_0x16f890(0x39c,0x36d,0x30b,0x2da)](typeof _0x2d7f90,'object')){if(_0x3d0b6f[_0x16f890(0x2d4,0x306,0x2d3,0x2cf)](_0x3d0b6f[_0x16f890(0x26b,0x327,0x2aa,0x2b1)],_0x3d0b6f['HttTa'])){const _0x23aa26={};for(const _0x416bbc in _0x2d7f90){_0x23aa26[_0x416bbc]=_0x3d0b6f[_0x590168(0x145,0x105,0x125,0x180)](replacePlaceholder,_0x2d7f90[_0x416bbc],_0x4d0fcc,_0x207473,_0x56e6bb);}return _0x23aa26;}else return _0x4a6d39;}return _0x2d7f90;}function attachImagesToMessage(_0x2da042,_0x1d5c56,_0x29e81c,_0x384c86=_0x408ba4(0xb9,0x118,0x6f,0x9e)){const _0x3c2653={'TUTAQ':function(_0x58593d,_0x27fb58){return _0x58593d!==_0x27fb58;},'AbnIg':function(_0x15da79,_0x5ea0f7){return _0x15da79(_0x5ea0f7);},'FVZPQ':function(_0x5bc433,_0xd804a2){return _0x5bc433(_0xd804a2);},'cxIru':function(_0x54cb9b,_0x45da95){return _0x54cb9b===_0x45da95;},'WPHzt':_0x589b43(0xb5,0x28,-0x38,0x6d),'UFKKm':_0x589b43(0x70,0x15,0x61,-0x6e),'nJqQh':function(_0x2c27eb,_0x175ea4){return _0x2c27eb===_0x175ea4;},'ShWxM':function(_0x509654,_0x4489de){return _0x509654+_0x4489de;},'PTWkF':_0x270f9f(0xdc,0x11a,0x15f,0x19e),'Clhqo':_0x589b43(0x139,0xdc,0xcb,0xbe),'LpCGN':function(_0x5eba95,_0x4c3a85){return _0x5eba95<_0x4c3a85;},'zNclJ':function(_0x134c62,_0x16a631){return _0x134c62>=_0x16a631;},'oaEAS':_0x270f9f(0x16b,0x18a,0x14c,0xf4),'uAYwz':function(_0x514207,_0xc77278){return _0x514207===_0xc77278;},'ItDDH':_0x270f9f(0x1b4,0x199,0x159,0x1c8)};if(!_0x29e81c||_0x3c2653['cxIru'](_0x29e81c['length'],0xbc2+-0x674+-0x54e)||_0x3c2653[_0x589b43(0x10f,0xac,0x6f,0x13c)](_0x1d5c56,0xbd8*0x1+-0x1*-0x1c48+0x504*-0x8)||_0x3c2653[_0x270f9f(0x219,0x195,0x195,0x1c8)](_0x1d5c56,_0x2da042[_0x270f9f(0x1d8,0x2a5,0x23f,0x243)]))return _0x2da042;function _0x589b43(_0x5b1668,_0x4bcab9,_0x4e8d69,_0x11eec6){return _0x408ba4(_0x5b1668-0x19c,_0x4bcab9-0x13b,_0x11eec6,_0x4bcab9-0xc);}function _0x270f9f(_0x19ea94,_0x4bd450,_0x2f9f44,_0x87384){return _0x408ba4(_0x19ea94-0x1cc,_0x4bd450-0x100,_0x19ea94,_0x2f9f44-0x136);}const _0x5b559e=[..._0x2da042],_0x3401d1=_0x5b559e[_0x1d5c56],_0x37f42a=[];if(_0x3c2653[_0x589b43(0x4c,0x61,0xd1,-0x30)](typeof _0x3401d1[_0x270f9f(0x1df,0x1ee,0x181,0x13b)],_0x3c2653[_0x589b43(0x6d,0xb5,0x35,0x109)])){if(_0x3c2653[_0x589b43(0x80,0xab,0xda,0xe3)](_0x270f9f(0x279,0x281,0x201,0x1c4),_0x3c2653[_0x270f9f(0x137,0xfd,0x177,0x19e)])){const _0x1e88c8={};_0x1e88c8[_0x589b43(0x6b,0x24,0x4e,0x5e)]=_0x3c2653[_0x589b43(0xf1,0x13b,0x161,0xed)],_0x1e88c8[_0x589b43(0x87,0x35,-0x4c,-0x20)]=_0x3401d1[_0x270f9f(0x1f8,0x20f,0x181,0x142)],_0x37f42a[_0x589b43(0xa4,0x2c,0x8c,0xa1)](_0x1e88c8);}else{if(_0x3c2653[_0x589b43(0x46,0xab,0x5c,0x44)](_0x3121e4['id'],_0x451d6c))return;_0x42797f['removeList'+_0x589b43(0x57,0x80,0x8,0xc9)](_0x1ab766[_0x589b43(0xf7,0xa6,0xb6,0xa9)+_0x270f9f(0x291,0x208,0x250,0x2bd)+'ONSE'],_0x5efc67),_0x32c0bd[_0x589b43(0x85,0x1b,0x9,-0x25)]?_0x3c2653[_0x270f9f(0x171,0x1fc,0x16e,0xec)](_0x3aacef,_0x16ffe5[_0x270f9f(0x1b1,0x192,0x14d,0x122)]):_0x3c2653[_0x270f9f(0x262,0x245,0x240,0x204)](_0x22035e,new _0x3d337c(_0x25ca71[_0x589b43(0x76,0x23,0x54,-0x50)]||_0x589b43(0x2b,0x1d,0x7,-0x17)));}}else{if(Array[_0x270f9f(0x128,0x155,0x141,0xdc)](_0x3401d1[_0x589b43(0xad,0x57,0xcf,0xa8)])){if(_0x3c2653[_0x270f9f(0x1ce,0x1ac,0x1bc,0x163)]('tDcjl',_0x3c2653['ItDDH'])){const _0x282d23={};_0x282d23['type']=_0x589b43(0x98,0x35,0x39,0x2e),_0x282d23[_0x589b43(0x2a,0x35,0x72,0x34)]=_0x16373b['content'],_0x3fa2be[_0x270f9f(0xdb,0xf2,0x156,0x16f)](_0x282d23);}else _0x37f42a[_0x270f9f(0xee,0xf6,0x156,0x144)](..._0x3401d1[_0x589b43(0x87,0x57,-0x35,0x42)]);}}if(_0x29e81c[_0x270f9f(0x277,0x221,0x23f,0x290)]>-0x510+-0x8c4+0xdd4){const _0x18a7b9={};_0x18a7b9[_0x270f9f(0x1a7,0xd8,0x14e,0x167)]='text',_0x18a7b9[_0x589b43(0x53,0x35,0x83,0x82)]=_0x270f9f(0x1a8,0x1d1,0x16f,0x118)+_0x29e81c['length']+'张'+_0x384c86+']',_0x37f42a[_0x589b43(0xad,0x2c,-0x1f,0x4b)](_0x18a7b9);}_0x29e81c['forEach']((_0x364bc6,_0x4757db)=>{function _0x1df370(_0x205908,_0x28b47e,_0x56c3f3,_0x581d9e){return _0x589b43(_0x205908-0x69,_0x28b47e-0x478,_0x56c3f3-0x78,_0x56c3f3);}function _0x269191(_0x35a9e2,_0xea1dcc,_0x411e2c,_0x9e2fa){return _0x270f9f(_0x35a9e2,_0xea1dcc-0xa8,_0x9e2fa-0x37d,_0x9e2fa-0x22);}if(_0x3c2653['cxIru'](_0x3c2653['WPHzt'],_0x3c2653[_0x1df370(0x5d3,0x59f,0x533,0x5cd)])){const _0xb9cb8f=_0x3c2653['cxIru'](typeof _0x364bc6,_0x3c2653[_0x1df370(0x58d,0x52d,0x52c,0x537)])?_0x364bc6:_0x364bc6['base64'],_0x41db81=_0x3c2653['nJqQh'](typeof _0x364bc6,'object')&&_0x364bc6[_0x269191(0x635,0x628,0x5e0,0x5d4)]?_0x364bc6[_0x269191(0x5d1,0x57a,0x576,0x5d4)]:''+_0x384c86+_0x3c2653[_0x1df370(0x5ba,0x5a7,0x541,0x558)](_0x4757db,-0x2561+0x229b+0x2c7),_0xbb8432={};_0xbb8432[_0x1df370(0x4fb,0x49c,0x4b1,0x495)]=_0x3c2653['PTWkF'],_0xbb8432[_0x269191(0x475,0x495,0x528,0x4dc)]='['+_0x41db81+']',_0x37f42a[_0x269191(0x53a,0x4a6,0x468,0x4d3)](_0xbb8432);let _0x1ee4ca=_0xb9cb8f;!_0xb9cb8f[_0x269191(0x5c8,0x520,0x5f6,0x5b5)](_0x3c2653[_0x269191(0x4f7,0x5f5,0x5d2,0x569)])&&(_0x1ee4ca=_0x1df370(0x5e3,0x55f,0x4f0,0x5bb)+'/png;base6'+'4,'+_0xb9cb8f);const _0x301406={};_0x301406[_0x269191(0x56e,0x5fa,0x618,0x5b8)]=_0x1ee4ca,_0x301406[_0x269191(0x5dd,0x53b,0x593,0x5c0)]=_0x1df370(0x473,0x4b3,0x4d9,0x456);const _0x17fd3d={};_0x17fd3d['type']=_0x1df370(0x4bc,0x536,0x58b,0x563),_0x17fd3d[_0x1df370(0x5bc,0x536,0x532,0x4e4)]=_0x301406,_0x37f42a[_0x269191(0x514,0x534,0x557,0x4d3)](_0x17fd3d);}else _0x8a5cba=_0x1df370(0x4f5,0x55f,0x586,0x52c)+_0x269191(0x4fe,0x581,0x487,0x501)+'4,'+_0x4a4072;});const _0x41cccf={..._0x3401d1};return _0x41cccf['content']=_0x37f42a,_0x5b559e[_0x1d5c56]=_0x41cccf,_0x5b559e;}function findMessageIndexWithPlaceholder(_0x1a90fc,_0x4ae10b){const _0x283cdf={};function _0x452038(_0x281347,_0x20d4d3,_0x5cfa4a,_0x148012){return _0x408ba4(_0x281347-0x165,_0x20d4d3-0x114,_0x20d4d3,_0x281347- -0x151);}_0x283cdf[_0x452038(-0xd8,-0x9c,-0xb5,-0xd3)]=_0x4527ae(0xfe,0x14c,0x15b,0x1af),_0x283cdf[_0x4527ae(0x21b,0x1b9,0x160,0x223)]=function(_0x3baf5b,_0x41cca0){return _0x3baf5b<_0x41cca0;},_0x283cdf[_0x452038(-0xdf,-0x9c,-0xa2,-0xcc)]=function(_0x53ee85,_0x3e6144){return _0x53ee85===_0x3e6144;},_0x283cdf[_0x452038(-0x90,-0x95,-0x71,-0x76)]='XdXjF',_0x283cdf['naudH']=function(_0x7ad95c,_0x55845d){return _0x7ad95c===_0x55845d;},_0x283cdf[_0x452038(-0x10e,-0x9d,-0x175,-0xd8)]=_0x452038(-0x148,-0x1c8,-0x147,-0x19f);const _0x20da52=_0x283cdf;for(let _0x2aac66=0xc*0xbc+0x7*0x2bf+-0x1c09;_0x20da52[_0x452038(-0xbb,-0xdb,-0x79,-0x10f)](_0x2aac66,_0x1a90fc[_0x4527ae(0x2a4,0x22c,0x22f,0x277)]);_0x2aac66++){if(_0x20da52[_0x452038(-0xdf,-0x12b,-0xe2,-0xb4)](_0x20da52[_0x452038(-0x90,-0x11d,-0xa4,-0x14)],_0x20da52[_0x4527ae(0x216,0x1e4,0x1d4,0x1c6)])){const _0x5b7c49=_0x1a90fc[_0x2aac66];if(_0x20da52[_0x452038(-0xb0,-0xc4,-0x7b,-0x8a)](typeof _0x5b7c49['content'],_0x20da52[_0x452038(-0x10e,-0x104,-0x88,-0xde)])&&_0x5b7c49['content']['includes'](_0x4ae10b))return _0x2aac66;else{if(Array[_0x452038(-0x146,-0x1a3,-0xec,-0xc3)](_0x5b7c49[_0x452038(-0x106,-0x87,-0x10f,-0x115)]))for(const _0x51183f of _0x5b7c49[_0x452038(-0x106,-0x153,-0x177,-0x150)]){if(_0x51183f['type']===_0x20da52[_0x4527ae(0x19c,0x19c,0x1f8,0x117)]&&_0x51183f[_0x452038(-0x128,-0x18a,-0x1b5,-0x182)][_0x452038(-0x62,-0xe2,0x22,-0xae)](_0x4ae10b))return _0x2aac66;}}}else{const _0x12ce82={};_0x12ce82['type']=_0x20da52[_0x452038(-0xd8,-0x14a,-0x15d,-0x16a)],_0x12ce82[_0x452038(-0x128,-0xc9,-0xb9,-0xda)]='\x0a[以下是用户上传的'+_0x194ef0[_0x452038(-0x48,-0xd3,0x11,-0x88)]+'张'+_0x4579b0+']',_0x10e019[_0x452038(-0x131,-0x196,-0xa1,-0x9f)](_0x12ce82);}}function _0x4527ae(_0x2dd399,_0x251615,_0x58e977,_0x8dd4cd){return _0x408ba4(_0x2dd399-0x11b,_0x251615-0x183,_0x58e977,_0x251615-0x123);}return-(-0x3aa+0x11d1*0x1+0x2*-0x713);}function generateRequestId(){const _0x18bf59={};function _0x3d3821(_0x1166d8,_0x545f9f,_0x5299a2,_0x520725){return _0x408ba4(_0x1166d8-0x95,_0x545f9f-0xf5,_0x1166d8,_0x5299a2- -0x94);}_0x18bf59[_0x3d3821(0x54,-0x21,0x3d,-0x39)]=function(_0x4dbdcf,_0x99207b){return _0x4dbdcf+_0x99207b;};const _0x21481b=_0x18bf59;if(crypto&&crypto['randomUUID'])return crypto[_0x53b56a(0x3ef,0x375,0x400,0x3ce)]();function _0x53b56a(_0x2a03ac,_0x5eb7da,_0xc84da3,_0x5cf2db){return _0x408ba4(_0x2a03ac-0x148,_0x5eb7da-0x1c0,_0x2a03ac,_0x5cf2db-0x3a1);}return _0x21481b[_0x53b56a(0x44f,0x3de,0x42b,0x472)](Date[_0x53b56a(0x3b2,0x3db,0x3ce,0x41c)]()['toString'](-0x1833+-0x4*-0x1af+0x119b*0x1),Math[_0x53b56a(0x4fa,0x4b8,0x441,0x473)]()[_0x53b56a(0x50a,0x4f3,0x48a,0x487)](0x1*0x9ad+0xca*0x2b+-0x2b77)['substring'](-0x20a*-0x4+0x1b1a+0x5e0*-0x6));}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){function _0x2960e1(_0x3510e7,_0x2e7611,_0x3780af,_0x3c9d90){return _0x408ba4(_0x3510e7-0xd1,_0x2e7611-0x92,_0x3780af,_0x3c9d90-0x3dc);}const _0x20a7f6={'ggYRZ':function(_0x2f781b,_0x41cb78){return _0x2f781b===_0x41cb78;},'KRfZM':_0x2960e1(0x4c9,0x4a6,0x48f,0x509),'hknrR':function(_0xe08d8a,_0x2f4f06){return _0xe08d8a!==_0x2f4f06;},'HJFHc':_0x2eff47(0x15e,0x13f,0x1b7,0x11c)+'时','rQQus':_0x2960e1(0x37e,0x3c2,0x3af,0x3e5),'XuIiF':_0x2eff47(0x1cc,0x1cf,0x231,0x1cf),'vvPEy':_0x2960e1(0x526,0x4c5,0x53b,0x4ac),'EyRLe':'vjlYa','aljrD':function(_0x46e2a2){return _0x46e2a2();},'JzQsw':function(_0x37942e,_0x187a25,_0x89b83){return _0x37942e(_0x187a25,_0x89b83);}};function _0x2eff47(_0x8dfbf0,_0x3b6a39,_0x94e07f,_0x505729){return _0x408ba4(_0x8dfbf0-0x91,_0x3b6a39-0x103,_0x3b6a39,_0x8dfbf0-0xb9);}return new Promise((_0x1f988e,_0x1190f2)=>{const _0x7743e5={};_0x7743e5['RekvV']=_0x20a7f6[_0x1a8aa4(-0x2e,-0x92,-0x15,0x6d)];function _0x1a8aa4(_0x12bcbd,_0x5a1704,_0x35fddc,_0x4c16f6){return _0x2eff47(_0x35fddc- -0xdb,_0x4c16f6,_0x35fddc-0x193,_0x4c16f6-0x10e);}_0x7743e5[_0x3e74fa(0x577,0x4f0,0x503,0x54b)]=_0x20a7f6[_0x1a8aa4(0xc5,0xf1,0x85,0x29)];function _0x3e74fa(_0x5b0ac7,_0x1e6dd8,_0x33c814,_0x47be3d){return _0x2960e1(_0x5b0ac7-0x54,_0x1e6dd8-0x82,_0x33c814,_0x47be3d-0x9a);}_0x7743e5[_0x1a8aa4(0xcb,0x12a,0xac,0xf1)]=_0x1a8aa4(-0x83,-0x64,0x7,-0x3b),_0x7743e5[_0x3e74fa(0x5da,0x4eb,0x532,0x581)]=_0x20a7f6[_0x1a8aa4(0xc1,0xe7,0xa5,0xe0)];const _0x40f727=_0x7743e5;if(_0x20a7f6[_0x1a8aa4(0xb9,0x95,0xbc,0x51)](_0x20a7f6['EyRLe'],_0x3e74fa(0x604,0x5ca,0x62e,0x5a1))){const _0x34d362=typeof _0x590684===_0x40f727['RekvV']?_0x4328fd:_0x53a848['base64'],_0x2bc2a0=typeof _0x2af08a===_0x40f727['WTmUo']&&_0x450380[_0x1a8aa4(0x169,0x172,0xff,0x11e)]?_0x3edb1c['name']:''+_0x2a8965+(_0x2f41c7+(-0x10f5*0x1+-0x12e9+0x23df)),_0x3009d9={};_0x3009d9[_0x1a8aa4(0x55,0x83,-0xa,-0x9c)]=_0x40f727['VEJka'],_0x3009d9['text']='['+_0x2bc2a0+']',_0x1f6d6e[_0x3e74fa(0x50d,0x4c4,0x4c1,0x496)](_0x3009d9);let _0x92b211=_0x34d362;!_0x34d362['startsWith'](_0x40f727['gQWSf'])&&(_0x92b211='data:image'+_0x1a8aa4(-0x37,0x1d,0x2c,0x4)+'4,'+_0x34d362);const _0x4aa1a1={};_0x4aa1a1[_0x3e74fa(0x5a1,0x57e,0x5bc,0x57b)]=_0x92b211,_0x4aa1a1['detail']='auto';const _0x5295dc={};_0x5295dc[_0x1a8aa4(-0x1d,-0x7a,-0xa,-0x5d)]=_0x1a8aa4(0x2a,0x1e,0x90,0xe6),_0x5295dc['image_url']=_0x4aa1a1,_0x3ed655[_0x3e74fa(0x480,0x50b,0x405,0x496)](_0x5295dc);}else{const _0x8916b5=_0x20a7f6['aljrD'](generateRequestId);console[_0x1a8aa4(0x62,0x8,-0x14,0x7a)](_0x3e74fa(0x5f7,0x5cc,0x5ac,0x5a2)+_0x1a8aa4(0xc5,0xbe,0x102,0xb4)+_0x3e74fa(0x414,0x4ce,0x440,0x49a)+_0x3e74fa(0x440,0x45b,0x465,0x4be)+_0x3e74fa(0x482,0x570,0x552,0x4f5)+_0x1a8aa4(0xdc,0x155,0x107,0xee)+_0x8916b5+')');const _0x4f45a2=_0x5c93b2=>{function _0x4b5ac2(_0x3c7daa,_0x7cbf34,_0x12ae38,_0x193d5e){return _0x1a8aa4(_0x3c7daa-0x18,_0x7cbf34-0x57,_0x12ae38- -0x1ec,_0x7cbf34);}function _0x1d0754(_0x2b8750,_0x587527,_0x16347d,_0xb29ca2){return _0x1a8aa4(_0x2b8750-0x8e,_0x587527-0x1b1,_0x2b8750-0x2b6,_0x587527);}if(_0x20a7f6[_0x1d0754(0x2ee,0x280,0x381,0x322)](_0x20a7f6[_0x4b5ac2(-0x109,-0x127,-0x16b,-0x137)],_0x1d0754(0x2b3,0x227,0x31b,0x2c2)))return null;else{if(_0x20a7f6[_0x4b5ac2(-0x18b,-0x10f,-0x130,-0x196)](_0x5c93b2['id'],_0x8916b5))return;eventSource['removeList'+_0x1d0754(0x308,0x342,0x281,0x2c6)](eventNames[_0x4b5ac2(-0x11c,-0x1b3,-0x174,-0x193)+'ODIFY_GET_'+_0x4b5ac2(-0x214,-0x1bf,-0x1a2,-0x17f)+_0x4b5ac2(-0xf8,-0x143,-0x173,-0x143)],_0x4f45a2),_0x1f988e(_0x5c93b2[_0x4b5ac2(-0x199,-0x1f5,-0x1a5,-0x1af)]);}};eventSource['on'](eventNames[_0x3e74fa(0x4b7,0x5a5,0x529,0x510)+_0x1a8aa4(0xa7,0x83,0x22,0x3d)+_0x3e74fa(0x55f,0x4b5,0x488,0x4e2)+'PONSE'],_0x4f45a2);const _0xa9ee22={};_0xa9ee22['id']=_0x8916b5,eventSource[_0x1a8aa4(0xa9,0x9c,0x6c,-0x1d)](eventNames[_0x3e74fa(0x50f,0x4d6,0x4d8,0x510)+_0x1a8aa4(0x6d,0xaf,0x22,-0x53)+_0x1a8aa4(0x115,0xaa,0x9b,0xa)+_0x3e74fa(0x5c7,0x542,0x561,0x574)],_0xa9ee22),_0x20a7f6[_0x3e74fa(0x56c,0x511,0x5ed,0x59c)](setTimeout,()=>{function _0x5eeebb(_0x148734,_0xcd4dea,_0x4243db,_0x31fef9){return _0x3e74fa(_0x148734-0x71,_0xcd4dea-0x14c,_0x31fef9,_0x148734- -0x18d);}function _0x374c46(_0x4a252b,_0x9a2c25,_0x475a7d,_0x4b392f){return _0x3e74fa(_0x4a252b-0x80,_0x9a2c25-0xf8,_0x9a2c25,_0x4b392f-0x22);}eventSource[_0x374c46(0x493,0x4db,0x4b9,0x512)+_0x5eeebb(0x35d,0x2ff,0x350,0x334)](eventNames['LLM_CHAR_M'+_0x374c46(0x468,0x507,0x4b7,0x4dc)+_0x5eeebb(0x355,0x3c5,0x36d,0x309)+_0x374c46(0x5c0,0x5a0,0x5b3,0x533)],_0x4f45a2),_0x1190f2(new Error(_0x20a7f6[_0x374c46(0x5b5,0x4e2,0x4cc,0x558)]));},0x1c3c+0x2a5d+0x3*-0xa83);}});}export function LLM_OUTFIT_MODIFY(_0x5cb2b7,_0x504587={}){const _0x5f0505={'yallx':function(_0x27d7a2,_0x463daa){return _0x27d7a2!==_0x463daa;},'TNtjW':_0x58badd(0x44d,0x447,0x3fb,0x46d),'AZykt':function(_0x498fec,_0x473a23){return _0x498fec(_0x473a23);},'sSocA':'LLM\x20请求失败','rtOTV':function(_0x5a2d53){return _0x5a2d53();}};function _0x58badd(_0x22c741,_0x4be8da,_0x16972a,_0x33ee64){return _0x408ba4(_0x22c741-0xd6,_0x4be8da-0xaa,_0x22c741,_0x16972a-0x30f);}return new Promise((_0x184295,_0x53f89d)=>{const _0x59a989={'pdoAr':function(_0x37ccd5,_0x1bf0d2){function _0xe43806(_0x317f77,_0x37a0ec,_0xf538e5,_0x446c1e){return _0x14e3(_0xf538e5- -0xe9,_0x317f77);}return _0x5f0505[_0xe43806(0x98,0x167,0xf7,0x18b)](_0x37ccd5,_0x1bf0d2);},'eqFag':_0x699b50(0xaf,0xdc,0xfa,0x108),'CyMUS':_0x3e9f61(-0x170,-0x145,-0x19a,-0x128),'uyvoA':function(_0x34e682,_0x232cad){return _0x5f0505['AZykt'](_0x34e682,_0x232cad);},'jTpRa':_0x5f0505['sSocA']},_0x15f3e2=_0x5f0505[_0x3e9f61(-0x24f,-0x1d6,-0x25c,-0x1c4)](generateRequestId),_0x4af8a5=_0x504587[_0x699b50(0x140,0x5c,0xcf,0xb0)]||0x5cd1*0x4+-0x163*0xc9+-0x8dd7*-0x1;console[_0x3e9f61(-0x271,-0x20a,-0x178,-0x221)](_0x699b50(0x146,0x101,0xfe,0xea)+_0x699b50(0x103,0x187,0xf6,0xe9)+_0x3e9f61(-0x14e,-0x149,-0x129,-0xd8)+_0x699b50(0xfb,0x11a,0xc2,0xea)+_0x699b50(0x11e,0xdf,0xca,0x91)+_0x3e9f61(-0x200,-0x18f,-0x114,-0xfd)+':\x20'+_0x15f3e2+')');const _0x5921a7=_0x394cd7=>{function _0x1ec0fa(_0xc87ffb,_0x4e7c80,_0x1403e3,_0x3d1e9b){return _0x699b50(_0xc87ffb-0x76,_0x4e7c80-0x76,_0x4e7c80-0x1c7,_0x3d1e9b);}function _0x37e7b0(_0x1ed795,_0x284d2c,_0x59f6dc,_0x161131){return _0x699b50(_0x1ed795-0x1,_0x284d2c-0x85,_0x161131-0x36a,_0x1ed795);}if(_0x59a989[_0x37e7b0(0x4c2,0x4b8,0x3b9,0x42d)](_0x59a989[_0x37e7b0(0x42b,0x495,0x37b,0x3ff)],_0x59a989[_0x37e7b0(0x3e1,0x371,0x330,0x36d)])){if(_0x59a989[_0x37e7b0(0x427,0x4bd,0x448,0x42d)](_0x394cd7['id'],_0x15f3e2))return;eventSource[_0x1ec0fa(0x1ad,0x213,0x240,0x230)+_0x37e7b0(0x353,0x404,0x32d,0x3b0)](eventNames[_0x1ec0fa(0x1c2,0x233,0x24a,0x1aa)+_0x37e7b0(0x4d0,0x47b,0x3db,0x456)+_0x37e7b0(0x468,0x361,0x3b8,0x3d5)],_0x5921a7),_0x394cd7[_0x37e7b0(0x2b8,0x345,0x2c8,0x34b)]?_0x59a989['uyvoA'](_0x184295,_0x394cd7[_0x1ec0fa(0x213,0x1b0,0x157,0x227)]):_0x59a989[_0x1ec0fa(0x20d,0x29f,0x246,0x300)](_0x53f89d,new Error(_0x394cd7[_0x37e7b0(0x2c4,0x3ba,0x30e,0x353)]||_0x59a989[_0x37e7b0(0x425,0x345,0x392,0x3b4)]));}else _0x2e14fa[_0x1ec0fa(0x1de,0x22b,0x288,0x1f4)](_0x1ec0fa(0x2d0,0x2c5,0x33d,0x268)+_0x37e7b0(0x4e8,0x48a,0x4db,0x460)+_0x1ec0fa(0x1e2,0x252,0x241,0x29f),_0x378584),_0x41b4ac[_0x37e7b0(0x3e2,0x3ab,0x394,0x3ce)]('服装提示词修改失败:'+'\x20'+_0x2af671[_0x1ec0fa(0x2b8,0x2ad,0x2cf,0x240)]);};function _0x3e9f61(_0x2aaa88,_0x358376,_0x209438,_0x5b1395){return _0x58badd(_0x5b1395,_0x358376-0x185,_0x358376- -0x527,_0x5b1395-0x108);}eventSource['on'](eventNames['LLM_CHAR_M'+_0x3e9f61(-0xbd,-0xfe,-0x150,-0xae)+'ONSE'],_0x5921a7);const _0x1f81d1={};_0x1f81d1[_0x699b50(0x16,0xd,0x3b,0x9e)]=_0x5cb2b7;function _0x699b50(_0x161179,_0x4e4d60,_0x5049d5,_0x5737c5){return _0x58badd(_0x5737c5,_0x4e4d60-0xe3,_0x5049d5- -0x33d,_0x5737c5-0x33);}_0x1f81d1['id']=_0x15f3e2,eventSource[_0x3e9f61(-0x1a4,-0x18a,-0x20f,-0x1f2)](eventNames['LLM_CHAR_M'+_0x3e9f61(-0x1e0,-0x159,-0x17d,-0x15d)+_0x3e9f61(-0x170,-0x1b6,-0x22a,-0x17d)],_0x1f81d1),setTimeout(()=>{function _0x1111fa(_0x161099,_0x417552,_0x48a99d,_0x3a4b99){return _0x3e9f61(_0x161099-0x92,_0x48a99d-0x4db,_0x48a99d-0xfe,_0x3a4b99);}function _0x2759be(_0x339c4a,_0x24cfea,_0x21958c,_0x4e934a){return _0x3e9f61(_0x339c4a-0x15b,_0x24cfea-0x6bd,_0x21958c-0xbc,_0x339c4a);}_0x5f0505[_0x2759be(0x5ff,0x57d,0x606,0x5f4)](_0x5f0505['TNtjW'],_0x5f0505['TNtjW'])?_0x2a95b6&&_0x3f28e7[_0x1111fa(0x354,0x319,0x30f,0x387)](_0x2e419a):(eventSource[_0x1111fa(0x2d5,0x2f1,0x33d,0x2bc)+_0x2759be(0x486,0x519,0x54f,0x503)](eventNames[_0x1111fa(0x31b,0x39e,0x35d,0x3d4)+_0x2759be(0x55a,0x5bf,0x5fa,0x546)+_0x2759be(0x514,0x53e,0x4f3,0x506)],_0x5921a7),_0x5f0505['AZykt'](_0x53f89d,new Error(_0x1111fa(0x2fd,0x3d0,0x370,0x2ff)+_0x1111fa(0x2ea,0x2fb,0x346,0x310))));},_0x4af8a5);});}function preprocessTagContent(_0x3feebb){function _0x334bca(_0x2fedaa,_0x42223a,_0x12e824,_0x28845b){return _0x408ba4(_0x2fedaa-0x2d,_0x42223a-0x91,_0x42223a,_0x12e824-0x47);}function _0x1fdb39(_0x4fcb67,_0x5980e8,_0x11b4d0,_0x3c6917){return _0x408ba4(_0x4fcb67-0x1ba,_0x5980e8-0x177,_0x3c6917,_0x4fcb67-0x14b);}let _0x42db24=_0x3feebb[_0x334bca(0x193,0x92,0x10d,0x110)](/:/g,':')[_0x334bca(0x121,0xeb,0x10d,0xe2)](/\(/g,'（')[_0x334bca(0xe7,0xfc,0x10d,0x85)](/\)/g,'）')[_0x1fdb39(0x211,0x217,0x187,0x18f)](/,/g,',');return _0x42db24;}function parseOutfitData(_0x480491){const _0x3533bc={};_0x3533bc[_0x153fed(0x266,0x20e,0x2be,0x26d)]='(((.+)+)+)'+'+$',_0x3533bc[_0x2a3221(0xa9,0x5f,0x48,0xae)]=_0x153fed(0x1f0,0x271,0x183,0x1a6);function _0x153fed(_0x57c315,_0x1986f7,_0x467fa4,_0x5d1e86){return _0x408ba4(_0x57c315-0x5c,_0x1986f7-0x1b7,_0x5d1e86,_0x57c315-0x1be);}function _0x2a3221(_0x35da9a,_0x11816f,_0x53f8b8,_0x253f7c){return _0x408ba4(_0x35da9a-0x5e,_0x11816f-0x9a,_0x253f7c,_0x35da9a-0x5f);}_0x3533bc[_0x2a3221(0x17b,0x1fe,0x14a,0x1ad)]='nameEN',_0x3533bc[_0x153fed(0x24d,0x1f7,0x1ff,0x242)]='upperBody',_0x3533bc['tunbb']='upperBodyB'+'ack',_0x3533bc[_0x153fed(0x24f,0x1e7,0x241,0x20b)]=_0x153fed(0x2b8,0x2b5,0x2ca,0x2f7),_0x3533bc[_0x153fed(0x204,0x19f,0x206,0x23a)]=_0x153fed(0x27a,0x20b,0x229,0x28e)+'ck',_0x3533bc[_0x153fed(0x20e,0x243,0x211,0x260)]=_0x153fed(0x2b9,0x224,0x2c5,0x329),_0x3533bc[_0x153fed(0x240,0x22a,0x2ce,0x1c0)]=_0x2a3221(0xdf,0x98,0x5d,0x64),_0x3533bc[_0x2a3221(0x14a,0x18b,0x150,0x118)]=function(_0x5a5345,_0x2232d3){return _0x5a5345===_0x2232d3;},_0x3533bc[_0x153fed(0x1db,0x241,0x230,0x1d1)]=function(_0x1559a6,_0x586cfa){return _0x1559a6+_0x586cfa;},_0x3533bc[_0x2a3221(0xb6,0xb1,0x122,0xe8)]=function(_0x4c5644,_0x32eb94){return _0x4c5644&&_0x32eb94;},_0x3533bc['MILPt']=function(_0xdeffdf,_0x354fbb){return _0xdeffdf!==_0x354fbb;},_0x3533bc[_0x153fed(0x1c6,0x1bb,0x1e8,0x239)]=_0x2a3221(0x95,0xd6,0xbc,0xf5),_0x3533bc['pcFDk']='ELlNB',_0x3533bc['hdiAw']=_0x2a3221(0x18b,0x19f,0x1d6,0x140)+_0x153fed(0x2e2,0x337,0x2e8,0x2de)+_0x2a3221(0xa4,0x99,0xea,0x85);const _0x3e9632=_0x3533bc,_0x1af078=_0x480491[_0x2a3221(0x162,0x1d7,0xcd,0x1ce)]('\x0a')[_0x153fed(0x28b,0x295,0x314,0x253)](_0x2f7d25=>_0x2f7d25[_0x153fed(0x286,0x203,0x311,0x20e)]())[_0x153fed(0x2be,0x229,0x2db,0x2a3)](_0x4e782f=>_0x4e782f),_0x22b538={};_0x22b538[_0x2a3221(0x17c,0x185,0x1b4,0x15d)]='',_0x22b538['nameEN']='',_0x22b538['upperBody']='',_0x22b538[_0x153fed(0x231,0x1c9,0x2c4,0x2c3)+'ack']='',_0x22b538['fullBody']='',_0x22b538[_0x153fed(0x27a,0x202,0x1f2,0x22b)+'ck']='';const _0x5aefe3=_0x22b538,_0x2f4540={};_0x2f4540['中文名称']=_0x153fed(0x2db,0x2e8,0x2f1,0x28d),_0x2f4540[_0x153fed(0x1ea,0x15d,0x27d,0x1fc)]=_0x3e9632['qwcxi'],_0x2f4540[_0x2a3221(0x10f,0x133,0x139,0xd8)]=_0x3e9632['xUgQR'],_0x2f4540['上半身背面']=_0x3e9632[_0x2a3221(0x10a,0xb7,0x136,0x145)],_0x2f4540[_0x2a3221(0x113,0x122,0xb9,0x12a)]=_0x3e9632[_0x153fed(0x24f,0x225,0x255,0x1c3)],_0x2f4540['下半身服装']=_0x2a3221(0x159,0xfb,0x18c,0x173),_0x2f4540[_0x2a3221(0xb1,0x132,0x102,0x111)]=_0x3e9632[_0x153fed(0x204,0x210,0x1f2,0x220)];const _0x2f944d=_0x2f4540;for(const _0x2bcc05 of _0x1af078){if(_0x3e9632[_0x2a3221(0xaf,0x127,0xf8,0x12c)]===_0x3e9632[_0x2a3221(0xe1,0x5d,0xad,0x13b)])return _0x5371af[_0x153fed(0x2a4,0x2e3,0x2bb,0x2a5)]()[_0x2a3221(0x9f,0x42,0x18,0xa)](wQjmrO[_0x153fed(0x266,0x263,0x26f,0x256)])['toString']()['constructo'+'r'](_0x26510c)[_0x2a3221(0x9f,0x11c,0x11f,0x104)](_0x153fed(0x2b0,0x27b,0x307,0x2db)+'+$');else{const _0x2e5bbd=_0x2bcc05['indexOf'](':');if(_0x3e9632[_0x153fed(0x2a9,0x265,0x21a,0x241)](_0x2e5bbd,-(-0x1246+0x1*0x22a9+-0x1062)))continue;const _0xd54ad6=_0x2bcc05['substring'](0x2216+-0x4*0x5d3+-0xaca,_0x2e5bbd)[_0x2a3221(0x127,0xfe,0x1b7,0x113)](),_0x12759f=_0x2bcc05[_0x153fed(0x23b,0x296,0x2a2,0x229)](_0x3e9632['YOSCO'](_0x2e5bbd,-0x81*0x26+0x856+0xad1))[_0x2a3221(0x127,0x19d,0x120,0x1af)]();if(_0x2f944d[_0xd54ad6])_0x5aefe3[_0x2f944d[_0xd54ad6]]=_0x12759f;else{if(_0x3e9632[_0x2a3221(0xb6,0x61,0x136,0x141)](_0xd54ad6,_0x12759f)){if(_0x3e9632[_0x153fed(0x222,0x22d,0x1d4,0x1bb)](_0x3e9632[_0x2a3221(0x67,0xc,0xc4,0x49)],_0x3e9632['pcFDk']))console[_0x2a3221(0x6d,0x22,0xe,0x99)](_0x153fed(0x2ea,0x2b5,0x307,0x276)+_0x2a3221(0x183,0x19f,0x1e7,0x1bf)+_0x153fed(0x22e,0x279,0x209,0x239)+'\x22'+_0xd54ad6+'\x22');else{_0x168540[_0x153fed(0x250,0x1ff,0x208,0x21a)](_0x3e9632[_0x153fed(0x208,0x20b,0x183,0x268)]);return;}}}}}if(!_0x5aefe3[_0x153fed(0x2db,0x2c8,0x33f,0x33b)])return null;return console[_0x153fed(0x1cc,0x1ea,0x21d,0x190)](_0x3e9632[_0x2a3221(0x109,0xdd,0xfa,0x8a)],_0x5aefe3),_0x5aefe3;}function extractOutfitTags(_0x31642b){const _0x2cc75e={'wSQFD':function(_0x47d307,_0x18a80a){return _0x47d307!==_0x18a80a;},'Coiua':function(_0x1b052c,_0x45ceae){return _0x1b052c(_0x45ceae);}},_0x50cf0b={};_0x50cf0b[_0xf60407(0x39c,0x355,0x38b,0x33d)]=[];function _0xf60407(_0x554287,_0x293a6e,_0x40a068,_0x5869cf){return _0x408ba4(_0x554287-0x4e,_0x293a6e-0xbd,_0x293a6e,_0x5869cf-0x2cf);}const _0xc45691=_0x50cf0b;_0x31642b=_0x31642b[_0xf60407(0x3ee,0x3ce,0x3d0,0x395)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0xf60407(0x40c,0x335,0x358,0x397)]();const _0x5e79cf=/<服装>([\s\S]*?)<\/服装>/g;let _0x4c0c3e;while(_0x2cc75e[_0xf60407(0x409,0x41c,0x32a,0x3b4)](_0x4c0c3e=_0x5e79cf[_0xf60407(0x28f,0x2e2,0x352,0x2db)](_0x31642b),null)){const _0x36e026=_0x2cc75e['Coiua'](preprocessTagContent,_0x4c0c3e[-0x3*-0xa9f+-0x26d5+0x11*0x69]),_0x1fc3b2=_0x2cc75e[_0xf60407(0x428,0x3c6,0x40a,0x3ef)](parseOutfitData,_0x36e026);_0x1fc3b2&&_0xc45691['outfits'][_0x51128b(-0x38,-0x67,-0x21,-0x24)](_0x1fc3b2);}function _0x51128b(_0x596241,_0x5d399e,_0x4fc811,_0x3e9471){return _0x408ba4(_0x596241-0x1b4,_0x5d399e-0x1e9,_0x5d399e,_0x596241- -0x58);}return _0xc45691;}function getCurrentOutfitPreset(){const _0xf9c30b=extension_settings[extensionName];function _0x37ac35(_0x5eaaf2,_0x151ced,_0x4b936e,_0x39425d){return _0x408ba4(_0x5eaaf2-0x1a2,_0x151ced-0x191,_0x39425d,_0x4b936e- -0x109);}function _0x1d9e50(_0x4594c3,_0x57cc75,_0x1ccf5f,_0x2808e1){return _0x408ba4(_0x4594c3-0x18b,_0x57cc75-0x104,_0x1ccf5f,_0x2808e1- -0x20f);}const _0x5ca1bc=_0xf9c30b[_0x37ac35(-0x66,-0x83,-0xb3,-0x11e)+_0x37ac35(-0x13f,-0xcf,-0xe4,-0x128)];if(!_0x5ca1bc||!_0xf9c30b[_0x37ac35(-0xfa,-0xde,-0xb3,-0x20)+_0x1d9e50(-0x19c,-0x8a,-0xee,-0x10b)][_0x5ca1bc]){if('HCtyt'!==_0x1d9e50(-0xfa,-0x17a,-0x142,-0x133))_0x2053e7['add'](_0x56661b);else return null;}const _0x5ae090={};return _0x5ae090['id']=_0x5ca1bc,_0x5ae090[_0x1d9e50(-0x1fd,-0x146,-0x1e1,-0x1d3)]=_0xf9c30b[_0x1d9e50(-0x1da,-0x17c,-0x12d,-0x1b9)+_0x37ac35(0x32,0x8d,-0x5,-0x58)][_0x5ca1bc],_0x5ae090;}function buildOutfitText(_0x89ebda){function _0x30f0d9(_0x46f090,_0x3c1bf4,_0x212209,_0x3f378b){return _0x408ba4(_0x46f090-0xcb,_0x3c1bf4-0x156,_0x3c1bf4,_0x46f090-0x2d2);}const _0x51c382={};_0x51c382[_0x30f0d9(0x319,0x38d,0x2c6,0x327)]=_0x54e70c(0x47a,0x443,0x468,0x467);const _0x12f71b=_0x51c382,_0x1b256d=_0x89ebda['data'];let _0x130dc6=_0x12f71b[_0x30f0d9(0x319,0x369,0x39e,0x39e)];_0x130dc6+=_0x30f0d9(0x362,0x39d,0x354,0x30c)+(_0x1b256d[_0x54e70c(0x50b,0x496,0x4d8,0x519)]||'')+'\x0a';function _0x54e70c(_0x376f1d,_0x1e0c6d,_0x470811,_0x133cd4){return _0x408ba4(_0x376f1d-0xc3,_0x1e0c6d-0x1e2,_0x470811,_0x133cd4-0x3fc);}return _0x130dc6+='英文名称:\x20'+(_0x1b256d[_0x30f0d9(0x366,0x3c5,0x377,0x37a)]||'')+'\x0a',_0x130dc6+=_0x54e70c(0x484,0x525,0x49e,0x4e5)+(_0x1b256d[_0x54e70c(0x3c3,0x482,0x3de,0x42f)]||'')+'\x0a',_0x130dc6+=_0x30f0d9(0x338,0x36e,0x2fb,0x3c7)+(_0x1b256d[_0x30f0d9(0x345,0x314,0x39d,0x388)+_0x54e70c(0x41c,0x4a9,0x3d9,0x430)]||'')+'\x0a',_0x130dc6+=_0x30f0d9(0x3de,0x46d,0x3b2,0x42c)+(_0x1b256d[_0x54e70c(0x57e,0x51b,0x55c,0x4f6)]||'')+'\x0a',_0x130dc6+=_0x54e70c(0x54f,0x572,0x56d,0x50c)+(_0x1b256d[_0x54e70c(0x44f,0x4e3,0x455,0x4b8)+'ck']||'')+'\x0a',_0x130dc6+='</服装>',_0x130dc6;}export async function handleOutfitPromptModify(_0xc788af,_0x1239c1=[]){const _0x313ae4={'edfiw':_0x1dde57(-0x128,-0x11b,-0x92,-0x156)+_0x1dde57(-0xdc,-0x123,-0xd0,-0x118)+_0x4c7963(0x306,0x2cc,0x249,0x31f)+'outfit\x20pro'+'mpt\x20modify'+_0x1dde57(-0xef,-0x12f,-0xdd,-0x176)+'.','zyWRz':_0x1dde57(-0x1b7,-0x171,-0xde,-0xed)+'改请求...','HWhmj':function(_0x5bbc30,_0x3d75cf){return _0x5bbc30===_0x3d75cf;},'zgzDI':_0x4c7963(0x1d8,0x234,0x23c,0x1b7),'oisPW':function(_0x57ca7e){return _0x57ca7e();},'gqSkw':_0x4c7963(0x278,0x2f9,0x377,0x2a5)+_0x4c7963(0x2db,0x2f1,0x2e8,0x299)+'\x20Current\x20p'+_0x4c7963(0x35b,0x2ec,0x35c,0x305),'VVMnX':function(_0x1c96b8,_0x466cb1){return _0x1c96b8||_0x466cb1;},'UDggn':function(_0x106b4f,_0x284a33,_0x28b29e){return _0x106b4f(_0x284a33,_0x28b29e);},'aRqHG':_0x1dde57(-0x10e,-0x11b,-0xc3,-0x19c)+'mptModify]'+'\x20User\x20requ'+_0x4c7963(0x1ee,0x1ef,0x275,0x274)+_0x4c7963(0x327,0x2ae,0x273,0x2ee)+'x:','onJQn':function(_0x353145,_0x5ced5a,_0x462f43,_0x3faba8,_0x56e6b6){return _0x353145(_0x5ced5a,_0x462f43,_0x3faba8,_0x56e6b6);},'SeeNT':_0x1dde57(-0x194,-0x1e4,-0x208,-0x257),'ZtBUb':function(_0xec5d0a,_0x2deaf6,_0x273c2a,_0x1c588b,_0x267229){return _0xec5d0a(_0x2deaf6,_0x273c2a,_0x1c588b,_0x267229);},'hNMkt':_0x4c7963(0x33e,0x2d5,0x267,0x369),'VlaLF':_0x4c7963(0x1ae,0x1e0,0x23f,0x198),'rSrVD':function(_0x50a8d0,_0x5da2eb,_0x463a14,_0x283f94,_0x5b8ad8){return _0x50a8d0(_0x5da2eb,_0x463a14,_0x283f94,_0x5b8ad8);},'WmXIQ':'{{当前角色}}','osksM':function(_0x2b506d,_0xe46c24,_0x2be1a9,_0x1fd62e,_0x1f8f50){return _0x2b506d(_0xe46c24,_0x2be1a9,_0x1fd62e,_0x1f8f50);},'QWuWe':_0x1dde57(-0x1f6,-0x1f6,-0x25c,-0x20a),'UhQbM':_0x4c7963(0x1d4,0x216,0x2aa,0x291),'PpWqC':_0x1dde57(-0x171,-0x1ef,-0x1e1,-0x1d6)+'}}','AkAsC':function(_0x8d63c,_0x571b12){return _0x8d63c>_0x571b12;},'LkBqU':function(_0x40716d,_0x8aea18){return _0x40716d>_0x8aea18;},'Ntylw':function(_0x3e6dc5,_0x1aa7c7){return _0x3e6dc5>=_0x1aa7c7;},'TZrBM':_0x4c7963(0x2a7,0x26b,0x27f,0x21b),'vpYGV':'images\x20to\x20'+_0x1dde57(-0x2cc,-0x237,-0x203,-0x20d)+'\x20index','WQtiH':_0x1dde57(-0x10e,-0x11b,-0x109,-0x161)+_0x1dde57(-0x1b8,-0x123,-0xd6,-0x1ac)+_0x4c7963(0x2c7,0x252,0x2bd,0x268)+'t:','wDstK':'LLM\x20返回结果为空','Xbdsv':_0x4c7963(0x26e,0x22d,0x239,0x217)+_0x1dde57(-0x18d,-0x164,-0x184,-0x10e),'lpnlJ':function(_0x2fdec8,_0x3bef71,_0x491000){return _0x2fdec8(_0x3bef71,_0x491000);},'ITDBY':_0x4c7963(0x268,0x2db,0x29d,0x273),'OkLKl':_0x1dde57(-0xdd,-0x11b,-0x12a,-0x8f)+_0x1dde57(-0x132,-0x123,-0x159,-0x151)+_0x1dde57(-0x1f9,-0x18e,-0x13c,-0x1dc)};function _0x1dde57(_0x211ac2,_0x1db350,_0x167f7c,_0x5a228d){return _0x408ba4(_0x211ac2-0x3,_0x1db350-0x24,_0x167f7c,_0x1db350- -0x247);}console[_0x1dde57(-0x25f,-0x239,-0x1e7,-0x23e)](_0x313ae4['edfiw']),toastr[_0x4c7963(0x295,0x284,0x22c,0x274)](_0x313ae4[_0x4c7963(0x2d4,0x25a,0x213,0x257)]);function _0x4c7963(_0x10a4d2,_0x2b0bc2,_0x45ac6d,_0x2d3ec4){return _0x408ba4(_0x10a4d2-0xc1,_0x2b0bc2-0x7e,_0x2d3ec4,_0x2b0bc2-0x1cd);}try{if(_0x313ae4[_0x1dde57(-0x1d6,-0x209,-0x176,-0x239)]('gYQCN',_0x313ae4['zgzDI'])){const _0x23455b=extension_settings[extensionName],_0x3d27bf=_0x313ae4[_0x1dde57(-0x1b3,-0x1b4,-0x166,-0x215)](getCurrentOutfitPreset);if(!_0x3d27bf){toastr[_0x1dde57(-0x20f,-0x1b5,-0x174,-0x1bb)](_0x4c7963(0x2c3,0x2dc,0x327,0x2a1));return;}console['log'](_0x313ae4['gqSkw'],_0x3d27bf['id']);const _0x50f836=buildOutfitText(_0x3d27bf),_0x258c5d=[_0x313ae4['VVMnX'](_0xc788af,''),_0x50f836][_0x4c7963(0x24d,0x2cd,0x34a,0x2a4)](Boolean)[_0x1dde57(-0x1b5,-0x18c,-0x135,-0x150)]('\x0a');let _0x43ff49=_0x313ae4['UDggn'](buildPromptForRequestType,_0x4c7963(0x2e4,0x2c0,0x273,0x2d0)+'y',_0x258c5d);const _0x5f78e2=new Set(),_0x19b4ad=findMessageIndexWithPlaceholder(_0x43ff49,_0x1dde57(-0x290,-0x234,-0x1bb,-0x29c));console[_0x1dde57(-0x1b9,-0x239,-0x2b7,-0x1cf)](_0x313ae4[_0x4c7963(0x1ee,0x255,0x200,0x2dc)],_0x19b4ad),_0x43ff49=_0x313ae4[_0x1dde57(-0x1dc,-0x1aa,-0x23c,-0x161)](replacePlaceholder,_0x43ff49,_0x313ae4[_0x1dde57(-0xe7,-0x165,-0x142,-0xe8)],_0x50f836,_0x5f78e2),_0x43ff49=_0x313ae4[_0x1dde57(-0x187,-0x185,-0x140,-0x142)](replacePlaceholder,_0x43ff49,_0x313ae4[_0x4c7963(0x28f,0x2d4,0x264,0x27e)],_0x50f836,_0x5f78e2),_0x43ff49=_0x313ae4['ZtBUb'](replacePlaceholder,_0x43ff49,_0x313ae4[_0x4c7963(0x177,0x1f3,0x23c,0x21d)],_0x313ae4[_0x1dde57(-0x94,-0x122,-0x19b,-0xe7)](_0xc788af,''),_0x5f78e2),_0x43ff49=_0x313ae4[_0x4c7963(0x1ed,0x1f8,0x20a,0x184)](replacePlaceholder,_0x43ff49,_0x313ae4[_0x1dde57(-0x17f,-0x17b,-0x204,-0x17d)],'',_0x5f78e2),_0x43ff49=_0x313ae4[_0x4c7963(0x20a,0x28f,0x2d1,0x2bb)](replacePlaceholder,_0x43ff49,'{{上下文}}','',_0x5f78e2),_0x43ff49=_0x313ae4[_0x1dde57(-0x219,-0x18f,-0x16e,-0x1e2)](replacePlaceholder,_0x43ff49,_0x313ae4['QWuWe'],'',_0x5f78e2),_0x43ff49=replacePlaceholder(_0x43ff49,_0x313ae4[_0x1dde57(-0x27b,-0x208,-0x1ca,-0x1a9)],'',_0x5f78e2),_0x43ff49=replacePlaceholder(_0x43ff49,_0x1dde57(-0xd5,-0x167,-0xdd,-0x134)+'}}','',_0x5f78e2),_0x43ff49=_0x313ae4[_0x1dde57(-0x156,-0x18f,-0x134,-0x205)](replacePlaceholder,_0x43ff49,_0x313ae4['PpWqC'],'',_0x5f78e2),console[_0x1dde57(-0x25a,-0x239,-0x25a,-0x29a)](_0x1dde57(-0xed,-0x11b,-0x194,-0xaf)+'mptModify]'+_0x4c7963(0x1a1,0x221,0x1c8,0x228)+_0x1dde57(-0x2c2,-0x233,-0x2c8,-0x1e8),_0x43ff49);let _0x29e453='';_0x313ae4[_0x4c7963(0x1f2,0x24b,0x2a0,0x2df)](_0x5f78e2[_0x4c7963(0x1f4,0x1ee,0x222,0x1b6)],-0x2502+-0x1dde*-0x1+0x724)&&(_0x29e453=_0x4c7963(0x1fc,0x26f,0x1df,0x230)+_0x1dde57(-0x2a0,-0x235,-0x26a,-0x26b)+[..._0x5f78e2][_0x1dde57(-0x20e,-0x18c,-0x157,-0x1bc)]('、')+'\x0a');_0x1239c1&&_0x313ae4['LkBqU'](_0x1239c1[_0x4c7963(0x24e,0x2d6,0x252,0x24b)],0x230f+-0x1386+0x29*-0x61)&&_0x313ae4['Ntylw'](_0x19b4ad,0xf2c+-0x2*-0xccf+-0x1c6*0x17)&&(_0x43ff49=_0x313ae4[_0x4c7963(0x1b8,0x1f8,0x1dc,0x18c)](attachImagesToMessage,_0x43ff49,_0x19b4ad,_0x1239c1,_0x313ae4[_0x4c7963(0x21f,0x229,0x255,0x2b6)]),console[_0x4c7963(0x195,0x1db,0x23b,0x1b4)](_0x4c7963(0x328,0x2f9,0x2c4,0x31d)+'mptModify]'+'\x20Attached',_0x1239c1['length'],_0x313ae4[_0x1dde57(-0x1d8,-0x217,-0x258,-0x20e)],_0x19b4ad));updateCombinedPrompt(_0x43ff49,_0x29e453);const _0x41a368={};_0x41a368[_0x4c7963(0x2d8,0x2ca,0x2ce,0x289)]=0x493e0;const _0xe1a6bf=await LLM_OUTFIT_MODIFY(_0x43ff49,_0x41a368);console[_0x1dde57(-0x226,-0x239,-0x1bf,-0x2b2)](_0x313ae4['WQtiH'],_0xe1a6bf);if(!_0xe1a6bf){toastr['error'](_0x313ae4[_0x4c7963(0x215,0x271,0x2a7,0x29c)]);return;}const _0x28a9fa=extractOutfitTags(_0xe1a6bf);if(_0x313ae4[_0x1dde57(-0x198,-0x209,-0x269,-0x1f4)](_0x28a9fa[_0x4c7963(0x2c0,0x23b,0x231,0x215)][_0x1dde57(-0x18f,-0x13e,-0x1af,-0x19c)],-0x453*0x1+-0x12e5+0x1738)){toastr['warning'](_0x313ae4[_0x1dde57(-0x1e2,-0x1d8,-0x184,-0x178)]),console['log'](_0x1dde57(-0xf5,-0x11b,-0xaf,-0x19a)+'mptModify]'+_0x1dde57(-0x185,-0x219,-0x207,-0x24d)+_0x4c7963(0x1a4,0x1f7,0x1d1,0x20c)+'debugging:',_0xe1a6bf);return;}console['log'](_0x1dde57(-0x10c,-0x11b,-0x18b,-0xbd)+_0x4c7963(0x25e,0x2f1,0x383,0x31b)+_0x4c7963(0x29b,0x2ac,0x308,0x2d9)+'\x20data:',_0x28a9fa);const _0x52aaf5=_0x28a9fa[_0x4c7963(0x29e,0x23b,0x1f8,0x2a6)][-0x13d3+0x15a0+0x1cd*-0x1];await _0x313ae4['lpnlJ'](updateOutfitPresetFromLLM,_0x3d27bf['id'],_0x52aaf5),toastr['success'](_0x313ae4[_0x4c7963(0x28f,0x23a,0x230,0x1d4)]);}else _0x53cdc0=_0x4c7963(0x21a,0x26f,0x2b6,0x1d9)+_0x1dde57(-0x27a,-0x235,-0x294,-0x206)+[..._0x5abb3c]['join']('、')+'\x0a';}catch(_0x20c2ac){console[_0x4c7963(0x2b4,0x25f,0x21b,0x2d1)](_0x313ae4[_0x4c7963(0x246,0x1f5,0x202,0x1a6)],_0x20c2ac),toastr[_0x1dde57(-0x1a8,-0x1b5,-0x1eb,-0x1f2)](_0x1dde57(-0x273,-0x1dd,-0x19b,-0x1a0)+'\x20'+_0x20c2ac[_0x1dde57(-0x1b0,-0x133,-0x175,-0xa5)]);}}function _0x14e3(_0x194ef0,_0x4579b0){_0x194ef0=_0x194ef0-(-0x1*-0x4ee+-0x1c50+-0x88*-0x2e);const _0x82db9=_0x4987();let _0x2747e6=_0x82db9[_0x194ef0];if(_0x14e3['nAyuSX']===undefined){var _0x5909a4=function(_0x5c8de7){const _0x453f5a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3fcc3e='',_0x2247a8='',_0x590684=_0x3fcc3e+_0x5909a4;for(let _0x4328fd=-0x1249+0x1*-0xa47+0x1*0x1c90,_0x53a848,_0x2af08a,_0x450380=0x8b7+0x2464+-0x2d1b;_0x2af08a=_0x5c8de7['charAt'](_0x450380++);~_0x2af08a&&(_0x53a848=_0x4328fd%(-0xd1*-0x3+0x9e*-0xf+0x6d3)?_0x53a848*(-0x1ea*0x1+-0x25f0+-0x1*-0x281a)+_0x2af08a:_0x2af08a,_0x4328fd++%(0x17d*0x1+-0x2c*-0x81+-0x1*0x17a5))?_0x3fcc3e+=_0x590684['charCodeAt'](_0x450380+(-0x2223+0x1*0x1c1+0x64*0x53))-(0x4ec+-0x1*-0x5ea+-0xacc)!==-0x2ca+0x14*0x177+0x3*-0x8d6?String['fromCharCode'](0x217+0x3d4*-0x8+-0x1f8*-0xf&_0x53a848>>(-(0x190b+-0x24f9+0xbf0)*_0x4328fd&-0x2*-0x72f+-0x1*0xc95+-0x29*0xb)):_0x4328fd:-0xd55+-0x2*-0x14b+-0x1*-0xabf){_0x2af08a=_0x453f5a['indexOf'](_0x2af08a);}for(let _0x3edb1c=-0x1410+-0x6*0x5cf+0x36ea,_0x2a8965=_0x3fcc3e['length'];_0x3edb1c<_0x2a8965;_0x3edb1c++){_0x2247a8+='%'+('00'+_0x3fcc3e['charCodeAt'](_0x3edb1c)['toString'](-0x1*-0x13d+0xf79*-0x1+-0x7a*-0x1e))['slice'](-(0x22d*0x5+0x2699+0x18bc*-0x2));}return decodeURIComponent(_0x2247a8);};_0x14e3['BMPcqk']=_0x5909a4,_0x14e3['sMoJsd']={},_0x14e3['nAyuSX']=!![];}const _0x2feb0f=_0x82db9[-0x941+0x1a9e+0x27b*-0x7],_0x24e8b5=_0x194ef0+_0x2feb0f,_0x3651c4=_0x14e3['sMoJsd'][_0x24e8b5];if(!_0x3651c4){const _0x2f41c7=function(_0x1f6d6e){this['Vhkvzn']=_0x1f6d6e,this['AHbjMV']=[-0x26f+0x3d*0x59+-0x1*0x12c5,-0x14cb+-0x2081*0x1+0x354c,-0x21d5+0x1*0x184d+0x988],this['IoDSXt']=function(){return'newState';},this['rsrlCn']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['yLoFjG']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2f41c7['prototype']['AoWpVc']=function(){const _0x3ed655=new RegExp(this['rsrlCn']+this['yLoFjG']),_0x2889dd=_0x3ed655['test'](this['IoDSXt']['toString']())?--this['AHbjMV'][0x3*0xc2b+-0xb8a*-0x2+0x3b94*-0x1]:--this['AHbjMV'][-0x1f73+-0x213f+-0x4fa*-0xd];return this['Tbjlkj'](_0x2889dd);},_0x2f41c7['prototype']['Tbjlkj']=function(_0x11d3a4){if(!Boolean(~_0x11d3a4))return _0x11d3a4;return this['YPiqBm'](this['Vhkvzn']);},_0x2f41c7['prototype']['YPiqBm']=function(_0x578224){for(let _0x1b7536=-0x184d*0x1+-0x9c7*0x1+-0x5ae*-0x6,_0x203b0d=this['AHbjMV']['length'];_0x1b7536<_0x203b0d;_0x1b7536++){this['AHbjMV']['push'](Math['round'](Math['random']())),_0x203b0d=this['AHbjMV']['length'];}return _0x578224(this['AHbjMV'][-0x259+-0x4*0x97a+0x2841]);},new _0x2f41c7(_0x14e3)['AoWpVc'](),_0x2747e6=_0x14e3['BMPcqk'](_0x2747e6),_0x14e3['sMoJsd'][_0x24e8b5]=_0x2747e6;}else _0x2747e6=_0x3651c4;return _0x2747e6;}async function updateOutfitPresetFromLLM(_0x121096,_0x551fec){const _0x4eecd1={'quqVq':_0x29e8f6(0x3be,0x319,0x371,0x3fc),'oytyF':function(_0x5f530a,_0x5bed69){return _0x5f530a(_0x5bed69);},'uGzFs':_0x48a3d5(-0x2a1,-0x239,-0x2b0,-0x1d9),'ygOGx':function(_0x52d499,_0x3ef324){return _0x52d499===_0x3ef324;},'DqPcx':'ShjRQ','MJDlY':_0x48a3d5(-0x21e,-0x22e,-0x263,-0x1e9),'IFGea':_0x48a3d5(-0x10e,-0x16b,-0x1a3,-0x1e9),'dWqiz':_0x29e8f6(0x3c5,0x2b3,0x33c,0x2e3),'dNCRC':_0x48a3d5(-0x23a,-0x1b0,-0x1da,-0x1e4),'LJpum':'上半身背面','vuJfQ':'下半身','MnVvO':_0x48a3d5(-0x1e4,-0x20e,-0x244,-0x1db),'HYEIE':function(_0x87c343,_0x1c013f){return _0x87c343!==_0x1c013f;},'XmeCq':_0x29e8f6(0x2a9,0x2be,0x32a,0x35e),'dmMlW':_0x29e8f6(0x3ca,0x408,0x3ea,0x43c),'PhHkP':function(_0x5e327d,_0x4ff46f){return _0x5e327d>_0x4ff46f;},'WCaBo':_0x29e8f6(0x3f1,0x3b8,0x3b6,0x422),'ckdpB':function(_0x4ddeab,_0x16038f){return _0x4ddeab(_0x16038f);},'GiLRE':_0x29e8f6(0x3d6,0x3ed,0x3d5,0x3e9),'lPtfD':'wUVfa','QEoSm':_0x48a3d5(-0x22b,-0x1d4,-0x1ea,-0x15c),'gkdmX':function(_0x4c1f3f){return _0x4c1f3f();},'caWbD':function(_0x18bcb5,_0x1a27db){return _0x18bcb5(_0x1a27db);},'IbUli':_0x48a3d5(-0xda,-0x14e,-0xc2,-0x162)+_0x48a3d5(-0x1d5,-0x1df,-0x232,-0x1f2)+_0x29e8f6(0x31c,0x38d,0x363,0x3bc),'lxMUW':function(_0x12f68e){return _0x12f68e();}};function _0x29e8f6(_0x124d27,_0x389365,_0x253b8f,_0x2627d5){return _0x408ba4(_0x124d27-0x1a7,_0x389365-0xfa,_0x2627d5,_0x253b8f-0x310);}function _0x48a3d5(_0x40ead1,_0x526d63,_0x4a5cf2,_0x2a33dd){return _0x408ba4(_0x40ead1-0x164,_0x526d63-0xb8,_0x2a33dd,_0x526d63- -0x260);}const _0x41e952=extension_settings[extensionName],_0x5af971=_0x41e952[_0x29e8f6(0x2ed,0x32b,0x366,0x33a)+_0x29e8f6(0x44e,0x42b,0x414,0x38a)][_0x121096];if(!_0x5af971){if(_0x4eecd1[_0x29e8f6(0x454,0x436,0x432,0x40f)](_0x4eecd1[_0x29e8f6(0x3ad,0x38a,0x386,0x3ce)],_0x4eecd1[_0x29e8f6(0x387,0x3f2,0x386,0x348)])){toastr['error'](_0x4eecd1[_0x29e8f6(0x46d,0x46c,0x411,0x487)]);return;}else{_0x3cf766[_0x48a3d5(-0x1dc,-0x1a9,-0x160,-0x12f)](_0x4eecd1[_0x29e8f6(0x415,0x3f5,0x3fa,0x44a)]);return;}}let _0x2e7864='准备更新服装\x20\x22'+_0x121096+'\x22\x20的以下数据:\x0a\x0a';const _0x2d225a={};_0x2d225a[_0x48a3d5(-0x124,-0x143,-0xd6,-0x1b6)]=_0x4eecd1['IFGea'],_0x2d225a[_0x48a3d5(-0x1af,-0x1cc,-0x185,-0x246)]=_0x4eecd1[_0x48a3d5(-0x141,-0x183,-0x1c1,-0xfa)],_0x2d225a[_0x29e8f6(0x3a3,0x3a2,0x343,0x36d)]=_0x4eecd1[_0x48a3d5(-0x283,-0x213,-0x1a4,-0x209)],_0x2d225a[_0x29e8f6(0x306,0x2ee,0x383,0x3c9)+'ack']=_0x4eecd1['LJpum'],_0x2d225a[_0x29e8f6(0x43b,0x416,0x40a,0x454)]=_0x4eecd1[_0x48a3d5(-0x2a1,-0x242,-0x1e3,-0x24d)],_0x2d225a[_0x29e8f6(0x41f,0x425,0x3cc,0x37a)+'ck']=_0x4eecd1['MnVvO'];const _0x3d6795=_0x2d225a;let _0x2f3990=-0x1*-0xce8+0x1*0x26f5+0x33dd*-0x1;for(const _0x2c4d8b in _0x3d6795){if(_0x551fec[_0x2c4d8b]&&_0x4eecd1['HYEIE'](_0x551fec[_0x2c4d8b],_0x5af971[_0x2c4d8b])){if(_0x4eecd1[_0x48a3d5(-0x202,-0x247,-0x275,-0x288)](_0x4eecd1[_0x29e8f6(0x341,0x2d2,0x32b,0x37a)],_0x29e8f6(0x475,0x485,0x43e,0x462))){const _0x539a0f=_0x5af971[_0x2c4d8b]||_0x4eecd1['dmMlW'],_0x31fce9=_0x551fec[_0x2c4d8b];_0x2e7864+='•\x20'+_0x3d6795[_0x2c4d8b]+':\x0a',_0x2e7864+='\x20\x20旧:\x20'+_0x539a0f['substring'](-0x23dd+-0x23fe+0x47db,-0xd48*0x2+-0xfa6*0x1+0x2a68)+(_0x4eecd1[_0x29e8f6(0x470,0x456,0x3fd,0x3a7)](_0x539a0f[_0x48a3d5(-0x1a1,-0x157,-0x116,-0x126)],-0x145d+-0x9cd*-0x3+0x11b*-0x8)?_0x4eecd1[_0x29e8f6(0x462,0x3c8,0x425,0x45e)]:'')+'\x0a',_0x2e7864+=_0x48a3d5(-0x181,-0x179,-0x1e1,-0x11b)+_0x31fce9[_0x48a3d5(-0x1f2,-0x1e3,-0x1ec,-0x17c)](-0x1*0xf51+0x1cb6+0x1*-0xd65,-0x2*0xa2a+-0x176c*-0x1+0x35*-0xe)+(_0x4eecd1[_0x29e8f6(0x457,0x3c3,0x3fd,0x3f9)](_0x31fce9[_0x48a3d5(-0x137,-0x157,-0x135,-0x13b)],0x1c22+0x1*0x2531+0x4121*-0x1)?_0x4eecd1[_0x29e8f6(0x3f4,0x494,0x425,0x3cc)]:'')+'\x0a\x0a',_0x2f3990++;}else{const _0x384fa0={};for(const _0x224f1e in _0x472621){_0x384fa0[_0x224f1e]=_0x4c0191(_0x9ad0d8[_0x224f1e],_0x135cc6,_0x665e51,_0x4d589f);}return _0x384fa0;}}}if(_0x2f3990===-0x29*-0x2+0x3d4+-0xb1*0x6){toastr[_0x29e8f6(0x3fd,0x363,0x3c7,0x388)](_0x48a3d5(-0x224,-0x259,-0x21a,-0x213)+'内容');return;}_0x2e7864+='共\x20'+_0x2f3990+_0x29e8f6(0x3d1,0x35d,0x38c,0x413);const _0x555e12=await _0x4eecd1[_0x48a3d5(-0x297,-0x25a,-0x2c7,-0x1ce)](stylishConfirm,_0x2e7864);if(!_0x555e12){if(_0x4eecd1[_0x29e8f6(0x42b,0x4c0,0x432,0x473)](_0x4eecd1[_0x48a3d5(-0x20c,-0x1b1,-0x201,-0x13f)],_0x4eecd1['lPtfD'])){const _0x213541=_0x560368['getElement'+'ById'](_0x29e8f6(0x3cb,0x2fb,0x378,0x396)+_0x3b5b96);_0x213541&&(_0x213541[_0x48a3d5(-0x294,-0x256,-0x206,-0x1e6)]=_0x77469b[_0x560d20],_0x4eecd1['oytyF'](_0x34c0e9,_0x213541)['trigger'](_0x4eecd1[_0x29e8f6(0x30b,0x3b5,0x347,0x2e8)]));}else{toastr[_0x48a3d5(-0x1ae,-0x1a9,-0x1f9,-0x193)](_0x4eecd1[_0x48a3d5(-0xf2,-0x176,-0x194,-0x1db)]);return;}}for(const _0x2a5d88 in _0x3d6795){_0x551fec[_0x2a5d88]&&(_0x4eecd1[_0x29e8f6(0x441,0x401,0x432,0x413)](_0x4eecd1[_0x48a3d5(-0x235,-0x1dc,-0x171,-0x1e3)],_0x4eecd1[_0x29e8f6(0x3a8,0x40f,0x394,0x354)])?_0x5af971[_0x2a5d88]=_0x551fec[_0x2a5d88]:_0x119d14[_0x48a3d5(-0x18d,-0x1f2,-0x1e8,-0x165)][_0x48a3d5(-0x2ca,-0x240,-0x1b2,-0x1b9)](_0x25f4b8));}_0x4eecd1[_0x29e8f6(0x3cc,0x39a,0x34b,0x327)](saveSettingsDebounced);const _0x2cb330=_0x4eecd1[_0x29e8f6(0x43d,0x3e8,0x426,0x3dd)]($,_0x4eecd1['IbUli']);_0x2cb330['length']&&_0x4eecd1['lxMUW'](loadOutfitPreset),_0x4eecd1[_0x29e8f6(0x352,0x3a0,0x316,0x39c)](updateOutfitFormFields,_0x551fec),console[_0x48a3d5(-0x21a,-0x252,-0x202,-0x285)]('[outfitPro'+_0x29e8f6(0x42b,0x488,0x434,0x3d6)+_0x48a3d5(-0x188,-0x207,-0x20c,-0x28a)+_0x121096+'\x22');}function updateOutfitFormFields(_0x7ffb56){const _0x55bedd={'YctJH':function(_0x1233ae,_0x488861){return _0x1233ae+_0x488861;},'NAagb':function(_0x5d65b5){return _0x5d65b5();},'QeHOl':function(_0x1fb71d,_0x4c736a){return _0x1fb71d!==_0x4c736a;},'gsGYc':_0x40e1ca(-0x14,0x5a,0x2d,-0xf),'yvzcZ':function(_0x597e5b,_0x58d292){return _0x597e5b!==_0x58d292;},'WRieO':'qAvBG','apVIU':function(_0x95eb73,_0x51ef76){return _0x95eb73(_0x51ef76);},'lgqDc':_0x113942(0x140,0x119,0x1aa,0x11d),'pcfjN':_0x40e1ca(0x65,-0x30,-0x6b,-0x16),'hrxqp':_0x40e1ca(-0xb8,-0x91,-0x42,-0xc2),'yNdCw':_0x113942(0x18c,0x1c1,0x14a,0x1bb)+_0x40e1ca(-0x56,-0x90,-0x8a,-0x48),'JFhvo':'fullBody','BbBMV':_0x40e1ca(-0x1f,-0x8,-0x29,-0x13)+'ck'},_0x46caba=[_0x113942(0x236,0x29c,0x1f5,0x200),_0x55bedd[_0x40e1ca(-0x7,0x13,0x41,-0x4b)],_0x55bedd['hrxqp'],_0x55bedd['yNdCw'],_0x55bedd[_0x113942(0x1d3,0x180,0x184,0x232)],_0x55bedd['BbBMV']];function _0x113942(_0x1870e0,_0x4ddfdd,_0x22e62a,_0x55ce4b){return _0x408ba4(_0x1870e0-0x177,_0x4ddfdd-0x1ef,_0x4ddfdd,_0x1870e0-0x119);}function _0x40e1ca(_0x427943,_0x418571,_0xb0b7f2,_0x51bbd9){return _0x408ba4(_0x427943-0x100,_0x418571-0x1ab,_0x51bbd9,_0x418571- -0xc4);}_0x46caba[_0x40e1ca(-0xbe,-0x66,-0xfa,0x19)](_0xbcb160=>{function _0xf11a61(_0x541740,_0x50aeb2,_0x177517,_0x320995){return _0x40e1ca(_0x541740-0x91,_0x320995-0x264,_0x177517-0x15b,_0x50aeb2);}function _0x3a9ec1(_0x5e01e5,_0x4e4348,_0x57bd77,_0x14d5d3){return _0x40e1ca(_0x5e01e5-0x101,_0x57bd77-0x512,_0x57bd77-0x1e3,_0x5e01e5);}if(_0x7ffb56[_0xbcb160]){if(_0x55bedd[_0x3a9ec1(0x4f0,0x4ed,0x4d9,0x4d5)](_0x55bedd[_0x3a9ec1(0x582,0x4f1,0x501,0x508)],_0x3a9ec1(0x4eb,0x5ab,0x56c,0x547))){if(_0x1de034&&_0x82a497[_0x3a9ec1(0x3e8,0x3f4,0x47b,0x47e)])return _0x2a2839[_0xf11a61(0x1a9,0x1ef,0x1c7,0x1cd)]();return _0x55bedd['YctJH'](_0x4578e7[_0x3a9ec1(0x552,0x471,0x4c9,0x4ee)]()[_0x3a9ec1(0x54c,0x54b,0x534,0x4e6)](-0x18bf+0xcba+-0x11b*-0xb),_0x35a9fd[_0x3a9ec1(0x4ba,0x598,0x520,0x4c5)]()[_0xf11a61(0x264,0x24e,0x226,0x286)](-0x918+-0x3*0x296+0x10fe)['substring'](-0x2548+-0x1b2+0x26fc));}else{const _0x2fb0b8=document[_0x3a9ec1(0x4ee,0x48f,0x503,0x4ea)+_0x3a9ec1(0x57d,0x4f1,0x575,0x597)](_0x3a9ec1(0x469,0x51a,0x4b6,0x52a)+_0xbcb160);_0x2fb0b8&&(_0x55bedd[_0x3a9ec1(0x458,0x513,0x48b,0x4c2)](_0x55bedd['WRieO'],_0x55bedd['WRieO'])?_0x55bedd['NAagb'](_0x45b2df):(_0x2fb0b8[_0xf11a61(0x133,0x23e,0x13c,0x1aa)]=_0x7ffb56[_0xbcb160],_0x55bedd[_0xf11a61(0x282,0x1d3,0x289,0x1fd)]($,_0x2fb0b8)[_0x3a9ec1(0x509,0x52a,0x512,0x4bd)](_0x55bedd[_0x3a9ec1(0x4a5,0x535,0x522,0x58e)])));}}});}
//# sourceMappingURL=http://localhost:8000/outfitPromptModify.js.map