(function(_0x458445,_0x491bf1){function _0x537da0(_0x1f8178,_0x3a2cda,_0x4a7ae6,_0x633ad5){return _0x4ee0(_0x3a2cda- -0x141,_0x4a7ae6);}function _0x4bfd28(_0x55b538,_0x5a9d83,_0x1d7570,_0x2d5d88){return _0x4ee0(_0x1d7570- -0x1ca,_0x55b538);}const _0x56c109=_0x458445();while(!![]){try{const _0x1fbc2e=-parseInt(_0x537da0(-0x93,-0x56,-0xcb,-0x43))/(0xbfe+0xa14+-0x15*0x10d)+parseInt(_0x4bfd28(0x54,-0x63,0x2,0x33))/(0x10c4+0x261d*-0x1+0x7*0x30d)+parseInt(_0x4bfd28(-0x60,-0x3b,-0x84,-0xd6))/(0x6c5*0x2+-0x4*0x2ff+0x18b*-0x1)+parseInt(_0x537da0(0x2f,-0x2e,-0x20,-0x5f))/(0x1*0x1cfa+0x41f+0x9*-0x3ad)+-parseInt(_0x537da0(0x24,0x91,0x62,0x10c))/(-0x648+0x11*0x59+0x64)+-parseInt(_0x537da0(-0x35,0x3d,0x42,-0x55))/(0x2ba*0xc+-0x16a7+-0xa0b)+parseInt(_0x537da0(0x49,0xaf,0x88,0x6a))/(0x14c9*0x1+0x18e*0x17+0x3884*-0x1)*(parseInt(_0x537da0(0xa5,0x6b,-0x14,0x47))/(0x709*-0x5+0x4e*-0x4c+0x3a5d));if(_0x1fbc2e===_0x491bf1)break;else _0x56c109['push'](_0x56c109['shift']());}catch(_0x377099){_0x56c109['push'](_0x56c109['shift']());}}}(_0x59d4,0x1*0x145293+-0x829d6+-0x4a*-0x4e2));const _0x5329e6=(function(){let _0x2d0383=!![];return function(_0x16205b,_0x3990f7){const _0x500532=_0x2d0383?function(){if(_0x3990f7){const _0x473f72=_0x3990f7['apply'](_0x16205b,arguments);return _0x3990f7=null,_0x473f72;}}:function(){};return _0x2d0383=![],_0x500532;};}()),_0x2c292e=_0x5329e6(this,function(){function _0x4b7960(_0x51ce2b,_0x5bacd2,_0x38a3cf,_0xb8f7f2){return _0x4ee0(_0x5bacd2- -0xd9,_0x51ce2b);}const _0x9db9b5={};_0x9db9b5['bsOQn']=_0x4b7960(0x7c,0xda,0x7b,0x10f)+'+$';function _0x4bbdfc(_0x14e6c4,_0x5b6a5a,_0x20b264,_0x190e85){return _0x4ee0(_0x5b6a5a-0x10a,_0x190e85);}const _0x476e6e=_0x9db9b5;return _0x2c292e[_0x4bbdfc(0x22d,0x234,0x262,0x1a2)]()[_0x4bbdfc(0x194,0x218,0x205,0x1b6)](_0x4bbdfc(0x228,0x2bd,0x2dd,0x30b)+'+$')['toString']()[_0x4bbdfc(0x18b,0x1e2,0x19d,0x213)+'r'](_0x2c292e)[_0x4b7960(0x86,0x35,0xe,0x58)](_0x476e6e[_0x4b7960(0x105,0xac,0xdc,0x60)]);});_0x2c292e();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../script.js';function _0x59d4(){const _0x4ff4f3=['igrHDge6','rxj5ELq','5BEY5y+w5RAi5PU05PAW','yuftwwm','ywHotgC','DfLdC1K','C2vHCMnO','zeHJzMC','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','Bxb0tw9KAwz5xq','v1jpzKu','mJqYmtaWz2jZqMTM','lxrHyI1JAgfYyq','iIdNMOtKU6xKUiVMLBdMJA46cGO','ioACQUIVHUwiQ+EAHoACJEIJHEwTL+AUTsa','BgvUz3rO','BwPOqKW','DhLWzq','r1HkC0G','vMzuALe','DfPYzwi','w291DgzPDfbYBW','BhDnAM8','AxnbCNjHEq','z09wreC','DxLxuLq','vujsu0K','iev4zwn1DgLUzW','zxf1zxn0icHjra','AKPIzfq','CMfUzg9Tvvvjra','ief0DgfJAgvK','BvDxwu8','rNbtwNi','Dg9tDhjPBMC','ELvjywi','uNfpAg4','su9vshi','pc/MNi3OO4u+','zgv0ywLS','icdML6C6ia','D1fkCgy','zgf0ytO','zxrZ','u0PLshu','y3rLCG','BefPz0W','r2fhAwq','yM5hzxq','A2vNDLu','zw1PDa','zw5LCG','Exzqy2m','ugfkrgK','DxbWzxjcB2r5','poACJEIJHt4k','yxv0BW','ihjLCxvLC3qUlG','E3VKUjBNLyZKUABOP6BLJ5f9Fq','q3bYquG','Cvrvufu','BKziz1O','mZC5mtGYm3PsD09SAG','EgDKs2y','ufjptvbux1jfuq','6iUX5PAh5zcn56EW','vKT4vvy','tujKvw4','wLDJuMK','tg5RB2u','rwrzC28','ELLWEwK','ien1CNjLBNqGCa','sNjhvMO','Dgv4Da','uuPzC0C','5lIl5y2k6lQR6iom6z2IoIa','vw9orMe','Aw5JBhvKzxm','qvzMy3i','ifn0yxj0Aw5Nia','i3n0lwnOyxr1oa','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','qNfptKO','Eu1wwei','yvn3vuq','5lIl5y2k6lQR','swrxrMq','5lIT5PAh5zcn56EWoIa','B3v0zML0ihbYBW','C0zVBNO','DgLTzw91De1Z','DMfSDwu','CMvZDwX0','B3vizNG','ywfgzxK','DhjPz2DLCG','D1n2wLa','qxnnD0G','t0rjrLLFuKvrvq','CMvZzxq6','tLfQuhm','t2fQDuW','C2fjt1G','ywnR','tgHhB3K','BwvZC2fNzq','ue9ou0u','C2fuy0O','5lIl5y2k6lQR6iom6z2I','Eer1v2S','r2PhAuW','6k+35ywi6ycj5OUP5lIa5lIQ5PYn6kof6Ake6k6+','z29uyLC','uLL4Cfe','CwvWy28','DwfTELu','t0rjrLLFuKvtua','mZq1mJK3mgTRr0f2Eq','z2v0rwXLBwvUDa','se5Jzg0','E3VNLkJMIlFPNidMSyj9Fq','y29UDgvUDa','6kkR5l2/55sO77YA','DKjKu1m','yNnpuw4','B1H3wNO','uvPjA3i','qKLSse0','z0vyDuy','BwvZC2fNzsbHDa','C3nHz2uGAw5Kzq','qKX0ugC','5PYn6kof5l+U5Ps5ieXmtsdOR7C','Aw5MBW','BuvVz2i','q0zgrhe','ioINO+AEKowiSoEAHoACJEIJHEAvSoAnRJO','CMvTB3zLtgLZDa','t0Tnthy','vvL2r0u','zxjYB3i','v1jTzuy','qLHHq1y','5PYn6kof5O+q56s66k+n5l+U5Ps55AsX6lsLoG','tuPct1e','q0LMy0e','zNvSBejVzhK','DujVDvK','B2frBMq','CxbKEu8','Aw5WDxq','uhzgzgy','BNr3D3e','CvzACuK','ueTgtxi','iev4DhjHy3rLza','AxL2AKq','BMfTzq','BwfW','yxfJA2W','AM9PBG','u3LWsKK','qunywNm','ndu2tNPpBKjW','E3VMNi3OO4xLIjFOOAH9Fq','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','B3v0zML0xW','DhjPBq','whrstMq','E3VKUiRKUiVMLOD9Fq','kcGOlISPkYKRkq','tNfZvNu','E3VLVzpLIy3OP5lOIBj9Fq','wKXltNe','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','DxbWzxjcB2r5qG','zNvSBejVzhLcyq','CMfUzg9T','sfntDuW','5Qoa5Rwl5yIW5PYn6kof5Qch562+','Bxb0ig1VzgLMEq','Au9jCwW','ifjLCxvLC3rPBG','Ae5TtKe','5lIk5y2k6lQR6iom6z2IoIa','ueXluKC','Axv3uKm','z1PMwgO','uefor0K','rNfNzLq','qKzHqMW','yxbWBhK','5lIl5y2k6lQR5PYn6kof','txLxrvu','C2L6zq','mJu5mZC4nKX4C0ryBq','ChvZAa','EuXHwKu','5Q2J5zYO5Ase55cg5PYn6kof5O+q56s66k+n5l+U','5lIT5PAh5zcn56EW','BMfTzuno','ntm1nJq0nvvXvwLdsG','r2ntzhC','Bg9N','teXnx0niqvjFtq','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','vKnKsLG','C3vIC3rYAw5N','zM9YrwfJAa','rwHpEhG','5lIk5y2k6lQR','5y+c6icd5zU+54Mh','zxH3AgK','D3H0zLG','zfz6D3q','CeHls3u','D1j1vwC','zgXuyvO','qNLSEu4','t05trq','teXnioI/LowBNUE7K+AENos4UUEPUG','tK9qq1u','rvnu','uu9PwfK','wgXkuhm','zgvIDwDNAw5NoG','s2DeD20','B2jQzwn0','BMfTzuvo','koEPUIK','zgLMEsbmte0GCG','mta3ntLMvxjND24','lI4U','r2LqCuu','C3rYAw5N','Bfvzzxe','tKjQCg0','ufjptvbux1jfuW','ig91DgzPDcbTBW','EhDtsfa','B2rPBeC','vuvtva','C05cELa','ifjHDYbmte0GBW','CMvWBgfJzq','iezPBMfSihbYBW','6iUX5PAh5zcn56EWoIa','5Ps56k+35RgclI4U','su1hA3m','5lIk5y2k6lQR6iom6z2I','y29UC3rYDwn0BW','vg5WqMu','ievYCM9YoG','icdMLRa6ia','zK5vCKy','zwPIv0S','DLj0u00','yw5orfe','B3v0zML0CW','ChjVBxb0','thP4t2C','terqwuW','wwzpALy','C2vqtgK','t3vUBuy','sNvsuLC','AuT6Cem','zePste0','Bxb0oG','mtCYodiZvKLLAwvO','C3r4Aw0','uLHOque','ChqGkeLeoIa','A0DQzuy','DuvTDxm','v3vjv3q','t0rjrLLFr0vuxW','z0vwwNm','l3bUzZTIyxnLnG','AhHotKe','ywrK','5Rgc6lAf5PE2','AgD2tMS','wM5ZBfe','DxjS','B3v0zML0uhjLCW','ifvZzxiGCMvXDq','C3vJy2vZCW','zgf0yq','AKjWrLC','5PYn6kof5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','Aw1Hz2vFDxjS','veTbzfO','C3bSAxq','zYbVDxrMAxqGBq','CLLIwfK','uNnYD0S','qNLjza'];_0x59d4=function(){return _0x4ff4f3;};return _0x59d4();}import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{loadOutfitPreset}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0x390aee,_0x255f17,_0x5418c7,_0x23809e){const _0x45bc9a={'saIOX':function(_0x31b493,_0xe882cb){return _0x31b493(_0xe882cb);},'OajuL':_0x42a296(-0x8d,-0xca,-0x106,-0x120),'OKMLv':_0x42a296(-0x168,-0x154,-0x1a4,-0x159),'XlJPs':_0x545a59(0x493,0x42c,0x4c0,0x49b),'IdWFd':function(_0x1cbe66,_0x4b6a05){return _0x1cbe66!==_0x4b6a05;},'qVZqI':_0x42a296(-0xf8,-0xab,-0x12d,-0x102),'lAigL':function(_0x5a9168,_0x37dcfa){return _0x5a9168===_0x37dcfa;},'UBRSI':_0x42a296(-0xb2,-0x30,-0x9c,-0x7),'TnpBe':_0x42a296(-0x1aa,-0x137,-0xf8,-0x171)};function _0x545a59(_0xadafbd,_0x5e1d1d,_0x5d9461,_0x15674a){return _0x4ee0(_0x15674a-0x2ea,_0x5d9461);}if(typeof _0x390aee===_0x45bc9a[_0x545a59(0x46c,0x433,0x41e,0x47d)]){if(_0x42a296(-0x12d,-0xe5,-0x16b,-0xb0)===_0x45bc9a[_0x42a296(-0x6a,-0x33,0x27,-0x2c)])_0x203355[_0x42a296(-0x4a,-0xb8,-0xc3,-0x93)]=_0x390b15[_0x29f46a],_0x45bc9a[_0x545a59(0x3f7,0x491,0x47a,0x459)](_0x563566,_0x1f4674)[_0x545a59(0x485,0x414,0x4c3,0x452)]('input');else{if(_0x5418c7&&_0x390aee[_0x42a296(-0x101,-0xc6,-0x143,-0x7d)](_0x255f17)){if(_0x45bc9a[_0x545a59(0x401,0x3f3,0x4b6,0x449)](_0x45bc9a[_0x42a296(-0x102,-0x7a,-0xb2,0x6)],_0x42a296(-0x118,-0xa3,-0x24,-0x5b)))_0x23809e&&_0x23809e[_0x42a296(-0x160,-0x126,-0x13b,-0x117)](_0x255f17);else for(const _0x2dceb2 of _0x355f7a[_0x42a296(-0xc2,-0x9a,-0x36,-0xe4)]){if(_0x2dceb2[_0x545a59(0x3a6,0x3b1,0x372,0x403)]===_0x45bc9a[_0x545a59(0x4cc,0x421,0x4c8,0x458)]&&_0x2dceb2[_0x545a59(0x433,0x3e9,0x42e,0x43c)]['includes'](_0x1241c0))return _0x42f614;}}return _0x390aee['replaceAll'](_0x255f17,_0x5418c7);}}function _0x42a296(_0x5e595c,_0x7500ad,_0x5bcbb1,_0x2c19fb){return _0x4ee0(_0x7500ad- -0x21c,_0x5bcbb1);}if(Array[_0x42a296(-0x17f,-0xfd,-0x17d,-0xb3)](_0x390aee))return _0x390aee['map'](_0x2d6d2d=>replacePlaceholder(_0x2d6d2d,_0x255f17,_0x5418c7,_0x23809e));if(_0x390aee&&_0x45bc9a['lAigL'](typeof _0x390aee,_0x45bc9a[_0x42a296(-0x14f,-0xfa,-0x125,-0x12c)])){const _0x2227ca={};for(const _0x3d16cd in _0x390aee){_0x45bc9a[_0x42a296(-0x82,-0xe6,-0x15e,-0x161)]('sePLi',_0x45bc9a[_0x42a296(-0x15b,-0x143,-0xf0,-0xf7)])?_0x2227ca[_0x3d16cd]=replacePlaceholder(_0x390aee[_0x3d16cd],_0x255f17,_0x5418c7,_0x23809e):_0x4584b5=_0x42a296(-0x148,-0xc2,-0x136,-0x6a)+_0x545a59(0x4b9,0x4dc,0x4f5,0x46d)+[..._0x1ef7d5][_0x545a59(0x4fc,0x4ba,0x44a,0x493)]('、')+'\x0a';}return _0x2227ca;}return _0x390aee;}function attachImagesToMessage(_0x342b7b,_0x2cf10b,_0x4086ac,_0x147210='参考图片'){const _0x343839={};_0x343839['VCdJX']='text',_0x343839['rYbXY']=function(_0x3565cb,_0x4327a6){return _0x3565cb===_0x4327a6;};function _0x12d00d(_0x812f1c,_0x51fbaa,_0x5ddb01,_0x412692){return _0x4ee0(_0x51fbaa-0x359,_0x812f1c);}_0x343839[_0x4cfa57(0x8b,0x4e,0x11f,0x13)]='object',_0x343839['KHzzd']=_0x4cfa57(0x3d,0x2e,0x95,0xa4),_0x343839['GcSdw']=_0x4cfa57(0x4b,0x2e,0xaf,-0x19),_0x343839[_0x4cfa57(0x27,0x1d,0x99,0x8a)]=function(_0x267068,_0x4d9173){return _0x267068===_0x4d9173;},_0x343839[_0x12d00d(0x531,0x4a4,0x4a4,0x4de)]=function(_0x39e57a,_0x33f4fc){return _0x39e57a<_0x33f4fc;},_0x343839['bqchg']=function(_0x4a3baf,_0x2b251d){return _0x4a3baf>=_0x2b251d;},_0x343839[_0x4cfa57(0x4f,-0x31,0x72,0x7a)]=_0x4cfa57(0x33,0x37,0xb5,0x4c),_0x343839['ryPAL']=function(_0x277e42,_0x204b18){return _0x277e42===_0x204b18;},_0x343839[_0x12d00d(0x522,0x501,0x4a2,0x540)]=function(_0x434238,_0x2a3b2a){return _0x434238!==_0x2a3b2a;},_0x343839[_0x4cfa57(-0x6,0x55,-0x43,0x32)]=_0x4cfa57(0x72,0x5,0x5d,0xae),_0x343839[_0x4cfa57(0xed,0xb8,0xe1,0x179)]=_0x4cfa57(-0x17,-0x54,-0x3f,0x10),_0x343839[_0x12d00d(0x487,0x44a,0x480,0x3dd)]='XqcFG';function _0x4cfa57(_0x423988,_0x258bb3,_0x378e5a,_0x5dae2d){return _0x4ee0(_0x423988- -0xf5,_0x5dae2d);}_0x343839[_0x12d00d(0x4d6,0x536,0x5a8,0x4e1)]=function(_0x3d89fc,_0x4b2548){return _0x3d89fc>_0x4b2548;};const _0x44e857=_0x343839;if(!_0x4086ac||_0x44e857['tZreb'](_0x4086ac['length'],0x9fd*-0x1+0x24a6+-0x1*0x1aa9)||_0x44e857['MBdUn'](_0x2cf10b,-0xd2d+-0x7e3*-0x4+-0x125f)||_0x44e857['bqchg'](_0x2cf10b,_0x342b7b[_0x4cfa57(0x22,0x8a,-0x54,0x62)])){if(_0x44e857[_0x4cfa57(0x27,-0x12,0x4,0xaa)]('SsiFI',_0x44e857['qTUPU']))_0x1ed3c3='data:image'+_0x12d00d(0x3f7,0x44d,0x467,0x45a)+'4,'+_0x59c7ea;else return _0x342b7b;}const _0x59c25a=[..._0x342b7b],_0x1530a3=_0x59c25a[_0x2cf10b],_0x550e7d=[];if(_0x44e857['ryPAL'](typeof _0x1530a3[_0x12d00d(0x48f,0x4db,0x4ad,0x509)],_0x12d00d(0x43d,0x421,0x46f,0x448))){if(_0x44e857[_0x12d00d(0x50c,0x501,0x53b,0x535)](_0x44e857[_0x4cfa57(-0x6,-0x69,0x8d,-0x89)],_0x44e857[_0x4cfa57(-0x6,-0x4c,0x3e,0x5b)]))_0x463ed1&&_0x42b248[_0x4cfa57(0x1,-0x69,-0x7e,0x42)](_0xb430ef);else{const _0x1320c9={};_0x1320c9[_0x12d00d(0x49f,0x472,0x4e1,0x406)]=_0x44e857[_0x12d00d(0x57e,0x530,0x524,0x4e7)],_0x1320c9[_0x4cfa57(0x5d,0xaf,0x6d,0xa1)]=_0x1530a3['content'],_0x550e7d[_0x12d00d(0x565,0x526,0x551,0x58d)](_0x1320c9);}}else{if(Array[_0x12d00d(0x4ac,0x478,0x42b,0x502)](_0x1530a3[_0x4cfa57(0x8d,0x43,0xb6,0xcf)])){if(_0x44e857[_0x4cfa57(0xed,0x100,0x62,0x67)]===_0x44e857[_0x4cfa57(-0x4,-0x70,-0x1,-0x38)]){const _0x5bcfb1={};_0x5bcfb1[_0x12d00d(0x4a0,0x472,0x3fa,0x465)]=_0x44e857[_0x12d00d(0x535,0x530,0x4d6,0x574)],_0x5bcfb1['text']='\x0a[以下是用户上传的'+_0x1f709b[_0x4cfa57(0x22,0x39,-0x34,-0x6b)]+'张'+_0x53e6dc+']',_0x1ea83a['push'](_0x5bcfb1);}else _0x550e7d[_0x4cfa57(0xd8,0x158,0x8b,0x122)](..._0x1530a3[_0x4cfa57(0x8d,0x8e,0xc3,0xee)]);}}if(_0x44e857['exwhi'](_0x4086ac[_0x4cfa57(0x22,-0x2,-0x56,-0x1d)],0x14f0+-0x1afb*0x1+0x77*0xd)){const _0x2b68d4={};_0x2b68d4[_0x12d00d(0x41b,0x472,0x4c5,0x49c)]=_0x44e857[_0x4cfa57(0xe2,0x95,0x90,0x5b)],_0x2b68d4['text']=_0x12d00d(0x42b,0x469,0x440,0x3f9)+_0x4086ac['length']+'张'+_0x147210+']',_0x550e7d['push'](_0x2b68d4);}_0x4086ac[_0x12d00d(0x4ee,0x532,0x5b7,0x4c4)]((_0x3b0512,_0x471b89)=>{function _0x5e94ca(_0x3e9ab2,_0x3bfa46,_0x1768ad,_0x37bbdd){return _0x12d00d(_0x3bfa46,_0x37bbdd-0xe,_0x1768ad-0x10d,_0x37bbdd-0x1e2);}const _0x2cd759=typeof _0x3b0512===_0x59651b(0x281,0x226,0x2f4,0x23a)?_0x3b0512:_0x3b0512['base64'],_0x3909c2=_0x44e857[_0x59651b(0x2be,0x270,0x317,0x321)](typeof _0x3b0512,_0x44e857[_0x5e94ca(0x543,0x572,0x4bb,0x4e7)])&&_0x3b0512[_0x5e94ca(0x515,0x50c,0x52b,0x50d)]?_0x3b0512[_0x5e94ca(0x483,0x58d,0x578,0x50d)]:''+_0x147210+(_0x471b89+(-0x1b*0x90+-0x1*0xd0e+0x1c3f));function _0x59651b(_0x35b8eb,_0x4a5bda,_0x33ba45,_0x587efd){return _0x12d00d(_0x587efd,_0x35b8eb- -0x1a0,_0x33ba45-0x2a,_0x587efd-0x13);}const _0x262e8e={};_0x262e8e['type']='text',_0x262e8e['text']='['+_0x3909c2+']',_0x550e7d['push'](_0x262e8e);let _0x460ace=_0x2cd759;!_0x2cd759['startsWith'](_0x44e857['KHzzd'])&&(_0x460ace='data:image'+_0x59651b(0x2ad,0x299,0x336,0x26a)+'4,'+_0x2cd759);const _0xcc842b={};_0xcc842b[_0x59651b(0x2b3,0x29f,0x2f7,0x296)]=_0x460ace,_0xcc842b[_0x59651b(0x2e8,0x274,0x30a,0x353)]=_0x44e857[_0x59651b(0x38c,0x3b2,0x415,0x3c2)];const _0x4e8871={};_0x4e8871[_0x59651b(0x2d2,0x2ad,0x30d,0x2b3)]=_0x5e94ca(0x42d,0x491,0x4c7,0x468),_0x4e8871['image_url']=_0xcc842b,_0x550e7d[_0x59651b(0x386,0x367,0x409,0x3df)](_0x4e8871);});const _0x5970ee={..._0x1530a3};return _0x5970ee[_0x4cfa57(0x8d,0x7b,0xa9,0x10e)]=_0x550e7d,_0x59c25a[_0x2cf10b]=_0x5970ee,_0x59c25a;}function findMessageIndexWithPlaceholder(_0x1292ae,_0xb657ed){const _0x5ef259={'wQJpf':function(_0x369eae,_0x4ed7a4){return _0x369eae(_0x4ed7a4);},'anNDQ':function(_0xcb9918,_0x9ff086){return _0xcb9918(_0x9ff086);},'rNaCb':_0x267861(0x41f,0x442,0x46f,0x469),'dJRLM':'nameCN','vBdSS':_0xdb4d6e(0x142,0x180,0x143,0x108),'IMGks':_0xdb4d6e(0x165,0xd1,0x107,0x71),'gEVZs':'upperBodyB'+_0xdb4d6e(0xc0,0x103,0xac,0x82),'iKzpC':_0x267861(0x4d9,0x45c,0x445,0x448)+'ck','BqONJ':function(_0x49cf22,_0x5c47c8){return _0x49cf22<_0x5c47c8;},'iHaFf':_0x267861(0x372,0x36b,0x3ae,0x2f9),'oXwZz':function(_0x220cf7,_0x4519b0){return _0x220cf7===_0x4519b0;},'wRuUg':_0xdb4d6e(0xaa,0x10e,0x1a1,0x17a),'NqsVu':_0xdb4d6e(0xc6,0xcc,0x48,0x87),'wxtfX':function(_0x8ecb82,_0x408479){return _0x8ecb82===_0x408479;},'SJeHu':'text'};function _0x267861(_0x54189e,_0x2ffeba,_0x577eb0,_0x227d94){return _0x4ee0(_0x2ffeba-0x2a3,_0x577eb0);}for(let _0x4003a3=-0x4*-0x3a0+0x25ed+0x1*-0x346d;_0x5ef259[_0xdb4d6e(0x5e,0xee,0x164,0x70)](_0x4003a3,_0x1292ae[_0x267861(0x3a7,0x3ba,0x3d4,0x446)]);_0x4003a3++){const _0xaeb040=_0x1292ae[_0x4003a3];if(typeof _0xaeb040['content']===_0x5ef259['iHaFf']&&_0xaeb040[_0x267861(0x39a,0x425,0x45f,0x3fe)][_0x267861(0x3e7,0x3f9,0x3aa,0x364)](_0xb657ed)){if(_0x5ef259[_0x267861(0x423,0x429,0x47b,0x487)](_0x5ef259[_0xdb4d6e(0x103,0x174,0x19f,0x13b)],_0x5ef259[_0xdb4d6e(0x173,0x147,0x107,0x17d)])){const _0x5affc6=_0x5ef259[_0x267861(0x3da,0x3d4,0x365,0x394)](_0x46a716,_0x439b8a[0x3*0xb19+0x7a4+-0x326*0xd]),_0x5cd5c3=_0x5ef259[_0x267861(0x3d1,0x382,0x35b,0x2f6)](_0x5314c0,_0x5affc6);_0x5cd5c3&&_0x4064a9[_0xdb4d6e(0x87,0x73,0xf0,0x87)][_0x267861(0x4f3,0x470,0x482,0x4a4)](_0x5cd5c3);}else return _0x4003a3;}else{if(Array[_0xdb4d6e(0xe7,0xb2,0x11d,0xd8)](_0xaeb040[_0xdb4d6e(0x134,0x115,0xab,0x105)]))for(const _0x50be0f of _0xaeb040[_0xdb4d6e(0xf0,0x115,0x194,0x115)]){if(_0x5ef259[_0xdb4d6e(0xa9,0x119,0x130,0xe6)](_0x267861(0x412,0x39c,0x426,0x3b2),_0xdb4d6e(0x6e,0x8c,0x3c,0x23))){if(_0x5ef259[_0x267861(0x4d6,0x481,0x41e,0x4c2)](_0x50be0f[_0xdb4d6e(0x1f,0xac,0x109,0x7b)],_0x5ef259[_0x267861(0x430,0x3d7,0x3b0,0x398)])&&_0x50be0f[_0x267861(0x403,0x3f5,0x479,0x415)]['includes'](_0xb657ed))return _0x4003a3;}else{const _0x4f6ec5=[_0x5ef259[_0xdb4d6e(-0xb,0x7c,-0x12,0x7d)],_0x5ef259[_0x267861(0x475,0x427,0x411,0x3c7)],_0x5ef259[_0xdb4d6e(-0x13,0x69,0x67,0x6f)],_0x5ef259[_0xdb4d6e(-0x8,0x86,0x30,0x5e)],_0xdb4d6e(0x121,0x12e,0x11c,0xbd),_0x5ef259[_0x267861(0x381,0x38b,0x323,0x368)]];_0x4f6ec5[_0xdb4d6e(0x1fc,0x16c,0x114,0x1f4)](_0x414532=>{function _0xca0769(_0x20fa59,_0x3788ad,_0x34708c,_0xb74282){return _0xdb4d6e(_0x20fa59-0x92,_0x3788ad- -0x149,_0x34708c-0x6,_0x34708c);}function _0x1b0b95(_0x3895d6,_0x21bd14,_0x299814,_0xef4c7c){return _0xdb4d6e(_0x3895d6-0x9b,_0x21bd14-0x3b5,_0x299814-0x1d9,_0xef4c7c);}if(_0x273664[_0x414532]){const _0x914958=_0x16f1bf['getElement'+_0xca0769(-0xab,-0xaf,-0x83,-0x120)](_0xca0769(0x36,-0x7,0x47,0x57)+_0x414532);_0x914958&&(_0x914958[_0x1b0b95(0x4a6,0x4ac,0x482,0x4b2)]=_0xd15bc6[_0x414532],_0x5ef259[_0x1b0b95(0x4c5,0x479,0x48e,0x502)](_0x4e462b,_0x914958)[_0x1b0b95(0x44a,0x4b0,0x4af,0x500)](_0x5ef259['rNaCb']));}});}}}}function _0xdb4d6e(_0x379a12,_0x1046bf,_0x3e75f3,_0x5142d9){return _0x4ee0(_0x1046bf- -0x6d,_0x5142d9);}return-(0x44f+0x4ab+-0x1*0x8f9);}function _0x4ee0(_0x1f709b,_0x53e6dc){_0x1f709b=_0x1f709b-(-0x1ba9*-0x1+0x23c*0x2+0x2*-0xfad);const _0x411ecb=_0x59d4();let _0x381f55=_0x411ecb[_0x1f709b];if(_0x4ee0['ekedLR']===undefined){var _0x1abdc7=function(_0x51e824){const _0x35a0ff='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x14d054='',_0x4fec9f='',_0x507d53=_0x14d054+_0x1abdc7;for(let _0x42b466=-0x1764+-0x803+0x1f67,_0x33f025,_0x136410,_0x36173c=0x20c5+0x4*-0x99d+0x1*0x5af;_0x136410=_0x51e824['charAt'](_0x36173c++);~_0x136410&&(_0x33f025=_0x42b466%(0x17*0x19d+0x18*0xa4+-0x3477)?_0x33f025*(-0x8b*0x28+-0x582*-0x5+-0x2*0x2c9)+_0x136410:_0x136410,_0x42b466++%(0x15*0x1ab+-0x19df+0x5a*-0x1a))?_0x14d054+=_0x507d53['charCodeAt'](_0x36173c+(-0x25c6+-0x593*0x7+0x4cd5))-(0x256a+0xa6d*-0x2+0xa*-0x1a7)!==0x2*-0xbcf+-0xd3*-0x2b+0x3*-0x3f1?String['fromCharCode'](0x224+-0x1*-0xd5b+-0x10*0xe8&_0x33f025>>(-(-0x13b5*-0x1+0x1c43+-0x2ff6)*_0x42b466&0x2490+-0x267c+0x1f2)):_0x42b466:-0x1eb3*0x1+0x1c55+-0x12f*-0x2){_0x136410=_0x35a0ff['indexOf'](_0x136410);}for(let _0x1aa7f3=-0xa*0xe8+-0x1b63+-0x7*-0x535,_0x210a80=_0x14d054['length'];_0x1aa7f3<_0x210a80;_0x1aa7f3++){_0x4fec9f+='%'+('00'+_0x14d054['charCodeAt'](_0x1aa7f3)['toString'](0x2691*-0x1+0x2*0x12b3+0x3f*0x5))['slice'](-(0x152d+0x19c0+-0x1*0x2eeb));}return decodeURIComponent(_0x4fec9f);};_0x4ee0['niowjH']=_0x1abdc7,_0x4ee0['KCcwhx']={},_0x4ee0['ekedLR']=!![];}const _0x39b2b8=_0x411ecb[0x2*-0x1198+-0x1*-0xeb+0x11b*0x1f],_0x27e185=_0x1f709b+_0x39b2b8,_0x39e004=_0x4ee0['KCcwhx'][_0x27e185];if(!_0x39e004){const _0x58d48d=function(_0x4239f8){this['UqMukt']=_0x4239f8,this['EXhAOo']=[0x1e10+-0x140+-0x1ccf,0x22*-0x5+0xc*0xd4+-0x946,-0x2*0x135b+0x1*-0x9f3+0x30a9],this['KhJkvz']=function(){return'newState';},this['pRsjHS']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['yHXLOg']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x58d48d['prototype']['ipFEkP']=function(){const _0x40b7f0=new RegExp(this['pRsjHS']+this['yHXLOg']),_0x1e72f3=_0x40b7f0['test'](this['KhJkvz']['toString']())?--this['EXhAOo'][0x140*-0x10+0x3*-0x556+0x2403]:--this['EXhAOo'][0xaba*0x1+0x274+-0xd2e];return this['VQpVvB'](_0x1e72f3);},_0x58d48d['prototype']['VQpVvB']=function(_0xeec8c2){if(!Boolean(~_0xeec8c2))return _0xeec8c2;return this['QctZPG'](this['UqMukt']);},_0x58d48d['prototype']['QctZPG']=function(_0x5cc067){for(let _0x4b79c8=-0x2508+-0x16e1*0x1+0x3be9,_0x2cb109=this['EXhAOo']['length'];_0x4b79c8<_0x2cb109;_0x4b79c8++){this['EXhAOo']['push'](Math['round'](Math['random']())),_0x2cb109=this['EXhAOo']['length'];}return _0x5cc067(this['EXhAOo'][-0x5*-0x62f+-0x1105*-0x2+-0x40f5]);},new _0x58d48d(_0x4ee0)['ipFEkP'](),_0x381f55=_0x4ee0['niowjH'](_0x381f55),_0x4ee0['KCcwhx'][_0x27e185]=_0x381f55;}else _0x381f55=_0x39e004;return _0x381f55;}function generateRequestId(){function _0x18e4ed(_0x41e042,_0xc7e682,_0x48d213,_0x5115b1){return _0x4ee0(_0x48d213-0x2f3,_0xc7e682);}if(crypto&&crypto[_0x18e4ed(0x423,0x3e7,0x419,0x3fc)])return crypto[_0x18e4ed(0x3b1,0x3c0,0x419,0x3ac)]();function _0x23b06f(_0xdacdc2,_0x107104,_0x44aa1f,_0x2d78e3){return _0x4ee0(_0x107104- -0x246,_0x2d78e3);}return Date['now']()[_0x18e4ed(0x445,0x482,0x41d,0x441)](0x10a1*-0x2+-0x175f+-0x1*-0x38c5)+Math[_0x23b06f(-0x36,-0x8c,0x9,-0x8f)]()['toString'](0x1*0xd42+-0x1337+0x619)['substring'](0x769+-0x1bd4+0x146d);}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){function _0x33e2e0(_0x71c564,_0x1d84f1,_0x35a283,_0x38ef1d){return _0x4ee0(_0x71c564- -0xbf,_0x38ef1d);}function _0x142b4f(_0x226abb,_0x5f1e0b,_0x52be15,_0x13b27f){return _0x4ee0(_0x13b27f-0x37b,_0x5f1e0b);}const _0x4b7955={'CprAH':function(_0x2e0898,_0x4d8622){return _0x2e0898(_0x4d8622);},'XPIBu':_0x142b4f(0x4ba,0x590,0x4ff,0x51a),'xkHjz':_0x33e2e0(0x4a,0x82,0x79,0x32),'OunmF':'ZRpNh','xwSHP':'获取服装修改提示词超'+'时','MyWEU':function(_0x3f7f69){return _0x3f7f69();},'RqOhn':function(_0x4b6a63,_0x3a47fa,_0x179708){return _0x4b6a63(_0x3a47fa,_0x179708);}};return new Promise((_0x3d9d55,_0x4226bc)=>{function _0xc3cce4(_0x60c66b,_0x19e120,_0x357b87,_0xb70008){return _0x33e2e0(_0x60c66b-0x11c,_0x19e120-0x182,_0x357b87-0x154,_0x19e120);}const _0x464dce=_0x4b7955[_0x20fed7(0xcc,0xee,0x13d,0xc2)](generateRequestId);function _0x20fed7(_0x517f09,_0x388244,_0x88c152,_0x2ef687){return _0x142b4f(_0x517f09-0xf5,_0x88c152,_0x88c152-0x14d,_0x388244- -0x457);}console[_0xc3cce4(0x231,0x221,0x276,0x264)](_0xc3cce4(0x17a,0x205,0x1d9,0x12b)+'mptModify]'+_0x20fed7(0x16b,0xe3,0xa6,0x65)+_0xc3cce4(0x161,0x152,0x187,0x176)+'odify\x20prom'+_0x20fed7(-0x4f,0x12,0x31,-0x26)+_0x464dce+')');const _0x335d0e=_0x3ac7d0=>{if(_0x3ac7d0['id']!==_0x464dce)return;function _0x21d62a(_0x10f167,_0x573cf6,_0x482666,_0x107f24){return _0x20fed7(_0x10f167-0x1a7,_0x573cf6- -0x2b5,_0x482666,_0x107f24-0x167);}function _0x44e646(_0xf96f4,_0x2e180e,_0x1d2b77,_0x184e05){return _0x20fed7(_0xf96f4-0x19f,_0x2e180e-0x499,_0x1d2b77,_0x184e05-0x1b2);}eventSource[_0x44e646(0x4f2,0x54f,0x4ca,0x561)+_0x44e646(0x539,0x4f8,0x50d,0x499)](eventNames[_0x21d62a(-0x188,-0x1bc,-0x1e6,-0x223)+_0x21d62a(-0x29c,-0x29f,-0x2b2,-0x22c)+_0x44e646(0x401,0x488,0x49f,0x4f2)+'PONSE'],_0x335d0e),_0x4b7955[_0x21d62a(-0x217,-0x24e,-0x27b,-0x269)](_0x3d9d55,_0x3ac7d0['prompt']);};eventSource['on'](eventNames[_0xc3cce4(0x232,0x1ce,0x289,0x2b8)+_0xc3cce4(0x14f,0xdf,0x11e,0x1d2)+_0xc3cce4(0x128,0x158,0x15a,0x15d)+'PONSE'],_0x335d0e);const _0x3853ca={};_0x3853ca['id']=_0x464dce,eventSource[_0x20fed7(0xe5,0x5e,0xab,0x66)](eventNames[_0x20fed7(0x17d,0xf9,0x13a,0x112)+_0x20fed7(0x28,0x16,-0x41,-0x21)+_0x20fed7(0xde,0x6c,0x51,0x8b)+_0x20fed7(0x85,-0xd,-0x76,0x87)],_0x3853ca),_0x4b7955[_0x20fed7(0xe1,0x50,0xb5,0xa8)](setTimeout,()=>{function _0x1f5fe9(_0x5061fe,_0x2141f6,_0x3b08a7,_0x36204f){return _0x20fed7(_0x5061fe-0x1b2,_0x36204f-0x161,_0x3b08a7,_0x36204f-0xf0);}const _0x47d44c={};function _0x122e44(_0x51d292,_0x49addf,_0x210306,_0x400de6){return _0x20fed7(_0x51d292-0x1a7,_0x400de6- -0x110,_0x49addf,_0x400de6-0x194);}_0x47d44c[_0x1f5fe9(0x170,0x1d6,0x204,0x192)]=_0x4b7955['XPIBu'];const _0x48ed54=_0x47d44c;if(_0x4b7955['xkHjz']===_0x4b7955[_0x122e44(-0x183,-0xa6,-0x158,-0x106)]){const _0x136be4=_0x1c5a92[_0x122e44(-0x78,-0x67,-0x9f,-0x6d)+'ById'](_0x1f5fe9(0x2a6,0x227,0x21a,0x234)+_0x1a836c);_0x136be4&&(_0x136be4['value']=_0x4c1ec2[_0x27dea3],_0x169ef2(_0x136be4)[_0x122e44(-0x59,-0x5e,-0x14,-0x84)](_0x48ed54[_0x1f5fe9(0x201,0x101,0x19c,0x192)]));}else eventSource['removeList'+'ener'](eventNames['LLM_CHAR_M'+'ODIFY_GET_'+'PROMPT_RES'+_0x122e44(-0x73,0x2,-0x17,-0x79)],_0x335d0e),_0x4226bc(new Error(_0x4b7955[_0x122e44(-0x134,-0x149,-0x118,-0x11f)]));},-0x4b10+0x2e7*0x11+-0xcf5*-0x5);});}export function LLM_OUTFIT_MODIFY(_0x53b0b6,_0x408a0d={}){function _0x1dcdaf(_0x3b6266,_0x1d770c,_0x61b2e0,_0x4a08bc){return _0x4ee0(_0x3b6266-0x29e,_0x61b2e0);}const _0x4dd3d6={'WROfE':_0x1e5409(-0x24a,-0x310,-0x2ef,-0x295),'SypJI':function(_0x42cc32,_0x23b160){return _0x42cc32!==_0x23b160;},'GXJsH':_0x1e5409(-0x277,-0x1dd,-0x258,-0x25b),'ejbWK':_0x1e5409(-0x367,-0x286,-0x2a0,-0x2fa),'lwMjo':function(_0x3be5bf,_0x226f74){return _0x3be5bf(_0x226f74);},'qpdyO':'LLM\x20请求失败','XQexZ':_0x1e5409(-0x1ca,-0x231,-0x1fa,-0x25a)+_0x1dcdaf(0x395,0x359,0x317,0x343),'okElP':function(_0x439167){return _0x439167();}};function _0x1e5409(_0x231092,_0x3449ad,_0x52e36c,_0x4f8902){return _0x4ee0(_0x4f8902- -0x3e7,_0x52e36c);}return new Promise((_0x4395ba,_0x99cc89)=>{function _0x5cffbc(_0x11f27a,_0x5288da,_0x3aff2a,_0x395b01){return _0x1e5409(_0x11f27a-0x11b,_0x5288da-0x143,_0x5288da,_0x3aff2a-0xa0);}const _0x53d4a8={'Xpyuu':function(_0x3ae66d,_0x15a654){function _0x342ee1(_0x24c4f4,_0x182c98,_0x3ea4c5,_0x45becf){return _0x4ee0(_0x182c98- -0x96,_0x24c4f4);}return _0x4dd3d6[_0x342ee1(0x29,0x88,0x4,0x56)](_0x3ae66d,_0x15a654);},'VKxUV':_0x4dd3d6['XQexZ']},_0x13fa48=_0x4dd3d6['okElP'](generateRequestId),_0x5a60b5=_0x408a0d[_0x982a19(-0x1e4,-0x1a7,-0x246,-0x1b5)]||-0xc87d+-0x356*-0xd+0x1877f;function _0x982a19(_0x294a0f,_0x11f1bd,_0x51c08b,_0x3b35d9){return _0x1e5409(_0x294a0f-0x8c,_0x11f1bd-0x1c4,_0x3b35d9,_0x294a0f-0xa0);}console[_0x5cffbc(-0x100,-0x1b2,-0x173,-0x1a5)](_0x982a19(-0x22a,-0x1de,-0x1ac,-0x1b6)+'mptModify]'+_0x982a19(-0x224,-0x2b5,-0x19d,-0x25b)+_0x5cffbc(-0x311,-0x294,-0x27b,-0x1f6)+_0x5cffbc(-0x189,-0x195,-0x158,-0x1b8)+_0x5cffbc(-0x1ba,-0x2ac,-0x223,-0x1c1)+':\x20'+_0x13fa48+')');const _0x32d437=_0x4b670f=>{const _0x527664={};function _0xa286f4(_0x1bc45f,_0x552f85,_0x537556,_0x1ee536){return _0x982a19(_0x552f85-0x1c2,_0x552f85-0x15e,_0x537556-0x1ea,_0x1bc45f);}_0x527664[_0xa286f4(-0xa,-0x8d,-0x96,-0xef)]=_0x4dd3d6[_0x2122e0(-0x7,-0x2b,0x61,-0x2d)];const _0x4397f5=_0x527664;if(_0x4dd3d6[_0xa286f4(-0x53,0x25,0x38,0x65)](_0x4b670f['id'],_0x13fa48))return;function _0x2122e0(_0x252a12,_0x55132f,_0x32f4cb,_0x1a0cf4){return _0x982a19(_0x55132f-0x20a,_0x55132f-0xdf,_0x32f4cb-0x96,_0x1a0cf4);}eventSource[_0x2122e0(0x29,0x55,0x3d,0x25)+_0xa286f4(-0xe0,-0x4a,0x34,-0x2c)](eventNames['LLM_CHAR_M'+_0x2122e0(-0x33,0x40,0x6c,-0x23)+_0x2122e0(0xf0,0xa7,0x2a,0x78)],_0x32d437);if(_0x4b670f[_0xa286f4(-0xbc,-0x88,-0x99,-0x4a)]){if(_0x4dd3d6[_0xa286f4(-0xc,0x25,-0x60,0x33)](_0x4dd3d6[_0xa286f4(-0x74,-0x6b,-0x18,0x18)],_0x4dd3d6[_0xa286f4(-0x31,-0xa8,-0xbc,-0xf1)]))_0x4dd3d6['lwMjo'](_0x4395ba,_0x4b670f['result']);else{const _0x46683f={};_0x46683f[_0x2122e0(0x0,-0x24,0x43,0x3f)]=_0x4397f5['hgvNk'],_0x46683f[_0xa286f4(-0x71,-0x33,-0xc1,-0x47)]=_0x166eca[_0x2122e0(0x19,0x45,0x7c,0xa4)],_0x5c10ae[_0x2122e0(0xad,0x90,0x83,0x9f)](_0x46683f);}}else _0x4dd3d6[_0xa286f4(-0x42,-0x67,-0x2e,-0x6)](_0x99cc89,new Error(_0x4b670f[_0x2122e0(-0x1f,0x28,0xb,0x4)]||_0x4dd3d6[_0x2122e0(0x67,0x61,0x1b,0x13)]));};eventSource['on'](eventNames[_0x5cffbc(-0x14d,-0x1a2,-0x172,-0xde)+_0x5cffbc(-0x253,-0x1de,-0x1ca,-0x158)+_0x5cffbc(-0xfa,-0x146,-0x163,-0xd6)],_0x32d437);const _0x282588={};_0x282588[_0x982a19(-0x266,-0x294,-0x22a,-0x25c)]=_0x53b0b6,_0x282588['id']=_0x13fa48,eventSource[_0x5cffbc(-0x280,-0x1fe,-0x20d,-0x1b4)](eventNames[_0x982a19(-0x172,-0xf7,-0x1c7,-0x193)+_0x5cffbc(-0x20f,-0x234,-0x1dc,-0x1f8)+_0x5cffbc(-0x119,-0x151,-0x160,-0x18e)],_0x282588),setTimeout(()=>{function _0x2fe3ce(_0x5bc3c0,_0x3778d1,_0x462287,_0x4533c3){return _0x982a19(_0x5bc3c0-0xb2,_0x3778d1-0x141,_0x462287-0xd5,_0x462287);}function _0x5cb69a(_0x1d5eac,_0x1da3b4,_0x25857a,_0x21467c){return _0x5cffbc(_0x1d5eac-0x35,_0x25857a,_0x1da3b4-0x27e,_0x21467c-0xd1);}eventSource['removeList'+_0x5cb69a(0xc2,0x72,0x8f,-0x23)](eventNames[_0x5cb69a(0x126,0x10c,0x136,0x11e)+_0x5cb69a(0xa3,0xb4,0x71,0x144)+'ONSE'],_0x32d437),_0x53d4a8['Xpyuu'](_0x99cc89,new Error(_0x53d4a8[_0x2fe3ce(-0x14b,-0xc8,-0xf3,-0x1a3)]));},_0x5a60b5);});}function preprocessTagContent(_0xa9c10){let _0x395527=_0xa9c10[_0x56d88e(-0x215,-0x316,-0x29f,-0x254)](/:/g,':')[_0x24e55b(0x27e,0x32a,0x2c9,0x30f)](/\(/g,'（')['replace'](/\)/g,'）')[_0x56d88e(-0x2ea,-0x32b,-0x29f,-0x27b)](/,/g,',');function _0x56d88e(_0x4a5d27,_0x551b5e,_0xae7c08,_0x2ef057){return _0x4ee0(_0xae7c08- -0x371,_0x551b5e);}function _0x24e55b(_0x1ee689,_0x2d9b4f,_0x4b466b,_0x3b033a){return _0x4ee0(_0x3b033a-0x23d,_0x2d9b4f);}return _0x395527;}function parseOutfitData(_0x11ad86){const _0xa82c71={};_0xa82c71['EhOxx']='nameCN',_0xa82c71[_0x3ef0(0x546,0x5db,0x59c,0x524)]='nameEN',_0xa82c71['mEogb']=_0x949017(0x438,0x35e,0x3ae,0x42a),_0xa82c71[_0x3ef0(0x574,0x54e,0x56e,0x525)]=_0x3ef0(0x509,0x522,0x58d,0x5c4)+_0x3ef0(0x524,0x5ae,0x545,0x4dd),_0xa82c71['ahNLg']='fullBody',_0xa82c71[_0x949017(0x40c,0x30d,0x391,0x3b5)]=_0x3ef0(0x511,0x569,0x58e,0x5c5)+'ck',_0xa82c71[_0x949017(0x32d,0x33c,0x3be,0x35c)]=function(_0x5d01cb,_0x1a8dc1){return _0x5d01cb===_0x1a8dc1;},_0xa82c71['UYvGE']=function(_0x4412c5,_0x2894f7){return _0x4412c5+_0x2894f7;},_0xa82c71[_0x949017(0x454,0x3c0,0x3c3,0x42e)]=function(_0x1f9e8e,_0x203afb){return _0x1f9e8e&&_0x203afb;},_0xa82c71[_0x949017(0x429,0x42d,0x3a8,0x3bf)]=_0x949017(0x362,0x368,0x38d,0x371)+'mptModify]'+_0x949017(0x37b,0x396,0x401,0x45b);const _0x129585=_0xa82c71;function _0x949017(_0x5f3466,_0x484e52,_0x1b7497,_0x1024eb){return _0x4ee0(_0x1b7497-0x270,_0x1024eb);}const _0x4d004f=_0x11ad86[_0x949017(0x39d,0x2f7,0x373,0x30a)]('\x0a')[_0x3ef0(0x5a3,0x59e,0x57c,0x521)](_0x2ec195=>_0x2ec195[_0x949017(0x405,0x3cf,0x420,0x48e)]())['filter'](_0x43d683=>_0x43d683),_0x535d0a={};_0x535d0a[_0x949017(0x3b0,0x468,0x441,0x49c)]='',_0x535d0a[_0x3ef0(0x591,0x55a,0x5c2,0x614)]='',_0x535d0a[_0x949017(0x3b8,0x3f8,0x3ae,0x3be)]='',_0x535d0a[_0x949017(0x4b7,0x481,0x428,0x450)+_0x949017(0x457,0x45f,0x3e0,0x37c)]='',_0x535d0a['fullBody']='',_0x535d0a[_0x949017(0x4b3,0x3be,0x429,0x3e8)+'ck']='';const _0xea8bdf=_0x535d0a,_0x50d306={};_0x50d306[_0x949017(0x42b,0x4c2,0x440,0x47d)]=_0x129585[_0x3ef0(0x5ea,0x605,0x5af,0x5ec)],_0x50d306[_0x949017(0x3cc,0x32b,0x3b9,0x400)]=_0x129585['BFaBl'],_0x50d306['上半身']=_0x129585[_0x3ef0(0x593,0x4e7,0x564,0x570)],_0x50d306[_0x949017(0x335,0x2ce,0x347,0x33b)]=_0x129585[_0x3ef0(0x554,0x593,0x56e,0x5c4)],_0x50d306[_0x949017(0x355,0x379,0x3ce,0x411)]=_0x129585[_0x949017(0x3c3,0x39c,0x37c,0x3d2)];function _0x3ef0(_0x5643df,_0x31e395,_0x19438c,_0x598636){return _0x4ee0(_0x19438c-0x3d5,_0x31e395);}_0x50d306[_0x3ef0(0x541,0x5a9,0x59e,0x5af)]=_0x129585['ahNLg'],_0x50d306[_0x3ef0(0x4cc,0x56d,0x54a,0x54a)]=_0x129585['uyWRT'];const _0x27e60d=_0x50d306;for(const _0xc4eb82 of _0x4d004f){const _0x541ac7=_0xc4eb82['indexOf'](':');if(_0x129585[_0x949017(0x398,0x3b8,0x3be,0x3e5)](_0x541ac7,-(0x22d1+-0x24d7+-0xad*-0x3)))continue;const _0x548286=_0xc4eb82['substring'](0xfdb+-0x3ca+-0xc11,_0x541ac7)[_0x3ef0(0x558,0x589,0x585,0x599)](),_0x447fcc=_0xc4eb82[_0x3ef0(0x562,0x548,0x5ad,0x5ed)](_0x129585[_0x949017(0x3b2,0x411,0x404,0x48a)](_0x541ac7,-0x1d+-0x1*0x827+0x845))[_0x3ef0(0x5cc,0x509,0x585,0x600)]();if(_0x27e60d[_0x548286])_0xea8bdf[_0x27e60d[_0x548286]]=_0x447fcc;else _0x129585[_0x3ef0(0x4a7,0x5a6,0x528,0x500)](_0x548286,_0x447fcc)&&console['log']('[outfitPro'+_0x3ef0(0x523,0x54a,0x4e6,0x522)+_0x949017(0x40c,0x370,0x386,0x406)+'\x22'+_0x548286+'\x22');}if(!_0xea8bdf['nameCN'])return null;return console[_0x949017(0x47e,0x44c,0x444,0x42c)](_0x129585[_0x949017(0x366,0x335,0x3a8,0x3a1)],_0xea8bdf),_0xea8bdf;}function extractOutfitTags(_0x4e3cd2){const _0x137a43={'stxim':function(_0x490abd,_0x1ddb74){return _0x490abd!==_0x1ddb74;},'MpWXP':function(_0x4fcb10,_0x3f6d27){return _0x4fcb10===_0x3f6d27;},'yvPcc':_0x42e31e(0x421,0x48a,0x4e8,0x4b6),'iOIql':function(_0x1ce8c1,_0x5a21af){return _0x1ce8c1(_0x5a21af);}},_0x44b04f={};function _0x3511e2(_0x40c1a1,_0x35c720,_0x4d5fb4,_0x2b5fc1){return _0x4ee0(_0x40c1a1- -0x2b1,_0x35c720);}_0x44b04f['outfits']=[];const _0x428999=_0x44b04f;_0x4e3cd2=_0x4e3cd2[_0x42e31e(0x3a3,0x453,0x45f,0x3f1)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x3511e2(-0x101,-0x138,-0xed,-0xb4)]();const _0x539abc=/<服装>([\s\S]*?)<\/服装>/g;let _0x15e2b0;while(_0x137a43[_0x3511e2(-0x1c5,-0x254,-0x1ee,-0x177)](_0x15e2b0=_0x539abc['exec'](_0x4e3cd2),null)){if(_0x137a43['MpWXP'](_0x137a43[_0x42e31e(0x42d,0x40c,0x460,0x45b)],_0x137a43[_0x42e31e(0x448,0x413,0x461,0x45b)])){const _0x4946de=_0x137a43[_0x3511e2(-0xf3,-0x112,-0xbe,-0xe8)](preprocessTagContent,_0x15e2b0[0x61*0x4b+0x1339*0x1+-0x2fa3]),_0x35a1fb=parseOutfitData(_0x4946de);_0x35a1fb&&_0x428999[_0x3511e2(-0x1d1,-0x21a,-0x1d1,-0x1f4)][_0x3511e2(-0xe4,-0x106,-0x87,-0x13b)](_0x35a1fb);}else{if(_0x137a43['stxim'](_0xd81685['id'],_0x50eb21))return;_0x2ca8a6['removeList'+_0x42e31e(0x4ce,0x45b,0x449,0x45a)](_0x4f66f8[_0x42e31e(0x532,0x4f5,0x544,0x4f4)+_0x3511e2(-0x1bf,-0x204,-0x182,-0x207)+_0x42e31e(0x47e,0x3df,0x383,0x3ea)+_0x42e31e(0x4a4,0x4f9,0x514,0x492)],_0x35ed9e),_0x7a52e8(_0x56cecb[_0x42e31e(0x457,0x3c3,0x41e,0x400)]);}}function _0x42e31e(_0x1b9431,_0x561d3f,_0x1b3630,_0x14d917){return _0x4ee0(_0x14d917-0x31f,_0x1b9431);}return _0x428999;}function getCurrentOutfitPreset(){function _0x38fa9b(_0x3be6cc,_0x1b8b65,_0x26c54c,_0x265425){return _0x4ee0(_0x265425- -0x180,_0x26c54c);}const _0x8c2f42={};_0x8c2f42[_0x38fa9b(-0x6a,-0x2a,-0xf7,-0x8b)]=function(_0x4b74fd,_0x589f55){return _0x4b74fd!==_0x589f55;},_0x8c2f42['dVzwt']='KtXrB',_0x8c2f42[_0x170f8c(-0x153,-0x145,-0x18a,-0x113)]='FbHiU';const _0x581ef8=_0x8c2f42,_0x477ce6=extension_settings[extensionName],_0x4e0246=_0x477ce6['outfitPres'+'etId'];if(!_0x4e0246||!_0x477ce6[_0x38fa9b(-0xa0,-0x2c,-0x11b,-0x85)+_0x38fa9b(-0x53,-0x66,0x1b,-0x4d)][_0x4e0246])return _0x581ef8[_0x170f8c(-0x1c3,-0x197,-0x129,-0x136)](_0x581ef8[_0x170f8c(-0x5b,0x30,-0x46,-0x4c)],_0x581ef8['mjhBL'])?null:_0x529285;const _0x31dfae={};function _0x170f8c(_0x28ea38,_0x2a300b,_0x21117e,_0x22c620){return _0x4ee0(_0x22c620- -0x22b,_0x21117e);}return _0x31dfae['id']=_0x4e0246,_0x31dfae[_0x38fa9b(-0x4a,-0x8f,-0xf9,-0x82)]=_0x477ce6[_0x170f8c(-0x134,-0xfc,-0x111,-0x130)+_0x170f8c(-0x135,-0x10f,-0xd6,-0xf8)][_0x4e0246],_0x31dfae;}function buildOutfitText(_0x231f4c){const _0x35ba6e={};_0x35ba6e['CFFDq']=_0xfaaf21(0xc1,0x133,0x118,0x10a),_0x35ba6e[_0x111408(-0x112,-0x196,-0x145,-0x13a)]=_0x111408(-0x18f,-0x158,-0x11b,-0xf9);const _0x1b1f2f=_0x35ba6e,_0x28d1b0=_0x231f4c[_0xfaaf21(0x80,0x81,0xb7,0x82)];let _0x1b4031=_0x1b1f2f[_0x111408(-0x183,-0xf6,-0xad,-0x85)];function _0x111408(_0x367ce6,_0x38885b,_0x1d9ca1,_0x4bc6dd){return _0x4ee0(_0x38885b- -0x286,_0x4bc6dd);}function _0xfaaf21(_0x2758b1,_0x1eaf0f,_0x33148c,_0x767202){return _0x4ee0(_0x2758b1- -0x7e,_0x1eaf0f);}return _0x1b4031+=_0x111408(-0x109,-0x126,-0x1b0,-0x163)+(_0x28d1b0[_0x111408(-0x121,-0xb5,-0xa8,-0xb5)]||'')+'\x0a',_0x1b4031+=_0xfaaf21(0x56,0xb3,0x44,0x87)+(_0x28d1b0['nameEN']||'')+'\x0a',_0x1b4031+='上半身:\x20'+(_0x28d1b0['upperBody']||'')+'\x0a',_0x1b4031+=_0xfaaf21(0x143,0xc5,0x162,0x1ba)+(_0x28d1b0[_0x111408(-0x5f,-0xce,-0x63,-0x162)+'ack']||'')+'\x0a',_0x1b4031+='下半身:\x20'+(_0x28d1b0[_0x111408(-0x105,-0xeb,-0x176,-0x118)]||'')+'\x0a',_0x1b4031+=_0x111408(-0x18f,-0x132,-0x171,-0xc1)+(_0x28d1b0['fullBodyBa'+'ck']||'')+'\x0a',_0x1b4031+=_0x1b1f2f[_0xfaaf21(0x72,0x61,0x75,0x18)],_0x1b4031;}export async function handleOutfitPromptModify(_0x1cce7c,_0x42e117=[]){const _0x7cf666={'ntwwq':_0x367210(0x479,0x4a4,0x3ed,0x49d)+'+$','iuwRC':function(_0x4330c7,_0x5c936d){return _0x4330c7(_0x5c936d);},'yMVXB':'LLM\x20请求失败','TKAdZ':_0x23c744(0x28b,0x22a,0x259,0x21e)+'mptModify]'+_0x23c744(0x2c6,0x2e0,0x291,0x2fe)+_0x367210(0x427,0x4a5,0x44f,0x451)+_0x23c744(0x32b,0x362,0x322,0x345)+_0x367210(0x407,0x488,0x435,0x479)+'.','BylyN':_0x23c744(0x33d,0x30c,0x3c7,0x36d)+_0x367210(0x39b,0x309,0x3b6,0x3cf),'BIlHM':function(_0x5eac81,_0x48c85f){return _0x5eac81!==_0x48c85f;},'PvFdf':_0x23c744(0x30a,0x393,0x38e,0x2b4),'saTcJ':_0x23c744(0x2e4,0x26e,0x35c,0x2e0),'tXCcl':_0x367210(0x43e,0x3d5,0x4ad,0x43c),'rQAiO':_0x23c744(0x28b,0x282,0x1ff,0x27f)+'mptModify]'+_0x367210(0x416,0x396,0x393,0x493)+_0x367210(0x432,0x425,0x45b,0x3b8),'RsrwK':function(_0x54d91d,_0x424f81){return _0x54d91d(_0x424f81);},'Lnkoe':function(_0x503163,_0x5891bc){return _0x503163||_0x5891bc;},'KFzms':function(_0x1b380a,_0x135a1c,_0x10d488){return _0x1b380a(_0x135a1c,_0x10d488);},'wSvZP':function(_0x52fcc1,_0x4199d1,_0x351127){return _0x52fcc1(_0x4199d1,_0x351127);},'UoNFa':_0x23c744(0x2ef,0x368,0x269,0x2ee),'JuRRW':_0x367210(0x3e3,0x46f,0x456,0x35e)+_0x23c744(0x27f,0x30f,0x30b,0x21a)+_0x367210(0x3c2,0x44f,0x330,0x439)+'irement\x20me'+_0x367210(0x451,0x438,0x4e4,0x49f)+'x:','hNmNA':function(_0x2c7ac7,_0x47490a,_0x3e70d4,_0x7af26f,_0x417a49){return _0x2c7ac7(_0x47490a,_0x3e70d4,_0x7af26f,_0x417a49);},'bkVvE':'{{当前服装}}','LDPYL':_0x23c744(0x31b,0x28b,0x30b,0x334),'lUYeq':_0x23c744(0x323,0x39f,0x2d6,0x340),'NQjPs':function(_0x267963,_0xc12630,_0x753408,_0x3fce5d,_0x4e73d9){return _0x267963(_0xc12630,_0x753408,_0x3fce5d,_0x4e73d9);},'gOVDG':_0x367210(0x478,0x45e,0x50b,0x44e),'uamzU':_0x23c744(0x2b0,0x253,0x222,0x239),'kvDtq':_0x367210(0x47d,0x4bd,0x415,0x44b),'oaQnd':function(_0x4f5570,_0x4dea9c,_0x3ab326,_0x598138,_0x3faf20){return _0x4f5570(_0x4dea9c,_0x3ab326,_0x598138,_0x3faf20);},'PANGI':_0x367210(0x49c,0x48f,0x514,0x502)+'}}','fNUrF':_0x367210(0x474,0x4ec,0x49f,0x488)+'}}','RYxpQ':'[outfitPro'+'mptModify]'+_0x367210(0x399,0x417,0x419,0x3f8)+_0x23c744(0x258,0x210,0x224,0x233),'jdWFm':function(_0xaee68,_0x549e93){return _0xaee68>_0x549e93;},'IOUHr':function(_0x314734,_0x45e43d){return _0x314734===_0x45e43d;},'VfTjQ':'jBpFW','ANvMb':function(_0xf2d7e7,_0x5a8a86){return _0xf2d7e7>_0x5a8a86;},'CIfcA':function(_0x4d8a3c,_0x384c91,_0x7979aa,_0x51335f,_0x3b7f08){return _0x4d8a3c(_0x384c91,_0x7979aa,_0x51335f,_0x3b7f08);},'FpSZr':'images\x20to\x20'+_0x367210(0x450,0x417,0x487,0x466)+'\x20index','KgDwm':_0x23c744(0x353,0x3b8,0x2be,0x2da),'bOQGH':function(_0x4530b4,_0x8429c4){return _0x4530b4(_0x8429c4);},'nFHgZ':'未在\x20LLM\x20输出中'+_0x367210(0x482,0x3fd,0x3f1,0x434),'PKFMr':_0x367210(0x3e3,0x3c1,0x352,0x359)+_0x23c744(0x27f,0x2fb,0x232,0x2e4)+_0x23c744(0x23f,0x283,0x23f,0x1c1)+'utput\x20for\x20'+_0x23c744(0x358,0x35c,0x38b,0x3df),'mjnYW':_0x23c744(0x28b,0x2cf,0x2f8,0x2ed)+_0x23c744(0x27f,0x250,0x238,0x242)+_0x23c744(0x312,0x2e7,0x2a5,0x2c0)+_0x23c744(0x276,0x2a0,0x2cc,0x2be),'JrGVj':function(_0x435238,_0x44c7f3,_0x16e77c){return _0x435238(_0x44c7f3,_0x16e77c);},'WRmeF':_0x23c744(0x324,0x340,0x38e,0x2e5),'ACXZs':'[outfitPro'+_0x23c744(0x27f,0x240,0x2fc,0x2c6)+_0x23c744(0x248,0x232,0x224,0x1e8)};function _0x23c744(_0x2f9ef7,_0x410426,_0x48c024,_0xf082a4){return _0x4ee0(_0x2f9ef7-0x16e,_0x48c024);}console[_0x23c744(0x342,0x311,0x3b1,0x337)](_0x7cf666[_0x23c744(0x270,0x251,0x203,0x1ee)]),toastr['info'](_0x7cf666[_0x367210(0x4a9,0x514,0x4ae,0x460)]);function _0x367210(_0x3d1485,_0x4e58af,_0x1abd90,_0x262b14){return _0x4ee0(_0x3d1485-0x2c6,_0x4e58af);}try{if(_0x7cf666[_0x367210(0x44e,0x462,0x402,0x45d)](_0x7cf666[_0x23c744(0x30e,0x333,0x359,0x37b)],_0x7cf666[_0x23c744(0x2e2,0x2e0,0x2b3,0x32a)])){const _0x2920a7=extension_settings[extensionName],_0x3daff9=getCurrentOutfitPreset();if(!_0x3daff9){toastr[_0x367210(0x45b,0x3ef,0x47d,0x3f8)](_0x7cf666['tXCcl']);return;}console[_0x23c744(0x342,0x3ca,0x34e,0x3c9)](_0x7cf666['rQAiO'],_0x3daff9['id']);const _0xc2a555=_0x7cf666[_0x367210(0x3cc,0x3d5,0x3e2,0x3d5)](buildOutfitText,_0x3daff9),_0x3a1b2d=[_0x7cf666[_0x367210(0x413,0x4a6,0x3be,0x465)](_0x1cce7c,''),_0xc2a555]['filter'](Boolean)['join']('\x0a');let _0x564a9e=_0x7cf666['KFzms'](buildPromptForRequestType,'char_modif'+'y',_0x3a1b2d);const _0x18295e=new Set(),_0x18f096=_0x7cf666['wSvZP'](findMessageIndexWithPlaceholder,_0x564a9e,_0x7cf666[_0x23c744(0x2c3,0x2f3,0x305,0x2db)]);console['log'](_0x7cf666[_0x23c744(0x255,0x25d,0x1e7,0x27f)],_0x18f096),_0x564a9e=_0x7cf666[_0x367210(0x486,0x4db,0x44d,0x412)](replacePlaceholder,_0x564a9e,_0x7cf666['bkVvE'],_0xc2a555,_0x18295e),_0x564a9e=replacePlaceholder(_0x564a9e,_0x7cf666[_0x367210(0x3a9,0x361,0x33b,0x327)],_0xc2a555,_0x18295e),_0x564a9e=replacePlaceholder(_0x564a9e,_0x7cf666[_0x367210(0x41b,0x47d,0x443,0x38b)],_0x1cce7c||'',_0x18295e),_0x564a9e=_0x7cf666['hNmNA'](replacePlaceholder,_0x564a9e,_0x7cf666[_0x23c744(0x237,0x1d4,0x2c1,0x223)],'',_0x18295e),_0x564a9e=_0x7cf666[_0x367210(0x433,0x3f2,0x41a,0x3e5)](replacePlaceholder,_0x564a9e,_0x7cf666[_0x23c744(0x28e,0x207,0x2e7,0x2a4)],'',_0x18295e),_0x564a9e=_0x7cf666[_0x23c744(0x2db,0x33d,0x253,0x249)](replacePlaceholder,_0x564a9e,_0x7cf666[_0x23c744(0x2ea,0x2b6,0x2c9,0x28f)],'',_0x18295e),_0x564a9e=_0x7cf666['hNmNA'](replacePlaceholder,_0x564a9e,_0x7cf666['kvDtq'],'',_0x18295e),_0x564a9e=_0x7cf666[_0x367210(0x463,0x413,0x493,0x427)](replacePlaceholder,_0x564a9e,_0x7cf666[_0x23c744(0x333,0x300,0x3b8,0x3b8)],'',_0x18295e),_0x564a9e=_0x7cf666[_0x23c744(0x2db,0x32c,0x2ec,0x34a)](replacePlaceholder,_0x564a9e,_0x7cf666[_0x367210(0x3a2,0x405,0x313,0x3bf)],'',_0x18295e),console['log'](_0x7cf666[_0x367210(0x440,0x457,0x3b0,0x45d)],_0x564a9e);let _0x57919c='';if(_0x7cf666['jdWFm'](_0x18295e[_0x23c744(0x339,0x3b3,0x300,0x32e)],0xb2d*-0x3+-0x127b+0x3402)){if(_0x7cf666[_0x367210(0x3f3,0x482,0x479,0x400)](_0x7cf666[_0x367210(0x3e1,0x37f,0x42f,0x3c7)],_0x23c744(0x26d,0x1ed,0x2e7,0x23d)))_0x57919c=_0x367210(0x420,0x467,0x417,0x419)+_0x367210(0x449,0x497,0x463,0x42d)+[..._0x18295e][_0x23c744(0x317,0x382,0x383,0x29f)]('、')+'\x0a';else return _0x12dc6a[_0x367210(0x3f0,0x38d,0x3f4,0x367)]()[_0x23c744(0x27c,0x227,0x2e6,0x27f)](DXSuyt[_0x367210(0x467,0x3e6,0x4ad,0x49d)])['toString']()[_0x367210(0x39e,0x36c,0x3bd,0x312)+'r'](_0x5af200)['search'](DXSuyt['ntwwq']);}_0x42e117&&_0x7cf666['ANvMb'](_0x42e117['length'],0xbe5+0x1*0x1b21+-0x2706)&&_0x18f096>=-0x1*-0xde5+-0x15f9+-0x205*-0x4&&(_0x564a9e=_0x7cf666[_0x23c744(0x308,0x299,0x35f,0x2d5)](attachImagesToMessage,_0x564a9e,_0x18f096,_0x42e117,_0x23c744(0x34a,0x366,0x314,0x339)),console[_0x23c744(0x342,0x376,0x2c2,0x2df)]('[outfitPro'+_0x367210(0x3d7,0x428,0x420,0x3ca)+_0x23c744(0x295,0x265,0x22b,0x324),_0x42e117[_0x23c744(0x285,0x2dd,0x24e,0x2bb)],_0x7cf666[_0x23c744(0x297,0x217,0x2cd,0x30a)],_0x18f096));_0x7cf666[_0x367210(0x42f,0x407,0x476,0x3b5)](updateCombinedPrompt,_0x564a9e,_0x57919c);const _0x39e60d={};_0x39e60d[_0x367210(0x429,0x413,0x3a7,0x3c1)]=0x493e0;const _0x5b980e=await LLM_OUTFIT_MODIFY(_0x564a9e,_0x39e60d);console[_0x23c744(0x342,0x37b,0x2ea,0x373)](_0x23c744(0x28b,0x28f,0x22b,0x2ed)+'mptModify]'+'\x20LLM\x20outpu'+'t:',_0x5b980e);if(!_0x5b980e){toastr[_0x23c744(0x303,0x30d,0x281,0x37f)](_0x7cf666[_0x367210(0x4b1,0x49e,0x45f,0x524)]);return;}const _0x3ab385=_0x7cf666['bOQGH'](extractOutfitTags,_0x5b980e);if(_0x3ab385[_0x367210(0x3a6,0x3fc,0x378,0x424)][_0x367210(0x3dd,0x423,0x3d6,0x374)]===0x2eb+0x641+0x1*-0x92c){toastr['warning'](_0x7cf666[_0x367210(0x40b,0x3aa,0x3f4,0x413)]),console['log'](_0x7cf666[_0x367210(0x469,0x487,0x4e2,0x432)],_0x5b980e);return;}console['log'](_0x7cf666['mjnYW'],_0x3ab385);const _0x554fc8=_0x3ab385[_0x367210(0x3a6,0x3a6,0x389,0x314)][-0x51*-0x29+-0x1d33+0x103a];await _0x7cf666[_0x23c744(0x2bf,0x2af,0x32b,0x24b)](updateOutfitPresetFromLLM,_0x3daff9['id'],_0x554fc8),toastr[_0x23c744(0x26b,0x238,0x20b,0x1d8)](_0x23c744(0x26e,0x245,0x2c1,0x2ef));}else _0x7cf666[_0x367210(0x489,0x4e1,0x47c,0x463)](_0x1ca7cf,new _0x7df4c0(_0x239b30['result']||_0x7cf666[_0x367210(0x422,0x46f,0x41f,0x436)]));}catch(_0x3f8afd){if(_0x7cf666[_0x367210(0x44e,0x4d6,0x3bf,0x42e)](_0x7cf666[_0x23c744(0x304,0x334,0x310,0x2c3)],_0x23c744(0x2d8,0x2c5,0x332,0x2ec)))console['error'](_0x7cf666[_0x23c744(0x319,0x2ec,0x3a5,0x325)],_0x3f8afd),toastr[_0x367210(0x45b,0x42d,0x44f,0x48d)](_0x367210(0x45e,0x3ed,0x495,0x4ca)+'\x20'+_0x3f8afd[_0x367210(0x438,0x48b,0x4a4,0x40e)]);else{const _0x80c7d7=_0x34f8db?function(){function _0x1d8a1d(_0x29f2ec,_0x4e5fe2,_0x383333,_0x386df1){return _0x367210(_0x4e5fe2- -0x1d3,_0x386df1,_0x383333-0x140,_0x386df1-0x12d);}if(_0x3fb6e8){const _0x29ac36=_0x4c8a82[_0x1d8a1d(0x2d1,0x2bb,0x231,0x33c)](_0x1766d2,arguments);return _0x3862fd=null,_0x29ac36;}}:function(){};return _0x523072=![],_0x80c7d7;}}}async function updateOutfitPresetFromLLM(_0x3dd09a,_0x312fda){const _0x2be85b={'FqgfT':_0x47d709(-0xdc,-0x14d,-0xd0,-0x86),'ezukY':_0x47d709(-0x6f,-0x3d,-0xbe,-0xbb),'GiPqE':function(_0x31a227,_0x37af68){return _0x31a227===_0x37af68;},'NOPCU':_0x180ee1(0x37d,0x3f1,0x423,0x3ef),'GjGiL':'找不到指定的服装预设','fzILZ':_0x180ee1(0x49f,0x4c1,0x4e7,0x482),'gZfXj':_0x47d709(-0x79,-0x20,-0xba,-0x4d),'AVfcr':_0x180ee1(0x3b6,0x40c,0x2fd,0x389),'yLaZE':'下半身','odilG':function(_0x20cc83,_0x3a8f5d){return _0x20cc83!==_0x3a8f5d;},'iyvjD':_0x47d709(-0x172,-0x170,-0xe8,-0x19f),'dHcfg':_0x47d709(-0xf2,-0x72,-0xc9,-0xf3),'HSSuL':function(_0x4744ba,_0x11a4dc){return _0x4744ba>_0x11a4dc;},'aSwUD':_0x180ee1(0x43a,0x4ec,0x4c5,0x4a3),'TbEUU':_0x180ee1(0x345,0x407,0x423,0x3d7),'PLKRG':_0x180ee1(0x3be,0x44b,0x402,0x3bc),'sNBzP':function(_0x1becd5){return _0x1becd5();},'zWhQq':function(_0x47e166,_0x6b9e1){return _0x47e166(_0x6b9e1);},'zYpyi':_0x47d709(-0xfb,-0xd8,-0xf2,-0x173)+_0x180ee1(0x36b,0x391,0x456,0x3c6)+_0x180ee1(0x400,0x396,0x3cb,0x3e7),'zSkgh':function(_0x44b154,_0x104d1e){return _0x44b154(_0x104d1e);}},_0x755db2=extension_settings[extensionName],_0x57bd0b=_0x755db2[_0x180ee1(0x3e0,0x439,0x402,0x3ad)+_0x180ee1(0x3ff,0x367,0x3a1,0x3e5)][_0x3dd09a];if(!_0x57bd0b){if(_0x2be85b[_0x180ee1(0x3e7,0x358,0x357,0x379)](_0x2be85b[_0x47d709(-0x6e,-0xd1,-0x3,-0x94)],'PaJDi')){toastr[_0x47d709(-0xbf,-0xe5,-0xe5,-0x7c)](_0x2be85b[_0x47d709(-0xdd,-0x16c,-0x132,-0xd3)]);return;}else{if(_0x3c22f4){const _0x47cfed=_0x1961fe[_0x180ee1(0x454,0x498,0x46e,0x47a)](_0x1022e,arguments);return _0x1d37a7=null,_0x47cfed;}}}let _0x37ca4e='准备更新服装\x20\x22'+_0x3dd09a+_0x180ee1(0x3de,0x368,0x416,0x3c7);const _0x20afcc={};_0x20afcc[_0x180ee1(0x3f4,0x462,0x4b6,0x483)]=_0x2be85b['fzILZ'];function _0x47d709(_0x17fe60,_0x3b402e,_0x156cca,_0x4c32c8){return _0x4ee0(_0x17fe60- -0x254,_0x3b402e);}_0x20afcc['nameEN']='英文名称',_0x20afcc['upperBody']=_0x2be85b[_0x180ee1(0x4e7,0x4ec,0x4db,0x476)],_0x20afcc['upperBodyB'+_0x180ee1(0x46e,0x438,0x3a4,0x422)]=_0x2be85b[_0x180ee1(0x494,0x49f,0x381,0x409)],_0x20afcc[_0x180ee1(0x434,0x4b7,0x3d3,0x44d)]=_0x2be85b[_0x180ee1(0x3fb,0x41f,0x4c6,0x480)],_0x20afcc[_0x180ee1(0x4e9,0x42c,0x497,0x46b)+'ck']=_0x47d709(-0xdf,-0xb1,-0x16b,-0x125);const _0x521716=_0x20afcc;let _0x33d6d5=-0x3*-0xce7+0x1*0x162b+-0x1*0x3ce0;for(const _0xc10eb1 in _0x521716){if(_0x312fda[_0xc10eb1]&&_0x2be85b[_0x180ee1(0x39c,0x3cd,0x329,0x380)](_0x312fda[_0xc10eb1],_0x57bd0b[_0xc10eb1])){if(_0x2be85b[_0x180ee1(0x3b0,0x3fb,0x393,0x379)](_0x2be85b[_0x180ee1(0x414,0x4da,0x48b,0x457)],_0x2be85b[_0x180ee1(0x37f,0x403,0x42c,0x3c1)])){_0x55e6fb[_0x47d709(-0xbf,-0x4a,-0x6a,-0x112)](_0x2be85b[_0x47d709(-0x8e,-0x89,-0xf7,-0x2f)]);return;}else{const _0x43a9f5=_0x57bd0b[_0xc10eb1]||_0x47d709(-0x66,-0xe1,-0x3f,-0xd5),_0x462b06=_0x312fda[_0xc10eb1];_0x37ca4e+='•\x20'+_0x521716[_0xc10eb1]+':\x0a',_0x37ca4e+=_0x180ee1(0x41c,0x3a3,0x414,0x3e2)+_0x43a9f5[_0x47d709(-0x7c,-0x8c,-0x61,-0x22)](-0x10b1+-0x192d+-0x14ef*-0x2,-0x1834+-0x3d*-0x4+0x2*0xbb9)+(_0x2be85b[_0x180ee1(0x45a,0x3f1,0x4fd,0x46d)](_0x43a9f5[_0x47d709(-0x13d,-0x1bd,-0x144,-0x1a0)],0x1*0x266e+-0x1db1+0x9*-0xf3)?_0x2be85b[_0x180ee1(0x47e,0x42d,0x3c5,0x40f)]:'')+'\x0a',_0x37ca4e+=_0x180ee1(0x3a4,0x40f,0x3d0,0x38d)+_0x462b06[_0x180ee1(0x427,0x432,0x3ff,0x48a)](-0xa0d+0xd4e+-0x341*0x1,0xebb+-0x3d2+-0xab7)+(_0x462b06[_0x180ee1(0x3e0,0x3d3,0x43f,0x3c9)]>-0x24fb+0x120d+0x1320?_0x2be85b[_0x180ee1(0x3c5,0x420,0x401,0x40f)]:'')+'\x0a\x0a',_0x33d6d5++;}}}if(_0x2be85b[_0x180ee1(0x3cc,0x3cb,0x2fc,0x379)](_0x33d6d5,0x5*-0x32b+0x17ad*0x1+0x11*-0x76)){toastr[_0x47d709(-0xc6,-0xc0,-0x70,-0x3f)]('没有检测到需要更新的'+'内容');return;}_0x37ca4e+='共\x20'+_0x33d6d5+'\x20项更改,是否应用?';const _0x981aef=await stylishConfirm(_0x37ca4e);function _0x180ee1(_0x3f9f32,_0x1a8ada,_0x288d09,_0x2afd68){return _0x4ee0(_0x2afd68-0x2b2,_0x288d09);}if(!_0x981aef){if(_0x2be85b[_0x47d709(-0x186,-0x135,-0x152,-0x1e1)](_0x2be85b['TbEUU'],_0x47d709(-0x12f,-0x9a,-0xda,-0x11a))){_0x2fc906['error'](_0x2be85b['ezukY']);return;}else{toastr['info'](_0x2be85b[_0x47d709(-0x92,-0x4f,-0x2f,-0x106)]);return;}}for(const _0x44211d in _0x521716){_0x312fda[_0x44211d]&&(_0x57bd0b[_0x44211d]=_0x312fda[_0x44211d]);}_0x2be85b[_0x180ee1(0x321,0x3c4,0x326,0x382)](saveSettingsDebounced);const _0x20ece7=_0x2be85b['zWhQq']($,_0x2be85b[_0x47d709(-0x105,-0x76,-0x87,-0x92)]);_0x20ece7[_0x47d709(-0x13d,-0x1a1,-0x1a6,-0x14f)]&&_0x2be85b[_0x180ee1(0x367,0x3bf,0x3ed,0x382)](loadOutfitPreset),_0x2be85b['zSkgh'](updateOutfitFormFields,_0x312fda),console[_0x180ee1(0x406,0x445,0x418,0x486)]('[outfitPro'+'mptModify]'+'\x20已更新服装预设\x20\x22'+_0x3dd09a+'\x22');}function updateOutfitFormFields(_0x29b195){function _0x91725d(_0x2c669d,_0x5bcb35,_0xff5b1e,_0x4762fd){return _0x4ee0(_0x5bcb35- -0x342,_0xff5b1e);}const _0x306884={'YfOjV':function(_0x2c7435,_0x1bfc4e){return _0x2c7435(_0x1bfc4e);},'zUIab':function(_0x53c583,_0x181d57){return _0x53c583===_0x181d57;},'xgdKf':_0x91725d(-0xf7,-0x15a,-0x177,-0x17d),'NBjpm':_0x4e12db(0x28,0xbc,0xda,0x11f),'aASYc':function(_0x5b5784,_0x359ca3){return _0x5b5784!==_0x359ca3;},'VljeH':_0x91725d(-0x179,-0x1b9,-0x170,-0x134),'QZIkr':_0x91725d(-0x1e1,-0x1a3,-0x13c,-0x1ac),'ouHfx':_0x4e12db(0x12b,0xae,0x142,0xe1),'pHKKu':'fullBodyBa'+'ck'};function _0x4e12db(_0x2fe626,_0x4f26b5,_0xacd283,_0x3d97d2){return _0x4ee0(_0x4f26b5- -0x90,_0xacd283);}const _0x364c22=[_0x91725d(-0x159,-0x171,-0x1c6,-0xf8),_0x91725d(-0x1c5,-0x155,-0x11f,-0x1d1),_0x306884[_0x4e12db(0x11b,0xd6,0xbc,0x124)],'upperBodyB'+'ack','fullBody',_0x306884[_0x91725d(-0x1e9,-0x162,-0x173,-0x16f)]];_0x364c22[_0x4e12db(0x13f,0x149,0x1b2,0x10f)](_0xcc64dd=>{function _0x238993(_0x4bbbc0,_0x428483,_0x412736,_0x51cd43){return _0x91725d(_0x4bbbc0-0x1f,_0x4bbbc0-0x107,_0x412736,_0x51cd43-0x1d3);}function _0x5d9f56(_0x4afb32,_0x384c74,_0x51a1eb,_0x1559a6){return _0x4e12db(_0x4afb32-0xe2,_0x4afb32- -0x17c,_0x1559a6,_0x1559a6-0x19b);}if(_0x29b195[_0xcc64dd]){if(_0x306884[_0x5d9f56(-0xe1,-0x175,-0xd3,-0xec)](_0x306884[_0x238993(-0xf4,-0xda,-0xd4,-0x157)],_0x306884[_0x238993(-0x171,-0x1ba,-0x19a,-0x1ad)]))_0x306884[_0x5d9f56(-0x128,-0x1b6,-0x178,-0xec)](_0x3e6714,_0x104a48[_0x238993(-0xd6,-0xd1,-0xaf,-0xc9)]);else{const _0x4e5ea2=document[_0x5d9f56(-0x8d,-0xa2,-0x7a,-0xc7)+_0x238993(-0x134,-0x1bf,-0xed,-0x1ab)](_0x5d9f56(-0x5d,0x1f,-0xb6,0x23)+_0xcc64dd);if(_0x4e5ea2){if(_0x306884[_0x5d9f56(-0x101,-0x104,-0x9e,-0xee)](_0x5d9f56(-0x83,-0x5e,-0xc8,-0xb0),_0x306884['VljeH']))return _0x509d7f[_0x238993(-0x115,-0x156,-0xf9,-0x94)]();else _0x4e5ea2[_0x238993(-0xd7,-0x77,-0xad,-0x14a)]=_0x29b195[_0xcc64dd],_0x306884[_0x238993(-0x157,-0x157,-0x11b,-0x162)]($,_0x4e5ea2)[_0x5d9f56(-0xa4,-0xee,-0x67,-0xbe)](_0x306884[_0x5d9f56(-0x85,-0xa7,-0x9b,-0xc6)]);}}}});}