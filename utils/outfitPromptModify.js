(function(_0xba72d,_0x428220){function _0x2ebec0(_0x5a106e,_0x14847a,_0x3c0d32,_0x4f6261){return _0x209c(_0x4f6261-0x8a,_0x5a106e);}const _0x508256=_0xba72d();function _0x4a99d8(_0xdf5498,_0x5c2b62,_0x47119c,_0x2020c1){return _0x209c(_0x5c2b62-0x314,_0x47119c);}while(!![]){try{const _0x5e9f72=-parseInt(_0x2ebec0(0x1b1,0x219,0x1e5,0x216))/(0x1cb0+-0xe17*0x2+-0x81)+-parseInt(_0x2ebec0(0x23a,0x1f0,0x1a3,0x219))/(0x53f+0x2*-0xb99+-0x11f5*-0x1)+parseInt(_0x4a99d8(0x4ed,0x526,0x570,0x4bb))/(0xc*-0x42+-0x1d39+0x2054)*(parseInt(_0x4a99d8(0x3f4,0x453,0x476,0x3e4))/(-0x3*0x48f+-0x251c+0x121*0x2d))+parseInt(_0x2ebec0(0x28b,0x267,0x224,0x26b))/(-0x118d*-0x2+-0x15a*-0x1+-0x246f)+-parseInt(_0x4a99d8(0x593,0x554,0x5c2,0x4d4))/(-0x1a*0xf3+0x2276*0x1+-0x9c2)+-parseInt(_0x2ebec0(0x257,0x1de,0x2f2,0x270))/(-0xa69+0x4*0x7c3+-0x149c)+parseInt(_0x2ebec0(0x246,0x2a0,0x2a2,0x279))/(-0x1*-0xf02+-0xd1f+-0x1db);if(_0x5e9f72===_0x428220)break;else _0x508256['push'](_0x508256['shift']());}catch(_0xf2e1ac){_0x508256['push'](_0x508256['shift']());}}}(_0x4208,0xb*-0x1517+0x13d*-0x9e1+0x15c2f4));const _0x59a6d2=(function(){const _0x4c0354={};_0x4c0354['XFCLB']=function(_0x382a66,_0x221fb5){return _0x382a66!==_0x221fb5;};const _0xdafa3a=_0x4c0354;let _0x594510=!![];return function(_0x2bcd36,_0x13ecdf){const _0x46609c={'mZepj':function(_0x2507a0,_0x122724){function _0x4733e1(_0x47a576,_0x4edc92,_0x5f1fda,_0x101917){return _0x209c(_0x5f1fda-0x25c,_0x4edc92);}return _0xdafa3a[_0x4733e1(0x467,0x3ae,0x3e6,0x3f1)](_0x2507a0,_0x122724);},'BYhey':_0x400e7f(0x541,0x5b0,0x4f3,0x570)},_0x5f57ef=_0x594510?function(){function _0x2a1024(_0x51441a,_0x2cc89b,_0x1466f0,_0x6f5bb7){return _0x400e7f(_0x1466f0,_0x2cc89b-0x36,_0x1466f0-0x2c,_0x51441a- -0x23d);}function _0x557e55(_0x175973,_0x57671a,_0x45d729,_0x1e97dc){return _0x400e7f(_0x57671a,_0x57671a-0x14e,_0x45d729-0x35,_0x175973- -0x3c0);}if(_0x13ecdf){if(_0x46609c[_0x2a1024(0x359,0x2f4,0x314,0x3ac)](_0x46609c[_0x557e55(0x265,0x2d3,0x253,0x271)],'LjmqX')){const _0x52cbbf=_0x13ecdf[_0x2a1024(0x2f3,0x36e,0x2fc,0x2b6)](_0x2bcd36,arguments);return _0x13ecdf=null,_0x52cbbf;}else _0x34720c[_0x2a1024(0x30c,0x31d,0x347,0x36a)][_0x2a1024(0x3bf,0x360,0x346,0x410)](_0x178c26);}}:function(){};function _0x400e7f(_0x19ed28,_0x3fe259,_0x26be8b,_0x4d21e9){return _0x209c(_0x4d21e9-0x3df,_0x19ed28);}return _0x594510=![],_0x5f57ef;};}()),_0x2e56cb=_0x59a6d2(this,function(){const _0x5f7d6f={};function _0x31bd19(_0xafda23,_0x1e4aac,_0x256d62,_0x1f68bf){return _0x209c(_0x1f68bf-0x219,_0x256d62);}_0x5f7d6f[_0x5d2018(0x466,0x42b,0x41f,0x3bd)]=_0x31bd19(0x457,0x450,0x39f,0x41a)+'+$';const _0xdaad01=_0x5f7d6f;function _0x5d2018(_0x493c5b,_0x155e66,_0x4bb73a,_0x38ab47){return _0x209c(_0x4bb73a-0x1d2,_0x493c5b);}return _0x2e56cb[_0x5d2018(0x385,0x2e4,0x352,0x33b)]()[_0x5d2018(0x360,0x3f7,0x3e0,0x3f4)](_0xdaad01[_0x31bd19(0x4a9,0x449,0x3d6,0x466)])[_0x5d2018(0x319,0x3a6,0x352,0x2c8)]()[_0x5d2018(0x38a,0x3e8,0x3e9,0x365)+'r'](_0x2e56cb)[_0x31bd19(0x436,0x3cb,0x49a,0x427)](_0xdaad01[_0x31bd19(0x4aa,0x48b,0x406,0x466)]);});function _0x2e3005(_0x5a9f03,_0x1f6cb5,_0x524817,_0x51c6e6){return _0x209c(_0x51c6e6-0x2ad,_0x524817);}_0x2e56cb();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../script.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{loadOutfitPreset}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0x27fb1b,_0x53ce14,_0x4be36c,_0x5d9aea){const _0x2c772d={'mmyPb':_0x19e3d(0x1d7,0x168,0x18c,0x23c)+'mptModify]'+'\x20Error:','NTKyC':function(_0x1843b5,_0x2cc7b7,_0x37c09c,_0x4a8d0e,_0x5e493a){return _0x1843b5(_0x2cc7b7,_0x37c09c,_0x4a8d0e,_0x5e493a);},'rgPiK':function(_0x3ea250,_0x3643ab){return _0x3ea250===_0x3643ab;},'CmYeY':'string','CMOZu':function(_0x3b89d1,_0x56b0bc){return _0x3b89d1===_0x56b0bc;},'NpfQt':'QQKpX','wMxRs':_0x19e3d(0x1e0,0x151,0x23a,0x1fc)};if(_0x2c772d[_0x19e3d(0x125,0xf3,0x15d,0x1b7)](typeof _0x27fb1b,_0x2c772d[_0x19e3d(0xf8,0x15e,0xbb,0x9c)]))return _0x4be36c&&_0x27fb1b[_0x19e3d(0x114,0xe1,0x10c,0x178)](_0x53ce14)&&(_0x5d9aea&&(_0x2c772d[_0x303268(0x520,0x436,0x4c0,0x488)](_0x303268(0x517,0x540,0x4ad,0x52b),_0x2c772d['NpfQt'])?(_0x4c9c0f[_0x303268(0x37e,0x3dc,0x3ec,0x365)](_0x2c772d[_0x19e3d(0x15d,0x105,0x129,0x181)],_0x2ae994),_0x448b39['error'](_0x19e3d(0x160,0x1b4,0x1cf,0xe4)+'\x20'+_0x3d236b[_0x303268(0x3c1,0x435,0x418,0x481)])):_0x5d9aea[_0x303268(0x3e4,0x34c,0x3b6,0x442)](_0x53ce14))),_0x27fb1b[_0x303268(0x379,0x354,0x3d9,0x412)](_0x53ce14,_0x4be36c);if(Array['isArray'](_0x27fb1b))return _0x27fb1b[_0x19e3d(0x179,0x145,0x207,0x1b6)](_0x421e11=>replacePlaceholder(_0x421e11,_0x53ce14,_0x4be36c,_0x5d9aea));function _0x19e3d(_0x403961,_0x468722,_0xc13fc,_0x45e1d5){return _0x209c(_0x403961- -0x5d,_0x45e1d5);}if(_0x27fb1b&&_0x2c772d['rgPiK'](typeof _0x27fb1b,_0x19e3d(0x128,0x144,0x176,0xcb))){if(_0x2c772d[_0x303268(0x531,0x4c4,0x49d,0x425)]!==_0x303268(0x448,0x4ee,0x4b3,0x4a7)){const _0x11f6ec={};for(const _0xd26a27 in _0x1e220e){_0x11f6ec[_0xd26a27]=_0x2c772d[_0x303268(0x3ae,0x3ad,0x3be,0x3aa)](_0x53666d,_0x37cd97[_0xd26a27],_0x2537f2,_0x2d0868,_0x51aa96);}return _0x11f6ec;}else{const _0x468915={};for(const _0x35650c in _0x27fb1b){_0x468915[_0x35650c]=replacePlaceholder(_0x27fb1b[_0x35650c],_0x53ce14,_0x4be36c,_0x5d9aea);}return _0x468915;}}function _0x303268(_0x5c3801,_0x489104,_0x6d261,_0x39b03b){return _0x209c(_0x6d261-0x276,_0x5c3801);}return _0x27fb1b;}function attachImagesToMessage(_0x9a0e47,_0x1c0254,_0x288463,_0x3a1873=_0x2e3005(0x557,0x4f0,0x526,0x4d8)){const _0x22e337={};_0x22e337['CuJaH']=function(_0x2822f6,_0x168b2f){return _0x2822f6===_0x168b2f;},_0x22e337[_0x30a6df(0x1c7,0x22c,0x1aa,0x1e5)]=_0x30a6df(0x7c,0x143,0x100,0x18f),_0x22e337[_0x5d9af2(0x5af,0x5b9,0x63a,0x63b)]=function(_0x1f02ed,_0x15aae0){return _0x1f02ed+_0x15aae0;},_0x22e337[_0x5d9af2(0x601,0x599,0x60a,0x5da)]=_0x30a6df(0x158,0xf0,0xeb,0xc1),_0x22e337[_0x30a6df(0x124,0x19e,0x183,0x14c)]=_0x30a6df(0x75,0xdf,0xcb,0x66),_0x22e337[_0x5d9af2(0x586,0x551,0x525,0x511)]=_0x30a6df(0x1e1,0x173,0x196,0x211),_0x22e337[_0x30a6df(0x14e,0x16f,0x10f,0x10f)]=_0x5d9af2(0x611,0x57d,0x5ee,0x673),_0x22e337['zsORM']=function(_0x5478e9,_0x5590c7){return _0x5478e9===_0x5590c7;},_0x22e337[_0x5d9af2(0x553,0x5c4,0x5bb,0x646)]=_0x5d9af2(0x4f9,0x5ce,0x551,0x566),_0x22e337[_0x30a6df(0x166,0x1ec,0x1a7,0x1bd)]=function(_0x200c00,_0x4d75ba){return _0x200c00>=_0x4d75ba;},_0x22e337[_0x5d9af2(0x54a,0x60e,0x5d5,0x54b)]=_0x30a6df(0x1d7,0x1b1,0x19a,0x213),_0x22e337['qYqDB']='CdfUP',_0x22e337[_0x5d9af2(0x5e7,0x5e2,0x5d4,0x5aa)]=function(_0x3b9dcd,_0x3e9c44){return _0x3b9dcd!==_0x3e9c44;},_0x22e337['wxdCW']=_0x5d9af2(0x5ae,0x537,0x544,0x552);const _0x4ca3ee=_0x22e337;if(!_0x288463||_0x288463[_0x30a6df(0x146,0xe2,0x148,0x1a0)]===-0x9bb+0x1*0x267b+-0x1cc0||_0x1c0254<-0xe52+0x7*-0x44b+0x2c5f||_0x4ca3ee[_0x5d9af2(0x585,0x694,0x610,0x661)](_0x1c0254,_0x9a0e47[_0x5d9af2(0x5b7,0x643,0x5b1,0x614)]))return _0x4ca3ee[_0x30a6df(0x19e,0x19b,0x16c,0x14a)]===_0x4ca3ee[_0x30a6df(0x15a,0x125,0x191,0x184)]?(_0xaa7733&&_0x125152[_0x30a6df(0x12b,0x164,0xec,0x115)](_0x17aabd)&&(_0x1e716d&&_0x3b01e5[_0x30a6df(0x110,0xa3,0xbb,0xcf)](_0x363a36)),_0x576081[_0x30a6df(0x16b,0x81,0xde,0x126)](_0x5933b1,_0x429767)):_0x9a0e47;const _0x2aba69=[..._0x9a0e47],_0x304b62=_0x2aba69[_0x1c0254],_0x2c5a49=[];function _0x5d9af2(_0x270d6d,_0x39d537,_0x56a798,_0x16aff8){return _0x2e3005(_0x270d6d-0xc3,_0x39d537-0x153,_0x39d537,_0x56a798-0x137);}if(_0x4ca3ee[_0x5d9af2(0x504,0x568,0x58a,0x57c)](typeof _0x304b62[_0x5d9af2(0x598,0x517,0x51a,0x543)],'string')){const _0x3de30b={};_0x3de30b['type']=_0x4ca3ee[_0x30a6df(0x17f,0x19e,0x1a1,0x1ed)],_0x3de30b['text']=_0x304b62[_0x30a6df(0x5f,0xa7,0xb1,0x30)],_0x2c5a49[_0x5d9af2(0x5b2,0x694,0x601,0x5d6)](_0x3de30b);}else Array['isArray'](_0x304b62[_0x5d9af2(0x57b,0x56e,0x51a,0x58f)])&&_0x2c5a49[_0x5d9af2(0x5ae,0x602,0x601,0x5ab)](..._0x304b62['content']);if(_0x288463[_0x30a6df(0x159,0x1ba,0x148,0x12e)]>0x1d16+-0x24e8+0x7d2){if(_0x4ca3ee[_0x30a6df(0x1b4,0x110,0x16b,0x186)](_0x4ca3ee[_0x30a6df(0x16a,0xc3,0xd7,0x88)],_0x4ca3ee[_0x30a6df(0x7b,0x98,0xd7,0xe8)])){const _0x4464bf=typeof _0x4259c6===_0x30a6df(0x139,0x161,0x185,0x119)?_0x51d701:_0xd7202[_0x5d9af2(0x676,0x56f,0x5f4,0x597)],_0x29a3f9=_0x4ca3ee[_0x5d9af2(0x5c1,0x60b,0x57c,0x59a)](typeof _0x428a9f,_0x4ca3ee[_0x5d9af2(0x5b2,0x61a,0x613,0x5de)])&&_0x59b269[_0x5d9af2(0x642,0x648,0x635,0x683)]?_0x4a0999['name']:''+_0x3f4571+_0x4ca3ee[_0x5d9af2(0x61d,0x6a7,0x63a,0x695)](_0xa04032,0x1ec1+0x29*-0x1+-0x1e97),_0x25d7ad={};_0x25d7ad['type']=_0x4ca3ee[_0x5d9af2(0x5d4,0x5ce,0x60a,0x5b4)],_0x25d7ad[_0x30a6df(0xe2,0xc6,0xeb,0x61)]='['+_0x29a3f9+']',_0x4471b5[_0x30a6df(0x1e9,0x1ee,0x198,0x1e4)](_0x25d7ad);let _0x3dba80=_0x4464bf;!_0x4464bf[_0x30a6df(0x23a,0x15f,0x1c9,0x1b6)]('data:')&&(_0x3dba80=_0x5d9af2(0x577,0x5a2,0x5ad,0x62f)+_0x5d9af2(0x4c3,0x535,0x52e,0x5bf)+'4,'+_0x4464bf);const _0x14caec={};_0x14caec['type']=_0x4ca3ee['AigDS'],_0x14caec[_0x30a6df(0x139,0x130,0xcb,0x7b)]={},_0x14caec[_0x30a6df(0x139,0x130,0xcb,0x7b)][_0x30a6df(0x162,0x220,0x194,0x140)]=_0x3dba80,_0x14caec[_0x30a6df(0x139,0x130,0xcb,0x7b)]['detail']=_0x4ca3ee[_0x30a6df(0x2b,0x125,0xbc,0xe7)],_0x25be96[_0x5d9af2(0x575,0x5d0,0x601,0x620)](_0x14caec);}else{const _0x455200={};_0x455200[_0x5d9af2(0x5dd,0x578,0x5ed,0x631)]=_0x4ca3ee[_0x5d9af2(0x5e8,0x57c,0x60a,0x67a)],_0x455200[_0x5d9af2(0x4e7,0x525,0x554,0x508)]=_0x30a6df(0xa0,0x184,0x127,0x15c)+_0x288463[_0x30a6df(0xd4,0x101,0x148,0x169)]+'张'+_0x3a1873+']',_0x2c5a49[_0x5d9af2(0x5db,0x5be,0x601,0x5e6)](_0x455200);}}_0x288463['forEach']((_0x387fcf,_0x455eb9)=>{const _0x5bea44=typeof _0x387fcf===_0x4ca3ee['AJJjZ']?_0x387fcf:_0x387fcf[_0x4fc4aa(0x3c2,0x373,0x441,0x3a3)],_0x42f606=_0x4ca3ee[_0x4fc4aa(0x358,0x370,0x308,0x303)](typeof _0x387fcf,_0x4fc4aa(0x337,0x2b5,0x2c8,0x341))&&_0x387fcf['name']?_0x387fcf[_0x4fc4aa(0x403,0x427,0x406,0x47d)]:''+_0x3a1873+_0x4ca3ee['HFxtc'](_0x455eb9,0x1*0x13d5+-0x11*-0x15+-0x1539),_0x2f3fe0={};_0x2f3fe0[_0x317f1b(0x3f1,0x3ed,0x496,0x463)]='text',_0x2f3fe0['text']='['+_0x42f606+']',_0x2c5a49[_0x4fc4aa(0x3cf,0x449,0x38f,0x377)](_0x2f3fe0);let _0x2fe09c=_0x5bea44;!_0x5bea44[_0x317f1b(0x49d,0x44f,0x427,0x4a8)](_0x4ca3ee[_0x4fc4aa(0x389,0x38f,0x3b4,0x33b)])&&(_0x2fe09c=_0x4fc4aa(0x37b,0x34f,0x327,0x330)+_0x317f1b(0x40c,0x355,0x3dc,0x3a4)+'4,'+_0x5bea44);const _0x46d781={};function _0x4fc4aa(_0x2de181,_0x2bb4f0,_0x6cc63a,_0x4cac90){return _0x30a6df(_0x2de181-0x85,_0x6cc63a,_0x2de181-0x237,_0x4cac90-0x1eb);}function _0x317f1b(_0x5413b5,_0x49d4d1,_0x2939ee,_0x10b10e){return _0x5d9af2(_0x5413b5-0x171,_0x2939ee,_0x10b10e- -0x18a,_0x10b10e-0xa6);}_0x46d781[_0x317f1b(0x47a,0x4a7,0x3ec,0x473)]=_0x2fe09c,_0x46d781[_0x317f1b(0x410,0x4ba,0x48b,0x438)]=_0x4fc4aa(0x3cd,0x3a1,0x394,0x3d7);const _0x8296f={};_0x8296f[_0x317f1b(0x443,0x44f,0x454,0x463)]=_0x4ca3ee['AigDS'],_0x8296f['image_url']=_0x46d781,_0x2c5a49[_0x4fc4aa(0x3cf,0x416,0x41e,0x34f)](_0x8296f);});const _0x226779={..._0x304b62};_0x226779[_0x5d9af2(0x4e0,0x538,0x51a,0x52e)]=_0x2c5a49,_0x2aba69[_0x1c0254]=_0x226779;function _0x30a6df(_0x4ef408,_0x2aff6a,_0x360641,_0x210381){return _0x2e3005(_0x4ef408-0x13b,_0x2aff6a-0x2c,_0x2aff6a,_0x360641- -0x332);}return _0x2aba69;}function _0x209c(_0x56469a,_0x5ab1db){_0x56469a=_0x56469a-(-0x1*-0x2011+0xd*0x10f+-0x2ca5);const _0x4ade4e=_0x4208();let _0x2d4fd7=_0x4ade4e[_0x56469a];if(_0x209c['kgYlVD']===undefined){var _0x3ff787=function(_0x4da902){const _0x1001b7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x425486='',_0x114cc8='',_0x2b636b=_0x425486+_0x3ff787;for(let _0x32152f=-0x1368+0x1*-0x263f+0x39a7,_0x4fe6cf,_0x2dd470,_0x4259c6=-0x166*-0x1b+0x61c+0x1*-0x2bde;_0x2dd470=_0x4da902['charAt'](_0x4259c6++);~_0x2dd470&&(_0x4fe6cf=_0x32152f%(-0x2b+0x1*-0x1b9d+0x1*0x1bcc)?_0x4fe6cf*(0x1b*0x2c+0x646+-0xaaa)+_0x2dd470:_0x2dd470,_0x32152f++%(0x515*0x2+-0x2030+0x160a))?_0x425486+=_0x2b636b['charCodeAt'](_0x4259c6+(-0xd1d+0x1be9+-0xec2))-(0xc5b+0x293*0x5+0x68*-0x3e)!==-0x13a*0x4+0x25*-0x55+-0x5bb*-0x3?String['fromCharCode'](0x1119*0x2+0xc7*-0x15+-0x120*0xf&_0x4fe6cf>>(-(-0x1810+-0x25dc+0x3dee*0x1)*_0x32152f&-0x2281+-0x319*-0x5+0x1*0x130a)):_0x32152f:-0x1e3f+0x8*-0xd6+0x24ef){_0x2dd470=_0x1001b7['indexOf'](_0x2dd470);}for(let _0x51d701=-0x1da3+-0x1f2c+0x3ccf,_0xd7202=_0x425486['length'];_0x51d701<_0xd7202;_0x51d701++){_0x114cc8+='%'+('00'+_0x425486['charCodeAt'](_0x51d701)['toString'](0x747*-0x4+0x2566+-0x51*0x1a))['slice'](-(0x1d9*-0x13+-0x23c*-0xe+0x3d5));}return decodeURIComponent(_0x114cc8);};_0x209c['qvTYBw']=_0x3ff787,_0x209c['MYcIgz']={},_0x209c['kgYlVD']=!![];}const _0x22e812=_0x4ade4e[0x19d3+0xb7b+0x5*-0x776],_0x4da1d0=_0x56469a+_0x22e812,_0x5be8d4=_0x209c['MYcIgz'][_0x4da1d0];if(!_0x5be8d4){const _0x428a9f=function(_0x59b269){this['gcHQeo']=_0x59b269,this['pVDyEL']=[-0x19*-0x8d+-0x1f34+0xf8*0x12,-0x2a7*0xe+-0xe62+0x1c*0x1d7,0x1d42+0x6a6+0x3*-0xbf8],this['ogeEcY']=function(){return'newState';},this['ZfAQCN']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['MrzSQW']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x428a9f['prototype']['KPFLMw']=function(){const _0x4a0999=new RegExp(this['ZfAQCN']+this['MrzSQW']),_0x3f4571=_0x4a0999['test'](this['ogeEcY']['toString']())?--this['pVDyEL'][0x4fc+0x2261+-0x275c]:--this['pVDyEL'][-0xbcb+-0x19*-0x7b+-0x7*0x8];return this['eAhOnG'](_0x3f4571);},_0x428a9f['prototype']['eAhOnG']=function(_0xa04032){if(!Boolean(~_0xa04032))return _0xa04032;return this['vdluTy'](this['gcHQeo']);},_0x428a9f['prototype']['vdluTy']=function(_0x4471b5){for(let _0x25be96=0x2bf*-0xc+-0x1*-0x6e0+0x1a14,_0x5d9f43=this['pVDyEL']['length'];_0x25be96<_0x5d9f43;_0x25be96++){this['pVDyEL']['push'](Math['round'](Math['random']())),_0x5d9f43=this['pVDyEL']['length'];}return _0x4471b5(this['pVDyEL'][0x11*-0x15b+-0xa*0x151+0xd*0x2c9]);},new _0x428a9f(_0x209c)['KPFLMw'](),_0x2d4fd7=_0x209c['qvTYBw'](_0x2d4fd7),_0x209c['MYcIgz'][_0x4da1d0]=_0x2d4fd7;}else _0x2d4fd7=_0x5be8d4;return _0x2d4fd7;}function findMessageIndexWithPlaceholder(_0x2ea425,_0x316a33){function _0x4faa68(_0xdf7440,_0x3da627,_0x1c9e08,_0x176c4a){return _0x2e3005(_0xdf7440-0x9a,_0x3da627-0xfc,_0x3da627,_0x176c4a- -0x85);}const _0x139347={'BufCh':function(_0x57a3e6,_0x368e7b,_0x4c4037,_0x1792e1,_0x49a0d9){return _0x57a3e6(_0x368e7b,_0x4c4037,_0x1792e1,_0x49a0d9);},'zPzKa':_0x4faa68(0x45c,0x3e2,0x48a,0x453),'iHomp':'[outfitPro'+_0x4faa68(0x318,0x378,0x2f7,0x35f)+_0x2131f4(0x467,0x4d3,0x4d0,0x50b),'cVqIi':_0x2131f4(0x3fb,0x42a,0x46e,0x4cd)+_0x2131f4(0x411,0x3e9,0x438,0x40f)+_0x4faa68(0x3f9,0x45e,0x461,0x43b),'XHjwg':function(_0x383167,_0x1ab25e){return _0x383167<_0x1ab25e;},'nceGe':function(_0x45ff29,_0x4c3e7a){return _0x45ff29===_0x4c3e7a;},'xbdQc':'bvPDU','kgRjX':_0x2131f4(0x432,0x4d2,0x49b,0x4a9),'ODJOW':_0x4faa68(0x46d,0x44b,0x399,0x408),'PnYto':function(_0x10dc4a,_0x63367a){return _0x10dc4a===_0x63367a;},'MIHeY':_0x4faa68(0x3da,0x3e8,0x468,0x428),'Titeq':_0x4faa68(0x446,0x398,0x3de,0x3e4),'VVofw':function(_0x46808a,_0x15e988){return _0x46808a===_0x15e988;},'YMmGy':_0x2131f4(0x465,0x392,0x401,0x430)};for(let _0x545412=0x6a3+0x187*-0x2+-0x395;_0x139347[_0x2131f4(0x472,0x3f0,0x43f,0x3c8)](_0x545412,_0x2ea425['length']);_0x545412++){if(_0x139347['nceGe'](_0x139347[_0x4faa68(0x3bb,0x37e,0x359,0x3e8)],_0x139347[_0x4faa68(0x371,0x38d,0x42d,0x3e8)])){const _0x141a0e=_0x2ea425[_0x545412];if(_0x139347[_0x4faa68(0x3fe,0x435,0x40b,0x3ed)](typeof _0x141a0e[_0x2131f4(0x3ca,0x3f0,0x3c7,0x352)],_0x139347[_0x4faa68(0x406,0x3c1,0x4b1,0x442)])&&_0x141a0e[_0x2131f4(0x43f,0x413,0x3c7,0x332)]['includes'](_0x316a33))return _0x139347['nceGe'](_0x2131f4(0x496,0x4cf,0x471,0x4d9),_0x139347[_0x4faa68(0x3db,0x3bf,0x37a,0x3da)])?_0x545412:_0x245836;else{if(Array[_0x4faa68(0x368,0x2d7,0x336,0x361)](_0x141a0e['content']))for(const _0x229d09 of _0x141a0e[_0x2131f4(0x3bd,0x3e1,0x3c7,0x355)]){if(_0x139347[_0x2131f4(0x46b,0x43b,0x445,0x473)](_0x139347[_0x4faa68(0x425,0x38f,0x3a6,0x3cb)],_0x139347['Titeq']))return _0xe62507;else{if(_0x139347['VVofw'](_0x229d09['type'],_0x139347[_0x4faa68(0x38f,0x3b7,0x3d6,0x39c)])&&_0x229d09[_0x2131f4(0x3d6,0x3e5,0x401,0x429)][_0x2131f4(0x36e,0x46d,0x402,0x37e)](_0x316a33))return _0x545412;}}}}else _0xfa569a=_0x139347['BufCh'](_0x17023d,_0x4c8e30,_0x27aa66,_0x345f11,_0x139347[_0x2131f4(0x3e5,0x421,0x3f9,0x3cd)]),_0x5a9eb9[_0x2131f4(0x437,0x459,0x461,0x4e2)](_0x139347[_0x2131f4(0x45d,0x4a2,0x495,0x4ff)],_0x26a0fc[_0x4faa68(0x376,0x3fc,0x45f,0x3f5)],_0x139347['cVqIi'],_0x1ea5b9);}function _0x2131f4(_0x5dbe60,_0x3c21d5,_0x1ca2e3,_0x33607c){return _0x2e3005(_0x5dbe60-0x1e8,_0x3c21d5-0x142,_0x33607c,_0x1ca2e3- -0x1c);}return-(-0xd0c+-0xc11*-0x1+0xfc);}function generateRequestId(){const _0x2cc13d={};_0x2cc13d[_0x5b24a4(0x584,0x598,0x509,0x547)]=function(_0x3f9dbc,_0x405466){return _0x3f9dbc+_0x405466;};const _0x32c1ed=_0x2cc13d;function _0x5b24a4(_0x3a7e50,_0x41f095,_0x10efcb,_0x5bf007){return _0x2e3005(_0x3a7e50-0xb4,_0x41f095-0xf7,_0x3a7e50,_0x10efcb-0x3c);}if(crypto&&crypto['randomUUID'])return crypto[_0x5b24a4(0x551,0x57f,0x50b,0x4e8)]();function _0x4e0a63(_0x8ba26d,_0x3a60a1,_0x3c34bc,_0x587bfd){return _0x2e3005(_0x8ba26d-0xa,_0x3a60a1-0xaa,_0x3a60a1,_0x3c34bc-0x10c);}return _0x32c1ed[_0x5b24a4(0x57a,0x50e,0x509,0x4fd)](Date[_0x5b24a4(0x4d0,0x55d,0x4d1,0x488)]()[_0x4e0a63(0x5c3,0x4a9,0x539,0x5a1)](-0x333+-0x19e5+-0x1*-0x1d3c),Math['random']()[_0x5b24a4(0x411,0x4f4,0x469,0x4a7)](0xc7*-0x19+-0xff6+0x33b*0xb)['substring'](0xc7*0x1+-0x142d+0x1368));}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){const _0x5cb26f={'YZKHp':function(_0x488141,_0x236259){return _0x488141!==_0x236259;},'apvDZ':_0xef036e(0xcf,0x91,0x130,0xa1),'hSVoR':function(_0x3803cf,_0x308561){return _0x3803cf(_0x308561);},'bjPfj':_0x2a7b77(-0x20,-0x3b,-0x7a,0x10)+'时','oPmKc':'找不到指定的服装预设','JoaUD':function(_0x5669e7,_0x30d77a){return _0x5669e7===_0x30d77a;},'DkEEn':'iqLhb','dxtkF':_0xef036e(0xa9,0x77,0xe5,0x11d),'GDfmN':function(_0x4b8cda){return _0x4b8cda();},'YRHaB':function(_0xd94b96,_0x4a1bfb,_0x5d7cef){return _0xd94b96(_0x4a1bfb,_0x5d7cef);}};function _0x2a7b77(_0x4afe07,_0x11d57c,_0x4863a5,_0x1fa19e){return _0x2e3005(_0x4afe07-0x38,_0x11d57c-0xa6,_0x4863a5,_0x4afe07- -0x522);}function _0xef036e(_0x2b4831,_0xb0de47,_0x28733b,_0x245310){return _0x2e3005(_0x2b4831-0x73,_0xb0de47-0x6d,_0xb0de47,_0x2b4831- -0x3a4);}return new Promise((_0x1632cf,_0x47dda5)=>{function _0x68e711(_0x370fa9,_0x3d9ebc,_0x5edea7,_0x68f28){return _0x2a7b77(_0x68f28-0x38,_0x3d9ebc-0x11a,_0x370fa9,_0x68f28-0x7b);}const _0x39b5d8={'iBXhu':function(_0x1ed83e,_0x5d48cf){return _0x1ed83e!==_0x5d48cf;},'SZCkx':function(_0x56ae12,_0x187486){function _0x54c0f9(_0x52983a,_0x2f389b,_0x571ca0,_0x38b2d4){return _0x209c(_0x571ca0-0x1d2,_0x2f389b);}return _0x5cb26f[_0x54c0f9(0x327,0x3b7,0x3b6,0x3d0)](_0x56ae12,_0x187486);},'LHPzH':_0x5cb26f[_0x68e711(-0xeb,-0xd9,-0x117,-0xad)]};function _0x5f357b(_0x39e33b,_0x2959d7,_0x502faf,_0x1b6103){return _0x2a7b77(_0x39e33b-0x210,_0x2959d7-0x181,_0x2959d7,_0x1b6103-0x7c);}if(_0x5cb26f[_0x5f357b(0xfa,0x100,0x17a,0x142)](_0x5cb26f['DkEEn'],_0x5cb26f[_0x68e711(-0xa7,-0x37,-0x89,-0x6c)])){const _0x49a498={};_0x49a498[_0x5f357b(0x105,0x11b,0x169,0x85)]=[];const _0x3bccc7=_0x49a498;_0x1170c0=_0x310b7d['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x68e711(0x1a,0x17,0x43,0x1b)]();const _0xa881e8=/<服装>([\s\S]*?)<\/服装>/g;let _0x1e6f9b;while(_0x39b5d8[_0x5f357b(0x1d1,0x20e,0x1d4,0x231)](_0x1e6f9b=_0xa881e8[_0x5f357b(0x1bf,0x1a3,0x154,0x241)](_0x5cb585),null)){const _0x1c8a1b=_0x39b5d8[_0x68e711(-0xaa,-0x121,-0x9e,-0xf0)](_0x28314a,_0x1e6f9b[-0x4b*-0x1+0x1dbc+-0x1e06]),_0x5ecb34=_0x563a0d(_0x1c8a1b);_0x5ecb34&&_0x3bccc7[_0x5f357b(0x105,0x154,0x114,0x158)][_0x5f357b(0x1b8,0x156,0x217,0x221)](_0x5ecb34);}return _0x3bccc7;}else{const _0x117aa1=_0x5cb26f[_0x5f357b(0x146,0xd8,0x1c8,0x18c)](generateRequestId);console['log'](_0x68e711(-0x1c,-0x9a,-0x39,-0x9)+_0x68e711(-0x16e,-0x12f,-0x145,-0x106)+_0x5f357b(0x123,0xed,0x17f,0xd4)+'g\x20outfit\x20m'+_0x5f357b(0x11e,0x139,0x192,0x13d)+'pt\x20(ID:\x20'+_0x117aa1+')');const _0xf60ab6=_0x4301dc=>{if(_0x5cb26f['YZKHp'](_0x4301dc['id'],_0x117aa1))return;function _0x2c88b7(_0x5e2693,_0x15dcf5,_0x16a409,_0x5a008a){return _0x5f357b(_0x5a008a-0x394,_0x15dcf5,_0x16a409-0xe1,_0x5a008a-0x15a);}eventSource['removeList'+_0x56aa70(-0x46,-0x52,-0x10,0x16)](eventNames[_0x2c88b7(0x4b4,0x51d,0x541,0x508)+_0x56aa70(-0x4d,-0x92,-0x38,-0x8b)+_0x56aa70(-0x173,-0xee,-0x61,-0xb4)+_0x56aa70(-0xb3,-0xa0,-0x110,-0x1a)],_0xf60ab6);function _0x56aa70(_0x5ecc7c,_0x539c6e,_0x31758e,_0x1debcc){return _0x5f357b(_0x539c6e- -0x220,_0x31758e,_0x31758e-0xa0,_0x1debcc-0x1de);}_0x1632cf(_0x4301dc['prompt']);};eventSource['on'](eventNames['LLM_CHAR_M'+_0x68e711(-0x99,0x34,0x2c,-0x4a)+_0x68e711(-0xec,-0x114,-0x2b,-0xa6)+'PONSE'],_0xf60ab6);const _0x503279={};_0x503279['id']=_0x117aa1,eventSource[_0x5f357b(0x1c9,0x229,0x1f7,0x251)](eventNames[_0x5f357b(0x174,0x112,0x153,0x16d)+_0x68e711(-0xbf,-0x51,0x22,-0x4a)+_0x68e711(-0x14,-0xd7,-0x62,-0x9f)+_0x68e711(-0x144,-0x14a,-0xf6,-0x10a)],_0x503279),_0x5cb26f[_0x5f357b(0xfd,0x189,0xa9,0x79)](setTimeout,()=>{function _0x2d26f3(_0x50b5c4,_0x4e5f5b,_0x483466,_0x3354ce){return _0x68e711(_0x3354ce,_0x4e5f5b-0x49,_0x483466-0x105,_0x4e5f5b-0x515);}function _0x3a87a6(_0x2f4dfb,_0x28332b,_0x5a3115,_0xbdc0d8){return _0x68e711(_0x2f4dfb,_0x28332b-0x1be,_0x5a3115-0x138,_0xbdc0d8-0x10d);}if(_0x5cb26f[_0x2d26f3(0x3fc,0x45c,0x4a6,0x3da)]===_0x2d26f3(0x446,0x49e,0x40b,0x4a6))eventSource[_0x3a87a6(0xb0,0x108,0x60,0xec)+_0x3a87a6(0x11d,0x195,0x7e,0x103)](eventNames[_0x2d26f3(0x51a,0x4b1,0x4f5,0x4f6)+_0x3a87a6(0x4e,0xa9,0x82,0xc3)+'PROMPT_RES'+_0x2d26f3(0x462,0x4bd,0x436,0x4de)],_0xf60ab6),_0x5cb26f[_0x2d26f3(0x4bc,0x4bc,0x444,0x491)](_0x47dda5,new Error(_0x5cb26f[_0x2d26f3(0x4cd,0x4d0,0x4b1,0x4c3)]));else{_0x4d82ec[_0x3a87a6(-0x3b,0xc3,0x0,0x46)](_0x39b5d8[_0x3a87a6(-0x28,0x14,0x83,0x3b)]);return;}},-0x10*0x1c+0x54f*0x1+0x3d*0x95);}});}export function LLM_OUTFIT_MODIFY(_0x511fc1,_0xb51425={}){function _0x6b897d(_0x40a431,_0x4385cd,_0x4776a6,_0x1e2de4){return _0x2e3005(_0x40a431-0x21,_0x4385cd-0x7b,_0x4385cd,_0x1e2de4- -0x47a);}const _0x49a68a={'JocdR':function(_0x129c55,_0x19e94f){return _0x129c55!==_0x19e94f;},'PNpPf':function(_0xed56af,_0x5603e1){return _0xed56af===_0x5603e1;},'JHDqf':_0x6b897d(-0x10d,-0x2b,-0x2a,-0x79),'ZmTKf':function(_0xb7f63d,_0x5027af){return _0xb7f63d(_0x5027af);},'Lskbi':_0x6b897d(-0xa,-0xa3,-0xe6,-0x5a),'ugldj':_0x5054a6(-0x1a2,-0x150,-0x15c,-0x101),'bWldI':function(_0x495ddb,_0x6e247e){return _0x495ddb(_0x6e247e);},'AHXZN':'服装修改\x20LLM\x20请'+'求超时','NmBLN':function(_0x3121ad,_0x3673eb){return _0x3121ad!==_0x3673eb;},'BVKNy':function(_0x1a3e6d){return _0x1a3e6d();}};function _0x5054a6(_0x3c47e0,_0x44f73c,_0x195e5c,_0x541627){return _0x2e3005(_0x3c47e0-0xb6,_0x44f73c-0x167,_0x195e5c,_0x44f73c- -0x56d);}return new Promise((_0x1eb79b,_0x376b1d)=>{function _0x42b5be(_0x16a0b4,_0x11dd5f,_0x505a07,_0xc3a5f2){return _0x6b897d(_0x16a0b4-0x81,_0x11dd5f,_0x505a07-0x76,_0x16a0b4-0x40);}function _0x5e38a8(_0x5393b9,_0x1e6252,_0x1a0571,_0x4f45a0){return _0x5054a6(_0x5393b9-0x5d,_0x1a0571-0x2a3,_0x4f45a0,_0x4f45a0-0x107);}const _0x1de00f={'lsWNe':_0x49a68a[_0x42b5be(0x2c,-0x53,-0x30,-0x5c)],'oCluI':function(_0x28b335,_0x8e8c8b){function _0x3b6691(_0x13b084,_0x2f733c,_0xd52d42,_0x49d90a){return _0x42b5be(_0x49d90a-0x7e,_0x2f733c,_0xd52d42-0x149,_0x49d90a-0x16a);}return _0x49a68a[_0x3b6691(0xfc,0x9,0x96,0x90)](_0x28b335,_0x8e8c8b);},'vVhsV':_0x49a68a[_0x42b5be(-0x48,-0x94,-0xb4,-0xdc)]};if(_0x49a68a[_0x5e38a8(0x112,0x132,0x16c,0x136)](_0x5e38a8(0x158,0x14f,0x190,0x20d),_0x5e38a8(0x1e4,0xfc,0x190,0x1f2))){const _0x5b4998={};_0x5b4998['type']=_0x1de00f[_0x42b5be(0x4b,-0x19,0x93,-0x13)],_0x5b4998[_0x5e38a8(0x16f,0x168,0x153,0x17c)]=_0x42b5be(0x1f,-0xe,0x91,-0x11)+_0x3ff787['length']+'张'+_0x22e812+']',_0x2d4fd7[_0x42b5be(0x90,0x100,0xe,0x77)](_0x5b4998);}else{const _0x5653c4=_0x49a68a[_0x42b5be(0x65,0x56,0x80,0x5f)](generateRequestId),_0xb58b63=_0xb51425['timeoutMs']||-0x1*0xb875+0x10040+-0x1*-0xa295;console[_0x42b5be(0x43,0x50,0xad,0x98)](_0x5e38a8(0x1f7,0x222,0x217,0x1ff)+_0x42b5be(-0x56,-0xe2,-0x4d,-0xe8)+'\x20Executing'+_0x42b5be(0x80,0x21,0xce,0x2c)+_0x5e38a8(0x2a9,0x1e3,0x226,0x1a4)+_0x5e38a8(0x16f,0x1b2,0x1bd,0x1b9)+':\x20'+_0x5653c4+')');const _0x1238b9=_0x9e5b4c=>{if(_0x49a68a[_0x2c129c(-0x19c,-0x17a,-0x174,-0x1ff)](_0x9e5b4c['id'],_0x5653c4))return;function _0x54c46e(_0x58844e,_0x108451,_0x31a64f,_0xafb152){return _0x42b5be(_0x31a64f- -0x130,_0x108451,_0x31a64f-0x179,_0xafb152-0x1d3);}eventSource[_0x2c129c(-0x1a2,-0x161,-0x151,-0xcd)+'ener'](eventNames[_0x2c129c(-0x190,-0x1a4,-0x1e1,-0x1ba)+_0x54c46e(-0x15a,-0xbf,-0x10c,-0xba)+_0x2c129c(-0x196,-0x1c8,-0x20a,-0x1bf)],_0x1238b9);function _0x2c129c(_0x573e15,_0x541b43,_0x33fca1,_0x475490){return _0x42b5be(_0x541b43- -0x1f0,_0x475490,_0x33fca1-0x149,_0x475490-0x88);}if(_0x9e5b4c[_0x2c129c(-0x250,-0x1d8,-0x1c5,-0x19a)]){if(_0x49a68a[_0x54c46e(-0x98,0x0,-0x90,-0x11a)](_0x49a68a[_0x54c46e(-0x163,-0x188,-0xff,-0x6c)],_0x49a68a[_0x54c46e(-0x16a,-0x95,-0xff,-0x12c)]))_0x49a68a[_0x2c129c(-0x18e,-0x192,-0x138,-0x11f)](_0x1eb79b,_0x9e5b4c[_0x2c129c(-0x1bd,-0x1a1,-0x208,-0x11f)]);else{_0x1dfb95['error'](_0x2c129c(-0x1d5,-0x144,-0xce,-0xba));return;}}else _0x49a68a['ZmTKf'](_0x376b1d,new Error(_0x9e5b4c[_0x54c46e(-0x174,-0x102,-0xe1,-0x167)]||_0x49a68a['Lskbi']));};eventSource['on'](eventNames[_0x5e38a8(0x17d,0x1be,0x1bc,0x237)+'ODIFY_RESP'+_0x42b5be(0x28,-0x16,0x35,-0x3e)],_0x1238b9);const _0x42441d={};_0x42441d[_0x5e38a8(0x165,0x15a,0x15f,0x12b)]=_0x511fc1,_0x42441d['id']=_0x5653c4,eventSource[_0x42b5be(0xa1,0x47,0xd9,0x127)](eventNames[_0x5e38a8(0x231,0x142,0x1bc,0x197)+_0x5e38a8(0x1ab,0x196,0x176,0x191)+_0x42b5be(0x42,-0x35,0xca,0xb7)],_0x42441d),setTimeout(()=>{function _0x506218(_0x33d8af,_0x2f6613,_0x2e66c5,_0x22b6ef){return _0x42b5be(_0x22b6ef-0x63,_0x2f6613,_0x2e66c5-0x1f2,_0x22b6ef-0x175);}function _0x18b2bf(_0x29aa07,_0x26d473,_0xe2cddf,_0x421e1e){return _0x42b5be(_0x29aa07-0x125,_0x26d473,_0xe2cddf-0x16c,_0x421e1e-0x159);}eventSource[_0x18b2bf(0x1b4,0x185,0x1ca,0x19e)+'ener'](eventNames['LLM_CHAR_M'+_0x18b2bf(0x149,0x16a,0x115,0x1d0)+_0x506218(0x52,0x47,0xb4,0x8b)],_0x1238b9),_0x1de00f['oCluI'](_0x376b1d,new Error(_0x1de00f[_0x506218(0xdc,0x117,0x107,0x129)]));},_0xb58b63);}});}function preprocessTagContent(_0x5cf049){function _0x1dd016(_0x51906b,_0x3c3ce0,_0x1018d9,_0x266371){return _0x2e3005(_0x51906b-0x149,_0x3c3ce0-0xf1,_0x1018d9,_0x266371- -0x636);}function _0x3c3652(_0x5c340a,_0x32589e,_0x157a41,_0x4c30a0){return _0x2e3005(_0x5c340a-0xbf,_0x32589e-0x1e9,_0x157a41,_0x5c340a- -0x83);}let _0x57c041=_0x5cf049[_0x3c3652(0x47c,0x507,0x460,0x446)](/:/g,':')['replace'](/\(/g,'（')[_0x1dd016(-0x132,-0x1cb,-0x199,-0x137)](/\)/g,'）')['replace'](/,/g,',');return _0x57c041;}function parseOutfitData(_0x3c474b){const _0x1f4f39={};_0x1f4f39[_0x5acecd(-0x236,-0x1ed,-0x29d,-0x245)]=_0x4518ca(0x34e,0x36d,0x3be,0x2f6)+'+$',_0x1f4f39[_0x5acecd(-0x212,-0x259,-0x236,-0x263)]=_0x5acecd(-0x2ea,-0x2b0,-0x29c,-0x27f),_0x1f4f39[_0x5acecd(-0x29b,-0x303,-0x2aa,-0x28c)]='upperBodyB'+_0x5acecd(-0x29e,-0x1e6,-0x2e9,-0x271),_0x1f4f39[_0x5acecd(-0x2ac,-0x32b,-0x2f6,-0x2a5)]=_0x5acecd(-0x1fd,-0x23a,-0x1c2,-0x1f1),_0x1f4f39[_0x5acecd(-0x250,-0x169,-0x16b,-0x1c6)]=_0x5acecd(-0x26d,-0x2a9,-0x252,-0x288)+'ck',_0x1f4f39[_0x5acecd(-0x176,-0x23c,-0x1dc,-0x1ff)]=function(_0x5ddabc,_0x27db26){return _0x5ddabc+_0x27db26;},_0x1f4f39['wRUhE']=_0x4518ca(0x293,0x2d0,0x305,0x2be),_0x1f4f39[_0x4518ca(0x260,0x2d8,0x36c,0x300)]=function(_0x25ab42,_0x2c548e){return _0x25ab42&&_0x2c548e;};function _0x5acecd(_0x4ef30c,_0x8499d9,_0x13da08,_0x7d2eb9){return _0x2e3005(_0x4ef30c-0x1dd,_0x8499d9-0xdf,_0x8499d9,_0x7d2eb9- -0x687);}_0x1f4f39['XYmly']='[outfitPro'+'mptModify]'+_0x4518ca(0x3f8,0x365,0x308,0x30f);function _0x4518ca(_0x41a018,_0x349596,_0x3000b6,_0x45efd2){return _0x2e3005(_0x41a018-0x7b,_0x349596-0x2c,_0x45efd2,_0x349596- -0x141);}const _0x2935cf=_0x1f4f39,_0x32f994=_0x3c474b[_0x5acecd(-0x217,-0x19b,-0x1f4,-0x1dc)]('\x0a')['map'](_0x3f71f2=>_0x3f71f2[_0x4518ca(0x41c,0x3c4,0x343,0x429)]())[_0x5acecd(-0x2c7,-0x29c,-0x1d8,-0x232)](_0x229b7b=>_0x229b7b),_0x420069={};_0x420069[_0x4518ca(0x2d4,0x2c7,0x26f,0x286)]='',_0x420069[_0x4518ca(0x382,0x334,0x386,0x36d)]='',_0x420069[_0x4518ca(0x2d4,0x2bb,0x2f4,0x25a)]='',_0x420069[_0x5acecd(-0x1b2,-0x2a5,-0x219,-0x236)+_0x5acecd(-0x2cc,-0x2cd,-0x239,-0x271)]='',_0x420069['fullBody']='',_0x420069[_0x4518ca(0x281,0x2be,0x2c3,0x321)+'ck']='';const _0x1d33e9=_0x420069,_0x18544c={};_0x18544c[_0x5acecd(-0x17b,-0x1a9,-0x257,-0x20e)]=_0x2935cf[_0x4518ca(0x277,0x2e3,0x283,0x2bf)],_0x18544c[_0x4518ca(0x3cf,0x3ad,0x3f7,0x3e9)]=_0x5acecd(-0x29f,-0x1db,-0x23c,-0x212),_0x18544c[_0x4518ca(0x370,0x33e,0x391,0x2e3)]='upperBody',_0x18544c[_0x4518ca(0x360,0x2da,0x33b,0x28f)]=_0x2935cf[_0x4518ca(0x341,0x2ba,0x244,0x334)],_0x18544c[_0x4518ca(0x2b8,0x31f,0x2eb,0x2a7)]=_0x2935cf[_0x5acecd(-0x2c5,-0x2c8,-0x31b,-0x2a5)],_0x18544c[_0x4518ca(0x2f8,0x38d,0x328,0x323)]=_0x4518ca(0x34f,0x355,0x3e8,0x3aa),_0x18544c['下半身背面']=_0x2935cf[_0x5acecd(-0x1f9,-0x1c7,-0x251,-0x1c6)];const _0x125a91=_0x18544c;for(const _0x3e1210 of _0x32f994){const _0x4161b5=_0x3e1210[_0x4518ca(0x412,0x394,0x398,0x384)](':');if(_0x4161b5===-(-0x2*-0x745+0x1*0x89b+-0x1724))continue;const _0x34aa0a=_0x3e1210[_0x5acecd(-0x24e,-0x1e0,-0x24a,-0x1d3)](0x31e*0x1+-0x1da1+0x1a83,_0x4161b5)['trim'](),_0x4b285f=_0x3e1210[_0x5acecd(-0x19a,-0x1e0,-0x1a9,-0x1d3)](_0x2935cf[_0x4518ca(0x2e5,0x347,0x34d,0x3c8)](_0x4161b5,0x232*0xc+-0x2b*-0xa7+-0x3664))[_0x4518ca(0x3a6,0x3c4,0x3c5,0x3fa)]();if(_0x125a91[_0x34aa0a]){if(_0x2935cf['wRUhE']!==_0x4518ca(0x3c5,0x3a1,0x322,0x3f2))_0x1d33e9[_0x125a91[_0x34aa0a]]=_0x4b285f;else return _0x4fdc39[_0x5acecd(-0x1ea,-0x27e,-0x279,-0x25a)]()[_0x5acecd(-0x1fa,-0x1d1,-0x1e8,-0x1cc)](tHgCxW['ncPQa'])[_0x5acecd(-0x226,-0x1ca,-0x1d3,-0x25a)]()[_0x4518ca(0x30b,0x383,0x2fa,0x3ef)+'r'](_0x4194fe)[_0x5acecd(-0x1e9,-0x1ff,-0x1fa,-0x1cc)](tHgCxW[_0x4518ca(0x395,0x301,0x373,0x306)]);}else _0x2935cf[_0x4518ca(0x359,0x2d8,0x2e3,0x2f9)](_0x34aa0a,_0x4b285f)&&console['log'](_0x4518ca(0x432,0x3a0,0x406,0x41c)+_0x4518ca(0x245,0x2a3,0x216,0x273)+_0x5acecd(-0x237,-0x1af,-0x1eb,-0x231)+'\x22'+_0x34aa0a+'\x22');}if(!_0x1d33e9[_0x4518ca(0x25c,0x2c7,0x2ae,0x27c)])return null;return console[_0x4518ca(0x31b,0x33c,0x349,0x331)](_0x2935cf[_0x4518ca(0x2e3,0x2cd,0x26e,0x2e2)],_0x1d33e9),_0x1d33e9;}function extractOutfitTags(_0x27f306){const _0xaa244d={'YZhAw':function(_0xaad71,_0x419c85){return _0xaad71(_0x419c85);},'CDLXD':_0x57d89b(-0x20c,-0x1d2,-0x257,-0x15d),'egJqx':_0x1b51ca(-0x289,-0x223,-0x22c,-0x263),'wYbQJ':_0x57d89b(-0x27b,-0x207,-0x20f,-0x19d),'gccXh':_0x57d89b(-0x202,-0x280,-0x22a,-0x20b),'fUjef':_0x1b51ca(-0x266,-0x246,-0x21b,-0x21a)+_0x57d89b(-0x1f1,-0x266,-0x282,-0x272),'lEbCO':_0x1b51ca(-0x236,-0x2e1,-0x261,-0x26c)+'ck','QCVFw':function(_0x54966a,_0x49c138){return _0x54966a!==_0x49c138;},'diGCU':_0x1b51ca(-0x157,-0x131,-0x205,-0x1bf),'EvitJ':_0x1b51ca(-0x14b,-0x237,-0x1a1,-0x1d0)},_0x83286f={};_0x83286f[_0x1b51ca(-0x2b8,-0x1f9,-0x220,-0x254)]=[];const _0x231307=_0x83286f;function _0x57d89b(_0x14d46a,_0x2d1cde,_0x3f4e2e,_0x3908d8){return _0x2e3005(_0x14d46a-0x13,_0x2d1cde-0xcf,_0x14d46a,_0x2d1cde- -0x67c);}function _0x1b51ca(_0x203078,_0x24a3f9,_0x21cb84,_0x4aac65){return _0x2e3005(_0x203078-0x7f,_0x24a3f9-0x136,_0x203078,_0x4aac65- -0x66b);}_0x27f306=_0x27f306['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x57d89b(-0x13b,-0x177,-0x117,-0xfe)]();const _0xbc2a13=/<服装>([\s\S]*?)<\/服装>/g;let _0x43109b;while(_0xaa244d[_0x1b51ca(-0x223,-0x28f,-0x253,-0x241)](_0x43109b=_0xbc2a13[_0x57d89b(-0x11a,-0x1ab,-0x1b9,-0x1db)](_0x27f306),null)){if(_0xaa244d[_0x1b51ca(-0x241,-0x2aa,-0x1bd,-0x241)](_0xaa244d['diGCU'],_0xaa244d['EvitJ'])){const _0x581c2c=preprocessTagContent(_0x43109b[-0x1d5*-0x2+-0x1f49*-0x1+-0xe*0x27f]),_0x3e8d3a=parseOutfitData(_0x581c2c);_0x3e8d3a&&_0x231307[_0x1b51ca(-0x273,-0x280,-0x2da,-0x254)][_0x57d89b(-0x1ba,-0x1b2,-0x1c5,-0x167)](_0x3e8d3a);}else{const _0x586ec5={'SLhMy':function(_0x415079,_0xc100e4){return _0xaa244d['YZhAw'](_0x415079,_0xc100e4);},'PILYI':_0xaa244d[_0x1b51ca(-0x21e,-0x236,-0x21a,-0x275)]},_0x5cb25a=[_0xaa244d[_0x57d89b(-0x191,-0x1c0,-0x165,-0x1e6)],_0xaa244d[_0x1b51ca(-0x1f4,-0x20b,-0x1a2,-0x1ad)],_0xaa244d[_0x1b51ca(-0x1c7,-0x21b,-0x196,-0x18e)],_0xaa244d[_0x57d89b(-0x238,-0x21f,-0x22c,-0x203)],_0x57d89b(-0x1bc,-0x1e6,-0x1f7,-0x1fc),_0xaa244d[_0x1b51ca(-0x314,-0x24c,-0x1fa,-0x286)]];_0x5cb25a[_0x57d89b(-0x2a5,-0x232,-0x1ba,-0x1de)](_0x509568=>{function _0x5b4099(_0x2fb888,_0x174566,_0xb81c93,_0x5bf354){return _0x57d89b(_0xb81c93,_0x174566-0x69,_0xb81c93-0x1e0,_0x5bf354-0x143);}function _0xa1782f(_0x285766,_0x52aff9,_0x3e8d25,_0x374588){return _0x57d89b(_0x285766,_0x52aff9-0x6db,_0x3e8d25-0x77,_0x374588-0x1af);}if(_0x3e00b0[_0x509568]){const _0x209405=_0x4dc378[_0x5b4099(-0x16b,-0x1c5,-0x1bc,-0x247)+'ById'](_0x5b4099(-0x18e,-0x223,-0x1ca,-0x18f)+_0x509568);_0x209405&&(_0x209405[_0x5b4099(-0x26a,-0x1e0,-0x18a,-0x196)]=_0x112788[_0x509568],_0x586ec5[_0xa1782f(0x4dd,0x450,0x4a7,0x3eb)](_0x40232b,_0x209405)[_0xa1782f(0x4b6,0x506,0x486,0x4e3)](_0x586ec5[_0x5b4099(-0xe6,-0x124,-0x161,-0x146)]));}});}}return _0x231307;}function getCurrentOutfitPreset(){function _0x3ad923(_0x5d755e,_0x201ce5,_0x1858ae,_0x19c0cb){return _0x2e3005(_0x5d755e-0x159,_0x201ce5-0x88,_0x201ce5,_0x5d755e- -0x2b6);}const _0x4f486a=extension_settings[extensionName],_0x3963e6=_0x4f486a[_0x278d6e(0x4b8,0x49f,0x461,0x4e5)+_0x278d6e(0x56b,0x52a,0x591,0x502)];if(!_0x3963e6||!_0x4f486a[_0x3ad923(0x139,0x178,0x145,0xb8)+_0x3ad923(0x1c2,0x17d,0x1d6,0x1ea)][_0x3963e6])return null;const _0x1c2b46={};_0x1c2b46['id']=_0x3963e6,_0x1c2b46[_0x278d6e(0x544,0x573,0x4b3,0x5ce)]=_0x4f486a[_0x3ad923(0x139,0xff,0x14b,0x13d)+_0x3ad923(0x1c2,0x197,0x17e,0x246)][_0x3963e6];function _0x278d6e(_0x23dec1,_0xe9eb67,_0x5e88ac,_0x16ac94){return _0x2e3005(_0x23dec1-0xfb,_0xe9eb67-0x114,_0xe9eb67,_0x23dec1-0xc9);}return _0x1c2b46;}function buildOutfitText(_0x204422){const _0x1a4ad5={};_0x1a4ad5[_0x1c8c30(0x61,0xe0,-0xe,0xbd)]='<服装>\x0a',_0x1a4ad5[_0x1c8c30(-0x7,0x17,-0x8f,-0x22)]=_0x1c8c30(0x60,0xba,0xec,0xd4);const _0x1655ee=_0x1a4ad5,_0x1b71dd=_0x204422[_0x1c8c30(-0x3,0x2,-0x5f,0x7)];let _0xf21feb=_0x1655ee[_0x559b5a(0x31e,0x32a,0x31a,0x332)];_0xf21feb+=_0x1c8c30(-0x94,-0x7b,-0xdb,-0x3a)+(_0x1b71dd['nameCN']||'')+'\x0a',_0xf21feb+=_0x559b5a(0x264,0x2b0,0x293,0x239)+(_0x1b71dd[_0x559b5a(0x318,0x2c0,0x301,0x325)]||'')+'\x0a',_0xf21feb+=_0x1c8c30(-0x5c,-0x25,-0x3e,0x16)+(_0x1b71dd[_0x1c8c30(-0x82,-0x8b,-0xef,-0x84)]||'')+'\x0a',_0xf21feb+='上半身背面:\x20'+(_0x1b71dd[_0x1c8c30(-0x2d,-0x67,-0xb,-0x7d)+_0x559b5a(0x201,0x261,0x285,0x2d1)]||'')+'\x0a';function _0x559b5a(_0xbe8b75,_0x8847d7,_0x2fc882,_0x56521a){return _0x2e3005(_0xbe8b75-0x1ea,_0x8847d7-0x1da,_0x2fc882,_0x8847d7- -0x1b5);}_0xf21feb+=_0x559b5a(0x1f2,0x22c,0x1c5,0x1d8)+(_0x1b71dd[_0x559b5a(0x298,0x2e1,0x2b1,0x259)]||'')+'\x0a';function _0x1c8c30(_0xe950e3,_0x15cc3a,_0x33e2fc,_0x48f00d){return _0x2e3005(_0xe950e3-0xca,_0x15cc3a-0x169,_0x15cc3a,_0xe950e3- -0x47e);}return _0xf21feb+='下半身背面:\x20'+(_0x1b71dd[_0x1c8c30(-0x7f,-0x3c,-0xb9,-0xe6)+'ck']||'')+'\x0a',_0xf21feb+=_0x1655ee[_0x559b5a(0x2a6,0x2c2,0x329,0x2df)],_0xf21feb;}export async function handleOutfitPromptModify(_0x2b2a08,_0x9ee36d=[]){function _0x593f65(_0x35597a,_0x96ed93,_0x2c04be,_0x40b60a){return _0x2e3005(_0x35597a-0x21,_0x96ed93-0x1ee,_0x40b60a,_0x35597a- -0x187);}const _0x4ad2db={'Ncxkq':'[outfitPro'+'mptModify]'+_0x69a2f5(0x15c,0x13b,0x184,0x10f)+_0x69a2f5(0x1a4,0x136,0x128,0x169)+_0x69a2f5(0x123,0xd1,0x115,0x5e)+_0x593f65(0x350,0x385,0x30f,0x3d3)+'.','XRdtQ':function(_0x227084){return _0x227084();},'XXPHQ':function(_0x14944,_0x460802){return _0x14944===_0x460802;},'CAroh':_0x69a2f5(0x8e,0x62,-0x2c,0xa7),'yEkww':_0x593f65(0x262,0x1fd,0x1ce,0x1e2),'fNxin':_0x69a2f5(0xeb,0x11b,0x15b,0xd5)+_0x593f65(0x25d,0x2ae,0x284,0x2be)+'\x20Current\x20p'+'reset:','jaETC':function(_0x5ea3ff,_0x15b9d0){return _0x5ea3ff(_0x15b9d0);},'wZKjX':function(_0x4b173b,_0x5ea519){return _0x4b173b||_0x5ea519;},'wPuSh':function(_0x30ce25,_0x2e41cf,_0x4f80d0){return _0x30ce25(_0x2e41cf,_0x4f80d0);},'iYpye':_0x593f65(0x35a,0x3e9,0x307,0x344)+'mptModify]'+'\x20User\x20requ'+_0x593f65(0x36b,0x2e8,0x3fd,0x303)+_0x69a2f5(0x15e,0x125,0xed,0x12d)+'x:','qlJLJ':function(_0x4ef49c,_0x5b8947,_0x5c8694,_0x197681,_0x5afcaf){return _0x4ef49c(_0x5b8947,_0x5c8694,_0x197681,_0x5afcaf);},'yOLwu':_0x69a2f5(0x11,0x4c,-0x1a,0xcf),'lhNRw':_0x69a2f5(0x11c,0xca,0xde,0xb1),'nFJqE':_0x69a2f5(0x98,0x81,0x84,0x114),'epTtU':_0x593f65(0x2dc,0x2b8,0x26a,0x27c),'wuYDV':_0x593f65(0x283,0x25d,0x227,0x27c),'RJTDY':_0x69a2f5(0x53,0xbc,0x56,0x9d),'oVbBB':function(_0x2a220d,_0x1b7ae7,_0x3a1ab1,_0x284d6d,_0x444848){return _0x2a220d(_0x1b7ae7,_0x3a1ab1,_0x284d6d,_0x444848);},'kreiJ':function(_0x4d03b0,_0x2b0ee4,_0x578b4f,_0xe50ee7,_0x3bbd3e){return _0x4d03b0(_0x2b0ee4,_0x578b4f,_0xe50ee7,_0x3bbd3e);},'yTHru':'{{通用角色启用列表'+'}}','OcCYF':_0x593f65(0x35a,0x378,0x31a,0x36c)+_0x69a2f5(-0x65,0x1e,-0x69,0x6d)+_0x593f65(0x29f,0x26e,0x31e,0x253)+_0x593f65(0x279,0x2cb,0x283,0x1f0),'CBPjU':function(_0x4fda76,_0x27dfb4){return _0x4fda76>_0x27dfb4;},'rXuIb':function(_0x4e2637,_0x3ab827){return _0x4e2637>=_0x3ab827;},'DhYRP':'参考图片','cDgMH':_0x69a2f5(0xa5,0x11b,0x15b,0x182)+_0x593f65(0x25d,0x235,0x1c8,0x249)+_0x69a2f5(0x118,0x126,0xb8,0x16a),'WddXd':_0x593f65(0x303,0x2ba,0x2e1,0x2fc)+'message\x20at'+_0x69a2f5(0xae,0xfa,0x15f,0x179),'okicy':function(_0x33c290,_0x566177,_0x12f395){return _0x33c290(_0x566177,_0x12f395);},'rREfe':_0x69a2f5(0xad,0x11b,0x14d,0x12c)+_0x69a2f5(-0x2f,0x1e,0x97,0x41)+_0x593f65(0x2fa,0x2cb,0x33e,0x297)+'t:','BBeRG':function(_0x30e50c,_0x367758){return _0x30e50c!==_0x367758;},'WwaLP':_0x69a2f5(0xa0,0x45,0x4d,0x6),'zxzas':_0x69a2f5(0xe9,0x120,0x13f,0x91),'duWzk':function(_0x2817f0,_0x283a1c){return _0x2817f0(_0x283a1c);},'IrRZO':'ILYpv','eLhSL':_0x593f65(0x35a,0x35a,0x364,0x385)+_0x69a2f5(0x43,0x1e,0x2c,0x21)+'\x20Extracted'+'\x20data:','tRKxL':function(_0x33a2b6,_0x4f052d,_0xcd345c){return _0x33a2b6(_0x4f052d,_0xcd345c);},'ZiqQr':'服装提示词修改完成！','DaJcI':function(_0x43aa7f,_0x1645fe){return _0x43aa7f===_0x1645fe;},'STDOV':_0x593f65(0x31a,0x36b,0x39c,0x3a8)};console[_0x593f65(0x2f6,0x2fa,0x370,0x36f)](_0x4ad2db['Ncxkq']),toastr[_0x593f65(0x2e9,0x31a,0x31e,0x272)](_0x69a2f5(0x83,0xa8,0xaf,0xa7)+_0x69a2f5(-0x3d,0x32,0xb7,0xc2));function _0x69a2f5(_0x3e2915,_0x3dd6af,_0x243953,_0x24e640){return _0x2e3005(_0x3e2915-0x1dc,_0x3dd6af-0x36,_0x3e2915,_0x3dd6af- -0x3c6);}try{const _0x360336=extension_settings[extensionName],_0xee43fe=_0x4ad2db[_0x593f65(0x2e8,0x29b,0x298,0x2bd)](getCurrentOutfitPreset);if(!_0xee43fe){if(_0x4ad2db[_0x69a2f5(0x72,0x5f,0xdd,-0x2a)](_0x4ad2db[_0x69a2f5(0xc9,0x3f,0x84,0x34)],_0x4ad2db[_0x593f65(0x27e,0x2b9,0x25b,0x2b0)])){toastr[_0x69a2f5(-0x35,0x5d,0x9d,-0x35)](_0x4ad2db[_0x69a2f5(-0x10,0x17,0x14,0x9c)]);return;}else return _0x1147d8[_0x69a2f5(0xec,0xbd,0x2a,0xf4)](_0x18ceb3=>_0x407cba(_0x18ceb3,_0xb70921,_0xc2fd28,_0x4f357b));}console[_0x69a2f5(0x3b,0xb7,0xba,0xd6)](_0x4ad2db[_0x69a2f5(0x9f,0x91,0x13,0xeb)],_0xee43fe['id']);const _0x1a62d8=_0x4ad2db[_0x593f65(0x2b4,0x2b7,0x28e,0x2da)](buildOutfitText,_0xee43fe),_0x370ed5=[_0x4ad2db[_0x69a2f5(0xf2,0x6e,0x89,0xfe)](_0x2b2a08,''),_0x1a62d8][_0x593f65(0x2ce,0x300,0x325,0x2a2)](Boolean)[_0x69a2f5(0x15,0x22,-0x1b,-0x4f)]('\x0a');let _0x11006c=_0x4ad2db[_0x593f65(0x2d5,0x280,0x24d,0x24b)](buildPromptForRequestType,'char_modif'+'y',_0x370ed5);const _0x26ee33=new Set(),_0x107374=_0x4ad2db['wPuSh'](findMessageIndexWithPlaceholder,_0x11006c,_0x69a2f5(0x53,0x81,0x6,0x59));console[_0x69a2f5(0xfb,0xb7,0xba,0xf1)](_0x4ad2db['iYpye'],_0x107374),_0x11006c=_0x4ad2db[_0x69a2f5(0xb,0x59,-0xb,0x57)](replacePlaceholder,_0x11006c,_0x4ad2db[_0x69a2f5(0x57,0xde,0xb4,0x60)],_0x1a62d8,_0x26ee33),_0x11006c=_0x4ad2db[_0x593f65(0x298,0x2b6,0x309,0x31a)](replacePlaceholder,_0x11006c,_0x4ad2db[_0x69a2f5(0x4e,0x33,0x1c,0x85)],_0x1a62d8,_0x26ee33),_0x11006c=replacePlaceholder(_0x11006c,_0x4ad2db['nFJqE'],_0x4ad2db[_0x593f65(0x2ad,0x315,0x342,0x2af)](_0x2b2a08,''),_0x26ee33),_0x11006c=replacePlaceholder(_0x11006c,_0x4ad2db[_0x69a2f5(0xe8,0x10c,0x140,0xf3)],'',_0x26ee33),_0x11006c=_0x4ad2db[_0x593f65(0x298,0x2f2,0x272,0x318)](replacePlaceholder,_0x11006c,_0x69a2f5(0xef,0xba,0x68,0xc9),'',_0x26ee33),_0x11006c=_0x4ad2db['qlJLJ'](replacePlaceholder,_0x11006c,_0x4ad2db['wuYDV'],'',_0x26ee33),_0x11006c=_0x4ad2db[_0x593f65(0x298,0x22f,0x319,0x284)](replacePlaceholder,_0x11006c,_0x4ad2db[_0x69a2f5(0x2a,0x19,0x2d,0x4b)],'',_0x26ee33),_0x11006c=_0x4ad2db[_0x69a2f5(0x1b,0x4d,0x28,0xdd)](replacePlaceholder,_0x11006c,_0x593f65(0x2c1,0x2fb,0x2fc,0x235)+'}}','',_0x26ee33),_0x11006c=_0x4ad2db[_0x593f65(0x32b,0x389,0x345,0x30c)](replacePlaceholder,_0x11006c,_0x4ad2db['yTHru'],'',_0x26ee33),console[_0x593f65(0x2f6,0x2ee,0x353,0x33f)](_0x4ad2db[_0x593f65(0x376,0x2e6,0x306,0x3cb)],_0x11006c);let _0x1b080d='';_0x4ad2db[_0x593f65(0x37d,0x363,0x35b,0x389)](_0x26ee33[_0x593f65(0x2a4,0x210,0x2c1,0x2b4)],0x3fd*-0x1+0x199f+0x1a*-0xd5)&&(_0x1b080d='诊断：检测到以下变量'+_0x69a2f5(0xfe,0x83,0x115,0xe0)+[..._0x26ee33][_0x593f65(0x261,0x25c,0x241,0x2cc)]('、')+'\x0a');_0x9ee36d&&_0x9ee36d[_0x69a2f5(0xc0,0xb4,0x34,0xfb)]>0xda2+-0xdf*0x11+0x12d&&_0x4ad2db['rXuIb'](_0x107374,0x12f*-0x6+-0xc*0x2ee+0x12*0x259)&&(_0x11006c=attachImagesToMessage(_0x11006c,_0x107374,_0x9ee36d,_0x4ad2db[_0x593f65(0x321,0x372,0x2fa,0x2b9)]),console[_0x69a2f5(0x140,0xb7,0x114,0x77)](_0x4ad2db[_0x593f65(0x331,0x2b2,0x385,0x321)],_0x9ee36d[_0x69a2f5(0x117,0xb4,0x4b,0xb1)],_0x4ad2db[_0x69a2f5(0xc9,0x12e,0x11e,0xc9)],_0x107374));_0x4ad2db[_0x69a2f5(0x127,0x96,0xba,0x14)](updateCombinedPrompt,_0x11006c,_0x1b080d);const _0x1b7585={};_0x1b7585['timeoutMs']=0x493e0;const _0x39f2d8=await _0x4ad2db[_0x593f65(0x31c,0x32c,0x2a2,0x35a)](LLM_OUTFIT_MODIFY,_0x11006c,_0x1b7585);console[_0x69a2f5(0x90,0xb7,0xd8,0x100)](_0x4ad2db['rREfe'],_0x39f2d8);if(!_0x39f2d8){if(_0x4ad2db[_0x69a2f5(0x187,0x12b,0x181,0x180)](_0x593f65(0x344,0x312,0x371,0x2dc),_0x4ad2db[_0x69a2f5(0x8a,0x16,0x88,-0x56)])){toastr[_0x593f65(0x29c,0x20d,0x2c3,0x2f3)](_0x4ad2db['zxzas']);return;}else _0x4c0efb&&_0xb84b7d[_0x593f65(0x266,0x20a,0x2b1,0x1d6)](_0x9a4182);}const _0x272853=_0x4ad2db[_0x593f65(0x332,0x2b2,0x363,0x389)](extractOutfitTags,_0x39f2d8);if(_0x272853[_0x69a2f5(0xbb,0x51,0x9,0x96)][_0x593f65(0x2f3,0x362,0x281,0x260)]===0x4d9+0x59*-0x3b+-0x5*-0x322){if(_0x4ad2db[_0x69a2f5(0xdc,0x12b,0x14f,0x1bc)](_0x4ad2db['IrRZO'],_0x4ad2db[_0x69a2f5(0xc9,0xd3,0xc6,0x59)]))_0xabf558['add'](_0xc2871b);else{toastr[_0x69a2f5(-0x4e,0x40,0xbf,0x93)](_0x69a2f5(0x162,0x132,0xcb,0x12b)+_0x69a2f5(0x1a9,0x122,0xd7,0x165)),console['log']('[outfitPro'+'mptModify]'+_0x69a2f5(0xf2,0x66,-0x26,-0x5)+_0x69a2f5(-0x64,0x2e,-0x57,0x4d)+_0x593f65(0x295,0x228,0x2a5,0x251),_0x39f2d8);return;}}console[_0x593f65(0x2f6,0x300,0x361,0x27f)](_0x4ad2db[_0x593f65(0x27d,0x2b5,0x267,0x205)],_0x272853);const _0x348b22=_0x272853['outfits'][0x3c*-0xd+0x1ad4*0x1+-0x17c8];await _0x4ad2db['tRKxL'](updateOutfitPresetFromLLM,_0xee43fe['id'],_0x348b22),toastr[_0x593f65(0x2cb,0x2a0,0x271,0x256)](_0x4ad2db[_0x593f65(0x34f,0x399,0x3ce,0x342)]);}catch(_0x4daf9a){_0x4ad2db[_0x593f65(0x2bf,0x284,0x2bb,0x250)](_0x4ad2db[_0x69a2f5(0xb6,0x10a,0xc5,0xb0)],_0x4ad2db[_0x593f65(0x349,0x366,0x2bf,0x39f)])?(console[_0x593f65(0x29c,0x320,0x261,0x32e)](_0x69a2f5(0x123,0x11b,0x19f,0x136)+_0x69a2f5(0x77,0x1e,0x9c,-0x5)+_0x593f65(0x2b3,0x2ce,0x294,0x2a7),_0x4daf9a),toastr[_0x593f65(0x29c,0x2e8,0x243,0x289)](_0x593f65(0x2e3,0x2e6,0x2aa,0x320)+'\x20'+_0x4daf9a[_0x69a2f5(0x1a,0x89,0x65,0x78)])):_0x1f12dd=_0x593f65(0x2ef,0x313,0x2ce,0x25c)+_0x69a2f5(-0x26,0x31,0xc2,-0x44)+'4,'+_0xa397de;}}function _0x4208(){const _0x32eeeb=['igLUzgv4','suPTrem','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','CvLXrei','y29UC3rYDwn0BW','whf5vKy','DxjS','A2DsALG','yxv0BW','CMvTB3zLtgLZDa','ChvZAa','uej4s1O','quDXsNm','vgj4yxy','5lIl5y2k6lQR5PYn6kof','CMfUzg9Tvvvjra','u1ret1y','zxHLyW','zxbuDfu','DxHdBMm','D014uNm','Aw5KzxHpzG','wMLXuxi','ihjLCxvLC3qUlG','5y+c6icd5zU+54Mh','CfP6Cwy','ue5Wugy','zw1PDa','wxzbDwe','z2nJwgG','pc/MNi3OO4u+','vMf1z3e','zw5LCG','w291DgzPDfbYBW','EeHpsve','AujyAhu','yNLyv3a','lI4U','teXnioI/LowBNUE7K+AENos4UUEPUG','5lIl5y2k6lQR6iom6z2I','5Qoa5Rwl5yIW5PYn6kof5Qch562+','i3n0lwnOyxr1oa','zM1vzvC','C3nHz2uGAw5Kzq','ief0DgfJAgvK','ndq0mde4mfvqvLvVuq','6iUX5PAh5zcn56EW','ueLmwuK','zgLMEsbmte0GCG','qKjLuKC','AxjLBwvUDcbTzq','qLLOzxK','v2rKwgq','qNLjza','tfDyq2q','q01pwNu','5PYQ5zYOieXmtsdOVPpLH7RKUk0','D0Tkz3i','BMruwxe','C3rHCNrZv2L0Aa','B3v0zML0ihbYBW','t2ndwuy','BMfTzq','CMvWBgfJzq','DLzOC1y','ifn0yxj0Aw5Nia','6i635y+w5PYn6kof5l+U5Ps55O+q56s66k+n6lAf','sez4Dgm','q0jqALu','DhjPBq','v3DHtfa','EuvRD3C','svjzv1K','uKPurfK','vuvtva','5lIl5y2k6lQRoIa','q0T2Cei','y29UDgvUDa','Bxb0tw9KAwz5xq','BevIq08','AxnbCNjHEq','ALnduLG','AM9PBG','6k+35ywi6ycj5OUP5lIa5lIQ5PYn6kof6Ake6k6+','5lIT5PAh5zcn56EWoIa','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','mZG1otaWwvPiAK5m','ywrK','zMvMwe0','B3v0zML0uhjLCW','B3v0zML0xW','u0XOtxK','quHywK4','runKzfO','DxrWDxqGzM9Yia','tLrlEum','q0rmweq','l3bUzZTIyxnLnG','5Ps56k+35RgclI4U','BgHouNC','u1PdA3G','DfjwAvu','DxbWzxjcB2r5','Aw1Hz2vFDxjS','yxbWBhK','zNvSBejVzhLcyq','Bxb0oG','r2HJtLy','q21zzvK','y3rLCG','zuXOu0W','q0fYB2G','D2fYBMLUzW','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','BMfTzuno','D3HKq1C','E3VKUjBNLyZKUABOP6BLJ5f9Fq','ANfqz1u','sM9Hvuq','tKfiug4','wfLTBhK','wvjiyui','CMvWBgfJzufSBa','ze5WyM0','E3VLVzpLIy3MNi3OO4v9Fq','B1zIqKi','rKXeAvy','ELb6s2e','ywnR','B3v0zML0CW','teHqEKG','CwvvEvy','zgf0ytO','5lIk5y2k6lQR6iom6z2I','zgvIDwDNAw5NoG','Dgv4Da','Aw5JBhvKzxm','CwXkteO','teXnioIVT+AXGUwKSEI0Pq','wu1Tr3K','5lIk5y2k6lQRoIa','zxjYB3i','twz5Cge','wfHqsfe','iezPBMfSihbYBW','BMfeDxe','rfPut0u','ChjVBxb0','uunwrNC','C2L6zq','ifjHDYbmte0GBW','Dg9tDhjPBMC','CwndwNO','CMDqAuS','B2rPzNKGChjVBq','yxb2rfO','B2jQzwn0','DMfSDwu','D1PlALG','ifjLCxvLC3rPBG','tM1cte4','wezdtei','vgf3r2i','nZKYnJiZC1nuCwfO','ievYCM9YoG','AMffvem','odGYmZa0suHoAwHj','B1bTs2m','Dezrz2W','zuTvy3a','t0rjrLLFuKvrvq','quPkALO','BMnquwe','DgD2y3m','ufjptvbux1jfuW','q3vkyuG','rgfky0K','E3VNLkJMIlFPNidMSyj9Fq','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','6kkR5l2/55sO77YA','zM9YrwfJAa','ufjptvbux1jfuq','yLDSzeK','Dxr0wgS','z2v0rwXLBwvUDa','BwvZC2fNzq','tuLizvK','DxbWzxjcB2r5qG','C3vJy2vZCW','ENnpuK0','BwvZC2fNzsbHDa','zMLSDgvY','ioACQUIVHUwiQ+EAHoACJEIJHEwTL+AUTsa','zK54Aw4','r0rMBu4','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','BhbVAwC','weHQD2C','D1b1u2G','zLvQzwy','t0rjrLLFuKvtua','t0rkt1C','5lIl5y2k6lQR','ug5zDg8','t05trq','E3VLVzpLIy3OP5lOIBj9Fq','BvPLCgO','6iUX5PAh5zcn56EWoIa','DwDSzgO','Bw15ugi','koEPUIK','t0PAtKm','5PYn6kof5O+q56s66k+n5l+U5Ps55AsX6lsLoG','sKHeCwy','qwzWsuy','EgjKuwm','5Q2J5zYO5Ase55cg5PYn6kof5O+q56s66k+n5l+U','wfjKDfe','Aw5MBW','iow3SUABToAwSoACJEIJHEMIHoIUVIaI','BMnLr2u','tgXfqwC','qMXgqMq','BMfTzuvo','zgf0ytPPBwfNzq','wNDbEfa','zxrZ','5lIT5PAh5zcn56EW','BgvUz3rO','zgf0yq','rvnu','Bg9N','zhH0A0y','5lIk5y2k6lQR','E3VKUiRKUiVMLOD9Fq','ieXmtsbVDxrWDq','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','BwfW','v2HvBhm','BhnxtMu','teXnx0niqvjFtq','zxf1zxn0icHjra','EwHTD0i','CMvZDwX0','Aw1Hz2vZihrVia','zgv0ywLS','icdMLRa6ia','rgjwBuW','mJG5mJK1nvzNtxrPrG','whP3uLq','E3VMNi3OO4xLIjFOOAH9Fq','AfnwB1i','ue9ou0u','nJy1nJu4n0DlqwP0yq','wfDLwLG','BM93','zNvSBejVzhK','Bxb0ig1VzgLMEq','wM1us2y','sxjswK8','5BEY5y+w5RAi5PU05PAW','vfbsA3e','mtK0mZa4otzbBKP0Ehm','uwnjvgS','vwn4AuO','qLzltNK','t0rjrLLFr0vuxW','AxzMC1q','zxrjza','B2TPy3K','Eu9mD3u','yMPqzMO','ioINO+AEKowiSoEAHoACJEIJHEAvSoAnRJO','DhjPz2DLCG','rgHzuLa','zfrqvfa','Aw5WDxq','C3bSAxq','wev6Du8','qxvKC00','kcGOlISPkYKRkq','EgTdqwi','sM9Jzfi','AuHVBxa','A3jLAuO','lxrHyI1JAgfYyq','C3vIC3rYAw5N','qwLNrfm','DhLWzq','C3rYAw5N','y0rNtuG','zhvxEMS','ig91DgzPDcbTBW','C2vHCMnO','zwDkCxG','yMfZzty0','D1LIuuO','mtvJuK5lD2q'];_0x4208=function(){return _0x32eeeb;};return _0x4208();}async function updateOutfitPresetFromLLM(_0x3bbcfa,_0x1a2dd0){const _0x4c58b9={'dTPTP':function(_0x360187,_0x2cbc32){return _0x360187(_0x2cbc32);},'qcCZz':function(_0x33b7ae,_0x43bbce){return _0x33b7ae!==_0x43bbce;},'FLDiV':_0x372b87(0xbd,0x186,0x121,0x126),'SeZoP':'pVuWI','IRYWY':_0x372b87(0x14b,0xcc,0x1b7,0x133),'tgvcs':_0x59b7da(0x368,0x399,0x316,0x2bc),'miPGl':_0x372b87(0xea,0x128,0x11b,0xd5),'eKUcp':_0x59b7da(0x1f4,0x23e,0x288,0x219),'tymVz':_0x59b7da(0x309,0x39e,0x30f,0x379),'wKJgr':_0x59b7da(0x2f8,0x275,0x2b7,0x2e4),'RSWqE':_0x372b87(0x146,0x128,0x15d,0x12e),'ffCKu':_0x59b7da(0x311,0x203,0x290,0x219),'TawGb':function(_0x1d3ed1,_0x580614){return _0x1d3ed1>_0x580614;},'xkCAb':_0x59b7da(0x302,0x327,0x30d,0x2f5),'nYPse':function(_0x47c290,_0x5435f0){return _0x47c290===_0x5435f0;},'ECddZ':_0x372b87(0x9b,0xd5,0x1d,0xa5)+'内容','XWeZX':_0x372b87(0x125,0xd8,0x1a4,0x154),'mIonn':function(_0x4ccc80){return _0x4ccc80();},'XsEtk':function(_0x30b7f9,_0xf6e711){return _0x30b7f9(_0xf6e711);}},_0x432541=extension_settings[extensionName],_0xe91969=_0x432541['outfitPres'+_0x372b87(0x1ac,0xc9,0x12d,0x132)][_0x3bbcfa];if(!_0xe91969){if(_0x4c58b9[_0x372b87(0x151,0x95,0x71,0xe8)](_0x4c58b9[_0x372b87(0x143,0x8f,0x14f,0xce)],_0x4c58b9['SeZoP'])){toastr[_0x59b7da(0x25f,0x2c6,0x24b,0x1fe)]('找不到指定的服装预设');return;}else{const _0x1c4b75=_0x386389[_0x59b7da(0x1e3,0x269,0x226,0x25e)](_0x47a60b,arguments);return _0x29b2f7=null,_0x1c4b75;}}let _0x8df040='准备更新服装\x20\x22'+_0x3bbcfa+'\x22\x20的以下数据:\x0a\x0a';const _0x7c4879={};_0x7c4879['nameCN']=_0x4c58b9[_0x372b87(0xc8,0xc6,0x87,0x98)];function _0x59b7da(_0x1a17c2,_0x185925,_0x3d6a1e,_0x5e6915){return _0x2e3005(_0x1a17c2-0x5,_0x185925-0x179,_0x5e6915,_0x3d6a1e- -0x1d8);}_0x7c4879[_0x59b7da(0x219,0x282,0x29d,0x294)]=_0x4c58b9[_0x372b87(0x158,0x116,0x7a,0xfd)],_0x7c4879[_0x372b87(0x79,0xcd,0x48,0xb6)]=_0x59b7da(0x27e,0x241,0x2a7,0x322),_0x7c4879[_0x59b7da(0x2eb,0x2c8,0x279,0x238)+'ack']=_0x4c58b9['miPGl'],_0x7c4879[_0x372b87(0x102,0xf5,0x195,0x150)]=_0x4c58b9[_0x372b87(0xf2,0x7e,0x13f,0xf9)],_0x7c4879[_0x59b7da(0x27a,0x23b,0x227,0x278)+'ck']=_0x4c58b9['tymVz'];const _0x51a59c=_0x7c4879;let _0x40c8d8=0x11b6+-0x2653+0x149d;for(const _0x56b710 in _0x51a59c){if(_0x1a2dd0[_0x56b710]&&_0x1a2dd0[_0x56b710]!==_0xe91969[_0x56b710]){if(_0x4c58b9['qcCZz'](_0x4c58b9[_0x59b7da(0x2ae,0x311,0x321,0x299)],_0x4c58b9['RSWqE'])){const _0x14d4c7=_0xe91969[_0x56b710]||_0x4c58b9['ffCKu'],_0x21aba1=_0x1a2dd0[_0x56b710];_0x8df040+='•\x20'+_0x51a59c[_0x56b710]+':\x0a',_0x8df040+='\x20\x20旧:\x20'+_0x14d4c7[_0x59b7da(0x340,0x29e,0x2dc,0x261)](0x1*0x5e2+0x199d*0x1+-0x1f7f,-0x11f1*-0x2+0x1fbf+-0x1*0x436f)+(_0x4c58b9[_0x372b87(0x67,0x13d,0x90,0xf2)](_0x14d4c7[_0x372b87(0x101,0xd1,0x18e,0x134)],0x4d*0x5+0x48b+-0xe*0x6b)?_0x372b87(0x215,0x154,0x192,0x19f):'')+'\x0a',_0x8df040+=_0x59b7da(0x264,0x24f,0x2b4,0x240)+_0x21aba1[_0x372b87(0xe1,0xed,0x1a3,0x16e)](-0x14b5+0x14*0x14b+0x527*-0x1,-0x21e*-0x5+-0x56*0x4f+0x1026)+(_0x4c58b9['TawGb'](_0x21aba1['length'],-0x23cb+-0x83b+0x8*0x587)?_0x4c58b9[_0x59b7da(0x362,0x2eb,0x2d7,0x27c)]:'')+'\x0a\x0a',_0x40c8d8++;}else{const _0x1ed4c8=_0x117039(_0x1b200d[-0x1d80+0xb*-0x15f+0x2c96]),_0x4cf640=_0x4c58b9[_0x59b7da(0x2b1,0x241,0x2d1,0x354)](_0x796651,_0x1ed4c8);_0x4cf640&&_0x57ff68[_0x372b87(0x43,0x143,0x14e,0xd1)][_0x372b87(0x1ee,0x101,0x189,0x184)](_0x4cf640);}}}if(_0x4c58b9['nYPse'](_0x40c8d8,-0x6*0x4a+0x265e+-0x24a2)){toastr[_0x372b87(0x164,0xe9,0xeb,0x12a)](_0x4c58b9[_0x372b87(0xfd,0xeb,0xfb,0xad)]);return;}_0x8df040+='共\x20'+_0x40c8d8+_0x59b7da(0x2ea,0x25f,0x2ea,0x2d4);const _0xdbffd2=await stylishConfirm(_0x8df040);if(!_0xdbffd2){toastr['info'](_0x4c58b9[_0x372b87(0x176,0x1be,0x1b3,0x14e)]);return;}for(const _0x374468 in _0x51a59c){_0x1a2dd0[_0x374468]&&(_0xe91969[_0x374468]=_0x1a2dd0[_0x374468]);}_0x4c58b9['mIonn'](saveSettingsDebounced);const _0x31030a=$(_0x372b87(0x132,0x17a,0x139,0x1a3)+_0x372b87(0xfd,0x15f,0x10d,0x16d)+_0x372b87(0x64,0xe2,0xbf,0xbd));_0x31030a[_0x372b87(0xdf,0x1ab,0x17b,0x134)]&&_0x4c58b9['mIonn'](loadOutfitPreset);function _0x372b87(_0x456f01,_0x169d4f,_0x751244,_0x24f212){return _0x2e3005(_0x456f01-0x189,_0x169d4f-0x4f,_0x751244,_0x24f212- -0x346);}_0x4c58b9['XsEtk'](updateOutfitFormFields,_0x1a2dd0),console[_0x372b87(0xd6,0x137,0x175,0x137)]('[outfitPro'+_0x372b87(0xa8,0x85,0x4a,0x9e)+_0x59b7da(0x26c,0x2c9,0x299,0x23a)+_0x3bbcfa+'\x22');}function updateOutfitFormFields(_0x590877){const _0x19b718={'jSCRX':function(_0x48d31f,_0x20b557){return _0x48d31f===_0x20b557;},'LWXCd':_0x459129(-0x125,-0x138,-0x18c,-0x18f),'CuhQn':function(_0xadfd39,_0x5d009d){return _0xadfd39(_0x5d009d);},'PoPJT':'nameCN','BhWHQ':_0x459129(-0xd7,-0xc0,-0x16a,-0x47),'XqyVF':_0x35e83e(0x360,0x373,0x3a3,0x30e),'duEHe':'fullBodyBa'+'ck'};function _0x459129(_0x29d5c3,_0x4c6265,_0x337fb0,_0x2878ba){return _0x2e3005(_0x29d5c3-0x1e,_0x4c6265-0x1c2,_0x337fb0,_0x29d5c3- -0x54c);}const _0x1ed9ed=[_0x19b718['PoPJT'],_0x19b718['BhWHQ'],_0x35e83e(0x2c6,0x300,0x2bf,0x340),_0x459129(-0xfb,-0x171,-0x6a,-0x132)+_0x459129(-0x136,-0x13d,-0x1bc,-0x158),_0x19b718[_0x35e83e(0x38f,0x379,0x3ff,0x37a)],_0x19b718['duEHe']];function _0x35e83e(_0x462b4f,_0x191ece,_0x4f748f,_0x332f92){return _0x2e3005(_0x462b4f-0x1a9,_0x191ece-0x55,_0x191ece,_0x462b4f- -0x136);}_0x1ed9ed['forEach'](_0x1c315d=>{function _0x1a41ca(_0x438271,_0x2aca56,_0x3c8186,_0x1186f7){return _0x35e83e(_0x1186f7-0x62,_0x2aca56,_0x3c8186-0x1e7,_0x1186f7-0x19);}function _0xd03b2(_0x44cf63,_0x4a4171,_0x585a65,_0x36db4b){return _0x459129(_0x36db4b- -0xe3,_0x4a4171-0x10f,_0x4a4171,_0x36db4b-0x1d0);}if(_0x590877[_0x1c315d]){const _0x36e1d3=document[_0xd03b2(-0x220,-0x1fa,-0x218,-0x1e1)+_0x1a41ca(0x422,0x438,0x3f0,0x421)](_0x1a41ca(0x377,0x297,0x335,0x31c)+_0x1c315d);_0x36e1d3&&(_0x19b718[_0xd03b2(-0x294,-0x1df,-0x1ef,-0x248)](_0x1a41ca(0x3e2,0x3ae,0x2f1,0x353),_0x19b718[_0xd03b2(-0x151,-0x101,-0xf2,-0x139)])?(_0x36e1d3['value']=_0x590877[_0x1c315d],_0x19b718['CuhQn']($,_0x36e1d3)[_0xd03b2(-0x102,-0x1d4,-0x13b,-0x188)](_0xd03b2(-0xf5,-0x1d6,-0x19d,-0x185))):_0x26173a=_0x1a41ca(0x34d,0x391,0x2ab,0x333)+_0x1a41ca(0x346,0x343,0x3e6,0x375)+[..._0xf17ddc][_0x1a41ca(0x329,0x2e5,0x2fa,0x314)]('、')+'\x0a');}});}