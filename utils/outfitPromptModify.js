(function(_0x107104,_0x3f16c1){function _0x116fd6(_0x56e735,_0xc7f78f,_0x52082e,_0x3f9eb9){return _0x324a(_0x52082e-0x150,_0xc7f78f);}const _0x4263dd=_0x107104();function _0x61db7d(_0x2ce226,_0x2fa69e,_0x2beb25,_0x2717a9){return _0x324a(_0x2beb25- -0x2ed,_0x2ce226);}while(!![]){try{const _0x1183ea=parseInt(_0x116fd6(0x21e,0x30c,0x280,0x2db))/(0x1584+0x8df*-0x4+0xdf9)+parseInt(_0x61db7d(-0x1a4,-0x1a3,-0x126,-0x13d))/(-0x13e7*-0x1+0x5*-0x689+0x4*0x332)*(parseInt(_0x116fd6(0x2a2,0x26b,0x257,0x291))/(-0x2*-0x9f7+0x43*0x65+-0x2ba*0x11))+parseInt(_0x61db7d(-0x15e,-0x1b2,-0x1ac,-0x234))/(-0x6df*-0x1+-0x1b*-0x81+-0x1*0x1476)*(parseInt(_0x61db7d(-0x187,-0x17b,-0x102,-0x11d))/(-0x76*-0x47+0x653*0x2+-0x2d5b))+-parseInt(_0x61db7d(-0x227,-0x21d,-0x1e0,-0x235))/(0xf3e+-0x16dc+0x7a4)+parseInt(_0x116fd6(0x34e,0x33d,0x31d,0x2e8))/(0x15*0xb+-0x1273+0x1193)+-parseInt(_0x116fd6(0x342,0x314,0x32b,0x2cc))/(-0x1*0x99+0x161f+-0x157e)+-parseInt(_0x116fd6(0x3b1,0x30b,0x37f,0x3fc))/(0x3b*-0x5f+-0x1487+0x3*0xe27);if(_0x1183ea===_0x3f16c1)break;else _0x4263dd['push'](_0x4263dd['shift']());}catch(_0x48c0d8){_0x4263dd['push'](_0x4263dd['shift']());}}}(_0x1dea,0x3dc3c+0x24f3f+-0x1d181));const _0x2cfc5f=(function(){const _0x38c069={};_0x38c069[_0x486212(-0xb0,-0x1a5,-0x134,-0x13a)]=_0x5a577e(0x3e8,0x364,0x2f7,0x3b5)+'内容',_0x38c069[_0x486212(-0x125,-0x27,-0xfd,-0xbd)]=function(_0x5c3403,_0x4a72b1){return _0x5c3403!==_0x4a72b1;};function _0x486212(_0x5d74c5,_0x1e9b9b,_0x4e3f78,_0x163ee6){return _0x324a(_0x163ee6- -0x24c,_0x1e9b9b);}const _0x34b9fd=_0x38c069;let _0x57421f=!![];function _0x5a577e(_0xdb8ec3,_0x550520,_0x48b5f4,_0x3a97a4){return _0x324a(_0x550520-0x13c,_0xdb8ec3);}return function(_0x4711d7,_0xe632b4){const _0x381eaa={'AOKXr':_0x34b9fd[_0x5017cf(-0x302,-0x316,-0x2c5,-0x268)],'WzSur':function(_0x33b0ec,_0x53b95f){function _0x14317e(_0x1e5ce7,_0x5e7caa,_0x25d662,_0x384bc2){return _0x5017cf(_0x384bc2,_0x5e7caa-0x47,_0x1e5ce7-0x2fb,_0x384bc2-0xb4);}return _0x34b9fd[_0x14317e(0xb3,0x4e,0x105,0xfd)](_0x33b0ec,_0x53b95f);}},_0xca5e10=_0x57421f?function(){function _0x2b2d69(_0xcd28c2,_0x38f804,_0x34687f,_0x421227){return _0x5017cf(_0x38f804,_0x38f804-0x64,_0x421227-0x522,_0x421227-0x128);}function _0x80539(_0x48d880,_0x516faa,_0x19e3d4,_0x39543c){return _0x5017cf(_0x48d880,_0x516faa-0x149,_0x39543c-0x88,_0x39543c-0x2d);}if(_0x381eaa[_0x2b2d69(0x3a3,0x2ef,0x2dd,0x34f)](_0x2b2d69(0x2b6,0x255,0x348,0x2e8),_0x80539(-0x244,-0x286,-0x2b0,-0x229))){if(_0xe632b4){const _0x4b6eaf=_0xe632b4[_0x80539(-0x1f5,-0x156,-0x1a4,-0x192)](_0x4711d7,arguments);return _0xe632b4=null,_0x4b6eaf;}}else{_0x24dd89[_0x2b2d69(0x2b4,0x30a,0x33d,0x2ba)](_0x381eaa[_0x80539(-0x1bd,-0x174,-0xca,-0x15c)]);return;}}:function(){};_0x57421f=![];function _0x5017cf(_0x3fd561,_0x51c6e0,_0x286878,_0x8810a5){return _0x486212(_0x3fd561-0xa3,_0x3fd561,_0x286878-0x146,_0x286878- -0x18b);}return _0xca5e10;};}()),_0x1a7ce2=_0x2cfc5f(this,function(){const _0x14821d={};_0x14821d[_0xdb5220(0x566,0x4ec,0x536,0x562)]=_0xdb5220(0x4ab,0x4ed,0x4b8,0x53b)+'+$';function _0x214ce9(_0x3ad6ae,_0x21e8de,_0x4873b6,_0x4a67cf){return _0x324a(_0x3ad6ae-0x1b4,_0x4873b6);}function _0xdb5220(_0xf6ad5c,_0x264ba0,_0x1735e2,_0x18ae23){return _0x324a(_0x264ba0-0x36d,_0x1735e2);}const _0x22dc81=_0x14821d;return _0x1a7ce2[_0xdb5220(0x4c8,0x49a,0x47b,0x463)]()[_0x214ce9(0x2d5,0x2aa,0x2d1,0x282)](_0xdb5220(0x469,0x4ed,0x506,0x45b)+'+$')[_0x214ce9(0x2e1,0x24d,0x326,0x360)]()[_0xdb5220(0x548,0x4c2,0x516,0x459)+'r'](_0x1a7ce2)['search'](_0x22dc81['ZchLk']);});_0x1a7ce2();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../script.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{loadOutfitPreset}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0x59d1cf,_0xeb4107,_0x28b640,_0x5d4394){function _0x57971b(_0x3ce8b3,_0x4aecdf,_0x4a550b,_0x3477ca){return _0x324a(_0x3ce8b3-0x300,_0x3477ca);}const _0x394bc3={'BXGmM':function(_0x4185d7,_0x5eb1e8){return _0x4185d7(_0x5eb1e8);},'LMrGV':'input','CHEpV':_0x57971b(0x51f,0x4f3,0x4fe,0x502),'DFcSu':_0x57971b(0x40f,0x434,0x4a4,0x3d4),'ubxku':_0x285391(-0x72,-0xd9,-0x40,-0x59)+'ack','HamKK':_0x57971b(0x4f8,0x4dd,0x53f,0x4d4)+'ck','FcCBE':function(_0x346c49,_0x343e8b){return _0x346c49(_0x343e8b);},'WpSaP':_0x285391(-0xf3,-0xd5,-0xef,-0x60),'RIoEO':function(_0xae7fd1,_0x4e16b8){return _0xae7fd1!==_0x4e16b8;},'zEXzJ':_0x285391(-0x40,-0x4b,-0xb9,-0x84),'hKWML':_0x57971b(0x488,0x4e8,0x427,0x44d),'iYTxS':function(_0x12cb42,_0x3f263e){return _0x12cb42===_0x3f263e;},'DGycQ':_0x57971b(0x4c9,0x49b,0x497,0x48f)};if(typeof _0x59d1cf===_0x394bc3[_0x285391(-0x54,-0x72,-0x5c,-0xec)]){if(_0x394bc3[_0x57971b(0x4a7,0x4a0,0x4fc,0x445)](_0x394bc3[_0x285391(-0xaf,-0xed,-0x3f,-0x85)],_0x57971b(0x4e0,0x4d6,0x527,0x4c4))){if(_0x28b640&&_0x59d1cf[_0x285391(0x51,-0x54,0x21,0xf)](_0xeb4107)){if(_0x5d4394){if(_0x394bc3['RIoEO'](_0x394bc3[_0x285391(0x62,-0x5c,0x37,-0x17)],_0x394bc3['hKWML'])){const _0x45395e={'ZJZuP':function(_0x12f1a4,_0x156fe8){return _0x394bc3['BXGmM'](_0x12f1a4,_0x156fe8);},'JzEhI':_0x394bc3[_0x57971b(0x474,0x41b,0x428,0x44b)]},_0x13dfd1=[_0x394bc3[_0x57971b(0x46d,0x42a,0x3d7,0x458)],_0x285391(0x11,0x6c,-0x23,0xc),_0x394bc3['DFcSu'],_0x394bc3[_0x57971b(0x429,0x498,0x3d5,0x488)],_0x285391(-0x15a,-0xfb,-0x195,-0x107),_0x394bc3['HamKK']];_0x13dfd1[_0x57971b(0x4ea,0x507,0x52f,0x554)](_0x2b3eba=>{function _0x572d4d(_0x31233c,_0xa00a55,_0x1d16a9,_0x11f4ab){return _0x57971b(_0x11f4ab- -0x40f,_0xa00a55-0x146,_0x1d16a9-0x9b,_0x1d16a9);}function _0x4d762d(_0x4e8e42,_0xf3c2ae,_0x13d8a7,_0x58fdb7){return _0x285391(_0xf3c2ae,_0xf3c2ae-0x1aa,_0x13d8a7-0x161,_0x58fdb7-0xa9);}if(_0x18d1c0[_0x2b3eba]){const _0x30e9c4=_0x16fcbc[_0x4d762d(-0xac,-0x31,0x48,-0x24)+_0x4d762d(-0x87,-0x1e,0x82,-0x13)](_0x572d4d(0x2c,0x29,-0x41,0x26)+_0x2b3eba);_0x30e9c4&&(_0x30e9c4[_0x4d762d(0xe1,0x9f,0x95,0x9b)]=_0x11197d[_0x2b3eba],_0x45395e[_0x572d4d(0x4d,0xd0,0x50,0x58)](_0x265c64,_0x30e9c4)[_0x572d4d(0x4b,-0x3e,0x70,0x41)](_0x45395e[_0x4d762d(0x43,-0x9,-0x3c,-0x31)]));}});}else _0x5d4394[_0x285391(0x18,-0xb1,-0xd1,-0x54)](_0xeb4107);}}return _0x59d1cf['replaceAll'](_0xeb4107,_0x28b640);}else _0x3cae71[_0x57971b(0x4e5,0x54d,0x565,0x4ea)+_0x57971b(0x475,0x45b,0x46b,0x4f3)](_0x2e2aa6[_0x57971b(0x497,0x4f8,0x404,0x41a)+'ODIFY_RESP'+_0x285391(-0x17,-0x22,-0x7f,-0xa4)],_0x7d2027),_0x394bc3[_0x57971b(0x433,0x42b,0x3c5,0x4af)](_0xc1c964,new _0x59ae6b(_0x285391(-0xdc,-0x4b,-0xf5,-0xb9)+_0x285391(0xa,-0xef,-0xbd,-0x61)));}if(Array[_0x285391(-0x86,0x62,-0x7,-0x2a)](_0x59d1cf))return _0x59d1cf[_0x285391(-0x25,-0xea,0x2a,-0x65)](_0x3f38ba=>replacePlaceholder(_0x3f38ba,_0xeb4107,_0x28b640,_0x5d4394));if(_0x59d1cf&&_0x394bc3[_0x285391(-0x42,-0x5a,0x3f,-0x2c)](typeof _0x59d1cf,_0x394bc3['DGycQ'])){const _0x50f2c7={};for(const _0x346f7e in _0x59d1cf){_0x50f2c7[_0x346f7e]=replacePlaceholder(_0x59d1cf[_0x346f7e],_0xeb4107,_0x28b640,_0x5d4394);}return _0x50f2c7;}function _0x285391(_0x5a6102,_0x2c8126,_0x56993d,_0x40f6eb){return _0x324a(_0x40f6eb- -0x21a,_0x5a6102);}return _0x59d1cf;}function attachImagesToMessage(_0x5d2594,_0xf1b6c6,_0x30988c,_0x2cb29b=_0x47f6d7(0x528,0x5c7,0x592,0x5b2)){const _0xf875c5={};_0xf875c5[_0x5ec28f(0x2a1,0x2a7,0x2f9,0x2fc)]=_0x5ec28f(0x36f,0x346,0x2ee,0x3d1);function _0x5ec28f(_0x1201aa,_0x46e409,_0x1e6d3e,_0xabface){return _0x47f6d7(_0x1201aa-0x93,_0x46e409-0x62,_0x46e409- -0x20e,_0xabface);}_0xf875c5[_0x286ac2(0xf8,0x82,0xc9,0x10a)]=function(_0x4a7e1b,_0x54e59f){return _0x4a7e1b===_0x54e59f;},_0xf875c5[_0x286ac2(0x9d,0x35,-0x33,0xbe)]='string',_0xf875c5[_0x286ac2(0x186,0x117,0xd4,0xf3)]='object',_0xf875c5[_0x286ac2(0x6b,0xe5,0x16c,0xf8)]=function(_0x5d9d8e,_0x21eea0){return _0x5d9d8e+_0x21eea0;},_0xf875c5[_0x286ac2(0x1,0x53,0x4,0x30)]=_0x286ac2(0x9b,0xec,0x159,0xcb),_0xf875c5[_0x5ec28f(0x364,0x350,0x377,0x352)]=_0x5ec28f(0x266,0x27c,0x225,0x207),_0xf875c5[_0x286ac2(0xc3,0x5d,0xf2,0x14)]=function(_0x316790,_0x4d3ffc){return _0x316790!==_0x4d3ffc;},_0xf875c5[_0x286ac2(0xe6,0x6c,-0x2,0x47)]=_0x286ac2(0xc5,0x7b,0x7a,0xe7),_0xf875c5[_0x5ec28f(0x2c6,0x279,0x244,0x2f1)]=function(_0x15b7bc,_0x185d01){return _0x15b7bc>=_0x185d01;},_0xf875c5[_0x5ec28f(0x250,0x29a,0x318,0x300)]=_0x5ec28f(0x2eb,0x2e4,0x2b8,0x2d0);const _0xd8e073=_0xf875c5;if(!_0x30988c||_0xd8e073[_0x5ec28f(0x24a,0x2b9,0x338,0x328)](_0x30988c[_0x286ac2(0x183,0x107,0x95,0xd3)],-0x396+0x174c+-0x13b6)||_0xf1b6c6<-0x9d0*0x2+-0xcd9+-0x11*-0x1e9||_0xd8e073['VGnas'](_0xf1b6c6,_0x5d2594[_0x5ec28f(0x312,0x33e,0x2f3,0x3cd)])){if(_0xd8e073['lDHxx'](_0x5ec28f(0x377,0x313,0x2e0,0x293),_0x286ac2(0x7e,0xdc,0x133,0x103))){_0x5eb77c['error'](_0xd8e073[_0x5ec28f(0x2fb,0x2a7,0x285,0x2c1)]);return;}else return _0x5d2594;}const _0x55a833=[..._0x5d2594];function _0x286ac2(_0x1e8b1f,_0x605f57,_0x49dcb4,_0x5f2fcc){return _0x47f6d7(_0x1e8b1f-0x186,_0x605f57-0x1e7,_0x605f57- -0x445,_0x49dcb4);}const _0x23dcd9=_0x55a833[_0xf1b6c6],_0xd77b03=[];if(typeof _0x23dcd9['content']===_0x5ec28f(0x2a7,0x322,0x38f,0x308)){if(_0xd8e073['lDHxx']('KBLxj',_0xd8e073[_0x286ac2(0x5,0x63,-0x27,0xcd)])){const _0x39be3c={};_0x39be3c[_0x5ec28f(0x395,0x30a,0x314,0x2fe)]=_0xd8e073[_0x286ac2(0x51,0x53,0x74,0xb3)],_0x39be3c[_0x286ac2(0x99,0xec,0x68,0x117)]=_0x23dcd9[_0x286ac2(0xf0,0x114,0x88,0xbd)],_0xd77b03[_0x5ec28f(0x30c,0x354,0x2ef,0x397)](_0x39be3c);}else return _0x59c0f1[_0x286ac2(0xb1,0xe6,0x146,0x111)](_0x175273=>_0x3bddc1(_0x175273,_0xd2cba7,_0x5388d0,_0x59f1be));}else Array[_0x286ac2(0x17b,0x121,0xd7,0xf6)](_0x23dcd9[_0x286ac2(0x81,0x114,0xe3,0x7f)])&&_0xd77b03[_0x286ac2(0x95,0x11d,0xed,0x9e)](..._0x23dcd9['content']);if(_0x30988c[_0x5ec28f(0x375,0x33e,0x34d,0x383)]>0x1f1*-0xb+0x2377+-0xe1c){const _0x3e4239={};_0x3e4239[_0x5ec28f(0x2ca,0x30a,0x2f2,0x2df)]=_0xd8e073[_0x5ec28f(0x245,0x28a,0x1fb,0x27f)],_0x3e4239[_0x286ac2(0x119,0xec,0x7b,0x121)]=_0x286ac2(0xaf,0xde,0xee,0x4a)+_0x30988c[_0x5ec28f(0x349,0x33e,0x375,0x394)]+'张'+_0x2cb29b+']',_0xd77b03['push'](_0x3e4239);}_0x30988c[_0x286ac2(0xbc,0x11b,0x12a,0x18e)]((_0x43daa4,_0x53d5b9)=>{const _0x5ca19e=_0xd8e073[_0x3523a6(-0x70,-0x1e,-0x69,-0x66)](typeof _0x43daa4,_0xd8e073[_0xbd60a2(0x151,0x10d,0x152,0x1ae)])?_0x43daa4:_0x43daa4[_0xbd60a2(0x1ac,0x154,0x131,0x155)],_0x34b3a0=_0xd8e073[_0x3523a6(0x3c,-0x1e,-0x14,0x2a)](typeof _0x43daa4,_0xd8e073[_0x3523a6(0x9e,0x77,0x73,0xbb)])&&_0x43daa4['name']?_0x43daa4[_0xbd60a2(0x169,0x1de,0xec,0x1ff)]:''+_0x2cb29b+_0xd8e073[_0xbd60a2(0x201,0x1e4,0x1ac,0x1a1)](_0x53d5b9,0x3e3+-0xf2e+0xb4c);function _0x3523a6(_0x472f54,_0xfe5a6b,_0xaf964,_0x2f6fc8){return _0x5ec28f(_0x472f54-0x11a,_0xfe5a6b- -0x2d7,_0xaf964-0x41,_0xaf964);}const _0x49970a={};_0x49970a['type']=_0xd8e073[_0x3523a6(-0xbb,-0x4d,-0xe3,0x16)],_0x49970a[_0x3523a6(-0x3,0x4c,0x77,0xcf)]='['+_0x34b3a0+']',_0xd77b03[_0xbd60a2(0x239,0x23e,0x203,0x24f)](_0x49970a);let _0x39eba7=_0x5ca19e;!_0x5ca19e[_0xbd60a2(0x1f6,0x283,0x273,0x170)](_0xd8e073[_0x3523a6(-0x4,0x79,0x90,0xa6)])&&(_0xd8e073[_0x3523a6(-0xcc,-0x43,0x1a,-0x93)](_0x3523a6(0x7d,0x4,-0x4d,-0x47),_0xbd60a2(0x270,0x1f4,0x2a3,0x2ce))?_0x39eba7='data:image'+_0xbd60a2(0x18f,0x198,0x12c,0x21b)+'4,'+_0x5ca19e:_0x40d78f['outfits'][_0xbd60a2(0x239,0x28e,0x261,0x1f2)](_0xcbe7d1));function _0xbd60a2(_0x5d81b6,_0x1416cb,_0x1c2164,_0x4820be){return _0x286ac2(_0x5d81b6-0x45,_0x5d81b6-0x11c,_0x1416cb,_0x4820be-0x12e);}const _0x31f5cb={};_0x31f5cb[_0x3523a6(0xd4,0x63,0xd3,-0x31)]=_0x39eba7,_0x31f5cb['detail']=_0xd8e073[_0xbd60a2(0x188,0x1d2,0x1aa,0x20e)];const _0x9c91b9={};_0x9c91b9['type']=_0x3523a6(0xaa,0x82,0x68,0x52),_0x9c91b9[_0xbd60a2(0x23e,0x1c2,0x216,0x214)]=_0x31f5cb,_0xd77b03[_0x3523a6(0x2e,0x7d,0x46,0xc4)](_0x9c91b9);});const _0x5566e2={..._0x23dcd9};return _0x5566e2['content']=_0xd77b03,_0x55a833[_0xf1b6c6]=_0x5566e2,_0x55a833;}function findMessageIndexWithPlaceholder(_0x3d5f87,_0x3fddc5){const _0x55e5cc={};_0x55e5cc[_0x57cf86(-0x12a,-0x1b2,-0x179,-0x16f)]=_0x57cf86(-0x15b,-0xe4,-0xee,-0x136),_0x55e5cc['WIANm']=function(_0x5aaa38,_0x2e543c){return _0x5aaa38<_0x2e543c;},_0x55e5cc['nQaeY']=function(_0x5981bd,_0x10005c){return _0x5981bd===_0x10005c;};function _0x57cf86(_0x2e0ceb,_0x427f28,_0x1f7344,_0x5d7688){return _0x47f6d7(_0x2e0ceb-0x3d,_0x427f28-0x47,_0x5d7688- -0x667,_0x1f7344);}_0x55e5cc[_0x34361d(0x18,-0x8,0x40,-0x56)]=_0x57cf86(-0xbd,-0x153,-0x159,-0x137),_0x55e5cc[_0x34361d(0x134,0x117,0xb7,0x25)]=function(_0x489c69,_0x4073a2){return _0x489c69!==_0x4073a2;},_0x55e5cc[_0x57cf86(-0x115,-0x16d,-0xcb,-0x132)]=_0x34361d(0xa5,0xa2,0x11,-0x1b),_0x55e5cc[_0x34361d(0xf5,0x3c,0x60,0x32)]=_0x57cf86(-0x1c7,-0x201,-0x201,-0x19e);const _0x3e7866=_0x55e5cc;for(let _0x24e45c=0x2589+-0x1*0x1d35+0x4*-0x215;_0x3e7866[_0x57cf86(-0xb7,-0x50,-0xd5,-0xdc)](_0x24e45c,_0x3d5f87[_0x34361d(0x54,0xc6,0x84,0x12)]);_0x24e45c++){const _0x114865=_0x3d5f87[_0x24e45c];if(_0x3e7866[_0x57cf86(-0x17e,-0x1b5,-0x191,-0x1e5)](typeof _0x114865['content'],_0x3e7866[_0x57cf86(-0xd9,-0xf9,-0x176,-0x15f)])&&_0x114865[_0x34361d(0x99,0xe7,0x91,0x4d)][_0x34361d(0x155,0xc7,0xd7,0x12c)](_0x3fddc5))return _0x24e45c;else{if(Array[_0x34361d(0x5c,0x10e,0x9e,0xe4)](_0x114865['content'])){if(_0x3e7866[_0x34361d(0x57,0xaf,0xb7,0xad)]('HcpWG',_0x3e7866[_0x34361d(-0xd,0x45,0x6d,0xd1)]))for(const _0x197e1f of _0x3b6732[_0x57cf86(-0x90,-0x197,-0x175,-0x10e)]){if(_0x197e1f[_0x57cf86(-0x1ce,-0x190,-0x173,-0x14f)]===_0x3e7866[_0x57cf86(-0x19f,-0x118,-0x109,-0x16f)]&&_0x197e1f[_0x57cf86(-0x198,-0x191,-0x19a,-0x136)]['includes'](_0x292a93))return _0x637f82;}else for(const _0x735d23 of _0x114865['content']){if(_0x735d23['type']===_0x3e7866[_0x34361d(0x16,-0x68,0x30,0x9)]&&_0x735d23['text'][_0x57cf86(-0x96,-0x47,-0x8d,-0xc8)](_0x3fddc5)){if(_0x57cf86(-0x161,-0x211,-0x165,-0x1e8)===_0x3e7866[_0x57cf86(-0x12f,-0x1bc,-0x163,-0x13f)])_0x4e08a7[_0x57cf86(-0x148,-0xbc,-0x65,-0xcc)](_0x34361d(0x7c,-0x11,0x70,0x23)+'mptModify]'+_0x57cf86(-0xd2,-0x177,-0xb9,-0x150)+'\x22'+_0x3b3523+'\x22');else return _0x24e45c;}}}}}function _0x34361d(_0x122eb8,_0x4180dd,_0x20abd2,_0x2b6596){return _0x47f6d7(_0x122eb8-0x27,_0x4180dd-0x49,_0x20abd2- -0x4c8,_0x122eb8);}return-(-0x1*0x33c+-0x4f*-0x3d+-0xf96);}function generateRequestId(){const _0x39709e={};_0x39709e[_0x81133c(0x1da,0x151,0xff,0x1b4)]=_0x2f688b(0x83,0xa1,0x113,0x111),_0x39709e['wcPOZ']=function(_0x669437,_0x4d2ef1){return _0x669437>_0x4d2ef1;},_0x39709e['qXfZX']=_0x2f688b(0x8b,0xe9,0xd5,0xd0),_0x39709e[_0x2f688b(0xf8,0x78,0xf5,0x10d)]=function(_0x5792d0,_0x1359de){return _0x5792d0>_0x1359de;},_0x39709e['PRLLZ']=function(_0x156620,_0x2540af){return _0x156620!==_0x2540af;};function _0x2f688b(_0x4f8648,_0x5d32fb,_0x1bb42b,_0x3d083f){return _0x47f6d7(_0x4f8648-0x43,_0x5d32fb-0x5a,_0x5d32fb- -0x4a1,_0x4f8648);}_0x39709e[_0x81133c(0x160,0xd7,0x163,0x46)]='fGwHd',_0x39709e['EmhOg']=function(_0x3ae25f,_0x2ea4f9){return _0x3ae25f+_0x2ea4f9;};const _0x1790b2=_0x39709e;if(crypto&&crypto[_0x2f688b(0x51,0xca,0xcb,0x47)]){if(_0x1790b2['PRLLZ'](_0x2f688b(-0xb,-0xc,-0xa,-0x38),_0x1790b2[_0x2f688b(0xeb,0x5a,0x1f,0x2b)])){const _0xa0e1e3=_0x2c4b7b[_0x50c0f8]||_0x1790b2[_0x81133c(0x1d8,0x151,0x10e,0x17a)],_0x13d48f=_0x356d0a[_0xe77a66];_0x39e572+='•\x20'+_0x5d7d92[_0x38807c]+':\x0a',_0x59e2d7+='\x20\x20旧:\x20'+_0xa0e1e3['substring'](0x1*0x126a+0x49a*-0x5+0x498,-0x3*0x6f1+-0x1*-0x1f29+-0xa24)+(_0x1790b2['wcPOZ'](_0xa0e1e3[_0x2f688b(0x80,0xab,0x106,0xc1)],0x18*-0xbb+0x4*0x49c+-0xe*0xd)?_0x1790b2['qXfZX']:'')+'\x0a',_0x556f04+=_0x2f688b(0xfd,0xe8,0x12f,0x5f)+_0x13d48f['substring'](0x2ec+-0x1829+0x153d,0x1*0x2584+-0x1e05+-0x74d)+(_0x1790b2[_0x2f688b(-0x5,0x78,0xca,0xfd)](_0x13d48f[_0x2f688b(0x53,0xab,0xad,0x2d)],-0x1e3b*0x1+-0x26a4+0x4511)?_0x2f688b(0xf8,0xe9,0xf1,0xb9):'')+'\x0a\x0a',_0x51b70b++;}else return crypto[_0x2f688b(0xb1,0xca,0x12b,0x32)]();}function _0x81133c(_0x5eea98,_0x4bb08b,_0x922e2e,_0x44e9fe){return _0x47f6d7(_0x5eea98-0x37,_0x4bb08b-0xa6,_0x4bb08b- -0x424,_0x922e2e);}return _0x1790b2[_0x81133c(0x42,0xcd,0xb0,0x46)](Date[_0x81133c(0x1a5,0x173,0x12d,0x104)]()[_0x2f688b(0x68,0x2,-0x52,0x25)](-0xda+0x4d6*-0x7+0x22d8),Math[_0x2f688b(-0x89,-0x20,-0x5b,-0x6b)]()[_0x2f688b(0x5c,0x2,0x35,0x5d)](-0x617*0x1+-0x1*-0x1261+-0x2*0x613)[_0x2f688b(0x7b,0x86,0xe6,0xca)](-0x2246*0x1+0x1b01+0x9*0xcf));}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){function _0x3ca33c(_0x1b04cd,_0x31d048,_0x30c236,_0x1d2747){return _0x47f6d7(_0x1b04cd-0x44,_0x31d048-0x1ed,_0x1b04cd- -0x5f5,_0x30c236);}const _0x41e148={'OkNoP':function(_0x8ea612,_0x21ff30){return _0x8ea612!==_0x21ff30;},'OCEcu':'FoQcT','ypcUG':function(_0x3d6181,_0x346a35){return _0x3d6181(_0x346a35);},'zOyqx':_0x3ca33c(-0x124,-0x1b9,-0x174,-0x142)+'时','QRGsi':function(_0x41e1ed,_0x4e807f){return _0x41e1ed!==_0x4e807f;},'WoOji':function(_0x23ad67){return _0x23ad67();},'xTESE':function(_0x5cf93e,_0x452b07,_0xf26328){return _0x5cf93e(_0x452b07,_0xf26328);}};return new Promise((_0x3b7228,_0x33a24f)=>{const _0x5e5617={'ZjMpI':function(_0x4e0a9a,_0x28f7ad){function _0x34cc02(_0x170e3d,_0x135960,_0x2139a7,_0x2d6e80){return _0x324a(_0x170e3d- -0x42,_0x135960);}return _0x41e148[_0x34cc02(0x15d,0x134,0xff,0xf1)](_0x4e0a9a,_0x28f7ad);}},_0x429461=_0x41e148[_0x506ee4(0x6f,0xc7,0xfc,0x139)](generateRequestId);console[_0x132bc9(0x3d5,0x312,0x352,0x336)]('[outfitPro'+_0x132bc9(0x2ca,0x2c4,0x276,0x1e6)+_0x506ee4(0x190,0x183,0x196,0x1e7)+_0x506ee4(0x108,0xc2,0x14f,0x151)+_0x132bc9(0x2f6,0x22b,0x28f,0x222)+_0x132bc9(0x2b0,0x2d1,0x27b,0x1f6)+_0x429461+')');const _0xe8b327=_0x40845d=>{function _0x50797f(_0x579473,_0x3e9f57,_0x36b90a,_0x7d32d){return _0x506ee4(_0x579473-0x126,_0x3e9f57-0x1b7,_0x7d32d-0x88,_0x579473);}if(_0x5e5617['ZjMpI'](_0x40845d['id'],_0x429461))return;function _0x267c72(_0x3ce469,_0x163be5,_0x38607e,_0x18a51e){return _0x132bc9(_0x3ce469-0x60,_0x163be5-0x17b,_0x38607e-0x48,_0x163be5);}eventSource[_0x50797f(0x26a,0x266,0x294,0x25f)+_0x267c72(0x2ac,0x273,0x2ea,0x263)](eventNames['LLM_CHAR_M'+'ODIFY_GET_'+_0x50797f(0x201,0x248,0x1f7,0x208)+'PONSE'],_0xe8b327),_0x3b7228(_0x40845d[_0x267c72(0x2ef,0x33a,0x309,0x2d5)]);};eventSource['on'](eventNames['LLM_CHAR_M'+_0x506ee4(0x25a,0x274,0x214,0x273)+'PROMPT_RES'+_0x506ee4(0x13e,0x15d,0x107,0xe1)],_0xe8b327);function _0x132bc9(_0x1ecda0,_0x288524,_0x268260,_0x1751ea){return _0x3ca33c(_0x268260-0x3ac,_0x288524-0x3e,_0x1751ea,_0x1751ea-0x3d);}const _0x5ba6c0={};function _0x506ee4(_0x1e7609,_0x49303c,_0x6a148d,_0x440dc8){return _0x3ca33c(_0x6a148d-0x271,_0x49303c-0xca,_0x440dc8,_0x440dc8-0x61);}_0x5ba6c0['id']=_0x429461,eventSource[_0x132bc9(0x26b,0x275,0x2ae,0x25a)](eventNames['LLM_CHAR_M'+_0x132bc9(0x3df,0x2df,0x34f,0x2c6)+_0x132bc9(0x32d,0x296,0x326,0x363)+'UEST'],_0x5ba6c0),_0x41e148[_0x132bc9(0x1e8,0x26a,0x271,0x1dd)](setTimeout,()=>{function _0x2bd5fe(_0xd368f7,_0x494716,_0x236a99,_0xa66cd9){return _0x506ee4(_0xd368f7-0x1ad,_0x494716-0xc7,_0xd368f7-0x372,_0x494716);}function _0x4fdab(_0x59985f,_0x563563,_0x1c3d8c,_0x21bebf){return _0x506ee4(_0x59985f-0x17c,_0x563563-0xd9,_0x59985f- -0x1c8,_0x21bebf);}_0x41e148[_0x4fdab(-0xc0,-0xb2,-0x143,-0xb2)]('FoQcT',_0x41e148[_0x2bd5fe(0x4ee,0x543,0x4c4,0x488)])?_0x169bc2='data:image'+_0x2bd5fe(0x4a6,0x517,0x531,0x417)+'4,'+_0x13491b:(eventSource['removeList'+_0x2bd5fe(0x4d9,0x4b3,0x4ca,0x45f)](eventNames[_0x4fdab(-0x3f,-0x9e,0x8,0xb)+_0x2bd5fe(0x586,0x5af,0x61b,0x552)+'PROMPT_RES'+_0x2bd5fe(0x479,0x4e7,0x42c,0x484)],_0xe8b327),_0x41e148[_0x4fdab(-0x7a,-0x10b,-0xf9,-0x2f)](_0x33a24f,new Error(_0x41e148[_0x4fdab(0x4,0x5,-0x70,0x62)])));},-0x1697+-0x43bd+0x8164);});}export function LLM_OUTFIT_MODIFY(_0x4625fc,_0x2dcce9={}){function _0x308bdd(_0x4cbe41,_0x6f3350,_0x5b45d1,_0x1ceb53){return _0x47f6d7(_0x4cbe41-0xc5,_0x6f3350-0x54,_0x5b45d1- -0x456,_0x4cbe41);}const _0x47cb6f={'iahPg':function(_0x5ed1da,_0x301658){return _0x5ed1da!==_0x301658;},'EUKXw':function(_0x465ed0,_0x5168c2){return _0x465ed0(_0x5168c2);},'uLwvb':_0x308bdd(0x1a,0xcb,0x43,-0x26),'DRYwE':_0x308bdd(-0x59,0x11,0x38,0x8e),'SFCwX':'text','GLljX':function(_0x2538d9,_0x5079e4,_0x3f0ec6){return _0x2538d9(_0x5079e4,_0x3f0ec6);}};function _0x16947c(_0x2cf160,_0x191a43,_0x2beb46,_0x2c8015){return _0x47f6d7(_0x2cf160-0x137,_0x191a43-0x1c5,_0x2cf160- -0x3cf,_0x191a43);}return new Promise((_0x2d117b,_0x420dad)=>{const _0x44cbac={'ZsQyl':function(_0x4767f1,_0x42319f){return _0x4767f1===_0x42319f;},'WSBCX':_0x47cb6f['SFCwX'],'KhhmA':function(_0x5ec7fa,_0x814765){function _0x2e5d4a(_0x3c5b9f,_0x2dd468,_0x257c42,_0x143cb9){return _0x324a(_0x2dd468-0x17f,_0x257c42);}return _0x47cb6f[_0x2e5d4a(0x340,0x3a9,0x3b1,0x3a4)](_0x5ec7fa,_0x814765);}},_0x49dc11=generateRequestId(),_0x3d3227=_0x2dcce9[_0xa8e090(0x530,0x567,0x539,0x524)]||0xf9*0x12e+-0x7*0x341b+0x3d13*0x5;console['log'](_0xa8e090(0x54c,0x46e,0x4e4,0x4c1)+'mptModify]'+_0xa8e090(0x5bc,0x4a6,0x52f,0x4f1)+_0xa8e090(0x57a,0x4b3,0x4e2,0x577)+'dify\x20LLM\x20r'+_0x5b4c2a(-0x25e,-0x186,-0x1d4,-0x244)+':\x20'+_0x49dc11+')');const _0x1582f0=_0x4a6995=>{function _0x338d74(_0x1a4c10,_0x5c6b6f,_0x2e2ccb,_0x55b190){return _0x5b4c2a(_0x1a4c10-0xbf,_0x2e2ccb,_0x5c6b6f-0x70a,_0x55b190-0xcd);}if(_0x47cb6f['iahPg'](_0x4a6995['id'],_0x49dc11))return;eventSource[_0x338d74(0x52d,0x519,0x58b,0x524)+_0x246072(0x27b,0x2d8,0x2e2,0x2a3)](eventNames['LLM_CHAR_M'+_0x338d74(0x578,0x4e2,0x551,0x524)+_0x246072(0x30b,0x2d9,0x2c0,0x272)],_0x1582f0);function _0x246072(_0xbfb9bc,_0x5e6a51,_0x178206,_0x1d3491){return _0xa8e090(_0xbfb9bc-0xe1,_0xbfb9bc,_0x5e6a51- -0x1bf,_0x1d3491-0x88);}if(_0x4a6995['success'])_0x47cb6f[_0x338d74(0x4f5,0x55e,0x52b,0x5e8)](_0x2d117b,_0x4a6995[_0x338d74(0x4ee,0x551,0x541,0x5d7)]);else{if(_0x47cb6f[_0x246072(0x337,0x33c,0x37b,0x35b)]===_0x47cb6f[_0x338d74(0x479,0x50d,0x504,0x54b)])_0x420dad(new Error(_0x4a6995[_0x246072(0x33f,0x380,0x318,0x358)]||_0x47cb6f[_0x338d74(0x450,0x4e4,0x46f,0x54f)]));else{if(_0x44cbac[_0x246072(0x2b4,0x328,0x380,0x2d3)](_0x46e5fb[_0x338d74(0x4e5,0x4d6,0x468,0x540)],_0x44cbac[_0x246072(0x2a0,0x2d5,0x266,0x333)])&&_0x283737[_0x246072(0x387,0x31e,0x315,0x2a2)]['includes'](_0x3d40d3))return _0x3a0631;}}};eventSource['on'](eventNames[_0x5b4c2a(-0x251,-0x1c7,-0x23f,-0x220)+_0x5b4c2a(-0x194,-0x217,-0x228,-0x29f)+_0xa8e090(0x440,0x47d,0x498,0x432)],_0x1582f0);const _0x3858a5={};function _0x5b4c2a(_0xac6667,_0x25e114,_0x5c89be,_0x25f87f){return _0x308bdd(_0x25e114,_0x25e114-0x1ae,_0x5c89be- -0x2f6,_0x25f87f-0x81);}function _0xa8e090(_0x5bab31,_0x4baade,_0x3a1a81,_0xb7adc2){return _0x308bdd(_0x4baade,_0x4baade-0x164,_0x3a1a81-0x402,_0xb7adc2-0x1e1);}_0x3858a5[_0x5b4c2a(-0x2b9,-0x1d2,-0x242,-0x276)]=_0x4625fc,_0x3858a5['id']=_0x49dc11,eventSource['emit'](eventNames[_0xa8e090(0x49b,0x4e2,0x4b9,0x548)+_0xa8e090(0x40c,0x463,0x43b,0x4b0)+_0xa8e090(0x4bb,0x52b,0x52d,0x50c)],_0x3858a5),_0x47cb6f[_0x5b4c2a(-0x205,-0x156,-0x1bd,-0x1f7)](setTimeout,()=>{function _0x2d395d(_0x35d2c9,_0x1a1ea9,_0x470d34,_0x1c1db1){return _0x5b4c2a(_0x35d2c9-0x18f,_0x35d2c9,_0x1a1ea9-0x6c3,_0x1c1db1-0x1ea);}function _0x56516c(_0x58fc4d,_0x485ab7,_0x1fe6f6,_0x32bea8){return _0xa8e090(_0x58fc4d-0x1af,_0x485ab7,_0x58fc4d- -0x670,_0x32bea8-0xed);}eventSource[_0x2d395d(0x46c,0x4d2,0x4d7,0x509)+_0x2d395d(0x44c,0x462,0x4a4,0x3fb)](eventNames[_0x2d395d(0x42a,0x484,0x477,0x408)+'ODIFY_RESP'+_0x2d395d(0x40b,0x463,0x4c4,0x4d2)],_0x1582f0),_0x44cbac[_0x2d395d(0x464,0x4eb,0x458,0x575)](_0x420dad,new Error('服装修改\x20LLM\x20请'+_0x2d395d(0x49a,0x4a6,0x493,0x44f)));},_0x3d3227);});}function _0x324a(_0x2cda3c,_0x42c1b6){_0x2cda3c=_0x2cda3c-(-0x1*0x78b+-0x2e8+0xb77);const _0x27f06a=_0x1dea();let _0x37b0c6=_0x27f06a[_0x2cda3c];if(_0x324a['sUiddn']===undefined){var _0x28db03=function(_0x42f645){const _0x5a2f6c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1ea082='',_0x2063e5='',_0x499099=_0x1ea082+_0x28db03;for(let _0x813ad5=0x222+-0x1*-0x115f+-0x1381,_0x539293,_0x162798,_0x22193d=-0x83*0x20+-0x1da8+0x2e08;_0x162798=_0x42f645['charAt'](_0x22193d++);~_0x162798&&(_0x539293=_0x813ad5%(-0x25fb+0xc2e+0x19d1)?_0x539293*(0x968*-0x4+-0x651+0x2c31)+_0x162798:_0x162798,_0x813ad5++%(0xc44+0x2568+-0x31a8))?_0x1ea082+=_0x499099['charCodeAt'](_0x22193d+(-0x12*-0x83+0x99+-0x9c5*0x1))-(-0xe9*-0x7+0xddb+-0x1430)!==0x305*0xb+-0x71*-0x47+0x2047*-0x2?String['fromCharCode'](0x153*-0x16+0x7a*-0xb+0x235f&_0x539293>>(-(0x94f*0x3+0x2f*-0x3+-0x1b5e)*_0x813ad5&-0x100a*-0x2+-0x1e56+0x14*-0x16)):_0x813ad5:-0x1fc7+-0x167c+-0x3643*-0x1){_0x162798=_0x5a2f6c['indexOf'](_0x162798);}for(let _0x3e78f8=0x1*-0x199b+0x8f*-0x41+0x3dea,_0x579c2f=_0x1ea082['length'];_0x3e78f8<_0x579c2f;_0x3e78f8++){_0x2063e5+='%'+('00'+_0x1ea082['charCodeAt'](_0x3e78f8)['toString'](0x1514*0x1+0x13f+-0x1643))['slice'](-(-0x15d+0x245b+-0x22fc));}return decodeURIComponent(_0x2063e5);};_0x324a['XRjfXP']=_0x28db03,_0x324a['BVXgdk']={},_0x324a['sUiddn']=!![];}const _0x84976a=_0x27f06a[-0x2cd*0x3+0x633*-0x2+0x14cd],_0x405b88=_0x2cda3c+_0x84976a,_0x6d8dea=_0x324a['BVXgdk'][_0x405b88];if(!_0x6d8dea){const _0x5f5674=function(_0x47663d){this['PMmLxM']=_0x47663d,this['mFXpPQ']=[0xa7d+-0x155c*-0x1+-0x1fd8,0x2691+0x94d+-0x16*0x22d,0x163e+0x411+-0xf*0x1c1],this['dWdPRU']=function(){return'newState';},this['iryiKD']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['CqTMFN']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5f5674['prototype']['KQBTJo']=function(){const _0x501456=new RegExp(this['iryiKD']+this['CqTMFN']),_0x53df7f=_0x501456['test'](this['dWdPRU']['toString']())?--this['mFXpPQ'][0x553*0x5+0xf7d*0x1+0xe09*-0x3]:--this['mFXpPQ'][0x16e6*-0x1+0x4*-0x83c+-0x7*-0x7fa];return this['PFHebu'](_0x53df7f);},_0x5f5674['prototype']['PFHebu']=function(_0x148bfe){if(!Boolean(~_0x148bfe))return _0x148bfe;return this['ULSLYA'](this['PMmLxM']);},_0x5f5674['prototype']['ULSLYA']=function(_0x86a0e3){for(let _0x412b3c=0x1594+-0x39*0x63+0x77,_0x40626c=this['mFXpPQ']['length'];_0x412b3c<_0x40626c;_0x412b3c++){this['mFXpPQ']['push'](Math['round'](Math['random']())),_0x40626c=this['mFXpPQ']['length'];}return _0x86a0e3(this['mFXpPQ'][0x1d35+0xb7+-0x1dec]);},new _0x5f5674(_0x324a)['KQBTJo'](),_0x37b0c6=_0x324a['XRjfXP'](_0x37b0c6),_0x324a['BVXgdk'][_0x405b88]=_0x37b0c6;}else _0x37b0c6=_0x6d8dea;return _0x37b0c6;}function preprocessTagContent(_0x5e6452){function _0x2c10eb(_0x5739e2,_0x5e5b77,_0x45bb31,_0x5024b3){return _0x47f6d7(_0x5739e2-0x1b4,_0x5e5b77-0x1f,_0x5739e2- -0x13d,_0x5024b3);}function _0x4c7d8b(_0x2fd511,_0x34cd37,_0x736ffb,_0x37a83f){return _0x47f6d7(_0x2fd511-0x4a,_0x34cd37-0x91,_0x37a83f- -0x61,_0x736ffb);}let _0x294be7=_0x5e6452[_0x4c7d8b(0x542,0x59a,0x556,0x540)](/:/g,':')[_0x4c7d8b(0x527,0x518,0x528,0x540)](/\(/g,'（')[_0x4c7d8b(0x566,0x5a8,0x569,0x540)](/\)/g,'）')[_0x4c7d8b(0x5c6,0x575,0x561,0x540)](/,/g,',');return _0x294be7;}function _0x1dea(){const _0x5a3747=['6k+35ywi6ycj5OUP5lIa5lIQ5PYn6kof6Ake6k6+','tgntzwC','5lIl5y2k6lQR6iom6z2IoIa','r0TJvMW','Bxb0tw9KAwz5xq','yxv0BW','BuLlr0O','uMD4ywe','z2v0rwXLBwvUDa','ChqGkeLeoIa','r0vTDhy','DhjPz2DLCG','y3PAtLi','zMLSDgvY','DeXqBLG','yMXhB3a','y29UC3rYDwn0BW','Bxb0oG','Aw1Hz2vZihrVia','s09tAvq','yvrYA1u','5PYn6kof5O+q56s66k+n5l+U5Ps55AsX6lsLoG','6i635y+w5PYn6kof5l+U5Ps55O+q56s66k+n6lAf','ExbJvuC','zYbVDxrMAxqGBq','qNLjza','yMfZzty0','5yEg5Ash5PU05PAW5PYn6kofici','5PYn6kof5l+U5Ps5ieXmtsdOR7C','B2rPzNKGChjVBq','sgnWv0C','CwHIv3O','zLLICLa','C0HuwfK','wKPADva','C3nHz2uGAw5Kzq','AMn1zMu','zLDoExC','Agnbuem','B3v0zML0CW','q0HfCfy','5PYQ5zYOieXmtsdOVPpLH7RKUk0','Aw5MBW','5PYn6kof5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','5Q2J5zYO5Ase55cg5PYn6kof5O+q56s66k+n5l+U','v1ncq1G','v0n2r2y','te1Yr1y','zw5LCG','t05trq','BwvZC2fNzq','txjgB3e','B0rLrwK','B05hvgq','rw1Ot2C','t2rTzfC','twrlDvu','ywnR','wMnOtgS','kcGOlISPkYKRkq','zw1PDa','u3Dqvha','B3v0zML0ihbYBW','zxHLyW','rffmAeC','B29ryNC','ihjLCxvLC3qUlG','te9oB0u','BLrPqLu','t0nfy3u','E3VNLkJMIlFPNidMSyj9Fq','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','BgvfCgm','ufjptvbux1jfuW','z3HIvva','igrHDge6','DNrYBfe','uwvZt1e','ien1CNjLBNqGCa','ChjVBxb0','EKvyEKO','CKDItgW','teXnx0niqvjFtq','E3VKUjBNLyZKUABOP6BLJ5f9Fq','DwTSAgu','iIdNMOtKU6xKUiVMLBdMJA46cGO','DhjPBq','Cg5xzKG','rg1Lt0q','CNnIr20','uvjhC2K','qvfoquK','ioACQUIVHUwiQ+EAHoACJEIJHEwTL+AUTsa','DhLWzq','ugXjC0O','ifjLCxvLC3rPBG','y2HHCL9TB2rPzG','tvfot0e','uKLVru8','C1vXC0q','C3rHCNrZv2L0Aa','B2rQzLq','EvzNAwS','qxrWBxi','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','t0rjrLLFuKvtua','v1PkrKi','rfjzD0u','C3vIC3rYAw5N','Cg5frxu','CxfvteC','s1roAgu','BwfW','ief0DgfJAgvK','quzJwM8','6iUX5PAh5zcn56EWoIa','5Rgc6lAf5PE2','C3rYAw5N','Dgv4Da','wMnJsKC','yxbWBhK','D2fYBMLUzW','vvf1A2y','ig91DgzPDcbTBW','DxbWzxjcB2r5qG','w291DgzPDfbYBW','uhrktNq','u3feExe','wNnrEwW','ywrK','mtKZota2BvrmBKHn','AevZthC','B2jQzwn0','iezPBMfSihbYBW','yLrotxG','koEPUIK','nZmXmdCZrMnXthrO','AM9PBG','Ae5KyNu','C09Hyvm','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','DxjS','B3fls3m','s3n2BKy','vfHREgG','BgvUz3rO','5lIk5y2k6lQR','B2z2Cwe','DuX3DMi','EK95CxG','nduZnJGWu3bfs3np','AfHyrKG','wNDwt3y','5OM+5lIn5yIW5OYh5A6A55Qe5PYn6kof6Ake6k6+','Aw5WDxq','wfDfzvG','A3nJtwy','AuDqqxC','y29UDgvUDa','rvfhq1u','CMvTB3zLtgLZDa','rvzmuKO','v3fmrvy','ru5vthu','iev4DhjHy3rLza','zM9YrwfJAa','nwLODuTfDq','ChvZAa','AerRvMO','AvLuEfm','5lIT5PAh5zcn56EW','AxnbCNjHEq','Aw1Hz2vFDxjS','ENHRAuW','qu9lwhi','6kkR5l2/55sO77YA','CMfUzg9Tvvvjra','5lIl5y2k6lQR6iom6z2I','B1jNz3K','zNvSBejVzhLcyq','ufjptvbux1jfuq','zgH4Dxu','5lIk5y2k6lQR6iom6z2I','BNb1tLu','wKLcyvG','s2HOBue','s0XbueK','AfbNB2W','t0nlDfC','zxf1zxn0icHjra','AeTxtuW','v3PtDxi','ioINO+AEKowiSoEAHoACJEIJHEAvSoAnRJO','rfbzEM8','y0jyvgy','Efr4yKy','z3DIz1q','zxrZ','rvnu','DMfSDwu','iev4zwn1DgLUzW','poACJEIJHt4k','AvzUzu4','wNLdsNG','zhvnBKK','q0n6wNy','icdMLRa6ia','lI4U','v0LbtM0','5Qoa5Rwl5yIW5PYn6kof5Qch562+','DgLTzw91De1Z','C3vJy2vZCW','r0XSALG','Be1iuwS','C3bSAxq','5y+c6icd5zU+54Mh','CMvZDwX0','AxjLBwvUDcbTzq','BMfTzuno','DxrWDxqGzM9Yia','BM93','t0rjrLLFr0vuxW','AwPNvfe','wvjPEwy','Bg9N','BMfTzuvo','sKXLqvm','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','Aw5JBhvKzxm','rvvlwhC','CMvWBgfJzq','BuLNtNe','t29qthi','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','nZGZntK0owPbsfPzDG','E3VLVzpLIy3OP5lOIBj9Fq','tNDmyKe','z2v3CfO','Au5guLO','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','z3jHuK0','mtvMqxPZv3u','AhzZuNu','DuH0qKS','v29pAMK','CMfUzg9T','BLfHzvK','mtq2ndCYywvkuNjK','i3n0lwnOyxr1oa','DxbWzxjcB2r5','y3rLCG','vKDUyxm','vgzUvgu','zNvSBejVzhK','zgf0ytO','ue9ou0u','t2ToB1a','5lIl5y2k6lQRoIa','teXnioIVT+AXGUwKSEI0Pq','t0rjrLLFuKvrvq','ruDksuW','yufWrMe','BMfTzq','v3HHvLa','q0jizvC','zKD3sgq','5lIl5y2k6lQR','C2vHCMnO','v29Ayue','vNrRzvG','igLUzgv4','uNv4qMm','BgPlve8','Cwnju0e','B3v0zML0uhjLCW','Dwj4A3u','icdML6C6ia','6iUX5PAh5zcn56EW','BeriEhG','Dg9tDhjPBMC','v3btyva','zxjYB3i','nde2mZiXBNLurNbx','uvrHse8','tvf1A3a','rMndqKu','zgf0yq','B3v0zML0xW','D0r2ChC','ieXmtsbVDxrWDq','v0z6wuK','vKjfs0e','5lIk5y2k6lQRoIa','CKXLBMG','vgrKAee','Bxb0ig1VzgLMEq','B0zzu08','yxLZrLC','sNPfAeK','oti1nZq0ueXvtNzo','l3bUzZTIyxnLnG','z05SDvG','Efrfu0u'];_0x1dea=function(){return _0x5a3747;};return _0x1dea();}function _0x47f6d7(_0x2527f7,_0x50452e,_0x16612f,_0x2c95c9){return _0x324a(_0x16612f-0x376,_0x2c95c9);}function parseOutfitData(_0x421e18){const _0x35052c={'iGPAw':function(_0x582089,_0x560468){return _0x582089!==_0x560468;},'OYbXZ':function(_0xf25f82,_0x209ff8){return _0xf25f82(_0x209ff8);},'mIKGJ':function(_0x10dc4b,_0x472c89){return _0x10dc4b(_0x472c89);},'xxmqM':_0x10eedc(0x27d,0x2d9,0x2a6,0x34e)+'时','bOgnP':'nameCN','dhxuu':'upperBody','CCzZv':'fullBody','EGDLe':'fullBodyBa'+'ck','sOaaS':_0x10eedc(0x3d6,0x384,0x30f,0x3f8),'WFzYI':_0x10eedc(0x417,0x37f,0x3bf,0x325),'WqLEV':function(_0x1dc0a8,_0x583264){return _0x1dc0a8+_0x583264;},'leEpc':function(_0x24910d,_0x5c9a7f){return _0x24910d===_0x5c9a7f;},'KOSiT':_0x47232e(0x3b8,0x30d,0x38e,0x32a)};function _0x10eedc(_0x42d494,_0x110929,_0x678aae,_0xd04f33){return _0x47f6d7(_0x42d494-0x7d,_0x110929-0x16,_0x110929- -0x1f8,_0xd04f33);}const _0x14b7bf=_0x421e18[_0x10eedc(0x42e,0x399,0x393,0x425)]('\x0a')[_0x10eedc(0x2c8,0x333,0x2d2,0x2e7)](_0x5f0c46=>_0x5f0c46[_0x47232e(0x348,0x2e8,0x308,0x2f6)]())[_0x10eedc(0x2b0,0x2d0,0x26a,0x364)](_0x5dfacc=>_0x5dfacc),_0x51321={};_0x51321[_0x47232e(0x3c7,0x373,0x3f1,0x37a)]='',_0x51321[_0x47232e(0x31e,0x3c2,0x306,0x381)]='',_0x51321[_0x47232e(0x1db,0x2c9,0x1fc,0x26a)]='',_0x51321[_0x47232e(0x316,0x2c0,0x2c2,0x31c)+_0x10eedc(0x37f,0x2fc,0x38d,0x385)]='',_0x51321[_0x47232e(0x256,0x2e7,0x206,0x26e)]='',_0x51321['fullBodyBa'+'ck']='';const _0x1ecba9=_0x51321,_0x355827={};_0x355827[_0x10eedc(0x3a8,0x36d,0x3db,0x2e1)]=_0x35052c['bOgnP'],_0x355827[_0x10eedc(0x236,0x2a9,0x24f,0x29e)]='nameEN',_0x355827[_0x10eedc(0x360,0x355,0x33c,0x3c0)]=_0x35052c[_0x10eedc(0x3cc,0x378,0x3f7,0x34d)],_0x355827['上半身背面']=_0x10eedc(0x396,0x33f,0x30f,0x337)+'ack',_0x355827['下半身']=_0x35052c[_0x10eedc(0x384,0x390,0x412,0x3bd)],_0x355827['下半身服装']=_0x35052c[_0x47232e(0x3a0,0x2f2,0x3d0,0x36d)],_0x355827[_0x10eedc(0x38a,0x374,0x2fa,0x35f)]=_0x35052c['EGDLe'];const _0x3d38a2=_0x355827;for(const _0x4a5306 of _0x14b7bf){if(_0x35052c[_0x10eedc(0x323,0x360,0x31d,0x343)](_0x35052c[_0x10eedc(0x325,0x34e,0x323,0x32f)],_0x35052c[_0x47232e(0x2ff,0x289,0x28e,0x293)])){const _0x593b36=_0x4a5306['indexOf'](':');if(_0x593b36===-(-0x1abd+0x12a1+0x81d))continue;const _0x5b7af9=_0x4a5306[_0x10eedc(0x2b7,0x32f,0x38f,0x349)](-0x1456+0x2368+-0xf12,_0x593b36)[_0x47232e(0x28c,0x319,0x354,0x2f6)](),_0x1e0be0=_0x4a5306[_0x47232e(0x31e,0x37d,0x2be,0x30c)](_0x35052c[_0x47232e(0x38e,0x3cc,0x3a2,0x342)](_0x593b36,-0x1597+-0x44*0x1+-0x2*-0xaee))[_0x47232e(0x2a0,0x34d,0x2e9,0x2f6)]();if(_0x3d38a2[_0x5b7af9])_0x1ecba9[_0x3d38a2[_0x5b7af9]]=_0x1e0be0;else _0x5b7af9&&_0x1e0be0&&console['log']('[outfitPro'+_0x10eedc(0x27d,0x2c7,0x260,0x304)+_0x10eedc(0x2ec,0x31f,0x3af,0x354)+'\x22'+_0x5b7af9+'\x22');}else{if(_0x35052c[_0x47232e(0x379,0x3ce,0x388,0x33d)](_0x1ec8cd['id'],_0x3c101c))return;_0x2443b9[_0x47232e(0x2b0,0x316,0x33c,0x340)+'ener'](_0x23ddb9['LLM_CHAR_M'+'ODIFY_GET_'+_0x47232e(0x315,0x312,0x2ee,0x2e9)+_0x10eedc(0x315,0x293,0x308,0x274)],_0x12ec81),_0x35052c['OYbXZ'](_0x2154d9,_0xcaf6cf[_0x10eedc(0x357,0x312,0x2c3,0x36e)]);}}if(!_0x1ecba9['nameCN']){if(_0x35052c[_0x47232e(0x29a,0x2f6,0x26c,0x2e8)](_0x10eedc(0x2db,0x34d,0x2dc,0x355),_0x35052c[_0x10eedc(0x2b7,0x2d6,0x34e,0x2c4)]))return null;else _0x5bfe9d[_0x10eedc(0x3af,0x363,0x343,0x338)+_0x47232e(0x323,0x2d8,0x2c8,0x2d0)](_0x1d4c0f[_0x10eedc(0x2c8,0x315,0x2a6,0x3a7)+_0x47232e(0x39f,0x344,0x31f,0x37d)+_0x47232e(0x292,0x2ef,0x2de,0x2e9)+_0x47232e(0x265,0x231,0x26d,0x270)],_0x59606a),_0x35052c[_0x10eedc(0x253,0x2c9,0x2f2,0x357)](_0x2d211f,new _0x2a0582(_0x35052c['xxmqM']));}console['log'](_0x47232e(0x286,0x330,0x3a2,0x31d)+_0x47232e(0x28a,0x30a,0x23e,0x2a4)+_0x47232e(0x2d1,0x2dc,0x2ee,0x360),_0x1ecba9);function _0x47232e(_0x436b78,_0x2ebf37,_0x3f5598,_0x766151){return _0x47f6d7(_0x436b78-0xbf,_0x2ebf37-0x140,_0x766151- -0x21b,_0x436b78);}return _0x1ecba9;}function extractOutfitTags(_0x21488e){const _0x5745c3={'hEsLw':function(_0x37c75a,_0x3cc650){return _0x37c75a!==_0x3cc650;},'gNluX':function(_0x350a4c,_0x3fc5c8){return _0x350a4c(_0x3fc5c8);},'hvsRu':function(_0x4764bc,_0x49c163){return _0x4764bc(_0x49c163);}},_0x2bc8dc={};function _0x917fec(_0x2bd997,_0x3f9c8b,_0xaed7bc,_0x5547e8){return _0x47f6d7(_0x2bd997-0xee,_0x3f9c8b-0x17f,_0xaed7bc- -0x57,_0x2bd997);}function _0x1a2cc7(_0x22df08,_0x44a92d,_0x579647,_0x5a7cba){return _0x47f6d7(_0x22df08-0x1b9,_0x44a92d-0x4b,_0x22df08- -0x177,_0x5a7cba);}_0x2bc8dc[_0x917fec(0x41e,0x51f,0x48b,0x429)]=[];const _0x5bf2c8=_0x2bc8dc;_0x21488e=_0x21488e[_0x917fec(0x4ca,0x5b4,0x54a,0x4e0)](/<thinking>[\s\S]*?<\/thinking>/gi,'')['trim']();const _0x56f2a6=/<服装>([\s\S]*?)<\/服装>/g;let _0x209994;while(_0x5745c3[_0x917fec(0x44f,0x497,0x4e7,0x4e9)](_0x209994=_0x56f2a6[_0x917fec(0x4f9,0x4e2,0x4a3,0x46e)](_0x21488e),null)){const _0x400f89=_0x5745c3[_0x1a2cc7(0x342,0x2f2,0x361,0x337)](preprocessTagContent,_0x209994[-0x1752+0x12af*0x1+-0x9*-0x84]),_0x197d17=_0x5745c3[_0x1a2cc7(0x307,0x271,0x273,0x2b5)](parseOutfitData,_0x400f89);_0x197d17&&_0x5bf2c8[_0x917fec(0x4b9,0x47b,0x48b,0x422)]['push'](_0x197d17);}return _0x5bf2c8;}function getCurrentOutfitPreset(){const _0x2be4e0={'OoPLr':function(_0x39f45a,_0xef0784,_0x4ea544,_0x363630,_0x19f50a){return _0x39f45a(_0xef0784,_0x4ea544,_0x363630,_0x19f50a);},'PEnyz':_0x4002e3(0x3ec,0x3d7,0x487,0x41e),'npuNU':_0x4002e3(0x48c,0x489,0x3e6,0x440)};function _0x4002e3(_0x8e8da6,_0x3235bf,_0x4e31aa,_0x40022a){return _0x47f6d7(_0x8e8da6-0x9d,_0x3235bf-0x1e5,_0x40022a- -0x123,_0x4e31aa);}const _0x1e64ba=extension_settings[extensionName],_0x6b5c2a=_0x1e64ba['outfitPres'+'etId'];function _0xc80827(_0x2f6f4e,_0x48f3ea,_0x1452ee,_0xde4f47){return _0x47f6d7(_0x2f6f4e-0x82,_0x48f3ea-0x51,_0x1452ee- -0x5e1,_0xde4f47);}if(!_0x6b5c2a||!_0x1e64ba[_0xc80827(-0x120,-0xdd,-0x143,-0x10a)+_0xc80827(-0x8d,-0x93,-0x61,-0x36)][_0x6b5c2a]){if(_0x2be4e0['PEnyz']===_0x2be4e0[_0xc80827(-0x72,0xe,-0x6f,-0xe8)])_0x1ebbbc[_0x4a06a4]=_0x2be4e0[_0xc80827(0x42,0x23,-0x3e,0x5)](_0x14c8c5,_0x2ca449[_0x5e02bd],_0x1aa307,_0x24f6d4,_0x5355a8);else return null;}const _0x394ba8={};return _0x394ba8['id']=_0x6b5c2a,_0x394ba8[_0xc80827(-0x101,-0x128,-0x137,-0x178)]=_0x1e64ba[_0xc80827(-0xf7,-0x17e,-0x143,-0x1ab)+_0x4002e3(0x3cc,0x426,0x3ef,0x45d)][_0x6b5c2a],_0x394ba8;}function buildOutfitText(_0xa12585){const _0x297399={};_0x297399[_0x3a9f5f(0x54a,0x5e4,0x540,0x598)]='</服装>';function _0x26b6d1(_0x4685a7,_0x20c2af,_0x2c230a,_0x556f9c){return _0x47f6d7(_0x4685a7-0xd1,_0x20c2af-0x28,_0x4685a7- -0x72c,_0x556f9c);}const _0x15b218=_0x297399,_0x3b0383=_0xa12585[_0x26b6d1(-0x282,-0x2c7,-0x2f0,-0x244)];let _0x43c27d=_0x26b6d1(-0x1a8,-0x161,-0x117,-0x16c);_0x43c27d+='中文名称:\x20'+(_0x3b0383['nameCN']||'')+'\x0a',_0x43c27d+=_0x26b6d1(-0x1fe,-0x246,-0x28f,-0x174)+(_0x3b0383[_0x26b6d1(-0x190,-0x1ca,-0x1d8,-0x218)]||'')+'\x0a',_0x43c27d+=_0x26b6d1(-0x27c,-0x21b,-0x215,-0x2f2)+(_0x3b0383[_0x26b6d1(-0x2a7,-0x273,-0x269,-0x339)]||'')+'\x0a',_0x43c27d+='上半身背面:\x20'+(_0x3b0383[_0x26b6d1(-0x1f5,-0x276,-0x239,-0x275)+_0x3a9f5f(0x4c5,0x5cf,0x4d6,0x543)]||'')+'\x0a',_0x43c27d+=_0x26b6d1(-0x29f,-0x330,-0x26b,-0x2e4)+(_0x3b0383[_0x26b6d1(-0x2a3,-0x339,-0x22c,-0x283)]||'')+'\x0a',_0x43c27d+=_0x3a9f5f(0x4be,0x564,0x4a3,0x50c)+(_0x3b0383[_0x26b6d1(-0x1be,-0x1e2,-0x22f,-0x1c6)+'ck']||'')+'\x0a',_0x43c27d+=_0x15b218[_0x26b6d1(-0x1e3,-0x1c8,-0x151,-0x18f)];function _0x3a9f5f(_0x3769b9,_0xc00655,_0x4abe12,_0x275fae){return _0x47f6d7(_0x3769b9-0x168,_0xc00655-0x92,_0x275fae-0x4f,_0x3769b9);}return _0x43c27d;}export async function handleOutfitPromptModify(_0x3c12f8,_0x1ddd2f=[]){const _0x4c341e={'sHTXY':function(_0x1173be,_0x18bbd4){return _0x1173be(_0x18bbd4);},'hYJSc':function(_0x3ca26e,_0x5c765b,_0x23be9e,_0x4f1eae,_0x5d1b2f){return _0x3ca26e(_0x5c765b,_0x23be9e,_0x4f1eae,_0x5d1b2f);},'xGPss':_0x20a136(-0x259,-0x1da,-0x1d5,-0x211)+_0x16f150(0x36c,0x3e4,0x3cc,0x39a)+'\x20Starting\x20'+_0x20a136(-0x231,-0x219,-0x233,-0x28e)+_0x16f150(0x345,0x39a,0x30e,0x38e)+_0x16f150(0x38d,0x43c,0x3c5,0x3d8)+'.','CBHeW':_0x20a136(-0x1ec,-0x22b,-0x1fa,-0x239)+'改请求...','mIgNq':function(_0x281474){return _0x281474();},'kscMf':function(_0x35dc34,_0x1b3c44){return _0x35dc34!==_0x1b3c44;},'sUqsD':_0x16f150(0x486,0x37a,0x385,0x3f1),'rzRkI':_0x16f150(0x3e2,0x39b,0x3b3,0x396),'LcSeg':_0x16f150(0x47f,0x39e,0x45f,0x413)+_0x20a136(-0x238,-0x253,-0x21e,-0x249)+_0x16f150(0x40e,0x440,0x371,0x3e4)+'reset:','WYJIv':function(_0x4023c9,_0x5506b2){return _0x4023c9(_0x5506b2);},'oFYSO':function(_0x4aada2,_0x30f510,_0x108635){return _0x4aada2(_0x30f510,_0x108635);},'NwLbA':_0x16f150(0x445,0x3d6,0x387,0x3f6)+'y','fqhOv':function(_0x596d5f,_0x15d81f,_0x598c96){return _0x596d5f(_0x15d81f,_0x598c96);},'zxkiL':_0x16f150(0x3f4,0x357,0x353,0x3dc),'iVneN':'{{当前服装}}','hXXFH':function(_0x4e3a23,_0x3fed34){return _0x4e3a23||_0x3fed34;},'ZEoeH':_0x16f150(0x3ff,0x508,0x469,0x481),'qcISA':function(_0x4461cb,_0x30e428,_0x538dbe,_0x313bd7,_0x3942d3){return _0x4461cb(_0x30e428,_0x538dbe,_0x313bd7,_0x3942d3);},'aTrkU':'{{上下文}}','ozeXK':'{{角色启用列表}}','rsbGm':_0x20a136(-0x241,-0x1cb,-0x248,-0x17e)+'}}','EQGCU':function(_0x44e3cb,_0x914d52,_0x25cbea,_0x5d6ec4,_0x539a71){return _0x44e3cb(_0x914d52,_0x25cbea,_0x5d6ec4,_0x539a71);},'RuxBc':_0x20a136(-0x23f,-0x297,-0x2f9,-0x2a3)+'}}','MrFoq':function(_0x5b95f8,_0x2270b5){return _0x5b95f8>_0x2270b5;},'WxaVP':_0x20a136(-0x144,-0x180,-0x1f3,-0x1c0),'oDeEi':'[outfitPro'+_0x20a136(-0x285,-0x253,-0x2dc,-0x1fd)+_0x16f150(0x39d,0x3fd,0x43b,0x407),'EGJIL':_0x16f150(0x3ba,0x3c9,0x39f,0x3a8)+'message\x20at'+_0x16f150(0x324,0x319,0x345,0x375),'duMnI':function(_0x39c056,_0x1dcb6a,_0x54edcb){return _0x39c056(_0x1dcb6a,_0x54edcb);},'ZccJG':_0x20a136(-0x1c1,-0x1da,-0x19d,-0x249)+_0x16f150(0x3ea,0x406,0x3b1,0x39a)+_0x20a136(-0x255,-0x265,-0x2af,-0x1e4)+'t:','vtrlQ':function(_0xa745db,_0x164361){return _0xa745db===_0x164361;},'qhbWz':'jcufe','cBXTf':'LLM\x20返回结果为空','pnWfH':_0x16f150(0x38d,0x349,0x3ca,0x3bf)+_0x16f150(0x3fc,0x4d5,0x45a,0x467),'GEmtv':'[outfitPro'+_0x16f150(0x38f,0x35f,0x35d,0x39a)+'\x20Raw\x20LLM\x20o'+_0x16f150(0x450,0x507,0x4c4,0x471)+'debugging:','hcAPC':'[outfitPro'+_0x16f150(0x3e4,0x36b,0x364,0x39a)+_0x16f150(0x480,0x42b,0x42a,0x43a)+_0x16f150(0x3c6,0x473,0x3ac,0x3e1),'JLeAS':_0x16f150(0x368,0x364,0x3ff,0x3c1),'xTxbF':_0x20a136(-0x27e,-0x232,-0x1d4,-0x217),'WBQqs':'FRWPR','lMHQk':_0x16f150(0x46d,0x4a4,0x454,0x413)+_0x16f150(0x373,0x310,0x3ca,0x39a)+'\x20Error:'};function _0x16f150(_0x5ed0c4,_0xfc38c3,_0x187f07,_0x2b6838){return _0x47f6d7(_0x5ed0c4-0x1b2,_0xfc38c3-0x155,_0x2b6838- -0x125,_0x5ed0c4);}function _0x20a136(_0x3acd60,_0x57a3a7,_0x30373d,_0x25dfb9){return _0x47f6d7(_0x3acd60-0x191,_0x57a3a7-0x191,_0x57a3a7- -0x712,_0x3acd60);}console[_0x20a136(-0x1cb,-0x177,-0x106,-0x159)](_0x4c341e['xGPss']),toastr[_0x16f150(0x388,0x33a,0x410,0x3c0)](_0x4c341e[_0x16f150(0x345,0x370,0x374,0x36f)]);try{const _0x4645ab=extension_settings[extensionName],_0x36a213=_0x4c341e[_0x16f150(0x435,0x4d3,0x3f3,0x47d)](getCurrentOutfitPreset);if(!_0x36a213){if(_0x4c341e[_0x16f150(0x39d,0x3bb,0x3bc,0x432)](_0x16f150(0x403,0x50f,0x4d3,0x483),_0x4c341e[_0x20a136(-0x273,-0x1f4,-0x19d,-0x224)])){toastr[_0x20a136(-0x2dd,-0x26d,-0x28a,-0x27b)](_0x4c341e['rzRkI']);return;}else{let _0x47186f=_0x49d912[_0x16f150(0x4cc,0x48c,0x48d,0x47c)](/:/g,':')[_0x20a136(-0x10f,-0x171,-0x157,-0x1bb)](/\(/g,'（')[_0x20a136(-0x13f,-0x171,-0x1ee,-0x1af)](/\)/g,'）')[_0x16f150(0x406,0x439,0x3e4,0x47c)](/,/g,',');return _0x47186f;}}console[_0x16f150(0x505,0x45a,0x43f,0x476)](_0x4c341e[_0x16f150(0x39e,0x3bc,0x378,0x397)],_0x36a213['id']);const _0x53356d=_0x4c341e['WYJIv'](buildOutfitText,_0x36a213),_0x284883=[_0x3c12f8||'',_0x53356d][_0x16f150(0x320,0x374,0x32e,0x3a3)](Boolean)['join']('\x0a');let _0x40f450=_0x4c341e[_0x20a136(-0x291,-0x25e,-0x22b,-0x243)](buildPromptForRequestType,_0x4c341e[_0x20a136(-0x1ef,-0x16b,-0x10d,-0x14d)],_0x284883);const _0x10570f=new Set(),_0xdb4db1=_0x4c341e['fqhOv'](findMessageIndexWithPlaceholder,_0x40f450,_0x4c341e[_0x16f150(0x4c1,0x4b2,0x4c9,0x443)]);console[_0x16f150(0x468,0x470,0x505,0x476)]('[outfitPro'+_0x16f150(0x424,0x3a5,0x419,0x39a)+'\x20User\x20requ'+_0x16f150(0x460,0x4f8,0x455,0x46f)+_0x20a136(-0x1a8,-0x234,-0x229,-0x1b3)+'x:',_0xdb4db1),_0x40f450=replacePlaceholder(_0x40f450,_0x4c341e[_0x16f150(0x41c,0x3f4,0x42f,0x460)],_0x53356d,_0x10570f),_0x40f450=replacePlaceholder(_0x40f450,'{{服装列表}}',_0x53356d,_0x10570f),_0x40f450=replacePlaceholder(_0x40f450,_0x16f150(0x3ae,0x3f1,0x3f2,0x3dc),_0x4c341e[_0x20a136(-0x194,-0x1c0,-0x225,-0x13e)](_0x3c12f8,''),_0x10570f),_0x40f450=_0x4c341e['hYJSc'](replacePlaceholder,_0x40f450,_0x4c341e['ZEoeH'],'',_0x10570f),_0x40f450=_0x4c341e[_0x20a136(-0x1e0,-0x275,-0x2a1,-0x2b8)](replacePlaceholder,_0x40f450,_0x4c341e[_0x16f150(0x34f,0x3b0,0x441,0x3aa)],'',_0x10570f),_0x40f450=_0x4c341e[_0x16f150(0x2ff,0x384,0x30d,0x378)](replacePlaceholder,_0x40f450,_0x20a136(-0x1b9,-0x204,-0x216,-0x21c),'',_0x10570f),_0x40f450=replacePlaceholder(_0x40f450,_0x4c341e['ozeXK'],'',_0x10570f),_0x40f450=_0x4c341e[_0x16f150(0x30e,0x404,0x32c,0x378)](replacePlaceholder,_0x40f450,_0x4c341e[_0x20a136(-0x265,-0x1fe,-0x1f9,-0x201)],'',_0x10570f),_0x40f450=_0x4c341e[_0x20a136(-0x1ef,-0x1b8,-0x128,-0x13e)](replacePlaceholder,_0x40f450,_0x4c341e[_0x20a136(-0x21f,-0x277,-0x2ea,-0x2a8)],'',_0x10570f),console[_0x20a136(-0xfa,-0x177,-0x20c,-0x11d)](_0x20a136(-0x151,-0x1da,-0x17d,-0x16b)+_0x20a136(-0x2ea,-0x253,-0x2b8,-0x2df)+_0x16f150(0x3bd,0x487,0x48d,0x41b)+_0x16f150(0x337,0x313,0x3de,0x3a7),_0x40f450);let _0x58bdd4='';_0x4c341e[_0x16f150(0x3ce,0x40a,0x445,0x3c9)](_0x10570f['size'],-0x19f4+0x1198+-0x2*-0x42e)&&(_0x58bdd4=_0x20a136(-0x276,-0x210,-0x1e2,-0x257)+_0x20a136(-0x201,-0x1a8,-0x118,-0x146)+[..._0x10570f][_0x16f150(0x48f,0x39c,0x3c3,0x41f)]('、')+'\x0a');_0x1ddd2f&&_0x1ddd2f[_0x20a136(-0x192,-0x1c6,-0x1b6,-0x234)]>-0xfa3*0x1+-0x4b*0x81+0x356e&&_0xdb4db1>=0x22de+0x2c*-0xa6+-0x656&&(_0x40f450=_0x4c341e[_0x16f150(0x3e7,0x3f0,0x2fc,0x378)](attachImagesToMessage,_0x40f450,_0xdb4db1,_0x1ddd2f,_0x4c341e[_0x20a136(-0x26c,-0x27f,-0x1fd,-0x201)]),console[_0x20a136(-0xfd,-0x177,-0xff,-0x1be)](_0x4c341e[_0x20a136(-0x1f1,-0x223,-0x206,-0x263)],_0x1ddd2f[_0x20a136(-0x18a,-0x1c6,-0x195,-0x1ed)],_0x4c341e[_0x20a136(-0x232,-0x282,-0x2d2,-0x267)],_0xdb4db1));_0x4c341e[_0x20a136(-0x25f,-0x25e,-0x27d,-0x1fc)](updateCombinedPrompt,_0x40f450,_0x58bdd4);const _0x4acd92={};_0x4acd92[_0x16f150(0x414,0x4b2,0x3f6,0x468)]=0x493e0;const _0x2d65bb=await _0x4c341e[_0x16f150(0x3cd,0x43d,0x4bd,0x462)](LLM_OUTFIT_MODIFY,_0x40f450,_0x4acd92);console[_0x20a136(-0x103,-0x177,-0x1e8,-0x1e5)](_0x4c341e[_0x20a136(-0x1d4,-0x1e0,-0x1ac,-0x1e5)],_0x2d65bb);if(!_0x2d65bb){if(_0x4c341e[_0x16f150(0x3d2,0x421,0x3fe,0x3e2)](_0x4c341e[_0x16f150(0x37e,0x398,0x3b6,0x3b5)],_0x16f150(0x3ad,0x3ca,0x391,0x3ba))){toastr[_0x20a136(-0x243,-0x26d,-0x293,-0x296)](_0x4c341e[_0x16f150(0x3df,0x4d9,0x4a4,0x458)]);return;}else{const _0x2597ab=_0x4c341e['sHTXY'](_0x188faa,_0x2a1404[0x3*-0xbe+0x1c91+0xd2b*-0x2]),_0x4d61e6=_0x4c341e['sHTXY'](_0x1ba370,_0x2597ab);_0x4d61e6&&_0x4d5baf[_0x20a136(-0x245,-0x230,-0x1b4,-0x1f9)][_0x16f150(0x430,0x422,0x431,0x43d)](_0x4d61e6);}}const _0xda99ce=_0x4c341e[_0x20a136(-0x1c5,-0x236,-0x2bf,-0x273)](extractOutfitTags,_0x2d65bb);if(_0x4c341e['vtrlQ'](_0xda99ce['outfits'][_0x16f150(0x4a5,0x3a9,0x458,0x427)],-0x2c6*-0x5+-0x1*-0x1825+-0x2603)){toastr[_0x16f150(0x37d,0x4a3,0x434,0x40f)](_0x4c341e[_0x16f150(0x3d4,0x36b,0x3be,0x3ed)]),console[_0x20a136(-0x123,-0x177,-0x1f6,-0x1cd)](_0x4c341e[_0x20a136(-0x261,-0x24d,-0x1d1,-0x26f)],_0x2d65bb);return;}console['log'](_0x4c341e[_0x16f150(0x429,0x369,0x377,0x3bc)],_0xda99ce);const _0x32bb58=_0xda99ce[_0x20a136(-0x2a1,-0x230,-0x1d3,-0x1d9)][0x1*-0x8bf+-0xed4+0x1793];await updateOutfitPresetFromLLM(_0x36a213['id'],_0x32bb58),toastr[_0x16f150(0x41a,0x452,0x496,0x469)](_0x4c341e[_0x20a136(-0x1bc,-0x175,-0x123,-0x19b)]);}catch(_0x577192){if(_0x4c341e[_0x16f150(0x472,0x441,0x42e,0x3e2)](_0x4c341e[_0x16f150(0x402,0x4dd,0x3f0,0x459)],_0x4c341e['WBQqs'])){const _0x1ab208={};for(const _0x42ab20 in _0x4ad553){_0x1ab208[_0x42ab20]=_0x4c341e['hYJSc'](_0x502e32,_0x42975a[_0x42ab20],_0x406890,_0x54d2d4,_0x31054a);}return _0x1ab208;}else console['error'](_0x4c341e[_0x20a136(-0x1e3,-0x182,-0xef,-0x1e6)],_0x577192),toastr[_0x20a136(-0x274,-0x26d,-0x2fd,-0x24a)](_0x16f150(0x351,0x40f,0x3a0,0x3ab)+'\x20'+_0x577192[_0x16f150(0x33d,0x436,0x419,0x3c8)]);}}async function updateOutfitPresetFromLLM(_0x42cb71,_0x59b5f5){const _0x4c8fc3={'MdKuU':function(_0xaa3872,_0x525597,_0x2d9dac,_0x5d92d4,_0x1a46d5){return _0xaa3872(_0x525597,_0x2d9dac,_0x5d92d4,_0x1a46d5);},'TddhA':_0x251d63(0x287,0x2ad,0x2b8,0x280),'VBEKA':_0x18061d(0x8f,0x116,0xc6,0xe1)+'mptModify]'+_0x251d63(0x291,0x258,0x252,0x1c1),'TXkxh':'images\x20to\x20'+'message\x20at'+_0x18061d(0xce,0xd5,0xcb,0x43),'aApFa':_0x251d63(0x256,0x22d,0x2aa,0x298),'HYfnD':'</服装>','rZYfT':function(_0x2d368f,_0x21de3b){return _0x2d368f!==_0x21de3b;},'hPgol':'oRggy','QTaHO':_0x251d63(0x2f1,0x1eb,0x27a,0x247),'MQNOA':_0x251d63(0x1f4,0x2ce,0x273,0x1ef),'odjfT':_0x18061d(0x190,0xf1,0xb3,0x11a),'ooQbw':_0x18061d(0x175,0x188,0x129,0x115),'ofvqa':function(_0x2eb80b,_0xb7c70d){return _0x2eb80b!==_0xb7c70d;},'YRiyf':function(_0x545743,_0x371399){return _0x545743>_0x371399;},'AFcZo':_0x251d63(0x297,0x337,0x2b0,0x2d5),'EVMEC':function(_0x58d2b4,_0x168627){return _0x58d2b4===_0x168627;},'ZyCJx':function(_0x24087e,_0x47efbb){return _0x24087e(_0x47efbb);},'fRaFA':'已取消更新','graRM':function(_0x529d19,_0x1eeb30){return _0x529d19!==_0x1eeb30;},'WZJFB':_0x251d63(0x153,0x15d,0x1e4,0x173),'qqULG':function(_0x4fa810){return _0x4fa810();},'nTiBU':function(_0x47864e,_0x45cd85){return _0x47864e(_0x45cd85);}},_0x4a243a=extension_settings[extensionName],_0x453761=_0x4a243a[_0x251d63(0x182,0x218,0x1c4,0x163)+'ets'][_0x42cb71];if(!_0x453761){if(_0x4c8fc3['rZYfT'](_0x4c8fc3[_0x251d63(0x207,0x333,0x29c,0x2b7)],_0x251d63(0x266,0x1fe,0x293,0x2c3)))_0x4acf9c=_0x4c8fc3[_0x18061d(0xa7,0x6b,0xf7,0x9c)](_0x457752,_0x49755d,_0x405a95,_0x3888ab,_0x4c8fc3[_0x251d63(0x1ce,0x266,0x1d8,0x1f9)]),_0xe568cd[_0x18061d(0x144,0x140,0xf8,0x144)](_0x4c8fc3[_0x251d63(0x18e,0x17d,0x1d5,0x1af)],_0x46e66d[_0x251d63(0x288,0x2af,0x272,0x257)],_0x4c8fc3[_0x251d63(0x28c,0x209,0x271,0x2b7)],_0x4d86c4);else{toastr[_0x251d63(0x14a,0x147,0x1cb,0x1a1)](_0x4c8fc3[_0x251d63(0x175,0x1af,0x1cd,0x1cd)]);return;}}let _0x413f76=_0x18061d(0x47,0x4b,0x57,0x7f)+_0x42cb71+_0x251d63(0x1ad,0x1ad,0x236,0x1e0);const _0x45eb12={};_0x45eb12[_0x18061d(0x185,0x147,0x147,0x13e)]='中文名称',_0x45eb12[_0x18061d(0x196,0x1b3,0x191,0x145)]=_0x18061d(0x7e,0x2,0x1a,0x4a),_0x45eb12[_0x18061d(0x62,0x6c,-0x21,0x2e)]=_0x4c8fc3[_0x18061d(0x78,0x8f,0x11d,0xc5)],_0x45eb12[_0x251d63(0x2e6,0x1fb,0x25d,0x1e3)+_0x251d63(0x26e,0x1c1,0x21a,0x185)]=_0x4c8fc3[_0x251d63(0x2bb,0x2af,0x246,0x21e)],_0x45eb12[_0x251d63(0x195,0x190,0x1af,0x213)]=_0x251d63(0x144,0x19a,0x1bc,0x1ca),_0x45eb12[_0x18061d(0x129,0xcd,0x11b,0x117)+'ck']=_0x4c8fc3[_0x251d63(0x199,0x244,0x222,0x1f0)];const _0x1e4e4f=_0x45eb12;let _0x57ee1c=0x6*-0x5e+0x388+-0xaa*0x2;function _0x251d63(_0x15ea22,_0xbb09e0,_0x55ec33,_0x52abb0){return _0x47f6d7(_0x15ea22-0x171,_0xbb09e0-0x6a,_0x55ec33- -0x2da,_0xbb09e0);}function _0x18061d(_0x3cdf81,_0x528ab9,_0x16ecea,_0x18b710){return _0x47f6d7(_0x3cdf81-0x1b3,_0x528ab9-0x80,_0x18b710- -0x457,_0x528ab9);}for(const _0x587b53 in _0x1e4e4f){if(_0x59b5f5[_0x587b53]&&_0x4c8fc3[_0x18061d(0x119,0x88,0x12c,0xf7)](_0x59b5f5[_0x587b53],_0x453761[_0x587b53])){const _0xffb8d1=_0x453761[_0x587b53]||_0x251d63(0x257,0x2e3,0x268,0x2a8),_0x43f5cf=_0x59b5f5[_0x587b53];_0x413f76+='•\x20'+_0x1e4e4f[_0x587b53]+':\x0a',_0x413f76+=_0x18061d(0x1d,0xd9,0xcb,0x49)+_0xffb8d1[_0x251d63(0x2d0,0x26d,0x24d,0x2bb)](0x6a+-0x1b47+0x1add*0x1,0x2*0x111e+0x3c1*0x2+0x4*-0xa63)+(_0x4c8fc3[_0x251d63(0x31e,0x2b2,0x2c0,0x22c)](_0xffb8d1['length'],-0x53*-0x53+-0x10b1+-0xa06)?'...':'')+'\x0a',_0x413f76+=_0x251d63(0x2e6,0x303,0x2af,0x26a)+_0x43f5cf['substring'](0x1e74+-0x2*0xbd+0x1*-0x1cfa,-0xac8+-0x1f4c+0xe*0x305)+(_0x4c8fc3[_0x251d63(0x295,0x28d,0x2c0,0x29c)](_0x43f5cf[_0x251d63(0x234,0x250,0x272,0x22f)],-0xc5*0x1d+0xa*0x150+0x963)?_0x4c8fc3[_0x18061d(0xfc,0xad,0xcd,0xd6)]:'')+'\x0a\x0a',_0x57ee1c++;}}if(_0x4c8fc3['EVMEC'](_0x57ee1c,-0x14f*0x1a+-0x348+0x254e)){toastr['info'](_0x18061d(0x160,0x192,0x19d,0x147)+'内容');return;}_0x413f76+='共\x20'+_0x57ee1c+_0x18061d(0x188,0xb9,0x15e,0x14d);const _0x41611e=await _0x4c8fc3[_0x251d63(0x269,0x2c5,0x2ac,0x312)](stylishConfirm,_0x413f76);if(!_0x41611e){toastr[_0x18061d(0x11,-0x5,0x51,0x8e)](_0x4c8fc3['fRaFA']);return;}for(const _0x118686 in _0x1e4e4f){if(_0x59b5f5[_0x118686]){if(_0x4c8fc3[_0x18061d(0x29,0x2b,-0x39,0x25)](_0x4c8fc3[_0x18061d(0x157,0xe5,0xc1,0xce)],_0x4c8fc3['WZJFB'])){const _0x46f6f3=_0x5dbfff[_0x18061d(-0x14,-0x40,0x2b,0x53)];let _0xb75e96=_0x4c8fc3[_0x251d63(0x140,0x161,0x1b7,0x1d2)];return _0xb75e96+='中文名称:\x20'+(_0x46f6f3[_0x18061d(0x1d0,0x148,0x151,0x13e)]||'')+'\x0a',_0xb75e96+=_0x251d63(0x1d0,0x2df,0x254,0x1d1)+(_0x46f6f3[_0x251d63(0x321,0x2b7,0x2c2,0x22b)]||'')+'\x0a',_0xb75e96+=_0x18061d(-0x17,0x82,0x9b,0x59)+(_0x46f6f3['upperBody']||'')+'\x0a',_0xb75e96+='上半身背面:\x20'+(_0x46f6f3[_0x251d63(0x2ed,0x2c5,0x25d,0x269)+'ack']||'')+'\x0a',_0xb75e96+=_0x251d63(0x1fd,0x1b4,0x1b3,0x1af)+(_0x46f6f3[_0x18061d(-0x3a,0xb3,-0x59,0x32)]||'')+'\x0a',_0xb75e96+='下半身背面:\x20'+(_0x46f6f3['fullBodyBa'+'ck']||'')+'\x0a',_0xb75e96+=_0x4c8fc3['HYfnD'],_0xb75e96;}else _0x453761[_0x118686]=_0x59b5f5[_0x118686];}}_0x4c8fc3[_0x251d63(0x20b,0x24f,0x24f,0x1fb)](saveSettingsDebounced);const _0x5b1a67=_0x4c8fc3[_0x251d63(0x208,0x1bc,0x225,0x1e2)]($,_0x18061d(0x19,0x79,0x2,0x2d)+'-tab-chara'+_0x251d63(0x162,0x150,0x1ac,0x232));_0x5b1a67['length']&&_0x4c8fc3[_0x251d63(0x26b,0x2a2,0x24f,0x256)](loadOutfitPreset),_0x4c8fc3[_0x18061d(0xa6,0x14a,0x115,0x12f)](updateOutfitFormFields,_0x59b5f5),console['log'](_0x18061d(0x123,0x80,0x155,0xe1)+_0x251d63(0x1a8,0x1d9,0x1e5,0x253)+'\x20已更新服装预设\x20\x22'+_0x42cb71+'\x22');}function updateOutfitFormFields(_0x39aba6){const _0x34d84f={'pqwcF':function(_0x234d82){return _0x234d82();},'PtJNt':function(_0x3f6b0e,_0x227c55){return _0x3f6b0e!==_0x227c55;},'ZwVOv':_0x394aa6(0x113,0x161,0xc8,0x122),'Rgxaa':function(_0x335d66,_0xb3aef9){return _0x335d66!==_0xb3aef9;},'fATFk':_0x394aa6(0xfe,0xaf,0xc6,0xae),'blGop':_0x394aa6(0x15d,0xe5,0x1b3,0x1aa),'Atpmr':function(_0x527623,_0x5386cb){return _0x527623(_0x5386cb);},'KsvnF':_0x1587f3(0x142,0xb5,0x1be,0x108),'ZIBaX':_0x1587f3(0x149,0x13b,0xe6,0x1b9),'xUlzz':_0x1587f3(0xe4,0x165,0x158,0xfd)+_0x394aa6(0x117,0xe4,0x14d,0x173),'wDvpw':_0x394aa6(0xac,0x2e,0xf0,0xd9),'SaOid':_0x1587f3(0x11b,0x1a1,0x133,0x176)+'ck'},_0x2c982b=[_0x34d84f[_0x1587f3(0xf7,0x8b,0xa3,0x164)],_0x34d84f[_0x1587f3(0x120,0xed,0x162,0x151)],_0x394aa6(0xa8,0xa2,0x139,0xbd),_0x34d84f['xUlzz'],_0x34d84f[_0x394aa6(0xcf,0x9e,0x127,0x60)],_0x34d84f['SaOid']];function _0x394aa6(_0xd9925,_0x596f5e,_0x1af073,_0x56cd66){return _0x47f6d7(_0xd9925-0x46,_0x596f5e-0xd7,_0xd9925- -0x3dd,_0x596f5e);}function _0x1587f3(_0x672281,_0x3ddb72,_0x382cac,_0x30b548){return _0x47f6d7(_0x672281-0xc4,_0x3ddb72-0xd6,_0x672281- -0x453,_0x382cac);}_0x2c982b[_0x1587f3(0x10d,0xf2,0x184,0x1a0)](_0x3b3e91=>{function _0x167df4(_0xd68576,_0x14ff15,_0x2d5c5a,_0x486d14){return _0x394aa6(_0xd68576-0x210,_0x2d5c5a,_0x2d5c5a-0x12b,_0x486d14-0x1c9);}function _0x1529f9(_0x24e61c,_0x3332a3,_0x3ed791,_0x387c33){return _0x394aa6(_0x387c33-0x24d,_0x24e61c,_0x3ed791-0x1d0,_0x387c33-0xd6);}if(_0x34d84f[_0x1529f9(0x41d,0x3bf,0x410,0x3a9)](_0x34d84f[_0x167df4(0x386,0x39a,0x30c,0x40a)],_0x1529f9(0x3ee,0x40b,0x3c9,0x37f))){if(_0x39aba6[_0x3b3e91]){const _0x2bfe48=document[_0x167df4(0x2f6,0x31a,0x33c,0x30e)+'ById'](_0x1529f9(0x3aa,0x2d7,0x321,0x31b)+_0x3b3e91);if(_0x2bfe48){if(_0x34d84f[_0x1529f9(0x388,0x383,0x2b2,0x332)](_0x34d84f['fATFk'],_0x34d84f[_0x1529f9(0x357,0x2b3,0x2eb,0x33a)]))_0x2bfe48[_0x167df4(0x3b5,0x432,0x42f,0x3e1)]=_0x39aba6[_0x3b3e91],_0x34d84f[_0x1529f9(0x308,0x376,0x392,0x392)]($,_0x2bfe48)[_0x1529f9(0x333,0x3a4,0x3ac,0x336)](_0x167df4(0x388,0x350,0x3d8,0x375));else{const _0x39a267={};_0x39a267[_0x167df4(0x34b,0x3e2,0x35a,0x371)]=_0x1529f9(0x380,0x3f4,0x364,0x3a1),_0x39a267['text']=_0x1529f9(0x421,0x30a,0x3cf,0x393)+_0x1ea082[_0x1529f9(0x39e,0x3e3,0x3c0,0x3bc)]+'张'+_0x2063e5+']',_0x5a2f6c['push'](_0x39a267);}}}}else _0x34d84f['pqwcF'](_0x212da4);});}