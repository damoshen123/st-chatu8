(function(_0x953b0b,_0x44383e){function _0x2c4d35(_0x59951f,_0x5914de,_0x936781,_0x4434b5){return _0x2425(_0x4434b5-0x17a,_0x59951f);}function _0x38312a(_0x5426bb,_0x4a1122,_0x17e273,_0x2a973f){return _0x2425(_0x5426bb- -0x7a,_0x2a973f);}const _0x27d23e=_0x953b0b();while(!![]){try{const _0x30c30c=parseInt(_0x2c4d35(0x442,0x396,0x3a1,0x3c5))/(0xa56+-0x13*-0x207+0x1*-0x30da)*(-parseInt(_0x38312a(0x1f6,0x1c6,0x24d,0x219))/(-0x1c99+-0x954+0x25ef))+parseInt(_0x2c4d35(0x43f,0x48e,0x3e3,0x40f))/(0x2300+-0x1*-0xff4+-0x32f1)*(-parseInt(_0x38312a(0x18c,0x1aa,0x10e,0x181))/(0x1be*0x6+-0x1*-0x412+-0xe82))+parseInt(_0x2c4d35(0x43e,0x420,0x42a,0x3d7))/(-0x60+-0x1b*0x11+-0x8*-0x46)+parseInt(_0x2c4d35(0x3d7,0x4a8,0x464,0x42b))/(-0x2078+0x6*0x404+0x866)*(-parseInt(_0x38312a(0x254,0x277,0x224,0x2d3))/(-0x219a+0x1*-0x301+-0x1251*-0x2))+parseInt(_0x2c4d35(0x4f1,0x4d6,0x423,0x465))/(-0x1b59+0x143e*-0x1+-0x1*-0x2f9f)*(-parseInt(_0x38312a(0x257,0x204,0x2a7,0x2e3))/(0x3*0x1c3+0x1*0x13c7+0x1907*-0x1))+-parseInt(_0x38312a(0x22d,0x26c,0x20a,0x1fb))/(0x1821+-0x1826+0xf)+parseInt(_0x38312a(0x224,0x1a7,0x1a4,0x235))/(0x34b+-0xd7*-0x9+-0xacf*0x1);if(_0x30c30c===_0x44383e)break;else _0x27d23e['push'](_0x27d23e['shift']());}catch(_0x14559c){_0x27d23e['push'](_0x27d23e['shift']());}}}(_0x484f,-0x64c16+-0x3*-0x1302b+0x715ed));const _0x32edea=(function(){function _0x451e97(_0xd54eff,_0x5e3665,_0x53cc91,_0x2c6b27){return _0x2425(_0x5e3665-0x344,_0xd54eff);}const _0x4ffec0={};_0x4ffec0[_0x11daf3(0x99,0x77,0x159,0x104)]=function(_0x5dbfa5,_0x4418c9){return _0x5dbfa5===_0x4418c9;},_0x4ffec0[_0x11daf3(0x7c,0xc2,0x105,0xcf)]=_0x11daf3(0x70,-0x92,-0x1a,-0xb),_0x4ffec0[_0x11daf3(-0x9a,0x7f,0x5d,-0xd)]=_0x451e97(0x5da,0x56b,0x5a2,0x523),_0x4ffec0['ZgRfu']=function(_0x31ca10,_0x104b13){return _0x31ca10===_0x104b13;},_0x4ffec0['uUdKO']=_0x451e97(0x5d3,0x5a6,0x575,0x592);const _0x39bd93=_0x4ffec0;let _0x358a89=!![];function _0x11daf3(_0x164601,_0x25aaf5,_0x58b20f,_0x9d18cf){return _0x2425(_0x9d18cf- -0x20b,_0x25aaf5);}return function(_0x52141a,_0x44cddb){function _0x31d55e(_0x4ccf1d,_0x42b569,_0x52f0fc,_0x421290){return _0x11daf3(_0x4ccf1d-0x56,_0x42b569,_0x52f0fc-0xf6,_0x421290-0x2af);}function _0x2c79b8(_0x183251,_0x4e4140,_0x43d4c2,_0x544185){return _0x11daf3(_0x183251-0x1af,_0x4e4140,_0x43d4c2-0x1f0,_0x43d4c2-0x3d5);}if(_0x39bd93[_0x2c79b8(0x395,0x389,0x3f0,0x479)](_0x39bd93[_0x2c79b8(0x49f,0x4ed,0x483,0x4f6)],_0x39bd93['uUdKO'])){const _0x529271=_0x358a89?function(){function _0x2e2f1d(_0x336712,_0x230ff6,_0x3c7ba7,_0x125167){return _0x31d55e(_0x336712-0x9b,_0x125167,_0x3c7ba7-0xa6,_0x3c7ba7- -0x128);}function _0x4181ab(_0x1ee484,_0x4cae87,_0x5e2f85,_0xda4df){return _0x31d55e(_0x1ee484-0x110,_0x5e2f85,_0x5e2f85-0xa,_0x1ee484- -0x1c);}if(_0x44cddb){if(_0x39bd93[_0x4181ab(0x397,0x351,0x3f9,0x34c)](_0x39bd93[_0x4181ab(0x362,0x338,0x399,0x3e0)],_0x39bd93[_0x2e2f1d(0x193,0xf4,0x17a,0x17e)])){if(_0x54e30b){const _0x300c6b=_0x116a22[_0x4181ab(0x2c2,0x24c,0x2d0,0x33f)](_0x55638a,arguments);return _0x5f55e1=null,_0x300c6b;}}else{const _0x2a7ff0=_0x44cddb['apply'](_0x52141a,arguments);return _0x44cddb=null,_0x2a7ff0;}}}:function(){};return _0x358a89=![],_0x529271;}else _0x9a370a[_0x2c79b8(0x3e7,0x36b,0x3db,0x43a)](_0x2210be);};}()),_0x15f212=_0x32edea(this,function(){function _0x282ef5(_0x456811,_0x25c1c0,_0x51f49a,_0x1faa66){return _0x2425(_0x1faa66-0x313,_0x51f49a);}function _0x471a91(_0xe8e5e1,_0x198ecd,_0x50f759,_0x1d2339){return _0x2425(_0xe8e5e1- -0x2d8,_0x1d2339);}return _0x15f212[_0x282ef5(0x5ec,0x56b,0x57d,0x573)]()['search'](_0x471a91(-0xbc,-0x145,-0x5e,-0x7e)+'+$')[_0x282ef5(0x5e5,0x5fb,0x4e5,0x573)]()[_0x282ef5(0x65f,0x680,0x61c,0x61e)+'r'](_0x15f212)['search']('(((.+)+)+)'+'+$');});_0x15f212();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../script.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';function _0x5db4f5(_0x39c80e,_0xc38a96,_0x148ea5,_0x4a02f0){return _0x2425(_0xc38a96- -0x3a3,_0x4a02f0);}import{loadOutfitPreset}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0x2abc51,_0x1f9a3f,_0x8d28a8,_0x316958){const _0x3d4e0c={'krpyX':'string','QYKbm':function(_0x54c5f7,_0x331185){return _0x54c5f7!==_0x331185;},'YWXaG':_0x3d5b7d(0x35d,0x32a,0x2f8,0x37f),'nKVfi':function(_0x38f8d3,_0x369939){return _0x38f8d3===_0x369939;},'bzaYs':_0x1fe4fd(0x6a,0xd4,0xc4,0xf1),'MGfZg':function(_0xb35d75,_0x489080,_0x8e0a33,_0x151b2f,_0x2da813){return _0xb35d75(_0x489080,_0x8e0a33,_0x151b2f,_0x2da813);}};if(typeof _0x2abc51===_0x3d4e0c[_0x3d5b7d(0x34d,0x2fb,0x29d,0x366)])return _0x8d28a8&&_0x2abc51[_0x3d5b7d(0x288,0x2a0,0x26a,0x2cf)](_0x1f9a3f)&&(_0x316958&&_0x316958['add'](_0x1f9a3f)),_0x2abc51[_0x3d5b7d(0x2f9,0x332,0x2d0,0x341)](_0x1f9a3f,_0x8d28a8);if(Array['isArray'](_0x2abc51))return _0x3d4e0c['QYKbm']('WZWeU',_0x3d4e0c[_0x3d5b7d(0x2cc,0x2db,0x2ee,0x286)])?_0x2abc51[_0x3d5b7d(0x28c,0x318,0x3a1,0x3a6)](_0x3eec55=>replacePlaceholder(_0x3eec55,_0x1f9a3f,_0x8d28a8,_0x316958)):_0x49d72b[_0x1fe4fd(0x74,0x3a,0x78,0x99)]();function _0x1fe4fd(_0xa2f10d,_0x17c669,_0x124457,_0x41f1a4){return _0x2425(_0x17c669- -0x20a,_0x41f1a4);}function _0x3d5b7d(_0x5b9ef9,_0x52dc48,_0x1c4a9a,_0x2e096c){return _0x2425(_0x52dc48-0x5b,_0x5b9ef9);}if(_0x2abc51&&_0x3d4e0c[_0x3d5b7d(0x26f,0x2e0,0x2cd,0x2ab)](typeof _0x2abc51,_0x3d4e0c['bzaYs'])){const _0x62036e={};for(const _0x4ab690 in _0x2abc51){_0x62036e[_0x4ab690]=_0x3d4e0c[_0x1fe4fd(-0x7d,-0x17,0x3c,0x2c)](replacePlaceholder,_0x2abc51[_0x4ab690],_0x1f9a3f,_0x8d28a8,_0x316958);}return _0x62036e;}return _0x2abc51;}function attachImagesToMessage(_0x2d7519,_0xe3fb62,_0x3c90db,_0x17264d=_0x5db4f5(-0xc2,-0xa3,-0xb8,-0x22)){const _0x2e14b3={};_0x2e14b3['JfrmK']=_0x3ae1f3(0x415,0x362,0x39f,0x3ca),_0x2e14b3['OeFVV']=function(_0x5f915,_0x38b345){return _0x5f915===_0x38b345;},_0x2e14b3['kgWxe']=_0x3175ef(0xb8,-0x1c,0x58,0xd);function _0x3ae1f3(_0x113ec5,_0x5d1056,_0x54cd7b,_0x31e876){return _0x5db4f5(_0x113ec5-0xa9,_0x54cd7b-0x549,_0x54cd7b-0x83,_0x31e876);}_0x2e14b3[_0x3175ef(0x116,0x144,0xe6,0x171)]=function(_0x22294c,_0x473825){return _0x22294c===_0x473825;},_0x2e14b3[_0x3175ef(0x97,0xba,0xde,0x96)]=_0x3175ef(0x135,0x14c,0xd2,0x69),_0x2e14b3['gYjNb']=function(_0xdd02ab,_0x15d9ba){return _0xdd02ab+_0x15d9ba;},_0x2e14b3[_0x3175ef(0x58,0xa6,0xbb,0xd9)]='data:',_0x2e14b3[_0x3175ef(0xdd,0xe2,0xb4,0x10f)]=_0x3ae1f3(0x435,0x418,0x45a,0x435),_0x2e14b3[_0x3ae1f3(0x311,0x31c,0x39b,0x399)]=_0x3175ef(0x1,0x85,0x5c,0x3e),_0x2e14b3[_0x3ae1f3(0x396,0x3f0,0x3b2,0x35a)]=function(_0x1d1bd7,_0x385146){return _0x1d1bd7<_0x385146;},_0x2e14b3[_0x3175ef(0x155,0x130,0xf9,0x165)]=function(_0x5e4e66,_0x3a510b){return _0x5e4e66>=_0x3a510b;},_0x2e14b3[_0x3ae1f3(0x51c,0x488,0x48f,0x486)]=function(_0xb99bc5,_0x1b4852){return _0xb99bc5===_0x1b4852;},_0x2e14b3['XsAKy']='IUGpl',_0x2e14b3[_0x3ae1f3(0x3b7,0x4b7,0x43a,0x419)]=_0x3175ef(0x117,0x33,0x9f,0x93),_0x2e14b3[_0x3ae1f3(0x48b,0x3c5,0x411,0x3f4)]=function(_0x2a6779,_0x15b9a9){return _0x2a6779!==_0x15b9a9;},_0x2e14b3['qZXWm']=_0x3ae1f3(0x427,0x3b0,0x3db,0x3a8),_0x2e14b3[_0x3ae1f3(0x361,0x454,0x3ce,0x3fc)]='NUClI',_0x2e14b3[_0x3ae1f3(0x420,0x447,0x455,0x43f)]=function(_0x5584e5,_0x338ae7){return _0x5584e5>_0x338ae7;},_0x2e14b3[_0x3175ef(0x61,-0x21,0x6c,0x78)]=function(_0x1cabe5,_0x24c507){return _0x1cabe5!==_0x24c507;},_0x2e14b3['ImVrG']=_0x3175ef(0xd6,0x84,0xf0,0xd4);const _0x3784f0=_0x2e14b3;if(!_0x3c90db||_0x3784f0[_0x3ae1f3(0x421,0x49e,0x498,0x47b)](_0x3c90db[_0x3ae1f3(0x405,0x46b,0x468,0x3dc)],-0x16a8+0x1bd2+-0x52a)||_0x3784f0[_0x3ae1f3(0x347,0x33c,0x3b2,0x3d1)](_0xe3fb62,-0x2635+0x82f*0x1+0x1e06)||_0x3784f0['TbOxO'](_0xe3fb62,_0x2d7519[_0x3175ef(0x115,0xf4,0xb6,0x47)])){if(_0x3784f0[_0x3175ef(0x16b,0xa5,0xdd,0x5d)](_0x3784f0[_0x3ae1f3(0x3f8,0x452,0x46a,0x3f5)],_0x3175ef(-0x85,-0x1f,-0xf,-0x2b)))return _0x2d7519;else _0x54167d['push'](..._0x7fddc2[_0x3ae1f3(0x48c,0x480,0x435,0x3e5)]);}const _0x521f72=[..._0x2d7519],_0x390d4d=_0x521f72[_0xe3fb62];function _0x3175ef(_0xa2cfc7,_0x44e4b4,_0x402ed8,_0x3b453d){return _0x5db4f5(_0xa2cfc7-0x11e,_0x402ed8-0x197,_0x402ed8-0x120,_0x44e4b4);}const _0x2a2d78=[];if(_0x3784f0[_0x3175ef(0x25,-0x41,-0x18,-0x50)](typeof _0x390d4d[_0x3ae1f3(0x498,0x3f5,0x435,0x46b)],_0x3784f0[_0x3175ef(-0x51,0x6e,0xf,0x96)])){const _0x30066b={};_0x30066b['type']=_0x3784f0['JmdLG'],_0x30066b['text']=_0x390d4d[_0x3ae1f3(0x42e,0x434,0x435,0x3ce)],_0x2a2d78['push'](_0x30066b);}else{if(Array[_0x3ae1f3(0x4fe,0x448,0x4a8,0x441)](_0x390d4d[_0x3ae1f3(0x4b8,0x474,0x435,0x3f7)])){if(_0x3784f0[_0x3175ef(0x78,0xbd,0x5f,0xbf)](_0x3784f0['qZXWm'],_0x3784f0[_0x3175ef(0x19,0x16,0x1c,0xe)]))_0x2a2d78['push'](..._0x390d4d['content']);else{const _0x5e11e5=_0x44d702[_0x44fb8c],_0xdcf718=_0x5e11e5['outfitPres'+_0x3175ef(0x17,-0xd,0x5e,0xc7)];if(!_0xdcf718||!_0x5e11e5[_0x3175ef(-0xb,0x7d,0x42,-0x45)+_0x3175ef(0x128,0xa5,0xaf,0xce)][_0xdcf718])return null;const _0x10efe0={};return _0x10efe0['id']=_0xdcf718,_0x10efe0['data']=_0x5e11e5[_0x3175ef(0x17,0x6b,0x42,0x8f)+_0x3175ef(0x100,0x5c,0xaf,0xc0)][_0xdcf718],_0x10efe0;}}}if(_0x3784f0[_0x3175ef(0x4d,0xfa,0xa3,0x49)](_0x3c90db[_0x3ae1f3(0x424,0x46e,0x468,0x4b9)],0x1709*0x1+-0x1a5*0x2+0x13bf*-0x1)){if(_0x3784f0['Erjee'](_0x3784f0[_0x3ae1f3(0x3bb,0x3e6,0x3dc,0x3e7)],'latos'))return null;else{const _0x1297b9={};_0x1297b9[_0x3175ef(0x0,0xcc,0x44,0x7d)]=_0x3784f0[_0x3175ef(0x3,0x109,0x88,0xca)],_0x1297b9[_0x3ae1f3(0x490,0x4b9,0x451,0x3ec)]='\x0a[以下是用户上传的'+_0x3c90db['length']+'张'+_0x17264d+']',_0x2a2d78[_0x3ae1f3(0x42f,0x41a,0x3d8,0x373)](_0x1297b9);}}_0x3c90db[_0x3ae1f3(0x32b,0x441,0x3b6,0x33b)]((_0xa10506,_0x555a18)=>{function _0x5432b(_0x259380,_0x47627d,_0x198185,_0x17c87b){return _0x3175ef(_0x259380-0x1c6,_0x17c87b,_0x198185-0x51f,_0x17c87b-0x40);}function _0x446e99(_0x1e51a0,_0x1e85c8,_0x2b4fa9,_0x2b571b){return _0x3ae1f3(_0x1e51a0-0x13f,_0x1e85c8-0x100,_0x2b4fa9- -0x159,_0x1e51a0);}if(_0x3784f0['JfrmK']!==_0x5432b(0x512,0x4a6,0x50c,0x49e))return null;else{const _0x1563f1=_0x3784f0['OeFVV'](typeof _0xa10506,_0x3784f0[_0x446e99(0x2ab,0x202,0x268,0x221)])?_0xa10506:_0xa10506[_0x5432b(0x59f,0x5a0,0x515,0x547)],_0x3328bb=_0x3784f0[_0x446e99(0x330,0x3c6,0x33f,0x3b7)](typeof _0xa10506,_0x3784f0[_0x446e99(0x337,0x30a,0x337,0x2f4)])&&_0xa10506[_0x446e99(0x1e9,0x2ab,0x250,0x291)]?_0xa10506[_0x446e99(0x2b2,0x206,0x250,0x222)]:''+_0x17264d+_0x3784f0['gYjNb'](_0x555a18,-0x1*0x1ad+0x4e5*0x4+-0x11e6),_0x576308={};_0x576308[_0x446e99(0x2d3,0x223,0x29d,0x313)]=_0x5432b(0x571,0x57a,0x5be,0x530),_0x576308[_0x446e99(0x2d0,0x34a,0x2f8,0x34e)]='['+_0x3328bb+']',_0x2a2d78['push'](_0x576308);let _0x325641=_0x1563f1;!_0x1563f1[_0x5432b(0x54f,0x505,0x526,0x507)](_0x3784f0['HBhiO'])&&(_0x325641=_0x446e99(0x1ff,0x289,0x25c,0x23b)+_0x5432b(0x580,0x55a,0x5b6,0x62b)+'4,'+_0x1563f1);const _0x1d3882={};_0x1d3882['type']=_0x3784f0[_0x446e99(0x344,0x308,0x30d,0x29e)],_0x1d3882[_0x5432b(0x5dd,0x5d1,0x5c7,0x572)]={},_0x1d3882[_0x5432b(0x5dd,0x5d1,0x5c7,0x572)]['url']=_0x325641,_0x1d3882[_0x5432b(0x5dd,0x5d1,0x5c7,0x572)][_0x446e99(0x36c,0x347,0x2e0,0x32d)]=_0x3784f0[_0x446e99(0x1ef,0x1e6,0x242,0x1e5)],_0x2a2d78[_0x446e99(0x2f9,0x2f0,0x27f,0x2be)](_0x1d3882);}});const _0xfd372d={..._0x390d4d};return _0xfd372d['content']=_0x2a2d78,_0x521f72[_0xe3fb62]=_0xfd372d,_0x521f72;}function findMessageIndexWithPlaceholder(_0x1315f6,_0xb780d9){const _0x2da7e2={};function _0x3562f8(_0x454868,_0x9b0408,_0x4dd20c,_0x1590db){return _0x5db4f5(_0x454868-0x6f,_0x1590db-0x284,_0x4dd20c-0xb9,_0x454868);}_0x2da7e2[_0x3562f8(0x1b8,0xe3,0x151,0x133)]=function(_0x5a3b31,_0x46144a){return _0x5a3b31<_0x46144a;},_0x2da7e2[_0x38aac3(0x49e,0x4e2,0x460,0x53a)]=function(_0x4683f3,_0x1f1601){return _0x4683f3!==_0x1f1601;},_0x2da7e2[_0x3562f8(0x157,0x144,0x1ed,0x1c2)]=function(_0x1eec6a,_0x4118d4){return _0x1eec6a===_0x4118d4;};function _0x38aac3(_0x5a7dc4,_0x55f06e,_0x4c0cfe,_0x1900de){return _0x5db4f5(_0x5a7dc4-0xb4,_0x55f06e-0x666,_0x4c0cfe-0x42,_0x5a7dc4);}_0x2da7e2['umlsC']=_0x3562f8(0x1b0,0x122,0x141,0x145),_0x2da7e2[_0x38aac3(0x4e2,0x550,0x5de,0x577)]=_0x3562f8(0x90,0x9b,0xa4,0x106),_0x2da7e2[_0x3562f8(0x189,0xe4,0x178,0x118)]='nPQUQ',_0x2da7e2[_0x3562f8(0x1fa,0x1a8,0x1a0,0x16f)]=function(_0x2223e3,_0x12ae07){return _0x2223e3===_0x12ae07;};const _0x58c269=_0x2da7e2;for(let _0x58949f=0x6cc+-0x1b3+-0x91*0x9;_0x58c269[_0x3562f8(0x1a2,0xc4,0x15a,0x133)](_0x58949f,_0x1315f6['length']);_0x58949f++){if(_0x58c269[_0x38aac3(0x51d,0x4e2,0x478,0x467)]('KivTy',_0x38aac3(0x5a3,0x575,0x567,0x55f))){const _0x3e7e71=_0x1315f6[_0x58949f];if(_0x58c269[_0x38aac3(0x5ad,0x5a4,0x616,0x5e8)](typeof _0x3e7e71[_0x3562f8(0x1e5,0x1b1,0x1e2,0x170)],_0x58c269[_0x3562f8(0x218,0x19e,0x174,0x1b4)])&&_0x3e7e71[_0x38aac3(0x54c,0x552,0x5b3,0x5c3)][_0x38aac3(0x4f5,0x508,0x4b2,0x47c)](_0xb780d9))return _0x58c269[_0x38aac3(0x493,0x4e2,0x488,0x4d5)](_0x58c269[_0x3562f8(0x1d0,0x100,0x1c4,0x16e)],_0x58c269[_0x38aac3(0x552,0x4fa,0x53b,0x55f)])?_0x58949f:(_0x54482d&&_0x3dbcdd[_0x3562f8(0x182,0x16d,0x151,0x126)](_0x5392d4)&&(_0x1b631d&&_0x6b4d52[_0x3562f8(0xd2,0x13e,0x7e,0xf2)](_0x568e0f)),_0x17821b[_0x38aac3(0x625,0x59a,0x5af,0x521)](_0x5ed3f4,_0x5050da));else{if(Array['isArray'](_0x3e7e71[_0x38aac3(0x521,0x552,0x5b8,0x5c3)]))for(const _0x45b0be of _0x3e7e71[_0x3562f8(0x1cc,0x153,0xfd,0x170)]){if(_0x58c269[_0x38aac3(0x4d6,0x551,0x509,0x553)](_0x45b0be[_0x38aac3(0x488,0x513,0x4ff,0x574)],_0x38aac3(0x58d,0x56e,0x58d,0x51b))&&_0x45b0be['text'][_0x3562f8(0xf8,0x159,0x100,0x126)](_0xb780d9))return _0x58949f;}}}else{const _0x4c86c4=_0x3d0daf?function(){function _0x59580a(_0x2efe6f,_0x250f73,_0x185b31,_0x229606){return _0x3562f8(_0x2efe6f,_0x250f73-0x91,_0x185b31-0x180,_0x250f73-0x20e);}if(_0x51b0bd){const _0x2920f2=_0x514922[_0x59580a(0x33f,0x329,0x34c,0x2ed)](_0x572cce,arguments);return _0x3d5115=null,_0x2920f2;}}:function(){};return _0x50eee2=![],_0x4c86c4;}}return-(0x1ec2+-0x626+-0x189b);}function generateRequestId(){const _0x4c38e3={};_0x4c38e3[_0x734469(0x1c8,0x1d4,0x1f3,0x24e)]=function(_0x1ef51a,_0x102c91){return _0x1ef51a+_0x102c91;};const _0x2a3653=_0x4c38e3;if(crypto&&crypto[_0x4afa5d(-0x63,-0xda,0xd,-0x4f)])return crypto['randomUUID']();function _0x4afa5d(_0x462809,_0x5beb4a,_0x4921ae,_0x281ebe){return _0x5db4f5(_0x462809-0x30,_0x281ebe-0x110,_0x4921ae-0x20,_0x4921ae);}function _0x734469(_0x272438,_0x4cfd49,_0x3c7fd9,_0x5cee3b){return _0x5db4f5(_0x272438-0x186,_0x4cfd49-0x2ae,_0x3c7fd9-0x20,_0x5cee3b);}return _0x2a3653[_0x4afa5d(0xaf,0x6d,-0x25,0x36)](Date[_0x4afa5d(-0xd5,-0xc5,-0x60,-0x52)]()['toString'](0x1*-0x203e+-0xd41+0x2da3*0x1),Math['random']()[_0x734469(0x176,0x16b,0x115,0x1b4)](-0x40*-0x34+0x2423+-0x153*0x25)[_0x734469(0x1aa,0x17d,0x14f,0x1b8)](-0x1f1a+-0x123a+0x3156));}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){const _0xa27f73={'ItpfN':function(_0xff5f53,_0x3c7fb2){return _0xff5f53!==_0x3c7fb2;},'RaXSt':function(_0x1a1ebf,_0x152416){return _0x1a1ebf(_0x152416);},'ffidP':'获取服装修改提示词超'+'时','UquqH':_0xd612bf(0x651,0x601,0x662,0x5eb),'lPVPJ':function(_0xdf0b87){return _0xdf0b87();},'gbLHc':function(_0x261bb2,_0x39a30c,_0x155aaa){return _0x261bb2(_0x39a30c,_0x155aaa);}};function _0xd612bf(_0x50496b,_0x3c1e8e,_0x411421,_0x253269){return _0x5db4f5(_0x50496b-0x8d,_0x3c1e8e-0x74b,_0x411421-0x86,_0x253269);}return new Promise((_0x593f93,_0x4fb5e4)=>{const _0x602e9={'mIHiG':function(_0x51de37,_0x51fda4){return _0x51de37(_0x51fda4);},'eErtl':_0xa27f73[_0x81b0b5(0x50e,0x5a8,0x4e9,0x53d)]};function _0x81b0b5(_0x25771c,_0x3bfb52,_0x364400,_0x18002a){return _0xd612bf(_0x25771c-0x5c,_0x18002a- -0x13b,_0x364400-0x14c,_0x25771c);}function _0x41666b(_0x52aefc,_0xf6c4e0,_0x5be941,_0x23e686){return _0xd612bf(_0x52aefc-0x1eb,_0x52aefc- -0x63e,_0x5be941-0x96,_0x23e686);}if(_0x41666b(-0x3d,0x50,-0x2b,-0x3d)!==_0xa27f73[_0x81b0b5(0x4b7,0x51e,0x47c,0x4ef)])_0x354c6e[_0x248711]=_0x4fe6b4(_0x4fa9d0[_0x597878],_0x2bc2ba,_0x1236ec,_0x140ca4);else{const _0x5e148a=_0xa27f73['lPVPJ'](generateRequestId);console[_0x81b0b5(0x449,0x517,0x4a8,0x4c3)]('[outfitPro'+_0x81b0b5(0x54a,0x556,0x562,0x508)+_0x81b0b5(0x592,0x592,0x54b,0x52b)+_0x81b0b5(0x46e,0x535,0x469,0x4c1)+'odify\x20prom'+'pt\x20(ID:\x20'+_0x5e148a+')');const _0x462a02=_0x5580f5=>{function _0xedc867(_0x527528,_0x21e110,_0x71a473,_0x15c0be){return _0x41666b(_0x71a473-0x4e5,_0x21e110-0x121,_0x71a473-0x1e5,_0x21e110);}if(_0xa27f73[_0xedc867(0x549,0x573,0x537,0x581)](_0x5580f5['id'],_0x5e148a))return;function _0x3023fb(_0x1362cb,_0x47ddbc,_0x211d53,_0x243bad){return _0x81b0b5(_0x47ddbc,_0x47ddbc-0x10b,_0x211d53-0xd6,_0x243bad- -0x183);}eventSource[_0xedc867(0x449,0x461,0x4bd,0x4cc)+_0x3023fb(0x3e7,0x36e,0x340,0x3ca)](eventNames[_0xedc867(0x46c,0x4ec,0x47f,0x424)+_0x3023fb(0x42f,0x441,0x3df,0x3d9)+_0x3023fb(0x331,0x316,0x321,0x2fc)+_0x3023fb(0x322,0x389,0x347,0x344)],_0x462a02),_0xa27f73['RaXSt'](_0x593f93,_0x5580f5[_0x3023fb(0x399,0x343,0x384,0x374)]);};eventSource['on'](eventNames[_0x41666b(-0x66,-0x54,-0x67,0x15)+_0x81b0b5(0x53b,0x5dc,0x559,0x55c)+_0x81b0b5(0x43b,0x499,0x4f9,0x47f)+_0x81b0b5(0x49a,0x4e6,0x47d,0x4c7)],_0x462a02);const _0x345906={};_0x345906['id']=_0x5e148a,eventSource[_0x41666b(0xb,0x25,0x52,-0xe)](eventNames['LLM_CHAR_M'+_0x41666b(0x59,0x32,0x54,0xa0)+'PROMPT_REQ'+_0x81b0b5(0x408,0x475,0x44f,0x485)],_0x345906),_0xa27f73[_0x41666b(-0xa,-0x94,0x41,-0x48)](setTimeout,()=>{function _0x14cdc5(_0x5aa0b4,_0x219ae8,_0x16faa8,_0xb880f2){return _0x41666b(_0x219ae8-0x3e7,_0x219ae8-0x4c,_0x16faa8-0x159,_0x16faa8);}eventSource[_0x14cdc5(0x3fe,0x3bf,0x34d,0x39f)+_0x37c33e(0x633,0x5db,0x641,0x672)](eventNames['LLM_CHAR_M'+_0x14cdc5(0x408,0x440,0x3de,0x3c9)+_0x37c33e(0x565,0x587,0x4e2,0x596)+_0x14cdc5(0x384,0x3ab,0x322,0x388)],_0x462a02);function _0x37c33e(_0x43688c,_0x1c755c,_0x33085b,_0x1e2fb8){return _0x81b0b5(_0x1c755c,_0x1c755c-0x110,_0x33085b-0x47,_0x43688c-0xe6);}_0x602e9[_0x37c33e(0x612,0x621,0x5b5,0x64f)](_0x4fb5e4,new Error(_0x602e9[_0x37c33e(0x659,0x647,0x6e1,0x6a7)]));},-0x10fb+0x1*0x1a5d+-0xed7*-0x2);}});}function _0x2425(_0x1c2a1c,_0xdd27c5){_0x1c2a1c=_0x1c2a1c-(-0x2dd*0xc+0x24*-0x1e+0x2887);const _0x54167d=_0x484f();let _0x7fddc2=_0x54167d[_0x1c2a1c];if(_0x2425['BNakYc']===undefined){var _0x11210c=function(_0x5b0b80){const _0x4c9a7e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x201c26='',_0x5f3f08='',_0x3e37db=_0x201c26+_0x11210c;for(let _0x288ed9=0x1064*-0x1+-0x43*0x5c+0x2878,_0xa64214,_0x2d358d,_0x1513fd=0x34f+-0x1411+0x10c2;_0x2d358d=_0x5b0b80['charAt'](_0x1513fd++);~_0x2d358d&&(_0xa64214=_0x288ed9%(0xaf3+0x54f+-0x103e)?_0xa64214*(0x1b3d+0x1bdc+-0x36d9)+_0x2d358d:_0x2d358d,_0x288ed9++%(-0x1b87*-0x1+-0x29*-0xca+-0xbf9*0x5))?_0x201c26+=_0x3e37db['charCodeAt'](_0x1513fd+(-0x14b3+0x1e7a+-0x115*0x9))-(0x1ee4+-0x1*-0x270a+-0x45e4)!==-0x604+-0x1bf*-0x8+-0x2*0x3fa?String['fromCharCode'](-0x1c0d+-0x169*-0xb+0x2b5*0x5&_0xa64214>>(-(0x16ba*-0x1+0x25e5*0x1+-0xf29)*_0x288ed9&-0x540+0x5e5*0x4+-0x124e)):_0x288ed9:-0x24c3+0x33*0x1+0x2490){_0x2d358d=_0x4c9a7e['indexOf'](_0x2d358d);}for(let _0xd977=-0x5*0x7a3+0xdc7+0x47*0x58,_0xa36096=_0x201c26['length'];_0xd977<_0xa36096;_0xd977++){_0x5f3f08+='%'+('00'+_0x201c26['charCodeAt'](_0xd977)['toString'](0x720+-0x1f2d+0x181d*0x1))['slice'](-(0x1c08+0x205+0x1*-0x1e0b));}return decodeURIComponent(_0x5f3f08);};_0x2425['NvZeAC']=_0x11210c,_0x2425['OSztpd']={},_0x2425['BNakYc']=!![];}const _0x793cb5=_0x54167d[-0x2f4*0x3+0x1554+0xc*-0x10a],_0x120d7d=_0x1c2a1c+_0x793cb5,_0x72b552=_0x2425['OSztpd'][_0x120d7d];if(!_0x72b552){const _0x2dafc4=function(_0x285424){this['vOyFyC']=_0x285424,this['qdfGGs']=[0x1741*0x1+0x2*0x1c6+-0x6b3*0x4,0x2*-0x14b+-0xbc7+-0x1*-0xe5d,0x1*-0x9a5+0x23*-0x22+0xe4b],this['IisyWF']=function(){return'newState';},this['xuAtbc']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['gduezz']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2dafc4['prototype']['ebNkcw']=function(){const _0x858a4=new RegExp(this['xuAtbc']+this['gduezz']),_0x38faf6=_0x858a4['test'](this['IisyWF']['toString']())?--this['qdfGGs'][-0x1*0x463+-0x1c3f+0x20a3]:--this['qdfGGs'][0xf85+-0xf09+-0x2*0x3e];return this['LliMOH'](_0x38faf6);},_0x2dafc4['prototype']['LliMOH']=function(_0x300ae9){if(!Boolean(~_0x300ae9))return _0x300ae9;return this['eWZbRS'](this['vOyFyC']);},_0x2dafc4['prototype']['eWZbRS']=function(_0x27b5c8){for(let _0x97a865=-0x1*-0x1a65+0x1a33+-0x3498,_0x17782a=this['qdfGGs']['length'];_0x97a865<_0x17782a;_0x97a865++){this['qdfGGs']['push'](Math['round'](Math['random']())),_0x17782a=this['qdfGGs']['length'];}return _0x27b5c8(this['qdfGGs'][-0x1d2b+-0x1ed3*-0x1+-0x1a8]);},new _0x2dafc4(_0x2425)['ebNkcw'](),_0x7fddc2=_0x2425['NvZeAC'](_0x7fddc2),_0x2425['OSztpd'][_0x120d7d]=_0x7fddc2;}else _0x7fddc2=_0x72b552;return _0x7fddc2;}export function LLM_OUTFIT_MODIFY(_0x21efdb,_0x4dc78d={}){function _0x18e0a8(_0x2e86e1,_0x292cb3,_0x224197,_0x41cd64){return _0x5db4f5(_0x2e86e1-0x1e4,_0x41cd64-0x6bb,_0x224197-0x1b9,_0x224197);}const _0x298cd9={'jzBIj':function(_0x47dcdc,_0x1934a8){return _0x47dcdc!==_0x1934a8;},'zurmn':function(_0x13ebf1,_0x2e28d4){return _0x13ebf1!==_0x2e28d4;},'qNDoZ':_0xcaccd5(0x5ee,0x57f,0x5ab,0x598),'Xwmpo':function(_0x3eb061,_0xaf7ed){return _0x3eb061(_0xaf7ed);},'ySIhf':_0x18e0a8(0x54f,0x54e,0x5f1,0x5c4),'XQIIX':_0xcaccd5(0x641,0x61f,0x5a9,0x5cc)+'求超时','drTyo':function(_0x28e96a){return _0x28e96a();},'xTFfJ':function(_0x4ae2fd,_0x18187e,_0x44a58d){return _0x4ae2fd(_0x18187e,_0x44a58d);}};function _0xcaccd5(_0x155b3e,_0x14ef9f,_0x38189d,_0x5d5053){return _0x5db4f5(_0x155b3e-0x68,_0x5d5053-0x6c6,_0x38189d-0x7a,_0x38189d);}return new Promise((_0x148984,_0xb6f3ee)=>{const _0x38221a=_0x298cd9['drTyo'](generateRequestId),_0x272737=_0x4dc78d[_0x4fe251(-0x13d,-0x1f0,-0x1a8,-0x16b)]||0xdf*0x1c6+-0xadd7+0xcbd;console[_0x4fe251(-0x17b,-0x13c,-0x152,-0x16c)]('[outfitPro'+_0x4fe251(-0x19b,-0xf2,-0x171,-0x127)+_0x4fcc44(0x5fa,0x58f,0x52c,0x5bb)+_0x4fcc44(0x586,0x5fe,0x635,0x60a)+_0x4fcc44(0x647,0x60e,0x624,0x60c)+_0x4fcc44(0x548,0x5b6,0x621,0x559)+':\x20'+_0x38221a+')');const _0x1871b0=_0x5d85ff=>{function _0x564fcd(_0x170499,_0x3d205a,_0x451627,_0x10fe4a){return _0x4fe251(_0x10fe4a,_0x3d205a-0x1b2,_0x451627-0xfa,_0x3d205a-0x6d);}function _0xbcc1f4(_0x10c451,_0x4598e2,_0x4de6c2,_0x3a9b1c){return _0x4fe251(_0x3a9b1c,_0x4598e2-0x144,_0x4de6c2-0x48,_0x4598e2-0x1e1);}if(_0x298cd9[_0xbcc1f4(0x44,0xb6,0xa1,0x57)](_0x5d85ff['id'],_0x38221a))return;eventSource[_0x564fcd(-0x8e,-0xe7,-0x105,-0x81)+_0x564fcd(-0x8d,-0x75,-0xb6,-0x1d)](eventNames['LLM_CHAR_M'+_0x564fcd(-0x61,-0xe8,-0x6d,-0x65)+_0xbcc1f4(0x177,0xfa,0x9a,0x84)],_0x1871b0),_0x5d85ff['success']?_0x148984(_0x5d85ff[_0x564fcd(-0xc0,-0x5d,-0xa9,-0xd1)]):_0x298cd9['zurmn'](_0x298cd9['qNDoZ'],_0xbcc1f4(0xe4,0x94,0x1c,0x56))?_0x45ed90[_0x88d66e[_0x21a3b6]]=_0xf2cbc6:_0x298cd9[_0xbcc1f4(0x86,0x1b,-0x1,0x49)](_0xb6f3ee,new Error(_0x5d85ff[_0x564fcd(-0x1a,-0x5d,-0x60,-0x48)]||_0x298cd9[_0xbcc1f4(0x110,0xb1,0x13f,0x55)]));};eventSource['on'](eventNames[_0x4fe251(-0x119,-0x142,-0x173,-0x192)+'ODIFY_RESP'+'ONSE'],_0x1871b0);const _0x5c8e45={};_0x5c8e45['prompt']=_0x21efdb;function _0x4fcc44(_0x14564f,_0x3de137,_0xb215e3,_0x4064ec){return _0x18e0a8(_0x14564f-0x9c,_0x3de137-0xf,_0x14564f,_0x3de137-0x1);}_0x5c8e45['id']=_0x38221a,eventSource[_0x4fe251(-0xd3,-0xfc,-0x151,-0x121)](eventNames[_0x4fe251(-0x1da,-0x1ee,-0x1a1,-0x192)+_0x4fe251(-0x133,-0x113,-0x133,-0xc4)+_0x4fe251(-0x112,-0x105,-0x153,-0x10c)],_0x5c8e45);function _0x4fe251(_0x1f4f4e,_0x181d4d,_0x4aed70,_0x1fba9b){return _0x18e0a8(_0x1f4f4e-0x12a,_0x181d4d-0x161,_0x1f4f4e,_0x1fba9b- -0x6da);}_0x298cd9[_0x4fe251(-0x80,-0x76,-0x106,-0xe6)](setTimeout,()=>{eventSource[_0x4426fa(0x453,0x40b,0x48d,0x484)+'ener'](eventNames[_0x4426fa(0x415,0x3e2,0x461,0x404)+_0x297484(0x114,0x10c,0x182,0x11f)+_0x297484(0x12d,0x1d2,0x1e5,0x18d)],_0x1871b0);function _0x4426fa(_0x15abbe,_0x59caab,_0x2e8d64,_0x5c8730){return _0x4fcc44(_0x2e8d64,_0x15abbe- -0x134,_0x2e8d64-0xb3,_0x5c8730-0x18d);}function _0x297484(_0x52eaf7,_0x56d061,_0x3dd521,_0x4a4f1e){return _0x4fcc44(_0x3dd521,_0x4a4f1e- -0x467,_0x3dd521-0x13,_0x4a4f1e-0xa2);}_0x298cd9[_0x297484(0x77,0xe7,0x128,0xae)](_0xb6f3ee,new Error(_0x298cd9['XQIIX']));},_0x272737);});}function preprocessTagContent(_0x58f25f){let _0x3f23c1=_0x58f25f[_0x26b66f(0x4e7,0x4d4,0x488,0x52a)](/:/g,':')['replace'](/\(/g,'（')[_0x26b66f(0x4e7,0x547,0x49d,0x472)](/\)/g,'）')[_0x54946d(-0x1e,0x45,-0x9,0x1e)](/,/g,',');function _0x26b66f(_0x56c261,_0x596545,_0x375f6f,_0x2a8968){return _0x5db4f5(_0x56c261-0xa7,_0x56c261-0x671,_0x375f6f-0x62,_0x596545);}function _0x54946d(_0x449fd4,_0x7009ea,_0x3c7528,_0x283621){return _0x5db4f5(_0x449fd4-0xa3,_0x3c7528-0x181,_0x3c7528-0x18f,_0x283621);}return _0x3f23c1;}function parseOutfitData(_0x3ed68a){function _0x5bc066(_0x6015e9,_0x5ab3bc,_0x3d5227,_0x4fbb49){return _0x5db4f5(_0x6015e9-0x10,_0x5ab3bc-0x2bc,_0x3d5227-0x150,_0x6015e9);}const _0x142f08={'pIePY':function(_0xecee65,_0x146977){return _0xecee65(_0x146977);},'sYIjv':_0x4971c0(-0x1d,-0x81,-0x7,-0x14),'aIasI':_0x5bc066(0x293,0x226,0x1a5,0x1ec),'qoxVQ':'upperBody','CluEX':'upperBodyB'+'ack','gJREC':'fullBody','joUlp':_0x4971c0(-0x3d,-0x51,-0x61,-0x1)+'ck','KTwwX':function(_0x372777,_0x3e952f){return _0x372777===_0x3e952f;},'hRiYf':function(_0x12c010,_0x371e87){return _0x12c010&&_0x371e87;},'xhFKk':function(_0x498074,_0xdc0047){return _0x498074!==_0xdc0047;},'JrOwv':_0x5bc066(0xda,0x110,0x18b,0x176),'aZGhh':_0x4971c0(-0xa4,-0x47,-0xc9,-0x2f),'VfEQY':_0x4971c0(-0xda,-0x93,-0x11d,-0xef)+_0x5bc066(0x216,0x1b4,0x15a,0x138)+'\x20解析到的服装数据:'},_0x46cdc5=_0x3ed68a[_0x4971c0(-0x17,-0x5e,-0xa8,-0x47)]('\x0a')[_0x5bc066(0x20d,0x1d6,0x183,0x251)](_0x574089=>_0x574089[_0x5bc066(0x175,0x19a,0x125,0x194)]())[_0x4971c0(-0xec,-0x88,-0xd9,-0x16)](_0x3355ac=>_0x3355ac),_0x45604d={};_0x45604d['nameCN']='',_0x45604d['nameEN']='',_0x45604d['upperBody']='',_0x45604d['upperBodyB'+_0x4971c0(-0x39,-0x40,-0xc5,-0x40)]='',_0x45604d[_0x4971c0(-0x2f,0x16,-0x2e,0x95)]='',_0x45604d[_0x4971c0(-0xd0,-0x51,0x33,-0x1a)+'ck']='';const _0x49b842=_0x45604d;function _0x4971c0(_0x792c29,_0x3984d4,_0x24d7e6,_0x29b35b){return _0x5db4f5(_0x792c29-0x16b,_0x3984d4-0x11a,_0x24d7e6-0x13c,_0x24d7e6);}const _0x3ed33f={};_0x3ed33f['中文名称']=_0x142f08[_0x4971c0(-0xe,-0x31,-0x79,-0x1c)],_0x3ed33f[_0x5bc066(0x173,0x1ff,0x276,0x1ac)]=_0x4971c0(-0x3a,-0x12,0x2c,0x4e),_0x3ed33f[_0x4971c0(0x5c,0x64,0x92,0xeb)]=_0x142f08[_0x5bc066(0x19a,0x17a,0x199,0x1bd)],_0x3ed33f[_0x5bc066(0x25c,0x222,0x1dc,0x1ff)]=_0x142f08[_0x4971c0(-0xdb,-0x4c,-0x6f,-0xa1)],_0x3ed33f[_0x4971c0(0xe5,0x71,0x5,0x1b)]=_0x142f08['gJREC'],_0x3ed33f[_0x5bc066(0x1b3,0x174,0x1f5,0x114)]=_0x4971c0(-0xe,0x16,0x30,0x62),_0x3ed33f[_0x4971c0(-0x5b,0x21,0x32,0x70)]=_0x142f08[_0x5bc066(0x16b,0x182,0xfa,0x133)];const _0x5d0c47=_0x3ed33f;for(const _0x148a5a of _0x46cdc5){const _0x830cf2=_0x148a5a[_0x4971c0(0x3c,0x1d,-0x40,0x6e)](':');if(_0x142f08[_0x4971c0(-0x4f,0xd,0x68,-0x36)](_0x830cf2,-(-0x4*0x435+-0x2e6*-0x1+0xdef)))continue;const _0x14df45=_0x148a5a[_0x4971c0(0x3c,-0x17,-0x2e,0x52)](-0x8db+0x3*-0x6b7+0x1d0*0x10,_0x830cf2)[_0x5bc066(0x202,0x19a,0x219,0x169)](),_0x524f59=_0x148a5a['substring'](_0x830cf2+(-0x14*0x21+-0x38d+0x622))[_0x4971c0(0x55,-0x8,-0x60,0x76)]();if(_0x5d0c47[_0x14df45])_0x49b842[_0x5d0c47[_0x14df45]]=_0x524f59;else{if(_0x142f08[_0x5bc066(0x105,0x18c,0x1a7,0x20e)](_0x14df45,_0x524f59)){if(_0x142f08['xhFKk'](_0x142f08[_0x5bc066(0x1bb,0x205,0x1e6,0x22e)],_0x142f08[_0x4971c0(-0x5,-0x55,0x34,0x11)]))console[_0x5bc066(0x184,0x16f,0x1c5,0x1d4)](_0x5bc066(0x189,0x10f,0xd6,0xe3)+'mptModify]'+_0x5bc066(0x15d,0x145,0x139,0x148)+'\x22'+_0x14df45+'\x22');else{const _0x2fa6bd=_0x1c1598[_0x5bc066(0x15e,0x114,0xbd,0xf0)+_0x4971c0(-0x61,0x27,0x50,0x5f)](_0x5bc066(0x1e3,0x221,0x195,0x249)+_0x55c0ab);_0x2fa6bd&&(_0x2fa6bd[_0x5bc066(0xce,0x155,0xe8,0x167)]=_0x97a046[_0x3797d2],_0x142f08['pIePY'](_0x2c1b08,_0x2fa6bd)[_0x4971c0(-0x4f,-0x41,-0x13,-0x12)](_0x142f08[_0x4971c0(0x80,0x2e,-0x29,0xac)]));}}}}if(!_0x49b842[_0x4971c0(0xd5,0x84,0x78,0x36)])return null;return console[_0x4971c0(-0x99,-0x33,-0x71,-0x1a)](_0x142f08[_0x4971c0(-0x4d,0x3f,0x3b,0x63)],_0x49b842),_0x49b842;}function extractOutfitTags(_0x55236d){const _0x57f471={'DwtEU':function(_0x522dd1,_0x380e03){return _0x522dd1!==_0x380e03;},'UbhPg':function(_0x3c2c1f,_0x3148dc){return _0x3c2c1f(_0x3148dc);},'RXHcp':function(_0x307d2d,_0x1d25c9){return _0x307d2d(_0x1d25c9);}},_0x4a5cd2={};_0x4a5cd2[_0x3af5a0(-0xbe,-0x74,-0x40,-0x1)]=[];const _0x26f091=_0x4a5cd2;_0x55236d=_0x55236d[_0x3b89d6(0x3af,0x3c8,0x3f1,0x3bc)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x3b89d6(0x413,0x3b4,0x3fa,0x424)]();function _0x3af5a0(_0x4289f3,_0x26d7e5,_0x5f362f,_0x2ecc03){return _0x5db4f5(_0x4289f3-0x1b,_0x26d7e5-0x3b,_0x5f362f-0xf6,_0x5f362f);}const _0x2fe078=/<服装>([\s\S]*?)<\/服装>/g;let _0x1209ca;function _0x3b89d6(_0x229c76,_0x76da63,_0x4da43e,_0x2a2cec){return _0x5db4f5(_0x229c76-0xa5,_0x2a2cec-0x546,_0x4da43e-0x1ae,_0x229c76);}while(_0x57f471['DwtEU'](_0x1209ca=_0x2fe078[_0x3af5a0(-0x13,-0x71,-0xab,-0x72)](_0x55236d),null)){const _0x57ff6a=_0x57f471['UbhPg'](preprocessTagContent,_0x1209ca[-0xb75+-0x1*-0x62+0xb14]),_0xa0a231=_0x57f471[_0x3b89d6(0x460,0x3f6,0x363,0x3ed)](parseOutfitData,_0x57ff6a);_0xa0a231&&_0x26f091['outfits'][_0x3b89d6(0x420,0x37b,0x3aa,0x3d5)](_0xa0a231);}return _0x26f091;}function getCurrentOutfitPreset(){const _0xc13a3d={};_0xc13a3d['dCAws']=_0x511b69(0x3db,0x408,0x34d,0x38c),_0xc13a3d[_0x1132f4(0x492,0x488,0x50e,0x568)]=_0x1132f4(0x56d,0x561,0x544,0x5cf);function _0x1132f4(_0x2e5367,_0x360b95,_0x44172f,_0x365843){return _0x5db4f5(_0x2e5367-0x15e,_0x44172f-0x694,_0x44172f-0x86,_0x2e5367);}const _0x2c963f=_0xc13a3d,_0x47e105=extension_settings[extensionName],_0x204c93=_0x47e105['outfitPres'+_0x511b69(0x39a,0x35f,0x40d,0x39c)];if(!_0x204c93||!_0x47e105[_0x511b69(0x37e,0x32d,0x391,0x3f5)+_0x1132f4(0x5f1,0x60e,0x5ac,0x62d)][_0x204c93]){if(_0x2c963f[_0x511b69(0x34d,0x33c,0x338,0x380)]===_0x1132f4(0x5d2,0x5b1,0x544,0x522))return null;else{const _0x1d9e0c={};_0x1d9e0c[_0x1132f4(0x543,0x57c,0x541,0x58e)]=_0x2c963f[_0x511b69(0x437,0x418,0x445,0x49e)],_0x1d9e0c['text']=_0x2b1c98[_0x511b69(0x3bf,0x3f6,0x3fb,0x439)],_0x81db75[_0x1132f4(0x4c2,0x4a2,0x523,0x50a)](_0x1d9e0c);}}const _0x200f38={};_0x200f38['id']=_0x204c93,_0x200f38[_0x1132f4(0x59e,0x63e,0x5d8,0x569)]=_0x47e105[_0x511b69(0x37e,0x397,0x39a,0x3f4)+_0x1132f4(0x612,0x624,0x5ac,0x53f)][_0x204c93];function _0x511b69(_0x585e4d,_0x5b6ad3,_0x36c4e8,_0x1bcdce){return _0x5db4f5(_0x585e4d-0x16c,_0x585e4d-0x4d3,_0x36c4e8-0x19d,_0x1bcdce);}return _0x200f38;}function _0x484f(){const _0x12e1d3=['teXnioI/LowBNUE7K+AENos4UUEPUG','v3btAKK','A05Rvem','zYbVDxrMAxqGBq','re9byvK','Bg9N','DgLTzw91De1Z','yuLHC0K','AxzMsxK','ue9ou0u','5lIl5y2k6lQR5PYn6kof','vw9SAKi','mJuZotC1tu10ture','E3VPGjRNLkJOP5lOIBlLKk/NLkJLIjFOOAG','5OM+5lIn5yIW5OYh5A6A55Qe5PYn6kof6Ake6k6+','Dg9tDhjPBMC','Cw94vLe','wMrYwuy','E3VKUjBNLyZKUABOP6BLJ5f9Fq','C3rYAw5N','koEPUIK','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','wg14q2O','yxv0BW','AM9vBha','zxrjza','AKLpD2K','B1jcswi','t0rjrLLFuKvtua','CMvTB3zLtgLZDa','zgvIDwDNAw5NoG','mJuYneLlBuvQvW','5lIl5y2k6lQR6iom6z2IoIa','C3vIC3rYAw5N','AfjPwwy','5lIl5y2k6lQRoIa','twHwwfC','iev4zwn1DgLUzW','BMfTzuvo','rxjQzwu','lI4U','BwvZC2fNzsbHDa','s0nXzwK','BwvZC2fNzq','5BEY5y+w5RAi5PU05PAW','zKreDMC','DMXlzvG','wvDyyuC','DhjPBq','vxf1CuG','pc/MNi3OO4u+','DMnQBw4','BKTwzMK','DxrWDxqGzM9Yia','tM5fqwe','5Q2J5zYO5Ase55cg5PYn6kof5O+q56s66k+n5l+U','qKzsqMK','ChjVBxb0','ief0DgfJAgvK','z2jmsgm','B2nZqMq','zezQtfe','y29UDgvUDa','EgL4CKi','Aw1Hz2vZihrVia','EvnjAgy','zgv0ywLS','sM1KteC','m1vjDvH3BW','s1r3D1G','ANPcswO','re1msKy','sMTmt2i','u05Hrxq','Bxb0tw9KAwz5xq','C014rhu','zxf1zxn0icHjra','mJaXnJu1nJnKDNPAqMO','zNvSBejVzhK','A3jWEvG','zw1PDa','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','l3bUzZTIyxnLnG','rxbxCxm','5Ps56k+35RgclI4U','Aw5KzxHpzG','mZG4nJC1mgfXtNz3AW','wwjOru8','5PYn6kof5l+U5Ps5ieXmtsdOR7C','5lIl5y2k6lQR6iom6z2I','Dgv4Da','teXnioIVT+AXGUwKSEI0Pq','AMvbv0K','Aw5MBW','CKDzDu0','qNLjza','mtuYnJmXmfDUD25vzG','wMvgCxq','E3VLVzpLIy3MNi3OO4v9Fq','Aw1Hz2vFDxjS','A3jXrMi','rvnu','C1LjANy','iezPBMfSihbYBW','DvvKs08','t1b5Bgu','zxrZ','wvbrzLm','BwfW','ifjLCxvLC3rPBG','BuLiAuC','rM1lz2q','6k+35ywi6ycj5OUP5lIa5lIQ5PYn6kof6Ake6k6+','BgvUz3rO','AM9PBG','whnbs3K','C2L6zq','A1Dezxa','sejOAu8','vMzfuvK','rvLdCve','Cu5LCfq','zxjYB3i','DxbWzxjcB2r5qG','5yEg5Ash5PU05PAW5PYn6kofici','mtrWwxfpBMG','tMLwr0C','zMzPzfa','ndqXAw9dChH5','txjRDKW','Dw1SC0m','ifn0yxj0Aw5Nia','t1DmqNK','ievYCM9YoG','CMvWBgfJzufSBa','tLPdrMm','6iUX5PAh5zcn56EWoIa','rgf0Bvi','t05trq','EfrgzKO','q3D2zhe','B2jQzwn0','AxjLBwvUDcbTzq','zw5LCG','u2PStg4','A2DVq24','yvPxuLq','D2fYBMLUzW','ig91DgzPDcbTBW','6iUX5PAh5zcn56EW','zgf0yq','sxrWzK4','tLnVuum','wg5qAgK','mJu3mtjTrgHIEK0','sNjpD3y','5lIk5y2k6lQR','vg1RD0q','t0rjrLLFr0vuxW','Bxb0ig1VzgLMEq','5lIk5y2k6lQR6iom6z2IoIa','B3jKr2G','tvnzyMi','B3v0zML0CW','zgLMEsbmte0GCG','r1zjzLq','zxHLyW','CMvZDwX0','5lIT5PAh5zcn56EW','5lIl5y2k6lQR','wvvLshq','Bgf0B3m','poACJEIJHt4k','t0rjrLLFuKvrvq','Cefvyuq','5y+c6icd5zU+54Mh','E3VNLkJMIlFPNidMSyj9Fq','AxnbCNjHEq','ifvZzxiGCMvXDq','wgD0twK','vgjpEe8','zuvYDgW','zenbD3m','B3v0zML0xW','5lIk5y2k6lQR6iom6z2I','vgjNtwu','y29UC3rYDwn0BW','icdMLRa6ia','BMfTzuno','Bfv2sfO','vwnbqu8','tuDMwMC','t2vgvLy','quPxr08','w291DgzPDfbYBW','swLREMK','rwPsyxO','Ew52uuW','qMzzEKi','z2v0rwXLBwvUDa','whDTCg8','svvhCgW','BwHNwfC','vhnUuhG','z3rpy0m','zMLSDgvY','yMfZzty0','BMfTzq','v2TPs0e','se9ize8','mtiYnJi3nLrnrNHvva','quvhtge','Aw5WDxq','D3nstfG','5PYQ5zYOieXmtsdOVPpLH7RKUk0','BvLUrMy','BxbbDfO','igLUzgv4','DKHOA2i','zgf0ytPPBwfNzq','zM9YrwfJAa','ywrK','ufjptvbux1jfuW','C3rHCNrZv2L0Aa','DxbWzxjcB2r5','ieXmtsbVDxrWDq','5lIk5y2k6lQRoIa','sgTrBeq','vuvtva','CMvWBgfJzq','sujNrNe','A2DxEgu','kcGOlISPkYKRkq','ywv6qKy','5PYn6kof5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','DhHJq0q','q2DJwxG','wKjIrxe','i3n0lwnOyxr1oa','ANzSwuG','DLzXC3K','Dfzuywm','wMDszNu','wLjzsg8','DvHSq3e','ANzjs2e','ifjHDYbmte0GBW','C3bSAxq','ioACQUIVHUwiQ+EAHoACJEIJHEwTL+AUTsa','qNDZzfm','BezPthy','igrHDge6','teXnx0niqvjFtq','ugPdzeK','ChvZAa','rgH3rM4','yvPhAgG','A2DbCvq','sw1wCKC','sNPIwgS','zNvSBejVzhLcyq','y2HHCL9TB2rPzG','yxbWBhK','CuXHy1m','DMfSDwu','q2X1rvG','AhD0sKq','ihjLCxvLC3qUlG','q1fVB2O','BM93','uwXgvwW','wMP6wLC','CMfUzg9Tvvvjra','Aw5JBhvKzxm','vKfUAu8','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','DhjPz2DLCG','ywnR','uLHiy3a','mtG4yKzeALnV','iIdNMOtKU6xKUiVMLBdMJA46cGO','Bxb0oG','B3v0zML0uhjLCW','5lIT5PAh5zcn56EWoIa','DhLWzq'];_0x484f=function(){return _0x12e1d3;};return _0x484f();}function buildOutfitText(_0x5c603d){const _0x4ec780={};_0x4ec780[_0x497246(0x2ca,0x242,0x1c2,0x249)]=_0x86f1ae(0x697,0x60a,0x6f1,0x6f0),_0x4ec780[_0x497246(0x1f4,0x237,0x2a7,0x2b5)]=_0x497246(0x24b,0x25e,0x224,0x213);const _0x779fa2=_0x4ec780,_0x37590a=_0x5c603d[_0x497246(0x307,0x2c2,0x2dc,0x271)];function _0x497246(_0x1ffbfe,_0x206207,_0x121c0c,_0x30e9e2){return _0x5db4f5(_0x1ffbfe-0x115,_0x206207-0x37e,_0x121c0c-0x128,_0x1ffbfe);}let _0x5197f4=_0x779fa2[_0x86f1ae(0x601,0x5cb,0x582,0x612)];_0x5197f4+=_0x497246(0x27c,0x22a,0x292,0x224)+(_0x37590a['nameCN']||'')+'\x0a',_0x5197f4+=_0x497246(0x335,0x2b4,0x2e2,0x2b2)+(_0x37590a[_0x497246(0x27e,0x252,0x262,0x1fd)]||'')+'\x0a',_0x5197f4+=_0x497246(0x265,0x1f1,0x1fa,0x19f)+(_0x37590a[_0x497246(0x1a4,0x1ef,0x203,0x1d8)]||'')+'\x0a',_0x5197f4+=_0x86f1ae(0x68b,0x6c0,0x614,0x66f)+(_0x37590a[_0x497246(0x259,0x2a7,0x268,0x26d)+_0x497246(0x21d,0x224,0x231,0x203)]||'')+'\x0a',_0x5197f4+=_0x497246(0x203,0x24f,0x1c8,0x1d6)+(_0x37590a[_0x86f1ae(0x639,0x66c,0x5cf,0x651)]||'')+'\x0a',_0x5197f4+=_0x86f1ae(0x60b,0x5ea,0x66e,0x648)+(_0x37590a[_0x497246(0x25d,0x213,0x1fc,0x1c0)+'ck']||'')+'\x0a';function _0x86f1ae(_0x397e4d,_0x4267ef,_0x2003be,_0x3ec716){return _0x5db4f5(_0x397e4d-0x31,_0x397e4d-0x73d,_0x2003be-0x165,_0x4267ef);}return _0x5197f4+=_0x779fa2[_0x86f1ae(0x5f6,0x627,0x63c,0x609)],_0x5197f4;}export async function handleOutfitPromptModify(_0x40bde3,_0xe49dd3=[]){const _0x1d145a={'NZCFc':function(_0x221550,_0x559b01){return _0x221550(_0x559b01);},'HkQlD':_0x3d2c95(-0xeb,-0x15f,-0xe5,-0xbe),'YUeHt':function(_0x4ee689,_0x20f472){return _0x4ee689(_0x20f472);},'VAniO':function(_0x5111d3,_0x4d5afb){return _0x5111d3(_0x4d5afb);},'HOHdO':'[outfitPro'+_0x3d2c95(-0x58,-0x8f,-0xa,-0xb4)+_0x3d2c95(-0x1f,-0x3,-0x92,-0x31)+'outfit\x20pro'+_0x3d2c95(-0x3,-0x2f,0x36,-0x67)+_0x3d2c95(-0xb4,-0x5b,-0xd8,-0x62)+'.','TbgMe':_0x2cfa86(0x323,0x29b,0x391,0x2a7)+_0x2cfa86(0x340,0x2b3,0x369,0x2b5),'YbhEO':function(_0x333994,_0x308b44){return _0x333994!==_0x308b44;},'WkiKA':'NgImf','BFRBi':'dboFL','sMxDu':function(_0x4b4a4f){return _0x4b4a4f();},'rEHqP':_0x3d2c95(-0x39,-0x56,-0x7b,-0xa6),'Tptwq':_0x3d2c95(-0x37,-0x9a,-0xa7,-0x37),'FZcgx':_0x2cfa86(0x35c,0x3a5,0x3cc,0x334),'xixrB':function(_0xc106d8,_0x13d73d){return _0xc106d8||_0x13d73d;},'DhwFn':function(_0x24ea16,_0x484bee,_0x40d836){return _0x24ea16(_0x484bee,_0x40d836);},'OWLBy':_0x3d2c95(0xe,-0x7a,0x1a,0x91),'qNepT':_0x2cfa86(0x291,0x2c4,0x254,0x30f)+'mptModify]'+_0x2cfa86(0x39e,0x418,0x3a4,0x39d)+_0x3d2c95(-0x14,0x13,-0x5,-0x9c)+'ssage\x20inde'+'x:','ZjzZW':function(_0x4a6f91,_0x2dbf7e,_0x483350,_0x1d6658,_0x421dd9){return _0x4a6f91(_0x2dbf7e,_0x483350,_0x1d6658,_0x421dd9);},'rVBtq':_0x2cfa86(0x34e,0x378,0x2dc,0x3a3),'kgoCn':function(_0xa5e6e5,_0x59009b,_0x1ada54,_0x56b1c7,_0x3726b7){return _0xa5e6e5(_0x59009b,_0x1ada54,_0x56b1c7,_0x3726b7);},'DOAaY':'{{服装列表}}','ysYoc':function(_0x54c25f,_0x5edf0a){return _0x54c25f||_0x5edf0a;},'KCqei':'{{当前角色}}','vlKeX':_0x2cfa86(0x2fe,0x381,0x2db,0x30e),'ZBbEq':_0x3d2c95(-0x51,-0x28,-0xd2,-0xc8),'jvlYH':function(_0x90c8bd,_0x5ac6a6,_0x2142db,_0x20d0ac,_0x557e5d){return _0x90c8bd(_0x5ac6a6,_0x2142db,_0x20d0ac,_0x557e5d);},'EjRaz':'{{通用服装启用列表'+'}}','IBgFq':_0x2cfa86(0x291,0x2de,0x239,0x26e)+_0x2cfa86(0x336,0x2fe,0x2e7,0x2c6)+_0x3d2c95(-0x3b,-0x88,-0x1d,-0x96)+_0x2cfa86(0x2e8,0x349,0x361,0x2bb),'CgcYx':function(_0x35c1f7,_0x4d7d62){return _0x35c1f7>_0x4d7d62;},'LWiTx':function(_0x56893e,_0x3b56d2){return _0x56893e>=_0x3b56d2;},'NnEAa':'参考图片','lFiLv':_0x3d2c95(-0xfd,-0x148,-0xb7,-0xfb)+_0x3d2c95(-0x58,0xb,-0x44,-0x43)+_0x3d2c95(-0x68,-0x91,-0xb5,-0x6),'XgtMi':_0x3d2c95(-0x62,-0xf,-0x64,0xa)+_0x3d2c95(-0x79,-0x6a,-0x3e,-0x24)+_0x2cfa86(0x2a8,0x232,0x335,0x2c6),'vVqsy':function(_0x7a5ba1,_0x3fc629,_0x51b9af){return _0x7a5ba1(_0x3fc629,_0x51b9af);},'wsRLX':_0x3d2c95(-0xa2,-0x9b,-0x1f,-0x8f),'jeAWI':_0x3d2c95(-0xe9,-0x10a,-0x162,-0xb6)+'检测到服装标签','pAUaD':_0x2cfa86(0x291,0x2fb,0x289,0x2b8)+_0x2cfa86(0x336,0x38a,0x2e2,0x2c4)+_0x3d2c95(-0xc9,-0x63,-0xd5,-0xed)+_0x2cfa86(0x321,0x2d2,0x326,0x29b)+_0x2cfa86(0x30a,0x35c,0x2e0,0x2a1),'GVIfT':_0x2cfa86(0x291,0x25b,0x295,0x286)+_0x3d2c95(-0x58,-0xb5,-0x41,-0xe1)+'\x20Extracted'+_0x2cfa86(0x2ca,0x2c6,0x2ed,0x255),'iayeE':_0x2cfa86(0x2b9,0x260,0x264,0x2eb),'fDDvg':function(_0x13b288,_0xbcfa6a){return _0x13b288===_0xbcfa6a;},'TsnPx':_0x3d2c95(-0x2d,-0x12,-0xa5,-0x66)};function _0x2cfa86(_0x4d07be,_0x32121b,_0x313c11,_0x4d227f){return _0x5db4f5(_0x4d07be-0xb6,_0x4d07be-0x43e,_0x313c11-0xd0,_0x313c11);}console[_0x3d2c95(-0x9d,-0x35,-0x28,-0x71)](_0x1d145a[_0x3d2c95(-0xee,-0x166,-0x170,-0x11f)]),toastr[_0x3d2c95(-0x45,-0x70,0x43,0x4a)](_0x1d145a[_0x2cfa86(0x3a5,0x3f5,0x407,0x3f6)]);function _0x3d2c95(_0x55048c,_0x4483bd,_0x5d23e3,_0x1625da){return _0x5db4f5(_0x55048c-0x1b3,_0x55048c-0xb0,_0x5d23e3-0x189,_0x1625da);}try{if(_0x1d145a[_0x2cfa86(0x343,0x3b1,0x3a2,0x2b7)](_0x1d145a[_0x2cfa86(0x29f,0x2e5,0x23c,0x2e8)],_0x1d145a[_0x3d2c95(-0x6a,-0x73,-0x10,-0xeb)])){const _0x575fc3=extension_settings[extensionName],_0x1aa174=_0x1d145a[_0x2cfa86(0x337,0x39d,0x30b,0x33b)](getCurrentOutfitPreset);if(!_0x1aa174){if(_0x1d145a['rEHqP']!==_0x1d145a['Tptwq']){toastr['error'](_0x1d145a['FZcgx']);return;}else _0x2b6ffc['value']=_0x2a1377[_0x174a27],_0x1d145a[_0x2cfa86(0x373,0x330,0x347,0x391)](_0x570bcd,_0x2e5d44)[_0x2cfa86(0x2e3,0x269,0x2f3,0x2fc)](_0x1d145a[_0x3d2c95(-0xdc,-0xd1,-0x69,-0xec)]);}console[_0x2cfa86(0x2f1,0x273,0x2cc,0x32e)](_0x3d2c95(-0xfd,-0x11c,-0xbd,-0x15f)+_0x2cfa86(0x336,0x331,0x330,0x385)+'\x20Current\x20p'+'reset:',_0x1aa174['id']);const _0x43e120=buildOutfitText(_0x1aa174),_0x29f1f4=[_0x1d145a[_0x3d2c95(-0x63,-0x22,-0x10,-0x12)](_0x40bde3,''),_0x43e120][_0x3d2c95(-0xf2,-0x171,-0x169,-0x169)](Boolean)[_0x3d2c95(-0x30,-0x95,-0x74,-0x6b)]('\x0a');let _0x490c00=buildPromptForRequestType(_0x3d2c95(-0xba,-0x8e,-0x143,-0xd4)+'y',_0x29f1f4);const _0x85123=new Set(),_0x3372b1=_0x1d145a['DhwFn'](findMessageIndexWithPlaceholder,_0x490c00,_0x1d145a['OWLBy']);console[_0x3d2c95(-0x9d,-0x35,-0xd5,-0x7f)](_0x1d145a[_0x3d2c95(-0x29,-0x6c,-0x34,-0x21)],_0x3372b1),_0x490c00=_0x1d145a[_0x3d2c95(-0xb0,-0x74,-0xe3,-0xaa)](replacePlaceholder,_0x490c00,_0x1d145a['rVBtq'],_0x43e120,_0x85123),_0x490c00=_0x1d145a[_0x2cfa86(0x37d,0x376,0x2fa,0x348)](replacePlaceholder,_0x490c00,_0x1d145a[_0x3d2c95(-0x9e,-0x42,-0xba,-0x12)],_0x43e120,_0x85123),_0x490c00=replacePlaceholder(_0x490c00,_0x1d145a[_0x3d2c95(-0x1e,-0x6f,-0x4b,-0x63)],_0x1d145a['ysYoc'](_0x40bde3,''),_0x85123),_0x490c00=replacePlaceholder(_0x490c00,_0x1d145a[_0x3d2c95(-0x78,-0x27,-0xb6,-0xb4)],'',_0x85123),_0x490c00=_0x1d145a[_0x3d2c95(-0x11,-0x54,0x6c,-0x98)](replacePlaceholder,_0x490c00,'{{上下文}}','',_0x85123),_0x490c00=replacePlaceholder(_0x490c00,_0x1d145a[_0x3d2c95(-0x74,-0x8f,-0x73,-0xae)],'',_0x85123),_0x490c00=_0x1d145a[_0x2cfa86(0x37d,0x40b,0x3cc,0x31e)](replacePlaceholder,_0x490c00,_0x1d145a[_0x2cfa86(0x2bc,0x325,0x238,0x2ee)],'',_0x85123),_0x490c00=_0x1d145a[_0x2cfa86(0x2be,0x26a,0x275,0x2f6)](replacePlaceholder,_0x490c00,_0x1d145a[_0x2cfa86(0x293,0x297,0x2bb,0x257)],'',_0x85123),_0x490c00=_0x1d145a[_0x2cfa86(0x37d,0x367,0x389,0x347)](replacePlaceholder,_0x490c00,_0x2cfa86(0x2f9,0x33a,0x27c,0x352)+'}}','',_0x85123),console[_0x2cfa86(0x2f1,0x2bb,0x289,0x35f)](_0x1d145a[_0x2cfa86(0x2b5,0x24c,0x2ef,0x2de)],_0x490c00);let _0x3db7ad='';_0x1d145a['CgcYx'](_0x85123[_0x2cfa86(0x360,0x3bd,0x381,0x367)],0xca9+0x19*0xf9+-0x1*0x24fa)&&(_0x3db7ad='诊断：检测到以下变量'+'被使用：'+[..._0x85123][_0x2cfa86(0x35e,0x3c2,0x3af,0x3eb)]('、')+'\x0a');_0xe49dd3&&_0x1d145a[_0x2cfa86(0x2bb,0x28b,0x241,0x272)](_0xe49dd3['length'],-0x1*0x1d04+0x177*-0x13+-0xe7*-0x3f)&&_0x1d145a['LWiTx'](_0x3372b1,0x265e+0x1109*-0x1+-0x1555)&&(_0x490c00=attachImagesToMessage(_0x490c00,_0x3372b1,_0xe49dd3,_0x1d145a[_0x2cfa86(0x322,0x2e2,0x306,0x3aa)]),console[_0x3d2c95(-0x9d,-0xc0,-0x25,-0x15)](_0x1d145a[_0x3d2c95(-0xc5,-0x55,-0x8f,-0xd0)],_0xe49dd3[_0x3d2c95(-0x31,-0x9c,0x40,0x4a)],_0x1d145a[_0x2cfa86(0x39f,0x39e,0x3ce,0x36a)],_0x3372b1));_0x1d145a[_0x2cfa86(0x2bf,0x276,0x2bb,0x2d9)](updateCombinedPrompt,_0x490c00,_0x3db7ad);const _0x2b6c0c={};_0x2b6c0c[_0x3d2c95(-0x9c,-0x71,-0xcf,-0x106)]=0x493e0;const _0x3f4e24=await _0x1d145a[_0x3d2c95(-0xcf,-0x4e,-0xf3,-0x11d)](LLM_OUTFIT_MODIFY,_0x490c00,_0x2b6c0c);console['log'](_0x2cfa86(0x291,0x27a,0x30b,0x30f)+_0x3d2c95(-0x58,-0x23,-0x89,-0xbc)+_0x3d2c95(-0xde,-0xd5,-0xc0,-0x142)+'t:',_0x3f4e24);if(!_0x3f4e24){toastr['error'](_0x1d145a[_0x3d2c95(-0xea,-0xa1,-0xe8,-0x172)]);return;}const _0xc90b43=_0x1d145a['NZCFc'](extractOutfitTags,_0x3f4e24);if(_0xc90b43[_0x3d2c95(0x1,0x8,-0x19,0x5)][_0x3d2c95(-0x31,-0x67,0x29,-0x7d)]===0x2405+0x1051+0x1a2b*-0x2){toastr[_0x2cfa86(0x37f,0x39f,0x394,0x30d)](_0x1d145a[_0x3d2c95(-0x46,-0x6a,0x1b,-0x85)]),console[_0x2cfa86(0x2f1,0x2a0,0x2f6,0x2a1)](_0x1d145a[_0x2cfa86(0x39a,0x3b1,0x3eb,0x351)],_0x3f4e24);return;}console['log'](_0x1d145a[_0x2cfa86(0x391,0x36f,0x38e,0x3bf)],_0xc90b43);const _0x19b232=_0xc90b43['outfits'][-0x5*-0x3c2+-0x24d7*-0x1+0x2f*-0x12f];await _0x1d145a[_0x3d2c95(-0xc0,-0x34,-0x51,-0xa9)](updateOutfitPresetFromLLM,_0x1aa174['id'],_0x19b232),toastr['success'](_0x1d145a['iayeE']);}else{const _0x2dcf82=_0x1d145a[_0x2cfa86(0x396,0x333,0x317,0x33b)](_0x4e524f,_0x560cc3[-0x588+0x1*0x1e1a+-0x1891*0x1]),_0x31c326=_0x1d145a[_0x3d2c95(-0xad,-0xa7,-0x7d,-0x4e)](_0x6e619f,_0x2dcf82);_0x31c326&&_0xd58591['outfits'][_0x2cfa86(0x2cd,0x329,0x2d4,0x2b3)](_0x31c326);}}catch(_0x12b039){if(_0x1d145a[_0x2cfa86(0x319,0x2e0,0x339,0x2d7)](_0x2cfa86(0x2cc,0x33a,0x2b4,0x252),_0x1d145a[_0x3d2c95(-0xf4,-0x9d,-0xc7,-0xaf)])){if(_0x1ed69e&&_0xac546b[_0x3d2c95(-0xaf,-0x60,-0xeb,-0x90)])return _0x4a5345[_0x2cfa86(0x2df,0x2d2,0x34d,0x288)]();return _0x7d26b8[_0x3d2c95(-0xb2,-0x25,-0xe2,-0x3f)]()[_0x3d2c95(-0x93,-0x27,-0xd6,-0x8c)](-0x15b*-0x1b+0x360+-0x27d5)+_0x13c580['random']()[_0x2cfa86(0x2fb,0x36a,0x2e5,0x323)](-0x27f+-0x7f*0x2f+-0x2*-0xcfa)[_0x3d2c95(-0x81,-0xc7,-0xda,-0x5a)](-0x11*-0x3e+0x8d1*-0x4+0x1f28*0x1);}else console[_0x3d2c95(-0x28,0x20,-0x46,-0x9a)]('[outfitPro'+'mptModify]'+_0x2cfa86(0x371,0x392,0x309,0x376),_0x12b039),toastr[_0x3d2c95(-0x28,0x13,0x48,-0x1a)]('服装提示词修改失败:'+'\x20'+_0x12b039[_0x2cfa86(0x317,0x38b,0x2af,0x2d0)]);}}async function updateOutfitPresetFromLLM(_0x52cac7,_0x422a2c){function _0x369e68(_0x4bcc30,_0x2606f0,_0x348607,_0x3eaf75){return _0x5db4f5(_0x4bcc30-0x10c,_0x3eaf75-0x5,_0x348607-0x13c,_0x348607);}const _0x3bfe45={'BfYzB':_0x2eee68(0x413,0x400,0x383,0x40a),'WRyQp':_0x2eee68(0x4e0,0x49a,0x45f,0x41e),'zMJVJ':_0x2eee68(0x4d6,0x487,0x472,0x40e),'SNaEt':'上半身','vcjmn':_0x2eee68(0x41c,0x4aa,0x523,0x536),'lUvHZ':_0x369e68(-0x3a,-0xe7,-0xcc,-0xa4),'oRBIb':_0x369e68(-0x11a,-0x151,-0x16f,-0xf4),'DMLJF':function(_0x54b6c7,_0xa91037){return _0x54b6c7!==_0xa91037;},'JkLOb':function(_0x3a8acd,_0x2348d7){return _0x3a8acd>_0x2348d7;},'aZWRT':_0x369e68(-0x1ad,-0x165,-0x188,-0x125),'Cwvdq':_0x2eee68(0x3f2,0x3e8,0x41d,0x3da)+'内容','CQooj':function(_0x38f4d5,_0xa996fa){return _0x38f4d5(_0xa996fa);},'MSYbb':_0x369e68(-0x172,-0xf4,-0xdb,-0x121),'AEGLa':function(_0x23c1bb,_0x12ce27){return _0x23c1bb===_0x12ce27;},'hwtJD':'ZVpxi','vHhkb':function(_0x3d9043){return _0x3d9043();},'EpWqs':function(_0x58ed48,_0x49825a){return _0x58ed48(_0x49825a);}},_0x47b7c0=extension_settings[extensionName],_0x343333=_0x47b7c0[_0x2eee68(0x415,0x3ef,0x389,0x3b4)+_0x369e68(-0x132,-0x78,-0x152,-0xe3)][_0x52cac7];if(!_0x343333){toastr[_0x369e68(-0xef,-0x4a,-0x127,-0xd3)](_0x3bfe45[_0x369e68(-0x1fa,-0x1a1,-0x187,-0x1a4)]);return;}let _0x1fa3c3=_0x369e68(-0xa4,-0x76,-0x9a,-0xd1)+_0x52cac7+_0x2eee68(0x3df,0x3ed,0x424,0x3d0);const _0x16b136={};_0x16b136[_0x369e68(-0x90,-0xd0,-0xb6,-0x91)]=_0x3bfe45['WRyQp'],_0x16b136[_0x2eee68(0x3f1,0x418,0x3ed,0x3ca)]=_0x3bfe45['zMJVJ'],_0x16b136['upperBody']=_0x3bfe45[_0x369e68(-0x18d,-0x149,-0x147,-0x104)],_0x16b136[_0x2eee68(0x3ed,0x46d,0x491,0x4c3)+_0x2eee68(0x3e8,0x3ea,0x3ee,0x462)]=_0x3bfe45[_0x2eee68(0x3b4,0x425,0x495,0x431)],_0x16b136['fullBody']=_0x3bfe45[_0x369e68(-0x6d,-0x78,-0x95,-0x90)];function _0x2eee68(_0x661758,_0x5453e0,_0x49ae37,_0x5b2757){return _0x5db4f5(_0x661758-0x20,_0x5453e0-0x544,_0x49ae37-0xea,_0x661758);}_0x16b136['fullBodyBa'+'ck']=_0x3bfe45[_0x2eee68(0x3b3,0x40d,0x392,0x418)];const _0xe4de3f=_0x16b136;let _0x5c76e7=-0x2*0x2a1+-0x285*0x9+-0x1*-0x1bef;for(const _0x5cc355 in _0xe4de3f){if(_0x422a2c[_0x5cc355]&&_0x3bfe45[_0x369e68(-0x190,-0x145,-0x10c,-0x106)](_0x422a2c[_0x5cc355],_0x343333[_0x5cc355])){const _0x169716=_0x343333[_0x5cc355]||_0x369e68(-0xc7,-0xd9,-0x1c1,-0x139),_0x55b4e5=_0x422a2c[_0x5cc355];_0x1fa3c3+='•\x20'+_0xe4de3f[_0x5cc355]+':\x0a',_0x1fa3c3+='\x20\x20旧:\x20'+_0x169716[_0x369e68(-0x11b,-0x16c,-0x1b8,-0x12c)](0x15c8+0x18d7+-0x43d*0xb,0x611*-0x4+0x11aa+0x6cc)+(_0x3bfe45[_0x369e68(-0x149,-0x181,-0x94,-0x105)](_0x169716[_0x369e68(-0x70,-0x118,-0x58,-0xdc)],0x1*0x2635+-0x23c3+-0x240)?_0x2eee68(0x3b2,0x41a,0x3b8,0x3cc):'')+'\x0a',_0x1fa3c3+=_0x2eee68(0x453,0x4ad,0x4c4,0x50a)+_0x55b4e5[_0x369e68(-0xc4,-0xe3,-0x186,-0x12c)](-0x2*-0x623+-0x2468+-0xc11*-0x2,0x11fb*-0x1+0x1*-0xe39+0x2066)+(_0x55b4e5[_0x369e68(-0x6e,-0x15e,-0xd8,-0xdc)]>-0x1*0xbbf+-0xee5+0x1ad6?_0x3bfe45[_0x2eee68(0x4d7,0x484,0x48b,0x4c0)]:'')+'\x0a\x0a',_0x5c76e7++;}}if(_0x5c76e7===-0x4*0x72+-0x1897+0x1a5f){toastr[_0x369e68(-0x170,-0xa2,-0x75,-0xf0)](_0x3bfe45[_0x2eee68(0x4ec,0x47e,0x417,0x42d)]);return;}_0x1fa3c3+='共\x20'+_0x5c76e7+_0x2eee68(0x426,0x407,0x479,0x397);const _0x6febba=await _0x3bfe45[_0x369e68(-0x184,-0x1e2,-0x10e,-0x15e)](stylishConfirm,_0x1fa3c3);if(!_0x6febba){toastr[_0x369e68(-0x10a,-0xcd,-0xc2,-0xf0)](_0x3bfe45[_0x369e68(-0x52,-0x9a,-0x39,-0xab)]);return;}for(const _0x4a8879 in _0xe4de3f){_0x3bfe45[_0x2eee68(0x364,0x3a8,0x433,0x3bf)](_0x3bfe45[_0x369e68(-0x1c2,-0x17c,-0x13c,-0x160)],_0x3bfe45[_0x2eee68(0x3e0,0x3df,0x3de,0x414)])?_0x422a2c[_0x4a8879]&&(_0x343333[_0x4a8879]=_0x422a2c[_0x4a8879]):_0x2e32b5[_0x369e68(-0x6a,-0x9d,-0xef,-0xaa)][_0x2eee68(0x3bf,0x3d3,0x456,0x399)](_0x91a5e1);}_0x3bfe45[_0x2eee68(0x3c3,0x3af,0x432,0x417)](saveSettingsDebounced);const _0x1b5597=$(_0x2eee68(0x3da,0x3c3,0x3d4,0x3fe)+'-tab-chara'+'cter');_0x1b5597[_0x369e68(-0xdf,-0x133,-0x7c,-0xdc)]&&loadOutfitPreset(),_0x3bfe45[_0x2eee68(0x3d2,0x445,0x3dd,0x4ac)](updateOutfitFormFields,_0x422a2c),console[_0x2eee68(0x3f7,0x3f7,0x461,0x3d7)](_0x369e68(-0x222,-0x22c,-0x153,-0x1a8)+'mptModify]'+'\x20已更新服装预设\x20\x22'+_0x52cac7+'\x22');}function updateOutfitFormFields(_0x1f7edc){const _0x33d361={'vlXDe':function(_0x38c53d,_0x241d0a){return _0x38c53d!==_0x241d0a;},'BwsdS':_0x28d7f3(-0x32,-0x2f,0x2d,-0x66),'jvIKa':function(_0x26f987,_0x2bae5d){return _0x26f987(_0x2bae5d);},'MrkvL':'input','qLacS':_0x3da2fd(0x34e,0x334,0x2c9,0x325),'mYnFf':_0x3da2fd(0x2b8,0x33d,0x28c,0x270),'TmkwD':'fullBodyBa'+'ck'};function _0x3da2fd(_0x11db40,_0x41bb99,_0x52d6c4,_0x215626){return _0x5db4f5(_0x11db40-0x100,_0x11db40-0x3e4,_0x52d6c4-0x1c7,_0x215626);}function _0x28d7f3(_0x5e47bd,_0x9ba7e0,_0x497581,_0x51dc0e){return _0x5db4f5(_0x5e47bd-0x87,_0x5e47bd-0xbc,_0x497581-0x1cf,_0x497581);}const _0x4fa3e8=[_0x33d361[_0x3da2fd(0x27c,0x28b,0x25d,0x2e3)],_0x33d361[_0x28d7f3(-0xdc,-0xe2,-0x12b,-0x15f)],'upperBody',_0x3da2fd(0x30d,0x298,0x32e,0x32e)+_0x3da2fd(0x28a,0x2cc,0x228,0x240),_0x3da2fd(0x2e0,0x31d,0x332,0x2dd),_0x33d361[_0x3da2fd(0x32f,0x35c,0x35e,0x37e)]];_0x4fa3e8[_0x3da2fd(0x251,0x27b,0x2cb,0x1c8)](_0x167e00=>{function _0xf5e00b(_0x112f01,_0xaf511e,_0xda3403,_0x28a401){return _0x28d7f3(_0xaf511e-0x461,_0xaf511e-0x175,_0x112f01,_0x28a401-0x46);}function _0x317115(_0x4ff3c5,_0x103692,_0x54c930,_0x1bdc26){return _0x3da2fd(_0x103692- -0x72,_0x103692-0x1b7,_0x54c930-0x1c7,_0x1bdc26);}if(_0x33d361['vlXDe'](_0x33d361[_0x317115(0x1be,0x1fc,0x266,0x196)],'krqFb'))return _0x35dbb3;else{if(_0x1f7edc[_0x167e00]){const _0x1d3ec0=document[_0x317115(0x247,0x1ca,0x20c,0x165)+'ById'](_0x317115(0x2d1,0x2d7,0x2d2,0x357)+_0x167e00);_0x1d3ec0&&(_0x1d3ec0[_0x317115(0x279,0x20b,0x1ca,0x276)]=_0x1f7edc[_0x167e00],_0x33d361[_0x317115(0x1a5,0x1f8,0x210,0x25a)]($,_0x1d3ec0)[_0xf5e00b(0x3a0,0x3c2,0x407,0x3dc)](_0x33d361[_0x317115(0x2f5,0x2a1,0x324,0x2c8)]));}}});}