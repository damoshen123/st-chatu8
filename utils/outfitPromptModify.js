(function(_0x3c8ed1,_0x3a7dfc){function _0xe8578b(_0xc6b665,_0x29602b,_0x263f4a,_0x27e447){return _0x2f0b(_0x27e447- -0x2ae,_0x263f4a);}function _0x2a333c(_0x14fb5d,_0x4e7108,_0x3e14a1,_0x7f7d04){return _0x2f0b(_0x14fb5d-0x2d7,_0x3e14a1);}const _0x3a7d7c=_0x3c8ed1();while(!![]){try{const _0x2f7ceb=parseInt(_0x2a333c(0x3dc,0x3bf,0x3cf,0x361))/(0x25b3*0x1+0x416*-0x7+0xc*-0xc2)*(parseInt(_0xe8578b(-0x169,-0x17e,-0xe2,-0x14b))/(-0x2407+0xf6f+-0x3*-0x6de))+parseInt(_0x2a333c(0x40d,0x46b,0x460,0x499))/(0x8d2+-0x15f8+0xd29)+-parseInt(_0xe8578b(-0x1ba,-0x20f,-0x124,-0x19d))/(-0x48f*-0x5+0x1673+-0x2d3a)+parseInt(_0x2a333c(0x49a,0x4c5,0x4dc,0x441))/(-0x1*-0x1470+0xc5*-0xf+-0x8e0)+parseInt(_0x2a333c(0x45a,0x415,0x40c,0x3df))/(0x7f*0x21+-0x8*0x46d+0x29*0x77)+parseInt(_0xe8578b(-0x202,-0x254,-0x26c,-0x1e7))/(0xc95*-0x1+-0x8a*-0x1c+0x13e*-0x2)+-parseInt(_0x2a333c(0x494,0x46b,0x480,0x4a6))/(0x23cc+0x257d+-0x2f*0x18f)*(parseInt(_0x2a333c(0x3a5,0x34a,0x3d0,0x33e))/(-0x1192+-0x22cd+-0x68*-0x81));if(_0x2f7ceb===_0x3a7dfc)break;else _0x3a7d7c['push'](_0x3a7d7c['shift']());}catch(_0x4268df){_0x3a7d7c['push'](_0x3a7d7c['shift']());}}}(_0x5a15,-0xe38a2*0x1+0x1*-0xc1391+0x1495c7*0x2));const _0xe829e0=(function(){let _0x27bb9e=!![];return function(_0x3c4cd0,_0x4911ff){const _0x39916c=_0x27bb9e?function(){function _0x2a0b7e(_0xc016cd,_0x50d515,_0x3072f6,_0xefcf94){return _0x2f0b(_0x50d515- -0x13d,_0x3072f6);}if(_0x4911ff){const _0x1b2b2e=_0x4911ff[_0x2a0b7e(-0x94,-0x47,-0xc0,-0x7)](_0x3c4cd0,arguments);return _0x4911ff=null,_0x1b2b2e;}}:function(){};return _0x27bb9e=![],_0x39916c;};}()),_0x20e785=_0xe829e0(this,function(){const _0x58d237={};_0x58d237[_0x464f3c(0x1fe,0x236,0x221,0x268)]=_0x464f3c(0x1bb,0x1c0,0x200,0x28a)+'+$';const _0x3844e4=_0x58d237;function _0x48fbe7(_0x22ee26,_0x2d889c,_0x400071,_0xf8dc53){return _0x2f0b(_0x22ee26-0x347,_0xf8dc53);}function _0x464f3c(_0x55e053,_0x485ba2,_0x236821,_0x572b5c){return _0x2f0b(_0x236821-0x94,_0x485ba2);}return _0x20e785[_0x48fbe7(0x4f1,0x51d,0x521,0x4cb)]()[_0x464f3c(0x20f,0x1de,0x22b,0x24c)](_0x3844e4[_0x464f3c(0x1f3,0x26a,0x221,0x19a)])[_0x464f3c(0x2a3,0x23f,0x23e,0x219)]()[_0x464f3c(0x162,0x181,0x16f,0x123)+'r'](_0x20e785)[_0x48fbe7(0x4de,0x51b,0x46b,0x4aa)](_0x48fbe7(0x4b3,0x434,0x442,0x4ae)+'+$');});_0x20e785();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../script.js';import{updateCombinedPrompt}from'./settings/llm.js';function _0x5a15(){const _0x72f21b=['5Qoa5Rwl5yIW5PYn6kof5Qch562+','mtmWndHwu3Hss2C','BwfW','Bgvvuxe','vKnSzLi','AMvUuLq','zxrZ','yvHXyxy','5lIT5PAh5zcn56EWoIa','yKz5zey','5yEg5Ash5PU05PAW5PYn6kofici','ue9ou0u','BMfTzuvo','nJu2mdm2ngrzyu96yq','koEPUIK','ifvZzxiGCMvXDq','thbrDwO','t0rjrLLFuKvrvq','5lIk5y2k6lQR6iom6z2I','uLrhDLG','Aen2u3C','CejNuvm','ufPXBMm','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','sKLOr0u','ufLmqvO','ugvNqLa','5lIl5y2k6lQR','B3v0zML0ihbYBW','5PYn6kof5l+U5Ps5ieXmtsdOR7C','EuHnsLm','Cw1Uq1K','t0rjrLLFuKvtua','igLUzgv4','s3b3s2C','uxfRuMO','BMfTzuno','EfnbrfO','BwvZC2fNzq','DxbWzxjcB2r5qG','z2PsrMi','AKrMAhG','vK5fq3e','6kkR5l2/55sO77YA','zMnUDNC','pc/MNi3OO4u+','B3v0zML0uhjLCW','vxjiD3a','5Rgc6lAf5PE2','lI4U','ndC4otq0nMrTqLr2rG','D2fYBMLUzW','ruHIAgO','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','z2v0rwXLBwvUDa','qwnrwg4','wg5othG','zxjYB3i','Bw9Kq0O','y1DgALO','vLrstLu','ChjVBxb0','t2nkwLq','Bxb0oG','AKjfuu0','C3rYAw5N','yKfYqMO','r2DPv1a','q0rywhu','CMvZDwX0','vxrgzei','C3vJy2vZCW','5PYn6kof5O+q56s66k+n5l+U5Ps55AsX6lsLoG','yMfZzty0','AMPQC0O','E3VLVzpLIy3MNi3OO4v9Fq','vg9YwLm','zYbVDxrMAxqGBq','ChntthK','vgPTwxu','r1biy2i','wNzRwwO','A2fNsfa','CMvZzxq6','AM9PBG','DMTqCw8','r3zgqNO','EgH2uxu','C1b1BMi','zgvIDwDNAw5NoG','5PYQ5zYOieXmtsdOVPpLH7RKUk0','vNH5B0S','6iUX5PAh5zcn56EW','5lIk5y2k6lQR','CMvTB3zLtgLZDa','mJG0yxHvvxnM','BgvUz3rO','rK5fsg0','v0Tztu4','5lIk5y2k6lQRoIa','B3v0zML0CW','zw1PDa','CMvWBgfJzufSBa','ywrK','kcGOlISPkYKRkq','E3VMNi3OO4xLIjFOOAH9Fq','ufjptvbux1jfuW','ien1CNjLBNqGCa','C3rHCNrZv2L0Aa','ig91DgzPDcbTBW','CK11se8','Bg9N','zgf0yq','rxbbufa','y1DpExi','ChzODwq','qNLjza','sfPNsw8','poACJEIJHt4k','icdMLRa6ia','Aw5WDxq','q0jzugm','l3bUzZTIyxnLnG','Bunhtw4','CLPLtvm','CKHRyNC','s0z1teO','odK1nJm3nhfwvLLIyq','C3vIC3rYAw5N','refkzLm','yNPWsvy','y0TbqKm','DgLTzw91De1Z','CMvWBgfJzq','ihjLCxvLC3qUlG','EMv3AfO','vwfRB1u','ywvjrvG','y0z3Aee','EhDzs2C','5lIl5y2k6lQRoIa','CMfUzg9T','w291DgzPDfbYBW','quHmvvO','Bxb0ig1VzgLMEq','A1HutLC','y0zdDLu','C2vHCMnO','iIdNMOtKU6xKUiVMLBdMJA46cGO','ywnR','y2HHCL9TB2rPzG','zxrjza','zxHLyW','C3bSAxq','5lIl5y2k6lQR6iom6z2IoIa','t25uAwG','BNHnrMe','quzrBfm','E3VKUjBNLyZKUABOP6BLJ5f9Fq','r0PvteW','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','DxbWzxjcB2r5','6i635y+w5PYn6kof5l+U5Ps55O+q56s66k+n6lAf','BwvZC2fNzsbHDa','ifn0yxj0Aw5Nia','y29UDgvUDa','Dg9tDhjPBMC','CxvPAM4','C2L6zq','y0H2rge','Dgv4Da','AxjLBwvUDcbTzq','Aw1Hz2vFDxjS','BMfTzq','i3n0lwnOyxr1oa','icdML6C6ia','zxf1zxn0icHjra','ief0DgfJAgvK','5Ps56k+35RgclI4U','uKPMAwe','y1bkCLm','B2rKDMe','zMDID2C','BKjoAfy','rMPntKC','mtmWndG5nKTVCLfuCq','s0fOAgm','zgf0ytPPBwfNzq','zgv0ywLS','5lIl5y2k6lQR5PYn6kof','Cw5hzKK','nJCYndq4nuTAshrjBG','iev4zwn1DgLUzW','Bxb0tw9KAwz5xq','txDRugS','zMLSDgvY','swHQA2C','C1HWAg0','txD3ug0','u1zQu0K','5lIk5y2k6lQR6iom6z2IoIa','ChqGkeLeoIa','ifjHDYbmte0GBW','EfzWvgW','t05trq','DLncvLe','C0XRv2W','ChLQuKW','5y+c6icd5zU+54Mh','CwLOt24','ALjVvfG','AxnbCNjHEq','zNHdzwm','zNvSBejVzhK','ChDss0C','sK5St24','zgf0ytO','ieXmtsbVDxrWDq','mte5nZm4mJjNquHvwMK','zw5LCG','DhjPBq','twfMExe','DxrWDxqGzM9Yia','wMvLug0','iev4DhjHy3rLza','mJK3yMrZrfzm','Aw5JBhvKzxm','v3HZsuG','6iUX5PAh5zcn56EWoIa','C0PtyLq','teXnioIVT+AXGUwKSEI0Pq','DhLWzq','yxv0BW','ru9NtNa','5BEY5y+w5RAi5PU05PAW','shfLBM0','uwfXrKy','Aw5MBW','y29UC3rYDwn0BW','v2f2rhG','AvDQzu4','5Q2J5zYO5Ase55cg5PYn6kof5O+q56s66k+n5l+U','CMfUzg9Tvvvjra','EMzjzeu','lxrHyI1JAgfYyq','CvnXvvK','5lIT5PAh5zcn56EW','DhjPz2DLCG','uKjtAKC','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','B2jQzwn0','rNDUt0S','t0rjrLLFr0vuxW','DhfiB1m','ALPmAwC','5PYn6kof5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','t1bksu0','uu1uq1G','ChvZAa','DMfSDwu','Aw1Hz2vZihrVia','vg9Jy0S','AwPOreK','vuvtva','CNztCvK','yxbWBhK','sgHxzNm','teXnx0niqvjFtq','iow3SUABToAwSoACJEIJHEMIHoIUVIaI','r2PMuMm','sKX4vuy','DLzwrxa','wfnbCum','rwrQCgW','AuPjA1y','E3VLVzpLIy3OP5lOIBj9Fq','AurNvLa','zNvSBejVzhLcyq','ENfZt2K'];_0x5a15=function(){return _0x72f21b;};return _0x5a15();}import{buildPromptForRequestType}from'./settings/llmService.js';function _0x2f0b(_0x2c8cd4,_0x2fd6f9){_0x2c8cd4=_0x2c8cd4-(-0x7*-0x13a+-0x2b0+-0x1*0x528);const _0x5d5f69=_0x5a15();let _0x8eeeff=_0x5d5f69[_0x2c8cd4];if(_0x2f0b['pbeAGS']===undefined){var _0x504f58=function(_0x35ca11){const _0x2598d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1cc398='',_0x4042b3='',_0x1f8289=_0x1cc398+_0x504f58;for(let _0x423d2c=0x88a+-0x820*-0x4+-0x290a,_0x2aaa7a,_0x10f1e2,_0x4199fd=0xf78+0x2494+-0x340c;_0x10f1e2=_0x35ca11['charAt'](_0x4199fd++);~_0x10f1e2&&(_0x2aaa7a=_0x423d2c%(-0x1*-0x309+0x1de6+-0x20eb)?_0x2aaa7a*(0x1e2*-0x13+0x2100+0x306)+_0x10f1e2:_0x10f1e2,_0x423d2c++%(-0x10ff+-0x1*-0x1a2+0x1f*0x7f))?_0x1cc398+=_0x1f8289['charCodeAt'](_0x4199fd+(0x1*-0x17c5+-0x7*0x99+0x1bfe))-(0x13b+0xc29*0x1+-0xd5a)!==0x1738+-0x3fd*0x6+0xb6?String['fromCharCode'](0x196f*0x1+0x25fb+-0x3e6b&_0x2aaa7a>>(-(0xd86+-0x1bbd+0xe39)*_0x423d2c&-0x1bfe+0x14ee*-0x1+-0xe*-0x37f)):_0x423d2c:-0x37*0x5e+-0x17*0x17d+0x366d){_0x10f1e2=_0x2598d['indexOf'](_0x10f1e2);}for(let _0x8a704=0x783+0xcd7+0x145a*-0x1,_0x22eeab=_0x1cc398['length'];_0x8a704<_0x22eeab;_0x8a704++){_0x4042b3+='%'+('00'+_0x1cc398['charCodeAt'](_0x8a704)['toString'](0x9b1*0x1+0x242e+-0x2dcf))['slice'](-(0x59*-0x63+-0x7*0x2f0+0x36fd));}return decodeURIComponent(_0x4042b3);};_0x2f0b['ZtppoT']=_0x504f58,_0x2f0b['uBTMpl']={},_0x2f0b['pbeAGS']=!![];}const _0x4d6ef0=_0x5d5f69[-0x45e*0x1+0xab*0x11+-0x6fd],_0xd96d2=_0x2c8cd4+_0x4d6ef0,_0x101d7d=_0x2f0b['uBTMpl'][_0xd96d2];if(!_0x101d7d){const _0x594b6d=function(_0x4de36f){this['SzUuOg']=_0x4de36f,this['svWmGp']=[-0x1df*0xb+-0x15d5+0x2a6b,0x3*-0x712+0x1c1a+0x1*-0x6e4,0x277*-0xb+-0x2676*-0x1+-0x53*0x23],this['rtgYRx']=function(){return'newState';},this['xQXFAc']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['GYXonU']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x594b6d['prototype']['ZexGhZ']=function(){const _0x112ad0=new RegExp(this['xQXFAc']+this['GYXonU']),_0x59e696=_0x112ad0['test'](this['rtgYRx']['toString']())?--this['svWmGp'][0x53d+0x1*-0x252d+0x275*0xd]:--this['svWmGp'][-0xbd5+-0x1*-0x906+0x2cf];return this['AWrwTX'](_0x59e696);},_0x594b6d['prototype']['AWrwTX']=function(_0x456fa2){if(!Boolean(~_0x456fa2))return _0x456fa2;return this['lzFkEC'](this['SzUuOg']);},_0x594b6d['prototype']['lzFkEC']=function(_0x225089){for(let _0x55398c=0x1807*0x1+-0x15*0xc5+-0x7de*0x1,_0x6db582=this['svWmGp']['length'];_0x55398c<_0x6db582;_0x55398c++){this['svWmGp']['push'](Math['round'](Math['random']())),_0x6db582=this['svWmGp']['length'];}return _0x225089(this['svWmGp'][-0x2*-0x9b9+0x1949+-0x411*0xb]);},new _0x594b6d(_0x2f0b)['ZexGhZ'](),_0x8eeeff=_0x2f0b['ZtppoT'](_0x8eeeff),_0x2f0b['uBTMpl'][_0xd96d2]=_0x8eeeff;}else _0x8eeeff=_0x101d7d;return _0x8eeeff;}import{loadOutfitPreset}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0x4d92c9,_0x546784,_0x4545ad,_0x1dfc3c){const _0x3a7bd8={'TorZS':_0x3a57d9(0xa2,0xc1,0x75,0xc2),'foEFd':function(_0x59bc76,_0x548b6d){return _0x59bc76===_0x548b6d;},'KKmBg':_0x31326d(0x48d,0x473,0x4c4,0x4c5),'gjRFb':'XJUIt','VClfR':function(_0x165465,_0x57f3ab){return _0x165465===_0x57f3ab;},'AZoqs':'object','QaqFF':_0x3a57d9(0x181,0x131,0x169,0x118),'vkPqo':function(_0x2ad747,_0x659864,_0x16f677,_0x57515e,_0x1ba4a6){return _0x2ad747(_0x659864,_0x16f677,_0x57515e,_0x1ba4a6);}};if(typeof _0x4d92c9===_0x3a57d9(0x10f,0x119,0xe3,0x131)){if(_0x3a7bd8['foEFd'](_0x3a7bd8['KKmBg'],_0x3a7bd8[_0x3a57d9(0x110,0x50,0xca,0x154)])){_0x25a5de[_0x31326d(0x45d,0x472,0x376,0x3ff)](_0x3a7bd8[_0x3a57d9(0x12c,0xc9,0xee,0x85)]);return;}else return _0x4545ad&&_0x4d92c9[_0x31326d(0x442,0x3d0,0x3e0,0x3f4)](_0x546784)&&(_0x1dfc3c&&_0x1dfc3c[_0x3a57d9(0xe4,0x9f,0x109,0x157)](_0x546784)),_0x4d92c9[_0x31326d(0x4aa,0x45f,0x4ab,0x48f)](_0x546784,_0x4545ad);}function _0x3a57d9(_0x14bb78,_0x32a9a6,_0x969c00,_0x1a8fec){return _0x2f0b(_0x969c00- -0x62,_0x14bb78);}if(Array[_0x3a57d9(0x6a,0x97,0x5e,0x9b)](_0x4d92c9))return _0x4d92c9['map'](_0x568444=>replacePlaceholder(_0x568444,_0x546784,_0x4545ad,_0x1dfc3c));function _0x31326d(_0xbcd21,_0x410a4c,_0x276e05,_0x837fe2){return _0x2f0b(_0x837fe2-0x325,_0xbcd21);}if(_0x4d92c9&&_0x3a7bd8[_0x31326d(0x3b9,0x3f2,0x423,0x42d)](typeof _0x4d92c9,_0x3a7bd8['AZoqs'])){if(_0x3a7bd8[_0x31326d(0x440,0x41b,0x46a,0x3fe)]!==_0x3a57d9(0xcc,0xc0,0x74,0x6)){const _0x513c73={};for(const _0x3f28ff in _0x4d92c9){_0x513c73[_0x3f28ff]=_0x3a7bd8[_0x31326d(0x499,0x47e,0x4f5,0x47e)](replacePlaceholder,_0x4d92c9[_0x3f28ff],_0x546784,_0x4545ad,_0x1dfc3c);}return _0x513c73;}else _0xb55663[_0x3a57d9(0xe6,0xbc,0x8e,0x119)]=_0x40256d[_0x3e1bba],_0x415c49(_0x4cc9ae)[_0x31326d(0x44f,0x3f9,0x42e,0x409)](_0x3a57d9(0x123,0xa7,0x11a,0x16b));}return _0x4d92c9;}function attachImagesToMessage(_0x1f4b36,_0x38ea46,_0x25e56f,_0x4b5480=_0xff0e66(0x557,0x5d6,0x54a,0x596)){const _0x193557={};_0x193557['qihOn']=function(_0x193458,_0x3f5938){return _0x193458===_0x3f5938;},_0x193557[_0x4b0c6b(0x1da,0x197,0x1a4,0x1dd)]=_0xb533ba(-0xa1,-0x109,-0x7c,-0xbd),_0x193557[_0xb533ba(-0xa0,-0x9c,-0x19a,-0x115)]=_0xb533ba(-0xda,-0x125,-0x198,-0x11b),_0x193557[_0xb533ba(-0xb1,-0x1c,-0x46,-0x6d)]=_0xb533ba(0x1f,0x2,0x4,-0x54),_0x193557['kagHP']=_0xb533ba(-0x146,-0x140,-0x191,-0x13d),_0x193557[_0x4b0c6b(0x289,0x1dc,0x223,0x229)]=_0x4b0c6b(0x1d0,0x254,0x240,0x255),_0x193557[_0x4b0c6b(0x251,0x1f2,0x1de,0x15c)]=_0xb533ba(-0x1b2,-0x196,-0x191,-0x12d),_0x193557[_0x4b0c6b(0x1a7,0x154,0x18a,0x104)]=function(_0x55cfd5,_0x3ad0c6){return _0x55cfd5+_0x3ad0c6;},_0x193557[_0xb533ba(-0x1b,-0x108,-0x8f,-0x83)]=function(_0x460f38,_0x2c808c){return _0x460f38<_0x2c808c;},_0x193557['fcnvw']=function(_0xc5dc50,_0x2dd039){return _0xc5dc50>=_0x2dd039;},_0x193557[_0x4b0c6b(0x259,0x1f6,0x25a,0x1d2)]=function(_0x115541,_0x221778){return _0x115541===_0x221778;},_0x193557['HhWfs']=_0x4b0c6b(0x257,0x190,0x206,0x237),_0x193557[_0x4b0c6b(0x1f6,0x28a,0x24b,0x1e2)]=_0xb533ba(-0xac,-0x120,-0x47,-0xc4);const _0x39fde5=_0x193557;if(!_0x25e56f||_0x39fde5[_0x4b0c6b(0x142,0x15e,0x14e,0x189)](_0x25e56f[_0x4b0c6b(0x1c7,0x1a5,0x1f4,0x261)],0x1e52+-0x135a+-0x9c*0x12)||_0x39fde5[_0x4b0c6b(0x274,0x263,0x20f,0x225)](_0x38ea46,0x1*0x188b+-0x2568+0xcdd)||_0x39fde5[_0x4b0c6b(0x142,0x1d4,0x1c0,0x22b)](_0x38ea46,_0x1f4b36[_0x4b0c6b(0x214,0x16d,0x1f4,0x224)]))return _0x1f4b36;const _0x44e124=[..._0x1f4b36],_0x3ac099=_0x44e124[_0x38ea46],_0x58d61e=[];function _0xb533ba(_0x44cbf7,_0x583186,_0x29e641,_0x3f7e26){return _0xff0e66(_0x44cbf7-0x5b,_0x583186-0x7d,_0x3f7e26- -0x578,_0x44cbf7);}if(_0x39fde5[_0xb533ba(-0x70,-0x52,-0x86,-0x38)](typeof _0x3ac099[_0x4b0c6b(0x256,0x28f,0x239,0x25b)],_0x39fde5['LpQuj'])){if(_0x39fde5[_0xb533ba(-0x97,-0x28,0xc,-0x38)](_0x39fde5[_0x4b0c6b(0xfe,0x184,0x187,0x12b)],_0x39fde5['nBNhV'])){const _0x598ae7=_0x39fde5[_0xb533ba(-0x121,-0xfb,-0x194,-0x144)](typeof _0x22eeab,_0x39fde5[_0x4b0c6b(0x131,0x12a,0x1a4,0x1d0)])?_0x594b6d:_0x4de36f[_0xb533ba(-0x33,-0x6b,-0x44,-0xb5)],_0x15b774=_0x39fde5[_0x4b0c6b(0xff,0xf1,0x14e,0x108)](typeof _0x112ad0,_0x39fde5[_0x4b0c6b(0x16e,0x1b2,0x17d,0x1c5)])&&_0x59e696[_0xb533ba(-0xc9,0x18,-0xd7,-0x51)]?_0x456fa2[_0x4b0c6b(0x215,0x291,0x241,0x2a0)]:''+_0x225089+(_0x55398c+(-0x1*-0x13fc+-0xeb9+0x1*-0x542)),_0x2c981a={};_0x2c981a[_0x4b0c6b(0x1bc,0xfc,0x164,0x1e2)]=_0x39fde5[_0xb533ba(-0x89,-0x2a,-0xa1,-0x6d)],_0x2c981a[_0x4b0c6b(0x2be,0x1c0,0x23e,0x260)]='['+_0x15b774+']',_0x6db582[_0xb533ba(-0x122,-0x14f,-0x96,-0x113)](_0x2c981a);let _0x53ade2=_0x598ae7;!_0x598ae7[_0x4b0c6b(0x18d,0x23d,0x200,0x279)](_0x39fde5[_0xb533ba(-0x28,-0x5d,-0x12d,-0xac)])&&(_0x53ade2=_0x4b0c6b(0x268,0x29f,0x24f,0x21f)+_0x4b0c6b(0x197,0x261,0x20e,0x1b3)+'4,'+_0x598ae7);const _0x398700={};_0x398700[_0x4b0c6b(0xe9,0x165,0x164,0x131)]=_0x39fde5[_0xb533ba(-0x99,-0x27,-0x31,-0x6f)],_0x398700[_0x4b0c6b(0x1d4,0x1b7,0x240,0x1b8)]={},_0x398700[_0x4b0c6b(0x1d4,0x1b7,0x240,0x1b8)]['url']=_0x53ade2,_0x398700[_0x4b0c6b(0x1d4,0x1b7,0x240,0x1b8)]['detail']=_0x39fde5[_0x4b0c6b(0x1b2,0x15a,0x1de,0x1ba)],_0x38fa41['push'](_0x398700);}else{const _0xd75d84={};_0xd75d84[_0xb533ba(-0xbd,-0xba,-0x19b,-0x12e)]=_0x4b0c6b(0x208,0x20b,0x23e,0x26f),_0xd75d84['text']=_0x3ac099['content'],_0x58d61e['push'](_0xd75d84);}}else Array[_0x4b0c6b(0xd9,0xf5,0x150,0x116)](_0x3ac099[_0x4b0c6b(0x1ea,0x1cb,0x239,0x28f)])&&_0x58d61e['push'](..._0x3ac099[_0xb533ba(-0x79,-0x6,-0x5e,-0x59)]);if(_0x25e56f[_0x4b0c6b(0x1b7,0x1c2,0x1f4,0x243)]>0x27d+-0x11*-0x66+-0x943){const _0x5f3d90={};_0x5f3d90['type']=_0xb533ba(-0x43,-0x11,-0x73,-0x54),_0x5f3d90['text']=_0xb533ba(-0x132,-0x16a,-0xb0,-0x11c)+_0x25e56f[_0xb533ba(-0xa9,-0x55,-0xa7,-0x9e)]+'张'+_0x4b5480+']',_0x58d61e[_0x4b0c6b(0x1eb,0x1a0,0x17f,0x18a)](_0x5f3d90);}_0x25e56f['forEach']((_0x13db36,_0x18ba21)=>{const _0x598f81=typeof _0x13db36===_0x39fde5[_0x20ebf2(-0x1e2,-0x14b,-0x172,-0x1c9)]?_0x13db36:_0x13db36[_0x2f8ea5(-0x211,-0x203,-0x1c5,-0x203)];function _0x2f8ea5(_0x2f3538,_0x9bdb04,_0x1065ec,_0x1f7fa6){return _0xb533ba(_0x2f3538,_0x9bdb04-0x10a,_0x1065ec-0x140,_0x9bdb04- -0x14e);}const _0x302630=_0x39fde5['qihOn'](typeof _0x13db36,_0x2f8ea5(-0x252,-0x269,-0x250,-0x221))&&_0x13db36[_0x2f8ea5(-0x125,-0x19f,-0x173,-0x174)]?_0x13db36[_0x20ebf2(-0x19c,-0x103,-0x10a,-0x12c)]:''+_0x4b5480+_0x39fde5[_0x20ebf2(-0x1ed,-0x180,-0x225,-0x1e3)](_0x18ba21,-0x7d*-0x13+-0x45*-0x43+-0x1b55),_0x2f47f8={};_0x2f47f8[_0x20ebf2(-0x1f1,-0x236,-0x1e1,-0x209)]=_0x39fde5[_0x2f8ea5(-0x173,-0x1bb,-0x1be,-0x150)];function _0x20ebf2(_0x113df7,_0x4113b2,_0x3039f6,_0xb5ba14){return _0xb533ba(_0x113df7,_0x4113b2-0x75,_0x3039f6-0x14a,_0xb5ba14- -0xdb);}_0x2f47f8[_0x2f8ea5(-0x1c7,-0x1a2,-0x15a,-0x159)]='['+_0x302630+']',_0x58d61e[_0x2f8ea5(-0x249,-0x261,-0x1fb,-0x2d2)](_0x2f47f8);let _0x5da541=_0x598f81;!_0x598f81['startsWith'](_0x2f8ea5(-0x30d,-0x28b,-0x2e5,-0x2bd))&&(_0x5da541=_0x20ebf2(-0x121,-0x173,-0xbd,-0x11e)+_0x20ebf2(-0xe5,-0x15a,-0x1a1,-0x15f)+'4,'+_0x598f81);const _0x3e60f5={};_0x3e60f5[_0x20ebf2(-0x244,-0x228,-0x18b,-0x209)]=_0x39fde5[_0x20ebf2(-0x16c,-0x119,-0x151,-0x14a)],_0x3e60f5[_0x2f8ea5(-0x175,-0x1a0,-0x1d8,-0x1c5)]={},_0x3e60f5[_0x2f8ea5(-0x175,-0x1a0,-0x1d8,-0x1c5)]['url']=_0x5da541,_0x3e60f5[_0x2f8ea5(-0x175,-0x1a0,-0x1d8,-0x1c5)][_0x20ebf2(-0xab,-0x15f,-0x173,-0x11d)]=_0x39fde5['jjjsJ'],_0x58d61e[_0x20ebf2(-0x25a,-0x267,-0x1b3,-0x1ee)](_0x3e60f5);});const _0x19eb70={..._0x3ac099};function _0x4b0c6b(_0x1098db,_0x48e9a9,_0x128d73,_0x5d9b49){return _0xff0e66(_0x1098db-0x98,_0x48e9a9-0x134,_0x128d73- -0x2e6,_0x48e9a9);}return _0x19eb70[_0x4b0c6b(0x287,0x1c2,0x239,0x1de)]=_0x58d61e,_0x44e124[_0x38ea46]=_0x19eb70,_0x44e124;}function findMessageIndexWithPlaceholder(_0x5ae989,_0x53438a){const _0x4d239f={};function _0x4fa2bb(_0x105cd4,_0x377351,_0x5df838,_0x2ae046){return _0xff0e66(_0x105cd4-0x1c7,_0x377351-0x165,_0x105cd4- -0x6b,_0x5df838);}_0x4d239f[_0x4fa2bb(0x492,0x4e4,0x482,0x413)]=function(_0x5d9406,_0x1aec31){return _0x5d9406<_0x1aec31;},_0x4d239f[_0x4fa2bb(0x3e3,0x374,0x3df,0x433)]=function(_0x4c7a01,_0x25dbf){return _0x4c7a01===_0x25dbf;},_0x4d239f[_0x4fa2bb(0x48c,0x502,0x450,0x4a9)]=_0x4cb983(-0x22a,-0x24d,-0x20e,-0x289),_0x4d239f['UtFdB']=function(_0x2425ab,_0x4c737b){return _0x2425ab!==_0x4c737b;},_0x4d239f['GPHcb']=_0x4fa2bb(0x3e7,0x3fe,0x45f,0x424),_0x4d239f[_0x4cb983(-0x1d0,-0x22e,-0x25b,-0x14a)]=function(_0x58e59e,_0x1017f4){return _0x58e59e!==_0x1017f4;},_0x4d239f[_0x4cb983(-0x1f2,-0x23d,-0x1cb,-0x183)]='MTnUJ';function _0x4cb983(_0x134732,_0x479aeb,_0x53226e,_0x343485){return _0xff0e66(_0x134732-0x18e,_0x479aeb-0x121,_0x134732- -0x6e5,_0x343485);}const _0xffb694=_0x4d239f;for(let _0x372881=-0x521+-0x1ace+0x1*0x1fef;_0xffb694[_0x4cb983(-0x1e8,-0x1c6,-0x1bd,-0x181)](_0x372881,_0x5ae989['length']);_0x372881++){const _0x54c4e3=_0x5ae989[_0x372881];if(_0xffb694['Hqenm'](typeof _0x54c4e3[_0x4cb983(-0x1c6,-0x16f,-0x16c,-0x24d)],_0xffb694[_0x4cb983(-0x1ee,-0x1fd,-0x217,-0x262)])&&_0x54c4e3[_0x4cb983(-0x1c6,-0x140,-0x13c,-0x1a2)]['includes'](_0x53438a)){if(_0xffb694[_0x4fa2bb(0x455,0x3d6,0x435,0x47f)](_0xffb694['GPHcb'],_0xffb694[_0x4cb983(-0x21b,-0x258,-0x28f,-0x267)]))_0x195bc4[_0x58f9d0]=_0x5595dd[_0x210a32];else return _0x372881;}else{if(Array[_0x4fa2bb(0x3cb,0x379,0x3c6,0x445)](_0x54c4e3[_0x4fa2bb(0x4b4,0x510,0x4a8,0x462)])){if(_0xffb694['OnTih'](_0xffb694['CBYPc'],_0xffb694[_0x4fa2bb(0x488,0x4e1,0x44c,0x4b6)])){const _0x57ea95=_0x244c5b['apply'](_0x4c06ad,arguments);return _0x127ad7=null,_0x57ea95;}else for(const _0x597771 of _0x54c4e3[_0x4fa2bb(0x4b4,0x4c1,0x446,0x4a9)]){if(_0xffb694[_0x4fa2bb(0x3e3,0x42a,0x433,0x435)](_0x597771[_0x4fa2bb(0x3df,0x3e4,0x3f1,0x35f)],'text')&&_0x597771[_0x4fa2bb(0x4b9,0x4a3,0x457,0x4aa)]['includes'](_0x53438a))return _0x372881;}}}}return-(-0x2467+0x968*0x2+0x1*0x1198);}function generateRequestId(){const _0x5d332b={'HWUYd':function(_0x457169,_0x2696ac){return _0x457169(_0x2696ac);},'BXfAt':function(_0x6d423e,_0xcc16ca){return _0x6d423e===_0xcc16ca;},'xVpTl':_0x4a051e(0x4ef,0x4f6,0x4a3,0x4e2),'GgiWP':function(_0x4050c9,_0x2c039e){return _0x4050c9+_0x2c039e;}};function _0x4a051e(_0x40eba9,_0x17d927,_0x380ea7,_0x6351a1){return _0xff0e66(_0x40eba9-0x11f,_0x17d927-0x1c0,_0x40eba9- -0x50,_0x17d927);}function _0x180093(_0x2ab924,_0x5969ab,_0x4762f4,_0xeecbec){return _0xff0e66(_0x2ab924-0xba,_0x5969ab-0x180,_0x5969ab- -0x45a,_0x4762f4);}if(crypto&&crypto[_0x4a051e(0x405,0x43c,0x3f0,0x47e)]){if(_0x5d332b['BXfAt'](_0x4a051e(0x4ef,0x562,0x50a,0x4e5),_0x5d332b[_0x180093(0x173,0xeb,0x8e,0x11b)]))return crypto[_0x4a051e(0x405,0x3c8,0x394,0x442)]();else{if(_0x39d35e[_0x1383b4]){const _0x2a50a6=_0x43451f[_0x4a051e(0x460,0x488,0x475,0x4b1)+_0x4a051e(0x49e,0x52a,0x505,0x466)]('outfit_'+_0x4928a6);_0x2a50a6&&(_0x2a50a6[_0x4a051e(0x416,0x3bc,0x39f,0x3f0)]=_0x577af7[_0x42ff4b],_0x5d332b['HWUYd'](_0xce43a1,_0x2a50a6)['trigger']('input'));}}}return _0x5d332b[_0x180093(0x20,0x63,0x18,0xd1)](Date['now']()[_0x180093(0xa0,0xc6,0x9d,0xd7)](-0x1*-0x2506+-0x4b7+0x1*-0x202b),Math[_0x180093(0xeb,0xad,0x113,0x55)]()['toString'](0x24f5+0x25ae+-0x4a7f)[_0x4a051e(0x4aa,0x4f3,0x4d2,0x4ab)](-0x1c15+-0x127a*-0x1+-0x17*-0x6b));}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){function _0x3edea2(_0x5388e8,_0x393342,_0x17070c,_0x12f823){return _0xff0e66(_0x5388e8-0x18d,_0x393342-0x132,_0x17070c- -0x47a,_0x5388e8);}function _0x3f2aec(_0x1234b6,_0x32d731,_0x5ee76d,_0x19eafa){return _0xff0e66(_0x1234b6-0xb1,_0x32d731-0xe5,_0x32d731- -0x53b,_0x5ee76d);}const _0x5c523f={'XSAhO':function(_0x2afa92,_0x49dfad,_0x43e32f,_0x57a4e2,_0x247b1a){return _0x2afa92(_0x49dfad,_0x43e32f,_0x57a4e2,_0x247b1a);},'xhvQu':function(_0x4f1d2e,_0x3b48e9){return _0x4f1d2e!==_0x3b48e9;},'ToccK':function(_0x2c5b28,_0x29ef17){return _0x2c5b28(_0x29ef17);},'zfIdE':function(_0x38c257,_0x596387){return _0x38c257(_0x596387);},'xwYKg':_0x3edea2(0xfb,0x98,0xa2,0x43)+'时','pyjRL':_0x3f2aec(-0x78,-0x98,-0xe,-0x14),'Xewve':function(_0x356491){return _0x356491();}};return new Promise((_0x23b634,_0x527a40)=>{function _0x19208f(_0x32a328,_0x3f9a0d,_0x487a92,_0x15f775){return _0x3f2aec(_0x32a328-0x89,_0x3f9a0d-0x3ff,_0x15f775,_0x15f775-0xbe);}function _0x19aa8d(_0x1cb4e8,_0x261444,_0x3f17ec,_0x3dbfe8){return _0x3edea2(_0x261444,_0x261444-0xd9,_0x3dbfe8-0x2fc,_0x3dbfe8-0x16f);}if(_0x5c523f[_0x19aa8d(0x2fd,0x335,0x35c,0x353)](_0x5c523f[_0x19208f(0x3e3,0x40d,0x45d,0x469)],_0x5c523f['pyjRL'])){const _0x33a5d3={};for(const _0x227e9b in _0x310eef){_0x33a5d3[_0x227e9b]=_0x5c523f['XSAhO'](_0x547cc,_0x3ad5db[_0x227e9b],_0x134950,_0x361500,_0x250cd7);}return _0x33a5d3;}else{const _0x4b6166=_0x5c523f['Xewve'](generateRequestId);console['log'](_0x19aa8d(0x38b,0x325,0x36f,0x38a)+_0x19208f(0x413,0x3ff,0x46d,0x47c)+'\x20Requestin'+_0x19aa8d(0x3a7,0x360,0x337,0x349)+'odify\x20prom'+_0x19aa8d(0x42e,0x3aa,0x3d8,0x3c5)+_0x4b6166+')');const _0x255a29=_0x637544=>{if(_0x5c523f[_0x5a53a4(0x26b,0x1d3,0x1cf,0x252)](_0x637544['id'],_0x4b6166))return;eventSource['removeList'+_0x2ea720(-0xe0,-0xdf,-0x14b,-0xbc)](eventNames['LLM_CHAR_M'+'ODIFY_GET_'+_0x5a53a4(0x2a1,0x2d3,0x1eb,0x265)+_0x5a53a4(0x22b,0x1d1,0x274,0x206)],_0x255a29);function _0x5a53a4(_0x4361fa,_0x516e52,_0x4a1e9d,_0xcc8ed4){return _0x19208f(_0x4361fa-0x26,_0xcc8ed4- -0x143,_0x4a1e9d-0x1b3,_0x4a1e9d);}function _0x2ea720(_0x2dec20,_0x1dc4a6,_0x35b4a0,_0x50ff95){return _0x19aa8d(_0x2dec20-0x13c,_0x1dc4a6,_0x35b4a0-0x106,_0x2dec20- -0x3a0);}_0x5c523f[_0x5a53a4(0x216,0x23b,0x250,0x1e9)](_0x23b634,_0x637544[_0x2ea720(-0x67,-0xf0,-0xbc,0x10)]);};eventSource['on'](eventNames[_0x19aa8d(0x34d,0x2f7,0x2a8,0x2f0)+_0x19208f(0x2b7,0x323,0x3a7,0x328)+_0x19208f(0x425,0x3a8,0x329,0x3e3)+_0x19208f(0x38a,0x349,0x3c0,0x39a)],_0x255a29);const _0x21ac9c={};_0x21ac9c['id']=_0x4b6166,eventSource[_0x19aa8d(0x32b,0x372,0x35c,0x361)](eventNames['LLM_CHAR_M'+_0x19208f(0x398,0x323,0x2f2,0x2fb)+'PROMPT_REQ'+_0x19208f(0x374,0x32e,0x324,0x2e5)],_0x21ac9c),setTimeout(()=>{function _0xec1756(_0x2d161e,_0x5ca78c,_0x5a5c85,_0x374958){return _0x19aa8d(_0x2d161e-0x14e,_0x5ca78c,_0x5a5c85-0x27,_0x5a5c85- -0x5c);}eventSource[_0x4b8711(0x195,0x16c,0x217,0x1ec)+_0xec1756(0x22c,0x21c,0x264,0x2e3)](eventNames[_0x4b8711(0x19d,0x204,0x1af,0x182)+_0xec1756(0x1fd,0x264,0x285,0x2b2)+'PROMPT_RES'+_0xec1756(0x236,0x2b6,0x2ab,0x324)],_0x255a29);function _0x4b8711(_0x384e0f,_0x36c159,_0xf4829a,_0x5c4272){return _0x19208f(_0x384e0f-0x7b,_0x5c4272- -0x1b0,_0xf4829a-0x19a,_0xf4829a);}_0x5c523f[_0x4b8711(0x1ea,0x182,0x1c9,0x16a)](_0x527a40,new Error(_0x5c523f[_0xec1756(0x314,0x2ce,0x32b,0x36d)]));},-0x3cef+-0x7*-0x625+0x38fc);}});}export function LLM_OUTFIT_MODIFY(_0x5d18be,_0xd0fb72={}){function _0x2025a8(_0x12e923,_0x508265,_0x2f9a28,_0x19aeb0){return _0xff0e66(_0x12e923-0x153,_0x508265-0xa7,_0x508265- -0x3f3,_0x12e923);}const _0x1a7309={'WKYMN':function(_0x58122c,_0x30a5f7){return _0x58122c(_0x30a5f7);},'cWFjZ':_0x2025a8(0x118,0xa4,0x46,0x85)+_0x5133cb(0x23b,0x1b2,0x1fc,0x1ca),'KAhhc':_0x5133cb(0x128,0x19d,0x19b,0x128),'wLjUP':_0x2025a8(0xb8,0x108,0x145,0x18f),'FjMNG':function(_0x2ff685){return _0x2ff685();},'PYLAZ':function(_0x4d393e,_0x596930,_0x4bbd99){return _0x4d393e(_0x596930,_0x4bbd99);}};function _0x5133cb(_0x5a27b5,_0x5733f2,_0x4b96e5,_0x36a481){return _0xff0e66(_0x5a27b5-0x4,_0x5733f2-0x1e3,_0x4b96e5- -0x2ae,_0x5733f2);}return new Promise((_0x57f48e,_0x31b867)=>{function _0x2612e6(_0x231204,_0x52b1cb,_0x28398f,_0x48e103){return _0x2025a8(_0x48e103,_0x52b1cb-0x135,_0x28398f-0x1c6,_0x48e103-0x56);}const _0x5bb2e0={'rZeMS':_0x1a7309[_0x2612e6(0x285,0x276,0x20f,0x21b)],'KpwKg':function(_0x58823e,_0x2f8248){return _0x58823e!==_0x2f8248;},'vVVEp':_0x1a7309['wLjUP'],'cFwhA':function(_0x4e8318,_0x464c93){return _0x4e8318(_0x464c93);},'FwnOK':function(_0x20882a,_0x4b276b){function _0x411a2c(_0x4c2d44,_0x29448d,_0x15e24d,_0x38bc6e){return _0x2612e6(_0x4c2d44-0x132,_0x38bc6e- -0x38f,_0x15e24d-0x70,_0x15e24d);}return _0x1a7309[_0x411a2c(-0x1b4,-0x101,-0xec,-0x171)](_0x20882a,_0x4b276b);}};function _0x317dd2(_0x2c55be,_0x527f8a,_0x4efd9f,_0x80aa4a){return _0x2025a8(_0x527f8a,_0x2c55be-0x10a,_0x4efd9f-0x128,_0x80aa4a-0x1d6);}const _0x2a18e4=_0x1a7309[_0x317dd2(0x249,0x264,0x2a4,0x249)](generateRequestId),_0x262def=_0xd0fb72['timeoutMs']||0x3d*0x223+-0x7*-0xdf6+0x64f*0x1;console[_0x2612e6(0x1e2,0x22b,0x289,0x20a)](_0x2612e6(0x209,0x24a,0x1f2,0x1c0)+_0x317dd2(0x252,0x249,0x23c,0x27c)+_0x317dd2(0x251,0x2b0,0x2bb,0x220)+_0x317dd2(0x1fe,0x1e9,0x1e0,0x1c1)+'dify\x20LLM\x20r'+_0x2612e6(0x267,0x26c,0x2ba,0x1f8)+':\x20'+_0x2a18e4+')');const _0x1f6c98=_0x25ba8a=>{const _0x52746c={'HIVpD':function(_0xdf8e,_0x540aaa){return _0xdf8e(_0x540aaa);},'leUQq':_0x5bb2e0[_0x1d1dfc(0xed,0x119,0x117,0xc5)]};function _0x110977(_0x51f213,_0x21c56c,_0x16819b,_0x149213){return _0x317dd2(_0x149213-0x6c,_0x21c56c,_0x16819b-0x1cc,_0x149213-0xde);}if(_0x5bb2e0[_0x110977(0x1bd,0x22c,0x283,0x21f)](_0x25ba8a['id'],_0x2a18e4))return;function _0x1d1dfc(_0x39df4c,_0x398b98,_0x156353,_0x1da784){return _0x317dd2(_0x39df4c- -0x120,_0x398b98,_0x156353-0x1d2,_0x1da784-0x26);}eventSource[_0x110977(0x1f8,0x1ee,0x227,0x25b)+'ener'](eventNames[_0x110977(0x185,0x18a,0x238,0x1f1)+_0x110977(0x202,0x260,0x27d,0x21d)+_0x110977(0x2d9,0x31a,0x354,0x2c9)],_0x1f6c98),_0x25ba8a[_0x110977(0x1d1,0x21c,0x2ca,0x244)]?_0x1d1dfc(0x118,0x191,0x94,0x12d)===_0x5bb2e0[_0x110977(0x248,0x16e,0x212,0x1f5)]?_0x52746c['HIVpD'](_0x973120,new _0x465c0a(_0x338c81[_0x110977(0x29d,0x25d,0x2bf,0x242)]||_0x52746c[_0x110977(0x1a4,0x1f2,0x1a6,0x200)])):_0x5bb2e0[_0x1d1dfc(0xfb,0x82,0xd5,0x149)](_0x57f48e,_0x25ba8a['result']):_0x5bb2e0[_0x1d1dfc(0x55,0x59,-0x1,0x80)](_0x31b867,new Error(_0x25ba8a[_0x110977(0x1ce,0x1eb,0x1e6,0x242)]||_0x5bb2e0[_0x110977(0x2be,0x1fb,0x2bd,0x279)]));};eventSource['on'](eventNames['LLM_CHAR_M'+_0x2612e6(0x155,0x1dc,0x252,0x21f)+_0x317dd2(0x25d,0x22e,0x2e3,0x227)],_0x1f6c98);const _0x318130={};_0x318130[_0x2612e6(0x230,0x1f9,0x1bc,0x220)]=_0x5d18be,_0x318130['id']=_0x2a18e4,eventSource[_0x317dd2(0x1f6,0x21c,0x173,0x187)](eventNames[_0x2612e6(0x1a3,0x1b0,0x212,0x18b)+_0x317dd2(0x1a2,0x1dc,0x1ea,0x181)+'EST'],_0x318130),_0x1a7309[_0x317dd2(0x1aa,0x125,0x153,0x199)](setTimeout,()=>{function _0x524470(_0x5a333a,_0x1c2f44,_0xa07fcc,_0x2d7f06){return _0x317dd2(_0xa07fcc- -0x2a1,_0x2d7f06,_0xa07fcc-0x1ba,_0x2d7f06-0x62);}eventSource[_0x524470(-0x2f,-0x9f,-0xb2,-0x13a)+_0x461e0c(0x15b,0x172,0x1a3,0x183)](eventNames[_0x461e0c(0x18b,0x19c,0x16c,0x145)+_0x461e0c(0x1b7,0x20c,0x14f,0x16d)+_0x461e0c(0x263,0x273,0x2cf,0x2bd)],_0x1f6c98);function _0x461e0c(_0x605fe0,_0x20810c,_0xa103ea,_0xd8d290){return _0x317dd2(_0x605fe0-0x6,_0xd8d290,_0xa103ea-0x33,_0xd8d290-0xf8);}_0x1a7309['WKYMN'](_0x31b867,new Error(_0x1a7309[_0x524470(-0x113,-0x11e,-0xd5,-0x84)]));},_0x262def);});}function preprocessTagContent(_0x58b172){let _0x2b5f1b=_0x58b172[_0x38d1c0(0x305,0x39d,0x3b1,0x35b)](/:/g,':')[_0x38d1c0(0x2d1,0x2d9,0x2e2,0x35b)](/\(/g,'（')[_0x38d1c0(0x31c,0x343,0x3b7,0x35b)](/\)/g,'）')[_0x2530e1(-0x189,-0x166,-0x1ee,-0x1a9)](/,/g,',');function _0x2530e1(_0x37704d,_0x338644,_0x181645,_0x500781){return _0xff0e66(_0x37704d-0x14f,_0x338644-0x1da,_0x338644- -0x665,_0x500781);}function _0x38d1c0(_0x101799,_0x4649dd,_0x10b997,_0x3dd438){return _0xff0e66(_0x101799-0x1a9,_0x4649dd-0x2c,_0x3dd438- -0x1a4,_0x101799);}return _0x2b5f1b;}function parseOutfitData(_0x47d3e8){const _0x418a13={};_0x418a13[_0x167563(0x516,0x4f6,0x539,0x579)]=_0x38c9f6(0x56f,0x4f3,0x517,0x514),_0x418a13[_0x167563(0x4c6,0x484,0x4bd,0x445)]=_0x167563(0x53f,0x551,0x51c,0x57c),_0x418a13[_0x167563(0x3cc,0x47b,0x441,0x3ec)]=_0x167563(0x3dc,0x3cc,0x439,0x49c),_0x418a13['VxyoK']=_0x38c9f6(0x528,0x4e5,0x4db,0x510)+'ck',_0x418a13[_0x38c9f6(0x491,0x4fb,0x574,0x4d6)]=function(_0x1531a7,_0x1de269){return _0x1531a7===_0x1de269;},_0x418a13['KFuLJ']=function(_0x5c09f7,_0x36cd80){return _0x5c09f7+_0x36cd80;},_0x418a13[_0x167563(0x519,0x567,0x503,0x49a)]=function(_0x111f72,_0x33eda3){return _0x111f72&&_0x33eda3;},_0x418a13['psSLy']='[outfitPro'+_0x38c9f6(0x560,0x5a8,0x5d5,0x589)+'\x20解析到的服装数据:';const _0x2a89a0=_0x418a13,_0x34d057=_0x47d3e8[_0x167563(0x589,0x4cc,0x514,0x4db)]('\x0a')[_0x38c9f6(0x563,0x4e9,0x554,0x548)](_0xf5949f=>_0xf5949f['trim']())[_0x167563(0x56a,0x4e0,0x53e,0x4cb)](_0x1cfa28=>_0x1cfa28),_0x20c636={};_0x20c636['nameCN']='';function _0x38c9f6(_0x1fb9a3,_0x21afc4,_0x2de267,_0x59a719){return _0xff0e66(_0x1fb9a3-0x1dd,_0x21afc4-0x4c,_0x21afc4-0x6d,_0x59a719);}_0x20c636[_0x38c9f6(0x507,0x4f3,0x486,0x546)]='',_0x20c636['upperBody']='',_0x20c636[_0x167563(0x4c4,0x463,0x4a2,0x44b)+_0x167563(0x55c,0x513,0x510,0x52a)]='',_0x20c636[_0x167563(0x44c,0x40a,0x439,0x402)]='',_0x20c636['fullBodyBa'+'ck']='';const _0x5ac478=_0x20c636,_0x2ebec2={};_0x2ebec2[_0x38c9f6(0x547,0x4c6,0x49d,0x460)]=_0x38c9f6(0x50e,0x50b,0x4ec,0x547);function _0x167563(_0x3e0395,_0x42a9d9,_0x56b038,_0x35e96b){return _0xff0e66(_0x3e0395-0x27,_0x42a9d9-0x1c4,_0x56b038-0x1,_0x3e0395);}_0x2ebec2['英文名称']=_0x2a89a0[_0x167563(0x4e9,0x4e0,0x539,0x4d0)],_0x2ebec2[_0x38c9f6(0x502,0x544,0x4cd,0x4c1)]=_0x2a89a0[_0x167563(0x4d3,0x4a1,0x4bd,0x4e9)],_0x2ebec2['上半身背面']=_0x38c9f6(0x4ac,0x50e,0x4e8,0x542)+_0x167563(0x575,0x54f,0x510,0x4d3),_0x2ebec2[_0x38c9f6(0x514,0x502,0x50c,0x509)]=_0x2a89a0['Mafyq'],_0x2ebec2[_0x38c9f6(0x5b0,0x5a4,0x56f,0x5de)]=_0x167563(0x3f2,0x45b,0x439,0x4a8),_0x2ebec2['下半身背面']=_0x2a89a0[_0x167563(0x4f4,0x500,0x4d6,0x473)];const _0x26a27a=_0x2ebec2;for(const _0x427784 of _0x34d057){const _0x64c81b=_0x427784['indexOf'](':');if(_0x2a89a0[_0x167563(0x422,0x4a1,0x48f,0x4b7)](_0x64c81b,-(0x6a0+0x1c*0x3b+-0xd13*0x1)))continue;const _0x12e76d=_0x427784[_0x167563(0x56a,0x474,0x4fb,0x4ef)](-0x1*-0x7d0+-0x1*-0x1407+-0x1bd7,_0x64c81b)['trim'](),_0x11eb0d=_0x427784[_0x167563(0x499,0x570,0x4fb,0x490)](_0x2a89a0[_0x38c9f6(0x551,0x565,0x5ba,0x5dd)](_0x64c81b,-0xf9*-0x25+0x9*-0x239+-0xffb))[_0x38c9f6(0x43b,0x4ac,0x49a,0x48d)]();if(_0x26a27a[_0x12e76d])_0x5ac478[_0x26a27a[_0x12e76d]]=_0x11eb0d;else _0x2a89a0['UakoU'](_0x12e76d,_0x11eb0d)&&console[_0x167563(0x472,0x4e4,0x4ea,0x55b)](_0x38c9f6(0x5f7,0x575,0x550,0x58d)+_0x167563(0x56a,0x54d,0x53c,0x52c)+'\x20未识别的服装字段\x20'+'\x22'+_0x12e76d+'\x22');}if(!_0x5ac478[_0x38c9f6(0x4d0,0x50b,0x570,0x50e)])return null;return console[_0x38c9f6(0x576,0x556,0x522,0x51d)](_0x2a89a0[_0x38c9f6(0x524,0x535,0x5b1,0x54f)],_0x5ac478),_0x5ac478;}function extractOutfitTags(_0x41bf32){const _0xab56b6={'CAiKY':function(_0x46178b,_0x552d25){return _0x46178b!==_0x552d25;},'QqkRj':function(_0x1e0b33,_0x438d9d){return _0x1e0b33(_0x438d9d);}},_0x233886={};function _0x3af328(_0x471085,_0x285ca7,_0x22ee4c,_0x2c4948){return _0xff0e66(_0x471085-0x69,_0x285ca7-0x72,_0x22ee4c- -0x271,_0x285ca7);}_0x233886['outfits']=[];const _0xb96843=_0x233886;_0x41bf32=_0x41bf32[_0x1af147(0x398,0x348,0x3aa,0x3b4)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x3af328(0x1f9,0x170,0x1ce,0x179)]();const _0xfafc88=/<服装>([\s\S]*?)<\/服装>/g;let _0x5d257b;while(_0xab56b6['CAiKY'](_0x5d257b=_0xfafc88[_0x3af328(0x267,0x216,0x2a1,0x2f1)](_0x41bf32),null)){const _0x2a8e88=_0xab56b6[_0x3af328(0x299,0x219,0x22c,0x262)](preprocessTagContent,_0x5d257b[-0xc78+0x9*0x40f+-0x180e]),_0x8f9268=parseOutfitData(_0x2a8e88);_0x8f9268&&_0xb96843[_0x3af328(0x27e,0x230,0x26d,0x20c)][_0x3af328(0x1f7,0x24d,0x1f4,0x27c)](_0x8f9268);}function _0x1af147(_0x17e3dd,_0x31cb56,_0xfe0165,_0x2f0474){return _0xff0e66(_0x17e3dd-0x88,_0x31cb56-0x161,_0x17e3dd- -0x167,_0x31cb56);}return _0xb96843;}function getCurrentOutfitPreset(){const _0x4af545={'INKQZ':function(_0x1fd277,_0x106e5d){return _0x1fd277(_0x106e5d);},'JLxUF':function(_0x15be7c,_0x194b70){return _0x15be7c!==_0x194b70;},'PegBP':_0x21c806(0xc2,0xa6,0xdd,0xdd),'llbcu':_0x7afdc2(0x5c,0x15d,0x127,0xe6)},_0x20aba8=extension_settings[extensionName],_0x137367=_0x20aba8[_0x21c806(0x6e,0x53,0x2e,0x3)+_0x7afdc2(0xc0,0x127,0x16d,0x13f)];if(!_0x137367||!_0x20aba8['outfitPres'+'ets'][_0x137367]){if(_0x4af545[_0x7afdc2(0x80,0xc9,0x5c,0x9f)](_0x4af545[_0x7afdc2(0x134,0x13c,0x3a,0xc2)],_0x4af545['llbcu']))return null;else _0x4af545['INKQZ'](_0x3a8739,_0x24e1cb[_0x7afdc2(0x106,0xff,0xb7,0xed)]);}function _0x7afdc2(_0xa8b4b2,_0x4eebe4,_0x1df594,_0x1e2c1c){return _0xff0e66(_0xa8b4b2-0xb5,_0x4eebe4-0x23,_0x1e2c1c- -0x3d2,_0x1df594);}const _0x2a9f3a={};function _0x21c806(_0x1cf817,_0x4581c5,_0x2f8101,_0x573d14){return _0xff0e66(_0x1cf817-0x5b,_0x4581c5-0x1c2,_0x1cf817- -0x43a,_0x573d14);}return _0x2a9f3a['id']=_0x137367,_0x2a9f3a[_0x21c806(0xb0,0xd2,0x25,0x9d)]=_0x20aba8[_0x21c806(0x6e,0x39,-0x1,0xe)+_0x7afdc2(0xb7,0x69,0xbf,0xae)][_0x137367],_0x2a9f3a;}function buildOutfitText(_0x4b4ed9){const _0x19fa13={};_0x19fa13[_0x400dd9(-0x1dd,-0x210,-0x21a,-0x25c)]=_0x53c870(-0x199,-0x127,-0x17e,-0x14b);function _0x400dd9(_0xd9d726,_0x144502,_0x5173df,_0x33b962){return _0xff0e66(_0xd9d726-0x1b8,_0x144502-0x13b,_0x144502- -0x6a0,_0x33b962);}const _0x595a2a=_0x19fa13,_0x3507e2=_0x4b4ed9[_0x53c870(-0x1b0,-0x12d,-0xb0,-0xea)];let _0x512781=_0x595a2a[_0x400dd9(-0x244,-0x210,-0x1ff,-0x21e)];_0x512781+=_0x400dd9(-0x251,-0x21e,-0x20a,-0x21c)+(_0x3507e2[_0x53c870(-0x1ec,-0x179,-0x14f,-0x100)]||'')+'\x0a',_0x512781+=_0x53c870(-0x1c2,-0x1d0,-0x1e1,-0x202)+(_0x3507e2[_0x400dd9(-0x256,-0x21a,-0x1a8,-0x204)]||'')+'\x0a',_0x512781+=_0x53c870(-0x17a,-0x13a,-0x153,-0x17f)+(_0x3507e2['upperBody']||'')+'\x0a',_0x512781+=_0x400dd9(-0x126,-0x15e,-0x1ea,-0x198)+(_0x3507e2[_0x400dd9(-0x23f,-0x1ff,-0x289,-0x265)+_0x53c870(-0x175,-0x108,-0x9e,-0x89)]||'')+'\x0a',_0x512781+=_0x53c870(-0xa7,-0x111,-0x160,-0xe5)+(_0x3507e2[_0x53c870(-0x179,-0x1df,-0x22b,-0x165)]||'')+'\x0a',_0x512781+=_0x400dd9(-0x209,-0x18c,-0x1a6,-0x18e)+(_0x3507e2['fullBodyBa'+'ck']||'')+'\x0a';function _0x53c870(_0x1e6dd8,_0x1e8640,_0x352588,_0x34da81){return _0xff0e66(_0x1e6dd8-0x1a6,_0x1e8640-0xee,_0x1e8640- -0x617,_0x1e6dd8);}return _0x512781+=_0x53c870(-0x104,-0x170,-0xfd,-0x145),_0x512781;}function _0xff0e66(_0x1d5ef1,_0x2b309a,_0x1a72db,_0x501045){return _0x2f0b(_0x1a72db-0x376,_0x501045);}export async function handleOutfitPromptModify(_0x2fe449,_0x280d79=[]){const _0x36a388={'RJfia':function(_0x5d52ce,_0x1ba5b4){return _0x5d52ce(_0x1ba5b4);},'iDgVP':_0x2b9234(0xdd,0x41,0xa5,0xfc)+_0x2b9234(0xb3,0xff,0xb8,0x113),'yHMJS':_0x2b9234(0x73,0xb1,0x62,0x40)+_0x4706c0(0xfb,0xde,0x11f,0x7a),'dGEVT':function(_0x3d4985){return _0x3d4985();},'Edjpl':'请先选择一个服装预设','MwkPk':_0x4706c0(0x85,0xba,0x13b,0xd3)+_0x4706c0(0x179,0xed,0x109,0x66)+_0x2b9234(0xba,0x92,0xf3,0xe6)+_0x4706c0(0xa0,0x7f,0xc2,0x22),'jBEQM':function(_0x4b47da,_0x412515){return _0x4b47da||_0x412515;},'cPJrS':function(_0x577106,_0x5102bf,_0x40d842){return _0x577106(_0x5102bf,_0x40d842);},'Ihjkg':'{{用户需求}}','VYHGy':_0x2b9234(0x117,0x163,0x116,0x157)+_0x4706c0(0xf9,0xed,0xd5,0xde)+_0x2b9234(0x78,0xfa,0x97,0x42)+_0x2b9234(0x1aa,0x143,0x133,0x110)+'ssage\x20inde'+'x:','aXqav':function(_0x3b9339,_0x5d44a7,_0x2b4742,_0x23929a,_0x563f4f){return _0x3b9339(_0x5d44a7,_0x2b4742,_0x23929a,_0x563f4f);},'WxsIH':_0x2b9234(0x122,0x126,0xd3,0xf3),'UrHwp':_0x2b9234(0xec,0x17a,0xf1,0x100),'JIhGE':function(_0xdb05b8,_0x14a677,_0x5cf9f5,_0x5acceb,_0x192901){return _0xdb05b8(_0x14a677,_0x5cf9f5,_0x5acceb,_0x192901);},'OhtMC':function(_0x4fc5e2,_0x57d759){return _0x4fc5e2||_0x57d759;},'JNlOn':'{{上下文}}','WIunS':_0x2b9234(0xbf,0x13a,0x126,0x128),'jbcJy':function(_0xdaa8db,_0x378954,_0x4f3abb,_0x1620a0,_0x155c1b){return _0xdaa8db(_0x378954,_0x4f3abb,_0x1620a0,_0x155c1b);},'cHvDa':'{{通用服装启用列表'+'}}','GJULL':function(_0x3c5ff2,_0x245718,_0xed7d92,_0x4a296d,_0x10285b){return _0x3c5ff2(_0x245718,_0xed7d92,_0x4a296d,_0x10285b);},'KCtVN':'{{通用角色启用列表'+'}}','rJSsH':_0x4706c0(0x87,0xba,0x108,0x98)+_0x4706c0(0x15c,0xed,0xfb,0x73)+'\x20Final\x20pro'+_0x4706c0(0x11,0x6b,0xad,-0xa),'RTGvX':function(_0x3a4e99,_0x5f2563){return _0x3a4e99>_0x5f2563;},'qmnCY':function(_0x5ca3b2,_0x1f756d){return _0x5ca3b2===_0x1f756d;},'xSADZ':'FZOrM','sJSbT':function(_0xefaa56,_0x5336ad){return _0xefaa56>=_0x5336ad;},'jCiym':_0x2b9234(0xf1,0xd6,0x158,0x19f),'GvFBz':'[outfitPro'+_0x2b9234(0xfd,0x141,0x149,0x129)+_0x4706c0(0xa7,0xdd,0x98,0x140),'XnNLx':_0x2b9234(0x48,-0x5,0x75,0x86)+_0x4706c0(0x72,0xcf,0x8c,0x91)+_0x2b9234(0x5f,0x5e,0xa9,0x40),'EpAPP':_0x4706c0(0xc2,0xba,0x31,0xc3)+_0x2b9234(0x1ae,0x153,0x149,0x130)+_0x4706c0(0x4a,-0x12,-0x23,-0x8f)+'t:','HZgIo':_0x4706c0(0x114,0xf9,0xdf,0xe5),'CDXXu':'JDXLH','FNEHm':'LLM\x20返回结果为空','sLkWl':function(_0x47d65c,_0xd9ac6d){return _0x47d65c(_0xd9ac6d);},'AcQXn':'[outfitPro'+_0x2b9234(0x117,0x148,0x149,0x195)+_0x2b9234(0x60,0x6f,0x51,0x6e)+'\x20data:','fgbwg':function(_0x8add3d,_0x214291,_0x442533){return _0x8add3d(_0x214291,_0x442533);},'gwIJx':_0x2b9234(0x31,0xcd,0x70,0xe8),'iJIkV':_0x2b9234(0xe2,0x16b,0x116,0x133)+_0x2b9234(0x1d3,0x16e,0x149,0xdb)+'\x20Error:'};function _0x2b9234(_0x382c6f,_0x45119e,_0xfe192e,_0x2f3c1a){return _0xff0e66(_0x382c6f-0x23,_0x45119e-0x4d,_0xfe192e- -0x3f2,_0x382c6f);}console[_0x4706c0(0xeb,0x9b,0x122,0x50)](_0x4706c0(0xea,0xba,0x88,0xc0)+_0x2b9234(0xf8,0x135,0x149,0x124)+_0x2b9234(0x17b,0x12c,0x12c,0xbd)+_0x4706c0(0x5c,0x48,0x55,-0x2e)+_0x2b9234(0xd2,0xaf,0x118,0x12b)+_0x2b9234(0x165,0xb6,0x10e,0x11b)+'.'),toastr['info'](_0x36a388[_0x2b9234(0x102,0xe7,0xa6,0x54)]);function _0x4706c0(_0x4f43c7,_0x13b6ed,_0x2199cf,_0x16ff39){return _0xff0e66(_0x4f43c7-0x8a,_0x13b6ed-0x188,_0x13b6ed- -0x44e,_0x16ff39);}try{const _0x42d602=extension_settings[extensionName],_0x46b9de=_0x36a388['dGEVT'](getCurrentOutfitPreset);if(!_0x46b9de){toastr[_0x4706c0(0x69,0x65,0x58,0x38)](_0x36a388[_0x2b9234(0x1d,0x25,0x82,0x69)]);return;}console[_0x4706c0(0xc7,0x9b,0x7b,0x99)](_0x36a388[_0x2b9234(0x18e,0x1a5,0x14a,0x1bf)],_0x46b9de['id']);const _0x2f36da=_0x36a388['RJfia'](buildOutfitText,_0x46b9de),_0x52a009=[_0x36a388[_0x4706c0(-0x1b,0x6c,0x83,0xf8)](_0x2fe449,''),_0x2f36da]['filter'](Boolean)[_0x2b9234(0xbd,0x106,0xdc,0x8b)]('\x0a');let _0x894ddc=buildPromptForRequestType(_0x2b9234(0x10a,0x181,0x11e,0xae)+'y',_0x52a009);const _0xda2256=new Set(),_0x5f2045=_0x36a388['cPJrS'](findMessageIndexWithPlaceholder,_0x894ddc,_0x36a388[_0x2b9234(0x154,0xd5,0x14c,0x12c)]);console[_0x2b9234(0x13a,0xad,0xf7,0xe7)](_0x36a388['VYHGy'],_0x5f2045),_0x894ddc=_0x36a388[_0x4706c0(0x1d,0x33,0x17,-0x1d)](replacePlaceholder,_0x894ddc,_0x36a388[_0x4706c0(0x70,-0x8,0x3c,-0x8d)],_0x2f36da,_0xda2256),_0x894ddc=_0x36a388[_0x2b9234(0xb8,0xb,0x8f,0x86)](replacePlaceholder,_0x894ddc,_0x36a388[_0x2b9234(0xd6,0xf6,0xb7,0xb7)],_0x2f36da,_0xda2256),_0x894ddc=_0x36a388[_0x2b9234(0x3b,0xe4,0xa0,0xaf)](replacePlaceholder,_0x894ddc,_0x36a388['Ihjkg'],_0x36a388['OhtMC'](_0x2fe449,''),_0xda2256),_0x894ddc=replacePlaceholder(_0x894ddc,_0x4706c0(0x49,0x28,0x59,-0x4f),'',_0xda2256),_0x894ddc=_0x36a388['aXqav'](replacePlaceholder,_0x894ddc,_0x36a388[_0x4706c0(0x1a,-0x14,0x34,-0x8d)],'',_0xda2256),_0x894ddc=replacePlaceholder(_0x894ddc,_0x36a388['WIunS'],'',_0xda2256),_0x894ddc=_0x36a388[_0x2b9234(0x117,0x12b,0xa0,0x57)](replacePlaceholder,_0x894ddc,_0x4706c0(0xc3,0xcc,0x10b,0x105),'',_0xda2256),_0x894ddc=_0x36a388['jbcJy'](replacePlaceholder,_0x894ddc,_0x36a388[_0x2b9234(0xd0,0x118,0x131,0xdc)],'',_0xda2256),_0x894ddc=_0x36a388[_0x2b9234(0x1a9,0x9d,0x127,0xda)](replacePlaceholder,_0x894ddc,_0x36a388['KCtVN'],'',_0xda2256),console[_0x2b9234(0x10c,0x87,0xf7,0x11b)](_0x36a388['rJSsH'],_0x894ddc);let _0xd9176d='';_0x36a388[_0x4706c0(0x72,0x3f,0x4,0xa1)](_0xda2256[_0x2b9234(0x176,0x164,0x130,0xc8)],0x56*-0xb+0x61+0x11b*0x3)&&(_0x36a388['qmnCY'](_0x36a388[_0x4706c0(0x7d,0x51,0x3a,0x41)],_0x36a388[_0x2b9234(0x46,0x7d,0xad,0x82)])?_0xd9176d=_0x2b9234(0x3f,0xf8,0x9f,0x102)+_0x4706c0(0x95,0x57,0x45,0x32)+[..._0xda2256]['join']('、')+'\x0a':_0x23b5fd[_0x2b9234(0x87,0xb0,0xec,0x16d)][_0x2b9234(0x94,0xa8,0x73,0xd7)](_0x2cf670));_0x280d79&&_0x280d79[_0x4706c0(0x86,0x8c,0x69,0x75)]>-0x21dd+-0xb53*-0x2+0x57*0x21&&_0x36a388[_0x2b9234(0x96,0x1e,0x56,0x3f)](_0x5f2045,-0x1d6d+-0x2*0xadb+0x13*0x2b1)&&(_0x894ddc=attachImagesToMessage(_0x894ddc,_0x5f2045,_0x280d79,_0x36a388['jCiym']),console['log'](_0x36a388[_0x2b9234(0x96,0x162,0xde,0x59)],_0x280d79[_0x4706c0(0x109,0x8c,0xf2,0xd3)],_0x36a388[_0x4706c0(0xde,0x64,-0x16,-0xc)],_0x5f2045));updateCombinedPrompt(_0x894ddc,_0xd9176d);const _0x5141c7={};_0x5141c7[_0x2b9234(0xad,0xdd,0x10c,0x143)]=0x493e0;const _0x4318dd=await _0x36a388[_0x2b9234(0x171,0x14a,0x13c,0x10b)](LLM_OUTFIT_MODIFY,_0x894ddc,_0x5141c7);console['log'](_0x36a388[_0x4706c0(0xb3,0x9d,0xe4,0x32)],_0x4318dd);if(!_0x4318dd){if(_0x36a388[_0x4706c0(-0x12,0x4b,-0x1a,-0x8)](_0x36a388[_0x2b9234(0xb8,0x165,0xfd,0xa0)],_0x36a388[_0x4706c0(0x4f,0x70,0x39,0x69)]))_0x40e101['removeList'+'ener'](_0x40d3dd[_0x2b9234(0xe9,0x28,0x7c,0x6b)+_0x4706c0(-0x1e,0x4c,0x82,0xa4)+_0x2b9234(0x1a7,0xc8,0x154,0x1d5)],_0x7638dc),_0x36a388[_0x4706c0(0x152,0xdf,0x136,0xc0)](_0x5ca475,new _0x46d261(_0x36a388[_0x2b9234(0x2,0xd0,0x85,0xa7)]));else{toastr[_0x2b9234(0xcf,0x4e,0xc1,0x39)](_0x36a388[_0x2b9234(0xce,0x154,0xe9,0xdd)]);return;}}const _0x4dd0ea=_0x36a388[_0x2b9234(0x19e,0x14c,0x156,0x13f)](extractOutfitTags,_0x4318dd);if(_0x36a388[_0x4706c0(-0x3c,0x4b,-0x24,0xa0)](_0x4dd0ea[_0x2b9234(0xb2,0x64,0xec,0x108)][_0x4706c0(0x33,0x8c,0x49,0x8)],-0x2291*0x1+-0x3*-0xaa3+0x2a8)){toastr[_0x4706c0(0x69,0x5f,0xb8,0x45)](_0x2b9234(0xb3,0x76,0xe2,0x109)+_0x4706c0(-0x4d,0x2c,0x64,-0x55)),console[_0x4706c0(0x74,0x9b,0xd5,0xaa)](_0x2b9234(0xf7,0xc7,0x116,0x168)+_0x4706c0(0xcc,0xed,0x9a,0x79)+_0x4706c0(0x70,0xf6,0xc4,0xb6)+_0x2b9234(0x5,0x70,0x4f,0x7a)+_0x4706c0(0x41,0x85,0x31,0xeb),_0x4318dd);return;}console['log'](_0x36a388[_0x2b9234(0xce,0x98,0xbf,0xf6)],_0x4dd0ea);const _0x4d2057=_0x4dd0ea[_0x4706c0(0x65,0x90,0xb9,0x82)][-0x1643+0x26f4+-0x10b1*0x1];await _0x36a388[_0x4706c0(0x67,0xe2,0x5e,0xc3)](updateOutfitPresetFromLLM,_0x46b9de['id'],_0x4d2057),toastr[_0x4706c0(0xf9,0x73,-0x1,0x28)](_0x36a388['gwIJx']);}catch(_0x43df63){console[_0x2b9234(0x4b,0x85,0xc1,0xe6)](_0x36a388[_0x4706c0(0x70,0x27,0x69,-0x50)],_0x43df63),toastr[_0x2b9234(0xfa,0x78,0xc1,0x95)](_0x2b9234(0x101,0x117,0xd0,0xc4)+'\x20'+_0x43df63[_0x4706c0(0x45,0x52,0x2f,-0x1f)]);}}async function updateOutfitPresetFromLLM(_0x3de4b9,_0x6d3861){const _0xbe1043={'zqsOi':function(_0x13714e,_0x291a23){return _0x13714e(_0x291a23);},'XSAqC':'没有检测到需要更新的'+'内容','aUmiV':function(_0x3a2f82,_0x1a8256){return _0x3a2f82!==_0x1a8256;},'EHbhj':_0x4052a3(-0x4a,-0x50,-0x27,-0x8e),'RBSjG':'找不到指定的服装预设','bFydF':'中文名称','QMTCX':_0x182ada(-0x1f3,-0x233,-0x187,-0x1a8),'TyAXG':function(_0x2ebbd1,_0xb920b1){return _0x2ebbd1!==_0xb920b1;},'ijhDI':_0x4052a3(-0xb8,-0x8,-0xb6,-0x58),'ZeePm':function(_0x24ba1a,_0x5cbb48){return _0x24ba1a!==_0x5cbb48;},'TjmYu':_0x182ada(-0x2d3,-0x1ee,-0x24d,-0x24a),'lvyVq':_0x182ada(-0x1b4,-0x1a9,-0x263,-0x1f7),'pvhud':function(_0x134630,_0x558fbd){return _0x134630>_0x558fbd;},'Lwbew':_0x182ada(-0x24d,-0x1e5,-0x18d,-0x1d4),'VNECq':function(_0x43586f,_0x53e615){return _0x43586f>_0x53e615;},'oddva':function(_0xd1b7fe,_0x54b6ee){return _0xd1b7fe===_0x54b6ee;},'pBgQS':_0x182ada(-0x29b,-0x1c1,-0x29e,-0x232),'cFCvU':function(_0x454e84,_0x366033){return _0x454e84===_0x366033;},'iWjeN':_0x4052a3(-0x123,-0x12e,-0x65,-0xda),'rMuHO':_0x182ada(-0x109,-0xfc,-0x101,-0x157)+_0x4052a3(-0x189,-0xc5,-0x135,-0x102)+'cter','fxCec':function(_0x1b4b2d){return _0x1b4b2d();},'qSqUY':function(_0xd96901,_0x59cacb){return _0xd96901(_0x59cacb);}},_0x4bb165=extension_settings[extensionName],_0x36c0d4=_0x4bb165['outfitPres'+_0x4052a3(-0x12f,-0x158,-0xea,-0xd9)][_0x3de4b9];if(!_0x36c0d4){if(_0xbe1043['aUmiV'](_0xbe1043[_0x182ada(-0x227,-0x250,-0x1f8,-0x1d1)],_0xbe1043[_0x182ada(-0x15d,-0x1a2,-0x1ad,-0x1d1)])){const _0x261b31=_0x36ffdf(_0x58d1a1[-0x19a8+-0x1ecd*0x1+-0x522*-0xb]),_0xa82449=_0xbe1043['zqsOi'](_0x393837,_0x261b31);_0xa82449&&_0x1cac2d[_0x182ada(-0x21c,-0x18c,-0x1f5,-0x1a1)][_0x182ada(-0x25d,-0x1bd,-0x220,-0x21a)](_0xa82449);}else{toastr[_0x4052a3(-0x6a,-0xb3,-0x131,-0xa6)](_0xbe1043[_0x182ada(-0x1ab,-0x260,-0x1c3,-0x224)]);return;}}let _0x136ce8=_0x4052a3(-0xdb,-0x56,-0x61,-0xd5)+_0x3de4b9+_0x182ada(-0x11a,-0x1e3,-0x195,-0x171);const _0x1092ad={};_0x1092ad[_0x4052a3(-0x136,-0x7b,-0x99,-0xbb)]=_0xbe1043[_0x4052a3(-0xe5,-0xdc,-0xf2,-0xd6)],_0x1092ad['nameEN']=_0x182ada(-0x136,-0x12d,-0x15e,-0x1a9),_0x1092ad[_0x4052a3(0x37,0x21,-0x6a,-0x3e)]=_0xbe1043[_0x4052a3(-0x153,-0x79,-0x148,-0xf5)],_0x1092ad['upperBodyB'+_0x4052a3(-0x61,-0x27,-0x70,-0x4a)]=_0x4052a3(-0x14a,-0xf6,-0xc2,-0xcd),_0x1092ad[_0x182ada(-0x20d,-0x1f5,-0x224,-0x247)]=_0x4052a3(-0xeb,-0x139,-0x75,-0xc4),_0x1092ad[_0x4052a3(-0xc8,-0x163,-0x157,-0xe1)+'ck']='下半身背面';const _0x265394=_0x1092ad;let _0x4065b8=0x17eb+-0x25eb*-0x1+0x5*-0xc5e;for(const _0x4049eb in _0x265394){if(_0xbe1043['TyAXG'](_0xbe1043['ijhDI'],_0xbe1043[_0x182ada(-0x21a,-0x1f3,-0x1bf,-0x216)])){_0x1451ad[_0x182ada(-0x28a,-0x252,-0x1be,-0x22f)](_0xbe1043[_0x4052a3(-0xb3,-0x9d,-0x144,-0xe6)]);return;}else{if(_0x6d3861[_0x4049eb]&&_0xbe1043[_0x182ada(-0x2b2,-0x226,-0x255,-0x23d)](_0x6d3861[_0x4049eb],_0x36c0d4[_0x4049eb])){if(_0xbe1043['TjmYu']===_0xbe1043[_0x182ada(-0x1e4,-0x23b,-0x12a,-0x1b6)]){const _0x36fca2=_0x36c0d4[_0x4049eb]||_0xbe1043['lvyVq'],_0x39cb33=_0x6d3861[_0x4049eb];_0x136ce8+='•\x20'+_0x265394[_0x4049eb]+':\x0a',_0x136ce8+=_0x4052a3(-0x7b,-0x5,-0x27,-0x30)+_0x36fca2[_0x4052a3(-0x55,-0x7e,-0xf,-0x5f)](-0xd1b+-0x1087+0x1da2,-0x11ea*0x2+-0x20db+-0x4d*-0xe5)+(_0xbe1043[_0x182ada(-0x11b,-0x175,-0x215,-0x192)](_0x36fca2[_0x182ada(-0x1a8,-0x212,-0x215,-0x1a5)],0x5*0x47b+0x1f2d+-0x3562)?_0xbe1043['Lwbew']:'')+'\x0a',_0x136ce8+=_0x4052a3(-0x85,-0x7,-0x7e,-0x68)+_0x39cb33[_0x4052a3(-0xac,-0x60,-0x9e,-0x5f)](-0xce3+-0x2*0x118+-0x1*-0xf13,-0x471*0x7+-0x5*-0x70b+-0x3ee)+(_0xbe1043[_0x182ada(-0x252,-0x1dd,-0x174,-0x1db)](_0x39cb33['length'],-0x3*0x401+-0xce0+0x1915*0x1)?'...':'')+'\x0a\x0a',_0x4065b8++;}else{_0x3f259c[_0x182ada(-0x190,-0x1e7,-0x175,-0x1cc)]('找不到指定的服装预设');return;}}}}if(_0xbe1043[_0x4052a3(-0xa9,0x4,-0x12,-0x2a)](_0x4065b8,-0xa9a*-0x2+-0xe*0x25+-0x132e)){toastr[_0x182ada(-0x21e,-0x1f5,-0x29e,-0x22f)](_0xbe1043[_0x182ada(-0x259,-0x228,-0x21f,-0x20c)]);return;}_0x136ce8+='共\x20'+_0x4065b8+_0x4052a3(-0xa0,-0xf3,-0x11f,-0xaa);function _0x182ada(_0x4011af,_0xb0337,_0xa64bdd,_0x25c6af){return _0xff0e66(_0x4011af-0x1ab,_0xb0337-0xea,_0x25c6af- -0x67f,_0xb0337);}const _0x349df0=await _0xbe1043[_0x4052a3(-0xa5,-0x128,-0xda,-0xe0)](stylishConfirm,_0x136ce8);function _0x4052a3(_0x8ab651,_0x93fb65,_0x41838a,_0x166f69){return _0xff0e66(_0x8ab651-0x127,_0x93fb65-0x163,_0x166f69- -0x559,_0x41838a);}if(!_0x349df0){toastr['info'](_0xbe1043[_0x182ada(-0x179,-0x185,-0x1bc,-0x1f0)]);return;}for(const _0x232a45 in _0x265394){if(_0xbe1043[_0x4052a3(-0x31,-0x19,0x1d,-0x4d)](_0xbe1043[_0x182ada(-0x209,-0x23e,-0x1cd,-0x22c)],_0xbe1043[_0x182ada(-0x1b3,-0x1df,-0x1bd,-0x22c)]))_0x6d3861[_0x232a45]&&(_0x36c0d4[_0x232a45]=_0x6d3861[_0x232a45]);else{const _0x335025=_0x542e15?function(){function _0x3254b8(_0x6f6952,_0xa10dcf,_0x4345b7,_0x248dd6){return _0x182ada(_0x6f6952-0xf6,_0x248dd6,_0x4345b7-0x18c,_0x4345b7-0x610);}if(_0x57f794){const _0x5a206b=_0x2ab507[_0x3254b8(0x3b8,0x3e3,0x3fd,0x3f9)](_0x1af25e,arguments);return _0x31ae40=null,_0x5a206b;}}:function(){};return _0x406ade=![],_0x335025;}}saveSettingsDebounced();const _0x29a9e8=$(_0xbe1043[_0x182ada(-0x1c6,-0x1e9,-0x1e6,-0x197)]);_0x29a9e8['length']&&_0xbe1043[_0x4052a3(-0x106,-0x197,-0xb2,-0x122)](loadOutfitPreset),_0xbe1043[_0x4052a3(-0xaf,-0x15d,-0x85,-0x101)](updateOutfitFormFields,_0x6d3861),console[_0x4052a3(-0xce,-0x3d,-0xf6,-0x70)](_0x4052a3(0x0,0x1a,0x1f,-0x51)+_0x182ada(-0x11a,-0x112,-0xf8,-0x144)+_0x182ada(-0x19a,-0x209,-0x227,-0x210)+_0x3de4b9+'\x22');}function updateOutfitFormFields(_0x2174bc){const _0x246611={};_0x246611[_0x33201a(-0x11a,-0x11d,-0x155,-0x10d)]=_0x33201a(-0x13d,-0xcd,-0xaa,-0xd1);function _0x1a37ef(_0x4db0ae,_0x565191,_0x3ed124,_0x43ae6e){return _0xff0e66(_0x4db0ae-0x1d,_0x565191-0x159,_0x565191- -0x71d,_0x4db0ae);}_0x246611['rvSqY']=_0x1a37ef(-0x296,-0x27f,-0x2bb,-0x239),_0x246611[_0x33201a(-0xa5,-0xe8,-0x13e,-0xf1)]='nameEN',_0x246611[_0x33201a(-0x134,-0x129,-0xbd,-0xac)]=_0x1a37ef(-0x208,-0x202,-0x24d,-0x239),_0x246611[_0x1a37ef(-0x33a,-0x2bd,-0x326,-0x32a)]='upperBodyB'+_0x1a37ef(-0x1b9,-0x20e,-0x1c4,-0x249);function _0x33201a(_0x490dd4,_0x366841,_0x4a9554,_0x1600e1){return _0xff0e66(_0x490dd4-0x188,_0x366841-0x161,_0x1600e1- -0x5c3,_0x4a9554);}_0x246611[_0x33201a(-0x146,-0x1d6,-0x133,-0x162)]=_0x33201a(-0x1e3,-0x1a4,-0x1cb,-0x18b),_0x246611[_0x33201a(-0x201,-0x118,-0x127,-0x18a)]=_0x33201a(-0x17f,-0x190,-0x139,-0x14b)+'ck';const _0x1b84bb=_0x246611,_0x501f37=[_0x1b84bb[_0x33201a(-0xff,-0x15c,-0x16c,-0x158)],_0x1b84bb[_0x33201a(-0x117,-0x169,-0xf9,-0xf1)],_0x1b84bb[_0x1a37ef(-0x24e,-0x206,-0x249,-0x27a)],_0x1b84bb['tqHoS'],_0x1b84bb[_0x33201a(-0x181,-0xde,-0xe5,-0x162)],_0x1b84bb[_0x1a37ef(-0x27d,-0x2e4,-0x326,-0x2f2)]];_0x501f37['forEach'](_0x2fad41=>{function _0x42d0e1(_0x52fafa,_0x48cb22,_0x503857,_0x55087c){return _0x33201a(_0x52fafa-0xec,_0x48cb22-0x184,_0x55087c,_0x48cb22-0x3c2);}function _0x71f270(_0x5f442c,_0xd49875,_0x3f4a05,_0x3d177a){return _0x33201a(_0x5f442c-0x1a7,_0xd49875-0xc9,_0x3d177a,_0x5f442c-0x292);}if(_0x2174bc[_0x2fad41]){const _0x22995f=document[_0x42d0e1(0x2c7,0x2af,0x2ac,0x28c)+_0x42d0e1(0x2ba,0x2ed,0x2f3,0x31c)]('outfit_'+_0x2fad41);_0x22995f&&(_0x22995f[_0x42d0e1(0x20b,0x265,0x223,0x279)]=_0x2174bc[_0x2fad41],$(_0x22995f)[_0x42d0e1(0x1e5,0x259,0x2c5,0x2e3)](_0x1b84bb[_0x71f270(0x185,0x11a,0x15c,0x209)]));}});}