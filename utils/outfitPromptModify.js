(function(_0x210e92,_0x12b44c){function _0x23a968(_0x372370,_0x4cc6a6,_0x5b70e9,_0x325317){return _0x49bc(_0x325317- -0x307,_0x5b70e9);}function _0x349346(_0x3809e7,_0x21aa25,_0x1ce5cc,_0x401069){return _0x49bc(_0x21aa25-0x3d3,_0x401069);}const _0xc67c17=_0x210e92();while(!![]){try{const _0x5d1c86=-parseInt(_0x349346(0x556,0x560,0x5d2,0x5ac))/(0x1e2*-0xc+0x4a2+0x11f7)*(-parseInt(_0x349346(0x4bd,0x4ff,0x522,0x581))/(0x1b63+-0x9*-0x34b+-0x3904))+-parseInt(_0x23a968(-0x1d9,-0x263,-0x268,-0x1ee))/(-0x1a1c+-0x19db+0x33fa)*(parseInt(_0x23a968(-0x219,-0x198,-0x244,-0x209))/(0x965*0x1+0x3*-0x3bf+0x1dc))+-parseInt(_0x23a968(-0x228,-0x20a,-0x1d5,-0x1c4))/(-0x1*0xefb+0x1157+0x1*-0x257)+parseInt(_0x23a968(-0x12e,-0x13a,-0x1a7,-0x192))/(0x4*0x4cf+-0x1496+0x160)*(-parseInt(_0x349346(0x58f,0x509,0x543,0x4e5))/(0x1d*0x5b+-0x15e*0x2+-0x78c))+-parseInt(_0x349346(0x5b7,0x5bd,0x639,0x5b1))/(0x1df1+0xf06+-0x2cef)+parseInt(_0x23a968(-0x1d4,-0x246,-0x1b9,-0x1af))/(-0x1*0xa3f+0x42*0x19+0x1eb*0x2)*(parseInt(_0x23a968(-0x1e0,-0xe2,-0x19d,-0x17b))/(-0x15c3*0x1+0x1a*0xd6+-0x1*-0x11))+-parseInt(_0x23a968(-0x200,-0x1ef,-0x17f,-0x1ec))/(0xb27*0x1+0x12b+-0xc47)*(-parseInt(_0x349346(0x54d,0x4e8,0x555,0x4de))/(0x1541*0x1+-0x2309+0x76*0x1e));if(_0x5d1c86===_0x12b44c)break;else _0xc67c17['push'](_0xc67c17['shift']());}catch(_0x17e403){_0xc67c17['push'](_0xc67c17['shift']());}}}(_0x298c,0x2687*0x2d+0x1f1*0x362+-0x98253));const _0x1b6da1=(function(){const _0x45b525={};_0x45b525[_0x51c81b(-0x205,-0x217,-0x23e,-0x256)]=function(_0x114421,_0xde6e6){return _0x114421!==_0xde6e6;},_0x45b525[_0x206d9b(0x319,0x31a,0x32d,0x2b0)]=_0x206d9b(0x3ad,0x31d,0x39c,0x397);const _0x1717fe=_0x45b525;let _0xad9f86=!![];function _0x206d9b(_0x44b8db,_0x8e853a,_0x40376f,_0x4556f7){return _0x49bc(_0x44b8db-0x1f8,_0x8e853a);}function _0x51c81b(_0x436d1c,_0x4b0586,_0x2a59d2,_0x44bd61){return _0x49bc(_0x436d1c- -0x3a6,_0x4b0586);}return function(_0x305430,_0x50c629){function _0xd6e764(_0x51ac00,_0x345df0,_0x123d43,_0x4bb433){return _0x206d9b(_0x4bb433- -0x15d,_0x51ac00,_0x123d43-0xfa,_0x4bb433-0x148);}function _0xcaa909(_0x2e22db,_0x45aa9e,_0x5e9112,_0x2412ff){return _0x51c81b(_0x2412ff-0x653,_0x5e9112,_0x5e9112-0x197,_0x2412ff-0x8a);}if(_0x1717fe[_0xd6e764(0x289,0x1aa,0x252,0x23c)](_0xcaa909(0x433,0x476,0x405,0x41b),_0x1717fe[_0xd6e764(0x16c,0x1d7,0x235,0x1bc)])){const _0x2d2edd=_0xad9f86?function(){function _0x93df8f(_0x5b1a79,_0x2c6a59,_0x124f6a,_0x18e851){return _0xd6e764(_0x18e851,_0x2c6a59-0x17f,_0x124f6a-0x1c0,_0x124f6a-0xa5);}if(_0x50c629){const _0x2ff013=_0x50c629[_0x93df8f(0x338,0x356,0x343,0x2ed)](_0x305430,arguments);return _0x50c629=null,_0x2ff013;}}:function(){};return _0xad9f86=![],_0x2d2edd;}else _0x29a2e0='data:image'+_0xcaa909(0x496,0x39b,0x4ad,0x42b)+'4,'+_0x544b17;};}()),_0x34c322=_0x1b6da1(this,function(){const _0x283415={};_0x283415['OUuXz']='(((.+)+)+)'+'+$';const _0xb10ce5=_0x283415;function _0x59a5a5(_0x201567,_0x1fdce5,_0x18c9df,_0x24bf63){return _0x49bc(_0x201567- -0x2a0,_0x1fdce5);}function _0x5d4706(_0xe6460,_0x1c4033,_0xe641f9,_0x2ea66c){return _0x49bc(_0x2ea66c- -0x35b,_0xe641f9);}return _0x34c322[_0x5d4706(-0x22a,-0x1cd,-0x193,-0x1a5)]()[_0x5d4706(-0x21e,-0x2d2,-0x2e8,-0x265)](_0xb10ce5[_0x59a5a5(-0xa5,-0x12e,-0xa3,-0x98)])[_0x59a5a5(-0xea,-0x162,-0x74,-0xd4)]()[_0x59a5a5(-0x138,-0xb4,-0xde,-0x18c)+'r'](_0x34c322)[_0x59a5a5(-0x1aa,-0x153,-0x189,-0x12b)](_0xb10ce5[_0x5d4706(-0xf5,-0x1d5,-0x1ad,-0x160)]);});_0x34c322();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../script.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{loadOutfitPreset}from'./settings/character/index.js';function _0x298c(){const _0x2f784b=['DxbWzxjcB2r5qG','qKDWs3y','Bg9N','qMT3sM8','koEPUIK','rMnMzLi','y05Mrhe','s0LQyvG','CK9ut3e','5Qoa5Rwl5yIW5PYn6kof5Qch562+','ufjptvbux1jfuq','whHzy0i','CMvTB3zLtgLZDa','B21PqLq','tKLkt2y','zxjYB3i','r2LhsM8','zxrjza','5PYn6kof5O+q56s66k+n5l+U5Ps55AsX6lsLoG','EKH3te8','teXnioIVT+AXGUwKSEI0Pq','AKj4quS','5lIl5y2k6lQR','ywrK','AxjLBwvUDcbTzq','C2vHCMnO','ChvZAa','yxv0BW','t0rjrLLFuKvrvq','zgvjBve','zwLvz04','D1LMAhm','ywPPDfi','mtK1nZGWngfqqvLUDa','A0PTC3m','EKHgtgq','wfLYtem','yKvKDLG','z0n4vKi','rMrNve0','CMfUzg9Tvvvjra','Bxb0oG','5Rgc6lAf5PE2','ufzruwC','Affgt1K','q3PUvuy','ig91DgzPDcbTBW','yNvfwwe','yMfZzty0','C3nHz2uGAw5Kzq','ufjptvbux1jfuW','ChnUwgu','qLLruMq','D1bZrhi','BxfJzgq','wLPLB1C','mZeYuM9ss2Dl','E3VKUiRKUiVMLOD9Fq','uKDmwfK','BgvUz3rO','m3f6CMXMzq','Aw5JBhvKzxm','ntq5mZa3AgvHBKzf','CeTlz1K','zw5LCG','rMDHqw8','5PYQ5zYOieXmtsdOVPpLH7RKUk0','B0TQsuS','vKPQvhi','wxDVwuW','5lIl5y2k6lQR5PYn6kof','DhjPz2DLCG','t0rjrLLFr0vuxW','5RkH5PYj5Qoa5Rwl5yIW6zYa6kAb5PU05PAW55Qe','DeXVrKi','vMLRB0e','vgrXEM0','zgvIDwDNAw5NoG','zvrysKu','mJu5mtG2s0vbs3bw','DM9huxa','AxnbCNjHEq','AurAAge','CePWzvy','D2rezwq','E3VMNi3OO4xLIjFOOAH9Fq','ywnR','teXnx0niqvjFtq','Der5Auy','nJuZodqYweHcvwv0','zw92yK8','uNbWCwS','C3vIC3rYAw5N','yLnqugG','B21SsNC','C3bSAxq','DxjS','igrHDge6','ien1CNjLBNqGCa','CMvWBgfJzq','yNfoBKC','A1vQvMO','mtCXmdq3mfD4qwDbEG','y29UDgvUDa','q0nwv24','DfvUC1q','DxbWzxjcB2r5','sxbiy2m','ueLWB3q','renSzwK','CMvZDwX0','shDJCMm','ue9ou0u','5lIl5y2k6lQR6iom6z2I','E3VKUjBNLyZKUABOP6BLJ5f9Fq','yvDfrwW','yMTgC1K','5lIl5y2k6lQRoIa','v1LQEfO','DejsEMi','5lIT5PAh5zcn56EW','wKfID0m','uvvPDgC','owPZB0LTAq','ChqGkeLeoIa','rurbtMO','DhzSrxy','Afj5uva','5lIk5y2k6lQR6iom6z2I','BuDVyuq','txLyANK','C0nZqwW','z2Tkyue','ifjLCxvLC3rPBG','BgXxvM4','yw1WDei','ChjVBxb0','6iUX5PAh5zcn56EWoIa','5Q2J5zYO5Ase55cg5PYn6kof5O+q56s66k+n5l+U','y29UC3rYDwn0BW','AvHovLy','C3vJy2vZCW','vwzrrwW','BxnssuS','zgLMEsbmte0GCG','tLrfwuS','B3nrwMW','vuvtva','Bxb0ig1VzgLMEq','vhHsEKe','wLrmBeq','CMLfs0m','mtjlEKn2AwW','DgHwD2y','CwTgqva','tKTXDLu','Duzjq2q','C3rHCNrZv2L0Aa','Aw1Hz2vFDxjS','B3v0zML0uhjLCW','5BEY5y+w5RAi5PU05PAW','l3bUzZTIyxnLnG','Aw5KzxHpzG','A1Hdzxi','B2LXq04','qufxzuu','poACJEIJHt4k','6k+35ywi6ycj5OUP5lIa5lIQ5PYn6kof6Ake6k6+','CLfKrMi','BwvZC2fNzsbHDa','Efr1vLO','DhLWzq','5PYn6kof5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','rxbcwhy','DvvpuNy','mZi3nZiXme9PsM5Xta','mvPdugLSCq','wLv4q3i','Avf1yKK','Dgv4Da','5lIT5PAh5zcn56EWoIa','tg93r1e','zgf0ytO','ENv5rwW','z29RCwW','ALn2ChC','BMfTzuno','zNvSBejVzhK','uMLVEw4','AMvQDgm','BMfTzq','BwfW','w291DgzPDfbYBW','Aw5MBW','CgfLB0C','zxrZ','CKvhtgm','BM93','5lIk5y2k6lQRoIa','Ae1VBNi','EfH5Avi','y3rNBxi','zgv0ywLS','igLUzgv4','Aw5WDxq','zxziq1K','AeXoBNO','DhjPBq','DxrWDxqGzM9Yia','B3v0zML0CW','z2v0rwXLBwvUDa','EfD4qNy','rvfSu0S','t0rjrLLFuKvtua','zgf0ytPPBwfNzq','vNPHChq','thHcr2e','Dg9tDhjPBMC','sNrqBMm','C3rYAw5N','shDlCfi','5lIk5y2k6lQR','EwHMtKO','BMfTzuvo','tNvSDvO','B3v0zML0xW','5yEg5Ash5PU05PAW5PYn6kofici','zKjhtui','tM1KAeu','5OM+5lIn5yIW5OYh5A6A55Qe5PYn6kof6Ake6k6+','r1nczwq','ifjHDYbmte0GBW','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','B3LcqKy','zuPgzuG','vKntDxi','ifn0yxj0Aw5Nia','tu5Xz2O','wMruBMC','y3boq0q','uvLLvva','uu1juvy','y2HHCL9TB2rPzG','Dgz4CMS','zxnuuge','uMDrBKm','yNHNqvK','A3LmDNq','zNvSBejVzhLcyq','uNHNvKm','DgPtCK0','yLfAyvO','D2fYBMLUzW','lI4U','ve1cvvq','BwvZC2fNzq','i3n0lwnOyxr1oa','5y+c6icd5zU+54Mh','C0nwq3C','C2L6zq','6kkR5l2/55sO77YA','A2TRB2q','Bxb0tw9KAwz5xq','t05trq','r0z4rMK','zfrTv3K','z3LrCKS','y0XMvNm','zM9YrwfJAa','mZG5mde1mKnvt1rMyq','Awf0t1u','B3v0zML0ihbYBW','tvjPqLO','AM9PBG','ihjLCxvLC3qUlG','iev4zwn1DgLUzW','zMLSDgvY','DMfSDwu','zgf0yq','ywj3BhG','vKnlrfu','q09WuK4','ywv3AxO','AuH5EKm','B2jQzwn0','E3VPGjRNLkJMNi3OO4xLKk/NLkJLIjFOOAG','t1v1whO','rLfuz24','5lIl5y2k6lQR6iom6z2IoIa','txznz0q','Be5UzfO','wuXQEva','iow3SUABToAwSoACJEIJHEMIHoIUVIaI','Ee9iAg8','yxbWBhK','EMnPvLa','CMfUzg9T','Ew9TueC','rgLJrvy','D2jjDuC','DgDjsvK','EeL2rK4','zw1PDa','6iUX5PAh5zcn56EW','s1rcv0e','6i635y+w5PYn6kof5l+U5Ps55O+q56s66k+n6lAf','iIdNMOtKU6xKUiVMLBdMJA46cGO','y3rLCG','ugHpy3q','zxHLyW'];_0x298c=function(){return _0x2f784b;};return _0x298c();}import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0x260160,_0x4498cd,_0x16c7d6,_0x388490){function _0x22cf9c(_0x5a95ca,_0x56e14a,_0x4181f2,_0x163878){return _0x49bc(_0x5a95ca-0x204,_0x4181f2);}const _0xcc8d3f={'pCZIn':function(_0x1fbc89,_0x17c98c){return _0x1fbc89(_0x17c98c);},'Rioyn':_0x22cf9c(0x2f5,0x388,0x330,0x2a0),'wdDed':function(_0x161684,_0x57becb){return _0x161684!==_0x57becb;},'DicEV':function(_0x4cc9a1,_0x3c7127){return _0x4cc9a1(_0x3c7127);},'xOHho':function(_0x3f86c1,_0xeff4aa){return _0x3f86c1===_0xeff4aa;},'gokql':'PVQQg','eJFeH':_0x3e2cb2(-0x45,-0x39,-0x32,-0x52),'RxgVC':function(_0x1fcb90,_0x2dd4fb){return _0x1fcb90===_0x2dd4fb;},'KIjaX':_0x3e2cb2(-0x89,-0x76,-0x79,-0x3),'osQZl':function(_0x405ccb,_0x55e1b6,_0xd8f329,_0x508da9,_0x5eb58b){return _0x405ccb(_0x55e1b6,_0xd8f329,_0x508da9,_0x5eb58b);}};if(_0xcc8d3f[_0x22cf9c(0x406,0x41e,0x43d,0x3f3)](typeof _0x260160,'string')){if(_0xcc8d3f[_0x3e2cb2(-0x96,-0x5e,-0xa9,-0xcb)](_0x3e2cb2(-0x174,-0x148,-0xc0,-0xf4),_0xcc8d3f[_0x22cf9c(0x399,0x401,0x327,0x422)]))_0xcc8d3f['pCZIn'](_0x280142,new _0x5bdc67(_0x293567[_0x22cf9c(0x34f,0x3e2,0x3b8,0x3a2)]||_0xcc8d3f[_0x22cf9c(0x39d,0x3b3,0x37c,0x39f)]));else return _0x16c7d6&&_0x260160['includes'](_0x4498cd)&&(_0x388490&&_0x388490[_0x3e2cb2(-0x129,-0x11d,-0xa3,-0x108)](_0x4498cd)),_0x260160['replaceAll'](_0x4498cd,_0x16c7d6);}if(Array[_0x3e2cb2(-0x144,-0xdc,-0x9e,-0xce)](_0x260160)){if(_0xcc8d3f[_0x3e2cb2(0x47,-0xcc,-0x2d,-0x35)]!==_0xcc8d3f[_0x3e2cb2(0x38,-0x69,0x25,-0x35)]){const _0x2bb1fd={};_0x2bb1fd[_0x3e2cb2(0x7,-0x47,-0x7a,-0x4e)]=[];const _0x4eb225=_0x2bb1fd;_0x1820ae=_0x1b6507[_0x3e2cb2(-0x11e,-0x21,-0x95,-0xbc)](/<thinking>[\s\S]*?<\/thinking>/gi,'')['trim']();const _0x499226=/<服装>([\s\S]*?)<\/服装>/g;let _0x50e5e6;while(_0xcc8d3f[_0x22cf9c(0x335,0x35a,0x3b3,0x38e)](_0x50e5e6=_0x499226[_0x3e2cb2(-0x121,-0x105,-0x95,-0x120)](_0x4156dd),null)){const _0x1dee1a=_0xcc8d3f[_0x3e2cb2(0x67,0x58,0x5b,0xb)](_0x599747,_0x50e5e6[-0x1e03+-0xa39+0x283d]),_0x5751e6=_0xcc8d3f[_0x22cf9c(0x40b,0x48c,0x39b,0x3b3)](_0x4d0ac9,_0x1dee1a);_0x5751e6&&_0x4eb225[_0x22cf9c(0x3b2,0x36a,0x404,0x42a)]['push'](_0x5751e6);}return _0x4eb225;}else return _0x260160[_0x3e2cb2(-0xec,0x37,-0x9f,-0x60)](_0x48e6e5=>replacePlaceholder(_0x48e6e5,_0x4498cd,_0x16c7d6,_0x388490));}if(_0x260160&&_0xcc8d3f[_0x3e2cb2(0x5c,0x18,-0x3,-0x26)](typeof _0x260160,_0xcc8d3f[_0x3e2cb2(-0xcc,-0x110,-0xa5,-0x118)])){const _0x34b871={};for(const _0x555261 in _0x260160){_0x34b871[_0x555261]=_0xcc8d3f[_0x3e2cb2(-0x9b,-0xf3,-0x10b,-0x8d)](replacePlaceholder,_0x260160[_0x555261],_0x4498cd,_0x16c7d6,_0x388490);}return _0x34b871;}function _0x3e2cb2(_0x450f35,_0xd56060,_0x42958e,_0x2050f9){return _0x49bc(_0x2050f9- -0x1fc,_0x450f35);}return _0x260160;}function _0x49bc(_0x5ab882,_0x2295a9){_0x5ab882=_0x5ab882-(-0xec0+-0x15*-0x17f+-0xfd5);const _0x15ed8f=_0x298c();let _0x4a2d58=_0x15ed8f[_0x5ab882];if(_0x49bc['zglHEY']===undefined){var _0x4a355b=function(_0x336e44){const _0x49dc6c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x18e890='',_0x65e544='',_0x2df240=_0x18e890+_0x4a355b;for(let _0x5c950c=-0x1557*-0x1+-0x2349*0x1+-0xaa*-0x15,_0xf3501c,_0x3e2b3f,_0xa82901=-0x1db1+0x1abb+-0x2f6*-0x1;_0x3e2b3f=_0x336e44['charAt'](_0xa82901++);~_0x3e2b3f&&(_0xf3501c=_0x5c950c%(0x2fb*0x6+0xbdc+-0xa*0x2f9)?_0xf3501c*(-0x3*0x2d2+0x31a*0xc+-0x1c82)+_0x3e2b3f:_0x3e2b3f,_0x5c950c++%(0x2*0xef6+0x2549+0xa7*-0x67))?_0x18e890+=_0x2df240['charCodeAt'](_0xa82901+(0x2034+0x1*-0x23c8+0x39e))-(-0x1961+-0xfc2+-0x1*-0x292d)!==0x23f8+0x47*0x61+-0x1*0x3edf?String['fromCharCode'](0x705+-0x1ff7+0x19f1*0x1&_0xf3501c>>(-(-0x21b2+0x1b*-0xf0+0x6*0x9d6)*_0x5c950c&-0x1d*0x1+0x1b3+-0x190)):_0x5c950c:-0x137*-0x3+-0x1*0x264e+-0x1*-0x22a9){_0x3e2b3f=_0x49dc6c['indexOf'](_0x3e2b3f);}for(let _0x42e8c3=-0x1*0x14b+0x7ad*-0x2+0x10a5,_0x26a1f0=_0x18e890['length'];_0x42e8c3<_0x26a1f0;_0x42e8c3++){_0x65e544+='%'+('00'+_0x18e890['charCodeAt'](_0x42e8c3)['toString'](-0x125f+-0xeac+0x211b*0x1))['slice'](-(-0x91d*-0x1+-0xfe+-0x81d));}return decodeURIComponent(_0x65e544);};_0x49bc['LPZpWa']=_0x4a355b,_0x49bc['hRGWls']={},_0x49bc['zglHEY']=!![];}const _0x1c1e43=_0x15ed8f[-0x1235+0x2e2*0xd+-0x1345*0x1],_0x4bb6d3=_0x5ab882+_0x1c1e43,_0x2241fb=_0x49bc['hRGWls'][_0x4bb6d3];if(!_0x2241fb){const _0x3ad6bd=function(_0x14356d){this['yUbJpw']=_0x14356d,this['CSBQqg']=[-0x1*0x160f+-0x1be6+0x2*0x18fb,0x2172+0x133*0x1+-0x22a5,0xb75+0xd7*-0x19+0x16*0x6f],this['SKrKcC']=function(){return'newState';},this['mFuEnU']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['IwFeFa']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3ad6bd['prototype']['dWOsNu']=function(){const _0x79e4de=new RegExp(this['mFuEnU']+this['IwFeFa']),_0x1d2c5e=_0x79e4de['test'](this['SKrKcC']['toString']())?--this['CSBQqg'][0x2084+-0x2*-0x8b6+-0x31ef]:--this['CSBQqg'][-0x1494+-0x24b5+0x3949];return this['YOGnJa'](_0x1d2c5e);},_0x3ad6bd['prototype']['YOGnJa']=function(_0x4c2b36){if(!Boolean(~_0x4c2b36))return _0x4c2b36;return this['SgMqIs'](this['yUbJpw']);},_0x3ad6bd['prototype']['SgMqIs']=function(_0x6fad76){for(let _0xe28789=-0x4*0x30b+-0xce3+0x503*0x5,_0x293fd3=this['CSBQqg']['length'];_0xe28789<_0x293fd3;_0xe28789++){this['CSBQqg']['push'](Math['round'](Math['random']())),_0x293fd3=this['CSBQqg']['length'];}return _0x6fad76(this['CSBQqg'][0xe57+-0x2149+0x12f2]);},new _0x3ad6bd(_0x49bc)['dWOsNu'](),_0x4a2d58=_0x49bc['LPZpWa'](_0x4a2d58),_0x49bc['hRGWls'][_0x4bb6d3]=_0x4a2d58;}else _0x4a2d58=_0x2241fb;return _0x4a2d58;}function attachImagesToMessage(_0x1ba3b6,_0x9a31ca,_0x1bd2ea,_0x4814c7='参考图片'){const _0xddf4f1={'XxYcB':function(_0x55f905,_0x37ceea){return _0x55f905(_0x37ceea);},'NscwW':function(_0x237185,_0x2a7266){return _0x237185===_0x2a7266;},'RGLXY':_0x25dbae(-0x1e8,-0x10c,-0x185,-0x180),'wPsDr':function(_0x58ea27,_0x55939d){return _0x58ea27===_0x55939d;},'Aszpk':function(_0x2b440a,_0x1908c8){return _0x2b440a+_0x1908c8;},'gkJaA':_0x25dbae(-0x1a2,-0x203,-0x1ad,-0x1cd),'XYrLC':_0x56ab14(0x452,0x3f9,0x3e6,0x443),'tLoFB':_0x25dbae(-0x128,-0x1a7,-0x1c2,-0x24b),'GiGJo':function(_0x2028f7,_0x141a1d){return _0x2028f7===_0x141a1d;},'kkkod':function(_0x352778,_0xf92835){return _0x352778<_0xf92835;},'fBDqv':function(_0x5a027c,_0x571f75){return _0x5a027c>=_0x571f75;},'EQlSK':function(_0x16752e,_0x5eb4f0){return _0x16752e!==_0x5eb4f0;},'riEKC':'FIiKc','TxRzA':_0x56ab14(0x396,0x338,0x36f,0x300),'YLjyP':function(_0x30a6cd,_0x5a6dcb){return _0x30a6cd===_0x5a6dcb;},'iQubI':_0x25dbae(-0x171,-0x132,-0x13f,-0x17b),'sCVCw':'ilCOM','eiUgN':_0x25dbae(-0x12a,-0x238,-0x19e,-0x1e5),'GBRER':_0x56ab14(0x3a9,0x3a2,0x375,0x3aa)};if(!_0x1bd2ea||_0xddf4f1[_0x56ab14(0x3ac,0x36e,0x32c,0x365)](_0x1bd2ea[_0x56ab14(0x3d7,0x3d2,0x466,0x3e9)],0x4*0x290+-0x923*0x2+0xd*0x9e)||_0xddf4f1[_0x56ab14(0x4a1,0x4a2,0x503,0x4ad)](_0x9a31ca,0x10f*-0xb+-0x14*0x3e+-0x3f*-0x43)||_0xddf4f1['fBDqv'](_0x9a31ca,_0x1ba3b6[_0x56ab14(0x3d7,0x3f8,0x434,0x35e)])){if(_0xddf4f1[_0x56ab14(0x470,0x4ac,0x4d5,0x3e1)](_0xddf4f1[_0x25dbae(-0x1fe,-0x193,-0x1c9,-0x13f)],_0xddf4f1[_0x56ab14(0x431,0x464,0x461,0x454)]))return _0x1ba3b6;else _0xddf4f1[_0x56ab14(0x3a7,0x31d,0x3f1,0x432)](_0x2f3580,_0x49ad1e[_0x56ab14(0x40a,0x496,0x442,0x403)]);}const _0x17f03b=[..._0x1ba3b6],_0x2cd607=_0x17f03b[_0x9a31ca],_0x4745be=[];if(typeof _0x2cd607['content']===_0xddf4f1[_0x56ab14(0x3d6,0x3b9,0x3e8,0x45e)]){const _0x5dab17={};_0x5dab17['type']=_0xddf4f1[_0x56ab14(0x420,0x49d,0x41f,0x39f)],_0x5dab17['text']=_0x2cd607[_0x25dbae(-0x1f2,-0x191,-0x1f9,-0x26d)],_0x4745be[_0x25dbae(-0x203,-0x1fe,-0x246,-0x1f6)](_0x5dab17);}else Array[_0x25dbae(-0x1b3,-0x1bd,-0x20f,-0x213)](_0x2cd607[_0x56ab14(0x403,0x39b,0x49e,0x44b)])&&(_0xddf4f1[_0x25dbae(-0x101,-0x19d,-0x13d,-0xfa)](_0xddf4f1[_0x56ab14(0x44e,0x49a,0x472,0x3e1)],_0xddf4f1[_0x56ab14(0x49e,0x442,0x40a,0x44a)])?_0x48480c():_0x4745be['push'](..._0x2cd607[_0x56ab14(0x403,0x450,0x427,0x386)]));if(_0x1bd2ea[_0x25dbae(-0x210,-0x1d1,-0x225,-0x1c8)]>0x82d+-0x202c*0x1+-0x17ff*-0x1){if(_0xddf4f1[_0x56ab14(0x3ba,0x365,0x422,0x37c)]===_0xddf4f1['GBRER'])_0x1d22cb[_0x63616a]&&(_0x6ccf06[_0x176894]=_0x5a85a2[_0x23f7f3]);else{const _0x2c6d88={};_0x2c6d88[_0x25dbae(-0x23e,-0x11e,-0x1b5,-0x184)]=_0xddf4f1[_0x25dbae(-0x267,-0x255,-0x1dc,-0x196)],_0x2c6d88[_0x25dbae(-0x134,-0x222,-0x1ad,-0x132)]='\x0a[以下是用户上传的'+_0x1bd2ea['length']+'张'+_0x4814c7+']',_0x4745be[_0x25dbae(-0x22f,-0x203,-0x246,-0x23b)](_0x2c6d88);}}_0x1bd2ea[_0x56ab14(0x4a8,0x421,0x4f4,0x4f8)]((_0x5ef170,_0x48893f)=>{const _0x8e8e35=_0xddf4f1['NscwW'](typeof _0x5ef170,_0xddf4f1[_0x27c677(-0x76,-0x3a,-0x92,-0x6c)])?_0x5ef170:_0x5ef170[_0x178eee(0x1f7,0x1b7,0x1d3,0x138)],_0x1035a8=_0xddf4f1[_0x178eee(0x234,0x1bc,0x16a,0x239)](typeof _0x5ef170,_0x27c677(0x6c,0xa3,0xc,0xf4))&&_0x5ef170['name']?_0x5ef170[_0x178eee(0x1b8,0x245,0x253,0x2df)]:''+_0x4814c7+_0xddf4f1['Aszpk'](_0x48893f,0xfec+-0x2605*-0x1+-0x35f0),_0xee0491={};_0xee0491['type']=_0xddf4f1[_0x178eee(0x177,0x20b,0x281,0x270)],_0xee0491[_0x27c677(0x3,0x34,0x43,-0x17)]='['+_0x1035a8+']',_0x4745be[_0x27c677(-0x96,-0x11a,-0x4d,-0x10e)](_0xee0491);let _0xc5e33d=_0x8e8e35;function _0x178eee(_0x59f69a,_0x52007a,_0x561d76,_0x463fee){return _0x56ab14(_0x52007a- -0x215,_0x52007a-0x26,_0x561d76,_0x463fee-0xc3);}!_0x8e8e35[_0x178eee(0x242,0x224,0x25e,0x26d)](_0xddf4f1[_0x178eee(0x17a,0x1ab,0x158,0x23c)])&&(_0xc5e33d=_0x178eee(0x24c,0x25d,0x2c2,0x2dd)+_0x27c677(-0xf,0xc,0x5,-0x3d)+'4,'+_0x8e8e35);const _0x149f9e={};_0x149f9e[_0x27c677(-0x50,-0x91,-0x71,-0x5c)]=_0xc5e33d,_0x149f9e[_0x27c677(0x1a,0x54,0x23,0x9a)]=_0x27c677(-0x95,-0x16,-0x12c,-0x11d);const _0x41e20f={};_0x41e20f[_0x178eee(0x1e7,0x232,0x211,0x281)]=_0xddf4f1[_0x27c677(-0x66,0x2b,-0x28,-0xf2)],_0x41e20f[_0x178eee(0x294,0x225,0x27e,0x26a)]=_0x149f9e;function _0x27c677(_0xf82203,_0x220f0e,_0xd63de4,_0x4b3e26){return _0x56ab14(_0xf82203- -0x44c,_0x220f0e-0x4f,_0xd63de4,_0x4b3e26-0x64);}_0x4745be['push'](_0x41e20f);});const _0x3d4986={..._0x2cd607};_0x3d4986['content']=_0x4745be;function _0x56ab14(_0x1a119c,_0x5a1749,_0x2e6550,_0x253af4){return _0x49bc(_0x1a119c-0x2bf,_0x2e6550);}function _0x25dbae(_0x3c94bf,_0x3029ab,_0xc56389,_0x1655f6){return _0x49bc(_0xc56389- -0x33d,_0x3c94bf);}return _0x17f03b[_0x9a31ca]=_0x3d4986,_0x17f03b;}function findMessageIndexWithPlaceholder(_0x42cdb7,_0x2f451e){const _0x2104eb={};_0x2104eb[_0x31dede(0x427,0x3a2,0x3bc,0x3b0)]=function(_0x284583,_0x3900ff){return _0x284583<_0x3900ff;},_0x2104eb[_0x31dede(0x42a,0x3c5,0x3da,0x34c)]=function(_0x3d5fd7,_0x530559){return _0x3d5fd7===_0x530559;},_0x2104eb[_0x342c8c(0x214,0x1e1,0x1b0,0x12e)]='string',_0x2104eb[_0x31dede(0x347,0x354,0x3a8,0x382)]=_0x342c8c(0xa7,0x167,0x12e,0x18f);function _0x31dede(_0x5dfa9b,_0x370cbc,_0x1f31ed,_0x4e73ab){return _0x49bc(_0x1f31ed-0x2b8,_0x5dfa9b);}function _0x342c8c(_0x4c758c,_0x5a1088,_0x5cfd2a,_0x23acb5){return _0x49bc(_0x5cfd2a- -0xd,_0x5a1088);}_0x2104eb[_0x342c8c(0x183,0x1d6,0x174,0x1e9)]=function(_0x5f0288,_0x331066){return _0x5f0288!==_0x331066;},_0x2104eb[_0x31dede(0x32b,0x351,0x3c2,0x419)]=_0x342c8c(0x127,0x103,0xf5,0x67),_0x2104eb[_0x31dede(0x3a2,0x45b,0x438,0x3f5)]=_0x342c8c(0x210,0x15d,0x1f7,0x20a),_0x2104eb['zuyEl']=_0x342c8c(0x186,0xfd,0x123,0x16c);const _0x4147e1=_0x2104eb;for(let _0x1484c2=0x1927+-0x851+0x2*-0x86b;_0x4147e1[_0x342c8c(0x149,0xdf,0xf7,0xc8)](_0x1484c2,_0x42cdb7['length']);_0x1484c2++){const _0x5d6658=_0x42cdb7[_0x1484c2];if(_0x4147e1[_0x342c8c(0x13b,0x128,0x115,0x162)](typeof _0x5d6658['content'],_0x4147e1[_0x342c8c(0x1bb,0x175,0x1b0,0x1ff)])&&_0x5d6658[_0x31dede(0x46c,0x3ce,0x3fc,0x36d)][_0x342c8c(0x16a,0x149,0x10d,0x168)](_0x2f451e)){if(_0x31dede(0x448,0x3af,0x3f3,0x442)!==_0x4147e1[_0x342c8c(0x4f,0x164,0xe3,0x108)]){if(_0x7f3aa5){const _0x31c441=_0x40485e[_0x31dede(0x4e3,0x486,0x4bb,0x460)](_0x28f568,arguments);return _0x416263=null,_0x31c441;}}else return _0x1484c2;}else{if(Array[_0x342c8c(0x150,0x14d,0x121,0x148)](_0x5d6658['content']))for(const _0x27b567 of _0x5d6658['content']){if(_0x4147e1['oiqCN']('fElTI',_0x4147e1[_0x342c8c(0x11f,0xa3,0xfd,0x162)])){if(_0x4147e1[_0x31dede(0x367,0x437,0x3da,0x399)](_0x27b567[_0x342c8c(0x108,0x1e3,0x17b,0x1d5)],'text')&&_0x27b567[_0x31dede(0x4a5,0x3bb,0x448,0x3c3)][_0x31dede(0x43f,0x37c,0x3d2,0x34d)](_0x2f451e)){if(_0x4147e1[_0x342c8c(0x13d,0x1a5,0x115,0x15b)](_0x4147e1[_0x31dede(0x3f6,0x3a3,0x438,0x48b)],_0x4147e1[_0x31dede(0x424,0x4da,0x44c,0x4bd)])){const _0x251d07=_0x5e4412[_0x31dede(0x449,0x519,0x4bb,0x511)](_0x1c9397,arguments);return _0x370895=null,_0x251d07;}else return _0x1484c2;}}else return _0x1c65b7[_0x31dede(0x3df,0x415,0x454,0x43d)](_0x72c545=>_0x38d34b(_0x72c545,_0x102af9,_0x2be9a8,_0x138fc3));}}}return-(-0x147*-0x2+-0x628+0x39b);}function generateRequestId(){if(crypto&&crypto[_0xf605dd(0x1e1,0x208,0x1cd,0x154)])return crypto['randomUUID']();function _0x2d3d72(_0x4a678e,_0x29cf8b,_0x10e045,_0x52dfca){return _0x49bc(_0x52dfca- -0x2e2,_0x4a678e);}function _0xf605dd(_0x219c0,_0x41498b,_0x8d427,_0xdb080f){return _0x49bc(_0x219c0-0xdc,_0xdb080f);}return Date[_0xf605dd(0x27e,0x232,0x20d,0x2dd)]()['toString'](-0x1733+0xd9+0x167e)+Math[_0xf605dd(0x2e1,0x2e3,0x2d0,0x36a)]()['toString'](-0xa4c+-0x8bc+0x996*0x2)['substring'](-0x1dc2+-0x95*0x25+0x334d);}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){const _0xa53010={'FgaAo':function(_0x16be45,_0x36ed20){return _0x16be45!==_0x36ed20;},'TnyHE':function(_0x504a8f,_0x2412f5){return _0x504a8f(_0x2412f5);},'amptB':function(_0x23763e,_0x5a68c0){return _0x23763e===_0x5a68c0;},'rQdFb':_0x1c59ab(-0xb8,-0x118,-0xb2,-0xaa),'tUnsT':function(_0x360705){return _0x360705();},'MRiBZ':function(_0x5ab021,_0x297b06,_0x29a8c3){return _0x5ab021(_0x297b06,_0x29a8c3);}};function _0x1c59ab(_0x49d707,_0xe18ba1,_0x52d11d,_0xaaeee6){return _0x49bc(_0xaaeee6- -0x295,_0x52d11d);}return new Promise((_0x5ca8ea,_0x26380e)=>{const _0x2ba1a7={'GFxFi':function(_0x228d90,_0x551066){function _0x4c43be(_0x190b6a,_0x4713b9,_0x44b77c,_0x2fbdc1){return _0x49bc(_0x4713b9-0x3ac,_0x190b6a);}return _0xa53010[_0x4c43be(0x52d,0x4ca,0x43d,0x513)](_0x228d90,_0x551066);},'xWxBv':'KWnau','Hwcrc':function(_0x3c8db5,_0x331440){function _0x2842d0(_0x25f5f1,_0x1e3a59,_0x1939dc,_0x21a7b7){return _0x49bc(_0x25f5f1- -0xb3,_0x1e3a59);}return _0xa53010[_0x2842d0(0x6b,0xa5,-0x2,0x2f)](_0x3c8db5,_0x331440);},'VJZzT':function(_0x4ee2e8,_0x150047){return _0xa53010['TnyHE'](_0x4ee2e8,_0x150047);},'hRyQP':function(_0x41acfd,_0x45312c){function _0x42ba9d(_0x55d3f1,_0x519a4f,_0x3c257b,_0x2637a2){return _0x49bc(_0x519a4f-0x9b,_0x2637a2);}return _0xa53010[_0x42ba9d(0x16f,0x1ff,0x1af,0x29a)](_0x41acfd,_0x45312c);},'FcffR':_0xa53010[_0x21e928(-0x1a8,-0x145,-0x20a,-0x123)]},_0x5b880d=_0xa53010[_0x5e3ee5(0x1fa,0x235,0x16c,0x263)](generateRequestId);console['log'](_0x5e3ee5(0x251,0x1d4,0x236,0x2be)+'mptModify]'+_0x21e928(-0x1cb,-0x1ef,-0x1e4,-0x230)+'g\x20outfit\x20m'+'odify\x20prom'+_0x21e928(-0x1d4,-0x13d,-0x248,-0x215)+_0x5b880d+')');const _0x52a688=_0x171989=>{function _0x12da03(_0x388a73,_0x42d54f,_0xb1ae3e,_0x402e6a){return _0x5e3ee5(_0x402e6a- -0xe7,_0x42d54f,_0xb1ae3e-0x1dc,_0x402e6a-0xe7);}function _0x1833df(_0x3bcfd4,_0x1f5ab5,_0x406c3e,_0x3e202f){return _0x5e3ee5(_0x406c3e- -0x1c3,_0x3bcfd4,_0x406c3e-0x10e,_0x3e202f-0x178);}if(_0x2ba1a7[_0x1833df(0x111,0x141,0xd6,0xa6)](_0x2ba1a7['xWxBv'],_0x2ba1a7[_0x12da03(0x10a,0x14f,0x216,0x17d)]))_0x21bcbf['add'](_0x543969);else{if(_0x2ba1a7[_0x1833df(0x9a,0x74,0x3d,0x10)](_0x171989['id'],_0x5b880d))return;eventSource[_0x12da03(0x40,0xbc,0x100,0xb6)+_0x12da03(0x101,0x53,0x144,0xea)](eventNames['LLM_CHAR_M'+_0x1833df(0xa5,0x45,0x16,0x64)+_0x1833df(0x53,-0x9b,0x0,0x47)+'PONSE'],_0x52a688),_0x2ba1a7['VJZzT'](_0x5ca8ea,_0x171989[_0x12da03(0xcc,0x102,0xa3,0x132)]);}};function _0x21e928(_0x2c88a7,_0xe68cad,_0x53a953,_0xa2aae){return _0x1c59ab(_0x2c88a7-0x8c,_0xe68cad-0x90,_0x53a953,_0x2c88a7- -0x98);}function _0x5e3ee5(_0x4b19bd,_0x22817e,_0x4cc63e,_0x91bf73){return _0x1c59ab(_0x4b19bd-0x65,_0x22817e-0xa5,_0x22817e,_0x4b19bd-0x349);}eventSource['on'](eventNames[_0x5e3ee5(0x1e8,0x206,0x252,0x199)+'ODIFY_GET_'+_0x5e3ee5(0x1c3,0x1fc,0x20c,0x21e)+_0x5e3ee5(0x201,0x23c,0x21b,0x273)],_0x52a688);const _0x1872d1={};_0x1872d1['id']=_0x5b880d,eventSource[_0x5e3ee5(0x2bf,0x28e,0x23c,0x260)](eventNames[_0x5e3ee5(0x1e8,0x245,0x211,0x24c)+_0x21e928(-0x208,-0x275,-0x1af,-0x1fb)+_0x5e3ee5(0x19b,0x106,0x154,0x120)+'UEST'],_0x1872d1),_0xa53010[_0x5e3ee5(0x2a1,0x22a,0x2fb,0x2c5)](setTimeout,()=>{function _0xc9853c(_0x4ab625,_0x4c104a,_0x20d42c,_0x38e2fe){return _0x21e928(_0x4ab625-0x433,_0x4c104a-0x185,_0x4c104a,_0x38e2fe-0xe1);}function _0x5cfaba(_0x43d592,_0xa91902,_0x3f0c48,_0xcbcb93){return _0x21e928(_0xcbcb93-0x655,_0xa91902-0xf1,_0xa91902,_0xcbcb93-0x193);}if(_0x2ba1a7[_0x5cfaba(0x4fb,0x4af,0x45f,0x484)](_0xc9853c(0x272,0x30c,0x306,0x275),_0x2ba1a7[_0xc9853c(0x1e8,0x23e,0x248,0x228)]))return _0xba4aa7;else eventSource['removeList'+_0x5cfaba(0x4d0,0x410,0x3d1,0x445)](eventNames['LLM_CHAR_M'+_0x5cfaba(0x445,0x4bd,0x3d4,0x44d)+_0x5cfaba(0x3cf,0x40a,0x481,0x437)+'PONSE'],_0x52a688),_0x26380e(new Error('获取服装修改提示词超'+'时'));},0x1*-0x12f1+0xd15+-0x64*-0x73);});}export function LLM_OUTFIT_MODIFY(_0x2d4003,_0x3de0c7={}){function _0x45203f(_0x55bccd,_0x2f8bf9,_0x5105a9,_0xb52f5e){return _0x49bc(_0xb52f5e-0x1fc,_0x2f8bf9);}const _0x4567d0={'LowGQ':function(_0x460bff,_0x2166be){return _0x460bff===_0x2166be;},'pivDH':function(_0x2f091f,_0x3cc7c4){return _0x2f091f!==_0x3cc7c4;},'voGQp':_0x45203f(0x3fb,0x3f9,0x428,0x3bc),'tvlEv':function(_0x21bd25,_0x4608ea){return _0x21bd25(_0x4608ea);},'Rppqk':'(((.+)+)+)'+'+$','ajitR':function(_0x30c972){return _0x30c972();},'wbIuG':function(_0x187a80,_0x4127aa,_0x5177f6){return _0x187a80(_0x4127aa,_0x5177f6);}};return new Promise((_0x5c4121,_0xcfcbab)=>{const _0x480584={};_0x480584[_0x32b078(-0x167,-0x1a6,-0x140,-0x159)]=_0x4567d0[_0x32b078(-0x241,-0x26d,-0x210,-0x28b)];function _0x32b078(_0x3b96fe,_0x5d0ebd,_0x58ca33,_0x181eb3){return _0x45203f(_0x3b96fe-0xea,_0x3b96fe,_0x58ca33-0x3e,_0x5d0ebd- -0x5a1);}const _0x3cceda=_0x480584,_0x3c1b67=_0x4567d0[_0x32b078(-0x2a7,-0x2a8,-0x321,-0x2a3)](generateRequestId),_0x183389=_0x3de0c7['timeoutMs']||-0x12036+0x28*0x2f0+0x19516;console[_0x32b078(-0x2fb,-0x2c6,-0x313,-0x28b)](_0x32b078(-0x180,-0x208,-0x18a,-0x229)+_0x32b078(-0x239,-0x1c2,-0x22e,-0x1ea)+_0x2a4bb5(0x3d8,0x43e,0x418,0x43e)+_0x32b078(-0x2d6,-0x29a,-0x204,-0x292)+_0x32b078(-0x289,-0x238,-0x1ee,-0x25e)+'equest\x20(ID'+':\x20'+_0x3c1b67+')');const _0x52489b=_0x1fb8b4=>{function _0x234459(_0x261202,_0x5ef132,_0x45aa74,_0x352873){return _0x32b078(_0x261202,_0x5ef132-0x4cd,_0x45aa74-0x105,_0x352873-0x44);}function _0x3eb873(_0x2f864a,_0x276952,_0x5228e9,_0x569041){return _0x2a4bb5(_0x5228e9,_0x276952- -0x1c7,_0x5228e9-0x1f2,_0x569041-0x8e);}if(_0x4567d0[_0x3eb873(0x1c6,0x219,0x181,0x1e9)](_0x234459(0x270,0x227,0x1e8,0x1c6),_0x3eb873(0x231,0x251,0x1e4,0x21b)))return _0xf89df[_0x234459(0x2d2,0x2de,0x2b0,0x309)]()[_0x3eb873(0x104,0x17d,0x1f6,0x207)](ArhOyA[_0x234459(0x309,0x327,0x3ab,0x39c)])[_0x3eb873(0x2aa,0x23d,0x20a,0x263)]()[_0x234459(0x2b1,0x290,0x25c,0x2cc)+'r'](_0x52ff12)[_0x3eb873(0x158,0x17d,0x20d,0x1c1)](ArhOyA[_0x234459(0x36d,0x327,0x2bc,0x2f2)]);else{if(_0x4567d0['pivDH'](_0x1fb8b4['id'],_0x3c1b67))return;eventSource[_0x3eb873(0x139,0x170,0x120,0x205)+_0x3eb873(0x207,0x1a4,0x138,0x1f8)](eventNames[_0x234459(0x1d1,0x25c,0x1ec,0x249)+_0x3eb873(0x222,0x239,0x1f9,0x20e)+_0x234459(0x33a,0x30c,0x28f,0x3a6)],_0x52489b);if(_0x1fb8b4['success']){if('fBGMB'!==_0x4567d0[_0x3eb873(0x228,0x1b4,0x15d,0x11b)])return _0x3c61eb;else _0x4567d0[_0x3eb873(0x230,0x1e2,0x1e4,0x248)](_0x5c4121,_0x1fb8b4['result']);}else _0xcfcbab(new Error(_0x1fb8b4['result']||_0x234459(0x222,0x219,0x1f4,0x1f3)));}};eventSource['on'](eventNames[_0x2a4bb5(0x3a0,0x382,0x397,0x384)+_0x2a4bb5(0x410,0x400,0x468,0x46d)+_0x32b078(-0x178,-0x1c1,-0x22f,-0x21b)],_0x52489b);const _0x14bd89={};_0x14bd89[_0x32b078(-0x235,-0x240,-0x1ff,-0x295)]=_0x2d4003,_0x14bd89['id']=_0x3c1b67,eventSource[_0x32b078(-0x184,-0x19a,-0x1d2,-0x191)](eventNames['LLM_CHAR_M'+_0x2a4bb5(0x2f7,0x347,0x2f0,0x2e7)+'EST'],_0x14bd89);function _0x2a4bb5(_0x311e6f,_0x58c92a,_0x3a8645,_0x4fc89c){return _0x45203f(_0x311e6f-0x1dd,_0x311e6f,_0x3a8645-0x1ae,_0x58c92a-0x52);}_0x4567d0[_0x2a4bb5(0x3e9,0x456,0x4ad,0x4b0)](setTimeout,()=>{function _0x50f0e0(_0x5565c3,_0x40d06c,_0x1587ce,_0x4561b7){return _0x2a4bb5(_0x40d06c,_0x5565c3- -0x331,_0x1587ce-0xe3,_0x4561b7-0x17d);}function _0x5d8823(_0x248b18,_0x4b1e13,_0x42d01c,_0x22e5b6){return _0x32b078(_0x4b1e13,_0x22e5b6-0x9d,_0x42d01c-0x92,_0x22e5b6-0x3a);}eventSource[_0x5d8823(-0x22e,-0x26f,-0x1fe,-0x21f)+'ener'](eventNames[_0x50f0e0(0x51,0x92,0x7c,0x7c)+_0x5d8823(-0xda,-0xf6,-0x11b,-0x156)+_0x5d8823(-0x155,-0x180,-0x1a1,-0x124)],_0x52489b),_0xcfcbab(new Error('服装修改\x20LLM\x20请'+_0x5d8823(-0x1c3,-0x1ea,-0x1f0,-0x201)));},_0x183389);});}function preprocessTagContent(_0x4e88c4){let _0x7aa7a7=_0x4e88c4[_0x47dca9(0x113,0x1d4,0x1ae,0x148)](/:/g,':')[_0x47dca9(0x212,0x154,0x1ae,0x1e9)](/\(/g,'（')[_0x47dca9(0x113,0x212,0x1ae,0x138)](/\)/g,'）')[_0x38214a(0xe8,0xc1,0x103,0x13b)](/,/g,',');function _0x38214a(_0x2dd94b,_0x3eba57,_0x6b347a,_0x386b01){return _0x49bc(_0x386b01- -0x5,_0x3eba57);}function _0x47dca9(_0x3373de,_0x35b603,_0x56657e,_0x1f758a){return _0x49bc(_0x56657e-0x6e,_0x3373de);}return _0x7aa7a7;}function parseOutfitData(_0x4a9d8f){const _0x334289={};_0x334289[_0x5e6c84(-0xaa,-0x89,0x1f,-0x2a)]=_0x25541b(0x40f,0x413,0x46e,0x4a4),_0x334289['jSvpw']=_0x5e6c84(-0x78,-0x49,-0xac,-0x59),_0x334289[_0x5e6c84(-0x6f,-0x6a,-0xf1,-0x56)]=_0x5e6c84(0x4c,-0xb9,0x65,-0x34),_0x334289[_0x5e6c84(0x1b,-0x116,0x17,-0x7d)]=_0x25541b(0x3a1,0x49d,0x49e,0x429),_0x334289['tfxrk']=_0x25541b(0x3fd,0x379,0x44f,0x3bf)+'ack',_0x334289[_0x5e6c84(0x94,-0x7f,-0x25,0x8)]='fullBody',_0x334289['tBRzb']='fullBodyBa'+'ck',_0x334289[_0x25541b(0x3c2,0x3b5,0x48f,0x438)]=function(_0x337dbc,_0x2322e1){return _0x337dbc===_0x2322e1;},_0x334289[_0x5e6c84(-0x141,-0x10c,-0xf1,-0xbb)]=function(_0x1d8028,_0xeb6fd1){return _0x1d8028+_0xeb6fd1;},_0x334289[_0x5e6c84(-0x50,-0xba,-0xb7,-0x96)]=function(_0x5ac3ea,_0x334ea1){return _0x5ac3ea!==_0x334ea1;},_0x334289[_0x5e6c84(-0x57,-0x9d,-0x124,-0xd4)]=_0x5e6c84(-0xd8,-0xcf,-0xec,-0xc8),_0x334289[_0x25541b(0x401,0x4c2,0x4d0,0x488)]=function(_0x14cc10,_0x3c9e05){return _0x14cc10&&_0x3c9e05;},_0x334289[_0x25541b(0x3c5,0x455,0x414,0x445)]='GSBed',_0x334289['uFICd']='[outfitPro'+_0x25541b(0x4c3,0x451,0x457,0x4c5)+'\x20解析到的服装数据:';const _0x5f5dda=_0x334289,_0x234d88=_0x4a9d8f[_0x5e6c84(-0x4b,-0x8a,-0x45,-0xb4)]('\x0a')[_0x25541b(0x4e6,0x418,0x436,0x47e)](_0x45cbb2=>_0x45cbb2['trim']())[_0x5e6c84(0x4b,0x34,0x6d,0x1)](_0x47463b=>_0x47463b),_0x1065fb={};_0x1065fb[_0x5e6c84(-0xcd,-0x7a,-0x7c,-0x59)]='';function _0x25541b(_0x4cd6a7,_0x3f1c86,_0x20ff2c,_0x39084e){return _0x49bc(_0x39084e-0x2e2,_0x4cd6a7);}_0x1065fb['nameEN']='',_0x1065fb[_0x25541b(0x406,0x45c,0x3c2,0x429)]='',_0x1065fb[_0x5e6c84(-0x196,-0xed,-0xa1,-0x113)+'ack']='',_0x1065fb[_0x25541b(0x3e3,0x478,0x467,0x47a)]='',_0x1065fb[_0x5e6c84(0x3d,-0x28,0x64,-0x1b)+'ck']='';const _0x241761=_0x1065fb,_0x5ab75c={};_0x5ab75c[_0x25541b(0x3bd,0x433,0x421,0x437)]=_0x5f5dda[_0x25541b(0x497,0x416,0x4fc,0x478)],_0x5ab75c[_0x5e6c84(-0x13f,-0xa9,-0x95,-0x11a)]=_0x5f5dda[_0x25541b(0x4b1,0x50b,0x4fe,0x47c)],_0x5ab75c[_0x25541b(0x506,0x510,0x46f,0x49c)]=_0x5f5dda[_0x25541b(0x4b6,0x487,0x3c2,0x455)],_0x5ab75c[_0x5e6c84(-0x4d,-0x10d,-0x42,-0x93)]=_0x5f5dda[_0x25541b(0x540,0x4cc,0x4fe,0x4b2)],_0x5ab75c['下半身']=_0x5f5dda['iHyzC'],_0x5ab75c[_0x5e6c84(-0xa8,-0xc0,-0xc9,-0xcd)]=_0x25541b(0x478,0x40d,0x50e,0x47a),_0x5ab75c[_0x5e6c84(-0x12e,-0x114,-0x44,-0xa2)]=_0x5f5dda[_0x5e6c84(-0xae,-0xb9,-0x99,-0x9c)];function _0x5e6c84(_0x5d3bb3,_0xdf32ac,_0x1575c2,_0x1a2e55){return _0x49bc(_0x1a2e55- -0x1f0,_0x5d3bb3);}const _0x30111a=_0x5ab75c;for(const _0x22a9aa of _0x234d88){const _0x4f8aec=_0x22a9aa[_0x25541b(0x3e3,0x413,0x48c,0x461)](':');if(_0x5f5dda[_0x5e6c84(-0x105,-0x5f,-0x122,-0x9a)](_0x4f8aec,-(-0x1039*0x2+0x1a37+0x63c*0x1)))continue;const _0x2b6c4e=_0x22a9aa['substring'](0x10*0x21f+-0x5f9*-0x2+-0x2de2,_0x4f8aec)[_0x5e6c84(0x46,-0x33,-0x3a,-0x44)](),_0x23a12a=_0x22a9aa[_0x25541b(0x395,0x483,0x471,0x41b)](_0x5f5dda['tDyiF'](_0x4f8aec,0x179f+0xf9f+-0x273d))['trim']();if(_0x30111a[_0x2b6c4e]){if(_0x5f5dda[_0x5e6c84(-0x2c,-0xfc,-0x125,-0x96)](_0x5f5dda[_0x25541b(0x3b5,0x3c4,0x485,0x3fe)],_0x5f5dda[_0x5e6c84(-0xba,-0xc2,-0x154,-0xd4)])){_0x260ecc[_0x25541b(0x41b,0x3c3,0x3ca,0x3ce)](_0x5f5dda['oyBBF']);return;}else _0x241761[_0x30111a[_0x2b6c4e]]=_0x23a12a;}else _0x5f5dda['ctgmr'](_0x2b6c4e,_0x23a12a)&&(_0x5f5dda[_0x25541b(0x406,0x49e,0x3f0,0x438)](_0x5e6c84(0x4e,-0x14,-0x7d,-0x2d),_0x5f5dda['llWVn'])?console['log'](_0x5e6c84(-0xa0,-0x67,-0xd8,-0x53)+_0x25541b(0x537,0x446,0x4b3,0x4c5)+'\x20未识别的服装字段\x20'+'\x22'+_0x2b6c4e+'\x22'):_0x5e3ebc[_0x351c6c]=_0x316e38[_0x28a7a2]);}if(!_0x241761[_0x5e6c84(-0x23,-0x84,-0x26,-0x59)])return null;return console[_0x25541b(0x404,0x3c9,0x330,0x3c1)](_0x5f5dda[_0x25541b(0x4c0,0x4eb,0x4cf,0x45b)],_0x241761),_0x241761;}function extractOutfitTags(_0x1f6d0a){const _0x5c3bf8={'AAWeE':function(_0x4170d3,_0x41fa77){return _0x4170d3!==_0x41fa77;},'XAFXm':function(_0x258a89,_0x31ebbb){return _0x258a89(_0x31ebbb);},'xIvFN':function(_0x49b121,_0x1c5c40){return _0x49b121(_0x1c5c40);}},_0x46341f={};_0x46341f[_0x17c7fa(0x186,0x160,0x155,0xe8)]=[];function _0x17c7fa(_0x52bf4c,_0x1d9844,_0x1f82f3,_0x7bcc87){return _0x49bc(_0x1f82f3- -0x59,_0x1d9844);}const _0x277a86=_0x46341f;function _0x55edc0(_0x3343ea,_0x4d8ad7,_0x1d1304,_0xe0e021){return _0x49bc(_0x3343ea- -0x1d4,_0x4d8ad7);}_0x1f6d0a=_0x1f6d0a['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x55edc0(-0x28,0x2d,-0x1,-0x88)]();const _0x186159=/<服装>([\s\S]*?)<\/服装>/g;let _0x22199c;while(_0x5c3bf8[_0x17c7fa(0x9c,0x143,0x129,0x124)](_0x22199c=_0x186159['exec'](_0x1f6d0a),null)){const _0x571c8b=_0x5c3bf8['XAFXm'](preprocessTagContent,_0x22199c[-0x43*-0x1+0x28c*-0x3+0x762]),_0x403c16=_0x5c3bf8[_0x17c7fa(0x1b8,0x147,0x1b1,0x1cd)](parseOutfitData,_0x571c8b);_0x403c16&&_0x277a86[_0x17c7fa(0xf4,0x1d5,0x155,0x114)][_0x17c7fa(0xcc,0x22,0x9e,0x84)](_0x403c16);}return _0x277a86;}function getCurrentOutfitPreset(){function _0x2c8998(_0x5a3087,_0x3054eb,_0x251a68,_0x14bc98){return _0x49bc(_0x251a68- -0x3b1,_0x3054eb);}function _0x748a79(_0x2f4f2e,_0x2d346b,_0x4fd2e7,_0xff447f){return _0x49bc(_0x2d346b-0x3af,_0x2f4f2e);}const _0x5f0bb2=extension_settings[extensionName],_0x261dad=_0x5f0bb2[_0x2c8998(-0x292,-0x1c6,-0x235,-0x27d)+_0x748a79(0x527,0x49d,0x489,0x449)];if(!_0x261dad||!_0x5f0bb2[_0x748a79(0x5bd,0x52b,0x5a0,0x491)+_0x2c8998(-0x21b,-0x1e4,-0x211,-0x1db)][_0x261dad])return null;const _0x374fa1={};return _0x374fa1['id']=_0x261dad,_0x374fa1[_0x748a79(0x57e,0x5a2,0x536,0x62d)]=_0x5f0bb2[_0x748a79(0x53f,0x52b,0x54c,0x591)+_0x2c8998(-0x182,-0x252,-0x211,-0x24a)][_0x261dad],_0x374fa1;}function buildOutfitText(_0x543d1f){const _0x201a95={};_0x201a95[_0x829c74(0x3ce,0x464,0x4d9,0x41f)]=_0x829c74(0x4eb,0x47e,0x41d,0x502),_0x201a95[_0x829c74(0x416,0x40b,0x3c8,0x45e)]='</服装>';const _0x280ccf=_0x201a95,_0x3b3c85=_0x543d1f[_0x829c74(0x491,0x4ee,0x559,0x462)];let _0x3e0349=_0x280ccf[_0xb2566(0x2bd,0x3ab,0x35f,0x355)];_0x3e0349+=_0xb2566(0x313,0x345,0x3cd,0x37d)+(_0x3b3c85['nameCN']||'')+'\x0a',_0x3e0349+=_0x829c74(0x46c,0x461,0x3e2,0x4ab)+(_0x3b3c85[_0xb2566(0x400,0x36d,0x40a,0x3a8)]||'')+'\x0a';function _0x829c74(_0x21f494,_0x5439c7,_0x1fd8ea,_0x36db12){return _0x49bc(_0x5439c7-0x2fb,_0x21f494);}_0x3e0349+=_0xb2566(0x3cf,0x2fe,0x305,0x38f)+(_0x3b3c85[_0xb2566(0x2cf,0x29d,0x383,0x333)]||'')+'\x0a';function _0xb2566(_0x33fa41,_0x4a7af2,_0xceff1,_0x4bda3e){return _0x49bc(_0x4bda3e-0x1ec,_0x33fa41);}return _0x3e0349+='上半身背面:\x20'+(_0x3b3c85[_0xb2566(0x2b0,0x34c,0x2bd,0x2c9)+'ack']||'')+'\x0a',_0x3e0349+=_0xb2566(0x35b,0x317,0x2db,0x33e)+(_0x3b3c85[_0xb2566(0x3de,0x328,0x359,0x384)]||'')+'\x0a',_0x3e0349+=_0xb2566(0x362,0x41b,0x403,0x3e9)+(_0x3b3c85[_0x829c74(0x468,0x4d0,0x481,0x4a2)+'ck']||'')+'\x0a',_0x3e0349+=_0x280ccf['psnXe'],_0x3e0349;}export async function handleOutfitPromptModify(_0x34ab71,_0xa6ec4a=[]){function _0x55b0f7(_0x1a9487,_0x1ab823,_0x974938,_0x4a0d3f){return _0x49bc(_0x4a0d3f- -0x118,_0x974938);}const _0x53ee37={'abwlx':function(_0x3df49f,_0xff1bba,_0xb4c92c,_0xc68ba8,_0x94b605){return _0x3df49f(_0xff1bba,_0xb4c92c,_0xc68ba8,_0x94b605);},'mGoaD':_0x55b0f7(-0x2c,-0x72,0x6f,0x7)+_0x166569(0x364,0x44e,0x471,0x3f6),'NIJOf':'[outfitPro'+_0x166569(0x56b,0x573,0x52b,0x4f3)+_0x166569(0x4c5,0x514,0x539,0x4d4)+_0x166569(0x535,0x4ca,0x459,0x4bd)+'debugging:','hLNnz':_0x55b0f7(0xae,0xef,0x1d,0x6c),'mpedj':_0x55b0f7(0x98,0x5a,0x6a,0x85)+'mptModify]'+_0x55b0f7(0x147,0x4e,0x1c,0xb1)+_0x55b0f7(0xa1,0x66,0x8e,0xd4)+_0x55b0f7(0xec,-0x3c,0x78,0x59)+_0x166569(0x4d9,0x49d,0x484,0x4ff)+'.','gyQrK':_0x166569(0x507,0x468,0x4a9,0x477)+'改请求...','PhOct':function(_0x5c0205){return _0x5c0205();},'SjkoP':_0x166569(0x46f,0x483,0x45b,0x40a),'DRznB':_0x166569(0x449,0x511,0x459,0x4ad)+'mptModify]'+_0x55b0f7(-0x1f,0x94,-0x2f,0x27)+'reset:','tjSrM':function(_0x36774d,_0x2d78b7){return _0x36774d||_0x2d78b7;},'IpHcc':function(_0x27a5ee,_0x3ed8ca,_0x231108){return _0x27a5ee(_0x3ed8ca,_0x231108);},'Tdqzm':_0x55b0f7(0x82,0x77,0xaa,0xb7)+'y','kyLvt':'{{用户需求}}','bkFsY':_0x55b0f7(0x42,0x10e,0x85,0x85)+_0x55b0f7(0x30,0x50,0xaf,0xcb)+'\x20User\x20requ'+_0x55b0f7(-0x5f,-0x5,0x0,-0x23)+_0x55b0f7(-0x99,-0x9e,0x79,-0xa)+'x:','MyXjy':'{{当前服装}}','siLyO':function(_0x6d85a7,_0x48a7da,_0x5da1b0,_0x18aa9e,_0x8370cc){return _0x6d85a7(_0x48a7da,_0x5da1b0,_0x18aa9e,_0x8370cc);},'cLfVs':_0x166569(0x3ec,0x488,0x480,0x442),'cNfDq':function(_0x38958f,_0x2f25b8){return _0x38958f||_0x2f25b8;},'uUORv':function(_0x17ad05,_0x1bfaef,_0x1b43fe,_0x21ec44,_0x1bf553){return _0x17ad05(_0x1bfaef,_0x1b43fe,_0x21ec44,_0x1bf553);},'yomPG':'{{当前角色}}','VCKDU':function(_0x1867ba,_0x5bc98a,_0x51817c,_0x3f9326,_0xc9e834){return _0x1867ba(_0x5bc98a,_0x51817c,_0x3f9326,_0xc9e834);},'HwKpR':_0x55b0f7(0x36,-0x28,0x51,-0x2),'OdQeH':'{{角色启用列表}}','NKqvU':function(_0x513b12,_0x212877,_0x1d68e0,_0x5b9c4f,_0x5a16e5){return _0x513b12(_0x212877,_0x1d68e0,_0x5b9c4f,_0x5a16e5);},'HInNW':_0x166569(0x579,0x517,0x4fc,0x50a)+'}}','zHFLd':'[outfitPro'+'mptModify]'+'\x20Final\x20pro'+_0x55b0f7(0x28,-0x6d,-0x9b,-0x12),'sCsAl':function(_0x3b7f83,_0x5dfad1){return _0x3b7f83>_0x5dfad1;},'eTXJE':function(_0x3d503e,_0x4b41c3){return _0x3d503e===_0x4b41c3;},'COpRN':_0x55b0f7(-0x5c,0x26,0x95,-0x5),'VfZTG':function(_0x5f55ff,_0x52a868){return _0x5f55ff>=_0x52a868;},'bQZaZ':function(_0x51b13c,_0x20eb25){return _0x51b13c!==_0x20eb25;},'UXOlP':_0x166569(0x4b5,0x4bc,0x3be,0x459),'JSkKx':function(_0x11b594,_0x9ad867,_0x1a23f4,_0x109dbe,_0x5acfb2){return _0x11b594(_0x9ad867,_0x1a23f4,_0x109dbe,_0x5acfb2);},'TXLkq':_0x166569(0x4c1,0x487,0x564,0x4ee),'BYQRd':function(_0x357880,_0x1f6b92,_0x58cc73){return _0x357880(_0x1f6b92,_0x58cc73);},'BkwJo':function(_0x2493ab,_0x51a479,_0x548f02){return _0x2493ab(_0x51a479,_0x548f02);},'dTmWy':_0x55b0f7(0x4f,0x17,0x77,0x5f),'WYjxZ':'LLM\x20返回结果为空','QMIQV':function(_0x2fa69b,_0x5d10ea){return _0x2fa69b(_0x5d10ea);},'VCSur':_0x166569(0x3fe,0x46f,0x451,0x499),'TMBUT':_0x166569(0x443,0x4b5,0x458,0x4ad)+_0x55b0f7(0x15e,0x53,0x158,0xcb)+'\x20Error:'};function _0x166569(_0x50429f,_0x75232c,_0x167634,_0x155906){return _0x49bc(_0x155906-0x310,_0x50429f);}console[_0x166569(0x354,0x3b3,0x441,0x3ef)](_0x53ee37['mpedj']),toastr['info'](_0x53ee37[_0x166569(0x58a,0x575,0x4ad,0x4f7)]);try{const _0x512af2=extension_settings[extensionName],_0x21f9da=_0x53ee37[_0x55b0f7(0x57,0xb,-0x9c,-0x3d)](getCurrentOutfitPreset);if(!_0x21f9da){if(_0x53ee37['SjkoP']!==_0x53ee37['SjkoP'])_0x2e3632[_0x17478f]=_0x53ee37[_0x55b0f7(0xea,0x13d,0xe9,0xdc)](_0xe793f0,_0x16871[_0x20d4f8],_0x1ff62e,_0x3a041b,_0x25ba3c);else{toastr['error'](_0x55b0f7(-0x8,0x2a,0x11,0x6c));return;}}console[_0x166569(0x3b6,0x3c9,0x3f2,0x3ef)](_0x53ee37['DRznB'],_0x21f9da['id']);const _0xfe9c1c=buildOutfitText(_0x21f9da),_0x4ac3a4=[_0x53ee37[_0x55b0f7(0x11e,0x10c,0x81,0xbf)](_0x34ab71,''),_0xfe9c1c][_0x166569(0x4d5,0x568,0x54a,0x501)](Boolean)[_0x55b0f7(0x119,0x154,0x14e,0xd6)]('\x0a');let _0x3a23e2=_0x53ee37['IpHcc'](buildPromptForRequestType,_0x53ee37[_0x55b0f7(-0x1d,0x70,-0x28,0x11)],_0x4ac3a4);const _0x1aef49=new Set(),_0x120329=_0x53ee37[_0x166569(0x4dd,0x47c,0x4c4,0x458)](findMessageIndexWithPlaceholder,_0x3a23e2,_0x53ee37[_0x55b0f7(0x13a,0x14e,0x10e,0xbc)]);console[_0x55b0f7(0x38,-0x64,-0xc1,-0x39)](_0x53ee37[_0x166569(0x4f0,0x497,0x4c7,0x461)],_0x120329),_0x3a23e2=_0x53ee37[_0x55b0f7(0x62,0xf2,0x115,0xdc)](replacePlaceholder,_0x3a23e2,_0x53ee37[_0x166569(0x455,0x4ba,0x432,0x46f)],_0xfe9c1c,_0x1aef49),_0x3a23e2=_0x53ee37['siLyO'](replacePlaceholder,_0x3a23e2,_0x53ee37[_0x166569(0x4da,0x54e,0x465,0x4f8)],_0xfe9c1c,_0x1aef49),_0x3a23e2=replacePlaceholder(_0x3a23e2,'{{用户需求}}',_0x53ee37[_0x166569(0x44a,0x468,0x470,0x3f3)](_0x34ab71,''),_0x1aef49),_0x3a23e2=_0x53ee37[_0x166569(0x482,0x491,0x4f0,0x49b)](replacePlaceholder,_0x3a23e2,_0x53ee37[_0x166569(0x4be,0x47c,0x526,0x516)],'',_0x1aef49),_0x3a23e2=_0x53ee37[_0x55b0f7(0xdf,0xe8,0x125,0xdd)](replacePlaceholder,_0x3a23e2,_0x53ee37[_0x166569(0x48e,0x449,0x4e8,0x4c9)],'',_0x1aef49),_0x3a23e2=_0x53ee37['abwlx'](replacePlaceholder,_0x3a23e2,_0x166569(0x43b,0x415,0x419,0x45f),'',_0x1aef49),_0x3a23e2=replacePlaceholder(_0x3a23e2,_0x53ee37['OdQeH'],'',_0x1aef49),_0x3a23e2=_0x53ee37[_0x55b0f7(0xd5,0xd8,0x42,0x60)](replacePlaceholder,_0x3a23e2,_0x53ee37['HInNW'],'',_0x1aef49),_0x3a23e2=_0x53ee37[_0x55b0f7(0x5f,0xa4,0x9d,0x60)](replacePlaceholder,_0x3a23e2,'{{通用角色启用列表'+'}}','',_0x1aef49),console[_0x166569(0x44c,0x3eb,0x37f,0x3ef)](_0x53ee37[_0x55b0f7(-0x9c,-0xb1,-0x79,-0x18)],_0x3a23e2);let _0x221d9c='';_0x53ee37[_0x166569(0x3e3,0x4c6,0x47c,0x470)](_0x1aef49[_0x55b0f7(0x133,0xd6,0x57,0xc8)],-0x14f*0x19+0x27*0xa6+0x76d)&&(_0x53ee37[_0x166569(0x3c9,0x412,0x4a9,0x43b)](_0x53ee37[_0x55b0f7(0xa0,0x84,0x108,0xde)],_0x53ee37[_0x166569(0x526,0x587,0x49c,0x506)])?_0x221d9c=_0x166569(0x4ca,0x449,0x531,0x4d5)+_0x166569(0x57e,0x540,0x52b,0x4f1)+[..._0x1aef49]['join']('、')+'\x0a':_0xbd6f25=_0x166569(0x47f,0x45b,0x50b,0x4d5)+'被使用：'+[..._0x1120f4]['join']('、')+'\x0a');if(_0xa6ec4a&&_0xa6ec4a[_0x166569(0x495,0x40b,0x3dc,0x428)]>0x4*0x692+-0xe5*-0x5+-0x1*0x1ec1&&_0x53ee37['VfZTG'](_0x120329,-0x1*0x473+0x1a3*0x7+-0x702)){if(_0x53ee37[_0x166569(0x526,0x51c,0x513,0x4e8)](_0x55b0f7(0x8a,-0x1f,0xe4,0x76),_0x53ee37['UXOlP']))_0x3a23e2=_0x53ee37['JSkKx'](attachImagesToMessage,_0x3a23e2,_0x120329,_0xa6ec4a,_0x53ee37['TXLkq']),console[_0x55b0f7(-0x4e,-0x44,0x4e,-0x39)](_0x166569(0x4cb,0x421,0x4c7,0x4ad)+'mptModify]'+'\x20Attached',_0xa6ec4a['length'],'images\x20to\x20'+_0x55b0f7(0xa5,0x50,0xee,0x6e)+_0x166569(0x529,0x4cb,0x484,0x4b8),_0x120329);else{_0x31a92f[_0x55b0f7(0x85,0xb8,0x82,0xc1)](_0x53ee37[_0x166569(0x480,0x3d8,0x40f,0x46e)]),_0x3bdf0b['log'](_0x53ee37[_0x166569(0x3ed,0x381,0x3b6,0x3fb)],_0x307601);return;}}_0x53ee37[_0x55b0f7(-0x96,0x4f,-0x9f,-0x7)](updateCombinedPrompt,_0x3a23e2,_0x221d9c);const _0x36ab27={};_0x36ab27['timeoutMs']=0x493e0;const _0x59ed53=await _0x53ee37[_0x166569(0x3d8,0x445,0x375,0x3f0)](LLM_OUTFIT_MODIFY,_0x3a23e2,_0x36ab27);console[_0x55b0f7(-0x32,0x1a,-0x3b,-0x39)](_0x55b0f7(0x18,-0x13,-0xb,0x85)+_0x55b0f7(0x100,0xd3,0x9f,0xcb)+'\x20LLM\x20outpu'+'t:',_0x59ed53);if(!_0x59ed53){if(_0x53ee37['dTmWy']===_0x53ee37[_0x166569(0x46f,0x50d,0x46f,0x4f6)]){toastr[_0x166569(0x3bc,0x3ae,0x478,0x3fc)](_0x53ee37[_0x55b0f7(0x3b,0x30,-0x16,0x3b)]);return;}else{_0x4f8191['error'](_0x53ee37[_0x55b0f7(0x2f,0x84,0x125,0x93)]);return;}}const _0xafe0bc=_0x53ee37[_0x166569(0x56c,0x4d3,0x501,0x4de)](extractOutfitTags,_0x59ed53);if(_0x53ee37[_0x166569(0x3d7,0x498,0x460,0x43b)](_0xafe0bc[_0x166569(0x533,0x46c,0x4ca,0x4be)][_0x55b0f7(0x54,0x25,-0x71,0x0)],-0x5a1+-0x34*0x2d+-0x1*-0xec5)){toastr[_0x166569(0x497,0x535,0x489,0x4e9)](_0x53ee37['mGoaD']),console[_0x55b0f7(0x31,-0x5b,0x36,-0x39)]('[outfitPro'+'mptModify]'+_0x55b0f7(0xbc,0x106,0x41,0xac)+_0x55b0f7(0x76,0x105,0xbd,0x95)+_0x55b0f7(-0x7b,-0x3a,0x89,0x12),_0x59ed53);return;}console['log'](_0x55b0f7(0x21,0x1b,0x4c,0x85)+_0x166569(0x4b4,0x4ab,0x51a,0x4f3)+'\x20Extracted'+_0x166569(0x454,0x447,0x451,0x44e),_0xafe0bc);const _0x167fa9=_0xafe0bc[_0x166569(0x552,0x501,0x53c,0x4be)][0x34b*0x8+0x163b+-0x3093];await _0x53ee37['BkwJo'](updateOutfitPresetFromLLM,_0x21f9da['id'],_0x167fa9),toastr[_0x166569(0x3f9,0x458,0x508,0x47a)](_0x53ee37[_0x55b0f7(0x79,0x119,0x123,0xb0)]);}catch(_0x2a62a7){console[_0x166569(0x493,0x465,0x472,0x3fc)](_0x53ee37[_0x166569(0x4f5,0x4ce,0x497,0x4eb)],_0x2a62a7),toastr[_0x55b0f7(0xe,-0x73,-0x69,-0x2c)](_0x55b0f7(0x33,0x60,0x5b,-0x29)+'\x20'+_0x2a62a7[_0x166569(0x516,0x4ef,0x57e,0x4ec)]);}}async function updateOutfitPresetFromLLM(_0x1c1df7,_0x46fd49){const _0x467474={'cpNCD':function(_0x2178c8,_0x524c8e){return _0x2178c8(_0x524c8e);},'hQFOY':_0x12093f(-0x12f,-0xfc,-0xa1,-0x169)+'时','UfQEl':function(_0x2c9ff2,_0x364484){return _0x2c9ff2(_0x364484);},'aewiz':function(_0x50ffa9){return _0x50ffa9();},'QUitg':_0x12093f(-0x7c,-0x12,0x5d,-0xe),'JtPnc':_0xfd8723(0x5c5,0x523,0x506,0x575),'CCVWn':_0xfd8723(0x48d,0x5b1,0x4c4,0x518),'ZdTng':_0xfd8723(0x4b2,0x4bf,0x527,0x4ae),'vWcoD':function(_0x3d1daa,_0x520440){return _0x3d1daa!==_0x520440;},'FQTgn':_0x12093f(-0x7e,-0xf3,-0xc7,-0xa5),'buEYa':function(_0x4bf5fb,_0x439597){return _0x4bf5fb>_0x439597;},'thVwf':_0x12093f(-0x5b,0x6,0x19,0x5d),'Vzapt':function(_0x520e63,_0x5fec7f){return _0x520e63>_0x5fec7f;},'jBxAK':function(_0x2b9408,_0x36767f){return _0x2b9408===_0x36767f;},'ZZeoW':_0xfd8723(0x586,0x4d4,0x573,0x4fc),'LwoUW':'melqm','pRfYy':_0x12093f(-0x97,-0xae,-0x64,-0x124)+'内容','bxgAY':function(_0x9a5170,_0x1acf2d){return _0x9a5170(_0x1acf2d);},'IIDXL':_0xfd8723(0x54c,0x4e5,0x4a9,0x538),'DClei':function(_0x5a5a42,_0xf779f6){return _0x5a5a42===_0xf779f6;},'kkfGq':_0x12093f(-0x8a,-0x7,0x38,0x35),'bSPPh':_0x12093f(-0x3e,0x35,0x71,0x46),'pSrhU':function(_0xaa6fa7,_0x2b3fff){return _0xaa6fa7(_0x2b3fff);},'iihPU':_0x12093f(-0x31,0x9,0x21,0x22)+'-tab-chara'+_0x12093f(-0x161,-0xfa,-0x100,-0x74),'EpBXv':_0xfd8723(0x50b,0x406,0x4a2,0x499),'esTPa':_0x12093f(-0x135,-0xd1,-0x78,-0xc2)},_0x489790=extension_settings[extensionName],_0x2515d4=_0x489790[_0x12093f(-0xd1,-0x58,0x2d,-0x25)+_0xfd8723(0x513,0x5e9,0x56e,0x55b)][_0x1c1df7];if(!_0x2515d4){toastr[_0xfd8723(0x447,0x431,0x53d,0x4a7)](_0x467474[_0x12093f(-0xda,-0x7d,-0x3a,-0x5f)]);return;}let _0x32245a=_0xfd8723(0x51b,0x57a,0x561,0x57a)+_0x1c1df7+_0xfd8723(0x49e,0x4f7,0x452,0x494);const _0x593825={};_0x593825[_0xfd8723(0x53e,0x4e5,0x5e4,0x552)]='中文名称',_0x593825['nameEN']=_0x12093f(-0x127,-0xfe,-0x149,-0x7b),_0x593825['upperBody']=_0x467474[_0x12093f(-0x64,-0x1d,-0x21,-0x71)],_0x593825[_0xfd8723(0x4ab,0x48a,0x50a,0x498)+_0x12093f(-0x13b,-0xa1,-0x102,-0x2c)]=_0x467474[_0x12093f(-0x43,-0x8f,-0x106,-0xb0)],_0x593825['fullBody']=_0x467474[_0x12093f(-0x6b,-0x9,-0x60,0x27)],_0x593825[_0x12093f(0x73,0x1,0x2f,-0x8c)+'ck']=_0x12093f(-0x69,-0x86,-0x87,-0x60);const _0x182169=_0x593825;function _0x12093f(_0x66e8c5,_0x137ba2,_0x16e294,_0x29840f){return _0x49bc(_0x137ba2- -0x1d4,_0x29840f);}function _0xfd8723(_0x4d7858,_0x31e87c,_0x254f32,_0x28aaaf){return _0x49bc(_0x28aaaf-0x3bb,_0x254f32);}let _0x45e08a=0x173*-0x1a+0x1*-0x24e2+-0x4a90*-0x1;for(const _0x312562 in _0x182169){if(_0x46fd49[_0x312562]&&_0x467474['vWcoD'](_0x46fd49[_0x312562],_0x2515d4[_0x312562])){const _0x2b21c6=_0x2515d4[_0x312562]||_0x467474[_0xfd8723(0x551,0x57a,0x551,0x5b7)],_0x4f3e18=_0x46fd49[_0x312562];_0x32245a+='•\x20'+_0x182169[_0x312562]+':\x0a',_0x32245a+='\x20\x20旧:\x20'+_0x2b21c6[_0xfd8723(0x523,0x4b3,0x552,0x4f4)](-0x834+0x79*-0x2+-0x493*-0x2,0x1da3+0x1*-0x152b+-0x846)+(_0x467474[_0xfd8723(0x502,0x468,0x470,0x4c7)](_0x2b21c6['length'],-0x138d+0xa3c+0x983)?_0x467474[_0xfd8723(0x5a4,0x5ab,0x4c5,0x531)]:'')+'\x0a',_0x32245a+='\x20\x20新:\x20'+_0x4f3e18['substring'](-0x1*0x1565+-0x151d+0x1*0x2a82,0x2592+0x11*0x73+-0x3*0xf01)+(_0x467474[_0xfd8723(0x520,0x565,0x5bd,0x56f)](_0x4f3e18[_0xfd8723(0x465,0x528,0x532,0x4d3)],0x1*0x1827+0x1592*-0x1+-0x263)?_0x467474[_0xfd8723(0x582,0x4e1,0x538,0x531)]:'')+'\x0a\x0a',_0x45e08a++;}}if(_0x467474[_0x12093f(-0x137,-0xe2,-0xfc,-0x171)](_0x45e08a,-0x163f+-0x1*-0xea5+-0x79a*-0x1)){if(_0x467474[_0xfd8723(0x4cd,0x508,0x4d8,0x4ad)](_0x467474[_0xfd8723(0x53c,0x50b,0x472,0x4cf)],_0x467474['LwoUW'])){const _0x2c6fa0={'NmdhE':function(_0x428704,_0x1ac026){function _0x52c110(_0x34b1ad,_0xbd3b7e,_0x3c627d,_0x40f9c6){return _0xfd8723(_0x34b1ad-0x1e9,_0xbd3b7e-0x1dc,_0x3c627d,_0xbd3b7e- -0x3ad);}return _0x467474[_0x52c110(0x26c,0x1da,0x175,0x256)](_0x428704,_0x1ac026);},'kUjVj':_0x467474[_0x12093f(-0x15f,-0xcb,-0xf1,-0x14d)],'wphmT':function(_0xb3fe9e,_0xb2434){function _0x46e156(_0x2c801d,_0x336d0b,_0x2966db,_0x38ace5){return _0xfd8723(_0x2c801d-0xc9,_0x336d0b-0xbf,_0x38ace5,_0x2c801d- -0x639);}return _0x467474[_0x46e156(-0x113,-0x14b,-0xa5,-0x107)](_0xb3fe9e,_0xb2434);},'eovbO':function(_0x1e2bfe){function _0x308b34(_0x443123,_0x178b6e,_0x57ba12,_0xfb2e5e){return _0x12093f(_0x443123-0x118,_0x443123- -0x1f4,_0x57ba12-0xf4,_0xfb2e5e);}return _0x467474[_0x308b34(-0x1d1,-0x205,-0x166,-0x268)](_0x1e2bfe);}};return new _0x382432((_0x354d82,_0x4b00fc)=>{function _0x531eb1(_0xcfc037,_0xe3911a,_0x1ed7ce,_0xb8534c){return _0x12093f(_0xcfc037-0x10f,_0xcfc037-0x2e2,_0x1ed7ce-0x158,_0x1ed7ce);}const _0xc15fb7={'aWEEl':function(_0x5496dd,_0x4a8f17){return _0x5496dd!==_0x4a8f17;},'rOTOq':function(_0x52b517,_0x46b40c){return _0x2c6fa0['wphmT'](_0x52b517,_0x46b40c);}},_0x13acba=_0x2c6fa0[_0x531eb1(0x245,0x259,0x1b5,0x230)](_0x4cc69d);_0x434b0d['log'](_0x531eb1(0x2ab,0x21d,0x283,0x335)+_0xf6bc6d(0x4e6,0x523,0x52e,0x44f)+'\x20Requestin'+'g\x20outfit\x20m'+'odify\x20prom'+'pt\x20(ID:\x20'+_0x13acba+')');const _0x618e02=_0x2f3c9e=>{function _0x178913(_0x1fa532,_0x306265,_0x22b3c1,_0x845c76){return _0x531eb1(_0x22b3c1-0x211,_0x306265-0x11e,_0x845c76,_0x845c76-0x181);}function _0xb2898d(_0xa23578,_0x5b1dd7,_0x24a26c,_0x448072){return _0xf6bc6d(_0x448072- -0x5b3,_0x5b1dd7-0x1ef,_0x5b1dd7,_0x448072-0x11a);}if(_0xc15fb7[_0x178913(0x4ba,0x4b4,0x46f,0x4e0)](_0x2f3c9e['id'],_0x13acba))return;_0x54f30e[_0x178913(0x450,0x43d,0x408,0x396)+_0x178913(0x433,0x483,0x43c,0x463)](_0x3bb60a[_0x178913(0x498,0x3f2,0x453,0x3e6)+_0xb2898d(-0x16d,-0x13d,-0x165,-0x18b)+_0xb2898d(-0x187,-0x1d3,-0x19b,-0x1a1)+_0xb2898d(-0x149,-0x115,-0x19a,-0x163)],_0x618e02),_0xc15fb7[_0xb2898d(-0x1c4,-0x189,-0x1f5,-0x1cb)](_0x354d82,_0x2f3c9e[_0x178913(0x4c6,0x449,0x484,0x498)]);};_0x133e30['on'](_0x1bfc67['LLM_CHAR_M'+_0xf6bc6d(0x428,0x3b1,0x4a7,0x471)+_0x531eb1(0x21d,0x226,0x2a6,0x1f2)+'PONSE'],_0x618e02);function _0xf6bc6d(_0x25b87a,_0x1a4961,_0x25366c,_0x587912){return _0xfd8723(_0x25b87a-0x114,_0x1a4961-0x81,_0x25366c,_0x25b87a- -0xb8);}const _0x488bb9={};_0x488bb9['id']=_0x13acba,_0x2eadbc[_0x531eb1(0x319,0x33a,0x366,0x2f8)](_0x3761d0[_0x531eb1(0x242,0x1c0,0x1b8,0x1e4)+_0xf6bc6d(0x428,0x45e,0x45d,0x3eb)+_0x531eb1(0x1f5,0x181,0x265,0x256)+_0xf6bc6d(0x473,0x430,0x418,0x3f4)],_0x488bb9),_0x31e560(()=>{function _0x4ebe83(_0x369208,_0x31d2f4,_0x5e5fd4,_0x3f3a1f){return _0x531eb1(_0x3f3a1f- -0xbf,_0x31d2f4-0x137,_0x31d2f4,_0x3f3a1f-0x179);}function _0x5103f1(_0x57c5ed,_0x437e93,_0x4d2c0e,_0x27d1c1){return _0x531eb1(_0x4d2c0e-0x274,_0x437e93-0x5e,_0x27d1c1,_0x27d1c1-0x10d);}_0xab8b14[_0x4ebe83(0x17d,0x1a7,0xbe,0x138)+_0x4ebe83(0x157,0x136,0x116,0x16c)](_0x2cffde[_0x5103f1(0x47e,0x4aa,0x4b6,0x547)+_0x4ebe83(0x1dd,0xef,0xe7,0x174)+'PROMPT_RES'+_0x5103f1(0x44c,0x447,0x4cf,0x43a)],_0x618e02),_0x2c6fa0[_0x4ebe83(0x2a5,0x230,0x1ce,0x210)](_0x4b00fc,new _0x10e619(_0x2c6fa0[_0x4ebe83(0x1a8,0x1fa,0x1b7,0x191)]));},-0x2d33+0x4855+0xbee);});}else{toastr[_0xfd8723(0x558,0x576,0x5e9,0x559)](_0x467474['pRfYy']);return;}}_0x32245a+='共\x20'+_0x45e08a+'\x20项更改,是否应用?';const _0xe11c95=await _0x467474[_0xfd8723(0x585,0x4f9,0x5f7,0x58e)](stylishConfirm,_0x32245a);if(!_0xe11c95){toastr[_0x12093f(0x43,-0x36,-0x62,-0x70)](_0x467474['IIDXL']);return;}for(const _0x11964f in _0x182169){_0x46fd49[_0x11964f]&&(_0x467474[_0xfd8723(0x59f,0x598,0x54c,0x505)](_0x467474['kkfGq'],_0x467474[_0xfd8723(0x4ab,0x514,0x469,0x4f5)])?_0x551382[_0x12093f(-0x6e,-0xf5,-0x5e,-0xa1)]('[outfitPro'+_0xfd8723(0x559,0x595,0x54d,0x59e)+'\x20未识别的服装字段\x20'+'\x22'+_0x34f8c1+'\x22'):_0x2515d4[_0x11964f]=_0x46fd49[_0x11964f]);}_0x467474[_0x12093f(0x76,0x23,-0x1f,0x82)](saveSettingsDebounced);const _0x3af87f=_0x467474['pSrhU']($,_0x467474['iihPU']);_0x3af87f[_0x12093f(-0x3a,-0xbc,-0x85,-0xe4)]&&(_0x467474['DClei'](_0x467474[_0x12093f(0x37,-0x4a,-0x41,-0x8)],_0x467474[_0x12093f(-0x4,-0x3,0x6b,0x4d)])?(_0x22d1ef[_0xfd8723(0x4a6,0x4e1,0x512,0x4a4)+_0xfd8723(0x4ee,0x54d,0x542,0x4d8)](_0x5c96d4['LLM_CHAR_M'+_0xfd8723(0x559,0x4a7,0x572,0x4e0)+_0x12093f(-0xaa,-0xc5,-0x6f,-0x43)+_0x12093f(-0xfb,-0x87,-0xe8,-0xe6)],_0x873f8),_0x16eefb(new _0x197733(_0x467474[_0xfd8723(0x546,0x443,0x4ff,0x4c4)]))):loadOutfitPreset()),updateOutfitFormFields(_0x46fd49),console[_0x12093f(-0x14c,-0xf5,-0xa1,-0x185)](_0x12093f(-0x6f,-0x37,0x42,-0x64)+'mptModify]'+_0xfd8723(0x56b,0x657,0x60d,0x5bc)+_0x1c1df7+'\x22');}function updateOutfitFormFields(_0x2f1bbf){function _0xf3e99d(_0xd6679d,_0x3bb3d9,_0x2fa37e,_0x3b6dba){return _0x49bc(_0x3b6dba- -0xb3,_0x3bb3d9);}const _0x317b7d={'iDZha':function(_0x3d17e2,_0x57ed7b){return _0x3d17e2!==_0x57ed7b;},'yhfNJ':_0xf3e99d(-0x3c,0x48,0x9,0x49),'hMonr':function(_0x88cd3c,_0x577bdb){return _0x88cd3c(_0x577bdb);},'xTuVZ':_0x1e9ec0(0x21f,0x205,0x214,0x27f),'oKjIK':_0xf3e99d(0x87,0x15f,0x76,0x109),'xXyiR':'upperBody','RgQnC':_0x1e9ec0(0x112,0x14b,0xe5,0x1d9)+'ack'},_0x8985a7=[_0x317b7d[_0x1e9ec0(0x23f,0x1f5,0x15f,0x234)],_0x317b7d[_0xf3e99d(0xdc,0x9,0x104,0x6d)],_0x317b7d[_0x1e9ec0(0x1b8,0x213,0x1c7,0x18e)],_0x317b7d[_0xf3e99d(0x13d,0x84,0x144,0x11f)],'fullBody',_0x1e9ec0(0x2da,0x243,0x1c3,0x227)+'ck'];function _0x1e9ec0(_0x5da85e,_0x3dffbb,_0x581677,_0x19a88d){return _0x49bc(_0x3dffbb-0x6e,_0x581677);}_0x8985a7[_0x1e9ec0(0x2c6,0x257,0x291,0x1dc)](_0x388079=>{function _0x1e08e0(_0x51dac1,_0x1b50e9,_0x38ddcd,_0x10c96c){return _0xf3e99d(_0x51dac1-0x1bf,_0x38ddcd,_0x38ddcd-0x122,_0x10c96c- -0x23f);}function _0x459391(_0x5dbb26,_0x34f879,_0x5d2fc1,_0x391163){return _0x1e9ec0(_0x5dbb26-0xb5,_0x5d2fc1-0x10a,_0x34f879,_0x391163-0xb6);}if(_0x2f1bbf[_0x388079]){const _0x2b284c=document[_0x459391(0x356,0x35a,0x327,0x39d)+'ById'](_0x459391(0x2a9,0x38f,0x336,0x2c0)+_0x388079);_0x2b284c&&(_0x317b7d[_0x1e08e0(-0x1ae,-0x222,-0x1c2,-0x1c3)](_0x317b7d[_0x459391(0x2bc,0x29c,0x333,0x315)],_0x317b7d['yhfNJ'])?_0xcc72a5[_0x232062[_0x339530]]=_0x1e67c1:(_0x2b284c[_0x1e08e0(-0x83,-0x114,-0x8f,-0x100)]=_0x2f1bbf[_0x388079],_0x317b7d[_0x1e08e0(-0x1b9,-0xe0,-0x166,-0x14e)]($,_0x2b284c)[_0x459391(0x29b,0x311,0x29c,0x2dd)](_0x1e08e0(-0x187,-0x1b7,-0xc6,-0x149))));}});}