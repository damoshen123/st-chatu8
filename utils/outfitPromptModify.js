(function(_0x5d5ab5,_0x5905f7){function _0x4e742e(_0x7cabf,_0x4241ca,_0x4d5a32,_0x3f74a5){return _0x2086(_0x4241ca-0x3e0,_0x3f74a5);}function _0x39043e(_0x1ebdff,_0x2cf3d2,_0x4f66b0,_0x4e8b93){return _0x2086(_0x1ebdff- -0x1d2,_0x4e8b93);}const _0x266982=_0x5d5ab5();while(!![]){try{const _0x3fafdd=parseInt(_0x39043e(-0xbd,-0x3a,-0x118,-0x39))/(-0x3*0x92+0x2647+-0x2490)*(parseInt(_0x39043e(-0x3b,-0x5d,-0x9f,-0xaa))/(-0x78e+-0xe2*0x2b+-0x1*-0x2d86))+-parseInt(_0x4e742e(0x4f4,0x4ee,0x46c,0x48c))/(-0x698+0xcdc+-0x641)*(parseInt(_0x4e742e(0x4ad,0x522,0x588,0x54e))/(-0x2147+0xaaa+0x16a1))+parseInt(_0x39043e(-0x5d,0x1f,0x31,-0x6d))/(0x4*-0x192+0x161*0x1b+-0x1eee)+-parseInt(_0x39043e(-0xc6,-0xef,-0xe9,-0x66))/(0x5a*0x6e+0xd5*-0x8+-0x69*0x4e)*(-parseInt(_0x39043e(-0x8a,-0x87,-0xce,-0x10c))/(-0x1*0x1483+-0x2*-0xf7c+-0xa6e))+parseInt(_0x4e742e(0x566,0x537,0x53c,0x539))/(0x1efb+-0x1*-0x1a17+-0x826*0x7)+-parseInt(_0x4e742e(0x5bc,0x5c2,0x5a2,0x559))/(-0xfe5*-0x1+-0x2070+0x1094)+parseInt(_0x4e742e(0x53b,0x4d1,0x4b4,0x515))/(0xe5b+-0x25ae+-0x1*-0x175d)*(-parseInt(_0x4e742e(0x4bc,0x4c0,0x4ba,0x52e))/(-0x13e2+0x1001+-0x1f6*-0x2));if(_0x3fafdd===_0x5905f7)break;else _0x266982['push'](_0x266982['shift']());}catch(_0x321a78){_0x266982['push'](_0x266982['shift']());}}}(_0x5b42,-0x4b445*-0x2+-0x7fd*-0xda+-0x96c13));function _0x229c23(_0xc85aa,_0x5d66f1,_0x761242,_0xc050c0){return _0x2086(_0x5d66f1-0xbe,_0xc050c0);}const _0x485f39=(function(){let _0x3b575c=!![];return function(_0x4599f1,_0x4aa910){const _0xfe6e37=_0x3b575c?function(){function _0x162552(_0x609877,_0xef8442,_0x30c6f7,_0x543b3a){return _0x2086(_0x543b3a-0xb4,_0x30c6f7);}if(_0x4aa910){const _0x408b03=_0x4aa910[_0x162552(0x149,0x18a,0x149,0x1b9)](_0x4599f1,arguments);return _0x4aa910=null,_0x408b03;}}:function(){};return _0x3b575c=![],_0xfe6e37;};}()),_0x70ae7f=_0x485f39(this,function(){function _0x322f6a(_0x1dea42,_0x236351,_0x2daf3d,_0x2e93c1){return _0x2086(_0x236351-0x144,_0x1dea42);}const _0x57084b={};_0x57084b[_0x49eb3e(-0x36,-0x66,-0x79,-0x88)]=_0x322f6a(0x2d9,0x261,0x291,0x2dd)+'+$';const _0x3610b0=_0x57084b;function _0x49eb3e(_0x24229a,_0x4ffcd6,_0x350ae3,_0x236a1e){return _0x2086(_0x24229a- -0x19c,_0x236a1e);}return _0x70ae7f[_0x49eb3e(0x23,0x65,-0x4e,0x66)]()['search'](_0x3610b0[_0x49eb3e(-0x36,-0x27,-0x85,-0x29)])[_0x322f6a(0x38e,0x303,0x274,0x2d1)]()['constructo'+'r'](_0x70ae7f)[_0x322f6a(0x2d2,0x280,0x213,0x240)](_0x3610b0[_0x49eb3e(-0x36,0x21,-0x55,-0xb5)]);});_0x70ae7f();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../script.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{loadOutfitPreset}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';function replacePlaceholder(_0x4a6cc3,_0xb86015,_0x3dd480,_0x4e1957){const _0x3c8898={};_0x3c8898['jZXmt']=function(_0x1cd739,_0x59b242){return _0x1cd739===_0x59b242;};function _0x1a16b0(_0x2da9dc,_0x5d71e1,_0x4bb384,_0x59574c){return _0x2086(_0x59574c-0xcc,_0x4bb384);}_0x3c8898[_0x41dcfd(-0x1a9,-0x14e,-0x1ab,-0x233)]=_0x1a16b0(0x2f0,0x324,0x34b,0x2c1);function _0x41dcfd(_0x101032,_0xbf6e4d,_0x539258,_0x312fdf){return _0x2086(_0x101032- -0x39a,_0xbf6e4d);}_0x3c8898[_0x41dcfd(-0x1c3,-0x230,-0x245,-0x1de)]=function(_0x26a539,_0x563875){return _0x26a539!==_0x563875;},_0x3c8898['CZHxB']=_0x41dcfd(-0x28b,-0x315,-0x2df,-0x203),_0x3c8898[_0x41dcfd(-0x1de,-0x173,-0x187,-0x16d)]=function(_0x1586d1,_0x55bfdf){return _0x1586d1===_0x55bfdf;},_0x3c8898['ZVmNQ']=_0x1a16b0(0x30b,0x28a,0x2c1,0x28d),_0x3c8898[_0x41dcfd(-0x262,-0x241,-0x2d8,-0x23f)]=function(_0x15f346,_0x22faf1){return _0x15f346===_0x22faf1;};const _0x1845b5=_0x3c8898;if(_0x1845b5[_0x1a16b0(0x22c,0x303,0x2f3,0x298)](typeof _0x4a6cc3,_0x1845b5[_0x1a16b0(0x2ca,0x276,0x2f9,0x2bd)])){if(_0x1845b5[_0x41dcfd(-0x1c3,-0x157,-0x141,-0x1d2)](_0x1845b5[_0x41dcfd(-0x2a5,-0x2c2,-0x282,-0x216)],_0x1845b5[_0x1a16b0(0x139,0x22d,0x22e,0x1c1)]))_0x45d284[_0x149919[_0x4de252]]=_0x369ce8;else return _0x3dd480&&_0x4a6cc3[_0x41dcfd(-0x1c7,-0x1f4,-0x1d3,-0x196)](_0xb86015)&&(_0x4e1957&&_0x4e1957[_0x41dcfd(-0x23b,-0x2aa,-0x1e9,-0x1f2)](_0xb86015)),_0x4a6cc3[_0x41dcfd(-0x237,-0x287,-0x207,-0x255)](_0xb86015,_0x3dd480);}if(Array[_0x1a16b0(0x1e6,0x1aa,0x270,0x20d)](_0x4a6cc3)){if(_0x1845b5[_0x41dcfd(-0x1de,-0x1e6,-0x261,-0x22d)](_0x1845b5['ZVmNQ'],_0x1845b5[_0x1a16b0(0x292,0x2b2,0x1ce,0x240)]))return _0x4a6cc3['map'](_0x5d17d0=>replacePlaceholder(_0x5d17d0,_0xb86015,_0x3dd480,_0x4e1957));else _0x21d957='诊断：检测到以下变量'+_0x1a16b0(0x17d,0x193,0x21c,0x1df)+[..._0x9522d6][_0x41dcfd(-0x21d,-0x285,-0x1e2,-0x2a1)]('、')+'\x0a';}if(_0x4a6cc3&&_0x1845b5['xwfEU'](typeof _0x4a6cc3,_0x41dcfd(-0x242,-0x1ba,-0x274,-0x20a))){const _0x2d4952={};for(const _0x56329b in _0x4a6cc3){_0x2d4952[_0x56329b]=replacePlaceholder(_0x4a6cc3[_0x56329b],_0xb86015,_0x3dd480,_0x4e1957);}return _0x2d4952;}return _0x4a6cc3;}function attachImagesToMessage(_0x268e64,_0x52dbb8,_0x29c587,_0x41f143=_0x229c23(0x2d7,0x262,0x2ac,0x245)){const _0x5779c0={'DpvIc':function(_0x6b669e){return _0x6b669e();},'CGUEl':function(_0x458c02,_0x3d5374){return _0x458c02!==_0x3d5374;},'uiCxl':_0x2d3fd4(0x32e,0x388,0x33b,0x30a),'qmvVR':function(_0x5ee45a,_0x4394ec){return _0x5ee45a===_0x4394ec;},'dkbWe':_0x2d3fd4(0x38d,0x3c0,0x3f0,0x3e7),'zfHWK':function(_0xa89cb5,_0xd5adf1){return _0xa89cb5===_0xd5adf1;},'cpqaf':'object','zZeeY':function(_0x153e3a,_0x50b7e3){return _0x153e3a+_0x50b7e3;},'hhgwo':'text','TnDxx':_0x2d3fd4(0x333,0x2f1,0x3b0,0x304),'gPEps':_0x5b4a94(0x339,0x340,0x33c,0x2d9),'qqHpg':'auto','vKbRI':function(_0x4da41b,_0x59885d){return _0x4da41b<_0x59885d;},'lfacr':function(_0x4d3518,_0x1a3f56){return _0x4d3518>=_0x1a3f56;},'XdlvM':function(_0x152bc1,_0x119dd4){return _0x152bc1===_0x119dd4;},'XOxCH':function(_0x211e0c,_0x455a69){return _0x211e0c>_0x455a69;}};if(!_0x29c587||_0x29c587[_0x5b4a94(0x31c,0x2d0,0x3a2,0x2a3)]===0x1c73+0x137c+-0x2fef||_0x5779c0[_0x2d3fd4(0x2ff,0x27a,0x313,0x29f)](_0x52dbb8,0x2*0x799+-0x19ad+-0xa7b*-0x1)||_0x5779c0[_0x2d3fd4(0x2b0,0x253,0x320,0x27e)](_0x52dbb8,_0x268e64['length']))return _0x268e64;const _0x4be933=[..._0x268e64];function _0x2d3fd4(_0x400d1e,_0x10f456,_0x419358,_0x96fe3b){return _0x229c23(_0x400d1e-0x17a,_0x400d1e-0xda,_0x419358-0xdd,_0x10f456);}const _0x44e279=_0x4be933[_0x52dbb8],_0x49c8e1=[];function _0x5b4a94(_0x217d7e,_0x2bc9e8,_0x2c0aa3,_0x3f718b){return _0x229c23(_0x217d7e-0x132,_0x217d7e-0xac,_0x2c0aa3-0xba,_0x2c0aa3);}if(_0x5779c0['XdlvM'](typeof _0x44e279['content'],'string')){const _0x477059={};_0x477059['type']=_0x5779c0[_0x5b4a94(0x31f,0x2c9,0x39b,0x2db)],_0x477059['text']=_0x44e279[_0x5b4a94(0x242,0x291,0x28e,0x279)],_0x49c8e1[_0x5b4a94(0x24f,0x1eb,0x29f,0x1ff)](_0x477059);}else Array[_0x2d3fd4(0x2d9,0x26b,0x2fc,0x317)](_0x44e279[_0x5b4a94(0x242,0x2bd,0x1c5,0x2ba)])&&_0x49c8e1[_0x5b4a94(0x24f,0x1dd,0x28f,0x1f8)](..._0x44e279[_0x5b4a94(0x242,0x1d1,0x2d1,0x27a)]);if(_0x5779c0[_0x2d3fd4(0x38c,0x303,0x319,0x365)](_0x29c587[_0x2d3fd4(0x34a,0x314,0x360,0x33a)],-0x76f*0x2+-0x10ed*-0x1+-0x20f)){const _0x470e6c={};_0x470e6c[_0x2d3fd4(0x27b,0x224,0x290,0x256)]=_0x5779c0[_0x5b4a94(0x31f,0x38b,0x2a2,0x29d)],_0x470e6c['text']=_0x5b4a94(0x249,0x248,0x25f,0x21a)+_0x29c587[_0x2d3fd4(0x34a,0x371,0x391,0x31c)]+'张'+_0x41f143+']',_0x49c8e1[_0x5b4a94(0x24f,0x241,0x237,0x2c6)](_0x470e6c);}_0x29c587['forEach']((_0x528264,_0x22af18)=>{function _0x4584f4(_0x5c73f6,_0x1f7e5b,_0x5c26fd,_0x56726b){return _0x5b4a94(_0x5c73f6- -0x313,_0x1f7e5b-0x125,_0x1f7e5b,_0x56726b-0xfb);}function _0x423954(_0x202cb6,_0xf6c7a7,_0xb96dfd,_0xc02ea2){return _0x5b4a94(_0x202cb6-0x1d1,_0xf6c7a7-0x12d,_0xf6c7a7,_0xc02ea2-0xa4);}if(_0x5779c0[_0x4584f4(-0x16,0x5a,-0x6b,0x58)](_0x5779c0[_0x4584f4(-0x5c,-0x7c,-0xe3,-0x8e)],_0x423954(0x4d1,0x45a,0x509,0x4e2)))_0x5779c0[_0x4584f4(-0x93,-0x104,-0x5,-0xfb)](_0x3cc16b);else{const _0x2b86fa=_0x5779c0[_0x4584f4(0x1e,0x83,0x85,0x29)](typeof _0x528264,_0x5779c0['dkbWe'])?_0x528264:_0x528264[_0x4584f4(-0x84,-0x5d,-0xe2,-0x5d)],_0x18a51d=_0x5779c0['zfHWK'](typeof _0x528264,_0x5779c0[_0x423954(0x43b,0x3c2,0x498,0x490)])&&_0x528264[_0x4584f4(-0x8b,-0x108,-0xd5,-0x4e)]?_0x528264[_0x4584f4(-0x8b,-0x1,-0xb5,-0x107)]:''+_0x41f143+_0x5779c0[_0x423954(0x4b6,0x484,0x48a,0x4a6)](_0x22af18,-0x162d+0x1*0x1b29+-0x4fb),_0x44feb6={};_0x44feb6[_0x423954(0x41e,0x3de,0x435,0x3f8)]=_0x5779c0[_0x423954(0x4f0,0x532,0x55c,0x518)],_0x44feb6[_0x423954(0x4bb,0x4ab,0x502,0x519)]='['+_0x18a51d+']',_0x49c8e1[_0x4584f4(-0xc4,-0xd0,-0x11a,-0x147)](_0x44feb6);let _0x3c0a66=_0x2b86fa;!_0x2b86fa['startsWith'](_0x5779c0[_0x423954(0x49b,0x4e0,0x45b,0x51f)])&&(_0x5779c0[_0x4584f4(0x42,-0x4,0xcb,-0x44)]!==_0x4584f4(0x26,-0x3,-0x19,0x17)?_0xcab4f7[_0x423954(0x495,0x4c0,0x493,0x47a)](_0x4584f4(-0xb9,-0xe2,-0x13b,-0x8a)+_0x4584f4(-0xb6,-0xf8,-0xde,-0x118)+_0x423954(0x45f,0x4ef,0x443,0x420)+'\x22'+_0x308f98+'\x22'):_0x3c0a66='data:image'+_0x423954(0x48d,0x49e,0x404,0x40a)+'4,'+_0x2b86fa);const _0x2fd632={};_0x2fd632[_0x4584f4(-0x80,-0x60,0x6,-0x3f)]=_0x3c0a66,_0x2fd632[_0x4584f4(-0x3b,0x39,-0x7d,-0x72)]=_0x5779c0['qqHpg'];const _0x4aa386={};_0x4aa386[_0x423954(0x41e,0x468,0x397,0x3ca)]=_0x4584f4(0x3d,-0x16,-0x6,0x15),_0x4aa386[_0x423954(0x521,0x4d3,0x57e,0x532)]=_0x2fd632,_0x49c8e1['push'](_0x4aa386);}});const _0x2f011d={..._0x44e279};return _0x2f011d['content']=_0x49c8e1,_0x4be933[_0x52dbb8]=_0x2f011d,_0x4be933;}function _0x5b42(){const _0x104856=['5Qoa5Rwl5yIW5PYn6kof5Qch562+','y29UDgvUDa','5Ps56k+35RgclI4U','6i635y+w5PYn6kof5l+U5Ps55O+q56s66k+n6lAf','CMfUzg9T','rKf4q2y','svvszgO','ywnR','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','ntK0ntCYt3PduKDT','zxrZ','5lIk5y2k6lQR','DhLWzq','CgPKrKu','ChvZAa','v1nJEg0','y2fwz0e','DgPOEgu','y3rLCG','wNHdrwi','DxrWDxqGzM9Yia','EMfmv04','B2jHCMi','suXiuxi','ifjHDYbmte0GBW','w291DgzPDfbYBW','mtuWyvvStM9w','y1HiyuW','Bxb0tw9KAwz5xq','qwngCfq','q1PiEei','vNf5suW','q2PTAg4','yNr1sgK','5lIl5y2k6lQR6iom6z2I','zM9YrwfJAa','tKr4vgu','q1rXCvm','BLjrBfq','yKDWuNG','E3VNLkJMIlFPNidMSyj9Fq','y3bXywy','z2v0rwXLBwvUDa','z1HWr0K','5lIk5y2k6lQR6iom6z2IoIa','5Rgc6lAf5PE2','yxbWBhK','zNvSBejVzhK','E3VLVzpLIy3MNi3OO4v9Fq','zxrjza','CxjlsuW','C3nHz2uGAw5Kzq','iev4DhjHy3rLza','nMTnwujNBG','teXnioIVT+AXGUwKSEI0Pq','mJyYnJC4mK5SvwXetW','CxnAruu','v2vMtgG','qNLjza','sez4y0C','6kkR5l2/55sO77YA','vNndELq','ody0mtK0rhLNBxHN','rhb2swm','CMvWBgfJzq','BgzHy3i','ig91DgzPDcbTBW','ANLQtxe','E3VLVzpLIy3OP5lOIBj9Fq','zxjYB3i','kcGOlISPkYKRkq','BMfTzq','zfruEue','5lIT5PAh5zcn56EW','DwjOsLa','DMfSDwu','rgvpzNG','ioACQUIVHUwiQ+EAHoACJEIJHEwTL+AUTsa','yMfZzty0','sgDxqwS','Dxnqvuy','wxbuDvG','DxjS','Ee1LrNe','DLP2vhe','ChqGkeLeoIa','q2PTBvm','DhjPBq','iIdNMOtKU6xKUiVMLBdMJA46cGO','wMHLsfe','AeLVC3i','ANf1EvO','sgvlqK4','vuvtva','rM1vDva','sgHitMC','ufjptvbux1jfuq','EhDMrvu','v3ryvhG','wxnUDNO','zNvSBejVzhLcyq','C2vHCMnO','seXIzgm','iow3SUABToAwSoACJEIJHEMIHoIUVIaI','5lIk5y2k6lQR6iom6z2I','5OM+5lIn5yIW5OYh5A6A55Qe5PYn6kof6Ake6k6+','AxnbCNjHEq','nejgtxr6sq','y1zowMi','wuPMq1G','BwfW','t0rjrLLFuKvtua','D2fYBMLUzW','nda5mti5n1v0A3LVDW','ChjVBxb0','EeLSvfq','rM1Ysw4','zMLSDgvY','DwLdEgW','q3rVvwi','tePKteW','igrHDge6','sfvfz0u','l3bUzZTIyxnLnG','ief0DgfJAgvK','B2rPzNKGChjVBq','CMfUzg9Tvvvjra','AxjLBwvUDcbTzq','ntK0mZGWmgvgwMrNAW','B2jQzwn0','5PYQ5zYOieXmtsdOVPpLH7RKUk0','Bg9N','5lIl5y2k6lQR6iom6z2IoIa','rKXkwgC','yxv0BW','5yEg5Ash5PU05PAW5PYn6kofici','ywrK','vg5eEhG','BwvZC2fNzsbHDa','6iUX5PAh5zcn56EW','CMvWBgfJzufSBa','zhzqDeC','tLzpwM4','AerRALC','DKTIuKK','DgLTzw91De1Z','ievYCM9YoG','z3nVuuW','thrxCxG','Aw5MBW','u2HfEfa','zgv0ywLS','lI4U','Aw5WDxq','C3rHCNrZv2L0Aa','Bxb0ig1VzgLMEq','CNjZrMe','wLzTtLe','mta2nti1nxbqBgHvtG','Dvjwsum','zxf1zxn0icHjra','BMfTzuvo','5lIl5y2k6lQR','E3VKUjBNLyZKUABOP6BLJ5f9Fq','ELPLzvK','Eu1Yqwi','AM9PBG','yKnWy3K','y2HHCL9TB2rPzG','Dgv4Da','r1zxD3e','5PYn6kof5l+U5Ps5ieXmtsdOR7C','C1DcqLK','yvHJAvm','BunrCfq','lxrHyI1JAgfYyq','vePVuxO','sMrQELq','koEPUIK','ruXLDNG','CMXitw8','DhrtEey','Be1evKS','D25UBxm','y3HOC1a','igLUzgv4','5lIk5y2k6lQRoIa','ufjptvbux1jfuW','q0DvrwW','vhbtsfa','zgvIDwDNAw5NoG','v2P0EwS','mMP6C3jQuq','5BEY5y+w5RAi5PU05PAW','zgvdvg4','r2r4u0i','zgf0ytO','B3v0zML0uhjLCW','BM93','t05trq','q0TuqMy','C2L6zq','q0DbDfC','DejUv3K','t0rjrLLFr0vuxW','5y+c6icd5zU+54Mh','icdMLRa6ia','zgLMEsbmte0GCG','rxzlu3G','AwXMrhy','sgrbzge','rffnvuW','DLr2s3u','BMfTzuno','D1fcy04','iev4zwn1DgLUzW','ue9ou0u','B3v0zML0xW','Aw5KzxHpzG','BgvUz3rO','DuXwyu0','s3vrAvi','AgHND28','BwvZC2fNzq','ueLxse0','ifvZzxiGCMvXDq','v3nXCKK','t0rjrLLFuKvrvq','D3nnExy','zLr1tgu','thjpthq','DLzIyMm','Dg9tDhjPBMC','teXnioI/LowBNUE7K+AENos4UUEPUG','yNzlsgy','BM52vuu','DxbWzxjcB2r5qG','AM5YD3G','zw1PDa','DNjmswK','Cw12vLi','wxD0zuu','s1nLyKG','BMPyEKe','DxPKB0q','ALPyBxq','teXcsvO','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','Cw9RA0m','zw5LCG','y09Pt1q','CMvZDwX0','Aw5JBhvKzxm','B0vOwvG','CMvTB3zLtgLZDa','tuLWqxG','teT1yvy','teXnx0niqvjFtq','y29UC3rYDwn0BW','EwnzyvC','Bxb0oG','5PYn6kof5O+q56s66k+n5l+U5Ps55A6m5OIq77Yb','C3vJy2vZCW','CMH2AvO','DxbWzxjcB2r5','yunRAuS','E3VOP5lOIBlLKk/NLkJLIjFOOAH9Fq','mJq2mdCWoezNquPAvq','DhjPz2DLCG','EurLCeK','tfnHyMy','Aw1Hz2vFDxjS','6k+35ywi6ycj5OUP5lIa5lIQ5PYn6kof6Ake6k6+','B3v0zML0CW','uuzHB0y','zxD1AwK','z1bfChm','B3v0zML0ihbYBW','vNHOAMm','vgzewgu','icdML6C6ia','C3vIC3rYAw5N','zfvIzK4','Aw1Hz2vZihrVia','CMjjzK8','we94q0G','C3rYAw5N'];_0x5b42=function(){return _0x104856;};return _0x5b42();}function findMessageIndexWithPlaceholder(_0x2674c3,_0x270fa0){const _0x1e8ffd={};_0x1e8ffd['TfDXe']=function(_0x46dae2,_0x140806){return _0x46dae2===_0x140806;},_0x1e8ffd[_0x36981d(0x166,0x148,0x138,0x11e)]=_0x13eb9c(-0x15f,-0xe1,-0x1ac,-0x145),_0x1e8ffd['CjmmS']='ubhJP',_0x1e8ffd['rrsFa']=function(_0x2c7fa8,_0xe3ef63){return _0x2c7fa8===_0xe3ef63;},_0x1e8ffd[_0x36981d(0x18b,0x18d,0x139,0x16e)]='NuBtn',_0x1e8ffd['ShExP']=_0x36981d(0x154,0x1c1,0x240,0x1ea);const _0x319357=_0x1e8ffd;function _0x13eb9c(_0x2ddee1,_0x170c96,_0x483edb,_0xf8393d){return _0x229c23(_0x2ddee1-0x25,_0x2ddee1- -0x412,_0x483edb-0x91,_0x483edb);}function _0x36981d(_0x9f8c95,_0x859d67,_0x14fdcd,_0xe7265d){return _0x229c23(_0x9f8c95-0x1ed,_0x859d67- -0xc5,_0x14fdcd-0x4f,_0x14fdcd);}for(let _0x5b1f0b=-0xf3e+-0x112b+0x2069;_0x5b1f0b<_0x2674c3[_0x36981d(0x1cf,0x1ab,0x1da,0x1b7)];_0x5b1f0b++){const _0x506d8a=_0x2674c3[_0x5b1f0b];if(_0x319357[_0x13eb9c(-0x166,-0x131,-0x1d6,-0x150)](typeof _0x506d8a[_0x36981d(0xbb,0xd1,0xf5,0x140)],_0x319357[_0x13eb9c(-0x205,-0x18a,-0x293,-0x223)])&&_0x506d8a['content']['includes'](_0x270fa0)){if(_0x319357[_0x36981d(0x1c9,0x1e7,0x190,0x163)](_0x13eb9c(-0x233,-0x26f,-0x1e4,-0x27c),_0x319357[_0x36981d(0xce,0x126,0x19a,0x1a8)]))return _0x5b1f0b;else _0x1870b1['add'](_0x519abc);}else{if(Array[_0x36981d(0x16e,0x13a,0xde,0x146)](_0x506d8a[_0x36981d(0xae,0xd1,0x9d,0xb2)]))for(const _0x3926ed of _0x506d8a[_0x36981d(0xbc,0xd1,0x147,0x66)]){if(_0x319357[_0x36981d(0x1a5,0x16c,0x19e,0x1e5)](_0x319357[_0x36981d(0x1ff,0x18d,0x193,0x173)],_0x319357[_0x13eb9c(-0x1e7,-0x1a3,-0x1bc,-0x1c5)]))return null;else{if(_0x319357[_0x13eb9c(-0x1e1,-0x1b1,-0x207,-0x18e)](_0x3926ed[_0x13eb9c(-0x271,-0x265,-0x2b9,-0x239)],'text')&&_0x3926ed[_0x13eb9c(-0x1d4,-0x25b,-0x243,-0x201)][_0x13eb9c(-0x181,-0x15d,-0x192,-0x128)](_0x270fa0))return _0x5b1f0b;}}}}return-(0x1e+0x624*-0x3+0x124f);}function generateRequestId(){const _0x39fd5d={};_0x39fd5d[_0x11e6f2(0x5c,0xcd,0x106,0xbd)]=function(_0x65d05f,_0x53e3db){return _0x65d05f+_0x53e3db;};function _0x11e6f2(_0x21ac90,_0x7f9de,_0x15e538,_0x230046){return _0x229c23(_0x21ac90-0x6c,_0x230046- -0x18f,_0x15e538-0x165,_0x7f9de);}const _0x270b42=_0x39fd5d;function _0x27f1b1(_0x1a9b83,_0x584876,_0x5c43e5,_0x462512){return _0x229c23(_0x1a9b83-0x101,_0x584876- -0x3ae,_0x5c43e5-0xfb,_0x5c43e5);}if(crypto&&crypto[_0x11e6f2(0x2,0xcd,0x9e,0x84)])return crypto[_0x11e6f2(0x14,0xdf,0xbe,0x84)]();return _0x270b42[_0x27f1b1(-0x1b0,-0x162,-0x1a7,-0x14d)](Date[_0x11e6f2(0x63,0x142,0x116,0xcc)]()[_0x11e6f2(0xce,0xb3,0x119,0xee)](-0x143*0x7+-0x13*-0x91+-0x1ca),Math[_0x27f1b1(-0x2a1,-0x215,-0x241,-0x204)]()[_0x11e6f2(0xb1,0x13c,0xe6,0xee)](0x358*0x1+-0x218b+0x1e57)[_0x11e6f2(0x10c,0x9e,0xad,0x11f)](0x1910+0x11*-0x1c1+0x4c3));}export function LLM_OUTFIT_MODIFY_GET_PROMPT(){function _0x152479(_0x1a28f8,_0x561cf1,_0x4898ff,_0x5d4028){return _0x229c23(_0x1a28f8-0x115,_0x1a28f8- -0x93,_0x4898ff-0x195,_0x5d4028);}const _0x3110ce={'hIosr':_0x244a31(0x4f8,0x51b,0x57c,0x4fe),'vVbbc':'ZLAXs','AcFpT':function(_0x402d46,_0x341b7a){return _0x402d46(_0x341b7a);},'yMrAb':function(_0x5618d5,_0x5cf853){return _0x5618d5!==_0x5cf853;},'xIlTT':_0x152479(0x1e2,0x1c0,0x24e,0x1ec),'ELevx':function(_0x4045f1){return _0x4045f1();},'KuQiR':function(_0x3f9baf,_0x5bab03,_0x581745){return _0x3f9baf(_0x5bab03,_0x581745);}};function _0x244a31(_0x560059,_0x4ad3de,_0x31e393,_0x410ccf){return _0x229c23(_0x560059-0x104,_0x4ad3de-0x2dd,_0x31e393-0x65,_0x560059);}return new Promise((_0x396d34,_0x5ec46c)=>{function _0x576b9e(_0x41f3b7,_0x1e0fe4,_0x45dfc4,_0x2f5c24){return _0x152479(_0x45dfc4-0x378,_0x1e0fe4-0x53,_0x45dfc4-0x88,_0x2f5c24);}function _0x1603ee(_0x28ed61,_0x5b7545,_0x24e50d,_0x43fbfd){return _0x152479(_0x43fbfd-0x120,_0x5b7545-0xd1,_0x24e50d-0x11d,_0x5b7545);}const _0x51ecc7={'CKTBf':function(_0x27c637,_0x11a1c2){function _0x513e3f(_0x4f75ba,_0x191597,_0xf3f706,_0x30589e){return _0x2086(_0x30589e- -0x29a,_0xf3f706);}return _0x3110ce[_0x513e3f(-0x118,-0x18a,-0x124,-0x11e)](_0x27c637,_0x11a1c2);}};if(_0x3110ce[_0x1603ee(0x23a,0x2de,0x30f,0x2c7)]('lLBCX',_0x3110ce[_0x1603ee(0x22b,0x2ca,0x20a,0x295)])){const _0x2c6b70=_0x3110ce[_0x1603ee(0x361,0x2fa,0x29d,0x2d5)](generateRequestId);console['log'](_0x576b9e(0x4a7,0x44d,0x493,0x4e3)+'mptModify]'+'\x20Requestin'+'g\x20outfit\x20m'+_0x576b9e(0x498,0x4ed,0x4f7,0x46e)+_0x1603ee(0x218,0x25e,0x285,0x277)+_0x2c6b70+')');const _0x2b200d=_0x2c9e3c=>{if(_0x51ecc7[_0x462467(0xe7,0x140,0x14d,0x1c1)](_0x2c9e3c['id'],_0x2c6b70))return;function _0x462467(_0x2b2420,_0x1fba2e,_0x58f57d,_0x54181d){return _0x1603ee(_0x2b2420-0x27,_0x54181d,_0x58f57d-0x3a,_0x58f57d- -0x19d);}function _0x19c50b(_0x2f7225,_0x1330a0,_0x359fd7,_0x409dc2){return _0x576b9e(_0x2f7225-0x184,_0x1330a0-0x1ea,_0x359fd7- -0x458,_0x2f7225);}eventSource[_0x462467(0x1a0,0x1db,0x183,0x130)+_0x19c50b(0x1a8,0x160,0x11b,0x149)](eventNames[_0x462467(0x214,0x1bc,0x186,0x1df)+_0x19c50b(0x10c,0x13b,0xee,0x139)+_0x462467(0x19b,0x1bd,0x140,0x170)+_0x19c50b(0x171,0x16d,0xfa,0x6f)],_0x2b200d),_0x396d34(_0x2c9e3c[_0x19c50b(0x11,0xed,0x94,0x1c)]);};eventSource['on'](eventNames[_0x576b9e(0x569,0x602,0x57b,0x5a2)+'ODIFY_GET_'+_0x576b9e(0x5bf,0x55a,0x535,0x4d5)+_0x576b9e(0x531,0x4dc,0x552,0x5c6)],_0x2b200d);const _0x1430a1={};_0x1430a1['id']=_0x2c6b70,eventSource[_0x576b9e(0x576,0x577,0x568,0x584)](eventNames[_0x576b9e(0x5d7,0x567,0x57b,0x5d6)+_0x1603ee(0x331,0x371,0x349,0x2ee)+_0x576b9e(0x560,0x486,0x4da,0x52b)+_0x1603ee(0x2f6,0x256,0x244,0x27f)],_0x1430a1),_0x3110ce[_0x1603ee(0x33f,0x2c0,0x368,0x2ff)](setTimeout,()=>{const _0x47d657={};_0x47d657[_0x369bce(0x20a,0x1f4,0x168,0x19e)]=function(_0x391416,_0x5e7c61){return _0x391416===_0x5e7c61;},_0x47d657[_0xa5f827(-0x23c,-0x2a6,-0x22e,-0x23e)]=_0x3110ce[_0x369bce(0x17c,0x1e0,0x1c8,0x1b0)];function _0xa5f827(_0x865ccb,_0x1ce736,_0x3bc5e5,_0x4b80b9){return _0x1603ee(_0x865ccb-0x16b,_0x4b80b9,_0x3bc5e5-0x17,_0x1ce736- -0x52b);}function _0x369bce(_0x3821e1,_0x1f6ab6,_0x21b16a,_0x54ec96){return _0x576b9e(_0x3821e1-0x18f,_0x1f6ab6-0x1bc,_0x54ec96- -0x324,_0x3821e1);}const _0x437d97=_0x47d657;if(_0x3110ce[_0xa5f827(-0x1a7,-0x222,-0x1da,-0x1f2)]===_0x3110ce[_0xa5f827(-0x292,-0x222,-0x1f8,-0x287)])eventSource['removeList'+'ener'](eventNames[_0x369bce(0x2e3,0x26f,0x25e,0x257)+'ODIFY_GET_'+_0xa5f827(-0x203,-0x24e,-0x2c1,-0x279)+_0xa5f827(-0x286,-0x231,-0x1d9,-0x21d)],_0x2b200d),_0x3110ce[_0xa5f827(-0x35c,-0x2ec,-0x2fc,-0x35a)](_0x5ec46c,new Error(_0x369bce(0x1db,0x122,0x1dc,0x159)+'时'));else{if(_0x437d97[_0xa5f827(-0x296,-0x2c1,-0x2b8,-0x27f)](_0x3b75dc['type'],_0x437d97[_0xa5f827(-0x2f2,-0x2a6,-0x238,-0x2de)])&&_0x4fc6f0['text'][_0xa5f827(-0x1ee,-0x20d,-0x1b3,-0x1be)](_0x24188f))return _0x52bfba;}},-0x2fc6+0x4b2*-0x4+0x699e);}else _0x3c49d4['outfits'][_0x1603ee(0x1b6,0x1b0,0x2bb,0x230)](_0x58f6a4);});}export function LLM_OUTFIT_MODIFY(_0x330011,_0x2330f4={}){const _0xafada4={'WScxm':function(_0x410f26,_0x6687f3){return _0x410f26!==_0x6687f3;},'jnrwx':_0x589aa8(0x2db,0x25f,0x2c7,0x2b1),'LSabf':_0x4a1000(0x3a7,0x362,0x3d7,0x3ea),'CtoUb':function(_0x1d07cc,_0x5d12f6){return _0x1d07cc(_0x5d12f6);},'Uikcg':function(_0xd53cbf,_0x321225){return _0xd53cbf===_0x321225;},'EvKSx':_0x589aa8(0x315,0x363,0x37c,0x2f5),'aXciS':_0x589aa8(0x305,0x323,0x338,0x36c),'tjhxe':_0x589aa8(0x360,0x2d2,0x35f,0x30a),'zaLWN':_0x4a1000(0x377,0x315,0x39a,0x388)};function _0x4a1000(_0x243e4c,_0x42d1aa,_0x535308,_0x4cfc59){return _0x229c23(_0x243e4c-0x96,_0x243e4c-0x1ac,_0x535308-0x43,_0x42d1aa);}function _0x589aa8(_0x5a94e6,_0x1bd4bc,_0x56bea7,_0x172af3){return _0x229c23(_0x5a94e6-0x40,_0x5a94e6-0x121,_0x56bea7-0x15f,_0x172af3);}return new Promise((_0x2c323f,_0x27ae3d)=>{const _0xd2c104={'LrOLt':'(((.+)+)+)'+'+$','DQMUL':function(_0x3ecd40,_0x3a96b6){function _0x44a3e1(_0x5914c4,_0x1a2bc8,_0x2a22fe,_0x578903){return _0x2086(_0x578903-0x213,_0x5914c4);}return _0xafada4[_0x44a3e1(0x3cd,0x33b,0x3cb,0x361)](_0x3ecd40,_0x3a96b6);},'vrLIi':function(_0x1b2900,_0x1c76ca){function _0x187943(_0x1b2ade,_0x2a2e7b,_0x385098,_0x5a57e3){return _0x2086(_0x5a57e3- -0xea,_0x1b2ade);}return _0xafada4[_0x187943(0x11,-0x16,0x44,-0x4)](_0x1b2900,_0x1c76ca);},'KSebH':function(_0x3e61dc,_0x5bfd82){return _0xafada4['Uikcg'](_0x3e61dc,_0x5bfd82);},'HFxcG':_0xafada4[_0x6bb531(-0x18c,-0x1bb,-0x1ed,-0x20f)],'MIpAx':function(_0x347528,_0x42bc01){return _0xafada4['WScxm'](_0x347528,_0x42bc01);},'rbIfO':_0xafada4[_0x4cde75(0x33d,0x3c7,0x356,0x3a4)],'NoyOa':_0xafada4[_0x6bb531(-0x2f0,-0x24d,-0x2ac,-0x2dd)],'VLMfJ':_0xafada4[_0x6bb531(-0x23b,-0x2b3,-0x2a8,-0x240)]},_0x20ee42=generateRequestId();function _0x6bb531(_0x55d910,_0x2fc306,_0x30fbf4,_0x3f7a64){return _0x4a1000(_0x30fbf4- -0x5fe,_0x55d910,_0x30fbf4-0x43,_0x3f7a64-0x4b);}function _0x4cde75(_0x3c879c,_0x44f73d,_0x6295d6,_0x593679){return _0x589aa8(_0x44f73d-0x64,_0x44f73d-0xf7,_0x6295d6-0x172,_0x3c879c);}const _0x535eb8=_0x2330f4[_0x6bb531(-0x1ed,-0x1e7,-0x22c,-0x2a7)]||0x18778+0x15949+0xa9*-0x2f9;console[_0x4cde75(0x3b5,0x39d,0x32e,0x3e9)](_0x4cde75(0x342,0x333,0x38c,0x3a9)+'mptModify]'+_0x4cde75(0x3a4,0x3f1,0x3eb,0x3d9)+_0x6bb531(-0x2d7,-0x26e,-0x27b,-0x2d5)+_0x6bb531(-0x277,-0x1b7,-0x1ee,-0x19c)+_0x4cde75(0x36f,0x3ba,0x350,0x41c)+':\x20'+_0x20ee42+')');const _0x5e01ec=_0x44a5d5=>{const _0x583dab={'WsqrI':function(_0x5db208,_0x5ddbf0){function _0x490576(_0x57dc53,_0x4dab75,_0x2fcba1,_0x34efd8){return _0x2086(_0x2fcba1- -0x340,_0x34efd8);}return _0xd2c104[_0x490576(-0x1e1,-0x208,-0x196,-0x1e9)](_0x5db208,_0x5ddbf0);},'wsMyv':'input'};if(_0xd2c104[_0x301902(0x1c7,0x222,0x198,0x1ed)](_0x44a5d5['id'],_0x20ee42))return;function _0x301902(_0xd5d56a,_0x5f542a,_0xfbaac2,_0x548f59){return _0x4cde75(_0x5f542a,_0x548f59- -0x21c,_0xfbaac2-0x1c0,_0x548f59-0x134);}eventSource[_0x301902(0x16e,0x199,0x211,0x1fc)+_0x129788(-0xa1,-0x7f,-0x59,-0x57)](eventNames[_0x129788(0x2b,0x5,-0x94,-0x4f)+'ODIFY_RESP'+_0x129788(-0x47,-0x108,-0x10,-0x89)],_0x5e01ec);function _0x129788(_0x2e2c5f,_0x175641,_0x4360c8,_0x2288ee){return _0x4cde75(_0x2e2c5f,_0x2288ee- -0x46a,_0x4360c8-0xc,_0x2288ee-0x10);}if(_0x44a5d5[_0x129788(-0x6,-0xa7,-0x68,-0x4a)]){if(_0xd2c104[_0x301902(0x227,0x184,0x1a1,0x1f0)](_0x301902(0x121,0xe4,0x1cc,0x15d),_0xd2c104[_0x301902(0x1c2,0x17a,0xd5,0x139)]))_0x2c323f(_0x44a5d5[_0x129788(-0x93,0x2c,0x38,-0x55)]);else{if(_0x2fc015[_0x13e035]){const _0x1224c2=_0x348756[_0x301902(0x17a,0xcd,0x125,0x128)+_0x129788(-0xa5,-0x137,-0x160,-0x116)](_0x129788(-0x68,-0x67,0x17,-0x77)+_0x194aec);_0x1224c2&&(_0x1224c2[_0x301902(0x13b,0xc8,0x1c6,0x149)]=_0x3994ff[_0x4d85d9],_0x583dab[_0x129788(-0x6,-0x9d,-0x8b,-0x6e)](_0x1fb35c,_0x1224c2)[_0x129788(-0x21,-0x88,-0x1a,-0x44)](_0x583dab[_0x129788(-0xae,-0xcc,-0x83,-0x6c)]));}}}else{if(_0xd2c104[_0x129788(0x3b,0x3d,-0xa,-0x51)](_0xd2c104[_0x301902(0x1b7,0x293,0x215,0x21a)],_0xd2c104['NoyOa']))_0x27ae3d(new Error(_0x44a5d5['result']||_0xd2c104['VLMfJ']));else return _0x5de3a0[_0x301902(0x156,0x19d,0x251,0x1e6)]()[_0x129788(-0xc1,-0x142,-0x89,-0xeb)](vOGOhD[_0x301902(0x22b,0x1dd,0x26c,0x1e4)])[_0x301902(0x271,0x1dd,0x22f,0x1e6)]()[_0x129788(-0xac,-0x6,-0x7b,-0x4e)+'r'](_0x3170a8)[_0x301902(0xf6,0x154,0xe9,0x163)](vOGOhD[_0x301902(0x172,0x267,0x225,0x1e4)]);}};eventSource['on'](eventNames[_0x4cde75(0x463,0x41b,0x3b1,0x3f1)+_0x6bb531(-0x1f2,-0x1d6,-0x24e,-0x28a)+'ONSE'],_0x5e01ec);const _0x4f5504={};_0x4f5504[_0x6bb531(-0x2bb,-0x24d,-0x24b,-0x25d)]=_0x330011,_0x4f5504['id']=_0x20ee42,eventSource['emit'](eventNames[_0x6bb531(-0x1be,-0x1a9,-0x1bc,-0x1bf)+_0x6bb531(-0x22b,-0x16a,-0x1da,-0x224)+'EST'],_0x4f5504),setTimeout(()=>{function _0x14cd48(_0x474fa7,_0x3fdcd8,_0x1ca859,_0x5a8fed){return _0x6bb531(_0x5a8fed,_0x3fdcd8-0x13e,_0x3fdcd8-0x4f6,_0x5a8fed-0xc5);}function _0x20dfc5(_0x13e384,_0x10cb13,_0x1bb436,_0xb7220){return _0x6bb531(_0x1bb436,_0x10cb13-0xd9,_0x10cb13-0x5f0,_0xb7220-0x43);}_0xafada4[_0x20dfc5(0x3b6,0x342,0x352,0x2d4)](_0xafada4[_0x14cd48(0x31b,0x326,0x3ab,0x2bf)],_0xafada4[_0x14cd48(0x356,0x347,0x2c2,0x385)])?(eventSource['removeList'+'ener'](eventNames[_0x20dfc5(0x409,0x434,0x3c2,0x421)+_0x20dfc5(0x417,0x3a2,0x40e,0x3a9)+_0x14cd48(0x310,0x300,0x37f,0x36b)],_0x5e01ec),_0xafada4[_0x20dfc5(0x3f1,0x3aa,0x439,0x3cd)](_0x27ae3d,new Error(_0x20dfc5(0x440,0x3de,0x3bf,0x3de)+_0x14cd48(0x279,0x266,0x268,0x1ec)))):_0x10de40[_0x20dfc5(0x3b3,0x341,0x2dd,0x2ca)](..._0x50283b[_0x20dfc5(0x31d,0x334,0x2d8,0x308)]);},_0x535eb8);});}function preprocessTagContent(_0x262c13){function _0x85d26(_0x3cc0c9,_0x59e47b,_0x47ae12,_0x2c66a8){return _0x229c23(_0x3cc0c9-0x48,_0x47ae12- -0x98,_0x47ae12-0x75,_0x3cc0c9);}let _0x19f336=_0x262c13['replace'](/:/g,':')['replace'](/\(/g,'（')['replace'](/\)/g,'）')[_0x85d26(0xeb,0x126,0x13d,0xe7)](/,/g,',');return _0x19f336;}function parseOutfitData(_0x426a63){function _0x32dd78(_0xdeb5c5,_0x477ddf,_0x414dac,_0x5844e3){return _0x229c23(_0xdeb5c5-0x46,_0x5844e3-0xb6,_0x414dac-0xc4,_0x414dac);}const _0xc86f29={};_0xc86f29[_0x575fdb(-0xb3,-0x67,-0x108,-0x116)]=_0x575fdb(-0xb6,-0x143,-0x12f,-0x107),_0xc86f29[_0x575fdb(-0x59,0xe,-0x67,-0xaa)]=_0x575fdb(-0x17,-0x9e,-0x67,-0x2a),_0xc86f29[_0x575fdb(-0x40,-0xc9,-0xa2,-0x8e)]=_0x575fdb(-0x4b,-0x93,0x6,-0xd0),_0xc86f29[_0x32dd78(0x2ec,0x2b7,0x2aa,0x2fc)]=_0x32dd78(0x3b8,0x307,0x3b9,0x337)+_0x32dd78(0x294,0x26a,0x2da,0x252),_0xc86f29[_0x32dd78(0x255,0x226,0x212,0x26f)]=_0x32dd78(0x319,0x31c,0x274,0x2af)+'ck',_0xc86f29[_0x32dd78(0x2c3,0x27c,0x270,0x29e)]=function(_0x5d9248,_0x3fc487){return _0x5d9248===_0x3fc487;},_0xc86f29['GdxSB']=function(_0x40e74c,_0x5addc3){return _0x40e74c+_0x5addc3;},_0xc86f29['QNJch']=_0x32dd78(0x333,0x308,0x3c5,0x358),_0xc86f29[_0x575fdb(-0xd6,-0x132,-0x7a,-0x120)]=function(_0x4d1991,_0x30bfa5){return _0x4d1991&&_0x30bfa5;},_0xc86f29[_0x575fdb(-0x9c,-0x65,-0x69,-0x2e)]=_0x32dd78(0x36b,0x28b,0x346,0x2fb),_0xc86f29[_0x32dd78(0x326,0x320,0x331,0x2df)]=_0x32dd78(0x296,0x251,0x286,0x264)+'mptModify]'+'\x20解析到的服装数据:';const _0x34f40a=_0xc86f29,_0x416424=_0x426a63['split']('\x0a')[_0x32dd78(0x291,0x2fe,0x345,0x2b9)](_0x34479e=>_0x34479e[_0x575fdb(-0x95,-0xa,-0x5a,-0x9b)]())[_0x32dd78(0x246,0x2e2,0x26a,0x2c0)](_0x57a062=>_0x57a062),_0x5d930e={};_0x5d930e[_0x32dd78(0x389,0x3ae,0x29d,0x320)]='',_0x5d930e[_0x575fdb(-0x4b,-0x3b,-0x8f,-0xe)]='',_0x5d930e['upperBody']='',_0x5d930e['upperBodyB'+_0x575fdb(-0xe5,-0xe4,-0xb5,-0xc7)]='',_0x5d930e[_0x575fdb(-0xbd,-0xce,-0x12d,-0x136)]='',_0x5d930e[_0x575fdb(-0x88,-0xd4,-0x1e,-0x3a)+'ck']='';const _0x3cf569=_0x5d930e,_0xd2904f={};_0xd2904f[_0x32dd78(0x247,0x2ef,0x218,0x294)]=_0x34f40a[_0x32dd78(0x331,0x2ac,0x2d5,0x2de)],_0xd2904f[_0x32dd78(0x267,0x2f4,0x31b,0x2d6)]=_0x34f40a[_0x32dd78(0x2f8,0x350,0x37f,0x2f7)],_0xd2904f[_0x575fdb(-0xe1,-0x13e,-0x75,-0x63)]='upperBody',_0xd2904f[_0x32dd78(0x2cf,0x2c5,0x26b,0x2b3)]=_0x34f40a[_0x575fdb(-0x3b,-0x65,-0xf,0x20)],_0xd2904f[_0x575fdb(-0x4a,0x6,-0x63,-0x1b)]=_0x32dd78(0x1f1,0x1f4,0x2c2,0x27a),_0xd2904f['下半身服装']=_0x575fdb(-0xbd,-0x140,-0x87,-0x65);function _0x575fdb(_0x4fbc55,_0x28f382,_0x4b4a32,_0x2402b1){return _0x229c23(_0x4fbc55-0xeb,_0x4fbc55- -0x281,_0x4b4a32-0x12c,_0x4b4a32);}_0xd2904f[_0x32dd78(0x2eb,0x2ca,0x228,0x26d)]=_0x34f40a[_0x575fdb(-0xc8,-0x128,-0x10a,-0xbe)];const _0x40d23f=_0xd2904f;for(const _0x2334af of _0x416424){const _0x2f34f0=_0x2334af[_0x575fdb(-0x12,0x5a,-0x80,-0x81)](':');if(_0x34f40a[_0x575fdb(-0x99,-0x124,-0x11e,-0x4c)](_0x2f34f0,-(0x2282+0x2b*-0xc3+0xe0*-0x2)))continue;const _0x471979=_0x2334af[_0x575fdb(0x2d,-0xb,0x43,0x35)](-0x852+-0x14b*0x4+-0x13a*-0xb,_0x2f34f0)[_0x32dd78(0x26e,0x25f,0x31e,0x2a2)](),_0x4f8dd1=_0x2334af[_0x575fdb(0x2d,0xa,-0x43,-0x3d)](_0x34f40a[_0x575fdb(-0x29,-0x8f,0x4e,-0x4b)](_0x2f34f0,0x1cdb+0x106f+-0x2d49))[_0x575fdb(-0x95,-0x54,-0x1e,-0x64)]();if(_0x40d23f[_0x471979]){if(_0x34f40a['QNJch']!==_0x34f40a['QNJch'])return _0x1321e2[_0x32dd78(0x319,0x33d,0x33c,0x2c9)]();else _0x3cf569[_0x40d23f[_0x471979]]=_0x4f8dd1;}else _0x34f40a['obarb'](_0x471979,_0x4f8dd1)&&console['log']('[outfitPro'+_0x32dd78(0x29d,0x1ef,0x247,0x267)+_0x575fdb(-0x9f,-0xf3,-0x128,-0xae)+'\x22'+_0x471979+'\x22');}if(!_0x3cf569[_0x32dd78(0x386,0x3a3,0x2fc,0x320)]){if(_0x34f40a[_0x575fdb(-0x9c,-0x5e,-0xff,-0x29)]!==_0x34f40a[_0x32dd78(0x264,0x255,0x282,0x29b)])_0x3e2aba(new _0x2581b4(_0x2896a1[_0x575fdb(0xf,-0x51,-0x61,-0x9)]||_0x34f40a[_0x32dd78(0x243,0x249,0x2b6,0x284)]));else return null;}return console[_0x575fdb(-0x69,-0x5e,-0x21,-0x75)](_0x34f40a[_0x575fdb(-0x58,-0x1a,0x28,-0xb)],_0x3cf569),_0x3cf569;}function extractOutfitTags(_0x29183c){function _0x3778aa(_0x1ca355,_0x9c7b9f,_0x3701dd,_0xa90ca){return _0x229c23(_0x1ca355-0x1ca,_0x1ca355- -0x250,_0x3701dd-0x1ba,_0xa90ca);}const _0x20065e={'qrKIL':function(_0x4af9c9,_0x4b989c){return _0x4af9c9!==_0x4b989c;},'gXpGI':function(_0x4528fa,_0x30dcaf){return _0x4528fa(_0x30dcaf);},'Mxxym':function(_0xc71089,_0xf1bb9e){return _0xc71089(_0xf1bb9e);}},_0xf26072={};_0xf26072['outfits']=[];function _0x1f6526(_0x4a296d,_0x3e2e8d,_0xe07eae,_0x5ca819){return _0x229c23(_0x4a296d-0x92,_0xe07eae-0xa7,_0xe07eae-0x1b5,_0x3e2e8d);}const _0x44fac0=_0xf26072;_0x29183c=_0x29183c['replace'](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x3778aa(-0x64,-0x1e,-0xdd,-0x3a)]();const _0x3a2eb9=/<服装>([\s\S]*?)<\/服装>/g;let _0x3eec46;while(_0x20065e[_0x1f6526(0x1fd,0x285,0x26e,0x282)](_0x3eec46=_0x3a2eb9['exec'](_0x29183c),null)){const _0x2f6c8c=_0x20065e[_0x3778aa(-0x90,-0x14,-0xdc,-0x16)](preprocessTagContent,_0x3eec46[0x1673+-0xe21+-0x851]),_0x49a1bb=_0x20065e['Mxxym'](parseOutfitData,_0x2f6c8c);_0x49a1bb&&_0x44fac0['outfits'][_0x1f6526(0x1bc,0x219,0x24a,0x25a)](_0x49a1bb);}return _0x44fac0;}function getCurrentOutfitPreset(){const _0x23a4fd=extension_settings[extensionName];function _0x27ad34(_0x18fb7a,_0x243732,_0x328218,_0xeca068){return _0x229c23(_0x18fb7a-0xb,_0x18fb7a- -0x151,_0x328218-0x185,_0x328218);}function _0x32c4ae(_0x57383b,_0x17b1f4,_0x506478,_0x2e5137){return _0x229c23(_0x57383b-0x2c,_0x57383b-0x1c1,_0x506478-0xf3,_0x506478);}const _0x575861=_0x23a4fd[_0x32c4ae(0x41b,0x472,0x3e3,0x3d5)+_0x32c4ae(0x387,0x326,0x403,0x393)];if(!_0x575861||!_0x23a4fd[_0x27ad34(0x109,0x99,0xd6,0xa5)+_0x32c4ae(0x360,0x3a9,0x319,0x372)][_0x575861])return null;const _0x349d7e={};return _0x349d7e['id']=_0x575861,_0x349d7e['data']=_0x23a4fd['outfitPres'+_0x32c4ae(0x360,0x2f9,0x391,0x3b0)][_0x575861],_0x349d7e;}function _0x2086(_0x3a726f,_0x2f1f48){_0x3a726f=_0x3a726f-(-0x1a4*0x8+-0x14a+-0x12*-0xd9);const _0x3b4c6c=_0x5b42();let _0x10de40=_0x3b4c6c[_0x3a726f];if(_0x2086['XGMNQf']===undefined){var _0x50283b=function(_0x301e2a){const _0x31c615='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xb4c41='',_0x484d4c='',_0x38d883=_0xb4c41+_0x50283b;for(let _0x11fe26=0x1aad+-0x1bed*-0x1+-0x1*0x369a,_0x1b2945,_0x598939,_0x5071a2=-0x314+-0x2663+-0xc1*-0x37;_0x598939=_0x301e2a['charAt'](_0x5071a2++);~_0x598939&&(_0x1b2945=_0x11fe26%(0xbd2+0x180b+-0x23d9)?_0x1b2945*(-0x91f+-0x1349+0x1ca8)+_0x598939:_0x598939,_0x11fe26++%(0x4f2+-0x4*-0x75c+-0x225e))?_0xb4c41+=_0x38d883['charCodeAt'](_0x5071a2+(-0x619+-0x5*0x2e+0x709))-(-0x84+-0x1eaa+0x1f38)!==-0x1*0x1b97+-0x1b*0x10f+0x382c?String['fromCharCode'](0xde9*0x1+0x11d*0x22+-0x169*0x24&_0x1b2945>>(-(-0x103d+0x52f*-0x1+0xd3*0x1a)*_0x11fe26&-0xe8b+0x1*0x940+0x551)):_0x11fe26:0x2+0x739*0x1+-0x73b){_0x598939=_0x31c615['indexOf'](_0x598939);}for(let _0x231847=0x76*-0x2c+-0x18c0+-0xb42*-0x4,_0x3a2a80=_0xb4c41['length'];_0x231847<_0x3a2a80;_0x231847++){_0x484d4c+='%'+('00'+_0xb4c41['charCodeAt'](_0x231847)['toString'](-0x23bd+-0x7*0x18d+0x4*0xbaa))['slice'](-(-0xf94*-0x1+-0x2027+0x1095));}return decodeURIComponent(_0x484d4c);};_0x2086['AlsPkB']=_0x50283b,_0x2086['jXwhyX']={},_0x2086['XGMNQf']=!![];}const _0x34fe59=_0x3b4c6c[-0x2191+0x64a+0x1b47],_0x502461=_0x3a726f+_0x34fe59,_0x405f9f=_0x2086['jXwhyX'][_0x502461];if(!_0x405f9f){const _0x13f491=function(_0x5be085){this['RFjXoB']=_0x5be085,this['DUJHUC']=[0x1*-0xb5a+-0x78b*-0x1+0x3d0,-0xf24+-0xc5+0xfe9*0x1,0x127+-0x16d7+0x15b0],this['VAmHol']=function(){return'newState';},this['IIIiDy']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['FtyCQx']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x13f491['prototype']['jDFpmE']=function(){const _0x537b0c=new RegExp(this['IIIiDy']+this['FtyCQx']),_0x486ed9=_0x537b0c['test'](this['VAmHol']['toString']())?--this['DUJHUC'][0xce0+0x89*-0x29+0x912]:--this['DUJHUC'][0x117*-0xc+-0x2*-0x35e+-0x2*-0x32c];return this['BYKeYG'](_0x486ed9);},_0x13f491['prototype']['BYKeYG']=function(_0x4e3ece){if(!Boolean(~_0x4e3ece))return _0x4e3ece;return this['WNYkxA'](this['RFjXoB']);},_0x13f491['prototype']['WNYkxA']=function(_0x380bf0){for(let _0x2a0854=-0x58*-0x18+0x22*0x79+0x1*-0x1852,_0x200d5d=this['DUJHUC']['length'];_0x2a0854<_0x200d5d;_0x2a0854++){this['DUJHUC']['push'](Math['round'](Math['random']())),_0x200d5d=this['DUJHUC']['length'];}return _0x380bf0(this['DUJHUC'][0x1*-0x115f+-0x9ac+-0x7*-0x3dd]);},new _0x13f491(_0x2086)['jDFpmE'](),_0x10de40=_0x2086['AlsPkB'](_0x10de40),_0x2086['jXwhyX'][_0x502461]=_0x10de40;}else _0x10de40=_0x405f9f;return _0x10de40;}function buildOutfitText(_0x5d459a){function _0x37a33b(_0x2e4cfa,_0x28445c,_0x1faadd,_0x4ffca3){return _0x229c23(_0x2e4cfa-0xb,_0x4ffca3- -0x3f4,_0x1faadd-0x1e0,_0x2e4cfa);}const _0x49b493={};_0x49b493['FmrIn']='<服装>\x0a',_0x49b493[_0x37a33b(-0x100,-0xf4,-0x1e6,-0x16b)]='</服装>';const _0x1496ce=_0x49b493,_0x283486=_0x5d459a['data'];let _0x1dacdc=_0x1496ce[_0x37a33b(-0x227,-0x249,-0x1d8,-0x1eb)];_0x1dacdc+='中文名称:\x20'+(_0x283486[_0x37a33b(-0x1c5,-0x1f5,-0x104,-0x18a)]||'')+'\x0a',_0x1dacdc+='英文名称:\x20'+(_0x283486[_0x37a33b(-0x210,-0x190,-0x22c,-0x1be)]||'')+'\x0a',_0x1dacdc+=_0xf7f0c9(0x22f,0x23f,0x1eb,0x1ae)+(_0x283486['upperBody']||'')+'\x0a';function _0xf7f0c9(_0x2f5324,_0x5f10c8,_0xd47ed1,_0x1e17ce){return _0x229c23(_0x2f5324-0x173,_0xd47ed1- -0x64,_0xd47ed1-0x9f,_0x5f10c8);}return _0x1dacdc+=_0x37a33b(-0x235,-0x1e6,-0x28e,-0x233)+(_0x283486[_0xf7f0c9(0x283,0x27b,0x21d,0x22f)+_0x37a33b(-0x2e5,-0x1fd,-0x20b,-0x258)]||'')+'\x0a',_0x1dacdc+='下半身:\x20'+(_0x283486[_0x37a33b(-0x1bc,-0x215,-0x1ea,-0x230)]||'')+'\x0a',_0x1dacdc+=_0xf7f0c9(0x180,0x190,0x1b5,0x17e)+(_0x283486[_0x37a33b(-0x223,-0x284,-0x178,-0x1fb)+'ck']||'')+'\x0a',_0x1dacdc+=_0x1496ce['uzdoD'],_0x1dacdc;}export async function handleOutfitPromptModify(_0x50b971,_0x5c6bff=[]){const _0x1f0ea2={'cXHaL':_0x4a459d(0x1f4,0x17e,0x264,0x202),'jyjMq':_0x4a459d(0x174,0x15d,0x126,0x103)+'mptModify]'+'\x20Starting\x20'+_0x4a459d(0x270,0x2bb,0x2fc,0x1e5)+_0x465b7d(0x30c,0x2cd,0x347,0x313)+'\x20request..'+'.','qLkkp':'正在处理服装提示词修'+_0x4a459d(0x15d,0x1eb,0x19f,0x1e6),'cVNZb':function(_0x4ad9ac){return _0x4ad9ac();},'HUEgE':_0x4a459d(0x174,0xe6,0x117,0x11f)+_0x465b7d(0x28d,0x2e9,0x209,0x277)+'\x20Current\x20p'+'reset:','ESvwO':function(_0xf0a973,_0x47c520){return _0xf0a973(_0x47c520);},'FAxCf':function(_0x435154,_0x3e9f99){return _0x435154||_0x3e9f99;},'YIWbH':function(_0x17acce,_0xe0e0b3,_0x1b5157){return _0x17acce(_0xe0e0b3,_0x1b5157);},'eyTPf':_0x4a459d(0x203,0x265,0x1f3,0x281)+'y','deCTn':function(_0x27cb56,_0x46113f,_0x3e1c5a,_0x1c756e,_0x562291){return _0x27cb56(_0x46113f,_0x3e1c5a,_0x1c756e,_0x562291);},'ycYaW':'{{服装列表}}','FLJXg':_0x4a459d(0x183,0x18a,0x1ca,0x1d6),'tBnWy':_0x4a459d(0x19f,0x139,0x21a,0x226),'YpTuX':'{{上下文}}','rvAho':_0x4a459d(0x1fe,0x1a9,0x1b5,0x255),'VqyIL':function(_0x5461a6,_0x257dda,_0x669f1d,_0x550326,_0x13c20f){return _0x5461a6(_0x257dda,_0x669f1d,_0x550326,_0x13c20f);},'HeKBN':_0x4a459d(0x265,0x2d3,0x2de,0x2cf),'rlHMo':'{{通用角色启用列表'+'}}','uLVaM':_0x4a459d(0x174,0x1b2,0x10d,0x132)+_0x465b7d(0x28d,0x266,0x295,0x272)+'\x20Final\x20pro'+_0x4a459d(0x25f,0x20d,0x286,0x1ee),'YrWlx':function(_0x55af65,_0x38e880){return _0x55af65>_0x38e880;},'FmUuP':function(_0x384312,_0x2c4847){return _0x384312>_0x2c4847;},'cxhsP':function(_0x58b3fd,_0x209ec1){return _0x58b3fd>=_0x209ec1;},'yzyeK':'参考图片','fKENk':_0x4a459d(0x174,0x195,0x131,0x105)+'mptModify]'+_0x4a459d(0x1d7,0x218,0x23f,0x15b),'Vxhjc':_0x4a459d(0x276,0x228,0x2d7,0x2e4)+_0x465b7d(0x2fb,0x2e2,0x27c,0x277)+_0x465b7d(0x32a,0x2c6,0x32b,0x30c),'vTvKu':function(_0x3b3916,_0xba8a48,_0x4515bf){return _0x3b3916(_0xba8a48,_0x4515bf);},'oEhYX':'[outfitPro'+_0x465b7d(0x28d,0x29b,0x294,0x2fc)+'\x20LLM\x20outpu'+'t:','bGpRx':_0x4a459d(0x244,0x1bc,0x1f5,0x2c8),'vZvTq':function(_0x38fc2e,_0x1c4976){return _0x38fc2e(_0x1c4976);},'FslQC':'[outfitPro'+_0x465b7d(0x28d,0x2d9,0x2ee,0x2c2)+_0x4a459d(0x173,0x1e1,0x1d4,0x1be)+_0x4a459d(0x16f,0x17f,0x191,0x1e4)+_0x4a459d(0x219,0x1f6,0x25f,0x24b),'aCkiK':function(_0x3211ec,_0x3a3562,_0x1ef77a){return _0x3211ec(_0x3a3562,_0x1ef77a);},'Mhvac':function(_0x3f57b3,_0x3d643d){return _0x3f57b3!==_0x3d643d;},'ZheHQ':_0x4a459d(0x1bd,0x1a6,0x1cc,0x205),'cIFKp':'[outfitPro'+_0x465b7d(0x28d,0x2d7,0x25d,0x315)+_0x465b7d(0x303,0x27d,0x38a,0x390)};function _0x465b7d(_0x27b636,_0xb31d71,_0x3a7677,_0x387dcc){return _0x229c23(_0x27b636-0xe7,_0x27b636-0xdc,_0x3a7677-0x12,_0xb31d71);}console[_0x4a459d(0x1de,0x1aa,0x151,0x25b)](_0x1f0ea2[_0x465b7d(0x2b4,0x227,0x241,0x313)]);function _0x4a459d(_0x3bb982,_0x2c6121,_0x48b5e6,_0x579547){return _0x229c23(_0x3bb982-0x16f,_0x3bb982- -0x3a,_0x48b5e6-0xcf,_0x579547);}toastr[_0x4a459d(0x1f0,0x1a6,0x22f,0x19a)](_0x1f0ea2['qLkkp']);try{const _0x4f9cde=extension_settings[extensionName],_0x15f72f=_0x1f0ea2[_0x465b7d(0x2dd,0x29e,0x28a,0x300)](getCurrentOutfitPreset);if(!_0x15f72f){toastr[_0x4a459d(0x1a0,0x18c,0x222,0x1c3)](_0x465b7d(0x381,0x305,0x3ee,0x31e));return;}console[_0x465b7d(0x2f4,0x346,0x2ba,0x26a)](_0x1f0ea2[_0x4a459d(0x1d5,0x1f9,0x23b,0x174)],_0x15f72f['id']);const _0x23ab1e=_0x1f0ea2['ESvwO'](buildOutfitText,_0x15f72f),_0xbab170=[_0x1f0ea2[_0x465b7d(0x276,0x2ec,0x25d,0x1f6)](_0x50b971,''),_0x23ab1e][_0x465b7d(0x2e6,0x352,0x31a,0x2aa)](Boolean)[_0x4a459d(0x201,0x226,0x1e5,0x184)]('\x0a');let _0x14a7b0=_0x1f0ea2['YIWbH'](buildPromptForRequestType,_0x1f0ea2['eyTPf'],_0xbab170);const _0x5d8b7b=new Set(),_0x21ca7b=_0x1f0ea2['YIWbH'](findMessageIndexWithPlaceholder,_0x14a7b0,_0x465b7d(0x299,0x211,0x22e,0x20f));console[_0x4a459d(0x1de,0x159,0x267,0x26a)]('[outfitPro'+'mptModify]'+_0x4a459d(0x23c,0x24f,0x240,0x1f0)+_0x465b7d(0x2f0,0x303,0x295,0x332)+_0x465b7d(0x2a4,0x295,0x22c,0x331)+'x:',_0x21ca7b),_0x14a7b0=_0x1f0ea2['deCTn'](replacePlaceholder,_0x14a7b0,_0x465b7d(0x2a1,0x30c,0x2eb,0x2f1),_0x23ab1e,_0x5d8b7b),_0x14a7b0=_0x1f0ea2[_0x465b7d(0x333,0x2fb,0x3a2,0x3ac)](replacePlaceholder,_0x14a7b0,_0x1f0ea2[_0x4a459d(0x25e,0x244,0x269,0x20b)],_0x23ab1e,_0x5d8b7b),_0x14a7b0=_0x1f0ea2['deCTn'](replacePlaceholder,_0x14a7b0,_0x1f0ea2[_0x465b7d(0x2f6,0x33a,0x2e5,0x342)],_0x1f0ea2[_0x465b7d(0x276,0x21c,0x218,0x2f6)](_0x50b971,''),_0x5d8b7b),_0x14a7b0=replacePlaceholder(_0x14a7b0,_0x1f0ea2[_0x465b7d(0x33c,0x3bf,0x33e,0x2c9)],'',_0x5d8b7b),_0x14a7b0=replacePlaceholder(_0x14a7b0,_0x1f0ea2[_0x4a459d(0x1ac,0x218,0x1af,0x18a)],'',_0x5d8b7b),_0x14a7b0=replacePlaceholder(_0x14a7b0,_0x1f0ea2['rvAho'],'',_0x5d8b7b),_0x14a7b0=_0x1f0ea2['VqyIL'](replacePlaceholder,_0x14a7b0,_0x1f0ea2[_0x465b7d(0x2cd,0x240,0x318,0x290)],'',_0x5d8b7b),_0x14a7b0=replacePlaceholder(_0x14a7b0,'{{通用服装启用列表'+'}}','',_0x5d8b7b),_0x14a7b0=_0x1f0ea2[_0x4a459d(0x17a,0x10a,0x14a,0x105)](replacePlaceholder,_0x14a7b0,_0x1f0ea2[_0x4a459d(0x20f,0x281,0x1a4,0x245)],'',_0x5d8b7b),console['log'](_0x1f0ea2[_0x4a459d(0x237,0x1dc,0x1f7,0x225)],_0x14a7b0);let _0x4259e3='';_0x1f0ea2['YrWlx'](_0x5d8b7b[_0x465b7d(0x33a,0x36a,0x340,0x3b5)],-0x97b+0x1*0x2474+-0x1af9)&&(_0x4259e3=_0x4a459d(0x252,0x283,0x2d0,0x23a)+_0x465b7d(0x2ad,0x21f,0x295,0x30b)+[..._0x5d8b7b][_0x4a459d(0x201,0x246,0x188,0x25c)]('、')+'\x0a');_0x5c6bff&&_0x1f0ea2[_0x4a459d(0x1b9,0x19e,0x14f,0x225)](_0x5c6bff[_0x4a459d(0x236,0x1ea,0x2b4,0x278)],-0x12c*0x1d+-0x1a92+-0x3c8e*-0x1)&&_0x1f0ea2[_0x4a459d(0x213,0x293,0x2a1,0x1e0)](_0x21ca7b,-0x1*0x25fd+-0x9*-0x2ec+-0xbb1*-0x1)&&(_0x14a7b0=_0x1f0ea2[_0x465b7d(0x290,0x295,0x25d,0x2c8)](attachImagesToMessage,_0x14a7b0,_0x21ca7b,_0x5c6bff,_0x1f0ea2['yzyeK']),console[_0x465b7d(0x2f4,0x2ea,0x334,0x2dd)](_0x1f0ea2['fKENk'],_0x5c6bff['length'],_0x1f0ea2[_0x4a459d(0x271,0x2c4,0x219,0x226)],_0x21ca7b));_0x1f0ea2[_0x465b7d(0x345,0x38e,0x2fc,0x2c4)](updateCombinedPrompt,_0x14a7b0,_0x4259e3);const _0x2fcfac={};_0x2fcfac['timeoutMs']=0x493e0;const _0x25d3b2=await LLM_OUTFIT_MODIFY(_0x14a7b0,_0x2fcfac);console[_0x465b7d(0x2f4,0x2d3,0x2cf,0x28e)](_0x1f0ea2[_0x4a459d(0x258,0x1fb,0x1d5,0x2cc)],_0x25d3b2);if(!_0x25d3b2){toastr[_0x4a459d(0x1a0,0x162,0x156,0x1e9)](_0x1f0ea2[_0x465b7d(0x298,0x2d8,0x2cb,0x2ac)]);return;}const _0x20ab8f=_0x1f0ea2[_0x4a459d(0x1af,0x192,0x130,0x17f)](extractOutfitTags,_0x25d3b2);if(_0x20ab8f[_0x465b7d(0x382,0x40d,0x339,0x397)][_0x465b7d(0x34c,0x2f9,0x2d4,0x321)]===0x211a+-0xa*-0x47+-0xa4*0x38){toastr[_0x465b7d(0x2e1,0x2df,0x2e0,0x26f)](_0x4a459d(0x1dd,0x1ed,0x1bd,0x1bd)+_0x465b7d(0x390,0x340,0x33b,0x33d)),console[_0x4a459d(0x1de,0x26e,0x254,0x1aa)](_0x1f0ea2['FslQC'],_0x25d3b2);return;}console[_0x4a459d(0x1de,0x1e2,0x168,0x23e)](_0x465b7d(0x28a,0x245,0x305,0x2e2)+'mptModify]'+_0x4a459d(0x18f,0x18b,0x15a,0x1db)+_0x4a459d(0x1d4,0x19c,0x235,0x1e9),_0x20ab8f);const _0x215bab=_0x20ab8f['outfits'][0x2a8*-0x3+0x1a3f+0x1247*-0x1];await _0x1f0ea2[_0x465b7d(0x37a,0x369,0x3cd,0x408)](updateOutfitPresetFromLLM,_0x15f72f['id'],_0x215bab),toastr[_0x4a459d(0x261,0x2cc,0x1f4,0x1f4)](_0x465b7d(0x376,0x3ee,0x32b,0x36a));}catch(_0x9c376a){_0x1f0ea2['Mhvac'](_0x1f0ea2['ZheHQ'],_0x1f0ea2[_0x465b7d(0x2ca,0x33a,0x260,0x31b)])?(_0x4140eb['value']=_0x560849[_0x2b540a],_0x1682e3(_0x44333f)['trigger'](_0x1f0ea2[_0x4a459d(0x176,0x1ac,0x11a,0x178)])):(console[_0x4a459d(0x1a0,0x15e,0x1d3,0x1a7)](_0x1f0ea2['cIFKp'],_0x9c376a),toastr[_0x465b7d(0x2b6,0x252,0x22f,0x313)]('服装提示词修改失败:'+'\x20'+_0x9c376a[_0x4a459d(0x23a,0x1c4,0x20f,0x26d)]));}}async function updateOutfitPresetFromLLM(_0x239a74,_0x11ddfd){const _0x9015ae={'nnvUE':_0x107700(0x214,0x141,0x136,0x1b3),'VsCzT':function(_0x506b24,_0xe8ff1f){return _0x506b24>_0xe8ff1f;},'wQBcN':_0x12a520(-0x100,-0x152,-0xc8,-0x12d),'pjdFE':function(_0x166c7b,_0x4da6a6){return _0x166c7b>_0x4da6a6;},'DeOfx':_0x107700(0x164,0x19c,0x124,0x1aa),'ILHQr':function(_0x868e23,_0x222585){return _0x868e23===_0x222585;},'vpnnf':_0x12a520(0x45,-0x99,-0x42,0x3),'lMDVK':function(_0x5d87e7,_0x4481e4){return _0x5d87e7===_0x4481e4;},'jHjRy':_0x12a520(-0x107,-0x10d,-0xdf,-0xb1),'ZxCEb':function(_0x103502,_0x394cf9){return _0x103502+_0x394cf9;},'mQHhL':'data:','LLBIZ':_0x12a520(-0x6f,-0x78,-0xda,-0xe2),'qMsCS':_0x12a520(-0x12e,-0x138,-0xf7,-0xf5),'uRVIC':_0x12a520(-0x156,-0x10c,-0x117,-0xaf),'nSeTq':_0x107700(0x14c,0x21a,0x1d1,0x18c),'jquyZ':_0x107700(0xb0,0x7f,0xce,0x10c),'leUBi':'下半身','NVOZn':'下半身背面','QFaoF':_0x107700(0x263,0x26c,0x222,0x214),'CGAtW':function(_0x8cc9f1,_0x3c2877){return _0x8cc9f1!==_0x3c2877;},'caVgA':function(_0x3cd423,_0x1b43e0){return _0x3cd423===_0x1b43e0;},'dvPtG':function(_0x3a2644,_0x7694a4){return _0x3a2644!==_0x7694a4;},'RszLG':_0x107700(0x15d,0x16a,0x120,0x107),'doCfh':'没有检测到需要更新的'+'内容','ttSxF':function(_0xf3c458,_0x1ca003){return _0xf3c458(_0x1ca003);},'YJfCX':_0x12a520(-0x6d,-0x8f,-0x9f,-0x93),'btuHi':'gviiX','mCQpT':_0x12a520(-0xc6,-0x10a,-0x8f,-0x74),'cOiOT':function(_0x449714,_0x40d488){return _0x449714===_0x40d488;},'bCpcy':_0x12a520(-0xb8,-0xdd,-0x8e,-0xbb),'nRQlT':function(_0x42e745){return _0x42e745();},'Cjmhn':'#st-chatu8'+_0x12a520(-0xc9,-0x27,-0xb1,-0xc1)+_0x107700(0x136,0x11f,0x119,0x113)},_0x2ac14c=extension_settings[extensionName],_0x115853=_0x2ac14c[_0x107700(0x1f8,0x214,0x16e,0x1c6)+_0x12a520(-0x17e,-0x17e,-0x156,-0x105)][_0x239a74];if(!_0x115853){toastr[_0x107700(0xe6,0xd9,0xd4,0x146)](_0x9015ae['qMsCS']);return;}let _0x364a1c=_0x12a520(-0xa5,-0x84,-0xd9,-0x9a)+_0x239a74+_0x12a520(-0xd7,-0x107,-0x108,-0x7e);const _0x14702f={};function _0x12a520(_0xa47dbb,_0x5d9717,_0x3ea828,_0x27dce7){return _0x229c23(_0xa47dbb-0x13d,_0x3ea828- -0x2f5,_0x3ea828-0x195,_0x5d9717);}_0x14702f[_0x107700(0x169,0x235,0x25b,0x1d6)]=_0x9015ae[_0x107700(0x190,0x224,0x15b,0x1a0)],_0x14702f[_0x107700(0x184,0x12f,0x191,0x1a2)]=_0x9015ae['nSeTq'],_0x14702f[_0x107700(0x1f2,0x179,0x1d3,0x209)]=_0x9015ae[_0x12a520(-0x91,-0x12b,-0x105,-0x14d)],_0x14702f['upperBodyB'+'ack']=_0x107700(0x1e4,0x14d,0x1f1,0x169),_0x14702f[_0x12a520(-0x134,-0x11f,-0x131,-0xea)]=_0x9015ae['leUBi'],_0x14702f[_0x12a520(-0xc2,-0xc3,-0xfc,-0x6d)+'ck']=_0x9015ae[_0x12a520(-0x5f,-0x15f,-0xd2,-0x8e)];const _0x339872=_0x14702f;let _0x2ed17d=-0x1c3c+0x25f4+-0x9b8;for(const _0x31be74 in _0x339872){if(_0x9015ae[_0x12a520(-0x9a,-0x19,-0x4e,0xe)]==='YGxig'){const _0x3ccb64=_0x57464e[_0x2479a1]||_0x9015ae[_0x12a520(-0xa9,-0xe3,-0x75,-0xd0)],_0x3335f5=_0x197648[_0x192b42];_0x77ee52+='•\x20'+_0x18a707[_0x3b87a7]+':\x0a',_0x400daa+=_0x107700(0x26e,0x1a1,0x250,0x219)+_0x3ccb64[_0x107700(0x292,0x1c5,0x1f3,0x21a)](-0x160a+-0x1986+0x2f90,-0x1*0x1060+-0x1e6c+0x2efe)+(_0x9015ae[_0x107700(0x1be,0x1b0,0xe5,0x13e)](_0x3ccb64[_0x107700(0x1cf,0x1d6,0x225,0x1dc)],-0x130a+0xf6a+0x3d2)?_0x9015ae[_0x12a520(-0xb9,-0x73,-0x8a,-0xc6)]:'')+'\x0a',_0x13c76f+=_0x12a520(-0x9d,-0xb2,-0x92,-0x6b)+_0x3335f5[_0x12a520(-0xb,0x7,-0x47,-0x84)](-0x245d*0x1+-0xa*-0x202+0x1*0x1049,0x1319+-0x7e*-0x25+-0x251d*0x1)+(_0x9015ae[_0x12a520(-0x1d2,-0x16a,-0x153,-0x1ba)](_0x3335f5[_0x107700(0x1aa,0x1e3,0x217,0x1dc)],-0x1430+0x1c81*0x1+-0x81f)?_0x9015ae[_0x107700(0x193,0x231,0x223,0x1d7)]:'')+'\x0a\x0a',_0x2365d7++;}else{if(_0x11ddfd[_0x31be74]&&_0x9015ae[_0x107700(0x154,0x259,0x151,0x1cb)](_0x11ddfd[_0x31be74],_0x115853[_0x31be74])){const _0x524ab1=_0x115853[_0x31be74]||_0x9015ae[_0x12a520(-0xff,-0x29,-0x75,-0x30)],_0x2657ba=_0x11ddfd[_0x31be74];_0x364a1c+='•\x20'+_0x339872[_0x31be74]+':\x0a',_0x364a1c+='\x20\x20旧:\x20'+_0x524ab1['substring'](0xa86+-0x2*0x5ab+-0x34*-0x4,0x12e3+0x1*-0x223d+-0x2*-0x7c6)+(_0x524ab1[_0x107700(0x20a,0x1ee,0x236,0x1dc)]>-0x1*-0x9f5+-0x1763+0xda0?_0x9015ae[_0x107700(0x24c,0x24b,0x25d,0x1d7)]:'')+'\x0a',_0x364a1c+=_0x12a520(-0x11c,-0xb9,-0x92,-0xcc)+_0x2657ba[_0x107700(0x18d,0x1bd,0x1b0,0x21a)](0x1*-0x2543+-0x2213+-0x31a*-0x17,0x3e*0x1+0xcb*0x2f+-0x2551)+(_0x9015ae[_0x12a520(-0x13b,-0x125,-0x153,-0x125)](_0x2657ba[_0x12a520(-0x21,-0x89,-0x85,-0x22)],0x24c3+-0x3*0xd04+0x27b)?_0x107700(0x12f,0x120,0x11c,0x199):'')+'\x0a\x0a',_0x2ed17d++;}}}if(_0x9015ae[_0x107700(0x157,0x19d,0x12c,0x111)](_0x2ed17d,-0x2016+-0xe13*-0x2+0x3f0*0x1)){if(_0x9015ae[_0x107700(0x12e,0x170,0x172,0x18e)]('YKdKT',_0x9015ae['RszLG'])){toastr[_0x12a520(-0x65,-0x99,-0xcb,-0x118)](_0x9015ae['doCfh']);return;}else{const _0x33c57c={};_0x33c57c[_0x107700(0xa5,0x189,0xc4,0x10d)]=_0x9015ae['DeOfx'],_0x33c57c[_0x12a520(-0x9b,-0x12f,-0xb7,-0x13a)]=_0x3a726f[_0x12a520(-0x110,-0x1af,-0x15f,-0x144)],_0x29226a[_0x107700(0xdc,0xbc,0xdd,0x10f)](_0x33c57c);}}_0x364a1c+='共\x20'+_0x2ed17d+'\x20项更改,是否应用?';const _0x355f97=await _0x9015ae[_0x12a520(-0xd9,-0x5c,-0xab,-0x44)](stylishConfirm,_0x364a1c);if(!_0x355f97){toastr[_0x107700(0x1a9,0x1ea,0x14f,0x196)](_0x9015ae[_0x107700(0x1c6,0x1be,0x1fa,0x16e)]);return;}for(const _0x4c0713 in _0x339872){if(_0x9015ae[_0x107700(0x190,0xaf,0x103,0x122)]!==_0x9015ae[_0x107700(0x120,0x13b,0x133,0x1af)]){if(_0x11ddfd[_0x4c0713]){if(_0x9015ae[_0x107700(0x1ea,0x1b9,0x277,0x1fb)](_0x9015ae[_0x107700(0x20e,0x186,0x1e4,0x1a8)],_0x12a520(-0x77,-0xb8,-0x8e,-0x64)))_0x115853[_0x4c0713]=_0x11ddfd[_0x4c0713];else for(const _0xcdbbf1 of _0x3c5716[_0x107700(0x13f,0x7f,0xf6,0x102)]){if(_0xcdbbf1['type']===_0x9015ae[_0x12a520(-0x111,-0x14b,-0x114,-0x104)]&&_0xcdbbf1[_0x12a520(-0xd7,-0xdc,-0xb7,-0x2c)]['includes'](_0x3a3337))return _0xc78702;}}}else{const _0x4ce155=_0x9015ae[_0x107700(0xe2,0x11f,0x13d,0x118)](typeof _0x537b0c,_0x9015ae['vpnnf'])?_0x486ed9:_0x4e3ece[_0x107700(0x127,0x10b,0x14b,0x14f)],_0x52f34a=_0x9015ae[_0x107700(0x136,0x23f,0x1c4,0x1b7)](typeof _0x380bf0,_0x9015ae['jHjRy'])&&_0x2a0854[_0x12a520(-0x165,-0x196,-0x119,-0xbd)]?_0x200d5d[_0x107700(0x17b,0xdf,0xf6,0x148)]:''+_0x23025d+_0x9015ae[_0x12a520(-0xd2,-0xd8,-0x14d,-0x1c7)](_0x468ec8,0x432*-0x1+0x1*-0x1b65+0x1f98),_0xeaa930={};_0xeaa930[_0x107700(0x172,0x157,0xbb,0x10d)]=_0x12a520(-0x123,-0xe4,-0xb7,-0x4f),_0xeaa930[_0x12a520(-0x5a,-0xa1,-0xb7,-0xf8)]='['+_0x52f34a+']',_0x446734['push'](_0xeaa930);let _0x4f1c06=_0x4ce155;!_0x4ce155[_0x12a520(-0x55,-0xeb,-0xc6,-0xc5)](_0x9015ae['mQHhL'])&&(_0x4f1c06='data:image'+_0x107700(0x123,0xf7,0x19b,0x17c)+'4,'+_0x4ce155);const _0x36897b={};_0x36897b['url']=_0x4f1c06,_0x36897b['detail']=_0x9015ae[_0x12a520(-0x3e,-0xd5,-0x6a,-0xb7)];const _0x1960a4={};_0x1960a4['type']='image_url',_0x1960a4[_0x107700(0x1d0,0x261,0x24a,0x210)]=_0x36897b,_0x126b3a[_0x12a520(-0x1bb,-0x194,-0x152,-0x135)](_0x1960a4);}}function _0x107700(_0x48b746,_0xe57608,_0x28c1c2,_0x2c4c82){return _0x229c23(_0x48b746-0x1bd,_0x2c4c82- -0x94,_0x28c1c2-0x172,_0x48b746);}_0x9015ae[_0x12a520(-0x173,-0x15a,-0x13a,-0x19a)](saveSettingsDebounced);const _0x234cf7=_0x9015ae['ttSxF']($,_0x9015ae[_0x12a520(-0x196,-0x119,-0x140,-0xbf)]);_0x234cf7['length']&&_0x9015ae[_0x12a520(-0x184,-0x1c7,-0x13a,-0x108)](loadOutfitPreset),updateOutfitFormFields(_0x11ddfd),console['log']('[outfitPro'+'mptModify]'+_0x12a520(-0x111,-0x12f,-0xf9,-0x6c)+_0x239a74+'\x22');}function updateOutfitFormFields(_0x24eaa5){function _0x422368(_0x309fb1,_0x431a05,_0x209769,_0x46657e){return _0x229c23(_0x309fb1-0x32,_0x309fb1-0x14a,_0x209769-0x184,_0x209769);}function _0x20a400(_0x43b44c,_0x1f726a,_0x7dc70d,_0x488ca0){return _0x229c23(_0x43b44c-0x157,_0x43b44c- -0x21e,_0x7dc70d-0x189,_0x7dc70d);}const _0x118130={'AXSQk':function(_0x462a33,_0x6702b6){return _0x462a33(_0x6702b6);},'rhviZ':'input','VpiZQ':_0x20a400(0x4c,0xc2,0x12,0x72),'njXzA':_0x20a400(0x7f,0x2,0x6e,0x103),'yGdmx':_0x20a400(-0x5a,-0x65,-0xb5,-0xe4)},_0x2083a5=[_0x118130['VpiZQ'],'nameEN',_0x118130[_0x20a400(0x6a,0xc4,0x10,-0x21)],_0x422368(0x3cb,0x455,0x3f7,0x38f)+_0x20a400(-0x82,-0xad,-0xd3,-0xce),_0x118130['yGdmx'],_0x422368(0x343,0x3c4,0x3d2,0x2d8)+'ck'];_0x2083a5[_0x422368(0x302,0x369,0x2c7,0x27b)](_0x1a9889=>{function _0x374bb5(_0x5a0e70,_0x2ccedf,_0x2a5f47,_0x35a384){return _0x20a400(_0x2a5f47- -0x22d,_0x2ccedf-0x142,_0x35a384,_0x35a384-0x4a);}function _0x3e56a6(_0x549e73,_0x1f872c,_0x45f462,_0x1dcd38){return _0x20a400(_0x1dcd38- -0x1f6,_0x1f872c-0x134,_0x549e73,_0x1dcd38-0xd1);}if(_0x24eaa5[_0x1a9889]){const _0x3029e2=document[_0x374bb5(-0x23f,-0x21e,-0x28c,-0x2c8)+_0x374bb5(-0x2fc,-0x237,-0x27c,-0x278)](_0x374bb5(-0x1ed,-0x1bc,-0x1dd,-0x175)+_0x1a9889);_0x3029e2&&(_0x3029e2['value']=_0x24eaa5[_0x1a9889],_0x118130['AXSQk']($,_0x3029e2)[_0x3e56a6(-0x167,-0x169,-0x196,-0x173)](_0x118130[_0x374bb5(-0x150,-0x238,-0x1af,-0x177)]));}});}